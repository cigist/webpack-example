!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";(function(t){n.d(e,"M",function(){return a}),n.d(e,"x",function(){return s}),n.d(e,"Q",function(){return c}),n.d(e,"w",function(){return l}),n.d(e,"r",function(){return f}),n.d(e,"q",function(){return p}),n.d(e,"y",function(){return h}),n.d(e,"E",function(){return d}),n.d(e,"n",function(){return v}),n.d(e,"A",function(){return m}),n.d(e,"z",function(){return g}),n.d(e,"b",function(){return $}),n.d(e,"L",function(){return y}),n.d(e,"d",function(){return b}),n.d(e,"K",function(){return w}),n.d(e,"c",function(){return x}),n.d(e,"p",function(){return O}),n.d(e,"o",function(){return E}),n.d(e,"D",function(){return S}),n.d(e,"f",function(){return C}),n.d(e,"H",function(){return j}),n.d(e,"F",function(){return k}),n.d(e,"I",function(){return T}),n.d(e,"s",function(){return _}),n.d(e,"t",function(){return A}),n.d(e,"C",function(){return R}),n.d(e,"B",function(){return P}),n.d(e,"U",function(){return N}),n.d(e,"e",function(){return D}),n.d(e,"g",function(){return M}),n.d(e,"T",function(){return I}),n.d(e,"v",function(){return V}),n.d(e,"J",function(){return q}),n.d(e,"R",function(){return L}),n.d(e,"S",function(){return H}),n.d(e,"u",function(){return U}),n.d(e,"l",function(){return F}),n.d(e,"k",function(){return B}),n.d(e,"j",function(){return W}),n.d(e,"G",function(){return z}),n.d(e,"i",function(){return G}),n.d(e,"h",function(){return J}),n.d(e,"P",function(){return K}),n.d(e,"m",function(){return Y}),n.d(e,"a",function(){return X}),n.d(e,"N",function(){return Z}),n.d(e,"O",function(){return tt});var r=n(1),i=n(2),o=n(3),a="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||void 0,u=a.angular||{},s=u.fromJson||JSON.parse.bind(JSON),c=u.toJson||JSON.stringify.bind(JSON),l=u.forEach||function(t,e,n){if(Object(r.a)(t))return t.forEach(e,n);Object.keys(t).forEach(function(n){return e(t[n],n)})},f=Object.assign||X,p=u.equals||Q;function h(t){return t}function d(){}function v(t,e,n,r,i){void 0===i&&(i=!1);var o=function(e){return t()[e].bind(n())};return(r=r||Object.keys(t())).reduce(function(t,n){return t[n]=i?function(t){return function(){return e[t]=o(t),e[t].apply(null,arguments)}}(n):o(n),t},e)}var m=function(t,e){return f(Object.create(t),e)},g=Object(i.e)($);function $(t,e){return-1!==t.indexOf(e)}var y=Object(i.e)(b);function b(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),t}var w=Object(i.e)(x);function x(t,e){return t.push(e),e}var O=function(t){return t.slice().forEach(function(e){"function"==typeof e&&e(),y(t,e)})};function E(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=f.apply(void 0,[{}].concat(e.reverse()));return f(r,j(t||{},Object.keys(r)))}var S=function(t,e){return f(t,e)};function C(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n}function j(t,e){var n={};for(var r in t)-1!==e.indexOf(r)&&(n[r]=t[r]);return n}function k(t,e){return Object.keys(t).filter(Object(i.i)(g(e))).reduce(function(e,n){return e[n]=t[n],e},{})}function T(t,e){return P(t,Object(i.n)(e))}function _(t,e){var n=Object(r.a)(t),i=n?[]:{},o=n?function(t){return i.push(t)}:function(t,e){return i[e]=t};return l(t,function(t,n){e(t,n)&&o(t,n)}),i}function A(t,e){var n;return l(t,function(t,r){n||e(t,r)&&(n=t)}),n}var R=P;function P(t,e,n){return n=n||(Object(r.a)(t)?[]:{}),l(t,function(t,r){return n[r]=e(t,r)}),n}var N=function(t){return Object.keys(t).map(function(e){return t[e]})},D=function(t,e){return t&&e},M=function(t,e){return t||e},I=function(t,e){return t.concat(e)},V=function(t,e){return Object(r.a)(e)?t.concat(e.reduce(V,[])):q(t,e)};function q(t,e){return t.push(e),t}var L=function(t,e){return g(t,e)?t:q(t,e)},H=function(t){return t.reduce(I,[])},U=function(t){return t.reduce(V,[])},F=W,B=W;function W(t,e){return void 0===e&&(e="assert failure"),function(n){var i=t(n);if(!i)throw new Error(Object(r.d)(e)?e(n):e);return i}}var z=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})};function G(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];for(var n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),r=[],i=function(e){switch(t.length){case 1:r.push([t[0][e]]);break;case 2:r.push([t[0][e],t[1][e]]);break;case 3:r.push([t[0][e],t[1][e],t[2][e]]);break;case 4:r.push([t[0][e],t[1][e],t[2][e],t[3][e]]);break;default:r.push(t.map(function(t){return t[e]}))}},o=0;o<n;o++)i(o);return r}function J(t,e){var n,i;if(Object(r.a)(e)&&(n=e[0],i=e[1]),!Object(r.l)(n))throw new Error("invalid parameters to applyPairs");return t[n]=i,t}function K(t){return t.length&&t[t.length-1]||void 0}function Y(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e||(e={}),f(e,t)}function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r=Object.keys(n),i=0;i<r.length;i++)t[r[i]]=n[r[i]]}return t}function Q(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n=typeof t;if(n!==typeof e||"object"!==n)return!1;var o=[t,e];if(Object(i.a)(r.a)(o))return function(t,e){return t.length===e.length&&G(t,e).reduce(function(t,e){return t&&Q(e[0],e[1])},!0)}(t,e);if(Object(i.a)(r.b)(o))return t.getTime()===e.getTime();if(Object(i.a)(r.k)(o))return t.toString()===e.toString();if(Object(i.a)(r.d)(o))return!0;if([r.d,r.a,r.b,r.k].map(i.c).reduce(function(t,e){return t||!!e(o)},!1))return!1;var a={};for(var u in t){if(!Q(t[u],e[u]))return!1;a[u]=!0}for(var u in e)if(!a[u])return!1;return!0}var Z=function(t){return t.catch(function(t){return 0})&&t},tt=function(t){return Z(o.b.$q.reject(t))}}).call(this,n(14))},function(t,e,n){"use strict";n.d(e,"m",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"h",function(){return f}),n.d(e,"l",function(){return p}),n.d(e,"i",function(){return h}),n.d(e,"a",function(){return d}),n.d(e,"b",function(){return v}),n.d(e,"k",function(){return m}),n.d(e,"e",function(){return g}),n.d(e,"j",function(){return $});var r=n(2),i=Object.prototype.toString,o=function(t){return function(e){return typeof e===t}},a=o("undefined"),u=Object(r.i)(a),s=function(t){return null===t},c=Object(r.j)(s,a),l=o("function"),f=o("number"),p=o("string"),h=function(t){return null!==t&&"object"==typeof t},d=Array.isArray,v=function(t){return"[object Date]"===i.call(t)},m=function(t){return"[object RegExp]"===i.call(t)};function g(t){if(d(t)&&t.length){var e=t.slice(0,-1),n=t.slice(-1);return!(e.filter(Object(r.i)(p)).length||n.filter(Object(r.i)(l)).length)}return l(t)}var $=Object(r.b)(h,Object(r.m)(Object(r.n)("then"),l))},function(t,e,n){"use strict";function r(t){var e=[].slice.apply(arguments,[1]),n=t.length;return function e(r){return r.length>=n?t.apply(null,r):function(){return e(r.concat([].slice.apply(arguments)))}}(e)}function i(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(null,[].slice.call(arguments).reverse())}n.d(e,"e",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"m",function(){return o}),n.d(e,"n",function(){return a}),n.d(e,"o",function(){return u}),n.d(e,"k",function(){return s}),n.d(e,"i",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"j",function(){return f}),n.d(e,"a",function(){return p}),n.d(e,"c",function(){return h}),n.d(e,"h",function(){return d}),n.d(e,"f",function(){return v}),n.d(e,"p",function(){return m}),n.d(e,"g",function(){return g}),n.d(e,"l",function(){return $});var a=function(t){return function(e){return e&&e[t]}},u=r(function(t,e,n){return n&&n[t]===e}),s=function(t){return o.apply(null,t.split(".").map(a))},c=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}};function l(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)&&e.apply(null,n)}}function f(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)||e.apply(null,n)}}var p=function(t){return function(e){return e.reduce(function(e,n){return e&&!!t(n)},!0)}},h=function(t){return function(e){return e.reduce(function(e,n){return e||!!t(n)},!1)}},d=function(t){return function(e){return null!=e&&e.constructor===t||e instanceof t}},v=function(t){return function(e){return t===e}},m=function(t){return function(){return t}};function g(t,e){return function(n){return n[t].apply(n,e)}}function $(t){return function(e){for(var n=0;n<t.length;n++)if(t[n][0](e))return t[n][1](e)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}},i={$q:void 0,$injector:void 0}},function(t,e,n){n(12),t.exports=angular},function(t,e,n){"use strict";n(6);!function(t){t&&t.__esModule}(n(11))},function(t,e,n){var r=n(7);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,"div h1{color:black}button{font-size:13px;padding:5px 10px;background-color:orange;color:white;border:none;border-radius:2px}button:hover{font-size:13px;padding:5px 10px;background-color:gray;color:white;border:none;border-radius:2px}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),a=null,u=0,s=[],c=n(10);function l(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(m(i.parts[a],e))}else{var u=[];for(a=0;a<i.parts.length;a++)u.push(m(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:u}}}}function f(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}function p(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=s[s.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),s.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=s.indexOf(t);e>=0&&s.splice(e,1)}function d(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function m(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var s=u++;n=a||(a=d(e)),r=$.bind(null,n,s,!1),i=$.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=c(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),u=t.href;t.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}.bind(null,n,e),i=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){h(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return l(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(u=r[a.id]).refs--,i.push(u)}t&&l(f(t,e),e);for(o=0;o<i.length;o++){var u;if(0===(u=i[o]).refs){for(var s=0;s<u.parts.length;s++)u.parts[s]();delete r[u.id]}}}};var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function $(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(4)),i=(a(n(13)),a(n(15))),o=a(n(18));function a(t){return t&&t.__esModule?t:{default:t}}var u=r.default.module("app",["ui.router"]);u.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("/",{url:"/",templateUrl:"pages/home.html"}).state("/profile",{url:"/profile",templateUrl:"pages/profile.html"})}]),u.controller("HomeCtrl",i.default),u.controller("ProfileCtrl",o.default),e.default=u},function(t,e){
/**
 * @license AngularJS v1.7.2
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(t){if(!L(t))return e;q(t.objectMaxDepth)&&(e.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN),q(t.urlErrorParamsEnabled)&&X(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function r(t){return F(t)&&t>0}function i(t,n){n=n||Error;var r="https://errors.angularjs.org/1.7.2/",i=r.replace(".","\\.")+"[\\s\\S]*",o=new RegExp(i,"g");return function(){var i,a,u=arguments[0],s=arguments[1],c="["+(t?t+":":"")+u+"] ",l=pt(arguments,2).map(function(t){return Jt(t,e.objectMaxDepth)});if(c+=s.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<l.length?l[e].replace(o,""):t}),c+="\n"+r+(t?t+"/":"")+u,e.urlErrorParamsEnabled)for(a=0,i="?";a<l.length;a++,i="&")c+=i+"p"+a+"="+encodeURIComponent(l[a]);return new n(c)}}var o,a,u,s,c=/^\/(.+)\/([a-z]*)$/,l="validity",f=Object.prototype.hasOwnProperty,p=function(t){return U(t)?t.toLowerCase():t},h=function(t){return U(t)?t.toUpperCase():t},d=[].slice,v=[].splice,m=[].push,g=Object.prototype.toString,$=Object.getPrototypeOf,y=i("ng"),b=t.angular||(t.angular={}),w=0;function x(t){if(null==t||K(t))return!1;if(W(t)||U(t)||a&&t instanceof a)return!0;var e="length"in Object(t)&&t.length;return F(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function O(t,e,n){var r,i;if(t)if(G(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(W(t)||x(t)){var o="object"!=typeof t;for(r=0,i=t.length;r<i;r++)(o||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==O)t.forEach(e,n,t);else if(H(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)f.call(t,r)&&e.call(n,t[r],r,t);return t}function E(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function S(t){return function(e,n){t(n,e)}}function C(){return++w}function j(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function k(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var a=e[i];if(L(a)||G(a))for(var u=Object.keys(a),s=0,c=u.length;s<c;s++){var l=u[s],f=a[l];n&&L(f)?B(f)?t[l]=new Date(f.valueOf()):J(f)?t[l]=new RegExp(f):f.nodeName?t[l]=f.cloneNode(!0):nt(f)?t[l]=f.clone():(L(t[l])||(t[l]=W(f)?[]:{}),k(t[l],[f],!0)):t[l]=f}}return j(t,r),t}function T(t){return k(t,d.call(arguments,1),!1)}function _(t){return k(t,d.call(arguments,1),!0)}function A(t){return parseInt(t,10)}o=t.document.documentMode;var R=Number.isNaN||function(t){return t!=t};function P(t,e){return T(Object.create(t),e)}function N(){}function D(t){return t}function M(t){return function(){return t}}function I(t){return G(t.toString)&&t.toString!==g}function V(t){return void 0===t}function q(t){return void 0!==t}function L(t){return null!==t&&"object"==typeof t}function H(t){return null!==t&&"object"==typeof t&&!$(t)}function U(t){return"string"==typeof t}function F(t){return"number"==typeof t}function B(t){return"[object Date]"===g.call(t)}function W(t){return Array.isArray(t)||t instanceof Array}function z(t){switch(g.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function G(t){return"function"==typeof t}function J(t){return"[object RegExp]"===g.call(t)}function K(t){return t&&t.window===t}function Y(t){return t&&t.$evalAsync&&t.$watch}function X(t){return"boolean"==typeof t}function Q(t){return t&&G(t.then)}N.$inject=[],D.$inject=[];var Z=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return U(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function rt(t){return p(t.nodeName||t[0]&&t[0].nodeName)}function it(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function ot(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function at(t,e,n){var i=[],o=[];if(n=r(n)?n:NaN,e){if(function(t){return t&&F(t.length)&&Z.test(g.call(t))}(e)||function(t){return"[object ArrayBuffer]"===g.call(t)}(e))throw y("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw y("cpi","Can't copy! Source and destination are identical.");return W(e)?e.length=0:O(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),i.push(t),o.push(e),a(t,e,n)}return u(t,n);function a(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(W(t))for(var o=0,a=t.length;o<a;o++)e.push(u(t[o],n));else if(H(t))for(r in t)e[r]=u(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=u(t[r],n));else for(r in t)f.call(t,r)&&(e[r]=u(t[r],n));return j(e,i),e}function u(t,e){if(!L(t))return t;var n=i.indexOf(t);if(-1!==n)return o[n];if(K(t)||Y(t))throw y("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,s=function(t){switch(g.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(u(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(G(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===s&&(s=W(t)?[]:Object.create($(t)),r=!0),i.push(t),o.push(s),r?a(t,s,e):s}}function ut(t,e){return t===e||t!=t&&e!=e}function st(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o===typeof e&&"object"===o){if(!W(t)){if(B(t))return!!B(e)&&ut(t.getTime(),e.getTime());if(J(t))return!!J(e)&&t.toString()===e.toString();if(Y(t)||Y(e)||K(t)||K(e)||W(e)||B(e)||J(e))return!1;for(r in i=Lt(),t)if("$"!==r.charAt(0)&&!G(t[r])){if(!st(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&q(e[r])&&!G(e[r]))return!1;return!0}if(!W(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!st(t[r],e[r]))return!1;return!0}}return!1}var ct=function(){if(!q(ct.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ct.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ct.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ct.rules},lt=function(){if(q(lt.name_))return lt.name_;var e,n,r,i,o=jt.length;for(n=0;n<o;++n)if(r=jt[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return lt.name_=i};function ft(t,e,n){return t.concat(d.call(e,n))}function pt(t,e){return d.call(t,e||0)}function ht(t,e){var n=arguments.length>2?pt(arguments,2):[];return!G(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ft(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:K(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":Y(n)&&(r="$SCOPE"),r}function vt(t,e){if(!V(t))return F(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function mt(t){return U(t)?JSON.parse(t):t}var gt=/:/g;function $t(t,e){t=t.replace(gt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return R(n)?e:n}function yt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function bt(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return yt(t,n*($t(e,r)-r))}function wt(t){t=a(t).clone().empty();var e=a("<div></div>").append(t).html();try{return t[0].nodeType===Ft?p(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+p(e)})}catch(t){return p(e)}}function xt(t){try{return decodeURIComponent(t)}catch(t){}}function Ot(t){var e={};return O((t||"").split("&"),function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),q(r=xt(r))&&(i=!q(i)||xt(i),f.call(e,r)?W(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))}),e}function Et(t){var e=[];return O(t,function(t,n){W(t)?O(t,function(t){e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))}):e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))}),e.length?e.join("&"):""}function St(t){return Ct(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ct(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var jt=["ng-","data-ng-","ng:","x-ng-"];var kt=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every(function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(t.document);function Tt(e,n){var r,i,o={};if(O(jt,function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))}),O(jt,function(t){var n,o=t+"app";!r&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!kt)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,r,i=jt.length;for(r=0;r<i;++r)if(n=jt[r]+e,U(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],o)}}function _t(e,n,r){L(r)||(r={});r=T({strictDi:!1},r);var i=function(){if((e=a(e)).injector()){var i=e[0]===t.document?"document":wt(e);throw y("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Qe(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!u.test(t.name))return i();t.name=t.name.replace(u,""),b.resumeBootstrap=function(t){return O(t,function(t){n.push(t)}),i()},G(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function At(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Rt(t){var e=b.element(t).injector();if(!e)throw y("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Pt=/[A-Z]/g;function Nt(t,e){return e=e||"_",t.replace(Pt,function(t,n){return(n?e:"")+t.toLowerCase()})}var Dt=!1;function Mt(t,e,n){if(!t)throw y("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function It(t,e,n){return n&&W(t)&&(t=t[t.length-1]),Mt(G(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Vt(t,e){if("hasOwnProperty"===t)throw y("badname","hasOwnProperty is not a valid {0} name",e)}function qt(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=a(d.call(t,0,i))),e.push(n));return e||t}function Lt(){return Object.create(null)}function Ht(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!I(t)||W(t)||B(t)?vt(t):t.toString()}return t}var Ut=1,Ft=3,Bt=8,Wt=9,zt=11;function Gt(t,e){if(W(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(L(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Jt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):V(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return r(e)&&(t=b.copy(t,null,e)),JSON.stringify(t,function(t,e){if(L(e=dt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e})}(t,e):t}var Kt={full:"1.7.2",major:1,minor:7,dot:2,codeName:"extreme-compatiplication"};he.expando="ng339";var Yt=he.cache={},Xt=1;he._data=function(t){return this.cache[t[this.expando]]||{}};var Qt=/-([a-z])/g,Zt=/^-ms-/,te={mouseleave:"mouseout",mouseenter:"mouseover"},ee=i("jqLite");function ne(t,e){return e.toUpperCase()}function re(t){return t.replace(Qt,ne)}var ie=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,oe=/<|&#?\w+;/,ae=/<([\w:-]+)/,ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,se={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ce(t){return!oe.test(t)}function le(t){var e=t.nodeType;return e===Ut||!e||e===Wt}function fe(t,e){var n,r,i,o,a=e.createDocumentFragment(),u=[];if(ce(t))u.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),r=(ae.exec(t)||["",""])[1].toLowerCase(),i=se[r]||se._default,n.innerHTML=i[1]+t.replace(ue,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;u=ft(u,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",O(u,function(t){a.appendChild(t)}),a}se.optgroup=se.option,se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td;var pe=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function he(e){if(e instanceof he)return e;var n;if(U(e)&&(e=tt(e),n=!0),!(this instanceof he)){if(n&&"<"!==e.charAt(0))throw ee("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new he(e)}n?Se(this,function(e,n){var r;return n=n||t.document,(r=ie.exec(e))?[n.createElement(r[1])]:(r=fe(e,n))?r.childNodes:[]}(e)):G(e)?_e(e):Se(this,e)}function de(t){return t.cloneNode(!0)}function ve(t,e){!e&&le(t)&&a.cleanData([t]),t.querySelectorAll&&a.cleanData(t.querySelectorAll("*"))}function me(t){var e;for(e in t)return!1;return!0}function ge(t){var e=t.ng339,n=e&&Yt[e],r=n&&n.events,i=n&&n.data;i&&!me(i)||r&&!me(r)||(delete Yt[e],t.ng339=void 0)}function $e(t,e,n,r){if(q(r))throw ee("offargs","jqLite#off() does not support the `selector` argument");var i=be(t),o=i&&i.events,a=i&&i.handle;if(a){if(e){var u=function(e){var r=o[e];q(n)&&ot(r||[],n),q(n)&&r&&r.length>0||(t.removeEventListener(e,a),delete o[e])};O(e.split(" "),function(t){u(t),te[t]&&u(te[t])})}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,a),delete o[e];ge(t)}}function ye(t,e){var n=t.ng339,r=n&&Yt[n];r&&(e?delete r.data[e]:r.data={},ge(t))}function be(t,e){var n=t.ng339,r=n&&Yt[n];return e&&!r&&(t.ng339=n=++Xt,r=Yt[n]={events:{},data:{},handle:void 0}),r}function we(t,e,n){if(le(t)){var r,i=q(n),o=!i&&e&&!L(e),a=!e,u=be(t,!o),s=u&&u.data;if(i)s[re(e)]=n;else{if(a)return s;if(o)return s&&s[re(e)];for(r in e)s[re(r)]=e[r]}}}function xe(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function Oe(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;O(e.split(" "),function(t){t=tt(t),r=r.replace(" "+t+" "," ")}),r!==n&&t.setAttribute("class",tt(r))}}function Ee(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;O(e.split(" "),function(t){t=tt(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")}),r!==n&&t.setAttribute("class",tt(r))}}function Se(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ce(t,e){return je(t,"$"+(e||"ngController")+"Controller")}function je(t,e,n){t.nodeType===Wt&&(t=t.documentElement);for(var r=W(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if(q(n=a.data(t,r[i])))return n;t=t.parentNode||t.nodeType===zt&&t.host}}function ke(t){for(ve(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Te(t,e){e||ve(t);var n=t.parentNode;n&&n.removeChild(t)}function _e(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var Ae=he.prototype={ready:_e,toString:function(){var t=[];return O(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return a(t>=0?this[t]:this[this.length+t])},length:0,push:m,sort:[].sort,splice:[].splice},Re={};O("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Re[p(t)]=t});var Pe={};O("input,select,option,textarea,button,form,details".split(","),function(t){Pe[t]=!0});var Ne={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function De(t,e){var n=Re[e.toLowerCase()];return n&&Pe[rt(t)]&&n}function Me(t,e,n){n.call(t,e)}function Ie(t,e,n){var r=e.relatedTarget;r&&(r===t||pe.call(t,r))||n.call(t,e)}function Ve(){this.$get=function(){return T(he,{hasClass:function(t,e){return t.attr&&(t=t[0]),xe(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Ee(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Oe(t,e)}})}}function qe(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||C)():r+":"+t}O({data:we,removeData:ye,hasData:function(t){for(var e in Yt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ye(t[e]),$e(t[e])}},function(t,e){he[e]=t}),O({data:we,inheritedData:je,scope:function(t){return a.data(t,"$scope")||je(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return a.data(t,"$isolateScope")||a.data(t,"$isolateScopeNoTemplate")},controller:Ce,injector:function(t){return je(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:xe,css:function(t,e,n){if(e=function(t){return re(t.replace(Zt,"ms-"))}(e),!q(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==Ft&&2!==i&&i!==Bt&&t.getAttribute){var o=p(e),a=Re[o];if(!q(n))return r=t.getAttribute(e),a&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&a?t.removeAttribute(e):t.setAttribute(e,a?o:n)}},prop:function(t,e,n){if(!q(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(V(e)){var n=t.nodeType;return n===Ut||n===Ft?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(V(e)){if(t.multiple&&"select"===rt(t)){var n=[];return O(t.options,function(t){t.selected&&n.push(t.value||t.text)}),n}return t.value}t.value=e},html:function(t,e){if(V(e))return t.innerHTML;ve(t,!0),t.innerHTML=e},empty:ke},function(t,e){he.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==ke&&V(2===t.length&&t!==xe&&t!==Ce?e:n)){if(L(e)){for(r=0;r<o;r++)if(t===we)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var a=t.$dv,u=V(a)?Math.min(o,1):o,s=0;s<u;s++){var c=t(this[s],e,n);a=a?a+c:c}return a}for(r=0;r<o;r++)t(this[r],e,n);return this}}),O({removeData:ye,on:function(t,e,n,r){if(q(r))throw ee("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(le(t)){var i=be(t,!0),o=i.events,a=i.handle;a||(a=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(V(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var u=i.specialHandlerWrapper||Me;o>1&&(i=Gt(i));for(var s=0;s<o;s++)n.isImmediatePropagationStopped()||u(t,n,i[s])}};return n.elem=t,n}(t,o));for(var u=e.indexOf(" ")>=0?e.split(" "):[e],s=u.length,c=function(e,r,i){var u=o[e];u||((u=o[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,a)),u.push(n)};s--;)e=u[s],te[e]?(c(te[e],Ie),c(e,void 0,!0)):c(e)}},off:$e,one:function(t,e,n){(t=a(t)).on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;ve(t),O(new he(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return O(t.childNodes,function(t){t.nodeType===Ut&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Ut||n===zt)for(var r=0,i=(e=new he(e)).length;r<i;r++){var o=e[r];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===Ut){var n=t.firstChild;O(new he(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){!function(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}(t,a(e).eq(0).clone()[0])},remove:Te,detach:function(t){Te(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new he(e)).length;i<o;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Ee,removeClass:Oe,toggleClass:function(t,e,n){e&&O(e.split(" "),function(e){var r=n;V(r)&&(r=!xe(t,e)),(r?Ee:Oe)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==zt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:de,triggerHandler:function(t,e,n){var r,i,o,a=e.type||e,u=be(t),s=u&&u.events,c=s&&s[a];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:N,type:a,target:t},e.type&&(r=T(r,e)),i=Gt(c),o=n?[r].concat(n):[r],O(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){he.prototype[e]=function(e,n,r){for(var i,o=0,u=this.length;o<u;o++)V(i)?q(i=t(this[o],e,n,r))&&(i=a(i)):Se(i,t(this[o],e,n,r));return q(i)?i:this}}),he.prototype.bind=he.prototype.on,he.prototype.unbind=he.prototype.off;var Le=Object.create(null);function He(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}He.prototype={_idx:function(t){return t===this._lastKey?this._lastIndex:(this._lastKey=t,this._lastIndex=this._keys.indexOf(t),this._lastIndex)},_transformKey:function(t){return R(t)?Le:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Ue=He,Fe=[function(){this.$get=[function(){return Ue}]}],Be=/^([^(]+?)=>/,We=/^[^(]*\(\s*([^)]*)\)/m,ze=/,/,Ge=/^\s*(_?)(\S+?)\1\s*$/,Je=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ke=i("$injector");function Ye(t){return Function.prototype.toString.call(t)}function Xe(t){var e=Ye(t).replace(Je,"");return e.match(Be)||e.match(We)}function Qe(t,e){e=!0===e;var n={},r="Provider",i=[],a=new Ue,u={$provide:{provider:d(v),factory:d(m),service:d(function(t,e){return m(t,["$injector",function(t){return t.instantiate(e)}])}),value:d(function(t,e){return m(t,M(e),!1)}),constant:d(function(t,e){Vt(t,"constant"),u[t]=e,l[t]=e}),decorator:function(t,e){var n=c.get(t+r),i=n.$get;n.$get=function(){var t=p.invoke(i,n);return p.invoke(e,null,{$delegate:t})}}}},c=u.$injector=$(u,function(t,e){throw b.isString(e)&&i.push(e),Ke("unpr","Unknown provider: {0}",i.join(" <- "))}),l={},f=$(l,function(t,e){var n=c.get(t+r,e);return p.invoke(n.$get,n,void 0,t)}),p=f;u["$injector"+r]={$get:M(f)},p.modules=c.modules=Lt();var h=g(t);return(p=f.get("$injector")).strictDi=e,O(h,function(t){t&&p.invoke(t)}),p.loadNewModules=function(t){O(g(t),function(t){t&&p.invoke(t)})},p;function d(t){return function(e,n){if(!L(e))return t(e,n);O(e,S(t))}}function v(t,e){if(Vt(t,"service"),(G(e)||W(e))&&(e=c.instantiate(e)),!e.$get)throw Ke("pget","Provider '{0}' must define $get factory method.",t);return u[t+r]=e}function m(t,e,n){return v(t,{$get:!1!==n?function(t,e){return function(){var n=p.invoke(e,this);if(V(n))throw Ke("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}(t,e):e})}function g(t){Mt(V(t)||W(t),"modulesToLoad","not an array");var e,n=[];return O(t,function(t){if(!a.get(t)){a.set(t,!0);try{U(t)?(e=s(t),p.modules[t]=e,n=n.concat(g(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):G(t)?n.push(c.invoke(t)):W(t)?n.push(c.invoke(t)):It(t,"module")}catch(e){throw W(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ke("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=c.get(r[0]);i[r[1]].apply(i,r[2])}}}),n}function $(t,a){function s(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ke("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=a(e,r),t[e]}catch(r){throw t[e]===n&&delete t[e],r}finally{i.shift()}}function c(t,n,r){for(var i=[],o=Qe.$$annotate(t,e,r),a=0,u=o.length;a<u;a++){var c=o[a];if("string"!=typeof c)throw Ke("itkn","Incorrect injection token! Expected service name as string, got {0}",c);i.push(n&&n.hasOwnProperty(c)?n[c]:s(c,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i=c(t,n,r);return W(t)&&(t=t[t.length-1]),function(t){if(o||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return X(e)||(e=t.$$ngIsClass=/^class\b/.test(Ye(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,n){var r=W(t)?t[t.length-1]:t,i=c(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:s,annotate:Qe.$$annotate,has:function(e){return u.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Ze(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var o=n.document;function u(t){if(t){t.scrollIntoView();var e=function(){var t=s.yOffset;if(G(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else F(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function s(t){var e;(t=U(t)?t:F(t)?t.toString():r.hash())?(e=o.getElementById(t))?u(e):(e=function(t){var e=null;return Array.prototype.some.call(t,function(t){if("a"===rt(t))return e=t,!0}),e}(o.getElementsByName(t)))?u(e):"top"===t&&u(null):u(null)}return e&&i.$watch(function(){return r.hash()},function(e,n){e===n&&""===e||function(e,n){"complete"===(n=n||t).document.readyState?n.setTimeout(e):a(n).on("load",e)}(function(){i.$evalAsync(s)})}),s}]}Qe.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw U(n)&&n||(n=t.name||function(t){var e=Xe(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Ke("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);O(Xe(t)[1].split(ze),function(t){t.replace(Ge,function(t,e,n){r.push(n)})})}t.$inject=r}}else W(t)?(It(t[i=t.length-1],"fn"),r=t.slice(0,i)):It(t,"fn",!0);return r};var tn=i("$animate"),en=1;function nn(t,e){return t||e?t?e?(W(t)&&(t=t.join(" ")),W(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function rn(t){return L(t)?t:{}}var on=function(){this.$get=N},an=function(){var t=new Ue,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:N,on:N,off:N,pin:N,push:function(a,u,s,c){c&&c(),(s=s||{}).from&&a.css(s.from),s.to&&a.css(s.to),(s.addClass||s.removeClass)&&function(n,a,u){var s=t.get(n)||{},c=i(s,a,!0),l=i(s,u,!1);(c||l)&&(t.set(n,s),e.push(n),1===e.length&&r.$$postDigest(o))}(a,s.addClass,s.removeClass);var l=new n;return l.complete(),l}};function i(t,e,n){var r=!1;return e&&O(e=U(e)?e.split(" "):W(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function o(){O(e,function(e){var n=t.get(e);if(n){var r=function(t){U(t)&&(t=t.split(" "));var e=Lt();return O(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),i="",o="";O(n,function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)}),O(e,function(t){i&&Ee(t,i),o&&Oe(t,o)}),t.delete(e)}}),e.length=0}}]},un=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw tn("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=G(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&((n=t instanceof RegExp?t:null)&&new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(n.toString())))throw n=null,tn("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===en)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,r,i,o){return r=r&&a(r),i=i&&a(i),e(n,r=r||i.parent(),i),t.push(n,"enter",rn(o))},move:function(n,r,i,o){return r=r&&a(r),i=i&&a(i),e(n,r=r||i.parent(),i),t.push(n,"move",rn(o))},leave:function(e,n){return t.push(e,"leave",rn(n),function(){e.remove()})},addClass:function(e,n,r){return(r=rn(r)).addClass=nn(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=rn(r)).removeClass=nn(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=rn(i)).addClass=nn(i.addClass,n),i.removeClass=nn(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return(o=rn(o)).from=o.from?T(o.from,n):n,o.to=o.to?T(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=nn(o.tempClasses,i),t.push(e,"animate",o)}}}]}],sn=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},cn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function r(){if(n===t.length)return void e(!0);t[n](function(t){!1!==t?(n++,r()):e(!1)})}()},o.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}O(t,function(t){t.done(i)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:N,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(O(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},ln=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=at(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var o,a=new n;return{start:u,end:u};function u(){return t(function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),o||a.complete(),o=!0}),a}}}]};function fn(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new function(t,e,n,r){var i=this,o=t.location,u=t.history,s=t.setTimeout,c=t.clearTimeout,l={};i.isMock=!1;var f=0,p=[];function h(t){try{t.apply(null,pt(arguments,1))}finally{if(0==--f)for(;p.length;)try{p.pop()()}catch(t){n.error(t)}}}i.$$completeOutstandingRequest=h,i.$$incOutstandingRequestCount=function(){f++},i.notifyWhenNoOutstandingRequests=function(t){0===f?t():p.push(t)};var d,v,m=o.href,g=e.find("base"),$=null,y=r.history?function(){try{return u.state}catch(t){}}:N;S(),i.url=function(e,n,a){if(V(a)&&(a=null),o!==t.location&&(o=t.location),u!==t.history&&(u=t.history),e){var s=v===a;if(m===e&&(!r.history||s))return i;var c=m&&ur(m)===ur(e);return m=e,v=a,!r.history||c&&s?(c||($=e),n?o.replace(e):c?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&($=e)):(u[n?"replaceState":"pushState"](a,"",e),S()),$&&($=e),i}return $||o.href},i.state=function(){return d};var b=[],w=!1;function x(){$=null,C()}var E=null;function S(){st(d=V(d=y())?null:d,E)&&(d=E),E=d,v=d}function C(){var t=v;S(),m===i.url()&&t===d||(m=i.url(),v=d,O(b,function(t){t(i.url(),d)}))}i.onUrlChange=function(e){return w||(r.history&&a(t).on("popstate",x),a(t).on("hashchange",x),w=!0),b.push(e),e},i.$$applicationDestroyed=function(){a(t).off("hashchange popstate",x)},i.$$checkUrlChange=C,i.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},i.defer=function(t,e){var n;return f++,n=s(function(){delete l[n],h(t)},e||0),l[n]=!0,n},i.defer.cancel=function(t){return!!l[t]&&(delete l[t],c(t),h(N),!0)}}(t,r,e,n)}]}function pn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var r=0,o=T({},n,{id:e}),a=Lt(),u=n&&n.capacity||Number.MAX_VALUE,s=Lt(),c=null,l=null;return t[e]={put:function(t,e){if(!V(e)){if(u<Number.MAX_VALUE)f(s[t]||(s[t]={key:t}));return t in a||r++,a[t]=e,r>u&&this.remove(l.key),e}},get:function(t){if(u<Number.MAX_VALUE){var e=s[t];if(!e)return;f(e)}return a[t]},remove:function(t){if(u<Number.MAX_VALUE){var e=s[t];if(!e)return;e===c&&(c=e.p),e===l&&(l=e.n),p(e.n,e.p),delete s[t]}t in a&&(delete a[t],r--)},removeAll:function(){a=Lt(),r=0,s=Lt(),c=l=null},destroy:function(){a=null,o=null,s=null,delete t[e]},info:function(){return T({},o,{size:r})}};function f(t){t!==c&&(l?l===t&&(l=t.n):l=t,p(t.n,t.p),p(t,c),(c=t).n=null)}function p(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return O(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function hn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var dn=i("$compile");var vn=new function(){};function mn(e,n){var r={},i="Directive",u=/^\s*directive:\s*([\w-]+)\s+(.*)$/,s=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,h=/^(on[a-z]+|formaction)$/,d=Lt();function v(t,e,n){var r=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,i=Lt();return O(t,function(t,o){if((t=t.trim())in d)i[o]=d[t];else{var a=t.match(r);if(!a)throw dn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(d[t]=i[o])}}),i}function m(t,e){var n={isolateScope:null,bindToController:null};if(L(t.scope)&&(!0===t.bindToController?(n.bindToController=v(t.scope,e,!0),n.isolateScope={}):n.isolateScope=v(t.scope,e,!1)),L(t.bindToController)&&(n.bindToController=v(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw dn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return Mt(n,"name"),Vt(n,"directive"),U(n)?(!function(t){var e=t.charAt(0);if(!e||e!==p(e))throw dn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw dn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Mt(o,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+i,["$injector","$exceptionHandler",function(t,e){var i=[];return O(r[n],function(r,o){try{var a=t.invoke(r);G(a)?a={compile:M(a)}:!a.compile&&a.link&&(a.compile=M(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!W(e)&&L(e)&&O(e,function(t,n){var r=t.match(l);t.substring(r[0].length)||(e[n]=r[0]+n)}),e}(a),a.restrict=function(t,e){if(t&&(!U(t)||!/[EACM]/.test(t)))throw dn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=r.$$moduleName,i.push(a)}catch(t){e(t)}}),i}])),r[n].push(o)):O(n,S(t)),this},this.component=function t(e,n){if(!U(e))return O(e,S(ht(this,t))),this;var r=n.controller||function(){};function i(t){function e(e){return G(e)||W(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=n.template||n.templateUrl?n.template:"",o={controller:r,controllerAs:function(t,e){if(e&&U(e))return e;if(U(t)){var n=En.exec(t);if(n)return n[3]}}(n.controller)||n.controllerAs||"$ctrl",template:e(i),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return O(n,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return O(n,function(t,e){"$"===e.charAt(0)&&(i[e]=t,G(r)&&(r[e]=t))}),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationWhitelist=function(t){return q(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return q(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var $=!0;this.debugInfoEnabled=function(t){return q(t)?($=t,this):$};var y=!1;this.strictComponentBindingsEnabled=function(t){return q(t)?(y=t,this):y};var b=10;this.onChangesTtl=function(t){return arguments.length?(b=t,this):b};var w=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(w=t,this):w};var x=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(x=t,this):x},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,d,v,E,S,C,j,k){var _,A=/^\w/,R=t.document.createElement("div"),M=w,I=x,q=b;function H(){try{if(!--q)throw _=void 0,dn("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);C.$apply(function(){for(var t=0,e=_.length;t<e;++t)try{_[t]()}catch(t){d(t)}_=void 0})}finally{q++}}function F(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function B(t,e){try{t.addClass(e)}catch(t){}}F.prototype={$normalize:bn,$addClass:function(t){t&&t.length>0&&k.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&k.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=wn(t,e);n&&n.length&&k.addClass(this.$$element,n);var r=wn(e,t);r&&r.length&&k.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i=De(this.$$element[0],t),o=function(t){return Ne[t]}(t),a=t;if(i?(this.$$element.prop(t,e),r=i):o&&(this[o]=e,a=o),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Nt(t,"-")),"img"===rt(this.$$element)&&"srcset"===t&&e){if(!U(e))throw dn("srcset","Can't pass trusted values to `$set('srcset', value)`: \"{0}\"",e.toString());for(var u="",s=tt(e),c=/\s/.test(s)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,l=s.split(c),f=Math.floor(l.length/2),p=0;p<f;p++){var h=2*p;u+=j.getTrustedMediaUrl(tt(l[h])),u+=" "+tt(l[h+1])}var v=tt(l[2*p]).split(/\s/);u+=j.getTrustedMediaUrl(tt(v[0])),2===v.length&&(u+=" "+tt(v[1])),this[t]=e=u}!1!==n&&(null===e||V(e)?this.$$element.removeAttr(r):A.test(r)?this.$$element.attr(r,e):function(t,e,n){R.innerHTML="<span "+e+">";var r=R.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var m=this.$$observers;m&&O(m[a],function(t){try{t(e)}catch(t){d(t)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=Lt()),i=r[t]||(r[t]=[]);return i.push(e),C.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(t)||V(n[t])||e(n[t])}),function(){ot(i,e)}}};var J=n.startSymbol(),K=n.endSymbol(),Q="{{"===J&&"}}"===K?D:function(t){return t.replace(/\{\{/g,J).replace(/}}/g,K)},Z=/^ngAttr[A-Z]/,et=/^(.+)Start$/;return nt.$$addBindingInfo=$?function(t,e){var n=t.data("$binding")||[];W(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:N,nt.$$addBindingClass=$?function(t){B(t,"ng-binding")}:N,nt.$$addScopeInfo=$?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:N,nt.$$addScopeClass=$?function(t,e){B(t,e?"ng-isolate-scope":"ng-scope")}:N,nt.$$createComment=function(e,n){var r="";return $&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},nt;function nt(t,e,n,r,i){t instanceof a||(t=a(t));var o=it(t,e,t,n,r,i);nt.$$addScopeClass(t);var u=null;return function(e,n,r){if(!t)throw dn("multilink","This element has already been linked.");Mt(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var s,c=(r=r||{}).parentBoundTranscludeFn,l=r.transcludeControllers,f=r.futureParentElement;if(c&&c.$$boundTransclude&&(c=c.$$boundTransclude),u||(u=function(t){var e=t&&t[0];return e&&"foreignobject"!==rt(e)&&g.call(e).match(/SVG/)?"svg":"html"}(f)),s="html"!==u?a(Ct(u,a("<div></div>").append(t).html())):n?Ae.clone.call(t):t,l)for(var p in l)s.data("$"+p+"Controller",l[p].instance);return nt.$$addScopeInfo(s,e),n&&n(s,e),o&&o(e,s,s,c),n||(t=o=null),s}}function it(t,e,n,r,i,u){for(var s,c,l,f,p,h,d,v=[],m=W(t)||t instanceof a,g=0;g<t.length;g++)s=new F,11===o&&at(t,g,m),(l=(c=lt(t[g],[],s,0===g?r:void 0,i)).length?mt(c,t[g],s,e,n,null,[],[],u):null)&&l.scope&&nt.$$addScopeClass(s.$$element),p=l&&l.terminal||!(f=t[g].childNodes)||!f.length?null:it(f,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||p)&&(v.push(g,l,p),h=!0,d=d||l),u=null;return h?function(t,n,r,i){var o,u,s,c,l,f,p,h,m;if(d){var g=n.length;for(m=new Array(g),l=0;l<v.length;l+=3)p=v[l],m[p]=n[p]}else m=n;for(l=0,f=v.length;l<f;)s=m[v[l++]],o=v[l++],u=v[l++],o?(o.scope?(c=t.$new(),nt.$$addScopeInfo(a(s),c)):c=t,h=o.transcludeOnThisElement?ct(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?ct(t,e):null,o(u,c,s,r,h)):u&&u(t,s.childNodes,void 0,i)}:null}function at(t,e,n){var r,i=t[e],o=i.parentNode;if(i.nodeType===Ft)for(;(r=o?i.nextSibling:t[e+1])&&r.nodeType===Ft;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function ct(t,e,n){function r(r,i,o,a,u){return r||((r=t.$new(!1,u)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=Lt();for(var o in e.$$slots)e.$$slots[o]?i[o]=ct(t,e.$$slots[o],n):i[o]=null;return r}function lt(t,e,r,i,o){var a,c,l,f=t.nodeType,p=r.$attr;switch(f){case Ut:yt(e,bn(c=rt(t)),"E",i,o);for(var h,d,v,m,g,$,y=t.attributes,b=0,w=y&&y.length;b<w;b++){var x=!1,O=!1;d=(h=y[b]).name,g=h.value,m=bn(d),($=Z.test(m))&&(d=d.replace($n,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var E=m.match(et);E&&bt(E[1])&&(x=d,O=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),p[v=bn(d.toLowerCase())]=d,!$&&r.hasOwnProperty(v)||(r[v]=g,De(t,v)&&(r[v]=!0)),jt(t,e,g,v,$),yt(e,v,"A",i,o,x,O)}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!I)break;if(L(l=t.className)&&(l=l.animVal),U(l)&&""!==l)for(;a=s.exec(l);)yt(e,v=bn(a[2]),"C",i,o)&&(r[v]=tt(a[3])),l=l.substr(a.index+a[0].length);break;case Ft:!function(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&nt.$$addBindingClass(e),function(t,e){var i=e.parent();n||nt.$$addBindingClass(i),nt.$$addBindingInfo(i,r.expressions),t.$watch(r,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case Bt:if(!M)break;!function(t,e,n,r,i){try{var o=u.exec(t.nodeValue);if(o){var a=bn(o[1]);yt(e,a,"M",r,i)&&(n[a]=tt(o[2]))}}catch(t){}}(t,e,r,i,o)}return e.sort(Et),e}function ft(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw dn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===Ut&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return a(r)}function dt(t,e,n){return function(r,i,o,a,u){return i=ft(i[0],e,n),t(r,i,o,a,u)}}function vt(t,e,n,r,i,o){var a;return t?nt(e,n,r,i,o):function(){return a||(a=nt(e,n,r,i,o),e=n=o=null),a.apply(this,arguments)}}function mt(e,n,r,i,o,u,s,c,l){l=l||{};for(var f,p,h,v,m,g=-Number.MAX_VALUE,$=l.newScopeDirective,y=l.controllerDirectives,b=l.newIsolateScopeDirective,w=l.templateDirective,x=l.nonTlbTranscludeDirective,E=!1,C=!1,j=l.hasElementTranscludeDirective,k=r.$$element=a(n),_=u,A=i,R=!1,P=!1,N=0,D=e.length;N<D;N++){var M=(f=e[N]).$$start,I=f.$$end;if(M&&(k=ft(n,M,I)),h=void 0,g>f.priority)break;if((m=f.scope)&&(f.templateUrl||(L(m)?(St("new/isolated scope",b||$,f,k),b=f):St("new/isolated scope",b,f,k)),$=$||f),p=f.name,!R&&(f.replace&&(f.templateUrl||f.template)||f.transclude&&!f.$$tlb)){for(var q,H=N+1;q=e[H++];)if(q.transclude&&!q.$$tlb||q.replace&&(q.templateUrl||q.template)){P=!0;break}R=!0}if(!f.templateUrl&&f.controller&&(y=y||Lt(),St("'"+p+"' controller",y[p],f,k),y[p]=f),m=f.transclude)if(E=!0,f.$$tlb||(St("transclusion",x,f,k),x=f),"element"===m)j=!0,g=f.priority,h=k,k=r.$$element=a(nt.$$createComment(p,r[p])),n=k[0],kt(o,pt(h),n),A=vt(P,h,i,g,_&&_.name,{nonTlbTranscludeDirective:x});else{var U=Lt();if(L(m)){h=t.document.createDocumentFragment();var B=Lt(),z=Lt();for(var J in O(m,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,B[t]=e,U[e]=null,z[e]=n}),O(k.contents(),function(e){var n=B[bn(rt(e))];n?(z[n]=!0,U[n]=U[n]||t.document.createDocumentFragment(),U[n].appendChild(e)):h.appendChild(e)}),O(z,function(t,e){if(!t)throw dn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),U)U[J]&&(U[J]=vt(P,U[J].childNodes,i));h=h.childNodes}else h=a(de(n)).contents();k.empty(),(A=vt(P,h,i,void 0,void 0,{needsNewScope:f.$$isolateScope||f.$$newScope})).$$slots=U}if(f.template)if(C=!0,St("template",w,f,k),w=f,m=G(f.template)?f.template(k,r):f.template,m=Q(m),f.replace){if(_=f,h=ce(m)?[]:xn(Ct(f.templateNamespace,tt(m))),n=h[0],1!==h.length||n.nodeType!==Ut)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");kt(o,k,n);var K={$attr:{}},X=lt(n,[],K),Z=e.splice(N+1,e.length-(N+1));(b||$)&&$t(X,b,$),e=e.concat(X).concat(Z),xt(r,K),D=e.length}else k.html(m);if(f.templateUrl)C=!0,St("template",w,f,k),w=f,f.replace&&(_=f),ot=Ot(e.splice(N,e.length-N),k,r,o,E&&A,s,c,{controllerDirectives:y,newScopeDirective:$!==f&&$,newIsolateScopeDirective:b,templateDirective:w,nonTlbTranscludeDirective:x}),D=e.length;else if(f.compile)try{v=f.compile(k,r,A);var et=f.$$originalDirective||f;G(v)?it(null,ht(et,v),M,I):v&&it(ht(et,v.pre),ht(et,v.post),M,I)}catch(t){d(t,wt(k))}f.terminal&&(ot.terminal=!0,g=Math.max(g,f.priority))}return ot.scope=$&&!0===$.scope,ot.transcludeOnThisElement=E,ot.templateOnThisElement=C,ot.transclude=A,l.hasElementTranscludeDirective=j,ot;function it(t,e,n,r){t&&(n&&(t=dt(t,n,r)),t.require=f.require,t.directiveName=p,(b===f||f.$$isolateScope)&&(t=Tt(t,{isolateScope:!0})),s.push(t)),e&&(n&&(e=dt(e,n,r)),e.require=f.require,e.directiveName=p,(b===f||f.$$isolateScope)&&(e=Tt(e,{isolateScope:!0})),c.push(e))}function ot(t,e,i,o,u){var l,f,p,h,v,m,g,x,E,C;for(var k in n===i?(E=r,x=r.$$element):E=new F(x=a(i),r),v=e,b?h=e.$new(!0):$&&(v=e.$parent),u&&((g=function(t,e,n,r){var i;Y(t)||(r=n,n=e,e=t,t=void 0);j&&(i=m);n||(n=j?x.parent():x);if(!r)return u(t,e,i,n,P);var o=u.$$slots[r];if(o)return o(t,e,i,n,P);if(V(o))throw dn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,wt(x))}).$$boundTransclude=u,g.isSlotFilled=function(t){return!!u.$$slots[t]}),y&&(m=function(t,e,n,r,i,o,a){var u=Lt();for(var s in r){var c=r[s],l={$scope:c===a||c.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},f=c.controller;"@"===f&&(f=e[c.name]);var p=S(f,l,!0,c.controllerAs);u[c.name]=p,t.data("$"+c.name+"Controller",p.instance)}return u}(x,E,g,y,h,e,b)),b&&(nt.$$addScopeInfo(x,h,!0,!(w&&(w===b||w===b.$$originalDirective))),nt.$$addScopeClass(x,!0),h.$$isolateBindings=b.$$isolateBindings,(C=Rt(e,E,h,h.$$isolateBindings,b)).removeWatches&&h.$on("$destroy",C.removeWatches)),m){var _=y[k],A=m[k],R=_.$$bindings.bindToController;A.instance=A(),x.data("$"+_.name+"Controller",A.instance),A.bindingInfo=Rt(v,E,A.instance,R,_)}for(O(y,function(t,e){var n=t.require;t.bindToController&&!W(n)&&L(n)&&T(m[e].instance,gt(e,n,x,m))}),O(m,function(t){var e=t.instance;if(G(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){d(t)}if(G(e.$onInit))try{e.$onInit()}catch(t){d(t)}G(e.$doCheck)&&(v.$watch(function(){e.$doCheck()}),e.$doCheck()),G(e.$onDestroy)&&v.$on("$destroy",function(){e.$onDestroy()})}),l=0,f=s.length;l<f;l++)_t(p=s[l],p.isolateScope?h:e,x,E,p.require&&gt(p.directiveName,p.require,x,m),g);var P=e;for(b&&(b.template||null===b.templateUrl)&&(P=h),t&&t(P,i.childNodes,void 0,u),l=c.length-1;l>=0;l--)_t(p=c[l],p.isolateScope?h:e,x,E,p.require&&gt(p.directiveName,p.require,x,m),g);O(m,function(t){var e=t.instance;G(e.$postLink)&&e.$postLink()})}}function gt(t,e,n,r){var i;if(U(e)){var o=e.match(l),a=e.substring(o[0].length),u=o[1]||o[3],s="?"===o[2];if("^^"===u?n=n.parent():i=(i=r&&r[a])&&i.instance,!i){var c="$"+a+"Controller";i=u?n.inheritedData(c):n.data(c)}if(!i&&!s)throw dn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(W(e)){i=[];for(var f=0,p=e.length;f<p;f++)i[f]=gt(t,e[f],n,r)}else L(e)&&(i={},O(e,function(e,o){i[o]=gt(t,e,n,r)}));return i||null}function $t(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=P(t[r],{$$isolateScope:e,$$newScope:n})}function yt(t,n,o,a,u,s,c){if(n===u)return null;var l=null;if(r.hasOwnProperty(n))for(var f,p=e.get(n+i),h=0,d=p.length;h<d;h++)if(f=p[h],(V(a)||a>f.priority)&&-1!==f.restrict.indexOf(o)){if(s&&(f=P(f,{$$start:s,$$end:c})),!f.$$bindings){var v=f.$$bindings=m(f,f.name);L(v.isolateScope)&&(f.$$isolateBindings=v.isolateScope)}t.push(f),l=f}return l}function bt(t){if(r.hasOwnProperty(t))for(var n=e.get(t+i),o=0,a=n.length;o<a;o++)if(n[o].multiElement)return!0;return!1}function xt(t,e){var n=e.$attr,r=t.$attr;O(t,function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))}),O(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function Ot(t,e,n,r,i,o,u,s){var c,l,f=[],p=e[0],h=t.shift(),m=P(h,{templateUrl:null,transclude:null,replace:null,$$originalDirective:h}),g=G(h.templateUrl)?h.templateUrl(e,n):h.templateUrl,$=h.templateNamespace;return e.empty(),v(g).then(function(d){var v,y,b,w;if(d=Q(d),h.replace){if(b=ce(d)?[]:xn(Ct($,tt(d))),v=b[0],1!==b.length||v.nodeType!==Ut)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h.name,g);y={$attr:{}},kt(r,e,v);var x=lt(v,[],y);L(h.scope)&&$t(x,!0),t=x.concat(t),xt(n,y)}else v=p,e.html(d);for(t.unshift(m),c=mt(t,v,n,i,e,h,o,u,s),O(r,function(t,n){t===v&&(r[n]=e[0])}),l=it(e[0].childNodes,i);f.length;){var E=f.shift(),S=f.shift(),C=f.shift(),j=f.shift(),k=e[0];if(!E.$$destroyed){if(S!==p){var T=S.className;s.hasElementTranscludeDirective&&h.replace||(k=de(v)),kt(C,a(S),k),B(a(k),T)}w=c.transcludeOnThisElement?ct(E,c.transclude,j):j,c(l,E,k,r,w)}}f=null}).catch(function(t){z(t)&&d(t)}),function(t,e,n,r,i){var o=i;e.$$destroyed||(f?f.push(e,n,r,o):(c.transcludeOnThisElement&&(o=ct(e,c.transclude,i)),c(l,e,n,r,o)))}}function Et(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function St(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw dn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,wt(r))}function Ct(e,n){switch(e=p(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function jt(t,e,r,i,o){var a=function(t,e){if("srcdoc"===e)return j.HTML;var n=rt(t);return"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(n)?j.RESOURCE_URL:j.MEDIA_URL:"xlinkHref"===e?"image"===n?j.MEDIA_URL:"a"===n?j.URL:j.RESOURCE_URL:"form"===n&&"action"===e||"base"===n&&"href"===e||"link"===n&&"href"===e?j.RESOURCE_URL:"a"!==n||"href"!==e&&"ngHref"!==e?void 0:j.URL}(t,i),u=!o,s=c[i]||o,l=n(r,u,a,s);if(l){if("multiple"===i&&"select"===rt(t))throw dn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",wt(t));if(h.test(i))throw dn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var u=o.$$observers||(o.$$observers=Lt()),c=o[i];c!==r&&(l=c&&n(c,!0,a,s),r=c),l&&(o[i]=l(t),(u[i]||(u[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(l,function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)}))}}}})}}function kt(e,n,r){var i,o,u=n[0],s=n.length,c=u.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===u){e[i++]=r;for(var l=i,f=l+s-1,p=e.length;l<p;l++,f++)f<p?e[l]=e[f]:delete e[l];e.length-=s-1,e.context===u&&(e.context=r);break}c&&c.replaceChild(r,u);var h=t.document.createDocumentFragment();for(i=0;i<s;i++)h.appendChild(n[i]);for(a.hasData(u)&&(a.data(r,a.data(u)),a(u).off("$destroy")),a.cleanData(h.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function Tt(t,e){return T(function(){return t.apply(null,arguments)},t,e)}function _t(t,e,n,r,i,o){try{t(e,n,r,i,o)}catch(t){d(t,wt(n))}}function At(t,e){if(y)throw dn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Rt(t,e,r,i,o){var a,u=[],s={};function c(e,n,i){G(r.$onChanges)&&!ut(n,i)&&(_||(t.$$postDigest(H),_=[]),a||(a={},_.push(l)),a[e]&&(i=a[e].previousValue),a[e]=new gn(i,n))}function l(){r.$onChanges(a),a=void 0}return O(i,function(i,a){var l,p,h,d,v,m=i.attrName,g=i.optional;switch(i.mode){case"@":g||f.call(e,m)||(At(m,o.name),r[a]=e[m]=void 0),v=e.$observe(m,function(t){if(U(t)||X(t)){var e=r[a];c(a,t,e),r[a]=t}}),e.$$observers[m].$$scope=t,U(l=e[m])?r[a]=n(l)(t):X(l)&&(r[a]=l),s[a]=new gn(vn,r[a]),u.push(v);break;case"=":if(!f.call(e,m)){if(g)break;At(m,o.name),e[m]=void 0}if(g&&!e[m])break;p=E(e[m]),d=p.literal?st:ut,h=p.assign||function(){throw l=r[a]=p(t),dn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[m],m,o.name)},l=r[a]=p(t);var $=function(e){return d(e,r[a])||(d(e,l)?h(t,e=r[a]):r[a]=e),l=e};$.$stateful=!0,v=i.collection?t.$watchCollection(e[m],$):t.$watch(E(e[m],$),null,p.literal),u.push(v);break;case"<":if(!f.call(e,m)){if(g)break;At(m,o.name),e[m]=void 0}if(g&&!e[m])break;var y=(p=E(e[m])).literal,b=r[a]=p(t);s[a]=new gn(vn,r[a]),v=t[i.collection?"$watchCollection":"$watch"](p,function(t,e){if(e===t){if(e===b||y&&st(e,b))return;e=b}c(a,t,e),r[a]=t}),u.push(v);break;case"&":if(g||f.call(e,m)||At(m,o.name),(p=e.hasOwnProperty(m)?E(e[m]):N)===N&&g)break;r[a]=function(e){return p(t,e)}}}),{initialChanges:s,removeWatches:u.length&&function(){for(var t=0,e=u.length;t<e;++t)u[t]()}}}}]}function gn(t,e){this.previousValue=t,this.currentValue=e}mn.$inject=["$provide","$$sanitizeUriProvider"],gn.prototype.isFirstChange=function(){return this.previousValue===vn};var $n=/^((?:x|data)[:\-_])/i,yn=/[:\-_]+(.)/g;function bn(t){return t.replace($n,"").replace(yn,function(t,e,n){return n?e.toUpperCase():e})}function wn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],u=0;u<i.length;u++)if(a===i[u])continue t;n+=(n.length>0?" ":"")+a}return n}function xn(t){var e=(t=a(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===Bt||n.nodeType===Ft&&""===n.nodeValue.trim())&&v.call(t,e,1)}return t}var On=i("$controller"),En=/^(\S+)(\s+as\s+([\w$]+))?$/;function Sn(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Vt(e,"controller"),L(e)?T(t,e):t[e]=n},this.$get=["$injector",function(e){return function(r,i,o,a){var u,s,c,l;if(o=!0===o,a&&U(a)&&(l=a),U(r)){if(!(s=r.match(En)))throw On("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(c=s[1],l=l||s[3],!(r=t.hasOwnProperty(c)?t[c]:function(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,u=0;u<a;u++)r=i[u],t&&(t=(o=t)[r]);return!n&&G(t)?ht(o,t):t}(i.$scope,c,!0)))throw On("ctrlreg","The controller with the name '{0}' is not registered.",c);It(r,c,!0)}if(o){var f=(W(r)?r[r.length-1]:r).prototype;return u=Object.create(f||null),l&&n(i,l,u,c||r.name),T(function(){var t=e.invoke(r,u,i,c);return t!==u&&(L(t)||G(t))&&(u=t,l&&n(i,l,u,c||r.name)),u},{instance:u,identifier:l})}return u=e.instantiate(r,i,c),l&&n(i,l,u,c||r.name),u};function n(t,e,n,r){if(!t||!L(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}}]}function Cn(){this.$get=["$window",function(t){return a(t.document)}]}function jn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],r=n&&n.hidden;function i(){r=n.hidden}return t.on("visibilitychange",i),e.$on("$destroy",function(){t.off("visibilitychange",i)}),function(){return r}}]}function kn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var Tn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof a&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},_n="application/json",An={"Content-Type":_n+";charset=utf-8"},Rn=/^\[|^\{(?!\{)/,Pn={"[":/]$/,"{":/}$/},Nn=/^\)]\}',?\n/,Dn=i("$http");function Mn(t){return L(t)?B(t)?t.toISOString():vt(t):t}function In(){this.$get=function(){return function(t){if(!t)return"";var e=[];return E(t,function(t,n){null===t||V(t)||G(t)||(W(t)?O(t,function(t){e.push(Ct(n)+"="+Ct(Mn(t)))}):e.push(Ct(n)+"="+Ct(Mn(t))))}),e.join("&")}}}function Vn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){W(n)?O(n,function(e,n){t(e,r+"["+(L(e)?n:"")+"]")}):L(n)&&!B(n)?E(n,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):(G(n)&&(n=n()),e.push(Ct(r)+"="+(null==n?"":Ct(Mn(n)))))}(t,"",!0),e.join("&")}}}function qn(t,e){if(U(t)){var n=t.replace(Nn,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(_n);if(i||function(t){var e=t.match(Rn);return e&&Pn[e[0]].test(t)}(n))try{t=mt(n)}catch(e){if(!i)return t;throw Dn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}return t}function Ln(t){var e,n=Lt();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return U(t)?O(t.split("\n"),function(t){e=t.indexOf(":"),r(p(tt(t.substr(0,e))),tt(t.substr(e+1)))}):L(t)&&O(t,function(t,e){r(p(e),tt(t))}),n}function Hn(t){var e;return function(n){if(e||(e=Ln(t)),n){var r=e[p(n)];return void 0===r&&(r=null),r}return e}}function Un(t,e,n,r){return G(r)?r(t,e,n):(O(r,function(r){t=r(t,e,n)}),t)}function Fn(t){return 200<=t&&t<300}function Bn(){var t=this.defaults={transformResponse:[qn],transformRequest:[function(t){return!L(t)||function(t){return"[object File]"===g.call(t)}(t)||function(t){return"[object Blob]"===g.call(t)}(t)||function(t){return"[object FormData]"===g.call(t)}(t)?t:vt(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Gt(An),put:Gt(An),patch:Gt(An)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return q(t)?(e=!!t,this):e};var n=this.interceptors=[],r=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,a,u,s,c,l,f,d){var v=s("$http");t.paramSerializer=U(t.paramSerializer)?f.get(t.paramSerializer):t.paramSerializer;var m=[];O(n,function(t){m.unshift(U(t)?f.get(t):f.invoke(t))});var g=function(t){var e=[ui].concat(t.map(si));return function(t){var n=si(t);return e.some(ci.bind(null,n))}}(r);function $(n){if(!L(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!U(d.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var r=T({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);r.headers=function(e){var n,r,i,o=t.headers,a=T({},e.headers);o=T({},o.common,o[p(e.method)]);t:for(n in o){for(i in r=p(n),a)if(p(i)===r)continue t;a[n]=o[n]}return function(t,e){var n,r={};return O(t,function(t,i){G(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t}),r}(a,Gt(e))}(n),r.method=h(r.method),r.paramSerializer=U(r.paramSerializer)?f.get(r.paramSerializer):r.paramSerializer,o.$$incOutstandingRequestCount();var s=[],y=[],b=l.resolve(r);return O(m,function(t){(t.request||t.requestError)&&s.unshift(t.request,t.requestError),(t.response||t.responseError)&&y.push(t.response,t.responseError)}),b=(b=w(b=(b=w(b,s)).then(function(n){var r=n.headers,i=Un(n.data,Hn(r),void 0,n.transformRequest);V(i)&&O(r,function(t,e){"content-type"===p(e)&&delete r[e]});V(n.withCredentials)&&!V(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,r){var i,o,s=l.defer(),f=s.promise,h=n.headers,m="jsonp"===p(n.method),y=n.url;m?y=d.getTrustedResourceUrl(y):U(y)||(y=d.valueOf(y));y=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(y,n.paramSerializer(n.params)),m&&(y=function(t,e){var n=t.split("?");if(n.length>2)throw Dn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return O(Ot(n[1]),function(n,r){if("JSON_CALLBACK"===n)throw Dn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(r===e)throw Dn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)}),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(y,n.jsonpCallbackParam));$.pendingRequests.push(n),f.then(S,S),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=L(n.cache)?n.cache:L(t.cache)?t.cache:v);i&&(q(o=i.get(y))?Q(o)?o.then(E,E):W(o)?x(o[1],o[0],Gt(o[2]),o[3],o[4]):x(o,200,{},"OK","complete"):i.put(y,f));if(V(o)){var b=g(n.url)?u()[n.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(h[n.xsrfHeaderName||t.xsrfHeaderName]=b),a(n.method,y,r,function(t,n,r,o,a){i&&(Fn(t)?i.put(y,[t,n,Ln(r),o,a]):i.remove(y));function u(){x(n,t,r,o,a)}e?c.$applyAsync(u):(u(),c.$$phase||c.$apply())},h,n.timeout,n.withCredentials,n.responseType,w(n.eventHandlers),w(n.uploadEventHandlers))}return f;function w(t){if(t){var n={};return O(t,function(t,r){n[r]=function(n){function r(){t(n)}e?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),n}}function x(t,e,r,i,o){(Fn(e=e>=-1?e:0)?s.resolve:s.reject)({data:t,status:e,headers:Hn(r),config:n,statusText:i,xhrStatus:o})}function E(t){x(t.data,t.status,Gt(t.headers()),t.statusText,t.xhrStatus)}function S(){var t=$.pendingRequests.indexOf(n);-1!==t&&$.pendingRequests.splice(t,1)}}(n,i).then(x,x)}),y)).finally(function(){o.$$completeOutstandingRequest(N)});function w(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function x(t){var e=T({},t);return e.data=Un(t.data,t.headers,t.status,r.transformResponse),Fn(t.status)?e:l.reject(e)}}return $.pendingRequests=[],function(t){O(arguments,function(t){$[t]=function(e,n){return $(T({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){O(arguments,function(t){$[t]=function(e,n,r){return $(T({},r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),$.defaults=t,$}]}function Wn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function zn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(o,a,u,s,c,l,f,h,d,v){if(a=a||t.url(),"jsonp"===p(o))var m=r.createCallback(a),g=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var u=-1,s="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),s=t.type,u="error"===t.type?404:200),n&&n(u,s)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}(a,m,function(t,e){var n=200===t&&r.getResponse(m);x(s,t,n,"",e,"complete"),r.removeCallback(m)});else{var $=e(o,a),y=!1;$.open(o,a,!0),O(c,function(t,e){q(t)&&$.setRequestHeader(e,t)}),$.onload=function(){var t=$.statusText||"",e="response"in $?$.response:$.responseText,n=1223===$.status?204:$.status;0===n&&(n=e?200:"file"===si(a).protocol?404:0),x(s,n,e,$.getAllResponseHeaders(),t,"complete")};if($.onerror=function(){x(s,-1,null,null,"","error")},$.ontimeout=function(){x(s,-1,null,null,"","timeout")},$.onabort=function(){x(s,-1,null,null,"",y?"timeout":"abort")},O(d,function(t,e){$.addEventListener(e,t)}),O(v,function(t,e){$.upload.addEventListener(e,t)}),f&&($.withCredentials=!0),h)try{$.responseType=h}catch(t){if("json"!==h)throw t}$.send(V(u)?null:u)}if(l>0)var b=n(function(){w("timeout")},l);else Q(l)&&l.then(function(){w(q(l.$$timeoutId)?"timeout":"abort")});function w(t){y="timeout"===t,g&&g(),$&&$.abort()}function x(t,e,r,i,o,a){q(b)&&n.cancel(b),g=$=null,t(e,r,i,o,a)}}}(t,r,t.defer,e,n[0])}]}var Gn=b.$interpolateMinErr=i("$interpolate");function Jn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var o=t.length,a=e.length,u=new RegExp(t.replace(/./g,c),"g"),s=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function l(n){return n.replace(u,t).replace(s,e)}function f(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function p(u,s,c,p){var h=c===i.URL||c===i.MEDIA_URL;if(!u.length||-1===u.indexOf(t)){if(s&&!h)return;var d=l(u);h&&(d=i.getTrusted(c,d));var v=M(d);return v.exp=u,v.expressions=[],v.$$watchDelegate=f,v}p=!!p;for(var m,g,$,y,b,w=0,x=[],O=u.length,E=[],S=[];w<O;){if(-1===(m=u.indexOf(t,w))||-1===(g=u.indexOf(e,m+o))){w!==O&&E.push(l(u.substring(w)));break}w!==m&&E.push(l(u.substring(w,m))),y=u.substring(m+o,g),x.push(y),w=g+a,S.push(E.length),E.push("")}b=1===E.length&&1===S.length;var C=h&&b?void 0:function(t){try{return t=c&&!h?i.getTrusted(c,t):i.valueOf(t),p&&!q(t)?t:Ht(t)}catch(t){r(Gn.interr(u,t))}};if($=x.map(function(t){return n(t,C)}),!s||x.length){var j=function(t){for(var e=0,n=x.length;e<n;e++){if(p&&V(t[e]))return;E[S[e]]=t[e]}return h?i.getTrusted(c,b?E[0]:E.join("")):(c&&E.length>1&&Gn.throwNoconcat(u),E.join(""))};return T(function(t){var e=0,n=x.length,i=new Array(n);try{for(;e<n;e++)i[e]=$[e](t);return j(i)}catch(t){r(Gn.interr(u,t))}},{exp:u,expressions:x,$$watchDelegate:function(t,e){var n;return t.$watchGroup($,function(r,i){var o=j(r);e.call(this,o,r!==i?n:o,t),n=o})}})}}return p.startSymbol=function(){return t},p.endSymbol=function(){return e},p}]}Gn.throwNoconcat=function(t){throw Gn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Gn.interr=function(t,e){return Gn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Kn=i("$interval");function Yn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,r,i){var o={};function a(a,u,s,c){var l=arguments.length>4,f=l?pt(arguments,4):[],p=e.setInterval,h=e.clearInterval,d=0,v=q(c)&&!c,m=(v?r:n).defer(),g=m.promise;return s=q(s)?s:0,g.$$intervalId=p(function(){v?i.defer($):t.$evalAsync($),m.notify(d++),s>0&&d>=s&&(m.resolve(d),h(g.$$intervalId),delete o[g.$$intervalId]),v||t.$apply()},u),o[g.$$intervalId]=m,g;function $(){l?a.apply(null,f):a(d)}}return a.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Kn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!o.hasOwnProperty(t.$$intervalId))return!1;var n=t.$$intervalId,r=o[n];return Ur(r.promise),r.reject("canceled"),e.clearInterval(n),delete o[n],!0},a}]}var Xn=function(){this.$get=function(){var t=b.callbacks,e={};return{createCallback:function(n){var r="_"+(t.$$counter++).toString(36),i="angular.callbacks."+r,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(r);return e[i]=t[r]=o,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var r=e[n];delete t[r.id],delete e[n]}}}},Qn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Zn={http:80,https:443,ftp:21},tr=i("$location");function er(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=St(e[n].replace(/%2F/g,"/"));return e.join("/")}function nr(t,e){var n=si(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=A(n.port)||Zn[n.protocol]||null}var rr=/^\s*[\\/]{2,}/;function ir(t,e,n){if(rr.test(t))throw tr("badpath",'Invalid url "{0}".',t);var r="/"!==t.charAt(0);r&&(t="/"+t);var i=si(t),o=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var n=t.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),e&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=Ot(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function or(t,e){return t.slice(0,e.length)===e}function ar(t,e){if(or(e,t))return e.substr(t.length)}function ur(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function sr(t){return t.replace(/(#.+)|#$/,"$1")}function cr(t,e,n){this.$$html5=!0,n=n||"",nr(t,this),this.$$parse=function(t){var n=ar(e,t);if(!U(n))throw tr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);ir(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=Et(this.$$search),n=this.$$hash?"#"+St(this.$$hash):"";this.$$url=er(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(q(o=ar(t,r))?(a=o,u=n&&q(o=ar(n,o))?e+(ar("/",o)||o):t+a):q(o=ar(e,r))?u=e+o:e===r+"/"&&(u=e),u&&this.$$parse(u),!!u);var o,a,u}}function lr(t,e,n){nr(t,this),this.$$parse=function(r){var i,o=ar(t,r)||ar(e,r);V(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",V(o)&&(t=r,this.replace())):V(i=ar(n,o))&&(i=o),ir(i,this,!1),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;or(e,n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$compose=function(){var e=Et(this.$$search),r=this.$$hash?"#"+St(this.$$hash):"";this.$$url=er(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,n){return ur(t)===ur(e)&&(this.$$parse(e),!0)}}function fr(t,e,n){this.$$html5=!0,lr.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===ur(r)?o=r:(a=ar(e,r))?o=t+n+a:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$compose=function(){var e=Et(this.$$search),r=this.$$hash?"#"+St(this.$$hash):"";this.$$url=er(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url,this.$$urlUpdatedByLocation=!0}}var pr={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:hr("$$absUrl"),url:function(t){if(V(t))return this.$$url;var e=Qn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:hr("$$protocol"),host:hr("$$host"),port:hr("$$port"),path:dr("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(U(t)||F(t))t=t.toString(),this.$$search=Ot(t);else{if(!L(t))throw tr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");O(t=at(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:V(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:dr("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function hr(t){return function(){return this[t]}}function dr(t,e){return function(n){return V(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function vr(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return q(e)?(t=e,this):t},this.html5Mode=function(t){return X(t)?(e.enabled=t,this):L(t)?(X(t.enabled)&&(e.enabled=t.enabled),X(t.requireBase)&&(e.requireBase=t.requireBase),(X(t.rewriteLinks)||U(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,u){var s,c,l,f=r.baseHref(),p=r.url();if(e.enabled){if(!f&&e.requireBase)throw tr("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=function(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}(p)+(f||"/"),c=i.history?cr:fr}else l=ur(p),c=lr;var h=function(t){return t.substr(0,ur(t).lastIndexOf("/")+1)}(l);(s=new c(l,h,"#"+t)).$$parseLinkUrl(p,p),s.$$state=r.state();var d=/^\s*(javascript|mailto):/i;function v(t,e,n){var i=s.url(),o=s.$$state;try{r.url(t,e,n),s.$$state=r.state()}catch(t){throw s.url(i),s.$$state=o,t}}o.on("click",function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var u=a(t.target);"a"!==rt(u[0]);)if(u[0]===o[0]||!(u=u.parent())[0])return;if(!U(i)||!V(u.attr(i))){var c=u.prop("href"),l=u.attr("href")||u.attr("xlink:href");L(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=si(c.animVal).href),d.test(c)||!c||u.attr("target")||t.isDefaultPrevented()||s.$$parseLinkUrl(c,l)&&(t.preventDefault(),s.absUrl()!==r.url()&&n.$apply())}}}),sr(s.absUrl())!==sr(p)&&r.url(s.absUrl(),!0);var m=!0;return r.onUrlChange(function(t,e){or(t,h)?(n.$evalAsync(function(){var r,i=s.absUrl(),o=s.$$state;t=sr(t),s.$$parse(t),s.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,s.absUrl()===t&&(r?(s.$$parse(i),s.$$state=o,v(i,!1,o)):(m=!1,g(i,o)))}),n.$$phase||n.$digest()):u.location.href=t}),n.$watch(function(){if(m||s.$$urlUpdatedByLocation){s.$$urlUpdatedByLocation=!1;var t=sr(r.url()),e=sr(s.absUrl()),o=r.state(),a=s.$$replace,u=t!==e||s.$$html5&&i.history&&o!==s.$$state;(m||u)&&(m=!1,n.$evalAsync(function(){var e=s.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,s.$$state,o).defaultPrevented;s.absUrl()===e&&(r?(s.$$parse(t),s.$$state=o):(u&&v(e,a,o===s.$$state?null:s.$$state),g(t,o)))}))}s.$$replace=!1}),s;function g(t,e){n.$broadcast("$locationChangeSuccess",s.absUrl(),t,s.$$state,e)}}]}function mr(){var t=!0,e=this;this.debugEnabled=function(e){return q(e)?(t=e,this):t},this.$get=["$window",function(n){var r=o||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()};function i(t){var e=n.console||{},i=e[t]||e.log||N;return function(){var t=[];return O(arguments,function(e){t.push(function(t){return z(t)&&(t.stack&&r?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),Function.prototype.apply.call(i,e,t)}}}]}O([fr,lr,cr],function(t){t.prototype=Object.create(pr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==cr||!this.$$html5)throw tr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=V(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var gr=i("$parse"),$r={}.constructor.prototype.valueOf;function yr(t){return t+""}var br=Lt();O("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){br[t]=!0});var wr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},xr=function(t){this.options=t};xr.prototype={constructor:xr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=br[e],o=br[n],a=br[r];if(i||o||a){var u=a?r:o?n:e;this.tokens.push({index:this.index,text:u,operator:!0}),this.index+=u.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=q(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw gr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=p(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=wr[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Or=function(t,e){this.lexer=t,this.options=e};function Er(t,e){return void 0!==t?t:e}function Sr(t,e){return void 0===t?e:void 0===e?t:t+e}Or.Program="Program",Or.ExpressionStatement="ExpressionStatement",Or.AssignmentExpression="AssignmentExpression",Or.ConditionalExpression="ConditionalExpression",Or.LogicalExpression="LogicalExpression",Or.BinaryExpression="BinaryExpression",Or.UnaryExpression="UnaryExpression",Or.CallExpression="CallExpression",Or.MemberExpression="MemberExpression",Or.Identifier="Identifier",Or.Literal="Literal",Or.ArrayExpression="ArrayExpression",Or.Property="Property",Or.ObjectExpression="ObjectExpression",Or.ThisExpression="ThisExpression",Or.LocalsExpression="LocalsExpression",Or.NGValueParameter="NGValueParameter",Or.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Or.Program,body:t}},expressionStatement:function(){return{type:Or.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!_r(t))throw gr("lval","Trying to assign a value to a non l-value");t={type:Or.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Or.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Or.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Or.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Or.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Or.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Or.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Or.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Or.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=at(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Or.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Or.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Or.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Or.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Or.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Or.Identifier,name:t.text}},constant:function(){return{type:Or.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Or.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Or.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Or.ObjectExpression,properties:e}},throwError:function(t,e){throw gr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw gr("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw gr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:Or.ThisExpression},$locals:{type:Or.LocalsExpression}}};var Cr=1,jr=2;function kr(t,e,n){var r,i,o,a=t.isPure=function(t,e){switch(t.type){case Or.MemberExpression:if(t.computed)return!1;break;case Or.UnaryExpression:return Cr;case Or.BinaryExpression:return"+"!==t.operator&&Cr;case Or.CallExpression:return!1}return void 0===e?jr:e}(t,n);switch(t.type){case Or.Program:r=!0,O(t.body,function(t){kr(t.expression,e,a),r=r&&t.expression.constant}),t.constant=r;break;case Or.Literal:t.constant=!0,t.toWatch=[];break;case Or.UnaryExpression:kr(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Or.BinaryExpression:kr(t.left,e,a),kr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Or.LogicalExpression:kr(t.left,e,a),kr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Or.ConditionalExpression:kr(t.test,e,a),kr(t.alternate,e,a),kr(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Or.Identifier:t.constant=!1,t.toWatch=[t];break;case Or.MemberExpression:kr(t.object,e,a),t.computed&&kr(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Or.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),r=o,i=[],O(t.arguments,function(t){kr(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=o?i:[t];break;case Or.AssignmentExpression:kr(t.left,e,a),kr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Or.ArrayExpression:r=!0,i=[],O(t.elements,function(t){kr(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=i;break;case Or.ObjectExpression:r=!0,i=[],O(t.properties,function(t){kr(t.value,e,a),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(kr(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))}),t.constant=r,t.toWatch=i;break;case Or.ThisExpression:case Or.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Tr(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function _r(t){return t.type===Or.Identifier||t.type===Or.MemberExpression}function Ar(t){if(1===t.body.length&&_r(t.body[0].expression))return{type:Or.AssignmentExpression,left:t.body[0].expression,right:{type:Or.NGValueParameter},operator:"="}}function Rr(t){this.$filter=t}function Pr(t){this.$filter=t}function Nr(t,e,n){this.ast=new Or(t,n),this.astCompiler=n.csp?new Pr(e):new Rr(e)}function Dr(t){return G(t.valueOf)?t.valueOf():$r.call(t)}function Mr(){var t,e,n=Lt(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){var o={csp:ct().noUnsafeEval,literals:at(r),isIdentifierStart:G(t)&&t,isIdentifierContinue:G(e)&&e};return a.$$getAst=function(t){return new Nr(new xr(o),i,o).getAst(t).ast},a;function a(t,e){var r,a;switch(typeof t){case"string":if(t=t.trim(),!(r=n[a=t]))r=new Nr(new xr(o),i,o).parse(t),n[a]=p(r);return h(r,e);case"function":return h(t,e);default:return h(N,e)}}function u(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Dr(t))&&!n)&&(t===e||t!=t&&e!=e)}function s(t,e,n,r,i){var o,a=r.inputs;if(1===a.length){var s=u;return a=a[0],t.$watch(function(t){var e=a(t);return u(e,s,a.isPure)||(o=r(t,void 0,void 0,[e]),s=e&&Dr(e)),o},e,n,i)}for(var c=[],l=[],f=0,p=a.length;f<p;f++)c[f]=u,l[f]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var s=a[n](t);(e||(e=!u(s,c[n],a[n].isPure)))&&(l[n]=s,c[n]=s&&Dr(s))}return e&&(o=r(t,void 0,void 0,l)),o},e,n,i)}function c(t,e,n,r,i){var o,a,u=r.literal?l:q,s=r.$$intercepted||r,c=r.$$interceptor||D,f=r.inputs&&!s.inputs;return d.literal=r.literal,d.constant=r.constant,d.inputs=r.inputs,p(d),o=t.$watch(d,e,n,i);function h(){u(a)&&o()}function d(t,e,n,r){return a=f&&r?r[0]:s(t,e,n,r),u(a)&&t.$$postDigest(h),c(a)}}function l(t){var e=!0;return O(t,function(t){q(t)||(e=!1)}),e}function f(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function p(t){return t.constant?t.$$watchDelegate=f:t.oneTime?t.$$watchDelegate=c:t.inputs&&(t.$$watchDelegate=s),t}function h(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,r=function(r,i,o,a){var u=n&&a?a[0]:t(r,i,o,a);return e(u)};return r.$$intercepted=t,r.$$interceptor=e,r.literal=t.literal,r.oneTime=t.oneTime,r.constant=t.constant,e.$stateful||(n=!t.inputs,r.inputs=t.inputs?t.inputs:[t],e.$$pure||(r.inputs=r.inputs.map(function(t){return t.isPure===jr?function(e){return t(e)}:t}))),p(r)}}]}function Ir(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return qr(function(t){e.$evalAsync(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return q(e)?(t=e,this):t}}function Vr(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return qr(function(t){e.defer(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return q(e)?(t=e,this):t}}function qr(t,e,n){var r=i("$q",TypeError),o=0,a=[];function u(){return new function(){var t=this.promise=new s;this.resolve=function(e){f(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){d(t,e)}}}function s(){this.$$state={status:0}}function c(){for(;!o&&a.length;){var t=a.shift();if(!Lr(t)){Hr(t);var n="Possibly unhandled rejection: "+Jt(t.value);z(t.value)?e(t.value,n):e(n)}}}function l(r){!n||r.pending||2!==r.status||Lr(r)||(0===o&&0===a.length&&t(c),a.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++o,t(function(){!function(r){var i,a,u;u=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var s=0,l=u.length;s<l;++s){Hr(r),a=u[s][0],i=u[s][r.status];try{G(i)?f(a,i(r.value)):1===r.status?f(a,r.value):p(a,r.value)}catch(t){p(a,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--o,n&&0===o&&t(c)}}(r)}))}function f(t,e){t.$$state.status||(e===t?h(t,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):function t(e,n){var r;var i=!1;try{(L(n)||G(n))&&(r=n.then),G(r)?(e.$$state.status=-1,r.call(n,function o(t){if(i)return;i=!0,function t(e,n){var r;var i=!1;try{(L(n)||G(n))&&(r=n.then),G(r)?(e.$$state.status=-1,r.call(n,o,a,function(t){d(e,t)})):(e.$$state.value=n,e.$$state.status=1,l(e.$$state))}catch(t){a(t)}function o(n){i||(i=!0,t(e,n))}function a(t){i||(i=!0,h(e,t))}}(e,t)},a,function(t){d(e,t)})):(e.$$state.value=n,e.$$state.status=1,l(e.$$state))}catch(t){a(t)}function o(n){i||(i=!0,t(e,n))}function a(t){i||(i=!0,h(e,t))}}(t,e))}function p(t,e){t.$$state.status||h(t,e)}function h(t,e){t.$$state.value=e,t.$$state.status=2,l(t.$$state)}function d(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t(function(){for(var t,n,o=0,a=i.length;o<a;o++){n=i[o][0],t=i[o][3];try{d(n,G(t)?t(r):r)}catch(t){e(t)}}})}function v(t){var e=new s;return p(e,t),e}function m(t,e,n){var r=null;try{G(n)&&(r=n())}catch(t){return v(t)}return Q(r)?r.then(function(){return e(t)},v):e(t)}function g(t,e,n,r){var i=new s;return f(i,t),i.then(e,n,r)}T(s.prototype,{then:function(t,e,n){if(V(t)&&V(e)&&V(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&l(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return m(e,$,t)},function(e){return m(e,v,t)},e)}});var $=g;function y(t){if(!G(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new s;return t(function(t){f(e,t)},function(t){p(e,t)}),e}return y.prototype=s.prototype,y.defer=u,y.reject=v,y.when=g,y.resolve=$,y.all=function(t){var e=new s,n=0,r=W(t)?[]:{};return O(t,function(t,i){n++,g(t).then(function(t){r[i]=t,--n||f(e,r)},function(t){p(e,t)})}),0===n&&f(e,r),e},y.race=function(t){var e=u();return O(t,function(t){g(t).then(e.resolve,e.reject)}),e.promise},y}function Lr(t){return!!t.pur}function Hr(t){t.pur=!0}function Ur(t){Hr(t.$$state)}function Fr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Br(){var t=10,e=i("$rootScope"),n=null,r=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,a,u){function s(t){t.currentScope.$$destroyed=!0}function c(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(t,e){var n;return e=e||this,t?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",s),n},$watch:function(t,e,r,i){var o=a(t),u=G(e)?e:N;if(o.$$watchDelegate)return o.$$watchDelegate(this,u,r,o,t);var s=this,c=s.$$watchers,l={fn:u,last:b,get:o,exp:i||t,eq:!!r};return n=null,c||((c=s.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,$(this,1),function(){var t=ot(c,l);t>=0&&($(s,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],o=this,a=!1,u=!0;if(!t.length){var s=!0;return o.$evalAsync(function(){s&&e(r,r,o)}),function(){s=!1}}if(1===t.length)return this.$watch(t[0],function(t,i,o){r[0]=t,n[0]=i,e(r,t===i?r:n,o)});function c(){a=!1;try{u?(u=!1,e(r,r,o)):e(r,n,o)}finally{for(var i=0;i<t.length;i++)n[i]=r[i]}}return O(t,function(t,e){var n=o.$watch(t,function(t){r[e]=t,a||(a=!0,o.$evalAsync(c))});i.push(n)}),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){v.$$pure=a(t).literal,v.$stateful=!v.$$pure;var n,r,i,o=this,u=e.length>1,s=0,c=a(t,v),l=[],p={},h=!0,d=0;function v(t){var e,i,o,a;if(!V(n=t)){if(L(n))if(x(n)){r!==l&&(d=(r=l).length=0,s++),e=n.length,d!==e&&(s++,r.length=d=e);for(var u=0;u<e;u++)a=r[u],o=n[u],a!=a&&o!=o||a===o||(s++,r[u]=o)}else{for(i in r!==p&&(r=p={},d=0,s++),e=0,n)f.call(n,i)&&(e++,o=n[i],a=r[i],i in r?a!=a&&o!=o||a===o||(s++,r[i]=o):(d++,r[i]=o,s++));if(d>e)for(i in s++,r)f.call(n,i)||(d--,delete r[i])}else r!==n&&(r=n,s++);return s}}return this.$watch(c,function(){if(h?(h=!1,e(n,n,o)):e(n,i,o),u)if(L(n))if(x(n)){i=new Array(n.length);for(var t=0;t<n.length;t++)i[t]=n[t]}else for(var r in i={},n)f.call(n,r)&&(i[r]=n[r]);else i=n})},$digest:function(){var o,a,s,c,f,d,$,y,x,O=t,E=p.length?l:this,S=[];m("$digest"),u.$$checkUrlChange(),this===l&&null!==r&&(u.defer.cancel(r),w()),n=null;do{f=!1,$=E;for(var C=0;C<p.length;C++){try{(0,(x=p[C]).fn)(x.scope,x.locals)}catch(t){i(t)}n=null}p.length=0;t:do{if(c=!$.$$suspended&&$.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(o=c[c.$$digestWatchIndex])if((a=(0,o.get)($))===(s=o.last)||(o.eq?st(a,s):R(a)&&R(s))){if(o===n){f=!1;break t}}else f=!0,n=o,o.last=o.eq?at(a,null):a,(0,o.fn)(a,s===b?a:s,$),O<5&&(S[y=4-O]||(S[y]=[]),S[y].push({msg:G(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:a,oldVal:s}))}catch(t){i(t)}if(!(d=!$.$$suspended&&$.$$watchersCount&&$.$$childHead||$!==E&&$.$$nextSibling))for(;$!==E&&!(d=$.$$nextSibling);)$=$.$parent}while($=d);if((f||p.length)&&!O--)throw g(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,S)}while(f||p.length);for(g();v<h.length;)try{h[v++]()}catch(t){i(t)}h.length=v=0,u.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===l&&u.$$applicationDestroyed(),$(this,-this.$$watchersCount),this.$$listenerCount)y(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=N,this.$on=this.$watch=this.$watchGroup=function(){return N},this.$$listeners={},this.$$nextSibling=null,function t(e){9===o&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return a(t)(this,e)},$evalAsync:function(t,e){l.$$phase||p.length||u.defer(function(){p.length&&l.$digest()}),p.push({scope:this,fn:a(t),locals:e})},$$postDigest:function(t){h.push(t)},$apply:function(t){try{m("$apply");try{return this.$eval(t)}finally{g()}}catch(t){i(t)}finally{try{l.$digest()}catch(t){throw i(t),t}}},$applyAsync:function(t){var e=this;t&&d.push(function(){e.$eval(t)}),t=a(t),null===r&&(r=u.defer(function(){l.$apply(w)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],y(i,1,t))}},$emit:function(t,e){var n,r,o,a=[],u=this,s=!1,c={name:t,targetScope:u,stopPropagation:function(){s=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=ft([c],arguments,1);do{for(n=u.$$listeners[t]||a,c.currentScope=u,r=0,o=n.length;r<o;r++)if(n[r])try{n[r].apply(null,l)}catch(t){i(t)}else n.splice(r,1),r--,o--;if(s)break;u=u.$parent}while(u);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,r=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var a,u,s,c=ft([o],arguments,1);n=r;){for(o.currentScope=n,u=0,s=(a=n.$$listeners[t]||[]).length;u<s;u++)if(a[u])try{a[u].apply(null,c)}catch(t){i(t)}else a.splice(u,1),u--,s--;if(!(r=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(r=n.$$nextSibling);)n=n.$parent}return o.currentScope=null,o}};var l=new c,p=l.$$asyncQueue=[],h=l.$$postDigestQueue=[],d=l.$$applyAsyncQueue=[],v=0;return l;function m(t){if(l.$$phase)throw e("inprog","{0} already in progress",l.$$phase);l.$$phase=t}function g(){l.$$phase=null}function $(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function y(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function b(){}function w(){for(;d.length;)try{d.shift()()}catch(t){i(t)}r=null}}]}function Wr(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return q(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return q(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i=r?e:t,o=si(n&&n.trim()).href;return""===o||o.match(i)?n:"unsafe:"+o}}}Rr.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},kr(t,e.$filter);var n,r="";if(this.stage="assign",n=Ar(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Tr(t.body);e.stage="inputs",O(o,function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",u=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,yr,Er,Sr);return this.state=this.stage=void 0,u},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return O(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return O(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,o){var a,u,s,c,l,f=this;if(r=r||N,!o&&q(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case Or.Program:O(t.body,function(e,n){f.recurse(e.expression,void 0,void 0,function(t){u=t}),n!==t.body.length-1?f.current().body.push(u,";"):f.return_(u)});break;case Or.Literal:c=this.escape(t.value),this.assign(e,c),r(e||c);break;case Or.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){u=t}),c=t.operator+"("+this.ifDefined(u,0)+")",this.assign(e,c),r(c);break;case Or.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){u=t}),c="+"===t.operator?this.plus(a,u):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(u,0):"("+a+")"+t.operator+"("+u+")",this.assign(e,c),r(c);break;case Or.LogicalExpression:e=e||this.nextId(),f.recurse(t.left,e),f.if_("&&"===t.operator?e:f.not(e),f.lazyRecurse(t.right,e)),r(e);break;case Or.ConditionalExpression:e=e||this.nextId(),f.recurse(t.test,e),f.if_(e,f.lazyRecurse(t.alternate,e),f.lazyRecurse(t.consequent,e)),r(e);break;case Or.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",t.name)),function(){f.if_("inputs"===f.stage||"s",function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",t.name)),f.lazyAssign(f.nonComputedMember("s",t.name),"{}")),f.assign(e,f.nonComputedMember("s",t.name))})},e&&f.lazyAssign(e,f.nonComputedMember("l",t.name))),r(e);break;case Or.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),f.recurse(t.object,a,void 0,function(){f.if_(f.notNull(a),function(){t.computed?(u=f.nextId(),f.recurse(t.property,u),f.getStringValue(u),i&&1!==i&&f.if_(f.not(f.computedMember(a,u)),f.lazyAssign(f.computedMember(a,u),"{}")),c=f.computedMember(a,u),f.assign(e,c),n&&(n.computed=!0,n.name=u)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(a,t.property.name)),f.lazyAssign(f.nonComputedMember(a,t.property.name),"{}")),c=f.nonComputedMember(a,t.property.name),f.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))},function(){f.assign(e,"undefined")}),r(e)},!!i);break;case Or.CallExpression:e=e||this.nextId(),t.filter?(u=f.filter(t.callee.name),s=[],O(t.arguments,function(t){var e=f.nextId();f.recurse(t,e),s.push(e)}),c=u+"("+s.join(",")+")",f.assign(e,c),r(e)):(u=f.nextId(),a={},s=[],f.recurse(t.callee,u,a,function(){f.if_(f.notNull(u),function(){O(t.arguments,function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,function(t){s.push(t)})}),c=a.name?f.member(a.context,a.name,a.computed)+"("+s.join(",")+")":u+"("+s.join(",")+")",f.assign(e,c)},function(){f.assign(e,"undefined")}),r(e)}));break;case Or.AssignmentExpression:u=this.nextId(),a={},this.recurse(t.left,void 0,a,function(){f.if_(f.notNull(a.context),function(){f.recurse(t.right,u),c=f.member(a.context,a.name,a.computed)+t.operator+u,f.assign(e,c),r(e||c)})},1);break;case Or.ArrayExpression:s=[],O(t.elements,function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,function(t){s.push(t)})}),c="["+s.join(",")+"]",this.assign(e,c),r(e||c);break;case Or.ObjectExpression:s=[],l=!1,O(t.properties,function(t){t.computed&&(l=!0)}),l?(e=e||this.nextId(),this.assign(e,"{}"),O(t.properties,function(t){t.computed?(a=f.nextId(),f.recurse(t.key,a)):a=t.key.type===Or.Identifier?t.key.name:""+t.key.value,u=f.nextId(),f.recurse(t.value,u),f.assign(f.member(e,a,t.computed),u)})):(O(t.properties,function(e){f.recurse(e.value,t.constant?void 0:f.nextId(),void 0,function(t){s.push(f.escape(e.key.type===Or.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+s.join(",")+"}",this.assign(e,c)),r(e||c);break;case Or.ThisExpression:this.assign(e,"s"),r(e||"s");break;case Or.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case Or.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(U(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(F(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw gr("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Pr.prototype={compile:function(t){var e,n,r=this;kr(t,r.$filter),(e=Ar(t))&&(n=this.recurse(e));var i,o=Tr(t.body);o&&(i=[],O(o,function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,i.push(n),t.watchId=e}));var a=[];O(t.body,function(t){a.push(r.recurse(t.expression))});var u=0===t.body.length?N:1===t.body.length?a[0]:function(t,e){var n;return O(a,function(r){n=r(t,e)}),n};return n&&(u.assign=function(t,e,r){return n(t,r,e)}),i&&(u.inputs=i),u},recurse:function(t,e,n){var r,i,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Or.Literal:return this.value(t.value,e);case Or.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case Or.BinaryExpression:case Or.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case Or.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Or.Identifier:return a.identifier(t.name,e,n);case Or.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case Or.CallExpression:return o=[],O(t.arguments,function(t){o.push(a.recurse(t))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,a){for(var u=[],s=0;s<o.length;++s)u.push(o[s](t,n,r,a));var c=i.apply(void 0,u,a);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,r,a){var u,s=i(t,n,r,a);if(null!=s.value){for(var c=[],l=0;l<o.length;++l)c.push(o[l](t,n,r,a));u=s.value.apply(s.context,c)}return e?{value:u}:u};case Or.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,a){var u=r(t,n,o,a),s=i(t,n,o,a);return u.context[u.name]=s,e?{value:s}:s};case Or.ArrayExpression:return o=[],O(t.elements,function(t){o.push(a.recurse(t))}),function(t,n,r,i){for(var a=[],u=0;u<o.length;++u)a.push(o[u](t,n,r,i));return e?{value:a}:a};case Or.ObjectExpression:return o=[],O(t.properties,function(t){t.computed?o.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):o.push({key:t.key.type===Or.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,r,i){for(var a={},u=0;u<o.length;++u)o[u].computed?a[o[u].key(t,n,r,i)]=o[u].value(t,n,r,i):a[o[u].key]=o[u].value(t,n,r,i);return e?{value:a}:a};case Or.ThisExpression:return function(t){return e?{value:t}:t};case Or.LocalsExpression:return function(t,n){return e?{value:n}:n};case Or.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=q(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=q(a)?-a:-0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var u=Sr(t(r,i,o,a),e(r,i,o,a));return n?{value:u}:u}},"binary-":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a),s=e(r,i,o,a),c=(q(u)?u:0)-(q(s)?s:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)*e(r,i,o,a);return n?{value:u}:u}},"binary/":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)/e(r,i,o,a);return n?{value:u}:u}},"binary%":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)%e(r,i,o,a);return n?{value:u}:u}},"binary===":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)===e(r,i,o,a);return n?{value:u}:u}},"binary!==":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)!==e(r,i,o,a);return n?{value:u}:u}},"binary==":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)==e(r,i,o,a);return n?{value:u}:u}},"binary!=":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)!=e(r,i,o,a);return n?{value:u}:u}},"binary<":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)<e(r,i,o,a);return n?{value:u}:u}},"binary>":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)>e(r,i,o,a);return n?{value:u}:u}},"binary<=":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)<=e(r,i,o,a);return n?{value:u}:u}},"binary>=":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)>=e(r,i,o,a);return n?{value:u}:u}},"binary&&":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)&&e(r,i,o,a);return n?{value:u}:u}},"binary||":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)||e(r,i,o,a);return n?{value:u}:u}},"ternary?:":function(t,e,n,r){return function(i,o,a,u){var s=t(i,o,a,u)?e(i,o,a,u):n(i,o,a,u);return r?{value:s}:s}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,o,a){var u=i&&t in i?i:r;n&&1!==n&&u&&null==u[t]&&(u[t]={});var s=u?u[t]:void 0;return e?{context:u,name:t,value:s}:s}},computedMember:function(t,e,n,r){return function(i,o,a,u){var s,c,l=t(i,o,a,u);return null!=l&&(s=yr(s=e(i,o,a,u)),r&&1!==r&&l&&!l[s]&&(l[s]={}),c=l[s]),n?{context:l,name:s,value:c}:c}},nonComputedMember:function(t,e,n,r){return function(i,o,a,u){var s=t(i,o,a,u);r&&1!==r&&s&&null==s[e]&&(s[e]={});var c=null!=s?s[e]:void 0;return n?{context:s,name:e,value:c}:c}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}},Nr.prototype={constructor:Nr,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Or.Literal||t.body[0].expression.type===Or.ArrayExpression||t.body[0].expression.type===Or.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var zr=i("$sce"),Gr={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Jr=/_([a-z])/g;function Kr(t){return t.replace(Jr,ne)}function Yr(t){var e=[];return q(t)&&O(t,function(t){e.push(function(t){if("self"===t)return t;if(U(t)){if(t.indexOf("***")>-1)throw zr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(J(t))return new RegExp("^"+t.source+"$");throw zr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Xr(){this.SCE_CONTEXTS=Gr;var e=["self"],n=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Yr(t)),e},this.resourceUrlBlacklist=function(t){return arguments.length&&(n=Yr(t)),n},this.$get=["$injector","$$sanitizeUri",function(r,i){var o=function(t){throw zr("unsafe","Attempting to use an unsafe value in a safe context.")};function a(e,n){return"self"===e?function(t){return ci(t,ui)}(n)||function(e){return ci(e,function(){if(t.document.baseURI)return t.document.baseURI;oi||((oi=t.document.createElement("a")).href=".",oi=oi.cloneNode(!1));return oi.href}())}(n):!!e.exec(n.href)}function u(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}r.has("$sanitize")&&(o=r.get("$sanitize"));var s=u(),c={};return c[Gr.HTML]=u(s),c[Gr.CSS]=u(s),c[Gr.MEDIA_URL]=u(s),c[Gr.URL]=u(c[Gr.MEDIA_URL]),c[Gr.JS]=u(s),c[Gr.RESOURCE_URL]=u(c[Gr.URL]),{trustAs:function(t,e){var n=c.hasOwnProperty(t)?c[t]:null;if(!n)throw zr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||V(e)||""===e)return e;if("string"!=typeof e)throw zr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,r){if(null===r||V(r)||""===r)return r;var u=c.hasOwnProperty(t)?c[t]:null;if(u&&r instanceof u)return r.$$unwrapTrustedValue();if(G(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),t===Gr.MEDIA_URL||t===Gr.URL)return i(r,t===Gr.MEDIA_URL);if(t===Gr.RESOURCE_URL){if(function(t){var r,i,o=si(t.toString()),u=!1;for(r=0,i=e.length;r<i;r++)if(a(e[r],o)){u=!0;break}if(u)for(r=0,i=n.length;r<i;r++)if(a(n[r],o)){u=!1;break}return u}(r))return r;throw zr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(t===Gr.HTML)return o(r);throw zr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof s?t.$$unwrapTrustedValue():t}}}]}function Qr(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&o<8)throw zr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Gt(Gr);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=D),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,a=r.getTrusted,u=r.trustAs;return O(Gr,function(t,e){var n=p(e);r[Kr("parse_as_"+n)]=function(e){return i(t,e)},r[Kr("get_trusted_"+n)]=function(e){return a(t,e)},r[Kr("trust_as_"+n)]=function(e){return u(t,e)}}),r}]}function Zr(){this.$get=["$window","$document",function(t,e){var n={},r=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=A((/android (\d+)/.exec(p((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),u=e[0]||{},s=u.body&&u.body.style,c=!1,l=!1;return s&&(c=!!("transition"in s||"webkitTransition"in s),l=!!("animation"in s||"webkitAnimation"in s)),{history:!(!r||i<4||a),hasEvent:function(t){if("input"===t&&o)return!1;if(V(n[t])){var e=u.createElement("div");n[t]="on"+t in e}return n[t]},csp:ct(),transitions:c,animations:l,android:i}}]}var ti=i("$templateRequest");function ei(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,o){function a(u,s){a.totalPendingRequests++,U(u)&&!V(n.get(u))||(u=o.getTrustedResourceUrl(u));var c=r.defaults&&r.defaults.transformResponse;return W(c)?c=c.filter(function(t){return t!==qn}):c===qn&&(c=null),r.get(u,T({cache:n,transformResponse:c},t)).finally(function(){a.totalPendingRequests--}).then(function(t){return n.put(u,t.data)},function(t){s||(t=ti("tpload","Failed to load template: {0} (HTTP status: {1} {2})",u,t.status,t.statusText),e(t));return i.reject(t)})}return a.totalPendingRequests=0,a}]}function ni(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={findBindings:function(t,e,n){var r=[];return O(t.getElementsByClassName("ng-binding"),function(t){var i=b.element(t).data("$binding");i&&O(i,function(i){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)})}),r},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o="["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]',a=t.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return r}]}var ri=i("$timeout");function ii(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var o={};function a(a,u,s){G(a)||(s=u,u=a,a=N);var c,l=pt(arguments,3),f=q(s)&&!s,p=(f?r:n).defer(),h=p.promise;return c=e.defer(function(){try{p.resolve(a.apply(null,l))}catch(t){p.reject(t),i(t)}finally{delete o[h.$$timeoutId]}f||t.$apply()},u),h.$$timeoutId=c,o[c]=p,h}return a.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ri("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!o.hasOwnProperty(t.$$timeoutId))return!1;var n=t.$$timeoutId,r=o[n];return Ur(r.promise),r.reject("canceled"),delete o[n],e.defer.cancel(n)},a}]}var oi,ai=t.document.createElement("a"),ui=si(t.location.href);function si(t){if(!U(t))return t;var e=t;return o&&(ai.setAttribute("href",e),e=ai.href),ai.setAttribute("href",e),{href:ai.href,protocol:ai.protocol?ai.protocol.replace(/:$/,""):"",host:ai.host,search:ai.search?ai.search.replace(/^\?/,""):"",hash:ai.hash?ai.hash.replace(/^#/,""):"",hostname:ai.hostname,port:ai.port,pathname:"/"===ai.pathname.charAt(0)?ai.pathname:"/"+ai.pathname}}function ci(t,e){return t=si(t),e=si(e),t.protocol===e.protocol&&t.host===e.host}function li(){this.$get=M(t)}function fi(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,u,s,c=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(c!==r)for(t=(r=c).split("; "),n={},a=0;a<t.length;a++)(u=(o=t[a]).indexOf("="))>0&&(s=i(o.substring(0,u)),V(n[s])&&(n[s]=i(o.substring(u+1))));return n}}function pi(){this.$get=fi}function hi(t){var e="Filter";function n(r,i){if(L(r)){var o={};return O(r,function(t,e){o[e]=n(e,t)}),o}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",bi),n("date",Ri),n("filter",di),n("json",Pi),n("limitTo",Mi),n("lowercase",Ni),n("number",wi),n("orderBy",Vi),n("uppercase",Di)}function di(){return function(t,e,n,r){if(!x(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var o,a;switch(r=r||"$",mi(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(t,e,n,r){var i=L(t)&&n in t;!0===e?e=st:G(e)||(e=function(t,e){return!V(t)&&(null===t||null===e?t===e:!(L(e)||L(t)&&!I(t))&&(t=p(""+t),e=p(""+e),-1!==t.indexOf(e)))});return function(o){return i&&!L(o)?vi(o,t[n],e,n,!1):vi(o,t,e,n,r)}}(e,n,r,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function vi(t,e,n,r,i,o){var a=mi(t),u=mi(e);if("string"===u&&"!"===e.charAt(0))return!vi(t,e.substring(1),n,r,i);if(W(t))return t.some(function(t){return vi(t,e,n,r,i)});switch(a){case"object":var s;if(i){for(s in t)if(s.charAt&&"$"!==s.charAt(0)&&vi(t[s],e,n,r,!0))return!0;return!o&&vi(t,e,n,r,!1)}if("object"===u){for(s in e){var c=e[s];if(!G(c)&&!V(c)){var l=s===r;if(!vi(l?t:t[s],c,n,r,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function mi(t){return null===t?"null":typeof t}fi.$inject=["$document"],hi.$inject=["$provide"];var gi=22,$i=".",yi="0";function bi(t){var e=t.NUMBER_FORMATS;return function(t,n,r){V(n)&&(n=e.CURRENCY_SYM),V(r)&&(r=e.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:xi(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(i,n)}}function wi(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:xi(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function xi(t,e,n,r,i){if(!U(t)&&!F(t)||isNaN(t))return"";var o,a=!isFinite(t),u=!1,s=Math.abs(t)+"",c="";if(a)c="";else{(function(t,e,n,r){var i=t.d,o=i.length-t.i,a=(e=V(e)?Math.min(Math.max(n,o),r):+e)+t.i,u=i[a];if(a>0){i.splice(Math.max(t.i,a));for(var s=a;s<i.length;s++)i[s]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,a=e+1),i[0]=0;for(var c=1;c<a;c++)i[c]=0}if(u>=5)if(a-1<0){for(var l=0;l>a;l--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[a-1]++;for(;o<Math.max(0,e);o++)i.push(0);var f=i.reduceRight(function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)},0);f&&(i.unshift(f),t.i++)})(o=function(t){var e,n,r,i,o,a=0;for((n=t.indexOf($i))>-1&&(t=t.replace($i,"")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charAt(r)===yi;r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===yi;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>gi&&(e=e.splice(0,gi-1),a=n-1,n=1),{d:e,e:a,i:n}}(s),i,e.minFrac,e.maxFrac);var l=o.d,f=o.i,p=o.e,h=[];for(u=l.reduce(function(t,e){return t&&!e},!0);f<0;)l.unshift(0),f++;f>0?h=l.splice(f,l.length):(h=l,l=[0]);var d=[];for(l.length>=e.lgSize&&d.unshift(l.splice(-e.lgSize,l.length).join(""));l.length>e.gSize;)d.unshift(l.splice(-e.gSize,l.length).join(""));l.length&&d.unshift(l.join("")),c=d.join(n),h.length&&(c+=r+h.join("")),p&&(c+="e+"+p)}return t<0&&!u?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function Oi(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t=yi+t;return n&&(t=t.substr(t.length-e)),i+t}function Ei(t,e,n,r,i){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),Oi(a,e,r,i)}}function Si(t,e,n){return function(r,i){var o=r["get"+t]();return i[h((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Ci(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function ji(t){return function(e){var n=Ci(e.getFullYear()),r=+function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}(e)-+n;return Oi(1+Math.round(r/6048e5),t)}}function ki(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}bi.$inject=["$locale"],wi.$inject=["$locale"];var Ti={yyyy:Ei("FullYear",4,0,!1,!0),yy:Ei("FullYear",2,0,!0,!0),y:Ei("FullYear",1,0,!1,!0),MMMM:Si("Month"),MMM:Si("Month",!0),MM:Ei("Month",2,1),M:Ei("Month",1,1),LLLL:Si("Month",!1,!0),dd:Ei("Date",2),d:Ei("Date",1),HH:Ei("Hours",2),H:Ei("Hours",1),hh:Ei("Hours",2,-12),h:Ei("Hours",1,-12),mm:Ei("Minutes",2),m:Ei("Minutes",1),ss:Ei("Seconds",2),s:Ei("Seconds",1),sss:Ei("Milliseconds",3),EEEE:Si("Day"),EEE:Si("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=Oi(Math[r>0?"floor":"ceil"](r/60),2)+Oi(Math.abs(r%60),2)},ww:ji(2),w:ji(1),G:ki,GG:ki,GGG:ki,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},_i=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Ai=/^-?\d+$/;function Ri(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,a,u="",s=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,U(n)&&(n=Ai.test(n)?A(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,o=0,a=n[8]?r.setUTCFullYear:r.setFullYear,u=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=A(n[9]+n[10]),o=A(n[9]+n[11])),a.call(r,A(n[1]),A(n[2])-1,A(n[3]));var s=A(n[4]||0)-i,c=A(n[5]||0)-o,l=A(n[6]||0),f=Math.round(1e3*parseFloat("0."+(n[7]||0)));return u.call(r,s,c,l,f),r}return t}(n)),F(n)&&(n=new Date(n)),!B(n)||!isFinite(n.getTime()))return n;for(;r;)(a=_i.exec(r))?r=(s=ft(s,a,1)).pop():(s.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=$t(i,c),n=bt(n,i,!0)),O(s,function(e){o=Ti[e],u+=o?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function Pi(){return function(t,e){return V(e)&&(e=2),vt(t,e)}}Ri.$inject=["$locale"];var Ni=M(p),Di=M(h);function Mi(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):A(e),R(e)?t:(F(t)&&(t=t.toString()),x(t)?(n=(n=!n||isNaN(n)?0:A(n))<0?Math.max(0,t.length+n):n,e>=0?Ii(t,n,n+e):0===n?Ii(t,e,t.length):Ii(t,Math.max(0,n+e),n)):t)}}function Ii(t,e,n){return U(t)?t.slice(e,n):d.call(t,e,n)}function Vi(t){return function(r,o,a,u){if(null==r)return r;if(!x(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);W(o)||(o=[o]),0===o.length&&(o=["+"]);var s=function(e){return e.map(function(e){var n=1,r=D;if(G(e))r=e;else if(U(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}})}(o),c=a?-1:1,l=G(u)?u:n,f=Array.prototype.map.call(r,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:s.map(function(r){return function(t,n){var r=typeof t;null===t?r="null":"object"===r&&(t=function(t){if(G(t.valueOf)&&e(t=t.valueOf()))return t;if(I(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:r,index:n}}(r.get(t),n)})}});return f.sort(function(t,e){for(var r=0,i=s.length;r<i;r++){var o=l(t.predicateValues[r],e.predicateValues[r]);if(o)return o*s[r].descending*c}return(l(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*c}),r=f.map(function(t){return t.value})};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,r=t.type,i=e.type;if(r===i){var o=t.value,a=e.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(L(o)&&(o=t.index),L(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n="undefined"===r?1:"undefined"===i?-1:"null"===r?1:"null"===i?-1:r<i?-1:1;return n}}function qi(t){return G(t)&&(t={link:t}),t.restrict=t.restrict||"AC",M(t)}Vi.$inject=["$parse"];var Li=M({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===g.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Hi={};O(Re,function(t,e){if("multiple"!==t){var n=bn("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),Hi[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}}),O(Ne,function(t,e){Hi[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(c);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),O(["src","srcset","href"],function(t){var e=bn("ng-"+t);Hi[e]=function(){return{priority:99,link:function(n,r,i){var a=t,u=t;"href"===t&&"[object SVGAnimatedString]"===g.call(r.prop("href"))&&(u="xlinkHref",i.$attr[u]="xlink:href",a=null),i.$observe(e,function(e){e?(i.$set(u,e),o&&a&&r.prop(a,i[u])):"href"===t&&i.$set(u,null)})}}}});var Ui={$addControl:N,$$renameControl:function(t,e){t.$name=e},$removeControl:N,$setValidity:N,$setDirty:N,$setPristine:N,$setSubmitted:N,$$setSubmitted:N},Fi="ng-pending";function Bi(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Ui,this.$$element=t,this.$$animate=r,Ji(this)}Bi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Bi.prototype={$rollbackViewValue:function(){O(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){O(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){Vt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],O(this.$pending,function(e,n){this.$setValidity(n,null,t)},this),O(this.$error,function(e,n){this.$setValidity(n,null,t)},this),O(this.$$success,function(e,n){this.$setValidity(n,null,t)},this),ot(this.$$controls,t),t.$$parentForm=Ui},$setDirty:function(){this.$$animate.removeClass(this.$$element,Fo),this.$$animate.addClass(this.$$element,Bo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Fo,Bo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,O(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){O(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==Ui;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,O(this.$$controls,function(t){t.$$setSubmitted&&t.$$setSubmitted()})}},Ki({clazz:Bi,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(ot(r,n),0===r.length&&delete t[e])}});var Wi=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Bi,compile:function(n,i){n.addClass(Fo).addClass(Ho);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,a){var u=a[0];if(!("action"in i)){var s=function(e){t.$apply(function(){u.$commitViewValue(),u.$setSubmitted()}),e.preventDefault()};n[0].addEventListener("submit",s),n.on("$destroy",function(){e(function(){n[0].removeEventListener("submit",s)},0,!1)})}(a[1]||u.$$parentForm).$addControl(u);var c=o?r(u.$name):N;o&&(c(t,u),i.$observe(o,function(e){u.$name!==e&&(c(t,void 0),u.$$parentForm.$$renameControl(u,e),(c=r(u.$name))(t,u))})),n.on("$destroy",function(){u.$$parentForm.$removeControl(u),c(t,void 0),T(u,Ui)})}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||N}}]},zi=Wi(),Gi=Wi(!0);function Ji(t){t.$$classCache={},t.$$classCache[Uo]=!(t.$$classCache[Ho]=t.$$element.hasClass(Ho))}function Ki(t){var e=t.clazz,n=t.set,r=t.unset;function i(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+Nt(e,"-"):"",i(t,Ho+e,!0===n),i(t,Uo+e,!1===n)}e.prototype.$setValidity=function(t,e,a){var u;V(e)?function(t,e,r,i){t[e]||(t[e]={});n(t[e],r,i)}(this,"$pending",t,a):function(t,e,n,i){t[e]&&r(t[e],n,i);Yi(t[e])&&(t[e]=void 0)}(this,"$pending",t,a),X(e)?e?(r(this.$error,t,a),n(this.$$success,t,a)):(n(this.$error,t,a),r(this.$$success,t,a)):(r(this.$error,t,a),r(this.$$success,t,a)),this.$pending?(i(this,Fi,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(i(this,Fi,!1),this.$valid=Yi(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,u=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,u,this)}}function Yi(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Xi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Qi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Zi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,to=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,eo=/^(\d{4,})-(\d{2})-(\d{2})$/,no=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ro=/^(\d{4,})-W(\d\d)$/,io=/^(\d{4,})-(\d\d)$/,oo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ao="keydown wheel mousedown",uo=Lt();O("date,datetime-local,month,time,week".split(","),function(t){uo[t]=!0});var so={text:function(t,e,n,r,i,o){lo(t,e,n,r,i,o),co(r)},date:po("date",eo,fo(eo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":po("datetimelocal",no,fo(no,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:po("time",oo,fo(oo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:po("week",ro,function(t,e){if(B(t))return t;if(U(t)){ro.lastIndex=0;var n=ro.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,u=0,s=0,c=Ci(r),l=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),u=e.getSeconds(),s=e.getMilliseconds()),new Date(r,0,c.getDate()+l,o,a,u,s)}}return NaN},"yyyy-Www"),month:po("month",io,fo(io,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o){var a,u;ho(t,e,n,r,"number"),vo(r),lo(t,e,n,r,i,o),(q(n.min)||n.ngMin)&&(r.$validators.min=function(t,e){return r.$isEmpty(e)||V(a)||e>=a},n.$observe("min",function(t){a=mo(t),r.$validate()}));(q(n.max)||n.ngMax)&&(r.$validators.max=function(t,e){return r.$isEmpty(e)||V(u)||e<=u},n.$observe("max",function(t){u=mo(t),r.$validate()}));if(q(n.step)||n.ngStep){var s;r.$validators.step=function(t,e){return r.$isEmpty(e)||V(s)||yo(e,a||0,s)},n.$observe("step",function(t){s=mo(t),r.$validate()})}},url:function(t,e,n,r,i,o){lo(t,e,n,r,i,o),co(r),r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Qi.test(n)}},email:function(t,e,n,r,i,o){lo(t,e,n,r,i,o),co(r),r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Zi.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==tt(n.ngTrim);V(n.name)&&e.attr("name",C());e.on("change",function(t){var o;e[0].checked&&(o=n.value,i&&(o=tt(o)),r.$setViewValue(o,t&&t.type))}),r.$render=function(){var t=n.value;i&&(t=tt(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){ho(t,e,n,r,"range"),vo(r),lo(t,e,n,r,i,o);var a=r.$$hasNativeValidators&&"range"===e[0].type,u=a?0:void 0,s=a?100:void 0,c=a?1:void 0,l=e[0].validity,f=q(n.min),p=q(n.max),h=q(n.step),d=r.$render;r.$render=a&&q(l.rangeUnderflow)&&q(l.rangeOverflow)?function(){d(),r.$setViewValue(e.val())}:d,f&&(r.$validators.min=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||V(u)||e>=u},v("min",function(t){if(u=mo(t),R(r.$modelValue))return;if(a){var n=e.val();u>n&&(n=u,e.val(n)),r.$setViewValue(n)}else r.$validate()}));p&&(r.$validators.max=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||V(s)||e<=s},v("max",function(t){if(s=mo(t),R(r.$modelValue))return;if(a){var n=e.val();s<n&&(e.val(s),n=s<u?u:s),r.$setViewValue(n)}else r.$validate()}));h&&(r.$validators.step=a?function(){return!l.stepMismatch}:function(t,e){return r.$isEmpty(e)||V(c)||yo(e,u||0,c)},v("step",function(t){if(c=mo(t),R(r.$modelValue))return;a&&r.$viewValue!==e.val()?r.$setViewValue(e.val()):r.$validate()}));function v(t,r){e.attr(t,n[t]),n.$observe(t,r)}},checkbox:function(t,e,n,r,i,o,a,u){var s=bo(u,t,"ngTrueValue",n.ngTrueValue,!0),c=bo(u,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return st(t,s)}),r.$parsers.push(function(t){return t?s:c})},hidden:N,button:N,submit:N,reset:N,file:N};function co(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function lo(t,e,n,r,i,o){var a,u=p(e[0].type);if(!i.android){var s=!1;e.on("compositionstart",function(){s=!0}),e.on("compositionupdate",function(t){(V(t.data)||""===t.data)&&(s=!1)}),e.on("compositionend",function(){s=!1,c()})}var c=function(t){if(a&&(o.defer.cancel(a),a=null),!s){var i=e.val(),c=t&&t.type;"password"===u||n.ngTrim&&"false"===n.ngTrim||(i=tt(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))e.on("input",c);else{var f=function(t,e,n){a||(a=o.defer(function(){a=null,e&&e.value===n||c(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||f(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut drop",f)}e.on("change",c),uo[u]&&r.$$hasNativeValidators&&u===n.type&&e.on(ao,function(t){if(!a){var e=this[l],n=e.badInput,r=e.typeMismatch;a=o.defer(function(){a=null,e.badInput===n&&e.typeMismatch===r||c(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function fo(t,e){return function(n,r){var i,o;if(B(n))return n;if(U(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Xi.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n)){i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},O(i,function(t,n){n<e.length&&(o[e[n]]=+t)});var a=new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0);return o.yyyy<100&&a.setFullYear(o.yyyy),a}}return NaN}}function po(t,e,n,r){return function(i,o,a,u,s,c,l){var f,p,h,d;(ho(i,o,a,u,t),lo(0,o,a,u,s,c),u.$parsers.push(function(n){return u.$isEmpty(n)?null:e.test(n)?g(n,f):void(u.$$parserName=t)}),u.$formatters.push(function(t){if(t&&!B(t))throw Wo("datefmt","Expected `{0}` to be a date",t);if(v(t)){f=t;var e=u.$options.getOption("timezone");return e&&(p=e,f=bt(f,e,!0)),l("date")(t,r,e)}return f=null,p=null,""}),q(a.min)||a.ngMin)&&(u.$validators.min=function(t){return!v(t)||V(h)||n(t)>=h},a.$observe("min",function(t){h=m(t),u.$validate()}));(q(a.max)||a.ngMax)&&(u.$validators.max=function(t){return!v(t)||V(d)||n(t)<=d},a.$observe("max",function(t){d=m(t),u.$validate()}));function v(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function m(t){return q(t)&&!B(t)?g(t)||void 0:t}function g(t,e){var r=u.$options.getOption("timezone");p&&p!==r&&(e=yt(e,$t(p)));var i=n(t,e);return!isNaN(i)&&r&&(i=bt(i,r)),i}}}function ho(t,e,n,r,i){var o=e[0];(r.$$hasNativeValidators=L(o.validity))&&r.$parsers.push(function(t){var n=e.prop(l)||{};if(!n.badInput&&!n.typeMismatch)return t;r.$$parserName=i})}function vo(t){t.$parsers.push(function(e){return t.$isEmpty(e)?null:to.test(e)?parseFloat(e):void(t.$$parserName="number")}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!F(e))throw Wo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function mo(t){return q(t)&&!F(t)&&(t=parseFloat(t)),R(t)?void 0:t}function go(t){return(0|t)===t}function $o(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function yo(t,e,n){var r=Number(t),i=!go(r),o=!go(e),a=!go(n);if(i||o||a){var u=i?$o(r):0,s=o?$o(e):0,c=a?$o(n):0,l=Math.max(u,s,c),f=Math.pow(10,l);r*=f,e*=f,n*=f,i&&(r=Math.round(r)),o&&(e=Math.round(e)),a&&(n=Math.round(n))}return(r-e)%n==0}function bo(t,e,n,r,i){var o;if(q(r)){if(!(o=t(r)).constant)throw Wo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(e)}return i}var wo=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,u){u[0]&&(so[p(a.type)]||so.text)(i,o,a,u[0],e,t,n,r)}}}}],xo=/^(true|false|\d+)$/,Oo=function(){function t(t,e,n){var r=q(n)?n:9===o?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return xo.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,function(e){t(n,r,e)})}}}},Eo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=Ht(t)})}}}}],So=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var o=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(t){r.textContent=V(t)?"":t})}}}}],Co=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")})}}}}],jo=M({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function ko(t,e){var n;return t="ngClass"+t,["$parse",function(a){return{restrict:"AC",link:function(u,s,c){var l,f=s.data("$classCounts"),p=!0;function h(t,e){var n=[];return O(t,function(t){(e>0||f[t])&&(f[t]=(f[t]||0)+e,f[t]===+(e>0)&&n.push(t))}),n.join(" ")}f||(f=Lt(),s.data("$classCounts",f)),"ngClass"!==t&&(n||(n=a("$index",function(t){return 1&t})),u.$watch(n,function(t){t===e?function(t){t=h(i(t),1),c.$addClass(t)}(l):function(t){t=h(i(t),-1),c.$removeClass(t)}(l);p=t})),u.$watch(a(c[t],o),function(t){p===e&&function(t,e){var n=i(t),o=i(e),a=r(n,o),u=r(o,n),s=h(a,-1),l=h(u,1);c.$addClass(l),c.$removeClass(s)}(l,t);l=t})}}}];function r(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function i(t){return t&&t.split(" ")}function o(t){var e=t;return W(t)?e=t.map(o).join(" "):L(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}}var To=ko("",!0),_o=ko("Odd",0),Ao=ko("Even",1),Ro=qi({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Po=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],No={},Do={blur:!0,focus:!0};O("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=bn("ng-"+t);No[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e]);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};Do[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Mo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var u,s,c;n.$watch(i.ngIf,function(n){n?s||a(function(n,o){s=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),u={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),s&&(s.$destroy(),s=null),u&&(c=qt(u.clone),t.leave(c).done(function(t){!1!==t&&(c=null)}),u=null))})}}}],Io=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",u=i.autoscroll;return function(r,i,s,c,l){var f,p,h,d=0,v=function(){p&&(p.remove(),p=null),f&&(f.$destroy(),f=null),h&&(n.leave(h).done(function(t){!1!==t&&(p=null)}),p=h,h=null)};r.$watch(o,function(o){var s=function(t){!1===t||!q(u)||u&&!r.$eval(u)||e()},p=++d;o?(t(o,!0).then(function(t){if(!r.$$destroyed&&p===d){var e=r.$new();c.template=t;var u=l(e,function(t){v(),n.enter(t,null,i).done(s)});h=u,(f=e).$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||p===d&&(v(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(v(),c.template=null)})}}}}],Vo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(g.call(r[0]).match(/SVG/))return r.empty(),void e(fe(o.template,t.document).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});r.html(o.template),e(r.contents())(n)}}}],qo=qi({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Lo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",o="false"!==n.ngTrim,a=o?tt(i):i;r.$parsers.push(function(t){if(!V(t)){var e=[];return t&&O(t.split(a),function(t){t&&e.push(o?tt(t):t)}),e}}),r.$formatters.push(function(t){if(W(t))return t.join(i)}),r.$isEmpty=function(t){return!t||!t.length}}}},Ho="ng-valid",Uo="ng-invalid",Fo="ng-pristine",Bo="ng-dirty",Wo=i("ngModel");function zo(t,e,n,r,i,o,a,u,s){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=s(n.name||"",!1)(t),this.$$parentForm=Ui,this.$options=Go,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=u,this.$$exceptionHandler=e,Ji(this),function(t){t.$$scope.$watch(function(e){var n=t.$$ngModelGet(e);return n===t.$modelValue||t.$modelValue!=t.$modelValue&&n!=n||t.$$setModelValue(n),n})}(this)}zo.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],zo.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return G(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){G(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Wo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,wt(this.$$element))},$render:N,$isEmpty:function(t){return V(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Bo),this.$$animate.addClass(this.$$element,Fo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Fo),this.$$animate.addClass(this.$$element,Bo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!R(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,function(t){i||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var r=this.$$currentValidationRunId,i=this;function o(t,e){r===i.$$currentValidationRunId&&i.$setValidity(t,e)}function a(t){r===i.$$currentValidationRunId&&n(t)}!function(){var t=i.$$parserName;if(!V(i.$$parserValid))return i.$$parserValid||(O(i.$validators,function(t,e){o(e,null)}),O(i.$asyncValidators,function(t,e){o(e,null)})),o(t,i.$$parserValid),i.$$parserValid;o(t,null);return!0}()?a(!1):function(){var n=!0;if(O(i.$validators,function(r,i){var a=Boolean(r(t,e));n=n&&a,o(i,a)}),!n)return O(i.$asyncValidators,function(t,e){o(e,null)}),!1;return!0}()?function(){var n=[],r=!0;O(i.$asyncValidators,function(i,a){var u=i(t,e);if(!Q(u))throw Wo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",u);o(a,void 0),n.push(u.then(function(){o(a,!0)},function(){r=!1,o(a,!1)}))}),n.length?i.$$q.all(n).then(function(){a(r)},N):a(!0)}():a(!1)},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!V(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(V(t=this.$parsers[n](t))){this.$$parserValid=!1;break}R(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==r&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(n){i||(e.$modelValue=n?t:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),O(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");F(e[t])?e=e[t]:F(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:F(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,N))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Ki({clazz:zo,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Go,Jo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:zo,priority:1,compile:function(e){return e.addClass(Fo).addClass("ng-untouched").addClass(Ho),{pre:function(t,e,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];function a(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(a):e.$apply(a))})}}}}}],Ko=/(\s+|^)default(\s+|$)/;function Yo(t){this.$$options=t}Yo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return O(t=T({},t),function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=tt(n.replace(Ko,function(){return t.updateOnDefault=!0," "})))},this),e&&(delete t["*"],Qo(t,this.$$options)),Qo(t,Go.$$options),new Yo(t)}},Go=new Yo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Xo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Go,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function Qo(t,e){O(e,function(e,n){q(t[n])||(t[n]=e)})}var Zo=qi({terminal:!0,priority:1e3}),ta=i("ngOptions"),ea=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,na=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=N},post:function(t,u,s,c){for(var l=c[0],f=c[1],p=s.multiple,h=0,d=u.children(),v=d.length;h<v;h++)if(""===d[h].value){l.hasEmptyOption=!0,l.emptyOption=d.eq(h);break}u.empty();var m,g=!!l.emptyOption;a(i.cloneNode(!1)).val("?");var $=function(t,e,n){var i=t.match(ea);if(!i)throw ta("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,wt(e));var o=i[5]||i[7],a=i[6],u=/ as /.test(i[0])&&i[1],s=i[9],c=r(i[2]?i[1]:o),l=u&&r(u)||c,f=s&&r(s),p=s?function(t,e){return f(n,e)}:function(t){return qe(t)},h=function(t,e){return p(t,y(t,e))},d=r(i[2]||i[1]),v=r(i[3]||""),m=r(i[4]||""),g=r(i[8]),$={},y=a?function(t,e){return $[a]=e,$[o]=t,$}:function(t){return $[o]=t,$};function b(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function w(t){var e;if(!a&&x(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:s,getTrackByValue:h,getWatchables:r(g,function(t){for(var e=[],r=w(t=t||[]),o=r.length,a=0;a<o;a++){var u=t===r?a:r[a],s=t[u],c=y(s,u),l=p(s,c);if(e.push(l),i[2]||i[1]){var f=d(n,c);e.push(f)}if(i[4]){var h=m(n,c);e.push(h)}}return e}),getOptions:function(){for(var t=[],e={},r=g(n)||[],i=w(r),o=i.length,a=0;a<o;a++){var u=r===i?a:i[a],c=r[u],f=y(c,u),$=l(n,f),x=p($,f),O=new b(x,$,d(n,f),v(n,f),m(n,f));t.push(O),e[x]=O}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[h(t)]},getViewValueFromOption:function(t){return s?at(t.viewValue):t.viewValue}}}}}(s.ngOptions,u,t),y=n[0].createDocumentFragment();function b(t,e){var n=i.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,n)}function w(t){var e=m.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}l.generateUnknownOptionValue=function(t){return"?"},p?(l.writeValue=function(t){if(m){var e=t&&t.map(w)||[];m.items.forEach(function(t){t.element.selected&&!it(e,t)&&(t.element.selected=!1)})}},l.readValue=function(){var t=[];return O(u.val()||[],function(e){var n=m.selectValueMap[e];n&&!n.disabled&&t.push(m.getViewValueFromOption(n))}),t},$.trackBy&&t.$watchCollection(function(){if(W(f.$viewValue))return f.$viewValue.map(function(t){return $.getTrackByValue(t)})},function(){f.$render()})):(l.writeValue=function(t){if(m){var e=u[0].options[u[0].selectedIndex],n=m.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(u[0].value!==n.selectValue&&(l.removeUnknownOption(),u[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):l.selectUnknownOrEmptyOption(t)}},l.readValue=function(){var t=m.selectValueMap[u.val()];return t&&!t.disabled?(l.unselectEmptyOption(),l.removeUnknownOption(),m.getViewValueFromOption(t)):null},$.trackBy&&t.$watch(function(){return $.getTrackByValue(f.$viewValue)},function(){f.$render()})),g&&(e(l.emptyOption)(t),u.prepend(l.emptyOption),l.emptyOption[0].nodeType===Bt?(l.hasEmptyOption=!1,l.registerOption=function(t,e){""===e.val()&&(l.hasEmptyOption=!0,l.emptyOption=e,l.emptyOption.removeClass("ng-scope"),f.$render(),e.on("$destroy",function(){var t=l.$isEmptyOptionSelected();l.hasEmptyOption=!1,l.emptyOption=void 0,t&&f.$render()}))}):l.emptyOption.removeClass("ng-scope")),t.$watchCollection($.getWatchables,function(){var t=m&&l.readValue();if(m)for(var e=m.items.length-1;e>=0;e--){var n=m.items[e];q(n.group)?Te(n.element.parentNode):Te(n.element)}var r={};if((m=$.getOptions()).items.forEach(function(t){var e;q(t.group)?((e=r[t.group])||(e=o.cloneNode(!1),y.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),b(t,e)):b(t,y)}),u[0].appendChild(y),f.$render(),!f.$isEmpty(t)){var i=l.readValue(),a=$.trackBy||p;(a?st(t,i):t===i)||(f.$setViewValue(i),f.$render())}})}}}}],ra=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,a,u){var s,c=u.count,l=u.$attr.when&&a.attr(u.$attr.when),f=u.offset||0,h=o.$eval(l)||{},d={},v=e.startSymbol(),m=e.endSymbol(),g=v+c+"-"+f+m,$=b.noop;function y(t){a.text(t||"")}O(u,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+p(n[2]);h[r]=a.attr(u.$attr[e])}}),O(h,function(t,n){d[n]=e(t.replace(r,g))}),o.$watch(c,function(e){var r=parseFloat(e),i=R(r);if(i||r in h||(r=t.pluralCat(r-f)),!(r===s||i&&R(s))){$();var a=d[r];V(a)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+l),$=N,y()):$=o.$watch(a,y),s=r}})}}}],ia=i("ngRef"),oa=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,n){var r=bn(rt(e)),i=t(n.ngRef),o=i.assign||function(){throw ia("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(t,e,a){var u;if(a.hasOwnProperty("ngRefRead")){if("$element"===a.ngRefRead)u=e;else if(!(u=e.data("$"+a.ngRefRead+"Controller")))throw ia("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',a.ngRefRead,n.ngRef)}else u=e.data("$"+r+"Controller");o(t,u=u||e),e.on("$destroy",function(){i(t)===u&&o(t,null)})}}}}],aa=["$parse","$animate","$compile",function(t,e,n){var r=i("ngRepeat"),o=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},u=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,s){var c=s.ngRepeat,l=n.$$createComment("end ngRepeat",c),p=c.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);var h=p[1],d=p[2],v=p[3],m=p[4];if(!(p=h.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw r("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",h);var g,$,y,b,w=p[3]||p[1],E=p[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw r("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var S={$id:qe};return m?g=t(m):(y=function(t,e){return qe(e)},b=function(t){return t}),function(t,n,i,s,p){g&&($=function(e,n,r){return E&&(S[E]=e),S[w]=n,S.$index=r,g(t,S)});var h=Lt();t.$watchCollection(d,function(i){var s,d,m,g,S,C,j,k,T,_,A,R,P=n[0],N=Lt();if(v&&(t[v]=i),x(i))T=i,k=$||y;else for(var D in k=$||b,T=[],i)f.call(i,D)&&"$"!==D.charAt(0)&&T.push(D);for(g=T.length,A=new Array(g),s=0;s<g;s++)if(S=i===T?s:T[s],C=i[S],j=k(S,C,s),h[j])_=h[j],delete h[j],N[j]=_,A[s]=_;else{if(N[j])throw O(A,function(t){t&&t.scope&&(h[t.id]=t)}),r("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",c,j,C);A[s]={id:j,scope:void 0,clone:void 0},N[j]=!0}for(var M in h){if(R=qt((_=h[M]).clone),e.leave(R),R[0].parentNode)for(s=0,d=R.length;s<d;s++)R[s].$$NG_REMOVED=!0;_.scope.$destroy()}for(s=0;s<g;s++)if(S=i===T?s:T[s],C=i[S],(_=A[s]).scope){m=P;do{m=m.nextSibling}while(m&&m.$$NG_REMOVED);a(_)!==m&&e.move(qt(_.clone),null,P),P=u(_),o(_.scope,s,w,C,E,S,g)}else p(function(t,n){_.scope=n;var r=l.cloneNode(!1);t[t.length++]=r,e.enter(t,null,P),P=r,_.clone=t,N[_.id]=_,o(_.scope,s,w,C,E,S,g)});h=N})}}}}],ua=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],sa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ca=qi(function(t,e,n){t.$watchCollection(n.ngStyle,function(t,n){n&&t!==n&&O(n,function(t,n){e.css(n,"")}),t&&e.css(t)})}),la=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var a=i.ngSwitch||i.on,u=[],s=[],c=[],l=[],f=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(a,function(n){for(var r,i;c.length;)t.cancel(c.pop());for(r=0,i=l.length;r<i;++r){var a=qt(s[r].clone);l[r].$destroy(),(c[r]=t.leave(a)).done(f(c,r))}s.length=0,l.length=0,(u=o.cases["!"+n]||o.cases["?"])&&O(u,function(n){n.transclude(function(r,i){l.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:r};s.push(a),t.enter(r,o.parent(),o)})})})}}}],fa=qi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){O(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})})}}),pa=qi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),ha=i("ngTransclude"),da=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){if(!o)throw ha("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",wt(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var a=r.ngTransclude||r.ngTranscludeSlot;function u(){n(t,function(t){e.append(t)})}o(function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==Ft||r.nodeValue.trim())return!0}}(t)?e.append(t):(u(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&u()}}}}],va=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],ma={$setViewValue:N,$render:N};function ga(t,e){t.prop("selected",e),t.attr("selected",e)}var $a=["$element","$scope",function(e,n){var r=this,i=new Ue;r.selectValueMap={},r.ngModelCtrl=ma,r.multiple=!1,r.unknownOption=a(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),ga(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),ga(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(t){return"? "+qe(t)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),ga(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&ga(r.emptyOption,!1)},n.$on("$destroy",function(){r.renderUnknownOption=N}),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&ga(a(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=qe(t);e.val(i in r.selectValueMap?i:t);var o=e[0].options[e[0].selectedIndex];ga(a(o),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(t,e){if(e[0].nodeType!==Bt){Vt(t,'"option value"'),""===t&&(r.hasEmptyOption=!0,r.emptyOption=e);var n=i.get(t)||0;i.set(t,n+1),u()}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(t){null==t&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(t):r.renderUnknownOption(t)};var o=!1;function u(){o||(o=!0,n.$$postDigest(function(){o=!1,r.ngModelCtrl.$render()}))}var s=!1;function c(t){s||(s=!0,n.$$postDigest(function(){n.$$destroyed||(s=!1,r.ngModelCtrl.$setViewValue(r.readValue()),t&&r.ngModelCtrl.$render())}))}r.registerOption=function(t,e,n,i,o){if(n.$attr.ngValue){var a,s=NaN;n.$observe("value",function(t){var n,i=e.prop("selected");q(s)&&(r.removeOption(a),delete r.selectValueMap[s],n=!0),s=qe(t),a=t,r.selectValueMap[s]=t,r.addOption(t,e),e.attr("value",s),n&&i&&c()})}else i?n.$observe("value",function(t){var n;r.readValue();var i=e.prop("selected");q(a)&&(r.removeOption(a),n=!0),a=t,r.addOption(t,e),n&&i&&c()}):o?t.$watch(o,function(t,i){n.$set("value",t);var o=e.prop("selected");i!==t&&r.removeOption(i),r.addOption(t,e),i&&o&&c()}):r.addOption(n.value,e);n.$observe("disabled",function(t){("true"===t||t&&e.prop("selected"))&&(r.multiple?c(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))}),e.on("$destroy",function(){var t=r.readValue(),e=n.value;r.removeOption(e),u(),(r.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)})}}],ya=function(){return{restrict:"E",require:["select","?ngModel"],controller:$a,priority:1,link:{pre:function(t,e,n,r){var i=r[0],o=r[1];if(!o)return void(i.registerOption=N);if(i.ngModelCtrl=o,e.on("change",function(){i.removeUnknownOption(),t.$apply(function(){o.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return O(e.find("option"),function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),t},i.writeValue=function(t){O(e.find("option"),function(e){var n=!!t&&(it(t,e.value)||it(t,i.selectValueMap[e.value])),r=e.selected;n!==r&&ga(a(e),n)})};var u,s=NaN;t.$watch(function(){s!==o.$viewValue||st(u,o.$viewValue)||(u=Gt(o.$viewValue),o.$render()),s=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,r){var i=r[1];if(!i)return;var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}},ba=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return q(n.ngValue)||(q(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o=e.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(t,e,n,r,i)}}}}],wa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},xa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var o,a=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(U(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,wt(e));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||V(o)||o.test(e)}}}}},Oa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=A(t);i=R(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return i<0||r.$isEmpty(e)||e.length<=i}}}}},Ea=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=A(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!Dt){var n=lt();(u=V(n)?t.jQuery:n?t[n]:void 0)&&u.fn.on?(a=u,T(u.fn,{scope:Ae.scope,isolateScope:Ae.isolateScope,controller:Ae.controller,injector:Ae.injector,inheritedData:Ae.inheritedData})):a=he,e=a.cleanData,a.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=a._data(r).events)&&n.$destroy&&a(r).triggerHandler("$destroy");e(t)},b.element=a,Dt=!0}}(),function(e){T(e,{errorHandlingConfig:n,bootstrap:_t,copy:at,extend:T,merge:_,equals:st,element:a,forEach:O,injector:Qe,noop:N,bind:ht,toJson:vt,fromJson:mt,identity:D,isUndefined:V,isDefined:q,isString:U,isFunction:G,isObject:L,isNumber:F,isElement:nt,isArray:W,version:Kt,isDate:B,callbacks:{$$counter:0},getTestability:Rt,reloadWithDebugInfo:At,$$minErr:i,$$csp:ct,$$encodeUriSegment:St,$$encodeUriQuery:Ct,$$lowercase:p,$$stringify:Ht,$$uppercase:h}),(s=function(t){var e=i("$injector"),n=i("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||i,r(o,"module",function(){var t={};return function(i,o,a){var u={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(i,"module"),o&&t.hasOwnProperty(i)&&(t[i]=null),r(t,i,function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],s=[],c=f("$injector","invoke","push",r),l={_invokeQueue:t,_configBlocks:r,_runBlocks:s,info:function(t){if(q(t)){if(!L(t))throw n("aobj","Argument '{0}' must be an object","value");return u=t,this}return u},requires:o,name:i,provider:p("$provide","provider"),factory:p("$provide","factory"),service:p("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),decorator:p("$provide","decorator",r),animation:p("$animateProvider","register"),filter:p("$filterProvider","register"),controller:p("$controllerProvider","register"),directive:p("$compileProvider","directive"),component:p("$compileProvider","component"),config:c,run:function(t){return s.push(t),this}};return a&&c(a),l;function f(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),l}}function p(e,n,r){return r||(r=t),function(t,o){return o&&G(o)&&(o.$$moduleName=i),r.push([e,n,arguments]),l}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Wr}),t.provider("$compile",mn).directive({a:Li,input:wo,textarea:wo,form:zi,script:va,select:ya,option:ba,ngBind:Eo,ngBindHtml:Co,ngBindTemplate:So,ngClass:To,ngClassEven:Ao,ngClassOdd:_o,ngCloak:Ro,ngController:Po,ngForm:Gi,ngHide:sa,ngIf:Mo,ngInclude:Io,ngInit:qo,ngNonBindable:Zo,ngPluralize:ra,ngRef:oa,ngRepeat:aa,ngShow:ua,ngStyle:ca,ngSwitch:la,ngSwitchWhen:fa,ngSwitchDefault:pa,ngOptions:na,ngTransclude:da,ngModel:Jo,ngList:Lo,ngChange:jo,pattern:xa,ngPattern:xa,required:wa,ngRequired:wa,minlength:Ea,ngMinlength:Ea,maxlength:Oa,ngMaxlength:Oa,ngValue:Oo,ngModelOptions:Xo}).directive({ngInclude:Vo}).directive(Hi).directive(No),t.provider({$anchorScroll:Ze,$animate:un,$animateCss:ln,$$animateJs:on,$$animateQueue:an,$$AnimateRunner:cn,$$animateAsyncRun:sn,$browser:fn,$cacheFactory:pn,$controller:Sn,$document:Cn,$$isDocumentHidden:jn,$exceptionHandler:kn,$filter:hi,$$forceReflow:Tn,$interpolate:Jn,$interval:Yn,$http:Bn,$httpParamSerializer:In,$httpParamSerializerJQLike:Vn,$httpBackend:zn,$xhrFactory:Wn,$jsonpCallbacks:Xn,$location:vr,$log:mr,$parse:Mr,$rootScope:Br,$q:Ir,$$q:Vr,$sce:Qr,$sceDelegate:Xr,$sniffer:Zr,$templateCache:hn,$templateRequest:ei,$$testability:ni,$timeout:ii,$window:li,$$rAF:Fr,$$jqLite:Ve,$$Map:Fe,$$cookieReader:pi})}]).info({angularVersion:"1.7.2"})}(b),b.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,r){var i=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,r);return 1==i&&0==o.v?e:n}})}]),a(function(){Tt(t.document,_t)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e,n){
/**
 * State-based routing for AngularJS 1.x
 * This bundle requires the ui-router-core.js bundle from the @uirouter/core package.
 * @version v1.0.19
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e,n){"use strict";var r=angular,i=e&&e.module?e:r;function o(){var t=null;return function(e,r){return t=t||n.services.$injector.get("$templateFactory"),[new c(e,r,t)]}}var a=function(t,e){return t.reduce(function(t,r){return t||n.isDefined(e[r])},!1)};function u(t){if(!t.parent)return{};var e=["component","bindings","componentProvider"],r=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),i=e.concat(r);if(n.isDefined(t.views)&&a(i,t))throw new Error("State '"+t.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+i.filter(function(e){return n.isDefined(t[e])}).join(", "));var o={},u=t.views||{$default:n.pick(t,i)};return n.forEach(u,function(i,u){if(u=u||"$default",n.isString(i)&&(i={component:i}),i=n.extend({},i),a(e,i)&&a(r,i))throw new Error("Cannot combine: "+e.join("|")+" with: "+r.join("|")+" in stateview: '"+u+"@"+t.name+"'");i.resolveAs=i.resolveAs||"$resolve",i.$type="ng1",i.$context=t,i.$name=u;var s=n.ViewService.normalizeUIViewTarget(i.$context,i.$name);i.$uiViewName=s.uiViewName,i.$uiViewContextAnchor=s.uiViewContextAnchor,o[u]=i}),o}var s=0,c=function(){function t(t,e,n){var r=this;this.path=t,this.viewDecl=e,this.factory=n,this.$id=s++,this.loaded=!1,this.getTemplate=function(t,e){return r.component?r.factory.makeComponentTemplate(t,e,r.component,r.viewDecl.bindings):r.template}}return t.prototype.load=function(){var t=this,e=n.services.$q,r=new n.ResolveContext(this.path),i=this.path.reduce(function(t,e){return n.extend(t,e.paramValues)},{}),o={template:e.when(this.factory.fromConfig(this.viewDecl,i,r)),controller:e.when(this.getController(r))};return e.all(o).then(function(e){return n.trace.traceViewServiceEvent("Loaded",t),t.controller=e.controller,n.extend(t,e.template),t})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!n.isInjectable(e))return this.viewDecl.controller;var r=n.services.$injector.annotate(e),i=n.isArray(e)?n.tail(e):e,o=new n.Resolvable("",i,r);return o.get(t)},t}(),l=function(){function t(){var t=this;this._useHttp=i.version.minor<3,this.$get=["$http","$templateCache","$injector",function(e,n,r){return t.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),t.$http=e,t.$templateCache=n,t}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,r){var i=function(t){return n.services.$q.when(t).then(function(t){return{template:t}})},o=function(t){return n.services.$q.when(t).then(function(t){return{component:t}})};return n.isDefined(t.template)?i(this.fromString(t.template,e)):n.isDefined(t.templateUrl)?i(this.fromUrl(t.templateUrl,e)):n.isDefined(t.templateProvider)?i(this.fromProvider(t.templateProvider,e,r)):n.isDefined(t.component)?o(t.component):n.isDefined(t.componentProvider)?o(this.fromComponentProvider(t.componentProvider,e,r)):i("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return n.isFunction(t)?t(e):t},t.prototype.fromUrl=function(t,e){return n.isFunction(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,r){var i=n.services.$injector.annotate(t),o=n.isArray(t)?n.tail(t):t,a=new n.Resolvable("",o,i);return a.get(r)},t.prototype.fromComponentProvider=function(t,e,r){var i=n.services.$injector.annotate(t),o=n.isArray(t)?n.tail(t):t,a=new n.Resolvable("",o,i);return a.get(r)},t.prototype.makeComponentTemplate=function(t,e,r,o){o=o||{};var a=i.version.minor>=3?"::":"",u=function(t){var e=n.kebobString(t);return/^(x|data)-/.exec(e)?"x-"+e:e},s=function(t){var e=n.services.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(f).reduce(n.unnestR,[])}(r).map(function(r){var i=r.name,s=r.type,c=u(i);if(t.attr(c)&&!o[i])return c+"='"+t.attr(c)+"'";var l=o[i]||i;if("@"===s)return c+"='{{"+a+"$resolve."+l+"}}'";if("&"===s){var f=e.getResolvable(l),p=f&&f.data,h=p&&n.services.$injector.annotate(p)||[],d=n.isArray(p)?"["+(p.length-1)+"]":"";return c+"='$resolve."+l+d+"("+h.join(",")+")'"}return c+"='"+a+"$resolve."+l+"'"}).join(" "),c=u(r);return"<"+c+" "+s+"></"+c+">"},t}(),f=function(t){return n.isObject(t.bindToController)?p(t.bindToController):p(t.scope)},p=function(t){return Object.keys(t||{}).map(function(e){return[e,/^([=<@&])[?]?(.*)/.exec(t[e])]}).filter(function(t){return n.isDefined(t)&&n.isArray(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},h=function(){function t(e,r){this.stateRegistry=e,this.stateService=r,n.createProxyFunctions(n.val(t.prototype),this,n.val(this))}return t.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},t.prototype.state=function(t,e){return n.isObject(t)?e=t:e.name=t,this.stateRegistry.register(e),this},t.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},t}(),d=function(t){return function(e,r){var i=e[t],o="onExit"===t?"from":"to";return i?function(t,e){var r=new n.ResolveContext(t.treeChanges(o)).subContext(e.$$state()),a=n.extend(A(r),{$state$:e,$transition$:t});return n.services.$injector.invoke(i,this,a)}:void 0}},v=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=n.val(t);n.createProxyFunctions(e,this,e,["hashPrefix"])}return t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return n.removeFrom(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=n.isObject(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.baseHref=function(){return this._baseHref||(this._baseHref=this.$browser.baseHref()||this.$window.location.pathname)},t.prototype.url=function(t,e,r){return void 0===e&&(e=!1),n.isDefined(t)&&this.$location.url(t),e&&this.$location.replace(),r&&this.$location.state(r),this.$location.url()},t.prototype._runtimeServices=function(t,e,r,i,o){var a=this;this.$location=e,this.$sniffer=r,this.$browser=i,this.$window=o,t.$on("$locationChangeSuccess",function(t){return a._urlListeners.forEach(function(e){return e(t)})});var u=n.val(e);n.createProxyFunctions(u,this,u,["replace","path","search","hash"]),n.createProxyFunctions(u,this,u,["port","protocol","host"])},t}(),m=function(){function t(t){this._router=t,this._urlRouter=t.urlRouter}return t.injectableHandler=function(t,e){return function(r){return n.services.$injector.invoke(e,null,{$match:r,$stateParams:t.globals.params})}},t.prototype.$get=function(){var t=this._urlRouter;return t.update(!0),t.interceptDeferred||t.listen(),t},t.prototype.rule=function(t){var e=this;if(!n.isFunction(t))throw new Error("'rule' must be a function");var r=new n.BaseUrlRule(function(){return t(n.services.$injector,e._router.locationService)},n.identity);return this._urlRouter.rule(r),this},t.prototype.otherwise=function(t){var e=this,r=this._urlRouter;if(n.isString(t))r.otherwise(t);else{if(!n.isFunction(t))throw new Error("'rule' must be a string or function");r.otherwise(function(){return t(n.services.$injector,e._router.locationService)})}return this},t.prototype.when=function(e,r){return(n.isArray(r)||n.isFunction(r))&&(r=t.injectableHandler(this._router,r)),this._urlRouter.when(e,r),this},t.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)},t}();i.module("ui.router.angular1",[]);var g=i.module("ui.router.init",["ng"]),$=i.module("ui.router.util",["ui.router.init"]),y=i.module("ui.router.router",["ui.router.util"]),b=i.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),w=i.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),x=(i.module("ui.router.compat",["ui.router"]),null);function O(t){(x=this.router=new n.UIRouter).stateProvider=new h(x.stateRegistry,x.stateService),x.stateRegistry.decorator("views",u),x.stateRegistry.decorator("onExit",d("onExit")),x.stateRegistry.decorator("onRetain",d("onRetain")),x.stateRegistry.decorator("onEnter",d("onEnter")),x.viewService._pluginapi._viewConfigFactory("ng1",o());var e=x.locationService=x.locationConfig=new v(t);function r(t,n,r,i,o,a,u){return e._runtimeServices(o,t,i,n,r),delete x.router,delete x.$get,x}return v.monkeyPatchPathParameterType(x),x.router=x,x.$get=r,r.$inject=["$location","$browser","$window","$sniffer","$rootScope","$http","$templateCache"],x}O.$inject=["$locationProvider"];var E=function(t){return["$uiRouterProvider",function(e){var n=e.router[t];return n.$get=function(){return n},n}]};function S(t,e,r){if(n.services.$injector=t,n.services.$q=e,!t.hasOwnProperty("strictDi"))try{t.invoke(function(t){})}catch(e){t.strictDi=!!/strict mode/.exec(e&&e.toString())}r.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(n.unnestR,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(e){return e.deps=t.annotate(e.resolveFn,t.strictDi)})}function C(t){t.$watch(function(){n.trace.approximateDigests++})}S.$inject=["$injector","$q","$uiRouter"],C.$inject=["$rootScope"],g.provider("$uiRouter",O),y.provider("$urlRouter",["$uiRouterProvider",function(t){return t.urlRouterProvider=new m(t)}]),$.provider("$urlService",E("urlService")),$.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return x.urlMatcherFactory}]),$.provider("$templateFactory",function(){return new l}),b.provider("$stateRegistry",E("stateRegistry")),b.provider("$uiRouterGlobals",E("globals")),b.provider("$transitions",E("transitionService")),b.provider("$state",["$uiRouterProvider",function(){return n.extend(x.stateProvider,{$get:function(){return x.stateService}})}]),b.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),w.factory("$view",function(){return x.viewService}),w.service("$trace",function(){return n.trace}),w.run(C),$.run(["$urlMatcherFactory",function(t){}]),b.run(["$state",function(t){}]),y.run(["$urlRouter",function(t){}]),g.run(S);var j,k,T,_,A=function(t){var e=t.getTokens().filter(n.isString),r=e.map(function(e){var n=t.getResolvable(e),r=t.getPolicy(n).async;return[e,"NOWAIT"===r?n.promise:n.data]});return r.reduce(n.applyPairs,{})};function R(t){var e,n=t.match(/^\s*({[^}]*})\s*$/);if(n&&(t="("+n[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function P(t){var e=t.parent().inheritedData("$uiView"),r=n.parse("$cfg.path")(e);return r?n.tail(r).state.name:void 0}function N(t,e,r){var i=r.uiState||t.current.name,o=n.extend(function(t,e){return{relative:P(t)||e.$current,inherit:!0,source:"sref"}}(e,t),r.uiStateOpts||{}),a=t.href(i,r.uiStateParams,o);return{uiState:i,uiStateParams:r.uiStateParams,uiStateOpts:o,href:a}}function D(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function M(t,e,n,r,i){return function(o){var a=o.which||o.button,u=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var s=n(function(){t.attr("disabled")||e.go(u.uiState,u.uiStateParams,u.uiStateOpts)});o.preventDefault();var c=r.isAnchor&&!u.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(s)}}}}function I(t,e,r,i){var o;i&&(o=i.events),n.isArray(o)||(o=["click"]);for(var a=t.on?"on":"bind",u=0,s=o;u<s.length;u++){var c=s[u];t[a](c,r)}e.$on("$destroy",function(){for(var e=t.off?"off":"unbind",n=0,i=o;n<i.length;n++){var a=i[n];t[e](a,r)}})}function V(t){var e=function(e,n,r){return t.is(e,n,r)};return e.$stateful=!0,e}function q(t){var e=function(e,n,r){return t.includes(e,n,r)};return e.$stateful=!0,e}function L(t,e,r,o,a,u){var s=n.parse("viewDecl.controllerAs"),c=n.parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(o){var u=o.html();return o.empty(),function(o,l){var f=l.data("$uiView");if(!f)return l.html(u),void t(l.contents())(o);var p=f.$cfg||{viewDecl:{},getTemplate:n.noop},h=p.path&&new n.ResolveContext(p.path);l.html(p.getTemplate(l,h)||u),n.trace.traceUIViewFill(f.$uiView,l.html());var d=t(l.contents()),v=p.controller,m=s(p),g=c(p),$=h&&A(h);if(o[g]=$,v){var y=e(v,n.extend({},$,{$scope:o,$element:l}));m&&(o[m]=y,o[m][g]=$),l.data("$ngControllerController",y),l.children().data("$ngControllerController",y),F(a,r,y,o,p)}if(n.isString(p.component))var b=n.kebobString(p.component),w=new RegExp("^(x-|data-)?"+b+"$","i"),x=o.$watch(function(){var t=[].slice.call(l[0].children).filter(function(t){return t&&t.tagName&&w.exec(t.tagName)});return t&&i.element(t).data("$"+p.component+"Controller")},function(t){t&&(F(a,r,t,o,p),x())});d(o)}}}}j=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,u){var s,c=D(o),l=u[1]||u[0],f=null,p={},h=function(){return N(r,o,p)},d=R(a.uiSref);function v(){var t=h();f&&f(),l&&(f=l.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&a.$set(c.attr,t.href)}p.uiState=d.state,p.uiStateOpts=a.uiSrefOpts?i.$eval(a.uiSrefOpts):{},d.paramExpr&&(i.$watch(d.paramExpr,function(t){p.uiStateParams=n.extend({},t),v()},!0),p.uiStateParams=n.extend({},i.$eval(d.paramExpr))),v(),i.$on("$destroy",t.stateRegistry.onStatesChanged(v)),i.$on("$destroy",t.transitionService.onSuccess({},v)),c.clickable&&(s=M(o,r,e,c,h),I(o,i,s,p.uiStateOpts))}}}],k=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,u){var s,c=D(o),l=u[1]||u[0],f=null,p={},h=function(){return N(r,o,p)},d=["uiState","uiStateParams","uiStateOpts"],v=d.reduce(function(t,e){return t[e]=n.noop,t},{});function m(){var t=h();f&&f(),l&&(f=l.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&a.$set(c.attr,t.href)}d.forEach(function(t){p[t]=a[t]?i.$eval(a[t]):null,a.$observe(t,function(e){v[t](),v[t]=i.$watch(e,function(e){p[t]=e,m()},!0)})}),m(),i.$on("$destroy",t.stateRegistry.onStatesChanged(m)),i.$on("$destroy",t.transitionService.onSuccess({},m)),c.clickable&&(s=M(o,r,e,c,h),I(o,i,s,p.uiStateOpts))}}}],T=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,r,i){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,o,a){var u,s,c=[];u=r(a.uiSrefActiveEq||"",!1)(e);try{s=e.$eval(a.uiSrefActive)}catch(t){}function l(t){t.promise.then(d,n.noop)}function f(){p(s)}function p(t){n.isObject(t)&&(c=[],n.forEach(t,function(t,r){var i=function(t,n){var r=R(t);h(r.state,e.$eval(r.paramExpr),n)};n.isString(t)?i(t,r):n.isArray(t)&&n.forEach(t,function(t){i(t,r)})}))}function h(e,r,i){var a=t.get(e,P(o)),u={state:a||{name:e},params:r,activeClass:i};return c.push(u),function(){n.removeFrom(c)(u)}}function d(){var r=function(t){return t.split(/\s/).filter(n.identity)},i=function(t){return t.map(function(t){return t.activeClass}).map(r).reduce(n.unnestR,[])},a=i(c).concat(r(u)).reduce(n.uniqR,[]),s=i(c.filter(function(e){return t.includes(e.state.name,e.params)})),l=!!c.filter(function(e){return t.is(e.state.name,e.params)}).length,f=l?r(u):[],p=s.concat(f).reduce(n.uniqR,[]),h=a.filter(function(t){return!n.inArray(p,t)});e.$evalAsync(function(){p.forEach(function(t){return o.addClass(t)}),h.forEach(function(t){return o.removeClass(t)})})}p(s=s||r(a.uiSrefActive||"",!1)(e)),this.$$addStateInfo=function(t,e){if(!(n.isObject(s)&&c.length>0)){var r=h(t,e,s);return d(),r}},e.$on("$destroy",function(){var t=i.stateRegistry.onStatesChanged(f),n=i.transitionService.onStart({},l),r=e.$on("$stateChangeSuccess",d);return function(){t(),n(),r()}}()),i.globals.transition&&l(i.globals.transition),d()}]}}],i.module("ui.router.state").directive("uiSref",j).directive("uiSrefActive",T).directive("uiSrefActiveEq",T).directive("uiState",k),V.$inject=["$state"],q.$inject=["$state"],i.module("ui.router.state").filter("isState",V).filter("includedByState",q),_=["$view","$animate","$uiViewScroll","$interpolate","$q",function(t,e,r,o,a){var u={$cfg:{viewDecl:{$context:t._pluginapi._rootViewContext()}},$uiView:{}},s={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(l,f,p){return function(l,f,h){var d,v,m,g,$,y=h.onload||"",b=h.autoscroll,w={enter:function(t,n,r){i.version.minor>2?e.enter(t,null,n).then(r):e.enter(t,null,n,r)},leave:function(t,n){i.version.minor>2?e.leave(t).then(n):e.leave(t,n)}},x=f.inheritedData("$uiView")||u,O=o(h.uiView||h.name||"")(l)||"$default",E={$type:"ng1",id:s.count++,name:O,fqn:x.$uiView.fqn?x.$uiView.fqn+"."+O:O,config:null,configUpdated:function(t){(!t||t instanceof c)&&(function(t,e){return t===e}(g,t)||(n.trace.traceUIViewConfigUpdated(E,t&&t.viewDecl&&t.viewDecl.$context),g=t,S(t)))},get creationContext(){var t=n.parse("$cfg.viewDecl.$context")(x),e=n.parse("$uiView.creationContext")(x);return t||e}};function S(t){var e=l.$new(),i=a.defer(),o=a.defer(),u={$cfg:t,$uiView:E},s={$animEnter:i.promise,$animLeave:o.promise,$$animLeave:o};e.$emit("$viewContentLoading",O);var c=p(e,function(t){t.data("$uiViewAnim",s),t.data("$uiView",u),w.enter(t,f,function(){i.resolve(),m&&m.$emit("$viewContentAnimationEnded"),(n.isDefined(b)&&!b||l.$eval(b))&&r(t)}),function(){if(d&&(n.trace.traceUIViewEvent("Removing (previous) el",d.data("$uiView")),d.remove(),d=null),m&&(n.trace.traceUIViewEvent("Destroying scope",E),m.$destroy(),m=null),v){var t=v.data("$uiViewAnim");n.trace.traceUIViewEvent("Animate out",t),w.leave(v,function(){t.$$animLeave.resolve(),d=null}),d=v,v=null}}()});v=c,(m=e).$emit("$viewContentLoaded",t||g),m.$eval(y)}n.trace.traceUIViewEvent("Linking",E),f.data("$uiView",{$uiView:E}),S(),$=t.registerUIView(E),l.$on("$destroy",function(){n.trace.traceUIViewEvent("Destroying/Unregistering",E),$()})}}};return s}],L.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var H="function"==typeof i.module("ui.router").component,U=0;function F(t,e,r,i,o){!n.isFunction(r.$onInit)||o.viewDecl.component&&H||r.$onInit();var a=n.tail(o.path).state.self,u={bind:r};if(n.isFunction(r.uiOnParamsChanged)){var s=new n.ResolveContext(o.path),c=s.getResolvable("$transition$").data;i.$on("$destroy",e.onSuccess({},function(t){if(t!==c&&-1===t.exiting().indexOf(a)){var e=t.params("to"),i=t.params("from"),o=function(t){return t.paramSchema},u=t.treeChanges("to").map(o).reduce(n.unnestR,[]),s=t.treeChanges("from").map(o).reduce(n.unnestR,[]),l=u.filter(function(t){var n=s.indexOf(t);return-1===n||!s[n].type.equals(e[t.id],i[t.id])});if(l.length){var f=l.map(function(t){return t.id}),p=n.filter(e,function(t,e){return-1!==f.indexOf(e)});r.uiOnParamsChanged(p,t)}}},u))}if(n.isFunction(r.uiCanExit)){var l=U++,f=function(t){return!!t&&(t._uiCanExitIds&&!0===t._uiCanExitIds[l]||f(t.redirectedFrom()))},p={exiting:a.name};i.$on("$destroy",e.onBefore(p,function(e){var n,i=e._uiCanExitIds=e._uiCanExitIds||{};return f(e)||(n=t.when(r.uiCanExit(e))).then(function(t){return i[l]=!1!==t}),n},u))}}i.module("ui.router.state").directive("uiView",_),i.module("ui.router.state").directive("uiView",L),i.module("ui.router.state").provider("$uiViewScroll",function(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]}),Object.keys(n).forEach(function(e){t[e]=n[e]}),t.core=n,t.default="ui.router",t.watchDigests=C,t.getLocals=A,t.getNg1ViewConfigFactory=o,t.ng1ViewsBuilder=u,t.Ng1ViewConfig=c,t.StateProvider=h,t.UrlRouterProvider=m,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(4),n(19))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(16));var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.something=null}return r(t,[{key:"getMessage",value:function(){i.default.doPost("walletw.exmasterbank?",{xname:"dodol"},function(t){"OK"===t.STATUS&&(this.something=t)})}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(17));var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.server="https://www.exact.co.id/SE/"}return r(t,null,[{key:"doPost",value:async function(t,e,n){try{var r=this.server+t;setTimeout(function(){i.default.post(r,e,function(t,e){n(JSON.parse(t))}).done(function(){console.log("second success")}).fail(function(){console.log("error")}).always(function(){console.log("finished")})},3e3)}catch(t){return null}}},{key:"doGet",value:async function(t,e,n){try{var r=this.server+t;setTimeout(function(){i.default.get(r,e,function(t,e){n(t)}).done(function(){console.log("second success")}).fail(function(){console.log("error")}).always(function(){console.log("finished")})},3e3)}catch(t){return null}}}]),t}();e.default=o},function(t,e,n){var r;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,i){"use strict";var o=[],a=n.document,u=Object.getPrototypeOf,s=o.slice,c=o.concat,l=o.push,f=o.indexOf,p={},h=p.toString,d=p.hasOwnProperty,v=d.toString,m=v.call(Object),g={},$=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function(t){return null!=t&&t===t.window},b={type:!0,src:!0,noModule:!0};function w(t,e,n){var r,i=(e=e||a).createElement("script");if(i.text=t,n)for(r in b)n[r]&&(i[r]=n[r]);e.head.appendChild(i).parentNode.removeChild(i)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?p[h.call(t)]||"object":typeof t}var O=function(t,e){return new O.fn.init(t,e)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function S(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!$(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}O.fn=O.prototype={jquery:"3.3.1",constructor:O,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=O.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return O.each(this,t)},map:function(t){return this.pushStack(O.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},O.extend=O.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},u=1,s=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[u]||{},u++),"object"==typeof a||$(a)||(a={}),u===s&&(a=this,u--);u<s;u++)if(null!=(t=arguments[u]))for(e in t)n=a[e],a!==(r=t[e])&&(c&&r&&(O.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&O.isPlainObject(n)?n:{},a[e]=O.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},O.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==h.call(t))&&(!(e=u(t))||"function"==typeof(n=d.call(e,"constructor")&&e.constructor)&&v.call(n)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){w(t)},each:function(t,e){var n,r=0;if(S(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(E,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?O.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:f.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(S(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return c.apply([],a)},guid:1,support:g}),"function"==typeof Symbol&&(O.fn[Symbol.iterator]=o[Symbol.iterator]),O.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){p["[object "+e+"]"]=e.toLowerCase()});var C=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){var e,n,r,i,o,a,u,s,c,l,f,p,h,d,v,m,g,$,y,b="sizzle"+1*new Date,w=t.document,x=0,O=0,E=at(),S=at(),C=at(),j=function(t,e){return t===e&&(f=!0),0},k={}.hasOwnProperty,T=[],_=T.pop,A=T.push,R=T.push,P=T.slice,N=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",V="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",q=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",L=new RegExp(M+"+","g"),H=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),U=new RegExp("^"+M+"*,"+M+"*"),F=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),B=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),W=new RegExp(q),z=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){p()},it=$t(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{R.apply(T=P.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(t){R={apply:T.length?function(t,e){A.apply(t,P.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,u,c,l,f,d,g,$=e&&e.ownerDocument,x=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return r;if(!i&&((e?e.ownerDocument||e:w)!==h&&p(e),e=e||h,v)){if(11!==x&&(f=X.exec(t)))if(o=f[1]){if(9===x){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if($&&(c=$.getElementById(o))&&y(e,c)&&c.id===o)return r.push(c),r}else{if(f[2])return R.apply(r,e.getElementsByTagName(t)),r;if((o=f[3])&&n.getElementsByClassName&&e.getElementsByClassName)return R.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!C[t+" "]&&(!m||!m.test(t))){if(1!==x)$=e,g=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(et,nt):e.setAttribute("id",l=b),u=(d=a(t)).length;u--;)d[u]="#"+l+" "+gt(d[u]);g=d.join(","),$=Q.test(t)&&vt(e.parentNode)||e}if(g)try{return R.apply(r,$.querySelectorAll(g)),r}catch(t){}finally{l===b&&e.removeAttribute("id")}}}return s(t.replace(H,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ut(t){return t[b]=!0,t}function st(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ht(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function dt(t){return ut(function(e){return e=+e,ut(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:w;return a!==h&&9===a.nodeType&&a.documentElement?(d=(h=a).documentElement,v=!o(h),w!==h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=st(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=st(function(t){return t.appendChild(h.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(h.getElementsByClassName),n.getById=st(function(t){return d.appendChild(t).id=b,!h.getElementsByName||!h.getElementsByName(b).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&v){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&v){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&v)return e.getElementsByClassName(t)},g=[],m=[],(n.qsa=Y.test(h.querySelectorAll))&&(st(function(t){d.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+M+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+M+"*(?:value|"+D+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")}),st(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+M+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test($=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&st(function(t){n.disconnectedMatch=$.call(t,"*"),$.call(t,"[s!='']:x"),g.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),e=Y.test(d.compareDocumentPosition),y=e||Y.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},j=e?function(t,e){if(t===e)return f=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===h||t.ownerDocument===w&&y(w,t)?-1:e===h||e.ownerDocument===w&&y(w,e)?1:l?N(l,t)-N(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return f=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],u=[e];if(!i||!o)return t===h?-1:e===h?1:i?-1:o?1:l?N(l,t)-N(l,e):0;if(i===o)return lt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?lt(a[r],u[r]):a[r]===w?-1:u[r]===w?1:0},h):h},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==h&&p(t),e=e.replace(B,"='$1']"),n.matchesSelector&&v&&!C[e+" "]&&(!g||!g.test(e))&&(!m||!m.test(e)))try{var r=$.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,h,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==h&&p(t),y(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==h&&p(t);var i=r.attrHandle[e.toLowerCase()],o=i&&k.call(r.attrHandle,e.toLowerCase())?i(t,e,!v):void 0;return void 0!==o?o:n.attributes||!v?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(f=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(j),f){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:ut,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Z,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Z,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Z,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+M+")"+t+"("+M+"|$)"))&&E(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(L," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),u="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,s){var c,l,f,p,h,d,v=o!==a?"nextSibling":"previousSibling",m=e.parentNode,g=u&&e.nodeName.toLowerCase(),$=!s&&!u,y=!1;if(m){if(o){for(;v;){for(p=e;p=p[v];)if(u?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;d=v="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&$){for(y=(h=(c=(l=(f=(p=m)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[t]||[])[0]===x&&c[1])&&c[2],p=h&&m.childNodes[h];p=++h&&p&&p[v]||(y=h=0)||d.pop();)if(1===p.nodeType&&++y&&p===e){l[t]=[x,h,y];break}}else if($&&(y=h=(c=(l=(f=(p=e)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[t]||[])[0]===x&&c[1]),!1===y)for(;(p=++h&&p&&p[v]||(y=h=0)||d.pop())&&((u?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++y||($&&((l=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[t]=[x,y]),p!==e)););return(y-=i)===r||y%r==0&&y/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=N(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:ut(function(t){var e=[],n=[],r=u(t.replace(H,"$1"));return r[b]?ut(function(t,e,n,i){for(var o,a=r(t,null,i,[]),u=t.length;u--;)(o=a[u])&&(t[u]=!(e[u]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:ut(function(t){return function(e){return ot(t,e).length>0}}),contains:ut(function(t){return t=t.replace(Z,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:ut(function(t){return z.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(Z,tt).toLowerCase(),function(e){var n;do{if(n=v?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ht(!1),disabled:ht(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(t,e){return[e-1]}),eq:dt(function(t,e,n){return[n<0?n+e:n]}),even:dt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:dt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:dt(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:dt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function mt(){}function gt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function $t(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,u=O++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,s){var c,l,f,p=[x,u];if(s){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(l=(f=e[b]||(e[b]={}))[e.uniqueID]||(f[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[o])&&c[0]===x&&c[1]===u)return p[2]=c[2];if(l[o]=p,p[2]=t(e,n,s))return!0}return!1}}function yt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function bt(t,e,n,r,i){for(var o,a=[],u=0,s=t.length,c=null!=e;u<s;u++)(o=t[u])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(u)));return a}function wt(t,e,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),ut(function(o,a,u,s){var c,l,f,p=[],h=[],d=a.length,v=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",u.nodeType?[u]:u,[]),m=!t||!o&&e?v:bt(v,p,t,u,s),g=n?i||(o?t:d||r)?[]:a:m;if(n&&n(m,g,u,s),r)for(c=bt(g,h),r(c,[],u,s),l=c.length;l--;)(f=c[l])&&(g[h[l]]=!(m[h[l]]=f));if(o){if(i||t){if(i){for(c=[],l=g.length;l--;)(f=g[l])&&c.push(m[l]=f);i(null,g=[],c,s)}for(l=g.length;l--;)(f=g[l])&&(c=i?N(o,f):p[l])>-1&&(o[c]=!(a[c]=f))}}else g=bt(g===a?g.splice(d,g.length):g),i?i(null,a,g,s):R.apply(a,g)})}function xt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],u=a||r.relative[" "],s=a?1:0,l=$t(function(t){return t===e},u,!0),f=$t(function(t){return N(e,t)>-1},u,!0),p=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?l(t,n,r):f(t,n,r));return e=null,i}];s<o;s++)if(n=r.relative[t[s].type])p=[$t(yt(p),n)];else{if((n=r.filter[t[s].type].apply(null,t[s].matches))[b]){for(i=++s;i<o&&!r.relative[t[i].type];i++);return wt(s>1&&yt(p),s>1&&gt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(H,"$1"),n,s<i&&xt(t.slice(s,i)),i<o&&xt(t=t.slice(i)),i<o&&gt(t))}p.push(n)}return yt(p)}return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,a=ot.tokenize=function(t,e){var n,i,o,a,u,s,c,l=S[t+" "];if(l)return e?0:l.slice(0);for(u=t,s=[],c=r.preFilter;u;){for(a in n&&!(i=U.exec(u))||(i&&(u=u.slice(i[0].length)||u),s.push(o=[])),n=!1,(i=F.exec(u))&&(n=i.shift(),o.push({value:n,type:i[0].replace(H," ")}),u=u.slice(n.length)),r.filter)!(i=G[a].exec(u))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),u=u.slice(n.length));if(!n)break}return e?u.length:u?ot.error(t):S(t,s).slice(0)},u=ot.compile=function(t,e){var n,i=[],o=[],u=C[t+" "];if(!u){for(e||(e=a(t)),n=e.length;n--;)(u=xt(e[n]))[b]?i.push(u):o.push(u);(u=C(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,u,s,l){var f,d,m,g=0,$="0",y=o&&[],b=[],w=c,O=o||i&&r.find.TAG("*",l),E=x+=null==w?1:Math.random()||.1,S=O.length;for(l&&(c=a===h||a||l);$!==S&&null!=(f=O[$]);$++){if(i&&f){for(d=0,a||f.ownerDocument===h||(p(f),u=!v);m=t[d++];)if(m(f,a||h,u)){s.push(f);break}l&&(x=E)}n&&((f=!m&&f)&&g--,o&&y.push(f))}if(g+=$,n&&$!==g){for(d=0;m=e[d++];)m(y,b,a,u);if(o){if(g>0)for(;$--;)y[$]||b[$]||(b[$]=_.call(s));b=bt(b)}R.apply(s,b),l&&!o&&b.length>0&&g+e.length>1&&ot.uniqueSort(s)}return l&&(x=E,c=w),y};return n?ut(o):o}(o,i))).selector=t}return u},s=ot.select=function(t,e,n,i){var o,s,c,l,f,p="function"==typeof t&&t,h=!i&&a(t=p.selector||t);if(n=n||[],1===h.length){if((s=h[0]=h[0].slice(0)).length>2&&"ID"===(c=s[0]).type&&9===e.nodeType&&v&&r.relative[s[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(Z,tt),e)||[])[0]))return n;p&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(o=G.needsContext.test(t)?0:s.length;o--&&(c=s[o],!r.relative[l=c.type]);)if((f=r.find[l])&&(i=f(c.matches[0].replace(Z,tt),Q.test(s[0].type)&&vt(e.parentNode)||e))){if(s.splice(o,1),!(t=i.length&&gt(s)))return R.apply(n,i),n;break}}return(p||u(t,h))(i,e,!v,n,!e||Q.test(t)&&vt(e.parentNode)||e),n},n.sortStable=b.split("").sort(j).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=st(function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))}),st(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&st(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),st(function(t){return null==t.getAttribute("disabled")})||ct(D,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),ot}(n);O.find=C,O.expr=C.selectors,O.expr[":"]=O.expr.pseudos,O.uniqueSort=O.unique=C.uniqueSort,O.text=C.getText,O.isXMLDoc=C.isXML,O.contains=C.contains,O.escapeSelector=C.escape;var j=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&O(t).is(n))break;r.push(t)}return r},k=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},T=O.expr.match.needsContext;function _(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(t,e,n){return $(e)?O.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?O.grep(t,function(t){return t===e!==n}):"string"!=typeof e?O.grep(t,function(t){return f.call(e,t)>-1!==n}):O.filter(e,t,n)}O.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?O.find.matchesSelector(r,t)?[r]:[]:O.find.matches(t,O.grep(e,function(t){return 1===t.nodeType}))},O.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(O(t).filter(function(){for(e=0;e<r;e++)if(O.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)O.find(t,i[e],n);return r>1?O.uniqueSort(n):n},filter:function(t){return this.pushStack(R(this,t||[],!1))},not:function(t){return this.pushStack(R(this,t||[],!0))},is:function(t){return!!R(this,"string"==typeof t&&T.test(t)?O(t):t||[],!1).length}});var P,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(O.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:N.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof O?e[0]:e,O.merge(this,O.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),A.test(r[1])&&O.isPlainObject(e))for(r in e)$(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):$(t)?void 0!==n.ready?n.ready(t):t(O):O.makeArray(t,this)}).prototype=O.fn,P=O(a);var D=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}O.fn.extend({has:function(t){var e=O(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(O.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&O(t);if(!T.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&O.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?O.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?f.call(O(t),this[0]):f.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(O.uniqueSort(O.merge(this.get(),O(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),O.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return j(t,"parentNode")},parentsUntil:function(t,e,n){return j(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return j(t,"nextSibling")},prevAll:function(t){return j(t,"previousSibling")},nextUntil:function(t,e,n){return j(t,"nextSibling",n)},prevUntil:function(t,e,n){return j(t,"previousSibling",n)},siblings:function(t){return k((t.parentNode||{}).firstChild,t)},children:function(t){return k(t.firstChild)},contents:function(t){return _(t,"iframe")?t.contentDocument:(_(t,"template")&&(t=t.content||t),O.merge([],t.childNodes))}},function(t,e){O.fn[t]=function(n,r){var i=O.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=O.filter(r,i)),this.length>1&&(M[t]||O.uniqueSort(i),D.test(t)&&i.reverse()),this.pushStack(i)}});var V=/[^\x20\t\r\n\f]+/g;function q(t){return t}function L(t){throw t}function H(t,e,n,r){var i;try{t&&$(i=t.promise)?i.call(t).done(e).fail(n):t&&$(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}O.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return O.each(t.match(V)||[],function(t,n){e[n]=!0}),e}(t):O.extend({},t);var e,n,r,i,o=[],a=[],u=-1,s=function(){for(i=i||t.once,r=e=!0;a.length;u=-1)for(n=a.shift();++u<o.length;)!1===o[u].apply(n[0],n[1])&&t.stopOnFalse&&(u=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(u=o.length-1,a.push(n)),function e(n){O.each(n,function(n,r){$(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&e(r)})}(arguments),n&&!e&&s()),this},remove:function(){return O.each(arguments,function(t,e){for(var n;(n=O.inArray(e,o,n))>-1;)o.splice(n,1),n<=u&&u--}),this},has:function(t){return t?O.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||s()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},O.extend({Deferred:function(t){var e=[["notify","progress",O.Callbacks("memory"),O.Callbacks("memory"),2],["resolve","done",O.Callbacks("once memory"),O.Callbacks("once memory"),0,"resolved"],["reject","fail",O.Callbacks("once memory"),O.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return O.Deferred(function(n){O.each(e,function(e,r){var i=$(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&$(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,r,i){var o=0;function a(t,e,r,i){return function(){var u=this,s=arguments,c=function(){var n,c;if(!(t<o)){if((n=r.apply(u,s))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,$(c)?i?c.call(n,a(o,e,q,i),a(o,e,L,i)):(o++,c.call(n,a(o,e,q,i),a(o,e,L,i),a(o,e,q,e.notifyWith))):(r!==q&&(u=void 0,s=[n]),(i||e.resolveWith)(u,s))}},l=i?c:function(){try{c()}catch(n){O.Deferred.exceptionHook&&O.Deferred.exceptionHook(n,l.stackTrace),t+1>=o&&(r!==L&&(u=void 0,s=[n]),e.rejectWith(u,s))}};t?l():(O.Deferred.getStackHook&&(l.stackTrace=O.Deferred.getStackHook()),n.setTimeout(l))}}return O.Deferred(function(n){e[0][3].add(a(0,n,$(i)?i:q,n.notifyWith)),e[1][3].add(a(0,n,$(t)?t:q)),e[2][3].add(a(0,n,$(r)?r:L))}).promise()},promise:function(t){return null!=t?O.extend(t,i):i}},o={};return O.each(e,function(t,n){var a=n[2],u=n[5];i[n[1]]=a.add,u&&a.add(function(){r=u},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),o=O.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(H(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||$(i[n]&&i[n].then)))return o.then();for(;n--;)H(i[n],a(n),o.reject);return o.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;O.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&U.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},O.readyException=function(t){n.setTimeout(function(){throw t})};var F=O.Deferred();function B(){a.removeEventListener("DOMContentLoaded",B),n.removeEventListener("load",B),O.ready()}O.fn.ready=function(t){return F.then(t).catch(function(t){O.readyException(t)}),this},O.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--O.readyWait:O.isReady)||(O.isReady=!0,!0!==t&&--O.readyWait>0||F.resolveWith(a,[O]))}}),O.ready.then=F.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(O.ready):(a.addEventListener("DOMContentLoaded",B),n.addEventListener("load",B));var W=function(t,e,n,r,i,o,a){var u=0,s=t.length,c=null==n;if("object"===x(n))for(u in i=!0,n)W(t,e,u,n[u],!0,o,a);else if(void 0!==r&&(i=!0,$(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(O(t),n)})),e))for(;u<s;u++)e(t[u],n,a?r:r.call(t[u],u,e(t[u],n)));return i?t:c?e.call(t):s?e(t[0],n):o},z=/^-ms-/,G=/-([a-z])/g;function J(t,e){return e.toUpperCase()}function K(t){return t.replace(z,"ms-").replace(G,J)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=O.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in r?[e]:e.match(V)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||O.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!O.isEmptyObject(e)}};var Q=new X,Z=new X,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}O.extend({hasData:function(t){return Z.hasData(t)||Q.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return Q.access(t,e,n)},_removeData:function(t,e){Q.remove(t,e)}}),O.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=K(r.slice(5)),nt(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){Z.set(this,t)}):W(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Z.get(o,t))?n:void 0!==(n=nt(o,t))?n:void 0;this.each(function(){Z.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Z.remove(this,t)})}}),O.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Q.get(t,e),n&&(!r||Array.isArray(n)?r=Q.access(t,e,O.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=O.queue(t,e),r=n.length,i=n.shift(),o=O._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){O.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Q.get(t,n)||Q.access(t,n,{empty:O.Callbacks("once memory").add(function(){Q.remove(t,[e+"queue",n])})})}}),O.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?O.queue(this[0],t):void 0===e?this:this.each(function(){var n=O.queue(this,t,e);O._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&O.dequeue(this,t)})},dequeue:function(t){return this.each(function(){O.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=O.Deferred(),o=this,a=this.length,u=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Q.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(e)}});var rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&O.contains(t.ownerDocument,t)&&"none"===O.css(t,"display")},ut=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};function st(t,e,n,r){var i,o,a=20,u=r?function(){return r.cur()}:function(){return O.css(t,e,"")},s=u(),c=n&&n[3]||(O.cssNumber[e]?"":"px"),l=(O.cssNumber[e]||"px"!==c&&+s)&&it.exec(O.css(t,e));if(l&&l[3]!==c){for(s/=2,c=c||l[3],l=+s||1;a--;)O.style(t,e,l+c),(1-o)*(1-(o=u()/s||.5))<=0&&(a=0),l/=o;l*=2,O.style(t,e,l+c),n=n||[]}return n&&(l=+l||+s||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var ct={};function lt(t){var e,n=t.ownerDocument,r=t.nodeName,i=ct[r];return i||(e=n.body.appendChild(n.createElement(r)),i=O.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ct[r]=i,i)}function ft(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&at(r)&&(i[o]=lt(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}O.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?O(this).show():O(this).hide()})}});var pt=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,dt=/^$|^module$|\/(?:java|ecma)script/i,vt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&_(t,e)?O.merge([t],n):n}function gt(t,e){for(var n=0,r=t.length;n<r;n++)Q.set(t[n],"globalEval",!e||Q.get(e[n],"globalEval"))}vt.optgroup=vt.option,vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td;var $t=/<|&#?\w+;/;function yt(t,e,n,r,i){for(var o,a,u,s,c,l,f=e.createDocumentFragment(),p=[],h=0,d=t.length;h<d;h++)if((o=t[h])||0===o)if("object"===x(o))O.merge(p,o.nodeType?[o]:o);else if($t.test(o)){for(a=a||f.appendChild(e.createElement("div")),u=(ht.exec(o)||["",""])[1].toLowerCase(),s=vt[u]||vt._default,a.innerHTML=s[1]+O.htmlPrefilter(o)+s[2],l=s[0];l--;)a=a.lastChild;O.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(e.createTextNode(o));for(f.textContent="",h=0;o=p[h++];)if(r&&O.inArray(o,r)>-1)i&&i.push(o);else if(c=O.contains(o.ownerDocument,o),a=mt(f.appendChild(o),"script"),c&&gt(a),n)for(l=0;o=a[l++];)dt.test(o.type||"")&&n.push(o);return f}!function(){var t=a.createDocumentFragment().appendChild(a.createElement("div")),e=a.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),g.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var bt=a.documentElement,wt=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ot=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function St(){return!1}function Ct(){try{return a.activeElement}catch(t){}}function jt(t,e,n,r,i,o){var a,u;if("object"==typeof e){for(u in"string"!=typeof n&&(r=r||n,n=void 0),e)jt(t,u,n,r,e[u],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=St;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return O().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=O.guid++)),t.each(function(){O.event.add(this,e,i,r,n)})}O.event={global:{},add:function(t,e,n,r,i){var o,a,u,s,c,l,f,p,h,d,v,m=Q.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&O.find.matchesSelector(bt,i),n.guid||(n.guid=O.guid++),(s=m.events)||(s=m.events={}),(a=m.handle)||(a=m.handle=function(e){return void 0!==O&&O.event.triggered!==e.type?O.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(V)||[""]).length;c--;)h=v=(u=Ot.exec(e[c])||[])[1],d=(u[2]||"").split(".").sort(),h&&(f=O.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=O.event.special[h]||{},l=O.extend({type:h,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&O.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=s[h])||((p=s[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,d,a)||t.addEventListener&&t.addEventListener(h,a)),f.add&&(f.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),O.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,a,u,s,c,l,f,p,h,d,v,m=Q.hasData(t)&&Q.get(t);if(m&&(s=m.events)){for(c=(e=(e||"").match(V)||[""]).length;c--;)if(h=v=(u=Ot.exec(e[c])||[])[1],d=(u[2]||"").split(".").sort(),h){for(f=O.event.special[h]||{},p=s[h=(r?f.delegateType:f.bindType)||h]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)l=p[o],!i&&v!==l.origType||n&&n.guid!==l.guid||u&&!u.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,f.remove&&f.remove.call(t,l));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(t,d,m.handle)||O.removeEvent(t,h,m.handle),delete s[h])}else for(h in s)O.event.remove(t,h+e[c],n,r,!0);O.isEmptyObject(s)&&Q.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,u=O.event.fix(t),s=new Array(arguments.length),c=(Q.get(this,"events")||{})[u.type]||[],l=O.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(a=O.event.handlers.call(this,u,c),e=0;(i=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((O.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,a,u=[],s=e.delegateCount,c=t.target;if(s&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<s;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?O(i,this).index(c)>-1:O.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&u.push({elem:c,handlers:o})}return c=this,s<e.length&&u.push({elem:c,handlers:e.slice(s)}),u},addProp:function(t,e){Object.defineProperty(O.Event.prototype,t,{enumerable:!0,configurable:!0,get:$(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[O.expando]?t:new O.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ct()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ct()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&_(this,"input"))return this.click(),!1},_default:function(t){return _(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},O.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},O.Event=function(t,e){if(!(this instanceof O.Event))return new O.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&O.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[O.expando]=!0},O.Event.prototype={constructor:O.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},O.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},O.event.addProp),O.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){O.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||O.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),O.fn.extend({on:function(t,e,n,r){return jt(this,t,e,n,r)},one:function(t,e,n,r){return jt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,O(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each(function(){O.event.remove(this,t,n,e)})}});var kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Tt=/<script|<style|<link/i,_t=/checked\s*(?:[^=]|=\s*.checked.)/i,At=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Rt(t,e){return _(t,"table")&&_(11!==e.nodeType?e:e.firstChild,"tr")&&O(t).children("tbody")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Dt(t,e){var n,r,i,o,a,u,s,c;if(1===e.nodeType){if(Q.hasData(t)&&(o=Q.access(t),a=Q.set(e,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)O.event.add(e,i,c[i][n]);Z.hasData(t)&&(u=Z.access(t),s=O.extend({},u),Z.set(e,s))}}function Mt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&pt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function It(t,e,n,r){e=c.apply([],e);var i,o,a,u,s,l,f=0,p=t.length,h=p-1,d=e[0],v=$(d);if(v||p>1&&"string"==typeof d&&!g.checkClone&&_t.test(d))return t.each(function(i){var o=t.eq(i);v&&(e[0]=d.call(this,i,o.html())),It(o,e,n,r)});if(p&&(o=(i=yt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(a=O.map(mt(i,"script"),Pt)).length;f<p;f++)s=i,f!==h&&(s=O.clone(s,!0,!0),u&&O.merge(a,mt(s,"script"))),n.call(t[f],s,f);if(u)for(l=a[a.length-1].ownerDocument,O.map(a,Nt),f=0;f<u;f++)s=a[f],dt.test(s.type||"")&&!Q.access(s,"globalEval")&&O.contains(l,s)&&(s.src&&"module"!==(s.type||"").toLowerCase()?O._evalUrl&&O._evalUrl(s.src):w(s.textContent.replace(At,""),l,s))}return t}function Vt(t,e,n){for(var r,i=e?O.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||O.cleanData(mt(r)),r.parentNode&&(n&&O.contains(r.ownerDocument,r)&&gt(mt(r,"script")),r.parentNode.removeChild(r));return t}O.extend({htmlPrefilter:function(t){return t.replace(kt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,u=t.cloneNode(!0),s=O.contains(t.ownerDocument,t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||O.isXMLDoc(t)))for(a=mt(u),r=0,i=(o=mt(t)).length;r<i;r++)Mt(o[r],a[r]);if(e)if(n)for(o=o||mt(t),a=a||mt(u),r=0,i=o.length;r<i;r++)Dt(o[r],a[r]);else Dt(t,u);return(a=mt(u,"script")).length>0&&gt(a,!s&&mt(t,"script")),u},cleanData:function(t){for(var e,n,r,i=O.event.special,o=0;void 0!==(n=t[o]);o++)if(Y(n)){if(e=n[Q.expando]){if(e.events)for(r in e.events)i[r]?O.event.remove(n,r):O.removeEvent(n,r,e.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),O.fn.extend({detach:function(t){return Vt(this,t,!0)},remove:function(t){return Vt(this,t)},text:function(t){return W(this,function(t){return void 0===t?O.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return It(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Rt(this,t).appendChild(t)})},prepend:function(){return It(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Rt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return It(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return It(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(O.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return O.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Tt.test(t)&&!vt[(ht.exec(t)||["",""])[1].toLowerCase()]){t=O.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(O.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return It(this,arguments,function(e){var n=this.parentNode;O.inArray(this,t)<0&&(O.cleanData(mt(this)),n&&n.replaceChild(e,this))},t)}}),O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){O.fn[t]=function(t){for(var n,r=[],i=O(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),O(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}});var qt=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),Lt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Ht=new RegExp(ot.join("|"),"i");function Ut(t,e,n){var r,i,o,a,u=t.style;return(n=n||Lt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||O.contains(t.ownerDocument,t)||(a=O.style(t,e)),!g.pixelBoxStyles()&&qt.test(a)&&Ht.test(e)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Ft(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",bt.appendChild(c).appendChild(l);var t=n.getComputedStyle(l);r="1%"!==t.top,s=12===e(t.marginLeft),l.style.right="60%",u=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=36===l.offsetWidth||"absolute",bt.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var r,i,o,u,s,c=a.createElement("div"),l=a.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===l.style.backgroundClip,O.extend(g,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),u},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),o}}))}();var Bt=/^(none|table(?!-c[ea]).+)/,Wt=/^--/,zt={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:"0",fontWeight:"400"},Jt=["Webkit","Moz","ms"],Kt=a.createElement("div").style;function Yt(t){var e=O.cssProps[t];return e||(e=O.cssProps[t]=function(t){if(t in Kt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Jt.length;n--;)if((t=Jt[n]+e)in Kt)return t}(t)||t),e}function Xt(t,e,n){var r=it.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Qt(t,e,n,r,i,o){var a="width"===e?1:0,u=0,s=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(s+=O.css(t,n+ot[a],!0,i)),r?("content"===n&&(s-=O.css(t,"padding"+ot[a],!0,i)),"margin"!==n&&(s-=O.css(t,"border"+ot[a]+"Width",!0,i))):(s+=O.css(t,"padding"+ot[a],!0,i),"padding"!==n?s+=O.css(t,"border"+ot[a]+"Width",!0,i):u+=O.css(t,"border"+ot[a]+"Width",!0,i));return!r&&o>=0&&(s+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-s-u-.5))),s}function Zt(t,e,n){var r=Lt(t),i=Ut(t,e,r),o="border-box"===O.css(t,"boxSizing",!1,r),a=o;if(qt.test(i)){if(!n)return i;i="auto"}return a=a&&(g.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===O.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+Qt(t,e,n||(o?"border":"content"),a,r,i)+"px"}function te(t,e,n,r,i){return new te.prototype.init(t,e,n,r,i)}O.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ut(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,u=K(e),s=Wt.test(e),c=t.style;if(s||(e=Yt(u)),a=O.cssHooks[e]||O.cssHooks[u],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:c[e];"string"===(o=typeof n)&&(i=it.exec(n))&&i[1]&&(n=st(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(O.cssNumber[u]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(s?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,a,u=K(e);return Wt.test(e)||(e=Yt(u)),(a=O.cssHooks[e]||O.cssHooks[u])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Ut(t,e,r)),"normal"===i&&e in Gt&&(i=Gt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),O.each(["height","width"],function(t,e){O.cssHooks[e]={get:function(t,n,r){if(n)return!Bt.test(O.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,e,r):ut(t,zt,function(){return Zt(t,e,r)})},set:function(t,n,r){var i,o=Lt(t),a="border-box"===O.css(t,"boxSizing",!1,o),u=r&&Qt(t,e,r,a,o);return a&&g.scrollboxSize()===o.position&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Qt(t,e,"border",!1,o)-.5)),u&&(i=it.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=O.css(t,e)),Xt(0,n,u)}}}),O.cssHooks.marginLeft=Ft(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Ut(t,"marginLeft"))||t.getBoundingClientRect().left-ut(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),O.each({margin:"",padding:"",border:"Width"},function(t,e){O.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+ot[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(O.cssHooks[t+e].set=Xt)}),O.fn.extend({css:function(t,e){return W(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Lt(t),i=e.length;a<i;a++)o[e[a]]=O.css(t,e[a],!1,r);return o}return void 0!==n?O.style(t,e,n):O.css(t,e)},t,e,arguments.length>1)}}),O.Tween=te,te.prototype={constructor:te,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||O.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(O.cssNumber[n]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,n=te.propHooks[this.prop];return this.options.duration?this.pos=e=O.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):te.propHooks._default.set(this),this}},te.prototype.init.prototype=te.prototype,te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=O.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){O.fx.step[t.prop]?O.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[O.cssProps[t.prop]]&&!O.cssHooks[t.prop]?t.elem[t.prop]=t.now:O.style(t.elem,t.prop,t.now+t.unit)}}},te.propHooks.scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},O.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},O.fx=te.prototype.init,O.fx.step={};var ee,ne,re=/^(?:toggle|show|hide)$/,ie=/queueHooks$/;function oe(){ne&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(oe):n.setTimeout(oe,O.fx.interval),O.fx.tick())}function ae(){return n.setTimeout(function(){ee=void 0}),ee=Date.now()}function ue(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=ot[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function se(t,e,n){for(var r,i=(ce.tweeners[e]||[]).concat(ce.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function ce(t,e,n){var r,i,o=0,a=ce.prefilters.length,u=O.Deferred().always(function(){delete s.elem}),s=function(){if(i)return!1;for(var e=ee||ae(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return u.notifyWith(t,[c,r,n]),r<1&&a?n:(a||u.notifyWith(t,[c,1,0]),u.resolveWith(t,[c]),!1)},c=u.promise({elem:t,props:O.extend({},e),opts:O.extend(!0,{specialEasing:{},easing:O.easing._default},n),originalProperties:e,originalOptions:n,startTime:ee||ae(),duration:n.duration,tweens:[],createTween:function(e,n){var r=O.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(u.notifyWith(t,[c,1,0]),u.resolveWith(t,[c,e])):u.rejectWith(t,[c,e]),this}}),l=c.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=K(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=O.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=ce.prefilters[o].call(c,t,l,c.opts))return $(r.stop)&&(O._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return O.map(l,se,c),$(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),O.fx.timer(O.extend(s,{elem:t,anim:c,queue:c.opts.queue})),c}O.Animation=O.extend(ce,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return st(n.elem,t,it.exec(e),n),n}]},tweener:function(t,e){$(t)?(e=t,t=["*"]):t=t.match(V);for(var n,r=0,i=t.length;r<i;r++)n=t[r],ce.tweeners[n]=ce.tweeners[n]||[],ce.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,u,s,c,l,f="width"in e||"height"in e,p=this,h={},d=t.style,v=t.nodeType&&at(t),m=Q.get(t,"fxshow");for(r in n.queue||(null==(a=O._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,O.queue(t,"fx").length||a.empty.fire()})})),e)if(i=e[r],re.test(i)){if(delete e[r],o=o||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;v=!0}h[r]=m&&m[r]||O.style(t,r)}if((s=!O.isEmptyObject(e))||!O.isEmptyObject(h))for(r in f&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=m&&m.display)&&(c=Q.get(t,"display")),"none"===(l=O.css(t,"display"))&&(c?l=c:(ft([t],!0),c=t.style.display||c,l=O.css(t,"display"),ft([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===O.css(t,"float")&&(s||(p.done(function(){d.display=c}),null==c&&(l=d.display,c="none"===l?"":l)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),s=!1,h)s||(m?"hidden"in m&&(v=m.hidden):m=Q.access(t,"fxshow",{display:c}),o&&(m.hidden=!v),v&&ft([t],!0),p.done(function(){for(r in v||ft([t]),Q.remove(t,"fxshow"),h)O.style(t,r,h[r])})),s=se(v?m[r]:0,r,p),r in m||(m[r]=s.start,v&&(s.end=s.start,s.start=0))}],prefilter:function(t,e){e?ce.prefilters.unshift(t):ce.prefilters.push(t)}}),O.speed=function(t,e,n){var r=t&&"object"==typeof t?O.extend({},t):{complete:n||!n&&e||$(t)&&t,duration:t,easing:n&&e||e&&!$(e)&&e};return O.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in O.fx.speeds?r.duration=O.fx.speeds[r.duration]:r.duration=O.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){$(r.old)&&r.old.call(this),r.queue&&O.dequeue(this,r.queue)},r},O.fn.extend({fadeTo:function(t,e,n,r){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=O.isEmptyObject(t),o=O.speed(e,n,r),a=function(){var e=ce(this,O.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=O.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ie.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||O.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Q.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=O.timers,a=r?r.length:0;for(n.finish=!0,O.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),O.each(["toggle","show","hide"],function(t,e){var n=O.fn[e];O.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,r,i)}}),O.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){O.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),O.timers=[],O.fx.tick=function(){var t,e=0,n=O.timers;for(ee=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||O.fx.stop(),ee=void 0},O.fx.timer=function(t){O.timers.push(t),O.fx.start()},O.fx.interval=13,O.fx.start=function(){ne||(ne=!0,oe())},O.fx.stop=function(){ne=null},O.fx.speeds={slow:600,fast:200,_default:400},O.fn.delay=function(t,e){return t=O.fx&&O.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,r){var i=n.setTimeout(e,t);r.stop=function(){n.clearTimeout(i)}})},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var le,fe=O.expr.attrHandle;O.fn.extend({attr:function(t,e){return W(this,O.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){O.removeAttr(this,t)})}}),O.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?O.prop(t,e,n):(1===o&&O.isXMLDoc(t)||(i=O.attrHooks[e.toLowerCase()]||(O.expr.match.bool.test(e)?le:void 0)),void 0!==n?null===n?void O.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=O.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&_(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(V);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),le={set:function(t,e,n){return!1===e?O.removeAttr(t,n):t.setAttribute(n,n),n}},O.each(O.expr.match.bool.source.match(/\w+/g),function(t,e){var n=fe[e]||O.find.attr;fe[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=fe[a],fe[a]=i,i=null!=n(t,e,r)?a:null,fe[a]=o),i}});var pe=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;function de(t){return(t.match(V)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(V)||[]}O.fn.extend({prop:function(t,e){return W(this,O.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[O.propFix[t]||t]})}}),O.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&O.isXMLDoc(t)||(e=O.propFix[e]||e,i=O.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=O.find.attr(t,"tabindex");return e?parseInt(e,10):pe.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(O.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),O.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){O.propFix[this.toLowerCase()]=this}),O.fn.extend({addClass:function(t){var e,n,r,i,o,a,u,s=0;if($(t))return this.each(function(e){O(this).addClass(t.call(this,e,ve(this)))});if((e=me(t)).length)for(;n=this[s++];)if(i=ve(n),r=1===n.nodeType&&" "+de(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(u=de(r))&&n.setAttribute("class",u)}return this},removeClass:function(t){var e,n,r,i,o,a,u,s=0;if($(t))return this.each(function(e){O(this).removeClass(t.call(this,e,ve(this)))});if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;n=this[s++];)if(i=ve(n),r=1===n.nodeType&&" "+de(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(u=de(r))&&n.setAttribute("class",u)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):$(t)?this.each(function(n){O(this).toggleClass(t.call(this,n,ve(this),e),e)}):this.each(function(){var e,i,o,a;if(r)for(i=0,o=O(this),a=me(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ve(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Q.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+de(ve(n))+" ").indexOf(e)>-1)return!0;return!1}});var ge=/\r/g;O.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=$(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,O(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=O.map(i,function(t){return null==t?"":t+""})),(e=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=O.valHooks[i.type]||O.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ge,""):null==n?"":n:void 0}}),O.extend({valHooks:{option:{get:function(t){var e=O.find.attr(t,"value");return null!=e?e:de(O.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,u=a?null:[],s=a?o+1:i.length;for(r=o<0?s:a?o:0;r<s;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!_(n.parentNode,"optgroup"))){if(e=O(n).val(),a)return e;u.push(e)}return u},set:function(t,e){for(var n,r,i=t.options,o=O.makeArray(e),a=i.length;a--;)((r=i[a]).selected=O.inArray(O.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),O.each(["radio","checkbox"],function(){O.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=O.inArray(O(t).val(),e)>-1}},g.checkOn||(O.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in n;var $e=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};O.extend(O.event,{trigger:function(t,e,r,i){var o,u,s,c,l,f,p,h,v=[r||a],m=d.call(t,"type")?t.type:t,g=d.call(t,"namespace")?t.namespace.split("."):[];if(u=h=s=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!$e.test(m+O.event.triggered)&&(m.indexOf(".")>-1&&(m=(g=m.split(".")).shift(),g.sort()),l=m.indexOf(":")<0&&"on"+m,(t=t[O.expando]?t:new O.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:O.makeArray(e,[t]),p=O.event.special[m]||{},i||!p.trigger||!1!==p.trigger.apply(r,e))){if(!i&&!p.noBubble&&!y(r)){for(c=p.delegateType||m,$e.test(c+m)||(u=u.parentNode);u;u=u.parentNode)v.push(u),s=u;s===(r.ownerDocument||a)&&v.push(s.defaultView||s.parentWindow||n)}for(o=0;(u=v[o++])&&!t.isPropagationStopped();)h=u,t.type=o>1?c:p.bindType||m,(f=(Q.get(u,"events")||{})[t.type]&&Q.get(u,"handle"))&&f.apply(u,e),(f=l&&u[l])&&f.apply&&Y(u)&&(t.result=f.apply(u,e),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(v.pop(),e)||!Y(r)||l&&$(r[m])&&!y(r)&&((s=r[l])&&(r[l]=null),O.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,ye),r[m](),t.isPropagationStopped()&&h.removeEventListener(m,ye),O.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(t,e,n){var r=O.extend(new O.Event,n,{type:t,isSimulated:!0});O.event.trigger(r,null,e)}}),O.fn.extend({trigger:function(t,e){return this.each(function(){O.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return O.event.trigger(t,e,n,!0)}}),g.focusin||O.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){O.event.simulate(e,t.target,O.event.fix(t))};O.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=Q.access(r,e);i||r.addEventListener(t,n,!0),Q.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Q.access(r,e)-1;i?Q.access(r,e,i):(r.removeEventListener(t,n,!0),Q.remove(r,e))}}});var be=n.location,we=Date.now(),xe=/\?/;O.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||O.error("Invalid XML: "+t),e};var Oe=/\[\]$/,Ee=/\r?\n/g,Se=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function je(t,e,n,r){var i;if(Array.isArray(e))O.each(e,function(e,i){n||Oe.test(t)?r(t,i):je(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==x(e))r(t,e);else for(i in e)je(t+"["+i+"]",e[i],n,r)}O.param=function(t,e){var n,r=[],i=function(t,e){var n=$(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!O.isPlainObject(t))O.each(t,function(){i(this.name,this.value)});else for(n in t)je(n,t[n],e,i);return r.join("&")},O.fn.extend({serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=O.prop(this,"elements");return t?O.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!O(this).is(":disabled")&&Ce.test(this.nodeName)&&!Se.test(t)&&(this.checked||!pt.test(t))}).map(function(t,e){var n=O(this).val();return null==n?null:Array.isArray(n)?O.map(n,function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}}):{name:e.name,value:n.replace(Ee,"\r\n")}}).get()}});var ke=/%20/g,Te=/#.*$/,_e=/([?&])_=[^&]*/,Ae=/^(.*?):[ \t]*([^\r\n]*)$/gm,Re=/^(?:GET|HEAD)$/,Pe=/^\/\//,Ne={},De={},Me="*/".concat("*"),Ie=a.createElement("a");function Ve(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(V)||[];if($(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function qe(t,e,n,r){var i={},o=t===De;function a(u){var s;return i[u]=!0,O.each(t[u]||[],function(t,u){var c=u(e,n,r);return"string"!=typeof c||o||i[c]?o?!(s=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),s}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Le(t,e){var n,r,i=O.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&O.extend(!0,t,r),t}Ie.href=be.href,O.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Me,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":O.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Le(Le(t,O.ajaxSettings),e):Le(O.ajaxSettings,t)},ajaxPrefilter:Ve(Ne),ajaxTransport:Ve(De),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,u,s,c,l,f,p,h,d=O.ajaxSetup({},e),v=d.context||d,m=d.context&&(v.nodeType||v.jquery)?O(v):O.event,g=O.Deferred(),$=O.Callbacks("once memory"),y=d.statusCode||{},b={},w={},x="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(l){if(!u)for(u={};e=Ae.exec(o);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)E.always(t[E.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||x;return r&&r.abort(e),S(0,e),this}};if(g.promise(E),d.url=((t||d.url||be.href)+"").replace(Pe,be.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(V)||[""],null==d.crossDomain){c=a.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Ie.protocol+"//"+Ie.host!=c.protocol+"//"+c.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=O.param(d.data,d.traditional)),qe(Ne,d,e,E),l)return E;for(p in(f=O.event&&d.global)&&0==O.active++&&O.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Re.test(d.type),i=d.url.replace(Te,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(ke,"+")):(h=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(xe.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(_e,"$1"),h=(xe.test(i)?"&":"?")+"_="+we+++h),d.url=i+h),d.ifModified&&(O.lastModified[i]&&E.setRequestHeader("If-Modified-Since",O.lastModified[i]),O.etag[i]&&E.setRequestHeader("If-None-Match",O.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Me+"; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(v,E,d)||l))return E.abort();if(x="abort",$.add(d.complete),E.done(d.success),E.fail(d.error),r=qe(De,d,e,E)){if(E.readyState=1,f&&m.trigger("ajaxSend",[E,d]),l)return E;d.async&&d.timeout>0&&(s=n.setTimeout(function(){E.abort("timeout")},d.timeout));try{l=!1,r.send(b,S)}catch(t){if(l)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,a,u){var c,p,h,b,w,x=e;l||(l=!0,s&&n.clearTimeout(s),r=void 0,o=u||"",E.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(b=function(t,e,n){for(var r,i,o,a,u=t.contents,s=t.dataTypes;"*"===s[0];)s.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){s.unshift(i);break}if(s[0]in n)o=s[0];else{for(i in n){if(!s[0]||t.converters[i+" "+s[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==s[0]&&s.unshift(o),n[o]}(d,E,a)),b=function(t,e,n,r){var i,o,a,u,s,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!s&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),s=o,o=l.shift())if("*"===o)o=s;else if("*"!==s&&s!==o){if(!(a=c[s+" "+o]||c["* "+o]))for(i in c)if((u=i.split(" "))[1]===o&&(a=c[s+" "+u[0]]||c["* "+u[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=u[0],l.unshift(u[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+s+" to "+o}}}return{state:"success",data:e}}(d,b,E,c),c?(d.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(O.lastModified[i]=w),(w=E.getResponseHeader("etag"))&&(O.etag[i]=w)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=b.state,p=b.data,c=!(h=b.error))):(h=x,!t&&x||(x="error",t<0&&(t=0))),E.status=t,E.statusText=(e||x)+"",c?g.resolveWith(v,[p,x,E]):g.rejectWith(v,[E,x,h]),E.statusCode(y),y=void 0,f&&m.trigger(c?"ajaxSuccess":"ajaxError",[E,d,c?p:h]),$.fireWith(v,[E,x]),f&&(m.trigger("ajaxComplete",[E,d]),--O.active||O.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return O.get(t,e,n,"json")},getScript:function(t,e){return O.get(t,void 0,e,"script")}}),O.each(["get","post"],function(t,e){O[e]=function(t,n,r,i){return $(n)&&(i=i||r,r=n,n=void 0),O.ajax(O.extend({url:t,type:e,dataType:i,data:n,success:r},O.isPlainObject(t)&&t))}}),O._evalUrl=function(t){return O.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},O.fn.extend({wrapAll:function(t){var e;return this[0]&&($(t)&&(t=t.call(this[0])),e=O(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return $(t)?this.each(function(e){O(this).wrapInner(t.call(this,e))}):this.each(function(){var e=O(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=$(t);return this.each(function(n){O(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){O(this).replaceWith(this.childNodes)}),this}}),O.expr.pseudos.hidden=function(t){return!O.expr.pseudos.visible(t)},O.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},O.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},Ue=O.ajaxSettings.xhr();g.cors=!!Ue&&"withCredentials"in Ue,g.ajax=Ue=!!Ue,O.ajaxTransport(function(t){var e,r;if(g.cors||Ue&&!t.crossDomain)return{send:function(i,o){var a,u=t.xhr();if(u.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)u[a]=t.xhrFields[a];for(a in t.mimeType&&u.overrideMimeType&&u.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)u.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=r=u.onload=u.onerror=u.onabort=u.ontimeout=u.onreadystatechange=null,"abort"===t?u.abort():"error"===t?"number"!=typeof u.status?o(0,"error"):o(u.status,u.statusText):o(He[u.status]||u.status,u.statusText,"text"!==(u.responseType||"text")||"string"!=typeof u.responseText?{binary:u.response}:{text:u.responseText},u.getAllResponseHeaders()))}},u.onload=e(),r=u.onerror=u.ontimeout=e("error"),void 0!==u.onabort?u.onabort=r:u.onreadystatechange=function(){4===u.readyState&&n.setTimeout(function(){e&&r()})},e=e("abort");try{u.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),O.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return O.globalEval(t),t}}}),O.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),O.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(r,i){e=O("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}});var Fe=[],Be=/(=)\?(?=&|$)|\?\?/;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Fe.pop()||O.expando+"_"+we++;return this[t]=!0,t}}),O.ajaxPrefilter("json jsonp",function(t,e,r){var i,o,a,u=!1!==t.jsonp&&(Be.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Be.test(t.data)&&"data");if(u||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=$(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(Be,"$1"+i):!1!==t.jsonp&&(t.url+=(xe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||O.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?O(n).removeProp(i):n[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Fe.push(i)),a&&$(o)&&o(a[0]),a=o=void 0}),"script"}),g.createHTMLDocument=function(){var t=a.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),O.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((r=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(r)):e=a),i=A.exec(t),o=!n&&[],i?[e.createElement(i[1])]:(i=yt([t],e,o),o&&o.length&&O(o).remove(),O.merge([],i.childNodes)));var r,i,o},O.fn.load=function(t,e,n){var r,i,o,a=this,u=t.indexOf(" ");return u>-1&&(r=de(t.slice(u)),t=t.slice(0,u)),$(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&O.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?O("<div>").append(O.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},O.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){O.fn[e]=function(t){return this.on(e,t)}}),O.expr.pseudos.animated=function(t){return O.grep(O.timers,function(e){return t===e.elem}).length},O.offset={setOffset:function(t,e,n){var r,i,o,a,u,s,c=O.css(t,"position"),l=O(t),f={};"static"===c&&(t.style.position="relative"),u=l.offset(),o=O.css(t,"top"),s=O.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+s).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(s)||0),$(e)&&(e=e.call(t,n,O.extend({},u))),null!=e.top&&(f.top=e.top-u.top+a),null!=e.left&&(f.left=e.left-u.left+i),"using"in e?e.using.call(t,f):l.css(f)}},O.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){O.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===O.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===O.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=O(t).offset()).top+=O.css(t,"borderTopWidth",!0),i.left+=O.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-O.css(r,"marginTop",!0),left:e.left-i.left-O.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===O.css(t,"position");)t=t.offsetParent;return t||bt})}}),O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;O.fn[t]=function(r){return W(this,function(t,r,i){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),O.each(["top","left"],function(t,e){O.cssHooks[e]=Ft(g.pixelPosition,function(t,n){if(n)return n=Ut(t,e),qt.test(n)?O(t).position()[e]+"px":n})}),O.each({Height:"height",Width:"width"},function(t,e){O.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){O.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),u=n||(!0===i||!0===o?"margin":"border");return W(this,function(e,n,i){var o;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?O.css(e,n,u):O.style(e,n,i,u)},e,a?i:void 0,a)}})}),O.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){O.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),O.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),O.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),O.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),$(t))return r=s.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(s.call(arguments)))}).guid=t.guid=t.guid||O.guid++,i},O.holdReady=function(t){t?O.readyWait++:O.ready(!0)},O.isArray=Array.isArray,O.parseJSON=JSON.parse,O.nodeName=_,O.isFunction=$,O.isWindow=y,O.camelCase=K,O.type=x,O.now=Date.now,O.isNumeric=function(t){var e=O.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(r=function(){return O}.apply(e,[]))||(t.exports=r);var We=n.jQuery,ze=n.$;return O.noConflict=function(t){return n.$===O&&(n.$=ze),t&&n.jQuery===O&&(n.jQuery=We),O},i||(n.jQuery=n.$=O),O})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$scope=e,e.accountName="Dodol"}return r(t,null,[{key:"init",value:function(){return"DOOD;"}}]),t}();e.default=i},function(t,e,n){"use strict";n.r(e);var r,i=n(0),o=n(3),a=function(){function t(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return t.is=function(t){return!!/[!,*]+/.exec(t)},t.fromString=function(e){return t.is(e)?new t(e):null},t.prototype.matches=function(t){return this.regexp.test("."+t)},t}(),u=n(2),s=n(1),c=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e,this._evictListeners=[],this.onEvict=Object(i.K)(this._evictListeners)}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&this.evict(),t},t.prototype.evict=function(){var t=this._items.shift();return this._evictListeners.forEach(function(e){return e(t)}),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();!function(t){t[t.SUPERSEDED=2]="SUPERSEDED",t[t.ABORTED=3]="ABORTED",t[t.INVALID=4]="INVALID",t[t.IGNORED=5]="IGNORED",t[t.ERROR=6]="ERROR"}(r||(r={}));var l=0,f=function(){function t(t,e,n){this.$id=l++,this.type=t,this.message=e,this.detail=n}return t.isRejectionPromise=function(e){return e&&"function"==typeof e.then&&Object(u.h)(t)(e._transitionRejection)},t.superseded=function(e,n){var i=new t(r.SUPERSEDED,"The transition has been superseded by a different transition",e);return n&&n.redirected&&(i.redirected=!0),i},t.redirected=function(e){return t.superseded(e,{redirected:!0})},t.invalid=function(e){return new t(r.INVALID,"This transition is invalid",e)},t.ignored=function(e){return new t(r.IGNORED,"The transition was ignored",e)},t.aborted=function(e){return new t(r.ABORTED,"The transition has been aborted",e)},t.errored=function(e){return new t(r.ERROR,"The transition errored",e)},t.normalize=function(e){return Object(u.h)(t)(e)?e:t.errored(e)},t.prototype.toString=function(){var t=function(t){return t&&t.toString!==Object.prototype.toString?t.toString():y(t)}(this.detail);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+t+")"},t.prototype.toPromise=function(){return Object(i.r)(Object(i.O)(this),{_transitionRejection:this})},t}();function p(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function h(t,e){for(;e.length<t;)e+=" ";return e}function d(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function v(t){var e=m(t),n=e.match(/^(function [^ ]+\([^)]*\))/),r=n?n[1]:e,i=t.name||"";return i&&r.match(/function \(/)?"function "+i+r.substr(9):r}function m(t){var e=Object(s.a)(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}var g=f.isRejectionPromise,$=Object(u.l)([[s.m,Object(u.p)("undefined")],[s.f,Object(u.p)("null")],[s.j,Object(u.p)("[Promise]")],[g,function(t){return t._transitionRejection.toString()}],[function(t){return Object(s.i)(t)&&!Object(s.a)(t)&&t.constructor!==Object&&Object(s.d)(t.toString)},function(t){return t.toString()}],[s.e,v],[Object(u.p)(!0),i.y]]);function y(t){var e=[];function n(t){if(Object(s.i)(t)){if(-1!==e.indexOf(t))return"[circular ref]";e.push(t)}return $(t)}return Object(s.m)(t)?n(t):JSON.stringify(t,function(t,e){return n(e)}).replace(/\\"/g,'"')}var b=function(t){return function(e){if(!e)return["",""];var n=e.indexOf(t);return-1===n?[e,""]:[e.substr(0,n),e.substr(n+1)]}},w=new RegExp("^(?:[a-z]+:)?//[^/]+/"),x=function(t){return t.replace(/\/[^/]*$/,"")},O=b("#"),E=b("?"),S=b("="),C=function(t){return t?t.replace(/^#/,""):""};function j(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(i.y)}}function k(t,e){return Object(s.l)(Object(i.P)(t))&&Object(s.l)(e)?t.slice(0,-1).concat(Object(i.P)(t)+e):Object(i.J)(t,e)}function T(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function _(t){return Object(s.h)(t)?A[t]:A[A[t]]}var A,R=Function.prototype.bind.call(console.log,console),P=Object(s.d)(console.table)?console.table.bind(console):R.bind(console);!function(t){t[t.RESOLVE=0]="RESOLVE",t[t.TRANSITION=1]="TRANSITION",t[t.HOOK=2]="HOOK",t[t.UIVIEW=3]="UIVIEW",t[t.VIEWCONFIG=4]="VIEWCONFIG"}(A||(A={}));var N=Object(u.k)("$id"),D=Object(u.k)("router.$id"),M=function(t){return"Transition #"+N(t)+"-"+D(t)},I=function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(t,e){var n=this;e.length||(e=Object.keys(A).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(t){return A[t]})),e.map(_).forEach(function(e){return n._enabled[e]=t})},t.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},t.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},t.prototype.enabled=function(t){return!!this._enabled[_(t)]},t.prototype.traceTransitionStart=function(t){this.enabled(A.TRANSITION)&&console.log(M(t)+": Started  -> "+y(t))},t.prototype.traceTransitionIgnored=function(t){this.enabled(A.TRANSITION)&&console.log(M(t)+": Ignored  <> "+y(t))},t.prototype.traceHookInvocation=function(t,e,n){if(this.enabled(A.HOOK)){var r=Object(u.k)("traceData.hookType")(n)||"internal",i=Object(u.k)("traceData.context.state.name")(n)||Object(u.k)("traceData.context")(n)||"unknown",o=v(t.registeredHook.callback);console.log(M(e)+":   Hook -> "+r+" context: "+i+", "+p(200,o))}},t.prototype.traceHookResult=function(t,e,n){this.enabled(A.HOOK)&&console.log(M(e)+":   <- Hook returned: "+p(200,y(t)))},t.prototype.traceResolvePath=function(t,e,n){this.enabled(A.RESOLVE)&&console.log(M(n)+":         Resolving "+t+" ("+e+")")},t.prototype.traceResolvableResolved=function(t,e){this.enabled(A.RESOLVE)&&console.log(M(e)+":               <- Resolved  "+t+" to: "+p(200,y(t.data)))},t.prototype.traceError=function(t,e){this.enabled(A.TRANSITION)&&console.log(M(e)+": <- Rejected "+y(e)+", reason: "+t)},t.prototype.traceSuccess=function(t,e){this.enabled(A.TRANSITION)&&console.log(M(e)+": <- Success  "+y(e)+", final state: "+t.name)},t.prototype.traceUIViewEvent=function(t,e,n){void 0===n&&(n=""),this.enabled(A.UIVIEW)&&console.log("ui-view: "+h(30,t)+" "+T(e)+n)},t.prototype.traceUIViewConfigUpdated=function(t,e){this.enabled(A.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+e+"'")},t.prototype.traceUIViewFill=function(t,e){this.enabled(A.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+p(200,e))},t.prototype.traceViewSync=function(t){if(this.enabled(A.VIEWCONFIG)){var e="uiview component fqn",n=t.map(function(t){var n,r=t.uiView,i=t.viewConfig,o=r&&r.fqn,a=i&&i.viewDecl.$context.name+": ("+i.viewDecl.$name+")";return(n={})[e]=o,n["view config state (view name)"]=a,n}).sort(function(t,n){return(t[e]||"").localeCompare(n[e]||"")});P(n)}},t.prototype.traceViewServiceEvent=function(t,e){this.enabled(A.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+function(t){var e=t.viewDecl,n=e.$context.name||"(root)";return"[View#"+t.$id+" from '"+n+"' state]: target ui-view: '"+e.$uiViewName+"@"+e.$uiViewContextAnchor+"'"}(e))},t.prototype.traceViewServiceUIViewEvent=function(t,e){this.enabled(A.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+T(e))},t}(),V=new I,q=function(){function t(t){this.pattern=/.*/,this.inherit=!0,Object(i.r)(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new function(t,e){var n=this;function r(t){return Object(s.a)(t)?t:Object(s.c)(t)?[t]:[]}function o(t,n){return function(o){if(Object(s.a)(o)&&0===o.length)return o;var a=r(o),u=Object(i.B)(a,t);return!0===n?0===Object(i.s)(u,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===e?t[0]:t;default:return t}}(u)}}function a(t){return function(e,n){var i=r(e),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!t(i[a],o[a]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach(function(e){var r=t[e].bind(t),i="equals"===e?a:o;n[e]=i(r)}),Object(i.r)(this,{dynamic:t.dynamic,name:t.name,pattern:t.pattern,inherit:t.inherit,raw:t.raw,is:o(t.is.bind(t),!0),$arrayMode:e})}(this,t)},t}();var L,H=Object.prototype.hasOwnProperty,U=function(t){return 0===["value","type","squash","array","dynamic"].filter(H.bind(t||{})).length};function F(t,e,n){var r=!1===n.reloadOnSearch&&e===L.SEARCH||void 0,o=[n.dynamic,r].find(s.c),a=Object(s.c)(o)?{dynamic:o}:{},u=function(t){function e(){return t.value}t=U(t)?{value:t}:t,e.__cacheable=!0;var n=Object(s.e)(t.value)?t.value:e;return Object(i.r)(t,{$$fn:n})}(n&&n.params&&n.params[t]);return Object(i.r)(a,u)}!function(t){t[t.PATH=0]="PATH",t[t.SEARCH=1]="SEARCH",t[t.CONFIG=2]="CONFIG"}(L||(L={}));var B=function(){function t(t,e,n,r,o){var a=F(t,n,o);e=function(t,e,n,r,i){if(t.type&&e&&"string"!==e.name)throw new Error("Param '"+r+"' has two type configurations.");if(t.type&&e&&"string"===e.name&&i.type(t.type))return i.type(t.type);if(e)return e;if(!t.type){var o=n===L.CONFIG?"any":n===L.PATH?"path":n===L.SEARCH?"query":"string";return i.type(o)}return t.type instanceof q?t.type:i.type(t.type)}(a,e,n,t,r.paramTypes);var c=function(){var e={array:n===L.SEARCH&&"auto"},r=t.match(/\[\]$/)?{array:!0}:{};return Object(i.r)(e,r,a).array}();e=c?e.$asArray(c,n===L.SEARCH):e;var l=void 0!==a.value||n===L.SEARCH,f=Object(s.c)(a.dynamic)?!!a.dynamic:!!e.dynamic,p=Object(s.c)(a.raw)?!!a.raw:!!e.raw,h=function(t,e,n){var r=t.squash;if(!e||!1===r)return!1;if(!Object(s.c)(r)||null==r)return n;if(!0===r||Object(s.l)(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}(a,l,r.defaultSquashPolicy()),d=function(t,e,n,r){var o=[{from:"",to:n||e?void 0:""},{from:null,to:n||e?void 0:""}],a=Object(s.a)(t.replace)?t.replace:[];Object(s.l)(r)&&a.push({from:r,to:void 0});var c=Object(i.B)(a,Object(u.n)("from"));return Object(i.s)(o,function(t){return-1===c.indexOf(t.from)}).concat(a)}(a,c,l,h),v=Object(s.c)(a.inherit)?!!a.inherit:!!e.inherit;Object(i.r)(this,{id:t,type:e,location:n,isOptional:l,dynamic:f,raw:p,squash:h,replace:d,inherit:v,array:c,config:a})}return t.values=function(t,e){void 0===e&&(e={});for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];n[o.id]=o.value(e[o.id])}return n},t.changed=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t.filter(function(t){return!t.type.equals(e[t.id],n[t.id])})},t.equals=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),0===t.changed(e,n,r).length},t.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(i.e,!0)},t.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},t.prototype.value=function(t){var e=this;return t=function(t){for(var n=0,r=e.replace;n<r.length;n++){var i=r[n];if(i.from===t)return i.to}return t}(t),Object(s.m)(t)?function(){if(e._defaultValueCache)return e._defaultValueCache.defaultValue;if(!o.b.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=o.b.$injector.invoke(e.config.$$fn);if(null!==t&&void 0!==t&&!e.type.is(t))throw new Error("Default value ("+t+") for parameter '"+e.id+"' is not an instance of ParamType ("+e.type.name+")");return e.config.$$fn.__cacheable&&(e._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},t.prototype.isSearch=function(){return this.location===L.SEARCH},t.prototype.validates=function(t){if((Object(s.m)(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var n=this.type.encode(e);return!(Object(s.l)(n)&&!this.type.pattern.exec(n))},t.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},t}(),W=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=Object(i.H)(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=Object(i.A)(Object(i.B)(this.defaultTypes,function(t,e){return new q(Object(i.r)({name:e},t))}),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,n){if(!Object(s.c)(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new q(Object(i.r)({name:t},e)),n&&(this.typeQueue.push({name:t,def:n}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");Object(i.r)(this.types[t.name],o.b.$injector.invoke(t.def))}},t}();!function(){var t=function(t){var e=function(t){return null!=t?t.toString():t},n={encode:e,decode:e,is:Object(u.h)(String),pattern:/.*/,equals:function(t,e){return t==e}};return Object(i.r)({},n,t)};Object(i.r)(W.prototype,{string:t({}),path:t({pattern:/[^/]*/}),query:t({}),hash:t({inherit:!1}),int:t({decode:function(t){return parseInt(t,10)},is:function(t){return!Object(s.g)(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:t({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:Object(u.h)(Boolean),pattern:/0|1/}),date:t({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return["getFullYear","getMonth","getDate"].reduce(function(n,r){return n&&t[r]()===e[r]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:t({encode:i.Q,decode:i.x,is:Object(u.h)(Object),equals:i.q,pattern:/[^/]*/}),any:t({encode:i.y,decode:i.y,is:function(){return!0},equals:i.q})})}();var z=function(){function t(t){void 0===t&&(t={}),Object(i.r)(this,t)}return t.prototype.$inherit=function(t,e,n){var r,o=Object(i.f)(e,n),a={},u=[];for(var s in o)if(o[s]&&o[s].params&&(r=Object.keys(o[s].params)).length)for(var c in r)u.indexOf(r[c])>=0||(u.push(r[c]),a[r[c]]=this[r[c]]);return Object(i.r)({},a,t)},t}(),G=function(){function t(e){if(e instanceof t){var n=e;this.state=n.state,this.paramSchema=n.paramSchema.slice(),this.paramValues=Object(i.r)({},n.paramValues),this.resolvables=n.resolvables.slice(),this.views=n.views&&n.views.slice()}else{var r=e;this.state=r,this.paramSchema=r.parameters({inherit:!1}),this.paramValues={},this.resolvables=r.resolvables.map(function(t){return t.clone()})}}return t.prototype.clone=function(){return new t(this)},t.prototype.applyRawParams=function(t){return this.paramValues=this.paramSchema.reduce(function(e,n){return Object(i.h)(e,function(e){return[e.id,e.value(t[e.id])]}(n))},{}),this},t.prototype.parameter=function(t){return Object(i.t)(this.paramSchema,Object(u.o)("id",t))},t.prototype.equals=function(t,e){var n=this.diff(t,e);return n&&0===n.length},t.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var n=e?e(this):this.paramSchema;return B.changed(n,this.paramValues,t.paramValues)},t.clone=function(t){return t.clone()},t}(),J=function(){function t(t,e,n,r){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=Object(i.r)({},n||{}),this._options=Object(i.r)({},r||{}),this._definition=t.matcher.find(e,this._options.relative)}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+y(this.params())},t.prototype.withState=function(e){return new t(this._stateRegistry,e,this._params,this._options)},t.prototype.withParams=function(e,n){void 0===n&&(n=!1);var r=n?e:Object(i.r)({},this._params,e);return new t(this._stateRegistry,this._identifier,r,this._options)},t.prototype.withOptions=function(e,n){void 0===n&&(n=!1);var r=n?e:Object(i.r)({},this._options,e);return new t(this._stateRegistry,this._identifier,this._params,r)},t.isDef=function(t){return t&&t.state&&(Object(s.l)(t.state)||Object(s.l)(t.state.name))},t}(),K=function(){function t(){}return t.makeTargetState=function(t,e){var n=Object(i.P)(e).state;return new J(t,n,e.map(Object(u.n)("paramValues")).reduce(i.D,{}),{})},t.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new G(t).applyRawParams(e)})},t.buildToPath=function(e,n){var r=t.buildPath(n);return n.options().inherit?t.inheritParams(e,r,Object.keys(n.params())):r},t.applyViewConfigs=function(e,n,r){n.filter(function(t){return Object(i.z)(r,t.state)}).forEach(function(r){var o=Object(i.U)(r.state.views||{}),a=t.subPath(n,function(t){return t===r}),u=o.map(function(t){return e.createViewConfig(a,t)});r.views=u.reduce(i.T,[])})},t.inheritParams=function(t,e,n){void 0===n&&(n=[]);var r=t.map(function(t){return t.paramSchema}).reduce(i.T,[]).filter(function(t){return!t.inherit}).map(Object(u.n)("id"));return e.map(function(e){var o=Object(i.r)({},e&&e.paramValues),a=Object(i.H)(o,n);o=Object(i.F)(o,n);var s=Object(i.F)(function(t,e){var n=Object(i.t)(t,Object(u.o)("state",e));return Object(i.r)({},n&&n.paramValues)}(t,e.state)||{},r),c=Object(i.r)(o,s,a);return new G(e.state).applyRawParams(c)})},t.treeChanges=function(e,n,r){for(var i,o,a,u,s=Math.min(e.length,n.length),c=0,l=function(e,n){return e.equals(n,t.nonDynamicParams)};c<s&&e[c].state!==r&&l(e[c],n[c]);)c++;o=(i=e).slice(0,c),a=i.slice(c);var f=o.map(function(t,e){var r=t.clone();return r.paramValues=n[e].paramValues,r});return u=n.slice(c),{from:i,to:f.concat(u),retained:o,retainedWithToParams:f,exiting:a,entering:u}},t.matching=function(t,e,n){var r=!1;return Object(i.i)(t,e).reduce(function(t,e){var i=e[0],o=e[1];return(r=r||!i.equals(o,n))?t:t.concat(i)},[])},t.equals=function(e,n,r){return e.length===n.length&&t.matching(e,n,r).length===e.length},t.subPath=function(t,e){var n=Object(i.t)(t,e),r=t.indexOf(n);return-1===r?void 0:t.slice(0,r+1)},t.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},t.paramValues=function(t){return t.reduce(function(t,e){return Object(i.r)(t,e.paramValues)},{})},t}(),Y={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},X={when:"LAZY",async:"WAIT"},Q=function(){function t(e,n,r,a,u){if(this.resolved=!1,this.promise=void 0,e instanceof t)Object(i.r)(this,e);else if(Object(s.d)(n)){if(Object(s.g)(e))throw new Error("new Resolvable(): token argument is required");if(!Object(s.d)(n))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=e,this.policy=a,this.resolveFn=n,this.deps=r||[],this.data=u,this.resolved=void 0!==u,this.promise=this.resolved?o.b.$q.when(this.data):void 0}else if(Object(s.i)(e)&&e.token&&(e.hasOwnProperty("resolveFn")||e.hasOwnProperty("data"))){var c=e;return new t(c.token,c.resolveFn,c.deps,c.policy,c.data)}}return t.prototype.getPolicy=function(t){var e=this.policy||{},n=t&&t.resolvePolicy||{};return{when:e.when||n.when||X.when,async:e.async||n.async||X.async}},t.prototype.resolve=function(t,e){var n=this,r=o.b.$q,a=t.findNode(this),u=a&&a.state,s="RXWAIT"===this.getPolicy(u).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:i.y;return this.promise=r.when().then(function(){return r.all(t.getDependencies(n).map(function(n){return n.get(t,e)}))}).then(function(t){return n.resolveFn.apply(null,t)}).then(s).then(function(t){return n.data=t,n.resolved=!0,n.resolveFn=null,V.traceResolvableResolved(n,e),n.data})},t.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},t.prototype.toString=function(){return"Resolvable(token: "+y(this.token)+", requires: ["+this.deps.map(y)+"])"},t.prototype.clone=function(){return new t(this)},t.fromData=function(e,n){return new t(e,function(){return n},null,null,n)},t}(),Z=Y.when,tt=[Z.EAGER,Z.LAZY],et=[Z.EAGER],nt="Native Injector",rt=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(i.R,[])},t.prototype.getResolvable=function(t){var e=this._path.map(function(t){return t.resolvables}).reduce(i.T,[]).filter(function(e){return e.token===t});return Object(i.P)(e)},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(K.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var n=Object(i.t)(this._path,Object(u.o)("state",e)),r=t.map(function(t){return t.token});n.resolvables=n.resolvables.filter(function(t){return-1===r.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,e){var n=this;void 0===t&&(t="LAZY");var r=(Object(i.z)(tt,t)?t:"LAZY")===Y.when.EAGER?et:tt;V.traceResolvePath(this._path,t,e);var a=function(t,e){return function(r){return Object(i.z)(t,n.getPolicy(r)[e])}},s=this._path.reduce(function(t,i){var o=i.resolvables.filter(a(r,"when")),s=o.filter(a(["NOWAIT"],"async")),c=o.filter(Object(u.i)(a(["NOWAIT"],"async"))),l=n.subContext(i.state),f=function(t){return t.get(l,e).then(function(e){return{token:t.token,value:e}})};return s.forEach(f),t.concat(c.map(f))},[]);return o.b.$q.all(s)},t.prototype.injector=function(){return this._injector||(this._injector=new it(this))},t.prototype.findNode=function(t){return Object(i.t)(this._path,function(e){return Object(i.z)(e.resolvables,t)})},t.prototype.getDependencies=function(t){var e=this,n=this.findNode(t),r=(K.subPath(this._path,function(t){return t===n})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(e){return e!==t});return t.deps.map(function(t){var n=r.filter(function(e){return e.token===t});if(n.length)return Object(i.P)(n);var o=e.injector().getNative(t);if(Object(s.m)(o))throw new Error("Could not find Dependency Injection token: "+y(t));return new Q(t,function(){return o},[],o)})},t}(),it=function(){function t(t){this.context=t,this.native=this.get(nt)||o.b.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+y(e.token));return e.data}return this.getNative(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):o.b.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}();function ot(t){return t.name}function at(t){return t.self.$$state=function(){return t},t.self}function ut(t){return t.parent&&t.parent.data&&(t.data=t.self.data=Object(i.A)(t.parent.data,t.data)),t.data}var st=function(t,e){return function(n){var r=n.self;r&&r.url&&r.name&&r.name.match(/\.\*\*$/)&&(r.url+="{remainder:any}");var i=n.parent,o=function(t){if(!Object(s.l)(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(r.url),a=o?t.compile(o.val,{state:r}):r.url;if(!a)return null;if(!t.isMatcher(a))throw new Error("Invalid url '"+a+"' in state '"+n+"'");return o&&o.root?a:(i&&i.navigable||e()).url.append(a)}},ct=function(t){return function(e){return!t(e)&&e.url?e:e.parent?e.parent.navigable:null}},lt=function(t){return function(e){var n=e.url&&e.url.parameters({inherit:!1})||[],r=Object(i.U)(Object(i.C)(Object(i.F)(e.params||{},n.map(Object(u.n)("id"))),function(n,r){return t.fromConfig(r,null,e.self)}));return n.concat(r).map(function(t){return[t.id,t]}).reduce(i.h,{})}};function ft(t){return t.parent?t.parent.path.concat(t):[t]}function pt(t){var e=t.parent?Object(i.r)({},t.parent.includes):{};return e[t.name]=!0,e}function ht(t){var e=function(t){return t.provide||t.token},n=Object(u.l)([[Object(u.n)("resolveFn"),function(t){return new Q(e(t),t.resolveFn,t.deps,t.policy)}],[Object(u.n)("useFactory"),function(t){return new Q(e(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[Object(u.n)("useClass"),function(t){return new Q(e(t),function(){return new t.useClass},[],t.policy)}],[Object(u.n)("useValue"),function(t){return new Q(e(t),function(){return t.useValue},[],t.policy,t.useValue)}],[Object(u.n)("useExisting"),function(t){return new Q(e(t),i.y,[t.useExisting],t.policy)}]]),r=Object(u.l)([[Object(u.m)(Object(u.n)("val"),s.l),function(t){return new Q(t.token,i.y,[t.val],t.policy)}],[Object(u.m)(Object(u.n)("val"),s.a),function(t){return new Q(t.token,Object(i.P)(t.val),t.val.slice(0,-1),t.policy)}],[Object(u.m)(Object(u.n)("val"),s.d),function(t){return new Q(t.token,t.val,function(t){var e=o.b.$injector;return t.$inject||e&&e.annotate(t,e.strictDi)||"deferred"}(t.val),t.policy)}]]),a=Object(u.l)([[Object(u.h)(Q),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},n],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},n],[function(t){return!!(t&&t.val&&(Object(s.l)(t.val)||Object(s.a)(t.val)||Object(s.d)(t.val)))},r],[Object(u.p)(!0),function(t){throw new Error("Invalid resolve value: "+y(t))}]]),c=t.resolve;return(Object(s.a)(c)?c:function(t,e){return Object.keys(t||{}).map(function(n){return{token:n,val:t[n],deps:void 0,policy:e[n]}})}(c,t.resolvePolicy||{})).map(a)}var dt,vt,mt=function(){function t(t,e){this.matcher=t;var n=this,r=function(){return t.find("")},i=function(t){return""===t.name};this.builders={name:[ot],self:[at],parent:[function(e){return i(e)?null:t.find(n.parentName(e))||r()}],data:[ut],url:[st(e,r)],navigable:[ct(i)],params:[lt(e.paramFactory)],views:[],path:[ft],includes:[pt],resolvables:[ht]}}return t.prototype.builder=function(t,e){var n=this.builders,r=n[t]||[];return Object(s.l)(t)&&!Object(s.c)(e)?r.length>1?r:r[0]:Object(s.l)(t)&&Object(s.d)(e)?(n[t]=r,n[t].push(e),function(){return n[t].splice(n[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this.matcher,n=this.builders,r=this.parentName(t);if(r&&!e.find(r,void 0,!1))return null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o].reduce(function(t,e){return function(n){return e(n,t)}},i.E);t[o]=a(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",n=e.split(".");if("**"===n.pop()&&n.pop(),n.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return n.join(".")}return t.parent?Object(s.l)(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var n=Object(s.l)(t.parent)?t.parent:t.parent.name;return n?n+"."+e:e},t}(),gt=function(){function t(e){return t.create(e||{})}return t.create=function(e){e=t.isStateClass(e)?new e:e;var n=Object(i.A)(Object(i.A)(e,t.prototype));return e.$$state=function(){return n},n.self=e,n.__stateObjectCache={nameGlob:a.fromString(n.name)},n},t.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},t.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},t.prototype.root=function(){return this.parent&&this.parent.root()||this},t.prototype.parameters=function(t){return((t=Object(i.o)(t,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(Object(i.U)(this.params)).filter(function(e){return!t.matchingKeys||t.matchingKeys.hasOwnProperty(e.id)})},t.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||Object(i.t)(Object(i.U)(this.params),Object(u.o)("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},t.prototype.toString=function(){return this.fqn()},t.isStateClass=function(t){return Object(s.d)(t)&&!0===t.__uiRouterState},t.isState=function(t){return Object(s.i)(t.__stateObjectCache)},t}(),$t=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,n){if(void 0===n&&(n=!0),t||""===t){var r=Object(s.l)(t),o=r?t:t.name;this.isRelative(o)&&(o=this.resolvePath(o,e));var a=this._states[o];if(a&&(r||!(r||a!==t&&a.self!==t)))return a;if(r&&n){var u=Object(i.U)(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(o)});return u.length>1&&console.log("stateMatcher.find: Found multiple matches for "+o+" using glob: ",u.map(function(t){return t.name})),u[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var n=this.find(e),r=t.split("."),i=r.length,o=0,a=n;o<i;o++)if(""!==r[o]||0!==o){if("^"!==r[o])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+n.name+"'");a=a.parent}else a=n;var u=r.slice(o).join(".");return a.name+(a.name&&u?".":"")+u},t}(),yt=function(){function t(t,e,n,r,i){this.$registry=t,this.$urlRouter=e,this.states=n,this.builder=r,this.listeners=i,this.queue=[],this.matcher=t.matcher}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,n=gt.create(t),r=n.name;if(!Object(s.l)(r))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(r)||Object(i.z)(e.map(Object(u.n)("name")),r))throw new Error("State '"+r+"' is already defined");return e.push(n),this.flush(),n},t.prototype.flush=function(){for(var t=this,e=this.queue,n=this.states,r=this.builder,i=[],o=[],a={},u=function(e){return t.states.hasOwnProperty(e)&&t.states[e]},s=function(){i.length&&t.listeners.forEach(function(t){return t("registered",i.map(function(t){return t.self}))})};e.length>0;){var c=e.shift(),l=c.name,f=r.build(c),p=o.indexOf(c);if(f){var h=u(l);if(h&&h.name===l)throw new Error("State '"+l+"' is already defined");var d=u(l+".**");d&&this.$registry.deregister(d),n[l]=c,this.attachRoute(c),p>=0&&o.splice(p,1),i.push(c)}else{var v=a[l];if(a[l]=e.length,p>=0&&v===e.length)return e.push(c),s(),n;p<0&&o.push(c),e.push(c)}}return s(),n},t.prototype.attachRoute=function(t){!t.abstract&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},t}(),bt=function(){function t(t){this._router=t,this.states={},this.listeners=[],this.matcher=new $t(this.states),this.builder=new mt(this.matcher,t.urlMatcherFactory),this.stateQueue=new yt(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var t=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(e){return t.get(e)&&t.deregister(e)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){Object(i.L)(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var e=this,n=this.get().map(function(t){return t.$$state()}),r=function(t){var e=n.filter(function(e){return-1!==t.indexOf(e.parent)});return 0===e.length?e:e.concat(r(e))},i=r([t]),o=[t].concat(i).reverse();return o.forEach(function(t){var n=e._router.urlRouter;n.rules().filter(Object(u.o)("state",t)).forEach(n.removeRule.bind(n)),delete e.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var n=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",n.map(function(t){return t.self}))}),n},t.prototype.get=function(t,e){var n=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return n.states[t].self});var r=this.matcher.find(t,e);return r&&r.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}();!function(t){t[t.CREATE=0]="CREATE",t[t.BEFORE=1]="BEFORE",t[t.RUN=2]="RUN",t[t.SUCCESS=3]="SUCCESS",t[t.ERROR=4]="ERROR"}(dt||(dt={})),function(t){t[t.TRANSITION=0]="TRANSITION",t[t.STATE=1]="STATE"}(vt||(vt={}));var wt={current:i.E,transition:null,traceData:{},bind:null},xt=function(){function t(t,e,n,r){var o=this;this.transition=t,this.stateContext=e,this.registeredHook=n,this.options=r,this.isSuperseded=function(){return o.type.hookPhase===dt.RUN&&!o.options.transition.isActive()},this.options=Object(i.o)(r,wt),this.type=n.eventType}return t.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||o.b.$q.when())},t.invokeHooks=function(e,n){for(var r=0;r<e.length;r++){var i=e[r].invokeHook();if(Object(s.j)(i)){var o=e.slice(r+1);return t.chain(o,i).then(n)}}return n()},t.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},t.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},t.prototype.invokeHook=function(){var t=this,e=this.registeredHook;if(!e._deregistered){var n=this.getNotCurrentRejection();if(n)return n;var r=this.options;V.traceHookInvocation(this,this.transition,r);var i=function(n){return e.eventType.getErrorHandler(t)(n)},o=function(n){return e.eventType.getResultHandler(t)(n)};try{var a=e.callback.call(r.bind,t.transition,t.stateContext);return!this.type.synchronous&&Object(s.j)(a)?a.catch(function(t){return f.normalize(t).toPromise()}).then(o,i):o(a)}catch(t){return i(f.normalize(t))}finally{e.invokeLimit&&++e.invokeCount>=e.invokeLimit&&e.deregister()}}},t.prototype.handleHookResult=function(t){var e=this,n=this.getNotCurrentRejection();return n||(Object(s.j)(t)?t.then(function(t){return e.handleHookResult(t)}):(V.traceHookResult(t,this.transition,this.options),!1===t?f.aborted("Hook aborted transition").toPromise():Object(u.h)(J)(t)?f.redirected(t).toPromise():void 0))},t.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?f.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?f.aborted().toPromise():this.isSuperseded()?f.superseded(this.options.current()).toPromise():void 0},t.prototype.toString=function(){var t=this.options,e=this.registeredHook;return(Object(u.k)("traceData.hookType")(t)||"internal")+" context: "+(Object(u.k)("traceData.context.state.name")(t)||Object(u.k)("traceData.context")(t)||"unknown")+", "+p(200,m(e.callback))},t.HANDLE_RESULT=function(t){return function(e){return t.handleHookResult(e)}},t.LOG_REJECTED_RESULT=function(t){return function(e){Object(s.j)(e)&&e.catch(function(e){return t.logError(f.normalize(e))})}},t.LOG_ERROR=function(t){return function(e){return t.logError(e)}},t.REJECT_ERROR=function(t){return function(t){return Object(i.O)(t)}},t.THROW_ERROR=function(t){return function(t){throw t}},t}();function Ot(t,e){var n=Object(s.l)(e)?[e]:e;return!!(Object(s.d)(n)?n:function(t){for(var e=n,r=0;r<e.length;r++){var i=new a(e[r]);if(i&&i.matches(t.name)||!i&&e[r]===t.name)return!0}return!1})(t)}var Et=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=n,this.matchCriteria=r,this.removeHookFromRegistry=i,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}return t.prototype._matchingNodes=function(t,e){if(!0===e)return t;var n=t.filter(function(t){return Ot(t.state,e)});return n.length?n:null},t.prototype._getDefaultMatchCriteria=function(){return Object(i.C)(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},t.prototype._getMatchingNodes=function(t){var e=this,n=Object(i.r)(this._getDefaultMatchCriteria(),this.matchCriteria);return Object(i.U)(this.tranSvc._pluginapi._getPathTypes()).reduce(function(r,o){var a=o.scope===vt.STATE,u=t[o.name]||[],s=a?u:[Object(i.P)(u)];return r[o.name]=e._matchingNodes(s,n[o.name]),r},{})},t.prototype.matches=function(t){var e=this._getMatchingNodes(t);return Object(i.U)(e).every(i.y)?e:null},t.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},t}();function St(t,e,n){var r=(t._registeredHooks=t._registeredHooks||{})[n.name]=[],o=Object(i.L)(r);function a(t,i,a){void 0===a&&(a={});var u=new Et(e,n,i,t,o,a);return r.push(u),u.deregister.bind(u)}return t[n.name]=a,a}var Ct=function(){function t(t){this.transition=t}return t.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(i.T,[]).filter(i.y)},t.prototype.buildHooks=function(t){var e=this.transition,n=e.treeChanges(),r=this.getMatchingHooks(t,n);if(!r)return[];var o={transition:e,current:e.options().current};return r.map(function(r){return r.matches(n)[t.criteriaMatchPath.name].map(function(n){var a=Object(i.r)({bind:r.bind,traceData:{hookType:t.name,context:n}},o),u=t.criteriaMatchPath.scope===vt.STATE?n.state.self:null,s=new xt(e,u,r,a);return{hook:r,node:n,transitionHook:s}})}).reduce(i.T,[]).sort(function(t){void 0===t&&(t=!1);return function(e,n){var r=t?-1:1,i=(e.node.state.path.length-n.node.state.path.length)*r;return 0!==i?i:n.hook.priority-e.hook.priority}}(t.reverseSort)).map(function(t){return t.transitionHook})},t.prototype.getMatchingHooks=function(t,e){var n=t.hookPhase===dt.CREATE,r=this.transition.router.transitionService;return(n?[r]:[this.transition,r]).map(function(e){return e.getHooks(t.name)}).filter(Object(i.l)(s.a,"broken event named: "+t.name)).reduce(i.T,[]).filter(function(t){return t.matches(e)})},t}();var jt=Object(u.n)("self"),kt=function(){function t(t,e,n){var r=this;if(this._deferred=o.b.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new Ct(this),this.isActive=function(){return r.router.globals.transition===r},this.router=n,this._targetState=e,!e.valid())throw new Error(e.error());this._options=Object(i.r)({current:Object(u.p)(this)},e.options()),this.$id=n.transitionService._transitionCount++;var a=K.buildToPath(t,e);this._treeChanges=K.treeChanges(t,a,this._options.reloadState),this.createTransitionHookRegFns();var s=this._hookBuilder.buildHooksForPhase(dt.CREATE);xt.invokeHooks(s,function(){return null}),this.applyViewConfigs(n)}return t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.createTransitionHookRegFns=function(){var t=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==dt.CREATE}).forEach(function(e){return St(t,t.router.transitionService,e)})},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});K.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},t.prototype.$from=function(){return Object(i.P)(this._treeChanges.from).state},t.prototype.$to=function(){return Object(i.P)(this._treeChanges.to).state},t.prototype.from=function(){return this.$from().self},t.prototype.to=function(){return this.$to().self},t.prototype.targetState=function(){return this._targetState},t.prototype.is=function(e){return e instanceof t?this.is({to:e.$to().name,from:e.$from().name}):!(e.to&&!Ot(this.$to(),e.to)||e.from&&!Ot(this.$from(),e.from))},t.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(Object(u.n)("paramValues")).reduce(i.D,{}))},t.prototype.paramsChanged=function(){var t=this.params("from"),e=this.params("to"),n=[].concat(this._treeChanges.to).concat(this._treeChanges.from).map(function(t){return t.paramSchema}).reduce(i.v,[]).reduce(i.R,[]);return B.changed(n,t,e).reduce(function(t,n){return t[n.id]=e[n.id],t},{})},t.prototype.injector=function(t,e){void 0===e&&(e="to");var n=this._treeChanges[e];return t&&(n=K.subPath(n,function(e){return e.state===t||e.state.name===t})),new rt(n).injector()},t.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new rt(this._treeChanges[t]).getTokens()},t.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=Object(u.h)(Q)(t)?t:new Q(t);var n="string"==typeof e?e:e.name,r=this._treeChanges.to,o=Object(i.t)(r,function(t){return t.state.name===n});new rt(r).addResolvables([t],o.state)},t.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},t.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},t.prototype.options=function(){return this._options},t.prototype.entering=function(){return Object(i.B)(this._treeChanges.entering,Object(u.n)("state")).map(jt)},t.prototype.exiting=function(){return Object(i.B)(this._treeChanges.exiting,Object(u.n)("state")).map(jt).reverse()},t.prototype.retained=function(){return Object(i.B)(this._treeChanges.retained,Object(u.n)("state")).map(jt)},t.prototype.views=function(t,e){void 0===t&&(t="entering");var n=this._treeChanges[t];return(n=e?n.filter(Object(u.o)("state",e)):n).map(Object(u.n)("views")).filter(i.y).reduce(i.T,[])},t.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},t.prototype.redirect=function(t){for(var e=1,n=this;null!=(n=n.redirectedFrom());)if(++e>20)throw new Error("Too many consecutive Transition redirects (20+)");var r={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(r.location="replace");var o=Object(i.r)({},this.options(),t.options(),r);t=t.withOptions(o,!0);var a=this.router.transitionService.create(this._treeChanges.from,t),s=this._treeChanges.entering,c=a._treeChanges.entering;return K.matching(c,s,K.nonDynamicParams).filter(Object(u.i)(function(t){return function(e){return t&&e.state.includes[t.name]}}(t.options().reloadState))).forEach(function(t,e){t.resolvables=s[e].resolvables}),a},t.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&(!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length&&!Object(i.i)(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(i.g,!1))){var e=t.to.map(function(t){return t.paramSchema}),n=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})}),r=n[0],o=n[1];return Object(i.i)(e,r,o).map(function(t){var e=t[0],n=t[1],r=t[2];return B.changed(e,n,r)}).reduce(i.T,[])}},t.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(i.g,!1)},t.prototype.ignored=function(){return!!this._ignoredReason()},t.prototype._ignoredReason=function(){var t=this.router.globals.transition,e=this._options.reloadState,n=function(t,n){if(t.length!==n.length)return!1;var r=K.matching(t,n);return t.length===r.filter(function(t){return!e||!t.state.includes[e.name]}).length},r=this.treeChanges(),i=t&&t.treeChanges();return i&&n(i.to,r.to)&&n(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&n(r.from,r.to)?"SameAsCurrent":void 0},t.prototype.run=function(){var t=this,e=xt.runAllHooks,n=function(e){return t._hookBuilder.buildHooksForPhase(e)},r=n(dt.BEFORE);return xt.invokeHooks(r,function(){var e=t.router.globals;return e.lastStartedTransitionId=t.$id,e.transition=t,e.transitionHistory.enqueue(t),V.traceTransitionStart(t),o.b.$q.when(void 0)}).then(function(){var t=n(dt.RUN);return xt.invokeHooks(t,function(){return o.b.$q.when(void 0)})}).then(function(){V.traceSuccess(t.$to(),t),t.success=!0,t._deferred.resolve(t.to()),e(n(dt.SUCCESS))},function(r){V.traceError(r,t),t.success=!1,t._deferred.reject(r),t._error=r,e(n(dt.ERROR))}),this.promise},t.prototype.valid=function(){return!this.error()||void 0!==this.success},t.prototype.abort=function(){Object(s.m)(this.success)&&(this._aborted=!0)},t.prototype.error=function(){var t=this.$to();if(t.self.abstract)return f.invalid("Cannot transition to abstract state '"+t.name+"'");var e=t.parameters(),n=this.params(),r=e.filter(function(t){return!t.validates(n[t.id])});if(r.length){var i=r.map(function(t){return"["+t.id+":"+y(n[t.id])+"]"}).join(", "),o="The following parameter values are not valid for state '"+t.name+"': "+i;return f.invalid(o)}return!1===this.success?this._error:void 0},t.prototype.toString=function(){var t=this.from(),e=this.to(),n=function(t){return null!==t["#"]&&void 0!==t["#"]?t:Object(i.F)(t,["#"])};return"Transition#"+this.$id+"( '"+(Object(s.i)(t)?t.name:t)+"'"+y(n(this._treeChanges.from.map(Object(u.n)("paramValues")).reduce(i.D,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(Object(s.i)(e)?e.name:e)+"'"+y(n(this.params()))+" )"},t.diToken=t,t}();function Tt(t,e){var n=["",""],r=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return r;switch(e.squash){case!1:n=["(",")"+(e.isOptional?"?":"")];break;case!0:r=r.replace(/\/$/,""),n=["(?:/(",")|/)?"];break;default:n=["("+e.squash+"|",")?"]}return r+n[0]+e.type.pattern.source+n[1]}var _t=j("/"),At={state:{params:{}},strict:!0,caseInsensitive:!0},Rt=function(){function t(e,n,r,o){var a=this;this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.config=o=Object(i.o)(o,At),this.pattern=e;for(var s,c,l,f=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,p=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h=[],d=0,v=function(n){if(!t.nameValidator.test(n))throw new Error("Invalid parameter name '"+n+"' in pattern '"+e+"'");if(Object(i.t)(a._params,Object(u.o)("id",n)))throw new Error("Duplicate parameter name '"+n+"' in pattern '"+e+"'")},m=function(t,r){var o=t[2]||t[3],u=r?t[4]:t[4]||("*"===t[1]?"[\\s\\S]*":null);return{id:o,regexp:u,segment:e.substring(d,t.index),type:u?n.type(u)||function(t){return Object(i.A)(n.type(r?"query":"path"),{pattern:new RegExp(t,a.config.caseInsensitive?"i":void 0)})}(u):null}};(s=f.exec(e))&&!((c=m(s,!1)).segment.indexOf("?")>=0);)v(c.id),this._params.push(r.fromPath(c.id,c.type,o.state)),this._segments.push(c.segment),h.push([c.segment,Object(i.P)(this._params)]),d=f.lastIndex;var g=(l=e.substring(d)).indexOf("?");if(g>=0){var $=l.substring(g);if(l=l.substring(0,g),$.length>0)for(d=0;s=p.exec($);)v((c=m(s,!0)).id),this._params.push(r.fromSearch(c.id,c.type,o.state)),d=f.lastIndex}this._segments.push(l),this._compiled=h.map(function(t){return Tt.apply(null,t)}).concat(Tt(l))}return t.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},t.pathSegmentsAndParams=function(t){var e=t._segments,n=t._params.filter(function(t){return t.location===L.PATH});return Object(i.i)(e,n.concat(void 0)).reduce(i.T,[]).filter(function(t){return""!==t&&Object(s.c)(t)})},t.queryParams=function(t){return t._params.filter(function(t){return t.location===L.SEARCH})},t.compare=function(e,n){var r=function(e){return e._cache.weights=e._cache.weights||function(e){return e._cache.segments=e._cache.segments||e._cache.path.map(t.pathSegmentsAndParams).reduce(i.T,[]).reduce(k,[]).map(function(t){return Object(s.l)(t)?_t(t):t}).reduce(i.T,[])}(e).map(function(t){return"/"===t?1:Object(s.l)(t)?2:t instanceof B?3:void 0})},o=r(e),a=r(n);!function(t,e,n){for(var r=Math.max(t.length,e.length);t.length<r;)t.push(n);for(;e.length<r;)e.push(n)}(o,a,0);var u,c,l=Object(i.i)(o,a);for(c=0;c<l.length;c++)if(0!==(u=l[c][0]-l[c][1]))return u;return 0},t.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},t.prototype.isRoot=function(){return this._cache.path[0]===this},t.prototype.toString=function(){return this.pattern},t.prototype.exec=function(t,e,n,r){var o=this;void 0===e&&(e={}),void 0===r&&(r={});var a=function(t,e,n){return t[e]=t[e]||n()}(this._cache,"pattern",function(){return new RegExp(["^",Object(i.S)(o._cache.path.map(Object(u.n)("_compiled"))).join(""),!1===o.config.strict?"/?":"","$"].join(""),o.config.caseInsensitive?"i":void 0)}).exec(t);if(!a)return null;var c=this.parameters(),l=c.filter(function(t){return!t.isSearch()}),f=c.filter(function(t){return t.isSearch()}),p=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),h={};if(p!==a.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");function d(t){var e=function(t){return t.split("").reverse().join("")},n=e(t).split(/-(?!\\)/),r=Object(i.B)(n,e);return Object(i.B)(r,function(t){return t.replace(/\\-/g,"-")}).reverse()}for(var v=0;v<p;v++){for(var m=l[v],g=a[v+1],$=0;$<m.replace.length;$++)m.replace[$].from===g&&(g=m.replace[$].to);g&&!0===m.array&&(g=d(g)),Object(s.c)(g)&&(g=m.type.decode(g)),h[m.id]=m.value(g)}return f.forEach(function(t){for(var n=e[t.id],r=0;r<t.replace.length;r++)t.replace[r].from===n&&(n=t.replace[r].to);Object(s.c)(n)&&(n=t.type.decode(n)),h[t.id]=t.value(n)}),n&&(h["#"]=n),h},t.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:Object(i.S)(this._cache.path.map(function(t){return t._params}))},t.prototype.parameter=function(t,e){var n=this;void 0===e&&(e={});var r=this._cache.parent;return function(){for(var e=0,r=n._params;e<r.length;e++){var i=r[e];if(i.id===t)return i}}()||!1!==e.inherit&&r&&r.parameter(t,e)||null},t.prototype.validates=function(t){return t=t||{},this.parameters().filter(function(e){return t.hasOwnProperty(e.id)}).map(function(e){return function(t,e){return!t||t.validates(e)}(e,t[e.id])}).reduce(i.e,!0)},t.prototype.format=function(e){void 0===e&&(e={});var n=this._cache.path,r=n.map(t.pathSegmentsAndParams).reduce(i.T,[]).map(function(t){return Object(s.l)(t)?t:a(t)}),o=n.map(t.queryParams).reduce(i.T,[]).map(a);if(r.concat(o).filter(function(t){return!1===t.isValid}).length)return null;function a(t){var n=t.value(e[t.id]),r=t.validates(n),i=t.isDefaultValue(n);return{param:t,value:n,isValid:r,isDefaultValue:i,squash:!!i&&t.squash,encoded:t.type.encode(n)}}var u=r.reduce(function(e,n){if(Object(s.l)(n))return e+n;var r=n.squash,o=n.encoded,a=n.param;return!0===r?e.match(/\/$/)?e.slice(0,-1):e:Object(s.l)(r)?e+r:!1!==r?e:null==o?e:Object(s.a)(o)?e+Object(i.B)(o,t.encodeDashes).join("-"):a.raw?e+o:e+encodeURIComponent(o)},""),c=o.map(function(t){var e=t.param,n=t.squash,r=t.encoded,o=t.isDefaultValue;if(!(null==r||o&&!1!==n)&&(Object(s.a)(r)||(r=[r]),0!==r.length))return e.raw||(r=Object(i.B)(r,encodeURIComponent)),r.map(function(t){return e.id+"="+t})}).filter(i.y).reduce(i.T,[]).join("&");return u+(c?"?"+c:"")+(e["#"]?"#"+e["#"]:"")},t.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,t}(),Pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Nt=function(){function t(t){this.umf=t}return t.prototype.fromConfig=function(t,e,n){return new B(t,e,L.CONFIG,this.umf,n)},t.prototype.fromPath=function(t,e,n){return new B(t,e,L.PATH,this.umf,n)},t.prototype.fromSearch=function(t,e,n){return new B(t,e,L.SEARCH,this.umf,n)},t}(),Dt=function(){function t(){this.paramTypes=new W,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.paramFactory=new Nt(this),Object(i.r)(this,{UrlMatcher:Rt,Param:B})}return t.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=Object(s.c)(t)?t:this._isCaseInsensitive},t.prototype.strictMode=function(t){return this._isStrictMode=Object(s.c)(t)?t:this._isStrictMode},t.prototype.defaultSquashPolicy=function(t){if(Object(s.c)(t)&&!0!==t&&!1!==t&&!Object(s.l)(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Object(s.c)(t)?t:this._defaultSquashPolicy},t.prototype.compile=function(t,e){var n=e&&!e.state&&e.params;e=n?Pt({state:{params:n}},e):e;var r={strict:this._isStrictMode,caseInsensitive:this._isCaseInsensitive};return new Rt(t,this.paramTypes,this.paramFactory,Object(i.r)(r,e))},t.prototype.isMatcher=function(t){if(!Object(s.i)(t))return!1;var e=!0;return Object(i.w)(Rt.prototype,function(n,r){Object(s.d)(n)&&(e=e&&Object(s.c)(t[r])&&Object(s.d)(t[r]))}),e},t.prototype.type=function(t,e,n){var r=this.paramTypes.type(t,e,n);return Object(s.c)(e)?this:r},t.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},t.prototype.dispose=function(){this.paramTypes.dispose()},t}(),Mt=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var n=this,r=gt.isState,i=Object(u.l)([[s.l,function(t){return i(n.compile(t))}],[Object(u.h)(Rt),function(t){return n.fromUrlMatcher(t,e)}],[r,function(t){return n.fromState(t,n.router)}],[Object(u.h)(RegExp),function(t){return n.fromRegExp(t,e)}],[s.d,function(t){return new It(t,e)}]]),o=i(t);if(!o)throw new Error("invalid 'what' in when()");return o},t.prototype.fromUrlMatcher=function(t,e){var n=e;Object(s.l)(e)&&(e=this.router.urlMatcherFactory.compile(e)),Object(u.h)(Rt)(e)&&(n=function(t){return e.format(t)});var r={urlMatcher:t,matchPriority:function(e){var n=t.parameters().filter(function(t){return t.isOptional});return n.length?n.filter(function(t){return e[t.id]}).length/n.length:1e-6},type:"URLMATCHER"};return Object(i.r)(new It(function(e){var n=t.exec(e.path,e.search,e.hash);return t.validates(n)&&n},n),r)},t.prototype.fromState=function(t,e){var n={state:t,type:"STATE"};return Object(i.r)(this.fromUrlMatcher(t.url,function(n){var r=e.stateService,i=e.globals;r.href(t,n)!==r.href(i.current,i.params)&&r.transitionTo(t,n,{inherit:!0,source:"url"})}),n)},t.prototype.fromRegExp=function(t,e){if(t.global||t.sticky)throw new Error("Rule RegExp must not be global or sticky");var n=Object(s.l)(e)?function(t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}:e,r={regexp:t,type:"REGEXP"};return Object(i.r)(new It(function(e){return t.exec(e.path)},n),r)},t.isUrlRule=function(t){return t&&["type","match","handler"].every(function(e){return Object(s.c)(t[e])})},t}(),It=function(){return function(t,e){var n=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-n.$id},this.handler=e||i.y}}();var Vt;Vt=function(t,e){var n=function(t,e){return(e.priority||0)-(t.priority||0)}(t,e);return 0!==n?n:0!==(n=function(t,e){var n={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(n[t.type]||0)-(n[e.type]||0)}(t,e))?n:0!==(n=function(t,e){return t.urlMatcher&&e.urlMatcher?Rt.compare(t.urlMatcher,e.urlMatcher):0}(t,e))?n:function(t,e){var n={STATE:!0,URLMATCHER:!0};return n[t.type]&&n[e.type]?0:(t.$id||0)-(e.$id||0)}(t,e)};var qt=function(){function t(e){this._sortFn=Vt,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=e,this.urlRuleFactory=new Mt(e),Object(i.n)(Object(u.p)(t.prototype),this,Object(u.p)(this))}return t.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},t.prototype.sort=function(t){this._rules=this.stableSort(this._rules,this._sortFn=t||this._sortFn),this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,e){var n=t.map(function(t,e){return{elem:t,idx:e}});return n.sort(function(t,n){var r=e(t.elem,n.elem);return 0===r?t.idx-n.idx:r}),n.map(function(t){return t.elem})},t.prototype.match=function(t){var e=this;this.ensureSorted(),t=Object(i.r)({path:"",search:{},hash:""},t);var n=this.rules();this._otherwiseFn&&n.push(this._otherwiseFn);for(var r,o=function(n){var r=n.match(t,e._router);return r&&{match:r,rule:n,weight:n.matchPriority(r)}},a=0;a<n.length&&(!r||0===this._sortFn(n[a],r.rule));a++){var u=o(n[a]);r=!r||u&&u.weight>r.weight?u:r}return r},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this._router,n=e.urlService,r=e.stateService,i={path:n.path(),search:n.search(),hash:n.hash()},o=this.match(i);Object(u.l)([[s.l,function(t){return n.url(t,!0)}],[J.isDef,function(t){return r.go(t.state,t.params,t.options)}],[Object(u.h)(J),function(t){return r.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,i,e))}},t.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)});this._stopFn&&this._stopFn(),delete this._stopFn},t.prototype.update=function(t){var e=this._router.locationService;t?this.location=e.url():e.url()!==this.location&&e.url(this.location,!0)},t.prototype.push=function(t,e,n){var r=n&&!!n.replace;this._router.urlService.url(t.format(e||{}),r)},t.prototype.href=function(t,e,n){var r=t.format(e);if(null==r)return null;n=n||{absolute:!1};var i=this._router.urlService.config,o=i.html5Mode();if(o||null===r||(r="#"+i.hashPrefix()+r),r=function(t,e,n,r){return"/"===r?t:e?x(r)+t:n?r.slice(1)+t:t}(r,o,n.absolute,i.baseHref()),!n.absolute||!r)return r;var a=!o&&r?"/":"",u=i.port(),s=80===u||443===u?"":":"+u;return[i.protocol(),"://",i.host(),s,a,r].join("")},t.prototype.rule=function(t){var e=this;if(!Mt.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.removeRule=function(t){Object(i.L)(this._rules,t)},t.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},t.prototype.otherwise=function(t){var e=Lt(t);this._otherwiseFn=this.urlRuleFactory.create(Object(u.p)(!0),e),this._sorted=!1},t.prototype.initial=function(t){var e=Lt(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},t.prototype.when=function(t,e,n){var r=this.urlRuleFactory.create(t,e);return Object(s.c)(n&&n.priority)&&(r.priority=n.priority),this.rule(r),r},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t}();function Lt(t){if(!(Object(s.d)(t)||Object(s.l)(t)||Object(u.h)(J)(t)||J.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return Object(s.d)(t)?t:Object(u.p)(t)}var Ht=function(){function t(t){var e=this;this.router=t,this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIView:function(t){return Object(i.t)(e._uiViews,function(n){return e.router.$id+"."+n.id===t})},_registeredUIViews:function(){return e._uiViews},_activeViewConfigs:function(){return e._viewConfigs},_onSync:function(t){return e._listeners.push(t),function(){return Object(i.L)(e._listeners,t)}}}}return t.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var n=e.split("@"),r=n[0]||"$default",i=Object(s.l)(n[1])?n[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(r);o&&(i=o[1],r=o[2]),"!"===r.charAt(0)&&(r=r.substr(1),i="");/^(\^(?:\.\^)*)$/.exec(i)?i=i.split(".").reduce(function(t,e){return t.parent},t).name:"."===i&&(i=t.name);return{uiViewName:r,uiViewContextAnchor:i}},t.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},t.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},t.prototype.createViewConfig=function(t,e){var n=this._viewConfigFactories[e.$type];if(!n)throw new Error("ViewService: No view config factory registered for type "+e.$type);var r=n(t,e);return Object(s.a)(r)?r:[r]},t.prototype.deactivateViewConfig=function(t){V.traceViewServiceEvent("<- Removing",t),Object(i.L)(this._viewConfigs,t)},t.prototype.activateViewConfig=function(t){V.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},t.prototype.sync=function(){var e=this,n=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(i.h,{});function r(t){for(var e=t.viewDecl.$context,n=0;++n&&e.parent;)e=e.parent;return n}var o=Object(u.e)(function(t,e,n,r){return e*(t(n)-t(r))}),a=this._uiViews.sort(o(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(i){var a=e._viewConfigs.filter(t.matches(n,i));return a.length>1&&a.sort(o(r,-1)),{uiView:i,viewConfig:a[0]}}),s=a.map(function(t){return t.viewConfig}),c=this._viewConfigs.filter(function(t){return!Object(i.z)(s,t)}).map(function(t){return{uiView:void 0,viewConfig:t}});a.forEach(function(t){-1!==e._uiViews.indexOf(t.uiView)&&t.uiView.configUpdated(t.viewConfig)});var l=a.concat(c);this._listeners.forEach(function(t){return t(l)}),V.traceViewSync(l)},t.prototype.registerUIView=function(t){V.traceViewServiceUIViewEvent("-> Registering",t);var e=this._uiViews;return e.filter(function(e){return e.fqn===t.fqn&&e.$type===t.$type}).length&&V.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",t),e.push(t),this.sync(),function(){-1!==e.indexOf(t)?(V.traceViewServiceUIViewEvent("<- Deregistering",t),Object(i.L)(e)(t)):V.traceViewServiceUIViewEvent("Tried removing non-registered uiView",t)}},t.prototype.available=function(){return this._uiViews.map(Object(u.n)("fqn"))},t.prototype.active=function(){return this._uiViews.filter(Object(u.n)("$config")).map(Object(u.n)("name"))},t.matches=function(t,e){return function(n){if(e.$type!==n.viewDecl.$type)return!1;var r=n.viewDecl,o=r.$uiViewName.split("."),a=e.fqn.split(".");if(!Object(i.q)(o,a.slice(0-o.length)))return!1;var u=1-o.length||void 0,s=a.slice(0,u).join("."),c=t[s].creationContext;return r.$uiViewContextAnchor===(c&&c.name)}},t}(),Ut=function(){function t(){this.params=new z,this.lastStartedTransitionId=-1,this.transitionHistory=new c([],1),this.successfulTransitions=new c([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}(),Ft=function(t){return t.reduce(function(t,e){return t[e]=Object(o.a)(e),t},{dispose:i.E})},Bt=["url","path","search","hash","onChange"],Wt=["port","protocol","host","baseHref","html5Mode","hashPrefix"],zt=["type","caseInsensitive","strictMode","defaultSquashPolicy"],Gt=["sort","when","initial","otherwise","rules","rule","removeRule"],Jt=["deferIntercept","listen","sync","match"],Kt=function(){function t(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};var n=function(){return t.locationService};Object(i.n)(n,this,n,Bt,e);var r=function(){return t.locationConfig};Object(i.n)(r,this.config,r,Wt,e);var o=function(){return t.urlMatcherFactory};Object(i.n)(o,this.config,o,zt);var a=function(){return t.urlRouter};Object(i.n)(a,this.rules,a,Gt),Object(i.n)(a,this,a,Jt)}return t.prototype.url=function(t,e,n){},t.prototype.path=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.onChange=function(t){},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.dispose=function(){},t.prototype.sync=function(t){},t.prototype.listen=function(t){},t.prototype.deferIntercept=function(t){},t.prototype.match=function(t){},t.locationServiceStub=Ft(Bt),t.locationConfigStub=Ft(Wt),t}(),Yt=0,Xt=function(){function t(t,e){void 0===t&&(t=Kt.locationServiceStub),void 0===e&&(e=Kt.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=Yt++,this._disposed=!1,this._disposables=[],this.trace=V,this.viewService=new Ht(this),this.globals=new Ut,this.transitionService=new be(this),this.urlMatcherFactory=new Dt,this.urlRouter=new qt(this),this.stateRegistry=new bt(this),this.stateService=new we(this),this.urlService=new Kt(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;t&&Object(s.d)(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),Object(i.L)(e._disposables,t)}catch(t){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var n=new t(this,e);if(!n.name)throw new Error("Required property `name` missing on plugin: "+n);return this._disposables.push(n),this._plugins[n.name]=n},t.prototype.getPlugin=function(t){return t?this._plugins[t]:Object(i.U)(this._plugins)},t}();function Qt(t){t.addResolvable(Q.fromData(Xt,t.router),""),t.addResolvable(Q.fromData(kt,t),""),t.addResolvable(Q.fromData("$transition$",t),""),t.addResolvable(Q.fromData("$stateParams",t.params()),""),t.entering().forEach(function(e){t.addResolvable(Q.fromData("$state$",e),e)})}var Zt=["$transition$",kt],te=Object(i.z)(Zt),ee=function(t){var e=function(t){return te(t.token)?Q.fromData(t.token,null):t};Object(i.U)(t.treeChanges()).reduce(i.T,[]).reduce(i.R,[]).forEach(function(t){t.resolvables=t.resolvables.map(e)})},ne=function(t){var e=t.to().redirectTo;if(e){var n=t.router.stateService;return Object(s.d)(e)?o.b.$q.when(e(t)).then(r):r(e)}function r(e){if(e)return e instanceof J?e:Object(s.l)(e)?n.target(e,t.params(),t.options()):e.state||e.params?n.target(e.state||t.to(),e.params||t.params(),t.options()):void 0}};function re(t){return function(e,n){return(0,n.$$state()[t])(e,n)}}var ie=re("onExit"),oe=re("onRetain"),ae=re("onEnter"),ue=function(t){return new rt(t.treeChanges().to).resolvePath("EAGER",t).then(i.E)},se=function(t,e){return new rt(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(i.E)},ce=function(t){return new rt(t.treeChanges().to).resolvePath("LAZY",t).then(i.E)},le=function(t){var e=o.b.$q,n=t.views("entering");if(n.length)return e.all(n.map(function(t){return e.when(t.load())})).then(i.E)},fe=function(t){var e=t.views("entering"),n=t.views("exiting");if(e.length||n.length){var r=t.router.viewService;n.forEach(function(t){return r.deactivateViewConfig(t)}),e.forEach(function(t){return r.activateViewConfig(t)}),r.sync()}},pe=function(t){var e=t.router.globals,n=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,Object(i.m)(t.params(),e.params)},{priority:1e4}),t.promise.then(n,n)},he=function(t){var e=t.options(),n=t.router.stateService,r=t.router.urlRouter;if("url"!==e.source&&e.location&&n.$current.navigable){var i={replace:"replace"===e.location};r.push(n.$current.navigable.url,n.params,i)}r.update(!0)},de=function(t){var e=t.router;var n=t.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(e){return ve(t,e)});return o.b.$q.all(n).then(function(){if("url"!==t.originalTransition().options().source){var n=t.targetState();return e.stateService.target(n.identifier(),n.params(),n.options())}var r=e.urlService,i=r.match(r.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var a=o.state,u=i.match;return e.stateService.target(a,u,t.options())}e.urlService.sync()})};function ve(t,e){var n=e.$$state().lazyLoad,r=n._promise;if(!r){r=n._promise=o.b.$q.when(n(t,e)).then(function(e){e&&Array.isArray(e.states)&&e.states.forEach(function(e){return t.router.stateRegistry.register(e)});return e}).then(function(t){return delete e.lazyLoad,delete e.$$state().lazyLoad,delete n._promise,t},function(t){return delete n._promise,o.b.$q.reject(t)})}return r}var me=function(){return function(t,e,n,r,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=xt.HANDLE_RESULT),void 0===a&&(a=xt.REJECT_ERROR),void 0===u&&(u=!1),this.name=t,this.hookPhase=e,this.hookOrder=n,this.criteriaMatchPath=r,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=u}}();function ge(t){var e=t._ignoredReason();if(e){V.traceTransitionIgnored(t);var n=t.router.globals.transition;return"SameAsCurrent"===e&&n&&n.abort(),f.ignored().toPromise()}}function $e(t){if(!t.valid())throw new Error(t.error().toString())}var ye={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},be=function(){function t(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=Object(i.n)(Object(u.p)(this),{},Object(u.p)(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),t.globals.successfulTransitions.onEvict(ee)}return t.prototype.onCreate=function(t,e,n){},t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.dispose=function(t){Object(i.U)(this._registeredHooks).forEach(function(t){return t.forEach(function(e){e._deregistered=!0,Object(i.L)(t,e)})})},t.prototype.create=function(t,e){return new kt(t,e,this._router)},t.prototype._defineCoreEvents=function(){var t=dt,e=xt,n=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,n.to,!1,e.LOG_REJECTED_RESULT,e.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,n.to),this._defineEvent("onStart",t.RUN,0,n.to),this._defineEvent("onExit",t.RUN,100,n.exiting,!0),this._defineEvent("onRetain",t.RUN,200,n.retained),this._defineEvent("onEnter",t.RUN,300,n.entering),this._defineEvent("onFinish",t.RUN,400,n.to),this._defineEvent("onSuccess",t.SUCCESS,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var t=vt.STATE,e=vt.TRANSITION;this._definePathType("to",e),this._definePathType("from",e),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},t.prototype._defineEvent=function(t,e,n,r,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=xt.HANDLE_RESULT),void 0===a&&(a=xt.REJECT_ERROR),void 0===u&&(u=!1);var s=new me(t,e,n,r,i,o,a,u);this._eventTypes.push(s),St(this,this,s)},t.prototype._getEvents=function(t){return(Object(s.c)(t)?this._eventTypes.filter(function(e){return e.hookPhase===t}):this._eventTypes.slice()).sort(function(t,e){var n=t.hookPhase-e.hookPhase;return 0===n?t.hookOrder-e.hookOrder:n})},t.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=function(t){return t.onCreate({},Qt)}(this),t.ignored=function(t){return t.onBefore({},ge,{priority:-9999})}(this),t.invalid=function(t){return t.onBefore({},$e,{priority:-1e4})}(this),t.redirectTo=function(t){return t.onStart({to:function(t){return!!t.redirectTo}},ne)}(this),t.onExit=function(t){return t.onExit({exiting:function(t){return!!t.onExit}},ie)}(this),t.onRetain=function(t){return t.onRetain({retained:function(t){return!!t.onRetain}},oe)}(this),t.onEnter=function(t){return t.onEnter({entering:function(t){return!!t.onEnter}},ae)}(this),t.eagerResolve=function(t){return t.onStart({},ue,{priority:1e3})}(this),t.lazyResolve=function(t){return t.onEnter({entering:Object(u.p)(!0)},se,{priority:1e3})}(this),t.resolveAll=function(t){return t.onFinish({},ce,{priority:1e3})}(this),t.loadViews=function(t){return t.onFinish({},le)}(this),t.activateViews=function(t){return t.onSuccess({},fe)}(this),t.updateGlobals=function(t){return t.onCreate({},pe)}(this),t.updateUrl=function(t){return t.onSuccess({},he,{priority:9999})}(this),t.lazyLoad=function(t){return t.onBefore({entering:function(t){return!!t.lazyLoad}},de)}(this)},t}(),we=function(){function t(e){this.router=e,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof f?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var n=Object.keys(t.prototype).filter(Object(u.i)(Object(i.z)(["current","$current","params","transition"])));Object(i.n)(Object(u.p)(t.prototype),this,Object(u.p)(this),n)}return Object.defineProperty(t.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.defaultErrorHandler(i.E),this.invalidCallbacks=[]},t.prototype._handleInvalidTargetState=function(t,e){var n=this,r=K.makeTargetState(this.router.stateRegistry,t),i=this.router.globals,a=function(){return i.transitionHistory.peekTail()},u=a(),s=new c(this.invalidCallbacks.slice()),l=new rt(t).injector(),p=function(t){if(t instanceof J){var e=t;return(e=n.target(e.identifier(),e.params(),e.options())).valid()?a()!==u?f.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):f.invalid(e.error()).toPromise()}};return function t(){var n=s.dequeue();return void 0===n?f.invalid(e.error()).toPromise():o.b.$q.when(n(e,r,l)).then(p).then(function(e){return e||t()})}()},t.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){Object(i.L)(this.invalidCallbacks)(t)}.bind(this)},t.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!Object(s.c)(t)||t,inherit:!1,notify:!1})},t.prototype.go=function(t,e,n){var r={relative:this.$current,inherit:!0},o=Object(i.o)(n,r,ye);return this.transitionTo(t,e,o)},t.prototype.target=function(t,e,n){if(void 0===n&&(n={}),Object(s.i)(n.reload)&&!n.reload.name)throw new Error("Invalid reload state object");var r=this.router.stateRegistry;if(n.reloadState=!0===n.reload?r.root():r.matcher.find(n.reload,n.relative),n.reload&&!n.reloadState)throw new Error("No such reload state '"+(Object(s.l)(n.reload)?n.reload:n.reload.name)+"'");return new J(this.router.stateRegistry,t,e,n)},t.prototype.getCurrentPath=function(){var t=this,e=this.router.globals.successfulTransitions.peekTail();return e?e.treeChanges().to:[new G(t.router.stateRegistry.root())]},t.prototype.transitionTo=function(t,e,n){var a=this;void 0===e&&(e={}),void 0===n&&(n={});var u=this.router,s=u.globals;n=Object(i.o)(n,ye);n=Object(i.r)(n,{current:function(){return s.transition}});var c=this.target(t,e,n),l=this.getCurrentPath();if(!c.exists())return this._handleInvalidTargetState(l,c);if(!c.valid())return Object(i.O)(c.error());var p=function(t){return function(e){if(e instanceof f){var n=u.globals.lastStartedTransitionId===t.$id;if(e.type===r.IGNORED)return n&&u.urlRouter.update(),o.b.$q.when(s.current);var i=e.detail;if(e.type===r.SUPERSEDED&&e.redirected&&i instanceof J){var c=t.redirect(i);return c.run().catch(p(c))}if(e.type===r.ABORTED)return n&&u.urlRouter.update(),o.b.$q.reject(e)}return a.defaultErrorHandler()(e),o.b.$q.reject(e)}},h=this.router.transitionService.create(l,c),d=h.run().catch(p(h));return Object(i.N)(d),Object(i.r)(d,{transition:h})},t.prototype.is=function(t,e,n){n=Object(i.o)(n,{relative:this.$current});var r=this.router.stateRegistry.matcher.find(t,n.relative);if(Object(s.c)(r)){if(this.$current!==r)return!1;if(!e)return!0;var o=r.parameters({inherit:!0,matchingKeys:e});return B.equals(o,B.values(o,e),this.params)}},t.prototype.includes=function(t,e,n){n=Object(i.o)(n,{relative:this.$current});var r=Object(s.l)(t)&&a.fromString(t);if(r){if(!r.matches(this.$current.name))return!1;t=this.$current.name}var o=this.router.stateRegistry.matcher.find(t,n.relative),u=this.$current.includes;if(Object(s.c)(o)){if(!Object(s.c)(u[o.name]))return!1;if(!e)return!0;var c=o.parameters({inherit:!0,matchingKeys:e});return B.equals(c,B.values(c,e),this.params)}},t.prototype.href=function(t,e,n){var r={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};n=Object(i.o)(n,r),e=e||{};var o=this.router.stateRegistry.matcher.find(t,n.relative);if(!Object(s.c)(o))return null;n.inherit&&(e=this.params.$inherit(e,this.$current,o));var a=o&&n.lossy?o.navigable:o;return a&&void 0!==a.url&&null!==a.url?this.router.urlRouter.href(a.url,e,{absolute:n.absolute}):null},t.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},t.prototype.get=function(t,e){var n=this.router.stateRegistry;return 0===arguments.length?n.get():n.get(t,e||this.$current)},t.prototype.lazyLoad=function(t,e){var n=this.get(t);if(!n||!n.lazyLoad)throw new Error("Can not lazy load "+t);var r=this.getCurrentPath(),i=K.makeTargetState(this.router.stateRegistry,r);return ve(e=e||this.router.transitionService.create(r,i),n)},t}(),xe={when:function(t){return new Promise(function(e,n){return e(t)})},reject:function(t){return new Promise(function(e,n){n(t)})},defer:function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},all:function(t){if(Object(s.a)(t))return Promise.all(t);if(Object(s.i)(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return xe.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}},Oe={},Ee=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Se=/([^\s,]+)/g,Ce={get:function(t){return Oe[t]},has:function(t){return null!=Ce.get(t)},invoke:function(t,e,n){var r=Object(i.r)({},Oe,n||{}),o=Ce.annotate(t),a=Object(i.l)(function(t){return r.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),u=o.filter(a).map(function(t){return r[t]});return Object(s.d)(t)?t.apply(e,u):t.slice(-1)[0].apply(e,u)},annotate:function(t){if(!Object(s.e)(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(Object(s.a)(t))return t.slice(0,-1);var e=t.toString().replace(Ee,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(Se)||[]}},je=function(t,e){var n=e[0],r=e[1];return t.hasOwnProperty(n)?Object(s.a)(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r,t},ke=function(t){return t.split("&").filter(i.y).map(S).reduce(je,{})};function Te(t){var e=function(t){return t||""},n=O(t).map(e),r=n[0],i=n[1],o=E(r).map(e);return{path:o[0],search:o[1],hash:i,url:t}}var _e=function(t){var e=t.path(),n=t.search(),r=t.hash(),o=Object.keys(n).map(function(t){var e=n[t];return(Object(s.a)(e)?e:[e]).map(function(e){return t+"="+e})}).reduce(i.T,[]).join("&");return e+(o?"?"+o:"")+(r?"#"+r:"")};function Ae(t,e,n,r){return function(i){var o=i.locationService=new n(i),a=i.locationConfig=new r(i,e);return{name:t,service:o,configuration:a,dispose:function(t){t.dispose(o),t.dispose(a)}}}}var Re=function(){function t(t,e){var n=this;this.fireAfterUpdate=e,this._listeners=[],this._listener=function(t){return n._listeners.forEach(function(e){return e(t)})},this.hash=function(){return Te(n._get()).hash},this.path=function(){return Te(n._get()).path},this.search=function(){return ke(Te(n._get()).search)},this._location=i.M.location,this._history=i.M.history}return t.prototype.url=function(t,e){return void 0===e&&(e=!0),Object(s.c)(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate&&this._listeners.forEach(function(e){return e({url:t})})),_e(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return Object(i.L)(e._listeners,t)}},t.prototype.dispose=function(t){Object(i.p)(this._listeners)},t}(),Pe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ne=function(t){function e(e){var n=t.call(this,e,!1)||this;return i.M.addEventListener("hashchange",n._listener,!1),n}return Pe(e,t),e.prototype._get=function(){return C(this._location.hash)},e.prototype._set=function(t,e,n,r){this._location.hash=n},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),i.M.removeEventListener("hashchange",this._listener)},e}(Re),De=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Me=function(t){function e(e){return t.call(this,e,!0)||this}return De(e,t),e.prototype._get=function(){return this._url},e.prototype._set=function(t,e,n,r){this._url=n},e}(Re),Ie=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=function(t){function e(e){var n=t.call(this,e,!0)||this;return n._config=e.urlService.config,i.M.addEventListener("popstate",n._listener,!1),n}return Ie(e,t),e.prototype._getBasePrefix=function(){return x(this._config.baseHref())},e.prototype._get=function(){var t=this._location,e=t.pathname,n=t.hash,r=t.search;r=E(r)[1],n=O(n)[1];var i=this._getBasePrefix(),o=e===this._config.baseHref(),a=e.substr(0,i.length)===i;return(e=o?"/":a?e.substring(i.length):e)+(r?"?"+r:"")+(n?"#"+n:"")},e.prototype._set=function(t,e,n,r){var i=this._getBasePrefix(),o=n&&"/"!==n[0]?"/":"",a=""===n||"/"===n?this._config.baseHref():i+o+n;r?this._history.replaceState(t,e,a):this._history.pushState(t,e,a)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),i.M.removeEventListener("popstate",this._listener)},e}(Re),qe=function(){return function(){var t=this;this.dispose=i.E,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return t._port},this.protocol=function(){return t._protocol},this.host=function(){return t._host},this.baseHref=function(){return t._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(e){return Object(s.c)(e)?t._hashPrefix=e:t._hashPrefix}}}(),Le=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return Object(s.c)(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return Object(s.c)(t)&&(this._baseHref=t),Object(s.m)(this._baseHref)&&(this._baseHref=this.getBaseHref()),this._baseHref},t.prototype.getBaseHref=function(){var t=document.getElementsByTagName("base")[0];return t&&t.href?t.href.replace(/^(https?:)?\/\/[^/]*/,""):location.pathname||"/"},t.prototype.dispose=function(){},t}();function He(t){return o.b.$injector=Ce,o.b.$q=xe,{name:"vanilla.services",$q:xe,$injector:Ce,dispose:function(){return null}}}var Ue=Ae("vanilla.hashBangLocation",!1,Ne,Le),Fe=Ae("vanilla.pushStateLocation",!0,Ve,Le),Be=Ae("vanilla.memoryLocation",!1,Me,qe),We=function(){function t(){}return t.prototype.dispose=function(t){},t}();n.d(e,"root",function(){return i.M}),n.d(e,"fromJson",function(){return i.x}),n.d(e,"toJson",function(){return i.Q}),n.d(e,"forEach",function(){return i.w}),n.d(e,"extend",function(){return i.r}),n.d(e,"equals",function(){return i.q}),n.d(e,"identity",function(){return i.y}),n.d(e,"noop",function(){return i.E}),n.d(e,"createProxyFunctions",function(){return i.n}),n.d(e,"inherit",function(){return i.A}),n.d(e,"inArray",function(){return i.z}),n.d(e,"_inArray",function(){return i.b}),n.d(e,"removeFrom",function(){return i.L}),n.d(e,"_removeFrom",function(){return i.d}),n.d(e,"pushTo",function(){return i.K}),n.d(e,"_pushTo",function(){return i.c}),n.d(e,"deregAll",function(){return i.p}),n.d(e,"defaults",function(){return i.o}),n.d(e,"mergeR",function(){return i.D}),n.d(e,"ancestors",function(){return i.f}),n.d(e,"pick",function(){return i.H}),n.d(e,"omit",function(){return i.F}),n.d(e,"pluck",function(){return i.I}),n.d(e,"filter",function(){return i.s}),n.d(e,"find",function(){return i.t}),n.d(e,"mapObj",function(){return i.C}),n.d(e,"map",function(){return i.B}),n.d(e,"values",function(){return i.U}),n.d(e,"allTrueR",function(){return i.e}),n.d(e,"anyTrueR",function(){return i.g}),n.d(e,"unnestR",function(){return i.T}),n.d(e,"flattenR",function(){return i.v}),n.d(e,"pushR",function(){return i.J}),n.d(e,"uniqR",function(){return i.R}),n.d(e,"unnest",function(){return i.S}),n.d(e,"flatten",function(){return i.u}),n.d(e,"assertPredicate",function(){return i.l}),n.d(e,"assertMap",function(){return i.k}),n.d(e,"assertFn",function(){return i.j}),n.d(e,"pairs",function(){return i.G}),n.d(e,"arrayTuples",function(){return i.i}),n.d(e,"applyPairs",function(){return i.h}),n.d(e,"tail",function(){return i.P}),n.d(e,"copy",function(){return i.m}),n.d(e,"_extend",function(){return i.a}),n.d(e,"silenceUncaughtInPromise",function(){return i.N}),n.d(e,"silentRejection",function(){return i.O}),n.d(e,"notImplemented",function(){return o.a}),n.d(e,"services",function(){return o.b}),n.d(e,"Glob",function(){return a}),n.d(e,"curry",function(){return u.e}),n.d(e,"compose",function(){return u.d}),n.d(e,"pipe",function(){return u.m}),n.d(e,"prop",function(){return u.n}),n.d(e,"propEq",function(){return u.o}),n.d(e,"parse",function(){return u.k}),n.d(e,"not",function(){return u.i}),n.d(e,"and",function(){return u.b}),n.d(e,"or",function(){return u.j}),n.d(e,"all",function(){return u.a}),n.d(e,"any",function(){return u.c}),n.d(e,"is",function(){return u.h}),n.d(e,"eq",function(){return u.f}),n.d(e,"val",function(){return u.p}),n.d(e,"invoke",function(){return u.g}),n.d(e,"pattern",function(){return u.l}),n.d(e,"isUndefined",function(){return s.m}),n.d(e,"isDefined",function(){return s.c}),n.d(e,"isNull",function(){return s.f}),n.d(e,"isNullOrUndefined",function(){return s.g}),n.d(e,"isFunction",function(){return s.d}),n.d(e,"isNumber",function(){return s.h}),n.d(e,"isString",function(){return s.l}),n.d(e,"isObject",function(){return s.i}),n.d(e,"isArray",function(){return s.a}),n.d(e,"isDate",function(){return s.b}),n.d(e,"isRegExp",function(){return s.k}),n.d(e,"isInjectable",function(){return s.e}),n.d(e,"isPromise",function(){return s.j}),n.d(e,"Queue",function(){return c}),n.d(e,"maxLength",function(){return p}),n.d(e,"padString",function(){return h}),n.d(e,"kebobString",function(){return d}),n.d(e,"functionToString",function(){return v}),n.d(e,"fnToString",function(){return m}),n.d(e,"stringify",function(){return y}),n.d(e,"beforeAfterSubstr",function(){return b}),n.d(e,"hostRegex",function(){return w}),n.d(e,"stripLastPathElement",function(){return x}),n.d(e,"splitHash",function(){return O}),n.d(e,"splitQuery",function(){return E}),n.d(e,"splitEqual",function(){return S}),n.d(e,"trimHashVal",function(){return C}),n.d(e,"splitOnDelim",function(){return j}),n.d(e,"joinNeighborsR",function(){return k}),n.d(e,"Category",function(){return A}),n.d(e,"Trace",function(){return I}),n.d(e,"trace",function(){return V}),n.d(e,"DefType",function(){return L}),n.d(e,"Param",function(){return B}),n.d(e,"ParamTypes",function(){return W}),n.d(e,"StateParams",function(){return z}),n.d(e,"ParamType",function(){return q}),n.d(e,"PathNode",function(){return G}),n.d(e,"PathUtils",function(){return K}),n.d(e,"resolvePolicies",function(){return Y}),n.d(e,"defaultResolvePolicy",function(){return X}),n.d(e,"Resolvable",function(){return Q}),n.d(e,"NATIVE_INJECTOR_TOKEN",function(){return nt}),n.d(e,"ResolveContext",function(){return rt}),n.d(e,"resolvablesBuilder",function(){return ht}),n.d(e,"StateBuilder",function(){return mt}),n.d(e,"StateObject",function(){return gt}),n.d(e,"StateMatcher",function(){return $t}),n.d(e,"StateQueueManager",function(){return yt}),n.d(e,"StateRegistry",function(){return bt}),n.d(e,"StateService",function(){return we}),n.d(e,"TargetState",function(){return J}),n.d(e,"TransitionHookPhase",function(){return dt}),n.d(e,"TransitionHookScope",function(){return vt}),n.d(e,"HookBuilder",function(){return Ct}),n.d(e,"matchState",function(){return Ot}),n.d(e,"RegisteredHook",function(){return Et}),n.d(e,"makeEvent",function(){return St}),n.d(e,"RejectType",function(){return r}),n.d(e,"Rejection",function(){return f}),n.d(e,"Transition",function(){return kt}),n.d(e,"TransitionHook",function(){return xt}),n.d(e,"TransitionEventType",function(){return me}),n.d(e,"defaultTransOpts",function(){return ye}),n.d(e,"TransitionService",function(){return be}),n.d(e,"UrlMatcher",function(){return Rt}),n.d(e,"ParamFactory",function(){return Nt}),n.d(e,"UrlMatcherFactory",function(){return Dt}),n.d(e,"UrlRouter",function(){return qt}),n.d(e,"UrlRuleFactory",function(){return Mt}),n.d(e,"BaseUrlRule",function(){return It}),n.d(e,"UrlService",function(){return Kt}),n.d(e,"ViewService",function(){return Ht}),n.d(e,"UIRouterGlobals",function(){return Ut}),n.d(e,"UIRouter",function(){return Xt}),n.d(e,"$q",function(){return xe}),n.d(e,"$injector",function(){return Ce}),n.d(e,"BaseLocationServices",function(){return Re}),n.d(e,"HashLocationService",function(){return Ne}),n.d(e,"MemoryLocationService",function(){return Me}),n.d(e,"PushStateLocationService",function(){return Ve}),n.d(e,"MemoryLocationConfig",function(){return qe}),n.d(e,"BrowserLocationConfig",function(){return Le}),n.d(e,"keyValsToObjectR",function(){return je}),n.d(e,"getParams",function(){return ke}),n.d(e,"parseUrl",function(){return Te}),n.d(e,"buildUrl",function(){return _e}),n.d(e,"locationPluginFactory",function(){return Ae}),n.d(e,"servicesPlugin",function(){return He}),n.d(e,"hashLocationPlugin",function(){return Ue}),n.d(e,"pushStateLocationPlugin",function(){return Fe}),n.d(e,"memoryLocationPlugin",function(){return Be}),n.d(e,"UIRouterPluginBase",function(){return We})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vcHJlZGljYXRlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vaG9mLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2NvbW1vbi9jb3Jlc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FuZ3VsYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5zY3NzP2MxYzMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi91cmxzLmpzIiwid2VicGFjazovLy8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FuZ3VsYXIvYW5ndWxhci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2FuZ3VsYXJqcy9yZWxlYXNlL3VpLXJvdXRlci1hbmd1bGFyanMuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlci9Ib21lQ3RybC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBpL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5L2Rpc3QvanF1ZXJ5LmpzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyL1Byb2ZpbGVDdHJsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vZ2xvYi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vcXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL3N0cmluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL3RyYWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhcmFtcy9wYXJhbVR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vcGFyYW1zL3BhcmFtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhcmFtcy9wYXJhbVR5cGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhcmFtcy9zdGF0ZVBhcmFtcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9wYXRoL3BhdGhOb2RlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3N0YXRlL3RhcmdldFN0YXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhdGgvcGF0aFV0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3Jlc29sdmUvaW50ZXJmYWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3Jlc29sdmUvcmVzb2x2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9yZXNvbHZlL3Jlc29sdmVDb250ZXh0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3N0YXRlL3N0YXRlQnVpbGRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL2ludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9zdGF0ZS9zdGF0ZU9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9zdGF0ZS9zdGF0ZU1hdGNoZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vc3RhdGUvc3RhdGVRdWV1ZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vc3RhdGUvc3RhdGVSZWdpc3RyeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL3RyYW5zaXRpb25Ib29rLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vaG9va1JlZ2lzdHJ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vaG9va0J1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdHJhbnNpdGlvbi90cmFuc2l0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3VybC91cmxNYXRjaGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3VybC91cmxNYXRjaGVyRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS91cmwvdXJsUnVsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS91cmwvdXJsUm91dGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZpZXcvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9nbG9iYWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3VybC91cmxTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3JvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9jb3JlUmVzb2x2YWJsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaG9va3MvcmVkaXJlY3RUby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9vbkVudGVyRXhpdFJldGFpbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9yZXNvbHZlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL3ZpZXdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL3VwZGF0ZUdsb2JhbHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaG9va3MvdXJsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL2xhenlMb2FkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vdHJhbnNpdGlvbkV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9pZ25vcmVkVHJhbnNpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9pbnZhbGlkVHJhbnNpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3N0YXRlL3N0YXRlU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL3EuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9pbmplY3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL3V0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZhbmlsbGEvYmFzZUxvY2F0aW9uU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL2hhc2hMb2NhdGlvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9tZW1vcnlMb2NhdGlvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9wdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9tZW1vcnlMb2NhdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL2Jyb3dzZXJMb2NhdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL3BsdWdpbnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaW50ZXJmYWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX2NvcmVzZXJ2aWNlc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwicm9vdCIsInNlbGYiLCJnbG9iYWwiLCJ1bmRlZmluZWQiLCJhbmd1bGFyIiwiZnJvbUpzb24iLCJKU09OIiwicGFyc2UiLCJ0b0pzb24iLCJzdHJpbmdpZnkiLCJmb3JFYWNoIiwib2JqIiwiY2IiLCJfdGhpcyIsIl9wcmVkaWNhdGVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJrZXlzIiwiZXh0ZW5kIiwiYXNzaWduIiwiX2V4dGVuZCIsImVxdWFscyIsIl9lcXVhbHMiLCJpZGVudGl0eSIsIngiLCJub29wIiwiY3JlYXRlUHJveHlGdW5jdGlvbnMiLCJzb3VyY2UiLCJ0YXJnZXQiLCJmbk5hbWVzIiwibGF0ZWJpbmQiLCJiaW5kRnVuY3Rpb24iLCJmbk5hbWUiLCJyZWR1Y2UiLCJhY2MiLCJhcHBseSIsImFyZ3VtZW50cyIsIm1ha2VMYXRlUmViaW5kRm4iLCJpbmhlcml0IiwicGFyZW50IiwiZXh0cmEiLCJpbkFycmF5IiwiX2hvZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX2luQXJyYXkiLCJhcnJheSIsImluZGV4T2YiLCJyZW1vdmVGcm9tIiwiX3JlbW92ZUZyb20iLCJpZHgiLCJzcGxpY2UiLCJwdXNoVG8iLCJfcHVzaFRvIiwiYXJyIiwidmFsIiwicHVzaCIsImRlcmVnQWxsIiwiZnVuY3Rpb25zIiwic2xpY2UiLCJmbiIsImRlZmF1bHRzIiwib3B0cyIsImRlZmF1bHRzTGlzdCIsIl9pIiwibGVuZ3RoIiwiZGVmYXVsdFZhbHMiLCJjb25jYXQiLCJyZXZlcnNlIiwicGljayIsIm1lcmdlUiIsIm1lbW8iLCJpdGVtIiwiYW5jZXN0b3JzIiwiZmlyc3QiLCJzZWNvbmQiLCJwYXRoIiwicHJvcE5hbWVzIiwib2JqQ29weSIsIl9wcm9wIiwib21pdCIsImZpbHRlciIsInBsdWNrIiwiY29sbGVjdGlvbiIsInByb3BOYW1lIiwibWFwIiwiY2FsbGJhY2siLCJyZXN1bHQiLCJhY2NlcHQiLCJmaW5kIiwibWFwT2JqIiwidmFsdWVzIiwiYWxsVHJ1ZVIiLCJlbGVtIiwiYW55VHJ1ZVIiLCJ1bm5lc3RSIiwiZmxhdHRlblIiLCJwdXNoUiIsInVuaXFSIiwidG9rZW4iLCJ1bm5lc3QiLCJmbGF0dGVuIiwiYXNzZXJ0UHJlZGljYXRlIiwiYXNzZXJ0Rm4iLCJhc3NlcnRNYXAiLCJwcmVkaWNhdGVPck1hcCIsImVyck1zZyIsIkVycm9yIiwicGFpcnMiLCJhcnJheVR1cGxlcyIsImFyZ3MiLCJtYXhBcnJheUxlbiIsIm1pbiIsIk1hdGgiLCJfbG9vcF8xIiwiYXBwbHlQYWlycyIsImtleVZhbFR1cGxlIiwidGFpbCIsImNvcHkiLCJzcmMiLCJkZXN0IiwidG9PYmoiLCJqIiwibzEiLCJvMiIsInQxIiwidHVwIiwiYTEiLCJhMiIsImIiLCJfYXJyYXlzRXEiLCJnZXRUaW1lIiwidG9TdHJpbmciLCJzaWxlbmNlVW5jYXVnaHRJblByb21pc2UiLCJwcm9taXNlIiwiY2F0Y2giLCJlIiwic2lsZW50UmVqZWN0aW9uIiwiZXJyb3IiLCIkcSIsInJlamVjdCIsIl9ob2ZfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsInRvU3RyIiwidGlzIiwiaXNVbmRlZmluZWQiLCJpc0RlZmluZWQiLCJpc051bGwiLCJpc051bGxPclVuZGVmaW5lZCIsImlzRnVuY3Rpb24iLCJpc051bWJlciIsImlzU3RyaW5nIiwiaXNPYmplY3QiLCJpc0FycmF5IiwiQXJyYXkiLCJpc0RhdGUiLCJpc1JlZ0V4cCIsImlzSW5qZWN0YWJsZSIsImhlYWQiLCJpc1Byb21pc2UiLCJjdXJyeSIsImluaXRpYWxfYXJncyIsImZ1bmNfYXJnc19sZW5ndGgiLCJjdXJyaWVkIiwiY29tcG9zZSIsInN0YXJ0IiwidGhpcyIsInBpcGUiLCJmdW5jcyIsIl9fd2VicGFja19leHBvcnRzX18iLCJwYXR0ZXJuIiwicHJvcCIsInByb3BFcSIsIl92YWwiLCJzcGxpdCIsIm5vdCIsImFuZCIsImZuMSIsImZuMiIsIm9yIiwiYWxsIiwiYW55IiwiaXMiLCJjdG9yIiwiY29uc3RydWN0b3IiLCJlcSIsIm90aGVyIiwidiIsImludm9rZSIsInN0cnVjdCIsIm5vdEltcGxlbWVudGVkIiwiZm5uYW1lIiwic2VydmljZXMiLCIkaW5qZWN0b3IiLCJjb250ZW50Iiwib3B0aW9ucyIsImhtciIsInRyYW5zZm9ybSIsImluc2VydEludG8iLCJsb2NhbHMiLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0NvbW1lbnQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiaWQiLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJtZW1vaXplIiwid2luZG93IiwiZG9jdW1lbnQiLCJhdG9iIiwiZ2V0RWxlbWVudCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50Iiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInN0eWxlc0luc2VydGVkQXRUb3AiLCJmaXhVcmxzIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJkb21TdHlsZSIsInJlZnMiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiY3JlYXRlU3R5bGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHJzIiwidHlwZSIsImFkZEF0dHJzIiwiZWwiLCJzZXRBdHRyaWJ1dGUiLCJ1cGRhdGUiLCJyZW1vdmUiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJhdXRvRml4VXJscyIsImNvbnZlcnRUb0Fic29sdXRlVXJscyIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInJlcGxhY2VUZXh0IiwidGV4dFN0b3JlIiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsIkJvb2xlYW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsImxvY2F0aW9uIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwibmV3VXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCIsImFwcCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJIb21lQ3RybCIsIlByb2ZpbGVDdHJsIiwibWluRXJyQ29uZmlnIiwib2JqZWN0TWF4RGVwdGgiLCJ1cmxFcnJvclBhcmFtc0VuYWJsZWQiLCJlcnJvckhhbmRsaW5nQ29uZmlnIiwiaXNWYWxpZE9iamVjdE1heERlcHRoIiwiTmFOIiwiaXNCb29sZWFuIiwibWF4RGVwdGgiLCJtaW5FcnIiLCJFcnJvckNvbnN0cnVjdG9yIiwicmVnZXgiLCJlcnJSZWdFeHAiLCJSZWdFeHAiLCJwYXJhbVByZWZpeCIsImNvZGUiLCJ0ZW1wbGF0ZSIsIm1lc3NhZ2UiLCJ0ZW1wbGF0ZUFyZ3MiLCJzbGljZUFyZ3MiLCJhcmciLCJ0b0RlYnVnU3RyaW5nIiwibWF0Y2giLCJtc2llIiwianFMaXRlIiwialF1ZXJ5IiwiYW5ndWxhck1vZHVsZSIsIlJFR0VYX1NUUklOR19SRUdFWFAiLCJWQUxJRElUWV9TVEFURV9QUk9QRVJUWSIsImxvd2VyY2FzZSIsInN0cmluZyIsInRvTG93ZXJDYXNlIiwidXBwZXJjYXNlIiwidG9VcHBlckNhc2UiLCJnZXRQcm90b3R5cGVPZiIsIm5nTWluRXJyIiwidWlkIiwiaXNBcnJheUxpa2UiLCJpc1dpbmRvdyIsIml0ZXJhdG9yIiwiY29udGV4dCIsImlzUHJpbWl0aXZlIiwiaXNCbGFua09iamVjdCIsImZvckVhY2hTb3J0ZWQiLCJzb3J0IiwicmV2ZXJzZVBhcmFtcyIsIml0ZXJhdG9yRm4iLCJuZXh0VWlkIiwic2V0SGFzaEtleSIsImgiLCIkJGhhc2hLZXkiLCJiYXNlRXh0ZW5kIiwiZHN0Iiwib2JqcyIsImRlZXAiLCJpaSIsImpqIiwiRGF0ZSIsInZhbHVlT2YiLCJub2RlTmFtZSIsImNsb25lTm9kZSIsImlzRWxlbWVudCIsImNsb25lIiwibWVyZ2UiLCJ0b0ludCIsInN0ciIsInBhcnNlSW50IiwiZG9jdW1lbnRNb2RlIiwiaXNOdW1iZXJOYU4iLCJOdW1iZXIiLCJpc05hTiIsIm51bSIsIiQiLCJ2YWx1ZUZuIiwiaGFzQ3VzdG9tVG9TdHJpbmciLCJpc0Vycm9yIiwiaXNTY29wZSIsIiRldmFsQXN5bmMiLCIkd2F0Y2giLCJpc1Byb21pc2VMaWtlIiwidGhlbiIsIiRpbmplY3QiLCJUWVBFRF9BUlJBWV9SRUdFWFAiLCJlc2NhcGVGb3JSZWdleHAiLCJub2RlIiwiYXR0ciIsIm5vZGVOYW1lXyIsImVsZW1lbnQiLCJpbmNsdWRlcyIsImFycmF5UmVtb3ZlIiwiZGVzdGluYXRpb24iLCJzdGFja1NvdXJjZSIsInN0YWNrRGVzdCIsImlzVHlwZWRBcnJheSIsImlzQXJyYXlCdWZmZXIiLCJjb3B5UmVjdXJzZSIsImNvcHlFbGVtZW50IiwibmVlZHNSZWN1cnNlIiwiYnVmZmVyIiwiYnl0ZU9mZnNldCIsImNvcGllZCIsIkFycmF5QnVmZmVyIiwiYnl0ZUxlbmd0aCIsIlVpbnQ4QXJyYXkiLCJzZXQiLCJyZSIsImxhc3RJbmRleCIsImNvcHlUeXBlIiwic2ltcGxlQ29tcGFyZSIsImEiLCJrZXlTZXQiLCJjcmVhdGVNYXAiLCJjaGFyQXQiLCJjc3AiLCJydWxlcyIsIm5nQ3NwRWxlbWVudCIsIm5nQ3NwQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwibm9VbnNhZmVFdmFsIiwibm9JbmxpbmVTdHlsZSIsIkZ1bmN0aW9uIiwianEiLCJuYW1lXyIsInByZWZpeCIsIm5nQXR0clByZWZpeGVzIiwiYXJyYXkxIiwiYXJyYXkyIiwic3RhcnRJbmRleCIsImN1cnJ5QXJncyIsInRvSnNvblJlcGxhY2VyIiwicHJldHR5IiwianNvbiIsIkFMTF9DT0xPTlMiLCJ0aW1lem9uZVRvT2Zmc2V0IiwidGltZXpvbmUiLCJmYWxsYmFjayIsInJlcXVlc3RlZFRpbWV6b25lT2Zmc2V0IiwiYWRkRGF0ZU1pbnV0ZXMiLCJkYXRlIiwibWludXRlcyIsInNldE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiY29udmVydFRpbWV6b25lVG9Mb2NhbCIsImRhdGVUaW1lem9uZU9mZnNldCIsImdldFRpbWV6b25lT2Zmc2V0Iiwic3RhcnRpbmdUYWciLCJlbXB0eSIsImVsZW1IdG1sIiwiYXBwZW5kIiwiaHRtbCIsIm5vZGVUeXBlIiwiTk9ERV9UWVBFX1RFWFQiLCJ0cnlEZWNvZGVVUklDb21wb25lbnQiLCJkZWNvZGVVUklDb21wb25lbnQiLCJwYXJzZUtleVZhbHVlIiwia2V5VmFsdWUiLCJzcGxpdFBvaW50Iiwic3Vic3RyaW5nIiwidG9LZXlWYWx1ZSIsImFycmF5VmFsdWUiLCJlbmNvZGVVcmlRdWVyeSIsImVuY29kZVVyaVNlZ21lbnQiLCJwY3RFbmNvZGVTcGFjZXMiLCJpc0F1dG9Cb290c3RyYXBBbGxvd2VkIiwic2NyaXB0IiwiY3VycmVudFNjcmlwdCIsIkhUTUxTY3JpcHRFbGVtZW50IiwiU1ZHU2NyaXB0RWxlbWVudCIsImF0dHJpYnV0ZXMiLCJnZXROYW1lZEl0ZW0iLCJldmVyeSIsIm9yaWdpbiIsImFsbG93QXV0b0Jvb3RzdHJhcCIsImFuZ3VsYXJJbml0IiwiYm9vdHN0cmFwIiwiYXBwRWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsImNhbmRpZGF0ZSIsImNvbnNvbGUiLCJzdHJpY3REaSIsIm5nQXR0ciIsImdldE5nQXR0cmlidXRlIiwiZG9Cb290c3RyYXAiLCJpbmplY3RvciIsInRhZyIsInVuc2hpZnQiLCIkcHJvdmlkZSIsImRlYnVnSW5mb0VuYWJsZWQiLCIkY29tcGlsZVByb3ZpZGVyIiwiY3JlYXRlSW5qZWN0b3IiLCJzY29wZSIsImNvbXBpbGUiLCIkYXBwbHkiLCJkYXRhIiwiTkdfRU5BQkxFX0RFQlVHX0lORk8iLCJOR19ERUZFUl9CT09UU1RSQVAiLCJyZXN1bWVCb290c3RyYXAiLCJleHRyYU1vZHVsZXMiLCJyZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCIsInJlbG9hZFdpdGhEZWJ1Z0luZm8iLCJyZWxvYWQiLCJnZXRUZXN0YWJpbGl0eSIsInJvb3RFbGVtZW50IiwiU05BS0VfQ0FTRV9SRUdFWFAiLCJzbmFrZV9jYXNlIiwic2VwYXJhdG9yIiwibGV0dGVyIiwicG9zIiwiYmluZEpRdWVyeUZpcmVkIiwiYXNzZXJ0QXJnIiwicmVhc29uIiwiYXNzZXJ0QXJnRm4iLCJhY2NlcHRBcnJheUFubm90YXRpb24iLCJhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSIsImdldEJsb2NrTm9kZXMiLCJub2RlcyIsImJsb2NrTm9kZXMiLCJlbmROb2RlIiwiTk9ERV9UWVBFX0VMRU1FTlQiLCJOT0RFX1RZUEVfQ09NTUVOVCIsIk5PREVfVFlQRV9ET0NVTUVOVCIsIk5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVCIsInNoYWxsb3dDb3B5Iiwic2VlbiIsInNlcmlhbGl6ZU9iamVjdCIsInZlcnNpb24iLCJmdWxsIiwibWFqb3IiLCJtaW5vciIsImRvdCIsImNvZGVOYW1lIiwiSlFMaXRlIiwiZXhwYW5kbyIsImpxQ2FjaGUiLCJjYWNoZSIsImpxSWQiLCJfZGF0YSIsIkRBU0hfTE9XRVJDQVNFX1JFR0VYUCIsIk1TX0hBQ0tfUkVHRVhQIiwiTU9VU0VfRVZFTlRfTUFQIiwibW91c2VsZWF2ZSIsIm1vdXNlZW50ZXIiLCJqcUxpdGVNaW5FcnIiLCJmbkNhbWVsQ2FzZVJlcGxhY2UiLCJrZWJhYlRvQ2FtZWwiLCJTSU5HTEVfVEFHX1JFR0VYUCIsIkhUTUxfUkVHRVhQIiwiVEFHX05BTUVfUkVHRVhQIiwiWEhUTUxfVEFHX1JFR0VYUCIsIndyYXBNYXAiLCJvcHRpb24iLCJ0aGVhZCIsImNvbCIsInRyIiwidGQiLCJfZGVmYXVsdCIsImpxTGl0ZUlzVGV4dE5vZGUiLCJqcUxpdGVBY2NlcHRzRGF0YSIsImpxTGl0ZUJ1aWxkRnJhZ21lbnQiLCJ0bXAiLCJ3cmFwIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiZXhlYyIsImlubmVySFRNTCIsImxhc3RDaGlsZCIsInRleHRDb250ZW50Iiwib3B0Z3JvdXAiLCJ0Ym9keSIsInRmb290IiwiY29sZ3JvdXAiLCJjYXB0aW9uIiwidGgiLCJqcUxpdGVDb250YWlucyIsIk5vZGUiLCJjb250YWlucyIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiYXJnSXNTdHJpbmciLCJqcUxpdGVBZGROb2RlcyIsInBhcnNlZCIsImpxTGl0ZVBhcnNlSFRNTCIsImpxTGl0ZVJlYWR5IiwianFMaXRlQ2xvbmUiLCJqcUxpdGVEZWFsb2MiLCJvbmx5RGVzY2VuZGFudHMiLCJjbGVhbkRhdGEiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXNFbXB0eU9iamVjdCIsInJlbW92ZUlmRW1wdHlEYXRhIiwiZXhwYW5kb0lkIiwibmczMzkiLCJleHBhbmRvU3RvcmUiLCJldmVudHMiLCJqcUxpdGVPZmYiLCJ1bnN1cHBvcnRlZCIsImpxTGl0ZUV4cGFuZG9TdG9yZSIsImhhbmRsZSIsInJlbW92ZUhhbmRsZXIiLCJsaXN0ZW5lckZucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJqcUxpdGVSZW1vdmVEYXRhIiwiY3JlYXRlSWZOZWNlc3NhcnkiLCJqcUxpdGVEYXRhIiwiaXNTaW1wbGVTZXR0ZXIiLCJpc1NpbXBsZUdldHRlciIsIm1hc3NHZXR0ZXIiLCJqcUxpdGVIYXNDbGFzcyIsInNlbGVjdG9yIiwianFMaXRlUmVtb3ZlQ2xhc3MiLCJjc3NDbGFzc2VzIiwiZXhpc3RpbmdDbGFzc2VzIiwibmV3Q2xhc3NlcyIsImNzc0NsYXNzIiwianFMaXRlQWRkQ2xhc3MiLCJlbGVtZW50cyIsImpxTGl0ZUNvbnRyb2xsZXIiLCJqcUxpdGVJbmhlcml0ZWREYXRhIiwiZG9jdW1lbnRFbGVtZW50IiwibmFtZXMiLCJqcUxpdGVFbXB0eSIsImpxTGl0ZVJlbW92ZSIsImtlZXBEYXRhIiwidHJpZ2dlciIsInJlYWR5U3RhdGUiLCJzZXRUaW1lb3V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkpRTGl0ZVByb3RvdHlwZSIsInJlYWR5IiwiQk9PTEVBTl9BVFRSIiwiQk9PTEVBTl9FTEVNRU5UUyIsIkFMSUFTRURfQVRUUiIsIm5nTWlubGVuZ3RoIiwibmdNYXhsZW5ndGgiLCJuZ01pbiIsIm5nTWF4IiwibmdQYXR0ZXJuIiwibmdTdGVwIiwiZ2V0Qm9vbGVhbkF0dHJOYW1lIiwiYm9vbGVhbkF0dHIiLCJkZWZhdWx0SGFuZGxlcldyYXBwZXIiLCJldmVudCIsImhhbmRsZXIiLCJzcGVjaWFsTW91c2VIYW5kbGVyV3JhcHBlciIsInJlbGF0ZWQiLCJyZWxhdGVkVGFyZ2V0IiwiJCRqcUxpdGVQcm92aWRlciIsIiRnZXQiLCJoYXNDbGFzcyIsImNsYXNzZXMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaGFzaEtleSIsIm5leHRVaWRGbiIsIm9ialR5cGUiLCJyZW1vdmVEYXRhIiwiaGFzRGF0YSIsImluaGVyaXRlZERhdGEiLCJpc29sYXRlU2NvcGUiLCJyZW1vdmVBdHRyIiwicmVtb3ZlQXR0cmlidXRlIiwiY3NzS2ViYWJUb0NhbWVsIiwicmV0IiwibG93ZXJjYXNlZE5hbWUiLCJpc0Jvb2xlYW5BdHRyIiwidGV4dCIsImdldFRleHQiLCIkZHYiLCJtdWx0aXBsZSIsInNlbGVjdGVkIiwiYXJnMSIsImFyZzIiLCJub2RlQ291bnQiLCJub2RlVmFsdWUiLCJvbiIsImV2ZW50SGFuZGxlciIsImlzRGVmYXVsdFByZXZlbnRlZCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJldmVudEZucyIsImV2ZW50Rm5zTGVuZ3RoIiwiaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkIiwib3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wUHJvcGFnYXRpb24iLCJpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCIsImhhbmRsZXJXcmFwcGVyIiwic3BlY2lhbEhhbmRsZXJXcmFwcGVyIiwiY3JlYXRlRXZlbnRIYW5kbGVyIiwidHlwZXMiLCJhZGRIYW5kbGVyIiwibm9FdmVudExpc3RlbmVyIiwib2ZmIiwib25lIiwib25GbiIsInJlcGxhY2VXaXRoIiwicmVwbGFjZU5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJjaGlsZHJlbiIsImNvbnRlbnRzIiwiY2hpbGQiLCJwcmVwZW5kIiwid3JhcE5vZGUiLCJ3cmFwcGVyIiwianFMaXRlV3JhcE5vZGUiLCJkZXRhY2giLCJhZnRlciIsIm5ld0VsZW1lbnQiLCJ0b2dnbGVDbGFzcyIsImNvbmRpdGlvbiIsImNsYXNzTmFtZSIsImNsYXNzQ29uZGl0aW9uIiwibmV4dCIsIm5leHRFbGVtZW50U2libGluZyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidHJpZ2dlckhhbmRsZXIiLCJleHRyYVBhcmFtZXRlcnMiLCJkdW1teUV2ZW50IiwiZXZlbnRGbnNDb3B5IiwiaGFuZGxlckFyZ3MiLCJldmVudE5hbWUiLCJwcmV2ZW50RGVmYXVsdCIsImFyZzMiLCJ1bmJpbmQiLCJuYW5LZXkiLCJOZ01hcFNoaW0iLCJfa2V5cyIsIl92YWx1ZXMiLCJfbGFzdEtleSIsIl9sYXN0SW5kZXgiLCJfaWR4IiwiX3RyYW5zZm9ybUtleSIsImRlbGV0ZSIsIk5nTWFwIiwiJCRNYXBQcm92aWRlciIsIkFSUk9XX0FSRyIsIkZOX0FSR1MiLCJGTl9BUkdfU1BMSVQiLCJGTl9BUkciLCJTVFJJUF9DT01NRU5UUyIsIiRpbmplY3Rvck1pbkVyciIsInN0cmluZ2lmeUZuIiwiZXh0cmFjdEFyZ3MiLCJmblRleHQiLCJtb2R1bGVzVG9Mb2FkIiwiSU5TVEFOVElBVElORyIsInByb3ZpZGVyU3VmZml4IiwibG9hZGVkTW9kdWxlcyIsInByb3ZpZGVyQ2FjaGUiLCJwcm92aWRlciIsInN1cHBvcnRPYmplY3QiLCJmYWN0b3J5Iiwic2VydmljZSIsImluc3RhbnRpYXRlIiwiY29uc3RhbnQiLCJpbnN0YW5jZUNhY2hlIiwiZGVjb3JhdG9yIiwic2VydmljZU5hbWUiLCJkZWNvckZuIiwib3JpZ1Byb3ZpZGVyIiwicHJvdmlkZXJJbmplY3RvciIsIm9yaWckZ2V0Iiwib3JpZ0luc3RhbmNlIiwiaW5zdGFuY2VJbmplY3RvciIsIiRkZWxlZ2F0ZSIsImNyZWF0ZUludGVybmFsSW5qZWN0b3IiLCJjYWxsZXIiLCJwcm90b0luc3RhbmNlSW5qZWN0b3IiLCJydW5CbG9ja3MiLCJsb2FkTW9kdWxlcyIsImxvYWROZXdNb2R1bGVzIiwibW9kcyIsImRlbGVnYXRlIiwicHJvdmlkZXJfIiwiZmFjdG9yeUZuIiwiZW5mb3JjZSIsImVuZm9yY2VSZXR1cm5WYWx1ZSIsIm1vZHVsZUZuIiwicmVxdWlyZXMiLCJfcnVuQmxvY2tzIiwicnVuSW52b2tlUXVldWUiLCJfaW52b2tlUXVldWUiLCJfY29uZmlnQmxvY2tzIiwic3RhY2siLCJxdWV1ZSIsImludm9rZUFyZ3MiLCJnZXRTZXJ2aWNlIiwiZXJyIiwic2hpZnQiLCJpbmplY3Rpb25BcmdzIiwiJCRhbm5vdGF0ZSIsImZ1bmMiLCIkJG5nSXNDbGFzcyIsImlzQ2xhc3MiLCJUeXBlIiwiYW5ub3RhdGUiLCJoYXMiLCIkQW5jaG9yU2Nyb2xsUHJvdmlkZXIiLCJhdXRvU2Nyb2xsaW5nRW5hYmxlZCIsImRpc2FibGVBdXRvU2Nyb2xsaW5nIiwiJHdpbmRvdyIsIiRsb2NhdGlvbiIsIiRyb290U2NvcGUiLCJzY3JvbGxUbyIsInNjcm9sbEludG9WaWV3Iiwib2Zmc2V0Iiwic2Nyb2xsIiwieU9mZnNldCIsImdldENvbXB1dGVkU3R5bGUiLCJwb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJvdHRvbSIsImdldFlPZmZzZXQiLCJlbGVtVG9wIiwidG9wIiwic2Nyb2xsQnkiLCJoYXNoIiwiZWxtIiwiZ2V0RWxlbWVudEJ5SWQiLCJzb21lIiwiZ2V0Rmlyc3RBbmNob3IiLCJnZXRFbGVtZW50c0J5TmFtZSIsIm5ld1ZhbCIsIm9sZFZhbCIsImFjdGlvbiIsIndpbiIsImpxTGl0ZURvY3VtZW50TG9hZGVkIiwibGFzdCIsImFub25GbiIsInVuZGVyc2NvcmUiLCIkYW5pbWF0ZU1pbkVyciIsIkVMRU1FTlRfTk9ERSIsIm1lcmdlQ2xhc3NlcyIsInByZXBhcmVBbmltYXRlT3B0aW9ucyIsIiQkQ29yZUFuaW1hdGVKc1Byb3ZpZGVyIiwiJCRDb3JlQW5pbWF0ZVF1ZXVlUHJvdmlkZXIiLCJwb3N0RGlnZXN0UXVldWUiLCJwb3N0RGlnZXN0RWxlbWVudHMiLCIkJEFuaW1hdGVSdW5uZXIiLCJlbmFibGVkIiwicGluIiwiZG9tT3BlcmF0aW9uIiwiZnJvbSIsInRvIiwiYWRkIiwiY2xhc3Nlc0FkZGVkIiwidXBkYXRlRGF0YSIsImNsYXNzZXNSZW1vdmVkIiwiJCRwb3N0RGlnZXN0IiwiaGFuZGxlQ1NTQ2xhc3NDaGFuZ2VzIiwiYWRkUmVtb3ZlQ2xhc3Nlc1Bvc3REaWdlc3QiLCJydW5uZXIiLCJjb21wbGV0ZSIsImNoYW5nZWQiLCJleGlzdGluZyIsImtsYXNzIiwic3BsaXRDbGFzc2VzIiwidG9BZGQiLCJ0b1JlbW92ZSIsInN0YXR1cyIsIiRBbmltYXRlUHJvdmlkZXIiLCJjbGFzc05hbWVGaWx0ZXIiLCJjdXN0b21GaWx0ZXIiLCIkJHJlZ2lzdGVyZWRBbmltYXRpb25zIiwicmVnaXN0ZXIiLCJzdWJzdHIiLCJmaWx0ZXJGbiIsImV4cHJlc3Npb24iLCIkJGFuaW1hdGVRdWV1ZSIsImRvbUluc2VydCIsInBhcmVudEVsZW1lbnQiLCJhZnRlckVsZW1lbnQiLCJhZnRlck5vZGUiLCJleHRyYWN0RWxlbWVudE5vZGUiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiY2FuY2VsIiwiZW50ZXIiLCJtb3ZlIiwibGVhdmUiLCJhZGRjbGFzcyIsInNldENsYXNzIiwiYW5pbWF0ZSIsInRlbXBDbGFzc2VzIiwiJCRBbmltYXRlQXN5bmNSdW5GYWN0b3J5UHJvdmlkZXIiLCIkJHJBRiIsIndhaXRRdWV1ZSIsIndhaXRGb3JUaWNrIiwicGFzc2VkIiwiJCRBbmltYXRlUnVubmVyRmFjdG9yeVByb3ZpZGVyIiwiJHNuaWZmZXIiLCIkJGFuaW1hdGVBc3luY1J1biIsIiQkaXNEb2N1bWVudEhpZGRlbiIsIiR0aW1lb3V0IiwiQW5pbWF0ZVJ1bm5lciIsInNldEhvc3QiLCJyYWZUaWNrIiwiX2RvbmVDYWxsYmFja3MiLCJfdGljayIsInRpbWVvdXRUaWNrIiwiX3N0YXRlIiwiY2hhaW4iLCJyZXNwb25zZSIsInJ1bm5lcnMiLCJjb3VudCIsIm9uUHJvZ3Jlc3MiLCJkb25lIiwicHJvZ3Jlc3MiLCJnZXRQcm9taXNlIiwicmVzb2x2ZSIsInJlc29sdmVIYW5kbGVyIiwicmVqZWN0SGFuZGxlciIsImZpbmFsbHkiLCJwYXVzZSIsInJlc3VtZSIsImVuZCIsIl9yZXNvbHZlIiwiJENvcmVBbmltYXRlQ3NzUHJvdmlkZXIiLCJpbml0aWFsT3B0aW9ucyIsIiQkcHJlcGFyZWQiLCJjbGVhbnVwU3R5bGVzIiwiY2xvc2VkIiwicnVuIiwiYXBwbHlBbmltYXRpb25Db250ZW50cyIsIiRCcm93c2VyUHJvdmlkZXIiLCIkbG9nIiwiJGRvY3VtZW50IiwiaGlzdG9yeSIsImNsZWFyVGltZW91dCIsInBlbmRpbmdEZWZlcklkcyIsImlzTW9jayIsIm91dHN0YW5kaW5nUmVxdWVzdENvdW50Iiwib3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzIiwiY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QiLCJwb3AiLCIkJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0IiwiJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCIsIm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMiLCJjYWNoZWRTdGF0ZSIsImxhc3RIaXN0b3J5U3RhdGUiLCJsYXN0QnJvd3NlclVybCIsImJhc2VFbGVtZW50IiwicGVuZGluZ0xvY2F0aW9uIiwiZ2V0Q3VycmVudFN0YXRlIiwiY2FjaGVTdGF0ZSIsInNhbWVTdGF0ZSIsInNhbWVCYXNlIiwic3RyaXBIYXNoIiwiZ2V0SGFzaCIsInVybENoYW5nZUxpc3RlbmVycyIsInVybENoYW5nZUluaXQiLCJjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSIsImZpcmVTdGF0ZU9yVXJsQ2hhbmdlIiwibGFzdENhY2hlZFN0YXRlIiwicHJldkxhc3RIaXN0b3J5U3RhdGUiLCJsaXN0ZW5lciIsIm9uVXJsQ2hhbmdlIiwiJCRhcHBsaWNhdGlvbkRlc3Ryb3llZCIsIiQkY2hlY2tVcmxDaGFuZ2UiLCJiYXNlSHJlZiIsImRlZmVyIiwiZGVsYXkiLCJ0aW1lb3V0SWQiLCJkZWZlcklkIiwiJENhY2hlRmFjdG9yeVByb3ZpZGVyIiwiY2FjaGVzIiwiY2FjaGVGYWN0b3J5IiwiY2FjaGVJZCIsInNpemUiLCJzdGF0cyIsImNhcGFjaXR5IiwiTUFYX1ZBTFVFIiwibHJ1SGFzaCIsImZyZXNoRW5kIiwic3RhbGVFbmQiLCJwdXQiLCJyZWZyZXNoIiwibHJ1RW50cnkiLCJyZW1vdmVBbGwiLCJkZXN0cm95IiwiaW5mbyIsImVudHJ5IiwibmV4dEVudHJ5IiwicHJldkVudHJ5IiwiJFRlbXBsYXRlQ2FjaGVQcm92aWRlciIsIiRjYWNoZUZhY3RvcnkiLCIkY29tcGlsZU1pbkVyciIsIl9VTklOSVRJQUxJWkVEX1ZBTFVFIiwiJENvbXBpbGVQcm92aWRlciIsIiQkc2FuaXRpemVVcmlQcm92aWRlciIsImhhc0RpcmVjdGl2ZXMiLCJTdWZmaXgiLCJDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAiLCJDTEFTU19ESVJFQ1RJVkVfUkVHRVhQIiwiQUxMX09SX05PVEhJTkdfQVRUUlMiLCJpdGVtcyIsIm1ha2VNYXAiLCJSRVFVSVJFX1BSRUZJWF9SRUdFWFAiLCJFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQIiwiYmluZGluZ0NhY2hlIiwicGFyc2VJc29sYXRlQmluZGluZ3MiLCJkaXJlY3RpdmVOYW1lIiwiaXNDb250cm9sbGVyIiwiTE9DQUxfUkVHRVhQIiwiYmluZGluZ3MiLCJkZWZpbml0aW9uIiwic2NvcGVOYW1lIiwib3B0aW9uYWwiLCJhdHRyTmFtZSIsInBhcnNlRGlyZWN0aXZlQmluZGluZ3MiLCJkaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwicmVnaXN0ZXJEaXJlY3RpdmUiLCJkaXJlY3RpdmVGYWN0b3J5IiwiYXNzZXJ0VmFsaWREaXJlY3RpdmVOYW1lIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLCJkaXJlY3RpdmVzIiwicHJpb3JpdHkiLCJyZXF1aXJlIiwiZ2V0RGlyZWN0aXZlUmVxdWlyZSIsInJlc3RyaWN0IiwiZ2V0RGlyZWN0aXZlUmVzdHJpY3QiLCIkJG1vZHVsZU5hbWUiLCJjb21wb25lbnQiLCJyZWdpc3RlckNvbXBvbmVudCIsIm1ha2VJbmplY3RhYmxlIiwidEVsZW1lbnQiLCJ0QXR0cnMiLCIkZWxlbWVudCIsIiRhdHRycyIsImRkbyIsImNvbnRyb2xsZXJBcyIsImlkZW50IiwiQ05UUkxfUkVHIiwiaWRlbnRpZmllckZvckNvbnRyb2xsZXIiLCJ0cmFuc2NsdWRlIiwiYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QiLCJyZWdleHAiLCJpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QiLCJzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQiLCJUVEwiLCJvbkNoYW5nZXNUdGwiLCJjb21tZW50RGlyZWN0aXZlc0VuYWJsZWRDb25maWciLCJjb21tZW50RGlyZWN0aXZlc0VuYWJsZWQiLCJjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkQ29uZmlnIiwiY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZCIsIiRpbnRlcnBvbGF0ZSIsIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkcGFyc2UiLCIkY29udHJvbGxlciIsIiRzY2UiLCIkYW5pbWF0ZSIsIm9uQ2hhbmdlc1F1ZXVlIiwiU0lNUExFX0FUVFJfTkFNRSIsInNwZWNpYWxBdHRySG9sZGVyIiwiZmx1c2hPbkNoYW5nZXNRdWV1ZSIsIkF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzVG9Db3B5IiwiJGF0dHIiLCIkJGVsZW1lbnQiLCJzYWZlQWRkQ2xhc3MiLCIkbm9ybWFsaXplIiwiZGlyZWN0aXZlTm9ybWFsaXplIiwiJGFkZENsYXNzIiwiY2xhc3NWYWwiLCIkcmVtb3ZlQ2xhc3MiLCIkdXBkYXRlQ2xhc3MiLCJvbGRDbGFzc2VzIiwidG9rZW5EaWZmZXJlbmNlIiwiJHNldCIsIndyaXRlQXR0ciIsImJvb2xlYW5LZXkiLCJhbGlhc2VkS2V5IiwiZ2V0QWxpYXNlZEF0dHJOYW1lIiwib2JzZXJ2ZXIiLCJ0cmltbWVkU3Jjc2V0IiwicmF3VXJpcyIsIm5iclVyaXNXaXRoMnBhcnRzIiwiZmxvb3IiLCJpbm5lcklkeCIsImdldFRydXN0ZWRNZWRpYVVybCIsImxhc3RUdXBsZSIsImF0dHJpYnV0ZSIsInJlbW92ZU5hbWVkSXRlbSIsInNldE5hbWVkSXRlbSIsInNldFNwZWNpYWxBdHRyIiwiJCRvYnNlcnZlcnMiLCIkb2JzZXJ2ZSIsImxpc3RlbmVycyIsIiQkaW50ZXIiLCJzdGFydFN5bWJvbCIsImVuZFN5bWJvbCIsImRlbm9ybWFsaXplVGVtcGxhdGUiLCJOR19BVFRSX0JJTkRJTkciLCJNVUxUSV9FTEVNRU5UX0RJUl9SRSIsIiQkYWRkQmluZGluZ0luZm8iLCJiaW5kaW5nIiwiJCRhZGRCaW5kaW5nQ2xhc3MiLCIkJGFkZFNjb3BlSW5mbyIsImlzb2xhdGVkIiwibm9UZW1wbGF0ZSIsImRhdGFOYW1lIiwiJCRhZGRTY29wZUNsYXNzIiwiJCRjcmVhdGVDb21tZW50IiwiY29tbWVudCIsImNyZWF0ZUNvbW1lbnQiLCIkY29tcGlsZU5vZGVzIiwidHJhbnNjbHVkZUZuIiwibWF4UHJpb3JpdHkiLCJpZ25vcmVEaXJlY3RpdmUiLCJwcmV2aW91c0NvbXBpbGVDb250ZXh0IiwiY29tcG9zaXRlTGlua0ZuIiwiY29tcGlsZU5vZGVzIiwibmFtZXNwYWNlIiwiY2xvbmVDb25uZWN0Rm4iLCJuZWVkc05ld1Njb3BlIiwiJHBhcmVudCIsIiRuZXciLCIkbGlua05vZGUiLCJwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiIsInRyYW5zY2x1ZGVDb250cm9sbGVycyIsImZ1dHVyZVBhcmVudEVsZW1lbnQiLCIkJGJvdW5kVHJhbnNjbHVkZSIsImRldGVjdE5hbWVzcGFjZUZvckNoaWxkRWxlbWVudHMiLCJ3cmFwVGVtcGxhdGUiLCJjb250cm9sbGVyTmFtZSIsImluc3RhbmNlIiwibm9kZUxpc3QiLCIkcm9vdEVsZW1lbnQiLCJub2RlTGlua0ZuIiwiY2hpbGRMaW5rRm4iLCJsaW5rRm5Gb3VuZCIsIm5vZGVMaW5rRm5Gb3VuZCIsImxpbmtGbnMiLCJub3RMaXZlTGlzdCIsIm1lcmdlQ29uc2VjdXRpdmVUZXh0Tm9kZXMiLCJjb2xsZWN0RGlyZWN0aXZlcyIsImFwcGx5RGlyZWN0aXZlc1RvTm9kZSIsInRlcm1pbmFsIiwidHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQiLCJ0ZW1wbGF0ZU9uVGhpc0VsZW1lbnQiLCJjaGlsZFNjb3BlIiwiY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiIsInN0YWJsZU5vZGVMaXN0Iiwibm9kZUxpc3RMZW5ndGgiLCJjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbiIsInNpYmxpbmciLCJwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuIiwiYm91bmRUcmFuc2NsdWRlRm4iLCJ0cmFuc2NsdWRlZFNjb3BlIiwiY2xvbmVGbiIsImNvbnRyb2xsZXJzIiwiY29udGFpbmluZ1Njb3BlIiwiJCR0cmFuc2NsdWRlZCIsImJvdW5kU2xvdHMiLCIkJHNsb3RzIiwic2xvdE5hbWUiLCJhdHRyc01hcCIsImFkZERpcmVjdGl2ZSIsIm5OYW1lIiwibmdBdHRyTmFtZSIsImlzTmdBdHRyIiwibkF0dHJzIiwiYXR0clN0YXJ0TmFtZSIsImF0dHJFbmROYW1lIiwiUFJFRklYX1JFR0VYUCIsIm11bHRpRWxlbWVudE1hdGNoIiwiZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQiLCJhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUiLCJhbmltVmFsIiwiaW50ZXJwb2xhdGVGbiIsInRlbXBsYXRlTm9kZSIsInRlbXBsYXRlTm9kZVBhcmVudCIsImhhc0NvbXBpbGVQYXJlbnQiLCJleHByZXNzaW9ucyIsImFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZSIsImNvbGxlY3RDb21tZW50RGlyZWN0aXZlcyIsImJ5UHJpb3JpdHkiLCJncm91cFNjYW4iLCJhdHRyU3RhcnQiLCJhdHRyRW5kIiwiZGVwdGgiLCJncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlciIsImxpbmtGbiIsImNvbXBpbGF0aW9uR2VuZXJhdG9yIiwiZWFnZXIiLCJjb21waWxlZCIsImNvbXBpbGVOb2RlIiwidGVtcGxhdGVBdHRycyIsImpxQ29sbGVjdGlvbiIsIm9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSIsInByZUxpbmtGbnMiLCJwb3N0TGlua0ZucyIsIiR0ZW1wbGF0ZSIsImRpcmVjdGl2ZVZhbHVlIiwidGVybWluYWxQcmlvcml0eSIsIm5ld1Njb3BlRGlyZWN0aXZlIiwiY29udHJvbGxlckRpcmVjdGl2ZXMiLCJuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUiLCJ0ZW1wbGF0ZURpcmVjdGl2ZSIsIm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUiLCJoYXNUcmFuc2NsdWRlRGlyZWN0aXZlIiwiaGFzVGVtcGxhdGUiLCJoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSIsIiRjb21waWxlTm9kZSIsInJlcGxhY2VEaXJlY3RpdmUiLCJjaGlsZFRyYW5zY2x1ZGVGbiIsImRpZFNjYW5Gb3JNdWx0aXBsZVRyYW5zY2x1c2lvbiIsIm1pZ2h0SGF2ZU11bHRpcGxlVHJhbnNjbHVzaW9uRXJyb3IiLCIkJHN0YXJ0IiwiJCRlbmQiLCJhc3NlcnROb0R1cGxpY2F0ZSIsIiQkdGxiIiwiY2FuZGlkYXRlRGlyZWN0aXZlIiwic2Nhbm5pbmdJbmRleCIsInNsb3RzIiwic2xvdE1hcCIsImZpbGxlZFNsb3RzIiwiZWxlbWVudFNlbGVjdG9yIiwiZmlsbGVkIiwiJCRpc29sYXRlU2NvcGUiLCIkJG5ld1Njb3BlIiwicmVtb3ZlQ29tbWVudHMiLCJ0ZW1wbGF0ZU5hbWVzcGFjZSIsIm5ld1RlbXBsYXRlQXR0cnMiLCJ0ZW1wbGF0ZURpcmVjdGl2ZXMiLCJ1bnByb2Nlc3NlZERpcmVjdGl2ZXMiLCJtYXJrRGlyZWN0aXZlU2NvcGUiLCJtZXJnZVRlbXBsYXRlQXR0cmlidXRlcyIsImNvbXBpbGVUZW1wbGF0ZVVybCIsIiQkb3JpZ2luYWxEaXJlY3RpdmUiLCJhZGRMaW5rRm5zIiwicHJlIiwicG9zdCIsIm1heCIsImNsb25lQW5kQW5ub3RhdGVGbiIsImxpbmtOb2RlIiwiY29udHJvbGxlclNjb3BlIiwiZWxlbWVudENvbnRyb2xsZXJzIiwic2NvcGVCaW5kaW5nSW5mbyIsImNsb25lQXR0YWNoRm4iLCJzY29wZVRvQ2hpbGQiLCJzbG90VHJhbnNjbHVkZUZuIiwiaXNTbG90RmlsbGVkIiwiY29udHJvbGxlcktleSIsIiRzY29wZSIsIiR0cmFuc2NsdWRlIiwiY29udHJvbGxlckluc3RhbmNlIiwic2V0dXBDb250cm9sbGVycyIsIiQkaXNvbGF0ZUJpbmRpbmdzIiwiaW5pdGlhbGl6ZURpcmVjdGl2ZUJpbmRpbmdzIiwicmVtb3ZlV2F0Y2hlcyIsIiRvbiIsImNvbnRyb2xsZXJEaXJlY3RpdmUiLCIkJGJpbmRpbmdzIiwiYmluZGluZ0luZm8iLCJnZXRDb250cm9sbGVycyIsIiRvbkNoYW5nZXMiLCJpbml0aWFsQ2hhbmdlcyIsIiRvbkluaXQiLCIkZG9DaGVjayIsIiRvbkRlc3Ryb3kiLCJpbnZva2VMaW5rRm4iLCIkcG9zdExpbmsiLCJpbmhlcml0VHlwZSIsIm5ld1Njb3BlIiwidERpcmVjdGl2ZXMiLCJzdGFydEF0dHJOYW1lIiwiZW5kQXR0ck5hbWUiLCJtdWx0aUVsZW1lbnQiLCJzcmNBdHRyIiwiZHN0QXR0ciIsImFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuIiwiYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuIiwibGlua1F1ZXVlIiwiYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSIsIm9yaWdBc3luY0RpcmVjdGl2ZSIsImRlcml2ZWRTeW5jRGlyZWN0aXZlIiwidGVtcFRlbXBsYXRlQXR0cnMiLCJiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlIiwibGlua1Jvb3RFbGVtZW50IiwiJCRkZXN0cm95ZWQiLCJpZ25vcmVDaGlsZExpbmtGbiIsImRpZmYiLCJ3aGF0IiwicHJldmlvdXNEaXJlY3RpdmUiLCJ3cmFwTW9kdWxlTmFtZUlmRGVmaW5lZCIsIm1vZHVsZU5hbWUiLCJ0cnVzdGVkQ29udGV4dCIsImF0dHJOb3JtYWxpemVkTmFtZSIsIkhUTUwiLCJSRVNPVVJDRV9VUkwiLCJNRURJQV9VUkwiLCJnZXRUcnVzdGVkQ29udGV4dCIsIm11c3RIYXZlRXhwcmVzc2lvbiIsImFsbE9yTm90aGluZyIsIm5ld1ZhbHVlIiwiJCRzY29wZSIsIm9sZFZhbHVlIiwiZWxlbWVudHNUb1JlbW92ZSIsIm5ld05vZGUiLCJmaXJzdEVsZW1lbnRUb1JlbW92ZSIsInJlbW92ZUNvdW50IiwiajIiLCJhbm5vdGF0aW9uIiwic3RyaWN0QmluZGluZ3NDaGVjayIsImNoYW5nZXMiLCJyZW1vdmVXYXRjaENvbGxlY3Rpb24iLCJyZWNvcmRDaGFuZ2VzIiwiY3VycmVudFZhbHVlIiwicHJldmlvdXNWYWx1ZSIsInRyaWdnZXJPbkNoYW5nZXNIb29rIiwiU2ltcGxlQ2hhbmdlIiwibGFzdFZhbHVlIiwicGFyZW50R2V0IiwicGFyZW50U2V0IiwiY29tcGFyZSIsInJlbW92ZVdhdGNoIiwibGl0ZXJhbCIsInBhcmVudFZhbHVlV2F0Y2giLCJwYXJlbnRWYWx1ZSIsIiRzdGF0ZWZ1bCIsIiR3YXRjaENvbGxlY3Rpb24iLCJpc0xpdGVyYWwiLCJpbml0aWFsVmFsdWUiLCJwcmV2aW91cyIsImN1cnJlbnQiLCJpc0ZpcnN0Q2hhbmdlIiwiU1BFQ0lBTF9DSEFSU19SRUdFWFAiLCJfIiwic3RyMSIsInN0cjIiLCJ0b2tlbnMxIiwidG9rZW5zMiIsIm91dGVyIiwianFOb2RlcyIsIiRjb250cm9sbGVyTWluRXJyIiwiJENvbnRyb2xsZXJQcm92aWRlciIsImxhdGVyIiwiaWRlbnRpZmllciIsImJpbmRGblRvU2NvcGUiLCJsYXN0SW5zdGFuY2UiLCJsZW4iLCJjb250cm9sbGVyUHJvdG90eXBlIiwiYWRkSWRlbnRpZmllciIsIiREb2N1bWVudFByb3ZpZGVyIiwiJCRJc0RvY3VtZW50SGlkZGVuUHJvdmlkZXIiLCJkb2MiLCJoaWRkZW4iLCJjaGFuZ2VMaXN0ZW5lciIsIiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIiLCJleGNlcHRpb24iLCJjYXVzZSIsIiQkRm9yY2VSZWZsb3dQcm92aWRlciIsImRvbU5vZGUiLCJib2R5Iiwib2Zmc2V0V2lkdGgiLCJBUFBMSUNBVElPTl9KU09OIiwiQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04iLCJDb250ZW50LVR5cGUiLCJKU09OX1NUQVJUIiwiSlNPTl9FTkRTIiwiWyIsInsiLCJKU09OX1BST1RFQ1RJT05fUFJFRklYIiwiJGh0dHBNaW5FcnIiLCJzZXJpYWxpemVWYWx1ZSIsInRvSVNPU3RyaW5nIiwiJEh0dHBQYXJhbVNlcmlhbGl6ZXJQcm92aWRlciIsInBhcmFtcyIsIiRIdHRwUGFyYW1TZXJpYWxpemVySlFMaWtlUHJvdmlkZXIiLCJzZXJpYWxpemUiLCJ0b1NlcmlhbGl6ZSIsInRvcExldmVsIiwiZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybSIsImhlYWRlcnMiLCJ0ZW1wRGF0YSIsImNvbnRlbnRUeXBlIiwiaGFzSnNvbkNvbnRlbnRUeXBlIiwianNvblN0YXJ0IiwiaXNKc29uTGlrZSIsInBhcnNlSGVhZGVycyIsImZpbGxJblBhcnNlZCIsImxpbmUiLCJoZWFkZXJWYWwiLCJoZWFkZXJLZXkiLCJoZWFkZXJzR2V0dGVyIiwiaGVhZGVyc09iaiIsInRyYW5zZm9ybURhdGEiLCJmbnMiLCJpc1N1Y2Nlc3MiLCIkSHR0cFByb3ZpZGVyIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaXNGaWxlIiwiaXNCbG9iIiwiaXNGb3JtRGF0YSIsImNvbW1vbiIsIkFjY2VwdCIsInBhdGNoIiwieHNyZkNvb2tpZU5hbWUiLCJ4c3JmSGVhZGVyTmFtZSIsInBhcmFtU2VyaWFsaXplciIsImpzb25wQ2FsbGJhY2tQYXJhbSIsInVzZUFwcGx5QXN5bmMiLCJpbnRlcmNlcHRvckZhY3RvcmllcyIsImludGVyY2VwdG9ycyIsInhzcmZXaGl0ZWxpc3RlZE9yaWdpbnMiLCIkYnJvd3NlciIsIiRodHRwQmFja2VuZCIsIiQkY29va2llUmVhZGVyIiwiZGVmYXVsdENhY2hlIiwicmV2ZXJzZWRJbnRlcmNlcHRvcnMiLCJpbnRlcmNlcHRvckZhY3RvcnkiLCJ1cmxJc0FsbG93ZWRPcmlnaW4iLCJ3aGl0ZWxpc3RlZE9yaWdpblVybHMiLCJwYXJzZWRBbGxvd2VkT3JpZ2luVXJscyIsIm9yaWdpblVybCIsInVybFJlc29sdmUiLCJyZXF1ZXN0VXJsIiwicGFyc2VkVXJsIiwidXJsc0FyZVNhbWVPcmlnaW4iLCJ1cmxJc0FsbG93ZWRPcmlnaW5GYWN0b3J5IiwiJGh0dHAiLCJyZXF1ZXN0Q29uZmlnIiwibWV0aG9kIiwiZGVmSGVhZGVyTmFtZSIsImxvd2VyY2FzZURlZkhlYWRlck5hbWUiLCJyZXFIZWFkZXJOYW1lIiwiZGVmSGVhZGVycyIsInJlcUhlYWRlcnMiLCJkZWZhdWx0SGVhZGVyc0l0ZXJhdGlvbiIsImhlYWRlckNvbnRlbnQiLCJwcm9jZXNzZWRIZWFkZXJzIiwiaGVhZGVyRm4iLCJoZWFkZXIiLCJleGVjdXRlSGVhZGVyRm5zIiwibWVyZ2VIZWFkZXJzIiwicmVxdWVzdEludGVyY2VwdG9ycyIsInJlc3BvbnNlSW50ZXJjZXB0b3JzIiwiaW50ZXJjZXB0b3IiLCJyZXF1ZXN0IiwicmVxdWVzdEVycm9yIiwicmVzcG9uc2VFcnJvciIsImNoYWluSW50ZXJjZXB0b3JzIiwicmVxRGF0YSIsIndpdGhDcmVkZW50aWFscyIsImNhY2hlZFJlc3AiLCJkZWZlcnJlZCIsImlzSnNvbnAiLCJnZXRUcnVzdGVkUmVzb3VyY2VVcmwiLCJzZXJpYWxpemVkUGFyYW1zIiwiYnVpbGRVcmwiLCJjYktleSIsInNhbml0aXplSnNvbnBDYWxsYmFja1BhcmFtIiwicGVuZGluZ1JlcXVlc3RzIiwicmVtb3ZlUGVuZGluZ1JlcSIsInJlc29sdmVQcm9taXNlV2l0aFJlc3VsdCIsInJlc29sdmVQcm9taXNlIiwieHNyZlZhbHVlIiwiaGVhZGVyc1N0cmluZyIsInN0YXR1c1RleHQiLCJ4aHJTdGF0dXMiLCJyZXNvbHZlSHR0cFByb21pc2UiLCIkYXBwbHlBc3luYyIsIiQkcGhhc2UiLCJ0aW1lb3V0IiwicmVzcG9uc2VUeXBlIiwiY3JlYXRlQXBwbHlIYW5kbGVycyIsImV2ZW50SGFuZGxlcnMiLCJ1cGxvYWRFdmVudEhhbmRsZXJzIiwiYXBwbHlIYW5kbGVycyIsImNhbGxFdmVudEhhbmRsZXIiLCJzZW5kUmVxIiwidGhlbkZuIiwicmVqZWN0Rm4iLCJyZXNwIiwiY3JlYXRlU2hvcnRNZXRob2RzIiwiY3JlYXRlU2hvcnRNZXRob2RzV2l0aERhdGEiLCIkeGhyRmFjdG9yeVByb3ZpZGVyIiwiWE1MSHR0cFJlcXVlc3QiLCIkSHR0cEJhY2tlbmRQcm92aWRlciIsIiRqc29ucENhbGxiYWNrcyIsIiR4aHJGYWN0b3J5IiwiY3JlYXRlWGhyIiwiJGJyb3dzZXJEZWZlciIsImNhbGxiYWNrcyIsInJhd0RvY3VtZW50IiwiY2FsbGJhY2tQYXRoIiwiY3JlYXRlQ2FsbGJhY2siLCJqc29ucERvbmUiLCJhc3luYyIsIndhc0NhbGxlZCIsImpzb25wUmVxIiwiZ2V0UmVzcG9uc2UiLCJjb21wbGV0ZVJlcXVlc3QiLCJyZW1vdmVDYWxsYmFjayIsInhociIsImFib3J0ZWRCeVRpbWVvdXQiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsInJlc3BvbnNlVGV4dCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJvbmFib3J0IiwidXBsb2FkIiwic2VuZCIsInRpbWVvdXRSZXF1ZXN0IiwiJCR0aW1lb3V0SWQiLCJhYm9ydCIsImNyZWF0ZUh0dHBCYWNrZW5kIiwiJGludGVycG9sYXRlTWluRXJyIiwiJEludGVycG9sYXRlUHJvdmlkZXIiLCJzdGFydFN5bWJvbExlbmd0aCIsImVuZFN5bWJvbExlbmd0aCIsImVzY2FwZWRTdGFydFJlZ2V4cCIsImVzY2FwZSIsImVzY2FwZWRFbmRSZWdleHAiLCJjaCIsInVuZXNjYXBlVGV4dCIsImNvbnN0YW50V2F0Y2hEZWxlZ2F0ZSIsIm9iamVjdEVxdWFsaXR5IiwiY29uc3RhbnRJbnRlcnAiLCJ1bndhdGNoIiwiY29udGV4dEFsbG93c0NvbmNhdGVuYXRpb24iLCJ1bmVzY2FwZWRUZXh0IiwiZ2V0VHJ1c3RlZCIsImV4cCIsIiQkd2F0Y2hEZWxlZ2F0ZSIsImVuZEluZGV4IiwicGFyc2VGbnMiLCJzaW5nbGVFeHByZXNzaW9uIiwidGV4dExlbmd0aCIsImV4cHJlc3Npb25Qb3NpdGlvbnMiLCJpbnRlcnIiLCJjb21wdXRlIiwidGhyb3dOb2NvbmNhdCIsIiR3YXRjaEdyb3VwIiwib2xkVmFsdWVzIiwiY3VyclZhbHVlIiwiJGludGVydmFsTWluRXJyIiwiJEludGVydmFsUHJvdmlkZXIiLCIkJHEiLCJpbnRlcnZhbHMiLCJpbnRlcnZhbCIsImludm9rZUFwcGx5IiwiaGFzUGFyYW1zIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiaXRlcmF0aW9uIiwic2tpcEFwcGx5IiwiJCRpbnRlcnZhbElkIiwibm90aWZ5IiwibWFya1FFeGNlcHRpb25IYW5kbGVkIiwiJGpzb25wQ2FsbGJhY2tzUHJvdmlkZXIiLCJjYWxsYmFja01hcCIsImNhbGxiYWNrSWQiLCIkJGNvdW50ZXIiLCJjYWxsZWQiLCJQQVRIX01BVENIIiwiREVGQVVMVF9QT1JUUyIsImh0dHAiLCJodHRwcyIsImZ0cCIsIiRsb2NhdGlvbk1pbkVyciIsImVuY29kZVBhdGgiLCJzZWdtZW50cyIsInBhcnNlQWJzb2x1dGVVcmwiLCJhYnNvbHV0ZVVybCIsImxvY2F0aW9uT2JqIiwiJCRwcm90b2NvbCIsIiQkaG9zdCIsImhvc3RuYW1lIiwiJCRwb3J0IiwicG9ydCIsIkRPVUJMRV9TTEFTSF9SRUdFWCIsInBhcnNlQXBwVXJsIiwiaHRtbDVNb2RlIiwicHJlZml4ZWQiLCIkJHBhdGgiLCJkZWNvZGVQYXRoIiwiJCRzZWFyY2giLCJzZWFyY2giLCIkJGhhc2giLCJzdGFydHNXaXRoIiwic3RyaXBCYXNlVXJsIiwidHJpbUVtcHR5SGFzaCIsIkxvY2F0aW9uSHRtbDVVcmwiLCJhcHBCYXNlIiwiYXBwQmFzZU5vRmlsZSIsImJhc2VQcmVmaXgiLCIkJGh0bWw1IiwiJCRwYXJzZSIsInBhdGhVcmwiLCIkJGNvbXBvc2UiLCIkJHVybCIsIiQkYWJzVXJsIiwiJCR1cmxVcGRhdGVkQnlMb2NhdGlvbiIsIiQkcGFyc2VMaW5rVXJsIiwicmVsSHJlZiIsImFwcFVybCIsInByZXZBcHBVcmwiLCJyZXdyaXR0ZW5VcmwiLCJMb2NhdGlvbkhhc2hiYW5nVXJsIiwiaGFzaFByZWZpeCIsIndpdGhvdXRIYXNoVXJsIiwid2l0aG91dEJhc2VVcmwiLCJmaXJzdFBhdGhTZWdtZW50TWF0Y2giLCJ3aW5kb3dzRmlsZVBhdGhFeHAiLCJyZW1vdmVXaW5kb3dzRHJpdmVOYW1lIiwiTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmwiLCJsb2NhdGlvblByb3RvdHlwZSIsIiQkcmVwbGFjZSIsImFic1VybCIsImxvY2F0aW9uR2V0dGVyIiwibG9jYXRpb25HZXR0ZXJTZXR0ZXIiLCJwYXJhbVZhbHVlIiwicHJlcHJvY2VzcyIsIiRMb2NhdGlvblByb3ZpZGVyIiwicmVxdWlyZUJhc2UiLCJyZXdyaXRlTGlua3MiLCJMb2NhdGlvbk1vZGUiLCJpbml0aWFsVXJsIiwic2VydmVyQmFzZSIsImxhc3RJbmRleE9mIiwic3RyaXBGaWxlIiwiJCRzdGF0ZSIsIklHTk9SRV9VUklfUkVHRVhQIiwic2V0QnJvd3NlclVybFdpdGhGYWxsYmFjayIsIm9sZFVybCIsIm9sZFN0YXRlIiwiY3RybEtleSIsIm1ldGFLZXkiLCJzaGlmdEtleSIsIndoaWNoIiwiYnV0dG9uIiwiYWJzSHJlZiIsImluaXRpYWxpemluZyIsIm5ld1N0YXRlIiwiJGJyb2FkY2FzdCIsImFmdGVyTG9jYXRpb25DaGFuZ2UiLCIkZGlnZXN0IiwiY3VycmVudFJlcGxhY2UiLCJ1cmxPclN0YXRlQ2hhbmdlZCIsIiRMb2dQcm92aWRlciIsImRlYnVnIiwiZGVidWdFbmFibGVkIiwiZmxhZyIsImZvcm1hdFN0YWNrVHJhY2UiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJsb2ciLCJjb25zb2xlTG9nIiwid2FybiIsImxvZ0ZuIiwic291cmNlVVJMIiwiZm9ybWF0RXJyb3IiLCJMb2NhdGlvbiIsIiRwYXJzZU1pbkVyciIsIm9iamVjdFZhbHVlT2YiLCJnZXRTdHJpbmdWYWx1ZSIsIk9QRVJBVE9SUyIsIm9wZXJhdG9yIiwiRVNDQVBFIiwiZiIsIiciLCJcIiIsIkxleGVyIiwibGV4IiwidG9rZW5zIiwicmVhZFN0cmluZyIsInBlZWsiLCJyZWFkTnVtYmVyIiwiaXNJZGVudGlmaWVyU3RhcnQiLCJwZWVrTXVsdGljaGFyIiwicmVhZElkZW50IiwiaXNXaGl0ZXNwYWNlIiwiY2gyIiwiY2gzIiwib3AxIiwib3AyIiwib3AzIiwidGhyb3dFcnJvciIsImNoYXJzIiwiY29kZVBvaW50QXQiLCJpc1ZhbGlkSWRlbnRpZmllclN0YXJ0IiwiaXNJZGVudGlmaWVyQ29udGludWUiLCJpc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlIiwiY3AiLCJjaGFyQ29kZUF0IiwiY3AxIiwiY3AyIiwiaXNFeHBPcGVyYXRvciIsImNvbFN0ciIsIm51bWJlciIsInBlZWtDaCIsInF1b3RlIiwicmF3U3RyaW5nIiwiaGV4IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiQVNUIiwibGV4ZXIiLCJpZkRlZmluZWQiLCJwbHVzRm4iLCJQcm9ncmFtIiwiRXhwcmVzc2lvblN0YXRlbWVudCIsIkFzc2lnbm1lbnRFeHByZXNzaW9uIiwiQ29uZGl0aW9uYWxFeHByZXNzaW9uIiwiTG9naWNhbEV4cHJlc3Npb24iLCJCaW5hcnlFeHByZXNzaW9uIiwiVW5hcnlFeHByZXNzaW9uIiwiQ2FsbEV4cHJlc3Npb24iLCJNZW1iZXJFeHByZXNzaW9uIiwiSWRlbnRpZmllciIsIkxpdGVyYWwiLCJBcnJheUV4cHJlc3Npb24iLCJQcm9wZXJ0eSIsIk9iamVjdEV4cHJlc3Npb24iLCJUaGlzRXhwcmVzc2lvbiIsIkxvY2Fsc0V4cHJlc3Npb24iLCJOR1ZhbHVlUGFyYW1ldGVyIiwiYXN0IiwicHJvZ3JhbSIsImV4cHJlc3Npb25TdGF0ZW1lbnQiLCJleHBlY3QiLCJmaWx0ZXJDaGFpbiIsImxlZnQiLCJhc3NpZ25tZW50IiwidGVybmFyeSIsImlzQXNzaWduYWJsZSIsInJpZ2h0IiwiYWx0ZXJuYXRlIiwiY29uc2VxdWVudCIsImxvZ2ljYWxPUiIsImNvbnN1bWUiLCJsb2dpY2FsQU5EIiwiZXF1YWxpdHkiLCJyZWxhdGlvbmFsIiwiYWRkaXRpdmUiLCJtdWx0aXBsaWNhdGl2ZSIsInVuYXJ5IiwiYXJndW1lbnQiLCJwcmltYXJ5IiwiYXJyYXlEZWNsYXJhdGlvbiIsInNlbGZSZWZlcmVudGlhbCIsImxpdGVyYWxzIiwiY2FsbGVlIiwicGFyc2VBcmd1bWVudHMiLCJjb21wdXRlZCIsImJhc2VFeHByZXNzaW9uIiwicGVla1Rva2VuIiwicHJvcGVydGllcyIsImtpbmQiLCJtc2ciLCJlMSIsImUyIiwiZTMiLCJlNCIsInBlZWtBaGVhZCIsIiRsb2NhbHMiLCJQVVJJVFlfQUJTT0xVVEUiLCJQVVJJVFlfUkVMQVRJVkUiLCJmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zIiwiJGZpbHRlciIsInBhcmVudElzUHVyZSIsImFsbENvbnN0YW50cyIsImFyZ3NUb1dhdGNoIiwiaXNTdGF0ZWxlc3NGaWx0ZXIiLCJhc3RJc1B1cmUiLCJpc1B1cmUiLCJleHByIiwidG9XYXRjaCIsImZpbHRlck5hbWUiLCJpc1N0YXRlbGVzcyIsImdldElucHV0cyIsImxhc3RFeHByZXNzaW9uIiwiYXNzaWduYWJsZUFTVCIsIkFTVENvbXBpbGVyIiwiQVNUSW50ZXJwcmV0ZXIiLCJQYXJzZXIiLCJhc3RDb21waWxlciIsImdldFZhbHVlT2YiLCIkUGFyc2VQcm92aWRlciIsImlkZW50U3RhcnQiLCJpZGVudENvbnRpbnVlIiwidHJ1ZSIsImZhbHNlIiwibnVsbCIsImFkZExpdGVyYWwiLCJsaXRlcmFsTmFtZSIsImxpdGVyYWxWYWx1ZSIsInNldElkZW50aWZpZXJGbnMiLCJpZGVudGlmaWVyU3RhcnQiLCJpZGVudGlmaWVyQ29udGludWUiLCIkcGFyc2VPcHRpb25zIiwiJCRnZXRBc3QiLCJnZXRBc3QiLCJpbnRlcmNlcHRvckZuIiwicGFyc2VkRXhwcmVzc2lvbiIsImNhY2hlS2V5IiwiYWRkV2F0Y2hEZWxlZ2F0ZSIsImFkZEludGVyY2VwdG9yIiwiZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayIsIm9sZFZhbHVlT2ZWYWx1ZSIsImNvbXBhcmVPYmplY3RJZGVudGl0eSIsImlucHV0c1dhdGNoRGVsZWdhdGUiLCJwcmV0dHlQcmludEV4cHJlc3Npb24iLCJsYXN0UmVzdWx0IiwiaW5wdXRFeHByZXNzaW9ucyIsImlucHV0cyIsIm9sZElucHV0VmFsdWVPZiIsIm5ld0lucHV0VmFsdWUiLCJvbGRJbnB1dFZhbHVlT2ZWYWx1ZXMiLCJvbGRJbnB1dFZhbHVlcyIsIm9uZVRpbWVXYXRjaERlbGVnYXRlIiwiaXNEb25lIiwiaXNBbGxEZWZpbmVkIiwiJCRpbnRlcmNlcHRlZCIsIiQkaW50ZXJjZXB0b3IiLCJ1c2VJbnB1dHMiLCJvbmVUaW1lV2F0Y2giLCJ1bndhdGNoSWZEb25lIiwiYWxsRGVmaW5lZCIsIm9uZVRpbWUiLCJjaGFpbmVkSW50ZXJjZXB0b3IiLCIkJHB1cmUiLCIkUVByb3ZpZGVyIiwiZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMiLCJxRmFjdG9yeSIsIiQkUVByb3ZpZGVyIiwibmV4dFRpY2siLCJleGNlcHRpb25IYW5kbGVyIiwiJHFNaW5FcnIiLCJUeXBlRXJyb3IiLCJxdWV1ZVNpemUiLCJjaGVja1F1ZXVlIiwiUHJvbWlzZSIsInJlamVjdFByb21pc2UiLCJub3RpZnlQcm9taXNlIiwicHJvY2Vzc0NoZWNrcyIsInRvQ2hlY2siLCJpc1N0YXRlRXhjZXB0aW9uSGFuZGxlZCIsIm1hcmtRU3RhdGVFeGNlcHRpb25IYW5kbGVkIiwiZXJyb3JNZXNzYWdlIiwic2NoZWR1bGVQcm9jZXNzUXVldWUiLCJwZW5kaW5nIiwicHJvY2Vzc1NjaGVkdWxlZCIsIiQkcGFzc1RvRXhjZXB0aW9uSGFuZGxlciIsInByb2Nlc3NRdWV1ZSIsIiQkcmVqZWN0IiwiJCRyZXNvbHZlIiwiZG9SZXNvbHZlIiwiZG9SZWplY3QiLCJoYW5kbGVDYWxsYmFjayIsInJlc29sdmVyIiwiY2FsbGJhY2tPdXRwdXQiLCJ3aGVuIiwiZXJyYmFjayIsInByb2dyZXNzQmFjayIsIm9uRnVsZmlsbGVkIiwib25SZWplY3RlZCIsIiRRIiwicHJvbWlzZXMiLCJjb3VudGVyIiwicmVzdWx0cyIsInJhY2UiLCJwdXIiLCJxIiwiJCRSQUZQcm92aWRlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyYWZTdXBwb3J0ZWQiLCJyYWYiLCJ0aW1lciIsInN1cHBvcnRlZCIsIiRSb290U2NvcGVQcm92aWRlciIsIiRyb290U2NvcGVNaW5FcnIiLCJsYXN0RGlydHlXYXRjaCIsImFwcGx5QXN5bmNJZCIsImRpZ2VzdFR0bCIsImRlc3Ryb3lDaGlsZFNjb3BlIiwiJGV2ZW50IiwiY3VycmVudFNjb3BlIiwiU2NvcGUiLCIkaWQiLCIkJHdhdGNoZXJzIiwiJCRuZXh0U2libGluZyIsIiQkcHJldlNpYmxpbmciLCIkJGNoaWxkSGVhZCIsIiQkY2hpbGRUYWlsIiwiJHJvb3QiLCIkJHN1c3BlbmRlZCIsIiQkbGlzdGVuZXJzIiwiJCRsaXN0ZW5lckNvdW50IiwiJCR3YXRjaGVyc0NvdW50IiwiaXNvbGF0ZSIsIiQkQ2hpbGRTY29wZSIsIkNoaWxkU2NvcGUiLCJjcmVhdGVDaGlsZFNjb3BlQ2xhc3MiLCJ3YXRjaEV4cCIsIndhdGNoZXIiLCJpbml0V2F0Y2hWYWwiLCIkJGRpZ2VzdFdhdGNoSW5kZXgiLCJpbmNyZW1lbnRXYXRjaGVyc0NvdW50Iiwid2F0Y2hFeHByZXNzaW9ucyIsIm5ld1ZhbHVlcyIsImRlcmVnaXN0ZXJGbnMiLCJjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCIsImZpcnN0UnVuIiwic2hvdWxkQ2FsbCIsIndhdGNoR3JvdXBBY3Rpb24iLCJ1bndhdGNoRm4iLCIkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IiLCJ2ZXJ5T2xkVmFsdWUiLCJ0cmFja1ZlcnlPbGRWYWx1ZSIsImNoYW5nZURldGVjdGVkIiwiY2hhbmdlRGV0ZWN0b3IiLCJpbnRlcm5hbEFycmF5IiwiaW50ZXJuYWxPYmplY3QiLCJpbml0UnVuIiwib2xkTGVuZ3RoIiwiX3ZhbHVlIiwibmV3TGVuZ3RoIiwibmV3SXRlbSIsIm9sZEl0ZW0iLCJ3YXRjaCIsIndhdGNoZXJzIiwiZGlydHkiLCJsb2dJZHgiLCJhc3luY1Rhc2siLCJ0dGwiLCJhc3luY1F1ZXVlIiwid2F0Y2hMb2ciLCJiZWdpblBoYXNlIiwiZmx1c2hBcHBseUFzeW5jIiwiYXN5bmNRdWV1ZVBvc2l0aW9uIiwidHJhdmVyc2VTY29wZXNMb29wIiwiY2xlYXJQaGFzZSIsInBvc3REaWdlc3RRdWV1ZVBvc2l0aW9uIiwiJHN1c3BlbmQiLCIkaXNTdXNwZW5kZWQiLCIkcmVzdW1lIiwiJGRlc3Ryb3kiLCJkZWNyZW1lbnRMaXN0ZW5lckNvdW50IiwiY2xlYW5VcFNjb3BlIiwiJGV2YWwiLCJhcHBseUFzeW5jUXVldWUiLCJuYW1lZExpc3RlbmVycyIsImluZGV4T2ZMaXN0ZW5lciIsIiRlbWl0IiwidGFyZ2V0U2NvcGUiLCJsaXN0ZW5lckFyZ3MiLCIkJGFzeW5jUXVldWUiLCIkJHBvc3REaWdlc3RRdWV1ZSIsIiQkYXBwbHlBc3luY1F1ZXVlIiwicGhhc2UiLCIkJFNhbml0aXplVXJpUHJvdmlkZXIiLCJ1cmkiLCJpc01lZGlhVXJsIiwibm9ybWFsaXplZFZhbCIsIm5leHRJZCIsImZpbHRlcnMiLCJ2YXJzIiwib3duIiwiYXNzaWduYWJsZSIsInN0YWdlIiwiY29tcHV0aW5nIiwicmVjdXJzZSIsInJldHVybl8iLCJnZW5lcmF0ZUZ1bmN0aW9uIiwiZm5LZXkiLCJpbnRvSWQiLCJ3YXRjaElkIiwiZm5TdHJpbmciLCJVU0UiLCJTVFJJQ1QiLCJmaWx0ZXJQcmVmaXgiLCJ3YXRjaEZucyIsImlucHV0IiwidmFyc1ByZWZpeCIsInNlY3Rpb24iLCJuYW1lSWQiLCJyZWN1cnNpb25GbiIsInNraXBXYXRjaElkQ2hlY2siLCJpZl8iLCJsYXp5QXNzaWduIiwiY29tcHV0ZWRNZW1iZXIiLCJsYXp5UmVjdXJzZSIsInBsdXMiLCJnZXRIYXNPd25Qcm9wZXJ0eSIsIm5vbkNvbXB1dGVkTWVtYmVyIiwibm90TnVsbCIsIm1lbWJlciIsImRlZmF1bHRWYWx1ZSIsInN0cmluZ0VzY2FwZUZuIiwic3RyaW5nRXNjYXBlUmVnZXgiLCJza2lwIiwiaW5pdCIsInJocyIsImxocyIsInVuYXJ5KyIsInVuYXJ5LSIsInVuYXJ5ISIsImJpbmFyeSsiLCJiaW5hcnktIiwiYmluYXJ5KiIsImJpbmFyeS8iLCJiaW5hcnklIiwiYmluYXJ5PT09IiwiYmluYXJ5IT09IiwiYmluYXJ5PT0iLCJiaW5hcnkhPSIsImJpbmFyeTwiLCJiaW5hcnk+IiwiYmluYXJ5PD0iLCJiaW5hcnk+PSIsImJpbmFyeSYmIiwiYmluYXJ5fHwiLCJ0ZXJuYXJ5PzoiLCJpc0NvbnN0YW50IiwiJHNjZU1pbkVyciIsIlNDRV9DT05URVhUUyIsIkNTUyIsIkpTIiwiVU5ERVJTQ09SRV9MT1dFUkNBU0VfUkVHRVhQIiwic25ha2VUb0NhbWVsIiwiYWRqdXN0TWF0Y2hlcnMiLCJtYXRjaGVycyIsImFkanVzdGVkTWF0Y2hlcnMiLCJtYXRjaGVyIiwiYWRqdXN0TWF0Y2hlciIsIiRTY2VEZWxlZ2F0ZVByb3ZpZGVyIiwicmVzb3VyY2VVcmxXaGl0ZWxpc3QiLCJyZXNvdXJjZVVybEJsYWNrbGlzdCIsIiQkc2FuaXRpemVVcmkiLCJodG1sU2FuaXRpemVyIiwibWF0Y2hVcmwiLCJ1cmxJc1NhbWVPcmlnaW4iLCJiYXNlVVJJIiwiYmFzZVVybFBhcnNpbmdOb2RlIiwiZ2V0QmFzZVVybCIsInVybElzU2FtZU9yaWdpbkFzQmFzZVVybCIsImdlbmVyYXRlSG9sZGVyVHlwZSIsIkJhc2UiLCJob2xkZXJUeXBlIiwidHJ1c3RlZFZhbHVlIiwiJCR1bndyYXBUcnVzdGVkVmFsdWUiLCJ0cnVzdGVkVmFsdWVIb2xkZXJCYXNlIiwiYnlUeXBlIiwidHJ1c3RBcyIsIkNvbnN0cnVjdG9yIiwibWF5YmVUcnVzdGVkIiwiYWxsb3dlZCIsImlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kiLCIkU2NlUHJvdmlkZXIiLCIkc2NlRGVsZWdhdGUiLCJzY2UiLCJpc0VuYWJsZWQiLCJwYXJzZUFzIiwiZW51bVZhbHVlIiwibE5hbWUiLCIkU25pZmZlclByb3ZpZGVyIiwiZXZlbnRTdXBwb3J0IiwiaGFzSGlzdG9yeVB1c2hTdGF0ZSIsIm53IiwicHJvY2VzcyIsImNocm9tZSIsInJ1bnRpbWUiLCJwdXNoU3RhdGUiLCJhbmRyb2lkIiwiYm94ZWUiLCJib2R5U3R5bGUiLCJ0cmFuc2l0aW9ucyIsImFuaW1hdGlvbnMiLCJoYXNFdmVudCIsImRpdkVsbSIsIiR0ZW1wbGF0ZVJlcXVlc3RNaW5FcnIiLCIkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIiLCJodHRwT3B0aW9ucyIsIiR0ZW1wbGF0ZUNhY2hlIiwiaGFuZGxlUmVxdWVzdEZuIiwidHBsIiwiaWdub3JlUmVxdWVzdEVycm9yIiwidG90YWxQZW5kaW5nUmVxdWVzdHMiLCJ0cmFuc2Zvcm1lciIsIiQkVGVzdGFiaWxpdHlQcm92aWRlciIsInRlc3RhYmlsaXR5IiwiZmluZEJpbmRpbmdzIiwib3B0X2V4YWN0TWF0Y2giLCJtYXRjaGVzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImRhdGFCaW5kaW5nIiwiYmluZGluZ05hbWUiLCJmaW5kTW9kZWxzIiwicHJlZml4ZXMiLCJnZXRMb2NhdGlvbiIsInNldExvY2F0aW9uIiwid2hlblN0YWJsZSIsIiR0aW1lb3V0TWluRXJyIiwiJFRpbWVvdXRQcm92aWRlciIsImRlZmVycmVkcyIsInVybFBhcnNpbmdOb2RlIiwidXJsMSIsInVybDIiLCIkV2luZG93UHJvdmlkZXIiLCIkJENvb2tpZVJlYWRlciIsImxhc3RDb29raWVzIiwibGFzdENvb2tpZVN0cmluZyIsInNhZmVEZWNvZGVVUklDb21wb25lbnQiLCJjb29raWVBcnJheSIsImNvb2tpZSIsImN1cnJlbnRDb29raWVTdHJpbmciLCJzYWZlR2V0Q29va2llIiwiJCRDb29raWVSZWFkZXJQcm92aWRlciIsIiRGaWx0ZXJQcm92aWRlciIsInN1ZmZpeCIsImN1cnJlbmN5RmlsdGVyIiwiZGF0ZUZpbHRlciIsImZpbHRlckZpbHRlciIsImpzb25GaWx0ZXIiLCJsaW1pdFRvRmlsdGVyIiwibG93ZXJjYXNlRmlsdGVyIiwibnVtYmVyRmlsdGVyIiwib3JkZXJCeUZpbHRlciIsInVwcGVyY2FzZUZpbHRlciIsImNvbXBhcmF0b3IiLCJhbnlQcm9wZXJ0eUtleSIsInByZWRpY2F0ZUZuIiwibWF0Y2hBZ2FpbnN0QW55UHJvcCIsImdldFR5cGVGb3JGaWx0ZXIiLCJzaG91bGRNYXRjaFByaW1pdGl2ZXMiLCJhY3R1YWwiLCJleHBlY3RlZCIsImRlZXBDb21wYXJlIiwiY3JlYXRlUHJlZGljYXRlRm4iLCJkb250TWF0Y2hXaG9sZU9iamVjdCIsImFjdHVhbFR5cGUiLCJleHBlY3RlZFR5cGUiLCJleHBlY3RlZFZhbCIsIm1hdGNoQW55UHJvcGVydHkiLCJNQVhfRElHSVRTIiwiREVDSU1BTF9TRVAiLCJaRVJPX0NIQVIiLCIkbG9jYWxlIiwiZm9ybWF0cyIsIk5VTUJFUl9GT1JNQVRTIiwiYW1vdW50IiwiY3VycmVuY3lTeW1ib2wiLCJmcmFjdGlvblNpemUiLCJDVVJSRU5DWV9TWU0iLCJQQVRURVJOUyIsIm1heEZyYWMiLCJjdXJyZW5jeVN5bWJvbFJlIiwiZm9ybWF0TnVtYmVyIiwiR1JPVVBfU0VQIiwiZ3JvdXBTZXAiLCJkZWNpbWFsU2VwIiwicGFyc2VkTnVtYmVyIiwiaXNJbmZpbml0eSIsImlzRmluaXRlIiwiaXNaZXJvIiwibnVtU3RyIiwiYWJzIiwiZm9ybWF0dGVkVGV4dCIsIm1pbkZyYWMiLCJkaWdpdHMiLCJmcmFjdGlvbkxlbiIsInJvdW5kQXQiLCJkaWdpdCIsImsiLCJjYXJyeSIsInJlZHVjZVJpZ2h0Iiwicm91bmROdW1iZXIiLCJudW1iZXJPZkludGVnZXJEaWdpdHMiLCJ6ZXJvcyIsImV4cG9uZW50IiwiaW50ZWdlckxlbiIsImRlY2ltYWxzIiwiZ3JvdXBzIiwibGdTaXplIiwiZ1NpemUiLCJuZWdQcmUiLCJuZWdTdWYiLCJwb3NQcmUiLCJwb3NTdWYiLCJwYWROdW1iZXIiLCJuZWdXcmFwIiwibmVnIiwiZGF0ZUdldHRlciIsImRhdGVTdHJHZXR0ZXIiLCJzaG9ydEZvcm0iLCJzdGFuZEFsb25lIiwiZ2V0Rmlyc3RUaHVyc2RheU9mWWVhciIsInllYXIiLCJkYXlPZldlZWtPbkZpcnN0IiwiZ2V0RGF5Iiwid2Vla0dldHRlciIsImZpcnN0VGh1cnMiLCJnZXRGdWxsWWVhciIsImRhdGV0aW1lIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0VGh1cnNkYXlUaGlzV2VlayIsInJvdW5kIiwiZXJhR2V0dGVyIiwiRVJBUyIsIkRBVEVfRk9STUFUUyIsInl5eXkiLCJ5eSIsInkiLCJNTU1NIiwiTU1NIiwiTU0iLCJNIiwiTExMTCIsImRkIiwiSEgiLCJIIiwiaGgiLCJtbSIsInNzIiwic3NzIiwiRUVFRSIsIkVFRSIsImdldEhvdXJzIiwiQU1QTVMiLCJaIiwiem9uZSIsInBhZGRlZFpvbmUiLCJ3dyIsInciLCJHIiwiR0ciLCJHR0ciLCJHR0dHIiwiRVJBTkFNRVMiLCJEQVRFX0ZPUk1BVFNfU1BMSVQiLCJOVU1CRVJfU1RSSU5HIiwiUl9JU084NjAxX1NUUiIsImZvcm1hdCIsIkRBVEVUSU1FX0ZPUk1BVFMiLCJ0ekhvdXIiLCJ0ek1pbiIsImRhdGVTZXR0ZXIiLCJzZXRVVENGdWxsWWVhciIsInNldEZ1bGxZZWFyIiwidGltZVNldHRlciIsInNldFVUQ0hvdXJzIiwic2V0SG91cnMiLCJtcyIsInBhcnNlRmxvYXQiLCJqc29uU3RyaW5nVG9EYXRlIiwic3BhY2luZyIsImxpbWl0IiwiYmVnaW4iLCJJbmZpbml0eSIsInNsaWNlRm4iLCJzb3J0UHJlZGljYXRlIiwicmV2ZXJzZU9yZGVyIiwiY29tcGFyZUZuIiwicHJlZGljYXRlcyIsInNvcnRQcmVkaWNhdGVzIiwicHJlZGljYXRlIiwiZGVzY2VuZGluZyIsInByb2Nlc3NQcmVkaWNhdGVzIiwiZGVmYXVsdENvbXBhcmUiLCJjb21wYXJlVmFsdWVzIiwidGllQnJlYWtlciIsInByZWRpY2F0ZVZhbHVlcyIsIm9iamVjdFZhbHVlIiwiZ2V0UHJlZGljYXRlVmFsdWUiLCJ2MSIsInYyIiwidHlwZTEiLCJ0eXBlMiIsInZhbHVlMSIsInZhbHVlMiIsIm5nRGlyZWN0aXZlIiwiaHRtbEFuY2hvckRpcmVjdGl2ZSIsInhsaW5rSHJlZiIsIm5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzIiwibm9ybWFsaXplZCIsImRlZmF1bHRMaW5rRm4iLCJuZ01vZGVsIiwiaHRtbEF0dHIiLCJudWxsRm9ybUN0cmwiLCIkYWRkQ29udHJvbCIsIiQkcmVuYW1lQ29udHJvbCIsImNvbnRyb2wiLCIkbmFtZSIsIiRyZW1vdmVDb250cm9sIiwiJHNldFZhbGlkaXR5IiwiJHNldERpcnR5IiwiJHNldFByaXN0aW5lIiwiJHNldFN1Ym1pdHRlZCIsIiQkc2V0U3VibWl0dGVkIiwiUEVORElOR19DTEFTUyIsIkZvcm1Db250cm9sbGVyIiwiJCRjb250cm9scyIsIiRlcnJvciIsIiQkc3VjY2VzcyIsIiRwZW5kaW5nIiwibmdGb3JtIiwiJGRpcnR5IiwiJHByaXN0aW5lIiwiJHZhbGlkIiwiJGludmFsaWQiLCIkc3VibWl0dGVkIiwiJCRwYXJlbnRGb3JtIiwiJCRhbmltYXRlIiwic2V0dXBWYWxpZGl0eSIsIiRyb2xsYmFja1ZpZXdWYWx1ZSIsIiRjb21taXRWaWV3VmFsdWUiLCJuZXdOYW1lIiwib2xkTmFtZSIsIlBSSVNUSU5FX0NMQVNTIiwiRElSVFlfQ0xBU1MiLCIkc2V0VW50b3VjaGVkIiwicm9vdEZvcm0iLCJhZGRTZXRWYWxpZGl0eU1ldGhvZCIsImNsYXp6IiwidW5zZXQiLCJmb3JtRGlyZWN0aXZlRmFjdG9yeSIsImlzTmdGb3JtIiwiZm9ybUVsZW1lbnQiLCJWQUxJRF9DTEFTUyIsIm5hbWVBdHRyIiwiY3RybHMiLCJoYW5kbGVGb3JtU3VibWlzc2lvbiIsInNldHRlciIsImdldFNldHRlciIsImZvcm1EaXJlY3RpdmUiLCJuZ0Zvcm1EaXJlY3RpdmUiLCIkJGNsYXNzQ2FjaGUiLCJJTlZBTElEX0NMQVNTIiwiY2FjaGVkVG9nZ2xlQ2xhc3MiLCJjdHJsIiwic3dpdGNoVmFsdWUiLCJ0b2dnbGVWYWxpZGF0aW9uQ3NzIiwidmFsaWRhdGlvbkVycm9yS2V5IiwiaXNWYWxpZCIsImNvbWJpbmVkU3RhdGUiLCJjcmVhdGVBbmRTZXQiLCJpc09iamVjdEVtcHR5IiwidW5zZXRBbmRDbGVhbnVwIiwiSVNPX0RBVEVfUkVHRVhQIiwiVVJMX1JFR0VYUCIsIkVNQUlMX1JFR0VYUCIsIk5VTUJFUl9SRUdFWFAiLCJEQVRFX1JFR0VYUCIsIkRBVEVUSU1FTE9DQUxfUkVHRVhQIiwiV0VFS19SRUdFWFAiLCJNT05USF9SRUdFWFAiLCJUSU1FX1JFR0VYUCIsIlBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMiLCJQQVJUSUFMX1ZBTElEQVRJT05fVFlQRVMiLCJpbnB1dFR5cGUiLCJiYXNlSW5wdXRUeXBlIiwic3RyaW5nQmFzZWRJbnB1dFR5cGUiLCJjcmVhdGVEYXRlSW5wdXRUeXBlIiwiY3JlYXRlRGF0ZVBhcnNlciIsImRhdGV0aW1lLWxvY2FsIiwidGltZSIsIndlZWsiLCJpc29XZWVrIiwiZXhpc3RpbmdEYXRlIiwiaG91cnMiLCJzZWNvbmRzIiwibWlsbGlzZWNvbmRzIiwiYWRkRGF5cyIsImdldFNlY29uZHMiLCJnZXRNaWxsaXNlY29uZHMiLCJtb250aCIsIm1pblZhbCIsIm1heFZhbCIsImJhZElucHV0Q2hlY2tlciIsIm51bWJlckZvcm1hdHRlclBhcnNlciIsIiR2YWxpZGF0b3JzIiwibW9kZWxWYWx1ZSIsInZpZXdWYWx1ZSIsIiRpc0VtcHR5IiwicGFyc2VOdW1iZXJBdHRyVmFsIiwiJHZhbGlkYXRlIiwic3RlcCIsInN0ZXBWYWwiLCJpc1ZhbGlkRm9yU3RlcCIsImVtYWlsIiwicmFkaW8iLCJkb1RyaW0iLCJuZ1RyaW0iLCJldiIsImNoZWNrZWQiLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiR2aWV3VmFsdWUiLCJyYW5nZSIsInN1cHBvcnRzUmFuZ2UiLCIkJGhhc05hdGl2ZVZhbGlkYXRvcnMiLCJ2YWxpZGl0eSIsImhhc01pbkF0dHIiLCJoYXNNYXhBdHRyIiwiaGFzU3RlcEF0dHIiLCJvcmlnaW5hbFJlbmRlciIsInJhbmdlVW5kZXJmbG93IiwicmFuZ2VPdmVyZmxvdyIsInNldEluaXRpYWxWYWx1ZUFuZE9ic2VydmVyIiwiJG1vZGVsVmFsdWUiLCJlbFZhbCIsInN0ZXBNaXNtYXRjaCIsImh0bWxBdHRyTmFtZSIsImNoYW5nZUZuIiwiY2hlY2tib3giLCJ0cnVlVmFsdWUiLCJwYXJzZUNvbnN0YW50RXhwciIsIm5nVHJ1ZVZhbHVlIiwiZmFsc2VWYWx1ZSIsIm5nRmFsc2VWYWx1ZSIsIiRmb3JtYXR0ZXJzIiwiJHBhcnNlcnMiLCJzdWJtaXQiLCJyZXNldCIsImZpbGUiLCJjb21wb3NpbmciLCJkZWZlckxpc3RlbmVyIiwib3JpZ1ZhbHVlIiwia2V5Q29kZSIsIm9yaWdCYWRJbnB1dCIsImJhZElucHV0Iiwib3JpZ1R5cGVNaXNtYXRjaCIsInR5cGVNaXNtYXRjaCIsIm1hcHBpbmciLCJpc28iLCJwcmV2aW91c0RhdGUiLCJwYXJzZURhdGUiLCJwcmV2aW91c1RpbWV6b25lIiwicGFyc2VEYXRlQW5kQ29udmVydFRpbWVab25lVG9Mb2NhbCIsIiQkcGFyc2VyTmFtZSIsIm5nTW9kZWxNaW5FcnIiLCJpc1ZhbGlkRGF0ZSIsIiRvcHRpb25zIiwiZ2V0T3B0aW9uIiwicGFyc2VPYnNlcnZlZERhdGVWYWx1ZSIsInBhcnNlZERhdGUiLCJwYXJzZXJOYW1lIiwiaXNOdW1iZXJJbnRlZ2VyIiwiY291bnREZWNpbWFscyIsIm51bVN0cmluZyIsImRlY2ltYWxTeW1ib2xJbmRleCIsInN0ZXBCYXNlIiwiaXNOb25JbnRlZ2VyVmFsdWUiLCJpc05vbkludGVnZXJTdGVwQmFzZSIsImlzTm9uSW50ZWdlclN0ZXAiLCJ2YWx1ZURlY2ltYWxzIiwic3RlcEJhc2VEZWNpbWFscyIsInN0ZXBEZWNpbWFscyIsImRlY2ltYWxDb3VudCIsIm11bHRpcGxpZXIiLCJwb3ciLCJwYXJzZUZuIiwiaW5wdXREaXJlY3RpdmUiLCJDT05TVEFOVF9WQUxVRV9SRUdFWFAiLCJuZ1ZhbHVlRGlyZWN0aXZlIiwidXBkYXRlRWxlbWVudFZhbHVlIiwicHJvcFZhbHVlIiwidHBsQXR0ciIsIm5nVmFsdWUiLCJuZ0JpbmREaXJlY3RpdmUiLCIkY29tcGlsZSIsInRlbXBsYXRlRWxlbWVudCIsIm5nQmluZCIsIm5nQmluZFRlbXBsYXRlRGlyZWN0aXZlIiwibmdCaW5kVGVtcGxhdGUiLCJuZ0JpbmRIdG1sRGlyZWN0aXZlIiwibmdCaW5kSHRtbEdldHRlciIsIm5nQmluZEh0bWwiLCJuZ0JpbmRIdG1sV2F0Y2giLCJnZXRUcnVzdGVkSHRtbCIsIm5nQ2hhbmdlRGlyZWN0aXZlIiwiJHZpZXdDaGFuZ2VMaXN0ZW5lcnMiLCJuZ0NoYW5nZSIsImNsYXNzRGlyZWN0aXZlIiwiaW5kZXhXYXRjaEV4cHJlc3Npb24iLCJvbGRDbGFzc1N0cmluZyIsImNsYXNzQ291bnRzIiwib2xkTW9kdWxvIiwiZGlnZXN0Q2xhc3NDb3VudHMiLCJjbGFzc0FycmF5IiwiY2xhc3Nlc1RvVXBkYXRlIiwiJGluZGV4IiwibmV3TW9kdWxvIiwiY2xhc3NTdHJpbmciLCJhZGRDbGFzc2VzIiwicmVtb3ZlQ2xhc3NlcyIsInRvQ2xhc3NTdHJpbmciLCJuZXdDbGFzc1N0cmluZyIsIm9sZENsYXNzQXJyYXkiLCJuZXdDbGFzc0FycmF5IiwidG9SZW1vdmVBcnJheSIsImFycmF5RGlmZmVyZW5jZSIsInRvQWRkQXJyYXkiLCJ0b1JlbW92ZVN0cmluZyIsInRvQWRkU3RyaW5nIiwidXBkYXRlQ2xhc3NlcyIsImNsYXNzVmFsdWUiLCJuZ0NsYXNzRGlyZWN0aXZlIiwibmdDbGFzc09kZERpcmVjdGl2ZSIsIm5nQ2xhc3NFdmVuRGlyZWN0aXZlIiwibmdDbG9ha0RpcmVjdGl2ZSIsIm5nQ29udHJvbGxlckRpcmVjdGl2ZSIsIm5nRXZlbnREaXJlY3RpdmVzIiwiZm9yY2VBc3luY0V2ZW50cyIsImJsdXIiLCJmb2N1cyIsIm5nSWZEaXJlY3RpdmUiLCJibG9jayIsInByZXZpb3VzRWxlbWVudHMiLCJuZ0lmIiwibmdJbmNsdWRlRGlyZWN0aXZlIiwiJGFuY2hvclNjcm9sbCIsInNyY0V4cCIsIm5nSW5jbHVkZSIsIm9ubG9hZEV4cCIsImF1dG9TY3JvbGxFeHAiLCJhdXRvc2Nyb2xsIiwicHJldmlvdXNFbGVtZW50IiwiY3VycmVudEVsZW1lbnQiLCJjaGFuZ2VDb3VudGVyIiwiY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCIsImFmdGVyQW5pbWF0aW9uIiwidGhpc0NoYW5nZUlkIiwibmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmUiLCJuZ0luaXREaXJlY3RpdmUiLCJuZ0luaXQiLCJuZ0xpc3REaXJlY3RpdmUiLCJuZ0xpc3QiLCJ0cmltVmFsdWVzIiwiTmdNb2RlbENvbnRyb2xsZXIiLCIkJHJhd01vZGVsVmFsdWUiLCIkYXN5bmNWYWxpZGF0b3JzIiwiJHVudG91Y2hlZCIsIiR0b3VjaGVkIiwiZGVmYXVsdE1vZGVsT3B0aW9ucyIsIiQkdXBkYXRlRXZlbnRzIiwiJCR1cGRhdGVFdmVudEhhbmRsZXIiLCIkJHBhcnNlZE5nTW9kZWwiLCIkJHBhcnNlZE5nTW9kZWxBc3NpZ24iLCIkJG5nTW9kZWxHZXQiLCIkJG5nTW9kZWxTZXQiLCIkJHBlbmRpbmdEZWJvdW5jZSIsIiQkcGFyc2VyVmFsaWQiLCIkJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQiLCIkJHJvb3RTY29wZSIsIiQkYXR0ciIsIiQkdGltZW91dCIsIiQkZXhjZXB0aW9uSGFuZGxlciIsIiQkc2V0TW9kZWxWYWx1ZSIsInNldHVwTW9kZWxXYXRjaGVyIiwiJCRpbml0R2V0dGVyU2V0dGVycyIsImludm9rZU1vZGVsR2V0dGVyIiwiaW52b2tlTW9kZWxTZXR0ZXIiLCIkJCRwIiwiJCR1cGRhdGVFbXB0eUNsYXNzZXMiLCIkc2V0VG91Y2hlZCIsIiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSIsInByZXZWYWxpZCIsInByZXZNb2RlbFZhbHVlIiwiYWxsb3dJbnZhbGlkIiwidGhhdCIsIiQkcnVuVmFsaWRhdG9ycyIsImFsbFZhbGlkIiwiJCR3cml0ZU1vZGVsVG9TY29wZSIsImRvbmVDYWxsYmFjayIsImxvY2FsVmFsaWRhdGlvblJ1bklkIiwic2V0VmFsaWRpdHkiLCJ2YWxpZGF0aW9uRG9uZSIsImVycm9yS2V5IiwicHJvY2Vzc1BhcnNlRXJyb3JzIiwic3luY1ZhbGlkYXRvcnNWYWxpZCIsInZhbGlkYXRvciIsInByb2Nlc3NTeW5jVmFsaWRhdG9ycyIsInZhbGlkYXRvclByb21pc2VzIiwicHJvY2Vzc0FzeW5jVmFsaWRhdG9ycyIsIiQkcGFyc2VBbmRWYWxpZGF0ZSIsIndyaXRlVG9Nb2RlbElmTmVlZGVkIiwiJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCIsImRlYm91bmNlRGVsYXkiLCIkb3ZlcnJpZGVNb2RlbE9wdGlvbnMiLCJjcmVhdGVDaGlsZCIsIiQkc2V0VXBkYXRlT25FdmVudHMiLCIkcHJvY2Vzc01vZGVsVmFsdWUiLCIkJGZvcm1hdCIsImZvcm1hdHRlcnMiLCJuZ01vZGVsRGlyZWN0aXZlIiwibW9kZWxDdHJsIiwiZm9ybUN0cmwiLCJvcHRpb25zQ3RybCIsInNldFRvdWNoZWQiLCJERUZBVUxUX1JFR0VYUCIsIk1vZGVsT3B0aW9ucyIsIiQkb3B0aW9ucyIsImluaGVyaXRBbGwiLCJ1cGRhdGVPbkRlZmF1bHQiLCJ1cGRhdGVPbiIsImRlYm91bmNlIiwiZ2V0dGVyU2V0dGVyIiwibmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUiLCJOZ01vZGVsT3B0aW9uc0NvbnRyb2xsZXIiLCIkJGF0dHJzIiwicGFyZW50T3B0aW9ucyIsInBhcmVudEN0cmwiLCJtb2RlbE9wdGlvbnNEZWZpbml0aW9uIiwibmdNb2RlbE9wdGlvbnMiLCJuZ05vbkJpbmRhYmxlRGlyZWN0aXZlIiwibmdPcHRpb25zTWluRXJyIiwiTkdfT1BUSU9OU19SRUdFWFAiLCJuZ09wdGlvbnNEaXJlY3RpdmUiLCJvcHRpb25UZW1wbGF0ZSIsIm9wdEdyb3VwVGVtcGxhdGUiLCJzZWxlY3RFbGVtZW50IiwicmVnaXN0ZXJPcHRpb24iLCJzZWxlY3RDdHJsIiwibmdNb2RlbEN0cmwiLCJoYXNFbXB0eU9wdGlvbiIsImVtcHR5T3B0aW9uIiwicHJvdmlkZWRFbXB0eU9wdGlvbiIsIm5nT3B0aW9ucyIsIm9wdGlvbnNFeHAiLCJ2YWx1ZU5hbWUiLCJrZXlOYW1lIiwic2VsZWN0QXMiLCJ0cmFja0J5Iiwidmlld1ZhbHVlRm4iLCJ0cmFja0J5Rm4iLCJnZXRUcmFja0J5VmFsdWVGbiIsImdldFRyYWNrQnlWYWx1ZSIsImdldExvY2FscyIsImRpc3BsYXlGbiIsImdyb3VwQnlGbiIsImRpc2FibGVXaGVuRm4iLCJ2YWx1ZXNGbiIsIk9wdGlvbiIsInNlbGVjdFZhbHVlIiwibGFiZWwiLCJncm91cCIsImRpc2FibGVkIiwiZ2V0T3B0aW9uVmFsdWVzS2V5cyIsIm9wdGlvblZhbHVlcyIsIm9wdGlvblZhbHVlc0tleXMiLCJpdGVtS2V5IiwiZ2V0V2F0Y2hhYmxlcyIsIndhdGNoZWRBcnJheSIsIm9wdGlvblZhbHVlc0xlbmd0aCIsImRpc2FibGVXaGVuIiwiZ2V0T3B0aW9ucyIsIm9wdGlvbkl0ZW1zIiwic2VsZWN0VmFsdWVNYXAiLCJvcHRpb25JdGVtIiwiZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZSIsImdldFZpZXdWYWx1ZUZyb21PcHRpb24iLCJwYXJzZU9wdGlvbnNFeHByZXNzaW9uIiwibGlzdEZyYWdtZW50IiwiYWRkT3B0aW9uRWxlbWVudCIsIm9wdGlvbkVsZW1lbnQiLCJ1cGRhdGVPcHRpb25FbGVtZW50IiwiZ2V0QW5kVXBkYXRlU2VsZWN0ZWRPcHRpb24iLCJnZW5lcmF0ZVVua25vd25PcHRpb25WYWx1ZSIsIndyaXRlVmFsdWUiLCJzZWxlY3RlZE9wdGlvbnMiLCJyZWFkVmFsdWUiLCJzZWxlY3Rpb25zIiwic2VsZWN0ZWRPcHRpb24iLCJzZWxlY3RlZEluZGV4IiwicmVtb3ZlVW5rbm93bk9wdGlvbiIsInNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uIiwidW5zZWxlY3RFbXB0eU9wdGlvbiIsIm9wdGlvblNjb3BlIiwib3B0aW9uRWwiLCJuZWVkc1JlcmVuZGVyIiwiJGlzRW1wdHlPcHRpb25TZWxlY3RlZCIsImdyb3VwRWxlbWVudE1hcCIsImdyb3VwRWxlbWVudCIsIm5leHRWYWx1ZSIsImlzTm90UHJpbWl0aXZlIiwibmdQbHVyYWxpemVEaXJlY3RpdmUiLCJCUkFDRSIsIklTX1dIRU4iLCJsYXN0Q291bnQiLCJudW1iZXJFeHAiLCJ3aGVuRXhwIiwid2hlbnMiLCJ3aGVuc0V4cEZucyIsImJyYWNlUmVwbGFjZW1lbnQiLCJ3YXRjaFJlbW92ZXIiLCJ1cGRhdGVFbGVtZW50VGV4dCIsIm5ld1RleHQiLCJhdHRyaWJ1dGVOYW1lIiwidG1wTWF0Y2giLCJ3aGVuS2V5IiwiY291bnRJc05hTiIsInBsdXJhbENhdCIsIndoZW5FeHBGbiIsIm5nUmVmTWluRXJyIiwibmdSZWZEaXJlY3RpdmUiLCJuZ1JlZiIsInJlZlZhbHVlIiwibmdSZWZSZWFkIiwibmdSZXBlYXREaXJlY3RpdmUiLCJuZ1JlcGVhdE1pbkVyciIsInVwZGF0ZVNjb3BlIiwidmFsdWVJZGVudGlmaWVyIiwia2V5SWRlbnRpZmllciIsImFycmF5TGVuZ3RoIiwiJGZpcnN0IiwiJGxhc3QiLCIkbWlkZGxlIiwiJG9kZCIsIiRldmVuIiwiZ2V0QmxvY2tTdGFydCIsImdldEJsb2NrRW5kIiwibmdSZXBlYXQiLCJuZ1JlcGVhdEVuZENvbW1lbnQiLCJhbGlhc0FzIiwidHJhY2tCeUV4cCIsInRyYWNrQnlFeHBHZXR0ZXIiLCJ0cmFja0J5SWRFeHBGbiIsInRyYWNrQnlJZEFycmF5Rm4iLCJ0cmFja0J5SWRPYmpGbiIsImhhc2hGbkxvY2FscyIsImxhc3RCbG9ja01hcCIsIm5leHROb2RlIiwiY29sbGVjdGlvbkxlbmd0aCIsInRyYWNrQnlJZCIsInRyYWNrQnlJZEZuIiwiY29sbGVjdGlvbktleXMiLCJuZXh0QmxvY2tPcmRlciIsInByZXZpb3VzTm9kZSIsIm5leHRCbG9ja01hcCIsImJsb2NrS2V5IiwibmdTaG93RGlyZWN0aXZlIiwibmdTaG93IiwibmdIaWRlRGlyZWN0aXZlIiwibmdIaWRlIiwibmdTdHlsZURpcmVjdGl2ZSIsIm5nU3R5bGUiLCJvbGRTdHlsZXMiLCJuZ1N3aXRjaERpcmVjdGl2ZSIsImNhc2VzIiwibmdTd2l0Y2hDb250cm9sbGVyIiwid2F0Y2hFeHByIiwibmdTd2l0Y2giLCJzZWxlY3RlZFRyYW5zY2x1ZGVzIiwic2VsZWN0ZWRFbGVtZW50cyIsInByZXZpb3VzTGVhdmVBbmltYXRpb25zIiwic2VsZWN0ZWRTY29wZXMiLCJzcGxpY2VGYWN0b3J5Iiwic2VsZWN0ZWRUcmFuc2NsdWRlIiwiY2FzZUVsZW1lbnQiLCJzZWxlY3RlZFNjb3BlIiwiYW5jaG9yIiwibmdTd2l0Y2hXaGVuRGlyZWN0aXZlIiwibmdTd2l0Y2hXaGVuIiwibmdTd2l0Y2hXaGVuU2VwYXJhdG9yIiwid2hlbkNhc2UiLCJuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUiLCJuZ1RyYW5zY2x1ZGVNaW5FcnIiLCJuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUiLCJmYWxsYmFja0xpbmtGbiIsIm5nVHJhbnNjbHVkZSIsIm5nVHJhbnNjbHVkZVNsb3QiLCJ1c2VGYWxsYmFja0NvbnRlbnQiLCJub3RXaGl0ZXNwYWNlIiwic2NyaXB0RGlyZWN0aXZlIiwibm9vcE5nTW9kZWxDb250cm9sbGVyIiwic2V0T3B0aW9uU2VsZWN0ZWRTdGF0dXMiLCJTZWxlY3RDb250cm9sbGVyIiwib3B0aW9uc01hcCIsInVua25vd25PcHRpb24iLCJyZW5kZXJVbmtub3duT3B0aW9uIiwidW5rbm93blZhbCIsInVwZGF0ZVVua25vd25PcHRpb24iLCJzZWxlY3RFbXB0eU9wdGlvbiIsInJlYWxWYWwiLCJoYXNPcHRpb24iLCJjdXJyZW50bHlTZWxlY3RlZE9wdGlvbiIsImhhc2hlZFZhbCIsImFkZE9wdGlvbiIsInNjaGVkdWxlUmVuZGVyIiwicmVtb3ZlT3B0aW9uIiwiJGhhc0VtcHR5T3B0aW9uIiwiJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkIiwicmVuZGVyU2NoZWR1bGVkIiwidXBkYXRlU2NoZWR1bGVkIiwic2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUiLCJyZW5kZXJBZnRlciIsIm9wdGlvbkF0dHJzIiwiaW50ZXJwb2xhdGVWYWx1ZUZuIiwiaW50ZXJwb2xhdGVUZXh0Rm4iLCJyZW1vdmFsIiwicHJldmlvdXNseVNlbGVjdGVkIiwicmVtb3ZlVmFsdWUiLCJzZWxlY3REaXJlY3RpdmUiLCJzaG91bGRCZVNlbGVjdGVkIiwiY3VycmVudGx5U2VsZWN0ZWQiLCJsYXN0VmlldyIsImxhc3RWaWV3UmVmIiwib3B0aW9uRGlyZWN0aXZlIiwicmVxdWlyZWREaXJlY3RpdmUiLCJyZXF1aXJlZCIsInBhdHRlcm5EaXJlY3RpdmUiLCJwYXR0ZXJuRXhwIiwibWF4bGVuZ3RoRGlyZWN0aXZlIiwibWF4bGVuZ3RoIiwiaW50VmFsIiwibWlubGVuZ3RoRGlyZWN0aXZlIiwibWlubGVuZ3RoIiwib3JpZ2luYWxDbGVhbkRhdGEiLCJqcU5hbWUiLCJlbGVtcyIsImJpbmRKUXVlcnkiLCIkJG1pbkVyciIsIiQkY3NwIiwiJCRlbmNvZGVVcmlTZWdtZW50IiwiJCRlbmNvZGVVcmlRdWVyeSIsIiQkbG93ZXJjYXNlIiwiJCRzdHJpbmdpZnkiLCIkJHVwcGVyY2FzZSIsImVuc3VyZSIsImNvbmZpZ0ZuIiwiaW52b2tlUXVldWUiLCJjb25maWdCbG9ja3MiLCJpbnZva2VMYXRlciIsIm1vZHVsZUluc3RhbmNlIiwiaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lIiwiYW5pbWF0aW9uIiwiaW5zZXJ0TWV0aG9kIiwicmVjaXBlTmFtZSIsImZhY3RvcnlGdW5jdGlvbiIsInNldHVwTW9kdWxlTG9hZGVyIiwidGV4dGFyZWEiLCJmb3JtIiwic2VsZWN0IiwibmdDbGFzcyIsIm5nQ2xhc3NFdmVuIiwibmdDbGFzc09kZCIsIm5nQ2xvYWsiLCJuZ0NvbnRyb2xsZXIiLCJuZ05vbkJpbmRhYmxlIiwibmdQbHVyYWxpemUiLCJuZ1N3aXRjaERlZmF1bHQiLCJuZ1JlcXVpcmVkIiwiJGFuaW1hdGVDc3MiLCIkJGFuaW1hdGVKcyIsIiQkZm9yY2VSZWZsb3ciLCIkaW50ZXJ2YWwiLCIkaHR0cFBhcmFtU2VyaWFsaXplciIsIiRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlIiwiJCR0ZXN0YWJpbGl0eSIsIiQkanFMaXRlIiwiJCRNYXAiLCJhbmd1bGFyVmVyc2lvbiIsInB1Ymxpc2hFeHRlcm5hbEFQSSIsIlBMVVJBTF9DQVRFR09SWSIsIkRBWSIsIkZJUlNUREFZT0ZXRUVLIiwiTU9OVEgiLCJTSE9SVERBWSIsIlNIT1JUTU9OVEgiLCJTVEFOREFMT05FTU9OVEgiLCJXRUVLRU5EUkFOR0UiLCJmdWxsRGF0ZSIsImxvbmdEYXRlIiwibWVkaXVtIiwibWVkaXVtRGF0ZSIsIm1lZGl1bVRpbWUiLCJzaG9ydCIsInNob3J0RGF0ZSIsInNob3J0VGltZSIsIm1pbkludCIsImxvY2FsZUlEIiwib3B0X3ByZWNpc2lvbiIsInZmIiwiZ2V0RGVjaW1hbHMiLCJnZXRWRiIsIm5nX2Zyb21faW1wb3J0IiwiY29yZSIsIm5nX2Zyb21fZ2xvYmFsIiwibmciLCJnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSIsInRlbXBsYXRlRmFjdG9yeSIsInZpZXciLCJOZzFWaWV3Q29uZmlnIiwiaGFzQW55S2V5IiwibmcxVmlld3NCdWlsZGVyIiwiY29tcEtleXMiLCJub25Db21wS2V5cyIsImFsbFZpZXdLZXlzIiwidmlld3MiLCJ2aWV3c09iamVjdCIsIiRkZWZhdWx0IiwicmVzb2x2ZUFzIiwiJHR5cGUiLCIkY29udGV4dCIsIlZpZXdTZXJ2aWNlIiwibm9ybWFsaXplVUlWaWV3VGFyZ2V0IiwiJHVpVmlld05hbWUiLCJ1aVZpZXdOYW1lIiwiJHVpVmlld0NvbnRleHRBbmNob3IiLCJ1aVZpZXdDb250ZXh0QW5jaG9yIiwidmlld0RlY2wiLCJsb2FkZWQiLCJnZXRUZW1wbGF0ZSIsInVpVmlldyIsIm1ha2VDb21wb25lbnRUZW1wbGF0ZSIsImxvYWQiLCJSZXNvbHZlQ29udGV4dCIsInBhcmFtVmFsdWVzIiwiZnJvbUNvbmZpZyIsImdldENvbnRyb2xsZXIiLCJ0cmFjZSIsInRyYWNlVmlld1NlcnZpY2VFdmVudCIsImNvbnRyb2xsZXJQcm92aWRlciIsImRlcHMiLCJwcm92aWRlckZuIiwicmVzb2x2YWJsZSIsIlJlc29sdmFibGUiLCJUZW1wbGF0ZUZhY3RvcnkiLCJfdXNlSHR0cCIsInVzZUh0dHBTZXJ2aWNlIiwiYXNUZW1wbGF0ZSIsImFzQ29tcG9uZW50IiwiZnJvbVN0cmluZyIsImZyb21VcmwiLCJ0ZW1wbGF0ZVByb3ZpZGVyIiwiZnJvbVByb3ZpZGVyIiwiY29tcG9uZW50UHJvdmlkZXIiLCJmcm9tQ29tcG9uZW50UHJvdmlkZXIiLCJrZWJvYiIsImNhbWVsQ2FzZSIsImtlYm9iZWQiLCJrZWJvYlN0cmluZyIsImNtcERlZnMiLCJnZXRCaW5kaW5ncyIsImdldENvbXBvbmVudEJpbmRpbmdzIiwicmVzb2x2ZU5hbWUiLCJyZXMiLCJnZXRSZXNvbHZhYmxlIiwiYXJyYXlJZHhTdHIiLCJrZWJvYk5hbWUiLCJkZWYiLCJzY29wZUJpbmRpbmdzIiwiYmluZGluZ3NPYmoiLCJ0dXBsZSIsIlN0YXRlUHJvdmlkZXIiLCJzdGF0ZVJlZ2lzdHJ5Iiwic3RhdGVTZXJ2aWNlIiwib25JbnZhbGlkIiwiZ2V0U3RhdGVIb29rQnVpbGRlciIsImhvb2tOYW1lIiwic3RhdGVPYmplY3QiLCJwYXJlbnRGbiIsImhvb2siLCJ0cmFucyIsInN1YkNvbnRleHQiLCJ0cmVlQ2hhbmdlcyIsIiRzdGF0ZSQiLCIkdHJhbnNpdGlvbiQiLCJOZzFMb2NhdGlvblNlcnZpY2VzIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJfdXJsTGlzdGVuZXJzIiwiX2xwIiwibW9ua2V5UGF0Y2hQYXRoUGFyYW1ldGVyVHlwZSIsInJvdXRlciIsInBhdGhUeXBlIiwidXJsTWF0Y2hlckZhY3RvcnkiLCJlbmNvZGUiLCJ+IiwiLyIsImRlY29kZSIsIn5+IiwifjJGIiwiZGlzcG9zZSIsIm9uQ2hhbmdlIiwiX2Jhc2VIcmVmIiwiX3J1bnRpbWVTZXJ2aWNlcyIsImV2dCIsIl9sb2MiLCJVcmxSb3V0ZXJQcm92aWRlciIsIl9yb3V0ZXIiLCJfdXJsUm91dGVyIiwidXJsUm91dGVyIiwiaW5qZWN0YWJsZUhhbmRsZXIiLCIkbWF0Y2giLCIkc3RhdGVQYXJhbXMiLCJnbG9iYWxzIiwiaW50ZXJjZXB0RGVmZXJyZWQiLCJsaXN0ZW4iLCJydWxlIiwicnVsZUZuIiwiQmFzZVVybFJ1bGUiLCJsb2NhdGlvblNlcnZpY2UiLCJkZWZlckludGVyY2VwdCIsIm1vZF9pbml0IiwibW9kX3V0aWwiLCJtb2RfcnRyIiwibW9kX3N0YXRlIiwibW9kX21haW4iLCIkdWlSb3V0ZXJQcm92aWRlciIsIlVJUm91dGVyIiwic3RhdGVQcm92aWRlciIsInZpZXdTZXJ2aWNlIiwiX3BsdWdpbmFwaSIsIl92aWV3Q29uZmlnRmFjdG9yeSIsIm5nMUxvY2F0aW9uU2VydmljZSIsImxvY2F0aW9uQ29uZmlnIiwiZ2V0UHJvdmlkZXJGb3IiLCIkdXJwIiwicnVuQmxvY2siLCIkdWlSb3V0ZXIiLCJjaGVja1N0cmljdERpIiwicmVzb2x2YWJsZXMiLCJyZXNvbHZlRm4iLCJ3YXRjaERpZ2VzdHMiLCJhcHByb3hpbWF0ZURpZ2VzdHMiLCJ1aVJvdXRlciIsInVybFJvdXRlclByb3ZpZGVyIiwiJHVybE1hdGNoZXJGYWN0b3J5IiwiJHN0YXRlIiwiJHVybFJvdXRlciIsInVpU3JlZkRpcmVjdGl2ZSIsInVpU3RhdGVEaXJlY3RpdmUiLCJ1aVNyZWZBY3RpdmVEaXJlY3RpdmUiLCJjdHgiLCJnZXRUb2tlbnMiLCJ0dXBsZXMiLCJ3YWl0UG9saWN5IiwiZ2V0UG9saWN5IiwicGFyc2VTdGF0ZVJlZiIsInJlZiIsInBhcmFtc09ubHkiLCJwYXJhbUV4cHIiLCJzdGF0ZUNvbnRleHQiLCIkdWlWaWV3IiwicHJvY2Vzc2VkRGVmIiwidWlTdGF0ZSIsInVpU3RhdGVPcHRzIiwicmVsYXRpdmUiLCIkY3VycmVudCIsImRlZmF1bHRPcHRzIiwidWlTdGF0ZVBhcmFtcyIsImdldFR5cGVJbmZvIiwiaXNTdmciLCJpc0Zvcm0iLCJpc0FuY2hvciIsImNsaWNrYWJsZSIsImNsaWNrSG9vayIsImdldERlZiIsInRyYW5zaXRpb25fMSIsImdvIiwiaWdub3JlUHJldmVudERlZmF1bHRDb3VudF8xIiwiYmluZEV2ZW50cyIsImhvb2tGbiIsImV2ZW50c18xIiwiZXZlbnRfMSIsImV2ZW50c18yIiwiZXZlbnRfMiIsIiRJc1N0YXRlRmlsdGVyIiwiaXNGaWx0ZXIiLCIkSW5jbHVkZWRCeVN0YXRlRmlsdGVyIiwiaW5jbHVkZXNGaWx0ZXIiLCIkVmlld0RpcmVjdGl2ZUZpbGwiLCIkdHJhbnNpdGlvbnMiLCIkdmlldyIsImdldENvbnRyb2xsZXJBcyIsImdldFJlc29sdmVBcyIsImluaXRpYWwiLCJjZmciLCIkY2ZnIiwicmVzb2x2ZUN0eCIsInRyYWNlVUlWaWV3RmlsbCIsInJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcyIsInRhZ1JlZ2V4cF8xIiwiZGVyZWdpc3RlcldhdGNoXzEiLCJkaXJlY3RpdmVFbCIsInRhZ05hbWUiLCJjdHJsSW5zdGFuY2UiLCJ1aVNyZWZBY3RpdmUiLCJhY3RpdmUiLCJ1bmxpbmtJbmZvRm4iLCJyYXdEZWYiLCJ1aVNyZWYiLCIkJGFkZFN0YXRlSW5mbyIsInVpU3JlZk9wdHMiLCJvblN0YXRlc0NoYW5nZWQiLCJ0cmFuc2l0aW9uU2VydmljZSIsIm9uU3VjY2VzcyIsImlucHV0QXR0cnMiLCJ3YXRjaERlcmVnRm5zIiwiZmllbGQiLCJuZXd2YWwiLCJhY3RpdmVFcUNsYXNzIiwic3RhdGVzIiwidWlTcmVmQWN0aXZlRXEiLCJ1cGRhdGVBZnRlclRyYW5zaXRpb24iLCJoYW5kbGVTdGF0ZXNDaGFuZ2VkIiwic2V0U3RhdGVzRnJvbURlZmluaXRpb25PYmplY3QiLCJzdGF0ZXNEZWZpbml0aW9uIiwic3RhdGVPck5hbWUiLCJhY3RpdmVDbGFzcyIsImFkZFN0YXRlRm9yQ2xhc3MiLCJhZGRTdGF0ZSIsInN0YXRlTmFtZSIsInN0YXRlUGFyYW1zIiwic3RhdGVJbmZvIiwiZ2V0Q2xhc3NlcyIsInN0YXRlTGlzdCIsImFsbENsYXNzZXMiLCJmdXp6eUNsYXNzZXMiLCJleGFjdGx5TWF0Y2hlc0FueSIsImV4YWN0Q2xhc3NlcyIsImNscyIsIm5ld1BhcmFtcyIsImRlcmVnaXN0ZXIiLCJkZXJlZ2lzdGVyU3RhdGVzQ2hhbmdlZExpc3RlbmVyIiwiZGVyZWdpc3Rlck9uU3RhcnRMaXN0ZW5lciIsIm9uU3RhcnQiLCJkZXJlZ2lzdGVyU3RhdGVDaGFuZ2VTdWNjZXNzTGlzdGVuZXIiLCJzZXR1cEV2ZW50TGlzdGVuZXJzIiwidHJhbnNpdGlvbiIsIiR1aVZpZXdTY3JvbGwiLCJyb290RGF0YSIsIl9yb290Vmlld0NvbnRleHQiLCJwcmV2aW91c0VsIiwiY3VycmVudEVsIiwidmlld0NvbmZpZyIsInVucmVnaXN0ZXIiLCJyZW5kZXJlciIsImluaGVyaXRlZCIsImFjdGl2ZVVJVmlldyIsImZxbiIsImNvbmZpZ1VwZGF0ZWQiLCJjb25maWcxIiwiY29uZmlnMiIsImNvbmZpZ3NFcXVhbCIsInRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZCIsInVwZGF0ZVZpZXciLCJjcmVhdGlvbkNvbnRleHQiLCJmcm9tUGFyZW50VGFnQ29uZmlnIiwiZnJvbVBhcmVudFRhZyIsImFuaW1FbnRlciIsImFuaW1MZWF2ZSIsIiR1aVZpZXdEYXRhIiwiJHVpVmlld0FuaW0iLCIkYW5pbUVudGVyIiwiJGFuaW1MZWF2ZSIsIiQkYW5pbUxlYXZlIiwiY2xvbmVkIiwidHJhY2VVSVZpZXdFdmVudCIsIl92aWV3RGF0YV8xIiwiY2xlYW51cExhc3RWaWV3IiwicmVnaXN0ZXJVSVZpZXciLCJoYXNDb21wb25lbnRJbXBsIiwiX3VpQ2FuRXhpdElkIiwidmlld1N0YXRlIiwiaG9va09wdGlvbnMiLCJ1aU9uUGFyYW1zQ2hhbmdlZCIsInJlc29sdmVDb250ZXh0Iiwidmlld0NyZWF0aW9uVHJhbnNfMSIsImV4aXRpbmciLCJ0b1BhcmFtcyIsImZyb21QYXJhbXMiLCJnZXROb2RlU2NoZW1hIiwicGFyYW1TY2hlbWEiLCJ0b1NjaGVtYSIsImZyb21TY2hlbWEiLCJjaGFuZ2VkVG9QYXJhbXMiLCJwYXJhbSIsImNoYW5nZWRLZXlzXzEiLCJ1aUNhbkV4aXQiLCJpZF8xIiwicHJldlRydXRoeUFuc3dlcl8xIiwicmVkaXJlY3RlZEZyb20iLCJjcml0ZXJpYSIsIm9uQmVmb3JlIiwiaWRzIiwidXNlQW5jaG9yU2Nyb2xsIiwiZGVmYXVsdCIsImciLCJldmFsIiwiSG9tZUNvbnRyb2xsZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJzb21ldGhpbmciLCJhcGkiLCJkb1Bvc3QiLCJ4bmFtZSIsIlNUQVRVUyIsIkFwaSIsInNlcnZlciIsImh0dHBTZXJ2ZXIiLCJmYWlsIiwiYWx3YXlzIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJub0dsb2JhbCIsImdldFByb3RvIiwiY2xhc3MydHlwZSIsImhhc093biIsImZuVG9TdHJpbmciLCJPYmplY3RGdW5jdGlvblN0cmluZyIsInN1cHBvcnQiLCJwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzIiwibm9Nb2R1bGUiLCJET01FdmFsIiwidG9UeXBlIiwicnRyaW0iLCJqcXVlcnkiLCJ0b0FycmF5IiwicHVzaFN0YWNrIiwicHJldk9iamVjdCIsImVhY2giLCJjb3B5SXNBcnJheSIsImlzUGxhaW5PYmplY3QiLCJyYW5kb20iLCJpc1JlYWR5IiwicHJvdG8iLCJDdG9yIiwiZ2xvYmFsRXZhbCIsIm1ha2VBcnJheSIsImdyZXAiLCJpbnZlcnQiLCJjYWxsYmFja0V4cGVjdCIsImd1aWQiLCJTaXp6bGUiLCJFeHByIiwiaXNYTUwiLCJ0b2tlbml6ZSIsIm91dGVybW9zdENvbnRleHQiLCJzb3J0SW5wdXQiLCJoYXNEdXBsaWNhdGUiLCJzZXREb2N1bWVudCIsImRvY0VsZW0iLCJkb2N1bWVudElzSFRNTCIsInJidWdneVFTQSIsInJidWdneU1hdGNoZXMiLCJwcmVmZXJyZWREb2MiLCJkaXJydW5zIiwiY2xhc3NDYWNoZSIsImNyZWF0ZUNhY2hlIiwidG9rZW5DYWNoZSIsImNvbXBpbGVyQ2FjaGUiLCJzb3J0T3JkZXIiLCJwdXNoX25hdGl2ZSIsImJvb2xlYW5zIiwid2hpdGVzcGFjZSIsInBzZXVkb3MiLCJyd2hpdGVzcGFjZSIsInJjb21tYSIsInJjb21iaW5hdG9ycyIsInJhdHRyaWJ1dGVRdW90ZXMiLCJycHNldWRvIiwicmlkZW50aWZpZXIiLCJtYXRjaEV4cHIiLCJJRCIsIkNMQVNTIiwiVEFHIiwiQVRUUiIsIlBTRVVETyIsIkNISUxEIiwiYm9vbCIsIm5lZWRzQ29udGV4dCIsInJpbnB1dHMiLCJyaGVhZGVyIiwicm5hdGl2ZSIsInJxdWlja0V4cHIiLCJyc2libGluZyIsInJ1bmVzY2FwZSIsImZ1bmVzY2FwZSIsImVzY2FwZWQiLCJlc2NhcGVkV2hpdGVzcGFjZSIsImhpZ2giLCJyY3NzZXNjYXBlIiwiZmNzc2VzY2FwZSIsImFzQ29kZVBvaW50IiwidW5sb2FkSGFuZGxlciIsImRpc2FibGVkQW5jZXN0b3IiLCJhZGRDb21iaW5hdG9yIiwiZGlyIiwiZWxzIiwic2VlZCIsIm5pZCIsIm5ld1NlbGVjdG9yIiwibmV3Q29udGV4dCIsIm93bmVyRG9jdW1lbnQiLCJxc2EiLCJ0b1NlbGVjdG9yIiwidGVzdENvbnRleHQiLCJxc2FFcnJvciIsImNhY2hlTGVuZ3RoIiwibWFya0Z1bmN0aW9uIiwiYXNzZXJ0IiwiYWRkSGFuZGxlIiwiYXR0ckhhbmRsZSIsInNpYmxpbmdDaGVjayIsImN1ciIsInNvdXJjZUluZGV4IiwiY3JlYXRlSW5wdXRQc2V1ZG8iLCJjcmVhdGVCdXR0b25Qc2V1ZG8iLCJjcmVhdGVEaXNhYmxlZFBzZXVkbyIsImlzRGlzYWJsZWQiLCJjcmVhdGVQb3NpdGlvbmFsUHNldWRvIiwibWF0Y2hJbmRleGVzIiwiaGFzQ29tcGFyZSIsInN1YldpbmRvdyIsImRlZmF1bHRWaWV3IiwiYXR0YWNoRXZlbnQiLCJnZXRCeUlkIiwiYXR0cklkIiwiZ2V0QXR0cmlidXRlTm9kZSIsIm1hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm9NYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsImRpc2Nvbm5lY3RlZE1hdGNoIiwiYWRvd24iLCJidXAiLCJzb3J0RGV0YWNoZWQiLCJhdXAiLCJhcCIsImJwIiwic3BlY2lmaWVkIiwic2VsIiwidW5pcXVlU29ydCIsImR1cGxpY2F0ZXMiLCJkZXRlY3REdXBsaWNhdGVzIiwic29ydFN0YWJsZSIsInNlbGVjdG9ycyIsImNyZWF0ZVBzZXVkbyIsIj4iLCIgIiwiKyIsInByZUZpbHRlciIsImV4Y2VzcyIsInVucXVvdGVkIiwibm9kZU5hbWVTZWxlY3RvciIsImNoZWNrIiwic2ltcGxlIiwiZm9yd2FyZCIsIm9mVHlwZSIsInhtbCIsInVuaXF1ZUNhY2hlIiwib3V0ZXJDYWNoZSIsIm5vZGVJbmRleCIsInVzZUNhY2hlIiwidW5pcXVlSUQiLCJwc2V1ZG8iLCJzZXRGaWx0ZXJzIiwibWF0Y2hlZCIsInVubWF0Y2hlZCIsImlubmVyVGV4dCIsImxhbmciLCJlbGVtTGFuZyIsImFjdGl2ZUVsZW1lbnQiLCJoYXNGb2N1cyIsInRhYkluZGV4IiwiZXZlbiIsIm9kZCIsImx0IiwiZ3QiLCJwYXNzd29yZCIsImltYWdlIiwiY29tYmluYXRvciIsImNoZWNrTm9uRWxlbWVudHMiLCJkb25lTmFtZSIsIm9sZENhY2hlIiwibmV3Q2FjaGUiLCJlbGVtZW50TWF0Y2hlciIsImNvbmRlbnNlIiwibmV3VW5tYXRjaGVkIiwibWFwcGVkIiwic2V0TWF0Y2hlciIsInBvc3RGaWx0ZXIiLCJwb3N0RmluZGVyIiwicG9zdFNlbGVjdG9yIiwidGVtcCIsInByZU1hcCIsInBvc3RNYXAiLCJwcmVleGlzdGluZyIsImNvbnRleHRzIiwibXVsdGlwbGVDb250ZXh0cyIsIm1hdGNoZXJJbiIsIm1hdGNoZXJPdXQiLCJtYXRjaGVyRnJvbVRva2VucyIsImNoZWNrQ29udGV4dCIsImxlYWRpbmdSZWxhdGl2ZSIsImltcGxpY2l0UmVsYXRpdmUiLCJtYXRjaENvbnRleHQiLCJtYXRjaEFueUNvbnRleHQiLCJwYXJzZU9ubHkiLCJzb0ZhciIsInByZUZpbHRlcnMiLCJjYWNoZWQiLCJzZXRNYXRjaGVycyIsImVsZW1lbnRNYXRjaGVycyIsImJ5U2V0IiwiYnlFbGVtZW50Iiwic3VwZXJNYXRjaGVyIiwib3V0ZXJtb3N0IiwibWF0Y2hlZENvdW50Iiwic2V0TWF0Y2hlZCIsImNvbnRleHRCYWNrdXAiLCJkaXJydW5zVW5pcXVlIiwibWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzIiwidW5pcXVlIiwiaXNYTUxEb2MiLCJlc2NhcGVTZWxlY3RvciIsInVudGlsIiwidHJ1bmNhdGUiLCJzaWJsaW5ncyIsInJuZWVkc0NvbnRleHQiLCJyc2luZ2xlVGFnIiwid2lubm93IiwicXVhbGlmaWVyIiwicm9vdGpRdWVyeSIsInBhcnNlSFRNTCIsInJwYXJlbnRzcHJldiIsImd1YXJhbnRlZWRVbmlxdWUiLCJwcmV2IiwidGFyZ2V0cyIsImNsb3Nlc3QiLCJwcmV2QWxsIiwiYWRkQmFjayIsInBhcmVudHMiLCJwYXJlbnRzVW50aWwiLCJuZXh0QWxsIiwibmV4dFVudGlsIiwicHJldlVudGlsIiwicm5vdGh0bWx3aGl0ZSIsIklkZW50aXR5IiwiVGhyb3dlciIsImV4IiwiYWRvcHRWYWx1ZSIsIm5vVmFsdWUiLCJDYWxsYmFja3MiLCJjcmVhdGVPcHRpb25zIiwiZmlyaW5nIiwibWVtb3J5IiwiZmlyZWQiLCJsb2NrZWQiLCJmaXJpbmdJbmRleCIsImZpcmUiLCJvbmNlIiwic3RvcE9uRmFsc2UiLCJkaXNhYmxlIiwibG9jayIsImZpcmVXaXRoIiwiRGVmZXJyZWQiLCJuZXdEZWZlciIsInJldHVybmVkIiwic3BlY2lhbCIsIm1pZ2h0VGhyb3ciLCJub3RpZnlXaXRoIiwicmVzb2x2ZVdpdGgiLCJleGNlcHRpb25Ib29rIiwic3RhY2tUcmFjZSIsInJlamVjdFdpdGgiLCJnZXRTdGFja0hvb2siLCJzdGF0ZVN0cmluZyIsInNpbmdsZVZhbHVlIiwicmVtYWluaW5nIiwicmVzb2x2ZUNvbnRleHRzIiwicmVzb2x2ZVZhbHVlcyIsIm1hc3RlciIsInVwZGF0ZUZ1bmMiLCJyZXJyb3JOYW1lcyIsInJlYWR5RXhjZXB0aW9uIiwicmVhZHlMaXN0IiwiY29tcGxldGVkIiwicmVhZHlXYWl0Iiwid2FpdCIsImRvU2Nyb2xsIiwiYWNjZXNzIiwiY2hhaW5hYmxlIiwiZW1wdHlHZXQiLCJyYXciLCJidWxrIiwicm1zUHJlZml4IiwicmRhc2hBbHBoYSIsImZjYW1lbENhc2UiLCJhY2NlcHREYXRhIiwib3duZXIiLCJEYXRhIiwiY29uZmlndXJhYmxlIiwiZGF0YVByaXYiLCJkYXRhVXNlciIsInJicmFjZSIsInJtdWx0aURhc2giLCJkYXRhQXR0ciIsImdldERhdGEiLCJfcmVtb3ZlRGF0YSIsImRlcXVldWUiLCJzdGFydExlbmd0aCIsImhvb2tzIiwiX3F1ZXVlSG9va3MiLCJzdG9wIiwiY2xlYXJRdWV1ZSIsInBudW0iLCJyY3NzTnVtIiwiY3NzRXhwYW5kIiwiaXNIaWRkZW5XaXRoaW5UcmVlIiwiZGlzcGxheSIsInN3YXAiLCJvbGQiLCJhZGp1c3RDU1MiLCJ2YWx1ZVBhcnRzIiwidHdlZW4iLCJhZGp1c3RlZCIsInNjYWxlIiwibWF4SXRlcmF0aW9ucyIsInVuaXQiLCJjc3NOdW1iZXIiLCJpbml0aWFsSW5Vbml0IiwiZGVmYXVsdERpc3BsYXlNYXAiLCJnZXREZWZhdWx0RGlzcGxheSIsInNob3dIaWRlIiwic2hvdyIsImhpZGUiLCJ0b2dnbGUiLCJyY2hlY2thYmxlVHlwZSIsInJ0YWdOYW1lIiwicnNjcmlwdFR5cGUiLCJnZXRBbGwiLCJzZXRHbG9iYWxFdmFsIiwicmVmRWxlbWVudHMiLCJyaHRtbCIsImJ1aWxkRnJhZ21lbnQiLCJzY3JpcHRzIiwic2VsZWN0aW9uIiwiaWdub3JlZCIsImh0bWxQcmVmaWx0ZXIiLCJkaXYiLCJjaGVja0Nsb25lIiwibm9DbG9uZUNoZWNrZWQiLCJya2V5RXZlbnQiLCJybW91c2VFdmVudCIsInJ0eXBlbmFtZXNwYWNlIiwicmV0dXJuVHJ1ZSIsInJldHVybkZhbHNlIiwic2FmZUFjdGl2ZUVsZW1lbnQiLCJvcmlnRm4iLCJoYW5kbGVPYmpJbiIsImV2ZW50SGFuZGxlIiwiaGFuZGxlT2JqIiwiaGFuZGxlcnMiLCJuYW1lc3BhY2VzIiwib3JpZ1R5cGUiLCJlbGVtRGF0YSIsInRyaWdnZXJlZCIsImRpc3BhdGNoIiwiZGVsZWdhdGVUeXBlIiwiYmluZFR5cGUiLCJkZWxlZ2F0ZUNvdW50Iiwic2V0dXAiLCJtYXBwZWRUeXBlcyIsIm9yaWdDb3VudCIsInRlYXJkb3duIiwicmVtb3ZlRXZlbnQiLCJuYXRpdmVFdmVudCIsImhhbmRsZXJRdWV1ZSIsImZpeCIsImRlbGVnYXRlVGFyZ2V0IiwicHJlRGlzcGF0Y2giLCJpc1Byb3BhZ2F0aW9uU3RvcHBlZCIsImN1cnJlbnRUYXJnZXQiLCJybmFtZXNwYWNlIiwicG9zdERpc3BhdGNoIiwibWF0Y2hlZEhhbmRsZXJzIiwibWF0Y2hlZFNlbGVjdG9ycyIsImFkZFByb3AiLCJFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJ3cml0YWJsZSIsIm5vQnViYmxlIiwiY2xpY2siLCJiZWZvcmV1bmxvYWQiLCJyZXR1cm5WYWx1ZSIsInByb3BzIiwidGltZVN0YW1wIiwibm93IiwiaXNTaW11bGF0ZWQiLCJhbHRLZXkiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImNoYW5nZWRUb3VjaGVzIiwiZGV0YWlsIiwiZXZlbnRQaGFzZSIsInBhZ2VYIiwicGFnZVkiLCJjaGFyIiwiY2hhckNvZGUiLCJidXR0b25zIiwiY2xpZW50WCIsImNsaWVudFkiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwic2NyZWVuWCIsInNjcmVlblkiLCJ0YXJnZXRUb3VjaGVzIiwidG9FbGVtZW50IiwidG91Y2hlcyIsInBvaW50ZXJlbnRlciIsInBvaW50ZXJsZWF2ZSIsIm9yaWciLCJyeGh0bWxUYWciLCJybm9Jbm5lcmh0bWwiLCJyY2hlY2tlZCIsInJjbGVhblNjcmlwdCIsIm1hbmlwdWxhdGlvblRhcmdldCIsImRpc2FibGVTY3JpcHQiLCJyZXN0b3JlU2NyaXB0IiwiY2xvbmVDb3B5RXZlbnQiLCJwZGF0YU9sZCIsInBkYXRhQ3VyIiwidWRhdGFPbGQiLCJ1ZGF0YUN1ciIsImZpeElucHV0IiwiZG9tTWFuaXAiLCJoYXNTY3JpcHRzIiwiaU5vQ2xvbmUiLCJ2YWx1ZUlzRnVuY3Rpb24iLCJfZXZhbFVybCIsImRhdGFBbmRFdmVudHMiLCJkZWVwRGF0YUFuZEV2ZW50cyIsInNyY0VsZW1lbnRzIiwiZGVzdEVsZW1lbnRzIiwiaW5QYWdlIiwiYXBwZW5kVG8iLCJwcmVwZW5kVG8iLCJpbnNlcnRBZnRlciIsInJlcGxhY2VBbGwiLCJvcmlnaW5hbCIsImluc2VydCIsInJudW1ub25weCIsImdldFN0eWxlcyIsIm9wZW5lciIsInJib3hTdHlsZSIsImN1ckNTUyIsIndpZHRoIiwibWluV2lkdGgiLCJtYXhXaWR0aCIsImdldFByb3BlcnR5VmFsdWUiLCJwaXhlbEJveFN0eWxlcyIsImFkZEdldEhvb2tJZiIsImNvbmRpdGlvbkZuIiwiY29tcHV0ZVN0eWxlVGVzdHMiLCJjb250YWluZXIiLCJkaXZTdHlsZSIsInBpeGVsUG9zaXRpb25WYWwiLCJyZWxpYWJsZU1hcmdpbkxlZnRWYWwiLCJyb3VuZFBpeGVsTWVhc3VyZXMiLCJtYXJnaW5MZWZ0IiwicGl4ZWxCb3hTdHlsZXNWYWwiLCJib3hTaXppbmdSZWxpYWJsZVZhbCIsInNjcm9sbGJveFNpemVWYWwiLCJtZWFzdXJlIiwiYmFja2dyb3VuZENsaXAiLCJjbGVhckNsb25lU3R5bGUiLCJib3hTaXppbmdSZWxpYWJsZSIsInBpeGVsUG9zaXRpb24iLCJyZWxpYWJsZU1hcmdpbkxlZnQiLCJzY3JvbGxib3hTaXplIiwicmRpc3BsYXlzd2FwIiwicmN1c3RvbVByb3AiLCJjc3NTaG93IiwidmlzaWJpbGl0eSIsImNzc05vcm1hbFRyYW5zZm9ybSIsImxldHRlclNwYWNpbmciLCJmb250V2VpZ2h0IiwiY3NzUHJlZml4ZXMiLCJlbXB0eVN0eWxlIiwiZmluYWxQcm9wTmFtZSIsImNzc1Byb3BzIiwiY2FwTmFtZSIsInZlbmRvclByb3BOYW1lIiwic2V0UG9zaXRpdmVOdW1iZXIiLCJzdWJ0cmFjdCIsImJveE1vZGVsQWRqdXN0bWVudCIsImRpbWVuc2lvbiIsImJveCIsImlzQm9yZGVyQm94IiwiY29tcHV0ZWRWYWwiLCJkZWx0YSIsImNlaWwiLCJnZXRXaWR0aE9ySGVpZ2h0IiwidmFsdWVJc0JvcmRlckJveCIsIlR3ZWVuIiwiZWFzaW5nIiwiY3NzSG9va3MiLCJvcGFjaXR5IiwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiLCJjb2x1bW5Db3VudCIsImZpbGxPcGFjaXR5IiwiZmxleEdyb3ciLCJmbGV4U2hyaW5rIiwibGluZUhlaWdodCIsIm9yZGVyIiwib3JwaGFucyIsIndpZG93cyIsInpJbmRleCIsInpvb20iLCJvcmlnTmFtZSIsImlzQ3VzdG9tUHJvcCIsInNldFByb3BlcnR5IiwiZ2V0Q2xpZW50UmVjdHMiLCJtYXJnaW4iLCJwYWRkaW5nIiwiYm9yZGVyIiwiZXhwYW5kIiwiZXhwYW5kZWQiLCJwcm9wSG9va3MiLCJwZXJjZW50IiwiZWFzZWQiLCJkdXJhdGlvbiIsImZ4Iiwic2Nyb2xsVG9wIiwic2Nyb2xsTGVmdCIsImxpbmVhciIsInN3aW5nIiwiY29zIiwiUEkiLCJmeE5vdyIsImluUHJvZ3Jlc3MiLCJyZnh0eXBlcyIsInJydW4iLCJzY2hlZHVsZSIsInRpY2siLCJjcmVhdGVGeE5vdyIsImdlbkZ4IiwiaW5jbHVkZVdpZHRoIiwiaGVpZ2h0IiwiY3JlYXRlVHdlZW4iLCJBbmltYXRpb24iLCJ0d2VlbmVycyIsInN0b3BwZWQiLCJwcmVmaWx0ZXJzIiwiY3VycmVudFRpbWUiLCJzdGFydFRpbWUiLCJ0d2VlbnMiLCJzcGVjaWFsRWFzaW5nIiwib3JpZ2luYWxQcm9wZXJ0aWVzIiwib3JpZ2luYWxPcHRpb25zIiwiZ290b0VuZCIsInByb3BGaWx0ZXIiLCJhbmltIiwiKiIsInR3ZWVuZXIiLCJvbGRmaXJlIiwicHJvcFR3ZWVuIiwicmVzdG9yZURpc3BsYXkiLCJpc0JveCIsImRhdGFTaG93IiwidW5xdWV1ZWQiLCJvdmVyZmxvdyIsIm92ZXJmbG93WCIsIm92ZXJmbG93WSIsInByZWZpbHRlciIsInNwZWVkIiwib3B0Iiwic3BlZWRzIiwiZmFkZVRvIiwib3B0YWxsIiwiZG9BbmltYXRpb24iLCJmaW5pc2giLCJzdG9wUXVldWUiLCJ0aW1lcnMiLCJjc3NGbiIsInNsaWRlRG93biIsInNsaWRlVXAiLCJzbGlkZVRvZ2dsZSIsImZhZGVJbiIsImZhZGVPdXQiLCJmYWRlVG9nZ2xlIiwic2xvdyIsImZhc3QiLCJjaGVja09uIiwib3B0U2VsZWN0ZWQiLCJyYWRpb1ZhbHVlIiwiYm9vbEhvb2siLCJuVHlwZSIsImF0dHJIb29rcyIsImF0dHJOYW1lcyIsImxvd2VyY2FzZU5hbWUiLCJyZm9jdXNhYmxlIiwicmNsaWNrYWJsZSIsInN0cmlwQW5kQ29sbGFwc2UiLCJnZXRDbGFzcyIsImNsYXNzZXNUb0FycmF5IiwicmVtb3ZlUHJvcCIsInByb3BGaXgiLCJ0YWJpbmRleCIsImZvciIsImNsYXNzIiwiY3VyVmFsdWUiLCJmaW5hbFZhbHVlIiwic3RhdGVWYWwiLCJpc1ZhbGlkVmFsdWUiLCJjbGFzc05hbWVzIiwicnJldHVybiIsInZhbEhvb2tzIiwib3B0aW9uU2V0IiwiZm9jdXNpbiIsInJmb2N1c01vcnBoIiwic3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2siLCJvbmx5SGFuZGxlcnMiLCJidWJibGVUeXBlIiwib250eXBlIiwibGFzdEVsZW1lbnQiLCJldmVudFBhdGgiLCJpc1RyaWdnZXIiLCJwYXJlbnRXaW5kb3ciLCJzaW11bGF0ZSIsImF0dGFjaGVzIiwibm9uY2UiLCJycXVlcnkiLCJwYXJzZVhNTCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInJicmFja2V0IiwickNSTEYiLCJyc3VibWl0dGVyVHlwZXMiLCJyc3VibWl0dGFibGUiLCJidWlsZFBhcmFtcyIsInRyYWRpdGlvbmFsIiwidmFsdWVPckZ1bmN0aW9uIiwic2VyaWFsaXplQXJyYXkiLCJyMjAiLCJyaGFzaCIsInJhbnRpQ2FjaGUiLCJyaGVhZGVycyIsInJub0NvbnRlbnQiLCJycHJvdG9jb2wiLCJ0cmFuc3BvcnRzIiwiYWxsVHlwZXMiLCJvcmlnaW5BbmNob3IiLCJhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMiLCJzdHJ1Y3R1cmUiLCJkYXRhVHlwZUV4cHJlc3Npb24iLCJkYXRhVHlwZSIsImRhdGFUeXBlcyIsImluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzIiwianFYSFIiLCJpbnNwZWN0ZWQiLCJzZWVraW5nVHJhbnNwb3J0IiwiaW5zcGVjdCIsInByZWZpbHRlck9yRmFjdG9yeSIsImRhdGFUeXBlT3JUcmFuc3BvcnQiLCJhamF4RXh0ZW5kIiwiZmxhdE9wdGlvbnMiLCJhamF4U2V0dGluZ3MiLCJsYXN0TW9kaWZpZWQiLCJldGFnIiwiaXNMb2NhbCIsInByb2Nlc3NEYXRhIiwiYWNjZXB0cyIsInJlc3BvbnNlRmllbGRzIiwiY29udmVydGVycyIsIiogdGV4dCIsInRleHQgaHRtbCIsInRleHQganNvbiIsInRleHQgeG1sIiwiYWpheFNldHVwIiwic2V0dGluZ3MiLCJhamF4UHJlZmlsdGVyIiwiYWpheFRyYW5zcG9ydCIsImFqYXgiLCJ0cmFuc3BvcnQiLCJjYWNoZVVSTCIsInJlc3BvbnNlSGVhZGVyc1N0cmluZyIsInJlc3BvbnNlSGVhZGVycyIsInRpbWVvdXRUaW1lciIsInVybEFuY2hvciIsImZpcmVHbG9iYWxzIiwidW5jYWNoZWQiLCJjYWxsYmFja0NvbnRleHQiLCJnbG9iYWxFdmVudENvbnRleHQiLCJjb21wbGV0ZURlZmVycmVkIiwic3RhdHVzQ29kZSIsInJlcXVlc3RIZWFkZXJzIiwicmVxdWVzdEhlYWRlcnNOYW1lcyIsInN0ckFib3J0IiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJvdmVycmlkZU1pbWVUeXBlIiwibWltZVR5cGUiLCJmaW5hbFRleHQiLCJjcm9zc0RvbWFpbiIsImhhc0NvbnRlbnQiLCJpZk1vZGlmaWVkIiwiYmVmb3JlU2VuZCIsInN1Y2Nlc3MiLCJuYXRpdmVTdGF0dXNUZXh0IiwicmVzcG9uc2VzIiwibW9kaWZpZWQiLCJjdCIsImZpbmFsRGF0YVR5cGUiLCJmaXJzdERhdGFUeXBlIiwiYWpheEhhbmRsZVJlc3BvbnNlcyIsImNvbnYyIiwiY29udiIsImRhdGFGaWx0ZXIiLCJ0aHJvd3MiLCJhamF4Q29udmVydCIsImdldEpTT04iLCJnZXRTY3JpcHQiLCJ3cmFwQWxsIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJ3cmFwSW5uZXIiLCJodG1sSXNGdW5jdGlvbiIsInVud3JhcCIsInZpc2libGUiLCJvZmZzZXRIZWlnaHQiLCJ4aHJTdWNjZXNzU3RhdHVzIiwiMCIsIjEyMjMiLCJ4aHJTdXBwb3J0ZWQiLCJjb3JzIiwiZXJyb3JDYWxsYmFjayIsInVzZXJuYW1lIiwieGhyRmllbGRzIiwib25yZWFkeXN0YXRlY2hhbmdlIiwiYmluYXJ5IiwidGV4dCBzY3JpcHQiLCJjaGFyc2V0Iiwic2NyaXB0Q2hhcnNldCIsIm9sZENhbGxiYWNrcyIsInJqc29ucCIsImpzb25wIiwianNvbnBDYWxsYmFjayIsIm9yaWdpbmFsU2V0dGluZ3MiLCJjYWxsYmFja05hbWUiLCJvdmVyd3JpdHRlbiIsInJlc3BvbnNlQ29udGFpbmVyIiwianNvblByb3AiLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJpbXBsZW1lbnRhdGlvbiIsImtlZXBTY3JpcHRzIiwiYW5pbWF0ZWQiLCJzZXRPZmZzZXQiLCJjdXJQb3NpdGlvbiIsImN1ckxlZnQiLCJjdXJDU1NUb3AiLCJjdXJUb3AiLCJjdXJPZmZzZXQiLCJjdXJDU1NMZWZ0IiwiY3VyRWxlbSIsInVzaW5nIiwicmVjdCIsInBhZ2VZT2Zmc2V0IiwicGFnZVhPZmZzZXQiLCJvZmZzZXRQYXJlbnQiLCJwYXJlbnRPZmZzZXQiLCJIZWlnaHQiLCJXaWR0aCIsIiIsImRlZmF1bHRFeHRyYSIsImZ1bmNOYW1lIiwiaG92ZXIiLCJmbk92ZXIiLCJmbk91dCIsInVuZGVsZWdhdGUiLCJwcm94eSIsImhvbGRSZWFkeSIsImhvbGQiLCJwYXJzZUpTT04iLCJpc051bWVyaWMiLCJfalF1ZXJ5IiwiXyQiLCJub0NvbmZsaWN0IiwiYWNjb3VudE5hbWUiLCJSZWplY3RUeXBlIiwiR2xvYiIsImdsb2IiLCJyZWdleHBTdHJpbmciLCJzZWciLCJxdWV1ZV9RdWV1ZSIsIlF1ZXVlIiwiX2l0ZW1zIiwiX2xpbWl0IiwiX2V2aWN0TGlzdGVuZXJzIiwib25FdmljdCIsImVucXVldWUiLCJldmljdCIsImNsZWFyIiwicGVla1RhaWwiLCJwZWVrSGVhZCIsInJlamVjdEZhY3RvcnlfaWQiLCJyZWplY3RGYWN0b3J5X1JlamVjdGlvbiIsIlJlamVjdGlvbiIsImlzUmVqZWN0aW9uUHJvbWlzZSIsImhvZiIsIl90cmFuc2l0aW9uUmVqZWN0aW9uIiwic3VwZXJzZWRlZCIsInJlamVjdGlvbiIsIlNVUEVSU0VERUQiLCJyZWRpcmVjdGVkIiwiaW52YWxpZCIsIklOVkFMSUQiLCJJR05PUkVEIiwiYWJvcnRlZCIsIkFCT1JURUQiLCJlcnJvcmVkIiwiRVJST1IiLCJub3JtYWxpemUiLCJkZXRhaWxTdHJpbmciLCJ0b1Byb21pc2UiLCJtYXhMZW5ndGgiLCJwYWRTdHJpbmciLCJmdW5jdGlvblRvU3RyaW5nIiwiZm5TdHIiLCJuYW1lZEZ1bmN0aW9uTWF0Y2giLCJfZm4iLCJpc1JlamVjdGlvbiIsInN0cmluZ2lmeVBhdHRlcm4iLCJiZWZvcmVBZnRlclN1YnN0ciIsImhvc3RSZWdleCIsInN0cmlwTGFzdFBhdGhFbGVtZW50Iiwic3BsaXRIYXNoIiwic3BsaXRRdWVyeSIsInNwbGl0RXF1YWwiLCJ0cmltSGFzaFZhbCIsInNwbGl0T25EZWxpbSIsImRlbGltIiwiam9pbk5laWdoYm9yc1IiLCJ1aVZpZXdTdHJpbmciLCJ1aXZpZXciLCJub3JtYWxpemVkQ2F0IiwiQ2F0ZWdvcnkiLCJjb25zb2xldGFibGUiLCJ0YWJsZSIsIl90aWQiLCJfcmlkIiwidHJhbnNMYmwiLCJ0cmFjZV9UcmFjZSIsIlRyYWNlIiwiX2VuYWJsZWQiLCJfc2V0IiwiY2F0ZWdvcmllcyIsImNhdGVnb3J5IiwiZW5hYmxlIiwidHJhY2VUcmFuc2l0aW9uU3RhcnQiLCJUUkFOU0lUSU9OIiwidHJhY2VUcmFuc2l0aW9uSWdub3JlZCIsInRyYWNlSG9va0ludm9jYXRpb24iLCJIT09LIiwicmVnaXN0ZXJlZEhvb2siLCJ0cmFjZUhvb2tSZXN1bHQiLCJob29rUmVzdWx0IiwidHJhbnNpdGlvbk9wdGlvbnMiLCJ0cmFjZVJlc29sdmVQYXRoIiwiUkVTT0xWRSIsInRyYWNlUmVzb2x2YWJsZVJlc29sdmVkIiwidHJhY2VFcnJvciIsInRyYWNlU3VjY2VzcyIsImZpbmFsU3RhdGUiLCJ2aWV3RGF0YSIsIlVJVklFVyIsInRyYWNlVmlld1N5bmMiLCJWSUVXQ09ORklHIiwidWl2aGVhZGVyIiwiX2EiLCJfYiIsInVpdiIsImxvY2FsZUNvbXBhcmUiLCJ2aWV3Q29uZmlnU3RyaW5nIiwidHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50IiwicGFyYW1UeXBlX1BhcmFtVHlwZSIsIlBhcmFtVHlwZSIsIiRzdWJQYXR0ZXJuIiwic3ViIiwiJGFzQXJyYXkiLCJpc1NlYXJjaCIsImFycmF5V3JhcCIsImFycmF5SGFuZGxlciIsImFsbFRydXRoeU1vZGUiLCJhcnJheVVud3JhcCIsImFycmF5RXF1YWxzSGFuZGxlciIsInZhbDEiLCJ2YWwyIiwicGFyYW1UeXBlRm4iLCJ3cmFwcGVyRm4iLCJkeW5hbWljIiwiJGFycmF5TW9kZSIsIkRlZlR5cGUiLCJpc1Nob3J0aGFuZCIsImdldFBhcmFtRGVjbGFyYXRpb24iLCJwYXJhbU5hbWUiLCJub1JlbG9hZE9uU2VhcmNoIiwicmVsb2FkT25TZWFyY2giLCJTRUFSQ0giLCJkZWZhdWx0Q29uZmlnIiwicGFyYW1Db25maWciLCJnZXRTdGF0aWNEZWZhdWx0VmFsdWUiLCIkJGZuIiwidW53cmFwU2hvcnRoYW5kIiwicGFyYW1fUGFyYW0iLCJQYXJhbSIsInVybFR5cGUiLCJwYXJhbVR5cGVzIiwiQ09ORklHIiwiUEFUSCIsImdldFR5cGUiLCJhcnJheU1vZGUiLCJhcnJheURlZmF1bHRzIiwiYXJyYXlQYXJhbU5vbWVuY2xhdHVyZSIsImdldEFycmF5TW9kZSIsImlzT3B0aW9uYWwiLCJzcXVhc2giLCJkZWZhdWx0UG9saWN5IiwiZ2V0U3F1YXNoUG9saWN5IiwiZGVmYXVsdFNxdWFzaFBvbGljeSIsImNvbmZpZ3VyZWRLZXlzIiwiZ2V0UmVwbGFjZSIsInBhcmFtc18xIiwidmFsdWVzMSIsInZhbHVlczIiLCJ2YWxpZGF0ZXMiLCJpc0RlZmF1bHRWYWx1ZSIsInJlcGxhY2VTcGVjaWFsVmFsdWVzIiwiX2RlZmF1bHRWYWx1ZUNhY2hlIiwiY29yZXNlcnZpY2VzIiwiZ2V0RGVmYXVsdFZhbHVlIiwiZW5jb2RlZCIsInBhcmFtVHlwZXNfUGFyYW1UeXBlcyIsIlBhcmFtVHlwZXMiLCJ0eXBlUXVldWUiLCJkZWZhdWx0VHlwZXMiLCJkZWZpbml0aW9uRm4iLCJfZmx1c2hUeXBlUXVldWUiLCJtYWtlRGVmYXVsdFR5cGUiLCJ2YWxUb1N0cmluZyIsImRlZmF1bHRUeXBlQmFzZSIsInF1ZXJ5IiwiaW50IiwiY2FwdHVyZSIsImluaXREZWZhdWx0VHlwZXMiLCJzdGF0ZVBhcmFtc19TdGF0ZVBhcmFtcyIsIlN0YXRlUGFyYW1zIiwiJGluaGVyaXQiLCIkdG8iLCJwYXJlbnRQYXJhbXMiLCJpbmhlcml0TGlzdCIsInBhdGhOb2RlX1BhdGhOb2RlIiwiUGF0aE5vZGUiLCJzdGF0ZU9yTm9kZSIsInBhcmFtZXRlcnMiLCJhcHBseVJhd1BhcmFtcyIsInBEZWYiLCJwYXJhbURlZiIsImdldFBhcmFtVmFsIiwicGFyYW1ldGVyIiwicGFyYW1zRm4iLCJ0YXJnZXRTdGF0ZV9UYXJnZXRTdGF0ZSIsIlRhcmdldFN0YXRlIiwiX3N0YXRlUmVnaXN0cnkiLCJfaWRlbnRpZmllciIsIl9wYXJhbXMiLCJfb3B0aW9ucyIsIl9kZWZpbml0aW9uIiwiZXhpc3RzIiwidmFsaWQiLCJ3aXRoU3RhdGUiLCJ3aXRoUGFyYW1zIiwid2l0aE9wdGlvbnMiLCJuZXdPcHRzIiwiaXNEZWYiLCJwYXRoVXRpbHNfUGF0aFV0aWxzIiwiUGF0aFV0aWxzIiwibWFrZVRhcmdldFN0YXRlIiwicmVnaXN0cnkiLCJidWlsZFBhdGgiLCJ0YXJnZXRTdGF0ZSIsImJ1aWxkVG9QYXRoIiwiZnJvbVBhdGgiLCJ0b1BhdGgiLCJpbmhlcml0UGFyYW1zIiwiYXBwbHlWaWV3Q29uZmlncyIsInZpZXdEZWNscyIsInN1YlBhdGgiLCJ2aWV3Q29uZmlncyIsImNyZWF0ZVZpZXdDb25maWciLCJ0b0tleXMiLCJub0luaGVyaXQiLCJ0b05vZGUiLCJ0b1BhcmFtVmFscyIsImluY29taW5nUGFyYW1WYWxzIiwiZnJvbVBhcmFtVmFscyIsIm5vZGVQYXJhbVZhbHMiLCJvd25QYXJhbVZhbHMiLCJyZWxvYWRTdGF0ZSIsInJldGFpbmVkIiwiZW50ZXJpbmciLCJrZWVwIiwibm9kZXNNYXRjaCIsIm5vZGUxIiwibm9kZTIiLCJub25EeW5hbWljUGFyYW1zIiwicmV0YWluZWRXaXRoVG9QYXJhbXMiLCJyZXRhaW5lZE5vZGUiLCJtYXRjaGluZyIsInBhdGhBIiwicGF0aEIiLCJub2RlQSIsIm5vZGVCIiwiZWxlbWVudElkeCIsInJlc29sdmVQb2xpY2llcyIsIkxBWlkiLCJFQUdFUiIsIldBSVQiLCJOT1dBSVQiLCJSWFdBSVQiLCJkZWZhdWx0UmVzb2x2ZVBvbGljeSIsInJlc29sdmFibGVfUmVzb2x2YWJsZSIsInBvbGljeSIsInJlc29sdmVkIiwidGhpc1BvbGljeSIsInN0YXRlUG9saWN5IiwicmVzb2x2ZVBvbGljeSIsImZpbmROb2RlIiwibWF5YmVXYWl0Rm9yUngiLCJvYnNlcnZhYmxlJCIsInRha2UiLCJnZXREZXBlbmRlbmNpZXMiLCJyZXNvbHZlZERlcHMiLCJyZXNvbHZlZFZhbHVlIiwiZnJvbURhdGEiLCJBTExfV0hFTlMiLCJFQUdFUl9XSEVOUyIsIk5BVElWRV9JTkpFQ1RPUl9UT0tFTiIsInJlc29sdmVDb250ZXh0X1Jlc29sdmVDb250ZXh0IiwiX3BhdGgiLCJhZGRSZXNvbHZhYmxlcyIsIm5ld1Jlc29sdmFibGVzIiwicmVzb2x2ZVBhdGgiLCJtYXRjaGVkV2hlbnMiLCJtYXRjaGVzUG9saWN5IiwiYWNjZXB0ZWRWYWxzIiwid2hlbk9yQXN5bmMiLCJub2RlUmVzb2x2YWJsZXMiLCJub3dhaXQiLCJnZXRSZXN1bHQiLCJfaW5qZWN0b3IiLCJyZXNvbHZlQ29udGV4dF9VSUluamVjdG9ySW1wbCIsImF2YWlsYWJsZVJlc29sdmFibGVzIiwiX25vZGUiLCJmcm9tSW5qZWN0b3IiLCJnZXROYXRpdmUiLCJVSUluamVjdG9ySW1wbCIsIm5hdGl2ZSIsImdldEFzeW5jIiwibmFtZUJ1aWxkZXIiLCJzZWxmQnVpbGRlciIsImRhdGFCdWlsZGVyIiwiZ2V0VXJsQnVpbGRlciIsIiR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyIiwicGFyc2VVcmwiLCJpc01hdGNoZXIiLCJuYXZpZ2FibGUiLCJnZXROYXZpZ2FibGVCdWlsZGVyIiwiaXNSb290IiwiZ2V0UGFyYW1zQnVpbGRlciIsInBhcmFtRmFjdG9yeSIsInVybFBhcmFtcyIsIm5vblVybFBhcmFtcyIsInBhdGhCdWlsZGVyIiwiaW5jbHVkZXNCdWlsZGVyIiwicmVzb2x2YWJsZXNCdWlsZGVyIiwiZ2V0VG9rZW4iLCJwcm92aWRlIiwibGl0ZXJhbDJSZXNvbHZhYmxlIiwidXNlRmFjdG9yeSIsImRlcGVuZGVuY2llcyIsInVzZUNsYXNzIiwidXNlVmFsdWUiLCJ1c2VFeGlzdGluZyIsInR1cGxlMlJlc29sdmFibGUiLCJpdGVtMlJlc29sdmFibGUiLCJkZWNsIiwicmVzb2x2ZU9iaiIsIm9iamVjdHMyVHVwbGVzIiwiVHJhbnNpdGlvbkhvb2tQaGFzZSIsIlRyYW5zaXRpb25Ib29rU2NvcGUiLCJzdGF0ZUJ1aWxkZXJfU3RhdGVCdWlsZGVyIiwiU3RhdGVCdWlsZGVyIiwiYnVpbGRlcnMiLCJwYXJlbnROYW1lIiwiYnVpbGRlciIsImJ1aWxkIiwic3RhdGVPYmplY3RfU3RhdGVPYmplY3QiLCJTdGF0ZU9iamVjdCIsInN0YXRlRGVjbCIsImlzU3RhdGVDbGFzcyIsIl9fc3RhdGVPYmplY3RDYWNoZSIsIm5hbWVHbG9iIiwibWF0Y2hpbmdLZXlzIiwiaXNTdGF0ZSIsInN0YXRlTWF0Y2hlcl9TdGF0ZU1hdGNoZXIiLCJTdGF0ZU1hdGNoZXIiLCJfc3RhdGVzIiwiaXNSZWxhdGl2ZSIsIm1hdGNoR2xvYiIsImlzU3RyIiwiYmFzZVN0YXRlIiwic3BsaXROYW1lIiwicGF0aExlbmd0aCIsInJlbE5hbWUiLCJzdGF0ZVF1ZXVlTWFuYWdlcl9TdGF0ZVF1ZXVlTWFuYWdlciIsIlN0YXRlUXVldWVNYW5hZ2VyIiwiJHJlZ2lzdHJ5IiwiZmx1c2giLCJyZWdpc3RlcmVkIiwicHJldmlvdXNRdWV1ZUxlbmd0aCIsImdldFN0YXRlIiwibm90aWZ5TGlzdGVuZXJzIiwibmFtZV8xIiwib3JwaGFuSWR4IiwiZXhpc3RpbmdTdGF0ZSIsImV4aXN0aW5nRnV0dXJlU3RhdGUiLCJhdHRhY2hSb3V0ZSIsImFic3RyYWN0IiwidXJsUnVsZUZhY3RvcnkiLCJzdGF0ZVJlZ2lzdHJ5X1N0YXRlUmVnaXN0cnkiLCJTdGF0ZVJlZ2lzdHJ5Iiwic3RhdGVRdWV1ZSIsIl9yZWdpc3RlclJvb3QiLCJfcm9vdCIsIiMiLCJzdGF0ZURlZmluaXRpb24iLCJfZGVyZWdpc3RlclRyZWUiLCJnZXRDaGlsZHJlbiIsIl9jaGlsZHJlbiIsImRlcmVnaXN0ZXJlZCIsIiR1ciIsInJlbW92ZVJ1bGUiLCJkZXJlZ2lzdGVyZWRTdGF0ZXMiLCJmb3VuZCIsImRlZmF1bHRPcHRpb25zIiwidHJhY2VEYXRhIiwidHJhbnNpdGlvbkhvb2tfVHJhbnNpdGlvbkhvb2siLCJUcmFuc2l0aW9uSG9vayIsImlzU3VwZXJzZWRlZCIsImhvb2tQaGFzZSIsIlJVTiIsImlzQWN0aXZlIiwiZXZlbnRUeXBlIiwid2FpdEZvciIsIm5leHRIb29rIiwiaW52b2tlSG9vayIsImludm9rZUhvb2tzIiwicmVtYWluaW5nSG9va3MiLCJydW5BbGxIb29rcyIsImxvZ0Vycm9yIiwiZGVmYXVsdEVycm9ySGFuZGxlciIsIl9kZXJlZ2lzdGVyZWQiLCJub3RDdXJyZW50IiwiZ2V0Tm90Q3VycmVudFJlamVjdGlvbiIsImhhbmRsZUVycm9yIiwiZ2V0RXJyb3JIYW5kbGVyIiwiaGFuZGxlUmVzdWx0IiwiZ2V0UmVzdWx0SGFuZGxlciIsInN5bmNocm9ub3VzIiwiaW52b2tlTGltaXQiLCJpbnZva2VDb3VudCIsImhhbmRsZUhvb2tSZXN1bHQiLCJpc1RhcmdldFN0YXRlIiwiX2Rpc3Bvc2VkIiwiX2Fib3J0ZWQiLCJIQU5ETEVfUkVTVUxUIiwiTE9HX1JFSkVDVEVEX1JFU1VMVCIsIkxPR19FUlJPUiIsIlJFSkVDVF9FUlJPUiIsIlRIUk9XX0VSUk9SIiwibWF0Y2hTdGF0ZSIsImNyaXRlcmlvbiIsInRvTWF0Y2giLCJnbG9iU3RyaW5ncyIsImhvb2tSZWdpc3RyeV9SZWdpc3RlcmVkSG9vayIsIlJlZ2lzdGVyZWRIb29rIiwidHJhblN2YyIsIm1hdGNoQ3JpdGVyaWEiLCJyZW1vdmVIb29rRnJvbVJlZ2lzdHJ5IiwiX21hdGNoaW5nTm9kZXMiLCJfZ2V0RGVmYXVsdE1hdGNoQ3JpdGVyaWEiLCJfZ2V0UGF0aFR5cGVzIiwiX2dldE1hdGNoaW5nTm9kZXMiLCJtbiIsInBhdGh0eXBlIiwiaXNTdGF0ZUhvb2siLCJTVEFURSIsIm1ha2VFdmVudCIsIl9yZWdpc3RlcmVkSG9va3MiLCJyZW1vdmVIb29rRm4iLCJob29rUmVnaXN0cmF0aW9uRm4iLCJtYXRjaE9iamVjdCIsImhvb2tCdWlsZGVyX0hvb2tCdWlsZGVyIiwiSG9va0J1aWxkZXIiLCJidWlsZEhvb2tzRm9yUGhhc2UiLCJfZ2V0RXZlbnRzIiwiYnVpbGRIb29rcyIsImhvb2tUeXBlIiwibWF0Y2hpbmdIb29rcyIsImdldE1hdGNoaW5nSG9va3MiLCJiYXNlSG9va09wdGlvbnMiLCJjcml0ZXJpYU1hdGNoUGF0aCIsInRyYW5zaXRpb25Ib29rIiwicmV2ZXJzZURlcHRoU29ydCIsImZhY3RvciIsImRlcHRoRGVsdGEiLCJ0dXBsZVNvcnQiLCJyZXZlcnNlU29ydCIsImlzQ3JlYXRlIiwiQ1JFQVRFIiwicmVnIiwiZ2V0SG9va3MiLCJzdGF0ZVNlbGYiLCJ0cmFuc2l0aW9uX1RyYW5zaXRpb24iLCJUcmFuc2l0aW9uIiwiX2RlZmVycmVkIiwiX2hvb2tCdWlsZGVyIiwiX3RhcmdldFN0YXRlIiwiX3RyYW5zaXRpb25Db3VudCIsIl90cmVlQ2hhbmdlcyIsImNyZWF0ZVRyYW5zaXRpb25Ib29rUmVnRm5zIiwib25DcmVhdGVIb29rcyIsIm9uRXhpdCIsIm9uUmV0YWluIiwib25FbnRlciIsIm9uRmluaXNoIiwib25FcnJvciIsImVudGVyaW5nU3RhdGVzIiwiJGZyb20iLCJmcmVlemUiLCJwYXJhbXNDaGFuZ2VkIiwiYWxsUGFyYW1EZXNjcmlwdG9ycyIsInBhdGhOb2RlIiwiY2hhbmdlZFZhbHVlcyIsImRlc2NyaXB0b3IiLCJwYXRoTmFtZSIsImdldFJlc29sdmVUb2tlbnMiLCJhZGRSZXNvbHZhYmxlIiwidG9wYXRoIiwidGFyZ2V0Tm9kZSIsIm9yaWdpbmFsVHJhbnNpdGlvbiIsInJmIiwicmVkaXJlY3QiLCJyZWRpcmVjdHMiLCJyZWRpcmVjdE9wdHMiLCJuZXdPcHRpb25zIiwibmV3VHJhbnNpdGlvbiIsIm9yaWdpbmFsRW50ZXJpbmdOb2RlcyIsInJlZGlyZWN0RW50ZXJpbmdOb2RlcyIsIm5vZGVJc1JlbG9hZGluZyIsIl9jaGFuZ2VkUGFyYW1zIiwidGMiLCJub2RlU2NoZW1hcyIsInRvVmFsdWVzIiwiZnJvbVZhbHVlcyIsInNjaGVtYSIsInRvVmFscyIsImZyb21WYWxzIiwiX2lnbm9yZWRSZWFzb24iLCJzYW1lIiwibmV3VEMiLCJwZW5kVEMiLCJnZXRIb29rc0ZvciIsImFsbEJlZm9yZUhvb2tzIiwiQkVGT1JFIiwibGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQiLCJ0cmFuc2l0aW9uSGlzdG9yeSIsImFsbFJ1bkhvb2tzIiwiU1VDQ0VTUyIsIl9lcnJvciIsInBhcmFtRGVmcyIsImludmFsaWRQYXJhbXMiLCJpbnZhbGlkVmFsdWVzIiwiZnJvbVN0YXRlT3JOYW1lIiwidG9TdGF0ZU9yTmFtZSIsImF2b2lkRW1wdHlIYXNoIiwiZGlUb2tlbiIsInF1b3RlUmVnRXhwIiwic3Vycm91bmRQYXR0ZXJuIiwic3BsaXRPblNsYXNoIiwidXJsTWF0Y2hlcl9kZWZhdWx0Q29uZmlnIiwic3RyaWN0IiwiY2FzZUluc2Vuc2l0aXZlIiwidXJsTWF0Y2hlcl9VcmxNYXRjaGVyIiwiVXJsTWF0Y2hlciIsIl9jYWNoZSIsIl9zZWdtZW50cyIsIl9jb21waWxlZCIsIm1hdGNoQXJyYXkiLCJkZXRhaWxzIiwic2VnbWVudCIsInBsYWNlaG9sZGVyIiwic2VhcmNoUGxhY2Vob2xkZXIiLCJwYXR0ZXJucyIsImNoZWNrUGFyYW1FcnJvcnMiLCJuYW1lVmFsaWRhdG9yIiwibWF0Y2hEZXRhaWxzIiwibWFrZVJlZ2V4cFR5cGUiLCJmcm9tU2VhcmNoIiwiX3BhdHRlcm4iLCJlbmNvZGVEYXNoZXMiLCJwYXRoU2VnbWVudHNBbmRQYXJhbXMiLCJzdGF0aWNTZWdtZW50cyIsInBhdGhQYXJhbXMiLCJxdWVyeVBhcmFtcyIsIndlaWdodHMiLCJ3ZWlnaHRzQSIsIndlaWdodHNCIiwicGFkVmFsIiwicGFkQXJyYXlzIiwiY21wIiwiX3BhaXJzIiwibWVtb2l6ZVRvIiwiYWxsUGFyYW1zIiwic2VhcmNoUGFyYW1zIiwiblBhdGhTZWdtZW50cyIsInVybG0iLCJkZWNvZGVQYXRoQXJyYXkiLCJwYXJhbVZhbCIsInJldmVyc2VTdHJpbmciLCJhbGxSZXZlcnNlZCIsImZpbmRQYXJhbSIsInZhbGlkUGFyYW1WYWwiLCJ1cmxNYXRjaGVycyIsImdldERldGFpbHMiLCJwYXRoU3RyaW5nIiwicXVlcnlTdHJpbmciLCJwYXJhbURldGFpbHMiLCJfX2Fzc2lnbiIsInVybE1hdGNoZXJGYWN0b3J5X1BhcmFtRmFjdG9yeSIsIlBhcmFtRmFjdG9yeSIsInVtZiIsInVybE1hdGNoZXJGYWN0b3J5X1VybE1hdGNoZXJGYWN0b3J5IiwiVXJsTWF0Y2hlckZhY3RvcnkiLCJfaXNDYXNlSW5zZW5zaXRpdmUiLCJfaXNTdHJpY3RNb2RlIiwiX2RlZmF1bHRTcXVhc2hQb2xpY3kiLCJzdHJpY3RNb2RlIiwiZ2xvYmFsQ29uZmlnIiwidXJsUnVsZV9VcmxSdWxlRmFjdG9yeSIsIlVybFJ1bGVGYWN0b3J5IiwibWFrZVJ1bGUiLCJfd2hhdCIsImZyb21VcmxNYXRjaGVyIiwiZnJvbVN0YXRlIiwiZnJvbVJlZ0V4cCIsInVybFJ1bGVfQmFzZVVybFJ1bGUiLCJ1cmxNYXRjaGVyIiwiX2hhbmRsZXIiLCJtYXRjaFByaW9yaXR5IiwidHJhbnNpdGlvblRvIiwic3RpY2t5IiwiaXNVcmxSdWxlIiwiZGVmYXVsdFJ1bGVTb3J0Rm4iLCJwcmlvcml0eVNvcnQiLCJVUkxNQVRDSEVSIiwiUkVHRVhQIiwiUkFXIiwiT1RIRVIiLCJ0eXBlU29ydCIsInVybE1hdGNoZXJTb3J0IiwidXNlTWF0Y2hQcmlvcml0eSIsImlkU29ydCIsInVybFJvdXRlcl9VcmxSb3V0ZXIiLCJVcmxSb3V0ZXIiLCJfc29ydEZuIiwiX3J1bGVzIiwiX2lkIiwiX3NvcnRlZCIsIl9vdGhlcndpc2VGbiIsInN0YWJsZVNvcnQiLCJlbnN1cmVTb3J0ZWQiLCJhcnJPZldyYXBwZXIiLCJ3cmFwcGVyQSIsIndyYXBwZXJCIiwiY21wRGlmZiIsImJlc3QiLCJjaGVja1J1bGUiLCJ3ZWlnaHQiLCJzeW5jIiwiJHVybCIsInVybFNlcnZpY2UiLCJuZXd1cmwiLCJhcHBseVJlc3VsdCIsIl9zdG9wRm4iLCJyZWFkIiwiYWJzb2x1dGUiLCJpc0h0bWw1IiwiYXBwZW5kQmFzZVBhdGgiLCJzbGFzaCIsImNmZ1BvcnQiLCJoYW5kbGVyRm4iLCJnZXRIYW5kbGVyRm4iLCJ1cmxQYXJ0cyIsInZpZXdfVmlld1NlcnZpY2UiLCJfdWlWaWV3cyIsIl92aWV3Q29uZmlncyIsIl92aWV3Q29uZmlnRmFjdG9yaWVzIiwiX2xpc3RlbmVycyIsIl9yZWdpc3RlcmVkVUlWaWV3IiwiX3JlZ2lzdGVyZWRVSVZpZXdzIiwiX2FjdGl2ZVZpZXdDb25maWdzIiwiX29uU3luYyIsInJhd1ZpZXdOYW1lIiwidmlld0F0Q29udGV4dCIsInJlbGF0aXZlVmlld05hbWVTdWdhciIsIl9yb290Q29udGV4dCIsInZpZXdUeXBlIiwiY2ZnRmFjdG9yeSIsImNmZ3MiLCJkZWFjdGl2YXRlVmlld0NvbmZpZyIsImFjdGl2YXRlVmlld0NvbmZpZyIsInVpVmlld3NCeUZxbiIsInZpZXdDb25maWdEZXB0aCIsImRlcHRoQ29tcGFyZSIsImRlcHRoRm4iLCJwb3NOZWciLCJ1aVZpZXdUdXBsZXMiLCJzdGF0ZURlcHRoIiwibWF0Y2hpbmdDb25maWdzIiwibWF0Y2hlZFZpZXdDb25maWdzIiwidW5tYXRjaGVkQ29uZmlnVHVwbGVzIiwiYWxsVHVwbGVzIiwidWlWaWV3cyIsImF2YWlsYWJsZSIsInZjIiwidmNTZWdtZW50cyIsInVpdlNlZ21lbnRzIiwibmVnT2Zmc2V0IiwiZnFuVG9GaXJzdFNlZ21lbnQiLCJ1aVZpZXdDb250ZXh0IiwiZ2xvYmFsc19VSVJvdXRlckdsb2JhbHMiLCJVSVJvdXRlckdsb2JhbHMiLCJzdWNjZXNzZnVsVHJhbnNpdGlvbnMiLCJtYWtlU3R1YiIsImxvY2F0aW9uU2VydmljZXNGbnMiLCJsb2NhdGlvbkNvbmZpZ0ZucyIsInVtZkZucyIsInJ1bGVzRm5zIiwic3luY0ZucyIsInVybFNlcnZpY2VfVXJsU2VydmljZSIsIlVybFNlcnZpY2UiLCJsYXRlQmluZCIsImxvY2F0aW9uU2VydmljZXMiLCJsb2NhdGlvblNlcnZpY2VTdHViIiwibG9jYXRpb25Db25maWdTdHViIiwiX3JvdXRlckluc3RhbmNlIiwicm91dGVyX1VJUm91dGVyIiwiX2Rpc3Bvc2FibGVzIiwidHJhbnNpdGlvblNlcnZpY2VfVHJhbnNpdGlvblNlcnZpY2UiLCJzdGF0ZVNlcnZpY2VfU3RhdGVTZXJ2aWNlIiwiX3BsdWdpbnMiLCJkaXNwb3NhYmxlIiwicGx1Z2luIiwicGx1Z2luSW5zdGFuY2UiLCJnZXRQbHVnaW4iLCJwbHVnaW5OYW1lIiwiYWRkQ29yZVJlc29sdmFibGVzIiwiVFJBTlNJVElPTl9UT0tFTlMiLCJpc1RyYW5zaXRpb24iLCJ0cmVlQ2hhbmdlc0NsZWFudXAiLCJyZXBsYWNlVHJhbnNpdGlvbldpdGhOdWxsIiwicmVkaXJlY3RUb0hvb2siLCJyZWRpcmVjdFRvIiwibWFrZUVudGVyRXhpdFJldGFpbkhvb2siLCJvbkV4aXRIb29rIiwib25SZXRhaW5Ib29rIiwib25FbnRlckhvb2siLCJlYWdlclJlc29sdmVQYXRoIiwibGF6eVJlc29sdmVTdGF0ZSIsInJlc29sdmVSZW1haW5pbmciLCJsb2FkRW50ZXJpbmdWaWV3cyIsImVudGVyaW5nVmlld3MiLCJhY3RpdmF0ZVZpZXdzIiwiZXhpdGluZ1ZpZXdzIiwidXBkYXRlR2xvYmFsU3RhdGUiLCJjbGVhckN1cnJlbnRUcmFuc2l0aW9uIiwidXBkYXRlVXJsIiwidXJsT3B0aW9ucyIsImxhenlMb2FkSG9vayIsImxhenlMb2FkIiwibGF6eUxvYWRTdGF0ZSIsImxhenlMb2FkRm4iLCJ0cmFuc2l0aW9uRXZlbnRUeXBlX1RyYW5zaXRpb25FdmVudFR5cGUiLCJob29rT3JkZXIiLCJpZ25vcmVkSG9vayIsImlnbm9yZWRSZWFzb24iLCJpbnZhbGlkVHJhbnNpdGlvbkhvb2siLCJkZWZhdWx0VHJhbnNPcHRzIiwiY3VzdG9tIiwiVHJhbnNpdGlvblNlcnZpY2UiLCJfZXZlbnRUeXBlcyIsIl9jcml0ZXJpYVBhdGhzIiwiX2RlcmVnaXN0ZXJIb29rRm5zIiwiX2RlZmluZUNvcmVQYXRocyIsIl9kZWZpbmVDb3JlRXZlbnRzIiwiX3JlZ2lzdGVyQ29yZVRyYW5zaXRpb25Ib29rcyIsIm9uQ3JlYXRlIiwiaG9va3NBcnJheSIsIlBoYXNlIiwiVEgiLCJwYXRocyIsIl9kZWZpbmVFdmVudCIsIl9kZWZpbmVQYXRoVHlwZSIsImNtcEJ5UGhhc2UiLCJob29rU2NvcGUiLCJhZGRDb3JlUmVzb2x2ZXMiLCJyZWdpc3RlckFkZENvcmVSZXNvbHZhYmxlcyIsInJlZ2lzdGVySWdub3JlZFRyYW5zaXRpb25Ib29rIiwicmVnaXN0ZXJJbnZhbGlkVHJhbnNpdGlvbkhvb2siLCJyZWdpc3RlclJlZGlyZWN0VG9Ib29rIiwicmVnaXN0ZXJPbkV4aXRIb29rIiwicmVnaXN0ZXJPblJldGFpbkhvb2siLCJyZWdpc3Rlck9uRW50ZXJIb29rIiwiZWFnZXJSZXNvbHZlIiwicmVnaXN0ZXJFYWdlclJlc29sdmVQYXRoIiwibGF6eVJlc29sdmUiLCJyZWdpc3RlckxhenlSZXNvbHZlU3RhdGUiLCJyZXNvbHZlQWxsIiwicmVnaXN0ZXJSZXNvbHZlUmVtYWluaW5nIiwibG9hZFZpZXdzIiwicmVnaXN0ZXJMb2FkRW50ZXJpbmdWaWV3cyIsInJlZ2lzdGVyQWN0aXZhdGVWaWV3cyIsInVwZGF0ZUdsb2JhbHMiLCJyZWdpc3RlclVwZGF0ZUdsb2JhbFN0YXRlIiwicmVnaXN0ZXJVcGRhdGVVcmwiLCJyZWdpc3RlckxhenlMb2FkSG9vayIsIlN0YXRlU2VydmljZSIsImludmFsaWRDYWxsYmFja3MiLCJfZGVmYXVsdEVycm9ySGFuZGxlciIsIiRlcnJvciQiLCJib3VuZEZucyIsIl9oYW5kbGVJbnZhbGlkVGFyZ2V0U3RhdGUiLCJ0b1N0YXRlIiwibGF0ZXN0VGhpbmciLCJsYXRlc3QiLCJjYWxsYmFja1F1ZXVlIiwiY2hlY2tGb3JSZWRpcmVjdCIsImludm9rZU5leHRDYWxsYmFjayIsIm5leHRDYWxsYmFjayIsImRlZmF1dEdvT3B0cyIsInRyYW5zT3B0cyIsImdldEN1cnJlbnRQYXRoIiwibGF0ZXN0U3VjY2VzcyIsImN1cnJlbnRQYXRoIiwicmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlciIsImlzTGF0ZXN0IiwiZXJyb3JIYW5kbGVyIiwidHJhbnNpdGlvblRvUHJvbWlzZSIsImluY2x1ZGUiLCJkZWZhdWx0SHJlZk9wdHMiLCJsb3NzeSIsIm5hdiIsInFfJHEiLCJpbmplY3Rvcl9nbG9iYWxzIiwiQVJHVU1FTlRfTkFNRVMiLCJpbmplY3Rvcl8kaW5qZWN0b3IiLCJlbnN1cmVFeGlzdCIsImtleVZhbHNUb09iamVjdFIiLCJhY2N1bSIsImdldFBhcmFtcyIsInV0aWxzX3BhcnNlVXJsIiwib3JFbXB0eVN0cmluZyIsImJlZm9yZWhhc2giLCJsb2MiLCJzZWFyY2hPYmplY3QiLCJsb2NhdGlvblBsdWdpbkZhY3RvcnkiLCJzZXJ2aWNlQ2xhc3MiLCJjb25maWd1cmF0aW9uQ2xhc3MiLCJjb25maWd1cmF0aW9uIiwiYmFzZUxvY2F0aW9uU2VydmljZV9CYXNlTG9jYXRpb25TZXJ2aWNlcyIsIkJhc2VMb2NhdGlvblNlcnZpY2VzIiwiZmlyZUFmdGVyVXBkYXRlIiwiX2xpc3RlbmVyIiwiX2dldCIsIl9sb2NhdGlvbiIsIl9oaXN0b3J5IiwiX19leHRlbmRzIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX18iLCJoYXNoTG9jYXRpb25TZXJ2aWNlX0hhc2hMb2NhdGlvblNlcnZpY2UiLCJfc3VwZXIiLCJIYXNoTG9jYXRpb25TZXJ2aWNlIiwidGl0bGUiLCJtZW1vcnlMb2NhdGlvblNlcnZpY2VfZXh0ZW5kcyIsIk1lbW9yeUxvY2F0aW9uU2VydmljZSIsIl91cmwiLCJwdXNoU3RhdGVMb2NhdGlvblNlcnZpY2VfZXh0ZW5kcyIsInB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZV9QdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UiLCJQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UiLCJfY29uZmlnIiwiX2dldEJhc2VQcmVmaXgiLCJleGFjdEJhc2VIcmVmTWF0Y2giLCJzdGFydHNXaXRoQmFzZSIsImZ1bGxVcmwiLCJyZXBsYWNlU3RhdGUiLCJtZW1vcnlMb2NhdGlvbkNvbmZpZ19NZW1vcnlMb2NhdGlvbkNvbmZpZyIsIl9wb3J0IiwiX3Byb3RvY29sIiwiX2hvc3QiLCJfaGFzaFByZWZpeCIsImJyb3dzZXJMb2NhdGlvbkNvbmZpZ19Ccm93c2VyTG9jYXRpb25Db25maWciLCJCcm93c2VyTG9jYXRpb25Db25maWciLCJfaXNIdG1sNSIsIm5ld3ByZWZpeCIsImdldEJhc2VIcmVmIiwiYmFzZVRhZyIsInNlcnZpY2VzUGx1Z2luIiwiaGFzaExvY2F0aW9uUGx1Z2luIiwicHVzaFN0YXRlTG9jYXRpb25QbHVnaW4iLCJtZW1vcnlMb2NhdGlvblBsdWdpbiIsIlVJUm91dGVyUGx1Z2luQmFzZSJdLCJtYXBwaW5ncyI6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LEdBQUE1QyxHQUFBLDhCQUFBZ0IsR0FBQXFCLElBRUFRLEdBQUE3QyxHQUFBLCtCQUFBd0IsR0FBQWEsSUFFQVMsR0FBQTlDLEdBQUEsNEJBQUFxQixHQUFBVyxJQ2JBZSxHQUFBLFdBQ0EsU0FBQUEsS0FHQSxPQURBQSxFQUFBM3VKLFVBQUF3N0YsUUFBQSxTQUFBVCxLQUNBNHpELEVBSkEsNmhOQ1hBM3dKLEVBQUFVLEVBQUErTCxFQUFBLHVDQUFBa2tKIiwiZmlsZSI6ImFwcC5hYjAzOTU4YTY1MGI2Y2NiZjRmMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbiIsIi8qKlxuICogUmFuZG9tIHV0aWxpdHkgZnVuY3Rpb25zIHVzZWQgaW4gdGhlIFVJLVJvdXRlciBjb2RlXG4gKlxuICogVGhlc2UgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgYnV0IGFyZSBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG5vdGljZS5cbiAqXG4gKiBAcHJlZmVycmVkXG4gKiBAbW9kdWxlIGNvbW1vblxuICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGlzRnVuY3Rpb24sIGlzU3RyaW5nLCBpc0FycmF5LCBpc1JlZ0V4cCwgaXNEYXRlIH0gZnJvbSAnLi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IGFsbCwgYW55LCBwcm9wLCBjdXJyeSwgbm90IH0gZnJvbSAnLi9ob2YnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuL2NvcmVzZXJ2aWNlcyc7XG5leHBvcnQgdmFyIHJvb3QgPSAodHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZiAmJiBzZWxmKSB8fFxuICAgICh0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWwgJiYgZ2xvYmFsKSB8fFxuICAgIHRoaXM7XG52YXIgYW5ndWxhciA9IHJvb3QuYW5ndWxhciB8fCB7fTtcbmV4cG9ydCB2YXIgZnJvbUpzb24gPSBhbmd1bGFyLmZyb21Kc29uIHx8IEpTT04ucGFyc2UuYmluZChKU09OKTtcbmV4cG9ydCB2YXIgdG9Kc29uID0gYW5ndWxhci50b0pzb24gfHwgSlNPTi5zdHJpbmdpZnkuYmluZChKU09OKTtcbmV4cG9ydCB2YXIgZm9yRWFjaCA9IGFuZ3VsYXIuZm9yRWFjaCB8fCBfZm9yRWFjaDtcbmV4cG9ydCB2YXIgZXh0ZW5kID0gT2JqZWN0LmFzc2lnbiB8fCBfZXh0ZW5kO1xuZXhwb3J0IHZhciBlcXVhbHMgPSBhbmd1bGFyLmVxdWFscyB8fCBfZXF1YWxzO1xuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgICByZXR1cm4geDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkgeyB9XG4vKipcbiAqIEJ1aWxkcyBwcm94eSBmdW5jdGlvbnMgb24gdGhlIGB0b2Agb2JqZWN0IHdoaWNoIHBhc3MgdGhyb3VnaCB0byB0aGUgYGZyb21gIG9iamVjdC5cbiAqXG4gKiBGb3IgZWFjaCBrZXkgaW4gYGZuTmFtZXNgLCBjcmVhdGVzIGEgcHJveHkgZnVuY3Rpb24gb24gdGhlIGB0b2Agb2JqZWN0LlxuICogVGhlIHByb3h5IGZ1bmN0aW9uIGNhbGxzIHRoZSByZWFsIGZ1bmN0aW9uIG9uIHRoZSBgZnJvbWAgb2JqZWN0LlxuICpcbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBUaGlzIGV4YW1wbGUgY3JlYXRlcyBhbiBuZXcgY2xhc3MgaW5zdGFuY2Ugd2hvc2UgZnVuY3Rpb25zIGFyZSBwcmVib3VuZCB0byB0aGUgbmV3J2Qgb2JqZWN0LlxuICogYGBganNcbiAqIGNsYXNzIEZvbyB7XG4gKiAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAqICAgICAvLyBCaW5kcyBhbGwgZnVuY3Rpb25zIGZyb20gRm9vLnByb3RvdHlwZSB0byAndGhpcycsXG4gKiAgICAgLy8gdGhlbiBjb3BpZXMgdGhlbSB0byAndGhpcydcbiAqICAgICBiaW5kRnVuY3Rpb25zKEZvby5wcm90b3R5cGUsIHRoaXMsIHRoaXMpO1xuICogICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gKiAgIH1cbiAqXG4gKiAgIGxvZygpIHtcbiAqICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xuICogICB9XG4gKiB9XG4gKlxuICogbGV0IG15Rm9vID0gbmV3IEZvbyhbMSwyLDNdKTtcbiAqIHZhciBsb2dpdCA9IG15Rm9vLmxvZztcbiAqIGxvZ2l0KCk7IC8vIGxvZ3MgWzEsIDIsIDNdIGZyb20gdGhlIG15Rm9vICd0aGlzJyBpbnN0YW5jZVxuICogYGBgXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogVGhpcyBleGFtcGxlIGNyZWF0ZXMgYSBib3VuZCB2ZXJzaW9uIG9mIGEgc2VydmljZSBmdW5jdGlvbiwgYW5kIGNvcGllcyBpdCB0byBhbm90aGVyIG9iamVjdFxuICogYGBgXG4gKlxuICogdmFyIFNvbWVTZXJ2aWNlID0ge1xuICogICB0aGlzLmRhdGEgPSBbMywgNCwgNV07XG4gKiAgIHRoaXMubG9nID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgY29uc29sZS5sb2codGhpcy5kYXRhKTtcbiAqICAgfVxuICogfVxuICpcbiAqIC8vIENvbnN0cnVjdG9yIGZuXG4gKiBmdW5jdGlvbiBPdGhlclRoaW5nKCkge1xuICogICAvLyBCaW5kcyBhbGwgZnVuY3Rpb25zIGZyb20gU29tZVNlcnZpY2UgdG8gU29tZVNlcnZpY2UsXG4gKiAgIC8vIHRoZW4gY29waWVzIHRoZW0gdG8gJ3RoaXMnXG4gKiAgIGJpbmRGdW5jdGlvbnMoU29tZVNlcnZpY2UsIHRoaXMsIFNvbWVTZXJ2aWNlKTtcbiAqIH1cbiAqXG4gKiBsZXQgbXlPdGhlclRoaW5nID0gbmV3IE90aGVyVGhpbmcoKTtcbiAqIG15T3RoZXJUaGluZy5sb2coKTsgLy8gbG9ncyBbMywgNCwgNV0gZnJvbSBTb21lU2VydmljZSdzICd0aGlzJ1xuICogYGBgXG4gKlxuICogQHBhcmFtIHNvdXJjZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgc291cmNlIG9iamVjdCB3aGljaCBjb250YWlucyB0aGUgb3JpZ2luYWwgZnVuY3Rpb25zIHRvIGJlIGJvdW5kXG4gKiBAcGFyYW0gdGFyZ2V0IEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB0YXJnZXQgb2JqZWN0IHdoaWNoIHdpbGwgcmVjZWl2ZSB0aGUgYm91bmQgZnVuY3Rpb25zXG4gKiBAcGFyYW0gYmluZCBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgb2JqZWN0IHdoaWNoIHRoZSBmdW5jdGlvbnMgd2lsbCBiZSBib3VuZCB0b1xuICogQHBhcmFtIGZuTmFtZXMgVGhlIGZ1bmN0aW9uIG5hbWVzIHdoaWNoIHdpbGwgYmUgYm91bmQgKERlZmF1bHRzIHRvIGFsbCB0aGUgZnVuY3Rpb25zIGZvdW5kIG9uIHRoZSAnZnJvbScgb2JqZWN0KVxuICogQHBhcmFtIGxhdGViaW5kIElmIHRydWUsIHRoZSBiaW5kaW5nIG9mIHRoZSBmdW5jdGlvbiBpcyBkZWxheWVkIHVudGlsIHRoZSBmaXJzdCB0aW1lIGl0J3MgaW52b2tlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJveHlGdW5jdGlvbnMoc291cmNlLCB0YXJnZXQsIGJpbmQsIGZuTmFtZXMsIGxhdGViaW5kKSB7XG4gICAgaWYgKGxhdGViaW5kID09PSB2b2lkIDApIHsgbGF0ZWJpbmQgPSBmYWxzZTsgfVxuICAgIHZhciBiaW5kRnVuY3Rpb24gPSBmdW5jdGlvbiAoZm5OYW1lKSB7IHJldHVybiBzb3VyY2UoKVtmbk5hbWVdLmJpbmQoYmluZCgpKTsgfTtcbiAgICB2YXIgbWFrZUxhdGVSZWJpbmRGbiA9IGZ1bmN0aW9uIChmbk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxhdGVSZWJpbmRGdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRhcmdldFtmbk5hbWVdID0gYmluZEZ1bmN0aW9uKGZuTmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2ZuTmFtZV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGZuTmFtZXMgPSBmbk5hbWVzIHx8IE9iamVjdC5rZXlzKHNvdXJjZSgpKTtcbiAgICByZXR1cm4gZm5OYW1lcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbmFtZSkge1xuICAgICAgICBhY2NbbmFtZV0gPSBsYXRlYmluZCA/IG1ha2VMYXRlUmViaW5kRm4obmFtZSkgOiBiaW5kRnVuY3Rpb24obmFtZSk7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgdGFyZ2V0KTtcbn1cbi8qKlxuICogcHJvdG90eXBhbCBpbmhlcml0YW5jZSBoZWxwZXIuXG4gKiBDcmVhdGVzIGEgbmV3IG9iamVjdCB3aGljaCBoYXMgYHBhcmVudGAgb2JqZWN0IGFzIGl0cyBwcm90b3R5cGUsIGFuZCB0aGVuIGNvcGllcyB0aGUgcHJvcGVydGllcyBmcm9tIGBleHRyYWAgb250byBpdFxuICovXG5leHBvcnQgdmFyIGluaGVyaXQgPSBmdW5jdGlvbiAocGFyZW50LCBleHRyYSkgeyByZXR1cm4gZXh0ZW5kKE9iamVjdC5jcmVhdGUocGFyZW50KSwgZXh0cmEpOyB9O1xuLyoqIEdpdmVuIGFuIGFycmF5LCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBmb3VuZCBpbiB0aGUgYXJyYXksICh1c2luZyBpbmRleE9mKSAqL1xuZXhwb3J0IHZhciBpbkFycmF5ID0gY3VycnkoX2luQXJyYXkpO1xuZXhwb3J0IGZ1bmN0aW9uIF9pbkFycmF5KGFycmF5LCBvYmopIHtcbiAgICByZXR1cm4gYXJyYXkuaW5kZXhPZihvYmopICE9PSAtMTtcbn1cbi8qKlxuICogR2l2ZW4gYW4gYXJyYXksIGFuZCBhbiBpdGVtLCBpZiB0aGUgaXRlbSBpcyBmb3VuZCBpbiB0aGUgYXJyYXksIGl0IHJlbW92ZXMgaXQgKGluLXBsYWNlKS5cbiAqIFRoZSBzYW1lIGFycmF5IGlzIHJldHVybmVkXG4gKi9cbmV4cG9ydCB2YXIgcmVtb3ZlRnJvbSA9IGN1cnJ5KF9yZW1vdmVGcm9tKTtcbmV4cG9ydCBmdW5jdGlvbiBfcmVtb3ZlRnJvbShhcnJheSwgb2JqKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5LmluZGV4T2Yob2JqKTtcbiAgICBpZiAoaWR4ID49IDApXG4gICAgICAgIGFycmF5LnNwbGljZShpZHgsIDEpO1xuICAgIHJldHVybiBhcnJheTtcbn1cbi8qKiBwdXNoZXMgYSB2YWx1ZXMgdG8gYW4gYXJyYXkgYW5kIHJldHVybnMgdGhlIHZhbHVlICovXG5leHBvcnQgdmFyIHB1c2hUbyA9IGN1cnJ5KF9wdXNoVG8pO1xuZXhwb3J0IGZ1bmN0aW9uIF9wdXNoVG8oYXJyLCB2YWwpIHtcbiAgICByZXR1cm4gYXJyLnB1c2godmFsKSwgdmFsO1xufVxuLyoqIEdpdmVuIGFuIGFycmF5IG9mIChkZXJlZ2lzdHJhdGlvbikgZnVuY3Rpb25zLCBjYWxscyBhbGwgZnVuY3Rpb25zIGFuZCByZW1vdmVzIGVhY2ggb25lIGZyb20gdGhlIHNvdXJjZSBhcnJheSAqL1xuZXhwb3J0IHZhciBkZXJlZ0FsbCA9IGZ1bmN0aW9uIChmdW5jdGlvbnMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb25zLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIGZuKCk7XG4gICAgICAgIHJlbW92ZUZyb20oZnVuY3Rpb25zLCBmbik7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBBcHBsaWVzIGEgc2V0IG9mIGRlZmF1bHRzIHRvIGFuIG9wdGlvbnMgb2JqZWN0LiAgVGhlIG9wdGlvbnMgb2JqZWN0IGlzIGZpbHRlcmVkXG4gKiB0byBvbmx5IHRob3NlIHByb3BlcnRpZXMgb2YgdGhlIG9iamVjdHMgaW4gdGhlIGRlZmF1bHRzTGlzdC5cbiAqIEVhcmxpZXIgb2JqZWN0cyBpbiB0aGUgZGVmYXVsdHNMaXN0IHRha2UgcHJlY2VkZW5jZSB3aGVuIGFwcGx5aW5nIGRlZmF1bHRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdHMob3B0cykge1xuICAgIHZhciBkZWZhdWx0c0xpc3QgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBkZWZhdWx0c0xpc3RbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBkZWZhdWx0VmFscyA9IGV4dGVuZC5hcHBseSh2b2lkIDAsIFt7fV0uY29uY2F0KGRlZmF1bHRzTGlzdC5yZXZlcnNlKCkpKTtcbiAgICByZXR1cm4gZXh0ZW5kKGRlZmF1bHRWYWxzLCBwaWNrKG9wdHMgfHwge30sIE9iamVjdC5rZXlzKGRlZmF1bHRWYWxzKSkpO1xufVxuLyoqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IG1lcmdlcyBlYWNoIGVsZW1lbnQgb2YgdGhlIGxpc3QgaW50byBhIHNpbmdsZSBvYmplY3QsIHVzaW5nIGV4dGVuZCAqL1xuZXhwb3J0IHZhciBtZXJnZVIgPSBmdW5jdGlvbiAobWVtbywgaXRlbSkgeyByZXR1cm4gZXh0ZW5kKG1lbW8sIGl0ZW0pOyB9O1xuLyoqXG4gKiBGaW5kcyB0aGUgY29tbW9uIGFuY2VzdG9yIHBhdGggYmV0d2VlbiB0d28gc3RhdGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaXJzdCBUaGUgZmlyc3Qgc3RhdGUuXG4gKiBAcGFyYW0ge09iamVjdH0gc2Vjb25kIFRoZSBzZWNvbmQgc3RhdGUuXG4gKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZSBuYW1lcyBpbiBkZXNjZW5kaW5nIG9yZGVyLCBub3QgaW5jbHVkaW5nIHRoZSByb290LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5jZXN0b3JzKGZpcnN0LCBzZWNvbmQpIHtcbiAgICB2YXIgcGF0aCA9IFtdO1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpmb3JpblxuICAgIGZvciAodmFyIG4gaW4gZmlyc3QucGF0aCkge1xuICAgICAgICBpZiAoZmlyc3QucGF0aFtuXSAhPT0gc2Vjb25kLnBhdGhbbl0pXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgcGF0aC5wdXNoKGZpcnN0LnBhdGhbbl0pO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbn1cbi8qKlxuICogUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9ubHkgY29udGFpbmluZyB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydGllcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBcbiAqIHZhciBmb28gPSB7IGE6IDEsIGI6IDIsIGM6IDMgfTtcbiAqIHZhciBhYiA9IHBpY2soZm9vLCBbJ2EnLCAnYiddKTsgLy8geyBhOiAxLCBiOiAyIH1cbiAqIGBgYFxuICogQHBhcmFtIG9iaiB0aGUgc291cmNlIG9iamVjdFxuICogQHBhcmFtIHByb3BOYW1lcyBhbiBBcnJheSBvZiBzdHJpbmdzLCB3aGljaCBhcmUgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnR5IG5hbWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwaWNrKG9iaiwgcHJvcE5hbWVzKSB7XG4gICAgdmFyIG9iakNvcHkgPSB7fTtcbiAgICBmb3IgKHZhciBfcHJvcCBpbiBvYmopIHtcbiAgICAgICAgaWYgKHByb3BOYW1lcy5pbmRleE9mKF9wcm9wKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIG9iakNvcHlbX3Byb3BdID0gb2JqW19wcm9wXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqQ29weTtcbn1cbi8qKlxuICogUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9taXR0aW5nIHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0aWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiB2YXIgZm9vID0geyBhOiAxLCBiOiAyLCBjOiAzIH07XG4gKiB2YXIgYWIgPSBvbWl0KGZvbywgWydhJywgJ2InXSk7IC8vIHsgYzogMyB9XG4gKiBgYGBcbiAqIEBwYXJhbSBvYmogdGhlIHNvdXJjZSBvYmplY3RcbiAqIEBwYXJhbSBwcm9wTmFtZXMgYW4gQXJyYXkgb2Ygc3RyaW5ncywgd2hpY2ggYXJlIHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0eSBuYW1lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gb21pdChvYmosIHByb3BOYW1lcykge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgIC5maWx0ZXIobm90KGluQXJyYXkocHJvcE5hbWVzKSkpXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiAoKGFjY1trZXldID0gb2JqW2tleV0pLCBhY2MpOyB9LCB7fSk7XG59XG4vKipcbiAqIE1hcHMgYW4gYXJyYXksIG9yIG9iamVjdCB0byBhIHByb3BlcnR5IChieSBuYW1lKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGx1Y2soY29sbGVjdGlvbiwgcHJvcE5hbWUpIHtcbiAgICByZXR1cm4gbWFwKGNvbGxlY3Rpb24sIHByb3AocHJvcE5hbWUpKTtcbn1cbi8qKiBGaWx0ZXJzIGFuIEFycmF5IG9yIGFuIE9iamVjdCdzIHByb3BlcnRpZXMgYmFzZWQgb24gYSBwcmVkaWNhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIoY29sbGVjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgYXJyID0gaXNBcnJheShjb2xsZWN0aW9uKSwgcmVzdWx0ID0gYXJyID8gW10gOiB7fTtcbiAgICB2YXIgYWNjZXB0ID0gYXJyID8gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHJlc3VsdC5wdXNoKHgpOyB9IDogZnVuY3Rpb24gKHgsIGtleSkgeyByZXR1cm4gKHJlc3VsdFtrZXldID0geCk7IH07XG4gICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAoaXRlbSwgaSkge1xuICAgICAgICBpZiAoY2FsbGJhY2soaXRlbSwgaSkpXG4gICAgICAgICAgICBhY2NlcHQoaXRlbSwgaSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKiBGaW5kcyBhbiBvYmplY3QgZnJvbSBhbiBhcnJheSwgb3IgYSBwcm9wZXJ0eSBvZiBhbiBvYmplY3QsIHRoYXQgbWF0Y2hlcyBhIHByZWRpY2F0ZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmQoY29sbGVjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgaWYgKHJlc3VsdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGNhbGxiYWNrKGl0ZW0sIGkpKVxuICAgICAgICAgICAgcmVzdWx0ID0gaXRlbTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqIEdpdmVuIGFuIG9iamVjdCwgcmV0dXJucyBhIG5ldyBvYmplY3QsIHdoZXJlIGVhY2ggcHJvcGVydHkgaXMgdHJhbnNmb3JtZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uICovXG5leHBvcnQgdmFyIG1hcE9iaiA9IG1hcDtcbi8qKiBNYXBzIGFuIGFycmF5IG9yIG9iamVjdCBwcm9wZXJ0aWVzIHVzaW5nIGEgY2FsbGJhY2sgZnVuY3Rpb24gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXAoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRhcmdldCkge1xuICAgIHRhcmdldCA9IHRhcmdldCB8fCAoaXNBcnJheShjb2xsZWN0aW9uKSA/IFtdIDoge30pO1xuICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKGl0ZW0sIGkpIHsgcmV0dXJuICh0YXJnZXRbaV0gPSBjYWxsYmFjayhpdGVtLCBpKSk7IH0pO1xuICAgIHJldHVybiB0YXJnZXQ7XG59XG4vKipcbiAqIEdpdmVuIGFuIG9iamVjdCwgcmV0dXJuIGl0cyBlbnVtZXJhYmxlIHByb3BlcnR5IHZhbHVlc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgZm9vID0geyBhOiAxLCBiOiAyLCBjOiAzIH1cbiAqIGxldCB2YWxzID0gdmFsdWVzKGZvbyk7IC8vIFsgMSwgMiwgMyBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciB2YWx1ZXMgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBvYmpba2V5XTsgfSk7IH07XG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbGwgb2YgdGhlIHZhbHVlcyBhcmUgdHJ1dGh5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgdmFscyA9IFsgMSwgdHJ1ZSwge30sIFwiaGVsbG8gd29ybGRcIl07XG4gKiB2YWxzLnJlZHVjZShhbGxUcnVlUiwgdHJ1ZSk7IC8vIHRydWVcbiAqXG4gKiB2YWxzLnB1c2goMCk7XG4gKiB2YWxzLnJlZHVjZShhbGxUcnVlUiwgdHJ1ZSk7IC8vIGZhbHNlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBhbGxUcnVlUiA9IGZ1bmN0aW9uIChtZW1vLCBlbGVtKSB7IHJldHVybiBtZW1vICYmIGVsZW07IH07XG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbnkgb2YgdGhlIHZhbHVlcyBhcmUgdHJ1dGh5LlxuICpcbiAqICAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgdmFscyA9IFsgMCwgbnVsbCwgdW5kZWZpbmVkIF07XG4gKiB2YWxzLnJlZHVjZShhbnlUcnVlUiwgdHJ1ZSk7IC8vIGZhbHNlXG4gKlxuICogdmFscy5wdXNoKFwiaGVsbG8gd29ybGRcIik7XG4gKiB2YWxzLnJlZHVjZShhbnlUcnVlUiwgdHJ1ZSk7IC8vIHRydWVcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGFueVRydWVSID0gZnVuY3Rpb24gKG1lbW8sIGVsZW0pIHsgcmV0dXJuIG1lbW8gfHwgZWxlbTsgfTtcbi8qKlxuICogUmVkdWNlIGZ1bmN0aW9uIHdoaWNoIHVuLW5lc3RzIGEgc2luZ2xlIGxldmVsIG9mIGFycmF5c1xuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCBpbnB1dCA9IFsgWyBcImFcIiwgXCJiXCIgXSwgWyBcImNcIiwgXCJkXCIgXSwgWyBbIFwiZG91YmxlXCIsIFwibmVzdGVkXCIgXSBdIF07XG4gKiBpbnB1dC5yZWR1Y2UodW5uZXN0UiwgW10pIC8vIFsgXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCIsIFsgXCJkb3VibGUsIFwibmVzdGVkXCIgXSBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciB1bm5lc3RSID0gZnVuY3Rpb24gKG1lbW8sIGVsZW0pIHsgcmV0dXJuIG1lbW8uY29uY2F0KGVsZW0pOyB9O1xuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gd2hpY2ggcmVjdXJzaXZlbHkgdW4tbmVzdHMgYWxsIGFycmF5c1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogaW5wdXQucmVkdWNlKHVubmVzdFIsIFtdKSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBcImRvdWJsZSwgXCJuZXN0ZWRcIiBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBmbGF0dGVuUiA9IGZ1bmN0aW9uIChtZW1vLCBlbGVtKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkoZWxlbSkgPyBtZW1vLmNvbmNhdChlbGVtLnJlZHVjZShmbGF0dGVuUiwgW10pKSA6IHB1c2hSKG1lbW8sIGVsZW0pO1xufTtcbi8qKlxuICogUmVkdWNlIGZ1bmN0aW9uIHRoYXQgcHVzaGVzIGFuIG9iamVjdCB0byBhbiBhcnJheSwgdGhlbiByZXR1cm5zIHRoZSBhcnJheS5cbiAqIE1vc3RseSBqdXN0IGZvciBbW2ZsYXR0ZW5SXV0gYW5kIFtbdW5pcVJdXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVzaFIoYXJyLCBvYmopIHtcbiAgICBhcnIucHVzaChvYmopO1xuICAgIHJldHVybiBhcnI7XG59XG4vKiogUmVkdWNlIGZ1bmN0aW9uIHRoYXQgZmlsdGVycyBvdXQgZHVwbGljYXRlcyAqL1xuZXhwb3J0IHZhciB1bmlxUiA9IGZ1bmN0aW9uIChhY2MsIHRva2VuKSB7IHJldHVybiAoaW5BcnJheShhY2MsIHRva2VuKSA/IGFjYyA6IHB1c2hSKGFjYywgdG9rZW4pKTsgfTtcbi8qKlxuICogUmV0dXJuIGEgbmV3IGFycmF5IHdpdGggYSBzaW5nbGUgbGV2ZWwgb2YgYXJyYXlzIHVubmVzdGVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogdW5uZXN0KGlucHV0KSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBbIFwiZG91YmxlLCBcIm5lc3RlZFwiIF0gXVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdW5uZXN0ID0gZnVuY3Rpb24gKGFycikgeyByZXR1cm4gYXJyLnJlZHVjZSh1bm5lc3RSLCBbXSk7IH07XG4vKipcbiAqIFJldHVybiBhIGNvbXBsZXRlbHkgZmxhdHRlbmVkIHZlcnNpb24gb2YgYW4gYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCBpbnB1dCA9IFsgWyBcImFcIiwgXCJiXCIgXSwgWyBcImNcIiwgXCJkXCIgXSwgWyBbIFwiZG91YmxlXCIsIFwibmVzdGVkXCIgXSBdIF07XG4gKiBmbGF0dGVuKGlucHV0KSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBcImRvdWJsZSwgXCJuZXN0ZWRcIiBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBmbGF0dGVuID0gZnVuY3Rpb24gKGFycikgeyByZXR1cm4gYXJyLnJlZHVjZShmbGF0dGVuUiwgW10pOyB9O1xuLyoqXG4gKiBHaXZlbiBhIC5maWx0ZXIgUHJlZGljYXRlLCBidWlsZHMgYSAuZmlsdGVyIFByZWRpY2F0ZSB3aGljaCB0aHJvd3MgYW4gZXJyb3IgaWYgYW55IGVsZW1lbnRzIGRvIG5vdCBwYXNzLlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCBpc051bWJlciA9IChvYmopID0+IHR5cGVvZihvYmopID09PSAnbnVtYmVyJztcbiAqIGxldCBhbGxOdW1iZXJzID0gWyAxLCAyLCAzLCA0LCA1IF07XG4gKiBhbGxOdW1iZXJzLmZpbHRlcihhc3NlcnRQcmVkaWNhdGUoaXNOdW1iZXIpKTsgLy9PS1xuICpcbiAqIGxldCBvbmVTdHJpbmcgPSBbIDEsIDIsIDMsIDQsIFwiNVwiIF07XG4gKiBvbmVTdHJpbmcuZmlsdGVyKGFzc2VydFByZWRpY2F0ZShpc051bWJlciwgXCJOb3QgYWxsIG51bWJlcnNcIikpOyAvLyB0aHJvd3MgRXJyb3IoXCJcIk5vdCBhbGwgbnVtYmVyc1wiXCIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgYXNzZXJ0UHJlZGljYXRlID0gYXNzZXJ0Rm47XG4vKipcbiAqIEdpdmVuIGEgLm1hcCBmdW5jdGlvbiwgYnVpbGRzIGEgLm1hcCBmdW5jdGlvbiB3aGljaCB0aHJvd3MgYW4gZXJyb3IgaWYgYW55IG1hcHBlZCBlbGVtZW50cyBkbyBub3QgcGFzcyBhIHRydXRoeW5lc3MgdGVzdC5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiB2YXIgZGF0YSA9IHsgZm9vOiAxLCBiYXI6IDIgfTtcbiAqXG4gKiBsZXQga2V5cyA9IFsgJ2ZvbycsICdiYXInIF1cbiAqIGxldCB2YWx1ZXMgPSBrZXlzLm1hcChhc3NlcnRNYXAoa2V5ID0+IGRhdGFba2V5XSwgXCJLZXkgbm90IGZvdW5kXCIpKTtcbiAqIC8vIHZhbHVlcyBpcyBbMSwgMl1cbiAqXG4gKiBsZXQga2V5cyA9IFsgJ2ZvbycsICdiYXInLCAnYmF6JyBdXG4gKiBsZXQgdmFsdWVzID0ga2V5cy5tYXAoYXNzZXJ0TWFwKGtleSA9PiBkYXRhW2tleV0sIFwiS2V5IG5vdCBmb3VuZFwiKSk7XG4gKiAvLyB0aHJvd3MgRXJyb3IoXCJLZXkgbm90IGZvdW5kXCIpXG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBhc3NlcnRNYXAgPSBhc3NlcnRGbjtcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRGbihwcmVkaWNhdGVPck1hcCwgZXJyTXNnKSB7XG4gICAgaWYgKGVyck1zZyA9PT0gdm9pZCAwKSB7IGVyck1zZyA9ICdhc3NlcnQgZmFpbHVyZSc7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcHJlZGljYXRlT3JNYXAob2JqKTtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpc0Z1bmN0aW9uKGVyck1zZykgPyBlcnJNc2cob2JqKSA6IGVyck1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuLyoqXG4gKiBMaWtlIF8ucGFpcnM6IEdpdmVuIGFuIG9iamVjdCwgcmV0dXJucyBhbiBhcnJheSBvZiBrZXkvdmFsdWUgcGFpcnNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogcGFpcnMoeyBmb286IFwiRk9PXCIsIGJhcjogXCJCQVIgfSkgLy8gWyBbIFwiZm9vXCIsIFwiRk9PXCIgXSwgWyBcImJhclwiOiBcIkJBUlwiIF0gXVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgcGFpcnMgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBba2V5LCBvYmpba2V5XV07IH0pOyB9O1xuLyoqXG4gKiBHaXZlbiB0d28gb3IgbW9yZSBwYXJhbGxlbCBhcnJheXMsIHJldHVybnMgYW4gYXJyYXkgb2YgdHVwbGVzIHdoZXJlXG4gKiBlYWNoIHR1cGxlIGlzIGNvbXBvc2VkIG9mIFsgYVtpXSwgYltpXSwgLi4uIHpbaV0gXVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgZm9vID0gWyAwLCAyLCA0LCA2IF07XG4gKiBsZXQgYmFyID0gWyAxLCAzLCA1LCA3IF07XG4gKiBsZXQgYmF6ID0gWyAxMCwgMzAsIDUwLCA3MCBdO1xuICogYXJyYXlUdXBsZXMoZm9vLCBiYXIpOyAgICAgICAvLyBbIFswLCAxXSwgWzIsIDNdLCBbNCwgNV0sIFs2LCA3XSBdXG4gKiBhcnJheVR1cGxlcyhmb28sIGJhciwgYmF6KTsgIC8vIFsgWzAsIDEsIDEwXSwgWzIsIDMsIDMwXSwgWzQsIDUsIDUwXSwgWzYsIDcsIDcwXSBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5VHVwbGVzKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB2YXIgbWF4QXJyYXlMZW4gPSBhcmdzLnJlZHVjZShmdW5jdGlvbiAobWluLCBhcnIpIHsgcmV0dXJuIE1hdGgubWluKGFyci5sZW5ndGgsIG1pbik7IH0sIDkwMDcxOTkyNTQ3NDA5OTEpOyAvLyBha2EgMl41MyDiiJIgMSBha2EgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAvLyBUaGlzIGlzIGEgaG90IGZ1bmN0aW9uXG4gICAgICAgIC8vIFVucm9sbCB3aGVuIHRoZXJlIGFyZSAxLTQgYXJndW1lbnRzXG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbYXJnc1swXVtpXV0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFthcmdzWzBdW2ldLCBhcmdzWzFdW2ldXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goW2FyZ3NbMF1baV0sIGFyZ3NbMV1baV0sIGFyZ3NbMl1baV1dKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbYXJnc1swXVtpXSwgYXJnc1sxXVtpXSwgYXJnc1syXVtpXSwgYXJnc1szXVtpXV0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChhcmdzLm1hcChmdW5jdGlvbiAoYXJyYXkpIHsgcmV0dXJuIGFycmF5W2ldOyB9KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4QXJyYXlMZW47IGkrKykge1xuICAgICAgICBfbG9vcF8xKGkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gd2hpY2ggYnVpbGRzIGFuIG9iamVjdCBmcm9tIGFuIGFycmF5IG9mIFtrZXksIHZhbHVlXSBwYWlycy5cbiAqXG4gKiBFYWNoIGl0ZXJhdGlvbiBzZXRzIHRoZSBrZXkvdmFsIHBhaXIgb24gdGhlIG1lbW8gb2JqZWN0LCB0aGVuIHJldHVybnMgdGhlIG1lbW8gZm9yIHRoZSBuZXh0IGl0ZXJhdGlvbi5cbiAqXG4gKiBFYWNoIGtleVZhbHVlVHVwbGUgc2hvdWxkIGJlIGFuIGFycmF5IHdpdGggdmFsdWVzIFsga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkgXVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiB2YXIgcGFpcnMgPSBbIFtcImZvb2tleVwiLCBcImZvb3ZhbFwiXSwgW1wiYmFya2V5XCIsIFwiYmFydmFsXCJdIF1cbiAqXG4gKiB2YXIgcGFpcnNUb09iaiA9IHBhaXJzLnJlZHVjZSgobWVtbywgcGFpcikgPT4gYXBwbHlQYWlycyhtZW1vLCBwYWlyKSwge30pXG4gKiAvLyBwYWlyc1RvT2JqID09IHsgZm9va2V5OiBcImZvb3ZhbFwiLCBiYXJrZXk6IFwiYmFydmFsXCIgfVxuICpcbiAqIC8vIE9yLCBtb3JlIHNpbXBseTpcbiAqIHZhciBwYWlyc1RvT2JqID0gcGFpcnMucmVkdWNlKGFwcGx5UGFpcnMsIHt9KVxuICogLy8gcGFpcnNUb09iaiA9PSB7IGZvb2tleTogXCJmb292YWxcIiwgYmFya2V5OiBcImJhcnZhbFwiIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlQYWlycyhtZW1vLCBrZXlWYWxUdXBsZSkge1xuICAgIHZhciBrZXksIHZhbHVlO1xuICAgIGlmIChpc0FycmF5KGtleVZhbFR1cGxlKSlcbiAgICAgICAga2V5ID0ga2V5VmFsVHVwbGVbMF0sIHZhbHVlID0ga2V5VmFsVHVwbGVbMV07XG4gICAgaWYgKCFpc1N0cmluZyhrZXkpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcGFyYW1ldGVycyB0byBhcHBseVBhaXJzJyk7XG4gICAgbWVtb1trZXldID0gdmFsdWU7XG4gICAgcmV0dXJuIG1lbW87XG59XG4vKiogR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkgKi9cbmV4cG9ydCBmdW5jdGlvbiB0YWlsKGFycikge1xuICAgIHJldHVybiAoYXJyLmxlbmd0aCAmJiBhcnJbYXJyLmxlbmd0aCAtIDFdKSB8fCB1bmRlZmluZWQ7XG59XG4vKipcbiAqIHNoYWxsb3cgY29weSBmcm9tIHNyYyB0byBkZXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KHNyYywgZGVzdCkge1xuICAgIGlmIChkZXN0KVxuICAgICAgICBPYmplY3Qua2V5cyhkZXN0KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGRlbGV0ZSBkZXN0W2tleV07IH0pO1xuICAgIGlmICghZGVzdClcbiAgICAgICAgZGVzdCA9IHt9O1xuICAgIHJldHVybiBleHRlbmQoZGVzdCwgc3JjKTtcbn1cbi8qKiBOYWl2ZSBmb3JFYWNoIGltcGxlbWVudGF0aW9uIHdvcmtzIHdpdGggT2JqZWN0cyBvciBBcnJheXMgKi9cbmZ1bmN0aW9uIF9mb3JFYWNoKG9iaiwgY2IsIF90aGlzKSB7XG4gICAgaWYgKGlzQXJyYXkob2JqKSlcbiAgICAgICAgcmV0dXJuIG9iai5mb3JFYWNoKGNiLCBfdGhpcyk7XG4gICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGNiKG9ialtrZXldLCBrZXkpOyB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfZXh0ZW5kKHRvT2JqKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaWYgKCFvYmopXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHRvT2JqW2tleXNbal1dID0gb2JqW2tleXNbal1dO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0b09iajtcbn1cbmZ1bmN0aW9uIF9lcXVhbHMobzEsIG8yKSB7XG4gICAgaWYgKG8xID09PSBvMilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKG8xID09PSBudWxsIHx8IG8yID09PSBudWxsKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKG8xICE9PSBvMSAmJiBvMiAhPT0gbzIpXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBOYU4gPT09IE5hTlxuICAgIHZhciB0MSA9IHR5cGVvZiBvMSwgdDIgPSB0eXBlb2YgbzI7XG4gICAgaWYgKHQxICE9PSB0MiB8fCB0MSAhPT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2YXIgdHVwID0gW28xLCBvMl07XG4gICAgaWYgKGFsbChpc0FycmF5KSh0dXApKVxuICAgICAgICByZXR1cm4gX2FycmF5c0VxKG8xLCBvMik7XG4gICAgaWYgKGFsbChpc0RhdGUpKHR1cCkpXG4gICAgICAgIHJldHVybiBvMS5nZXRUaW1lKCkgPT09IG8yLmdldFRpbWUoKTtcbiAgICBpZiAoYWxsKGlzUmVnRXhwKSh0dXApKVxuICAgICAgICByZXR1cm4gbzEudG9TdHJpbmcoKSA9PT0gbzIudG9TdHJpbmcoKTtcbiAgICBpZiAoYWxsKGlzRnVuY3Rpb24pKHR1cCkpXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBtZWhcbiAgICB2YXIgcHJlZGljYXRlcyA9IFtpc0Z1bmN0aW9uLCBpc0FycmF5LCBpc0RhdGUsIGlzUmVnRXhwXTtcbiAgICBpZiAocHJlZGljYXRlcy5tYXAoYW55KS5yZWR1Y2UoZnVuY3Rpb24gKGIsIGZuKSB7IHJldHVybiBiIHx8ICEhZm4odHVwKTsgfSwgZmFsc2UpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGtleXMgPSB7fTtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Zm9yaW5cbiAgICBmb3IgKHZhciBrZXkgaW4gbzEpIHtcbiAgICAgICAgaWYgKCFfZXF1YWxzKG8xW2tleV0sIG8yW2tleV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBrZXlzW2tleV0gPSB0cnVlO1xuICAgIH1cbiAgICBmb3IgKHZhciBrZXkgaW4gbzIpIHtcbiAgICAgICAgaWYgKCFrZXlzW2tleV0pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gX2FycmF5c0VxKGExLCBhMikge1xuICAgIGlmIChhMS5sZW5ndGggIT09IGEyLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBhcnJheVR1cGxlcyhhMSwgYTIpLnJlZHVjZShmdW5jdGlvbiAoYiwgdCkgeyByZXR1cm4gYiAmJiBfZXF1YWxzKHRbMF0sIHRbMV0pOyB9LCB0cnVlKTtcbn1cbi8vIGlzc3VlICMyNjc2XG5leHBvcnQgdmFyIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlKSB7IHJldHVybiBwcm9taXNlLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiAwOyB9KSAmJiBwcm9taXNlOyB9O1xuZXhwb3J0IHZhciBzaWxlbnRSZWplY3Rpb24gPSBmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZShzZXJ2aWNlcy4kcS5yZWplY3QoZXJyb3IpKTsgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKiogUHJlZGljYXRlc1xuICpcbiAqIFRoZXNlIHByZWRpY2F0ZXMgcmV0dXJuIHRydWUvZmFsc2UgYmFzZWQgb24gdGhlIGlucHV0LlxuICogQWx0aG91Z2ggdGhlc2UgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgdGhleSBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQG1vZHVsZSBjb21tb25fcHJlZGljYXRlc1xuICovXG4vKiogKi9cbmltcG9ydCB7IGFuZCwgbm90LCBwaXBlLCBwcm9wLCBvciB9IGZyb20gJy4vaG9mJztcbnZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgdGlzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiB0eXBlb2YgeCA9PT0gdDsgfTsgfTtcbmV4cG9ydCB2YXIgaXNVbmRlZmluZWQgPSB0aXMoJ3VuZGVmaW5lZCcpO1xuZXhwb3J0IHZhciBpc0RlZmluZWQgPSBub3QoaXNVbmRlZmluZWQpO1xuZXhwb3J0IHZhciBpc051bGwgPSBmdW5jdGlvbiAobykgeyByZXR1cm4gbyA9PT0gbnVsbDsgfTtcbmV4cG9ydCB2YXIgaXNOdWxsT3JVbmRlZmluZWQgPSBvcihpc051bGwsIGlzVW5kZWZpbmVkKTtcbmV4cG9ydCB2YXIgaXNGdW5jdGlvbiA9IHRpcygnZnVuY3Rpb24nKTtcbmV4cG9ydCB2YXIgaXNOdW1iZXIgPSB0aXMoJ251bWJlcicpO1xuZXhwb3J0IHZhciBpc1N0cmluZyA9IHRpcygnc3RyaW5nJyk7XG5leHBvcnQgdmFyIGlzT2JqZWN0ID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggIT09IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnOyB9O1xuZXhwb3J0IHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmV4cG9ydCB2YXIgaXNEYXRlID0gKGZ1bmN0aW9uICh4KSB7IHJldHVybiB0b1N0ci5jYWxsKHgpID09PSAnW29iamVjdCBEYXRlXSc7IH0pO1xuZXhwb3J0IHZhciBpc1JlZ0V4cCA9IChmdW5jdGlvbiAoeCkgeyByZXR1cm4gdG9TdHIuY2FsbCh4KSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7IH0pO1xuLyoqXG4gKiBQcmVkaWNhdGUgd2hpY2ggY2hlY2tzIGlmIGEgdmFsdWUgaXMgaW5qZWN0YWJsZVxuICpcbiAqIEEgdmFsdWUgaXMgXCJpbmplY3RhYmxlXCIgaWYgaXQgaXMgYSBmdW5jdGlvbiwgb3IgaWYgaXQgaXMgYW4gbmcxIGFycmF5LW5vdGF0aW9uLXN0eWxlIGFycmF5XG4gKiB3aGVyZSBhbGwgdGhlIGVsZW1lbnRzIGluIHRoZSBhcnJheSBhcmUgU3RyaW5ncywgZXhjZXB0IHRoZSBsYXN0IG9uZSwgd2hpY2ggaXMgYSBGdW5jdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbmplY3RhYmxlKHZhbCkge1xuICAgIGlmIChpc0FycmF5KHZhbCkgJiYgdmFsLmxlbmd0aCkge1xuICAgICAgICB2YXIgaGVhZCA9IHZhbC5zbGljZSgwLCAtMSksIHRhaWwgPSB2YWwuc2xpY2UoLTEpO1xuICAgICAgICByZXR1cm4gIShoZWFkLmZpbHRlcihub3QoaXNTdHJpbmcpKS5sZW5ndGggfHwgdGFpbC5maWx0ZXIobm90KGlzRnVuY3Rpb24pKS5sZW5ndGgpO1xuICAgIH1cbiAgICByZXR1cm4gaXNGdW5jdGlvbih2YWwpO1xufVxuLyoqXG4gKiBQcmVkaWNhdGUgd2hpY2ggY2hlY2tzIGlmIGEgdmFsdWUgbG9va3MgbGlrZSBhIFByb21pc2VcbiAqXG4gKiBJdCBpcyBwcm9iYWJseSBhIFByb21pc2UgaWYgaXQncyBhbiBvYmplY3QsIGFuZCBpdCBoYXMgYSBgdGhlbmAgcHJvcGVydHkgd2hpY2ggaXMgYSBGdW5jdGlvblxuICovXG5leHBvcnQgdmFyIGlzUHJvbWlzZSA9IGFuZChpc09iamVjdCwgcGlwZShwcm9wKCd0aGVuJyksIGlzRnVuY3Rpb24pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByZWRpY2F0ZXMuanMubWFwIiwiLyoqXG4gKiBIaWdoZXIgb3JkZXIgZnVuY3Rpb25zXG4gKlxuICogVGhlc2UgdXRpbGl0eSBmdW5jdGlvbnMgYXJlIGV4cG9ydGVkLCBidXQgYXJlIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgbm90aWNlLlxuICpcbiAqIEBtb2R1bGUgY29tbW9uX2hvZlxuICovIC8qKiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIGZvciBbUGFydGlhbCBBcHBsaWNhdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFydGlhbF9hcHBsaWNhdGlvbikgb2YgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuICpcbiAqIEdpdmVuIGEgZnVuY3Rpb24gd2l0aCBOIHBhcmFtZXRlcnMsIHJldHVybnMgYSBuZXcgZnVuY3Rpb24gdGhhdCBzdXBwb3J0cyBwYXJ0aWFsIGFwcGxpY2F0aW9uLlxuICogVGhlIG5ldyBmdW5jdGlvbiBhY2NlcHRzIGFueXdoZXJlIGZyb20gMSB0byBOIHBhcmFtZXRlcnMuICBXaGVuIHRoYXQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggTSBwYXJhbWV0ZXJzLFxuICogd2hlcmUgTSBpcyBsZXNzIHRoYW4gTiwgaXQgcmV0dXJucyBhIG5ldyBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdGhlIHJlbWFpbmluZyBwYXJhbWV0ZXJzLiAgSXQgY29udGludWVzIHRvXG4gKiBhY2NlcHQgbW9yZSBwYXJhbWV0ZXJzIHVudGlsIGFsbCBOIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIHN1cHBsaWVkLlxuICpcbiAqXG4gKiBUaGlzIGNvbnRyaXZlZCBleGFtcGxlIHVzZXMgYSBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbiBhcyBhbiBwcmVkaWNhdGUsIHdoaWNoIHJldHVybnMgdHJ1ZVxuICogaWYgYW4gb2JqZWN0IGlzIGZvdW5kIGluIGJvdGggYXJyYXlzLlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogLy8gcmV0dXJucyB0cnVlIGlmIGFuIG9iamVjdCBpcyBpbiBib3RoIG9mIHRoZSB0d28gYXJyYXlzXG4gKiBmdW5jdGlvbiBpbkJvdGgoYXJyYXkxLCBhcnJheTIsIG9iamVjdCkge1xuICogICByZXR1cm4gYXJyYXkxLmluZGV4T2Yob2JqZWN0KSAhPT0gLTEgJiZcbiAqICAgICAgICAgIGFycmF5Mi5pbmRleE9mKG9iamVjdCkgIT09IDE7XG4gKiB9XG4gKiBsZXQgb2JqMSwgb2JqMiwgb2JqMywgb2JqNCwgb2JqNSwgb2JqNiwgb2JqN1xuICogbGV0IGZvb3MgPSBbb2JqMSwgb2JqM11cbiAqIGxldCBiYXJzID0gW29iajMsIG9iajQsIG9iajVdXG4gKlxuICogLy8gQSBjdXJyaWVkIFwiY29weVwiIG9mIGluQm90aFxuICogbGV0IGN1cnJpZWRJbkJvdGggPSBjdXJyeShpbkJvdGgpO1xuICogLy8gUGFydGlhbGx5IGFwcGx5IGJvdGggdGhlIGFycmF5MSBhbmQgYXJyYXkyXG4gKiBsZXQgaW5Gb29zQW5kQmFycyA9IGN1cnJpZWRJbkJvdGgoZm9vcywgYmFycyk7XG4gKlxuICogLy8gU3VwcGx5IHRoZSBmaW5hbCBhcmd1bWVudDsgc2luY2UgYWxsIGFyZ3VtZW50cyBhcmVcbiAqIC8vIHN1cHBsaWVkLCB0aGUgb3JpZ2luYWwgaW5Cb3RoIGZ1bmN0aW9uIGlzIHRoZW4gY2FsbGVkLlxuICogbGV0IG9iajFJbkJvdGggPSBpbkZvb3NBbmRCYXJzKG9iajEpOyAvLyBmYWxzZVxuICpcbiAqIC8vIFVzZSB0aGUgaW5Gb29zQW5kQmFycyBhcyBhIHByZWRpY2F0ZS5cbiAqIC8vIEZpbHRlciwgb24gZWFjaCBpdGVyYXRpb24sIHN1cHBsaWVzIHRoZSBmaW5hbCBhcmd1bWVudFxuICogbGV0IGFsbE9ianMgPSBbIG9iajEsIG9iajIsIG9iajMsIG9iajQsIG9iajUsIG9iajYsIG9iajcgXTtcbiAqIGxldCBmb3VuZEluQm90aCA9IGFsbE9ianMuZmlsdGVyKGluRm9vc0FuZEJhcnMpOyAvLyBbIG9iajMgXVxuICpcbiAqIGBgYFxuICpcbiAqIFN0b2xlbiBmcm9tOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQzOTQ3NDcvamF2YXNjcmlwdC1jdXJyeS1mdW5jdGlvblxuICpcbiAqIEBwYXJhbSBmblxuICogQHJldHVybnMgeyp8ZnVuY3Rpb24oKTogKCp8YW55KX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGN1cnJ5KGZuKSB7XG4gICAgdmFyIGluaXRpYWxfYXJncyA9IFtdLnNsaWNlLmFwcGx5KGFyZ3VtZW50cywgWzFdKTtcbiAgICB2YXIgZnVuY19hcmdzX2xlbmd0aCA9IGZuLmxlbmd0aDtcbiAgICBmdW5jdGlvbiBjdXJyaWVkKGFyZ3MpIHtcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID49IGZ1bmNfYXJnc19sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmllZChhcmdzLmNvbmNhdChbXS5zbGljZS5hcHBseShhcmd1bWVudHMpKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBjdXJyaWVkKGluaXRpYWxfYXJncyk7XG59XG4vKipcbiAqIEdpdmVuIGEgdmFyYXJncyBsaXN0IG9mIGZ1bmN0aW9ucywgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgY29tcG9zZXMgdGhlIGFyZ3VtZW50IGZ1bmN0aW9ucywgcmlnaHQtdG8tbGVmdFxuICogZ2l2ZW46IGYoeCksIGcoeCksIGgoeClcbiAqIGxldCBjb21wb3NlZCA9IGNvbXBvc2UoZixnLGgpXG4gKiB0aGVuLCBjb21wb3NlZCBpczogZihnKGgoeCkpKVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZSgpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgc3RhcnQgPSBhcmdzLmxlbmd0aCAtIDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGkgPSBzdGFydCwgcmVzdWx0ID0gYXJnc1tzdGFydF0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIEdpdmVuIGEgdmFyYXJncyBsaXN0IG9mIGZ1bmN0aW9ucywgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaXMgY29tcG9zZXMgdGhlIGFyZ3VtZW50IGZ1bmN0aW9ucywgbGVmdC10by1yaWdodFxuICogZ2l2ZW46IGYoeCksIGcoeCksIGgoeClcbiAqIGxldCBwaXBlZCA9IHBpcGUoZixnLGgpO1xuICogdGhlbiwgcGlwZWQgaXM6IGgoZyhmKHgpKSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGUoKSB7XG4gICAgdmFyIGZ1bmNzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgZnVuY3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvc2UuYXBwbHkobnVsbCwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMpLnJldmVyc2UoKSk7XG59XG4vKipcbiAqIEdpdmVuIGEgcHJvcGVydHkgbmFtZSwgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGF0IHByb3BlcnR5IGZyb20gYW4gb2JqZWN0XG4gKiBsZXQgb2JqID0geyBmb286IDEsIG5hbWU6IFwiYmxhcmdcIiB9O1xuICogbGV0IGdldE5hbWUgPSBwcm9wKFwibmFtZVwiKTtcbiAqIGdldE5hbWUob2JqKSA9PT0gXCJibGFyZ1wiXG4gKi9cbmV4cG9ydCB2YXIgcHJvcCA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqW25hbWVdOyB9OyB9O1xuLyoqXG4gKiBHaXZlbiBhIHByb3BlcnR5IG5hbWUgYW5kIGEgdmFsdWUsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBib29sZWFuIGJhc2VkIG9uIHdoZXRoZXJcbiAqIHRoZSBwYXNzZWQgb2JqZWN0IGhhcyBhIHByb3BlcnR5IHRoYXQgbWF0Y2hlcyB0aGUgdmFsdWVcbiAqIGxldCBvYmogPSB7IGZvbzogMSwgbmFtZTogXCJibGFyZ1wiIH07XG4gKiBsZXQgZ2V0TmFtZSA9IHByb3BFcShcIm5hbWVcIiwgXCJibGFyZ1wiKTtcbiAqIGdldE5hbWUob2JqKSA9PT0gdHJ1ZVxuICovXG5leHBvcnQgdmFyIHByb3BFcSA9IGN1cnJ5KGZ1bmN0aW9uIChuYW1lLCBfdmFsLCBvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmpbbmFtZV0gPT09IF92YWw7IH0pO1xuLyoqXG4gKiBHaXZlbiBhIGRvdHRlZCBwcm9wZXJ0eSBuYW1lLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbmVzdGVkIHByb3BlcnR5IGZyb20gYW4gb2JqZWN0LCBvciB1bmRlZmluZWRcbiAqIGxldCBvYmogPSB7IGlkOiAxLCBuZXN0ZWRPYmo6IHsgZm9vOiAxLCBuYW1lOiBcImJsYXJnXCIgfSwgfTtcbiAqIGxldCBnZXROYW1lID0gcHJvcChcIm5lc3RlZE9iai5uYW1lXCIpO1xuICogZ2V0TmFtZShvYmopID09PSBcImJsYXJnXCJcbiAqIGxldCBwcm9wTm90Rm91bmQgPSBwcm9wKFwidGhpcy5wcm9wZXJ0eS5kb2VzbnQuZXhpc3RcIik7XG4gKiBwcm9wTm90Rm91bmQob2JqKSA9PT0gdW5kZWZpbmVkXG4gKi9cbmV4cG9ydCB2YXIgcGFyc2UgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gcGlwZS5hcHBseShudWxsLCBuYW1lLnNwbGl0KCcuJykubWFwKHByb3ApKTsgfTtcbi8qKlxuICogR2l2ZW4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0cnV0aHkgb3IgZmFsc2V5IHZhbHVlLCByZXR1cm5zIGFcbiAqIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgb3Bwb3NpdGUgKGZhbHNleSBvciB0cnV0aHkpIHZhbHVlIGdpdmVuIHRoZSBzYW1lIGlucHV0c1xuICovXG5leHBvcnQgdmFyIG5vdCA9IGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gIWZuLmFwcGx5KG51bGwsIGFyZ3MpO1xufTsgfTtcbi8qKlxuICogR2l2ZW4gdHdvIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB0cnV0aHkgb3IgZmFsc2V5IHZhbHVlcywgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnV0aHlcbiAqIGlmIGJvdGggZnVuY3Rpb25zIHJldHVybiB0cnV0aHkgZm9yIHRoZSBnaXZlbiBhcmd1bWVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuZChmbjEsIGZuMikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZuMS5hcHBseShudWxsLCBhcmdzKSAmJiBmbjIuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfTtcbn1cbi8qKlxuICogR2l2ZW4gdHdvIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB0cnV0aHkgb3IgZmFsc2V5IHZhbHVlcywgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnV0aHlcbiAqIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgZnVuY3Rpb25zIHJldHVybnMgdHJ1dGh5IGZvciB0aGUgZ2l2ZW4gYXJndW1lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcihmbjEsIGZuMikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZuMS5hcHBseShudWxsLCBhcmdzKSB8fCBmbjIuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgYWxsIHRoZSBlbGVtZW50cyBvZiBhbiBhcnJheSBtYXRjaCBhIHByZWRpY2F0ZSBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSBmbjEgYSBwcmVkaWNhdGUgZnVuY3Rpb24gYGZuMWBcbiAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgYW4gYXJyYXkgYW5kIHJldHVybnMgdHJ1ZSBpZiBgZm4xYCBpcyB0cnVlIGZvciBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5XG4gKi9cbmV4cG9ydCB2YXIgYWxsID0gZnVuY3Rpb24gKGZuMSkgeyByZXR1cm4gZnVuY3Rpb24gKGFycikgeyByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoYiwgeCkgeyByZXR1cm4gYiAmJiAhIWZuMSh4KTsgfSwgdHJ1ZSk7IH07IH07XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuZXhwb3J0IHZhciBhbnkgPSBmdW5jdGlvbiAoZm4xKSB7IHJldHVybiBmdW5jdGlvbiAoYXJyKSB7IHJldHVybiBhcnIucmVkdWNlKGZ1bmN0aW9uIChiLCB4KSB7IHJldHVybiBiIHx8ICEhZm4xKHgpOyB9LCBmYWxzZSk7IH07IH07XG4vKiogR2l2ZW4gYSBjbGFzcywgcmV0dXJucyBhIFByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIG9mIHRoYXQgY2xhc3MgKi9cbmV4cG9ydCB2YXIgaXMgPSBmdW5jdGlvbiAoY3RvcikgeyByZXR1cm4gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiAob2JqICE9IG51bGwgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBjdG9yKSB8fCBvYmogaW5zdGFuY2VvZiBjdG9yO1xufTsgfTtcbi8qKiBHaXZlbiBhIHZhbHVlLCByZXR1cm5zIGEgUHJlZGljYXRlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIGFub3RoZXIgdmFsdWUgaXMgPT09IGVxdWFsIHRvIHRoZSBvcmlnaW5hbCB2YWx1ZSAqL1xuZXhwb3J0IHZhciBlcSA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gZnVuY3Rpb24gKG90aGVyKSB7IHJldHVybiB2YWx1ZSA9PT0gb3RoZXI7IH07IH07XG4vKiogR2l2ZW4gYSB2YWx1ZSwgcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHZhbHVlICovXG5leHBvcnQgdmFyIHZhbCA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiB2OyB9OyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGludm9rZShmbk5hbWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqW2ZuTmFtZV0uYXBwbHkob2JqLCBhcmdzKTsgfTtcbn1cbi8qKlxuICogU29ydGEgbGlrZSBQYXR0ZXJuIE1hdGNoaW5nIChhIGZ1bmN0aW9uYWwgcHJvZ3JhbW1pbmcgY29uZGl0aW9uYWwgY29uc3RydWN0KVxuICpcbiAqIFNlZSBodHRwOi8vYzIuY29tL2NnaS93aWtpP1BhdHRlcm5NYXRjaGluZ1xuICpcbiAqIFRoaXMgaXMgYSBjb25kaXRpb25hbCBjb25zdHJ1Y3Qgd2hpY2ggYWxsb3dzIGEgc2VyaWVzIG9mIHByZWRpY2F0ZXMgYW5kIG91dHB1dCBmdW5jdGlvbnNcbiAqIHRvIGJlIGNoZWNrZWQgYW5kIHRoZW4gYXBwbGllZC4gIEVhY2ggcHJlZGljYXRlIHJlY2VpdmVzIHRoZSBpbnB1dC4gIElmIHRoZSBwcmVkaWNhdGVcbiAqIHJldHVybnMgdHJ1dGh5LCB0aGVuIGl0cyBtYXRjaGluZyBvdXRwdXQgZnVuY3Rpb24gKG1hcHBpbmcgZnVuY3Rpb24pIGlzIHByb3ZpZGVkIHdpdGhcbiAqIHRoZSBpbnB1dCBhbmQsIHRoZW4gdGhlIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBFYWNoIGNvbWJpbmF0aW9uICgyLXR1cGxlKSBvZiBwcmVkaWNhdGUgKyBvdXRwdXQgZnVuY3Rpb24gc2hvdWxkIGJlIHBsYWNlZCBpbiBhbiBhcnJheVxuICogb2Ygc2l6ZSAyOiBbIHByZWRpY2F0ZSwgbWFwRm4gXVxuICpcbiAqIFRoZXNlIDItdHVwbGVzIHNob3VsZCBiZSBwdXQgaW4gYW4gb3V0ZXIgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIC8vIEhlcmUncyBhIDItdHVwbGUgd2hlcmUgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGlzU3RyaW5nIHByZWRpY2F0ZVxuICogLy8gYW5kIHRoZSBzZWNvbmQgZWxlbWVudCBpcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpbnB1dFxuICogbGV0IGZpcnN0VHVwbGUgPSBbIGFuZ3VsYXIuaXNTdHJpbmcsIChpbnB1dCkgPT4gYEhlcmVzIHlvdXIgc3RyaW5nICR7aW5wdXR9YCBdO1xuICpcbiAqIC8vIFNlY29uZCB0dXBsZTogcHJlZGljYXRlIFwiaXNOdW1iZXJcIiwgbWFwZm4gcmV0dXJucyBhIGRlc2NyaXB0aW9uXG4gKiBsZXQgc2Vjb25kVHVwbGUgPSBbIGFuZ3VsYXIuaXNOdW1iZXIsIChpbnB1dCkgPT4gYCgke2lucHV0fSkgVGhhdCdzIGEgbnVtYmVyIWAgXTtcbiAqXG4gKiBsZXQgdGhpcmQgPSBbIChpbnB1dCkgPT4gaW5wdXQgPT09IG51bGwsICAoaW5wdXQpID0+IGBPaCwgbnVsbC4uLmAgXTtcbiAqXG4gKiBsZXQgZm91cnRoID0gWyAoaW5wdXQpID0+IGlucHV0ID09PSB1bmRlZmluZWQsICAoaW5wdXQpID0+IGBub3RkZWZpbmVkYCBdO1xuICpcbiAqIGxldCBkZXNjcmlwdGlvbk9mID0gcGF0dGVybihbIGZpcnN0VHVwbGUsIHNlY29uZFR1cGxlLCB0aGlyZCwgZm91cnRoIF0pO1xuICpcbiAqIGNvbnNvbGUubG9nKGRlc2NyaXB0aW9uT2YodW5kZWZpbmVkKSk7IC8vICdub3RkZWZpbmVkJ1xuICogY29uc29sZS5sb2coZGVzY3JpcHRpb25PZig1NSkpOyAvLyAnKDU1KSBUaGF0J3MgYSBudW1iZXIhJ1xuICogY29uc29sZS5sb2coZGVzY3JpcHRpb25PZihcImZvb1wiKSk7IC8vICdIZXJlJ3MgeW91ciBzdHJpbmcgZm9vJ1xuICogYGBgXG4gKlxuICogQHBhcmFtIHN0cnVjdCBBIDJEIGFycmF5LiAgRWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBzaG91bGQgYmUgYW4gYXJyYXksIGEgMi10dXBsZSxcbiAqIHdpdGggYSBQcmVkaWNhdGUgYW5kIGEgbWFwcGluZy9vdXRwdXQgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtmdW5jdGlvbihhbnkpOiAqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGF0dGVybihzdHJ1Y3QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJ1Y3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzdHJ1Y3RbaV1bMF0oeCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cnVjdFtpXVsxXSh4KTtcbiAgICAgICAgfVxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ob2YuanMubWFwIiwiZXhwb3J0IHZhciBub3RJbXBsZW1lbnRlZCA9IGZ1bmN0aW9uIChmbm5hbWUpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZm5uYW1lICsgXCIoKTogTm8gY29yZXNlcnZpY2VzIGltcGxlbWVudGF0aW9uIGZvciBVSS1Sb3V0ZXIgaXMgbG9hZGVkLlwiKTtcbn07IH07XG52YXIgc2VydmljZXMgPSB7XG4gICAgJHE6IHVuZGVmaW5lZCxcbiAgICAkaW5qZWN0b3I6IHVuZGVmaW5lZCxcbn07XG5leHBvcnQgeyBzZXJ2aWNlcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29yZXNlcnZpY2VzLmpzLm1hcCIsInJlcXVpcmUoJy4vYW5ndWxhcicpO1xubW9kdWxlLmV4cG9ydHMgPSBhbmd1bGFyO1xuIiwiaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuaW1wb3J0IGFwcCBmcm9tICcuL2FwcCc7IiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9zdHlsZS5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9zdHlsZS5zY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJkaXYgaDF7Y29sb3I6YmxhY2t9YnV0dG9ue2ZvbnQtc2l6ZToxM3B4O3BhZGRpbmc6NXB4IDEwcHg7YmFja2dyb3VuZC1jb2xvcjpvcmFuZ2U7Y29sb3I6d2hpdGU7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoycHh9YnV0dG9uOmhvdmVye2ZvbnQtc2l6ZToxM3B4O3BhZGRpbmc6NXB4IDEwcHg7YmFja2dyb3VuZC1jb2xvcjpncmF5O2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MnB4fVxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih1c2VTb3VyY2VNYXApIHtcblx0dmFyIGxpc3QgPSBbXTtcblxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXHRcdFx0aWYoaXRlbVsyXSkge1xuXHRcdFx0XHRyZXR1cm4gXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBjb250ZW50ICsgXCJ9XCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gY29udGVudDtcblx0XHRcdH1cblx0XHR9KS5qb2luKFwiXCIpO1xuXHR9O1xuXG5cdC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcblx0XHRcdG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIFwiXCJdXTtcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG5cdFx0fVxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcblx0XHRcdC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuXHRcdFx0Ly8gIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gbWVkaWFRdWVyeTtcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7XG5cdHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblx0aWYgKCFjc3NNYXBwaW5nKSB7XG5cdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdH1cblxuXHRpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0dmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG5cdFx0dmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcblx0XHRcdHJldHVybiAnLyojIHNvdXJjZVVSTD0nICsgY3NzTWFwcGluZy5zb3VyY2VSb290ICsgc291cmNlICsgJyAqLydcblx0XHR9KTtcblxuXHRcdHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuXHR9XG5cblx0cmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn1cblxuLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcblx0dmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG5cdHZhciBkYXRhID0gJ3NvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCcgKyBiYXNlNjQ7XG5cblx0cmV0dXJuICcvKiMgJyArIGRhdGEgKyAnICovJztcbn1cbiIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXJcdG1lbW9pemUgPSBmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW87XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiBtZW1vO1xuXHR9O1xufTtcblxudmFyIGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0Ly8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3Ncblx0Ly8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuXHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG5cdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHQvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcblx0cmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iO1xufSk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG59O1xuXG52YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW8gPSB7fTtcblxuXHRyZXR1cm4gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSBcImhlYWRcIiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgaW5zZXJ0SW50bzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb29cIikuc2hhZG93Um9vdCB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQpO1xuXHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblx0XHRcdGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuXHRcdFx0XHRcdC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcblx0XHR9XG5cdFx0cmV0dXJuIG1lbW9bdGFyZ2V0XVxuXHR9O1xufSkoKTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXJcdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xudmFyXHRzdHlsZXNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhclx0Zml4VXJscyA9IHJlcXVpcmUoXCIuL3VybHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSBcImJvb2xlYW5cIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcbiAgICAgICAgaWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cdG9wdGlvbnMuYXR0cnMucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cblx0YWRkQXR0cnMobGluaywgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTtcblxuXHRyZXR1cm4gbGluaztcbn1cblxuZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDtcblxuXHQvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3Ncblx0aWYgKG9wdGlvbnMudHJhbnNmb3JtICYmIG9iai5jc3MpIHtcblx0ICAgIHJlc3VsdCA9IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpO1xuXG5cdCAgICBpZiAocmVzdWx0KSB7XG5cdCAgICBcdC8vIElmIHRyYW5zZm9ybSByZXR1cm5zIGEgdmFsdWUsIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgcnVubmluZyBydW50aW1lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgY3NzLlxuXHQgICAgXHRvYmouY3NzID0gcmVzdWx0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0Ly8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3Ncblx0ICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdC8vIG5vb3Bcblx0ICAgIFx0fTtcblx0ICAgIH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXG5cdFx0c3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuXG5cdH0gZWxzZSBpZiAoXG5cdFx0b2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cblx0XHRcdGlmKHN0eWxlLmhyZWYpIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7XG5cdFx0aWYgKG5ld09iaikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXdPYmouY3NzID09PSBvYmouY3NzICYmXG5cdFx0XHRcdG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdFx0XHRcdG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXBcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUoKTtcblx0XHR9XG5cdH07XG59XG5cbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZSwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cblx0aWYobWVkaWEpIHtcblx0XHRzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdH0gZWxzZSB7XG5cdFx0d2hpbGUoc3R5bGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKlxuXHRcdElmIGNvbnZlcnRUb0Fic29sdXRlVXJscyBpc24ndCBkZWZpbmVkLCBidXQgc291cmNlbWFwcyBhcmUgZW5hYmxlZFxuXHRcdGFuZCB0aGVyZSBpcyBubyBwdWJsaWNQYXRoIGRlZmluZWQgdGhlbiBsZXRzIHR1cm4gY29udmVydFRvQWJzb2x1dGVVcmxzXG5cdFx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdFx0ZGlyZWN0bHlcblx0Ki9cblx0dmFyIGF1dG9GaXhVcmxzID0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgPT09IHVuZGVmaW5lZCAmJiBzb3VyY2VNYXA7XG5cblx0aWYgKG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IGF1dG9GaXhVcmxzKSB7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XG5cblx0dmFyIG9sZFNyYyA9IGxpbmsuaHJlZjtcblxuXHRsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYykgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ1JvdXRlciBmcm9tICdAdWlyb3V0ZXIvYW5ndWxhcmpzJztcbmltcG9ydCBIb21lQ3RybCBmcm9tICcuL2NvbnRyb2xsZXIvSG9tZUN0cmwnO1xuaW1wb3J0IFByb2ZpbGVDdHJsIGZyb20gJy4vY29udHJvbGxlci9Qcm9maWxlQ3RybCc7XG5cbmNvbnN0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKVxuYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgIC5zdGF0ZSgnLycsIHtcbiAgICAgICAgICAgIHVybDogJy8nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYWdlcy9ob21lLmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgnL3Byb2ZpbGUnLCB7XG4gICAgICAgICAgICB1cmw6ICcvcHJvZmlsZScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhZ2VzL3Byb2ZpbGUuaHRtbCdcbiAgICAgICAgfSk7XG59KTtcbmFwcC5jb250cm9sbGVyKCdIb21lQ3RybCcsIEhvbWVDdHJsKTtcbmFwcC5jb250cm9sbGVyKCdQcm9maWxlQ3RybCcsIFByb2ZpbGVDdHJsKTtcbmV4cG9ydCBkZWZhdWx0IGFwcDsiLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS43LjJcbiAqIChjKSAyMDEwLTIwMTggR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuKGZ1bmN0aW9uKHdpbmRvdykgeyd1c2Ugc3RyaWN0JztcblxuLyogZXhwb3J0ZWRcbiAgbWluRXJyQ29uZmlnLFxuICBlcnJvckhhbmRsaW5nQ29uZmlnLFxuICBpc1ZhbGlkT2JqZWN0TWF4RGVwdGhcbiovXG5cbnZhciBtaW5FcnJDb25maWcgPSB7XG4gIG9iamVjdE1heERlcHRoOiA1LFxuICB1cmxFcnJvclBhcmFtc0VuYWJsZWQ6IHRydWVcbn07XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmVycm9ySGFuZGxpbmdDb25maWdcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb25maWd1cmUgc2V2ZXJhbCBhc3BlY3RzIG9mIGVycm9yIGhhbmRsaW5nIGluIEFuZ3VsYXJKUyBpZiB1c2VkIGFzIGEgc2V0dGVyIG9yIHJldHVybiB0aGVcbiAqIGN1cnJlbnQgY29uZmlndXJhdGlvbiBpZiB1c2VkIGFzIGEgZ2V0dGVyLiBUaGUgZm9sbG93aW5nIG9wdGlvbnMgYXJlIHN1cHBvcnRlZDpcbiAqXG4gKiAtICoqb2JqZWN0TWF4RGVwdGgqKjogVGhlIG1heGltdW0gZGVwdGggdG8gd2hpY2ggb2JqZWN0cyBhcmUgdHJhdmVyc2VkIHdoZW4gc3RyaW5naWZpZWQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuICpcbiAqIE9taXR0ZWQgb3IgdW5kZWZpbmVkIG9wdGlvbnMgd2lsbCBsZWF2ZSB0aGUgY29ycmVzcG9uZGluZyBjb25maWd1cmF0aW9uIHZhbHVlcyB1bmNoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QuIE1heSBvbmx5IGNvbnRhaW4gdGhlIG9wdGlvbnMgdGhhdCBuZWVkIHRvIGJlXG4gKiAgICAgdXBkYXRlZC4gU3VwcG9ydGVkIGtleXM6XG4gKlxuICogKiBgb2JqZWN0TWF4RGVwdGhgICAqKntOdW1iZXJ9KiogLSBUaGUgbWF4IGRlcHRoIGZvciBzdHJpbmdpZnlpbmcgb2JqZWN0cy4gU2V0dGluZyB0byBhXG4gKiAgIG5vbi1wb3NpdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgcmVtb3ZlcyB0aGUgbWF4IGRlcHRoIGxpbWl0LlxuICogICBEZWZhdWx0OiA1XG4gKlxuICogKiBgdXJsRXJyb3JQYXJhbXNFbmFibGVkYCAgKip7Qm9vbGVhbn0qKiAtIFNwZWNpZmllcyB3ZXRoZXIgdGhlIGdlbmVyYXRlZCBlcnJvciB1cmwgd2lsbFxuICogICBjb250YWluIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSB0aHJvd24gZXJyb3IuIERpc2FibGluZyB0aGUgcGFyYW1ldGVycyBjYW4gYmUgdXNlZnVsIGlmIHRoZVxuICogICBnZW5lcmF0ZWQgZXJyb3IgdXJsIGlzIHZlcnkgbG9uZy5cbiAqXG4gKiAgIERlZmF1bHQ6IHRydWUuIFdoZW4gdXNlZCB3aXRob3V0IGFyZ3VtZW50LCBpdCByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlLlxuICovXG5mdW5jdGlvbiBlcnJvckhhbmRsaW5nQ29uZmlnKGNvbmZpZykge1xuICBpZiAoaXNPYmplY3QoY29uZmlnKSkge1xuICAgIGlmIChpc0RlZmluZWQoY29uZmlnLm9iamVjdE1heERlcHRoKSkge1xuICAgICAgbWluRXJyQ29uZmlnLm9iamVjdE1heERlcHRoID0gaXNWYWxpZE9iamVjdE1heERlcHRoKGNvbmZpZy5vYmplY3RNYXhEZXB0aCkgPyBjb25maWcub2JqZWN0TWF4RGVwdGggOiBOYU47XG4gICAgfVxuICAgIGlmIChpc0RlZmluZWQoY29uZmlnLnVybEVycm9yUGFyYW1zRW5hYmxlZCkgJiYgaXNCb29sZWFuKGNvbmZpZy51cmxFcnJvclBhcmFtc0VuYWJsZWQpKSB7XG4gICAgICBtaW5FcnJDb25maWcudXJsRXJyb3JQYXJhbXNFbmFibGVkID0gY29uZmlnLnVybEVycm9yUGFyYW1zRW5hYmxlZDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG1pbkVyckNvbmZpZztcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gbWF4RGVwdGhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRPYmplY3RNYXhEZXB0aChtYXhEZXB0aCkge1xuICByZXR1cm4gaXNOdW1iZXIobWF4RGVwdGgpICYmIG1heERlcHRoID4gMDtcbn1cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgb2JqZWN0IHByb3ZpZGVzIGEgdXRpbGl0eSBmb3IgcHJvZHVjaW5nIHJpY2ggRXJyb3IgbWVzc2FnZXMgd2l0aGluXG4gKiBBbmd1bGFySlMuIEl0IGNhbiBiZSBjYWxsZWQgYXMgZm9sbG93czpcbiAqXG4gKiB2YXIgZXhhbXBsZU1pbkVyciA9IG1pbkVycignZXhhbXBsZScpO1xuICogdGhyb3cgZXhhbXBsZU1pbkVycignb25lJywgJ1RoaXMgezB9IGlzIHsxfScsIGZvbywgYmFyKTtcbiAqXG4gKiBUaGUgYWJvdmUgY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBtaW5FcnIgaW4gdGhlIGV4YW1wbGUgbmFtZXNwYWNlLiBUaGVcbiAqIHJlc3VsdGluZyBlcnJvciB3aWxsIGhhdmUgYSBuYW1lc3BhY2VkIGVycm9yIGNvZGUgb2YgZXhhbXBsZS5vbmUuICBUaGVcbiAqIHJlc3VsdGluZyBlcnJvciB3aWxsIHJlcGxhY2UgezB9IHdpdGggdGhlIHZhbHVlIG9mIGZvbywgYW5kIHsxfSB3aXRoIHRoZVxuICogdmFsdWUgb2YgYmFyLiBUaGUgb2JqZWN0IGlzIG5vdCByZXN0cmljdGVkIGluIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIGl0IGNhblxuICogdGFrZS5cbiAqXG4gKiBJZiBmZXdlciBhcmd1bWVudHMgYXJlIHNwZWNpZmllZCB0aGFuIG5lY2Vzc2FyeSBmb3IgaW50ZXJwb2xhdGlvbiwgdGhlIGV4dHJhXG4gKiBpbnRlcnBvbGF0aW9uIG1hcmtlcnMgd2lsbCBiZSBwcmVzZXJ2ZWQgaW4gdGhlIGZpbmFsIHN0cmluZy5cbiAqXG4gKiBTaW5jZSBkYXRhIHdpbGwgYmUgcGFyc2VkIHN0YXRpY2FsbHkgZHVyaW5nIGEgYnVpbGQgc3RlcCwgc29tZSByZXN0cmljdGlvbnNcbiAqIGFyZSBhcHBsaWVkIHdpdGggcmVzcGVjdCB0byBob3cgbWluRXJyIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhbmQgY2FsbGVkLlxuICogSW5zdGFuY2VzIHNob3VsZCBoYXZlIG5hbWVzIG9mIHRoZSBmb3JtIG5hbWVzcGFjZU1pbkVyciBmb3IgYSBtaW5FcnIgY3JlYXRlZFxuICogdXNpbmcgbWluRXJyKCduYW1lc3BhY2UnKSAuIEVycm9yIGNvZGVzLCBuYW1lc3BhY2VzIGFuZCB0ZW1wbGF0ZSBzdHJpbmdzXG4gKiBzaG91bGQgYWxsIGJlIHN0YXRpYyBzdHJpbmdzLCBub3QgdmFyaWFibGVzIG9yIGdlbmVyYWwgZXhwcmVzc2lvbnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZSBUaGUgbmFtZXNwYWNlIHRvIHVzZSBmb3IgdGhlIG5ldyBtaW5FcnIgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBFcnJvckNvbnN0cnVjdG9yIEN1c3RvbSBlcnJvciBjb25zdHJ1Y3RvciB0byBiZSBpbnN0YW50aWF0ZWQgd2hlbiByZXR1cm5pbmdcbiAqICAgZXJyb3IgZnJvbSByZXR1cm5lZCBmdW5jdGlvbiwgZm9yIGNhc2VzIHdoZW4gYSBwYXJ0aWN1bGFyIHR5cGUgb2YgZXJyb3IgaXMgdXNlZnVsLlxuICogQHJldHVybnMge2Z1bmN0aW9uKGNvZGU6c3RyaW5nLCB0ZW1wbGF0ZTpzdHJpbmcsIC4uLnRlbXBsYXRlQXJncyk6IEVycm9yfSBtaW5FcnIgaW5zdGFuY2VcbiAqL1xuXG5mdW5jdGlvbiBtaW5FcnIobW9kdWxlLCBFcnJvckNvbnN0cnVjdG9yKSB7XG4gIEVycm9yQ29uc3RydWN0b3IgPSBFcnJvckNvbnN0cnVjdG9yIHx8IEVycm9yO1xuXG4gIHZhciB1cmwgPSAnaHR0cHM6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjcuMi8nO1xuICB2YXIgcmVnZXggPSB1cmwucmVwbGFjZSgnLicsICdcXFxcLicpICsgJ1tcXFxcc1xcXFxTXSonO1xuICB2YXIgZXJyUmVnRXhwID0gbmV3IFJlZ0V4cChyZWdleCwgJ2cnKTtcblxuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvZGUgPSBhcmd1bWVudHNbMF0sXG4gICAgICB0ZW1wbGF0ZSA9IGFyZ3VtZW50c1sxXSxcbiAgICAgIG1lc3NhZ2UgPSAnWycgKyAobW9kdWxlID8gbW9kdWxlICsgJzonIDogJycpICsgY29kZSArICddICcsXG4gICAgICB0ZW1wbGF0ZUFyZ3MgPSBzbGljZUFyZ3MoYXJndW1lbnRzLCAyKS5tYXAoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0b0RlYnVnU3RyaW5nKGFyZywgbWluRXJyQ29uZmlnLm9iamVjdE1heERlcHRoKTtcbiAgICAgIH0pLFxuICAgICAgcGFyYW1QcmVmaXgsIGk7XG5cbiAgICAvLyBBIG1pbkVyciBtZXNzYWdlIGhhcyB0d28gcGFydHM6IHRoZSBtZXNzYWdlIGl0c2VsZiBhbmQgdGhlIHVybCB0aGF0IGNvbnRhaW5zIHRoZVxuICAgIC8vIGVuY29kZWQgbWVzc2FnZS5cbiAgICAvLyBUaGUgbWVzc2FnZSdzIHBhcmFtZXRlcnMgY2FuIGNvbnRhaW4gb3RoZXIgZXJyb3IgbWVzc2FnZXMgd2hpY2ggYWxzbyBpbmNsdWRlIGVycm9yIHVybHMuXG4gICAgLy8gVG8gcHJldmVudCB0aGUgbWVzc2FnZXMgZnJvbSBnZXR0aW5nIHRvbyBsb25nLCB3ZSBzdHJpcCB0aGUgZXJyb3IgdXJscyBmcm9tIHRoZSBwYXJhbWV0ZXJzLlxuXG4gICAgbWVzc2FnZSArPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXGQrXFx9L2csIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICB2YXIgaW5kZXggPSArbWF0Y2guc2xpY2UoMSwgLTEpO1xuXG4gICAgICBpZiAoaW5kZXggPCB0ZW1wbGF0ZUFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZUFyZ3NbaW5kZXhdLnJlcGxhY2UoZXJyUmVnRXhwLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2UgKz0gJ1xcbicgKyB1cmwgKyAobW9kdWxlID8gbW9kdWxlICsgJy8nIDogJycpICsgY29kZTtcblxuICAgIGlmIChtaW5FcnJDb25maWcudXJsRXJyb3JQYXJhbXNFbmFibGVkKSB7XG4gICAgICBmb3IgKGkgPSAwLCBwYXJhbVByZWZpeCA9ICc/JzsgaSA8IHRlbXBsYXRlQXJncy5sZW5ndGg7IGkrKywgcGFyYW1QcmVmaXggPSAnJicpIHtcbiAgICAgICAgbWVzc2FnZSArPSBwYXJhbVByZWZpeCArICdwJyArIGkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodGVtcGxhdGVBcmdzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEVycm9yQ29uc3RydWN0b3IobWVzc2FnZSk7XG4gIH07XG59XG5cbi8qIFdlIG5lZWQgdG8gdGVsbCBFU0xpbnQgd2hhdCB2YXJpYWJsZXMgYXJlIGJlaW5nIGV4cG9ydGVkICovXG4vKiBleHBvcnRlZFxuICBhbmd1bGFyLFxuICBtc2llLFxuICBqcUxpdGUsXG4gIGpRdWVyeSxcbiAgc2xpY2UsXG4gIHNwbGljZSxcbiAgcHVzaCxcbiAgdG9TdHJpbmcsXG4gIG1pbkVyckNvbmZpZyxcbiAgZXJyb3JIYW5kbGluZ0NvbmZpZyxcbiAgaXNWYWxpZE9iamVjdE1heERlcHRoLFxuICBuZ01pbkVycixcbiAgYW5ndWxhck1vZHVsZSxcbiAgdWlkLFxuICBSRUdFWF9TVFJJTkdfUkVHRVhQLFxuICBWQUxJRElUWV9TVEFURV9QUk9QRVJUWSxcblxuICBsb3dlcmNhc2UsXG4gIHVwcGVyY2FzZSxcbiAgbm9kZU5hbWVfLFxuICBpc0FycmF5TGlrZSxcbiAgZm9yRWFjaCxcbiAgZm9yRWFjaFNvcnRlZCxcbiAgcmV2ZXJzZVBhcmFtcyxcbiAgbmV4dFVpZCxcbiAgc2V0SGFzaEtleSxcbiAgZXh0ZW5kLFxuICB0b0ludCxcbiAgaW5oZXJpdCxcbiAgbWVyZ2UsXG4gIG5vb3AsXG4gIGlkZW50aXR5LFxuICB2YWx1ZUZuLFxuICBpc1VuZGVmaW5lZCxcbiAgaXNEZWZpbmVkLFxuICBpc09iamVjdCxcbiAgaXNCbGFua09iamVjdCxcbiAgaXNTdHJpbmcsXG4gIGlzTnVtYmVyLFxuICBpc051bWJlck5hTixcbiAgaXNEYXRlLFxuICBpc0Vycm9yLFxuICBpc0FycmF5LFxuICBpc0Z1bmN0aW9uLFxuICBpc1JlZ0V4cCxcbiAgaXNXaW5kb3csXG4gIGlzU2NvcGUsXG4gIGlzRmlsZSxcbiAgaXNGb3JtRGF0YSxcbiAgaXNCbG9iLFxuICBpc0Jvb2xlYW4sXG4gIGlzUHJvbWlzZUxpa2UsXG4gIHRyaW0sXG4gIGVzY2FwZUZvclJlZ2V4cCxcbiAgaXNFbGVtZW50LFxuICBtYWtlTWFwLFxuICBpbmNsdWRlcyxcbiAgYXJyYXlSZW1vdmUsXG4gIGNvcHksXG4gIHNpbXBsZUNvbXBhcmUsXG4gIGVxdWFscyxcbiAgY3NwLFxuICBqcSxcbiAgY29uY2F0LFxuICBzbGljZUFyZ3MsXG4gIGJpbmQsXG4gIHRvSnNvblJlcGxhY2VyLFxuICB0b0pzb24sXG4gIGZyb21Kc29uLFxuICBjb252ZXJ0VGltZXpvbmVUb0xvY2FsLFxuICB0aW1lem9uZVRvT2Zmc2V0LFxuICBhZGREYXRlTWludXRlcyxcbiAgc3RhcnRpbmdUYWcsXG4gIHRyeURlY29kZVVSSUNvbXBvbmVudCxcbiAgcGFyc2VLZXlWYWx1ZSxcbiAgdG9LZXlWYWx1ZSxcbiAgZW5jb2RlVXJpU2VnbWVudCxcbiAgZW5jb2RlVXJpUXVlcnksXG4gIGFuZ3VsYXJJbml0LFxuICBib290c3RyYXAsXG4gIGdldFRlc3RhYmlsaXR5LFxuICBzbmFrZV9jYXNlLFxuICBiaW5kSlF1ZXJ5LFxuICBhc3NlcnRBcmcsXG4gIGFzc2VydEFyZ0ZuLFxuICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSxcbiAgZ2V0dGVyLFxuICBnZXRCbG9ja05vZGVzLFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgY3JlYXRlTWFwLFxuICBzdHJpbmdpZnksXG5cbiAgTk9ERV9UWVBFX0VMRU1FTlQsXG4gIE5PREVfVFlQRV9BVFRSSUJVVEUsXG4gIE5PREVfVFlQRV9URVhULFxuICBOT0RFX1RZUEVfQ09NTUVOVCxcbiAgTk9ERV9UWVBFX0RPQ1VNRU5ULFxuICBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlRcbiovXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG5nXG4gKiBAbW9kdWxlIG5nXG4gKiBAaW5zdGFsbGF0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgbmcgbW9kdWxlIGlzIGxvYWRlZCBieSBkZWZhdWx0IHdoZW4gYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uIGlzIHN0YXJ0ZWQuIFRoZSBtb2R1bGUgaXRzZWxmXG4gKiBjb250YWlucyB0aGUgZXNzZW50aWFsIGNvbXBvbmVudHMgZm9yIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiB0byBmdW5jdGlvbi4gVGhlIHRhYmxlIGJlbG93XG4gKiBsaXN0cyBhIGhpZ2ggbGV2ZWwgYnJlYWtkb3duIG9mIGVhY2ggb2YgdGhlIHNlcnZpY2VzL2ZhY3RvcmllcywgZmlsdGVycywgZGlyZWN0aXZlcyBhbmQgdGVzdGluZ1xuICogY29tcG9uZW50cyBhdmFpbGFibGUgd2l0aGluIHRoaXMgY29yZSBtb2R1bGUuXG4gKlxuICovXG5cbnZhciBSRUdFWF9TVFJJTkdfUkVHRVhQID0gL15cXC8oLispXFwvKFthLXpdKikkLztcblxuLy8gVGhlIG5hbWUgb2YgYSBmb3JtIGNvbnRyb2wncyBWYWxpZGl0eVN0YXRlIHByb3BlcnR5LlxuLy8gVGhpcyBpcyB1c2VkIHNvIHRoYXQgaXQncyBwb3NzaWJsZSBmb3IgaW50ZXJuYWwgdGVzdHMgdG8gY3JlYXRlIG1vY2sgVmFsaWRpdHlTdGF0ZXMuXG52YXIgVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkgPSAndmFsaWRpdHknO1xuXG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb24gQ29udmVydHMgdGhlIHNwZWNpZmllZCBzdHJpbmcgdG8gbG93ZXJjYXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBTdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGxvd2VyY2FzZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IExvd2VyY2FzZWQgc3RyaW5nLlxuICovXG52YXIgbG93ZXJjYXNlID0gZnVuY3Rpb24oc3RyaW5nKSB7cmV0dXJuIGlzU3RyaW5nKHN0cmluZykgPyBzdHJpbmcudG9Mb3dlckNhc2UoKSA6IHN0cmluZzt9O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uIENvbnZlcnRzIHRoZSBzcGVjaWZpZWQgc3RyaW5nIHRvIHVwcGVyY2FzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byB1cHBlcmNhc2UuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBVcHBlcmNhc2VkIHN0cmluZy5cbiAqL1xudmFyIHVwcGVyY2FzZSA9IGZ1bmN0aW9uKHN0cmluZykge3JldHVybiBpc1N0cmluZyhzdHJpbmcpID8gc3RyaW5nLnRvVXBwZXJDYXNlKCkgOiBzdHJpbmc7fTtcblxuXG52YXJcbiAgICBtc2llLCAgICAgICAgICAgICAvLyBob2xkcyBtYWpvciB2ZXJzaW9uIG51bWJlciBmb3IgSUUsIG9yIE5hTiBpZiBVQSBpcyBub3QgSUUuXG4gICAganFMaXRlLCAgICAgICAgICAgLy8gZGVsYXkgYmluZGluZyBzaW5jZSBqUXVlcnkgY291bGQgYmUgbG9hZGVkIGFmdGVyIHVzLlxuICAgIGpRdWVyeSwgICAgICAgICAgIC8vIGRlbGF5IGJpbmRpbmdcbiAgICBzbGljZSAgICAgICAgICAgICA9IFtdLnNsaWNlLFxuICAgIHNwbGljZSAgICAgICAgICAgID0gW10uc3BsaWNlLFxuICAgIHB1c2ggICAgICAgICAgICAgID0gW10ucHVzaCxcbiAgICB0b1N0cmluZyAgICAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsXG4gICAgZ2V0UHJvdG90eXBlT2YgICAgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgbmdNaW5FcnIgICAgICAgICAgPSBtaW5FcnIoJ25nJyksXG5cbiAgICAvKiogQG5hbWUgYW5ndWxhciAqL1xuICAgIGFuZ3VsYXIgICAgICAgICAgID0gd2luZG93LmFuZ3VsYXIgfHwgKHdpbmRvdy5hbmd1bGFyID0ge30pLFxuICAgIGFuZ3VsYXJNb2R1bGUsXG4gICAgdWlkICAgICAgICAgICAgICAgPSAwO1xuXG4vLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbi8qKlxuICogZG9jdW1lbnRNb2RlIGlzIGFuIElFLW9ubHkgcHJvcGVydHlcbiAqIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9jYzE5Njk4OCh2PXZzLjg1KS5hc3B4XG4gKi9cbm1zaWUgPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xuXG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgYG9iamAgaXMgYW4gYXJyYXkgb3IgYXJyYXktbGlrZSBvYmplY3QgKE5vZGVMaXN0LCBBcmd1bWVudHMsXG4gKiAgICAgICAgICAgICAgICAgICBTdHJpbmcgLi4uKVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZShvYmopIHtcblxuICAvLyBgbnVsbGAsIGB1bmRlZmluZWRgIGFuZCBgd2luZG93YCBhcmUgbm90IGFycmF5LWxpa2VcbiAgaWYgKG9iaiA9PSBudWxsIHx8IGlzV2luZG93KG9iaikpIHJldHVybiBmYWxzZTtcblxuICAvLyBhcnJheXMsIHN0cmluZ3MgYW5kIGpRdWVyeS9qcUxpdGUgb2JqZWN0cyBhcmUgYXJyYXkgbGlrZVxuICAvLyAqIGpxTGl0ZSBpcyBlaXRoZXIgdGhlIGpRdWVyeSBvciBqcUxpdGUgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgLy8gKiB3ZSBoYXZlIHRvIGNoZWNrIHRoZSBleGlzdGVuY2Ugb2YganFMaXRlIGZpcnN0IGFzIHRoaXMgbWV0aG9kIGlzIGNhbGxlZFxuICAvLyAgIHZpYSB0aGUgZm9yRWFjaCBtZXRob2Qgd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIGpxTGl0ZSBvYmplY3QgaW4gdGhlIGZpcnN0IHBsYWNlXG4gIGlmIChpc0FycmF5KG9iaikgfHwgaXNTdHJpbmcob2JqKSB8fCAoanFMaXRlICYmIG9iaiBpbnN0YW5jZW9mIGpxTGl0ZSkpIHJldHVybiB0cnVlO1xuXG4gIC8vIFN1cHBvcnQ6IGlPUyA4LjIgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKVxuICAvLyBcImxlbmd0aFwiIGluIG9iaiB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0xMTUwOClcbiAgdmFyIGxlbmd0aCA9ICdsZW5ndGgnIGluIE9iamVjdChvYmopICYmIG9iai5sZW5ndGg7XG5cbiAgLy8gTm9kZUxpc3Qgb2JqZWN0cyAod2l0aCBgaXRlbWAgbWV0aG9kKSBhbmRcbiAgLy8gb3RoZXIgb2JqZWN0cyB3aXRoIHN1aXRhYmxlIGxlbmd0aCBjaGFyYWN0ZXJpc3RpY3MgYXJlIGFycmF5LWxpa2VcbiAgcmV0dXJuIGlzTnVtYmVyKGxlbmd0aCkgJiYgKGxlbmd0aCA+PSAwICYmIChsZW5ndGggLSAxKSBpbiBvYmogfHwgdHlwZW9mIG9iai5pdGVtID09PSAnZnVuY3Rpb24nKTtcblxufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5mb3JFYWNoXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSW52b2tlcyB0aGUgYGl0ZXJhdG9yYCBmdW5jdGlvbiBvbmNlIGZvciBlYWNoIGl0ZW0gaW4gYG9iamAgY29sbGVjdGlvbiwgd2hpY2ggY2FuIGJlIGVpdGhlciBhblxuICogb2JqZWN0IG9yIGFuIGFycmF5LiBUaGUgYGl0ZXJhdG9yYCBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGggYGl0ZXJhdG9yKHZhbHVlLCBrZXksIG9iailgLCB3aGVyZSBgdmFsdWVgXG4gKiBpcyB0aGUgdmFsdWUgb2YgYW4gb2JqZWN0IHByb3BlcnR5IG9yIGFuIGFycmF5IGVsZW1lbnQsIGBrZXlgIGlzIHRoZSBvYmplY3QgcHJvcGVydHkga2V5IG9yXG4gKiBhcnJheSBlbGVtZW50IGluZGV4IGFuZCBvYmogaXMgdGhlIGBvYmpgIGl0c2VsZi4gU3BlY2lmeWluZyBhIGBjb250ZXh0YCBmb3IgdGhlIGZ1bmN0aW9uIGlzIG9wdGlvbmFsLlxuICpcbiAqIEl0IGlzIHdvcnRoIG5vdGluZyB0aGF0IGAuZm9yRWFjaGAgZG9lcyBub3QgaXRlcmF0ZSBvdmVyIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlY2F1c2UgaXQgZmlsdGVyc1xuICogdXNpbmcgdGhlIGBoYXNPd25Qcm9wZXJ0eWAgbWV0aG9kLlxuICpcbiAqIFVubGlrZSBFUzI2MidzXG4gKiBbQXJyYXkucHJvdG90eXBlLmZvckVhY2hdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS40LjQuMTgpLFxuICogcHJvdmlkaW5nICd1bmRlZmluZWQnIG9yICdudWxsJyB2YWx1ZXMgZm9yIGBvYmpgIHdpbGwgbm90IHRocm93IGEgVHlwZUVycm9yLCBidXQgcmF0aGVyIGp1c3RcbiAqIHJldHVybiB0aGUgdmFsdWUgcHJvdmlkZWQuXG4gKlxuICAgYGBganNcbiAgICAgdmFyIHZhbHVlcyA9IHtuYW1lOiAnbWlza28nLCBnZW5kZXI6ICdtYWxlJ307XG4gICAgIHZhciBsb2cgPSBbXTtcbiAgICAgYW5ndWxhci5mb3JFYWNoKHZhbHVlcywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgIHRoaXMucHVzaChrZXkgKyAnOiAnICsgdmFsdWUpO1xuICAgICB9LCBsb2cpO1xuICAgICBleHBlY3QobG9nKS50b0VxdWFsKFsnbmFtZTogbWlza28nLCAnZ2VuZGVyOiBtYWxlJ10pO1xuICAgYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBPYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3IgSXRlcmF0b3IgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdD19IGNvbnRleHQgT2JqZWN0IHRvIGJlY29tZSBjb250ZXh0IChgdGhpc2ApIGZvciB0aGUgaXRlcmF0b3IgZnVuY3Rpb24uXG4gKiBAcmV0dXJucyB7T2JqZWN0fEFycmF5fSBSZWZlcmVuY2UgdG8gYG9iamAuXG4gKi9cblxuZnVuY3Rpb24gZm9yRWFjaChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gIHZhciBrZXksIGxlbmd0aDtcbiAgaWYgKG9iaikge1xuICAgIGlmIChpc0Z1bmN0aW9uKG9iaikpIHtcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAoa2V5ICE9PSAncHJvdG90eXBlJyAmJiBrZXkgIT09ICdsZW5ndGgnICYmIGtleSAhPT0gJ25hbWUnICYmIG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9iaikgfHwgaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAgdmFyIGlzUHJpbWl0aXZlID0gdHlwZW9mIG9iaiAhPT0gJ29iamVjdCc7XG4gICAgICBmb3IgKGtleSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlIHx8IGtleSBpbiBvYmopIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9iai5mb3JFYWNoICYmIG9iai5mb3JFYWNoICE9PSBmb3JFYWNoKSB7XG4gICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0LCBvYmopO1xuICAgIH0gZWxzZSBpZiAoaXNCbGFua09iamVjdChvYmopKSB7XG4gICAgICAvLyBjcmVhdGVNYXAoKSBmYXN0IHBhdGggLS0tIFNhZmUgdG8gYXZvaWQgaGFzT3duUHJvcGVydHkgY2hlY2sgYmVjYXVzZSBwcm90b3R5cGUgY2hhaW4gaXMgZW1wdHlcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqLmhhc093blByb3BlcnR5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBTbG93IHBhdGggZm9yIG9iamVjdHMgaW5oZXJpdGluZyBPYmplY3QucHJvdG90eXBlLCBoYXNPd25Qcm9wZXJ0eSBjaGVjayBuZWVkZWRcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2xvdyBwYXRoIGZvciBvYmplY3RzIHdoaWNoIGRvIG5vdCBoYXZlIGEgbWV0aG9kIGBoYXNPd25Qcm9wZXJ0eWBcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaFNvcnRlZChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKS5zb3J0KCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleXNbaV1dLCBrZXlzW2ldKTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn1cblxuXG4vKipcbiAqIHdoZW4gdXNpbmcgZm9yRWFjaCB0aGUgcGFyYW1zIGFyZSB2YWx1ZSwga2V5LCBidXQgaXQgaXMgb2Z0ZW4gdXNlZnVsIHRvIGhhdmUga2V5LCB2YWx1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCAqKX0gaXRlcmF0b3JGblxuICogQHJldHVybnMge2Z1bmN0aW9uKCosIHN0cmluZyl9XG4gKi9cbmZ1bmN0aW9uIHJldmVyc2VQYXJhbXMoaXRlcmF0b3JGbikge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGtleSkge2l0ZXJhdG9yRm4oa2V5LCB2YWx1ZSk7fTtcbn1cblxuLyoqXG4gKiBBIGNvbnNpc3RlbnQgd2F5IG9mIGNyZWF0aW5nIHVuaXF1ZSBJRHMgaW4gYW5ndWxhci5cbiAqXG4gKiBVc2luZyBzaW1wbGUgbnVtYmVycyBhbGxvd3MgdXMgdG8gZ2VuZXJhdGUgMjguNiBtaWxsaW9uIHVuaXF1ZSBpZHMgcGVyIHNlY29uZCBmb3IgMTAgeWVhcnMgYmVmb3JlXG4gKiB3ZSBoaXQgbnVtYmVyIHByZWNpc2lvbiBpc3N1ZXMgaW4gSmF2YVNjcmlwdC5cbiAqXG4gKiBNYXRoLnBvdygyLDUzKSAvIDYwIC8gNjAgLyAyNCAvIDM2NSAvIDEwID0gMjguNk1cbiAqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbiB1bmlxdWUgYWxwaGEtbnVtZXJpYyBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gbmV4dFVpZCgpIHtcbiAgcmV0dXJuICsrdWlkO1xufVxuXG5cbi8qKlxuICogU2V0IG9yIGNsZWFyIHRoZSBoYXNoa2V5IGZvciBhbiBvYmplY3QuXG4gKiBAcGFyYW0gb2JqIG9iamVjdFxuICogQHBhcmFtIGggdGhlIGhhc2hrZXkgKCF0cnV0aHkgdG8gZGVsZXRlIHRoZSBoYXNoa2V5KVxuICovXG5mdW5jdGlvbiBzZXRIYXNoS2V5KG9iaiwgaCkge1xuICBpZiAoaCkge1xuICAgIG9iai4kJGhhc2hLZXkgPSBoO1xuICB9IGVsc2Uge1xuICAgIGRlbGV0ZSBvYmouJCRoYXNoS2V5O1xuICB9XG59XG5cblxuZnVuY3Rpb24gYmFzZUV4dGVuZChkc3QsIG9ianMsIGRlZXApIHtcbiAgdmFyIGggPSBkc3QuJCRoYXNoS2V5O1xuXG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IG9ianMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBvYmogPSBvYmpzW2ldO1xuICAgIGlmICghaXNPYmplY3Qob2JqKSAmJiAhaXNGdW5jdGlvbihvYmopKSBjb250aW51ZTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0ga2V5cy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tqXTtcbiAgICAgIHZhciBzcmMgPSBvYmpba2V5XTtcblxuICAgICAgaWYgKGRlZXAgJiYgaXNPYmplY3Qoc3JjKSkge1xuICAgICAgICBpZiAoaXNEYXRlKHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IG5ldyBEYXRlKHNyYy52YWx1ZU9mKCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUmVnRXhwKHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IG5ldyBSZWdFeHAoc3JjKTtcbiAgICAgICAgfSBlbHNlIGlmIChzcmMubm9kZU5hbWUpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IHNyYy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IHNyYy5jbG9uZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghaXNPYmplY3QoZHN0W2tleV0pKSBkc3Rba2V5XSA9IGlzQXJyYXkoc3JjKSA/IFtdIDoge307XG4gICAgICAgICAgYmFzZUV4dGVuZChkc3Rba2V5XSwgW3NyY10sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkc3Rba2V5XSA9IHNyYztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRIYXNoS2V5KGRzdCwgaCk7XG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmV4dGVuZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEV4dGVuZHMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBgZHN0YCBieSBjb3B5aW5nIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZnJvbSB0aGUgYHNyY2Agb2JqZWN0KHMpXG4gKiB0byBgZHN0YC4gWW91IGNhbiBzcGVjaWZ5IG11bHRpcGxlIGBzcmNgIG9iamVjdHMuIElmIHlvdSB3YW50IHRvIHByZXNlcnZlIG9yaWdpbmFsIG9iamVjdHMsIHlvdSBjYW4gZG8gc29cbiAqIGJ5IHBhc3NpbmcgYW4gZW1wdHkgb2JqZWN0IGFzIHRoZSB0YXJnZXQ6IGB2YXIgb2JqZWN0ID0gYW5ndWxhci5leHRlbmQoe30sIG9iamVjdDEsIG9iamVjdDIpYC5cbiAqXG4gKiAqKk5vdGU6KiogS2VlcCBpbiBtaW5kIHRoYXQgYGFuZ3VsYXIuZXh0ZW5kYCBkb2VzIG5vdCBzdXBwb3J0IHJlY3Vyc2l2ZSBtZXJnZSAoZGVlcCBjb3B5KS4gVXNlXG4gKiB7QGxpbmsgYW5ndWxhci5tZXJnZX0gZm9yIHRoaXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRzdCBEZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gc3JjIFNvdXJjZSBvYmplY3QocykuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZWZlcmVuY2UgdG8gYGRzdGAuXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChkc3QpIHtcbiAgcmV0dXJuIGJhc2VFeHRlbmQoZHN0LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGZhbHNlKTtcbn1cblxuXG4vKipcbiogQG5nZG9jIGZ1bmN0aW9uXG4qIEBuYW1lIGFuZ3VsYXIubWVyZ2VcbiogQG1vZHVsZSBuZ1xuKiBAa2luZCBmdW5jdGlvblxuKlxuKiBAZGVzY3JpcHRpb25cbiogRGVlcGx5IGV4dGVuZHMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBgZHN0YCBieSBjb3B5aW5nIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZnJvbSB0aGUgYHNyY2Agb2JqZWN0KHMpXG4qIHRvIGBkc3RgLiBZb3UgY2FuIHNwZWNpZnkgbXVsdGlwbGUgYHNyY2Agb2JqZWN0cy4gSWYgeW91IHdhbnQgdG8gcHJlc2VydmUgb3JpZ2luYWwgb2JqZWN0cywgeW91IGNhbiBkbyBzb1xuKiBieSBwYXNzaW5nIGFuIGVtcHR5IG9iamVjdCBhcyB0aGUgdGFyZ2V0OiBgdmFyIG9iamVjdCA9IGFuZ3VsYXIubWVyZ2Uoe30sIG9iamVjdDEsIG9iamVjdDIpYC5cbipcbiogVW5saWtlIHtAbGluayBhbmd1bGFyLmV4dGVuZCBleHRlbmQoKX0sIGBtZXJnZSgpYCByZWN1cnNpdmVseSBkZXNjZW5kcyBpbnRvIG9iamVjdCBwcm9wZXJ0aWVzIG9mIHNvdXJjZVxuKiBvYmplY3RzLCBwZXJmb3JtaW5nIGEgZGVlcCBjb3B5LlxuKlxuKiBAZGVwcmVjYXRlZFxuKiBzaW5jZVZlcnNpb249XCIxLjYuNVwiXG4qIFRoaXMgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCwgYnV0IHdpbGwgbm90IGJlIHJlbW92ZWQgaW4gdGhlIDEueCBsaWZlY3ljbGUuXG4qIFRoZXJlIGFyZSBlZGdlIGNhc2VzIChzZWUge0BsaW5rIGFuZ3VsYXIubWVyZ2Uja25vd24taXNzdWVzIGtub3duIGlzc3Vlc30pIHRoYXQgYXJlIG5vdFxuKiBzdXBwb3J0ZWQgYnkgdGhpcyBmdW5jdGlvbi4gV2Ugc3VnZ2VzdFxuKiB1c2luZyBbbG9kYXNoJ3MgbWVyZ2UoKV0oaHR0cHM6Ly9sb2Rhc2guY29tL2RvY3MvNC4xNy40I21lcmdlKSBpbnN0ZWFkLlxuKlxuKiBAa25vd25Jc3N1ZVxuKiBUaGlzIGlzIGEgbGlzdCBvZiAoa25vd24pIG9iamVjdCB0eXBlcyB0aGF0IGFyZSBub3QgaGFuZGxlZCBjb3JyZWN0bHkgYnkgdGhpcyBmdW5jdGlvbjpcbiogLSBbYEJsb2JgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYilcbiogLSBbYE1lZGlhU3RyZWFtYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL01lZGlhU3RyZWFtKVxuKiAtIFtgQ2FudmFzR3JhZGllbnRgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQ2FudmFzR3JhZGllbnQpXG4qIC0gQW5ndWxhckpTIHtAbGluayAkcm9vdFNjb3BlLlNjb3BlIHNjb3Blc307XG4qXG4qIEBwYXJhbSB7T2JqZWN0fSBkc3QgRGVzdGluYXRpb24gb2JqZWN0LlxuKiBAcGFyYW0gey4uLk9iamVjdH0gc3JjIFNvdXJjZSBvYmplY3QocykuXG4qIEByZXR1cm5zIHtPYmplY3R9IFJlZmVyZW5jZSB0byBgZHN0YC5cbiovXG5mdW5jdGlvbiBtZXJnZShkc3QpIHtcbiAgcmV0dXJuIGJhc2VFeHRlbmQoZHN0LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIHRydWUpO1xufVxuXG5cblxuZnVuY3Rpb24gdG9JbnQoc3RyKSB7XG4gIHJldHVybiBwYXJzZUludChzdHIsIDEwKTtcbn1cblxudmFyIGlzTnVtYmVyTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIGlzTnVtYmVyTmFOKG51bSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gIHJldHVybiBudW0gIT09IG51bTtcbn07XG5cblxuZnVuY3Rpb24gaW5oZXJpdChwYXJlbnQsIGV4dHJhKSB7XG4gIHJldHVybiBleHRlbmQoT2JqZWN0LmNyZWF0ZShwYXJlbnQpLCBleHRyYSk7XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLm5vb3BcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgbm8gb3BlcmF0aW9ucy4gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZnVsIHdoZW4gd3JpdGluZyBjb2RlIGluIHRoZVxuICogZnVuY3Rpb25hbCBzdHlsZS5cbiAgIGBgYGpzXG4gICAgIGZ1bmN0aW9uIGZvbyhjYWxsYmFjaykge1xuICAgICAgIHZhciByZXN1bHQgPSBjYWxjdWxhdGVSZXN1bHQoKTtcbiAgICAgICAoY2FsbGJhY2sgfHwgYW5ndWxhci5ub29wKShyZXN1bHQpO1xuICAgICB9XG4gICBgYGBcbiAqL1xuZnVuY3Rpb24gbm9vcCgpIHt9XG5ub29wLiRpbmplY3QgPSBbXTtcblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pZGVudGl0eVxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGl0cyBmaXJzdCBhcmd1bWVudC4gVGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgd2hlbiB3cml0aW5nIGNvZGUgaW4gdGhlXG4gKiBmdW5jdGlvbmFsIHN0eWxlLlxuICpcbiAgIGBgYGpzXG4gICBmdW5jdGlvbiB0cmFuc2Zvcm1lcih0cmFuc2Zvcm1hdGlvbkZuLCB2YWx1ZSkge1xuICAgICByZXR1cm4gKHRyYW5zZm9ybWF0aW9uRm4gfHwgYW5ndWxhci5pZGVudGl0eSkodmFsdWUpO1xuICAgfTtcblxuICAgLy8gRS5nLlxuICAgZnVuY3Rpb24gZ2V0UmVzdWx0KGZuLCBpbnB1dCkge1xuICAgICByZXR1cm4gKGZuIHx8IGFuZ3VsYXIuaWRlbnRpdHkpKGlucHV0KTtcbiAgIH07XG5cbiAgIGdldFJlc3VsdChmdW5jdGlvbihuKSB7IHJldHVybiBuICogMjsgfSwgMjEpOyAgIC8vIHJldHVybnMgNDJcbiAgIGdldFJlc3VsdChudWxsLCAyMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybnMgMjFcbiAgIGdldFJlc3VsdCh1bmRlZmluZWQsIDIxKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybnMgMjFcbiAgIGBgYFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgdG8gYmUgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHBhc3NlZCBpbi5cbiAqL1xuZnVuY3Rpb24gaWRlbnRpdHkoJCkge3JldHVybiAkO31cbmlkZW50aXR5LiRpbmplY3QgPSBbXTtcblxuXG5mdW5jdGlvbiB2YWx1ZUZuKHZhbHVlKSB7cmV0dXJuIGZ1bmN0aW9uIHZhbHVlUmVmKCkge3JldHVybiB2YWx1ZTt9O31cblxuZnVuY3Rpb24gaGFzQ3VzdG9tVG9TdHJpbmcob2JqKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKG9iai50b1N0cmluZykgJiYgb2JqLnRvU3RyaW5nICE9PSB0b1N0cmluZztcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc1VuZGVmaW5lZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgdW5kZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyB1bmRlZmluZWQuXG4gKi9cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzRGVmaW5lZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgZGVmaW5lZC5cbiAqL1xuZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzT2JqZWN0XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgT2JqZWN0YC4gVW5saWtlIGB0eXBlb2ZgIGluIEphdmFTY3JpcHQsIGBudWxsYHMgYXJlIG5vdFxuICogY29uc2lkZXJlZCB0byBiZSBvYmplY3RzLiBOb3RlIHRoYXQgSmF2YVNjcmlwdCBhcnJheXMgYXJlIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBPYmplY3RgIGJ1dCBub3QgYG51bGxgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBodHRwOi8vanNwZXJmLmNvbS9pc29iamVjdDRcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhIG51bGwgcHJvdG90eXBlXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgT2JqZWN0YCB3aXRoIGEgbnVsbCBwcm90b3R5cGVcbiAqL1xuZnVuY3Rpb24gaXNCbGFua09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzU3RyaW5nXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIGBTdHJpbmdgLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBTdHJpbmdgLlxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO31cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc051bWJlclxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgTnVtYmVyYC5cbiAqXG4gKiBUaGlzIGluY2x1ZGVzIHRoZSBcInNwZWNpYWxcIiBudW1iZXJzIGBOYU5gLCBgK0luZmluaXR5YCBhbmQgYC1JbmZpbml0eWAuXG4gKlxuICogSWYgeW91IHdpc2ggdG8gZXhjbHVkZSB0aGVzZSB0aGVuIHlvdSBjYW4gdXNlIHRoZSBuYXRpdmVcbiAqIFtgaXNGaW5pdGUnXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9pc0Zpbml0ZSlcbiAqIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgTnVtYmVyYC5cbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJzt9XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNEYXRlXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHZhbHVlIGlzIGEgZGF0ZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgRGF0ZWAuXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc0FycmF5XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgQXJyYXlgLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgQXJyYXlgLlxuICovXG5mdW5jdGlvbiBpc0FycmF5KGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpIHx8IGFyciBpbnN0YW5jZW9mIEFycmF5O1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgRXJyb3JgLlxuICogTG9vc2VseSBiYXNlZCBvbiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9pc2Vycm9yXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBFcnJvcmAuXG4gKi9cbmZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpIHtcbiAgdmFyIHRhZyA9IHRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzogcmV0dXJuIHRydWU7XG4gICAgY2FzZSAnW29iamVjdCBFeGNlcHRpb25dJzogcmV0dXJuIHRydWU7XG4gICAgY2FzZSAnW29iamVjdCBET01FeGNlcHRpb25dJzogcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDogcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNGdW5jdGlvblxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgRnVuY3Rpb25gLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBGdW5jdGlvbmAuXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO31cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSB2YWx1ZSBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBSZWdFeHBgLlxuICovXG5mdW5jdGlvbiBpc1JlZ0V4cCh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIGBvYmpgIGlzIGEgd2luZG93IG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBvYmogT2JqZWN0IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqYCBpcyBhIHdpbmRvdyBvYmouXG4gKi9cbmZ1bmN0aW9uIGlzV2luZG93KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai53aW5kb3cgPT09IG9iajtcbn1cblxuXG5mdW5jdGlvbiBpc1Njb3BlKG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai4kZXZhbEFzeW5jICYmIG9iai4kd2F0Y2g7XG59XG5cblxuZnVuY3Rpb24gaXNGaWxlKG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBGaWxlXSc7XG59XG5cblxuZnVuY3Rpb24gaXNGb3JtRGF0YShvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgRm9ybURhdGFdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Jsb2Iob2JqKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nO1xufVxuXG5cbmZ1bmN0aW9uIGlzUHJvbWlzZUxpa2Uob2JqKSB7XG4gIHJldHVybiBvYmogJiYgaXNGdW5jdGlvbihvYmoudGhlbik7XG59XG5cblxudmFyIFRZUEVEX0FSUkFZX1JFR0VYUCA9IC9eXFxbb2JqZWN0ICg/OlVpbnQ4fFVpbnQ4Q2xhbXBlZHxVaW50MTZ8VWludDMyfEludDh8SW50MTZ8SW50MzJ8RmxvYXQzMnxGbG9hdDY0KUFycmF5XSQvO1xuZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiBpc051bWJlcih2YWx1ZS5sZW5ndGgpICYmIFRZUEVEX0FSUkFZX1JFR0VYUC50ZXN0KHRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbn1cblxuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcihvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuXG52YXIgdHJpbSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZS50cmltKCkgOiB2YWx1ZTtcbn07XG5cbi8vIENvcGllZCBmcm9tOlxuLy8gaHR0cDovL2RvY3MuY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL2dpdC9sb2NhbF9jbG9zdXJlX2dvb2dfc3RyaW5nX3N0cmluZy5qcy5zb3VyY2UuaHRtbCNsaW5lMTAyMVxuLy8gUHJlcmVxOiBzIGlzIGEgc3RyaW5nLlxudmFyIGVzY2FwZUZvclJlZ2V4cCA9IGZ1bmN0aW9uKHMpIHtcbiAgcmV0dXJuIHNcbiAgICAucmVwbGFjZSgvKFstKClbXFxde30rPyouJF58LDojPCFcXFxcXSkvZywgJ1xcXFwkMScpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAucmVwbGFjZSgvXFx4MDgvZywgJ1xcXFx4MDgnKTtcbn07XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNFbGVtZW50XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIERPTSBlbGVtZW50IChvciB3cmFwcGVkIGpRdWVyeSBlbGVtZW50KS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudCAob3Igd3JhcHBlZCBqUXVlcnkgZWxlbWVudCkuXG4gKi9cbmZ1bmN0aW9uIGlzRWxlbWVudChub2RlKSB7XG4gIHJldHVybiAhIShub2RlICYmXG4gICAgKG5vZGUubm9kZU5hbWUgIC8vIFdlIGFyZSBhIGRpcmVjdCBlbGVtZW50LlxuICAgIHx8IChub2RlLnByb3AgJiYgbm9kZS5hdHRyICYmIG5vZGUuZmluZCkpKTsgIC8vIFdlIGhhdmUgYW4gb24gYW5kIGZpbmQgbWV0aG9kIHBhcnQgb2YgalF1ZXJ5IEFQSS5cbn1cblxuLyoqXG4gKiBAcGFyYW0gc3RyICdrZXkxLGtleTIsLi4uJ1xuICogQHJldHVybnMge29iamVjdH0gaW4gdGhlIGZvcm0gb2Yge2tleTE6dHJ1ZSwga2V5Mjp0cnVlLCAuLi59XG4gKi9cbmZ1bmN0aW9uIG1ha2VNYXAoc3RyKSB7XG4gIHZhciBvYmogPSB7fSwgaXRlbXMgPSBzdHIuc3BsaXQoJywnKSwgaTtcbiAgZm9yIChpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgb2JqW2l0ZW1zW2ldXSA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuXG5mdW5jdGlvbiBub2RlTmFtZV8oZWxlbWVudCkge1xuICByZXR1cm4gbG93ZXJjYXNlKGVsZW1lbnQubm9kZU5hbWUgfHwgKGVsZW1lbnRbMF0gJiYgZWxlbWVudFswXS5ub2RlTmFtZSkpO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlcyhhcnJheSwgb2JqKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFycmF5LCBvYmopICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gYXJyYXlSZW1vdmUoYXJyYXksIHZhbHVlKSB7XG4gIHZhciBpbmRleCA9IGFycmF5LmluZGV4T2YodmFsdWUpO1xuICBpZiAoaW5kZXggPj0gMCkge1xuICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgcmV0dXJuIGluZGV4O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5jb3B5XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYCwgd2hpY2ggc2hvdWxkIGJlIGFuIG9iamVjdCBvciBhbiBhcnJheS5cbiAqXG4gKiAqIElmIG5vIGRlc3RpbmF0aW9uIGlzIHN1cHBsaWVkLCBhIGNvcHkgb2YgdGhlIG9iamVjdCBvciBhcnJheSBpcyBjcmVhdGVkLlxuICogKiBJZiBhIGRlc3RpbmF0aW9uIGlzIHByb3ZpZGVkLCBhbGwgb2YgaXRzIGVsZW1lbnRzIChmb3IgYXJyYXlzKSBvciBwcm9wZXJ0aWVzIChmb3Igb2JqZWN0cylcbiAqICAgYXJlIGRlbGV0ZWQgYW5kIHRoZW4gYWxsIGVsZW1lbnRzL3Byb3BlcnRpZXMgZnJvbSB0aGUgc291cmNlIGFyZSBjb3BpZWQgdG8gaXQuXG4gKiAqIElmIGBzb3VyY2VgIGlzIG5vdCBhbiBvYmplY3Qgb3IgYXJyYXkgKGluYy4gYG51bGxgIGFuZCBgdW5kZWZpbmVkYCksIGBzb3VyY2VgIGlzIHJldHVybmVkLlxuICogKiBJZiBgc291cmNlYCBpcyBpZGVudGljYWwgdG8gYGRlc3RpbmF0aW9uYCBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24uXG4gKlxuICogPGJyIC8+XG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogICBPbmx5IGVudW1lcmFibGUgcHJvcGVydGllcyBhcmUgdGFrZW4gaW50byBhY2NvdW50LiBOb24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIChib3RoIG9uIGBzb3VyY2VgXG4gKiAgIGFuZCBvbiBgZGVzdGluYXRpb25gKSB3aWxsIGJlIGlnbm9yZWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBUaGUgc291cmNlIHRoYXQgd2lsbCBiZSB1c2VkIHRvIG1ha2UgYSBjb3B5LlxuICogICAgICAgICAgICAgICAgICAgQ2FuIGJlIGFueSB0eXBlLCBpbmNsdWRpbmcgcHJpbWl0aXZlcywgYG51bGxgLCBhbmQgYHVuZGVmaW5lZGAuXG4gKiBAcGFyYW0geyhPYmplY3R8QXJyYXkpPX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gaW50byB3aGljaCB0aGUgc291cmNlIGlzIGNvcGllZC4gSWZcbiAqICAgICBwcm92aWRlZCwgbXVzdCBiZSBvZiB0aGUgc2FtZSB0eXBlIGFzIGBzb3VyY2VgLlxuICogQHJldHVybnMgeyp9IFRoZSBjb3B5IG9yIHVwZGF0ZWQgYGRlc3RpbmF0aW9uYCwgaWYgYGRlc3RpbmF0aW9uYCB3YXMgc3BlY2lmaWVkLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cImNvcHlFeGFtcGxlXCIgbmFtZT1cImFuZ3VsYXItY29weVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8Zm9ybSBub3ZhbGlkYXRlIGNsYXNzPVwic2ltcGxlLWZvcm1cIj5cbiAgICAgICAgICA8bGFiZWw+TmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIiAvPjwvbGFiZWw+PGJyIC8+XG4gICAgICAgICAgPGxhYmVsPkFnZTogIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ1c2VyLmFnZVwiIC8+PC9sYWJlbD48YnIgLz5cbiAgICAgICAgICBHZW5kZXI6IDxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJ1c2VyLmdlbmRlclwiIHZhbHVlPVwibWFsZVwiIC8+bWFsZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwidXNlci5nZW5kZXJcIiB2YWx1ZT1cImZlbWFsZVwiIC8+ZmVtYWxlPC9sYWJlbD48YnIgLz5cbiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicmVzZXQoKVwiPlJFU0VUPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInVwZGF0ZSh1c2VyKVwiPlNBVkU8L2J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICA8cHJlPmZvcm0gPSB7e3VzZXIgfCBqc29ufX08L3ByZT5cbiAgICAgICAgPHByZT5sZWFkZXIgPSB7e2xlYWRlciB8IGpzb259fTwvcHJlPlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIC8vIE1vZHVsZTogY29weUV4YW1wbGVcbiAgICAgIGFuZ3VsYXIuXG4gICAgICAgIG1vZHVsZSgnY29weUV4YW1wbGUnLCBbXSkuXG4gICAgICAgIGNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUubGVhZGVyID0ge307XG5cbiAgICAgICAgICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIEV4YW1wbGUgd2l0aCAxIGFyZ3VtZW50XG4gICAgICAgICAgICAkc2NvcGUudXNlciA9IGFuZ3VsYXIuY29weSgkc2NvcGUubGVhZGVyKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgICAgIC8vIEV4YW1wbGUgd2l0aCAyIGFyZ3VtZW50c1xuICAgICAgICAgICAgYW5ndWxhci5jb3B5KHVzZXIsICRzY29wZS5sZWFkZXIpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAkc2NvcGUucmVzZXQoKTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiBjb3B5KHNvdXJjZSwgZGVzdGluYXRpb24sIG1heERlcHRoKSB7XG4gIHZhciBzdGFja1NvdXJjZSA9IFtdO1xuICB2YXIgc3RhY2tEZXN0ID0gW107XG4gIG1heERlcHRoID0gaXNWYWxpZE9iamVjdE1heERlcHRoKG1heERlcHRoKSA/IG1heERlcHRoIDogTmFOO1xuXG4gIGlmIChkZXN0aW5hdGlvbikge1xuICAgIGlmIChpc1R5cGVkQXJyYXkoZGVzdGluYXRpb24pIHx8IGlzQXJyYXlCdWZmZXIoZGVzdGluYXRpb24pKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3B0YScsICdDYW5cXCd0IGNvcHkhIFR5cGVkQXJyYXkgZGVzdGluYXRpb24gY2Fubm90IGJlIG11dGF0ZWQuJyk7XG4gICAgfVxuICAgIGlmIChzb3VyY2UgPT09IGRlc3RpbmF0aW9uKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3BpJywgJ0NhblxcJ3QgY29weSEgU291cmNlIGFuZCBkZXN0aW5hdGlvbiBhcmUgaWRlbnRpY2FsLicpO1xuICAgIH1cblxuICAgIC8vIEVtcHR5IHRoZSBkZXN0aW5hdGlvbiBvYmplY3RcbiAgICBpZiAoaXNBcnJheShkZXN0aW5hdGlvbikpIHtcbiAgICAgIGRlc3RpbmF0aW9uLmxlbmd0aCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvckVhY2goZGVzdGluYXRpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJyQkaGFzaEtleScpIHtcbiAgICAgICAgICBkZWxldGUgZGVzdGluYXRpb25ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhY2tTb3VyY2UucHVzaChzb3VyY2UpO1xuICAgIHN0YWNrRGVzdC5wdXNoKGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gY29weVJlY3Vyc2Uoc291cmNlLCBkZXN0aW5hdGlvbiwgbWF4RGVwdGgpO1xuICB9XG5cbiAgcmV0dXJuIGNvcHlFbGVtZW50KHNvdXJjZSwgbWF4RGVwdGgpO1xuXG4gIGZ1bmN0aW9uIGNvcHlSZWN1cnNlKHNvdXJjZSwgZGVzdGluYXRpb24sIG1heERlcHRoKSB7XG4gICAgbWF4RGVwdGgtLTtcbiAgICBpZiAobWF4RGVwdGggPCAwKSB7XG4gICAgICByZXR1cm4gJy4uLic7XG4gICAgfVxuICAgIHZhciBoID0gZGVzdGluYXRpb24uJCRoYXNoS2V5O1xuICAgIHZhciBrZXk7XG4gICAgaWYgKGlzQXJyYXkoc291cmNlKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc291cmNlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgZGVzdGluYXRpb24ucHVzaChjb3B5RWxlbWVudChzb3VyY2VbaV0sIG1heERlcHRoKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0JsYW5rT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIC8vIGNyZWF0ZU1hcCgpIGZhc3QgcGF0aCAtLS0gU2FmZSB0byBhdm9pZCBoYXNPd25Qcm9wZXJ0eSBjaGVjayBiZWNhdXNlIHByb3RvdHlwZSBjaGFpbiBpcyBlbXB0eVxuICAgICAgZm9yIChrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGRlc3RpbmF0aW9uW2tleV0gPSBjb3B5RWxlbWVudChzb3VyY2Vba2V5XSwgbWF4RGVwdGgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UuaGFzT3duUHJvcGVydHkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFNsb3cgcGF0aCwgd2hpY2ggbXVzdCByZWx5IG9uIGhhc093blByb3BlcnR5XG4gICAgICBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgZGVzdGluYXRpb25ba2V5XSA9IGNvcHlFbGVtZW50KHNvdXJjZVtrZXldLCBtYXhEZXB0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2xvd2VzdCBwYXRoIC0tLSBoYXNPd25Qcm9wZXJ0eSBjYW4ndCBiZSBjYWxsZWQgYXMgYSBtZXRob2RcbiAgICAgIGZvciAoa2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICBkZXN0aW5hdGlvbltrZXldID0gY29weUVsZW1lbnQoc291cmNlW2tleV0sIG1heERlcHRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzZXRIYXNoS2V5KGRlc3RpbmF0aW9uLCBoKTtcbiAgICByZXR1cm4gZGVzdGluYXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5RWxlbWVudChzb3VyY2UsIG1heERlcHRoKSB7XG4gICAgLy8gU2ltcGxlIHZhbHVlc1xuICAgIGlmICghaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9XG5cbiAgICAvLyBBbHJlYWR5IGNvcGllZCB2YWx1ZXNcbiAgICB2YXIgaW5kZXggPSBzdGFja1NvdXJjZS5pbmRleE9mKHNvdXJjZSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHN0YWNrRGVzdFtpbmRleF07XG4gICAgfVxuXG4gICAgaWYgKGlzV2luZG93KHNvdXJjZSkgfHwgaXNTY29wZShzb3VyY2UpKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3B3cycsXG4gICAgICAgICdDYW5cXCd0IGNvcHkhIE1ha2luZyBjb3BpZXMgb2YgV2luZG93IG9yIFNjb3BlIGluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLicpO1xuICAgIH1cblxuICAgIHZhciBuZWVkc1JlY3Vyc2UgPSBmYWxzZTtcbiAgICB2YXIgZGVzdGluYXRpb24gPSBjb3B5VHlwZShzb3VyY2UpO1xuXG4gICAgaWYgKGRlc3RpbmF0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlc3RpbmF0aW9uID0gaXNBcnJheShzb3VyY2UpID8gW10gOiBPYmplY3QuY3JlYXRlKGdldFByb3RvdHlwZU9mKHNvdXJjZSkpO1xuICAgICAgbmVlZHNSZWN1cnNlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZSk7XG4gICAgc3RhY2tEZXN0LnB1c2goZGVzdGluYXRpb24pO1xuXG4gICAgcmV0dXJuIG5lZWRzUmVjdXJzZVxuICAgICAgPyBjb3B5UmVjdXJzZShzb3VyY2UsIGRlc3RpbmF0aW9uLCBtYXhEZXB0aClcbiAgICAgIDogZGVzdGluYXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5VHlwZShzb3VyY2UpIHtcbiAgICBzd2l0Y2ggKHRvU3RyaW5nLmNhbGwoc291cmNlKSkge1xuICAgICAgY2FzZSAnW29iamVjdCBJbnQ4QXJyYXldJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgSW50MTZBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBJbnQzMkFycmF5XSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBGbG9hdDY0QXJyYXldJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgVWludDhBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50MTZBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50MzJBcnJheV0nOlxuICAgICAgICByZXR1cm4gbmV3IHNvdXJjZS5jb25zdHJ1Y3Rvcihjb3B5RWxlbWVudChzb3VyY2UuYnVmZmVyKSwgc291cmNlLmJ5dGVPZmZzZXQsIHNvdXJjZS5sZW5ndGgpO1xuXG4gICAgICBjYXNlICdbb2JqZWN0IEFycmF5QnVmZmVyXSc6XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFMTBcbiAgICAgICAgaWYgKCFzb3VyY2Uuc2xpY2UpIHtcbiAgICAgICAgICAvLyBJZiB3ZSdyZSBpbiB0aGlzIGNhc2Ugd2Uga25vdyB0aGUgZW52aXJvbm1lbnQgc3VwcG9ydHMgQXJyYXlCdWZmZXJcbiAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuICAgICAgICAgIHZhciBjb3BpZWQgPSBuZXcgQXJyYXlCdWZmZXIoc291cmNlLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgIG5ldyBVaW50OEFycmF5KGNvcGllZCkuc2V0KG5ldyBVaW50OEFycmF5KHNvdXJjZSkpO1xuICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgICByZXR1cm4gY29waWVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc2xpY2UoMCk7XG5cbiAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgICAgcmV0dXJuIG5ldyBzb3VyY2UuY29uc3RydWN0b3Ioc291cmNlLnZhbHVlT2YoKSk7XG5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoc291cmNlLnNvdXJjZSwgc291cmNlLnRvU3RyaW5nKCkubWF0Y2goL1teL10qJC8pWzBdKTtcbiAgICAgICAgcmUubGFzdEluZGV4ID0gc291cmNlLmxhc3RJbmRleDtcbiAgICAgICAgcmV0dXJuIHJlO1xuXG4gICAgICBjYXNlICdbb2JqZWN0IEJsb2JdJzpcbiAgICAgICAgcmV0dXJuIG5ldyBzb3VyY2UuY29uc3RydWN0b3IoW3NvdXJjZV0sIHt0eXBlOiBzb3VyY2UudHlwZX0pO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHNvdXJjZS5jbG9uZU5vZGUpKSB7XG4gICAgICByZXR1cm4gc291cmNlLmNsb25lTm9kZSh0cnVlKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG5mdW5jdGlvbiBzaW1wbGVDb21wYXJlKGEsIGIpIHsgcmV0dXJuIGEgPT09IGIgfHwgKGEgIT09IGEgJiYgYiAhPT0gYik7IH1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5lcXVhbHNcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIHR3byBvYmplY3RzIG9yIHR3byB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQuIFN1cHBvcnRzIHZhbHVlIHR5cGVzLCByZWd1bGFyXG4gKiBleHByZXNzaW9ucywgYXJyYXlzIGFuZCBvYmplY3RzLlxuICpcbiAqIFR3byBvYmplY3RzIG9yIHZhbHVlcyBhcmUgY29uc2lkZXJlZCBlcXVpdmFsZW50IGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgZm9sbG93aW5nIGlzIHRydWU6XG4gKlxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIHBhc3MgYD09PWAgY29tcGFyaXNvbi5cbiAqICogQm90aCBvYmplY3RzIG9yIHZhbHVlcyBhcmUgb2YgdGhlIHNhbWUgdHlwZSBhbmQgYWxsIG9mIHRoZWlyIHByb3BlcnRpZXMgYXJlIGVxdWFsIGJ5XG4gKiAgIGNvbXBhcmluZyB0aGVtIHdpdGggYGFuZ3VsYXIuZXF1YWxzYC5cbiAqICogQm90aCB2YWx1ZXMgYXJlIE5hTi4gKEluIEphdmFTY3JpcHQsIE5hTiA9PSBOYU4gPT4gZmFsc2UuIEJ1dCB3ZSBjb25zaWRlciB0d28gTmFOIGFzIGVxdWFsKVxuICogKiBCb3RoIHZhbHVlcyByZXByZXNlbnQgdGhlIHNhbWUgcmVndWxhciBleHByZXNzaW9uIChJbiBKYXZhU2NyaXB0LFxuICogICAvYWJjLyA9PSAvYWJjLyA9PiBmYWxzZS4gQnV0IHdlIGNvbnNpZGVyIHR3byByZWd1bGFyIGV4cHJlc3Npb25zIGFzIGVxdWFsIHdoZW4gdGhlaXIgdGV4dHVhbFxuICogICByZXByZXNlbnRhdGlvbiBtYXRjaGVzKS5cbiAqXG4gKiBEdXJpbmcgYSBwcm9wZXJ0eSBjb21wYXJpc29uLCBwcm9wZXJ0aWVzIG9mIGBmdW5jdGlvbmAgdHlwZSBhbmQgcHJvcGVydGllcyB3aXRoIG5hbWVzXG4gKiB0aGF0IGJlZ2luIHdpdGggYCRgIGFyZSBpZ25vcmVkLlxuICpcbiAqIFNjb3BlIGFuZCBET01XaW5kb3cgb2JqZWN0cyBhcmUgYmVpbmcgY29tcGFyZWQgb25seSBieSBpZGVudGlmeSAoYD09PWApLlxuICpcbiAqIEBwYXJhbSB7Kn0gbzEgT2JqZWN0IG9yIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG8yIE9iamVjdCBvciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYXJndW1lbnRzIGFyZSBlcXVhbC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiZXF1YWxzRXhhbXBsZVwiIG5hbWU9XCJlcXVhbHNFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8Zm9ybSBub3ZhbGlkYXRlPlxuICAgICAgICAgIDxoMz5Vc2VyIDE8L2gzPlxuICAgICAgICAgIE5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidXNlcjEubmFtZVwiPlxuICAgICAgICAgIEFnZTogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cInVzZXIxLmFnZVwiPlxuXG4gICAgICAgICAgPGgzPlVzZXIgMjwvaDM+XG4gICAgICAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyMi5uYW1lXCI+XG4gICAgICAgICAgQWdlOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwidXNlcjIuYWdlXCI+XG5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJDb21wYXJlXCIgbmctY2xpY2s9XCJjb21wYXJlKClcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBVc2VyIDE6IDxwcmU+e3t1c2VyMSB8IGpzb259fTwvcHJlPlxuICAgICAgICAgIFVzZXIgMjogPHByZT57e3VzZXIyIHwganNvbn19PC9wcmU+XG4gICAgICAgICAgRXF1YWw6IDxwcmU+e3tyZXN1bHR9fTwvcHJlPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZXF1YWxzRXhhbXBsZScsIFtdKS5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLnVzZXIxID0ge307XG4gICAgICAgICAgJHNjb3BlLnVzZXIyID0ge307XG4gICAgICAgICAgJHNjb3BlLmNvbXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5yZXN1bHQgPSBhbmd1bGFyLmVxdWFscygkc2NvcGUudXNlcjEsICRzY29wZS51c2VyMik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiBlcXVhbHMobzEsIG8yKSB7XG4gIGlmIChvMSA9PT0gbzIpIHJldHVybiB0cnVlO1xuICBpZiAobzEgPT09IG51bGwgfHwgbzIgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICBpZiAobzEgIT09IG8xICYmIG8yICE9PSBvMikgcmV0dXJuIHRydWU7IC8vIE5hTiA9PT0gTmFOXG4gIHZhciB0MSA9IHR5cGVvZiBvMSwgdDIgPSB0eXBlb2YgbzIsIGxlbmd0aCwga2V5LCBrZXlTZXQ7XG4gIGlmICh0MSA9PT0gdDIgJiYgdDEgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKGlzQXJyYXkobzEpKSB7XG4gICAgICBpZiAoIWlzQXJyYXkobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoKGxlbmd0aCA9IG8xLmxlbmd0aCkgPT09IG8yLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGtleSA9IDA7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgICBpZiAoIWVxdWFscyhvMVtrZXldLCBvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNEYXRlKG8xKSkge1xuICAgICAgaWYgKCFpc0RhdGUobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gc2ltcGxlQ29tcGFyZShvMS5nZXRUaW1lKCksIG8yLmdldFRpbWUoKSk7XG4gICAgfSBlbHNlIGlmIChpc1JlZ0V4cChvMSkpIHtcbiAgICAgIGlmICghaXNSZWdFeHAobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gbzEudG9TdHJpbmcoKSA9PT0gbzIudG9TdHJpbmcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzU2NvcGUobzEpIHx8IGlzU2NvcGUobzIpIHx8IGlzV2luZG93KG8xKSB8fCBpc1dpbmRvdyhvMikgfHxcbiAgICAgICAgaXNBcnJheShvMikgfHwgaXNEYXRlKG8yKSB8fCBpc1JlZ0V4cChvMikpIHJldHVybiBmYWxzZTtcbiAgICAgIGtleVNldCA9IGNyZWF0ZU1hcCgpO1xuICAgICAgZm9yIChrZXkgaW4gbzEpIHtcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICckJyB8fCBpc0Z1bmN0aW9uKG8xW2tleV0pKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFlcXVhbHMobzFba2V5XSwgbzJba2V5XSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAga2V5U2V0W2tleV0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gbzIpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGtleVNldCkgJiZcbiAgICAgICAgICAgIGtleS5jaGFyQXQoMCkgIT09ICckJyAmJlxuICAgICAgICAgICAgaXNEZWZpbmVkKG8yW2tleV0pICYmXG4gICAgICAgICAgICAhaXNGdW5jdGlvbihvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxudmFyIGNzcCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIWlzRGVmaW5lZChjc3AucnVsZXMpKSB7XG5cblxuICAgIHZhciBuZ0NzcEVsZW1lbnQgPSAod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuZy1jc3BdJykgfHxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5nLWNzcF0nKSk7XG5cbiAgICBpZiAobmdDc3BFbGVtZW50KSB7XG4gICAgICB2YXIgbmdDc3BBdHRyaWJ1dGUgPSBuZ0NzcEVsZW1lbnQuZ2V0QXR0cmlidXRlKCduZy1jc3AnKSB8fFxuICAgICAgICAgICAgICAgICAgICBuZ0NzcEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW5nLWNzcCcpO1xuICAgICAgY3NwLnJ1bGVzID0ge1xuICAgICAgICBub1Vuc2FmZUV2YWw6ICFuZ0NzcEF0dHJpYnV0ZSB8fCAobmdDc3BBdHRyaWJ1dGUuaW5kZXhPZignbm8tdW5zYWZlLWV2YWwnKSAhPT0gLTEpLFxuICAgICAgICBub0lubGluZVN0eWxlOiAhbmdDc3BBdHRyaWJ1dGUgfHwgKG5nQ3NwQXR0cmlidXRlLmluZGV4T2YoJ25vLWlubGluZS1zdHlsZScpICE9PSAtMSlcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNzcC5ydWxlcyA9IHtcbiAgICAgICAgbm9VbnNhZmVFdmFsOiBub1Vuc2FmZUV2YWwoKSxcbiAgICAgICAgbm9JbmxpbmVTdHlsZTogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNzcC5ydWxlcztcblxuICBmdW5jdGlvbiBub1Vuc2FmZUV2YWwoKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXcsIG5vLW5ldy1mdW5jXG4gICAgICBuZXcgRnVuY3Rpb24oJycpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbW9kdWxlIG5nXG4gKiBAbmFtZSBuZ0pxXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nSnEgdGhlIG5hbWUgb2YgdGhlIGxpYnJhcnkgYXZhaWxhYmxlIHVuZGVyIGB3aW5kb3dgXG4gKiB0byBiZSB1c2VkIGZvciBhbmd1bGFyLmVsZW1lbnRcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoaXMgZGlyZWN0aXZlIHRvIGZvcmNlIHRoZSBhbmd1bGFyLmVsZW1lbnQgbGlicmFyeS4gIFRoaXMgc2hvdWxkIGJlXG4gKiB1c2VkIHRvIGZvcmNlIGVpdGhlciBqcUxpdGUgYnkgbGVhdmluZyBuZy1qcSBibGFuayBvciBzZXR0aW5nIHRoZSBuYW1lIG9mXG4gKiB0aGUganF1ZXJ5IHZhcmlhYmxlIHVuZGVyIHdpbmRvdyAoZWcuIGpRdWVyeSkuXG4gKlxuICogU2luY2UgQW5ndWxhckpTIGxvb2tzIGZvciB0aGlzIGRpcmVjdGl2ZSB3aGVuIGl0IGlzIGxvYWRlZCAoZG9lc24ndCB3YWl0IGZvciB0aGVcbiAqIERPTUNvbnRlbnRMb2FkZWQgZXZlbnQpLCBpdCBtdXN0IGJlIHBsYWNlZCBvbiBhbiBlbGVtZW50IHRoYXQgY29tZXMgYmVmb3JlIHRoZSBzY3JpcHRcbiAqIHdoaWNoIGxvYWRzIGFuZ3VsYXIuIEFsc28sIG9ubHkgdGhlIGZpcnN0IGluc3RhbmNlIG9mIGBuZy1qcWAgd2lsbCBiZSB1c2VkIGFuZCBhbGxcbiAqIG90aGVycyBpZ25vcmVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHRvIGZvcmNlIGpxTGl0ZSB1c2luZyB0aGUgYG5nSnFgIGRpcmVjdGl2ZSB0byB0aGUgYGh0bWxgIHRhZy5cbiBgYGBodG1sXG4gPCFkb2N0eXBlIGh0bWw+XG4gPGh0bWwgbmctYXBwIG5nLWpxPlxuIC4uLlxuIC4uLlxuIDwvaHRtbD5cbiBgYGBcbiAqIEBleGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHRvIHVzZSBhIGpRdWVyeSBiYXNlZCBsaWJyYXJ5IG9mIGEgZGlmZmVyZW50IG5hbWUuXG4gKiBUaGUgbGlicmFyeSBuYW1lIG11c3QgYmUgYXZhaWxhYmxlIGF0IHRoZSB0b3AgbW9zdCAnd2luZG93Jy5cbiBgYGBodG1sXG4gPCFkb2N0eXBlIGh0bWw+XG4gPGh0bWwgbmctYXBwIG5nLWpxPVwialF1ZXJ5TGliXCI+XG4gLi4uXG4gLi4uXG4gPC9odG1sPlxuIGBgYFxuICovXG52YXIganEgPSBmdW5jdGlvbigpIHtcbiAgaWYgKGlzRGVmaW5lZChqcS5uYW1lXykpIHJldHVybiBqcS5uYW1lXztcbiAgdmFyIGVsO1xuICB2YXIgaSwgaWkgPSBuZ0F0dHJQcmVmaXhlcy5sZW5ndGgsIHByZWZpeCwgbmFtZTtcbiAgZm9yIChpID0gMDsgaSA8IGlpOyArK2kpIHtcbiAgICBwcmVmaXggPSBuZ0F0dHJQcmVmaXhlc1tpXTtcbiAgICBlbCA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbJyArIHByZWZpeC5yZXBsYWNlKCc6JywgJ1xcXFw6JykgKyAnanFdJyk7XG4gICAgaWYgKGVsKSB7XG4gICAgICBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKHByZWZpeCArICdqcScpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChqcS5uYW1lXyA9IG5hbWUpO1xufTtcblxuZnVuY3Rpb24gY29uY2F0KGFycmF5MSwgYXJyYXkyLCBpbmRleCkge1xuICByZXR1cm4gYXJyYXkxLmNvbmNhdChzbGljZS5jYWxsKGFycmF5MiwgaW5kZXgpKTtcbn1cblxuZnVuY3Rpb24gc2xpY2VBcmdzKGFyZ3MsIHN0YXJ0SW5kZXgpIHtcbiAgcmV0dXJuIHNsaWNlLmNhbGwoYXJncywgc3RhcnRJbmRleCB8fCAwKTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5iaW5kXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGNhbGxzIGZ1bmN0aW9uIGBmbmAgYm91bmQgdG8gYHNlbGZgIChgc2VsZmAgYmVjb21lcyB0aGUgYHRoaXNgIGZvclxuICogYGZuYCkuIFlvdSBjYW4gc3VwcGx5IG9wdGlvbmFsIGBhcmdzYCB0aGF0IGFyZSBwcmVib3VuZCB0byB0aGUgZnVuY3Rpb24uIFRoaXMgZmVhdHVyZSBpcyBhbHNvXG4gKiBrbm93biBhcyBbcGFydGlhbCBhcHBsaWNhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXJ0aWFsX2FwcGxpY2F0aW9uKSwgYXNcbiAqIGRpc3Rpbmd1aXNoZWQgZnJvbSBbZnVuY3Rpb24gY3VycnlpbmddKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ3VycnlpbmcjQ29udHJhc3Rfd2l0aF9wYXJ0aWFsX2Z1bmN0aW9uX2FwcGxpY2F0aW9uKS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VsZiBDb250ZXh0IHdoaWNoIGBmbmAgc2hvdWxkIGJlIGV2YWx1YXRlZCBpbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gRnVuY3Rpb24gdG8gYmUgYm91bmQuXG4gKiBAcGFyYW0gey4uLip9IGFyZ3MgT3B0aW9uYWwgYXJndW1lbnRzIHRvIGJlIHByZWJvdW5kIHRvIHRoZSBgZm5gIGZ1bmN0aW9uIGNhbGwuXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gRnVuY3Rpb24gdGhhdCB3cmFwcyB0aGUgYGZuYCB3aXRoIGFsbCB0aGUgc3BlY2lmaWVkIGJpbmRpbmdzLlxuICovXG5mdW5jdGlvbiBiaW5kKHNlbGYsIGZuKSB7XG4gIHZhciBjdXJyeUFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IHNsaWNlQXJncyhhcmd1bWVudHMsIDIpIDogW107XG4gIGlmIChpc0Z1bmN0aW9uKGZuKSAmJiAhKGZuIGluc3RhbmNlb2YgUmVnRXhwKSkge1xuICAgIHJldHVybiBjdXJyeUFyZ3MubGVuZ3RoXG4gICAgICA/IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgICA/IGZuLmFwcGx5KHNlbGYsIGNvbmNhdChjdXJyeUFyZ3MsIGFyZ3VtZW50cywgMCkpXG4gICAgICAgICAgICA6IGZuLmFwcGx5KHNlbGYsIGN1cnJ5QXJncyk7XG4gICAgICAgIH1cbiAgICAgIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgICAgID8gZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBmbi5jYWxsKHNlbGYpO1xuICAgICAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIEluIElFLCBuYXRpdmUgbWV0aG9kcyBhcmUgbm90IGZ1bmN0aW9ucyBzbyB0aGV5IGNhbm5vdCBiZSBib3VuZCAobm90ZTogdGhleSBkb24ndCBuZWVkIHRvIGJlKS5cbiAgICByZXR1cm4gZm47XG4gIH1cbn1cblxuXG5mdW5jdGlvbiB0b0pzb25SZXBsYWNlcihrZXksIHZhbHVlKSB7XG4gIHZhciB2YWwgPSB2YWx1ZTtcblxuICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5LmNoYXJBdCgwKSA9PT0gJyQnICYmIGtleS5jaGFyQXQoMSkgPT09ICckJykge1xuICAgIHZhbCA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIGlmIChpc1dpbmRvdyh2YWx1ZSkpIHtcbiAgICB2YWwgPSAnJFdJTkRPVyc7XG4gIH0gZWxzZSBpZiAodmFsdWUgJiYgIHdpbmRvdy5kb2N1bWVudCA9PT0gdmFsdWUpIHtcbiAgICB2YWwgPSAnJERPQ1VNRU5UJztcbiAgfSBlbHNlIGlmIChpc1Njb3BlKHZhbHVlKSkge1xuICAgIHZhbCA9ICckU0NPUEUnO1xuICB9XG5cbiAgcmV0dXJuIHZhbDtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci50b0pzb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTZXJpYWxpemVzIGlucHV0IGludG8gYSBKU09OLWZvcm1hdHRlZCBzdHJpbmcuIFByb3BlcnRpZXMgd2l0aCBsZWFkaW5nICQkIGNoYXJhY3RlcnMgd2lsbCBiZVxuICogc3RyaXBwZWQgc2luY2UgQW5ndWxhckpTIHVzZXMgdGhpcyBub3RhdGlvbiBpbnRlcm5hbGx5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fERhdGV8c3RyaW5nfG51bWJlcnxib29sZWFufSBvYmogSW5wdXQgdG8gYmUgc2VyaWFsaXplZCBpbnRvIEpTT04uXG4gKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbcHJldHR5PTJdIElmIHNldCB0byB0cnVlLCB0aGUgSlNPTiBvdXRwdXQgd2lsbCBjb250YWluIG5ld2xpbmVzIGFuZCB3aGl0ZXNwYWNlLlxuICogICAgSWYgc2V0IHRvIGFuIGludGVnZXIsIHRoZSBKU09OIG91dHB1dCB3aWxsIGNvbnRhaW4gdGhhdCBtYW55IHNwYWNlcyBwZXIgaW5kZW50YXRpb24uXG4gKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gSlNPTi1pZmllZCBzdHJpbmcgcmVwcmVzZW50aW5nIGBvYmpgLlxuICogQGtub3duSXNzdWVcbiAqXG4gKiBUaGUgU2FmYXJpIGJyb3dzZXIgdGhyb3dzIGEgYFJhbmdlRXJyb3JgIGluc3RlYWQgb2YgcmV0dXJuaW5nIGBudWxsYCB3aGVuIGl0IHRyaWVzIHRvIHN0cmluZ2lmeSBhIGBEYXRlYFxuICogb2JqZWN0IHdpdGggYW4gaW52YWxpZCBkYXRlIHZhbHVlLiBUaGUgb25seSByZWxpYWJsZSB3YXkgdG8gcHJldmVudCB0aGlzIGlzIHRvIG1vbmtleXBhdGNoIHRoZVxuICogYERhdGUucHJvdG90eXBlLnRvSlNPTmAgbWV0aG9kIGFzIGZvbGxvd3M6XG4gKlxuICogYGBgXG4gKiB2YXIgX0RhdGV0b0pTT04gPSBEYXRlLnByb3RvdHlwZS50b0pTT047XG4gKiBEYXRlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbigpIHtcbiAqICAgdHJ5IHtcbiAqICAgICByZXR1cm4gX0RhdGV0b0pTT04uY2FsbCh0aGlzKTtcbiAqICAgfSBjYXRjaChlKSB7XG4gKiAgICAgaWYgKGUgaW5zdGFuY2VvZiBSYW5nZUVycm9yKSB7XG4gKiAgICAgICByZXR1cm4gbnVsbDtcbiAqICAgICB9XG4gKiAgICAgdGhyb3cgZTtcbiAqICAgfVxuICogfTtcbiAqIGBgYFxuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMTQyMjEgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbmZ1bmN0aW9uIHRvSnNvbihvYmosIHByZXR0eSkge1xuICBpZiAoaXNVbmRlZmluZWQob2JqKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKCFpc051bWJlcihwcmV0dHkpKSB7XG4gICAgcHJldHR5ID0gcHJldHR5ID8gMiA6IG51bGw7XG4gIH1cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgdG9Kc29uUmVwbGFjZXIsIHByZXR0eSk7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZnJvbUpzb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXNlcmlhbGl6ZXMgYSBKU09OIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ganNvbiBKU09OIHN0cmluZyB0byBkZXNlcmlhbGl6ZS5cbiAqIEByZXR1cm5zIHtPYmplY3R8QXJyYXl8c3RyaW5nfG51bWJlcn0gRGVzZXJpYWxpemVkIEpTT04gc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmcm9tSnNvbihqc29uKSB7XG4gIHJldHVybiBpc1N0cmluZyhqc29uKVxuICAgICAgPyBKU09OLnBhcnNlKGpzb24pXG4gICAgICA6IGpzb247XG59XG5cblxudmFyIEFMTF9DT0xPTlMgPSAvOi9nO1xuZnVuY3Rpb24gdGltZXpvbmVUb09mZnNldCh0aW1lem9uZSwgZmFsbGJhY2spIHtcbiAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5LCBFZGdlIDEzLTE1K1xuICAvLyBJRS9FZGdlIGRvIG5vdCBcInVuZGVyc3RhbmRcIiBjb2xvbiAoYDpgKSBpbiB0aW1lem9uZVxuICB0aW1lem9uZSA9IHRpbWV6b25lLnJlcGxhY2UoQUxMX0NPTE9OUywgJycpO1xuICB2YXIgcmVxdWVzdGVkVGltZXpvbmVPZmZzZXQgPSBEYXRlLnBhcnNlKCdKYW4gMDEsIDE5NzAgMDA6MDA6MDAgJyArIHRpbWV6b25lKSAvIDYwMDAwO1xuICByZXR1cm4gaXNOdW1iZXJOYU4ocmVxdWVzdGVkVGltZXpvbmVPZmZzZXQpID8gZmFsbGJhY2sgOiByZXF1ZXN0ZWRUaW1lem9uZU9mZnNldDtcbn1cblxuXG5mdW5jdGlvbiBhZGREYXRlTWludXRlcyhkYXRlLCBtaW51dGVzKSB7XG4gIGRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIG1pbnV0ZXMpO1xuICByZXR1cm4gZGF0ZTtcbn1cblxuXG5mdW5jdGlvbiBjb252ZXJ0VGltZXpvbmVUb0xvY2FsKGRhdGUsIHRpbWV6b25lLCByZXZlcnNlKSB7XG4gIHJldmVyc2UgPSByZXZlcnNlID8gLTEgOiAxO1xuICB2YXIgZGF0ZVRpbWV6b25lT2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICB2YXIgdGltZXpvbmVPZmZzZXQgPSB0aW1lem9uZVRvT2Zmc2V0KHRpbWV6b25lLCBkYXRlVGltZXpvbmVPZmZzZXQpO1xuICByZXR1cm4gYWRkRGF0ZU1pbnV0ZXMoZGF0ZSwgcmV2ZXJzZSAqICh0aW1lem9uZU9mZnNldCAtIGRhdGVUaW1lem9uZU9mZnNldCkpO1xufVxuXG5cbi8qKlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBzdGFydGluZ1RhZyhlbGVtZW50KSB7XG4gIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCkuY2xvbmUoKS5lbXB0eSgpO1xuICB2YXIgZWxlbUh0bWwgPSBqcUxpdGUoJzxkaXY+PC9kaXY+JykuYXBwZW5kKGVsZW1lbnQpLmh0bWwoKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZWxlbWVudFswXS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX1RFWFQgPyBsb3dlcmNhc2UoZWxlbUh0bWwpIDpcbiAgICAgICAgZWxlbUh0bWwuXG4gICAgICAgICAgbWF0Y2goL14oPFtePl0rPikvKVsxXS5cbiAgICAgICAgICByZXBsYWNlKC9ePChbXFx3LV0rKS8sIGZ1bmN0aW9uKG1hdGNoLCBub2RlTmFtZSkge3JldHVybiAnPCcgKyBsb3dlcmNhc2Uobm9kZU5hbWUpO30pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGxvd2VyY2FzZShlbGVtSHRtbCk7XG4gIH1cblxufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyoqXG4gKiBUcmllcyB0byBkZWNvZGUgdGhlIFVSSSBjb21wb25lbnQgd2l0aG91dCB0aHJvd2luZyBhbiBleGNlcHRpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBzdHIgdmFsdWUgcG90ZW50aWFsIFVSSSBjb21wb25lbnQgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGNhbiBiZSBkZWNvZGVkXG4gKiB3aXRoIHRoZSBkZWNvZGVVUklDb21wb25lbnQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkge1xuICB0cnkge1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSWdub3JlIGFueSBpbnZhbGlkIHVyaSBjb21wb25lbnQuXG4gIH1cbn1cblxuXG4vKipcbiAqIFBhcnNlcyBhbiBlc2NhcGVkIHVybCBxdWVyeSBzdHJpbmcgaW50byBrZXktdmFsdWUgcGFpcnMuXG4gKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsYm9vbGVhbnxBcnJheT59XG4gKi9cbmZ1bmN0aW9uIHBhcnNlS2V5VmFsdWUoLyoqc3RyaW5nKi9rZXlWYWx1ZSkge1xuICB2YXIgb2JqID0ge307XG4gIGZvckVhY2goKGtleVZhbHVlIHx8ICcnKS5zcGxpdCgnJicpLCBmdW5jdGlvbihrZXlWYWx1ZSkge1xuICAgIHZhciBzcGxpdFBvaW50LCBrZXksIHZhbDtcbiAgICBpZiAoa2V5VmFsdWUpIHtcbiAgICAgIGtleSA9IGtleVZhbHVlID0ga2V5VmFsdWUucmVwbGFjZSgvXFwrL2csJyUyMCcpO1xuICAgICAgc3BsaXRQb2ludCA9IGtleVZhbHVlLmluZGV4T2YoJz0nKTtcbiAgICAgIGlmIChzcGxpdFBvaW50ICE9PSAtMSkge1xuICAgICAgICBrZXkgPSBrZXlWYWx1ZS5zdWJzdHJpbmcoMCwgc3BsaXRQb2ludCk7XG4gICAgICAgIHZhbCA9IGtleVZhbHVlLnN1YnN0cmluZyhzcGxpdFBvaW50ICsgMSk7XG4gICAgICB9XG4gICAgICBrZXkgPSB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5KTtcbiAgICAgIGlmIChpc0RlZmluZWQoa2V5KSkge1xuICAgICAgICB2YWwgPSBpc0RlZmluZWQodmFsKSA/IHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWwpIDogdHJ1ZTtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqW2tleV0pKSB7XG4gICAgICAgICAgb2JqW2tleV0ucHVzaCh2YWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9ialtrZXldID0gW29ialtrZXldLHZhbF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiB0b0tleVZhbHVlKG9iaikge1xuICB2YXIgcGFydHMgPSBbXTtcbiAgZm9yRWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGZvckVhY2godmFsdWUsIGZ1bmN0aW9uKGFycmF5VmFsdWUpIHtcbiAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXksIHRydWUpICtcbiAgICAgICAgICAgICAgICAgICAoYXJyYXlWYWx1ZSA9PT0gdHJ1ZSA/ICcnIDogJz0nICsgZW5jb2RlVXJpUXVlcnkoYXJyYXlWYWx1ZSwgdHJ1ZSkpKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXksIHRydWUpICtcbiAgICAgICAgICAgICAgICh2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogJz0nICsgZW5jb2RlVXJpUXVlcnkodmFsdWUsIHRydWUpKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHBhcnRzLmxlbmd0aCA/IHBhcnRzLmpvaW4oJyYnKSA6ICcnO1xufVxuXG5cbi8qKlxuICogV2UgbmVlZCBvdXIgY3VzdG9tIG1ldGhvZCBiZWNhdXNlIGVuY29kZVVSSUNvbXBvbmVudCBpcyB0b28gYWdncmVzc2l2ZSBhbmQgZG9lc24ndCBmb2xsb3dcbiAqIGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzM5ODYudHh0IHdpdGggcmVnYXJkcyB0byB0aGUgY2hhcmFjdGVyIHNldCAocGNoYXIpIGFsbG93ZWQgaW4gcGF0aFxuICogc2VnbWVudHM6XG4gKiAgICBzZWdtZW50ICAgICAgID0gKnBjaGFyXG4gKiAgICBwY2hhciAgICAgICAgID0gdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvIFwiOlwiIC8gXCJAXCJcbiAqICAgIHBjdC1lbmNvZGVkICAgPSBcIiVcIiBIRVhESUcgSEVYRElHXG4gKiAgICB1bnJlc2VydmVkICAgID0gQUxQSEEgLyBESUdJVCAvIFwiLVwiIC8gXCIuXCIgLyBcIl9cIiAvIFwiflwiXG4gKiAgICBzdWItZGVsaW1zICAgID0gXCIhXCIgLyBcIiRcIiAvIFwiJlwiIC8gXCInXCIgLyBcIihcIiAvIFwiKVwiXG4gKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxuICovXG5mdW5jdGlvbiBlbmNvZGVVcmlTZWdtZW50KHZhbCkge1xuICByZXR1cm4gZW5jb2RlVXJpUXVlcnkodmFsLCB0cnVlKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lMjYvZ2ksICcmJykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNEL2dpLCAnPScpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyQi9naSwgJysnKTtcbn1cblxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIGZvciBlbmNvZGluZyAqa2V5KiBvciAqdmFsdWUqIHBhcnRzIG9mIHF1ZXJ5IGNvbXBvbmVudC4gV2UgbmVlZCBhIGN1c3RvbVxuICogbWV0aG9kIGJlY2F1c2UgZW5jb2RlVVJJQ29tcG9uZW50IGlzIHRvbyBhZ2dyZXNzaXZlIGFuZCBlbmNvZGVzIHN0dWZmIHRoYXQgZG9lc24ndCBoYXZlIHRvIGJlXG4gKiBlbmNvZGVkIHBlciBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2OlxuICogICAgcXVlcnkgICAgICAgICA9ICooIHBjaGFyIC8gXCIvXCIgLyBcIj9cIiApXG4gKiAgICBwY2hhciAgICAgICAgID0gdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvIFwiOlwiIC8gXCJAXCJcbiAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcbiAqICAgIHBjdC1lbmNvZGVkICAgPSBcIiVcIiBIRVhESUcgSEVYRElHXG4gKiAgICBzdWItZGVsaW1zICAgID0gXCIhXCIgLyBcIiRcIiAvIFwiJlwiIC8gXCInXCIgLyBcIihcIiAvIFwiKVwiXG4gKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxuICovXG5mdW5jdGlvbiBlbmNvZGVVcmlRdWVyeSh2YWwsIHBjdEVuY29kZVNwYWNlcykge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTQwL2dpLCAnQCcpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNCL2dpLCAnOycpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyMC9nLCAocGN0RW5jb2RlU3BhY2VzID8gJyUyMCcgOiAnKycpKTtcbn1cblxudmFyIG5nQXR0clByZWZpeGVzID0gWyduZy0nLCAnZGF0YS1uZy0nLCAnbmc6JywgJ3gtbmctJ107XG5cbmZ1bmN0aW9uIGdldE5nQXR0cmlidXRlKGVsZW1lbnQsIG5nQXR0cikge1xuICB2YXIgYXR0ciwgaSwgaWkgPSBuZ0F0dHJQcmVmaXhlcy5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBpaTsgKytpKSB7XG4gICAgYXR0ciA9IG5nQXR0clByZWZpeGVzW2ldICsgbmdBdHRyO1xuICAgIGlmIChpc1N0cmluZyhhdHRyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cikpKSB7XG4gICAgICByZXR1cm4gYXR0cjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGFsbG93QXV0b0Jvb3RzdHJhcChkb2N1bWVudCkge1xuICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdDtcblxuICBpZiAoIXNjcmlwdCkge1xuICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seVxuICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYGRvY3VtZW50LmN1cnJlbnRTY3JpcHRgXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBJZiB0aGUgYGN1cnJlbnRTY3JpcHRgIHByb3BlcnR5IGhhcyBiZWVuIGNsb2JiZXJlZCBqdXN0IHJldHVybiBmYWxzZSwgc2luY2UgdGhpcyBpbmRpY2F0ZXMgYSBwcm9iYWJsZSBhdHRhY2tcbiAgaWYgKCEoc2NyaXB0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxTY3JpcHRFbGVtZW50IHx8IHNjcmlwdCBpbnN0YW5jZW9mIHdpbmRvdy5TVkdTY3JpcHRFbGVtZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBhdHRyaWJ1dGVzID0gc2NyaXB0LmF0dHJpYnV0ZXM7XG4gIHZhciBzcmNzID0gW2F0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKCdzcmMnKSwgYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ2hyZWYnKSwgYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ3hsaW5rOmhyZWYnKV07XG5cbiAgcmV0dXJuIHNyY3MuZXZlcnkoZnVuY3Rpb24oc3JjKSB7XG4gICAgaWYgKCFzcmMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXNyYy52YWx1ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGxpbmsuaHJlZiA9IHNyYy52YWx1ZTtcblxuICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4gPT09IGxpbmsub3JpZ2luKSB7XG4gICAgICAvLyBTYW1lLW9yaWdpbiByZXNvdXJjZXMgYXJlIGFsd2F5cyBhbGxvd2VkLCBldmVuIGZvciBub24td2hpdGVsaXN0ZWQgc2NoZW1lcy5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBEaXNhYmxlZCBib290c3RyYXBwaW5nIHVubGVzcyBhbmd1bGFyLmpzIHdhcyBsb2FkZWQgZnJvbSBhIGtub3duIHNjaGVtZSB1c2VkIG9uIHRoZSB3ZWIuXG4gICAgLy8gVGhpcyBpcyB0byBwcmV2ZW50IGFuZ3VsYXIuanMgYnVuZGxlZCB3aXRoIGJyb3dzZXIgZXh0ZW5zaW9ucyBmcm9tIGJlaW5nIHVzZWQgdG8gYnlwYXNzIHRoZVxuICAgIC8vIGNvbnRlbnQgc2VjdXJpdHkgcG9saWN5IGluIHdlYiBwYWdlcyBhbmQgb3RoZXIgYnJvd3NlciBleHRlbnNpb25zLlxuICAgIHN3aXRjaCAobGluay5wcm90b2NvbCkge1xuICAgICAgY2FzZSAnaHR0cDonOlxuICAgICAgY2FzZSAnaHR0cHM6JzpcbiAgICAgIGNhc2UgJ2Z0cDonOlxuICAgICAgY2FzZSAnYmxvYjonOlxuICAgICAgY2FzZSAnZmlsZTonOlxuICAgICAgY2FzZSAnZGF0YTonOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBDYWNoZWQgYXMgaXQgaGFzIHRvIHJ1biBkdXJpbmcgbG9hZGluZyBzbyB0aGF0IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQgaXMgYXZhaWxhYmxlLlxudmFyIGlzQXV0b0Jvb3RzdHJhcEFsbG93ZWQgPSBhbGxvd0F1dG9Cb290c3RyYXAod2luZG93LmRvY3VtZW50KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0FwcFxuICogQG1vZHVsZSBuZ1xuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHthbmd1bGFyLk1vZHVsZX0gbmdBcHAgYW4gb3B0aW9uYWwgYXBwbGljYXRpb25cbiAqICAge0BsaW5rIGFuZ3VsYXIubW9kdWxlIG1vZHVsZX0gbmFtZSB0byBsb2FkLlxuICogQHBhcmFtIHtib29sZWFuPX0gbmdTdHJpY3REaSBpZiB0aGlzIGF0dHJpYnV0ZSBpcyBwcmVzZW50IG9uIHRoZSBhcHAgZWxlbWVudCwgdGhlIGluamVjdG9yIHdpbGwgYmVcbiAqICAgY3JlYXRlZCBpbiBcInN0cmljdC1kaVwiIG1vZGUuIFRoaXMgbWVhbnMgdGhhdCB0aGUgYXBwbGljYXRpb24gd2lsbCBmYWlsIHRvIGludm9rZSBmdW5jdGlvbnMgd2hpY2hcbiAqICAgZG8gbm90IHVzZSBleHBsaWNpdCBmdW5jdGlvbiBhbm5vdGF0aW9uIChhbmQgYXJlIHRodXMgdW5zdWl0YWJsZSBmb3IgbWluaWZpY2F0aW9uKSwgYXMgZGVzY3JpYmVkXG4gKiAgIGluIHtAbGluayBndWlkZS9kaSB0aGUgRGVwZW5kZW5jeSBJbmplY3Rpb24gZ3VpZGV9LCBhbmQgdXNlZnVsIGRlYnVnZ2luZyBpbmZvIHdpbGwgYXNzaXN0IGluXG4gKiAgIHRyYWNraW5nIGRvd24gdGhlIHJvb3Qgb2YgdGhlc2UgYnVncy5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBVc2UgdGhpcyBkaXJlY3RpdmUgdG8gKiphdXRvLWJvb3RzdHJhcCoqIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi4gVGhlIGBuZ0FwcGAgZGlyZWN0aXZlXG4gKiBkZXNpZ25hdGVzIHRoZSAqKnJvb3QgZWxlbWVudCoqIG9mIHRoZSBhcHBsaWNhdGlvbiBhbmQgaXMgdHlwaWNhbGx5IHBsYWNlZCBuZWFyIHRoZSByb290IGVsZW1lbnRcbiAqIG9mIHRoZSBwYWdlIC0gZS5nLiBvbiB0aGUgYDxib2R5PmAgb3IgYDxodG1sPmAgdGFncy5cbiAqXG4gKiBUaGVyZSBhcmUgYSBmZXcgdGhpbmdzIHRvIGtlZXAgaW4gbWluZCB3aGVuIHVzaW5nIGBuZ0FwcGA6XG4gKiAtIG9ubHkgb25lIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiBjYW4gYmUgYXV0by1ib290c3RyYXBwZWQgcGVyIEhUTUwgZG9jdW1lbnQuIFRoZSBmaXJzdCBgbmdBcHBgXG4gKiAgIGZvdW5kIGluIHRoZSBkb2N1bWVudCB3aWxsIGJlIHVzZWQgdG8gZGVmaW5lIHRoZSByb290IGVsZW1lbnQgdG8gYXV0by1ib290c3RyYXAgYXMgYW5cbiAqICAgYXBwbGljYXRpb24uIFRvIHJ1biBtdWx0aXBsZSBhcHBsaWNhdGlvbnMgaW4gYW4gSFRNTCBkb2N1bWVudCB5b3UgbXVzdCBtYW51YWxseSBib290c3RyYXAgdGhlbSB1c2luZ1xuICogICB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IGluc3RlYWQuXG4gKiAtIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbnMgY2Fubm90IGJlIG5lc3RlZCB3aXRoaW4gZWFjaCBvdGhlci5cbiAqIC0gRG8gbm90IHVzZSBhIGRpcmVjdGl2ZSB0aGF0IHVzZXMge0BsaW5rIG5nLiRjb21waWxlI3RyYW5zY2x1c2lvbiB0cmFuc2NsdXNpb259IG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgYG5nQXBwYC5cbiAqICAgVGhpcyBpbmNsdWRlcyBkaXJlY3RpdmVzIHN1Y2ggYXMge0BsaW5rIG5nLm5nSWYgYG5nSWZgfSwge0BsaW5rIG5nLm5nSW5jbHVkZSBgbmdJbmNsdWRlYH0gYW5kXG4gKiAgIHtAbGluayBuZ1JvdXRlLm5nVmlldyBgbmdWaWV3YH0uXG4gKiAgIERvaW5nIHRoaXMgbWlzcGxhY2VzIHRoZSBhcHAge0BsaW5rIG5nLiRyb290RWxlbWVudCBgJHJvb3RFbGVtZW50YH0gYW5kIHRoZSBhcHAncyB7QGxpbmsgYXV0by4kaW5qZWN0b3IgaW5qZWN0b3J9LFxuICogICBjYXVzaW5nIGFuaW1hdGlvbnMgdG8gc3RvcCB3b3JraW5nIGFuZCBtYWtpbmcgdGhlIGluamVjdG9yIGluYWNjZXNzaWJsZSBmcm9tIG91dHNpZGUgdGhlIGFwcC5cbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgYW4gKipBbmd1bGFySlMgbW9kdWxlKiogdG8gYmUgdXNlZCBhcyB0aGUgcm9vdCBtb2R1bGUgZm9yIHRoZSBhcHBsaWNhdGlvbi4gIFRoaXNcbiAqIG1vZHVsZSB3aWxsIGJlIGxvYWRlZCBpbnRvIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3J9IHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGJvb3RzdHJhcHBlZC4gSXRcbiAqIHNob3VsZCBjb250YWluIHRoZSBhcHBsaWNhdGlvbiBjb2RlIG5lZWRlZCBvciBoYXZlIGRlcGVuZGVuY2llcyBvbiBvdGhlciBtb2R1bGVzIHRoYXQgd2lsbFxuICogY29udGFpbiB0aGUgY29kZS4gU2VlIHtAbGluayBhbmd1bGFyLm1vZHVsZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogSW4gdGhlIGV4YW1wbGUgYmVsb3cgaWYgdGhlIGBuZ0FwcGAgZGlyZWN0aXZlIHdlcmUgbm90IHBsYWNlZCBvbiB0aGUgYGh0bWxgIGVsZW1lbnQgdGhlbiB0aGVcbiAqIGRvY3VtZW50IHdvdWxkIG5vdCBiZSBjb21waWxlZCwgdGhlIGBBcHBDb250cm9sbGVyYCB3b3VsZCBub3QgYmUgaW5zdGFudGlhdGVkIGFuZCB0aGUgYHt7IGErYiB9fWBcbiAqIHdvdWxkIG5vdCBiZSByZXNvbHZlZCB0byBgM2AuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIyMgU2ltcGxlIFVzYWdlXG4gKlxuICogYG5nQXBwYCBpcyB0aGUgZWFzaWVzdCwgYW5kIG1vc3QgY29tbW9uIHdheSB0byBib290c3RyYXAgYW4gYXBwbGljYXRpb24uXG4gKlxuIDxleGFtcGxlIG1vZHVsZT1cIm5nQXBwRGVtb1wiIG5hbWU9XCJuZy1hcHBcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJuZ0FwcERlbW9Db250cm9sbGVyXCI+XG4gICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cbiAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgYW5ndWxhci5tb2R1bGUoJ25nQXBwRGVtbycsIFtdKS5jb250cm9sbGVyKCduZ0FwcERlbW9Db250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICRzY29wZS5hID0gMTtcbiAgICAgJHNjb3BlLmIgPSAyO1xuICAgfSk7XG4gICA8L2ZpbGU+XG4gPC9leGFtcGxlPlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIFdpdGggYG5nU3RyaWN0RGlgXG4gKlxuICogVXNpbmcgYG5nU3RyaWN0RGlgLCB5b3Ugd291bGQgc2VlIHNvbWV0aGluZyBsaWtlIHRoaXM6XG4gKlxuIDxleGFtcGxlIG5nLWFwcC1pbmNsdWRlZD1cInRydWVcIiBuYW1lPVwic3RyaWN0LWRpXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgPGRpdiBuZy1hcHA9XCJuZ0FwcFN0cmljdERlbW9cIiBuZy1zdHJpY3QtZGk+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiR29vZENvbnRyb2xsZXIxXCI+XG4gICAgICAgICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cblxuICAgICAgICAgICA8cD5UaGlzIHJlbmRlcnMgYmVjYXVzZSB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBmYWlsIHRvXG4gICAgICAgICAgICAgIGluc3RhbnRpYXRlLCBieSB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9uIHN0eWxlIChzZWVcbiAgICAgICAgICAgICAgc2NyaXB0LmpzIGZvciBkZXRhaWxzKVxuICAgICAgICAgICA8L3A+XG4gICAgICAgPC9kaXY+XG5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHb29kQ29udHJvbGxlcjJcIj5cbiAgICAgICAgICAgTmFtZTogPGlucHV0IG5nLW1vZGVsPVwibmFtZVwiPjxiciAvPlxuICAgICAgICAgICBIZWxsbywge3tuYW1lfX0hXG5cbiAgICAgICAgICAgPHA+VGhpcyByZW5kZXJzIGJlY2F1c2UgdGhlIGNvbnRyb2xsZXIgZG9lcyBub3QgZmFpbCB0b1xuICAgICAgICAgICAgICBpbnN0YW50aWF0ZSwgYnkgdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbiBzdHlsZVxuICAgICAgICAgICAgICAoc2VlIHNjcmlwdC5qcyBmb3IgZGV0YWlscylcbiAgICAgICAgICAgPC9wPlxuICAgICAgIDwvZGl2PlxuXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQmFkQ29udHJvbGxlclwiPlxuICAgICAgICAgICBJIGNhbiBhZGQ6IHt7YX19ICsge3tifX0gPSAge3sgYStiIH19XG5cbiAgICAgICAgICAgPHA+VGhlIGNvbnRyb2xsZXIgY291bGQgbm90IGJlIGluc3RhbnRpYXRlZCwgZHVlIHRvIHJlbHlpbmdcbiAgICAgICAgICAgICAgb24gYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb25zICh3aGljaCBhcmUgZGlzYWJsZWQgaW5cbiAgICAgICAgICAgICAgc3RyaWN0IG1vZGUpLiBBcyBzdWNoLCB0aGUgY29udGVudCBvZiB0aGlzIHNlY3Rpb24gaXMgbm90XG4gICAgICAgICAgICAgIGludGVycG9sYXRlZCwgYW5kIHRoZXJlIHNob3VsZCBiZSBhbiBlcnJvciBpbiB5b3VyIHdlYiBjb25zb2xlLlxuICAgICAgICAgICA8L3A+XG4gICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgIGFuZ3VsYXIubW9kdWxlKCduZ0FwcFN0cmljdERlbW8nLCBbXSlcbiAgICAgLy8gQmFkQ29udHJvbGxlciB3aWxsIGZhaWwgdG8gaW5zdGFudGlhdGUsIGR1ZSB0byByZWx5aW5nIG9uIGF1dG9tYXRpYyBmdW5jdGlvbiBhbm5vdGF0aW9uLFxuICAgICAvLyByYXRoZXIgdGhhbiBhbiBleHBsaWNpdCBhbm5vdGF0aW9uXG4gICAgIC5jb250cm9sbGVyKCdCYWRDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgJHNjb3BlLmEgPSAxO1xuICAgICAgICRzY29wZS5iID0gMjtcbiAgICAgfSlcbiAgICAgLy8gVW5saWtlIEJhZENvbnRyb2xsZXIsIEdvb2RDb250cm9sbGVyMSBhbmQgR29vZENvbnRyb2xsZXIyIHdpbGwgbm90IGZhaWwgdG8gYmUgaW5zdGFudGlhdGVkLFxuICAgICAvLyBkdWUgdG8gdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbnMgdXNpbmcgdGhlIGFycmF5IHN0eWxlIGFuZCAkaW5qZWN0IHByb3BlcnR5LCByZXNwZWN0aXZlbHkuXG4gICAgIC5jb250cm9sbGVyKCdHb29kQ29udHJvbGxlcjEnLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICRzY29wZS5hID0gMTtcbiAgICAgICAkc2NvcGUuYiA9IDI7XG4gICAgIH1dKVxuICAgICAuY29udHJvbGxlcignR29vZENvbnRyb2xsZXIyJywgR29vZENvbnRyb2xsZXIyKTtcbiAgICAgZnVuY3Rpb24gR29vZENvbnRyb2xsZXIyKCRzY29wZSkge1xuICAgICAgICRzY29wZS5uYW1lID0gJ1dvcmxkJztcbiAgICAgfVxuICAgICBHb29kQ29udHJvbGxlcjIuJGluamVjdCA9IFsnJHNjb3BlJ107XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICBkaXZbbmctY29udHJvbGxlcl0ge1xuICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgICAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgYm9yZGVyOiAxcHggc29saWQ7XG4gICAgICAgcGFkZGluZzogLjVlbTtcbiAgIH1cbiAgIGRpdltuZy1jb250cm9sbGVyXj1Hb29kXSB7XG4gICAgICAgYm9yZGVyLWNvbG9yOiAjZDZlOWM2O1xuICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkZmYwZDg7XG4gICAgICAgY29sb3I6ICMzYzc2M2Q7XG4gICB9XG4gICBkaXZbbmctY29udHJvbGxlcl49QmFkXSB7XG4gICAgICAgYm9yZGVyLWNvbG9yOiAjZWJjY2QxO1xuICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMmRlZGU7XG4gICAgICAgY29sb3I6ICNhOTQ0NDI7XG4gICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgIH1cbiAgIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uIGFuZ3VsYXJJbml0KGVsZW1lbnQsIGJvb3RzdHJhcCkge1xuICB2YXIgYXBwRWxlbWVudCxcbiAgICAgIG1vZHVsZSxcbiAgICAgIGNvbmZpZyA9IHt9O1xuXG4gIC8vIFRoZSBlbGVtZW50IGBlbGVtZW50YCBoYXMgcHJpb3JpdHkgb3ZlciBhbnkgb3RoZXIgZWxlbWVudC5cbiAgZm9yRWFjaChuZ0F0dHJQcmVmaXhlcywgZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgdmFyIG5hbWUgPSBwcmVmaXggKyAnYXBwJztcblxuICAgIGlmICghYXBwRWxlbWVudCAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgYXBwRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICBtb2R1bGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gIH0pO1xuICBmb3JFYWNoKG5nQXR0clByZWZpeGVzLCBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgbmFtZSA9IHByZWZpeCArICdhcHAnO1xuICAgIHZhciBjYW5kaWRhdGU7XG5cbiAgICBpZiAoIWFwcEVsZW1lbnQgJiYgKGNhbmRpZGF0ZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignWycgKyBuYW1lLnJlcGxhY2UoJzonLCAnXFxcXDonKSArICddJykpKSB7XG4gICAgICBhcHBFbGVtZW50ID0gY2FuZGlkYXRlO1xuICAgICAgbW9kdWxlID0gY2FuZGlkYXRlLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gIH0pO1xuICBpZiAoYXBwRWxlbWVudCkge1xuICAgIGlmICghaXNBdXRvQm9vdHN0cmFwQWxsb3dlZCkge1xuICAgICAgd2luZG93LmNvbnNvbGUuZXJyb3IoJ0FuZ3VsYXJKUzogZGlzYWJsaW5nIGF1dG9tYXRpYyBib290c3RyYXAuIDxzY3JpcHQ+IHByb3RvY29sIGluZGljYXRlcyAnICtcbiAgICAgICAgICAnYW4gZXh0ZW5zaW9uLCBkb2N1bWVudC5sb2NhdGlvbi5ocmVmIGRvZXMgbm90IG1hdGNoLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25maWcuc3RyaWN0RGkgPSBnZXROZ0F0dHJpYnV0ZShhcHBFbGVtZW50LCAnc3RyaWN0LWRpJykgIT09IG51bGw7XG4gICAgYm9vdHN0cmFwKGFwcEVsZW1lbnQsIG1vZHVsZSA/IFttb2R1bGVdIDogW10sIGNvbmZpZyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuYm9vdHN0cmFwXG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIG1hbnVhbGx5IHN0YXJ0IHVwIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSB7QGxpbmsgZ3VpZGUvYm9vdHN0cmFwIEJvb3RzdHJhcCBndWlkZX0uXG4gKlxuICogQW5ndWxhckpTIHdpbGwgZGV0ZWN0IGlmIGl0IGhhcyBiZWVuIGxvYWRlZCBpbnRvIHRoZSBicm93c2VyIG1vcmUgdGhhbiBvbmNlIGFuZCBvbmx5IGFsbG93IHRoZVxuICogZmlyc3QgbG9hZGVkIHNjcmlwdCB0byBiZSBib290c3RyYXBwZWQgYW5kIHdpbGwgcmVwb3J0IGEgd2FybmluZyB0byB0aGUgYnJvd3NlciBjb25zb2xlIGZvclxuICogZWFjaCBvZiB0aGUgc3Vic2VxdWVudCBzY3JpcHRzLiBUaGlzIHByZXZlbnRzIHN0cmFuZ2UgcmVzdWx0cyBpbiBhcHBsaWNhdGlvbnMsIHdoZXJlIG90aGVyd2lzZVxuICogbXVsdGlwbGUgaW5zdGFuY2VzIG9mIEFuZ3VsYXJKUyB0cnkgdG8gd29yayBvbiB0aGUgRE9NLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogUHJvdHJhY3RvciBiYXNlZCBlbmQtdG8tZW5kIHRlc3RzIGNhbm5vdCB1c2UgdGhpcyBmdW5jdGlvbiB0byBib290c3RyYXAgbWFudWFsbHkuXG4gKiBUaGV5IG11c3QgdXNlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9LlxuICogPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBEbyBub3QgYm9vdHN0cmFwIHRoZSBhcHAgb24gYW4gZWxlbWVudCB3aXRoIGEgZGlyZWN0aXZlIHRoYXQgdXNlcyB7QGxpbmsgbmcuJGNvbXBpbGUjdHJhbnNjbHVzaW9uIHRyYW5zY2x1c2lvbn0sXG4gKiBzdWNoIGFzIHtAbGluayBuZy5uZ0lmIGBuZ0lmYH0sIHtAbGluayBuZy5uZ0luY2x1ZGUgYG5nSW5jbHVkZWB9IGFuZCB7QGxpbmsgbmdSb3V0ZS5uZ1ZpZXcgYG5nVmlld2B9LlxuICogRG9pbmcgdGhpcyBtaXNwbGFjZXMgdGhlIGFwcCB7QGxpbmsgbmcuJHJvb3RFbGVtZW50IGAkcm9vdEVsZW1lbnRgfSBhbmQgdGhlIGFwcCdzIHtAbGluayBhdXRvLiRpbmplY3RvciBpbmplY3Rvcn0sXG4gKiBjYXVzaW5nIGFuaW1hdGlvbnMgdG8gc3RvcCB3b3JraW5nIGFuZCBtYWtpbmcgdGhlIGluamVjdG9yIGluYWNjZXNzaWJsZSBmcm9tIG91dHNpZGUgdGhlIGFwcC5cbiAqIDwvZGl2PlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhZG9jdHlwZSBodG1sPlxuICogPGh0bWw+XG4gKiA8Ym9keT5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIldlbGNvbWVDb250cm9sbGVyXCI+XG4gKiAgIHt7Z3JlZXRpbmd9fVxuICogPC9kaXY+XG4gKlxuICogPHNjcmlwdCBzcmM9XCJhbmd1bGFyLmpzXCI+PC9zY3JpcHQ+XG4gKiA8c2NyaXB0PlxuICogICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2RlbW8nLCBbXSlcbiAqICAgLmNvbnRyb2xsZXIoJ1dlbGNvbWVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAkc2NvcGUuZ3JlZXRpbmcgPSAnV2VsY29tZSEnO1xuICogICB9KTtcbiAqICAgYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsnZGVtbyddKTtcbiAqIDwvc2NyaXB0PlxuICogPC9ib2R5PlxuICogPC9odG1sPlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IERPTSBlbGVtZW50IHdoaWNoIGlzIHRoZSByb290IG9mIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8U3RyaW5nfEZ1bmN0aW9ufEFycmF5Pj19IG1vZHVsZXMgYW4gYXJyYXkgb2YgbW9kdWxlcyB0byBsb2FkIGludG8gdGhlIGFwcGxpY2F0aW9uLlxuICogICAgIEVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgc2hvdWxkIGJlIHRoZSBuYW1lIG9mIGEgcHJlZGVmaW5lZCBtb2R1bGUgb3IgYSAoREkgYW5ub3RhdGVkKVxuICogICAgIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkIGJ5IHRoZSBpbmplY3RvciBhcyBhIGBjb25maWdgIGJsb2NrLlxuICogICAgIFNlZToge0BsaW5rIGFuZ3VsYXIubW9kdWxlIG1vZHVsZXN9XG4gKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBhbiBvYmplY3QgZm9yIGRlZmluaW5nIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIGFwcGxpY2F0aW9uLiBUaGVcbiAqICAgICBmb2xsb3dpbmcga2V5cyBhcmUgc3VwcG9ydGVkOlxuICpcbiAqICogYHN0cmljdERpYCAtIGRpc2FibGUgYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb24gZm9yIHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBpcyBtZWFudCB0b1xuICogICBhc3Npc3QgaW4gZmluZGluZyBidWdzIHdoaWNoIGJyZWFrIG1pbmlmaWVkIGNvZGUuIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gKlxuICogQHJldHVybnMge2F1dG8uJGluamVjdG9yfSBSZXR1cm5zIHRoZSBuZXdseSBjcmVhdGVkIGluamVjdG9yIGZvciB0aGlzIGFwcC5cbiAqL1xuZnVuY3Rpb24gYm9vdHN0cmFwKGVsZW1lbnQsIG1vZHVsZXMsIGNvbmZpZykge1xuICBpZiAoIWlzT2JqZWN0KGNvbmZpZykpIGNvbmZpZyA9IHt9O1xuICB2YXIgZGVmYXVsdENvbmZpZyA9IHtcbiAgICBzdHJpY3REaTogZmFsc2VcbiAgfTtcbiAgY29uZmlnID0gZXh0ZW5kKGRlZmF1bHRDb25maWcsIGNvbmZpZyk7XG4gIHZhciBkb0Jvb3RzdHJhcCA9IGZ1bmN0aW9uKCkge1xuICAgIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XG5cbiAgICBpZiAoZWxlbWVudC5pbmplY3RvcigpKSB7XG4gICAgICB2YXIgdGFnID0gKGVsZW1lbnRbMF0gPT09IHdpbmRvdy5kb2N1bWVudCkgPyAnZG9jdW1lbnQnIDogc3RhcnRpbmdUYWcoZWxlbWVudCk7XG4gICAgICAvLyBFbmNvZGUgYW5nbGUgYnJhY2tldHMgdG8gcHJldmVudCBpbnB1dCBmcm9tIGJlaW5nIHNhbml0aXplZCB0byBlbXB0eSBzdHJpbmcgIzg2ODMuXG4gICAgICB0aHJvdyBuZ01pbkVycihcbiAgICAgICAgICAnYnRzdHJwZCcsXG4gICAgICAgICAgJ0FwcCBhbHJlYWR5IGJvb3RzdHJhcHBlZCB3aXRoIHRoaXMgZWxlbWVudCBcXCd7MH1cXCcnLFxuICAgICAgICAgIHRhZy5yZXBsYWNlKC88LywnJmx0OycpLnJlcGxhY2UoLz4vLCcmZ3Q7JykpO1xuICAgIH1cblxuICAgIG1vZHVsZXMgPSBtb2R1bGVzIHx8IFtdO1xuICAgIG1vZHVsZXMudW5zaGlmdChbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcbiAgICAgICRwcm92aWRlLnZhbHVlKCckcm9vdEVsZW1lbnQnLCBlbGVtZW50KTtcbiAgICB9XSk7XG5cbiAgICBpZiAoY29uZmlnLmRlYnVnSW5mb0VuYWJsZWQpIHtcbiAgICAgIC8vIFB1c2hpbmcgc28gdGhhdCB0aGlzIG92ZXJyaWRlcyBgZGVidWdJbmZvRW5hYmxlZGAgc2V0dGluZyBkZWZpbmVkIGluIHVzZXIncyBgbW9kdWxlc2AuXG4gICAgICBtb2R1bGVzLnB1c2goWyckY29tcGlsZVByb3ZpZGVyJywgZnVuY3Rpb24oJGNvbXBpbGVQcm92aWRlcikge1xuICAgICAgICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQodHJ1ZSk7XG4gICAgICB9XSk7XG4gICAgfVxuXG4gICAgbW9kdWxlcy51bnNoaWZ0KCduZycpO1xuICAgIHZhciBpbmplY3RvciA9IGNyZWF0ZUluamVjdG9yKG1vZHVsZXMsIGNvbmZpZy5zdHJpY3REaSk7XG4gICAgaW5qZWN0b3IuaW52b2tlKFsnJHJvb3RTY29wZScsICckcm9vdEVsZW1lbnQnLCAnJGNvbXBpbGUnLCAnJGluamVjdG9yJyxcbiAgICAgICBmdW5jdGlvbiBib290c3RyYXBBcHBseShzY29wZSwgZWxlbWVudCwgY29tcGlsZSwgaW5qZWN0b3IpIHtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQuZGF0YSgnJGluamVjdG9yJywgaW5qZWN0b3IpO1xuICAgICAgICAgIGNvbXBpbGUoZWxlbWVudCkoc2NvcGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1dXG4gICAgKTtcbiAgICByZXR1cm4gaW5qZWN0b3I7XG4gIH07XG5cbiAgdmFyIE5HX0VOQUJMRV9ERUJVR19JTkZPID0gL15OR19FTkFCTEVfREVCVUdfSU5GTyEvO1xuICB2YXIgTkdfREVGRVJfQk9PVFNUUkFQID0gL15OR19ERUZFUl9CT09UU1RSQVAhLztcblxuICBpZiAod2luZG93ICYmIE5HX0VOQUJMRV9ERUJVR19JTkZPLnRlc3Qod2luZG93Lm5hbWUpKSB7XG4gICAgY29uZmlnLmRlYnVnSW5mb0VuYWJsZWQgPSB0cnVlO1xuICAgIHdpbmRvdy5uYW1lID0gd2luZG93Lm5hbWUucmVwbGFjZShOR19FTkFCTEVfREVCVUdfSU5GTywgJycpO1xuICB9XG5cbiAgaWYgKHdpbmRvdyAmJiAhTkdfREVGRVJfQk9PVFNUUkFQLnRlc3Qod2luZG93Lm5hbWUpKSB7XG4gICAgcmV0dXJuIGRvQm9vdHN0cmFwKCk7XG4gIH1cblxuICB3aW5kb3cubmFtZSA9IHdpbmRvdy5uYW1lLnJlcGxhY2UoTkdfREVGRVJfQk9PVFNUUkFQLCAnJyk7XG4gIGFuZ3VsYXIucmVzdW1lQm9vdHN0cmFwID0gZnVuY3Rpb24oZXh0cmFNb2R1bGVzKSB7XG4gICAgZm9yRWFjaChleHRyYU1vZHVsZXMsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgbW9kdWxlcy5wdXNoKG1vZHVsZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvQm9vdHN0cmFwKCk7XG4gIH07XG5cbiAgaWYgKGlzRnVuY3Rpb24oYW5ndWxhci5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCkpIHtcbiAgICBhbmd1bGFyLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIucmVsb2FkV2l0aERlYnVnSW5mb1xuICogQG1vZHVsZSBuZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgdGhpcyBmdW5jdGlvbiB0byByZWxvYWQgdGhlIGN1cnJlbnQgYXBwbGljYXRpb24gd2l0aCBkZWJ1ZyBpbmZvcm1hdGlvbiB0dXJuZWQgb24uXG4gKiBUaGlzIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBhIGNhbGwgdG8gYCRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZChmYWxzZSlgLlxuICpcbiAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkZWJ1Z0luZm9FbmFibGVkfSBmb3IgbW9yZS5cbiAqL1xuZnVuY3Rpb24gcmVsb2FkV2l0aERlYnVnSW5mbygpIHtcbiAgd2luZG93Lm5hbWUgPSAnTkdfRU5BQkxFX0RFQlVHX0lORk8hJyArIHdpbmRvdy5uYW1lO1xuICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59XG5cbi8qKlxuICogQG5hbWUgYW5ndWxhci5nZXRUZXN0YWJpbGl0eVxuICogQG1vZHVsZSBuZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIHRlc3RhYmlsaXR5IHNlcnZpY2UgZm9yIHRoZSBpbnN0YW5jZSBvZiBBbmd1bGFySlMgb24gdGhlIGdpdmVuXG4gKiBlbGVtZW50LlxuICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IERPTSBlbGVtZW50IHdoaWNoIGlzIHRoZSByb290IG9mIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0VGVzdGFiaWxpdHkocm9vdEVsZW1lbnQpIHtcbiAgdmFyIGluamVjdG9yID0gYW5ndWxhci5lbGVtZW50KHJvb3RFbGVtZW50KS5pbmplY3RvcigpO1xuICBpZiAoIWluamVjdG9yKSB7XG4gICAgdGhyb3cgbmdNaW5FcnIoJ3Rlc3QnLFxuICAgICAgJ25vIGluamVjdG9yIGZvdW5kIGZvciBlbGVtZW50IGFyZ3VtZW50IHRvIGdldFRlc3RhYmlsaXR5Jyk7XG4gIH1cbiAgcmV0dXJuIGluamVjdG9yLmdldCgnJCR0ZXN0YWJpbGl0eScpO1xufVxuXG52YXIgU05BS0VfQ0FTRV9SRUdFWFAgPSAvW0EtWl0vZztcbmZ1bmN0aW9uIHNuYWtlX2Nhc2UobmFtZSwgc2VwYXJhdG9yKSB7XG4gIHNlcGFyYXRvciA9IHNlcGFyYXRvciB8fCAnXyc7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoU05BS0VfQ0FTRV9SRUdFWFAsIGZ1bmN0aW9uKGxldHRlciwgcG9zKSB7XG4gICAgcmV0dXJuIChwb3MgPyBzZXBhcmF0b3IgOiAnJykgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcbiAgfSk7XG59XG5cbnZhciBiaW5kSlF1ZXJ5RmlyZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGJpbmRKUXVlcnkoKSB7XG4gIHZhciBvcmlnaW5hbENsZWFuRGF0YTtcblxuICBpZiAoYmluZEpRdWVyeUZpcmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gYmluZCB0byBqUXVlcnkgaWYgcHJlc2VudDtcbiAgdmFyIGpxTmFtZSA9IGpxKCk7XG4gIGpRdWVyeSA9IGlzVW5kZWZpbmVkKGpxTmFtZSkgPyB3aW5kb3cualF1ZXJ5IDogICAvLyB1c2UgalF1ZXJ5IChpZiBwcmVzZW50KVxuICAgICAgICAgICAhanFOYW1lICAgICAgICAgICAgID8gdW5kZWZpbmVkICAgICA6ICAgLy8gdXNlIGpxTGl0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93W2pxTmFtZV07ICAgLy8gdXNlIGpRdWVyeSBzcGVjaWZpZWQgYnkgYG5nSnFgXG5cbiAgLy8gVXNlIGpRdWVyeSBpZiBpdCBleGlzdHMgd2l0aCBwcm9wZXIgZnVuY3Rpb25hbGl0eSwgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gdXMuXG4gIC8vIEFuZ3VsYXJKUyAxLjIrIHJlcXVpcmVzIGpRdWVyeSAxLjcrIGZvciBvbigpL29mZigpIHN1cHBvcnQuXG4gIC8vIEFuZ3VsYXJKUyAxLjMrIHRlY2huaWNhbGx5IHJlcXVpcmVzIGF0IGxlYXN0IGpRdWVyeSAyLjErIGJ1dCBpdCBtYXkgd29yayB3aXRoIG9sZGVyXG4gIC8vIHZlcnNpb25zLiBJdCB3aWxsIG5vdCB3b3JrIGZvciBzdXJlIHdpdGggalF1ZXJ5IDwxLjcsIHRob3VnaC5cbiAgaWYgKGpRdWVyeSAmJiBqUXVlcnkuZm4ub24pIHtcbiAgICBqcUxpdGUgPSBqUXVlcnk7XG4gICAgZXh0ZW5kKGpRdWVyeS5mbiwge1xuICAgICAgc2NvcGU6IEpRTGl0ZVByb3RvdHlwZS5zY29wZSxcbiAgICAgIGlzb2xhdGVTY29wZTogSlFMaXRlUHJvdG90eXBlLmlzb2xhdGVTY29wZSxcbiAgICAgIGNvbnRyb2xsZXI6IC8qKiBAdHlwZSB7P30gKi8gKEpRTGl0ZVByb3RvdHlwZSkuY29udHJvbGxlcixcbiAgICAgIGluamVjdG9yOiBKUUxpdGVQcm90b3R5cGUuaW5qZWN0b3IsXG4gICAgICBpbmhlcml0ZWREYXRhOiBKUUxpdGVQcm90b3R5cGUuaW5oZXJpdGVkRGF0YVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGpxTGl0ZSA9IEpRTGl0ZTtcbiAgfVxuXG4gIC8vIEFsbCBub2RlcyByZW1vdmVkIGZyb20gdGhlIERPTSB2aWEgdmFyaW91cyBqcUxpdGUvalF1ZXJ5IEFQSXMgbGlrZSAucmVtb3ZlKClcbiAgLy8gYXJlIHBhc3NlZCB0aHJvdWdoIGpxTGl0ZS9qUXVlcnkuY2xlYW5EYXRhLiBNb25rZXktcGF0Y2ggdGhpcyBtZXRob2QgdG8gZmlyZVxuICAvLyB0aGUgJGRlc3Ryb3kgZXZlbnQgb24gYWxsIHJlbW92ZWQgbm9kZXMuXG4gIG9yaWdpbmFsQ2xlYW5EYXRhID0ganFMaXRlLmNsZWFuRGF0YTtcbiAganFMaXRlLmNsZWFuRGF0YSA9IGZ1bmN0aW9uKGVsZW1zKSB7XG4gICAgdmFyIGV2ZW50cztcbiAgICBmb3IgKHZhciBpID0gMCwgZWxlbTsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrKSB7XG4gICAgICBldmVudHMgPSBqcUxpdGUuX2RhdGEoZWxlbSkuZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHMuJGRlc3Ryb3kpIHtcbiAgICAgICAganFMaXRlKGVsZW0pLnRyaWdnZXJIYW5kbGVyKCckZGVzdHJveScpO1xuICAgICAgfVxuICAgIH1cbiAgICBvcmlnaW5hbENsZWFuRGF0YShlbGVtcyk7XG4gIH07XG5cbiAgYW5ndWxhci5lbGVtZW50ID0ganFMaXRlO1xuXG4gIC8vIFByZXZlbnQgZG91YmxlLXByb3h5aW5nLlxuICBiaW5kSlF1ZXJ5RmlyZWQgPSB0cnVlO1xufVxuXG4vKipcbiAqIHRocm93IGVycm9yIGlmIHRoZSBhcmd1bWVudCBpcyBmYWxzeS5cbiAqL1xuZnVuY3Rpb24gYXNzZXJ0QXJnKGFyZywgbmFtZSwgcmVhc29uKSB7XG4gIGlmICghYXJnKSB7XG4gICAgdGhyb3cgbmdNaW5FcnIoJ2FyZXEnLCAnQXJndW1lbnQgXFwnezB9XFwnIGlzIHsxfScsIChuYW1lIHx8ICc/JyksIChyZWFzb24gfHwgJ3JlcXVpcmVkJykpO1xuICB9XG4gIHJldHVybiBhcmc7XG59XG5cbmZ1bmN0aW9uIGFzc2VydEFyZ0ZuKGFyZywgbmFtZSwgYWNjZXB0QXJyYXlBbm5vdGF0aW9uKSB7XG4gIGlmIChhY2NlcHRBcnJheUFubm90YXRpb24gJiYgaXNBcnJheShhcmcpKSB7XG4gICAgICBhcmcgPSBhcmdbYXJnLmxlbmd0aCAtIDFdO1xuICB9XG5cbiAgYXNzZXJ0QXJnKGlzRnVuY3Rpb24oYXJnKSwgbmFtZSwgJ25vdCBhIGZ1bmN0aW9uLCBnb3QgJyArXG4gICAgICAoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnID8gYXJnLmNvbnN0cnVjdG9yLm5hbWUgfHwgJ09iamVjdCcgOiB0eXBlb2YgYXJnKSk7XG4gIHJldHVybiBhcmc7XG59XG5cbi8qKlxuICogdGhyb3cgZXJyb3IgaWYgdGhlIG5hbWUgZ2l2ZW4gaXMgaGFzT3duUHJvcGVydHlcbiAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSAgICB0aGUgbmFtZSB0byB0ZXN0XG4gKiBAcGFyYW0gIHtTdHJpbmd9IGNvbnRleHQgdGhlIGNvbnRleHQgaW4gd2hpY2ggdGhlIG5hbWUgaXMgdXNlZCwgc3VjaCBhcyBtb2R1bGUgb3IgZGlyZWN0aXZlXG4gKi9cbmZ1bmN0aW9uIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsIGNvbnRleHQpIHtcbiAgaWYgKG5hbWUgPT09ICdoYXNPd25Qcm9wZXJ0eScpIHtcbiAgICB0aHJvdyBuZ01pbkVycignYmFkbmFtZScsICdoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZScsIGNvbnRleHQpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSB2YWx1ZSBhY2Nlc3NpYmxlIGZyb20gdGhlIG9iamVjdCBieSBwYXRoLiBBbnkgdW5kZWZpbmVkIHRyYXZlcnNhbHMgYXJlIGlnbm9yZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogc3RhcnRpbmcgb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aCBwYXRoIHRvIHRyYXZlcnNlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtiaW5kRm5Ub1Njb3BlPXRydWVdXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB2YWx1ZSBhcyBhY2Nlc3NpYmxlIGJ5IHBhdGhcbiAqL1xuLy9UT0RPKG1pc2tvKTogdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZW1vdmVkXG5mdW5jdGlvbiBnZXR0ZXIob2JqLCBwYXRoLCBiaW5kRm5Ub1Njb3BlKSB7XG4gIGlmICghcGF0aCkgcmV0dXJuIG9iajtcbiAgdmFyIGtleXMgPSBwYXRoLnNwbGl0KCcuJyk7XG4gIHZhciBrZXk7XG4gIHZhciBsYXN0SW5zdGFuY2UgPSBvYmo7XG4gIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAga2V5ID0ga2V5c1tpXTtcbiAgICBpZiAob2JqKSB7XG4gICAgICBvYmogPSAobGFzdEluc3RhbmNlID0gb2JqKVtrZXldO1xuICAgIH1cbiAgfVxuICBpZiAoIWJpbmRGblRvU2NvcGUgJiYgaXNGdW5jdGlvbihvYmopKSB7XG4gICAgcmV0dXJuIGJpbmQobGFzdEluc3RhbmNlLCBvYmopO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBET00gc2libGluZ3MgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3Qgbm9kZSBpbiB0aGUgZ2l2ZW4gYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBsaWtlIG9iamVjdFxuICogQHJldHVybnMge0FycmF5fSB0aGUgaW5wdXR0ZWQgb2JqZWN0IG9yIGEganFMaXRlIGNvbGxlY3Rpb24gY29udGFpbmluZyB0aGUgbm9kZXNcbiAqL1xuZnVuY3Rpb24gZ2V0QmxvY2tOb2Rlcyhub2Rlcykge1xuICAvLyBUT0RPKHBlcmYpOiB1cGRhdGUgYG5vZGVzYCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IG9iamVjdD9cbiAgdmFyIG5vZGUgPSBub2Rlc1swXTtcbiAgdmFyIGVuZE5vZGUgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcbiAgdmFyIGJsb2NrTm9kZXM7XG5cbiAgZm9yICh2YXIgaSA9IDE7IG5vZGUgIT09IGVuZE5vZGUgJiYgKG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKTsgaSsrKSB7XG4gICAgaWYgKGJsb2NrTm9kZXMgfHwgbm9kZXNbaV0gIT09IG5vZGUpIHtcbiAgICAgIGlmICghYmxvY2tOb2Rlcykge1xuICAgICAgICBibG9ja05vZGVzID0ganFMaXRlKHNsaWNlLmNhbGwobm9kZXMsIDAsIGkpKTtcbiAgICAgIH1cbiAgICAgIGJsb2NrTm9kZXMucHVzaChub2RlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmxvY2tOb2RlcyB8fCBub2Rlcztcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IHdpdGhvdXQgYSBwcm90b3R5cGUuIFRoaXMgb2JqZWN0IGlzIHVzZWZ1bCBmb3IgbG9va3VwIHdpdGhvdXQgaGF2aW5nIHRvXG4gKiBndWFyZCBhZ2FpbnN0IHByb3RvdHlwaWNhbGx5IGluaGVyaXRlZCBwcm9wZXJ0aWVzIHZpYSBoYXNPd25Qcm9wZXJ0eS5cbiAqXG4gKiBSZWxhdGVkIG1pY3JvLWJlbmNobWFya3M6XG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL29iamVjdC1jcmVhdGUyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL3Byb3RvLW1hcC1sb29rdXAvMlxuICogLSBodHRwOi8vanNwZXJmLmNvbS9mb3ItaW4tdnMtb2JqZWN0LWtleXMyXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTWFwKCkge1xuICByZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7IC8vIG51bGwgfHwgdW5kZWZpbmVkXG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICB2YWx1ZSA9ICcnICsgdmFsdWU7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKGhhc0N1c3RvbVRvU3RyaW5nKHZhbHVlKSAmJiAhaXNBcnJheSh2YWx1ZSkgJiYgIWlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0b0pzb24odmFsdWUpO1xuICAgICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG52YXIgTk9ERV9UWVBFX0VMRU1FTlQgPSAxO1xudmFyIE5PREVfVFlQRV9BVFRSSUJVVEUgPSAyO1xudmFyIE5PREVfVFlQRV9URVhUID0gMztcbnZhciBOT0RFX1RZUEVfQ09NTUVOVCA9IDg7XG52YXIgTk9ERV9UWVBFX0RPQ1VNRU5UID0gOTtcbnZhciBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQgPSAxMTtcblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgYW5ndWxhci5Nb2R1bGVcbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEludGVyZmFjZSBmb3IgY29uZmlndXJpbmcgQW5ndWxhckpTIHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfS5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cE1vZHVsZUxvYWRlcih3aW5kb3cpIHtcblxuICB2YXIgJGluamVjdG9yTWluRXJyID0gbWluRXJyKCckaW5qZWN0b3InKTtcbiAgdmFyIG5nTWluRXJyID0gbWluRXJyKCduZycpO1xuXG4gIGZ1bmN0aW9uIGVuc3VyZShvYmosIG5hbWUsIGZhY3RvcnkpIHtcbiAgICByZXR1cm4gb2JqW25hbWVdIHx8IChvYmpbbmFtZV0gPSBmYWN0b3J5KCkpO1xuICB9XG5cbiAgdmFyIGFuZ3VsYXIgPSBlbnN1cmUod2luZG93LCAnYW5ndWxhcicsIE9iamVjdCk7XG5cbiAgLy8gV2UgbmVlZCB0byBleHBvc2UgYGFuZ3VsYXIuJCRtaW5FcnJgIHRvIG1vZHVsZXMgc3VjaCBhcyBgbmdSZXNvdXJjZWAgdGhhdCByZWZlcmVuY2UgaXQgZHVyaW5nIGJvb3RzdHJhcFxuICBhbmd1bGFyLiQkbWluRXJyID0gYW5ndWxhci4kJG1pbkVyciB8fCBtaW5FcnI7XG5cbiAgcmV0dXJuIGVuc3VyZShhbmd1bGFyLCAnbW9kdWxlJywgZnVuY3Rpb24oKSB7XG4gICAgLyoqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgYW5ndWxhci5Nb2R1bGU+fSAqL1xuICAgIHZhciBtb2R1bGVzID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICAgKiBAbmFtZSBhbmd1bGFyLm1vZHVsZVxuICAgICAqIEBtb2R1bGUgbmdcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIFRoZSBgYW5ndWxhci5tb2R1bGVgIGlzIGEgZ2xvYmFsIHBsYWNlIGZvciBjcmVhdGluZywgcmVnaXN0ZXJpbmcgYW5kIHJldHJpZXZpbmcgQW5ndWxhckpTXG4gICAgICogbW9kdWxlcy5cbiAgICAgKiBBbGwgbW9kdWxlcyAoQW5ndWxhckpTIGNvcmUgb3IgM3JkIHBhcnR5KSB0aGF0IHNob3VsZCBiZSBhdmFpbGFibGUgdG8gYW4gYXBwbGljYXRpb24gbXVzdCBiZVxuICAgICAqIHJlZ2lzdGVyZWQgdXNpbmcgdGhpcyBtZWNoYW5pc20uXG4gICAgICpcbiAgICAgKiBQYXNzaW5nIG9uZSBhcmd1bWVudCByZXRyaWV2ZXMgYW4gZXhpc3Rpbmcge0BsaW5rIGFuZ3VsYXIuTW9kdWxlfSxcbiAgICAgKiB3aGVyZWFzIHBhc3NpbmcgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCBjcmVhdGVzIGEgbmV3IHtAbGluayBhbmd1bGFyLk1vZHVsZX1cbiAgICAgKlxuICAgICAqXG4gICAgICogIyBNb2R1bGVcbiAgICAgKlxuICAgICAqIEEgbW9kdWxlIGlzIGEgY29sbGVjdGlvbiBvZiBzZXJ2aWNlcywgZGlyZWN0aXZlcywgY29udHJvbGxlcnMsIGZpbHRlcnMsIGFuZCBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uLlxuICAgICAqIGBhbmd1bGFyLm1vZHVsZWAgaXMgdXNlZCB0byBjb25maWd1cmUgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlXG4gICAgICogdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ215TW9kdWxlJywgW10pO1xuICAgICAqXG4gICAgICogLy8gcmVnaXN0ZXIgYSBuZXcgc2VydmljZVxuICAgICAqIG15TW9kdWxlLnZhbHVlKCdhcHBOYW1lJywgJ015Q29vbEFwcCcpO1xuICAgICAqXG4gICAgICogLy8gY29uZmlndXJlIGV4aXN0aW5nIHNlcnZpY2VzIGluc2lkZSBpbml0aWFsaXphdGlvbiBibG9ja3MuXG4gICAgICogbXlNb2R1bGUuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAqICAgLy8gQ29uZmlndXJlIGV4aXN0aW5nIHByb3ZpZGVyc1xuICAgICAqICAgJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgnIScpO1xuICAgICAqIH1dKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZW4geW91IGNhbiBjcmVhdGUgYW4gaW5qZWN0b3IgYW5kIGxvYWQgeW91ciBtb2R1bGVzIGxpa2UgdGhpczpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIGluamVjdG9yID0gYW5ndWxhci5pbmplY3RvcihbJ25nJywgJ215TW9kdWxlJ10pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBIb3dldmVyIGl0J3MgbW9yZSBsaWtlbHkgdGhhdCB5b3UnbGwganVzdCB1c2VcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQXBwIG5nQXBwfSBvclxuICAgICAqIHtAbGluayBhbmd1bGFyLmJvb3RzdHJhcH0gdG8gc2ltcGxpZnkgdGhpcyBwcm9jZXNzIGZvciB5b3UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIG1vZHVsZSB0byBjcmVhdGUgb3IgcmV0cmlldmUuXG4gICAgICogQHBhcmFtIHshQXJyYXkuPHN0cmluZz49fSByZXF1aXJlcyBJZiBzcGVjaWZpZWQgdGhlbiBuZXcgbW9kdWxlIGlzIGJlaW5nIGNyZWF0ZWQuIElmXG4gICAgICogICAgICAgIHVuc3BlY2lmaWVkIHRoZW4gdGhlIG1vZHVsZSBpcyBiZWluZyByZXRyaWV2ZWQgZm9yIGZ1cnRoZXIgY29uZmlndXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gY29uZmlnRm4gT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmdW5jdGlvbiBmb3IgdGhlIG1vZHVsZS4gU2FtZSBhc1xuICAgICAqICAgICAgICB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjY29uZmlnIE1vZHVsZSNjb25maWcoKX0uXG4gICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfSBuZXcgbW9kdWxlIHdpdGggdGhlIHtAbGluayBhbmd1bGFyLk1vZHVsZX0gYXBpLlxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBtb2R1bGUobmFtZSwgcmVxdWlyZXMsIGNvbmZpZ0ZuKSB7XG5cbiAgICAgIHZhciBpbmZvID0ge307XG5cbiAgICAgIHZhciBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uKG5hbWUsIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdoYXNPd25Qcm9wZXJ0eScpIHtcbiAgICAgICAgICB0aHJvdyBuZ01pbkVycignYmFkbmFtZScsICdoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZScsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnbW9kdWxlJyk7XG4gICAgICBpZiAocmVxdWlyZXMgJiYgbW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBtb2R1bGVzW25hbWVdID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbnN1cmUobW9kdWxlcywgbmFtZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghcmVxdWlyZXMpIHtcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ25vbW9kJywgJ01vZHVsZSBcXCd7MH1cXCcgaXMgbm90IGF2YWlsYWJsZSEgWW91IGVpdGhlciBtaXNzcGVsbGVkICcgK1xuICAgICAgICAgICAgICd0aGUgbW9kdWxlIG5hbWUgb3IgZm9yZ290IHRvIGxvYWQgaXQuIElmIHJlZ2lzdGVyaW5nIGEgbW9kdWxlIGVuc3VyZSB0aGF0IHlvdSAnICtcbiAgICAgICAgICAgICAnc3BlY2lmeSB0aGUgZGVwZW5kZW5jaWVzIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuJywgbmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogQHR5cGUgeyFBcnJheS48QXJyYXkuPCo+Pn0gKi9cbiAgICAgICAgdmFyIGludm9rZVF1ZXVlID0gW107XG5cbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXkuPEZ1bmN0aW9uPn0gKi9cbiAgICAgICAgdmFyIGNvbmZpZ0Jsb2NrcyA9IFtdO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5LjxGdW5jdGlvbj59ICovXG4gICAgICAgIHZhciBydW5CbG9ja3MgPSBbXTtcblxuICAgICAgICB2YXIgY29uZmlnID0gaW52b2tlTGF0ZXIoJyRpbmplY3RvcicsICdpbnZva2UnLCAncHVzaCcsIGNvbmZpZ0Jsb2Nrcyk7XG5cbiAgICAgICAgLyoqIEB0eXBlIHthbmd1bGFyLk1vZHVsZX0gKi9cbiAgICAgICAgdmFyIG1vZHVsZUluc3RhbmNlID0ge1xuICAgICAgICAgIC8vIFByaXZhdGUgc3RhdGVcbiAgICAgICAgICBfaW52b2tlUXVldWU6IGludm9rZVF1ZXVlLFxuICAgICAgICAgIF9jb25maWdCbG9ja3M6IGNvbmZpZ0Jsb2NrcyxcbiAgICAgICAgICBfcnVuQmxvY2tzOiBydW5CbG9ja3MsXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjaW5mb1xuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gaW5mbyBJbmZvcm1hdGlvbiBhYm91dCB0aGUgbW9kdWxlXG4gICAgICAgICAgICogQHJldHVybnMge09iamVjdHxNb2R1bGV9IFRoZSBjdXJyZW50IGluZm8gb2JqZWN0IGZvciB0aGlzIG1vZHVsZSBpZiBjYWxsZWQgYXMgYSBnZXR0ZXIsXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGB0aGlzYCBpZiBjYWxsZWQgYXMgYSBzZXR0ZXIuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBSZWFkIGFuZCB3cml0ZSBjdXN0b20gaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBtb2R1bGUuXG4gICAgICAgICAgICogRm9yIGV4YW1wbGUgeW91IGNvdWxkIHB1dCB0aGUgdmVyc2lvbiBvZiB0aGUgbW9kdWxlIGluIGhlcmUuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgICAqIGFuZ3VsYXIubW9kdWxlKCdteU1vZHVsZScsIFtdKS5pbmZvKHsgdmVyc2lvbjogJzEuMC4wJyB9KTtcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRoZSB2ZXJzaW9uIGNvdWxkIHRoZW4gYmUgcmVhZCBiYWNrIG91dCBieSBhY2Nlc3NpbmcgdGhlIG1vZHVsZSBlbHNld2hlcmU6XG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKiB2YXIgdmVyc2lvbiA9IGFuZ3VsYXIubW9kdWxlKCdteU1vZHVsZScpLmluZm8oKS52ZXJzaW9uO1xuICAgICAgICAgICAqIGBgYFxuICAgICAgICAgICAqXG4gICAgICAgICAgICogWW91IGNhbiBhbHNvIHJldHJpZXZlIHRoaXMgaW5mb3JtYXRpb24gZHVyaW5nIHJ1bnRpbWUgdmlhIHRoZVxuICAgICAgICAgICAqIHtAbGluayAkaW5qZWN0b3IjbW9kdWxlcyBgJGluamVjdG9yLm1vZHVsZXNgfSBwcm9wZXJ0eTpcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIGBgYGpzXG4gICAgICAgICAgICogdmFyIHZlcnNpb24gPSAkaW5qZWN0b3IubW9kdWxlc1snbXlNb2R1bGUnXS5pbmZvKCkudmVyc2lvbjtcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpbmZvOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHRocm93IG5nTWluRXJyKCdhb2JqJywgJ0FyZ3VtZW50IFxcJ3swfVxcJyBtdXN0IGJlIGFuIG9iamVjdCcsICd2YWx1ZScpO1xuICAgICAgICAgICAgICBpbmZvID0gdmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3JlcXVpcmVzXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogSG9sZHMgdGhlIGxpc3Qgb2YgbW9kdWxlcyB3aGljaCB0aGUgaW5qZWN0b3Igd2lsbCBsb2FkIGJlZm9yZSB0aGUgY3VycmVudCBtb2R1bGUgaXNcbiAgICAgICAgICAgKiBsb2FkZWQuXG4gICAgICAgICAgICovXG4gICAgICAgICAgcmVxdWlyZXM6IHJlcXVpcmVzLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjbmFtZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIE5hbWUgb2YgdGhlIG1vZHVsZS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBuYW1lOiBuYW1lLFxuXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjcHJvdmlkZXJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdmlkZXJUeXBlIENvbnN0cnVjdGlvbiBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIHRoZVxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNwcm92aWRlciAkcHJvdmlkZS5wcm92aWRlcigpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBwcm92aWRlcjogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckcHJvdmlkZScsICdwcm92aWRlcicpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2ZhY3RvcnlcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdmlkZXJGdW5jdGlvbiBGdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIHRoZSBzZXJ2aWNlLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgZmFjdG9yeTogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckcHJvdmlkZScsICdmYWN0b3J5JyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjc2VydmljZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBBIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnN0YW50aWF0ZWQuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2UgJHByb3ZpZGUuc2VydmljZSgpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBzZXJ2aWNlOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRwcm92aWRlJywgJ3NlcnZpY2UnKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSN2YWx1ZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBTZXJ2aWNlIGluc3RhbmNlIG9iamVjdC5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgJHByb3ZpZGUudmFsdWUoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgdmFsdWU6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICd2YWx1ZScpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbnN0YW50XG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIGNvbnN0YW50IG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBDb25zdGFudCB2YWx1ZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBCZWNhdXNlIHRoZSBjb25zdGFudHMgYXJlIGZpeGVkLCB0aGV5IGdldCBhcHBsaWVkIGJlZm9yZSBvdGhlciBwcm92aWRlIG1ldGhvZHMuXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI2NvbnN0YW50ICRwcm92aWRlLmNvbnN0YW50KCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGNvbnN0YW50OiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAnY29uc3RhbnQnLCAndW5zaGlmdCcpLFxuXG4gICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNkZWNvcmF0b3JcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gZGVjb3JhdGUuXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGVjb3JGbiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBzZXJ2aWNlIG5lZWRzIHRvIGJlXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZCByZXR1cm4gdGhlIGRlY29yYXRlZCBzZXJ2aWNlIGluc3RhbmNlLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNkZWNvcmF0b3IgJHByb3ZpZGUuZGVjb3JhdG9yKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGRlY29yYXRvcjogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckcHJvdmlkZScsICdkZWNvcmF0b3InLCBjb25maWdCbG9ja3MpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2FuaW1hdGlvblxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBhbmltYXRpb24gbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFuaW1hdGlvbkZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIGFuXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiAqKk5PVEUqKjogYW5pbWF0aW9ucyB0YWtlIGVmZmVjdCBvbmx5IGlmIHRoZSAqKm5nQW5pbWF0ZSoqIG1vZHVsZSBpcyBsb2FkZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIERlZmluZXMgYW4gYW5pbWF0aW9uIGhvb2sgdGhhdCBjYW4gYmUgbGF0ZXIgdXNlZCB3aXRoXG4gICAgICAgICAgICoge0BsaW5rICRhbmltYXRlICRhbmltYXRlfSBzZXJ2aWNlIGFuZCBkaXJlY3RpdmVzIHRoYXQgdXNlIHRoaXMgc2VydmljZS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIGBgYGpzXG4gICAgICAgICAgICogbW9kdWxlLmFuaW1hdGlvbignLmFuaW1hdGlvbi1uYW1lJywgZnVuY3Rpb24oJGluamVjdDEsICRpbmplY3QyKSB7XG4gICAgICAgICAgICogICByZXR1cm4ge1xuICAgICAgICAgICAqICAgICBldmVudE5hbWUgOiBmdW5jdGlvbihlbGVtZW50LCBkb25lKSB7XG4gICAgICAgICAgICogICAgICAgLy9jb2RlIHRvIHJ1biB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICogICAgICAgLy9vbmNlIGNvbXBsZXRlLCB0aGVuIHJ1biBkb25lKClcbiAgICAgICAgICAgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gY2FuY2VsbGF0aW9uRnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAqICAgICAgICAgLy9jb2RlIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICogICAgICAgfVxuICAgICAgICAgICAqICAgICB9XG4gICAgICAgICAgICogICB9XG4gICAgICAgICAgICogfSlcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGFuaW1hdGVQcm92aWRlciNyZWdpc3RlciAkYW5pbWF0ZVByb3ZpZGVyLnJlZ2lzdGVyKCl9IGFuZFxuICAgICAgICAgICAqIHtAbGluayBuZ0FuaW1hdGUgbmdBbmltYXRlIG1vZHVsZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICovXG4gICAgICAgICAgYW5pbWF0aW9uOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRhbmltYXRlUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNmaWx0ZXJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRmlsdGVyIG5hbWUgLSB0aGlzIG11c3QgYmUgYSB2YWxpZCBBbmd1bGFySlMgZXhwcmVzc2lvbiBpZGVudGlmaWVyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmlsdGVyRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2YgZmlsdGVyLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGZpbHRlclByb3ZpZGVyI3JlZ2lzdGVyICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcigpfS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAgICAgICAgICogKipOb3RlOioqIEZpbHRlciBuYW1lcyBtdXN0IGJlIHZhbGlkIEFuZ3VsYXJKUyB7QGxpbmsgZXhwcmVzc2lvbn0gaWRlbnRpZmllcnMsIHN1Y2ggYXMgYHVwcGVyY2FzZWAgb3IgYG9yZGVyQnlgLlxuICAgICAgICAgICAqIE5hbWVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGh5cGhlbnMgYW5kIGRvdHMsIGFyZSBub3QgYWxsb3dlZC4gSWYgeW91IHdpc2ggdG8gbmFtZXNwYWNlXG4gICAgICAgICAgICogeW91ciBmaWx0ZXJzLCB0aGVuIHlvdSBjYW4gdXNlIGNhcGl0YWxpemF0aW9uIChgbXlhcHBTdWJzZWN0aW9uRmlsdGVyeGApIG9yIHVuZGVyc2NvcmVzXG4gICAgICAgICAgICogKGBteWFwcF9zdWJzZWN0aW9uX2ZpbHRlcnhgKS5cbiAgICAgICAgICAgKiA8L2Rpdj5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBmaWx0ZXI6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJGZpbHRlclByb3ZpZGVyJywgJ3JlZ2lzdGVyJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29udHJvbGxlclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgQ29udHJvbGxlciBuYW1lLCBvciBhbiBvYmplY3QgbWFwIG9mIGNvbnRyb2xsZXJzIHdoZXJlIHRoZVxuICAgICAgICAgICAqICAgIGtleXMgYXJlIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbnN0cnVjdG9ycy5cbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbnRyb2xsZXJQcm92aWRlciNyZWdpc3RlciAkY29udHJvbGxlclByb3ZpZGVyLnJlZ2lzdGVyKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGNvbnRyb2xsZXI6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJGNvbnRyb2xsZXJQcm92aWRlcicsICdyZWdpc3RlcicpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2RpcmVjdGl2ZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgRGlyZWN0aXZlIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgZGlyZWN0aXZlcyB3aGVyZSB0aGVcbiAgICAgICAgICAgKiAgICBrZXlzIGFyZSB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmYWN0b3JpZXMuXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGlyZWN0aXZlRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2ZcbiAgICAgICAgICAgKiBkaXJlY3RpdmVzLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgZGlyZWN0aXZlOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRjb21waWxlUHJvdmlkZXInLCAnZGlyZWN0aXZlJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29tcG9uZW50XG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgaW4gY2FtZWxDYXNlIChpLmUuIGBteUNvbXBgIHdoaWNoIHdpbGwgbWF0Y2ggYDxteS1jb21wPmApLFxuICAgICAgICAgICAqICAgIG9yIGFuIG9iamVjdCBtYXAgb2YgY29tcG9uZW50cyB3aGVyZSB0aGUga2V5cyBhcmUgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29tcG9uZW50IGRlZmluaXRpb24gb2JqZWN0cy5cbiAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb21wb25lbnQgZGVmaW5pdGlvbiBvYmplY3QgKGEgc2ltcGxpZmllZFxuICAgICAgICAgICAqICAgIHtAbGluayBuZy4kY29tcGlsZSNkaXJlY3RpdmUtZGVmaW5pdGlvbi1vYmplY3QgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0fSlcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNjb21wb25lbnQgJGNvbXBpbGVQcm92aWRlci5jb21wb25lbnQoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgY29tcG9uZW50OiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRjb21waWxlUHJvdmlkZXInLCAnY29tcG9uZW50JyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29uZmlnXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmZpZ0ZuIEV4ZWN1dGUgdGhpcyBmdW5jdGlvbiBvbiBtb2R1bGUgbG9hZC4gVXNlZnVsIGZvciBzZXJ2aWNlXG4gICAgICAgICAgICogICAgY29uZmlndXJhdGlvbi5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gY29uZmlndXJlIHNlcnZpY2VzIGJ5IGluamVjdGluZyB0aGVpclxuICAgICAgICAgICAqIHtAbGluayBhbmd1bGFyLk1vZHVsZSNwcm92aWRlciBgcHJvdmlkZXJzYH0sIGUuZy4gZm9yIGFkZGluZyByb3V0ZXMgdG8gdGhlXG4gICAgICAgICAgICoge0BsaW5rIG5nUm91dGUuJHJvdXRlUHJvdmlkZXIgJHJvdXRlUHJvdmlkZXJ9LlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogTm90ZSB0aGF0IHlvdSBjYW4gb25seSBpbmplY3Qge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI3Byb3ZpZGVyIGBwcm92aWRlcnNgfSBhbmRcbiAgICAgICAgICAgKiB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjY29uc3RhbnQgYGNvbnN0YW50c2B9IGludG8gdGhpcyBmdW5jdGlvbi5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEZvciBtb3JlIGFib3V0IGhvdyB0byBjb25maWd1cmUgc2VydmljZXMsIHNlZVxuICAgICAgICAgICAqIHtAbGluayBwcm92aWRlcnMjcHJvdmlkZXItcmVjaXBlIFByb3ZpZGVyIFJlY2lwZX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjcnVuXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluaXRpYWxpemF0aW9uRm4gRXhlY3V0ZSB0aGlzIGZ1bmN0aW9uIGFmdGVyIGluamVjdG9yIGNyZWF0aW9uLlxuICAgICAgICAgICAqICAgIFVzZWZ1bCBmb3IgYXBwbGljYXRpb24gaW5pdGlhbGl6YXRpb24uXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHJlZ2lzdGVyIHdvcmsgd2hpY2ggc2hvdWxkIGJlIHBlcmZvcm1lZCB3aGVuIHRoZSBpbmplY3RvciBpcyBkb25lXG4gICAgICAgICAgICogbG9hZGluZyBhbGwgbW9kdWxlcy5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBydW46IGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgICAgICAgICBydW5CbG9ja3MucHVzaChibG9jayk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGNvbmZpZ0ZuKSB7XG4gICAgICAgICAgY29uZmlnKGNvbmZpZ0ZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtb2R1bGVJbnN0YW5jZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmc9fSBpbnNlcnRNZXRob2RcbiAgICAgICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTGF0ZXIocHJvdmlkZXIsIG1ldGhvZCwgaW5zZXJ0TWV0aG9kLCBxdWV1ZSkge1xuICAgICAgICAgIGlmICghcXVldWUpIHF1ZXVlID0gaW52b2tlUXVldWU7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcXVldWVbaW5zZXJ0TWV0aG9kIHx8ICdwdXNoJ10oW3Byb3ZpZGVyLCBtZXRob2QsIGFyZ3VtZW50c10pO1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZUluc3RhbmNlO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKHByb3ZpZGVyLCBtZXRob2QsIHF1ZXVlKSB7XG4gICAgICAgICAgaWYgKCFxdWV1ZSkgcXVldWUgPSBpbnZva2VRdWV1ZTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjaXBlTmFtZSwgZmFjdG9yeUZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZmFjdG9yeUZ1bmN0aW9uICYmIGlzRnVuY3Rpb24oZmFjdG9yeUZ1bmN0aW9uKSkgZmFjdG9yeUZ1bmN0aW9uLiQkbW9kdWxlTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKFtwcm92aWRlciwgbWV0aG9kLCBhcmd1bWVudHNdKTtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVJbnN0YW5jZTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxufVxuXG4vKiBnbG9iYWwgc2hhbGxvd0NvcHk6IHRydWUgKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgc2hhbGxvdyBjb3B5IG9mIGFuIG9iamVjdCwgYW4gYXJyYXkgb3IgYSBwcmltaXRpdmUuXG4gKlxuICogQXNzdW1lcyB0aGF0IHRoZXJlIGFyZSBubyBwcm90byBwcm9wZXJ0aWVzIGZvciBvYmplY3RzLlxuICovXG5mdW5jdGlvbiBzaGFsbG93Q29weShzcmMsIGRzdCkge1xuICBpZiAoaXNBcnJheShzcmMpKSB7XG4gICAgZHN0ID0gZHN0IHx8IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3JjLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGRzdFtpXSA9IHNyY1tpXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc3JjKSkge1xuICAgIGRzdCA9IGRzdCB8fCB7fTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICAgIGlmICghKGtleS5jaGFyQXQoMCkgPT09ICckJyAmJiBrZXkuY2hhckF0KDEpID09PSAnJCcpKSB7XG4gICAgICAgIGRzdFtrZXldID0gc3JjW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRzdCB8fCBzcmM7XG59XG5cbi8qIGV4cG9ydGVkIHRvRGVidWdTdHJpbmcgKi9cblxuZnVuY3Rpb24gc2VyaWFsaXplT2JqZWN0KG9iaiwgbWF4RGVwdGgpIHtcbiAgdmFyIHNlZW4gPSBbXTtcblxuICAvLyBUaGVyZSBpcyBubyBkaXJlY3Qgd2F5IHRvIHN0cmluZ2lmeSBvYmplY3QgdW50aWwgcmVhY2hpbmcgYSBzcGVjaWZpYyBkZXB0aFxuICAvLyBhbmQgYSB2ZXJ5IGRlZXAgb2JqZWN0IGNhbiBjYXVzZSBhIHBlcmZvcm1hbmNlIGlzc3VlLCBzbyB3ZSBjb3B5IHRoZSBvYmplY3RcbiAgLy8gYmFzZWQgb24gdGhpcyBzcGVjaWZpYyBkZXB0aCBhbmQgdGhlbiBzdHJpbmdpZnkgaXQuXG4gIGlmIChpc1ZhbGlkT2JqZWN0TWF4RGVwdGgobWF4RGVwdGgpKSB7XG4gICAgLy8gVGhpcyBmaWxlIGlzIGFsc28gaW5jbHVkZWQgaW4gYGFuZ3VsYXItbG9hZGVyYCwgc28gYGNvcHkoKWAgbWlnaHQgbm90IGFsd2F5cyBiZSBhdmFpbGFibGUgaW5cbiAgICAvLyB0aGUgY2xvc3VyZS4gVGhlcmVmb3JlLCBpdCBpcyBsYXppbHkgcmV0cmlldmVkIGFzIGBhbmd1bGFyLmNvcHkoKWAgd2hlbiBuZWVkZWQuXG4gICAgb2JqID0gYW5ndWxhci5jb3B5KG9iaiwgbnVsbCwgbWF4RGVwdGgpO1xuICB9XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgdmFsID0gdG9Kc29uUmVwbGFjZXIoa2V5LCB2YWwpO1xuICAgIGlmIChpc09iamVjdCh2YWwpKSB7XG5cbiAgICAgIGlmIChzZWVuLmluZGV4T2YodmFsKSA+PSAwKSByZXR1cm4gJy4uLic7XG5cbiAgICAgIHNlZW4ucHVzaCh2YWwpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdG9EZWJ1Z1N0cmluZyhvYmosIG1heERlcHRoKSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG9iai50b1N0cmluZygpLnJlcGxhY2UoLyBcXHtbXFxzXFxTXSokLywgJycpO1xuICB9IGVsc2UgaWYgKGlzVW5kZWZpbmVkKG9iaikpIHtcbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iaiAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc2VyaWFsaXplT2JqZWN0KG9iaiwgbWF4RGVwdGgpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qIGdsb2JhbCBhbmd1bGFyTW9kdWxlOiB0cnVlLFxuICB2ZXJzaW9uOiB0cnVlLFxuXG4gICRDb21waWxlUHJvdmlkZXIsXG5cbiAgaHRtbEFuY2hvckRpcmVjdGl2ZSxcbiAgaW5wdXREaXJlY3RpdmUsXG4gIGlucHV0RGlyZWN0aXZlLFxuICBmb3JtRGlyZWN0aXZlLFxuICBzY3JpcHREaXJlY3RpdmUsXG4gIHNlbGVjdERpcmVjdGl2ZSxcbiAgb3B0aW9uRGlyZWN0aXZlLFxuICBuZ0JpbmREaXJlY3RpdmUsXG4gIG5nQmluZEh0bWxEaXJlY3RpdmUsXG4gIG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLFxuICBuZ0NsYXNzRGlyZWN0aXZlLFxuICBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxcbiAgbmdDbGFzc09kZERpcmVjdGl2ZSxcbiAgbmdDbG9ha0RpcmVjdGl2ZSxcbiAgbmdDb250cm9sbGVyRGlyZWN0aXZlLFxuICBuZ0Zvcm1EaXJlY3RpdmUsXG4gIG5nSGlkZURpcmVjdGl2ZSxcbiAgbmdJZkRpcmVjdGl2ZSxcbiAgbmdJbmNsdWRlRGlyZWN0aXZlLFxuICBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZSxcbiAgbmdJbml0RGlyZWN0aXZlLFxuICBuZ05vbkJpbmRhYmxlRGlyZWN0aXZlLFxuICBuZ1BsdXJhbGl6ZURpcmVjdGl2ZSxcbiAgbmdSZWZEaXJlY3RpdmUsXG4gIG5nUmVwZWF0RGlyZWN0aXZlLFxuICBuZ1Nob3dEaXJlY3RpdmUsXG4gIG5nU3R5bGVEaXJlY3RpdmUsXG4gIG5nU3dpdGNoRGlyZWN0aXZlLFxuICBuZ1N3aXRjaFdoZW5EaXJlY3RpdmUsXG4gIG5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxcbiAgbmdPcHRpb25zRGlyZWN0aXZlLFxuICBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUsXG4gIG5nTW9kZWxEaXJlY3RpdmUsXG4gIG5nTGlzdERpcmVjdGl2ZSxcbiAgbmdDaGFuZ2VEaXJlY3RpdmUsXG4gIHBhdHRlcm5EaXJlY3RpdmUsXG4gIHBhdHRlcm5EaXJlY3RpdmUsXG4gIHJlcXVpcmVkRGlyZWN0aXZlLFxuICByZXF1aXJlZERpcmVjdGl2ZSxcbiAgbWlubGVuZ3RoRGlyZWN0aXZlLFxuICBtaW5sZW5ndGhEaXJlY3RpdmUsXG4gIG1heGxlbmd0aERpcmVjdGl2ZSxcbiAgbWF4bGVuZ3RoRGlyZWN0aXZlLFxuICBuZ1ZhbHVlRGlyZWN0aXZlLFxuICBuZ01vZGVsT3B0aW9uc0RpcmVjdGl2ZSxcbiAgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXMsXG4gIG5nRXZlbnREaXJlY3RpdmVzLFxuXG4gICRBbmNob3JTY3JvbGxQcm92aWRlcixcbiAgJEFuaW1hdGVQcm92aWRlcixcbiAgJENvcmVBbmltYXRlQ3NzUHJvdmlkZXIsXG4gICQkQ29yZUFuaW1hdGVKc1Byb3ZpZGVyLFxuICAkJENvcmVBbmltYXRlUXVldWVQcm92aWRlcixcbiAgJCRBbmltYXRlUnVubmVyRmFjdG9yeVByb3ZpZGVyLFxuICAkJEFuaW1hdGVBc3luY1J1bkZhY3RvcnlQcm92aWRlcixcbiAgJEJyb3dzZXJQcm92aWRlcixcbiAgJENhY2hlRmFjdG9yeVByb3ZpZGVyLFxuICAkQ29udHJvbGxlclByb3ZpZGVyLFxuICAkRGF0ZVByb3ZpZGVyLFxuICAkRG9jdW1lbnRQcm92aWRlcixcbiAgJCRJc0RvY3VtZW50SGlkZGVuUHJvdmlkZXIsXG4gICRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsXG4gICRGaWx0ZXJQcm92aWRlcixcbiAgJCRGb3JjZVJlZmxvd1Byb3ZpZGVyLFxuICAkSW50ZXJwb2xhdGVQcm92aWRlcixcbiAgJEludGVydmFsUHJvdmlkZXIsXG4gICRIdHRwUHJvdmlkZXIsXG4gICRIdHRwUGFyYW1TZXJpYWxpemVyUHJvdmlkZXIsXG4gICRIdHRwUGFyYW1TZXJpYWxpemVySlFMaWtlUHJvdmlkZXIsXG4gICRIdHRwQmFja2VuZFByb3ZpZGVyLFxuICAkeGhyRmFjdG9yeVByb3ZpZGVyLFxuICAkanNvbnBDYWxsYmFja3NQcm92aWRlcixcbiAgJExvY2F0aW9uUHJvdmlkZXIsXG4gICRMb2dQcm92aWRlcixcbiAgJCRNYXBQcm92aWRlcixcbiAgJFBhcnNlUHJvdmlkZXIsXG4gICRSb290U2NvcGVQcm92aWRlcixcbiAgJFFQcm92aWRlcixcbiAgJCRRUHJvdmlkZXIsXG4gICQkU2FuaXRpemVVcmlQcm92aWRlcixcbiAgJFNjZVByb3ZpZGVyLFxuICAkU2NlRGVsZWdhdGVQcm92aWRlcixcbiAgJFNuaWZmZXJQcm92aWRlcixcbiAgJFRlbXBsYXRlQ2FjaGVQcm92aWRlcixcbiAgJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyLFxuICAkJFRlc3RhYmlsaXR5UHJvdmlkZXIsXG4gICRUaW1lb3V0UHJvdmlkZXIsXG4gICQkUkFGUHJvdmlkZXIsXG4gICRXaW5kb3dQcm92aWRlcixcbiAgJCRqcUxpdGVQcm92aWRlcixcbiAgJCRDb29raWVSZWFkZXJQcm92aWRlclxuKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBvYmplY3RcbiAqIEBuYW1lIGFuZ3VsYXIudmVyc2lvblxuICogQG1vZHVsZSBuZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBBbiBvYmplY3QgdGhhdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudCBBbmd1bGFySlMgdmVyc2lvbi5cbiAqXG4gKiBUaGlzIG9iamVjdCBoYXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqIC0gYGZ1bGxgIOKAkyBge3N0cmluZ31gIOKAkyBGdWxsIHZlcnNpb24gc3RyaW5nLCBzdWNoIGFzIFwiMC45LjE4XCIuXG4gKiAtIGBtYWpvcmAg4oCTIGB7bnVtYmVyfWAg4oCTIE1ham9yIHZlcnNpb24gbnVtYmVyLCBzdWNoIGFzIFwiMFwiLlxuICogLSBgbWlub3JgIOKAkyBge251bWJlcn1gIOKAkyBNaW5vciB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjlcIi5cbiAqIC0gYGRvdGAg4oCTIGB7bnVtYmVyfWAg4oCTIERvdCB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjE4XCIuXG4gKiAtIGBjb2RlTmFtZWAg4oCTIGB7c3RyaW5nfWAg4oCTIENvZGUgbmFtZSBvZiB0aGUgcmVsZWFzZSwgc3VjaCBhcyBcImppZ2dsaW5nLWFybWZhdFwiLlxuICovXG52YXIgdmVyc2lvbiA9IHtcbiAgLy8gVGhlc2UgcGxhY2Vob2xkZXIgc3RyaW5ncyB3aWxsIGJlIHJlcGxhY2VkIGJ5IGdydW50J3MgYGJ1aWxkYCB0YXNrLlxuICAvLyBUaGV5IG5lZWQgdG8gYmUgZG91YmxlLSBvciBzaW5nbGUtcXVvdGVkLlxuICBmdWxsOiAnMS43LjInLFxuICBtYWpvcjogMSxcbiAgbWlub3I6IDcsXG4gIGRvdDogMixcbiAgY29kZU5hbWU6ICdleHRyZW1lLWNvbXBhdGlwbGljYXRpb24nXG59O1xuXG5cbmZ1bmN0aW9uIHB1Ymxpc2hFeHRlcm5hbEFQSShhbmd1bGFyKSB7XG4gIGV4dGVuZChhbmd1bGFyLCB7XG4gICAgJ2Vycm9ySGFuZGxpbmdDb25maWcnOiBlcnJvckhhbmRsaW5nQ29uZmlnLFxuICAgICdib290c3RyYXAnOiBib290c3RyYXAsXG4gICAgJ2NvcHknOiBjb3B5LFxuICAgICdleHRlbmQnOiBleHRlbmQsXG4gICAgJ21lcmdlJzogbWVyZ2UsXG4gICAgJ2VxdWFscyc6IGVxdWFscyxcbiAgICAnZWxlbWVudCc6IGpxTGl0ZSxcbiAgICAnZm9yRWFjaCc6IGZvckVhY2gsXG4gICAgJ2luamVjdG9yJzogY3JlYXRlSW5qZWN0b3IsXG4gICAgJ25vb3AnOiBub29wLFxuICAgICdiaW5kJzogYmluZCxcbiAgICAndG9Kc29uJzogdG9Kc29uLFxuICAgICdmcm9tSnNvbic6IGZyb21Kc29uLFxuICAgICdpZGVudGl0eSc6IGlkZW50aXR5LFxuICAgICdpc1VuZGVmaW5lZCc6IGlzVW5kZWZpbmVkLFxuICAgICdpc0RlZmluZWQnOiBpc0RlZmluZWQsXG4gICAgJ2lzU3RyaW5nJzogaXNTdHJpbmcsXG4gICAgJ2lzRnVuY3Rpb24nOiBpc0Z1bmN0aW9uLFxuICAgICdpc09iamVjdCc6IGlzT2JqZWN0LFxuICAgICdpc051bWJlcic6IGlzTnVtYmVyLFxuICAgICdpc0VsZW1lbnQnOiBpc0VsZW1lbnQsXG4gICAgJ2lzQXJyYXknOiBpc0FycmF5LFxuICAgICd2ZXJzaW9uJzogdmVyc2lvbixcbiAgICAnaXNEYXRlJzogaXNEYXRlLFxuICAgICdjYWxsYmFja3MnOiB7JCRjb3VudGVyOiAwfSxcbiAgICAnZ2V0VGVzdGFiaWxpdHknOiBnZXRUZXN0YWJpbGl0eSxcbiAgICAncmVsb2FkV2l0aERlYnVnSW5mbyc6IHJlbG9hZFdpdGhEZWJ1Z0luZm8sXG4gICAgJyQkbWluRXJyJzogbWluRXJyLFxuICAgICckJGNzcCc6IGNzcCxcbiAgICAnJCRlbmNvZGVVcmlTZWdtZW50JzogZW5jb2RlVXJpU2VnbWVudCxcbiAgICAnJCRlbmNvZGVVcmlRdWVyeSc6IGVuY29kZVVyaVF1ZXJ5LFxuICAgICckJGxvd2VyY2FzZSc6IGxvd2VyY2FzZSxcbiAgICAnJCRzdHJpbmdpZnknOiBzdHJpbmdpZnksXG4gICAgJyQkdXBwZXJjYXNlJzogdXBwZXJjYXNlXG4gIH0pO1xuXG4gIGFuZ3VsYXJNb2R1bGUgPSBzZXR1cE1vZHVsZUxvYWRlcih3aW5kb3cpO1xuXG4gIGFuZ3VsYXJNb2R1bGUoJ25nJywgWyduZ0xvY2FsZSddLCBbJyRwcm92aWRlJyxcbiAgICBmdW5jdGlvbiBuZ01vZHVsZSgkcHJvdmlkZSkge1xuICAgICAgLy8gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyIG5lZWRzIHRvIGJlIGJlZm9yZSAkY29tcGlsZVByb3ZpZGVyIGFzIGl0IGlzIHVzZWQgYnkgaXQuXG4gICAgICAkcHJvdmlkZS5wcm92aWRlcih7XG4gICAgICAgICQkc2FuaXRpemVVcmk6ICQkU2FuaXRpemVVcmlQcm92aWRlclxuICAgICAgfSk7XG4gICAgICAkcHJvdmlkZS5wcm92aWRlcignJGNvbXBpbGUnLCAkQ29tcGlsZVByb3ZpZGVyKS5cbiAgICAgICAgZGlyZWN0aXZlKHtcbiAgICAgICAgICAgIGE6IGh0bWxBbmNob3JEaXJlY3RpdmUsXG4gICAgICAgICAgICBpbnB1dDogaW5wdXREaXJlY3RpdmUsXG4gICAgICAgICAgICB0ZXh0YXJlYTogaW5wdXREaXJlY3RpdmUsXG4gICAgICAgICAgICBmb3JtOiBmb3JtRGlyZWN0aXZlLFxuICAgICAgICAgICAgc2NyaXB0OiBzY3JpcHREaXJlY3RpdmUsXG4gICAgICAgICAgICBzZWxlY3Q6IHNlbGVjdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG9wdGlvbjogb3B0aW9uRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdCaW5kOiBuZ0JpbmREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0JpbmRIdG1sOiBuZ0JpbmRIdG1sRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdCaW5kVGVtcGxhdGU6IG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDbGFzczogbmdDbGFzc0RpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2xhc3NFdmVuOiBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2xhc3NPZGQ6IG5nQ2xhc3NPZGREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0Nsb2FrOiBuZ0Nsb2FrRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDb250cm9sbGVyOiBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0Zvcm06IG5nRm9ybURpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nSGlkZTogbmdIaWRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdJZjogbmdJZkRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nSW5jbHVkZTogbmdJbmNsdWRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdJbml0OiBuZ0luaXREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ05vbkJpbmRhYmxlOiBuZ05vbkJpbmRhYmxlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdQbHVyYWxpemU6IG5nUGx1cmFsaXplRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdSZWY6IG5nUmVmRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdSZXBlYXQ6IG5nUmVwZWF0RGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdTaG93OiBuZ1Nob3dEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N0eWxlOiBuZ1N0eWxlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdTd2l0Y2g6IG5nU3dpdGNoRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdTd2l0Y2hXaGVuOiBuZ1N3aXRjaFdoZW5EaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N3aXRjaERlZmF1bHQ6IG5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nT3B0aW9uczogbmdPcHRpb25zRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdUcmFuc2NsdWRlOiBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ01vZGVsOiBuZ01vZGVsRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdMaXN0OiBuZ0xpc3REaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0NoYW5nZTogbmdDaGFuZ2VEaXJlY3RpdmUsXG4gICAgICAgICAgICBwYXR0ZXJuOiBwYXR0ZXJuRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdQYXR0ZXJuOiBwYXR0ZXJuRGlyZWN0aXZlLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdSZXF1aXJlZDogcmVxdWlyZWREaXJlY3RpdmUsXG4gICAgICAgICAgICBtaW5sZW5ndGg6IG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTWlubGVuZ3RoOiBtaW5sZW5ndGhEaXJlY3RpdmUsXG4gICAgICAgICAgICBtYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTWF4bGVuZ3RoOiBtYXhsZW5ndGhEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1ZhbHVlOiBuZ1ZhbHVlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdNb2RlbE9wdGlvbnM6IG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlXG4gICAgICAgIH0pLlxuICAgICAgICBkaXJlY3RpdmUoe1xuICAgICAgICAgIG5nSW5jbHVkZTogbmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmVcbiAgICAgICAgfSkuXG4gICAgICAgIGRpcmVjdGl2ZShuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcykuXG4gICAgICAgIGRpcmVjdGl2ZShuZ0V2ZW50RGlyZWN0aXZlcyk7XG4gICAgICAkcHJvdmlkZS5wcm92aWRlcih7XG4gICAgICAgICRhbmNob3JTY3JvbGw6ICRBbmNob3JTY3JvbGxQcm92aWRlcixcbiAgICAgICAgJGFuaW1hdGU6ICRBbmltYXRlUHJvdmlkZXIsXG4gICAgICAgICRhbmltYXRlQ3NzOiAkQ29yZUFuaW1hdGVDc3NQcm92aWRlcixcbiAgICAgICAgJCRhbmltYXRlSnM6ICQkQ29yZUFuaW1hdGVKc1Byb3ZpZGVyLFxuICAgICAgICAkJGFuaW1hdGVRdWV1ZTogJCRDb3JlQW5pbWF0ZVF1ZXVlUHJvdmlkZXIsXG4gICAgICAgICQkQW5pbWF0ZVJ1bm5lcjogJCRBbmltYXRlUnVubmVyRmFjdG9yeVByb3ZpZGVyLFxuICAgICAgICAkJGFuaW1hdGVBc3luY1J1bjogJCRBbmltYXRlQXN5bmNSdW5GYWN0b3J5UHJvdmlkZXIsXG4gICAgICAgICRicm93c2VyOiAkQnJvd3NlclByb3ZpZGVyLFxuICAgICAgICAkY2FjaGVGYWN0b3J5OiAkQ2FjaGVGYWN0b3J5UHJvdmlkZXIsXG4gICAgICAgICRjb250cm9sbGVyOiAkQ29udHJvbGxlclByb3ZpZGVyLFxuICAgICAgICAkZG9jdW1lbnQ6ICREb2N1bWVudFByb3ZpZGVyLFxuICAgICAgICAkJGlzRG9jdW1lbnRIaWRkZW46ICQkSXNEb2N1bWVudEhpZGRlblByb3ZpZGVyLFxuICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcjogJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcixcbiAgICAgICAgJGZpbHRlcjogJEZpbHRlclByb3ZpZGVyLFxuICAgICAgICAkJGZvcmNlUmVmbG93OiAkJEZvcmNlUmVmbG93UHJvdmlkZXIsXG4gICAgICAgICRpbnRlcnBvbGF0ZTogJEludGVycG9sYXRlUHJvdmlkZXIsXG4gICAgICAgICRpbnRlcnZhbDogJEludGVydmFsUHJvdmlkZXIsXG4gICAgICAgICRodHRwOiAkSHR0cFByb3ZpZGVyLFxuICAgICAgICAkaHR0cFBhcmFtU2VyaWFsaXplcjogJEh0dHBQYXJhbVNlcmlhbGl6ZXJQcm92aWRlcixcbiAgICAgICAgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2U6ICRIdHRwUGFyYW1TZXJpYWxpemVySlFMaWtlUHJvdmlkZXIsXG4gICAgICAgICRodHRwQmFja2VuZDogJEh0dHBCYWNrZW5kUHJvdmlkZXIsXG4gICAgICAgICR4aHJGYWN0b3J5OiAkeGhyRmFjdG9yeVByb3ZpZGVyLFxuICAgICAgICAkanNvbnBDYWxsYmFja3M6ICRqc29ucENhbGxiYWNrc1Byb3ZpZGVyLFxuICAgICAgICAkbG9jYXRpb246ICRMb2NhdGlvblByb3ZpZGVyLFxuICAgICAgICAkbG9nOiAkTG9nUHJvdmlkZXIsXG4gICAgICAgICRwYXJzZTogJFBhcnNlUHJvdmlkZXIsXG4gICAgICAgICRyb290U2NvcGU6ICRSb290U2NvcGVQcm92aWRlcixcbiAgICAgICAgJHE6ICRRUHJvdmlkZXIsXG4gICAgICAgICQkcTogJCRRUHJvdmlkZXIsXG4gICAgICAgICRzY2U6ICRTY2VQcm92aWRlcixcbiAgICAgICAgJHNjZURlbGVnYXRlOiAkU2NlRGVsZWdhdGVQcm92aWRlcixcbiAgICAgICAgJHNuaWZmZXI6ICRTbmlmZmVyUHJvdmlkZXIsXG4gICAgICAgICR0ZW1wbGF0ZUNhY2hlOiAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyLFxuICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0OiAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIsXG4gICAgICAgICQkdGVzdGFiaWxpdHk6ICQkVGVzdGFiaWxpdHlQcm92aWRlcixcbiAgICAgICAgJHRpbWVvdXQ6ICRUaW1lb3V0UHJvdmlkZXIsXG4gICAgICAgICR3aW5kb3c6ICRXaW5kb3dQcm92aWRlcixcbiAgICAgICAgJCRyQUY6ICQkUkFGUHJvdmlkZXIsXG4gICAgICAgICQkanFMaXRlOiAkJGpxTGl0ZVByb3ZpZGVyLFxuICAgICAgICAkJE1hcDogJCRNYXBQcm92aWRlcixcbiAgICAgICAgJCRjb29raWVSZWFkZXI6ICQkQ29va2llUmVhZGVyUHJvdmlkZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgXSlcbiAgLmluZm8oeyBhbmd1bGFyVmVyc2lvbjogJzEuNy4yJyB9KTtcbn1cblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxuLyogZ2xvYmFsXG4gIEpRTGl0ZVByb3RvdHlwZTogdHJ1ZSxcbiAgQk9PTEVBTl9BVFRSOiB0cnVlLFxuICBBTElBU0VEX0FUVFI6IHRydWVcbiovXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vSlFMaXRlXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmVsZW1lbnRcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBXcmFwcyBhIHJhdyBET00gZWxlbWVudCBvciBIVE1MIHN0cmluZyBhcyBhIFtqUXVlcnldKGh0dHA6Ly9qcXVlcnkuY29tKSBlbGVtZW50LlxuICpcbiAqIElmIGpRdWVyeSBpcyBhdmFpbGFibGUsIGBhbmd1bGFyLmVsZW1lbnRgIGlzIGFuIGFsaWFzIGZvciB0aGVcbiAqIFtqUXVlcnldKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qUXVlcnkvKSBmdW5jdGlvbi4gSWYgalF1ZXJ5IGlzIG5vdCBhdmFpbGFibGUsIGBhbmd1bGFyLmVsZW1lbnRgXG4gKiBkZWxlZ2F0ZXMgdG8gQW5ndWxhckpTJ3MgYnVpbHQtaW4gc3Vic2V0IG9mIGpRdWVyeSwgY2FsbGVkIFwialF1ZXJ5IGxpdGVcIiBvciAqKmpxTGl0ZSoqLlxuICpcbiAqIGpxTGl0ZSBpcyBhIHRpbnksIEFQSS1jb21wYXRpYmxlIHN1YnNldCBvZiBqUXVlcnkgdGhhdCBhbGxvd3NcbiAqIEFuZ3VsYXJKUyB0byBtYW5pcHVsYXRlIHRoZSBET00gaW4gYSBjcm9zcy1icm93c2VyIGNvbXBhdGlibGUgd2F5LiBqcUxpdGUgaW1wbGVtZW50cyBvbmx5IHRoZSBtb3N0XG4gKiBjb21tb25seSBuZWVkZWQgZnVuY3Rpb25hbGl0eSB3aXRoIHRoZSBnb2FsIG9mIGhhdmluZyBhIHZlcnkgc21hbGwgZm9vdHByaW50LlxuICpcbiAqIFRvIHVzZSBgalF1ZXJ5YCwgc2ltcGx5IGVuc3VyZSBpdCBpcyBsb2FkZWQgYmVmb3JlIHRoZSBgYW5ndWxhci5qc2AgZmlsZS4gWW91IGNhbiBhbHNvIHVzZSB0aGVcbiAqIHtAbGluayBuZ0pxIGBuZ0pxYH0gZGlyZWN0aXZlIHRvIHNwZWNpZnkgdGhhdCBqcWxpdGUgc2hvdWxkIGJlIHVzZWQgb3ZlciBqUXVlcnksIG9yIHRvIHVzZSBhXG4gKiBzcGVjaWZpYyB2ZXJzaW9uIG9mIGpRdWVyeSBpZiBtdWx0aXBsZSB2ZXJzaW9ucyBleGlzdCBvbiB0aGUgcGFnZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPioqTm90ZToqKiBBbGwgZWxlbWVudCByZWZlcmVuY2VzIGluIEFuZ3VsYXJKUyBhcmUgYWx3YXlzIHdyYXBwZWQgd2l0aCBqUXVlcnkgb3JcbiAqIGpxTGl0ZSAoc3VjaCBhcyB0aGUgZWxlbWVudCBhcmd1bWVudCBpbiBhIGRpcmVjdGl2ZSdzIGNvbXBpbGUgLyBsaW5rIGZ1bmN0aW9uKS4gVGhleSBhcmUgbmV2ZXIgcmF3IERPTSByZWZlcmVuY2VzLjwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+KipOb3RlOioqIEtlZXAgaW4gbWluZCB0aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCBub3QgZmluZCBlbGVtZW50c1xuICogYnkgdGFnIG5hbWUgLyBDU1Mgc2VsZWN0b3IuIEZvciBsb29rdXBzIGJ5IHRhZyBuYW1lLCB0cnkgaW5zdGVhZCBgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKC4uLilgXG4gKiBvciBgJGRvY3VtZW50LmZpbmQoKWAsIG9yIHVzZSB0aGUgc3RhbmRhcmQgRE9NIEFQSXMsIGUuZy4gYGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoKWAuPC9kaXY+XG4gKlxuICogIyMgQW5ndWxhckpTJ3MganFMaXRlXG4gKiBqcUxpdGUgcHJvdmlkZXMgb25seSB0aGUgZm9sbG93aW5nIGpRdWVyeSBtZXRob2RzOlxuICpcbiAqIC0gW2BhZGRDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FkZENsYXNzLykgLSBEb2VzIG5vdCBzdXBwb3J0IGEgZnVuY3Rpb24gYXMgZmlyc3QgYXJndW1lbnRcbiAqIC0gW2BhZnRlcigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FmdGVyLylcbiAqIC0gW2BhcHBlbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9hcHBlbmQvKSAtIENvbnRyYXJ5IHRvIGpRdWVyeSwgdGhpcyBkb2Vzbid0IGNsb25lIGVsZW1lbnRzXG4gKiAgIHNvIHdpbGwgbm90IHdvcmsgY29ycmVjdGx5IHdoZW4gaW52b2tlZCBvbiBhIGpxTGl0ZSBvYmplY3QgY29udGFpbmluZyBtb3JlIHRoYW4gb25lIERPTSBub2RlXG4gKiAtIFtgYXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2F0dHIvKSAtIERvZXMgbm90IHN1cHBvcnQgZnVuY3Rpb25zIGFzIHBhcmFtZXRlcnNcbiAqIC0gW2BiaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYmluZC8pIChfZGVwcmVjYXRlZF8sIHVzZSBbYG9uKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vb24vKSkgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMsIHNlbGVjdG9ycyBvciBldmVudERhdGFcbiAqIC0gW2BjaGlsZHJlbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NoaWxkcmVuLykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xuICogLSBbYGNsb25lKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vY2xvbmUvKVxuICogLSBbYGNvbnRlbnRzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vY29udGVudHMvKVxuICogLSBbYGNzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2Nzcy8pIC0gT25seSByZXRyaWV2ZXMgaW5saW5lLXN0eWxlcywgZG9lcyBub3QgY2FsbCBgZ2V0Q29tcHV0ZWRTdHlsZSgpYC5cbiAqICAgQXMgYSBzZXR0ZXIsIGRvZXMgbm90IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdzIG9yIGFwcGVuZCAncHgnLCBhbmQgYWxzbyBkb2VzIG5vdCBoYXZlIGF1dG9tYXRpYyBwcm9wZXJ0eSBwcmVmaXhpbmcuXG4gKiAtIFtgZGF0YSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2RhdGEvKVxuICogLSBbYGRldGFjaCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2RldGFjaC8pXG4gKiAtIFtgZW1wdHkoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lbXB0eS8pXG4gKiAtIFtgZXEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lcS8pXG4gKiAtIFtgZmluZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2ZpbmQvKSAtIExpbWl0ZWQgdG8gbG9va3VwcyBieSB0YWcgbmFtZVxuICogLSBbYGhhc0NsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vaGFzQ2xhc3MvKVxuICogLSBbYGh0bWwoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9odG1sLylcbiAqIC0gW2BuZXh0KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vbmV4dC8pIC0gRG9lcyBub3Qgc3VwcG9ydCBzZWxlY3RvcnNcbiAqIC0gW2BvbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29uLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMsIHNlbGVjdG9ycyBvciBldmVudERhdGFcbiAqIC0gW2BvZmYoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmYvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcywgc2VsZWN0b3JzIG9yIGV2ZW50IG9iamVjdCBhcyBwYXJhbWV0ZXJcbiAqIC0gW2BvbmUoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vbmUvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcyBvciBzZWxlY3RvcnNcbiAqIC0gW2BwYXJlbnQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wYXJlbnQvKSAtIERvZXMgbm90IHN1cHBvcnQgc2VsZWN0b3JzXG4gKiAtIFtgcHJlcGVuZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ByZXBlbmQvKVxuICogLSBbYHByb3AoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wcm9wLylcbiAqIC0gW2ByZWFkeSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlYWR5LykgKF9kZXByZWNhdGVkXywgdXNlIGBhbmd1bGFyLmVsZW1lbnQoY2FsbGJhY2spYCBpbnN0ZWFkIG9mIGBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGNhbGxiYWNrKWApXG4gKiAtIFtgcmVtb3ZlKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlLylcbiAqIC0gW2ByZW1vdmVBdHRyKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlQXR0ci8pIC0gRG9lcyBub3Qgc3VwcG9ydCBtdWx0aXBsZSBhdHRyaWJ1dGVzXG4gKiAtIFtgcmVtb3ZlQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmVDbGFzcy8pIC0gRG9lcyBub3Qgc3VwcG9ydCBhIGZ1bmN0aW9uIGFzIGZpcnN0IGFyZ3VtZW50XG4gKiAtIFtgcmVtb3ZlRGF0YSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZURhdGEvKVxuICogLSBbYHJlcGxhY2VXaXRoKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVwbGFjZVdpdGgvKVxuICogLSBbYHRleHQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90ZXh0LylcbiAqIC0gW2B0b2dnbGVDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3RvZ2dsZUNsYXNzLykgLSBEb2VzIG5vdCBzdXBwb3J0IGEgZnVuY3Rpb24gYXMgZmlyc3QgYXJndW1lbnRcbiAqIC0gW2B0cmlnZ2VySGFuZGxlcigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3RyaWdnZXJIYW5kbGVyLykgLSBQYXNzZXMgYSBkdW1teSBldmVudCBvYmplY3QgdG8gaGFuZGxlcnNcbiAqIC0gW2B1bmJpbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS91bmJpbmQvKSAoX2RlcHJlY2F0ZWRfLCB1c2UgW2BvZmYoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmYvKSkgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMgb3IgZXZlbnQgb2JqZWN0IGFzIHBhcmFtZXRlclxuICogLSBbYHZhbCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ZhbC8pXG4gKiAtIFtgd3JhcCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3dyYXAvKVxuICpcbiAqICMjIGpRdWVyeS9qcUxpdGUgRXh0cmFzXG4gKiBBbmd1bGFySlMgYWxzbyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgZXZlbnRzIHRvIGJvdGggalF1ZXJ5IGFuZCBqcUxpdGU6XG4gKlxuICogIyMjIEV2ZW50c1xuICogLSBgJGRlc3Ryb3lgIC0gQW5ndWxhckpTIGludGVyY2VwdHMgYWxsIGpxTGl0ZS9qUXVlcnkncyBET00gZGVzdHJ1Y3Rpb24gYXBpcyBhbmQgZmlyZXMgdGhpcyBldmVudFxuICogICAgb24gYWxsIERPTSBub2RlcyBiZWluZyByZW1vdmVkLiAgVGhpcyBjYW4gYmUgdXNlZCB0byBjbGVhbiB1cCBhbnkgM3JkIHBhcnR5IGJpbmRpbmdzIHRvIHRoZSBET01cbiAqICAgIGVsZW1lbnQgYmVmb3JlIGl0IGlzIHJlbW92ZWQuXG4gKlxuICogIyMjIE1ldGhvZHNcbiAqIC0gYGNvbnRyb2xsZXIobmFtZSlgIC0gcmV0cmlldmVzIHRoZSBjb250cm9sbGVyIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC4gQnkgZGVmYXVsdFxuICogICByZXRyaWV2ZXMgY29udHJvbGxlciBhc3NvY2lhdGVkIHdpdGggdGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZS4gSWYgYG5hbWVgIGlzIHByb3ZpZGVkIGFzXG4gKiAgIGNhbWVsQ2FzZSBkaXJlY3RpdmUgbmFtZSwgdGhlbiB0aGUgY29udHJvbGxlciBmb3IgdGhpcyBkaXJlY3RpdmUgd2lsbCBiZSByZXRyaWV2ZWQgKGUuZy5cbiAqICAgYCduZ01vZGVsJ2ApLlxuICogLSBgaW5qZWN0b3IoKWAgLSByZXRyaWV2ZXMgdGhlIGluamVjdG9yIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC5cbiAqIC0gYHNjb3BlKClgIC0gcmV0cmlldmVzIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0gb2YgdGhlIGN1cnJlbnRcbiAqICAgZWxlbWVudCBvciBpdHMgcGFyZW50LiBSZXF1aXJlcyB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEZWJ1ZyBEYXRhfSB0b1xuICogICBiZSBlbmFibGVkLlxuICogLSBgaXNvbGF0ZVNjb3BlKClgIC0gcmV0cmlldmVzIGFuIGlzb2xhdGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9IGlmIG9uZSBpcyBhdHRhY2hlZCBkaXJlY3RseSB0byB0aGVcbiAqICAgY3VycmVudCBlbGVtZW50LiBUaGlzIGdldHRlciBzaG91bGQgYmUgdXNlZCBvbmx5IG9uIGVsZW1lbnRzIHRoYXQgY29udGFpbiBhIGRpcmVjdGl2ZSB3aGljaCBzdGFydHMgYSBuZXcgaXNvbGF0ZVxuICogICBzY29wZS4gQ2FsbGluZyBgc2NvcGUoKWAgb24gdGhpcyBlbGVtZW50IGFsd2F5cyByZXR1cm5zIHRoZSBvcmlnaW5hbCBub24taXNvbGF0ZSBzY29wZS5cbiAqICAgUmVxdWlyZXMge0BsaW5rIGd1aWRlL3Byb2R1Y3Rpb24jZGlzYWJsaW5nLWRlYnVnLWRhdGEgRGVidWcgRGF0YX0gdG8gYmUgZW5hYmxlZC5cbiAqIC0gYGluaGVyaXRlZERhdGEoKWAgLSBzYW1lIGFzIGBkYXRhKClgLCBidXQgd2Fsa3MgdXAgdGhlIERPTSB1bnRpbCBhIHZhbHVlIGlzIGZvdW5kIG9yIHRoZSB0b3BcbiAqICAgcGFyZW50IGVsZW1lbnQgaXMgcmVhY2hlZC5cbiAqXG4gKiBAa25vd25Jc3N1ZSBZb3UgY2Fubm90IHNweSBvbiBgYW5ndWxhci5lbGVtZW50YCBpZiB5b3UgYXJlIHVzaW5nIEphc21pbmUgdmVyc2lvbiAxLnguIFNlZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTQyNTEgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RE9NRWxlbWVudH0gZWxlbWVudCBIVE1MIHN0cmluZyBvciBET01FbGVtZW50IHRvIGJlIHdyYXBwZWQgaW50byBqUXVlcnkuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBqUXVlcnkgb2JqZWN0LlxuICovXG5cbkpRTGl0ZS5leHBhbmRvID0gJ25nMzM5JztcblxudmFyIGpxQ2FjaGUgPSBKUUxpdGUuY2FjaGUgPSB7fSxcbiAgICBqcUlkID0gMTtcblxuLypcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBmdW5jdGlvbiAhISFcbiAqL1xuSlFMaXRlLl9kYXRhID0gZnVuY3Rpb24obm9kZSkge1xuICAvL2pRdWVyeSBhbHdheXMgcmV0dXJucyBhbiBvYmplY3Qgb24gY2FjaGUgbWlzc1xuICByZXR1cm4gdGhpcy5jYWNoZVtub2RlW3RoaXMuZXhwYW5kb11dIHx8IHt9O1xufTtcblxuZnVuY3Rpb24ganFOZXh0SWQoKSB7IHJldHVybiArK2pxSWQ7IH1cblxuXG52YXIgREFTSF9MT1dFUkNBU0VfUkVHRVhQID0gLy0oW2Etel0pL2c7XG52YXIgTVNfSEFDS19SRUdFWFAgPSAvXi1tcy0vO1xudmFyIE1PVVNFX0VWRU5UX01BUCA9IHsgbW91c2VsZWF2ZTogJ21vdXNlb3V0JywgbW91c2VlbnRlcjogJ21vdXNlb3ZlcicgfTtcbnZhciBqcUxpdGVNaW5FcnIgPSBtaW5FcnIoJ2pxTGl0ZScpO1xuXG4vKipcbiAqIENvbnZlcnRzIGtlYmFiLWNhc2UgdG8gY2FtZWxDYXNlLlxuICogVGhlcmUgaXMgYWxzbyBhIHNwZWNpYWwgY2FzZSBmb3IgdGhlIG1zIHByZWZpeCBzdGFydGluZyB3aXRoIGEgbG93ZXJjYXNlIGxldHRlci5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGNzc0tlYmFiVG9DYW1lbChuYW1lKSB7XG4gICAgcmV0dXJuIGtlYmFiVG9DYW1lbChuYW1lLnJlcGxhY2UoTVNfSEFDS19SRUdFWFAsICdtcy0nKSk7XG59XG5cbmZ1bmN0aW9uIGZuQ2FtZWxDYXNlUmVwbGFjZShhbGwsIGxldHRlcikge1xuICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ29udmVydHMga2ViYWItY2FzZSB0byBjYW1lbENhc2UuXG4gKiBAcGFyYW0gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxuICovXG5mdW5jdGlvbiBrZWJhYlRvQ2FtZWwobmFtZSkge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKERBU0hfTE9XRVJDQVNFX1JFR0VYUCwgZm5DYW1lbENhc2VSZXBsYWNlKTtcbn1cblxudmFyIFNJTkdMRV9UQUdfUkVHRVhQID0gL148KFtcXHctXSspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvO1xudmFyIEhUTUxfUkVHRVhQID0gLzx8JiM/XFx3KzsvO1xudmFyIFRBR19OQU1FX1JFR0VYUCA9IC88KFtcXHc6LV0rKS87XG52YXIgWEhUTUxfVEFHX1JFR0VYUCA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6LV0rKVtePl0qKVxcLz4vZ2k7XG5cbnZhciB3cmFwTWFwID0ge1xuICAnb3B0aW9uJzogWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J10sXG5cbiAgJ3RoZWFkJzogWzEsICc8dGFibGU+JywgJzwvdGFibGU+J10sXG4gICdjb2wnOiBbMiwgJzx0YWJsZT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcbiAgJ3RyJzogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gICd0ZCc6IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddLFxuICAnX2RlZmF1bHQnOiBbMCwgJycsICcnXVxufTtcblxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xud3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDtcbndyYXBNYXAudGggPSB3cmFwTWFwLnRkO1xuXG5cbmZ1bmN0aW9uIGpxTGl0ZUlzVGV4dE5vZGUoaHRtbCkge1xuICByZXR1cm4gIUhUTUxfUkVHRVhQLnRlc3QoaHRtbCk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUFjY2VwdHNEYXRhKG5vZGUpIHtcbiAgLy8gVGhlIHdpbmRvdyBvYmplY3QgY2FuIGFjY2VwdCBkYXRhIGJ1dCBoYXMgbm8gbm9kZVR5cGVcbiAgLy8gT3RoZXJ3aXNlIHdlIGFyZSBvbmx5IGludGVyZXN0ZWQgaW4gZWxlbWVudHMgKDEpIGFuZCBkb2N1bWVudHMgKDkpXG4gIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gIHJldHVybiBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQgfHwgIW5vZGVUeXBlIHx8IG5vZGVUeXBlID09PSBOT0RFX1RZUEVfRE9DVU1FTlQ7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUhhc0RhdGEobm9kZSkge1xuICBmb3IgKHZhciBrZXkgaW4ganFDYWNoZVtub2RlLm5nMzM5XSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSB7XG4gIHZhciB0bXAsIHRhZywgd3JhcCxcbiAgICAgIGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBub2RlcyA9IFtdLCBpO1xuXG4gIGlmIChqcUxpdGVJc1RleHROb2RlKGh0bWwpKSB7XG4gICAgLy8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG4gICAgbm9kZXMucHVzaChjb250ZXh0LmNyZWF0ZVRleHROb2RlKGh0bWwpKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcbiAgICB0bXAgPSBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZXh0LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICB0YWcgPSAoVEFHX05BTUVfUkVHRVhQLmV4ZWMoaHRtbCkgfHwgWycnLCAnJ10pWzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgd3JhcCA9IHdyYXBNYXBbdGFnXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuICAgIHRtcC5pbm5lckhUTUwgPSB3cmFwWzFdICsgaHRtbC5yZXBsYWNlKFhIVE1MX1RBR19SRUdFWFAsICc8JDE+PC8kMj4nKSArIHdyYXBbMl07XG5cbiAgICAvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcbiAgICBpID0gd3JhcFswXTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0bXAgPSB0bXAubGFzdENoaWxkO1xuICAgIH1cblxuICAgIG5vZGVzID0gY29uY2F0KG5vZGVzLCB0bXAuY2hpbGROb2Rlcyk7XG5cbiAgICB0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuICAgIHRtcC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuICBmcmFnbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICBmcmFnbWVudC5pbm5lckhUTUwgPSAnJzsgLy8gQ2xlYXIgaW5uZXIgSFRNTFxuICBmb3JFYWNoKG5vZGVzLCBmdW5jdGlvbihub2RlKSB7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIH0pO1xuXG4gIHJldHVybiBmcmFnbWVudDtcbn1cblxuZnVuY3Rpb24ganFMaXRlUGFyc2VIVE1MKGh0bWwsIGNvbnRleHQpIHtcbiAgY29udGV4dCA9IGNvbnRleHQgfHwgd2luZG93LmRvY3VtZW50O1xuICB2YXIgcGFyc2VkO1xuXG4gIGlmICgocGFyc2VkID0gU0lOR0xFX1RBR19SRUdFWFAuZXhlYyhodG1sKSkpIHtcbiAgICByZXR1cm4gW2NvbnRleHQuY3JlYXRlRWxlbWVudChwYXJzZWRbMV0pXTtcbiAgfVxuXG4gIGlmICgocGFyc2VkID0ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSkpIHtcbiAgICByZXR1cm4gcGFyc2VkLmNoaWxkTm9kZXM7XG4gIH1cblxuICByZXR1cm4gW107XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVdyYXBOb2RlKG5vZGUsIHdyYXBwZXIpIHtcbiAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcblxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBub2RlKTtcbiAgfVxuXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5cblxuLy8gSUU5LTExIGhhcyBubyBtZXRob2QgXCJjb250YWluc1wiIGluIFNWRyBlbGVtZW50IGFuZCBpbiBOb2RlLnByb3RvdHlwZS4gQnVnICMxMDI1OS5cbnZhciBqcUxpdGVDb250YWlucyA9IHdpbmRvdy5Ob2RlLnByb3RvdHlwZS5jb250YWlucyB8fCAvKiogQHRoaXMgKi8gZnVuY3Rpb24oYXJnKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gIHJldHVybiAhISh0aGlzLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGFyZykgJiAxNik7XG59O1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIEpRTGl0ZShlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSlFMaXRlKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICB2YXIgYXJnSXNTdHJpbmc7XG5cbiAgaWYgKGlzU3RyaW5nKGVsZW1lbnQpKSB7XG4gICAgZWxlbWVudCA9IHRyaW0oZWxlbWVudCk7XG4gICAgYXJnSXNTdHJpbmcgPSB0cnVlO1xuICB9XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBKUUxpdGUpKSB7XG4gICAgaWYgKGFyZ0lzU3RyaW5nICYmIGVsZW1lbnQuY2hhckF0KDApICE9PSAnPCcpIHtcbiAgICAgIHRocm93IGpxTGl0ZU1pbkVycignbm9zZWwnLCAnTG9va2luZyB1cCBlbGVtZW50cyB2aWEgc2VsZWN0b3JzIGlzIG5vdCBzdXBwb3J0ZWQgYnkganFMaXRlISBTZWU6IGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2FuZ3VsYXIuZWxlbWVudCcpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEpRTGl0ZShlbGVtZW50KTtcbiAgfVxuXG4gIGlmIChhcmdJc1N0cmluZykge1xuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGpxTGl0ZVBhcnNlSFRNTChlbGVtZW50KSk7XG4gIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihlbGVtZW50KSkge1xuICAgIGpxTGl0ZVJlYWR5KGVsZW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGVsZW1lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUNsb25lKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVEZWFsb2MoZWxlbWVudCwgb25seURlc2NlbmRhbnRzKSB7XG4gIGlmICghb25seURlc2NlbmRhbnRzICYmIGpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSBqcUxpdGUuY2xlYW5EYXRhKFtlbGVtZW50XSk7XG5cbiAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCkge1xuICAgIGpxTGl0ZS5jbGVhbkRhdGEoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzRW1wdHlPYmplY3Qob2JqKSB7XG4gIHZhciBuYW1lO1xuXG4gIGZvciAobmFtZSBpbiBvYmopIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUlmRW1wdHlEYXRhKGVsZW1lbnQpIHtcbiAgdmFyIGV4cGFuZG9JZCA9IGVsZW1lbnQubmczMzk7XG4gIHZhciBleHBhbmRvU3RvcmUgPSBleHBhbmRvSWQgJiYganFDYWNoZVtleHBhbmRvSWRdO1xuXG4gIHZhciBldmVudHMgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmV2ZW50cztcbiAgdmFyIGRhdGEgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmRhdGE7XG5cbiAgaWYgKCghZGF0YSB8fCBpc0VtcHR5T2JqZWN0KGRhdGEpKSAmJiAoIWV2ZW50cyB8fCBpc0VtcHR5T2JqZWN0KGV2ZW50cykpKSB7XG4gICAgZGVsZXRlIGpxQ2FjaGVbZXhwYW5kb0lkXTtcbiAgICBlbGVtZW50Lm5nMzM5ID0gdW5kZWZpbmVkOyAvLyBkb24ndCBkZWxldGUgRE9NIGV4cGFuZG9zLiBJRSBhbmQgQ2hyb21lIGRvbid0IGxpa2UgaXRcbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVPZmYoZWxlbWVudCwgdHlwZSwgZm4sIHVuc3VwcG9ydGVkKSB7XG4gIGlmIChpc0RlZmluZWQodW5zdXBwb3J0ZWQpKSB0aHJvdyBqcUxpdGVNaW5FcnIoJ29mZmFyZ3MnLCAnanFMaXRlI29mZigpIGRvZXMgbm90IHN1cHBvcnQgdGhlIGBzZWxlY3RvcmAgYXJndW1lbnQnKTtcblxuICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQpO1xuICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5ldmVudHM7XG4gIHZhciBoYW5kbGUgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmhhbmRsZTtcblxuICBpZiAoIWhhbmRsZSkgcmV0dXJuOyAvL25vIGxpc3RlbmVycyByZWdpc3RlcmVkXG5cbiAgaWYgKCF0eXBlKSB7XG4gICAgZm9yICh0eXBlIGluIGV2ZW50cykge1xuICAgICAgaWYgKHR5cGUgIT09ICckZGVzdHJveScpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZSk7XG4gICAgICB9XG4gICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgIH1cbiAgfSBlbHNlIHtcblxuICAgIHZhciByZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVyRm5zID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGlzRGVmaW5lZChmbikpIHtcbiAgICAgICAgYXJyYXlSZW1vdmUobGlzdGVuZXJGbnMgfHwgW10sIGZuKTtcbiAgICAgIH1cbiAgICAgIGlmICghKGlzRGVmaW5lZChmbikgJiYgbGlzdGVuZXJGbnMgJiYgbGlzdGVuZXJGbnMubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZSk7XG4gICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvckVhY2godHlwZS5zcGxpdCgnICcpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICByZW1vdmVIYW5kbGVyKHR5cGUpO1xuICAgICAgaWYgKE1PVVNFX0VWRU5UX01BUFt0eXBlXSkge1xuICAgICAgICByZW1vdmVIYW5kbGVyKE1PVVNFX0VWRU5UX01BUFt0eXBlXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVJZkVtcHR5RGF0YShlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlRGF0YShlbGVtZW50LCBuYW1lKSB7XG4gIHZhciBleHBhbmRvSWQgPSBlbGVtZW50Lm5nMzM5O1xuICB2YXIgZXhwYW5kb1N0b3JlID0gZXhwYW5kb0lkICYmIGpxQ2FjaGVbZXhwYW5kb0lkXTtcblxuICBpZiAoZXhwYW5kb1N0b3JlKSB7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGRlbGV0ZSBleHBhbmRvU3RvcmUuZGF0YVtuYW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwYW5kb1N0b3JlLmRhdGEgPSB7fTtcbiAgICB9XG5cbiAgICByZW1vdmVJZkVtcHR5RGF0YShlbGVtZW50KTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCBjcmVhdGVJZk5lY2Vzc2FyeSkge1xuICB2YXIgZXhwYW5kb0lkID0gZWxlbWVudC5uZzMzOSxcbiAgICAgIGV4cGFuZG9TdG9yZSA9IGV4cGFuZG9JZCAmJiBqcUNhY2hlW2V4cGFuZG9JZF07XG5cbiAgaWYgKGNyZWF0ZUlmTmVjZXNzYXJ5ICYmICFleHBhbmRvU3RvcmUpIHtcbiAgICBlbGVtZW50Lm5nMzM5ID0gZXhwYW5kb0lkID0ganFOZXh0SWQoKTtcbiAgICBleHBhbmRvU3RvcmUgPSBqcUNhY2hlW2V4cGFuZG9JZF0gPSB7ZXZlbnRzOiB7fSwgZGF0YToge30sIGhhbmRsZTogdW5kZWZpbmVkfTtcbiAgfVxuXG4gIHJldHVybiBleHBhbmRvU3RvcmU7XG59XG5cblxuZnVuY3Rpb24ganFMaXRlRGF0YShlbGVtZW50LCBrZXksIHZhbHVlKSB7XG4gIGlmIChqcUxpdGVBY2NlcHRzRGF0YShlbGVtZW50KSkge1xuICAgIHZhciBwcm9wO1xuXG4gICAgdmFyIGlzU2ltcGxlU2V0dGVyID0gaXNEZWZpbmVkKHZhbHVlKTtcbiAgICB2YXIgaXNTaW1wbGVHZXR0ZXIgPSAhaXNTaW1wbGVTZXR0ZXIgJiYga2V5ICYmICFpc09iamVjdChrZXkpO1xuICAgIHZhciBtYXNzR2V0dGVyID0gIWtleTtcbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsICFpc1NpbXBsZUdldHRlcik7XG4gICAgdmFyIGRhdGEgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmRhdGE7XG5cbiAgICBpZiAoaXNTaW1wbGVTZXR0ZXIpIHsgLy8gZGF0YSgna2V5JywgdmFsdWUpXG4gICAgICBkYXRhW2tlYmFiVG9DYW1lbChrZXkpXSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobWFzc0dldHRlcikgeyAgLy8gZGF0YSgpXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzU2ltcGxlR2V0dGVyKSB7IC8vIGRhdGEoJ2tleScpXG4gICAgICAgICAgLy8gZG9uJ3QgZm9yY2UgY3JlYXRpb24gb2YgZXhwYW5kb1N0b3JlIGlmIGl0IGRvZXNuJ3QgZXhpc3QgeWV0XG4gICAgICAgICAgcmV0dXJuIGRhdGEgJiYgZGF0YVtrZWJhYlRvQ2FtZWwoa2V5KV07XG4gICAgICAgIH0gZWxzZSB7IC8vIG1hc3Mtc2V0dGVyOiBkYXRhKHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfSlcbiAgICAgICAgICBmb3IgKHByb3AgaW4ga2V5KSB7XG4gICAgICAgICAgICBkYXRhW2tlYmFiVG9DYW1lbChwcm9wKV0gPSBrZXlbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIGlmICghZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuICgoJyAnICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICcgJykucmVwbGFjZSgvW1xcblxcdF0vZywgJyAnKS5cbiAgICAgIGluZGV4T2YoJyAnICsgc2VsZWN0b3IgKyAnICcpID4gLTEpO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmVDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XG4gIGlmIChjc3NDbGFzc2VzICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XG4gICAgdmFyIGV4aXN0aW5nQ2xhc3NlcyA9ICgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xuICAgIHZhciBuZXdDbGFzc2VzID0gZXhpc3RpbmdDbGFzc2VzO1xuXG4gICAgZm9yRWFjaChjc3NDbGFzc2VzLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNzc0NsYXNzKSB7XG4gICAgICBjc3NDbGFzcyA9IHRyaW0oY3NzQ2xhc3MpO1xuICAgICAgbmV3Q2xhc3NlcyA9IG5ld0NsYXNzZXMucmVwbGFjZSgnICcgKyBjc3NDbGFzcyArICcgJywgJyAnKTtcbiAgICB9KTtcblxuICAgIGlmIChuZXdDbGFzc2VzICE9PSBleGlzdGluZ0NsYXNzZXMpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRyaW0obmV3Q2xhc3NlcykpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVBZGRDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XG4gIGlmIChjc3NDbGFzc2VzICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XG4gICAgdmFyIGV4aXN0aW5nQ2xhc3NlcyA9ICgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xuICAgIHZhciBuZXdDbGFzc2VzID0gZXhpc3RpbmdDbGFzc2VzO1xuXG4gICAgZm9yRWFjaChjc3NDbGFzc2VzLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNzc0NsYXNzKSB7XG4gICAgICBjc3NDbGFzcyA9IHRyaW0oY3NzQ2xhc3MpO1xuICAgICAgaWYgKG5ld0NsYXNzZXMuaW5kZXhPZignICcgKyBjc3NDbGFzcyArICcgJykgPT09IC0xKSB7XG4gICAgICAgIG5ld0NsYXNzZXMgKz0gY3NzQ2xhc3MgKyAnICc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAobmV3Q2xhc3NlcyAhPT0gZXhpc3RpbmdDbGFzc2VzKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB0cmltKG5ld0NsYXNzZXMpKTtcbiAgICB9XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBqcUxpdGVBZGROb2Rlcyhyb290LCBlbGVtZW50cykge1xuICAvLyBUSElTIENPREUgSVMgVkVSWSBIT1QuIERvbid0IG1ha2UgY2hhbmdlcyB3aXRob3V0IGJlbmNobWFya2luZy5cblxuICBpZiAoZWxlbWVudHMpIHtcblxuICAgIC8vIGlmIGEgTm9kZSAodGhlIG1vc3QgY29tbW9uIGNhc2UpXG4gICAgaWYgKGVsZW1lbnRzLm5vZGVUeXBlKSB7XG4gICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cbiAgICAgIC8vIGlmIGFuIEFycmF5IG9yIE5vZGVMaXN0IGFuZCBub3QgYSBXaW5kb3dcbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJyAmJiBlbGVtZW50cy53aW5kb3cgIT09IGVsZW1lbnRzKSB7XG4gICAgICAgIGlmIChsZW5ndGgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuZnVuY3Rpb24ganFMaXRlQ29udHJvbGxlcihlbGVtZW50LCBuYW1lKSB7XG4gIHJldHVybiBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQsICckJyArIChuYW1lIHx8ICduZ0NvbnRyb2xsZXInKSArICdDb250cm9sbGVyJyk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcbiAgLy8gaWYgZWxlbWVudCBpcyB0aGUgZG9jdW1lbnQgb2JqZWN0IHdvcmsgd2l0aCB0aGUgaHRtbCBlbGVtZW50IGluc3RlYWRcbiAgLy8gdGhpcyBtYWtlcyAkKGRvY3VtZW50KS5zY29wZSgpIHBvc3NpYmxlXG4gIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRE9DVU1FTlQpIHtcbiAgICBlbGVtZW50ID0gZWxlbWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cbiAgdmFyIG5hbWVzID0gaXNBcnJheShuYW1lKSA/IG5hbWUgOiBbbmFtZV07XG5cbiAgd2hpbGUgKGVsZW1lbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBuYW1lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlID0ganFMaXRlLmRhdGEoZWxlbWVudCwgbmFtZXNbaV0pKSkgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIElmIGRlYWxpbmcgd2l0aCBhIGRvY3VtZW50IGZyYWdtZW50IG5vZGUgd2l0aCBhIGhvc3QgZWxlbWVudCwgYW5kIG5vIHBhcmVudCwgdXNlIHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBhcyB0aGUgcGFyZW50LiBUaGlzIGVuYWJsZXMgZGlyZWN0aXZlcyB3aXRoaW4gYSBTaGFkb3cgRE9NIG9yIHBvbHlmaWxsZWQgU2hhZG93IERPTVxuICAgIC8vIHRvIGxvb2t1cCBwYXJlbnQgY29udHJvbGxlcnMuXG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UICYmIGVsZW1lbnQuaG9zdCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlRW1wdHkoZWxlbWVudCkge1xuICBqcUxpdGVEZWFsb2MoZWxlbWVudCwgdHJ1ZSk7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlKGVsZW1lbnQsIGtlZXBEYXRhKSB7XG4gIGlmICgha2VlcERhdGEpIGpxTGl0ZURlYWxvYyhlbGVtZW50KTtcbiAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZURvY3VtZW50TG9hZGVkKGFjdGlvbiwgd2luKSB7XG4gIHdpbiA9IHdpbiB8fCB3aW5kb3c7XG4gIGlmICh3aW4uZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgIC8vIEZvcmNlIHRoZSBhY3Rpb24gdG8gYmUgcnVuIGFzeW5jIGZvciBjb25zaXN0ZW50IGJlaGF2aW9yXG4gICAgLy8gZnJvbSB0aGUgYWN0aW9uJ3MgcG9pbnQgb2Ygdmlld1xuICAgIC8vIGkuZS4gaXQgd2lsbCBkZWZpbml0ZWx5IG5vdCBiZSBpbiBhICRhcHBseVxuICAgIHdpbi5zZXRUaW1lb3V0KGFjdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gTm8gbmVlZCB0byB1bmJpbmQgdGhpcyBoYW5kbGVyIGFzIGxvYWQgaXMgb25seSBldmVyIGNhbGxlZCBvbmNlXG4gICAganFMaXRlKHdpbikub24oJ2xvYWQnLCBhY3Rpb24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVJlYWR5KGZuKSB7XG4gIGZ1bmN0aW9uIHRyaWdnZXIoKSB7XG4gICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0cmlnZ2VyKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRyaWdnZXIpO1xuICAgIGZuKCk7XG4gIH1cblxuICAvLyBjaGVjayBpZiBkb2N1bWVudCBpcyBhbHJlYWR5IGxvYWRlZFxuICBpZiAod2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICB3aW5kb3cuc2V0VGltZW91dChmbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gV2UgY2FuIG5vdCB1c2UganFMaXRlIHNpbmNlIHdlIGFyZSBub3QgZG9uZSBsb2FkaW5nIGFuZCBqUXVlcnkgY291bGQgYmUgbG9hZGVkIGxhdGVyLlxuXG4gICAgLy8gV29ya3MgZm9yIG1vZGVybiBicm93c2VycyBhbmQgSUU5XG4gICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0cmlnZ2VyKTtcblxuICAgIC8vIEZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQgZm9yIG90aGVyc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgdHJpZ2dlcik7XG4gIH1cbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBGdW5jdGlvbnMgd2hpY2ggYXJlIGRlY2xhcmVkIGRpcmVjdGx5LlxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG52YXIgSlFMaXRlUHJvdG90eXBlID0gSlFMaXRlLnByb3RvdHlwZSA9IHtcbiAgcmVhZHk6IGpxTGl0ZVJlYWR5LFxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gW107XG4gICAgZm9yRWFjaCh0aGlzLCBmdW5jdGlvbihlKSB7IHZhbHVlLnB1c2goJycgKyBlKTt9KTtcbiAgICByZXR1cm4gJ1snICsgdmFsdWUuam9pbignLCAnKSArICddJztcbiAgfSxcblxuICBlcTogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiAoaW5kZXggPj0gMCkgPyBqcUxpdGUodGhpc1tpbmRleF0pIDoganFMaXRlKHRoaXNbdGhpcy5sZW5ndGggKyBpbmRleF0pO1xuICB9LFxuXG4gIGxlbmd0aDogMCxcbiAgcHVzaDogcHVzaCxcbiAgc29ydDogW10uc29ydCxcbiAgc3BsaWNlOiBbXS5zcGxpY2Vcbn07XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gRnVuY3Rpb25zIGl0ZXJhdGluZyBnZXR0ZXIvc2V0dGVycy5cbi8vIHRoZXNlIGZ1bmN0aW9ucyByZXR1cm4gc2VsZiBvbiBzZXR0ZXIgYW5kXG4vLyB2YWx1ZSBvbiBnZXQuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbnZhciBCT09MRUFOX0FUVFIgPSB7fTtcbmZvckVhY2goJ211bHRpcGxlLHNlbGVjdGVkLGNoZWNrZWQsZGlzYWJsZWQscmVhZE9ubHkscmVxdWlyZWQsb3Blbicuc3BsaXQoJywnKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgQk9PTEVBTl9BVFRSW2xvd2VyY2FzZSh2YWx1ZSldID0gdmFsdWU7XG59KTtcbnZhciBCT09MRUFOX0VMRU1FTlRTID0ge307XG5mb3JFYWNoKCdpbnB1dCxzZWxlY3Qsb3B0aW9uLHRleHRhcmVhLGJ1dHRvbixmb3JtLGRldGFpbHMnLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gIEJPT0xFQU5fRUxFTUVOVFNbdmFsdWVdID0gdHJ1ZTtcbn0pO1xudmFyIEFMSUFTRURfQVRUUiA9IHtcbiAgJ25nTWlubGVuZ3RoJzogJ21pbmxlbmd0aCcsXG4gICduZ01heGxlbmd0aCc6ICdtYXhsZW5ndGgnLFxuICAnbmdNaW4nOiAnbWluJyxcbiAgJ25nTWF4JzogJ21heCcsXG4gICduZ1BhdHRlcm4nOiAncGF0dGVybicsXG4gICduZ1N0ZXAnOiAnc3RlcCdcbn07XG5cbmZ1bmN0aW9uIGdldEJvb2xlYW5BdHRyTmFtZShlbGVtZW50LCBuYW1lKSB7XG4gIC8vIGNoZWNrIGRvbSBsYXN0IHNpbmNlIHdlIHdpbGwgbW9zdCBsaWtlbHkgZmFpbCBvbiBuYW1lXG4gIHZhciBib29sZWFuQXR0ciA9IEJPT0xFQU5fQVRUUltuYW1lLnRvTG93ZXJDYXNlKCldO1xuXG4gIC8vIGJvb2xlYW5BdHRyIGlzIGhlcmUgdHdpY2UgdG8gbWluaW1pemUgRE9NIGFjY2Vzc1xuICByZXR1cm4gYm9vbGVhbkF0dHIgJiYgQk9PTEVBTl9FTEVNRU5UU1tub2RlTmFtZV8oZWxlbWVudCldICYmIGJvb2xlYW5BdHRyO1xufVxuXG5mdW5jdGlvbiBnZXRBbGlhc2VkQXR0ck5hbWUobmFtZSkge1xuICByZXR1cm4gQUxJQVNFRF9BVFRSW25hbWVdO1xufVxuXG5mb3JFYWNoKHtcbiAgZGF0YToganFMaXRlRGF0YSxcbiAgcmVtb3ZlRGF0YToganFMaXRlUmVtb3ZlRGF0YSxcbiAgaGFzRGF0YToganFMaXRlSGFzRGF0YSxcbiAgY2xlYW5EYXRhOiBmdW5jdGlvbiBqcUxpdGVDbGVhbkRhdGEobm9kZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBub2Rlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBqcUxpdGVSZW1vdmVEYXRhKG5vZGVzW2ldKTtcbiAgICAgIGpxTGl0ZU9mZihub2Rlc1tpXSk7XG4gICAgfVxuICB9XG59LCBmdW5jdGlvbihmbiwgbmFtZSkge1xuICBKUUxpdGVbbmFtZV0gPSBmbjtcbn0pO1xuXG5mb3JFYWNoKHtcbiAgZGF0YToganFMaXRlRGF0YSxcbiAgaW5oZXJpdGVkRGF0YToganFMaXRlSW5oZXJpdGVkRGF0YSxcblxuICBzY29wZTogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIC8vIENhbid0IHVzZSBqcUxpdGVEYXRhIGhlcmUgZGlyZWN0bHkgc28gd2Ugc3RheSBjb21wYXRpYmxlIHdpdGggalF1ZXJ5IVxuICAgIHJldHVybiBqcUxpdGUuZGF0YShlbGVtZW50LCAnJHNjb3BlJykgfHwganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LnBhcmVudE5vZGUgfHwgZWxlbWVudCwgWyckaXNvbGF0ZVNjb3BlJywgJyRzY29wZSddKTtcbiAgfSxcblxuICBpc29sYXRlU2NvcGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAvLyBDYW4ndCB1c2UganFMaXRlRGF0YSBoZXJlIGRpcmVjdGx5IHNvIHdlIHN0YXkgY29tcGF0aWJsZSB3aXRoIGpRdWVyeSFcbiAgICByZXR1cm4ganFMaXRlLmRhdGEoZWxlbWVudCwgJyRpc29sYXRlU2NvcGUnKSB8fCBqcUxpdGUuZGF0YShlbGVtZW50LCAnJGlzb2xhdGVTY29wZU5vVGVtcGxhdGUnKTtcbiAgfSxcblxuICBjb250cm9sbGVyOiBqcUxpdGVDb250cm9sbGVyLFxuXG4gIGluamVjdG9yOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgJyRpbmplY3RvcicpO1xuICB9LFxuXG4gIHJlbW92ZUF0dHI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUpIHtcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfSxcblxuICBoYXNDbGFzczoganFMaXRlSGFzQ2xhc3MsXG5cbiAgY3NzOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBjc3NLZWJhYlRvQ2FtZWwobmFtZSk7XG5cbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgZWxlbWVudC5zdHlsZVtuYW1lXSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5zdHlsZVtuYW1lXTtcbiAgICB9XG4gIH0sXG5cbiAgYXR0cjogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgcmV0O1xuICAgIHZhciBub2RlVHlwZSA9IGVsZW1lbnQubm9kZVR5cGU7XG4gICAgaWYgKG5vZGVUeXBlID09PSBOT0RFX1RZUEVfVEVYVCB8fCBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0FUVFJJQlVURSB8fCBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0NPTU1FTlQgfHxcbiAgICAgICFlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsb3dlcmNhc2VkTmFtZSA9IGxvd2VyY2FzZShuYW1lKTtcbiAgICB2YXIgaXNCb29sZWFuQXR0ciA9IEJPT0xFQU5fQVRUUltsb3dlcmNhc2VkTmFtZV07XG5cbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgLy8gc2V0dGVyXG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCAodmFsdWUgPT09IGZhbHNlICYmIGlzQm9vbGVhbkF0dHIpKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgaXNCb29sZWFuQXR0ciA/IGxvd2VyY2FzZWROYW1lIDogdmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBnZXR0ZXJcblxuICAgICAgcmV0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSk7XG5cbiAgICAgIGlmIChpc0Jvb2xlYW5BdHRyICYmIHJldCAhPT0gbnVsbCkge1xuICAgICAgICByZXQgPSBsb3dlcmNhc2VkTmFtZTtcbiAgICAgIH1cbiAgICAgIC8vIE5vcm1hbGl6ZSBub24tZXhpc3RpbmcgYXR0cmlidXRlcyB0byB1bmRlZmluZWQgKGFzIGpRdWVyeSkuXG4gICAgICByZXR1cm4gcmV0ID09PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xuICAgIH1cbiAgfSxcblxuICBwcm9wOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICBlbGVtZW50W25hbWVdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbGVtZW50W25hbWVdO1xuICAgIH1cbiAgfSxcblxuICB0ZXh0OiAoZnVuY3Rpb24oKSB7XG4gICAgZ2V0VGV4dC4kZHYgPSAnJztcbiAgICByZXR1cm4gZ2V0VGV4dDtcblxuICAgIGZ1bmN0aW9uIGdldFRleHQoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcbiAgICAgICAgcmV0dXJuIChub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQgfHwgbm9kZVR5cGUgPT09IE5PREVfVFlQRV9URVhUKSA/IGVsZW1lbnQudGV4dENvbnRlbnQgOiAnJztcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgICB9XG4gIH0pKCksXG5cbiAgdmFsOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGlmIChlbGVtZW50Lm11bHRpcGxlICYmIG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3JFYWNoKGVsZW1lbnQub3B0aW9ucywgZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gob3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgfSxcblxuICBodG1sOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LmlubmVySFRNTDtcbiAgICB9XG4gICAganFMaXRlRGVhbG9jKGVsZW1lbnQsIHRydWUpO1xuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdmFsdWU7XG4gIH0sXG5cbiAgZW1wdHk6IGpxTGl0ZUVtcHR5XG59LCBmdW5jdGlvbihmbiwgbmFtZSkge1xuICAvKipcbiAgICogUHJvcGVydGllczogd3JpdGVzIHJldHVybiBzZWxlY3Rpb24sIHJlYWRzIHJldHVybiBmaXJzdCB2YWx1ZVxuICAgKi9cbiAgSlFMaXRlLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKGFyZzEsIGFyZzIpIHtcbiAgICB2YXIgaSwga2V5O1xuICAgIHZhciBub2RlQ291bnQgPSB0aGlzLmxlbmd0aDtcblxuICAgIC8vIGpxTGl0ZUhhc0NsYXNzIGhhcyBvbmx5IHR3byBhcmd1bWVudHMsIGJ1dCBpcyBhIGdldHRlci1vbmx5IGZuLCBzbyB3ZSBuZWVkIHRvIHNwZWNpYWwtY2FzZSBpdFxuICAgIC8vIGluIGEgd2F5IHRoYXQgc3Vydml2ZXMgbWluaWZpY2F0aW9uLlxuICAgIC8vIGpxTGl0ZUVtcHR5IHRha2VzIG5vIGFyZ3VtZW50cyBidXQgaXMgYSBzZXR0ZXIuXG4gICAgaWYgKGZuICE9PSBqcUxpdGVFbXB0eSAmJlxuICAgICAgICAoaXNVbmRlZmluZWQoKGZuLmxlbmd0aCA9PT0gMiAmJiAoZm4gIT09IGpxTGl0ZUhhc0NsYXNzICYmIGZuICE9PSBqcUxpdGVDb250cm9sbGVyKSkgPyBhcmcxIDogYXJnMikpKSB7XG4gICAgICBpZiAoaXNPYmplY3QoYXJnMSkpIHtcblxuICAgICAgICAvLyB3ZSBhcmUgYSB3cml0ZSwgYnV0IHRoZSBvYmplY3QgcHJvcGVydGllcyBhcmUgdGhlIGtleS92YWx1ZXNcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGZuID09PSBqcUxpdGVEYXRhKSB7XG4gICAgICAgICAgICAvLyBkYXRhKCkgdGFrZXMgdGhlIHdob2xlIG9iamVjdCBpbiBqUXVlcnlcbiAgICAgICAgICAgIGZuKHRoaXNbaV0sIGFyZzEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBhcmcxKSB7XG4gICAgICAgICAgICAgIGZuKHRoaXNbaV0sIGtleSwgYXJnMVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIHNlbGYgZm9yIGNoYWluaW5nXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gd2UgYXJlIGEgcmVhZCwgc28gcmVhZCB0aGUgZmlyc3QgY2hpbGQuXG4gICAgICAgIC8vIFRPRE86IGRvIHdlIHN0aWxsIG5lZWQgdGhpcz9cbiAgICAgICAgdmFyIHZhbHVlID0gZm4uJGR2O1xuICAgICAgICAvLyBPbmx5IGlmIHdlIGhhdmUgJGR2IGRvIHdlIGl0ZXJhdGUgb3ZlciBhbGwsIG90aGVyd2lzZSBpdCBpcyBqdXN0IHRoZSBmaXJzdCBlbGVtZW50LlxuICAgICAgICB2YXIgamogPSAoaXNVbmRlZmluZWQodmFsdWUpKSA/IE1hdGgubWluKG5vZGVDb3VudCwgMSkgOiBub2RlQ291bnQ7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgamo7IGorKykge1xuICAgICAgICAgIHZhciBub2RlVmFsdWUgPSBmbih0aGlzW2pdLCBhcmcxLCBhcmcyKTtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlID8gdmFsdWUgKyBub2RlVmFsdWUgOiBub2RlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB3ZSBhcmUgYSB3cml0ZSwgc28gYXBwbHkgdG8gYWxsIGNoaWxkcmVuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpKyspIHtcbiAgICAgICAgZm4odGhpc1tpXSwgYXJnMSwgYXJnMik7XG4gICAgICB9XG4gICAgICAvLyByZXR1cm4gc2VsZiBmb3IgY2hhaW5pbmdcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVFdmVudEhhbmRsZXIoZWxlbWVudCwgZXZlbnRzKSB7XG4gIHZhciBldmVudEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCwgdHlwZSkge1xuICAgIC8vIGpRdWVyeSBzcGVjaWZpYyBhcGlcbiAgICBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBldmVudC5kZWZhdWx0UHJldmVudGVkO1xuICAgIH07XG5cbiAgICB2YXIgZXZlbnRGbnMgPSBldmVudHNbdHlwZSB8fCBldmVudC50eXBlXTtcbiAgICB2YXIgZXZlbnRGbnNMZW5ndGggPSBldmVudEZucyA/IGV2ZW50Rm5zLmxlbmd0aCA6IDA7XG5cbiAgICBpZiAoIWV2ZW50Rm5zTGVuZ3RoKSByZXR1cm47XG5cbiAgICBpZiAoaXNVbmRlZmluZWQoZXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKSkge1xuICAgICAgdmFyIG9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO1xuICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG5cbiAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgb3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24uY2FsbChldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBldmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPT09IHRydWU7XG4gICAgfTtcblxuICAgIC8vIFNvbWUgZXZlbnRzIGhhdmUgc3BlY2lhbCBoYW5kbGVycyB0aGF0IHdyYXAgdGhlIHJlYWwgaGFuZGxlclxuICAgIHZhciBoYW5kbGVyV3JhcHBlciA9IGV2ZW50Rm5zLnNwZWNpYWxIYW5kbGVyV3JhcHBlciB8fCBkZWZhdWx0SGFuZGxlcldyYXBwZXI7XG5cbiAgICAvLyBDb3B5IGV2ZW50IGhhbmRsZXJzIGluIGNhc2UgZXZlbnQgaGFuZGxlcnMgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIGV4ZWN1dGlvbi5cbiAgICBpZiAoKGV2ZW50Rm5zTGVuZ3RoID4gMSkpIHtcbiAgICAgIGV2ZW50Rm5zID0gc2hhbGxvd0NvcHkoZXZlbnRGbnMpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRGbnNMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgIGhhbmRsZXJXcmFwcGVyKGVsZW1lbnQsIGV2ZW50LCBldmVudEZuc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFRPRE86IHRoaXMgaXMgYSBoYWNrIGZvciBhbmd1bGFyTW9ja3MvY2xlYXJEYXRhQ2FjaGUgdGhhdCBtYWtlcyBpdCBwb3NzaWJsZSB0byBkZXJlZ2lzdGVyIGFsbFxuICAvLyAgICAgICBldmVudHMgb24gYGVsZW1lbnRgXG4gIGV2ZW50SGFuZGxlci5lbGVtID0gZWxlbWVudDtcbiAgcmV0dXJuIGV2ZW50SGFuZGxlcjtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdEhhbmRsZXJXcmFwcGVyKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7XG4gIGhhbmRsZXIuY2FsbChlbGVtZW50LCBldmVudCk7XG59XG5cbmZ1bmN0aW9uIHNwZWNpYWxNb3VzZUhhbmRsZXJXcmFwcGVyKHRhcmdldCwgZXZlbnQsIGhhbmRsZXIpIHtcbiAgLy8gUmVmZXIgdG8galF1ZXJ5J3MgaW1wbGVtZW50YXRpb24gb2YgbW91c2VlbnRlciAmIG1vdXNlbGVhdmVcbiAgLy8gUmVhZCBhYm91dCBtb3VzZWVudGVyIGFuZCBtb3VzZWxlYXZlOlxuICAvLyBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2V2ZW50c19tb3VzZS5odG1sI2xpbms4XG4gIHZhciByZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldDtcbiAgLy8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuICAvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuICBpZiAoIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhanFMaXRlQ29udGFpbnMuY2FsbCh0YXJnZXQsIHJlbGF0ZWQpKSkge1xuICAgIGhhbmRsZXIuY2FsbCh0YXJnZXQsIGV2ZW50KTtcbiAgfVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEZ1bmN0aW9ucyBpdGVyYXRpbmcgdHJhdmVyc2FsLlxuLy8gVGhlc2UgZnVuY3Rpb25zIGNoYWluIHJlc3VsdHMgaW50byBhIHNpbmdsZVxuLy8gc2VsZWN0b3IuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZvckVhY2goe1xuICByZW1vdmVEYXRhOiBqcUxpdGVSZW1vdmVEYXRhLFxuXG4gIG9uOiBmdW5jdGlvbiBqcUxpdGVPbihlbGVtZW50LCB0eXBlLCBmbiwgdW5zdXBwb3J0ZWQpIHtcbiAgICBpZiAoaXNEZWZpbmVkKHVuc3VwcG9ydGVkKSkgdGhyb3cganFMaXRlTWluRXJyKCdvbmFyZ3MnLCAnanFMaXRlI29uKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBvciBgZXZlbnREYXRhYCBwYXJhbWV0ZXJzJyk7XG5cbiAgICAvLyBEbyBub3QgYWRkIGV2ZW50IGhhbmRsZXJzIHRvIG5vbi1lbGVtZW50cyBiZWNhdXNlIHRoZXkgd2lsbCBub3QgYmUgY2xlYW5lZCB1cC5cbiAgICBpZiAoIWpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCB0cnVlKTtcbiAgICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlLmV2ZW50cztcbiAgICB2YXIgaGFuZGxlID0gZXhwYW5kb1N0b3JlLmhhbmRsZTtcblxuICAgIGlmICghaGFuZGxlKSB7XG4gICAgICBoYW5kbGUgPSBleHBhbmRvU3RvcmUuaGFuZGxlID0gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cyk7XG4gICAgfVxuXG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vc3RyaW5nLWluZGV4b2YtdnMtc3BsaXRcbiAgICB2YXIgdHlwZXMgPSB0eXBlLmluZGV4T2YoJyAnKSA+PSAwID8gdHlwZS5zcGxpdCgnICcpIDogW3R5cGVdO1xuICAgIHZhciBpID0gdHlwZXMubGVuZ3RoO1xuXG4gICAgdmFyIGFkZEhhbmRsZXIgPSBmdW5jdGlvbih0eXBlLCBzcGVjaWFsSGFuZGxlcldyYXBwZXIsIG5vRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAoIWV2ZW50Rm5zKSB7XG4gICAgICAgIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdID0gW107XG4gICAgICAgIGV2ZW50Rm5zLnNwZWNpYWxIYW5kbGVyV3JhcHBlciA9IHNwZWNpYWxIYW5kbGVyV3JhcHBlcjtcbiAgICAgICAgaWYgKHR5cGUgIT09ICckZGVzdHJveScgJiYgIW5vRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGV2ZW50Rm5zLnB1c2goZm4pO1xuICAgIH07XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0eXBlID0gdHlwZXNbaV07XG4gICAgICBpZiAoTU9VU0VfRVZFTlRfTUFQW3R5cGVdKSB7XG4gICAgICAgIGFkZEhhbmRsZXIoTU9VU0VfRVZFTlRfTUFQW3R5cGVdLCBzcGVjaWFsTW91c2VIYW5kbGVyV3JhcHBlcik7XG4gICAgICAgIGFkZEhhbmRsZXIodHlwZSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZEhhbmRsZXIodHlwZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG9mZjoganFMaXRlT2ZmLFxuXG4gIG9uZTogZnVuY3Rpb24oZWxlbWVudCwgdHlwZSwgZm4pIHtcbiAgICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xuXG4gICAgLy9hZGQgdGhlIGxpc3RlbmVyIHR3aWNlIHNvIHRoYXQgd2hlbiBpdCBpcyBjYWxsZWRcbiAgICAvL3lvdSBjYW4gcmVtb3ZlIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBhbmQgc3RpbGwgYmVcbiAgICAvL2FibGUgdG8gY2FsbCBlbGVtZW50Lm9mZihldiwgZm4pIG5vcm1hbGx5XG4gICAgZWxlbWVudC5vbih0eXBlLCBmdW5jdGlvbiBvbkZuKCkge1xuICAgICAgZWxlbWVudC5vZmYodHlwZSwgZm4pO1xuICAgICAgZWxlbWVudC5vZmYodHlwZSwgb25Gbik7XG4gICAgfSk7XG4gICAgZWxlbWVudC5vbih0eXBlLCBmbik7XG4gIH0sXG5cbiAgcmVwbGFjZVdpdGg6IGZ1bmN0aW9uKGVsZW1lbnQsIHJlcGxhY2VOb2RlKSB7XG4gICAgdmFyIGluZGV4LCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAganFMaXRlRGVhbG9jKGVsZW1lbnQpO1xuICAgIGZvckVhY2gobmV3IEpRTGl0ZShyZXBsYWNlTm9kZSksIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmIChpbmRleCkge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIGluZGV4Lm5leHRTaWJsaW5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobm9kZSwgZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBpbmRleCA9IG5vZGU7XG4gICAgfSk7XG4gIH0sXG5cbiAgY2hpbGRyZW46IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBbXTtcbiAgICBmb3JFYWNoKGVsZW1lbnQuY2hpbGROb2RlcywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IE5PREVfVFlQRV9FTEVNRU5UKSB7XG4gICAgICAgIGNoaWxkcmVuLnB1c2goZWxlbWVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9LFxuXG4gIGNvbnRlbnRzOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY29udGVudERvY3VtZW50IHx8IGVsZW1lbnQuY2hpbGROb2RlcyB8fCBbXTtcbiAgfSxcblxuICBhcHBlbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHtcbiAgICB2YXIgbm9kZVR5cGUgPSBlbGVtZW50Lm5vZGVUeXBlO1xuICAgIGlmIChub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0VMRU1FTlQgJiYgbm9kZVR5cGUgIT09IE5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVCkgcmV0dXJuO1xuXG4gICAgbm9kZSA9IG5ldyBKUUxpdGUobm9kZSk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBub2RlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IG5vZGVbaV07XG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJlcGVuZDogZnVuY3Rpb24oZWxlbWVudCwgbm9kZSkge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgdmFyIGluZGV4ID0gZWxlbWVudC5maXJzdENoaWxkO1xuICAgICAgZm9yRWFjaChuZXcgSlFMaXRlKG5vZGUpLCBmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICBlbGVtZW50Lmluc2VydEJlZm9yZShjaGlsZCwgaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHdyYXA6IGZ1bmN0aW9uKGVsZW1lbnQsIHdyYXBOb2RlKSB7XG4gICAganFMaXRlV3JhcE5vZGUoZWxlbWVudCwganFMaXRlKHdyYXBOb2RlKS5lcSgwKS5jbG9uZSgpWzBdKTtcbiAgfSxcblxuICByZW1vdmU6IGpxTGl0ZVJlbW92ZSxcblxuICBkZXRhY2g6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICBqcUxpdGVSZW1vdmUoZWxlbWVudCwgdHJ1ZSk7XG4gIH0sXG5cbiAgYWZ0ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcbiAgICB2YXIgaW5kZXggPSBlbGVtZW50LCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBuZXdFbGVtZW50ID0gbmV3IEpRTGl0ZShuZXdFbGVtZW50KTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmV3RWxlbWVudC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIHZhciBub2RlID0gbmV3RWxlbWVudFtpXTtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCBpbmRleC5uZXh0U2libGluZyk7XG4gICAgICAgIGluZGV4ID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYWRkQ2xhc3M6IGpxTGl0ZUFkZENsYXNzLFxuICByZW1vdmVDbGFzczoganFMaXRlUmVtb3ZlQ2xhc3MsXG5cbiAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yLCBjb25kaXRpb24pIHtcbiAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgIGZvckVhY2goc2VsZWN0b3Iuc3BsaXQoJyAnKSwgZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBjbGFzc0NvbmRpdGlvbiA9IGNvbmRpdGlvbjtcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKGNsYXNzQ29uZGl0aW9uKSkge1xuICAgICAgICAgIGNsYXNzQ29uZGl0aW9uID0gIWpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgKGNsYXNzQ29uZGl0aW9uID8ganFMaXRlQWRkQ2xhc3MgOiBqcUxpdGVSZW1vdmVDbGFzcykoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBwYXJlbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgIHJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQgPyBwYXJlbnQgOiBudWxsO1xuICB9LFxuXG4gIG5leHQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gIH0sXG5cbiAgZmluZDogZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICBpZiAoZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LFxuXG4gIGNsb25lOiBqcUxpdGVDbG9uZSxcblxuICB0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQsIGV4dHJhUGFyYW1ldGVycykge1xuXG4gICAgdmFyIGR1bW15RXZlbnQsIGV2ZW50Rm5zQ29weSwgaGFuZGxlckFyZ3M7XG4gICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50LnR5cGUgfHwgZXZlbnQ7XG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50KTtcbiAgICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5ldmVudHM7XG4gICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzICYmIGV2ZW50c1tldmVudE5hbWVdO1xuXG4gICAgaWYgKGV2ZW50Rm5zKSB7XG4gICAgICAvLyBDcmVhdGUgYSBkdW1teSBldmVudCB0byBwYXNzIHRvIHRoZSBoYW5kbGVyc1xuICAgICAgZHVtbXlFdmVudCA9IHtcbiAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgeyB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlOyB9LFxuICAgICAgICBpc0RlZmF1bHRQcmV2ZW50ZWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kZWZhdWx0UHJldmVudGVkID09PSB0cnVlOyB9LFxuICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgeyB0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7IH0sXG4gICAgICAgIGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID09PSB0cnVlOyB9LFxuICAgICAgICBzdG9wUHJvcGFnYXRpb246IG5vb3AsXG4gICAgICAgIHR5cGU6IGV2ZW50TmFtZSxcbiAgICAgICAgdGFyZ2V0OiBlbGVtZW50XG4gICAgICB9O1xuXG4gICAgICAvLyBJZiBhIGN1c3RvbSBldmVudCB3YXMgcHJvdmlkZWQgdGhlbiBleHRlbmQgb3VyIGR1bW15IGV2ZW50IHdpdGggaXRcbiAgICAgIGlmIChldmVudC50eXBlKSB7XG4gICAgICAgIGR1bW15RXZlbnQgPSBleHRlbmQoZHVtbXlFdmVudCwgZXZlbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3B5IGV2ZW50IGhhbmRsZXJzIGluIGNhc2UgZXZlbnQgaGFuZGxlcnMgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIGV4ZWN1dGlvbi5cbiAgICAgIGV2ZW50Rm5zQ29weSA9IHNoYWxsb3dDb3B5KGV2ZW50Rm5zKTtcbiAgICAgIGhhbmRsZXJBcmdzID0gZXh0cmFQYXJhbWV0ZXJzID8gW2R1bW15RXZlbnRdLmNvbmNhdChleHRyYVBhcmFtZXRlcnMpIDogW2R1bW15RXZlbnRdO1xuXG4gICAgICBmb3JFYWNoKGV2ZW50Rm5zQ29weSwgZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgaWYgKCFkdW1teUV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgICBmbi5hcHBseShlbGVtZW50LCBoYW5kbGVyQXJncyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSwgZnVuY3Rpb24oZm4sIG5hbWUpIHtcbiAgLyoqXG4gICAqIGNoYWluaW5nIGZ1bmN0aW9uc1xuICAgKi9cbiAgSlFMaXRlLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgICB2YXIgdmFsdWU7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBmbih0aGlzW2ldLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAvLyBhbnkgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIHZhbHVlIG5lZWRzIHRvIGJlIHdyYXBwZWRcbiAgICAgICAgICB2YWx1ZSA9IGpxTGl0ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpxTGl0ZUFkZE5vZGVzKHZhbHVlLCBmbih0aGlzW2ldLCBhcmcxLCBhcmcyLCBhcmczKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiB0aGlzO1xuICB9O1xufSk7XG5cbi8vIGJpbmQgbGVnYWN5IGJpbmQvdW5iaW5kIHRvIG9uL29mZlxuSlFMaXRlLnByb3RvdHlwZS5iaW5kID0gSlFMaXRlLnByb3RvdHlwZS5vbjtcbkpRTGl0ZS5wcm90b3R5cGUudW5iaW5kID0gSlFMaXRlLnByb3RvdHlwZS5vZmY7XG5cblxuLy8gUHJvdmlkZXIgZm9yIHByaXZhdGUgJCRqcUxpdGUgc2VydmljZVxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJGpxTGl0ZVByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBmdW5jdGlvbiAkJGpxTGl0ZSgpIHtcbiAgICByZXR1cm4gZXh0ZW5kKEpRTGl0ZSwge1xuICAgICAgaGFzQ2xhc3M6IGZ1bmN0aW9uKG5vZGUsIGNsYXNzZXMpIHtcbiAgICAgICAgaWYgKG5vZGUuYXR0cikgbm9kZSA9IG5vZGVbMF07XG4gICAgICAgIHJldHVybiBqcUxpdGVIYXNDbGFzcyhub2RlLCBjbGFzc2VzKTtcbiAgICAgIH0sXG4gICAgICBhZGRDbGFzczogZnVuY3Rpb24obm9kZSwgY2xhc3Nlcykge1xuICAgICAgICBpZiAobm9kZS5hdHRyKSBub2RlID0gbm9kZVswXTtcbiAgICAgICAgcmV0dXJuIGpxTGl0ZUFkZENsYXNzKG5vZGUsIGNsYXNzZXMpO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihub2RlLCBjbGFzc2VzKSB7XG4gICAgICAgIGlmIChub2RlLmF0dHIpIG5vZGUgPSBub2RlWzBdO1xuICAgICAgICByZXR1cm4ganFMaXRlUmVtb3ZlQ2xhc3Mobm9kZSwgY2xhc3Nlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYSBoYXNoIG9mIGFuICdvYmonLlxuICogSGFzaCBvZiBhOlxuICogIHN0cmluZyBpcyBzdHJpbmdcbiAqICBudW1iZXIgaXMgbnVtYmVyIGFzIHN0cmluZ1xuICogIG9iamVjdCBpcyBlaXRoZXIgcmVzdWx0IG9mIGNhbGxpbmcgJCRoYXNoS2V5IGZ1bmN0aW9uIG9uIHRoZSBvYmplY3Qgb3IgdW5pcXVlbHkgZ2VuZXJhdGVkIGlkLFxuICogICAgICAgICB0aGF0IGlzIGFsc28gYXNzaWduZWQgdG8gdGhlICQkaGFzaEtleSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBvYmpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGhhc2ggc3RyaW5nIHN1Y2ggdGhhdCB0aGUgc2FtZSBpbnB1dCB3aWxsIGhhdmUgdGhlIHNhbWUgaGFzaCBzdHJpbmcuXG4gKiAgICAgICAgIFRoZSByZXN1bHRpbmcgc3RyaW5nIGtleSBpcyBpbiAndHlwZTpoYXNoS2V5JyBmb3JtYXQuXG4gKi9cbmZ1bmN0aW9uIGhhc2hLZXkob2JqLCBuZXh0VWlkRm4pIHtcbiAgdmFyIGtleSA9IG9iaiAmJiBvYmouJCRoYXNoS2V5O1xuXG4gIGlmIChrZXkpIHtcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAga2V5ID0gb2JqLiQkaGFzaEtleSgpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgdmFyIG9ialR5cGUgPSB0eXBlb2Ygb2JqO1xuICBpZiAob2JqVHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAob2JqVHlwZSA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsKSkge1xuICAgIGtleSA9IG9iai4kJGhhc2hLZXkgPSBvYmpUeXBlICsgJzonICsgKG5leHRVaWRGbiB8fCBuZXh0VWlkKSgpO1xuICB9IGVsc2Uge1xuICAgIGtleSA9IG9ialR5cGUgKyAnOicgKyBvYmo7XG4gIH1cblxuICByZXR1cm4ga2V5O1xufVxuXG4vLyBBIG1pbmltYWwgRVMyMDE1IE1hcCBpbXBsZW1lbnRhdGlvbi5cbi8vIFNob3VsZCBiZSBidWcvZmVhdHVyZSBlcXVpdmFsZW50IHRvIHRoZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIG9mIHN1cHBvcnRlZCBicm93c2Vyc1xuLy8gKGZvciB0aGUgZmVhdHVyZXMgcmVxdWlyZWQgaW4gQW5ndWxhcikuXG4vLyBTZWUgaHR0cHM6Ly9rYW5nYXguZ2l0aHViLmlvL2NvbXBhdC10YWJsZS9lczYvI3Rlc3QtTWFwXG52YXIgbmFuS2V5ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmZ1bmN0aW9uIE5nTWFwU2hpbSgpIHtcbiAgdGhpcy5fa2V5cyA9IFtdO1xuICB0aGlzLl92YWx1ZXMgPSBbXTtcbiAgdGhpcy5fbGFzdEtleSA9IE5hTjtcbiAgdGhpcy5fbGFzdEluZGV4ID0gLTE7XG59XG5OZ01hcFNoaW0ucHJvdG90eXBlID0ge1xuICBfaWR4OiBmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoa2V5ID09PSB0aGlzLl9sYXN0S2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5fbGFzdEluZGV4O1xuICAgIH1cbiAgICB0aGlzLl9sYXN0S2V5ID0ga2V5O1xuICAgIHRoaXMuX2xhc3RJbmRleCA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgIHJldHVybiB0aGlzLl9sYXN0SW5kZXg7XG4gIH0sXG4gIF90cmFuc2Zvcm1LZXk6IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBpc051bWJlck5hTihrZXkpID8gbmFuS2V5IDoga2V5O1xuICB9LFxuICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgIGtleSA9IHRoaXMuX3RyYW5zZm9ybUtleShrZXkpO1xuICAgIHZhciBpZHggPSB0aGlzLl9pZHgoa2V5KTtcbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlc1tpZHhdO1xuICAgIH1cbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAga2V5ID0gdGhpcy5fdHJhbnNmb3JtS2V5KGtleSk7XG4gICAgdmFyIGlkeCA9IHRoaXMuX2lkeChrZXkpO1xuICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICBpZHggPSB0aGlzLl9sYXN0SW5kZXggPSB0aGlzLl9rZXlzLmxlbmd0aDtcbiAgICB9XG4gICAgdGhpcy5fa2V5c1tpZHhdID0ga2V5O1xuICAgIHRoaXMuX3ZhbHVlc1tpZHhdID0gdmFsdWU7XG5cbiAgICAvLyBTdXBwb3J0OiBJRTExXG4gICAgLy8gRG8gbm90IGByZXR1cm4gdGhpc2AgdG8gc2ltdWxhdGUgdGhlIHBhcnRpYWwgSUUxMSBpbXBsZW1lbnRhdGlvblxuICB9LFxuICBkZWxldGU6IGZ1bmN0aW9uKGtleSkge1xuICAgIGtleSA9IHRoaXMuX3RyYW5zZm9ybUtleShrZXkpO1xuICAgIHZhciBpZHggPSB0aGlzLl9pZHgoa2V5KTtcbiAgICBpZiAoaWR4ID09PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9rZXlzLnNwbGljZShpZHgsIDEpO1xuICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICB0aGlzLl9sYXN0S2V5ID0gTmFOO1xuICAgIHRoaXMuX2xhc3RJbmRleCA9IC0xO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vLyBGb3Igbm93LCBhbHdheXMgdXNlIGBOZ01hcFNoaW1gLCBldmVuIGlmIGB3aW5kb3cuTWFwYCBpcyBhdmFpbGFibGUuIFNvbWUgbmF0aXZlIGltcGxlbWVudGF0aW9uc1xuLy8gYXJlIHN0aWxsIGJ1Z2d5IChvZnRlbiBpbiBzdWJ0bGUgd2F5cykgYW5kIGNhbiBjYXVzZSBoYXJkLXRvLWRlYnVnIGZhaWx1cmVzLiBXaGVuIG5hdGl2ZSBgTWFwYFxuLy8gaW1wbGVtZW50YXRpb25zIGdldCBtb3JlIHN0YWJsZSwgd2UgY2FuIHJlY29uc2lkZXIgc3dpdGNoaW5nIHRvIGB3aW5kb3cuTWFwYCAod2hlbiBhdmFpbGFibGUpLlxudmFyIE5nTWFwID0gTmdNYXBTaGltO1xuXG52YXIgJCRNYXBQcm92aWRlciA9IFsvKiogQHRoaXMgKi9mdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gW2Z1bmN0aW9uKCkge1xuICAgIHJldHVybiBOZ01hcDtcbiAgfV07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBuYW1lIGFuZ3VsYXIuaW5qZWN0b3JcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGFuIGluamVjdG9yIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGZvciByZXRyaWV2aW5nIHNlcnZpY2VzIGFzIHdlbGwgYXMgZm9yXG4gKiBkZXBlbmRlbmN5IGluamVjdGlvbiAoc2VlIHtAbGluayBndWlkZS9kaSBkZXBlbmRlbmN5IGluamVjdGlvbn0pLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZ3xGdW5jdGlvbj59IG1vZHVsZXMgQSBsaXN0IG9mIG1vZHVsZSBmdW5jdGlvbnMgb3IgdGhlaXIgYWxpYXNlcy4gU2VlXG4gKiAgICAge0BsaW5rIGFuZ3VsYXIubW9kdWxlfS4gVGhlIGBuZ2AgbW9kdWxlIG11c3QgYmUgZXhwbGljaXRseSBhZGRlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtzdHJpY3REaT1mYWxzZV0gV2hldGhlciB0aGUgaW5qZWN0b3Igc2hvdWxkIGJlIGluIHN0cmljdCBtb2RlLCB3aGljaFxuICogICAgIGRpc2FsbG93cyBhcmd1bWVudCBuYW1lIGFubm90YXRpb24gaW5mZXJlbmNlLlxuICogQHJldHVybnMge2luamVjdG9yfSBJbmplY3RvciBvYmplY3QuIFNlZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cbiAqXG4gKiBAZXhhbXBsZVxuICogVHlwaWNhbCB1c2FnZVxuICogYGBganNcbiAqICAgLy8gY3JlYXRlIGFuIGluamVjdG9yXG4gKiAgIHZhciAkaW5qZWN0b3IgPSBhbmd1bGFyLmluamVjdG9yKFsnbmcnXSk7XG4gKlxuICogICAvLyB1c2UgdGhlIGluamVjdG9yIHRvIGtpY2sgb2ZmIHlvdXIgYXBwbGljYXRpb25cbiAqICAgLy8gdXNlIHRoZSB0eXBlIGluZmVyZW5jZSB0byBhdXRvIGluamVjdCBhcmd1bWVudHMsIG9yIHVzZSBpbXBsaWNpdCBpbmplY3Rpb25cbiAqICAgJGluamVjdG9yLmludm9rZShmdW5jdGlvbigkcm9vdFNjb3BlLCAkY29tcGlsZSwgJGRvY3VtZW50KSB7XG4gKiAgICAgJGNvbXBpbGUoJGRvY3VtZW50KSgkcm9vdFNjb3BlKTtcbiAqICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBTb21ldGltZXMgeW91IHdhbnQgdG8gZ2V0IGFjY2VzcyB0byB0aGUgaW5qZWN0b3Igb2YgYSBjdXJyZW50bHkgcnVubmluZyBBbmd1bGFySlMgYXBwXG4gKiBmcm9tIG91dHNpZGUgQW5ndWxhckpTLiBQZXJoYXBzLCB5b3Ugd2FudCB0byBpbmplY3QgYW5kIGNvbXBpbGUgc29tZSBtYXJrdXAgYWZ0ZXIgdGhlXG4gKiBhcHBsaWNhdGlvbiBoYXMgYmVlbiBib290c3RyYXBwZWQuIFlvdSBjYW4gZG8gdGhpcyB1c2luZyB0aGUgZXh0cmEgYGluamVjdG9yKClgIGFkZGVkXG4gKiB0byBKUXVlcnkvanFMaXRlIGVsZW1lbnRzLiBTZWUge0BsaW5rIGFuZ3VsYXIuZWxlbWVudH0uXG4gKlxuICogKlRoaXMgaXMgZmFpcmx5IHJhcmUgYnV0IGNvdWxkIGJlIHRoZSBjYXNlIGlmIGEgdGhpcmQgcGFydHkgbGlicmFyeSBpcyBpbmplY3RpbmcgdGhlXG4gKiBtYXJrdXAuKlxuICpcbiAqIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSBhIG5ldyBibG9jayBvZiBIVE1MIGNvbnRhaW5pbmcgYSBgbmctY29udHJvbGxlcmBcbiAqIGRpcmVjdGl2ZSBpcyBhZGRlZCB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCBib2R5IGJ5IEpRdWVyeS4gV2UgdGhlbiBjb21waWxlIGFuZCBsaW5rXG4gKiBpdCBpbnRvIHRoZSBjdXJyZW50IEFuZ3VsYXJKUyBzY29wZS5cbiAqXG4gKiBgYGBqc1xuICogdmFyICRkaXYgPSAkKCc8ZGl2IG5nLWNvbnRyb2xsZXI9XCJNeUN0cmxcIj57e2NvbnRlbnQubGFiZWx9fTwvZGl2PicpO1xuICogJChkb2N1bWVudC5ib2R5KS5hcHBlbmQoJGRpdik7XG4gKlxuICogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5pbmplY3RvcigpLmludm9rZShmdW5jdGlvbigkY29tcGlsZSkge1xuICogICB2YXIgc2NvcGUgPSBhbmd1bGFyLmVsZW1lbnQoJGRpdikuc2NvcGUoKTtcbiAqICAgJGNvbXBpbGUoJGRpdikoc2NvcGUpO1xuICogfSk7XG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgYXV0b1xuICogQGluc3RhbGxhdGlvblxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogSW1wbGljaXQgbW9kdWxlIHdoaWNoIGdldHMgYXV0b21hdGljYWxseSBhZGRlZCB0byBlYWNoIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxuICovXG5cbnZhciBBUlJPV19BUkcgPSAvXihbXihdKz8pPT4vO1xudmFyIEZOX0FSR1MgPSAvXlteKF0qXFwoXFxzKihbXildKilcXCkvbTtcbnZhciBGTl9BUkdfU1BMSVQgPSAvLC87XG52YXIgRk5fQVJHID0gL15cXHMqKF8/KShcXFMrPylcXDFcXHMqJC87XG52YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWc7XG52YXIgJGluamVjdG9yTWluRXJyID0gbWluRXJyKCckaW5qZWN0b3InKTtcblxuZnVuY3Rpb24gc3RyaW5naWZ5Rm4oZm4pIHtcbiAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGZuKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFyZ3MoZm4pIHtcbiAgdmFyIGZuVGV4dCA9IHN0cmluZ2lmeUZuKGZuKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyksXG4gICAgICBhcmdzID0gZm5UZXh0Lm1hdGNoKEFSUk9XX0FSRykgfHwgZm5UZXh0Lm1hdGNoKEZOX0FSR1MpO1xuICByZXR1cm4gYXJncztcbn1cblxuZnVuY3Rpb24gYW5vbkZuKGZuKSB7XG4gIC8vIEZvciBhbm9ueW1vdXMgZnVuY3Rpb25zLCBzaG93aW5nIGF0IHRoZSB2ZXJ5IGxlYXN0IHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgY2FuIGhlbHAgaW5cbiAgLy8gZGVidWdnaW5nLlxuICB2YXIgYXJncyA9IGV4dHJhY3RBcmdzKGZuKTtcbiAgaWYgKGFyZ3MpIHtcbiAgICByZXR1cm4gJ2Z1bmN0aW9uKCcgKyAoYXJnc1sxXSB8fCAnJykucmVwbGFjZSgvW1xcc1xcclxcbl0rLywgJyAnKSArICcpJztcbiAgfVxuICByZXR1cm4gJ2ZuJztcbn1cblxuZnVuY3Rpb24gYW5ub3RhdGUoZm4sIHN0cmljdERpLCBuYW1lKSB7XG4gIHZhciAkaW5qZWN0LFxuICAgICAgYXJnRGVjbCxcbiAgICAgIGxhc3Q7XG5cbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmICghKCRpbmplY3QgPSBmbi4kaW5qZWN0KSkge1xuICAgICAgJGluamVjdCA9IFtdO1xuICAgICAgaWYgKGZuLmxlbmd0aCkge1xuICAgICAgICBpZiAoc3RyaWN0RGkpIHtcbiAgICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpIHx8ICFuYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gZm4ubmFtZSB8fCBhbm9uRm4oZm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3N0cmljdGRpJyxcbiAgICAgICAgICAgICd7MH0gaXMgbm90IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gYW5kIGNhbm5vdCBiZSBpbnZva2VkIGluIHN0cmljdCBtb2RlJywgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXJnRGVjbCA9IGV4dHJhY3RBcmdzKGZuKTtcbiAgICAgICAgZm9yRWFjaChhcmdEZWNsWzFdLnNwbGl0KEZOX0FSR19TUExJVCksIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgIGFyZy5yZXBsYWNlKEZOX0FSRywgZnVuY3Rpb24oYWxsLCB1bmRlcnNjb3JlLCBuYW1lKSB7XG4gICAgICAgICAgICAkaW5qZWN0LnB1c2gobmFtZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZm4uJGluamVjdCA9ICRpbmplY3Q7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzQXJyYXkoZm4pKSB7XG4gICAgbGFzdCA9IGZuLmxlbmd0aCAtIDE7XG4gICAgYXNzZXJ0QXJnRm4oZm5bbGFzdF0sICdmbicpO1xuICAgICRpbmplY3QgPSBmbi5zbGljZSgwLCBsYXN0KTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnRBcmdGbihmbiwgJ2ZuJywgdHJ1ZSk7XG4gIH1cbiAgcmV0dXJuICRpbmplY3Q7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaW5qZWN0b3JcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgJGluamVjdG9yYCBpcyB1c2VkIHRvIHJldHJpZXZlIG9iamVjdCBpbnN0YW5jZXMgYXMgZGVmaW5lZCBieVxuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUgcHJvdmlkZXJ9LCBpbnN0YW50aWF0ZSB0eXBlcywgaW52b2tlIG1ldGhvZHMsXG4gKiBhbmQgbG9hZCBtb2R1bGVzLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgYWx3YXlzIGhvbGRzIHRydWU6XG4gKlxuICogYGBganNcbiAqICAgdmFyICRpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoKTtcbiAqICAgZXhwZWN0KCRpbmplY3Rvci5nZXQoJyRpbmplY3RvcicpKS50b0JlKCRpbmplY3Rvcik7XG4gKiAgIGV4cGVjdCgkaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICogICAgIHJldHVybiAkaW5qZWN0b3I7XG4gKiAgIH0pKS50b0JlKCRpbmplY3Rvcik7XG4gKiBgYGBcbiAqXG4gKiAjIyBJbmplY3Rpb24gRnVuY3Rpb24gQW5ub3RhdGlvblxuICpcbiAqIEphdmFTY3JpcHQgZG9lcyBub3QgaGF2ZSBhbm5vdGF0aW9ucywgYW5kIGFubm90YXRpb25zIGFyZSBuZWVkZWQgZm9yIGRlcGVuZGVuY3kgaW5qZWN0aW9uLiBUaGVcbiAqIGZvbGxvd2luZyBhcmUgYWxsIHZhbGlkIHdheXMgb2YgYW5ub3RhdGluZyBmdW5jdGlvbiB3aXRoIGluamVjdGlvbiBhcmd1bWVudHMgYW5kIGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIGBgYGpzXG4gKiAgIC8vIGluZmVycmVkIChvbmx5IHdvcmtzIGlmIGNvZGUgbm90IG1pbmlmaWVkL29iZnVzY2F0ZWQpXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oc2VydmljZUEpe30pO1xuICpcbiAqICAgLy8gYW5ub3RhdGVkXG4gKiAgIGZ1bmN0aW9uIGV4cGxpY2l0KHNlcnZpY2VBKSB7fTtcbiAqICAgZXhwbGljaXQuJGluamVjdCA9IFsnc2VydmljZUEnXTtcbiAqICAgJGluamVjdG9yLmludm9rZShleHBsaWNpdCk7XG4gKlxuICogICAvLyBpbmxpbmVcbiAqICAgJGluamVjdG9yLmludm9rZShbJ3NlcnZpY2VBJywgZnVuY3Rpb24oc2VydmljZUEpe31dKTtcbiAqIGBgYFxuICpcbiAqICMjIyBJbmZlcmVuY2VcbiAqXG4gKiBJbiBKYXZhU2NyaXB0IGNhbGxpbmcgYHRvU3RyaW5nKClgIG9uIGEgZnVuY3Rpb24gcmV0dXJucyB0aGUgZnVuY3Rpb24gZGVmaW5pdGlvbi4gVGhlIGRlZmluaXRpb25cbiAqIGNhbiB0aGVuIGJlIHBhcnNlZCBhbmQgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cyBjYW4gYmUgZXh0cmFjdGVkLiBUaGlzIG1ldGhvZCBvZiBkaXNjb3ZlcmluZ1xuICogYW5ub3RhdGlvbnMgaXMgZGlzYWxsb3dlZCB3aGVuIHRoZSBpbmplY3RvciBpcyBpbiBzdHJpY3QgbW9kZS5cbiAqICpOT1RFOiogVGhpcyBkb2VzIG5vdCB3b3JrIHdpdGggbWluaWZpY2F0aW9uLCBhbmQgb2JmdXNjYXRpb24gdG9vbHMgc2luY2UgdGhlc2UgdG9vbHMgY2hhbmdlIHRoZVxuICogYXJndW1lbnQgbmFtZXMuXG4gKlxuICogIyMjIGAkaW5qZWN0YCBBbm5vdGF0aW9uXG4gKiBCeSBhZGRpbmcgYW4gYCRpbmplY3RgIHByb3BlcnR5IG9udG8gYSBmdW5jdGlvbiB0aGUgaW5qZWN0aW9uIHBhcmFtZXRlcnMgY2FuIGJlIHNwZWNpZmllZC5cbiAqXG4gKiAjIyMgSW5saW5lXG4gKiBBcyBhbiBhcnJheSBvZiBpbmplY3Rpb24gbmFtZXMsIHdoZXJlIHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGFycmF5IGlzIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3BlcnR5XG4gKiBAbmFtZSAkaW5qZWN0b3IjbW9kdWxlc1xuICogQHR5cGUge09iamVjdH1cbiAqIEBkZXNjcmlwdGlvblxuICogQSBoYXNoIGNvbnRhaW5pbmcgYWxsIHRoZSBtb2R1bGVzIHRoYXQgaGF2ZSBiZWVuIGxvYWRlZCBpbnRvIHRoZVxuICogJGluamVjdG9yLlxuICpcbiAqIFlvdSBjYW4gdXNlIHRoaXMgcHJvcGVydHkgdG8gZmluZCBvdXQgaW5mb3JtYXRpb24gYWJvdXQgYSBtb2R1bGUgdmlhIHRoZVxuICoge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2luZm8gYG15TW9kdWxlLmluZm8oLi4uKWB9IG1ldGhvZC5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHZhciBpbmZvID0gJGluamVjdG9yLm1vZHVsZXNbJ25nQW5pbWF0ZSddLmluZm8oKTtcbiAqIGBgYFxuICpcbiAqICoqRG8gbm90IHVzZSB0aGlzIHByb3BlcnR5IHRvIGF0dGVtcHQgdG8gbW9kaWZ5IHRoZSBtb2R1bGVzIGFmdGVyIHRoZSBhcHBsaWNhdGlvblxuICogaGFzIGJlZW4gYm9vdHN0cmFwcGVkLioqXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNnZXRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiBhbiBpbnN0YW5jZSBvZiB0aGUgc2VydmljZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UgdG8gcmV0cmlldmUuXG4gKiBAcGFyYW0ge3N0cmluZz19IGNhbGxlciBBbiBvcHRpb25hbCBzdHJpbmcgdG8gcHJvdmlkZSB0aGUgb3JpZ2luIG9mIHRoZSBmdW5jdGlvbiBjYWxsIGZvciBlcnJvciBtZXNzYWdlcy5cbiAqIEByZXR1cm4geyp9IFRoZSBpbnN0YW5jZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNpbnZva2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEludm9rZSB0aGUgbWV0aG9kIGFuZCBzdXBwbHkgdGhlIG1ldGhvZCBhcmd1bWVudHMgZnJvbSB0aGUgYCRpbmplY3RvcmAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZm4gVGhlIGluamVjdGFibGUgZnVuY3Rpb24gdG8gaW52b2tlLiBGdW5jdGlvbiBwYXJhbWV0ZXJzIGFyZVxuICogICBpbmplY3RlZCBhY2NvcmRpbmcgdG8gdGhlIHtAbGluayBndWlkZS9kaSAkaW5qZWN0IEFubm90YXRpb259IHJ1bGVzLlxuICogQHBhcmFtIHtPYmplY3Q9fSBzZWxmIFRoZSBgdGhpc2AgZm9yIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gbG9jYWxzIE9wdGlvbmFsIG9iamVjdC4gSWYgcHJlc2V0IHRoZW4gYW55IGFyZ3VtZW50IG5hbWVzIGFyZSByZWFkIGZyb20gdGhpc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0IGZpcnN0LCBiZWZvcmUgdGhlIGAkaW5qZWN0b3JgIGlzIGNvbnN1bHRlZC5cbiAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGludm9rZWQgYGZuYCBmdW5jdGlvbi5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNoYXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFsbG93cyB0aGUgdXNlciB0byBxdWVyeSBpZiB0aGUgcGFydGljdWxhciBzZXJ2aWNlIGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBpbmplY3RvciBoYXMgZ2l2ZW4gc2VydmljZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNpbnN0YW50aWF0ZVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgSlMgdHlwZS4gVGhlIG1ldGhvZCB0YWtlcyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBpbnZva2VzIHRoZSBuZXdcbiAqIG9wZXJhdG9yLCBhbmQgc3VwcGxpZXMgYWxsIG9mIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGFzIHNwZWNpZmllZCBieSB0aGVcbiAqIGNvbnN0cnVjdG9yIGFubm90YXRpb24uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gVHlwZSBBbm5vdGF0ZWQgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdD19IGxvY2FscyBPcHRpb25hbCBvYmplY3QuIElmIHByZXNldCB0aGVuIGFueSBhcmd1bWVudCBuYW1lcyBhcmUgcmVhZCBmcm9tIHRoaXNcbiAqIG9iamVjdCBmaXJzdCwgYmVmb3JlIHRoZSBgJGluamVjdG9yYCBpcyBjb25zdWx0ZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBuZXcgaW5zdGFuY2Ugb2YgYFR5cGVgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2Fubm90YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHNlcnZpY2UgbmFtZXMgd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIHJlcXVlc3RpbmcgZm9yIGluamVjdGlvbi4gVGhpcyBBUEkgaXNcbiAqIHVzZWQgYnkgdGhlIGluamVjdG9yIHRvIGRldGVybWluZSB3aGljaCBzZXJ2aWNlcyBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGZ1bmN0aW9uIHdoZW4gdGhlXG4gKiBmdW5jdGlvbiBpcyBpbnZva2VkLiBUaGVyZSBhcmUgdGhyZWUgd2F5cyBpbiB3aGljaCB0aGUgZnVuY3Rpb24gY2FuIGJlIGFubm90YXRlZCB3aXRoIHRoZSBuZWVkZWRcbiAqIGRlcGVuZGVuY2llcy5cbiAqXG4gKiAjIyMjIEFyZ3VtZW50IG5hbWVzXG4gKlxuICogVGhlIHNpbXBsZXN0IGZvcm0gaXMgdG8gZXh0cmFjdCB0aGUgZGVwZW5kZW5jaWVzIGZyb20gdGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24uIFRoaXMgaXMgZG9uZVxuICogYnkgY29udmVydGluZyB0aGUgZnVuY3Rpb24gaW50byBhIHN0cmluZyB1c2luZyBgdG9TdHJpbmcoKWAgbWV0aG9kIGFuZCBleHRyYWN0aW5nIHRoZSBhcmd1bWVudFxuICogbmFtZXMuXG4gKiBgYGBqc1xuICogICAvLyBHaXZlblxuICogICBmdW5jdGlvbiBNeUNvbnRyb2xsZXIoJHNjb3BlLCAkcm91dGUpIHtcbiAqICAgICAvLyAuLi5cbiAqICAgfVxuICpcbiAqICAgLy8gVGhlblxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoTXlDb250cm9sbGVyKSkudG9FcXVhbChbJyRzY29wZScsICckcm91dGUnXSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGRpc2FsbG93IHRoaXMgbWV0aG9kIGJ5IHVzaW5nIHN0cmljdCBpbmplY3Rpb24gbW9kZS5cbiAqXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIHdpdGggY29kZSBtaW5pZmljYXRpb24gLyBvYmZ1c2NhdGlvbi4gRm9yIHRoaXMgcmVhc29uIHRoZSBmb2xsb3dpbmdcbiAqIGFubm90YXRpb24gc3RyYXRlZ2llcyBhcmUgc3VwcG9ydGVkLlxuICpcbiAqICMjIyMgVGhlIGAkaW5qZWN0YCBwcm9wZXJ0eVxuICpcbiAqIElmIGEgZnVuY3Rpb24gaGFzIGFuIGAkaW5qZWN0YCBwcm9wZXJ0eSBhbmQgaXRzIHZhbHVlIGlzIGFuIGFycmF5IG9mIHN0cmluZ3MsIHRoZW4gdGhlIHN0cmluZ3NcbiAqIHJlcHJlc2VudCBuYW1lcyBvZiBzZXJ2aWNlcyB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBmdW5jdGlvbi5cbiAqIGBgYGpzXG4gKiAgIC8vIEdpdmVuXG4gKiAgIHZhciBNeUNvbnRyb2xsZXIgPSBmdW5jdGlvbihvYmZ1c2NhdGVkU2NvcGUsIG9iZnVzY2F0ZWRSb3V0ZSkge1xuICogICAgIC8vIC4uLlxuICogICB9XG4gKiAgIC8vIERlZmluZSBmdW5jdGlvbiBkZXBlbmRlbmNpZXNcbiAqICAgTXlDb250cm9sbGVyWyckaW5qZWN0J10gPSBbJyRzY29wZScsICckcm91dGUnXTtcbiAqXG4gKiAgIC8vIFRoZW5cbiAqICAgZXhwZWN0KGluamVjdG9yLmFubm90YXRlKE15Q29udHJvbGxlcikpLnRvRXF1YWwoWyckc2NvcGUnLCAnJHJvdXRlJ10pO1xuICogYGBgXG4gKlxuICogIyMjIyBUaGUgYXJyYXkgbm90YXRpb25cbiAqXG4gKiBJdCBpcyBvZnRlbiBkZXNpcmFibGUgdG8gaW5saW5lIEluamVjdGVkIGZ1bmN0aW9ucyBhbmQgdGhhdCdzIHdoZW4gc2V0dGluZyB0aGUgYCRpbmplY3RgIHByb3BlcnR5XG4gKiBpcyB2ZXJ5IGluY29udmVuaWVudC4gSW4gdGhlc2Ugc2l0dWF0aW9ucyB1c2luZyB0aGUgYXJyYXkgbm90YXRpb24gdG8gc3BlY2lmeSB0aGUgZGVwZW5kZW5jaWVzIGluXG4gKiBhIHdheSB0aGF0IHN1cnZpdmVzIG1pbmlmaWNhdGlvbiBpcyBhIGJldHRlciBjaG9pY2U6XG4gKlxuICogYGBganNcbiAqICAgLy8gV2Ugd2lzaCB0byB3cml0ZSB0aGlzIChub3QgbWluaWZpY2F0aW9uIC8gb2JmdXNjYXRpb24gc2FmZSlcbiAqICAgaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlLCAkcm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH0pO1xuICpcbiAqICAgLy8gV2UgYXJlIGZvcmNlZCB0byB3cml0ZSBicmVhayBpbmxpbmluZ1xuICogICB2YXIgdG1wRm4gPSBmdW5jdGlvbihvYmZ1c2NhdGVkQ29tcGlsZSwgb2JmdXNjYXRlZFJvb3RTY29wZSkge1xuICogICAgIC8vIC4uLlxuICogICB9O1xuICogICB0bXBGbi4kaW5qZWN0ID0gWyckY29tcGlsZScsICckcm9vdFNjb3BlJ107XG4gKiAgIGluamVjdG9yLmludm9rZSh0bXBGbik7XG4gKlxuICogICAvLyBUbyBiZXR0ZXIgc3VwcG9ydCBpbmxpbmUgZnVuY3Rpb24gdGhlIGlubGluZSBhbm5vdGF0aW9uIGlzIHN1cHBvcnRlZFxuICogICBpbmplY3Rvci5pbnZva2UoWyckY29tcGlsZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24ob2JmQ29tcGlsZSwgb2JmUm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH1dKTtcbiAqXG4gKiAgIC8vIFRoZXJlZm9yZVxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoXG4gKiAgICAgIFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKG9iZnVzXyRjb21waWxlLCBvYmZ1c18kcm9vdFNjb3BlKSB7fV0pXG4gKiAgICApLnRvRXF1YWwoWyckY29tcGlsZScsICckcm9vdFNjb3BlJ10pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZm4gRnVuY3Rpb24gZm9yIHdoaWNoIGRlcGVuZGVudCBzZXJ2aWNlIG5hbWVzIG5lZWQgdG9cbiAqIGJlIHJldHJpZXZlZCBhcyBkZXNjcmliZWQgYWJvdmUuXG4gKlxuICogQHBhcmFtIHtib29sZWFuPX0gW3N0cmljdERpPWZhbHNlXSBEaXNhbGxvdyBhcmd1bWVudCBuYW1lIGFubm90YXRpb24gaW5mZXJlbmNlLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheS48c3RyaW5nPn0gVGhlIG5hbWVzIG9mIHRoZSBzZXJ2aWNlcyB3aGljaCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXG4gKi9cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2xvYWROZXdNb2R1bGVzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogKipUaGlzIGlzIGEgZGFuZ2Vyb3VzIEFQSSwgd2hpY2ggeW91IHVzZSBhdCB5b3VyIG93biByaXNrISoqXG4gKlxuICogQWRkIHRoZSBzcGVjaWZpZWQgbW9kdWxlcyB0byB0aGUgY3VycmVudCBpbmplY3Rvci5cbiAqXG4gKiBUaGlzIG1ldGhvZCB3aWxsIGFkZCBlYWNoIG9mIHRoZSBpbmplY3RhYmxlcyB0byB0aGUgaW5qZWN0b3IgYW5kIGV4ZWN1dGUgYWxsIG9mIHRoZSBjb25maWcgYW5kIHJ1blxuICogYmxvY2tzIGZvciBlYWNoIG1vZHVsZSBwYXNzZWQgdG8gdGhlIG1ldGhvZC5cbiAqXG4gKiBJZiBhIG1vZHVsZSBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZCBpbnRvIHRoZSBpbmplY3RvciB0aGVuIGl0IHdpbGwgbm90IGJlIGxvYWRlZCBhZ2Fpbi5cbiAqXG4gKiAqIFRoZSBhcHBsaWNhdGlvbiBkZXZlbG9wZXIgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgdGhlIGNvZGUgY29udGFpbmluZyB0aGUgbW9kdWxlczsgYW5kIGZvclxuICogZW5zdXJpbmcgdGhhdCBsYXp5IHNjcmlwdHMgYXJlIG5vdCBkb3dubG9hZGVkIGFuZCBleGVjdXRlZCBtb3JlIG9mdGVuIHRoYXQgZGVzaXJlZC5cbiAqICogUHJldmlvdXNseSBjb21waWxlZCBIVE1MIHdpbGwgbm90IGJlIGFmZmVjdGVkIGJ5IG5ld2x5IGxvYWRlZCBkaXJlY3RpdmVzLCBmaWx0ZXJzIGFuZCBjb21wb25lbnRzLlxuICogKiBNb2R1bGVzIGNhbm5vdCBiZSB1bmxvYWRlZC5cbiAqXG4gKiBZb3UgY2FuIHVzZSB7QGxpbmsgJGluamVjdG9yI21vZHVsZXMgYCRpbmplY3Rvci5tb2R1bGVzYH0gdG8gY2hlY2sgd2hldGhlciBhIG1vZHVsZSBoYXMgYmVlbiBsb2FkZWRcbiAqIGludG8gdGhlIGluamVjdG9yLCB3aGljaCBtYXkgaW5kaWNhdGUgd2hldGhlciB0aGUgc2NyaXB0IGhhcyBiZWVuIGV4ZWN1dGVkIGFscmVhZHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgaXMgYW4gZXhhbXBsZSBvZiBsb2FkaW5nIGEgYnVuZGxlIG9mIG1vZHVsZXMsIHdpdGggYSB1dGlsaXR5IG1ldGhvZCBjYWxsZWQgYGdldFNjcmlwdGA6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogYXBwLmZhY3RvcnkoJ2xvYWRNb2R1bGUnLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAqICAgcmV0dXJuIGZ1bmN0aW9uIGxvYWRNb2R1bGUobW9kdWxlTmFtZSwgYnVuZGxlVXJsKSB7XG4gKiAgICAgcmV0dXJuIGdldFNjcmlwdChidW5kbGVVcmwpLnRoZW4oZnVuY3Rpb24oKSB7ICRpbmplY3Rvci5sb2FkTmV3TW9kdWxlcyhbbW9kdWxlTmFtZV0pOyB9KTtcbiAqICAgfTtcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0FycmF5PFN0cmluZ3xGdW5jdGlvbnxBcnJheT49fSBtb2RzIGFuIGFycmF5IG9mIG1vZHVsZXMgdG8gbG9hZCBpbnRvIHRoZSBhcHBsaWNhdGlvbi5cbiAqICAgICBFYWNoIGl0ZW0gaW4gdGhlIGFycmF5IHNob3VsZCBiZSB0aGUgbmFtZSBvZiBhIHByZWRlZmluZWQgbW9kdWxlIG9yIGEgKERJIGFubm90YXRlZClcbiAqICAgICBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCBieSB0aGUgaW5qZWN0b3IgYXMgYSBgY29uZmlnYCBibG9jay5cbiAqICAgICBTZWU6IHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfVxuICovXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHByb3ZpZGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGEgbnVtYmVyIG9mIG1ldGhvZHMgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudHNcbiAqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBNYW55IG9mIHRoZXNlIGZ1bmN0aW9ucyBhcmUgYWxzbyBleHBvc2VkIG9uXG4gKiB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9LlxuICpcbiAqIEFuIEFuZ3VsYXJKUyAqKnNlcnZpY2UqKiBpcyBhIHNpbmdsZXRvbiBvYmplY3QgY3JlYXRlZCBieSBhICoqc2VydmljZSBmYWN0b3J5KiouICBUaGVzZSAqKnNlcnZpY2VcbiAqIGZhY3RvcmllcyoqIGFyZSBmdW5jdGlvbnMgd2hpY2gsIGluIHR1cm4sIGFyZSBjcmVhdGVkIGJ5IGEgKipzZXJ2aWNlIHByb3ZpZGVyKiouXG4gKiBUaGUgKipzZXJ2aWNlIHByb3ZpZGVycyoqIGFyZSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMuIFdoZW4gaW5zdGFudGlhdGVkIHRoZXkgbXVzdCBjb250YWluIGFcbiAqIHByb3BlcnR5IGNhbGxlZCBgJGdldGAsIHdoaWNoIGhvbGRzIHRoZSAqKnNlcnZpY2UgZmFjdG9yeSoqIGZ1bmN0aW9uLlxuICpcbiAqIFdoZW4geW91IHJlcXVlc3QgYSBzZXJ2aWNlLCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0gaXMgcmVzcG9uc2libGUgZm9yIGZpbmRpbmcgdGhlXG4gKiBjb3JyZWN0ICoqc2VydmljZSBwcm92aWRlcioqLCBpbnN0YW50aWF0aW5nIGl0IGFuZCB0aGVuIGNhbGxpbmcgaXRzIGAkZ2V0YCAqKnNlcnZpY2UgZmFjdG9yeSoqXG4gKiBmdW5jdGlvbiB0byBnZXQgdGhlIGluc3RhbmNlIG9mIHRoZSAqKnNlcnZpY2UqKi5cbiAqXG4gKiBPZnRlbiBzZXJ2aWNlcyBoYXZlIG5vIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBhbmQgdGhlcmUgaXMgbm8gbmVlZCB0byBhZGQgbWV0aG9kcyB0byB0aGUgc2VydmljZVxuICogcHJvdmlkZXIuICBUaGUgcHJvdmlkZXIgd2lsbCBiZSBubyBtb3JlIHRoYW4gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB3aXRoIGEgYCRnZXRgIHByb3BlcnR5LiBGb3JcbiAqIHRoZXNlIGNhc2VzIHRoZSB7QGxpbmsgYXV0by4kcHJvdmlkZSAkcHJvdmlkZX0gc2VydmljZSBoYXMgYWRkaXRpb25hbCBoZWxwZXIgbWV0aG9kcyB0byByZWdpc3RlclxuICogc2VydmljZXMgd2l0aG91dCBzcGVjaWZ5aW5nIGEgcHJvdmlkZXIuXG4gKlxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNwcm92aWRlciBwcm92aWRlcihuYW1lLCBwcm92aWRlcil9IC0gcmVnaXN0ZXJzIGEgKipzZXJ2aWNlIHByb3ZpZGVyKiogd2l0aCB0aGVcbiAqICAgICB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfVxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNjb25zdGFudCBjb25zdGFudChuYW1lLCBvYmopfSAtIHJlZ2lzdGVycyBhIHZhbHVlL29iamVjdCB0aGF0IGNhbiBiZSBhY2Nlc3NlZCBieVxuICogICAgIHByb3ZpZGVycyBhbmQgc2VydmljZXMuXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlKG5hbWUsIG9iail9IC0gcmVnaXN0ZXJzIGEgdmFsdWUvb2JqZWN0IHRoYXQgY2FuIG9ubHkgYmUgYWNjZXNzZWQgYnlcbiAqICAgICBzZXJ2aWNlcywgbm90IHByb3ZpZGVycy5cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjZmFjdG9yeSBmYWN0b3J5KG5hbWUsIGZuKX0gLSByZWdpc3RlcnMgYSBzZXJ2aWNlICoqZmFjdG9yeSBmdW5jdGlvbioqXG4gKiAgICAgdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSAqKnNlcnZpY2UgcHJvdmlkZXIqKiBvYmplY3QsIHdob3NlIGAkZ2V0YCBwcm9wZXJ0eSB3aWxsIGNvbnRhaW4gdGhlXG4gKiAgICAgZ2l2ZW4gZmFjdG9yeSBmdW5jdGlvbi5cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjc2VydmljZSBzZXJ2aWNlKG5hbWUsIEZuKX0gLSByZWdpc3RlcnMgYSAqKmNvbnN0cnVjdG9yIGZ1bmN0aW9uKipcbiAqICAgICB0aGF0IHdpbGwgYmUgd3JhcHBlZCBpbiBhICoqc2VydmljZSBwcm92aWRlcioqIG9iamVjdCwgd2hvc2UgYCRnZXRgIHByb3BlcnR5IHdpbGwgaW5zdGFudGlhdGVcbiAqICAgICAgYSBuZXcgb2JqZWN0IHVzaW5nIHRoZSBnaXZlbiBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yIGRlY29yYXRvcihuYW1lLCBkZWNvckZuKX0gLSByZWdpc3RlcnMgYSAqKmRlY29yYXRvciBmdW5jdGlvbioqIHRoYXRcbiAqICAgICAgd2lsbCBiZSBhYmxlIHRvIG1vZGlmeSBvciByZXBsYWNlIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBhbm90aGVyIHNlcnZpY2UuXG4gKlxuICogU2VlIHRoZSBpbmRpdmlkdWFsIG1ldGhvZHMgZm9yIG1vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJHByb3ZpZGUjcHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipwcm92aWRlciBmdW5jdGlvbioqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBQcm92aWRlciBmdW5jdGlvbnNcbiAqIGFyZSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMsIHdob3NlIGluc3RhbmNlcyBhcmUgcmVzcG9uc2libGUgZm9yIFwicHJvdmlkaW5nXCIgYSBmYWN0b3J5IGZvciBhXG4gKiBzZXJ2aWNlLlxuICpcbiAqIFNlcnZpY2UgcHJvdmlkZXIgbmFtZXMgc3RhcnQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgc2VydmljZSB0aGV5IHByb3ZpZGUgZm9sbG93ZWQgYnkgYFByb3ZpZGVyYC5cbiAqIEZvciBleGFtcGxlLCB0aGUge0BsaW5rIG5nLiRsb2cgJGxvZ30gc2VydmljZSBoYXMgYSBwcm92aWRlciBjYWxsZWRcbiAqIHtAbGluayBuZy4kbG9nUHJvdmlkZXIgJGxvZ1Byb3ZpZGVyfS5cbiAqXG4gKiBTZXJ2aWNlIHByb3ZpZGVyIG9iamVjdHMgY2FuIGhhdmUgYWRkaXRpb25hbCBtZXRob2RzIHdoaWNoIGFsbG93IGNvbmZpZ3VyYXRpb24gb2YgdGhlIHByb3ZpZGVyXG4gKiBhbmQgaXRzIHNlcnZpY2UuIEltcG9ydGFudGx5LCB5b3UgY2FuIGNvbmZpZ3VyZSB3aGF0IGtpbmQgb2Ygc2VydmljZSBpcyBjcmVhdGVkIGJ5IHRoZSBgJGdldGBcbiAqIG1ldGhvZCwgb3IgaG93IHRoYXQgc2VydmljZSB3aWxsIGFjdC4gRm9yIGV4YW1wbGUsIHRoZSB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyICRsb2dQcm92aWRlcn0gaGFzIGFcbiAqIG1ldGhvZCB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyI2RlYnVnRW5hYmxlZCBkZWJ1Z0VuYWJsZWR9XG4gKiB3aGljaCBsZXRzIHlvdSBzcGVjaWZ5IHdoZXRoZXIgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2Ugd2lsbCBsb2cgZGVidWcgbWVzc2FnZXMgdG8gdGhlXG4gKiBjb25zb2xlIG9yIG5vdC5cbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBpbmplY3Qgb3RoZXIgcHJvdmlkZXJzIGludG8gdGhlIHByb3ZpZGVyIGZ1bmN0aW9uLFxuICogYnV0IHRoZSBpbmplY3RlZCBwcm92aWRlciBtdXN0IGhhdmUgYmVlbiBkZWZpbmVkIGJlZm9yZSB0aGUgb25lIHRoYXQgcmVxdWlyZXMgaXQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLiBOT1RFOiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBhdmFpbGFibGUgdW5kZXIgYG5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb3ZpZGVyJ2Aga2V5LlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKCkpfSBwcm92aWRlciBJZiB0aGUgcHJvdmlkZXIgaXM6XG4gKlxuICogICAtIGBPYmplY3RgOiB0aGVuIGl0IHNob3VsZCBoYXZlIGEgYCRnZXRgIG1ldGhvZC4gVGhlIGAkZ2V0YCBtZXRob2Qgd2lsbCBiZSBpbnZva2VkIHVzaW5nXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSAkaW5qZWN0b3IuaW52b2tlKCl9IHdoZW4gYW4gaW5zdGFuY2UgbmVlZHMgdG8gYmUgY3JlYXRlZC5cbiAqICAgLSBgQ29uc3RydWN0b3JgOiBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBjcmVhdGVkIHVzaW5nXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2luc3RhbnRpYXRlICRpbmplY3Rvci5pbnN0YW50aWF0ZSgpfSwgdGhlbiB0cmVhdGVkIGFzIGBvYmplY3RgLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcblxuICogQGV4YW1wbGVcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIGNyZWF0ZSBhIHNpbXBsZSBldmVudCB0cmFja2luZyBzZXJ2aWNlIGFuZCByZWdpc3RlciBpdCB1c2luZ1xuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXG4gKlxuICogYGBganNcbiAqICAvLyBEZWZpbmUgdGhlIGV2ZW50VHJhY2tlciBwcm92aWRlclxuICogIGZ1bmN0aW9uIEV2ZW50VHJhY2tlclByb3ZpZGVyKCkge1xuICogICAgdmFyIHRyYWNraW5nVXJsID0gJy90cmFjayc7XG4gKlxuICogICAgLy8gQSBwcm92aWRlciBtZXRob2QgZm9yIGNvbmZpZ3VyaW5nIHdoZXJlIHRoZSB0cmFja2VkIGV2ZW50cyBzaG91bGQgYmVlbiBzYXZlZFxuICogICAgdGhpcy5zZXRUcmFja2luZ1VybCA9IGZ1bmN0aW9uKHVybCkge1xuICogICAgICB0cmFja2luZ1VybCA9IHVybDtcbiAqICAgIH07XG4gKlxuICogICAgLy8gVGhlIHNlcnZpY2UgZmFjdG9yeSBmdW5jdGlvblxuICogICAgdGhpcy4kZ2V0ID0gWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gKiAgICAgIHZhciB0cmFja2VkRXZlbnRzID0ge307XG4gKiAgICAgIHJldHVybiB7XG4gKiAgICAgICAgLy8gQ2FsbCB0aGlzIHRvIHRyYWNrIGFuIGV2ZW50XG4gKiAgICAgICAgZXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgICAgICAgICB2YXIgY291bnQgPSB0cmFja2VkRXZlbnRzW2V2ZW50XSB8fCAwO1xuICogICAgICAgICAgY291bnQgKz0gMTtcbiAqICAgICAgICAgIHRyYWNrZWRFdmVudHNbZXZlbnRdID0gY291bnQ7XG4gKiAgICAgICAgICByZXR1cm4gY291bnQ7XG4gKiAgICAgICAgfSxcbiAqICAgICAgICAvLyBDYWxsIHRoaXMgdG8gc2F2ZSB0aGUgdHJhY2tlZCBldmVudHMgdG8gdGhlIHRyYWNraW5nVXJsXG4gKiAgICAgICAgc2F2ZTogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAkaHR0cC5wb3N0KHRyYWNraW5nVXJsLCB0cmFja2VkRXZlbnRzKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH07XG4gKiAgICB9XTtcbiAqICB9XG4gKlxuICogIGRlc2NyaWJlKCdldmVudFRyYWNrZXInLCBmdW5jdGlvbigpIHtcbiAqICAgIHZhciBwb3N0U3B5O1xuICpcbiAqICAgIGJlZm9yZUVhY2gobW9kdWxlKGZ1bmN0aW9uKCRwcm92aWRlKSB7XG4gKiAgICAgIC8vIFJlZ2lzdGVyIHRoZSBldmVudFRyYWNrZXIgcHJvdmlkZXJcbiAqICAgICAgJHByb3ZpZGUucHJvdmlkZXIoJ2V2ZW50VHJhY2tlcicsIEV2ZW50VHJhY2tlclByb3ZpZGVyKTtcbiAqICAgIH0pKTtcbiAqXG4gKiAgICBiZWZvcmVFYWNoKG1vZHVsZShmdW5jdGlvbihldmVudFRyYWNrZXJQcm92aWRlcikge1xuICogICAgICAvLyBDb25maWd1cmUgZXZlbnRUcmFja2VyIHByb3ZpZGVyXG4gKiAgICAgIGV2ZW50VHJhY2tlclByb3ZpZGVyLnNldFRyYWNraW5nVXJsKCcvY3VzdG9tLXRyYWNrJyk7XG4gKiAgICB9KSk7XG4gKlxuICogICAgaXQoJ3RyYWNrcyBldmVudHMnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyKSB7XG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMSk7XG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMik7XG4gKiAgICB9KSk7XG4gKlxuICogICAgaXQoJ3NhdmVzIHRvIHRoZSB0cmFja2luZyB1cmwnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyLCAkaHR0cCkge1xuICogICAgICBwb3N0U3B5ID0gc3B5T24oJGh0dHAsICdwb3N0Jyk7XG4gKiAgICAgIGV2ZW50VHJhY2tlci5ldmVudCgnbG9naW4nKTtcbiAqICAgICAgZXZlbnRUcmFja2VyLnNhdmUoKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkubW9zdFJlY2VudENhbGwuYXJnc1swXSkubm90LnRvRXF1YWwoJy90cmFjaycpO1xuICogICAgICBleHBlY3QocG9zdFNweS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdKS50b0VxdWFsKCcvY3VzdG9tLXRyYWNrJyk7XG4gKiAgICAgIGV4cGVjdChwb3N0U3B5Lm1vc3RSZWNlbnRDYWxsLmFyZ3NbMV0pLnRvRXF1YWwoeyAnbG9naW4nOiAxIH0pO1xuICogICAgfSkpO1xuICogIH0pO1xuICogYGBgXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNmYWN0b3J5XG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqc2VydmljZSBmYWN0b3J5KiosIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHRvIHJldHVybiB0aGUgc2VydmljZSBpbnN0YW5jZS5cbiAqIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHMgcHJvdmlkZXIgY29uc2lzdHMgb2Ygb25seSBhIGAkZ2V0YCBwcm9wZXJ0eSxcbiAqIHdoaWNoIGlzIHRoZSBnaXZlbiBzZXJ2aWNlIGZhY3RvcnkgZnVuY3Rpb24uXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoZ2V0Rm4pfSBpZiB5b3UgZG8gbm90IG5lZWQgdG9cbiAqIGNvbmZpZ3VyZSB5b3VyIHNlcnZpY2UgaW4gYSBwcm92aWRlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSAkZ2V0Rm4gVGhlIGluamVjdGFibGUgJGdldEZuIGZvciB0aGUgaW5zdGFuY2UgY3JlYXRpb24uXG4gKiAgICAgICAgICAgICAgICAgICAgICBJbnRlcm5hbGx5IHRoaXMgaXMgYSBzaG9ydCBoYW5kIGZvciBgJHByb3ZpZGUucHJvdmlkZXIobmFtZSwgeyRnZXQ6ICRnZXRGbn0pYC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIHJlZ2lzdGVyaW5nIGEgc2VydmljZVxuICogYGBganNcbiAqICAgJHByb3ZpZGUuZmFjdG9yeSgncGluZycsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuICogICAgIHJldHVybiBmdW5jdGlvbiBwaW5nKCkge1xuICogICAgICAgcmV0dXJuICRodHRwLnNlbmQoJy9waW5nJyk7XG4gKiAgICAgfTtcbiAqICAgfV0pO1xuICogYGBgXG4gKiBZb3Ugd291bGQgdGhlbiBpbmplY3QgYW5kIHVzZSB0aGlzIHNlcnZpY2UgbGlrZSB0aGlzOlxuICogYGBganNcbiAqICAgc29tZU1vZHVsZS5jb250cm9sbGVyKCdDdHJsJywgWydwaW5nJywgZnVuY3Rpb24ocGluZykge1xuICogICAgIHBpbmcoKTtcbiAqICAgfV0pO1xuICogYGBgXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI3NlcnZpY2VcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipzZXJ2aWNlIGNvbnN0cnVjdG9yKiosIHdoaWNoIHdpbGwgYmUgaW52b2tlZCB3aXRoIGBuZXdgIHRvIGNyZWF0ZSB0aGUgc2VydmljZVxuICogaW5zdGFuY2UuXG4gKiBUaGlzIGlzIHNob3J0IGZvciByZWdpc3RlcmluZyBhIHNlcnZpY2Ugd2hlcmUgaXRzIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIGEgZmFjdG9yeVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGluc3RhbmNlIGluc3RhbnRpYXRlZCBieSB0aGUgaW5qZWN0b3IgZnJvbSB0aGUgc2VydmljZSBjb25zdHJ1Y3RvclxuICogZnVuY3Rpb24uXG4gKlxuICogSW50ZXJuYWxseSBpdCBsb29rcyBhIGJpdCBsaWtlIHRoaXM6XG4gKlxuICogYGBgXG4gKiB7XG4gKiAgICRnZXQ6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiAkaW5qZWN0b3IuaW5zdGFudGlhdGUoY29uc3RydWN0b3IpO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKlxuICogWW91IHNob3VsZCB1c2Uge0BsaW5rIGF1dG8uJHByb3ZpZGUjc2VydmljZSAkcHJvdmlkZS5zZXJ2aWNlKGNsYXNzKX0gaWYgeW91IGRlZmluZSB5b3VyIHNlcnZpY2VcbiAqIGFzIGEgdHlwZS9jbGFzcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBjb25zdHJ1Y3RvciBBbiBpbmplY3RhYmxlIGNsYXNzIChjb25zdHJ1Y3RvciBmdW5jdGlvbilcbiAqICAgICB0aGF0IHdpbGwgYmUgaW5zdGFudGlhdGVkLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgb2YgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHVzaW5nXG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfS5cbiAqIGBgYGpzXG4gKiAgIHZhciBQaW5nID0gZnVuY3Rpb24oJGh0dHApIHtcbiAqICAgICB0aGlzLiRodHRwID0gJGh0dHA7XG4gKiAgIH07XG4gKlxuICogICBQaW5nLiRpbmplY3QgPSBbJyRodHRwJ107XG4gKlxuICogICBQaW5nLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZ2V0KCcvcGluZycpO1xuICogICB9O1xuICogICAkcHJvdmlkZS5zZXJ2aWNlKCdwaW5nJywgUGluZyk7XG4gKiBgYGBcbiAqIFlvdSB3b3VsZCB0aGVuIGluamVjdCBhbmQgdXNlIHRoaXMgc2VydmljZSBsaWtlIHRoaXM6XG4gKiBgYGBqc1xuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XG4gKiAgICAgcGluZy5zZW5kKCk7XG4gKiAgIH1dKTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSN2YWx1ZVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVnaXN0ZXIgYSAqKnZhbHVlIHNlcnZpY2UqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgc3VjaCBhcyBhIHN0cmluZywgYVxuICogbnVtYmVyLCBhbiBhcnJheSwgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24uIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHNcbiAqIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIGEgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vIGFyZ3VtZW50cyBhbmQgcmV0dXJucyB0aGUgKip2YWx1ZVxuICogc2VydmljZSoqLiBUaGF0IGFsc28gbWVhbnMgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGluamVjdCBvdGhlciBzZXJ2aWNlcyBpbnRvIGEgdmFsdWUgc2VydmljZS5cbiAqXG4gKiBWYWx1ZSBzZXJ2aWNlcyBhcmUgc2ltaWxhciB0byBjb25zdGFudCBzZXJ2aWNlcywgZXhjZXB0IHRoYXQgdGhleSBjYW5ub3QgYmUgaW5qZWN0ZWQgaW50byBhXG4gKiBtb2R1bGUgY29uZmlndXJhdGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWd9KSBidXQgdGhleSBjYW4gYmUgb3ZlcnJpZGRlbiBieVxuICogYW4gQW5ndWxhckpTIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGFyZSBzb21lIGV4YW1wbGVzIG9mIGNyZWF0aW5nIHZhbHVlIHNlcnZpY2VzLlxuICogYGBganNcbiAqICAgJHByb3ZpZGUudmFsdWUoJ0FETUlOX1VTRVInLCAnYWRtaW4nKTtcbiAqXG4gKiAgICRwcm92aWRlLnZhbHVlKCdSb2xlTG9va3VwJywgeyBhZG1pbjogMCwgd3JpdGVyOiAxLCByZWFkZXI6IDIgfSk7XG4gKlxuICogICAkcHJvdmlkZS52YWx1ZSgnaGFsZk9mJywgZnVuY3Rpb24odmFsdWUpIHtcbiAqICAgICByZXR1cm4gdmFsdWUgLyAyO1xuICogICB9KTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNjb25zdGFudFxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVnaXN0ZXIgYSAqKmNvbnN0YW50IHNlcnZpY2UqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgc3VjaCBhcyBhIHN0cmluZyxcbiAqIGEgbnVtYmVyLCBhbiBhcnJheSwgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24uIExpa2UgdGhlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlfSwgaXQgaXMgbm90XG4gKiBwb3NzaWJsZSB0byBpbmplY3Qgb3RoZXIgc2VydmljZXMgaW50byBhIGNvbnN0YW50LlxuICpcbiAqIEJ1dCB1bmxpa2Uge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgdmFsdWV9LCBhIGNvbnN0YW50IGNhbiBiZVxuICogaW5qZWN0ZWQgaW50byBhIG1vZHVsZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIChzZWUge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZ30pIGFuZCBpdCBjYW5ub3RcbiAqIGJlIG92ZXJyaWRkZW4gYnkgYW4gQW5ndWxhckpTIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb25zdGFudC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIGNvbnN0YW50IHZhbHVlLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGEgc29tZSBleGFtcGxlcyBvZiBjcmVhdGluZyBjb25zdGFudHM6XG4gKiBgYGBqc1xuICogICAkcHJvdmlkZS5jb25zdGFudCgnU0hBUkRfSEVJR0hUJywgMzA2KTtcbiAqXG4gKiAgICRwcm92aWRlLmNvbnN0YW50KCdNWV9DT0xPVVJTJywgWydyZWQnLCAnYmx1ZScsICdncmV5J10pO1xuICpcbiAqICAgJHByb3ZpZGUuY29uc3RhbnQoJ2RvdWJsZScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gKiAgICAgcmV0dXJuIHZhbHVlICogMjtcbiAqICAgfSk7XG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJHByb3ZpZGUjZGVjb3JhdG9yXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqZGVjb3JhdG9yIGZ1bmN0aW9uKiogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIEEgZGVjb3JhdG9yIGZ1bmN0aW9uXG4gKiBpbnRlcmNlcHRzIHRoZSBjcmVhdGlvbiBvZiBhIHNlcnZpY2UsIGFsbG93aW5nIGl0IHRvIG92ZXJyaWRlIG9yIG1vZGlmeSB0aGUgYmVoYXZpb3Igb2YgdGhlXG4gKiBzZXJ2aWNlLiBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBkZWNvcmF0b3IgZnVuY3Rpb24gbWF5IGJlIHRoZSBvcmlnaW5hbCBzZXJ2aWNlLCBvciBhIG5ldyBzZXJ2aWNlXG4gKiB0aGF0IHJlcGxhY2VzIChvciB3cmFwcyBhbmQgZGVsZWdhdGVzIHRvKSB0aGUgb3JpZ2luYWwgc2VydmljZS5cbiAqXG4gKiBZb3UgY2FuIGZpbmQgb3V0IG1vcmUgYWJvdXQgdXNpbmcgZGVjb3JhdG9ycyBpbiB0aGUge0BsaW5rIGd1aWRlL2RlY29yYXRvcnN9IGd1aWRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIGRlY29yYXRlLlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZGVjb3JhdG9yIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIHNlcnZpY2UgbmVlZHMgdG8gYmVcbiAqICAgIHByb3ZpZGVkIGFuZCBzaG91bGQgcmV0dXJuIHRoZSBkZWNvcmF0ZWQgc2VydmljZSBpbnN0YW5jZS4gVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB1c2luZ1xuICogICAgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgaW5qZWN0b3IuaW52b2tlfSBtZXRob2QgYW5kIGlzIHRoZXJlZm9yZSBmdWxseSBpbmplY3RhYmxlLlxuICogICAgTG9jYWwgaW5qZWN0aW9uIGFyZ3VtZW50czpcbiAqXG4gKiAgICAqIGAkZGVsZWdhdGVgIC0gVGhlIG9yaWdpbmFsIHNlcnZpY2UgaW5zdGFuY2UsIHdoaWNoIGNhbiBiZSByZXBsYWNlZCwgbW9ua2V5IHBhdGNoZWQsIGNvbmZpZ3VyZWQsXG4gKiAgICAgIGRlY29yYXRlZCBvciBkZWxlZ2F0ZWQgdG8uXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgd2UgZGVjb3JhdGUgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2UgdG8gY29udmVydCB3YXJuaW5ncyB0byBlcnJvcnMgYnkgaW50ZXJjZXB0aW5nXG4gKiBjYWxscyB0byB7QGxpbmsgbmcuJGxvZyNlcnJvciAkbG9nLndhcm4oKX0uXG4gKiBgYGBqc1xuICogICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRsb2cnLCBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuICogICAgICRkZWxlZ2F0ZS53YXJuID0gJGRlbGVnYXRlLmVycm9yO1xuICogICAgIHJldHVybiAkZGVsZWdhdGU7XG4gKiAgIH1dKTtcbiAqIGBgYFxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlSW5qZWN0b3IobW9kdWxlc1RvTG9hZCwgc3RyaWN0RGkpIHtcbiAgc3RyaWN0RGkgPSAoc3RyaWN0RGkgPT09IHRydWUpO1xuICB2YXIgSU5TVEFOVElBVElORyA9IHt9LFxuICAgICAgcHJvdmlkZXJTdWZmaXggPSAnUHJvdmlkZXInLFxuICAgICAgcGF0aCA9IFtdLFxuICAgICAgbG9hZGVkTW9kdWxlcyA9IG5ldyBOZ01hcCgpLFxuICAgICAgcHJvdmlkZXJDYWNoZSA9IHtcbiAgICAgICAgJHByb3ZpZGU6IHtcbiAgICAgICAgICAgIHByb3ZpZGVyOiBzdXBwb3J0T2JqZWN0KHByb3ZpZGVyKSxcbiAgICAgICAgICAgIGZhY3Rvcnk6IHN1cHBvcnRPYmplY3QoZmFjdG9yeSksXG4gICAgICAgICAgICBzZXJ2aWNlOiBzdXBwb3J0T2JqZWN0KHNlcnZpY2UpLFxuICAgICAgICAgICAgdmFsdWU6IHN1cHBvcnRPYmplY3QodmFsdWUpLFxuICAgICAgICAgICAgY29uc3RhbnQ6IHN1cHBvcnRPYmplY3QoY29uc3RhbnQpLFxuICAgICAgICAgICAgZGVjb3JhdG9yOiBkZWNvcmF0b3JcbiAgICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvdmlkZXJJbmplY3RvciA9IChwcm92aWRlckNhY2hlLiRpbmplY3RvciA9XG4gICAgICAgICAgY3JlYXRlSW50ZXJuYWxJbmplY3Rvcihwcm92aWRlckNhY2hlLCBmdW5jdGlvbihzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyhjYWxsZXIpKSB7XG4gICAgICAgICAgICAgIHBhdGgucHVzaChjYWxsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCd1bnByJywgJ1Vua25vd24gcHJvdmlkZXI6IHswfScsIHBhdGguam9pbignIDwtICcpKTtcbiAgICAgICAgICB9KSksXG4gICAgICBpbnN0YW5jZUNhY2hlID0ge30sXG4gICAgICBwcm90b0luc3RhbmNlSW5qZWN0b3IgPVxuICAgICAgICAgIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoaW5zdGFuY2VDYWNoZSwgZnVuY3Rpb24oc2VydmljZU5hbWUsIGNhbGxlcikge1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoc2VydmljZU5hbWUgKyBwcm92aWRlclN1ZmZpeCwgY2FsbGVyKTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZUluamVjdG9yLmludm9rZShcbiAgICAgICAgICAgICAgICBwcm92aWRlci4kZ2V0LCBwcm92aWRlciwgdW5kZWZpbmVkLCBzZXJ2aWNlTmFtZSk7XG4gICAgICAgICAgfSksXG4gICAgICBpbnN0YW5jZUluamVjdG9yID0gcHJvdG9JbnN0YW5jZUluamVjdG9yO1xuXG4gIHByb3ZpZGVyQ2FjaGVbJyRpbmplY3RvcicgKyBwcm92aWRlclN1ZmZpeF0gPSB7ICRnZXQ6IHZhbHVlRm4ocHJvdG9JbnN0YW5jZUluamVjdG9yKSB9O1xuICBpbnN0YW5jZUluamVjdG9yLm1vZHVsZXMgPSBwcm92aWRlckluamVjdG9yLm1vZHVsZXMgPSBjcmVhdGVNYXAoKTtcbiAgdmFyIHJ1bkJsb2NrcyA9IGxvYWRNb2R1bGVzKG1vZHVsZXNUb0xvYWQpO1xuICBpbnN0YW5jZUluamVjdG9yID0gcHJvdG9JbnN0YW5jZUluamVjdG9yLmdldCgnJGluamVjdG9yJyk7XG4gIGluc3RhbmNlSW5qZWN0b3Iuc3RyaWN0RGkgPSBzdHJpY3REaTtcbiAgZm9yRWFjaChydW5CbG9ja3MsIGZ1bmN0aW9uKGZuKSB7IGlmIChmbikgaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZm4pOyB9KTtcblxuICBpbnN0YW5jZUluamVjdG9yLmxvYWROZXdNb2R1bGVzID0gZnVuY3Rpb24obW9kcykge1xuICAgIGZvckVhY2gobG9hZE1vZHVsZXMobW9kcyksIGZ1bmN0aW9uKGZuKSB7IGlmIChmbikgaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZm4pOyB9KTtcbiAgfTtcblxuXG4gIHJldHVybiBpbnN0YW5jZUluamVjdG9yO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyAkcHJvdmlkZXJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZnVuY3Rpb24gc3VwcG9ydE9iamVjdChkZWxlZ2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoaXNPYmplY3Qoa2V5KSkge1xuICAgICAgICBmb3JFYWNoKGtleSwgcmV2ZXJzZVBhcmFtcyhkZWxlZ2F0ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlbGVnYXRlKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBwcm92aWRlcihuYW1lLCBwcm92aWRlcl8pIHtcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnc2VydmljZScpO1xuICAgIGlmIChpc0Z1bmN0aW9uKHByb3ZpZGVyXykgfHwgaXNBcnJheShwcm92aWRlcl8pKSB7XG4gICAgICBwcm92aWRlcl8gPSBwcm92aWRlckluamVjdG9yLmluc3RhbnRpYXRlKHByb3ZpZGVyXyk7XG4gICAgfVxuICAgIGlmICghcHJvdmlkZXJfLiRnZXQpIHtcbiAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycigncGdldCcsICdQcm92aWRlciBcXCd7MH1cXCcgbXVzdCBkZWZpbmUgJGdldCBmYWN0b3J5IG1ldGhvZC4nLCBuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIChwcm92aWRlckNhY2hlW25hbWUgKyBwcm92aWRlclN1ZmZpeF0gPSBwcm92aWRlcl8pO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5mb3JjZVJldHVyblZhbHVlKG5hbWUsIGZhY3RvcnkpIHtcbiAgICByZXR1cm4gLyoqIEB0aGlzICovIGZ1bmN0aW9uIGVuZm9yY2VkUmV0dXJuVmFsdWUoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZmFjdG9yeSwgdGhpcyk7XG4gICAgICBpZiAoaXNVbmRlZmluZWQocmVzdWx0KSkge1xuICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3VuZGVmJywgJ1Byb3ZpZGVyIFxcJ3swfVxcJyBtdXN0IHJldHVybiBhIHZhbHVlIGZyb20gJGdldCBmYWN0b3J5IG1ldGhvZC4nLCBuYW1lKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZhY3RvcnkobmFtZSwgZmFjdG9yeUZuLCBlbmZvcmNlKSB7XG4gICAgcmV0dXJuIHByb3ZpZGVyKG5hbWUsIHtcbiAgICAgICRnZXQ6IGVuZm9yY2UgIT09IGZhbHNlID8gZW5mb3JjZVJldHVyblZhbHVlKG5hbWUsIGZhY3RvcnlGbikgOiBmYWN0b3J5Rm5cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlcnZpY2UobmFtZSwgY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gZmFjdG9yeShuYW1lLCBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICAgICAgcmV0dXJuICRpbmplY3Rvci5pbnN0YW50aWF0ZShjb25zdHJ1Y3Rvcik7XG4gICAgfV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdmFsdWUobmFtZSwgdmFsKSB7IHJldHVybiBmYWN0b3J5KG5hbWUsIHZhbHVlRm4odmFsKSwgZmFsc2UpOyB9XG5cbiAgZnVuY3Rpb24gY29uc3RhbnQobmFtZSwgdmFsdWUpIHtcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnY29uc3RhbnQnKTtcbiAgICBwcm92aWRlckNhY2hlW25hbWVdID0gdmFsdWU7XG4gICAgaW5zdGFuY2VDYWNoZVtuYW1lXSA9IHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVjb3JhdG9yKHNlcnZpY2VOYW1lLCBkZWNvckZuKSB7XG4gICAgdmFyIG9yaWdQcm92aWRlciA9IHByb3ZpZGVySW5qZWN0b3IuZ2V0KHNlcnZpY2VOYW1lICsgcHJvdmlkZXJTdWZmaXgpLFxuICAgICAgICBvcmlnJGdldCA9IG9yaWdQcm92aWRlci4kZ2V0O1xuXG4gICAgb3JpZ1Byb3ZpZGVyLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvcmlnSW5zdGFuY2UgPSBpbnN0YW5jZUluamVjdG9yLmludm9rZShvcmlnJGdldCwgb3JpZ1Byb3ZpZGVyKTtcbiAgICAgIHJldHVybiBpbnN0YW5jZUluamVjdG9yLmludm9rZShkZWNvckZuLCBudWxsLCB7JGRlbGVnYXRlOiBvcmlnSW5zdGFuY2V9KTtcbiAgICB9O1xuICB9XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIE1vZHVsZSBMb2FkaW5nXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBmdW5jdGlvbiBsb2FkTW9kdWxlcyhtb2R1bGVzVG9Mb2FkKSB7XG4gICAgYXNzZXJ0QXJnKGlzVW5kZWZpbmVkKG1vZHVsZXNUb0xvYWQpIHx8IGlzQXJyYXkobW9kdWxlc1RvTG9hZCksICdtb2R1bGVzVG9Mb2FkJywgJ25vdCBhbiBhcnJheScpO1xuICAgIHZhciBydW5CbG9ja3MgPSBbXSwgbW9kdWxlRm47XG4gICAgZm9yRWFjaChtb2R1bGVzVG9Mb2FkLCBmdW5jdGlvbihtb2R1bGUpIHtcbiAgICAgIGlmIChsb2FkZWRNb2R1bGVzLmdldChtb2R1bGUpKSByZXR1cm47XG4gICAgICBsb2FkZWRNb2R1bGVzLnNldChtb2R1bGUsIHRydWUpO1xuXG4gICAgICBmdW5jdGlvbiBydW5JbnZva2VRdWV1ZShxdWV1ZSkge1xuICAgICAgICB2YXIgaSwgaWk7XG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gcXVldWUubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIHZhciBpbnZva2VBcmdzID0gcXVldWVbaV0sXG4gICAgICAgICAgICAgIHByb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoaW52b2tlQXJnc1swXSk7XG5cbiAgICAgICAgICBwcm92aWRlcltpbnZva2VBcmdzWzFdXS5hcHBseShwcm92aWRlciwgaW52b2tlQXJnc1syXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKG1vZHVsZSkpIHtcbiAgICAgICAgICBtb2R1bGVGbiA9IGFuZ3VsYXJNb2R1bGUobW9kdWxlKTtcbiAgICAgICAgICBpbnN0YW5jZUluamVjdG9yLm1vZHVsZXNbbW9kdWxlXSA9IG1vZHVsZUZuO1xuICAgICAgICAgIHJ1bkJsb2NrcyA9IHJ1bkJsb2Nrcy5jb25jYXQobG9hZE1vZHVsZXMobW9kdWxlRm4ucmVxdWlyZXMpKS5jb25jYXQobW9kdWxlRm4uX3J1bkJsb2Nrcyk7XG4gICAgICAgICAgcnVuSW52b2tlUXVldWUobW9kdWxlRm4uX2ludm9rZVF1ZXVlKTtcbiAgICAgICAgICBydW5JbnZva2VRdWV1ZShtb2R1bGVGbi5fY29uZmlnQmxvY2tzKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKG1vZHVsZSkpIHtcbiAgICAgICAgICAgIHJ1bkJsb2Nrcy5wdXNoKHByb3ZpZGVySW5qZWN0b3IuaW52b2tlKG1vZHVsZSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkobW9kdWxlKSkge1xuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXNzZXJ0QXJnRm4obW9kdWxlLCAnbW9kdWxlJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkobW9kdWxlKSkge1xuICAgICAgICAgIG1vZHVsZSA9IG1vZHVsZVttb2R1bGUubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUubWVzc2FnZSAmJiBlLnN0YWNrICYmIGUuc3RhY2suaW5kZXhPZihlLm1lc3NhZ2UpID09PSAtMSkge1xuICAgICAgICAgIC8vIFNhZmFyaSAmIEZGJ3Mgc3RhY2sgdHJhY2VzIGRvbid0IGNvbnRhaW4gZXJyb3IubWVzc2FnZSBjb250ZW50XG4gICAgICAgICAgLy8gdW5saWtlIHRob3NlIG9mIENocm9tZSBhbmQgSUVcbiAgICAgICAgICAvLyBTbyBpZiBzdGFjayBkb2Vzbid0IGNvbnRhaW4gbWVzc2FnZSwgd2UgY3JlYXRlIGEgbmV3IHN0cmluZyB0aGF0IGNvbnRhaW5zIGJvdGguXG4gICAgICAgICAgLy8gU2luY2UgZXJyb3Iuc3RhY2sgaXMgcmVhZC1vbmx5IGluIFNhZmFyaSwgSSdtIG92ZXJyaWRpbmcgZSBhbmQgbm90IGUuc3RhY2sgaGVyZS5cbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXgtYXNzaWduXG4gICAgICAgICAgZSA9IGUubWVzc2FnZSArICdcXG4nICsgZS5zdGFjaztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ21vZHVsZXJyJywgJ0ZhaWxlZCB0byBpbnN0YW50aWF0ZSBtb2R1bGUgezB9IGR1ZSB0bzpcXG57MX0nLFxuICAgICAgICAgICAgICAgICAgbW9kdWxlLCBlLnN0YWNrIHx8IGUubWVzc2FnZSB8fCBlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcnVuQmxvY2tzO1xuICB9XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIGludGVybmFsIEluamVjdG9yXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoY2FjaGUsIGZhY3RvcnkpIHtcblxuICAgIGZ1bmN0aW9uIGdldFNlcnZpY2Uoc2VydmljZU5hbWUsIGNhbGxlcikge1xuICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KHNlcnZpY2VOYW1lKSkge1xuICAgICAgICBpZiAoY2FjaGVbc2VydmljZU5hbWVdID09PSBJTlNUQU5USUFUSU5HKSB7XG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdjZGVwJywgJ0NpcmN1bGFyIGRlcGVuZGVuY3kgZm91bmQ6IHswfScsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VOYW1lICsgJyA8LSAnICsgcGF0aC5qb2luKCcgPC0gJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHBhdGgudW5zaGlmdChzZXJ2aWNlTmFtZSk7XG4gICAgICAgICAgY2FjaGVbc2VydmljZU5hbWVdID0gSU5TVEFOVElBVElORztcbiAgICAgICAgICBjYWNoZVtzZXJ2aWNlTmFtZV0gPSBmYWN0b3J5KHNlcnZpY2VOYW1lLCBjYWxsZXIpO1xuICAgICAgICAgIHJldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV07XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGlmIChjYWNoZVtzZXJ2aWNlTmFtZV0gPT09IElOU1RBTlRJQVRJTkcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjYWNoZVtzZXJ2aWNlTmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBwYXRoLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGluamVjdGlvbkFyZ3MoZm4sIGxvY2Fscywgc2VydmljZU5hbWUpIHtcbiAgICAgIHZhciBhcmdzID0gW10sXG4gICAgICAgICAgJGluamVjdCA9IGNyZWF0ZUluamVjdG9yLiQkYW5ub3RhdGUoZm4sIHN0cmljdERpLCBzZXJ2aWNlTmFtZSk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSAkaW5qZWN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSAkaW5qZWN0W2ldO1xuICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2l0a24nLFxuICAgICAgICAgICAgICAgICAgJ0luY29ycmVjdCBpbmplY3Rpb24gdG9rZW4hIEV4cGVjdGVkIHNlcnZpY2UgbmFtZSBhcyBzdHJpbmcsIGdvdCB7MH0nLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGFyZ3MucHVzaChsb2NhbHMgJiYgbG9jYWxzLmhhc093blByb3BlcnR5KGtleSkgPyBsb2NhbHNba2V5XSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTZXJ2aWNlKGtleSwgc2VydmljZU5hbWUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcmdzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQ2xhc3MoZnVuYykge1xuICAgICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgICAvLyBJRSA5LTExIGRvIG5vdCBzdXBwb3J0IGNsYXNzZXMgYW5kIElFOSBsZWFrcyB3aXRoIHRoZSBjb2RlIGJlbG93LlxuICAgICAgaWYgKG1zaWUgfHwgdHlwZW9mIGZ1bmMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuJCRuZ0lzQ2xhc3M7XG4gICAgICBpZiAoIWlzQm9vbGVhbihyZXN1bHQpKSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuJCRuZ0lzQ2xhc3MgPSAvXmNsYXNzXFxiLy50ZXN0KHN0cmluZ2lmeUZuKGZ1bmMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52b2tlKGZuLCBzZWxmLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XG4gICAgICBpZiAodHlwZW9mIGxvY2FscyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VydmljZU5hbWUgPSBsb2NhbHM7XG4gICAgICAgIGxvY2FscyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmdzID0gaW5qZWN0aW9uQXJncyhmbiwgbG9jYWxzLCBzZXJ2aWNlTmFtZSk7XG4gICAgICBpZiAoaXNBcnJheShmbikpIHtcbiAgICAgICAgZm4gPSBmbltmbi5sZW5ndGggLSAxXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0NsYXNzKGZuKSkge1xuICAgICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyanMtaW52b2tlLWFwcGx5LXZzLXN3aXRjaFxuICAgICAgICAvLyAjNTM4OFxuICAgICAgICByZXR1cm4gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmdzLnVuc2hpZnQobnVsbCk7XG4gICAgICAgIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGZuLCBhcmdzKSkoKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGluc3RhbnRpYXRlKFR5cGUsIGxvY2Fscywgc2VydmljZU5hbWUpIHtcbiAgICAgIC8vIENoZWNrIGlmIFR5cGUgaXMgYW5ub3RhdGVkIGFuZCB1c2UganVzdCB0aGUgZ2l2ZW4gZnVuY3Rpb24gYXQgbi0xIGFzIHBhcmFtZXRlclxuICAgICAgLy8gZS5nLiBzb21lTW9kdWxlLmZhY3RvcnkoJ2dyZWV0ZXInLCBbJyR3aW5kb3cnLCBmdW5jdGlvbihyZW5hbWVkJHdpbmRvdykge31dKTtcbiAgICAgIHZhciBjdG9yID0gKGlzQXJyYXkoVHlwZSkgPyBUeXBlW1R5cGUubGVuZ3RoIC0gMV0gOiBUeXBlKTtcbiAgICAgIHZhciBhcmdzID0gaW5qZWN0aW9uQXJncyhUeXBlLCBsb2NhbHMsIHNlcnZpY2VOYW1lKTtcbiAgICAgIC8vIEVtcHR5IG9iamVjdCBhdCBwb3NpdGlvbiAwIGlzIGlnbm9yZWQgZm9yIGludm9jYXRpb24gd2l0aCBgbmV3YCwgYnV0IHJlcXVpcmVkLlxuICAgICAgYXJncy51bnNoaWZ0KG51bGwpO1xuICAgICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoY3RvciwgYXJncykpKCk7XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgaW52b2tlOiBpbnZva2UsXG4gICAgICBpbnN0YW50aWF0ZTogaW5zdGFudGlhdGUsXG4gICAgICBnZXQ6IGdldFNlcnZpY2UsXG4gICAgICBhbm5vdGF0ZTogY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSxcbiAgICAgIGhhczogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gcHJvdmlkZXJDYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lICsgcHJvdmlkZXJTdWZmaXgpIHx8IGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSA9IGFubm90YXRlO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuY2hvclNjcm9sbFByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIGAkYW5jaG9yU2Nyb2xsUHJvdmlkZXJgIHRvIGRpc2FibGUgYXV0b21hdGljIHNjcm9sbGluZyB3aGVuZXZlclxuICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGNoYW5nZXMuXG4gKi9cbmZ1bmN0aW9uICRBbmNob3JTY3JvbGxQcm92aWRlcigpIHtcblxuICB2YXIgYXV0b1Njcm9sbGluZ0VuYWJsZWQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZ1xuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnkgZGVmYXVsdCwge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwgJGFuY2hvclNjcm9sbCgpfSB3aWxsIGF1dG9tYXRpY2FsbHkgZGV0ZWN0IGNoYW5nZXMgdG9cbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGFuZCBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIG5ldyBoYXNoLjxiciAvPlxuICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZGlzYWJsZSBhdXRvbWF0aWMgc2Nyb2xsaW5nLlxuICAgKlxuICAgKiBJZiBhdXRvbWF0aWMgc2Nyb2xsaW5nIGlzIGRpc2FibGVkLCBvbmUgbXVzdCBleHBsaWNpdGx5IGNhbGxcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwgJGFuY2hvclNjcm9sbCgpfSBpbiBvcmRlciB0byBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgcmVsYXRlZCB0byB0aGVcbiAgICogY3VycmVudCBoYXNoLlxuICAgKi9cbiAgdGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIGF1dG9TY3JvbGxpbmdFbmFibGVkID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICRhbmNob3JTY3JvbGxcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICogQHJlcXVpcmVzICR3aW5kb3dcbiAgICogQHJlcXVpcmVzICRsb2NhdGlvblxuICAgKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogV2hlbiBjYWxsZWQsIGl0IHNjcm9sbHMgdG8gdGhlIGVsZW1lbnQgcmVsYXRlZCB0byB0aGUgc3BlY2lmaWVkIGBoYXNoYCBvciAoaWYgb21pdHRlZCkgdG8gdGhlXG4gICAqIGN1cnJlbnQgdmFsdWUgb2Yge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9LCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIHNwZWNpZmllZFxuICAgKiBpbiB0aGVcbiAgICogW0hUTUw1IHNwZWNdKGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2Jyb3dzZXJzLmh0bWwjYW4taW5kaWNhdGVkLXBhcnQtb2YtdGhlLWRvY3VtZW50KS5cbiAgICpcbiAgICogSXQgYWxzbyB3YXRjaGVzIHRoZSB7QGxpbmsgbmcuJGxvY2F0aW9uI2hhc2ggJGxvY2F0aW9uLmhhc2goKX0gYW5kIGF1dG9tYXRpY2FsbHkgc2Nyb2xscyB0b1xuICAgKiBtYXRjaCBhbnkgYW5jaG9yIHdoZW5ldmVyIGl0IGNoYW5nZXMuIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IGNhbGxpbmdcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZyAkYW5jaG9yU2Nyb2xsUHJvdmlkZXIuZGlzYWJsZUF1dG9TY3JvbGxpbmcoKX0uXG4gICAqXG4gICAqIEFkZGl0aW9uYWxseSwgeW91IGNhbiB1c2UgaXRzIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsI3lPZmZzZXQgeU9mZnNldH0gcHJvcGVydHkgdG8gc3BlY2lmeSBhXG4gICAqIHZlcnRpY2FsIHNjcm9sbC1vZmZzZXQgKGVpdGhlciBmaXhlZCBvciBkeW5hbWljKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBoYXNoIFRoZSBoYXNoIHNwZWNpZnlpbmcgdGhlIGVsZW1lbnQgdG8gc2Nyb2xsIHRvLiBJZiBvbWl0dGVkLCB0aGUgdmFsdWUgb2ZcbiAgICogICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZy4kbG9jYXRpb24jaGFzaCAkbG9jYXRpb24uaGFzaCgpfSB3aWxsIGJlIHVzZWQuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7KG51bWJlcnxmdW5jdGlvbnxqcUxpdGUpfSB5T2Zmc2V0XG4gICAqIElmIHNldCwgc3BlY2lmaWVzIGEgdmVydGljYWwgc2Nyb2xsLW9mZnNldC4gVGhpcyBpcyBvZnRlbiB1c2VmdWwgd2hlbiB0aGVyZSBhcmUgZml4ZWRcbiAgICogcG9zaXRpb25lZCBlbGVtZW50cyBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlLCBzdWNoIGFzIG5hdmJhcnMsIGhlYWRlcnMgZXRjLlxuICAgKlxuICAgKiBgeU9mZnNldGAgY2FuIGJlIHNwZWNpZmllZCBpbiB2YXJpb3VzIHdheXM6XG4gICAqIC0gKipudW1iZXIqKjogQSBmaXhlZCBudW1iZXIgb2YgcGl4ZWxzIHRvIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPjxiciAvPlxuICAgKiAtICoqZnVuY3Rpb24qKjogQSBnZXR0ZXIgZnVuY3Rpb24gY2FsbGVkIGV2ZXJ5dGltZSBgJGFuY2hvclNjcm9sbCgpYCBpcyBleGVjdXRlZC4gTXVzdCByZXR1cm5cbiAgICogICBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIG9mZnNldCAoaW4gcGl4ZWxzKS48YnIgLz48YnIgLz5cbiAgICogLSAqKmpxTGl0ZSoqOiBBIGpxTGl0ZS9qUXVlcnkgZWxlbWVudCB0byBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIHRoZSBvZmZzZXQuIFRoZSBkaXN0YW5jZSBmcm9tXG4gICAqICAgdGhlIHRvcCBvZiB0aGUgcGFnZSB0byB0aGUgZWxlbWVudCdzIGJvdHRvbSB3aWxsIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPlxuICAgKiAgICoqTm90ZSoqOiBUaGUgZWxlbWVudCB3aWxsIGJlIHRha2VuIGludG8gYWNjb3VudCBvbmx5IGFzIGxvbmcgYXMgaXRzIGBwb3NpdGlvbmAgaXMgc2V0IHRvXG4gICAqICAgYGZpeGVkYC4gVGhpcyBvcHRpb24gaXMgdXNlZnVsLCB3aGVuIGRlYWxpbmcgd2l0aCByZXNwb25zaXZlIG5hdmJhcnMvaGVhZGVycyB0aGF0IGFkanVzdFxuICAgKiAgIHRoZWlyIGhlaWdodCBhbmQvb3IgcG9zaXRpb25pbmcgYWNjb3JkaW5nIHRvIHRoZSB2aWV3cG9ydCdzIHNpemUuXG4gICAqXG4gICAqIDxiciAvPlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiBJbiBvcmRlciBmb3IgYHlPZmZzZXRgIHRvIHdvcmsgcHJvcGVybHksIHNjcm9sbGluZyBzaG91bGQgdGFrZSBwbGFjZSBvbiB0aGUgZG9jdW1lbnQncyByb290IGFuZFxuICAgKiBub3Qgc29tZSBjaGlsZCBlbGVtZW50LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgPGV4YW1wbGUgbW9kdWxlPVwiYW5jaG9yU2Nyb2xsRXhhbXBsZVwiIG5hbWU9XCJhbmNob3Itc2Nyb2xsXCI+XG4gICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxkaXYgaWQ9XCJzY3JvbGxBcmVhXCIgbmctY29udHJvbGxlcj1cIlNjcm9sbENvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGEgbmctY2xpY2s9XCJnb3RvQm90dG9tKClcIj5HbyB0byBib3R0b208L2E+XG4gICAgICAgICAgIDxhIGlkPVwiYm90dG9tXCI+PC9hPiBZb3UncmUgYXQgdGhlIGJvdHRvbSFcbiAgICAgICAgIDwvZGl2PlxuICAgICAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnYW5jaG9yU2Nyb2xsRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignU2Nyb2xsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJyxcbiAgICAgICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRsb2NhdGlvbiwgJGFuY2hvclNjcm9sbCkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmdvdG9Cb3R0b20gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBsb2NhdGlvbi5oYXNoIHRvIHRoZSBpZCBvZlxuICAgICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCB5b3Ugd2lzaCB0byBzY3JvbGwgdG8uXG4gICAgICAgICAgICAgICAgICRsb2NhdGlvbi5oYXNoKCdib3R0b20nKTtcblxuICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKVxuICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgICAgI3Njcm9sbEFyZWEge1xuICAgICAgICAgICBoZWlnaHQ6IDI4MHB4O1xuICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgIH1cblxuICAgICAgICAgI2JvdHRvbSB7XG4gICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICBtYXJnaW4tdG9wOiAyMDAwcHg7XG4gICAgICAgICB9XG4gICAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gICAqXG4gICAqIDxociAvPlxuICAgKiBUaGUgZXhhbXBsZSBiZWxvdyBpbGx1c3RyYXRlcyB0aGUgdXNlIG9mIGEgdmVydGljYWwgc2Nyb2xsLW9mZnNldCAoc3BlY2lmaWVkIGFzIGEgZml4ZWQgdmFsdWUpLlxuICAgKiBTZWUge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwjeU9mZnNldCAkYW5jaG9yU2Nyb2xsLnlPZmZzZXR9IGZvciBtb3JlIGRldGFpbHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgIDxleGFtcGxlIG1vZHVsZT1cImFuY2hvclNjcm9sbE9mZnNldEV4YW1wbGVcIiBuYW1lPVwiYW5jaG9yLXNjcm9sbC1vZmZzZXRcIj5cbiAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZpeGVkLWhlYWRlclwiIG5nLWNvbnRyb2xsZXI9XCJoZWFkZXJDdHJsXCI+XG4gICAgICAgICAgIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImdvdG9BbmNob3IoeClcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XG4gICAgICAgICAgICAgR28gdG8gYW5jaG9yIHt7eH19XG4gICAgICAgICAgIDwvYT5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGRpdiBpZD1cImFuY2hvcnt7eH19XCIgY2xhc3M9XCJhbmNob3JcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XG4gICAgICAgICAgIEFuY2hvciB7e3h9fSBvZiA1XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2FuY2hvclNjcm9sbE9mZnNldEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLnJ1bihbJyRhbmNob3JTY3JvbGwnLCBmdW5jdGlvbigkYW5jaG9yU2Nyb2xsKSB7XG4gICAgICAgICAgICAgJGFuY2hvclNjcm9sbC55T2Zmc2V0ID0gNTA7ICAgLy8gYWx3YXlzIHNjcm9sbCBieSA1MCBleHRyYSBwaXhlbHNcbiAgICAgICAgICAgfV0pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdoZWFkZXJDdHJsJywgWyckYW5jaG9yU2Nyb2xsJywgJyRsb2NhdGlvbicsICckc2NvcGUnLFxuICAgICAgICAgICAgIGZ1bmN0aW9uKCRhbmNob3JTY3JvbGwsICRsb2NhdGlvbiwgJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAkc2NvcGUuZ290b0FuY2hvciA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgdmFyIG5ld0hhc2ggPSAnYW5jaG9yJyArIHg7XG4gICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24uaGFzaCgpICE9PSBuZXdIYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSAkbG9jYXRpb24uaGFzaCB0byBgbmV3SGFzaGAgYW5kXG4gICAgICAgICAgICAgICAgICAgLy8gJGFuY2hvclNjcm9sbCB3aWxsIGF1dG9tYXRpY2FsbHkgc2Nyb2xsIHRvIGl0XG4gICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2FuY2hvcicgKyB4KTtcbiAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKSBleHBsaWNpdGx5LFxuICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlICRsb2NhdGlvbi5oYXNoIGhhc24ndCBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgXSk7XG4gICAgICAgPC9maWxlPlxuICAgICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAgIGJvZHkge1xuICAgICAgICAgICBwYWRkaW5nLXRvcDogNTBweDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmFuY2hvciB7XG4gICAgICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCBEYXJrT3JjaGlkO1xuICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDEwcHggMjAwcHggMTBweDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmZpeGVkLWhlYWRlciB7XG4gICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgaGVpZ2h0OiA1MHB4O1xuICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgIHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7XG4gICAgICAgICB9XG5cbiAgICAgICAgIC5maXhlZC1oZWFkZXIgPiBhIHtcbiAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICBtYXJnaW46IDVweCAxNXB4O1xuICAgICAgICAgfVxuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHdpbmRvdywgJGxvY2F0aW9uLCAkcm9vdFNjb3BlKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gJHdpbmRvdy5kb2N1bWVudDtcblxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZmlyc3QgYW5jaG9yIGZyb20gYSBOb2RlTGlzdFxuICAgIC8vICh1c2luZyBgQXJyYXkjc29tZSgpYCBpbnN0ZWFkIG9mIGBhbmd1bGFyI2ZvckVhY2goKWAgc2luY2UgaXQncyBtb3JlIHBlcmZvcm1hbnRcbiAgICAvLyAgYW5kIHdvcmtpbmcgaW4gYWxsIHN1cHBvcnRlZCBicm93c2Vycy4pXG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3RBbmNob3IobGlzdCkge1xuICAgICAgdmFyIHJlc3VsdCA9IG51bGw7XG4gICAgICBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGxpc3QsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ2EnKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZWxlbWVudDtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFlPZmZzZXQoKSB7XG5cbiAgICAgIHZhciBvZmZzZXQgPSBzY3JvbGwueU9mZnNldDtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ob2Zmc2V0KSkge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KG9mZnNldCkpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBvZmZzZXRbMF07XG4gICAgICAgIHZhciBzdHlsZSA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcbiAgICAgICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNOdW1iZXIob2Zmc2V0KSkge1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvKGVsZW0pIHtcbiAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgIGVsZW0uc2Nyb2xsSW50b1ZpZXcoKTtcblxuICAgICAgICB2YXIgb2Zmc2V0ID0gZ2V0WU9mZnNldCgpO1xuXG4gICAgICAgIGlmIChvZmZzZXQpIHtcbiAgICAgICAgICAvLyBgb2Zmc2V0YCBpcyB0aGUgbnVtYmVyIG9mIHBpeGVscyB3ZSBzaG91bGQgc2Nyb2xsIFVQIGluIG9yZGVyIHRvIGFsaWduIGBlbGVtYCBwcm9wZXJseS5cbiAgICAgICAgICAvLyBUaGlzIGlzIHRydWUgT05MWSBpZiB0aGUgY2FsbCB0byBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCBpbml0aWFsbHkgYWxpZ25zIGBlbGVtYCBhdCB0aGVcbiAgICAgICAgICAvLyB0b3Agb2YgdGhlIHZpZXdwb3J0LlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSUYgdGhlIG51bWJlciBvZiBwaXhlbHMgZnJvbSB0aGUgdG9wIG9mIGBlbGVtYCB0byB0aGUgZW5kIG9mIHRoZSBwYWdlJ3MgY29udGVudCBpcyBsZXNzXG4gICAgICAgICAgLy8gdGhhbiB0aGUgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCwgdGhlbiBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCB3aWxsIGFsaWduIHRoZSBgZWxlbWAgc29tZVxuICAgICAgICAgIC8vIHdheSBkb3duIHRoZSBwYWdlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhpcyBpcyBvZnRlbiB0aGUgY2FzZSBmb3IgZWxlbWVudHMgbmVhciB0aGUgYm90dG9tIG9mIHRoZSBwYWdlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSW4gc3VjaCBjYXNlcyB3ZSBkbyBub3QgbmVlZCB0byBzY3JvbGwgdGhlIHdob2xlIGBvZmZzZXRgIHVwLCBqdXN0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW5cbiAgICAgICAgICAvLyB0aGUgdG9wIG9mIHRoZSBlbGVtZW50IGFuZCB0aGUgb2Zmc2V0LCB3aGljaCBpcyBlbm91Z2ggdG8gYWxpZ24gdGhlIHRvcCBvZiBgZWxlbWAgYXQgdGhlXG4gICAgICAgICAgLy8gZGVzaXJlZCBwb3NpdGlvbi5cbiAgICAgICAgICB2YXIgZWxlbVRvcCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICR3aW5kb3cuc2Nyb2xsQnkoMCwgZWxlbVRvcCAtIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2Nyb2xsKGhhc2gpIHtcbiAgICAgIC8vIEFsbG93IG51bWVyaWMgaGFzaGVzXG4gICAgICBoYXNoID0gaXNTdHJpbmcoaGFzaCkgPyBoYXNoIDogaXNOdW1iZXIoaGFzaCkgPyBoYXNoLnRvU3RyaW5nKCkgOiAkbG9jYXRpb24uaGFzaCgpO1xuICAgICAgdmFyIGVsbTtcblxuICAgICAgLy8gZW1wdHkgaGFzaCwgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGlmICghaGFzaCkgc2Nyb2xsVG8obnVsbCk7XG5cbiAgICAgIC8vIGVsZW1lbnQgd2l0aCBnaXZlbiBpZFxuICAgICAgZWxzZSBpZiAoKGVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhhc2gpKSkgc2Nyb2xsVG8oZWxtKTtcblxuICAgICAgLy8gZmlyc3QgYW5jaG9yIHdpdGggZ2l2ZW4gbmFtZSA6LURcbiAgICAgIGVsc2UgaWYgKChlbG0gPSBnZXRGaXJzdEFuY2hvcihkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShoYXNoKSkpKSBzY3JvbGxUbyhlbG0pO1xuXG4gICAgICAvLyBubyBlbGVtZW50IGFuZCBoYXNoID09PSAndG9wJywgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGVsc2UgaWYgKGhhc2ggPT09ICd0b3AnKSBzY3JvbGxUbyhudWxsKTtcbiAgICB9XG5cbiAgICAvLyBkb2VzIG5vdCBzY3JvbGwgd2hlbiB1c2VyIGNsaWNrcyBvbiBhbmNob3IgbGluayB0aGF0IGlzIGN1cnJlbnRseSBvblxuICAgIC8vIChubyB1cmwgY2hhbmdlLCBubyAkbG9jYXRpb24uaGFzaCgpIGNoYW5nZSksIGJyb3dzZXIgbmF0aXZlIGRvZXMgc2Nyb2xsXG4gICAgaWYgKGF1dG9TY3JvbGxpbmdFbmFibGVkKSB7XG4gICAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiBhdXRvU2Nyb2xsV2F0Y2goKSB7cmV0dXJuICRsb2NhdGlvbi5oYXNoKCk7fSxcbiAgICAgICAgZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoQWN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgLy8gc2tpcCB0aGUgaW5pdGlhbCBzY3JvbGwgaWYgJGxvY2F0aW9uLmhhc2ggaXMgZW1wdHlcbiAgICAgICAgICBpZiAobmV3VmFsID09PSBvbGRWYWwgJiYgbmV3VmFsID09PSAnJykgcmV0dXJuO1xuXG4gICAgICAgICAganFMaXRlRG9jdW1lbnRMb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoc2Nyb2xsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjcm9sbDtcbiAgfV07XG59XG5cbnZhciAkYW5pbWF0ZU1pbkVyciA9IG1pbkVycignJGFuaW1hdGUnKTtcbnZhciBFTEVNRU5UX05PREUgPSAxO1xudmFyIE5HX0FOSU1BVEVfQ0xBU1NOQU1FID0gJ25nLWFuaW1hdGUnO1xuXG5mdW5jdGlvbiBtZXJnZUNsYXNzZXMoYSxiKSB7XG4gIGlmICghYSAmJiAhYikgcmV0dXJuICcnO1xuICBpZiAoIWEpIHJldHVybiBiO1xuICBpZiAoIWIpIHJldHVybiBhO1xuICBpZiAoaXNBcnJheShhKSkgYSA9IGEuam9pbignICcpO1xuICBpZiAoaXNBcnJheShiKSkgYiA9IGIuam9pbignICcpO1xuICByZXR1cm4gYSArICcgJyArIGI7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbG0gPSBlbGVtZW50W2ldO1xuICAgIGlmIChlbG0ubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgcmV0dXJuIGVsbTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3BsaXRDbGFzc2VzKGNsYXNzZXMpIHtcbiAgaWYgKGlzU3RyaW5nKGNsYXNzZXMpKSB7XG4gICAgY2xhc3NlcyA9IGNsYXNzZXMuc3BsaXQoJyAnKTtcbiAgfVxuXG4gIC8vIFVzZSBjcmVhdGVNYXAoKSB0byBwcmV2ZW50IGNsYXNzIGFzc3VtcHRpb25zIGludm9sdmluZyBwcm9wZXJ0eSBuYW1lcyBpblxuICAvLyBPYmplY3QucHJvdG90eXBlXG4gIHZhciBvYmogPSBjcmVhdGVNYXAoKTtcbiAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbihrbGFzcykge1xuICAgIC8vIHNvbWV0aW1lcyB0aGUgc3BsaXQgbGVhdmVzIGVtcHR5IHN0cmluZyB2YWx1ZXNcbiAgICAvLyBpbmNhc2UgZXh0cmEgc3BhY2VzIHdlcmUgYXBwbGllZCB0byB0aGUgb3B0aW9uc1xuICAgIGlmIChrbGFzcy5sZW5ndGgpIHtcbiAgICAgIG9ialtrbGFzc10gPSB0cnVlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbi8vIGlmIGFueSBvdGhlciB0eXBlIG9mIG9wdGlvbnMgdmFsdWUgYmVzaWRlcyBhbiBPYmplY3QgdmFsdWUgaXNcbi8vIHBhc3NlZCBpbnRvIHRoZSAkYW5pbWF0ZS5tZXRob2QoKSBhbmltYXRpb24gdGhlbiB0aGlzIGhlbHBlciBjb2RlXG4vLyB3aWxsIGJlIHJ1biB3aGljaCB3aWxsIGlnbm9yZSBpdC4gV2hpbGUgdGhpcyBwYXRjaCBpcyBub3QgdGhlXG4vLyBncmVhdGVzdCBzb2x1dGlvbiB0byB0aGlzLCBhIGxvdCBvZiBleGlzdGluZyBwbHVnaW5zIGRlcGVuZCBvblxuLy8gJGFuaW1hdGUgdG8gZWl0aGVyIGNhbGwgdGhlIGNhbGxiYWNrICg8IDEuMikgb3IgcmV0dXJuIGEgcHJvbWlzZVxuLy8gdGhhdCBjYW4gYmUgY2hhbmdlZC4gVGhpcyBoZWxwZXIgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IHRoZSBvcHRpb25zXG4vLyBhcmUgd2lwZWQgY2xlYW4gaW5jYXNlIGEgY2FsbGJhY2sgZnVuY3Rpb24gaXMgcHJvdmlkZWQuXG5mdW5jdGlvbiBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykge1xuICByZXR1cm4gaXNPYmplY3Qob3B0aW9ucylcbiAgICAgID8gb3B0aW9uc1xuICAgICAgOiB7fTtcbn1cblxudmFyICQkQ29yZUFuaW1hdGVKc1Byb3ZpZGVyID0gLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBub29wO1xufTtcblxuLy8gdGhpcyBpcyBwcmVmaXhlZCB3aXRoIENvcmUgc2luY2UgaXQgY29uZmxpY3RzIHdpdGhcbi8vIHRoZSBhbmltYXRlUXVldWVQcm92aWRlciBkZWZpbmVkIGluIG5nQW5pbWF0ZS9hbmltYXRlUXVldWUuanNcbnZhciAkJENvcmVBbmltYXRlUXVldWVQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdmFyIHBvc3REaWdlc3RRdWV1ZSA9IG5ldyBOZ01hcCgpO1xuICB2YXIgcG9zdERpZ2VzdEVsZW1lbnRzID0gW107XG5cbiAgdGhpcy4kZ2V0ID0gWyckJEFuaW1hdGVSdW5uZXInLCAnJHJvb3RTY29wZScsXG4gICAgICAgZnVuY3Rpb24oJCRBbmltYXRlUnVubmVyLCAgICRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZW5hYmxlZDogbm9vcCxcbiAgICAgIG9uOiBub29wLFxuICAgICAgb2ZmOiBub29wLFxuICAgICAgcGluOiBub29wLFxuXG4gICAgICBwdXNoOiBmdW5jdGlvbihlbGVtZW50LCBldmVudCwgb3B0aW9ucywgZG9tT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmIChkb21PcGVyYXRpb24pIHtcbiAgICAgICAgICBkb21PcGVyYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5mcm9tKSB7XG4gICAgICAgICAgZWxlbWVudC5jc3Mob3B0aW9ucy5mcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgICAgIGVsZW1lbnQuY3NzKG9wdGlvbnMudG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYWRkQ2xhc3MgfHwgb3B0aW9ucy5yZW1vdmVDbGFzcykge1xuICAgICAgICAgIGFkZFJlbW92ZUNsYXNzZXNQb3N0RGlnZXN0KGVsZW1lbnQsIG9wdGlvbnMuYWRkQ2xhc3MsIG9wdGlvbnMucmVtb3ZlQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJ1bm5lciA9IG5ldyAkJEFuaW1hdGVSdW5uZXIoKTtcblxuICAgICAgICAvLyBzaW5jZSB0aGVyZSBhcmUgbm8gYW5pbWF0aW9ucyB0byBydW4gdGhlIHJ1bm5lciBuZWVkcyB0byBiZVxuICAgICAgICAvLyBub3RpZmllZCB0aGF0IHRoZSBhbmltYXRpb24gY2FsbCBpcyBjb21wbGV0ZS5cbiAgICAgICAgcnVubmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIHJldHVybiBydW5uZXI7XG4gICAgICB9XG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gdXBkYXRlRGF0YShkYXRhLCBjbGFzc2VzLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIGlmIChjbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzZXMgPSBpc1N0cmluZyhjbGFzc2VzKSA/IGNsYXNzZXMuc3BsaXQoJyAnKSA6XG4gICAgICAgICAgICAgICAgICBpc0FycmF5KGNsYXNzZXMpID8gY2xhc3NlcyA6IFtdO1xuICAgICAgICBmb3JFYWNoKGNsYXNzZXMsIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGF0YVtjbGFzc05hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUNTU0NsYXNzQ2hhbmdlcygpIHtcbiAgICAgIGZvckVhY2gocG9zdERpZ2VzdEVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHZhciBkYXRhID0gcG9zdERpZ2VzdFF1ZXVlLmdldChlbGVtZW50KTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBzcGxpdENsYXNzZXMoZWxlbWVudC5hdHRyKCdjbGFzcycpKTtcbiAgICAgICAgICB2YXIgdG9BZGQgPSAnJztcbiAgICAgICAgICB2YXIgdG9SZW1vdmUgPSAnJztcbiAgICAgICAgICBmb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKHN0YXR1cywgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaGFzQ2xhc3MgPSAhIWV4aXN0aW5nW2NsYXNzTmFtZV07XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSBoYXNDbGFzcykge1xuICAgICAgICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdG9BZGQgKz0gKHRvQWRkLmxlbmd0aCA/ICcgJyA6ICcnKSArIGNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b1JlbW92ZSArPSAodG9SZW1vdmUubGVuZ3RoID8gJyAnIDogJycpICsgY2xhc3NOYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQsIGZ1bmN0aW9uKGVsbSkge1xuICAgICAgICAgICAgaWYgKHRvQWRkKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZUFkZENsYXNzKGVsbSwgdG9BZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZVJlbW92ZUNsYXNzKGVsbSwgdG9SZW1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZS5kZWxldGUoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcG9zdERpZ2VzdEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBhZGRSZW1vdmVDbGFzc2VzUG9zdERpZ2VzdChlbGVtZW50LCBhZGQsIHJlbW92ZSkge1xuICAgICAgdmFyIGRhdGEgPSBwb3N0RGlnZXN0UXVldWUuZ2V0KGVsZW1lbnQpIHx8IHt9O1xuXG4gICAgICB2YXIgY2xhc3Nlc0FkZGVkID0gdXBkYXRlRGF0YShkYXRhLCBhZGQsIHRydWUpO1xuICAgICAgdmFyIGNsYXNzZXNSZW1vdmVkID0gdXBkYXRlRGF0YShkYXRhLCByZW1vdmUsIGZhbHNlKTtcblxuICAgICAgaWYgKGNsYXNzZXNBZGRlZCB8fCBjbGFzc2VzUmVtb3ZlZCkge1xuXG4gICAgICAgIHBvc3REaWdlc3RRdWV1ZS5zZXQoZWxlbWVudCwgZGF0YSk7XG4gICAgICAgIHBvc3REaWdlc3RFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChwb3N0RGlnZXN0RWxlbWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kJHBvc3REaWdlc3QoaGFuZGxlQ1NTQ2xhc3NDaGFuZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuaW1hdGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiAkYW5pbWF0ZSB0aGF0IGRvZXNuJ3QgcGVyZm9ybSBhbnkgYW5pbWF0aW9ucywgaW5zdGVhZCBqdXN0XG4gKiBzeW5jaHJvbm91c2x5IHBlcmZvcm1zIERPTSB1cGRhdGVzIGFuZCByZXNvbHZlcyB0aGUgcmV0dXJuZWQgcnVubmVyIHByb21pc2UuXG4gKlxuICogSW4gb3JkZXIgdG8gZW5hYmxlIGFuaW1hdGlvbnMgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBoYXMgdG8gYmUgbG9hZGVkLlxuICpcbiAqIFRvIHNlZSB0aGUgZnVuY3Rpb25hbCBpbXBsZW1lbnRhdGlvbiBjaGVjayBvdXQgYHNyYy9uZ0FuaW1hdGUvYW5pbWF0ZS5qc2AuXG4gKi9cbnZhciAkQW5pbWF0ZVByb3ZpZGVyID0gWyckcHJvdmlkZScsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbigkcHJvdmlkZSkge1xuICB2YXIgcHJvdmlkZXIgPSB0aGlzO1xuICB2YXIgY2xhc3NOYW1lRmlsdGVyID0gbnVsbDtcbiAgdmFyIGN1c3RvbUZpbHRlciA9IG51bGw7XG5cbiAgdGhpcy4kJHJlZ2lzdGVyZWRBbmltYXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNyZWdpc3RlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXJzIGEgbmV3IGluamVjdGFibGUgYW5pbWF0aW9uIGZhY3RvcnkgZnVuY3Rpb24uIFRoZSBmYWN0b3J5IGZ1bmN0aW9uIHByb2R1Y2VzIHRoZVxuICAgKiBhbmltYXRpb24gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIGNhbGxiYWNrIGZ1bmN0aW9ucyBmb3IgZWFjaCBldmVudCB0aGF0IGlzIGV4cGVjdGVkIHRvIGJlXG4gICAqIGFuaW1hdGVkLlxuICAgKlxuICAgKiAgICogYGV2ZW50Rm5gOiBgZnVuY3Rpb24oZWxlbWVudCwgLi4uICwgZG9uZUZ1bmN0aW9uLCBvcHRpb25zKWBcbiAgICogICBUaGUgZWxlbWVudCB0byBhbmltYXRlLCB0aGUgYGRvbmVGdW5jdGlvbmAgYW5kIHRoZSBvcHRpb25zIGZlZCBpbnRvIHRoZSBhbmltYXRpb24uIERlcGVuZGluZ1xuICAgKiAgIG9uIHRoZSB0eXBlIG9mIGFuaW1hdGlvbiBhZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIGluamVjdGVkIGludG8gdGhlIGFuaW1hdGlvbiBmdW5jdGlvbi4gVGhlXG4gICAqICAgbGlzdCBiZWxvdyBleHBsYWlucyB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlcyBmb3IgdGhlIGRpZmZlcmVudCBhbmltYXRpb24gbWV0aG9kczpcbiAgICpcbiAgICogICAtIHNldENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBhZGRlZENsYXNzZXMsIHJlbW92ZWRDbGFzc2VzLCBkb25lRnVuY3Rpb24sIG9wdGlvbnMpXG4gICAqICAgLSBhZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgYWRkZWRDbGFzc2VzLCBkb25lRnVuY3Rpb24sIG9wdGlvbnMpXG4gICAqICAgLSByZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgcmVtb3ZlZENsYXNzZXMsIGRvbmVGdW5jdGlvbiwgb3B0aW9ucylcbiAgICogICAtIGVudGVyLCBsZWF2ZSwgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgZG9uZUZ1bmN0aW9uLCBvcHRpb25zKVxuICAgKiAgIC0gYW5pbWF0ZTogZnVuY3Rpb24oZWxlbWVudCwgZnJvbVN0eWxlcywgdG9TdHlsZXMsIGRvbmVGdW5jdGlvbiwgb3B0aW9ucylcbiAgICpcbiAgICogICBNYWtlIHN1cmUgdG8gdHJpZ2dlciB0aGUgYGRvbmVGdW5jdGlvbmAgb25jZSB0aGUgYW5pbWF0aW9uIGlzIGZ1bGx5IGNvbXBsZXRlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIHJldHVybiB7XG4gICAqICAgICAvL2VudGVyLCBsZWF2ZSwgbW92ZSBzaWduYXR1cmVcbiAgICogICAgIGV2ZW50Rm4gOiBmdW5jdGlvbihlbGVtZW50LCBkb25lLCBvcHRpb25zKSB7XG4gICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxuICAgKiAgICAgICAvL29uY2UgY29tcGxldGUsIHRoZW4gcnVuIGRvbmUoKVxuICAgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gZW5kRnVuY3Rpb24od2FzQ2FuY2VsbGVkKSB7XG4gICAqICAgICAgICAgLy9jb2RlIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uXG4gICAqICAgICAgIH1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYW5pbWF0aW9uICh0aGlzIGlzIHdoYXQgdGhlIGNsYXNzLWJhc2VkIENTUyB2YWx1ZSB3aWxsIGJlIGNvbXBhcmVkIHRvKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeSBUaGUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcmV0dXJuIHRoZSBhbmltYXRpb25cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuXG4gICAqL1xuICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgZmFjdG9yeSkge1xuICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApICE9PSAnLicpIHtcbiAgICAgIHRocm93ICRhbmltYXRlTWluRXJyKCdub3Rjc2VsJywgJ0V4cGVjdGluZyBjbGFzcyBzZWxlY3RvciBzdGFydGluZyB3aXRoIFxcJy5cXCcgZ290IFxcJ3swfVxcJy4nLCBuYW1lKTtcbiAgICB9XG5cbiAgICB2YXIga2V5ID0gbmFtZSArICctYW5pbWF0aW9uJztcbiAgICBwcm92aWRlci4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW25hbWUuc3Vic3RyKDEpXSA9IGtleTtcbiAgICAkcHJvdmlkZS5mYWN0b3J5KGtleSwgZmFjdG9yeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNjdXN0b21GaWx0ZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgYW5kL29yIHJldHVybnMgdGhlIGN1c3RvbSBmaWx0ZXIgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIFwiZmlsdGVyXCIgYW5pbWF0aW9ucywgaS5lLlxuICAgKiBkZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGlzIGFsbG93ZWQgb3Igbm90LiBXaGVuIG5vIGZpbHRlciBpcyBzcGVjaWZpZWQgKHRoZSBkZWZhdWx0KSwgbm9cbiAgICogYW5pbWF0aW9uIHdpbGwgYmUgYmxvY2tlZC4gU2V0dGluZyB0aGUgYGN1c3RvbUZpbHRlcmAgdmFsdWUgd2lsbCBvbmx5IGFsbG93IGFuaW1hdGlvbnMgZm9yXG4gICAqIHdoaWNoIHRoZSBmaWx0ZXIgZnVuY3Rpb24ncyByZXR1cm4gdmFsdWUgaXMgdHJ1dGh5LlxuICAgKlxuICAgKiBUaGlzIGFsbG93cyB0byBlYXNpbHkgY3JlYXRlIGFyYml0cmFyaWx5IGNvbXBsZXggcnVsZXMgZm9yIGZpbHRlcmluZyBhbmltYXRpb25zLCBzdWNoIGFzXG4gICAqIGFsbG93aW5nIHNwZWNpZmljIGV2ZW50cyBvbmx5LCBvciBlbmFibGluZyBhbmltYXRpb25zIG9uIHNwZWNpZmljIHN1YnRyZWVzIG9mIHRoZSBET00sIGV0Yy5cbiAgICogRmlsdGVyaW5nIGFuaW1hdGlvbnMgY2FuIGFsc28gYm9vc3QgcGVyZm9ybWFuY2UgZm9yIGxvdy1wb3dlcmVkIGRldmljZXMsIGFzIHdlbGwgYXNcbiAgICogYXBwbGljYXRpb25zIGNvbnRhaW5pbmcgYSBsb3Qgb2Ygc3RydWN0dXJhbCBvcGVyYXRpb25zLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICAgKiAgICoqQmVzdCBQcmFjdGljZToqKlxuICAgKiAgIEtlZXAgdGhlIGZpbHRlcmluZyBmdW5jdGlvbiBhcyBsZWFuIGFzIHBvc3NpYmxlLCBiZWNhdXNlIGl0IHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIERPTVxuICAgKiAgIGFjdGlvbiAoZS5nLiBpbnNlcnRpb24sIHJlbW92YWwsIGNsYXNzIGNoYW5nZSkgcGVyZm9ybWVkIGJ5IFwiYW5pbWF0aW9uLWF3YXJlXCIgZGlyZWN0aXZlcy5cbiAgICogICBTZWUge0BsaW5rIGd1aWRlL2FuaW1hdGlvbnMjd2hpY2gtZGlyZWN0aXZlcy1zdXBwb3J0LWFuaW1hdGlvbnMtIGhlcmV9IGZvciBhIGxpc3Qgb2YgYnVpbHQtaW5cbiAgICogICBkaXJlY3RpdmVzIHRoYXQgc3VwcG9ydCBhbmltYXRpb25zLlxuICAgKiAgIFBlcmZvcm1pbmcgY29tcHV0YXRpb25hbGx5IGV4cGVuc2l2ZSBvciB0aW1lLWNvbnN1bWluZyBvcGVyYXRpb25zIG9uIGVhY2ggY2FsbCBvZiB0aGVcbiAgICogICBmaWx0ZXJpbmcgZnVuY3Rpb24gY2FuIG1ha2UgeW91ciBhbmltYXRpb25zIHNsdWdnaXNoLlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogKipOb3RlOioqIElmIHByZXNlbnQsIGBjdXN0b21GaWx0ZXJgIHdpbGwgYmUgY2hlY2tlZCBiZWZvcmVcbiAgICoge0BsaW5rICRhbmltYXRlUHJvdmlkZXIjY2xhc3NOYW1lRmlsdGVyIGNsYXNzTmFtZUZpbHRlcn0uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBmaWx0ZXJGbiAtIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGZpbHRlciBhbGwgYW5pbWF0aW9ucy5cbiAgICogICBJZiBhIGZhbHN5IHZhbHVlIGlzIHJldHVybmVkLCBubyBhbmltYXRpb24gd2lsbCBiZSBwZXJmb3JtZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZFxuICAgKiAgIHdpdGggdGhlIGZvbGxvd2luZyBhcmd1bWVudHM6XG4gICAqICAgLSAqKm5vZGUqKiBge0RPTUVsZW1lbnR9YCAtIFRoZSBET00gZWxlbWVudCB0byBiZSBhbmltYXRlZC5cbiAgICogICAtICoqZXZlbnQqKiBge1N0cmluZ31gIC0gVGhlIG5hbWUgb2YgdGhlIGFuaW1hdGlvbiBldmVudCAoZS5nLiBgZW50ZXJgLCBgbGVhdmVgLCBgYWRkQ2xhc3NgXG4gICAqICAgICBldGMpLlxuICAgKiAgIC0gKipvcHRpb25zKiogYHtPYmplY3R9YCAtIEEgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB1c2VkIGZvciB0aGUgYW5pbWF0aW9uLlxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJlbnQgZmlsdGVyIGZ1bmN0aW9uIG9yIGBudWxsYCBpZiB0aGVyZSBpcyBub25lIHNldC5cbiAgICovXG4gIHRoaXMuY3VzdG9tRmlsdGVyID0gZnVuY3Rpb24oZmlsdGVyRm4pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY3VzdG9tRmlsdGVyID0gaXNGdW5jdGlvbihmaWx0ZXJGbikgPyBmaWx0ZXJGbiA6IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1c3RvbUZpbHRlcjtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI2NsYXNzTmFtZUZpbHRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyBhbmQvb3IgcmV0dXJucyB0aGUgQ1NTIGNsYXNzIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIGNoZWNrZWQgd2hlbiBwZXJmb3JtaW5nXG4gICAqIGFuIGFuaW1hdGlvbi4gVXBvbiBib290c3RyYXAgdGhlIGNsYXNzTmFtZUZpbHRlciB2YWx1ZSBpcyBub3Qgc2V0IGF0IGFsbCBhbmQgd2lsbFxuICAgKiB0aGVyZWZvcmUgZW5hYmxlICRhbmltYXRlIHRvIGF0dGVtcHQgdG8gcGVyZm9ybSBhbiBhbmltYXRpb24gb24gYW55IGVsZW1lbnQgdGhhdCBpcyB0cmlnZ2VyZWQuXG4gICAqIFdoZW4gc2V0dGluZyB0aGUgYGNsYXNzTmFtZUZpbHRlcmAgdmFsdWUsIGFuaW1hdGlvbnMgd2lsbCBvbmx5IGJlIHBlcmZvcm1lZCBvbiBlbGVtZW50c1xuICAgKiB0aGF0IHN1Y2Nlc3NmdWxseSBtYXRjaCB0aGUgZmlsdGVyIGV4cHJlc3Npb24uIFRoaXMgaW4gdHVybiBjYW4gYm9vc3QgcGVyZm9ybWFuY2VcbiAgICogZm9yIGxvdy1wb3dlcmVkIGRldmljZXMgYXMgd2VsbCBhcyBhcHBsaWNhdGlvbnMgY29udGFpbmluZyBhIGxvdCBvZiBzdHJ1Y3R1cmFsIG9wZXJhdGlvbnMuXG4gICAqXG4gICAqICoqTm90ZToqKiBJZiBwcmVzZW50LCBgY2xhc3NOYW1lRmlsdGVyYCB3aWxsIGJlIGNoZWNrZWQgYWZ0ZXJcbiAgICoge0BsaW5rICRhbmltYXRlUHJvdmlkZXIjY3VzdG9tRmlsdGVyIGN1c3RvbUZpbHRlcn0uIElmIGBjdXN0b21GaWx0ZXJgIGlzIHByZXNlbnQgYW5kIHJldHVybnNcbiAgICogZmFsc2UsIGBjbGFzc05hbWVGaWx0ZXJgIHdpbGwgbm90IGJlIGNoZWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gZXhwcmVzc2lvbiBUaGUgY2xhc3NOYW1lIGV4cHJlc3Npb24gd2hpY2ggd2lsbCBiZSBjaGVja2VkIGFnYWluc3QgYWxsIGFuaW1hdGlvbnNcbiAgICogQHJldHVybiB7UmVnRXhwfSBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIGV4cHJlc3Npb24gdmFsdWUuIElmIG51bGwgdGhlbiB0aGVyZSBpcyBubyBleHByZXNzaW9uIHZhbHVlXG4gICAqL1xuICB0aGlzLmNsYXNzTmFtZUZpbHRlciA9IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2xhc3NOYW1lRmlsdGVyID0gKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBSZWdFeHApID8gZXhwcmVzc2lvbiA6IG51bGw7XG4gICAgICBpZiAoY2xhc3NOYW1lRmlsdGVyKSB7XG4gICAgICAgIHZhciByZXNlcnZlZFJlZ2V4ID0gbmV3IFJlZ0V4cCgnWyhcXFxcc3xcXFxcLyldJyArIE5HX0FOSU1BVEVfQ0xBU1NOQU1FICsgJ1soXFxcXHN8XFxcXC8pXScpO1xuICAgICAgICBpZiAocmVzZXJ2ZWRSZWdleC50ZXN0KGNsYXNzTmFtZUZpbHRlci50b1N0cmluZygpKSkge1xuICAgICAgICAgIGNsYXNzTmFtZUZpbHRlciA9IG51bGw7XG4gICAgICAgICAgdGhyb3cgJGFuaW1hdGVNaW5FcnIoJ25vbmdjbHMnLCAnJGFuaW1hdGVQcm92aWRlci5jbGFzc05hbWVGaWx0ZXIocmVnZXgpIHByb2hpYml0cyBhY2NlcHRpbmcgYSByZWdleCB2YWx1ZSB3aGljaCBtYXRjaGVzL2NvbnRhaW5zIHRoZSBcInswfVwiIENTUyBjbGFzcy4nLCBOR19BTklNQVRFX0NMQVNTTkFNRSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNsYXNzTmFtZUZpbHRlcjtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyQkYW5pbWF0ZVF1ZXVlJywgZnVuY3Rpb24oJCRhbmltYXRlUXVldWUpIHtcbiAgICBmdW5jdGlvbiBkb21JbnNlcnQoZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50KSB7XG4gICAgICAvLyBpZiBmb3Igc29tZSByZWFzb24gdGhlIHByZXZpb3VzIGVsZW1lbnQgd2FzIHJlbW92ZWRcbiAgICAgIC8vIGZyb20gdGhlIGRvbSBzb21ldGltZSBiZWZvcmUgdGhpcyBjb2RlIHJ1bnMgdGhlbiBsZXQnc1xuICAgICAgLy8ganVzdCBzdGljayB0byB1c2luZyB0aGUgcGFyZW50IGVsZW1lbnQgYXMgdGhlIGFuY2hvclxuICAgICAgaWYgKGFmdGVyRWxlbWVudCkge1xuICAgICAgICB2YXIgYWZ0ZXJOb2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGFmdGVyRWxlbWVudCk7XG4gICAgICAgIGlmIChhZnRlck5vZGUgJiYgIWFmdGVyTm9kZS5wYXJlbnROb2RlICYmICFhZnRlck5vZGUucHJldmlvdXNFbGVtZW50U2libGluZykge1xuICAgICAgICAgIGFmdGVyRWxlbWVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhZnRlckVsZW1lbnQpIHtcbiAgICAgICAgYWZ0ZXJFbGVtZW50LmFmdGVyKGVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50RWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGFuaW1hdGVcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlICRhbmltYXRlIHNlcnZpY2UgZXhwb3NlcyBhIHNlcmllcyBvZiBET00gdXRpbGl0eSBtZXRob2RzIHRoYXQgcHJvdmlkZSBzdXBwb3J0XG4gICAgICogZm9yIGFuaW1hdGlvbiBob29rcy4gVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdGhlIGFwcGxpY2F0aW9uIG9mIERPTSBvcGVyYXRpb25zLCBob3dldmVyLFxuICAgICAqIHdoZW4gYW4gYW5pbWF0aW9uIGlzIGRldGVjdGVkIChhbmQgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZCksICRhbmltYXRlIHdpbGwgZG8gdGhlIGhlYXZ5IGxpZnRpbmdcbiAgICAgKiB0byBlbnN1cmUgdGhhdCBhbmltYXRpb24gcnVucyB3aXRoIHRoZSB0cmlnZ2VyZWQgRE9NIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgJGFuaW1hdGUgZG9lc24ndCB0cmlnZ2VyIGFueSBhbmltYXRpb25zLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBpc24ndFxuICAgICAqIGluY2x1ZGVkIGFuZCBvbmx5IHdoZW4gaXQgaXMgYWN0aXZlIHRoZW4gdGhlIGFuaW1hdGlvbiBob29rcyB0aGF0IGAkYW5pbWF0ZWAgdHJpZ2dlcnMgd2lsbCBiZVxuICAgICAqIGZ1bmN0aW9uYWwuIE9uY2UgYWN0aXZlIHRoZW4gYWxsIHN0cnVjdHVyYWwgYG5nLWAgZGlyZWN0aXZlcyB3aWxsIHRyaWdnZXIgYW5pbWF0aW9ucyBhcyB0aGV5IHBlcmZvcm1cbiAgICAgKiB0aGVpciBET00tcmVsYXRlZCBvcGVyYXRpb25zIChlbnRlciwgbGVhdmUgYW5kIG1vdmUpLiBPdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYG5nQ2xhc3NgLFxuICAgICAqIGBuZ1Nob3dgLCBgbmdIaWRlYCBhbmQgYG5nTWVzc2FnZXNgIGFsc28gcHJvdmlkZSBzdXBwb3J0IGZvciBhbmltYXRpb25zLlxuICAgICAqXG4gICAgICogSXQgaXMgcmVjb21tZW5kZWQgdGhhdCB0aGVgJGFuaW1hdGVgIHNlcnZpY2UgaXMgYWx3YXlzIHVzZWQgd2hlbiBleGVjdXRpbmcgRE9NLXJlbGF0ZWQgcHJvY2VkdXJlcyB3aXRoaW4gZGlyZWN0aXZlcy5cbiAgICAgKlxuICAgICAqIFRvIGxlYXJuIG1vcmUgYWJvdXQgZW5hYmxpbmcgYW5pbWF0aW9uIHN1cHBvcnQsIGNsaWNrIGhlcmUgdG8gdmlzaXQgdGhlXG4gICAgICoge0BsaW5rIG5nQW5pbWF0ZSBuZ0FuaW1hdGUgbW9kdWxlIHBhZ2V9LlxuICAgICAqL1xuICAgIHJldHVybiB7XG4gICAgICAvLyB3ZSBkb24ndCBjYWxsIGl0IGRpcmVjdGx5IHNpbmNlIG5vbi1leGlzdGFudCBhcmd1bWVudHMgbWF5XG4gICAgICAvLyBiZSBpbnRlcnByZXRlZCBhcyBudWxsIHdpdGhpbiB0aGUgc3ViIGVuYWJsZWQgZnVuY3Rpb25cblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjb25cbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gU2V0cyB1cCBhbiBldmVudCBsaXN0ZW5lciB0byBmaXJlIHdoZW5ldmVyIHRoZSBhbmltYXRpb24gZXZlbnQgKGVudGVyLCBsZWF2ZSwgbW92ZSwgZXRjLi4uKVxuICAgICAgICogICAgaGFzIGZpcmVkIG9uIHRoZSBnaXZlbiBlbGVtZW50IG9yIGFtb25nIGFueSBvZiBpdHMgY2hpbGRyZW4uIE9uY2UgdGhlIGxpc3RlbmVyIGlzIGZpcmVkLCB0aGUgcHJvdmlkZWQgY2FsbGJhY2tcbiAgICAgICAqICAgIGlzIGZpcmVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICRhbmltYXRlLm9uKCdlbnRlcicsIGNvbnRhaW5lcixcbiAgICAgICAqICAgIGZ1bmN0aW9uIGNhbGxiYWNrKGVsZW1lbnQsIHBoYXNlKSB7XG4gICAgICAgKiAgICAgIC8vIGNvb2wgd2UgZGV0ZWN0ZWQgYW4gZW50ZXIgYW5pbWF0aW9uIHdpdGhpbiB0aGUgY29udGFpbmVyXG4gICAgICAgKiAgICB9XG4gICAgICAgKiApO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IHRoZSBhbmltYXRpb24gZXZlbnQgdGhhdCB3aWxsIGJlIGNhcHR1cmVkIChlLmcuIGVudGVyLCBsZWF2ZSwgbW92ZSwgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzLCBldGMuLi4pXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciB0aGUgY29udGFpbmVyIGVsZW1lbnQgdGhhdCB3aWxsIGNhcHR1cmUgZWFjaCBvZiB0aGUgYW5pbWF0aW9uIGV2ZW50cyB0aGF0IGFyZSBmaXJlZCBvbiBpdHNlbGZcbiAgICAgICAqICAgICBhcyB3ZWxsIGFzIGFtb25nIGl0cyBjaGlsZHJlblxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIHRoZSBsaXN0ZW5lciBpcyB0cmlnZ2VyZWRcbiAgICAgICAqXG4gICAgICAgKiBUaGUgYXJndW1lbnRzIHByZXNlbnQgaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGFyZTpcbiAgICAgICAqICogYGVsZW1lbnRgIC0gVGhlIGNhcHR1cmVkIERPTSBlbGVtZW50IHRoYXQgdGhlIGFuaW1hdGlvbiB3YXMgZmlyZWQgb24uXG4gICAgICAgKiAqIGBwaGFzZWAgLSBUaGUgcGhhc2Ugb2YgdGhlIGFuaW1hdGlvbi4gVGhlIHR3byBwb3NzaWJsZSBwaGFzZXMgYXJlICoqc3RhcnQqKiAod2hlbiB0aGUgYW5pbWF0aW9uIHN0YXJ0cykgYW5kICoqY2xvc2UqKiAod2hlbiBpdCBlbmRzKS5cbiAgICAgICAqL1xuICAgICAgb246ICQkYW5pbWF0ZVF1ZXVlLm9uLFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNvZmZcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gRGVyZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgYmFzZWQgb24gdGhlIGV2ZW50IHdoaWNoIGhhcyBiZWVuIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgZWxlbWVudC4gVGhpcyBtZXRob2RcbiAgICAgICAqIGNhbiBiZSB1c2VkIGluIHRocmVlIGRpZmZlcmVudCB3YXlzIGRlcGVuZGluZyBvbiB0aGUgYXJndW1lbnRzOlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAvLyByZW1vdmUgYWxsIHRoZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgYGVudGVyYFxuICAgICAgICogJGFuaW1hdGUub2ZmKCdlbnRlcicpO1xuICAgICAgICpcbiAgICAgICAqIC8vIHJlbW92ZSBsaXN0ZW5lcnMgZm9yIGFsbCBhbmltYXRpb24gZXZlbnRzIGZyb20gdGhlIGNvbnRhaW5lciBlbGVtZW50XG4gICAgICAgKiAkYW5pbWF0ZS5vZmYoY29udGFpbmVyKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyByZW1vdmUgYWxsIHRoZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgYGVudGVyYCBvbiB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQgaXRzIGNoaWxkcmVuXG4gICAgICAgKiAkYW5pbWF0ZS5vZmYoJ2VudGVyJywgY29udGFpbmVyKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIHByb3ZpZGVkIGJ5IGBjYWxsYmFja2AgdGhhdCBpcyBzZXRcbiAgICAgICAqIC8vIHRvIGxpc3RlbiBmb3IgYGVudGVyYCBvbiB0aGUgZ2l2ZW4gYGNvbnRhaW5lcmAgYXMgd2VsbCBhcyBpdHMgY2hpbGRyZW5cbiAgICAgICAqICRhbmltYXRlLm9mZignZW50ZXInLCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfERPTUVsZW1lbnR9IGV2ZW50fGNvbnRhaW5lciB0aGUgYW5pbWF0aW9uIGV2ZW50IChlLmcuIGVudGVyLCBsZWF2ZSwgbW92ZSxcbiAgICAgICAqIGFkZENsYXNzLCByZW1vdmVDbGFzcywgZXRjLi4uKSwgb3IgdGhlIGNvbnRhaW5lciBlbGVtZW50LiBJZiBpdCBpcyB0aGUgZWxlbWVudCwgYWxsIG90aGVyXG4gICAgICAgKiBhcmd1bWVudHMgYXJlIGlnbm9yZWQuXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBjb250YWluZXIgdGhlIGNvbnRhaW5lciBlbGVtZW50IHRoZSBldmVudCBsaXN0ZW5lciB3YXMgcGxhY2VkIG9uXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2FzIHJlZ2lzdGVyZWQgYXMgdGhlIGxpc3RlbmVyXG4gICAgICAgKi9cbiAgICAgIG9mZjogJCRhbmltYXRlUXVldWUub2ZmLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3BpblxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBc3NvY2lhdGVzIHRoZSBwcm92aWRlZCBlbGVtZW50IHdpdGggYSBob3N0IHBhcmVudCBlbGVtZW50IHRvIGFsbG93IHRoZSBlbGVtZW50IHRvIGJlIGFuaW1hdGVkIGV2ZW4gaWYgaXQgZXhpc3RzXG4gICAgICAgKiAgICBvdXRzaWRlIG9mIHRoZSBET00gc3RydWN0dXJlIG9mIHRoZSBBbmd1bGFySlMgYXBwbGljYXRpb24uIEJ5IGRvaW5nIHNvLCBhbnkgYW5pbWF0aW9uIHRyaWdnZXJlZCB2aWEgYCRhbmltYXRlYCBjYW4gYmUgaXNzdWVkIG9uIHRoZVxuICAgICAgICogICAgZWxlbWVudCBkZXNwaXRlIGJlaW5nIG91dHNpZGUgdGhlIHJlYWxtIG9mIHRoZSBhcHBsaWNhdGlvbiBvciB3aXRoaW4gYW5vdGhlciBhcHBsaWNhdGlvbi4gU2F5IGZvciBleGFtcGxlIGlmIHRoZSBhcHBsaWNhdGlvblxuICAgICAgICogICAgd2FzIGJvb3RzdHJhcHBlZCBvbiBhbiBlbGVtZW50IHRoYXQgaXMgc29tZXdoZXJlIGluc2lkZSBvZiB0aGUgYDxib2R5PmAgdGFnLCBidXQgd2Ugd2FudGVkIHRvIGFsbG93IGZvciBhbiBlbGVtZW50IHRvIGJlIHNpdHVhdGVkXG4gICAgICAgKiAgICBhcyBhIGRpcmVjdCBjaGlsZCBvZiBgZG9jdW1lbnQuYm9keWAsIHRoZW4gdGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcGlubmluZyB0aGUgZWxlbWVudCB2aWEgYCRhbmltYXRlLnBpbihlbGVtZW50KWAuIEtlZXAgaW4gbWluZFxuICAgICAgICogICAgdGhhdCBjYWxsaW5nIGAkYW5pbWF0ZS5waW4oZWxlbWVudCwgcGFyZW50RWxlbWVudClgIHdpbGwgbm90IGFjdHVhbGx5IGluc2VydCBpbnRvIHRoZSBET00gYW55d2hlcmU7IGl0IHdpbGwganVzdCBjcmVhdGUgdGhlIGFzc29jaWF0aW9uLlxuICAgICAgICpcbiAgICAgICAqICAgIE5vdGUgdGhhdCB0aGlzIGZlYXR1cmUgaXMgb25seSBhY3RpdmUgd2hlbiB0aGUgYG5nQW5pbWF0ZWAgbW9kdWxlIGlzIHVzZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBleHRlcm5hbCBlbGVtZW50IHRoYXQgd2lsbCBiZSBwaW5uZWRcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50RWxlbWVudCB0aGUgaG9zdCBwYXJlbnQgZWxlbWVudCB0aGF0IHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBleHRlcm5hbCBlbGVtZW50XG4gICAgICAgKi9cbiAgICAgIHBpbjogJCRhbmltYXRlUXVldWUucGluLFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNlbmFibGVkXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIFVzZWQgdG8gZ2V0IGFuZCBzZXQgd2hldGhlciBhbmltYXRpb25zIGFyZSBlbmFibGVkIG9yIG5vdCBvbiB0aGUgZW50aXJlIGFwcGxpY2F0aW9uIG9yIG9uIGFuIGVsZW1lbnQgYW5kIGl0cyBjaGlsZHJlbi4gVGhpc1xuICAgICAgICogZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBpbiBmb3VyIHdheXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqIC8vIHJldHVybnMgdHJ1ZSBvciBmYWxzZVxuICAgICAgICogJGFuaW1hdGUuZW5hYmxlZCgpO1xuICAgICAgICpcbiAgICAgICAqIC8vIGNoYW5nZXMgdGhlIGVuYWJsZWQgc3RhdGUgZm9yIGFsbCBhbmltYXRpb25zXG4gICAgICAgKiAkYW5pbWF0ZS5lbmFibGVkKGZhbHNlKTtcbiAgICAgICAqICRhbmltYXRlLmVuYWJsZWQodHJ1ZSk7XG4gICAgICAgKlxuICAgICAgICogLy8gcmV0dXJucyB0cnVlIG9yIGZhbHNlIGlmIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQgZm9yIGFuIGVsZW1lbnRcbiAgICAgICAqICRhbmltYXRlLmVuYWJsZWQoZWxlbWVudCk7XG4gICAgICAgKlxuICAgICAgICogLy8gY2hhbmdlcyB0aGUgZW5hYmxlZCBzdGF0ZSBmb3IgYW4gZWxlbWVudCBhbmQgaXRzIGNoaWxkcmVuXG4gICAgICAgKiAkYW5pbWF0ZS5lbmFibGVkKGVsZW1lbnQsIHRydWUpO1xuICAgICAgICogJGFuaW1hdGUuZW5hYmxlZChlbGVtZW50LCBmYWxzZSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSBjb25zaWRlcmVkIGZvciBjaGVja2luZy9zZXR0aW5nIHRoZSBlbmFibGVkIHN0YXRlXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBlbmFibGVkIHdoZXRoZXIgb3Igbm90IHRoZSBhbmltYXRpb25zIHdpbGwgYmUgZW5hYmxlZCBmb3IgdGhlIGVsZW1lbnRcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCBhbmltYXRpb25zIGFyZSBlbmFibGVkXG4gICAgICAgKi9cbiAgICAgIGVuYWJsZWQ6ICQkYW5pbWF0ZVF1ZXVlLmVuYWJsZWQsXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjY2FuY2VsXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIENhbmNlbHMgdGhlIHByb3ZpZGVkIGFuaW1hdGlvbiBhbmQgYXBwbGllcyB0aGUgZW5kIHN0YXRlIG9mIHRoZSBhbmltYXRpb24uXG4gICAgICAgKiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjYW5jZWwgdGhlIHVuZGVybHlpbmcgb3BlcmF0aW9uLCBlLmcuIHRoZSBzZXR0aW5nIG9mIGNsYXNzZXMgb3JcbiAgICAgICAqIGFkZGluZyB0aGUgZWxlbWVudCB0byB0aGUgRE9NLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7YW5pbWF0aW9uUnVubmVyfSBhbmltYXRpb25SdW5uZXIgQW4gYW5pbWF0aW9uIHJ1bm5lciByZXR1cm5lZCBieSBhbiAkYW5pbWF0ZSBmdW5jdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICA8ZXhhbXBsZSBtb2R1bGU9XCJhbmltYXRpb25FeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cImFuaW1hdGUtY2FuY2VsXCI+XG4gICAgICAgICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2FuaW1hdGlvbkV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKS5jb21wb25lbnQoJ2NhbmNlbEV4YW1wbGUnLCB7XG4gICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRlbGVtZW50LCAkYW5pbWF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucnVubmVyID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucnVubmVyID0gJGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQuZmluZCgnZGl2JyksICdyZWQnKTtcbiAgICAgICAgICAgICAgICAgIHZhciBjdHJsID0gdGhpcztcbiAgICAgICAgICAgICAgICAgIHRoaXMucnVubmVyLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0cmwucnVubmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJ1bm5lciA9ICRhbmltYXRlLnJlbW92ZUNsYXNzKCRlbGVtZW50LmZpbmQoJ2RpdicpLCAncmVkJyk7XG4gICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJ1bm5lci5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjdHJsLnJ1bm5lciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICRhbmltYXRlLmNhbmNlbCh0aGlzLnJ1bm5lcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgPC9maWxlPlxuICAgICAgICAgIDxmaWxlIG5hbWU9XCJ0ZW1wbGF0ZS5odG1sXCI+XG4gICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImFkZFwiIG5nLWNsaWNrPVwiJGN0cmwuYWRkQ2xhc3MoKVwiPkFkZDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGN0cmwucmVtb3ZlQ2xhc3MoKVwiPlJlbW92ZTwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnI+XG4gICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjYW5jZWxcIiBuZy1jbGljaz1cIiRjdHJsLmNhbmNlbCgpXCIgbmctZGlzYWJsZWQ9XCIhJGN0cmwucnVubmVyXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICAgIDxicj5cbiAgICAgICAgICAgICAgPGRpdiBpZD1cInRhcmdldFwiPkNTUy1BbmltYXRlZCBUZXh0PC9kaXY+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9maWxlPlxuICAgICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICAgICA8Y2FuY2VsLWV4YW1wbGU+PC9jYW5jZWwtZXhhbXBsZT5cbiAgICAgICAgICA8L2ZpbGU+XG4gICAgICAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgICAgICAgLnJlZC1hZGQsIC5yZWQtcmVtb3ZlIHtcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDRzIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5yZWQsXG4gICAgICAgICAgICAucmVkLWFkZC5yZWQtYWRkLWFjdGl2ZSB7XG4gICAgICAgICAgICAgIGNvbG9yOiAjRkYwMDAwO1xuICAgICAgICAgICAgICBmb250LXNpemU6IDQwcHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5yZWQtcmVtb3ZlLnJlZC1yZW1vdmUtYWN0aXZlIHtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDwvZXhhbXBsZT5cbiAgICAgICAqL1xuICAgICAgY2FuY2VsOiBmdW5jdGlvbihydW5uZXIpIHtcbiAgICAgICAgaWYgKHJ1bm5lci5jYW5jZWwpIHtcbiAgICAgICAgICBydW5uZXIuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICpcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2VudGVyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIEluc2VydHMgdGhlIGVsZW1lbnQgaW50byB0aGUgRE9NIGVpdGhlciBhZnRlciB0aGUgYGFmdGVyYCBlbGVtZW50IChpZiBwcm92aWRlZCkgb3JcbiAgICAgICAqICAgYXMgdGhlIGZpcnN0IGNoaWxkIHdpdGhpbiB0aGUgYHBhcmVudGAgZWxlbWVudCBhbmQgdGhlbiB0cmlnZ2VycyBhbiBhbmltYXRpb24uXG4gICAgICAgKiAgIEEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgZHVyaW5nIHRoZSBuZXh0IGRpZ2VzdCBvbmNlIHRoZSBhbmltYXRpb25cbiAgICAgICAqICAgaGFzIGNvbXBsZXRlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET01cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudCBhc1xuICAgICAgICogICBhIGNoaWxkIChzbyBsb25nIGFzIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gYWZ0ZXIgdGhlIHNpYmxpbmcgZWxlbWVudCBhZnRlciB3aGljaCB0aGUgZWxlbWVudCB3aWxsIGJlIGFwcGVuZGVkXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1J1bm5lcn0gdGhlIGFuaW1hdGlvbiBydW5uZXJcbiAgICAgICAqL1xuICAgICAgZW50ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50ICYmIGpxTGl0ZShwYXJlbnQpO1xuICAgICAgICBhZnRlciA9IGFmdGVyICYmIGpxTGl0ZShhZnRlcik7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudCB8fCBhZnRlci5wYXJlbnQoKTtcbiAgICAgICAgZG9tSW5zZXJ0KGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnZW50ZXInLCBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjbW92ZVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBJbnNlcnRzIChtb3ZlcykgdGhlIGVsZW1lbnQgaW50byBpdHMgbmV3IHBvc2l0aW9uIGluIHRoZSBET00gZWl0aGVyIGFmdGVyXG4gICAgICAgKiAgIHRoZSBgYWZ0ZXJgIGVsZW1lbnQgKGlmIHByb3ZpZGVkKSBvciBhcyB0aGUgZmlyc3QgY2hpbGQgd2l0aGluIHRoZSBgcGFyZW50YCBlbGVtZW50XG4gICAgICAgKiAgIGFuZCB0aGVuIHRyaWdnZXJzIGFuIGFuaW1hdGlvbi4gQSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZFxuICAgICAgICogICBkdXJpbmcgdGhlIG5leHQgZGlnZXN0IG9uY2UgdGhlIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIG1vdmVkIGludG8gdGhlIG5ldyBET00gcG9zaXRpb25cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudCBhc1xuICAgICAgICogICBhIGNoaWxkIChzbyBsb25nIGFzIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gYWZ0ZXIgdGhlIHNpYmxpbmcgZWxlbWVudCBhZnRlciB3aGljaCB0aGUgZWxlbWVudCB3aWxsIGJlIGFwcGVuZGVkXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1J1bm5lcn0gdGhlIGFuaW1hdGlvbiBydW5uZXJcbiAgICAgICAqL1xuICAgICAgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50LCBhZnRlciwgb3B0aW9ucykge1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQgJiYganFMaXRlKHBhcmVudCk7XG4gICAgICAgIGFmdGVyID0gYWZ0ZXIgJiYganFMaXRlKGFmdGVyKTtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50IHx8IGFmdGVyLnBhcmVudCgpO1xuICAgICAgICBkb21JbnNlcnQoZWxlbWVudCwgcGFyZW50LCBhZnRlcik7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdtb3ZlJywgcHJlcGFyZUFuaW1hdGVPcHRpb25zKG9wdGlvbnMpKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjbGVhdmVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVHJpZ2dlcnMgYW4gYW5pbWF0aW9uIGFuZCB0aGVuIHJlbW92ZXMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NLlxuICAgICAgICogV2hlbiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgZHVyaW5nIHRoZSBuZXh0XG4gICAgICAgKiBkaWdlc3Qgb25jZSB0aGUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UnVubmVyfSB0aGUgYW5pbWF0aW9uIHJ1bm5lclxuICAgICAgICovXG4gICAgICBsZWF2ZTogZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnbGVhdmUnLCBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNhZGRDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVHJpZ2dlcnMgYW4gYWRkQ2xhc3MgYW5pbWF0aW9uIHN1cnJvdW5kaW5nIHRoZSBhZGRpdGlvbiBvZiB0aGUgcHJvdmlkZWQgQ1NTIGNsYXNzKGVzKS4gVXBvblxuICAgICAgICogICBleGVjdXRpb24sIHRoZSBhZGRDbGFzcyBvcGVyYXRpb24gd2lsbCBvbmx5IGJlIGhhbmRsZWQgYWZ0ZXIgdGhlIG5leHQgZGlnZXN0IGFuZCBpdCB3aWxsIG5vdCB0cmlnZ2VyIGFuXG4gICAgICAgKiAgIGFuaW1hdGlvbiBpZiBlbGVtZW50IGFscmVhZHkgY29udGFpbnMgdGhlIENTUyBjbGFzcyBvciBpZiB0aGUgY2xhc3MgaXMgcmVtb3ZlZCBhdCBhIGxhdGVyIHN0ZXAuXG4gICAgICAgKiAgIE5vdGUgdGhhdCBjbGFzcy1iYXNlZCBhbmltYXRpb25zIGFyZSB0cmVhdGVkIGRpZmZlcmVudGx5IGNvbXBhcmVkIHRvIHN0cnVjdHVyYWwgYW5pbWF0aW9uc1xuICAgICAgICogICAobGlrZSBlbnRlciwgbW92ZSBhbmQgbGVhdmUpIHNpbmNlIHRoZSBDU1MgY2xhc3NlcyBtYXkgYmUgYWRkZWQvcmVtb3ZlZCBhdCBkaWZmZXJlbnQgcG9pbnRzXG4gICAgICAgKiAgIGRlcGVuZGluZyBpZiBDU1Mgb3IgSmF2YVNjcmlwdCBhbmltYXRpb25zIGFyZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB0aGUgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSBhZGRlZCAobXVsdGlwbGUgY2xhc3NlcyBhcmUgc2VwYXJhdGVkIHZpYSBzcGFjZXMpXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1J1bm5lcn0gYW5pbWF0aW9uUnVubmVyIHRoZSBhbmltYXRpb24gcnVubmVyXG4gICAgICAgKi9cbiAgICAgIGFkZENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IHByZXBhcmVBbmltYXRlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgb3B0aW9ucy5hZGRDbGFzcyA9IG1lcmdlQ2xhc3NlcyhvcHRpb25zLmFkZGNsYXNzLCBjbGFzc05hbWUpO1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnYWRkQ2xhc3MnLCBvcHRpb25zKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjcmVtb3ZlQ2xhc3NcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRyaWdnZXJzIGEgcmVtb3ZlQ2xhc3MgYW5pbWF0aW9uIHN1cnJvdW5kaW5nIHRoZSByZW1vdmFsIG9mIHRoZSBwcm92aWRlZCBDU1MgY2xhc3MoZXMpLiBVcG9uXG4gICAgICAgKiAgIGV4ZWN1dGlvbiwgdGhlIHJlbW92ZUNsYXNzIG9wZXJhdGlvbiB3aWxsIG9ubHkgYmUgaGFuZGxlZCBhZnRlciB0aGUgbmV4dCBkaWdlc3QgYW5kIGl0IHdpbGwgbm90IHRyaWdnZXIgYW5cbiAgICAgICAqICAgYW5pbWF0aW9uIGlmIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiB0aGUgQ1NTIGNsYXNzIG9yIGlmIHRoZSBjbGFzcyBpcyBhZGRlZCBhdCBhIGxhdGVyIHN0ZXAuXG4gICAgICAgKiAgIE5vdGUgdGhhdCBjbGFzcy1iYXNlZCBhbmltYXRpb25zIGFyZSB0cmVhdGVkIGRpZmZlcmVudGx5IGNvbXBhcmVkIHRvIHN0cnVjdHVyYWwgYW5pbWF0aW9uc1xuICAgICAgICogICAobGlrZSBlbnRlciwgbW92ZSBhbmQgbGVhdmUpIHNpbmNlIHRoZSBDU1MgY2xhc3NlcyBtYXkgYmUgYWRkZWQvcmVtb3ZlZCBhdCBkaWZmZXJlbnQgcG9pbnRzXG4gICAgICAgKiAgIGRlcGVuZGluZyBpZiBDU1Mgb3IgSmF2YVNjcmlwdCBhbmltYXRpb25zIGFyZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB0aGUgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSByZW1vdmVkIChtdWx0aXBsZSBjbGFzc2VzIGFyZSBzZXBhcmF0ZWQgdmlhIHNwYWNlcylcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UnVubmVyfSB0aGUgYW5pbWF0aW9uIHJ1bm5lclxuICAgICAgICovXG4gICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIG9wdGlvbnMucmVtb3ZlQ2xhc3MgPSBtZXJnZUNsYXNzZXMob3B0aW9ucy5yZW1vdmVDbGFzcywgY2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuICQkYW5pbWF0ZVF1ZXVlLnB1c2goZWxlbWVudCwgJ3JlbW92ZUNsYXNzJywgb3B0aW9ucyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3NldENsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBQZXJmb3JtcyBib3RoIHRoZSBhZGRpdGlvbiBhbmQgcmVtb3ZhbCBvZiBhIENTUyBjbGFzc2VzIG9uIGFuIGVsZW1lbnQgYW5kIChkdXJpbmcgdGhlIHByb2Nlc3MpXG4gICAgICAgKiAgICB0cmlnZ2VycyBhbiBhbmltYXRpb24gc3Vycm91bmRpbmcgdGhlIGNsYXNzIGFkZGl0aW9uL3JlbW92YWwuIE11Y2ggbGlrZSBgJGFuaW1hdGUuYWRkQ2xhc3NgIGFuZFxuICAgICAgICogICAgYCRhbmltYXRlLnJlbW92ZUNsYXNzYCwgYHNldENsYXNzYCB3aWxsIG9ubHkgZXZhbHVhdGUgdGhlIGNsYXNzZXMgYmVpbmcgYWRkZWQvcmVtb3ZlZCBvbmNlIGEgZGlnZXN0IGhhc1xuICAgICAgICogICAgcGFzc2VkLiBOb3RlIHRoYXQgY2xhc3MtYmFzZWQgYW5pbWF0aW9ucyBhcmUgdHJlYXRlZCBkaWZmZXJlbnRseSBjb21wYXJlZCB0byBzdHJ1Y3R1cmFsIGFuaW1hdGlvbnNcbiAgICAgICAqICAgIChsaWtlIGVudGVyLCBtb3ZlIGFuZCBsZWF2ZSkgc2luY2UgdGhlIENTUyBjbGFzc2VzIG1heSBiZSBhZGRlZC9yZW1vdmVkIGF0IGRpZmZlcmVudCBwb2ludHNcbiAgICAgICAqICAgIGRlcGVuZGluZyBpZiBDU1Mgb3IgSmF2YVNjcmlwdCBhbmltYXRpb25zIGFyZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB0aGUgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWRkIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSBhZGRlZCAobXVsdGlwbGUgY2xhc3NlcyBhcmUgc2VwYXJhdGVkIHZpYSBzcGFjZXMpXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVtb3ZlIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSByZW1vdmVkIChtdWx0aXBsZSBjbGFzc2VzIGFyZSBzZXBhcmF0ZWQgdmlhIHNwYWNlcylcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UnVubmVyfSB0aGUgYW5pbWF0aW9uIHJ1bm5lclxuICAgICAgICovXG4gICAgICBzZXRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgYWRkLCByZW1vdmUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IHByZXBhcmVBbmltYXRlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgb3B0aW9ucy5hZGRDbGFzcyA9IG1lcmdlQ2xhc3NlcyhvcHRpb25zLmFkZENsYXNzLCBhZGQpO1xuICAgICAgICBvcHRpb25zLnJlbW92ZUNsYXNzID0gbWVyZ2VDbGFzc2VzKG9wdGlvbnMucmVtb3ZlQ2xhc3MsIHJlbW92ZSk7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdzZXRDbGFzcycsIG9wdGlvbnMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNhbmltYXRlXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBQZXJmb3JtcyBhbiBpbmxpbmUgYW5pbWF0aW9uIG9uIHRoZSBlbGVtZW50IHdoaWNoIGFwcGxpZXMgdGhlIHByb3ZpZGVkIHRvIGFuZCBmcm9tIENTUyBzdHlsZXMgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiBJZiBhbnkgZGV0ZWN0ZWQgQ1NTIHRyYW5zaXRpb24sIGtleWZyYW1lIG9yIEphdmFTY3JpcHQgbWF0Y2hlcyB0aGUgcHJvdmlkZWQgY2xhc3NOYW1lIHZhbHVlLCB0aGVuIHRoZSBhbmltYXRpb24gd2lsbCB0YWtlXG4gICAgICAgKiBvbiB0aGUgcHJvdmlkZWQgc3R5bGVzLiBGb3IgZXhhbXBsZSwgaWYgYSB0cmFuc2l0aW9uIGFuaW1hdGlvbiBpcyBzZXQgZm9yIHRoZSBnaXZlbiBjbGFzc05hbWUsIHRoZW4gdGhlIHByb3ZpZGVkIGBmcm9tYCBhbmRcbiAgICAgICAqIGB0b2Agc3R5bGVzIHdpbGwgYmUgYXBwbGllZCBhbG9uZ3NpZGUgdGhlIGdpdmVuIHRyYW5zaXRpb24uIElmIHRoZSBDU1Mgc3R5bGUgcHJvdmlkZWQgaW4gYGZyb21gIGRvZXMgbm90IGhhdmUgYSBjb3JyZXNwb25kaW5nXG4gICAgICAgKiBzdHlsZSBpbiBgdG9gLCB0aGUgc3R5bGUgaW4gYGZyb21gIGlzIGFwcGxpZWQgaW1tZWRpYXRlbHksIGFuZCBubyBhbmltYXRpb24gaXMgcnVuLlxuICAgICAgICogSWYgYSBKYXZhU2NyaXB0IGFuaW1hdGlvbiBpcyBkZXRlY3RlZCB0aGVuIHRoZSBwcm92aWRlZCBzdHlsZXMgd2lsbCBiZSBnaXZlbiBpbiBhcyBmdW5jdGlvbiBwYXJhbWV0ZXJzIGludG8gdGhlIGBhbmltYXRlYFxuICAgICAgICogbWV0aG9kIChvciBhcyBwYXJ0IG9mIHRoZSBgb3B0aW9uc2AgcGFyYW1ldGVyKTpcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogbmdNb2R1bGUuYW5pbWF0aW9uKCcubXktaW5saW5lLWFuaW1hdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICogICByZXR1cm4ge1xuICAgICAgICogICAgIGFuaW1hdGUgOiBmdW5jdGlvbihlbGVtZW50LCBmcm9tLCB0bywgZG9uZSwgb3B0aW9ucykge1xuICAgICAgICogICAgICAgLy9hbmltYXRpb25cbiAgICAgICAqICAgICAgIGRvbmUoKTtcbiAgICAgICAqICAgICB9XG4gICAgICAgKiAgIH1cbiAgICAgICAqIH0pO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHRoZSBDU1Mgc3R5bGVzIHdpbGwgYmUgYXBwbGllZCB0b1xuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGZyb20gdGhlIGZyb20gKHN0YXJ0aW5nKSBDU1Mgc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IGFuZCBhY3Jvc3MgdGhlIGFuaW1hdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0byB0aGUgdG8gKGRlc3RpbmF0aW9uKSBDU1Mgc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IGFuZCBhY3Jvc3MgdGhlIGFuaW1hdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gY2xhc3NOYW1lIGFuIG9wdGlvbmFsIENTUyBjbGFzcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24uIElmXG4gICAgICAgKiAgICB0aGlzIHZhbHVlIGlzIGxlZnQgYXMgZW1wdHkgdGhlbiBhIENTUyBjbGFzcyBvZiBgbmctaW5saW5lLWFuaW1hdGVgIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgIChOb3RlIHRoYXQgaWYgbm8gYW5pbWF0aW9uIGlzIGRldGVjdGVkIHRoZW4gdGhpcyB2YWx1ZSB3aWxsIG5vdCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LilcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UnVubmVyfSB0aGUgYW5pbWF0aW9uIHJ1bm5lclxuICAgICAgICovXG4gICAgICBhbmltYXRlOiBmdW5jdGlvbihlbGVtZW50LCBmcm9tLCB0bywgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIG9wdGlvbnMuZnJvbSA9IG9wdGlvbnMuZnJvbSA/IGV4dGVuZChvcHRpb25zLmZyb20sIGZyb20pIDogZnJvbTtcbiAgICAgICAgb3B0aW9ucy50byAgID0gb3B0aW9ucy50byAgID8gZXh0ZW5kKG9wdGlvbnMudG8sIHRvKSAgICAgOiB0bztcblxuICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUgfHwgJ25nLWlubGluZS1hbmltYXRlJztcbiAgICAgICAgb3B0aW9ucy50ZW1wQ2xhc3NlcyA9IG1lcmdlQ2xhc3NlcyhvcHRpb25zLnRlbXBDbGFzc2VzLCBjbGFzc05hbWUpO1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnYW5pbWF0ZScsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG4gIH1dO1xufV07XG5cbnZhciAkJEFuaW1hdGVBc3luY1J1bkZhY3RvcnlQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckJHJBRicsIGZ1bmN0aW9uKCQkckFGKSB7XG4gICAgdmFyIHdhaXRRdWV1ZSA9IFtdO1xuXG4gICAgZnVuY3Rpb24gd2FpdEZvclRpY2soZm4pIHtcbiAgICAgIHdhaXRRdWV1ZS5wdXNoKGZuKTtcbiAgICAgIGlmICh3YWl0UXVldWUubGVuZ3RoID4gMSkgcmV0dXJuO1xuICAgICAgJCRyQUYoZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2FpdFF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgd2FpdFF1ZXVlW2ldKCk7XG4gICAgICAgIH1cbiAgICAgICAgd2FpdFF1ZXVlID0gW107XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFzc2VkID0gZmFsc2U7XG4gICAgICB3YWl0Rm9yVGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgcGFzc2VkID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChwYXNzZWQpIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdhaXRGb3JUaWNrKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICB9XTtcbn07XG5cbnZhciAkJEFuaW1hdGVSdW5uZXJGYWN0b3J5UHJvdmlkZXIgPSAvKiogQHRoaXMgKi8gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IFsnJHEnLCAnJHNuaWZmZXInLCAnJCRhbmltYXRlQXN5bmNSdW4nLCAnJCRpc0RvY3VtZW50SGlkZGVuJywgJyR0aW1lb3V0JyxcbiAgICAgICBmdW5jdGlvbigkcSwgICAkc25pZmZlciwgICAkJGFuaW1hdGVBc3luY1J1biwgICAkJGlzRG9jdW1lbnRIaWRkZW4sICAgJHRpbWVvdXQpIHtcblxuICAgIHZhciBJTklUSUFMX1NUQVRFID0gMDtcbiAgICB2YXIgRE9ORV9QRU5ESU5HX1NUQVRFID0gMTtcbiAgICB2YXIgRE9ORV9DT01QTEVURV9TVEFURSA9IDI7XG5cbiAgICBBbmltYXRlUnVubmVyLmNoYWluID0gZnVuY3Rpb24oY2hhaW4sIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuXG4gICAgICBuZXh0KCk7XG4gICAgICBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IGNoYWluLmxlbmd0aCkge1xuICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoYWluW2luZGV4XShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBBbmltYXRlUnVubmVyLmFsbCA9IGZ1bmN0aW9uKHJ1bm5lcnMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgdmFyIHN0YXR1cyA9IHRydWU7XG4gICAgICBmb3JFYWNoKHJ1bm5lcnMsIGZ1bmN0aW9uKHJ1bm5lcikge1xuICAgICAgICBydW5uZXIuZG9uZShvblByb2dyZXNzKTtcbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBvblByb2dyZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgIHN0YXR1cyA9IHN0YXR1cyAmJiByZXNwb25zZTtcbiAgICAgICAgaWYgKCsrY291bnQgPT09IHJ1bm5lcnMubGVuZ3RoKSB7XG4gICAgICAgICAgY2FsbGJhY2soc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBBbmltYXRlUnVubmVyKGhvc3QpIHtcbiAgICAgIHRoaXMuc2V0SG9zdChob3N0KTtcblxuICAgICAgdmFyIHJhZlRpY2sgPSAkJGFuaW1hdGVBc3luY1J1bigpO1xuICAgICAgdmFyIHRpbWVvdXRUaWNrID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgJHRpbWVvdXQoZm4sIDAsIGZhbHNlKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX2RvbmVDYWxsYmFja3MgPSBbXTtcbiAgICAgIHRoaXMuX3RpY2sgPSBmdW5jdGlvbihmbikge1xuICAgICAgICBpZiAoJCRpc0RvY3VtZW50SGlkZGVuKCkpIHtcbiAgICAgICAgICB0aW1lb3V0VGljayhmbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmFmVGljayhmbik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aGlzLl9zdGF0ZSA9IDA7XG4gICAgfVxuXG4gICAgQW5pbWF0ZVJ1bm5lci5wcm90b3R5cGUgPSB7XG4gICAgICBzZXRIb3N0OiBmdW5jdGlvbihob3N0KSB7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3QgfHwge307XG4gICAgICB9LFxuXG4gICAgICBkb25lOiBmdW5jdGlvbihmbikge1xuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPT09IERPTkVfQ09NUExFVEVfU1RBVEUpIHtcbiAgICAgICAgICBmbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2RvbmVDYWxsYmFja3MucHVzaChmbik7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHByb2dyZXNzOiBub29wLFxuXG4gICAgICBnZXRQcm9taXNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb21pc2UpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgdGhpcy5wcm9taXNlID0gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBzZWxmLmRvbmUoZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgICAgfSxcblxuICAgICAgdGhlbjogZnVuY3Rpb24ocmVzb2x2ZUhhbmRsZXIsIHJlamVjdEhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpLnRoZW4ocmVzb2x2ZUhhbmRsZXIsIHJlamVjdEhhbmRsZXIpO1xuICAgICAgfSxcblxuICAgICAgJ2NhdGNoJzogZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9taXNlKClbJ2NhdGNoJ10oaGFuZGxlcik7XG4gICAgICB9LFxuXG4gICAgICAnZmluYWxseSc6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpWydmaW5hbGx5J10oaGFuZGxlcik7XG4gICAgICB9LFxuXG4gICAgICBwYXVzZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3QucGF1c2UpIHtcbiAgICAgICAgICB0aGlzLmhvc3QucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgcmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9zdC5yZXN1bWUpIHtcbiAgICAgICAgICB0aGlzLmhvc3QucmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3QuZW5kKSB7XG4gICAgICAgICAgdGhpcy5ob3N0LmVuZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodHJ1ZSk7XG4gICAgICB9LFxuXG4gICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5ob3N0LmNhbmNlbCkge1xuICAgICAgICAgIHRoaXMuaG9zdC5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZXNvbHZlKGZhbHNlKTtcbiAgICAgIH0sXG5cbiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gSU5JVElBTF9TVEFURSkge1xuICAgICAgICAgIHNlbGYuX3N0YXRlID0gRE9ORV9QRU5ESU5HX1NUQVRFO1xuICAgICAgICAgIHNlbGYuX3RpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgX3Jlc29sdmU6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gRE9ORV9DT01QTEVURV9TVEFURSkge1xuICAgICAgICAgIGZvckVhY2godGhpcy5fZG9uZUNhbGxiYWNrcywgZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIGZuKHJlc3BvbnNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLl9kb25lQ2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgdGhpcy5fc3RhdGUgPSBET05FX0NPTVBMRVRFX1NUQVRFO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBBbmltYXRlUnVubmVyO1xuICB9XTtcbn07XG5cbi8qIGV4cG9ydGVkICRDb3JlQW5pbWF0ZUNzc1Byb3ZpZGVyICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRhbmltYXRlQ3NzXG4gKiBAa2luZCBvYmplY3RcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIGlzIHRoZSBjb3JlIHZlcnNpb24gb2YgYCRhbmltYXRlQ3NzYC4gQnkgZGVmYXVsdCwgb25seSB3aGVuIHRoZSBgbmdBbmltYXRlYCBpcyBpbmNsdWRlZCxcbiAqIHRoZW4gdGhlIGAkYW5pbWF0ZUNzc2Agc2VydmljZSB3aWxsIGFjdHVhbGx5IHBlcmZvcm0gYW5pbWF0aW9ucy5cbiAqXG4gKiBDbGljayBoZXJlIHtAbGluayBuZ0FuaW1hdGUuJGFuaW1hdGVDc3MgdG8gcmVhZCB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgJGFuaW1hdGVDc3N9LlxuICovXG52YXIgJENvcmVBbmltYXRlQ3NzUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckJHJBRicsICckcScsICckJEFuaW1hdGVSdW5uZXInLCBmdW5jdGlvbigkJHJBRiwgJHEsICQkQW5pbWF0ZVJ1bm5lcikge1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGVsZW1lbnQsIGluaXRpYWxPcHRpb25zKSB7XG4gICAgICAvLyBhbGwgb2YgdGhlIGFuaW1hdGlvbiBmdW5jdGlvbnMgc2hvdWxkIGNyZWF0ZVxuICAgICAgLy8gYSBjb3B5IG9mIHRoZSBvcHRpb25zIGRhdGEsIGhvd2V2ZXIsIGlmIGFcbiAgICAgIC8vIHBhcmVudCBzZXJ2aWNlIGhhcyBhbHJlYWR5IGNyZWF0ZWQgYSBjb3B5IHRoZW5cbiAgICAgIC8vIHdlIHNob3VsZCBzdGljayB0byB1c2luZyB0aGF0XG4gICAgICB2YXIgb3B0aW9ucyA9IGluaXRpYWxPcHRpb25zIHx8IHt9O1xuICAgICAgaWYgKCFvcHRpb25zLiQkcHJlcGFyZWQpIHtcbiAgICAgICAgb3B0aW9ucyA9IGNvcHkob3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIHRoZXJlIGlzIG5vIHBvaW50IGluIGFwcGx5aW5nIHRoZSBzdHlsZXMgc2luY2VcbiAgICAgIC8vIHRoZXJlIGlzIG5vIGFuaW1hdGlvbiB0aGF0IGdvZXMgb24gYXQgYWxsIGluXG4gICAgICAvLyB0aGlzIHZlcnNpb24gb2YgJGFuaW1hdGVDc3MuXG4gICAgICBpZiAob3B0aW9ucy5jbGVhbnVwU3R5bGVzKSB7XG4gICAgICAgIG9wdGlvbnMuZnJvbSA9IG9wdGlvbnMudG8gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5mcm9tKSB7XG4gICAgICAgIGVsZW1lbnQuY3NzKG9wdGlvbnMuZnJvbSk7XG4gICAgICAgIG9wdGlvbnMuZnJvbSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBjbG9zZWQsIHJ1bm5lciA9IG5ldyAkJEFuaW1hdGVSdW5uZXIoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiBydW4sXG4gICAgICAgIGVuZDogcnVuXG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBydW4oKSB7XG4gICAgICAgICQkckFGKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFwcGx5QW5pbWF0aW9uQ29udGVudHMoKTtcbiAgICAgICAgICBpZiAoIWNsb3NlZCkge1xuICAgICAgICAgICAgcnVubmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNsb3NlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcnVubmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhcHBseUFuaW1hdGlvbkNvbnRlbnRzKCkge1xuICAgICAgICBpZiAob3B0aW9ucy5hZGRDbGFzcykge1xuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy5hZGRDbGFzcyk7XG4gICAgICAgICAgb3B0aW9ucy5hZGRDbGFzcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucmVtb3ZlQ2xhc3MpIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKG9wdGlvbnMucmVtb3ZlQ2xhc3MpO1xuICAgICAgICAgIG9wdGlvbnMucmVtb3ZlQ2xhc3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRvKSB7XG4gICAgICAgICAgZWxlbWVudC5jc3Mob3B0aW9ucy50byk7XG4gICAgICAgICAgb3B0aW9ucy50byA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XTtcbn07XG5cbi8qIGdsb2JhbCBzdHJpcEhhc2g6IHRydWUgKi9cblxuLyoqXG4gKiAhIFRoaXMgaXMgYSBwcml2YXRlIHVuZG9jdW1lbnRlZCBzZXJ2aWNlICFcbiAqXG4gKiBAbmFtZSAkYnJvd3NlclxuICogQHJlcXVpcmVzICRsb2dcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBvYmplY3QgaGFzIHR3byBnb2FsczpcbiAqXG4gKiAtIGhpZGUgYWxsIHRoZSBnbG9iYWwgc3RhdGUgaW4gdGhlIGJyb3dzZXIgY2F1c2VkIGJ5IHRoZSB3aW5kb3cgb2JqZWN0XG4gKiAtIGFic3RyYWN0IGF3YXkgYWxsIHRoZSBicm93c2VyIHNwZWNpZmljIGZlYXR1cmVzIGFuZCBpbmNvbnNpc3RlbmNpZXNcbiAqXG4gKiBGb3IgdGVzdHMgd2UgcHJvdmlkZSB7QGxpbmsgbmdNb2NrLiRicm93c2VyIG1vY2sgaW1wbGVtZW50YXRpb259IG9mIHRoZSBgJGJyb3dzZXJgXG4gKiBzZXJ2aWNlLCB3aGljaCBjYW4gYmUgdXNlZCBmb3IgY29udmVuaWVudCB0ZXN0aW5nIG9mIHRoZSBhcHBsaWNhdGlvbiB3aXRob3V0IHRoZSBpbnRlcmFjdGlvbiB3aXRoXG4gKiB0aGUgcmVhbCBicm93c2VyIGFwaXMuXG4gKi9cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IHdpbmRvdyBUaGUgZ2xvYmFsIHdpbmRvdyBvYmplY3QuXG4gKiBAcGFyYW0ge29iamVjdH0gZG9jdW1lbnQgalF1ZXJ5IHdyYXBwZWQgZG9jdW1lbnQuXG4gKiBAcGFyYW0ge29iamVjdH0gJGxvZyB3aW5kb3cuY29uc29sZSBvciBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBpbnRlcmZhY2UuXG4gKiBAcGFyYW0ge29iamVjdH0gJHNuaWZmZXIgJHNuaWZmZXIgc2VydmljZVxuICovXG5mdW5jdGlvbiBCcm93c2VyKHdpbmRvdywgZG9jdW1lbnQsICRsb2csICRzbmlmZmVyKSB7XG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5LFxuICAgICAgc2V0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0LFxuICAgICAgY2xlYXJUaW1lb3V0ID0gd2luZG93LmNsZWFyVGltZW91dCxcbiAgICAgIHBlbmRpbmdEZWZlcklkcyA9IHt9O1xuXG4gIHNlbGYuaXNNb2NrID0gZmFsc2U7XG5cbiAgdmFyIG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID0gMDtcbiAgdmFyIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcyA9IFtdO1xuXG4gIC8vIFRPRE8odm9qdGEpOiByZW1vdmUgdGhpcyB0ZW1wb3JhcnkgYXBpXG4gIHNlbGYuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCA9IGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0O1xuICBzZWxmLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPSBmdW5jdGlvbigpIHsgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKzsgfTtcblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGBmbmAgZnVuY3Rpb24oc3VwcG9ydHMgY3VycnlpbmcpIGFuZCBkZWNyZW1lbnRzIHRoZSBgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzYFxuICAgKiBjb3VudGVyLiBJZiB0aGUgY291bnRlciByZWFjaGVzIDAsIGFsbCB0aGUgYG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrc2AgYXJlIGV4ZWN1dGVkLlxuICAgKi9cbiAgZnVuY3Rpb24gY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoZm4pIHtcbiAgICB0cnkge1xuICAgICAgZm4uYXBwbHkobnVsbCwgc2xpY2VBcmdzKGFyZ3VtZW50cywgMSkpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudC0tO1xuICAgICAgaWYgKG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID09PSAwKSB7XG4gICAgICAgIHdoaWxlIChvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICRsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SGFzaCh1cmwpIHtcbiAgICB2YXIgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICAgIHJldHVybiBpbmRleCA9PT0gLTEgPyAnJyA6IHVybC5zdWJzdHIoaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIFRPRE8odm9qdGEpOiBwcmVmaXggdGhpcyBtZXRob2Qgd2l0aCAkJCA/XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2sgRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIG5vIG91dHN0YW5kaW5nIHJlcXVlc3RcbiAgICovXG4gIHNlbGYubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYgKG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID09PSAwKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIFVSTCBBUElcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICB2YXIgY2FjaGVkU3RhdGUsIGxhc3RIaXN0b3J5U3RhdGUsXG4gICAgICBsYXN0QnJvd3NlclVybCA9IGxvY2F0aW9uLmhyZWYsXG4gICAgICBiYXNlRWxlbWVudCA9IGRvY3VtZW50LmZpbmQoJ2Jhc2UnKSxcbiAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IG51bGwsXG4gICAgICBnZXRDdXJyZW50U3RhdGUgPSAhJHNuaWZmZXIuaGlzdG9yeSA/IG5vb3AgOiBmdW5jdGlvbiBnZXRDdXJyZW50U3RhdGUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGhpc3Rvcnkuc3RhdGU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBNU0lFIGNhbiByZXBvcnRlZGx5IHRocm93IHdoZW4gdGhlcmUgaXMgbm8gc3RhdGUgKFVOQ09ORklSTUVEKS5cbiAgICAgICAgfVxuICAgICAgfTtcblxuICBjYWNoZVN0YXRlKCk7XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI3VybFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogR0VUVEVSOlxuICAgKiBXaXRob3V0IGFueSBhcmd1bWVudCwgdGhpcyBtZXRob2QganVzdCByZXR1cm5zIGN1cnJlbnQgdmFsdWUgb2YgbG9jYXRpb24uaHJlZi5cbiAgICpcbiAgICogU0VUVEVSOlxuICAgKiBXaXRoIGF0IGxlYXN0IG9uZSBhcmd1bWVudCwgdGhpcyBtZXRob2Qgc2V0cyB1cmwgdG8gbmV3IHZhbHVlLlxuICAgKiBJZiBodG1sNSBoaXN0b3J5IGFwaSBzdXBwb3J0ZWQsIHB1c2hTdGF0ZS9yZXBsYWNlU3RhdGUgaXMgdXNlZCwgb3RoZXJ3aXNlXG4gICAqIGxvY2F0aW9uLmhyZWYvbG9jYXRpb24ucmVwbGFjZSBpcyB1c2VkLlxuICAgKiBSZXR1cm5zIGl0cyBvd24gaW5zdGFuY2UgdG8gYWxsb3cgY2hhaW5pbmdcbiAgICpcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5IHRoZSAkbG9jYXRpb24gc2VydmljZS4gUGxlYXNlIHVzZSB0aGVcbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiAkbG9jYXRpb24gc2VydmljZX0gdG8gY2hhbmdlIHVybC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBOZXcgdXJsICh3aGVuIHVzZWQgYXMgc2V0dGVyKVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSByZXBsYWNlIFNob3VsZCBuZXcgdXJsIHJlcGxhY2UgY3VycmVudCBoaXN0b3J5IHJlY29yZD9cbiAgICogQHBhcmFtIHtvYmplY3Q9fSBzdGF0ZSBvYmplY3QgdG8gdXNlIHdpdGggcHVzaFN0YXRlL3JlcGxhY2VTdGF0ZVxuICAgKi9cbiAgc2VsZi51cmwgPSBmdW5jdGlvbih1cmwsIHJlcGxhY2UsIHN0YXRlKSB7XG4gICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzIGBoaXN0b3J5LnN0YXRlYCBpcyBgbnVsbGAgYnkgZGVmYXVsdDsgdHJlYXRpbmcgaXQgc2VwYXJhdGVseVxuICAgIC8vIGZyb20gYHVuZGVmaW5lZGAgd291bGQgY2F1c2UgYCRicm93c2VyLnVybCgnL2ZvbycpYCB0byBjaGFuZ2UgYGhpc3Rvcnkuc3RhdGVgXG4gICAgLy8gdG8gdW5kZWZpbmVkIHZpYSBgcHVzaFN0YXRlYC4gSW5zdGVhZCwgbGV0J3MgY2hhbmdlIGB1bmRlZmluZWRgIHRvIGBudWxsYCBoZXJlLlxuICAgIGlmIChpc1VuZGVmaW5lZChzdGF0ZSkpIHtcbiAgICAgIHN0YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBBbmRyb2lkIEJyb3dzZXIgQkZDYWNoZSBjYXVzZXMgbG9jYXRpb24sIGhpc3RvcnkgcmVmZXJlbmNlIHRvIGJlY29tZSBzdGFsZS5cbiAgICBpZiAobG9jYXRpb24gIT09IHdpbmRvdy5sb2NhdGlvbikgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgaWYgKGhpc3RvcnkgIT09IHdpbmRvdy5oaXN0b3J5KSBoaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG5cbiAgICAvLyBzZXR0ZXJcbiAgICBpZiAodXJsKSB7XG4gICAgICB2YXIgc2FtZVN0YXRlID0gbGFzdEhpc3RvcnlTdGF0ZSA9PT0gc3RhdGU7XG5cbiAgICAgIC8vIERvbid0IGNoYW5nZSBhbnl0aGluZyBpZiBwcmV2aW91cyBhbmQgY3VycmVudCBVUkxzIGFuZCBzdGF0ZXMgbWF0Y2guIFRoaXMgYWxzbyBwcmV2ZW50c1xuICAgICAgLy8gSUU8MTAgZnJvbSBnZXR0aW5nIGludG8gcmVkaXJlY3QgbG9vcCB3aGVuIGluIExvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsIG1vZGUuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9jb21taXQvZmZiMjcwMVxuICAgICAgaWYgKGxhc3RCcm93c2VyVXJsID09PSB1cmwgJiYgKCEkc25pZmZlci5oaXN0b3J5IHx8IHNhbWVTdGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG4gICAgICB2YXIgc2FtZUJhc2UgPSBsYXN0QnJvd3NlclVybCAmJiBzdHJpcEhhc2gobGFzdEJyb3dzZXJVcmwpID09PSBzdHJpcEhhc2godXJsKTtcbiAgICAgIGxhc3RCcm93c2VyVXJsID0gdXJsO1xuICAgICAgbGFzdEhpc3RvcnlTdGF0ZSA9IHN0YXRlO1xuICAgICAgLy8gRG9uJ3QgdXNlIGhpc3RvcnkgQVBJIGlmIG9ubHkgdGhlIGhhc2ggY2hhbmdlZFxuICAgICAgLy8gZHVlIHRvIGEgYnVnIGluIElFMTAvSUUxMSB3aGljaCBsZWFkc1xuICAgICAgLy8gdG8gbm90IGZpcmluZyBhIGBoYXNoY2hhbmdlYCBub3IgYHBvcHN0YXRlYCBldmVudFxuICAgICAgLy8gaW4gc29tZSBjYXNlcyAoc2VlICM5MTQzKS5cbiAgICAgIGlmICgkc25pZmZlci5oaXN0b3J5ICYmICghc2FtZUJhc2UgfHwgIXNhbWVTdGF0ZSkpIHtcbiAgICAgICAgaGlzdG9yeVtyZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oc3RhdGUsICcnLCB1cmwpO1xuICAgICAgICBjYWNoZVN0YXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXNhbWVCYXNlKSB7XG4gICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gdXJsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZSh1cmwpO1xuICAgICAgICB9IGVsc2UgaWYgKCFzYW1lQmFzZSkge1xuICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9jYXRpb24uaGFzaCA9IGdldEhhc2godXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9jYXRpb24uaHJlZiAhPT0gdXJsKSB7XG4gICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gdXJsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocGVuZGluZ0xvY2F0aW9uKSB7XG4gICAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IHVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIC8vIGdldHRlclxuICAgIH0gZWxzZSB7XG4gICAgICAvLyAtIHBlbmRpbmdMb2NhdGlvbiBpcyBuZWVkZWQgYXMgYnJvd3NlcnMgZG9uJ3QgYWxsb3cgdG8gcmVhZCBvdXRcbiAgICAgIC8vICAgdGhlIG5ldyBsb2NhdGlvbi5ocmVmIGlmIGEgcmVsb2FkIGhhcHBlbmVkIG9yIGlmIHRoZXJlIGlzIGEgYnVnIGxpa2UgaW4gaU9TIDkgKHNlZVxuICAgICAgLy8gICBodHRwczovL29wZW5yYWRhci5hcHBzcG90LmNvbS8yMjE4NjEwOSkuXG4gICAgICByZXR1cm4gcGVuZGluZ0xvY2F0aW9uIHx8IGxvY2F0aW9uLmhyZWY7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNzdGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgYSBnZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBoaXN0b3J5LnN0YXRlIG9yIG51bGwgaWYgaGlzdG9yeS5zdGF0ZSBpcyB1bmRlZmluZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IHN0YXRlXG4gICAqL1xuICBzZWxmLnN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGNhY2hlZFN0YXRlO1xuICB9O1xuXG4gIHZhciB1cmxDaGFuZ2VMaXN0ZW5lcnMgPSBbXSxcbiAgICAgIHVybENoYW5nZUluaXQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSgpIHtcbiAgICBwZW5kaW5nTG9jYXRpb24gPSBudWxsO1xuICAgIGZpcmVTdGF0ZU9yVXJsQ2hhbmdlKCk7XG4gIH1cblxuICAvLyBUaGlzIHZhcmlhYmxlIHNob3VsZCBiZSB1c2VkICpvbmx5KiBpbnNpZGUgdGhlIGNhY2hlU3RhdGUgZnVuY3Rpb24uXG4gIHZhciBsYXN0Q2FjaGVkU3RhdGUgPSBudWxsO1xuICBmdW5jdGlvbiBjYWNoZVN0YXRlKCkge1xuICAgIC8vIFRoaXMgc2hvdWxkIGJlIHRoZSBvbmx5IHBsYWNlIGluICRicm93c2VyIHdoZXJlIGBoaXN0b3J5LnN0YXRlYCBpcyByZWFkLlxuICAgIGNhY2hlZFN0YXRlID0gZ2V0Q3VycmVudFN0YXRlKCk7XG4gICAgY2FjaGVkU3RhdGUgPSBpc1VuZGVmaW5lZChjYWNoZWRTdGF0ZSkgPyBudWxsIDogY2FjaGVkU3RhdGU7XG5cbiAgICAvLyBQcmV2ZW50IGNhbGxiYWNrcyBmbyBmaXJlIHR3aWNlIGlmIGJvdGggaGFzaGNoYW5nZSAmIHBvcHN0YXRlIHdlcmUgZmlyZWQuXG4gICAgaWYgKGVxdWFscyhjYWNoZWRTdGF0ZSwgbGFzdENhY2hlZFN0YXRlKSkge1xuICAgICAgY2FjaGVkU3RhdGUgPSBsYXN0Q2FjaGVkU3RhdGU7XG4gICAgfVxuXG4gICAgbGFzdENhY2hlZFN0YXRlID0gY2FjaGVkU3RhdGU7XG4gICAgbGFzdEhpc3RvcnlTdGF0ZSA9IGNhY2hlZFN0YXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlyZVN0YXRlT3JVcmxDaGFuZ2UoKSB7XG4gICAgdmFyIHByZXZMYXN0SGlzdG9yeVN0YXRlID0gbGFzdEhpc3RvcnlTdGF0ZTtcbiAgICBjYWNoZVN0YXRlKCk7XG5cbiAgICBpZiAobGFzdEJyb3dzZXJVcmwgPT09IHNlbGYudXJsKCkgJiYgcHJldkxhc3RIaXN0b3J5U3RhdGUgPT09IGNhY2hlZFN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGFzdEJyb3dzZXJVcmwgPSBzZWxmLnVybCgpO1xuICAgIGxhc3RIaXN0b3J5U3RhdGUgPSBjYWNoZWRTdGF0ZTtcbiAgICBmb3JFYWNoKHVybENoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgIGxpc3RlbmVyKHNlbGYudXJsKCksIGNhY2hlZFN0YXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNvblVybENoYW5nZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXIgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCwgd2hlbiB1cmwgY2hhbmdlcy5cbiAgICpcbiAgICogSXQncyBvbmx5IGNhbGxlZCB3aGVuIHRoZSB1cmwgaXMgY2hhbmdlZCBmcm9tIG91dHNpZGUgb2YgQW5ndWxhckpTOlxuICAgKiAtIHVzZXIgdHlwZXMgZGlmZmVyZW50IHVybCBpbnRvIGFkZHJlc3MgYmFyXG4gICAqIC0gdXNlciBjbGlja3Mgb24gaGlzdG9yeSAoZm9yd2FyZC9iYWNrKSBidXR0b25cbiAgICogLSB1c2VyIGNsaWNrcyBvbiBhIGxpbmtcbiAgICpcbiAgICogSXQncyBub3QgY2FsbGVkIHdoZW4gdXJsIGlzIGNoYW5nZWQgYnkgJGJyb3dzZXIudXJsKCkgbWV0aG9kXG4gICAqXG4gICAqIFRoZSBsaXN0ZW5lciBnZXRzIGNhbGxlZCB3aXRoIG5ldyB1cmwgYXMgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBOT1RFOiB0aGlzIGFwaSBpcyBpbnRlbmRlZCBmb3IgdXNlIG9ubHkgYnkgdGhlICRsb2NhdGlvbiBzZXJ2aWNlLiBQbGVhc2UgdXNlIHRoZVxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbiBzZXJ2aWNlfSB0byBtb25pdG9yIHVybCBjaGFuZ2VzIGluIEFuZ3VsYXJKUyBhcHBzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHVybCBjaGFuZ2VzLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihzdHJpbmcpfSBSZXR1cm5zIHRoZSByZWdpc3RlcmVkIGxpc3RlbmVyIGZuIC0gaGFuZHkgaWYgdGhlIGZuIGlzIGFub255bW91cy5cbiAgICovXG4gIHNlbGYub25VcmxDaGFuZ2UgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIC8vIFRPRE8odm9qdGEpOiByZWZhY3RvciB0byB1c2Ugbm9kZSdzIHN5bnRheCBmb3IgZXZlbnRzXG4gICAgaWYgKCF1cmxDaGFuZ2VJbml0KSB7XG4gICAgICAvLyBXZSBsaXN0ZW4gb24gYm90aCAoaGFzaGNoYW5nZS9wb3BzdGF0ZSkgd2hlbiBhdmFpbGFibGUsIGFzIHNvbWUgYnJvd3NlcnMgZG9uJ3RcbiAgICAgIC8vIGZpcmUgcG9wc3RhdGUgd2hlbiB1c2VyIGNoYW5nZXMgdGhlIGFkZHJlc3MgYmFyIGFuZCBkb24ndCBmaXJlIGhhc2hjaGFuZ2Ugd2hlbiB1cmxcbiAgICAgIC8vIGNoYW5nZWQgYnkgcHVzaC9yZXBsYWNlU3RhdGVcblxuICAgICAgLy8gaHRtbDUgaGlzdG9yeSBhcGkgLSBwb3BzdGF0ZSBldmVudFxuICAgICAgaWYgKCRzbmlmZmVyLmhpc3RvcnkpIGpxTGl0ZSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGNhY2hlU3RhdGVBbmRGaXJlVXJsQ2hhbmdlKTtcbiAgICAgIC8vIGhhc2hjaGFuZ2UgZXZlbnRcbiAgICAgIGpxTGl0ZSh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UpO1xuXG4gICAgICB1cmxDaGFuZ2VJbml0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB1cmxDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIGNhbGxiYWNrO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBSZW1vdmUgcG9wc3RhdGUgYW5kIGhhc2hjaGFuZ2UgaGFuZGxlciBmcm9tIHdpbmRvdy5cbiAgICpcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5ICRyb290U2NvcGUuXG4gICAqL1xuICBzZWxmLiQkYXBwbGljYXRpb25EZXN0cm95ZWQgPSBmdW5jdGlvbigpIHtcbiAgICBqcUxpdGUod2luZG93KS5vZmYoJ2hhc2hjaGFuZ2UgcG9wc3RhdGUnLCBjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSB1cmwgaGFzIGNoYW5nZWQgb3V0c2lkZSBvZiBBbmd1bGFySlMuXG4gICAqIE5lZWRzIHRvIGJlIGV4cG9ydGVkIHRvIGJlIGFibGUgdG8gY2hlY2sgZm9yIGNoYW5nZXMgdGhhdCBoYXZlIGJlZW4gZG9uZSBpbiBzeW5jLFxuICAgKiBhcyBoYXNoY2hhbmdlL3BvcHN0YXRlIGV2ZW50cyBmaXJlIGluIGFzeW5jLlxuICAgKi9cbiAgc2VsZi4kJGNoZWNrVXJsQ2hhbmdlID0gZmlyZVN0YXRlT3JVcmxDaGFuZ2U7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gTWlzYyBBUElcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjYmFzZUhyZWZcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHVybnMgY3VycmVudCA8YmFzZSBocmVmPlxuICAgKiAoYWx3YXlzIHJlbGF0aXZlIC0gd2l0aG91dCBkb21haW4pXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjdXJyZW50IGJhc2UgaHJlZlxuICAgKi9cbiAgc2VsZi5iYXNlSHJlZiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBocmVmID0gYmFzZUVsZW1lbnQuYXR0cignaHJlZicpO1xuICAgIHJldHVybiBocmVmID8gaHJlZi5yZXBsYWNlKC9eKGh0dHBzPzopP1xcL1xcL1teL10qLywgJycpIDogJyc7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiwgd2hvJ3MgZXhlY3V0aW9uIHNob3VsZCBiZSBkZWZlcnJlZC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBbZGVsYXk9MF0gb2YgbWlsbGlzZWNvbmRzIHRvIGRlZmVyIHRoZSBmdW5jdGlvbiBleGVjdXRpb24uXG4gICAqIEByZXR1cm5zIHsqfSBEZWZlcklkIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSB0YXNrIHZpYSBgJGJyb3dzZXIuZGVmZXIuY2FuY2VsKClgLlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRXhlY3V0ZXMgYSBmbiBhc3luY2hyb25vdXNseSB2aWEgYHNldFRpbWVvdXQoZm4sIGRlbGF5KWAuXG4gICAqXG4gICAqIFVubGlrZSB3aGVuIGNhbGxpbmcgYHNldFRpbWVvdXRgIGRpcmVjdGx5LCBpbiB0ZXN0IHRoaXMgZnVuY3Rpb24gaXMgbW9ja2VkIGFuZCBpbnN0ZWFkIG9mIHVzaW5nXG4gICAqIGBzZXRUaW1lb3V0YCBpbiB0ZXN0cywgdGhlIGZucyBhcmUgcXVldWVkIGluIGFuIGFycmF5LCB3aGljaCBjYW4gYmUgcHJvZ3JhbW1hdGljYWxseSBmbHVzaGVkXG4gICAqIHZpYSBgJGJyb3dzZXIuZGVmZXIuZmx1c2goKWAuXG4gICAqXG4gICAqL1xuICBzZWxmLmRlZmVyID0gZnVuY3Rpb24oZm4sIGRlbGF5KSB7XG4gICAgdmFyIHRpbWVvdXRJZDtcbiAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCsrO1xuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBkZWxldGUgcGVuZGluZ0RlZmVySWRzW3RpbWVvdXRJZF07XG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbik7XG4gICAgfSwgZGVsYXkgfHwgMCk7XG4gICAgcGVuZGluZ0RlZmVySWRzW3RpbWVvdXRJZF0gPSB0cnVlO1xuICAgIHJldHVybiB0aW1lb3V0SWQ7XG4gIH07XG5cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjZGVmZXIuY2FuY2VsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYW5jZWxzIGEgZGVmZXJyZWQgdGFzayBpZGVudGlmaWVkIHdpdGggYGRlZmVySWRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRlZmVySWQgVG9rZW4gcmV0dXJuZWQgYnkgdGhlIGAkYnJvd3Nlci5kZWZlcmAgZnVuY3Rpb24uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdGFzayBoYXNuJ3QgZXhlY3V0ZWQgeWV0IGFuZCB3YXMgc3VjY2Vzc2Z1bGx5XG4gICAqICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZC5cbiAgICovXG4gIHNlbGYuZGVmZXIuY2FuY2VsID0gZnVuY3Rpb24oZGVmZXJJZCkge1xuICAgIGlmIChwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF0pIHtcbiAgICAgIGRlbGV0ZSBwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF07XG4gICAgICBjbGVhclRpbWVvdXQoZGVmZXJJZCk7XG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkQnJvd3NlclByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGxvZycsICckc25pZmZlcicsICckZG9jdW1lbnQnLFxuICAgICAgZnVuY3Rpb24oJHdpbmRvdywgJGxvZywgJHNuaWZmZXIsICRkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IEJyb3dzZXIoJHdpbmRvdywgJGRvY3VtZW50LCAkbG9nLCAkc25pZmZlcik7XG4gICAgICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGNhY2hlRmFjdG9yeVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZhY3RvcnkgdGhhdCBjb25zdHJ1Y3RzIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3RzIGFuZCBnaXZlcyBhY2Nlc3MgdG9cbiAqIHRoZW0uXG4gKlxuICogYGBganNcbiAqXG4gKiAgdmFyIGNhY2hlID0gJGNhY2hlRmFjdG9yeSgnY2FjaGVJZCcpO1xuICogIGV4cGVjdCgkY2FjaGVGYWN0b3J5LmdldCgnY2FjaGVJZCcpKS50b0JlKGNhY2hlKTtcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ25vU3VjaENhY2hlSWQnKSkubm90LnRvQmVEZWZpbmVkKCk7XG4gKlxuICogIGNhY2hlLnB1dChcImtleVwiLCBcInZhbHVlXCIpO1xuICogIGNhY2hlLnB1dChcImFub3RoZXIga2V5XCIsIFwiYW5vdGhlciB2YWx1ZVwiKTtcbiAqXG4gKiAgLy8gV2UndmUgc3BlY2lmaWVkIG5vIG9wdGlvbnMgb24gY3JlYXRpb25cbiAqICBleHBlY3QoY2FjaGUuaW5mbygpKS50b0VxdWFsKHtpZDogJ2NhY2hlSWQnLCBzaXplOiAyfSk7XG4gKlxuICogYGBgXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUlkIE5hbWUgb3IgaWQgb2YgdGhlIG5ld2x5IGNyZWF0ZWQgY2FjaGUuXG4gKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgT3B0aW9ucyBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGNhY2hlIGJlaGF2aW9yLiBQcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBge251bWJlcj19YCBgY2FwYWNpdHlgIOKAlCB0dXJucyB0aGUgY2FjaGUgaW50byBMUlUgY2FjaGUuXG4gKlxuICogQHJldHVybnMge29iamVjdH0gTmV3bHkgY3JlYXRlZCBjYWNoZSBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHNldCBvZiBtZXRob2RzOlxuICpcbiAqIC0gYHtvYmplY3R9YCBgaW5mbygpYCDigJQgUmV0dXJucyBpZCwgc2l6ZSwgYW5kIG9wdGlvbnMgb2YgY2FjaGUuXG4gKiAtIGB7eyp9fWAgYHB1dCh7c3RyaW5nfSBrZXksIHsqfSB2YWx1ZSlgIOKAlCBQdXRzIGEgbmV3IGtleS12YWx1ZSBwYWlyIGludG8gdGhlIGNhY2hlIGFuZCByZXR1cm5zXG4gKiAgIGl0LlxuICogLSBge3sqfX1gIGBnZXQoe3N0cmluZ30ga2V5KWAg4oCUIFJldHVybnMgY2FjaGVkIHZhbHVlIGZvciBga2V5YCBvciB1bmRlZmluZWQgZm9yIGNhY2hlIG1pc3MuXG4gKiAtIGB7dm9pZH1gIGByZW1vdmUoe3N0cmluZ30ga2V5KWAg4oCUIFJlbW92ZXMgYSBrZXktdmFsdWUgcGFpciBmcm9tIHRoZSBjYWNoZS5cbiAqIC0gYHt2b2lkfWAgYHJlbW92ZUFsbCgpYCDigJQgUmVtb3ZlcyBhbGwgY2FjaGVkIHZhbHVlcy5cbiAqIC0gYHt2b2lkfWAgYGRlc3Ryb3koKWAg4oCUIFJlbW92ZXMgcmVmZXJlbmNlcyB0byB0aGlzIGNhY2hlIGZyb20gJGNhY2hlRmFjdG9yeS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiY2FjaGVFeGFtcGxlQXBwXCIgbmFtZT1cImNhY2hlLWZhY3RvcnlcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJDYWNoZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlS2V5XCIgcGxhY2Vob2xkZXI9XCJLZXlcIj5cbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlVmFsdWVcIiBwbGFjZWhvbGRlcj1cIlZhbHVlXCI+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicHV0KG5ld0NhY2hlS2V5LCBuZXdDYWNoZVZhbHVlKVwiPkNhY2hlPC9idXR0b24+XG5cbiAgICAgICAgIDxwIG5nLWlmPVwia2V5cy5sZW5ndGhcIj5DYWNoZWQgVmFsdWVzPC9wPlxuICAgICAgICAgPGRpdiBuZy1yZXBlYXQ9XCJrZXkgaW4ga2V5c1wiPlxuICAgICAgICAgICA8c3BhbiBuZy1iaW5kPVwia2V5XCI+PC9zcGFuPlxuICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cbiAgICAgICAgICAgPGIgbmctYmluZD1cImNhY2hlLmdldChrZXkpXCI+PC9iPlxuICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgIDxwPkNhY2hlIEluZm88L3A+XG4gICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cIihrZXksIHZhbHVlKSBpbiBjYWNoZS5pbmZvKClcIj5cbiAgICAgICAgICAgPHNwYW4gbmctYmluZD1cImtleVwiPjwvc3Bhbj5cbiAgICAgICAgICAgPHNwYW4+OiA8L3NwYW4+XG4gICAgICAgICAgIDxiIG5nLWJpbmQ9XCJ2YWx1ZVwiPjwvYj5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY2FjaGVFeGFtcGxlQXBwJywgW10pLlxuICAgICAgICAgY29udHJvbGxlcignQ2FjaGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRzY29wZSwgJGNhY2hlRmFjdG9yeSkge1xuICAgICAgICAgICAkc2NvcGUua2V5cyA9IFtdO1xuICAgICAgICAgICAkc2NvcGUuY2FjaGUgPSAkY2FjaGVGYWN0b3J5KCdjYWNoZUlkJyk7XG4gICAgICAgICAgICRzY29wZS5wdXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLmNhY2hlLmdldChrZXkpKSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAkc2NvcGUuY2FjaGUucHV0KGtleSwgYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkgPyBudWxsIDogdmFsdWUpO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICBwIHtcbiAgICAgICAgIG1hcmdpbjogMTBweCAwIDNweDtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gJENhY2hlRmFjdG9yeVByb3ZpZGVyKCkge1xuXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYWNoZXMgPSB7fTtcblxuICAgIGZ1bmN0aW9uIGNhY2hlRmFjdG9yeShjYWNoZUlkLCBvcHRpb25zKSB7XG4gICAgICBpZiAoY2FjaGVJZCBpbiBjYWNoZXMpIHtcbiAgICAgICAgdGhyb3cgbWluRXJyKCckY2FjaGVGYWN0b3J5JykoJ2lpZCcsICdDYWNoZUlkIFxcJ3swfVxcJyBpcyBhbHJlYWR5IHRha2VuIScsIGNhY2hlSWQpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2l6ZSA9IDAsXG4gICAgICAgICAgc3RhdHMgPSBleHRlbmQoe30sIG9wdGlvbnMsIHtpZDogY2FjaGVJZH0pLFxuICAgICAgICAgIGRhdGEgPSBjcmVhdGVNYXAoKSxcbiAgICAgICAgICBjYXBhY2l0eSA9IChvcHRpb25zICYmIG9wdGlvbnMuY2FwYWNpdHkpIHx8IE51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgICAgbHJ1SGFzaCA9IGNyZWF0ZU1hcCgpLFxuICAgICAgICAgIGZyZXNoRW5kID0gbnVsbCxcbiAgICAgICAgICBzdGFsZUVuZCA9IG51bGw7XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHR5cGVcbiAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGVcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEEgY2FjaGUgb2JqZWN0IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIGRhdGEsIHByaW1hcmlseSB1c2VkIGJ5XG4gICAgICAgKiB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdCAkdGVtcGxhdGVSZXF1ZXN0fSBhbmQgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6c2NyaXB0IHNjcmlwdH1cbiAgICAgICAqIGRpcmVjdGl2ZSB0byBjYWNoZSB0ZW1wbGF0ZXMgYW5kIG90aGVyIGRhdGEuXG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICBhbmd1bGFyLm1vZHVsZSgnc3VwZXJDYWNoZScpXG4gICAgICAgKiAgICAuZmFjdG9yeSgnc3VwZXJDYWNoZScsIFsnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRjYWNoZUZhY3RvcnkpIHtcbiAgICAgICAqICAgICAgcmV0dXJuICRjYWNoZUZhY3RvcnkoJ3N1cGVyLWNhY2hlJyk7XG4gICAgICAgKiAgICB9XSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBFeGFtcGxlIHRlc3Q6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICBpdCgnc2hvdWxkIGJlaGF2ZSBsaWtlIGEgY2FjaGUnLCBpbmplY3QoZnVuY3Rpb24oc3VwZXJDYWNoZSkge1xuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2tleScsICd2YWx1ZScpO1xuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2Fub3RoZXIga2V5JywgJ2Fub3RoZXIgdmFsdWUnKTtcbiAgICAgICAqXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5pbmZvKCkpLnRvRXF1YWwoe1xuICAgICAgICogICAgICBpZDogJ3N1cGVyLWNhY2hlJyxcbiAgICAgICAqICAgICAgc2l6ZTogMlxuICAgICAgICogICAgfSk7XG4gICAgICAgKlxuICAgICAgICogICAgc3VwZXJDYWNoZS5yZW1vdmUoJ2Fub3RoZXIga2V5Jyk7XG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5nZXQoJ2Fub3RoZXIga2V5JykpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAqXG4gICAgICAgKiAgICBzdXBlckNhY2hlLnJlbW92ZUFsbCgpO1xuICAgICAgICogICAgZXhwZWN0KHN1cGVyQ2FjaGUuaW5mbygpKS50b0VxdWFsKHtcbiAgICAgICAqICAgICAgaWQ6ICdzdXBlci1jYWNoZScsXG4gICAgICAgKiAgICAgIHNpemU6IDBcbiAgICAgICAqICAgIH0pO1xuICAgICAgICogIH0pKTtcbiAgICAgICAqIGBgYFxuICAgICAgICovXG4gICAgICByZXR1cm4gKGNhY2hlc1tjYWNoZUlkXSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3B1dFxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogSW5zZXJ0cyBhIG5hbWVkIGVudHJ5IGludG8gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QgdG8gYmVcbiAgICAgICAgICogcmV0cmlldmVkIGxhdGVyLCBhbmQgaW5jcmVtZW50aW5nIHRoZSBzaXplIG9mIHRoZSBjYWNoZSBpZiB0aGUga2V5IHdhcyBub3QgYWxyZWFkeVxuICAgICAgICAgKiBwcmVzZW50IGluIHRoZSBjYWNoZS4gSWYgYmVoYXZpbmcgbGlrZSBhbiBMUlUgY2FjaGUsIGl0IHdpbGwgYWxzbyByZW1vdmUgc3RhbGVcbiAgICAgICAgICogZW50cmllcyBmcm9tIHRoZSBzZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEl0IHdpbGwgbm90IGluc2VydCB1bmRlZmluZWQgdmFsdWVzIGludG8gdGhlIGNhY2hlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgdW5kZXIgd2hpY2ggdGhlIGNhY2hlZCBkYXRhIGlzIHN0b3JlZC5cbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSB0aGUgdmFsdWUgdG8gc3RvcmUgYWxvbmdzaWRlIHRoZSBrZXkuIElmIGl0IGlzIHVuZGVmaW5lZCwgdGhlIGtleVxuICAgICAgICAgKiAgICB3aWxsIG5vdCBiZSBzdG9yZWQuXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgc3RvcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgcHV0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xuICAgICAgICAgIGlmIChjYXBhY2l0eSA8IE51bWJlci5NQVhfVkFMVUUpIHtcbiAgICAgICAgICAgIHZhciBscnVFbnRyeSA9IGxydUhhc2hba2V5XSB8fCAobHJ1SGFzaFtrZXldID0ge2tleToga2V5fSk7XG5cbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghKGtleSBpbiBkYXRhKSkgc2l6ZSsrO1xuICAgICAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuXG4gICAgICAgICAgaWYgKHNpemUgPiBjYXBhY2l0eSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3RhbGVFbmQua2V5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNnZXRcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJldHJpZXZlcyBuYW1lZCBkYXRhIHN0b3JlZCBpbiB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IG9mIHRoZSBkYXRhIHRvIGJlIHJldHJpZXZlZFxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHN0b3JlZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldO1xuXG4gICAgICAgICAgICBpZiAoIWxydUVudHJ5KSByZXR1cm47XG5cbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XG4gICAgICAgIH0sXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3JlbW92ZVxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogUmVtb3ZlcyBhbiBlbnRyeSBmcm9tIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGJlIHJlbW92ZWRcbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldO1xuXG4gICAgICAgICAgICBpZiAoIWxydUVudHJ5KSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmIChscnVFbnRyeSA9PT0gZnJlc2hFbmQpIGZyZXNoRW5kID0gbHJ1RW50cnkucDtcbiAgICAgICAgICAgIGlmIChscnVFbnRyeSA9PT0gc3RhbGVFbmQpIHN0YWxlRW5kID0gbHJ1RW50cnkubjtcbiAgICAgICAgICAgIGxpbmsobHJ1RW50cnkubixscnVFbnRyeS5wKTtcblxuICAgICAgICAgICAgZGVsZXRlIGxydUhhc2hba2V5XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIShrZXkgaW4gZGF0YSkpIHJldHVybjtcblxuICAgICAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgICAgICAgc2l6ZS0tO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNyZW1vdmVBbGxcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIENsZWFycyB0aGUgY2FjaGUgb2JqZWN0IG9mIGFueSBlbnRyaWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgcmVtb3ZlQWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBkYXRhID0gY3JlYXRlTWFwKCk7XG4gICAgICAgICAgc2l6ZSA9IDA7XG4gICAgICAgICAgbHJ1SGFzaCA9IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgIGZyZXNoRW5kID0gc3RhbGVFbmQgPSBudWxsO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNkZXN0cm95XG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBEZXN0cm95cyB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdCBlbnRpcmVseSxcbiAgICAgICAgICogcmVtb3ZpbmcgaXQgZnJvbSB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkgJGNhY2hlRmFjdG9yeX0gc2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgc3RhdHMgPSBudWxsO1xuICAgICAgICAgIGxydUhhc2ggPSBudWxsO1xuICAgICAgICAgIGRlbGV0ZSBjYWNoZXNbY2FjaGVJZF07XG4gICAgICAgIH0sXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI2luZm9cbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJldHJpZXZlIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBhIHBhcnRpY3VsYXIge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgICAqICAgPHVsPlxuICAgICAgICAgKiAgICAgPGxpPioqaWQqKjogdGhlIGlkIG9mIHRoZSBjYWNoZSBpbnN0YW5jZTwvbGk+XG4gICAgICAgICAqICAgICA8bGk+KipzaXplKio6IHRoZSBudW1iZXIgb2YgZW50cmllcyBrZXB0IGluIHRoZSBjYWNoZSBpbnN0YW5jZTwvbGk+XG4gICAgICAgICAqICAgICA8bGk+KiouLi4qKjogYW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCB3aGVuIGNyZWF0aW5nIHRoZVxuICAgICAgICAgKiAgICAgICBjYWNoZS48L2xpPlxuICAgICAgICAgKiAgIDwvdWw+XG4gICAgICAgICAqL1xuICAgICAgICBpbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBzdGF0cywge3NpemU6IHNpemV9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBtYWtlcyB0aGUgYGVudHJ5YCB0aGUgZnJlc2hFbmQgb2YgdGhlIExSVSBsaW5rZWQgbGlzdFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZWZyZXNoKGVudHJ5KSB7XG4gICAgICAgIGlmIChlbnRyeSAhPT0gZnJlc2hFbmQpIHtcbiAgICAgICAgICBpZiAoIXN0YWxlRW5kKSB7XG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5O1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhbGVFbmQgPT09IGVudHJ5KSB7XG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5Lm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGluayhlbnRyeS5uLCBlbnRyeS5wKTtcbiAgICAgICAgICBsaW5rKGVudHJ5LCBmcmVzaEVuZCk7XG4gICAgICAgICAgZnJlc2hFbmQgPSBlbnRyeTtcbiAgICAgICAgICBmcmVzaEVuZC5uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogYmlkaXJlY3Rpb25hbGx5IGxpbmtzIHR3byBlbnRyaWVzIG9mIHRoZSBMUlUgbGlua2VkIGxpc3RcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gbGluayhuZXh0RW50cnksIHByZXZFbnRyeSkge1xuICAgICAgICBpZiAobmV4dEVudHJ5ICE9PSBwcmV2RW50cnkpIHtcbiAgICAgICAgICBpZiAobmV4dEVudHJ5KSBuZXh0RW50cnkucCA9IHByZXZFbnRyeTsgLy9wIHN0YW5kcyBmb3IgcHJldmlvdXMsICdwcmV2JyBkaWRuJ3QgbWluaWZ5XG4gICAgICAgICAgaWYgKHByZXZFbnRyeSkgcHJldkVudHJ5Lm4gPSBuZXh0RW50cnk7IC8vbiBzdGFuZHMgZm9yIG5leHQsICduZXh0JyBkaWRuJ3QgbWluaWZ5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5I2luZm9cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdldCBpbmZvcm1hdGlvbiBhYm91dCBhbGwgdGhlIGNhY2hlcyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IC0ga2V5LXZhbHVlIG1hcCBvZiBgY2FjaGVJZGAgdG8gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGBjYWNoZSNpbmZvYFxuICAgKi9cbiAgICBjYWNoZUZhY3RvcnkuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGluZm8gPSB7fTtcbiAgICAgIGZvckVhY2goY2FjaGVzLCBmdW5jdGlvbihjYWNoZSwgY2FjaGVJZCkge1xuICAgICAgICBpbmZvW2NhY2hlSWRdID0gY2FjaGUuaW5mbygpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNhY2hlRmFjdG9yeSNnZXRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdldCBhY2Nlc3MgdG8gYSBjYWNoZSBvYmplY3QgYnkgdGhlIGBjYWNoZUlkYCB1c2VkIHdoZW4gaXQgd2FzIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUlkIE5hbWUgb3IgaWQgb2YgYSBjYWNoZSB0byBhY2Nlc3MuXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IENhY2hlIG9iamVjdCBpZGVudGlmaWVkIGJ5IHRoZSBjYWNoZUlkIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoIGNhY2hlLlxuICAgKi9cbiAgICBjYWNoZUZhY3RvcnkuZ2V0ID0gZnVuY3Rpb24oY2FjaGVJZCkge1xuICAgICAgcmV0dXJuIGNhY2hlc1tjYWNoZUlkXTtcbiAgICB9O1xuXG5cbiAgICByZXR1cm4gY2FjaGVGYWN0b3J5O1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkdGVtcGxhdGVDYWNoZVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIGAkdGVtcGxhdGVDYWNoZWAgaXMgYSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZSBvYmplY3R9IGNyZWF0ZWQgYnkgdGhlXG4gKiB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSAkY2FjaGVGYWN0b3J5fS5cbiAqXG4gKiBUaGUgZmlyc3QgdGltZSBhIHRlbXBsYXRlIGlzIHVzZWQsIGl0IGlzIGxvYWRlZCBpbiB0aGUgdGVtcGxhdGUgY2FjaGUgZm9yIHF1aWNrIHJldHJpZXZhbC4gWW91XG4gKiBjYW4gbG9hZCB0ZW1wbGF0ZXMgZGlyZWN0bHkgaW50byB0aGUgY2FjaGUgaW4gYSBgc2NyaXB0YCB0YWcsIGJ5IHVzaW5nIHtAbGluayAkdGVtcGxhdGVSZXF1ZXN0fSxcbiAqIG9yIGJ5IGNvbnN1bWluZyB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlIGRpcmVjdGx5LlxuICpcbiAqIEFkZGluZyB2aWEgdGhlIGBzY3JpcHRgIHRhZzpcbiAqXG4gKiBgYGBodG1sXG4gKiAgIDxzY3JpcHQgdHlwZT1cInRleHQvbmctdGVtcGxhdGVcIiBpZD1cInRlbXBsYXRlSWQuaHRtbFwiPlxuICogICAgIDxwPlRoaXMgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlPC9wPlxuICogICA8L3NjcmlwdD5cbiAqIGBgYFxuICpcbiAqICoqTm90ZToqKiB0aGUgYHNjcmlwdGAgdGFnIGNvbnRhaW5pbmcgdGhlIHRlbXBsYXRlIGRvZXMgbm90IG5lZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGBoZWFkYCBvZlxuICogdGhlIGRvY3VtZW50LCBidXQgaXQgbXVzdCBiZSBhIGRlc2NlbmRlbnQgb2YgdGhlIHtAbGluayBuZy4kcm9vdEVsZW1lbnQgJHJvb3RFbGVtZW50fSAoZS5nLlxuICogZWxlbWVudCB3aXRoIHtAbGluayBuZ0FwcH0gYXR0cmlidXRlKSwgb3RoZXJ3aXNlIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlIGlnbm9yZWQuXG4gKlxuICogQWRkaW5nIHZpYSB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgbXlBcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSk7XG4gKiBteUFwcC5ydW4oZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAqICAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0ZW1wbGF0ZUlkLmh0bWwnLCAnVGhpcyBpcyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGUnKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogVG8gcmV0cmlldmUgdGhlIHRlbXBsYXRlIGxhdGVyLCBzaW1wbHkgdXNlIGl0IGluIHlvdXIgY29tcG9uZW50OlxuICogYGBganNcbiAqIG15QXBwLmNvbXBvbmVudCgnbXlDb21wb25lbnQnLCB7XG4gKiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlSWQuaHRtbCdcbiAqIH0pO1xuICogYGBgXG4gKlxuICogb3IgZ2V0IGl0IHZpYSB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlOlxuICogYGBganNcbiAqICR0ZW1wbGF0ZUNhY2hlLmdldCgndGVtcGxhdGVJZC5odG1sJylcbiAqIGBgYFxuICpcbiAqL1xuZnVuY3Rpb24gJFRlbXBsYXRlQ2FjaGVQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckY2FjaGVGYWN0b3J5JywgZnVuY3Rpb24oJGNhY2hlRmFjdG9yeSkge1xuICAgIHJldHVybiAkY2FjaGVGYWN0b3J5KCd0ZW1wbGF0ZXMnKTtcbiAgfV07XG59XG5cbi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICpcbiAqICAgICBBbnkgY29tbWl0cyB0byB0aGlzIGZpbGUgc2hvdWxkIGJlIHJldmlld2VkIHdpdGggc2VjdXJpdHkgaW4gbWluZC4gICpcbiAqICAgQ2hhbmdlcyB0byB0aGlzIGZpbGUgY2FuIHBvdGVudGlhbGx5IGNyZWF0ZSBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMuICpcbiAqICAgICAgICAgIEFuIGFwcHJvdmFsIGZyb20gMiBDb3JlIG1lbWJlcnMgd2l0aCBoaXN0b3J5IG9mIG1vZGlmeWluZyAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgZmlsZSBpcyByZXF1aXJlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICBEb2VzIHRoZSBjaGFuZ2Ugc29tZWhvdyBhbGxvdyBmb3IgYXJiaXRyYXJ5IGphdmFzY3JpcHQgdG8gYmUgZXhlY3V0ZWQ/ICpcbiAqICAgIE9yIGFsbG93cyBmb3Igc29tZW9uZSB0byBjaGFuZ2UgdGhlIHByb3RvdHlwZSBvZiBidWlsdC1pbiBvYmplY3RzPyAgICpcbiAqICAgICBPciBnaXZlcyB1bmRlc2lyZWQgYWNjZXNzIHRvIHZhcmlhYmxlcyBsaWtlIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxuLyogISBWQVJJQUJMRS9GVU5DVElPTiBOQU1JTkcgQ09OVkVOVElPTlMgVEhBVCBBUFBMWSBUTyBUSElTIEZJTEUhXG4gKlxuICogRE9NLXJlbGF0ZWQgdmFyaWFibGVzOlxuICpcbiAqIC0gXCJub2RlXCIgLSBET00gTm9kZVxuICogLSBcImVsZW1lbnRcIiAtIERPTSBFbGVtZW50IG9yIE5vZGVcbiAqIC0gXCIkbm9kZVwiIG9yIFwiJGVsZW1lbnRcIiAtIGpxTGl0ZS13cmFwcGVkIG5vZGUgb3IgZWxlbWVudFxuICpcbiAqXG4gKiBDb21waWxlciByZWxhdGVkIHN0dWZmOlxuICpcbiAqIC0gXCJsaW5rRm5cIiAtIGxpbmtpbmcgZm4gb2YgYSBzaW5nbGUgZGlyZWN0aXZlXG4gKiAtIFwibm9kZUxpbmtGblwiIC0gZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGFsbCBsaW5raW5nIGZucyBmb3IgYSBwYXJ0aWN1bGFyIG5vZGVcbiAqIC0gXCJjaGlsZExpbmtGblwiIC0gIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhbGwgbGlua2luZyBmbnMgZm9yIGNoaWxkIG5vZGVzIG9mIGEgcGFydGljdWxhciBub2RlXG4gKiAtIFwiY29tcG9zaXRlTGlua0ZuXCIgLSBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYWxsIGxpbmtpbmcgZm5zIGZvciBhIGNvbXBpbGF0aW9uIHJvb3QgKG5vZGVMaXN0KVxuICovXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGNvbXBpbGVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb21waWxlcyBhbiBIVE1MIHN0cmluZyBvciBET00gaW50byBhIHRlbXBsYXRlIGFuZCBwcm9kdWNlcyBhIHRlbXBsYXRlIGZ1bmN0aW9uLCB3aGljaFxuICogY2FuIHRoZW4gYmUgdXNlZCB0byBsaW5rIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIGBzY29wZWB9IGFuZCB0aGUgdGVtcGxhdGUgdG9nZXRoZXIuXG4gKlxuICogVGhlIGNvbXBpbGF0aW9uIGlzIGEgcHJvY2VzcyBvZiB3YWxraW5nIHRoZSBET00gdHJlZSBhbmQgbWF0Y2hpbmcgRE9NIGVsZW1lbnRzIHRvXG4gKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGlzIGRvY3VtZW50IGlzIGFuIGluLWRlcHRoIHJlZmVyZW5jZSBvZiBhbGwgZGlyZWN0aXZlIG9wdGlvbnMuXG4gKiBGb3IgYSBnZW50bGUgaW50cm9kdWN0aW9uIHRvIGRpcmVjdGl2ZXMgd2l0aCBleGFtcGxlcyBvZiBjb21tb24gdXNlIGNhc2VzLFxuICogc2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZSBndWlkZX0uXG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBDb21wcmVoZW5zaXZlIERpcmVjdGl2ZSBBUElcbiAqXG4gKiBUaGVyZSBhcmUgbWFueSBkaWZmZXJlbnQgb3B0aW9ucyBmb3IgYSBkaXJlY3RpdmUuXG4gKlxuICogVGhlIGRpZmZlcmVuY2UgcmVzaWRlcyBpbiB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmYWN0b3J5IGZ1bmN0aW9uLlxuICogWW91IGNhbiBlaXRoZXIgcmV0dXJuIGEge0BsaW5rICRjb21waWxlI2RpcmVjdGl2ZS1kZWZpbml0aW9uLW9iamVjdCBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3QgKHNlZSBiZWxvdyl9XG4gKiB0aGF0IGRlZmluZXMgdGhlIGRpcmVjdGl2ZSBwcm9wZXJ0aWVzLCBvciBqdXN0IHRoZSBgcG9zdExpbmtgIGZ1bmN0aW9uIChhbGwgb3RoZXIgcHJvcGVydGllcyB3aWxsIGhhdmVcbiAqIHRoZSBkZWZhdWx0IHZhbHVlcykuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAqICoqQmVzdCBQcmFjdGljZToqKiBJdCdzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgXCJkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3RcIiBmb3JtLlxuICogPC9kaXY+XG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgZGlyZWN0aXZlIGRlY2xhcmVkIHdpdGggYSBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3Q6XG4gKlxuICogYGBganNcbiAqICAgdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoLi4uKTtcbiAqXG4gKiAgIG15TW9kdWxlLmRpcmVjdGl2ZSgnZGlyZWN0aXZlTmFtZScsIGZ1bmN0aW9uIGZhY3RvcnkoaW5qZWN0YWJsZXMpIHtcbiAqICAgICB2YXIgZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdCA9IHtcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcHJpb3JpdHktIHByaW9yaXR5fTogMCxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtdGVtcGxhdGUtIHRlbXBsYXRlfTogJzxkaXY+PC9kaXY+JywgLy8gb3IgLy8gZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykgeyAuLi4gfSxcbiAqICAgICAgIC8vIG9yXG4gKiAgICAgICAvLyB7QGxpbmsgJGNvbXBpbGUjLXRlbXBsYXRldXJsLSB0ZW1wbGF0ZVVybH06ICdkaXJlY3RpdmUuaHRtbCcsIC8vIG9yIC8vIGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHsgLi4uIH0sXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXRyYW5zY2x1ZGUtIHRyYW5zY2x1ZGV9OiBmYWxzZSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcmVzdHJpY3QtIHJlc3RyaWN0fTogJ0EnLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy10ZW1wbGF0ZW5hbWVzcGFjZS0gdGVtcGxhdGVOYW1lc3BhY2V9OiAnaHRtbCcsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXNjb3BlLSBzY29wZX06IGZhbHNlLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy1jb250cm9sbGVyLSBjb250cm9sbGVyfTogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkdHJhbnNjbHVkZSwgb3RoZXJJbmplY3RhYmxlcykgeyAuLi4gfSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtY29udHJvbGxlcmFzLSBjb250cm9sbGVyQXN9OiAnc3RyaW5nSWRlbnRpZmllcicsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLWJpbmR0b2NvbnRyb2xsZXItIGJpbmRUb0NvbnRyb2xsZXJ9OiBmYWxzZSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcmVxdWlyZS0gcmVxdWlyZX06ICdzaWJsaW5nRGlyZWN0aXZlTmFtZScsIC8vIG9yIC8vIFsnXnBhcmVudERpcmVjdGl2ZU5hbWUnLCAnP29wdGlvbmFsRGlyZWN0aXZlTmFtZScsICc/Xm9wdGlvbmFsUGFyZW50J10sXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLW11bHRpZWxlbWVudC0gbXVsdGlFbGVtZW50fTogZmFsc2UsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLWNvbXBpbGUtIGNvbXBpbGV9OiBmdW5jdGlvbiBjb21waWxlKHRFbGVtZW50LCB0QXR0cnMsIHRyYW5zY2x1ZGUpIHtcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICAge0BsaW5rICRjb21waWxlI3ByZS1saW5raW5nLWZ1bmN0aW9uIHByZX06IGZ1bmN0aW9uIHByZUxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH0sXG4gKiAgICAgICAgICAgIHtAbGluayAkY29tcGlsZSNwb3N0LWxpbmtpbmctZnVuY3Rpb24gcG9zdH06IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9XG4gKiAgICAgICAgIH1cbiAqICAgICAgICAgLy8gb3JcbiAqICAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XG4gKiAgICAgICB9LFxuICogICAgICAgLy8gb3JcbiAqICAgICAgIC8vIHtAbGluayAkY29tcGlsZSMtbGluay0gbGlua306IHtcbiAqICAgICAgIC8vICB7QGxpbmsgJGNvbXBpbGUjcHJlLWxpbmtpbmctZnVuY3Rpb24gcHJlfTogZnVuY3Rpb24gcHJlTGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfSxcbiAqICAgICAgIC8vICB7QGxpbmsgJGNvbXBpbGUjcG9zdC1saW5raW5nLWZ1bmN0aW9uIHBvc3R9OiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfVxuICogICAgICAgLy8gfVxuICogICAgICAgLy8gb3JcbiAqICAgICAgIC8vIHtAbGluayAkY29tcGlsZSMtbGluay0gbGlua306IGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XG4gKiAgICAgfTtcbiAqICAgICByZXR1cm4gZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdDtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipOb3RlOioqIEFueSB1bnNwZWNpZmllZCBvcHRpb25zIHdpbGwgdXNlIHRoZSBkZWZhdWx0IHZhbHVlLiBZb3UgY2FuIHNlZSB0aGUgZGVmYXVsdCB2YWx1ZXMgYmVsb3cuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGVyZWZvcmUgdGhlIGFib3ZlIGNhbiBiZSBzaW1wbGlmaWVkIGFzOlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKC4uLik7XG4gKlxuICogICBteU1vZHVsZS5kaXJlY3RpdmUoJ2RpcmVjdGl2ZU5hbWUnLCBmdW5jdGlvbiBmYWN0b3J5KGluamVjdGFibGVzKSB7XG4gKiAgICAgdmFyIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3QgPSB7XG4gKiAgICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycykgeyAuLi4gfVxuICogICAgIH07XG4gKiAgICAgcmV0dXJuIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3Q7XG4gKiAgICAgLy8gb3JcbiAqICAgICAvLyByZXR1cm4gZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHsgLi4uIH1cbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMgTGlmZS1jeWNsZSBob29rc1xuICogRGlyZWN0aXZlIGNvbnRyb2xsZXJzIGNhbiBwcm92aWRlIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyB0aGF0IGFyZSBjYWxsZWQgYnkgQW5ndWxhckpTIGF0IHBvaW50cyBpbiB0aGUgbGlmZS1jeWNsZSBvZiB0aGVcbiAqIGRpcmVjdGl2ZTpcbiAqICogYCRvbkluaXQoKWAgLSBDYWxsZWQgb24gZWFjaCBjb250cm9sbGVyIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnMgb24gYW4gZWxlbWVudCBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYW5kXG4gKiAgIGhhZCB0aGVpciBiaW5kaW5ncyBpbml0aWFsaXplZCAoYW5kIGJlZm9yZSB0aGUgcHJlICZhbXA7IHBvc3QgbGlua2luZyBmdW5jdGlvbnMgZm9yIHRoZSBkaXJlY3RpdmVzIG9uXG4gKiAgIHRoaXMgZWxlbWVudCkuIFRoaXMgaXMgYSBnb29kIHBsYWNlIHRvIHB1dCBpbml0aWFsaXphdGlvbiBjb2RlIGZvciB5b3VyIGNvbnRyb2xsZXIuXG4gKiAqIGAkb25DaGFuZ2VzKGNoYW5nZXNPYmopYCAtIENhbGxlZCB3aGVuZXZlciBvbmUtd2F5IChgPGApIG9yIGludGVycG9sYXRpb24gKGBAYCkgYmluZGluZ3MgYXJlIHVwZGF0ZWQuIFRoZVxuICogICBgY2hhbmdlc09iamAgaXMgYSBoYXNoIHdob3NlIGtleXMgYXJlIHRoZSBuYW1lcyBvZiB0aGUgYm91bmQgcHJvcGVydGllcyB0aGF0IGhhdmUgY2hhbmdlZCwgYW5kIHRoZSB2YWx1ZXMgYXJlIGFuXG4gKiAgIG9iamVjdCBvZiB0aGUgZm9ybSBgeyBjdXJyZW50VmFsdWUsIHByZXZpb3VzVmFsdWUsIGlzRmlyc3RDaGFuZ2UoKSB9YC4gVXNlIHRoaXMgaG9vayB0byB0cmlnZ2VyIHVwZGF0ZXMgd2l0aGluIGFcbiAqICAgY29tcG9uZW50IHN1Y2ggYXMgY2xvbmluZyB0aGUgYm91bmQgdmFsdWUgdG8gcHJldmVudCBhY2NpZGVudGFsIG11dGF0aW9uIG9mIHRoZSBvdXRlciB2YWx1ZS4gTm90ZSB0aGF0IHRoaXMgd2lsbFxuICogICBhbHNvIGJlIGNhbGxlZCB3aGVuIHlvdXIgYmluZGluZ3MgYXJlIGluaXRpYWxpemVkLlxuICogKiBgJGRvQ2hlY2soKWAgLSBDYWxsZWQgb24gZWFjaCB0dXJuIG9mIHRoZSBkaWdlc3QgY3ljbGUuIFByb3ZpZGVzIGFuIG9wcG9ydHVuaXR5IHRvIGRldGVjdCBhbmQgYWN0IG9uXG4gKiAgIGNoYW5nZXMuIEFueSBhY3Rpb25zIHRoYXQgeW91IHdpc2ggdG8gdGFrZSBpbiByZXNwb25zZSB0byB0aGUgY2hhbmdlcyB0aGF0IHlvdSBkZXRlY3QgbXVzdCBiZVxuICogICBpbnZva2VkIGZyb20gdGhpcyBob29rOyBpbXBsZW1lbnRpbmcgdGhpcyBoYXMgbm8gZWZmZWN0IG9uIHdoZW4gYCRvbkNoYW5nZXNgIGlzIGNhbGxlZC4gRm9yIGV4YW1wbGUsIHRoaXMgaG9va1xuICogICBjb3VsZCBiZSB1c2VmdWwgaWYgeW91IHdpc2ggdG8gcGVyZm9ybSBhIGRlZXAgZXF1YWxpdHkgY2hlY2ssIG9yIHRvIGNoZWNrIGEgRGF0ZSBvYmplY3QsIGNoYW5nZXMgdG8gd2hpY2ggd291bGQgbm90XG4gKiAgIGJlIGRldGVjdGVkIGJ5IEFuZ3VsYXJKUydzIGNoYW5nZSBkZXRlY3RvciBhbmQgdGh1cyBub3QgdHJpZ2dlciBgJG9uQ2hhbmdlc2AuIFRoaXMgaG9vayBpcyBpbnZva2VkIHdpdGggbm8gYXJndW1lbnRzO1xuICogICBpZiBkZXRlY3RpbmcgY2hhbmdlcywgeW91IG11c3Qgc3RvcmUgdGhlIHByZXZpb3VzIHZhbHVlKHMpIGZvciBjb21wYXJpc29uIHRvIHRoZSBjdXJyZW50IHZhbHVlcy5cbiAqICogYCRvbkRlc3Ryb3koKWAgLSBDYWxsZWQgb24gYSBjb250cm9sbGVyIHdoZW4gaXRzIGNvbnRhaW5pbmcgc2NvcGUgaXMgZGVzdHJveWVkLiBVc2UgdGhpcyBob29rIGZvciByZWxlYXNpbmdcbiAqICAgZXh0ZXJuYWwgcmVzb3VyY2VzLCB3YXRjaGVzIGFuZCBldmVudCBoYW5kbGVycy4gTm90ZSB0aGF0IGNvbXBvbmVudHMgaGF2ZSB0aGVpciBgJG9uRGVzdHJveSgpYCBob29rcyBjYWxsZWQgaW5cbiAqICAgdGhlIHNhbWUgb3JkZXIgYXMgdGhlIGAkc2NvcGUuJGJyb2FkY2FzdGAgZXZlbnRzIGFyZSB0cmlnZ2VyZWQsIHdoaWNoIGlzIHRvcCBkb3duLiBUaGlzIG1lYW5zIHRoYXQgcGFyZW50XG4gKiAgIGNvbXBvbmVudHMgd2lsbCBoYXZlIHRoZWlyIGAkb25EZXN0cm95KClgIGhvb2sgY2FsbGVkIGJlZm9yZSBjaGlsZCBjb21wb25lbnRzLlxuICogKiBgJHBvc3RMaW5rKClgIC0gQ2FsbGVkIGFmdGVyIHRoaXMgY29udHJvbGxlcidzIGVsZW1lbnQgYW5kIGl0cyBjaGlsZHJlbiBoYXZlIGJlZW4gbGlua2VkLiBTaW1pbGFyIHRvIHRoZSBwb3N0LWxpbmtcbiAqICAgZnVuY3Rpb24gdGhpcyBob29rIGNhbiBiZSB1c2VkIHRvIHNldCB1cCBET00gZXZlbnQgaGFuZGxlcnMgYW5kIGRvIGRpcmVjdCBET00gbWFuaXB1bGF0aW9uLlxuICogICBOb3RlIHRoYXQgY2hpbGQgZWxlbWVudHMgdGhhdCBjb250YWluIGB0ZW1wbGF0ZVVybGAgZGlyZWN0aXZlcyB3aWxsIG5vdCBoYXZlIGJlZW4gY29tcGlsZWQgYW5kIGxpbmtlZCBzaW5jZVxuICogICB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd24gY29tcGlsYXRpb24gYW5kIGxpbmtpbmcgaGFzIGJlZW5cbiAqICAgc3VzcGVuZGVkIHVudGlsIHRoYXQgb2NjdXJzLlxuICpcbiAqICMjIyMgQ29tcGFyaXNvbiB3aXRoIGxpZmUtY3ljbGUgaG9va3MgaW4gdGhlIG5ldyBBbmd1bGFyXG4gKiBUaGUgbmV3IEFuZ3VsYXIgYWxzbyB1c2VzIGxpZmUtY3ljbGUgaG9va3MgZm9yIGl0cyBjb21wb25lbnRzLiBXaGlsZSB0aGUgQW5ndWxhckpTIGxpZmUtY3ljbGUgaG9va3MgYXJlIHNpbWlsYXIgdGhlcmUgYXJlXG4gKiBzb21lIGRpZmZlcmVuY2VzIHRoYXQgeW91IHNob3VsZCBiZSBhd2FyZSBvZiwgZXNwZWNpYWxseSB3aGVuIGl0IGNvbWVzIHRvIG1vdmluZyB5b3VyIGNvZGUgZnJvbSBBbmd1bGFySlMgdG8gQW5ndWxhcjpcbiAqXG4gKiAqIEFuZ3VsYXJKUyBob29rcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGAsIHN1Y2ggYXMgYCRvbkluaXRgLiBBbmd1bGFyIGhvb2tzIGFyZSBwcmVmaXhlZCB3aXRoIGBuZ2AsIHN1Y2ggYXMgYG5nT25Jbml0YC5cbiAqICogQW5ndWxhckpTIGhvb2tzIGNhbiBiZSBkZWZpbmVkIG9uIHRoZSBjb250cm9sbGVyIHByb3RvdHlwZSBvciBhZGRlZCB0byB0aGUgY29udHJvbGxlciBpbnNpZGUgaXRzIGNvbnN0cnVjdG9yLlxuICogICBJbiBBbmd1bGFyIHlvdSBjYW4gb25seSBkZWZpbmUgaG9va3Mgb24gdGhlIHByb3RvdHlwZSBvZiB0aGUgQ29tcG9uZW50IGNsYXNzLlxuICogKiBEdWUgdG8gdGhlIGRpZmZlcmVuY2VzIGluIGNoYW5nZS1kZXRlY3Rpb24sIHlvdSBtYXkgZ2V0IG1hbnkgbW9yZSBjYWxscyB0byBgJGRvQ2hlY2tgIGluIEFuZ3VsYXJKUyB0aGFuIHlvdSB3b3VsZCB0b1xuICogICBgbmdEb0NoZWNrYCBpbiBBbmd1bGFyLlxuICogKiBDaGFuZ2VzIHRvIHRoZSBtb2RlbCBpbnNpZGUgYCRkb0NoZWNrYCB3aWxsIHRyaWdnZXIgbmV3IHR1cm5zIG9mIHRoZSBkaWdlc3QgbG9vcCwgd2hpY2ggd2lsbCBjYXVzZSB0aGUgY2hhbmdlcyB0byBiZVxuICogICBwcm9wYWdhdGVkIHRocm91Z2hvdXQgdGhlIGFwcGxpY2F0aW9uLlxuICogICBBbmd1bGFyIGRvZXMgbm90IGFsbG93IHRoZSBgbmdEb0NoZWNrYCBob29rIHRvIHRyaWdnZXIgYSBjaGFuZ2Ugb3V0c2lkZSBvZiB0aGUgY29tcG9uZW50LiBJdCB3aWxsIGVpdGhlciB0aHJvdyBhblxuICogICBlcnJvciBvciBkbyBub3RoaW5nIGRlcGVuZGluZyB1cG9uIHRoZSBzdGF0ZSBvZiBgZW5hYmxlUHJvZE1vZGUoKWAuXG4gKlxuICogIyMjIyBMaWZlLWN5Y2xlIGhvb2sgZXhhbXBsZXNcbiAqXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHlvdSBjYW4gY2hlY2sgZm9yIG11dGF0aW9ucyB0byBhIERhdGUgb2JqZWN0IGV2ZW4gdGhvdWdoIHRoZSBpZGVudGl0eSBvZiB0aGUgb2JqZWN0XG4gKiBoYXMgbm90IGNoYW5nZWQuXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cImRvQ2hlY2tEYXRlRXhhbXBsZVwiIG1vZHVsZT1cImRvLWNoZWNrLW1vZHVsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgYW5ndWxhci5tb2R1bGUoJ2RvLWNoZWNrLW1vZHVsZScsIFtdKVxuICogICAgICAgLmNvbXBvbmVudCgnYXBwJywge1xuICogICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAnTW9udGg6IDxpbnB1dCBuZy1tb2RlbD1cIiRjdHJsLm1vbnRoXCIgbmctY2hhbmdlPVwiJGN0cmwudXBkYXRlRGF0ZSgpXCI+JyArXG4gKiAgICAgICAgICAgJ0RhdGU6IHt7ICRjdHJsLmRhdGUgfX0nICtcbiAqICAgICAgICAgICAnPHRlc3QgZGF0ZT1cIiRjdHJsLmRhdGVcIj48L3Rlc3Q+JyxcbiAqICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgdGhpcy5kYXRlID0gbmV3IERhdGUoKTtcbiAqICAgICAgICAgICB0aGlzLm1vbnRoID0gdGhpcy5kYXRlLmdldE1vbnRoKCk7XG4gKiAgICAgICAgICAgdGhpcy51cGRhdGVEYXRlID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICB0aGlzLmRhdGUuc2V0TW9udGgodGhpcy5tb250aCk7XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSlcbiAqICAgICAgIC5jb21wb25lbnQoJ3Rlc3QnLCB7XG4gKiAgICAgICAgIGJpbmRpbmdzOiB7IGRhdGU6ICc8JyB9LFxuICogICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAnPHByZT57eyAkY3RybC5sb2cgfCBqc29uIH19PC9wcmU+JyxcbiAqICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWU7XG4gKiAgICAgICAgICAgdGhpcy5sb2cgPSBbXTtcbiAqICAgICAgICAgICB0aGlzLiRkb0NoZWNrID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy5kYXRlICYmIHRoaXMuZGF0ZS52YWx1ZU9mKCk7XG4gKiAgICAgICAgICAgICBpZiAocHJldmlvdXNWYWx1ZSAhPT0gY3VycmVudFZhbHVlKSB7XG4gKiAgICAgICAgICAgICAgIHRoaXMubG9nLnB1c2goJ2RvQ2hlY2s6IGRhdGUgbXV0YXRlZDogJyArIHRoaXMuZGF0ZSk7XG4gKiAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gKiAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8YXBwPjwvYXBwPlxuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogVGhpcyBleGFtcGxlIHNob3cgaG93IHlvdSBtaWdodCB1c2UgYCRkb0NoZWNrYCB0byB0cmlnZ2VyIGNoYW5nZXMgaW4geW91ciBjb21wb25lbnQncyBpbnB1dHMgZXZlbiBpZiB0aGVcbiAqIGFjdHVhbCBpZGVudGl0eSBvZiB0aGUgY29tcG9uZW50IGRvZXNuJ3QgY2hhbmdlLiAoQmUgYXdhcmUgdGhhdCBjbG9uaW5nIGFuZCBkZWVwIGVxdWFsaXR5IGNoZWNrcyBvbiBsYXJnZVxuICogYXJyYXlzIG9yIG9iamVjdHMgY2FuIGhhdmUgYSBuZWdhdGl2ZSBpbXBhY3Qgb24geW91ciBhcHBsaWNhdGlvbiBwZXJmb3JtYW5jZSlcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwiZG9DaGVja0FycmF5RXhhbXBsZVwiIG1vZHVsZT1cImRvLWNoZWNrLW1vZHVsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxkaXYgbmctaW5pdD1cIml0ZW1zID0gW11cIj5cbiAqICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJpdGVtcy5wdXNoKGl0ZW1zLmxlbmd0aClcIj5BZGQgSXRlbTwvYnV0dG9uPlxuICogICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIml0ZW1zID0gW11cIj5SZXNldCBJdGVtczwvYnV0dG9uPlxuICogICAgICAgPHByZT57eyBpdGVtcyB9fTwvcHJlPlxuICogICAgICAgPHRlc3QgaXRlbXM9XCJpdGVtc1wiPjwvdGVzdD5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgIGFuZ3VsYXIubW9kdWxlKCdkby1jaGVjay1tb2R1bGUnLCBbXSlcbiAqICAgICAgICAuY29tcG9uZW50KCd0ZXN0Jywge1xuICogICAgICAgICAgYmluZGluZ3M6IHsgaXRlbXM6ICc8JyB9LFxuICogICAgICAgICAgdGVtcGxhdGU6XG4gKiAgICAgICAgICAgICc8cHJlPnt7ICRjdHJsLmxvZyB8IGpzb24gfX08L3ByZT4nLFxuICogICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgIHRoaXMubG9nID0gW107XG4gKlxuICogICAgICAgICAgICB0aGlzLiRkb0NoZWNrID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNfcmVmICE9PSB0aGlzLml0ZW1zKSB7XG4gKiAgICAgICAgICAgICAgICB0aGlzLmxvZy5wdXNoKCdkb0NoZWNrOiBpdGVtcyBjaGFuZ2VkJyk7XG4gKiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zX3JlZiA9IHRoaXMuaXRlbXM7XG4gKiAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICAgIGlmICghYW5ndWxhci5lcXVhbHModGhpcy5pdGVtc19jbG9uZSwgdGhpcy5pdGVtcykpIHtcbiAqICAgICAgICAgICAgICAgIHRoaXMubG9nLnB1c2goJ2RvQ2hlY2s6IGl0ZW1zIG11dGF0ZWQnKTtcbiAqICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNfY2xvbmUgPSBhbmd1bGFyLmNvcHkodGhpcy5pdGVtcyk7XG4gKiAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICB9O1xuICogICAgICAgICAgfVxuICogICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqICMjIyBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3RcbiAqXG4gKiBUaGUgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0IHByb3ZpZGVzIGluc3RydWN0aW9ucyB0byB0aGUge0BsaW5rIG5nLiRjb21waWxlXG4gKiBjb21waWxlcn0uIFRoZSBhdHRyaWJ1dGVzIGFyZTpcbiAqXG4gKiAjIyMjIGBtdWx0aUVsZW1lbnRgXG4gKiBXaGVuIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIHRydWUgKGRlZmF1bHQgaXMgYGZhbHNlYCksIHRoZSBIVE1MIGNvbXBpbGVyIHdpbGwgY29sbGVjdCBET00gbm9kZXMgYmV0d2VlblxuICogbm9kZXMgd2l0aCB0aGUgYXR0cmlidXRlcyBgZGlyZWN0aXZlLW5hbWUtc3RhcnRgIGFuZCBgZGlyZWN0aXZlLW5hbWUtZW5kYCwgYW5kIGdyb3VwIHRoZW1cbiAqIHRvZ2V0aGVyIGFzIHRoZSBkaXJlY3RpdmUgZWxlbWVudHMuIEl0IGlzIHJlY29tbWVuZGVkIHRoYXQgdGhpcyBmZWF0dXJlIGJlIHVzZWQgb24gZGlyZWN0aXZlc1xuICogd2hpY2ggYXJlIG5vdCBzdHJpY3RseSBiZWhhdmlvcmFsIChzdWNoIGFzIHtAbGluayBuZ0NsaWNrfSksIGFuZCB3aGljaFxuICogZG8gbm90IG1hbmlwdWxhdGUgb3IgcmVwbGFjZSBjaGlsZCBub2RlcyAoc3VjaCBhcyB7QGxpbmsgbmdJbmNsdWRlfSkuXG4gKlxuICogIyMjIyBgcHJpb3JpdHlgXG4gKiBXaGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBkaXJlY3RpdmVzIGRlZmluZWQgb24gYSBzaW5nbGUgRE9NIGVsZW1lbnQsIHNvbWV0aW1lcyBpdFxuICogaXMgbmVjZXNzYXJ5IHRvIHNwZWNpZnkgdGhlIG9yZGVyIGluIHdoaWNoIHRoZSBkaXJlY3RpdmVzIGFyZSBhcHBsaWVkLiBUaGUgYHByaW9yaXR5YCBpcyB1c2VkXG4gKiB0byBzb3J0IHRoZSBkaXJlY3RpdmVzIGJlZm9yZSB0aGVpciBgY29tcGlsZWAgZnVuY3Rpb25zIGdldCBjYWxsZWQuIFByaW9yaXR5IGlzIGRlZmluZWQgYXMgYVxuICogbnVtYmVyLiBEaXJlY3RpdmVzIHdpdGggZ3JlYXRlciBudW1lcmljYWwgYHByaW9yaXR5YCBhcmUgY29tcGlsZWQgZmlyc3QuIFByZS1saW5rIGZ1bmN0aW9uc1xuICogYXJlIGFsc28gcnVuIGluIHByaW9yaXR5IG9yZGVyLCBidXQgcG9zdC1saW5rIGZ1bmN0aW9ucyBhcmUgcnVuIGluIHJldmVyc2Ugb3JkZXIuIFRoZSBvcmRlclxuICogb2YgZGlyZWN0aXZlcyB3aXRoIHRoZSBzYW1lIHByaW9yaXR5IGlzIHVuZGVmaW5lZC4gVGhlIGRlZmF1bHQgcHJpb3JpdHkgaXMgYDBgLlxuICpcbiAqICMjIyMgYHRlcm1pbmFsYFxuICogSWYgc2V0IHRvIHRydWUgdGhlbiB0aGUgY3VycmVudCBgcHJpb3JpdHlgIHdpbGwgYmUgdGhlIGxhc3Qgc2V0IG9mIGRpcmVjdGl2ZXNcbiAqIHdoaWNoIHdpbGwgZXhlY3V0ZSAoYW55IGRpcmVjdGl2ZXMgYXQgdGhlIGN1cnJlbnQgcHJpb3JpdHkgd2lsbCBzdGlsbCBleGVjdXRlXG4gKiBhcyB0aGUgb3JkZXIgb2YgZXhlY3V0aW9uIG9uIHNhbWUgYHByaW9yaXR5YCBpcyB1bmRlZmluZWQpLiBOb3RlIHRoYXQgZXhwcmVzc2lvbnNcbiAqIGFuZCBvdGhlciBkaXJlY3RpdmVzIHVzZWQgaW4gdGhlIGRpcmVjdGl2ZSdzIHRlbXBsYXRlIHdpbGwgYWxzbyBiZSBleGNsdWRlZCBmcm9tIGV4ZWN1dGlvbi5cbiAqXG4gKiAjIyMjIGBzY29wZWBcbiAqIFRoZSBzY29wZSBwcm9wZXJ0eSBjYW4gYmUgYGZhbHNlYCwgYHRydWVgLCBvciBhbiBvYmplY3Q6XG4gKlxuICogKiAqKmBmYWxzZWAgKGRlZmF1bHQpOioqIE5vIHNjb3BlIHdpbGwgYmUgY3JlYXRlZCBmb3IgdGhlIGRpcmVjdGl2ZS4gVGhlIGRpcmVjdGl2ZSB3aWxsIHVzZSBpdHNcbiAqIHBhcmVudCdzIHNjb3BlLlxuICpcbiAqICogKipgdHJ1ZWA6KiogQSBuZXcgY2hpbGQgc2NvcGUgdGhhdCBwcm90b3R5cGljYWxseSBpbmhlcml0cyBmcm9tIGl0cyBwYXJlbnQgd2lsbCBiZSBjcmVhdGVkIGZvclxuICogdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuIElmIG11bHRpcGxlIGRpcmVjdGl2ZXMgb24gdGhlIHNhbWUgZWxlbWVudCByZXF1ZXN0IGEgbmV3IHNjb3BlLFxuICogb25seSBvbmUgbmV3IHNjb3BlIGlzIGNyZWF0ZWQuXG4gKlxuICogKiAqKmB7Li4ufWAgKGFuIG9iamVjdCBoYXNoKToqKiBBIG5ldyBcImlzb2xhdGVcIiBzY29wZSBpcyBjcmVhdGVkIGZvciB0aGUgZGlyZWN0aXZlJ3MgdGVtcGxhdGUuXG4gKiBUaGUgJ2lzb2xhdGUnIHNjb3BlIGRpZmZlcnMgZnJvbSBub3JtYWwgc2NvcGUgaW4gdGhhdCBpdCBkb2VzIG5vdCBwcm90b3R5cGljYWxseVxuICogaW5oZXJpdCBmcm9tIGl0cyBwYXJlbnQgc2NvcGUuIFRoaXMgaXMgdXNlZnVsIHdoZW4gY3JlYXRpbmcgcmV1c2FibGUgY29tcG9uZW50cywgd2hpY2ggc2hvdWxkIG5vdFxuICogYWNjaWRlbnRhbGx5IHJlYWQgb3IgbW9kaWZ5IGRhdGEgaW4gdGhlIHBhcmVudCBzY29wZS4gTm90ZSB0aGF0IGFuIGlzb2xhdGUgc2NvcGVcbiAqIGRpcmVjdGl2ZSB3aXRob3V0IGEgYHRlbXBsYXRlYCBvciBgdGVtcGxhdGVVcmxgIHdpbGwgbm90IGFwcGx5IHRoZSBpc29sYXRlIHNjb3BlXG4gKiB0byBpdHMgY2hpbGRyZW4gZWxlbWVudHMuXG4gKlxuICogVGhlICdpc29sYXRlJyBzY29wZSBvYmplY3QgaGFzaCBkZWZpbmVzIGEgc2V0IG9mIGxvY2FsIHNjb3BlIHByb3BlcnRpZXMgZGVyaXZlZCBmcm9tIGF0dHJpYnV0ZXMgb24gdGhlXG4gKiBkaXJlY3RpdmUncyBlbGVtZW50LiBUaGVzZSBsb2NhbCBwcm9wZXJ0aWVzIGFyZSB1c2VmdWwgZm9yIGFsaWFzaW5nIHZhbHVlcyBmb3IgdGVtcGxhdGVzLiBUaGUga2V5cyBpblxuICogdGhlIG9iamVjdCBoYXNoIG1hcCB0byB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgb24gdGhlIGlzb2xhdGUgc2NvcGU7IHRoZSB2YWx1ZXMgZGVmaW5lIGhvdyB0aGUgcHJvcGVydHlcbiAqIGlzIGJvdW5kIHRvIHRoZSBwYXJlbnQgc2NvcGUsIHZpYSBtYXRjaGluZyBhdHRyaWJ1dGVzIG9uIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50OlxuICpcbiAqICogYEBgIG9yIGBAYXR0cmAgLSBiaW5kIGEgbG9jYWwgc2NvcGUgcHJvcGVydHkgdG8gdGhlIHZhbHVlIG9mIERPTSBhdHRyaWJ1dGUuIFRoZSByZXN1bHQgaXNcbiAqICAgYWx3YXlzIGEgc3RyaW5nIHNpbmNlIERPTSBhdHRyaWJ1dGVzIGFyZSBzdHJpbmdzLiBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGVcbiAqICAgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZS4gR2l2ZW4gYDxteS1jb21wb25lbnRcbiAqICAgbXktYXR0cj1cImhlbGxvIHt7bmFtZX19XCI+YCBhbmQgdGhlIGlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiBgc2NvcGU6IHsgbG9jYWxOYW1lOidAbXlBdHRyJyB9YCxcbiAqICAgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIHByb3BlcnR5IGBsb2NhbE5hbWVgIHdpbGwgcmVmbGVjdCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIGBoZWxsb1xuICogICB7e25hbWV9fWAuIEFzIHRoZSBgbmFtZWAgYXR0cmlidXRlIGNoYW5nZXMgc28gd2lsbCB0aGUgYGxvY2FsTmFtZWAgcHJvcGVydHkgb24gdGhlIGRpcmVjdGl2ZSdzXG4gKiAgIHNjb3BlLiBUaGUgYG5hbWVgIGlzIHJlYWQgZnJvbSB0aGUgcGFyZW50IHNjb3BlIChub3QgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlKS5cbiAqXG4gKiAqIGA9YCBvciBgPWF0dHJgIC0gc2V0IHVwIGEgYmlkaXJlY3Rpb25hbCBiaW5kaW5nIGJldHdlZW4gYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSBhbmQgYW4gZXhwcmVzc2lvblxuICogICBwYXNzZWQgdmlhIHRoZSBhdHRyaWJ1dGUgYGF0dHJgLiBUaGUgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQgaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS5cbiAqICAgSWYgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsXG4gKiAgIG5hbWUuIEdpdmVuIGA8bXktY29tcG9uZW50IG15LWF0dHI9XCJwYXJlbnRNb2RlbFwiPmAgYW5kIHRoZSBpc29sYXRlIHNjb3BlIGRlZmluaXRpb24gYHNjb3BlOiB7XG4gKiAgIGxvY2FsTW9kZWw6ICc9bXlBdHRyJyB9YCwgdGhlIHByb3BlcnR5IGBsb2NhbE1vZGVsYCBvbiB0aGUgZGlyZWN0aXZlJ3Mgc2NvcGUgd2lsbCByZWZsZWN0IHRoZVxuICogICB2YWx1ZSBvZiBgcGFyZW50TW9kZWxgIG9uIHRoZSBwYXJlbnQgc2NvcGUuIENoYW5nZXMgdG8gYHBhcmVudE1vZGVsYCB3aWxsIGJlIHJlZmxlY3RlZCBpblxuICogICBgbG9jYWxNb2RlbGAgYW5kIHZpY2UgdmVyc2EuIElmIHRoZSBiaW5kaW5nIGV4cHJlc3Npb24gaXMgbm9uLWFzc2lnbmFibGUsIG9yIGlmIHRoZSBhdHRyaWJ1dGVcbiAqICAgaXNuJ3QgIG9wdGlvbmFsIGFuZCBkb2Vzbid0IGV4aXN0LCBhbiBleGNlcHRpb25cbiAqICAgKHtAbGluayBlcnJvci8kY29tcGlsZS9ub25hc3NpZ24gYCRjb21waWxlOm5vbmFzc2lnbmB9KSB3aWxsIGJlIHRocm93biB1cG9uIGRpc2NvdmVyaW5nIGNoYW5nZXNcbiAqICAgdG8gdGhlIGxvY2FsIHZhbHVlLCBzaW5jZSBpdCB3aWxsIGJlIGltcG9zc2libGUgdG8gc3luYyB0aGVtIGJhY2sgdG8gdGhlIHBhcmVudCBzY29wZS5cbiAqXG4gKiAgIEJ5IGRlZmF1bHQsIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggYCR3YXRjaGB9XG4gKiAgIG1ldGhvZCBpcyB1c2VkIGZvciB0cmFja2luZyBjaGFuZ2VzLCBhbmQgdGhlIGVxdWFsaXR5IGNoZWNrIGlzIGJhc2VkIG9uIG9iamVjdCBpZGVudGl0eS5cbiAqICAgSG93ZXZlciwgaWYgYW4gb2JqZWN0IGxpdGVyYWwgb3IgYW4gYXJyYXkgbGl0ZXJhbCBpcyBwYXNzZWQgYXMgdGhlIGJpbmRpbmcgZXhwcmVzc2lvbiwgdGhlXG4gKiAgIGVxdWFsaXR5IGNoZWNrIGlzIGRvbmUgYnkgdmFsdWUgKHVzaW5nIHRoZSB7QGxpbmsgYW5ndWxhci5lcXVhbHN9IGZ1bmN0aW9uKS4gSXQncyBhbHNvIHBvc3NpYmxlXG4gKiAgIHRvIHdhdGNoIHRoZSBldmFsdWF0ZWQgdmFsdWUgc2hhbGxvd2x5IHdpdGgge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoQ29sbGVjdGlvblxuICogICBgJHdhdGNoQ29sbGVjdGlvbmB9OiB1c2UgYD0qYCBvciBgPSphdHRyYFxuICpcbiAgKiAqIGA8YCBvciBgPGF0dHJgIC0gc2V0IHVwIGEgb25lLXdheSAob25lLWRpcmVjdGlvbmFsKSBiaW5kaW5nIGJldHdlZW4gYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSBhbmQgYW5cbiAqICAgZXhwcmVzc2lvbiBwYXNzZWQgdmlhIHRoZSBhdHRyaWJ1dGUgYGF0dHJgLiBUaGUgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQgaW4gdGhlIGNvbnRleHQgb2YgdGhlXG4gKiAgIHBhcmVudCBzY29wZS4gSWYgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlXG4gKiAgIGxvY2FsIG5hbWUuXG4gKlxuICogICBGb3IgZXhhbXBsZSwgZ2l2ZW4gYDxteS1jb21wb25lbnQgbXktYXR0cj1cInBhcmVudE1vZGVsXCI+YCBhbmQgZGlyZWN0aXZlIGRlZmluaXRpb24gb2ZcbiAqICAgYHNjb3BlOiB7IGxvY2FsTW9kZWw6JzxteUF0dHInIH1gLCB0aGVuIHRoZSBpc29sYXRlZCBzY29wZSBwcm9wZXJ0eSBgbG9jYWxNb2RlbGAgd2lsbCByZWZsZWN0IHRoZVxuICogICB2YWx1ZSBvZiBgcGFyZW50TW9kZWxgIG9uIHRoZSBwYXJlbnQgc2NvcGUuIEFueSBjaGFuZ2VzIHRvIGBwYXJlbnRNb2RlbGAgd2lsbCBiZSByZWZsZWN0ZWRcbiAqICAgaW4gYGxvY2FsTW9kZWxgLCBidXQgY2hhbmdlcyBpbiBgbG9jYWxNb2RlbGAgd2lsbCBub3QgcmVmbGVjdCBpbiBgcGFyZW50TW9kZWxgLiBUaGVyZSBhcmUgaG93ZXZlclxuICogICB0d28gY2F2ZWF0czpcbiAqICAgICAxLiBvbmUtd2F5IGJpbmRpbmcgZG9lcyBub3QgY29weSB0aGUgdmFsdWUgZnJvbSB0aGUgcGFyZW50IHRvIHRoZSBpc29sYXRlIHNjb3BlLCBpdCBzaW1wbHlcbiAqICAgICBzZXRzIHRoZSBzYW1lIHZhbHVlLiBUaGF0IG1lYW5zIGlmIHlvdXIgYm91bmQgdmFsdWUgaXMgYW4gb2JqZWN0LCBjaGFuZ2VzIHRvIGl0cyBwcm9wZXJ0aWVzXG4gKiAgICAgaW4gdGhlIGlzb2xhdGVkIHNjb3BlIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBwYXJlbnQgc2NvcGUgKGJlY2F1c2UgYm90aCByZWZlcmVuY2UgdGhlIHNhbWUgb2JqZWN0KS5cbiAqICAgICAyLiBvbmUtd2F5IGJpbmRpbmcgd2F0Y2hlcyBjaGFuZ2VzIHRvIHRoZSAqKmlkZW50aXR5Kiogb2YgdGhlIHBhcmVudCB2YWx1ZS4gVGhhdCBtZWFucyB0aGVcbiAqICAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggYCR3YXRjaGB9IG9uIHRoZSBwYXJlbnQgdmFsdWUgb25seSBmaXJlcyBpZiB0aGUgcmVmZXJlbmNlXG4gKiAgICAgdG8gdGhlIHZhbHVlIGhhcyBjaGFuZ2VkLiBJbiBtb3N0IGNhc2VzLCB0aGlzIHNob3VsZCBub3QgYmUgb2YgY29uY2VybiwgYnV0IGNhbiBiZSBpbXBvcnRhbnRcbiAqICAgICB0byBrbm93IGlmIHlvdSBvbmUtd2F5IGJpbmQgdG8gYW4gb2JqZWN0LCBhbmQgdGhlbiByZXBsYWNlIHRoYXQgb2JqZWN0IGluIHRoZSBpc29sYXRlZCBzY29wZS5cbiAqICAgICBJZiB5b3Ugbm93IGNoYW5nZSBhIHByb3BlcnR5IG9mIHRoZSBvYmplY3QgaW4geW91ciBwYXJlbnQgc2NvcGUsIHRoZSBjaGFuZ2Ugd2lsbCBub3QgYmVcbiAqICAgICBwcm9wYWdhdGVkIHRvIHRoZSBpc29sYXRlZCBzY29wZSwgYmVjYXVzZSB0aGUgaWRlbnRpdHkgb2YgdGhlIG9iamVjdCBvbiB0aGUgcGFyZW50IHNjb3BlXG4gKiAgICAgaGFzIG5vdCBjaGFuZ2VkLiBJbnN0ZWFkIHlvdSBtdXN0IGFzc2lnbiBhIG5ldyBvYmplY3QuXG4gKlxuICogICBPbmUtd2F5IGJpbmRpbmcgaXMgdXNlZnVsIGlmIHlvdSBkbyBub3QgcGxhbiB0byBwcm9wYWdhdGUgY2hhbmdlcyB0byB5b3VyIGlzb2xhdGVkIHNjb3BlIGJpbmRpbmdzXG4gKiAgIGJhY2sgdG8gdGhlIHBhcmVudC4gSG93ZXZlciwgaXQgZG9lcyBub3QgbWFrZSB0aGlzIGNvbXBsZXRlbHkgaW1wb3NzaWJsZS5cbiAqXG4gKiAgIEJ5IGRlZmF1bHQsIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggYCR3YXRjaGB9XG4gKiAgIG1ldGhvZCBpcyB1c2VkIGZvciB0cmFja2luZyBjaGFuZ2VzLCBhbmQgdGhlIGVxdWFsaXR5IGNoZWNrIGlzIGJhc2VkIG9uIG9iamVjdCBpZGVudGl0eS5cbiAqICAgSXQncyBhbHNvIHBvc3NpYmxlIHRvIHdhdGNoIHRoZSBldmFsdWF0ZWQgdmFsdWUgc2hhbGxvd2x5IHdpdGhcbiAqICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoQ29sbGVjdGlvbiBgJHdhdGNoQ29sbGVjdGlvbmB9OiB1c2UgYDwqYCBvciBgPCphdHRyYFxuICpcbiAqICogYCZgIG9yIGAmYXR0cmAgLSBwcm92aWRlcyBhIHdheSB0byBleGVjdXRlIGFuIGV4cHJlc3Npb24gaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS4gSWZcbiAqICAgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsIG5hbWUuXG4gKiAgIEdpdmVuIGA8bXktY29tcG9uZW50IG15LWF0dHI9XCJjb3VudCA9IGNvdW50ICsgdmFsdWVcIj5gIGFuZCB0aGUgaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uIGBzY29wZToge1xuICogICBsb2NhbEZuOicmbXlBdHRyJyB9YCwgdGhlIGlzb2xhdGUgc2NvcGUgcHJvcGVydHkgYGxvY2FsRm5gIHdpbGwgcG9pbnQgdG8gYSBmdW5jdGlvbiB3cmFwcGVyIGZvclxuICogICB0aGUgYGNvdW50ID0gY291bnQgKyB2YWx1ZWAgZXhwcmVzc2lvbi4gT2Z0ZW4gaXQncyBkZXNpcmFibGUgdG8gcGFzcyBkYXRhIGZyb20gdGhlIGlzb2xhdGVkIHNjb3BlXG4gKiAgIHZpYSBhbiBleHByZXNzaW9uIHRvIHRoZSBwYXJlbnQgc2NvcGUuIFRoaXMgY2FuIGJlIGRvbmUgYnkgcGFzc2luZyBhIG1hcCBvZiBsb2NhbCB2YXJpYWJsZSBuYW1lc1xuICogICBhbmQgdmFsdWVzIGludG8gdGhlIGV4cHJlc3Npb24gd3JhcHBlciBmbi4gRm9yIGV4YW1wbGUsIGlmIHRoZSBleHByZXNzaW9uIGlzIGBpbmNyZW1lbnQoYW1vdW50KWBcbiAqICAgdGhlbiB3ZSBjYW4gc3BlY2lmeSB0aGUgYW1vdW50IHZhbHVlIGJ5IGNhbGxpbmcgdGhlIGBsb2NhbEZuYCBhcyBgbG9jYWxGbih7YW1vdW50OiAyMn0pYC5cbiAqXG4gKiBBbGwgNCBraW5kcyBvZiBiaW5kaW5ncyAoYEBgLCBgPWAsIGA8YCwgYW5kIGAmYCkgY2FuIGJlIG1hZGUgb3B0aW9uYWwgYnkgYWRkaW5nIGA/YCB0byB0aGUgZXhwcmVzc2lvbi5cbiAqIFRoZSBtYXJrZXIgbXVzdCBjb21lIGFmdGVyIHRoZSBtb2RlIGFuZCBiZWZvcmUgdGhlIGF0dHJpYnV0ZSBuYW1lLlxuICogU2VlIHRoZSB7QGxpbmsgZXJyb3IvJGNvbXBpbGUvaXNjcCBJbnZhbGlkIElzb2xhdGUgU2NvcGUgRGVmaW5pdGlvbiBlcnJvcn0gZm9yIGRlZmluaXRpb24gZXhhbXBsZXMuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byByZWZpbmUgdGhlIGludGVyZmFjZSBkaXJlY3RpdmVzIHByb3ZpZGUuXG4gKiBPbmUgc3VidGxlIGRpZmZlcmVuY2UgYmV0d2VlbiBvcHRpb25hbCBhbmQgbm9uLW9wdGlvbmFsIGhhcHBlbnMgKip3aGVuIHRoZSBiaW5kaW5nIGF0dHJpYnV0ZSBpcyBub3RcbiAqIHNldCoqOlxuICogLSB0aGUgYmluZGluZyBpcyBvcHRpb25hbDogdGhlIHByb3BlcnR5IHdpbGwgbm90IGJlIGRlZmluZWRcbiAqIC0gdGhlIGJpbmRpbmcgaXMgbm90IG9wdGlvbmFsOiB0aGUgcHJvcGVydHkgaXMgZGVmaW5lZFxuICpcbiAqIGBgYGpzXG4gKmFwcC5kaXJlY3RpdmUoJ3Rlc3REaXInLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6IHtcbiAgICAgICAgbm90b3B0aW9uYWw6ICc9JyxcbiAgICAgICAgb3B0aW9uYWw6ICc9PycsXG4gICAgICB9LFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLiRvbkluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmhhc093blByb3BlcnR5KCdub3RvcHRpb25hbCcpKSAvLyB0cnVlXG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5oYXNPd25Qcm9wZXJ0eSgnb3B0aW9uYWwnKSkgLy8gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAqYGBgXG4gKlxuICpcbiAqICMjIyMjIENvbWJpbmluZyBkaXJlY3RpdmVzIHdpdGggZGlmZmVyZW50IHNjb3BlIGRlZmludGlvbnNcbiAqXG4gKiBJbiBnZW5lcmFsIGl0J3MgcG9zc2libGUgdG8gYXBwbHkgbW9yZSB0aGFuIG9uZSBkaXJlY3RpdmUgdG8gb25lIGVsZW1lbnQsIGJ1dCB0aGVyZSBtaWdodCBiZSBsaW1pdGF0aW9uc1xuICogZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIHNjb3BlIHJlcXVpcmVkIGJ5IHRoZSBkaXJlY3RpdmVzLiBUaGUgZm9sbG93aW5nIHBvaW50cyB3aWxsIGhlbHAgZXhwbGFpbiB0aGVzZSBsaW1pdGF0aW9ucy5cbiAqIEZvciBzaW1wbGljaXR5IG9ubHkgdHdvIGRpcmVjdGl2ZXMgYXJlIHRha2VuIGludG8gYWNjb3VudCwgYnV0IGl0IGlzIGFsc28gYXBwbGljYWJsZSBmb3Igc2V2ZXJhbCBkaXJlY3RpdmVzOlxuICpcbiAqICogKipubyBzY29wZSoqICsgKipubyBzY29wZSoqID0+IFR3byBkaXJlY3RpdmVzIHdoaWNoIGRvbid0IHJlcXVpcmUgdGhlaXIgb3duIHNjb3BlIHdpbGwgdXNlIHRoZWlyIHBhcmVudCdzIHNjb3BlXG4gKiAqICoqY2hpbGQgc2NvcGUqKiArICoqbm8gc2NvcGUqKiA9PiAgQm90aCBkaXJlY3RpdmVzIHdpbGwgc2hhcmUgb25lIHNpbmdsZSBjaGlsZCBzY29wZVxuICogKiAqKmNoaWxkIHNjb3BlKiogKyAqKmNoaWxkIHNjb3BlKiogPT4gIEJvdGggZGlyZWN0aXZlcyB3aWxsIHNoYXJlIG9uZSBzaW5nbGUgY2hpbGQgc2NvcGVcbiAqICogKippc29sYXRlZCBzY29wZSoqICsgKipubyBzY29wZSoqID0+ICBUaGUgaXNvbGF0ZWQgZGlyZWN0aXZlIHdpbGwgdXNlIGl0J3Mgb3duIGNyZWF0ZWQgaXNvbGF0ZWQgc2NvcGUuIFRoZSBvdGhlciBkaXJlY3RpdmUgd2lsbCB1c2VcbiAqIGl0cyBwYXJlbnQncyBzY29wZVxuICogKiAqKmlzb2xhdGVkIHNjb3BlKiogKyAqKmNoaWxkIHNjb3BlKiogPT4gICoqV29uJ3Qgd29yayEqKiBPbmx5IG9uZSBzY29wZSBjYW4gYmUgcmVsYXRlZCB0byBvbmUgZWxlbWVudC4gVGhlcmVmb3JlIHRoZXNlIGRpcmVjdGl2ZXMgY2Fubm90XG4gKiBiZSBhcHBsaWVkIHRvIHRoZSBzYW1lIGVsZW1lbnQuXG4gKiAqICoqaXNvbGF0ZWQgc2NvcGUqKiArICoqaXNvbGF0ZWQgc2NvcGUqKiAgPT4gICoqV29uJ3Qgd29yayEqKiBPbmx5IG9uZSBzY29wZSBjYW4gYmUgcmVsYXRlZCB0byBvbmUgZWxlbWVudC4gVGhlcmVmb3JlIHRoZXNlIGRpcmVjdGl2ZXNcbiAqIGNhbm5vdCBiZSBhcHBsaWVkIHRvIHRoZSBzYW1lIGVsZW1lbnQuXG4gKlxuICpcbiAqICMjIyMgYGJpbmRUb0NvbnRyb2xsZXJgXG4gKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgdG8gYmluZCBzY29wZSBwcm9wZXJ0aWVzIGRpcmVjdGx5IHRvIHRoZSBjb250cm9sbGVyLiBJdCBjYW4gYmUgZWl0aGVyXG4gKiBgdHJ1ZWAgb3IgYW4gb2JqZWN0IGhhc2ggd2l0aCB0aGUgc2FtZSBmb3JtYXQgYXMgdGhlIGBzY29wZWAgcHJvcGVydHkuXG4gKlxuICogV2hlbiBhbiBpc29sYXRlIHNjb3BlIGlzIHVzZWQgZm9yIGEgZGlyZWN0aXZlIChzZWUgYWJvdmUpLCBgYmluZFRvQ29udHJvbGxlcjogdHJ1ZWAgd2lsbFxuICogYWxsb3cgYSBjb21wb25lbnQgdG8gaGF2ZSBpdHMgcHJvcGVydGllcyBib3VuZCB0byB0aGUgY29udHJvbGxlciwgcmF0aGVyIHRoYW4gdG8gc2NvcGUuXG4gKlxuICogQWZ0ZXIgdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkLCB0aGUgaW5pdGlhbCB2YWx1ZXMgb2YgdGhlIGlzb2xhdGUgc2NvcGUgYmluZGluZ3Mgd2lsbCBiZSBib3VuZCB0byB0aGUgY29udHJvbGxlclxuICogcHJvcGVydGllcy4gWW91IGNhbiBhY2Nlc3MgdGhlc2UgYmluZGluZ3Mgb25jZSB0aGV5IGhhdmUgYmVlbiBpbml0aWFsaXplZCBieSBwcm92aWRpbmcgYSBjb250cm9sbGVyIG1ldGhvZCBjYWxsZWRcbiAqIGAkb25Jbml0YCwgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnMgb24gYW4gZWxlbWVudCBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYW5kIGhhZCB0aGVpciBiaW5kaW5nc1xuICogaW5pdGlhbGl6ZWQuXG4gKlxuICogSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBzZXQgYGJpbmRUb0NvbnRyb2xsZXJgIHRvIGFuIG9iamVjdCBoYXNoIHdpdGggdGhlIHNhbWUgZm9ybWF0IGFzIHRoZSBgc2NvcGVgIHByb3BlcnR5LlxuICogVGhpcyB3aWxsIHNldCB1cCB0aGUgc2NvcGUgYmluZGluZ3MgdG8gdGhlIGNvbnRyb2xsZXIgZGlyZWN0bHkuIE5vdGUgdGhhdCBgc2NvcGVgIGNhbiBzdGlsbCBiZSB1c2VkXG4gKiB0byBkZWZpbmUgd2hpY2gga2luZCBvZiBzY29wZSBpcyBjcmVhdGVkLiBCeSBkZWZhdWx0LCBubyBzY29wZSBpcyBjcmVhdGVkLiBVc2UgYHNjb3BlOiB7fWAgdG8gY3JlYXRlIGFuIGlzb2xhdGVcbiAqIHNjb3BlICh1c2VmdWwgZm9yIGNvbXBvbmVudCBkaXJlY3RpdmVzKS5cbiAqXG4gKiBJZiBib3RoIGBiaW5kVG9Db250cm9sbGVyYCBhbmQgYHNjb3BlYCBhcmUgZGVmaW5lZCBhbmQgaGF2ZSBvYmplY3QgaGFzaGVzLCBgYmluZFRvQ29udHJvbGxlcmAgb3ZlcnJpZGVzIGBzY29wZWAuXG4gKlxuICpcbiAqICMjIyMgYGNvbnRyb2xsZXJgXG4gKiBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLiBUaGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYmVmb3JlIHRoZVxuICogcHJlLWxpbmtpbmcgcGhhc2UgYW5kIGNhbiBiZSBhY2Nlc3NlZCBieSBvdGhlciBkaXJlY3RpdmVzIChzZWVcbiAqIGByZXF1aXJlYCBhdHRyaWJ1dGUpLiBUaGlzIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byBjb21tdW5pY2F0ZSB3aXRoIGVhY2ggb3RoZXIgYW5kIGF1Z21lbnRcbiAqIGVhY2ggb3RoZXIncyBiZWhhdmlvci4gVGhlIGNvbnRyb2xsZXIgaXMgaW5qZWN0YWJsZSAoYW5kIHN1cHBvcnRzIGJyYWNrZXQgbm90YXRpb24pIHdpdGggdGhlIGZvbGxvd2luZyBsb2NhbHM6XG4gKlxuICogKiBgJHNjb3BlYCAtIEN1cnJlbnQgc2NvcGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50XG4gKiAqIGAkZWxlbWVudGAgLSBDdXJyZW50IGVsZW1lbnRcbiAqICogYCRhdHRyc2AgLSBDdXJyZW50IGF0dHJpYnV0ZXMgb2JqZWN0IGZvciB0aGUgZWxlbWVudFxuICogKiBgJHRyYW5zY2x1ZGVgIC0gQSB0cmFuc2NsdWRlIGxpbmtpbmcgZnVuY3Rpb24gcHJlLWJvdW5kIHRvIHRoZSBjb3JyZWN0IHRyYW5zY2x1c2lvbiBzY29wZTpcbiAqICAgYGZ1bmN0aW9uKFtzY29wZV0sIGNsb25lTGlua2luZ0ZuLCBmdXR1cmVQYXJlbnRFbGVtZW50LCBzbG90TmFtZSlgOlxuICogICAgKiBgc2NvcGVgOiAob3B0aW9uYWwpIG92ZXJyaWRlIHRoZSBzY29wZS5cbiAqICAgICogYGNsb25lTGlua2luZ0ZuYDogKG9wdGlvbmFsKSBhcmd1bWVudCB0byBjcmVhdGUgY2xvbmVzIG9mIHRoZSBvcmlnaW5hbCB0cmFuc2NsdWRlZCBjb250ZW50LlxuICogICAgKiBgZnV0dXJlUGFyZW50RWxlbWVudGAgKG9wdGlvbmFsKTpcbiAqICAgICAgICAqIGRlZmluZXMgdGhlIHBhcmVudCB0byB3aGljaCB0aGUgYGNsb25lTGlua2luZ0ZuYCB3aWxsIGFkZCB0aGUgY2xvbmVkIGVsZW1lbnRzLlxuICogICAgICAgICogZGVmYXVsdDogYCRlbGVtZW50LnBhcmVudCgpYCByZXNwLiBgJGVsZW1lbnRgIGZvciBgdHJhbnNjbHVkZTonZWxlbWVudCdgIHJlc3AuIGB0cmFuc2NsdWRlOnRydWVgLlxuICogICAgICAgICogb25seSBuZWVkZWQgZm9yIHRyYW5zY2x1ZGVzIHRoYXQgYXJlIGFsbG93ZWQgdG8gY29udGFpbiBub24gaHRtbCBlbGVtZW50cyAoZS5nLiBTVkcgZWxlbWVudHMpXG4gKiAgICAgICAgICBhbmQgd2hlbiB0aGUgYGNsb25lTGlua2luZ0ZuYCBpcyBwYXNzZWQsXG4gKiAgICAgICAgICBhcyB0aG9zZSBlbGVtZW50cyBuZWVkIHRvIGNyZWF0ZWQgYW5kIGNsb25lZCBpbiBhIHNwZWNpYWwgd2F5IHdoZW4gdGhleSBhcmUgZGVmaW5lZCBvdXRzaWRlIHRoZWlyXG4gKiAgICAgICAgICB1c3VhbCBjb250YWluZXJzIChlLmcuIGxpa2UgYDxzdmc+YCkuXG4gKiAgICAgICAgKiBTZWUgYWxzbyB0aGUgYGRpcmVjdGl2ZS50ZW1wbGF0ZU5hbWVzcGFjZWAgcHJvcGVydHkuXG4gKiAgICAqIGBzbG90TmFtZWA6IChvcHRpb25hbCkgdGhlIG5hbWUgb2YgdGhlIHNsb3QgdG8gdHJhbnNjbHVkZS4gSWYgZmFsc3kgKGUuZy4gYG51bGxgLCBgdW5kZWZpbmVkYCBvciBgJydgKVxuICogICAgICB0aGVuIHRoZSBkZWZhdWx0IHRyYW5zY2x1c2lvbiBpcyBwcm92aWRlZC5cbiAqICAgIFRoZSBgJHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIGFsc28gaGFzIGEgbWV0aG9kIG9uIGl0LCBgJHRyYW5zY2x1ZGUuaXNTbG90RmlsbGVkKHNsb3ROYW1lKWAsIHdoaWNoIHJldHVybnNcbiAqICAgIGB0cnVlYCBpZiB0aGUgc3BlY2lmaWVkIHNsb3QgY29udGFpbnMgY29udGVudCAoaS5lLiBvbmUgb3IgbW9yZSBET00gbm9kZXMpLlxuICpcbiAqICMjIyMgYHJlcXVpcmVgXG4gKiBSZXF1aXJlIGFub3RoZXIgZGlyZWN0aXZlIGFuZCBpbmplY3QgaXRzIGNvbnRyb2xsZXIgYXMgdGhlIGZvdXJ0aCBhcmd1bWVudCB0byB0aGUgbGlua2luZyBmdW5jdGlvbi4gVGhlXG4gKiBgcmVxdWlyZWAgcHJvcGVydHkgY2FuIGJlIGEgc3RyaW5nLCBhbiBhcnJheSBvciBhbiBvYmplY3Q6XG4gKiAqIGEgKipzdHJpbmcqKiBjb250YWluaW5nIHRoZSBuYW1lIG9mIHRoZSBkaXJlY3RpdmUgdG8gcGFzcyB0byB0aGUgbGlua2luZyBmdW5jdGlvblxuICogKiBhbiAqKmFycmF5KiogY29udGFpbmluZyB0aGUgbmFtZXMgb2YgZGlyZWN0aXZlcyB0byBwYXNzIHRvIHRoZSBsaW5raW5nIGZ1bmN0aW9uLiBUaGUgYXJndW1lbnQgcGFzc2VkIHRvIHRoZVxuICogbGlua2luZyBmdW5jdGlvbiB3aWxsIGJlIGFuIGFycmF5IG9mIGNvbnRyb2xsZXJzIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSBuYW1lcyBpbiB0aGUgYHJlcXVpcmVgIHByb3BlcnR5XG4gKiAqIGFuICoqb2JqZWN0Kiogd2hvc2UgcHJvcGVydHkgdmFsdWVzIGFyZSB0aGUgbmFtZXMgb2YgdGhlIGRpcmVjdGl2ZXMgdG8gcGFzcyB0byB0aGUgbGlua2luZyBmdW5jdGlvbi4gVGhlIGFyZ3VtZW50XG4gKiBwYXNzZWQgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBhbHNvIGJlIGFuIG9iamVjdCB3aXRoIG1hdGNoaW5nIGtleXMsIHdob3NlIHZhbHVlcyB3aWxsIGhvbGQgdGhlIGNvcnJlc3BvbmRpbmdcbiAqIGNvbnRyb2xsZXJzLlxuICpcbiAqIElmIHRoZSBgcmVxdWlyZWAgcHJvcGVydHkgaXMgYW4gb2JqZWN0IGFuZCBgYmluZFRvQ29udHJvbGxlcmAgaXMgdHJ1dGh5LCB0aGVuIHRoZSByZXF1aXJlZCBjb250cm9sbGVycyBhcmVcbiAqIGJvdW5kIHRvIHRoZSBjb250cm9sbGVyIHVzaW5nIHRoZSBrZXlzIG9mIHRoZSBgcmVxdWlyZWAgcHJvcGVydHkuIFRoaXMgYmluZGluZyBvY2N1cnMgYWZ0ZXIgYWxsIHRoZSBjb250cm9sbGVyc1xuICogaGF2ZSBiZWVuIGNvbnN0cnVjdGVkIGJ1dCBiZWZvcmUgYCRvbkluaXRgIGlzIGNhbGxlZC5cbiAqIElmIHRoZSBuYW1lIG9mIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGlzIHRoZSBzYW1lIGFzIHRoZSBsb2NhbCBuYW1lICh0aGUga2V5KSwgdGhlIG5hbWUgY2FuIGJlXG4gKiBvbWl0dGVkLiBGb3IgZXhhbXBsZSwgYHtwYXJlbnREaXI6ICdeXid9YCBpcyBlcXVpdmFsZW50IHRvIGB7cGFyZW50RGlyOiAnXl5wYXJlbnREaXInfWAuXG4gKiBTZWUgdGhlIHtAbGluayAkY29tcGlsZVByb3ZpZGVyI2NvbXBvbmVudH0gaGVscGVyIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0aGlzIGNhbiBiZSB1c2VkLlxuICogSWYgbm8gc3VjaCByZXF1aXJlZCBkaXJlY3RpdmUocykgY2FuIGJlIGZvdW5kLCBvciBpZiB0aGUgZGlyZWN0aXZlIGRvZXMgbm90IGhhdmUgYSBjb250cm9sbGVyLCB0aGVuIGFuIGVycm9yIGlzXG4gKiByYWlzZWQgKHVubGVzcyBubyBsaW5rIGZ1bmN0aW9uIGlzIHNwZWNpZmllZCBhbmQgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXJzIGFyZSBub3QgYmVpbmcgYm91bmQgdG8gdGhlIGRpcmVjdGl2ZVxuICogY29udHJvbGxlciwgaW4gd2hpY2ggY2FzZSBlcnJvciBjaGVja2luZyBpcyBza2lwcGVkKS4gVGhlIG5hbWUgY2FuIGJlIHByZWZpeGVkIHdpdGg6XG4gKlxuICogKiAobm8gcHJlZml4KSAtIExvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBvbiB0aGUgY3VycmVudCBlbGVtZW50LiBUaHJvdyBhbiBlcnJvciBpZiBub3QgZm91bmQuXG4gKiAqIGA/YCAtIEF0dGVtcHQgdG8gbG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIG9yIHBhc3MgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxuICogKiBgXmAgLSBMb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgYnkgc2VhcmNoaW5nIHRoZSBlbGVtZW50IGFuZCBpdHMgcGFyZW50cy4gVGhyb3cgYW4gZXJyb3IgaWYgbm90IGZvdW5kLlxuICogKiBgXl5gIC0gTG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCdzIHBhcmVudHMuIFRocm93IGFuIGVycm9yIGlmIG5vdCBmb3VuZC5cbiAqICogYD9eYCAtIEF0dGVtcHQgdG8gbG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCBhbmQgaXRzIHBhcmVudHMgb3IgcGFzc1xuICogICBgbnVsbGAgdG8gdGhlIGBsaW5rYCBmbiBpZiBub3QgZm91bmQuXG4gKiAqIGA/Xl5gIC0gQXR0ZW1wdCB0byBsb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgYnkgc2VhcmNoaW5nIHRoZSBlbGVtZW50J3MgcGFyZW50cywgb3IgcGFzc1xuICogICBgbnVsbGAgdG8gdGhlIGBsaW5rYCBmbiBpZiBub3QgZm91bmQuXG4gKlxuICpcbiAqICMjIyMgYGNvbnRyb2xsZXJBc2BcbiAqIElkZW50aWZpZXIgbmFtZSBmb3IgYSByZWZlcmVuY2UgdG8gdGhlIGNvbnRyb2xsZXIgaW4gdGhlIGRpcmVjdGl2ZSdzIHNjb3BlLlxuICogVGhpcyBhbGxvd3MgdGhlIGNvbnRyb2xsZXIgdG8gYmUgcmVmZXJlbmNlZCBmcm9tIHRoZSBkaXJlY3RpdmUgdGVtcGxhdGUuIFRoaXMgaXMgZXNwZWNpYWxseVxuICogdXNlZnVsIHdoZW4gYSBkaXJlY3RpdmUgaXMgdXNlZCBhcyBjb21wb25lbnQsIGkuZS4gd2l0aCBhbiBgaXNvbGF0ZWAgc2NvcGUuIEl0J3MgYWxzbyBwb3NzaWJsZVxuICogdG8gdXNlIGl0IGluIGEgZGlyZWN0aXZlIHdpdGhvdXQgYW4gYGlzb2xhdGVgIC8gYG5ld2Agc2NvcGUsIGJ1dCB5b3UgbmVlZCB0byBiZSBhd2FyZSB0aGF0IHRoZVxuICogYGNvbnRyb2xsZXJBc2AgcmVmZXJlbmNlIG1pZ2h0IG92ZXJ3cml0ZSBhIHByb3BlcnR5IHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHBhcmVudCBzY29wZS5cbiAqXG4gKlxuICogIyMjIyBgcmVzdHJpY3RgXG4gKiBTdHJpbmcgb2Ygc3Vic2V0IG9mIGBFQUNNYCB3aGljaCByZXN0cmljdHMgdGhlIGRpcmVjdGl2ZSB0byBhIHNwZWNpZmljIGRpcmVjdGl2ZVxuICogZGVjbGFyYXRpb24gc3R5bGUuIElmIG9taXR0ZWQsIHRoZSBkZWZhdWx0cyAoZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXMpIGFyZSB1c2VkLlxuICpcbiAqICogYEVgIC0gRWxlbWVudCBuYW1lIChkZWZhdWx0KTogYDxteS1kaXJlY3RpdmU+PC9teS1kaXJlY3RpdmU+YFxuICogKiBgQWAgLSBBdHRyaWJ1dGUgKGRlZmF1bHQpOiBgPGRpdiBteS1kaXJlY3RpdmU9XCJleHBcIj48L2Rpdj5gXG4gKiAqIGBDYCAtIENsYXNzOiBgPGRpdiBjbGFzcz1cIm15LWRpcmVjdGl2ZTogZXhwO1wiPjwvZGl2PmBcbiAqICogYE1gIC0gQ29tbWVudDogYDwhLS0gZGlyZWN0aXZlOiBteS1kaXJlY3RpdmUgZXhwIC0tPmBcbiAqXG4gKlxuICogIyMjIyBgdGVtcGxhdGVOYW1lc3BhY2VgXG4gKiBTdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkb2N1bWVudCB0eXBlIHVzZWQgYnkgdGhlIG1hcmt1cCBpbiB0aGUgdGVtcGxhdGUuXG4gKiBBbmd1bGFySlMgbmVlZHMgdGhpcyBpbmZvcm1hdGlvbiBhcyB0aG9zZSBlbGVtZW50cyBuZWVkIHRvIGJlIGNyZWF0ZWQgYW5kIGNsb25lZFxuICogaW4gYSBzcGVjaWFsIHdheSB3aGVuIHRoZXkgYXJlIGRlZmluZWQgb3V0c2lkZSB0aGVpciB1c3VhbCBjb250YWluZXJzIGxpa2UgYDxzdmc+YCBhbmQgYDxtYXRoPmAuXG4gKlxuICogKiBgaHRtbGAgLSBBbGwgcm9vdCBub2RlcyBpbiB0aGUgdGVtcGxhdGUgYXJlIEhUTUwuIFJvb3Qgbm9kZXMgbWF5IGFsc28gYmVcbiAqICAgdG9wLWxldmVsIGVsZW1lbnRzIHN1Y2ggYXMgYDxzdmc+YCBvciBgPG1hdGg+YC5cbiAqICogYHN2Z2AgLSBUaGUgcm9vdCBub2RlcyBpbiB0aGUgdGVtcGxhdGUgYXJlIFNWRyBlbGVtZW50cyAoZXhjbHVkaW5nIGA8bWF0aD5gKS5cbiAqICogYG1hdGhgIC0gVGhlIHJvb3Qgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIGFyZSBNYXRoTUwgZWxlbWVudHMgKGV4Y2x1ZGluZyBgPHN2Zz5gKS5cbiAqXG4gKiBJZiBubyBgdGVtcGxhdGVOYW1lc3BhY2VgIGlzIHNwZWNpZmllZCwgdGhlbiB0aGUgbmFtZXNwYWNlIGlzIGNvbnNpZGVyZWQgdG8gYmUgYGh0bWxgLlxuICpcbiAqICMjIyMgYHRlbXBsYXRlYFxuICogSFRNTCBtYXJrdXAgdGhhdCBtYXk6XG4gKiAqIFJlcGxhY2UgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50IChkZWZhdWx0KS5cbiAqICogUmVwbGFjZSB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCBpdHNlbGYgKGlmIGByZXBsYWNlYCBpcyB0cnVlIC0gREVQUkVDQVRFRCkuXG4gKiAqIFdyYXAgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50IChpZiBgdHJhbnNjbHVkZWAgaXMgdHJ1ZSkuXG4gKlxuICogVmFsdWUgbWF5IGJlOlxuICpcbiAqICogQSBzdHJpbmcuIEZvciBleGFtcGxlIGA8ZGl2IHJlZC1vbi1ob3Zlcj57e2RlbGV0ZV9zdHJ9fTwvZGl2PmAuXG4gKiAqIEEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdHdvIGFyZ3VtZW50cyBgdEVsZW1lbnRgIGFuZCBgdEF0dHJzYCAoZGVzY3JpYmVkIGluIHRoZSBgY29tcGlsZWBcbiAqICAgZnVuY3Rpb24gYXBpIGJlbG93KSBhbmQgcmV0dXJucyBhIHN0cmluZyB2YWx1ZS5cbiAqXG4gKlxuICogIyMjIyBgdGVtcGxhdGVVcmxgXG4gKiBUaGlzIGlzIHNpbWlsYXIgdG8gYHRlbXBsYXRlYCBidXQgdGhlIHRlbXBsYXRlIGlzIGxvYWRlZCBmcm9tIHRoZSBzcGVjaWZpZWQgVVJMLCBhc3luY2hyb25vdXNseS5cbiAqXG4gKiBCZWNhdXNlIHRlbXBsYXRlIGxvYWRpbmcgaXMgYXN5bmNocm9ub3VzIHRoZSBjb21waWxlciB3aWxsIHN1c3BlbmQgY29tcGlsYXRpb24gb2YgZGlyZWN0aXZlcyBvbiB0aGF0IGVsZW1lbnRcbiAqIGZvciBsYXRlciB3aGVuIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiByZXNvbHZlZC4gIEluIHRoZSBtZWFudGltZSBpdCB3aWxsIGNvbnRpbnVlIHRvIGNvbXBpbGUgYW5kIGxpbmtcbiAqIHNpYmxpbmcgYW5kIHBhcmVudCBlbGVtZW50cyBhcyB0aG91Z2ggdGhpcyBlbGVtZW50IGhhZCBub3QgY29udGFpbmVkIGFueSBkaXJlY3RpdmVzLlxuICpcbiAqIFRoZSBjb21waWxlciBkb2VzIG5vdCBzdXNwZW5kIHRoZSBlbnRpcmUgY29tcGlsYXRpb24gdG8gd2FpdCBmb3IgdGVtcGxhdGVzIHRvIGJlIGxvYWRlZCBiZWNhdXNlIHRoaXNcbiAqIHdvdWxkIHJlc3VsdCBpbiB0aGUgd2hvbGUgYXBwIFwic3RhbGxpbmdcIiB1bnRpbCBhbGwgdGVtcGxhdGVzIGFyZSBsb2FkZWQgYXN5bmNocm9ub3VzbHkgLSBldmVuIGluIHRoZVxuICogY2FzZSB3aGVuIG9ubHkgb25lIGRlZXBseSBuZXN0ZWQgZGlyZWN0aXZlIGhhcyBgdGVtcGxhdGVVcmxgLlxuICpcbiAqIFRlbXBsYXRlIGxvYWRpbmcgaXMgYXN5bmNocm9ub3VzIGV2ZW4gaWYgdGhlIHRlbXBsYXRlIGhhcyBiZWVuIHByZWxvYWRlZCBpbnRvIHRoZSB7QGxpbmsgJHRlbXBsYXRlQ2FjaGV9XG4gKlxuICogWW91IGNhbiBzcGVjaWZ5IGB0ZW1wbGF0ZVVybGAgYXMgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBVUkwgb3IgYXMgYSBmdW5jdGlvbiB3aGljaCB0YWtlcyB0d29cbiAqIGFyZ3VtZW50cyBgdEVsZW1lbnRgIGFuZCBgdEF0dHJzYCAoZGVzY3JpYmVkIGluIHRoZSBgY29tcGlsZWAgZnVuY3Rpb24gYXBpIGJlbG93KSBhbmQgcmV0dXJuc1xuICogYSBzdHJpbmcgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSB1cmwuICBJbiBlaXRoZXIgY2FzZSwgdGhlIHRlbXBsYXRlIFVSTCBpcyBwYXNzZWQgdGhyb3VnaCB7QGxpbmtcbiAqICRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsfS5cbiAqXG4gKlxuICogIyMjIyBgcmVwbGFjZWBcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqICoqTm90ZToqKiBgcmVwbGFjZWAgaXMgZGVwcmVjYXRlZCBpbiBBbmd1bGFySlMgYW5kIGhhcyBiZWVuIHJlbW92ZWQgaW4gdGhlIG5ldyBBbmd1bGFyICh2MispLlxuICogPC9kaXY+XG4gKlxuICogU3BlY2lmaWVzIHdoYXQgdGhlIHRlbXBsYXRlIHNob3VsZCByZXBsYWNlLiBEZWZhdWx0cyB0byBgZmFsc2VgLlxuICpcbiAqICogYHRydWVgIC0gdGhlIHRlbXBsYXRlIHdpbGwgcmVwbGFjZSB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cbiAqICogYGZhbHNlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50LlxuICpcbiAqIFRoZSByZXBsYWNlbWVudCBwcm9jZXNzIG1pZ3JhdGVzIGFsbCBvZiB0aGUgYXR0cmlidXRlcyAvIGNsYXNzZXMgZnJvbSB0aGUgb2xkIGVsZW1lbnQgdG8gdGhlIG5ld1xuICogb25lLiBTZWUgdGhlIHtAbGluayBndWlkZS9kaXJlY3RpdmUjdGVtcGxhdGUtZXhwYW5kaW5nLWRpcmVjdGl2ZVxuICogRGlyZWN0aXZlcyBHdWlkZX0gZm9yIGFuIGV4YW1wbGUuXG4gKlxuICogVGhlcmUgYXJlIHZlcnkgZmV3IHNjZW5hcmlvcyB3aGVyZSBlbGVtZW50IHJlcGxhY2VtZW50IGlzIHJlcXVpcmVkIGZvciB0aGUgYXBwbGljYXRpb24gZnVuY3Rpb24sXG4gKiB0aGUgbWFpbiBvbmUgYmVpbmcgcmV1c2FibGUgY3VzdG9tIGNvbXBvbmVudHMgdGhhdCBhcmUgdXNlZCB3aXRoaW4gU1ZHIGNvbnRleHRzXG4gKiAoYmVjYXVzZSBTVkcgZG9lc24ndCB3b3JrIHdpdGggY3VzdG9tIGVsZW1lbnRzIGluIHRoZSBET00gdHJlZSkuXG4gKlxuICogIyMjIyBgdHJhbnNjbHVkZWBcbiAqIEV4dHJhY3QgdGhlIGNvbnRlbnRzIG9mIHRoZSBlbGVtZW50IHdoZXJlIHRoZSBkaXJlY3RpdmUgYXBwZWFycyBhbmQgbWFrZSBpdCBhdmFpbGFibGUgdG8gdGhlIGRpcmVjdGl2ZS5cbiAqIFRoZSBjb250ZW50cyBhcmUgY29tcGlsZWQgYW5kIHByb3ZpZGVkIHRvIHRoZSBkaXJlY3RpdmUgYXMgYSAqKnRyYW5zY2x1c2lvbiBmdW5jdGlvbioqLiBTZWUgdGhlXG4gKiB7QGxpbmsgJGNvbXBpbGUjdHJhbnNjbHVzaW9uIFRyYW5zY2x1c2lvbn0gc2VjdGlvbiBiZWxvdy5cbiAqXG4gKlxuICogIyMjIyBgY29tcGlsZWBcbiAqXG4gKiBgYGBqc1xuICogICBmdW5jdGlvbiBjb21waWxlKHRFbGVtZW50LCB0QXR0cnMsIHRyYW5zY2x1ZGUpIHsgLi4uIH1cbiAqIGBgYFxuICpcbiAqIFRoZSBjb21waWxlIGZ1bmN0aW9uIGRlYWxzIHdpdGggdHJhbnNmb3JtaW5nIHRoZSB0ZW1wbGF0ZSBET00uIFNpbmNlIG1vc3QgZGlyZWN0aXZlcyBkbyBub3QgZG9cbiAqIHRlbXBsYXRlIHRyYW5zZm9ybWF0aW9uLCBpdCBpcyBub3QgdXNlZCBvZnRlbi4gVGhlIGNvbXBpbGUgZnVuY3Rpb24gdGFrZXMgdGhlIGZvbGxvd2luZyBhcmd1bWVudHM6XG4gKlxuICogICAqIGB0RWxlbWVudGAgLSB0ZW1wbGF0ZSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgd2hlcmUgdGhlIGRpcmVjdGl2ZSBoYXMgYmVlbiBkZWNsYXJlZC4gSXQgaXNcbiAqICAgICBzYWZlIHRvIGRvIHRlbXBsYXRlIHRyYW5zZm9ybWF0aW9uIG9uIHRoZSBlbGVtZW50IGFuZCBjaGlsZCBlbGVtZW50cyBvbmx5LlxuICpcbiAqICAgKiBgdEF0dHJzYCAtIHRlbXBsYXRlIGF0dHJpYnV0ZXMgLSBOb3JtYWxpemVkIGxpc3Qgb2YgYXR0cmlidXRlcyBkZWNsYXJlZCBvbiB0aGlzIGVsZW1lbnQgc2hhcmVkXG4gKiAgICAgYmV0d2VlbiBhbGwgZGlyZWN0aXZlIGNvbXBpbGUgZnVuY3Rpb25zLlxuICpcbiAqICAgKiBgdHJhbnNjbHVkZWAgLSAgWypERVBSRUNBVEVEKiFdIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uOiBgZnVuY3Rpb24oc2NvcGUsIGNsb25lTGlua2luZ0ZuKWBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipOb3RlOioqIFRoZSB0ZW1wbGF0ZSBpbnN0YW5jZSBhbmQgdGhlIGxpbmsgaW5zdGFuY2UgbWF5IGJlIGRpZmZlcmVudCBvYmplY3RzIGlmIHRoZSB0ZW1wbGF0ZSBoYXNcbiAqIGJlZW4gY2xvbmVkLiBGb3IgdGhpcyByZWFzb24gaXQgaXMgKipub3QqKiBzYWZlIHRvIGRvIGFueXRoaW5nIG90aGVyIHRoYW4gRE9NIHRyYW5zZm9ybWF0aW9ucyB0aGF0XG4gKiBhcHBseSB0byBhbGwgY2xvbmVkIERPTSBub2RlcyB3aXRoaW4gdGhlIGNvbXBpbGUgZnVuY3Rpb24uIFNwZWNpZmljYWxseSwgRE9NIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxuICogc2hvdWxkIGJlIGRvbmUgaW4gYSBsaW5raW5nIGZ1bmN0aW9uIHJhdGhlciB0aGFuIGluIGEgY29tcGlsZSBmdW5jdGlvbi5cbiAqIDwvZGl2PlxuXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipOb3RlOioqIFRoZSBjb21waWxlIGZ1bmN0aW9uIGNhbm5vdCBoYW5kbGUgZGlyZWN0aXZlcyB0aGF0IHJlY3Vyc2l2ZWx5IHVzZSB0aGVtc2VsdmVzIGluIHRoZWlyXG4gKiBvd24gdGVtcGxhdGVzIG9yIGNvbXBpbGUgZnVuY3Rpb25zLiBDb21waWxpbmcgdGhlc2UgZGlyZWN0aXZlcyByZXN1bHRzIGluIGFuIGluZmluaXRlIGxvb3AgYW5kXG4gKiBzdGFjayBvdmVyZmxvdyBlcnJvcnMuXG4gKlxuICogVGhpcyBjYW4gYmUgYXZvaWRlZCBieSBtYW51YWxseSB1c2luZyAkY29tcGlsZSBpbiB0aGUgcG9zdExpbmsgZnVuY3Rpb24gdG8gaW1wZXJhdGl2ZWx5IGNvbXBpbGVcbiAqIGEgZGlyZWN0aXZlJ3MgdGVtcGxhdGUgaW5zdGVhZCBvZiByZWx5aW5nIG9uIGF1dG9tYXRpYyB0ZW1wbGF0ZSBjb21waWxhdGlvbiB2aWEgYHRlbXBsYXRlYCBvclxuICogYHRlbXBsYXRlVXJsYCBkZWNsYXJhdGlvbiBvciBtYW51YWwgY29tcGlsYXRpb24gaW5zaWRlIHRoZSBjb21waWxlIGZ1bmN0aW9uLlxuICogPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiPlxuICogKipOb3RlOioqIFRoZSBgdHJhbnNjbHVkZWAgZnVuY3Rpb24gdGhhdCBpcyBwYXNzZWQgdG8gdGhlIGNvbXBpbGUgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCwgYXMgaXRcbiAqICAgZS5nLiBkb2VzIG5vdCBrbm93IGFib3V0IHRoZSByaWdodCBvdXRlciBzY29wZS4gUGxlYXNlIHVzZSB0aGUgdHJhbnNjbHVkZSBmdW5jdGlvbiB0aGF0IGlzIHBhc3NlZFxuICogICB0byB0aGUgbGluayBmdW5jdGlvbiBpbnN0ZWFkLlxuICogPC9kaXY+XG5cbiAqIEEgY29tcGlsZSBmdW5jdGlvbiBjYW4gaGF2ZSBhIHJldHVybiB2YWx1ZSB3aGljaCBjYW4gYmUgZWl0aGVyIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0LlxuICpcbiAqICogcmV0dXJuaW5nIGEgKHBvc3QtbGluaykgZnVuY3Rpb24gLSBpcyBlcXVpdmFsZW50IHRvIHJlZ2lzdGVyaW5nIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHZpYSB0aGVcbiAqICAgYGxpbmtgIHByb3BlcnR5IG9mIHRoZSBjb25maWcgb2JqZWN0IHdoZW4gdGhlIGNvbXBpbGUgZnVuY3Rpb24gaXMgZW1wdHkuXG4gKlxuICogKiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggZnVuY3Rpb24ocykgcmVnaXN0ZXJlZCB2aWEgYHByZWAgYW5kIGBwb3N0YCBwcm9wZXJ0aWVzIC0gYWxsb3dzIHlvdSB0b1xuICogICBjb250cm9sIHdoZW4gYSBsaW5raW5nIGZ1bmN0aW9uIHNob3VsZCBiZSBjYWxsZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLiBTZWUgaW5mbyBhYm91dFxuICogICBwcmUtbGlua2luZyBhbmQgcG9zdC1saW5raW5nIGZ1bmN0aW9ucyBiZWxvdy5cbiAqXG4gKlxuICogIyMjIyBgbGlua2BcbiAqIFRoaXMgcHJvcGVydHkgaXMgdXNlZCBvbmx5IGlmIHRoZSBgY29tcGlsZWAgcHJvcGVydHkgaXMgbm90IGRlZmluZWQuXG4gKlxuICogYGBganNcbiAqICAgZnVuY3Rpb24gbGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlciwgdHJhbnNjbHVkZUZuKSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBUaGUgbGluayBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgcmVnaXN0ZXJpbmcgRE9NIGxpc3RlbmVycyBhcyB3ZWxsIGFzIHVwZGF0aW5nIHRoZSBET00uIEl0IGlzXG4gKiBleGVjdXRlZCBhZnRlciB0aGUgdGVtcGxhdGUgaGFzIGJlZW4gY2xvbmVkLiBUaGlzIGlzIHdoZXJlIG1vc3Qgb2YgdGhlIGRpcmVjdGl2ZSBsb2dpYyB3aWxsIGJlXG4gKiBwdXQuXG4gKlxuICogICAqIGBzY29wZWAgLSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBTY29wZX0gLSBUaGUgc2NvcGUgdG8gYmUgdXNlZCBieSB0aGVcbiAqICAgICBkaXJlY3RpdmUgZm9yIHJlZ2lzdGVyaW5nIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVzfS5cbiAqXG4gKiAgICogYGlFbGVtZW50YCAtIGluc3RhbmNlIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB3aGVyZSB0aGUgZGlyZWN0aXZlIGlzIHRvIGJlIHVzZWQuIEl0IGlzIHNhZmUgdG9cbiAqICAgICBtYW5pcHVsYXRlIHRoZSBjaGlsZHJlbiBvZiB0aGUgZWxlbWVudCBvbmx5IGluIGBwb3N0TGlua2AgZnVuY3Rpb24gc2luY2UgdGhlIGNoaWxkcmVuIGhhdmVcbiAqICAgICBhbHJlYWR5IGJlZW4gbGlua2VkLlxuICpcbiAqICAgKiBgaUF0dHJzYCAtIGluc3RhbmNlIGF0dHJpYnV0ZXMgLSBOb3JtYWxpemVkIGxpc3Qgb2YgYXR0cmlidXRlcyBkZWNsYXJlZCBvbiB0aGlzIGVsZW1lbnQgc2hhcmVkXG4gKiAgICAgYmV0d2VlbiBhbGwgZGlyZWN0aXZlIGxpbmtpbmcgZnVuY3Rpb25zLlxuICpcbiAqICAgKiBgY29udHJvbGxlcmAgLSB0aGUgZGlyZWN0aXZlJ3MgcmVxdWlyZWQgY29udHJvbGxlciBpbnN0YW5jZShzKSAtIEluc3RhbmNlcyBhcmUgc2hhcmVkXG4gKiAgICAgYW1vbmcgYWxsIGRpcmVjdGl2ZXMsIHdoaWNoIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byB1c2UgdGhlIGNvbnRyb2xsZXJzIGFzIGEgY29tbXVuaWNhdGlvblxuICogICAgIGNoYW5uZWwuIFRoZSBleGFjdCB2YWx1ZSBkZXBlbmRzIG9uIHRoZSBkaXJlY3RpdmUncyBgcmVxdWlyZWAgcHJvcGVydHk6XG4gKiAgICAgICAqIG5vIGNvbnRyb2xsZXIocykgcmVxdWlyZWQ6IHRoZSBkaXJlY3RpdmUncyBvd24gY29udHJvbGxlciwgb3IgYHVuZGVmaW5lZGAgaWYgaXQgZG9lc24ndCBoYXZlIG9uZVxuICogICAgICAgKiBgc3RyaW5nYDogdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2VcbiAqICAgICAgICogYGFycmF5YDogYXJyYXkgb2YgY29udHJvbGxlciBpbnN0YW5jZXNcbiAqXG4gKiAgICAgSWYgYSByZXF1aXJlZCBjb250cm9sbGVyIGNhbm5vdCBiZSBmb3VuZCwgYW5kIGl0IGlzIG9wdGlvbmFsLCB0aGUgaW5zdGFuY2UgaXMgYG51bGxgLFxuICogICAgIG90aGVyd2lzZSB0aGUge0BsaW5rIGVycm9yOiRjb21waWxlOmN0cmVxIE1pc3NpbmcgUmVxdWlyZWQgQ29udHJvbGxlcn0gZXJyb3IgaXMgdGhyb3duLlxuICpcbiAqICAgICBOb3RlIHRoYXQgeW91IGNhbiBhbHNvIHJlcXVpcmUgdGhlIGRpcmVjdGl2ZSdzIG93biBjb250cm9sbGVyIC0gaXQgd2lsbCBiZSBtYWRlIGF2YWlsYWJsZSBsaWtlXG4gKiAgICAgYW55IG90aGVyIGNvbnRyb2xsZXIuXG4gKlxuICogICAqIGB0cmFuc2NsdWRlRm5gIC0gQSB0cmFuc2NsdWRlIGxpbmtpbmcgZnVuY3Rpb24gcHJlLWJvdW5kIHRvIHRoZSBjb3JyZWN0IHRyYW5zY2x1c2lvbiBzY29wZS5cbiAqICAgICBUaGlzIGlzIHRoZSBzYW1lIGFzIHRoZSBgJHRyYW5zY2x1ZGVgIHBhcmFtZXRlciBvZiBkaXJlY3RpdmUgY29udHJvbGxlcnMsXG4gKiAgICAgc2VlIHtAbGluayBuZy4kY29tcGlsZSMtY29udHJvbGxlci0gdGhlIGNvbnRyb2xsZXIgc2VjdGlvbiBmb3IgZGV0YWlsc30uXG4gKiAgICAgYGZ1bmN0aW9uKFtzY29wZV0sIGNsb25lTGlua2luZ0ZuLCBmdXR1cmVQYXJlbnRFbGVtZW50KWAuXG4gKlxuICogIyMjIyBQcmUtbGlua2luZyBmdW5jdGlvblxuICpcbiAqIEV4ZWN1dGVkIGJlZm9yZSB0aGUgY2hpbGQgZWxlbWVudHMgYXJlIGxpbmtlZC4gTm90IHNhZmUgdG8gZG8gRE9NIHRyYW5zZm9ybWF0aW9uIHNpbmNlIHRoZVxuICogY29tcGlsZXIgbGlua2luZyBmdW5jdGlvbiB3aWxsIGZhaWwgdG8gbG9jYXRlIHRoZSBjb3JyZWN0IGVsZW1lbnRzIGZvciBsaW5raW5nLlxuICpcbiAqICMjIyMgUG9zdC1saW5raW5nIGZ1bmN0aW9uXG4gKlxuICogRXhlY3V0ZWQgYWZ0ZXIgdGhlIGNoaWxkIGVsZW1lbnRzIGFyZSBsaW5rZWQuXG4gKlxuICogTm90ZSB0aGF0IGNoaWxkIGVsZW1lbnRzIHRoYXQgY29udGFpbiBgdGVtcGxhdGVVcmxgIGRpcmVjdGl2ZXMgd2lsbCBub3QgaGF2ZSBiZWVuIGNvbXBpbGVkXG4gKiBhbmQgbGlua2VkIHNpbmNlIHRoZXkgYXJlIHdhaXRpbmcgZm9yIHRoZWlyIHRlbXBsYXRlIHRvIGxvYWQgYXN5bmNocm9ub3VzbHkgYW5kIHRoZWlyIG93blxuICogY29tcGlsYXRpb24gYW5kIGxpbmtpbmcgaGFzIGJlZW4gc3VzcGVuZGVkIHVudGlsIHRoYXQgb2NjdXJzLlxuICpcbiAqIEl0IGlzIHNhZmUgdG8gZG8gRE9NIHRyYW5zZm9ybWF0aW9uIGluIHRoZSBwb3N0LWxpbmtpbmcgZnVuY3Rpb24gb24gZWxlbWVudHMgdGhhdCBhcmUgbm90IHdhaXRpbmdcbiAqIGZvciB0aGVpciBhc3luYyB0ZW1wbGF0ZXMgdG8gYmUgcmVzb2x2ZWQuXG4gKlxuICpcbiAqICMjIyBUcmFuc2NsdXNpb25cbiAqXG4gKiBUcmFuc2NsdXNpb24gaXMgdGhlIHByb2Nlc3Mgb2YgZXh0cmFjdGluZyBhIGNvbGxlY3Rpb24gb2YgRE9NIGVsZW1lbnRzIGZyb20gb25lIHBhcnQgb2YgdGhlIERPTSBhbmRcbiAqIGNvcHlpbmcgdGhlbSB0byBhbm90aGVyIHBhcnQgb2YgdGhlIERPTSwgd2hpbGUgbWFpbnRhaW5pbmcgdGhlaXIgY29ubmVjdGlvbiB0byB0aGUgb3JpZ2luYWwgQW5ndWxhckpTXG4gKiBzY29wZSBmcm9tIHdoZXJlIHRoZXkgd2VyZSB0YWtlbi5cbiAqXG4gKiBUcmFuc2NsdXNpb24gaXMgdXNlZCAob2Z0ZW4gd2l0aCB7QGxpbmsgbmdUcmFuc2NsdWRlfSkgdG8gaW5zZXJ0IHRoZVxuICogb3JpZ2luYWwgY29udGVudHMgb2YgYSBkaXJlY3RpdmUncyBlbGVtZW50IGludG8gYSBzcGVjaWZpZWQgcGxhY2UgaW4gdGhlIHRlbXBsYXRlIG9mIHRoZSBkaXJlY3RpdmUuXG4gKiBUaGUgYmVuZWZpdCBvZiB0cmFuc2NsdXNpb24sIG92ZXIgc2ltcGx5IG1vdmluZyB0aGUgRE9NIGVsZW1lbnRzIG1hbnVhbGx5LCBpcyB0aGF0IHRoZSB0cmFuc2NsdWRlZFxuICogY29udGVudCBoYXMgYWNjZXNzIHRvIHRoZSBwcm9wZXJ0aWVzIG9uIHRoZSBzY29wZSBmcm9tIHdoaWNoIGl0IHdhcyB0YWtlbiwgZXZlbiBpZiB0aGUgZGlyZWN0aXZlXG4gKiBoYXMgaXNvbGF0ZWQgc2NvcGUuXG4gKiBTZWUgdGhlIHtAbGluayBndWlkZS9kaXJlY3RpdmUjY3JlYXRpbmctYS1kaXJlY3RpdmUtdGhhdC13cmFwcy1vdGhlci1lbGVtZW50cyBEaXJlY3RpdmVzIEd1aWRlfS5cbiAqXG4gKiBUaGlzIG1ha2VzIGl0IHBvc3NpYmxlIGZvciB0aGUgd2lkZ2V0IHRvIGhhdmUgcHJpdmF0ZSBzdGF0ZSBmb3IgaXRzIHRlbXBsYXRlLCB3aGlsZSB0aGUgdHJhbnNjbHVkZWRcbiAqIGNvbnRlbnQgaGFzIGFjY2VzcyB0byBpdHMgb3JpZ2luYXRpbmcgc2NvcGUuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBXaGVuIHRlc3RpbmcgYW4gZWxlbWVudCB0cmFuc2NsdWRlIGRpcmVjdGl2ZSB5b3UgbXVzdCBub3QgcGxhY2UgdGhlIGRpcmVjdGl2ZSBhdCB0aGUgcm9vdCBvZiB0aGVcbiAqIERPTSBmcmFnbWVudCB0aGF0IGlzIGJlaW5nIGNvbXBpbGVkLiBTZWUge0BsaW5rIGd1aWRlL3VuaXQtdGVzdGluZyN0ZXN0aW5nLXRyYW5zY2x1c2lvbi1kaXJlY3RpdmVzXG4gKiBUZXN0aW5nIFRyYW5zY2x1c2lvbiBEaXJlY3RpdmVzfS5cbiAqIDwvZGl2PlxuICpcbiAqIFRoZXJlIGFyZSB0aHJlZSBraW5kcyBvZiB0cmFuc2NsdXNpb24gZGVwZW5kaW5nIHVwb24gd2hldGhlciB5b3Ugd2FudCB0byB0cmFuc2NsdWRlIGp1c3QgdGhlIGNvbnRlbnRzIG9mIHRoZVxuICogZGlyZWN0aXZlJ3MgZWxlbWVudCwgdGhlIGVudGlyZSBlbGVtZW50IG9yIG11bHRpcGxlIHBhcnRzIG9mIHRoZSBlbGVtZW50IGNvbnRlbnRzOlxuICpcbiAqICogYHRydWVgIC0gdHJhbnNjbHVkZSB0aGUgY29udGVudCAoaS5lLiB0aGUgY2hpbGQgbm9kZXMpIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50LlxuICogKiBgJ2VsZW1lbnQnYCAtIHRyYW5zY2x1ZGUgdGhlIHdob2xlIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50IGluY2x1ZGluZyBhbnkgZGlyZWN0aXZlcyBvbiB0aGlzXG4gKiAgIGVsZW1lbnQgdGhhdCBkZWZpbmVkIGF0IGEgbG93ZXIgcHJpb3JpdHkgdGhhbiB0aGlzIGRpcmVjdGl2ZS4gV2hlbiB1c2VkLCB0aGUgYHRlbXBsYXRlYFxuICogICBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICogKiAqKmB7Li4ufWAgKGFuIG9iamVjdCBoYXNoKToqKiAtIG1hcCBlbGVtZW50cyBvZiB0aGUgY29udGVudCBvbnRvIHRyYW5zY2x1c2lvbiBcInNsb3RzXCIgaW4gdGhlIHRlbXBsYXRlLlxuICpcbiAqICoqTXVsdC1zbG90IHRyYW5zY2x1c2lvbioqIGlzIGRlY2xhcmVkIGJ5IHByb3ZpZGluZyBhbiBvYmplY3QgZm9yIHRoZSBgdHJhbnNjbHVkZWAgcHJvcGVydHkuXG4gKlxuICogVGhpcyBvYmplY3QgaXMgYSBtYXAgd2hlcmUgdGhlIGtleXMgYXJlIHRoZSBuYW1lIG9mIHRoZSBzbG90IHRvIGZpbGwgYW5kIHRoZSB2YWx1ZSBpcyBhbiBlbGVtZW50IHNlbGVjdG9yXG4gKiB1c2VkIHRvIG1hdGNoIHRoZSBIVE1MIHRvIHRoZSBzbG90LiBUaGUgZWxlbWVudCBzZWxlY3RvciBzaG91bGQgYmUgaW4gbm9ybWFsaXplZCBmb3JtIChlLmcuIGBteUVsZW1lbnRgKVxuICogYW5kIHdpbGwgbWF0Y2ggdGhlIHN0YW5kYXJkIGVsZW1lbnQgdmFyaWFudHMgKGUuZy4gYG15LWVsZW1lbnRgLCBgbXk6ZWxlbWVudGAsIGBkYXRhLW15LWVsZW1lbnRgLCBldGMpLlxuICpcbiAqIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uIGNoZWNrIG91dCB0aGUgZ3VpZGUgb24ge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSNtYXRjaGluZy1kaXJlY3RpdmVzIE1hdGNoaW5nIERpcmVjdGl2ZXN9XG4gKlxuICogSWYgdGhlIGVsZW1lbnQgc2VsZWN0b3IgaXMgcHJlZml4ZWQgd2l0aCBhIGA/YCB0aGVuIHRoYXQgc2xvdCBpcyBvcHRpb25hbC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgdGhlIHRyYW5zY2x1ZGUgb2JqZWN0IGB7IHNsb3RBOiAnP215Q3VzdG9tRWxlbWVudCcgfWAgbWFwcyBgPG15LWN1c3RvbS1lbGVtZW50PmAgZWxlbWVudHMgdG9cbiAqIHRoZSBgc2xvdEFgIHNsb3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCB2aWEgdGhlIGAkdHJhbnNjbHVkZWAgZnVuY3Rpb24gb3IgdmlhIHRoZSB7QGxpbmsgbmdUcmFuc2NsdWRlfSBkaXJlY3RpdmUuXG4gKlxuICogU2xvdHMgdGhhdCBhcmUgbm90IG1hcmtlZCBhcyBvcHRpb25hbCAoYD9gKSB3aWxsIHRyaWdnZXIgYSBjb21waWxlIHRpbWUgZXJyb3IgaWYgdGhlcmUgYXJlIG5vIG1hdGNoaW5nIGVsZW1lbnRzXG4gKiBpbiB0aGUgdHJhbnNjbHVkZSBjb250ZW50LiBJZiB5b3Ugd2lzaCB0byBrbm93IGlmIGFuIG9wdGlvbmFsIHNsb3Qgd2FzIGZpbGxlZCB3aXRoIGNvbnRlbnQsIHRoZW4geW91IGNhbiBjYWxsXG4gKiBgJHRyYW5zY2x1ZGUuaXNTbG90RmlsbGVkKHNsb3ROYW1lKWAgb24gdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gcGFzc2VkIHRvIHRoZSBkaXJlY3RpdmUncyBsaW5rIGZ1bmN0aW9uIGFuZFxuICogaW5qZWN0YWJsZSBpbnRvIHRoZSBkaXJlY3RpdmUncyBjb250cm9sbGVyLlxuICpcbiAqXG4gKiAjIyMjIFRyYW5zY2x1c2lvbiBGdW5jdGlvbnNcbiAqXG4gKiBXaGVuIGEgZGlyZWN0aXZlIHJlcXVlc3RzIHRyYW5zY2x1c2lvbiwgdGhlIGNvbXBpbGVyIGV4dHJhY3RzIGl0cyBjb250ZW50cyBhbmQgcHJvdmlkZXMgYSAqKnRyYW5zY2x1c2lvblxuICogZnVuY3Rpb24qKiB0byB0aGUgZGlyZWN0aXZlJ3MgYGxpbmtgIGZ1bmN0aW9uIGFuZCBgY29udHJvbGxlcmAuIFRoaXMgdHJhbnNjbHVzaW9uIGZ1bmN0aW9uIGlzIGEgc3BlY2lhbFxuICogKipsaW5raW5nIGZ1bmN0aW9uKiogdGhhdCB3aWxsIHJldHVybiB0aGUgY29tcGlsZWQgY29udGVudHMgbGlua2VkIHRvIGEgbmV3IHRyYW5zY2x1c2lvbiBzY29wZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogSWYgeW91IGFyZSBqdXN0IHVzaW5nIHtAbGluayBuZ1RyYW5zY2x1ZGV9IHRoZW4geW91IGRvbid0IG5lZWQgdG8gd29ycnkgYWJvdXQgdGhpcyBmdW5jdGlvbiwgc2luY2VcbiAqIG5nVHJhbnNjbHVkZSB3aWxsIGRlYWwgd2l0aCBpdCBmb3IgdXMuXG4gKiA8L2Rpdj5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byBtYW51YWxseSBjb250cm9sIHRoZSBpbnNlcnRpb24gYW5kIHJlbW92YWwgb2YgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaW4geW91ciBkaXJlY3RpdmVcbiAqIHRoZW4geW91IG11c3QgdXNlIHRoaXMgdHJhbnNjbHVkZSBmdW5jdGlvbi4gV2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1ZGUgZnVuY3Rpb24gaXQgcmV0dXJucyBhIGEganFMaXRlL0pRdWVyeVxuICogb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGNvbXBpbGVkIERPTSwgd2hpY2ggaXMgbGlua2VkIHRvIHRoZSBjb3JyZWN0IHRyYW5zY2x1c2lvbiBzY29wZS5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIGEgdHJhbnNjbHVzaW9uIGZ1bmN0aW9uIHlvdSBjYW4gcGFzcyBpbiBhICoqY2xvbmUgYXR0YWNoIGZ1bmN0aW9uKiouIFRoaXMgZnVuY3Rpb24gYWNjZXB0c1xuICogdHdvIHBhcmFtZXRlcnMsIGBmdW5jdGlvbihjbG9uZSwgc2NvcGUpIHsgLi4uIH1gLCB3aGVyZSB0aGUgYGNsb25lYCBpcyBhIGZyZXNoIGNvbXBpbGVkIGNvcHkgb2YgeW91ciB0cmFuc2NsdWRlZFxuICogY29udGVudCBhbmQgdGhlIGBzY29wZWAgaXMgdGhlIG5ld2x5IGNyZWF0ZWQgdHJhbnNjbHVzaW9uIHNjb3BlLCB3aGljaCB0aGUgY2xvbmUgd2lsbCBiZSBsaW5rZWQgdG8uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICoqQmVzdCBQcmFjdGljZSoqOiBBbHdheXMgcHJvdmlkZSBhIGBjbG9uZUZuYCAoY2xvbmUgYXR0YWNoIGZ1bmN0aW9uKSB3aGVuIHlvdSBjYWxsIGEgdHJhbnNjbHVkZSBmdW5jdGlvblxuICogc2luY2UgeW91IHRoZW4gZ2V0IGEgZnJlc2ggY2xvbmUgb2YgdGhlIG9yaWdpbmFsIERPTSBhbmQgYWxzbyBoYXZlIGFjY2VzcyB0byB0aGUgbmV3IHRyYW5zY2x1c2lvbiBzY29wZS5cbiAqIDwvZGl2PlxuICpcbiAqIEl0IGlzIG5vcm1hbCBwcmFjdGljZSB0byBhdHRhY2ggeW91ciB0cmFuc2NsdWRlZCBjb250ZW50IChgY2xvbmVgKSB0byB0aGUgRE9NIGluc2lkZSB5b3VyICoqY2xvbmVcbiAqIGF0dGFjaCBmdW5jdGlvbioqOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgdHJhbnNjbHVkZWRDb250ZW50LCB0cmFuc2NsdXNpb25TY29wZTtcbiAqXG4gKiAkdHJhbnNjbHVkZShmdW5jdGlvbihjbG9uZSwgc2NvcGUpIHtcbiAqICAgZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xuICogICB0cmFuc2NsdWRlZENvbnRlbnQgPSBjbG9uZTtcbiAqICAgdHJhbnNjbHVzaW9uU2NvcGUgPSBzY29wZTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogTGF0ZXIsIGlmIHlvdSB3YW50IHRvIHJlbW92ZSB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBmcm9tIHlvdXIgRE9NIHRoZW4geW91IHNob3VsZCBhbHNvIGRlc3Ryb3kgdGhlXG4gKiBhc3NvY2lhdGVkIHRyYW5zY2x1c2lvbiBzY29wZTpcbiAqXG4gKiBgYGBqc1xuICogdHJhbnNjbHVkZWRDb250ZW50LnJlbW92ZSgpO1xuICogdHJhbnNjbHVzaW9uU2NvcGUuJGRlc3Ryb3koKTtcbiAqIGBgYFxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKkJlc3QgUHJhY3RpY2UqKjogaWYgeW91IGludGVuZCB0byBhZGQgYW5kIHJlbW92ZSB0cmFuc2NsdWRlZCBjb250ZW50IG1hbnVhbGx5IGluIHlvdXIgZGlyZWN0aXZlXG4gKiAoYnkgY2FsbGluZyB0aGUgdHJhbnNjbHVkZSBmdW5jdGlvbiB0byBnZXQgdGhlIERPTSBhbmQgY2FsbGluZyBgZWxlbWVudC5yZW1vdmUoKWAgdG8gcmVtb3ZlIGl0KSxcbiAqIHRoZW4geW91IGFyZSBhbHNvIHJlc3BvbnNpYmxlIGZvciBjYWxsaW5nIGAkZGVzdHJveWAgb24gdGhlIHRyYW5zY2x1c2lvbiBzY29wZS5cbiAqIDwvZGl2PlxuICpcbiAqIFRoZSBidWlsdC1pbiBET00gbWFuaXB1bGF0aW9uIGRpcmVjdGl2ZXMsIHN1Y2ggYXMge0BsaW5rIG5nSWZ9LCB7QGxpbmsgbmdTd2l0Y2h9IGFuZCB7QGxpbmsgbmdSZXBlYXR9XG4gKiBhdXRvbWF0aWNhbGx5IGRlc3Ryb3kgdGhlaXIgdHJhbnNjbHVkZWQgY2xvbmVzIGFzIG5lY2Vzc2FyeSBzbyB5b3UgZG8gbm90IG5lZWQgdG8gd29ycnkgYWJvdXQgdGhpcyBpZlxuICogeW91IGFyZSBzaW1wbHkgdXNpbmcge0BsaW5rIG5nVHJhbnNjbHVkZX0gdG8gaW5qZWN0IHRoZSB0cmFuc2NsdXNpb24gaW50byB5b3VyIGRpcmVjdGl2ZS5cbiAqXG4gKlxuICogIyMjIyBUcmFuc2NsdXNpb24gU2NvcGVzXG4gKlxuICogV2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1ZGUgZnVuY3Rpb24gaXQgcmV0dXJucyBhIERPTSBmcmFnbWVudCB0aGF0IGlzIHByZS1ib3VuZCB0byBhICoqdHJhbnNjbHVzaW9uXG4gKiBzY29wZSoqLiBUaGlzIHNjb3BlIGlzIHNwZWNpYWwsIGluIHRoYXQgaXQgaXMgYSBjaGlsZCBvZiB0aGUgZGlyZWN0aXZlJ3Mgc2NvcGUgKGFuZCBzbyBnZXRzIGRlc3Ryb3llZFxuICogd2hlbiB0aGUgZGlyZWN0aXZlJ3Mgc2NvcGUgZ2V0cyBkZXN0cm95ZWQpIGJ1dCBpdCBpbmhlcml0cyB0aGUgcHJvcGVydGllcyBvZiB0aGUgc2NvcGUgZnJvbSB3aGljaCBpdFxuICogd2FzIHRha2VuLlxuICpcbiAqIEZvciBleGFtcGxlIGNvbnNpZGVyIGEgZGlyZWN0aXZlIHRoYXQgdXNlcyB0cmFuc2NsdXNpb24gYW5kIGlzb2xhdGVkIHNjb3BlLiBUaGUgRE9NIGhpZXJhcmNoeSBtaWdodCBsb29rXG4gKiBsaWtlIHRoaXM6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1hcHA+XG4gKiAgIDxkaXYgaXNvbGF0ZT5cbiAqICAgICA8ZGl2IHRyYW5zY2x1c2lvbj5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIFRoZSBgJHBhcmVudGAgc2NvcGUgaGllcmFyY2h5IHdpbGwgbG9vayBsaWtlIHRoaXM6XG4gKlxuICAgYGBgXG4gICAtICRyb290U2NvcGVcbiAgICAgLSBpc29sYXRlXG4gICAgICAgLSB0cmFuc2NsdXNpb25cbiAgIGBgYFxuICpcbiAqIGJ1dCB0aGUgc2NvcGVzIHdpbGwgaW5oZXJpdCBwcm90b3R5cGljYWxseSBmcm9tIGRpZmZlcmVudCBzY29wZXMgdG8gdGhlaXIgYCRwYXJlbnRgLlxuICpcbiAgIGBgYFxuICAgLSAkcm9vdFNjb3BlXG4gICAgIC0gdHJhbnNjbHVzaW9uXG4gICAtIGlzb2xhdGVcbiAgIGBgYFxuICpcbiAqXG4gKiAjIyMgQXR0cmlidXRlc1xuICpcbiAqIFRoZSB7QGxpbmsgbmcuJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMgQXR0cmlidXRlc30gb2JqZWN0IC0gcGFzc2VkIGFzIGEgcGFyYW1ldGVyIGluIHRoZVxuICogYGxpbmsoKWAgb3IgYGNvbXBpbGUoKWAgZnVuY3Rpb25zLiBJdCBoYXMgYSB2YXJpZXR5IG9mIHVzZXMuXG4gKlxuICogKiAqQWNjZXNzaW5nIG5vcm1hbGl6ZWQgYXR0cmlidXRlIG5hbWVzOiogRGlyZWN0aXZlcyBsaWtlICduZ0JpbmQnIGNhbiBiZSBleHByZXNzZWQgaW4gbWFueSB3YXlzOlxuICogICAnbmc6YmluZCcsIGBkYXRhLW5nLWJpbmRgLCBvciAneC1uZy1iaW5kJy4gVGhlIGF0dHJpYnV0ZXMgb2JqZWN0IGFsbG93cyBmb3Igbm9ybWFsaXplZCBhY2Nlc3NcbiAqICAgdG8gdGhlIGF0dHJpYnV0ZXMuXG4gKlxuICogKiAqRGlyZWN0aXZlIGludGVyLWNvbW11bmljYXRpb246KiBBbGwgZGlyZWN0aXZlcyBzaGFyZSB0aGUgc2FtZSBpbnN0YW5jZSBvZiB0aGUgYXR0cmlidXRlc1xuICogICBvYmplY3Qgd2hpY2ggYWxsb3dzIHRoZSBkaXJlY3RpdmVzIHRvIHVzZSB0aGUgYXR0cmlidXRlcyBvYmplY3QgYXMgaW50ZXIgZGlyZWN0aXZlXG4gKiAgIGNvbW11bmljYXRpb24uXG4gKlxuICogKiAqU3VwcG9ydHMgaW50ZXJwb2xhdGlvbjoqIEludGVycG9sYXRpb24gYXR0cmlidXRlcyBhcmUgYXNzaWduZWQgdG8gdGhlIGF0dHJpYnV0ZSBvYmplY3RcbiAqICAgYWxsb3dpbmcgb3RoZXIgZGlyZWN0aXZlcyB0byByZWFkIHRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUuXG4gKlxuICogKiAqT2JzZXJ2aW5nIGludGVycG9sYXRlZCBhdHRyaWJ1dGVzOiogVXNlIGAkb2JzZXJ2ZWAgdG8gb2JzZXJ2ZSB0aGUgdmFsdWUgY2hhbmdlcyBvZiBhdHRyaWJ1dGVzXG4gKiAgIHRoYXQgY29udGFpbiBpbnRlcnBvbGF0aW9uIChlLmcuIGBzcmM9XCJ7e2Jhcn19XCJgKS4gTm90IG9ubHkgaXMgdGhpcyB2ZXJ5IGVmZmljaWVudCBidXQgaXQncyBhbHNvXG4gKiAgIHRoZSBvbmx5IHdheSB0byBlYXNpbHkgZ2V0IHRoZSBhY3R1YWwgdmFsdWUgYmVjYXVzZSBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UgdGhlIGludGVycG9sYXRpb25cbiAqICAgaGFzbid0IGJlZW4gZXZhbHVhdGVkIHlldCBhbmQgc28gdGhlIHZhbHVlIGlzIGF0IHRoaXMgdGltZSBzZXQgdG8gYHVuZGVmaW5lZGAuXG4gKlxuICogYGBganNcbiAqIGZ1bmN0aW9uIGxpbmtpbmdGbihzY29wZSwgZWxtLCBhdHRycywgY3RybCkge1xuICogICAvLyBnZXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZVxuICogICBjb25zb2xlLmxvZyhhdHRycy5uZ01vZGVsKTtcbiAqXG4gKiAgIC8vIGNoYW5nZSB0aGUgYXR0cmlidXRlXG4gKiAgIGF0dHJzLiRzZXQoJ25nTW9kZWwnLCAnbmV3IHZhbHVlJyk7XG4gKlxuICogICAvLyBvYnNlcnZlIGNoYW5nZXMgdG8gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZVxuICogICBhdHRycy4kb2JzZXJ2ZSgnbmdNb2RlbCcsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gKiAgICAgY29uc29sZS5sb2coJ25nTW9kZWwgaGFzIGNoYW5nZWQgdmFsdWUgdG8gJyArIHZhbHVlKTtcbiAqICAgfSk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiAjIyBFeGFtcGxlXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZSoqOiBUeXBpY2FsbHkgZGlyZWN0aXZlcyBhcmUgcmVnaXN0ZXJlZCB3aXRoIGBtb2R1bGUuZGlyZWN0aXZlYC4gVGhlIGV4YW1wbGUgYmVsb3cgaXNcbiAqIHRvIGlsbHVzdHJhdGUgaG93IGAkY29tcGlsZWAgd29ya3MuXG4gKiA8L2Rpdj5cbiAqXG4gPGV4YW1wbGUgbW9kdWxlPVwiY29tcGlsZUV4YW1wbGVcIiBuYW1lPVwiY29tcGlsZVwiPlxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICA8c2NyaXB0PlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2NvbXBpbGVFeGFtcGxlJywgW10sIGZ1bmN0aW9uKCRjb21waWxlUHJvdmlkZXIpIHtcbiAgICAgICAgLy8gY29uZmlndXJlIG5ldyAnY29tcGlsZScgZGlyZWN0aXZlIGJ5IHBhc3NpbmcgYSBkaXJlY3RpdmVcbiAgICAgICAgLy8gZmFjdG9yeSBmdW5jdGlvbi4gVGhlIGZhY3RvcnkgZnVuY3Rpb24gaW5qZWN0cyB0aGUgJyRjb21waWxlJ1xuICAgICAgICAkY29tcGlsZVByb3ZpZGVyLmRpcmVjdGl2ZSgnY29tcGlsZScsIGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gICAgICAgICAgLy8gZGlyZWN0aXZlIGZhY3RvcnkgY3JlYXRlcyBhIGxpbmsgZnVuY3Rpb25cbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgIC8vIHdhdGNoIHRoZSAnY29tcGlsZScgZXhwcmVzc2lvbiBmb3IgY2hhbmdlc1xuICAgICAgICAgICAgICAgIHJldHVybiBzY29wZS4kZXZhbChhdHRycy5jb21waWxlKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSAnY29tcGlsZScgZXhwcmVzc2lvbiBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgLy8gYXNzaWduIGl0IGludG8gdGhlIGN1cnJlbnQgRE9NXG4gICAgICAgICAgICAgICAgZWxlbWVudC5odG1sKHZhbHVlKTtcblxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgdGhlIG5ldyBET00gYW5kIGxpbmsgaXQgdG8gdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAvLyBzY29wZS5cbiAgICAgICAgICAgICAgICAvLyBOT1RFOiB3ZSBvbmx5IGNvbXBpbGUgLmNoaWxkTm9kZXMgc28gdGhhdFxuICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IGdldCBpbnRvIGluZmluaXRlIGxvb3AgY29tcGlsaW5nIG91cnNlbHZlc1xuICAgICAgICAgICAgICAgICRjb21waWxlKGVsZW1lbnQuY29udGVudHMoKSkoc2NvcGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jb250cm9sbGVyKCdHcmVldGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5uYW1lID0gJ0FuZ3VsYXJKUyc7XG4gICAgICAgICRzY29wZS5odG1sID0gJ0hlbGxvIHt7bmFtZX19JztcbiAgICAgIH1dKTtcbiAgICA8L3NjcmlwdD5cbiAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHcmVldGVyQ29udHJvbGxlclwiPlxuICAgICAgPGlucHV0IG5nLW1vZGVsPVwibmFtZVwiPiA8YnIvPlxuICAgICAgPHRleHRhcmVhIG5nLW1vZGVsPVwiaHRtbFwiPjwvdGV4dGFyZWE+IDxici8+XG4gICAgICA8ZGl2IGNvbXBpbGU9XCJodG1sXCI+PC9kaXY+XG4gICAgPC9kaXY+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgIGl0KCdzaG91bGQgYXV0byBjb21waWxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgdmFyIHRleHRhcmVhID0gJCgndGV4dGFyZWEnKTtcbiAgICAgICB2YXIgb3V0cHV0ID0gJCgnZGl2W2NvbXBpbGVdJyk7XG4gICAgICAgLy8gVGhlIGluaXRpYWwgc3RhdGUgcmVhZHMgJ0hlbGxvIEFuZ3VsYXJKUycuXG4gICAgICAgZXhwZWN0KG91dHB1dC5nZXRUZXh0KCkpLnRvQmUoJ0hlbGxvIEFuZ3VsYXJKUycpO1xuICAgICAgIHRleHRhcmVhLmNsZWFyKCk7XG4gICAgICAgdGV4dGFyZWEuc2VuZEtleXMoJ3t7bmFtZX19IScpO1xuICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0JlKCdBbmd1bGFySlMhJyk7XG4gICAgIH0pO1xuICAgPC9maWxlPlxuIDwvZXhhbXBsZT5cblxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xET01FbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgb3IgSFRNTCBzdHJpbmcgdG8gY29tcGlsZSBpbnRvIGEgdGVtcGxhdGUgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGFuZ3VsYXIuU2NvcGUsIGNsb25lQXR0YWNoRm49KX0gdHJhbnNjbHVkZSBmdW5jdGlvbiBhdmFpbGFibGUgdG8gZGlyZWN0aXZlcyAtIERFUFJFQ0FURUQuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiPlxuICogKipOb3RlOioqIFBhc3NpbmcgYSBgdHJhbnNjbHVkZWAgZnVuY3Rpb24gdG8gdGhlICRjb21waWxlIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQsIGFzIGl0XG4gKiAgIGUuZy4gd2lsbCBub3QgdXNlIHRoZSByaWdodCBvdXRlciBzY29wZS4gUGxlYXNlIHBhc3MgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gYXMgYVxuICogICBgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm5gIHRvIHRoZSBsaW5rIGZ1bmN0aW9uIGluc3RlYWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UHJpb3JpdHkgb25seSBhcHBseSBkaXJlY3RpdmVzIGxvd2VyIHRoYW4gZ2l2ZW4gcHJpb3JpdHkgKE9ubHkgZWZmZWN0cyB0aGVcbiAqICAgICAgICAgICAgICAgICByb290IGVsZW1lbnQocyksIG5vdCB0aGVpciBjaGlsZHJlbilcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzY29wZSwgY2xvbmVBdHRhY2hGbj0sIG9wdGlvbnM9KX0gYSBsaW5rIGZ1bmN0aW9uIHdoaWNoIGlzIHVzZWQgdG8gYmluZCB0ZW1wbGF0ZVxuICogKGEgRE9NIGVsZW1lbnQvdHJlZSkgdG8gYSBzY29wZS4gV2hlcmU6XG4gKlxuICogICogYHNjb3BlYCAtIEEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IHRvIGJpbmQgdG8uXG4gKiAgKiBgY2xvbmVBdHRhY2hGbmAgLSBJZiBgY2xvbmVBdHRhY2hGbmAgaXMgcHJvdmlkZWQsIHRoZW4gdGhlIGxpbmsgZnVuY3Rpb24gd2lsbCBjbG9uZSB0aGVcbiAqICBgdGVtcGxhdGVgIGFuZCBjYWxsIHRoZSBgY2xvbmVBdHRhY2hGbmAgZnVuY3Rpb24gYWxsb3dpbmcgdGhlIGNhbGxlciB0byBhdHRhY2ggdGhlXG4gKiAgY2xvbmVkIGVsZW1lbnRzIHRvIHRoZSBET00gZG9jdW1lbnQgYXQgdGhlIGFwcHJvcHJpYXRlIHBsYWNlLiBUaGUgYGNsb25lQXR0YWNoRm5gIGlzXG4gKiAgY2FsbGVkIGFzOiA8YnIvPiBgY2xvbmVBdHRhY2hGbihjbG9uZWRFbGVtZW50LCBzY29wZSlgIHdoZXJlOlxuICpcbiAqICAgICAgKiBgY2xvbmVkRWxlbWVudGAgLSBpcyBhIGNsb25lIG9mIHRoZSBvcmlnaW5hbCBgZWxlbWVudGAgcGFzc2VkIGludG8gdGhlIGNvbXBpbGVyLlxuICogICAgICAqIGBzY29wZWAgLSBpcyB0aGUgY3VycmVudCBzY29wZSB3aXRoIHdoaWNoIHRoZSBsaW5raW5nIGZ1bmN0aW9uIGlzIHdvcmtpbmcgd2l0aC5cbiAqXG4gKiAgKiBgb3B0aW9uc2AgLSBBbiBvcHRpb25hbCBvYmplY3QgaGFzaCB3aXRoIGxpbmtpbmcgb3B0aW9ucy4gSWYgYG9wdGlvbnNgIGlzIHByb3ZpZGVkLCB0aGVuIHRoZSBmb2xsb3dpbmdcbiAqICBrZXlzIG1heSBiZSB1c2VkIHRvIGNvbnRyb2wgbGlua2luZyBiZWhhdmlvcjpcbiAqXG4gKiAgICAgICogYHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuYCAtIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIG1hZGUgYXZhaWxhYmxlIHRvXG4gKiAgICAgICAgZGlyZWN0aXZlczsgaWYgZ2l2ZW4sIGl0IHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdG8gdGhlIGxpbmsgZnVuY3Rpb25zIG9mXG4gKiAgICAgICAgZGlyZWN0aXZlcyBmb3VuZCBpbiBgZWxlbWVudGAgZHVyaW5nIGNvbXBpbGF0aW9uLlxuICogICAgICAqIGB0cmFuc2NsdWRlQ29udHJvbGxlcnNgIC0gYW4gb2JqZWN0IGhhc2ggd2l0aCBrZXlzIHRoYXQgbWFwIGNvbnRyb2xsZXIgbmFtZXNcbiAqICAgICAgICB0byBhIGhhc2ggd2l0aCB0aGUga2V5IGBpbnN0YW5jZWAsIHdoaWNoIG1hcHMgdG8gdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2U7XG4gKiAgICAgICAgaWYgZ2l2ZW4sIGl0IHdpbGwgbWFrZSB0aGUgY29udHJvbGxlcnMgYXZhaWxhYmxlIHRvIGRpcmVjdGl2ZXMgb24gdGhlIGNvbXBpbGVOb2RlOlxuICogICAgICAgIGBgYFxuICogICAgICAgIHtcbiAqICAgICAgICAgIHBhcmVudDoge1xuICogICAgICAgICAgICBpbnN0YW5jZTogcGFyZW50Q29udHJvbGxlckluc3RhbmNlXG4gKiAgICAgICAgICB9XG4gKiAgICAgICAgfVxuICogICAgICAgIGBgYFxuICogICAgICAqIGBmdXR1cmVQYXJlbnRFbGVtZW50YCAtIGRlZmluZXMgdGhlIHBhcmVudCB0byB3aGljaCB0aGUgYGNsb25lQXR0YWNoRm5gIHdpbGwgYWRkXG4gKiAgICAgICAgdGhlIGNsb25lZCBlbGVtZW50czsgb25seSBuZWVkZWQgZm9yIHRyYW5zY2x1ZGVzIHRoYXQgYXJlIGFsbG93ZWQgdG8gY29udGFpbiBub24gaHRtbFxuICogICAgICAgIGVsZW1lbnRzIChlLmcuIFNWRyBlbGVtZW50cykuIFNlZSBhbHNvIHRoZSBkaXJlY3RpdmUuY29udHJvbGxlciBwcm9wZXJ0eS5cbiAqXG4gKiBDYWxsaW5nIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHJldHVybnMgdGhlIGVsZW1lbnQgb2YgdGhlIHRlbXBsYXRlLiBJdCBpcyBlaXRoZXIgdGhlIG9yaWdpbmFsXG4gKiBlbGVtZW50IHBhc3NlZCBpbiwgb3IgdGhlIGNsb25lIG9mIHRoZSBlbGVtZW50IGlmIHRoZSBgY2xvbmVBdHRhY2hGbmAgaXMgcHJvdmlkZWQuXG4gKlxuICogQWZ0ZXIgbGlua2luZyB0aGUgdmlldyBpcyBub3QgdXBkYXRlZCB1bnRpbCBhZnRlciBhIGNhbGwgdG8gJGRpZ2VzdCB3aGljaCB0eXBpY2FsbHkgaXMgZG9uZSBieVxuICogQW5ndWxhckpTIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogSWYgeW91IG5lZWQgYWNjZXNzIHRvIHRoZSBib3VuZCB2aWV3LCB0aGVyZSBhcmUgdHdvIHdheXMgdG8gZG8gaXQ6XG4gKlxuICogLSBJZiB5b3UgYXJlIG5vdCBhc2tpbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb24gdG8gY2xvbmUgdGhlIHRlbXBsYXRlLCBjcmVhdGUgdGhlIERPTSBlbGVtZW50KHMpXG4gKiAgIGJlZm9yZSB5b3Ugc2VuZCB0aGVtIHRvIHRoZSBjb21waWxlciBhbmQga2VlcCB0aGlzIHJlZmVyZW5jZSBhcm91bmQuXG4gKiAgIGBgYGpzXG4gKiAgICAgdmFyIGVsZW1lbnQgPSAkY29tcGlsZSgnPHA+e3t0b3RhbH19PC9wPicpKHNjb3BlKTtcbiAqICAgYGBgXG4gKlxuICogLSBpZiBvbiB0aGUgb3RoZXIgaGFuZCwgeW91IG5lZWQgdGhlIGVsZW1lbnQgdG8gYmUgY2xvbmVkLCB0aGUgdmlldyByZWZlcmVuY2UgZnJvbSB0aGUgb3JpZ2luYWxcbiAqICAgZXhhbXBsZSB3b3VsZCBub3QgcG9pbnQgdG8gdGhlIGNsb25lLCBidXQgcmF0aGVyIHRvIHRoZSBvcmlnaW5hbCB0ZW1wbGF0ZSB0aGF0IHdhcyBjbG9uZWQuIEluXG4gKiAgIHRoaXMgY2FzZSwgeW91IGNhbiBhY2Nlc3MgdGhlIGNsb25lIHZpYSB0aGUgY2xvbmVBdHRhY2hGbjpcbiAqICAgYGBganNcbiAqICAgICB2YXIgdGVtcGxhdGVFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCc8cD57e3RvdGFsfX08L3A+JyksXG4gKiAgICAgICAgIHNjb3BlID0gLi4uLjtcbiAqXG4gKiAgICAgdmFyIGNsb25lZEVsZW1lbnQgPSAkY29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpKHNjb3BlLCBmdW5jdGlvbihjbG9uZWRFbGVtZW50LCBzY29wZSkge1xuICogICAgICAgLy9hdHRhY2ggdGhlIGNsb25lIHRvIERPTSBkb2N1bWVudCBhdCB0aGUgcmlnaHQgcGxhY2VcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgLy9ub3cgd2UgaGF2ZSByZWZlcmVuY2UgdG8gdGhlIGNsb25lZCBET00gdmlhIGBjbG9uZWRFbGVtZW50YFxuICogICBgYGBcbiAqXG4gKlxuICogRm9yIGluZm9ybWF0aW9uIG9uIGhvdyB0aGUgY29tcGlsZXIgd29ya3MsIHNlZSB0aGVcbiAqIHtAbGluayBndWlkZS9jb21waWxlciBBbmd1bGFySlMgSFRNTCBDb21waWxlcn0gc2VjdGlvbiBvZiB0aGUgRGV2ZWxvcGVyIEd1aWRlLlxuICpcbiAqIEBrbm93bklzc3VlXG4gKlxuICogIyMjIERvdWJsZSBDb21waWxhdGlvblxuICpcbiAgIERvdWJsZSBjb21waWxhdGlvbiBvY2N1cnMgd2hlbiBhbiBhbHJlYWR5IGNvbXBpbGVkIHBhcnQgb2YgdGhlIERPTSBnZXRzXG4gICBjb21waWxlZCBhZ2Fpbi4gVGhpcyBpcyBhbiB1bmRlc2lyZWQgZWZmZWN0IGFuZCBjYW4gbGVhZCB0byBtaXNiZWhhdmluZyBkaXJlY3RpdmVzLCBwZXJmb3JtYW5jZSBpc3N1ZXMsXG4gICBhbmQgbWVtb3J5IGxlYWtzLiBSZWZlciB0byB0aGUgQ29tcGlsZXIgR3VpZGUge0BsaW5rIGd1aWRlL2NvbXBpbGVyI2RvdWJsZS1jb21waWxhdGlvbi1hbmQtaG93LXRvLWF2b2lkLWl0XG4gICBzZWN0aW9uIG9uIGRvdWJsZSBjb21waWxhdGlvbn0gZm9yIGFuIGluLWRlcHRoIGV4cGxhbmF0aW9uIGFuZCB3YXlzIHRvIGF2b2lkIGl0LlxuXG4gKiBAa25vd25Jc3N1ZVxuXG4gICAjIyMgSXNzdWVzIHdpdGggYHJlcGxhY2U6IHRydWVgXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiPlxuICogICAqKk5vdGUqKjoge0BsaW5rICRjb21waWxlIy1yZXBsYWNlLSBgcmVwbGFjZTogdHJ1ZWB9IGlzIGRlcHJlY2F0ZWQgYW5kIG5vdCByZWNvbW1lbmRlZCB0byB1c2UsXG4gKiAgIG1haW5seSBkdWUgdG8gdGhlIGlzc3VlcyBsaXN0ZWQgaGVyZS4gSXQgaGFzIGJlZW4gY29tcGxldGVseSByZW1vdmVkIGluIHRoZSBuZXcgQW5ndWxhci5cbiAqIDwvZGl2PlxuICpcbiAqICMjIyMgQXR0cmlidXRlIHZhbHVlcyBhcmUgbm90IG1lcmdlZFxuICpcbiAqIFdoZW4gYSBgcmVwbGFjZWAgZGlyZWN0aXZlIGVuY291bnRlcnMgdGhlIHNhbWUgYXR0cmlidXRlIG9uIHRoZSBvcmlnaW5hbCBhbmQgdGhlIHJlcGxhY2Ugbm9kZSxcbiAqIGl0IHdpbGwgc2ltcGx5IGRlZHVwbGljYXRlIHRoZSBhdHRyaWJ1dGUgYW5kIGpvaW4gdGhlIHZhbHVlcyB3aXRoIGEgc3BhY2Ugb3Igd2l0aCBhIGA7YCBpbiBjYXNlIG9mXG4gKiB0aGUgYHN0eWxlYCBhdHRyaWJ1dGUuXG4gKiBgYGBodG1sXG4gKiBPcmlnaW5hbCBOb2RlOiA8c3BhbiBjbGFzcz1cIm9yaWdpbmFsXCIgc3R5bGU9XCJjb2xvcjogcmVkO1wiPjwvc3Bhbj5cbiAqIFJlcGxhY2UgVGVtcGxhdGU6IDxzcGFuIGNsYXNzPVwicmVwbGFjZWRcIiBzdHlsZT1cImJhY2tncm91bmQ6IGJsdWU7XCI+PC9zcGFuPlxuICogUmVzdWx0OiA8c3BhbiBjbGFzcz1cIm9yaWdpbmFsIHJlcGxhY2VkXCIgc3R5bGU9XCJjb2xvcjogcmVkOyBiYWNrZ3JvdW5kOiBibHVlO1wiPjwvc3Bhbj5cbiAqIGBgYFxuICpcbiAqIFRoYXQgbWVhbnMgYXR0cmlidXRlcyB0aGF0IGNvbnRhaW4gQW5ndWxhckpTIGV4cHJlc3Npb25zIHdpbGwgbm90IGJlIG1lcmdlZCBjb3JyZWN0bHksIGUuZy5cbiAqIHtAbGluayBuZ1Nob3d9IG9yIHtAbGluayBuZ0NsYXNzfSB3aWxsIGNhdXNlIGEge0BsaW5rICRwYXJzZX0gZXJyb3I6XG4gKlxuICogYGBgaHRtbFxuICogT3JpZ2luYWwgTm9kZTogPHNwYW4gbmctY2xhc3M9XCJ7J3NvbWV0aGluZyc6IHNvbWV0aGluZ31cIiBuZy1zaG93PVwiIWNvbmRpdGlvblwiPjwvc3Bhbj5cbiAqIFJlcGxhY2UgVGVtcGxhdGU6IDxzcGFuIG5nLWNsYXNzPVwieydlbHNlJzogZWxzZX1cIiBuZy1zaG93PVwib3RoZXJDb25kaXRpb25cIj48L3NwYW4+XG4gKiBSZXN1bHQ6IDxzcGFuIG5nLWNsYXNzPVwieydzb21ldGhpbmcnOiBzb21ldGhpbmd9IHsnZWxzZSc6IGVsc2V9XCIgbmctc2hvdz1cIiFjb25kaXRpb24gb3RoZXJDb25kaXRpb25cIj48L3NwYW4+XG4gKiBgYGBcbiAqXG4gKiBTZWUgaXNzdWUgWyM1Njk1XShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy81Njk1KS5cbiAqXG4gKiAjIyMjIERpcmVjdGl2ZXMgYXJlIG5vdCBkZWR1cGxpY2F0ZWQgYmVmb3JlIGNvbXBpbGF0aW9uXG4gKlxuICogV2hlbiB0aGUgb3JpZ2luYWwgbm9kZSBhbmQgdGhlIHJlcGxhY2UgdGVtcGxhdGUgZGVjbGFyZSB0aGUgc2FtZSBkaXJlY3RpdmUocyksIHRoZXkgd2lsbCBiZVxuICoge0BsaW5rIGd1aWRlL2NvbXBpbGVyI2RvdWJsZS1jb21waWxhdGlvbi1hbmQtaG93LXRvLWF2b2lkLWl0IGNvbXBpbGVkIHR3aWNlfSBiZWNhdXNlIHRoZSBjb21waWxlclxuICogZG9lcyBub3QgZGVkdXBsaWNhdGUgdGhlbS4gSW4gbWFueSBjYXNlcywgdGhpcyBpcyBub3Qgbm90aWNhYmxlLCBidXQgZS5nLiB7QGxpbmsgbmdNb2RlbH0gd2lsbFxuICogYXR0YWNoIGAkZm9ybWF0dGVyc2AgYW5kIGAkcGFyc2Vyc2AgdHdpY2UuXG4gKlxuICogU2VlIGlzc3VlIFsjMjU3M10oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMjU3MykuXG4gKlxuICogIyMjIyBgdHJhbnNjbHVkZTogZWxlbWVudGAgaW4gdGhlIHJlcGxhY2UgdGVtcGxhdGUgcm9vdCBjYW4gaGF2ZVxuICogdW5leHBlY3RlZCBlZmZlY3RzXG4gKlxuICogV2hlbiB0aGUgcmVwbGFjZSB0ZW1wbGF0ZSBoYXMgYSBkaXJlY3RpdmUgYXQgdGhlIHJvb3Qgbm9kZSB0aGF0IHVzZXNcbiAqIHtAbGluayAkY29tcGlsZSMtdHJhbnNjbHVkZS0gYHRyYW5zY2x1ZGU6IGVsZW1lbnRgfSwgZS5nLlxuICoge0BsaW5rIG5nSWZ9IG9yIHtAbGluayBuZ1JlcGVhdH0sIHRoZSBET00gc3RydWN0dXJlIG9yIHNjb3BlIGluaGVyaXRhbmNlIGNhbiBiZSBpbmNvcnJlY3QuXG4gKiBTZWUgdGhlIGZvbGxvd2luZyBpc3N1ZXM6XG4gKlxuICogLSBJbmNvcnJlY3Qgc2NvcGUgb24gcmVwbGFjZWQgZWxlbWVudDpcbiAqIFsjOTgzN10oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTgzNylcbiAqIC0gRGlmZmVyZW50IERPTSBiZXR3ZWVuIGB0ZW1wbGF0ZWAgYW5kIGB0ZW1wbGF0ZVVybGA6XG4gKiBbIzEwNjEyXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNDMyNilcbiAqXG4gKi9cblxudmFyICRjb21waWxlTWluRXJyID0gbWluRXJyKCckY29tcGlsZScpO1xuXG5mdW5jdGlvbiBVTklOSVRJQUxJWkVEX1ZBTFVFKCkge31cbnZhciBfVU5JTklUSUFMSVpFRF9WQUxVRSA9IG5ldyBVTklOSVRJQUxJWkVEX1ZBTFVFKCk7XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKi9cbiRDb21waWxlUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnLCAnJCRzYW5pdGl6ZVVyaVByb3ZpZGVyJ107XG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICRDb21waWxlUHJvdmlkZXIoJHByb3ZpZGUsICQkc2FuaXRpemVVcmlQcm92aWRlcikge1xuICB2YXIgaGFzRGlyZWN0aXZlcyA9IHt9LFxuICAgICAgU3VmZml4ID0gJ0RpcmVjdGl2ZScsXG4gICAgICBDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAgPSAvXlxccypkaXJlY3RpdmU6XFxzKihbXFx3LV0rKVxccysoLiopJC8sXG4gICAgICBDTEFTU19ESVJFQ1RJVkVfUkVHRVhQID0gLygoW1xcdy1dKykoPzo6KFteO10rKSk/Oz8pLyxcbiAgICAgIEFMTF9PUl9OT1RISU5HX0FUVFJTID0gbWFrZU1hcCgnbmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldCcpLFxuICAgICAgUkVRVUlSRV9QUkVGSVhfUkVHRVhQID0gL14oPzooXFxeXFxePyk/KFxcPyk/KFxcXlxcXj8pPyk/LztcblxuICAvLyBSZWY6IGh0dHA6Ly9kZXZlbG9wZXJzLndoYXR3Zy5vcmcvd2ViYXBwYXBpcy5odG1sI2V2ZW50LWhhbmRsZXItaWRsLWF0dHJpYnV0ZXNcbiAgLy8gVGhlIGFzc3VtcHRpb24gaXMgdGhhdCBmdXR1cmUgRE9NIGV2ZW50IGF0dHJpYnV0ZSBuYW1lcyB3aWxsIGJlZ2luIHdpdGhcbiAgLy8gJ29uJyBhbmQgYmUgY29tcG9zZWQgb2Ygb25seSBFbmdsaXNoIGxldHRlcnMuXG4gIHZhciBFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQID0gL14ob25bYS16XSt8Zm9ybWFjdGlvbikkLztcbiAgdmFyIGJpbmRpbmdDYWNoZSA9IGNyZWF0ZU1hcCgpO1xuXG4gIGZ1bmN0aW9uIHBhcnNlSXNvbGF0ZUJpbmRpbmdzKHNjb3BlLCBkaXJlY3RpdmVOYW1lLCBpc0NvbnRyb2xsZXIpIHtcbiAgICB2YXIgTE9DQUxfUkVHRVhQID0gL14oW0AmXXxbPTxdKFxcKj8pKShcXD8/KVxccyooW1xcdyRdKikkLztcblxuICAgIHZhciBiaW5kaW5ncyA9IGNyZWF0ZU1hcCgpO1xuXG4gICAgZm9yRWFjaChzY29wZSwgZnVuY3Rpb24oZGVmaW5pdGlvbiwgc2NvcGVOYW1lKSB7XG4gICAgICBkZWZpbml0aW9uID0gZGVmaW5pdGlvbi50cmltKCk7XG5cbiAgICAgIGlmIChkZWZpbml0aW9uIGluIGJpbmRpbmdDYWNoZSkge1xuICAgICAgICBiaW5kaW5nc1tzY29wZU5hbWVdID0gYmluZGluZ0NhY2hlW2RlZmluaXRpb25dO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgbWF0Y2ggPSBkZWZpbml0aW9uLm1hdGNoKExPQ0FMX1JFR0VYUCk7XG5cbiAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2lzY3AnLFxuICAgICAgICAgICAgJ0ludmFsaWQgezN9IGZvciBkaXJlY3RpdmUgXFwnezB9XFwnLicgK1xuICAgICAgICAgICAgJyBEZWZpbml0aW9uOiB7Li4uIHsxfTogXFwnezJ9XFwnIC4uLn0nLFxuICAgICAgICAgICAgZGlyZWN0aXZlTmFtZSwgc2NvcGVOYW1lLCBkZWZpbml0aW9uLFxuICAgICAgICAgICAgKGlzQ29udHJvbGxlciA/ICdjb250cm9sbGVyIGJpbmRpbmdzIGRlZmluaXRpb24nIDpcbiAgICAgICAgICAgICdpc29sYXRlIHNjb3BlIGRlZmluaXRpb24nKSk7XG4gICAgICB9XG5cbiAgICAgIGJpbmRpbmdzW3Njb3BlTmFtZV0gPSB7XG4gICAgICAgIG1vZGU6IG1hdGNoWzFdWzBdLFxuICAgICAgICBjb2xsZWN0aW9uOiBtYXRjaFsyXSA9PT0gJyonLFxuICAgICAgICBvcHRpb25hbDogbWF0Y2hbM10gPT09ICc/JyxcbiAgICAgICAgYXR0ck5hbWU6IG1hdGNoWzRdIHx8IHNjb3BlTmFtZVxuICAgICAgfTtcbiAgICAgIGlmIChtYXRjaFs0XSkge1xuICAgICAgICBiaW5kaW5nQ2FjaGVbZGVmaW5pdGlvbl0gPSBiaW5kaW5nc1tzY29wZU5hbWVdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGJpbmRpbmdzO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmVCaW5kaW5ncyhkaXJlY3RpdmUsIGRpcmVjdGl2ZU5hbWUpIHtcbiAgICB2YXIgYmluZGluZ3MgPSB7XG4gICAgICBpc29sYXRlU2NvcGU6IG51bGwsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiBudWxsXG4gICAgfTtcbiAgICBpZiAoaXNPYmplY3QoZGlyZWN0aXZlLnNjb3BlKSkge1xuICAgICAgaWYgKGRpcmVjdGl2ZS5iaW5kVG9Db250cm9sbGVyID09PSB0cnVlKSB7XG4gICAgICAgIGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXIgPSBwYXJzZUlzb2xhdGVCaW5kaW5ncyhkaXJlY3RpdmUuc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCB0cnVlKTtcbiAgICAgICAgYmluZGluZ3MuaXNvbGF0ZVNjb3BlID0ge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5kaW5ncy5pc29sYXRlU2NvcGUgPSBwYXJzZUlzb2xhdGVCaW5kaW5ncyhkaXJlY3RpdmUuc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0KGRpcmVjdGl2ZS5iaW5kVG9Db250cm9sbGVyKSkge1xuICAgICAgYmluZGluZ3MuYmluZFRvQ29udHJvbGxlciA9XG4gICAgICAgICAgcGFyc2VJc29sYXRlQmluZGluZ3MoZGlyZWN0aXZlLmJpbmRUb0NvbnRyb2xsZXIsIGRpcmVjdGl2ZU5hbWUsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoYmluZGluZ3MuYmluZFRvQ29udHJvbGxlciAmJiAhZGlyZWN0aXZlLmNvbnRyb2xsZXIpIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIGNvbnRyb2xsZXJcbiAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdub2N0cmwnLFxuICAgICAgICAgICAgJ0Nhbm5vdCBiaW5kIHRvIGNvbnRyb2xsZXIgd2l0aG91dCBkaXJlY3RpdmUgXFwnezB9XFwncyBjb250cm9sbGVyLicsXG4gICAgICAgICAgICBkaXJlY3RpdmVOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIGJpbmRpbmdzO1xuICB9XG5cbiAgZnVuY3Rpb24gYXNzZXJ0VmFsaWREaXJlY3RpdmVOYW1lKG5hbWUpIHtcbiAgICB2YXIgbGV0dGVyID0gbmFtZS5jaGFyQXQoMCk7XG4gICAgaWYgKCFsZXR0ZXIgfHwgbGV0dGVyICE9PSBsb3dlcmNhc2UobGV0dGVyKSkge1xuICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2JhZGRpcicsICdEaXJlY3RpdmUvQ29tcG9uZW50IG5hbWUgXFwnezB9XFwnIGlzIGludmFsaWQuIFRoZSBmaXJzdCBjaGFyYWN0ZXIgbXVzdCBiZSBhIGxvd2VyY2FzZSBsZXR0ZXInLCBuYW1lKTtcbiAgICB9XG4gICAgaWYgKG5hbWUgIT09IG5hbWUudHJpbSgpKSB7XG4gICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignYmFkZGlyJyxcbiAgICAgICAgICAgICdEaXJlY3RpdmUvQ29tcG9uZW50IG5hbWUgXFwnezB9XFwnIGlzIGludmFsaWQuIFRoZSBuYW1lIHNob3VsZCBub3QgY29udGFpbiBsZWFkaW5nIG9yIHRyYWlsaW5nIHdoaXRlc3BhY2VzJyxcbiAgICAgICAgICAgIG5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERpcmVjdGl2ZVJlcXVpcmUoZGlyZWN0aXZlKSB7XG4gICAgdmFyIHJlcXVpcmUgPSBkaXJlY3RpdmUucmVxdWlyZSB8fCAoZGlyZWN0aXZlLmNvbnRyb2xsZXIgJiYgZGlyZWN0aXZlLm5hbWUpO1xuXG4gICAgaWYgKCFpc0FycmF5KHJlcXVpcmUpICYmIGlzT2JqZWN0KHJlcXVpcmUpKSB7XG4gICAgICBmb3JFYWNoKHJlcXVpcmUsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gdmFsdWUubWF0Y2goUkVRVUlSRV9QUkVGSVhfUkVHRVhQKTtcbiAgICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgaWYgKCFuYW1lKSByZXF1aXJlW2tleV0gPSBtYXRjaFswXSArIGtleTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXF1aXJlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGlyZWN0aXZlUmVzdHJpY3QocmVzdHJpY3QsIG5hbWUpIHtcbiAgICBpZiAocmVzdHJpY3QgJiYgIShpc1N0cmluZyhyZXN0cmljdCkgJiYgL1tFQUNNXS8udGVzdChyZXN0cmljdCkpKSB7XG4gICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignYmFkcmVzdHJpY3QnLFxuICAgICAgICAgICdSZXN0cmljdCBwcm9wZXJ0eSBcXCd7MH1cXCcgb2YgZGlyZWN0aXZlIFxcJ3sxfVxcJyBpcyBpbnZhbGlkJyxcbiAgICAgICAgICByZXN0cmljdCxcbiAgICAgICAgICBuYW1lKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdHJpY3QgfHwgJ0VBJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZWdpc3RlciBhIG5ldyBkaXJlY3RpdmUgd2l0aCB0aGUgY29tcGlsZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBkaXJlY3RpdmUgaW4gY2FtZWwtY2FzZSAoaS5lLiA8Y29kZT5uZ0JpbmQ8L2NvZGU+IHdoaWNoXG4gICAqICAgIHdpbGwgbWF0Y2ggYXMgPGNvZGU+bmctYmluZDwvY29kZT4pLCBvciBhbiBvYmplY3QgbWFwIG9mIGRpcmVjdGl2ZXMgd2hlcmUgdGhlIGtleXMgYXJlIHRoZVxuICAgKiAgICBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGZhY3Rvcmllcy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gZGlyZWN0aXZlRmFjdG9yeSBBbiBpbmplY3RhYmxlIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uLiBTZWUgdGhlXG4gICAqICAgIHtAbGluayBndWlkZS9kaXJlY3RpdmUgZGlyZWN0aXZlIGd1aWRlfSBhbmQgdGhlIHtAbGluayAkY29tcGlsZSBjb21waWxlIEFQSX0gZm9yIG1vcmUgaW5mby5cbiAgICogQHJldHVybnMge25nLiRjb21waWxlUHJvdmlkZXJ9IFNlbGYgZm9yIGNoYWluaW5nLlxuICAgKi9cbiAgdGhpcy5kaXJlY3RpdmUgPSBmdW5jdGlvbiByZWdpc3RlckRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmVGYWN0b3J5KSB7XG4gICAgYXNzZXJ0QXJnKG5hbWUsICduYW1lJyk7XG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ2RpcmVjdGl2ZScpO1xuICAgIGlmIChpc1N0cmluZyhuYW1lKSkge1xuICAgICAgYXNzZXJ0VmFsaWREaXJlY3RpdmVOYW1lKG5hbWUpO1xuICAgICAgYXNzZXJ0QXJnKGRpcmVjdGl2ZUZhY3RvcnksICdkaXJlY3RpdmVGYWN0b3J5Jyk7XG4gICAgICBpZiAoIWhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgaGFzRGlyZWN0aXZlc1tuYW1lXSA9IFtdO1xuICAgICAgICAkcHJvdmlkZS5mYWN0b3J5KG5hbWUgKyBTdWZmaXgsIFsnJGluamVjdG9yJywgJyRleGNlcHRpb25IYW5kbGVyJyxcbiAgICAgICAgICBmdW5jdGlvbigkaW5qZWN0b3IsICRleGNlcHRpb25IYW5kbGVyKSB7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aXZlcyA9IFtdO1xuICAgICAgICAgICAgZm9yRWFjaChoYXNEaXJlY3RpdmVzW25hbWVdLCBmdW5jdGlvbihkaXJlY3RpdmVGYWN0b3J5LCBpbmRleCkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3RpdmUgPSAkaW5qZWN0b3IuaW52b2tlKGRpcmVjdGl2ZUZhY3RvcnkpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGRpcmVjdGl2ZSkpIHtcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZSA9IHsgY29tcGlsZTogdmFsdWVGbihkaXJlY3RpdmUpIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZGlyZWN0aXZlLmNvbXBpbGUgJiYgZGlyZWN0aXZlLmxpbmspIHtcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5jb21waWxlID0gdmFsdWVGbihkaXJlY3RpdmUubGluayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5wcmlvcml0eSA9IGRpcmVjdGl2ZS5wcmlvcml0eSB8fCAwO1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5pbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5uYW1lID0gZGlyZWN0aXZlLm5hbWUgfHwgbmFtZTtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucmVxdWlyZSA9IGdldERpcmVjdGl2ZVJlcXVpcmUoZGlyZWN0aXZlKTtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucmVzdHJpY3QgPSBnZXREaXJlY3RpdmVSZXN0cmljdChkaXJlY3RpdmUucmVzdHJpY3QsIG5hbWUpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS4kJG1vZHVsZU5hbWUgPSBkaXJlY3RpdmVGYWN0b3J5LiQkbW9kdWxlTmFtZTtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmVzLnB1c2goZGlyZWN0aXZlKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkaXJlY3RpdmVzO1xuICAgICAgICAgIH1dKTtcbiAgICAgIH1cbiAgICAgIGhhc0RpcmVjdGl2ZXNbbmFtZV0ucHVzaChkaXJlY3RpdmVGYWN0b3J5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yRWFjaChuYW1lLCByZXZlcnNlUGFyYW1zKHJlZ2lzdGVyRGlyZWN0aXZlKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjY29tcG9uZW50XG4gICAqIEBtb2R1bGUgbmdcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIE5hbWUgb2YgdGhlIGNvbXBvbmVudCBpbiBjYW1lbENhc2UgKGkuZS4gYG15Q29tcGAgd2hpY2ggd2lsbCBtYXRjaCBgPG15LWNvbXA+YCksXG4gICAqICAgIG9yIGFuIG9iamVjdCBtYXAgb2YgY29tcG9uZW50cyB3aGVyZSB0aGUga2V5cyBhcmUgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29tcG9uZW50IGRlZmluaXRpb24gb2JqZWN0cy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ29tcG9uZW50IGRlZmluaXRpb24gb2JqZWN0IChhIHNpbXBsaWZpZWRcbiAgICogICAge0BsaW5rIG5nLiRjb21waWxlI2RpcmVjdGl2ZS1kZWZpbml0aW9uLW9iamVjdCBkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3R9KSxcbiAgICogICAgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMgKGFsbCBvcHRpb25hbCk6XG4gICAqXG4gICAqICAgIC0gYGNvbnRyb2xsZXJgIOKAkyBgeyhzdHJpbmd8ZnVuY3Rpb24oKT19YCDigJMgY29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZVxuICAgKiAgICAgIGFzc29jaWF0ZWQgd2l0aCBuZXdseSBjcmVhdGVkIHNjb3BlIG9yIHRoZSBuYW1lIG9mIGEge0BsaW5rIG5nLiRjb21waWxlIy1jb250cm9sbGVyLVxuICAgKiAgICAgIHJlZ2lzdGVyZWQgY29udHJvbGxlcn0gaWYgcGFzc2VkIGFzIGEgc3RyaW5nLiBBbiBlbXB0eSBgbm9vcGAgZnVuY3Rpb24gYnkgZGVmYXVsdC5cbiAgICogICAgLSBgY29udHJvbGxlckFzYCDigJMgYHtzdHJpbmc9fWAg4oCTIGlkZW50aWZpZXIgbmFtZSBmb3IgdG8gcmVmZXJlbmNlIHRoZSBjb250cm9sbGVyIGluIHRoZSBjb21wb25lbnQncyBzY29wZS5cbiAgICogICAgICBJZiBwcmVzZW50LCB0aGUgY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCB0byBzY29wZSB1bmRlciB0aGUgYGNvbnRyb2xsZXJBc2AgbmFtZS5cbiAgICogICAgICBJZiBub3QgcHJlc2VudCwgdGhpcyB3aWxsIGRlZmF1bHQgdG8gYmUgYCRjdHJsYC5cbiAgICogICAgLSBgdGVtcGxhdGVgIOKAkyBge3N0cmluZz18ZnVuY3Rpb24oKT19YCDigJMgaHRtbCB0ZW1wbGF0ZSBhcyBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXRcbiAgICogICAgICByZXR1cm5zIGFuIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIHVzZWQgYXMgdGhlIGNvbnRlbnRzIG9mIHRoaXMgY29tcG9uZW50LlxuICAgKiAgICAgIEVtcHR5IHN0cmluZyBieSBkZWZhdWx0LlxuICAgKlxuICAgKiAgICAgIElmIGB0ZW1wbGF0ZWAgaXMgYSBmdW5jdGlvbiwgdGhlbiBpdCBpcyB7QGxpbmsgYXV0by4kaW5qZWN0b3IjaW52b2tlIGluamVjdGVkfSB3aXRoXG4gICAqICAgICAgdGhlIGZvbGxvd2luZyBsb2NhbHM6XG4gICAqXG4gICAqICAgICAgLSBgJGVsZW1lbnRgIC0gQ3VycmVudCBlbGVtZW50XG4gICAqICAgICAgLSBgJGF0dHJzYCAtIEN1cnJlbnQgYXR0cmlidXRlcyBvYmplY3QgZm9yIHRoZSBlbGVtZW50XG4gICAqXG4gICAqICAgIC0gYHRlbXBsYXRlVXJsYCDigJMgYHtzdHJpbmc9fGZ1bmN0aW9uKCk9fWAg4oCTIHBhdGggb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcGF0aCB0byBhbiBodG1sXG4gICAqICAgICAgdGVtcGxhdGUgdGhhdCBzaG91bGQgYmUgdXNlZCAgYXMgdGhlIGNvbnRlbnRzIG9mIHRoaXMgY29tcG9uZW50LlxuICAgKlxuICAgKiAgICAgIElmIGB0ZW1wbGF0ZVVybGAgaXMgYSBmdW5jdGlvbiwgdGhlbiBpdCBpcyB7QGxpbmsgYXV0by4kaW5qZWN0b3IjaW52b2tlIGluamVjdGVkfSB3aXRoXG4gICAqICAgICAgdGhlIGZvbGxvd2luZyBsb2NhbHM6XG4gICAqXG4gICAqICAgICAgLSBgJGVsZW1lbnRgIC0gQ3VycmVudCBlbGVtZW50XG4gICAqICAgICAgLSBgJGF0dHJzYCAtIEN1cnJlbnQgYXR0cmlidXRlcyBvYmplY3QgZm9yIHRoZSBlbGVtZW50XG4gICAqXG4gICAqICAgIC0gYGJpbmRpbmdzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGRlZmluZXMgYmluZGluZ3MgYmV0d2VlbiBET00gYXR0cmlidXRlcyBhbmQgY29tcG9uZW50IHByb3BlcnRpZXMuXG4gICAqICAgICAgQ29tcG9uZW50IHByb3BlcnRpZXMgYXJlIGFsd2F5cyBib3VuZCB0byB0aGUgY29tcG9uZW50IGNvbnRyb2xsZXIgYW5kIG5vdCB0byB0aGUgc2NvcGUuXG4gICAqICAgICAgU2VlIHtAbGluayBuZy4kY29tcGlsZSMtYmluZHRvY29udHJvbGxlci0gYGJpbmRUb0NvbnRyb2xsZXJgfS5cbiAgICogICAgLSBgdHJhbnNjbHVkZWAg4oCTIGB7Ym9vbGVhbj19YCDigJMgd2hldGhlciB7QGxpbmsgJGNvbXBpbGUjdHJhbnNjbHVzaW9uIGNvbnRlbnQgdHJhbnNjbHVzaW9ufSBpcyBlbmFibGVkLlxuICAgKiAgICAgIERpc2FibGVkIGJ5IGRlZmF1bHQuXG4gICAqICAgIC0gYHJlcXVpcmVgIC0gYHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+PX1gIC0gcmVxdWlyZXMgdGhlIGNvbnRyb2xsZXJzIG9mIG90aGVyIGRpcmVjdGl2ZXMgYW5kIGJpbmRzIHRoZW0gdG9cbiAgICogICAgICB0aGlzIGNvbXBvbmVudCdzIGNvbnRyb2xsZXIuIFRoZSBvYmplY3Qga2V5cyBzcGVjaWZ5IHRoZSBwcm9wZXJ0eSBuYW1lcyB1bmRlciB3aGljaCB0aGUgcmVxdWlyZWRcbiAgICogICAgICBjb250cm9sbGVycyAob2JqZWN0IHZhbHVlcykgd2lsbCBiZSBib3VuZC4gU2VlIHtAbGluayBuZy4kY29tcGlsZSMtcmVxdWlyZS0gYHJlcXVpcmVgfS5cbiAgICogICAgLSBgJC4uLmAg4oCTIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBhdHRhY2ggdG8gdGhlIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uIGFuZCB0aGUgY29udHJvbGxlclxuICAgKiAgICAgIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLiAoVGhpcyBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgcm91dGVyIHRvIGFubm90YXRlKVxuICAgKlxuICAgKiBAcmV0dXJucyB7bmcuJGNvbXBpbGVQcm92aWRlcn0gdGhlIGNvbXBpbGUgcHJvdmlkZXIgaXRzZWxmLCBmb3IgY2hhaW5pbmcgb2YgZnVuY3Rpb24gY2FsbHMuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZWdpc3RlciBhICoqY29tcG9uZW50IGRlZmluaXRpb24qKiB3aXRoIHRoZSBjb21waWxlci4gVGhpcyBpcyBhIHNob3J0aGFuZCBmb3IgcmVnaXN0ZXJpbmcgYSBzcGVjaWFsXG4gICAqIHR5cGUgb2YgZGlyZWN0aXZlLCB3aGljaCByZXByZXNlbnRzIGEgc2VsZi1jb250YWluZWQgVUkgY29tcG9uZW50IGluIHlvdXIgYXBwbGljYXRpb24uIFN1Y2ggY29tcG9uZW50c1xuICAgKiBhcmUgYWx3YXlzIGlzb2xhdGVkIChpLmUuIGBzY29wZToge31gKSBhbmQgYXJlIGFsd2F5cyByZXN0cmljdGVkIHRvIGVsZW1lbnRzIChpLmUuIGByZXN0cmljdDogJ0UnYCkuXG4gICAqXG4gICAqIENvbXBvbmVudCBkZWZpbml0aW9ucyBhcmUgdmVyeSBzaW1wbGUgYW5kIGRvIG5vdCByZXF1aXJlIGFzIG11Y2ggY29uZmlndXJhdGlvbiBhcyBkZWZpbmluZyBnZW5lcmFsXG4gICAqIGRpcmVjdGl2ZXMuIENvbXBvbmVudCBkZWZpbml0aW9ucyB1c3VhbGx5IGNvbnNpc3Qgb25seSBvZiBhIHRlbXBsYXRlIGFuZCBhIGNvbnRyb2xsZXIgYmFja2luZyBpdC5cbiAgICpcbiAgICogSW4gb3JkZXIgdG8gbWFrZSB0aGUgZGVmaW5pdGlvbiBlYXNpZXIsIGNvbXBvbmVudHMgZW5mb3JjZSBiZXN0IHByYWN0aWNlcyBsaWtlIHVzZSBvZiBgY29udHJvbGxlckFzYCxcbiAgICogYGJpbmRUb0NvbnRyb2xsZXJgLiBUaGV5IGFsd2F5cyBoYXZlICoqaXNvbGF0ZSBzY29wZSoqIGFuZCBhcmUgcmVzdHJpY3RlZCB0byBlbGVtZW50cy5cbiAgICpcbiAgICogSGVyZSBhcmUgYSBmZXcgZXhhbXBsZXMgb2YgaG93IHlvdSB3b3VsZCB1c3VhbGx5IGRlZmluZSBjb21wb25lbnRzOlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIHZhciBteU1vZCA9IGFuZ3VsYXIubW9kdWxlKC4uLik7XG4gICAqICAgbXlNb2QuY29tcG9uZW50KCdteUNvbXAnLCB7XG4gICAqICAgICB0ZW1wbGF0ZTogJzxkaXY+TXkgbmFtZSBpcyB7eyRjdHJsLm5hbWV9fTwvZGl2PicsXG4gICAqICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigpIHtcbiAgICogICAgICAgdGhpcy5uYW1lID0gJ3NoYWhhcic7XG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqXG4gICAqICAgbXlNb2QuY29tcG9uZW50KCdteUNvbXAnLCB7XG4gICAqICAgICB0ZW1wbGF0ZTogJzxkaXY+TXkgbmFtZSBpcyB7eyRjdHJsLm5hbWV9fTwvZGl2PicsXG4gICAqICAgICBiaW5kaW5nczoge25hbWU6ICdAJ31cbiAgICogICB9KTtcbiAgICpcbiAgICogICBteU1vZC5jb21wb25lbnQoJ215Q29tcCcsIHtcbiAgICogICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbXktY29tcC5odG1sJyxcbiAgICogICAgIGNvbnRyb2xsZXI6ICdNeUN0cmwnLFxuICAgKiAgICAgY29udHJvbGxlckFzOiAnY3RybCcsXG4gICAqICAgICBiaW5kaW5nczoge25hbWU6ICdAJ31cbiAgICogICB9KTtcbiAgICpcbiAgICogYGBgXG4gICAqIEZvciBtb3JlIGV4YW1wbGVzLCBhbmQgYW4gaW4tZGVwdGggZ3VpZGUsIHNlZSB0aGUge0BsaW5rIGd1aWRlL2NvbXBvbmVudCBjb21wb25lbnQgZ3VpZGV9LlxuICAgKlxuICAgKiA8YnIgLz5cbiAgICogU2VlIGFsc28ge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlICRjb21waWxlUHJvdmlkZXIuZGlyZWN0aXZlKCl9LlxuICAgKi9cbiAgdGhpcy5jb21wb25lbnQgPSBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudChuYW1lLCBvcHRpb25zKSB7XG4gICAgaWYgKCFpc1N0cmluZyhuYW1lKSkge1xuICAgICAgZm9yRWFjaChuYW1lLCByZXZlcnNlUGFyYW1zKGJpbmQodGhpcywgcmVnaXN0ZXJDb21wb25lbnQpKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgY29udHJvbGxlciA9IG9wdGlvbnMuY29udHJvbGxlciB8fCBmdW5jdGlvbigpIHt9O1xuXG4gICAgZnVuY3Rpb24gZmFjdG9yeSgkaW5qZWN0b3IpIHtcbiAgICAgIGZ1bmN0aW9uIG1ha2VJbmplY3RhYmxlKGZuKSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSB8fCBpc0FycmF5KGZuKSkge1xuICAgICAgICAgIHJldHVybiAvKiogQHRoaXMgKi8gZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykge1xuICAgICAgICAgICAgcmV0dXJuICRpbmplY3Rvci5pbnZva2UoZm4sIHRoaXMsIHskZWxlbWVudDogdEVsZW1lbnQsICRhdHRyczogdEF0dHJzfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHRlbXBsYXRlID0gKCFvcHRpb25zLnRlbXBsYXRlICYmICFvcHRpb25zLnRlbXBsYXRlVXJsID8gJycgOiBvcHRpb25zLnRlbXBsYXRlKTtcbiAgICAgIHZhciBkZG8gPSB7XG4gICAgICAgIGNvbnRyb2xsZXI6IGNvbnRyb2xsZXIsXG4gICAgICAgIGNvbnRyb2xsZXJBczogaWRlbnRpZmllckZvckNvbnRyb2xsZXIob3B0aW9ucy5jb250cm9sbGVyKSB8fCBvcHRpb25zLmNvbnRyb2xsZXJBcyB8fCAnJGN0cmwnLFxuICAgICAgICB0ZW1wbGF0ZTogbWFrZUluamVjdGFibGUodGVtcGxhdGUpLFxuICAgICAgICB0ZW1wbGF0ZVVybDogbWFrZUluamVjdGFibGUob3B0aW9ucy50ZW1wbGF0ZVVybCksXG4gICAgICAgIHRyYW5zY2x1ZGU6IG9wdGlvbnMudHJhbnNjbHVkZSxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiBvcHRpb25zLmJpbmRpbmdzIHx8IHt9LFxuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICByZXF1aXJlOiBvcHRpb25zLnJlcXVpcmVcbiAgICAgIH07XG5cbiAgICAgIC8vIENvcHkgYW5ub3RhdGlvbnMgKHN0YXJ0aW5nIHdpdGggJCkgb3ZlciB0byB0aGUgRERPXG4gICAgICBmb3JFYWNoKG9wdGlvbnMsIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnJCcpIGRkb1trZXldID0gdmFsO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZG87XG4gICAgfVxuXG4gICAgLy8gVE9ETyhwZXRlKSByZW1vdmUgdGhlIGZvbGxvd2luZyBgZm9yRWFjaGAgYmVmb3JlIHdlIHJlbGVhc2UgMS42LjBcbiAgICAvLyBUaGUgY29tcG9uZW50LXJvdXRlckAwLjIuMCBsb29rcyBmb3IgdGhlIGFubm90YXRpb25zIG9uIHRoZSBjb250cm9sbGVyIGNvbnN0cnVjdG9yXG4gICAgLy8gTm90aGluZyBpbiBBbmd1bGFySlMgbG9va3MgZm9yIGFubm90YXRpb25zIG9uIHRoZSBmYWN0b3J5IGZ1bmN0aW9uIGJ1dCB3ZSBjYW4ndCByZW1vdmVcbiAgICAvLyBpdCBmcm9tIDEuNS54IHlldC5cblxuICAgIC8vIENvcHkgYW55IGFubm90YXRpb24gcHJvcGVydGllcyAoc3RhcnRpbmcgd2l0aCAkKSBvdmVyIHRvIHRoZSBmYWN0b3J5IGFuZCBjb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uc1xuICAgIC8vIFRoZXNlIGNvdWxkIGJlIHVzZWQgYnkgbGlicmFyaWVzIHN1Y2ggYXMgdGhlIG5ldyBjb21wb25lbnQgcm91dGVyXG4gICAgZm9yRWFjaChvcHRpb25zLCBmdW5jdGlvbih2YWwsIGtleSkge1xuICAgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICckJykge1xuICAgICAgICBmYWN0b3J5W2tleV0gPSB2YWw7XG4gICAgICAgIC8vIERvbid0IHRyeSB0byBjb3B5IG92ZXIgYW5ub3RhdGlvbnMgdG8gbmFtZWQgY29udHJvbGxlclxuICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVyKSkgY29udHJvbGxlcltrZXldID0gdmFsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZmFjdG9yeS4kaW5qZWN0ID0gWyckaW5qZWN0b3InXTtcblxuICAgIHJldHVybiB0aGlzLmRpcmVjdGl2ZShuYW1lLCBmYWN0b3J5KTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgYVtocmVmXSBzYW5pdGl6YXRpb24uXG4gICAqXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnRpbmcgWFNTIGF0dGFja3MgdmlhIGh0bWwgbGlua3MuXG4gICAqXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gYVtocmVmXSB2aWEgZGF0YS1iaW5kaW5nIGlzIGZpcnN0IG5vcm1hbGl6ZWQgYW5kIHR1cm5lZCBpbnRvXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdGBcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXG4gICAqIHRoZSBhYnNvbHV0ZSB1cmwgaXMgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCBzdHJpbmcgYW5kIG9ubHkgdGhlbiBpcyBpdCB3cml0dGVuIGludG8gdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxuICAgKiBAcmV0dXJucyB7UmVnRXhwfG5nLiRjb21waWxlUHJvdmlkZXJ9IEN1cnJlbnQgUmVnRXhwIGlmIGNhbGxlZCB3aXRob3V0IHZhbHVlIG9yIHNlbGYgZm9yXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cbiAgICovXG4gIHRoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcbiAgICBpZiAoaXNEZWZpbmVkKHJlZ2V4cCkpIHtcbiAgICAgICQkc2FuaXRpemVVcmlQcm92aWRlci5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdChyZWdleHApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAkJHNhbml0aXplVXJpUHJvdmlkZXIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKTtcbiAgICB9XG4gIH07XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2ltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIGZvciB3aGl0ZWxpc3Rpbmcgb2Ygc2FmZVxuICAgKiB1cmxzIGR1cmluZyBpbWdbc3JjXSBzYW5pdGl6YXRpb24uXG4gICAqXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnQgWFNTIGF0dGFja3MgdmlhIGh0bWwgbGlua3MuXG4gICAqXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gaW1nW3NyY10gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xuICAgKiBhbiBhYnNvbHV0ZSB1cmwuIEFmdGVyd2FyZHMsIHRoZSB1cmwgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0YFxuICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIElmIGEgbWF0Y2ggaXMgZm91bmQsIHRoZSBvcmlnaW5hbCB1cmwgaXMgd3JpdHRlbiBpbnRvIHRoZSBkb20uIE90aGVyd2lzZSxcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxuICAgKi9cbiAgdGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcbiAgICBpZiAoaXNEZWZpbmVkKHJlZ2V4cCkpIHtcbiAgICAgICQkc2FuaXRpemVVcmlQcm92aWRlci5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QocmVnZXhwKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAgJGNvbXBpbGVQcm92aWRlciNkZWJ1Z0luZm9FbmFibGVkXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGVuYWJsZWQgdXBkYXRlIHRoZSBkZWJ1Z0luZm9FbmFibGVkIHN0YXRlIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UganVzdCByZXR1cm4gdGhlXG4gICAqIGN1cnJlbnQgZGVidWdJbmZvRW5hYmxlZCBzdGF0ZVxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxuICAgKlxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBlbmFibGUvZGlzYWJsZSB2YXJpb3VzIGRlYnVnIHJ1bnRpbWUgaW5mb3JtYXRpb24gaW4gdGhlIGNvbXBpbGVyIHN1Y2ggYXMgYWRkaW5nXG4gICAqIGJpbmRpbmcgaW5mb3JtYXRpb24gYW5kIGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHNjb3BlIG9uIHRvIERPTSBlbGVtZW50cy5cbiAgICogSWYgZW5hYmxlZCwgdGhlIGNvbXBpbGVyIHdpbGwgYWRkIHRoZSBmb2xsb3dpbmcgdG8gRE9NIGVsZW1lbnRzIHRoYXQgaGF2ZSBiZWVuIGJvdW5kIHRvIHRoZSBzY29wZVxuICAgKiAqIGBuZy1iaW5kaW5nYCBDU1MgY2xhc3NcbiAgICogKiBgbmctc2NvcGVgIGFuZCBgbmctaXNvbGF0ZWQtc2NvcGVgIENTUyBjbGFzc2VzXG4gICAqICogYCRiaW5kaW5nYCBkYXRhIHByb3BlcnR5IGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgdGhlIGJpbmRpbmcgZXhwcmVzc2lvbnNcbiAgICogKiBEYXRhIHByb3BlcnRpZXMgdXNlZCBieSB0aGUge0BsaW5rIGFuZ3VsYXIuZWxlbWVudCNtZXRob2RzIGBzY29wZSgpYC9gaXNvbGF0ZVNjb3BlKClgIG1ldGhvZHN9IHRvIHJldHVyblxuICAgKiAgIHRoZSBlbGVtZW50J3Mgc2NvcGUuXG4gICAqICogUGxhY2Vob2xkZXIgY29tbWVudHMgd2lsbCBjb250YWluIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgZGlyZWN0aXZlIGFuZCBiaW5kaW5nIGNhdXNlZCB0aGUgcGxhY2Vob2xkZXIuXG4gICAqICAgRS5nLiBgPCEtLSBuZ0lmOiBzaG91bGRTaG93KCkgLS0+YC5cbiAgICpcbiAgICogWW91IG1heSB3YW50IHRvIGRpc2FibGUgdGhpcyBpbiBwcm9kdWN0aW9uIGZvciBhIHNpZ25pZmljYW50IHBlcmZvcm1hbmNlIGJvb3N0LiBTZWVcbiAgICoge0BsaW5rIGd1aWRlL3Byb2R1Y3Rpb24jZGlzYWJsaW5nLWRlYnVnLWRhdGEgRGlzYWJsaW5nIERlYnVnIERhdGF9IGZvciBtb3JlLlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB0cnVlLlxuICAgKi9cbiAgdmFyIGRlYnVnSW5mb0VuYWJsZWQgPSB0cnVlO1xuICB0aGlzLmRlYnVnSW5mb0VuYWJsZWQgPSBmdW5jdGlvbihlbmFibGVkKSB7XG4gICAgaWYgKGlzRGVmaW5lZChlbmFibGVkKSkge1xuICAgICAgZGVidWdJbmZvRW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGRlYnVnSW5mb0VuYWJsZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgICRjb21waWxlUHJvdmlkZXIjc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGVuYWJsZWQgdXBkYXRlIHRoZSBzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQgc3RhdGUgaWYgcHJvdmlkZWQsXG4gICAqIG90aGVyd2lzZSByZXR1cm4gdGhlIGN1cnJlbnQgc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkIHN0YXRlLlxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxuICAgKlxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBlbmFibGUgLyBkaXNhYmxlIHRoZSBzdHJpY3QgY29tcG9uZW50IGJpbmRpbmdzIGNoZWNrLiBJZiBlbmFibGVkLCB0aGVcbiAgICogY29tcGlsZXIgd2lsbCBlbmZvcmNlIHRoYXQgYWxsIHNjb3BlIC8gY29udHJvbGxlciBiaW5kaW5ncyBvZiBhXG4gICAqIHtAbGluayAkY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmV9IC8ge0BsaW5rICRjb21waWxlUHJvdmlkZXIjY29tcG9uZW50IGNvbXBvbmVudH1cbiAgICogdGhhdCBhcmUgbm90IHNldCBhcyBvcHRpb25hbCB3aXRoIGA/YCwgbXVzdCBiZSBwcm92aWRlZCB3aGVuIHRoZSBkaXJlY3RpdmUgaXMgaW5zdGFudGlhdGVkLlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjb21waWxlciB3aWxsIHRocm93IHRoZVxuICAgKiB7QGxpbmsgZXJyb3IvJGNvbXBpbGUvbWlzc2luZ2F0dHIgJGNvbXBpbGU6bWlzc2luZ2F0dHIgZXJyb3J9LlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBmYWxzZS5cbiAgICovXG4gIHZhciBzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgdGhpcy5zdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQgPSBmdW5jdGlvbihlbmFibGVkKSB7XG4gICAgaWYgKGlzRGVmaW5lZChlbmFibGVkKSkge1xuICAgICAgc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkID0gZW5hYmxlZDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkO1xuICB9O1xuXG4gIHZhciBUVEwgPSAxMDtcbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNvbkNoYW5nZXNUdGxcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFNldHMgdGhlIG51bWJlciBvZiB0aW1lcyBgJG9uQ2hhbmdlc2AgaG9va3MgY2FuIHRyaWdnZXIgbmV3IGNoYW5nZXMgYmVmb3JlIGdpdmluZyB1cCBhbmRcbiAgICogYXNzdW1pbmcgdGhhdCB0aGUgbW9kZWwgaXMgdW5zdGFibGUuXG4gICAqXG4gICAqIFRoZSBjdXJyZW50IGRlZmF1bHQgaXMgMTAgaXRlcmF0aW9ucy5cbiAgICpcbiAgICogSW4gY29tcGxleCBhcHBsaWNhdGlvbnMgaXQncyBwb3NzaWJsZSB0aGF0IGRlcGVuZGVuY2llcyBiZXR3ZWVuIGAkb25DaGFuZ2VzYCBob29rcyBhbmQgYmluZGluZ3Mgd2lsbCByZXN1bHRcbiAgICogaW4gc2V2ZXJhbCBpdGVyYXRpb25zIG9mIGNhbGxzIHRvIHRoZXNlIGhvb2tzLiBIb3dldmVyIGlmIGFuIGFwcGxpY2F0aW9uIG5lZWRzIG1vcmUgdGhhbiB0aGUgZGVmYXVsdCAxMFxuICAgKiBpdGVyYXRpb25zIHRvIHN0YWJpbGl6ZSB0aGVuIHlvdSBzaG91bGQgaW52ZXN0aWdhdGUgd2hhdCBpcyBjYXVzaW5nIHRoZSBtb2RlbCB0byBjb250aW51b3VzbHkgY2hhbmdlIGR1cmluZ1xuICAgKiB0aGUgYCRvbkNoYW5nZXNgIGhvb2sgZXhlY3V0aW9uLlxuICAgKlxuICAgKiBJbmNyZWFzaW5nIHRoZSBUVEwgY291bGQgaGF2ZSBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMsIHNvIHlvdSBzaG91bGQgbm90IGNoYW5nZSBpdCB3aXRob3V0IHByb3BlciBqdXN0aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbGltaXQgVGhlIG51bWJlciBvZiBgJG9uQ2hhbmdlc2AgaG9vayBpdGVyYXRpb25zLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfG9iamVjdH0gdGhlIGN1cnJlbnQgbGltaXQgKG9yIGB0aGlzYCBpZiBjYWxsZWQgYXMgYSBzZXR0ZXIgZm9yIGNoYWluaW5nKVxuICAgKi9cbiAgdGhpcy5vbkNoYW5nZXNUdGwgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBUVEwgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gVFRMO1xuICB9O1xuXG4gIHZhciBjb21tZW50RGlyZWN0aXZlc0VuYWJsZWRDb25maWcgPSB0cnVlO1xuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2NvbW1lbnREaXJlY3RpdmVzRW5hYmxlZFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogSXQgaW5kaWNhdGVzIHRvIHRoZSBjb21waWxlclxuICAgKiB3aGV0aGVyIG9yIG5vdCBkaXJlY3RpdmVzIG9uIGNvbW1lbnRzIHNob3VsZCBiZSBjb21waWxlZC5cbiAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKlxuICAgKiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2l0aCBmYWxzZSBkaXNhYmxlcyB0aGUgY29tcGlsYXRpb24gb2YgZGlyZWN0aXZlc1xuICAgKiBvbiBjb21tZW50cyBmb3IgdGhlIHdob2xlIGFwcGxpY2F0aW9uLlxuICAgKiBUaGlzIHJlc3VsdHMgaW4gYSBjb21waWxhdGlvbiBwZXJmb3JtYW5jZSBnYWluLFxuICAgKiBhcyB0aGUgY29tcGlsZXIgZG9lc24ndCBoYXZlIHRvIGNoZWNrIGNvbW1lbnRzIHdoZW4gbG9va2luZyBmb3IgZGlyZWN0aXZlcy5cbiAgICogVGhpcyBzaG91bGQgaG93ZXZlciBvbmx5IGJlIHVzZWQgaWYgeW91IGFyZSBzdXJlIHRoYXQgbm8gY29tbWVudCBkaXJlY3RpdmVzIGFyZSB1c2VkIGluXG4gICAqIHRoZSBhcHBsaWNhdGlvbiAoaW5jbHVkaW5nIGFueSAzcmQgcGFydHkgZGlyZWN0aXZlcykuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBgZmFsc2VgIGlmIHRoZSBjb21waWxlciBtYXkgaWdub3JlIGRpcmVjdGl2ZXMgb24gY29tbWVudHNcbiAgICogQHJldHVybnMge2Jvb2xlYW58b2JqZWN0fSB0aGUgY3VycmVudCB2YWx1ZSAob3IgYHRoaXNgIGlmIGNhbGxlZCBhcyBhIHNldHRlciBmb3IgY2hhaW5pbmcpXG4gICAqL1xuICB0aGlzLmNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZENvbmZpZyA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBjb21tZW50RGlyZWN0aXZlc0VuYWJsZWRDb25maWc7XG4gIH07XG5cblxuICB2YXIgY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZyA9IHRydWU7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogSXQgaW5kaWNhdGVzIHRvIHRoZSBjb21waWxlclxuICAgKiB3aGV0aGVyIG9yIG5vdCBkaXJlY3RpdmVzIG9uIGVsZW1lbnQgY2xhc3NlcyBzaG91bGQgYmUgY29tcGlsZWQuXG4gICAqIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICpcbiAgICogQ2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpdGggZmFsc2UgZGlzYWJsZXMgdGhlIGNvbXBpbGF0aW9uIG9mIGRpcmVjdGl2ZXNcbiAgICogb24gZWxlbWVudCBjbGFzc2VzIGZvciB0aGUgd2hvbGUgYXBwbGljYXRpb24uXG4gICAqIFRoaXMgcmVzdWx0cyBpbiBhIGNvbXBpbGF0aW9uIHBlcmZvcm1hbmNlIGdhaW4sXG4gICAqIGFzIHRoZSBjb21waWxlciBkb2Vzbid0IGhhdmUgdG8gY2hlY2sgZWxlbWVudCBjbGFzc2VzIHdoZW4gbG9va2luZyBmb3IgZGlyZWN0aXZlcy5cbiAgICogVGhpcyBzaG91bGQgaG93ZXZlciBvbmx5IGJlIHVzZWQgaWYgeW91IGFyZSBzdXJlIHRoYXQgbm8gY2xhc3MgZGlyZWN0aXZlcyBhcmUgdXNlZCBpblxuICAgKiB0aGUgYXBwbGljYXRpb24gKGluY2x1ZGluZyBhbnkgM3JkIHBhcnR5IGRpcmVjdGl2ZXMpLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgYGZhbHNlYCBpZiB0aGUgY29tcGlsZXIgbWF5IGlnbm9yZSBkaXJlY3RpdmVzIG9uIGVsZW1lbnQgY2xhc3Nlc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxvYmplY3R9IHRoZSBjdXJyZW50IHZhbHVlIChvciBgdGhpc2AgaWYgY2FsbGVkIGFzIGEgc2V0dGVyIGZvciBjaGFpbmluZylcbiAgICovXG4gIHRoaXMuY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNzc0NsYXNzRGlyZWN0aXZlc0VuYWJsZWRDb25maWcgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZztcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbXG4gICAgICAgICAgICAnJGluamVjdG9yJywgJyRpbnRlcnBvbGF0ZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckdGVtcGxhdGVSZXF1ZXN0JywgJyRwYXJzZScsXG4gICAgICAgICAgICAnJGNvbnRyb2xsZXInLCAnJHJvb3RTY29wZScsICckc2NlJywgJyRhbmltYXRlJyxcbiAgICBmdW5jdGlvbigkaW5qZWN0b3IsICAgJGludGVycG9sYXRlLCAgICRleGNlcHRpb25IYW5kbGVyLCAgICR0ZW1wbGF0ZVJlcXVlc3QsICAgJHBhcnNlLFxuICAgICAgICAgICAgICRjb250cm9sbGVyLCAgICRyb290U2NvcGUsICAgJHNjZSwgICAkYW5pbWF0ZSkge1xuXG4gICAgdmFyIFNJTVBMRV9BVFRSX05BTUUgPSAvXlxcdy87XG4gICAgdmFyIHNwZWNpYWxBdHRySG9sZGVyID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cbiAgICB2YXIgY29tbWVudERpcmVjdGl2ZXNFbmFibGVkID0gY29tbWVudERpcmVjdGl2ZXNFbmFibGVkQ29uZmlnO1xuICAgIHZhciBjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkID0gY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZztcblxuXG4gICAgdmFyIG9uQ2hhbmdlc1R0bCA9IFRUTDtcbiAgICAvLyBUaGUgb25DaGFuZ2VzIGhvb2tzIHNob3VsZCBhbGwgYmUgcnVuIHRvZ2V0aGVyIGluIGEgc2luZ2xlIGRpZ2VzdFxuICAgIC8vIFdoZW4gY2hhbmdlcyBvY2N1ciwgdGhlIGNhbGwgdG8gdHJpZ2dlciB0aGVpciBob29rcyB3aWxsIGJlIGFkZGVkIHRvIHRoaXMgcXVldWVcbiAgICB2YXIgb25DaGFuZ2VzUXVldWU7XG5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBhICQkcG9zdERpZ2VzdCB0byB0cmlnZ2VyIGFsbCB0aGUgb25DaGFuZ2VzIGhvb2tzIGluIGEgc2luZ2xlIGRpZ2VzdFxuICAgIGZ1bmN0aW9uIGZsdXNoT25DaGFuZ2VzUXVldWUoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoISgtLW9uQ2hhbmdlc1R0bCkpIHtcbiAgICAgICAgICAvLyBXZSBoYXZlIGhpdCB0aGUgVFRMIGxpbWl0IHNvIHJlc2V0IGV2ZXJ5dGhpbmdcbiAgICAgICAgICBvbkNoYW5nZXNRdWV1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignaW5mY2huZycsICd7MH0gJG9uQ2hhbmdlcygpIGl0ZXJhdGlvbnMgcmVhY2hlZC4gQWJvcnRpbmchXFxuJywgVFRMKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBtdXN0IHJ1biB0aGlzIGhvb2sgaW4gYW4gYXBwbHkgc2luY2UgdGhlICQkcG9zdERpZ2VzdCBydW5zIG91dHNpZGUgYXBwbHlcbiAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gb25DaGFuZ2VzUXVldWUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgb25DaGFuZ2VzUXVldWVbaV0oKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFJlc2V0IHRoZSBxdWV1ZSB0byB0cmlnZ2VyIGEgbmV3IHNjaGVkdWxlIG5leHQgdGltZSB0aGVyZSBpcyBhIGNoYW5nZVxuICAgICAgICAgIG9uQ2hhbmdlc1F1ZXVlID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIG9uQ2hhbmdlc1R0bCsrO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gQXR0cmlidXRlcyhlbGVtZW50LCBhdHRyaWJ1dGVzVG9Db3B5KSB7XG4gICAgICBpZiAoYXR0cmlidXRlc1RvQ29weSkge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGF0dHJpYnV0ZXNUb0NvcHkpO1xuICAgICAgICB2YXIgaSwgbCwga2V5O1xuXG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgdGhpc1trZXldID0gYXR0cmlidXRlc1RvQ29weVtrZXldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRhdHRyID0ge307XG4gICAgICB9XG5cbiAgICAgIHRoaXMuJCRlbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG5cbiAgICBBdHRyaWJ1dGVzLnByb3RvdHlwZSA9IHtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJG5vcm1hbGl6ZVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIENvbnZlcnRzIGFuIGF0dHJpYnV0ZSBuYW1lIChlLmcuIGRhc2gvY29sb24vdW5kZXJzY29yZS1kZWxpbWl0ZWQgc3RyaW5nLCBvcHRpb25hbGx5IHByZWZpeGVkIHdpdGggYHgtYCBvclxuICAgICAgICogYGRhdGEtYCkgdG8gaXRzIG5vcm1hbGl6ZWQsIGNhbWVsQ2FzZSBmb3JtLlxuICAgICAgICpcbiAgICAgICAqIEFsc28gdGhlcmUgaXMgc3BlY2lhbCBjYXNlIGZvciBNb3ogcHJlZml4IHN0YXJ0aW5nIHdpdGggdXBwZXIgY2FzZSBsZXR0ZXIuXG4gICAgICAgKlxuICAgICAgICogRm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24gY2hlY2sgb3V0IHRoZSBndWlkZSBvbiB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI21hdGNoaW5nLWRpcmVjdGl2ZXMgTWF0Y2hpbmcgRGlyZWN0aXZlc31cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxuICAgICAgICovXG4gICAgICAkbm9ybWFsaXplOiBkaXJlY3RpdmVOb3JtYWxpemUsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYWRkQ2xhc3NcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBZGRzIHRoZSBDU1MgY2xhc3MgdmFsdWUgc3BlY2lmaWVkIGJ5IHRoZSBjbGFzc1ZhbCBwYXJhbWV0ZXIgdG8gdGhlIGVsZW1lbnQuIElmIGFuaW1hdGlvbnNcbiAgICAgICAqIGFyZSBlbmFibGVkIHRoZW4gYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGZvciB0aGUgY2xhc3MgYWRkaXRpb24uXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzVmFsIFRoZSBjbGFzc05hbWUgdmFsdWUgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgKi9cbiAgICAgICRhZGRDbGFzczogZnVuY3Rpb24oY2xhc3NWYWwpIHtcbiAgICAgICAgaWYgKGNsYXNzVmFsICYmIGNsYXNzVmFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgY2xhc3NWYWwpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRyZW1vdmVDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJlbW92ZXMgdGhlIENTUyBjbGFzcyB2YWx1ZSBzcGVjaWZpZWQgYnkgdGhlIGNsYXNzVmFsIHBhcmFtZXRlciBmcm9tIHRoZSBlbGVtZW50LiBJZlxuICAgICAgICogYW5pbWF0aW9ucyBhcmUgZW5hYmxlZCB0aGVuIGFuIGFuaW1hdGlvbiB3aWxsIGJlIHRyaWdnZXJlZCBmb3IgdGhlIGNsYXNzIHJlbW92YWwuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzVmFsIFRoZSBjbGFzc05hbWUgdmFsdWUgdGhhdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudFxuICAgICAgICovXG4gICAgICAkcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKGNsYXNzVmFsKSB7XG4gICAgICAgIGlmIChjbGFzc1ZhbCAmJiBjbGFzc1ZhbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIGNsYXNzVmFsKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkdXBkYXRlQ2xhc3NcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBZGRzIGFuZCByZW1vdmVzIHRoZSBhcHByb3ByaWF0ZSBDU1MgY2xhc3MgdmFsdWVzIHRvIHRoZSBlbGVtZW50IGJhc2VkIG9uIHRoZSBkaWZmZXJlbmNlXG4gICAgICAgKiBiZXR3ZWVuIHRoZSBuZXcgYW5kIG9sZCBDU1MgY2xhc3MgdmFsdWVzIChzcGVjaWZpZWQgYXMgbmV3Q2xhc3NlcyBhbmQgb2xkQ2xhc3NlcykuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5ld0NsYXNzZXMgVGhlIGN1cnJlbnQgQ1NTIGNsYXNzTmFtZSB2YWx1ZVxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG9sZENsYXNzZXMgVGhlIGZvcm1lciBDU1MgY2xhc3NOYW1lIHZhbHVlXG4gICAgICAgKi9cbiAgICAgICR1cGRhdGVDbGFzczogZnVuY3Rpb24obmV3Q2xhc3Nlcywgb2xkQ2xhc3Nlcykge1xuICAgICAgICB2YXIgdG9BZGQgPSB0b2tlbkRpZmZlcmVuY2UobmV3Q2xhc3Nlcywgb2xkQ2xhc3Nlcyk7XG4gICAgICAgIGlmICh0b0FkZCAmJiB0b0FkZC5sZW5ndGgpIHtcbiAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgdG9BZGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRvUmVtb3ZlID0gdG9rZW5EaWZmZXJlbmNlKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpO1xuICAgICAgICBpZiAodG9SZW1vdmUgJiYgdG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgICAgICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIHRvUmVtb3ZlKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgYSBub3JtYWxpemVkIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBpbiBhIHdheSBzdWNoIHRoYXQgYWxsIGRpcmVjdGl2ZXNcbiAgICAgICAqIGNhbiBzaGFyZSB0aGUgYXR0cmlidXRlLiBUaGlzIGZ1bmN0aW9uIHByb3Blcmx5IGhhbmRsZXMgYm9vbGVhbiBhdHRyaWJ1dGVzLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBOb3JtYWxpemVkIGtleS4gKGllIG5nQXR0cmlidXRlKVxuICAgICAgICogQHBhcmFtIHtzdHJpbmd8Ym9vbGVhbn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4gSWYgYG51bGxgIGF0dHJpYnV0ZSB3aWxsIGJlIGRlbGV0ZWQuXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB3cml0ZUF0dHIgSWYgZmFsc2UsIGRvZXMgbm90IHdyaXRlIHRoZSB2YWx1ZSB0byBET00gZWxlbWVudCBhdHRyaWJ1dGUuXG4gICAgICAgKiAgICAgRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYXR0ck5hbWUgT3B0aW9uYWwgbm9uZSBub3JtYWxpemVkIG5hbWUuIERlZmF1bHRzIHRvIGtleS5cbiAgICAgICAqL1xuICAgICAgJHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgd3JpdGVBdHRyLCBhdHRyTmFtZSkge1xuICAgICAgICAvLyBUT0RPOiBkZWNpZGUgd2hldGhlciBvciBub3QgdG8gdGhyb3cgYW4gZXJyb3IgaWYgXCJjbGFzc1wiXG4gICAgICAgIC8vIGlzIHNldCB0aHJvdWdoIHRoaXMgZnVuY3Rpb24gc2luY2UgaXQgbWF5IGNhdXNlICR1cGRhdGVDbGFzcyB0b1xuICAgICAgICAvLyBiZWNvbWUgdW5zdGFibGUuXG5cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLiQkZWxlbWVudFswXSxcbiAgICAgICAgICAgIGJvb2xlYW5LZXkgPSBnZXRCb29sZWFuQXR0ck5hbWUobm9kZSwga2V5KSxcbiAgICAgICAgICAgIGFsaWFzZWRLZXkgPSBnZXRBbGlhc2VkQXR0ck5hbWUoa2V5KSxcbiAgICAgICAgICAgIG9ic2VydmVyID0ga2V5LFxuICAgICAgICAgICAgbm9kZU5hbWU7XG5cbiAgICAgICAgaWYgKGJvb2xlYW5LZXkpIHtcbiAgICAgICAgICB0aGlzLiQkZWxlbWVudC5wcm9wKGtleSwgdmFsdWUpO1xuICAgICAgICAgIGF0dHJOYW1lID0gYm9vbGVhbktleTtcbiAgICAgICAgfSBlbHNlIGlmIChhbGlhc2VkS2V5KSB7XG4gICAgICAgICAgdGhpc1thbGlhc2VkS2V5XSA9IHZhbHVlO1xuICAgICAgICAgIG9ic2VydmVyID0gYWxpYXNlZEtleTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuXG4gICAgICAgIC8vIHRyYW5zbGF0ZSBub3JtYWxpemVkIGtleSB0byBhY3R1YWwga2V5XG4gICAgICAgIGlmIChhdHRyTmFtZSkge1xuICAgICAgICAgIHRoaXMuJGF0dHJba2V5XSA9IGF0dHJOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF0dHJOYW1lID0gdGhpcy4kYXR0cltrZXldO1xuICAgICAgICAgIGlmICghYXR0ck5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuJGF0dHJba2V5XSA9IGF0dHJOYW1lID0gc25ha2VfY2FzZShrZXksICctJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbm9kZU5hbWUgPSBub2RlTmFtZV8odGhpcy4kJGVsZW1lbnQpO1xuXG4gICAgICAgIC8vIFNhbml0aXplIGltZ1tzcmNzZXRdIHZhbHVlcy5cbiAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnaW1nJyAmJiBrZXkgPT09ICdzcmNzZXQnICYmIHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCFpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdzcmNzZXQnLCAnQ2FuXFwndCBwYXNzIHRydXN0ZWQgdmFsdWVzIHRvIGAkc2V0KFxcJ3NyY3NldFxcJywgdmFsdWUpYDogXCJ7MH1cIicsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN1Y2ggdmFsdWVzIGFyZSBhIGJpdCB0b28gY29tcGxleCB0byBoYW5kbGUgYXV0b21hdGljYWxseSBpbnNpZGUgJHNjZS5cbiAgICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBzYW5pdGl6ZSBlYWNoIG9mIHRoZSBVUklzIGluZGl2aWR1YWxseSwgd2hpY2ggd29ya3MsIGV2ZW4gZHluYW1pY2FsbHkuXG5cbiAgICAgICAgICAvLyBJdCdzIG5vdCBwb3NzaWJsZSB0byB3b3JrIGFyb3VuZCB0aGlzIHVzaW5nIGAkc2NlLnRydXN0QXNNZWRpYVVybGAuXG4gICAgICAgICAgLy8gSWYgeW91IHdhbnQgdG8gcHJvZ3JhbW1hdGljYWxseSBzZXQgZXhwbGljaXRseSB0cnVzdGVkIHVuc2FmZSBVUkxzLCB5b3Ugc2hvdWxkIHVzZVxuICAgICAgICAgIC8vIGAkc2NlLnRydXN0QXNIdG1sYCBvbiB0aGUgd2hvbGUgYGltZ2AgdGFnIGFuZCBpbmplY3QgaXQgaW50byB0aGUgRE9NIHVzaW5nIHRoZVxuICAgICAgICAgIC8vIGBuZy1iaW5kLWh0bWxgIGRpcmVjdGl2ZS5cblxuICAgICAgICAgIHZhciByZXN1bHQgPSAnJztcblxuICAgICAgICAgIC8vIGZpcnN0IGNoZWNrIGlmIHRoZXJlIGFyZSBzcGFjZXMgYmVjYXVzZSBpdCdzIG5vdCB0aGUgc2FtZSBwYXR0ZXJuXG4gICAgICAgICAgdmFyIHRyaW1tZWRTcmNzZXQgPSB0cmltKHZhbHVlKTtcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAoICAgOTk5eCAgICx8ICAgOTk5dyAgICx8ICAgLHwsICAgKVxuICAgICAgICAgIHZhciBzcmNQYXR0ZXJuID0gLyhcXHMrXFxkK3hcXHMqLHxcXHMrXFxkK3dcXHMqLHxcXHMrLHwsXFxzKykvO1xuICAgICAgICAgIHZhciBwYXR0ZXJuID0gL1xccy8udGVzdCh0cmltbWVkU3Jjc2V0KSA/IHNyY1BhdHRlcm4gOiAvKCwpLztcblxuICAgICAgICAgIC8vIHNwbGl0IHNyY3NldCBpbnRvIHR1cGxlIG9mIHVyaSBhbmQgZGVzY3JpcHRvciBleGNlcHQgZm9yIHRoZSBsYXN0IGl0ZW1cbiAgICAgICAgICB2YXIgcmF3VXJpcyA9IHRyaW1tZWRTcmNzZXQuc3BsaXQocGF0dGVybik7XG5cbiAgICAgICAgICAvLyBmb3IgZWFjaCB0dXBsZXNcbiAgICAgICAgICB2YXIgbmJyVXJpc1dpdGgycGFydHMgPSBNYXRoLmZsb29yKHJhd1VyaXMubGVuZ3RoIC8gMik7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYnJVcmlzV2l0aDJwYXJ0czsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJJZHggPSBpICogMjtcbiAgICAgICAgICAgIC8vIHNhbml0aXplIHRoZSB1cmlcbiAgICAgICAgICAgIHJlc3VsdCArPSAkc2NlLmdldFRydXN0ZWRNZWRpYVVybCh0cmltKHJhd1VyaXNbaW5uZXJJZHhdKSk7XG4gICAgICAgICAgICAvLyBhZGQgdGhlIGRlc2NyaXB0b3JcbiAgICAgICAgICAgIHJlc3VsdCArPSAnICcgKyB0cmltKHJhd1VyaXNbaW5uZXJJZHggKyAxXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gc3BsaXQgdGhlIGxhc3QgaXRlbSBpbnRvIHVyaSBhbmQgZGVzY3JpcHRvclxuICAgICAgICAgIHZhciBsYXN0VHVwbGUgPSB0cmltKHJhd1VyaXNbaSAqIDJdKS5zcGxpdCgvXFxzLyk7XG5cbiAgICAgICAgICAvLyBzYW5pdGl6ZSB0aGUgbGFzdCB1cmlcbiAgICAgICAgICByZXN1bHQgKz0gJHNjZS5nZXRUcnVzdGVkTWVkaWFVcmwodHJpbShsYXN0VHVwbGVbMF0pKTtcblxuICAgICAgICAgIC8vIGFuZCBhZGQgdGhlIGxhc3QgZGVzY3JpcHRvciBpZiBhbnlcbiAgICAgICAgICBpZiAobGFzdFR1cGxlLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgcmVzdWx0ICs9ICgnICcgKyB0cmltKGxhc3RUdXBsZVsxXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZSA9IHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3cml0ZUF0dHIgIT09IGZhbHNlKSB7XG4gICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IGlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy4kJGVsZW1lbnQucmVtb3ZlQXR0cihhdHRyTmFtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChTSU1QTEVfQVRUUl9OQU1FLnRlc3QoYXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuJCRlbGVtZW50LmF0dHIoYXR0ck5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldFNwZWNpYWxBdHRyKHRoaXMuJCRlbGVtZW50WzBdLCBhdHRyTmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZpcmUgb2JzZXJ2ZXJzXG4gICAgICAgIHZhciAkJG9ic2VydmVycyA9IHRoaXMuJCRvYnNlcnZlcnM7XG4gICAgICAgIGlmICgkJG9ic2VydmVycykge1xuICAgICAgICAgIGZvckVhY2goJCRvYnNlcnZlcnNbb2JzZXJ2ZXJdLCBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm4odmFsdWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRvYnNlcnZlXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogT2JzZXJ2ZXMgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZS5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgb2JzZXJ2ZXIgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIG9uY2UgZHVyaW5nIHRoZSBuZXh0IGAkZGlnZXN0YCBmb2xsb3dpbmdcbiAgICAgICAqIGNvbXBpbGF0aW9uLiBUaGUgb2JzZXJ2ZXIgaXMgdGhlbiBpbnZva2VkIHdoZW5ldmVyIHRoZSBpbnRlcnBvbGF0ZWQgdmFsdWVcbiAgICAgICAqIGNoYW5nZXMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBOb3JtYWxpemVkIGtleS4gKGllIG5nQXR0cmlidXRlKSAuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGludGVycG9sYXRlZFZhbHVlKX0gZm4gRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlclxuICAgICAgICAgICAgICAgIHRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBjaGFuZ2VzLlxuICAgICAgICogICAgICAgIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24jaG93LXRleHQtYW5kLWF0dHJpYnV0ZS1iaW5kaW5ncy13b3JrIEludGVycG9sYXRpb25cbiAgICAgICAqICAgICAgICBndWlkZX0gZm9yIG1vcmUgaW5mby5cbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgb2JzZXJ2ZXIuXG4gICAgICAgKi9cbiAgICAgICRvYnNlcnZlOiBmdW5jdGlvbihrZXksIGZuKSB7XG4gICAgICAgIHZhciBhdHRycyA9IHRoaXMsXG4gICAgICAgICAgICAkJG9ic2VydmVycyA9IChhdHRycy4kJG9ic2VydmVycyB8fCAoYXR0cnMuJCRvYnNlcnZlcnMgPSBjcmVhdGVNYXAoKSkpLFxuICAgICAgICAgICAgbGlzdGVuZXJzID0gKCQkb2JzZXJ2ZXJzW2tleV0gfHwgKCQkb2JzZXJ2ZXJzW2tleV0gPSBbXSkpO1xuXG4gICAgICAgIGxpc3RlbmVycy5wdXNoKGZuKTtcbiAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghbGlzdGVuZXJzLiQkaW50ZXIgJiYgYXR0cnMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAhaXNVbmRlZmluZWQoYXR0cnNba2V5XSkpIHtcbiAgICAgICAgICAgIC8vIG5vIG9uZSByZWdpc3RlcmVkIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLCBzbyBsZXRzIGNhbGwgaXQgbWFudWFsbHlcbiAgICAgICAgICAgIGZuKGF0dHJzW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFycmF5UmVtb3ZlKGxpc3RlbmVycywgZm4pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzZXRTcGVjaWFsQXR0cihlbGVtZW50LCBhdHRyTmFtZSwgdmFsdWUpIHtcbiAgICAgIC8vIEF0dHJpYnV0ZXMgbmFtZXMgdGhhdCBkbyBub3Qgc3RhcnQgd2l0aCBsZXR0ZXJzIChzdWNoIGFzIGAoY2xpY2spYCkgY2Fubm90IGJlIHNldCB1c2luZyBgc2V0QXR0cmlidXRlYFxuICAgICAgLy8gc28gd2UgaGF2ZSB0byBqdW1wIHRocm91Z2ggc29tZSBob29wcyB0byBnZXQgc3VjaCBhbiBhdHRyaWJ1dGVcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvcHVsbC8xMzMxOFxuICAgICAgc3BlY2lhbEF0dHJIb2xkZXIuaW5uZXJIVE1MID0gJzxzcGFuICcgKyBhdHRyTmFtZSArICc+JztcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gc3BlY2lhbEF0dHJIb2xkZXIuZmlyc3RDaGlsZC5hdHRyaWJ1dGVzO1xuICAgICAgdmFyIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbMF07XG4gICAgICAvLyBXZSBoYXZlIHRvIHJlbW92ZSB0aGUgYXR0cmlidXRlIGZyb20gaXRzIGNvbnRhaW5lciBlbGVtZW50IGJlZm9yZSB3ZSBjYW4gYWRkIGl0IHRvIHRoZSBkZXN0aW5hdGlvbiBlbGVtZW50XG4gICAgICBhdHRyaWJ1dGVzLnJlbW92ZU5hbWVkSXRlbShhdHRyaWJ1dGUubmFtZSk7XG4gICAgICBhdHRyaWJ1dGUudmFsdWUgPSB2YWx1ZTtcbiAgICAgIGVsZW1lbnQuYXR0cmlidXRlcy5zZXROYW1lZEl0ZW0oYXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzYWZlQWRkQ2xhc3MoJGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaWdub3JlLCBzaW5jZSBpdCBtZWFucyB0aGF0IHdlIGFyZSB0cnlpbmcgdG8gc2V0IGNsYXNzIG9uXG4gICAgICAgIC8vIFNWRyBlbGVtZW50LCB3aGVyZSBjbGFzcyBuYW1lIGlzIHJlYWQtb25seS5cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIHZhciBzdGFydFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLFxuICAgICAgICBlbmRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksXG4gICAgICAgIGRlbm9ybWFsaXplVGVtcGxhdGUgPSAoc3RhcnRTeW1ib2wgPT09ICd7eycgJiYgZW5kU3ltYm9sICA9PT0gJ319JylcbiAgICAgICAgICAgID8gaWRlbnRpdHlcbiAgICAgICAgICAgIDogZnVuY3Rpb24gZGVub3JtYWxpemVUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZSgvXFx7XFx7L2csIHN0YXJ0U3ltYm9sKS5yZXBsYWNlKC99fS9nLCBlbmRTeW1ib2wpO1xuICAgICAgICB9LFxuICAgICAgICBOR19BVFRSX0JJTkRJTkcgPSAvXm5nQXR0cltBLVpdLztcbiAgICB2YXIgTVVMVElfRUxFTUVOVF9ESVJfUkUgPSAvXiguKylTdGFydCQvO1xuXG4gICAgY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkQmluZGluZ0luZm8oJGVsZW1lbnQsIGJpbmRpbmcpIHtcbiAgICAgIHZhciBiaW5kaW5ncyA9ICRlbGVtZW50LmRhdGEoJyRiaW5kaW5nJykgfHwgW107XG5cbiAgICAgIGlmIChpc0FycmF5KGJpbmRpbmcpKSB7XG4gICAgICAgIGJpbmRpbmdzID0gYmluZGluZ3MuY29uY2F0KGJpbmRpbmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluZGluZ3MucHVzaChiaW5kaW5nKTtcbiAgICAgIH1cblxuICAgICAgJGVsZW1lbnQuZGF0YSgnJGJpbmRpbmcnLCBiaW5kaW5ncyk7XG4gICAgfSA6IG5vb3A7XG5cbiAgICBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkQmluZGluZ0NsYXNzKCRlbGVtZW50KSB7XG4gICAgICBzYWZlQWRkQ2xhc3MoJGVsZW1lbnQsICduZy1iaW5kaW5nJyk7XG4gICAgfSA6IG5vb3A7XG5cbiAgICBjb21waWxlLiQkYWRkU2NvcGVJbmZvID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkU2NvcGVJbmZvKCRlbGVtZW50LCBzY29wZSwgaXNvbGF0ZWQsIG5vVGVtcGxhdGUpIHtcbiAgICAgIHZhciBkYXRhTmFtZSA9IGlzb2xhdGVkID8gKG5vVGVtcGxhdGUgPyAnJGlzb2xhdGVTY29wZU5vVGVtcGxhdGUnIDogJyRpc29sYXRlU2NvcGUnKSA6ICckc2NvcGUnO1xuICAgICAgJGVsZW1lbnQuZGF0YShkYXRhTmFtZSwgc2NvcGUpO1xuICAgIH0gOiBub29wO1xuXG4gICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MgPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRTY29wZUNsYXNzKCRlbGVtZW50LCBpc29sYXRlZCkge1xuICAgICAgc2FmZUFkZENsYXNzKCRlbGVtZW50LCBpc29sYXRlZCA/ICduZy1pc29sYXRlLXNjb3BlJyA6ICduZy1zY29wZScpO1xuICAgIH0gOiBub29wO1xuXG4gICAgY29tcGlsZS4kJGNyZWF0ZUNvbW1lbnQgPSBmdW5jdGlvbihkaXJlY3RpdmVOYW1lLCBjb21tZW50KSB7XG4gICAgICB2YXIgY29udGVudCA9ICcnO1xuICAgICAgaWYgKGRlYnVnSW5mb0VuYWJsZWQpIHtcbiAgICAgICAgY29udGVudCA9ICcgJyArIChkaXJlY3RpdmVOYW1lIHx8ICcnKSArICc6ICc7XG4gICAgICAgIGlmIChjb21tZW50KSBjb250ZW50ICs9IGNvbW1lbnQgKyAnICc7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2luZG93LmRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoY29udGVudCk7XG4gICAgfTtcblxuICAgIHJldHVybiBjb21waWxlO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgZnVuY3Rpb24gY29tcGlsZSgkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XG4gICAgICBpZiAoISgkY29tcGlsZU5vZGVzIGluc3RhbmNlb2YganFMaXRlKSkge1xuICAgICAgICAvLyBqcXVlcnkgYWx3YXlzIHJld3JhcHMsIHdoZXJlYXMgd2UgbmVlZCB0byBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgc2VsZWN0b3Igc28gdGhhdCB3ZSBjYW5cbiAgICAgICAgLy8gbW9kaWZ5IGl0LlxuICAgICAgICAkY29tcGlsZU5vZGVzID0ganFMaXRlKCRjb21waWxlTm9kZXMpO1xuICAgICAgfVxuICAgICAgdmFyIGNvbXBvc2l0ZUxpbmtGbiA9XG4gICAgICAgICAgICAgIGNvbXBpbGVOb2RlcygkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sICRjb21waWxlTm9kZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtcbiAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUNsYXNzKCRjb21waWxlTm9kZXMpO1xuICAgICAgdmFyIG5hbWVzcGFjZSA9IG51bGw7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gcHVibGljTGlua0ZuKHNjb3BlLCBjbG9uZUNvbm5lY3RGbiwgb3B0aW9ucykge1xuICAgICAgICBpZiAoISRjb21waWxlTm9kZXMpIHtcbiAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbXVsdGlsaW5rJywgJ1RoaXMgZWxlbWVudCBoYXMgYWxyZWFkeSBiZWVuIGxpbmtlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnRBcmcoc2NvcGUsICdzY29wZScpO1xuXG4gICAgICAgIGlmIChwcmV2aW91c0NvbXBpbGVDb250ZXh0ICYmIHByZXZpb3VzQ29tcGlsZUNvbnRleHQubmVlZHNOZXdTY29wZSkge1xuICAgICAgICAgIC8vIEEgcGFyZW50IGRpcmVjdGl2ZSBkaWQgYSByZXBsYWNlIGFuZCBhIGRpcmVjdGl2ZSBvbiB0aGlzIGVsZW1lbnQgYXNrZWRcbiAgICAgICAgICAvLyBmb3IgdHJhbnNjbHVzaW9uLCB3aGljaCBjYXVzZWQgdXMgdG8gbG9zZSBhIGxheWVyIG9mIGVsZW1lbnQgb24gd2hpY2hcbiAgICAgICAgICAvLyB3ZSBjb3VsZCBob2xkIHRoZSBuZXcgdHJhbnNjbHVzaW9uIHNjb3BlLCBzbyB3ZSB3aWxsIGNyZWF0ZSBpdCBtYW51YWxseVxuICAgICAgICAgIC8vIGhlcmUuXG4gICAgICAgICAgc2NvcGUgPSBzY29wZS4kcGFyZW50LiRuZXcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gPSBvcHRpb25zLnBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLFxuICAgICAgICAgIHRyYW5zY2x1ZGVDb250cm9sbGVycyA9IG9wdGlvbnMudHJhbnNjbHVkZUNvbnRyb2xsZXJzLFxuICAgICAgICAgIGZ1dHVyZVBhcmVudEVsZW1lbnQgPSBvcHRpb25zLmZ1dHVyZVBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgLy8gV2hlbiBgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm5gIGlzIHBhc3NlZCwgaXQgaXMgYVxuICAgICAgICAvLyBgY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGVgIGZ1bmN0aW9uIChpdCB3YXMgcHJldmlvdXNseSBwYXNzZWRcbiAgICAgICAgLy8gYXMgYHRyYW5zY2x1ZGVgIHRvIGRpcmVjdGl2ZS5saW5rKSBzbyB3ZSBtdXN0IHVud3JhcCBpdCB0byBnZXRcbiAgICAgICAgLy8gaXRzIGBib3VuZFRyYW5zY2x1ZGVGbmBcbiAgICAgICAgaWYgKHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuICYmIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLiQkYm91bmRUcmFuc2NsdWRlKSB7XG4gICAgICAgICAgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gPSBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbi4kJGJvdW5kVHJhbnNjbHVkZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgICAgbmFtZXNwYWNlID0gZGV0ZWN0TmFtZXNwYWNlRm9yQ2hpbGRFbGVtZW50cyhmdXR1cmVQYXJlbnRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgJGxpbmtOb2RlO1xuICAgICAgICBpZiAobmFtZXNwYWNlICE9PSAnaHRtbCcpIHtcbiAgICAgICAgICAvLyBXaGVuIHVzaW5nIGEgZGlyZWN0aXZlIHdpdGggcmVwbGFjZTp0cnVlIGFuZCB0ZW1wbGF0ZVVybCB0aGUgJGNvbXBpbGVOb2Rlc1xuICAgICAgICAgIC8vIChvciBhIGNoaWxkIGVsZW1lbnQgaW5zaWRlIG9mIHRoZW0pXG4gICAgICAgICAgLy8gbWlnaHQgY2hhbmdlLCBzbyB3ZSBuZWVkIHRvIHJlY3JlYXRlIHRoZSBuYW1lc3BhY2UgYWRhcHRlZCBjb21waWxlTm9kZXNcbiAgICAgICAgICAvLyBmb3IgY2FsbCB0byB0aGUgbGluayBmdW5jdGlvbi5cbiAgICAgICAgICAvLyBOb3RlOiBUaGlzIHdpbGwgYWxyZWFkeSBjbG9uZSB0aGUgbm9kZXMuLi5cbiAgICAgICAgICAkbGlua05vZGUgPSBqcUxpdGUoXG4gICAgICAgICAgICB3cmFwVGVtcGxhdGUobmFtZXNwYWNlLCBqcUxpdGUoJzxkaXY+PC9kaXY+JykuYXBwZW5kKCRjb21waWxlTm9kZXMpLmh0bWwoKSlcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKGNsb25lQ29ubmVjdEZuKSB7XG4gICAgICAgICAgLy8gaW1wb3J0YW50ISE6IHdlIG11c3QgY2FsbCBvdXIganFMaXRlLmNsb25lKCkgc2luY2UgdGhlIGpRdWVyeSBvbmUgaXMgdHJ5aW5nIHRvIGJlIHNtYXJ0XG4gICAgICAgICAgLy8gYW5kIHNvbWV0aW1lcyBjaGFuZ2VzIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIERPTS5cbiAgICAgICAgICAkbGlua05vZGUgPSBKUUxpdGVQcm90b3R5cGUuY2xvbmUuY2FsbCgkY29tcGlsZU5vZGVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbGlua05vZGUgPSAkY29tcGlsZU5vZGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyYW5zY2x1ZGVDb250cm9sbGVycykge1xuICAgICAgICAgIGZvciAodmFyIGNvbnRyb2xsZXJOYW1lIGluIHRyYW5zY2x1ZGVDb250cm9sbGVycykge1xuICAgICAgICAgICAgJGxpbmtOb2RlLmRhdGEoJyQnICsgY29udHJvbGxlck5hbWUgKyAnQ29udHJvbGxlcicsIHRyYW5zY2x1ZGVDb250cm9sbGVyc1tjb250cm9sbGVyTmFtZV0uaW5zdGFuY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oJGxpbmtOb2RlLCBzY29wZSk7XG5cbiAgICAgICAgaWYgKGNsb25lQ29ubmVjdEZuKSBjbG9uZUNvbm5lY3RGbigkbGlua05vZGUsIHNjb3BlKTtcbiAgICAgICAgaWYgKGNvbXBvc2l0ZUxpbmtGbikgY29tcG9zaXRlTGlua0ZuKHNjb3BlLCAkbGlua05vZGUsICRsaW5rTm9kZSwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO1xuXG4gICAgICAgIGlmICghY2xvbmVDb25uZWN0Rm4pIHtcbiAgICAgICAgICAkY29tcGlsZU5vZGVzID0gY29tcG9zaXRlTGlua0ZuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJGxpbmtOb2RlO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZXRlY3ROYW1lc3BhY2VGb3JDaGlsZEVsZW1lbnRzKHBhcmVudEVsZW1lbnQpIHtcbiAgICAgIC8vIFRPRE86IE1ha2UgdGhpcyBkZXRlY3QgTWF0aE1MIGFzIHdlbGwuLi5cbiAgICAgIHZhciBub2RlID0gcGFyZW50RWxlbWVudCAmJiBwYXJlbnRFbGVtZW50WzBdO1xuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIHJldHVybiAnaHRtbCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbm9kZU5hbWVfKG5vZGUpICE9PSAnZm9yZWlnbm9iamVjdCcgJiYgdG9TdHJpbmcuY2FsbChub2RlKS5tYXRjaCgvU1ZHLykgPyAnc3ZnJyA6ICdodG1sJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21waWxlIGZ1bmN0aW9uIG1hdGNoZXMgZWFjaCBub2RlIGluIG5vZGVMaXN0IGFnYWluc3QgdGhlIGRpcmVjdGl2ZXMuIE9uY2UgYWxsIGRpcmVjdGl2ZXNcbiAgICAgKiBmb3IgYSBwYXJ0aWN1bGFyIG5vZGUgYXJlIGNvbGxlY3RlZCB0aGVpciBjb21waWxlIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQuIFRoZSBjb21waWxlXG4gICAgICogZnVuY3Rpb25zIHJldHVybiB2YWx1ZXMgLSB0aGUgbGlua2luZyBmdW5jdGlvbnMgLSBhcmUgY29tYmluZWQgaW50byBhIGNvbXBvc2l0ZSBsaW5raW5nXG4gICAgICogZnVuY3Rpb24sIHdoaWNoIGlzIHRoZSBhIGxpbmtpbmcgZnVuY3Rpb24gZm9yIHRoZSBub2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3QgYW4gYXJyYXkgb2Ygbm9kZXMgb3IgTm9kZUxpc3QgdG8gY29tcGlsZVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oYW5ndWxhci5TY29wZSwgY2xvbmVBdHRhY2hGbj0pfSB0cmFuc2NsdWRlRm4gQSBsaW5raW5nIGZ1bmN0aW9uLCB3aGVyZSB0aGVcbiAgICAgKiAgICAgICAgc2NvcGUgYXJndW1lbnQgaXMgYXV0by1nZW5lcmF0ZWQgdG8gdGhlIG5ldyBjaGlsZCBvZiB0aGUgdHJhbnNjbHVkZWQgcGFyZW50IHNjb3BlLlxuICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudD19ICRyb290RWxlbWVudCBJZiB0aGUgbm9kZUxpc3QgaXMgdGhlIHJvb3Qgb2YgdGhlIGNvbXBpbGF0aW9uIHRyZWUgdGhlblxuICAgICAqICAgICAgICB0aGUgcm9vdEVsZW1lbnQgbXVzdCBiZSBzZXQgdGhlIGpxTGl0ZSBjb2xsZWN0aW9uIG9mIHRoZSBjb21waWxlIHJvb3QuIFRoaXMgaXNcbiAgICAgKiAgICAgICAgbmVlZGVkIHNvIHRoYXQgdGhlIGpxTGl0ZSBjb2xsZWN0aW9uIGl0ZW1zIGNhbiBiZSByZXBsYWNlZCB3aXRoIHdpZGdldHMuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBtYXhQcmlvcml0eSBNYXggZGlyZWN0aXZlIHByaW9yaXR5LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBjb21wb3NpdGUgbGlua2luZyBmdW5jdGlvbiBvZiBhbGwgb2YgdGhlIG1hdGNoZWQgZGlyZWN0aXZlcyBvciBudWxsLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBpbGVOb2Rlcyhub2RlTGlzdCwgdHJhbnNjbHVkZUZuLCAkcm9vdEVsZW1lbnQsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xuICAgICAgdmFyIGxpbmtGbnMgPSBbXSxcbiAgICAgICAgICAvLyBgbm9kZUxpc3RgIGNhbiBiZSBlaXRoZXIgYW4gZWxlbWVudCdzIGAuY2hpbGROb2Rlc2AgKGxpdmUgTm9kZUxpc3QpXG4gICAgICAgICAgLy8gb3IgYSBqcUxpdGUvalF1ZXJ5IGNvbGxlY3Rpb24gb3IgYW4gYXJyYXlcbiAgICAgICAgICBub3RMaXZlTGlzdCA9IGlzQXJyYXkobm9kZUxpc3QpIHx8IChub2RlTGlzdCBpbnN0YW5jZW9mIGpxTGl0ZSksXG4gICAgICAgICAgYXR0cnMsIGRpcmVjdGl2ZXMsIG5vZGVMaW5rRm4sIGNoaWxkTm9kZXMsIGNoaWxkTGlua0ZuLCBsaW5rRm5Gb3VuZCwgbm9kZUxpbmtGbkZvdW5kO1xuXG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXR0cnMgPSBuZXcgQXR0cmlidXRlcygpO1xuXG4gICAgICAgIC8vIFN1cHBvcnQ6IElFIDExIG9ubHlcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgIzExNzgxIGFuZCAjMTQ5MjRcbiAgICAgICAgaWYgKG1zaWUgPT09IDExKSB7XG4gICAgICAgICAgbWVyZ2VDb25zZWN1dGl2ZVRleHROb2Rlcyhub2RlTGlzdCwgaSwgbm90TGl2ZUxpc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2UgbXVzdCBhbHdheXMgcmVmZXIgdG8gYG5vZGVMaXN0W2ldYCBoZXJlYWZ0ZXIsXG4gICAgICAgIC8vIHNpbmNlIHRoZSBub2RlcyBjYW4gYmUgcmVwbGFjZWQgdW5kZXJuZWF0aCB1cy5cbiAgICAgICAgZGlyZWN0aXZlcyA9IGNvbGxlY3REaXJlY3RpdmVzKG5vZGVMaXN0W2ldLCBbXSwgYXR0cnMsIGkgPT09IDAgPyBtYXhQcmlvcml0eSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ25vcmVEaXJlY3RpdmUpO1xuXG4gICAgICAgIG5vZGVMaW5rRm4gPSAoZGlyZWN0aXZlcy5sZW5ndGgpXG4gICAgICAgICAgICA/IGFwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLCBub2RlTGlzdFtpXSwgYXR0cnMsIHRyYW5zY2x1ZGVGbiwgJHJvb3RFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLCBbXSwgW10sIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpXG4gICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgaWYgKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi5zY29wZSkge1xuICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUNsYXNzKGF0dHJzLiQkZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZExpbmtGbiA9IChub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAhKGNoaWxkTm9kZXMgPSBub2RlTGlzdFtpXS5jaGlsZE5vZGVzKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICFjaGlsZE5vZGVzLmxlbmd0aClcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiBjb21waWxlTm9kZXMoY2hpbGROb2RlcyxcbiAgICAgICAgICAgICAgICAgbm9kZUxpbmtGbiA/IChcbiAgICAgICAgICAgICAgICAgIChub2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50IHx8ICFub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgICYmIG5vZGVMaW5rRm4udHJhbnNjbHVkZSkgOiB0cmFuc2NsdWRlRm4pO1xuXG4gICAgICAgIGlmIChub2RlTGlua0ZuIHx8IGNoaWxkTGlua0ZuKSB7XG4gICAgICAgICAgbGlua0Zucy5wdXNoKGksIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuKTtcbiAgICAgICAgICBsaW5rRm5Gb3VuZCA9IHRydWU7XG4gICAgICAgICAgbm9kZUxpbmtGbkZvdW5kID0gbm9kZUxpbmtGbkZvdW5kIHx8IG5vZGVMaW5rRm47XG4gICAgICAgIH1cblxuICAgICAgICAvL3VzZSB0aGUgcHJldmlvdXMgY29udGV4dCBvbmx5IGZvciB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgdmlydHVhbCBncm91cFxuICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gcmV0dXJuIGEgbGlua2luZyBmdW5jdGlvbiBpZiB3ZSBoYXZlIGZvdW5kIGFueXRoaW5nLCBudWxsIG90aGVyd2lzZVxuICAgICAgcmV0dXJuIGxpbmtGbkZvdW5kID8gY29tcG9zaXRlTGlua0ZuIDogbnVsbDtcblxuICAgICAgZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHNjb3BlLCBub2RlTGlzdCwgJHJvb3RFbGVtZW50LCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGUsIGNoaWxkU2NvcGUsIGksIGlpLCBpZHgsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm47XG4gICAgICAgIHZhciBzdGFibGVOb2RlTGlzdDtcblxuXG4gICAgICAgIGlmIChub2RlTGlua0ZuRm91bmQpIHtcbiAgICAgICAgICAvLyBjb3B5IG5vZGVMaXN0IHNvIHRoYXQgaWYgYSBub2RlTGlua0ZuIHJlbW92ZXMgb3IgYWRkcyBhbiBlbGVtZW50IGF0IHRoaXMgRE9NIGxldmVsIG91clxuICAgICAgICAgIC8vIG9mZnNldHMgZG9uJ3QgZ2V0IHNjcmV3ZWQgdXBcbiAgICAgICAgICB2YXIgbm9kZUxpc3RMZW5ndGggPSBub2RlTGlzdC5sZW5ndGg7XG4gICAgICAgICAgc3RhYmxlTm9kZUxpc3QgPSBuZXcgQXJyYXkobm9kZUxpc3RMZW5ndGgpO1xuXG4gICAgICAgICAgLy8gY3JlYXRlIGEgc3BhcnNlIGFycmF5IGJ5IG9ubHkgY29weWluZyB0aGUgZWxlbWVudHMgd2hpY2ggaGF2ZSBhIGxpbmtGblxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaW5rRm5zLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgICAgICBpZHggPSBsaW5rRm5zW2ldO1xuICAgICAgICAgICAgc3RhYmxlTm9kZUxpc3RbaWR4XSA9IG5vZGVMaXN0W2lkeF07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YWJsZU5vZGVMaXN0ID0gbm9kZUxpc3Q7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgaWk7KSB7XG4gICAgICAgICAgbm9kZSA9IHN0YWJsZU5vZGVMaXN0W2xpbmtGbnNbaSsrXV07XG4gICAgICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgICAgICBjaGlsZExpbmtGbiA9IGxpbmtGbnNbaSsrXTtcblxuICAgICAgICAgIGlmIChub2RlTGlua0ZuKSB7XG4gICAgICAgICAgICBpZiAobm9kZUxpbmtGbi5zY29wZSkge1xuICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gc2NvcGUuJG5ldygpO1xuICAgICAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVJbmZvKGpxTGl0ZShub2RlKSwgY2hpbGRTY29wZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChub2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihcbiAgICAgICAgICAgICAgICAgIHNjb3BlLCBub2RlTGlua0ZuLnRyYW5zY2x1ZGUsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICghbm9kZUxpbmtGbi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQgJiYgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiAmJiB0cmFuc2NsdWRlRm4pIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCB0cmFuc2NsdWRlRm4pO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbm9kZUxpbmtGbihjaGlsZExpbmtGbiwgY2hpbGRTY29wZSwgbm9kZSwgJHJvb3RFbGVtZW50LCBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGRMaW5rRm4pIHtcbiAgICAgICAgICAgIGNoaWxkTGlua0ZuKHNjb3BlLCBub2RlLmNoaWxkTm9kZXMsIHVuZGVmaW5lZCwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1lcmdlQ29uc2VjdXRpdmVUZXh0Tm9kZXMobm9kZUxpc3QsIGlkeCwgbm90TGl2ZUxpc3QpIHtcbiAgICAgIHZhciBub2RlID0gbm9kZUxpc3RbaWR4XTtcbiAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICB2YXIgc2libGluZztcblxuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IE5PREVfVFlQRV9URVhUKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgc2libGluZyA9IHBhcmVudCA/IG5vZGUubmV4dFNpYmxpbmcgOiBub2RlTGlzdFtpZHggKyAxXTtcbiAgICAgICAgaWYgKCFzaWJsaW5nIHx8IHNpYmxpbmcubm9kZVR5cGUgIT09IE5PREVfVFlQRV9URVhUKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlLm5vZGVWYWx1ZSA9IG5vZGUubm9kZVZhbHVlICsgc2libGluZy5ub2RlVmFsdWU7XG5cbiAgICAgICAgaWYgKHNpYmxpbmcucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHNpYmxpbmcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm90TGl2ZUxpc3QgJiYgc2libGluZyA9PT0gbm9kZUxpc3RbaWR4ICsgMV0pIHtcbiAgICAgICAgICBub2RlTGlzdC5zcGxpY2UoaWR4ICsgMSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuLCBwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICBmdW5jdGlvbiBib3VuZFRyYW5zY2x1ZGVGbih0cmFuc2NsdWRlZFNjb3BlLCBjbG9uZUZuLCBjb250cm9sbGVycywgZnV0dXJlUGFyZW50RWxlbWVudCwgY29udGFpbmluZ1Njb3BlKSB7XG5cbiAgICAgICAgaWYgKCF0cmFuc2NsdWRlZFNjb3BlKSB7XG4gICAgICAgICAgdHJhbnNjbHVkZWRTY29wZSA9IHNjb3BlLiRuZXcoZmFsc2UsIGNvbnRhaW5pbmdTY29wZSk7XG4gICAgICAgICAgdHJhbnNjbHVkZWRTY29wZS4kJHRyYW5zY2x1ZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cmFuc2NsdWRlRm4odHJhbnNjbHVkZWRTY29wZSwgY2xvbmVGbiwge1xuICAgICAgICAgIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuOiBwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuLFxuICAgICAgICAgIHRyYW5zY2x1ZGVDb250cm9sbGVyczogY29udHJvbGxlcnMsXG4gICAgICAgICAgZnV0dXJlUGFyZW50RWxlbWVudDogZnV0dXJlUGFyZW50RWxlbWVudFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgbmVlZCAgdG8gYXR0YWNoIHRoZSB0cmFuc2NsdXNpb24gc2xvdHMgb250byB0aGUgYGJvdW5kVHJhbnNjbHVkZUZuYFxuICAgICAgLy8gc28gdGhhdCB0aGV5IGFyZSBhdmFpbGFibGUgaW5zaWRlIHRoZSBgY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGVgIGZ1bmN0aW9uXG4gICAgICB2YXIgYm91bmRTbG90cyA9IGJvdW5kVHJhbnNjbHVkZUZuLiQkc2xvdHMgPSBjcmVhdGVNYXAoKTtcbiAgICAgIGZvciAodmFyIHNsb3ROYW1lIGluIHRyYW5zY2x1ZGVGbi4kJHNsb3RzKSB7XG4gICAgICAgIGlmICh0cmFuc2NsdWRlRm4uJCRzbG90c1tzbG90TmFtZV0pIHtcbiAgICAgICAgICBib3VuZFNsb3RzW3Nsb3ROYW1lXSA9IGNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCB0cmFuc2NsdWRlRm4uJCRzbG90c1tzbG90TmFtZV0sIHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJvdW5kU2xvdHNbc2xvdE5hbWVdID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYm91bmRUcmFuc2NsdWRlRm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9va3MgZm9yIGRpcmVjdGl2ZXMgb24gdGhlIGdpdmVuIG5vZGUgYW5kIGFkZHMgdGhlbSB0byB0aGUgZGlyZWN0aXZlIGNvbGxlY3Rpb24gd2hpY2ggaXNcbiAgICAgKiBzb3J0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm9kZSBOb2RlIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0gZGlyZWN0aXZlcyBBbiBhcnJheSB0byB3aGljaCB0aGUgZGlyZWN0aXZlcyBhcmUgYWRkZWQgdG8uIFRoaXMgYXJyYXkgaXMgc29ydGVkIGJlZm9yZVxuICAgICAqICAgICAgICB0aGUgZnVuY3Rpb24gcmV0dXJucy5cbiAgICAgKiBAcGFyYW0gYXR0cnMgVGhlIHNoYXJlZCBhdHRycyBvYmplY3Qgd2hpY2ggaXMgdXNlZCB0byBwb3B1bGF0ZSB0aGUgbm9ybWFsaXplZCBhdHRyaWJ1dGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbWF4UHJpb3JpdHkgTWF4IGRpcmVjdGl2ZSBwcmlvcml0eS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb2xsZWN0RGlyZWN0aXZlcyhub2RlLCBkaXJlY3RpdmVzLCBhdHRycywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSkge1xuICAgICAgdmFyIG5vZGVUeXBlID0gbm9kZS5ub2RlVHlwZSxcbiAgICAgICAgICBhdHRyc01hcCA9IGF0dHJzLiRhdHRyLFxuICAgICAgICAgIG1hdGNoLFxuICAgICAgICAgIG5vZGVOYW1lLFxuICAgICAgICAgIGNsYXNzTmFtZTtcblxuICAgICAgc3dpdGNoIChub2RlVHlwZSkge1xuICAgICAgICBjYXNlIE5PREVfVFlQRV9FTEVNRU5UOiAvKiBFbGVtZW50ICovXG5cbiAgICAgICAgICBub2RlTmFtZSA9IG5vZGVOYW1lXyhub2RlKTtcblxuICAgICAgICAgIC8vIHVzZSB0aGUgbm9kZSBuYW1lOiA8ZGlyZWN0aXZlPlxuICAgICAgICAgIGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLFxuICAgICAgICAgICAgICBkaXJlY3RpdmVOb3JtYWxpemUobm9kZU5hbWUpLCAnRScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpO1xuXG4gICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBhdHRyaWJ1dGVzXG4gICAgICAgICAgZm9yICh2YXIgYXR0ciwgbmFtZSwgbk5hbWUsIG5nQXR0ck5hbWUsIHZhbHVlLCBpc05nQXR0ciwgbkF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgIGogPSAwLCBqaiA9IG5BdHRycyAmJiBuQXR0cnMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgdmFyIGF0dHJTdGFydE5hbWUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBhdHRyRW5kTmFtZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBhdHRyID0gbkF0dHJzW2pdO1xuICAgICAgICAgICAgbmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcblxuICAgICAgICAgICAgLy8gc3VwcG9ydCBuZ0F0dHIgYXR0cmlidXRlIGJpbmRpbmdcbiAgICAgICAgICAgIG5nQXR0ck5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobmFtZSk7XG4gICAgICAgICAgICBpc05nQXR0ciA9IE5HX0FUVFJfQklORElORy50ZXN0KG5nQXR0ck5hbWUpO1xuICAgICAgICAgICAgaWYgKGlzTmdBdHRyKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoUFJFRklYX1JFR0VYUCwgJycpXG4gICAgICAgICAgICAgICAgLnN1YnN0cig4KS5yZXBsYWNlKC9fKC4pL2csIGZ1bmN0aW9uKG1hdGNoLCBsZXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG11bHRpRWxlbWVudE1hdGNoID0gbmdBdHRyTmFtZS5tYXRjaChNVUxUSV9FTEVNRU5UX0RJUl9SRSk7XG4gICAgICAgICAgICBpZiAobXVsdGlFbGVtZW50TWF0Y2ggJiYgZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQobXVsdGlFbGVtZW50TWF0Y2hbMV0pKSB7XG4gICAgICAgICAgICAgIGF0dHJTdGFydE5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICBhdHRyRW5kTmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gNSkgKyAnZW5kJztcbiAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gNik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICBhdHRyc01hcFtuTmFtZV0gPSBuYW1lO1xuICAgICAgICAgICAgaWYgKGlzTmdBdHRyIHx8ICFhdHRycy5oYXNPd25Qcm9wZXJ0eShuTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoZ2V0Qm9vbGVhbkF0dHJOYW1lKG5vZGUsIG5OYW1lKSkge1xuICAgICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdHJ1ZTsgLy8gcHJlc2VuY2UgbWVhbnMgdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZShub2RlLCBkaXJlY3RpdmVzLCB2YWx1ZSwgbk5hbWUsIGlzTmdBdHRyKTtcbiAgICAgICAgICAgIGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLCBuTmFtZSwgJ0EnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBhdHRyU3RhcnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyRW5kTmFtZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnaW5wdXQnICYmIG5vZGUuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICdoaWRkZW4nKSB7XG4gICAgICAgICAgICAvLyBIaWRkZW4gaW5wdXQgZWxlbWVudHMgY2FuIGhhdmUgc3RyYW5nZSBiZWhhdmlvdXIgd2hlbiBuYXZpZ2F0aW5nIGJhY2sgdG8gdGhlIHBhZ2VcbiAgICAgICAgICAgIC8vIFRoaXMgdGVsbHMgdGhlIGJyb3dzZXIgbm90IHRvIHRyeSB0byBjYWNoZSBhbmQgcmVpbnN0YXRlIHByZXZpb3VzIHZhbHVlc1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2F1dG9jb21wbGV0ZScsICdvZmYnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB1c2UgY2xhc3MgYXMgZGlyZWN0aXZlXG4gICAgICAgICAgaWYgKCFjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkKSBicmVhaztcbiAgICAgICAgICBjbGFzc05hbWUgPSBub2RlLmNsYXNzTmFtZTtcbiAgICAgICAgICBpZiAoaXNPYmplY3QoY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICAvLyBNYXliZSBTVkdBbmltYXRlZFN0cmluZ1xuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuYW5pbVZhbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzU3RyaW5nKGNsYXNzTmFtZSkgJiYgY2xhc3NOYW1lICE9PSAnJykge1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IENMQVNTX0RJUkVDVElWRV9SRUdFWFAuZXhlYyhjbGFzc05hbWUpKSkge1xuICAgICAgICAgICAgICBuTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShtYXRjaFsyXSk7XG4gICAgICAgICAgICAgIGlmIChhZGREaXJlY3RpdmUoZGlyZWN0aXZlcywgbk5hbWUsICdDJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSkpIHtcbiAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB0cmltKG1hdGNoWzNdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3Vic3RyKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTk9ERV9UWVBFX1RFWFQ6IC8qIFRleHQgTm9kZSAqL1xuICAgICAgICAgIGFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZShkaXJlY3RpdmVzLCBub2RlLm5vZGVWYWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTk9ERV9UWVBFX0NPTU1FTlQ6IC8qIENvbW1lbnQgKi9cbiAgICAgICAgICBpZiAoIWNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZCkgYnJlYWs7XG4gICAgICAgICAgY29sbGVjdENvbW1lbnREaXJlY3RpdmVzKG5vZGUsIGRpcmVjdGl2ZXMsIGF0dHJzLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgZGlyZWN0aXZlcy5zb3J0KGJ5UHJpb3JpdHkpO1xuICAgICAgcmV0dXJuIGRpcmVjdGl2ZXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29sbGVjdENvbW1lbnREaXJlY3RpdmVzKG5vZGUsIGRpcmVjdGl2ZXMsIGF0dHJzLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSB7XG4gICAgICAvLyBmdW5jdGlvbiBjcmVhdGVkIGJlY2F1c2Ugb2YgcGVyZm9ybWFuY2UsIHRyeS9jYXRjaCBkaXNhYmxlc1xuICAgICAgLy8gdGhlIG9wdGltaXphdGlvbiBvZiB0aGUgd2hvbGUgZnVuY3Rpb24gIzE0ODQ4XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbWF0Y2ggPSBDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAuZXhlYyhub2RlLm5vZGVWYWx1ZSk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIHZhciBuTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShtYXRjaFsxXSk7XG4gICAgICAgICAgaWYgKGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLCBuTmFtZSwgJ00nLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSkge1xuICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdHJpbShtYXRjaFsyXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIHR1cm5zIG91dCB0aGF0IHVuZGVyIHNvbWUgY2lyY3Vtc3RhbmNlcyBJRTkgdGhyb3dzIGVycm9ycyB3aGVuIG9uZSBhdHRlbXB0cyB0byByZWFkXG4gICAgICAgIC8vIGNvbW1lbnQncyBub2RlIHZhbHVlLlxuICAgICAgICAvLyBKdXN0IGlnbm9yZSBpdCBhbmQgY29udGludWUuIChDYW4ndCBzZWVtIHRvIHJlcHJvZHVjZSBpbiB0ZXN0IGNhc2UuKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgbm9kZSB3aXRoIGEgZGlyZWN0aXZlLXN0YXJ0IGl0IGNvbGxlY3RzIGFsbCBvZiB0aGUgc2libGluZ3MgdW50aWwgaXQgZmluZHNcbiAgICAgKiBkaXJlY3RpdmUtZW5kLlxuICAgICAqIEBwYXJhbSBub2RlXG4gICAgICogQHBhcmFtIGF0dHJTdGFydFxuICAgICAqIEBwYXJhbSBhdHRyRW5kXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ3JvdXBTY2FuKG5vZGUsIGF0dHJTdGFydCwgYXR0ckVuZCkge1xuICAgICAgdmFyIG5vZGVzID0gW107XG4gICAgICB2YXIgZGVwdGggPSAwO1xuICAgICAgaWYgKGF0dHJTdGFydCAmJiBub2RlLmhhc0F0dHJpYnV0ZSAmJiBub2RlLmhhc0F0dHJpYnV0ZShhdHRyU3RhcnQpKSB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCd1dGVyZGlyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnVW50ZXJtaW5hdGVkIGF0dHJpYnV0ZSwgZm91bmQgXFwnezB9XFwnIGJ1dCBubyBtYXRjaGluZyBcXCd7MX1cXCcgZm91bmQuJyxcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZShhdHRyU3RhcnQpKSBkZXB0aCsrO1xuICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKGF0dHJFbmQpKSBkZXB0aC0tO1xuICAgICAgICAgIH1cbiAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9IHdoaWxlIChkZXB0aCA+IDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGpxTGl0ZShub2Rlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV3JhcHBlciBmb3IgbGlua2luZyBmdW5jdGlvbiB3aGljaCBjb252ZXJ0cyBub3JtYWwgbGlua2luZyBmdW5jdGlvbiBpbnRvIGEgZ3JvdXBlZFxuICAgICAqIGxpbmtpbmcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGxpbmtGblxuICAgICAqIEBwYXJhbSBhdHRyU3RhcnRcbiAgICAgKiBAcGFyYW0gYXR0ckVuZFxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihsaW5rRm4sIGF0dHJTdGFydCwgYXR0ckVuZCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGdyb3VwZWRFbGVtZW50c0xpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIGVsZW1lbnQgPSBncm91cFNjYW4oZWxlbWVudFswXSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgcmV0dXJuIGxpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIGdlbmVyYXRvciB0aGF0IGlzIHVzZWQgdG8gc3VwcG9ydCBib3RoIGVhZ2VyIGFuZCBsYXp5IGNvbXBpbGF0aW9uXG4gICAgICogbGlua2luZyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZWFnZXJcbiAgICAgKiBAcGFyYW0gJGNvbXBpbGVOb2Rlc1xuICAgICAqIEBwYXJhbSB0cmFuc2NsdWRlRm5cbiAgICAgKiBAcGFyYW0gbWF4UHJpb3JpdHlcbiAgICAgKiBAcGFyYW0gaWdub3JlRGlyZWN0aXZlXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ29tcGlsZUNvbnRleHRcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGlsYXRpb25HZW5lcmF0b3IoZWFnZXIsICRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xuICAgICAgdmFyIGNvbXBpbGVkO1xuXG4gICAgICBpZiAoZWFnZXIpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBpbGUoJGNvbXBpbGVOb2RlcywgdHJhbnNjbHVkZUZuLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAvKiogQHRoaXMgKi8gZnVuY3Rpb24gbGF6eUNvbXBpbGF0aW9uKCkge1xuICAgICAgICBpZiAoIWNvbXBpbGVkKSB7XG4gICAgICAgICAgY29tcGlsZWQgPSBjb21waWxlKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgcHJldmlvdXNDb21waWxlQ29udGV4dCk7XG5cbiAgICAgICAgICAvLyBOdWxsIG91dCBhbGwgb2YgdGhlc2UgcmVmZXJlbmNlcyBpbiBvcmRlciB0byBtYWtlIHRoZW0gZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvblxuICAgICAgICAgIC8vIHNpbmNlIHRoaXMgaXMgYSBwb3RlbnRpYWxseSBsb25nIGxpdmVkIGNsb3N1cmVcbiAgICAgICAgICAkY29tcGlsZU5vZGVzID0gdHJhbnNjbHVkZUZuID0gcHJldmlvdXNDb21waWxlQ29udGV4dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBpbGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9uY2UgdGhlIGRpcmVjdGl2ZXMgaGF2ZSBiZWVuIGNvbGxlY3RlZCwgdGhlaXIgY29tcGlsZSBmdW5jdGlvbnMgYXJlIGV4ZWN1dGVkLiBUaGlzIG1ldGhvZFxuICAgICAqIGlzIHJlc3BvbnNpYmxlIGZvciBpbmxpbmluZyBkaXJlY3RpdmUgdGVtcGxhdGVzIGFzIHdlbGwgYXMgdGVybWluYXRpbmcgdGhlIGFwcGxpY2F0aW9uXG4gICAgICogb2YgdGhlIGRpcmVjdGl2ZXMgaWYgdGhlIHRlcm1pbmFsIGRpcmVjdGl2ZSBoYXMgYmVlbiByZWFjaGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlcyBBcnJheSBvZiBjb2xsZWN0ZWQgZGlyZWN0aXZlcyB0byBleGVjdXRlIHRoZWlyIGNvbXBpbGUgZnVuY3Rpb24uXG4gICAgICogICAgICAgIHRoaXMgbmVlZHMgdG8gYmUgcHJlLXNvcnRlZCBieSBwcmlvcml0eSBvcmRlci5cbiAgICAgKiBAcGFyYW0ge05vZGV9IGNvbXBpbGVOb2RlIFRoZSByYXcgRE9NIG5vZGUgdG8gYXBwbHkgdGhlIGNvbXBpbGUgZnVuY3Rpb25zIHRvXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlbXBsYXRlQXR0cnMgVGhlIHNoYXJlZCBhdHRyaWJ1dGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGFuZ3VsYXIuU2NvcGUsIGNsb25lQXR0YWNoRm49KX0gdHJhbnNjbHVkZUZuIEEgbGlua2luZyBmdW5jdGlvbiwgd2hlcmUgdGhlXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlIGFyZ3VtZW50IGlzIGF1dG8tZ2VuZXJhdGVkIHRvIHRoZSBuZXdcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgb2YgdGhlIHRyYW5zY2x1ZGVkIHBhcmVudCBzY29wZS5cbiAgICAgKiBAcGFyYW0ge0pRTGl0ZX0ganFDb2xsZWN0aW9uIElmIHdlIGFyZSB3b3JraW5nIG9uIHRoZSByb290IG9mIHRoZSBjb21waWxlIHRyZWUgdGhlbiB0aGlzXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudCBoYXMgdGhlIHJvb3QganFMaXRlIGFycmF5IHNvIHRoYXQgd2UgY2FuIHJlcGxhY2Ugbm9kZXNcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uIGl0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gb3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlIEFuIG9wdGlvbmFsIGRpcmVjdGl2ZSB0aGF0IHdpbGwgYmUgaWdub3JlZCB3aGVuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsaW5nIHRoZSB0cmFuc2NsdXNpb24uXG4gICAgICogQHBhcmFtIHtBcnJheS48RnVuY3Rpb24+fSBwcmVMaW5rRm5zXG4gICAgICogQHBhcmFtIHtBcnJheS48RnVuY3Rpb24+fSBwb3N0TGlua0Zuc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcmV2aW91c0NvbXBpbGVDb250ZXh0IENvbnRleHQgdXNlZCBmb3IgcHJldmlvdXMgY29tcGlsYXRpb24gb2YgdGhlIGN1cnJlbnRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBsaW5rRm5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgY29tcGlsZU5vZGUsIHRlbXBsYXRlQXR0cnMsIHRyYW5zY2x1ZGVGbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganFDb2xsZWN0aW9uLCBvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUsIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XG4gICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0ID0gcHJldmlvdXNDb21waWxlQ29udGV4dCB8fCB7fTtcblxuICAgICAgdmFyIHRlcm1pbmFsUHJpb3JpdHkgPSAtTnVtYmVyLk1BWF9WQUxVRSxcbiAgICAgICAgICBuZXdTY29wZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQubmV3U2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXMgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0LmNvbnRyb2xsZXJEaXJlY3RpdmVzLFxuICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLFxuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC50ZW1wbGF0ZURpcmVjdGl2ZSxcbiAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLFxuICAgICAgICAgIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSBmYWxzZSxcbiAgICAgICAgICBoYXNUZW1wbGF0ZSA9IGZhbHNlLFxuICAgICAgICAgIGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSxcbiAgICAgICAgICAkY29tcGlsZU5vZGUgPSB0ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudCA9IGpxTGl0ZShjb21waWxlTm9kZSksXG4gICAgICAgICAgZGlyZWN0aXZlLFxuICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsXG4gICAgICAgICAgJHRlbXBsYXRlLFxuICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgPSBvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUsXG4gICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4gPSB0cmFuc2NsdWRlRm4sXG4gICAgICAgICAgbGlua0ZuLFxuICAgICAgICAgIGRpZFNjYW5Gb3JNdWx0aXBsZVRyYW5zY2x1c2lvbiA9IGZhbHNlLFxuICAgICAgICAgIG1pZ2h0SGF2ZU11bHRpcGxlVHJhbnNjbHVzaW9uRXJyb3IgPSBmYWxzZSxcbiAgICAgICAgICBkaXJlY3RpdmVWYWx1ZTtcblxuICAgICAgLy8gZXhlY3V0ZXMgYWxsIGRpcmVjdGl2ZXMgb24gdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgICAgIHZhciBhdHRyU3RhcnQgPSBkaXJlY3RpdmUuJCRzdGFydDtcbiAgICAgICAgdmFyIGF0dHJFbmQgPSBkaXJlY3RpdmUuJCRlbmQ7XG5cbiAgICAgICAgLy8gY29sbGVjdCBtdWx0aWJsb2NrIHNlY3Rpb25zXG4gICAgICAgIGlmIChhdHRyU3RhcnQpIHtcbiAgICAgICAgICAkY29tcGlsZU5vZGUgPSBncm91cFNjYW4oY29tcGlsZU5vZGUsIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgJHRlbXBsYXRlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0ZXJtaW5hbFByaW9yaXR5ID4gZGlyZWN0aXZlLnByaW9yaXR5KSB7XG4gICAgICAgICAgYnJlYWs7IC8vIHByZXZlbnQgZnVydGhlciBwcm9jZXNzaW5nIG9mIGRpcmVjdGl2ZXNcbiAgICAgICAgfVxuXG4gICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gZGlyZWN0aXZlLnNjb3BlO1xuXG4gICAgICAgIGlmIChkaXJlY3RpdmVWYWx1ZSkge1xuXG4gICAgICAgICAgLy8gc2tpcCB0aGUgY2hlY2sgZm9yIGRpcmVjdGl2ZXMgd2l0aCBhc3luYyB0ZW1wbGF0ZXMsIHdlJ2xsIGNoZWNrIHRoZSBkZXJpdmVkIHN5bmNcbiAgICAgICAgICAvLyBkaXJlY3RpdmUgd2hlbiB0aGUgdGVtcGxhdGUgYXJyaXZlc1xuICAgICAgICAgIGlmICghZGlyZWN0aXZlLnRlbXBsYXRlVXJsKSB7XG4gICAgICAgICAgICBpZiAoaXNPYmplY3QoZGlyZWN0aXZlVmFsdWUpKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgZGlyZWN0aXZlIGlzIHRyeWluZyB0byBhZGQgYW4gaXNvbGF0ZWQgc2NvcGUuXG4gICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGhlcmUgaXMgbm8gc2NvcGUgb2YgYW55IGtpbmQgYWxyZWFkeVxuICAgICAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgnbmV3L2lzb2xhdGVkIHNjb3BlJywgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8IG5ld1Njb3BlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgZGlyZWN0aXZlIGlzIHRyeWluZyB0byBhZGQgYSBjaGlsZCBzY29wZS5cbiAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBubyBpc29sYXRlZCBzY29wZSBhbHJlYWR5XG4gICAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCduZXcvaXNvbGF0ZWQgc2NvcGUnLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXdTY29wZURpcmVjdGl2ZSA9IG5ld1Njb3BlRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmUubmFtZTtcblxuICAgICAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgYSBjb25kaXRpb24gdGhhdCBjYW4gcmVzdWx0IGluIHRyYW5zY2x1c2lvbiBvbiB0aGUgZGlyZWN0aXZlLFxuICAgICAgICAvLyB0aGVuIHNjYW4gYWhlYWQgaW4gdGhlIHJlbWFpbmluZyBkaXJlY3RpdmVzIGZvciBvdGhlcnMgdGhhdCBtYXkgY2F1c2UgYSBtdWx0aXBsZVxuICAgICAgICAvLyB0cmFuc2NsdXNpb24gZXJyb3IgdG8gYmUgdGhyb3duIGR1cmluZyB0aGUgY29tcGlsYXRpb24gcHJvY2Vzcy4gIElmIGEgbWF0Y2hpbmcgZGlyZWN0aXZlXG4gICAgICAgIC8vIGlzIGZvdW5kLCB0aGVuIHdlIGtub3cgdGhhdCB3aGVuIHdlIGVuY291bnRlciBhIHRyYW5zY2x1ZGVkIGRpcmVjdGl2ZSwgd2UgbmVlZCB0byBlYWdlcmx5XG4gICAgICAgIC8vIGNvbXBpbGUgdGhlIGB0cmFuc2NsdWRlYCBmdW5jdGlvbiByYXRoZXIgdGhhbiBkb2luZyBpdCBsYXppbHkgaW4gb3JkZXIgdG8gdGhyb3dcbiAgICAgICAgLy8gZXhjZXB0aW9ucyBhdCB0aGUgY29ycmVjdCB0aW1lXG4gICAgICAgIGlmICghZGlkU2NhbkZvck11bHRpcGxlVHJhbnNjbHVzaW9uICYmICgoZGlyZWN0aXZlLnJlcGxhY2UgJiYgKGRpcmVjdGl2ZS50ZW1wbGF0ZVVybCB8fCBkaXJlY3RpdmUudGVtcGxhdGUpKVxuICAgICAgICAgICAgfHwgKGRpcmVjdGl2ZS50cmFuc2NsdWRlICYmICFkaXJlY3RpdmUuJCR0bGIpKSkge1xuICAgICAgICAgICAgICAgIHZhciBjYW5kaWRhdGVEaXJlY3RpdmU7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzY2FubmluZ0luZGV4ID0gaSArIDE7IChjYW5kaWRhdGVEaXJlY3RpdmUgPSBkaXJlY3RpdmVzW3NjYW5uaW5nSW5kZXgrK10pOykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGNhbmRpZGF0ZURpcmVjdGl2ZS50cmFuc2NsdWRlICYmICFjYW5kaWRhdGVEaXJlY3RpdmUuJCR0bGIpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCAoY2FuZGlkYXRlRGlyZWN0aXZlLnJlcGxhY2UgJiYgKGNhbmRpZGF0ZURpcmVjdGl2ZS50ZW1wbGF0ZVVybCB8fCBjYW5kaWRhdGVEaXJlY3RpdmUudGVtcGxhdGUpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRpZFNjYW5Gb3JNdWx0aXBsZVRyYW5zY2x1c2lvbiA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRpcmVjdGl2ZS50ZW1wbGF0ZVVybCAmJiBkaXJlY3RpdmUuY29udHJvbGxlcikge1xuICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzID0gY29udHJvbGxlckRpcmVjdGl2ZXMgfHwgY3JlYXRlTWFwKCk7XG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ1xcJycgKyBkaXJlY3RpdmVOYW1lICsgJ1xcJyBjb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXNbZGlyZWN0aXZlTmFtZV0sIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gZGlyZWN0aXZlLnRyYW5zY2x1ZGU7XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZVZhbHVlKSB7XG4gICAgICAgICAgaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UgbmdJZiBhbmQgbmdSZXBlYXQgc28gdGhhdCB3ZSBkb24ndCBjb21wbGFpbiBhYm91dCBkdXBsaWNhdGUgdHJhbnNjbHVzaW9uLlxuICAgICAgICAgIC8vIFRoaXMgb3B0aW9uIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgZGlyZWN0aXZlcyB0aGF0IGtub3cgaG93IHRvIHNhZmVseSBoYW5kbGUgZWxlbWVudCB0cmFuc2NsdXNpb24sXG4gICAgICAgICAgLy8gd2hlcmUgdGhlIHRyYW5zY2x1ZGVkIG5vZGVzIGFyZSBhZGRlZCBvciByZXBsYWNlZCBhZnRlciBsaW5raW5nLlxuICAgICAgICAgIGlmICghZGlyZWN0aXZlLiQkdGxiKSB7XG4gICAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgndHJhbnNjbHVzaW9uJywgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUgPT09ICdlbGVtZW50Jykge1xuICAgICAgICAgICAgaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGVybWluYWxQcmlvcml0eSA9IGRpcmVjdGl2ZS5wcmlvcml0eTtcbiAgICAgICAgICAgICR0ZW1wbGF0ZSA9ICRjb21waWxlTm9kZTtcbiAgICAgICAgICAgICRjb21waWxlTm9kZSA9IHRlbXBsYXRlQXR0cnMuJCRlbGVtZW50ID1cbiAgICAgICAgICAgICAgICBqcUxpdGUoY29tcGlsZS4kJGNyZWF0ZUNvbW1lbnQoZGlyZWN0aXZlTmFtZSwgdGVtcGxhdGVBdHRyc1tkaXJlY3RpdmVOYW1lXSkpO1xuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkY29tcGlsZU5vZGVbMF07XG4gICAgICAgICAgICByZXBsYWNlV2l0aChqcUNvbGxlY3Rpb24sIHNsaWNlQXJncygkdGVtcGxhdGUpLCBjb21waWxlTm9kZSk7XG5cbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gY29tcGlsYXRpb25HZW5lcmF0b3IobWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciwgJHRlbXBsYXRlLCB0cmFuc2NsdWRlRm4sIHRlcm1pbmFsUHJpb3JpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSAmJiByZXBsYWNlRGlyZWN0aXZlLm5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHBhc3MgaW46XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIGNvbnRyb2xsZXJEaXJlY3RpdmVzIC0gb3RoZXJ3aXNlIHdlJ2xsIGNyZWF0ZSBkdXBsaWNhdGVzIGNvbnRyb2xsZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSBvciB0ZW1wbGF0ZURpcmVjdGl2ZSAtIGNvbWJpbmluZyB0ZW1wbGF0ZXMgd2l0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlbGVtZW50IHRyYW5zY2x1c2lvbiBkb2Vzbid0IG1ha2Ugc2Vuc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCBvbmx5IG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgc28gdGhhdCB3ZSBwcmV2ZW50IHB1dHRpbmcgdHJhbnNjbHVzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0aGUgc2FtZSBlbGVtZW50IG1vcmUgdGhhbiBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTogbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIHZhciBzbG90cyA9IGNyZWF0ZU1hcCgpO1xuXG4gICAgICAgICAgICBpZiAoIWlzT2JqZWN0KGRpcmVjdGl2ZVZhbHVlKSkge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBqcUxpdGUoanFMaXRlQ2xvbmUoY29tcGlsZU5vZGUpKS5jb250ZW50cygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRyYW5zY2x1c2lvbiBzbG90cyxcbiAgICAgICAgICAgICAgLy8gY29sbGVjdCB0aGVtIHVwLCBjb21waWxlIHRoZW0gYW5kIHN0b3JlIHRoZWlyIHRyYW5zY2x1c2lvbiBmdW5jdGlvbnNcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICAgICAgICB2YXIgc2xvdE1hcCA9IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgICAgICB2YXIgZmlsbGVkU2xvdHMgPSBjcmVhdGVNYXAoKTtcblxuICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgZWxlbWVudCBzZWxlY3RvcnNcbiAgICAgICAgICAgICAgZm9yRWFjaChkaXJlY3RpdmVWYWx1ZSwgZnVuY3Rpb24oZWxlbWVudFNlbGVjdG9yLCBzbG90TmFtZSkge1xuICAgICAgICAgICAgICAgIC8vIElmIGFuIGVsZW1lbnQgc2VsZWN0b3Igc3RhcnRzIHdpdGggYSA/IHRoZW4gaXQgaXMgb3B0aW9uYWxcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uYWwgPSAoZWxlbWVudFNlbGVjdG9yLmNoYXJBdCgwKSA9PT0gJz8nKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50U2VsZWN0b3IgPSBvcHRpb25hbCA/IGVsZW1lbnRTZWxlY3Rvci5zdWJzdHJpbmcoMSkgOiBlbGVtZW50U2VsZWN0b3I7XG5cbiAgICAgICAgICAgICAgICBzbG90TWFwW2VsZW1lbnRTZWxlY3Rvcl0gPSBzbG90TmFtZTtcblxuICAgICAgICAgICAgICAgIC8vIFdlIGV4cGxpY2l0bHkgYXNzaWduIGBudWxsYCBzaW5jZSB0aGlzIGltcGxpZXMgdGhhdCBhIHNsb3Qgd2FzIGRlZmluZWQgYnV0IG5vdCBmaWxsZWQuXG4gICAgICAgICAgICAgICAgLy8gTGF0ZXIgd2hlbiBjYWxsaW5nIGJvdW5kVHJhbnNjbHVzaW9uIGZ1bmN0aW9ucyB3aXRoIGEgc2xvdCBuYW1lIHdlIG9ubHkgZXJyb3IgaWYgdGhlXG4gICAgICAgICAgICAgICAgLy8gc2xvdCBpcyBgdW5kZWZpbmVkYFxuICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3ROYW1lXSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvLyBmaWxsZWRTbG90cyBjb250YWlucyBgdHJ1ZWAgZm9yIGFsbCBzbG90cyB0aGF0IGFyZSBlaXRoZXIgb3B0aW9uYWwgb3IgaGF2ZSBiZWVuXG4gICAgICAgICAgICAgICAgLy8gZmlsbGVkLiBUaGlzIGlzIHVzZWQgdG8gY2hlY2sgdGhhdCB3ZSBoYXZlIG5vdCBtaXNzZWQgYW55IHJlcXVpcmVkIHNsb3RzXG4gICAgICAgICAgICAgICAgZmlsbGVkU2xvdHNbc2xvdE5hbWVdID0gb3B0aW9uYWw7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIC8vIEFkZCB0aGUgbWF0Y2hpbmcgZWxlbWVudHMgaW50byB0aGVpciBzbG90XG4gICAgICAgICAgICAgIGZvckVhY2goJGNvbXBpbGVOb2RlLmNvbnRlbnRzKCksIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2xvdE5hbWUgPSBzbG90TWFwW2RpcmVjdGl2ZU5vcm1hbGl6ZShub2RlTmFtZV8obm9kZSkpXTtcbiAgICAgICAgICAgICAgICBpZiAoc2xvdE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgIGZpbGxlZFNsb3RzW3Nsb3ROYW1lXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBzbG90c1tzbG90TmFtZV0gPSBzbG90c1tzbG90TmFtZV0gfHwgd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3ROYW1lXS5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHJlcXVpcmVkIHNsb3RzIHRoYXQgd2VyZSBub3QgZmlsbGVkXG4gICAgICAgICAgICAgIGZvckVhY2goZmlsbGVkU2xvdHMsIGZ1bmN0aW9uKGZpbGxlZCwgc2xvdE5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGxlZCkge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3JlcXNsb3QnLCAnUmVxdWlyZWQgdHJhbnNjbHVzaW9uIHNsb3QgYHswfWAgd2FzIG5vdCBmaWxsZWQuJywgc2xvdE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgc2xvdE5hbWUgaW4gc2xvdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2xvdHNbc2xvdE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAvLyBPbmx5IGRlZmluZSBhIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiBpZiB0aGUgc2xvdCB3YXMgZmlsbGVkXG4gICAgICAgICAgICAgICAgICBzbG90c1tzbG90TmFtZV0gPSBjb21waWxhdGlvbkdlbmVyYXRvcihtaWdodEhhdmVNdWx0aXBsZVRyYW5zY2x1c2lvbkVycm9yLCBzbG90c1tzbG90TmFtZV0uY2hpbGROb2RlcywgdHJhbnNjbHVkZUZuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSAkdGVtcGxhdGUuY2hpbGROb2RlcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJGNvbXBpbGVOb2RlLmVtcHR5KCk7IC8vIGNsZWFyIGNvbnRlbnRzXG4gICAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiA9IGNvbXBpbGF0aW9uR2VuZXJhdG9yKG1pZ2h0SGF2ZU11bHRpcGxlVHJhbnNjbHVzaW9uRXJyb3IsICR0ZW1wbGF0ZSwgdHJhbnNjbHVkZUZuLCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCB7IG5lZWRzTmV3U2NvcGU6IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSB8fCBkaXJlY3RpdmUuJCRuZXdTY29wZX0pO1xuICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4uJCRzbG90cyA9IHNsb3RzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJlY3RpdmUudGVtcGxhdGUpIHtcbiAgICAgICAgICBoYXNUZW1wbGF0ZSA9IHRydWU7XG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ3RlbXBsYXRlJywgdGVtcGxhdGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcblxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gKGlzRnVuY3Rpb24oZGlyZWN0aXZlLnRlbXBsYXRlKSlcbiAgICAgICAgICAgICAgPyBkaXJlY3RpdmUudGVtcGxhdGUoJGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzKVxuICAgICAgICAgICAgICA6IGRpcmVjdGl2ZS50ZW1wbGF0ZTtcblxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gZGVub3JtYWxpemVUZW1wbGF0ZShkaXJlY3RpdmVWYWx1ZSk7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLnJlcGxhY2UpIHtcbiAgICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG4gICAgICAgICAgICBpZiAoanFMaXRlSXNUZXh0Tm9kZShkaXJlY3RpdmVWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSByZW1vdmVDb21tZW50cyh3cmFwVGVtcGxhdGUoZGlyZWN0aXZlLnRlbXBsYXRlTmFtZXNwYWNlLCB0cmltKGRpcmVjdGl2ZVZhbHVlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkdGVtcGxhdGVbMF07XG5cbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9PSAxIHx8IGNvbXBpbGVOb2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndHBscnQnLFxuICAgICAgICAgICAgICAgICAgJ1RlbXBsYXRlIGZvciBkaXJlY3RpdmUgXFwnezB9XFwnIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfScsXG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCAnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbiwgJGNvbXBpbGVOb2RlLCBjb21waWxlTm9kZSk7XG5cbiAgICAgICAgICAgIHZhciBuZXdUZW1wbGF0ZUF0dHJzID0geyRhdHRyOiB7fX07XG5cbiAgICAgICAgICAgIC8vIGNvbWJpbmUgZGlyZWN0aXZlcyBmcm9tIHRoZSBvcmlnaW5hbCBub2RlIGFuZCBmcm9tIHRoZSB0ZW1wbGF0ZTpcbiAgICAgICAgICAgIC8vIC0gdGFrZSB0aGUgYXJyYXkgb2YgZGlyZWN0aXZlcyBmb3IgdGhpcyBlbGVtZW50XG4gICAgICAgICAgICAvLyAtIHNwbGl0IGl0IGludG8gdHdvIHBhcnRzLCB0aG9zZSB0aGF0IGFscmVhZHkgYXBwbGllZCAocHJvY2Vzc2VkKSBhbmQgdGhvc2UgdGhhdCB3ZXJlbid0ICh1bnByb2Nlc3NlZClcbiAgICAgICAgICAgIC8vIC0gY29sbGVjdCBkaXJlY3RpdmVzIGZyb20gdGhlIHRlbXBsYXRlIGFuZCBzb3J0IHRoZW0gYnkgcHJpb3JpdHlcbiAgICAgICAgICAgIC8vIC0gY29tYmluZSBkaXJlY3RpdmVzIGFzOiBwcm9jZXNzZWQgKyB0ZW1wbGF0ZSArIHVucHJvY2Vzc2VkXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVEaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsIFtdLCBuZXdUZW1wbGF0ZUF0dHJzKTtcbiAgICAgICAgICAgIHZhciB1bnByb2Nlc3NlZERpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzLnNwbGljZShpICsgMSwgZGlyZWN0aXZlcy5sZW5ndGggLSAoaSArIDEpKTtcblxuICAgICAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSB8fCBuZXdTY29wZURpcmVjdGl2ZSkge1xuICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgZGlyZWN0aXZlIGNhdXNlZCB0aGUgY3VycmVudCBlbGVtZW50IHRvIGJlIHJlcGxhY2VkIGJ1dCB0aGlzIGVsZW1lbnRcbiAgICAgICAgICAgICAgLy8gYWxzbyBuZWVkcyB0byBoYXZlIGEgbmV3IHNjb3BlLCBzbyB3ZSBuZWVkIHRvIHRlbGwgdGhlIHRlbXBsYXRlIGRpcmVjdGl2ZXNcbiAgICAgICAgICAgICAgLy8gdGhhdCB0aGV5IHdvdWxkIG5lZWQgdG8gZ2V0IHRoZWlyIHNjb3BlIGZyb20gZnVydGhlciB1cCwgaWYgdGhleSByZXF1aXJlIHRyYW5zY2x1c2lvblxuICAgICAgICAgICAgICBtYXJrRGlyZWN0aXZlU2NvcGUodGVtcGxhdGVEaXJlY3RpdmVzLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsIG5ld1Njb3BlRGlyZWN0aXZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzLmNvbmNhdCh0ZW1wbGF0ZURpcmVjdGl2ZXMpLmNvbmNhdCh1bnByb2Nlc3NlZERpcmVjdGl2ZXMpO1xuICAgICAgICAgICAgbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModGVtcGxhdGVBdHRycywgbmV3VGVtcGxhdGVBdHRycyk7XG5cbiAgICAgICAgICAgIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRjb21waWxlTm9kZS5odG1sKGRpcmVjdGl2ZVZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aXZlLnRlbXBsYXRlVXJsKSB7XG4gICAgICAgICAgaGFzVGVtcGxhdGUgPSB0cnVlO1xuICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsIHRlbXBsYXRlRGlyZWN0aXZlLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLnJlcGxhY2UpIHtcbiAgICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWZ1bmMtYXNzaWduXG4gICAgICAgICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLnNwbGljZShpLCBkaXJlY3RpdmVzLmxlbmd0aCAtIGkpLCAkY29tcGlsZU5vZGUsXG4gICAgICAgICAgICAgIHRlbXBsYXRlQXR0cnMsIGpxQ29sbGVjdGlvbiwgaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSAmJiBjaGlsZFRyYW5zY2x1ZGVGbiwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlczogY29udHJvbGxlckRpcmVjdGl2ZXMsXG4gICAgICAgICAgICAgICAgbmV3U2NvcGVEaXJlY3RpdmU6IChuZXdTY29wZURpcmVjdGl2ZSAhPT0gZGlyZWN0aXZlKSAmJiBuZXdTY29wZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZTogdGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTogbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGl2ZS5jb21waWxlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxpbmtGbiA9IGRpcmVjdGl2ZS5jb21waWxlKCRjb21waWxlTm9kZSwgdGVtcGxhdGVBdHRycywgY2hpbGRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBkaXJlY3RpdmUuJCRvcmlnaW5hbERpcmVjdGl2ZSB8fCBkaXJlY3RpdmU7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihsaW5rRm4pKSB7XG4gICAgICAgICAgICAgIGFkZExpbmtGbnMobnVsbCwgYmluZChjb250ZXh0LCBsaW5rRm4pLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rRm4pIHtcbiAgICAgICAgICAgICAgYWRkTGlua0ZucyhiaW5kKGNvbnRleHQsIGxpbmtGbi5wcmUpLCBiaW5kKGNvbnRleHQsIGxpbmtGbi5wb3N0KSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlLCBzdGFydGluZ1RhZygkY29tcGlsZU5vZGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aXZlLnRlcm1pbmFsKSB7XG4gICAgICAgICAgbm9kZUxpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG4gICAgICAgICAgdGVybWluYWxQcmlvcml0eSA9IE1hdGgubWF4KHRlcm1pbmFsUHJpb3JpdHksIGRpcmVjdGl2ZS5wcmlvcml0eSk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBub2RlTGlua0ZuLnNjb3BlID0gbmV3U2NvcGVEaXJlY3RpdmUgJiYgbmV3U2NvcGVEaXJlY3RpdmUuc2NvcGUgPT09IHRydWU7XG4gICAgICBub2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50ID0gaGFzVHJhbnNjbHVkZURpcmVjdGl2ZTtcbiAgICAgIG5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50ID0gaGFzVGVtcGxhdGU7XG4gICAgICBub2RlTGlua0ZuLnRyYW5zY2x1ZGUgPSBjaGlsZFRyYW5zY2x1ZGVGbjtcblxuICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlO1xuXG4gICAgICAvLyBtaWdodCBiZSBub3JtYWwgb3IgZGVsYXllZCBub2RlTGlua0ZuIGRlcGVuZGluZyBvbiBpZiB0ZW1wbGF0ZVVybCBpcyBwcmVzZW50XG4gICAgICByZXR1cm4gbm9kZUxpbmtGbjtcblxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgZnVuY3Rpb24gYWRkTGlua0ZucyhwcmUsIHBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCkge1xuICAgICAgICBpZiAocHJlKSB7XG4gICAgICAgICAgaWYgKGF0dHJTdGFydCkgcHJlID0gZ3JvdXBFbGVtZW50c0xpbmtGbldyYXBwZXIocHJlLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgIHByZS5yZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmU7XG4gICAgICAgICAgcHJlLmRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmVOYW1lO1xuICAgICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPT09IGRpcmVjdGl2ZSB8fCBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpIHtcbiAgICAgICAgICAgIHByZSA9IGNsb25lQW5kQW5ub3RhdGVGbihwcmUsIHtpc29sYXRlU2NvcGU6IHRydWV9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJlTGlua0Zucy5wdXNoKHByZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc3QpIHtcbiAgICAgICAgICBpZiAoYXR0clN0YXJ0KSBwb3N0ID0gZ3JvdXBFbGVtZW50c0xpbmtGbldyYXBwZXIocG9zdCwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICBwb3N0LnJlcXVpcmUgPSBkaXJlY3RpdmUucmVxdWlyZTtcbiAgICAgICAgICBwb3N0LmRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmVOYW1lO1xuICAgICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPT09IGRpcmVjdGl2ZSB8fCBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpIHtcbiAgICAgICAgICAgIHBvc3QgPSBjbG9uZUFuZEFubm90YXRlRm4ocG9zdCwge2lzb2xhdGVTY29wZTogdHJ1ZX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwb3N0TGlua0Zucy5wdXNoKHBvc3QpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG5vZGVMaW5rRm4oY2hpbGRMaW5rRm4sIHNjb3BlLCBsaW5rTm9kZSwgJHJvb3RFbGVtZW50LCBib3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgICB2YXIgaSwgaWksIGxpbmtGbiwgaXNvbGF0ZVNjb3BlLCBjb250cm9sbGVyU2NvcGUsIGVsZW1lbnRDb250cm9sbGVycywgdHJhbnNjbHVkZUZuLCAkZWxlbWVudCxcbiAgICAgICAgICAgIGF0dHJzLCBzY29wZUJpbmRpbmdJbmZvO1xuXG4gICAgICAgIGlmIChjb21waWxlTm9kZSA9PT0gbGlua05vZGUpIHtcbiAgICAgICAgICBhdHRycyA9IHRlbXBsYXRlQXR0cnM7XG4gICAgICAgICAgJGVsZW1lbnQgPSB0ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkZWxlbWVudCA9IGpxTGl0ZShsaW5rTm9kZSk7XG4gICAgICAgICAgYXR0cnMgPSBuZXcgQXR0cmlidXRlcygkZWxlbWVudCwgdGVtcGxhdGVBdHRycyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9sbGVyU2NvcGUgPSBzY29wZTtcbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xuICAgICAgICAgIGlzb2xhdGVTY29wZSA9IHNjb3BlLiRuZXcodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAobmV3U2NvcGVEaXJlY3RpdmUpIHtcbiAgICAgICAgICBjb250cm9sbGVyU2NvcGUgPSBzY29wZS4kcGFyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgICAgLy8gdHJhY2sgYGJvdW5kVHJhbnNjbHVkZUZuYCBzbyBpdCBjYW4gYmUgdW53cmFwcGVkIGlmIGB0cmFuc2NsdWRlRm5gXG4gICAgICAgICAgLy8gaXMgbGF0ZXIgcGFzc2VkIGFzIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgdG8gYHB1YmxpY0xpbmtGbmBcbiAgICAgICAgICB0cmFuc2NsdWRlRm4gPSBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZTtcbiAgICAgICAgICB0cmFuc2NsdWRlRm4uJCRib3VuZFRyYW5zY2x1ZGUgPSBib3VuZFRyYW5zY2x1ZGVGbjtcbiAgICAgICAgICAvLyBleHBvc2UgdGhlIHNsb3RzIG9uIHRoZSBgJHRyYW5zY2x1ZGVgIGZ1bmN0aW9uXG4gICAgICAgICAgdHJhbnNjbHVkZUZuLmlzU2xvdEZpbGxlZCA9IGZ1bmN0aW9uKHNsb3ROYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gISFib3VuZFRyYW5zY2x1ZGVGbi4kJHNsb3RzW3Nsb3ROYW1lXTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRyb2xsZXJEaXJlY3RpdmVzKSB7XG4gICAgICAgICAgZWxlbWVudENvbnRyb2xsZXJzID0gc2V0dXBDb250cm9sbGVycygkZWxlbWVudCwgYXR0cnMsIHRyYW5zY2x1ZGVGbiwgY29udHJvbGxlckRpcmVjdGl2ZXMsIGlzb2xhdGVTY29wZSwgc2NvcGUsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgLy8gSW5pdGlhbGl6ZSBpc29sYXRlIHNjb3BlIGJpbmRpbmdzIGZvciBuZXcgaXNvbGF0ZSBzY29wZSBkaXJlY3RpdmUuXG4gICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbygkZWxlbWVudCwgaXNvbGF0ZVNjb3BlLCB0cnVlLCAhKHRlbXBsYXRlRGlyZWN0aXZlICYmICh0ZW1wbGF0ZURpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8XG4gICAgICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID09PSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUuJCRvcmlnaW5hbERpcmVjdGl2ZSkpKTtcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcygkZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgaXNvbGF0ZVNjb3BlLiQkaXNvbGF0ZUJpbmRpbmdzID1cbiAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLiQkaXNvbGF0ZUJpbmRpbmdzO1xuICAgICAgICAgIHNjb3BlQmluZGluZ0luZm8gPSBpbml0aWFsaXplRGlyZWN0aXZlQmluZGluZ3Moc2NvcGUsIGF0dHJzLCBpc29sYXRlU2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNvbGF0ZVNjb3BlLiQkaXNvbGF0ZUJpbmRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSk7XG4gICAgICAgICAgaWYgKHNjb3BlQmluZGluZ0luZm8ucmVtb3ZlV2F0Y2hlcykge1xuICAgICAgICAgICAgaXNvbGF0ZVNjb3BlLiRvbignJGRlc3Ryb3knLCBzY29wZUJpbmRpbmdJbmZvLnJlbW92ZVdhdGNoZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluaXRpYWxpemUgYmluZFRvQ29udHJvbGxlciBiaW5kaW5nc1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIGVsZW1lbnRDb250cm9sbGVycykge1xuICAgICAgICAgIHZhciBjb250cm9sbGVyRGlyZWN0aXZlID0gY29udHJvbGxlckRpcmVjdGl2ZXNbbmFtZV07XG4gICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBlbGVtZW50Q29udHJvbGxlcnNbbmFtZV07XG4gICAgICAgICAgdmFyIGJpbmRpbmdzID0gY29udHJvbGxlckRpcmVjdGl2ZS4kJGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXI7XG5cbiAgICAgICAgICBjb250cm9sbGVyLmluc3RhbmNlID0gY29udHJvbGxlcigpO1xuICAgICAgICAgICRlbGVtZW50LmRhdGEoJyQnICsgY29udHJvbGxlckRpcmVjdGl2ZS5uYW1lICsgJ0NvbnRyb2xsZXInLCBjb250cm9sbGVyLmluc3RhbmNlKTtcbiAgICAgICAgICBjb250cm9sbGVyLmJpbmRpbmdJbmZvID1cbiAgICAgICAgICAgIGluaXRpYWxpemVEaXJlY3RpdmVCaW5kaW5ncyhjb250cm9sbGVyU2NvcGUsIGF0dHJzLCBjb250cm9sbGVyLmluc3RhbmNlLCBiaW5kaW5ncywgY29udHJvbGxlckRpcmVjdGl2ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIC8vIEJpbmQgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXJzIHRvIHRoZSBjb250cm9sbGVyLCBpZiBgcmVxdWlyZWAgaXMgYW4gb2JqZWN0IGFuZCBgYmluZFRvQ29udHJvbGxlcmAgaXMgdHJ1dGh5XG4gICAgICAgIGZvckVhY2goY29udHJvbGxlckRpcmVjdGl2ZXMsIGZ1bmN0aW9uKGNvbnRyb2xsZXJEaXJlY3RpdmUsIG5hbWUpIHtcbiAgICAgICAgICB2YXIgcmVxdWlyZSA9IGNvbnRyb2xsZXJEaXJlY3RpdmUucmVxdWlyZTtcbiAgICAgICAgICBpZiAoY29udHJvbGxlckRpcmVjdGl2ZS5iaW5kVG9Db250cm9sbGVyICYmICFpc0FycmF5KHJlcXVpcmUpICYmIGlzT2JqZWN0KHJlcXVpcmUpKSB7XG4gICAgICAgICAgICBleHRlbmQoZWxlbWVudENvbnRyb2xsZXJzW25hbWVdLmluc3RhbmNlLCBnZXRDb250cm9sbGVycyhuYW1lLCByZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIYW5kbGUgdGhlIGluaXQgYW5kIGRlc3Ryb3kgbGlmZWN5Y2xlIGhvb2tzIG9uIGFsbCBjb250cm9sbGVycyB0aGF0IGhhdmUgdGhlbVxuICAgICAgICBmb3JFYWNoKGVsZW1lbnRDb250cm9sbGVycywgZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSBjb250cm9sbGVyLmluc3RhbmNlO1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kb25DaGFuZ2VzKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlLiRvbkNoYW5nZXMoY29udHJvbGxlci5iaW5kaW5nSW5mby5pbml0aWFsQ2hhbmdlcyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJG9uSW5pdCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2spKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyU2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkgeyBjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2soKTsgfSk7XG4gICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLiRvbkRlc3Ryb3kpKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyU2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIGNhbGxPbkRlc3Ryb3lIb29rKCkge1xuICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJG9uRGVzdHJveSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQUkVMSU5LSU5HXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gcHJlTGlua0Zucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgbGlua0ZuID0gcHJlTGlua0Zuc1tpXTtcbiAgICAgICAgICBpbnZva2VMaW5rRm4obGlua0ZuLFxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXG4gICAgICAgICAgICAgICRlbGVtZW50LFxuICAgICAgICAgICAgICBhdHRycyxcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJFQ1VSU0lPTlxuICAgICAgICAvLyBXZSBvbmx5IHBhc3MgdGhlIGlzb2xhdGUgc2NvcGUsIGlmIHRoZSBpc29sYXRlIGRpcmVjdGl2ZSBoYXMgYSB0ZW1wbGF0ZSxcbiAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBjaGlsZCBlbGVtZW50cyBkbyBub3QgYmVsb25nIHRvIHRoZSBpc29sYXRlIGRpcmVjdGl2ZS5cbiAgICAgICAgdmFyIHNjb3BlVG9DaGlsZCA9IHNjb3BlO1xuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlICYmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUudGVtcGxhdGUgfHwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlVXJsID09PSBudWxsKSkge1xuICAgICAgICAgIHNjb3BlVG9DaGlsZCA9IGlzb2xhdGVTY29wZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRMaW5rRm4pIHtcbiAgICAgICAgICBjaGlsZExpbmtGbihzY29wZVRvQ2hpbGQsIGxpbmtOb2RlLmNoaWxkTm9kZXMsIHVuZGVmaW5lZCwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUE9TVExJTktJTkdcbiAgICAgICAgZm9yIChpID0gcG9zdExpbmtGbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICBsaW5rRm4gPSBwb3N0TGlua0Zuc1tpXTtcbiAgICAgICAgICBpbnZva2VMaW5rRm4obGlua0ZuLFxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXG4gICAgICAgICAgICAgICRlbGVtZW50LFxuICAgICAgICAgICAgICBhdHRycyxcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyaWdnZXIgJHBvc3RMaW5rIGxpZmVjeWNsZSBob29rc1xuICAgICAgICBmb3JFYWNoKGVsZW1lbnRDb250cm9sbGVycywgZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSBjb250cm9sbGVyLmluc3RhbmNlO1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kcG9zdExpbmspKSB7XG4gICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJHBvc3RMaW5rKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGluamVjdGVkIGFzIGAkdHJhbnNjbHVkZWAuXG4gICAgICAgIC8vIE5vdGU6IGFsbCBhcmd1bWVudHMgYXJlIG9wdGlvbmFsIVxuICAgICAgICBmdW5jdGlvbiBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZShzY29wZSwgY2xvbmVBdHRhY2hGbiwgZnV0dXJlUGFyZW50RWxlbWVudCwgc2xvdE5hbWUpIHtcbiAgICAgICAgICB2YXIgdHJhbnNjbHVkZUNvbnRyb2xsZXJzO1xuICAgICAgICAgIC8vIE5vIHNjb3BlIHBhc3NlZCBpbjpcbiAgICAgICAgICBpZiAoIWlzU2NvcGUoc2NvcGUpKSB7XG4gICAgICAgICAgICBzbG90TmFtZSA9IGZ1dHVyZVBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gY2xvbmVBdHRhY2hGbjtcbiAgICAgICAgICAgIGNsb25lQXR0YWNoRm4gPSBzY29wZTtcbiAgICAgICAgICAgIHNjb3BlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSkge1xuICAgICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzID0gZWxlbWVudENvbnRyb2xsZXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZ1dHVyZVBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZ1dHVyZVBhcmVudEVsZW1lbnQgPSBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA/ICRlbGVtZW50LnBhcmVudCgpIDogJGVsZW1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzbG90TmFtZSkge1xuICAgICAgICAgICAgLy8gc2xvdFRyYW5zY2x1ZGVGbiBjYW4gYmUgb25lIG9mIHRocmVlIHRoaW5nczpcbiAgICAgICAgICAgIC8vICAqIGEgdHJhbnNjbHVkZSBmdW5jdGlvbiAtIGEgZmlsbGVkIHNsb3RcbiAgICAgICAgICAgIC8vICAqIGBudWxsYCAtIGFuIG9wdGlvbmFsIHNsb3QgdGhhdCB3YXMgbm90IGZpbGxlZFxuICAgICAgICAgICAgLy8gICogYHVuZGVmaW5lZGAgLSBhIHNsb3QgdGhhdCB3YXMgbm90IGRlY2xhcmVkIChpLmUuIGludmFsaWQpXG4gICAgICAgICAgICB2YXIgc2xvdFRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuLiQkc2xvdHNbc2xvdE5hbWVdO1xuICAgICAgICAgICAgaWYgKHNsb3RUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNsb3RUcmFuc2NsdWRlRm4oc2NvcGUsIGNsb25lQXR0YWNoRm4sIHRyYW5zY2x1ZGVDb250cm9sbGVycywgZnV0dXJlUGFyZW50RWxlbWVudCwgc2NvcGVUb0NoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNVbmRlZmluZWQoc2xvdFRyYW5zY2x1ZGVGbikpIHtcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vc2xvdCcsXG4gICAgICAgICAgICAgICAnTm8gcGFyZW50IGRpcmVjdGl2ZSB0aGF0IHJlcXVpcmVzIGEgdHJhbnNjbHVzaW9uIHdpdGggc2xvdCBuYW1lIFwiezB9XCIuICcgK1xuICAgICAgICAgICAgICAgJ0VsZW1lbnQ6IHsxfScsXG4gICAgICAgICAgICAgICBzbG90TmFtZSwgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCB0cmFuc2NsdWRlQ29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQsIHNjb3BlVG9DaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSwgcmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycykge1xuICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICBpZiAoaXNTdHJpbmcocmVxdWlyZSkpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gcmVxdWlyZS5tYXRjaChSRVFVSVJFX1BSRUZJWF9SRUdFWFApO1xuICAgICAgICB2YXIgbmFtZSA9IHJlcXVpcmUuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgIHZhciBpbmhlcml0VHlwZSA9IG1hdGNoWzFdIHx8IG1hdGNoWzNdO1xuICAgICAgICB2YXIgb3B0aW9uYWwgPSBtYXRjaFsyXSA9PT0gJz8nO1xuXG4gICAgICAgIC8vSWYgb25seSBwYXJlbnRzIHRoZW4gc3RhcnQgYXQgdGhlIHBhcmVudCBlbGVtZW50XG4gICAgICAgIGlmIChpbmhlcml0VHlwZSA9PT0gJ15eJykge1xuICAgICAgICAgICRlbGVtZW50ID0gJGVsZW1lbnQucGFyZW50KCk7XG4gICAgICAgIC8vT3RoZXJ3aXNlIGF0dGVtcHQgZ2V0dGluZyB0aGUgY29udHJvbGxlciBmcm9tIGVsZW1lbnRDb250cm9sbGVycyBpbiBjYXNlXG4gICAgICAgIC8vdGhlIGVsZW1lbnQgaXMgdHJhbnNjbHVkZWQgKGFuZCBoYXMgbm8gZGF0YSkgYW5kIHRvIGF2b2lkIC5kYXRhIGlmIHBvc3NpYmxlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSBlbGVtZW50Q29udHJvbGxlcnMgJiYgZWxlbWVudENvbnRyb2xsZXJzW25hbWVdO1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgJiYgdmFsdWUuaW5zdGFuY2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgdmFyIGRhdGFOYW1lID0gJyQnICsgbmFtZSArICdDb250cm9sbGVyJztcbiAgICAgICAgICB2YWx1ZSA9IGluaGVyaXRUeXBlID8gJGVsZW1lbnQuaW5oZXJpdGVkRGF0YShkYXRhTmFtZSkgOiAkZWxlbWVudC5kYXRhKGRhdGFOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsdWUgJiYgIW9wdGlvbmFsKSB7XG4gICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2N0cmVxJyxcbiAgICAgICAgICAgICAgJ0NvbnRyb2xsZXIgXFwnezB9XFwnLCByZXF1aXJlZCBieSBkaXJlY3RpdmUgXFwnezF9XFwnLCBjYW5cXCd0IGJlIGZvdW5kIScsXG4gICAgICAgICAgICAgIG5hbWUsIGRpcmVjdGl2ZU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocmVxdWlyZSkpIHtcbiAgICAgICAgdmFsdWUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmVxdWlyZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgdmFsdWVbaV0gPSBnZXRDb250cm9sbGVycyhkaXJlY3RpdmVOYW1lLCByZXF1aXJlW2ldLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChyZXF1aXJlKSkge1xuICAgICAgICB2YWx1ZSA9IHt9O1xuICAgICAgICBmb3JFYWNoKHJlcXVpcmUsIGZ1bmN0aW9uKGNvbnRyb2xsZXIsIHByb3BlcnR5KSB7XG4gICAgICAgICAgdmFsdWVbcHJvcGVydHldID0gZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSwgY29udHJvbGxlciwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXR1cENvbnRyb2xsZXJzKCRlbGVtZW50LCBhdHRycywgdHJhbnNjbHVkZUZuLCBjb250cm9sbGVyRGlyZWN0aXZlcywgaXNvbGF0ZVNjb3BlLCBzY29wZSwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XG4gICAgICB2YXIgZWxlbWVudENvbnRyb2xsZXJzID0gY3JlYXRlTWFwKCk7XG4gICAgICBmb3IgKHZhciBjb250cm9sbGVyS2V5IGluIGNvbnRyb2xsZXJEaXJlY3RpdmVzKSB7XG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSBjb250cm9sbGVyRGlyZWN0aXZlc1tjb250cm9sbGVyS2V5XTtcbiAgICAgICAgdmFyIGxvY2FscyA9IHtcbiAgICAgICAgICAkc2NvcGU6IGRpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxuICAgICAgICAgICRlbGVtZW50OiAkZWxlbWVudCxcbiAgICAgICAgICAkYXR0cnM6IGF0dHJzLFxuICAgICAgICAgICR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlRm5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgY29udHJvbGxlciA9IGRpcmVjdGl2ZS5jb250cm9sbGVyO1xuICAgICAgICBpZiAoY29udHJvbGxlciA9PT0gJ0AnKSB7XG4gICAgICAgICAgY29udHJvbGxlciA9IGF0dHJzW2RpcmVjdGl2ZS5uYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSAkY29udHJvbGxlcihjb250cm9sbGVyLCBsb2NhbHMsIHRydWUsIGRpcmVjdGl2ZS5jb250cm9sbGVyQXMpO1xuXG4gICAgICAgIC8vIEZvciBkaXJlY3RpdmVzIHdpdGggZWxlbWVudCB0cmFuc2NsdXNpb24gdGhlIGVsZW1lbnQgaXMgYSBjb21tZW50LlxuICAgICAgICAvLyBJbiB0aGlzIGNhc2UgLmRhdGEgd2lsbCBub3QgYXR0YWNoIGFueSBkYXRhLlxuICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBzYXZlIHRoZSBjb250cm9sbGVycyBmb3IgdGhlIGVsZW1lbnQgaW4gYSBsb2NhbCBoYXNoIGFuZCBhdHRhY2ggdG8gLmRhdGFcbiAgICAgICAgLy8gbGF0ZXIsIG9uY2Ugd2UgaGF2ZSB0aGUgYWN0dWFsIGVsZW1lbnQuXG4gICAgICAgIGVsZW1lbnRDb250cm9sbGVyc1tkaXJlY3RpdmUubmFtZV0gPSBjb250cm9sbGVySW5zdGFuY2U7XG4gICAgICAgICRlbGVtZW50LmRhdGEoJyQnICsgZGlyZWN0aXZlLm5hbWUgKyAnQ29udHJvbGxlcicsIGNvbnRyb2xsZXJJbnN0YW5jZS5pbnN0YW5jZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZWxlbWVudENvbnRyb2xsZXJzO1xuICAgIH1cblxuICAgIC8vIERlcGVuZGluZyB1cG9uIHRoZSBjb250ZXh0IGluIHdoaWNoIGEgZGlyZWN0aXZlIGZpbmRzIGl0c2VsZiBpdCBtaWdodCBuZWVkIHRvIGhhdmUgYSBuZXcgaXNvbGF0ZWRcbiAgICAvLyBvciBjaGlsZCBzY29wZSBjcmVhdGVkLiBGb3IgaW5zdGFuY2U6XG4gICAgLy8gKiBpZiB0aGUgZGlyZWN0aXZlIGhhcyBiZWVuIHB1bGxlZCBpbnRvIGEgdGVtcGxhdGUgYmVjYXVzZSBhbm90aGVyIGRpcmVjdGl2ZSB3aXRoIGEgaGlnaGVyIHByaW9yaXR5XG4gICAgLy8gYXNrZWQgZm9yIGVsZW1lbnQgdHJhbnNjbHVzaW9uXG4gICAgLy8gKiBpZiB0aGUgZGlyZWN0aXZlIGl0c2VsZiBhc2tzIGZvciB0cmFuc2NsdXNpb24gYnV0IGl0IGlzIGF0IHRoZSByb290IG9mIGEgdGVtcGxhdGUgYW5kIHRoZSBvcmlnaW5hbFxuICAgIC8vIGVsZW1lbnQgd2FzIHJlcGxhY2VkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTI5MzZcbiAgICBmdW5jdGlvbiBtYXJrRGlyZWN0aXZlU2NvcGUoZGlyZWN0aXZlcywgaXNvbGF0ZVNjb3BlLCBuZXdTY29wZSkge1xuICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZGlyZWN0aXZlcy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgIGRpcmVjdGl2ZXNbal0gPSBpbmhlcml0KGRpcmVjdGl2ZXNbal0sIHskJGlzb2xhdGVTY29wZTogaXNvbGF0ZVNjb3BlLCAkJG5ld1Njb3BlOiBuZXdTY29wZX0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGxvb2tzIHVwIHRoZSBkaXJlY3RpdmUgYW5kIGRlY29yYXRlcyBpdCB3aXRoIGV4Y2VwdGlvbiBoYW5kbGluZyBhbmQgcHJvcGVyIHBhcmFtZXRlcnMuIFdlXG4gICAgICogY2FsbCB0aGlzIHRoZSBib3VuZERpcmVjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBUaGUgZGlyZWN0aXZlIG11c3QgYmUgZm91bmQgaW4gc3BlY2lmaWMgZm9ybWF0LlxuICAgICAqICAgU3RyaW5nIGNvbnRhaW5pbmcgYW55IG9mIHRoZXNlcyBjaGFyYWN0ZXJzOlxuICAgICAqXG4gICAgICogICAqIGBFYDogZWxlbWVudCBuYW1lXG4gICAgICogICAqIGBBJzogYXR0cmlidXRlXG4gICAgICogICAqIGBDYDogY2xhc3NcbiAgICAgKiAgICogYE1gOiBjb21tZW50XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgZGlyZWN0aXZlIHdhcyBhZGRlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGREaXJlY3RpdmUodERpcmVjdGl2ZXMsIG5hbWUsIGxvY2F0aW9uLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBzdGFydEF0dHJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRBdHRyTmFtZSkge1xuICAgICAgaWYgKG5hbWUgPT09IGlnbm9yZURpcmVjdGl2ZSkgcmV0dXJuIG51bGw7XG4gICAgICB2YXIgbWF0Y2ggPSBudWxsO1xuICAgICAgaWYgKGhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgZm9yICh2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcbiAgICAgICAgICAgIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgICAgICAgaWYgKChpc1VuZGVmaW5lZChtYXhQcmlvcml0eSkgfHwgbWF4UHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpICYmXG4gICAgICAgICAgICAgICBkaXJlY3RpdmUucmVzdHJpY3QuaW5kZXhPZihsb2NhdGlvbikgIT09IC0xKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRBdHRyTmFtZSkge1xuICAgICAgICAgICAgICBkaXJlY3RpdmUgPSBpbmhlcml0KGRpcmVjdGl2ZSwgeyQkc3RhcnQ6IHN0YXJ0QXR0ck5hbWUsICQkZW5kOiBlbmRBdHRyTmFtZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkaXJlY3RpdmUuJCRiaW5kaW5ncykge1xuICAgICAgICAgICAgICB2YXIgYmluZGluZ3MgPSBkaXJlY3RpdmUuJCRiaW5kaW5ncyA9XG4gICAgICAgICAgICAgICAgICBwYXJzZURpcmVjdGl2ZUJpbmRpbmdzKGRpcmVjdGl2ZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICBpZiAoaXNPYmplY3QoYmluZGluZ3MuaXNvbGF0ZVNjb3BlKSkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncyA9IGJpbmRpbmdzLmlzb2xhdGVTY29wZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdERpcmVjdGl2ZXMucHVzaChkaXJlY3RpdmUpO1xuICAgICAgICAgICAgbWF0Y2ggPSBkaXJlY3RpdmU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBsb29rcyB1cCB0aGUgZGlyZWN0aXZlIGFuZCByZXR1cm5zIHRydWUgaWYgaXQgaXMgYSBtdWx0aS1lbGVtZW50IGRpcmVjdGl2ZSxcbiAgICAgKiBhbmQgdGhlcmVmb3JlIHJlcXVpcmVzIERPTSBub2RlcyBiZXR3ZWVuIC1zdGFydCBhbmQgLWVuZCBtYXJrZXJzIHRvIGJlIGdyb3VwZWRcbiAgICAgKiB0b2dldGhlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgZGlyZWN0aXZlIHdhcyByZWdpc3RlcmVkIGFzIG11bHRpLWVsZW1lbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQobmFtZSkge1xuICAgICAgaWYgKGhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgZm9yICh2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcbiAgICAgICAgICAgIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZS5tdWx0aUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGVsZW1lbnQgaXMgcmVwbGFjZWQgd2l0aCBIVE1MIHRlbXBsYXRlIHRoZW4gdGhlIG5ldyBhdHRyaWJ1dGVzXG4gICAgICogb24gdGhlIHRlbXBsYXRlIG5lZWQgdG8gYmUgbWVyZ2VkIHdpdGggdGhlIGV4aXN0aW5nIGF0dHJpYnV0ZXMgaW4gdGhlIERPTS5cbiAgICAgKiBUaGUgZGVzaXJlZCBlZmZlY3QgaXMgdG8gaGF2ZSBib3RoIG9mIHRoZSBhdHRyaWJ1dGVzIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZHN0IGRlc3RpbmF0aW9uIGF0dHJpYnV0ZXMgKG9yaWdpbmFsIERPTSlcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gc3JjIHNvdXJjZSBhdHRyaWJ1dGVzIChmcm9tIHRoZSBkaXJlY3RpdmUgdGVtcGxhdGUpXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXMoZHN0LCBzcmMpIHtcbiAgICAgIHZhciBzcmNBdHRyID0gc3JjLiRhdHRyLFxuICAgICAgICAgIGRzdEF0dHIgPSBkc3QuJGF0dHI7XG5cbiAgICAgIC8vIHJlYXBwbHkgdGhlIG9sZCBhdHRyaWJ1dGVzIHRvIHRoZSBuZXcgZWxlbWVudFxuICAgICAgZm9yRWFjaChkc3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgIT09ICckJykge1xuICAgICAgICAgIGlmIChzcmNba2V5XSAmJiBzcmNba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdmFsdWUgKz0gKGtleSA9PT0gJ3N0eWxlJyA/ICc7JyA6ICcgJykgKyBzcmNba2V5XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gc3JjW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRzdC4kc2V0KGtleSwgdmFsdWUsIHRydWUsIHNyY0F0dHJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBjb3B5IHRoZSBuZXcgYXR0cmlidXRlcyBvbiB0aGUgb2xkIGF0dHJzIG9iamVjdFxuICAgICAgZm9yRWFjaChzcmMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBzZXQgdGhpcyBhdHRyaWJ1dGUgaW4gdGhlIGxvb3AgYWJvdmUuXG4gICAgICAgIC8vIGBkc3RgIHdpbGwgbmV2ZXIgY29udGFpbiBoYXNPd25Qcm9wZXJ0eSBhcyBET00gcGFyc2VyIHdvbid0IGxldCBpdC5cbiAgICAgICAgLy8gWW91IHdpbGwgZ2V0IGFuIFwiSW52YWxpZENoYXJhY3RlckVycm9yOiBET00gRXhjZXB0aW9uIDVcIiBlcnJvciBpZiB5b3VcbiAgICAgICAgLy8gaGF2ZSBhbiBhdHRyaWJ1dGUgbGlrZSBcImhhcy1vd24tcHJvcGVydHlcIiBvciBcImRhdGEtaGFzLW93bi1wcm9wZXJ0eVwiLCBldGMuXG4gICAgICAgIGlmICghZHN0Lmhhc093blByb3BlcnR5KGtleSkgJiYga2V5LmNoYXJBdCgwKSAhPT0gJyQnKSB7XG4gICAgICAgICAgZHN0W2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgIGlmIChrZXkgIT09ICdjbGFzcycgJiYga2V5ICE9PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICBkc3RBdHRyW2tleV0gPSBzcmNBdHRyW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLCAkY29tcGlsZU5vZGUsIHRBdHRycyxcbiAgICAgICAgJHJvb3RFbGVtZW50LCBjaGlsZFRyYW5zY2x1ZGVGbiwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIHZhciBsaW5rUXVldWUgPSBbXSxcbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbixcbiAgICAgICAgICBhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sXG4gICAgICAgICAgYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSA9ICRjb21waWxlTm9kZVswXSxcbiAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUgPSBkaXJlY3RpdmVzLnNoaWZ0KCksXG4gICAgICAgICAgZGVyaXZlZFN5bmNEaXJlY3RpdmUgPSBpbmhlcml0KG9yaWdBc3luY0RpcmVjdGl2ZSwge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IG51bGwsIHRyYW5zY2x1ZGU6IG51bGwsIHJlcGxhY2U6IG51bGwsICQkb3JpZ2luYWxEaXJlY3RpdmU6IG9yaWdBc3luY0RpcmVjdGl2ZVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHRlbXBsYXRlVXJsID0gKGlzRnVuY3Rpb24ob3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsKSlcbiAgICAgICAgICAgICAgPyBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwoJGNvbXBpbGVOb2RlLCB0QXR0cnMpXG4gICAgICAgICAgICAgIDogb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsLFxuICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlID0gb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlTmFtZXNwYWNlO1xuXG4gICAgICAkY29tcGlsZU5vZGUuZW1wdHkoKTtcblxuICAgICAgJHRlbXBsYXRlUmVxdWVzdCh0ZW1wbGF0ZVVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIHZhciBjb21waWxlTm9kZSwgdGVtcFRlbXBsYXRlQXR0cnMsICR0ZW1wbGF0ZSwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcblxuICAgICAgICAgIGNvbnRlbnQgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGNvbnRlbnQpO1xuXG4gICAgICAgICAgaWYgKG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKSB7XG4gICAgICAgICAgICBpZiAoanFMaXRlSXNUZXh0Tm9kZShjb250ZW50KSkge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IHJlbW92ZUNvbW1lbnRzKHdyYXBUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWVzcGFjZSwgdHJpbShjb250ZW50KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkdGVtcGxhdGVbMF07XG5cbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9PSAxIHx8IGNvbXBpbGVOb2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndHBscnQnLFxuICAgICAgICAgICAgICAgICAgJ1RlbXBsYXRlIGZvciBkaXJlY3RpdmUgXFwnezB9XFwnIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfScsXG4gICAgICAgICAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUubmFtZSwgdGVtcGxhdGVVcmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZW1wVGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xuICAgICAgICAgICAgcmVwbGFjZVdpdGgoJHJvb3RFbGVtZW50LCAkY29tcGlsZU5vZGUsIGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhjb21waWxlTm9kZSwgW10sIHRlbXBUZW1wbGF0ZUF0dHJzKTtcblxuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KG9yaWdBc3luY0RpcmVjdGl2ZS5zY29wZSkpIHtcbiAgICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIGRpcmVjdGl2ZSB0aGF0IGNhdXNlZCB0aGUgdGVtcGxhdGUgdG8gYmUgbG9hZGVkIGFzeW5jIHJlcXVpcmVkXG4gICAgICAgICAgICAgIC8vIGFuIGlzb2xhdGUgc2NvcGVcbiAgICAgICAgICAgICAgbWFya0RpcmVjdGl2ZVNjb3BlKHRlbXBsYXRlRGlyZWN0aXZlcywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXJlY3RpdmVzID0gdGVtcGxhdGVEaXJlY3RpdmVzLmNvbmNhdChkaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRBdHRycywgdGVtcFRlbXBsYXRlQXR0cnMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb21waWxlTm9kZSA9IGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGU7XG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuaHRtbChjb250ZW50KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkaXJlY3RpdmVzLnVuc2hpZnQoZGVyaXZlZFN5bmNEaXJlY3RpdmUpO1xuXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4gPSBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgY29tcGlsZU5vZGUsIHRBdHRycyxcbiAgICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4sICRjb21waWxlTm9kZSwgb3JpZ0FzeW5jRGlyZWN0aXZlLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucyxcbiAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCk7XG4gICAgICAgICAgZm9yRWFjaCgkcm9vdEVsZW1lbnQsIGZ1bmN0aW9uKG5vZGUsIGkpIHtcbiAgICAgICAgICAgIGlmIChub2RlID09PSBjb21waWxlTm9kZSkge1xuICAgICAgICAgICAgICAkcm9vdEVsZW1lbnRbaV0gPSAkY29tcGlsZU5vZGVbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuID0gY29tcGlsZU5vZGVzKCRjb21waWxlTm9kZVswXS5jaGlsZE5vZGVzLCBjaGlsZFRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgICB3aGlsZSAobGlua1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHNjb3BlID0gbGlua1F1ZXVlLnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGxpbmtSb290RWxlbWVudCA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGJvdW5kVHJhbnNjbHVkZUZuID0gbGlua1F1ZXVlLnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgbGlua05vZGUgPSAkY29tcGlsZU5vZGVbMF07XG5cbiAgICAgICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgY29udGludWU7XG5cbiAgICAgICAgICAgIGlmIChiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlICE9PSBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlKSB7XG4gICAgICAgICAgICAgIHZhciBvbGRDbGFzc2VzID0gYmVmb3JlVGVtcGxhdGVMaW5rTm9kZS5jbGFzc05hbWU7XG5cbiAgICAgICAgICAgICAgaWYgKCEocHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSAmJlxuICAgICAgICAgICAgICAgICAgb3JpZ0FzeW5jRGlyZWN0aXZlLnJlcGxhY2UpKSB7XG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNsb25lZCB0aGVyZWZvcmUgd2UgaGF2ZSB0byBjbG9uZSBhcyB3ZWxsLlxuICAgICAgICAgICAgICAgIGxpbmtOb2RlID0ganFMaXRlQ2xvbmUoY29tcGlsZU5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlcGxhY2VXaXRoKGxpbmtSb290RWxlbWVudCwganFMaXRlKGJlZm9yZVRlbXBsYXRlTGlua05vZGUpLCBsaW5rTm9kZSk7XG5cbiAgICAgICAgICAgICAgLy8gQ29weSBpbiBDU1MgY2xhc3NlcyBmcm9tIG9yaWdpbmFsIG5vZGVcbiAgICAgICAgICAgICAgc2FmZUFkZENsYXNzKGpxTGl0ZShsaW5rTm9kZSksIG9sZENsYXNzZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4oYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuLCBzY29wZSwgbGlua05vZGUsICRyb290RWxlbWVudCxcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmtRdWV1ZSA9IG51bGw7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgaWYgKGlzRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlbGF5ZWROb2RlTGlua0ZuKGlnbm9yZUNoaWxkTGlua0ZuLCBzY29wZSwgbm9kZSwgcm9vdEVsZW1lbnQsIGJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIHZhciBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gYm91bmRUcmFuc2NsdWRlRm47XG4gICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBpZiAobGlua1F1ZXVlKSB7XG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2goc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICByb290RWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sIHNjb3BlLCBub2RlLCByb290RWxlbWVudCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTb3J0aW5nIGZ1bmN0aW9uIGZvciBib3VuZCBkaXJlY3RpdmVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ5UHJpb3JpdHkoYSwgYikge1xuICAgICAgdmFyIGRpZmYgPSBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcbiAgICAgIGlmIChkaWZmICE9PSAwKSByZXR1cm4gZGlmZjtcbiAgICAgIGlmIChhLm5hbWUgIT09IGIubmFtZSkgcmV0dXJuIChhLm5hbWUgPCBiLm5hbWUpID8gLTEgOiAxO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFzc2VydE5vRHVwbGljYXRlKHdoYXQsIHByZXZpb3VzRGlyZWN0aXZlLCBkaXJlY3RpdmUsIGVsZW1lbnQpIHtcblxuICAgICAgZnVuY3Rpb24gd3JhcE1vZHVsZU5hbWVJZkRlZmluZWQobW9kdWxlTmFtZSkge1xuICAgICAgICByZXR1cm4gbW9kdWxlTmFtZSA/XG4gICAgICAgICAgKCcgKG1vZHVsZTogJyArIG1vZHVsZU5hbWUgKyAnKScpIDpcbiAgICAgICAgICAnJztcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZpb3VzRGlyZWN0aXZlKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtdWx0aWRpcicsICdNdWx0aXBsZSBkaXJlY3RpdmVzIFt7MH17MX0sIHsyfXszfV0gYXNraW5nIGZvciB7NH0gb246IHs1fScsXG4gICAgICAgICAgICBwcmV2aW91c0RpcmVjdGl2ZS5uYW1lLCB3cmFwTW9kdWxlTmFtZUlmRGVmaW5lZChwcmV2aW91c0RpcmVjdGl2ZS4kJG1vZHVsZU5hbWUpLFxuICAgICAgICAgICAgZGlyZWN0aXZlLm5hbWUsIHdyYXBNb2R1bGVOYW1lSWZEZWZpbmVkKGRpcmVjdGl2ZS4kJG1vZHVsZU5hbWUpLCB3aGF0LCBzdGFydGluZ1RhZyhlbGVtZW50KSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBhZGRUZXh0SW50ZXJwb2xhdGVEaXJlY3RpdmUoZGlyZWN0aXZlcywgdGV4dCkge1xuICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUodGV4dCwgdHJ1ZSk7XG4gICAgICBpZiAoaW50ZXJwb2xhdGVGbikge1xuICAgICAgICBkaXJlY3RpdmVzLnB1c2goe1xuICAgICAgICAgIHByaW9yaXR5OiAwLFxuICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZUNvbXBpbGVGbih0ZW1wbGF0ZU5vZGUpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZU5vZGVQYXJlbnQgPSB0ZW1wbGF0ZU5vZGUucGFyZW50KCksXG4gICAgICAgICAgICAgICAgaGFzQ29tcGlsZVBhcmVudCA9ICEhdGVtcGxhdGVOb2RlUGFyZW50Lmxlbmd0aDtcblxuICAgICAgICAgICAgLy8gV2hlbiB0cmFuc2NsdWRpbmcgYSB0ZW1wbGF0ZSB0aGF0IGhhcyBiaW5kaW5ncyBpbiB0aGUgcm9vdFxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgaGF2ZSBhIHBhcmVudCBhbmQgdGh1cyBuZWVkIHRvIGFkZCB0aGUgY2xhc3MgZHVyaW5nIGxpbmtpbmcgZm4uXG4gICAgICAgICAgICBpZiAoaGFzQ29tcGlsZVBhcmVudCkgY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0ZW1wbGF0ZU5vZGVQYXJlbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdGV4dEludGVycG9sYXRlTGlua0ZuKHNjb3BlLCBub2RlKSB7XG4gICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudCgpO1xuICAgICAgICAgICAgICBpZiAoIWhhc0NvbXBpbGVQYXJlbnQpIGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3MocGFyZW50KTtcbiAgICAgICAgICAgICAgY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKHBhcmVudCwgaW50ZXJwb2xhdGVGbi5leHByZXNzaW9ucyk7XG4gICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChpbnRlcnBvbGF0ZUZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICBub2RlWzBdLm5vZGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHdyYXBUZW1wbGF0ZSh0eXBlLCB0ZW1wbGF0ZSkge1xuICAgICAgdHlwZSA9IGxvd2VyY2FzZSh0eXBlIHx8ICdodG1sJyk7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3N2Zyc6XG4gICAgICBjYXNlICdtYXRoJzpcbiAgICAgICAgdmFyIHdyYXBwZXIgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gJzwnICsgdHlwZSArICc+JyArIHRlbXBsYXRlICsgJzwvJyArIHR5cGUgKyAnPic7XG4gICAgICAgIHJldHVybiB3cmFwcGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2RlcztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGdldFRydXN0ZWRDb250ZXh0KG5vZGUsIGF0dHJOb3JtYWxpemVkTmFtZSkge1xuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ3NyY2RvYycpIHtcbiAgICAgICAgcmV0dXJuICRzY2UuSFRNTDtcbiAgICAgIH1cbiAgICAgIHZhciB0YWcgPSBub2RlTmFtZV8obm9kZSk7XG4gICAgICAvLyBBbGwgdGFncyB3aXRoIHNyYyBhdHRyaWJ1dGVzIHJlcXVpcmUgYSBSRVNPVVJDRV9VUkwgdmFsdWUsIGV4Y2VwdCBmb3JcbiAgICAgIC8vIGltZyBhbmQgdmFyaW91cyBodG1sNSBtZWRpYSB0YWdzLCB3aGljaCByZXF1aXJlIHRoZSBNRURJQV9VUkwgY29udGV4dC5cbiAgICAgIGlmIChhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdzcmMnIHx8IGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ25nU3JjJykge1xuICAgICAgICBpZiAoWydpbWcnLCAndmlkZW8nLCAnYXVkaW8nLCAnc291cmNlJywgJ3RyYWNrJ10uaW5kZXhPZih0YWcpID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiAkc2NlLlJFU09VUkNFX1VSTDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHNjZS5NRURJQV9VUkw7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ3hsaW5rSHJlZicpIHtcbiAgICAgICAgLy8gU29tZSB4bGluazpocmVmIGFyZSBva2F5LCBtb3N0IGFyZW4ndFxuICAgICAgICBpZiAodGFnID09PSAnaW1hZ2UnKSByZXR1cm4gJHNjZS5NRURJQV9VUkw7XG4gICAgICAgIGlmICh0YWcgPT09ICdhJykgcmV0dXJuICRzY2UuVVJMO1xuICAgICAgICByZXR1cm4gJHNjZS5SRVNPVVJDRV9VUkw7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIC8vIEZvcm1hY3Rpb25cbiAgICAgICAgICAodGFnID09PSAnZm9ybScgJiYgYXR0ck5vcm1hbGl6ZWROYW1lID09PSAnYWN0aW9uJykgfHxcbiAgICAgICAgICAvLyBJZiByZWxhdGl2ZSBVUkxzIGNhbiBnbyB3aGVyZSB0aGV5IGFyZSBub3QgZXhwZWN0ZWQgdG8sIHRoZW5cbiAgICAgICAgICAvLyBhbGwgc29ydHMgb2YgdHJ1c3QgaXNzdWVzIGNhbiBhcmlzZS5cbiAgICAgICAgICAodGFnID09PSAnYmFzZScgJiYgYXR0ck5vcm1hbGl6ZWROYW1lID09PSAnaHJlZicpIHx8XG4gICAgICAgICAgLy8gbGlua3MgY2FuIGJlIHN0eWxlc2hlZXRzIG9yIGltcG9ydHMsIHdoaWNoIGNhbiBydW4gc2NyaXB0IGluIHRoZSBjdXJyZW50IG9yaWdpblxuICAgICAgICAgICh0YWcgPT09ICdsaW5rJyAmJiBhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdocmVmJylcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gJHNjZS5SRVNPVVJDRV9VUkw7XG4gICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2EnICYmIChhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdocmVmJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ck5vcm1hbGl6ZWROYW1lID09PSAnbmdIcmVmJykpIHtcbiAgICAgICAgcmV0dXJuICRzY2UuVVJMO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYWRkQXR0ckludGVycG9sYXRlRGlyZWN0aXZlKG5vZGUsIGRpcmVjdGl2ZXMsIHZhbHVlLCBuYW1lLCBpc05nQXR0cikge1xuICAgICAgdmFyIHRydXN0ZWRDb250ZXh0ID0gZ2V0VHJ1c3RlZENvbnRleHQobm9kZSwgbmFtZSk7XG4gICAgICB2YXIgbXVzdEhhdmVFeHByZXNzaW9uID0gIWlzTmdBdHRyO1xuICAgICAgdmFyIGFsbE9yTm90aGluZyA9IEFMTF9PUl9OT1RISU5HX0FUVFJTW25hbWVdIHx8IGlzTmdBdHRyO1xuXG4gICAgICB2YXIgaW50ZXJwb2xhdGVGbiA9ICRpbnRlcnBvbGF0ZSh2YWx1ZSwgbXVzdEhhdmVFeHByZXNzaW9uLCB0cnVzdGVkQ29udGV4dCwgYWxsT3JOb3RoaW5nKTtcblxuICAgICAgLy8gbm8gaW50ZXJwb2xhdGlvbiBmb3VuZCAtPiBpZ25vcmVcbiAgICAgIGlmICghaW50ZXJwb2xhdGVGbikgcmV0dXJuO1xuXG4gICAgICBpZiAobmFtZSA9PT0gJ211bHRpcGxlJyAmJiBub2RlTmFtZV8obm9kZSkgPT09ICdzZWxlY3QnKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdzZWxtdWx0aScsXG4gICAgICAgICAgICAnQmluZGluZyB0byB0aGUgXFwnbXVsdGlwbGVcXCcgYXR0cmlidXRlIGlzIG5vdCBzdXBwb3J0ZWQuIEVsZW1lbnQ6IHswfScsXG4gICAgICAgICAgICBzdGFydGluZ1RhZyhub2RlKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQLnRlc3QobmFtZSkpIHtcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vZG9tZXZlbnRzJyxcbiAgICAgICAgICAgICdJbnRlcnBvbGF0aW9ucyBmb3IgSFRNTCBET00gZXZlbnQgYXR0cmlidXRlcyBhcmUgZGlzYWxsb3dlZC4gIFBsZWFzZSB1c2UgdGhlICcgK1xuICAgICAgICAgICAgICAgICduZy0gdmVyc2lvbnMgKHN1Y2ggYXMgbmctY2xpY2sgaW5zdGVhZCBvZiBvbmNsaWNrKSBpbnN0ZWFkLicpO1xuICAgICAgfVxuXG4gICAgICBkaXJlY3RpdmVzLnB1c2goe1xuICAgICAgICBwcmlvcml0eTogMTAwLFxuICAgICAgICBjb21waWxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHByZTogZnVuY3Rpb24gYXR0ckludGVycG9sYXRlUHJlTGlua0ZuKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICAgICAgICAgdmFyICQkb2JzZXJ2ZXJzID0gKGF0dHIuJCRvYnNlcnZlcnMgfHwgKGF0dHIuJCRvYnNlcnZlcnMgPSBjcmVhdGVNYXAoKSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBoYXMgY2hhbmdlZCBzaW5jZSBsYXN0ICRpbnRlcnBvbGF0ZSgpZWRcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBhdHRyW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gaW50ZXJwb2xhdGUgYWdhaW4gc2luY2UgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBoYXMgYmVlbiB1cGRhdGVkXG4gICAgICAgICAgICAgICAgICAvLyAoZS5nLiBieSBhbm90aGVyIGRpcmVjdGl2ZSdzIGNvbXBpbGUgZnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgdW5zZXQvZW1wdHkgdmFsdWVzIG1ha2UgaW50ZXJwb2xhdGVGbiBmYWxzeVxuICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVGbiA9IG5ld1ZhbHVlICYmICRpbnRlcnBvbGF0ZShuZXdWYWx1ZSwgdHJ1ZSwgdHJ1c3RlZENvbnRleHQsIGFsbE9yTm90aGluZyk7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIGF0dHJpYnV0ZSB3YXMgdXBkYXRlZCBzbyB0aGF0IHRoZXJlIGlzIG5vIGludGVycG9sYXRpb24gZ29pbmcgb24gd2UgZG9uJ3Qgd2FudCB0b1xuICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGFueSBvYnNlcnZlcnNcbiAgICAgICAgICAgICAgICBpZiAoIWludGVycG9sYXRlRm4pIHJldHVybjtcblxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgYXR0ciBvYmplY3Qgc28gdGhhdCBpdCdzIHJlYWR5IGluIGNhc2Ugd2UgbmVlZCB0aGUgdmFsdWUgZm9yIGlzb2xhdGVcbiAgICAgICAgICAgICAgICAvLyBzY29wZSBpbml0aWFsaXphdGlvbiwgb3RoZXJ3aXNlIHRoZSB2YWx1ZSB3b3VsZCBub3QgYmUgYXZhaWxhYmxlIGZyb20gaXNvbGF0ZVxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZSdzIGxpbmtpbmcgZm4gZHVyaW5nIGxpbmtpbmcgcGhhc2VcbiAgICAgICAgICAgICAgICBhdHRyW25hbWVdID0gaW50ZXJwb2xhdGVGbihzY29wZSk7XG5cbiAgICAgICAgICAgICAgICAoJCRvYnNlcnZlcnNbbmFtZV0gfHwgKCQkb2JzZXJ2ZXJzW25hbWVdID0gW10pKS4kJGludGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAoYXR0ci4kJG9ic2VydmVycyAmJiBhdHRyLiQkb2JzZXJ2ZXJzW25hbWVdLiQkc2NvcGUgfHwgc2NvcGUpLlxuICAgICAgICAgICAgICAgICAgJHdhdGNoKGludGVycG9sYXRlRm4sIGZ1bmN0aW9uIGludGVycG9sYXRlRm5XYXRjaEFjdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9zcGVjaWFsIGNhc2UgZm9yIGNsYXNzIGF0dHJpYnV0ZSBhZGRpdGlvbiArIHJlbW92YWxcbiAgICAgICAgICAgICAgICAgICAgLy9zbyB0aGF0IGNsYXNzIGNoYW5nZXMgY2FuIHRhcCBpbnRvIHRoZSBhbmltYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy9ob29rcyBwcm92aWRlZCBieSB0aGUgJGFuaW1hdGUgc2VydmljZS4gQmUgc3VyZSB0b1xuICAgICAgICAgICAgICAgICAgICAvL3NraXAgYW5pbWF0aW9ucyB3aGVuIHRoZSBmaXJzdCBkaWdlc3Qgb2NjdXJzICh3aGVuXG4gICAgICAgICAgICAgICAgICAgIC8vYm90aCB0aGUgbmV3IGFuZCB0aGUgb2xkIHZhbHVlcyBhcmUgdGhlIHNhbWUpIHNpbmNlXG4gICAgICAgICAgICAgICAgICAgIC8vdGhlIENTUyBjbGFzc2VzIGFyZSB0aGUgbm9uLWludGVycG9sYXRlZCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgbmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYXR0ci4kdXBkYXRlQ2xhc3MobmV3VmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyLiRzZXQobmFtZSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgYSBzcGVjaWFsIGpxTGl0ZS5yZXBsYWNlV2l0aCwgd2hpY2ggY2FuIHJlcGxhY2UgaXRlbXMgd2hpY2hcbiAgICAgKiBoYXZlIG5vIHBhcmVudHMsIHByb3ZpZGVkIHRoYXQgdGhlIGNvbnRhaW5pbmcganFMaXRlIGNvbGxlY3Rpb24gaXMgcHJvdmlkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0pxTGl0ZT19ICRyb290RWxlbWVudCBUaGUgcm9vdCBvZiB0aGUgY29tcGlsZSB0cmVlLiBVc2VkIHNvIHRoYXQgd2UgY2FuIHJlcGxhY2Ugbm9kZXNcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0aGUgcm9vdCBvZiB0aGUgdHJlZS5cbiAgICAgKiBAcGFyYW0ge0pxTGl0ZX0gZWxlbWVudHNUb1JlbW92ZSBUaGUganFMaXRlIGVsZW1lbnQgd2hpY2ggd2UgYXJlIGdvaW5nIHRvIHJlcGxhY2UuIFdlIGtlZXBcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgc2hlbGwsIGJ1dCByZXBsYWNlIGl0cyBET00gbm9kZSByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIFRoZSBuZXcgRE9NIG5vZGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVwbGFjZVdpdGgoJHJvb3RFbGVtZW50LCBlbGVtZW50c1RvUmVtb3ZlLCBuZXdOb2RlKSB7XG4gICAgICB2YXIgZmlyc3RFbGVtZW50VG9SZW1vdmUgPSBlbGVtZW50c1RvUmVtb3ZlWzBdLFxuICAgICAgICAgIHJlbW92ZUNvdW50ID0gZWxlbWVudHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgICAgICAgcGFyZW50ID0gZmlyc3RFbGVtZW50VG9SZW1vdmUucGFyZW50Tm9kZSxcbiAgICAgICAgICBpLCBpaTtcblxuICAgICAgaWYgKCRyb290RWxlbWVudCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9ICRyb290RWxlbWVudC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgaWYgKCRyb290RWxlbWVudFtpXSA9PT0gZmlyc3RFbGVtZW50VG9SZW1vdmUpIHtcbiAgICAgICAgICAgICRyb290RWxlbWVudFtpKytdID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpLCBqMiA9IGogKyByZW1vdmVDb3VudCAtIDEsXG4gICAgICAgICAgICAgICAgICAgICBqaiA9ICRyb290RWxlbWVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgIGogPCBqajsgaisrLCBqMisrKSB7XG4gICAgICAgICAgICAgIGlmIChqMiA8IGpqKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RFbGVtZW50W2pdID0gJHJvb3RFbGVtZW50W2oyXTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgJHJvb3RFbGVtZW50W2pdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkcm9vdEVsZW1lbnQubGVuZ3RoIC09IHJlbW92ZUNvdW50IC0gMTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcGxhY2VkIGVsZW1lbnQgaXMgYWxzbyB0aGUgalF1ZXJ5IC5jb250ZXh0IHRoZW4gcmVwbGFjZSBpdFxuICAgICAgICAgICAgLy8gLmNvbnRleHQgaXMgYSBkZXByZWNhdGVkIGpRdWVyeSBhcGksIHNvIHdlIHNob3VsZCBzZXQgaXQgb25seSB3aGVuIGpRdWVyeSBzZXQgaXRcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jb250ZXh0L1xuICAgICAgICAgICAgaWYgKCRyb290RWxlbWVudC5jb250ZXh0ID09PSBmaXJzdEVsZW1lbnRUb1JlbW92ZSkge1xuICAgICAgICAgICAgICAkcm9vdEVsZW1lbnQuY29udGV4dCA9IG5ld05vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsIGZpcnN0RWxlbWVudFRvUmVtb3ZlKTtcbiAgICAgIH1cblxuICAgICAgLy8gQXBwZW5kIGFsbCB0aGUgYGVsZW1lbnRzVG9SZW1vdmVgIHRvIGEgZnJhZ21lbnQuIFRoaXMgd2lsbC4uLlxuICAgICAgLy8gLSByZW1vdmUgdGhlbSBmcm9tIHRoZSBET01cbiAgICAgIC8vIC0gYWxsb3cgdGhlbSB0byBzdGlsbCBiZSB0cmF2ZXJzZWQgd2l0aCAubmV4dFNpYmxpbmdcbiAgICAgIC8vIC0gYWxsb3cgYSBzaW5nbGUgZnJhZ21lbnQucVNBIHRvIGZldGNoIGFsbCBlbGVtZW50cyBiZWluZyByZW1vdmVkXG4gICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHJlbW92ZUNvdW50OyBpKyspIHtcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudHNUb1JlbW92ZVtpXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChqcUxpdGUuaGFzRGF0YShmaXJzdEVsZW1lbnRUb1JlbW92ZSkpIHtcbiAgICAgICAgLy8gQ29weSBvdmVyIHVzZXIgZGF0YSAodGhhdCBpbmNsdWRlcyBBbmd1bGFySlMncyAkc2NvcGUgZXRjLikuIERvbid0IGNvcHkgcHJpdmF0ZVxuICAgICAgICAvLyBkYXRhIGhlcmUgYmVjYXVzZSB0aGVyZSdzIG5vIHB1YmxpYyBpbnRlcmZhY2UgaW4galF1ZXJ5IHRvIGRvIHRoYXQgYW5kIGNvcHlpbmcgb3ZlclxuICAgICAgICAvLyBldmVudCBsaXN0ZW5lcnMgKHdoaWNoIGlzIHRoZSBtYWluIHVzZSBvZiBwcml2YXRlIGRhdGEpIHdvdWxkbid0IHdvcmsgYW55d2F5LlxuICAgICAgICBqcUxpdGUuZGF0YShuZXdOb2RlLCBqcUxpdGUuZGF0YShmaXJzdEVsZW1lbnRUb1JlbW92ZSkpO1xuXG4gICAgICAgIC8vIFJlbW92ZSAkZGVzdHJveSBldmVudCBsaXN0ZW5lcnMgZnJvbSBgZmlyc3RFbGVtZW50VG9SZW1vdmVgXG4gICAgICAgIGpxTGl0ZShmaXJzdEVsZW1lbnRUb1JlbW92ZSkub2ZmKCckZGVzdHJveScpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbnVwIGFueSBkYXRhL2xpc3RlbmVycyBvbiB0aGUgZWxlbWVudHMgYW5kIGNoaWxkcmVuLlxuICAgICAgLy8gVGhpcyBpbmNsdWRlcyBpbnZva2luZyB0aGUgJGRlc3Ryb3kgZXZlbnQgb24gYW55IGVsZW1lbnRzIHdpdGggbGlzdGVuZXJzLlxuICAgICAganFMaXRlLmNsZWFuRGF0YShmcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGpxTGl0ZSBjb2xsZWN0aW9uIHRvIG9ubHkgY29udGFpbiB0aGUgYG5ld05vZGVgXG4gICAgICBmb3IgKGkgPSAxOyBpIDwgcmVtb3ZlQ291bnQ7IGkrKykge1xuICAgICAgICBkZWxldGUgZWxlbWVudHNUb1JlbW92ZVtpXTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnRzVG9SZW1vdmVbMF0gPSBuZXdOb2RlO1xuICAgICAgZWxlbWVudHNUb1JlbW92ZS5sZW5ndGggPSAxO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gY2xvbmVBbmRBbm5vdGF0ZUZuKGZuLCBhbm5vdGF0aW9uKSB7XG4gICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKCkgeyByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgfSwgZm4sIGFubm90YXRpb24pO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gaW52b2tlTGlua0ZuKGxpbmtGbiwgc2NvcGUsICRlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGlua0ZuKHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlLCBzdGFydGluZ1RhZygkZWxlbWVudCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0cmljdEJpbmRpbmdzQ2hlY2soYXR0ck5hbWUsIGRpcmVjdGl2ZU5hbWUpIHtcbiAgICAgIGlmIChzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQpIHtcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ21pc3NpbmdhdHRyJyxcbiAgICAgICAgICAnQXR0cmlidXRlIFxcJ3swfVxcJyBvZiBcXCd7MX1cXCcgaXMgbm9uLW9wdGlvbmFsIGFuZCBtdXN0IGJlIHNldCEnLFxuICAgICAgICAgIGF0dHJOYW1lLCBkaXJlY3RpdmVOYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgJHdhdGNoZXMgZm9yIGlzb2xhdGUgc2NvcGUgYW5kIGNvbnRyb2xsZXIgYmluZGluZ3MuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZURpcmVjdGl2ZUJpbmRpbmdzKHNjb3BlLCBhdHRycywgZGVzdGluYXRpb24sIGJpbmRpbmdzLCBkaXJlY3RpdmUpIHtcbiAgICAgIHZhciByZW1vdmVXYXRjaENvbGxlY3Rpb24gPSBbXTtcbiAgICAgIHZhciBpbml0aWFsQ2hhbmdlcyA9IHt9O1xuICAgICAgdmFyIGNoYW5nZXM7XG5cbiAgICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uIGluaXRpYWxpemVCaW5kaW5nKGRlZmluaXRpb24sIHNjb3BlTmFtZSkge1xuICAgICAgICB2YXIgYXR0ck5hbWUgPSBkZWZpbml0aW9uLmF0dHJOYW1lLFxuICAgICAgICBvcHRpb25hbCA9IGRlZmluaXRpb24ub3B0aW9uYWwsXG4gICAgICAgIG1vZGUgPSBkZWZpbml0aW9uLm1vZGUsIC8vIEAsID0sIDwsIG9yICZcbiAgICAgICAgbGFzdFZhbHVlLFxuICAgICAgICBwYXJlbnRHZXQsIHBhcmVudFNldCwgY29tcGFyZSwgcmVtb3ZlV2F0Y2g7XG5cbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XG5cbiAgICAgICAgICBjYXNlICdAJzpcbiAgICAgICAgICAgIGlmICghb3B0aW9uYWwgJiYgIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICAgIGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBhdHRyc1thdHRyTmFtZV0gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gYXR0cnMuJG9ic2VydmUoYXR0ck5hbWUsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgaXNCb29sZWFuKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV07XG4gICAgICAgICAgICAgICAgcmVjb3JkQ2hhbmdlcyhzY29wZU5hbWUsIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF0dHJzLiQkb2JzZXJ2ZXJzW2F0dHJOYW1lXS4kJHNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgICBsYXN0VmFsdWUgPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcobGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGhhcyBiZWVuIHByb3ZpZGVkIHRoZW4gd2UgdHJpZ2dlciBhbiBpbnRlcnBvbGF0aW9uIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAvLyB0aGUgdmFsdWUgaXMgdGhlcmUgZm9yIHVzZSBpbiB0aGUgbGluayBmblxuICAgICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gJGludGVycG9sYXRlKGxhc3RWYWx1ZSkoc2NvcGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Jvb2xlYW4obGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlcyBpcyBvbmUgb2YgdGhlIEJPT0xFQU5fQVRUUiB0aGVuIEFuZ3VsYXJKUyB3aWxsIGhhdmUgY29udmVydGVkXG4gICAgICAgICAgICAgIC8vIHRoZSB2YWx1ZSB0byBib29sZWFuIHJhdGhlciB0aGFuIGEgc3RyaW5nLCBzbyB3ZSBzcGVjaWFsIGNhc2UgdGhpcyBzaXR1YXRpb25cbiAgICAgICAgICAgICAgZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IGxhc3RWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluaXRpYWxDaGFuZ2VzW3Njb3BlTmFtZV0gPSBuZXcgU2ltcGxlQ2hhbmdlKF9VTklOSVRJQUxJWkVEX1ZBTFVFLCBkZXN0aW5hdGlvbltzY29wZU5hbWVdKTtcbiAgICAgICAgICAgIHJlbW92ZVdhdGNoQ29sbGVjdGlvbi5wdXNoKHJlbW92ZVdhdGNoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnPSc6XG4gICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIGJyZWFrO1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICAgIGF0dHJzW2F0dHJOYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25hbCAmJiAhYXR0cnNbYXR0ck5hbWVdKSBicmVhaztcblxuICAgICAgICAgICAgcGFyZW50R2V0ID0gJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSk7XG4gICAgICAgICAgICBpZiAocGFyZW50R2V0LmxpdGVyYWwpIHtcbiAgICAgICAgICAgICAgY29tcGFyZSA9IGVxdWFscztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbXBhcmUgPSBzaW1wbGVDb21wYXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50U2V0ID0gcGFyZW50R2V0LmFzc2lnbiB8fCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGNoYW5nZSwgb3Igd2Ugd2lsbCB0aHJvdyB0aGlzIGV4Y2VwdGlvbiBvbiBldmVyeSAkZGlnZXN0XG4gICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBwYXJlbnRHZXQoc2NvcGUpO1xuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbm9uYXNzaWduJyxcbiAgICAgICAgICAgICAgICAgICdFeHByZXNzaW9uIFxcJ3swfVxcJyBpbiBhdHRyaWJ1dGUgXFwnezF9XFwnIHVzZWQgd2l0aCBkaXJlY3RpdmUgXFwnezJ9XFwnIGlzIG5vbi1hc3NpZ25hYmxlIScsXG4gICAgICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0sIGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGFzdFZhbHVlID0gZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XG4gICAgICAgICAgICB2YXIgcGFyZW50VmFsdWVXYXRjaCA9IGZ1bmN0aW9uIHBhcmVudFZhbHVlV2F0Y2gocGFyZW50VmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKCFjb21wYXJlKHBhcmVudFZhbHVlLCBkZXN0aW5hdGlvbltzY29wZU5hbWVdKSkge1xuICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBvdXQgb2Ygc3luYyBhbmQgbmVlZCB0byBjb3B5XG4gICAgICAgICAgICAgICAgaWYgKCFjb21wYXJlKHBhcmVudFZhbHVlLCBsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAvLyBwYXJlbnQgY2hhbmdlZCBhbmQgaXQgaGFzIHByZWNlZGVuY2VcbiAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBwYXJlbnRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHBhcmVudCBjYW4gYmUgYXNzaWduZWQgdGhlbiBkbyBzb1xuICAgICAgICAgICAgICAgICAgcGFyZW50U2V0KHNjb3BlLCBwYXJlbnRWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBwYXJlbnRWYWx1ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGxhc3RWYWx1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwYXJlbnRWYWx1ZVdhdGNoLiRzdGF0ZWZ1bCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5jb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihhdHRyc1thdHRyTmFtZV0sIHBhcmVudFZhbHVlV2F0Y2gpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVtb3ZlV2F0Y2ggPSBzY29wZS4kd2F0Y2goJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSwgcGFyZW50VmFsdWVXYXRjaCksIG51bGwsIHBhcmVudEdldC5saXRlcmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbW92ZVdhdGNoQ29sbGVjdGlvbi5wdXNoKHJlbW92ZVdhdGNoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnPCc6XG4gICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIGJyZWFrO1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICAgIGF0dHJzW2F0dHJOYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25hbCAmJiAhYXR0cnNbYXR0ck5hbWVdKSBicmVhaztcblxuICAgICAgICAgICAgcGFyZW50R2V0ID0gJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSk7XG4gICAgICAgICAgICB2YXIgaXNMaXRlcmFsID0gcGFyZW50R2V0LmxpdGVyYWw7XG5cbiAgICAgICAgICAgIHZhciBpbml0aWFsVmFsdWUgPSBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gcGFyZW50R2V0KHNjb3BlKTtcbiAgICAgICAgICAgIGluaXRpYWxDaGFuZ2VzW3Njb3BlTmFtZV0gPSBuZXcgU2ltcGxlQ2hhbmdlKF9VTklOSVRJQUxJWkVEX1ZBTFVFLCBkZXN0aW5hdGlvbltzY29wZU5hbWVdKTtcblxuICAgICAgICAgICAgcmVtb3ZlV2F0Y2ggPSBzY29wZVtkZWZpbml0aW9uLmNvbGxlY3Rpb24gPyAnJHdhdGNoQ29sbGVjdGlvbicgOiAnJHdhdGNoJ10ocGFyZW50R2V0LCBmdW5jdGlvbiBwYXJlbnRWYWx1ZVdhdGNoQWN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICBpZiAob2xkVmFsdWUgPT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09PSBpbml0aWFsVmFsdWUgfHwgKGlzTGl0ZXJhbCAmJiBlcXVhbHMob2xkVmFsdWUsIGluaXRpYWxWYWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlY29yZENoYW5nZXMoc2NvcGVOYW1lLCBuZXdWYWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uLnB1c2gocmVtb3ZlV2F0Y2gpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICcmJzpcbiAgICAgICAgICAgIGlmICghb3B0aW9uYWwgJiYgIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb24ndCBhc3NpZ24gT2JqZWN0LnByb3RvdHlwZSBtZXRob2QgdG8gc2NvcGVcbiAgICAgICAgICAgIHBhcmVudEdldCA9IGF0dHJzLmhhc093blByb3BlcnR5KGF0dHJOYW1lKSA/ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pIDogbm9vcDtcblxuICAgICAgICAgICAgLy8gRG9uJ3QgYXNzaWduIG5vb3AgdG8gZGVzdGluYXRpb24gaWYgZXhwcmVzc2lvbiBpcyBub3QgdmFsaWRcbiAgICAgICAgICAgIGlmIChwYXJlbnRHZXQgPT09IG5vb3AgJiYgb3B0aW9uYWwpIGJyZWFrO1xuXG4gICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gZnVuY3Rpb24obG9jYWxzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwYXJlbnRHZXQoc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiByZWNvcmRDaGFuZ2VzKGtleSwgY3VycmVudFZhbHVlLCBwcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGRlc3RpbmF0aW9uLiRvbkNoYW5nZXMpICYmICFzaW1wbGVDb21wYXJlKGN1cnJlbnRWYWx1ZSwgcHJldmlvdXNWYWx1ZSkpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBhbHJlYWR5IHNjaGVkdWxlZCB0aGUgdG9wIGxldmVsIG9uQ2hhbmdlc1F1ZXVlIGhhbmRsZXIgdGhlbiBkbyBzbyBub3dcbiAgICAgICAgICBpZiAoIW9uQ2hhbmdlc1F1ZXVlKSB7XG4gICAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZmx1c2hPbkNoYW5nZXNRdWV1ZSk7XG4gICAgICAgICAgICBvbkNoYW5nZXNRdWV1ZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBhbHJlYWR5IHF1ZXVlZCBhIHRyaWdnZXIgb2Ygb25DaGFuZ2VzIGZvciB0aGlzIGNvbnRyb2xsZXIgdGhlbiBkbyBzbyBub3dcbiAgICAgICAgICBpZiAoIWNoYW5nZXMpIHtcbiAgICAgICAgICAgIGNoYW5nZXMgPSB7fTtcbiAgICAgICAgICAgIG9uQ2hhbmdlc1F1ZXVlLnB1c2godHJpZ2dlck9uQ2hhbmdlc0hvb2spO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZiB0aGUgaGFzIGJlZW4gYSBjaGFuZ2Ugb24gdGhpcyBwcm9wZXJ0eSBhbHJlYWR5IHRoZW4gd2UgbmVlZCB0byByZXVzZSB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICBpZiAoY2hhbmdlc1trZXldKSB7XG4gICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gY2hhbmdlc1trZXldLnByZXZpb3VzVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFN0b3JlIHRoaXMgY2hhbmdlXG4gICAgICAgICAgY2hhbmdlc1trZXldID0gbmV3IFNpbXBsZUNoYW5nZShwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJPbkNoYW5nZXNIb29rKCkge1xuICAgICAgICBkZXN0aW5hdGlvbi4kb25DaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICAvLyBOb3cgY2xlYXIgdGhlIGNoYW5nZXMgc28gdGhhdCB3ZSBzY2hlZHVsZSBvbkNoYW5nZXMgd2hlbiBtb3JlIGNoYW5nZXMgYXJyaXZlXG4gICAgICAgIGNoYW5nZXMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxDaGFuZ2VzOiBpbml0aWFsQ2hhbmdlcyxcbiAgICAgICAgcmVtb3ZlV2F0Y2hlczogcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uLmxlbmd0aCAmJiBmdW5jdGlvbiByZW1vdmVXYXRjaGVzKCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlbW92ZVdhdGNoQ29sbGVjdGlvbi5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICByZW1vdmVXYXRjaENvbGxlY3Rpb25baV0oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XTtcbn1cblxuZnVuY3Rpb24gU2ltcGxlQ2hhbmdlKHByZXZpb3VzLCBjdXJyZW50KSB7XG4gIHRoaXMucHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzO1xuICB0aGlzLmN1cnJlbnRWYWx1ZSA9IGN1cnJlbnQ7XG59XG5TaW1wbGVDaGFuZ2UucHJvdG90eXBlLmlzRmlyc3RDaGFuZ2UgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA9PT0gX1VOSU5JVElBTElaRURfVkFMVUU7IH07XG5cblxudmFyIFBSRUZJWF9SRUdFWFAgPSAvXigoPzp4fGRhdGEpWzpcXC1fXSkvaTtcbnZhciBTUEVDSUFMX0NIQVJTX1JFR0VYUCA9IC9bOlxcLV9dKyguKS9nO1xuXG4vKipcbiAqIENvbnZlcnRzIGFsbCBhY2NlcHRlZCBkaXJlY3RpdmVzIGZvcm1hdCBpbnRvIHByb3BlciBkaXJlY3RpdmUgbmFtZS5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoUFJFRklYX1JFR0VYUCwgJycpXG4gICAgLnJlcGxhY2UoU1BFQ0lBTF9DSEFSU19SRUdFWFAsIGZ1bmN0aW9uKF8sIGxldHRlciwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gb2Zmc2V0ID8gbGV0dGVyLnRvVXBwZXJDYXNlKCkgOiBsZXR0ZXI7XG4gICAgfSk7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNoYXJlZCBvYmplY3QgYmV0d2VlbiBkaXJlY3RpdmUgY29tcGlsZSAvIGxpbmtpbmcgZnVuY3Rpb25zIHdoaWNoIGNvbnRhaW5zIG5vcm1hbGl6ZWQgRE9NXG4gKiBlbGVtZW50IGF0dHJpYnV0ZXMuIFRoZSB2YWx1ZXMgcmVmbGVjdCBjdXJyZW50IGJpbmRpbmcgc3RhdGUgYHt7IH19YC4gVGhlIG5vcm1hbGl6YXRpb24gaXNcbiAqIG5lZWRlZCBzaW5jZSBhbGwgb2YgdGhlc2UgYXJlIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCBpbiBBbmd1bGFySlM6XG4gKlxuICogYGBgXG4gKiAgICA8c3BhbiBuZzpiaW5kPVwiYVwiIG5nLWJpbmQ9XCJhXCIgZGF0YS1uZy1iaW5kPVwiYVwiIHgtbmctYmluZD1cImFcIj5cbiAqIGBgYFxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3BlcnR5XG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYXR0clxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBtYXAgb2YgRE9NIGVsZW1lbnQgYXR0cmlidXRlIG5hbWVzIHRvIHRoZSBub3JtYWxpemVkIG5hbWUuIFRoaXMgaXNcbiAqIG5lZWRlZCB0byBkbyByZXZlcnNlIGxvb2t1cCBmcm9tIG5vcm1hbGl6ZWQgbmFtZSBiYWNrIHRvIGFjdHVhbCBuYW1lLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkc2V0XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU2V0IERPTSBlbGVtZW50IGF0dHJpYnV0ZSB2YWx1ZS5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTm9ybWFsaXplZCBlbGVtZW50IGF0dHJpYnV0ZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBtb2RpZnkuIFRoZSBuYW1lIGlzXG4gKiAgICAgICAgICByZXZlcnNlLXRyYW5zbGF0ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYXR0ciAkYXR0cn1cbiAqICAgICAgICAgIHByb3BlcnR5IHRvIHRoZSBvcmlnaW5hbCBuYW1lLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHNldCB0aGUgYXR0cmlidXRlIHRvLiBUaGUgdmFsdWUgY2FuIGJlIGFuIGludGVycG9sYXRlZCBzdHJpbmcuXG4gKi9cblxuXG5cbi8qKlxuICogQ2xvc3VyZSBjb21waWxlciB0eXBlIGluZm9ybWF0aW9uXG4gKi9cblxuZnVuY3Rpb24gbm9kZXNldExpbmtpbmdGbihcbiAgLyogYW5ndWxhci5TY29wZSAqLyBzY29wZSxcbiAgLyogTm9kZUxpc3QgKi8gbm9kZUxpc3QsXG4gIC8qIEVsZW1lbnQgKi8gcm9vdEVsZW1lbnQsXG4gIC8qIGZ1bmN0aW9uKEZ1bmN0aW9uKSAqLyBib3VuZFRyYW5zY2x1ZGVGblxuKSB7fVxuXG5mdW5jdGlvbiBkaXJlY3RpdmVMaW5raW5nRm4oXG4gIC8qIG5vZGVzZXRMaW5raW5nRm4gKi8gbm9kZXNldExpbmtpbmdGbixcbiAgLyogYW5ndWxhci5TY29wZSAqLyBzY29wZSxcbiAgLyogTm9kZSAqLyBub2RlLFxuICAvKiBFbGVtZW50ICovIHJvb3RFbGVtZW50LFxuICAvKiBmdW5jdGlvbihGdW5jdGlvbikgKi8gYm91bmRUcmFuc2NsdWRlRm5cbikge31cblxuZnVuY3Rpb24gdG9rZW5EaWZmZXJlbmNlKHN0cjEsIHN0cjIpIHtcbiAgdmFyIHZhbHVlcyA9ICcnLFxuICAgICAgdG9rZW5zMSA9IHN0cjEuc3BsaXQoL1xccysvKSxcbiAgICAgIHRva2VuczIgPSBzdHIyLnNwbGl0KC9cXHMrLyk7XG5cbiAgb3V0ZXI6XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zMS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0b2tlbiA9IHRva2VuczFbaV07XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0b2tlbnMyLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAodG9rZW4gPT09IHRva2VuczJbal0pIGNvbnRpbnVlIG91dGVyO1xuICAgIH1cbiAgICB2YWx1ZXMgKz0gKHZhbHVlcy5sZW5ndGggPiAwID8gJyAnIDogJycpICsgdG9rZW47XG4gIH1cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbWVudHMoanFOb2Rlcykge1xuICBqcU5vZGVzID0ganFMaXRlKGpxTm9kZXMpO1xuICB2YXIgaSA9IGpxTm9kZXMubGVuZ3RoO1xuXG4gIGlmIChpIDw9IDEpIHtcbiAgICByZXR1cm4ganFOb2RlcztcbiAgfVxuXG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgbm9kZSA9IGpxTm9kZXNbaV07XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UIHx8XG4gICAgICAgKG5vZGUubm9kZVR5cGUgPT09IE5PREVfVFlQRV9URVhUICYmIG5vZGUubm9kZVZhbHVlLnRyaW0oKSA9PT0gJycpKSB7XG4gICAgICAgICBzcGxpY2UuY2FsbChqcU5vZGVzLCBpLCAxKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGpxTm9kZXM7XG59XG5cbnZhciAkY29udHJvbGxlck1pbkVyciA9IG1pbkVycignJGNvbnRyb2xsZXInKTtcblxuXG52YXIgQ05UUkxfUkVHID0gL14oXFxTKykoXFxzK2FzXFxzKyhbXFx3JF0rKSk/JC87XG5mdW5jdGlvbiBpZGVudGlmaWVyRm9yQ29udHJvbGxlcihjb250cm9sbGVyLCBpZGVudCkge1xuICBpZiAoaWRlbnQgJiYgaXNTdHJpbmcoaWRlbnQpKSByZXR1cm4gaWRlbnQ7XG4gIGlmIChpc1N0cmluZyhjb250cm9sbGVyKSkge1xuICAgIHZhciBtYXRjaCA9IENOVFJMX1JFRy5leGVjKGNvbnRyb2xsZXIpO1xuICAgIGlmIChtYXRjaCkgcmV0dXJuIG1hdGNoWzNdO1xuICB9XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUge0BsaW5rIG5nLiRjb250cm9sbGVyICRjb250cm9sbGVyIHNlcnZpY2V9IGlzIHVzZWQgYnkgQW5ndWxhckpTIHRvIGNyZWF0ZSBuZXdcbiAqIGNvbnRyb2xsZXJzLlxuICpcbiAqIFRoaXMgcHJvdmlkZXIgYWxsb3dzIGNvbnRyb2xsZXIgcmVnaXN0cmF0aW9uIHZpYSB0aGVcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyIHJlZ2lzdGVyfSBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uICRDb250cm9sbGVyUHJvdmlkZXIoKSB7XG4gIHZhciBjb250cm9sbGVycyA9IHt9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXIjaGFzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIENvbnRyb2xsZXIgbmFtZSB0byBjaGVjay5cbiAgICovXG4gIHRoaXMuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBjb250cm9sbGVycy5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBDb250cm9sbGVyIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgY29udHJvbGxlcnMgd2hlcmUgdGhlIGtleXMgYXJlXG4gICAqICAgIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbnN0cnVjdG9ycy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gY29uc3RydWN0b3IgQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmbiAob3B0aW9uYWxseSBkZWNvcmF0ZWQgd2l0aCBESVxuICAgKiAgICBhbm5vdGF0aW9ucyBpbiB0aGUgYXJyYXkgbm90YXRpb24pLlxuICAgKi9cbiAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWUsIGNvbnN0cnVjdG9yKSB7XG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ2NvbnRyb2xsZXInKTtcbiAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgIGV4dGVuZChjb250cm9sbGVycywgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRyb2xsZXJzW25hbWVdID0gY29uc3RydWN0b3I7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBuYW1lICRjb250cm9sbGVyXG4gICAgICogQHJlcXVpcmVzICRpbmplY3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IGNvbnN0cnVjdG9yIElmIGNhbGxlZCB3aXRoIGEgZnVuY3Rpb24gdGhlbiBpdCdzIGNvbnNpZGVyZWQgdG8gYmUgdGhlXG4gICAgICogICAgY29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gT3RoZXJ3aXNlIGl0J3MgY29uc2lkZXJlZCB0byBiZSBhIHN0cmluZyB3aGljaCBpcyB1c2VkXG4gICAgICogICAgdG8gcmV0cmlldmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgdXNpbmcgdGhlIGZvbGxvd2luZyBzdGVwczpcbiAgICAgKlxuICAgICAqICAgICogY2hlY2sgaWYgYSBjb250cm9sbGVyIHdpdGggZ2l2ZW4gbmFtZSBpcyByZWdpc3RlcmVkIHZpYSBgJGNvbnRyb2xsZXJQcm92aWRlcmBcbiAgICAgKiAgICAqIGNoZWNrIGlmIGV2YWx1YXRpbmcgdGhlIHN0cmluZyBvbiB0aGUgY3VycmVudCBzY29wZSByZXR1cm5zIGEgY29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqICAgIFRoZSBzdHJpbmcgY2FuIHVzZSB0aGUgYGNvbnRyb2xsZXIgYXMgcHJvcGVydHlgIHN5bnRheCwgd2hlcmUgdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgaXMgcHVibGlzaGVkXG4gICAgICogICAgYXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBvbiB0aGUgYHNjb3BlYDsgdGhlIGBzY29wZWAgbXVzdCBiZSBpbmplY3RlZCBpbnRvIGBsb2NhbHNgIHBhcmFtIGZvciB0aGlzXG4gICAgICogICAgdG8gd29yayBjb3JyZWN0bHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiBnaXZlbiBjb250cm9sbGVyLlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogYCRjb250cm9sbGVyYCBzZXJ2aWNlIGlzIHJlc3BvbnNpYmxlIGZvciBpbnN0YW50aWF0aW5nIGNvbnRyb2xsZXJzLlxuICAgICAqXG4gICAgICogSXQncyBqdXN0IGEgc2ltcGxlIGNhbGwgdG8ge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0sIGJ1dCBleHRyYWN0ZWQgaW50b1xuICAgICAqIGEgc2VydmljZSwgc28gdGhhdCBvbmUgY2FuIG92ZXJyaWRlIHRoaXMgc2VydmljZSB3aXRoIFtCQyB2ZXJzaW9uXShodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xNjQ5Nzg4KS5cbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gJGNvbnRyb2xsZXIoZXhwcmVzc2lvbiwgbG9jYWxzLCBsYXRlciwgaWRlbnQpIHtcbiAgICAgIC8vIFBSSVZBVEUgQVBJOlxuICAgICAgLy8gICBwYXJhbSBgbGF0ZXJgIC0tLSBpbmRpY2F0ZXMgdGhhdCB0aGUgY29udHJvbGxlcidzIGNvbnN0cnVjdG9yIGlzIGludm9rZWQgYXQgYSBsYXRlciB0aW1lLlxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBJZiB0cnVlLCAkY29udHJvbGxlciB3aWxsIGFsbG9jYXRlIHRoZSBvYmplY3Qgd2l0aCB0aGUgY29ycmVjdFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwcm90b3R5cGUgY2hhaW4sIGJ1dCB3aWxsIG5vdCBpbnZva2UgdGhlIGNvbnRyb2xsZXIgdW50aWwgYSByZXR1cm5lZFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayBpcyBpbnZva2VkLlxuICAgICAgLy8gICBwYXJhbSBgaWRlbnRgIC0tLSBBbiBvcHRpb25hbCBsYWJlbCB3aGljaCBvdmVycmlkZXMgdGhlIGxhYmVsIHBhcnNlZCBmcm9tIHRoZSBjb250cm9sbGVyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIGlmIGFueS5cbiAgICAgIHZhciBpbnN0YW5jZSwgbWF0Y2gsIGNvbnN0cnVjdG9yLCBpZGVudGlmaWVyO1xuICAgICAgbGF0ZXIgPSBsYXRlciA9PT0gdHJ1ZTtcbiAgICAgIGlmIChpZGVudCAmJiBpc1N0cmluZyhpZGVudCkpIHtcbiAgICAgICAgaWRlbnRpZmllciA9IGlkZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdHJpbmcoZXhwcmVzc2lvbikpIHtcbiAgICAgICAgbWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKENOVFJMX1JFRyk7XG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICB0aHJvdyAkY29udHJvbGxlck1pbkVycignY3RybGZtdCcsXG4gICAgICAgICAgICAnQmFkbHkgZm9ybWVkIGNvbnRyb2xsZXIgc3RyaW5nIFxcJ3swfVxcJy4gJyArXG4gICAgICAgICAgICAnTXVzdCBtYXRjaCBgX19uYW1lX18gYXMgX19pZF9fYCBvciBgX19uYW1lX19gLicsIGV4cHJlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0cnVjdG9yID0gbWF0Y2hbMV07XG4gICAgICAgIGlkZW50aWZpZXIgPSBpZGVudGlmaWVyIHx8IG1hdGNoWzNdO1xuICAgICAgICBleHByZXNzaW9uID0gY29udHJvbGxlcnMuaGFzT3duUHJvcGVydHkoY29uc3RydWN0b3IpXG4gICAgICAgICAgICA/IGNvbnRyb2xsZXJzW2NvbnN0cnVjdG9yXVxuICAgICAgICAgICAgOiBnZXR0ZXIobG9jYWxzLiRzY29wZSwgY29uc3RydWN0b3IsIHRydWUpO1xuXG4gICAgICAgIGlmICghZXhwcmVzc2lvbikge1xuICAgICAgICAgIHRocm93ICRjb250cm9sbGVyTWluRXJyKCdjdHJscmVnJyxcbiAgICAgICAgICAgICdUaGUgY29udHJvbGxlciB3aXRoIHRoZSBuYW1lIFxcJ3swfVxcJyBpcyBub3QgcmVnaXN0ZXJlZC4nLCBjb25zdHJ1Y3Rvcik7XG4gICAgICAgIH1cblxuICAgICAgICBhc3NlcnRBcmdGbihleHByZXNzaW9uLCBjb25zdHJ1Y3RvciwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsYXRlcikge1xuICAgICAgICAvLyBJbnN0YW50aWF0ZSBjb250cm9sbGVyIGxhdGVyOlxuICAgICAgICAvLyBUaGlzIG1hY2hpbmVyeSBpcyB1c2VkIHRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgb2JqZWN0IGJlZm9yZSBjYWxsaW5nIHRoZVxuICAgICAgICAvLyBjb250cm9sbGVyJ3MgY29uc3RydWN0b3IgaXRzZWxmLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGFsbG93cyBwcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBjb250cm9sbGVyIGJlZm9yZSB0aGUgY29uc3RydWN0b3IgaXNcbiAgICAgICAgLy8gaW52b2tlZC4gUHJpbWFyaWx5LCB0aGlzIGlzIHVzZWQgZm9yIGlzb2xhdGUgc2NvcGUgYmluZGluZ3MgaW4gJGNvbXBpbGUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgZmVhdHVyZSBpcyBub3QgaW50ZW5kZWQgZm9yIHVzZSBieSBhcHBsaWNhdGlvbnMsIGFuZCBpcyB0aHVzIG5vdCBkb2N1bWVudGVkXG4gICAgICAgIC8vIHB1YmxpY2x5LlxuICAgICAgICAvLyBPYmplY3QgY3JlYXRpb246IGh0dHA6Ly9qc3BlcmYuY29tL2NyZWF0ZS1jb25zdHJ1Y3Rvci8yXG4gICAgICAgIHZhciBjb250cm9sbGVyUHJvdG90eXBlID0gKGlzQXJyYXkoZXhwcmVzc2lvbikgP1xuICAgICAgICAgIGV4cHJlc3Npb25bZXhwcmVzc2lvbi5sZW5ndGggLSAxXSA6IGV4cHJlc3Npb24pLnByb3RvdHlwZTtcbiAgICAgICAgaW5zdGFuY2UgPSBPYmplY3QuY3JlYXRlKGNvbnRyb2xsZXJQcm90b3R5cGUgfHwgbnVsbCk7XG5cbiAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcbiAgICAgICAgICBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIGNvbnN0cnVjdG9yIHx8IGV4cHJlc3Npb24ubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRjb250cm9sbGVySW5pdCgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gJGluamVjdG9yLmludm9rZShleHByZXNzaW9uLCBpbnN0YW5jZSwgbG9jYWxzLCBjb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgaWYgKHJlc3VsdCAhPT0gaW5zdGFuY2UgJiYgKGlzT2JqZWN0KHJlc3VsdCkgfHwgaXNGdW5jdGlvbihyZXN1bHQpKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSByZXN1bHQ7XG4gICAgICAgICAgICBpZiAoaWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAvLyBJZiByZXN1bHQgY2hhbmdlZCwgcmUtYXNzaWduIGNvbnRyb2xsZXJBcyB2YWx1ZSB0byBzY29wZS5cbiAgICAgICAgICAgICAgYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBjb25zdHJ1Y3RvciB8fCBleHByZXNzaW9uLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2UsXG4gICAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllclxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2UgPSAkaW5qZWN0b3IuaW5zdGFudGlhdGUoZXhwcmVzc2lvbiwgbG9jYWxzLCBjb25zdHJ1Y3Rvcik7XG5cbiAgICAgIGlmIChpZGVudGlmaWVyKSB7XG4gICAgICAgIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgY29uc3RydWN0b3IgfHwgZXhwcmVzc2lvbi5uYW1lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIG5hbWUpIHtcbiAgICAgIGlmICghKGxvY2FscyAmJiBpc09iamVjdChsb2NhbHMuJHNjb3BlKSkpIHtcbiAgICAgICAgdGhyb3cgbWluRXJyKCckY29udHJvbGxlcicpKCdub3NjcCcsXG4gICAgICAgICAgJ0Nhbm5vdCBleHBvcnQgY29udHJvbGxlciBcXCd7MH1cXCcgYXMgXFwnezF9XFwnISBObyAkc2NvcGUgb2JqZWN0IHByb3ZpZGVkIHZpYSBgbG9jYWxzYC4nLFxuICAgICAgICAgIG5hbWUsIGlkZW50aWZpZXIpO1xuICAgICAgfVxuXG4gICAgICBsb2NhbHMuJHNjb3BlW2lkZW50aWZpZXJdID0gaW5zdGFuY2U7XG4gICAgfVxuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGRvY3VtZW50XG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEge0BsaW5rIGFuZ3VsYXIuZWxlbWVudCBqUXVlcnkgb3IganFMaXRlfSB3cmFwcGVyIGZvciB0aGUgYnJvd3NlcidzIGB3aW5kb3cuZG9jdW1lbnRgIG9iamVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiZG9jdW1lbnRFeGFtcGxlXCIgbmFtZT1cImRvY3VtZW50XCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxwPiRkb2N1bWVudCB0aXRsZTogPGIgbmctYmluZD1cInRpdGxlXCI+PC9iPjwvcD5cbiAgICAgICAgIDxwPndpbmRvdy5kb2N1bWVudCB0aXRsZTogPGIgbmctYmluZD1cIndpbmRvd1RpdGxlXCI+PC9iPjwvcD5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2RvY3VtZW50RXhhbXBsZScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJHNjb3BlLCAkZG9jdW1lbnQpIHtcbiAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gJGRvY3VtZW50WzBdLnRpdGxlO1xuICAgICAgICAgICAkc2NvcGUud2luZG93VGl0bGUgPSBhbmd1bGFyLmVsZW1lbnQod2luZG93LmRvY3VtZW50KVswXS50aXRsZTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkRG9jdW1lbnRQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgZnVuY3Rpb24od2luZG93KSB7XG4gICAgcmV0dXJuIGpxTGl0ZSh3aW5kb3cuZG9jdW1lbnQpO1xuICB9XTtcbn1cblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdGhpc1xuICogTGlzdGVucyBmb3IgZG9jdW1lbnQgdmlzaWJpbGl0eSBjaGFuZ2UgYW5kIG1ha2VzIHRoZSBjdXJyZW50IHN0YXR1cyBhY2Nlc3NpYmxlLlxuICovXG5mdW5jdGlvbiAkJElzRG9jdW1lbnRIaWRkZW5Qcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckZG9jdW1lbnQnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRkb2N1bWVudCwgJHJvb3RTY29wZSkge1xuICAgIHZhciBkb2MgPSAkZG9jdW1lbnRbMF07XG4gICAgdmFyIGhpZGRlbiA9IGRvYyAmJiBkb2MuaGlkZGVuO1xuXG4gICAgJGRvY3VtZW50Lm9uKCd2aXNpYmlsaXR5Y2hhbmdlJywgY2hhbmdlTGlzdGVuZXIpO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAkZG9jdW1lbnQub2ZmKCd2aXNpYmlsaXR5Y2hhbmdlJywgY2hhbmdlTGlzdGVuZXIpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gY2hhbmdlTGlzdGVuZXIoKSB7XG4gICAgICBoaWRkZW4gPSBkb2MuaGlkZGVuO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBoaWRkZW47XG4gICAgfTtcbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRleGNlcHRpb25IYW5kbGVyXG4gKiBAcmVxdWlyZXMgbmcuJGxvZ1xuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFueSB1bmNhdWdodCBleGNlcHRpb24gaW4gQW5ndWxhckpTIGV4cHJlc3Npb25zIGlzIGRlbGVnYXRlZCB0byB0aGlzIHNlcnZpY2UuXG4gKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzaW1wbHkgZGVsZWdhdGVzIHRvIGAkbG9nLmVycm9yYCB3aGljaCBsb2dzIGl0IGludG9cbiAqIHRoZSBicm93c2VyIGNvbnNvbGUuXG4gKlxuICogSW4gdW5pdCB0ZXN0cywgaWYgYGFuZ3VsYXItbW9ja3MuanNgIGlzIGxvYWRlZCwgdGhpcyBzZXJ2aWNlIGlzIG92ZXJyaWRkZW4gYnlcbiAqIHtAbGluayBuZ01vY2suJGV4Y2VwdGlvbkhhbmRsZXIgbW9jayAkZXhjZXB0aW9uSGFuZGxlcn0gd2hpY2ggYWlkcyBpbiB0ZXN0aW5nLlxuICpcbiAqICMjIEV4YW1wbGU6XG4gKlxuICogVGhlIGV4YW1wbGUgYmVsb3cgd2lsbCBvdmVyd3JpdGUgdGhlIGRlZmF1bHQgYCRleGNlcHRpb25IYW5kbGVyYCBpbiBvcmRlciB0byAoYSkgbG9nIHVuY2F1Z2h0XG4gKiBlcnJvcnMgdG8gdGhlIGJhY2tlbmQgZm9yIGxhdGVyIGluc3BlY3Rpb24gYnkgdGhlIGRldmVsb3BlcnMgYW5kIChiKSB0byB1c2UgYCRsb2cud2FybigpYCBpbnN0ZWFkXG4gKiBvZiBgJGxvZy5lcnJvcigpYC5cbiAqXG4gKiBgYGBqc1xuICogICBhbmd1bGFyLlxuICogICAgIG1vZHVsZSgnZXhjZXB0aW9uT3ZlcndyaXRlJywgW10pLlxuICogICAgIGZhY3RvcnkoJyRleGNlcHRpb25IYW5kbGVyJywgWyckbG9nJywgJ2xvZ0Vycm9yc1RvQmFja2VuZCcsIGZ1bmN0aW9uKCRsb2csIGxvZ0Vycm9yc1RvQmFja2VuZCkge1xuICogICAgICAgcmV0dXJuIGZ1bmN0aW9uIG15RXhjZXB0aW9uSGFuZGxlcihleGNlcHRpb24sIGNhdXNlKSB7XG4gKiAgICAgICAgIGxvZ0Vycm9yc1RvQmFja2VuZChleGNlcHRpb24sIGNhdXNlKTtcbiAqICAgICAgICAgJGxvZy53YXJuKGV4Y2VwdGlvbiwgY2F1c2UpO1xuICogICAgICAgfTtcbiAqICAgICB9XSk7XG4gKiBgYGBcbiAqXG4gKiA8aHIgLz5cbiAqIE5vdGUsIHRoYXQgY29kZSBleGVjdXRlZCBpbiBldmVudC1saXN0ZW5lcnMgKGV2ZW4gdGhvc2UgcmVnaXN0ZXJlZCB1c2luZyBqcUxpdGUncyBgb25gL2BiaW5kYFxuICogbWV0aG9kcykgZG9lcyBub3QgZGVsZWdhdGUgZXhjZXB0aW9ucyB0byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfVxuICogKHVubGVzcyBleGVjdXRlZCBkdXJpbmcgYSBkaWdlc3QpLlxuICpcbiAqIElmIHlvdSB3aXNoLCB5b3UgY2FuIG1hbnVhbGx5IGRlbGVnYXRlIGV4Y2VwdGlvbnMsIGUuZy5cbiAqIGB0cnkgeyAuLi4gfSBjYXRjaChlKSB7ICRleGNlcHRpb25IYW5kbGVyKGUpOyB9YFxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGV4Y2VwdGlvbiBFeGNlcHRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBlcnJvci5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gY2F1c2UgT3B0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbnRleHQgaW4gd2hpY2hcbiAqICAgICAgIHRoZSBlcnJvciB3YXMgdGhyb3duLlxuICpcbiAqL1xuZnVuY3Rpb24gJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckbG9nJywgZnVuY3Rpb24oJGxvZykge1xuICAgIHJldHVybiBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XG4gICAgICAkbG9nLmVycm9yLmFwcGx5KCRsb2csIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfV07XG59XG5cbnZhciAkJEZvcmNlUmVmbG93UHJvdmlkZXIgPSAvKiogQHRoaXMgKi8gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IFsnJGRvY3VtZW50JywgZnVuY3Rpb24oJGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRvbU5vZGUpIHtcbiAgICAgIC8vdGhlIGxpbmUgYmVsb3cgd2lsbCBmb3JjZSB0aGUgYnJvd3NlciB0byBwZXJmb3JtIGEgcmVwYWludCBzb1xuICAgICAgLy90aGF0IGFsbCB0aGUgYW5pbWF0ZWQgZWxlbWVudHMgd2l0aGluIHRoZSBhbmltYXRpb24gZnJhbWUgd2lsbFxuICAgICAgLy9iZSBwcm9wZXJseSB1cGRhdGVkIGFuZCBkcmF3biBvbiBzY3JlZW4uIFRoaXMgaXMgcmVxdWlyZWQgdG9cbiAgICAgIC8vZW5zdXJlIHRoYXQgdGhlIHByZXBhcmF0aW9uIGFuaW1hdGlvbiBpcyBwcm9wZXJseSBmbHVzaGVkIHNvIHRoYXRcbiAgICAgIC8vdGhlIGFjdGl2ZSBzdGF0ZSBwaWNrcyB1cCBmcm9tIHRoZXJlLiBETyBOT1QgUkVNT1ZFIFRISVMgTElORS5cbiAgICAgIC8vRE8gTk9UIE9QVElNSVpFIFRISVMgTElORS4gVEhFIE1JTklGSUVSIFdJTEwgUkVNT1ZFIElUIE9USEVSV0lTRSBXSElDSFxuICAgICAgLy9XSUxMIFJFU1VMVCBJTiBBTiBVTlBSRURJQ1RBQkxFIEJVRyBUSEFUIElTIFZFUlkgSEFSRCBUTyBUUkFDSyBET1dOIEFORFxuICAgICAgLy9XSUxMIFRBS0UgWUVBUlMgQVdBWSBGUk9NIFlPVVIgTElGRS5cbiAgICAgIGlmIChkb21Ob2RlKSB7XG4gICAgICAgIGlmICghZG9tTm9kZS5ub2RlVHlwZSAmJiBkb21Ob2RlIGluc3RhbmNlb2YganFMaXRlKSB7XG4gICAgICAgICAgZG9tTm9kZSA9IGRvbU5vZGVbMF07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvbU5vZGUgPSAkZG9jdW1lbnRbMF0uYm9keTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkb21Ob2RlLm9mZnNldFdpZHRoICsgMTtcbiAgICB9O1xuICB9XTtcbn07XG5cbnZhciBBUFBMSUNBVElPTl9KU09OID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xudmFyIENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OID0geydDb250ZW50LVR5cGUnOiBBUFBMSUNBVElPTl9KU09OICsgJztjaGFyc2V0PXV0Zi04J307XG52YXIgSlNPTl9TVEFSVCA9IC9eXFxbfF5cXHsoPyFcXHspLztcbnZhciBKU09OX0VORFMgPSB7XG4gICdbJzogL10kLyxcbiAgJ3snOiAvfSQvXG59O1xudmFyIEpTT05fUFJPVEVDVElPTl9QUkVGSVggPSAvXlxcKV1cXH0nLD9cXG4vO1xudmFyICRodHRwTWluRXJyID0gbWluRXJyKCckaHR0cCcpO1xuXG5mdW5jdGlvbiBzZXJpYWxpemVWYWx1ZSh2KSB7XG4gIGlmIChpc09iamVjdCh2KSkge1xuICAgIHJldHVybiBpc0RhdGUodikgPyB2LnRvSVNPU3RyaW5nKCkgOiB0b0pzb24odik7XG4gIH1cbiAgcmV0dXJuIHY7XG59XG5cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkSHR0cFBhcmFtU2VyaWFsaXplclByb3ZpZGVyKCkge1xuICAvKipcbiAgICogQG5nZG9jIHNlcnZpY2VcbiAgICogQG5hbWUgJGh0dHBQYXJhbVNlcmlhbGl6ZXJcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmF1bHQge0BsaW5rICRodHRwIGAkaHR0cGB9IHBhcmFtcyBzZXJpYWxpemVyIHRoYXQgY29udmVydHMgb2JqZWN0cyB0byBzdHJpbmdzXG4gICAqIGFjY29yZGluZyB0byB0aGUgZm9sbG93aW5nIHJ1bGVzOlxuICAgKlxuICAgKiAqIGB7J2Zvbyc6ICdiYXInfWAgcmVzdWx0cyBpbiBgZm9vPWJhcmBcbiAgICogKiBgeydmb28nOiBEYXRlLm5vdygpfWAgcmVzdWx0cyBpbiBgZm9vPTIwMTUtMDQtMDFUMDklM0E1MCUzQTQ5LjI2MlpgIChgdG9JU09TdHJpbmcoKWAgYW5kIGVuY29kZWQgcmVwcmVzZW50YXRpb24gb2YgYSBEYXRlIG9iamVjdClcbiAgICogKiBgeydmb28nOiBbJ2JhcicsICdiYXonXX1gIHJlc3VsdHMgaW4gYGZvbz1iYXImZm9vPWJhemAgKHJlcGVhdGVkIGtleSBmb3IgZWFjaCBhcnJheSBlbGVtZW50KVxuICAgKiAqIGB7J2Zvbyc6IHsnYmFyJzonYmF6J319YCByZXN1bHRzIGluIGBmb289JTdCJTIyYmFyJTIyJTNBJTIyYmF6JTIyJTdEYCAoc3RyaW5naWZpZWQgYW5kIGVuY29kZWQgcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0KVxuICAgKlxuICAgKiBOb3RlIHRoYXQgc2VyaWFsaXplciB3aWxsIHNvcnQgdGhlIHJlcXVlc3QgcGFyYW1ldGVycyBhbHBoYWJldGljYWxseS5cbiAgICovXG5cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5nUGFyYW1TZXJpYWxpemVyKHBhcmFtcykge1xuICAgICAgaWYgKCFwYXJhbXMpIHJldHVybiAnJztcbiAgICAgIHZhciBwYXJ0cyA9IFtdO1xuICAgICAgZm9yRWFjaFNvcnRlZChwYXJhbXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IGlzVW5kZWZpbmVkKHZhbHVlKSB8fCBpc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuO1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSkgICsgJz0nICsgZW5jb2RlVXJpUXVlcnkoc2VyaWFsaXplVmFsdWUodikpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSkgKyAnPScgKyBlbmNvZGVVcmlRdWVyeShzZXJpYWxpemVWYWx1ZSh2YWx1ZSkpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcmJyk7XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkSHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZVByb3ZpZGVyKCkge1xuICAvKipcbiAgICogQG5nZG9jIHNlcnZpY2VcbiAgICogQG5hbWUgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEFsdGVybmF0aXZlIHtAbGluayAkaHR0cCBgJGh0dHBgfSBwYXJhbXMgc2VyaWFsaXplciB0aGF0IGZvbGxvd3NcbiAgICogalF1ZXJ5J3MgW2BwYXJhbSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2pxdWVyeS5wYXJhbS8pIG1ldGhvZCBsb2dpYy5cbiAgICogVGhlIHNlcmlhbGl6ZXIgd2lsbCBhbHNvIHNvcnQgdGhlIHBhcmFtcyBhbHBoYWJldGljYWxseS5cbiAgICpcbiAgICogVG8gdXNlIGl0IGZvciBzZXJpYWxpemluZyBgJGh0dHBgIHJlcXVlc3QgcGFyYW1ldGVycywgc2V0IGl0IGFzIHRoZSBgcGFyYW1TZXJpYWxpemVyYCBwcm9wZXJ0eTpcbiAgICpcbiAgICogYGBganNcbiAgICogJGh0dHAoe1xuICAgKiAgIHVybDogbXlVcmwsXG4gICAqICAgbWV0aG9kOiAnR0VUJyxcbiAgICogICBwYXJhbXM6IG15UGFyYW1zLFxuICAgKiAgIHBhcmFtU2VyaWFsaXplcjogJyRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlJ1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gc2V0IGl0IGFzIHRoZSBkZWZhdWx0IGBwYXJhbVNlcmlhbGl6ZXJgIGluIHRoZVxuICAgKiB7QGxpbmsgJGh0dHBQcm92aWRlciNkZWZhdWx0cyBgJGh0dHBQcm92aWRlcmB9LlxuICAgKlxuICAgKiBBZGRpdGlvbmFsbHksIHlvdSBjYW4gaW5qZWN0IHRoZSBzZXJpYWxpemVyIGFuZCB1c2UgaXQgZXhwbGljaXRseSwgZm9yIGV4YW1wbGUgdG8gc2VyaWFsaXplXG4gICAqIGZvcm0gZGF0YSBmb3Igc3VibWlzc2lvbjpcbiAgICpcbiAgICogYGBganNcbiAgICogLmNvbnRyb2xsZXIoZnVuY3Rpb24oJGh0dHAsICRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlKSB7XG4gICAqICAgLy8uLi5cbiAgICpcbiAgICogICAkaHR0cCh7XG4gICAqICAgICB1cmw6IG15VXJsLFxuICAgKiAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAqICAgICBkYXRhOiAkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZShteURhdGEpLFxuICAgKiAgICAgaGVhZGVyczoge1xuICAgKiAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbiAgICogICAgIH1cbiAgICogICB9KTtcbiAgICpcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGpRdWVyeUxpa2VQYXJhbVNlcmlhbGl6ZXIocGFyYW1zKSB7XG4gICAgICBpZiAoIXBhcmFtcykgcmV0dXJuICcnO1xuICAgICAgdmFyIHBhcnRzID0gW107XG4gICAgICBzZXJpYWxpemUocGFyYW1zLCAnJywgdHJ1ZSk7XG4gICAgICByZXR1cm4gcGFydHMuam9pbignJicpO1xuXG4gICAgICBmdW5jdGlvbiBzZXJpYWxpemUodG9TZXJpYWxpemUsIHByZWZpeCwgdG9wTGV2ZWwpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkodG9TZXJpYWxpemUpKSB7XG4gICAgICAgICAgZm9yRWFjaCh0b1NlcmlhbGl6ZSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICBzZXJpYWxpemUodmFsdWUsIHByZWZpeCArICdbJyArIChpc09iamVjdCh2YWx1ZSkgPyBpbmRleCA6ICcnKSArICddJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9TZXJpYWxpemUpICYmICFpc0RhdGUodG9TZXJpYWxpemUpKSB7XG4gICAgICAgICAgZm9yRWFjaFNvcnRlZCh0b1NlcmlhbGl6ZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgc2VyaWFsaXplKHZhbHVlLCBwcmVmaXggK1xuICAgICAgICAgICAgICAgICh0b3BMZXZlbCA/ICcnIDogJ1snKSArXG4gICAgICAgICAgICAgICAga2V5ICtcbiAgICAgICAgICAgICAgICAodG9wTGV2ZWwgPyAnJyA6ICddJykpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHRvU2VyaWFsaXplKSkge1xuICAgICAgICAgICAgdG9TZXJpYWxpemUgPSB0b1NlcmlhbGl6ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KHByZWZpeCkgKyAnPScgK1xuICAgICAgICAgICAgICAodG9TZXJpYWxpemUgPT0gbnVsbCA/ICcnIDogZW5jb2RlVXJpUXVlcnkoc2VyaWFsaXplVmFsdWUodG9TZXJpYWxpemUpKSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybShkYXRhLCBoZWFkZXJzKSB7XG4gIGlmIChpc1N0cmluZyhkYXRhKSkge1xuICAgIC8vIFN0cmlwIGpzb24gdnVsbmVyYWJpbGl0eSBwcm90ZWN0aW9uIHByZWZpeCBhbmQgdHJpbSB3aGl0ZXNwYWNlXG4gICAgdmFyIHRlbXBEYXRhID0gZGF0YS5yZXBsYWNlKEpTT05fUFJPVEVDVElPTl9QUkVGSVgsICcnKS50cmltKCk7XG5cbiAgICBpZiAodGVtcERhdGEpIHtcbiAgICAgIHZhciBjb250ZW50VHlwZSA9IGhlYWRlcnMoJ0NvbnRlbnQtVHlwZScpO1xuICAgICAgdmFyIGhhc0pzb25Db250ZW50VHlwZSA9IGNvbnRlbnRUeXBlICYmIChjb250ZW50VHlwZS5pbmRleE9mKEFQUExJQ0FUSU9OX0pTT04pID09PSAwKTtcblxuICAgICAgaWYgKGhhc0pzb25Db250ZW50VHlwZSB8fCBpc0pzb25MaWtlKHRlbXBEYXRhKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGRhdGEgPSBmcm9tSnNvbih0ZW1wRGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAoIWhhc0pzb25Db250ZW50VHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93ICRodHRwTWluRXJyKCdiYWRkYXRhJywgJ0RhdGEgbXVzdCBiZSBhIHZhbGlkIEpTT04gb2JqZWN0LiBSZWNlaXZlZDogXCJ7MH1cIi4gJyArXG4gICAgICAgICAgJ1BhcnNlIGVycm9yOiBcInsxfVwiJywgZGF0YSwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gaXNKc29uTGlrZShzdHIpIHtcbiAgICB2YXIganNvblN0YXJ0ID0gc3RyLm1hdGNoKEpTT05fU1RBUlQpO1xuICAgIHJldHVybiBqc29uU3RhcnQgJiYgSlNPTl9FTkRTW2pzb25TdGFydFswXV0udGVzdChzdHIpO1xufVxuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBrZXkgdmFsdWUgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGhlYWRlcnMgUmF3IGhlYWRlcnMgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtPYmplY3R9IFBhcnNlZCBoZWFkZXJzIGFzIGtleSB2YWx1ZSBvYmplY3RcbiAqL1xuZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IGNyZWF0ZU1hcCgpLCBpO1xuXG4gIGZ1bmN0aW9uIGZpbGxJblBhcnNlZChrZXksIHZhbCkge1xuICAgIGlmIChrZXkpIHtcbiAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzU3RyaW5nKGhlYWRlcnMpKSB7XG4gICAgZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgICAgZmlsbEluUGFyc2VkKGxvd2VyY2FzZSh0cmltKGxpbmUuc3Vic3RyKDAsIGkpKSksIHRyaW0obGluZS5zdWJzdHIoaSArIDEpKSk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGVhZGVycykpIHtcbiAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKGhlYWRlclZhbCwgaGVhZGVyS2V5KSB7XG4gICAgICBmaWxsSW5QYXJzZWQobG93ZXJjYXNlKGhlYWRlcktleSksIHRyaW0oaGVhZGVyVmFsKSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VkO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIHBhcnNlZCBoZWFkZXJzLlxuICpcbiAqIEhlYWRlcnMgYXJlIGxhenkgcGFyc2VkIHdoZW4gZmlyc3QgcmVxdWVzdGVkLlxuICogQHNlZSBwYXJzZUhlYWRlcnNcbiAqXG4gKiBAcGFyYW0geyhzdHJpbmd8T2JqZWN0KX0gaGVhZGVycyBIZWFkZXJzIHRvIHByb3ZpZGUgYWNjZXNzIHRvLlxuICogQHJldHVybnMge2Z1bmN0aW9uKHN0cmluZz0pfSBSZXR1cm5zIGEgZ2V0dGVyIGZ1bmN0aW9uIHdoaWNoIGlmIGNhbGxlZCB3aXRoOlxuICpcbiAqICAgLSBpZiBjYWxsZWQgd2l0aCBhbiBhcmd1bWVudCByZXR1cm5zIGEgc2luZ2xlIGhlYWRlciB2YWx1ZSBvciBudWxsXG4gKiAgIC0gaWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIGhlYWRlcnMuXG4gKi9cbmZ1bmN0aW9uIGhlYWRlcnNHZXR0ZXIoaGVhZGVycykge1xuICB2YXIgaGVhZGVyc09iajtcblxuICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICghaGVhZGVyc09iaikgaGVhZGVyc09iaiA9ICBwYXJzZUhlYWRlcnMoaGVhZGVycyk7XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgdmFyIHZhbHVlID0gaGVhZGVyc09ialtsb3dlcmNhc2UobmFtZSldO1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBoZWFkZXJzT2JqO1xuICB9O1xufVxuXG5cbi8qKlxuICogQ2hhaW4gYWxsIGdpdmVuIGZ1bmN0aW9uc1xuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBmb3IgYm90aCByZXF1ZXN0IGFuZCByZXNwb25zZSB0cmFuc2Zvcm1pbmdcbiAqXG4gKiBAcGFyYW0geyp9IGRhdGEgRGF0YSB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZz0pfSBoZWFkZXJzIEhUVFAgaGVhZGVycyBnZXR0ZXIgZm4uXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzIEhUVFAgc3RhdHVzIGNvZGUgb2YgdGhlIHJlc3BvbnNlLlxuICogQHBhcmFtIHsoRnVuY3Rpb258QXJyYXkuPEZ1bmN0aW9uPil9IGZucyBGdW5jdGlvbiBvciBhbiBhcnJheSBvZiBmdW5jdGlvbnMuXG4gKiBAcmV0dXJucyB7Kn0gVHJhbnNmb3JtZWQgZGF0YS5cbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBzdGF0dXMsIGZucykge1xuICBpZiAoaXNGdW5jdGlvbihmbnMpKSB7XG4gICAgcmV0dXJuIGZucyhkYXRhLCBoZWFkZXJzLCBzdGF0dXMpO1xuICB9XG5cbiAgZm9yRWFjaChmbnMsIGZ1bmN0aW9uKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMsIHN0YXR1cyk7XG4gIH0pO1xuXG4gIHJldHVybiBkYXRhO1xufVxuXG5cbmZ1bmN0aW9uIGlzU3VjY2VzcyhzdGF0dXMpIHtcbiAgcmV0dXJuIDIwMCA8PSBzdGF0dXMgJiYgc3RhdHVzIDwgMzAwO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkaHR0cFByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIGAkaHR0cFByb3ZpZGVyYCB0byBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gc2VydmljZS5cbiAqL1xuZnVuY3Rpb24gJEh0dHBQcm92aWRlcigpIHtcbiAgLyoqXG4gICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgKiBAbmFtZSAkaHR0cFByb3ZpZGVyI2RlZmF1bHRzXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBPYmplY3QgY29udGFpbmluZyBkZWZhdWx0IHZhbHVlcyBmb3IgYWxsIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gcmVxdWVzdHMuXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMuY2FjaGVgKiogLSB7Ym9vbGVhbnxPYmplY3R9IC0gQSBib29sZWFuIHZhbHVlIG9yIG9iamVjdCBjcmVhdGVkIHdpdGhcbiAgICoge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgYCRjYWNoZUZhY3RvcnlgfSB0byBlbmFibGUgb3IgZGlzYWJsZSBjYWNoaW5nIG9mIEhUVFAgcmVzcG9uc2VzXG4gICAqIGJ5IGRlZmF1bHQuIFNlZSB7QGxpbmsgJGh0dHAjY2FjaGluZyAkaHR0cCBDYWNoaW5nfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy5oZWFkZXJzYCoqIC0ge09iamVjdH0gLSBEZWZhdWx0IGhlYWRlcnMgZm9yIGFsbCAkaHR0cCByZXF1ZXN0cy5cbiAgICogUmVmZXIgdG8ge0BsaW5rIG5nLiRodHRwI3NldHRpbmctaHR0cC1oZWFkZXJzICRodHRwfSBmb3IgZG9jdW1lbnRhdGlvbiBvblxuICAgKiBzZXR0aW5nIGRlZmF1bHQgaGVhZGVycy5cbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5jb21tb25gKipcbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5wb3N0YCoqXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMucHV0YCoqXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMucGF0Y2hgKipcbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy5qc29ucENhbGxiYWNrUGFyYW1gKiogLSBge3N0cmluZ31gIC0gdGhlIG5hbWUgb2YgdGhlIHF1ZXJ5IHBhcmFtZXRlciB0aGF0IHBhc3NlcyB0aGUgbmFtZSBvZiB0aGVcbiAgICogY2FsbGJhY2sgaW4gYSBKU09OUCByZXF1ZXN0LiBUaGUgdmFsdWUgb2YgdGhpcyBwYXJhbWV0ZXIgd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBleHByZXNzaW9uIGdlbmVyYXRlZCBieSB0aGVcbiAgICoge0BsaW5rICRqc29ucENhbGxiYWNrc30gc2VydmljZS4gRGVmYXVsdHMgdG8gYCdjYWxsYmFjaydgLlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplcmAqKiAtIGB7c3RyaW5nfGZ1bmN0aW9uKE9iamVjdDxzdHJpbmcsc3RyaW5nPik6c3RyaW5nfWAgLSBBIGZ1bmN0aW9uXG4gICAqICB1c2VkIHRvIHRoZSBwcmVwYXJlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiByZXF1ZXN0IHBhcmFtZXRlcnMgKHNwZWNpZmllZCBhcyBhbiBvYmplY3QpLlxuICAgKiAgSWYgc3BlY2lmaWVkIGFzIHN0cmluZywgaXQgaXMgaW50ZXJwcmV0ZWQgYXMgYSBmdW5jdGlvbiByZWdpc3RlcmVkIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxuICAgKiAgRGVmYXVsdHMgdG8ge0BsaW5rIG5nLiRodHRwUGFyYW1TZXJpYWxpemVyICRodHRwUGFyYW1TZXJpYWxpemVyfS5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCoqIC1cbiAgICogYHtBcnJheTxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKT58ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcil9YCAtXG4gICAqIEFuIGFycmF5IG9mIGZ1bmN0aW9ucyAob3IgYSBzaW5nbGUgZnVuY3Rpb24pIHdoaWNoIGFyZSBhcHBsaWVkIHRvIHRoZSByZXF1ZXN0IGRhdGEuXG4gICAqIEJ5IGRlZmF1bHQsIHRoaXMgaXMgYW4gYXJyYXkgd2l0aCBvbmUgcmVxdWVzdCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbjpcbiAgICpcbiAgICogICAtIElmIHRoZSBgZGF0YWAgcHJvcGVydHkgb2YgdGhlIHJlcXVlc3QgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbnMgYW4gb2JqZWN0LCBzZXJpYWxpemUgaXRcbiAgICogICAgIGludG8gSlNPTiBmb3JtYXQuXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgKiogLVxuICAgKiBge0FycmF5PGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyk+fGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyl9YCAtXG4gICAqIEFuIGFycmF5IG9mIGZ1bmN0aW9ucyAob3IgYSBzaW5nbGUgZnVuY3Rpb24pIHdoaWNoIGFyZSBhcHBsaWVkIHRvIHRoZSByZXNwb25zZSBkYXRhLiBCeSBkZWZhdWx0LFxuICAgKiB0aGlzIGlzIGFuIGFycmF5IHdoaWNoIGFwcGxpZXMgb25lIHJlc3BvbnNlIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIHRoYXQgZG9lcyB0d28gdGhpbmdzOlxuICAgKlxuICAgKiAgLSBJZiBYU1JGIHByZWZpeCBpcyBkZXRlY3RlZCwgc3RyaXAgaXRcbiAgICogICAgKHNlZSB7QGxpbmsgbmcuJGh0dHAjc2VjdXJpdHktY29uc2lkZXJhdGlvbnMgU2VjdXJpdHkgQ29uc2lkZXJhdGlvbnMgaW4gdGhlICRodHRwIGRvY3N9KS5cbiAgICogIC0gSWYgdGhlIGBDb250ZW50LVR5cGVgIGlzIGBhcHBsaWNhdGlvbi9qc29uYCBvciB0aGUgcmVzcG9uc2UgbG9va3MgbGlrZSBKU09OLFxuICAgKiAgICBkZXNlcmlhbGl6ZSBpdCB1c2luZyBhIEpTT04gcGFyc2VyLlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLnhzcmZDb29raWVOYW1lYCoqIC0ge3N0cmluZ30gLSBOYW1lIG9mIGNvb2tpZSBjb250YWluaW5nIHRoZSBYU1JGIHRva2VuLlxuICAgKiBEZWZhdWx0cyB2YWx1ZSBpcyBgJ1hTUkYtVE9LRU4nYC5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy54c3JmSGVhZGVyTmFtZWAqKiAtIHtzdHJpbmd9IC0gTmFtZSBvZiBIVFRQIGhlYWRlciB0byBwb3B1bGF0ZSB3aXRoIHRoZVxuICAgKiBYU1JGIHRva2VuLiBEZWZhdWx0cyB2YWx1ZSBpcyBgJ1gtWFNSRi1UT0tFTidgLlxuICAgKlxuICAgKi9cbiAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcbiAgICAvLyB0cmFuc2Zvcm0gaW5jb21pbmcgcmVzcG9uc2UgZGF0YVxuICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBbZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybV0sXG5cbiAgICAvLyB0cmFuc2Zvcm0gb3V0Z29pbmcgcmVxdWVzdCBkYXRhXG4gICAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiBpc09iamVjdChkKSAmJiAhaXNGaWxlKGQpICYmICFpc0Jsb2IoZCkgJiYgIWlzRm9ybURhdGEoZCkgPyB0b0pzb24oZCkgOiBkO1xuICAgIH1dLFxuXG4gICAgLy8gZGVmYXVsdCBoZWFkZXJzXG4gICAgaGVhZGVyczoge1xuICAgICAgY29tbW9uOiB7XG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICAgICAgfSxcbiAgICAgIHBvc3Q6ICAgc2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pLFxuICAgICAgcHV0OiAgICBzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiksXG4gICAgICBwYXRjaDogIHNoYWxsb3dDb3B5KENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OKVxuICAgIH0sXG5cbiAgICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICAgIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICAgIHBhcmFtU2VyaWFsaXplcjogJyRodHRwUGFyYW1TZXJpYWxpemVyJyxcblxuICAgIGpzb25wQ2FsbGJhY2tQYXJhbTogJ2NhbGxiYWNrJ1xuICB9O1xuXG4gIHZhciB1c2VBcHBseUFzeW5jID0gZmFsc2U7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwUHJvdmlkZXIjdXNlQXBwbHlBc3luY1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogQ29uZmlndXJlICRodHRwIHNlcnZpY2UgdG8gY29tYmluZSBwcm9jZXNzaW5nIG9mIG11bHRpcGxlIGh0dHAgcmVzcG9uc2VzIHJlY2VpdmVkIGF0IGFyb3VuZFxuICAgKiB0aGUgc2FtZSB0aW1lIHZpYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luYyAkcm9vdFNjb3BlLiRhcHBseUFzeW5jfS4gVGhpcyBjYW4gcmVzdWx0IGluXG4gICAqIHNpZ25pZmljYW50IHBlcmZvcm1hbmNlIGltcHJvdmVtZW50IGZvciBiaWdnZXIgYXBwbGljYXRpb25zIHRoYXQgbWFrZSBtYW55IEhUVFAgcmVxdWVzdHNcbiAgICogY29uY3VycmVudGx5IChjb21tb24gZHVyaW5nIGFwcGxpY2F0aW9uIGJvb3RzdHJhcCkuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGZhbHNlLiBJZiBubyB2YWx1ZSBpcyBzcGVjaWZpZWQsIHJldHVybnMgdGhlIGN1cnJlbnQgY29uZmlndXJlZCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFuPX0gdmFsdWUgSWYgdHJ1ZSwgd2hlbiByZXF1ZXN0cyBhcmUgbG9hZGVkLCB0aGV5IHdpbGwgc2NoZWR1bGUgYSBkZWZlcnJlZFxuICAgKiAgICBcImFwcGx5XCIgb24gdGhlIG5leHQgdGljaywgZ2l2aW5nIHRpbWUgZm9yIHN1YnNlcXVlbnQgcmVxdWVzdHMgaW4gYSByb3VnaGx5IH4xMG1zIHdpbmRvd1xuICAgKiAgICB0byBsb2FkIGFuZCBzaGFyZSB0aGUgc2FtZSBkaWdlc3QgY3ljbGUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufE9iamVjdH0gSWYgYSB2YWx1ZSBpcyBzcGVjaWZpZWQsIHJldHVybnMgdGhlICRodHRwUHJvdmlkZXIgZm9yIGNoYWluaW5nLlxuICAgKiAgICBvdGhlcndpc2UsIHJldHVybnMgdGhlIGN1cnJlbnQgY29uZmlndXJlZCB2YWx1ZS5cbiAgICovXG4gIHRoaXMudXNlQXBwbHlBc3luYyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHVzZUFwcGx5QXN5bmMgPSAhIXZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiB1c2VBcHBseUFzeW5jO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciNpbnRlcmNlcHRvcnNcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEFycmF5IGNvbnRhaW5pbmcgc2VydmljZSBmYWN0b3JpZXMgZm9yIGFsbCBzeW5jaHJvbm91cyBvciBhc3luY2hyb25vdXMge0BsaW5rIG5nLiRodHRwICRodHRwfVxuICAgKiBwcmUtcHJvY2Vzc2luZyBvZiByZXF1ZXN0IG9yIHBvc3Rwcm9jZXNzaW5nIG9mIHJlc3BvbnNlcy5cbiAgICpcbiAgICogVGhlc2Ugc2VydmljZSBmYWN0b3JpZXMgYXJlIG9yZGVyZWQgYnkgcmVxdWVzdCwgaS5lLiB0aGV5IGFyZSBhcHBsaWVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuICAgKiBhcnJheSwgb24gcmVxdWVzdCwgYnV0IHJldmVyc2Ugb3JkZXIsIG9uIHJlc3BvbnNlLlxuICAgKlxuICAgKiB7QGxpbmsgbmcuJGh0dHAjaW50ZXJjZXB0b3JzIEludGVyY2VwdG9ycyBkZXRhaWxlZCBpbmZvfVxuICAgKi9cbiAgdmFyIGludGVyY2VwdG9yRmFjdG9yaWVzID0gdGhpcy5pbnRlcmNlcHRvcnMgPSBbXTtcblxuICAvKipcbiAgICogQG5nZG9jIHByb3BlcnR5XG4gICAqIEBuYW1lICRodHRwUHJvdmlkZXIjeHNyZldoaXRlbGlzdGVkT3JpZ2luc1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogQXJyYXkgY29udGFpbmluZyBVUkxzIHdob3NlIG9yaWdpbnMgYXJlIHRydXN0ZWQgdG8gcmVjZWl2ZSB0aGUgWFNSRiB0b2tlbi4gU2VlIHRoZVxuICAgKiB7QGxpbmsgbmcuJGh0dHAjc2VjdXJpdHktY29uc2lkZXJhdGlvbnMgU2VjdXJpdHkgQ29uc2lkZXJhdGlvbnN9IHNlY3Rpb25zIGZvciBtb3JlIGRldGFpbHMgb25cbiAgICogWFNSRi5cbiAgICpcbiAgICogKipOb3RlOioqIEFuIFwib3JpZ2luXCIgY29uc2lzdHMgb2YgdGhlIFtVUkkgc2NoZW1lXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VUklfc2NoZW1lKSxcbiAgICogdGhlIFtob3N0bmFtZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSG9zdG5hbWUpIGFuZCB0aGVcbiAgICogW3BvcnQgbnVtYmVyXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qb3J0Xyhjb21wdXRlcl9uZXR3b3JraW5nKS4gRm9yIGBodHRwOmAgYW5kXG4gICAqIGBodHRwczpgLCB0aGUgcG9ydCBudW1iZXIgY2FuIGJlIG9taXR0ZWQgaWYgdXNpbmcgdGggZGVmYXVsdCBwb3J0cyAoODAgYW5kIDQ0MyByZXNwZWN0aXZlbHkpLlxuICAgKiBFeGFtcGxlczogYGh0dHA6Ly9leGFtcGxlLmNvbWAsIGBodHRwczovL2FwaS5leGFtcGxlLmNvbTo5ODc2YFxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAgIEl0IGlzIG5vdCBwb3NzaWJsZSB0byB3aGl0ZWxpc3Qgc3BlY2lmaWMgVVJMcy9wYXRocy4gVGhlIGBwYXRoYCwgYHF1ZXJ5YCBhbmQgYGZyYWdtZW50YCBwYXJ0c1xuICAgKiAgIG9mIGEgVVJMIHdpbGwgYmUgaWdub3JlZC4gRm9yIGV4YW1wbGUsIGBodHRwczovL2Zvby5jb20vcGF0aC9iYXI/cXVlcnk9YmF6I2ZyYWdtZW50YCB3aWxsIGJlXG4gICAqICAgdHJlYXRlZCBhcyBgaHR0cHM6Ly9mb28uY29tYCwgbWVhbmluZyB0aGF0ICoqYWxsKiogcmVxdWVzdHMgdG8gVVJMcyBzdGFydGluZyB3aXRoXG4gICAqICAgYGh0dHBzOi8vZm9vLmNvbS9gIHdpbGwgaW5jbHVkZSB0aGUgWFNSRiB0b2tlbi5cbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIEFwcCBzZXJ2ZWQgZnJvbSBgaHR0cHM6Ly9leGFtcGxlLmNvbS9gLlxuICAgKiBhbmd1bGFyLlxuICAgKiAgIG1vZHVsZSgneHNyZldoaXRlbGlzdGVkT3JpZ2luc0V4YW1wbGUnLCBbXSkuXG4gICAqICAgY29uZmlnKFsnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIpIHtcbiAgICogICAgICRodHRwUHJvdmlkZXIueHNyZldoaXRlbGlzdGVkT3JpZ2lucy5wdXNoKCdodHRwczovL2FwaS5leGFtcGxlLmNvbScpO1xuICAgKiAgIH1dKS5cbiAgICogICBydW4oWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gICAqICAgICAvLyBUaGUgWFNSRiB0b2tlbiB3aWxsIGJlIHNlbnQuXG4gICAqICAgICAkaHR0cC5nZXQoJ2h0dHBzOi8vYXBpLmV4YW1wbGUuY29tL3ByZWZlcmVuY2VzJykudGhlbiguLi4pO1xuICAgKlxuICAgKiAgICAgLy8gVGhlIFhTUkYgdG9rZW4gd2lsbCBOT1QgYmUgc2VudC5cbiAgICogICAgICRodHRwLmdldCgnaHR0cHM6Ly9zdGF0cy5leGFtcGxlLmNvbS9hY3Rpdml0eScpLnRoZW4oLi4uKTtcbiAgICogICB9XSk7XG4gICAqIGBgYFxuICAgKi9cbiAgdmFyIHhzcmZXaGl0ZWxpc3RlZE9yaWdpbnMgPSB0aGlzLnhzcmZXaGl0ZWxpc3RlZE9yaWdpbnMgPSBbXTtcblxuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyRodHRwQmFja2VuZCcsICckJGNvb2tpZVJlYWRlcicsICckY2FjaGVGYWN0b3J5JywgJyRyb290U2NvcGUnLCAnJHEnLCAnJGluamVjdG9yJywgJyRzY2UnLFxuICAgICAgZnVuY3Rpb24oJGJyb3dzZXIsICRodHRwQmFja2VuZCwgJCRjb29raWVSZWFkZXIsICRjYWNoZUZhY3RvcnksICRyb290U2NvcGUsICRxLCAkaW5qZWN0b3IsICRzY2UpIHtcblxuICAgIHZhciBkZWZhdWx0Q2FjaGUgPSAkY2FjaGVGYWN0b3J5KCckaHR0cCcpO1xuXG4gICAgLyoqXG4gICAgICogTWFrZSBzdXJlIHRoYXQgZGVmYXVsdCBwYXJhbSBzZXJpYWxpemVyIGlzIGV4cG9zZWQgYXMgYSBmdW5jdGlvblxuICAgICAqL1xuICAgIGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplciA9IGlzU3RyaW5nKGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplcikgP1xuICAgICAgJGluamVjdG9yLmdldChkZWZhdWx0cy5wYXJhbVNlcmlhbGl6ZXIpIDogZGVmYXVsdHMucGFyYW1TZXJpYWxpemVyO1xuXG4gICAgLyoqXG4gICAgICogSW50ZXJjZXB0b3JzIHN0b3JlZCBpbiByZXZlcnNlIG9yZGVyLiBJbm5lciBpbnRlcmNlcHRvcnMgYmVmb3JlIG91dGVyIGludGVyY2VwdG9ycy5cbiAgICAgKiBUaGUgcmV2ZXJzYWwgaXMgbmVlZGVkIHNvIHRoYXQgd2UgY2FuIGJ1aWxkIHVwIHRoZSBpbnRlcmNlcHRpb24gY2hhaW4gYXJvdW5kIHRoZVxuICAgICAqIHNlcnZlciByZXF1ZXN0LlxuICAgICAqL1xuICAgIHZhciByZXZlcnNlZEludGVyY2VwdG9ycyA9IFtdO1xuXG4gICAgZm9yRWFjaChpbnRlcmNlcHRvckZhY3RvcmllcywgZnVuY3Rpb24oaW50ZXJjZXB0b3JGYWN0b3J5KSB7XG4gICAgICByZXZlcnNlZEludGVyY2VwdG9ycy51bnNoaWZ0KGlzU3RyaW5nKGludGVyY2VwdG9yRmFjdG9yeSlcbiAgICAgICAgICA/ICRpbmplY3Rvci5nZXQoaW50ZXJjZXB0b3JGYWN0b3J5KSA6ICRpbmplY3Rvci5pbnZva2UoaW50ZXJjZXB0b3JGYWN0b3J5KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGNoZWNrIHJlcXVlc3QgVVJMcyBhZ2FpbnN0IGEgbGlzdCBvZiBhbGxvd2VkIG9yaWdpbnMuXG4gICAgICovXG4gICAgdmFyIHVybElzQWxsb3dlZE9yaWdpbiA9IHVybElzQWxsb3dlZE9yaWdpbkZhY3RvcnkoeHNyZldoaXRlbGlzdGVkT3JpZ2lucyk7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICogQG5hbWUgJGh0dHBcbiAgICAgKiBAcmVxdWlyZXMgbmcuJGh0dHBCYWNrZW5kXG4gICAgICogQHJlcXVpcmVzICRjYWNoZUZhY3RvcnlcbiAgICAgKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICAgICAqIEByZXF1aXJlcyAkcVxuICAgICAqIEByZXF1aXJlcyAkaW5qZWN0b3JcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFRoZSBgJGh0dHBgIHNlcnZpY2UgaXMgYSBjb3JlIEFuZ3VsYXJKUyBzZXJ2aWNlIHRoYXQgZmFjaWxpdGF0ZXMgY29tbXVuaWNhdGlvbiB3aXRoIHRoZSByZW1vdGVcbiAgICAgKiBIVFRQIHNlcnZlcnMgdmlhIHRoZSBicm93c2VyJ3MgW1hNTEh0dHBSZXF1ZXN0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi94bWxodHRwcmVxdWVzdClcbiAgICAgKiBvYmplY3Qgb3IgdmlhIFtKU09OUF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OUCkuXG4gICAgICpcbiAgICAgKiBGb3IgdW5pdCB0ZXN0aW5nIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSBgJGh0dHBgIHNlcnZpY2UsIHNlZVxuICAgICAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAgICAgKlxuICAgICAqIEZvciBhIGhpZ2hlciBsZXZlbCBvZiBhYnN0cmFjdGlvbiwgcGxlYXNlIGNoZWNrIG91dCB0aGUge0BsaW5rIG5nUmVzb3VyY2UuJHJlc291cmNlXG4gICAgICogJHJlc291cmNlfSBzZXJ2aWNlLlxuICAgICAqXG4gICAgICogVGhlICRodHRwIEFQSSBpcyBiYXNlZCBvbiB0aGUge0BsaW5rIG5nLiRxIGRlZmVycmVkL3Byb21pc2UgQVBJc30gZXhwb3NlZCBieVxuICAgICAqIHRoZSAkcSBzZXJ2aWNlLiBXaGlsZSBmb3Igc2ltcGxlIHVzYWdlIHBhdHRlcm5zIHRoaXMgZG9lc24ndCBtYXR0ZXIgbXVjaCwgZm9yIGFkdmFuY2VkIHVzYWdlXG4gICAgICogaXQgaXMgaW1wb3J0YW50IHRvIGZhbWlsaWFyaXplIHlvdXJzZWxmIHdpdGggdGhlc2UgQVBJcyBhbmQgdGhlIGd1YXJhbnRlZXMgdGhleSBwcm92aWRlLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyBHZW5lcmFsIHVzYWdlXG4gICAgICogVGhlIGAkaHR0cGAgc2VydmljZSBpcyBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGEgc2luZ2xlIGFyZ3VtZW50IOKAlCBhIHtAbGluayAkaHR0cCN1c2FnZSBjb25maWd1cmF0aW9uIG9iamVjdH0g4oCUXG4gICAgICogdGhhdCBpcyB1c2VkIHRvIGdlbmVyYXRlIGFuIEhUVFAgcmVxdWVzdCBhbmQgcmV0dXJucyAgYSB7QGxpbmsgbmcuJHEgcHJvbWlzZX0gdGhhdCBpc1xuICAgICAqIHJlc29sdmVkIChyZXF1ZXN0IHN1Y2Nlc3MpIG9yIHJlamVjdGVkIChyZXF1ZXN0IGZhaWx1cmUpIHdpdGggYVxuICAgICAqIHtAbGluayBuZy4kaHR0cCMkaHR0cC1yZXR1cm5zIHJlc3BvbnNlfSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgLy8gU2ltcGxlIEdFVCByZXF1ZXN0IGV4YW1wbGU6XG4gICAgICogICAkaHR0cCh7XG4gICAgICogICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICogICAgIHVybDogJy9zb21lVXJsJ1xuICAgICAqICAgfSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5XG4gICAgICogICAgICAgLy8gd2hlbiB0aGUgcmVzcG9uc2UgaXMgYXZhaWxhYmxlXG4gICAgICogICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAvLyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgaWYgYW4gZXJyb3Igb2NjdXJzXG4gICAgICogICAgICAgLy8gb3Igc2VydmVyIHJldHVybnMgcmVzcG9uc2Ugd2l0aCBhbiBlcnJvciBzdGF0dXMuXG4gICAgICogICAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyBTaG9ydGN1dCBtZXRob2RzXG4gICAgICpcbiAgICAgKiBTaG9ydGN1dCBtZXRob2RzIGFyZSBhbHNvIGF2YWlsYWJsZS4gQWxsIHNob3J0Y3V0IG1ldGhvZHMgcmVxdWlyZSBwYXNzaW5nIGluIHRoZSBVUkwsIGFuZFxuICAgICAqIHJlcXVlc3QgZGF0YSBtdXN0IGJlIHBhc3NlZCBpbiBmb3IgUE9TVC9QVVQgcmVxdWVzdHMuIEFuIG9wdGlvbmFsIGNvbmZpZyBjYW4gYmUgcGFzc2VkIGFzIHRoZVxuICAgICAqIGxhc3QgYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgJGh0dHAuZ2V0KCcvc29tZVVybCcsIGNvbmZpZykudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAqICAgJGh0dHAucG9zdCgnL3NvbWVVcmwnLCBkYXRhLCBjb25maWcpLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIENvbXBsZXRlIGxpc3Qgb2Ygc2hvcnRjdXQgbWV0aG9kczpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2dldCAkaHR0cC5nZXR9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjaGVhZCAkaHR0cC5oZWFkfVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI3Bvc3QgJGh0dHAucG9zdH1cbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNwdXQgJGh0dHAucHV0fVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2RlbGV0ZSAkaHR0cC5kZWxldGV9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjanNvbnAgJGh0dHAuanNvbnB9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjcGF0Y2ggJGh0dHAucGF0Y2h9XG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIFdyaXRpbmcgVW5pdCBUZXN0cyB0aGF0IHVzZSAkaHR0cFxuICAgICAqIFdoZW4gdW5pdCB0ZXN0aW5nICh1c2luZyB7QGxpbmsgbmdNb2NrIG5nTW9ja30pLCBpdCBpcyBuZWNlc3NhcnkgdG8gY2FsbFxuICAgICAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kI2ZsdXNoICRodHRwQmFja2VuZC5mbHVzaCgpfSB0byBmbHVzaCBlYWNoIHBlbmRpbmdcbiAgICAgKiByZXF1ZXN0IHVzaW5nIHRyYWluZWQgcmVzcG9uc2VzLlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogJGh0dHBCYWNrZW5kLmV4cGVjdEdFVCguLi4pO1xuICAgICAqICRodHRwLmdldCguLi4pO1xuICAgICAqICRodHRwQmFja2VuZC5mbHVzaCgpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMgU2V0dGluZyBIVFRQIEhlYWRlcnNcbiAgICAgKlxuICAgICAqIFRoZSAkaHR0cCBzZXJ2aWNlIHdpbGwgYXV0b21hdGljYWxseSBhZGQgY2VydGFpbiBIVFRQIGhlYWRlcnMgdG8gYWxsIHJlcXVlc3RzLiBUaGVzZSBkZWZhdWx0c1xuICAgICAqIGNhbiBiZSBmdWxseSBjb25maWd1cmVkIGJ5IGFjY2Vzc2luZyB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVyc2AgY29uZmlndXJhdGlvblxuICAgICAqIG9iamVjdCwgd2hpY2ggY3VycmVudGx5IGNvbnRhaW5zIHRoaXMgZGVmYXVsdCBjb25maWd1cmF0aW9uOlxuICAgICAqXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbmAgKGhlYWRlcnMgdGhhdCBhcmUgY29tbW9uIGZvciBhbGwgcmVxdWVzdHMpOlxuICAgICAqICAgLSA8Y29kZT5BY2NlcHQ6IGFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sIFxcKiYjNjUyNzk7LyYjNjUyNzk7XFwqPC9jb2RlPlxuICAgICAqIC0gYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0YDogKGhlYWRlciBkZWZhdWx0cyBmb3IgUE9TVCByZXF1ZXN0cylcbiAgICAgKiAgIC0gYENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbmBcbiAgICAgKiAtIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucHV0YCAoaGVhZGVyIGRlZmF1bHRzIGZvciBQVVQgcmVxdWVzdHMpXG4gICAgICogICAtIGBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25gXG4gICAgICpcbiAgICAgKiBUbyBhZGQgb3Igb3ZlcndyaXRlIHRoZXNlIGRlZmF1bHRzLCBzaW1wbHkgYWRkIG9yIHJlbW92ZSBhIHByb3BlcnR5IGZyb20gdGhlc2UgY29uZmlndXJhdGlvblxuICAgICAqIG9iamVjdHMuIFRvIGFkZCBoZWFkZXJzIGZvciBhbiBIVFRQIG1ldGhvZCBvdGhlciB0aGFuIFBPU1Qgb3IgUFVULCBzaW1wbHkgYWRkIGEgbmV3IG9iamVjdFxuICAgICAqIHdpdGggdGhlIGxvd2VyY2FzZWQgSFRUUCBtZXRob2QgbmFtZSBhcyB0aGUga2V5LCBlLmcuXG4gICAgICogYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7ICdNeS1IZWFkZXInIDogJ3ZhbHVlJyB9YC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0cyBjYW4gYWxzbyBiZSBzZXQgYXQgcnVudGltZSB2aWEgdGhlIGAkaHR0cC5kZWZhdWx0c2Agb2JqZWN0IGluIHRoZSBzYW1lXG4gICAgICogZmFzaGlvbi4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBtb2R1bGUucnVuKGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICogICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gJ0Jhc2ljIFltVmxjRHBpYjI5dyc7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJbiBhZGRpdGlvbiwgeW91IGNhbiBzdXBwbHkgYSBgaGVhZGVyc2AgcHJvcGVydHkgaW4gdGhlIGNvbmZpZyBvYmplY3QgcGFzc2VkIHdoZW5cbiAgICAgKiBjYWxsaW5nIGAkaHR0cChjb25maWcpYCwgd2hpY2ggb3ZlcnJpZGVzIHRoZSBkZWZhdWx0cyB3aXRob3V0IGNoYW5naW5nIHRoZW0gZ2xvYmFsbHkuXG4gICAgICpcbiAgICAgKiBUbyBleHBsaWNpdGx5IHJlbW92ZSBhIGhlYWRlciBhdXRvbWF0aWNhbGx5IGFkZGVkIHZpYSAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMgb24gYSBwZXIgcmVxdWVzdCBiYXNpcyxcbiAgICAgKiBVc2UgdGhlIGBoZWFkZXJzYCBwcm9wZXJ0eSwgc2V0dGluZyB0aGUgZGVzaXJlZCBoZWFkZXIgdG8gYHVuZGVmaW5lZGAuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB2YXIgcmVxID0ge1xuICAgICAqICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgKiAgdXJsOiAnaHR0cDovL2V4YW1wbGUuY29tJyxcbiAgICAgKiAgaGVhZGVyczoge1xuICAgICAqICAgICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWRcbiAgICAgKiAgfSxcbiAgICAgKiAgZGF0YTogeyB0ZXN0OiAndGVzdCcgfVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqICRodHRwKHJlcSkudGhlbihmdW5jdGlvbigpey4uLn0sIGZ1bmN0aW9uKCl7Li4ufSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyBUcmFuc2Zvcm1pbmcgUmVxdWVzdHMgYW5kIFJlc3BvbnNlc1xuICAgICAqXG4gICAgICogQm90aCByZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIGNhbiBiZSB0cmFuc2Zvcm1lZCB1c2luZyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnM6IGB0cmFuc2Zvcm1SZXF1ZXN0YFxuICAgICAqIGFuZCBgdHJhbnNmb3JtUmVzcG9uc2VgLiBUaGVzZSBwcm9wZXJ0aWVzIGNhbiBiZSBhIHNpbmdsZSBmdW5jdGlvbiB0aGF0IHJldHVybnNcbiAgICAgKiB0aGUgdHJhbnNmb3JtZWQgdmFsdWUgKGBmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpYCkgb3IgYW4gYXJyYXkgb2Ygc3VjaCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMsXG4gICAgICogd2hpY2ggYWxsb3dzIHlvdSB0byBgcHVzaGAgb3IgYHVuc2hpZnRgIGEgbmV3IHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIGludG8gdGhlIHRyYW5zZm9ybWF0aW9uIGNoYWluLlxuICAgICAqXG4gICAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICAgKiAqKk5vdGU6KiogQW5ndWxhckpTIGRvZXMgbm90IG1ha2UgYSBjb3B5IG9mIHRoZSBgZGF0YWAgcGFyYW1ldGVyIGJlZm9yZSBpdCBpcyBwYXNzZWQgaW50byB0aGUgYHRyYW5zZm9ybVJlcXVlc3RgIHBpcGVsaW5lLlxuICAgICAqIFRoYXQgbWVhbnMgY2hhbmdlcyB0byB0aGUgcHJvcGVydGllcyBvZiBgZGF0YWAgYXJlIG5vdCBsb2NhbCB0byB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChzaW5jZSBKYXZhc2NyaXB0IHBhc3NlcyBvYmplY3RzIGJ5IHJlZmVyZW5jZSkuXG4gICAgICogRm9yIGV4YW1wbGUsIHdoZW4gY2FsbGluZyBgJGh0dHAuZ2V0KHVybCwgJHNjb3BlLm15T2JqZWN0KWAsIG1vZGlmaWNhdGlvbnMgdG8gdGhlIG9iamVjdCdzIHByb3BlcnRpZXMgaW4gYSB0cmFuc2Zvcm1SZXF1ZXN0XG4gICAgICogZnVuY3Rpb24gd2lsbCBiZSByZWZsZWN0ZWQgb24gdGhlIHNjb3BlIGFuZCBpbiBhbnkgdGVtcGxhdGVzIHdoZXJlIHRoZSBvYmplY3QgaXMgZGF0YS1ib3VuZC5cbiAgICAgKiBUbyBwcmV2ZW50IHRoaXMsIHRyYW5zZm9ybSBmdW5jdGlvbnMgc2hvdWxkIGhhdmUgbm8gc2lkZS1lZmZlY3RzLlxuICAgICAqIElmIHlvdSBuZWVkIHRvIG1vZGlmeSBwcm9wZXJ0aWVzLCBpdCBpcyByZWNvbW1lbmRlZCB0byBtYWtlIGEgY29weSBvZiB0aGUgZGF0YSwgb3IgY3JlYXRlIG5ldyBvYmplY3QgdG8gcmV0dXJuLlxuICAgICAqIDwvZGl2PlxuICAgICAqXG4gICAgICogIyMjIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zXG4gICAgICpcbiAgICAgKiBUaGUgYCRodHRwUHJvdmlkZXJgIHByb3ZpZGVyIGFuZCBgJGh0dHBgIHNlcnZpY2UgZXhwb3NlIGBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCBhbmRcbiAgICAgKiBgZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMuIElmIGEgcmVxdWVzdCBkb2VzIG5vdCBwcm92aWRlIGl0cyBvd24gdHJhbnNmb3JtYXRpb25zXG4gICAgICogdGhlbiB0aGVzZSB3aWxsIGJlIGFwcGxpZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGF1Z21lbnQgb3IgcmVwbGFjZSB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgYnkgbW9kaWZ5aW5nIHRoZXNlIHByb3BlcnRpZXMgYnkgYWRkaW5nIHRvIG9yXG4gICAgICogcmVwbGFjaW5nIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEFuZ3VsYXJKUyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zOlxuICAgICAqXG4gICAgICogUmVxdWVzdCB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgIGFuZCBgJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGApIGlzXG4gICAgICogYW4gYXJyYXkgd2l0aCBvbmUgZnVuY3Rpb24gdGhhdCBkb2VzIHRoZSBmb2xsb3dpbmc6XG4gICAgICpcbiAgICAgKiAtIElmIHRoZSBgZGF0YWAgcHJvcGVydHkgb2YgdGhlIHJlcXVlc3QgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbnMgYW4gb2JqZWN0LCBzZXJpYWxpemUgaXRcbiAgICAgKiAgIGludG8gSlNPTiBmb3JtYXQuXG4gICAgICpcbiAgICAgKiBSZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCBhbmQgYCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCkgaXNcbiAgICAgKiBhbiBhcnJheSB3aXRoIG9uZSBmdW5jdGlvbiB0aGF0IGRvZXMgdGhlIGZvbGxvd2luZzpcbiAgICAgKlxuICAgICAqICAtIElmIFhTUkYgcHJlZml4IGlzIGRldGVjdGVkLCBzdHJpcCBpdCAoc2VlIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zIHNlY3Rpb24gYmVsb3cpLlxuICAgICAqICAtIElmIHRoZSBgQ29udGVudC1UeXBlYCBpcyBgYXBwbGljYXRpb24vanNvbmAgb3IgdGhlIHJlc3BvbnNlIGxvb2tzIGxpa2UgSlNPTixcbiAgICogICAgICBkZXNlcmlhbGl6ZSBpdCB1c2luZyBhIEpTT04gcGFyc2VyLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnMgUGVyIFJlcXVlc3RcbiAgICAgKlxuICAgICAqIElmIHlvdSB3aXNoIHRvIG92ZXJyaWRlIHRoZSByZXF1ZXN0L3Jlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucyBvbmx5IGZvciBhIHNpbmdsZSByZXF1ZXN0IHRoZW4gcHJvdmlkZVxuICAgICAqIGB0cmFuc2Zvcm1SZXF1ZXN0YCBhbmQvb3IgYHRyYW5zZm9ybVJlc3BvbnNlYCBwcm9wZXJ0aWVzIG9uIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBwYXNzZWRcbiAgICAgKiBpbnRvIGAkaHR0cGAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaWYgeW91IHByb3ZpZGUgdGhlc2UgcHJvcGVydGllcyBvbiB0aGUgY29uZmlnIG9iamVjdCB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgd2lsbCBiZVxuICAgICAqIG92ZXJ3cml0dGVuLiBJZiB5b3Ugd2lzaCB0byBhdWdtZW50IHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyB0aGVuIHlvdSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB5b3VyXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24gYXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgZm9sbG93aW5nIGNvZGUgZGVtb25zdHJhdGVzIGFkZGluZyBhIG5ldyByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbiB0byBiZSBydW4gYWZ0ZXIgdGhlIGRlZmF1bHQgcmVzcG9uc2VcbiAgICAgKiB0cmFuc2Zvcm1hdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZnVuY3Rpb24gYXBwZW5kVHJhbnNmb3JtKGRlZmF1bHRzLCB0cmFuc2Zvcm0pIHtcbiAgICAgKlxuICAgICAqICAgLy8gV2UgY2FuJ3QgZ3VhcmFudGVlIHRoYXQgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb24gaXMgYW4gYXJyYXlcbiAgICAgKiAgIGRlZmF1bHRzID0gYW5ndWxhci5pc0FycmF5KGRlZmF1bHRzKSA/IGRlZmF1bHRzIDogW2RlZmF1bHRzXTtcbiAgICAgKlxuICAgICAqICAgLy8gQXBwZW5kIHRoZSBuZXcgdHJhbnNmb3JtYXRpb24gdG8gdGhlIGRlZmF1bHRzXG4gICAgICogICByZXR1cm4gZGVmYXVsdHMuY29uY2F0KHRyYW5zZm9ybSk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogJGh0dHAoe1xuICAgICAqICAgdXJsOiAnLi4uJyxcbiAgICAgKiAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICogICB0cmFuc2Zvcm1SZXNwb25zZTogYXBwZW5kVHJhbnNmb3JtKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgICByZXR1cm4gZG9UcmFuc2Zvcm0odmFsdWUpO1xuICAgICAqICAgfSlcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqXG4gICAgICogIyMgQ2FjaGluZ1xuICAgICAqXG4gICAgICoge0BsaW5rIG5nLiRodHRwIGAkaHR0cGB9IHJlc3BvbnNlcyBhcmUgbm90IGNhY2hlZCBieSBkZWZhdWx0LiBUbyBlbmFibGUgY2FjaGluZywgeW91IG11c3RcbiAgICAgKiBzZXQgdGhlIGNvbmZpZy5jYWNoZSB2YWx1ZSBvciB0aGUgZGVmYXVsdCBjYWNoZSB2YWx1ZSB0byBUUlVFIG9yIHRvIGEgY2FjaGUgb2JqZWN0IChjcmVhdGVkXG4gICAgICogd2l0aCB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9KS4gSWYgZGVmaW5lZCwgdGhlIHZhbHVlIG9mIGNvbmZpZy5jYWNoZSB0YWtlc1xuICAgICAqIHByZWNlZGVuY2Ugb3ZlciB0aGUgZGVmYXVsdCBjYWNoZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEluIG9yZGVyIHRvOlxuICAgICAqICAgKiBjYWNoZSBhbGwgcmVzcG9uc2VzIC0gc2V0IHRoZSBkZWZhdWx0IGNhY2hlIHZhbHVlIHRvIFRSVUUgb3IgdG8gYSBjYWNoZSBvYmplY3RcbiAgICAgKiAgICogY2FjaGUgYSBzcGVjaWZpYyByZXNwb25zZSAtIHNldCBjb25maWcuY2FjaGUgdmFsdWUgdG8gVFJVRSBvciB0byBhIGNhY2hlIG9iamVjdFxuICAgICAqXG4gICAgICogSWYgY2FjaGluZyBpcyBlbmFibGVkLCBidXQgbmVpdGhlciB0aGUgZGVmYXVsdCBjYWNoZSBub3IgY29uZmlnLmNhY2hlIGFyZSBzZXQgdG8gYSBjYWNoZSBvYmplY3QsXG4gICAgICogdGhlbiB0aGUgZGVmYXVsdCBgJGNhY2hlRmFjdG9yeShcIiRodHRwXCIpYCBvYmplY3QgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGNhY2hlIHZhbHVlIGNhbiBiZSBzZXQgYnkgdXBkYXRpbmcgdGhlXG4gICAgICoge0BsaW5rIG5nLiRodHRwI2RlZmF1bHRzIGAkaHR0cC5kZWZhdWx0cy5jYWNoZWB9IHByb3BlcnR5IG9yIHRoZVxuICAgICAqIHtAbGluayAkaHR0cFByb3ZpZGVyI2RlZmF1bHRzIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmNhY2hlYH0gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBXaGVuIGNhY2hpbmcgaXMgZW5hYmxlZCwge0BsaW5rIG5nLiRodHRwIGAkaHR0cGB9IHN0b3JlcyB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHVzaW5nXG4gICAgICogdGhlIHJlbGV2YW50IGNhY2hlIG9iamVjdC4gVGhlIG5leHQgdGltZSB0aGUgc2FtZSByZXF1ZXN0IGlzIG1hZGUsIHRoZSByZXNwb25zZSBpcyByZXR1cm5lZFxuICAgICAqIGZyb20gdGhlIGNhY2hlIHdpdGhvdXQgc2VuZGluZyBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIFRha2Ugbm90ZSB0aGF0OlxuICAgICAqXG4gICAgICogICAqIE9ubHkgR0VUIGFuZCBKU09OUCByZXF1ZXN0cyBhcmUgY2FjaGVkLlxuICAgICAqICAgKiBUaGUgY2FjaGUga2V5IGlzIHRoZSByZXF1ZXN0IFVSTCBpbmNsdWRpbmcgc2VhcmNoIHBhcmFtZXRlcnM7IGhlYWRlcnMgYXJlIG5vdCBjb25zaWRlcmVkLlxuICAgICAqICAgKiBDYWNoZWQgcmVzcG9uc2VzIGFyZSByZXR1cm5lZCBhc3luY2hyb25vdXNseSwgaW4gdGhlIHNhbWUgd2F5IGFzIHJlc3BvbnNlcyBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogICAqIElmIG11bHRpcGxlIGlkZW50aWNhbCByZXF1ZXN0cyBhcmUgbWFkZSB1c2luZyB0aGUgc2FtZSBjYWNoZSwgd2hpY2ggaXMgbm90IHlldCBwb3B1bGF0ZWQsXG4gICAgICogICAgIG9uZSByZXF1ZXN0IHdpbGwgYmUgbWFkZSB0byB0aGUgc2VydmVyIGFuZCByZW1haW5pbmcgcmVxdWVzdHMgd2lsbCByZXR1cm4gdGhlIHNhbWUgcmVzcG9uc2UuXG4gICAgICogICAqIEEgY2FjaGUtY29udHJvbCBoZWFkZXIgb24gdGhlIHJlc3BvbnNlIGRvZXMgbm90IGFmZmVjdCBpZiBvciBob3cgcmVzcG9uc2VzIGFyZSBjYWNoZWQuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIEludGVyY2VwdG9yc1xuICAgICAqXG4gICAgICogQmVmb3JlIHlvdSBzdGFydCBjcmVhdGluZyBpbnRlcmNlcHRvcnMsIGJlIHN1cmUgdG8gdW5kZXJzdGFuZCB0aGVcbiAgICAgKiB7QGxpbmsgbmcuJHEgJHEgYW5kIGRlZmVycmVkL3Byb21pc2UgQVBJc30uXG4gICAgICpcbiAgICAgKiBGb3IgcHVycG9zZXMgb2YgZ2xvYmFsIGVycm9yIGhhbmRsaW5nLCBhdXRoZW50aWNhdGlvbiwgb3IgYW55IGtpbmQgb2Ygc3luY2hyb25vdXMgb3JcbiAgICAgKiBhc3luY2hyb25vdXMgcHJlLXByb2Nlc3Npbmcgb2YgcmVxdWVzdCBvciBwb3N0cHJvY2Vzc2luZyBvZiByZXNwb25zZXMsIGl0IGlzIGRlc2lyYWJsZSB0byBiZVxuICAgICAqIGFibGUgdG8gaW50ZXJjZXB0IHJlcXVlc3RzIGJlZm9yZSB0aGV5IGFyZSBoYW5kZWQgdG8gdGhlIHNlcnZlciBhbmRcbiAgICAgKiByZXNwb25zZXMgYmVmb3JlIHRoZXkgYXJlIGhhbmRlZCBvdmVyIHRvIHRoZSBhcHBsaWNhdGlvbiBjb2RlIHRoYXRcbiAgICAgKiBpbml0aWF0ZWQgdGhlc2UgcmVxdWVzdHMuIFRoZSBpbnRlcmNlcHRvcnMgbGV2ZXJhZ2UgdGhlIHtAbGluayBuZy4kcVxuICAgICAqIHByb21pc2UgQVBJc30gdG8gZnVsZmlsbCB0aGlzIG5lZWQgZm9yIGJvdGggc3luY2hyb25vdXMgYW5kIGFzeW5jaHJvbm91cyBwcmUtcHJvY2Vzc2luZy5cbiAgICAgKlxuICAgICAqIFRoZSBpbnRlcmNlcHRvcnMgYXJlIHNlcnZpY2UgZmFjdG9yaWVzIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYCRodHRwUHJvdmlkZXJgIGJ5XG4gICAgICogYWRkaW5nIHRoZW0gdG8gdGhlIGAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9yc2AgYXJyYXkuIFRoZSBmYWN0b3J5IGlzIGNhbGxlZCBhbmRcbiAgICAgKiBpbmplY3RlZCB3aXRoIGRlcGVuZGVuY2llcyAoaWYgc3BlY2lmaWVkKSBhbmQgcmV0dXJucyB0aGUgaW50ZXJjZXB0b3IuXG4gICAgICpcbiAgICAgKiBUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIGludGVyY2VwdG9ycyAoYW5kIHR3byBraW5kcyBvZiByZWplY3Rpb24gaW50ZXJjZXB0b3JzKTpcbiAgICAgKlxuICAgICAqICAgKiBgcmVxdWVzdGA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggYSBodHRwIHtAbGluayAkaHR0cCN1c2FnZSBjb25maWd9IG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgY29uZmlnYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYGNvbmZpZ2BcbiAgICAgKiAgICAgb2JqZWN0IGRpcmVjdGx5LCBvciBhIHByb21pc2UgY29udGFpbmluZyB0aGUgYGNvbmZpZ2Agb3IgYSBuZXcgYGNvbmZpZ2Agb2JqZWN0LlxuICAgICAqICAgKiBgcmVxdWVzdEVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICogICAqIGByZXNwb25zZWA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggaHR0cCBgcmVzcG9uc2VgIG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgcmVzcG9uc2VgIG9iamVjdCBvciBjcmVhdGUgYSBuZXcgb25lLiBUaGUgZnVuY3Rpb24gbmVlZHMgdG8gcmV0dXJuIHRoZSBgcmVzcG9uc2VgXG4gICAgICogICAgIG9iamVjdCBkaXJlY3RseSwgb3IgYXMgYSBwcm9taXNlIGNvbnRhaW5pbmcgdGhlIGByZXNwb25zZWAgb3IgYSBuZXcgYHJlc3BvbnNlYCBvYmplY3QuXG4gICAgICogICAqIGByZXNwb25zZUVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAvLyByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgYXMgYSBzZXJ2aWNlXG4gICAgICogICAkcHJvdmlkZS5mYWN0b3J5KCdteUh0dHBJbnRlcmNlcHRvcicsIGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcbiAgICAgKiAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIHN1Y2Nlc3NcbiAgICAgKiAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3JlcXVlc3RFcnJvcic6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIGVycm9yXG4gICAgICogICAgICAgICBpZiAoY2FuUmVjb3ZlcihyZWplY3Rpb24pKSB7XG4gICAgICogICAgICAgICAgIHJldHVybiByZXNwb25zZU9yTmV3UHJvbWlzZVxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKlxuICAgICAqXG4gICAgICogICAgICAgLy8gb3B0aW9uYWwgbWV0aG9kXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBzdWNjZXNzXG4gICAgICogICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3Jlc3BvbnNlRXJyb3InOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBlcnJvclxuICAgICAqICAgICAgICAgaWYgKGNhblJlY292ZXIocmVqZWN0aW9uKSkge1xuICAgICAqICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VPck5ld1Byb21pc2VcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKlxuICAgICAqICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnbXlIdHRwSW50ZXJjZXB0b3InKTtcbiAgICAgKlxuICAgICAqXG4gICAgICogICAvLyBhbHRlcm5hdGl2ZWx5LCByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgdmlhIGFuIGFub255bW91cyBmYWN0b3J5XG4gICAgICogICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICogICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZVxuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKiAgICAgICAncmVzcG9uc2UnOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zXG4gICAgICpcbiAgICAgKiBXaGVuIGRlc2lnbmluZyB3ZWIgYXBwbGljYXRpb25zLCBjb25zaWRlciBzZWN1cml0eSB0aHJlYXRzIGZyb206XG4gICAgICpcbiAgICAgKiAtIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcbiAgICAgKiAtIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KVxuICAgICAqXG4gICAgICogQm90aCBzZXJ2ZXIgYW5kIHRoZSBjbGllbnQgbXVzdCBjb29wZXJhdGUgaW4gb3JkZXIgdG8gZWxpbWluYXRlIHRoZXNlIHRocmVhdHMuIEFuZ3VsYXJKUyBjb21lc1xuICAgICAqIHByZS1jb25maWd1cmVkIHdpdGggc3RyYXRlZ2llcyB0aGF0IGFkZHJlc3MgdGhlc2UgaXNzdWVzLCBidXQgZm9yIHRoaXMgdG8gd29yayBiYWNrZW5kIHNlcnZlclxuICAgICAqIGNvb3BlcmF0aW9uIGlzIHJlcXVpcmVkLlxuICAgICAqXG4gICAgICogIyMjIEpTT04gVnVsbmVyYWJpbGl0eSBQcm90ZWN0aW9uXG4gICAgICpcbiAgICAgKiBBIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcbiAgICAgKiBhbGxvd3MgdGhpcmQgcGFydHkgd2Vic2l0ZSB0byB0dXJuIHlvdXIgSlNPTiByZXNvdXJjZSBVUkwgaW50b1xuICAgICAqIFtKU09OUF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OUCkgcmVxdWVzdCB1bmRlciBzb21lIGNvbmRpdGlvbnMuIFRvXG4gICAgICogY291bnRlciB0aGlzIHlvdXIgc2VydmVyIGNhbiBwcmVmaXggYWxsIEpTT04gcmVxdWVzdHMgd2l0aCBmb2xsb3dpbmcgc3RyaW5nIGBcIildfScsXFxuXCJgLlxuICAgICAqIEFuZ3VsYXJKUyB3aWxsIGF1dG9tYXRpY2FsbHkgc3RyaXAgdGhlIHByZWZpeCBiZWZvcmUgcHJvY2Vzc2luZyBpdCBhcyBKU09OLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUgaWYgeW91ciBzZXJ2ZXIgbmVlZHMgdG8gcmV0dXJuOlxuICAgICAqIGBgYGpzXG4gICAgICogWydvbmUnLCd0d28nXVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogd2hpY2ggaXMgdnVsbmVyYWJsZSB0byBhdHRhY2ssIHlvdXIgc2VydmVyIGNhbiByZXR1cm46XG4gICAgICogYGBganNcbiAgICAgKiApXX0nLFxuICAgICAqIFsnb25lJywndHdvJ11cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEFuZ3VsYXJKUyB3aWxsIHN0cmlwIHRoZSBwcmVmaXgsIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBKU09OLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgQ3Jvc3MgU2l0ZSBSZXF1ZXN0IEZvcmdlcnkgKFhTUkYpIFByb3RlY3Rpb25cbiAgICAgKlxuICAgICAqIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KSBpcyBhbiBhdHRhY2sgdGVjaG5pcXVlIGJ5XG4gICAgICogd2hpY2ggdGhlIGF0dGFja2VyIGNhbiB0cmljayBhbiBhdXRoZW50aWNhdGVkIHVzZXIgaW50byB1bmtub3dpbmdseSBleGVjdXRpbmcgYWN0aW9ucyBvbiB5b3VyXG4gICAgICogd2Vic2l0ZS4gQW5ndWxhckpTIHByb3ZpZGVzIGEgbWVjaGFuaXNtIHRvIGNvdW50ZXIgWFNSRi4gV2hlbiBwZXJmb3JtaW5nIFhIUiByZXF1ZXN0cywgdGhlXG4gICAgICogJGh0dHAgc2VydmljZSByZWFkcyBhIHRva2VuIGZyb20gYSBjb29raWUgKGJ5IGRlZmF1bHQsIGBYU1JGLVRPS0VOYCkgYW5kIHNldHMgaXQgYXMgYW4gSFRUUFxuICAgICAqIGhlYWRlciAoYnkgZGVmYXVsdCBgWC1YU1JGLVRPS0VOYCkuIFNpbmNlIG9ubHkgSmF2YVNjcmlwdCB0aGF0IHJ1bnMgb24geW91ciBkb21haW4gY291bGQgcmVhZFxuICAgICAqIHRoZSBjb29raWUsIHlvdXIgc2VydmVyIGNhbiBiZSBhc3N1cmVkIHRoYXQgdGhlIFhIUiBjYW1lIGZyb20gSmF2YVNjcmlwdCBydW5uaW5nIG9uIHlvdXJcbiAgICAgKiBkb21haW4uXG4gICAgICpcbiAgICAgKiBUbyB0YWtlIGFkdmFudGFnZSBvZiB0aGlzLCB5b3VyIHNlcnZlciBuZWVkcyB0byBzZXQgYSB0b2tlbiBpbiBhIEphdmFTY3JpcHQgcmVhZGFibGUgc2Vzc2lvblxuICAgICAqIGNvb2tpZSBjYWxsZWQgYFhTUkYtVE9LRU5gIG9uIHRoZSBmaXJzdCBIVFRQIEdFVCByZXF1ZXN0LiBPbiBzdWJzZXF1ZW50IFhIUiByZXF1ZXN0cyB0aGVcbiAgICAgKiBzZXJ2ZXIgY2FuIHZlcmlmeSB0aGF0IHRoZSBjb29raWUgbWF0Y2hlcyB0aGUgYFgtWFNSRi1UT0tFTmAgSFRUUCBoZWFkZXIsIGFuZCB0aGVyZWZvcmUgYmVcbiAgICAgKiBzdXJlIHRoYXQgb25seSBKYXZhU2NyaXB0IHJ1bm5pbmcgb24geW91ciBkb21haW4gY291bGQgaGF2ZSBzZW50IHRoZSByZXF1ZXN0LiBUaGUgdG9rZW4gbXVzdFxuICAgICAqIGJlIHVuaXF1ZSBmb3IgZWFjaCB1c2VyIGFuZCBtdXN0IGJlIHZlcmlmaWFibGUgYnkgdGhlIHNlcnZlciAodG8gcHJldmVudCB0aGUgSmF2YVNjcmlwdCBmcm9tXG4gICAgICogbWFraW5nIHVwIGl0cyBvd24gdG9rZW5zKS4gV2UgcmVjb21tZW5kIHRoYXQgdGhlIHRva2VuIGlzIGEgZGlnZXN0IG9mIHlvdXIgc2l0ZSdzXG4gICAgICogYXV0aGVudGljYXRpb24gY29va2llIHdpdGggYSBbc2FsdF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2FsdF8oY3J5cHRvZ3JhcGh5JiM0MTspXG4gICAgICogZm9yIGFkZGVkIHNlY3VyaXR5LlxuICAgICAqXG4gICAgICogVGhlIGhlYWRlciB3aWxsICZtZGFzaDsgYnkgZGVmYXVsdCAmbWRhc2g7ICoqbm90KiogYmUgc2V0IGZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMuIFRoaXNcbiAgICAgKiBwcmV2ZW50cyB1bmF1dGhvcml6ZWQgc2VydmVycyAoZS5nLiBtYWxpY2lvdXMgb3IgY29tcHJvbWlzZWQgM3JkLXBhcnR5IEFQSXMpIGZyb20gZ2FpbmluZ1xuICAgICAqIGFjY2VzcyB0byB5b3VyIHVzZXJzJyBYU1JGIHRva2VucyBhbmQgZXhwb3NpbmcgdGhlbSB0byBDcm9zcyBTaXRlIFJlcXVlc3QgRm9yZ2VyeS4gSWYgeW91XG4gICAgICogd2FudCB0bywgeW91IGNhbiB3aGl0ZWxpc3QgYWRkaXRpb25hbCBvcmlnaW5zIHRvIGFsc28gcmVjZWl2ZSB0aGUgWFNSRiB0b2tlbiwgYnkgYWRkaW5nIHRoZW1cbiAgICAgKiB0byB7QGxpbmsgbmcuJGh0dHBQcm92aWRlciN4c3JmV2hpdGVsaXN0ZWRPcmlnaW5zIHhzcmZXaGl0ZWxpc3RlZE9yaWdpbnN9LiBUaGlzIG1pZ2h0IGJlXG4gICAgICogdXNlZnVsLCBmb3IgZXhhbXBsZSwgaWYgeW91ciBhcHBsaWNhdGlvbiwgc2VydmVkIGZyb20gYGV4YW1wbGUuY29tYCwgbmVlZHMgdG8gYWNjZXNzIHlvdXIgQVBJXG4gICAgICogYXQgYGFwaS5leGFtcGxlLmNvbWAuXG4gICAgICogU2VlIHtAbGluayBuZy4kaHR0cFByb3ZpZGVyI3hzcmZXaGl0ZWxpc3RlZE9yaWdpbnMgJGh0dHBQcm92aWRlci54c3JmV2hpdGVsaXN0ZWRPcmlnaW5zfSBmb3JcbiAgICAgKiBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gICAgICogICAqKldhcm5pbmcqKjxiciAvPlxuICAgICAqICAgT25seSB3aGl0ZWxpc3Qgb3JpZ2lucyB0aGF0IHlvdSBoYXZlIGNvbnRyb2wgb3ZlciBhbmQgbWFrZSBzdXJlIHlvdSB1bmRlcnN0YW5kIHRoZVxuICAgICAqICAgaW1wbGljYXRpb25zIG9mIGRvaW5nIHNvLlxuICAgICAqIDwvZGl2PlxuICAgICAqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGNvb2tpZSBhbmQgdGhlIGhlYWRlciBjYW4gYmUgc3BlY2lmaWVkIHVzaW5nIHRoZSBgeHNyZkNvb2tpZU5hbWVgIGFuZFxuICAgICAqIGB4c3JmSGVhZGVyTmFtZWAgcHJvcGVydGllcyBvZiBlaXRoZXIgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHNgIGF0IGNvbmZpZy10aW1lLFxuICAgICAqIGAkaHR0cC5kZWZhdWx0c2AgYXQgcnVuLXRpbWUsIG9yIHRoZSBwZXItcmVxdWVzdCBjb25maWcgb2JqZWN0LlxuICAgICAqXG4gICAgICogSW4gb3JkZXIgdG8gcHJldmVudCBjb2xsaXNpb25zIGluIGVudmlyb25tZW50cyB3aGVyZSBtdWx0aXBsZSBBbmd1bGFySlMgYXBwcyBzaGFyZSB0aGVcbiAgICAgKiBzYW1lIGRvbWFpbiBvciBzdWJkb21haW4sIHdlIHJlY29tbWVuZCB0aGF0IGVhY2ggYXBwbGljYXRpb24gdXNlcyBhIHVuaXF1ZSBjb29raWUgbmFtZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBPYmplY3QgZGVzY3JpYmluZyB0aGUgcmVxdWVzdCB0byBiZSBtYWRlIGFuZCBob3cgaXQgc2hvdWxkIGJlXG4gICAgICogICAgcHJvY2Vzc2VkLiBUaGUgb2JqZWN0IGhhcyBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqICAgIC0gKiptZXRob2QqKiDigJMgYHtzdHJpbmd9YCDigJMgSFRUUCBtZXRob2QgKGUuZy4gJ0dFVCcsICdQT1NUJywgZXRjKVxuICAgICAqICAgIC0gKip1cmwqKiDigJMgYHtzdHJpbmd8VHJ1c3RlZE9iamVjdH1gIOKAkyBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgb3IgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgYSBjYWxsIHRvIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh1cmwpYC5cbiAgICAgKiAgICAtICoqcGFyYW1zKiog4oCTIGB7T2JqZWN0LjxzdHJpbmd8T2JqZWN0Pn1gIOKAkyBNYXAgb2Ygc3RyaW5ncyBvciBvYmplY3RzIHdoaWNoIHdpbGwgYmUgc2VyaWFsaXplZFxuICAgICAqICAgICAgd2l0aCB0aGUgYHBhcmFtU2VyaWFsaXplcmAgYW5kIGFwcGVuZGVkIGFzIEdFVCBwYXJhbWV0ZXJzLlxuICAgICAqICAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBEYXRhIHRvIGJlIHNlbnQgYXMgdGhlIHJlcXVlc3QgbWVzc2FnZSBkYXRhLlxuICAgICAqICAgIC0gKipoZWFkZXJzKiog4oCTIGB7T2JqZWN0fWAg4oCTIE1hcCBvZiBzdHJpbmdzIG9yIGZ1bmN0aW9ucyB3aGljaCByZXR1cm4gc3RyaW5ncyByZXByZXNlbnRpbmdcbiAgICAgKiAgICAgIEhUVFAgaGVhZGVycyB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuIElmIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBmdW5jdGlvbiBpcyBudWxsLCB0aGVcbiAgICAgKiAgICAgIGhlYWRlciB3aWxsIG5vdCBiZSBzZW50LiBGdW5jdGlvbnMgYWNjZXB0IGEgY29uZmlnIG9iamVjdCBhcyBhbiBhcmd1bWVudC5cbiAgICAgKiAgICAtICoqZXZlbnRIYW5kbGVycyoqIC0gYHtPYmplY3R9YCAtIEV2ZW50IGxpc3RlbmVycyB0byBiZSBib3VuZCB0byB0aGUgWE1MSHR0cFJlcXVlc3Qgb2JqZWN0LlxuICAgICAqICAgICAgVG8gYmluZCBldmVudHMgdG8gdGhlIFhNTEh0dHBSZXF1ZXN0IHVwbG9hZCBvYmplY3QsIHVzZSBgdXBsb2FkRXZlbnRIYW5kbGVyc2AuXG4gICAgICogICAgICBUaGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZCBpbiB0aGUgY29udGV4dCBvZiBhIGAkYXBwbHlgIGJsb2NrLlxuICAgICAqICAgIC0gKip1cGxvYWRFdmVudEhhbmRsZXJzKiogLSBge09iamVjdH1gIC0gRXZlbnQgbGlzdGVuZXJzIHRvIGJlIGJvdW5kIHRvIHRoZSBYTUxIdHRwUmVxdWVzdCB1cGxvYWRcbiAgICAgKiAgICAgIG9iamVjdC4gVG8gYmluZCBldmVudHMgdG8gdGhlIFhNTEh0dHBSZXF1ZXN0IG9iamVjdCwgdXNlIGBldmVudEhhbmRsZXJzYC5cbiAgICAgKiAgICAgIFRoZSBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIGluIHRoZSBjb250ZXh0IG9mIGEgYCRhcHBseWAgYmxvY2suXG4gICAgICogICAgLSAqKnhzcmZIZWFkZXJOYW1lKiog4oCTIGB7c3RyaW5nfWAg4oCTIE5hbWUgb2YgSFRUUCBoZWFkZXIgdG8gcG9wdWxhdGUgd2l0aCB0aGUgWFNSRiB0b2tlbi5cbiAgICAgKiAgICAtICoqeHNyZkNvb2tpZU5hbWUqKiDigJMgYHtzdHJpbmd9YCDigJMgTmFtZSBvZiBjb29raWUgY29udGFpbmluZyB0aGUgWFNSRiB0b2tlbi5cbiAgICAgKiAgICAtICoqdHJhbnNmb3JtUmVxdWVzdCoqIOKAk1xuICAgICAqICAgICAgYHtmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKXxBcnJheS48ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcik+fWAg4oCTXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcbiAgICAgKiAgICAgIHJlcXVlc3QgYm9keSBhbmQgaGVhZGVycyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBzZXJpYWxpemVkKSB2ZXJzaW9uLlxuICAgICAqICAgICAgU2VlIHtAbGluayBuZy4kaHR0cCNvdmVycmlkaW5nLXRoZS1kZWZhdWx0LXRyYW5zZm9ybWF0aW9ucy1wZXItcmVxdWVzdFxuICAgICAqICAgICAgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnN9XG4gICAgICogICAgLSAqKnRyYW5zZm9ybVJlc3BvbnNlKiog4oCTXG4gICAgICogICAgICBge2Z1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyl8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyk+fWAg4oCTXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcbiAgICAgKiAgICAgIHJlc3BvbnNlIGJvZHksIGhlYWRlcnMgYW5kIHN0YXR1cyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBkZXNlcmlhbGl6ZWQpIHZlcnNpb24uXG4gICAgICogICAgICBTZWUge0BsaW5rIG5nLiRodHRwI292ZXJyaWRpbmctdGhlLWRlZmF1bHQtdHJhbnNmb3JtYXRpb25zLXBlci1yZXF1ZXN0XG4gICAgICogICAgICBPdmVycmlkaW5nIHRoZSBEZWZhdWx0IFRyYW5zZm9ybWF0aW9uc31cbiAgICAgKiAgICAtICoqcGFyYW1TZXJpYWxpemVyKiogLSBge3N0cmluZ3xmdW5jdGlvbihPYmplY3Q8c3RyaW5nLHN0cmluZz4pOnN0cmluZ31gIC0gQSBmdW5jdGlvbiB1c2VkIHRvXG4gICAgICogICAgICBwcmVwYXJlIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgcmVxdWVzdCBwYXJhbWV0ZXJzIChzcGVjaWZpZWQgYXMgYW4gb2JqZWN0KS5cbiAgICAgKiAgICAgIElmIHNwZWNpZmllZCBhcyBzdHJpbmcsIGl0IGlzIGludGVycHJldGVkIGFzIGZ1bmN0aW9uIHJlZ2lzdGVyZWQgd2l0aCB0aGVcbiAgICAgKiAgICAgIHtAbGluayAkaW5qZWN0b3IgJGluamVjdG9yfSwgd2hpY2ggbWVhbnMgeW91IGNhbiBjcmVhdGUgeW91ciBvd24gc2VyaWFsaXplclxuICAgICAqICAgICAgYnkgcmVnaXN0ZXJpbmcgaXQgYXMgYSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlIHNlcnZpY2V9LlxuICAgICAqICAgICAgVGhlIGRlZmF1bHQgc2VyaWFsaXplciBpcyB0aGUge0BsaW5rICRodHRwUGFyYW1TZXJpYWxpemVyICRodHRwUGFyYW1TZXJpYWxpemVyfTtcbiAgICAgKiAgICAgIGFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHRoZSB7QGxpbmsgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2UgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2V9XG4gICAgICogICAgLSAqKmNhY2hlKiog4oCTIGB7Ym9vbGVhbnxPYmplY3R9YCDigJMgQSBib29sZWFuIHZhbHVlIG9yIG9iamVjdCBjcmVhdGVkIHdpdGhcbiAgICAgKiAgICAgIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5IGAkY2FjaGVGYWN0b3J5YH0gdG8gZW5hYmxlIG9yIGRpc2FibGUgY2FjaGluZyBvZiB0aGUgSFRUUCByZXNwb25zZS5cbiAgICAgKiAgICAgIFNlZSB7QGxpbmsgJGh0dHAjY2FjaGluZyAkaHR0cCBDYWNoaW5nfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKiAgICAtICoqdGltZW91dCoqIOKAkyBge251bWJlcnxQcm9taXNlfWAg4oCTIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzLCBvciB7QGxpbmsgbmcuJHEgcHJvbWlzZX1cbiAgICAgKiAgICAgIHRoYXQgc2hvdWxkIGFib3J0IHRoZSByZXF1ZXN0IHdoZW4gcmVzb2x2ZWQuXG4gICAgICpcbiAgICAgKiAgICAgIEEgbnVtZXJpY2FsIHRpbWVvdXQgb3IgYSBwcm9taXNlIHJldHVybmVkIGZyb20ge0BsaW5rIG5nLiR0aW1lb3V0ICR0aW1lb3V0fSwgd2lsbCBzZXRcbiAgICAgKiAgICAgIHRoZSBgeGhyU3RhdHVzYCBpbiB0aGUge0BsaW5rICRodHRwIyRodHRwLXJldHVybnMgcmVzcG9uc2V9IHRvIFwidGltZW91dFwiLCBhbmQgYW55IG90aGVyXG4gICAgICogICAgICByZXNvbHZlZCBwcm9taXNlIHdpbGwgc2V0IGl0IHRvIFwiYWJvcnRcIiwgZm9sbG93aW5nIHN0YW5kYXJkIFhNTEh0dHBSZXF1ZXN0IGJlaGF2aW9yLlxuICAgICAqXG4gICAgICogICAgLSAqKndpdGhDcmVkZW50aWFscyoqIC0gYHtib29sZWFufWAgLSB3aGV0aGVyIHRvIHNldCB0aGUgYHdpdGhDcmVkZW50aWFsc2AgZmxhZyBvbiB0aGVcbiAgICAgKiAgICAgIFhIUiBvYmplY3QuIFNlZSBbcmVxdWVzdHMgd2l0aCBjcmVkZW50aWFsc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSFRUUC9BY2Nlc3NfY29udHJvbF9DT1JTI1JlcXVlc3RzX3dpdGhfY3JlZGVudGlhbHMpXG4gICAgICogICAgICBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKiAgICAtICoqcmVzcG9uc2VUeXBlKiogLSBge3N0cmluZ31gIC0gc2VlXG4gICAgICogICAgICBbWE1MSHR0cFJlcXVlc3QucmVzcG9uc2VUeXBlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvWE1MSHR0cFJlcXVlc3QjeG1saHR0cHJlcXVlc3QtcmVzcG9uc2V0eXBlKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gQSB7QGxpbmsgbmcuJHEgYFByb21pc2V9YCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgKHJlcXVlc3Qgc3VjY2VzcylcbiAgICAgKiAgIG9yIHJlamVjdGVkIChyZXF1ZXN0IGZhaWx1cmUpIHdpdGggYSByZXNwb25zZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiAgIFRoZSByZXNwb25zZSBvYmplY3QgaGFzIHRoZXNlIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBUaGUgcmVzcG9uc2UgYm9keSB0cmFuc2Zvcm1lZCB3aXRoXG4gICAgICogICAgIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb25zLlxuICAgICAqICAgLSAqKnN0YXR1cyoqIOKAkyBge251bWJlcn1gIOKAkyBIVFRQIHN0YXR1cyBjb2RlIG9mIHRoZSByZXNwb25zZS5cbiAgICAgKiAgIC0gKipoZWFkZXJzKiog4oCTIGB7ZnVuY3Rpb24oW2hlYWRlck5hbWVdKX1gIOKAkyBIZWFkZXIgZ2V0dGVyIGZ1bmN0aW9uLlxuICAgICAqICAgLSAqKmNvbmZpZyoqIOKAkyBge09iamVjdH1gIOKAkyBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgdGhhdCB3YXMgdXNlZFxuICAgICAqICAgICB0byBnZW5lcmF0ZSB0aGUgcmVxdWVzdC5cbiAgICAgKiAgIC0gKipzdGF0dXNUZXh0Kiog4oCTIGB7c3RyaW5nfWAg4oCTIEhUVFAgc3RhdHVzIHRleHQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAqICAgLSAqKnhoclN0YXR1cyoqIOKAkyBge3N0cmluZ31gIOKAkyBTdGF0dXMgb2YgdGhlIFhNTEh0dHBSZXF1ZXN0XG4gICAgICogICAgIChgY29tcGxldGVgLCBgZXJyb3JgLCBgdGltZW91dGAgb3IgYGFib3J0YCkuXG4gICAgICpcbiAgICAgKlxuICAgICAqICAgQSByZXNwb25zZSBzdGF0dXMgY29kZSBiZXR3ZWVuIDIwMCBhbmQgMjk5IGlzIGNvbnNpZGVyZWQgYSBzdWNjZXNzIHN0YXR1c1xuICAgICAqICAgYW5kIHdpbGwgcmVzdWx0IGluIHRoZSBzdWNjZXNzIGNhbGxiYWNrIGJlaW5nIGNhbGxlZC4gQW55IHJlc3BvbnNlIHN0YXR1c1xuICAgICAqICAgY29kZSBvdXRzaWRlIG9mIHRoYXQgcmFuZ2UgaXMgY29uc2lkZXJlZCBhbiBlcnJvciBzdGF0dXMgYW5kIHdpbGwgcmVzdWx0XG4gICAgICogICBpbiB0aGUgZXJyb3IgY2FsbGJhY2sgYmVpbmcgY2FsbGVkLlxuICAgICAqICAgQWxzbywgc3RhdHVzIGNvZGVzIGxlc3MgdGhhbiAtMSBhcmUgbm9ybWFsaXplZCB0byB6ZXJvLiAtMSB1c3VhbGx5IG1lYW5zXG4gICAgICogICB0aGUgcmVxdWVzdCB3YXMgYWJvcnRlZCwgZS5nLiB1c2luZyBhIGBjb25maWcudGltZW91dGAuIE1vcmUgaW5mb3JtYXRpb25cbiAgICAgKiAgIGFib3V0IHRoZSBzdGF0dXMgbWlnaHQgYmUgYXZhaWxhYmxlIGluIHRoZSBgeGhyU3RhdHVzYCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqICAgTm90ZSB0aGF0IGlmIHRoZSByZXNwb25zZSBpcyBhIHJlZGlyZWN0LCBYTUxIdHRwUmVxdWVzdCB3aWxsIHRyYW5zcGFyZW50bHlcbiAgICAgKiAgIGZvbGxvdyBpdCwgbWVhbmluZyB0aGF0IHRoZSBvdXRjb21lIChzdWNjZXNzIG9yIGVycm9yKSB3aWxsIGJlIGRldGVybWluZWRcbiAgICAgKiAgIGJ5IHRoZSBmaW5hbCByZXNwb25zZSBzdGF0dXMgY29kZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtBcnJheS48T2JqZWN0Pn0gcGVuZGluZ1JlcXVlc3RzIEFycmF5IG9mIGNvbmZpZyBvYmplY3RzIGZvciBjdXJyZW50bHkgcGVuZGluZ1xuICAgICAqICAgcmVxdWVzdHMuIFRoaXMgaXMgcHJpbWFyaWx5IG1lYW50IHRvIGJlIHVzZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cbiAgICAgKlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbjxleGFtcGxlIG1vZHVsZT1cImh0dHBFeGFtcGxlXCIgbmFtZT1cImh0dHAtc2VydmljZVwiPlxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgPGRpdiBuZy1jb250cm9sbGVyPVwiRmV0Y2hDb250cm9sbGVyXCI+XG4gICAgPHNlbGVjdCBuZy1tb2RlbD1cIm1ldGhvZFwiIGFyaWEtbGFiZWw9XCJSZXF1ZXN0IG1ldGhvZFwiPlxuICAgICAgPG9wdGlvbj5HRVQ8L29wdGlvbj5cbiAgICAgIDxvcHRpb24+SlNPTlA8L29wdGlvbj5cbiAgICA8L3NlbGVjdD5cbiAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVybFwiIHNpemU9XCI4MFwiIGFyaWEtbGFiZWw9XCJVUkxcIiAvPlxuICAgIDxidXR0b24gaWQ9XCJmZXRjaGJ0blwiIG5nLWNsaWNrPVwiZmV0Y2goKVwiPmZldGNoPC9idXR0b24+PGJyPlxuICAgIDxidXR0b24gaWQ9XCJzYW1wbGVnZXRidG5cIiBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdHRVQnLCAnaHR0cC1oZWxsby5odG1sJylcIj5TYW1wbGUgR0VUPC9idXR0b24+XG4gICAgPGJ1dHRvbiBpZD1cInNhbXBsZWpzb25wYnRuXCJcbiAgICAgIG5nLWNsaWNrPVwidXBkYXRlTW9kZWwoJ0pTT05QJyxcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vYW5ndWxhcmpzLm9yZy9ncmVldC5waHA/bmFtZT1TdXBlciUyMEhlcm8nKVwiPlxuICAgICAgU2FtcGxlIEpTT05QXG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBpZD1cImludmFsaWRqc29ucGJ0blwiXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsICdodHRwczovL2FuZ3VsYXJqcy5vcmcvZG9lc250ZXhpc3QnKVwiPlxuICAgICAgICBJbnZhbGlkIEpTT05QXG4gICAgICA8L2J1dHRvbj5cbiAgICA8cHJlPmh0dHAgc3RhdHVzIGNvZGU6IHt7c3RhdHVzfX08L3ByZT5cbiAgICA8cHJlPmh0dHAgcmVzcG9uc2UgZGF0YToge3tkYXRhfX08L3ByZT5cbiAgPC9kaXY+XG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gIGFuZ3VsYXIubW9kdWxlKCdodHRwRXhhbXBsZScsIFtdKVxuICAgIC5jb25maWcoWyckc2NlRGVsZWdhdGVQcm92aWRlcicsIGZ1bmN0aW9uKCRzY2VEZWxlZ2F0ZVByb3ZpZGVyKSB7XG4gICAgICAvLyBXZSBtdXN0IHdoaXRlbGlzdCB0aGUgSlNPTlAgZW5kcG9pbnQgdGhhdCB3ZSBhcmUgdXNpbmcgdG8gc2hvdyB0aGF0IHdlIHRydXN0IGl0XG4gICAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdChbXG4gICAgICAgICdzZWxmJyxcbiAgICAgICAgJ2h0dHBzOi8vYW5ndWxhcmpzLm9yZy8qKidcbiAgICAgIF0pO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdGZXRjaENvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsXG4gICAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAkc2NvcGUubWV0aG9kID0gJ0dFVCc7XG4gICAgICAgICRzY29wZS51cmwgPSAnaHR0cC1oZWxsby5odG1sJztcblxuICAgICAgICAkc2NvcGUuZmV0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuY29kZSA9IG51bGw7XG4gICAgICAgICAgJHNjb3BlLnJlc3BvbnNlID0gbnVsbDtcblxuICAgICAgICAgICRodHRwKHttZXRob2Q6ICRzY29wZS5tZXRob2QsIHVybDogJHNjb3BlLnVybCwgY2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuXG4gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gcmVzcG9uc2UuZGF0YSB8fCAnUmVxdWVzdCBmYWlsZWQnO1xuICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsKSB7XG4gICAgICAgICAgJHNjb3BlLm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgICAkc2NvcGUudXJsID0gdXJsO1xuICAgICAgICB9O1xuICAgICAgfV0pO1xuPC9maWxlPlxuPGZpbGUgbmFtZT1cImh0dHAtaGVsbG8uaHRtbFwiPlxuICBIZWxsbywgJGh0dHAhXG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gIHZhciBzdGF0dXMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3N0YXR1cycpKTtcbiAgdmFyIGRhdGEgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2RhdGEnKSk7XG4gIHZhciBmZXRjaEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2ZldGNoYnRuJykpO1xuICB2YXIgc2FtcGxlR2V0QnRuID0gZWxlbWVudChieS5pZCgnc2FtcGxlZ2V0YnRuJykpO1xuICB2YXIgaW52YWxpZEpzb25wQnRuID0gZWxlbWVudChieS5pZCgnaW52YWxpZGpzb25wYnRuJykpO1xuXG4gIGl0KCdzaG91bGQgbWFrZSBhbiB4aHIgR0VUIHJlcXVlc3QnLCBmdW5jdGlvbigpIHtcbiAgICBzYW1wbGVHZXRCdG4uY2xpY2soKTtcbiAgICBmZXRjaEJ0bi5jbGljaygpO1xuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcyMDAnKTtcbiAgICBleHBlY3QoZGF0YS5nZXRUZXh0KCkpLnRvTWF0Y2goL0hlbGxvLCBcXCRodHRwIS8pO1xuICB9KTtcblxuLy8gQ29tbWVudGVkIG91dCBkdWUgdG8gZmxha2VzLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTE4NVxuLy8gaXQoJ3Nob3VsZCBtYWtlIGEgSlNPTlAgcmVxdWVzdCB0byBhbmd1bGFyanMub3JnJywgZnVuY3Rpb24oKSB7XG4vLyAgIHZhciBzYW1wbGVKc29ucEJ0biA9IGVsZW1lbnQoYnkuaWQoJ3NhbXBsZWpzb25wYnRuJykpO1xuLy8gICBzYW1wbGVKc29ucEJ0bi5jbGljaygpO1xuLy8gICBmZXRjaEJ0bi5jbGljaygpO1xuLy8gICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMjAwJyk7XG4vLyAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgvU3VwZXIgSGVybyEvKTtcbi8vIH0pO1xuXG4gIGl0KCdzaG91bGQgbWFrZSBKU09OUCByZXF1ZXN0IHRvIGludmFsaWQgVVJMIGFuZCBpbnZva2UgdGhlIGVycm9yIGhhbmRsZXInLFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgaW52YWxpZEpzb25wQnRuLmNsaWNrKCk7XG4gICAgZmV0Y2hCdG4uY2xpY2soKTtcbiAgICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xuICAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgnUmVxdWVzdCBmYWlsZWQnKTtcbiAgfSk7XG48L2ZpbGU+XG48L2V4YW1wbGU+XG4gICAgICovXG4gICAgZnVuY3Rpb24gJGh0dHAocmVxdWVzdENvbmZpZykge1xuXG4gICAgICBpZiAoIWlzT2JqZWN0KHJlcXVlc3RDb25maWcpKSB7XG4gICAgICAgIHRocm93IG1pbkVycignJGh0dHAnKSgnYmFkcmVxJywgJ0h0dHAgcmVxdWVzdCBjb25maWd1cmF0aW9uIG11c3QgYmUgYW4gb2JqZWN0LiAgUmVjZWl2ZWQ6IHswfScsIHJlcXVlc3RDb25maWcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzU3RyaW5nKCRzY2UudmFsdWVPZihyZXF1ZXN0Q29uZmlnLnVybCkpKSB7XG4gICAgICAgIHRocm93IG1pbkVycignJGh0dHAnKSgnYmFkcmVxJywgJ0h0dHAgcmVxdWVzdCBjb25maWd1cmF0aW9uIHVybCBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgJHNjZSB0cnVzdGVkIG9iamVjdC4gIFJlY2VpdmVkOiB7MH0nLCByZXF1ZXN0Q29uZmlnLnVybCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb25maWcgPSBleHRlbmQoe1xuICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0LFxuICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZTogZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2UsXG4gICAgICAgIHBhcmFtU2VyaWFsaXplcjogZGVmYXVsdHMucGFyYW1TZXJpYWxpemVyLFxuICAgICAgICBqc29ucENhbGxiYWNrUGFyYW06IGRlZmF1bHRzLmpzb25wQ2FsbGJhY2tQYXJhbVxuICAgICAgfSwgcmVxdWVzdENvbmZpZyk7XG5cbiAgICAgIGNvbmZpZy5oZWFkZXJzID0gbWVyZ2VIZWFkZXJzKHJlcXVlc3RDb25maWcpO1xuICAgICAgY29uZmlnLm1ldGhvZCA9IHVwcGVyY2FzZShjb25maWcubWV0aG9kKTtcbiAgICAgIGNvbmZpZy5wYXJhbVNlcmlhbGl6ZXIgPSBpc1N0cmluZyhjb25maWcucGFyYW1TZXJpYWxpemVyKSA/XG4gICAgICAgICAgJGluamVjdG9yLmdldChjb25maWcucGFyYW1TZXJpYWxpemVyKSA6IGNvbmZpZy5wYXJhbVNlcmlhbGl6ZXI7XG5cbiAgICAgICRicm93c2VyLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtcblxuICAgICAgdmFyIHJlcXVlc3RJbnRlcmNlcHRvcnMgPSBbXTtcbiAgICAgIHZhciByZXNwb25zZUludGVyY2VwdG9ycyA9IFtdO1xuICAgICAgdmFyIHByb21pc2UgPSAkcS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgICAgIC8vIGFwcGx5IGludGVyY2VwdG9yc1xuICAgICAgZm9yRWFjaChyZXZlcnNlZEludGVyY2VwdG9ycywgZnVuY3Rpb24oaW50ZXJjZXB0b3IpIHtcbiAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlcXVlc3QgfHwgaW50ZXJjZXB0b3IucmVxdWVzdEVycm9yKSB7XG4gICAgICAgICAgcmVxdWVzdEludGVyY2VwdG9ycy51bnNoaWZ0KGludGVyY2VwdG9yLnJlcXVlc3QsIGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlc3BvbnNlIHx8IGludGVyY2VwdG9yLnJlc3BvbnNlRXJyb3IpIHtcbiAgICAgICAgICByZXNwb25zZUludGVyY2VwdG9ycy5wdXNoKGludGVyY2VwdG9yLnJlc3BvbnNlLCBpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHByb21pc2UgPSBjaGFpbkludGVyY2VwdG9ycyhwcm9taXNlLCByZXF1ZXN0SW50ZXJjZXB0b3JzKTtcbiAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oc2VydmVyUmVxdWVzdCk7XG4gICAgICBwcm9taXNlID0gY2hhaW5JbnRlcmNlcHRvcnMocHJvbWlzZSwgcmVzcG9uc2VJbnRlcmNlcHRvcnMpO1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UuZmluYWxseShjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCk7XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuXG5cbiAgICAgIGZ1bmN0aW9uIGNoYWluSW50ZXJjZXB0b3JzKHByb21pc2UsIGludGVyY2VwdG9ycykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnRlcmNlcHRvcnMubGVuZ3RoOyBpIDwgaWk7KSB7XG4gICAgICAgICAgdmFyIHRoZW5GbiA9IGludGVyY2VwdG9yc1tpKytdO1xuICAgICAgICAgIHZhciByZWplY3RGbiA9IGludGVyY2VwdG9yc1tpKytdO1xuXG4gICAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbih0aGVuRm4sIHJlamVjdEZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyY2VwdG9ycy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCgpIHtcbiAgICAgICAgJGJyb3dzZXIuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZXhlY3V0ZUhlYWRlckZucyhoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgdmFyIGhlYWRlckNvbnRlbnQsIHByb2Nlc3NlZEhlYWRlcnMgPSB7fTtcblxuICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKGhlYWRlckZuLCBoZWFkZXIpIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihoZWFkZXJGbikpIHtcbiAgICAgICAgICAgIGhlYWRlckNvbnRlbnQgPSBoZWFkZXJGbihjb25maWcpO1xuICAgICAgICAgICAgaWYgKGhlYWRlckNvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJGbjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWRIZWFkZXJzO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBtZXJnZUhlYWRlcnMoY29uZmlnKSB7XG4gICAgICAgIHZhciBkZWZIZWFkZXJzID0gZGVmYXVsdHMuaGVhZGVycyxcbiAgICAgICAgICAgIHJlcUhlYWRlcnMgPSBleHRlbmQoe30sIGNvbmZpZy5oZWFkZXJzKSxcbiAgICAgICAgICAgIGRlZkhlYWRlck5hbWUsIGxvd2VyY2FzZURlZkhlYWRlck5hbWUsIHJlcUhlYWRlck5hbWU7XG5cbiAgICAgICAgZGVmSGVhZGVycyA9IGV4dGVuZCh7fSwgZGVmSGVhZGVycy5jb21tb24sIGRlZkhlYWRlcnNbbG93ZXJjYXNlKGNvbmZpZy5tZXRob2QpXSk7XG5cbiAgICAgICAgLy8gdXNpbmcgZm9yLWluIGluc3RlYWQgb2YgZm9yRWFjaCB0byBhdm9pZCB1bm5lY2Vzc2FyeSBpdGVyYXRpb24gYWZ0ZXIgaGVhZGVyIGhhcyBiZWVuIGZvdW5kXG4gICAgICAgIGRlZmF1bHRIZWFkZXJzSXRlcmF0aW9uOlxuICAgICAgICBmb3IgKGRlZkhlYWRlck5hbWUgaW4gZGVmSGVhZGVycykge1xuICAgICAgICAgIGxvd2VyY2FzZURlZkhlYWRlck5hbWUgPSBsb3dlcmNhc2UoZGVmSGVhZGVyTmFtZSk7XG5cbiAgICAgICAgICBmb3IgKHJlcUhlYWRlck5hbWUgaW4gcmVxSGVhZGVycykge1xuICAgICAgICAgICAgaWYgKGxvd2VyY2FzZShyZXFIZWFkZXJOYW1lKSA9PT0gbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgICBjb250aW51ZSBkZWZhdWx0SGVhZGVyc0l0ZXJhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXFIZWFkZXJzW2RlZkhlYWRlck5hbWVdID0gZGVmSGVhZGVyc1tkZWZIZWFkZXJOYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGV4ZWN1dGUgaWYgaGVhZGVyIHZhbHVlIGlzIGEgZnVuY3Rpb24gZm9yIG1lcmdlZCBoZWFkZXJzXG4gICAgICAgIHJldHVybiBleGVjdXRlSGVhZGVyRm5zKHJlcUhlYWRlcnMsIHNoYWxsb3dDb3B5KGNvbmZpZykpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXJ2ZXJSZXF1ZXN0KGNvbmZpZykge1xuICAgICAgICB2YXIgaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xuICAgICAgICB2YXIgcmVxRGF0YSA9IHRyYW5zZm9ybURhdGEoY29uZmlnLmRhdGEsIGhlYWRlcnNHZXR0ZXIoaGVhZGVycyksIHVuZGVmaW5lZCwgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3QpO1xuXG4gICAgICAgIC8vIHN0cmlwIGNvbnRlbnQtdHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocmVxRGF0YSkpIHtcbiAgICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChsb3dlcmNhc2UoaGVhZGVyKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbaGVhZGVyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSAmJiAhaXNVbmRlZmluZWQoZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgPSBkZWZhdWx0cy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZW5kIHJlcXVlc3RcbiAgICAgICAgcmV0dXJuIHNlbmRSZXEoY29uZmlnLCByZXFEYXRhKS50aGVuKHRyYW5zZm9ybVJlc3BvbnNlLCB0cmFuc2Zvcm1SZXNwb25zZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIC8vIG1ha2UgYSBjb3B5IHNpbmNlIHRoZSByZXNwb25zZSBtdXN0IGJlIGNhY2hlYWJsZVxuICAgICAgICB2YXIgcmVzcCA9IGV4dGVuZCh7fSwgcmVzcG9uc2UpO1xuICAgICAgICByZXNwLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpO1xuICAgICAgICByZXR1cm4gKGlzU3VjY2VzcyhyZXNwb25zZS5zdGF0dXMpKVxuICAgICAgICAgID8gcmVzcFxuICAgICAgICAgIDogJHEucmVqZWN0KHJlc3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgICRodHRwLnBlbmRpbmdSZXF1ZXN0cyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2dldFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYEdFVGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRPYmplY3R9IHVybCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhbiBvYmplY3QgY3JlYXRlZCBieSBhIGNhbGwgdG8gYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLWFyZ3VtZW50cyBgJGh0dHAoKWAgYXJndW1lbnRzfS5cbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9ICBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIHdpdGggYSByZXNwb25zZSBvYmplY3QuXG4gICAgICogU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1yZXR1cm5zIGAkaHR0cCgpYCByZXR1cm4gdmFsdWV9LlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2RlbGV0ZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYERFTEVURWAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRPYmplY3R9IHVybCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhbiBvYmplY3QgY3JlYXRlZCBieSBhIGNhbGwgdG8gYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLWFyZ3VtZW50cyBgJGh0dHAoKWAgYXJndW1lbnRzfS5cbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9ICBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIHdpdGggYSByZXNwb25zZSBvYmplY3QuXG4gICAgICogU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1yZXR1cm5zIGAkaHR0cCgpYCByZXR1cm4gdmFsdWV9LlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2hlYWRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBIRUFEYCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8VHJ1c3RlZE9iamVjdH0gdXJsIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyBiZWluZyByZXF1ZXN0ZWQ7XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGFuIG9iamVjdCBjcmVhdGVkIGJ5IGEgY2FsbCB0byBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKWAuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QuIFNlZSB7QGxpbmsgbmcuJGh0dHAjJGh0dHAtYXJndW1lbnRzIGAkaHR0cCgpYCBhcmd1bWVudHN9LlxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gIEEgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgd2l0aCBhIHJlc3BvbnNlIG9iamVjdC5cbiAgICAgKiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLXJldHVybnMgYCRodHRwKClgIHJldHVybiB2YWx1ZX0uXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjanNvbnBcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBKU09OUGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCwgc2luY2UgSlNPTlAgcmVxdWVzdHMgYXJlIHNlbnNpdGl2ZSBiZWNhdXNlIHRoZSByZXNwb25zZSBpcyBnaXZlbiBmdWxsIGFjY2VzcyB0byB0aGUgYnJvd3NlcixcbiAgICAgKiB0aGUgdXJsIG11c3QgYmUgZGVjbGFyZWQsIHZpYSB7QGxpbmsgJHNjZX0gYXMgYSB0cnVzdGVkIHJlc291cmNlIFVSTC5cbiAgICAgKiBZb3UgY2FuIHRydXN0IGEgVVJMIGJ5IGFkZGluZyBpdCB0byB0aGUgd2hpdGVsaXN0IHZpYVxuICAgICAqIHtAbGluayAkc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCAgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0YH0gb3JcbiAgICAgKiBieSBleHBsaWNpdGx5IHRydXN0aW5nIHRoZSBVUkwgdmlhIHtAbGluayAkc2NlI3RydXN0QXNSZXNvdXJjZVVybCBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKWB9LlxuICAgICAqXG4gICAgICogWW91IHNob3VsZCBhdm9pZCBnZW5lcmF0aW5nIHRoZSBVUkwgZm9yIHRoZSBKU09OUCByZXF1ZXN0IGZyb20gdXNlciBwcm92aWRlZCBkYXRhLlxuICAgICAqIFByb3ZpZGUgYWRkaXRpb25hbCBxdWVyeSBwYXJhbWV0ZXJzIHZpYSBgcGFyYW1zYCBwcm9wZXJ0eSBvZiB0aGUgYGNvbmZpZ2AgcGFyYW1ldGVyLCByYXRoZXIgdGhhblxuICAgICAqIG1vZGlmeWluZyB0aGUgVVJMIGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEpTT05QIHJlcXVlc3RzIG11c3Qgc3BlY2lmeSBhIGNhbGxiYWNrIHRvIGJlIHVzZWQgaW4gdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci4gVGhpcyBjYWxsYmFja1xuICAgICAqIGlzIHBhc3NlZCBhcyBhIHF1ZXJ5IHBhcmFtZXRlciBpbiB0aGUgcmVxdWVzdC4gWW91IG11c3Qgc3BlY2lmeSB0aGUgbmFtZSBvZiB0aGlzIHBhcmFtZXRlciBieVxuICAgICAqIHNldHRpbmcgdGhlIGBqc29ucENhbGxiYWNrUGFyYW1gIHByb3BlcnR5IG9uIHRoZSByZXF1ZXN0IGNvbmZpZyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiAkaHR0cC5qc29ucCgnc29tZS90cnVzdGVkL3VybCcsIHtqc29ucENhbGxiYWNrUGFyYW06ICdjYWxsYmFjayd9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIHNwZWNpZnkgYSBkZWZhdWx0IGNhbGxiYWNrIHBhcmFtZXRlciBuYW1lIGluIGAkaHR0cC5kZWZhdWx0cy5qc29ucENhbGxiYWNrUGFyYW1gLlxuICAgICAqIEluaXRpYWxseSB0aGlzIGlzIHNldCB0byBgJ2NhbGxiYWNrJ2AuXG4gICAgICpcbiAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gICAgICogWW91IGNhbiBubyBsb25nZXIgdXNlIHRoZSBgSlNPTl9DQUxMQkFDS2Agc3RyaW5nIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHNwZWNpZnlpbmcgd2hlcmUgdGhlIGNhbGxiYWNrXG4gICAgICogcGFyYW1ldGVyIHZhbHVlIHNob3VsZCBnby5cbiAgICAgKiA8L2Rpdj5cbiAgICAgKlxuICAgICAqIElmIHlvdSB3b3VsZCBsaWtlIHRvIGN1c3RvbWlzZSB3aGVyZSBhbmQgaG93IHRoZSBjYWxsYmFja3MgYXJlIHN0b3JlZCB0aGVuIHRyeSBvdmVycmlkaW5nXG4gICAgICogb3IgZGVjb3JhdGluZyB0aGUge0BsaW5rICRqc29ucENhbGxiYWNrc30gc2VydmljZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRPYmplY3R9IHVybCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhbiBvYmplY3QgY3JlYXRlZCBieSBhIGNhbGwgdG8gYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLWFyZ3VtZW50cyBgJGh0dHAoKWAgYXJndW1lbnRzfS5cbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9ICBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIHdpdGggYSByZXNwb25zZSBvYmplY3QuXG4gICAgICogU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1yZXR1cm5zIGAkaHR0cCgpYCByZXR1cm4gdmFsdWV9LlxuICAgICAqL1xuICAgIGNyZWF0ZVNob3J0TWV0aG9kcygnZ2V0JywgJ2RlbGV0ZScsICdoZWFkJywgJ2pzb25wJyk7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjcG9zdFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBPU1RgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBSZXF1ZXN0IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1hcmd1bWVudHMgYCRodHRwKClgIGFyZ3VtZW50c30uXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSAgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCB3aXRoIGEgcmVzcG9uc2Ugb2JqZWN0LlxuICAgICAqIFNlZSB7QGxpbmsgbmcuJGh0dHAjJGh0dHAtcmV0dXJucyBgJGh0dHAoKWAgcmV0dXJuIHZhbHVlfS5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNwdXRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBQVVRgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBSZXF1ZXN0IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1hcmd1bWVudHMgYCRodHRwKClgIGFyZ3VtZW50c30uXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSAgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCB3aXRoIGEgcmVzcG9uc2Ugb2JqZWN0LlxuICAgICAqIFNlZSB7QGxpbmsgbmcuJGh0dHAjJGh0dHAtcmV0dXJucyBgJGh0dHAoKWAgcmV0dXJuIHZhbHVlfS5cbiAgICAgKi9cblxuICAgICAvKipcbiAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgKiBAbmFtZSAkaHR0cCNwYXRjaFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBBVENIYCByZXF1ZXN0LlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XG4gICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLWFyZ3VtZW50cyBgJGh0dHAoKWAgYXJndW1lbnRzfS5cbiAgICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSAgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCB3aXRoIGEgcmVzcG9uc2Ugb2JqZWN0LlxuICAgICAgKiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLXJldHVybnMgYCRodHRwKClgIHJldHVybiB2YWx1ZX0uXG4gICAgICAqL1xuICAgIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKCdwb3N0JywgJ3B1dCcsICdwYXRjaCcpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAgICogQG5hbWUgJGh0dHAjZGVmYXVsdHNcbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJ1bnRpbWUgZXF1aXZhbGVudCBvZiB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHNgIHByb3BlcnR5LiBBbGxvd3MgY29uZmlndXJhdGlvbiBvZlxuICAgICAgICAgKiBkZWZhdWx0IGhlYWRlcnMsIHdpdGhDcmVkZW50aWFscyBhcyB3ZWxsIGFzIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogU2VlIFwiU2V0dGluZyBIVFRQIEhlYWRlcnNcIiBhbmQgXCJUcmFuc2Zvcm1pbmcgUmVxdWVzdHMgYW5kIFJlc3BvbnNlc1wiIHNlY3Rpb25zIGFib3ZlLlxuICAgICAgICAgKi9cbiAgICAkaHR0cC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuXG5cbiAgICByZXR1cm4gJGh0dHA7XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kcyhuYW1lcykge1xuICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgJGh0dHBbbmFtZV0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgICAgICAgIHJldHVybiAkaHR0cChleHRlbmQoe30sIGNvbmZpZyB8fCB7fSwge1xuICAgICAgICAgICAgbWV0aG9kOiBuYW1lLFxuICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKG5hbWUpIHtcbiAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICRodHRwW25hbWVdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICAgICAgICByZXR1cm4gJGh0dHAoZXh0ZW5kKHt9LCBjb25maWcgfHwge30sIHtcbiAgICAgICAgICAgIG1ldGhvZDogbmFtZSxcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogTWFrZXMgdGhlIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiAhISEgQUNDRVNTRVMgQ0xPU1VSRSBWQVJTOlxuICAgICAqICRodHRwQmFja2VuZCwgZGVmYXVsdHMsICRsb2csICRyb290U2NvcGUsIGRlZmF1bHRDYWNoZSwgJGh0dHAucGVuZGluZ1JlcXVlc3RzXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2VuZFJlcShjb25maWcsIHJlcURhdGEpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCksXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UsXG4gICAgICAgICAgY2FjaGUsXG4gICAgICAgICAgY2FjaGVkUmVzcCxcbiAgICAgICAgICByZXFIZWFkZXJzID0gY29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgaXNKc29ucCA9IGxvd2VyY2FzZShjb25maWcubWV0aG9kKSA9PT0gJ2pzb25wJyxcbiAgICAgICAgICB1cmwgPSBjb25maWcudXJsO1xuXG4gICAgICBpZiAoaXNKc29ucCkge1xuICAgICAgICAvLyBKU09OUCBpcyBhIHByZXR0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHdoZXJlIHdlJ3JlIGFsbG93aW5nIGEgc2NyaXB0IHRvIGhhdmUgZnVsbCBhY2Nlc3MgdG9cbiAgICAgICAgLy8gb3VyIERPTSBhbmQgSlMgc3BhY2UuICBTbyB3ZSByZXF1aXJlIHRoYXQgdGhlIFVSTCBzYXRpc2ZpZXMgU0NFLlJFU09VUkNFX1VSTC5cbiAgICAgICAgdXJsID0gJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodXJsKTtcbiAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaW5nKHVybCkpIHtcbiAgICAgICAgLy8gSWYgaXQgaXMgbm90IGEgc3RyaW5nIHRoZW4gdGhlIFVSTCBtdXN0IGJlIGEgJHNjZSB0cnVzdGVkIG9iamVjdFxuICAgICAgICB1cmwgPSAkc2NlLnZhbHVlT2YodXJsKTtcbiAgICAgIH1cblxuICAgICAgdXJsID0gYnVpbGRVcmwodXJsLCBjb25maWcucGFyYW1TZXJpYWxpemVyKGNvbmZpZy5wYXJhbXMpKTtcblxuICAgICAgaWYgKGlzSnNvbnApIHtcbiAgICAgICAgLy8gQ2hlY2sgdGhlIHVybCBhbmQgYWRkIHRoZSBKU09OUCBjYWxsYmFjayBwbGFjZWhvbGRlclxuICAgICAgICB1cmwgPSBzYW5pdGl6ZUpzb25wQ2FsbGJhY2tQYXJhbSh1cmwsIGNvbmZpZy5qc29ucENhbGxiYWNrUGFyYW0pO1xuICAgICAgfVxuXG4gICAgICAkaHR0cC5wZW5kaW5nUmVxdWVzdHMucHVzaChjb25maWcpO1xuICAgICAgcHJvbWlzZS50aGVuKHJlbW92ZVBlbmRpbmdSZXEsIHJlbW92ZVBlbmRpbmdSZXEpO1xuXG4gICAgICBpZiAoKGNvbmZpZy5jYWNoZSB8fCBkZWZhdWx0cy5jYWNoZSkgJiYgY29uZmlnLmNhY2hlICE9PSBmYWxzZSAmJlxuICAgICAgICAgIChjb25maWcubWV0aG9kID09PSAnR0VUJyB8fCBjb25maWcubWV0aG9kID09PSAnSlNPTlAnKSkge1xuICAgICAgICBjYWNoZSA9IGlzT2JqZWN0KGNvbmZpZy5jYWNoZSkgPyBjb25maWcuY2FjaGVcbiAgICAgICAgICAgIDogaXNPYmplY3QoLyoqIEB0eXBlIHs/fSAqLyAoZGVmYXVsdHMpLmNhY2hlKVxuICAgICAgICAgICAgICA/IC8qKiBAdHlwZSB7P30gKi8gKGRlZmF1bHRzKS5jYWNoZVxuICAgICAgICAgICAgICA6IGRlZmF1bHRDYWNoZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNhY2hlZFJlc3AgPSBjYWNoZS5nZXQodXJsKTtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChjYWNoZWRSZXNwKSkge1xuICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKGNhY2hlZFJlc3ApKSB7XG4gICAgICAgICAgICAvLyBjYWNoZWQgcmVxdWVzdCBoYXMgYWxyZWFkeSBiZWVuIHNlbnQsIGJ1dCB0aGVyZSBpcyBubyByZXNwb25zZSB5ZXRcbiAgICAgICAgICAgIGNhY2hlZFJlc3AudGhlbihyZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQsIHJlc29sdmVQcm9taXNlV2l0aFJlc3VsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNlcnZpbmcgZnJvbSBjYWNoZVxuICAgICAgICAgICAgaWYgKGlzQXJyYXkoY2FjaGVkUmVzcCkpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcFsxXSwgY2FjaGVkUmVzcFswXSwgc2hhbGxvd0NvcHkoY2FjaGVkUmVzcFsyXSksIGNhY2hlZFJlc3BbM10sIGNhY2hlZFJlc3BbNF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcCwgMjAwLCB7fSwgJ09LJywgJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHB1dCB0aGUgcHJvbWlzZSBmb3IgdGhlIG5vbi10cmFuc2Zvcm1lZCByZXNwb25zZSBpbnRvIGNhY2hlIGFzIGEgcGxhY2Vob2xkZXJcbiAgICAgICAgICBjYWNoZS5wdXQodXJsLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8vIGlmIHdlIHdvbid0IGhhdmUgdGhlIHJlc3BvbnNlIGluIGNhY2hlLCBzZXQgdGhlIHhzcmYgaGVhZGVycyBhbmRcbiAgICAgIC8vIHNlbmQgdGhlIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmRcbiAgICAgIGlmIChpc1VuZGVmaW5lZChjYWNoZWRSZXNwKSkge1xuICAgICAgICB2YXIgeHNyZlZhbHVlID0gdXJsSXNBbGxvd2VkT3JpZ2luKGNvbmZpZy51cmwpXG4gICAgICAgICAgICA/ICQkY29va2llUmVhZGVyKClbY29uZmlnLnhzcmZDb29raWVOYW1lIHx8IGRlZmF1bHRzLnhzcmZDb29raWVOYW1lXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgICByZXFIZWFkZXJzWyhjb25maWcueHNyZkhlYWRlck5hbWUgfHwgZGVmYXVsdHMueHNyZkhlYWRlck5hbWUpXSA9IHhzcmZWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgICRodHRwQmFja2VuZChjb25maWcubWV0aG9kLCB1cmwsIHJlcURhdGEsIGRvbmUsIHJlcUhlYWRlcnMsIGNvbmZpZy50aW1lb3V0LFxuICAgICAgICAgICAgY29uZmlnLndpdGhDcmVkZW50aWFscywgY29uZmlnLnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgIGNyZWF0ZUFwcGx5SGFuZGxlcnMoY29uZmlnLmV2ZW50SGFuZGxlcnMpLFxuICAgICAgICAgICAgY3JlYXRlQXBwbHlIYW5kbGVycyhjb25maWcudXBsb2FkRXZlbnRIYW5kbGVycykpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlQXBwbHlIYW5kbGVycyhldmVudEhhbmRsZXJzKSB7XG4gICAgICAgIGlmIChldmVudEhhbmRsZXJzKSB7XG4gICAgICAgICAgdmFyIGFwcGx5SGFuZGxlcnMgPSB7fTtcbiAgICAgICAgICBmb3JFYWNoKGV2ZW50SGFuZGxlcnMsIGZ1bmN0aW9uKGV2ZW50SGFuZGxlciwga2V5KSB7XG4gICAgICAgICAgICBhcHBseUhhbmRsZXJzW2tleV0gPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICBpZiAodXNlQXBwbHlBc3luYykge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5QXN5bmMoY2FsbEV2ZW50SGFuZGxlcik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgICAgICAgICAgY2FsbEV2ZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGNhbGxFdmVudEhhbmRsZXIpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsbEV2ZW50SGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXIoZXZlbnQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBhcHBseUhhbmRsZXJzO1xuICAgICAgICB9XG4gICAgICB9XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBDYWxsYmFjayByZWdpc3RlcmVkIHRvICRodHRwQmFja2VuZCgpOlxuICAgICAgICogIC0gY2FjaGVzIHRoZSByZXNwb25zZSBpZiBkZXNpcmVkXG4gICAgICAgKiAgLSByZXNvbHZlcyB0aGUgcmF3ICRodHRwIHByb21pc2VcbiAgICAgICAqICAtIGNhbGxzICRhcHBseVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBkb25lKHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cykge1xuICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICBpZiAoaXNTdWNjZXNzKHN0YXR1cykpIHtcbiAgICAgICAgICAgIGNhY2hlLnB1dCh1cmwsIFtzdGF0dXMsIHJlc3BvbnNlLCBwYXJzZUhlYWRlcnMoaGVhZGVyc1N0cmluZyksIHN0YXR1c1RleHQsIHhoclN0YXR1c10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgcHJvbWlzZSBmcm9tIHRoZSBjYWNoZVxuICAgICAgICAgICAgY2FjaGUucmVtb3ZlKHVybCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUh0dHBQcm9taXNlKCkge1xuICAgICAgICAgIHJlc29sdmVQcm9taXNlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQXBwbHlBc3luYykge1xuICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5QXN5bmMocmVzb2x2ZUh0dHBQcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlSHR0cFByb21pc2UoKTtcbiAgICAgICAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogUmVzb2x2ZXMgdGhlIHJhdyAkaHR0cCBwcm9taXNlLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzLCBzdGF0dXNUZXh0LCB4aHJTdGF0dXMpIHtcbiAgICAgICAgLy9zdGF0dXM6IEhUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUsIDAsIC0xIChhYm9ydGVkIGJ5IHRpbWVvdXQgLyBwcm9taXNlKVxuICAgICAgICBzdGF0dXMgPSBzdGF0dXMgPj0gLTEgPyBzdGF0dXMgOiAwO1xuXG4gICAgICAgIChpc1N1Y2Nlc3Moc3RhdHVzKSA/IGRlZmVycmVkLnJlc29sdmUgOiBkZWZlcnJlZC5yZWplY3QpKHtcbiAgICAgICAgICBkYXRhOiByZXNwb25zZSxcbiAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLFxuICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgIHN0YXR1c1RleHQ6IHN0YXR1c1RleHQsXG4gICAgICAgICAgeGhyU3RhdHVzOiB4aHJTdGF0dXNcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlV2l0aFJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgcmVzb2x2ZVByb21pc2UocmVzdWx0LmRhdGEsIHJlc3VsdC5zdGF0dXMsIHNoYWxsb3dDb3B5KHJlc3VsdC5oZWFkZXJzKCkpLCByZXN1bHQuc3RhdHVzVGV4dCwgcmVzdWx0LnhoclN0YXR1cyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVBlbmRpbmdSZXEoKSB7XG4gICAgICAgIHZhciBpZHggPSAkaHR0cC5wZW5kaW5nUmVxdWVzdHMuaW5kZXhPZihjb25maWcpO1xuICAgICAgICBpZiAoaWR4ICE9PSAtMSkgJGh0dHAucGVuZGluZ1JlcXVlc3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYnVpbGRVcmwodXJsLCBzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgICBpZiAoc2VyaWFsaXplZFBhcmFtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHVybCArPSAoKHVybC5pbmRleE9mKCc/JykgPT09IC0xKSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzYW5pdGl6ZUpzb25wQ2FsbGJhY2tQYXJhbSh1cmwsIGNiS2V5KSB7XG4gICAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoJz8nKTtcbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAyKSB7XG4gICAgICAgIC8vIFRocm93IGlmIHRoZSB1cmwgY29udGFpbnMgbW9yZSB0aGFuIG9uZSBgP2AgcXVlcnkgaW5kaWNhdG9yXG4gICAgICAgIHRocm93ICRodHRwTWluRXJyKCdiYWRqc29ucCcsICdJbGxlZ2FsIHVzZSBtb3JlIHRoYW4gb25lIFwiP1wiLCBpbiB1cmwsIFwiezF9XCInLCB1cmwpO1xuICAgICAgfVxuICAgICAgdmFyIHBhcmFtcyA9IHBhcnNlS2V5VmFsdWUocGFydHNbMV0pO1xuICAgICAgZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnSlNPTl9DQUxMQkFDSycpIHtcbiAgICAgICAgICAvLyBUaHJvdyBpZiB0aGUgdXJsIGFscmVhZHkgY29udGFpbnMgYSByZWZlcmVuY2UgdG8gSlNPTl9DQUxMQkFDS1xuICAgICAgICAgIHRocm93ICRodHRwTWluRXJyKCdiYWRqc29ucCcsICdJbGxlZ2FsIHVzZSBvZiBKU09OX0NBTExCQUNLIGluIHVybCwgXCJ7MH1cIicsIHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gY2JLZXkpIHtcbiAgICAgICAgICAvLyBUaHJvdyBpZiB0aGUgY2FsbGJhY2sgcGFyYW0gd2FzIGFscmVhZHkgcHJvdmlkZWRcbiAgICAgICAgICB0aHJvdyAkaHR0cE1pbkVycignYmFkanNvbnAnLCAnSWxsZWdhbCB1c2Ugb2YgY2FsbGJhY2sgcGFyYW0sIFwiezB9XCIsIGluIHVybCwgXCJ7MX1cIicsIGNiS2V5LCB1cmwpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIGluIHRoZSBKU09OX0NBTExCQUNLIGNhbGxiYWNrIHBhcmFtIHZhbHVlXG4gICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpID09PSAtMSkgPyAnPycgOiAnJicpICsgY2JLZXkgKyAnPUpTT05fQ0FMTEJBQ0snO1xuXG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICR4aHJGYWN0b3J5XG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRmFjdG9yeSBmdW5jdGlvbiB1c2VkIHRvIGNyZWF0ZSBYTUxIdHRwUmVxdWVzdCBvYmplY3RzLlxuICpcbiAqIFJlcGxhY2Ugb3IgZGVjb3JhdGUgdGhpcyBzZXJ2aWNlIHRvIGNyZWF0ZSB5b3VyIG93biBjdXN0b20gWE1MSHR0cFJlcXVlc3Qgb2JqZWN0cy5cbiAqXG4gKiBgYGBcbiAqIGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFtdKVxuICogLmZhY3RvcnkoJyR4aHJGYWN0b3J5JywgZnVuY3Rpb24oKSB7XG4gKiAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVYaHIobWV0aG9kLCB1cmwpIHtcbiAqICAgICByZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCh7bW96U3lzdGVtOiB0cnVlfSk7XG4gKiAgIH07XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgSFRUUCBtZXRob2Qgb2YgdGhlIHJlcXVlc3QgKEdFVCwgUE9TVCwgUFVULCAuLilcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMIG9mIHRoZSByZXF1ZXN0LlxuICovXG5mdW5jdGlvbiAkeGhyRmFjdG9yeVByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlWGhyKCkge1xuICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9O1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcbiAqIEByZXF1aXJlcyAkanNvbnBDYWxsYmFja3NcbiAqIEByZXF1aXJlcyAkZG9jdW1lbnRcbiAqIEByZXF1aXJlcyAkeGhyRmFjdG9yeVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhUVFAgYmFja2VuZCB1c2VkIGJ5IHRoZSB7QGxpbmsgbmcuJGh0dHAgc2VydmljZX0gdGhhdCBkZWxlZ2F0ZXMgdG9cbiAqIFhNTEh0dHBSZXF1ZXN0IG9iamVjdCBvciBKU09OUCBhbmQgZGVhbHMgd2l0aCBicm93c2VyIGluY29tcGF0aWJpbGl0aWVzLlxuICpcbiAqIFlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byB1c2UgdGhpcyBzZXJ2aWNlIGRpcmVjdGx5LCBpbnN0ZWFkIHVzZSB0aGUgaGlnaGVyLWxldmVsIGFic3RyYWN0aW9uczpcbiAqIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gb3Ige0BsaW5rIG5nUmVzb3VyY2UuJHJlc291cmNlICRyZXNvdXJjZX0uXG4gKlxuICogRHVyaW5nIHRlc3RpbmcgdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBzd2FwcGVkIHdpdGgge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgbW9ja1xuICogJGh0dHBCYWNrZW5kfSB3aGljaCBjYW4gYmUgdHJhaW5lZCB3aXRoIHJlc3BvbnNlcy5cbiAqL1xuZnVuY3Rpb24gJEh0dHBCYWNrZW5kUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJGJyb3dzZXInLCAnJGpzb25wQ2FsbGJhY2tzJywgJyRkb2N1bWVudCcsICckeGhyRmFjdG9yeScsIGZ1bmN0aW9uKCRicm93c2VyLCAkanNvbnBDYWxsYmFja3MsICRkb2N1bWVudCwgJHhockZhY3RvcnkpIHtcbiAgICByZXR1cm4gY3JlYXRlSHR0cEJhY2tlbmQoJGJyb3dzZXIsICR4aHJGYWN0b3J5LCAkYnJvd3Nlci5kZWZlciwgJGpzb25wQ2FsbGJhY2tzLCAkZG9jdW1lbnRbMF0pO1xuICB9XTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSHR0cEJhY2tlbmQoJGJyb3dzZXIsIGNyZWF0ZVhociwgJGJyb3dzZXJEZWZlciwgY2FsbGJhY2tzLCByYXdEb2N1bWVudCkge1xuICAvLyBUT0RPKHZvanRhKTogZml4IHRoZSBzaWduYXR1cmVcbiAgcmV0dXJuIGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBwb3N0LCBjYWxsYmFjaywgaGVhZGVycywgdGltZW91dCwgd2l0aENyZWRlbnRpYWxzLCByZXNwb25zZVR5cGUsIGV2ZW50SGFuZGxlcnMsIHVwbG9hZEV2ZW50SGFuZGxlcnMpIHtcbiAgICB1cmwgPSB1cmwgfHwgJGJyb3dzZXIudXJsKCk7XG5cbiAgICBpZiAobG93ZXJjYXNlKG1ldGhvZCkgPT09ICdqc29ucCcpIHtcbiAgICAgIHZhciBjYWxsYmFja1BhdGggPSBjYWxsYmFja3MuY3JlYXRlQ2FsbGJhY2sodXJsKTtcbiAgICAgIHZhciBqc29ucERvbmUgPSBqc29ucFJlcSh1cmwsIGNhbGxiYWNrUGF0aCwgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XG4gICAgICAgIC8vIGpzb25wUmVxIG9ubHkgZXZlciBzZXRzIHN0YXR1cyB0byAyMDAgKE9LKSwgNDA0IChFUlJPUikgb3IgLTEgKFdBSVRJTkcpXG4gICAgICAgIHZhciByZXNwb25zZSA9IChzdGF0dXMgPT09IDIwMCkgJiYgY2FsbGJhY2tzLmdldFJlc3BvbnNlKGNhbGxiYWNrUGF0aCk7XG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgc3RhdHVzLCByZXNwb25zZSwgJycsIHRleHQsICdjb21wbGV0ZScpO1xuICAgICAgICBjYWxsYmFja3MucmVtb3ZlQ2FsbGJhY2soY2FsbGJhY2tQYXRoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgIHZhciB4aHIgPSBjcmVhdGVYaHIobWV0aG9kLCB1cmwpO1xuICAgICAgdmFyIGFib3J0ZWRCeVRpbWVvdXQgPSBmYWxzZTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuICAgICAgZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiByZXF1ZXN0TG9hZGVkKCkge1xuICAgICAgICB2YXIgc3RhdHVzVGV4dCA9IHhoci5zdGF0dXNUZXh0IHx8ICcnO1xuXG4gICAgICAgIC8vIHJlc3BvbnNlVGV4dCBpcyB0aGUgb2xkLXNjaG9vbCB3YXkgb2YgcmV0cmlldmluZyByZXNwb25zZSAoc3VwcG9ydGVkIGJ5IElFOSlcbiAgICAgICAgLy8gcmVzcG9uc2UvcmVzcG9uc2VUeXBlIHByb3BlcnRpZXMgd2VyZSBpbnRyb2R1Y2VkIGluIFhIUiBMZXZlbDIgc3BlYyAoc3VwcG9ydGVkIGJ5IElFMTApXG4gICAgICAgIHZhciByZXNwb25zZSA9ICgncmVzcG9uc2UnIGluIHhocikgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBJRTkgYnVnIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xNDUwKVxuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXM7XG5cbiAgICAgICAgLy8gZml4IHN0YXR1cyBjb2RlIHdoZW4gaXQgaXMgMCAoMCBzdGF0dXMgaXMgdW5kb2N1bWVudGVkKS5cbiAgICAgICAgLy8gT2NjdXJzIHdoZW4gYWNjZXNzaW5nIGZpbGUgcmVzb3VyY2VzIG9yIG9uIEFuZHJvaWQgNC4xIHN0b2NrIGJyb3dzZXJcbiAgICAgICAgLy8gd2hpbGUgcmV0cmlldmluZyBmaWxlcyBmcm9tIGFwcGxpY2F0aW9uIGNhY2hlLlxuICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgc3RhdHVzID0gcmVzcG9uc2UgPyAyMDAgOiB1cmxSZXNvbHZlKHVybCkucHJvdG9jb2wgPT09ICdmaWxlJyA/IDQwNCA6IDA7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssXG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICByZXNwb25zZSxcbiAgICAgICAgICAgIHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxcbiAgICAgICAgICAgIHN0YXR1c1RleHQsXG4gICAgICAgICAgICAnY29tcGxldGUnKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZXF1ZXN0RXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVGhlIHJlc3BvbnNlIGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly94aHIuc3BlYy53aGF0d2cub3JnLyNyZXF1ZXN0LWVycm9yLXN0ZXBzIGFuZCBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1uZXR3b3JrLWVycm9yXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgLTEsIG51bGwsIG51bGwsICcnLCAnZXJyb3InKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZXF1ZXN0QWJvcnRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIC0xLCBudWxsLCBudWxsLCAnJywgYWJvcnRlZEJ5VGltZW91dCA/ICd0aW1lb3V0JyA6ICdhYm9ydCcpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHJlcXVlc3RUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFRoZSByZXNwb25zZSBpcyBhbHdheXMgZW1wdHlcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8veGhyLnNwZWMud2hhdHdnLm9yZy8jcmVxdWVzdC1lcnJvci1zdGVwcyBhbmQgaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtbmV0d29yay1lcnJvclxuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIC0xLCBudWxsLCBudWxsLCAnJywgJ3RpbWVvdXQnKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmVycm9yID0gcmVxdWVzdEVycm9yO1xuICAgICAgeGhyLm9udGltZW91dCA9IHJlcXVlc3RUaW1lb3V0O1xuICAgICAgeGhyLm9uYWJvcnQgPSByZXF1ZXN0QWJvcnRlZDtcblxuICAgICAgZm9yRWFjaChldmVudEhhbmRsZXJzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGZvckVhY2godXBsb2FkRXZlbnRIYW5kbGVycywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoa2V5LCB2YWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHdpdGhDcmVkZW50aWFscykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlVHlwZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBXZWJLaXQgYWRkZWQgc3VwcG9ydCBmb3IgdGhlIGpzb24gcmVzcG9uc2VUeXBlIHZhbHVlIG9uIDA5LzAzLzIwMTNcbiAgICAgICAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NzM2NDguIFZlcnNpb25zIG9mIFNhZmFyaSBwcmlvciB0byA3IGFyZVxuICAgICAgICAgIC8vIGtub3duIHRvIHRocm93IHdoZW4gc2V0dGluZyB0aGUgdmFsdWUgXCJqc29uXCIgYXMgdGhlIHJlc3BvbnNlIHR5cGUuIE90aGVyIG9sZGVyXG4gICAgICAgICAgLy8gYnJvd3NlcnMgaW1wbGVtZW50aW5nIHRoZSByZXNwb25zZVR5cGVcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIFRoZSBqc29uIHJlc3BvbnNlIHR5cGUgY2FuIGJlIGlnbm9yZWQgaWYgbm90IHN1cHBvcnRlZCwgYmVjYXVzZSBKU09OIHBheWxvYWRzIGFyZVxuICAgICAgICAgIC8vIHBhcnNlZCBvbiB0aGUgY2xpZW50LXNpZGUgcmVnYXJkbGVzcy5cbiAgICAgICAgICBpZiAocmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKGlzVW5kZWZpbmVkKHBvc3QpID8gbnVsbCA6IHBvc3QpO1xuICAgIH1cblxuICAgIC8vIFNpbmNlIHdlIGFyZSB1c2luZyB4aHIuYWJvcnQoKSB3aGVuIGEgcmVxdWVzdCB0aW1lcyBvdXQsIHdlIGhhdmUgdG8gc2V0IGEgZmxhZyB0aGF0XG4gICAgLy8gaW5kaWNhdGVzIHRvIHJlcXVlc3RBYm9ydGVkIGlmIHRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciB3YXMgYWJvcnRlZC5cbiAgICAvL1xuICAgIC8vIGh0dHAudGltZW91dCA9IG51bWVyaWNhbCB0aW1lb3V0ICAgdGltZW91dFxuICAgIC8vIGh0dHAudGltZW91dCA9ICR0aW1lb3V0ICAgICAgICAgICAgdGltZW91dFxuICAgIC8vIGh0dHAudGltZW91dCA9IHByb21pc2UgICAgICAgICAgICAgYWJvcnRcbiAgICAvLyB4aHIuYWJvcnQoKSAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0IChUaGUgeGhyIG9iamVjdCBpcyBub3JtYWxseSBpbmFjY2Vzc2libGUsIGJ1dFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuIGJlIGV4cG9zZWQgd2l0aCB0aGUgeGhyRmFjdG9yeSlcbiAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgIHZhciB0aW1lb3V0SWQgPSAkYnJvd3NlckRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lb3V0UmVxdWVzdCgndGltZW91dCcpO1xuICAgICAgfSwgdGltZW91dCk7XG4gICAgfSBlbHNlIGlmIChpc1Byb21pc2VMaWtlKHRpbWVvdXQpKSB7XG4gICAgICB0aW1lb3V0LnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVvdXRSZXF1ZXN0KGlzRGVmaW5lZCh0aW1lb3V0LiQkdGltZW91dElkKSA/ICd0aW1lb3V0JyA6ICdhYm9ydCcpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGltZW91dFJlcXVlc3QocmVhc29uKSB7XG4gICAgICBhYm9ydGVkQnlUaW1lb3V0ID0gcmVhc29uID09PSAndGltZW91dCc7XG4gICAgICBpZiAoanNvbnBEb25lKSB7XG4gICAgICAgIGpzb25wRG9uZSgpO1xuICAgICAgfVxuICAgICAgaWYgKHhocikge1xuICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cykge1xuICAgICAgLy8gY2FuY2VsIHRpbWVvdXQgYW5kIHN1YnNlcXVlbnQgdGltZW91dCBwcm9taXNlIHJlc29sdXRpb25cbiAgICAgIGlmIChpc0RlZmluZWQodGltZW91dElkKSkge1xuICAgICAgICAkYnJvd3NlckRlZmVyLmNhbmNlbCh0aW1lb3V0SWQpO1xuICAgICAgfVxuICAgICAganNvbnBEb25lID0geGhyID0gbnVsbDtcblxuICAgICAgY2FsbGJhY2soc3RhdHVzLCByZXNwb25zZSwgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCwgeGhyU3RhdHVzKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24ganNvbnBSZXEodXJsLCBjYWxsYmFja1BhdGgsIGRvbmUpIHtcbiAgICB1cmwgPSB1cmwucmVwbGFjZSgnSlNPTl9DQUxMQkFDSycsIGNhbGxiYWNrUGF0aCk7XG4gICAgLy8gd2UgY2FuJ3QgdXNlIGpRdWVyeS9qcUxpdGUgaGVyZSBiZWNhdXNlIGpRdWVyeSBkb2VzIGNyYXp5IHN0dWZmIHdpdGggc2NyaXB0IGVsZW1lbnRzLCBlLmcuOlxuICAgIC8vIC0gZmV0Y2hlcyBsb2NhbCBzY3JpcHRzIHZpYSBYSFIgYW5kIGV2YWxzIHRoZW1cbiAgICAvLyAtIGFkZHMgYW5kIGltbWVkaWF0ZWx5IHJlbW92ZXMgc2NyaXB0IGVsZW1lbnRzIGZyb20gdGhlIGRvY3VtZW50XG4gICAgdmFyIHNjcmlwdCA9IHJhd0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpLCBjYWxsYmFjayA9IG51bGw7XG4gICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICBzY3JpcHQuc3JjID0gdXJsO1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG5cbiAgICBjYWxsYmFjayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBzY3JpcHQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNhbGxiYWNrKTtcbiAgICAgIHNjcmlwdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGNhbGxiYWNrKTtcbiAgICAgIHJhd0RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICB2YXIgc3RhdHVzID0gLTE7XG4gICAgICB2YXIgdGV4dCA9ICd1bmtub3duJztcblxuICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAnbG9hZCcgJiYgIWNhbGxiYWNrcy53YXNDYWxsZWQoY2FsbGJhY2tQYXRoKSkge1xuICAgICAgICAgIGV2ZW50ID0geyB0eXBlOiAnZXJyb3InIH07XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCA9IGV2ZW50LnR5cGU7XG4gICAgICAgIHN0YXR1cyA9IGV2ZW50LnR5cGUgPT09ICdlcnJvcicgPyA0MDQgOiAyMDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChkb25lKSB7XG4gICAgICAgIGRvbmUoc3RhdHVzLCB0ZXh0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjYWxsYmFjayk7XG4gICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY2FsbGJhY2spO1xuICAgIHJhd0RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICByZXR1cm4gY2FsbGJhY2s7XG4gIH1cbn1cblxudmFyICRpbnRlcnBvbGF0ZU1pbkVyciA9IGFuZ3VsYXIuJGludGVycG9sYXRlTWluRXJyID0gbWluRXJyKCckaW50ZXJwb2xhdGUnKTtcbiRpbnRlcnBvbGF0ZU1pbkVyci50aHJvd05vY29uY2F0ID0gZnVuY3Rpb24odGV4dCkge1xuICB0aHJvdyAkaW50ZXJwb2xhdGVNaW5FcnIoJ25vY29uY2F0JyxcbiAgICAgICdFcnJvciB3aGlsZSBpbnRlcnBvbGF0aW5nOiB7MH1cXG5TdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBkaXNhbGxvd3MgJyArXG4gICAgICAnaW50ZXJwb2xhdGlvbnMgdGhhdCBjb25jYXRlbmF0ZSBtdWx0aXBsZSBleHByZXNzaW9ucyB3aGVuIGEgdHJ1c3RlZCB2YWx1ZSBpcyAnICtcbiAgICAgICdyZXF1aXJlZC4gIFNlZSBodHRwOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy4kc2NlJywgdGV4dCk7XG59O1xuXG4kaW50ZXJwb2xhdGVNaW5FcnIuaW50ZXJyID0gZnVuY3Rpb24odGV4dCwgZXJyKSB7XG4gIHJldHVybiAkaW50ZXJwb2xhdGVNaW5FcnIoJ2ludGVycicsICdDYW5cXCd0IGludGVycG9sYXRlOiB7MH1cXG57MX0nLCB0ZXh0LCBlcnIudG9TdHJpbmcoKSk7XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVXNlZCBmb3IgY29uZmlndXJpbmcgdGhlIGludGVycG9sYXRpb24gbWFya3VwLiBEZWZhdWx0cyB0byBge3tgIGFuZCBgfX1gLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqIFRoaXMgZmVhdHVyZSBpcyBzb21ldGltZXMgdXNlZCB0byBtaXggZGlmZmVyZW50IG1hcmt1cCBsYW5ndWFnZXMsIGUuZy4gdG8gd3JhcCBhbiBBbmd1bGFySlNcbiAqIHRlbXBsYXRlIHdpdGhpbiBhIFB5dGhvbiBKaW5qYSB0ZW1wbGF0ZSAob3IgYW55IG90aGVyIHRlbXBsYXRlIGxhbmd1YWdlKS4gTWl4aW5nIHRlbXBsYXRpbmdcbiAqIGxhbmd1YWdlcyBpcyAqKnZlcnkgZGFuZ2Vyb3VzKiouIFRoZSBlbWJlZGRpbmcgdGVtcGxhdGUgbGFuZ3VhZ2Ugd2lsbCBub3Qgc2FmZWx5IGVzY2FwZSBBbmd1bGFySlNcbiAqIGV4cHJlc3Npb25zLCBzbyBhbnkgdXNlci1jb250cm9sbGVkIHZhbHVlcyBpbiB0aGUgdGVtcGxhdGUgd2lsbCBjYXVzZSBDcm9zcyBTaXRlIFNjcmlwdGluZyAoWFNTKVxuICogc2VjdXJpdHkgYnVncyFcbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG48ZXhhbXBsZSBuYW1lPVwiY3VzdG9tLWludGVycG9sYXRpb24tbWFya3VwXCIgbW9kdWxlPVwiY3VzdG9tSW50ZXJwb2xhdGlvbkFwcFwiPlxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbjxzY3JpcHQ+XG4gIHZhciBjdXN0b21JbnRlcnBvbGF0aW9uQXBwID0gYW5ndWxhci5tb2R1bGUoJ2N1c3RvbUludGVycG9sYXRpb25BcHAnLCBbXSk7XG5cbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb25maWcoZnVuY3Rpb24oJGludGVycG9sYXRlUHJvdmlkZXIpIHtcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5zdGFydFN5bWJvbCgnLy8nKTtcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5lbmRTeW1ib2woJy8vJyk7XG4gIH0pO1xuXG5cbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb250cm9sbGVyKCdEZW1vQ29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5sYWJlbCA9IFwiVGhpcyBiaW5kaW5nIGlzIGJyb3VnaHQgeW91IGJ5IC8vIGludGVycG9sYXRpb24gc3ltYm9scy5cIjtcbiAgfSk7XG48L3NjcmlwdD5cbjxkaXYgbmctY29udHJvbGxlcj1cIkRlbW9Db250cm9sbGVyIGFzIGRlbW9cIj5cbiAgICAvL2RlbW8ubGFiZWwvL1xuPC9kaXY+XG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gIGl0KCdzaG91bGQgaW50ZXJwb2xhdGUgYmluZGluZyB3aXRoIGN1c3RvbSBzeW1ib2xzJywgZnVuY3Rpb24oKSB7XG4gICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnZGVtby5sYWJlbCcpKS5nZXRUZXh0KCkpLnRvQmUoJ1RoaXMgYmluZGluZyBpcyBicm91Z2h0IHlvdSBieSAvLyBpbnRlcnBvbGF0aW9uIHN5bWJvbHMuJyk7XG4gIH0pO1xuPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkSW50ZXJwb2xhdGVQcm92aWRlcigpIHtcbiAgdmFyIHN0YXJ0U3ltYm9sID0gJ3t7JztcbiAgdmFyIGVuZFN5bWJvbCA9ICd9fSc7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXIjc3RhcnRTeW1ib2xcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN5bWJvbCB0byBkZW5vdGUgc3RhcnQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYHt7YC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgdG8gc2V0IHRoZSBzdGFydGluZyBzeW1ib2wgdG8uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUgc3ltYm9sIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLnN0YXJ0U3ltYm9sID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHN0YXJ0U3ltYm9sID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRpbnRlcnBvbGF0ZVByb3ZpZGVyI2VuZFN5bWJvbFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU3ltYm9sIHRvIGRlbm90ZSB0aGUgZW5kIG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB9fWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdmFsdWUgbmV3IHZhbHVlIHRvIHNldCB0aGUgZW5kaW5nIHN5bWJvbCB0by5cbiAgICogQHJldHVybnMge3N0cmluZ3xzZWxmfSBSZXR1cm5zIHRoZSBzeW1ib2wgd2hlbiB1c2VkIGFzIGdldHRlciBhbmQgc2VsZiBpZiB1c2VkIGFzIHNldHRlci5cbiAgICovXG4gIHRoaXMuZW5kU3ltYm9sID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGVuZFN5bWJvbCA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBlbmRTeW1ib2w7XG4gIH07XG5cblxuICB0aGlzLiRnZXQgPSBbJyRwYXJzZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckc2NlJywgZnVuY3Rpb24oJHBhcnNlLCAkZXhjZXB0aW9uSGFuZGxlciwgJHNjZSkge1xuICAgIHZhciBzdGFydFN5bWJvbExlbmd0aCA9IHN0YXJ0U3ltYm9sLmxlbmd0aCxcbiAgICAgICAgZW5kU3ltYm9sTGVuZ3RoID0gZW5kU3ltYm9sLmxlbmd0aCxcbiAgICAgICAgZXNjYXBlZFN0YXJ0UmVnZXhwID0gbmV3IFJlZ0V4cChzdGFydFN5bWJvbC5yZXBsYWNlKC8uL2csIGVzY2FwZSksICdnJyksXG4gICAgICAgIGVzY2FwZWRFbmRSZWdleHAgPSBuZXcgUmVnRXhwKGVuZFN5bWJvbC5yZXBsYWNlKC8uL2csIGVzY2FwZSksICdnJyk7XG5cbiAgICBmdW5jdGlvbiBlc2NhcGUoY2gpIHtcbiAgICAgIHJldHVybiAnXFxcXFxcXFxcXFxcJyArIGNoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVuZXNjYXBlVGV4dCh0ZXh0KSB7XG4gICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKGVzY2FwZWRTdGFydFJlZ2V4cCwgc3RhcnRTeW1ib2wpLlxuICAgICAgICByZXBsYWNlKGVzY2FwZWRFbmRSZWdleHAsIGVuZFN5bWJvbCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogdGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgY29uc3RhbnRXYXRjaERlbGVnYXRlIGluIHBhcnNlLmpzXG4gICAgZnVuY3Rpb24gY29uc3RhbnRXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIGNvbnN0YW50SW50ZXJwKSB7XG4gICAgICB2YXIgdW53YXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiBjb25zdGFudEludGVycG9sYXRlV2F0Y2goc2NvcGUpIHtcbiAgICAgICAgdW53YXRjaCgpO1xuICAgICAgICByZXR1cm4gY29uc3RhbnRJbnRlcnAoc2NvcGUpO1xuICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KTtcbiAgICAgIHJldHVybiB1bndhdGNoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlXG4gICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIEByZXF1aXJlcyAkcGFyc2VcbiAgICAgKiBAcmVxdWlyZXMgJHNjZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBDb21waWxlcyBhIHN0cmluZyB3aXRoIG1hcmt1cCBpbnRvIGFuIGludGVycG9sYXRpb24gZnVuY3Rpb24uIFRoaXMgc2VydmljZSBpcyB1c2VkIGJ5IHRoZVxuICAgICAqIEhUTUwge0BsaW5rIG5nLiRjb21waWxlICRjb21waWxlfSBzZXJ2aWNlIGZvciBkYXRhIGJpbmRpbmcuIFNlZVxuICAgICAqIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciAkaW50ZXJwb2xhdGVQcm92aWRlcn0gZm9yIGNvbmZpZ3VyaW5nIHRoZVxuICAgICAqIGludGVycG9sYXRpb24gbWFya3VwLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgdmFyICRpbnRlcnBvbGF0ZSA9IC4uLjsgLy8gaW5qZWN0ZWRcbiAgICAgKiAgIHZhciBleHAgPSAkaW50ZXJwb2xhdGUoJ0hlbGxvIHt7bmFtZSB8IHVwcGVyY2FzZX19IScpO1xuICAgICAqICAgZXhwZWN0KGV4cCh7bmFtZTonQW5ndWxhckpTJ30pKS50b0VxdWFsKCdIZWxsbyBBTkdVTEFSSlMhJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBgJGludGVycG9sYXRlYCB0YWtlcyBhbiBvcHRpb25hbCBmb3VydGggYXJndW1lbnQsIGBhbGxPck5vdGhpbmdgLiBJZiBgYWxsT3JOb3RoaW5nYCBpc1xuICAgICAqIGB0cnVlYCwgdGhlIGludGVycG9sYXRpb24gZnVuY3Rpb24gd2lsbCByZXR1cm4gYHVuZGVmaW5lZGAgdW5sZXNzIGFsbCBlbWJlZGRlZCBleHByZXNzaW9uc1xuICAgICAqIGV2YWx1YXRlIHRvIGEgdmFsdWUgb3RoZXIgdGhhbiBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICB2YXIgJGludGVycG9sYXRlID0gLi4uOyAvLyBpbmplY3RlZFxuICAgICAqICAgdmFyIGNvbnRleHQgPSB7Z3JlZXRpbmc6ICdIZWxsbycsIG5hbWU6IHVuZGVmaW5lZCB9O1xuICAgICAqXG4gICAgICogICAvLyBkZWZhdWx0IFwiZm9yZ2l2aW5nXCIgbW9kZVxuICAgICAqICAgdmFyIGV4cCA9ICRpbnRlcnBvbGF0ZSgne3tncmVldGluZ319IHt7bmFtZX19IScpO1xuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9FcXVhbCgnSGVsbG8gIScpO1xuICAgICAqXG4gICAgICogICAvLyBcImFsbE9yTm90aGluZ1wiIG1vZGVcbiAgICAgKiAgIGV4cCA9ICRpbnRlcnBvbGF0ZSgne3tncmVldGluZ319IHt7bmFtZX19IScsIGZhbHNlLCBudWxsLCB0cnVlKTtcbiAgICAgKiAgIGV4cGVjdChleHAoY29udGV4dCkpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgKiAgIGNvbnRleHQubmFtZSA9ICdBbmd1bGFySlMnO1xuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9FcXVhbCgnSGVsbG8gQW5ndWxhckpTIScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogYGFsbE9yTm90aGluZ2AgaXMgdXNlZnVsIGZvciBpbnRlcnBvbGF0aW5nIFVSTHMuIGBuZ1NyY2AgYW5kIGBuZ1NyY3NldGAgdXNlIHRoaXMgYmVoYXZpb3IuXG4gICAgICpcbiAgICAgKiAjIyMjIEVzY2FwZWQgSW50ZXJwb2xhdGlvblxuICAgICAqICRpbnRlcnBvbGF0ZSBwcm92aWRlcyBhIG1lY2hhbmlzbSBmb3IgZXNjYXBpbmcgaW50ZXJwb2xhdGlvbiBtYXJrZXJzLiBTdGFydCBhbmQgZW5kIG1hcmtlcnNcbiAgICAgKiBjYW4gYmUgZXNjYXBlZCBieSBwcmVjZWRpbmcgZWFjaCBvZiB0aGVpciBjaGFyYWN0ZXJzIHdpdGggYSBSRVZFUlNFIFNPTElEVVMgVSswMDVDIChiYWNrc2xhc2gpLlxuICAgICAqIEl0IHdpbGwgYmUgcmVuZGVyZWQgYXMgYSByZWd1bGFyIHN0YXJ0L2VuZCBtYXJrZXIsIGFuZCB3aWxsIG5vdCBiZSBpbnRlcnByZXRlZCBhcyBhbiBleHByZXNzaW9uXG4gICAgICogb3IgYmluZGluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgZW5hYmxlcyB3ZWItc2VydmVycyB0byBwcmV2ZW50IHNjcmlwdCBpbmplY3Rpb24gYXR0YWNrcyBhbmQgZGVmYWNpbmcgYXR0YWNrcywgdG8gc29tZVxuICAgICAqIGRlZ3JlZSwgd2hpbGUgYWxzbyBlbmFibGluZyBjb2RlIGV4YW1wbGVzIHRvIHdvcmsgd2l0aG91dCByZWx5aW5nIG9uIHRoZVxuICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdOb25CaW5kYWJsZSBuZ05vbkJpbmRhYmxlfSBkaXJlY3RpdmUuXG4gICAgICpcbiAgICAgKiAqKkZvciBzZWN1cml0eSBwdXJwb3NlcywgaXQgaXMgc3Ryb25nbHkgZW5jb3VyYWdlZCB0aGF0IHdlYiBzZXJ2ZXJzIGVzY2FwZSB1c2VyLXN1cHBsaWVkIGRhdGEsXG4gICAgICogcmVwbGFjaW5nIGFuZ2xlIGJyYWNrZXRzICgmbHQ7LCAmZ3Q7KSB3aXRoICZhbXA7bHQ7IGFuZCAmYW1wO2d0OyByZXNwZWN0aXZlbHksIGFuZCByZXBsYWNpbmcgYWxsXG4gICAgICogaW50ZXJwb2xhdGlvbiBzdGFydC9lbmQgbWFya2VycyB3aXRoIHRoZWlyIGVzY2FwZWQgY291bnRlcnBhcnRzLioqXG4gICAgICpcbiAgICAgKiBFc2NhcGVkIGludGVycG9sYXRpb24gbWFya2VycyBhcmUgb25seSByZXBsYWNlZCB3aXRoIHRoZSBhY3R1YWwgaW50ZXJwb2xhdGlvbiBtYXJrZXJzIGluIHJlbmRlcmVkXG4gICAgICogb3V0cHV0IHdoZW4gdGhlICRpbnRlcnBvbGF0ZSBzZXJ2aWNlIHByb2Nlc3NlcyB0aGUgdGV4dC4gU28sIGZvciBIVE1MIGVsZW1lbnRzIGludGVycG9sYXRlZFxuICAgICAqIGJ5IHtAbGluayBuZy4kY29tcGlsZSAkY29tcGlsZX0sIG9yIG90aGVyd2lzZSBpbnRlcnBvbGF0ZWQgd2l0aCB0aGUgYG11c3RIYXZlRXhwcmVzc2lvbmAgcGFyYW1ldGVyXG4gICAgICogc2V0IHRvIGB0cnVlYCwgdGhlIGludGVycG9sYXRlZCB0ZXh0IG11c3QgY29udGFpbiBhbiB1bmVzY2FwZWQgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uLiBBcyBzdWNoLFxuICAgICAqIHRoaXMgaXMgdHlwaWNhbGx5IHVzZWZ1bCBvbmx5IHdoZW4gdXNlci1kYXRhIGlzIHVzZWQgaW4gcmVuZGVyaW5nIGEgdGVtcGxhdGUgZnJvbSB0aGUgc2VydmVyLCBvclxuICAgICAqIHdoZW4gb3RoZXJ3aXNlIHVudHJ1c3RlZCBkYXRhIGlzIHVzZWQgYnkgYSBkaXJlY3RpdmUuXG4gICAgICpcbiAgICAgKiA8ZXhhbXBsZSBuYW1lPVwiaW50ZXJwb2xhdGlvblwiPlxuICAgICAqICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAqICAgIDxkaXYgbmctaW5pdD1cInVzZXJuYW1lPSdBIHVzZXInXCI+XG4gICAgICogICAgICA8cCBuZy1pbml0PVwiYXBwdGl0bGU9J0VzY2FwaW5nIGRlbW8nXCI+e3thcHB0aXRsZX19OiBcXHtcXHsgdXNlcm5hbWUgPSBcImRlZmFjZWQgdmFsdWVcIjsgXFx9XFx9XG4gICAgICogICAgICAgIDwvcD5cbiAgICAgKiAgICAgIDxwPjxzdHJvbmc+e3t1c2VybmFtZX19PC9zdHJvbmc+IGF0dGVtcHRzIHRvIGluamVjdCBjb2RlIHdoaWNoIHdpbGwgZGVmYWNlIHRoZVxuICAgICAqICAgICAgICBhcHBsaWNhdGlvbiwgYnV0IGZhaWxzIHRvIGFjY29tcGxpc2ggdGhlaXIgdGFzaywgYmVjYXVzZSB0aGUgc2VydmVyIGhhcyBjb3JyZWN0bHlcbiAgICAgKiAgICAgICAgZXNjYXBlZCB0aGUgaW50ZXJwb2xhdGlvbiBzdGFydC9lbmQgbWFya2VycyB3aXRoIFJFVkVSU0UgU09MSURVUyBVKzAwNUMgKGJhY2tzbGFzaClcbiAgICAgKiAgICAgICAgY2hhcmFjdGVycy48L3A+XG4gICAgICogICAgICA8cD5JbnN0ZWFkLCB0aGUgcmVzdWx0IG9mIHRoZSBhdHRlbXB0ZWQgc2NyaXB0IGluamVjdGlvbiBpcyB2aXNpYmxlLCBhbmQgY2FuIGJlIHJlbW92ZWRcbiAgICAgKiAgICAgICAgZnJvbSB0aGUgZGF0YWJhc2UgYnkgYW4gYWRtaW5pc3RyYXRvci48L3A+XG4gICAgICogICAgPC9kaXY+XG4gICAgICogIDwvZmlsZT5cbiAgICAgKiA8L2V4YW1wbGU+XG4gICAgICpcbiAgICAgKiBAa25vd25Jc3N1ZVxuICAgICAqIEl0IGlzIGN1cnJlbnRseSBub3QgcG9zc2libGUgZm9yIGFuIGludGVycG9sYXRlZCBleHByZXNzaW9uIHRvIGNvbnRhaW4gdGhlIGludGVycG9sYXRpb24gZW5kXG4gICAgICogc3ltYm9sLiBGb3IgZXhhbXBsZSwgYHt7ICd9fScgfX1gIHdpbGwgYmUgaW5jb3JyZWN0bHkgaW50ZXJwcmV0ZWQgYXMgYHt7ICcgfX1gICsgYCcgfX1gLCBpLmUuXG4gICAgICogYW4gaW50ZXJwb2xhdGVkIGV4cHJlc3Npb24gY29uc2lzdGluZyBvZiBhIHNpbmdsZS1xdW90ZSAoYCdgKSBhbmQgdGhlIGAnIH19YCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAa25vd25Jc3N1ZVxuICAgICAqIEFsbCBkaXJlY3RpdmVzIGFuZCBjb21wb25lbnRzIG11c3QgdXNlIHRoZSBzdGFuZGFyZCBge3tgIGB9fWAgaW50ZXJwb2xhdGlvbiBzeW1ib2xzXG4gICAgICogaW4gdGhlaXIgdGVtcGxhdGVzLiBJZiB5b3UgY2hhbmdlIHRoZSBhcHBsaWNhdGlvbiBpbnRlcnBvbGF0aW9uIHN5bWJvbHMgdGhlIHtAbGluayAkY29tcGlsZX1cbiAgICAgKiBzZXJ2aWNlIHdpbGwgYXR0ZW1wdCB0byBkZW5vcm1hbGl6ZSB0aGUgc3RhbmRhcmQgc3ltYm9scyB0byB0aGUgY3VzdG9tIHN5bWJvbHMuXG4gICAgICogVGhlIGRlbm9ybWFsaXphdGlvbiBwcm9jZXNzIGlzIG5vdCBjbGV2ZXIgZW5vdWdoIHRvIGtub3cgbm90IHRvIHJlcGxhY2UgaW5zdGFuY2VzIG9mIHRoZSBzdGFuZGFyZFxuICAgICAqIHN5bWJvbHMgd2hlcmUgdGhleSB3b3VsZCBub3Qgbm9ybWFsbHkgYmUgdHJlYXRlZCBhcyBpbnRlcnBvbGF0aW9uIHN5bWJvbHMuIEZvciBleGFtcGxlIGluIHRoZSBmb2xsb3dpbmdcbiAgICAgKiBjb2RlIHNuaXBwZXQgdGhlIGNsb3NpbmcgYnJhY2VzIG9mIHRoZSBsaXRlcmFsIG9iamVjdCB3aWxsIGdldCBpbmNvcnJlY3RseSBkZW5vcm1hbGl6ZWQ6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiA8ZGl2IGRhdGEtY29udGV4dD0ne1wiY29udGV4dFwiOntcImlkXCI6MyxcInR5cGVcIjpcInBhZ2VcIn19XCI+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGUgd29ya2Fyb3VuZCBpcyB0byBlbnN1cmUgdGhhdCBzdWNoIGluc3RhbmNlcyBhcmUgc2VwYXJhdGVkIGJ5IHdoaXRlc3BhY2U6XG4gICAgICogYGBgXG4gICAgICogPGRpdiBkYXRhLWNvbnRleHQ9J3tcImNvbnRleHRcIjp7XCJpZFwiOjMsXCJ0eXBlXCI6XCJwYWdlXCJ9IH1cIj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMTQ2MTAjaXNzdWVjb21tZW50LTIxOTQwMTA5OSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHdpdGggbWFya3VwIHRvIGludGVycG9sYXRlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG11c3RIYXZlRXhwcmVzc2lvbiBpZiBzZXQgdG8gdHJ1ZSB0aGVuIHRoZSBpbnRlcnBvbGF0aW9uIHN0cmluZyBtdXN0IGhhdmVcbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIGluIG9yZGVyIHRvIHJldHVybiBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLiBTdHJpbmdzIHdpdGggbm9cbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIHdpbGwgcmV0dXJuIG51bGwgZm9yIHRoZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gdHJ1c3RlZENvbnRleHQgd2hlbiBwcm92aWRlZCwgdGhlIHJldHVybmVkIGZ1bmN0aW9uIHBhc3NlcyB0aGUgaW50ZXJwb2xhdGVkXG4gICAgICogICAgcmVzdWx0IHRocm91Z2gge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWQoaW50ZXJwb2xhdGVkUmVzdWx0LFxuICAgICAqICAgIHRydXN0ZWRDb250ZXh0KX0gYmVmb3JlIHJldHVybmluZyBpdC4gIFJlZmVyIHRvIHRoZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBzZXJ2aWNlIHRoYXRcbiAgICAgKiAgICBwcm92aWRlcyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBmb3IgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhbGxPck5vdGhpbmcgaWYgYHRydWVgLCB0aGVuIHRoZSByZXR1cm5lZCBmdW5jdGlvbiByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAqICAgIHVubGVzcyBhbGwgZW1iZWRkZWQgZXhwcmVzc2lvbnMgZXZhbHVhdGUgdG8gYSB2YWx1ZSBvdGhlciB0aGFuIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0KX0gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIGNvbXB1dGUgdGhlXG4gICAgICogICAgaW50ZXJwb2xhdGVkIHN0cmluZy4gVGhlIGZ1bmN0aW9uIGhhcyB0aGVzZSBwYXJhbWV0ZXJzOlxuICAgICAqXG4gICAgICogLSBgY29udGV4dGA6IGV2YWx1YXRpb24gY29udGV4dCBmb3IgYWxsIGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBpbnRlcnBvbGF0ZWQgdGV4dFxuICAgICAqL1xuICAgIGZ1bmN0aW9uICRpbnRlcnBvbGF0ZSh0ZXh0LCBtdXN0SGF2ZUV4cHJlc3Npb24sIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpIHtcbiAgICAgIHZhciBjb250ZXh0QWxsb3dzQ29uY2F0ZW5hdGlvbiA9IHRydXN0ZWRDb250ZXh0ID09PSAkc2NlLlVSTCB8fCB0cnVzdGVkQ29udGV4dCA9PT0gJHNjZS5NRURJQV9VUkw7XG5cbiAgICAgIC8vIFByb3ZpZGUgYSBxdWljayBleGl0IGFuZCBzaW1wbGlmaWVkIHJlc3VsdCBmdW5jdGlvbiBmb3IgdGV4dCB3aXRoIG5vIGludGVycG9sYXRpb25cbiAgICAgIGlmICghdGV4dC5sZW5ndGggfHwgdGV4dC5pbmRleE9mKHN0YXJ0U3ltYm9sKSA9PT0gLTEpIHtcbiAgICAgICAgaWYgKG11c3RIYXZlRXhwcmVzc2lvbiAmJiAhY29udGV4dEFsbG93c0NvbmNhdGVuYXRpb24pIHJldHVybjtcblxuICAgICAgICB2YXIgdW5lc2NhcGVkVGV4dCA9IHVuZXNjYXBlVGV4dCh0ZXh0KTtcbiAgICAgICAgaWYgKGNvbnRleHRBbGxvd3NDb25jYXRlbmF0aW9uKSB7XG4gICAgICAgICAgdW5lc2NhcGVkVGV4dCA9ICRzY2UuZ2V0VHJ1c3RlZCh0cnVzdGVkQ29udGV4dCwgdW5lc2NhcGVkVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbnN0YW50SW50ZXJwID0gdmFsdWVGbih1bmVzY2FwZWRUZXh0KTtcbiAgICAgICAgY29uc3RhbnRJbnRlcnAuZXhwID0gdGV4dDtcbiAgICAgICAgY29uc3RhbnRJbnRlcnAuZXhwcmVzc2lvbnMgPSBbXTtcbiAgICAgICAgY29uc3RhbnRJbnRlcnAuJCR3YXRjaERlbGVnYXRlID0gY29uc3RhbnRXYXRjaERlbGVnYXRlO1xuXG4gICAgICAgIHJldHVybiBjb25zdGFudEludGVycDtcbiAgICAgIH1cblxuICAgICAgYWxsT3JOb3RoaW5nID0gISFhbGxPck5vdGhpbmc7XG4gICAgICB2YXIgc3RhcnRJbmRleCxcbiAgICAgICAgICBlbmRJbmRleCxcbiAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgZXhwcmVzc2lvbnMgPSBbXSxcbiAgICAgICAgICBwYXJzZUZucyxcbiAgICAgICAgICB0ZXh0TGVuZ3RoID0gdGV4dC5sZW5ndGgsXG4gICAgICAgICAgZXhwLFxuICAgICAgICAgIGNvbmNhdCA9IFtdLFxuICAgICAgICAgIGV4cHJlc3Npb25Qb3NpdGlvbnMgPSBbXSxcbiAgICAgICAgICBzaW5nbGVFeHByZXNzaW9uO1xuXG5cbiAgICAgIHdoaWxlIChpbmRleCA8IHRleHRMZW5ndGgpIHtcbiAgICAgICAgaWYgKCgoc3RhcnRJbmRleCA9IHRleHQuaW5kZXhPZihzdGFydFN5bWJvbCwgaW5kZXgpKSAhPT0gLTEpICYmXG4gICAgICAgICAgICAgKChlbmRJbmRleCA9IHRleHQuaW5kZXhPZihlbmRTeW1ib2wsIHN0YXJ0SW5kZXggKyBzdGFydFN5bWJvbExlbmd0aCkpICE9PSAtMSkpIHtcbiAgICAgICAgICBpZiAoaW5kZXggIT09IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGNvbmNhdC5wdXNoKHVuZXNjYXBlVGV4dCh0ZXh0LnN1YnN0cmluZyhpbmRleCwgc3RhcnRJbmRleCkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZXhwID0gdGV4dC5zdWJzdHJpbmcoc3RhcnRJbmRleCArIHN0YXJ0U3ltYm9sTGVuZ3RoLCBlbmRJbmRleCk7XG4gICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChleHApO1xuICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXggKyBlbmRTeW1ib2xMZW5ndGg7XG4gICAgICAgICAgZXhwcmVzc2lvblBvc2l0aW9ucy5wdXNoKGNvbmNhdC5sZW5ndGgpO1xuICAgICAgICAgIGNvbmNhdC5wdXNoKCcnKTsgLy8gUGxhY2Vob2xkZXIgdGhhdCB3aWxsIGdldCByZXBsYWNlZCB3aXRoIHRoZSBldmFsdWF0ZWQgZXhwcmVzc2lvbi5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB3ZSBkaWQgbm90IGZpbmQgYW4gaW50ZXJwb2xhdGlvbiwgc28gd2UgaGF2ZSB0byBhZGQgdGhlIHJlbWFpbmRlciB0byB0aGUgc2VwYXJhdG9ycyBhcnJheVxuICAgICAgICAgIGlmIChpbmRleCAhPT0gdGV4dExlbmd0aCkge1xuICAgICAgICAgICAgY29uY2F0LnB1c2godW5lc2NhcGVUZXh0KHRleHQuc3Vic3RyaW5nKGluZGV4KSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzaW5nbGVFeHByZXNzaW9uID0gY29uY2F0Lmxlbmd0aCA9PT0gMSAmJiBleHByZXNzaW9uUG9zaXRpb25zLmxlbmd0aCA9PT0gMTtcbiAgICAgIC8vIEludGVyY2VwdCBleHByZXNzaW9uIGlmIHdlIG5lZWQgdG8gc3RyaW5naWZ5IGNvbmNhdGVuYXRlZCBpbnB1dHMsIHdoaWNoIG1heSBiZSBTQ0UgdHJ1c3RlZFxuICAgICAgLy8gb2JqZWN0cyByYXRoZXIgdGhhbiBzaW1wbGUgc3RyaW5nc1xuICAgICAgLy8gKHdlIGRvbid0IG1vZGlmeSB0aGUgZXhwcmVzc2lvbiBpZiB0aGUgaW5wdXQgY29uc2lzdHMgb2Ygb25seSBhIHNpbmdsZSB0cnVzdGVkIGlucHV0KVxuICAgICAgdmFyIGludGVyY2VwdG9yID0gY29udGV4dEFsbG93c0NvbmNhdGVuYXRpb24gJiYgc2luZ2xlRXhwcmVzc2lvbiA/IHVuZGVmaW5lZCA6IHBhcnNlU3RyaW5naWZ5SW50ZXJjZXB0b3I7XG4gICAgICBwYXJzZUZucyA9IGV4cHJlc3Npb25zLm1hcChmdW5jdGlvbihleHApIHsgcmV0dXJuICRwYXJzZShleHAsIGludGVyY2VwdG9yKTsgfSk7XG5cbiAgICAgIC8vIENvbmNhdGVuYXRpbmcgZXhwcmVzc2lvbnMgbWFrZXMgaXQgaGFyZCB0byByZWFzb24gYWJvdXQgd2hldGhlciBzb21lIGNvbWJpbmF0aW9uIG9mXG4gICAgICAvLyBjb25jYXRlbmF0ZWQgdmFsdWVzIGFyZSB1bnNhZmUgdG8gdXNlIGFuZCBjb3VsZCBlYXNpbHkgbGVhZCB0byBYU1MuICBCeSByZXF1aXJpbmcgdGhhdCBhXG4gICAgICAvLyBzaW5nbGUgZXhwcmVzc2lvbiBiZSB1c2VkIGZvciBzb21lICRzY2UtbWFuYWdlZCBzZWN1cmUgY29udGV4dHMgKFJFU09VUkNFX1VSTHMgbW9zdGx5KSxcbiAgICAgIC8vIHdlIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSB0aGF0J3MgdXNlZCBpcyBhc3NpZ25lZCBvciBjb25zdHJ1Y3RlZCBieSBzb21lIEpTIGNvZGUgc29tZXdoZXJlXG4gICAgICAvLyB0aGF0IGlzIG1vcmUgdGVzdGFibGUgb3IgbWFrZSBpdCBvYnZpb3VzIHRoYXQgeW91IGJvdW5kIHRoZSB2YWx1ZSB0byBzb21lIHVzZXIgY29udHJvbGxlZFxuICAgICAgLy8gdmFsdWUuICBUaGlzIGhlbHBzIHJlZHVjZSB0aGUgbG9hZCB3aGVuIGF1ZGl0aW5nIGZvciBYU1MgaXNzdWVzLlxuXG4gICAgICAvLyBOb3RlIHRoYXQgVVJMIGFuZCBNRURJQV9VUkwgJHNjZSBjb250ZXh0cyBkbyBub3QgbmVlZCB0aGlzLCBzaW5jZSBgJHNjZWAgY2FuIHNhbml0aXplIHRoZSB2YWx1ZXNcbiAgICAgIC8vIHBhc3NlZCB0byBpdC4gSW4gdGhhdCBjYXNlLCBgJHNjZS5nZXRUcnVzdGVkYCB3aWxsIGJlIGNhbGxlZCBvbiBlaXRoZXIgdGhlIHNpbmdsZSBleHByZXNzaW9uXG4gICAgICAvLyBvciBvbiB0aGUgb3ZlcmFsbCBjb25jYXRlbmF0ZWQgc3RyaW5nIChsb3NpbmcgdHJ1c3RlZCB0eXBlcyB1c2VkIGluIHRoZSBtaXgsIGJ5IGRlc2lnbikuXG4gICAgICAvLyBCb3RoIHRoZXNlIG1ldGhvZHMgd2lsbCBzYW5pdGl6ZSBwbGFpbiBzdHJpbmdzLiBBbHNvLCBIVE1MIGNvdWxkIGJlIGluY2x1ZGVkLCBidXQgc2luY2UgaXQnc1xuICAgICAgLy8gb25seSB1c2VkIGluIHNyY2RvYyBhdHRyaWJ1dGVzLCB0aGlzIHdvdWxkIG5vdCBiZSB2ZXJ5IHVzZWZ1bC5cblxuICAgICAgaWYgKCFtdXN0SGF2ZUV4cHJlc3Npb24gfHwgZXhwcmVzc2lvbnMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjb21wdXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFsbE9yTm90aGluZyAmJiBpc1VuZGVmaW5lZCh2YWx1ZXNbaV0pKSByZXR1cm47XG4gICAgICAgICAgICBjb25jYXRbZXhwcmVzc2lvblBvc2l0aW9uc1tpXV0gPSB2YWx1ZXNbaV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNvbnRleHRBbGxvd3NDb25jYXRlbmF0aW9uKSB7XG4gICAgICAgICAgICAvLyBJZiBgc2luZ2xlRXhwcmVzc2lvbmAgdGhlbiBgY29uY2F0WzBdYCBtaWdodCBiZSBhIFwidHJ1c3RlZFwiIHZhbHVlIG9yIGBudWxsYCwgcmF0aGVyIHRoYW4gYSBzdHJpbmdcbiAgICAgICAgICAgIHJldHVybiAkc2NlLmdldFRydXN0ZWQodHJ1c3RlZENvbnRleHQsIHNpbmdsZUV4cHJlc3Npb24gPyBjb25jYXRbMF0gOiBjb25jYXQuam9pbignJykpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHJ1c3RlZENvbnRleHQgJiYgY29uY2F0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgY29udGV4dCBkb2VzIG5vdCBhbGxvdyBtb3JlIHRoYW4gb25lIHBhcnQsIGUuZy4gZXhwciArIHN0cmluZyBvciBleHAgKyBleHAuXG4gICAgICAgICAgICAkaW50ZXJwb2xhdGVNaW5FcnIudGhyb3dOb2NvbmNhdCh0ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gSW4gYW4gdW5wcml2aWxlZ2VkIGNvbnRleHQgb3Igb25seSBvbmUgcGFydDoganVzdCBjb25jYXRlbmF0ZSBhbmQgcmV0dXJuLlxuICAgICAgICAgIHJldHVybiBjb25jYXQuam9pbignJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiBpbnRlcnBvbGF0aW9uRm4oY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheShpaSk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvciAoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlc1tpXSA9IHBhcnNlRm5zW2ldKGNvbnRleHQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGUodmFsdWVzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcigkaW50ZXJwb2xhdGVNaW5FcnIuaW50ZXJyKHRleHQsIGVycikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSwge1xuICAgICAgICAgIC8vIGFsbCBvZiB0aGVzZSBwcm9wZXJ0aWVzIGFyZSB1bmRvY3VtZW50ZWQgZm9yIG5vd1xuICAgICAgICAgIGV4cDogdGV4dCwgLy9qdXN0IGZvciBjb21wYXRpYmlsaXR5IHdpdGggcmVndWxhciB3YXRjaGVycyBjcmVhdGVkIHZpYSAkd2F0Y2hcbiAgICAgICAgICBleHByZXNzaW9uczogZXhwcmVzc2lvbnMsXG4gICAgICAgICAgJCR3YXRjaERlbGVnYXRlOiBmdW5jdGlvbihzY29wZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoR3JvdXAocGFyc2VGbnMsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hlcih2YWx1ZXMsIG9sZFZhbHVlcykge1xuICAgICAgICAgICAgICB2YXIgY3VyclZhbHVlID0gY29tcHV0ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGN1cnJWYWx1ZSwgdmFsdWVzICE9PSBvbGRWYWx1ZXMgPyBsYXN0VmFsdWUgOiBjdXJyVmFsdWUsIHNjb3BlKTtcbiAgICAgICAgICAgICAgbGFzdFZhbHVlID0gY3VyclZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvcih2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEluIGNvbmNhdGVuYWJsZSBjb250ZXh0cywgZ2V0VHJ1c3RlZCBjb21lcyBhdCB0aGUgZW5kLCB0byBhdm9pZCBzYW5pdGl6aW5nIGluZGl2aWR1YWxcbiAgICAgICAgICAvLyBwYXJ0cyBvZiBhIGZ1bGwgVVJMLiBXZSBkb24ndCBjYXJlIGFib3V0IGxvc2luZyB0aGUgdHJ1c3RlZG5lc3MgaGVyZS5cbiAgICAgICAgICAvLyBJbiBub24tY29uY2F0ZW5hYmxlIGNvbnRleHRzLCB3aGVyZSB0aGVyZSBpcyBvbmx5IG9uZSBleHByZXNzaW9uLCB0aGlzIGludGVyY2VwdG9yIGlzXG4gICAgICAgICAgLy8gbm90IGFwcGxpZWQgdG8gdGhlIGV4cHJlc3Npb24uXG4gICAgICAgICAgdmFsdWUgPSAodHJ1c3RlZENvbnRleHQgJiYgIWNvbnRleHRBbGxvd3NDb25jYXRlbmF0aW9uKSA/XG4gICAgICAgICAgICAgICAgICAgICRzY2UuZ2V0VHJ1c3RlZCh0cnVzdGVkQ29udGV4dCwgdmFsdWUpIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjZS52YWx1ZU9mKHZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gYWxsT3JOb3RoaW5nICYmICFpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcigkaW50ZXJwb2xhdGVNaW5FcnIuaW50ZXJyKHRleHQsIGVycikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlI3N0YXJ0U3ltYm9sXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU3ltYm9sIHRvIGRlbm90ZSB0aGUgc3RhcnQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYHt7YC5cbiAgICAgKlxuICAgICAqIFVzZSB7QGxpbmsgbmcuJGludGVycG9sYXRlUHJvdmlkZXIjc3RhcnRTeW1ib2wgYCRpbnRlcnBvbGF0ZVByb3ZpZGVyLnN0YXJ0U3ltYm9sYH0gdG8gY2hhbmdlXG4gICAgICogdGhlIHN5bWJvbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHN0YXJ0IHN5bWJvbC5cbiAgICAgKi9cbiAgICAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2wgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzdGFydFN5bWJvbDtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlI2VuZFN5bWJvbFxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIGVuZCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBgfX1gLlxuICAgICAqXG4gICAgICogVXNlIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciNlbmRTeW1ib2wgYCRpbnRlcnBvbGF0ZVByb3ZpZGVyLmVuZFN5bWJvbGB9IHRvIGNoYW5nZVxuICAgICAqIHRoZSBzeW1ib2wuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBlbmQgc3ltYm9sLlxuICAgICAqL1xuICAgICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2wgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBlbmRTeW1ib2w7XG4gICAgfTtcblxuICAgIHJldHVybiAkaW50ZXJwb2xhdGU7XG4gIH1dO1xufVxuXG52YXIgJGludGVydmFsTWluRXJyID0gbWluRXJyKCckaW50ZXJ2YWwnKTtcblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkSW50ZXJ2YWxQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyR3aW5kb3cnLCAnJHEnLCAnJCRxJywgJyRicm93c2VyJyxcbiAgICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAgICR3aW5kb3csICAgJHEsICAgJCRxLCAgICRicm93c2VyKSB7XG4gICAgdmFyIGludGVydmFscyA9IHt9O1xuXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBuYW1lICRpbnRlcnZhbFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQW5ndWxhckpTJ3Mgd3JhcHBlciBmb3IgYHdpbmRvdy5zZXRJbnRlcnZhbGAuIFRoZSBgZm5gIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGV2ZXJ5IGBkZWxheWBcbiAgICAgKiBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIHJlZ2lzdGVyaW5nIGFuIGludGVydmFsIGZ1bmN0aW9uIGlzIGEgcHJvbWlzZS4gVGhpcyBwcm9taXNlIHdpbGwgYmVcbiAgICAgKiBub3RpZmllZCB1cG9uIGVhY2ggdGljayBvZiB0aGUgaW50ZXJ2YWwsIGFuZCB3aWxsIGJlIHJlc29sdmVkIGFmdGVyIGBjb3VudGAgaXRlcmF0aW9ucywgb3JcbiAgICAgKiBydW4gaW5kZWZpbml0ZWx5IGlmIGBjb3VudGAgaXMgbm90IGRlZmluZWQuIFRoZSB2YWx1ZSBvZiB0aGUgbm90aWZpY2F0aW9uIHdpbGwgYmUgdGhlXG4gICAgICogbnVtYmVyIG9mIGl0ZXJhdGlvbnMgdGhhdCBoYXZlIHJ1bi5cbiAgICAgKiBUbyBjYW5jZWwgYW4gaW50ZXJ2YWwsIGNhbGwgYCRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSlgLlxuICAgICAqXG4gICAgICogSW4gdGVzdHMgeW91IGNhbiB1c2Uge0BsaW5rIG5nTW9jay4kaW50ZXJ2YWwjZmx1c2ggYCRpbnRlcnZhbC5mbHVzaChtaWxsaXMpYH0gdG9cbiAgICAgKiBtb3ZlIGZvcndhcmQgYnkgYG1pbGxpc2AgbWlsbGlzZWNvbmRzIGFuZCB0cmlnZ2VyIGFueSBmdW5jdGlvbnMgc2NoZWR1bGVkIHRvIHJ1biBpbiB0aGF0XG4gICAgICogdGltZS5cbiAgICAgKlxuICAgICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAgICogKipOb3RlKio6IEludGVydmFscyBjcmVhdGVkIGJ5IHRoaXMgc2VydmljZSBtdXN0IGJlIGV4cGxpY2l0bHkgZGVzdHJveWVkIHdoZW4geW91IGFyZSBmaW5pc2hlZFxuICAgICAqIHdpdGggdGhlbS4gIEluIHBhcnRpY3VsYXIgdGhleSBhcmUgbm90IGF1dG9tYXRpY2FsbHkgZGVzdHJveWVkIHdoZW4gYSBjb250cm9sbGVyJ3Mgc2NvcGUgb3IgYVxuICAgICAqIGRpcmVjdGl2ZSdzIGVsZW1lbnQgYXJlIGRlc3Ryb3llZC5cbiAgICAgKiBZb3Ugc2hvdWxkIHRha2UgdGhpcyBpbnRvIGNvbnNpZGVyYXRpb24gYW5kIG1ha2Ugc3VyZSB0byBhbHdheXMgY2FuY2VsIHRoZSBpbnRlcnZhbCBhdCB0aGVcbiAgICAgKiBhcHByb3ByaWF0ZSBtb21lbnQuICBTZWUgdGhlIGV4YW1wbGUgYmVsb3cgZm9yIG1vcmUgZGV0YWlscyBvbiBob3cgYW5kIHdoZW4gdG8gZG8gdGhpcy5cbiAgICAgKiA8L2Rpdj5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgcmVwZWF0ZWRseS4gSWYgbm8gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICAgKiAgIGFyZSBwYXNzZWQgKHNlZSBiZWxvdyksIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCBpdGVyYXRpb24gY291bnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IE51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiBlYWNoIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBbY291bnQ9MF0gTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdC4gSWYgbm90IHNldCwgb3IgMCwgd2lsbCByZXBlYXRcbiAgICAgKiAgIGluZGVmaW5pdGVseS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW52b2tlQXBwbHk9dHJ1ZV0gSWYgc2V0IHRvIGBmYWxzZWAgc2tpcHMgbW9kZWwgZGlydHkgY2hlY2tpbmcsIG90aGVyd2lzZVxuICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICAgICAqIEBwYXJhbSB7Li4uKj19IFBhc3MgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHRoZSBleGVjdXRlZCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7cHJvbWlzZX0gQSBwcm9taXNlIHdoaWNoIHdpbGwgYmUgbm90aWZpZWQgb24gZWFjaCBpdGVyYXRpb24uIEl0IHdpbGwgcmVzb2x2ZSBvbmNlIGFsbCBpdGVyYXRpb25zIG9mIHRoZSBpbnRlcnZhbCBjb21wbGV0ZS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogPGV4YW1wbGUgbW9kdWxlPVwiaW50ZXJ2YWxFeGFtcGxlXCIgbmFtZT1cImludGVydmFsLXNlcnZpY2VcIj5cbiAgICAgKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAqICAgPHNjcmlwdD5cbiAgICAgKiAgICAgYW5ndWxhci5tb2R1bGUoJ2ludGVydmFsRXhhbXBsZScsIFtdKVxuICAgICAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsXG4gICAgICogICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRpbnRlcnZhbCkge1xuICAgICAqICAgICAgICAgICAkc2NvcGUuZm9ybWF0ID0gJ00vZC95eSBoOm1tOnNzIGEnO1xuICAgICAqICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9IDEwMDtcbiAgICAgKiAgICAgICAgICAgJHNjb3BlLmJsb29kXzIgPSAxMjA7XG4gICAgICpcbiAgICAgKiAgICAgICAgICAgdmFyIHN0b3A7XG4gICAgICogICAgICAgICAgICRzY29wZS5maWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgICAgICAgIC8vIERvbid0IHN0YXJ0IGEgbmV3IGZpZ2h0IGlmIHdlIGFyZSBhbHJlYWR5IGZpZ2h0aW5nXG4gICAgICogICAgICAgICAgICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZChzdG9wKSApIHJldHVybjtcbiAgICAgKlxuICAgICAqICAgICAgICAgICAgIHN0b3AgPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJsb29kXzEgPiAwICYmICRzY29wZS5ibG9vZF8yID4gMCkge1xuICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9ICRzY29wZS5ibG9vZF8xIC0gMztcbiAgICAgKiAgICAgICAgICAgICAgICAgJHNjb3BlLmJsb29kXzIgPSAkc2NvcGUuYmxvb2RfMiAtIDQ7XG4gICAgICogICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0KCk7XG4gICAgICogICAgICAgICAgICAgICB9XG4gICAgICogICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgKiAgICAgICAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHN0b3ApKSB7XG4gICAgICogICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHN0b3ApO1xuICAgICAqICAgICAgICAgICAgICAgc3RvcCA9IHVuZGVmaW5lZDtcbiAgICAgKiAgICAgICAgICAgICB9XG4gICAgICogICAgICAgICAgIH07XG4gICAgICpcbiAgICAgKiAgICAgICAgICAgJHNjb3BlLnJlc2V0RmlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9IDEwMDtcbiAgICAgKiAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9IDEyMDtcbiAgICAgKiAgICAgICAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBpbnRlcnZhbCBpcyBkZXN0cm95ZWQgdG9vXG4gICAgICogICAgICAgICAgICAgJHNjb3BlLnN0b3BGaWdodCgpO1xuICAgICAqICAgICAgICAgICB9KTtcbiAgICAgKiAgICAgICAgIH1dKVxuICAgICAqICAgICAgIC8vIFJlZ2lzdGVyIHRoZSAnbXlDdXJyZW50VGltZScgZGlyZWN0aXZlIGZhY3RvcnkgbWV0aG9kLlxuICAgICAqICAgICAgIC8vIFdlIGluamVjdCAkaW50ZXJ2YWwgYW5kIGRhdGVGaWx0ZXIgc2VydmljZSBzaW5jZSB0aGUgZmFjdG9yeSBtZXRob2QgaXMgREkuXG4gICAgICogICAgICAgLmRpcmVjdGl2ZSgnbXlDdXJyZW50VGltZScsIFsnJGludGVydmFsJywgJ2RhdGVGaWx0ZXInLFxuICAgICAqICAgICAgICAgZnVuY3Rpb24oJGludGVydmFsLCBkYXRlRmlsdGVyKSB7XG4gICAgICogICAgICAgICAgIC8vIHJldHVybiB0aGUgZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb24uIChjb21waWxlIGZ1bmN0aW9uIG5vdCBuZWVkZWQpXG4gICAgICogICAgICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgKiAgICAgICAgICAgICB2YXIgZm9ybWF0LCAgLy8gZGF0ZSBmb3JtYXRcbiAgICAgKiAgICAgICAgICAgICAgICAgc3RvcFRpbWU7IC8vIHNvIHRoYXQgd2UgY2FuIGNhbmNlbCB0aGUgdGltZSB1cGRhdGVzXG4gICAgICpcbiAgICAgKiAgICAgICAgICAgICAvLyB1c2VkIHRvIHVwZGF0ZSB0aGUgVUlcbiAgICAgKiAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKCkge1xuICAgICAqICAgICAgICAgICAgICAgZWxlbWVudC50ZXh0KGRhdGVGaWx0ZXIobmV3IERhdGUoKSwgZm9ybWF0KSk7XG4gICAgICogICAgICAgICAgICAgfVxuICAgICAqXG4gICAgICogICAgICAgICAgICAgLy8gd2F0Y2ggdGhlIGV4cHJlc3Npb24sIGFuZCB1cGRhdGUgdGhlIFVJIG9uIGNoYW5nZS5cbiAgICAgKiAgICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0cnMubXlDdXJyZW50VGltZSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgICAgICAgICAgICAgIGZvcm1hdCA9IHZhbHVlO1xuICAgICAqICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgICAqICAgICAgICAgICAgIH0pO1xuICAgICAqXG4gICAgICogICAgICAgICAgICAgc3RvcFRpbWUgPSAkaW50ZXJ2YWwodXBkYXRlVGltZSwgMTAwMCk7XG4gICAgICpcbiAgICAgKiAgICAgICAgICAgICAvLyBsaXN0ZW4gb24gRE9NIGRlc3Ryb3kgKHJlbW92YWwpIGV2ZW50LCBhbmQgY2FuY2VsIHRoZSBuZXh0IFVJIHVwZGF0ZVxuICAgICAqICAgICAgICAgICAgIC8vIHRvIHByZXZlbnQgdXBkYXRpbmcgdGltZSBhZnRlciB0aGUgRE9NIGVsZW1lbnQgd2FzIHJlbW92ZWQuXG4gICAgICogICAgICAgICAgICAgZWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcFRpbWUpO1xuICAgICAqICAgICAgICAgICAgIH0pO1xuICAgICAqICAgICAgICAgICB9XG4gICAgICogICAgICAgICB9XSk7XG4gICAgICogICA8L3NjcmlwdD5cbiAgICAgKlxuICAgICAqICAgPGRpdj5cbiAgICAgKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgKiAgICAgICA8bGFiZWw+RGF0ZSBmb3JtYXQ6IDxpbnB1dCBuZy1tb2RlbD1cImZvcm1hdFwiPjwvbGFiZWw+IDxoci8+XG4gICAgICogICAgICAgQ3VycmVudCB0aW1lIGlzOiA8c3BhbiBteS1jdXJyZW50LXRpbWU9XCJmb3JtYXRcIj48L3NwYW4+XG4gICAgICogICAgICAgPGhyLz5cbiAgICAgKiAgICAgICBCbG9vZCAxIDogPGZvbnQgY29sb3I9J3JlZCc+e3tibG9vZF8xfX08L2ZvbnQ+XG4gICAgICogICAgICAgQmxvb2QgMiA6IDxmb250IGNvbG9yPSdyZWQnPnt7Ymxvb2RfMn19PC9mb250PlxuICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJmaWdodCgpXCI+RmlnaHQ8L2J1dHRvbj5cbiAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwic3RvcEZpZ2h0KClcIj5TdG9wRmlnaHQ8L2J1dHRvbj5cbiAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwicmVzZXRGaWdodCgpXCI+cmVzZXRGaWdodDwvYnV0dG9uPlxuICAgICAqICAgICA8L2Rpdj5cbiAgICAgKiAgIDwvZGl2PlxuICAgICAqXG4gICAgICogPC9maWxlPlxuICAgICAqIDwvZXhhbXBsZT5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnRlcnZhbChmbiwgZGVsYXksIGNvdW50LCBpbnZva2VBcHBseSkge1xuICAgICAgdmFyIGhhc1BhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0LFxuICAgICAgICAgIGFyZ3MgPSBoYXNQYXJhbXMgPyBzbGljZUFyZ3MoYXJndW1lbnRzLCA0KSA6IFtdLFxuICAgICAgICAgIHNldEludGVydmFsID0gJHdpbmRvdy5zZXRJbnRlcnZhbCxcbiAgICAgICAgICBjbGVhckludGVydmFsID0gJHdpbmRvdy5jbGVhckludGVydmFsLFxuICAgICAgICAgIGl0ZXJhdGlvbiA9IDAsXG4gICAgICAgICAgc2tpcEFwcGx5ID0gKGlzRGVmaW5lZChpbnZva2VBcHBseSkgJiYgIWludm9rZUFwcGx5KSxcbiAgICAgICAgICBkZWZlcnJlZCA9IChza2lwQXBwbHkgPyAkJHEgOiAkcSkuZGVmZXIoKSxcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgY291bnQgPSBpc0RlZmluZWQoY291bnQpID8gY291bnQgOiAwO1xuXG4gICAgICBwcm9taXNlLiQkaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgICAgIGlmIChza2lwQXBwbHkpIHtcbiAgICAgICAgICAkYnJvd3Nlci5kZWZlcihjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBkZWZlcnJlZC5ub3RpZnkoaXRlcmF0aW9uKyspO1xuXG4gICAgICAgIGlmIChjb3VudCA+IDAgJiYgaXRlcmF0aW9uID49IGNvdW50KSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpdGVyYXRpb24pO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwocHJvbWlzZS4kJGludGVydmFsSWQpO1xuICAgICAgICAgIGRlbGV0ZSBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XG5cbiAgICAgIH0sIGRlbGF5KTtcblxuICAgICAgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXSA9IGRlZmVycmVkO1xuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcblxuICAgICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgIGlmICghaGFzUGFyYW1zKSB7XG4gICAgICAgICAgZm4oaXRlcmF0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnZhbCNjYW5jZWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQcm9taXNlPX0gcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYCRpbnRlcnZhbGAgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB0YXNrIHdhcyBzdWNjZXNzZnVsbHkgY2FuY2VsZWQuXG4gICAgICovXG4gICAgaW50ZXJ2YWwuY2FuY2VsID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIGlmICghcHJvbWlzZS5oYXNPd25Qcm9wZXJ0eSgnJCRpbnRlcnZhbElkJykpIHtcbiAgICAgICAgdGhyb3cgJGludGVydmFsTWluRXJyKCdiYWRwcm9tJyxcbiAgICAgICAgICAgICdgJGludGVydmFsLmNhbmNlbCgpYCBjYWxsZWQgd2l0aCBhIHByb21pc2UgdGhhdCB3YXMgbm90IGdlbmVyYXRlZCBieSBgJGludGVydmFsKClgLicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWludGVydmFscy5oYXNPd25Qcm9wZXJ0eShwcm9taXNlLiQkaW50ZXJ2YWxJZCkpIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIGlkID0gcHJvbWlzZS4kJGludGVydmFsSWQ7XG4gICAgICB2YXIgZGVmZXJyZWQgPSBpbnRlcnZhbHNbaWRdO1xuXG4gICAgICAvLyBJbnRlcnZhbCBjYW5jZWxzIHNob3VsZCBub3QgcmVwb3J0IGFuIHVuaGFuZGxlZCBwcm9taXNlLlxuICAgICAgbWFya1FFeGNlcHRpb25IYW5kbGVkKGRlZmVycmVkLnByb21pc2UpO1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCdjYW5jZWxlZCcpO1xuICAgICAgJHdpbmRvdy5jbGVhckludGVydmFsKGlkKTtcbiAgICAgIGRlbGV0ZSBpbnRlcnZhbHNbaWRdO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGludGVydmFsO1xuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIHNlcnZpY2UgaGFuZGxlcyB0aGUgbGlmZWN5Y2xlIG9mIGNhbGxiYWNrcyB0byBoYW5kbGUgSlNPTlAgcmVxdWVzdHMuXG4gKiBPdmVycmlkZSB0aGlzIHNlcnZpY2UgaWYgeW91IHdpc2ggdG8gY3VzdG9taXNlIHdoZXJlIHRoZSBjYWxsYmFja3MgYXJlIHN0b3JlZCBhbmRcbiAqIGhvdyB0aGV5IHZhcnkgY29tcGFyZWQgdG8gdGhlIHJlcXVlc3RlZCB1cmwuXG4gKi9cbnZhciAkanNvbnBDYWxsYmFja3NQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNhbGxiYWNrcyA9IGFuZ3VsYXIuY2FsbGJhY2tzO1xuICAgIHZhciBjYWxsYmFja01hcCA9IHt9O1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2tJZCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjYWxsYmFjay5kYXRhID0gZGF0YTtcbiAgICAgICAgY2FsbGJhY2suY2FsbGVkID0gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBjYWxsYmFjay5pZCA9IGNhbGxiYWNrSWQ7XG4gICAgICByZXR1cm4gY2FsbGJhY2s7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI2NyZWF0ZUNhbGxiYWNrXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIHRoZSB1cmwgb2YgdGhlIEpTT05QIHJlcXVlc3RcbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBjYWxsYmFjayBwYXRoIHRvIHNlbmQgdG8gdGhlIHNlcnZlciBhcyBwYXJ0IG9mIHRoZSBKU09OUCByZXF1ZXN0XG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGNyZWF0ZSBhIGNhbGxiYWNrIGFuZCBnZXQgaG9sZCBvZiB0aGUgcGF0aCB0byB0aGUgY2FsbGJhY2tcbiAgICAgICAqIHRvIHBhc3MgdG8gdGhlIHNlcnZlciwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNhbGwgdGhlIGNhbGxiYWNrIHdpdGggaXRzIHBheWxvYWQgaW4gdGhlIEpTT05QIHJlc3BvbnNlLlxuICAgICAgICovXG4gICAgICBjcmVhdGVDYWxsYmFjazogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBjYWxsYmFja0lkID0gJ18nICsgKGNhbGxiYWNrcy4kJGNvdW50ZXIrKykudG9TdHJpbmcoMzYpO1xuICAgICAgICB2YXIgY2FsbGJhY2tQYXRoID0gJ2FuZ3VsYXIuY2FsbGJhY2tzLicgKyBjYWxsYmFja0lkO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBjcmVhdGVDYWxsYmFjayhjYWxsYmFja0lkKTtcbiAgICAgICAgY2FsbGJhY2tNYXBbY2FsbGJhY2tQYXRoXSA9IGNhbGxiYWNrc1tjYWxsYmFja0lkXSA9IGNhbGxiYWNrO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tQYXRoO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI3dhc0NhbGxlZFxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrUGF0aCB0aGUgcGF0aCB0byB0aGUgY2FsbGJhY2sgdGhhdCB3YXMgc2VudCBpbiB0aGUgSlNPTlAgcmVxdWVzdFxuICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGNhbGxlZCwgYXMgYSByZXN1bHQgb2YgdGhlIEpTT05QIHJlc3BvbnNlXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGZpbmQgb3V0IHdoZXRoZXIgdGhlIEpTT05QIHJlc3BvbnNlIGFjdHVhbGx5IGNhbGxlZCB0aGVcbiAgICAgICAqIGNhbGxiYWNrIHRoYXQgd2FzIHBhc3NlZCBpbiB0aGUgcmVxdWVzdC5cbiAgICAgICAqL1xuICAgICAgd2FzQ2FsbGVkOiBmdW5jdGlvbihjYWxsYmFja1BhdGgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFwW2NhbGxiYWNrUGF0aF0uY2FsbGVkO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI2dldFJlc3BvbnNlXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbGJhY2tQYXRoIHRoZSBwYXRoIHRvIHRoZSBjYWxsYmFjayB0aGF0IHdhcyBzZW50IGluIHRoZSBKU09OUCByZXF1ZXN0XG4gICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIGRhdGEgcmVjZWl2ZWQgZnJvbSB0aGUgcmVzcG9uc2UgdmlhIHRoZSByZWdpc3RlcmVkIGNhbGxiYWNrXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGdldCBob2xkIG9mIHRoZSBkYXRhIHRoYXQgd2FzIHByb3ZpZGVkIHRvIHRoZSBjYWxsYmFja1xuICAgICAgICogaW4gdGhlIEpTT05QIHJlc3BvbnNlLlxuICAgICAgICovXG4gICAgICBnZXRSZXNwb25zZTogZnVuY3Rpb24oY2FsbGJhY2tQYXRoKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFja01hcFtjYWxsYmFja1BhdGhdLmRhdGE7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkanNvbnBDYWxsYmFja3MjcmVtb3ZlQ2FsbGJhY2tcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsYmFja1BhdGggdGhlIHBhdGggdG8gdGhlIGNhbGxiYWNrIHRoYXQgd2FzIHNlbnQgaW4gdGhlIEpTT05QIHJlcXVlc3RcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICoge0BsaW5rICRodHRwQmFja2VuZH0gY2FsbHMgdGhpcyBtZXRob2QgdG8gcmVtb3ZlIHRoZSBjYWxsYmFjayBhZnRlciB0aGUgSlNPTlAgcmVxdWVzdCBoYXNcbiAgICAgICAqIGNvbXBsZXRlZCBvciB0aW1lZC1vdXQuXG4gICAgICAgKi9cbiAgICAgIHJlbW92ZUNhbGxiYWNrOiBmdW5jdGlvbihjYWxsYmFja1BhdGgpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2tNYXBbY2FsbGJhY2tQYXRoXTtcbiAgICAgICAgZGVsZXRlIGNhbGxiYWNrc1tjYWxsYmFjay5pZF07XG4gICAgICAgIGRlbGV0ZSBjYWxsYmFja01hcFtjYWxsYmFja1BhdGhdO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbG9jYWxlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAkbG9jYWxlIHNlcnZpY2UgcHJvdmlkZXMgbG9jYWxpemF0aW9uIHJ1bGVzIGZvciB2YXJpb3VzIEFuZ3VsYXJKUyBjb21wb25lbnRzLiBBcyBvZiByaWdodCBub3cgdGhlXG4gKiBvbmx5IHB1YmxpYyBhcGkgaXM6XG4gKlxuICogKiBgaWRgIOKAkyBge3N0cmluZ31gIOKAkyBsb2NhbGUgaWQgZm9ybWF0dGVkIGFzIGBsYW5ndWFnZUlkLWNvdW50cnlJZGAgKGUuZy4gYGVuLXVzYClcbiAqL1xuXG52YXIgUEFUSF9NQVRDSCA9IC9eKFtePyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyxcbiAgICBERUZBVUxUX1BPUlRTID0geydodHRwJzogODAsICdodHRwcyc6IDQ0MywgJ2Z0cCc6IDIxfTtcbnZhciAkbG9jYXRpb25NaW5FcnIgPSBtaW5FcnIoJyRsb2NhdGlvbicpO1xuXG5cbi8qKlxuICogRW5jb2RlIHBhdGggdXNpbmcgZW5jb2RlVXJpU2VnbWVudCwgaWdub3JpbmcgZm9yd2FyZCBzbGFzaGVzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byBlbmNvZGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJyksXG4gICAgICBpID0gc2VnbWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICAvLyBkZWNvZGUgZm9yd2FyZCBzbGFzaGVzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIGRvdWJsZSBlbmNvZGVkXG4gICAgc2VnbWVudHNbaV0gPSBlbmNvZGVVcmlTZWdtZW50KHNlZ21lbnRzW2ldLnJlcGxhY2UoLyUyRi9nLCAnLycpKTtcbiAgfVxuXG4gIHJldHVybiBzZWdtZW50cy5qb2luKCcvJyk7XG59XG5cbmZ1bmN0aW9uIGRlY29kZVBhdGgocGF0aCwgaHRtbDVNb2RlKSB7XG4gIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy8nKSxcbiAgICAgIGkgPSBzZWdtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHNlZ21lbnRzW2ldID0gZGVjb2RlVVJJQ29tcG9uZW50KHNlZ21lbnRzW2ldKTtcbiAgICBpZiAoaHRtbDVNb2RlKSB7XG4gICAgICAvLyBlbmNvZGUgZm9yd2FyZCBzbGFzaGVzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIG1pc3Rha2VuIGZvciBwYXRoIHNlcGFyYXRvcnNcbiAgICAgIHNlZ21lbnRzW2ldID0gc2VnbWVudHNbaV0ucmVwbGFjZSgvXFwvL2csICclMkYnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2VnbWVudHMuam9pbignLycpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUFic29sdXRlVXJsKGFic29sdXRlVXJsLCBsb2NhdGlvbk9iaikge1xuICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZShhYnNvbHV0ZVVybCk7XG5cbiAgbG9jYXRpb25PYmouJCRwcm90b2NvbCA9IHBhcnNlZFVybC5wcm90b2NvbDtcbiAgbG9jYXRpb25PYmouJCRob3N0ID0gcGFyc2VkVXJsLmhvc3RuYW1lO1xuICBsb2NhdGlvbk9iai4kJHBvcnQgPSB0b0ludChwYXJzZWRVcmwucG9ydCkgfHwgREVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdIHx8IG51bGw7XG59XG5cbnZhciBET1VCTEVfU0xBU0hfUkVHRVggPSAvXlxccypbXFxcXC9dezIsfS87XG5mdW5jdGlvbiBwYXJzZUFwcFVybCh1cmwsIGxvY2F0aW9uT2JqLCBodG1sNU1vZGUpIHtcblxuICBpZiAoRE9VQkxFX1NMQVNIX1JFR0VYLnRlc3QodXJsKSkge1xuICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignYmFkcGF0aCcsICdJbnZhbGlkIHVybCBcInswfVwiLicsIHVybCk7XG4gIH1cblxuICB2YXIgcHJlZml4ZWQgPSAodXJsLmNoYXJBdCgwKSAhPT0gJy8nKTtcbiAgaWYgKHByZWZpeGVkKSB7XG4gICAgdXJsID0gJy8nICsgdXJsO1xuICB9XG4gIHZhciBtYXRjaCA9IHVybFJlc29sdmUodXJsKTtcbiAgdmFyIHBhdGggPSBwcmVmaXhlZCAmJiBtYXRjaC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyA/IG1hdGNoLnBhdGhuYW1lLnN1YnN0cmluZygxKSA6IG1hdGNoLnBhdGhuYW1lO1xuICBsb2NhdGlvbk9iai4kJHBhdGggPSBkZWNvZGVQYXRoKHBhdGgsIGh0bWw1TW9kZSk7XG4gIGxvY2F0aW9uT2JqLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShtYXRjaC5zZWFyY2gpO1xuICBsb2NhdGlvbk9iai4kJGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2guaGFzaCk7XG5cbiAgLy8gbWFrZSBzdXJlIHBhdGggc3RhcnRzIHdpdGggJy8nO1xuICBpZiAobG9jYXRpb25PYmouJCRwYXRoICYmIGxvY2F0aW9uT2JqLiQkcGF0aC5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgIGxvY2F0aW9uT2JqLiQkcGF0aCA9ICcvJyArIGxvY2F0aW9uT2JqLiQkcGF0aDtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdGFydHNXaXRoKHN0ciwgc2VhcmNoKSB7XG4gIHJldHVybiBzdHIuc2xpY2UoMCwgc2VhcmNoLmxlbmd0aCkgPT09IHNlYXJjaDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHJldHVybnMgdGV4dCBmcm9tIGB1cmxgIGFmdGVyIGBiYXNlYCBvciBgdW5kZWZpbmVkYCBpZiBpdCBkb2VzIG5vdCBiZWdpbiB3aXRoXG4gKiAgICAgICAgICAgICAgICAgICB0aGUgZXhwZWN0ZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBzdHJpcEJhc2VVcmwoYmFzZSwgdXJsKSB7XG4gIGlmIChzdGFydHNXaXRoKHVybCwgYmFzZSkpIHtcbiAgICByZXR1cm4gdXJsLnN1YnN0cihiYXNlLmxlbmd0aCk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHJpcEhhc2godXJsKSB7XG4gIHZhciBpbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gIHJldHVybiBpbmRleCA9PT0gLTEgPyB1cmwgOiB1cmwuc3Vic3RyKDAsIGluZGV4KTtcbn1cblxuZnVuY3Rpb24gdHJpbUVtcHR5SGFzaCh1cmwpIHtcbiAgcmV0dXJuIHVybC5yZXBsYWNlKC8oIy4rKXwjJC8sICckMScpO1xufVxuXG5cbmZ1bmN0aW9uIHN0cmlwRmlsZSh1cmwpIHtcbiAgcmV0dXJuIHVybC5zdWJzdHIoMCwgc3RyaXBIYXNoKHVybCkubGFzdEluZGV4T2YoJy8nKSArIDEpO1xufVxuXG4vKiByZXR1cm4gdGhlIHNlcnZlciBvbmx5IChzY2hlbWU6Ly9ob3N0OnBvcnQpICovXG5mdW5jdGlvbiBzZXJ2ZXJCYXNlKHVybCkge1xuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwuaW5kZXhPZignLycsIHVybC5pbmRleE9mKCcvLycpICsgMikpO1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IdG1sNVVybCByZXByZXNlbnRzIGEgVVJMXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gSFRNTDUgbW9kZSBpcyBlbmFibGVkIGFuZCBzdXBwb3J0ZWRcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZU5vRmlsZSBhcHBsaWNhdGlvbiBiYXNlIFVSTCBzdHJpcHBlZCBvZiBhbnkgZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlUHJlZml4IFVSTCBwYXRoIHByZWZpeFxuICovXG5mdW5jdGlvbiBMb2NhdGlvbkh0bWw1VXJsKGFwcEJhc2UsIGFwcEJhc2VOb0ZpbGUsIGJhc2VQcmVmaXgpIHtcbiAgdGhpcy4kJGh0bWw1ID0gdHJ1ZTtcbiAgYmFzZVByZWZpeCA9IGJhc2VQcmVmaXggfHwgJyc7XG4gIHBhcnNlQWJzb2x1dGVVcmwoYXBwQmFzZSwgdGhpcyk7XG5cblxuICAvKipcbiAgICogUGFyc2UgZ2l2ZW4gSFRNTDUgKHJlZ3VsYXIpIFVSTCBzdHJpbmcgaW50byBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSFRNTDUgVVJMXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgcGF0aFVybCA9IHN0cmlwQmFzZVVybChhcHBCYXNlTm9GaWxlLCB1cmwpO1xuICAgIGlmICghaXNTdHJpbmcocGF0aFVybCkpIHtcbiAgICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignaXB0aHByZngnLCAnSW52YWxpZCB1cmwgXCJ7MH1cIiwgbWlzc2luZyBwYXRoIHByZWZpeCBcInsxfVwiLicsIHVybCxcbiAgICAgICAgICBhcHBCYXNlTm9GaWxlKTtcbiAgICB9XG5cbiAgICBwYXJzZUFwcFVybChwYXRoVXJsLCB0aGlzLCB0cnVlKTtcblxuICAgIGlmICghdGhpcy4kJHBhdGgpIHtcbiAgICAgIHRoaXMuJCRwYXRoID0gJy8nO1xuICAgIH1cblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbXBvc2UgdXJsIGFuZCB1cGRhdGUgYGFic1VybGAgcHJvcGVydHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XG5cbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZU5vRmlsZSArIHRoaXMuJCR1cmwuc3Vic3RyKDEpOyAvLyBmaXJzdCBjaGFyIGlzIGFsd2F5cyAnLydcblxuICAgIHRoaXMuJCR1cmxVcGRhdGVkQnlMb2NhdGlvbiA9IHRydWU7XG4gIH07XG5cbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xuICAgIGlmIChyZWxIcmVmICYmIHJlbEhyZWZbMF0gPT09ICcjJykge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBsaW5rcyB0byBoYXNoIGZyYWdtZW50czpcbiAgICAgIC8vIGtlZXAgdGhlIG9sZCB1cmwgYW5kIG9ubHkgcmVwbGFjZSB0aGUgaGFzaCBmcmFnbWVudFxuICAgICAgdGhpcy5oYXNoKHJlbEhyZWYuc2xpY2UoMSkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBhcHBVcmwsIHByZXZBcHBVcmw7XG4gICAgdmFyIHJld3JpdHRlblVybDtcblxuXG4gICAgaWYgKGlzRGVmaW5lZChhcHBVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZSwgdXJsKSkpIHtcbiAgICAgIHByZXZBcHBVcmwgPSBhcHBVcmw7XG4gICAgICBpZiAoYmFzZVByZWZpeCAmJiBpc0RlZmluZWQoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGJhc2VQcmVmaXgsIGFwcFVybCkpKSB7XG4gICAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGUgKyAoc3RyaXBCYXNlVXJsKCcvJywgYXBwVXJsKSB8fCBhcHBVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZSArIHByZXZBcHBVcmw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0RlZmluZWQoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGFwcEJhc2VOb0ZpbGUsIHVybCkpKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlICsgYXBwVXJsO1xuICAgIH0gZWxzZSBpZiAoYXBwQmFzZU5vRmlsZSA9PT0gdXJsICsgJy8nKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xuICAgIH1cbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xuICB9O1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIFVSTFxuICogVGhpcyBvYmplY3QgaXMgZXhwb3NlZCBhcyAkbG9jYXRpb24gc2VydmljZSB3aGVuIGRldmVsb3BlciBkb2Vzbid0IG9wdCBpbnRvIGh0bWw1IG1vZGUuXG4gKiBJdCBhbHNvIHNlcnZlcyBhcyB0aGUgYmFzZSBjbGFzcyBmb3IgaHRtbDUgbW9kZSBmYWxsYmFjayBvbiBsZWdhY3kgYnJvd3NlcnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZSBhcHBsaWNhdGlvbiBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2VOb0ZpbGUgYXBwbGljYXRpb24gYmFzZSBVUkwgc3RyaXBwZWQgb2YgYW55IGZpbGVuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaFByZWZpeCBoYXNoYmFuZyBwcmVmaXhcbiAqL1xuZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ1VybChhcHBCYXNlLCBhcHBCYXNlTm9GaWxlLCBoYXNoUHJlZml4KSB7XG5cbiAgcGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLCB0aGlzKTtcblxuXG4gIC8qKlxuICAgKiBQYXJzZSBnaXZlbiBoYXNoYmFuZyBVUkwgaW50byBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSGFzaGJhbmcgVVJMXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgd2l0aG91dEJhc2VVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZSwgdXJsKSB8fCBzdHJpcEJhc2VVcmwoYXBwQmFzZU5vRmlsZSwgdXJsKTtcbiAgICB2YXIgd2l0aG91dEhhc2hVcmw7XG5cbiAgICBpZiAoIWlzVW5kZWZpbmVkKHdpdGhvdXRCYXNlVXJsKSAmJiB3aXRob3V0QmFzZVVybC5jaGFyQXQoMCkgPT09ICcjJykge1xuXG4gICAgICAvLyBUaGUgcmVzdCBvZiB0aGUgVVJMIHN0YXJ0cyB3aXRoIGEgaGFzaCBzbyB3ZSBoYXZlXG4gICAgICAvLyBnb3QgZWl0aGVyIGEgaGFzaGJhbmcgcGF0aCBvciBhIHBsYWluIGhhc2ggZnJhZ21lbnRcbiAgICAgIHdpdGhvdXRIYXNoVXJsID0gc3RyaXBCYXNlVXJsKGhhc2hQcmVmaXgsIHdpdGhvdXRCYXNlVXJsKTtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0SGFzaFVybCkpIHtcbiAgICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHByZWZpeCBzbyB3ZSBqdXN0IGhhdmUgYSBoYXNoIGZyYWdtZW50XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gd2l0aG91dEJhc2VVcmw7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHBhdGggbm9yIGhhc2ggZnJhZ21lbnQ6XG4gICAgICAvLyBJZiB3ZSBhcmUgaW4gSFRNTDUgbW9kZSB3ZSB1c2Ugd2hhdCBpcyBsZWZ0IGFzIHRoZSBwYXRoO1xuICAgICAgLy8gT3RoZXJ3aXNlIHdlIGlnbm9yZSB3aGF0IGlzIGxlZnRcbiAgICAgIGlmICh0aGlzLiQkaHRtbDUpIHtcbiAgICAgICAgd2l0aG91dEhhc2hVcmwgPSB3aXRob3V0QmFzZVVybDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gJyc7XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0QmFzZVVybCkpIHtcbiAgICAgICAgICBhcHBCYXNlID0gdXJsO1xuICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHRoaXMpLnJlcGxhY2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBhcnNlQXBwVXJsKHdpdGhvdXRIYXNoVXJsLCB0aGlzLCBmYWxzZSk7XG5cbiAgICB0aGlzLiQkcGF0aCA9IHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUodGhpcy4kJHBhdGgsIHdpdGhvdXRIYXNoVXJsLCBhcHBCYXNlKTtcblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG5cbiAgICAvKlxuICAgICAqIEluIFdpbmRvd3MsIG9uIGFuIGFuY2hvciBub2RlIG9uIGRvY3VtZW50cyBsb2FkZWQgZnJvbVxuICAgICAqIHRoZSBmaWxlc3lzdGVtLCB0aGUgYnJvd3NlciB3aWxsIHJldHVybiBhIHBhdGhuYW1lXG4gICAgICogcHJlZml4ZWQgd2l0aCB0aGUgZHJpdmUgbmFtZSAoJy9DOi9wYXRoJykgd2hlbiBhXG4gICAgICogcGF0aG5hbWUgd2l0aG91dCBhIGRyaXZlIGlzIHNldDpcbiAgICAgKiAgKiBhLnNldEF0dHJpYnV0ZSgnaHJlZicsICcvZm9vJylcbiAgICAgKiAgICogYS5wYXRobmFtZSA9PT0gJy9DOi9mb28nIC8vdHJ1ZVxuICAgICAqXG4gICAgICogSW5zaWRlIG9mIEFuZ3VsYXJKUywgd2UncmUgYWx3YXlzIHVzaW5nIHBhdGhuYW1lcyB0aGF0XG4gICAgICogZG8gbm90IGluY2x1ZGUgZHJpdmUgbmFtZXMgZm9yIHJvdXRpbmcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlV2luZG93c0RyaXZlTmFtZShwYXRoLCB1cmwsIGJhc2UpIHtcbiAgICAgIC8qXG4gICAgICBNYXRjaGVzIHBhdGhzIGZvciBmaWxlIHByb3RvY29sIG9uIHdpbmRvd3MsXG4gICAgICBzdWNoIGFzIC9DOi9mb28vYmFyLCBhbmQgY2FwdHVyZXMgb25seSAvZm9vL2Jhci5cbiAgICAgICovXG4gICAgICB2YXIgd2luZG93c0ZpbGVQYXRoRXhwID0gL15cXC9bQS1aXTooXFwvLiopLztcblxuICAgICAgdmFyIGZpcnN0UGF0aFNlZ21lbnRNYXRjaDtcblxuICAgICAgLy9HZXQgdGhlIHJlbGF0aXZlIHBhdGggZnJvbSB0aGUgaW5wdXQgVVJMLlxuICAgICAgaWYgKHN0YXJ0c1dpdGgodXJsLCBiYXNlKSkge1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShiYXNlLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBpbnB1dCBVUkwgaW50ZW50aW9uYWxseSBjb250YWlucyBhIGZpcnN0IHBhdGggc2VnbWVudCB0aGF0IGVuZHMgd2l0aCBhIGNvbG9uLlxuICAgICAgaWYgKHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHVybCkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICB9XG5cbiAgICAgIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA9IHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHBhdGgpO1xuICAgICAgcmV0dXJuIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA/IGZpcnN0UGF0aFNlZ21lbnRNYXRjaFsxXSA6IHBhdGg7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDb21wb3NlIGhhc2hiYW5nIFVSTCBhbmQgdXBkYXRlIGBhYnNVcmxgIHByb3BlcnR5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWFyY2ggPSB0b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLFxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xuXG4gICAgdGhpcy4kJHVybCA9IGVuY29kZVBhdGgodGhpcy4kJHBhdGgpICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIGhhc2g7XG4gICAgdGhpcy4kJGFic1VybCA9IGFwcEJhc2UgKyAodGhpcy4kJHVybCA/IGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsIDogJycpO1xuXG4gICAgdGhpcy4kJHVybFVwZGF0ZWRCeUxvY2F0aW9uID0gdHJ1ZTtcbiAgfTtcblxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XG4gICAgaWYgKHN0cmlwSGFzaChhcHBCYXNlKSA9PT0gc3RyaXBIYXNoKHVybCkpIHtcbiAgICAgIHRoaXMuJCRwYXJzZSh1cmwpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIExvY2F0aW9uSGFzaGJhbmdVcmwgcmVwcmVzZW50cyBVUkxcbiAqIFRoaXMgb2JqZWN0IGlzIGV4cG9zZWQgYXMgJGxvY2F0aW9uIHNlcnZpY2Ugd2hlbiBodG1sNSBoaXN0b3J5IGFwaSBpcyBlbmFibGVkIGJ1dCB0aGUgYnJvd3NlclxuICogZG9lcyBub3Qgc3VwcG9ydCBpdC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZU5vRmlsZSBhcHBsaWNhdGlvbiBiYXNlIFVSTCBzdHJpcHBlZCBvZiBhbnkgZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoUHJlZml4IGhhc2hiYW5nIHByZWZpeFxuICovXG5mdW5jdGlvbiBMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybChhcHBCYXNlLCBhcHBCYXNlTm9GaWxlLCBoYXNoUHJlZml4KSB7XG4gIHRoaXMuJCRodG1sNSA9IHRydWU7XG4gIExvY2F0aW9uSGFzaGJhbmdVcmwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XG4gICAgaWYgKHJlbEhyZWYgJiYgcmVsSHJlZlswXSA9PT0gJyMnKSB7XG4gICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIGxpbmtzIHRvIGhhc2ggZnJhZ21lbnRzOlxuICAgICAgLy8ga2VlcCB0aGUgb2xkIHVybCBhbmQgb25seSByZXBsYWNlIHRoZSBoYXNoIGZyYWdtZW50XG4gICAgICB0aGlzLmhhc2gocmVsSHJlZi5zbGljZSgxKSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgcmV3cml0dGVuVXJsO1xuICAgIHZhciBhcHBVcmw7XG5cbiAgICBpZiAoYXBwQmFzZSA9PT0gc3RyaXBIYXNoKHVybCkpIHtcbiAgICAgIHJld3JpdHRlblVybCA9IHVybDtcbiAgICB9IGVsc2UgaWYgKChhcHBVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZU5vRmlsZSwgdXJsKSkpIHtcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2UgKyBoYXNoUHJlZml4ICsgYXBwVXJsO1xuICAgIH0gZWxzZSBpZiAoYXBwQmFzZU5vRmlsZSA9PT0gdXJsICsgJy8nKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xuICAgIH1cbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xuICB9O1xuXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XG5cbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcbiAgICAvLyBpbmNsdWRlIGhhc2hQcmVmaXggaW4gJCRhYnNVcmwgd2hlbiAkJHVybCBpcyBlbXB0eSBzbyBJRTkgZG9lcyBub3QgcmVsb2FkIHBhZ2UgYmVjYXVzZSBvZiByZW1vdmFsIG9mICcjJ1xuICAgIHRoaXMuJCRhYnNVcmwgPSBhcHBCYXNlICsgaGFzaFByZWZpeCArIHRoaXMuJCR1cmw7XG5cbiAgICB0aGlzLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24gPSB0cnVlO1xuICB9O1xuXG59XG5cblxudmFyIGxvY2F0aW9uUHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBFbnN1cmUgYWJzb2x1dGUgVVJMIGlzIGluaXRpYWxpemVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRhYnNVcmw6JycsXG5cbiAgLyoqXG4gICAqIEFyZSB3ZSBpbiBodG1sNSBtb2RlP1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRodG1sNTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEhhcyBhbnkgY2hhbmdlIGJlZW4gcmVwbGFjaW5nP1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRyZXBsYWNlOiBmYWxzZSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jYWJzVXJsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cbiAgICpcbiAgICogUmV0dXJuIGZ1bGwgVVJMIHJlcHJlc2VudGF0aW9uIHdpdGggYWxsIHNlZ21lbnRzIGVuY29kZWQgYWNjb3JkaW5nIHRvIHJ1bGVzIHNwZWNpZmllZCBpblxuICAgKiBbUkZDIDM5ODZdKGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzM5ODYudHh0KS5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBhYnNVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG4gICAqIC8vID0+IFwiaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSBmdWxsIFVSTFxuICAgKi9cbiAgYWJzVXJsOiBsb2NhdGlvbkdldHRlcignJCRhYnNVcmwnKSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jdXJsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBVUkwgKGUuZy4gYC9wYXRoP2E9YiNoYXNoYCkgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2UgcGF0aCwgc2VhcmNoIGFuZCBoYXNoLCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBnaXZlbiBVUkwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cbiAgICogdmFyIHVybCA9ICRsb2NhdGlvbi51cmwoKTtcbiAgICogLy8gPT4gXCIvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB1cmwgTmV3IFVSTCB3aXRob3V0IGJhc2UgcHJlZml4IChlLmcuIGAvcGF0aD9hPWIjaGFzaGApXG4gICAqIEByZXR1cm4ge3N0cmluZ30gdXJsXG4gICAqL1xuICB1cmw6IGZ1bmN0aW9uKHVybCkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh1cmwpKSB7XG4gICAgICByZXR1cm4gdGhpcy4kJHVybDtcbiAgICB9XG5cbiAgICB2YXIgbWF0Y2ggPSBQQVRIX01BVENILmV4ZWModXJsKTtcbiAgICBpZiAobWF0Y2hbMV0gfHwgdXJsID09PSAnJykgdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFsxXSkpO1xuICAgIGlmIChtYXRjaFsyXSB8fCBtYXRjaFsxXSB8fCB1cmwgPT09ICcnKSB0aGlzLnNlYXJjaChtYXRjaFszXSB8fCAnJyk7XG4gICAgdGhpcy5oYXNoKG1hdGNoWzVdIHx8ICcnKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwcm90b2NvbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXG4gICAqXG4gICAqIFJldHVybiBwcm90b2NvbCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBwcm90b2NvbCA9ICRsb2NhdGlvbi5wcm90b2NvbCgpO1xuICAgKiAvLyA9PiBcImh0dHBcIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSBwcm90b2NvbCBvZiBjdXJyZW50IFVSTFxuICAgKi9cbiAgcHJvdG9jb2w6IGxvY2F0aW9uR2V0dGVyKCckJHByb3RvY29sJyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hvc3RcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxuICAgKlxuICAgKiBSZXR1cm4gaG9zdCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICogTm90ZTogY29tcGFyZWQgdG8gdGhlIG5vbi1Bbmd1bGFySlMgdmVyc2lvbiBgbG9jYXRpb24uaG9zdGAgd2hpY2ggcmV0dXJucyBgaG9zdG5hbWU6cG9ydGAsIHRoaXMgcmV0dXJucyB0aGUgYGhvc3RuYW1lYCBwb3J0aW9uIG9ubHkuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgaG9zdCA9ICRsb2NhdGlvbi5ob3N0KCk7XG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb21cIlxuICAgKlxuICAgKiAvLyBnaXZlbiBVUkwgaHR0cDovL3VzZXI6cGFzc3dvcmRAZXhhbXBsZS5jb206ODA4MC8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIGhvc3QgPSAkbG9jYXRpb24uaG9zdCgpO1xuICAgKiAvLyA9PiBcImV4YW1wbGUuY29tXCJcbiAgICogaG9zdCA9IGxvY2F0aW9uLmhvc3Q7XG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb206ODA4MFwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGhvc3Qgb2YgY3VycmVudCBVUkwuXG4gICAqL1xuICBob3N0OiBsb2NhdGlvbkdldHRlcignJCRob3N0JyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3BvcnRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxuICAgKlxuICAgKiBSZXR1cm4gcG9ydCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBwb3J0ID0gJGxvY2F0aW9uLnBvcnQoKTtcbiAgICogLy8gPT4gODBcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4ge051bWJlcn0gcG9ydFxuICAgKi9cbiAgcG9ydDogbG9jYXRpb25HZXR0ZXIoJyQkcG9ydCcpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwYXRoXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBwYXRoIG9mIGN1cnJlbnQgVVJMIHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cbiAgICpcbiAgICogQ2hhbmdlIHBhdGggd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICogTm90ZTogUGF0aCBzaG91bGQgYWx3YXlzIGJlZ2luIHdpdGggZm9yd2FyZCBzbGFzaCAoLyksIHRoaXMgbWV0aG9kIHdpbGwgYWRkIHRoZSBmb3J3YXJkIHNsYXNoXG4gICAqIGlmIGl0IGlzIG1pc3NpbmcuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgcGF0aCA9ICRsb2NhdGlvbi5wYXRoKCk7XG4gICAqIC8vID0+IFwiL3NvbWUvcGF0aFwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IHBhdGggTmV3IHBhdGhcbiAgICogQHJldHVybiB7KHN0cmluZ3xvYmplY3QpfSBwYXRoIGlmIGNhbGxlZCB3aXRoIG5vIHBhcmFtZXRlcnMsIG9yIGAkbG9jYXRpb25gIGlmIGNhbGxlZCB3aXRoIGEgcGFyYW1ldGVyXG4gICAqL1xuICBwYXRoOiBsb2NhdGlvbkdldHRlclNldHRlcignJCRwYXRoJywgZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBwYXRoICE9PSBudWxsID8gcGF0aC50b1N0cmluZygpIDogJyc7XG4gICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogJy8nICsgcGF0aDtcbiAgfSksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3NlYXJjaFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gc2VhcmNoIHBhcnQgKGFzIG9iamVjdCkgb2YgY3VycmVudCBVUkwgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2Ugc2VhcmNoIHBhcnQgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBzZWFyY2hPYmplY3QgPSAkbG9jYXRpb24uc2VhcmNoKCk7XG4gICAqIC8vID0+IHtmb286ICdiYXInLCBiYXo6ICd4b3hvJ31cbiAgICpcbiAgICogLy8gc2V0IGZvbyB0byAneWlwZWUnXG4gICAqICRsb2NhdGlvbi5zZWFyY2goJ2ZvbycsICd5aXBlZScpO1xuICAgKiAvLyAkbG9jYXRpb24uc2VhcmNoKCkgPT4ge2ZvbzogJ3lpcGVlJywgYmF6OiAneG94byd9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZz58T2JqZWN0LjxBcnJheS48c3RyaW5nPj59IHNlYXJjaCBOZXcgc2VhcmNoIHBhcmFtcyAtIHN0cmluZyBvclxuICAgKiBoYXNoIG9iamVjdC5cbiAgICpcbiAgICogV2hlbiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCB0aGUgbWV0aG9kIGFjdHMgYXMgYSBzZXR0ZXIsIHNldHRpbmcgdGhlIGBzZWFyY2hgIGNvbXBvbmVudFxuICAgKiBvZiBgJGxvY2F0aW9uYCB0byB0aGUgc3BlY2lmaWVkIHZhbHVlLlxuICAgKlxuICAgKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBoYXNoIG9iamVjdCBjb250YWluaW5nIGFuIGFycmF5IG9mIHZhbHVlcywgdGhlc2UgdmFsdWVzIHdpbGwgYmUgZW5jb2RlZFxuICAgKiBhcyBkdXBsaWNhdGUgc2VhcmNoIHBhcmFtZXRlcnMgaW4gdGhlIFVSTC5cbiAgICpcbiAgICogQHBhcmFtIHsoc3RyaW5nfE51bWJlcnxBcnJheTxzdHJpbmc+fGJvb2xlYW4pPX0gcGFyYW1WYWx1ZSBJZiBgc2VhcmNoYCBpcyBhIHN0cmluZyBvciBudW1iZXIsIHRoZW4gYHBhcmFtVmFsdWVgXG4gICAqIHdpbGwgb3ZlcnJpZGUgb25seSBhIHNpbmdsZSBzZWFyY2ggcHJvcGVydHkuXG4gICAqXG4gICAqIElmIGBwYXJhbVZhbHVlYCBpcyBhbiBhcnJheSwgaXQgd2lsbCBvdmVycmlkZSB0aGUgcHJvcGVydHkgb2YgdGhlIGBzZWFyY2hgIGNvbXBvbmVudCBvZlxuICAgKiBgJGxvY2F0aW9uYCBzcGVjaWZpZWQgdmlhIHRoZSBmaXJzdCBhcmd1bWVudC5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGBudWxsYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgZGVsZXRlZC5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGB0cnVlYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgYWRkZWQgd2l0aCBub1xuICAgKiB2YWx1ZSBub3IgdHJhaWxpbmcgZXF1YWwgc2lnbi5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBJZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyB0aGUgcGFyc2VkIGBzZWFyY2hgIG9iamVjdC4gSWYgY2FsbGVkIHdpdGhcbiAgICogb25lIG9yIG1vcmUgYXJndW1lbnRzIHJldHVybnMgYCRsb2NhdGlvbmAgb2JqZWN0IGl0c2VsZi5cbiAgICovXG4gIHNlYXJjaDogZnVuY3Rpb24oc2VhcmNoLCBwYXJhbVZhbHVlKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiB0aGlzLiQkc2VhcmNoO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBpZiAoaXNTdHJpbmcoc2VhcmNoKSB8fCBpc051bWJlcihzZWFyY2gpKSB7XG4gICAgICAgICAgc2VhcmNoID0gc2VhcmNoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgdGhpcy4kJHNlYXJjaCA9IHBhcnNlS2V5VmFsdWUoc2VhcmNoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChzZWFyY2gpKSB7XG4gICAgICAgICAgc2VhcmNoID0gY29weShzZWFyY2gsIHt9KTtcbiAgICAgICAgICAvLyByZW1vdmUgb2JqZWN0IHVuZGVmaW5lZCBvciBudWxsIHByb3BlcnRpZXNcbiAgICAgICAgICBmb3JFYWNoKHNlYXJjaCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIGRlbGV0ZSBzZWFyY2hba2V5XTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuJCRzZWFyY2ggPSBzZWFyY2g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdpc3JjaGFyZycsXG4gICAgICAgICAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgb2YgdGhlIGAkbG9jYXRpb24jc2VhcmNoKClgIGNhbGwgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocGFyYW1WYWx1ZSkgfHwgcGFyYW1WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLiQkc2VhcmNoW3NlYXJjaF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kJHNlYXJjaFtzZWFyY2hdID0gcGFyYW1WYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hhc2hcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cbiAgICpcbiAgICogUmV0dXJucyB0aGUgaGFzaCBmcmFnbWVudCB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBDaGFuZ2VzIHRoZSBoYXNoIGZyYWdtZW50IHdoZW4gY2FsbGVkIHdpdGggYSBwYXJhbWV0ZXIgYW5kIHJldHVybnMgYCRsb2NhdGlvbmAuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94byNoYXNoVmFsdWVcbiAgICogdmFyIGhhc2ggPSAkbG9jYXRpb24uaGFzaCgpO1xuICAgKiAvLyA9PiBcImhhc2hWYWx1ZVwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IGhhc2ggTmV3IGhhc2ggZnJhZ21lbnRcbiAgICogQHJldHVybiB7c3RyaW5nfSBoYXNoXG4gICAqL1xuICBoYXNoOiBsb2NhdGlvbkdldHRlclNldHRlcignJCRoYXNoJywgZnVuY3Rpb24oaGFzaCkge1xuICAgIHJldHVybiBoYXNoICE9PSBudWxsID8gaGFzaC50b1N0cmluZygpIDogJyc7XG4gIH0pLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNyZXBsYWNlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBJZiBjYWxsZWQsIGFsbCBjaGFuZ2VzIHRvICRsb2NhdGlvbiBkdXJpbmcgdGhlIGN1cnJlbnQgYCRkaWdlc3RgIHdpbGwgcmVwbGFjZSB0aGUgY3VycmVudCBoaXN0b3J5XG4gICAqIHJlY29yZCwgaW5zdGVhZCBvZiBhZGRpbmcgYSBuZXcgb25lLlxuICAgKi9cbiAgcmVwbGFjZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJHJlcGxhY2UgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5mb3JFYWNoKFtMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCwgTG9jYXRpb25IYXNoYmFuZ1VybCwgTG9jYXRpb25IdG1sNVVybF0sIGZ1bmN0aW9uKExvY2F0aW9uKSB7XG4gIExvY2F0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobG9jYXRpb25Qcm90b3R5cGUpO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNzdGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gdGhlIGhpc3Rvcnkgc3RhdGUgb2JqZWN0IHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cbiAgICpcbiAgICogQ2hhbmdlIHRoZSBoaXN0b3J5IHN0YXRlIG9iamVjdCB3aGVuIGNhbGxlZCB3aXRoIG9uZSBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICogVGhlIHN0YXRlIG9iamVjdCBpcyBsYXRlciBwYXNzZWQgdG8gYHB1c2hTdGF0ZWAgb3IgYHJlcGxhY2VTdGF0ZWAuXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgbWV0aG9kIGlzIHN1cHBvcnRlZCBvbmx5IGluIEhUTUw1IG1vZGUgYW5kIG9ubHkgaW4gYnJvd3NlcnMgc3VwcG9ydGluZ1xuICAgKiB0aGUgSFRNTDUgSGlzdG9yeSBBUEkgKGkuZS4gbWV0aG9kcyBgcHVzaFN0YXRlYCBhbmQgYHJlcGxhY2VTdGF0ZWApLiBJZiB5b3UgbmVlZCB0byBzdXBwb3J0XG4gICAqIG9sZGVyIGJyb3dzZXJzIChsaWtlIElFOSBvciBBbmRyb2lkIDwgNC4wKSwgZG9uJ3QgdXNlIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdD19IHN0YXRlIFN0YXRlIG9iamVjdCBmb3IgcHVzaFN0YXRlIG9yIHJlcGxhY2VTdGF0ZVxuICAgKiBAcmV0dXJuIHtvYmplY3R9IHN0YXRlXG4gICAqL1xuICBMb2NhdGlvbi5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuJCRzdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoTG9jYXRpb24gIT09IExvY2F0aW9uSHRtbDVVcmwgfHwgIXRoaXMuJCRodG1sNSkge1xuICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdub3N0YXRlJywgJ0hpc3RvcnkgQVBJIHN0YXRlIHN1cHBvcnQgaXMgYXZhaWxhYmxlIG9ubHkgJyArXG4gICAgICAgICdpbiBIVE1MNSBtb2RlIGFuZCBvbmx5IGluIGJyb3dzZXJzIHN1cHBvcnRpbmcgSFRNTDUgSGlzdG9yeSBBUEknKTtcbiAgICB9XG4gICAgLy8gVGhlIHVzZXIgbWlnaHQgbW9kaWZ5IGBzdGF0ZU9iamVjdGAgYWZ0ZXIgaW52b2tpbmcgYCRsb2NhdGlvbi5zdGF0ZShzdGF0ZU9iamVjdClgXG4gICAgLy8gYnV0IHdlJ3JlIGNoYW5naW5nIHRoZSAkJHN0YXRlIHJlZmVyZW5jZSB0byAkYnJvd3Nlci5zdGF0ZSgpIGR1cmluZyB0aGUgJGRpZ2VzdFxuICAgIC8vIHNvIHRoZSBtb2RpZmljYXRpb24gd2luZG93IGlzIG5hcnJvdy5cbiAgICB0aGlzLiQkc3RhdGUgPSBpc1VuZGVmaW5lZChzdGF0ZSkgPyBudWxsIDogc3RhdGU7XG4gICAgdGhpcy4kJHVybFVwZGF0ZWRCeUxvY2F0aW9uID0gdHJ1ZTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xufSk7XG5cblxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXIocHJvcGVydHkpIHtcbiAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpc1twcm9wZXJ0eV07XG4gIH07XG59XG5cblxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXJTZXR0ZXIocHJvcGVydHksIHByZXByb2Nlc3MpIHtcbiAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0aGlzW3Byb3BlcnR5XTtcbiAgICB9XG5cbiAgICB0aGlzW3Byb3BlcnR5XSA9IHByZXByb2Nlc3ModmFsdWUpO1xuICAgIHRoaXMuJCRjb21wb3NlKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbG9jYXRpb25cbiAqXG4gKiBAcmVxdWlyZXMgJHJvb3RFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgJGxvY2F0aW9uIHNlcnZpY2UgcGFyc2VzIHRoZSBVUkwgaW4gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIgKGJhc2VkIG9uIHRoZVxuICogW3dpbmRvdy5sb2NhdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vd2luZG93LmxvY2F0aW9uKSkgYW5kIG1ha2VzIHRoZSBVUkxcbiAqIGF2YWlsYWJsZSB0byB5b3VyIGFwcGxpY2F0aW9uLiBDaGFuZ2VzIHRvIHRoZSBVUkwgaW4gdGhlIGFkZHJlc3MgYmFyIGFyZSByZWZsZWN0ZWQgaW50b1xuICogJGxvY2F0aW9uIHNlcnZpY2UgYW5kIGNoYW5nZXMgdG8gJGxvY2F0aW9uIGFyZSByZWZsZWN0ZWQgaW50byB0aGUgYnJvd3NlciBhZGRyZXNzIGJhci5cbiAqXG4gKiAqKlRoZSAkbG9jYXRpb24gc2VydmljZToqKlxuICpcbiAqIC0gRXhwb3NlcyB0aGUgY3VycmVudCBVUkwgaW4gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIsIHNvIHlvdSBjYW5cbiAqICAgLSBXYXRjaCBhbmQgb2JzZXJ2ZSB0aGUgVVJMLlxuICogICAtIENoYW5nZSB0aGUgVVJMLlxuICogLSBTeW5jaHJvbml6ZXMgdGhlIFVSTCB3aXRoIHRoZSBicm93c2VyIHdoZW4gdGhlIHVzZXJcbiAqICAgLSBDaGFuZ2VzIHRoZSBhZGRyZXNzIGJhci5cbiAqICAgLSBDbGlja3MgdGhlIGJhY2sgb3IgZm9yd2FyZCBidXR0b24gKG9yIGNsaWNrcyBhIEhpc3RvcnkgbGluaykuXG4gKiAgIC0gQ2xpY2tzIG9uIGEgbGluay5cbiAqIC0gUmVwcmVzZW50cyB0aGUgVVJMIG9iamVjdCBhcyBhIHNldCBvZiBtZXRob2RzIChwcm90b2NvbCwgaG9zdCwgcG9ydCwgcGF0aCwgc2VhcmNoLCBoYXNoKS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiBEZXZlbG9wZXIgR3VpZGU6IFVzaW5nICRsb2NhdGlvbn1cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgdGhlIGAkbG9jYXRpb25Qcm92aWRlcmAgdG8gY29uZmlndXJlIGhvdyB0aGUgYXBwbGljYXRpb24gZGVlcCBsaW5raW5nIHBhdGhzIGFyZSBzdG9yZWQuXG4gKi9cbmZ1bmN0aW9uICRMb2NhdGlvblByb3ZpZGVyKCkge1xuICB2YXIgaGFzaFByZWZpeCA9ICchJyxcbiAgICAgIGh0bWw1TW9kZSA9IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIHJlcXVpcmVCYXNlOiB0cnVlLFxuICAgICAgICByZXdyaXRlTGlua3M6IHRydWVcbiAgICAgIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaGFzaFByZWZpeFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBwcmVmaXggaXMgYCchJ2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcHJlZml4IFByZWZpeCBmb3IgaGFzaCBwYXJ0IChjb250YWluaW5nIHBhdGggYW5kIHNlYXJjaClcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuaGFzaFByZWZpeCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIGlmIChpc0RlZmluZWQocHJlZml4KSkge1xuICAgICAgaGFzaFByZWZpeCA9IHByZWZpeDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaGFzaFByZWZpeDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaHRtbDVNb2RlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBAcGFyYW0geyhib29sZWFufE9iamVjdCk9fSBtb2RlIElmIGJvb2xlYW4sIHNldHMgYGh0bWw1TW9kZS5lbmFibGVkYCB0byB2YWx1ZS5cbiAgICogICBJZiBvYmplY3QsIHNldHMgYGVuYWJsZWRgLCBgcmVxdWlyZUJhc2VgIGFuZCBgcmV3cml0ZUxpbmtzYCB0byByZXNwZWN0aXZlIHZhbHVlcy4gU3VwcG9ydGVkXG4gICAqICAgcHJvcGVydGllczpcbiAgICogICAtICoqZW5hYmxlZCoqIOKAkyBge2Jvb2xlYW59YCDigJMgKGRlZmF1bHQ6IGZhbHNlKSBJZiB0cnVlLCB3aWxsIHJlbHkgb24gYGhpc3RvcnkucHVzaFN0YXRlYCB0b1xuICAgKiAgICAgY2hhbmdlIHVybHMgd2hlcmUgc3VwcG9ydGVkLiBXaWxsIGZhbGwgYmFjayB0byBoYXNoLXByZWZpeGVkIHBhdGhzIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG4gICAqICAgICBzdXBwb3J0IGBwdXNoU3RhdGVgLlxuICAgKiAgIC0gKipyZXF1aXJlQmFzZSoqIC0gYHtib29sZWFufWAgLSAoZGVmYXVsdDogYHRydWVgKSBXaGVuIGh0bWw1TW9kZSBpcyBlbmFibGVkLCBzcGVjaWZpZXNcbiAgICogICAgIHdoZXRoZXIgb3Igbm90IGEgPGJhc2U+IHRhZyBpcyByZXF1aXJlZCB0byBiZSBwcmVzZW50LiBJZiBgZW5hYmxlZGAgYW5kIGByZXF1aXJlQmFzZWAgYXJlXG4gICAqICAgICB0cnVlLCBhbmQgYSBiYXNlIHRhZyBpcyBub3QgcHJlc2VudCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24gd2hlbiBgJGxvY2F0aW9uYCBpcyBpbmplY3RlZC5cbiAgICogICAgIFNlZSB0aGUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiAkbG9jYXRpb24gZ3VpZGUgZm9yIG1vcmUgaW5mb3JtYXRpb259XG4gICAqICAgLSAqKnJld3JpdGVMaW5rcyoqIC0gYHtib29sZWFufHN0cmluZ31gIC0gKGRlZmF1bHQ6IGB0cnVlYCkgV2hlbiBodG1sNU1vZGUgaXMgZW5hYmxlZCxcbiAgICogICAgIGVuYWJsZXMvZGlzYWJsZXMgVVJMIHJld3JpdGluZyBmb3IgcmVsYXRpdmUgbGlua3MuIElmIHNldCB0byBhIHN0cmluZywgVVJMIHJld3JpdGluZyB3aWxsXG4gICAqICAgICBvbmx5IGhhcHBlbiBvbiBsaW5rcyB3aXRoIGFuIGF0dHJpYnV0ZSB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHN0cmluZy4gRm9yIGV4YW1wbGUsIGlmIHNldFxuICAgKiAgICAgdG8gYCdpbnRlcm5hbC1saW5rJ2AsIHRoZW4gdGhlIFVSTCB3aWxsIG9ubHkgYmUgcmV3cml0dGVuIGZvciBgPGEgaW50ZXJuYWwtbGluaz5gIGxpbmtzLlxuICAgKiAgICAgTm90ZSB0aGF0IFthdHRyaWJ1dGUgbmFtZSBub3JtYWxpemF0aW9uXShndWlkZS9kaXJlY3RpdmUjbm9ybWFsaXphdGlvbikgZG9lcyBub3QgYXBwbHlcbiAgICogICAgIGhlcmUsIHNvIGAnaW50ZXJuYWxMaW5rJ2Agd2lsbCAqKm5vdCoqIG1hdGNoIGAnaW50ZXJuYWwtbGluaydgLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBodG1sNU1vZGUgb2JqZWN0IGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqL1xuICB0aGlzLmh0bWw1TW9kZSA9IGZ1bmN0aW9uKG1vZGUpIHtcbiAgICBpZiAoaXNCb29sZWFuKG1vZGUpKSB7XG4gICAgICBodG1sNU1vZGUuZW5hYmxlZCA9IG1vZGU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG1vZGUpKSB7XG5cbiAgICAgIGlmIChpc0Jvb2xlYW4obW9kZS5lbmFibGVkKSkge1xuICAgICAgICBodG1sNU1vZGUuZW5hYmxlZCA9IG1vZGUuZW5hYmxlZDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQm9vbGVhbihtb2RlLnJlcXVpcmVCYXNlKSkge1xuICAgICAgICBodG1sNU1vZGUucmVxdWlyZUJhc2UgPSBtb2RlLnJlcXVpcmVCYXNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNCb29sZWFuKG1vZGUucmV3cml0ZUxpbmtzKSB8fCBpc1N0cmluZyhtb2RlLnJld3JpdGVMaW5rcykpIHtcbiAgICAgICAgaHRtbDVNb2RlLnJld3JpdGVMaW5rcyA9IG1vZGUucmV3cml0ZUxpbmtzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGh0bWw1TW9kZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBldmVudFxuICAgKiBAbmFtZSAkbG9jYXRpb24jJGxvY2F0aW9uQ2hhbmdlU3RhcnRcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnJvYWRjYXN0ZWQgYmVmb3JlIGEgVVJMIHdpbGwgY2hhbmdlLlxuICAgKlxuICAgKiBUaGlzIGNoYW5nZSBjYW4gYmUgcHJldmVudGVkIGJ5IGNhbGxpbmdcbiAgICogYHByZXZlbnREZWZhdWx0YCBtZXRob2Qgb2YgdGhlIGV2ZW50LiBTZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBmb3IgbW9yZVxuICAgKiBkZXRhaWxzIGFib3V0IGV2ZW50IG9iamVjdC4gVXBvbiBzdWNjZXNzZnVsIGNoYW5nZVxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc30gaXMgZmlyZWQuXG4gICAqXG4gICAqIFRoZSBgbmV3U3RhdGVgIGFuZCBgb2xkU3RhdGVgIHBhcmFtZXRlcnMgbWF5IGJlIGRlZmluZWQgb25seSBpbiBIVE1MNSBtb2RlIGFuZCB3aGVuXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZXdTdGF0ZSBOZXcgaGlzdG9yeSBzdGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZXZlbnRcbiAgICogQG5hbWUgJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnJvYWRjYXN0ZWQgYWZ0ZXIgYSBVUkwgd2FzIGNoYW5nZWQuXG4gICAqXG4gICAqIFRoZSBgbmV3U3RhdGVgIGFuZCBgb2xkU3RhdGVgIHBhcmFtZXRlcnMgbWF5IGJlIGRlZmluZWQgb25seSBpbiBIVE1MNSBtb2RlIGFuZCB3aGVuXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZXdTdGF0ZSBOZXcgaGlzdG9yeSBzdGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXG4gICAqL1xuXG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckc25pZmZlcicsICckcm9vdEVsZW1lbnQnLCAnJHdpbmRvdycsXG4gICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAkYnJvd3NlciwgJHNuaWZmZXIsICRyb290RWxlbWVudCwgJHdpbmRvdykge1xuICAgIHZhciAkbG9jYXRpb24sXG4gICAgICAgIExvY2F0aW9uTW9kZSxcbiAgICAgICAgYmFzZUhyZWYgPSAkYnJvd3Nlci5iYXNlSHJlZigpLCAvLyBpZiBiYXNlW2hyZWZdIGlzIHVuZGVmaW5lZCwgaXQgZGVmYXVsdHMgdG8gJydcbiAgICAgICAgaW5pdGlhbFVybCA9ICRicm93c2VyLnVybCgpLFxuICAgICAgICBhcHBCYXNlO1xuXG4gICAgaWYgKGh0bWw1TW9kZS5lbmFibGVkKSB7XG4gICAgICBpZiAoIWJhc2VIcmVmICYmIGh0bWw1TW9kZS5yZXF1aXJlQmFzZSkge1xuICAgICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ25vYmFzZScsXG4gICAgICAgICAgJyRsb2NhdGlvbiBpbiBIVE1MNSBtb2RlIHJlcXVpcmVzIGEgPGJhc2U+IHRhZyB0byBiZSBwcmVzZW50IScpO1xuICAgICAgfVxuICAgICAgYXBwQmFzZSA9IHNlcnZlckJhc2UoaW5pdGlhbFVybCkgKyAoYmFzZUhyZWYgfHwgJy8nKTtcbiAgICAgIExvY2F0aW9uTW9kZSA9ICRzbmlmZmVyLmhpc3RvcnkgPyBMb2NhdGlvbkh0bWw1VXJsIDogTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcEJhc2UgPSBzdHJpcEhhc2goaW5pdGlhbFVybCk7XG4gICAgICBMb2NhdGlvbk1vZGUgPSBMb2NhdGlvbkhhc2hiYW5nVXJsO1xuICAgIH1cbiAgICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcblxuICAgICRsb2NhdGlvbiA9IG5ldyBMb2NhdGlvbk1vZGUoYXBwQmFzZSwgYXBwQmFzZU5vRmlsZSwgJyMnICsgaGFzaFByZWZpeCk7XG4gICAgJGxvY2F0aW9uLiQkcGFyc2VMaW5rVXJsKGluaXRpYWxVcmwsIGluaXRpYWxVcmwpO1xuXG4gICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xuXG4gICAgdmFyIElHTk9SRV9VUklfUkVHRVhQID0gL15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtcblxuICAgIGZ1bmN0aW9uIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sodXJsLCByZXBsYWNlLCBzdGF0ZSkge1xuICAgICAgdmFyIG9sZFVybCA9ICRsb2NhdGlvbi51cmwoKTtcbiAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgJGJyb3dzZXIudXJsKHVybCwgcmVwbGFjZSwgc3RhdGUpO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSAkbG9jYXRpb24uc3RhdGUoKSByZXR1cm5zIHJlZmVyZW50aWFsbHkgaWRlbnRpY2FsIChub3QganVzdCBkZWVwbHkgZXF1YWwpXG4gICAgICAgIC8vIHN0YXRlIG9iamVjdDsgdGhpcyBtYWtlcyBwb3NzaWJsZSBxdWljayBjaGVja2luZyBpZiB0aGUgc3RhdGUgY2hhbmdlZCBpbiB0aGUgZGlnZXN0XG4gICAgICAgIC8vIGxvb3AuIENoZWNraW5nIGRlZXAgZXF1YWxpdHkgd291bGQgYmUgdG9vIGV4cGVuc2l2ZS5cbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBSZXN0b3JlIG9sZCB2YWx1ZXMgaWYgcHVzaFN0YXRlIGZhaWxzXG4gICAgICAgICRsb2NhdGlvbi51cmwob2xkVXJsKTtcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcblxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cblxuICAgICRyb290RWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIHJld3JpdGVMaW5rcyA9IGh0bWw1TW9kZS5yZXdyaXRlTGlua3M7XG4gICAgICAvLyBUT0RPKHZvanRhKTogcmV3cml0ZSBsaW5rIHdoZW4gb3BlbmluZyBpbiBuZXcgdGFiL3dpbmRvdyAoaW4gbGVnYWN5IGJyb3dzZXIpXG4gICAgICAvLyBjdXJyZW50bHkgd2Ugb3BlbiBuaWNlIHVybCBsaW5rIGFuZCByZWRpcmVjdCB0aGVuXG5cbiAgICAgIGlmICghcmV3cml0ZUxpbmtzIHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSB8fCBldmVudC53aGljaCA9PT0gMiB8fCBldmVudC5idXR0b24gPT09IDIpIHJldHVybjtcblxuICAgICAgdmFyIGVsbSA9IGpxTGl0ZShldmVudC50YXJnZXQpO1xuXG4gICAgICAvLyB0cmF2ZXJzZSB0aGUgRE9NIHVwIHRvIGZpbmQgZmlyc3QgQSB0YWdcbiAgICAgIHdoaWxlIChub2RlTmFtZV8oZWxtWzBdKSAhPT0gJ2EnKSB7XG4gICAgICAgIC8vIGlnbm9yZSByZXdyaXRpbmcgaWYgbm8gQSB0YWcgKHJlYWNoZWQgcm9vdCBlbGVtZW50LCBvciBubyBwYXJlbnQgLSByZW1vdmVkIGZyb20gZG9jdW1lbnQpXG4gICAgICAgIGlmIChlbG1bMF0gPT09ICRyb290RWxlbWVudFswXSB8fCAhKGVsbSA9IGVsbS5wYXJlbnQoKSlbMF0pIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3RyaW5nKHJld3JpdGVMaW5rcykgJiYgaXNVbmRlZmluZWQoZWxtLmF0dHIocmV3cml0ZUxpbmtzKSkpIHJldHVybjtcblxuICAgICAgdmFyIGFic0hyZWYgPSBlbG0ucHJvcCgnaHJlZicpO1xuICAgICAgLy8gZ2V0IHRoZSBhY3R1YWwgaHJlZiBhdHRyaWJ1dGUgLSBzZWVcbiAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kZDM0NzE0OCh2PXZzLjg1KS5hc3B4XG4gICAgICB2YXIgcmVsSHJlZiA9IGVsbS5hdHRyKCdocmVmJykgfHwgZWxtLmF0dHIoJ3hsaW5rOmhyZWYnKTtcblxuICAgICAgaWYgKGlzT2JqZWN0KGFic0hyZWYpICYmIGFic0hyZWYudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xuICAgICAgICAvLyBTVkdBbmltYXRlZFN0cmluZy5hbmltVmFsIHNob3VsZCBiZSBpZGVudGljYWwgdG8gU1ZHQW5pbWF0ZWRTdHJpbmcuYmFzZVZhbCwgdW5sZXNzIGR1cmluZ1xuICAgICAgICAvLyBhbiBhbmltYXRpb24uXG4gICAgICAgIGFic0hyZWYgPSB1cmxSZXNvbHZlKGFic0hyZWYuYW5pbVZhbCkuaHJlZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWdub3JlIHdoZW4gdXJsIGlzIHN0YXJ0ZWQgd2l0aCBqYXZhc2NyaXB0OiBvciBtYWlsdG86XG4gICAgICBpZiAoSUdOT1JFX1VSSV9SRUdFWFAudGVzdChhYnNIcmVmKSkgcmV0dXJuO1xuXG4gICAgICBpZiAoYWJzSHJlZiAmJiAhZWxtLmF0dHIoJ3RhcmdldCcpICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICBpZiAoJGxvY2F0aW9uLiQkcGFyc2VMaW5rVXJsKGFic0hyZWYsIHJlbEhyZWYpKSB7XG4gICAgICAgICAgLy8gV2UgZG8gYSBwcmV2ZW50RGVmYXVsdCBmb3IgYWxsIHVybHMgdGhhdCBhcmUgcGFydCBvZiB0aGUgQW5ndWxhckpTIGFwcGxpY2F0aW9uLFxuICAgICAgICAgIC8vIGluIGh0bWw1bW9kZSBhbmQgYWxzbyB3aXRob3V0LCBzbyB0aGF0IHdlIGFyZSBhYmxlIHRvIGFib3J0IG5hdmlnYXRpb24gd2l0aG91dFxuICAgICAgICAgIC8vIGdldHRpbmcgZG91YmxlIGVudHJpZXMgaW4gdGhlIGxvY2F0aW9uIGhpc3RvcnkuXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAvLyB1cGRhdGUgbG9jYXRpb24gbWFudWFsbHlcbiAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSAkYnJvd3Nlci51cmwoKSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgLy8gcmV3cml0ZSBoYXNoYmFuZyB1cmwgPD4gaHRtbDUgdXJsXG4gICAgaWYgKHRyaW1FbXB0eUhhc2goJGxvY2F0aW9uLmFic1VybCgpKSAhPT0gdHJpbUVtcHR5SGFzaChpbml0aWFsVXJsKSkge1xuICAgICAgJGJyb3dzZXIudXJsKCRsb2NhdGlvbi5hYnNVcmwoKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdmFyIGluaXRpYWxpemluZyA9IHRydWU7XG5cbiAgICAvLyB1cGRhdGUgJGxvY2F0aW9uIHdoZW4gJGJyb3dzZXIgdXJsIGNoYW5nZXNcbiAgICAkYnJvd3Nlci5vblVybENoYW5nZShmdW5jdGlvbihuZXdVcmwsIG5ld1N0YXRlKSB7XG5cbiAgICAgIGlmICghc3RhcnRzV2l0aChuZXdVcmwsIGFwcEJhc2VOb0ZpbGUpKSB7XG4gICAgICAgIC8vIElmIHdlIGFyZSBuYXZpZ2F0aW5nIG91dHNpZGUgb2YgdGhlIGFwcCB0aGVuIGZvcmNlIGEgcmVsb2FkXG4gICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VybDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvbGRVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG4gICAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xuICAgICAgICB2YXIgZGVmYXVsdFByZXZlbnRlZDtcbiAgICAgICAgbmV3VXJsID0gdHJpbUVtcHR5SGFzaChuZXdVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShuZXdVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQgPSAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLCBvbGRVcmwsXG4gICAgICAgICAgICBuZXdTdGF0ZSwgb2xkU3RhdGUpLmRlZmF1bHRQcmV2ZW50ZWQ7XG5cbiAgICAgICAgLy8gaWYgdGhlIGxvY2F0aW9uIHdhcyBjaGFuZ2VkIGJ5IGEgYCRsb2NhdGlvbkNoYW5nZVN0YXJ0YCBoYW5kbGVyIHRoZW4gc3RvcFxuICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXG4gICAgICAgIGlmICgkbG9jYXRpb24uYWJzVXJsKCkgIT09IG5ld1VybCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcbiAgICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG9sZFN0YXRlO1xuICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sob2xkVXJsLCBmYWxzZSwgb2xkU3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluaXRpYWxpemluZyA9IGZhbHNlO1xuICAgICAgICAgIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsLCBvbGRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgIH0pO1xuXG4gICAgLy8gdXBkYXRlIGJyb3dzZXJcbiAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAkbG9jYXRpb25XYXRjaCgpIHtcbiAgICAgIGlmIChpbml0aWFsaXppbmcgfHwgJGxvY2F0aW9uLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24pIHtcbiAgICAgICAgJGxvY2F0aW9uLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24gPSBmYWxzZTtcblxuICAgICAgICB2YXIgb2xkVXJsID0gdHJpbUVtcHR5SGFzaCgkYnJvd3Nlci51cmwoKSk7XG4gICAgICAgIHZhciBuZXdVcmwgPSB0cmltRW1wdHlIYXNoKCRsb2NhdGlvbi5hYnNVcmwoKSk7XG4gICAgICAgIHZhciBvbGRTdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XG4gICAgICAgIHZhciBjdXJyZW50UmVwbGFjZSA9ICRsb2NhdGlvbi4kJHJlcGxhY2U7XG4gICAgICAgIHZhciB1cmxPclN0YXRlQ2hhbmdlZCA9IG9sZFVybCAhPT0gbmV3VXJsIHx8XG4gICAgICAgICAgKCRsb2NhdGlvbi4kJGh0bWw1ICYmICRzbmlmZmVyLmhpc3RvcnkgJiYgb2xkU3RhdGUgIT09ICRsb2NhdGlvbi4kJHN0YXRlKTtcblxuICAgICAgICBpZiAoaW5pdGlhbGl6aW5nIHx8IHVybE9yU3RhdGVDaGFuZ2VkKSB7XG4gICAgICAgICAgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmV3VXJsID0gJGxvY2F0aW9uLmFic1VybCgpO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRQcmV2ZW50ZWQgPSAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLCBvbGRVcmwsXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKS5kZWZhdWx0UHJldmVudGVkO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGUgbG9jYXRpb24gd2FzIGNoYW5nZWQgYnkgYSBgJGxvY2F0aW9uQ2hhbmdlU3RhcnRgIGhhbmRsZXIgdGhlbiBzdG9wXG4gICAgICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXG4gICAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSBuZXdVcmwpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICh1cmxPclN0YXRlQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sobmV3VXJsLCBjdXJyZW50UmVwbGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0YXRlID09PSAkbG9jYXRpb24uJCRzdGF0ZSA/IG51bGwgOiAkbG9jYXRpb24uJCRzdGF0ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbG9jYXRpb24uJCRyZXBsYWNlID0gZmFsc2U7XG5cbiAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcmV0dXJuIGFueXRoaW5nIGJlY2F1c2UgJGV2YWxBc3luYyB3aWxsIG1ha2UgdGhlIGRpZ2VzdCBsb29wIGRpcnR5IHdoZW5cbiAgICAgIC8vIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gJGxvY2F0aW9uO1xuXG4gICAgZnVuY3Rpb24gYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCAkbG9jYXRpb24uYWJzVXJsKCksIG9sZFVybCxcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKTtcbiAgICB9XG59XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGxvZ1xuICogQHJlcXVpcmVzICR3aW5kb3dcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNpbXBsZSBzZXJ2aWNlIGZvciBsb2dnaW5nLiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHNhZmVseSB3cml0ZXMgdGhlIG1lc3NhZ2VcbiAqIGludG8gdGhlIGJyb3dzZXIncyBjb25zb2xlIChpZiBwcmVzZW50KS5cbiAqXG4gKiBUaGUgbWFpbiBwdXJwb3NlIG9mIHRoaXMgc2VydmljZSBpcyB0byBzaW1wbGlmeSBkZWJ1Z2dpbmcgYW5kIHRyb3VibGVzaG9vdGluZy5cbiAqXG4gKiBUbyByZXZlYWwgdGhlIGxvY2F0aW9uIG9mIHRoZSBjYWxscyB0byBgJGxvZ2AgaW4gdGhlIEphdmFTY3JpcHQgY29uc29sZSxcbiAqIHlvdSBjYW4gXCJibGFja2JveFwiIHRoZSBBbmd1bGFySlMgc291cmNlIGluIHlvdXIgYnJvd3NlcjpcbiAqXG4gKiBbTW96aWxsYSBkZXNjcmlwdGlvbiBvZiBibGFja2JveGluZ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9EZWJ1Z2dlci9Ib3dfdG8vQmxhY2tfYm94X2Ffc291cmNlKS5cbiAqIFtDaHJvbWUgZGVzY3JpcHRpb24gb2YgYmxhY2tib3hpbmddKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9ibGFja2JveGluZykuXG4gKlxuICogTm90ZTogTm90IGFsbCBicm93c2VycyBzdXBwb3J0IGJsYWNrYm94aW5nLlxuICpcbiAqIFRoZSBkZWZhdWx0IGlzIHRvIGxvZyBgZGVidWdgIG1lc3NhZ2VzLiBZb3UgY2FuIHVzZVxuICoge0BsaW5rIG5nLiRsb2dQcm92aWRlciBuZy4kbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkfSB0byBjaGFuZ2UgdGhpcy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibG9nRXhhbXBsZVwiIG5hbWU9XCJsb2ctc2VydmljZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2xvZ0V4YW1wbGUnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdMb2dDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvZycsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZykge1xuICAgICAgICAgICAkc2NvcGUuJGxvZyA9ICRsb2c7XG4gICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gJ0hlbGxvIFdvcmxkISc7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJMb2dDb250cm9sbGVyXCI+XG4gICAgICAgICA8cD5SZWxvYWQgdGhpcyBwYWdlIHdpdGggb3BlbiBjb25zb2xlLCBlbnRlciB0ZXh0IGFuZCBoaXQgdGhlIGxvZyBidXR0b24uLi48L3A+XG4gICAgICAgICA8bGFiZWw+TWVzc2FnZTpcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibWVzc2FnZVwiIC8+PC9sYWJlbD5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmxvZyhtZXNzYWdlKVwiPmxvZzwvYnV0dG9uPlxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cud2FybihtZXNzYWdlKVwiPndhcm48L2J1dHRvbj5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmluZm8obWVzc2FnZSlcIj5pbmZvPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5lcnJvcihtZXNzYWdlKVwiPmVycm9yPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5kZWJ1ZyhtZXNzYWdlKVwiPmRlYnVnPC9idXR0b24+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGxvZ1Byb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoZSBgJGxvZ1Byb3ZpZGVyYCB0byBjb25maWd1cmUgaG93IHRoZSBhcHBsaWNhdGlvbiBsb2dzIG1lc3NhZ2VzXG4gKi9cbmZ1bmN0aW9uICRMb2dQcm92aWRlcigpIHtcbiAgdmFyIGRlYnVnID0gdHJ1ZSxcbiAgICAgIHNlbGYgPSB0aGlzO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGZsYWcgZW5hYmxlIG9yIGRpc2FibGUgZGVidWcgbGV2ZWwgbWVzc2FnZXNcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuZGVidWdFbmFibGVkID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChpc0RlZmluZWQoZmxhZykpIHtcbiAgICAgIGRlYnVnID0gZmxhZztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcbiAgICAvLyBTdXBwb3J0OiBJRSA5LTExLCBFZGdlIDEyLTE0K1xuICAgIC8vIElFL0VkZ2UgZGlzcGxheSBlcnJvcnMgaW4gc3VjaCBhIHdheSB0aGF0IGl0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGNsaWNrIGluIDQgcGxhY2VzXG4gICAgLy8gdG8gc2VlIHRoZSBzdGFjayB0cmFjZS4gVGhlcmUgaXMgbm8gd2F5IHRvIGZlYXR1cmUtZGV0ZWN0IGl0IHNvIHRoZXJlJ3MgYSBjaGFuY2VcbiAgICAvLyBvZiB0aGUgdXNlciBhZ2VudCBzbmlmZmluZyB0byBnbyB3cm9uZyBidXQgc2luY2UgaXQncyBvbmx5IGFib3V0IGxvZ2dpbmcsIHRoaXMgc2hvdWxkbid0XG4gICAgLy8gYnJlYWsgYXBwcy4gT3RoZXIgYnJvd3NlcnMgZGlzcGxheSBlcnJvcnMgaW4gYSBzZW5zaWJsZSB3YXkgYW5kIHNvbWUgb2YgdGhlbSBtYXAgc3RhY2tcbiAgICAvLyB0cmFjZXMgYWxvbmcgc291cmNlIG1hcHMgaWYgYXZhaWxhYmxlIHNvIGl0IG1ha2VzIHNlbnNlIHRvIGxldCBicm93c2VycyBkaXNwbGF5IGl0XG4gICAgLy8gYXMgdGhleSB3YW50LlxuICAgIHZhciBmb3JtYXRTdGFja1RyYWNlID0gbXNpZSB8fCAvXFxiRWRnZVxcLy8udGVzdCgkd2luZG93Lm5hdmlnYXRvciAmJiAkd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNsb2dcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGEgbG9nIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgbG9nOiBjb25zb2xlTG9nKCdsb2cnKSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkbG9nI2luZm9cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGFuIGluZm9ybWF0aW9uIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgaW5mbzogY29uc29sZUxvZygnaW5mbycpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjd2FyblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogV3JpdGUgYSB3YXJuaW5nIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgd2FybjogY29uc29sZUxvZygnd2FybicpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjZXJyb3JcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGFuIGVycm9yIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgZXJyb3I6IGNvbnNvbGVMb2coJ2Vycm9yJyksXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNkZWJ1Z1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogV3JpdGUgYSBkZWJ1ZyBtZXNzYWdlXG4gICAgICAgKi9cbiAgICAgIGRlYnVnOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmbiA9IGNvbnNvbGVMb2coJ2RlYnVnJyk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSgpXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGZvcm1hdEVycm9yKGFyZykge1xuICAgICAgaWYgKGlzRXJyb3IoYXJnKSkge1xuICAgICAgICBpZiAoYXJnLnN0YWNrICYmIGZvcm1hdFN0YWNrVHJhY2UpIHtcbiAgICAgICAgICBhcmcgPSAoYXJnLm1lc3NhZ2UgJiYgYXJnLnN0YWNrLmluZGV4T2YoYXJnLm1lc3NhZ2UpID09PSAtMSlcbiAgICAgICAgICAgICAgPyAnRXJyb3I6ICcgKyBhcmcubWVzc2FnZSArICdcXG4nICsgYXJnLnN0YWNrXG4gICAgICAgICAgICAgIDogYXJnLnN0YWNrO1xuICAgICAgICB9IGVsc2UgaWYgKGFyZy5zb3VyY2VVUkwpIHtcbiAgICAgICAgICBhcmcgPSBhcmcubWVzc2FnZSArICdcXG4nICsgYXJnLnNvdXJjZVVSTCArICc6JyArIGFyZy5saW5lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnNvbGVMb2codHlwZSkge1xuICAgICAgdmFyIGNvbnNvbGUgPSAkd2luZG93LmNvbnNvbGUgfHwge30sXG4gICAgICAgICAgbG9nRm4gPSBjb25zb2xlW3R5cGVdIHx8IGNvbnNvbGUubG9nIHx8IG5vb3A7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgIGFyZ3MucHVzaChmb3JtYXRFcnJvcihhcmcpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFIDkgb25seVxuICAgICAgICAvLyBjb25zb2xlIG1ldGhvZHMgZG9uJ3QgaW5oZXJpdCBmcm9tIEZ1bmN0aW9uLnByb3RvdHlwZSBpbiBJRSA5IHNvIHdlIGNhbid0XG4gICAgICAgIC8vIGNhbGwgYGxvZ0ZuLmFwcGx5KGNvbnNvbGUsIGFyZ3MpYCBkaXJlY3RseS5cbiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGxvZ0ZuLCBjb25zb2xlLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuICB9XTtcbn1cblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxudmFyICRwYXJzZU1pbkVyciA9IG1pbkVycignJHBhcnNlJyk7XG5cbnZhciBvYmplY3RWYWx1ZU9mID0ge30uY29uc3RydWN0b3IucHJvdG90eXBlLnZhbHVlT2Y7XG5cbi8vIFNhbmRib3hpbmcgQW5ndWxhckpTIEV4cHJlc3Npb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEFuZ3VsYXJKUyBleHByZXNzaW9ucyBhcmUgbm8gbG9uZ2VyIHNhbmRib3hlZC4gU28gaXQgaXMgbm93IGV2ZW4gZWFzaWVyIHRvIGFjY2VzcyBhcmJpdHJhcnkgSlMgY29kZSBieVxuLy8gdmFyaW91cyBtZWFucyBzdWNoIGFzIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byBuYXRpdmUgSlMgZnVuY3Rpb25zIGxpa2UgdGhlIEZ1bmN0aW9uIGNvbnN0cnVjdG9yLlxuLy9cbi8vIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSBmb2xsb3dpbmcgQW5ndWxhckpTIGV4cHJlc3Npb246XG4vL1xuLy8gICB7fS50b1N0cmluZy5jb25zdHJ1Y3RvcignYWxlcnQoXCJldmlsIEpTIGNvZGVcIiknKVxuLy9cbi8vIEl0IGlzIGltcG9ydGFudCB0byByZWFsaXplIHRoYXQgaWYgeW91IGNyZWF0ZSBhbiBleHByZXNzaW9uIGZyb20gYSBzdHJpbmcgdGhhdCBjb250YWlucyB1c2VyIHByb3ZpZGVkXG4vLyBjb250ZW50IHRoZW4gaXQgaXMgcG9zc2libGUgdGhhdCB5b3VyIGFwcGxpY2F0aW9uIGNvbnRhaW5zIGEgc2VjdXJpdHkgdnVsbmVyYWJpbGl0eSB0byBhbiBYU1Mgc3R5bGUgYXR0YWNrLlxuLy9cbi8vIFNlZSBodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9ndWlkZS9zZWN1cml0eVxuXG5cbmZ1bmN0aW9uIGdldFN0cmluZ1ZhbHVlKG5hbWUpIHtcbiAgLy8gUHJvcGVydHkgbmFtZXMgbXVzdCBiZSBzdHJpbmdzLiBUaGlzIG1lYW5zIHRoYXQgbm9uLXN0cmluZyBvYmplY3RzIGNhbm5vdCBiZSB1c2VkXG4gIC8vIGFzIGtleXMgaW4gYW4gb2JqZWN0LiBBbnkgbm9uLXN0cmluZyBvYmplY3QsIGluY2x1ZGluZyBhIG51bWJlciwgaXMgdHlwZWNhc3RlZFxuICAvLyBpbnRvIGEgc3RyaW5nIHZpYSB0aGUgdG9TdHJpbmcgbWV0aG9kLlxuICAvLyAtLSBNRE4sIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9Qcm9wZXJ0eV9hY2Nlc3NvcnMjUHJvcGVydHlfbmFtZXNcbiAgLy9cbiAgLy8gU28sIHRvIGVuc3VyZSB0aGF0IHdlIGFyZSBjaGVja2luZyB0aGUgc2FtZSBgbmFtZWAgdGhhdCBKYXZhU2NyaXB0IHdvdWxkIHVzZSwgd2UgY2FzdCBpdFxuICAvLyB0byBhIHN0cmluZy4gSXQncyBub3QgYWx3YXlzIHBvc3NpYmxlLiBJZiBgbmFtZWAgaXMgYW4gb2JqZWN0IGFuZCBpdHMgYHRvU3RyaW5nYCBtZXRob2QgaXNcbiAgLy8gJ2Jyb2tlbicgKGRvZXNuJ3QgcmV0dXJuIGEgc3RyaW5nLCBpc24ndCBhIGZ1bmN0aW9uLCBldGMuKSwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd246XG4gIC8vXG4gIC8vIFR5cGVFcnJvcjogQ2Fubm90IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVxuICAvL1xuICAvLyBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgd2UgZG9uJ3QgY2F0Y2ggdGhpcyBlcnJvciBoZXJlIGFuZCBhbGxvdyBpdCB0byBwcm9wYWdhdGUgdXAgdGhlIGNhbGxcbiAgLy8gc3RhY2suIE5vdGUgdGhhdCB5b3UnbGwgZ2V0IHRoZSBzYW1lIGVycm9yIGluIEphdmFTY3JpcHQgaWYgeW91IHRyeSB0byBhY2Nlc3MgYSBwcm9wZXJ0eSB1c2luZ1xuICAvLyBzdWNoIGEgJ2Jyb2tlbicgb2JqZWN0IGFzIGEga2V5LlxuICByZXR1cm4gbmFtZSArICcnO1xufVxuXG5cbnZhciBPUEVSQVRPUlMgPSBjcmVhdGVNYXAoKTtcbmZvckVhY2goJysgLSAqIC8gJSA9PT0gIT09ID09ICE9IDwgPiA8PSA+PSAmJiB8fCAhID0gfCcuc3BsaXQoJyAnKSwgZnVuY3Rpb24ob3BlcmF0b3IpIHsgT1BFUkFUT1JTW29wZXJhdG9yXSA9IHRydWU7IH0pO1xudmFyIEVTQ0FQRSA9IHsnbic6J1xcbicsICdmJzonXFxmJywgJ3InOidcXHInLCAndCc6J1xcdCcsICd2JzonXFx2JywgJ1xcJyc6J1xcJycsICdcIic6J1wiJ307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgTGV4ZXIgPSBmdW5jdGlvbiBMZXhlcihvcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG59O1xuXG5MZXhlci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBMZXhlcixcblxuICBsZXg6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIHRoaXMudG9rZW5zID0gW107XG5cbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICBpZiAoY2ggPT09ICdcIicgfHwgY2ggPT09ICdcXCcnKSB7XG4gICAgICAgIHRoaXMucmVhZFN0cmluZyhjaCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNOdW1iZXIoY2gpIHx8IGNoID09PSAnLicgJiYgdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpIHtcbiAgICAgICAgdGhpcy5yZWFkTnVtYmVyKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNJZGVudGlmaWVyU3RhcnQodGhpcy5wZWVrTXVsdGljaGFyKCkpKSB7XG4gICAgICAgIHRoaXMucmVhZElkZW50KCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXMoY2gsICcoKXt9W10uLDs6PycpKSB7XG4gICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiBjaH0pO1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNXaGl0ZXNwYWNlKGNoKSkge1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2gyID0gY2ggKyB0aGlzLnBlZWsoKTtcbiAgICAgICAgdmFyIGNoMyA9IGNoMiArIHRoaXMucGVlaygyKTtcbiAgICAgICAgdmFyIG9wMSA9IE9QRVJBVE9SU1tjaF07XG4gICAgICAgIHZhciBvcDIgPSBPUEVSQVRPUlNbY2gyXTtcbiAgICAgICAgdmFyIG9wMyA9IE9QRVJBVE9SU1tjaDNdO1xuICAgICAgICBpZiAob3AxIHx8IG9wMiB8fCBvcDMpIHtcbiAgICAgICAgICB2YXIgdG9rZW4gPSBvcDMgPyBjaDMgOiAob3AyID8gY2gyIDogY2gpO1xuICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiB0b2tlbiwgb3BlcmF0b3I6IHRydWV9KTtcbiAgICAgICAgICB0aGlzLmluZGV4ICs9IHRva2VuLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ1VuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgJywgdGhpcy5pbmRleCwgdGhpcy5pbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRva2VucztcbiAgfSxcblxuICBpczogZnVuY3Rpb24oY2gsIGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihpKSB7XG4gICAgdmFyIG51bSA9IGkgfHwgMTtcbiAgICByZXR1cm4gKHRoaXMuaW5kZXggKyBudW0gPCB0aGlzLnRleHQubGVuZ3RoKSA/IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCArIG51bSkgOiBmYWxzZTtcbiAgfSxcblxuICBpc051bWJlcjogZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gKCcwJyA8PSBjaCAmJiBjaCA8PSAnOScpICYmIHR5cGVvZiBjaCA9PT0gJ3N0cmluZyc7XG4gIH0sXG5cbiAgaXNXaGl0ZXNwYWNlOiBmdW5jdGlvbihjaCkge1xuICAgIC8vIElFIHRyZWF0cyBub24tYnJlYWtpbmcgc3BhY2UgYXMgXFx1MDBBMFxuICAgIHJldHVybiAoY2ggPT09ICcgJyB8fCBjaCA9PT0gJ1xccicgfHwgY2ggPT09ICdcXHQnIHx8XG4gICAgICAgICAgICBjaCA9PT0gJ1xcbicgfHwgY2ggPT09ICdcXHYnIHx8IGNoID09PSAnXFx1MDBBMCcpO1xuICB9LFxuXG4gIGlzSWRlbnRpZmllclN0YXJ0OiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyU3RhcnQgP1xuICAgICAgICB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyU3RhcnQoY2gsIHRoaXMuY29kZVBvaW50QXQoY2gpKSA6XG4gICAgICAgIHRoaXMuaXNWYWxpZElkZW50aWZpZXJTdGFydChjaCk7XG4gIH0sXG5cbiAgaXNWYWxpZElkZW50aWZpZXJTdGFydDogZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gKCdhJyA8PSBjaCAmJiBjaCA8PSAneicgfHxcbiAgICAgICAgICAgICdBJyA8PSBjaCAmJiBjaCA8PSAnWicgfHxcbiAgICAgICAgICAgICdfJyA9PT0gY2ggfHwgY2ggPT09ICckJyk7XG4gIH0sXG5cbiAgaXNJZGVudGlmaWVyQ29udGludWU6IGZ1bmN0aW9uKGNoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZSA/XG4gICAgICAgIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZShjaCwgdGhpcy5jb2RlUG9pbnRBdChjaCkpIDpcbiAgICAgICAgdGhpcy5pc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlKGNoKTtcbiAgfSxcblxuICBpc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlOiBmdW5jdGlvbihjaCwgY3ApIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkSWRlbnRpZmllclN0YXJ0KGNoLCBjcCkgfHwgdGhpcy5pc051bWJlcihjaCk7XG4gIH0sXG5cbiAgY29kZVBvaW50QXQ6IGZ1bmN0aW9uKGNoKSB7XG4gICAgaWYgKGNoLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICByZXR1cm4gKGNoLmNoYXJDb2RlQXQoMCkgPDwgMTApICsgY2guY2hhckNvZGVBdCgxKSAtIDB4MzVGREMwMDtcbiAgfSxcblxuICBwZWVrTXVsdGljaGFyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2ggPSB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO1xuICAgIHZhciBwZWVrID0gdGhpcy5wZWVrKCk7XG4gICAgaWYgKCFwZWVrKSB7XG4gICAgICByZXR1cm4gY2g7XG4gICAgfVxuICAgIHZhciBjcDEgPSBjaC5jaGFyQ29kZUF0KDApO1xuICAgIHZhciBjcDIgPSBwZWVrLmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNwMSA+PSAweEQ4MDAgJiYgY3AxIDw9IDB4REJGRiAmJiBjcDIgPj0gMHhEQzAwICYmIGNwMiA8PSAweERGRkYpIHtcbiAgICAgIHJldHVybiBjaCArIHBlZWs7XG4gICAgfVxuICAgIHJldHVybiBjaDtcbiAgfSxcblxuICBpc0V4cE9wZXJhdG9yOiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnIHx8IHRoaXMuaXNOdW1iZXIoY2gpKTtcbiAgfSxcblxuICB0aHJvd0Vycm9yOiBmdW5jdGlvbihlcnJvciwgc3RhcnQsIGVuZCkge1xuICAgIGVuZCA9IGVuZCB8fCB0aGlzLmluZGV4O1xuICAgIHZhciBjb2xTdHIgPSAoaXNEZWZpbmVkKHN0YXJ0KVxuICAgICAgICAgICAgPyAncyAnICsgc3RhcnQgKyAgJy0nICsgdGhpcy5pbmRleCArICcgWycgKyB0aGlzLnRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpICsgJ10nXG4gICAgICAgICAgICA6ICcgJyArIGVuZCk7XG4gICAgdGhyb3cgJHBhcnNlTWluRXJyKCdsZXhlcnInLCAnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLFxuICAgICAgICBlcnJvciwgY29sU3RyLCB0aGlzLnRleHQpO1xuICB9LFxuXG4gIHJlYWROdW1iZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBudW1iZXIgPSAnJztcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgdmFyIGNoID0gbG93ZXJjYXNlKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO1xuICAgICAgaWYgKGNoID09PSAnLicgfHwgdGhpcy5pc051bWJlcihjaCkpIHtcbiAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBlZWtDaCA9IHRoaXMucGVlaygpO1xuICAgICAgICBpZiAoY2ggPT09ICdlJyAmJiB0aGlzLmlzRXhwT3BlcmF0b3IocGVla0NoKSkge1xuICAgICAgICAgIG51bWJlciArPSBjaDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRXhwT3BlcmF0b3IoY2gpICYmXG4gICAgICAgICAgICBwZWVrQ2ggJiYgdGhpcy5pc051bWJlcihwZWVrQ2gpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PT0gJ2UnKSB7XG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFeHBPcGVyYXRvcihjaCkgJiZcbiAgICAgICAgICAgICghcGVla0NoIHx8ICF0aGlzLmlzTnVtYmVyKHBlZWtDaCkpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PT0gJ2UnKSB7XG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJbnZhbGlkIGV4cG9uZW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50b2tlbnMucHVzaCh7XG4gICAgICBpbmRleDogc3RhcnQsXG4gICAgICB0ZXh0OiBudW1iZXIsXG4gICAgICBjb25zdGFudDogdHJ1ZSxcbiAgICAgIHZhbHVlOiBOdW1iZXIobnVtYmVyKVxuICAgIH0pO1xuICB9LFxuXG4gIHJlYWRJZGVudDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5pbmRleDtcbiAgICB0aGlzLmluZGV4ICs9IHRoaXMucGVla011bHRpY2hhcigpLmxlbmd0aDtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMucGVla011bHRpY2hhcigpO1xuICAgICAgaWYgKCF0aGlzLmlzSWRlbnRpZmllckNvbnRpbnVlKGNoKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXggKz0gY2gubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgIGluZGV4OiBzdGFydCxcbiAgICAgIHRleHQ6IHRoaXMudGV4dC5zbGljZShzdGFydCwgdGhpcy5pbmRleCksXG4gICAgICBpZGVudGlmaWVyOiB0cnVlXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVhZFN0cmluZzogZnVuY3Rpb24ocXVvdGUpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHRoaXMuaW5kZXgrKztcbiAgICB2YXIgc3RyaW5nID0gJyc7XG4gICAgdmFyIHJhd1N0cmluZyA9IHF1b3RlO1xuICAgIHZhciBlc2NhcGUgPSBmYWxzZTtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICByYXdTdHJpbmcgKz0gY2g7XG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIGlmIChjaCA9PT0gJ3UnKSB7XG4gICAgICAgICAgdmFyIGhleCA9IHRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCArIDEsIHRoaXMuaW5kZXggKyA1KTtcbiAgICAgICAgICBpZiAoIWhleC5tYXRjaCgvW1xcZGEtZl17NH0vaSkpIHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dFcnJvcignSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHUnICsgaGV4ICsgJ10nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5pbmRleCArPSA0O1xuICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGhleCwgMTYpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmVwID0gRVNDQVBFW2NoXTtcbiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcgKyAocmVwIHx8IGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICdcXFxcJykge1xuICAgICAgICBlc2NhcGUgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PT0gcXVvdGUpIHtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgICAgICBpbmRleDogc3RhcnQsXG4gICAgICAgICAgdGV4dDogcmF3U3RyaW5nLFxuICAgICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICAgIHZhbHVlOiBzdHJpbmdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmluZyArPSBjaDtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50aHJvd0Vycm9yKCdVbnRlcm1pbmF0ZWQgcXVvdGUnLCBzdGFydCk7XG4gIH1cbn07XG5cbnZhciBBU1QgPSBmdW5jdGlvbiBBU1QobGV4ZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5sZXhlciA9IGxleGVyO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuQVNULlByb2dyYW0gPSAnUHJvZ3JhbSc7XG5BU1QuRXhwcmVzc2lvblN0YXRlbWVudCA9ICdFeHByZXNzaW9uU3RhdGVtZW50JztcbkFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbiA9ICdBc3NpZ25tZW50RXhwcmVzc2lvbic7XG5BU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uID0gJ0NvbmRpdGlvbmFsRXhwcmVzc2lvbic7XG5BU1QuTG9naWNhbEV4cHJlc3Npb24gPSAnTG9naWNhbEV4cHJlc3Npb24nO1xuQVNULkJpbmFyeUV4cHJlc3Npb24gPSAnQmluYXJ5RXhwcmVzc2lvbic7XG5BU1QuVW5hcnlFeHByZXNzaW9uID0gJ1VuYXJ5RXhwcmVzc2lvbic7XG5BU1QuQ2FsbEV4cHJlc3Npb24gPSAnQ2FsbEV4cHJlc3Npb24nO1xuQVNULk1lbWJlckV4cHJlc3Npb24gPSAnTWVtYmVyRXhwcmVzc2lvbic7XG5BU1QuSWRlbnRpZmllciA9ICdJZGVudGlmaWVyJztcbkFTVC5MaXRlcmFsID0gJ0xpdGVyYWwnO1xuQVNULkFycmF5RXhwcmVzc2lvbiA9ICdBcnJheUV4cHJlc3Npb24nO1xuQVNULlByb3BlcnR5ID0gJ1Byb3BlcnR5JztcbkFTVC5PYmplY3RFeHByZXNzaW9uID0gJ09iamVjdEV4cHJlc3Npb24nO1xuQVNULlRoaXNFeHByZXNzaW9uID0gJ1RoaXNFeHByZXNzaW9uJztcbkFTVC5Mb2NhbHNFeHByZXNzaW9uID0gJ0xvY2Fsc0V4cHJlc3Npb24nO1xuXG4vLyBJbnRlcm5hbCB1c2Ugb25seVxuQVNULk5HVmFsdWVQYXJhbWV0ZXIgPSAnTkdWYWx1ZVBhcmFtZXRlcic7XG5cbkFTVC5wcm90b3R5cGUgPSB7XG4gIGFzdDogZnVuY3Rpb24odGV4dCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgdGhpcy50b2tlbnMgPSB0aGlzLmxleGVyLmxleCh0ZXh0KTtcblxuICAgIHZhciB2YWx1ZSA9IHRoaXMucHJvZ3JhbSgpO1xuXG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBhbiB1bmV4cGVjdGVkIHRva2VuJywgdGhpcy50b2tlbnNbMF0pO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICBwcm9ncmFtOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm9keSA9IFtdO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID4gMCAmJiAhdGhpcy5wZWVrKCd9JywgJyknLCAnOycsICddJykpXG4gICAgICAgIGJvZHkucHVzaCh0aGlzLmV4cHJlc3Npb25TdGF0ZW1lbnQoKSk7XG4gICAgICBpZiAoIXRoaXMuZXhwZWN0KCc7JykpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogQVNULlByb2dyYW0sIGJvZHk6IGJvZHl9O1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBleHByZXNzaW9uU3RhdGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyB0eXBlOiBBU1QuRXhwcmVzc2lvblN0YXRlbWVudCwgZXhwcmVzc2lvbjogdGhpcy5maWx0ZXJDaGFpbigpIH07XG4gIH0sXG5cbiAgZmlsdGVyQ2hhaW46IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZWZ0ID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgd2hpbGUgKHRoaXMuZXhwZWN0KCd8JykpIHtcbiAgICAgIGxlZnQgPSB0aGlzLmZpbHRlcihsZWZ0KTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgZXhwcmVzc2lvbjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaWdubWVudCgpO1xuICB9LFxuXG4gIGFzc2lnbm1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLnRlcm5hcnkoKTtcbiAgICBpZiAodGhpcy5leHBlY3QoJz0nKSkge1xuICAgICAgaWYgKCFpc0Fzc2lnbmFibGUocmVzdWx0KSkge1xuICAgICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2x2YWwnLCAnVHJ5aW5nIHRvIGFzc2lnbiBhIHZhbHVlIHRvIGEgbm9uIGwtdmFsdWUnKTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0geyB0eXBlOiBBU1QuQXNzaWdubWVudEV4cHJlc3Npb24sIGxlZnQ6IHJlc3VsdCwgcmlnaHQ6IHRoaXMuYXNzaWdubWVudCgpLCBvcGVyYXRvcjogJz0nfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcblxuICB0ZXJuYXJ5OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGVzdCA9IHRoaXMubG9naWNhbE9SKCk7XG4gICAgdmFyIGFsdGVybmF0ZTtcbiAgICB2YXIgY29uc2VxdWVudDtcbiAgICBpZiAodGhpcy5leHBlY3QoJz8nKSkge1xuICAgICAgYWx0ZXJuYXRlID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICBpZiAodGhpcy5jb25zdW1lKCc6JykpIHtcbiAgICAgICAgY29uc2VxdWVudCA9IHRoaXMuZXhwcmVzc2lvbigpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uLCB0ZXN0OiB0ZXN0LCBhbHRlcm5hdGU6IGFsdGVybmF0ZSwgY29uc2VxdWVudDogY29uc2VxdWVudH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZXN0O1xuICB9LFxuXG4gIGxvZ2ljYWxPUjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLmxvZ2ljYWxBTkQoKTtcbiAgICB3aGlsZSAodGhpcy5leHBlY3QoJ3x8JykpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5Mb2dpY2FsRXhwcmVzc2lvbiwgb3BlcmF0b3I6ICd8fCcsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLmxvZ2ljYWxBTkQoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBsb2dpY2FsQU5EOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuZXF1YWxpdHkoKTtcbiAgICB3aGlsZSAodGhpcy5leHBlY3QoJyYmJykpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5Mb2dpY2FsRXhwcmVzc2lvbiwgb3BlcmF0b3I6ICcmJicsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLmVxdWFsaXR5KCl9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBlcXVhbGl0eTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnJlbGF0aW9uYWwoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc9PScsJyE9JywnPT09JywnIT09JykpKSB7XG4gICAgICBsZWZ0ID0geyB0eXBlOiBBU1QuQmluYXJ5RXhwcmVzc2lvbiwgb3BlcmF0b3I6IHRva2VuLnRleHQsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLnJlbGF0aW9uYWwoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICByZWxhdGlvbmFsOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuYWRkaXRpdmUoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc8JywgJz4nLCAnPD0nLCAnPj0nKSkpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgbGVmdDogbGVmdCwgcmlnaHQ6IHRoaXMuYWRkaXRpdmUoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBhZGRpdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLm11bHRpcGxpY2F0aXZlKCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKycsJy0nKSkpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgbGVmdDogbGVmdCwgcmlnaHQ6IHRoaXMubXVsdGlwbGljYXRpdmUoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBtdWx0aXBsaWNhdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnVuYXJ5KCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKicsJy8nLCclJykpKSB7XG4gICAgICBsZWZ0ID0geyB0eXBlOiBBU1QuQmluYXJ5RXhwcmVzc2lvbiwgb3BlcmF0b3I6IHRva2VuLnRleHQsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLnVuYXJ5KCkgfTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgdW5hcnk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbjtcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJysnLCAnLScsICchJykpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBBU1QuVW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgcHJlZml4OiB0cnVlLCBhcmd1bWVudDogdGhpcy51bmFyeSgpIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnByaW1hcnkoKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJpbWFyeTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHByaW1hcnk7XG4gICAgaWYgKHRoaXMuZXhwZWN0KCcoJykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmZpbHRlckNoYWluKCk7XG4gICAgICB0aGlzLmNvbnN1bWUoJyknKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCdbJykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmFycmF5RGVjbGFyYXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCd7JykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLm9iamVjdCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxmUmVmZXJlbnRpYWwuaGFzT3duUHJvcGVydHkodGhpcy5wZWVrKCkudGV4dCkpIHtcbiAgICAgIHByaW1hcnkgPSBjb3B5KHRoaXMuc2VsZlJlZmVyZW50aWFsW3RoaXMuY29uc3VtZSgpLnRleHRdKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5saXRlcmFscy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnBlZWsoKS50ZXh0KSkge1xuICAgICAgcHJpbWFyeSA9IHsgdHlwZTogQVNULkxpdGVyYWwsIHZhbHVlOiB0aGlzLm9wdGlvbnMubGl0ZXJhbHNbdGhpcy5jb25zdW1lKCkudGV4dF19O1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuaWRlbnRpZmllcikge1xuICAgICAgcHJpbWFyeSA9IHRoaXMuaWRlbnRpZmllcigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuY29uc3RhbnQpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmNvbnN0YW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignbm90IGEgcHJpbWFyeSBleHByZXNzaW9uJywgdGhpcy5wZWVrKCkpO1xuICAgIH1cblxuICAgIHZhciBuZXh0O1xuICAgIHdoaWxlICgobmV4dCA9IHRoaXMuZXhwZWN0KCcoJywgJ1snLCAnLicpKSkge1xuICAgICAgaWYgKG5leHQudGV4dCA9PT0gJygnKSB7XG4gICAgICAgIHByaW1hcnkgPSB7dHlwZTogQVNULkNhbGxFeHByZXNzaW9uLCBjYWxsZWU6IHByaW1hcnksIGFyZ3VtZW50czogdGhpcy5wYXJzZUFyZ3VtZW50cygpIH07XG4gICAgICAgIHRoaXMuY29uc3VtZSgnKScpO1xuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICdbJykge1xuICAgICAgICBwcmltYXJ5ID0geyB0eXBlOiBBU1QuTWVtYmVyRXhwcmVzc2lvbiwgb2JqZWN0OiBwcmltYXJ5LCBwcm9wZXJ0eTogdGhpcy5leHByZXNzaW9uKCksIGNvbXB1dGVkOiB0cnVlIH07XG4gICAgICAgIHRoaXMuY29uc3VtZSgnXScpO1xuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICcuJykge1xuICAgICAgICBwcmltYXJ5ID0geyB0eXBlOiBBU1QuTWVtYmVyRXhwcmVzc2lvbiwgb2JqZWN0OiBwcmltYXJ5LCBwcm9wZXJ0eTogdGhpcy5pZGVudGlmaWVyKCksIGNvbXB1dGVkOiBmYWxzZSB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcmltYXJ5O1xuICB9LFxuXG4gIGZpbHRlcjogZnVuY3Rpb24oYmFzZUV4cHJlc3Npb24pIHtcbiAgICB2YXIgYXJncyA9IFtiYXNlRXhwcmVzc2lvbl07XG4gICAgdmFyIHJlc3VsdCA9IHt0eXBlOiBBU1QuQ2FsbEV4cHJlc3Npb24sIGNhbGxlZTogdGhpcy5pZGVudGlmaWVyKCksIGFyZ3VtZW50czogYXJncywgZmlsdGVyOiB0cnVlfTtcblxuICAgIHdoaWxlICh0aGlzLmV4cGVjdCgnOicpKSB7XG4gICAgICBhcmdzLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgcGFyc2VBcmd1bWVudHM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgaWYgKHRoaXMucGVla1Rva2VuKCkudGV4dCAhPT0gJyknKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGFyZ3MucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9LFxuXG4gIGlkZW50aWZpZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbiA9IHRoaXMuY29uc3VtZSgpO1xuICAgIGlmICghdG9rZW4uaWRlbnRpZmllcikge1xuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBub3QgYSB2YWxpZCBpZGVudGlmaWVyJywgdG9rZW4pO1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBBU1QuSWRlbnRpZmllciwgbmFtZTogdG9rZW4udGV4dCB9O1xuICB9LFxuXG4gIGNvbnN0YW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyBUT0RPIGNoZWNrIHRoYXQgaXQgaXMgYSBjb25zdGFudFxuICAgIHJldHVybiB7IHR5cGU6IEFTVC5MaXRlcmFsLCB2YWx1ZTogdGhpcy5jb25zdW1lKCkudmFsdWUgfTtcbiAgfSxcblxuICBhcnJheURlY2xhcmF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnXScpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRoaXMucGVlaygnXScpKSB7XG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnXScpO1xuXG4gICAgcmV0dXJuIHsgdHlwZTogQVNULkFycmF5RXhwcmVzc2lvbiwgZWxlbWVudHM6IGVsZW1lbnRzIH07XG4gIH0sXG5cbiAgb2JqZWN0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJvcGVydGllcyA9IFtdLCBwcm9wZXJ0eTtcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnfScpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRoaXMucGVlaygnfScpKSB7XG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHByb3BlcnR5ID0ge3R5cGU6IEFTVC5Qcm9wZXJ0eSwga2luZDogJ2luaXQnfTtcbiAgICAgICAgaWYgKHRoaXMucGVlaygpLmNvbnN0YW50KSB7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5jb25zdGFudCgpO1xuICAgICAgICAgIHByb3BlcnR5LmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCc6Jyk7XG4gICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBlZWsoKS5pZGVudGlmaWVyKSB7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5pZGVudGlmaWVyKCk7XG4gICAgICAgICAgcHJvcGVydHkuY29tcHV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAodGhpcy5wZWVrKCc6JykpIHtcbiAgICAgICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSBwcm9wZXJ0eS5rZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGVlaygnWycpKSB7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCdbJyk7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCddJyk7XG4gICAgICAgICAgcHJvcGVydHkuY29tcHV0ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xuICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdpbnZhbGlkIGtleScsIHRoaXMucGVlaygpKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnfScpO1xuXG4gICAgcmV0dXJuIHt0eXBlOiBBU1QuT2JqZWN0RXhwcmVzc2lvbiwgcHJvcGVydGllczogcHJvcGVydGllcyB9O1xuICB9LFxuXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKG1zZywgdG9rZW4pIHtcbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ3N5bnRheCcsXG4gICAgICAgICdTeW50YXggRXJyb3I6IFRva2VuIFxcJ3swfVxcJyB7MX0gYXQgY29sdW1uIHsyfSBvZiB0aGUgZXhwcmVzc2lvbiBbezN9XSBzdGFydGluZyBhdCBbezR9XS4nLFxuICAgICAgICAgIHRva2VuLnRleHQsIG1zZywgKHRva2VuLmluZGV4ICsgMSksIHRoaXMudGV4dCwgdGhpcy50ZXh0LnN1YnN0cmluZyh0b2tlbi5pbmRleCkpO1xuICB9LFxuXG4gIGNvbnN1bWU6IGZ1bmN0aW9uKGUxKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCd1ZW9lJywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsIHRoaXMudGV4dCk7XG4gICAgfVxuXG4gICAgdmFyIHRva2VuID0gdGhpcy5leHBlY3QoZTEpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFsnICsgZTEgKyAnXScsIHRoaXMucGVlaygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2VuO1xuICB9LFxuXG4gIHBlZWtUb2tlbjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCd1ZW9lJywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsIHRoaXMudGV4dCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRva2Vuc1swXTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihlMSwgZTIsIGUzLCBlNCkge1xuICAgIHJldHVybiB0aGlzLnBlZWtBaGVhZCgwLCBlMSwgZTIsIGUzLCBlNCk7XG4gIH0sXG5cbiAgcGVla0FoZWFkOiBmdW5jdGlvbihpLCBlMSwgZTIsIGUzLCBlNCkge1xuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggPiBpKSB7XG4gICAgICB2YXIgdG9rZW4gPSB0aGlzLnRva2Vuc1tpXTtcbiAgICAgIHZhciB0ID0gdG9rZW4udGV4dDtcbiAgICAgIGlmICh0ID09PSBlMSB8fCB0ID09PSBlMiB8fCB0ID09PSBlMyB8fCB0ID09PSBlNCB8fFxuICAgICAgICAgICghZTEgJiYgIWUyICYmICFlMyAmJiAhZTQpKSB7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIGV4cGVjdDogZnVuY3Rpb24oZTEsIGUyLCBlMywgZTQpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLnBlZWsoZTEsIGUyLCBlMywgZTQpO1xuICAgIGlmICh0b2tlbikge1xuICAgICAgdGhpcy50b2tlbnMuc2hpZnQoKTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIHNlbGZSZWZlcmVudGlhbDoge1xuICAgICd0aGlzJzoge3R5cGU6IEFTVC5UaGlzRXhwcmVzc2lvbiB9LFxuICAgICckbG9jYWxzJzoge3R5cGU6IEFTVC5Mb2NhbHNFeHByZXNzaW9uIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gaWZEZWZpbmVkKHYsIGQpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ICE9PSAndW5kZWZpbmVkJyA/IHYgOiBkO1xufVxuXG5mdW5jdGlvbiBwbHVzRm4obCwgcikge1xuICBpZiAodHlwZW9mIGwgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gcjtcbiAgaWYgKHR5cGVvZiByID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGw7XG4gIHJldHVybiBsICsgcjtcbn1cblxuZnVuY3Rpb24gaXNTdGF0ZWxlc3MoJGZpbHRlciwgZmlsdGVyTmFtZSkge1xuICB2YXIgZm4gPSAkZmlsdGVyKGZpbHRlck5hbWUpO1xuICByZXR1cm4gIWZuLiRzdGF0ZWZ1bDtcbn1cblxudmFyIFBVUklUWV9BQlNPTFVURSA9IDE7XG52YXIgUFVSSVRZX1JFTEFUSVZFID0gMjtcblxuLy8gRGV0ZWN0IG5vZGVzIHdoaWNoIGNvdWxkIGRlcGVuZCBvbiBub24tc2hhbGxvdyBzdGF0ZSBvZiBvYmplY3RzXG5mdW5jdGlvbiBpc1B1cmUobm9kZSwgcGFyZW50SXNQdXJlKSB7XG4gIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgLy8gQ29tcHV0ZWQgbWVtYmVycyBtaWdodCBpbnZva2UgYSBzdGF0ZWZ1bCB0b1N0cmluZygpXG4gICAgY2FzZSBBU1QuTWVtYmVyRXhwcmVzc2lvbjpcbiAgICAgIGlmIChub2RlLmNvbXB1dGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gVW5hcnkgYWx3YXlzIGNvbnZlcnQgdG8gcHJpbWF0aXZlXG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIFBVUklUWV9BQlNPTFVURTtcblxuICAgIC8vIFRoZSBiaW5hcnkgKyBvcGVyYXRvciBjYW4gaW52b2tlIGEgc3RhdGVmdWwgdG9TdHJpbmcoKS5cbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIG5vZGUub3BlcmF0b3IgIT09ICcrJyA/IFBVUklUWV9BQlNPTFVURSA6IGZhbHNlO1xuXG4gICAgLy8gRnVuY3Rpb25zIC8gZmlsdGVycyBwcm9iYWJseSByZWFkIHN0YXRlIGZyb20gd2l0aGluIG9iamVjdHNcbiAgICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiAodW5kZWZpbmVkID09PSBwYXJlbnRJc1B1cmUpID8gUFVSSVRZX1JFTEFUSVZFIDogcGFyZW50SXNQdXJlO1xufVxuXG5mdW5jdGlvbiBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdCwgJGZpbHRlciwgcGFyZW50SXNQdXJlKSB7XG4gIHZhciBhbGxDb25zdGFudHM7XG4gIHZhciBhcmdzVG9XYXRjaDtcbiAgdmFyIGlzU3RhdGVsZXNzRmlsdGVyO1xuXG4gIHZhciBhc3RJc1B1cmUgPSBhc3QuaXNQdXJlID0gaXNQdXJlKGFzdCwgcGFyZW50SXNQdXJlKTtcblxuICBzd2l0Y2ggKGFzdC50eXBlKSB7XG4gIGNhc2UgQVNULlByb2dyYW06XG4gICAgYWxsQ29uc3RhbnRzID0gdHJ1ZTtcbiAgICBmb3JFYWNoKGFzdC5ib2R5LCBmdW5jdGlvbihleHByKSB7XG4gICAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGV4cHIuZXhwcmVzc2lvbiwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmV4cHJlc3Npb24uY29uc3RhbnQ7XG4gICAgfSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYWxsQ29uc3RhbnRzO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5MaXRlcmFsOlxuICAgIGFzdC5jb25zdGFudCA9IHRydWU7XG4gICAgYXN0LnRvV2F0Y2ggPSBbXTtcbiAgICBicmVhaztcbiAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmFyZ3VtZW50LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC5hcmd1bWVudC5jb25zdGFudDtcbiAgICBhc3QudG9XYXRjaCA9IGFzdC5hcmd1bWVudC50b1dhdGNoO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmxlZnQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3QucmlnaHQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYXN0LmxlZnQuY29uc3RhbnQgJiYgYXN0LnJpZ2h0LmNvbnN0YW50O1xuICAgIGFzdC50b1dhdGNoID0gYXN0LmxlZnQudG9XYXRjaC5jb25jYXQoYXN0LnJpZ2h0LnRvV2F0Y2gpO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5Mb2dpY2FsRXhwcmVzc2lvbjpcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC5sZWZ0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LnJpZ2h0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC5sZWZ0LmNvbnN0YW50ICYmIGFzdC5yaWdodC5jb25zdGFudDtcbiAgICBhc3QudG9XYXRjaCA9IGFzdC5jb25zdGFudCA/IFtdIDogW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC50ZXN0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmFsdGVybmF0ZSwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC5jb25zZXF1ZW50LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC50ZXN0LmNvbnN0YW50ICYmIGFzdC5hbHRlcm5hdGUuY29uc3RhbnQgJiYgYXN0LmNvbnNlcXVlbnQuY29uc3RhbnQ7XG4gICAgYXN0LnRvV2F0Y2ggPSBhc3QuY29uc3RhbnQgPyBbXSA6IFthc3RdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5JZGVudGlmaWVyOlxuICAgIGFzdC5jb25zdGFudCA9IGZhbHNlO1xuICAgIGFzdC50b1dhdGNoID0gW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULk1lbWJlckV4cHJlc3Npb246XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3Qub2JqZWN0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGlmIChhc3QuY29tcHV0ZWQpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LnByb3BlcnR5LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIH1cbiAgICBhc3QuY29uc3RhbnQgPSBhc3Qub2JqZWN0LmNvbnN0YW50ICYmICghYXN0LmNvbXB1dGVkIHx8IGFzdC5wcm9wZXJ0eS5jb25zdGFudCk7XG4gICAgYXN0LnRvV2F0Y2ggPSBhc3QuY29uc3RhbnQgPyBbXSA6IFthc3RdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICBpc1N0YXRlbGVzc0ZpbHRlciA9IGFzdC5maWx0ZXIgPyBpc1N0YXRlbGVzcygkZmlsdGVyLCBhc3QuY2FsbGVlLm5hbWUpIDogZmFsc2U7XG4gICAgYWxsQ29uc3RhbnRzID0gaXNTdGF0ZWxlc3NGaWx0ZXI7XG4gICAgYXJnc1RvV2F0Y2ggPSBbXTtcbiAgICBmb3JFYWNoKGFzdC5hcmd1bWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoZXhwciwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmNvbnN0YW50O1xuICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgZXhwci50b1dhdGNoKTtcbiAgICB9KTtcbiAgICBhc3QuY29uc3RhbnQgPSBhbGxDb25zdGFudHM7XG4gICAgYXN0LnRvV2F0Y2ggPSBpc1N0YXRlbGVzc0ZpbHRlciA/IGFyZ3NUb1dhdGNoIDogW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkFzc2lnbm1lbnRFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmxlZnQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3QucmlnaHQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYXN0LmxlZnQuY29uc3RhbnQgJiYgYXN0LnJpZ2h0LmNvbnN0YW50O1xuICAgIGFzdC50b1dhdGNoID0gW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkFycmF5RXhwcmVzc2lvbjpcbiAgICBhbGxDb25zdGFudHMgPSB0cnVlO1xuICAgIGFyZ3NUb1dhdGNoID0gW107XG4gICAgZm9yRWFjaChhc3QuZWxlbWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoZXhwciwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmNvbnN0YW50O1xuICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgZXhwci50b1dhdGNoKTtcbiAgICB9KTtcbiAgICBhc3QuY29uc3RhbnQgPSBhbGxDb25zdGFudHM7XG4gICAgYXN0LnRvV2F0Y2ggPSBhcmdzVG9XYXRjaDtcbiAgICBicmVhaztcbiAgY2FzZSBBU1QuT2JqZWN0RXhwcmVzc2lvbjpcbiAgICBhbGxDb25zdGFudHMgPSB0cnVlO1xuICAgIGFyZ3NUb1dhdGNoID0gW107XG4gICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMocHJvcGVydHkudmFsdWUsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgICBhbGxDb25zdGFudHMgPSBhbGxDb25zdGFudHMgJiYgcHJvcGVydHkudmFsdWUuY29uc3RhbnQ7XG4gICAgICBhcmdzVG9XYXRjaC5wdXNoLmFwcGx5KGFyZ3NUb1dhdGNoLCBwcm9wZXJ0eS52YWx1ZS50b1dhdGNoKTtcbiAgICAgIGlmIChwcm9wZXJ0eS5jb21wdXRlZCkge1xuICAgICAgICAvL2B7W2tleV06IHZhbHVlfWAgaW1wbGljaXRseSBkb2VzIGBrZXkudG9TdHJpbmcoKWAgd2hpY2ggbWF5IGJlIG5vbi1wdXJlXG4gICAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMocHJvcGVydHkua2V5LCAkZmlsdGVyLCAvKnBhcmVudElzUHVyZT0qL2ZhbHNlKTtcbiAgICAgICAgYWxsQ29uc3RhbnRzID0gYWxsQ29uc3RhbnRzICYmIHByb3BlcnR5LmtleS5jb25zdGFudDtcbiAgICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgcHJvcGVydHkua2V5LnRvV2F0Y2gpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGFzdC5jb25zdGFudCA9IGFsbENvbnN0YW50cztcbiAgICBhc3QudG9XYXRjaCA9IGFyZ3NUb1dhdGNoO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5UaGlzRXhwcmVzc2lvbjpcbiAgICBhc3QuY29uc3RhbnQgPSBmYWxzZTtcbiAgICBhc3QudG9XYXRjaCA9IFtdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgIGFzdC5jb25zdGFudCA9IGZhbHNlO1xuICAgIGFzdC50b1dhdGNoID0gW107XG4gICAgYnJlYWs7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXRzKGJvZHkpIHtcbiAgaWYgKGJvZHkubGVuZ3RoICE9PSAxKSByZXR1cm47XG4gIHZhciBsYXN0RXhwcmVzc2lvbiA9IGJvZHlbMF0uZXhwcmVzc2lvbjtcbiAgdmFyIGNhbmRpZGF0ZSA9IGxhc3RFeHByZXNzaW9uLnRvV2F0Y2g7XG4gIGlmIChjYW5kaWRhdGUubGVuZ3RoICE9PSAxKSByZXR1cm4gY2FuZGlkYXRlO1xuICByZXR1cm4gY2FuZGlkYXRlWzBdICE9PSBsYXN0RXhwcmVzc2lvbiA/IGNhbmRpZGF0ZSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNBc3NpZ25hYmxlKGFzdCkge1xuICByZXR1cm4gYXN0LnR5cGUgPT09IEFTVC5JZGVudGlmaWVyIHx8IGFzdC50eXBlID09PSBBU1QuTWVtYmVyRXhwcmVzc2lvbjtcbn1cblxuZnVuY3Rpb24gYXNzaWduYWJsZUFTVChhc3QpIHtcbiAgaWYgKGFzdC5ib2R5Lmxlbmd0aCA9PT0gMSAmJiBpc0Fzc2lnbmFibGUoYXN0LmJvZHlbMF0uZXhwcmVzc2lvbikpIHtcbiAgICByZXR1cm4ge3R5cGU6IEFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbiwgbGVmdDogYXN0LmJvZHlbMF0uZXhwcmVzc2lvbiwgcmlnaHQ6IHt0eXBlOiBBU1QuTkdWYWx1ZVBhcmFtZXRlcn0sIG9wZXJhdG9yOiAnPSd9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzTGl0ZXJhbChhc3QpIHtcbiAgcmV0dXJuIGFzdC5ib2R5Lmxlbmd0aCA9PT0gMCB8fFxuICAgICAgYXN0LmJvZHkubGVuZ3RoID09PSAxICYmIChcbiAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSA9PT0gQVNULkxpdGVyYWwgfHxcbiAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSA9PT0gQVNULkFycmF5RXhwcmVzc2lvbiB8fFxuICAgICAgYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlID09PSBBU1QuT2JqZWN0RXhwcmVzc2lvbik7XG59XG5cbmZ1bmN0aW9uIGlzQ29uc3RhbnQoYXN0KSB7XG4gIHJldHVybiBhc3QuY29uc3RhbnQ7XG59XG5cbmZ1bmN0aW9uIEFTVENvbXBpbGVyKCRmaWx0ZXIpIHtcbiAgdGhpcy4kZmlsdGVyID0gJGZpbHRlcjtcbn1cblxuQVNUQ29tcGlsZXIucHJvdG90eXBlID0ge1xuICBjb21waWxlOiBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5leHRJZDogMCxcbiAgICAgIGZpbHRlcnM6IHt9LFxuICAgICAgZm46IHt2YXJzOiBbXSwgYm9keTogW10sIG93bjoge319LFxuICAgICAgYXNzaWduOiB7dmFyczogW10sIGJvZHk6IFtdLCBvd246IHt9fSxcbiAgICAgIGlucHV0czogW11cbiAgICB9O1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LCBzZWxmLiRmaWx0ZXIpO1xuICAgIHZhciBleHRyYSA9ICcnO1xuICAgIHZhciBhc3NpZ25hYmxlO1xuICAgIHRoaXMuc3RhZ2UgPSAnYXNzaWduJztcbiAgICBpZiAoKGFzc2lnbmFibGUgPSBhc3NpZ25hYmxlQVNUKGFzdCkpKSB7XG4gICAgICB0aGlzLnN0YXRlLmNvbXB1dGluZyA9ICdhc3NpZ24nO1xuICAgICAgdmFyIHJlc3VsdCA9IHRoaXMubmV4dElkKCk7XG4gICAgICB0aGlzLnJlY3Vyc2UoYXNzaWduYWJsZSwgcmVzdWx0KTtcbiAgICAgIHRoaXMucmV0dXJuXyhyZXN1bHQpO1xuICAgICAgZXh0cmEgPSAnZm4uYXNzaWduPScgKyB0aGlzLmdlbmVyYXRlRnVuY3Rpb24oJ2Fzc2lnbicsICdzLHYsbCcpO1xuICAgIH1cbiAgICB2YXIgdG9XYXRjaCA9IGdldElucHV0cyhhc3QuYm9keSk7XG4gICAgc2VsZi5zdGFnZSA9ICdpbnB1dHMnO1xuICAgIGZvckVhY2godG9XYXRjaCwgZnVuY3Rpb24od2F0Y2gsIGtleSkge1xuICAgICAgdmFyIGZuS2V5ID0gJ2ZuJyArIGtleTtcbiAgICAgIHNlbGYuc3RhdGVbZm5LZXldID0ge3ZhcnM6IFtdLCBib2R5OiBbXSwgb3duOiB7fX07XG4gICAgICBzZWxmLnN0YXRlLmNvbXB1dGluZyA9IGZuS2V5O1xuICAgICAgdmFyIGludG9JZCA9IHNlbGYubmV4dElkKCk7XG4gICAgICBzZWxmLnJlY3Vyc2Uod2F0Y2gsIGludG9JZCk7XG4gICAgICBzZWxmLnJldHVybl8oaW50b0lkKTtcbiAgICAgIHNlbGYuc3RhdGUuaW5wdXRzLnB1c2goe25hbWU6IGZuS2V5LCBpc1B1cmU6IHdhdGNoLmlzUHVyZX0pO1xuICAgICAgd2F0Y2gud2F0Y2hJZCA9IGtleTtcbiAgICB9KTtcbiAgICB0aGlzLnN0YXRlLmNvbXB1dGluZyA9ICdmbic7XG4gICAgdGhpcy5zdGFnZSA9ICdtYWluJztcbiAgICB0aGlzLnJlY3Vyc2UoYXN0KTtcbiAgICB2YXIgZm5TdHJpbmcgPVxuICAgICAgLy8gVGhlIGJ1aWxkIGFuZCBtaW5pZmljYXRpb24gc3RlcHMgcmVtb3ZlIHRoZSBzdHJpbmcgXCJ1c2Ugc3RyaWN0XCIgZnJvbSB0aGUgY29kZSwgYnV0IHRoaXMgaXMgZG9uZSB1c2luZyBhIHJlZ2V4LlxuICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgZm9yIHRoaXMgdW50aWwgd2UgZG8gYSBiZXR0ZXIgam9iIGF0IG9ubHkgcmVtb3ZpbmcgdGhlIHByZWZpeCBvbmx5IHdoZW4gd2Ugc2hvdWxkLlxuICAgICAgJ1wiJyArIHRoaXMuVVNFICsgJyAnICsgdGhpcy5TVFJJQ1QgKyAnXCI7XFxuJyArXG4gICAgICB0aGlzLmZpbHRlclByZWZpeCgpICtcbiAgICAgICd2YXIgZm49JyArIHRoaXMuZ2VuZXJhdGVGdW5jdGlvbignZm4nLCAncyxsLGEsaScpICtcbiAgICAgIGV4dHJhICtcbiAgICAgIHRoaXMud2F0Y2hGbnMoKSArXG4gICAgICAncmV0dXJuIGZuOyc7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgICB2YXIgZm4gPSAobmV3IEZ1bmN0aW9uKCckZmlsdGVyJyxcbiAgICAgICAgJ2dldFN0cmluZ1ZhbHVlJyxcbiAgICAgICAgJ2lmRGVmaW5lZCcsXG4gICAgICAgICdwbHVzJyxcbiAgICAgICAgZm5TdHJpbmcpKShcbiAgICAgICAgICB0aGlzLiRmaWx0ZXIsXG4gICAgICAgICAgZ2V0U3RyaW5nVmFsdWUsXG4gICAgICAgICAgaWZEZWZpbmVkLFxuICAgICAgICAgIHBsdXNGbik7XG4gICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhZ2UgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIFVTRTogJ3VzZScsXG5cbiAgU1RSSUNUOiAnc3RyaWN0JyxcblxuICB3YXRjaEZuczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpbnB1dHMgPSB0aGlzLnN0YXRlLmlucHV0cztcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yRWFjaChpbnB1dHMsIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICByZXN1bHQucHVzaCgndmFyICcgKyBpbnB1dC5uYW1lICsgJz0nICsgc2VsZi5nZW5lcmF0ZUZ1bmN0aW9uKGlucHV0Lm5hbWUsICdzJykpO1xuICAgICAgaWYgKGlucHV0LmlzUHVyZSkge1xuICAgICAgICByZXN1bHQucHVzaChpbnB1dC5uYW1lLCAnLmlzUHVyZT0nICsgSlNPTi5zdHJpbmdpZnkoaW5wdXQuaXNQdXJlKSArICc7Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGlucHV0cy5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKCdmbi5pbnB1dHM9WycgKyBpbnB1dHMubWFwKGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGkubmFtZTsgfSkuam9pbignLCcpICsgJ107Jyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuam9pbignJyk7XG4gIH0sXG5cbiAgZ2VuZXJhdGVGdW5jdGlvbjogZnVuY3Rpb24obmFtZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuICdmdW5jdGlvbignICsgcGFyYW1zICsgJyl7JyArXG4gICAgICAgIHRoaXMudmFyc1ByZWZpeChuYW1lKSArXG4gICAgICAgIHRoaXMuYm9keShuYW1lKSArXG4gICAgICAgICd9Oyc7XG4gIH0sXG5cbiAgZmlsdGVyUHJlZml4OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yRWFjaCh0aGlzLnN0YXRlLmZpbHRlcnMsIGZ1bmN0aW9uKGlkLCBmaWx0ZXIpIHtcbiAgICAgIHBhcnRzLnB1c2goaWQgKyAnPSRmaWx0ZXIoJyArIHNlbGYuZXNjYXBlKGZpbHRlcikgKyAnKScpO1xuICAgIH0pO1xuICAgIGlmIChwYXJ0cy5sZW5ndGgpIHJldHVybiAndmFyICcgKyBwYXJ0cy5qb2luKCcsJykgKyAnOyc7XG4gICAgcmV0dXJuICcnO1xuICB9LFxuXG4gIHZhcnNQcmVmaXg6IGZ1bmN0aW9uKHNlY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZVtzZWN0aW9uXS52YXJzLmxlbmd0aCA/ICd2YXIgJyArIHRoaXMuc3RhdGVbc2VjdGlvbl0udmFycy5qb2luKCcsJykgKyAnOycgOiAnJztcbiAgfSxcblxuICBib2R5OiBmdW5jdGlvbihzZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVbc2VjdGlvbl0uYm9keS5qb2luKCcnKTtcbiAgfSxcblxuICByZWN1cnNlOiBmdW5jdGlvbihhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKSB7XG4gICAgdmFyIGxlZnQsIHJpZ2h0LCBzZWxmID0gdGhpcywgYXJncywgZXhwcmVzc2lvbiwgY29tcHV0ZWQ7XG4gICAgcmVjdXJzaW9uRm4gPSByZWN1cnNpb25GbiB8fCBub29wO1xuICAgIGlmICghc2tpcFdhdGNoSWRDaGVjayAmJiBpc0RlZmluZWQoYXN0LndhdGNoSWQpKSB7XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHRoaXMuaWZfKCdpJyxcbiAgICAgICAgdGhpcy5sYXp5QXNzaWduKGludG9JZCwgdGhpcy5jb21wdXRlZE1lbWJlcignaScsIGFzdC53YXRjaElkKSksXG4gICAgICAgIHRoaXMubGF6eVJlY3Vyc2UoYXN0LCBpbnRvSWQsIG5hbWVJZCwgcmVjdXJzaW9uRm4sIGNyZWF0ZSwgdHJ1ZSlcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAoYXN0LnR5cGUpIHtcbiAgICBjYXNlIEFTVC5Qcm9ncmFtOlxuICAgICAgZm9yRWFjaChhc3QuYm9keSwgZnVuY3Rpb24oZXhwcmVzc2lvbiwgcG9zKSB7XG4gICAgICAgIHNlbGYucmVjdXJzZShleHByZXNzaW9uLmV4cHJlc3Npb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbihleHByKSB7IHJpZ2h0ID0gZXhwcjsgfSk7XG4gICAgICAgIGlmIChwb3MgIT09IGFzdC5ib2R5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBzZWxmLmN1cnJlbnQoKS5ib2R5LnB1c2gocmlnaHQsICc7Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5yZXR1cm5fKHJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5MaXRlcmFsOlxuICAgICAgZXhwcmVzc2lvbiA9IHRoaXMuZXNjYXBlKGFzdC52YWx1ZSk7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8IGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgdGhpcy5yZWN1cnNlKGFzdC5hcmd1bWVudCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGV4cHIpIHsgcmlnaHQgPSBleHByOyB9KTtcbiAgICAgIGV4cHJlc3Npb24gPSBhc3Qub3BlcmF0b3IgKyAnKCcgKyB0aGlzLmlmRGVmaW5lZChyaWdodCwgMCkgKyAnKSc7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oZXhwcmVzc2lvbik7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgdGhpcy5yZWN1cnNlKGFzdC5sZWZ0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikgeyBsZWZ0ID0gZXhwcjsgfSk7XG4gICAgICB0aGlzLnJlY3Vyc2UoYXN0LnJpZ2h0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikgeyByaWdodCA9IGV4cHI7IH0pO1xuICAgICAgaWYgKGFzdC5vcGVyYXRvciA9PT0gJysnKSB7XG4gICAgICAgIGV4cHJlc3Npb24gPSB0aGlzLnBsdXMobGVmdCwgcmlnaHQpO1xuICAgICAgfSBlbHNlIGlmIChhc3Qub3BlcmF0b3IgPT09ICctJykge1xuICAgICAgICBleHByZXNzaW9uID0gdGhpcy5pZkRlZmluZWQobGVmdCwgMCkgKyBhc3Qub3BlcmF0b3IgKyB0aGlzLmlmRGVmaW5lZChyaWdodCwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHByZXNzaW9uID0gJygnICsgbGVmdCArICcpJyArIGFzdC5vcGVyYXRvciArICcoJyArIHJpZ2h0ICsgJyknO1xuICAgICAgfVxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuTG9naWNhbEV4cHJlc3Npb246XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QubGVmdCwgaW50b0lkKTtcbiAgICAgIHNlbGYuaWZfKGFzdC5vcGVyYXRvciA9PT0gJyYmJyA/IGludG9JZCA6IHNlbGYubm90KGludG9JZCksIHNlbGYubGF6eVJlY3Vyc2UoYXN0LnJpZ2h0LCBpbnRvSWQpKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Db25kaXRpb25hbEV4cHJlc3Npb246XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QudGVzdCwgaW50b0lkKTtcbiAgICAgIHNlbGYuaWZfKGludG9JZCwgc2VsZi5sYXp5UmVjdXJzZShhc3QuYWx0ZXJuYXRlLCBpbnRvSWQpLCBzZWxmLmxhenlSZWN1cnNlKGFzdC5jb25zZXF1ZW50LCBpbnRvSWQpKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5JZGVudGlmaWVyOlxuICAgICAgaW50b0lkID0gaW50b0lkIHx8IHRoaXMubmV4dElkKCk7XG4gICAgICBpZiAobmFtZUlkKSB7XG4gICAgICAgIG5hbWVJZC5jb250ZXh0ID0gc2VsZi5zdGFnZSA9PT0gJ2lucHV0cycgPyAncycgOiB0aGlzLmFzc2lnbih0aGlzLm5leHRJZCgpLCB0aGlzLmdldEhhc093blByb3BlcnR5KCdsJywgYXN0Lm5hbWUpICsgJz9sOnMnKTtcbiAgICAgICAgbmFtZUlkLmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgIG5hbWVJZC5uYW1lID0gYXN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBzZWxmLmlmXyhzZWxmLnN0YWdlID09PSAnaW5wdXRzJyB8fCBzZWxmLm5vdChzZWxmLmdldEhhc093blByb3BlcnR5KCdsJywgYXN0Lm5hbWUpKSxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5pZl8oc2VsZi5zdGFnZSA9PT0gJ2lucHV0cycgfHwgJ3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuaWZfKFxuICAgICAgICAgICAgICAgIHNlbGYuaXNOdWxsKHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIoJ3MnLCBhc3QubmFtZSkpLFxuICAgICAgICAgICAgICAgIHNlbGYubGF6eUFzc2lnbihzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKCdzJywgYXN0Lm5hbWUpLCAne30nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIoJ3MnLCBhc3QubmFtZSkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBpbnRvSWQgJiYgc2VsZi5sYXp5QXNzaWduKGludG9JZCwgc2VsZi5ub25Db21wdXRlZE1lbWJlcignbCcsIGFzdC5uYW1lKSlcbiAgICAgICAgKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5NZW1iZXJFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IG5hbWVJZCAmJiAobmFtZUlkLmNvbnRleHQgPSB0aGlzLm5leHRJZCgpKSB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgaW50b0lkID0gaW50b0lkIHx8IHRoaXMubmV4dElkKCk7XG4gICAgICBzZWxmLnJlY3Vyc2UoYXN0Lm9iamVjdCwgbGVmdCwgdW5kZWZpbmVkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5pZl8oc2VsZi5ub3ROdWxsKGxlZnQpLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoYXN0LmNvbXB1dGVkKSB7XG4gICAgICAgICAgICByaWdodCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgICBzZWxmLnJlY3Vyc2UoYXN0LnByb3BlcnR5LCByaWdodCk7XG4gICAgICAgICAgICBzZWxmLmdldFN0cmluZ1ZhbHVlKHJpZ2h0KTtcbiAgICAgICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuaWZfKHNlbGYubm90KHNlbGYuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQpKSwgc2VsZi5sYXp5QXNzaWduKHNlbGYuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQpLCAne30nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHByZXNzaW9uID0gc2VsZi5jb21wdXRlZE1lbWJlcihsZWZ0LCByaWdodCk7XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgaWYgKG5hbWVJZCkge1xuICAgICAgICAgICAgICBuYW1lSWQuY29tcHV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBuYW1lSWQubmFtZSA9IHJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY3JlYXRlICYmIGNyZWF0ZSAhPT0gMSkge1xuICAgICAgICAgICAgICBzZWxmLmlmXyhzZWxmLmlzTnVsbChzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIGFzdC5wcm9wZXJ0eS5uYW1lKSksIHNlbGYubGF6eUFzc2lnbihzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIGFzdC5wcm9wZXJ0eS5uYW1lKSwgJ3t9JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIobGVmdCwgYXN0LnByb3BlcnR5Lm5hbWUpO1xuICAgICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgIGlmIChuYW1lSWQpIHtcbiAgICAgICAgICAgICAgbmFtZUlkLmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIG5hbWVJZC5uYW1lID0gYXN0LnByb3BlcnR5Lm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsICd1bmRlZmluZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICB9LCAhIWNyZWF0ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICAgIGludG9JZCA9IGludG9JZCB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgaWYgKGFzdC5maWx0ZXIpIHtcbiAgICAgICAgcmlnaHQgPSBzZWxmLmZpbHRlcihhc3QuY2FsbGVlLm5hbWUpO1xuICAgICAgICBhcmdzID0gW107XG4gICAgICAgIGZvckVhY2goYXN0LmFyZ3VtZW50cywgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICAgIHZhciBhcmd1bWVudCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgc2VsZi5yZWN1cnNlKGV4cHIsIGFyZ3VtZW50KTtcbiAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXhwcmVzc2lvbiA9IHJpZ2h0ICsgJygnICsgYXJncy5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgIHNlbGYuYXNzaWduKGludG9JZCwgZXhwcmVzc2lvbik7XG4gICAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByaWdodCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgIGxlZnQgPSB7fTtcbiAgICAgICAgYXJncyA9IFtdO1xuICAgICAgICBzZWxmLnJlY3Vyc2UoYXN0LmNhbGxlZSwgcmlnaHQsIGxlZnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuaWZfKHNlbGYubm90TnVsbChyaWdodCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yRWFjaChhc3QuYXJndW1lbnRzLCBmdW5jdGlvbihleHByKSB7XG4gICAgICAgICAgICAgIHNlbGYucmVjdXJzZShleHByLCBhc3QuY29uc3RhbnQgPyB1bmRlZmluZWQgOiBzZWxmLm5leHRJZCgpLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGFyZ3VtZW50KSB7XG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChsZWZ0Lm5hbWUpIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHNlbGYubWVtYmVyKGxlZnQuY29udGV4dCwgbGVmdC5uYW1lLCBsZWZ0LmNvbXB1dGVkKSArICcoJyArIGFyZ3Muam9pbignLCcpICsgJyknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHJpZ2h0ICsgJygnICsgYXJncy5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCAndW5kZWZpbmVkJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVjdXJzaW9uRm4oaW50b0lkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbjpcbiAgICAgIHJpZ2h0ID0gdGhpcy5uZXh0SWQoKTtcbiAgICAgIGxlZnQgPSB7fTtcbiAgICAgIHRoaXMucmVjdXJzZShhc3QubGVmdCwgdW5kZWZpbmVkLCBsZWZ0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5pZl8oc2VsZi5ub3ROdWxsKGxlZnQuY29udGV4dCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucmVjdXJzZShhc3QucmlnaHQsIHJpZ2h0KTtcbiAgICAgICAgICBleHByZXNzaW9uID0gc2VsZi5tZW1iZXIobGVmdC5jb250ZXh0LCBsZWZ0Lm5hbWUsIGxlZnQuY29tcHV0ZWQpICsgYXN0Lm9wZXJhdG9yICsgcmlnaHQ7XG4gICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgICAgICByZWN1cnNpb25GbihpbnRvSWQgfHwgZXhwcmVzc2lvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSwgMSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5BcnJheUV4cHJlc3Npb246XG4gICAgICBhcmdzID0gW107XG4gICAgICBmb3JFYWNoKGFzdC5lbGVtZW50cywgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICBzZWxmLnJlY3Vyc2UoZXhwciwgYXN0LmNvbnN0YW50ID8gdW5kZWZpbmVkIDogc2VsZi5uZXh0SWQoKSwgdW5kZWZpbmVkLCBmdW5jdGlvbihhcmd1bWVudCkge1xuICAgICAgICAgIGFyZ3MucHVzaChhcmd1bWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBleHByZXNzaW9uID0gJ1snICsgYXJncy5qb2luKCcsJykgKyAnXSc7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8IGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuT2JqZWN0RXhwcmVzc2lvbjpcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGNvbXB1dGVkID0gZmFsc2U7XG4gICAgICBmb3JFYWNoKGFzdC5wcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICBpZiAocHJvcGVydHkuY29tcHV0ZWQpIHtcbiAgICAgICAgICBjb21wdXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICAgIGludG9JZCA9IGludG9JZCB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgICB0aGlzLmFzc2lnbihpbnRvSWQsICd7fScpO1xuICAgICAgICBmb3JFYWNoKGFzdC5wcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICAgIGlmIChwcm9wZXJ0eS5jb21wdXRlZCkge1xuICAgICAgICAgICAgbGVmdCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgICBzZWxmLnJlY3Vyc2UocHJvcGVydHkua2V5LCBsZWZ0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGVmdCA9IHByb3BlcnR5LmtleS50eXBlID09PSBBU1QuSWRlbnRpZmllciA/XG4gICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LmtleS5uYW1lIDpcbiAgICAgICAgICAgICAgICAgICAgICAgKCcnICsgcHJvcGVydHkua2V5LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmlnaHQgPSBzZWxmLm5leHRJZCgpO1xuICAgICAgICAgIHNlbGYucmVjdXJzZShwcm9wZXJ0eS52YWx1ZSwgcmlnaHQpO1xuICAgICAgICAgIHNlbGYuYXNzaWduKHNlbGYubWVtYmVyKGludG9JZCwgbGVmdCwgcHJvcGVydHkuY29tcHV0ZWQpLCByaWdodCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgICBzZWxmLnJlY3Vyc2UocHJvcGVydHkudmFsdWUsIGFzdC5jb25zdGFudCA/IHVuZGVmaW5lZCA6IHNlbGYubmV4dElkKCksIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICAgICAgYXJncy5wdXNoKHNlbGYuZXNjYXBlKFxuICAgICAgICAgICAgICAgIHByb3BlcnR5LmtleS50eXBlID09PSBBU1QuSWRlbnRpZmllciA/IHByb3BlcnR5LmtleS5uYW1lIDpcbiAgICAgICAgICAgICAgICAgICgnJyArIHByb3BlcnR5LmtleS52YWx1ZSkpICtcbiAgICAgICAgICAgICAgICAnOicgKyBleHByKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGV4cHJlc3Npb24gPSAneycgKyBhcmdzLmpvaW4oJywnKSArICd9JztcbiAgICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCB8fCBleHByZXNzaW9uKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQVNULlRoaXNFeHByZXNzaW9uOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAncycpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICdzJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAnbCcpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICdsJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5OR1ZhbHVlUGFyYW1ldGVyOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAndicpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICd2Jyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH0sXG5cbiAgZ2V0SGFzT3duUHJvcGVydHk6IGZ1bmN0aW9uKGVsZW1lbnQsIHByb3BlcnR5KSB7XG4gICAgdmFyIGtleSA9IGVsZW1lbnQgKyAnLicgKyBwcm9wZXJ0eTtcbiAgICB2YXIgb3duID0gdGhpcy5jdXJyZW50KCkub3duO1xuICAgIGlmICghb3duLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIG93bltrZXldID0gdGhpcy5uZXh0SWQoZmFsc2UsIGVsZW1lbnQgKyAnJiYoJyArIHRoaXMuZXNjYXBlKHByb3BlcnR5KSArICcgaW4gJyArIGVsZW1lbnQgKyAnKScpO1xuICAgIH1cbiAgICByZXR1cm4gb3duW2tleV07XG4gIH0sXG5cbiAgYXNzaWduOiBmdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgICBpZiAoIWlkKSByZXR1cm47XG4gICAgdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKGlkLCAnPScsIHZhbHVlLCAnOycpO1xuICAgIHJldHVybiBpZDtcbiAgfSxcblxuICBmaWx0ZXI6IGZ1bmN0aW9uKGZpbHRlck5hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShmaWx0ZXJOYW1lKSkge1xuICAgICAgdGhpcy5zdGF0ZS5maWx0ZXJzW2ZpbHRlck5hbWVdID0gdGhpcy5uZXh0SWQodHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlLmZpbHRlcnNbZmlsdGVyTmFtZV07XG4gIH0sXG5cbiAgaWZEZWZpbmVkOiBmdW5jdGlvbihpZCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuICdpZkRlZmluZWQoJyArIGlkICsgJywnICsgdGhpcy5lc2NhcGUoZGVmYXVsdFZhbHVlKSArICcpJztcbiAgfSxcblxuICBwbHVzOiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiAncGx1cygnICsgbGVmdCArICcsJyArIHJpZ2h0ICsgJyknO1xuICB9LFxuXG4gIHJldHVybl86IGZ1bmN0aW9uKGlkKSB7XG4gICAgdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKCdyZXR1cm4gJywgaWQsICc7Jyk7XG4gIH0sXG5cbiAgaWZfOiBmdW5jdGlvbih0ZXN0LCBhbHRlcm5hdGUsIGNvbnNlcXVlbnQpIHtcbiAgICBpZiAodGVzdCA9PT0gdHJ1ZSkge1xuICAgICAgYWx0ZXJuYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBib2R5ID0gdGhpcy5jdXJyZW50KCkuYm9keTtcbiAgICAgIGJvZHkucHVzaCgnaWYoJywgdGVzdCwgJyl7Jyk7XG4gICAgICBhbHRlcm5hdGUoKTtcbiAgICAgIGJvZHkucHVzaCgnfScpO1xuICAgICAgaWYgKGNvbnNlcXVlbnQpIHtcbiAgICAgICAgYm9keS5wdXNoKCdlbHNleycpO1xuICAgICAgICBjb25zZXF1ZW50KCk7XG4gICAgICAgIGJvZHkucHVzaCgnfScpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBub3Q6IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHtcbiAgICByZXR1cm4gJyEoJyArIGV4cHJlc3Npb24gKyAnKSc7XG4gIH0sXG5cbiAgaXNOdWxsOiBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24gKyAnPT1udWxsJztcbiAgfSxcblxuICBub3ROdWxsOiBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24gKyAnIT1udWxsJztcbiAgfSxcblxuICBub25Db21wdXRlZE1lbWJlcjogZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcbiAgICB2YXIgU0FGRV9JREVOVElGSUVSID0gL15bJF9hLXpBLVpdWyRfYS16QS1aMC05XSokLztcbiAgICB2YXIgVU5TQUZFX0NIQVJBQ1RFUlMgPSAvW14kX2EtekEtWjAtOV0vZztcbiAgICBpZiAoU0FGRV9JREVOVElGSUVSLnRlc3QocmlnaHQpKSB7XG4gICAgICByZXR1cm4gbGVmdCArICcuJyArIHJpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbGVmdCAgKyAnW1wiJyArIHJpZ2h0LnJlcGxhY2UoVU5TQUZFX0NIQVJBQ1RFUlMsIHRoaXMuc3RyaW5nRXNjYXBlRm4pICsgJ1wiXSc7XG4gICAgfVxuICB9LFxuXG4gIGNvbXB1dGVkTWVtYmVyOiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiBsZWZ0ICsgJ1snICsgcmlnaHQgKyAnXSc7XG4gIH0sXG5cbiAgbWVtYmVyOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29tcHV0ZWQpIHtcbiAgICBpZiAoY29tcHV0ZWQpIHJldHVybiB0aGlzLmNvbXB1dGVkTWVtYmVyKGxlZnQsIHJpZ2h0KTtcbiAgICByZXR1cm4gdGhpcy5ub25Db21wdXRlZE1lbWJlcihsZWZ0LCByaWdodCk7XG4gIH0sXG5cbiAgZ2V0U3RyaW5nVmFsdWU6IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB0aGlzLmFzc2lnbihpdGVtLCAnZ2V0U3RyaW5nVmFsdWUoJyArIGl0ZW0gKyAnKScpO1xuICB9LFxuXG4gIGxhenlSZWN1cnNlOiBmdW5jdGlvbihhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKTtcbiAgICB9O1xuICB9LFxuXG4gIGxhenlBc3NpZ246IGZ1bmN0aW9uKGlkLCB2YWx1ZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmFzc2lnbihpZCwgdmFsdWUpO1xuICAgIH07XG4gIH0sXG5cbiAgc3RyaW5nRXNjYXBlUmVnZXg6IC9bXiBhLXpBLVowLTldL2csXG5cbiAgc3RyaW5nRXNjYXBlRm46IGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gJ1xcXFx1JyArICgnMDAwMCcgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG4gIH0sXG5cbiAgZXNjYXBlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHJldHVybiAnXFwnJyArIHZhbHVlLnJlcGxhY2UodGhpcy5zdHJpbmdFc2NhcGVSZWdleCwgdGhpcy5zdHJpbmdFc2NhcGVGbikgKyAnXFwnJztcbiAgICBpZiAoaXNOdW1iZXIodmFsdWUpKSByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICBpZiAodmFsdWUgPT09IHRydWUpIHJldHVybiAndHJ1ZSc7XG4gICAgaWYgKHZhbHVlID09PSBmYWxzZSkgcmV0dXJuICdmYWxzZSc7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gJ251bGwnO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG5cbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2VzYycsICdJTVBPU1NJQkxFJyk7XG4gIH0sXG5cbiAgbmV4dElkOiBmdW5jdGlvbihza2lwLCBpbml0KSB7XG4gICAgdmFyIGlkID0gJ3YnICsgKHRoaXMuc3RhdGUubmV4dElkKyspO1xuICAgIGlmICghc2tpcCkge1xuICAgICAgdGhpcy5jdXJyZW50KCkudmFycy5wdXNoKGlkICsgKGluaXQgPyAnPScgKyBpbml0IDogJycpKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xuICB9LFxuXG4gIGN1cnJlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMuc3RhdGUuY29tcHV0aW5nXTtcbiAgfVxufTtcblxuXG5mdW5jdGlvbiBBU1RJbnRlcnByZXRlcigkZmlsdGVyKSB7XG4gIHRoaXMuJGZpbHRlciA9ICRmaWx0ZXI7XG59XG5cbkFTVEludGVycHJldGVyLnByb3RvdHlwZSA9IHtcbiAgY29tcGlsZTogZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LCBzZWxmLiRmaWx0ZXIpO1xuICAgIHZhciBhc3NpZ25hYmxlO1xuICAgIHZhciBhc3NpZ247XG4gICAgaWYgKChhc3NpZ25hYmxlID0gYXNzaWduYWJsZUFTVChhc3QpKSkge1xuICAgICAgYXNzaWduID0gdGhpcy5yZWN1cnNlKGFzc2lnbmFibGUpO1xuICAgIH1cbiAgICB2YXIgdG9XYXRjaCA9IGdldElucHV0cyhhc3QuYm9keSk7XG4gICAgdmFyIGlucHV0cztcbiAgICBpZiAodG9XYXRjaCkge1xuICAgICAgaW5wdXRzID0gW107XG4gICAgICBmb3JFYWNoKHRvV2F0Y2gsIGZ1bmN0aW9uKHdhdGNoLCBrZXkpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gc2VsZi5yZWN1cnNlKHdhdGNoKTtcbiAgICAgICAgaW5wdXQuaXNQdXJlID0gd2F0Y2guaXNQdXJlO1xuICAgICAgICB3YXRjaC5pbnB1dCA9IGlucHV0O1xuICAgICAgICBpbnB1dHMucHVzaChpbnB1dCk7XG4gICAgICAgIHdhdGNoLndhdGNoSWQgPSBrZXk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdmFyIGV4cHJlc3Npb25zID0gW107XG4gICAgZm9yRWFjaChhc3QuYm9keSwgZnVuY3Rpb24oZXhwcmVzc2lvbikge1xuICAgICAgZXhwcmVzc2lvbnMucHVzaChzZWxmLnJlY3Vyc2UoZXhwcmVzc2lvbi5leHByZXNzaW9uKSk7XG4gICAgfSk7XG4gICAgdmFyIGZuID0gYXN0LmJvZHkubGVuZ3RoID09PSAwID8gbm9vcCA6XG4gICAgICAgICAgICAgYXN0LmJvZHkubGVuZ3RoID09PSAxID8gZXhwcmVzc2lvbnNbMF0gOlxuICAgICAgICAgICAgIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XG4gICAgICAgICAgICAgICBmb3JFYWNoKGV4cHJlc3Npb25zLCBmdW5jdGlvbihleHApIHtcbiAgICAgICAgICAgICAgICAgbGFzdFZhbHVlID0gZXhwKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICByZXR1cm4gbGFzdFZhbHVlO1xuICAgICAgICAgICAgIH07XG4gICAgaWYgKGFzc2lnbikge1xuICAgICAgZm4uYXNzaWduID0gZnVuY3Rpb24oc2NvcGUsIHZhbHVlLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuIGFzc2lnbihzY29wZSwgbG9jYWxzLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5wdXRzKSB7XG4gICAgICBmbi5pbnB1dHMgPSBpbnB1dHM7XG4gICAgfVxuICAgIHJldHVybiBmbjtcbiAgfSxcblxuICByZWN1cnNlOiBmdW5jdGlvbihhc3QsIGNvbnRleHQsIGNyZWF0ZSkge1xuICAgIHZhciBsZWZ0LCByaWdodCwgc2VsZiA9IHRoaXMsIGFyZ3M7XG4gICAgaWYgKGFzdC5pbnB1dCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5wdXRzKGFzdC5pbnB1dCwgYXN0LndhdGNoSWQpO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFzdC50eXBlKSB7XG4gICAgY2FzZSBBU1QuTGl0ZXJhbDpcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlKGFzdC52YWx1ZSwgY29udGV4dCk7XG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LmFyZ3VtZW50KTtcbiAgICAgIHJldHVybiB0aGlzWyd1bmFyeScgKyBhc3Qub3BlcmF0b3JdKHJpZ2h0LCBjb250ZXh0KTtcbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IHRoaXMucmVjdXJzZShhc3QubGVmdCk7XG4gICAgICByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucmlnaHQpO1xuICAgICAgcmV0dXJuIHRoaXNbJ2JpbmFyeScgKyBhc3Qub3BlcmF0b3JdKGxlZnQsIHJpZ2h0LCBjb250ZXh0KTtcbiAgICBjYXNlIEFTVC5Mb2dpY2FsRXhwcmVzc2lvbjpcbiAgICAgIGxlZnQgPSB0aGlzLnJlY3Vyc2UoYXN0LmxlZnQpO1xuICAgICAgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LnJpZ2h0KTtcbiAgICAgIHJldHVybiB0aGlzWydiaW5hcnknICsgYXN0Lm9wZXJhdG9yXShsZWZ0LCByaWdodCwgY29udGV4dCk7XG4gICAgY2FzZSBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIHRoaXNbJ3Rlcm5hcnk/OiddKFxuICAgICAgICB0aGlzLnJlY3Vyc2UoYXN0LnRlc3QpLFxuICAgICAgICB0aGlzLnJlY3Vyc2UoYXN0LmFsdGVybmF0ZSksXG4gICAgICAgIHRoaXMucmVjdXJzZShhc3QuY29uc2VxdWVudCksXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgY2FzZSBBU1QuSWRlbnRpZmllcjpcbiAgICAgIHJldHVybiBzZWxmLmlkZW50aWZpZXIoYXN0Lm5hbWUsIGNvbnRleHQsIGNyZWF0ZSk7XG4gICAgY2FzZSBBU1QuTWVtYmVyRXhwcmVzc2lvbjpcbiAgICAgIGxlZnQgPSB0aGlzLnJlY3Vyc2UoYXN0Lm9iamVjdCwgZmFsc2UsICEhY3JlYXRlKTtcbiAgICAgIGlmICghYXN0LmNvbXB1dGVkKSB7XG4gICAgICAgIHJpZ2h0ID0gYXN0LnByb3BlcnR5Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAoYXN0LmNvbXB1dGVkKSByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucHJvcGVydHkpO1xuICAgICAgcmV0dXJuIGFzdC5jb21wdXRlZCA/XG4gICAgICAgIHRoaXMuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQsIGNvbnRleHQsIGNyZWF0ZSkgOlxuICAgICAgICB0aGlzLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIHJpZ2h0LCBjb250ZXh0LCBjcmVhdGUpO1xuICAgIGNhc2UgQVNULkNhbGxFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QuYXJndW1lbnRzLCBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIGFyZ3MucHVzaChzZWxmLnJlY3Vyc2UoZXhwcikpO1xuICAgICAgfSk7XG4gICAgICBpZiAoYXN0LmZpbHRlcikgcmlnaHQgPSB0aGlzLiRmaWx0ZXIoYXN0LmNhbGxlZS5uYW1lKTtcbiAgICAgIGlmICghYXN0LmZpbHRlcikgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LmNhbGxlZSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gYXN0LmZpbHRlciA/XG4gICAgICAgIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2goYXJnc1tpXShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdmFsdWUgPSByaWdodC5hcHBseSh1bmRlZmluZWQsIHZhbHVlcywgaW5wdXRzKTtcbiAgICAgICAgICByZXR1cm4gY29udGV4dCA/IHtjb250ZXh0OiB1bmRlZmluZWQsIG5hbWU6IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgICB9IDpcbiAgICAgICAgZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICBpZiAocmhzLnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChhcmdzW2ldKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IHJocy52YWx1ZS5hcHBseShyaHMuY29udGV4dCwgdmFsdWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgICB9O1xuICAgIGNhc2UgQVNULkFzc2lnbm1lbnRFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IHRoaXMucmVjdXJzZShhc3QubGVmdCwgdHJ1ZSwgMSk7XG4gICAgICByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucmlnaHQpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgIHZhciBsaHMgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgdmFyIHJocyA9IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgbGhzLmNvbnRleHRbbGhzLm5hbWVdID0gcmhzO1xuICAgICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogcmhzfSA6IHJocztcbiAgICAgIH07XG4gICAgY2FzZSBBU1QuQXJyYXlFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QuZWxlbWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgYXJncy5wdXNoKHNlbGYucmVjdXJzZShleHByKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgdmFsdWUucHVzaChhcmdzW2ldKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgfTtcbiAgICBjYXNlIEFTVC5PYmplY3RFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgaWYgKHByb3BlcnR5LmNvbXB1dGVkKSB7XG4gICAgICAgICAgYXJncy5wdXNoKHtrZXk6IHNlbGYucmVjdXJzZShwcm9wZXJ0eS5rZXkpLFxuICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5yZWN1cnNlKHByb3BlcnR5LnZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFyZ3MucHVzaCh7a2V5OiBwcm9wZXJ0eS5rZXkudHlwZSA9PT0gQVNULklkZW50aWZpZXIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5rZXkubmFtZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICgnJyArIHByb3BlcnR5LmtleS52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICBjb21wdXRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5yZWN1cnNlKHByb3BlcnR5LnZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgaWYgKGFyZ3NbaV0uY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIHZhbHVlW2FyZ3NbaV0ua2V5KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKV0gPSBhcmdzW2ldLnZhbHVlKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWVbYXJnc1tpXS5rZXldID0gYXJnc1tpXS52YWx1ZShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiB2YWx1ZX0gOiB2YWx1ZTtcbiAgICAgIH07XG4gICAgY2FzZSBBU1QuVGhpc0V4cHJlc3Npb246XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHNjb3BlfSA6IHNjb3BlO1xuICAgICAgfTtcbiAgICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGxvY2Fsc30gOiBsb2NhbHM7XG4gICAgICB9O1xuICAgIGNhc2UgQVNULk5HVmFsdWVQYXJhbWV0ZXI6XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhc3NpZ259IDogYXNzaWduO1xuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgJ3VuYXJ5Kyc6IGZ1bmN0aW9uKGFyZ3VtZW50LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gYXJndW1lbnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgaWYgKGlzRGVmaW5lZChhcmcpKSB7XG4gICAgICAgIGFyZyA9ICthcmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ3VuYXJ5LSc6IGZ1bmN0aW9uKGFyZ3VtZW50LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gYXJndW1lbnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgaWYgKGlzRGVmaW5lZChhcmcpKSB7XG4gICAgICAgIGFyZyA9IC1hcmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSAtMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICd1bmFyeSEnOiBmdW5jdGlvbihhcmd1bWVudCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9ICFhcmd1bWVudChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Kyc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgbGhzID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIGFyZyA9IHBsdXNGbihsaHMsIHJocyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5LSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgbGhzID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIGFyZyA9IChpc0RlZmluZWQobGhzKSA/IGxocyA6IDApIC0gKGlzRGVmaW5lZChyaHMpID8gcmhzIDogMCk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Kic6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgKiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Lyc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgLyByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5JSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgJSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PT09JzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSA9PT0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSE9PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgIT09IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICdiaW5hcnk9PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPT0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSE9JzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSAhPSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PCc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPCByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Pic6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PD0nOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIDw9IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICdiaW5hcnk+PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPj0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSYmJzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSAmJiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5fHwnOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHx8IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICd0ZXJuYXJ5PzonOiBmdW5jdGlvbih0ZXN0LCBhbHRlcm5hdGUsIGNvbnNlcXVlbnQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSB0ZXN0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSA/IGFsdGVybmF0ZShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgOiBjb25zZXF1ZW50KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gIHZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbnRleHQgPyB7Y29udGV4dDogdW5kZWZpbmVkLCBuYW1lOiB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX0gOiB2YWx1ZTsgfTtcbiAgfSxcbiAgaWRlbnRpZmllcjogZnVuY3Rpb24obmFtZSwgY29udGV4dCwgY3JlYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYmFzZSA9IGxvY2FscyAmJiAobmFtZSBpbiBsb2NhbHMpID8gbG9jYWxzIDogc2NvcGU7XG4gICAgICBpZiAoY3JlYXRlICYmIGNyZWF0ZSAhPT0gMSAmJiBiYXNlICYmIGJhc2VbbmFtZV0gPT0gbnVsbCkge1xuICAgICAgICBiYXNlW25hbWVdID0ge307XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBiYXNlID8gYmFzZVtuYW1lXSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB7Y29udGV4dDogYmFzZSwgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICBjb21wdXRlZE1lbWJlcjogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQsIGNyZWF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGxocyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIHJocztcbiAgICAgIHZhciB2YWx1ZTtcbiAgICAgIGlmIChsaHMgIT0gbnVsbCkge1xuICAgICAgICByaHMgPSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgIHJocyA9IGdldFN0cmluZ1ZhbHVlKHJocyk7XG4gICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgaWYgKGxocyAmJiAhKGxoc1tyaHNdKSkge1xuICAgICAgICAgICAgbGhzW3Joc10gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSBsaHNbcmhzXTtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB7Y29udGV4dDogbGhzLCBuYW1lOiByaHMsIHZhbHVlOiB2YWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgbm9uQ29tcHV0ZWRNZW1iZXI6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0LCBjcmVhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBsaHMgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgIGlmIChsaHMgJiYgbGhzW3JpZ2h0XSA9PSBudWxsKSB7XG4gICAgICAgICAgbGhzW3JpZ2h0XSA9IHt9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBsaHMgIT0gbnVsbCA/IGxoc1tyaWdodF0gOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICByZXR1cm4ge2NvbnRleHQ6IGxocywgbmFtZTogcmlnaHQsIHZhbHVlOiB2YWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgaW5wdXRzOiBmdW5jdGlvbihpbnB1dCwgd2F0Y2hJZCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgdmFsdWUsIGxvY2FscywgaW5wdXRzKSB7XG4gICAgICBpZiAoaW5wdXRzKSByZXR1cm4gaW5wdXRzW3dhdGNoSWRdO1xuICAgICAgcmV0dXJuIGlucHV0KHNjb3BlLCB2YWx1ZSwgbG9jYWxzKTtcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBQYXJzZXIobGV4ZXIsICRmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5hc3QgPSBuZXcgQVNUKGxleGVyLCBvcHRpb25zKTtcbiAgdGhpcy5hc3RDb21waWxlciA9IG9wdGlvbnMuY3NwID8gbmV3IEFTVEludGVycHJldGVyKCRmaWx0ZXIpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEFTVENvbXBpbGVyKCRmaWx0ZXIpO1xufVxuXG5QYXJzZXIucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUGFyc2VyLFxuXG4gIHBhcnNlOiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgdmFyIGFzdCA9IHRoaXMuZ2V0QXN0KHRleHQpO1xuICAgIHZhciBmbiA9IHRoaXMuYXN0Q29tcGlsZXIuY29tcGlsZShhc3QuYXN0KTtcbiAgICBmbi5saXRlcmFsID0gaXNMaXRlcmFsKGFzdC5hc3QpO1xuICAgIGZuLmNvbnN0YW50ID0gaXNDb25zdGFudChhc3QuYXN0KTtcbiAgICBmbi5vbmVUaW1lID0gYXN0Lm9uZVRpbWU7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIGdldEFzdDogZnVuY3Rpb24oZXhwKSB7XG4gICAgdmFyIG9uZVRpbWUgPSBmYWxzZTtcbiAgICBleHAgPSBleHAudHJpbSgpO1xuXG4gICAgaWYgKGV4cC5jaGFyQXQoMCkgPT09ICc6JyAmJiBleHAuY2hhckF0KDEpID09PSAnOicpIHtcbiAgICAgIG9uZVRpbWUgPSB0cnVlO1xuICAgICAgZXhwID0gZXhwLnN1YnN0cmluZygyKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFzdDogdGhpcy5hc3QuYXN0KGV4cCksXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0VmFsdWVPZih2YWx1ZSkge1xuICByZXR1cm4gaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKSA/IHZhbHVlLnZhbHVlT2YoKSA6IG9iamVjdFZhbHVlT2YuY2FsbCh2YWx1ZSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRwYXJzZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBDb252ZXJ0cyBBbmd1bGFySlMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaW50byBhIGZ1bmN0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBnZXR0ZXIgPSAkcGFyc2UoJ3VzZXIubmFtZScpO1xuICogICB2YXIgc2V0dGVyID0gZ2V0dGVyLmFzc2lnbjtcbiAqICAgdmFyIGNvbnRleHQgPSB7dXNlcjp7bmFtZTonQW5ndWxhckpTJ319O1xuICogICB2YXIgbG9jYWxzID0ge3VzZXI6e25hbWU6J2xvY2FsJ319O1xuICpcbiAqICAgZXhwZWN0KGdldHRlcihjb250ZXh0KSkudG9FcXVhbCgnQW5ndWxhckpTJyk7XG4gKiAgIHNldHRlcihjb250ZXh0LCAnbmV3VmFsdWUnKTtcbiAqICAgZXhwZWN0KGNvbnRleHQudXNlci5uYW1lKS50b0VxdWFsKCduZXdWYWx1ZScpO1xuICogICBleHBlY3QoZ2V0dGVyKGNvbnRleHQsIGxvY2FscykpLnRvRXF1YWwoJ2xvY2FsJyk7XG4gKiBgYGBcbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gKlxuICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xuICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXG4gKiAgICAgIGBjb250ZXh0YC5cbiAqXG4gKiAgICBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gYWxzbyBoYXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogICAgICAqIGBsaXRlcmFsYCDigJMgYHtib29sZWFufWAg4oCTIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24ncyB0b3AtbGV2ZWwgbm9kZSBpcyBhIEphdmFTY3JpcHRcbiAqICAgICAgICBsaXRlcmFsLlxuICogICAgICAqIGBjb25zdGFudGAg4oCTIGB7Ym9vbGVhbn1gIOKAkyB3aGV0aGVyIHRoZSBleHByZXNzaW9uIGlzIG1hZGUgZW50aXJlbHkgb2YgSmF2YVNjcmlwdFxuICogICAgICAgIGNvbnN0YW50IGxpdGVyYWxzLlxuICogICAgICAqIGBhc3NpZ25gIOKAkyBgez9mdW5jdGlvbihjb250ZXh0LCB2YWx1ZSl9YCDigJMgaWYgdGhlIGV4cHJlc3Npb24gaXMgYXNzaWduYWJsZSwgdGhpcyB3aWxsIGJlXG4gKiAgICAgICAgc2V0IHRvIGEgZnVuY3Rpb24gdG8gY2hhbmdlIGl0cyB2YWx1ZSBvbiB0aGUgZ2l2ZW4gY29udGV4dC5cbiAqXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHBhcnNlUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgJHBhcnNlUHJvdmlkZXJgIGNhbiBiZSB1c2VkIGZvciBjb25maWd1cmluZyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUge0BsaW5rIG5nLiRwYXJzZSAkcGFyc2V9XG4gKiAgc2VydmljZS5cbiAqL1xuZnVuY3Rpb24gJFBhcnNlUHJvdmlkZXIoKSB7XG4gIHZhciBjYWNoZSA9IGNyZWF0ZU1hcCgpO1xuICB2YXIgbGl0ZXJhbHMgPSB7XG4gICAgJ3RydWUnOiB0cnVlLFxuICAgICdmYWxzZSc6IGZhbHNlLFxuICAgICdudWxsJzogbnVsbCxcbiAgICAndW5kZWZpbmVkJzogdW5kZWZpbmVkXG4gIH07XG4gIHZhciBpZGVudFN0YXJ0LCBpZGVudENvbnRpbnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRwYXJzZVByb3ZpZGVyI2FkZExpdGVyYWxcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIENvbmZpZ3VyZSAkcGFyc2Ugc2VydmljZSB0byBhZGQgbGl0ZXJhbCB2YWx1ZXMgdGhhdCB3aWxsIGJlIHByZXNlbnQgYXMgbGl0ZXJhbCBhdCBleHByZXNzaW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxpdGVyYWxOYW1lIFRva2VuIGZvciB0aGUgbGl0ZXJhbCB2YWx1ZS4gVGhlIGxpdGVyYWwgbmFtZSB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgbGl0ZXJhbCBuYW1lLlxuICAgKiBAcGFyYW0geyp9IGxpdGVyYWxWYWx1ZSBWYWx1ZSBmb3IgdGhpcyBsaXRlcmFsLiBBbGwgbGl0ZXJhbCB2YWx1ZXMgbXVzdCBiZSBwcmltaXRpdmVzIG9yIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiovXG4gIHRoaXMuYWRkTGl0ZXJhbCA9IGZ1bmN0aW9uKGxpdGVyYWxOYW1lLCBsaXRlcmFsVmFsdWUpIHtcbiAgICBsaXRlcmFsc1tsaXRlcmFsTmFtZV0gPSBsaXRlcmFsVmFsdWU7XG4gIH07XG5cbiAvKipcbiAgKiBAbmdkb2MgbWV0aG9kXG4gICogQG5hbWUgJHBhcnNlUHJvdmlkZXIjc2V0SWRlbnRpZmllckZuc1xuICAqXG4gICogQGRlc2NyaXB0aW9uXG4gICpcbiAgKiBBbGxvd3MgZGVmaW5pbmcgdGhlIHNldCBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIGFsbG93ZWQgaW4gQW5ndWxhckpTIGV4cHJlc3Npb25zLiBUaGUgZnVuY3Rpb25cbiAgKiBgaWRlbnRpZmllclN0YXJ0YCB3aWxsIGdldCBjYWxsZWQgdG8ga25vdyBpZiBhIGdpdmVuIGNoYXJhY3RlciBpcyBhIHZhbGlkIGNoYXJhY3RlciB0byBiZSB0aGVcbiAgKiBmaXJzdCBjaGFyYWN0ZXIgZm9yIGFuIGlkZW50aWZpZXIuIFRoZSBmdW5jdGlvbiBgaWRlbnRpZmllckNvbnRpbnVlYCB3aWxsIGdldCBjYWxsZWQgdG8ga25vdyBpZlxuICAqIGEgZ2l2ZW4gY2hhcmFjdGVyIGlzIGEgdmFsaWQgY2hhcmFjdGVyIHRvIGJlIGEgZm9sbG93LXVwIGlkZW50aWZpZXIgY2hhcmFjdGVyLiBUaGUgZnVuY3Rpb25zXG4gICogYGlkZW50aWZpZXJTdGFydGAgYW5kIGBpZGVudGlmaWVyQ29udGludWVgIHdpbGwgcmVjZWl2ZSBhcyBhcmd1bWVudHMgdGhlIHNpbmdsZSBjaGFyYWN0ZXIgdG8gYmVcbiAgKiBpZGVudGlmaWVyIGFuZCB0aGUgY2hhcmFjdGVyIGNvZGUgcG9pbnQuIFRoZXNlIGFyZ3VtZW50cyB3aWxsIGJlIGBzdHJpbmdgIGFuZCBgbnVtZXJpY2AuIEtlZXAgaW5cbiAgKiBtaW5kIHRoYXQgdGhlIGBzdHJpbmdgIHBhcmFtZXRlciBjYW4gYmUgdHdvIGNoYXJhY3RlcnMgbG9uZyBkZXBlbmRpbmcgb24gdGhlIGNoYXJhY3RlclxuICAqIHJlcHJlc2VudGF0aW9uLiBJdCBpcyBleHBlY3RlZCBmb3IgdGhlIGZ1bmN0aW9uIHRvIHJldHVybiBgdHJ1ZWAgb3IgYGZhbHNlYCwgd2hldGhlciB0aGF0XG4gICogY2hhcmFjdGVyIGlzIGFsbG93ZWQgb3Igbm90LlxuICAqXG4gICogU2luY2UgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBleHRlbnNpdmVseSwga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlc2UgZnVuY3Rpb25zIGZhc3QsXG4gICogYXMgdGhlIHBlcmZvcm1hbmNlIG9mIHRoZXNlIGZ1bmN0aW9ucyBoYXZlIGEgZGlyZWN0IGltcGFjdCBvbiB0aGUgZXhwcmVzc2lvbnMgcGFyc2luZyBzcGVlZC5cbiAgKlxuICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBpZGVudGlmaWVyU3RhcnQgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBkZWNpZGUgd2hldGhlciB0aGUgZ2l2ZW4gY2hhcmFjdGVyIGlzXG4gICogICBhIHZhbGlkIGlkZW50aWZpZXIgc3RhcnQgY2hhcmFjdGVyLlxuICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBpZGVudGlmaWVyQ29udGludWUgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBkZWNpZGUgd2hldGhlciB0aGUgZ2l2ZW4gY2hhcmFjdGVyIGlzXG4gICogICBhIHZhbGlkIGlkZW50aWZpZXIgY29udGludWUgY2hhcmFjdGVyLlxuICAqL1xuICB0aGlzLnNldElkZW50aWZpZXJGbnMgPSBmdW5jdGlvbihpZGVudGlmaWVyU3RhcnQsIGlkZW50aWZpZXJDb250aW51ZSkge1xuICAgIGlkZW50U3RhcnQgPSBpZGVudGlmaWVyU3RhcnQ7XG4gICAgaWRlbnRDb250aW51ZSA9IGlkZW50aWZpZXJDb250aW51ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyRmaWx0ZXInLCBmdW5jdGlvbigkZmlsdGVyKSB7XG4gICAgdmFyIG5vVW5zYWZlRXZhbCA9IGNzcCgpLm5vVW5zYWZlRXZhbDtcbiAgICB2YXIgJHBhcnNlT3B0aW9ucyA9IHtcbiAgICAgICAgICBjc3A6IG5vVW5zYWZlRXZhbCxcbiAgICAgICAgICBsaXRlcmFsczogY29weShsaXRlcmFscyksXG4gICAgICAgICAgaXNJZGVudGlmaWVyU3RhcnQ6IGlzRnVuY3Rpb24oaWRlbnRTdGFydCkgJiYgaWRlbnRTdGFydCxcbiAgICAgICAgICBpc0lkZW50aWZpZXJDb250aW51ZTogaXNGdW5jdGlvbihpZGVudENvbnRpbnVlKSAmJiBpZGVudENvbnRpbnVlXG4gICAgICAgIH07XG4gICAgJHBhcnNlLiQkZ2V0QXN0ID0gJCRnZXRBc3Q7XG4gICAgcmV0dXJuICRwYXJzZTtcblxuICAgIGZ1bmN0aW9uICRwYXJzZShleHAsIGludGVyY2VwdG9yRm4pIHtcbiAgICAgIHZhciBwYXJzZWRFeHByZXNzaW9uLCBjYWNoZUtleTtcblxuICAgICAgc3dpdGNoICh0eXBlb2YgZXhwKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgZXhwID0gZXhwLnRyaW0oKTtcbiAgICAgICAgICBjYWNoZUtleSA9IGV4cDtcblxuICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBjYWNoZVtjYWNoZUtleV07XG5cbiAgICAgICAgICBpZiAoIXBhcnNlZEV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIHZhciBsZXhlciA9IG5ldyBMZXhlcigkcGFyc2VPcHRpb25zKTtcbiAgICAgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKGxleGVyLCAkZmlsdGVyLCAkcGFyc2VPcHRpb25zKTtcbiAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBwYXJzZXIucGFyc2UoZXhwKTtcblxuICAgICAgICAgICAgY2FjaGVbY2FjaGVLZXldID0gYWRkV2F0Y2hEZWxlZ2F0ZShwYXJzZWRFeHByZXNzaW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGFkZEludGVyY2VwdG9yKHBhcnNlZEV4cHJlc3Npb24sIGludGVyY2VwdG9yRm4pO1xuXG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICByZXR1cm4gYWRkSW50ZXJjZXB0b3IoZXhwLCBpbnRlcmNlcHRvckZuKTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBhZGRJbnRlcmNlcHRvcihub29wLCBpbnRlcmNlcHRvckZuKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiAkJGdldEFzdChleHApIHtcbiAgICAgIHZhciBsZXhlciA9IG5ldyBMZXhlcigkcGFyc2VPcHRpb25zKTtcbiAgICAgIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKGxleGVyLCAkZmlsdGVyLCAkcGFyc2VPcHRpb25zKTtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0QXN0KGV4cCkuYXN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3VmFsdWUsIG9sZFZhbHVlT2ZWYWx1ZSwgY29tcGFyZU9iamVjdElkZW50aXR5KSB7XG5cbiAgICAgIGlmIChuZXdWYWx1ZSA9PSBudWxsIHx8IG9sZFZhbHVlT2ZWYWx1ZSA9PSBudWxsKSB7IC8vIG51bGwvdW5kZWZpbmVkXG4gICAgICAgIHJldHVybiBuZXdWYWx1ZSA9PT0gb2xkVmFsdWVPZlZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0Jykge1xuXG4gICAgICAgIC8vIGF0dGVtcHQgdG8gY29udmVydCB0aGUgdmFsdWUgdG8gYSBwcmltaXRpdmUgdHlwZVxuICAgICAgICAvLyBUT0RPKGRvY3MpOiBhZGQgYSBub3RlIHRvIGRvY3MgdGhhdCBieSBpbXBsZW1lbnRpbmcgdmFsdWVPZiBldmVuIG9iamVjdHMgYW5kIGFycmF5cyBjYW5cbiAgICAgICAgLy8gICAgICAgICAgICAgYmUgY2hlYXBseSBkaXJ0eS1jaGVja2VkXG4gICAgICAgIG5ld1ZhbHVlID0gZ2V0VmFsdWVPZihuZXdWYWx1ZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcgJiYgIWNvbXBhcmVPYmplY3RJZGVudGl0eSkge1xuICAgICAgICAgIC8vIG9iamVjdHMvYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkIC0gZGVlcC13YXRjaGluZyB0aGVtIHdvdWxkIGJlIHRvbyBleHBlbnNpdmVcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmYWxsLXRocm91Z2ggdG8gdGhlIHByaW1pdGl2ZSBlcXVhbGl0eSBjaGVja1xuICAgICAgfVxuXG4gICAgICAvL1ByaW1pdGl2ZSBvciBOYU5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICAgIHJldHVybiBuZXdWYWx1ZSA9PT0gb2xkVmFsdWVPZlZhbHVlIHx8IChuZXdWYWx1ZSAhPT0gbmV3VmFsdWUgJiYgb2xkVmFsdWVPZlZhbHVlICE9PSBvbGRWYWx1ZU9mVmFsdWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlucHV0c1dhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbiwgcHJldHR5UHJpbnRFeHByZXNzaW9uKSB7XG4gICAgICB2YXIgaW5wdXRFeHByZXNzaW9ucyA9IHBhcnNlZEV4cHJlc3Npb24uaW5wdXRzO1xuICAgICAgdmFyIGxhc3RSZXN1bHQ7XG5cbiAgICAgIGlmIChpbnB1dEV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB2YXIgb2xkSW5wdXRWYWx1ZU9mID0gZXhwcmVzc2lvbklucHV0RGlydHlDaGVjazsgLy8gaW5pdCB0byBzb21ldGhpbmcgdW5pcXVlIHNvIHRoYXQgZXF1YWxzIGNoZWNrIGZhaWxzXG4gICAgICAgIGlucHV0RXhwcmVzc2lvbnMgPSBpbnB1dEV4cHJlc3Npb25zWzBdO1xuICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dFdhdGNoKHNjb3BlKSB7XG4gICAgICAgICAgdmFyIG5ld0lucHV0VmFsdWUgPSBpbnB1dEV4cHJlc3Npb25zKHNjb3BlKTtcbiAgICAgICAgICBpZiAoIWV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3SW5wdXRWYWx1ZSwgb2xkSW5wdXRWYWx1ZU9mLCBpbnB1dEV4cHJlc3Npb25zLmlzUHVyZSkpIHtcbiAgICAgICAgICAgIGxhc3RSZXN1bHQgPSBwYXJzZWRFeHByZXNzaW9uKHNjb3BlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgW25ld0lucHV0VmFsdWVdKTtcbiAgICAgICAgICAgIG9sZElucHV0VmFsdWVPZiA9IG5ld0lucHV0VmFsdWUgJiYgZ2V0VmFsdWVPZihuZXdJbnB1dFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcHJldHR5UHJpbnRFeHByZXNzaW9uKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG9sZElucHV0VmFsdWVPZlZhbHVlcyA9IFtdO1xuICAgICAgdmFyIG9sZElucHV0VmFsdWVzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dEV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldID0gZXhwcmVzc2lvbklucHV0RGlydHlDaGVjazsgLy8gaW5pdCB0byBzb21ldGhpbmcgdW5pcXVlIHNvIHRoYXQgZXF1YWxzIGNoZWNrIGZhaWxzXG4gICAgICAgIG9sZElucHV0VmFsdWVzW2ldID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBleHByZXNzaW9uSW5wdXRzV2F0Y2goc2NvcGUpIHtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dEV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICB2YXIgbmV3SW5wdXRWYWx1ZSA9IGlucHV0RXhwcmVzc2lvbnNbaV0oc2NvcGUpO1xuICAgICAgICAgIGlmIChjaGFuZ2VkIHx8IChjaGFuZ2VkID0gIWV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3SW5wdXRWYWx1ZSwgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldLCBpbnB1dEV4cHJlc3Npb25zW2ldLmlzUHVyZSkpKSB7XG4gICAgICAgICAgICBvbGRJbnB1dFZhbHVlc1tpXSA9IG5ld0lucHV0VmFsdWU7XG4gICAgICAgICAgICBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXNbaV0gPSBuZXdJbnB1dFZhbHVlICYmIGdldFZhbHVlT2YobmV3SW5wdXRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICBsYXN0UmVzdWx0ID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9sZElucHV0VmFsdWVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwcmV0dHlQcmludEV4cHJlc3Npb24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uZVRpbWVXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24sIHByZXR0eVByaW50RXhwcmVzc2lvbikge1xuICAgICAgdmFyIGlzRG9uZSA9IHBhcnNlZEV4cHJlc3Npb24ubGl0ZXJhbCA/IGlzQWxsRGVmaW5lZCA6IGlzRGVmaW5lZDtcbiAgICAgIHZhciB1bndhdGNoLCBsYXN0VmFsdWU7XG5cbiAgICAgIHZhciBleHAgPSBwYXJzZWRFeHByZXNzaW9uLiQkaW50ZXJjZXB0ZWQgfHwgcGFyc2VkRXhwcmVzc2lvbjtcbiAgICAgIHZhciBwb3N0ID0gcGFyc2VkRXhwcmVzc2lvbi4kJGludGVyY2VwdG9yIHx8IGlkZW50aXR5O1xuXG4gICAgICB2YXIgdXNlSW5wdXRzID0gcGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMgJiYgIWV4cC5pbnB1dHM7XG5cbiAgICAgIC8vIFByb3BvZ2F0ZSB0aGUgbGl0ZXJhbC9pbnB1dHMvY29uc3RhbnQgYXR0cmlidXRlc1xuICAgICAgLy8gLi4uIGJ1dCBub3Qgb25lVGltZSBzaW5jZSB3ZSBhcmUgaGFuZGxpbmcgaXRcbiAgICAgIG9uZVRpbWVXYXRjaC5saXRlcmFsID0gcGFyc2VkRXhwcmVzc2lvbi5saXRlcmFsO1xuICAgICAgb25lVGltZVdhdGNoLmNvbnN0YW50ID0gcGFyc2VkRXhwcmVzc2lvbi5jb25zdGFudDtcbiAgICAgIG9uZVRpbWVXYXRjaC5pbnB1dHMgPSBwYXJzZWRFeHByZXNzaW9uLmlucHV0cztcblxuICAgICAgLy8gQWxsb3cgb3RoZXIgZGVsZWdhdGVzIHRvIHJ1biBvbiB0aGlzIHdyYXBwZWQgZXhwcmVzc2lvblxuICAgICAgYWRkV2F0Y2hEZWxlZ2F0ZShvbmVUaW1lV2F0Y2gpO1xuXG4gICAgICB1bndhdGNoID0gc2NvcGUuJHdhdGNoKG9uZVRpbWVXYXRjaCwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwcmV0dHlQcmludEV4cHJlc3Npb24pO1xuXG4gICAgICByZXR1cm4gdW53YXRjaDtcblxuICAgICAgZnVuY3Rpb24gdW53YXRjaElmRG9uZSgpIHtcbiAgICAgICAgaWYgKGlzRG9uZShsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgdW53YXRjaCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uZVRpbWVXYXRjaChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICBsYXN0VmFsdWUgPSB1c2VJbnB1dHMgJiYgaW5wdXRzID8gaW5wdXRzWzBdIDogZXhwKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgaWYgKGlzRG9uZShsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KHVud2F0Y2hJZkRvbmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3N0KGxhc3RWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBbGxEZWZpbmVkKHZhbHVlKSB7XG4gICAgICB2YXIgYWxsRGVmaW5lZCA9IHRydWU7XG4gICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQodmFsKSkgYWxsRGVmaW5lZCA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWxsRGVmaW5lZDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25zdGFudFdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xuICAgICAgdmFyIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24gY29uc3RhbnRXYXRjaChzY29wZSkge1xuICAgICAgICB1bndhdGNoKCk7XG4gICAgICAgIHJldHVybiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcbiAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSk7XG4gICAgICByZXR1cm4gdW53YXRjaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRXYXRjaERlbGVnYXRlKHBhcnNlZEV4cHJlc3Npb24pIHtcbiAgICAgIGlmIChwYXJzZWRFeHByZXNzaW9uLmNvbnN0YW50KSB7XG4gICAgICAgIHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlID0gY29uc3RhbnRXYXRjaERlbGVnYXRlO1xuICAgICAgfSBlbHNlIGlmIChwYXJzZWRFeHByZXNzaW9uLm9uZVRpbWUpIHtcbiAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZTtcbiAgICAgIH0gZWxzZSBpZiAocGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMpIHtcbiAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBpbnB1dHNXYXRjaERlbGVnYXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGFpbkludGVyY2VwdG9ycyhmaXJzdCwgc2Vjb25kKSB7XG4gICAgICBmdW5jdGlvbiBjaGFpbmVkSW50ZXJjZXB0b3IodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHNlY29uZChmaXJzdCh2YWx1ZSkpO1xuICAgICAgfVxuICAgICAgY2hhaW5lZEludGVyY2VwdG9yLiRzdGF0ZWZ1bCA9IGZpcnN0LiRzdGF0ZWZ1bCB8fCBzZWNvbmQuJHN0YXRlZnVsO1xuICAgICAgY2hhaW5lZEludGVyY2VwdG9yLiQkcHVyZSA9IGZpcnN0LiQkcHVyZSAmJiBzZWNvbmQuJCRwdXJlO1xuXG4gICAgICByZXR1cm4gY2hhaW5lZEludGVyY2VwdG9yO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEludGVyY2VwdG9yKHBhcnNlZEV4cHJlc3Npb24sIGludGVyY2VwdG9yRm4pIHtcbiAgICAgIGlmICghaW50ZXJjZXB0b3JGbikgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb247XG5cbiAgICAgIC8vIEV4dHJhY3QgYW55IGV4aXN0aW5nIGludGVyY2VwdG9ycyBvdXQgb2YgdGhlIHBhcnNlZEV4cHJlc3Npb25cbiAgICAgIC8vIHRvIGVuc3VyZSB0aGUgb3JpZ2luYWwgcGFyc2VkRXhwcmVzc2lvbiBpcyBhbHdheXMgdGhlICQkaW50ZXJjZXB0ZWRcbiAgICAgIGlmIChwYXJzZWRFeHByZXNzaW9uLiQkaW50ZXJjZXB0b3IpIHtcbiAgICAgICAgaW50ZXJjZXB0b3JGbiA9IGNoYWluSW50ZXJjZXB0b3JzKHBhcnNlZEV4cHJlc3Npb24uJCRpbnRlcmNlcHRvciwgaW50ZXJjZXB0b3JGbik7XG4gICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBwYXJzZWRFeHByZXNzaW9uLiQkaW50ZXJjZXB0ZWQ7XG4gICAgICB9XG5cbiAgICAgIHZhciB1c2VJbnB1dHMgPSBmYWxzZTtcblxuICAgICAgdmFyIGZuID0gZnVuY3Rpb24gaW50ZXJjZXB0ZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHVzZUlucHV0cyAmJiBpbnB1dHMgPyBpbnB1dHNbMF0gOiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgcmV0dXJuIGludGVyY2VwdG9yRm4odmFsdWUpO1xuICAgICAgfTtcblxuICAgICAgLy8gTWFpbnRhaW4gcmVmZXJlbmNlcyB0byB0aGUgaW50ZXJjZXB0b3IvaW50ZXJjZXB0ZWRcbiAgICAgIGZuLiQkaW50ZXJjZXB0ZWQgPSBwYXJzZWRFeHByZXNzaW9uO1xuICAgICAgZm4uJCRpbnRlcmNlcHRvciA9IGludGVyY2VwdG9yRm47XG5cbiAgICAgIC8vIFByb3BvZ2F0ZSB0aGUgbGl0ZXJhbC9vbmVUaW1lL2NvbnN0YW50IGF0dHJpYnV0ZXNcbiAgICAgIGZuLmxpdGVyYWwgPSBwYXJzZWRFeHByZXNzaW9uLmxpdGVyYWw7XG4gICAgICBmbi5vbmVUaW1lID0gcGFyc2VkRXhwcmVzc2lvbi5vbmVUaW1lO1xuICAgICAgZm4uY29uc3RhbnQgPSBwYXJzZWRFeHByZXNzaW9uLmNvbnN0YW50O1xuXG4gICAgICAvLyBUcmVhdCB0aGUgaW50ZXJjZXB0b3IgbGlrZSBmaWx0ZXJzLlxuICAgICAgLy8gSWYgaXQgaXMgbm90ICRzdGF0ZWZ1bCB0aGVuIG9ubHkgd2F0Y2ggaXRzIGlucHV0cy5cbiAgICAgIC8vIElmIHRoZSBleHByZXNzaW9uIGl0c2VsZiBoYXMgbm8gaW5wdXRzIHRoZW4gdXNlIHRoZSBmdWxsIGV4cHJlc3Npb24gYXMgYW4gaW5wdXQuXG4gICAgICBpZiAoIWludGVyY2VwdG9yRm4uJHN0YXRlZnVsKSB7XG4gICAgICAgIHVzZUlucHV0cyA9ICFwYXJzZWRFeHByZXNzaW9uLmlucHV0cztcbiAgICAgICAgZm4uaW5wdXRzID0gcGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMgPyBwYXJzZWRFeHByZXNzaW9uLmlucHV0cyA6IFtwYXJzZWRFeHByZXNzaW9uXTtcblxuICAgICAgICBpZiAoIWludGVyY2VwdG9yRm4uJCRwdXJlKSB7XG4gICAgICAgICAgZm4uaW5wdXRzID0gZm4uaW5wdXRzLm1hcChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaXNQdXJlIGZsYWcgb2YgaW5wdXRzIHdoZW4gaXQgaXMgbm90IGFic29sdXRlIGJlY2F1c2UgdGhleSBhcmUgbm93IHdyYXBwZWQgaW4gYVxuICAgICAgICAgICAgICAvLyBub24tcHVyZSBpbnRlcmNlcHRvciBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgaWYgKGUuaXNQdXJlID09PSBQVVJJVFlfUkVMQVRJVkUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVwdXJpZmllcihzKSB7IHJldHVybiBlKHMpOyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFkZFdhdGNoRGVsZWdhdGUoZm4pO1xuICAgIH1cbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRxXG4gKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBzZXJ2aWNlIHRoYXQgaGVscHMgeW91IHJ1biBmdW5jdGlvbnMgYXN5bmNocm9ub3VzbHksIGFuZCB1c2UgdGhlaXIgcmV0dXJuIHZhbHVlcyAob3IgZXhjZXB0aW9ucylcbiAqIHdoZW4gdGhleSBhcmUgZG9uZSBwcm9jZXNzaW5nLlxuICpcbiAqIFRoaXMgaXMgYSBbUHJvbWlzZXMvQStdKGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vKS1jb21wbGlhbnQgaW1wbGVtZW50YXRpb24gb2YgcHJvbWlzZXMvZGVmZXJyZWRcbiAqIG9iamVjdHMgaW5zcGlyZWQgYnkgW0tyaXMgS293YWwncyBRXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EpLlxuICpcbiAqICRxIGNhbiBiZSB1c2VkIGluIHR3byBmYXNoaW9ucyAtLS0gb25lIHdoaWNoIGlzIG1vcmUgc2ltaWxhciB0byBLcmlzIEtvd2FsJ3MgUSBvciBqUXVlcnkncyBEZWZlcnJlZFxuICogaW1wbGVtZW50YXRpb25zLCBhbmQgdGhlIG90aGVyIHdoaWNoIHJlc2VtYmxlcyBFUzYgKEVTMjAxNSkgcHJvbWlzZXMgdG8gc29tZSBkZWdyZWUuXG4gKlxuICogIyMgJHEgY29uc3RydWN0b3JcbiAqXG4gKiBUaGUgc3RyZWFtbGluZWQgRVM2IHN0eWxlIHByb21pc2UgaXMgZXNzZW50aWFsbHkganVzdCB1c2luZyAkcSBhcyBhIGNvbnN0cnVjdG9yIHdoaWNoIHRha2VzIGEgYHJlc29sdmVyYFxuICogZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50LiBUaGlzIGlzIHNpbWlsYXIgdG8gdGhlIG5hdGl2ZSBQcm9taXNlIGltcGxlbWVudGF0aW9uIGZyb20gRVM2LFxuICogc2VlIFtNRE5dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UpLlxuICpcbiAqIFdoaWxlIHRoZSBjb25zdHJ1Y3Rvci1zdHlsZSB1c2UgaXMgc3VwcG9ydGVkLCBub3QgYWxsIG9mIHRoZSBzdXBwb3J0aW5nIG1ldGhvZHMgZnJvbSBFUzYgcHJvbWlzZXMgYXJlXG4gKiBhdmFpbGFibGUgeWV0LlxuICpcbiAqIEl0IGNhbiBiZSB1c2VkIGxpa2Ugc286XG4gKlxuICogYGBganNcbiAqICAgLy8gZm9yIHRoZSBwdXJwb3NlIG9mIHRoaXMgZXhhbXBsZSBsZXQncyBhc3N1bWUgdGhhdCB2YXJpYWJsZXMgYCRxYCBhbmQgYG9rVG9HcmVldGBcbiAqICAgLy8gYXJlIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBsZXhpY2FsIHNjb3BlICh0aGV5IGNvdWxkIGhhdmUgYmVlbiBpbmplY3RlZCBvciBwYXNzZWQgaW4pLlxuICpcbiAqICAgZnVuY3Rpb24gYXN5bmNHcmVldChuYW1lKSB7XG4gKiAgICAgLy8gcGVyZm9ybSBzb21lIGFzeW5jaHJvbm91cyBvcGVyYXRpb24sIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBwcm9taXNlIHdoZW4gYXBwcm9wcmlhdGUuXG4gKiAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICogICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAqICAgICAgICAgaWYgKG9rVG9HcmVldChuYW1lKSkge1xuICogICAgICAgICAgIHJlc29sdmUoJ0hlbGxvLCAnICsgbmFtZSArICchJyk7XG4gKiAgICAgICAgIH0gZWxzZSB7XG4gKiAgICAgICAgICAgcmVqZWN0KCdHcmVldGluZyAnICsgbmFtZSArICcgaXMgbm90IGFsbG93ZWQuJyk7XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH0sIDEwMDApO1xuICogICAgIH0pO1xuICogICB9XG4gKlxuICogICB2YXIgcHJvbWlzZSA9IGFzeW5jR3JlZXQoJ1JvYmluIEhvb2QnKTtcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gKiAgICAgYWxlcnQoJ1N1Y2Nlc3M6ICcgKyBncmVldGluZyk7XG4gKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIE5vdGU6IHByb2dyZXNzL25vdGlmeSBjYWxsYmFja3MgYXJlIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIHZpYSB0aGUgRVM2LXN0eWxlIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiB1bmxpa2UgRVM2IGJlaGF2aW9yLCBhbiBleGNlcHRpb24gdGhyb3duIGluIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB3aWxsIE5PVCBpbXBsaWNpdGx5IHJlamVjdCB0aGUgcHJvbWlzZS5cbiAqXG4gKiBIb3dldmVyLCB0aGUgbW9yZSB0cmFkaXRpb25hbCBDb21tb25KUy1zdHlsZSB1c2FnZSBpcyBzdGlsbCBhdmFpbGFibGUsIGFuZCBkb2N1bWVudGVkIGJlbG93LlxuICpcbiAqIFtUaGUgQ29tbW9uSlMgUHJvbWlzZSBwcm9wb3NhbF0oaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvUHJvbWlzZXMpIGRlc2NyaWJlcyBhIHByb21pc2UgYXMgYW5cbiAqIGludGVyZmFjZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgYW4gYWN0aW9uIHRoYXQgaXNcbiAqIHBlcmZvcm1lZCBhc3luY2hyb25vdXNseSwgYW5kIG1heSBvciBtYXkgbm90IGJlIGZpbmlzaGVkIGF0IGFueSBnaXZlbiBwb2ludCBpbiB0aW1lLlxuICpcbiAqIEZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIGRlYWxpbmcgd2l0aCBlcnJvciBoYW5kbGluZywgZGVmZXJyZWQgYW5kIHByb21pc2UgQVBJcyBhcmUgdG9cbiAqIGFzeW5jaHJvbm91cyBwcm9ncmFtbWluZyB3aGF0IGB0cnlgLCBgY2F0Y2hgIGFuZCBgdGhyb3dgIGtleXdvcmRzIGFyZSB0byBzeW5jaHJvbm91cyBwcm9ncmFtbWluZy5cbiAqXG4gKiBgYGBqc1xuICogICAvLyBmb3IgdGhlIHB1cnBvc2Ugb2YgdGhpcyBleGFtcGxlIGxldCdzIGFzc3VtZSB0aGF0IHZhcmlhYmxlcyBgJHFgIGFuZCBgb2tUb0dyZWV0YFxuICogICAvLyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGxleGljYWwgc2NvcGUgKHRoZXkgY291bGQgaGF2ZSBiZWVuIGluamVjdGVkIG9yIHBhc3NlZCBpbikuXG4gKlxuICogICBmdW5jdGlvbiBhc3luY0dyZWV0KG5hbWUpIHtcbiAqICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICpcbiAqICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICogICAgICAgZGVmZXJyZWQubm90aWZ5KCdBYm91dCB0byBncmVldCAnICsgbmFtZSArICcuJyk7XG4gKlxuICogICAgICAgaWYgKG9rVG9HcmVldChuYW1lKSkge1xuICogICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdIZWxsbywgJyArIG5hbWUgKyAnIScpO1xuICogICAgICAgfSBlbHNlIHtcbiAqICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdHcmVldGluZyAnICsgbmFtZSArICcgaXMgbm90IGFsbG93ZWQuJyk7XG4gKiAgICAgICB9XG4gKiAgICAgfSwgMTAwMCk7XG4gKlxuICogICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICogICB9XG4gKlxuICogICB2YXIgcHJvbWlzZSA9IGFzeW5jR3JlZXQoJ1JvYmluIEhvb2QnKTtcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gKiAgICAgYWxlcnQoJ1N1Y2Nlc3M6ICcgKyBncmVldGluZyk7XG4gKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xuICogICB9LCBmdW5jdGlvbih1cGRhdGUpIHtcbiAqICAgICBhbGVydCgnR290IG5vdGlmaWNhdGlvbjogJyArIHVwZGF0ZSk7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogQXQgZmlyc3QgaXQgbWlnaHQgbm90IGJlIG9idmlvdXMgd2h5IHRoaXMgZXh0cmEgY29tcGxleGl0eSBpcyB3b3J0aCB0aGUgdHJvdWJsZS4gVGhlIHBheW9mZlxuICogY29tZXMgaW4gdGhlIHdheSBvZiBndWFyYW50ZWVzIHRoYXQgcHJvbWlzZSBhbmQgZGVmZXJyZWQgQVBJcyBtYWtlLCBzZWVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvdW5jb21tb25qcy9ibG9iL21hc3Rlci9wcm9taXNlcy9zcGVjaWZpY2F0aW9uLm1kLlxuICpcbiAqIEFkZGl0aW9uYWxseSB0aGUgcHJvbWlzZSBhcGkgYWxsb3dzIGZvciBjb21wb3NpdGlvbiB0aGF0IGlzIHZlcnkgaGFyZCB0byBkbyB3aXRoIHRoZVxuICogdHJhZGl0aW9uYWwgY2FsbGJhY2sgKFtDUFNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udGludWF0aW9uLXBhc3Npbmdfc3R5bGUpKSBhcHByb2FjaC5cbiAqIEZvciBtb3JlIG9uIHRoaXMgcGxlYXNlIHNlZSB0aGUgW1EgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xKSBlc3BlY2lhbGx5IHRoZVxuICogc2VjdGlvbiBvbiBzZXJpYWwgb3IgcGFyYWxsZWwgam9pbmluZyBvZiBwcm9taXNlcy5cbiAqXG4gKiAjIyBUaGUgRGVmZXJyZWQgQVBJXG4gKlxuICogQSBuZXcgaW5zdGFuY2Ugb2YgZGVmZXJyZWQgaXMgY29uc3RydWN0ZWQgYnkgY2FsbGluZyBgJHEuZGVmZXIoKWAuXG4gKlxuICogVGhlIHB1cnBvc2Ugb2YgdGhlIGRlZmVycmVkIG9iamVjdCBpcyB0byBleHBvc2UgdGhlIGFzc29jaWF0ZWQgUHJvbWlzZSBpbnN0YW5jZSBhcyB3ZWxsIGFzIEFQSXNcbiAqIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHNpZ25hbGluZyB0aGUgc3VjY2Vzc2Z1bCBvciB1bnN1Y2Nlc3NmdWwgY29tcGxldGlvbiwgYXMgd2VsbCBhcyB0aGUgc3RhdHVzXG4gKiBvZiB0aGUgdGFzay5cbiAqXG4gKiAqKk1ldGhvZHMqKlxuICpcbiAqIC0gYHJlc29sdmUodmFsdWUpYCDigJMgcmVzb2x2ZXMgdGhlIGRlcml2ZWQgcHJvbWlzZSB3aXRoIHRoZSBgdmFsdWVgLiBJZiB0aGUgdmFsdWUgaXMgYSByZWplY3Rpb25cbiAqICAgY29uc3RydWN0ZWQgdmlhIGAkcS5yZWplY3RgLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIGluc3RlYWQuXG4gKiAtIGByZWplY3QocmVhc29uKWAg4oCTIHJlamVjdHMgdGhlIGRlcml2ZWQgcHJvbWlzZSB3aXRoIHRoZSBgcmVhc29uYC4gVGhpcyBpcyBlcXVpdmFsZW50IHRvXG4gKiAgIHJlc29sdmluZyBpdCB3aXRoIGEgcmVqZWN0aW9uIGNvbnN0cnVjdGVkIHZpYSBgJHEucmVqZWN0YC5cbiAqIC0gYG5vdGlmeSh2YWx1ZSlgIC0gcHJvdmlkZXMgdXBkYXRlcyBvbiB0aGUgc3RhdHVzIG9mIHRoZSBwcm9taXNlJ3MgZXhlY3V0aW9uLiBUaGlzIG1heSBiZSBjYWxsZWRcbiAqICAgbXVsdGlwbGUgdGltZXMgYmVmb3JlIHRoZSBwcm9taXNlIGlzIGVpdGhlciByZXNvbHZlZCBvciByZWplY3RlZC5cbiAqXG4gKiAqKlByb3BlcnRpZXMqKlxuICpcbiAqIC0gcHJvbWlzZSDigJMgYHtQcm9taXNlfWAg4oCTIHByb21pc2Ugb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGRlZmVycmVkLlxuICpcbiAqXG4gKiAjIyBUaGUgUHJvbWlzZSBBUElcbiAqXG4gKiBBIG5ldyBwcm9taXNlIGluc3RhbmNlIGlzIGNyZWF0ZWQgd2hlbiBhIGRlZmVycmVkIGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIGNhbiBiZSByZXRyaWV2ZWQgYnlcbiAqIGNhbGxpbmcgYGRlZmVycmVkLnByb21pc2VgLlxuICpcbiAqIFRoZSBwdXJwb3NlIG9mIHRoZSBwcm9taXNlIG9iamVjdCBpcyB0byBhbGxvdyBmb3IgaW50ZXJlc3RlZCBwYXJ0aWVzIHRvIGdldCBhY2Nlc3MgdG8gdGhlIHJlc3VsdFxuICogb2YgdGhlIGRlZmVycmVkIHRhc2sgd2hlbiBpdCBjb21wbGV0ZXMuXG4gKlxuICogKipNZXRob2RzKipcbiAqXG4gKiAtIGB0aGVuKHN1Y2Nlc3NDYWxsYmFjaywgW2Vycm9yQ2FsbGJhY2tdLCBbbm90aWZ5Q2FsbGJhY2tdKWAg4oCTIHJlZ2FyZGxlc3Mgb2Ygd2hlbiB0aGUgcHJvbWlzZSB3YXMgb3JcbiAqICAgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCwgYHRoZW5gIGNhbGxzIG9uZSBvZiB0aGUgc3VjY2VzcyBvciBlcnJvciBjYWxsYmFja3MgYXN5bmNocm9ub3VzbHlcbiAqICAgYXMgc29vbiBhcyB0aGUgcmVzdWx0IGlzIGF2YWlsYWJsZS4gVGhlIGNhbGxiYWNrcyBhcmUgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQ6IHRoZSByZXN1bHRcbiAqICAgb3IgcmVqZWN0aW9uIHJlYXNvbi4gQWRkaXRpb25hbGx5LCB0aGUgbm90aWZ5IGNhbGxiYWNrIG1heSBiZSBjYWxsZWQgemVybyBvciBtb3JlIHRpbWVzIHRvXG4gKiAgIHByb3ZpZGUgYSBwcm9ncmVzcyBpbmRpY2F0aW9uLCBiZWZvcmUgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXG4gKlxuICogICBUaGlzIG1ldGhvZCAqcmV0dXJucyBhIG5ldyBwcm9taXNlKiB3aGljaCBpcyByZXNvbHZlZCBvciByZWplY3RlZCB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGVcbiAqICAgYHN1Y2Nlc3NDYWxsYmFja2AsIGBlcnJvckNhbGxiYWNrYCAodW5sZXNzIHRoYXQgdmFsdWUgaXMgYSBwcm9taXNlLCBpbiB3aGljaCBjYXNlIGl0IGlzIHJlc29sdmVkXG4gKiAgIHdpdGggdGhlIHZhbHVlIHdoaWNoIGlzIHJlc29sdmVkIGluIHRoYXQgcHJvbWlzZSB1c2luZ1xuICogICBbcHJvbWlzZSBjaGFpbmluZ10oaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZXM2L3Byb21pc2VzLyN0b2MtcHJvbWlzZXMtcXVldWVzKSkuXG4gKiAgIEl0IGFsc28gbm90aWZpZXMgdmlhIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBub3RpZnlDYWxsYmFja2AgbWV0aG9kLiBUaGUgcHJvbWlzZSBjYW5ub3QgYmVcbiAqICAgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgZnJvbSB0aGUgbm90aWZ5Q2FsbGJhY2sgbWV0aG9kLiBUaGUgZXJyb3JDYWxsYmFjayBhbmQgbm90aWZ5Q2FsbGJhY2tcbiAqICAgYXJndW1lbnRzIGFyZSBvcHRpb25hbC5cbiAqXG4gKiAtIGBjYXRjaChlcnJvckNhbGxiYWNrKWAg4oCTIHNob3J0aGFuZCBmb3IgYHByb21pc2UudGhlbihudWxsLCBlcnJvckNhbGxiYWNrKWBcbiAqXG4gKiAtIGBmaW5hbGx5KGNhbGxiYWNrLCBub3RpZnlDYWxsYmFjaylgIOKAkyBhbGxvd3MgeW91IHRvIG9ic2VydmUgZWl0aGVyIHRoZSBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gb2YgYSBwcm9taXNlLFxuICogICBidXQgdG8gZG8gc28gd2l0aG91dCBtb2RpZnlpbmcgdGhlIGZpbmFsIHZhbHVlLiBUaGlzIGlzIHVzZWZ1bCB0byByZWxlYXNlIHJlc291cmNlcyBvciBkbyBzb21lXG4gKiAgIGNsZWFuLXVwIHRoYXQgbmVlZHMgdG8gYmUgZG9uZSB3aGV0aGVyIHRoZSBwcm9taXNlIHdhcyByZWplY3RlZCBvciByZXNvbHZlZC4gU2VlIHRoZSBbZnVsbFxuICogICBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3Evd2lraS9BUEktUmVmZXJlbmNlI3Byb21pc2VmaW5hbGx5Y2FsbGJhY2spIGZvclxuICogICBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqICMjIENoYWluaW5nIHByb21pc2VzXG4gKlxuICogQmVjYXVzZSBjYWxsaW5nIHRoZSBgdGhlbmAgbWV0aG9kIG9mIGEgcHJvbWlzZSByZXR1cm5zIGEgbmV3IGRlcml2ZWQgcHJvbWlzZSwgaXQgaXMgZWFzaWx5XG4gKiBwb3NzaWJsZSB0byBjcmVhdGUgYSBjaGFpbiBvZiBwcm9taXNlczpcbiAqXG4gKiBgYGBqc1xuICogICBwcm9taXNlQiA9IHByb21pc2VBLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gKiAgICAgcmV0dXJuIHJlc3VsdCArIDE7XG4gKiAgIH0pO1xuICpcbiAqICAgLy8gcHJvbWlzZUIgd2lsbCBiZSByZXNvbHZlZCBpbW1lZGlhdGVseSBhZnRlciBwcm9taXNlQSBpcyByZXNvbHZlZCBhbmQgaXRzIHZhbHVlXG4gKiAgIC8vIHdpbGwgYmUgdGhlIHJlc3VsdCBvZiBwcm9taXNlQSBpbmNyZW1lbnRlZCBieSAxXG4gKiBgYGBcbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBjcmVhdGUgY2hhaW5zIG9mIGFueSBsZW5ndGggYW5kIHNpbmNlIGEgcHJvbWlzZSBjYW4gYmUgcmVzb2x2ZWQgd2l0aCBhbm90aGVyXG4gKiBwcm9taXNlICh3aGljaCB3aWxsIGRlZmVyIGl0cyByZXNvbHV0aW9uIGZ1cnRoZXIpLCBpdCBpcyBwb3NzaWJsZSB0byBwYXVzZS9kZWZlciByZXNvbHV0aW9uIG9mXG4gKiB0aGUgcHJvbWlzZXMgYXQgYW55IHBvaW50IGluIHRoZSBjaGFpbi4gVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSB0byBpbXBsZW1lbnQgcG93ZXJmdWwgQVBJcyBsaWtlXG4gKiAkaHR0cCdzIHJlc3BvbnNlIGludGVyY2VwdG9ycy5cbiAqXG4gKlxuICogIyMgRGlmZmVyZW5jZXMgYmV0d2VlbiBLcmlzIEtvd2FsJ3MgUSBhbmQgJHFcbiAqXG4gKiAgVGhlcmUgYXJlIHR3byBtYWluIGRpZmZlcmVuY2VzOlxuICpcbiAqIC0gJHEgaXMgaW50ZWdyYXRlZCB3aXRoIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZX0gU2NvcGUgbW9kZWwgb2JzZXJ2YXRpb25cbiAqICAgbWVjaGFuaXNtIGluIEFuZ3VsYXJKUywgd2hpY2ggbWVhbnMgZmFzdGVyIHByb3BhZ2F0aW9uIG9mIHJlc29sdXRpb24gb3IgcmVqZWN0aW9uIGludG8geW91clxuICogICBtb2RlbHMgYW5kIGF2b2lkaW5nIHVubmVjZXNzYXJ5IGJyb3dzZXIgcmVwYWludHMsIHdoaWNoIHdvdWxkIHJlc3VsdCBpbiBmbGlja2VyaW5nIFVJLlxuICogLSBRIGhhcyBtYW55IG1vcmUgZmVhdHVyZXMgdGhhbiAkcSwgYnV0IHRoYXQgY29tZXMgYXQgYSBjb3N0IG9mIGJ5dGVzLiAkcSBpcyB0aW55LCBidXQgY29udGFpbnNcbiAqICAgYWxsIHRoZSBpbXBvcnRhbnQgZnVuY3Rpb25hbGl0eSBuZWVkZWQgZm9yIGNvbW1vbiBhc3luYyB0YXNrcy5cbiAqXG4gKiAjIyBUZXN0aW5nXG4gKlxuICogIGBgYGpzXG4gKiAgICBpdCgnc2hvdWxkIHNpbXVsYXRlIHByb21pc2UnLCBpbmplY3QoZnVuY3Rpb24oJHEsICRyb290U2NvcGUpIHtcbiAqICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAqICAgICAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuICogICAgICB2YXIgcmVzb2x2ZWRWYWx1ZTtcbiAqXG4gKiAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkgeyByZXNvbHZlZFZhbHVlID0gdmFsdWU7IH0pO1xuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xuICpcbiAqICAgICAgLy8gU2ltdWxhdGUgcmVzb2x2aW5nIG9mIHByb21pc2VcbiAqICAgICAgZGVmZXJyZWQucmVzb2x2ZSgxMjMpO1xuICogICAgICAvLyBOb3RlIHRoYXQgdGhlICd0aGVuJyBmdW5jdGlvbiBkb2VzIG5vdCBnZXQgY2FsbGVkIHN5bmNocm9ub3VzbHkuXG4gKiAgICAgIC8vIFRoaXMgaXMgYmVjYXVzZSB3ZSB3YW50IHRoZSBwcm9taXNlIEFQSSB0byBhbHdheXMgYmUgYXN5bmMsIHdoZXRoZXIgb3Igbm90XG4gKiAgICAgIC8vIGl0IGdvdCBjYWxsZWQgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25vdXNseS5cbiAqICAgICAgZXhwZWN0KHJlc29sdmVkVmFsdWUpLnRvQmVVbmRlZmluZWQoKTtcbiAqXG4gKiAgICAgIC8vIFByb3BhZ2F0ZSBwcm9taXNlIHJlc29sdXRpb24gdG8gJ3RoZW4nIGZ1bmN0aW9ucyB1c2luZyAkYXBwbHkoKS5cbiAqICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAqICAgICAgZXhwZWN0KHJlc29sdmVkVmFsdWUpLnRvRXF1YWwoMTIzKTtcbiAqICAgIH0pKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uLCBmdW5jdGlvbil9IHJlc29sdmVyIEZ1bmN0aW9uIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciByZXNvbHZpbmcgb3JcbiAqICAgcmVqZWN0aW5nIHRoZSBuZXdseSBjcmVhdGVkIHByb21pc2UuIFRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB3aGljaCByZXNvbHZlcyB0aGVcbiAqICAgcHJvbWlzZSwgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB3aGljaCByZWplY3RzIHRoZSBwcm9taXNlLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgbmV3bHkgY3JlYXRlZCBwcm9taXNlLlxuICovXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHFQcm92aWRlclxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqL1xuZnVuY3Rpb24gJFFQcm92aWRlcigpIHtcbiAgdmFyIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gdHJ1ZTtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcbiAgICByZXR1cm4gcUZhY3RvcnkoZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XG4gICAgfSwgJGV4Y2VwdGlvbkhhbmRsZXIsIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKTtcbiAgfV07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHFQcm92aWRlciNlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9uc1xuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB3aGV0aGVyIHRvIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYSByZWplY3RlZCBwcm9taXNlIGlzIG5vdCBoYW5kbGVkLlxuICAgKiBUaGlzIGZlYXR1cmUgaXMgZW5hYmxlZCBieSBkZWZhdWx0LlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBXaGV0aGVyIHRvIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYSByZWplY3RlZCBwcm9taXNlIGlzIG5vdCBoYW5kbGVkLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxuZy4kcVByb3ZpZGVyfSBDdXJyZW50IHZhbHVlIHdoZW4gY2FsbGVkIHdpdGhvdXQgYSBuZXcgdmFsdWUgb3Igc2VsZiBmb3JcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxuICAgKi9cbiAgdGhpcy5lcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJFFQcm92aWRlcigpIHtcbiAgdmFyIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gdHJ1ZTtcbiAgdGhpcy4kZ2V0ID0gWyckYnJvd3NlcicsICckZXhjZXB0aW9uSGFuZGxlcicsIGZ1bmN0aW9uKCRicm93c2VyLCAkZXhjZXB0aW9uSGFuZGxlcikge1xuICAgIHJldHVybiBxRmFjdG9yeShmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgJGJyb3dzZXIuZGVmZXIoY2FsbGJhY2spO1xuICAgIH0sICRleGNlcHRpb25IYW5kbGVyLCBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyk7XG4gIH1dO1xuXG4gIHRoaXMuZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucztcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIHByb21pc2UgbWFuYWdlci5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uKX0gbmV4dFRpY2sgRnVuY3Rpb24gZm9yIGV4ZWN1dGluZyBmdW5jdGlvbnMgaW4gdGhlIG5leHQgdHVybi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uKil9IGV4Y2VwdGlvbkhhbmRsZXIgRnVuY3Rpb24gaW50byB3aGljaCB1bmV4cGVjdGVkIGV4Y2VwdGlvbnMgYXJlIHBhc3NlZCBmb3JcbiAqICAgICBkZWJ1Z2dpbmcgcHVycG9zZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyBXaGV0aGVyIGFuIGVycm9yIHNob3VsZCBiZSBnZW5lcmF0ZWQgb24gdW5oYW5kbGVkXG4gKiAgICAgcHJvbWlzZXMgcmVqZWN0aW9ucy5cbiAqIEByZXR1cm5zIHtvYmplY3R9IFByb21pc2UgbWFuYWdlci5cbiAqL1xuZnVuY3Rpb24gcUZhY3RvcnkobmV4dFRpY2ssIGV4Y2VwdGlvbkhhbmRsZXIsIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKSB7XG4gIHZhciAkcU1pbkVyciA9IG1pbkVycignJHEnLCBUeXBlRXJyb3IpO1xuICB2YXIgcXVldWVTaXplID0gMDtcbiAgdmFyIGNoZWNrUXVldWUgPSBbXTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZy4kcSNkZWZlclxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIGBEZWZlcnJlZGAgb2JqZWN0IHdoaWNoIHJlcHJlc2VudHMgYSB0YXNrIHdoaWNoIHdpbGwgZmluaXNoIGluIHRoZSBmdXR1cmUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtEZWZlcnJlZH0gUmV0dXJucyBhIG5ldyBpbnN0YW5jZSBvZiBkZWZlcnJlZC5cbiAgICovXG4gIGZ1bmN0aW9uIGRlZmVyKCkge1xuICAgIHJldHVybiBuZXcgRGVmZXJyZWQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIERlZmVycmVkKCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKTtcbiAgICAvL05vbiBwcm90b3R5cGUgbWV0aG9kcyBuZWNlc3NhcnkgdG8gc3VwcG9ydCB1bmJvdW5kIGV4ZWN1dGlvbiA6L1xuICAgIHRoaXMucmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbCkgeyByZXNvbHZlUHJvbWlzZShwcm9taXNlLCB2YWwpOyB9O1xuICAgIHRoaXMucmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7IHJlamVjdFByb21pc2UocHJvbWlzZSwgcmVhc29uKTsgfTtcbiAgICB0aGlzLm5vdGlmeSA9IGZ1bmN0aW9uKHByb2dyZXNzKSB7IG5vdGlmeVByb21pc2UocHJvbWlzZSwgcHJvZ3Jlc3MpOyB9O1xuICB9XG5cblxuICBmdW5jdGlvbiBQcm9taXNlKCkge1xuICAgIHRoaXMuJCRzdGF0ZSA9IHsgc3RhdHVzOiAwIH07XG4gIH1cblxuICBleHRlbmQoUHJvbWlzZS5wcm90b3R5cGUsIHtcbiAgICB0aGVuOiBmdW5jdGlvbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcHJvZ3Jlc3NCYWNrKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQob25GdWxmaWxsZWQpICYmIGlzVW5kZWZpbmVkKG9uUmVqZWN0ZWQpICYmIGlzVW5kZWZpbmVkKHByb2dyZXNzQmFjaykpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IFByb21pc2UoKTtcblxuICAgICAgdGhpcy4kJHN0YXRlLnBlbmRpbmcgPSB0aGlzLiQkc3RhdGUucGVuZGluZyB8fCBbXTtcbiAgICAgIHRoaXMuJCRzdGF0ZS5wZW5kaW5nLnB1c2goW3Jlc3VsdCwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb2dyZXNzQmFja10pO1xuICAgICAgaWYgKHRoaXMuJCRzdGF0ZS5zdGF0dXMgPiAwKSBzY2hlZHVsZVByb2Nlc3NRdWV1ZSh0aGlzLiQkc3RhdGUpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICAnY2F0Y2gnOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBjYWxsYmFjayk7XG4gICAgfSxcblxuICAgICdmaW5hbGx5JzogZnVuY3Rpb24oY2FsbGJhY2ssIHByb2dyZXNzQmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gaGFuZGxlQ2FsbGJhY2sodmFsdWUsIHJlc29sdmUsIGNhbGxiYWNrKTtcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDYWxsYmFjayhlcnJvciwgcmVqZWN0LCBjYWxsYmFjayk7XG4gICAgICB9LCBwcm9ncmVzc0JhY2spO1xuICAgIH1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKHN0YXRlKSB7XG4gICAgdmFyIGZuLCBwcm9taXNlLCBwZW5kaW5nO1xuXG4gICAgcGVuZGluZyA9IHN0YXRlLnBlbmRpbmc7XG4gICAgc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCA9IGZhbHNlO1xuICAgIHN0YXRlLnBlbmRpbmcgPSB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBlbmRpbmcubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZChzdGF0ZSk7XG4gICAgICAgIHByb21pc2UgPSBwZW5kaW5nW2ldWzBdO1xuICAgICAgICBmbiA9IHBlbmRpbmdbaV1bc3RhdGUuc3RhdHVzXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIGZuKHN0YXRlLnZhbHVlKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5zdGF0dXMgPT09IDEpIHtcbiAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHN0YXRlLnZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0UHJvbWlzZShwcm9taXNlLCBzdGF0ZS52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmVqZWN0UHJvbWlzZShwcm9taXNlLCBlKTtcbiAgICAgICAgICAvLyBUaGlzIGVycm9yIGlzIGV4cGxpY2l0bHkgbWFya2VkIGZvciBiZWluZyBwYXNzZWQgdG8gdGhlICRleGNlcHRpb25IYW5kbGVyXG4gICAgICAgICAgaWYgKGUgJiYgZS4kJHBhc3NUb0V4Y2VwdGlvbkhhbmRsZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC0tcXVldWVTaXplO1xuICAgICAgaWYgKGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zICYmIHF1ZXVlU2l6ZSA9PT0gMCkge1xuICAgICAgICBuZXh0VGljayhwcm9jZXNzQ2hlY2tzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzQ2hlY2tzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bm1vZGlmaWVkLWxvb3AtY29uZGl0aW9uXG4gICAgd2hpbGUgKCFxdWV1ZVNpemUgJiYgY2hlY2tRdWV1ZS5sZW5ndGgpIHtcbiAgICAgIHZhciB0b0NoZWNrID0gY2hlY2tRdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKCFpc1N0YXRlRXhjZXB0aW9uSGFuZGxlZCh0b0NoZWNrKSkge1xuICAgICAgICBtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZCh0b0NoZWNrKTtcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9ICdQb3NzaWJseSB1bmhhbmRsZWQgcmVqZWN0aW9uOiAnICsgdG9EZWJ1Z1N0cmluZyh0b0NoZWNrLnZhbHVlKTtcbiAgICAgICAgaWYgKGlzRXJyb3IodG9DaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICBleGNlcHRpb25IYW5kbGVyKHRvQ2hlY2sudmFsdWUsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGVQcm9jZXNzUXVldWUoc3RhdGUpIHtcbiAgICBpZiAoZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgJiYgIXN0YXRlLnBlbmRpbmcgJiYgc3RhdGUuc3RhdHVzID09PSAyICYmICFpc1N0YXRlRXhjZXB0aW9uSGFuZGxlZChzdGF0ZSkpIHtcbiAgICAgIGlmIChxdWV1ZVNpemUgPT09IDAgJiYgY2hlY2tRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV4dFRpY2socHJvY2Vzc0NoZWNrcyk7XG4gICAgICB9XG4gICAgICBjaGVja1F1ZXVlLnB1c2goc3RhdGUpO1xuICAgIH1cbiAgICBpZiAoc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCB8fCAhc3RhdGUucGVuZGluZykgcmV0dXJuO1xuICAgIHN0YXRlLnByb2Nlc3NTY2hlZHVsZWQgPSB0cnVlO1xuICAgICsrcXVldWVTaXplO1xuICAgIG5leHRUaWNrKGZ1bmN0aW9uKCkgeyBwcm9jZXNzUXVldWUoc3RhdGUpOyB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHZhbCkge1xuICAgIGlmIChwcm9taXNlLiQkc3RhdGUuc3RhdHVzKSByZXR1cm47XG4gICAgaWYgKHZhbCA9PT0gcHJvbWlzZSkge1xuICAgICAgJCRyZWplY3QocHJvbWlzZSwgJHFNaW5FcnIoXG4gICAgICAgICdxY3ljbGUnLFxuICAgICAgICAnRXhwZWN0ZWQgcHJvbWlzZSB0byBiZSByZXNvbHZlZCB3aXRoIHZhbHVlIG90aGVyIHRoYW4gaXRzZWxmIFxcJ3swfVxcJycsXG4gICAgICAgIHZhbCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkJHJlc29sdmUocHJvbWlzZSwgdmFsKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uICQkcmVzb2x2ZShwcm9taXNlLCB2YWwpIHtcbiAgICB2YXIgdGhlbjtcbiAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaXNPYmplY3QodmFsKSB8fCBpc0Z1bmN0aW9uKHZhbCkpIHRoZW4gPSB2YWwudGhlbjtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKHRoZW4pKSB7XG4gICAgICAgIHByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAtMTtcbiAgICAgICAgdGhlbi5jYWxsKHZhbCwgZG9SZXNvbHZlLCBkb1JlamVjdCwgZG9Ob3RpZnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZS4kJHN0YXRlLnZhbHVlID0gdmFsO1xuICAgICAgICBwcm9taXNlLiQkc3RhdGUuc3RhdHVzID0gMTtcbiAgICAgICAgc2NoZWR1bGVQcm9jZXNzUXVldWUocHJvbWlzZS4kJHN0YXRlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkb1JlamVjdChlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkb1Jlc29sdmUodmFsKSB7XG4gICAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAkJHJlc29sdmUocHJvbWlzZSwgdmFsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZG9SZWplY3QodmFsKSB7XG4gICAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAkJHJlamVjdChwcm9taXNlLCB2YWwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkb05vdGlmeShwcm9ncmVzcykge1xuICAgICAgbm90aWZ5UHJvbWlzZShwcm9taXNlLCBwcm9ncmVzcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShwcm9taXNlLCByZWFzb24pIHtcbiAgICBpZiAocHJvbWlzZS4kJHN0YXRlLnN0YXR1cykgcmV0dXJuO1xuICAgICQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIH1cblxuICBmdW5jdGlvbiAkJHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgICBwcm9taXNlLiQkc3RhdGUudmFsdWUgPSByZWFzb247XG4gICAgcHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA9IDI7XG4gICAgc2NoZWR1bGVQcm9jZXNzUXVldWUocHJvbWlzZS4kJHN0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeVByb21pc2UocHJvbWlzZSwgcHJvZ3Jlc3MpIHtcbiAgICB2YXIgY2FsbGJhY2tzID0gcHJvbWlzZS4kJHN0YXRlLnBlbmRpbmc7XG5cbiAgICBpZiAoKHByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPD0gMCkgJiYgY2FsbGJhY2tzICYmIGNhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2FsbGJhY2ssIHJlc3VsdDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY2FsbGJhY2tzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICByZXN1bHQgPSBjYWxsYmFja3NbaV1bMF07XG4gICAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV1bM107XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5vdGlmeVByb21pc2UocmVzdWx0LCBpc0Z1bmN0aW9uKGNhbGxiYWNrKSA/IGNhbGxiYWNrKHByb2dyZXNzKSA6IHByb2dyZXNzKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHEjcmVqZWN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIGFzIHJlamVjdGVkIHdpdGggdGhlIHNwZWNpZmllZCBgcmVhc29uYC4gVGhpcyBhcGkgc2hvdWxkIGJlXG4gICAqIHVzZWQgdG8gZm9yd2FyZCByZWplY3Rpb24gaW4gYSBjaGFpbiBvZiBwcm9taXNlcy4gSWYgeW91IGFyZSBkZWFsaW5nIHdpdGggdGhlIGxhc3QgcHJvbWlzZSBpblxuICAgKiBhIHByb21pc2UgY2hhaW4sIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IGl0LlxuICAgKlxuICAgKiBXaGVuIGNvbXBhcmluZyBkZWZlcnJlZHMvcHJvbWlzZXMgdG8gdGhlIGZhbWlsaWFyIGJlaGF2aW9yIG9mIHRyeS9jYXRjaC90aHJvdywgdGhpbmsgb2ZcbiAgICogYHJlamVjdGAgYXMgdGhlIGB0aHJvd2Aga2V5d29yZCBpbiBKYXZhU2NyaXB0LiBUaGlzIGFsc28gbWVhbnMgdGhhdCBpZiB5b3UgXCJjYXRjaFwiIGFuIGVycm9yIHZpYVxuICAgKiBhIHByb21pc2UgZXJyb3IgY2FsbGJhY2sgYW5kIHlvdSB3YW50IHRvIGZvcndhcmQgdGhlIGVycm9yIHRvIHRoZSBwcm9taXNlIGRlcml2ZWQgZnJvbSB0aGVcbiAgICogY3VycmVudCBwcm9taXNlLCB5b3UgaGF2ZSB0byBcInJldGhyb3dcIiB0aGUgZXJyb3IgYnkgcmV0dXJuaW5nIGEgcmVqZWN0aW9uIGNvbnN0cnVjdGVkIHZpYVxuICAgKiBgcmVqZWN0YC5cbiAgICpcbiAgICogYGBganNcbiAgICogICBwcm9taXNlQiA9IHByb21pc2VBLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAqICAgICAvLyBzdWNjZXNzOiBkbyBzb21ldGhpbmcgYW5kIHJlc29sdmUgcHJvbWlzZUJcbiAgICogICAgIC8vICAgICAgICAgIHdpdGggdGhlIG9sZCBvciBhIG5ldyByZXN1bHRcbiAgICogICAgIHJldHVybiByZXN1bHQ7XG4gICAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAqICAgICAvLyBlcnJvcjogaGFuZGxlIHRoZSBlcnJvciBpZiBwb3NzaWJsZSBhbmRcbiAgICogICAgIC8vICAgICAgICByZXNvbHZlIHByb21pc2VCIHdpdGggbmV3UHJvbWlzZU9yVmFsdWUsXG4gICAqICAgICAvLyAgICAgICAgb3RoZXJ3aXNlIGZvcndhcmQgdGhlIHJlamVjdGlvbiB0byBwcm9taXNlQlxuICAgKiAgICAgaWYgKGNhbkhhbmRsZShyZWFzb24pKSB7XG4gICAqICAgICAgLy8gaGFuZGxlIHRoZSBlcnJvciBhbmQgcmVjb3ZlclxuICAgKiAgICAgIHJldHVybiBuZXdQcm9taXNlT3JWYWx1ZTtcbiAgICogICAgIH1cbiAgICogICAgIHJldHVybiAkcS5yZWplY3QocmVhc29uKTtcbiAgICogICB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gcmVhc29uIENvbnN0YW50LCBtZXNzYWdlLCBleGNlcHRpb24gb3IgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmVqZWN0aW9uIHJlYXNvbi5cbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2FzIGFscmVhZHkgcmVzb2x2ZWQgYXMgcmVqZWN0ZWQgd2l0aCB0aGUgYHJlYXNvbmAuXG4gICAqL1xuICBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBQcm9taXNlKCk7XG4gICAgcmVqZWN0UHJvbWlzZShyZXN1bHQsIHJlYXNvbik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNhbGxiYWNrKHZhbHVlLCByZXNvbHZlciwgY2FsbGJhY2spIHtcbiAgICB2YXIgY2FsbGJhY2tPdXRwdXQgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIGNhbGxiYWNrT3V0cHV0ID0gY2FsbGJhY2soKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KGUpO1xuICAgIH1cbiAgICBpZiAoaXNQcm9taXNlTGlrZShjYWxsYmFja091dHB1dCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFja091dHB1dC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZXIodmFsdWUpO1xuICAgICAgfSwgcmVqZWN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc29sdmVyKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSN3aGVuXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBXcmFwcyBhbiBvYmplY3QgdGhhdCBtaWdodCBiZSBhIHZhbHVlIG9yIGEgKDNyZCBwYXJ0eSkgdGhlbi1hYmxlIHByb21pc2UgaW50byBhICRxIHByb21pc2UuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IGFyZSBkZWFsaW5nIHdpdGggYW4gb2JqZWN0IHRoYXQgbWlnaHQgb3IgbWlnaHQgbm90IGJlIGEgcHJvbWlzZSwgb3IgaWZcbiAgICogdGhlIHByb21pc2UgY29tZXMgZnJvbSBhIHNvdXJjZSB0aGF0IGNhbid0IGJlIHRydXN0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgb3IgYSBwcm9taXNlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBzdWNjZXNzQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IGVycm9yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IHByb2dyZXNzQ2FsbGJhY2tcbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIG9mIHRoZSBwYXNzZWQgdmFsdWUgb3IgcHJvbWlzZVxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIHdoZW4odmFsdWUsIGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFByb21pc2UoKTtcbiAgICByZXNvbHZlUHJvbWlzZShyZXN1bHQsIHZhbHVlKTtcbiAgICByZXR1cm4gcmVzdWx0LnRoZW4oY2FsbGJhY2ssIGVycmJhY2ssIHByb2dyZXNzQmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSNyZXNvbHZlXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBBbGlhcyBvZiB7QGxpbmsgbmcuJHEjd2hlbiB3aGVufSB0byBtYWludGFpbiBuYW1pbmcgY29uc2lzdGVuY3kgd2l0aCBFUzYuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgb3IgYSBwcm9taXNlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBzdWNjZXNzQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IGVycm9yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IHByb2dyZXNzQ2FsbGJhY2tcbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIG9mIHRoZSBwYXNzZWQgdmFsdWUgb3IgcHJvbWlzZVxuICAgKi9cbiAgdmFyIHJlc29sdmUgPSB3aGVuO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxI2FsbFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ29tYmluZXMgbXVsdGlwbGUgcHJvbWlzZXMgaW50byBhIHNpbmdsZSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBhbGwgb2YgdGhlIGlucHV0XG4gICAqIHByb21pc2VzIGFyZSByZXNvbHZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheS48UHJvbWlzZT58T2JqZWN0LjxQcm9taXNlPn0gcHJvbWlzZXMgQW4gYXJyYXkgb3IgaGFzaCBvZiBwcm9taXNlcy5cbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBzaW5nbGUgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCBhbiBhcnJheS9oYXNoIG9mIHZhbHVlcyxcbiAgICogICBlYWNoIHZhbHVlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb21pc2UgYXQgdGhlIHNhbWUgaW5kZXgva2V5IGluIHRoZSBgcHJvbWlzZXNgIGFycmF5L2hhc2guXG4gICAqICAgSWYgYW55IG9mIHRoZSBwcm9taXNlcyBpcyByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLCB0aGlzIHJlc3VsdGluZyBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWRcbiAgICogICB3aXRoIHRoZSBzYW1lIHJlamVjdGlvbiB2YWx1ZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBQcm9taXNlKCksXG4gICAgICAgIGNvdW50ZXIgPSAwLFxuICAgICAgICByZXN1bHRzID0gaXNBcnJheShwcm9taXNlcykgPyBbXSA6IHt9O1xuXG4gICAgZm9yRWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSwga2V5KSB7XG4gICAgICBjb3VudGVyKys7XG4gICAgICB3aGVuKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmVzdWx0c1trZXldID0gdmFsdWU7XG4gICAgICAgIGlmICghKC0tY291bnRlcikpIHJlc29sdmVQcm9taXNlKHJlc3VsdCwgcmVzdWx0cyk7XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgcmVqZWN0UHJvbWlzZShyZXN1bHQsIHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmIChjb3VudGVyID09PSAwKSB7XG4gICAgICByZXNvbHZlUHJvbWlzZShyZXN1bHQsIHJlc3VsdHMpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSNyYWNlXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9yIHJlamVjdHMgYXMgc29vbiBhcyBvbmUgb2YgdGhvc2UgcHJvbWlzZXNcbiAgICogcmVzb2x2ZXMgb3IgcmVqZWN0cywgd2l0aCB0aGUgdmFsdWUgb3IgcmVhc29uIGZyb20gdGhhdCBwcm9taXNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LjxQcm9taXNlPnxPYmplY3QuPFByb21pc2U+fSBwcm9taXNlcyBBbiBhcnJheSBvciBoYXNoIG9mIHByb21pc2VzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb3IgcmVqZWN0cyBhcyBzb29uIGFzIG9uZSBvZiB0aGUgYHByb21pc2VzYFxuICAgKiByZXNvbHZlcyBvciByZWplY3RzLCB3aXRoIHRoZSB2YWx1ZSBvciByZWFzb24gZnJvbSB0aGF0IHByb21pc2UuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJhY2UocHJvbWlzZXMpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuXG4gICAgZm9yRWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgd2hlbihwcm9taXNlKS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uICRRKHJlc29sdmVyKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKHJlc29sdmVyKSkge1xuICAgICAgdGhyb3cgJHFNaW5FcnIoJ25vcnNsdnInLCAnRXhwZWN0ZWQgcmVzb2x2ZXJGbiwgZ290IFxcJ3swfVxcJycsIHJlc29sdmVyKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKCk7XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlRm4odmFsdWUpIHtcbiAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWplY3RGbihyZWFzb24pIHtcbiAgICAgIHJlamVjdFByb21pc2UocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9XG5cbiAgICByZXNvbHZlcihyZXNvbHZlRm4sIHJlamVjdEZuKTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgLy8gTGV0J3MgbWFrZSB0aGUgaW5zdGFuY2VvZiBvcGVyYXRvciB3b3JrIGZvciBwcm9taXNlcywgc28gdGhhdFxuICAvLyBgbmV3ICRxKGZuKSBpbnN0YW5jZW9mICRxYCB3b3VsZCBldmFsdWF0ZSB0byB0cnVlLlxuICAkUS5wcm90b3R5cGUgPSBQcm9taXNlLnByb3RvdHlwZTtcblxuICAkUS5kZWZlciA9IGRlZmVyO1xuICAkUS5yZWplY3QgPSByZWplY3Q7XG4gICRRLndoZW4gPSB3aGVuO1xuICAkUS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgJFEuYWxsID0gYWxsO1xuICAkUS5yYWNlID0gcmFjZTtcblxuICByZXR1cm4gJFE7XG59XG5cbmZ1bmN0aW9uIGlzU3RhdGVFeGNlcHRpb25IYW5kbGVkKHN0YXRlKSB7XG4gIHJldHVybiAhIXN0YXRlLnB1cjtcbn1cbmZ1bmN0aW9uIG1hcmtRU3RhdGVFeGNlcHRpb25IYW5kbGVkKHN0YXRlKSB7XG4gIHN0YXRlLnB1ciA9IHRydWU7XG59XG5mdW5jdGlvbiBtYXJrUUV4Y2VwdGlvbkhhbmRsZWQocSkge1xuICBtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZChxLiQkc3RhdGUpO1xufVxuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICQkUkFGUHJvdmlkZXIoKSB7IC8vckFGXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckdGltZW91dCcsIGZ1bmN0aW9uKCR3aW5kb3csICR0aW1lb3V0KSB7XG4gICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXG4gICAgdmFyIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuICAgIHZhciByYWZTdXBwb3J0ZWQgPSAhIXJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICB2YXIgcmFmID0gcmFmU3VwcG9ydGVkXG4gICAgICA/IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgdmFyIGlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZuKTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgOiBmdW5jdGlvbihmbikge1xuICAgICAgICAgIHZhciB0aW1lciA9ICR0aW1lb3V0KGZuLCAxNi42NiwgZmFsc2UpOyAvLyAxMDAwIC8gNjAgPSAxNi42NjZcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICByYWYuc3VwcG9ydGVkID0gcmFmU3VwcG9ydGVkO1xuXG4gICAgcmV0dXJuIHJhZjtcbiAgfV07XG59XG5cbi8qKlxuICogREVTSUdOIE5PVEVTXG4gKlxuICogVGhlIGRlc2lnbiBkZWNpc2lvbnMgYmVoaW5kIHRoZSBzY29wZSBhcmUgaGVhdmlseSBmYXZvcmVkIGZvciBzcGVlZCBhbmQgbWVtb3J5IGNvbnN1bXB0aW9uLlxuICpcbiAqIFRoZSB0eXBpY2FsIHVzZSBvZiBzY29wZSBpcyB0byB3YXRjaCB0aGUgZXhwcmVzc2lvbnMsIHdoaWNoIG1vc3Qgb2YgdGhlIHRpbWUgcmV0dXJuIHRoZSBzYW1lXG4gKiB2YWx1ZSBhcyBsYXN0IHRpbWUgc28gd2Ugb3B0aW1pemUgdGhlIG9wZXJhdGlvbi5cbiAqXG4gKiBDbG9zdXJlcyBjb25zdHJ1Y3Rpb24gaXMgZXhwZW5zaXZlIGluIHRlcm1zIG9mIHNwZWVkIGFzIHdlbGwgYXMgbWVtb3J5OlxuICogICAtIE5vIGNsb3N1cmVzLCBpbnN0ZWFkIHVzZSBwcm90b3R5cGljYWwgaW5oZXJpdGFuY2UgZm9yIEFQSVxuICogICAtIEludGVybmFsIHN0YXRlIG5lZWRzIHRvIGJlIHN0b3JlZCBvbiBzY29wZSBkaXJlY3RseSwgd2hpY2ggbWVhbnMgdGhhdCBwcml2YXRlIHN0YXRlIGlzXG4gKiAgICAgZXhwb3NlZCBhcyAkJF9fX18gcHJvcGVydGllc1xuICpcbiAqIExvb3Agb3BlcmF0aW9ucyBhcmUgb3B0aW1pemVkIGJ5IHVzaW5nIHdoaWxlKGNvdW50LS0pIHsgLi4uIH1cbiAqICAgLSBUaGlzIG1lYW5zIHRoYXQgaW4gb3JkZXIgdG8ga2VlcCB0aGUgc2FtZSBvcmRlciBvZiBleGVjdXRpb24gYXMgYWRkaXRpb24gd2UgaGF2ZSB0byBhZGRcbiAqICAgICBpdGVtcyB0byB0aGUgYXJyYXkgYXQgdGhlIGJlZ2lubmluZyAodW5zaGlmdCkgaW5zdGVhZCBvZiBhdCB0aGUgZW5kIChwdXNoKVxuICpcbiAqIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCBhbmQgcmVtb3ZlZCBvZnRlblxuICogICAtIFVzaW5nIGFuIGFycmF5IHdvdWxkIGJlIHNsb3cgc2luY2UgaW5zZXJ0cyBpbiB0aGUgbWlkZGxlIGFyZSBleHBlbnNpdmU7IHNvIHdlIHVzZSBsaW5rZWQgbGlzdHNcbiAqXG4gKiBUaGVyZSBhcmUgZmV3ZXIgd2F0Y2hlcyB0aGFuIG9ic2VydmVycy4gVGhpcyBpcyB3aHkgeW91IGRvbid0IHdhbnQgdGhlIG9ic2VydmVyIHRvIGJlIGltcGxlbWVudGVkXG4gKiBpbiB0aGUgc2FtZSB3YXkgYXMgd2F0Y2guIFdhdGNoIHJlcXVpcmVzIHJldHVybiBvZiB0aGUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gd2hpY2ggaXMgZXhwZW5zaXZlXG4gKiB0byBjb25zdHJ1Y3QuXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHJvb3RTY29wZVByb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBQcm92aWRlciBmb3IgdGhlICRyb290U2NvcGUgc2VydmljZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRyb290U2NvcGVQcm92aWRlciNkaWdlc3RUdGxcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFNldHMgdGhlIG51bWJlciBvZiBgJGRpZ2VzdGAgaXRlcmF0aW9ucyB0aGUgc2NvcGUgc2hvdWxkIGF0dGVtcHQgdG8gZXhlY3V0ZSBiZWZvcmUgZ2l2aW5nIHVwIGFuZFxuICogYXNzdW1pbmcgdGhhdCB0aGUgbW9kZWwgaXMgdW5zdGFibGUuXG4gKlxuICogVGhlIGN1cnJlbnQgZGVmYXVsdCBpcyAxMCBpdGVyYXRpb25zLlxuICpcbiAqIEluIGNvbXBsZXggYXBwbGljYXRpb25zIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgZGVwZW5kZW5jaWVzIGJldHdlZW4gYCR3YXRjaGBzIHdpbGwgcmVzdWx0IGluXG4gKiBzZXZlcmFsIGRpZ2VzdCBpdGVyYXRpb25zLiBIb3dldmVyIGlmIGFuIGFwcGxpY2F0aW9uIG5lZWRzIG1vcmUgdGhhbiB0aGUgZGVmYXVsdCAxMCBkaWdlc3RcbiAqIGl0ZXJhdGlvbnMgZm9yIGl0cyBtb2RlbCB0byBzdGFiaWxpemUgdGhlbiB5b3Ugc2hvdWxkIGludmVzdGlnYXRlIHdoYXQgaXMgY2F1c2luZyB0aGUgbW9kZWwgdG9cbiAqIGNvbnRpbnVvdXNseSBjaGFuZ2UgZHVyaW5nIHRoZSBkaWdlc3QuXG4gKlxuICogSW5jcmVhc2luZyB0aGUgVFRMIGNvdWxkIGhhdmUgcGVyZm9ybWFuY2UgaW1wbGljYXRpb25zLCBzbyB5b3Ugc2hvdWxkIG5vdCBjaGFuZ2UgaXQgd2l0aG91dFxuICogcHJvcGVyIGp1c3RpZmljYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IFRoZSBudW1iZXIgb2YgZGlnZXN0IGl0ZXJhdGlvbnMuXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkcm9vdFNjb3BlXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEV2ZXJ5IGFwcGxpY2F0aW9uIGhhcyBhIHNpbmdsZSByb290IHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIHNjb3BlfS5cbiAqIEFsbCBvdGhlciBzY29wZXMgYXJlIGRlc2NlbmRhbnQgc2NvcGVzIG9mIHRoZSByb290IHNjb3BlLiBTY29wZXMgcHJvdmlkZSBzZXBhcmF0aW9uXG4gKiBiZXR3ZWVuIHRoZSBtb2RlbCBhbmQgdGhlIHZpZXcsIHZpYSBhIG1lY2hhbmlzbSBmb3Igd2F0Y2hpbmcgdGhlIG1vZGVsIGZvciBjaGFuZ2VzLlxuICogVGhleSBhbHNvIHByb3ZpZGUgZXZlbnQgZW1pc3Npb24vYnJvYWRjYXN0IGFuZCBzdWJzY3JpcHRpb24gZmFjaWxpdHkuIFNlZSB0aGVcbiAqIHtAbGluayBndWlkZS9zY29wZSBkZXZlbG9wZXIgZ3VpZGUgb24gc2NvcGVzfS5cbiAqL1xuZnVuY3Rpb24gJFJvb3RTY29wZVByb3ZpZGVyKCkge1xuICB2YXIgVFRMID0gMTA7XG4gIHZhciAkcm9vdFNjb3BlTWluRXJyID0gbWluRXJyKCckcm9vdFNjb3BlJyk7XG4gIHZhciBsYXN0RGlydHlXYXRjaCA9IG51bGw7XG4gIHZhciBhcHBseUFzeW5jSWQgPSBudWxsO1xuXG4gIHRoaXMuZGlnZXN0VHRsID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgVFRMID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBUVEw7XG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlQ2hpbGRTY29wZUNsYXNzKHBhcmVudCkge1xuICAgIGZ1bmN0aW9uIENoaWxkU2NvcGUoKSB7XG4gICAgICB0aGlzLiQkd2F0Y2hlcnMgPSB0aGlzLiQkbmV4dFNpYmxpbmcgPVxuICAgICAgICAgIHRoaXMuJCRjaGlsZEhlYWQgPSB0aGlzLiQkY2hpbGRUYWlsID0gbnVsbDtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lckNvdW50ID0ge307XG4gICAgICB0aGlzLiQkd2F0Y2hlcnNDb3VudCA9IDA7XG4gICAgICB0aGlzLiRpZCA9IG5leHRVaWQoKTtcbiAgICAgIHRoaXMuJCRDaGlsZFNjb3BlID0gbnVsbDtcbiAgICAgIHRoaXMuJCRzdXNwZW5kZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgQ2hpbGRTY29wZS5wcm90b3R5cGUgPSBwYXJlbnQ7XG4gICAgcmV0dXJuIENoaWxkU2NvcGU7XG4gIH1cblxuICB0aGlzLiRnZXQgPSBbJyRleGNlcHRpb25IYW5kbGVyJywgJyRwYXJzZScsICckYnJvd3NlcicsXG4gICAgICBmdW5jdGlvbigkZXhjZXB0aW9uSGFuZGxlciwgJHBhcnNlLCAkYnJvd3Nlcikge1xuXG4gICAgZnVuY3Rpb24gZGVzdHJveUNoaWxkU2NvcGUoJGV2ZW50KSB7XG4gICAgICAgICRldmVudC5jdXJyZW50U2NvcGUuJCRkZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFuVXBTY29wZSgkc2NvcGUpIHtcblxuICAgICAgLy8gU3VwcG9ydDogSUUgOSBvbmx5XG4gICAgICBpZiAobXNpZSA9PT0gOSkge1xuICAgICAgICAvLyBUaGVyZSBpcyBhIG1lbW9yeSBsZWFrIGluIElFOSBpZiBhbGwgY2hpbGQgc2NvcGVzIGFyZSBub3QgZGlzY29ubmVjdGVkXG4gICAgICAgIC8vIGNvbXBsZXRlbHkgd2hlbiBhIHNjb3BlIGlzIGRlc3Ryb3llZC4gU28gdGhpcyBjb2RlIHdpbGwgcmVjdXJzZSB1cCB0aHJvdWdoXG4gICAgICAgIC8vIGFsbCB0aGlzIHNjb3BlcyBjaGlsZHJlblxuICAgICAgICAvL1xuICAgICAgICAvLyBTZWUgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTA3MDZcbiAgICAgICAgaWYgKCRzY29wZS4kJGNoaWxkSGVhZCkge1xuICAgICAgICAgIGNsZWFuVXBTY29wZSgkc2NvcGUuJCRjaGlsZEhlYWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkc2NvcGUuJCRuZXh0U2libGluZykge1xuICAgICAgICAgIGNsZWFuVXBTY29wZSgkc2NvcGUuJCRuZXh0U2libGluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvZGUgYmVsb3cgd29ya3MgYXJvdW5kIElFOSBhbmQgVjgncyBtZW1vcnkgbGVha3NcbiAgICAgIC8vXG4gICAgICAvLyBTZWU6XG4gICAgICAvLyAtIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMDczI2MyNlxuICAgICAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy82Nzk0I2lzc3VlY29tbWVudC0zODY0ODkwOVxuICAgICAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xMzEzI2lzc3VlY29tbWVudC0xMDM3ODQ1MVxuXG4gICAgICAkc2NvcGUuJHBhcmVudCA9ICRzY29wZS4kJG5leHRTaWJsaW5nID0gJHNjb3BlLiQkcHJldlNpYmxpbmcgPSAkc2NvcGUuJCRjaGlsZEhlYWQgPVxuICAgICAgICAgICRzY29wZS4kJGNoaWxkVGFpbCA9ICRzY29wZS4kcm9vdCA9ICRzY29wZS4kJHdhdGNoZXJzID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgdHlwZVxuICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGVcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEEgcm9vdCBzY29wZSBjYW4gYmUgcmV0cmlldmVkIHVzaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZSAkcm9vdFNjb3BlfSBrZXkgZnJvbSB0aGVcbiAgICAgKiB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gQ2hpbGQgc2NvcGVzIGFyZSBjcmVhdGVkIHVzaW5nIHRoZVxuICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRuZXcgJG5ldygpfSBtZXRob2QuIChNb3N0IHNjb3BlcyBhcmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW5cbiAgICAgKiBjb21waWxlZCBIVE1MIHRlbXBsYXRlIGlzIGV4ZWN1dGVkLikgU2VlIGFsc28gdGhlIHtAbGluayBndWlkZS9zY29wZSBTY29wZXMgZ3VpZGV9IGZvclxuICAgICAqIGFuIGluLWRlcHRoIGludHJvZHVjdGlvbiBhbmQgdXNhZ2UgZXhhbXBsZXMuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIEluaGVyaXRhbmNlXG4gICAgICogQSBzY29wZSBjYW4gaW5oZXJpdCBmcm9tIGEgcGFyZW50IHNjb3BlLCBhcyBpbiB0aGlzIGV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgICAgIHZhciBwYXJlbnQgPSAkcm9vdFNjb3BlO1xuICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50LiRuZXcoKTtcblxuICAgICAgICAgcGFyZW50LnNhbHV0YXRpb24gPSBcIkhlbGxvXCI7XG4gICAgICAgICBleHBlY3QoY2hpbGQuc2FsdXRhdGlvbikudG9FcXVhbCgnSGVsbG8nKTtcblxuICAgICAgICAgY2hpbGQuc2FsdXRhdGlvbiA9IFwiV2VsY29tZVwiO1xuICAgICAgICAgZXhwZWN0KGNoaWxkLnNhbHV0YXRpb24pLnRvRXF1YWwoJ1dlbGNvbWUnKTtcbiAgICAgICAgIGV4cGVjdChwYXJlbnQuc2FsdXRhdGlvbikudG9FcXVhbCgnSGVsbG8nKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFdoZW4gaW50ZXJhY3Rpbmcgd2l0aCBgU2NvcGVgIGluIHRlc3RzLCBhZGRpdGlvbmFsIGhlbHBlciBtZXRob2RzIGFyZSBhdmFpbGFibGUgb24gdGhlXG4gICAgICogaW5zdGFuY2VzIG9mIGBTY29wZWAgdHlwZS4gU2VlIHtAbGluayBuZ01vY2suJHJvb3RTY29wZS5TY29wZSBuZ01vY2sgU2NvcGV9IGZvciBhZGRpdGlvbmFsXG4gICAgICogZGV0YWlscy5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24oKT49fSBwcm92aWRlcnMgTWFwIG9mIHNlcnZpY2UgZmFjdG9yeSB3aGljaCBuZWVkIHRvIGJlXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZCBmb3IgdGhlIGN1cnJlbnQgc2NvcGUuIERlZmF1bHRzIHRvIHtAbGluayBuZ30uXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgKj49fSBpbnN0YW5jZUNhY2hlIFByb3ZpZGVzIHByZS1pbnN0YW50aWF0ZWQgc2VydmljZXMgd2hpY2ggc2hvdWxkXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQvb3ZlcnJpZGUgc2VydmljZXMgcHJvdmlkZWQgYnkgYHByb3ZpZGVyc2AuIFRoaXMgaXMgaGFuZHlcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gdW5pdC10ZXN0aW5nIGFuZCBoYXZpbmcgdGhlIG5lZWQgdG8gb3ZlcnJpZGUgYSBkZWZhdWx0XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IE5ld2x5IGNyZWF0ZWQgc2NvcGUuXG4gICAgICpcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTY29wZSgpIHtcbiAgICAgIHRoaXMuJGlkID0gbmV4dFVpZCgpO1xuICAgICAgdGhpcy4kJHBoYXNlID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kJHdhdGNoZXJzID1cbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuJCRuZXh0U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZyA9XG4gICAgICAgICAgICAgICAgICAgICB0aGlzLiQkY2hpbGRIZWFkID0gdGhpcy4kJGNoaWxkVGFpbCA9IG51bGw7XG4gICAgICB0aGlzLiRyb290ID0gdGhpcztcbiAgICAgIHRoaXMuJCRkZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuJCRzdXNwZW5kZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lckNvdW50ID0ge307XG4gICAgICB0aGlzLiQkd2F0Y2hlcnNDb3VudCA9IDA7XG4gICAgICB0aGlzLiQkaXNvbGF0ZUJpbmRpbmdzID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRpZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogVW5pcXVlIHNjb3BlIElEIChtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcpIHVzZWZ1bCBmb3IgZGVidWdnaW5nLlxuICAgICAqL1xuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkcGFyZW50XG4gICAgICAqXG4gICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBzY29wZS5cbiAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRyb290XG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHJvb3Qgc2NvcGUuXG4gICAgICAgKi9cblxuICAgIFNjb3BlLnByb3RvdHlwZSA9IHtcbiAgICAgIGNvbnN0cnVjdG9yOiBTY29wZSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkbmV3XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQ3JlYXRlcyBhIG5ldyBjaGlsZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0uXG4gICAgICAgKlxuICAgICAgICogVGhlIHBhcmVudCBzY29wZSB3aWxsIHByb3BhZ2F0ZSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IGV2ZW50LlxuICAgICAgICogVGhlIHNjb3BlIGNhbiBiZSByZW1vdmVkIGZyb20gdGhlIHNjb3BlIGhpZXJhcmNoeSB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveSAkZGVzdHJveSgpfS5cbiAgICAgICAqXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveSAkZGVzdHJveSgpfSBtdXN0IGJlIGNhbGxlZCBvbiBhIHNjb3BlIHdoZW4gaXQgaXNcbiAgICAgICAqIGRlc2lyZWQgZm9yIHRoZSBzY29wZSBhbmQgaXRzIGNoaWxkIHNjb3BlcyB0byBiZSBwZXJtYW5lbnRseSBkZXRhY2hlZCBmcm9tIHRoZSBwYXJlbnQgYW5kXG4gICAgICAgKiB0aHVzIHN0b3AgcGFydGljaXBhdGluZyBpbiBtb2RlbCBjaGFuZ2UgZGV0ZWN0aW9uIGFuZCBsaXN0ZW5lciBub3RpZmljYXRpb24gYnkgaW52b2tpbmcuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc29sYXRlIElmIHRydWUsIHRoZW4gdGhlIHNjb3BlIGRvZXMgbm90IHByb3RvdHlwaWNhbGx5IGluaGVyaXQgZnJvbSB0aGVcbiAgICAgICAqICAgICAgICAgcGFyZW50IHNjb3BlLiBUaGUgc2NvcGUgaXMgaXNvbGF0ZWQsIGFzIGl0IGNhbiBub3Qgc2VlIHBhcmVudCBzY29wZSBwcm9wZXJ0aWVzLlxuICAgICAgICogICAgICAgICBXaGVuIGNyZWF0aW5nIHdpZGdldHMsIGl0IGlzIHVzZWZ1bCBmb3IgdGhlIHdpZGdldCB0byBub3QgYWNjaWRlbnRhbGx5IHJlYWQgcGFyZW50XG4gICAgICAgKiAgICAgICAgIHN0YXRlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7U2NvcGV9IFtwYXJlbnQ9dGhpc10gVGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIGBTY29wZWB9IHRoYXQgd2lsbCBiZSB0aGUgYCRwYXJlbnRgXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIHRoZSBuZXdseSBjcmVhdGVkIHNjb3BlLiBEZWZhdWx0cyB0byBgdGhpc2Agc2NvcGUgaWYgbm90IHByb3ZpZGVkLlxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGlzIHVzZWQgd2hlbiBjcmVhdGluZyBhIHRyYW5zY2x1ZGUgc2NvcGUgdG8gY29ycmVjdGx5IHBsYWNlIGl0XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSBzY29wZSBoaWVyYXJjaHkgd2hpbGUgbWFpbnRhaW5pbmcgdGhlIGNvcnJlY3QgcHJvdG90eXBpY2FsXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhbmNlLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBuZXdseSBjcmVhdGVkIGNoaWxkIHNjb3BlLlxuICAgICAgICpcbiAgICAgICAqL1xuICAgICAgJG5ldzogZnVuY3Rpb24oaXNvbGF0ZSwgcGFyZW50KSB7XG4gICAgICAgIHZhciBjaGlsZDtcblxuICAgICAgICBwYXJlbnQgPSBwYXJlbnQgfHwgdGhpcztcblxuICAgICAgICBpZiAoaXNvbGF0ZSkge1xuICAgICAgICAgIGNoaWxkID0gbmV3IFNjb3BlKCk7XG4gICAgICAgICAgY2hpbGQuJHJvb3QgPSB0aGlzLiRyb290O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE9ubHkgY3JlYXRlIGEgY2hpbGQgc2NvcGUgY2xhc3MgaWYgc29tZWJvZHkgYXNrcyBmb3Igb25lLFxuICAgICAgICAgIC8vIGJ1dCBjYWNoZSBpdCB0byBhbGxvdyB0aGUgVk0gdG8gb3B0aW1pemUgbG9va3Vwcy5cbiAgICAgICAgICBpZiAoIXRoaXMuJCRDaGlsZFNjb3BlKSB7XG4gICAgICAgICAgICB0aGlzLiQkQ2hpbGRTY29wZSA9IGNyZWF0ZUNoaWxkU2NvcGVDbGFzcyh0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hpbGQgPSBuZXcgdGhpcy4kJENoaWxkU2NvcGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjaGlsZC4kcGFyZW50ID0gcGFyZW50O1xuICAgICAgICBjaGlsZC4kJHByZXZTaWJsaW5nID0gcGFyZW50LiQkY2hpbGRUYWlsO1xuICAgICAgICBpZiAocGFyZW50LiQkY2hpbGRIZWFkKSB7XG4gICAgICAgICAgcGFyZW50LiQkY2hpbGRUYWlsLiQkbmV4dFNpYmxpbmcgPSBjaGlsZDtcbiAgICAgICAgICBwYXJlbnQuJCRjaGlsZFRhaWwgPSBjaGlsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJlbnQuJCRjaGlsZEhlYWQgPSBwYXJlbnQuJCRjaGlsZFRhaWwgPSBjaGlsZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdGhlIG5ldyBzY29wZSBpcyBub3QgaXNvbGF0ZWQgb3Igd2UgaW5oZXJpdCBmcm9tIGB0aGlzYCwgYW5kXG4gICAgICAgIC8vIHRoZSBwYXJlbnQgc2NvcGUgaXMgZGVzdHJveWVkLCB0aGUgcHJvcGVydHkgYCQkZGVzdHJveWVkYCBpcyBpbmhlcml0ZWRcbiAgICAgICAgLy8gcHJvdG90eXBpY2FsbHkuIEluIGFsbCBvdGhlciBjYXNlcywgdGhpcyBwcm9wZXJ0eSBuZWVkcyB0byBiZSBzZXRcbiAgICAgICAgLy8gd2hlbiB0aGUgcGFyZW50IHNjb3BlIGlzIGRlc3Ryb3llZC5cbiAgICAgICAgLy8gVGhlIGxpc3RlbmVyIG5lZWRzIHRvIGJlIGFkZGVkIGFmdGVyIHRoZSBwYXJlbnQgaXMgc2V0XG4gICAgICAgIGlmIChpc29sYXRlIHx8IHBhcmVudCAhPT0gdGhpcykgY2hpbGQuJG9uKCckZGVzdHJveScsIGRlc3Ryb3lDaGlsZFNjb3BlKTtcblxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHdhdGNoXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmVnaXN0ZXJzIGEgYGxpc3RlbmVyYCBjYWxsYmFjayB0byBiZSBleGVjdXRlZCB3aGVuZXZlciB0aGUgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBgd2F0Y2hFeHByZXNzaW9uYCBpcyBjYWxsZWQgb24gZXZlcnkgY2FsbCB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0XG4gICAgICAgKiAgICRkaWdlc3QoKX0gYW5kIHNob3VsZCByZXR1cm4gdGhlIHZhbHVlIHRoYXQgd2lsbCBiZSB3YXRjaGVkLiAoYHdhdGNoRXhwcmVzc2lvbmAgc2hvdWxkIG5vdCBjaGFuZ2VcbiAgICAgICAqICAgaXRzIHZhbHVlIHdoZW4gZXhlY3V0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCB0aGUgc2FtZSBpbnB1dCBiZWNhdXNlIGl0IG1heSBiZSBleGVjdXRlZCBtdWx0aXBsZVxuICAgICAgICogICB0aW1lcyBieSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0uIFRoYXQgaXMsIGB3YXRjaEV4cHJlc3Npb25gIHNob3VsZCBiZVxuICAgICAgICogICBbaWRlbXBvdGVudF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JZGVtcG90ZW5jZSkuKVxuICAgICAgICogLSBUaGUgYGxpc3RlbmVyYCBpcyBjYWxsZWQgb25seSB3aGVuIHRoZSB2YWx1ZSBmcm9tIHRoZSBjdXJyZW50IGB3YXRjaEV4cHJlc3Npb25gIGFuZCB0aGVcbiAgICAgICAqICAgcHJldmlvdXMgY2FsbCB0byBgd2F0Y2hFeHByZXNzaW9uYCBhcmUgbm90IGVxdWFsICh3aXRoIHRoZSBleGNlcHRpb24gb2YgdGhlIGluaXRpYWwgcnVuLFxuICAgICAgICogICBzZWUgYmVsb3cpLiBJbmVxdWFsaXR5IGlzIGRldGVybWluZWQgYWNjb3JkaW5nIHRvIHJlZmVyZW5jZSBpbmVxdWFsaXR5LFxuICAgICAgICogICBbc3RyaWN0IGNvbXBhcmlzb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9Db21wYXJpc29uX09wZXJhdG9ycylcbiAgICAgICAqICAgIHZpYSB0aGUgYCE9PWAgSmF2YXNjcmlwdCBvcGVyYXRvciwgdW5sZXNzIGBvYmplY3RFcXVhbGl0eSA9PSB0cnVlYFxuICAgICAgICogICAoc2VlIG5leHQgcG9pbnQpXG4gICAgICAgKiAtIFdoZW4gYG9iamVjdEVxdWFsaXR5ID09IHRydWVgLCBpbmVxdWFsaXR5IG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uYCBpcyBkZXRlcm1pbmVkXG4gICAgICAgKiAgIGFjY29yZGluZyB0byB0aGUge0BsaW5rIGFuZ3VsYXIuZXF1YWxzfSBmdW5jdGlvbi4gVG8gc2F2ZSB0aGUgdmFsdWUgb2YgdGhlIG9iamVjdCBmb3JcbiAgICAgICAqICAgbGF0ZXIgY29tcGFyaXNvbiwgdGhlIHtAbGluayBhbmd1bGFyLmNvcHl9IGZ1bmN0aW9uIGlzIHVzZWQuIFRoaXMgdGhlcmVmb3JlIG1lYW5zIHRoYXRcbiAgICAgICAqICAgd2F0Y2hpbmcgY29tcGxleCBvYmplY3RzIHdpbGwgaGF2ZSBhZHZlcnNlIG1lbW9yeSBhbmQgcGVyZm9ybWFuY2UgaW1wbGljYXRpb25zLlxuICAgICAgICogLSBUaGlzIHNob3VsZCBub3QgYmUgdXNlZCB0byB3YXRjaCBmb3IgY2hhbmdlcyBpbiBvYmplY3RzIHRoYXQgYXJlIChvciBjb250YWluKVxuICAgICAgICogICBbRmlsZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZpbGUpIG9iamVjdHMgZHVlIHRvIGxpbWl0YXRpb25zIHdpdGgge0BsaW5rIGFuZ3VsYXIuY29weSBgYW5ndWxhci5jb3B5YH0uXG4gICAgICAgKiAtIFRoZSB3YXRjaCBgbGlzdGVuZXJgIG1heSBjaGFuZ2UgdGhlIG1vZGVsLCB3aGljaCBtYXkgdHJpZ2dlciBvdGhlciBgbGlzdGVuZXJgcyB0byBmaXJlLlxuICAgICAgICogICBUaGlzIGlzIGFjaGlldmVkIGJ5IHJlcnVubmluZyB0aGUgd2F0Y2hlcnMgdW50aWwgbm8gY2hhbmdlcyBhcmUgZGV0ZWN0ZWQuIFRoZSByZXJ1blxuICAgICAgICogICBpdGVyYXRpb24gbGltaXQgaXMgMTAgdG8gcHJldmVudCBhbiBpbmZpbml0ZSBsb29wIGRlYWRsb2NrLlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBJZiB5b3Ugd2FudCB0byBiZSBub3RpZmllZCB3aGVuZXZlciB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGlzIGNhbGxlZCxcbiAgICAgICAqIHlvdSBjYW4gcmVnaXN0ZXIgYSBgd2F0Y2hFeHByZXNzaW9uYCBmdW5jdGlvbiB3aXRoIG5vIGBsaXN0ZW5lcmAuIChCZSBwcmVwYXJlZCBmb3JcbiAgICAgICAqIG11bHRpcGxlIGNhbGxzIHRvIHlvdXIgYHdhdGNoRXhwcmVzc2lvbmAgYmVjYXVzZSBpdCB3aWxsIGV4ZWN1dGUgbXVsdGlwbGUgdGltZXMgaW4gYVxuICAgICAgICogc2luZ2xlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUgaWYgYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQuKVxuICAgICAgICpcbiAgICAgICAqIEFmdGVyIGEgd2F0Y2hlciBpcyByZWdpc3RlcmVkIHdpdGggdGhlIHNjb3BlLCB0aGUgYGxpc3RlbmVyYCBmbiBpcyBjYWxsZWQgYXN5bmNocm9ub3VzbHlcbiAgICAgICAqICh2aWEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luYyAkZXZhbEFzeW5jfSkgdG8gaW5pdGlhbGl6ZSB0aGVcbiAgICAgICAqIHdhdGNoZXIuIEluIHJhcmUgY2FzZXMsIHRoaXMgaXMgdW5kZXNpcmFibGUgYmVjYXVzZSB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkIHdoZW4gdGhlIHJlc3VsdFxuICAgICAgICogb2YgYHdhdGNoRXhwcmVzc2lvbmAgZGlkbid0IGNoYW5nZS4gVG8gZGV0ZWN0IHRoaXMgc2NlbmFyaW8gd2l0aGluIHRoZSBgbGlzdGVuZXJgIGZuLCB5b3VcbiAgICAgICAqIGNhbiBjb21wYXJlIHRoZSBgbmV3VmFsYCBhbmQgYG9sZFZhbGAuIElmIHRoZXNlIHR3byB2YWx1ZXMgYXJlIGlkZW50aWNhbCAoYD09PWApIHRoZW4gdGhlXG4gICAgICAgKiBsaXN0ZW5lciB3YXMgY2FsbGVkIGR1ZSB0byBpbml0aWFsaXphdGlvbi5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICAvLyBsZXQncyBhc3N1bWUgdGhhdCBzY29wZSB3YXMgZGVwZW5kZW5jeSBpbmplY3RlZCBhcyB0aGUgJHJvb3RTY29wZVxuICAgICAgICAgICB2YXIgc2NvcGUgPSAkcm9vdFNjb3BlO1xuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcblxuXG5cbiAgICAgICAgICAgLy8gVXNpbmcgYSBmdW5jdGlvbiBhcyBhIHdhdGNoRXhwcmVzc2lvblxuICAgICAgICAgICB2YXIgZm9vZDtcbiAgICAgICAgICAgc2NvcGUuZm9vZENvdW50ZXIgPSAwO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaChcbiAgICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHZhbHVlIGJlaW5nIHdhdGNoZWQuIEl0IGlzIGNhbGxlZCBmb3IgZWFjaCB0dXJuIG9mIHRoZSAkZGlnZXN0IGxvb3BcbiAgICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIGZvb2Q7IH0sXG4gICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgY2hhbmdlIGxpc3RlbmVyLCBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgYWJvdmUgZnVuY3Rpb24gY2hhbmdlc1xuICAgICAgICAgICAgIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgaWYgKCBuZXdWYWx1ZSAhPT0gb2xkVmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgIC8vIE9ubHkgaW5jcmVtZW50IHRoZSBjb3VudGVyIGlmIHRoZSB2YWx1ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgIHNjb3BlLmZvb2RDb3VudGVyID0gc2NvcGUuZm9vZENvdW50ZXIgKyAxO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgKTtcbiAgICAgICAgICAgLy8gTm8gZGlnZXN0IGhhcyBiZWVuIHJ1biBzbyB0aGUgY291bnRlciB3aWxsIGJlIHplcm9cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmZvb2RDb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIC8vIFJ1biB0aGUgZGlnZXN0IGJ1dCBzaW5jZSBmb29kIGhhcyBub3QgY2hhbmdlZCBjb3VudCB3aWxsIHN0aWxsIGJlIHplcm9cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG5cbiAgICAgICAgICAgLy8gVXBkYXRlIGZvb2QgYW5kIHJ1biBkaWdlc3QuICBOb3cgdGhlIGNvdW50ZXIgd2lsbCBpbmNyZW1lbnRcbiAgICAgICAgICAgZm9vZCA9ICdjaGVlc2VidXJnZXInO1xuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgxKTtcblxuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhmdW5jdGlvbigpfHN0cmluZyl9IHdhdGNoRXhwcmVzc2lvbiBFeHByZXNzaW9uIHRoYXQgaXMgZXZhbHVhdGVkIG9uIGVhY2hcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEEgY2hhbmdlIGluIHRoZSByZXR1cm4gdmFsdWUgdHJpZ2dlcnNcbiAgICAgICAqICAgIGEgY2FsbCB0byB0aGUgYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBFdmFsdWF0ZWQgYXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn1cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGNhbGxlZCB3aXRoIGN1cnJlbnQgYHNjb3BlYCBhcyBhIHBhcmFtZXRlci5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwsIHNjb3BlKX0gbGlzdGVuZXIgQ2FsbGJhY2sgY2FsbGVkIHdoZW5ldmVyIHRoZSB2YWx1ZVxuICAgICAgICogICAgb2YgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBuZXdWYWxgIGNvbnRhaW5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uYFxuICAgICAgICogICAgLSBgb2xkVmFsYCBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gXG4gICAgICAgKiAgICAtIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbb2JqZWN0RXF1YWxpdHk9ZmFsc2VdIENvbXBhcmUgZm9yIG9iamVjdCBlcXVhbGl0eSB1c2luZyB7QGxpbmsgYW5ndWxhci5lcXVhbHN9IGluc3RlYWQgb2ZcbiAgICAgICAqICAgICBjb21wYXJpbmcgZm9yIHJlZmVyZW5jZSBlcXVhbGl0eS5cbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgKi9cbiAgICAgICR3YXRjaDogZnVuY3Rpb24od2F0Y2hFeHAsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcHJldHR5UHJpbnRFeHByZXNzaW9uKSB7XG4gICAgICAgIHZhciBnZXQgPSAkcGFyc2Uod2F0Y2hFeHApO1xuICAgICAgICB2YXIgZm4gPSBpc0Z1bmN0aW9uKGxpc3RlbmVyKSA/IGxpc3RlbmVyIDogbm9vcDtcblxuICAgICAgICBpZiAoZ2V0LiQkd2F0Y2hEZWxlZ2F0ZSkge1xuICAgICAgICAgIHJldHVybiBnZXQuJCR3YXRjaERlbGVnYXRlKHRoaXMsIGZuLCBvYmplY3RFcXVhbGl0eSwgZ2V0LCB3YXRjaEV4cCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcyxcbiAgICAgICAgICAgIGFycmF5ID0gc2NvcGUuJCR3YXRjaGVycyxcbiAgICAgICAgICAgIHdhdGNoZXIgPSB7XG4gICAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgICAgbGFzdDogaW5pdFdhdGNoVmFsLFxuICAgICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgICAgZXhwOiBwcmV0dHlQcmludEV4cHJlc3Npb24gfHwgd2F0Y2hFeHAsXG4gICAgICAgICAgICAgIGVxOiAhIW9iamVjdEVxdWFsaXR5XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcblxuICAgICAgICBpZiAoIWFycmF5KSB7XG4gICAgICAgICAgYXJyYXkgPSBzY29wZS4kJHdhdGNoZXJzID0gW107XG4gICAgICAgICAgYXJyYXkuJCRkaWdlc3RXYXRjaEluZGV4ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgdXNlIHVuc2hpZnQgc2luY2Ugd2UgdXNlIGEgd2hpbGUgbG9vcCBpbiAkZGlnZXN0IGZvciBzcGVlZC5cbiAgICAgICAgLy8gdGhlIHdoaWxlIGxvb3AgcmVhZHMgaW4gcmV2ZXJzZSBvcmRlci5cbiAgICAgICAgYXJyYXkudW5zaGlmdCh3YXRjaGVyKTtcbiAgICAgICAgYXJyYXkuJCRkaWdlc3RXYXRjaEluZGV4Kys7XG4gICAgICAgIGluY3JlbWVudFdhdGNoZXJzQ291bnQodGhpcywgMSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaCgpIHtcbiAgICAgICAgICB2YXIgaW5kZXggPSBhcnJheVJlbW92ZShhcnJheSwgd2F0Y2hlcik7XG4gICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGluY3JlbWVudFdhdGNoZXJzQ291bnQoc2NvcGUsIC0xKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGFycmF5LiQkZGlnZXN0V2F0Y2hJbmRleCkge1xuICAgICAgICAgICAgICBhcnJheS4kJGRpZ2VzdFdhdGNoSW5kZXgtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaEdyb3VwXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQSB2YXJpYW50IG9mIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX0gd2hlcmUgaXQgd2F0Y2hlcyBhbiBhcnJheSBvZiBgd2F0Y2hFeHByZXNzaW9uc2AuXG4gICAgICAgKiBJZiBhbnkgb25lIGV4cHJlc3Npb24gaW4gdGhlIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgYGxpc3RlbmVyYCBpcyBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBpdGVtcyBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGFyZSBvYnNlcnZlZCB2aWEgdGhlIHN0YW5kYXJkIGAkd2F0Y2hgIG9wZXJhdGlvbi4gVGhlaXIgcmV0dXJuXG4gICAgICAgKiAgIHZhbHVlcyBhcmUgZXhhbWluZWQgZm9yIGNoYW5nZXMgb24gZXZlcnkgY2FsbCB0byBgJGRpZ2VzdGAuXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnkgZXhwcmVzc2lvbiBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGNoYW5nZXMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtBcnJheS48c3RyaW5nfEZ1bmN0aW9uKHNjb3BlKT59IHdhdGNoRXhwcmVzc2lvbnMgQXJyYXkgb2YgZXhwcmVzc2lvbnMgdGhhdCB3aWxsIGJlIGluZGl2aWR1YWxseVxuICAgICAgICogd2F0Y2hlZCB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9XG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdWYWx1ZXMsIG9sZFZhbHVlcywgc2NvcGUpfSBsaXN0ZW5lciBDYWxsYmFjayBjYWxsZWQgd2hlbmV2ZXIgdGhlIHJldHVybiB2YWx1ZSBvZiBhbnlcbiAgICAgICAqICAgIGV4cHJlc3Npb24gaW4gYHdhdGNoRXhwcmVzc2lvbnNgIGNoYW5nZXNcbiAgICAgICAqICAgIFRoZSBgbmV3VmFsdWVzYCBhcnJheSBjb250YWlucyB0aGUgY3VycmVudCB2YWx1ZXMgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25zYCwgd2l0aCB0aGUgaW5kZXhlcyBtYXRjaGluZ1xuICAgICAgICogICAgdGhvc2Ugb2YgYHdhdGNoRXhwcmVzc2lvbmBcbiAgICAgICAqICAgIGFuZCB0aGUgYG9sZFZhbHVlc2AgYXJyYXkgY29udGFpbnMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgLCB3aXRoIHRoZSBpbmRleGVzIG1hdGNoaW5nXG4gICAgICAgKiAgICB0aG9zZSBvZiBgd2F0Y2hFeHByZXNzaW9uYFxuICAgICAgICogICAgVGhlIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlLlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIGFsbCBsaXN0ZW5lcnMuXG4gICAgICAgKi9cbiAgICAgICR3YXRjaEdyb3VwOiBmdW5jdGlvbih3YXRjaEV4cHJlc3Npb25zLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgb2xkVmFsdWVzID0gbmV3IEFycmF5KHdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoKTtcbiAgICAgICAgdmFyIG5ld1ZhbHVlcyA9IG5ldyBBcnJheSh3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCk7XG4gICAgICAgIHZhciBkZXJlZ2lzdGVyRm5zID0gW107XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBmaXJzdFJ1biA9IHRydWU7XG5cbiAgICAgICAgaWYgKCF3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCkge1xuICAgICAgICAgIC8vIE5vIGV4cHJlc3Npb25zIG1lYW5zIHdlIGNhbGwgdGhlIGxpc3RlbmVyIEFTQVBcbiAgICAgICAgICB2YXIgc2hvdWxkQ2FsbCA9IHRydWU7XG4gICAgICAgICAgc2VsZi4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNob3VsZENhbGwpIGxpc3RlbmVyKG5ld1ZhbHVlcywgbmV3VmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XG4gICAgICAgICAgICBzaG91bGRDYWxsID0gZmFsc2U7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBzaXplIG9mIG9uZVxuICAgICAgICAgIHJldHVybiB0aGlzLiR3YXRjaCh3YXRjaEV4cHJlc3Npb25zWzBdLCBmdW5jdGlvbiB3YXRjaEdyb3VwQWN0aW9uKHZhbHVlLCBvbGRWYWx1ZSwgc2NvcGUpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlc1swXSA9IHZhbHVlO1xuICAgICAgICAgICAgb2xkVmFsdWVzWzBdID0gb2xkVmFsdWU7XG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsICh2YWx1ZSA9PT0gb2xkVmFsdWUpID8gbmV3VmFsdWVzIDogb2xkVmFsdWVzLCBzY29wZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JFYWNoKHdhdGNoRXhwcmVzc2lvbnMsIGZ1bmN0aW9uKGV4cHIsIGkpIHtcbiAgICAgICAgICB2YXIgdW53YXRjaEZuID0gc2VsZi4kd2F0Y2goZXhwciwgZnVuY3Rpb24gd2F0Y2hHcm91cFN1YkFjdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgbmV3VmFsdWVzW2ldID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoIWNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2VsZi4kZXZhbEFzeW5jKHdhdGNoR3JvdXBBY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlcmVnaXN0ZXJGbnMucHVzaCh1bndhdGNoRm4pO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiB3YXRjaEdyb3VwQWN0aW9uKCkge1xuICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gZmFsc2U7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGZpcnN0UnVuKSB7XG4gICAgICAgICAgICAgIGZpcnN0UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgbmV3VmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgb2xkVmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3YXRjaEV4cHJlc3Npb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIG9sZFZhbHVlc1tpXSA9IG5ld1ZhbHVlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XG4gICAgICAgICAgd2hpbGUgKGRlcmVnaXN0ZXJGbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkZXJlZ2lzdGVyRm5zLnNoaWZ0KCkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hDb2xsZWN0aW9uXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogU2hhbGxvdyB3YXRjaGVzIHRoZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCBhbmQgZmlyZXMgd2hlbmV2ZXIgYW55IG9mIHRoZSBwcm9wZXJ0aWVzIGNoYW5nZVxuICAgICAgICogKGZvciBhcnJheXMsIHRoaXMgaW1wbGllcyB3YXRjaGluZyB0aGUgYXJyYXkgaXRlbXM7IGZvciBvYmplY3QgbWFwcywgdGhpcyBpbXBsaWVzIHdhdGNoaW5nXG4gICAgICAgKiB0aGUgcHJvcGVydGllcykuIElmIGEgY2hhbmdlIGlzIGRldGVjdGVkLCB0aGUgYGxpc3RlbmVyYCBjYWxsYmFjayBpcyBmaXJlZC5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBgb2JqYCBjb2xsZWN0aW9uIGlzIG9ic2VydmVkIHZpYSBzdGFuZGFyZCAkd2F0Y2ggb3BlcmF0aW9uIGFuZCBpcyBleGFtaW5lZCBvbiBldmVyeVxuICAgICAgICogICBjYWxsIHRvICRkaWdlc3QoKSB0byBzZWUgaWYgYW55IGl0ZW1zIGhhdmUgYmVlbiBhZGRlZCwgcmVtb3ZlZCwgb3IgbW92ZWQuXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnl0aGluZyB3aXRoaW4gdGhlIGBvYmpgIGhhcyBjaGFuZ2VkLiBFeGFtcGxlcyBpbmNsdWRlXG4gICAgICAgKiAgIGFkZGluZywgcmVtb3ZpbmcsIGFuZCBtb3ZpbmcgaXRlbXMgYmVsb25naW5nIHRvIGFuIG9iamVjdCBvciBhcnJheS5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydpZ29yJywgJ21hdGlhcycsICdtaXNrbycsICdqYW1lcyddO1xuICAgICAgICAgICRzY29wZS5kYXRhQ291bnQgPSA0O1xuXG4gICAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ25hbWVzJywgZnVuY3Rpb24obmV3TmFtZXMsIG9sZE5hbWVzKSB7XG4gICAgICAgICAgICAkc2NvcGUuZGF0YUNvdW50ID0gbmV3TmFtZXMubGVuZ3RoO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZXhwZWN0KCRzY29wZS5kYXRhQ291bnQpLnRvRXF1YWwoNCk7XG4gICAgICAgICAgJHNjb3BlLiRkaWdlc3QoKTtcblxuICAgICAgICAgIC8vc3RpbGwgYXQgNCAuLi4gbm8gY2hhbmdlc1xuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDQpO1xuXG4gICAgICAgICAgJHNjb3BlLm5hbWVzLnBvcCgpO1xuICAgICAgICAgICRzY29wZS4kZGlnZXN0KCk7XG5cbiAgICAgICAgICAvL25vdyB0aGVyZSdzIGJlZW4gYSBjaGFuZ2VcbiAgICAgICAgICBleHBlY3QoJHNjb3BlLmRhdGFDb3VudCkudG9FcXVhbCgzKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbihzY29wZSl9IG9iaiBFdmFsdWF0ZWQgYXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0uIFRoZVxuICAgICAgICogICAgZXhwcmVzc2lvbiB2YWx1ZSBzaG91bGQgZXZhbHVhdGUgdG8gYW4gb2JqZWN0IG9yIGFuIGFycmF5IHdoaWNoIGlzIG9ic2VydmVkIG9uIGVhY2hcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEFueSBzaGFsbG93IGNoYW5nZSB3aXRoaW4gdGhlXG4gICAgICAgKiAgICBjb2xsZWN0aW9uIHdpbGwgdHJpZ2dlciBhIGNhbGwgdG8gdGhlIGBsaXN0ZW5lcmAuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdDb2xsZWN0aW9uLCBvbGRDb2xsZWN0aW9uLCBzY29wZSl9IGxpc3RlbmVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkXG4gICAgICAgKiAgICB3aGVuIGEgY2hhbmdlIGlzIGRldGVjdGVkLlxuICAgICAgICogICAgLSBUaGUgYG5ld0NvbGxlY3Rpb25gIG9iamVjdCBpcyB0aGUgbmV3bHkgbW9kaWZpZWQgZGF0YSBvYnRhaW5lZCBmcm9tIHRoZSBgb2JqYCBleHByZXNzaW9uXG4gICAgICAgKiAgICAtIFRoZSBgb2xkQ29sbGVjdGlvbmAgb2JqZWN0IGlzIGEgY29weSBvZiB0aGUgZm9ybWVyIGNvbGxlY3Rpb24gZGF0YS5cbiAgICAgICAqICAgICAgRHVlIHRvIHBlcmZvcm1hbmNlIGNvbnNpZGVyYXRpb25zLCB0aGVgb2xkQ29sbGVjdGlvbmAgdmFsdWUgaXMgY29tcHV0ZWQgb25seSBpZiB0aGVcbiAgICAgICAqICAgICAgYGxpc3RlbmVyYCBmdW5jdGlvbiBkZWNsYXJlcyB0d28gb3IgbW9yZSBhcmd1bWVudHMuXG4gICAgICAgKiAgICAtIFRoZSBgc2NvcGVgIGFyZ3VtZW50IHJlZmVycyB0byB0aGUgY3VycmVudCBzY29wZS5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBsaXN0ZW5lci4gV2hlbiB0aGVcbiAgICAgICAqICAgIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBpcyBleGVjdXRlZCwgdGhlIGludGVybmFsIHdhdGNoIG9wZXJhdGlvbiBpcyB0ZXJtaW5hdGVkLlxuICAgICAgICovXG4gICAgICAkd2F0Y2hDb2xsZWN0aW9uOiBmdW5jdGlvbihvYmosIGxpc3RlbmVyKSB7XG4gICAgICAgIC8vIE1hcmsgdGhlIGludGVyY2VwdG9yIGFzXG4gICAgICAgIC8vIC4uLiAkJHB1cmUgd2hlbiBsaXRlcmFsIHNpbmNlIHRoZSBpbnN0YW5jZSB3aWxsIGNoYW5nZSB3aGVuIGFueSBpbnB1dCBjaGFuZ2VzXG4gICAgICAgICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvci4kJHB1cmUgPSAkcGFyc2Uob2JqKS5saXRlcmFsO1xuICAgICAgICAvLyAuLi4gJHN0YXRlZnVsIHdoZW4gbm9uLWxpdGVyYWwgc2luY2Ugd2UgbXVzdCByZWFkIHRoZSBzdGF0ZSBvZiB0aGUgY29sbGVjdGlvblxuICAgICAgICAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IuJHN0YXRlZnVsID0gISR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvci4kJHB1cmU7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvLyB0aGUgY3VycmVudCB2YWx1ZSwgdXBkYXRlZCBvbiBlYWNoIGRpcnR5LWNoZWNrIHJ1blxuICAgICAgICB2YXIgbmV3VmFsdWU7XG4gICAgICAgIC8vIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBuZXdWYWx1ZSBmcm9tIHRoZSBsYXN0IGRpcnR5LWNoZWNrIHJ1bixcbiAgICAgICAgLy8gdXBkYXRlZCB0byBtYXRjaCBuZXdWYWx1ZSBkdXJpbmcgZGlydHktY2hlY2sgcnVuXG4gICAgICAgIHZhciBvbGRWYWx1ZTtcbiAgICAgICAgLy8gYSBzaGFsbG93IGNvcHkgb2YgdGhlIG5ld1ZhbHVlIGZyb20gd2hlbiB0aGUgbGFzdCBjaGFuZ2UgaGFwcGVuZWRcbiAgICAgICAgdmFyIHZlcnlPbGRWYWx1ZTtcbiAgICAgICAgLy8gb25seSB0cmFjayB2ZXJ5T2xkVmFsdWUgaWYgdGhlIGxpc3RlbmVyIGlzIGFza2luZyBmb3IgaXRcbiAgICAgICAgdmFyIHRyYWNrVmVyeU9sZFZhbHVlID0gKGxpc3RlbmVyLmxlbmd0aCA+IDEpO1xuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0ZWQgPSAwO1xuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0b3IgPSAkcGFyc2Uob2JqLCAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IpO1xuICAgICAgICB2YXIgaW50ZXJuYWxBcnJheSA9IFtdO1xuICAgICAgICB2YXIgaW50ZXJuYWxPYmplY3QgPSB7fTtcbiAgICAgICAgdmFyIGluaXRSdW4gPSB0cnVlO1xuICAgICAgICB2YXIgb2xkTGVuZ3RoID0gMDtcblxuICAgICAgICBmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IoX3ZhbHVlKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBfdmFsdWU7XG4gICAgICAgICAgdmFyIG5ld0xlbmd0aCwga2V5LCBib3RoTmFOLCBuZXdJdGVtLCBvbGRJdGVtO1xuXG4gICAgICAgICAgLy8gSWYgdGhlIG5ldyB2YWx1ZSBpcyB1bmRlZmluZWQsIHRoZW4gcmV0dXJuIHVuZGVmaW5lZCBhcyB0aGUgd2F0Y2ggbWF5IGJlIGEgb25lLXRpbWUgd2F0Y2hcbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQobmV3VmFsdWUpKSByZXR1cm47XG5cbiAgICAgICAgICBpZiAoIWlzT2JqZWN0KG5ld1ZhbHVlKSkgeyAvLyBpZiBwcmltaXRpdmVcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlMaWtlKG5ld1ZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBpbnRlcm5hbEFycmF5KSB7XG4gICAgICAgICAgICAgIC8vIHdlIGFyZSB0cmFuc2l0aW9uaW5nIGZyb20gc29tZXRoaW5nIHdoaWNoIHdhcyBub3QgYW4gYXJyYXkgaW50byBhcnJheS5cbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBpbnRlcm5hbEFycmF5O1xuICAgICAgICAgICAgICBvbGRMZW5ndGggPSBvbGRWYWx1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdMZW5ndGggPSBuZXdWYWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChvbGRMZW5ndGggIT09IG5ld0xlbmd0aCkge1xuICAgICAgICAgICAgICAvLyBpZiBsZW5ndGhzIGRvIG5vdCBtYXRjaCB3ZSBuZWVkIHRvIHRyaWdnZXIgY2hhbmdlIG5vdGlmaWNhdGlvblxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICBvbGRWYWx1ZS5sZW5ndGggPSBvbGRMZW5ndGggPSBuZXdMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjb3B5IHRoZSBpdGVtcyB0byBvbGRWYWx1ZSBhbmQgbG9vayBmb3IgY2hhbmdlcy5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgb2xkSXRlbSA9IG9sZFZhbHVlW2ldO1xuICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3VmFsdWVbaV07XG5cbiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcbiAgICAgICAgICAgICAgaWYgKCFib3RoTmFOICYmIChvbGRJdGVtICE9PSBuZXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICAgICAgb2xkVmFsdWVbaV0gPSBuZXdJdGVtO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gaW50ZXJuYWxPYmplY3QpIHtcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBvYmplY3QgaW50byBvYmplY3QuXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gaW50ZXJuYWxPYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgb2xkTGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvcHkgdGhlIGl0ZW1zIHRvIG9sZFZhbHVlIGFuZCBsb29rIGZvciBjaGFuZ2VzLlxuICAgICAgICAgICAgbmV3TGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgbmV3TGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IG5ld1ZhbHVlW2tleV07XG4gICAgICAgICAgICAgICAgb2xkSXRlbSA9IG9sZFZhbHVlW2tleV07XG5cbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcbiAgICAgICAgICAgICAgICAgIGlmICghYm90aE5hTiAmJiAob2xkSXRlbSAhPT0gbmV3SXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9sZExlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZExlbmd0aCA+IG5ld0xlbmd0aCkge1xuICAgICAgICAgICAgICAvLyB3ZSB1c2VkIHRvIGhhdmUgbW9yZSBrZXlzLCBuZWVkIHRvIGZpbmQgdGhlbSBhbmQgZGVzdHJveSB0aGVtLlxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgb2xkTGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgICBkZWxldGUgb2xkVmFsdWVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNoYW5nZURldGVjdGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gJHdhdGNoQ29sbGVjdGlvbkFjdGlvbigpIHtcbiAgICAgICAgICBpZiAoaW5pdFJ1bikge1xuICAgICAgICAgICAgaW5pdFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIG5ld1ZhbHVlLCBzZWxmKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIHZlcnlPbGRWYWx1ZSwgc2VsZik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWFrZSBhIGNvcHkgZm9yIHRoZSBuZXh0IHRpbWUgYSBjb2xsZWN0aW9uIGlzIGNoYW5nZWRcbiAgICAgICAgICBpZiAodHJhY2tWZXJ5T2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgIC8vcHJpbWl0aXZlXG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5TGlrZShuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3IEFycmF5KG5ld1ZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3VmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWVbaV0gPSBuZXdWYWx1ZVtpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gaWYgb2JqZWN0XG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlW2tleV0gPSBuZXdWYWx1ZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiR3YXRjaChjaGFuZ2VEZXRlY3RvciwgJHdhdGNoQ29sbGVjdGlvbkFjdGlvbik7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFByb2Nlc3NlcyBhbGwgb2YgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyc30gb2YgdGhlIGN1cnJlbnQgc2NvcGUgYW5kXG4gICAgICAgKiBpdHMgY2hpbGRyZW4uIEJlY2F1c2UgYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcn0ncyBsaXN0ZW5lciBjYW4gY2hhbmdlXG4gICAgICAgKiB0aGUgbW9kZWwsIHRoZSBgJGRpZ2VzdCgpYCBrZWVwcyBjYWxsaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcnN9XG4gICAgICAgKiB1bnRpbCBubyBtb3JlIGxpc3RlbmVycyBhcmUgZmlyaW5nLiBUaGlzIG1lYW5zIHRoYXQgaXQgaXMgcG9zc2libGUgdG8gZ2V0IGludG8gYW4gaW5maW5pdGVcbiAgICAgICAqIGxvb3AuIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBgJ01heGltdW0gaXRlcmF0aW9uIGxpbWl0IGV4Y2VlZGVkLidgIGlmIHRoZSBudW1iZXIgb2ZcbiAgICAgICAqIGl0ZXJhdGlvbnMgZXhjZWVkcyAxMC5cbiAgICAgICAqXG4gICAgICAgKiBVc3VhbGx5LCB5b3UgZG9uJ3QgY2FsbCBgJGRpZ2VzdCgpYCBkaXJlY3RseSBpblxuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NvbnRyb2xsZXIgY29udHJvbGxlcnN9IG9yIGluXG4gICAgICAgKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gICAgICAgKiBJbnN0ZWFkLCB5b3Ugc2hvdWxkIGNhbGwge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5ICRhcHBseSgpfSAodHlwaWNhbGx5IGZyb20gd2l0aGluXG4gICAgICAgKiBhIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmV9KSwgd2hpY2ggd2lsbCBmb3JjZSBhIGAkZGlnZXN0KClgLlxuICAgICAgICpcbiAgICAgICAqIElmIHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkIHdoZW5ldmVyIGAkZGlnZXN0KClgIGlzIGNhbGxlZCxcbiAgICAgICAqIHlvdSBjYW4gcmVnaXN0ZXIgYSBgd2F0Y2hFeHByZXNzaW9uYCBmdW5jdGlvbiB3aXRoXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9IHdpdGggbm8gYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiBJbiB1bml0IHRlc3RzLCB5b3UgbWF5IG5lZWQgdG8gY2FsbCBgJGRpZ2VzdCgpYCB0byBzaW11bGF0ZSB0aGUgc2NvcGUgbGlmZSBjeWNsZS5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAgICAgdmFyIHNjb3BlID0gLi4uO1xuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqL1xuICAgICAgJGRpZ2VzdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3YXRjaCwgdmFsdWUsIGxhc3QsIGZuLCBnZXQsXG4gICAgICAgICAgICB3YXRjaGVycyxcbiAgICAgICAgICAgIGRpcnR5LCB0dGwgPSBUVEwsXG4gICAgICAgICAgICBuZXh0LCBjdXJyZW50LCB0YXJnZXQgPSBhc3luY1F1ZXVlLmxlbmd0aCA/ICRyb290U2NvcGUgOiB0aGlzLFxuICAgICAgICAgICAgd2F0Y2hMb2cgPSBbXSxcbiAgICAgICAgICAgIGxvZ0lkeCwgYXN5bmNUYXNrO1xuXG4gICAgICAgIGJlZ2luUGhhc2UoJyRkaWdlc3QnKTtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNoYW5nZXMgdG8gYnJvd3NlciB1cmwgdGhhdCBoYXBwZW5lZCBpbiBzeW5jIGJlZm9yZSB0aGUgY2FsbCB0byAkZGlnZXN0XG4gICAgICAgICRicm93c2VyLiQkY2hlY2tVcmxDaGFuZ2UoKTtcblxuICAgICAgICBpZiAodGhpcyA9PT0gJHJvb3RTY29wZSAmJiBhcHBseUFzeW5jSWQgIT09IG51bGwpIHtcbiAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSByb290IHNjb3BlLCBhbmQgJGFwcGx5QXN5bmMgaGFzIHNjaGVkdWxlZCBhIGRlZmVycmVkICRhcHBseSgpLCB0aGVuXG4gICAgICAgICAgLy8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgJGFwcGx5IGFuZCBmbHVzaCB0aGUgcXVldWUgb2YgZXhwcmVzc2lvbnMgdG8gYmUgZXZhbHVhdGVkLlxuICAgICAgICAgICRicm93c2VyLmRlZmVyLmNhbmNlbChhcHBseUFzeW5jSWQpO1xuICAgICAgICAgIGZsdXNoQXBwbHlBc3luYygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuXG4gICAgICAgIGRvIHsgLy8gXCJ3aGlsZSBkaXJ0eVwiIGxvb3BcbiAgICAgICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgIGN1cnJlbnQgPSB0YXJnZXQ7XG5cbiAgICAgICAgICAvLyBJdCdzIHNhZmUgZm9yIGFzeW5jUXVldWVQb3NpdGlvbiB0byBiZSBhIGxvY2FsIHZhcmlhYmxlIGhlcmUgYmVjYXVzZSB0aGlzIGxvb3AgY2FuJ3RcbiAgICAgICAgICAvLyBiZSByZWVudGVyZWQgcmVjdXJzaXZlbHkuIENhbGxpbmcgJGRpZ2VzdCBmcm9tIGEgZnVuY3Rpb24gcGFzc2VkIHRvICRldmFsQXN5bmMgd291bGRcbiAgICAgICAgICAvLyBsZWFkIHRvIGEgJyRkaWdlc3QgYWxyZWFkeSBpbiBwcm9ncmVzcycgZXJyb3IuXG4gICAgICAgICAgZm9yICh2YXIgYXN5bmNRdWV1ZVBvc2l0aW9uID0gMDsgYXN5bmNRdWV1ZVBvc2l0aW9uIDwgYXN5bmNRdWV1ZS5sZW5ndGg7IGFzeW5jUXVldWVQb3NpdGlvbisrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhc3luY1Rhc2sgPSBhc3luY1F1ZXVlW2FzeW5jUXVldWVQb3NpdGlvbl07XG4gICAgICAgICAgICAgIGZuID0gYXN5bmNUYXNrLmZuO1xuICAgICAgICAgICAgICBmbihhc3luY1Rhc2suc2NvcGUsIGFzeW5jVGFzay5sb2NhbHMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXN5bmNRdWV1ZS5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgdHJhdmVyc2VTY29wZXNMb29wOlxuICAgICAgICAgIGRvIHsgLy8gXCJ0cmF2ZXJzZSB0aGUgc2NvcGVzXCIgbG9vcFxuICAgICAgICAgICAgaWYgKCh3YXRjaGVycyA9ICFjdXJyZW50LiQkc3VzcGVuZGVkICYmIGN1cnJlbnQuJCR3YXRjaGVycykpIHtcbiAgICAgICAgICAgICAgLy8gcHJvY2VzcyBvdXIgd2F0Y2hlc1xuICAgICAgICAgICAgICB3YXRjaGVycy4kJGRpZ2VzdFdhdGNoSW5kZXggPSB3YXRjaGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgIHdoaWxlICh3YXRjaGVycy4kJGRpZ2VzdFdhdGNoSW5kZXgtLSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB3YXRjaCA9IHdhdGNoZXJzW3dhdGNoZXJzLiQkZGlnZXN0V2F0Y2hJbmRleF07XG4gICAgICAgICAgICAgICAgICAvLyBNb3N0IGNvbW1vbiB3YXRjaGVzIGFyZSBvbiBwcmltaXRpdmVzLCBpbiB3aGljaCBjYXNlIHdlIGNhbiBzaG9ydFxuICAgICAgICAgICAgICAgICAgLy8gY2lyY3VpdCBpdCB3aXRoID09PSBvcGVyYXRvciwgb25seSB3aGVuID09PSBmYWlscyBkbyB3ZSB1c2UgLmVxdWFsc1xuICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldCA9IHdhdGNoLmdldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSA9IGdldChjdXJyZW50KSkgIT09IChsYXN0ID0gd2F0Y2gubGFzdCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2guZXFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGVxdWFscyh2YWx1ZSwgbGFzdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChpc051bWJlck5hTih2YWx1ZSkgJiYgaXNOdW1iZXJOYU4obGFzdCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICBsYXN0RGlydHlXYXRjaCA9IHdhdGNoO1xuICAgICAgICAgICAgICAgICAgICAgIHdhdGNoLmxhc3QgPSB3YXRjaC5lcSA/IGNvcHkodmFsdWUsIG51bGwpIDogdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgZm4gPSB3YXRjaC5mbjtcbiAgICAgICAgICAgICAgICAgICAgICBmbih2YWx1ZSwgKChsYXN0ID09PSBpbml0V2F0Y2hWYWwpID8gdmFsdWUgOiBsYXN0KSwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR0bCA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0lkeCA9IDQgLSB0dGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdhdGNoTG9nW2xvZ0lkeF0pIHdhdGNoTG9nW2xvZ0lkeF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoTG9nW2xvZ0lkeF0ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogaXNGdW5jdGlvbih3YXRjaC5leHApID8gJ2ZuOiAnICsgKHdhdGNoLmV4cC5uYW1lIHx8IHdhdGNoLmV4cC50b1N0cmluZygpKSA6IHdhdGNoLmV4cCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsOiBsYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2F0Y2ggPT09IGxhc3REaXJ0eVdhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1vc3QgcmVjZW50bHkgZGlydHkgd2F0Y2hlciBpcyBub3cgY2xlYW4sIHNob3J0IGNpcmN1aXQgc2luY2UgdGhlIHJlbWFpbmluZyB3YXRjaGVyc1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgYWxyZWFkeSBiZWVuIHRlc3RlZC5cbiAgICAgICAgICAgICAgICAgICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHRyYXZlcnNlU2NvcGVzTG9vcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJbnNhbml0eSBXYXJuaW5nOiBzY29wZSBkZXB0aC1maXJzdCB0cmF2ZXJzYWxcbiAgICAgICAgICAgIC8vIHllcywgdGhpcyBjb2RlIGlzIGEgYml0IGNyYXp5LCBidXQgaXQgd29ya3MgYW5kIHdlIGhhdmUgdGVzdHMgdG8gcHJvdmUgaXQhXG4gICAgICAgICAgICAvLyB0aGlzIHBpZWNlIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgdHJhdmVyc2FsIGluICRicm9hZGNhc3RcbiAgICAgICAgICAgIC8vICh0aG91Z2ggaXQgZGlmZmVycyBkdWUgdG8gaGF2aW5nIHRoZSBleHRyYSBjaGVjayBmb3IgJCRzdXNwZW5kZWQgYW5kIGRvZXMgbm90XG4gICAgICAgICAgICAvLyBjaGVjayAkJGxpc3RlbmVyQ291bnQpXG4gICAgICAgICAgICBpZiAoIShuZXh0ID0gKCghY3VycmVudC4kJHN1c3BlbmRlZCAmJiBjdXJyZW50LiQkd2F0Y2hlcnNDb3VudCAmJiBjdXJyZW50LiQkY2hpbGRIZWFkKSB8fFxuICAgICAgICAgICAgICAgIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgY3VycmVudC4kJG5leHRTaWJsaW5nKSkpKSB7XG4gICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgIShuZXh0ID0gY3VycmVudC4kJG5leHRTaWJsaW5nKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlICgoY3VycmVudCA9IG5leHQpKTtcblxuICAgICAgICAgIC8vIGBicmVhayB0cmF2ZXJzZVNjb3Blc0xvb3A7YCB0YWtlcyB1cyB0byBoZXJlXG5cbiAgICAgICAgICBpZiAoKGRpcnR5IHx8IGFzeW5jUXVldWUubGVuZ3RoKSAmJiAhKHR0bC0tKSkge1xuICAgICAgICAgICAgY2xlYXJQaGFzZSgpO1xuICAgICAgICAgICAgdGhyb3cgJHJvb3RTY29wZU1pbkVycignaW5mZGlnJyxcbiAgICAgICAgICAgICAgICAnezB9ICRkaWdlc3QoKSBpdGVyYXRpb25zIHJlYWNoZWQuIEFib3J0aW5nIVxcbicgK1xuICAgICAgICAgICAgICAgICdXYXRjaGVycyBmaXJlZCBpbiB0aGUgbGFzdCA1IGl0ZXJhdGlvbnM6IHsxfScsXG4gICAgICAgICAgICAgICAgVFRMLCB3YXRjaExvZyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gd2hpbGUgKGRpcnR5IHx8IGFzeW5jUXVldWUubGVuZ3RoKTtcblxuICAgICAgICBjbGVhclBoYXNlKCk7XG5cbiAgICAgICAgLy8gcG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24gaXNuJ3QgbG9jYWwgaGVyZSBiZWNhdXNlIHRoaXMgbG9vcCBjYW4gYmUgcmVlbnRlcmVkIHJlY3Vyc2l2ZWx5LlxuICAgICAgICB3aGlsZSAocG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24gPCBwb3N0RGlnZXN0UXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZVtwb3N0RGlnZXN0UXVldWVQb3NpdGlvbisrXSgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwb3N0RGlnZXN0UXVldWUubGVuZ3RoID0gcG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24gPSAwO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBjaGFuZ2VzIHRvIGJyb3dzZXIgdXJsIHRoYXQgaGFwcGVuZWQgZHVyaW5nIHRoZSAkZGlnZXN0XG4gICAgICAgIC8vIChmb3Igd2hpY2ggbm8gZXZlbnQgaXMgZmlyZWQ7IGUuZy4gdmlhIGBoaXN0b3J5LnB1c2hTdGF0ZSgpYClcbiAgICAgICAgJGJyb3dzZXIuJCRjaGVja1VybENoYW5nZSgpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRzdXNwZW5kXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogU3VzcGVuZCB3YXRjaGVycyBvZiB0aGlzIHNjb3BlIHN1YnRyZWUgc28gdGhhdCB0aGV5IHdpbGwgbm90IGJlIGludm9rZWQgZHVyaW5nIGRpZ2VzdC5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIG9wdGltaXplIHlvdXIgYXBwbGljYXRpb24gd2hlbiB5b3Uga25vdyB0aGF0IHJ1bm5pbmcgdGhvc2Ugd2F0Y2hlcnNcbiAgICAgICAqIGlzIHJlZHVuZGFudC5cbiAgICAgICAqXG4gICAgICAgKiAqKldhcm5pbmcqKlxuICAgICAgICpcbiAgICAgICAqIFN1c3BlbmRpbmcgc2NvcGVzIGZyb20gdGhlIGRpZ2VzdCBjeWNsZSBjYW4gaGF2ZSB1bndhbnRlZCBhbmQgZGlmZmljdWx0IHRvIGRlYnVnIHJlc3VsdHMuXG4gICAgICAgKiBPbmx5IHVzZSB0aGlzIGFwcHJvYWNoIGlmIHlvdSBhcmUgY29uZmlkZW50IHRoYXQgeW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nIGFuZCBoYXZlXG4gICAgICAgKiBhbXBsZSB0ZXN0cyB0byBlbnN1cmUgdGhhdCBiaW5kaW5ncyBnZXQgdXBkYXRlZCBhcyB5b3UgZXhwZWN0LlxuICAgICAgICpcbiAgICAgICAqIFNvbWUgb2YgdGhlIHRoaW5ncyB0byBjb25zaWRlciBhcmU6XG4gICAgICAgKlxuICAgICAgICogKiBBbnkgZXh0ZXJuYWwgZXZlbnQgb24gYSBkaXJlY3RpdmUvY29tcG9uZW50IHdpbGwgbm90IHRyaWdnZXIgYSBkaWdlc3Qgd2hpbGUgdGhlIGhvc3RpbmdcbiAgICAgICAqICAgc2NvcGUgaXMgc3VzcGVuZGVkIC0gZXZlbiBpZiB0aGUgZXZlbnQgaGFuZGxlciBjYWxscyBgJGFwcGx5KClgIG9yIGAkcm9vdFNjb3BlLiRkaWdlc3QoKWAuXG4gICAgICAgKiAqIFRyYW5zY2x1ZGVkIGNvbnRlbnQgZXhpc3RzIG9uIGEgc2NvcGUgdGhhdCBpbmhlcml0cyBmcm9tIG91dHNpZGUgYSBkaXJlY3RpdmUgYnV0IGV4aXN0c1xuICAgICAgICogICBhcyBhIGNoaWxkIG9mIHRoZSBkaXJlY3RpdmUncyBjb250YWluaW5nIHNjb3BlLiBJZiB0aGUgY29udGFpbmluZyBzY29wZSBpcyBzdXNwZW5kZWQgdGhlXG4gICAgICAgKiAgIHRyYW5zY2x1ZGVkIHNjb3BlIHdpbGwgYWxzbyBiZSBzdXNwZW5kZWQsIGV2ZW4gaWYgdGhlIHNjb3BlIGZyb20gd2hpY2ggdGhlIHRyYW5zY2x1ZGVkXG4gICAgICAgKiAgIHNjb3BlIGluaGVyaXRzIGlzIG5vdCBzdXNwZW5kZWQuXG4gICAgICAgKiAqIE11bHRpcGxlIGRpcmVjdGl2ZXMgdHJ5aW5nIHRvIG1hbmFnZSB0aGUgc3VzcGVuZGVkIHN0YXR1cyBvZiBhIHNjb3BlIGNhbiBjb25mdXNlIGVhY2ggb3RoZXI6XG4gICAgICAgKiAgICAqIEEgY2FsbCB0byBgJHN1c3BlbmQoKWAgb24gYW4gYWxyZWFkeSBzdXNwZW5kZWQgc2NvcGUgaXMgYSBuby1vcC5cbiAgICAgICAqICAgICogQSBjYWxsIHRvIGAkcmVzdW1lKClgIG9uIGEgbm9uLXN1c3BlbmRlZCBzY29wZSBpcyBhIG5vLW9wLlxuICAgICAgICogICAgKiBJZiB0d28gZGlyZWN0aXZlcyBzdXNwZW5kIGEgc2NvcGUsIHRoZW4gb25lIG9mIHRoZW0gcmVzdW1lcyB0aGUgc2NvcGUsIHRoZSBzY29wZSB3aWxsIG5vXG4gICAgICAgKiAgICAgIGxvbmdlciBiZSBzdXNwZW5kZWQuIFRoaXMgY291bGQgcmVzdWx0IGluIHRoZSBvdGhlciBkaXJlY3RpdmUgYmVsaWV2aW5nIGEgc2NvcGUgdG8gYmVcbiAgICAgICAqICAgICAgc3VzcGVuZGVkIHdoZW4gaXQgaXMgbm90LlxuICAgICAgICogKiBJZiBhIHBhcmVudCBzY29wZSBpcyBzdXNwZW5kZWQgdGhlbiBhbGwgaXRzIGRlc2NlbmRhbnRzIHdpbGwgYmUgYWxzbyBleGNsdWRlZCBmcm9tIGZ1dHVyZVxuICAgICAgICogICBkaWdlc3RzIHdoZXRoZXIgb3Igbm90IHRoZXkgaGF2ZSBiZWVuIHN1c3BlbmRlZCB0aGVtc2VsdmVzLiBOb3RlIHRoYXQgdGhpcyBhbHNvIGFwcGxpZXMgdG9cbiAgICAgICAqICAgaXNvbGF0ZSBjaGlsZCBzY29wZXMuXG4gICAgICAgKiAqIENhbGxpbmcgYCRkaWdlc3QoKWAgZGlyZWN0bHkgb24gYSBkZXNjZW5kYW50IG9mIGEgc3VzcGVuZGVkIHNjb3BlIHdpbGwgc3RpbGwgcnVuIHRoZSB3YXRjaGVyc1xuICAgICAgICogICBmb3IgdGhhdCBzY29wZSBhbmQgaXRzIGRlc2NlbmRhbnRzLiBXaGVuIGRpZ2VzdGluZyB3ZSBvbmx5IGNoZWNrIHdoZXRoZXIgdGhlIGN1cnJlbnQgc2NvcGUgaXNcbiAgICAgICAqICAgbG9jYWxseSBzdXNwZW5kZWQsIHJhdGhlciB0aGFuIGNoZWNraW5nIHdoZXRoZXIgaXQgaGFzIGEgc3VzcGVuZGVkIGFuY2VzdG9yLlxuICAgICAgICogKiBDYWxsaW5nIGAkcmVzdW1lKClgIG9uIGEgc2NvcGUgdGhhdCBoYXMgYSBzdXNwZW5kZWQgYW5jZXN0b3Igd2lsbCBub3QgY2F1c2UgdGhlIHNjb3BlIHRvIGJlXG4gICAgICAgKiAgIGluY2x1ZGVkIGluIGZ1dHVyZSBkaWdlc3RzIHVudGlsIGFsbCBpdHMgYW5jZXN0b3JzIGhhdmUgYmVlbiByZXN1bWVkLlxuICAgICAgICogKiBSZXNvbHZlZCBwcm9taXNlcywgZS5nLiBmcm9tIGV4cGxpY2l0IGAkcWAgZGVmZXJyZWRzIGFuZCBgJGh0dHBgIGNhbGxzLCB0cmlnZ2VyIGAkYXBwbHkoKWBcbiAgICAgICAqICAgYWdhaW5zdCB0aGUgYCRyb290U2NvcGVgIGFuZCBzbyB3aWxsIHN0aWxsIHRyaWdnZXIgYSBnbG9iYWwgZGlnZXN0IGV2ZW4gaWYgdGhlIHByb21pc2Ugd2FzXG4gICAgICAgKiAgIGluaXRpYXRlZCBieSBhIGNvbXBvbmVudCB0aGF0IGxpdmVzIG9uIGEgc3VzcGVuZGVkIHNjb3BlLlxuICAgICAgICovXG4gICAgICAkc3VzcGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuJCRzdXNwZW5kZWQgPSB0cnVlO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRpc1N1c3BlbmRlZFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIENhbGwgdGhpcyBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgc2NvcGUgaGFzIGJlZW4gZXhwbGljaXRseSBzdXNwZW5kZWQuIEl0IHdpbGwgbm90XG4gICAgICAgKiB0ZWxsIHlvdSB3aGV0aGVyIGFuIGFuY2VzdG9yIGhhcyBiZWVuIHN1c3BlbmRlZC5cbiAgICAgICAqIFRvIGRldGVybWluZSBpZiB0aGlzIHNjb3BlIHdpbGwgYmUgZXhjbHVkZWQgZnJvbSBhIGRpZ2VzdCB0cmlnZ2VyZWQgYXQgdGhlICRyb290U2NvcGUsXG4gICAgICAgKiBmb3IgZXhhbXBsZSwgeW91IG11c3QgY2hlY2sgYWxsIGl0cyBhbmNlc3RvcnM6XG4gICAgICAgKlxuICAgICAgICogYGBgXG4gICAgICAgKiBmdW5jdGlvbiBpc0V4Y2x1ZGVkRnJvbURpZ2VzdChzY29wZSkge1xuICAgICAgICogICB3aGlsZShzY29wZSkge1xuICAgICAgICogICAgIGlmIChzY29wZS4kaXNTdXNwZW5kZWQoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgKiAgICAgc2NvcGUgPSBzY29wZS4kcGFyZW50O1xuICAgICAgICogICB9XG4gICAgICAgKiAgIHJldHVybiBmYWxzZTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqIEJlIGF3YXJlIHRoYXQgYSBzY29wZSBtYXkgbm90IGJlIGluY2x1ZGVkIGluIGRpZ2VzdHMgaWYgaXQgaGFzIGEgc3VzcGVuZGVkIGFuY2VzdG9yLFxuICAgICAgICogZXZlbiBpZiBgJGlzU3VzcGVuZGVkKClgIHJldHVybnMgZmFsc2UuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudCBzY29wZSBoYXMgYmVlbiBzdXNwZW5kZWQuXG4gICAgICAgKi9cbiAgICAgICRpc1N1c3BlbmRlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQkc3VzcGVuZGVkO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRyZXN1bWVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZXN1bWUgd2F0Y2hlcnMgb2YgdGhpcyBzY29wZSBzdWJ0cmVlIGluIGNhc2UgaXQgd2FzIHN1c3BlbmRlZC5cbiAgICAgICAqXG4gICAgICAgKiBTZWUge0BsaW5rICRyb290U2NvcGUuU2NvcGUjJHN1c3BlbmR9IGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZGFuZ2VycyBvZiB1c2luZyB0aGlzIGFwcHJvYWNoLlxuICAgICAgICovXG4gICAgICAkcmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy4kJHN1c3BlbmRlZCA9IGZhbHNlO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgZXZlbnRcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3lcbiAgICAgICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHNjb3BlIGJlaW5nIGRlc3Ryb3llZFxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQnJvYWRjYXN0ZWQgd2hlbiBhIHNjb3BlIGFuZCBpdHMgY2hpbGRyZW4gYXJlIGJlaW5nIGRlc3Ryb3llZC5cbiAgICAgICAqXG4gICAgICAgKiBOb3RlIHRoYXQsIGluIEFuZ3VsYXJKUywgdGhlcmUgaXMgYWxzbyBhIGAkZGVzdHJveWAgalF1ZXJ5IGV2ZW50LCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAgICogY2xlYW4gdXAgRE9NIGJpbmRpbmdzIGJlZm9yZSBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJlbW92ZXMgdGhlIGN1cnJlbnQgc2NvcGUgKGFuZCBhbGwgb2YgaXRzIGNoaWxkcmVuKSBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuIFJlbW92YWwgaW1wbGllc1xuICAgICAgICogdGhhdCBjYWxscyB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gd2lsbCBubyBsb25nZXJcbiAgICAgICAqIHByb3BhZ2F0ZSB0byB0aGUgY3VycmVudCBzY29wZSBhbmQgaXRzIGNoaWxkcmVuLiBSZW1vdmFsIGFsc28gaW1wbGllcyB0aGF0IHRoZSBjdXJyZW50XG4gICAgICAgKiBzY29wZSBpcyBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBgJGRlc3Ryb3koKWAgaXMgdXN1YWxseSB1c2VkIGJ5IGRpcmVjdGl2ZXMgc3VjaCBhc1xuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0gZm9yIG1hbmFnaW5nIHRoZVxuICAgICAgICogdW5yb2xsaW5nIG9mIHRoZSBsb29wLlxuICAgICAgICpcbiAgICAgICAqIEp1c3QgYmVmb3JlIGEgc2NvcGUgaXMgZGVzdHJveWVkLCBhIGAkZGVzdHJveWAgZXZlbnQgaXMgYnJvYWRjYXN0ZWQgb24gdGhpcyBzY29wZS5cbiAgICAgICAqIEFwcGxpY2F0aW9uIGNvZGUgY2FuIHJlZ2lzdGVyIGEgYCRkZXN0cm95YCBldmVudCBoYW5kbGVyIHRoYXQgd2lsbCBnaXZlIGl0IGEgY2hhbmNlIHRvXG4gICAgICAgKiBwZXJmb3JtIGFueSBuZWNlc3NhcnkgY2xlYW51cC5cbiAgICAgICAqXG4gICAgICAgKiBOb3RlIHRoYXQsIGluIEFuZ3VsYXJKUywgdGhlcmUgaXMgYWxzbyBhIGAkZGVzdHJveWAgalF1ZXJ5IGV2ZW50LCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAgICogY2xlYW4gdXAgRE9NIGJpbmRpbmdzIGJlZm9yZSBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICAgICAgICovXG4gICAgICAkZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFdlIGNhbid0IGRlc3Ryb3kgYSBzY29wZSB0aGF0IGhhcyBiZWVuIGFscmVhZHkgZGVzdHJveWVkLlxuICAgICAgICBpZiAodGhpcy4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXG4gICAgICAgIHRoaXMuJGJyb2FkY2FzdCgnJGRlc3Ryb3knKTtcbiAgICAgICAgdGhpcy4kJGRlc3Ryb3llZCA9IHRydWU7XG5cbiAgICAgICAgaWYgKHRoaXMgPT09ICRyb290U2NvcGUpIHtcbiAgICAgICAgICAvL1JlbW92ZSBoYW5kbGVycyBhdHRhY2hlZCB0byB3aW5kb3cgd2hlbiAkcm9vdFNjb3BlIGlzIHJlbW92ZWRcbiAgICAgICAgICAkYnJvd3Nlci4kJGFwcGxpY2F0aW9uRGVzdHJveWVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpbmNyZW1lbnRXYXRjaGVyc0NvdW50KHRoaXMsIC10aGlzLiQkd2F0Y2hlcnNDb3VudCk7XG4gICAgICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiB0aGlzLiQkbGlzdGVuZXJDb3VudCkge1xuICAgICAgICAgIGRlY3JlbWVudExpc3RlbmVyQ291bnQodGhpcywgdGhpcy4kJGxpc3RlbmVyQ291bnRbZXZlbnROYW1lXSwgZXZlbnROYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldmVyIGFsbCB0aGUgcmVmZXJlbmNlcyB0byBwYXJlbnQgc2NvcGVzIChhZnRlciB0aGlzIGNsZWFudXAsIHRoZSBjdXJyZW50IHNjb3BlIHNob3VsZFxuICAgICAgICAvLyBub3QgYmUgcmV0YWluZWQgYnkgYW55IG9mIG91ciByZWZlcmVuY2VzIGFuZCBzaG91bGQgYmUgZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbilcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuJCRjaGlsZEhlYWQgPT09IHRoaXMpIHBhcmVudC4kJGNoaWxkSGVhZCA9IHRoaXMuJCRuZXh0U2libGluZztcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuJCRjaGlsZFRhaWwgPT09IHRoaXMpIHBhcmVudC4kJGNoaWxkVGFpbCA9IHRoaXMuJCRwcmV2U2libGluZztcbiAgICAgICAgaWYgKHRoaXMuJCRwcmV2U2libGluZykgdGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmcgPSB0aGlzLiQkbmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICh0aGlzLiQkbmV4dFNpYmxpbmcpIHRoaXMuJCRuZXh0U2libGluZy4kJHByZXZTaWJsaW5nID0gdGhpcy4kJHByZXZTaWJsaW5nO1xuXG4gICAgICAgIC8vIERpc2FibGUgbGlzdGVuZXJzLCB3YXRjaGVycyBhbmQgYXBwbHkvZGlnZXN0IG1ldGhvZHNcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IHRoaXMuJGRpZ2VzdCA9IHRoaXMuJGFwcGx5ID0gdGhpcy4kZXZhbEFzeW5jID0gdGhpcy4kYXBwbHlBc3luYyA9IG5vb3A7XG4gICAgICAgIHRoaXMuJG9uID0gdGhpcy4kd2F0Y2ggPSB0aGlzLiR3YXRjaEdyb3VwID0gZnVuY3Rpb24oKSB7IHJldHVybiBub29wOyB9O1xuICAgICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XG5cbiAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgbmV4dCBzaWJsaW5nIHRvIHByZXZlbnQgYGNsZWFuVXBTY29wZWAgZGVzdHJveWluZyB0aG9zZSB0b29cbiAgICAgICAgdGhpcy4kJG5leHRTaWJsaW5nID0gbnVsbDtcbiAgICAgICAgY2xlYW5VcFNjb3BlKHRoaXMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRldmFsXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRXhlY3V0ZXMgdGhlIGBleHByZXNzaW9uYCBvbiB0aGUgY3VycmVudCBzY29wZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LiBBbnkgZXhjZXB0aW9ucyBpblxuICAgICAgICogdGhlIGV4cHJlc3Npb24gYXJlIHByb3BhZ2F0ZWQgKHVuY2F1Z2h0KS4gVGhpcyBpcyB1c2VmdWwgd2hlbiBldmFsdWF0aW5nIEFuZ3VsYXJKU1xuICAgICAgICogZXhwcmVzc2lvbnMuXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgICAgIHZhciBzY29wZSA9IG5nLiRyb290U2NvcGUuU2NvcGUoKTtcbiAgICAgICAgICAgc2NvcGUuYSA9IDE7XG4gICAgICAgICAgIHNjb3BlLmIgPSAyO1xuXG4gICAgICAgICAgIGV4cGVjdChzY29wZS4kZXZhbCgnYStiJykpLnRvRXF1YWwoMyk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS4kZXZhbChmdW5jdGlvbihzY29wZSl7IHJldHVybiBzY29wZS5hICsgc2NvcGUuYjsgfSkpLnRvRXF1YWwoMyk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHByZXNzaW9uIEFuIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAgICpcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IGV4ZWN1dGUgdXNpbmcgdGhlIHJ1bGVzIGFzIGRlZmluZWQgaW4gIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhvYmplY3QpPX0gbG9jYWxzIExvY2FsIHZhcmlhYmxlcyBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW4gc2NvcGUuXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uLlxuICAgICAgICovXG4gICAgICAkZXZhbDogZnVuY3Rpb24oZXhwciwgbG9jYWxzKSB7XG4gICAgICAgIHJldHVybiAkcGFyc2UoZXhwcikodGhpcywgbG9jYWxzKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZXZhbEFzeW5jXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gb24gdGhlIGN1cnJlbnQgc2NvcGUgYXQgYSBsYXRlciBwb2ludCBpbiB0aW1lLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBgJGV2YWxBc3luY2AgbWFrZXMgbm8gZ3VhcmFudGVlcyBhcyB0byB3aGVuIHRoZSBgZXhwcmVzc2lvbmAgd2lsbCBiZSBleGVjdXRlZCwgb25seVxuICAgICAgICogdGhhdDpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gaXQgd2lsbCBleGVjdXRlIGFmdGVyIHRoZSBmdW5jdGlvbiB0aGF0IHNjaGVkdWxlZCB0aGUgZXZhbHVhdGlvbiAocHJlZmVyYWJseSBiZWZvcmUgRE9NXG4gICAgICAgKiAgICAgcmVuZGVyaW5nKS5cbiAgICAgICAqICAgLSBhdCBsZWFzdCBvbmUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0IGN5Y2xlfSB3aWxsIGJlIHBlcmZvcm1lZCBhZnRlclxuICAgICAgICogICAgIGBleHByZXNzaW9uYCBleGVjdXRpb24uXG4gICAgICAgKlxuICAgICAgICogQW55IGV4Y2VwdGlvbnMgZnJvbSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBleHByZXNzaW9uIGFyZSBmb3J3YXJkZWQgdG8gdGhlXG4gICAgICAgKiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKlxuICAgICAgICogX19Ob3RlOl9fIGlmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBgJGRpZ2VzdGAgY3ljbGUsIGEgbmV3IGAkZGlnZXN0YCBjeWNsZVxuICAgICAgICogd2lsbCBiZSBzY2hlZHVsZWQuIEhvd2V2ZXIsIGl0IGlzIGVuY291cmFnZWQgdG8gYWx3YXlzIGNhbGwgY29kZSB0aGF0IGNoYW5nZXMgdGhlIG1vZGVsXG4gICAgICAgKiBmcm9tIHdpdGhpbiBhbiBgJGFwcGx5YCBjYWxsLiBUaGF0IGluY2x1ZGVzIGNvZGUgZXZhbHVhdGVkIHZpYSBgJGV2YWxBc3luY2AuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwcmVzc2lvbiBBbiBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhvYmplY3QpPX0gbG9jYWxzIExvY2FsIHZhcmlhYmxlcyBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW4gc2NvcGUuXG4gICAgICAgKi9cbiAgICAgICRldmFsQXN5bmM6IGZ1bmN0aW9uKGV4cHIsIGxvY2Fscykge1xuICAgICAgICAvLyBpZiB3ZSBhcmUgb3V0c2lkZSBvZiBhbiAkZGlnZXN0IGxvb3AgYW5kIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgd2UgYXJlIHNjaGVkdWxpbmcgYXN5bmNcbiAgICAgICAgLy8gdGFzayBhbHNvIHNjaGVkdWxlIGFzeW5jIGF1dG8tZmx1c2hcbiAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UgJiYgIWFzeW5jUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoYXN5bmNRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luY1F1ZXVlLnB1c2goe3Njb3BlOiB0aGlzLCBmbjogJHBhcnNlKGV4cHIpLCBsb2NhbHM6IGxvY2Fsc30pO1xuICAgICAgfSxcblxuICAgICAgJCRwb3N0RGlnZXN0OiBmdW5jdGlvbihmbikge1xuICAgICAgICBwb3N0RGlnZXN0UXVldWUucHVzaChmbik7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGFwcGx5XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogYCRhcHBseSgpYCBpcyB1c2VkIHRvIGV4ZWN1dGUgYW4gZXhwcmVzc2lvbiBpbiBBbmd1bGFySlMgZnJvbSBvdXRzaWRlIG9mIHRoZSBBbmd1bGFySlNcbiAgICAgICAqIGZyYW1ld29yay4gKEZvciBleGFtcGxlIGZyb20gYnJvd3NlciBET00gZXZlbnRzLCBzZXRUaW1lb3V0LCBYSFIgb3IgdGhpcmQgcGFydHkgbGlicmFyaWVzKS5cbiAgICAgICAqIEJlY2F1c2Ugd2UgYXJlIGNhbGxpbmcgaW50byB0aGUgQW5ndWxhckpTIGZyYW1ld29yayB3ZSBuZWVkIHRvIHBlcmZvcm0gcHJvcGVyIHNjb3BlIGxpZmVcbiAgICAgICAqIGN5Y2xlIG9mIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciBleGNlcHRpb24gaGFuZGxpbmd9LFxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCBleGVjdXRpbmcgd2F0Y2hlc30uXG4gICAgICAgKlxuICAgICAgICogKipMaWZlIGN5Y2xlOiBQc2V1ZG8tQ29kZSBvZiBgJGFwcGx5KClgKipcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICBmdW5jdGlvbiAkYXBwbHkoZXhwcikge1xuICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICByZXR1cm4gJGV2YWwoZXhwcik7XG4gICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICRyb290LiRkaWdlc3QoKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgIH1cbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBTY29wZSdzIGAkYXBwbHkoKWAgbWV0aG9kIHRyYW5zaXRpb25zIHRocm91Z2ggdGhlIGZvbGxvd2luZyBzdGFnZXM6XG4gICAgICAgKlxuICAgICAgICogMS4gVGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIGV4ZWN1dGVkIHVzaW5nIHRoZVxuICAgICAgICogICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWwgJGV2YWwoKX0gbWV0aG9kLlxuICAgICAgICogMi4gQW55IGV4Y2VwdGlvbnMgZnJvbSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBleHByZXNzaW9uIGFyZSBmb3J3YXJkZWQgdG8gdGhlXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKiAzLiBUaGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNofSBsaXN0ZW5lcnMgYXJlIGZpcmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZVxuICAgICAgICogICAgZXhwcmVzc2lvbiB3YXMgZXhlY3V0ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBtZXRob2QuXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cCBBbiBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb24uXG4gICAgICAgKi9cbiAgICAgICRhcHBseTogZnVuY3Rpb24oZXhwcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGJlZ2luUGhhc2UoJyRhcHBseScpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kZXZhbChleHByKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgY2xlYXJQaGFzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnNhZmUtZmluYWxseVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luY1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFNjaGVkdWxlIHRoZSBpbnZvY2F0aW9uIG9mICRhcHBseSB0byBvY2N1ciBhdCBhIGxhdGVyIHRpbWUuIFRoZSBhY3R1YWwgdGltZSBkaWZmZXJlbmNlXG4gICAgICAgKiB2YXJpZXMgYWNyb3NzIGJyb3dzZXJzLCBidXQgaXMgdHlwaWNhbGx5IGFyb3VuZCB+MTAgbWlsbGlzZWNvbmRzLlxuICAgICAgICpcbiAgICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gcXVldWUgdXAgbXVsdGlwbGUgZXhwcmVzc2lvbnMgd2hpY2ggbmVlZCB0byBiZSBldmFsdWF0ZWQgaW4gdGhlIHNhbWVcbiAgICAgICAqIGRpZ2VzdC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHAgQW4gQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICAgKlxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgJGFwcGx5QXN5bmM6IGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICAgICAgaWYgKGV4cHIpIHtcbiAgICAgICAgICBhcHBseUFzeW5jUXVldWUucHVzaCgkYXBwbHlBc3luY0V4cHJlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGV4cHIgPSAkcGFyc2UoZXhwcik7XG4gICAgICAgIHNjaGVkdWxlQXBwbHlBc3luYygpO1xuXG4gICAgICAgIGZ1bmN0aW9uICRhcHBseUFzeW5jRXhwcmVzc2lvbigpIHtcbiAgICAgICAgICBzY29wZS4kZXZhbChleHByKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRvblxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIExpc3RlbnMgb24gZXZlbnRzIG9mIGEgZ2l2ZW4gdHlwZS4gU2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRlbWl0ICRlbWl0fSBmb3JcbiAgICAgICAqIGRpc2N1c3Npb24gb2YgZXZlbnQgbGlmZSBjeWNsZS5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb24gZm9ybWF0IGlzOiBgZnVuY3Rpb24oZXZlbnQsIGFyZ3MuLi4pYC4gVGhlIGBldmVudGAgb2JqZWN0XG4gICAgICAgKiBwYXNzZWQgaW50byB0aGUgbGlzdGVuZXIgaGFzIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gYHRhcmdldFNjb3BlYCAtIGB7U2NvcGV9YDogdGhlIHNjb3BlIG9uIHdoaWNoIHRoZSBldmVudCB3YXMgYCRlbWl0YC1lZCBvclxuICAgICAgICogICAgIGAkYnJvYWRjYXN0YC1lZC5cbiAgICAgICAqICAgLSBgY3VycmVudFNjb3BlYCAtIGB7U2NvcGV9YDogdGhlIHNjb3BlIHRoYXQgaXMgY3VycmVudGx5IGhhbmRsaW5nIHRoZSBldmVudC4gT25jZSB0aGVcbiAgICAgICAqICAgICBldmVudCBwcm9wYWdhdGVzIHRocm91Z2ggdGhlIHNjb3BlIGhpZXJhcmNoeSwgdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gbnVsbC5cbiAgICAgICAqICAgLSBgbmFtZWAgLSBge3N0cmluZ31gOiBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgICAqICAgLSBgc3RvcFByb3BhZ2F0aW9uYCAtIGB7ZnVuY3Rpb249fWA6IGNhbGxpbmcgYHN0b3BQcm9wYWdhdGlvbmAgZnVuY3Rpb24gd2lsbCBjYW5jZWxcbiAgICAgICAqICAgICBmdXJ0aGVyIGV2ZW50IHByb3BhZ2F0aW9uIChhdmFpbGFibGUgb25seSBmb3IgZXZlbnRzIHRoYXQgd2VyZSBgJGVtaXRgLWVkKS5cbiAgICAgICAqICAgLSBgcHJldmVudERlZmF1bHRgIC0gYHtmdW5jdGlvbn1gOiBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgc2V0cyBgZGVmYXVsdFByZXZlbnRlZGAgZmxhZ1xuICAgICAgICogICAgIHRvIHRydWUuXG4gICAgICAgKiAgIC0gYGRlZmF1bHRQcmV2ZW50ZWRgIC0gYHtib29sZWFufWA6IHRydWUgaWYgYHByZXZlbnREZWZhdWx0YCB3YXMgY2FsbGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEV2ZW50IG5hbWUgdG8gbGlzdGVuIG9uLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudCwgLi4uYXJncyl9IGxpc3RlbmVyIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgKi9cbiAgICAgICRvbjogZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIG5hbWVkTGlzdGVuZXJzID0gdGhpcy4kJGxpc3RlbmVyc1tuYW1lXTtcbiAgICAgICAgaWYgKCFuYW1lZExpc3RlbmVycykge1xuICAgICAgICAgIHRoaXMuJCRsaXN0ZW5lcnNbbmFtZV0gPSBuYW1lZExpc3RlbmVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG5hbWVkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcztcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGlmICghY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0pIHtcbiAgICAgICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0rKztcbiAgICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaW5kZXhPZkxpc3RlbmVyID0gbmFtZWRMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgICAgaWYgKGluZGV4T2ZMaXN0ZW5lciAhPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIFVzZSBkZWxldGUgaW4gdGhlIGhvcGUgb2YgdGhlIGJyb3dzZXIgZGVhbGxvY2F0aW5nIHRoZSBtZW1vcnkgZm9yIHRoZSBhcnJheSBlbnRyeSxcbiAgICAgICAgICAgIC8vIHdoaWxlIG5vdCBzaGlmdGluZyB0aGUgYXJyYXkgaW5kZXhlcyBvZiBvdGhlciBsaXN0ZW5lcnMuXG4gICAgICAgICAgICAvLyBTZWUgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTYxMzVcbiAgICAgICAgICAgIGRlbGV0ZSBuYW1lZExpc3RlbmVyc1tpbmRleE9mTGlzdGVuZXJdO1xuICAgICAgICAgICAgZGVjcmVtZW50TGlzdGVuZXJDb3VudChzZWxmLCAxLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZW1pdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYG5hbWVgIHVwd2FyZHMgdGhyb3VnaCB0aGUgc2NvcGUgaGllcmFyY2h5IG5vdGlmeWluZyB0aGVcbiAgICAgICAqIHJlZ2lzdGVyZWQge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBsaXN0ZW5lcnMuXG4gICAgICAgKlxuICAgICAgICogVGhlIGV2ZW50IGxpZmUgY3ljbGUgc3RhcnRzIGF0IHRoZSBzY29wZSBvbiB3aGljaCBgJGVtaXRgIHdhcyBjYWxsZWQuIEFsbFxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gbGlzdGVuaW5nIGZvciBgbmFtZWAgZXZlbnQgb24gdGhpcyBzY29wZSBnZXRcbiAgICAgICAqIG5vdGlmaWVkLiBBZnRlcndhcmRzLCB0aGUgZXZlbnQgdHJhdmVyc2VzIHVwd2FyZHMgdG93YXJkIHRoZSByb290IHNjb3BlIGFuZCBjYWxscyBhbGxcbiAgICAgICAqIHJlZ2lzdGVyZWQgbGlzdGVuZXJzIGFsb25nIHRoZSB3YXkuIFRoZSBldmVudCB3aWxsIHN0b3AgcHJvcGFnYXRpbmcgaWYgb25lIG9mIHRoZSBsaXN0ZW5lcnNcbiAgICAgICAqIGNhbmNlbHMgaXQuXG4gICAgICAgKlxuICAgICAgICogQW55IGV4Y2VwdGlvbiBlbWl0dGVkIGZyb20gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IHdpbGwgYmUgcGFzc2VkXG4gICAgICAgKiBvbnRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXZlbnQgbmFtZSB0byBlbWl0LlxuICAgICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIG9uZSBvciBtb3JlIGFyZ3VtZW50cyB3aGljaCB3aWxsIGJlIHBhc3NlZCBvbnRvIHRoZSBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEV2ZW50IG9iamVjdCAoc2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0pLlxuICAgICAgICovXG4gICAgICAkZW1pdDogZnVuY3Rpb24obmFtZSwgYXJncykge1xuICAgICAgICB2YXIgZW1wdHkgPSBbXSxcbiAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzLFxuICAgICAgICAgICAgc2NvcGUgPSB0aGlzLFxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0U2NvcGU6IHNjb3BlLFxuICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge3N0b3BQcm9wYWdhdGlvbiA9IHRydWU7fSxcbiAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpc3RlbmVyQXJncyA9IGNvbmNhdChbZXZlbnRdLCBhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgaSwgbGVuZ3RoO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBuYW1lZExpc3RlbmVycyA9IHNjb3BlLiQkbGlzdGVuZXJzW25hbWVdIHx8IGVtcHR5O1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IHNjb3BlO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG5hbWVkTGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIC8vIGlmIGxpc3RlbmVycyB3ZXJlIGRlcmVnaXN0ZXJlZCwgZGVmcmFnbWVudCB0aGUgYXJyYXlcbiAgICAgICAgICAgIGlmICghbmFtZWRMaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgIGxlbmd0aC0tO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vYWxsb3cgYWxsIGxpc3RlbmVycyBhdHRhY2hlZCB0byB0aGUgY3VycmVudCBzY29wZSB0byBydW5cbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgbGlzdGVuZXJBcmdzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vaWYgYW55IGxpc3RlbmVyIG9uIHRoZSBjdXJyZW50IHNjb3BlIHN0b3BzIHByb3BhZ2F0aW9uLCBwcmV2ZW50IGJ1YmJsaW5nXG4gICAgICAgICAgaWYgKHN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vdHJhdmVyc2UgdXB3YXJkc1xuICAgICAgICAgIHNjb3BlID0gc2NvcGUuJHBhcmVudDtcbiAgICAgICAgfSB3aGlsZSAoc2NvcGUpO1xuXG4gICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfSxcblxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGJyb2FkY2FzdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYG5hbWVgIGRvd253YXJkcyB0byBhbGwgY2hpbGQgc2NvcGVzIChhbmQgdGhlaXIgY2hpbGRyZW4pIG5vdGlmeWluZyB0aGVcbiAgICAgICAqIHJlZ2lzdGVyZWQge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBsaXN0ZW5lcnMuXG4gICAgICAgKlxuICAgICAgICogVGhlIGV2ZW50IGxpZmUgY3ljbGUgc3RhcnRzIGF0IHRoZSBzY29wZSBvbiB3aGljaCBgJGJyb2FkY2FzdGAgd2FzIGNhbGxlZC4gQWxsXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb24gbGlzdGVuZXJzfSBsaXN0ZW5pbmcgZm9yIGBuYW1lYCBldmVudCBvbiB0aGlzIHNjb3BlIGdldFxuICAgICAgICogbm90aWZpZWQuIEFmdGVyd2FyZHMsIHRoZSBldmVudCBwcm9wYWdhdGVzIHRvIGFsbCBkaXJlY3QgYW5kIGluZGlyZWN0IHNjb3BlcyBvZiB0aGUgY3VycmVudFxuICAgICAgICogc2NvcGUgYW5kIGNhbGxzIGFsbCByZWdpc3RlcmVkIGxpc3RlbmVycyBhbG9uZyB0aGUgd2F5LiBUaGUgZXZlbnQgY2Fubm90IGJlIGNhbmNlbGVkLlxuICAgICAgICpcbiAgICAgICAqIEFueSBleGNlcHRpb24gZW1pdHRlZCBmcm9tIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb24gbGlzdGVuZXJzfSB3aWxsIGJlIHBhc3NlZFxuICAgICAgICogb250byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEV2ZW50IG5hbWUgdG8gYnJvYWRjYXN0LlxuICAgICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIG9uZSBvciBtb3JlIGFyZ3VtZW50cyB3aGljaCB3aWxsIGJlIHBhc3NlZCBvbnRvIHRoZSBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEV2ZW50IG9iamVjdCwgc2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn1cbiAgICAgICAqL1xuICAgICAgJGJyb2FkY2FzdDogZnVuY3Rpb24obmFtZSwgYXJncykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcyxcbiAgICAgICAgICAgIGN1cnJlbnQgPSB0YXJnZXQsXG4gICAgICAgICAgICBuZXh0ID0gdGFyZ2V0LFxuICAgICAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIHRhcmdldFNjb3BlOiB0YXJnZXQsXG4gICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBldmVudC5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGVmYXVsdFByZXZlbnRlZDogZmFsc2VcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgaWYgKCF0YXJnZXQuJCRsaXN0ZW5lckNvdW50W25hbWVdKSByZXR1cm4gZXZlbnQ7XG5cbiAgICAgICAgdmFyIGxpc3RlbmVyQXJncyA9IGNvbmNhdChbZXZlbnRdLCBhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgbGlzdGVuZXJzLCBpLCBsZW5ndGg7XG5cbiAgICAgICAgLy9kb3duIHdoaWxlIHlvdSBjYW4sIHRoZW4gdXAgYW5kIG5leHQgc2libGluZyBvciB1cCBhbmQgbmV4dCBzaWJsaW5nIHVudGlsIGJhY2sgYXQgcm9vdFxuICAgICAgICB3aGlsZSAoKGN1cnJlbnQgPSBuZXh0KSkge1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IGN1cnJlbnQ7XG4gICAgICAgICAgbGlzdGVuZXJzID0gY3VycmVudC4kJGxpc3RlbmVyc1tuYW1lXSB8fCBbXTtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIGlmIGxpc3RlbmVycyB3ZXJlIGRlcmVnaXN0ZXJlZCwgZGVmcmFnbWVudCB0aGUgYXJyYXlcbiAgICAgICAgICAgIGlmICghbGlzdGVuZXJzW2ldKSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgbGlzdGVuZXJBcmdzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSW5zYW5pdHkgV2FybmluZzogc2NvcGUgZGVwdGgtZmlyc3QgdHJhdmVyc2FsXG4gICAgICAgICAgLy8geWVzLCB0aGlzIGNvZGUgaXMgYSBiaXQgY3JhenksIGJ1dCBpdCB3b3JrcyBhbmQgd2UgaGF2ZSB0ZXN0cyB0byBwcm92ZSBpdCFcbiAgICAgICAgICAvLyB0aGlzIHBpZWNlIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgdHJhdmVyc2FsIGluICRkaWdlc3RcbiAgICAgICAgICAvLyAodGhvdWdoIGl0IGRpZmZlcnMgZHVlIHRvIGhhdmluZyB0aGUgZXh0cmEgY2hlY2sgZm9yICQkbGlzdGVuZXJDb3VudCBhbmRcbiAgICAgICAgICAvLyBkb2VzIG5vdCBjaGVjayAkJHN1c3BlbmRlZClcbiAgICAgICAgICBpZiAoIShuZXh0ID0gKChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSAmJiBjdXJyZW50LiQkY2hpbGRIZWFkKSB8fFxuICAgICAgICAgICAgICAoY3VycmVudCAhPT0gdGFyZ2V0ICYmIGN1cnJlbnQuJCRuZXh0U2libGluZykpKSkge1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IHRhcmdldCAmJiAhKG5leHQgPSBjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgJHJvb3RTY29wZSA9IG5ldyBTY29wZSgpO1xuXG4gICAgLy9UaGUgaW50ZXJuYWwgcXVldWVzLiBFeHBvc2UgdGhlbSBvbiB0aGUgJHJvb3RTY29wZSBmb3IgZGVidWdnaW5nL3Rlc3RpbmcgcHVycG9zZXMuXG4gICAgdmFyIGFzeW5jUXVldWUgPSAkcm9vdFNjb3BlLiQkYXN5bmNRdWV1ZSA9IFtdO1xuICAgIHZhciBwb3N0RGlnZXN0UXVldWUgPSAkcm9vdFNjb3BlLiQkcG9zdERpZ2VzdFF1ZXVlID0gW107XG4gICAgdmFyIGFwcGx5QXN5bmNRdWV1ZSA9ICRyb290U2NvcGUuJCRhcHBseUFzeW5jUXVldWUgPSBbXTtcblxuICAgIHZhciBwb3N0RGlnZXN0UXVldWVQb3NpdGlvbiA9IDA7XG5cbiAgICByZXR1cm4gJHJvb3RTY29wZTtcblxuXG4gICAgZnVuY3Rpb24gYmVnaW5QaGFzZShwaGFzZSkge1xuICAgICAgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xuICAgICAgICB0aHJvdyAkcm9vdFNjb3BlTWluRXJyKCdpbnByb2cnLCAnezB9IGFscmVhZHkgaW4gcHJvZ3Jlc3MnLCAkcm9vdFNjb3BlLiQkcGhhc2UpO1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiQkcGhhc2UgPSBwaGFzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhclBoYXNlKCkge1xuICAgICAgJHJvb3RTY29wZS4kJHBoYXNlID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbmNyZW1lbnRXYXRjaGVyc0NvdW50KGN1cnJlbnQsIGNvdW50KSB7XG4gICAgICBkbyB7XG4gICAgICAgIGN1cnJlbnQuJCR3YXRjaGVyc0NvdW50ICs9IGNvdW50O1xuICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWNyZW1lbnRMaXN0ZW5lckNvdW50KGN1cnJlbnQsIGNvdW50LCBuYW1lKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdIC09IGNvdW50O1xuXG4gICAgICAgIGlmIChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSA9PT0gMCkge1xuICAgICAgICAgIGRlbGV0ZSBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB1c2VkIGFzIGFuIGluaXRpYWwgdmFsdWUgZm9yIHdhdGNoZXJzLlxuICAgICAqIGJlY2F1c2UgaXQncyB1bmlxdWUgd2UgY2FuIGVhc2lseSB0ZWxsIGl0IGFwYXJ0IGZyb20gb3RoZXIgdmFsdWVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdFdhdGNoVmFsKCkge31cblxuICAgIGZ1bmN0aW9uIGZsdXNoQXBwbHlBc3luYygpIHtcbiAgICAgIHdoaWxlIChhcHBseUFzeW5jUXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXBwbHlBc3luY1F1ZXVlLnNoaWZ0KCkoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhcHBseUFzeW5jSWQgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlQXBwbHlBc3luYygpIHtcbiAgICAgIGlmIChhcHBseUFzeW5jSWQgPT09IG51bGwpIHtcbiAgICAgICAgYXBwbHlBc3luY0lkID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZmx1c2hBcHBseUFzeW5jKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHJvb3RFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgcm9vdCBlbGVtZW50IG9mIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi4gVGhpcyBpcyBlaXRoZXIgdGhlIGVsZW1lbnQgd2hlcmUge0BsaW5rXG4gKiBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9IHdhcyBkZWNsYXJlZCBvciB0aGUgZWxlbWVudCBwYXNzZWQgaW50b1xuICoge0BsaW5rIGFuZ3VsYXIuYm9vdHN0cmFwfS4gVGhlIGVsZW1lbnQgcmVwcmVzZW50cyB0aGUgcm9vdCBlbGVtZW50IG9mIGFwcGxpY2F0aW9uLiBJdCBpcyBhbHNvIHRoZVxuICogbG9jYXRpb24gd2hlcmUgdGhlIGFwcGxpY2F0aW9uJ3Mge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0gc2VydmljZSBnZXRzXG4gKiBwdWJsaXNoZWQsIGFuZCBjYW4gYmUgcmV0cmlldmVkIHVzaW5nIGAkcm9vdEVsZW1lbnQuaW5qZWN0b3IoKWAuXG4gKi9cblxuXG4vLyB0aGUgaW1wbGVtZW50YXRpb24gaXMgaW4gYW5ndWxhci5ib290c3RyYXBcblxuLyoqXG4gKiBAdGhpc1xuICogQGRlc2NyaXB0aW9uXG4gKiBQcml2YXRlIHNlcnZpY2UgdG8gc2FuaXRpemUgdXJpcyBmb3IgbGlua3MgYW5kIGltYWdlcy4gVXNlZCBieSAkY29tcGlsZSBhbmQgJHNhbml0aXplLlxuICovXG5mdW5jdGlvbiAkJFNhbml0aXplVXJpUHJvdmlkZXIoKSB7XG5cbiAgdmFyIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gL15cXHMqKGh0dHBzP3xzP2Z0cHxtYWlsdG98dGVsfGZpbGUpOi8sXG4gICAgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gL15cXHMqKChodHRwcz98ZnRwfGZpbGV8YmxvYik6fGRhdGE6aW1hZ2VcXC8pLztcblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgYVtocmVmXSBzYW5pdGl6YXRpb24uXG4gICAqXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnQgWFNTIGF0dGFja3MgdmlhIEhUTUwgYW5jaG9yIGxpbmtzLlxuICAgKlxuICAgKiBBbnkgdXJsIGR1ZSB0byBiZSBhc3NpZ25lZCB0byBhbiBgYVtocmVmXWAgYXR0cmlidXRlIHZpYSBpbnRlcnBvbGF0aW9uIGlzIG1hcmtlZCBhcyByZXF1aXJpbmdcbiAgICogdGhlICRzY2UuVVJMIHNlY3VyaXR5IGNvbnRleHQuIFdoZW4gaW50ZXJwb2xhdGlvbiBvY2N1cnMgYSBjYWxsIGlzIG1hZGUgdG8gYCRzY2UudHJ1c3RBc1VybCh1cmwpYFxuICAgKiB3aGljaCBpbiB0dXJuIG1heSBjYWxsIGAkJHNhbml0aXplVXJpKHVybCwgaXNNZWRpYSlgIHRvIHNhbml0aXplIHRoZSBwb3RlbnRpYWxseSBtYWxpY2lvdXMgVVJMLlxuICAgKlxuICAgKiBJZiB0aGUgVVJMIG1hdGNoZXMgdGhlIGBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdGAgcmVndWxhciBleHByZXNzaW9uLCBpdCBpcyByZXR1cm5lZCB1bmNoYW5nZWQuXG4gICAqXG4gICAqIElmIHRoZXJlIGlzIG5vIG1hdGNoIHRoZSBVUkwgaXMgcmV0dXJuZWQgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCB0byBlbnN1cmUgdGhhdCB3aGVuIGl0IGlzIHdyaXR0ZW5cbiAgICogdG8gdGhlIERPTSBpdCBpcyBpbmFjdGl2ZSBhbmQgcG90ZW50aWFsbHkgbWFsaWNpb3VzIGNvZGUgd2lsbCBub3QgYmUgZXhlY3V0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XG4gICAgICBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IHJlZ2V4cDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gIH07XG5cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxuICAgKlxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBIVE1MIGltYWdlIHNyYyBsaW5rcy5cbiAgICpcbiAgICogQW55IFVSTCBkdWUgdG8gYmUgYXNzaWduZWQgdG8gYW4gYGltZ1tzcmNdYCBhdHRyaWJ1dGUgdmlhIGludGVycG9sYXRpb24gaXMgbWFya2VkIGFzIHJlcXVpcmluZ1xuICAgKiB0aGUgJHNjZS5NRURJQV9VUkwgc2VjdXJpdHkgY29udGV4dC4gV2hlbiBpbnRlcnBvbGF0aW9uIG9jY3VycyBhIGNhbGwgaXMgbWFkZSB0b1xuICAgKiBgJHNjZS50cnVzdEFzTWVkaWFVcmwodXJsKWAgd2hpY2ggaW4gdHVybiBtYXkgY2FsbCBgJCRzYW5pdGl6ZVVyaSh1cmwsIGlzTWVkaWEpYCB0byBzYW5pdGl6ZVxuICAgKiB0aGUgcG90ZW50aWFsbHkgbWFsaWNpb3VzIFVSTC5cbiAgICpcbiAgICogSWYgdGhlIFVSTCBtYXRjaGVzIHRoZSBgYUltZ1Nhbml0aXphdGlvbldoaXRlbGlzdGAgcmVndWxhciBleHByZXNzaW9uLCBpdCBpcyByZXR1cm5lZCB1bmNoYW5nZWQuXG4gICAqXG4gICAqIElmIHRoZXJlIGlzIG5vIG1hdGNoIHRoZSBVUkwgaXMgcmV0dXJuZWQgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCB0byBlbnN1cmUgdGhhdCB3aGVuIGl0IGlzIHdyaXR0ZW5cbiAgICogdG8gdGhlIERPTSBpdCBpcyBpbmFjdGl2ZSBhbmQgcG90ZW50aWFsbHkgbWFsaWNpb3VzIGNvZGUgd2lsbCBub3QgYmUgZXhlY3V0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xuICAgICAgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gcmVnZXhwO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHNhbml0aXplVXJpKHVyaSwgaXNNZWRpYVVybCkge1xuICAgICAgLy8gaWYgKCF1cmkpIHJldHVybiB1cmk7XG4gICAgICB2YXIgcmVnZXggPSBpc01lZGlhVXJsID8gaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0IDogYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gICAgICB2YXIgbm9ybWFsaXplZFZhbCA9IHVybFJlc29sdmUodXJpICYmIHVyaS50cmltKCkpLmhyZWY7XG4gICAgICBpZiAobm9ybWFsaXplZFZhbCAhPT0gJycgJiYgIW5vcm1hbGl6ZWRWYWwubWF0Y2gocmVnZXgpKSB7XG4gICAgICAgIHJldHVybiAndW5zYWZlOicgKyBub3JtYWxpemVkVmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVyaTtcbiAgICB9O1xuICB9O1xufVxuXG4vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqXG4gKiAgICAgQW55IGNvbW1pdHMgdG8gdGhpcyBmaWxlIHNob3VsZCBiZSByZXZpZXdlZCB3aXRoIHNlY3VyaXR5IGluIG1pbmQuICAqXG4gKiAgIENoYW5nZXMgdG8gdGhpcyBmaWxlIGNhbiBwb3RlbnRpYWxseSBjcmVhdGUgc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzLiAqXG4gKiAgICAgICAgICBBbiBhcHByb3ZhbCBmcm9tIDIgQ29yZSBtZW1iZXJzIHdpdGggaGlzdG9yeSBvZiBtb2RpZnlpbmcgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIGZpbGUgaXMgcmVxdWlyZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgRG9lcyB0aGUgY2hhbmdlIHNvbWVob3cgYWxsb3cgZm9yIGFyYml0cmFyeSBqYXZhc2NyaXB0IHRvIGJlIGV4ZWN1dGVkPyAqXG4gKiAgICBPciBhbGxvd3MgZm9yIHNvbWVvbmUgdG8gY2hhbmdlIHRoZSBwcm90b3R5cGUgb2YgYnVpbHQtaW4gb2JqZWN0cz8gICAqXG4gKiAgICAgT3IgZ2l2ZXMgdW5kZXNpcmVkIGFjY2VzcyB0byB2YXJpYWJsZXMgbGlrZXMgZG9jdW1lbnQgb3Igd2luZG93PyAgICAqXG4gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqL1xuXG4vKiBleHBvcnRlZCAkU2NlUHJvdmlkZXIsICRTY2VEZWxlZ2F0ZVByb3ZpZGVyICovXG5cbnZhciAkc2NlTWluRXJyID0gbWluRXJyKCckc2NlJyk7XG5cbnZhciBTQ0VfQ09OVEVYVFMgPSB7XG4gIC8vIEhUTUwgaXMgdXNlZCB3aGVuIHRoZXJlJ3MgSFRNTCByZW5kZXJlZCAoZS5nLiBuZy1iaW5kLWh0bWwsIGlmcmFtZSBzcmNkb2MgYmluZGluZykuXG4gIEhUTUw6ICdodG1sJyxcblxuICAvLyBTdHlsZSBzdGF0ZW1lbnRzIG9yIHN0eWxlc2hlZXRzLiBDdXJyZW50bHkgdW51c2VkIGluIEFuZ3VsYXJKUy5cbiAgQ1NTOiAnY3NzJyxcblxuICAvLyBBbiBVUkwgdXNlZCBpbiBhIGNvbnRleHQgd2hlcmUgaXQgcmVmZXJzIHRvIHRoZSBzb3VyY2Ugb2YgbWVkaWEsIHdoaWNoIGFyZSBub3QgZXhwZWN0ZWQgdG8gYmUgcnVuXG4gIC8vIGFzIHNjcmlwdHMsIHN1Y2ggYXMgYW4gaW1hZ2UsIGF1ZGlvLCB2aWRlbywgZXRjLlxuICBNRURJQV9VUkw6ICdtZWRpYVVybCcsXG5cbiAgLy8gQW4gVVJMIHVzZWQgaW4gYSBjb250ZXh0IHdoZXJlIGl0IGRvZXMgbm90IHJlZmVyIHRvIGEgcmVzb3VyY2UgdGhhdCBsb2FkcyBjb2RlLlxuICAvLyBBIHZhbHVlIHRoYXQgY2FuIGJlIHRydXN0ZWQgYXMgYSBVUkwgY2FuIGFsc28gdHJ1c3RlZCBhcyBhIE1FRElBX1VSTC5cbiAgVVJMOiAndXJsJyxcblxuICAvLyBSRVNPVVJDRV9VUkwgaXMgYSBzdWJ0eXBlIG9mIFVSTCB1c2VkIHdoZXJlIHRoZSByZWZlcnJlZC10byByZXNvdXJjZSBjb3VsZCBiZSBpbnRlcnByZXRlZCBhc1xuICAvLyBjb2RlLiAoZS5nLiBuZy1pbmNsdWRlLCBzY3JpcHQgc3JjIGJpbmRpbmcsIHRlbXBsYXRlVXJsKVxuICAvLyBBIHZhbHVlIHRoYXQgY2FuIGJlIHRydXN0ZWQgYXMgYSBSRVNPVVJDRV9VUkwsIGNhbiBhbHNvIHRydXN0ZWQgYXMgYSBVUkwgYW5kIGEgTUVESUFfVVJMLlxuICBSRVNPVVJDRV9VUkw6ICdyZXNvdXJjZVVybCcsXG5cbiAgLy8gU2NyaXB0LiBDdXJyZW50bHkgdW51c2VkIGluIEFuZ3VsYXJKUy5cbiAgSlM6ICdqcydcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9sbG93LlxuXG52YXIgVU5ERVJTQ09SRV9MT1dFUkNBU0VfUkVHRVhQID0gL18oW2Etel0pL2c7XG5cbmZ1bmN0aW9uIHNuYWtlVG9DYW1lbChuYW1lKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoVU5ERVJTQ09SRV9MT1dFUkNBU0VfUkVHRVhQLCBmbkNhbWVsQ2FzZVJlcGxhY2UpO1xufVxuXG5mdW5jdGlvbiBhZGp1c3RNYXRjaGVyKG1hdGNoZXIpIHtcbiAgaWYgKG1hdGNoZXIgPT09ICdzZWxmJykge1xuICAgIHJldHVybiBtYXRjaGVyO1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKG1hdGNoZXIpKSB7XG4gICAgLy8gU3RyaW5ncyBtYXRjaCBleGFjdGx5IGV4Y2VwdCBmb3IgMiB3aWxkY2FyZHMgLSAnKicgYW5kICcqKicuXG4gICAgLy8gJyonIG1hdGNoZXMgYW55IGNoYXJhY3RlciBleGNlcHQgdGhvc2UgZnJvbSB0aGUgc2V0ICc6Ly4/JicuXG4gICAgLy8gJyoqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgKGxpa2UgLiogaW4gYSBSZWdFeHApLlxuICAgIC8vIE1vcmUgdGhhbiAyIConcyByYWlzZXMgYW4gZXJyb3IgYXMgaXQncyBpbGwgZGVmaW5lZC5cbiAgICBpZiAobWF0Y2hlci5pbmRleE9mKCcqKionKSA+IC0xKSB7XG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpd2NhcmQnLFxuICAgICAgICAgICdJbGxlZ2FsIHNlcXVlbmNlICoqKiBpbiBzdHJpbmcgbWF0Y2hlci4gIFN0cmluZzogezB9JywgbWF0Y2hlcik7XG4gICAgfVxuICAgIG1hdGNoZXIgPSBlc2NhcGVGb3JSZWdleHAobWF0Y2hlcikuXG4gICAgICAgICAgICAgICAgICByZXBsYWNlKC9cXFxcXFwqXFxcXFxcKi9nLCAnLionKS5cbiAgICAgICAgICAgICAgICAgIHJlcGxhY2UoL1xcXFxcXCovZywgJ1teOi8uPyY7XSonKTtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBtYXRjaGVyICsgJyQnKTtcbiAgfSBlbHNlIGlmIChpc1JlZ0V4cChtYXRjaGVyKSkge1xuICAgIC8vIFRoZSBvbmx5IG90aGVyIHR5cGUgb2YgbWF0Y2hlciBhbGxvd2VkIGlzIGEgUmVnZXhwLlxuICAgIC8vIE1hdGNoIGVudGlyZSBVUkwgLyBkaXNhbGxvdyBwYXJ0aWFsIG1hdGNoZXMuXG4gICAgLy8gRmxhZ3MgYXJlIHJlc2V0IChpLmUuIG5vIGdsb2JhbCwgaWdub3JlQ2FzZSBvciBtdWx0aWxpbmUpXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgbWF0Y2hlci5zb3VyY2UgKyAnJCcpO1xuICB9IGVsc2Uge1xuICAgIHRocm93ICRzY2VNaW5FcnIoJ2ltYXRjaGVyJyxcbiAgICAgICAgJ01hdGNoZXJzIG1heSBvbmx5IGJlIFwic2VsZlwiLCBzdHJpbmcgcGF0dGVybnMgb3IgUmVnRXhwIG9iamVjdHMnKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGFkanVzdE1hdGNoZXJzKG1hdGNoZXJzKSB7XG4gIHZhciBhZGp1c3RlZE1hdGNoZXJzID0gW107XG4gIGlmIChpc0RlZmluZWQobWF0Y2hlcnMpKSB7XG4gICAgZm9yRWFjaChtYXRjaGVycywgZnVuY3Rpb24obWF0Y2hlcikge1xuICAgICAgYWRqdXN0ZWRNYXRjaGVycy5wdXNoKGFkanVzdE1hdGNoZXIobWF0Y2hlcikpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBhZGp1c3RlZE1hdGNoZXJzO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRzY2VEZWxlZ2F0ZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgJHNjZURlbGVnYXRlYCBpcyBhIHNlcnZpY2UgdGhhdCBpcyB1c2VkIGJ5IHRoZSBgJHNjZWAgc2VydmljZSB0byBwcm92aWRlIHtAbGluayBuZy4kc2NlIFN0cmljdFxuICogQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0gc2VydmljZXMgdG8gQW5ndWxhckpTLlxuICpcbiAqIEZvciBhbiBvdmVydmlldyBvZiB0aGlzIHNlcnZpY2UgYW5kIHRoZSBmdW5jdGlvbm5hbGl0eSBpdCBwcm92aWRlcyBpbiBBbmd1bGFySlMsIHNlZSB0aGUgbWFpblxuICogcGFnZSBmb3Ige0BsaW5rIG5nLiRzY2UgU0NFfS4gVGhlIGN1cnJlbnQgcGFnZSBpcyB0YXJnZXRlZCBmb3IgZGV2ZWxvcGVycyB3aG8gbmVlZCB0byBhbHRlciBob3dcbiAqIFNDRSB3b3JrcyBpbiB0aGVpciBhcHBsaWNhdGlvbiwgd2hpY2ggc2hvdWxkbid0IGJlIG5lZWRlZCBpbiBtb3N0IGNhc2VzLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqIEFuZ3VsYXJKUyBzdHJvbmdseSByZWxpZXMgb24gY29udGV4dHVhbCBlc2NhcGluZyBmb3IgdGhlIHNlY3VyaXR5IG9mIGJpbmRpbmdzOiBkaXNhYmxpbmcgb3JcbiAqIG1vZGlmeWluZyB0aGlzIG1pZ2h0IGNhdXNlIGNyb3NzIHNpdGUgc2NyaXB0aW5nIChYU1MpIHZ1bG5lcmFiaWxpdGllcy4gRm9yIGxpYnJhcmllcyBvd25lcnMsXG4gKiBjaGFuZ2VzIHRvIHRoaXMgc2VydmljZSB3aWxsIGFsc28gaW5mbHVlbmNlIHVzZXJzLCBzbyBiZSBleHRyYSBjYXJlZnVsIGFuZCBkb2N1bWVudCB5b3VyIGNoYW5nZXMuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUeXBpY2FsbHksIHlvdSB3b3VsZCBjb25maWd1cmUgb3Igb3ZlcnJpZGUgdGhlIHtAbGluayBuZy4kc2NlRGVsZWdhdGUgJHNjZURlbGVnYXRlfSBpbnN0ZWFkIG9mXG4gKiB0aGUgYCRzY2VgIHNlcnZpY2UgdG8gY3VzdG9taXplIHRoZSB3YXkgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgd29ya3MgaW4gQW5ndWxhckpTLiAgVGhpcyBpc1xuICogYmVjYXVzZSwgd2hpbGUgdGhlIGAkc2NlYCBwcm92aWRlcyBudW1lcm91cyBzaG9ydGhhbmQgbWV0aG9kcywgZXRjLiwgeW91IHJlYWxseSBvbmx5IG5lZWQgdG9cbiAqIG92ZXJyaWRlIDMgY29yZSBmdW5jdGlvbnMgKGB0cnVzdEFzYCwgYGdldFRydXN0ZWRgIGFuZCBgdmFsdWVPZmApIHRvIHJlcGxhY2UgdGhlIHdheSB0aGluZ3NcbiAqIHdvcmsgYmVjYXVzZSBgJHNjZWAgZGVsZWdhdGVzIHRvIGAkc2NlRGVsZWdhdGVgIGZvciB0aGVzZSBvcGVyYXRpb25zLlxuICpcbiAqIFJlZmVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciAkc2NlRGVsZWdhdGVQcm92aWRlcn0gdG8gY29uZmlndXJlIHRoaXMgc2VydmljZS5cbiAqXG4gKiBUaGUgZGVmYXVsdCBpbnN0YW5jZSBvZiBgJHNjZURlbGVnYXRlYCBzaG91bGQgd29yayBvdXQgb2YgdGhlIGJveCB3aXRoIGxpdHRsZSBwYWluLiAgV2hpbGUgeW91XG4gKiBjYW4gb3ZlcnJpZGUgaXQgY29tcGxldGVseSB0byBjaGFuZ2UgdGhlIGJlaGF2aW9yIG9mIGAkc2NlYCwgdGhlIGNvbW1vbiBjYXNlIHdvdWxkXG4gKiBpbnZvbHZlIGNvbmZpZ3VyaW5nIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIgJHNjZURlbGVnYXRlUHJvdmlkZXJ9IGluc3RlYWQgYnkgc2V0dGluZ1xuICogeW91ciBvd24gd2hpdGVsaXN0cyBhbmQgYmxhY2tsaXN0cyBmb3IgdHJ1c3RpbmcgVVJMcyB1c2VkIGZvciBsb2FkaW5nIEFuZ3VsYXJKUyByZXNvdXJjZXMgc3VjaCBhc1xuICogdGVtcGxhdGVzLiAgUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0XG4gKiAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdH0gYW5kIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoZSBgJHNjZURlbGVnYXRlUHJvdmlkZXJgIHByb3ZpZGVyIGFsbG93cyBkZXZlbG9wZXJzIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVxuICogJHNjZURlbGVnYXRlIHNlcnZpY2V9LCB1c2VkIGFzIGEgZGVsZWdhdGUgZm9yIHtAbGluayBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqXG4gKiBUaGUgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyYCBhbGxvd3Mgb25lIHRvIGdldC9zZXQgdGhlIHdoaXRlbGlzdHMgYW5kIGJsYWNrbGlzdHMgdXNlZCB0byBlbnN1cmVcbiAqIHRoYXQgdGhlIFVSTHMgdXNlZCBmb3Igc291cmNpbmcgQW5ndWxhckpTIHRlbXBsYXRlcyBhbmQgb3RoZXIgc2NyaXB0LXJ1bm5pbmcgVVJMcyBhcmUgc2FmZSAoYWxsXG4gKiBwbGFjZXMgdGhhdCB1c2UgdGhlIGAkc2NlLlJFU09VUkNFX1VSTGAgY29udGV4dCkuIFNlZVxuICoge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0ICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0fVxuICogYW5kXG4gKiB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9LFxuICpcbiAqIEZvciB0aGUgZ2VuZXJhbCBkZXRhaWxzIGFib3V0IHRoaXMgc2VydmljZSBpbiBBbmd1bGFySlMsIHJlYWQgdGhlIG1haW4gcGFnZSBmb3Ige0BsaW5rIG5nLiRzY2VcbiAqIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqXG4gKiAqKkV4YW1wbGUqKjogIENvbnNpZGVyIHRoZSBmb2xsb3dpbmcgY2FzZS4gPGEgbmFtZT1cImV4YW1wbGVcIj48L2E+XG4gKlxuICogLSB5b3VyIGFwcCBpcyBob3N0ZWQgYXQgdXJsIGBodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vYFxuICogLSBidXQgc29tZSBvZiB5b3VyIHRlbXBsYXRlcyBhcmUgaG9zdGVkIG9uIG90aGVyIGRvbWFpbnMgeW91IGNvbnRyb2wgc3VjaCBhc1xuICogICBgaHR0cDovL3NydjAxLmFzc2V0cy5leGFtcGxlLmNvbS9gLCBgaHR0cDovL3NydjAyLmFzc2V0cy5leGFtcGxlLmNvbS9gLCBldGMuXG4gKiAtIGFuZCB5b3UgaGF2ZSBhbiBvcGVuIHJlZGlyZWN0IGF0IGBodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vY2xpY2tUaHJ1Py4uLmAuXG4gKlxuICogSGVyZSBpcyB3aGF0IGEgc2VjdXJlIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgc2NlbmFyaW8gbWlnaHQgbG9vayBsaWtlOlxuICpcbiAqIGBgYFxuICogIGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFtdKS5jb25maWcoZnVuY3Rpb24oJHNjZURlbGVnYXRlUHJvdmlkZXIpIHtcbiAqICAgICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0KFtcbiAqICAgICAgLy8gQWxsb3cgc2FtZSBvcmlnaW4gcmVzb3VyY2UgbG9hZHMuXG4gKiAgICAgICdzZWxmJyxcbiAqICAgICAgLy8gQWxsb3cgbG9hZGluZyBmcm9tIG91ciBhc3NldHMgZG9tYWluLiAgTm90aWNlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gKiBhbmQgKiouXG4gKiAgICAgICdodHRwOi8vc3J2Ki5hc3NldHMuZXhhbXBsZS5jb20vKionXG4gKiAgICBdKTtcbiAqXG4gKiAgICAvLyBUaGUgYmxhY2tsaXN0IG92ZXJyaWRlcyB0aGUgd2hpdGVsaXN0IHNvIHRoZSBvcGVuIHJlZGlyZWN0IGhlcmUgaXMgYmxvY2tlZC5cbiAqICAgICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsQmxhY2tsaXN0KFtcbiAqICAgICAgJ2h0dHA6Ly9teWFwcC5leGFtcGxlLmNvbS9jbGlja1RocnUqKidcbiAqICAgIF0pO1xuICogIH0pO1xuICogYGBgXG4gKiBOb3RlIHRoYXQgYW4gZW1wdHkgd2hpdGVsaXN0IHdpbGwgYmxvY2sgZXZlcnkgcmVzb3VyY2UgVVJMIGZyb20gYmVpbmcgbG9hZGVkLCBhbmQgd2lsbCByZXF1aXJlXG4gKiB5b3UgdG8gbWFudWFsbHkgbWFyayBlYWNoIG9uZSBhcyB0cnVzdGVkIHdpdGggYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsYC4gSG93ZXZlciwgdGVtcGxhdGVzXG4gKiByZXF1ZXN0ZWQgYnkge0BsaW5rIG5nLiR0ZW1wbGF0ZVJlcXVlc3QgJHRlbXBsYXRlUmVxdWVzdH0gdGhhdCBhcmUgcHJlc2VudCBpblxuICoge0BsaW5rIG5nLiR0ZW1wbGF0ZUNhY2hlICR0ZW1wbGF0ZUNhY2hlfSB3aWxsIG5vdCBnbyB0aHJvdWdoIHRoaXMgY2hlY2suIElmIHlvdSBoYXZlIGEgbWVjaGFuaXNtXG4gKiB0byBwb3B1bGF0ZSB5b3VyIHRlbXBsYXRlcyBpbiB0aGF0IGNhY2hlIGF0IGNvbmZpZyB0aW1lLCB0aGVuIGl0IGlzIGEgZ29vZCBpZGVhIHRvIHJlbW92ZSAnc2VsZidcbiAqIGZyb20gdGhhdCB3aGl0ZWxpc3QuIFRoaXMgaGVscHMgdG8gbWl0aWdhdGUgdGhlIHNlY3VyaXR5IGltcGFjdCBvZiBjZXJ0YWluIHR5cGVzIG9mIGlzc3VlcywgbGlrZVxuICogZm9yIGluc3RhbmNlIGF0dGFja2VyLWNvbnRyb2xsZWQgYG5nLWluY2x1ZGVzYC5cbiAqL1xuXG5mdW5jdGlvbiAkU2NlRGVsZWdhdGVQcm92aWRlcigpIHtcbiAgdGhpcy5TQ0VfQ09OVEVYVFMgPSBTQ0VfQ09OVEVYVFM7XG5cbiAgLy8gUmVzb3VyY2UgVVJMcyBjYW4gYWxzbyBiZSB0cnVzdGVkIGJ5IHBvbGljeS5cbiAgdmFyIHJlc291cmNlVXJsV2hpdGVsaXN0ID0gWydzZWxmJ10sXG4gICAgICByZXNvdXJjZVVybEJsYWNrbGlzdCA9IFtdO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk9fSB3aGl0ZWxpc3QgV2hlbiBwcm92aWRlZCwgcmVwbGFjZXMgdGhlIHJlc291cmNlVXJsV2hpdGVsaXN0IHdpdGggdGhlIHZhbHVlXG4gICAqICAgICBwcm92aWRlZC4gIFRoaXMgbXVzdCBiZSBhbiBhcnJheSBvciBudWxsLiAgQSBzbmFwc2hvdCBvZiB0aGlzIGFycmF5IGlzIHVzZWQgc28gZnVydGhlclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuXG4gICAqICAgICBGb2xsb3cge0BsaW5rIG5nLiRzY2UjcmVzb3VyY2VVcmxQYXR0ZXJuSXRlbSB0aGlzIGxpbmt9IGZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpdGVtc1xuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LlxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGN1cnJlbnRseSBzZXQgd2hpdGVsaXN0IGFycmF5LlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cy9HZXRzIHRoZSB3aGl0ZWxpc3Qgb2YgdHJ1c3RlZCByZXNvdXJjZSBVUkxzLlxuICAgKlxuICAgKiBUaGUgKipkZWZhdWx0IHZhbHVlKiogd2hlbiBubyB3aGl0ZWxpc3QgaGFzIGJlZW4gZXhwbGljaXRseSBzZXQgaXMgYFsnc2VsZiddYCBhbGxvd2luZyBvbmx5XG4gICAqIHNhbWUgb3JpZ2luIHJlc291cmNlIHJlcXVlc3RzLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAqKk5vdGU6KiogdGhlIGRlZmF1bHQgd2hpdGVsaXN0IG9mICdzZWxmJyBpcyBub3QgcmVjb21tZW5kZWQgaWYgeW91ciBhcHAgc2hhcmVzIGl0cyBvcmlnaW5cbiAgICogd2l0aCBvdGhlciBhcHBzISBJdCBpcyBhIGdvb2QgaWRlYSB0byBsaW1pdCBpdCB0byBvbmx5IHlvdXIgYXBwbGljYXRpb24ncyBkaXJlY3RvcnkuXG4gICAqIDwvZGl2PlxuICAgKi9cbiAgdGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJlc291cmNlVXJsV2hpdGVsaXN0ID0gYWRqdXN0TWF0Y2hlcnModmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb3VyY2VVcmxXaGl0ZWxpc3Q7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3RcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheT19IGJsYWNrbGlzdCBXaGVuIHByb3ZpZGVkLCByZXBsYWNlcyB0aGUgcmVzb3VyY2VVcmxCbGFja2xpc3Qgd2l0aCB0aGUgdmFsdWVcbiAgICogICAgIHByb3ZpZGVkLiAgVGhpcyBtdXN0IGJlIGFuIGFycmF5IG9yIG51bGwuICBBIHNuYXBzaG90IG9mIHRoaXMgYXJyYXkgaXMgdXNlZCBzbyBmdXJ0aGVyXG4gICAqICAgICBjaGFuZ2VzIHRvIHRoZSBhcnJheSBhcmUgaWdub3JlZC48L3A+PHA+XG4gICAqICAgICBGb2xsb3cge0BsaW5rIG5nLiRzY2UjcmVzb3VyY2VVcmxQYXR0ZXJuSXRlbSB0aGlzIGxpbmt9IGZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpdGVtc1xuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LjwvcD48cD5cbiAgICogICAgIFRoZSB0eXBpY2FsIHVzYWdlIGZvciB0aGUgYmxhY2tsaXN0IGlzIHRvICoqYmxvY2tcbiAgICogICAgIFtvcGVuIHJlZGlyZWN0c10oaHR0cDovL2N3ZS5taXRyZS5vcmcvZGF0YS9kZWZpbml0aW9ucy82MDEuaHRtbCkqKiBzZXJ2ZWQgYnkgeW91ciBkb21haW4gYXNcbiAgICogICAgIHRoZXNlIHdvdWxkIG90aGVyd2lzZSBiZSB0cnVzdGVkIGJ1dCBhY3R1YWxseSByZXR1cm4gY29udGVudCBmcm9tIHRoZSByZWRpcmVjdGVkIGRvbWFpbi5cbiAgICogICAgIDwvcD48cD5cbiAgICogICAgIEZpbmFsbHksICoqdGhlIGJsYWNrbGlzdCBvdmVycmlkZXMgdGhlIHdoaXRlbGlzdCoqIGFuZCBoYXMgdGhlIGZpbmFsIHNheS5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IFRoZSBjdXJyZW50bHkgc2V0IGJsYWNrbGlzdCBhcnJheS5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMvR2V0cyB0aGUgYmxhY2tsaXN0IG9mIHRydXN0ZWQgcmVzb3VyY2UgVVJMcy5cbiAgICpcbiAgICogVGhlICoqZGVmYXVsdCB2YWx1ZSoqIHdoZW4gbm8gd2hpdGVsaXN0IGhhcyBiZWVuIGV4cGxpY2l0bHkgc2V0IGlzIHRoZSBlbXB0eSBhcnJheSAoaS5lLiB0aGVyZVxuICAgKiBpcyBubyBibGFja2xpc3QuKVxuICAgKi9cblxuICB0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgcmVzb3VyY2VVcmxCbGFja2xpc3QgPSBhZGp1c3RNYXRjaGVycyh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXNvdXJjZVVybEJsYWNrbGlzdDtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckJHNhbml0aXplVXJpJywgZnVuY3Rpb24oJGluamVjdG9yLCAkJHNhbml0aXplVXJpKSB7XG5cbiAgICB2YXIgaHRtbFNhbml0aXplciA9IGZ1bmN0aW9uIGh0bWxTYW5pdGl6ZXIoaHRtbCkge1xuICAgICAgdGhyb3cgJHNjZU1pbkVycigndW5zYWZlJywgJ0F0dGVtcHRpbmcgdG8gdXNlIGFuIHVuc2FmZSB2YWx1ZSBpbiBhIHNhZmUgY29udGV4dC4nKTtcbiAgICB9O1xuXG4gICAgaWYgKCRpbmplY3Rvci5oYXMoJyRzYW5pdGl6ZScpKSB7XG4gICAgICBodG1sU2FuaXRpemVyID0gJGluamVjdG9yLmdldCgnJHNhbml0aXplJyk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBtYXRjaFVybChtYXRjaGVyLCBwYXJzZWRVcmwpIHtcbiAgICAgIGlmIChtYXRjaGVyID09PSAnc2VsZicpIHtcbiAgICAgICAgcmV0dXJuIHVybElzU2FtZU9yaWdpbihwYXJzZWRVcmwpIHx8IHVybElzU2FtZU9yaWdpbkFzQmFzZVVybChwYXJzZWRVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGVmaW5pdGVseSBhIHJlZ2V4LiAgU2VlIGFkanVzdE1hdGNoZXJzKClcbiAgICAgICAgcmV0dXJuICEhbWF0Y2hlci5leGVjKHBhcnNlZFVybC5ocmVmKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1Jlc291cmNlVXJsQWxsb3dlZEJ5UG9saWN5KHVybCkge1xuICAgICAgdmFyIHBhcnNlZFVybCA9IHVybFJlc29sdmUodXJsLnRvU3RyaW5nKCkpO1xuICAgICAgdmFyIGksIG4sIGFsbG93ZWQgPSBmYWxzZTtcbiAgICAgIC8vIEVuc3VyZSB0aGF0IGF0IGxlYXN0IG9uZSBpdGVtIGZyb20gdGhlIHdoaXRlbGlzdCBhbGxvd3MgdGhpcyB1cmwuXG4gICAgICBmb3IgKGkgPSAwLCBuID0gcmVzb3VyY2VVcmxXaGl0ZWxpc3QubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGlmIChtYXRjaFVybChyZXNvdXJjZVVybFdoaXRlbGlzdFtpXSwgcGFyc2VkVXJsKSkge1xuICAgICAgICAgIGFsbG93ZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWxsb3dlZCkge1xuICAgICAgICAvLyBFbnN1cmUgdGhhdCBubyBpdGVtIGZyb20gdGhlIGJsYWNrbGlzdCBibG9ja2VkIHRoaXMgdXJsLlxuICAgICAgICBmb3IgKGkgPSAwLCBuID0gcmVzb3VyY2VVcmxCbGFja2xpc3QubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgaWYgKG1hdGNoVXJsKHJlc291cmNlVXJsQmxhY2tsaXN0W2ldLCBwYXJzZWRVcmwpKSB7XG4gICAgICAgICAgICBhbGxvd2VkID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhbGxvd2VkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlSG9sZGVyVHlwZShCYXNlKSB7XG4gICAgICB2YXIgaG9sZGVyVHlwZSA9IGZ1bmN0aW9uIFRydXN0ZWRWYWx1ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1c3RlZFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIGlmIChCYXNlKSB7XG4gICAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlID0gbmV3IEJhc2UoKTtcbiAgICAgIH1cbiAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbiBzY2VWYWx1ZU9mKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO1xuICAgICAgfTtcbiAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gc2NlVG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gaG9sZGVyVHlwZTtcbiAgICB9XG5cbiAgICB2YXIgdHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSA9IGdlbmVyYXRlSG9sZGVyVHlwZSgpLFxuICAgICAgICBieVR5cGUgPSB7fTtcblxuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuSFRNTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5DU1NdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuTUVESUFfVVJMXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUoYnlUeXBlW1NDRV9DT05URVhUUy5NRURJQV9VUkxdKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLkpTXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLlJFU09VUkNFX1VSTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUoYnlUeXBlW1NDRV9DT05URVhUUy5VUkxdKTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmV0dXJucyBhIHRydXN0ZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIHBhcmFtZXRlciBmb3IgdGhlIHNwZWNpZmllZCBjb250ZXh0LiBUaGlzIHRydXN0ZWRcbiAgICAgKiBvYmplY3Qgd2lsbCBsYXRlciBvbiBiZSB1c2VkIGFzLWlzLCB3aXRob3V0IGFueSBzZWN1cml0eSBjaGVjaywgYnkgYmluZGluZ3Mgb3IgZGlyZWN0aXZlc1xuICAgICAqIHRoYXQgcmVxdWlyZSB0aGlzIHNlY3VyaXR5IGNvbnRleHQuXG4gICAgICogRm9yIGluc3RhbmNlLCBtYXJraW5nIGEgc3RyaW5nIGFzIHRydXN0ZWQgZm9yIHRoZSBgJHNjZS5IVE1MYCBjb250ZXh0IHdpbGwgZW50aXJlbHkgYnlwYXNzXG4gICAgICogdGhlIHBvdGVudGlhbCBgJHNhbml0aXplYCBjYWxsIGluIGNvcnJlc3BvbmRpbmcgYCRzY2UuSFRNTGAgYmluZGluZ3Mgb3IgZGlyZWN0aXZlcywgc3VjaCBhc1xuICAgICAqIGBuZy1iaW5kLWh0bWxgLiBOb3RlIHRoYXQgaW4gbW9zdCBjYXNlcyB5b3Ugd29uJ3QgbmVlZCB0byBjYWxsIHRoaXMgZnVuY3Rpb246IGlmIHlvdSBoYXZlIHRoZVxuICAgICAqIHNhbml0aXplciBsb2FkZWQsIHBhc3NpbmcgdGhlIHZhbHVlIGl0c2VsZiB3aWxsIHJlbmRlciBhbGwgdGhlIEhUTUwgdGhhdCBkb2VzIG5vdCBwb3NlIGFcbiAgICAgKiBzZWN1cml0eSByaXNrLlxuICAgICAqXG4gICAgICogU2VlIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBnZXRUcnVzdGVkfSBmb3IgdGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBjb25zdW1lIHRob3NlXG4gICAgICogdHJ1c3RlZCB2YWx1ZXMsIGFuZCB7QGxpbmsgbmcuJHNjZSAkc2NlfSBmb3IgZ2VuZXJhbCBkb2N1bWVudGF0aW9uIGFib3V0IHN0cmljdCBjb250ZXh0dWFsXG4gICAgICogZXNjYXBpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHNhZmUgZm9yIHVzZSwgZS5nLiBgJHNjZS5VUkxgLFxuICAgICAqICAgICBgJHNjZS5SRVNPVVJDRV9VUkxgLCBgJHNjZS5IVE1MYCwgYCRzY2UuSlNgIG9yIGAkc2NlLkNTU2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRydXN0ZWQuXG4gICAgICogQHJldHVybiB7Kn0gQSB0cnVzdGVkIHJlcHJlc2VudGF0aW9uIG9mIHZhbHVlLCB0aGF0IGNhbiBiZSB1c2VkIGluIHRoZSBnaXZlbiBjb250ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRydXN0QXModHlwZSwgdHJ1c3RlZFZhbHVlKSB7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSAoYnlUeXBlLmhhc093blByb3BlcnR5KHR5cGUpID8gYnlUeXBlW3R5cGVdIDogbnVsbCk7XG4gICAgICBpZiAoIUNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2ljb250ZXh0JyxcbiAgICAgICAgICAgICdBdHRlbXB0ZWQgdG8gdHJ1c3QgYSB2YWx1ZSBpbiBpbnZhbGlkIGNvbnRleHQuIENvbnRleHQ6IHswfTsgVmFsdWU6IHsxfScsXG4gICAgICAgICAgICB0eXBlLCB0cnVzdGVkVmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKHRydXN0ZWRWYWx1ZSA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZCh0cnVzdGVkVmFsdWUpIHx8IHRydXN0ZWRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHRydXN0ZWRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIC8vIEFsbCB0aGUgY3VycmVudCBjb250ZXh0cyBpbiBTQ0VfQ09OVEVYVFMgaGFwcGVuIHRvIGJlIHN0cmluZ3MuICBJbiBvcmRlciB0byBhdm9pZCB0cnVzdGluZ1xuICAgICAgLy8gbXV0YWJsZSBvYmplY3RzLCB3ZSBlbnN1cmUgaGVyZSB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW4gaXMgYWN0dWFsbHkgYSBzdHJpbmcuXG4gICAgICBpZiAodHlwZW9mIHRydXN0ZWRWYWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaXR5cGUnLFxuICAgICAgICAgICAgJ0F0dGVtcHRlZCB0byB0cnVzdCBhIG5vbi1zdHJpbmcgdmFsdWUgaW4gYSBjb250ZW50IHJlcXVpcmluZyBhIHN0cmluZzogQ29udGV4dDogezB9JyxcbiAgICAgICAgICAgIHR5cGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0cnVzdGVkVmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjdmFsdWVPZlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogSWYgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgaGFkIGJlZW4gcmV0dXJuZWQgYnkgYSBwcmlvciBjYWxsIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LCByZXR1cm5zIHRoZSB2YWx1ZSB0aGF0IGhhZCBiZWVuIHBhc3NlZCB0byB7QGxpbmtcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfS5cbiAgICAgKlxuICAgICAqIElmIHRoZSBwYXNzZWQgcGFyYW1ldGVyIGlzIG5vdCBhIHZhbHVlIHRoYXQgaGFkIGJlZW4gcmV0dXJuZWQgYnkge0BsaW5rXG4gICAgICogbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0sIGl0IG11c3QgYmUgcmV0dXJuZWQgYXMtaXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH1cbiAgICAgKiAgICAgY2FsbCBvciBhbnl0aGluZyBlbHNlLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBgdmFsdWVgIHRoYXQgd2FzIG9yaWdpbmFsbHkgcHJvdmlkZWQgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzXG4gICAgICogICAgIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9IGlmIGB2YWx1ZWAgaXMgdGhlIHJlc3VsdCBvZiBzdWNoIGEgY2FsbC4gIE90aGVyd2lzZSwgcmV0dXJuc1xuICAgICAqICAgICBgdmFsdWVgIHVuY2hhbmdlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB2YWx1ZU9mKG1heWJlVHJ1c3RlZCkge1xuICAgICAgaWYgKG1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpIHtcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZC4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZURlbGVnYXRlI2dldFRydXN0ZWRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEdpdmVuIGFuIG9iamVjdCBhbmQgYSBzZWN1cml0eSBjb250ZXh0IGluIHdoaWNoIHRvIGFzc2lnbiBpdCwgcmV0dXJucyBhIHZhbHVlIHRoYXQncyBzYWZlIHRvXG4gICAgICogdXNlIGluIHRoaXMgY29udGV4dCwgd2hpY2ggd2FzIHJlcHJlc2VudGVkIGJ5IHRoZSBwYXJhbWV0ZXIuIFRvIGRvIHNvLCB0aGlzIGZ1bmN0aW9uIGVpdGhlclxuICAgICAqIHVud3JhcHMgdGhlIHNhZmUgdHlwZSBpdCBoYXMgYmVlbiBnaXZlbiAoZm9yIGluc3RhbmNlLCBhIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9IHJlc3VsdCksIG9yIGl0IG1pZ2h0IHRyeSB0byBzYW5pdGl6ZSB0aGUgdmFsdWUgZ2l2ZW4sIGRlcGVuZGluZyBvblxuICAgICAqIHRoZSBjb250ZXh0IGFuZCBzYW5pdGl6ZXIgYXZhaWxhYmxpbGl0eS5cbiAgICAgKlxuICAgICAqIFRoZSBjb250ZXh0cyB0aGF0IGNhbiBiZSBzYW5pdGl6ZWQgYXJlICRzY2UuTUVESUFfVVJMLCAkc2NlLlVSTCBhbmQgJHNjZS5IVE1MLiBUaGUgZmlyc3QgdHdvIGFyZSBhdmFpbGFibGVcbiAgICAgKiBieSBkZWZhdWx0LCBhbmQgdGhlIHRoaXJkIG9uZSByZWxpZXMgb24gdGhlIGAkc2FuaXRpemVgIHNlcnZpY2UgKHdoaWNoIG1heSBiZSBsb2FkZWQgdGhyb3VnaFxuICAgICAqIHRoZSBgbmdTYW5pdGl6ZWAgbW9kdWxlKS4gRnVydGhlcm1vcmUsIGZvciAkc2NlLlJFU09VUkNFX1VSTCBjb250ZXh0LCBhIHBsYWluIHN0cmluZyBtYXkgYmVcbiAgICAgKiBhY2NlcHRlZCBpZiB0aGUgcmVzb3VyY2UgdXJsIHBvbGljeSBkZWZpbmVkIGJ5IHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdFxuICAgICAqIGAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdGB9IGFuZCB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3RcbiAgICAgKiBgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3RgfSBhY2NlcHRzIHRoYXQgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgaWYgdGhlIHNhZmUgdHlwZSBpc24ndCBhcHByb3ByaWF0ZSBmb3IgdGhpcyBjb250ZXh0LCBvciBpZiB0aGVcbiAgICAgKiB2YWx1ZSBnaXZlbiBjYW5ub3QgYmUgYWNjZXB0ZWQgaW4gdGhlIGNvbnRleHQgKHdoaWNoIG1pZ2h0IGJlIGNhdXNlZCBieSBzYW5pdGl6YXRpb24gbm90XG4gICAgICogYmVpbmcgYXZhaWxhYmxlLCBvciB0aGUgdmFsdWUgbm90IGJlaW5nIHJlY29nbml6ZWQgYXMgc2FmZSkuXG4gICAgICpcbiAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gICAgICogRGlzYWJsaW5nIGF1dG8tZXNjYXBpbmcgaXMgZXh0cmVtZWx5IGRhbmdlcm91cywgaXQgdXN1YWxseSBjcmVhdGVzIGEgQ3Jvc3MgU2l0ZSBTY3JpcHRpbmdcbiAgICAgKiAoWFNTKSB2dWxuZXJhYmlsaXR5IGluIHlvdXIgYXBwbGljYXRpb24uXG4gICAgICogPC9kaXY+XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHRvIGJlIHVzZWQgKHN1Y2ggYXMgYCRzY2UuSFRNTGApLlxuICAgICAqIEBwYXJhbSB7Kn0gbWF5YmVUcnVzdGVkIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gY2FsbCwgb3IgYW55dGhpbmcgZWxzZSAod2hpY2ggd2lsbCBub3QgYmUgY29uc2lkZXJlZCB0cnVzdGVkLilcbiAgICAgKiBAcmV0dXJuIHsqfSBBIHZlcnNpb24gb2YgdGhlIHZhbHVlIHRoYXQncyBzYWZlIHRvIHVzZSBpbiB0aGUgZ2l2ZW4gY29udGV4dCwgb3IgdGhyb3dzIGFuXG4gICAgICogICAgIGV4Y2VwdGlvbiBpZiB0aGlzIGlzIGltcG9zc2libGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0VHJ1c3RlZCh0eXBlLCBtYXliZVRydXN0ZWQpIHtcbiAgICAgIGlmIChtYXliZVRydXN0ZWQgPT09IG51bGwgfHwgaXNVbmRlZmluZWQobWF5YmVUcnVzdGVkKSB8fCBtYXliZVRydXN0ZWQgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQ7XG4gICAgICB9XG4gICAgICB2YXIgY29uc3RydWN0b3IgPSAoYnlUeXBlLmhhc093blByb3BlcnR5KHR5cGUpID8gYnlUeXBlW3R5cGVdIDogbnVsbCk7XG4gICAgICAvLyBJZiBtYXliZVRydXN0ZWQgaXMgYSB0cnVzdGVkIGNsYXNzIGluc3RhbmNlIG9yIHN1YmNsYXNzIGluc3RhbmNlLCB0aGVuIHVud3JhcCBhbmQgcmV0dXJuXG4gICAgICAvLyBhcy1pcy5cbiAgICAgIGlmIChjb25zdHJ1Y3RvciAmJiBtYXliZVRydXN0ZWQgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG1heWJlVHJ1c3RlZCBpcyBhIHRydXN0ZWQgY2xhc3MgaW5zdGFuY2UgYnV0IG5vdCBvZiB0aGUgY29ycmVjdCB0cnVzdGVkIHR5cGVcbiAgICAgIC8vIHRoZW4gdW53cmFwIGl0IGFuZCBhbGxvdyBpdCB0byBwYXNzIHRocm91Z2ggdG8gdGhlIHJlc3Qgb2YgdGhlIGNoZWNrc1xuICAgICAgaWYgKGlzRnVuY3Rpb24obWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKSkge1xuICAgICAgICBtYXliZVRydXN0ZWQgPSBtYXliZVRydXN0ZWQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUsIHRoZW4gd2Ugd2lsbCBlaXRoZXIgc2FuaXRpemUgdGhlIHZhbHVlIG9yIHRocm93IGFuIGV4Y2VwdGlvbi5cbiAgICAgIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuTUVESUFfVVJMIHx8IHR5cGUgPT09IFNDRV9DT05URVhUUy5VUkwpIHtcbiAgICAgICAgLy8gd2UgYXR0ZW1wdCB0byBzYW5pdGl6ZSBub24tcmVzb3VyY2UgVVJMc1xuICAgICAgICByZXR1cm4gJCRzYW5pdGl6ZVVyaShtYXliZVRydXN0ZWQsIHR5cGUgPT09IFNDRV9DT05URVhUUy5NRURJQV9VUkwpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuUkVTT1VSQ0VfVVJMKSB7XG4gICAgICAgIGlmIChpc1Jlc291cmNlVXJsQWxsb3dlZEJ5UG9saWN5KG1heWJlVHJ1c3RlZCkpIHtcbiAgICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2luc2VjdXJsJyxcbiAgICAgICAgICAgICAgJ0Jsb2NrZWQgbG9hZGluZyByZXNvdXJjZSBmcm9tIHVybCBub3QgYWxsb3dlZCBieSAkc2NlRGVsZWdhdGUgcG9saWN5LiAgVVJMOiB7MH0nLFxuICAgICAgICAgICAgICBtYXliZVRydXN0ZWQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gU0NFX0NPTlRFWFRTLkhUTUwpIHtcbiAgICAgICAgLy8gaHRtbFNhbml0aXplciB0aHJvd3MgaXRzIG93biBlcnJvciB3aGVuIG5vIHNhbml0aXplciBpcyBhdmFpbGFibGUuXG4gICAgICAgIHJldHVybiBodG1sU2FuaXRpemVyKG1heWJlVHJ1c3RlZCk7XG4gICAgICB9XG4gICAgICAvLyBEZWZhdWx0IGVycm9yIHdoZW4gdGhlICRzY2Ugc2VydmljZSBoYXMgbm8gd2F5IHRvIG1ha2UgdGhlIGlucHV0IHNhZmUuXG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCAnQXR0ZW1wdGluZyB0byB1c2UgYW4gdW5zYWZlIHZhbHVlIGluIGEgc2FmZSBjb250ZXh0LicpO1xuICAgIH1cblxuICAgIHJldHVybiB7IHRydXN0QXM6IHRydXN0QXMsXG4gICAgICAgICAgICAgZ2V0VHJ1c3RlZDogZ2V0VHJ1c3RlZCxcbiAgICAgICAgICAgICB2YWx1ZU9mOiB2YWx1ZU9mIH07XG4gIH1dO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkc2NlUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhlICRzY2VQcm92aWRlciBwcm92aWRlciBhbGxvd3MgZGV2ZWxvcGVycyB0byBjb25maWd1cmUgdGhlIHtAbGluayBuZy4kc2NlICRzY2V9IHNlcnZpY2UuXG4gKiAtICAgZW5hYmxlL2Rpc2FibGUgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSkgaW4gYSBtb2R1bGVcbiAqIC0gICBvdmVycmlkZSB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB3aXRoIGEgY3VzdG9tIGRlbGVnYXRlXG4gKlxuICogUmVhZCBtb3JlIGFib3V0IHtAbGluayBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkc2NlXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIGAkc2NlYCBpcyBhIHNlcnZpY2UgdGhhdCBwcm92aWRlcyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBzZXJ2aWNlcyB0byBBbmd1bGFySlMuXG4gKlxuICogIyMgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmdcbiAqXG4gKiBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKSBpcyBhIG1vZGUgaW4gd2hpY2ggQW5ndWxhckpTIGNvbnN0cmFpbnMgYmluZGluZ3MgdG8gb25seSByZW5kZXJcbiAqIHRydXN0ZWQgdmFsdWVzLiBJdHMgZ29hbCBpcyB0byBhc3Npc3QgaW4gd3JpdGluZyBjb2RlIGluIGEgd2F5IHRoYXQgKGEpIGlzIHNlY3VyZSBieSBkZWZhdWx0LCBhbmRcbiAqIChiKSBtYWtlcyBhdWRpdGluZyBmb3Igc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzIHN1Y2ggYXMgWFNTLCBjbGlja2phY2tpbmcsIGV0Yy4gYSBsb3QgZWFzaWVyLlxuICpcbiAqICMjIyBPdmVydmlld1xuICpcbiAqIFRvIHN5c3RlbWF0aWNhbGx5IGJsb2NrIFhTUyBzZWN1cml0eSBidWdzLCBBbmd1bGFySlMgdHJlYXRzIGFsbCB2YWx1ZXMgYXMgdW50cnVzdGVkIGJ5IGRlZmF1bHQgaW5cbiAqIEhUTUwgb3Igc2Vuc2l0aXZlIFVSTCBiaW5kaW5ncy4gV2hlbiBiaW5kaW5nIHVudHJ1c3RlZCB2YWx1ZXMsIEFuZ3VsYXJKUyB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIHJ1biBzZWN1cml0eSBjaGVja3Mgb24gdGhlbSAoc2FuaXRpemF0aW9ucywgd2hpdGVsaXN0cywgZGVwZW5kaW5nIG9uIGNvbnRleHQpLCBvciB0aHJvdyB3aGVuIGl0XG4gKiBjYW5ub3QgZ3VhcmFudGVlIHRoZSBzZWN1cml0eSBvZiB0aGUgcmVzdWx0LiBUaGF0IGJlaGF2aW9yIGRlcGVuZHMgc3Ryb25nbHkgb24gY29udGV4dHM6IEhUTUxcbiAqIGNhbiBiZSBzYW5pdGl6ZWQsIGJ1dCB0ZW1wbGF0ZSBVUkxzIGNhbm5vdCwgZm9yIGluc3RhbmNlLlxuICpcbiAqIFRvIGlsbHVzdHJhdGUgdGhpcywgY29uc2lkZXIgdGhlIGBuZy1iaW5kLWh0bWxgIGRpcmVjdGl2ZS4gSXQgcmVuZGVycyBpdHMgdmFsdWUgZGlyZWN0bHkgYXMgSFRNTDpcbiAqIHdlIGNhbGwgdGhhdCB0aGUgKmNvbnRleHQqLiBXaGVuIGdpdmVuIGFuIHVudHJ1c3RlZCBpbnB1dCwgQW5ndWxhckpTIHdpbGwgYXR0ZW1wdCB0byBzYW5pdGl6ZSBpdFxuICogYmVmb3JlIHJlbmRlcmluZyBpZiBhIHNhbml0aXplciBpcyBhdmFpbGFibGUsIGFuZCB0aHJvdyBvdGhlcndpc2UuIFRvIGJ5cGFzcyBzYW5pdGl6YXRpb24gYW5kXG4gKiByZW5kZXIgdGhlIGlucHV0IGFzLWlzLCB5b3Ugd2lsbCBuZWVkIHRvIG1hcmsgaXQgYXMgdHJ1c3RlZCBmb3IgdGhhdCBjb250ZXh0IGJlZm9yZSBhdHRlbXB0aW5nXG4gKiB0byBiaW5kIGl0LlxuICpcbiAqIEFzIG9mIHZlcnNpb24gMS4yLCBBbmd1bGFySlMgc2hpcHMgd2l0aCBTQ0UgZW5hYmxlZCBieSBkZWZhdWx0LlxuICpcbiAqICMjIyBJbiBwcmFjdGljZVxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIG9mIGEgYmluZGluZyBpbiBhIHByaXZpbGVnZWQgY29udGV4dDpcbiAqXG4gKiBgYGBcbiAqIDxpbnB1dCBuZy1tb2RlbD1cInVzZXJIdG1sXCIgYXJpYS1sYWJlbD1cIlVzZXIgaW5wdXRcIj5cbiAqIDxkaXYgbmctYmluZC1odG1sPVwidXNlckh0bWxcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIE5vdGljZSB0aGF0IGBuZy1iaW5kLWh0bWxgIGlzIGJvdW5kIHRvIGB1c2VySHRtbGAgY29udHJvbGxlZCBieSB0aGUgdXNlci4gIFdpdGggU0NFXG4gKiBkaXNhYmxlZCwgdGhpcyBhcHBsaWNhdGlvbiBhbGxvd3MgdGhlIHVzZXIgdG8gcmVuZGVyIGFyYml0cmFyeSBIVE1MIGludG8gdGhlIERJViwgd2hpY2ggd291bGRcbiAqIGJlIGFuIFhTUyBzZWN1cml0eSBidWcuIEluIGEgbW9yZSByZWFsaXN0aWMgZXhhbXBsZSwgb25lIG1heSBiZSByZW5kZXJpbmcgdXNlciBjb21tZW50cywgYmxvZ1xuICogYXJ0aWNsZXMsIGV0Yy4gdmlhIGJpbmRpbmdzLiAoSFRNTCBpcyBqdXN0IG9uZSBleGFtcGxlIG9mIGEgY29udGV4dCB3aGVyZSByZW5kZXJpbmcgdXNlclxuICogY29udHJvbGxlZCBpbnB1dCBjcmVhdGVzIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4pXG4gKlxuICogRm9yIHRoZSBjYXNlIG9mIEhUTUwsIHlvdSBtaWdodCB1c2UgYSBsaWJyYXJ5LCBlaXRoZXIgb24gdGhlIGNsaWVudCBzaWRlLCBvciBvbiB0aGUgc2VydmVyIHNpZGUsXG4gKiB0byBzYW5pdGl6ZSB1bnNhZmUgSFRNTCBiZWZvcmUgYmluZGluZyB0byB0aGUgdmFsdWUgYW5kIHJlbmRlcmluZyBpdCBpbiB0aGUgZG9jdW1lbnQuXG4gKlxuICogSG93IHdvdWxkIHlvdSBlbnN1cmUgdGhhdCBldmVyeSBwbGFjZSB0aGF0IHVzZWQgdGhlc2UgdHlwZXMgb2YgYmluZGluZ3Mgd2FzIGJvdW5kIHRvIGEgdmFsdWUgdGhhdFxuICogd2FzIHNhbml0aXplZCBieSB5b3VyIGxpYnJhcnkgKG9yIHJldHVybmVkIGFzIHNhZmUgZm9yIHJlbmRlcmluZyBieSB5b3VyIHNlcnZlcj8pICBIb3cgY2FuIHlvdVxuICogZW5zdXJlIHRoYXQgeW91IGRpZG4ndCBhY2NpZGVudGFsbHkgZGVsZXRlIHRoZSBsaW5lIHRoYXQgc2FuaXRpemVkIHRoZSB2YWx1ZSwgb3IgcmVuYW1lZCBzb21lXG4gKiBwcm9wZXJ0aWVzL2ZpZWxkcyBhbmQgZm9yZ290IHRvIHVwZGF0ZSB0aGUgYmluZGluZyB0byB0aGUgc2FuaXRpemVkIHZhbHVlP1xuICpcbiAqIFRvIGJlIHNlY3VyZSBieSBkZWZhdWx0LCBBbmd1bGFySlMgbWFrZXMgc3VyZSBiaW5kaW5ncyBnbyB0aHJvdWdoIHRoYXQgc2FuaXRpemF0aW9uLCBvclxuICogYW55IHNpbWlsYXIgdmFsaWRhdGlvbiBwcm9jZXNzLCB1bmxlc3MgdGhlcmUncyBhIGdvb2QgcmVhc29uIHRvIHRydXN0IHRoZSBnaXZlbiB2YWx1ZSBpbiB0aGlzXG4gKiBjb250ZXh0LiAgVGhhdCB0cnVzdCBpcyBmb3JtYWxpemVkIHdpdGggYSBmdW5jdGlvbiBjYWxsLiBUaGlzIG1lYW5zIHRoYXQgYXMgYSBkZXZlbG9wZXIsIHlvdVxuICogY2FuIGFzc3VtZSBhbGwgdW50cnVzdGVkIGJpbmRpbmdzIGFyZSBzYWZlLiBUaGVuLCB0byBhdWRpdCB5b3VyIGNvZGUgZm9yIGJpbmRpbmcgc2VjdXJpdHkgaXNzdWVzLFxuICogeW91IGp1c3QgbmVlZCB0byBlbnN1cmUgdGhlIHZhbHVlcyB5b3UgbWFyayBhcyB0cnVzdGVkIGluZGVlZCBhcmUgc2FmZSAtIGJlY2F1c2UgdGhleSB3ZXJlXG4gKiByZWNlaXZlZCBmcm9tIHlvdXIgc2VydmVyLCBzYW5pdGl6ZWQgYnkgeW91ciBsaWJyYXJ5LCBldGMuIFlvdSBjYW4gb3JnYW5pemUgeW91ciBjb2RlYmFzZSB0b1xuICogaGVscCB3aXRoIHRoaXMgLSBwZXJoYXBzIGFsbG93aW5nIG9ubHkgdGhlIGZpbGVzIGluIGEgc3BlY2lmaWMgZGlyZWN0b3J5IHRvIGRvIHRoaXMuXG4gKiBFbnN1cmluZyB0aGF0IHRoZSBpbnRlcm5hbCBBUEkgZXhwb3NlZCBieSB0aGF0IGNvZGUgZG9lc24ndCBtYXJrdXAgYXJiaXRyYXJ5IHZhbHVlcyBhcyBzYWZlIHRoZW5cbiAqIGJlY29tZXMgYSBtb3JlIG1hbmFnZWFibGUgdGFzay5cbiAqXG4gKiBJbiB0aGUgY2FzZSBvZiBBbmd1bGFySlMnIFNDRSBzZXJ2aWNlLCBvbmUgdXNlcyB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc31cbiAqIChhbmQgc2hvcnRoYW5kIG1ldGhvZHMgc3VjaCBhcyB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzSHRtbCAkc2NlLnRydXN0QXNIdG1sfSwgZXRjLikgdG9cbiAqIGJ1aWxkIHRoZSB0cnVzdGVkIHZlcnNpb25zIG9mIHlvdXIgdmFsdWVzLlxuICpcbiAqICMjIyBIb3cgZG9lcyBpdCB3b3JrP1xuICpcbiAqIEluIHByaXZpbGVnZWQgY29udGV4dHMsIGRpcmVjdGl2ZXMgYW5kIGNvZGUgd2lsbCBiaW5kIHRvIHRoZSByZXN1bHQgb2Yge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFxuICogJHNjZS5nZXRUcnVzdGVkKGNvbnRleHQsIHZhbHVlKX0gcmF0aGVyIHRoYW4gdG8gdGhlIHZhbHVlIGRpcmVjdGx5LiAgVGhpbmsgb2YgdGhpcyBmdW5jdGlvbiBhc1xuICogYSB3YXkgdG8gZW5mb3JjZSB0aGUgcmVxdWlyZWQgc2VjdXJpdHkgY29udGV4dCBpbiB5b3VyIGRhdGEgc2luay4gRGlyZWN0aXZlcyB1c2Uge0BsaW5rXG4gKiBuZy4kc2NlI3BhcnNlQXMgJHNjZS5wYXJzZUFzfSByYXRoZXIgdGhhbiBgJHBhcnNlYCB0byB3YXRjaCBhdHRyaWJ1dGUgYmluZGluZ3MsIHdoaWNoIHBlcmZvcm1zXG4gKiB0aGUge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWR9IGJlaGluZCB0aGUgc2NlbmVzIG9uIG5vbi1jb25zdGFudCBsaXRlcmFscy4gQWxzbyxcbiAqIHdoZW4gYmluZGluZyB3aXRob3V0IGRpcmVjdGl2ZXMsIEFuZ3VsYXJKUyB3aWxsIHVuZGVyc3RhbmQgdGhlIGNvbnRleHQgb2YgeW91ciBiaW5kaW5nc1xuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBBcyBhbiBleGFtcGxlLCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQmluZEh0bWwgbmdCaW5kSHRtbH0gdXNlcyB7QGxpbmtcbiAqIG5nLiRzY2UjcGFyc2VBc0h0bWwgJHNjZS5wYXJzZUFzSHRtbChiaW5kaW5nIGV4cHJlc3Npb24pfS4gIEhlcmUncyB0aGUgYWN0dWFsIGNvZGUgKHNsaWdodGx5XG4gKiBzaW1wbGlmaWVkKTpcbiAqXG4gKiBgYGBcbiAqIHZhciBuZ0JpbmRIdG1sRGlyZWN0aXZlID0gWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xuICogICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAqICAgICBzY29wZS4kd2F0Y2goJHNjZS5wYXJzZUFzSHRtbChhdHRyLm5nQmluZEh0bWwpLCBmdW5jdGlvbih2YWx1ZSkge1xuICogICAgICAgZWxlbWVudC5odG1sKHZhbHVlIHx8ICcnKTtcbiAqICAgICB9KTtcbiAqICAgfTtcbiAqIH1dO1xuICogYGBgXG4gKlxuICogIyMjIEltcGFjdCBvbiBsb2FkaW5nIHRlbXBsYXRlc1xuICpcbiAqIFRoaXMgYXBwbGllcyBib3RoIHRvIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmctaW5jbHVkZWB9IGRpcmVjdGl2ZSBhcyB3ZWxsIGFzXG4gKiBgdGVtcGxhdGVVcmxgJ3Mgc3BlY2lmaWVkIGJ5IHtAbGluayBndWlkZS9kaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gKlxuICogQnkgZGVmYXVsdCwgQW5ndWxhckpTIG9ubHkgbG9hZHMgdGVtcGxhdGVzIGZyb20gdGhlIHNhbWUgZG9tYWluIGFuZCBwcm90b2NvbCBhcyB0aGUgYXBwbGljYXRpb25cbiAqIGRvY3VtZW50LiAgVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXG4gKiAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybH0gb24gdGhlIHRlbXBsYXRlIFVSTC4gIFRvIGxvYWQgdGVtcGxhdGVzIGZyb20gb3RoZXIgZG9tYWlucyBhbmQvb3JcbiAqIHByb3RvY29scywgeW91IG1heSBlaXRoZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHdoaXRlbGlzdFxuICogdGhlbX0gb3Ige0BsaW5rIG5nLiRzY2UjdHJ1c3RBc1Jlc291cmNlVXJsIHdyYXAgaXR9IGludG8gYSB0cnVzdGVkIHZhbHVlLlxuICpcbiAqICpQbGVhc2Ugbm90ZSo6XG4gKiBUaGUgYnJvd3NlcidzXG4gKiBbU2FtZSBPcmlnaW4gUG9saWN5XShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Jyb3dzZXJzZWMvd2lraS9QYXJ0MiNTYW1lLW9yaWdpbl9wb2xpY3lfZm9yX1hNTEh0dHBSZXF1ZXN0KVxuICogYW5kIFtDcm9zcy1PcmlnaW4gUmVzb3VyY2UgU2hhcmluZyAoQ09SUyldKGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvKVxuICogcG9saWN5IGFwcGx5IGluIGFkZGl0aW9uIHRvIHRoaXMgYW5kIG1heSBmdXJ0aGVyIHJlc3RyaWN0IHdoZXRoZXIgdGhlIHRlbXBsYXRlIGlzIHN1Y2Nlc3NmdWxseVxuICogbG9hZGVkLiAgVGhpcyBtZWFucyB0aGF0IHdpdGhvdXQgdGhlIHJpZ2h0IENPUlMgcG9saWN5LCBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIGEgZGlmZmVyZW50IGRvbWFpblxuICogd29uJ3Qgd29yayBvbiBhbGwgYnJvd3NlcnMuICBBbHNvLCBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIGBmaWxlOi8vYCBVUkwgZG9lcyBub3Qgd29yayBvbiBzb21lXG4gKiBicm93c2Vycy5cbiAqXG4gKiAjIyMgVGhpcyBmZWVscyBsaWtlIHRvbyBtdWNoIG92ZXJoZWFkXG4gKlxuICogSXQncyBpbXBvcnRhbnQgdG8gcmVtZW1iZXIgdGhhdCBTQ0Ugb25seSBhcHBsaWVzIHRvIGludGVycG9sYXRpb24gZXhwcmVzc2lvbnMuXG4gKlxuICogSWYgeW91ciBleHByZXNzaW9ucyBhcmUgY29uc3RhbnQgbGl0ZXJhbHMsIHRoZXkncmUgYXV0b21hdGljYWxseSB0cnVzdGVkIGFuZCB5b3UgZG9uJ3QgbmVlZCB0b1xuICogY2FsbCBgJHNjZS50cnVzdEFzYCBvbiB0aGVtIChlLmcuXG4gKiBgPGRpdiBuZy1iaW5kLWh0bWw9XCInPGI+aW1wbGljaXRseSB0cnVzdGVkPC9iPidcIj48L2Rpdj5gKSBqdXN0IHdvcmtzIChyZW1lbWJlciB0byBpbmNsdWRlIHRoZVxuICogYG5nU2FuaXRpemVgIG1vZHVsZSkuIFRoZSBgJHNjZURlbGVnYXRlYCB3aWxsIGFsc28gdXNlIHRoZSBgJHNhbml0aXplYCBzZXJ2aWNlIGlmIGl0IGlzIGF2YWlsYWJsZVxuICogd2hlbiBiaW5kaW5nIHVudHJ1c3RlZCB2YWx1ZXMgdG8gYCRzY2UuSFRNTGAgY29udGV4dC5cbiAqIEFuZ3VsYXJKUyBwcm92aWRlcyBhbiBpbXBsZW1lbnRhdGlvbiBpbiBgYW5ndWxhci1zYW5pdGl6ZS5qc2AsIGFuZCBpZiB5b3VcbiAqIHdpc2ggdG8gdXNlIGl0LCB5b3Ugd2lsbCBhbHNvIG5lZWQgdG8gZGVwZW5kIG9uIHRoZSB7QGxpbmsgbmdTYW5pdGl6ZSBgbmdTYW5pdGl6ZWB9IG1vZHVsZSBpblxuICogeW91ciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBUaGUgaW5jbHVkZWQge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSAkc2NlRGVsZWdhdGV9IGNvbWVzIHdpdGggc2FuZSBkZWZhdWx0cyB0byBhbGxvdyB5b3UgdG8gbG9hZFxuICogdGVtcGxhdGVzIGluIGBuZy1pbmNsdWRlYCBmcm9tIHlvdXIgYXBwbGljYXRpb24ncyBkb21haW4gd2l0aG91dCBoYXZpbmcgdG8gZXZlbiBrbm93IGFib3V0IFNDRS5cbiAqIEl0IGJsb2NrcyBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgbG9hZGluZyB0ZW1wbGF0ZXMgb3ZlciBodHRwIGZyb20gYW4gaHR0cHNcbiAqIHNlcnZlZCBkb2N1bWVudC4gIFlvdSBjYW4gY2hhbmdlIHRoZXNlIGJ5IHNldHRpbmcgeW91ciBvd24gY3VzdG9tIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0c30gYW5kIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgYmxhY2tsaXN0c30gZm9yIG1hdGNoaW5nIHN1Y2ggVVJMcy5cbiAqXG4gKiBUaGlzIHNpZ25pZmljYW50bHkgcmVkdWNlcyB0aGUgb3ZlcmhlYWQuICBJdCBpcyBmYXIgZWFzaWVyIHRvIHBheSB0aGUgc21hbGwgb3ZlcmhlYWQgYW5kIGhhdmUgYW5cbiAqIGFwcGxpY2F0aW9uIHRoYXQncyBzZWN1cmUgYW5kIGNhbiBiZSBhdWRpdGVkIHRvIHZlcmlmeSB0aGF0IHdpdGggbXVjaCBtb3JlIGVhc2UgdGhhbiBib2x0aW5nXG4gKiBzZWN1cml0eSBvbnRvIGFuIGFwcGxpY2F0aW9uIGxhdGVyLlxuICpcbiAqIDxhIG5hbWU9XCJjb250ZXh0c1wiPjwvYT5cbiAqICMjIyBXaGF0IHRydXN0ZWQgY29udGV4dCB0eXBlcyBhcmUgc3VwcG9ydGVkP1xuICpcbiAqIHwgQ29udGV4dCAgICAgICAgICAgICB8IE5vdGVzICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgYCRzY2UuSFRNTGAgICAgICAgICB8IEZvciBIVE1MIHRoYXQncyBzYWZlIHRvIHNvdXJjZSBpbnRvIHRoZSBhcHBsaWNhdGlvbi4gIFRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQmluZEh0bWwgbmdCaW5kSHRtbH0gZGlyZWN0aXZlIHVzZXMgdGhpcyBjb250ZXh0IGZvciBiaW5kaW5ncy4gSWYgYW4gdW5zYWZlIHZhbHVlIGlzIGVuY291bnRlcmVkIGFuZCB0aGUge0BsaW5rIG5nU2FuaXRpemUgJHNhbml0aXplfSBtb2R1bGUgaXMgcHJlc2VudCB0aGlzIHdpbGwgc2FuaXRpemUgdGhlIHZhbHVlIGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IuIHxcbiAqIHwgYCRzY2UuQ1NTYCAgICAgICAgICB8IEZvciBDU1MgdGhhdCdzIHNhZmUgdG8gc291cmNlIGludG8gdGhlIGFwcGxpY2F0aW9uLiAgQ3VycmVudGx5IHVudXNlZC4gIEZlZWwgZnJlZSB0byB1c2UgaXQgaW4geW91ciBvd24gZGlyZWN0aXZlcy4gfFxuICogfCBgJHNjZS5NRURJQV9VUkxgICAgIHwgRm9yIFVSTHMgdGhhdCBhcmUgc2FmZSB0byByZW5kZXIgYXMgbWVkaWEuIElzIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIGZyb20gc3RyaW5nIGJ5IHNhbml0aXppbmcgd2hlbiBuZWVkZWQuIHxcbiAqIHwgYCRzY2UuVVJMYCAgICAgICAgICB8IEZvciBVUkxzIHRoYXQgYXJlIHNhZmUgdG8gZm9sbG93IGFzIGxpbmtzLiBJcyBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCBmcm9tIHN0cmluZyBieSBzYW5pdGl6aW5nIHdoZW4gbmVlZGVkLiBOb3RlIHRoYXQgYCRzY2UuVVJMYCBtYWtlcyBhIHN0cm9uZ2VyIHN0YXRlbWVudCBhYm91dCB0aGUgVVJMIHRoYW4gYCRzY2UuTUVESUFfVVJMYCBkb2VzIGFuZCB0aGVyZWZvcmUgY29udGV4dHMgcmVxdWlyaW5nIHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5VUkxgIGNhbiBiZSB1c2VkIGFueXdoZXJlIHRoYXQgdmFsdWVzIHRydXN0ZWQgZm9yIGAkc2NlLk1FRElBX1VSTGAgYXJlIHJlcXVpcmVkLnxcbiAqIHwgYCRzY2UuUkVTT1VSQ0VfVVJMYCB8IEZvciBVUkxzIHRoYXQgYXJlIG5vdCBvbmx5IHNhZmUgdG8gZm9sbG93IGFzIGxpbmtzLCBidXQgd2hvc2UgY29udGVudHMgYXJlIGFsc28gc2FmZSB0byBpbmNsdWRlIGluIHlvdXIgYXBwbGljYXRpb24uICBFeGFtcGxlcyBpbmNsdWRlIGBuZy1pbmNsdWRlYCwgYHNyY2AgLyBgbmdTcmNgIGJpbmRpbmdzIGZvciB0YWdzIG90aGVyIHRoYW4gYElNR2AgKGUuZy4gYElGUkFNRWAsIGBPQkpFQ1RgLCBldGMuKSAgPGJyPjxicj5Ob3RlIHRoYXQgYCRzY2UuUkVTT1VSQ0VfVVJMYCBtYWtlcyBhIHN0cm9uZ2VyIHN0YXRlbWVudCBhYm91dCB0aGUgVVJMIHRoYW4gYCRzY2UuVVJMYCBvciBgJHNjZS5NRURJQV9VUkxgIGRvIGFuZCB0aGVyZWZvcmUgY29udGV4dHMgcmVxdWlyaW5nIHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5SRVNPVVJDRV9VUkxgIGNhbiBiZSB1c2VkIGFueXdoZXJlIHRoYXQgdmFsdWVzIHRydXN0ZWQgZm9yIGAkc2NlLlVSTGAgb3IgYCRzY2UuTUVESUFfVVJMYCBhcmUgcmVxdWlyZWQuIHxcbiAqIHwgYCRzY2UuSlNgICAgICAgICAgICB8IEZvciBKYXZhU2NyaXB0IHRoYXQgaXMgc2FmZSB0byBleGVjdXRlIGluIHlvdXIgYXBwbGljYXRpb24ncyBjb250ZXh0LiAgQ3VycmVudGx5IHVudXNlZC4gIEZlZWwgZnJlZSB0byB1c2UgaXQgaW4geW91ciBvd24gZGlyZWN0aXZlcy4gfFxuICpcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogQmUgYXdhcmUgdGhhdCwgYmVmb3JlIEFuZ3VsYXJKUyAxLjcuMCwgYGFbaHJlZl1gIGFuZCBgaW1nW3NyY11gIHVzZWQgdG8gc2FuaXRpemUgdGhlaXJcbiAqIGludGVycG9sYXRlZCB2YWx1ZXMgZGlyZWN0bHkgcmF0aGVyIHRoYW4gcmVseSB1cG9uIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgYCRzY2UuZ2V0VHJ1c3RlZGB9LlxuICpcbiAqICoqQXMgb2YgMS43LjAsIHRoaXMgaXMgbm8gbG9uZ2VyIHRoZSBjYXNlLioqXG4gKlxuICogTm93IHN1Y2ggaW50ZXJwb2xhdGlvbnMgYXJlIG1hcmtlZCBhcyByZXF1aXJpbmcgYCRzY2UuVVJMYCAoZm9yIGBhW2hyZWZdYCkgb3IgYCRzY2UuTUVESUFfVVJMYFxuICogKGZvciBgaW1nW3NyY11gKSwgc28gdGhhdCB0aGUgc2FuaXRpemF0aW9uIGhhcHBlbnMgKHZpYSBgJHNjZS5nZXRUcnVzdGVkLi4uYCkgd2hlbiB0aGUgYCRpbnRlcnBvbGF0ZWBcbiAqIHNlcnZpY2UgZXZhbHVhdGVzIHRoZSBleHByZXNzaW9ucy5cbiAqIDwvZGl2PlxuICpcbiAqIFRoZXJlIGFyZSBubyBDU1Mgb3IgSlMgY29udGV4dCBiaW5kaW5ncyBpbiBBbmd1bGFySlMgY3VycmVudGx5LCBzbyB0aGVpciBjb3JyZXNwb25kaW5nIGAkc2NlLnRydXN0QXNgXG4gKiBmdW5jdGlvbnMgYXJlbid0IHVzZWZ1bCB5ZXQuIFRoaXMgbWlnaHQgZXZvbHZlLlxuICpcbiAqICMjIyBGb3JtYXQgb2YgaXRlbXMgaW4ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHJlc291cmNlVXJsV2hpdGVsaXN0fS97QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgQmxhY2tsaXN0fSA8YSBuYW1lPVwicmVzb3VyY2VVcmxQYXR0ZXJuSXRlbVwiPjwvYT5cbiAqXG4gKiAgRWFjaCBlbGVtZW50IGluIHRoZXNlIGFycmF5cyBtdXN0IGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nOlxuICpcbiAqICAtICoqJ3NlbGYnKipcbiAqICAgIC0gVGhlIHNwZWNpYWwgKipzdHJpbmcqKiwgYCdzZWxmJ2AsIGNhbiBiZSB1c2VkIHRvIG1hdGNoIGFnYWluc3QgYWxsIFVSTHMgb2YgdGhlICoqc2FtZVxuICogICAgICBkb21haW4qKiBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQgdXNpbmcgdGhlICoqc2FtZSBwcm90b2NvbCoqLlxuICogIC0gKipTdHJpbmcqKiAoZXhjZXB0IHRoZSBzcGVjaWFsIHZhbHVlIGAnc2VsZidgKVxuICogICAgLSBUaGUgc3RyaW5nIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgZnVsbCAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlXG4gKiAgICAgIGJlaW5nIHRlc3RlZCAoc3Vic3RyaW5nIG1hdGNoZXMgYXJlIG5vdCBnb29kIGVub3VnaC4pXG4gKiAgICAtIFRoZXJlIGFyZSBleGFjdGx5ICoqdHdvIHdpbGRjYXJkIHNlcXVlbmNlcyoqIC0gYCpgIGFuZCBgKipgLiAgQWxsIG90aGVyIGNoYXJhY3RlcnNcbiAqICAgICAgbWF0Y2ggdGhlbXNlbHZlcy5cbiAqICAgIC0gYCpgOiBtYXRjaGVzIHplcm8gb3IgbW9yZSBvY2N1cnJlbmNlcyBvZiBhbnkgY2hhcmFjdGVyIG90aGVyIHRoYW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgNlxuICogICAgICBjaGFyYWN0ZXJzOiAnYDpgJywgJ2AvYCcsICdgLmAnLCAnYD9gJywgJ2AmYCcgYW5kICdgO2AnLiAgSXQncyBhIHVzZWZ1bCB3aWxkY2FyZCBmb3IgdXNlXG4gKiAgICAgIGluIGEgd2hpdGVsaXN0LlxuICogICAgLSBgKipgOiBtYXRjaGVzIHplcm8gb3IgbW9yZSBvY2N1cnJlbmNlcyBvZiAqYW55KiBjaGFyYWN0ZXIuICBBcyBzdWNoLCBpdCdzIG5vdFxuICogICAgICBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIGEgc2NoZW1lLCBkb21haW4sIGV0Yy4gYXMgaXQgd291bGQgbWF0Y2ggdG9vIG11Y2guICAoZS5nLlxuICogICAgICBodHRwOi8vKiouZXhhbXBsZS5jb20vIHdvdWxkIG1hdGNoIGh0dHA6Ly9ldmlsLmNvbS8/aWdub3JlPS5leGFtcGxlLmNvbS8gYW5kIHRoYXQgbWlnaHRcbiAqICAgICAgbm90IGhhdmUgYmVlbiB0aGUgaW50ZW50aW9uLikgIEl0cyB1c2FnZSBhdCB0aGUgdmVyeSBlbmQgb2YgdGhlIHBhdGggaXMgb2suICAoZS5nLlxuICogICAgICBodHRwOi8vZm9vLmV4YW1wbGUuY29tL3RlbXBsYXRlcy8qKikuXG4gKiAgLSAqKlJlZ0V4cCoqICgqc2VlIGNhdmVhdCBiZWxvdyopXG4gKiAgICAtICpDYXZlYXQqOiAgV2hpbGUgcmVndWxhciBleHByZXNzaW9ucyBhcmUgcG93ZXJmdWwgYW5kIG9mZmVyIGdyZWF0IGZsZXhpYmlsaXR5LCAgdGhlaXIgc3ludGF4XG4gKiAgICAgIChhbmQgYWxsIHRoZSBpbmV2aXRhYmxlIGVzY2FwaW5nKSBtYWtlcyB0aGVtICpoYXJkZXIgdG8gbWFpbnRhaW4qLiAgSXQncyBlYXN5IHRvXG4gKiAgICAgIGFjY2lkZW50YWxseSBpbnRyb2R1Y2UgYSBidWcgd2hlbiBvbmUgdXBkYXRlcyBhIGNvbXBsZXggZXhwcmVzc2lvbiAoaW1obywgYWxsIHJlZ2V4ZXMgc2hvdWxkXG4gKiAgICAgIGhhdmUgZ29vZCB0ZXN0IGNvdmVyYWdlKS4gIEZvciBpbnN0YW5jZSwgdGhlIHVzZSBvZiBgLmAgaW4gdGhlIHJlZ2V4IGlzIGNvcnJlY3Qgb25seSBpbiBhXG4gKiAgICAgIHNtYWxsIG51bWJlciBvZiBjYXNlcy4gIEEgYC5gIGNoYXJhY3RlciBpbiB0aGUgcmVnZXggdXNlZCB3aGVuIG1hdGNoaW5nIHRoZSBzY2hlbWUgb3IgYVxuICogICAgICBzdWJkb21haW4gY291bGQgYmUgbWF0Y2hlZCBhZ2FpbnN0IGEgYDpgIG9yIGxpdGVyYWwgYC5gIHRoYXQgd2FzIGxpa2VseSBub3QgaW50ZW5kZWQuICAgSXRcbiAqICAgICAgaXMgaGlnaGx5IHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgc3RyaW5nIHBhdHRlcm5zIGFuZCBvbmx5IGZhbGwgYmFjayB0byByZWd1bGFyIGV4cHJlc3Npb25zXG4gKiAgICAgIGFzIGEgbGFzdCByZXNvcnQuXG4gKiAgICAtIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBSZWdFeHAgKGkuZS4gbm90IGEgc3RyaW5nLikgIEl0IGlzXG4gKiAgICAgIG1hdGNoZWQgYWdhaW5zdCB0aGUgKiplbnRpcmUqKiAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlIGJlaW5nIHRlc3RlZFxuICogICAgICAoZXZlbiB3aGVuIHRoZSBSZWdFeHAgZGlkIG5vdCBoYXZlIHRoZSBgXmAgYW5kIGAkYCBjb2Rlcy4pICBJbiBhZGRpdGlvbiwgYW55IGZsYWdzXG4gKiAgICAgIHByZXNlbnQgb24gdGhlIFJlZ0V4cCAoc3VjaCBhcyBtdWx0aWxpbmUsIGdsb2JhbCwgaWdub3JlQ2FzZSkgYXJlIGlnbm9yZWQuXG4gKiAgICAtIElmIHlvdSBhcmUgZ2VuZXJhdGluZyB5b3VyIEphdmFTY3JpcHQgZnJvbSBzb21lIG90aGVyIHRlbXBsYXRpbmcgZW5naW5lIChub3RcbiAqICAgICAgcmVjb21tZW5kZWQsIGUuZy4gaW4gaXNzdWUgWyM0MDA2XShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy80MDA2KSksXG4gKiAgICAgIHJlbWVtYmVyIHRvIGVzY2FwZSB5b3VyIHJlZ3VsYXIgZXhwcmVzc2lvbiAoYW5kIGJlIGF3YXJlIHRoYXQgeW91IG1pZ2h0IG5lZWQgbW9yZSB0aGFuXG4gKiAgICAgIG9uZSBsZXZlbCBvZiBlc2NhcGluZyBkZXBlbmRpbmcgb24geW91ciB0ZW1wbGF0aW5nIGVuZ2luZSBhbmQgdGhlIHdheSB5b3UgaW50ZXJwb2xhdGVkXG4gKiAgICAgIHRoZSB2YWx1ZS4pICBEbyBtYWtlIHVzZSBvZiB5b3VyIHBsYXRmb3JtJ3MgZXNjYXBpbmcgbWVjaGFuaXNtIGFzIGl0IG1pZ2h0IGJlIGdvb2RcbiAqICAgICAgZW5vdWdoIGJlZm9yZSBjb2RpbmcgeW91ciBvd24uICBFLmcuIFJ1YnkgaGFzXG4gKiAgICAgIFtSZWdleHAuZXNjYXBlKHN0cildKGh0dHA6Ly93d3cucnVieS1kb2Mub3JnL2NvcmUtMi4wLjAvUmVnZXhwLmh0bWwjbWV0aG9kLWMtZXNjYXBlKVxuICogICAgICBhbmQgUHl0aG9uIGhhcyBbcmUuZXNjYXBlXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvcmUuaHRtbCNyZS5lc2NhcGUpLlxuICogICAgICBKYXZhc2NyaXB0IGxhY2tzIGEgc2ltaWxhciBidWlsdCBpbiBmdW5jdGlvbiBmb3IgZXNjYXBpbmcuICBUYWtlIGEgbG9vayBhdCBHb29nbGVcbiAqICAgICAgQ2xvc3VyZSBsaWJyYXJ5J3MgW2dvb2cuc3RyaW5nLnJlZ0V4cEVzY2FwZShzKV0oXG4gKiAgICAgIGh0dHA6Ly9kb2NzLmNsb3N1cmUtbGlicmFyeS5nb29nbGVjb2RlLmNvbS9naXQvY2xvc3VyZV9nb29nX3N0cmluZ19zdHJpbmcuanMuc291cmNlLmh0bWwjbGluZTk2MikuXG4gKlxuICogUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBmb3IgYW4gZXhhbXBsZS5cbiAqXG4gKiAjIyMgU2hvdyBtZSBhbiBleGFtcGxlIHVzaW5nIFNDRS5cbiAqXG4gKiA8ZXhhbXBsZSBtb2R1bGU9XCJteVNjZUFwcFwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCIgbmFtZT1cInNjZS1zZXJ2aWNlXCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJBcHBDb250cm9sbGVyIGFzIG15Q3RybFwiPlxuICogICAgIDxpIG5nLWJpbmQtaHRtbD1cIm15Q3RybC5leHBsaWNpdGx5VHJ1c3RlZEh0bWxcIiBpZD1cImV4cGxpY2l0bHlUcnVzdGVkSHRtbFwiPjwvaT48YnI+PGJyPlxuICogICAgIDxiPlVzZXIgY29tbWVudHM8L2I+PGJyPlxuICogICAgIEJ5IGRlZmF1bHQsIEhUTUwgdGhhdCBpc24ndCBleHBsaWNpdGx5IHRydXN0ZWQgKGUuZy4gQWxpY2UncyBjb21tZW50KSBpcyBzYW5pdGl6ZWQgd2hlblxuICogICAgICRzYW5pdGl6ZSBpcyBhdmFpbGFibGUuICBJZiAkc2FuaXRpemUgaXNuJ3QgYXZhaWxhYmxlLCB0aGlzIHJlc3VsdHMgaW4gYW4gZXJyb3IgaW5zdGVhZCBvZiBhblxuICogICAgIGV4cGxvaXQuXG4gKiAgICAgPGRpdiBjbGFzcz1cIndlbGxcIj5cbiAqICAgICAgIDxkaXYgbmctcmVwZWF0PVwidXNlckNvbW1lbnQgaW4gbXlDdHJsLnVzZXJDb21tZW50c1wiPlxuICogICAgICAgICA8Yj57e3VzZXJDb21tZW50Lm5hbWV9fTwvYj46XG4gKiAgICAgICAgIDxzcGFuIG5nLWJpbmQtaHRtbD1cInVzZXJDb21tZW50Lmh0bWxDb21tZW50XCIgY2xhc3M9XCJodG1sQ29tbWVudFwiPjwvc3Bhbj5cbiAqICAgICAgICAgPGJyPlxuICogICAgICAgPC9kaXY+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9maWxlPlxuICpcbiAqIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAqICAgYW5ndWxhci5tb2R1bGUoJ215U2NlQXBwJywgWyduZ1Nhbml0aXplJ10pXG4gKiAgICAgLmNvbnRyb2xsZXIoJ0FwcENvbnRyb2xsZXInLCBbJyRodHRwJywgJyR0ZW1wbGF0ZUNhY2hlJywgJyRzY2UnLFxuICogICAgICAgZnVuY3Rpb24gQXBwQ29udHJvbGxlcigkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRzY2UpIHtcbiAqICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICogICAgICAgICAkaHR0cC5nZXQoJ3Rlc3RfZGF0YS5qc29uJywge2NhY2hlOiAkdGVtcGxhdGVDYWNoZX0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAqICAgICAgICAgICBzZWxmLnVzZXJDb21tZW50cyA9IHJlc3BvbnNlLmRhdGE7XG4gKiAgICAgICAgIH0pO1xuICogICAgICAgICBzZWxmLmV4cGxpY2l0bHlUcnVzdGVkSHRtbCA9ICRzY2UudHJ1c3RBc0h0bWwoXG4gKiAgICAgICAgICAgICAnPHNwYW4gb25tb3VzZW92ZXI9XCJ0aGlzLnRleHRDb250ZW50PSZxdW90O0V4cGxpY2l0bHkgdHJ1c3RlZCBIVE1MIGJ5cGFzc2VzICcgK1xuICogICAgICAgICAgICAgJ3Nhbml0aXphdGlvbi4mcXVvdDtcIj5Ib3ZlciBvdmVyIHRoaXMgdGV4dC48L3NwYW4+Jyk7XG4gKiAgICAgICB9XSk7XG4gKiA8L2ZpbGU+XG4gKlxuICogPGZpbGUgbmFtZT1cInRlc3RfZGF0YS5qc29uXCI+XG4gKiBbXG4gKiAgIHsgXCJuYW1lXCI6IFwiQWxpY2VcIixcbiAqICAgICBcImh0bWxDb21tZW50XCI6XG4gKiAgICAgICAgIFwiPHNwYW4gb25tb3VzZW92ZXI9J3RoaXMudGV4dENvbnRlbnQ9XFxcIlBXTjNEIVxcXCInPklzIDxpPmFueW9uZTwvaT4gcmVhZGluZyB0aGlzPzwvc3Bhbj5cIlxuICogICB9LFxuICogICB7IFwibmFtZVwiOiBcIkJvYlwiLFxuICogICAgIFwiaHRtbENvbW1lbnRcIjogXCI8aT5ZZXMhPC9pPiAgQW0gSSB0aGUgb25seSBvdGhlciBvbmU/XCJcbiAqICAgfVxuICogXVxuICogPC9maWxlPlxuICpcbiAqIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgZGVzY3JpYmUoJ1NDRSBkb2MgZGVtbycsIGZ1bmN0aW9uKCkge1xuICogICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdW50cnVzdGVkIHZhbHVlcycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnLmh0bWxDb21tZW50JykpLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdpbm5lckhUTUwnKSlcbiAqICAgICAgICAgICAudG9CZSgnPHNwYW4+SXMgPGk+YW55b25lPC9pPiByZWFkaW5nIHRoaXM/PC9zcGFuPicpO1xuICogICAgIH0pO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIE5PVCBzYW5pdGl6ZSBleHBsaWNpdGx5IHRydXN0ZWQgdmFsdWVzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZXhwbGljaXRseVRydXN0ZWRIdG1sJykpLmdldEF0dHJpYnV0ZSgnaW5uZXJIVE1MJykpLnRvQmUoXG4gKiAgICAgICAgICAgJzxzcGFuIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD0mcXVvdDtFeHBsaWNpdGx5IHRydXN0ZWQgSFRNTCBieXBhc3NlcyAnICtcbiAqICAgICAgICAgICAnc2FuaXRpemF0aW9uLiZxdW90O1wiPkhvdmVyIG92ZXIgdGhpcyB0ZXh0Ljwvc3Bhbj4nKTtcbiAqICAgICB9KTtcbiAqICAgfSk7XG4gKiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqXG4gKiAjIyBDYW4gSSBkaXNhYmxlIFNDRSBjb21wbGV0ZWx5P1xuICpcbiAqIFllcywgeW91IGNhbi4gIEhvd2V2ZXIsIHRoaXMgaXMgc3Ryb25nbHkgZGlzY291cmFnZWQuICBTQ0UgZ2l2ZXMgeW91IGEgbG90IG9mIHNlY3VyaXR5IGJlbmVmaXRzXG4gKiBmb3IgbGl0dGxlIGNvZGluZyBvdmVyaGVhZC4gIEl0IHdpbGwgYmUgbXVjaCBoYXJkZXIgdG8gdGFrZSBhbiBTQ0UgZGlzYWJsZWQgYXBwbGljYXRpb24gYW5kXG4gKiBlaXRoZXIgc2VjdXJlIGl0IG9uIHlvdXIgb3duIG9yIGVuYWJsZSBTQ0UgYXQgYSBsYXRlciBzdGFnZS4gIEl0IG1pZ2h0IG1ha2Ugc2Vuc2UgdG8gZGlzYWJsZSBTQ0VcbiAqIGZvciBjYXNlcyB3aGVyZSB5b3UgaGF2ZSBhIGxvdCBvZiBleGlzdGluZyBjb2RlIHRoYXQgd2FzIHdyaXR0ZW4gYmVmb3JlIFNDRSB3YXMgaW50cm9kdWNlZCBhbmRcbiAqIHlvdSdyZSBtaWdyYXRpbmcgdGhlbSBhIG1vZHVsZSBhdCBhIHRpbWUuIEFsc28gZG8gbm90ZSB0aGF0IHRoaXMgaXMgYW4gYXBwLXdpZGUgc2V0dGluZywgc28gaWZcbiAqIHlvdSBhcmUgd3JpdGluZyBhIGxpYnJhcnksIHlvdSB3aWxsIGNhdXNlIHNlY3VyaXR5IGJ1Z3MgYXBwbGljYXRpb25zIHVzaW5nIGl0LlxuICpcbiAqIFRoYXQgc2FpZCwgaGVyZSdzIGhvdyB5b3UgY2FuIGNvbXBsZXRlbHkgZGlzYWJsZSBTQ0U6XG4gKlxuICogYGBgXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHBXaXRoU2NlRGlzYWJsZWRteUFwcCcsIFtdKS5jb25maWcoZnVuY3Rpb24oJHNjZVByb3ZpZGVyKSB7XG4gKiAgIC8vIENvbXBsZXRlbHkgZGlzYWJsZSBTQ0UuICBGb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IVxuICogICAvLyBEbyBub3QgdXNlIGluIG5ldyBwcm9qZWN0cyBvciBsaWJyYXJpZXMuXG4gKiAgICRzY2VQcm92aWRlci5lbmFibGVkKGZhbHNlKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICovXG5cbmZ1bmN0aW9uICRTY2VQcm92aWRlcigpIHtcbiAgdmFyIGVuYWJsZWQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRzY2VQcm92aWRlciNlbmFibGVkXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHZhbHVlIElmIHByb3ZpZGVkLCB0aGVuIGVuYWJsZXMvZGlzYWJsZXMgU0NFIGFwcGxpY2F0aW9uLXdpZGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgU0NFIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEVuYWJsZXMvZGlzYWJsZXMgU0NFIGFuZCByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgKi9cbiAgdGhpcy5lbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgZW5hYmxlZCA9ICEhdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBlbmFibGVkO1xuICB9O1xuXG5cbiAgLyogRGVzaWduIG5vdGVzIG9uIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGZvciBTQ0UuXG4gICAqXG4gICAqIFRoZSBBUEkgY29udHJhY3QgZm9yIHRoZSBTQ0UgZGVsZWdhdGVcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBUaGUgU0NFIGRlbGVnYXRlIG9iamVjdCBtdXN0IHByb3ZpZGUgdGhlIGZvbGxvd2luZyAzIG1ldGhvZHM6XG4gICAqXG4gICAqIC0gdHJ1c3RBcyhjb250ZXh0RW51bSwgdmFsdWUpXG4gICAqICAgICBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHRlbGwgdGhlIFNDRSBzZXJ2aWNlIHRoYXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIE9LIHRvIHVzZSBpbiB0aGVcbiAgICogICAgIGNvbnRleHRzIHNwZWNpZmllZCBieSBjb250ZXh0RW51bS4gIEl0IG11c3QgcmV0dXJuIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgYWNjZXB0ZWQgYnlcbiAgICogICAgIGdldFRydXN0ZWQoKSBmb3IgYSBjb21wYXRpYmxlIGNvbnRleHRFbnVtIGFuZCByZXR1cm4gdGhpcyB2YWx1ZS5cbiAgICpcbiAgICogLSB2YWx1ZU9mKHZhbHVlKVxuICAgKiAgICAgRm9yIHZhbHVlcyB0aGF0IHdlcmUgbm90IHByb2R1Y2VkIGJ5IHRydXN0QXMoKSwgcmV0dXJuIHRoZW0gYXMgaXMuICBGb3IgdmFsdWVzIHRoYXQgd2VyZVxuICAgKiAgICAgcHJvZHVjZWQgYnkgdHJ1c3RBcygpLCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgaW5wdXQgdmFsdWUgdG8gdHJ1c3RBcy4gIEJhc2ljYWxseSwgaWZcbiAgICogICAgIHRydXN0QXMgaXMgd3JhcHBpbmcgdGhlIGdpdmVuIHZhbHVlcyBpbnRvIHNvbWUgdHlwZSwgdGhpcyBvcGVyYXRpb24gdW53cmFwcyBpdCB3aGVuIGdpdmVuXG4gICAqICAgICBzdWNoIGEgdmFsdWUuXG4gICAqXG4gICAqIC0gZ2V0VHJ1c3RlZChjb250ZXh0RW51bSwgdmFsdWUpXG4gICAqICAgICBUaGlzIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gdGhlIHZhbHVlIHRoYXQgaXMgc2FmZSB0byB1c2UgaW4gdGhlIGNvbnRleHQgc3BlY2lmaWVkIGJ5XG4gICAqICAgICBjb250ZXh0RW51bSBvciB0aHJvdyBhbmQgZXhjZXB0aW9uIG90aGVyd2lzZS5cbiAgICpcbiAgICogTk9URTogVGhpcyBjb250cmFjdCBkZWxpYmVyYXRlbHkgZG9lcyBOT1Qgc3RhdGUgdGhhdCB2YWx1ZXMgcmV0dXJuZWQgYnkgdHJ1c3RBcygpIG11c3QgYmVcbiAgICogb3BhcXVlIG9yIHdyYXBwZWQgaW4gc29tZSBob2xkZXIgb2JqZWN0LiAgVGhhdCBoYXBwZW5zIHRvIGJlIGFuIGltcGxlbWVudGF0aW9uIGRldGFpbC4gIEZvclxuICAgKiBpbnN0YW5jZSwgYW4gaW1wbGVtZW50YXRpb24gY291bGQgbWFpbnRhaW4gYSByZWdpc3RyeSBvZiBhbGwgdHJ1c3RlZCBvYmplY3RzIGJ5IGNvbnRleHQuICBJblxuICAgKiBzdWNoIGEgY2FzZSwgdHJ1c3RBcygpIHdvdWxkIHJldHVybiB0aGUgc2FtZSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIGluLiAgZ2V0VHJ1c3RlZCgpIHdvdWxkXG4gICAqIHJldHVybiB0aGUgc2FtZSBvYmplY3QgcGFzc2VkIGluIGlmIGl0IHdhcyBmb3VuZCBpbiB0aGUgcmVnaXN0cnkgdW5kZXIgYSBjb21wYXRpYmxlIGNvbnRleHQgb3JcbiAgICogdGhyb3cgYW4gZXhjZXB0aW9uIG90aGVyd2lzZS4gIEFuIGltcGxlbWVudGF0aW9uIG1pZ2h0IG9ubHkgd3JhcCB2YWx1ZXMgc29tZSBvZiB0aGUgdGltZSBiYXNlZFxuICAgKiBvbiBzb21lIGNyaXRlcmlhLiAgZ2V0VHJ1c3RlZCgpIG1pZ2h0IHJldHVybiBhIHZhbHVlIGFuZCBub3QgdGhyb3cgYW4gZXhjZXB0aW9uIGZvciBzcGVjaWFsXG4gICAqIGNvbnN0YW50cyBvciBvYmplY3RzIGV2ZW4gaWYgbm90IHdyYXBwZWQuICBBbGwgc3VjaCBpbXBsZW1lbnRhdGlvbnMgZnVsZmlsbCB0aGlzIGNvbnRyYWN0LlxuICAgKlxuICAgKlxuICAgKiBBIG5vdGUgb24gdGhlIGluaGVyaXRhbmNlIG1vZGVsIGZvciBTQ0UgY29udGV4dHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEkndmUgdXNlZCBpbmhlcml0YW5jZSBhbmQgbWFkZSBSRVNPVVJDRV9VUkwgd3JhcHBlZCB0eXBlcyBhIHN1YnR5cGUgb2YgVVJMIHdyYXBwZWQgdHlwZXMuICBUaGlzXG4gICAqIGlzIHB1cmVseSBhbiBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLlxuICAgKlxuICAgKiBUaGUgY29udHJhY3QgaXMgc2ltcGx5IHRoaXM6XG4gICAqXG4gICAqICAgICBnZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSkgc3VjY2VlZGluZyBpbXBsaWVzIHRoYXQgZ2V0VHJ1c3RlZCgkc2NlLlVSTCwgdmFsdWUpXG4gICAqICAgICB3aWxsIGFsc28gc3VjY2VlZC5cbiAgICpcbiAgICogSW5oZXJpdGFuY2UgaGFwcGVucyB0byBjYXB0dXJlIHRoaXMgaW4gYSBuYXR1cmFsIHdheS4gSW4gc29tZSBmdXR1cmUsIHdlIG1heSBub3QgdXNlXG4gICAqIGluaGVyaXRhbmNlIGFueW1vcmUuIFRoYXQgaXMgT0sgYmVjYXVzZSBubyBjb2RlIG91dHNpZGUgb2Ygc2NlLmpzIGFuZCBzY2VTcGVjcy5qcyB3b3VsZCBuZWVkIHRvXG4gICAqIGJlIGF3YXJlIG9mIHRoaXMgZGV0YWlsLlxuICAgKi9cblxuICB0aGlzLiRnZXQgPSBbJyRwYXJzZScsICckc2NlRGVsZWdhdGUnLCBmdW5jdGlvbihcbiAgICAgICAgICAgICAgICAkcGFyc2UsICAgJHNjZURlbGVnYXRlKSB7XG4gICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgLy8gUHJlcmVxOiBFbnN1cmUgdGhhdCB3ZSdyZSBub3QgcnVubmluZyBpbiBJRTwxMSBxdWlya3MgbW9kZS4gIEluIHRoYXQgbW9kZSwgSUUgPCAxMSBhbGxvd1xuICAgIC8vIHRoZSBcImV4cHJlc3Npb24oamF2YXNjcmlwdCBleHByZXNzaW9uKVwiIHN5bnRheCB3aGljaCBpcyBpbnNlY3VyZS5cbiAgICBpZiAoZW5hYmxlZCAmJiBtc2llIDwgOCkge1xuICAgICAgdGhyb3cgJHNjZU1pbkVycignaWVxdWlya3MnLFxuICAgICAgICAnU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgZG9lcyBub3Qgc3VwcG9ydCBJbnRlcm5ldCBFeHBsb3JlciB2ZXJzaW9uIDwgMTEgaW4gcXVpcmtzICcgK1xuICAgICAgICAnbW9kZS4gIFlvdSBjYW4gZml4IHRoaXMgYnkgYWRkaW5nIHRoZSB0ZXh0IDwhZG9jdHlwZSBodG1sPiB0byB0aGUgdG9wIG9mIHlvdXIgSFRNTCAnICtcbiAgICAgICAgJ2RvY3VtZW50LiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIHNjZSA9IHNoYWxsb3dDb3B5KFNDRV9DT05URVhUUyk7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNpc0VuYWJsZWRcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBTQ0UgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLiAgSWYgeW91IHdhbnQgdG8gc2V0IHRoZSB2YWx1ZSwgeW91XG4gICAgICogICAgIGhhdmUgdG8gZG8gaXQgYXQgbW9kdWxlIGNvbmZpZyB0aW1lIG9uIHtAbGluayBuZy4kc2NlUHJvdmlkZXIgJHNjZVByb3ZpZGVyfS5cbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgaWYgU0NFIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgc2NlLmlzRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgfTtcbiAgICBzY2UudHJ1c3RBcyA9ICRzY2VEZWxlZ2F0ZS50cnVzdEFzO1xuICAgIHNjZS5nZXRUcnVzdGVkID0gJHNjZURlbGVnYXRlLmdldFRydXN0ZWQ7XG4gICAgc2NlLnZhbHVlT2YgPSAkc2NlRGVsZWdhdGUudmFsdWVPZjtcblxuICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgc2NlLnRydXN0QXMgPSBzY2UuZ2V0VHJ1c3RlZCA9IGZ1bmN0aW9uKHR5cGUsIHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcbiAgICAgIHNjZS52YWx1ZU9mID0gaWRlbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ29udmVydHMgQW5ndWxhckpTIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGludG8gYSBmdW5jdGlvbi4gIFRoaXMgaXMgbGlrZSB7QGxpbmtcbiAgICAgKiBuZy4kcGFyc2UgJHBhcnNlfSBhbmQgaXMgaWRlbnRpY2FsIHdoZW4gdGhlIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIGNvbnN0YW50LiAgT3RoZXJ3aXNlLCBpdFxuICAgICAqIHdyYXBzIHRoZSBleHByZXNzaW9uIGluIGEgY2FsbCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZCgqdHlwZSosXG4gICAgICogKnJlc3VsdCopfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIFNDRSBjb250ZXh0IGluIHdoaWNoIHRoaXMgcmVzdWx0IHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG4gICAgc2NlLnBhcnNlQXMgPSBmdW5jdGlvbiBzY2VQYXJzZUFzKHR5cGUsIGV4cHIpIHtcbiAgICAgIHZhciBwYXJzZWQgPSAkcGFyc2UoZXhwcik7XG4gICAgICBpZiAocGFyc2VkLmxpdGVyYWwgJiYgcGFyc2VkLmNvbnN0YW50KSB7XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHBhcnNlKGV4cHIsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHNjZS5nZXRUcnVzdGVkKHR5cGUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIERlbGVnYXRlcyB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0uIEFzIHN1Y2gsIHJldHVybnMgYVxuICAgICAqIHdyYXBwZWQgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB5b3VyIHZhbHVlLCBhbmQgdGhlIHRydXN0IHlvdSBoYXZlIGluIGl0cyBzYWZldHkgZm9yIHRoZSBnaXZlblxuICAgICAqIGNvbnRleHQuIEFuZ3VsYXJKUyBjYW4gdGhlbiB1c2UgdGhhdCB2YWx1ZSBhcy1pcyBpbiBiaW5kaW5ncyBvZiB0aGUgc3BlY2lmaWVkIHNlY3VyZSBjb250ZXh0LlxuICAgICAqIFRoaXMgaXMgdXNlZCBpbiBiaW5kaW5ncyBmb3IgYG5nLWJpbmQtaHRtbGAsIGBuZy1pbmNsdWRlYCwgYW5kIG1vc3QgYHNyY2AgYXR0cmlidXRlXG4gICAgICogaW50ZXJwb2xhdGlvbnMuIFNlZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBmb3Igc3RyaWN0IGNvbnRleHR1YWwgZXNjYXBpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHNhZmUgZm9yIHVzZSwgZS5nLiBgJHNjZS5VUkxgLFxuICAgICAqICAgICBgJHNjZS5SRVNPVVJDRV9VUkxgLCBgJHNjZS5IVE1MYCwgYCRzY2UuSlNgIG9yIGAkc2NlLkNTU2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0aGF0IHRoYXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50IG9mIHlvdXIgYHZhbHVlYFxuICAgICAqICAgICBpbiB0aGUgY29udGV4dCB5b3Ugc3BlY2lmaWVkLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc0h0bWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzSHRtbCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuSFRNTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcmsgYXMgdHJ1c3RlZCBmb3IgYCRzY2UuSFRNTGAgY29udGV4dC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50IG9mIHlvdXIgYHZhbHVlYFxuICAgICAqICAgICBpbiBgJHNjZS5IVE1MYCBjb250ZXh0IChsaWtlIGBuZy1iaW5kLWh0bWxgKS5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNDc3NcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzQ3NzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5DU1MsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBtYXJrIGFzIHRydXN0ZWQgZm9yIGAkc2NlLkNTU2AgY29udGV4dC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50XG4gICAgICogICAgIG9mIHlvdXIgYHZhbHVlYCBpbiBgJHNjZS5DU1NgIGNvbnRleHQuIFRoaXMgY29udGV4dCBpcyBjdXJyZW50bHkgdW51c2VkLCBzbyB0aGVyZSBhcmVcbiAgICAgKiAgICAgYWxtb3N0IG5vIHJlYXNvbnMgdG8gdXNlIHRoaXMgZnVuY3Rpb24gc28gZmFyLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1VybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLlVSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcmsgYXMgdHJ1c3RlZCBmb3IgYCRzY2UuVVJMYCBjb250ZXh0LlxuICAgICAqIEByZXR1cm4geyp9IEEgd3JhcHBlZCB2ZXJzaW9uIG9mIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0cnVzdGVkIHZhcmlhbnQgb2YgeW91ciBgdmFsdWVgXG4gICAgICogICAgIGluIGAkc2NlLlVSTGAgY29udGV4dC4gVGhhdCBjb250ZXh0IGlzIGN1cnJlbnRseSB1bnVzZWQsIHNvIHRoZXJlIGFyZSBhbG1vc3Qgbm8gcmVhc29uc1xuICAgICAqICAgICB0byB1c2UgdGhpcyBmdW5jdGlvbiBzbyBmYXIuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcmsgYXMgdHJ1c3RlZCBmb3IgYCRzY2UuUkVTT1VSQ0VfVVJMYCBjb250ZXh0LlxuICAgICAqIEByZXR1cm4geyp9IEEgd3JhcHBlZCB2ZXJzaW9uIG9mIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0cnVzdGVkIHZhcmlhbnQgb2YgeW91ciBgdmFsdWVgXG4gICAgICogICAgIGluIGAkc2NlLlJFU09VUkNFX1VSTGAgY29udGV4dCAodGVtcGxhdGUgVVJMcyBpbiBgbmctaW5jbHVkZWAsIG1vc3QgYHNyY2AgYXR0cmlidXRlXG4gICAgICogICAgIGJpbmRpbmdzLCAuLi4pXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzSnNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzSnModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLkpTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFyayBhcyB0cnVzdGVkIGZvciBgJHNjZS5KU2AgY29udGV4dC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50IG9mIHlvdXIgYHZhbHVlYFxuICAgICAqICAgICBpbiBgJHNjZS5KU2AgY29udGV4dC4gVGhhdCBjb250ZXh0IGlzIGN1cnJlbnRseSB1bnVzZWQsIHNvIHRoZXJlIGFyZSBhbG1vc3Qgbm8gcmVhc29ucyB0b1xuICAgICAqICAgICB1c2UgdGhpcyBmdW5jdGlvbiBzbyBmYXIuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBEZWxlZ2F0ZXMgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZGB9LiAgQXMgc3VjaCxcbiAgICAgKiB0YWtlcyBhbnkgaW5wdXQsIGFuZCBlaXRoZXIgcmV0dXJucyBhIHZhbHVlIHRoYXQncyBzYWZlIHRvIHVzZSBpbiB0aGUgc3BlY2lmaWVkIGNvbnRleHQsXG4gICAgICogb3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBhd2FyZSBvZiB0cnVzdGVkIHZhbHVlcyBjcmVhdGVkIGJ5IHRoZSBgdHJ1c3RBc2BcbiAgICAgKiBmdW5jdGlvbiBhbmQgaXRzIHNob3J0aGFuZHMsIGFuZCB3aGVuIGNvbnRleHRzIGFyZSBhcHByb3ByaWF0ZSwgcmV0dXJucyB0aGUgdW53cmFwcGVkIHZhbHVlXG4gICAgICogYXMtaXMuIEZpbmFsbHksIHRoaXMgZnVuY3Rpb24gY2FuIGFsc28gdGhyb3cgd2hlbiB0aGVyZSBpcyBubyB3YXkgdG8gdHVybiBgbWF5YmVUcnVzdGVkYCBpbiBhXG4gICAgICogc2FmZSB2YWx1ZSAoZS5nLiwgbm8gc2FuaXRpemF0aW9uIGlzIGF2YWlsYWJsZSBvciBwb3NzaWJsZS4pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHRvIGJlIHVzZWQuXG4gICAgICogQHBhcmFtIHsqfSBtYXliZVRydXN0ZWQgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2UudHJ1c3RBc2B9IGNhbGwsIG9yIGFueXRoaW5nIGVsc2UgKHdoaWNoIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC4pXG4gICAgICogQHJldHVybiB7Kn0gQSB2ZXJzaW9uIG9mIHRoZSB2YWx1ZSB0aGF0J3Mgc2FmZSB0byB1c2UgaW4gdGhlIGdpdmVuIGNvbnRleHQsIG9yIHRocm93cyBhblxuICAgICAqICAgICBleGNlcHRpb24gaWYgdGhpcyBpcyBpbXBvc3NpYmxlLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZEh0bWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkSHRtbCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuSFRNTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuSFRNTCwgdmFsdWUpYFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZENzc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRDc3ModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkNTUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZFVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5VUkwsIHZhbHVlKWBcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWRgLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZEpzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZEpzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5KUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuSlMsIHZhbHVlKWBcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNIdG1sXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0h0bWwoZXhwcmVzc2lvbiBzdHJpbmcpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuSFRNTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNDc3NcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzQ3NzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlQXMgYCRzY2UucGFyc2VBcygkc2NlLkNTUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzVXJsKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlQXMgYCRzY2UucGFyc2VBcygkc2NlLlVSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNSZXNvdXJjZVVybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzSnNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzSnModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuSlMsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG5cbiAgICAvLyBTaG9ydGhhbmQgZGVsZWdhdGlvbnMuXG4gICAgdmFyIHBhcnNlID0gc2NlLnBhcnNlQXMsXG4gICAgICAgIGdldFRydXN0ZWQgPSBzY2UuZ2V0VHJ1c3RlZCxcbiAgICAgICAgdHJ1c3RBcyA9IHNjZS50cnVzdEFzO1xuXG4gICAgZm9yRWFjaChTQ0VfQ09OVEVYVFMsIGZ1bmN0aW9uKGVudW1WYWx1ZSwgbmFtZSkge1xuICAgICAgdmFyIGxOYW1lID0gbG93ZXJjYXNlKG5hbWUpO1xuICAgICAgc2NlW3NuYWtlVG9DYW1lbCgncGFyc2VfYXNfJyArIGxOYW1lKV0gPSBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIHJldHVybiBwYXJzZShlbnVtVmFsdWUsIGV4cHIpO1xuICAgICAgfTtcbiAgICAgIHNjZVtzbmFrZVRvQ2FtZWwoJ2dldF90cnVzdGVkXycgKyBsTmFtZSldID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGdldFRydXN0ZWQoZW51bVZhbHVlLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgc2NlW3NuYWtlVG9DYW1lbCgndHJ1c3RfYXNfJyArIGxOYW1lKV0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHJ1c3RBcyhlbnVtVmFsdWUsIHZhbHVlKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2NlO1xuICB9XTtcbn1cblxuLyogZXhwb3J0ZWQgJFNuaWZmZXJQcm92aWRlciAqL1xuXG4vKipcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBzZXJ2aWNlICEhIVxuICpcbiAqIEBuYW1lICRzbmlmZmVyXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xuICogQHJlcXVpcmVzICRkb2N1bWVudFxuICogQHRoaXNcbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhpc3RvcnkgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IGh0bWw1IGhpc3RvcnkgYXBpID9cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdHJhbnNpdGlvbnMgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IENTUyB0cmFuc2l0aW9uIGV2ZW50cyA/XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1hdGlvbnMgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IENTUyBhbmltYXRpb24gZXZlbnRzID9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgaXMgdmVyeSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgdGVzdGluZyBicm93c2VyJ3MgZmVhdHVyZXMuXG4gKi9cbmZ1bmN0aW9uICRTbmlmZmVyUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQpIHtcbiAgICB2YXIgZXZlbnRTdXBwb3J0ID0ge30sXG4gICAgICAgIC8vIENocm9tZSBQYWNrYWdlZCBBcHBzIGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MgYGhpc3RvcnkucHVzaFN0YXRlYC5cbiAgICAgICAgLy8gSWYgbm90IHNhbmRib3hlZCwgdGhleSBjYW4gYmUgZGV0ZWN0ZWQgYnkgdGhlIHByZXNlbmNlIG9mIGBjaHJvbWUuYXBwLnJ1bnRpbWVgXG4gICAgICAgIC8vIChzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9hcHBzL2FwaV9pbmRleCkuIElmIHNhbmRib3hlZCwgdGhleSBjYW4gYmUgZGV0ZWN0ZWQgYnlcbiAgICAgICAgLy8gdGhlIHByZXNlbmNlIG9mIGFuIGV4dGVuc2lvbiBydW50aW1lIElEIGFuZCB0aGUgYWJzZW5jZSBvZiBvdGhlciBDaHJvbWUgcnVudGltZSBBUElzXG4gICAgICAgIC8vIChzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9hcHBzL21hbmlmZXN0L3NhbmRib3gpLlxuICAgICAgICAvLyAoTlcuanMgYXBwcyBoYXZlIGFjY2VzcyB0byBDaHJvbWUgQVBJcywgYnV0IGRvIHN1cHBvcnQgYGhpc3RvcnlgLilcbiAgICAgICAgaXNOdyA9ICR3aW5kb3cubncgJiYgJHdpbmRvdy5udy5wcm9jZXNzLFxuICAgICAgICBpc0Nocm9tZVBhY2thZ2VkQXBwID1cbiAgICAgICAgICAgICFpc053ICYmXG4gICAgICAgICAgICAkd2luZG93LmNocm9tZSAmJlxuICAgICAgICAgICAgKCR3aW5kb3cuY2hyb21lLmFwcCAmJiAkd2luZG93LmNocm9tZS5hcHAucnVudGltZSB8fFxuICAgICAgICAgICAgICAgICEkd2luZG93LmNocm9tZS5hcHAgJiYgJHdpbmRvdy5jaHJvbWUucnVudGltZSAmJiAkd2luZG93LmNocm9tZS5ydW50aW1lLmlkKSxcbiAgICAgICAgaGFzSGlzdG9yeVB1c2hTdGF0ZSA9ICFpc0Nocm9tZVBhY2thZ2VkQXBwICYmICR3aW5kb3cuaGlzdG9yeSAmJiAkd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlLFxuICAgICAgICBhbmRyb2lkID1cbiAgICAgICAgICB0b0ludCgoL2FuZHJvaWQgKFxcZCspLy5leGVjKGxvd2VyY2FzZSgoJHdpbmRvdy5uYXZpZ2F0b3IgfHwge30pLnVzZXJBZ2VudCkpIHx8IFtdKVsxXSksXG4gICAgICAgIGJveGVlID0gL0JveGVlL2kudGVzdCgoJHdpbmRvdy5uYXZpZ2F0b3IgfHwge30pLnVzZXJBZ2VudCksXG4gICAgICAgIGRvY3VtZW50ID0gJGRvY3VtZW50WzBdIHx8IHt9LFxuICAgICAgICBib2R5U3R5bGUgPSBkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuc3R5bGUsXG4gICAgICAgIHRyYW5zaXRpb25zID0gZmFsc2UsXG4gICAgICAgIGFuaW1hdGlvbnMgPSBmYWxzZTtcblxuICAgIGlmIChib2R5U3R5bGUpIHtcbiAgICAgIC8vIFN1cHBvcnQ6IEFuZHJvaWQgPDUsIEJsYWNrYmVycnkgQnJvd3NlciAxMCwgZGVmYXVsdCBDaHJvbWUgaW4gQW5kcm9pZCA0LjQueFxuICAgICAgLy8gTWVudGlvbmVkIGJyb3dzZXJzIG5lZWQgYSAtd2Via2l0LSBwcmVmaXggZm9yIHRyYW5zaXRpb25zICYgYW5pbWF0aW9ucy5cbiAgICAgIHRyYW5zaXRpb25zID0gISEoJ3RyYW5zaXRpb24nIGluIGJvZHlTdHlsZSB8fCAnd2Via2l0VHJhbnNpdGlvbicgaW4gYm9keVN0eWxlKTtcbiAgICAgIGFuaW1hdGlvbnMgPSAhISgnYW5pbWF0aW9uJyBpbiBib2R5U3R5bGUgfHwgJ3dlYmtpdEFuaW1hdGlvbicgaW4gYm9keVN0eWxlKTtcbiAgICB9XG5cblxuICAgIHJldHVybiB7XG4gICAgICAvLyBBbmRyb2lkIGhhcyBoaXN0b3J5LnB1c2hTdGF0ZSwgYnV0IGl0IGRvZXMgbm90IHVwZGF0ZSBsb2NhdGlvbiBjb3JyZWN0bHlcbiAgICAgIC8vIHNvIGxldCdzIG5vdCB1c2UgdGhlIGhpc3RvcnkgQVBJIGF0IGFsbC5cbiAgICAgIC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9MTc0NzFcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzkwNFxuXG4gICAgICAvLyBvbGRlciB3ZWJraXQgYnJvd3NlciAoNTMzLjkpIG9uIEJveGVlIGJveCBoYXMgZXhhY3RseSB0aGUgc2FtZSBwcm9ibGVtIGFzIEFuZHJvaWQgaGFzXG4gICAgICAvLyBzbyBsZXQncyBub3QgdXNlIHRoZSBoaXN0b3J5IEFQSSBhbHNvXG4gICAgICAvLyBXZSBhcmUgcHVycG9zZWZ1bGx5IHVzaW5nIGAhKGFuZHJvaWQgPCA0KWAgdG8gY292ZXIgdGhlIGNhc2Ugd2hlbiBgYW5kcm9pZGAgaXMgdW5kZWZpbmVkXG4gICAgICBoaXN0b3J5OiAhIShoYXNIaXN0b3J5UHVzaFN0YXRlICYmICEoYW5kcm9pZCA8IDQpICYmICFib3hlZSksXG4gICAgICBoYXNFdmVudDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgICAgIC8vIElFOSBpbXBsZW1lbnRzICdpbnB1dCcgZXZlbnQgaXQncyBzbyBmdWJhcmVkIHRoYXQgd2UgcmF0aGVyIHByZXRlbmQgdGhhdCBpdCBkb2Vzbid0IGhhdmVcbiAgICAgICAgLy8gaXQuIEluIHBhcnRpY3VsYXIgdGhlIGV2ZW50IGlzIG5vdCBmaXJlZCB3aGVuIGJhY2tzcGFjZSBvciBkZWxldGUga2V5IGFyZSBwcmVzc2VkIG9yXG4gICAgICAgIC8vIHdoZW4gY3V0IG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQuXG4gICAgICAgIC8vIElFMTArIGltcGxlbWVudHMgJ2lucHV0JyBldmVudCBidXQgaXQgZXJyb25lb3VzbHkgZmlyZXMgdW5kZXIgdmFyaW91cyBzaXR1YXRpb25zLFxuICAgICAgICAvLyBlLmcuIHdoZW4gcGxhY2Vob2xkZXIgY2hhbmdlcywgb3IgYSBmb3JtIGlzIGZvY3VzZWQuXG4gICAgICAgIGlmIChldmVudCA9PT0gJ2lucHV0JyAmJiBtc2llKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKGV2ZW50U3VwcG9ydFtldmVudF0pKSB7XG4gICAgICAgICAgdmFyIGRpdkVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGV2ZW50U3VwcG9ydFtldmVudF0gPSAnb24nICsgZXZlbnQgaW4gZGl2RWxtO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV2ZW50U3VwcG9ydFtldmVudF07XG4gICAgICB9LFxuICAgICAgY3NwOiBjc3AoKSxcbiAgICAgIHRyYW5zaXRpb25zOiB0cmFuc2l0aW9ucyxcbiAgICAgIGFuaW1hdGlvbnM6IGFuaW1hdGlvbnMsXG4gICAgICBhbmRyb2lkOiBhbmRyb2lkXG4gICAgfTtcbiAgfV07XG59XG5cbnZhciAkdGVtcGxhdGVSZXF1ZXN0TWluRXJyID0gbWluRXJyKCckdGVtcGxhdGVSZXF1ZXN0Jyk7XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2VkIHRvIGNvbmZpZ3VyZSB0aGUgb3B0aW9ucyBwYXNzZWQgdG8gdGhlIHtAbGluayAkaHR0cH0gc2VydmljZSB3aGVuIG1ha2luZyBhIHRlbXBsYXRlIHJlcXVlc3QuXG4gKlxuICogRm9yIGV4YW1wbGUsIGl0IGNhbiBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIHRoZSBcIkFjY2VwdFwiIGhlYWRlciB0aGF0IGlzIHNlbnQgdG8gdGhlIHNlcnZlciwgd2hlblxuICogcmVxdWVzdGluZyBhIHRlbXBsYXRlLlxuICovXG5mdW5jdGlvbiAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIoKSB7XG5cbiAgdmFyIGh0dHBPcHRpb25zO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICR0ZW1wbGF0ZVJlcXVlc3RQcm92aWRlciNodHRwT3B0aW9uc1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlIG9wdGlvbnMgdG8gYmUgcGFzc2VkIHRvIHRoZSB7QGxpbmsgJGh0dHB9IHNlcnZpY2Ugd2hlbiBtYWtpbmcgdGhlIHJlcXVlc3QuXG4gICAqIFlvdSBjYW4gdXNlIHRoaXMgdG8gb3ZlcnJpZGUgb3B0aW9ucyBzdWNoIGFzIHRoZSBcIkFjY2VwdFwiIGhlYWRlciBmb3IgdGVtcGxhdGUgcmVxdWVzdHMuXG4gICAqXG4gICAqIFRoZSB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdH0gd2lsbCBzZXQgdGhlIGBjYWNoZWAgYW5kIHRoZSBgdHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMgb2YgdGhlXG4gICAqIG9wdGlvbnMgaWYgbm90IG92ZXJyaWRkZW4gaGVyZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgZm9yIHRoZSB7QGxpbmsgJGh0dHB9IG9wdGlvbnMuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUge0BsaW5rICRodHRwfSBvcHRpb25zIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLmh0dHBPcHRpb25zID0gZnVuY3Rpb24odmFsKSB7XG4gICAgaWYgKHZhbCkge1xuICAgICAgaHR0cE9wdGlvbnMgPSB2YWw7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGh0dHBPcHRpb25zO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2Mgc2VydmljZVxuICAgKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGUgYCR0ZW1wbGF0ZVJlcXVlc3RgIHNlcnZpY2UgcnVucyBzZWN1cml0eSBjaGVja3MgdGhlbiBkb3dubG9hZHMgdGhlIHByb3ZpZGVkIHRlbXBsYXRlIHVzaW5nXG4gICAqIGAkaHR0cGAgYW5kLCB1cG9uIHN1Y2Nlc3MsIHN0b3JlcyB0aGUgY29udGVudHMgaW5zaWRlIG9mIGAkdGVtcGxhdGVDYWNoZWAuIElmIHRoZSBIVFRQIHJlcXVlc3RcbiAgICogZmFpbHMgb3IgdGhlIHJlc3BvbnNlIGRhdGEgb2YgdGhlIEhUVFAgcmVxdWVzdCBpcyBlbXB0eSwgYSBgJGNvbXBpbGVgIGVycm9yIHdpbGwgYmUgdGhyb3duICh0aGVcbiAgICogZXhjZXB0aW9uIGNhbiBiZSB0aHdhcnRlZCBieSBzZXR0aW5nIHRoZSAybmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiB0byB0cnVlKS4gTm90ZSB0aGF0IHRoZVxuICAgKiBjb250ZW50cyBvZiBgJHRlbXBsYXRlQ2FjaGVgIGFyZSB0cnVzdGVkLCBzbyB0aGUgY2FsbCB0byBgJHNjZS5nZXRUcnVzdGVkVXJsKHRwbClgIGlzIG9taXR0ZWRcbiAgICogd2hlbiBgdHBsYCBpcyBvZiB0eXBlIHN0cmluZyBhbmQgYCR0ZW1wbGF0ZUNhY2hlYCBoYXMgdGhlIG1hdGNoaW5nIGVudHJ5LlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXNzIGN1c3RvbSBvcHRpb25zIHRvIHRoZSBgJGh0dHBgIHNlcnZpY2UsIHN1Y2ggYXMgc2V0dGluZyB0aGUgQWNjZXB0IGhlYWRlciB5b3VcbiAgICogY2FuIGNvbmZpZ3VyZSB0aGlzIHZpYSB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyI2h0dHBPcHRpb25zfS5cbiAgICpcbiAgICogYCR0ZW1wbGF0ZVJlcXVlc3RgIGlzIHVzZWQgaW50ZXJuYWxseSBieSB7QGxpbmsgJGNvbXBpbGV9LCB7QGxpbmsgbmdSb3V0ZS4kcm91dGV9LCBhbmQgZGlyZWN0aXZlcyBzdWNoXG4gICAqIGFzIHtAbGluayBuZ0luY2x1ZGV9IHRvIGRvd25sb2FkIGFuZCBjYWNoZSB0ZW1wbGF0ZXMuXG4gICAqXG4gICAqIDNyZCBwYXJ0eSBtb2R1bGVzIHNob3VsZCB1c2UgYCR0ZW1wbGF0ZVJlcXVlc3RgIGlmIHRoZWlyIHNlcnZpY2VzIG9yIGRpcmVjdGl2ZXMgYXJlIGxvYWRpbmdcbiAgICogdGVtcGxhdGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xUcnVzdGVkUmVzb3VyY2VVcmx9IHRwbCBUaGUgSFRUUCByZXF1ZXN0IHRlbXBsYXRlIFVSTFxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpZ25vcmVSZXF1ZXN0RXJyb3IgV2hldGhlciBvciBub3QgdG8gaWdub3JlIHRoZSBleGNlcHRpb24gd2hlbiB0aGUgcmVxdWVzdCBmYWlscyBvciB0aGUgdGVtcGxhdGUgaXMgZW1wdHlcbiAgICpcbiAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIGZvciB0aGUgSFRUUCByZXNwb25zZSBkYXRhIG9mIHRoZSBnaXZlbiBVUkwuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0b3RhbFBlbmRpbmdSZXF1ZXN0cyB0b3RhbCBhbW91bnQgb2YgcGVuZGluZyB0ZW1wbGF0ZSByZXF1ZXN0cyBiZWluZyBkb3dubG9hZGVkLlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gWyckZXhjZXB0aW9uSGFuZGxlcicsICckdGVtcGxhdGVDYWNoZScsICckaHR0cCcsICckcScsICckc2NlJyxcbiAgICBmdW5jdGlvbigkZXhjZXB0aW9uSGFuZGxlciwgJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkcSwgJHNjZSkge1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0Rm4odHBsLCBpZ25vcmVSZXF1ZXN0RXJyb3IpIHtcbiAgICAgICAgaGFuZGxlUmVxdWVzdEZuLnRvdGFsUGVuZGluZ1JlcXVlc3RzKys7XG5cbiAgICAgICAgLy8gV2UgY29uc2lkZXIgdGhlIHRlbXBsYXRlIGNhY2hlIGhvbGRzIG9ubHkgdHJ1c3RlZCB0ZW1wbGF0ZXMsIHNvXG4gICAgICAgIC8vIHRoZXJlJ3Mgbm8gbmVlZCB0byBnbyB0aHJvdWdoIHdoaXRlbGlzdGluZyBhZ2FpbiBmb3Iga2V5cyB0aGF0IGFscmVhZHlcbiAgICAgICAgLy8gYXJlIGluY2x1ZGVkIGluIHRoZXJlLiBUaGlzIGFsc28gbWFrZXMgQW5ndWxhckpTIGFjY2VwdCBhbnkgc2NyaXB0XG4gICAgICAgIC8vIGRpcmVjdGl2ZSwgbm8gbWF0dGVyIGl0cyBuYW1lLiBIb3dldmVyLCB3ZSBzdGlsbCBuZWVkIHRvIHVud3JhcCB0cnVzdGVkXG4gICAgICAgIC8vIHR5cGVzLlxuICAgICAgICBpZiAoIWlzU3RyaW5nKHRwbCkgfHwgaXNVbmRlZmluZWQoJHRlbXBsYXRlQ2FjaGUuZ2V0KHRwbCkpKSB7XG4gICAgICAgICAgdHBsID0gJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodHBsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXNwb25zZSA9ICRodHRwLmRlZmF1bHRzICYmICRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO1xuXG4gICAgICAgIGlmIChpc0FycmF5KHRyYW5zZm9ybVJlc3BvbnNlKSkge1xuICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlID0gdHJhbnNmb3JtUmVzcG9uc2UuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZXIgIT09IGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNmb3JtUmVzcG9uc2UgPT09IGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm0pIHtcbiAgICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHRwbCwgZXh0ZW5kKHtcbiAgICAgICAgICAgIGNhY2hlOiAkdGVtcGxhdGVDYWNoZSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiB0cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICAgIH0sIGh0dHBPcHRpb25zKSlcbiAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5wdXQodHBsLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICB9LCBoYW5kbGVFcnJvcik7XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRXJyb3IocmVzcCkge1xuICAgICAgICAgIGlmICghaWdub3JlUmVxdWVzdEVycm9yKSB7XG4gICAgICAgICAgICByZXNwID0gJHRlbXBsYXRlUmVxdWVzdE1pbkVycigndHBsb2FkJyxcbiAgICAgICAgICAgICAgICAnRmFpbGVkIHRvIGxvYWQgdGVtcGxhdGU6IHswfSAoSFRUUCBzdGF0dXM6IHsxfSB7Mn0pJyxcbiAgICAgICAgICAgICAgICB0cGwsIHJlc3Auc3RhdHVzLCByZXNwLnN0YXR1c1RleHQpO1xuXG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihyZXNwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cyA9IDA7XG5cbiAgICAgIHJldHVybiBoYW5kbGVSZXF1ZXN0Rm47XG4gICAgfVxuICBdO1xufVxuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICQkVGVzdGFiaWxpdHlQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRicm93c2VyJywgJyRsb2NhdGlvbicsXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkYnJvd3NlciwgICAkbG9jYXRpb24pIHtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICR0ZXN0YWJpbGl0eVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogVGhlIHByaXZhdGUgJCR0ZXN0YWJpbGl0eSBzZXJ2aWNlIHByb3ZpZGVzIGEgY29sbGVjdGlvbiBvZiBtZXRob2RzIGZvciB1c2Ugd2hlbiBkZWJ1Z2dpbmdcbiAgICAgKiBvciBieSBhdXRvbWF0ZWQgdGVzdCBhbmQgZGVidWdnaW5nIHRvb2xzLlxuICAgICAqL1xuICAgIHZhciB0ZXN0YWJpbGl0eSA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNmaW5kQmluZGluZ3NcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBhcmUgYm91bmQgKHZpYSBuZy1iaW5kIG9yIHt7fX0pXG4gICAgICogdG8gZXhwcmVzc2lvbnMgbWF0Y2hpbmcgdGhlIGlucHV0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHJvb3QgdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gVGhlIGJpbmRpbmcgZXhwcmVzc2lvbiB0byBtYXRjaC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdF9leGFjdE1hdGNoIElmIHRydWUsIG9ubHkgcmV0dXJucyBleGFjdCBtYXRjaGVzXG4gICAgICogICAgIGZvciB0aGUgZXhwcmVzc2lvbi4gRmlsdGVycyBhbmQgd2hpdGVzcGFjZSBhcmUgaWdub3JlZC5cbiAgICAgKi9cbiAgICB0ZXN0YWJpbGl0eS5maW5kQmluZGluZ3MgPSBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBvcHRfZXhhY3RNYXRjaCkge1xuICAgICAgdmFyIGJpbmRpbmdzID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduZy1iaW5kaW5nJyk7XG4gICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xuICAgICAgZm9yRWFjaChiaW5kaW5ncywgZnVuY3Rpb24oYmluZGluZykge1xuICAgICAgICB2YXIgZGF0YUJpbmRpbmcgPSBhbmd1bGFyLmVsZW1lbnQoYmluZGluZykuZGF0YSgnJGJpbmRpbmcnKTtcbiAgICAgICAgaWYgKGRhdGFCaW5kaW5nKSB7XG4gICAgICAgICAgZm9yRWFjaChkYXRhQmluZGluZywgZnVuY3Rpb24oYmluZGluZ05hbWUpIHtcbiAgICAgICAgICAgIGlmIChvcHRfZXhhY3RNYXRjaCkge1xuICAgICAgICAgICAgICB2YXIgbWF0Y2hlciA9IG5ldyBSZWdFeHAoJyhefFxcXFxzKScgKyBlc2NhcGVGb3JSZWdleHAoZXhwcmVzc2lvbikgKyAnKFxcXFxzfFxcXFx8fCQpJyk7XG4gICAgICAgICAgICAgIGlmIChtYXRjaGVyLnRlc3QoYmluZGluZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGJpbmRpbmcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoYmluZGluZ05hbWUuaW5kZXhPZihleHByZXNzaW9uKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goYmluZGluZyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNmaW5kTW9kZWxzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgYXJlIHR3by13YXkgZm91bmQgdmlhIG5nLW1vZGVsIHRvXG4gICAgICogZXhwcmVzc2lvbnMgbWF0Y2hpbmcgdGhlIGlucHV0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHJvb3QgdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gVGhlIG1vZGVsIGV4cHJlc3Npb24gdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRfZXhhY3RNYXRjaCBJZiB0cnVlLCBvbmx5IHJldHVybnMgZXhhY3QgbWF0Y2hlc1xuICAgICAqICAgICBmb3IgdGhlIGV4cHJlc3Npb24uXG4gICAgICovXG4gICAgdGVzdGFiaWxpdHkuZmluZE1vZGVscyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGV4cHJlc3Npb24sIG9wdF9leGFjdE1hdGNoKSB7XG4gICAgICB2YXIgcHJlZml4ZXMgPSBbJ25nLScsICdkYXRhLW5nLScsICduZ1xcXFw6J107XG4gICAgICBmb3IgKHZhciBwID0gMDsgcCA8IHByZWZpeGVzLmxlbmd0aDsgKytwKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVFcXVhbHMgPSBvcHRfZXhhY3RNYXRjaCA/ICc9JyA6ICcqPSc7XG4gICAgICAgIHZhciBzZWxlY3RvciA9ICdbJyArIHByZWZpeGVzW3BdICsgJ21vZGVsJyArIGF0dHJpYnV0ZUVxdWFscyArICdcIicgKyBleHByZXNzaW9uICsgJ1wiXSc7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNnZXRMb2NhdGlvblxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgZm9yIGdldHRpbmcgdGhlIGxvY2F0aW9uIGluIGEgYnJvd3NlciBhZ25vc3RpYyB3YXkuIFJldHVybnNcbiAgICAgKiAgICAgdGhlIHBhdGgsIHNlYXJjaCwgYW5kIGhhc2guIChlLmcuIC9wYXRoP2E9YiNoYXNoKVxuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LmdldExvY2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJGxvY2F0aW9uLnVybCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSAkJHRlc3RhYmlsaXR5I3NldExvY2F0aW9uXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBmb3IgbmF2aWdhdGluZyB0byBhIGxvY2F0aW9uIHdpdGhvdXQgZG9pbmcgYSBmdWxsIHBhZ2UgcmVsb2FkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgbG9jYXRpb24gdXJsIChwYXRoLCBzZWFyY2ggYW5kIGhhc2gsXG4gICAgICogICAgIGUuZy4gL3BhdGg/YT1iI2hhc2gpIHRvIGdvIHRvLlxuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LnNldExvY2F0aW9uID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICBpZiAodXJsICE9PSAkbG9jYXRpb24udXJsKCkpIHtcbiAgICAgICAgJGxvY2F0aW9uLnVybCh1cmwpO1xuICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSN3aGVuU3RhYmxlXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBDYWxscyB0aGUgY2FsbGJhY2sgd2hlbiAkdGltZW91dCBhbmQgJGh0dHAgcmVxdWVzdHMgYXJlIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICovXG4gICAgdGVzdGFiaWxpdHkud2hlblN0YWJsZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAkYnJvd3Nlci5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzKGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRlc3RhYmlsaXR5O1xuICB9XTtcbn1cblxudmFyICR0aW1lb3V0TWluRXJyID0gbWluRXJyKCckdGltZW91dCcpO1xuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICRUaW1lb3V0UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckcScsICckJHEnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLFxuICAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICAgJGJyb3dzZXIsICAgJHEsICAgJCRxLCAgICRleGNlcHRpb25IYW5kbGVyKSB7XG5cbiAgICB2YXIgZGVmZXJyZWRzID0ge307XG5cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJHRpbWVvdXRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEFuZ3VsYXJKUydzIHdyYXBwZXIgZm9yIGB3aW5kb3cuc2V0VGltZW91dGAuIFRoZSBgZm5gIGZ1bmN0aW9uIGlzIHdyYXBwZWQgaW50byBhIHRyeS9jYXRjaFxuICAgICAqIGJsb2NrIGFuZCBkZWxlZ2F0ZXMgYW55IGV4Y2VwdGlvbnMgdG9cbiAgICAgKiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIGNhbGxpbmcgYCR0aW1lb3V0YCBpcyBhIHByb21pc2UsIHdoaWNoIHdpbGwgYmUgcmVzb2x2ZWQgd2hlblxuICAgICAqIHRoZSBkZWxheSBoYXMgcGFzc2VkIGFuZCB0aGUgdGltZW91dCBmdW5jdGlvbiwgaWYgcHJvdmlkZWQsIGlzIGV4ZWN1dGVkLlxuICAgICAqXG4gICAgICogVG8gY2FuY2VsIGEgdGltZW91dCByZXF1ZXN0LCBjYWxsIGAkdGltZW91dC5jYW5jZWwocHJvbWlzZSlgLlxuICAgICAqXG4gICAgICogSW4gdGVzdHMgeW91IGNhbiB1c2Uge0BsaW5rIG5nTW9jay4kdGltZW91dCBgJHRpbWVvdXQuZmx1c2goKWB9IHRvXG4gICAgICogc3luY2hyb25vdXNseSBmbHVzaCB0aGUgcXVldWUgb2YgZGVmZXJyZWQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogSWYgeW91IG9ubHkgd2FudCBhIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGFmdGVyIHNvbWUgc3BlY2lmaWVkIGRlbGF5XG4gICAgICogdGhlbiB5b3UgY2FuIGNhbGwgYCR0aW1lb3V0YCB3aXRob3V0IHRoZSBgZm5gIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gZm4gQSBmdW5jdGlvbiwgd2hvc2UgZXhlY3V0aW9uIHNob3VsZCBiZSBkZWxheWVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gW2RlbGF5PTBdIERlbGF5IGluIG1pbGxpc2Vjb25kcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW52b2tlQXBwbHk9dHJ1ZV0gSWYgc2V0IHRvIGBmYWxzZWAgc2tpcHMgbW9kZWwgZGlydHkgY2hlY2tpbmcsIG90aGVyd2lzZVxuICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICAgICAqIEBwYXJhbSB7Li4uKj19IFBhc3MgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHRoZSBleGVjdXRlZCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiB0aGUgdGltZW91dCBpcyByZWFjaGVkLiBUaGUgcHJvbWlzZVxuICAgICAqICAgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBmbmAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aW1lb3V0KGZuLCBkZWxheSwgaW52b2tlQXBwbHkpIHtcbiAgICAgIGlmICghaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgaW52b2tlQXBwbHkgPSBkZWxheTtcbiAgICAgICAgZGVsYXkgPSBmbjtcbiAgICAgICAgZm4gPSBub29wO1xuICAgICAgfVxuXG4gICAgICB2YXIgYXJncyA9IHNsaWNlQXJncyhhcmd1bWVudHMsIDMpLFxuICAgICAgICAgIHNraXBBcHBseSA9IChpc0RlZmluZWQoaW52b2tlQXBwbHkpICYmICFpbnZva2VBcHBseSksXG4gICAgICAgICAgZGVmZXJyZWQgPSAoc2tpcEFwcGx5ID8gJCRxIDogJHEpLmRlZmVyKCksXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UsXG4gICAgICAgICAgdGltZW91dElkO1xuXG4gICAgICB0aW1lb3V0SWQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGZuLmFwcGx5KG51bGwsIGFyZ3MpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlKTtcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBkZWxldGUgZGVmZXJyZWRzW3Byb21pc2UuJCR0aW1lb3V0SWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XG4gICAgICB9LCBkZWxheSk7XG5cbiAgICAgIHByb21pc2UuJCR0aW1lb3V0SWQgPSB0aW1lb3V0SWQ7XG4gICAgICBkZWZlcnJlZHNbdGltZW91dElkXSA9IGRlZmVycmVkO1xuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkdGltZW91dCNjYW5jZWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLiBBcyBhIHJlc3VsdCBvZiB0aGlzLCB0aGUgcHJvbWlzZSB3aWxsIGJlXG4gICAgICogcmVzb2x2ZWQgd2l0aCBhIHJlamVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UHJvbWlzZT19IHByb21pc2UgUHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYCR0aW1lb3V0YCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgaGFzbid0IGV4ZWN1dGVkIHlldCBhbmQgd2FzIHN1Y2Nlc3NmdWxseVxuICAgICAqICAgY2FuY2VsZWQuXG4gICAgICovXG4gICAgdGltZW91dC5jYW5jZWwgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICBpZiAoIXByb21pc2UpIHJldHVybiBmYWxzZTtcblxuICAgICAgaWYgKCFwcm9taXNlLmhhc093blByb3BlcnR5KCckJHRpbWVvdXRJZCcpKSB7XG4gICAgICAgIHRocm93ICR0aW1lb3V0TWluRXJyKCdiYWRwcm9tJyxcbiAgICAgICAgICAgICdgJHRpbWVvdXQuY2FuY2VsKClgIGNhbGxlZCB3aXRoIGEgcHJvbWlzZSB0aGF0IHdhcyBub3QgZ2VuZXJhdGVkIGJ5IGAkdGltZW91dCgpYC4nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkZWZlcnJlZHMuaGFzT3duUHJvcGVydHkocHJvbWlzZS4kJHRpbWVvdXRJZCkpIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIGlkID0gcHJvbWlzZS4kJHRpbWVvdXRJZDtcbiAgICAgIHZhciBkZWZlcnJlZCA9IGRlZmVycmVkc1tpZF07XG5cbiAgICAgIC8vIFRpbWVvdXQgY2FuY2VscyBzaG91bGQgbm90IHJlcG9ydCBhbiB1bmhhbmRsZWQgcHJvbWlzZS5cbiAgICAgIG1hcmtRRXhjZXB0aW9uSGFuZGxlZChkZWZlcnJlZC5wcm9taXNlKTtcbiAgICAgIGRlZmVycmVkLnJlamVjdCgnY2FuY2VsZWQnKTtcbiAgICAgIGRlbGV0ZSBkZWZlcnJlZHNbaWRdO1xuXG4gICAgICByZXR1cm4gJGJyb3dzZXIuZGVmZXIuY2FuY2VsKGlkKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRpbWVvdXQ7XG4gIH1dO1xufVxuXG4vLyBOT1RFOiAgVGhlIHVzYWdlIG9mIHdpbmRvdyBhbmQgZG9jdW1lbnQgaW5zdGVhZCBvZiAkd2luZG93IGFuZCAkZG9jdW1lbnQgaGVyZSBpc1xuLy8gZGVsaWJlcmF0ZS4gIFRoaXMgc2VydmljZSBkZXBlbmRzIG9uIHRoZSBzcGVjaWZpYyBiZWhhdmlvciBvZiBhbmNob3Igbm9kZXMgY3JlYXRlZCBieSB0aGVcbi8vIGJyb3dzZXIgKHJlc29sdmluZyBhbmQgcGFyc2luZyBVUkxzKSB0aGF0IGlzIHVubGlrZWx5IHRvIGJlIHByb3ZpZGVkIGJ5IG1vY2sgb2JqZWN0cyBhbmRcbi8vIGNhdXNlIHVzIHRvIGJyZWFrIHRlc3RzLiAgSW4gYWRkaXRpb24sIHdoZW4gdGhlIGJyb3dzZXIgcmVzb2x2ZXMgYSBVUkwgZm9yIFhIUiwgaXRcbi8vIGRvZXNuJ3Qga25vdyBhYm91dCBtb2NrZWQgbG9jYXRpb25zIGFuZCByZXNvbHZlcyBVUkxzIHRvIHRoZSByZWFsIGRvY3VtZW50IC0gd2hpY2ggaXNcbi8vIGV4YWN0bHkgdGhlIGJlaGF2aW9yIG5lZWRlZCBoZXJlLiAgVGhlcmUgaXMgbGl0dGxlIHZhbHVlIGlzIG1vY2tpbmcgdGhlc2Ugb3V0IGZvciB0aGlzXG4vLyBzZXJ2aWNlLlxudmFyIHVybFBhcnNpbmdOb2RlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbnZhciBvcmlnaW5VcmwgPSB1cmxSZXNvbHZlKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbnZhciBiYXNlVXJsUGFyc2luZ05vZGU7XG5cblxuLyoqXG4gKlxuICogSW1wbGVtZW50YXRpb24gTm90ZXMgZm9yIG5vbi1JRSBicm93c2Vyc1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQXNzaWduaW5nIGEgVVJMIHRvIHRoZSBocmVmIHByb3BlcnR5IG9mIGFuIGFuY2hvciBET00gbm9kZSwgZXZlbiBvbmUgYXR0YWNoZWQgdG8gdGhlIERPTSxcbiAqIHJlc3VsdHMgYm90aCBpbiB0aGUgbm9ybWFsaXppbmcgYW5kIHBhcnNpbmcgb2YgdGhlIFVSTC4gIE5vcm1hbGl6aW5nIG1lYW5zIHRoYXQgYSByZWxhdGl2ZVxuICogVVJMIHdpbGwgYmUgcmVzb2x2ZWQgaW50byBhbiBhYnNvbHV0ZSBVUkwgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxuICogUGFyc2luZyBtZWFucyB0aGF0IHRoZSBhbmNob3Igbm9kZSdzIGhvc3QsIGhvc3RuYW1lLCBwcm90b2NvbCwgcG9ydCwgcGF0aG5hbWUgYW5kIHJlbGF0ZWRcbiAqIHByb3BlcnRpZXMgYXJlIGFsbCBwb3B1bGF0ZWQgdG8gcmVmbGVjdCB0aGUgbm9ybWFsaXplZCBVUkwuICBUaGlzIGFwcHJvYWNoIGhhcyB3aWRlXG4gKiBjb21wYXRpYmlsaXR5IC0gU2FmYXJpIDErLCBNb3ppbGxhIDErIGV0Yy4gIFNlZVxuICogaHR0cDovL3d3dy5hcHRhbmEuY29tL3JlZmVyZW5jZS9odG1sL2FwaS9IVE1MQW5jaG9yRWxlbWVudC5odG1sXG4gKlxuICogSW1wbGVtZW50YXRpb24gTm90ZXMgZm9yIElFXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIElFIDw9IDEwIG5vcm1hbGl6ZXMgdGhlIFVSTCB3aGVuIGFzc2lnbmVkIHRvIHRoZSBhbmNob3Igbm9kZSBzaW1pbGFyIHRvIHRoZSBvdGhlclxuICogYnJvd3NlcnMuICBIb3dldmVyLCB0aGUgcGFyc2VkIGNvbXBvbmVudHMgd2lsbCBub3QgYmUgc2V0IGlmIHRoZSBVUkwgYXNzaWduZWQgZGlkIG5vdCBzcGVjaWZ5XG4gKiB0aGVtLiAgKGUuZy4gaWYgeW91IGFzc2lnbiBhLmhyZWYgPSBcImZvb1wiLCB0aGVuIGEucHJvdG9jb2wsIGEuaG9zdCwgZXRjLiB3aWxsIGJlIGVtcHR5LikgIFdlXG4gKiB3b3JrIGFyb3VuZCB0aGF0IGJ5IHBlcmZvcm1pbmcgdGhlIHBhcnNpbmcgaW4gYSAybmQgc3RlcCBieSB0YWtpbmcgYSBwcmV2aW91c2x5IG5vcm1hbGl6ZWRcbiAqIFVSTCAoZS5nLiBieSBhc3NpZ25pbmcgdG8gYS5ocmVmKSBhbmQgYXNzaWduaW5nIGl0IGEuaHJlZiBhZ2Fpbi4gIFRoaXMgY29ycmVjdGx5IHBvcHVsYXRlcyB0aGVcbiAqIHByb3BlcnRpZXMgc3VjaCBhcyBwcm90b2NvbCwgaG9zdG5hbWUsIHBvcnQsIGV0Yy5cbiAqXG4gKiBSZWZlcmVuY2VzOlxuICogICBodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MQW5jaG9yRWxlbWVudFxuICogICBodHRwOi8vd3d3LmFwdGFuYS5jb20vcmVmZXJlbmNlL2h0bWwvYXBpL0hUTUxBbmNob3JFbGVtZW50Lmh0bWxcbiAqICAgaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXG4gKiAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvcHVsbC8yOTAyXG4gKiAgIGh0dHA6Ly9qYW1lcy5wYWRvbHNleS5jb20vamF2YXNjcmlwdC9wYXJzaW5nLXVybHMtd2l0aC10aGUtZG9tL1xuICpcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZC4gSWYgYHVybGAgaXMgbm90IGEgc3RyaW5nLCBpdCB3aWxsIGJlIHJldHVybmVkXG4gKiAgICAgdW5jaGFuZ2VkLlxuICogQGRlc2NyaXB0aW9uIE5vcm1hbGl6ZXMgYW5kIHBhcnNlcyBhIFVSTC5cbiAqIEByZXR1cm5zIHtvYmplY3R9IFJldHVybnMgdGhlIG5vcm1hbGl6ZWQgVVJMIGFzIGEgZGljdGlvbmFyeS5cbiAqXG4gKiAgIHwgbWVtYmVyIG5hbWUgICB8IERlc2NyaXB0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8LS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqICAgfCBocmVmICAgICAgICAgIHwgQSBub3JtYWxpemVkIHZlcnNpb24gb2YgdGhlIHByb3ZpZGVkIFVSTCBpZiBpdCB3YXMgbm90IGFuIGFic29sdXRlIFVSTCB8XG4gKiAgIHwgcHJvdG9jb2wgICAgICB8IFRoZSBwcm90b2NvbCB3aXRob3V0IHRoZSB0cmFpbGluZyBjb2xvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8IGhvc3QgICAgICAgICAgfCBUaGUgaG9zdCBhbmQgcG9ydCAoaWYgdGhlIHBvcnQgaXMgbm9uLWRlZmF1bHQpIG9mIHRoZSBub3JtYWxpemVkVXJsICAgIHxcbiAqICAgfCBzZWFyY2ggICAgICAgIHwgVGhlIHNlYXJjaCBwYXJhbXMsIG1pbnVzIHRoZSBxdWVzdGlvbiBtYXJrICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgIHwgaGFzaCAgICAgICAgICB8IFRoZSBoYXNoIHN0cmluZywgbWludXMgdGhlIGhhc2ggc3ltYm9sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8IGhvc3RuYW1lICAgICAgfCBUaGUgaG9zdG5hbWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgfCBwb3J0ICAgICAgICAgIHwgVGhlIHBvcnQsIHdpdGhvdXQgXCI6XCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgfCBwYXRobmFtZSAgICAgIHwgVGhlIHBhdGhuYW1lLCBiZWdpbm5pbmcgd2l0aCBcIi9cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqXG4gKi9cbmZ1bmN0aW9uIHVybFJlc29sdmUodXJsKSB7XG4gIGlmICghaXNTdHJpbmcodXJsKSkgcmV0dXJuIHVybDtcblxuICB2YXIgaHJlZiA9IHVybDtcblxuICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbiAgaWYgKG1zaWUpIHtcbiAgICAvLyBOb3JtYWxpemUgYmVmb3JlIHBhcnNlLiAgUmVmZXIgSW1wbGVtZW50YXRpb24gTm90ZXMgb24gd2h5IHRoaXMgaXNcbiAgICAvLyBkb25lIGluIHR3byBzdGVwcyBvbiBJRS5cbiAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgfVxuXG4gIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gIHJldHVybiB7XG4gICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXG4gICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJylcbiAgICAgID8gdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgICAgIDogJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHJlcXVlc3QgVVJMIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGEgc2FtZS1vcmlnaW4gcmVxdWVzdCBhcyB0aGUgYXBwbGljYXRpb25cbiAqIGRvY3VtZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVxdWVzdFVybCBUaGUgdXJsIG9mIHRoZSByZXF1ZXN0IGFzIGEgc3RyaW5nIHRoYXQgd2lsbCBiZSByZXNvbHZlZFxuICogb3IgYSBwYXJzZWQgVVJMIG9iamVjdC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIGZvciB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxuICovXG5mdW5jdGlvbiB1cmxJc1NhbWVPcmlnaW4ocmVxdWVzdFVybCkge1xuICByZXR1cm4gdXJsc0FyZVNhbWVPcmlnaW4ocmVxdWVzdFVybCwgb3JpZ2luVXJsKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHJlcXVlc3QgVVJMIGFuZCBkZXRlcm1pbmUgd2hldGhlciBpdCBpcyBzYW1lLW9yaWdpbiBhcyB0aGUgY3VycmVudCBkb2N1bWVudCBiYXNlIFVSTC5cbiAqXG4gKiBOb3RlOiBUaGUgYmFzZSBVUkwgaXMgdXN1YWxseSB0aGUgc2FtZSBhcyB0aGUgZG9jdW1lbnQgbG9jYXRpb24gKGBsb2NhdGlvbi5ocmVmYCkgYnV0IGNhblxuICogYmUgb3ZlcnJpZGVuIGJ5IHVzaW5nIHRoZSBgPGJhc2U+YCB0YWcuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZXF1ZXN0VXJsIFRoZSB1cmwgb2YgdGhlIHJlcXVlc3QgYXMgYSBzdHJpbmcgdGhhdCB3aWxsIGJlIHJlc29sdmVkXG4gKiBvciBhIHBhcnNlZCBVUkwgb2JqZWN0LlxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIFVSTCBpcyBzYW1lLW9yaWdpbiBhcyB0aGUgZG9jdW1lbnQgYmFzZSBVUkwuXG4gKi9cbmZ1bmN0aW9uIHVybElzU2FtZU9yaWdpbkFzQmFzZVVybChyZXF1ZXN0VXJsKSB7XG4gIHJldHVybiB1cmxzQXJlU2FtZU9yaWdpbihyZXF1ZXN0VXJsLCBnZXRCYXNlVXJsKCkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgY2FuIGNoZWNrIGEgVVJMJ3Mgb3JpZ2luIGFnYWluc3QgYSBsaXN0IG9mIGFsbG93ZWQvd2hpdGVsaXN0ZWQgb3JpZ2lucy5cbiAqIFRoZSBjdXJyZW50IGxvY2F0aW9uJ3Mgb3JpZ2luIGlzIGltcGxpY2l0bHkgdHJ1c3RlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSB3aGl0ZWxpc3RlZE9yaWdpblVybHMgLSBBIGxpc3Qgb2YgVVJMcyAoc3RyaW5ncyksIHdob3NlIG9yaWdpbnMgYXJlIHRydXN0ZWQuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufSAtIEEgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIFVSTCAoc3RyaW5nIG9yIHBhcnNlZCBVUkwgb2JqZWN0KSBhbmQgcmV0dXJuc1xuICogICAgIHdoZXRoZXIgaXQgaXMgb2YgYW4gYWxsb3dlZCBvcmlnaW4uXG4gKi9cbmZ1bmN0aW9uIHVybElzQWxsb3dlZE9yaWdpbkZhY3Rvcnkod2hpdGVsaXN0ZWRPcmlnaW5VcmxzKSB7XG4gIHZhciBwYXJzZWRBbGxvd2VkT3JpZ2luVXJscyA9IFtvcmlnaW5VcmxdLmNvbmNhdCh3aGl0ZWxpc3RlZE9yaWdpblVybHMubWFwKHVybFJlc29sdmUpKTtcblxuICAvKipcbiAgICogQ2hlY2sgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCAoc3RyaW5nIG9yIHBhcnNlZCBVUkwgb2JqZWN0KSBoYXMgYW4gb3JpZ2luIHRoYXQgaXMgYWxsb3dlZFxuICAgKiBiYXNlZCBvbiBhIGxpc3Qgb2Ygd2hpdGVsaXN0ZWQtb3JpZ2luIFVSTHMuIFRoZSBjdXJyZW50IGxvY2F0aW9uJ3Mgb3JpZ2luIGlzIGltcGxpY2l0bHlcbiAgICogdHJ1c3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSByZXF1ZXN0VXJsIC0gVGhlIFVSTCB0byBiZSBjaGVja2VkIChwcm92aWRlZCBhcyBhIHN0cmluZyB0aGF0IHdpbGwgYmVcbiAgICogICAgIHJlc29sdmVkIG9yIGEgcGFyc2VkIFVSTCBvYmplY3QpLlxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIG9mIGFuIGFsbG93ZWQgb3JpZ2luLlxuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIHVybElzQWxsb3dlZE9yaWdpbihyZXF1ZXN0VXJsKSB7XG4gICAgdmFyIHBhcnNlZFVybCA9IHVybFJlc29sdmUocmVxdWVzdFVybCk7XG4gICAgcmV0dXJuIHBhcnNlZEFsbG93ZWRPcmlnaW5VcmxzLnNvbWUodXJsc0FyZVNhbWVPcmlnaW4uYmluZChudWxsLCBwYXJzZWRVcmwpKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIFVSTHMgc2hhcmUgdGhlIHNhbWUgb3JpZ2luLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gdXJsMSAtIEZpcnN0IFVSTCB0byBjb21wYXJlIGFzIGEgc3RyaW5nIG9yIGEgbm9ybWFsaXplZCBVUkwgaW4gdGhlIGZvcm0gb2ZcbiAqICAgICBhIGRpY3Rpb25hcnkgb2JqZWN0IHJldHVybmVkIGJ5IGB1cmxSZXNvbHZlKClgLlxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSB1cmwyIC0gU2Vjb25kIFVSTCB0byBjb21wYXJlIGFzIGEgc3RyaW5nIG9yIGEgbm9ybWFsaXplZCBVUkwgaW4gdGhlIGZvcm1cbiAqICAgICBvZiBhIGRpY3Rpb25hcnkgb2JqZWN0IHJldHVybmVkIGJ5IGB1cmxSZXNvbHZlKClgLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSAtIFRydWUgaWYgYm90aCBVUkxzIGhhdmUgdGhlIHNhbWUgb3JpZ2luLCBhbmQgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiB1cmxzQXJlU2FtZU9yaWdpbih1cmwxLCB1cmwyKSB7XG4gIHVybDEgPSB1cmxSZXNvbHZlKHVybDEpO1xuICB1cmwyID0gdXJsUmVzb2x2ZSh1cmwyKTtcblxuICByZXR1cm4gKHVybDEucHJvdG9jb2wgPT09IHVybDIucHJvdG9jb2wgJiZcbiAgICAgICAgICB1cmwxLmhvc3QgPT09IHVybDIuaG9zdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudCBiYXNlIFVSTC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldEJhc2VVcmwoKSB7XG4gIGlmICh3aW5kb3cuZG9jdW1lbnQuYmFzZVVSSSkge1xuICAgIHJldHVybiB3aW5kb3cuZG9jdW1lbnQuYmFzZVVSSTtcbiAgfVxuXG4gIC8vIGBkb2N1bWVudC5iYXNlVVJJYCBpcyBhdmFpbGFibGUgZXZlcnl3aGVyZSBleGNlcHQgSUVcbiAgaWYgKCFiYXNlVXJsUGFyc2luZ05vZGUpIHtcbiAgICBiYXNlVXJsUGFyc2luZ05vZGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGJhc2VVcmxQYXJzaW5nTm9kZS5ocmVmID0gJy4nO1xuXG4gICAgLy8gV29yay1hcm91bmQgZm9yIElFIGJ1ZyBkZXNjcmliZWQgaW4gSW1wbGVtZW50YXRpb24gTm90ZXMuIFRoZSBmaXggaW4gYHVybFJlc29sdmUoKWAgaXMgbm90XG4gICAgLy8gc3VpdGFibGUgaGVyZSBiZWNhdXNlIHdlIG5lZWQgdG8gdHJhY2sgY2hhbmdlcyB0byB0aGUgYmFzZSBVUkwuXG4gICAgYmFzZVVybFBhcnNpbmdOb2RlID0gYmFzZVVybFBhcnNpbmdOb2RlLmNsb25lTm9kZShmYWxzZSk7XG4gIH1cbiAgcmV0dXJuIGJhc2VVcmxQYXJzaW5nTm9kZS5ocmVmO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkd2luZG93XG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSByZWZlcmVuY2UgdG8gdGhlIGJyb3dzZXIncyBgd2luZG93YCBvYmplY3QuIFdoaWxlIGB3aW5kb3dgXG4gKiBpcyBnbG9iYWxseSBhdmFpbGFibGUgaW4gSmF2YVNjcmlwdCwgaXQgY2F1c2VzIHRlc3RhYmlsaXR5IHByb2JsZW1zLCBiZWNhdXNlXG4gKiBpdCBpcyBhIGdsb2JhbCB2YXJpYWJsZS4gSW4gQW5ndWxhckpTIHdlIGFsd2F5cyByZWZlciB0byBpdCB0aHJvdWdoIHRoZVxuICogYCR3aW5kb3dgIHNlcnZpY2UsIHNvIGl0IG1heSBiZSBvdmVycmlkZGVuLCByZW1vdmVkIG9yIG1vY2tlZCBmb3IgdGVzdGluZy5cbiAqXG4gKiBFeHByZXNzaW9ucywgbGlrZSB0aGUgb25lIGRlZmluZWQgZm9yIHRoZSBgbmdDbGlja2AgZGlyZWN0aXZlIGluIHRoZSBleGFtcGxlXG4gKiBiZWxvdywgYXJlIGV2YWx1YXRlZCB3aXRoIHJlc3BlY3QgdG8gdGhlIGN1cnJlbnQgc2NvcGUuICBUaGVyZWZvcmUsIHRoZXJlIGlzXG4gKiBubyByaXNrIG9mIGluYWR2ZXJ0ZW50bHkgY29kaW5nIGluIGEgZGVwZW5kZW5jeSBvbiBhIGdsb2JhbCB2YWx1ZSBpbiBzdWNoIGFuXG4gKiBleHByZXNzaW9uLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJ3aW5kb3dFeGFtcGxlXCIgbmFtZT1cIndpbmRvdy1zZXJ2aWNlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd3aW5kb3dFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkc2NvcGUsICR3aW5kb3cpIHtcbiAgICAgICAgICAgICAkc2NvcGUuZ3JlZXRpbmcgPSAnSGVsbG8sIFdvcmxkISc7XG4gICAgICAgICAgICAgJHNjb3BlLmRvR3JlZXRpbmcgPSBmdW5jdGlvbihncmVldGluZykge1xuICAgICAgICAgICAgICAgJHdpbmRvdy5hbGVydChncmVldGluZyk7XG4gICAgICAgICAgICAgfTtcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImdyZWV0aW5nXCIgYXJpYS1sYWJlbD1cImdyZWV0aW5nXCIgLz5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJkb0dyZWV0aW5nKGdyZWV0aW5nKVwiPkFMRVJUPC9idXR0b24+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHRoZSBncmVldGluZyBpbiB0aGUgaW5wdXQgYm94JywgZnVuY3Rpb24oKSB7XG4gICAgICAgZWxlbWVudChieS5tb2RlbCgnZ3JlZXRpbmcnKSkuc2VuZEtleXMoJ0hlbGxvLCBFMkUgVGVzdHMnKTtcbiAgICAgICAvLyBJZiB3ZSBjbGljayB0aGUgYnV0dG9uIGl0IHdpbGwgYmxvY2sgdGhlIHRlc3QgcnVubmVyXG4gICAgICAgLy8gZWxlbWVudCgnOmJ1dHRvbicpLmNsaWNrKCk7XG4gICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkV2luZG93UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IHZhbHVlRm4od2luZG93KTtcbn1cblxuLyoqXG4gKiBAbmFtZSAkJGNvb2tpZVJlYWRlclxuICogQHJlcXVpcmVzICRkb2N1bWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBpcyBhIHByaXZhdGUgc2VydmljZSBmb3IgcmVhZGluZyBjb29raWVzIHVzZWQgYnkgJGh0dHAgYW5kIG5nQ29va2llc1xuICpcbiAqIEByZXR1cm4ge09iamVjdH0gYSBrZXkvdmFsdWUgbWFwIG9mIHRoZSBjdXJyZW50IGNvb2tpZXNcbiAqL1xuZnVuY3Rpb24gJCRDb29raWVSZWFkZXIoJGRvY3VtZW50KSB7XG4gIHZhciByYXdEb2N1bWVudCA9ICRkb2N1bWVudFswXSB8fCB7fTtcbiAgdmFyIGxhc3RDb29raWVzID0ge307XG4gIHZhciBsYXN0Q29va2llU3RyaW5nID0gJyc7XG5cbiAgZnVuY3Rpb24gc2FmZUdldENvb2tpZShyYXdEb2N1bWVudCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gcmF3RG9jdW1lbnQuY29va2llIHx8ICcnO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzYWZlRGVjb2RlVVJJQ29tcG9uZW50KHN0cikge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHN0cik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvb2tpZUFycmF5LCBjb29raWUsIGksIGluZGV4LCBuYW1lO1xuICAgIHZhciBjdXJyZW50Q29va2llU3RyaW5nID0gc2FmZUdldENvb2tpZShyYXdEb2N1bWVudCk7XG5cbiAgICBpZiAoY3VycmVudENvb2tpZVN0cmluZyAhPT0gbGFzdENvb2tpZVN0cmluZykge1xuICAgICAgbGFzdENvb2tpZVN0cmluZyA9IGN1cnJlbnRDb29raWVTdHJpbmc7XG4gICAgICBjb29raWVBcnJheSA9IGxhc3RDb29raWVTdHJpbmcuc3BsaXQoJzsgJyk7XG4gICAgICBsYXN0Q29va2llcyA9IHt9O1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY29va2llQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29va2llID0gY29va2llQXJyYXlbaV07XG4gICAgICAgIGluZGV4ID0gY29va2llLmluZGV4T2YoJz0nKTtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkgeyAvL2lnbm9yZSBuYW1lbGVzcyBjb29raWVzXG4gICAgICAgICAgbmFtZSA9IHNhZmVEZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZygwLCBpbmRleCkpO1xuICAgICAgICAgIC8vIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IGlzIHNlZW4gZm9yIGEgY29va2llIGlzIHRoZSBtb3N0XG4gICAgICAgICAgLy8gc3BlY2lmaWMgb25lLiAgdmFsdWVzIGZvciB0aGUgc2FtZSBjb29raWUgbmFtZSB0aGF0XG4gICAgICAgICAgLy8gZm9sbG93IGFyZSBmb3IgbGVzcyBzcGVjaWZpYyBwYXRocy5cbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQobGFzdENvb2tpZXNbbmFtZV0pKSB7XG4gICAgICAgICAgICBsYXN0Q29va2llc1tuYW1lXSA9IHNhZmVEZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhpbmRleCArIDEpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxhc3RDb29raWVzO1xuICB9O1xufVxuXG4kJENvb2tpZVJlYWRlci4kaW5qZWN0ID0gWyckZG9jdW1lbnQnXTtcblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJENvb2tpZVJlYWRlclByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSAkJENvb2tpZVJlYWRlcjtcbn1cblxuLyogZ2xvYmFsIGN1cnJlbmN5RmlsdGVyOiB0cnVlLFxuIGRhdGVGaWx0ZXI6IHRydWUsXG4gZmlsdGVyRmlsdGVyOiB0cnVlLFxuIGpzb25GaWx0ZXI6IHRydWUsXG4gbGltaXRUb0ZpbHRlcjogdHJ1ZSxcbiBsb3dlcmNhc2VGaWx0ZXI6IHRydWUsXG4gbnVtYmVyRmlsdGVyOiB0cnVlLFxuIG9yZGVyQnlGaWx0ZXI6IHRydWUsXG4gdXBwZXJjYXNlRmlsdGVyOiB0cnVlLFxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkZmlsdGVyUHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEZpbHRlcnMgYXJlIGp1c3QgZnVuY3Rpb25zIHdoaWNoIHRyYW5zZm9ybSBpbnB1dCB0byBhbiBvdXRwdXQuIEhvd2V2ZXIgZmlsdGVycyBuZWVkIHRvIGJlXG4gKiBEZXBlbmRlbmN5IEluamVjdGVkLiBUbyBhY2hpZXZlIHRoaXMgYSBmaWx0ZXIgZGVmaW5pdGlvbiBjb25zaXN0cyBvZiBhIGZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggaXNcbiAqIGFubm90YXRlZCB3aXRoIGRlcGVuZGVuY2llcyBhbmQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIGEgZmlsdGVyIGZ1bmN0aW9uLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogRmlsdGVyIG5hbWVzIG11c3QgYmUgdmFsaWQgQW5ndWxhckpTIHtAbGluayBleHByZXNzaW9ufSBpZGVudGlmaWVycywgc3VjaCBhcyBgdXBwZXJjYXNlYCBvciBgb3JkZXJCeWAuXG4gKiBOYW1lcyB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycywgc3VjaCBhcyBoeXBoZW5zIGFuZCBkb3RzLCBhcmUgbm90IGFsbG93ZWQuIElmIHlvdSB3aXNoIHRvIG5hbWVzcGFjZVxuICogeW91ciBmaWx0ZXJzLCB0aGVuIHlvdSBjYW4gdXNlIGNhcGl0YWxpemF0aW9uIChgbXlhcHBTdWJzZWN0aW9uRmlsdGVyeGApIG9yIHVuZGVyc2NvcmVzXG4gKiAoYG15YXBwX3N1YnNlY3Rpb25fZmlsdGVyeGApLlxuICogPC9kaXY+XG4gKlxuICogYGBganNcbiAqICAgLy8gRmlsdGVyIHJlZ2lzdHJhdGlvblxuICogICBmdW5jdGlvbiBNeU1vZHVsZSgkcHJvdmlkZSwgJGZpbHRlclByb3ZpZGVyKSB7XG4gKiAgICAgLy8gY3JlYXRlIGEgc2VydmljZSB0byBkZW1vbnN0cmF0ZSBpbmplY3Rpb24gKG5vdCBhbHdheXMgbmVlZGVkKVxuICogICAgICRwcm92aWRlLnZhbHVlKCdncmVldCcsIGZ1bmN0aW9uKG5hbWUpe1xuICogICAgICAgcmV0dXJuICdIZWxsbyAnICsgbmFtZSArICchJztcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgLy8gcmVnaXN0ZXIgYSBmaWx0ZXIgZmFjdG9yeSB3aGljaCB1c2VzIHRoZVxuICogICAgIC8vIGdyZWV0IHNlcnZpY2UgdG8gZGVtb25zdHJhdGUgREkuXG4gKiAgICAgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCdncmVldCcsIGZ1bmN0aW9uKGdyZWV0KXtcbiAqICAgICAgIC8vIHJldHVybiB0aGUgZmlsdGVyIGZ1bmN0aW9uIHdoaWNoIHVzZXMgdGhlIGdyZWV0IHNlcnZpY2VcbiAqICAgICAgIC8vIHRvIGdlbmVyYXRlIHNhbHV0YXRpb25cbiAqICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7XG4gKiAgICAgICAgIC8vIGZpbHRlcnMgbmVlZCB0byBiZSBmb3JnaXZpbmcgc28gY2hlY2sgaW5wdXQgdmFsaWRpdHlcbiAqICAgICAgICAgcmV0dXJuIHRleHQgJiYgZ3JlZXQodGV4dCkgfHwgdGV4dDtcbiAqICAgICAgIH07XG4gKiAgICAgfSk7XG4gKiAgIH1cbiAqIGBgYFxuICpcbiAqIFRoZSBmaWx0ZXIgZnVuY3Rpb24gaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBgJGluamVjdG9yYCB1bmRlciB0aGUgZmlsdGVyIG5hbWUgc3VmZml4IHdpdGhcbiAqIGBGaWx0ZXJgLlxuICpcbiAqIGBgYGpzXG4gKiAgIGl0KCdzaG91bGQgYmUgdGhlIHNhbWUgaW5zdGFuY2UnLCBpbmplY3QoXG4gKiAgICAgZnVuY3Rpb24oJGZpbHRlclByb3ZpZGVyKSB7XG4gKiAgICAgICAkZmlsdGVyUHJvdmlkZXIucmVnaXN0ZXIoJ3JldmVyc2UnLCBmdW5jdGlvbigpe1xuICogICAgICAgICByZXR1cm4gLi4uO1xuICogICAgICAgfSk7XG4gKiAgICAgfSxcbiAqICAgICBmdW5jdGlvbigkZmlsdGVyLCByZXZlcnNlRmlsdGVyKSB7XG4gKiAgICAgICBleHBlY3QoJGZpbHRlcigncmV2ZXJzZScpKS50b0JlKHJldmVyc2VGaWx0ZXIpO1xuICogICAgIH0pO1xuICogYGBgXG4gKlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGhvdyBBbmd1bGFySlMgZmlsdGVycyB3b3JrLCBhbmQgaG93IHRvIGNyZWF0ZSB5b3VyIG93biBmaWx0ZXJzLCBzZWVcbiAqIHtAbGluayBndWlkZS9maWx0ZXIgRmlsdGVyc30gaW4gdGhlIEFuZ3VsYXJKUyBEZXZlbG9wZXIgR3VpZGUuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGZpbHRlclxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvblxuICogRmlsdGVycyBhcmUgdXNlZCBmb3IgZm9ybWF0dGluZyBkYXRhIGRpc3BsYXllZCB0byB0aGUgdXNlci5cbiAqXG4gKiBUaGV5IGNhbiBiZSB1c2VkIGluIHZpZXcgdGVtcGxhdGVzLCBjb250cm9sbGVycyBvciBzZXJ2aWNlcy4gQW5ndWxhckpTIGNvbWVzXG4gKiB3aXRoIGEgY29sbGVjdGlvbiBvZiBbYnVpbHQtaW4gZmlsdGVyc10oYXBpL25nL2ZpbHRlciksIGJ1dCBpdCBpcyBlYXN5IHRvXG4gKiBkZWZpbmUgeW91ciBvd24gYXMgd2VsbC5cbiAqXG4gKiBUaGUgZ2VuZXJhbCBzeW50YXggaW4gdGVtcGxhdGVzIGlzIGFzIGZvbGxvd3M6XG4gKlxuICogYGBgaHRtbFxuICoge3sgZXhwcmVzc2lvbiBbfCBmaWx0ZXJfbmFtZVs6cGFyYW1ldGVyX3ZhbHVlXSAuLi4gXSB9fVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgZmlsdGVyIGZ1bmN0aW9uIHRvIHJldHJpZXZlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGhlIGZpbHRlciBmdW5jdGlvblxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCIkZmlsdGVyXCIgbW9kdWxlPVwiZmlsdGVyRXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIk1haW5DdHJsXCI+XG4gICAgICAgIDxoMz57eyBvcmlnaW5hbFRleHQgfX08L2gzPlxuICAgICAgICA8aDM+e3sgZmlsdGVyZWRUZXh0IH19PC9oMz5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdmaWx0ZXJFeGFtcGxlJywgW10pXG4gICAgICAuY29udHJvbGxlcignTWFpbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRmaWx0ZXIpIHtcbiAgICAgICAgJHNjb3BlLm9yaWdpbmFsVGV4dCA9ICdoZWxsbyc7XG4gICAgICAgICRzY29wZS5maWx0ZXJlZFRleHQgPSAkZmlsdGVyKCd1cHBlcmNhc2UnKSgkc2NvcGUub3JpZ2luYWxUZXh0KTtcbiAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gICovXG4kRmlsdGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnXTtcbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJEZpbHRlclByb3ZpZGVyKCRwcm92aWRlKSB7XG4gIHZhciBzdWZmaXggPSAnRmlsdGVyJztcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkZmlsdGVyUHJvdmlkZXIjcmVnaXN0ZXJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIE5hbWUgb2YgdGhlIGZpbHRlciBmdW5jdGlvbiwgb3IgYW4gb2JqZWN0IG1hcCBvZiBmaWx0ZXJzIHdoZXJlXG4gICAqICAgIHRoZSBrZXlzIGFyZSB0aGUgZmlsdGVyIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgZmlsdGVyIGZhY3Rvcmllcy5cbiAgICpcbiAgICogICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogICAgKipOb3RlOioqIEZpbHRlciBuYW1lcyBtdXN0IGJlIHZhbGlkIEFuZ3VsYXJKUyB7QGxpbmsgZXhwcmVzc2lvbn0gaWRlbnRpZmllcnMsIHN1Y2ggYXMgYHVwcGVyY2FzZWAgb3IgYG9yZGVyQnlgLlxuICAgKiAgICBOYW1lcyB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycywgc3VjaCBhcyBoeXBoZW5zIGFuZCBkb3RzLCBhcmUgbm90IGFsbG93ZWQuIElmIHlvdSB3aXNoIHRvIG5hbWVzcGFjZVxuICAgKiAgICB5b3VyIGZpbHRlcnMsIHRoZW4geW91IGNhbiB1c2UgY2FwaXRhbGl6YXRpb24gKGBteWFwcFN1YnNlY3Rpb25GaWx0ZXJ4YCkgb3IgdW5kZXJzY29yZXNcbiAgICogICAgKGBteWFwcF9zdWJzZWN0aW9uX2ZpbHRlcnhgKS5cbiAgICogICAgPC9kaXY+XG4gICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmYWN0b3J5IElmIHRoZSBmaXJzdCBhcmd1bWVudCB3YXMgYSBzdHJpbmcsIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgdGhlIGZpbHRlciB0byBiZSByZWdpc3RlcmVkLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZWdpc3RlcmVkIGZpbHRlciBpbnN0YW5jZSwgb3IgaWYgYSBtYXAgb2YgZmlsdGVycyB3YXMgcHJvdmlkZWQgdGhlbiBhIG1hcFxuICAgKiAgICBvZiB0aGUgcmVnaXN0ZXJlZCBmaWx0ZXIgaW5zdGFuY2VzLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVnaXN0ZXIobmFtZSwgZmFjdG9yeSkge1xuICAgIGlmIChpc09iamVjdChuYW1lKSkge1xuICAgICAgdmFyIGZpbHRlcnMgPSB7fTtcbiAgICAgIGZvckVhY2gobmFtZSwgZnVuY3Rpb24oZmlsdGVyLCBrZXkpIHtcbiAgICAgICAgZmlsdGVyc1trZXldID0gcmVnaXN0ZXIoa2V5LCBmaWx0ZXIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmlsdGVycztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICRwcm92aWRlLmZhY3RvcnkobmFtZSArIHN1ZmZpeCwgZmFjdG9yeSk7XG4gICAgfVxuICB9XG4gIHRoaXMucmVnaXN0ZXIgPSByZWdpc3RlcjtcblxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gJGluamVjdG9yLmdldChuYW1lICsgc3VmZml4KTtcbiAgICB9O1xuICB9XTtcblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyogZ2xvYmFsXG4gICAgY3VycmVuY3lGaWx0ZXI6IGZhbHNlLFxuICAgIGRhdGVGaWx0ZXI6IGZhbHNlLFxuICAgIGZpbHRlckZpbHRlcjogZmFsc2UsXG4gICAganNvbkZpbHRlcjogZmFsc2UsXG4gICAgbGltaXRUb0ZpbHRlcjogZmFsc2UsXG4gICAgbG93ZXJjYXNlRmlsdGVyOiBmYWxzZSxcbiAgICBudW1iZXJGaWx0ZXI6IGZhbHNlLFxuICAgIG9yZGVyQnlGaWx0ZXI6IGZhbHNlLFxuICAgIHVwcGVyY2FzZUZpbHRlcjogZmFsc2VcbiAgKi9cblxuICByZWdpc3RlcignY3VycmVuY3knLCBjdXJyZW5jeUZpbHRlcik7XG4gIHJlZ2lzdGVyKCdkYXRlJywgZGF0ZUZpbHRlcik7XG4gIHJlZ2lzdGVyKCdmaWx0ZXInLCBmaWx0ZXJGaWx0ZXIpO1xuICByZWdpc3RlcignanNvbicsIGpzb25GaWx0ZXIpO1xuICByZWdpc3RlcignbGltaXRUbycsIGxpbWl0VG9GaWx0ZXIpO1xuICByZWdpc3RlcignbG93ZXJjYXNlJywgbG93ZXJjYXNlRmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ251bWJlcicsIG51bWJlckZpbHRlcik7XG4gIHJlZ2lzdGVyKCdvcmRlckJ5Jywgb3JkZXJCeUZpbHRlcik7XG4gIHJlZ2lzdGVyKCd1cHBlcmNhc2UnLCB1cHBlcmNhc2VGaWx0ZXIpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGZpbHRlclxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNlbGVjdHMgYSBzdWJzZXQgb2YgaXRlbXMgZnJvbSBgYXJyYXlgIGFuZCByZXR1cm5zIGl0IGFzIGEgbmV3IGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3VyY2UgYXJyYXkuXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogICAqKk5vdGUqKjogSWYgdGhlIGFycmF5IGNvbnRhaW5zIG9iamVjdHMgdGhhdCByZWZlcmVuY2UgdGhlbXNlbHZlcywgZmlsdGVyaW5nIGlzIG5vdCBwb3NzaWJsZS5cbiAqIDwvZGl2PlxuICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fGZ1bmN0aW9uKCl9IGV4cHJlc3Npb24gVGhlIHByZWRpY2F0ZSB0byBiZSB1c2VkIGZvciBzZWxlY3RpbmcgaXRlbXMgZnJvbVxuICogICBgYXJyYXlgLlxuICpcbiAqICAgQ2FuIGJlIG9uZSBvZjpcbiAqXG4gKiAgIC0gYHN0cmluZ2A6IFRoZSBzdHJpbmcgaXMgdXNlZCBmb3IgbWF0Y2hpbmcgYWdhaW5zdCB0aGUgY29udGVudHMgb2YgdGhlIGBhcnJheWAuIEFsbCBzdHJpbmdzIG9yXG4gKiAgICAgb2JqZWN0cyB3aXRoIHN0cmluZyBwcm9wZXJ0aWVzIGluIGBhcnJheWAgdGhhdCBtYXRjaCB0aGlzIHN0cmluZyB3aWxsIGJlIHJldHVybmVkLiBUaGlzIGFsc29cbiAqICAgICBhcHBsaWVzIHRvIG5lc3RlZCBvYmplY3QgcHJvcGVydGllcy5cbiAqICAgICBUaGUgcHJlZGljYXRlIGNhbiBiZSBuZWdhdGVkIGJ5IHByZWZpeGluZyB0aGUgc3RyaW5nIHdpdGggYCFgLlxuICpcbiAqICAgLSBgT2JqZWN0YDogQSBwYXR0ZXJuIG9iamVjdCBjYW4gYmUgdXNlZCB0byBmaWx0ZXIgc3BlY2lmaWMgcHJvcGVydGllcyBvbiBvYmplY3RzIGNvbnRhaW5lZFxuICogICAgIGJ5IGBhcnJheWAuIEZvciBleGFtcGxlIGB7bmFtZTpcIk1cIiwgcGhvbmU6XCIxXCJ9YCBwcmVkaWNhdGUgd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgaXRlbXNcbiAqICAgICB3aGljaCBoYXZlIHByb3BlcnR5IGBuYW1lYCBjb250YWluaW5nIFwiTVwiIGFuZCBwcm9wZXJ0eSBgcGhvbmVgIGNvbnRhaW5pbmcgXCIxXCIuIEEgc3BlY2lhbFxuICogICAgIHByb3BlcnR5IG5hbWUgKGAkYCBieSBkZWZhdWx0KSBjYW4gYmUgdXNlZCAoZS5nLiBhcyBpbiBgeyQ6IFwidGV4dFwifWApIHRvIGFjY2VwdCBhIG1hdGNoXG4gKiAgICAgYWdhaW5zdCBhbnkgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBvciBpdHMgbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzLiBUaGF0J3MgZXF1aXZhbGVudCB0byB0aGVcbiAqICAgICBzaW1wbGUgc3Vic3RyaW5nIG1hdGNoIHdpdGggYSBgc3RyaW5nYCBhcyBkZXNjcmliZWQgYWJvdmUuIFRoZSBzcGVjaWFsIHByb3BlcnR5IG5hbWUgY2FuIGJlXG4gKiAgICAgb3ZlcndyaXR0ZW4sIHVzaW5nIHRoZSBgYW55UHJvcGVydHlLZXlgIHBhcmFtZXRlci5cbiAqICAgICBUaGUgcHJlZGljYXRlIGNhbiBiZSBuZWdhdGVkIGJ5IHByZWZpeGluZyB0aGUgc3RyaW5nIHdpdGggYCFgLlxuICogICAgIEZvciBleGFtcGxlIGB7bmFtZTogXCIhTVwifWAgcHJlZGljYXRlIHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIGl0ZW1zIHdoaWNoIGhhdmUgcHJvcGVydHkgYG5hbWVgXG4gKiAgICAgbm90IGNvbnRhaW5pbmcgXCJNXCIuXG4gKlxuICogICAgIE5vdGUgdGhhdCBhIG5hbWVkIHByb3BlcnR5IHdpbGwgbWF0Y2ggcHJvcGVydGllcyBvbiB0aGUgc2FtZSBsZXZlbCBvbmx5LCB3aGlsZSB0aGUgc3BlY2lhbFxuICogICAgIGAkYCBwcm9wZXJ0eSB3aWxsIG1hdGNoIHByb3BlcnRpZXMgb24gdGhlIHNhbWUgbGV2ZWwgb3IgZGVlcGVyLiBFLmcuIGFuIGFycmF5IGl0ZW0gbGlrZVxuICogICAgIGB7bmFtZToge2ZpcnN0OiAnSm9obicsIGxhc3Q6ICdEb2UnfX1gIHdpbGwgKipub3QqKiBiZSBtYXRjaGVkIGJ5IGB7bmFtZTogJ0pvaG4nfWAsIGJ1dFxuICogICAgICoqd2lsbCoqIGJlIG1hdGNoZWQgYnkgYHskOiAnSm9obid9YC5cbiAqXG4gKiAgIC0gYGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpYDogQSBwcmVkaWNhdGUgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gd3JpdGUgYXJiaXRyYXJ5IGZpbHRlcnMuXG4gKiAgICAgVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBmb3IgZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSwgd2l0aCB0aGUgZWxlbWVudCwgaXRzIGluZGV4LCBhbmRcbiAqICAgICB0aGUgZW50aXJlIGFycmF5IGl0c2VsZiBhcyBhcmd1bWVudHMuXG4gKlxuICogICAgIFRoZSBmaW5hbCByZXN1bHQgaXMgYW4gYXJyYXkgb2YgdGhvc2UgZWxlbWVudHMgdGhhdCB0aGUgcHJlZGljYXRlIHJldHVybmVkIHRydWUgZm9yLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZCl8dHJ1ZXxmYWxzZX0gW2NvbXBhcmF0b3JdIENvbXBhcmF0b3Igd2hpY2ggaXMgdXNlZCBpblxuICogICAgIGRldGVybWluaW5nIGlmIHZhbHVlcyByZXRyaWV2ZWQgdXNpbmcgYGV4cHJlc3Npb25gICh3aGVuIGl0IGlzIG5vdCBhIGZ1bmN0aW9uKSBzaG91bGQgYmVcbiAqICAgICBjb25zaWRlcmVkIGEgbWF0Y2ggYmFzZWQgb24gdGhlIGV4cGVjdGVkIHZhbHVlIChmcm9tIHRoZSBmaWx0ZXIgZXhwcmVzc2lvbikgYW5kIGFjdHVhbFxuICogICAgIHZhbHVlIChmcm9tIHRoZSBvYmplY3QgaW4gdGhlIGFycmF5KS5cbiAqXG4gKiAgIENhbiBiZSBvbmUgb2Y6XG4gKlxuICogICAtIGBmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKWA6XG4gKiAgICAgVGhlIGZ1bmN0aW9uIHdpbGwgYmUgZ2l2ZW4gdGhlIG9iamVjdCB2YWx1ZSBhbmQgdGhlIHByZWRpY2F0ZSB2YWx1ZSB0byBjb21wYXJlIGFuZFxuICogICAgIHNob3VsZCByZXR1cm4gdHJ1ZSBpZiBib3RoIHZhbHVlcyBzaG91bGQgYmUgY29uc2lkZXJlZCBlcXVhbC5cbiAqXG4gKiAgIC0gYHRydWVgOiBBIHNob3J0aGFuZCBmb3IgYGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHsgcmV0dXJuIGFuZ3VsYXIuZXF1YWxzKGFjdHVhbCwgZXhwZWN0ZWQpfWAuXG4gKiAgICAgVGhpcyBpcyBlc3NlbnRpYWxseSBzdHJpY3QgY29tcGFyaXNvbiBvZiBleHBlY3RlZCBhbmQgYWN0dWFsLlxuICpcbiAqICAgLSBgZmFsc2VgOiBBIHNob3J0IGhhbmQgZm9yIGEgZnVuY3Rpb24gd2hpY2ggd2lsbCBsb29rIGZvciBhIHN1YnN0cmluZyBtYXRjaCBpbiBhIGNhc2VcbiAqICAgICBpbnNlbnNpdGl2ZSB3YXkuIFByaW1pdGl2ZSB2YWx1ZXMgYXJlIGNvbnZlcnRlZCB0byBzdHJpbmdzLiBPYmplY3RzIGFyZSBub3QgY29tcGFyZWQgYWdhaW5zdFxuICogICAgIHByaW1pdGl2ZXMsIHVubGVzcyB0aGV5IGhhdmUgYSBjdXN0b20gYHRvU3RyaW5nYCBtZXRob2QgKGUuZy4gYERhdGVgIG9iamVjdHMpLlxuICpcbiAqXG4gKiAgIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFthbnlQcm9wZXJ0eUtleV0gVGhlIHNwZWNpYWwgcHJvcGVydHkgbmFtZSB0aGF0IG1hdGNoZXMgYWdhaW5zdCBhbnkgcHJvcGVydHkuXG4gKiAgICAgQnkgZGVmYXVsdCBgJGAuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJmaWx0ZXItZmlsdGVyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1pbml0PVwiZnJpZW5kcyA9IFt7bmFtZTonSm9obicsIHBob25lOic1NTUtMTI3Nid9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonTWFyeScsIHBob25lOic4MDAtQklHLU1BUlknfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J01pa2UnLCBwaG9uZTonNTU1LTQzMjEnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0FkYW0nLCBwaG9uZTonNTU1LTU2NzgnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGllJywgcGhvbmU6JzU1NS04NzY1J30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidKdWxpZXR0ZScsIHBob25lOic1NTUtNTY3OCd9XVwiPjwvZGl2PlxuXG4gICAgICAgPGxhYmVsPlNlYXJjaDogPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoVGV4dFwiPjwvbGFiZWw+XG4gICAgICAgPHRhYmxlIGlkPVwic2VhcmNoVGV4dFJlc3VsdHNcIj5cbiAgICAgICAgIDx0cj48dGg+TmFtZTwvdGg+PHRoPlBob25lPC90aD48L3RyPlxuICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgZmlsdGVyOnNlYXJjaFRleHRcIj5cbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgPC90YWJsZT5cbiAgICAgICA8aHI+XG4gICAgICAgPGxhYmVsPkFueTogPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoLiRcIj48L2xhYmVsPiA8YnI+XG4gICAgICAgPGxhYmVsPk5hbWUgb25seSA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2gubmFtZVwiPjwvbGFiZWw+PGJyPlxuICAgICAgIDxsYWJlbD5QaG9uZSBvbmx5IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaC5waG9uZVwiPjwvbGFiZWw+PGJyPlxuICAgICAgIDxsYWJlbD5FcXVhbGl0eSA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJzdHJpY3RcIj48L2xhYmVsPjxicj5cbiAgICAgICA8dGFibGUgaWQ9XCJzZWFyY2hPYmpSZXN1bHRzXCI+XG4gICAgICAgICA8dHI+PHRoPk5hbWU8L3RoPjx0aD5QaG9uZTwvdGg+PC90cj5cbiAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmRPYmogaW4gZnJpZW5kcyB8IGZpbHRlcjpzZWFyY2g6c3RyaWN0XCI+XG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZE9iai5uYW1lfX08L3RkPlxuICAgICAgICAgICA8dGQ+e3tmcmllbmRPYmoucGhvbmV9fTwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgIDwvdGFibGU+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBleHBlY3RGcmllbmROYW1lcyA9IGZ1bmN0aW9uKGV4cGVjdGVkTmFtZXMsIGtleSkge1xuICAgICAgICAgZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoa2V5ICsgJyBpbiBmcmllbmRzJykuY29sdW1uKGtleSArICcubmFtZScpKS50aGVuKGZ1bmN0aW9uKGFycikge1xuICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbih3ZCwgaSkge1xuICAgICAgICAgICAgIGV4cGVjdCh3ZC5nZXRUZXh0KCkpLnRvTWF0Y2goZXhwZWN0ZWROYW1lc1tpXSk7XG4gICAgICAgICAgIH0pO1xuICAgICAgICAgfSk7XG4gICAgICAgfTtcblxuICAgICAgIGl0KCdzaG91bGQgc2VhcmNoIGFjcm9zcyBhbGwgZmllbGRzIHdoZW4gZmlsdGVyaW5nIHdpdGggYSBzdHJpbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBzZWFyY2hUZXh0ID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoVGV4dCcpKTtcbiAgICAgICAgIHNlYXJjaFRleHQuY2xlYXIoKTtcbiAgICAgICAgIHNlYXJjaFRleHQuc2VuZEtleXMoJ20nKTtcbiAgICAgICAgIGV4cGVjdEZyaWVuZE5hbWVzKFsnTWFyeScsICdNaWtlJywgJ0FkYW0nXSwgJ2ZyaWVuZCcpO1xuXG4gICAgICAgICBzZWFyY2hUZXh0LmNsZWFyKCk7XG4gICAgICAgICBzZWFyY2hUZXh0LnNlbmRLZXlzKCc3NicpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydKb2huJywgJ0p1bGllJ10sICdmcmllbmQnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgc2VhcmNoIGluIHNwZWNpZmljIGZpZWxkcyB3aGVuIGZpbHRlcmluZyB3aXRoIGEgcHJlZGljYXRlIG9iamVjdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNlYXJjaEFueSA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlYXJjaC4kJykpO1xuICAgICAgICAgc2VhcmNoQW55LmNsZWFyKCk7XG4gICAgICAgICBzZWFyY2hBbnkuc2VuZEtleXMoJ2knKTtcbiAgICAgICAgIGV4cGVjdEZyaWVuZE5hbWVzKFsnTWFyeScsICdNaWtlJywgJ0p1bGllJywgJ0p1bGlldHRlJ10sICdmcmllbmRPYmonKTtcbiAgICAgICB9KTtcbiAgICAgICBpdCgnc2hvdWxkIHVzZSBhIGVxdWFsIGNvbXBhcmlzb24gd2hlbiBjb21wYXJhdG9yIGlzIHRydWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBzZWFyY2hOYW1lID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoLm5hbWUnKSk7XG4gICAgICAgICB2YXIgc3RyaWN0ID0gZWxlbWVudChieS5tb2RlbCgnc3RyaWN0JykpO1xuICAgICAgICAgc2VhcmNoTmFtZS5jbGVhcigpO1xuICAgICAgICAgc2VhcmNoTmFtZS5zZW5kS2V5cygnSnVsaWUnKTtcbiAgICAgICAgIHN0cmljdC5jbGljaygpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydKdWxpZSddLCAnZnJpZW5kT2JqJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5mdW5jdGlvbiBmaWx0ZXJGaWx0ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcnJheSwgZXhwcmVzc2lvbiwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXkpIHtcbiAgICBpZiAoIWlzQXJyYXlMaWtlKGFycmF5KSkge1xuICAgICAgaWYgKGFycmF5ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbWluRXJyKCdmaWx0ZXInKSgnbm90YXJyYXknLCAnRXhwZWN0ZWQgYXJyYXkgYnV0IHJlY2VpdmVkOiB7MH0nLCBhcnJheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYW55UHJvcGVydHlLZXkgPSBhbnlQcm9wZXJ0eUtleSB8fCAnJCc7XG4gICAgdmFyIGV4cHJlc3Npb25UeXBlID0gZ2V0VHlwZUZvckZpbHRlcihleHByZXNzaW9uKTtcbiAgICB2YXIgcHJlZGljYXRlRm47XG4gICAgdmFyIG1hdGNoQWdhaW5zdEFueVByb3A7XG5cbiAgICBzd2l0Y2ggKGV4cHJlc3Npb25UeXBlKSB7XG4gICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgIHByZWRpY2F0ZUZuID0gZXhwcmVzc2lvbjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIGNhc2UgJ251bGwnOlxuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIG1hdGNoQWdhaW5zdEFueVByb3AgPSB0cnVlO1xuICAgICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICBwcmVkaWNhdGVGbiA9IGNyZWF0ZVByZWRpY2F0ZUZuKGV4cHJlc3Npb24sIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhcnJheSwgcHJlZGljYXRlRm4pO1xuICB9O1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBgZmlsdGVyRmlsdGVyYFxuZnVuY3Rpb24gY3JlYXRlUHJlZGljYXRlRm4oZXhwcmVzc2lvbiwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIG1hdGNoQWdhaW5zdEFueVByb3ApIHtcbiAgdmFyIHNob3VsZE1hdGNoUHJpbWl0aXZlcyA9IGlzT2JqZWN0KGV4cHJlc3Npb24pICYmIChhbnlQcm9wZXJ0eUtleSBpbiBleHByZXNzaW9uKTtcbiAgdmFyIHByZWRpY2F0ZUZuO1xuXG4gIGlmIChjb21wYXJhdG9yID09PSB0cnVlKSB7XG4gICAgY29tcGFyYXRvciA9IGVxdWFscztcbiAgfSBlbHNlIGlmICghaXNGdW5jdGlvbihjb21wYXJhdG9yKSkge1xuICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQoYWN0dWFsKSkge1xuICAgICAgICAvLyBObyBzdWJzdHJpbmcgbWF0Y2hpbmcgYWdhaW5zdCBgdW5kZWZpbmVkYFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoKGFjdHVhbCA9PT0gbnVsbCkgfHwgKGV4cGVjdGVkID09PSBudWxsKSkge1xuICAgICAgICAvLyBObyBzdWJzdHJpbmcgbWF0Y2hpbmcgYWdhaW5zdCBgbnVsbGA7IG9ubHkgbWF0Y2ggYWdhaW5zdCBgbnVsbGBcbiAgICAgICAgcmV0dXJuIGFjdHVhbCA9PT0gZXhwZWN0ZWQ7XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3QoZXhwZWN0ZWQpIHx8IChpc09iamVjdChhY3R1YWwpICYmICFoYXNDdXN0b21Ub1N0cmluZyhhY3R1YWwpKSkge1xuICAgICAgICAvLyBTaG91bGQgbm90IGNvbXBhcmUgcHJpbWl0aXZlcyBhZ2FpbnN0IG9iamVjdHMsIHVubGVzcyB0aGV5IGhhdmUgY3VzdG9tIGB0b1N0cmluZ2AgbWV0aG9kXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgYWN0dWFsID0gbG93ZXJjYXNlKCcnICsgYWN0dWFsKTtcbiAgICAgIGV4cGVjdGVkID0gbG93ZXJjYXNlKCcnICsgZXhwZWN0ZWQpO1xuICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSAhPT0gLTE7XG4gICAgfTtcbiAgfVxuXG4gIHByZWRpY2F0ZUZuID0gZnVuY3Rpb24oaXRlbSkge1xuICAgIGlmIChzaG91bGRNYXRjaFByaW1pdGl2ZXMgJiYgIWlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICByZXR1cm4gZGVlcENvbXBhcmUoaXRlbSwgZXhwcmVzc2lvblthbnlQcm9wZXJ0eUtleV0sIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHByZXNzaW9uLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgbWF0Y2hBZ2FpbnN0QW55UHJvcCk7XG4gIH07XG5cbiAgcmV0dXJuIHByZWRpY2F0ZUZuO1xufVxuXG5mdW5jdGlvbiBkZWVwQ29tcGFyZShhY3R1YWwsIGV4cGVjdGVkLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgbWF0Y2hBZ2FpbnN0QW55UHJvcCwgZG9udE1hdGNoV2hvbGVPYmplY3QpIHtcbiAgdmFyIGFjdHVhbFR5cGUgPSBnZXRUeXBlRm9yRmlsdGVyKGFjdHVhbCk7XG4gIHZhciBleHBlY3RlZFR5cGUgPSBnZXRUeXBlRm9yRmlsdGVyKGV4cGVjdGVkKTtcblxuICBpZiAoKGV4cGVjdGVkVHlwZSA9PT0gJ3N0cmluZycpICYmIChleHBlY3RlZC5jaGFyQXQoMCkgPT09ICchJykpIHtcbiAgICByZXR1cm4gIWRlZXBDb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQuc3Vic3RyaW5nKDEpLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgbWF0Y2hBZ2FpbnN0QW55UHJvcCk7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShhY3R1YWwpKSB7XG4gICAgLy8gSW4gY2FzZSBgYWN0dWFsYCBpcyBhbiBhcnJheSwgY29uc2lkZXIgaXQgYSBtYXRjaFxuICAgIC8vIGlmIEFOWSBvZiBpdCdzIGl0ZW1zIG1hdGNoZXMgYGV4cGVjdGVkYFxuICAgIHJldHVybiBhY3R1YWwuc29tZShmdW5jdGlvbihpdGVtKSB7XG4gICAgICByZXR1cm4gZGVlcENvbXBhcmUoaXRlbSwgZXhwZWN0ZWQsIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN3aXRjaCAoYWN0dWFsVHlwZSkge1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICB2YXIga2V5O1xuICAgICAgaWYgKG1hdGNoQWdhaW5zdEFueVByb3ApIHtcbiAgICAgICAgZm9yIChrZXkgaW4gYWN0dWFsKSB7XG4gICAgICAgICAgLy8gVW5kZXIgY2VydGFpbiwgcmFyZSwgY2lyY3Vtc3RhbmNlcywga2V5IG1heSBub3QgYmUgYSBzdHJpbmcgYW5kIGBjaGFyQXRgIHdpbGwgYmUgdW5kZWZpbmVkXG4gICAgICAgICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNTY0NFxuICAgICAgICAgIGlmIChrZXkuY2hhckF0ICYmIChrZXkuY2hhckF0KDApICE9PSAnJCcpICYmXG4gICAgICAgICAgICAgIGRlZXBDb21wYXJlKGFjdHVhbFtrZXldLCBleHBlY3RlZCwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIHRydWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvbnRNYXRjaFdob2xlT2JqZWN0ID8gZmFsc2UgOiBkZWVwQ29tcGFyZShhY3R1YWwsIGV4cGVjdGVkLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvciAoa2V5IGluIGV4cGVjdGVkKSB7XG4gICAgICAgICAgdmFyIGV4cGVjdGVkVmFsID0gZXhwZWN0ZWRba2V5XTtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihleHBlY3RlZFZhbCkgfHwgaXNVbmRlZmluZWQoZXhwZWN0ZWRWYWwpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgbWF0Y2hBbnlQcm9wZXJ0eSA9IGtleSA9PT0gYW55UHJvcGVydHlLZXk7XG4gICAgICAgICAgdmFyIGFjdHVhbFZhbCA9IG1hdGNoQW55UHJvcGVydHkgPyBhY3R1YWwgOiBhY3R1YWxba2V5XTtcbiAgICAgICAgICBpZiAoIWRlZXBDb21wYXJlKGFjdHVhbFZhbCwgZXhwZWN0ZWRWYWwsIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFueVByb3BlcnR5LCBtYXRjaEFueVByb3BlcnR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb21wYXJhdG9yKGFjdHVhbCwgZXhwZWN0ZWQpO1xuICAgICAgfVxuICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoYWN0dWFsLCBleHBlY3RlZCk7XG4gIH1cbn1cblxuLy8gVXNlZCBmb3IgZWFzaWx5IGRpZmZlcmVudGlhdGluZyBiZXR3ZWVuIGBudWxsYCBhbmQgYWN0dWFsIGBvYmplY3RgXG5mdW5jdGlvbiBnZXRUeXBlRm9yRmlsdGVyKHZhbCkge1xuICByZXR1cm4gKHZhbCA9PT0gbnVsbCkgPyAnbnVsbCcgOiB0eXBlb2YgdmFsO1xufVxuXG52YXIgTUFYX0RJR0lUUyA9IDIyO1xudmFyIERFQ0lNQUxfU0VQID0gJy4nO1xudmFyIFpFUk9fQ0hBUiA9ICcwJztcblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBjdXJyZW5jeVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZvcm1hdHMgYSBudW1iZXIgYXMgYSBjdXJyZW5jeSAoaWUgJDEsMjM0LjU2KS4gV2hlbiBubyBjdXJyZW5jeSBzeW1ib2wgaXMgcHJvdmlkZWQsIGRlZmF1bHRcbiAqIHN5bWJvbCBmb3IgY3VycmVudCBsb2NhbGUgaXMgdXNlZC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IElucHV0IHRvIGZpbHRlci5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gc3ltYm9sIEN1cnJlbmN5IHN5bWJvbCBvciBpZGVudGlmaWVyIHRvIGJlIGRpc3BsYXllZC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gZnJhY3Rpb25TaXplIE51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byByb3VuZCB0aGUgYW1vdW50IHRvLCBkZWZhdWx0cyB0byBkZWZhdWx0IG1heCBmcmFjdGlvbiBzaXplIGZvciBjdXJyZW50IGxvY2FsZVxuICogQHJldHVybnMge3N0cmluZ30gRm9ybWF0dGVkIG51bWJlci5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImN1cnJlbmN5RXhhbXBsZVwiIG5hbWU9XCJjdXJyZW5jeS1maWx0ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2N1cnJlbmN5RXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5hbW91bnQgPSAxMjM0LjU2O1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJhbW91bnRcIiBhcmlhLWxhYmVsPVwiYW1vdW50XCI+IDxicj5cbiAgICAgICAgIGRlZmF1bHQgY3VycmVuY3kgc3ltYm9sICgkKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1kZWZhdWx0XCI+e3thbW91bnQgfCBjdXJyZW5jeX19PC9zcGFuPjxicj5cbiAgICAgICAgIGN1c3RvbSBjdXJyZW5jeSBpZGVudGlmaWVyIChVU0QkKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1jdXN0b21cIj57e2Ftb3VudCB8IGN1cnJlbmN5OlwiVVNEJFwifX08L3NwYW4+PGJyPlxuICAgICAgICAgbm8gZnJhY3Rpb25zICgwKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1uby1mcmFjdGlvbnNcIj57e2Ftb3VudCB8IGN1cnJlbmN5OlwiVVNEJFwiOjB9fTwvc3Bhbj5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBpbml0IHdpdGggMTIzNC41NicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCckMSwyMzQuNTYnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1jdXN0b20nKSkuZ2V0VGV4dCgpKS50b0JlKCdVU0QkMSwyMzQuNTYnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1uby1mcmFjdGlvbnMnKSkuZ2V0VGV4dCgpKS50b0JlKCdVU0QkMSwyMzUnKTtcbiAgICAgICB9KTtcbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT09ICdzYWZhcmknKSB7XG4gICAgICAgICAgIC8vIFNhZmFyaSBkb2VzIG5vdCB1bmRlcnN0YW5kIHRoZSBtaW51cyBrZXkuIFNlZVxuICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODFcbiAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgfVxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnYW1vdW50JykpLmNsZWFyKCk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdhbW91bnQnKSkuc2VuZEtleXMoJy0xMjM0Jyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0kMSwyMzQuMDAnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1jdXN0b20nKSkuZ2V0VGV4dCgpKS50b0JlKCctVVNEJDEsMjM0LjAwJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktbm8tZnJhY3Rpb25zJykpLmdldFRleHQoKSkudG9CZSgnLVVTRCQxLDIzNCcpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbmN1cnJlbmN5RmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcbmZ1bmN0aW9uIGN1cnJlbmN5RmlsdGVyKCRsb2NhbGUpIHtcbiAgdmFyIGZvcm1hdHMgPSAkbG9jYWxlLk5VTUJFUl9GT1JNQVRTO1xuICByZXR1cm4gZnVuY3Rpb24oYW1vdW50LCBjdXJyZW5jeVN5bWJvbCwgZnJhY3Rpb25TaXplKSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKGN1cnJlbmN5U3ltYm9sKSkge1xuICAgICAgY3VycmVuY3lTeW1ib2wgPSBmb3JtYXRzLkNVUlJFTkNZX1NZTTtcbiAgICB9XG5cbiAgICBpZiAoaXNVbmRlZmluZWQoZnJhY3Rpb25TaXplKSkge1xuICAgICAgZnJhY3Rpb25TaXplID0gZm9ybWF0cy5QQVRURVJOU1sxXS5tYXhGcmFjO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBjdXJyZW5jeSBzeW1ib2wgaXMgZW1wdHksIHRyaW0gd2hpdGVzcGFjZSBhcm91bmQgdGhlIHN5bWJvbFxuICAgIHZhciBjdXJyZW5jeVN5bWJvbFJlID0gIWN1cnJlbmN5U3ltYm9sID8gL1xccypcXHUwMEE0XFxzKi9nIDogL1xcdTAwQTQvZztcblxuICAgIC8vIGlmIG51bGwgb3IgdW5kZWZpbmVkIHBhc3MgaXQgdGhyb3VnaFxuICAgIHJldHVybiAoYW1vdW50ID09IG51bGwpXG4gICAgICAgID8gYW1vdW50XG4gICAgICAgIDogZm9ybWF0TnVtYmVyKGFtb3VudCwgZm9ybWF0cy5QQVRURVJOU1sxXSwgZm9ybWF0cy5HUk9VUF9TRVAsIGZvcm1hdHMuREVDSU1BTF9TRVAsIGZyYWN0aW9uU2l6ZSkuXG4gICAgICAgICAgICByZXBsYWNlKGN1cnJlbmN5U3ltYm9sUmUsIGN1cnJlbmN5U3ltYm9sKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBudW1iZXJcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBGb3JtYXRzIGEgbnVtYmVyIGFzIHRleHQuXG4gKlxuICogSWYgdGhlIGlucHV0IGlzIG51bGwgb3IgdW5kZWZpbmVkLCBpdCB3aWxsIGp1c3QgYmUgcmV0dXJuZWQuXG4gKiBJZiB0aGUgaW5wdXQgaXMgaW5maW5pdGUgKEluZmluaXR5IG9yIC1JbmZpbml0eSksIHRoZSBJbmZpbml0eSBzeW1ib2wgJ+KInicgb3IgJy3iiJ4nIGlzIHJldHVybmVkLCByZXNwZWN0aXZlbHkuXG4gKiBJZiB0aGUgaW5wdXQgaXMgbm90IGEgbnVtYmVyIGFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZC5cbiAqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBudW1iZXIgTnVtYmVyIHRvIGZvcm1hdC5cbiAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpPX0gZnJhY3Rpb25TaXplIE51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byByb3VuZCB0aGUgbnVtYmVyIHRvLlxuICogSWYgdGhpcyBpcyBub3QgcHJvdmlkZWQgdGhlbiB0aGUgZnJhY3Rpb24gc2l6ZSBpcyBjb21wdXRlZCBmcm9tIHRoZSBjdXJyZW50IGxvY2FsZSdzIG51bWJlclxuICogZm9ybWF0dGluZyBwYXR0ZXJuLiBJbiB0aGUgY2FzZSBvZiB0aGUgZGVmYXVsdCBsb2NhbGUsIGl0IHdpbGwgYmUgMy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IE51bWJlciByb3VuZGVkIHRvIGBmcmFjdGlvblNpemVgIGFwcHJvcHJpYXRlbHkgZm9ybWF0dGVkIGJhc2VkIG9uIHRoZSBjdXJyZW50XG4gKiAgICAgICAgICAgICAgICAgICBsb2NhbGUgKGUuZy4sIGluIHRoZSBlbl9VUyBsb2NhbGUgaXQgd2lsbCBoYXZlIFwiLlwiIGFzIHRoZSBkZWNpbWFsIHNlcGFyYXRvciBhbmRcbiAqICAgICAgICAgICAgICAgICAgIGluY2x1ZGUgXCIsXCIgZ3JvdXAgc2VwYXJhdG9ycyBhZnRlciBlYWNoIHRoaXJkIGRpZ2l0KS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibnVtYmVyRmlsdGVyRXhhbXBsZVwiIG5hbWU9XCJudW1iZXItZmlsdGVyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJGaWx0ZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnZhbCA9IDEyMzQuNTY3ODk7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGxhYmVsPkVudGVyIG51bWJlcjogPGlucHV0IG5nLW1vZGVsPSd2YWwnPjwvbGFiZWw+PGJyPlxuICAgICAgICAgRGVmYXVsdCBmb3JtYXR0aW5nOiA8c3BhbiBpZD0nbnVtYmVyLWRlZmF1bHQnPnt7dmFsIHwgbnVtYmVyfX08L3NwYW4+PGJyPlxuICAgICAgICAgTm8gZnJhY3Rpb25zOiA8c3Bhbj57e3ZhbCB8IG51bWJlcjowfX08L3NwYW4+PGJyPlxuICAgICAgICAgTmVnYXRpdmUgbnVtYmVyOiA8c3Bhbj57ey12YWwgfCBudW1iZXI6NH19PC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGZvcm1hdCBudW1iZXJzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbnVtYmVyLWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCcxLDIzNC41NjgnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbCB8IG51bWJlcjowJykpLmdldFRleHQoKSkudG9CZSgnMSwyMzUnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJy12YWwgfCBudW1iZXI6NCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0xLDIzNC41Njc5Jyk7XG4gICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgndmFsJykpLmNsZWFyKCk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWwnKSkuc2VuZEtleXMoJzMzNzQuMzMzJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbnVtYmVyLWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCczLDM3NC4zMzMnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbCB8IG51bWJlcjowJykpLmdldFRleHQoKSkudG9CZSgnMywzNzQnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJy12YWwgfCBudW1iZXI6NCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0zLDM3NC4zMzMwJyk7XG4gICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5udW1iZXJGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xuZnVuY3Rpb24gbnVtYmVyRmlsdGVyKCRsb2NhbGUpIHtcbiAgdmFyIGZvcm1hdHMgPSAkbG9jYWxlLk5VTUJFUl9GT1JNQVRTO1xuICByZXR1cm4gZnVuY3Rpb24obnVtYmVyLCBmcmFjdGlvblNpemUpIHtcblxuICAgIC8vIGlmIG51bGwgb3IgdW5kZWZpbmVkIHBhc3MgaXQgdGhyb3VnaFxuICAgIHJldHVybiAobnVtYmVyID09IG51bGwpXG4gICAgICAgID8gbnVtYmVyXG4gICAgICAgIDogZm9ybWF0TnVtYmVyKG51bWJlciwgZm9ybWF0cy5QQVRURVJOU1swXSwgZm9ybWF0cy5HUk9VUF9TRVAsIGZvcm1hdHMuREVDSU1BTF9TRVAsXG4gICAgICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uU2l6ZSk7XG4gIH07XG59XG5cbi8qKlxuICogUGFyc2UgYSBudW1iZXIgKGFzIGEgc3RyaW5nKSBpbnRvIHRocmVlIGNvbXBvbmVudHMgdGhhdCBjYW4gYmUgdXNlZFxuICogZm9yIGZvcm1hdHRpbmcgdGhlIG51bWJlci5cbiAqXG4gKiAoU2lnbmlmaWNhbnQgYml0cyBvZiB0aGlzIHBhcnNlIGFsZ29yaXRobSBjYW1lIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01pa2VNY2wvYmlnLmpzLylcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG51bVN0ciBUaGUgbnVtYmVyIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHtvYmplY3R9IEFuIG9iamVjdCBkZXNjcmliaW5nIHRoaXMgbnVtYmVyLCBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcga2V5czpcbiAqICAtIGQgOiBhbiBhcnJheSBvZiBkaWdpdHMgY29udGFpbmluZyBsZWFkaW5nIHplcm9zIGFzIG5lY2Vzc2FyeVxuICogIC0gaSA6IHRoZSBudW1iZXIgb2YgdGhlIGRpZ2l0cyBpbiBgZGAgdGhhdCBhcmUgdG8gdGhlIGxlZnQgb2YgdGhlIGRlY2ltYWwgcG9pbnRcbiAqICAtIGUgOiB0aGUgZXhwb25lbnQgZm9yIG51bWJlcnMgdGhhdCB3b3VsZCBuZWVkIG1vcmUgdGhhbiBgTUFYX0RJR0lUU2AgZGlnaXRzIGluIGBkYFxuICpcbiAqL1xuZnVuY3Rpb24gcGFyc2UobnVtU3RyKSB7XG4gIHZhciBleHBvbmVudCA9IDAsIGRpZ2l0cywgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzO1xuICB2YXIgaSwgaiwgemVyb3M7XG5cbiAgLy8gRGVjaW1hbCBwb2ludD9cbiAgaWYgKChudW1iZXJPZkludGVnZXJEaWdpdHMgPSBudW1TdHIuaW5kZXhPZihERUNJTUFMX1NFUCkpID4gLTEpIHtcbiAgICBudW1TdHIgPSBudW1TdHIucmVwbGFjZShERUNJTUFMX1NFUCwgJycpO1xuICB9XG5cbiAgLy8gRXhwb25lbnRpYWwgZm9ybT9cbiAgaWYgKChpID0gbnVtU3RyLnNlYXJjaCgvZS9pKSkgPiAwKSB7XG4gICAgLy8gV29yayBvdXQgdGhlIGV4cG9uZW50LlxuICAgIGlmIChudW1iZXJPZkludGVnZXJEaWdpdHMgPCAwKSBudW1iZXJPZkludGVnZXJEaWdpdHMgPSBpO1xuICAgIG51bWJlck9mSW50ZWdlckRpZ2l0cyArPSArbnVtU3RyLnNsaWNlKGkgKyAxKTtcbiAgICBudW1TdHIgPSBudW1TdHIuc3Vic3RyaW5nKDAsIGkpO1xuICB9IGVsc2UgaWYgKG51bWJlck9mSW50ZWdlckRpZ2l0cyA8IDApIHtcbiAgICAvLyBUaGVyZSB3YXMgbm8gZGVjaW1hbCBwb2ludCBvciBleHBvbmVudCBzbyBpdCBpcyBhbiBpbnRlZ2VyLlxuICAgIG51bWJlck9mSW50ZWdlckRpZ2l0cyA9IG51bVN0ci5sZW5ndGg7XG4gIH1cblxuICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MuXG4gIGZvciAoaSA9IDA7IG51bVN0ci5jaGFyQXQoaSkgPT09IFpFUk9fQ0hBUjsgaSsrKSB7IC8qIGVtcHR5ICovIH1cblxuICBpZiAoaSA9PT0gKHplcm9zID0gbnVtU3RyLmxlbmd0aCkpIHtcbiAgICAvLyBUaGUgZGlnaXRzIGFyZSBhbGwgemVyby5cbiAgICBkaWdpdHMgPSBbMF07XG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzID0gMTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIHRyYWlsaW5nIHplcm9zXG4gICAgemVyb3MtLTtcbiAgICB3aGlsZSAobnVtU3RyLmNoYXJBdCh6ZXJvcykgPT09IFpFUk9fQ0hBUikgemVyb3MtLTtcblxuICAgIC8vIFRyYWlsaW5nIHplcm9zIGFyZSBpbnNpZ25pZmljYW50IHNvIGlnbm9yZSB0aGVtXG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzIC09IGk7XG4gICAgZGlnaXRzID0gW107XG4gICAgLy8gQ29udmVydCBzdHJpbmcgdG8gYXJyYXkgb2YgZGlnaXRzIHdpdGhvdXQgbGVhZGluZy90cmFpbGluZyB6ZXJvcy5cbiAgICBmb3IgKGogPSAwOyBpIDw9IHplcm9zOyBpKyssIGorKykge1xuICAgICAgZGlnaXRzW2pdID0gK251bVN0ci5jaGFyQXQoaSk7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgdGhlIG51bWJlciBvdmVyZmxvd3MgdGhlIG1heGltdW0gYWxsb3dlZCBkaWdpdHMgdGhlbiB1c2UgYW4gZXhwb25lbnQuXG4gIGlmIChudW1iZXJPZkludGVnZXJEaWdpdHMgPiBNQVhfRElHSVRTKSB7XG4gICAgZGlnaXRzID0gZGlnaXRzLnNwbGljZSgwLCBNQVhfRElHSVRTIC0gMSk7XG4gICAgZXhwb25lbnQgPSBudW1iZXJPZkludGVnZXJEaWdpdHMgLSAxO1xuICAgIG51bWJlck9mSW50ZWdlckRpZ2l0cyA9IDE7XG4gIH1cblxuICByZXR1cm4geyBkOiBkaWdpdHMsIGU6IGV4cG9uZW50LCBpOiBudW1iZXJPZkludGVnZXJEaWdpdHMgfTtcbn1cblxuLyoqXG4gKiBSb3VuZCB0aGUgcGFyc2VkIG51bWJlciB0byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlc1xuICogVGhpcyBmdW5jdGlvbiBjaGFuZ2VkIHRoZSBwYXJzZWROdW1iZXIgaW4tcGxhY2VcbiAqL1xuZnVuY3Rpb24gcm91bmROdW1iZXIocGFyc2VkTnVtYmVyLCBmcmFjdGlvblNpemUsIG1pbkZyYWMsIG1heEZyYWMpIHtcbiAgICB2YXIgZGlnaXRzID0gcGFyc2VkTnVtYmVyLmQ7XG4gICAgdmFyIGZyYWN0aW9uTGVuID0gZGlnaXRzLmxlbmd0aCAtIHBhcnNlZE51bWJlci5pO1xuXG4gICAgLy8gZGV0ZXJtaW5lIGZyYWN0aW9uU2l6ZSBpZiBpdCBpcyBub3Qgc3BlY2lmaWVkOyBgK2ZyYWN0aW9uU2l6ZWAgY29udmVydHMgaXQgdG8gYSBudW1iZXJcbiAgICBmcmFjdGlvblNpemUgPSAoaXNVbmRlZmluZWQoZnJhY3Rpb25TaXplKSkgPyBNYXRoLm1pbihNYXRoLm1heChtaW5GcmFjLCBmcmFjdGlvbkxlbiksIG1heEZyYWMpIDogK2ZyYWN0aW9uU2l6ZTtcblxuICAgIC8vIFRoZSBpbmRleCBvZiB0aGUgZGlnaXQgdG8gd2hlcmUgcm91bmRpbmcgaXMgdG8gb2NjdXJcbiAgICB2YXIgcm91bmRBdCA9IGZyYWN0aW9uU2l6ZSArIHBhcnNlZE51bWJlci5pO1xuICAgIHZhciBkaWdpdCA9IGRpZ2l0c1tyb3VuZEF0XTtcblxuICAgIGlmIChyb3VuZEF0ID4gMCkge1xuICAgICAgLy8gRHJvcCBmcmFjdGlvbmFsIGRpZ2l0cyBiZXlvbmQgYHJvdW5kQXRgXG4gICAgICBkaWdpdHMuc3BsaWNlKE1hdGgubWF4KHBhcnNlZE51bWJlci5pLCByb3VuZEF0KSk7XG5cbiAgICAgIC8vIFNldCBub24tZnJhY3Rpb25hbCBkaWdpdHMgYmV5b25kIGByb3VuZEF0YCB0byAwXG4gICAgICBmb3IgKHZhciBqID0gcm91bmRBdDsgaiA8IGRpZ2l0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBkaWdpdHNbal0gPSAwO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXZSByb3VuZGVkIHRvIHplcm8gc28gcmVzZXQgdGhlIHBhcnNlZE51bWJlclxuICAgICAgZnJhY3Rpb25MZW4gPSBNYXRoLm1heCgwLCBmcmFjdGlvbkxlbik7XG4gICAgICBwYXJzZWROdW1iZXIuaSA9IDE7XG4gICAgICBkaWdpdHMubGVuZ3RoID0gTWF0aC5tYXgoMSwgcm91bmRBdCA9IGZyYWN0aW9uU2l6ZSArIDEpO1xuICAgICAgZGlnaXRzWzBdID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcm91bmRBdDsgaSsrKSBkaWdpdHNbaV0gPSAwO1xuICAgIH1cblxuICAgIGlmIChkaWdpdCA+PSA1KSB7XG4gICAgICBpZiAocm91bmRBdCAtIDEgPCAwKSB7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrID4gcm91bmRBdDsgay0tKSB7XG4gICAgICAgICAgZGlnaXRzLnVuc2hpZnQoMCk7XG4gICAgICAgICAgcGFyc2VkTnVtYmVyLmkrKztcbiAgICAgICAgfVxuICAgICAgICBkaWdpdHMudW5zaGlmdCgxKTtcbiAgICAgICAgcGFyc2VkTnVtYmVyLmkrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpZ2l0c1tyb3VuZEF0IC0gMV0rKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQYWQgb3V0IHdpdGggemVyb3MgdG8gZ2V0IHRoZSByZXF1aXJlZCBmcmFjdGlvbiBsZW5ndGhcbiAgICBmb3IgKDsgZnJhY3Rpb25MZW4gPCBNYXRoLm1heCgwLCBmcmFjdGlvblNpemUpOyBmcmFjdGlvbkxlbisrKSBkaWdpdHMucHVzaCgwKTtcblxuXG4gICAgLy8gRG8gYW55IGNhcnJ5aW5nLCBlLmcuIGEgZGlnaXQgd2FzIHJvdW5kZWQgdXAgdG8gMTBcbiAgICB2YXIgY2FycnkgPSBkaWdpdHMucmVkdWNlUmlnaHQoZnVuY3Rpb24oY2FycnksIGQsIGksIGRpZ2l0cykge1xuICAgICAgZCA9IGQgKyBjYXJyeTtcbiAgICAgIGRpZ2l0c1tpXSA9IGQgJSAxMDtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKGQgLyAxMCk7XG4gICAgfSwgMCk7XG4gICAgaWYgKGNhcnJ5KSB7XG4gICAgICBkaWdpdHMudW5zaGlmdChjYXJyeSk7XG4gICAgICBwYXJzZWROdW1iZXIuaSsrO1xuICAgIH1cbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBudW1iZXIgaW50byBhIHN0cmluZ1xuICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgICAgICAgVGhlIG51bWJlciB0byBmb3JtYXRcbiAqIEBwYXJhbSAge3tcbiAqICAgICAgICAgICBtaW5GcmFjLCAvLyB0aGUgbWluaW11bSBudW1iZXIgb2YgZGlnaXRzIHJlcXVpcmVkIGluIHRoZSBmcmFjdGlvbiBwYXJ0IG9mIHRoZSBudW1iZXJcbiAqICAgICAgICAgICBtYXhGcmFjLCAvLyB0aGUgbWF4aW11bSBudW1iZXIgb2YgZGlnaXRzIHJlcXVpcmVkIGluIHRoZSBmcmFjdGlvbiBwYXJ0IG9mIHRoZSBudW1iZXJcbiAqICAgICAgICAgICBnU2l6ZSwgICAvLyBudW1iZXIgb2YgZGlnaXRzIGluIGVhY2ggZ3JvdXAgb2Ygc2VwYXJhdGVkIGRpZ2l0c1xuICogICAgICAgICAgIGxnU2l6ZSwgIC8vIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGxhc3QgZ3JvdXAgb2YgZGlnaXRzIGJlZm9yZSB0aGUgZGVjaW1hbCBzZXBhcmF0b3JcbiAqICAgICAgICAgICBuZWdQcmUsICAvLyB0aGUgc3RyaW5nIHRvIGdvIGluIGZyb250IG9mIGEgbmVnYXRpdmUgbnVtYmVyIChlLmcuIGAtYCBvciBgKGApKVxuICogICAgICAgICAgIHBvc1ByZSwgIC8vIHRoZSBzdHJpbmcgdG8gZ28gaW4gZnJvbnQgb2YgYSBwb3NpdGl2ZSBudW1iZXJcbiAqICAgICAgICAgICBuZWdTdWYsICAvLyB0aGUgc3RyaW5nIHRvIGdvIGFmdGVyIGEgbmVnYXRpdmUgbnVtYmVyIChlLmcuIGApYClcbiAqICAgICAgICAgICBwb3NTdWYgICAvLyB0aGUgc3RyaW5nIHRvIGdvIGFmdGVyIGEgcG9zaXRpdmUgbnVtYmVyXG4gKiAgICAgICAgIH19IHBhdHRlcm5cbiAqIEBwYXJhbSAge3N0cmluZ30gZ3JvdXBTZXAgICAgIFRoZSBzdHJpbmcgdG8gc2VwYXJhdGUgZ3JvdXBzIG9mIG51bWJlciAoZS5nLiBgLGApXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGRlY2ltYWxTZXAgICBUaGUgc3RyaW5nIHRvIGFjdCBhcyB0aGUgZGVjaW1hbCBzZXBhcmF0b3IgKGUuZy4gYC5gKVxuICogQHBhcmFtICB7W3R5cGVdfSBmcmFjdGlvblNpemUgVGhlIHNpemUgb2YgdGhlIGZyYWN0aW9uYWwgcGFydCBvZiB0aGUgbnVtYmVyXG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgICAgICAgICBUaGUgbnVtYmVyIGZvcm1hdHRlZCBhcyBhIHN0cmluZ1xuICovXG5mdW5jdGlvbiBmb3JtYXROdW1iZXIobnVtYmVyLCBwYXR0ZXJuLCBncm91cFNlcCwgZGVjaW1hbFNlcCwgZnJhY3Rpb25TaXplKSB7XG5cbiAgaWYgKCEoaXNTdHJpbmcobnVtYmVyKSB8fCBpc051bWJlcihudW1iZXIpKSB8fCBpc05hTihudW1iZXIpKSByZXR1cm4gJyc7XG5cbiAgdmFyIGlzSW5maW5pdHkgPSAhaXNGaW5pdGUobnVtYmVyKTtcbiAgdmFyIGlzWmVybyA9IGZhbHNlO1xuICB2YXIgbnVtU3RyID0gTWF0aC5hYnMobnVtYmVyKSArICcnLFxuICAgICAgZm9ybWF0dGVkVGV4dCA9ICcnLFxuICAgICAgcGFyc2VkTnVtYmVyO1xuXG4gIGlmIChpc0luZmluaXR5KSB7XG4gICAgZm9ybWF0dGVkVGV4dCA9ICdcXHUyMjFlJztcbiAgfSBlbHNlIHtcbiAgICBwYXJzZWROdW1iZXIgPSBwYXJzZShudW1TdHIpO1xuXG4gICAgcm91bmROdW1iZXIocGFyc2VkTnVtYmVyLCBmcmFjdGlvblNpemUsIHBhdHRlcm4ubWluRnJhYywgcGF0dGVybi5tYXhGcmFjKTtcblxuICAgIHZhciBkaWdpdHMgPSBwYXJzZWROdW1iZXIuZDtcbiAgICB2YXIgaW50ZWdlckxlbiA9IHBhcnNlZE51bWJlci5pO1xuICAgIHZhciBleHBvbmVudCA9IHBhcnNlZE51bWJlci5lO1xuICAgIHZhciBkZWNpbWFscyA9IFtdO1xuICAgIGlzWmVybyA9IGRpZ2l0cy5yZWR1Y2UoZnVuY3Rpb24oaXNaZXJvLCBkKSB7IHJldHVybiBpc1plcm8gJiYgIWQ7IH0sIHRydWUpO1xuXG4gICAgLy8gcGFkIHplcm9zIGZvciBzbWFsbCBudW1iZXJzXG4gICAgd2hpbGUgKGludGVnZXJMZW4gPCAwKSB7XG4gICAgICBkaWdpdHMudW5zaGlmdCgwKTtcbiAgICAgIGludGVnZXJMZW4rKztcbiAgICB9XG5cbiAgICAvLyBleHRyYWN0IGRlY2ltYWxzIGRpZ2l0c1xuICAgIGlmIChpbnRlZ2VyTGVuID4gMCkge1xuICAgICAgZGVjaW1hbHMgPSBkaWdpdHMuc3BsaWNlKGludGVnZXJMZW4sIGRpZ2l0cy5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWNpbWFscyA9IGRpZ2l0cztcbiAgICAgIGRpZ2l0cyA9IFswXTtcbiAgICB9XG5cbiAgICAvLyBmb3JtYXQgdGhlIGludGVnZXIgZGlnaXRzIHdpdGggZ3JvdXBpbmcgc2VwYXJhdG9yc1xuICAgIHZhciBncm91cHMgPSBbXTtcbiAgICBpZiAoZGlnaXRzLmxlbmd0aCA+PSBwYXR0ZXJuLmxnU2l6ZSkge1xuICAgICAgZ3JvdXBzLnVuc2hpZnQoZGlnaXRzLnNwbGljZSgtcGF0dGVybi5sZ1NpemUsIGRpZ2l0cy5sZW5ndGgpLmpvaW4oJycpKTtcbiAgICB9XG4gICAgd2hpbGUgKGRpZ2l0cy5sZW5ndGggPiBwYXR0ZXJuLmdTaXplKSB7XG4gICAgICBncm91cHMudW5zaGlmdChkaWdpdHMuc3BsaWNlKC1wYXR0ZXJuLmdTaXplLCBkaWdpdHMubGVuZ3RoKS5qb2luKCcnKSk7XG4gICAgfVxuICAgIGlmIChkaWdpdHMubGVuZ3RoKSB7XG4gICAgICBncm91cHMudW5zaGlmdChkaWdpdHMuam9pbignJykpO1xuICAgIH1cbiAgICBmb3JtYXR0ZWRUZXh0ID0gZ3JvdXBzLmpvaW4oZ3JvdXBTZXApO1xuXG4gICAgLy8gYXBwZW5kIHRoZSBkZWNpbWFsIGRpZ2l0c1xuICAgIGlmIChkZWNpbWFscy5sZW5ndGgpIHtcbiAgICAgIGZvcm1hdHRlZFRleHQgKz0gZGVjaW1hbFNlcCArIGRlY2ltYWxzLmpvaW4oJycpO1xuICAgIH1cblxuICAgIGlmIChleHBvbmVudCkge1xuICAgICAgZm9ybWF0dGVkVGV4dCArPSAnZSsnICsgZXhwb25lbnQ7XG4gICAgfVxuICB9XG4gIGlmIChudW1iZXIgPCAwICYmICFpc1plcm8pIHtcbiAgICByZXR1cm4gcGF0dGVybi5uZWdQcmUgKyBmb3JtYXR0ZWRUZXh0ICsgcGF0dGVybi5uZWdTdWY7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhdHRlcm4ucG9zUHJlICsgZm9ybWF0dGVkVGV4dCArIHBhdHRlcm4ucG9zU3VmO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhZE51bWJlcihudW0sIGRpZ2l0cywgdHJpbSwgbmVnV3JhcCkge1xuICB2YXIgbmVnID0gJyc7XG4gIGlmIChudW0gPCAwIHx8IChuZWdXcmFwICYmIG51bSA8PSAwKSkge1xuICAgIGlmIChuZWdXcmFwKSB7XG4gICAgICBudW0gPSAtbnVtICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgbnVtID0gLW51bTtcbiAgICAgIG5lZyA9ICctJztcbiAgICB9XG4gIH1cbiAgbnVtID0gJycgKyBudW07XG4gIHdoaWxlIChudW0ubGVuZ3RoIDwgZGlnaXRzKSBudW0gPSBaRVJPX0NIQVIgKyBudW07XG4gIGlmICh0cmltKSB7XG4gICAgbnVtID0gbnVtLnN1YnN0cihudW0ubGVuZ3RoIC0gZGlnaXRzKTtcbiAgfVxuICByZXR1cm4gbmVnICsgbnVtO1xufVxuXG5cbmZ1bmN0aW9uIGRhdGVHZXR0ZXIobmFtZSwgc2l6ZSwgb2Zmc2V0LCB0cmltLCBuZWdXcmFwKSB7XG4gIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICByZXR1cm4gZnVuY3Rpb24oZGF0ZSkge1xuICAgIHZhciB2YWx1ZSA9IGRhdGVbJ2dldCcgKyBuYW1lXSgpO1xuICAgIGlmIChvZmZzZXQgPiAwIHx8IHZhbHVlID4gLW9mZnNldCkge1xuICAgICAgdmFsdWUgKz0gb2Zmc2V0O1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IDAgJiYgb2Zmc2V0ID09PSAtMTIpIHZhbHVlID0gMTI7XG4gICAgcmV0dXJuIHBhZE51bWJlcih2YWx1ZSwgc2l6ZSwgdHJpbSwgbmVnV3JhcCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRhdGVTdHJHZXR0ZXIobmFtZSwgc2hvcnRGb3JtLCBzdGFuZEFsb25lKSB7XG4gIHJldHVybiBmdW5jdGlvbihkYXRlLCBmb3JtYXRzKSB7XG4gICAgdmFyIHZhbHVlID0gZGF0ZVsnZ2V0JyArIG5hbWVdKCk7XG4gICAgdmFyIHByb3BQcmVmaXggPSAoc3RhbmRBbG9uZSA/ICdTVEFOREFMT05FJyA6ICcnKSArIChzaG9ydEZvcm0gPyAnU0hPUlQnIDogJycpO1xuICAgIHZhciBnZXQgPSB1cHBlcmNhc2UocHJvcFByZWZpeCArIG5hbWUpO1xuXG4gICAgcmV0dXJuIGZvcm1hdHNbZ2V0XVt2YWx1ZV07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRpbWVab25lR2V0dGVyKGRhdGUsIGZvcm1hdHMsIG9mZnNldCkge1xuICB2YXIgem9uZSA9IC0xICogb2Zmc2V0O1xuICB2YXIgcGFkZGVkWm9uZSA9ICh6b25lID49IDApID8gJysnIDogJyc7XG5cbiAgcGFkZGVkWm9uZSArPSBwYWROdW1iZXIoTWF0aFt6b25lID4gMCA/ICdmbG9vcicgOiAnY2VpbCddKHpvbmUgLyA2MCksIDIpICtcbiAgICAgICAgICAgICAgICBwYWROdW1iZXIoTWF0aC5hYnMoem9uZSAlIDYwKSwgMik7XG5cbiAgcmV0dXJuIHBhZGRlZFpvbmU7XG59XG5cbmZ1bmN0aW9uIGdldEZpcnN0VGh1cnNkYXlPZlllYXIoeWVhcikge1xuICAgIC8vIDAgPSBpbmRleCBvZiBKYW51YXJ5XG4gICAgdmFyIGRheU9mV2Vla09uRmlyc3QgPSAobmV3IERhdGUoeWVhciwgMCwgMSkpLmdldERheSgpO1xuICAgIC8vIDQgPSBpbmRleCBvZiBUaHVyc2RheSAoKzEgdG8gYWNjb3VudCBmb3IgMXN0ID0gNSlcbiAgICAvLyAxMSA9IGluZGV4IG9mICpuZXh0KiBUaHVyc2RheSAoKzEgYWNjb3VudCBmb3IgMXN0ID0gMTIpXG4gICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsICgoZGF5T2ZXZWVrT25GaXJzdCA8PSA0KSA/IDUgOiAxMikgLSBkYXlPZldlZWtPbkZpcnN0KTtcbn1cblxuZnVuY3Rpb24gZ2V0VGh1cnNkYXlUaGlzV2VlayhkYXRldGltZSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShkYXRldGltZS5nZXRGdWxsWWVhcigpLCBkYXRldGltZS5nZXRNb250aCgpLFxuICAgICAgLy8gNCA9IGluZGV4IG9mIFRodXJzZGF5XG4gICAgICBkYXRldGltZS5nZXREYXRlKCkgKyAoNCAtIGRhdGV0aW1lLmdldERheSgpKSk7XG59XG5cbmZ1bmN0aW9uIHdlZWtHZXR0ZXIoc2l6ZSkge1xuICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgIHZhciBmaXJzdFRodXJzID0gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkpLFxuICAgICAgICAgdGhpc1RodXJzID0gZ2V0VGh1cnNkYXlUaGlzV2VlayhkYXRlKTtcblxuICAgICAgdmFyIGRpZmYgPSArdGhpc1RodXJzIC0gK2ZpcnN0VGh1cnMsXG4gICAgICAgICByZXN1bHQgPSAxICsgTWF0aC5yb3VuZChkaWZmIC8gNi4wNDhlOCk7IC8vIDYuMDQ4ZTggbXMgcGVyIHdlZWtcblxuICAgICAgcmV0dXJuIHBhZE51bWJlcihyZXN1bHQsIHNpemUpO1xuICAgfTtcbn1cblxuZnVuY3Rpb24gYW1wbUdldHRlcihkYXRlLCBmb3JtYXRzKSB7XG4gIHJldHVybiBkYXRlLmdldEhvdXJzKCkgPCAxMiA/IGZvcm1hdHMuQU1QTVNbMF0gOiBmb3JtYXRzLkFNUE1TWzFdO1xufVxuXG5mdW5jdGlvbiBlcmFHZXR0ZXIoZGF0ZSwgZm9ybWF0cykge1xuICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpIDw9IDAgPyBmb3JtYXRzLkVSQVNbMF0gOiBmb3JtYXRzLkVSQVNbMV07XG59XG5cbmZ1bmN0aW9uIGxvbmdFcmFHZXR0ZXIoZGF0ZSwgZm9ybWF0cykge1xuICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpIDw9IDAgPyBmb3JtYXRzLkVSQU5BTUVTWzBdIDogZm9ybWF0cy5FUkFOQU1FU1sxXTtcbn1cblxudmFyIERBVEVfRk9STUFUUyA9IHtcbiAgeXl5eTogZGF0ZUdldHRlcignRnVsbFllYXInLCA0LCAwLCBmYWxzZSwgdHJ1ZSksXG4gICAgeXk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgMiwgMCwgdHJ1ZSwgdHJ1ZSksXG4gICAgIHk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgMSwgMCwgZmFsc2UsIHRydWUpLFxuICBNTU1NOiBkYXRlU3RyR2V0dGVyKCdNb250aCcpLFxuICAgTU1NOiBkYXRlU3RyR2V0dGVyKCdNb250aCcsIHRydWUpLFxuICAgIE1NOiBkYXRlR2V0dGVyKCdNb250aCcsIDIsIDEpLFxuICAgICBNOiBkYXRlR2V0dGVyKCdNb250aCcsIDEsIDEpLFxuICBMTExMOiBkYXRlU3RyR2V0dGVyKCdNb250aCcsIGZhbHNlLCB0cnVlKSxcbiAgICBkZDogZGF0ZUdldHRlcignRGF0ZScsIDIpLFxuICAgICBkOiBkYXRlR2V0dGVyKCdEYXRlJywgMSksXG4gICAgSEg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMiksXG4gICAgIEg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMSksXG4gICAgaGg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMiwgLTEyKSxcbiAgICAgaDogZGF0ZUdldHRlcignSG91cnMnLCAxLCAtMTIpLFxuICAgIG1tOiBkYXRlR2V0dGVyKCdNaW51dGVzJywgMiksXG4gICAgIG06IGRhdGVHZXR0ZXIoJ01pbnV0ZXMnLCAxKSxcbiAgICBzczogZGF0ZUdldHRlcignU2Vjb25kcycsIDIpLFxuICAgICBzOiBkYXRlR2V0dGVyKCdTZWNvbmRzJywgMSksXG4gICAgIC8vIHdoaWxlIElTTyA4NjAxIHJlcXVpcmVzIGZyYWN0aW9ucyB0byBiZSBwcmVmaXhlZCB3aXRoIGAuYCBvciBgLGBcbiAgICAgLy8gd2UgY2FuIGJlIGp1c3Qgc2FmZWx5IHJlbHkgb24gdXNpbmcgYHNzc2Agc2luY2Ugd2UgY3VycmVudGx5IGRvbid0IHN1cHBvcnQgc2luZ2xlIG9yIHR3byBkaWdpdCBmcmFjdGlvbnNcbiAgIHNzczogZGF0ZUdldHRlcignTWlsbGlzZWNvbmRzJywgMyksXG4gIEVFRUU6IGRhdGVTdHJHZXR0ZXIoJ0RheScpLFxuICAgRUVFOiBkYXRlU3RyR2V0dGVyKCdEYXknLCB0cnVlKSxcbiAgICAgYTogYW1wbUdldHRlcixcbiAgICAgWjogdGltZVpvbmVHZXR0ZXIsXG4gICAgd3c6IHdlZWtHZXR0ZXIoMiksXG4gICAgIHc6IHdlZWtHZXR0ZXIoMSksXG4gICAgIEc6IGVyYUdldHRlcixcbiAgICAgR0c6IGVyYUdldHRlcixcbiAgICAgR0dHOiBlcmFHZXR0ZXIsXG4gICAgIEdHR0c6IGxvbmdFcmFHZXR0ZXJcbn07XG5cbnZhciBEQVRFX0ZPUk1BVFNfU1BMSVQgPSAvKCg/OlteeU1MZEhobXNhWkV3RyddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfEwrfGQrfEgrfGgrfG0rfHMrfGF8WnxHK3x3KykpKFtcXHNcXFNdKikvLFxuICAgIE5VTUJFUl9TVFJJTkcgPSAvXi0/XFxkKyQvO1xuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGRhdGVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAgIEZvcm1hdHMgYGRhdGVgIHRvIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSByZXF1ZXN0ZWQgYGZvcm1hdGAuXG4gKlxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZWxlbWVudHM6XG4gKlxuICogICAqIGAneXl5eSdgOiA0IGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIgKGUuZy4gQUQgMSA9PiAwMDAxLCBBRCAyMDEwID0+IDIwMTApXG4gKiAgICogYCd5eSdgOiAyIGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIsIHBhZGRlZCAoMDAtOTkpLiAoZS5nLiBBRCAyMDAxID0+IDAxLCBBRCAyMDEwID0+IDEwKVxuICogICAqIGAneSdgOiAxIGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIsIGUuZy4gKEFEIDEgPT4gMSwgQUQgMTk5ID0+IDE5OSlcbiAqICAgKiBgJ01NTU0nYDogTW9udGggaW4geWVhciAoSmFudWFyeS1EZWNlbWJlcilcbiAqICAgKiBgJ01NTSdgOiBNb250aCBpbiB5ZWFyIChKYW4tRGVjKVxuICogICAqIGAnTU0nYDogTW9udGggaW4geWVhciwgcGFkZGVkICgwMS0xMilcbiAqICAgKiBgJ00nYDogTW9udGggaW4geWVhciAoMS0xMilcbiAqICAgKiBgJ0xMTEwnYDogU3RhbmQtYWxvbmUgbW9udGggaW4geWVhciAoSmFudWFyeS1EZWNlbWJlcilcbiAqICAgKiBgJ2RkJ2A6IERheSBpbiBtb250aCwgcGFkZGVkICgwMS0zMSlcbiAqICAgKiBgJ2QnYDogRGF5IGluIG1vbnRoICgxLTMxKVxuICogICAqIGAnRUVFRSdgOiBEYXkgaW4gV2VlaywoU3VuZGF5LVNhdHVyZGF5KVxuICogICAqIGAnRUVFJ2A6IERheSBpbiBXZWVrLCAoU3VuLVNhdClcbiAqICAgKiBgJ0hIJ2A6IEhvdXIgaW4gZGF5LCBwYWRkZWQgKDAwLTIzKVxuICogICAqIGAnSCdgOiBIb3VyIGluIGRheSAoMC0yMylcbiAqICAgKiBgJ2hoJ2A6IEhvdXIgaW4gQU0vUE0sIHBhZGRlZCAoMDEtMTIpXG4gKiAgICogYCdoJ2A6IEhvdXIgaW4gQU0vUE0sICgxLTEyKVxuICogICAqIGAnbW0nYDogTWludXRlIGluIGhvdXIsIHBhZGRlZCAoMDAtNTkpXG4gKiAgICogYCdtJ2A6IE1pbnV0ZSBpbiBob3VyICgwLTU5KVxuICogICAqIGAnc3MnYDogU2Vjb25kIGluIG1pbnV0ZSwgcGFkZGVkICgwMC01OSlcbiAqICAgKiBgJ3MnYDogU2Vjb25kIGluIG1pbnV0ZSAoMC01OSlcbiAqICAgKiBgJ3NzcydgOiBNaWxsaXNlY29uZCBpbiBzZWNvbmQsIHBhZGRlZCAoMDAwLTk5OSlcbiAqICAgKiBgJ2EnYDogQU0vUE0gbWFya2VyXG4gKiAgICogYCdaJ2A6IDQgZGlnaXQgKCtzaWduKSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGltZXpvbmUgb2Zmc2V0ICgtMTIwMC0rMTIwMClcbiAqICAgKiBgJ3d3J2A6IFdlZWsgb2YgeWVhciwgcGFkZGVkICgwMC01MykuIFdlZWsgMDEgaXMgdGhlIHdlZWsgd2l0aCB0aGUgZmlyc3QgVGh1cnNkYXkgb2YgdGhlIHllYXJcbiAqICAgKiBgJ3cnYDogV2VlayBvZiB5ZWFyICgwLTUzKS4gV2VlayAxIGlzIHRoZSB3ZWVrIHdpdGggdGhlIGZpcnN0IFRodXJzZGF5IG9mIHRoZSB5ZWFyXG4gKiAgICogYCdHJ2AsIGAnR0cnYCwgYCdHR0cnYDogVGhlIGFiYnJldmlhdGVkIGZvcm0gb2YgdGhlIGVyYSBzdHJpbmcgKGUuZy4gJ0FEJylcbiAqICAgKiBgJ0dHR0cnYDogVGhlIGxvbmcgZm9ybSBvZiB0aGUgZXJhIHN0cmluZyAoZS5nLiAnQW5ubyBEb21pbmknKVxuICpcbiAqICAgYGZvcm1hdGAgc3RyaW5nIGNhbiBhbHNvIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHByZWRlZmluZWRcbiAqICAge0BsaW5rIGd1aWRlL2kxOG4gbG9jYWxpemFibGUgZm9ybWF0c306XG4gKlxuICogICAqIGAnbWVkaXVtJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU0gZCwgeSBoOm1tOnNzIGEnYCBmb3IgZW5fVVMgbG9jYWxlXG4gKiAgICAgKGUuZy4gU2VwIDMsIDIwMTAgMTI6MDU6MDggUE0pXG4gKiAgICogYCdzaG9ydCdgOiBlcXVpdmFsZW50IHRvIGAnTS9kL3l5IGg6bW0gYSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIDkvMy8xMCAxMjowNSBQTSlcbiAqICAgKiBgJ2Z1bGxEYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdFRUVFLCBNTU1NIGQsIHknYCBmb3IgZW5fVVMgIGxvY2FsZVxuICogICAgIChlLmcuIEZyaWRheSwgU2VwdGVtYmVyIDMsIDIwMTApXG4gKiAgICogYCdsb25nRGF0ZSdgOiBlcXVpdmFsZW50IHRvIGAnTU1NTSBkLCB5J2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gU2VwdGVtYmVyIDMsIDIwMTApXG4gKiAgICogYCdtZWRpdW1EYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIFNlcCAzLCAyMDEwKVxuICogICAqIGAnc2hvcnREYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNL2QveXknYCBmb3IgZW5fVVMgbG9jYWxlIChlLmcuIDkvMy8xMClcbiAqICAgKiBgJ21lZGl1bVRpbWUnYDogZXF1aXZhbGVudCB0byBgJ2g6bW06c3MgYSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gMTI6MDU6MDggUE0pXG4gKiAgICogYCdzaG9ydFRpbWUnYDogZXF1aXZhbGVudCB0byBgJ2g6bW0gYSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gMTI6MDUgUE0pXG4gKlxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGNvbnRhaW4gbGl0ZXJhbCB2YWx1ZXMuIFRoZXNlIG5lZWQgdG8gYmUgZXNjYXBlZCBieSBzdXJyb3VuZGluZyB3aXRoIHNpbmdsZSBxdW90ZXMgKGUuZy5cbiAqICAgYFwiaCAnaW4gdGhlIG1vcm5pbmcnXCJgKS4gSW4gb3JkZXIgdG8gb3V0cHV0IGEgc2luZ2xlIHF1b3RlLCBlc2NhcGUgaXQgLSBpLmUuLCB0d28gc2luZ2xlIHF1b3RlcyBpbiBhIHNlcXVlbmNlXG4gKiAgIChlLmcuIGBcImggJ28nJ2Nsb2NrJ1wiYCkuXG4gKlxuICogICBBbnkgb3RoZXIgY2hhcmFjdGVycyBpbiB0aGUgYGZvcm1hdGAgc3RyaW5nIHdpbGwgYmUgb3V0cHV0IGFzLWlzLlxuICpcbiAqIEBwYXJhbSB7KERhdGV8bnVtYmVyfHN0cmluZyl9IGRhdGUgRGF0ZSB0byBmb3JtYXQgZWl0aGVyIGFzIERhdGUgb2JqZWN0LCBtaWxsaXNlY29uZHMgKHN0cmluZyBvclxuICogICAgbnVtYmVyKSBvciB2YXJpb3VzIElTTyA4NjAxIGRhdGV0aW1lIHN0cmluZyBmb3JtYXRzIChlLmcuIHl5eXktTU0tZGRUSEg6bW06c3Muc3NzWiBhbmQgaXRzXG4gKiAgICBzaG9ydGVyIHZlcnNpb25zIGxpa2UgeXl5eS1NTS1kZFRISDptbVosIHl5eXktTU0tZGQgb3IgeXl5eU1NZGRUSEhtbXNzWikuIElmIG5vIHRpbWV6b25lIGlzXG4gKiAgICBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpbnB1dCwgdGhlIHRpbWUgaXMgY29uc2lkZXJlZCB0byBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKiBAcGFyYW0ge3N0cmluZz19IGZvcm1hdCBGb3JtYXR0aW5nIHJ1bGVzIChzZWUgRGVzY3JpcHRpb24pLiBJZiBub3Qgc3BlY2lmaWVkLFxuICogICAgYG1lZGl1bURhdGVgIGlzIHVzZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHRpbWV6b25lIFRpbWV6b25lIHRvIGJlIHVzZWQgZm9yIGZvcm1hdHRpbmcuIEl0IHVuZGVyc3RhbmRzIFVUQy9HTVQgYW5kIHRoZVxuICogICAgY29udGluZW50YWwgVVMgdGltZSB6b25lIGFiYnJldmlhdGlvbnMsIGJ1dCBmb3IgZ2VuZXJhbCB1c2UsIHVzZSBhIHRpbWUgem9uZSBvZmZzZXQsIGZvclxuICogICAgZXhhbXBsZSwgYCcrMDQzMCdgICg0IGhvdXJzLCAzMCBtaW51dGVzIGVhc3Qgb2YgdGhlIEdyZWVud2ljaCBtZXJpZGlhbilcbiAqICAgIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3NlciB3aWxsIGJlIHVzZWQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgc3RyaW5nIG9yIHRoZSBpbnB1dCBpZiBpbnB1dCBpcyBub3QgcmVjb2duaXplZCBhcyBkYXRlL21pbGxpcy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cImZpbHRlci1kYXRlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSd9fTwvc3Bhbj46XG4gICAgICAgICAgIDxzcGFuPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSd9fTwvc3Bhbj48YnI+XG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWid9fTwvc3Bhbj46XG4gICAgICAgICAgPHNwYW4+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ319PC9zcGFuPjxicj5cbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ319PC9zcGFuPjpcbiAgICAgICAgICA8c3Bhbj57eycxMjg4MzIzNjIzMDA2JyB8IGRhdGU6J01NL2RkL3l5eXkgQCBoOm1tYSd9fTwvc3Bhbj48YnI+XG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6XCJNTS9kZC95eXl5ICdhdCcgaDptbWFcIn19PC9zcGFuPjpcbiAgICAgICAgICA8c3Bhbj57eycxMjg4MzIzNjIzMDA2JyB8IGRhdGU6XCJNTS9kZC95eXl5ICdhdCcgaDptbWFcIn19PC9zcGFuPjxicj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBmb3JtYXQgZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIjEyODgzMjM2MjMwMDYgfCBkYXRlOidtZWRpdW0nXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9NYXRjaCgvT2N0IDJcXGQsIDIwMTAgXFxkezEsMn06XFxkezJ9OlxcZHsyfSAoQU18UE0pLyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiMTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWidcIikpLmdldFRleHQoKSkuXG4gICAgICAgICAgICB0b01hdGNoKC8yMDEwLTEwLTJcXGQgXFxkezJ9OlxcZHsyfTpcXGR7Mn0gKC18XFwrKT9cXGR7NH0vKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCInMTI4ODMyMzYyMzAwNicgfCBkYXRlOidNTS9kZC95eXl5IEAgaDptbWEnXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9NYXRjaCgvMTBcXC8yXFxkXFwvMjAxMCBAIFxcZHsxLDJ9OlxcZHsyfShBTXxQTSkvKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCInMTI4ODMyMzYyMzAwNicgfCBkYXRlOlxcXCJNTS9kZC95eXl5ICdhdCcgaDptbWFcXFwiXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9NYXRjaCgvMTBcXC8yXFxkXFwvMjAxMCBhdCBcXGR7MSwyfTpcXGR7Mn0oQU18UE0pLyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckbG9jYWxlJ107XG5mdW5jdGlvbiBkYXRlRmlsdGVyKCRsb2NhbGUpIHtcblxuXG4gIHZhciBSX0lTTzg2MDFfU1RSID0gL14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87XG4gICAgICAgICAgICAgICAgICAgICAvLyAxICAgICAgICAyICAgICAgIDMgICAgICAgICA0ICAgICAgICAgIDUgICAgICAgICAgNiAgICAgICAgICA3ICAgICAgICAgIDggIDkgICAgIDEwICAgICAgMTFcbiAgZnVuY3Rpb24ganNvblN0cmluZ1RvRGF0ZShzdHJpbmcpIHtcbiAgICB2YXIgbWF0Y2g7XG4gICAgaWYgKChtYXRjaCA9IHN0cmluZy5tYXRjaChSX0lTTzg2MDFfU1RSKSkpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCksXG4gICAgICAgICAgdHpIb3VyID0gMCxcbiAgICAgICAgICB0ek1pbiAgPSAwLFxuICAgICAgICAgIGRhdGVTZXR0ZXIgPSBtYXRjaFs4XSA/IGRhdGUuc2V0VVRDRnVsbFllYXIgOiBkYXRlLnNldEZ1bGxZZWFyLFxuICAgICAgICAgIHRpbWVTZXR0ZXIgPSBtYXRjaFs4XSA/IGRhdGUuc2V0VVRDSG91cnMgOiBkYXRlLnNldEhvdXJzO1xuXG4gICAgICBpZiAobWF0Y2hbOV0pIHtcbiAgICAgICAgdHpIb3VyID0gdG9JbnQobWF0Y2hbOV0gKyBtYXRjaFsxMF0pO1xuICAgICAgICB0ek1pbiA9IHRvSW50KG1hdGNoWzldICsgbWF0Y2hbMTFdKTtcbiAgICAgIH1cbiAgICAgIGRhdGVTZXR0ZXIuY2FsbChkYXRlLCB0b0ludChtYXRjaFsxXSksIHRvSW50KG1hdGNoWzJdKSAtIDEsIHRvSW50KG1hdGNoWzNdKSk7XG4gICAgICB2YXIgaCA9IHRvSW50KG1hdGNoWzRdIHx8IDApIC0gdHpIb3VyO1xuICAgICAgdmFyIG0gPSB0b0ludChtYXRjaFs1XSB8fCAwKSAtIHR6TWluO1xuICAgICAgdmFyIHMgPSB0b0ludChtYXRjaFs2XSB8fCAwKTtcbiAgICAgIHZhciBtcyA9IE1hdGgucm91bmQocGFyc2VGbG9hdCgnMC4nICsgKG1hdGNoWzddIHx8IDApKSAqIDEwMDApO1xuICAgICAgdGltZVNldHRlci5jYWxsKGRhdGUsIGgsIG0sIHMsIG1zKTtcbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nO1xuICB9XG5cblxuICByZXR1cm4gZnVuY3Rpb24oZGF0ZSwgZm9ybWF0LCB0aW1lem9uZSkge1xuICAgIHZhciB0ZXh0ID0gJycsXG4gICAgICAgIHBhcnRzID0gW10sXG4gICAgICAgIGZuLCBtYXRjaDtcblxuICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnbWVkaXVtRGF0ZSc7XG4gICAgZm9ybWF0ID0gJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTW2Zvcm1hdF0gfHwgZm9ybWF0O1xuICAgIGlmIChpc1N0cmluZyhkYXRlKSkge1xuICAgICAgZGF0ZSA9IE5VTUJFUl9TVFJJTkcudGVzdChkYXRlKSA/IHRvSW50KGRhdGUpIDoganNvblN0cmluZ1RvRGF0ZShkYXRlKTtcbiAgICB9XG5cbiAgICBpZiAoaXNOdW1iZXIoZGF0ZSkpIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzRGF0ZShkYXRlKSB8fCAhaXNGaW5pdGUoZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG5cbiAgICB3aGlsZSAoZm9ybWF0KSB7XG4gICAgICBtYXRjaCA9IERBVEVfRk9STUFUU19TUExJVC5leGVjKGZvcm1hdCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcGFydHMgPSBjb25jYXQocGFydHMsIG1hdGNoLCAxKTtcbiAgICAgICAgZm9ybWF0ID0gcGFydHMucG9wKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0cy5wdXNoKGZvcm1hdCk7XG4gICAgICAgIGZvcm1hdCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGRhdGVUaW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgICBpZiAodGltZXpvbmUpIHtcbiAgICAgIGRhdGVUaW1lem9uZU9mZnNldCA9IHRpbWV6b25lVG9PZmZzZXQodGltZXpvbmUsIGRhdGVUaW1lem9uZU9mZnNldCk7XG4gICAgICBkYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChkYXRlLCB0aW1lem9uZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZvckVhY2gocGFydHMsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBmbiA9IERBVEVfRk9STUFUU1t2YWx1ZV07XG4gICAgICB0ZXh0ICs9IGZuID8gZm4oZGF0ZSwgJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLCBkYXRlVGltZXpvbmVPZmZzZXQpXG4gICAgICAgICAgICAgICAgIDogdmFsdWUgPT09ICdcXCdcXCcnID8gJ1xcJycgOiB2YWx1ZS5yZXBsYWNlKC8oXid8JyQpL2csICcnKS5yZXBsYWNlKC8nJy9nLCAnXFwnJyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGV4dDtcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGpzb25cbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAgIEFsbG93cyB5b3UgdG8gY29udmVydCBhIEphdmFTY3JpcHQgb2JqZWN0IGludG8gSlNPTiBzdHJpbmcuXG4gKlxuICogICBUaGlzIGZpbHRlciBpcyBtb3N0bHkgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuIFdoZW4gdXNpbmcgdGhlIGRvdWJsZSBjdXJseSB7e3ZhbHVlfX0gbm90YXRpb25cbiAqICAgdGhlIGJpbmRpbmcgaXMgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgdG8gSlNPTi5cbiAqXG4gKiBAcGFyYW0geyp9IG9iamVjdCBBbnkgSmF2YVNjcmlwdCBvYmplY3QgKGluY2x1ZGluZyBhcnJheXMgYW5kIHByaW1pdGl2ZSB0eXBlcykgdG8gZmlsdGVyLlxuICogQHBhcmFtIHtudW1iZXI9fSBzcGFjaW5nIFRoZSBudW1iZXIgb2Ygc3BhY2VzIHRvIHVzZSBwZXIgaW5kZW50YXRpb24sIGRlZmF1bHRzIHRvIDIuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBKU09OIHN0cmluZy5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJmaWx0ZXItanNvblwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxwcmUgaWQ9XCJkZWZhdWx0LXNwYWNpbmdcIj57eyB7J25hbWUnOid2YWx1ZSd9IHwganNvbiB9fTwvcHJlPlxuICAgICAgIDxwcmUgaWQ9XCJjdXN0b20tc3BhY2luZ1wiPnt7IHsnbmFtZSc6J3ZhbHVlJ30gfCBqc29uOjQgfX08L3ByZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBqc29uaWZ5IGZpbHRlcmVkIG9iamVjdHMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdkZWZhdWx0LXNwYWNpbmcnKSkuZ2V0VGV4dCgpKS50b01hdGNoKC9cXHtcXG4gezJ9XCJuYW1lXCI6ID9cInZhbHVlXCJcXG59Lyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VzdG9tLXNwYWNpbmcnKSkuZ2V0VGV4dCgpKS50b01hdGNoKC9cXHtcXG4gezR9XCJuYW1lXCI6ID9cInZhbHVlXCJcXG59Lyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKi9cbmZ1bmN0aW9uIGpzb25GaWx0ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QsIHNwYWNpbmcpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQoc3BhY2luZykpIHtcbiAgICAgICAgc3BhY2luZyA9IDI7XG4gICAgfVxuICAgIHJldHVybiB0b0pzb24ob2JqZWN0LCBzcGFjaW5nKTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGxvd2VyY2FzZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydHMgc3RyaW5nIHRvIGxvd2VyY2FzZS5cbiAqXG4gKiBTZWUgdGhlIHtAbGluayBuZy51cHBlcmNhc2UgdXBwZXJjYXNlIGZpbHRlciBkb2N1bWVudGF0aW9ufSBmb3IgYSBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIGV4YW1wbGUuXG4gKlxuICogQHNlZSBhbmd1bGFyLmxvd2VyY2FzZVxuICovXG52YXIgbG93ZXJjYXNlRmlsdGVyID0gdmFsdWVGbihsb3dlcmNhc2UpO1xuXG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgdXBwZXJjYXNlXG4gKiBAa2luZCBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0cyBzdHJpbmcgdG8gdXBwZXJjYXNlLlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cInVwcGVyY2FzZUZpbHRlckV4YW1wbGVcIiBuYW1lPVwiZmlsdGVyLXVwcGVyY2FzZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgndXBwZXJjYXNlRmlsdGVyRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS50aXRsZSA9ICdUaGlzIGlzIGEgdGl0bGUnO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDwhLS0gVGhpcyB0aXRsZSBzaG91bGQgYmUgZm9ybWF0dGVkIG5vcm1hbGx5IC0tPlxuICAgICAgICAgPGgxPnt7dGl0bGV9fTwvaDE+XG4gICAgICAgICA8IS0tIFRoaXMgdGl0bGUgc2hvdWxkIGJlIGNhcGl0YWxpemVkIC0tPlxuICAgICAgICAgPGgxPnt7dGl0bGUgfCB1cHBlcmNhc2V9fTwvaDE+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIHVwcGVyY2FzZUZpbHRlciA9IHZhbHVlRm4odXBwZXJjYXNlKTtcblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBsaW1pdFRvXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBhcnJheSBvciBzdHJpbmcgY29udGFpbmluZyBvbmx5IGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cy4gVGhlIGVsZW1lbnRzIGFyZVxuICogdGFrZW4gZnJvbSBlaXRoZXIgdGhlIGJlZ2lubmluZyBvciB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXksIHN0cmluZyBvciBudW1iZXIsIGFzIHNwZWNpZmllZCBieVxuICogdGhlIHZhbHVlIGFuZCBzaWduIChwb3NpdGl2ZSBvciBuZWdhdGl2ZSkgb2YgYGxpbWl0YC4gT3RoZXIgYXJyYXktbGlrZSBvYmplY3RzIGFyZSBhbHNvIHN1cHBvcnRlZFxuICogKGUuZy4gYXJyYXkgc3ViY2xhc3NlcywgTm9kZUxpc3RzLCBqcUxpdGUvalF1ZXJ5IGNvbGxlY3Rpb25zIGV0YykuIElmIGEgbnVtYmVyIGlzIHVzZWQgYXMgaW5wdXQsXG4gKiBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtBcnJheXxBcnJheUxpa2V8c3RyaW5nfG51bWJlcn0gaW5wdXQgLSBBcnJheS9hcnJheS1saWtlLCBzdHJpbmcgb3IgbnVtYmVyIHRvIGJlIGxpbWl0ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGxpbWl0IC0gVGhlIGxlbmd0aCBvZiB0aGUgcmV0dXJuZWQgYXJyYXkgb3Igc3RyaW5nLiBJZiB0aGUgYGxpbWl0YCBudW1iZXJcbiAqICAgICBpcyBwb3NpdGl2ZSwgYGxpbWl0YCBudW1iZXIgb2YgaXRlbXMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzb3VyY2UgYXJyYXkvc3RyaW5nIGFyZSBjb3BpZWQuXG4gKiAgICAgSWYgdGhlIG51bWJlciBpcyBuZWdhdGl2ZSwgYGxpbWl0YCBudW1iZXIgIG9mIGl0ZW1zIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIGFycmF5L3N0cmluZ1xuICogICAgIGFyZSBjb3BpZWQuIFRoZSBgbGltaXRgIHdpbGwgYmUgdHJpbW1lZCBpZiBpdCBleGNlZWRzIGBhcnJheS5sZW5ndGhgLiBJZiBgbGltaXRgIGlzIHVuZGVmaW5lZCxcbiAqICAgICB0aGUgaW5wdXQgd2lsbCBiZSByZXR1cm5lZCB1bmNoYW5nZWQuXG4gKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IGJlZ2luIC0gSW5kZXggYXQgd2hpY2ggdG8gYmVnaW4gbGltaXRhdGlvbi4gQXMgYSBuZWdhdGl2ZSBpbmRleCxcbiAqICAgICBgYmVnaW5gIGluZGljYXRlcyBhbiBvZmZzZXQgZnJvbSB0aGUgZW5kIG9mIGBpbnB1dGAuIERlZmF1bHRzIHRvIGAwYC5cbiAqIEByZXR1cm5zIHtBcnJheXxzdHJpbmd9IEEgbmV3IHN1Yi1hcnJheSBvciBzdWJzdHJpbmcgb2YgbGVuZ3RoIGBsaW1pdGAgb3IgbGVzcyBpZiB0aGUgaW5wdXQgaGFkXG4gKiAgICAgbGVzcyB0aGFuIGBsaW1pdGAgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImxpbWl0VG9FeGFtcGxlXCIgbmFtZT1cImxpbWl0LXRvLWZpbHRlclwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbGltaXRUb0V4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUubnVtYmVycyA9IFsxLDIsMyw0LDUsNiw3LDgsOV07XG4gICAgICAgICAgICAgJHNjb3BlLmxldHRlcnMgPSBcImFiY2RlZmdoaVwiO1xuICAgICAgICAgICAgICRzY29wZS5sb25nTnVtYmVyID0gMjM0NTQzMjM0MjtcbiAgICAgICAgICAgICAkc2NvcGUubnVtTGltaXQgPSAzO1xuICAgICAgICAgICAgICRzY29wZS5sZXR0ZXJMaW1pdCA9IDM7XG4gICAgICAgICAgICAgJHNjb3BlLmxvbmdOdW1iZXJMaW1pdCA9IDM7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgTGltaXQge3tudW1iZXJzfX0gdG86XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbmctbW9kZWw9XCJudW1MaW1pdFwiPlxuICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgIDxwPk91dHB1dCBudW1iZXJzOiB7eyBudW1iZXJzIHwgbGltaXRUbzpudW1MaW1pdCB9fTwvcD5cbiAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIExpbWl0IHt7bGV0dGVyc319IHRvOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBzdGVwPVwiMVwiIG5nLW1vZGVsPVwibGV0dGVyTGltaXRcIj5cbiAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICA8cD5PdXRwdXQgbGV0dGVyczoge3sgbGV0dGVycyB8IGxpbWl0VG86bGV0dGVyTGltaXQgfX08L3A+XG4gICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBMaW1pdCB7e2xvbmdOdW1iZXJ9fSB0bzpcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgc3RlcD1cIjFcIiBuZy1tb2RlbD1cImxvbmdOdW1iZXJMaW1pdFwiPlxuICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgIDxwPk91dHB1dCBsb25nIG51bWJlcjoge3sgbG9uZ051bWJlciB8IGxpbWl0VG86bG9uZ051bWJlckxpbWl0IH19PC9wPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgbnVtTGltaXRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ251bUxpbWl0JykpO1xuICAgICAgIHZhciBsZXR0ZXJMaW1pdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbGV0dGVyTGltaXQnKSk7XG4gICAgICAgdmFyIGxvbmdOdW1iZXJMaW1pdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbG9uZ051bWJlckxpbWl0JykpO1xuICAgICAgIHZhciBsaW1pdGVkTnVtYmVycyA9IGVsZW1lbnQoYnkuYmluZGluZygnbnVtYmVycyB8IGxpbWl0VG86bnVtTGltaXQnKSk7XG4gICAgICAgdmFyIGxpbWl0ZWRMZXR0ZXJzID0gZWxlbWVudChieS5iaW5kaW5nKCdsZXR0ZXJzIHwgbGltaXRUbzpsZXR0ZXJMaW1pdCcpKTtcbiAgICAgICB2YXIgbGltaXRlZExvbmdOdW1iZXIgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xvbmdOdW1iZXIgfCBsaW1pdFRvOmxvbmdOdW1iZXJMaW1pdCcpKTtcblxuICAgICAgIGl0KCdzaG91bGQgbGltaXQgdGhlIG51bWJlciBhcnJheSB0byBmaXJzdCB0aHJlZSBpdGVtcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KG51bUxpbWl0SW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCczJyk7XG4gICAgICAgICBleHBlY3QobGV0dGVyTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcbiAgICAgICAgIGV4cGVjdChsb25nTnVtYmVyTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTnVtYmVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBudW1iZXJzOiBbMSwyLDNdJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogYWJjJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDIzNCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgLy8gVGhlcmUgaXMgYSBidWcgaW4gc2FmYXJpIGFuZCBwcm90cmFjdG9yIHRoYXQgZG9lc24ndCBsaWtlIHRoZSBtaW51cyBrZXlcbiAgICAgICAvLyBpdCgnc2hvdWxkIHVwZGF0ZSB0aGUgb3V0cHV0IHdoZW4gLTMgaXMgZW50ZXJlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgIC8vICAgbnVtTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgIC8vICAgbnVtTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcbiAgICAgICAvLyAgIGxldHRlckxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAvLyAgIGxldHRlckxpbWl0SW5wdXQuc2VuZEtleXMoJy0zJyk7XG4gICAgICAgLy8gICBsb25nTnVtYmVyTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgIC8vICAgbG9uZ051bWJlckxpbWl0SW5wdXQuc2VuZEtleXMoJy0zJyk7XG4gICAgICAgLy8gICBleHBlY3QobGltaXRlZE51bWJlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbnVtYmVyczogWzcsOCw5XScpO1xuICAgICAgIC8vICAgZXhwZWN0KGxpbWl0ZWRMZXR0ZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxldHRlcnM6IGdoaScpO1xuICAgICAgIC8vICAgZXhwZWN0KGxpbWl0ZWRMb25nTnVtYmVyLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxvbmcgbnVtYmVyOiAzNDInKTtcbiAgICAgICAvLyB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSBzaXplIG9mIGlucHV0IGFycmF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBudW1MaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgICBudW1MaW1pdElucHV0LnNlbmRLZXlzKCcxMDAnKTtcbiAgICAgICAgIGxldHRlckxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgIGxldHRlckxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xuICAgICAgICAgbG9uZ051bWJlckxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgIGxvbmdOdW1iZXJMaW1pdElucHV0LnNlbmRLZXlzKCcxMDAnKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTnVtYmVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBudW1iZXJzOiBbMSwyLDMsNCw1LDYsNyw4LDldJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogYWJjZGVmZ2hpJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDIzNDU0MzIzNDInKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuKi9cbmZ1bmN0aW9uIGxpbWl0VG9GaWx0ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbihpbnB1dCwgbGltaXQsIGJlZ2luKSB7XG4gICAgaWYgKE1hdGguYWJzKE51bWJlcihsaW1pdCkpID09PSBJbmZpbml0eSkge1xuICAgICAgbGltaXQgPSBOdW1iZXIobGltaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaW1pdCA9IHRvSW50KGxpbWl0KTtcbiAgICB9XG4gICAgaWYgKGlzTnVtYmVyTmFOKGxpbWl0KSkgcmV0dXJuIGlucHV0O1xuXG4gICAgaWYgKGlzTnVtYmVyKGlucHV0KSkgaW5wdXQgPSBpbnB1dC50b1N0cmluZygpO1xuICAgIGlmICghaXNBcnJheUxpa2UoaW5wdXQpKSByZXR1cm4gaW5wdXQ7XG5cbiAgICBiZWdpbiA9ICghYmVnaW4gfHwgaXNOYU4oYmVnaW4pKSA/IDAgOiB0b0ludChiZWdpbik7XG4gICAgYmVnaW4gPSAoYmVnaW4gPCAwKSA/IE1hdGgubWF4KDAsIGlucHV0Lmxlbmd0aCArIGJlZ2luKSA6IGJlZ2luO1xuXG4gICAgaWYgKGxpbWl0ID49IDApIHtcbiAgICAgIHJldHVybiBzbGljZUZuKGlucHV0LCBiZWdpbiwgYmVnaW4gKyBsaW1pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChiZWdpbiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gc2xpY2VGbihpbnB1dCwgbGltaXQsIGlucHV0Lmxlbmd0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2xpY2VGbihpbnB1dCwgTWF0aC5tYXgoMCwgYmVnaW4gKyBsaW1pdCksIGJlZ2luKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNsaWNlRm4oaW5wdXQsIGJlZ2luLCBlbmQpIHtcbiAgaWYgKGlzU3RyaW5nKGlucHV0KSkgcmV0dXJuIGlucHV0LnNsaWNlKGJlZ2luLCBlbmQpO1xuXG4gIHJldHVybiBzbGljZS5jYWxsKGlucHV0LCBiZWdpbiwgZW5kKTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBvcmRlckJ5XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJucyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBpdGVtcyBmcm9tIHRoZSBzcGVjaWZpZWQgYGNvbGxlY3Rpb25gLCBvcmRlcmVkIGJ5IGEgYGNvbXBhcmF0b3JgXG4gKiBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgdmFsdWVzIGNvbXB1dGVkIHVzaW5nIHRoZSBgZXhwcmVzc2lvbmAgcHJlZGljYXRlLlxuICpcbiAqIEZvciBleGFtcGxlLCBgW3tpZDogJ2Zvbyd9LCB7aWQ6ICdiYXInfV0gfCBvcmRlckJ5OidpZCdgIHdvdWxkIHJlc3VsdCBpblxuICogYFt7aWQ6ICdiYXInfSwge2lkOiAnZm9vJ31dYC5cbiAqXG4gKiBUaGUgYGNvbGxlY3Rpb25gIGNhbiBiZSBhbiBBcnJheSBvciBhcnJheS1saWtlIG9iamVjdCAoZS5nLiBOb2RlTGlzdCwgalF1ZXJ5IG9iamVjdCwgVHlwZWRBcnJheSxcbiAqIFN0cmluZywgZXRjKS5cbiAqXG4gKiBUaGUgYGV4cHJlc3Npb25gIGNhbiBiZSBhIHNpbmdsZSBwcmVkaWNhdGUsIG9yIGEgbGlzdCBvZiBwcmVkaWNhdGVzIGVhY2ggc2VydmluZyBhcyBhIHRpZS1icmVha2VyXG4gKiBmb3IgdGhlIHByZWNlZGluZyBvbmUuIFRoZSBgZXhwcmVzc2lvbmAgaXMgZXZhbHVhdGVkIGFnYWluc3QgZWFjaCBpdGVtIGFuZCB0aGUgb3V0cHV0IGlzIHVzZWRcbiAqIGZvciBjb21wYXJpbmcgd2l0aCBvdGhlciBpdGVtcy5cbiAqXG4gKiBZb3UgY2FuIGNoYW5nZSB0aGUgc29ydGluZyBvcmRlciBieSBzZXR0aW5nIGByZXZlcnNlYCB0byBgdHJ1ZWAuIEJ5IGRlZmF1bHQsIGl0ZW1zIGFyZSBzb3J0ZWQgaW5cbiAqIGFzY2VuZGluZyBvcmRlci5cbiAqXG4gKiBUaGUgY29tcGFyaXNvbiBpcyBkb25lIHVzaW5nIHRoZSBgY29tcGFyYXRvcmAgZnVuY3Rpb24uIElmIG5vbmUgaXMgc3BlY2lmaWVkLCBhIGRlZmF1bHQsIGJ1aWx0LWluXG4gKiBjb21wYXJhdG9yIGlzIHVzZWQgKHNlZSBiZWxvdyBmb3IgZGV0YWlscyAtIGluIGEgbnV0c2hlbGwsIGl0IGNvbXBhcmVzIG51bWJlcnMgbnVtZXJpY2FsbHkgYW5kXG4gKiBzdHJpbmdzIGFscGhhYmV0aWNhbGx5KS5cbiAqXG4gKiAjIyMgVW5kZXIgdGhlIGhvb2RcbiAqXG4gKiBPcmRlcmluZyB0aGUgc3BlY2lmaWVkIGBjb2xsZWN0aW9uYCBoYXBwZW5zIGluIHR3byBwaGFzZXM6XG4gKlxuICogMS4gQWxsIGl0ZW1zIGFyZSBwYXNzZWQgdGhyb3VnaCB0aGUgcHJlZGljYXRlIChvciBwcmVkaWNhdGVzKSwgYW5kIHRoZSByZXR1cm5lZCB2YWx1ZXMgYXJlIHNhdmVkXG4gKiAgICBhbG9uZyB3aXRoIHRoZWlyIHR5cGUgKGBzdHJpbmdgLCBgbnVtYmVyYCBldGMpLiBGb3IgZXhhbXBsZSwgYW4gaXRlbSBge2xhYmVsOiAnZm9vJ31gLCBwYXNzZWRcbiAqICAgIHRocm91Z2ggYSBwcmVkaWNhdGUgdGhhdCBleHRyYWN0cyB0aGUgdmFsdWUgb2YgdGhlIGBsYWJlbGAgcHJvcGVydHksIHdvdWxkIGJlIHRyYW5zZm9ybWVkIHRvOlxuICogICAgYGBgXG4gKiAgICB7XG4gKiAgICAgIHZhbHVlOiAnZm9vJyxcbiAqICAgICAgdHlwZTogJ3N0cmluZycsXG4gKiAgICAgIGluZGV4OiAuLi5cbiAqICAgIH1cbiAqICAgIGBgYFxuICogICAgKipOb3RlOioqIGBudWxsYCB2YWx1ZXMgdXNlIGAnbnVsbCdgIGFzIHRoZWlyIHR5cGUuXG4gKiAyLiBUaGUgY29tcGFyYXRvciBmdW5jdGlvbiBpcyB1c2VkIHRvIHNvcnQgdGhlIGl0ZW1zLCBiYXNlZCBvbiB0aGUgZGVyaXZlZCB2YWx1ZXMsIHR5cGVzIGFuZFxuICogICAgaW5kaWNlcy5cbiAqXG4gKiBJZiB5b3UgdXNlIGEgY3VzdG9tIGNvbXBhcmF0b3IsIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggcGFpcnMgb2Ygb2JqZWN0cyBvZiB0aGUgZm9ybVxuICogYHt2YWx1ZTogLi4uLCB0eXBlOiAnLi4uJywgaW5kZXg6IC4uLn1gIGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYDBgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVhbFxuICogKGFzIGZhciBhcyB0aGUgY29tcGFyYXRvciBpcyBjb25jZXJuZWQpLCBgLTFgIGlmIHRoZSAxc3Qgb25lIHNob3VsZCBiZSByYW5rZWQgaGlnaGVyIHRoYW4gdGhlXG4gKiBzZWNvbmQsIG9yIGAxYCBvdGhlcndpc2UuXG4gKlxuICogSW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgdGhlIHNvcnRpbmcgd2lsbCBiZSBkZXRlcm1pbmlzdGljIGFjcm9zcyBwbGF0Zm9ybXMsIGlmIG5vbmUgb2YgdGhlXG4gKiBzcGVjaWZpZWQgcHJlZGljYXRlcyBjYW4gZGlzdGluZ3Vpc2ggYmV0d2VlbiB0d28gaXRlbXMsIGBvcmRlckJ5YCB3aWxsIGF1dG9tYXRpY2FsbHkgaW50cm9kdWNlIGFcbiAqIGR1bW15IHByZWRpY2F0ZSB0aGF0IHJldHVybnMgdGhlIGl0ZW0ncyBpbmRleCBhcyBgdmFsdWVgLlxuICogKElmIHlvdSBhcmUgdXNpbmcgYSBjdXN0b20gY29tcGFyYXRvciwgbWFrZSBzdXJlIGl0IGNhbiBoYW5kbGUgdGhpcyBwcmVkaWNhdGUgYXMgd2VsbC4pXG4gKlxuICogSWYgYSBjdXN0b20gY29tcGFyYXRvciBzdGlsbCBjYW4ndCBkaXN0aW5ndWlzaCBiZXR3ZWVuIHR3byBpdGVtcywgdGhlbiB0aGV5IHdpbGwgYmUgc29ydGVkIGJhc2VkXG4gKiBvbiB0aGVpciBpbmRleCB1c2luZyB0aGUgYnVpbHQtaW4gY29tcGFyYXRvci5cbiAqXG4gKiBGaW5hbGx5LCBpbiBhbiBhdHRlbXB0IHRvIHNpbXBsaWZ5IHRoaW5ncywgaWYgYSBwcmVkaWNhdGUgcmV0dXJucyBhbiBvYmplY3QgYXMgdGhlIGV4dHJhY3RlZFxuICogdmFsdWUgZm9yIGFuIGl0ZW0sIGBvcmRlckJ5YCB3aWxsIHRyeSB0byBjb252ZXJ0IHRoYXQgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHZhbHVlLCBiZWZvcmUgcGFzc2luZ1xuICogaXQgdG8gdGhlIGNvbXBhcmF0b3IuIFRoZSBmb2xsb3dpbmcgcnVsZXMgZ292ZXJuIHRoZSBjb252ZXJzaW9uOlxuICpcbiAqIDEuIElmIHRoZSBvYmplY3QgaGFzIGEgYHZhbHVlT2YoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhIHByaW1pdGl2ZSwgaXRzIHJldHVybiB2YWx1ZSB3aWxsIGJlXG4gKiAgICB1c2VkIGluc3RlYWQuPGJyIC8+XG4gKiAgICAoSWYgdGhlIG9iamVjdCBoYXMgYSBgdmFsdWVPZigpYCBtZXRob2QgdGhhdCByZXR1cm5zIGFub3RoZXIgb2JqZWN0LCB0aGVuIHRoZSByZXR1cm5lZCBvYmplY3RcbiAqICAgIHdpbGwgYmUgdXNlZCBpbiBzdWJzZXF1ZW50IHN0ZXBzLilcbiAqIDIuIElmIHRoZSBvYmplY3QgaGFzIGEgY3VzdG9tIGB0b1N0cmluZygpYCBtZXRob2QgKGkuZS4gbm90IHRoZSBvbmUgaW5oZXJpdGVkIGZyb20gYE9iamVjdGApIHRoYXRcbiAqICAgIHJldHVybnMgYSBwcmltaXRpdmUsIGl0cyByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkIGluc3RlYWQuPGJyIC8+XG4gKiAgICAoSWYgdGhlIG9iamVjdCBoYXMgYSBgdG9TdHJpbmcoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhbm90aGVyIG9iamVjdCwgdGhlbiB0aGUgcmV0dXJuZWQgb2JqZWN0XG4gKiAgICB3aWxsIGJlIHVzZWQgaW4gc3Vic2VxdWVudCBzdGVwcy4pXG4gKiAzLiBObyBjb252ZXJzaW9uOyB0aGUgb2JqZWN0IGl0c2VsZiBpcyB1c2VkLlxuICpcbiAqICMjIyBUaGUgZGVmYXVsdCBjb21wYXJhdG9yXG4gKlxuICogVGhlIGRlZmF1bHQsIGJ1aWx0LWluIGNvbXBhcmF0b3Igc2hvdWxkIGJlIHN1ZmZpY2llbnQgZm9yIG1vc3QgdXNlY2FzZXMuIEluIHNob3J0LCBpdCBjb21wYXJlc1xuICogbnVtYmVycyBudW1lcmljYWxseSwgc3RyaW5ncyBhbHBoYWJldGljYWxseSAoYW5kIGNhc2UtaW5zZW5zaXRpdmVseSksIGZvciBvYmplY3RzIGZhbGxzIGJhY2sgdG9cbiAqIHVzaW5nIHRoZWlyIGluZGV4IGluIHRoZSBvcmlnaW5hbCBjb2xsZWN0aW9uLCBzb3J0cyB2YWx1ZXMgb2YgZGlmZmVyZW50IHR5cGVzIGJ5IHR5cGUgYW5kIHB1dHNcbiAqIGB1bmRlZmluZWRgIGFuZCBgbnVsbGAgdmFsdWVzIGF0IHRoZSBlbmQgb2YgdGhlIHNvcnRlZCBsaXN0LlxuICpcbiAqIE1vcmUgc3BlY2lmaWNhbGx5LCBpdCBmb2xsb3dzIHRoZXNlIHN0ZXBzIHRvIGRldGVybWluZSB0aGUgcmVsYXRpdmUgb3JkZXIgb2YgaXRlbXM6XG4gKlxuICogMS4gSWYgdGhlIGNvbXBhcmVkIHZhbHVlcyBhcmUgb2YgZGlmZmVyZW50IHR5cGVzOlxuICogICAgLSBJZiBvbmUgb2YgdGhlIHZhbHVlcyBpcyB1bmRlZmluZWQsIGNvbnNpZGVyIGl0IFwiZ3JlYXRlciB0aGFuXCIgdGhlIG90aGVyLlxuICogICAgLSBFbHNlIGlmIG9uZSBvZiB0aGUgdmFsdWVzIGlzIG51bGwsIGNvbnNpZGVyIGl0IFwiZ3JlYXRlciB0aGFuXCIgdGhlIG90aGVyLlxuICogICAgLSBFbHNlIGNvbXBhcmUgdGhlIHR5cGVzIHRoZW1zZWx2ZXMgYWxwaGFiZXRpY2FsbHkuXG4gKiAyLiBJZiBib3RoIHZhbHVlcyBhcmUgb2YgdHlwZSBgc3RyaW5nYCwgY29tcGFyZSB0aGVtIGFscGhhYmV0aWNhbGx5IGluIGEgY2FzZS0gYW5kXG4gKiAgICBsb2NhbGUtaW5zZW5zaXRpdmUgd2F5LlxuICogMy4gSWYgYm90aCB2YWx1ZXMgYXJlIG9iamVjdHMsIGNvbXBhcmUgdGhlaXIgaW5kaWNlcyBpbnN0ZWFkLlxuICogNC4gT3RoZXJ3aXNlLCByZXR1cm46XG4gKiAgICAtICBgMGAsIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWFsIChieSBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbiwgaS5lLiB1c2luZyBgPT09YCkuXG4gKiAgICAtIGAtMWAsIGlmIHRoZSAxc3QgdmFsdWUgaXMgXCJsZXNzIHRoYW5cIiB0aGUgMm5kIHZhbHVlIChjb21wYXJlZCB1c2luZyB0aGUgYDxgIG9wZXJhdG9yKS5cbiAqICAgIC0gIGAxYCwgb3RoZXJ3aXNlLlxuICpcbiAqICoqTm90ZToqKiBJZiB5b3Ugbm90aWNlIG51bWJlcnMgbm90IGJlaW5nIHNvcnRlZCBhcyBleHBlY3RlZCwgbWFrZSBzdXJlIHRoZXkgYXJlIGFjdHVhbGx5IGJlaW5nXG4gKiAgICAgICAgICAgc2F2ZWQgYXMgbnVtYmVycyBhbmQgbm90IHN0cmluZ3MuXG4gKiAqKk5vdGU6KiogRm9yIHRoZSBwdXJwb3NlIG9mIHNvcnRpbmcsIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgYXJlIGNvbnNpZGVyZWQgXCJncmVhdGVyIHRoYW5cIlxuICogICAgICAgICAgIGFueSBvdGhlciB2YWx1ZSAod2l0aCB1bmRlZmluZWQgXCJncmVhdGVyIHRoYW5cIiBudWxsKS4gVGhpcyBlZmZlY3RpdmVseSBtZWFucyB0aGF0IGBudWxsYFxuICogICAgICAgICAgIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMgZW5kIHVwIGF0IHRoZSBlbmQgb2YgYSBsaXN0IHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gKiAqKk5vdGU6KiogYG51bGxgIHZhbHVlcyB1c2UgYCdudWxsJ2AgYXMgdGhlaXIgdHlwZSB0byBiZSBhYmxlIHRvIGRpc3Rpbmd1aXNoIHRoZW0gZnJvbSBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8QXJyYXlMaWtlfSBjb2xsZWN0aW9uIC0gVGhlIGNvbGxlY3Rpb24gKGFycmF5IG9yIGFycmF5LWxpa2Ugb2JqZWN0KSB0byBzb3J0LlxuICogQHBhcmFtIHsoRnVuY3Rpb258c3RyaW5nfEFycmF5LjxGdW5jdGlvbnxzdHJpbmc+KT19IGV4cHJlc3Npb24gLSBBIHByZWRpY2F0ZSAob3IgbGlzdCBvZlxuICogICAgcHJlZGljYXRlcykgdG8gYmUgdXNlZCBieSB0aGUgY29tcGFyYXRvciB0byBkZXRlcm1pbmUgdGhlIG9yZGVyIG9mIGVsZW1lbnRzLlxuICpcbiAqICAgIENhbiBiZSBvbmUgb2Y6XG4gKlxuICogICAgLSBgRnVuY3Rpb25gOiBBIGdldHRlciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIGVhY2ggaXRlbSBhcyBhcmd1bWVudCBhbmRcbiAqICAgICAgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWQgZm9yIHNvcnRpbmcuXG4gKiAgICAtIGBzdHJpbmdgOiBBbiBBbmd1bGFySlMgZXhwcmVzc2lvbi4gVGhpcyBleHByZXNzaW9uIHdpbGwgYmUgZXZhbHVhdGVkIGFnYWluc3QgZWFjaCBpdGVtIGFuZCB0aGVcbiAqICAgICAgcmVzdWx0IHdpbGwgYmUgdXNlZCBmb3Igc29ydGluZy4gRm9yIGV4YW1wbGUsIHVzZSBgJ2xhYmVsJ2AgdG8gc29ydCBieSBhIHByb3BlcnR5IGNhbGxlZFxuICogICAgICBgbGFiZWxgIG9yIGAnbGFiZWwuc3Vic3RyaW5nKDAsIDMpJ2AgdG8gc29ydCBieSB0aGUgZmlyc3QgMyBjaGFyYWN0ZXJzIG9mIHRoZSBgbGFiZWxgXG4gKiAgICAgIHByb3BlcnR5LjxiciAvPlxuICogICAgICAoVGhlIHJlc3VsdCBvZiBhIGNvbnN0YW50IGV4cHJlc3Npb24gaXMgaW50ZXJwcmV0ZWQgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvIGJlIHVzZWQgZm9yXG4gKiAgICAgIGNvbXBhcmlzb24uIEZvciBleGFtcGxlLCB1c2UgYCdcInNwZWNpYWwgbmFtZVwiJ2AgKG5vdGUgdGhlIGV4dHJhIHBhaXIgb2YgcXVvdGVzKSB0byBzb3J0IGJ5IGFcbiAqICAgICAgcHJvcGVydHkgY2FsbGVkIGBzcGVjaWFsIG5hbWVgLik8YnIgLz5cbiAqICAgICAgQW4gZXhwcmVzc2lvbiBjYW4gYmUgb3B0aW9uYWxseSBwcmVmaXhlZCB3aXRoIGArYCBvciBgLWAgdG8gY29udHJvbCB0aGUgc29ydGluZyBkaXJlY3Rpb24sXG4gKiAgICAgIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nLiBGb3IgZXhhbXBsZSwgYCcrbGFiZWwnYCBvciBgJy1sYWJlbCdgLiBJZiBubyBwcm9wZXJ0eSBpcyBwcm92aWRlZCxcbiAqICAgICAgKGUuZy4gYCcrJ2Agb3IgYCctJ2ApLCB0aGUgY29sbGVjdGlvbiBlbGVtZW50IGl0c2VsZiBpcyB1c2VkIGluIGNvbXBhcmlzb25zLlxuICogICAgLSBgQXJyYXlgOiBBbiBhcnJheSBvZiBmdW5jdGlvbiBhbmQvb3Igc3RyaW5nIHByZWRpY2F0ZXMuIElmIGEgcHJlZGljYXRlIGNhbm5vdCBkZXRlcm1pbmUgdGhlXG4gKiAgICAgIHJlbGF0aXZlIG9yZGVyIG9mIHR3byBpdGVtcywgdGhlIG5leHQgcHJlZGljYXRlIGlzIHVzZWQgYXMgYSB0aWUtYnJlYWtlci5cbiAqXG4gKiAqKk5vdGU6KiogSWYgdGhlIHByZWRpY2F0ZSBpcyBtaXNzaW5nIG9yIGVtcHR5IHRoZW4gaXQgZGVmYXVsdHMgdG8gYCcrJ2AuXG4gKlxuICogQHBhcmFtIHtib29sZWFuPX0gcmV2ZXJzZSAtIElmIGB0cnVlYCwgcmV2ZXJzZSB0aGUgc29ydGluZyBvcmRlci5cbiAqIEBwYXJhbSB7KEZ1bmN0aW9uKT19IGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmdW5jdGlvbiB1c2VkIHRvIGRldGVybWluZSB0aGUgcmVsYXRpdmUgb3JkZXIgb2ZcbiAqICAgIHZhbHVlIHBhaXJzLiBJZiBvbWl0dGVkLCB0aGUgYnVpbHQtaW4gY29tcGFyYXRvciB3aWxsIGJlIHVzZWQuXG4gKlxuICogQHJldHVybnMge0FycmF5fSAtIFRoZSBzb3J0ZWQgYXJyYXkuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgT3JkZXJpbmcgYSB0YWJsZSB3aXRoIGBuZ1JlcGVhdGBcbiAqXG4gKiBUaGUgZXhhbXBsZSBiZWxvdyBkZW1vbnN0cmF0ZXMgYSBzaW1wbGUge0BsaW5rIG5nUmVwZWF0IG5nUmVwZWF0fSwgd2hlcmUgdGhlIGRhdGEgaXMgc29ydGVkIGJ5XG4gKiBhZ2UgaW4gZGVzY2VuZGluZyBvcmRlciAoZXhwcmVzc2lvbiBpcyBzZXQgdG8gYCctYWdlJ2ApLiBUaGUgYGNvbXBhcmF0b3JgIGlzIG5vdCBzZXQsIHdoaWNoIG1lYW5zXG4gKiBpdCBkZWZhdWx0cyB0byB0aGUgYnVpbHQtaW4gY29tcGFyYXRvci5cbiAqXG4gICA8ZXhhbXBsZSBuYW1lPVwib3JkZXJCeS1zdGF0aWNcIiBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZTFcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgPHRoPk5hbWU8L3RoPlxuICAgICAgICAgICAgIDx0aD5QaG9uZSBOdW1iZXI8L3RoPlxuICAgICAgICAgICAgIDx0aD5BZ2U8L3RoPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBvcmRlckJ5OictYWdlJ1wiPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuYWdlfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlMScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBbXG4gICAgICAgICAgICAge25hbWU6ICdKb2huJywgICBwaG9uZTogJzU1NS0xMjEyJywgIGFnZTogMTB9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgcGhvbmU6ICc1NTUtOTg3NicsICBhZ2U6IDE5fSxcbiAgICAgICAgICAgICB7bmFtZTogJ01pa2UnLCAgIHBob25lOiAnNTU1LTQzMjEnLCAgYWdlOiAyMX0sXG4gICAgICAgICAgICAge25hbWU6ICdBZGFtJywgICBwaG9uZTogJzU1NS01Njc4JywgIGFnZTogMzV9LFxuICAgICAgICAgICAgIHtuYW1lOiAnSnVsaWUnLCAgcGhvbmU6ICc1NTUtODc2NScsICBhZ2U6IDI5fVxuICAgICAgICAgICBdO1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAuZnJpZW5kcyB7XG4gICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgIH1cblxuICAgICAgIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQsIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQ7XG4gICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQ6Zmlyc3QtY2hpbGQsIC5mcmllbmRzIHRoOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiBub25lO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgLy8gRWxlbWVudCBsb2NhdG9yc1xuICAgICAgIHZhciBuYW1lcyA9IGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpKTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGJ5IGFnZSBpbiByZXZlcnNlIG9yZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgxKS5nZXRUZXh0KCkpLnRvQmUoJ0p1bGllJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDIpLmdldFRleHQoKSkudG9CZSgnTWlrZScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgzKS5nZXRUZXh0KCkpLnRvQmUoJ01hcnknKTtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoNCkuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqIDxociAvPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQ2hhbmdpbmcgcGFyYW1ldGVycyBkeW5hbWljYWxseVxuICpcbiAqIEFsbCBwYXJhbWV0ZXJzIGNhbiBiZSBjaGFuZ2VkIGR5bmFtaWNhbGx5LiBUaGUgbmV4dCBleGFtcGxlIHNob3dzIGhvdyB5b3UgY2FuIG1ha2UgdGhlIGNvbHVtbnMgb2ZcbiAqIGEgdGFibGUgc29ydGFibGUsIGJ5IGJpbmRpbmcgdGhlIGBleHByZXNzaW9uYCBhbmQgYHJldmVyc2VgIHBhcmFtZXRlcnMgdG8gc2NvcGUgcHJvcGVydGllcy5cbiAqXG4gICA8ZXhhbXBsZSBuYW1lPVwib3JkZXJCeS1keW5hbWljXCIgbW9kdWxlPVwib3JkZXJCeUV4YW1wbGUyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxwcmU+U29ydCBieSA9IHt7cHJvcGVydHlOYW1lfX07IHJldmVyc2UgPSB7e3JldmVyc2V9fTwvcHJlPlxuICAgICAgICAgPGhyLz5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJwcm9wZXJ0eU5hbWUgPSBudWxsOyByZXZlcnNlID0gZmFsc2VcIj5TZXQgdG8gdW5zb3J0ZWQ8L2J1dHRvbj5cbiAgICAgICAgIDxoci8+XG4gICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCduYW1lJylcIj5OYW1lPC9idXR0b24+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNvcnRvcmRlclwiIG5nLXNob3c9XCJwcm9wZXJ0eU5hbWUgPT09ICduYW1lJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgncGhvbmUnKVwiPlBob25lIE51bWJlcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAncGhvbmUnXCIgbmctY2xhc3M9XCJ7cmV2ZXJzZTogcmV2ZXJzZX1cIj48L3NwYW4+XG4gICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCdhZ2UnKVwiPkFnZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAnYWdlJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IG9yZGVyQnk6cHJvcGVydHlOYW1lOnJldmVyc2VcIj5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cbiAgICAgICAgICAgPC90cj5cbiAgICAgICAgIDwvdGFibGU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTInLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgIHZhciBmcmllbmRzID0gW1xuICAgICAgICAgICAgIHtuYW1lOiAnSm9obicsICAgcGhvbmU6ICc1NTUtMTIxMicsICBhZ2U6IDEwfSxcbiAgICAgICAgICAgICB7bmFtZTogJ01hcnknLCAgIHBob25lOiAnNTU1LTk4NzYnLCAgYWdlOiAxOX0sXG4gICAgICAgICAgICAge25hbWU6ICdNaWtlJywgICBwaG9uZTogJzU1NS00MzIxJywgIGFnZTogMjF9LFxuICAgICAgICAgICAgIHtuYW1lOiAnQWRhbScsICAgcGhvbmU6ICc1NTUtNTY3OCcsICBhZ2U6IDM1fSxcbiAgICAgICAgICAgICB7bmFtZTogJ0p1bGllJywgIHBob25lOiAnNTU1LTg3NjUnLCAgYWdlOiAyOX1cbiAgICAgICAgICAgXTtcblxuICAgICAgICAgICAkc2NvcGUucHJvcGVydHlOYW1lID0gJ2FnZSc7XG4gICAgICAgICAgICRzY29wZS5yZXZlcnNlID0gdHJ1ZTtcbiAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBmcmllbmRzO1xuXG4gICAgICAgICAgICRzY29wZS5zb3J0QnkgPSBmdW5jdGlvbihwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAkc2NvcGUucmV2ZXJzZSA9ICgkc2NvcGUucHJvcGVydHlOYW1lID09PSBwcm9wZXJ0eU5hbWUpID8gISRzY29wZS5yZXZlcnNlIDogZmFsc2U7XG4gICAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTtcbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG5cbiAgICAgICAuc29ydG9yZGVyOmFmdGVyIHtcbiAgICAgICAgIGNvbnRlbnQ6ICdcXDI1YjInOyAgIC8vIEJMQUNLIFVQLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICAgIC5zb3J0b3JkZXIucmV2ZXJzZTphZnRlciB7XG4gICAgICAgICBjb250ZW50OiAnXFwyNWJjJzsgICAvLyBCTEFDSyBET1dOLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAvLyBFbGVtZW50IGxvY2F0b3JzXG4gICAgICAgdmFyIHVuc29ydEJ1dHRvbiA9IGVsZW1lbnQoYnkucGFydGlhbEJ1dHRvblRleHQoJ3Vuc29ydGVkJykpO1xuICAgICAgIHZhciBuYW1lSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnTmFtZScpKTtcbiAgICAgICB2YXIgcGhvbmVIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdQaG9uZScpKTtcbiAgICAgICB2YXIgYWdlSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnQWdlJykpO1xuICAgICAgIHZhciBmaXJzdE5hbWUgPSBlbGVtZW50KGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpLnJvdygwKSk7XG4gICAgICAgdmFyIGxhc3ROYW1lID0gZWxlbWVudChieS5yZXBlYXRlcignZnJpZW5kcycpLmNvbHVtbignZnJpZW5kLm5hbWUnKS5yb3coNCkpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgYnkgc29tZSBwcm9wZXJ0eSwgd2hlbiBjbGlja2luZyBvbiB0aGUgY29sdW1uIGhlYWRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgcGhvbmVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNYXJ5Jyk7XG5cbiAgICAgICAgIG5hbWVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGluIHJldmVyc2Ugb3JkZXIsIHdoZW4gY2xpY2tpbmcgb24gdGhlIHNhbWUgY29sdW1uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICBhZ2VIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgcmVzdG9yZSB0aGUgb3JpZ2luYWwgb3JkZXIsIHdoZW4gY2xpY2tpbmcgXCJTZXQgdG8gdW5zb3J0ZWRcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgdW5zb3J0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSnVsaWUnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICogPGhyIC8+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgb3JkZXJCeWAgaW5zaWRlIGEgY29udHJvbGxlclxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gY2FsbCB0aGUgYG9yZGVyQnlgIGZpbHRlciBtYW51YWxseSwgYnkgaW5qZWN0aW5nIGBvcmRlckJ5RmlsdGVyYCwgYW5kXG4gKiBjYWxsaW5nIGl0IHdpdGggdGhlIGRlc2lyZWQgcGFyYW1ldGVycy4gKEFsdGVybmF0aXZlbHksIHlvdSBjb3VsZCBpbmplY3QgdGhlIGAkZmlsdGVyYCBmYWN0b3J5XG4gKiBhbmQgcmV0cmlldmUgdGhlIGBvcmRlckJ5YCBmaWx0ZXIgd2l0aCBgJGZpbHRlcignb3JkZXJCeScpYC4pXG4gKlxuICAgPGV4YW1wbGUgbmFtZT1cIm9yZGVyQnktY2FsbC1tYW51YWxseVwiIG1vZHVsZT1cIm9yZGVyQnlFeGFtcGxlM1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8cHJlPlNvcnQgYnkgPSB7e3Byb3BlcnR5TmFtZX19OyByZXZlcnNlID0ge3tyZXZlcnNlfX08L3ByZT5cbiAgICAgICAgIDxoci8+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KG51bGwpXCI+U2V0IHRvIHVuc29ydGVkPC9idXR0b24+XG4gICAgICAgICA8aHIvPlxuICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgnbmFtZScpXCI+TmFtZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAnbmFtZSdcIiBuZy1jbGFzcz1cIntyZXZlcnNlOiByZXZlcnNlfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzb3J0QnkoJ3Bob25lJylcIj5QaG9uZSBOdW1iZXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic29ydG9yZGVyXCIgbmctc2hvdz1cInByb3BlcnR5TmFtZSA9PT0gJ3Bob25lJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgnYWdlJylcIj5BZ2U8L2J1dHRvbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic29ydG9yZGVyXCIgbmctc2hvdz1cInByb3BlcnR5TmFtZSA9PT0gJ2FnZSdcIiBuZy1jbGFzcz1cIntyZXZlcnNlOiByZXZlcnNlfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHNcIj5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cbiAgICAgICAgICAgPC90cj5cbiAgICAgICAgIDwvdGFibGU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTMnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ29yZGVyQnlGaWx0ZXInLCBmdW5jdGlvbigkc2NvcGUsIG9yZGVyQnkpIHtcbiAgICAgICAgICAgdmFyIGZyaWVuZHMgPSBbXG4gICAgICAgICAgICAge25hbWU6ICdKb2huJywgICBwaG9uZTogJzU1NS0xMjEyJywgIGFnZTogMTB9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgcGhvbmU6ICc1NTUtOTg3NicsICBhZ2U6IDE5fSxcbiAgICAgICAgICAgICB7bmFtZTogJ01pa2UnLCAgIHBob25lOiAnNTU1LTQzMjEnLCAgYWdlOiAyMX0sXG4gICAgICAgICAgICAge25hbWU6ICdBZGFtJywgICBwaG9uZTogJzU1NS01Njc4JywgIGFnZTogMzV9LFxuICAgICAgICAgICAgIHtuYW1lOiAnSnVsaWUnLCAgcGhvbmU6ICc1NTUtODc2NScsICBhZ2U6IDI5fVxuICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICRzY29wZS5wcm9wZXJ0eU5hbWUgPSAnYWdlJztcbiAgICAgICAgICAgJHNjb3BlLnJldmVyc2UgPSB0cnVlO1xuICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IG9yZGVyQnkoZnJpZW5kcywgJHNjb3BlLnByb3BlcnR5TmFtZSwgJHNjb3BlLnJldmVyc2UpO1xuXG4gICAgICAgICAgICRzY29wZS5zb3J0QnkgPSBmdW5jdGlvbihwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAkc2NvcGUucmV2ZXJzZSA9IChwcm9wZXJ0eU5hbWUgIT09IG51bGwgJiYgJHNjb3BlLnByb3BlcnR5TmFtZSA9PT0gcHJvcGVydHlOYW1lKVxuICAgICAgICAgICAgICAgICA/ICEkc2NvcGUucmV2ZXJzZSA6IGZhbHNlO1xuICAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XG4gICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBvcmRlckJ5KGZyaWVuZHMsICRzY29wZS5wcm9wZXJ0eU5hbWUsICRzY29wZS5yZXZlcnNlKTtcbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG5cbiAgICAgICAuc29ydG9yZGVyOmFmdGVyIHtcbiAgICAgICAgIGNvbnRlbnQ6ICdcXDI1YjInOyAgIC8vIEJMQUNLIFVQLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICAgIC5zb3J0b3JkZXIucmV2ZXJzZTphZnRlciB7XG4gICAgICAgICBjb250ZW50OiAnXFwyNWJjJzsgICAvLyBCTEFDSyBET1dOLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAvLyBFbGVtZW50IGxvY2F0b3JzXG4gICAgICAgdmFyIHVuc29ydEJ1dHRvbiA9IGVsZW1lbnQoYnkucGFydGlhbEJ1dHRvblRleHQoJ3Vuc29ydGVkJykpO1xuICAgICAgIHZhciBuYW1lSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnTmFtZScpKTtcbiAgICAgICB2YXIgcGhvbmVIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdQaG9uZScpKTtcbiAgICAgICB2YXIgYWdlSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnQWdlJykpO1xuICAgICAgIHZhciBmaXJzdE5hbWUgPSBlbGVtZW50KGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpLnJvdygwKSk7XG4gICAgICAgdmFyIGxhc3ROYW1lID0gZWxlbWVudChieS5yZXBlYXRlcignZnJpZW5kcycpLmNvbHVtbignZnJpZW5kLm5hbWUnKS5yb3coNCkpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgYnkgc29tZSBwcm9wZXJ0eSwgd2hlbiBjbGlja2luZyBvbiB0aGUgY29sdW1uIGhlYWRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgcGhvbmVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNYXJ5Jyk7XG5cbiAgICAgICAgIG5hbWVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGluIHJldmVyc2Ugb3JkZXIsIHdoZW4gY2xpY2tpbmcgb24gdGhlIHNhbWUgY29sdW1uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICBhZ2VIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgcmVzdG9yZSB0aGUgb3JpZ2luYWwgb3JkZXIsIHdoZW4gY2xpY2tpbmcgXCJTZXQgdG8gdW5zb3J0ZWRcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgdW5zb3J0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSnVsaWUnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICogPGhyIC8+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBhIGN1c3RvbSBjb21wYXJhdG9yXG4gKlxuICogSWYgeW91IGhhdmUgdmVyeSBzcGVjaWZpYyByZXF1aXJlbWVudHMgYWJvdXQgdGhlIHdheSBpdGVtcyBhcmUgc29ydGVkLCB5b3UgY2FuIHBhc3MgeW91ciBvd25cbiAqIGNvbXBhcmF0b3IgZnVuY3Rpb24uIEZvciBleGFtcGxlLCB5b3UgbWlnaHQgbmVlZCB0byBjb21wYXJlIHNvbWUgc3RyaW5ncyBpbiBhIGxvY2FsZS1zZW5zaXRpdmVcbiAqIHdheS4gKFdoZW4gc3BlY2lmeWluZyBhIGN1c3RvbSBjb21wYXJhdG9yLCB5b3UgYWxzbyBuZWVkIHRvIHBhc3MgYSB2YWx1ZSBmb3IgdGhlIGByZXZlcnNlYFxuICogYXJndW1lbnQgLSBwYXNzaW5nIGBmYWxzZWAgcmV0YWlucyB0aGUgZGVmYXVsdCBzb3J0aW5nIG9yZGVyLCBpLmUuIGFzY2VuZGluZy4pXG4gKlxuICAgPGV4YW1wbGUgbmFtZT1cIm9yZGVyQnktY3VzdG9tLWNvbXBhcmF0b3JcIiBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZTRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZyaWVuZHMtY29udGFpbmVyIGN1c3RvbS1jb21wYXJhdG9yXCI+XG4gICAgICAgICAgIDxoMz5Mb2NhbGUtc2Vuc2l0aXZlIENvbXBhcmF0b3I8L2gzPlxuICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgPHRoPk5hbWU8L3RoPlxuICAgICAgICAgICAgICAgPHRoPkZhdm9yaXRlIExldHRlcjwvdGg+XG4gICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBvcmRlckJ5OidmYXZvcml0ZUxldHRlcic6ZmFsc2U6bG9jYWxlU2Vuc2l0aXZlQ29tcGFyYXRvclwiPlxuICAgICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuZmF2b3JpdGVMZXR0ZXJ9fTwvdGQ+XG4gICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZyaWVuZHMtY29udGFpbmVyIGRlZmF1bHQtY29tcGFyYXRvclwiPlxuICAgICAgICAgICA8aDM+RGVmYXVsdCBDb21wYXJhdG9yPC9oMz5cbiAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgIDx0aD5OYW1lPC90aD5cbiAgICAgICAgICAgICAgIDx0aD5GYXZvcml0ZSBMZXR0ZXI8L3RoPlxuICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgb3JkZXJCeTonZmF2b3JpdGVMZXR0ZXInXCI+XG4gICAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5mYXZvcml0ZUxldHRlcn19PC90ZD5cbiAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTQnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICRzY29wZS5mcmllbmRzID0gW1xuICAgICAgICAgICAgIHtuYW1lOiAnSm9obicsICAgZmF2b3JpdGVMZXR0ZXI6ICfDhCd9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgZmF2b3JpdGVMZXR0ZXI6ICfDnCd9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWlrZScsICAgZmF2b3JpdGVMZXR0ZXI6ICfDlid9LFxuICAgICAgICAgICAgIHtuYW1lOiAnQWRhbScsICAgZmF2b3JpdGVMZXR0ZXI6ICdIJ30sXG4gICAgICAgICAgICAge25hbWU6ICdKdWxpZScsICBmYXZvcml0ZUxldHRlcjogJ1onfVxuICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICRzY29wZS5sb2NhbGVTZW5zaXRpdmVDb21wYXJhdG9yID0gZnVuY3Rpb24odjEsIHYyKSB7XG4gICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgZ2V0IHN0cmluZ3MsIGp1c3QgY29tcGFyZSBieSBpbmRleFxuICAgICAgICAgICAgIGlmICh2MS50eXBlICE9PSAnc3RyaW5nJyB8fCB2Mi50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgcmV0dXJuICh2MS5pbmRleCA8IHYyLmluZGV4KSA/IC0xIDogMTtcbiAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAvLyBDb21wYXJlIHN0cmluZ3MgYWxwaGFiZXRpY2FsbHksIHRha2luZyBsb2NhbGUgaW50byBhY2NvdW50XG4gICAgICAgICAgICAgcmV0dXJuIHYxLnZhbHVlLmxvY2FsZUNvbXBhcmUodjIudmFsdWUpO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAuZnJpZW5kcy1jb250YWluZXIge1xuICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgbWFyZ2luOiAwIDMwcHg7XG4gICAgICAgfVxuXG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIC8vIEVsZW1lbnQgbG9jYXRvcnNcbiAgICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5jc3MoJy5jdXN0b20tY29tcGFyYXRvcicpKTtcbiAgICAgICB2YXIgbmFtZXMgPSBjb250YWluZXIuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpKTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGJ5IGZhdm9yaXRlIGxldHRlciAoaW4gY29ycmVjdCBhbHBoYWJldGljYWwgb3JkZXIpJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgxKS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoMikuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDMpLmdldFRleHQoKSkudG9CZSgnTWFyeScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCg0KS5nZXRUZXh0KCkpLnRvQmUoJ0p1bGllJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKi9cbm9yZGVyQnlGaWx0ZXIuJGluamVjdCA9IFsnJHBhcnNlJ107XG5mdW5jdGlvbiBvcmRlckJ5RmlsdGVyKCRwYXJzZSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHNvcnRQcmVkaWNhdGUsIHJldmVyc2VPcmRlciwgY29tcGFyZUZuKSB7XG5cbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIGFycmF5O1xuICAgIGlmICghaXNBcnJheUxpa2UoYXJyYXkpKSB7XG4gICAgICB0aHJvdyBtaW5FcnIoJ29yZGVyQnknKSgnbm90YXJyYXknLCAnRXhwZWN0ZWQgYXJyYXkgYnV0IHJlY2VpdmVkOiB7MH0nLCBhcnJheSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc0FycmF5KHNvcnRQcmVkaWNhdGUpKSB7IHNvcnRQcmVkaWNhdGUgPSBbc29ydFByZWRpY2F0ZV07IH1cbiAgICBpZiAoc29ydFByZWRpY2F0ZS5sZW5ndGggPT09IDApIHsgc29ydFByZWRpY2F0ZSA9IFsnKyddOyB9XG5cbiAgICB2YXIgcHJlZGljYXRlcyA9IHByb2Nlc3NQcmVkaWNhdGVzKHNvcnRQcmVkaWNhdGUpO1xuXG4gICAgdmFyIGRlc2NlbmRpbmcgPSByZXZlcnNlT3JkZXIgPyAtMSA6IDE7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGBjb21wYXJlKClgIGZ1bmN0aW9uLiBVc2UgYSBkZWZhdWx0IGNvbXBhcmF0b3IgaWYgbm9uZSBpcyBzcGVjaWZpZWQuXG4gICAgdmFyIGNvbXBhcmUgPSBpc0Z1bmN0aW9uKGNvbXBhcmVGbikgPyBjb21wYXJlRm4gOiBkZWZhdWx0Q29tcGFyZTtcblxuICAgIC8vIFRoZSBuZXh0IHRocmVlIGxpbmVzIGFyZSBhIHZlcnNpb24gb2YgYSBTd2FydHppYW4gVHJhbnNmb3JtIGlkaW9tIGZyb20gUGVybFxuICAgIC8vIChzb21ldGltZXMgY2FsbGVkIHRoZSBEZWNvcmF0ZS1Tb3J0LVVuZGVjb3JhdGUgaWRpb20pXG4gICAgLy8gU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NjaHdhcnR6aWFuX3RyYW5zZm9ybVxuICAgIHZhciBjb21wYXJlVmFsdWVzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGFycmF5LCBnZXRDb21wYXJpc29uT2JqZWN0KTtcbiAgICBjb21wYXJlVmFsdWVzLnNvcnQoZG9Db21wYXJpc29uKTtcbiAgICBhcnJheSA9IGNvbXBhcmVWYWx1ZXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udmFsdWU7IH0pO1xuXG4gICAgcmV0dXJuIGFycmF5O1xuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGFyaXNvbk9iamVjdCh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIC8vIE5PVEU6IFdlIGFyZSBhZGRpbmcgYW4gZXh0cmEgYHRpZUJyZWFrZXJgIHZhbHVlIGJhc2VkIG9uIHRoZSBlbGVtZW50J3MgaW5kZXguXG4gICAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBrZWVwIHRoZSBzb3J0IHN0YWJsZSB3aGVuIG5vbmUgb2YgdGhlIGlucHV0IHByZWRpY2F0ZXMgY2FuXG4gICAgICAvLyBkaXN0aW5ndWlzaCBiZXR3ZWVuIHR3byBlbGVtZW50cy5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdGllQnJlYWtlcjoge3ZhbHVlOiBpbmRleCwgdHlwZTogJ251bWJlcicsIGluZGV4OiBpbmRleH0sXG4gICAgICAgIHByZWRpY2F0ZVZhbHVlczogcHJlZGljYXRlcy5tYXAoZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFByZWRpY2F0ZVZhbHVlKHByZWRpY2F0ZS5nZXQodmFsdWUpLCBpbmRleCk7XG4gICAgICAgIH0pXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRvQ29tcGFyaXNvbih2MSwgdjIpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHByZWRpY2F0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY29tcGFyZSh2MS5wcmVkaWNhdGVWYWx1ZXNbaV0sIHYyLnByZWRpY2F0ZVZhbHVlc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0ICogcHJlZGljYXRlc1tpXS5kZXNjZW5kaW5nICogZGVzY2VuZGluZztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gKGNvbXBhcmUodjEudGllQnJlYWtlciwgdjIudGllQnJlYWtlcikgfHwgZGVmYXVsdENvbXBhcmUodjEudGllQnJlYWtlciwgdjIudGllQnJlYWtlcikpICogZGVzY2VuZGluZztcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc1ByZWRpY2F0ZXMoc29ydFByZWRpY2F0ZXMpIHtcbiAgICByZXR1cm4gc29ydFByZWRpY2F0ZXMubWFwKGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICAgICAgdmFyIGRlc2NlbmRpbmcgPSAxLCBnZXQgPSBpZGVudGl0eTtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ocHJlZGljYXRlKSkge1xuICAgICAgICBnZXQgPSBwcmVkaWNhdGU7XG4gICAgICB9IGVsc2UgaWYgKGlzU3RyaW5nKHByZWRpY2F0ZSkpIHtcbiAgICAgICAgaWYgKChwcmVkaWNhdGUuY2hhckF0KDApID09PSAnKycgfHwgcHJlZGljYXRlLmNoYXJBdCgwKSA9PT0gJy0nKSkge1xuICAgICAgICAgIGRlc2NlbmRpbmcgPSBwcmVkaWNhdGUuY2hhckF0KDApID09PSAnLScgPyAtMSA6IDE7XG4gICAgICAgICAgcHJlZGljYXRlID0gcHJlZGljYXRlLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZGljYXRlICE9PSAnJykge1xuICAgICAgICAgIGdldCA9ICRwYXJzZShwcmVkaWNhdGUpO1xuICAgICAgICAgIGlmIChnZXQuY29uc3RhbnQpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBnZXQoKTtcbiAgICAgICAgICAgIGdldCA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZVtrZXldOyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtnZXQ6IGdldCwgZGVzY2VuZGluZzogZGVzY2VuZGluZ307XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1ByaW1pdGl2ZSh2YWx1ZSkge1xuICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICBjYXNlICdudW1iZXInOiAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlICdib29sZWFuJzogLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb2JqZWN0VmFsdWUodmFsdWUpIHtcbiAgICAvLyBJZiBgdmFsdWVPZmAgaXMgYSB2YWxpZCBmdW5jdGlvbiB1c2UgdGhhdFxuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnZhbHVlT2YoKTtcbiAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gSWYgYHRvU3RyaW5nYCBpcyBhIHZhbGlkIGZ1bmN0aW9uIGFuZCBub3QgdGhlIG9uZSBmcm9tIGBPYmplY3QucHJvdG90eXBlYCB1c2UgdGhhdFxuICAgIGlmIChoYXNDdXN0b21Ub1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQcmVkaWNhdGVWYWx1ZSh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHR5cGUgPSAnbnVsbCc7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgdmFsdWUgPSBvYmplY3RWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7dmFsdWU6IHZhbHVlLCB0eXBlOiB0eXBlLCBpbmRleDogaW5kZXh9O1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdENvbXBhcmUodjEsIHYyKSB7XG4gICAgdmFyIHJlc3VsdCA9IDA7XG4gICAgdmFyIHR5cGUxID0gdjEudHlwZTtcbiAgICB2YXIgdHlwZTIgPSB2Mi50eXBlO1xuXG4gICAgaWYgKHR5cGUxID09PSB0eXBlMikge1xuICAgICAgdmFyIHZhbHVlMSA9IHYxLnZhbHVlO1xuICAgICAgdmFyIHZhbHVlMiA9IHYyLnZhbHVlO1xuXG4gICAgICBpZiAodHlwZTEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIENvbXBhcmUgc3RyaW5ncyBjYXNlLWluc2Vuc2l0aXZlbHlcbiAgICAgICAgdmFsdWUxID0gdmFsdWUxLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhbHVlMiA9IHZhbHVlMi50b0xvd2VyQ2FzZSgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlMSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gRm9yIGJhc2ljIG9iamVjdHMsIHVzZSB0aGUgcG9zaXRpb24gb2YgdGhlIG9iamVjdFxuICAgICAgICAvLyBpbiB0aGUgY29sbGVjdGlvbiBpbnN0ZWFkIG9mIHRoZSB2YWx1ZVxuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUxKSkgdmFsdWUxID0gdjEuaW5kZXg7XG4gICAgICAgIGlmIChpc09iamVjdCh2YWx1ZTIpKSB2YWx1ZTIgPSB2Mi5pbmRleDtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlMSAhPT0gdmFsdWUyKSB7XG4gICAgICAgIHJlc3VsdCA9IHZhbHVlMSA8IHZhbHVlMiA/IC0xIDogMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gKHR5cGUxID09PSAndW5kZWZpbmVkJykgPyAxIDpcbiAgICAgICAgKHR5cGUyID09PSAndW5kZWZpbmVkJykgPyAtMSA6XG4gICAgICAgICh0eXBlMSA9PT0gJ251bGwnKSA/IDEgOlxuICAgICAgICAodHlwZTIgPT09ICdudWxsJykgPyAtMSA6XG4gICAgICAgICh0eXBlMSA8IHR5cGUyKSA/IC0xIDogMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmZ1bmN0aW9uIG5nRGlyZWN0aXZlKGRpcmVjdGl2ZSkge1xuICBpZiAoaXNGdW5jdGlvbihkaXJlY3RpdmUpKSB7XG4gICAgZGlyZWN0aXZlID0ge1xuICAgICAgbGluazogZGlyZWN0aXZlXG4gICAgfTtcbiAgfVxuICBkaXJlY3RpdmUucmVzdHJpY3QgPSBkaXJlY3RpdmUucmVzdHJpY3QgfHwgJ0FDJztcbiAgcmV0dXJuIHZhbHVlRm4oZGlyZWN0aXZlKTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBhXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9kaWZpZXMgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIGh0bWwgYSB0YWcgc28gdGhhdCB0aGUgZGVmYXVsdCBhY3Rpb24gaXMgcHJldmVudGVkIHdoZW5cbiAqIHRoZSBocmVmIGF0dHJpYnV0ZSBpcyBlbXB0eS5cbiAqXG4gKiBGb3IgZHluYW1pY2FsbHkgY3JlYXRpbmcgYGhyZWZgIGF0dHJpYnV0ZXMgZm9yIGEgdGFncywgc2VlIHRoZSB7QGxpbmsgbmcubmdIcmVmIGBuZ0hyZWZgfSBkaXJlY3RpdmUuXG4gKi9cbnZhciBodG1sQW5jaG9yRGlyZWN0aXZlID0gdmFsdWVGbih7XG4gIHJlc3RyaWN0OiAnRScsXG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICBpZiAoIWF0dHIuaHJlZiAmJiAhYXR0ci54bGlua0hyZWYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAvLyBJZiB0aGUgbGlua2VkIGVsZW1lbnQgaXMgbm90IGFuIGFuY2hvciB0YWcgYW55bW9yZSwgZG8gbm90aGluZ1xuICAgICAgICBpZiAoZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnYScpIHJldHVybjtcblxuICAgICAgICAvLyBTVkdBRWxlbWVudCBkb2VzIG5vdCB1c2UgdGhlIGhyZWYgYXR0cmlidXRlLCBidXQgcmF0aGVyIHRoZSAneGxpbmtIcmVmJyBhdHRyaWJ1dGUuXG4gICAgICAgIHZhciBocmVmID0gdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSkgPT09ICdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXScgP1xuICAgICAgICAgICAgICAgICAgICd4bGluazpocmVmJyA6ICdocmVmJztcbiAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbm8gaHJlZiB1cmwsIHRoZW4gZG9uJ3QgbmF2aWdhdGUgYW55d2hlcmUuXG4gICAgICAgICAgaWYgKCFlbGVtZW50LmF0dHIoaHJlZikpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0hyZWZcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgOTlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzaW5nIEFuZ3VsYXJKUyBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGFuIGhyZWYgYXR0cmlidXRlIHdpbGxcbiAqIG1ha2UgdGhlIGxpbmsgZ28gdG8gdGhlIHdyb25nIFVSTCBpZiB0aGUgdXNlciBjbGlja3MgaXQgYmVmb3JlXG4gKiBBbmd1bGFySlMgaGFzIGEgY2hhbmNlIHRvIHJlcGxhY2UgdGhlIGB7e2hhc2h9fWAgbWFya3VwIHdpdGggaXRzXG4gKiB2YWx1ZS4gVW50aWwgQW5ndWxhckpTIHJlcGxhY2VzIHRoZSBtYXJrdXAgdGhlIGxpbmsgd2lsbCBiZSBicm9rZW5cbiAqIGFuZCB3aWxsIG1vc3QgbGlrZWx5IHJldHVybiBhIDQwNCBlcnJvci4gVGhlIGBuZ0hyZWZgIGRpcmVjdGl2ZVxuICogc29sdmVzIHRoaXMgcHJvYmxlbS5cbiAqXG4gKiBUaGUgd3Jvbmcgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGEgaHJlZj1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiPmxpbmsxPC9hPlxuICogYGBgXG4gKlxuICogVGhlIGNvcnJlY3Qgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGEgbmctaHJlZj1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiPmxpbmsxPC9hPlxuICogYGBgXG4gKlxuICogQGVsZW1lbnQgQVxuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdIcmVmIGFueSBzdHJpbmcgd2hpY2ggY2FuIGNvbnRhaW4gYHt7fX1gIG1hcmt1cC5cbiAqXG4gKiBAZXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIHZhcmlvdXMgY29tYmluYXRpb25zIG9mIGBocmVmYCwgYG5nLWhyZWZgIGFuZCBgbmctY2xpY2tgIGF0dHJpYnV0ZXNcbiAqIGluIGxpbmtzIGFuZCB0aGVpciBkaWZmZXJlbnQgYmVoYXZpb3JzOlxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1ocmVmXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ2YWx1ZVwiIC8+PGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0xXCIgaHJlZiBuZy1jbGljaz1cInZhbHVlID0gMVwiPmxpbmsgMTwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTJcIiBocmVmPVwiXCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDJcIj5saW5rIDI8L2E+IChsaW5rLCBkb24ndCByZWxvYWQpPGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0zXCIgbmctaHJlZj1cIi97eycxMjMnfX1cIj5saW5rIDM8L2E+IChsaW5rLCByZWxvYWQhKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstNFwiIGhyZWY9XCJcIiBuYW1lPVwieHhcIiBuZy1jbGljaz1cInZhbHVlID0gNFwiPmFuY2hvcjwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTVcIiBuYW1lPVwieHh4XCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDVcIj5hbmNob3I8L2E+IChubyBsaW5rKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstNlwiIG5nLWhyZWY9XCJ7e3ZhbHVlfX1cIj5saW5rPC9hPiAobGluaywgY2hhbmdlIGxvY2F0aW9uKVxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBocmVmIHdpdGhvdXQgdmFsdWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCcxJyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstMScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZSgnJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay0yJykpLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnMicpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTInKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYW5kIGNoYW5nZSB1cmwgd2hlbiBuZy1ocmVmIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvTWF0Y2goL1xcLzEyMyQvKTtcblxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstMycpKS5jbGljaygpO1xuXG4gICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgd2UgbmF2aWdhdGUgYXdheSBmcm9tIGFuIEFuZ3VsYXJKUyBwYWdlLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gdXNlIGJyb3dzZXIuZHJpdmVyIHRvIGdldCB0aGUgYmFzZSB3ZWJkcml2ZXIuXG5cbiAgICAgICAgICBicm93c2VyLndhaXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gYnJvd3Nlci5kcml2ZXIuZ2V0Q3VycmVudFVybCgpLnRoZW4oZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICAgIHJldHVybiB1cmwubWF0Y2goL1xcLzEyMyQvKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIDUwMDAsICdwYWdlIHNob3VsZCBuYXZpZ2F0ZSB0byAvMTIzJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nIGFuZCBuYW1lIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzQnKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay00JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKCcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gbm8gaHJlZiBidXQgbmFtZSBzcGVjaWZpZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTUnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCc1Jyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZShudWxsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBvbmx5IGNoYW5nZSB1cmwgd2hlbiBvbmx5IG5nLWhyZWYnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5jbGVhcigpO1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLnNlbmRLZXlzKCc2Jyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9NYXRjaCgvXFwvNiQvKTtcblxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5jbGljaygpO1xuXG4gICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgd2UgbmF2aWdhdGUgYXdheSBmcm9tIGFuIEFuZ3VsYXJKUyBwYWdlLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gdXNlIGJyb3dzZXIuZHJpdmVyIHRvIGdldCB0aGUgYmFzZSB3ZWJkcml2ZXIuXG4gICAgICAgICAgYnJvd3Nlci53YWl0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKC9cXC82JC8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC82Jyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU3JjXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDk5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2luZyBBbmd1bGFySlMgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhIGBzcmNgIGF0dHJpYnV0ZSBkb2Vzbid0XG4gKiB3b3JrIHJpZ2h0OiBUaGUgYnJvd3NlciB3aWxsIGZldGNoIGZyb20gdGhlIFVSTCB3aXRoIHRoZSBsaXRlcmFsXG4gKiB0ZXh0IGB7e2hhc2h9fWAgdW50aWwgQW5ndWxhckpTIHJlcGxhY2VzIHRoZSBleHByZXNzaW9uIGluc2lkZVxuICogYHt7aGFzaH19YC4gVGhlIGBuZ1NyY2AgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0uXG4gKlxuICogVGhlIGJ1Z2d5IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgc3JjPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCIgYWx0PVwiRGVzY3JpcHRpb25cIi8+XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29ycmVjdCB3YXkgdG8gd3JpdGUgaXQ6XG4gKiBgYGBodG1sXG4gKiA8aW1nIG5nLXNyYz1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiIGFsdD1cIkRlc2NyaXB0aW9uXCIgLz5cbiAqIGBgYFxuICpcbiAqIEBlbGVtZW50IElNR1xuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdTcmMgYW55IHN0cmluZyB3aGljaCBjYW4gY29udGFpbiBge3t9fWAgbWFya3VwLlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTcmNzZXRcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgOTlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzaW5nIEFuZ3VsYXJKUyBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGEgYHNyY3NldGAgYXR0cmlidXRlIGRvZXNuJ3RcbiAqIHdvcmsgcmlnaHQ6IFRoZSBicm93c2VyIHdpbGwgZmV0Y2ggZnJvbSB0aGUgVVJMIHdpdGggdGhlIGxpdGVyYWxcbiAqIHRleHQgYHt7aGFzaH19YCB1bnRpbCBBbmd1bGFySlMgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXG4gKiBge3toYXNofX1gLiBUaGUgYG5nU3Jjc2V0YCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbS5cbiAqXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGltZyBzcmNzZXQ9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX0gMnhcIiBhbHQ9XCJEZXNjcmlwdGlvblwiLz5cbiAqIGBgYFxuICpcbiAqIFRoZSBjb3JyZWN0IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgbmctc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIgYWx0PVwiRGVzY3JpcHRpb25cIiAvPlxuICogYGBgXG4gKlxuICogQGVsZW1lbnQgSU1HXG4gKiBAcGFyYW0ge3RlbXBsYXRlfSBuZ1NyY3NldCBhbnkgc3RyaW5nIHdoaWNoIGNhbiBjb250YWluIGB7e319YCBtYXJrdXAuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0Rpc2FibGVkXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgZGlyZWN0aXZlIHNldHMgdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50ICh0eXBpY2FsbHkgYSBmb3JtIGNvbnRyb2wsXG4gKiBlLmcuIGBpbnB1dGAsIGBidXR0b25gLCBgc2VsZWN0YCBldGMuKSBpZiB0aGVcbiAqIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGluc2lkZSBgbmdEaXNhYmxlZGAgZXZhbHVhdGVzIHRvIHRydXRoeS5cbiAqXG4gKiBBIHNwZWNpYWwgZGlyZWN0aXZlIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIGNhbm5vdCB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhlIGBkaXNhYmxlZGBcbiAqIGF0dHJpYnV0ZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9uIGd1aWRlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nLWRpc2FibGVkXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8bGFiZWw+Q2xpY2sgbWUgdG8gdG9nZ2xlOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCI+PC9sYWJlbD48YnIvPlxuICAgICAgICA8YnV0dG9uIG5nLW1vZGVsPVwiYnV0dG9uXCIgbmctZGlzYWJsZWQ9XCJjaGVja2VkXCI+QnV0dG9uPC9idXR0b24+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgdG9nZ2xlIGJ1dHRvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdEaXNhYmxlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2hlY2tlZFxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNldHMgdGhlIGBjaGVja2VkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdDaGVja2VkYCBpcyB0cnV0aHkuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgZGlyZWN0aXZlIHNob3VsZCBub3QgYmUgdXNlZCB0b2dldGhlciB3aXRoIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0sXG4gKiBhcyB0aGlzIGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IuXG4gKlxuICogQSBzcGVjaWFsIGRpcmVjdGl2ZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoZSBgY2hlY2tlZGBcbiAqIGF0dHJpYnV0ZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9uIGd1aWRlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNoZWNrZWRcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxsYWJlbD5DaGVjayBtZSB0byBjaGVjayBib3RoOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJsZWFkZXJcIj48L2xhYmVsPjxici8+XG4gICAgICAgIDxpbnB1dCBpZD1cImNoZWNrRm9sbG93ZXJcIiB0eXBlPVwiY2hlY2tib3hcIiBuZy1jaGVja2VkPVwibGVhZGVyXCIgYXJpYS1sYWJlbD1cIkZvbGxvd2VyIGlucHV0XCI+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgY2hlY2sgYm90aCBjaGVja0JveGVzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2NoZWNrRm9sbG93ZXInKSkuZ2V0QXR0cmlidXRlKCdjaGVja2VkJykpLnRvQmVGYWxzeSgpO1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2xlYWRlcicpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjaGVja0ZvbGxvd2VyJykpLmdldEF0dHJpYnV0ZSgnY2hlY2tlZCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqXG4gKiBAZWxlbWVudCBJTlBVVFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NoZWNrZWQgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcbiAqICAgICB0aGVuIHRoZSBgY2hlY2tlZGAgYXR0cmlidXRlIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nUmVhZG9ubHlcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYHJlYWRvbmx5YCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdSZWFkb25seWAgaXMgdHJ1dGh5LlxuICogTm90ZSB0aGF0IGByZWFkb25seWAgYXBwbGllcyBvbmx5IHRvIGBpbnB1dGAgZWxlbWVudHMgd2l0aCBzcGVjaWZpYyB0eXBlcy4gW1NlZSB0aGUgaW5wdXQgZG9jcyBvblxuICogTUROXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvaW5wdXQjYXR0ci1yZWFkb25seSkgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQSBzcGVjaWFsIGRpcmVjdGl2ZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoZSBgcmVhZG9ubHlgXG4gKiBhdHRyaWJ1dGUuIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbiBndWlkZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1yZWFkb25seVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGxhYmVsPkNoZWNrIG1lIHRvIG1ha2UgdGV4dCByZWFkb25seTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjwvbGFiZWw+PGJyLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctcmVhZG9ubHk9XCJjaGVja2VkXCIgdmFsdWU9XCJJJ20gQW5ndWxhckpTXCIgYXJpYS1sYWJlbD1cIlJlYWRvbmx5IGZpZWxkXCIgLz5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgcmVhZG9ubHkgYXR0cicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnW3R5cGU9XCJ0ZXh0XCJdJykpLmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnW3R5cGU9XCJ0ZXh0XCJdJykpLmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdSZWFkb25seSBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJyZWFkb25seVwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU2VsZWN0ZWRcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYHNlbGVjdGVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdTZWxlY3RlZGAgaXMgdHJ1dGh5LlxuICpcbiAqIEEgc3BlY2lhbCBkaXJlY3RpdmUgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgY2Fubm90IHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGUgYHNlbGVjdGVkYFxuICogYXR0cmlidXRlLiBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb24gZ3VpZGV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgKipOb3RlOioqIGBuZ1NlbGVjdGVkYCBkb2VzIG5vdCBpbnRlcmFjdCB3aXRoIHRoZSBgc2VsZWN0YCBhbmQgYG5nTW9kZWxgIGRpcmVjdGl2ZXMsIGl0IG9ubHlcbiAqICAgc2V0cyB0aGUgYHNlbGVjdGVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQuIElmIHlvdSBhcmUgdXNpbmcgYG5nTW9kZWxgIG9uIHRoZSBzZWxlY3QsIHlvdVxuICogICBzaG91bGQgbm90IHVzZSBgbmdTZWxlY3RlZGAgb24gdGhlIG9wdGlvbnMsIGFzIGBuZ01vZGVsYCB3aWxsIHNldCB0aGUgc2VsZWN0IHZhbHVlIGFuZFxuICogICBzZWxlY3RlZCBvcHRpb25zLlxuICogPC9kaXY+XG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmctc2VsZWN0ZWRcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxsYWJlbD5DaGVjayBtZSB0byBzZWxlY3Q6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCI+PC9sYWJlbD48YnIvPlxuICAgICAgICA8c2VsZWN0IGFyaWEtbGFiZWw9XCJuZ1NlbGVjdGVkIGRlbW9cIj5cbiAgICAgICAgICA8b3B0aW9uPkhlbGxvITwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gaWQ9XCJncmVldFwiIG5nLXNlbGVjdGVkPVwic2VsZWN0ZWRcIj5HcmVldGluZ3MhPC9vcHRpb24+XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIHNlbGVjdCBHcmVldGluZ3MhJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2dyZWV0JykpLmdldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc2VsZWN0ZWQnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZ3JlZXQnKSkuZ2V0QXR0cmlidXRlKCdzZWxlY3RlZCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqXG4gKiBAZWxlbWVudCBPUFRJT05cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTZWxlY3RlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJzZWxlY3RlZFwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ09wZW5cbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYG9wZW5gIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCwgaWYgdGhlIGV4cHJlc3Npb24gaW5zaWRlIGBuZ09wZW5gIGlzIHRydXRoeS5cbiAqXG4gKiBBIHNwZWNpYWwgZGlyZWN0aXZlIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIGNhbm5vdCB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhlIGBvcGVuYFxuICogYXR0cmlidXRlLiBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb24gZ3VpZGV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogIyMgQSBub3RlIGFib3V0IGJyb3dzZXIgY29tcGF0aWJpbGl0eVxuICpcbiAqIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IHRoZSBgZGV0YWlsc2AgZWxlbWVudCwgaXQgaXNcbiAqIHJlY29tbWVuZGVkIHRvIHVzZSB7QGxpbmsgbmcubmdTaG93fSBhbmQge0BsaW5rIG5nLm5nSGlkZX0gaW5zdGVhZC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZSBuYW1lPVwibmctb3BlblwiPlxuICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8bGFiZWw+VG9nZ2xlIGRldGFpbHM6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cIm9wZW5cIj48L2xhYmVsPjxici8+XG4gICAgICAgICA8ZGV0YWlscyBpZD1cImRldGFpbHNcIiBuZy1vcGVuPVwib3BlblwiPlxuICAgICAgICAgICAgPHN1bW1hcnk+TGlzdDwvc3VtbWFyeT5cbiAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgPGxpPkFwcGxlPC9saT5cbiAgICAgICAgICAgICAgPGxpPk9yYW5nZTwvbGk+XG4gICAgICAgICAgICAgIDxsaT5EdXJpYW48L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgIDwvZGV0YWlscz5cbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgb3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZGV0YWlscycpKS5nZXRBdHRyaWJ1dGUoJ29wZW4nKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ29wZW4nKSkuY2xpY2soKTtcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RldGFpbHMnKSkuZ2V0QXR0cmlidXRlKCdvcGVuJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgIH0pO1xuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICpcbiAqIEBlbGVtZW50IERFVEFJTFNcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdPcGVuIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcIm9wZW5cIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICovXG5cbnZhciBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyA9IHt9O1xuXG4vLyBib29sZWFuIGF0dHJzIGFyZSBldmFsdWF0ZWRcbmZvckVhY2goQk9PTEVBTl9BVFRSLCBmdW5jdGlvbihwcm9wTmFtZSwgYXR0ck5hbWUpIHtcbiAgLy8gYmluZGluZyB0byBtdWx0aXBsZSBpcyBub3Qgc3VwcG9ydGVkXG4gIGlmIChwcm9wTmFtZSA9PT0gJ211bHRpcGxlJykgcmV0dXJuO1xuXG4gIGZ1bmN0aW9uIGRlZmF1bHRMaW5rRm4oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICBzY29wZS4kd2F0Y2goYXR0cltub3JtYWxpemVkXSwgZnVuY3Rpb24gbmdCb29sZWFuQXR0cldhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICBhdHRyLiRzZXQoYXR0ck5hbWUsICEhdmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIG5vcm1hbGl6ZWQgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBhdHRyTmFtZSk7XG4gIHZhciBsaW5rRm4gPSBkZWZhdWx0TGlua0ZuO1xuXG4gIGlmIChwcm9wTmFtZSA9PT0gJ2NoZWNrZWQnKSB7XG4gICAgbGlua0ZuID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIC8vIGVuc3VyaW5nIG5nQ2hlY2tlZCBkb2Vzbid0IGludGVyZmVyZSB3aXRoIG5nTW9kZWwgd2hlbiBib3RoIGFyZSBzZXQgb24gdGhlIHNhbWUgaW5wdXRcbiAgICAgIGlmIChhdHRyLm5nTW9kZWwgIT09IGF0dHJbbm9ybWFsaXplZF0pIHtcbiAgICAgICAgZGVmYXVsdExpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cik7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBwcmlvcml0eTogMTAwLFxuICAgICAgbGluazogbGlua0ZuXG4gICAgfTtcbiAgfTtcbn0pO1xuXG4vLyBhbGlhc2VkIGlucHV0IGF0dHJzIGFyZSBldmFsdWF0ZWRcbmZvckVhY2goQUxJQVNFRF9BVFRSLCBmdW5jdGlvbihodG1sQXR0ciwgbmdBdHRyKSB7XG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25nQXR0cl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJpb3JpdHk6IDEwMCxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIC8vc3BlY2lhbCBjYXNlIG5nUGF0dGVybiB3aGVuIGEgbGl0ZXJhbCByZWd1bGFyIGV4cHJlc3Npb24gdmFsdWVcbiAgICAgICAgLy9pcyB1c2VkIGFzIHRoZSBleHByZXNzaW9uICh0aGlzIHdheSB3ZSBkb24ndCBoYXZlIHRvIHdhdGNoIGFueXRoaW5nKS5cbiAgICAgICAgaWYgKG5nQXR0ciA9PT0gJ25nUGF0dGVybicgJiYgYXR0ci5uZ1BhdHRlcm4uY2hhckF0KDApID09PSAnLycpIHtcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBhdHRyLm5nUGF0dGVybi5tYXRjaChSRUdFWF9TVFJJTkdfUkVHRVhQKTtcbiAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGF0dHIuJHNldCgnbmdQYXR0ZXJuJywgbmV3IFJlZ0V4cChtYXRjaFsxXSwgbWF0Y2hbMl0pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0cltuZ0F0dHJdLCBmdW5jdGlvbiBuZ0F0dHJBbGlhc1dhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgYXR0ci4kc2V0KG5nQXR0ciwgdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufSk7XG5cbi8vIG5nLXNyYywgbmctc3Jjc2V0LCBuZy1ocmVmIGFyZSBpbnRlcnBvbGF0ZWRcbmZvckVhY2goWydzcmMnLCAnc3Jjc2V0JywgJ2hyZWYnXSwgZnVuY3Rpb24oYXR0ck5hbWUpIHtcbiAgdmFyIG5vcm1hbGl6ZWQgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBhdHRyTmFtZSk7XG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByaW9yaXR5OiA5OSwgLy8gaXQgbmVlZHMgdG8gcnVuIGFmdGVyIHRoZSBhdHRyaWJ1dGVzIGFyZSBpbnRlcnBvbGF0ZWRcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IGF0dHJOYW1lLFxuICAgICAgICAgICAgbmFtZSA9IGF0dHJOYW1lO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ2hyZWYnICYmXG4gICAgICAgICAgICB0b1N0cmluZy5jYWxsKGVsZW1lbnQucHJvcCgnaHJlZicpKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xuICAgICAgICAgIG5hbWUgPSAneGxpbmtIcmVmJztcbiAgICAgICAgICBhdHRyLiRhdHRyW25hbWVdID0gJ3hsaW5rOmhyZWYnO1xuICAgICAgICAgIHByb3BOYW1lID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHIuJG9ic2VydmUobm9ybWFsaXplZCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoYXR0ck5hbWUgPT09ICdocmVmJykge1xuICAgICAgICAgICAgICBhdHRyLiRzZXQobmFtZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIHZhbHVlKTtcblxuICAgICAgICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seVxuICAgICAgICAgIC8vIE9uIElFLCBpZiBcIm5nOnNyY1wiIGRpcmVjdGl2ZSBkZWNsYXJhdGlvbiBpcyB1c2VkIGFuZCBcInNyY1wiIGF0dHJpYnV0ZSBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgLy8gdGhlbiBjYWxsaW5nIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCAnZm9vJykgZG9lc24ndCBkbyBhbnl0aGluZywgc28gd2UgbmVlZFxuICAgICAgICAgIC8vIHRvIHNldCB0aGUgcHJvcGVydHkgYXMgd2VsbCB0byBhY2hpZXZlIHRoZSBkZXNpcmVkIGVmZmVjdC5cbiAgICAgICAgICAvLyBXZSB1c2UgYXR0clthdHRyTmFtZV0gdmFsdWUgc2luY2UgJHNldCBtaWdodCBoYXZlIHNhbml0aXplZCB0aGUgdXJsLlxuICAgICAgICAgIGlmIChtc2llICYmIHByb3BOYW1lKSBlbGVtZW50LnByb3AocHJvcE5hbWUsIGF0dHJbbmFtZV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufSk7XG5cbi8qIGdsb2JhbCAtbnVsbEZvcm1DdHJsLCAtUEVORElOR19DTEFTUywgLVNVQk1JVFRFRF9DTEFTU1xuICovXG52YXIgbnVsbEZvcm1DdHJsID0ge1xuICAkYWRkQ29udHJvbDogbm9vcCxcbiAgJCRyZW5hbWVDb250cm9sOiBudWxsRm9ybVJlbmFtZUNvbnRyb2wsXG4gICRyZW1vdmVDb250cm9sOiBub29wLFxuICAkc2V0VmFsaWRpdHk6IG5vb3AsXG4gICRzZXREaXJ0eTogbm9vcCxcbiAgJHNldFByaXN0aW5lOiBub29wLFxuICAkc2V0U3VibWl0dGVkOiBub29wLFxuICAkJHNldFN1Ym1pdHRlZDogbm9vcFxufSxcblBFTkRJTkdfQ0xBU1MgPSAnbmctcGVuZGluZycsXG5TVUJNSVRURURfQ0xBU1MgPSAnbmctc3VibWl0dGVkJztcblxuZnVuY3Rpb24gbnVsbEZvcm1SZW5hbWVDb250cm9sKGNvbnRyb2wsIG5hbWUpIHtcbiAgY29udHJvbC4kbmFtZSA9IG5hbWU7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXJcbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGZvcm0geWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgZm9ybS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHZhbGlkIFRydWUgaWYgYWxsIG9mIHRoZSBjb250YWluaW5nIGZvcm1zIGFuZCBjb250cm9scyBhcmUgdmFsaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGNvbnRhaW5pbmcgY29udHJvbCBvciBmb3JtIGlzIGludmFsaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRzdWJtaXR0ZWQgVHJ1ZSBpZiB1c2VyIGhhcyBzdWJtaXR0ZWQgdGhlIGZvcm0gZXZlbiBpZiBpdHMgaW52YWxpZC5cbiAqXG4gKiBAcHJvcGVydHkge09iamVjdH0gJHBlbmRpbmcgQW4gb2JqZWN0IGhhc2gsIGNvbnRhaW5pbmcgcmVmZXJlbmNlcyB0byBjb250cm9scyBvciBmb3JtcyB3aXRoXG4gKiAgcGVuZGluZyB2YWxpZGF0b3JzLCB3aGVyZTpcbiAqXG4gKiAgLSBrZXlzIGFyZSB2YWxpZGF0aW9ucyB0b2tlbnMgKGVycm9yIG5hbWVzKS5cbiAqICAtIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGNvbnRyb2xzIG9yIGZvcm1zIHRoYXQgaGF2ZSBhIHBlbmRpbmcgdmFsaWRhdG9yIGZvciB0aGUgZ2l2ZW4gZXJyb3IgbmFtZS5cbiAqXG4gKiBTZWUge0BsaW5rIGZvcm0uRm9ybUNvbnRyb2xsZXIjJGVycm9yICRlcnJvcn0gZm9yIGEgbGlzdCBvZiBidWlsdC1pbiB2YWxpZGF0aW9uIHRva2Vucy5cbiAqXG4gKiBAcHJvcGVydHkge09iamVjdH0gJGVycm9yIEFuIG9iamVjdCBoYXNoLCBjb250YWluaW5nIHJlZmVyZW5jZXMgdG8gY29udHJvbHMgb3IgZm9ybXMgd2l0aCBmYWlsaW5nXG4gKiAgdmFsaWRhdG9ycywgd2hlcmU6XG4gKlxuICogIC0ga2V5cyBhcmUgdmFsaWRhdGlvbiB0b2tlbnMgKGVycm9yIG5hbWVzKSxcbiAqICAtIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGNvbnRyb2xzIG9yIGZvcm1zIHRoYXQgaGF2ZSBhIGZhaWxpbmcgdmFsaWRhdG9yIGZvciB0aGUgZ2l2ZW4gZXJyb3IgbmFtZS5cbiAqXG4gKiAgQnVpbHQtaW4gdmFsaWRhdGlvbiB0b2tlbnM6XG4gKiAgLSBgZW1haWxgXG4gKiAgLSBgbWF4YFxuICogIC0gYG1heGxlbmd0aGBcbiAqICAtIGBtaW5gXG4gKiAgLSBgbWlubGVuZ3RoYFxuICogIC0gYG51bWJlcmBcbiAqICAtIGBwYXR0ZXJuYFxuICogIC0gYHJlcXVpcmVkYFxuICogIC0gYHVybGBcbiAqICAtIGBkYXRlYFxuICogIC0gYGRhdGV0aW1lbG9jYWxgXG4gKiAgLSBgdGltZWBcbiAqICAtIGB3ZWVrYFxuICogIC0gYG1vbnRoYFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogYEZvcm1Db250cm9sbGVyYCBrZWVwcyB0cmFjayBvZiBhbGwgaXRzIGNvbnRyb2xzIGFuZCBuZXN0ZWQgZm9ybXMgYXMgd2VsbCBhcyB0aGUgc3RhdGUgb2YgdGhlbSxcbiAqIHN1Y2ggYXMgYmVpbmcgdmFsaWQvaW52YWxpZCBvciBkaXJ0eS9wcmlzdGluZS5cbiAqXG4gKiBFYWNoIHtAbGluayBuZy5kaXJlY3RpdmU6Zm9ybSBmb3JtfSBkaXJlY3RpdmUgY3JlYXRlcyBhbiBpbnN0YW5jZVxuICogb2YgYEZvcm1Db250cm9sbGVyYC5cbiAqXG4gKi9cbi8vYXNrcyBmb3IgJHNjb3BlIHRvIGZvb2wgdGhlIEJDIGNvbnRyb2xsZXIgbW9kdWxlXG5Gb3JtQ29udHJvbGxlci4kaW5qZWN0ID0gWyckZWxlbWVudCcsICckYXR0cnMnLCAnJHNjb3BlJywgJyRhbmltYXRlJywgJyRpbnRlcnBvbGF0ZSddO1xuZnVuY3Rpb24gRm9ybUNvbnRyb2xsZXIoJGVsZW1lbnQsICRhdHRycywgJHNjb3BlLCAkYW5pbWF0ZSwgJGludGVycG9sYXRlKSB7XG4gIHRoaXMuJCRjb250cm9scyA9IFtdO1xuXG4gIC8vIGluaXQgc3RhdGVcbiAgdGhpcy4kZXJyb3IgPSB7fTtcbiAgdGhpcy4kJHN1Y2Nlc3MgPSB7fTtcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDtcbiAgdGhpcy4kbmFtZSA9ICRpbnRlcnBvbGF0ZSgkYXR0cnMubmFtZSB8fCAkYXR0cnMubmdGb3JtIHx8ICcnKSgkc2NvcGUpO1xuICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xuICB0aGlzLiRwcmlzdGluZSA9IHRydWU7XG4gIHRoaXMuJHZhbGlkID0gdHJ1ZTtcbiAgdGhpcy4kaW52YWxpZCA9IGZhbHNlO1xuICB0aGlzLiRzdWJtaXR0ZWQgPSBmYWxzZTtcbiAgdGhpcy4kJHBhcmVudEZvcm0gPSBudWxsRm9ybUN0cmw7XG5cbiAgdGhpcy4kJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgdGhpcy4kJGFuaW1hdGUgPSAkYW5pbWF0ZTtcblxuICBzZXR1cFZhbGlkaXR5KHRoaXMpO1xufVxuXG5Gb3JtQ29udHJvbGxlci5wcm90b3R5cGUgPSB7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHJvbGxiYWNrVmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSb2xsYmFjayBhbGwgZm9ybSBjb250cm9scyBwZW5kaW5nIHVwZGF0ZXMgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gVGhpcyBtZXRob2QgaXMgdHlwaWNhbGx5IG5lZWRlZCBieSB0aGUgcmVzZXQgYnV0dG9uIG9mXG4gICAqIGEgZm9ybSB0aGF0IHVzZXMgYG5nLW1vZGVsLW9wdGlvbnNgIHRvIHBlbmQgdXBkYXRlcy5cbiAgICovXG4gICRyb2xsYmFja1ZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgZm9yRWFjaCh0aGlzLiQkY29udHJvbHMsIGZ1bmN0aW9uKGNvbnRyb2wpIHtcbiAgICAgIGNvbnRyb2wuJHJvbGxiYWNrVmlld1ZhbHVlKCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkY29tbWl0Vmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDb21taXQgYWxsIGZvcm0gY29udHJvbHMgcGVuZGluZyB1cGRhdGVzIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxuICAgKlxuICAgKiBVcGRhdGVzIG1heSBiZSBwZW5kaW5nIGJ5IGEgZGVib3VuY2VkIGV2ZW50IG9yIGJlY2F1c2UgdGhlIGlucHV0IGlzIHdhaXRpbmcgZm9yIGEgc29tZSBmdXR1cmVcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIFRoaXMgbWV0aG9kIGlzIHJhcmVseSBuZWVkZWQgYXMgYE5nTW9kZWxDb250cm9sbGVyYFxuICAgKiB1c3VhbGx5IGhhbmRsZXMgY2FsbGluZyB0aGlzIGluIHJlc3BvbnNlIHRvIGlucHV0IGV2ZW50cy5cbiAgICovXG4gICRjb21taXRWaWV3VmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIGZvckVhY2godGhpcy4kJGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgICBjb250cm9sLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRhZGRDb250cm9sXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250cm9sIGNvbnRyb2wgb2JqZWN0LCBlaXRoZXIgYSB7QGxpbmsgZm9ybS5Gb3JtQ29udHJvbGxlcn0gb3IgYW5cbiAgICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJ9XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZWdpc3RlciBhIGNvbnRyb2wgd2l0aCB0aGUgZm9ybS4gSW5wdXQgZWxlbWVudHMgdXNpbmcgbmdNb2RlbENvbnRyb2xsZXIgZG8gdGhpcyBhdXRvbWF0aWNhbGx5XG4gICAqIHdoZW4gdGhleSBhcmUgbGlua2VkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNvbnRyb2wgd2lsbCBub3QgYmUgcmVmbGVjdGVkIG9uIHRoZSBuZXcgcGFyZW50IGZvcm0uIFRoaXNcbiAgICogaXMgbm90IGFuIGlzc3VlIHdpdGggbm9ybWFsIHVzZSwgYXMgZnJlc2hseSBjb21waWxlZCBhbmQgbGlua2VkIGNvbnRyb2xzIGFyZSBpbiBhIGAkcHJpc3RpbmVgXG4gICAqIHN0YXRlLlxuICAgKlxuICAgKiBIb3dldmVyLCBpZiB0aGUgbWV0aG9kIGlzIHVzZWQgcHJvZ3JhbW1hdGljYWxseSwgZm9yIGV4YW1wbGUgYnkgYWRkaW5nIGR5bmFtaWNhbGx5IGNyZWF0ZWQgY29udHJvbHMsXG4gICAqIG9yIGNvbnRyb2xzIHRoYXQgaGF2ZSBiZWVuIHByZXZpb3VzbHkgcmVtb3ZlZCB3aXRob3V0IGRlc3Ryb3lpbmcgdGhlaXIgY29ycmVzcG9uZGluZyBET00gZWxlbWVudCxcbiAgICogaXQncyB0aGUgZGV2ZWxvcGVycyByZXNwb25zaWJpbGl0eSB0byBtYWtlIHN1cmUgdGhlIGN1cnJlbnQgc3RhdGUgcHJvcGFnYXRlcyB0byB0aGUgcGFyZW50IGZvcm0uXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiBhbiBpbnB1dCBjb250cm9sIGlzIGFkZGVkIHRoYXQgaXMgYWxyZWFkeSBgJGRpcnR5YCBhbmQgaGFzIGAkZXJyb3JgIHByb3BlcnRpZXMsXG4gICAqIGNhbGxpbmcgYCRzZXREaXJ0eSgpYCBhbmQgYCR2YWxpZGF0ZSgpYCBhZnRlcndhcmRzIHdpbGwgcHJvcGFnYXRlIHRoZSBzdGF0ZSB0byB0aGUgcGFyZW50IGZvcm0uXG4gICAqL1xuICAkYWRkQ29udHJvbDogZnVuY3Rpb24oY29udHJvbCkge1xuICAgIC8vIEJyZWFraW5nIGNoYW5nZSAtIGJlZm9yZSwgaW5wdXRzIHdob3NlIG5hbWUgd2FzIFwiaGFzT3duUHJvcGVydHlcIiB3ZXJlIHF1aWV0bHkgaWdub3JlZFxuICAgIC8vIGFuZCBub3QgYWRkZWQgdG8gdGhlIHNjb3BlLiAgTm93IHdlIHRocm93IGFuIGVycm9yLlxuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KGNvbnRyb2wuJG5hbWUsICdpbnB1dCcpO1xuICAgIHRoaXMuJCRjb250cm9scy5wdXNoKGNvbnRyb2wpO1xuXG4gICAgaWYgKGNvbnRyb2wuJG5hbWUpIHtcbiAgICAgIHRoaXNbY29udHJvbC4kbmFtZV0gPSBjb250cm9sO1xuICAgIH1cblxuICAgIGNvbnRyb2wuJCRwYXJlbnRGb3JtID0gdGhpcztcbiAgfSxcblxuICAvLyBQcml2YXRlIEFQSTogcmVuYW1lIGEgZm9ybSBjb250cm9sXG4gICQkcmVuYW1lQ29udHJvbDogZnVuY3Rpb24oY29udHJvbCwgbmV3TmFtZSkge1xuICAgIHZhciBvbGROYW1lID0gY29udHJvbC4kbmFtZTtcblxuICAgIGlmICh0aGlzW29sZE5hbWVdID09PSBjb250cm9sKSB7XG4gICAgICBkZWxldGUgdGhpc1tvbGROYW1lXTtcbiAgICB9XG4gICAgdGhpc1tuZXdOYW1lXSA9IGNvbnRyb2w7XG4gICAgY29udHJvbC4kbmFtZSA9IG5ld05hbWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkcmVtb3ZlQ29udHJvbFxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udHJvbCBjb250cm9sIG9iamVjdCwgZWl0aGVyIGEge0BsaW5rIGZvcm0uRm9ybUNvbnRyb2xsZXJ9IG9yIGFuXG4gICAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyfVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRGVyZWdpc3RlciBhIGNvbnRyb2wgZnJvbSB0aGUgZm9ybS5cbiAgICpcbiAgICogSW5wdXQgZWxlbWVudHMgdXNpbmcgbmdNb2RlbENvbnRyb2xsZXIgZG8gdGhpcyBhdXRvbWF0aWNhbGx5IHdoZW4gdGhleSBhcmUgZGVzdHJveWVkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgb25seSB0aGUgcmVtb3ZlZCBjb250cm9sJ3MgdmFsaWRhdGlvbiBzdGF0ZSAoYCRlcnJvcnNgZXRjLikgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlXG4gICAqIGZvcm0uIGAkZGlydHlgLCBgJHN1Ym1pdHRlZGAgc3RhdGVzIHdpbGwgbm90IGJlIGNoYW5nZWQsIGJlY2F1c2UgdGhlIGV4cGVjdGVkIGJlaGF2aW9yIGNhbiBiZVxuICAgKiBkaWZmZXJlbnQgZnJvbSBjYXNlIHRvIGNhc2UuIEZvciBleGFtcGxlLCByZW1vdmluZyB0aGUgb25seSBgJGRpcnR5YCBjb250cm9sIGZyb20gYSBmb3JtIG1heSBvclxuICAgKiBtYXkgbm90IG1lYW4gdGhhdCB0aGUgZm9ybSBpcyBzdGlsbCBgJGRpcnR5YC5cbiAgICovXG4gICRyZW1vdmVDb250cm9sOiBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgaWYgKGNvbnRyb2wuJG5hbWUgJiYgdGhpc1tjb250cm9sLiRuYW1lXSA9PT0gY29udHJvbCkge1xuICAgICAgZGVsZXRlIHRoaXNbY29udHJvbC4kbmFtZV07XG4gICAgfVxuICAgIGZvckVhY2godGhpcy4kcGVuZGluZywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgICAgIHRoaXMuJHNldFZhbGlkaXR5KG5hbWUsIG51bGwsIGNvbnRyb2wpO1xuICAgIH0sIHRoaXMpO1xuICAgIGZvckVhY2godGhpcy4kZXJyb3IsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgICB0aGlzLiRzZXRWYWxpZGl0eShuYW1lLCBudWxsLCBjb250cm9sKTtcbiAgICB9LCB0aGlzKTtcbiAgICBmb3JFYWNoKHRoaXMuJCRzdWNjZXNzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgICAgdGhpcy4kc2V0VmFsaWRpdHkobmFtZSwgbnVsbCwgY29udHJvbCk7XG4gICAgfSwgdGhpcyk7XG5cbiAgICBhcnJheVJlbW92ZSh0aGlzLiQkY29udHJvbHMsIGNvbnRyb2wpO1xuICAgIGNvbnRyb2wuJCRwYXJlbnRGb3JtID0gbnVsbEZvcm1DdHJsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldERpcnR5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGEgZGlydHkgc3RhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gYWRkIHRoZSAnbmctZGlydHknIGNsYXNzIGFuZCBzZXQgdGhlIGZvcm0gdG8gYSBkaXJ0eVxuICAgKiBzdGF0ZSAobmctZGlydHkgY2xhc3MpLiBUaGlzIG1ldGhvZCB3aWxsIGFsc28gcHJvcGFnYXRlIHRvIHBhcmVudCBmb3Jtcy5cbiAgICovXG4gICRzZXREaXJ0eTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xuICAgIHRoaXMuJGRpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLiRwcmlzdGluZSA9IGZhbHNlO1xuICAgIHRoaXMuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFByaXN0aW5lXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgc2V0cyB0aGUgZm9ybSdzIGAkcHJpc3RpbmVgIHN0YXRlIHRvIHRydWUsIHRoZSBgJGRpcnR5YCBzdGF0ZSB0byBmYWxzZSwgcmVtb3Zlc1xuICAgKiB0aGUgYG5nLWRpcnR5YCBjbGFzcyBhbmQgYWRkcyB0aGUgYG5nLXByaXN0aW5lYCBjbGFzcy4gQWRkaXRpb25hbGx5LCBpdCBzZXRzIHRoZSBgJHN1Ym1pdHRlZGBcbiAgICogc3RhdGUgdG8gZmFsc2UuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gYWxsIHRoZSBjb250cm9scyBjb250YWluZWQgaW4gdGhpcyBmb3JtLlxuICAgKlxuICAgKiBTZXR0aW5nIGEgZm9ybSBiYWNrIHRvIGEgcHJpc3RpbmUgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gd2Ugd2FudCB0byAncmV1c2UnIGEgZm9ybSBhZnRlclxuICAgKiBzYXZpbmcgb3IgcmVzZXR0aW5nIGl0LlxuICAgKi9cbiAgJHNldFByaXN0aW5lOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkYW5pbWF0ZS5zZXRDbGFzcyh0aGlzLiQkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MsIERJUlRZX0NMQVNTICsgJyAnICsgU1VCTUlUVEVEX0NMQVNTKTtcbiAgICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcbiAgICB0aGlzLiRzdWJtaXR0ZWQgPSBmYWxzZTtcbiAgICBmb3JFYWNoKHRoaXMuJCRjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgY29udHJvbC4kc2V0UHJpc3RpbmUoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRVbnRvdWNoZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gaXRzIHVudG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlICduZy10b3VjaGVkJyBjbGFzcyBhbmQgc2V0IHRoZSBmb3JtIGNvbnRyb2xzIHRvIHRoZWlyXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAobmctdW50b3VjaGVkIGNsYXNzKS5cbiAgICpcbiAgICogU2V0dGluZyBhIGZvcm0gY29udHJvbHMgYmFjayB0byB0aGVpciB1bnRvdWNoZWQgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gc2V0dGluZyB0aGUgZm9ybVxuICAgKiBiYWNrIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICovXG4gICRzZXRVbnRvdWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIGZvckVhY2godGhpcy4kJGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgICBjb250cm9sLiRzZXRVbnRvdWNoZWQoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRTdWJtaXR0ZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gaXRzIGAkc3VibWl0dGVkYCBzdGF0ZS4gVGhpcyB3aWxsIGFsc28gc2V0IGAkc3VibWl0dGVkYCBvbiBhbGwgY2hpbGQgYW5kXG4gICAqIHBhcmVudCBmb3JtcyBvZiB0aGUgZm9ybS5cbiAgICovXG4gICRzZXRTdWJtaXR0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByb290Rm9ybSA9IHRoaXM7XG4gICAgd2hpbGUgKHJvb3RGb3JtLiQkcGFyZW50Rm9ybSAmJiAocm9vdEZvcm0uJCRwYXJlbnRGb3JtICE9PSBudWxsRm9ybUN0cmwpKSB7XG4gICAgICByb290Rm9ybSA9IHJvb3RGb3JtLiQkcGFyZW50Rm9ybTtcbiAgICB9XG4gICAgcm9vdEZvcm0uJCRzZXRTdWJtaXR0ZWQoKTtcbiAgfSxcblxuICAkJHNldFN1Ym1pdHRlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFNVQk1JVFRFRF9DTEFTUyk7XG4gICAgdGhpcy4kc3VibWl0dGVkID0gdHJ1ZTtcbiAgICBmb3JFYWNoKHRoaXMuJCRjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgaWYgKGNvbnRyb2wuJCRzZXRTdWJtaXR0ZWQpIHtcbiAgICAgICAgY29udHJvbC4kJHNldFN1Ym1pdHRlZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFZhbGlkaXR5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDaGFuZ2UgdGhlIHZhbGlkaXR5IHN0YXRlIG9mIHRoZSBmb3JtLCBhbmQgbm90aWZ5IHRoZSBwYXJlbnQgZm9ybSAoaWYgYW55KS5cbiAqXG4gKiBBcHBsaWNhdGlvbiBkZXZlbG9wZXJzIHdpbGwgcmFyZWx5IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS4gSXQgaXMgdXNlZCBpbnRlcm5hbGx5LCBieVxuICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZhbGlkaXR5IE5nTW9kZWxDb250cm9sbGVyLiRzZXRWYWxpZGl0eSgpfSwgdG8gcHJvcGFnYXRlIGFcbiAqIGNvbnRyb2wncyB2YWxpZGl0eSBzdGF0ZSB0byB0aGUgcGFyZW50IGBGb3JtQ29udHJvbGxlcmAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbGlkYXRpb25FcnJvcktleSBOYW1lIG9mIHRoZSB2YWxpZGF0b3IuIFRoZSBgdmFsaWRhdGlvbkVycm9yS2V5YCB3aWxsIGJlXG4gKiAgICAgICAgYXNzaWduZWQgdG8gZWl0aGVyIGAkZXJyb3JbdmFsaWRhdGlvbkVycm9yS2V5XWAgb3IgYCRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV1gIChmb3JcbiAqICAgICAgICB1bmZ1bGZpbGxlZCBgJGFzeW5jVmFsaWRhdG9yc2ApLCBzbyB0aGF0IGl0IGlzIGF2YWlsYWJsZSBmb3IgZGF0YS1iaW5kaW5nLiBUaGVcbiAqICAgICAgICBgdmFsaWRhdGlvbkVycm9yS2V5YCBzaG91bGQgYmUgaW4gY2FtZWxDYXNlIGFuZCB3aWxsIGdldCBjb252ZXJ0ZWQgaW50byBkYXNoLWNhc2UgZm9yXG4gKiAgICAgICAgY2xhc3MgbmFtZS4gRXhhbXBsZTogYG15RXJyb3JgIHdpbGwgcmVzdWx0IGluIGBuZy12YWxpZC1teS1lcnJvcmAgYW5kXG4gKiAgICAgICAgYG5nLWludmFsaWQtbXktZXJyb3JgIGNsYXNzZXMgYW5kIGNhbiBiZSBib3VuZCB0byBhcyBge3sgc29tZUZvcm0uJGVycm9yLm15RXJyb3IgfX1gLlxuICogQHBhcmFtIHtib29sZWFufSBpc1ZhbGlkIFdoZXRoZXIgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdmFsaWQgKHRydWUpLCBpbnZhbGlkIChmYWxzZSksIHBlbmRpbmdcbiAqICAgICAgICAodW5kZWZpbmVkKSwgIG9yIHNraXBwZWQgKG51bGwpLiBQZW5kaW5nIGlzIHVzZWQgZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYC5cbiAqICAgICAgICBTa2lwcGVkIGlzIHVzZWQgYnkgQW5ndWxhckpTIHdoZW4gdmFsaWRhdG9ycyBkbyBub3QgcnVuIGJlY2F1c2Ugb2YgcGFyc2UgZXJyb3JzIGFuZCB3aGVuXG4gKiAgICAgICAgYCRhc3luY1ZhbGlkYXRvcnNgIGRvIG5vdCBydW4gYmVjYXVzZSBhbnkgb2YgdGhlIGAkdmFsaWRhdG9yc2AgZmFpbGVkLlxuICogQHBhcmFtIHtOZ01vZGVsQ29udHJvbGxlciB8IEZvcm1Db250cm9sbGVyfSBjb250cm9sbGVyIC0gVGhlIGNvbnRyb2xsZXIgd2hvc2UgdmFsaWRpdHkgc3RhdGUgaXNcbiAqICAgICAgICB0cmlnZ2VyaW5nIHRoZSBjaGFuZ2UuXG4gKi9cbmFkZFNldFZhbGlkaXR5TWV0aG9kKHtcbiAgY2xheno6IEZvcm1Db250cm9sbGVyLFxuICBzZXQ6IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGNvbnRyb2xsZXIpIHtcbiAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgaWYgKCFsaXN0KSB7XG4gICAgICBvYmplY3RbcHJvcGVydHldID0gW2NvbnRyb2xsZXJdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaW5kZXggPSBsaXN0LmluZGV4T2YoY29udHJvbGxlcik7XG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIGxpc3QucHVzaChjb250cm9sbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHVuc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBjb250cm9sbGVyKSB7XG4gICAgdmFyIGxpc3QgPSBvYmplY3RbcHJvcGVydHldO1xuICAgIGlmICghbGlzdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhcnJheVJlbW92ZShsaXN0LCBjb250cm9sbGVyKTtcbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdGb3JtXG4gKiBAcmVzdHJpY3QgRUFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIZWxwZXIgZGlyZWN0aXZlIHRoYXQgbWFrZXMgaXQgcG9zc2libGUgdG8gY3JlYXRlIGNvbnRyb2wgZ3JvdXBzIGluc2lkZSBhXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOmZvcm0gYGZvcm1gfSBkaXJlY3RpdmUuXG4gKiBUaGVzZSBcImNoaWxkIGZvcm1zXCIgY2FuIGJlIHVzZWQsIGZvciBleGFtcGxlLCB0byBkZXRlcm1pbmUgdGhlIHZhbGlkaXR5IG9mIGEgc3ViLWdyb3VwIG9mXG4gKiBjb250cm9scy5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiAqKk5vdGUqKjogYG5nRm9ybWAgY2Fubm90IGJlIHVzZWQgYXMgYSByZXBsYWNlbWVudCBmb3IgYDxmb3JtPmAsIGJlY2F1c2UgaXQgbGFja3MgaXRzXG4gKiBbYnVpbHQtaW4gSFRNTCBmdW5jdGlvbmFsaXR5XShodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyN0aGUtZm9ybS1lbGVtZW50KS5cbiAqIFNwZWNpZmljYWxseSwgeW91IGNhbm5vdCBzdWJtaXQgYG5nRm9ybWAgbGlrZSBhIGA8Zm9ybT5gIHRhZy4gVGhhdCBtZWFucyxcbiAqIHlvdSBjYW5ub3Qgc2VuZCBkYXRhIHRvIHRoZSBzZXJ2ZXIgd2l0aCBgbmdGb3JtYCwgb3IgaW50ZWdyYXRlIGl0IHdpdGhcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgYG5nU3VibWl0YH0uXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nRm9ybXxuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIHB1Ymxpc2hlZCBpbnRvIHRoZSByZWxhdGVkIHNjb3BlLCB1bmRlciB0aGlzIG5hbWUuXG4gKlxuICovXG5cbiAvKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIGZvcm1cbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXJlY3RpdmUgdGhhdCBpbnN0YW50aWF0ZXNcbiAqIHtAbGluayBmb3JtLkZvcm1Db250cm9sbGVyIEZvcm1Db250cm9sbGVyfS5cbiAqXG4gKiBJZiB0aGUgYG5hbWVgIGF0dHJpYnV0ZSBpcyBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgaXMgcHVibGlzaGVkIG9udG8gdGhlIGN1cnJlbnQgc2NvcGUgdW5kZXJcbiAqIHRoaXMgbmFtZS5cbiAqXG4gKiAjIyBBbGlhczoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0Zvcm0gYG5nRm9ybWB9XG4gKlxuICogSW4gQW5ndWxhckpTLCBmb3JtcyBjYW4gYmUgbmVzdGVkLiBUaGlzIG1lYW5zIHRoYXQgdGhlIG91dGVyIGZvcm0gaXMgdmFsaWQgd2hlbiBhbGwgb2YgdGhlIGNoaWxkXG4gKiBmb3JtcyBhcmUgdmFsaWQgYXMgd2VsbC4gSG93ZXZlciwgYnJvd3NlcnMgZG8gbm90IGFsbG93IG5lc3Rpbmcgb2YgYDxmb3JtPmAgZWxlbWVudHMsIHNvXG4gKiBBbmd1bGFySlMgcHJvdmlkZXMgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdGb3JtIGBuZ0Zvcm1gfSBkaXJlY3RpdmUsIHdoaWNoIGJlaGF2ZXMgaWRlbnRpY2FsbHkgdG9cbiAqIGBmb3JtYCBidXQgY2FuIGJlIG5lc3RlZC4gTmVzdGVkIGZvcm1zIGNhbiBiZSB1c2VmdWwsIGZvciBleGFtcGxlLCBpZiB0aGUgdmFsaWRpdHkgb2YgYSBzdWItZ3JvdXBcbiAqIG9mIGNvbnRyb2xzIG5lZWRzIHRvIGJlIGRldGVybWluZWQuXG4gKlxuICogIyMgQ1NTIGNsYXNzZXNcbiAqICAtIGBuZy12YWxpZGAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIHZhbGlkLlxuICogIC0gYG5nLWludmFsaWRgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBpbnZhbGlkLlxuICogIC0gYG5nLXBlbmRpbmdgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBwZW5kaW5nLlxuICogIC0gYG5nLXByaXN0aW5lYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgcHJpc3RpbmUuXG4gKiAgLSBgbmctZGlydHlgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBkaXJ0eS5cbiAqICAtIGBuZy1zdWJtaXR0ZWRgIGlzIHNldCBpZiB0aGUgZm9ybSB3YXMgc3VibWl0dGVkLlxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0IG5nQW5pbWF0ZSBjYW4gZGV0ZWN0IGVhY2ggb2YgdGhlc2UgY2xhc3NlcyB3aGVuIGFkZGVkIGFuZCByZW1vdmVkLlxuICpcbiAqXG4gKiAjIyBTdWJtaXR0aW5nIGEgZm9ybSBhbmQgcHJldmVudGluZyB0aGUgZGVmYXVsdCBhY3Rpb25cbiAqXG4gKiBTaW5jZSB0aGUgcm9sZSBvZiBmb3JtcyBpbiBjbGllbnQtc2lkZSBBbmd1bGFySlMgYXBwbGljYXRpb25zIGlzIGRpZmZlcmVudCB0aGFuIGluIGNsYXNzaWNhbFxuICogcm91bmR0cmlwIGFwcHMsIGl0IGlzIGRlc2lyYWJsZSBmb3IgdGhlIGJyb3dzZXIgbm90IHRvIHRyYW5zbGF0ZSB0aGUgZm9ybSBzdWJtaXNzaW9uIGludG8gYSBmdWxsXG4gKiBwYWdlIHJlbG9hZCB0aGF0IHNlbmRzIHRoZSBkYXRhIHRvIHRoZSBzZXJ2ZXIuIEluc3RlYWQgc29tZSBqYXZhc2NyaXB0IGxvZ2ljIHNob3VsZCBiZSB0cmlnZ2VyZWRcbiAqIHRvIGhhbmRsZSB0aGUgZm9ybSBzdWJtaXNzaW9uIGluIGFuIGFwcGxpY2F0aW9uLXNwZWNpZmljIHdheS5cbiAqXG4gKiBGb3IgdGhpcyByZWFzb24sIEFuZ3VsYXJKUyBwcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gKGZvcm0gc3VibWlzc2lvbiB0byB0aGUgc2VydmVyKSB1bmxlc3MgdGhlXG4gKiBgPGZvcm0+YCBlbGVtZW50IGhhcyBhbiBgYWN0aW9uYCBhdHRyaWJ1dGUgc3BlY2lmaWVkLlxuICpcbiAqIFlvdSBjYW4gdXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHR3byB3YXlzIHRvIHNwZWNpZnkgd2hhdCBqYXZhc2NyaXB0IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIHdoZW5cbiAqIGEgZm9ybSBpcyBzdWJtaXR0ZWQ6XG4gKlxuICogLSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU3VibWl0IG5nU3VibWl0fSBkaXJlY3RpdmUgb24gdGhlIGZvcm0gZWxlbWVudFxuICogLSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja30gZGlyZWN0aXZlIG9uIHRoZSBmaXJzdFxuICAqICBidXR0b24gb3IgaW5wdXQgZmllbGQgb2YgdHlwZSBzdWJtaXQgKGlucHV0W3R5cGU9c3VibWl0XSlcbiAqXG4gKiBUbyBwcmV2ZW50IGRvdWJsZSBleGVjdXRpb24gb2YgdGhlIGhhbmRsZXIsIHVzZSBvbmx5IG9uZSBvZiB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1N1Ym1pdCBuZ1N1Ym1pdH1cbiAqIG9yIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSBkaXJlY3RpdmVzLlxuICogVGhpcyBpcyBiZWNhdXNlIG9mIHRoZSBmb2xsb3dpbmcgZm9ybSBzdWJtaXNzaW9uIHJ1bGVzIGluIHRoZSBIVE1MIHNwZWNpZmljYXRpb246XG4gKlxuICogLSBJZiBhIGZvcm0gaGFzIG9ubHkgb25lIGlucHV0IGZpZWxkIHRoZW4gaGl0dGluZyBlbnRlciBpbiB0aGlzIGZpZWxkIHRyaWdnZXJzIGZvcm0gc3VibWl0XG4gKiAoYG5nU3VibWl0YClcbiAqIC0gaWYgYSBmb3JtIGhhcyAyKyBpbnB1dCBmaWVsZHMgYW5kIG5vIGJ1dHRvbnMgb3IgaW5wdXRbdHlwZT1zdWJtaXRdIHRoZW4gaGl0dGluZyBlbnRlclxuICogZG9lc24ndCB0cmlnZ2VyIHN1Ym1pdFxuICogLSBpZiBhIGZvcm0gaGFzIG9uZSBvciBtb3JlIGlucHV0IGZpZWxkcyBhbmQgb25lIG9yIG1vcmUgYnV0dG9ucyBvciBpbnB1dFt0eXBlPXN1Ym1pdF0gdGhlblxuICogaGl0dGluZyBlbnRlciBpbiBhbnkgb2YgdGhlIGlucHV0IGZpZWxkcyB3aWxsIHRyaWdnZXIgdGhlIGNsaWNrIGhhbmRsZXIgb24gdGhlICpmaXJzdCogYnV0dG9uIG9yXG4gKiBpbnB1dFt0eXBlPXN1Ym1pdF0gKGBuZ0NsaWNrYCkgKmFuZCogYSBzdWJtaXQgaGFuZGxlciBvbiB0aGUgZW5jbG9zaW5nIGZvcm0gKGBuZ1N1Ym1pdGApXG4gKlxuICogQW55IHBlbmRpbmcgYG5nTW9kZWxPcHRpb25zYCBjaGFuZ2VzIHdpbGwgdGFrZSBwbGFjZSBpbW1lZGlhdGVseSB3aGVuIGFuIGVuY2xvc2luZyBmb3JtIGlzXG4gKiBzdWJtaXR0ZWQuIE5vdGUgdGhhdCBgbmdDbGlja2AgZXZlbnRzIHdpbGwgb2NjdXIgYmVmb3JlIHRoZSBtb2RlbCBpcyB1cGRhdGVkLiBVc2UgYG5nU3VibWl0YFxuICogdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHVwZGF0ZWQgbW9kZWwuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIEFuaW1hdGlvbnMgaW4gbmdGb3JtIGFyZSB0cmlnZ2VyZWQgd2hlbiBhbnkgb2YgdGhlIGFzc29jaWF0ZWQgQ1NTIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkLlxuICogVGhlc2UgY2xhc3NlcyBhcmU6IGAubmctcHJpc3RpbmVgLCBgLm5nLWRpcnR5YCwgYC5uZy1pbnZhbGlkYCBhbmQgYC5uZy12YWxpZGAgYXMgd2VsbCBhcyBhbnlcbiAqIG90aGVyIHZhbGlkYXRpb25zIHRoYXQgYXJlIHBlcmZvcm1lZCB3aXRoaW4gdGhlIGZvcm0uIEFuaW1hdGlvbnMgaW4gbmdGb3JtIGFyZSBzaW1pbGFyIHRvIGhvd1xuICogdGhleSB3b3JrIGluIG5nQ2xhc3MgYW5kIGFuaW1hdGlvbnMgY2FuIGJlIGhvb2tlZCBpbnRvIHVzaW5nIENTUyB0cmFuc2l0aW9ucywga2V5ZnJhbWVzIGFzIHdlbGxcbiAqIGFzIEpTIGFuaW1hdGlvbnMuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGEgc2ltcGxlIHdheSB0byB1dGlsaXplIENTUyB0cmFuc2l0aW9ucyB0byBzdHlsZSBhIGZvcm0gZWxlbWVudFxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcbiAqXG4gKiA8cHJlPlxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXG4gKiAvL2FkdmFuY2VkIGFuaW1hdGlvbnNcbiAqIC5teS1mb3JtIHtcbiAqICAgdHJhbnNpdGlvbjowLjVzIGxpbmVhciBhbGw7XG4gKiAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICogfVxuICogLm15LWZvcm0ubmctaW52YWxpZCB7XG4gKiAgIGJhY2tncm91bmQ6IHJlZDtcbiAqICAgY29sb3I6d2hpdGU7XG4gKiB9XG4gKiA8L3ByZT5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1mb3JtXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgZml4QmFzZT1cInRydWVcIiBtb2R1bGU9XCJmb3JtRXhhbXBsZVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2Zvcm1FeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdGb3JtQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnVzZXJUeXBlID0gJ2d1ZXN0JztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxzdHlsZT5cbiAgICAgICAgLm15LWZvcm0ge1xuICAgICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIC5teS1mb3JtLm5nLWludmFsaWQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHJlZDtcbiAgICAgICAgfVxuICAgICAgIDwvc3R5bGU+XG4gICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJGb3JtQ29udHJvbGxlclwiIGNsYXNzPVwibXktZm9ybVwiPlxuICAgICAgICAgdXNlclR5cGU6IDxpbnB1dCBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInVzZXJUeXBlXCIgcmVxdWlyZWQ+XG4gICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5SZXF1aXJlZCE8L3NwYW4+PGJyPlxuICAgICAgICAgPGNvZGU+dXNlclR5cGUgPSB7e3VzZXJUeXBlfX08L2NvZGU+PGJyPlxuICAgICAgICAgPGNvZGU+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAgICAgICAgIDxjb2RlPm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvY29kZT48YnI+XG4gICAgICAgICA8Y29kZT5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L2NvZGU+PGJyPlxuICAgICAgICAgPGNvZGU+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L2NvZGU+PGJyPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB1c2VyVHlwZSA9IGVsZW1lbnQoYnkuYmluZGluZygndXNlclR5cGUnKSk7XG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXJUeXBlLmdldFRleHQoKSkudG9Db250YWluKCdndWVzdCcpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgdXNlclR5cGUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VzZXJUeXBlJykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgdXNlcklucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlclR5cGUnKSk7XG5cbiAgICAgICAgICB1c2VySW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VySW5wdXQuc2VuZEtleXMoJycpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXJUeXBlLmdldFRleHQoKSkudG9FcXVhbCgndXNlclR5cGUgPScpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBOYW1lIG9mIHRoZSBmb3JtLiBJZiBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgd2lsbCBiZSBwdWJsaXNoZWQgaW50b1xuICogICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQgc2NvcGUsIHVuZGVyIHRoaXMgbmFtZS5cbiAqL1xudmFyIGZvcm1EaXJlY3RpdmVGYWN0b3J5ID0gZnVuY3Rpb24oaXNOZ0Zvcm0pIHtcbiAgcmV0dXJuIFsnJHRpbWVvdXQnLCAnJHBhcnNlJywgZnVuY3Rpb24oJHRpbWVvdXQsICRwYXJzZSkge1xuICAgIHZhciBmb3JtRGlyZWN0aXZlID0ge1xuICAgICAgbmFtZTogJ2Zvcm0nLFxuICAgICAgcmVzdHJpY3Q6IGlzTmdGb3JtID8gJ0VBQycgOiAnRScsXG4gICAgICByZXF1aXJlOiBbJ2Zvcm0nLCAnXl4/Zm9ybSddLCAvL2ZpcnN0IGlzIHRoZSBmb3JtJ3Mgb3duIGN0cmwsIHNlY29uZCBpcyBhbiBvcHRpb25hbCBwYXJlbnQgZm9ybVxuICAgICAgY29udHJvbGxlcjogRm9ybUNvbnRyb2xsZXIsXG4gICAgICBjb21waWxlOiBmdW5jdGlvbiBuZ0Zvcm1Db21waWxlKGZvcm1FbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIC8vIFNldHVwIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbnRyb2xcbiAgICAgICAgZm9ybUVsZW1lbnQuYWRkQ2xhc3MoUFJJU1RJTkVfQ0xBU1MpLmFkZENsYXNzKFZBTElEX0NMQVNTKTtcblxuICAgICAgICB2YXIgbmFtZUF0dHIgPSBhdHRyLm5hbWUgPyAnbmFtZScgOiAoaXNOZ0Zvcm0gJiYgYXR0ci5uZ0Zvcm0gPyAnbmdGb3JtJyA6IGZhbHNlKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHByZTogZnVuY3Rpb24gbmdGb3JtUHJlTGluayhzY29wZSwgZm9ybUVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG4gICAgICAgICAgICB2YXIgY29udHJvbGxlciA9IGN0cmxzWzBdO1xuXG4gICAgICAgICAgICAvLyBpZiBgYWN0aW9uYCBhdHRyIGlzIG5vdCBwcmVzZW50IG9uIHRoZSBmb3JtLCBwcmV2ZW50IHRoZSBkZWZhdWx0IGFjdGlvbiAoc3VibWlzc2lvbilcbiAgICAgICAgICAgIGlmICghKCdhY3Rpb24nIGluIGF0dHIpKSB7XG4gICAgICAgICAgICAgIC8vIHdlIGNhbid0IHVzZSBqcSBldmVudHMgYmVjYXVzZSBpZiBhIGZvcm0gaXMgZGVzdHJveWVkIGR1cmluZyBzdWJtaXNzaW9uIHRoZSBkZWZhdWx0XG4gICAgICAgICAgICAgIC8vIGFjdGlvbiBpcyBub3QgcHJldmVudGVkLiBzZWUgIzEyMzhcbiAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgLy8gSUUgOSBpcyBub3QgYWZmZWN0ZWQgYmVjYXVzZSBpdCBkb2Vzbid0IGZpcmUgYSBzdWJtaXQgZXZlbnQgYW5kIHRyeSB0byBkbyBhIGZ1bGxcbiAgICAgICAgICAgICAgLy8gcGFnZSByZWxvYWQgaWYgdGhlIGZvcm0gd2FzIGRlc3Ryb3llZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBmb3JtIHZpYSBhIGNsaWNrIGhhbmRsZXJcbiAgICAgICAgICAgICAgLy8gb24gYSBidXR0b24gaW4gdGhlIGZvcm0uIExvb2tzIGxpa2UgYW4gSUU5IHNwZWNpZmljIGJ1Zy5cbiAgICAgICAgICAgICAgdmFyIGhhbmRsZUZvcm1TdWJtaXNzaW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFN1Ym1pdHRlZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBmb3JtRWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVGb3JtU3VibWlzc2lvbik7XG5cbiAgICAgICAgICAgICAgLy8gdW5yZWdpc3RlciB0aGUgcHJldmVudERlZmF1bHQgbGlzdGVuZXIgc28gdGhhdCB3ZSBkb24ndCBub3QgbGVhayBtZW1vcnkgYnV0IGluIGFcbiAgICAgICAgICAgICAgLy8gd2F5IHRoYXQgd2lsbCBhY2hpZXZlIHRoZSBwcmV2ZW50aW9uIG9mIHRoZSBkZWZhdWx0IGFjdGlvbi5cbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBmb3JtRWxlbWVudFswXS5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVGb3JtU3VibWlzc2lvbik7XG4gICAgICAgICAgICAgICAgfSwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhcmVudEZvcm1DdHJsID0gY3RybHNbMV0gfHwgY29udHJvbGxlci4kJHBhcmVudEZvcm07XG4gICAgICAgICAgICBwYXJlbnRGb3JtQ3RybC4kYWRkQ29udHJvbChjb250cm9sbGVyKTtcblxuICAgICAgICAgICAgdmFyIHNldHRlciA9IG5hbWVBdHRyID8gZ2V0U2V0dGVyKGNvbnRyb2xsZXIuJG5hbWUpIDogbm9vcDtcblxuICAgICAgICAgICAgaWYgKG5hbWVBdHRyKSB7XG4gICAgICAgICAgICAgIHNldHRlcihzY29wZSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICAgIGF0dHIuJG9ic2VydmUobmFtZUF0dHIsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIuJG5hbWUgPT09IG5ld1ZhbHVlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJCRwYXJlbnRGb3JtLiQkcmVuYW1lQ29udHJvbChjb250cm9sbGVyLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgc2V0dGVyID0gZ2V0U2V0dGVyKGNvbnRyb2xsZXIuJG5hbWUpO1xuICAgICAgICAgICAgICAgIHNldHRlcihzY29wZSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9ybUVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuJCRwYXJlbnRGb3JtLiRyZW1vdmVDb250cm9sKGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgICBzZXR0ZXIoc2NvcGUsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgIGV4dGVuZChjb250cm9sbGVyLCBudWxsRm9ybUN0cmwpOyAvL3N0b3AgcHJvcGFnYXRpbmcgY2hpbGQgZGVzdHJ1Y3Rpb24gaGFuZGxlcnMgdXB3YXJkc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZm9ybURpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGdldFNldHRlcihleHByZXNzaW9uKSB7XG4gICAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHtcbiAgICAgICAgLy9jcmVhdGUgYW4gYXNzaWduYWJsZSBleHByZXNzaW9uLCBzbyBmb3JtcyB3aXRoIGFuIGVtcHR5IG5hbWUgY2FuIGJlIHJlbmFtZWQgbGF0ZXJcbiAgICAgICAgcmV0dXJuICRwYXJzZSgndGhpc1tcIlwiXScpLmFzc2lnbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiAkcGFyc2UoZXhwcmVzc2lvbikuYXNzaWduIHx8IG5vb3A7XG4gICAgfVxuICB9XTtcbn07XG5cbnZhciBmb3JtRGlyZWN0aXZlID0gZm9ybURpcmVjdGl2ZUZhY3RvcnkoKTtcbnZhciBuZ0Zvcm1EaXJlY3RpdmUgPSBmb3JtRGlyZWN0aXZlRmFjdG9yeSh0cnVlKTtcblxuXG5cbi8vIGhlbHBlciBtZXRob2RzXG5mdW5jdGlvbiBzZXR1cFZhbGlkaXR5KGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLiQkY2xhc3NDYWNoZSA9IHt9O1xuICBpbnN0YW5jZS4kJGNsYXNzQ2FjaGVbSU5WQUxJRF9DTEFTU10gPSAhKGluc3RhbmNlLiQkY2xhc3NDYWNoZVtWQUxJRF9DTEFTU10gPSBpbnN0YW5jZS4kJGVsZW1lbnQuaGFzQ2xhc3MoVkFMSURfQ0xBU1MpKTtcbn1cbmZ1bmN0aW9uIGFkZFNldFZhbGlkaXR5TWV0aG9kKGNvbnRleHQpIHtcbiAgdmFyIGNsYXp6ID0gY29udGV4dC5jbGF6eixcbiAgICAgIHNldCA9IGNvbnRleHQuc2V0LFxuICAgICAgdW5zZXQgPSBjb250ZXh0LnVuc2V0O1xuXG4gIGNsYXp6LnByb3RvdHlwZS4kc2V0VmFsaWRpdHkgPSBmdW5jdGlvbih2YWxpZGF0aW9uRXJyb3JLZXksIHN0YXRlLCBjb250cm9sbGVyKSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHN0YXRlKSkge1xuICAgICAgY3JlYXRlQW5kU2V0KHRoaXMsICckcGVuZGluZycsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVuc2V0QW5kQ2xlYW51cCh0aGlzLCAnJHBlbmRpbmcnLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgIH1cbiAgICBpZiAoIWlzQm9vbGVhbihzdGF0ZSkpIHtcbiAgICAgIHVuc2V0KHRoaXMuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgdW5zZXQodGhpcy4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICB1bnNldCh0aGlzLiRlcnJvciwgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICAgICAgc2V0KHRoaXMuJCRzdWNjZXNzLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0KHRoaXMuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgICB1bnNldCh0aGlzLiQkc3VjY2VzcywgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuJHBlbmRpbmcpIHtcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKHRoaXMsIFBFTkRJTkdfQ0xBU1MsIHRydWUpO1xuICAgICAgdGhpcy4kdmFsaWQgPSB0aGlzLiRpbnZhbGlkID0gdW5kZWZpbmVkO1xuICAgICAgdG9nZ2xlVmFsaWRhdGlvbkNzcyh0aGlzLCAnJywgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKHRoaXMsIFBFTkRJTkdfQ0xBU1MsIGZhbHNlKTtcbiAgICAgIHRoaXMuJHZhbGlkID0gaXNPYmplY3RFbXB0eSh0aGlzLiRlcnJvcik7XG4gICAgICB0aGlzLiRpbnZhbGlkID0gIXRoaXMuJHZhbGlkO1xuICAgICAgdG9nZ2xlVmFsaWRhdGlvbkNzcyh0aGlzLCAnJywgdGhpcy4kdmFsaWQpO1xuICAgIH1cblxuICAgIC8vIHJlLXJlYWQgdGhlIHN0YXRlIGFzIHRoZSBzZXQvdW5zZXQgbWV0aG9kcyBjb3VsZCBoYXZlXG4gICAgLy8gY29tYmluZWQgc3RhdGUgaW4gdGhpcy4kZXJyb3JbdmFsaWRhdGlvbkVycm9yXSAodXNlZCBmb3IgZm9ybXMpLFxuICAgIC8vIHdoZXJlIHNldHRpbmcvdW5zZXR0aW5nIG9ubHkgaW5jcmVtZW50cy9kZWNyZW1lbnRzIHRoZSB2YWx1ZSxcbiAgICAvLyBhbmQgZG9lcyBub3QgcmVwbGFjZSBpdC5cbiAgICB2YXIgY29tYmluZWRTdGF0ZTtcbiAgICBpZiAodGhpcy4kcGVuZGluZyAmJiB0aGlzLiRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLiRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldKSB7XG4gICAgICBjb21iaW5lZFN0YXRlID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh0aGlzLiQkc3VjY2Vzc1t2YWxpZGF0aW9uRXJyb3JLZXldKSB7XG4gICAgICBjb21iaW5lZFN0YXRlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29tYmluZWRTdGF0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgdG9nZ2xlVmFsaWRhdGlvbkNzcyh0aGlzLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbWJpbmVkU3RhdGUpO1xuICAgIHRoaXMuJCRwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eSh2YWxpZGF0aW9uRXJyb3JLZXksIGNvbWJpbmVkU3RhdGUsIHRoaXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUFuZFNldChjdHJsLCBuYW1lLCB2YWx1ZSwgY29udHJvbGxlcikge1xuICAgIGlmICghY3RybFtuYW1lXSkge1xuICAgICAgY3RybFtuYW1lXSA9IHt9O1xuICAgIH1cbiAgICBzZXQoY3RybFtuYW1lXSwgdmFsdWUsIGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5zZXRBbmRDbGVhbnVwKGN0cmwsIG5hbWUsIHZhbHVlLCBjb250cm9sbGVyKSB7XG4gICAgaWYgKGN0cmxbbmFtZV0pIHtcbiAgICAgIHVuc2V0KGN0cmxbbmFtZV0sIHZhbHVlLCBjb250cm9sbGVyKTtcbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0RW1wdHkoY3RybFtuYW1lXSkpIHtcbiAgICAgIGN0cmxbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FjaGVkVG9nZ2xlQ2xhc3MoY3RybCwgY2xhc3NOYW1lLCBzd2l0Y2hWYWx1ZSkge1xuICAgIGlmIChzd2l0Y2hWYWx1ZSAmJiAhY3RybC4kJGNsYXNzQ2FjaGVbY2xhc3NOYW1lXSkge1xuICAgICAgY3RybC4kJGFuaW1hdGUuYWRkQ2xhc3MoY3RybC4kJGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICBjdHJsLiQkY2xhc3NDYWNoZVtjbGFzc05hbWVdID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCFzd2l0Y2hWYWx1ZSAmJiBjdHJsLiQkY2xhc3NDYWNoZVtjbGFzc05hbWVdKSB7XG4gICAgICBjdHJsLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyhjdHJsLiQkZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgIGN0cmwuJCRjbGFzc0NhY2hlW2NsYXNzTmFtZV0gPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGVWYWxpZGF0aW9uQ3NzKGN0cmwsIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCkge1xuICAgIHZhbGlkYXRpb25FcnJvcktleSA9IHZhbGlkYXRpb25FcnJvcktleSA/ICctJyArIHNuYWtlX2Nhc2UodmFsaWRhdGlvbkVycm9yS2V5LCAnLScpIDogJyc7XG5cbiAgICBjYWNoZWRUb2dnbGVDbGFzcyhjdHJsLCBWQUxJRF9DTEFTUyArIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCA9PT0gdHJ1ZSk7XG4gICAgY2FjaGVkVG9nZ2xlQ2xhc3MoY3RybCwgSU5WQUxJRF9DTEFTUyArIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCA9PT0gZmFsc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0RW1wdHkob2JqKSB7XG4gIGlmIChvYmopIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKiBnbG9iYWxcbiAgVkFMSURfQ0xBU1M6IGZhbHNlLFxuICBJTlZBTElEX0NMQVNTOiBmYWxzZSxcbiAgUFJJU1RJTkVfQ0xBU1M6IGZhbHNlLFxuICBESVJUWV9DTEFTUzogZmFsc2UsXG4gIG5nTW9kZWxNaW5FcnI6IGZhbHNlXG4qL1xuXG4vLyBSZWdleCBjb2RlIHdhcyBpbml0aWFsbHkgb2J0YWluZWQgZnJvbSBTTyBwcmlvciB0byBtb2RpZmljYXRpb246IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMxNDMwNzAvamF2YXNjcmlwdC1yZWdleC1pc28tZGF0ZXRpbWUjYW5zd2VyLTMxNDMyMzFcbnZhciBJU09fREFURV9SRUdFWFAgPSAvXlxcZHs0LH0tWzAxXVxcZC1bMC0zXVxcZFRbMC0yXVxcZDpbMC01XVxcZDpbMC01XVxcZFxcLlxcZCsoPzpbKy1dWzAtMl1cXGQ6WzAtNV1cXGR8WikkLztcbi8vIFNlZSB2YWxpZCBVUkxzIGluIFJGQzM5ODcgKGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODcpXG4vLyBOb3RlOiBXZSBhcmUgYmVpbmcgbW9yZSBsZW5pZW50LCBiZWNhdXNlIGJyb3dzZXJzIGFyZSB0b28uXG4vLyAgIDEuIFNjaGVtZVxuLy8gICAyLiBTbGFzaGVzXG4vLyAgIDMuIFVzZXJuYW1lXG4vLyAgIDQuIFBhc3N3b3JkXG4vLyAgIDUuIEhvc3RuYW1lXG4vLyAgIDYuIFBvcnRcbi8vICAgNy4gUGF0aFxuLy8gICA4LiBRdWVyeVxuLy8gICA5LiBGcmFnbWVudFxuLy8gICAgICAgICAgICAgICAgIDExMTExMTExMTExMTExMTEgMjIyICAgMzMzMzMzICAgIDQ0NDQ0ICAgICAgICA1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NSAgICAgNjY2ICAgICA3Nzc3Nzc3NyAgICAgODg4ODg4OCAgICAgOTk5XG52YXIgVVJMX1JFR0VYUCA9IC9eW2Etel1bYS16XFxkListXSo6XFwvKig/OlteOkBdKyg/OjpbXkBdKyk/QCk/KD86W15cXHM6Lz8jXSt8XFxbW2EtZlxcZDpdK10pKD86OlxcZCspPyg/OlxcL1tePyNdKik/KD86XFw/W14jXSopPyg/OiMuKik/JC9pO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbnZhciBFTUFJTF9SRUdFWFAgPSAvXig/PS57MSwyNTR9JCkoPz0uezEsNjR9QClbLSEjJCUmJyorLzAtOT0/QS1aXl9gYS16e3x9fl0rKFxcLlstISMkJSYnKisvMC05PT9BLVpeX2BhLXp7fH1+XSspKkBbQS1aYS16MC05XShbQS1aYS16MC05LV17MCw2MX1bQS1aYS16MC05XSk/KFxcLltBLVphLXowLTldKFtBLVphLXowLTktXXswLDYxfVtBLVphLXowLTldKT8pKiQvO1xudmFyIE5VTUJFUl9SRUdFWFAgPSAvXlxccyooLXxcXCspPyhcXGQrfChcXGQqKFxcLlxcZCopKSkoW2VFXVsrLV0/XFxkKyk/XFxzKiQvO1xudmFyIERBVEVfUkVHRVhQID0gL14oXFxkezQsfSktKFxcZHsyfSktKFxcZHsyfSkkLztcbnZhciBEQVRFVElNRUxPQ0FMX1JFR0VYUCA9IC9eKFxcZHs0LH0pLShcXGRcXGQpLShcXGRcXGQpVChcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvO1xudmFyIFdFRUtfUkVHRVhQID0gL14oXFxkezQsfSktVyhcXGRcXGQpJC87XG52YXIgTU9OVEhfUkVHRVhQID0gL14oXFxkezQsfSktKFxcZFxcZCkkLztcbnZhciBUSU1FX1JFR0VYUCA9IC9eKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC87XG5cbnZhciBQQVJUSUFMX1ZBTElEQVRJT05fRVZFTlRTID0gJ2tleWRvd24gd2hlZWwgbW91c2Vkb3duJztcbnZhciBQQVJUSUFMX1ZBTElEQVRJT05fVFlQRVMgPSBjcmVhdGVNYXAoKTtcbmZvckVhY2goJ2RhdGUsZGF0ZXRpbWUtbG9jYWwsbW9udGgsdGltZSx3ZWVrJy5zcGxpdCgnLCcpLCBmdW5jdGlvbih0eXBlKSB7XG4gIFBBUlRJQUxfVkFMSURBVElPTl9UWVBFU1t0eXBlXSA9IHRydWU7XG59KTtcblxudmFyIGlucHV0VHlwZSA9IHtcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3RleHRdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTdGFuZGFyZCBIVE1MIHRleHQgaW5wdXQgd2l0aCBBbmd1bGFySlMgZGF0YSBiaW5kaW5nLCBpbmhlcml0ZWQgYnkgbW9zdCBvZiB0aGUgYGlucHV0YCBlbGVtZW50cy5cbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gICAqICAgIG1pbmxlbmd0aC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxuICAgKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2ZcbiAgICogICAgYW55IGxlbmd0aC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBwYXR0ZXJuIFNpbWlsYXIgdG8gYG5nUGF0dGVybmAgZXhjZXB0IHRoYXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBpcyB0aGUgYWN0dWFsIHN0cmluZ1xuICAgKiAgICB0aGF0IGNvbnRhaW5zIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gYm9keSB0aGF0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgcmVndWxhciBleHByZXNzaW9uXG4gICAqICAgIGFzIGluIHRoZSBuZ1BhdHRlcm4gZGlyZWN0aXZlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gICAqICAgIGRvZXMgbm90IG1hdGNoIGEgUmVnRXhwIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXJKUyBleHByZXNzaW9uIGdpdmVuIGluIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QsIHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHBcbiAgICogICAgYWZ0ZXIgd3JhcHBpbmcgaXQgaW4gYF5gIGFuZCBgJGAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG9cbiAgICogICAgYG5ldyBSZWdFeHAoJ15hYmMkJylgLjxiciAvPlxuICAgKiAgICAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICAgKiAgICBzdGFydCBhdCB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgc2VhcmNoJ3MgbWF0Y2gsIHRodXMgbm90IHRha2luZyB0aGUgd2hvbGUgaW5wdXQgdmFsdWUgaW50b1xuICAgKiAgICBhY2NvdW50LlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFySlMgd2lsbCBub3QgYXV0b21hdGljYWxseSB0cmltIHRoZSBpbnB1dC5cbiAgICogICAgVGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZCBmb3IgaW5wdXRbdHlwZT1wYXNzd29yZF0gY29udHJvbHMsIHdoaWNoIHdpbGwgbmV2ZXIgdHJpbSB0aGVcbiAgICogICAgaW5wdXQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwidGV4dC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ0ZXh0SW5wdXRFeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndGV4dElucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgICAgICAgdGV4dDogJ2d1ZXN0JyxcbiAgICAgICAgICAgICAgICAgd29yZDogL15cXHMqXFx3KlxccyokL1xuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICB9XSk7XG4gICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGxhYmVsPlNpbmdsZSB3b3JkOlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS50ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgbmctcGF0dGVybj1cImV4YW1wbGUud29yZFwiIHJlcXVpcmVkIG5nLXRyaW09XCJmYWxzZVwiPlxuICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5wYXR0ZXJuXCI+XG4gICAgICAgICAgICAgICBTaW5nbGUgd29yZCBvbmx5ITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDxjb2RlPnRleHQgPSB7e2V4YW1wbGUudGV4dH19PC9jb2RlPjxici8+XG4gICAgICAgICAgIDxjb2RlPm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvY29kZT48YnIvPlxuICAgICAgICAgICA8Y29kZT5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgPGNvZGU+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC9jb2RlPjxici8+XG4gICAgICAgICAgIDxjb2RlPm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC9jb2RlPjxici8+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgICB2YXIgdGV4dCA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdleGFtcGxlLnRleHQnKSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9Db250YWluKCdndWVzdCcpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9FcXVhbCgndGV4dCA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbXVsdGkgd29yZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCdoZWxsbyB3b3JsZCcpO1xuXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd0ZXh0JzogdGV4dElucHV0VHlwZSxcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBpbnB1dFxuICAgICAqIEBuYW1lIGlucHV0W2RhdGVdXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBJbnB1dCB3aXRoIGRhdGUgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XG4gICAgICogdGhlIEhUTUw1IGRhdGUgaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXG4gICAgICogZGF0ZSBmb3JtYXQgKHl5eXktTU0tZGQpLCBmb3IgZXhhbXBsZTogYDIwMDktMDEtMDZgLiBTaW5jZSBtYW55XG4gICAgICogbW9kZXJuIGJyb3dzZXJzIGRvIG5vdCB5ZXQgc3VwcG9ydCB0aGlzIGlucHV0IHR5cGUsIGl0IGlzIGltcG9ydGFudCB0byBwcm92aWRlIGN1ZXMgdG8gdXNlcnMgb24gdGhlXG4gICAgICogZXhwZWN0ZWQgaW5wdXQgZm9ybWF0IHZpYSBhIHBsYWNlaG9sZGVyIG9yIGxhYmVsLlxuICAgICAqXG4gICAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlIGFcbiAgICAgKiAgIHZhbGlkIElTTyBkYXRlIHN0cmluZyAoeXl5eS1NTS1kZCkuIFlvdSBjYW4gYWxzbyB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhpcyBhdHRyaWJ1dGVcbiAgICAgKiAgIChlLmcuIGBtaW49XCJ7e21pbkRhdGUgfCBkYXRlOid5eXl5LU1NLWRkJ319XCJgKS4gTm90ZSB0aGF0IGBtaW5gIHdpbGwgYWxzbyBhZGQgbmF0aXZlIEhUTUw1XG4gICAgICogICBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcbiAgICAgKiAgIGEgdmFsaWQgSVNPIGRhdGUgc3RyaW5nICh5eXl5LU1NLWRkKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAqICAgKGUuZy4gYG1heD1cInt7bWF4RGF0ZSB8IGRhdGU6J3l5eXktTU0tZGQnfX1cImApLiBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZCBuYXRpdmUgSFRNTDVcbiAgICAgKiAgIGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gZGF0ZSBzdHJpbmdcbiAgICAgKiAgIHRoZSBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHsoZGF0ZXxzdHJpbmcpPX0gbmdNYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvIHRoZSBEYXRlIC8gSVNPIGRhdGUgc3RyaW5nXG4gICAgICogICB0aGUgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgIDxleGFtcGxlIG5hbWU9XCJkYXRlLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImRhdGVJbnB1dEV4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkYXRlSW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMjAxMywgOSwgMjIpXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJleGFtcGxlSW5wdXRcIj5QaWNrIGEgZGF0ZSBpbiAyMDEzOjwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInl5eXktTU0tZGRcIiBtaW49XCIyMDEzLTAxLTAxXCIgbWF4PVwiMjAxMy0xMi0zMVwiIHJlcXVpcmVkIC8+XG4gICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5kYXRlXCI+XG4gICAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRcIn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgPC9mb3JtPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkXCInKSk7XG4gICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcblxuICAgICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cbiAgICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcbiAgICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy0xMC0yMicpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRJbnB1dCgnMjAxNS0wMS0wMScpO1xuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICAgICAqL1xuICAnZGF0ZSc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ2RhdGUnLCBEQVRFX1JFR0VYUCxcbiAgICAgICAgIGNyZWF0ZURhdGVQYXJzZXIoREFURV9SRUdFWFAsIFsneXl5eScsICdNTScsICdkZCddKSxcbiAgICAgICAgICd5eXl5LU1NLWRkJyksXG5cbiAgIC8qKlxuICAgICogQG5nZG9jIGlucHV0XG4gICAgKiBAbmFtZSBpbnB1dFtkYXRldGltZS1sb2NhbF1cbiAgICAqXG4gICAgKiBAZGVzY3JpcHRpb25cbiAgICAqIElucHV0IHdpdGggZGF0ZXRpbWUgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XG4gICAgKiB0aGUgSFRNTDUgZGF0ZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXG4gICAgKiBsb2NhbCBkYXRldGltZSBmb3JtYXQgKHl5eXktTU0tZGRUSEg6bW06c3MpLCBmb3IgZXhhbXBsZTogYDIwMTAtMTItMjhUMTQ6NTc6MDBgLlxuICAgICpcbiAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhckpTIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXG4gICAgKlxuICAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xuICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxuICAgICpcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxuICAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gZGF0ZXRpbWUgZm9ybWF0ICh5eXl5LU1NLWRkVEhIOm1tOnNzKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uXG4gICAgKiAgIGluc2lkZSB0aGlzIGF0dHJpYnV0ZSAoZS5nLiBgbWluPVwie3ttaW5EYXRldGltZUxvY2FsIHwgZGF0ZToneXl5eS1NTS1kZFRISDptbTpzcyd9fVwiYCkuXG4gICAgKiAgIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyBkYXRldGltZSBmb3JtYXQgKHl5eXktTU0tZGRUSEg6bW06c3MpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb25cbiAgICAqICAgaW5zaWRlIHRoaXMgYXR0cmlidXRlIChlLmcuIGBtYXg9XCJ7e21heERhdGV0aW1lTG9jYWwgfCBkYXRlOid5eXl5LU1NLWRkVEhIOm1tOnNzJ319XCJgKS5cbiAgICAqICAgTm90ZSB0aGF0IGBtYXhgIHdpbGwgYWxzbyBhZGQgbmF0aXZlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IHRvIHRoZSBEYXRlIC8gSVNPIGRhdGV0aW1lIHN0cmluZ1xuICAgICogICB0aGUgYG5nTWluYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1pbmAgYXR0cmlidXRlLlxuICAgICogQHBhcmFtIHsoZGF0ZXxzdHJpbmcpPX0gbmdNYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgdG8gdGhlIERhdGUgLyBJU08gZGF0ZXRpbWUgc3RyaW5nXG4gICAgKiAgIHRoZSBgbmdNYXhgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWF4YCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgICpcbiAgICAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cImRhdGV0aW1lbG9jYWwtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiZGF0ZUV4YW1wbGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPHNjcmlwdD5cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2RhdGVFeGFtcGxlJywgW10pXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMjAxMCwgMTEsIDI4LCAxNCwgNTcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1dKTtcbiAgICAgIDwvc2NyaXB0PlxuICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgICA8bGFiZWwgZm9yPVwiZXhhbXBsZUlucHV0XCI+UGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOjwvbGFiZWw+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZXRpbWUtbG9jYWxcIiBpZD1cImV4YW1wbGVJbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cInl5eXktTU0tZGRUSEg6bW06c3NcIiBtaW49XCIyMDAxLTAxLTAxVDAwOjAwOjAwXCIgbWF4PVwiMjAxMy0xMi0zMVQwMDowMDowMFwiIHJlcXVpcmVkIC8+XG4gICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZGF0ZXRpbWVsb2NhbFwiPlxuICAgICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFRISDptbTpzc1wifX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgIDwvZm9ybT5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCInKSk7XG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMC0xMi0yOFQxNDo1NzowMCcpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcnKTtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnMjAxNS0wMS0wMVQyMzo1OTowMCcpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAgICAqL1xuICAnZGF0ZXRpbWUtbG9jYWwnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCdkYXRldGltZWxvY2FsJywgREFURVRJTUVMT0NBTF9SRUdFWFAsXG4gICAgICBjcmVhdGVEYXRlUGFyc2VyKERBVEVUSU1FTE9DQUxfUkVHRVhQLCBbJ3l5eXknLCAnTU0nLCAnZGQnLCAnSEgnLCAnbW0nLCAnc3MnLCAnc3NzJ10pLFxuICAgICAgJ3l5eXktTU0tZGRUSEg6bW06c3Muc3NzJyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBpbnB1dFxuICAgKiBAbmFtZSBpbnB1dFt0aW1lXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSW5wdXQgd2l0aCB0aW1lIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxuICAgKiB0aGUgSFRNTDUgdGltZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXG4gICAqIGxvY2FsIHRpbWUgZm9ybWF0IChISDptbTpzcyksIGZvciBleGFtcGxlOiBgMTQ6NTc6MDBgLiBNb2RlbCBtdXN0IGJlIGEgRGF0ZSBvYmplY3QuIFRoaXMgYmluZGluZyB3aWxsIGFsd2F5cyBvdXRwdXQgYVxuICAgKiBEYXRlIG9iamVjdCB0byB0aGUgbW9kZWwgb2YgSmFudWFyeSAxLCAxOTcwLCBvciBsb2NhbCBkYXRlIGBuZXcgRGF0ZSgxOTcwLCAwLCAxLCBISCwgbW0sIHNzKWAuXG4gICAqXG4gICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhckpTIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICpcbiAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xuICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cbiAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gdGltZSBmb3JtYXQgKEhIOm1tOnNzKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzXG4gICAqICAgYXR0cmlidXRlIChlLmcuIGBtaW49XCJ7e21pblRpbWUgfCBkYXRlOidISDptbTpzcyd9fVwiYCkuIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkXG4gICAqICAgbmF0aXZlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICogICBhdHRyaWJ1dGUgKGUuZy4gYG1heD1cInt7bWF4VGltZSB8IGRhdGU6J0hIOm1tOnNzJ319XCJgKS4gTm90ZSB0aGF0IGBtYXhgIHdpbGwgYWxzbyBhZGRcbiAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gdGltZSBzdHJpbmcgdGhlXG4gICAqICAgYG5nTWluYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1pbmAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gdGltZSBzdHJpbmcgdGhlXG4gICAqICAgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJ0aW1lLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInRpbWVFeGFtcGxlXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8c2NyaXB0PlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ3RpbWVFeGFtcGxlJywgW10pXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMTk3MCwgMCwgMSwgMTQsIDU3LCAwKVxuICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcbiAgICAgPC9zY3JpcHQ+XG4gICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRGF0ZUNvbnRyb2xsZXIgYXMgZGF0ZUN0cmxcIj5cbiAgICAgICAgPGxhYmVsIGZvcj1cImV4YW1wbGVJbnB1dFwiPlBpY2sgYSB0aW1lIGJldHdlZW4gOGFtIGFuZCA1cG06PC9sYWJlbD5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0aW1lXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJISDptbTpzc1wiIG1pbj1cIjA4OjAwOjAwXCIgbWF4PVwiMTc6MDA6MDBcIiByZXF1aXJlZCAvPlxuICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnRpbWVcIj5cbiAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcIkhIOm1tOnNzXCJ9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICA8L2Zvcm0+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcIkhIOm1tOnNzXCInKSk7XG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMTQ6NTc6MDAnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIzOjU5OjAwJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd0aW1lJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgndGltZScsIFRJTUVfUkVHRVhQLFxuICAgICAgY3JlYXRlRGF0ZVBhcnNlcihUSU1FX1JFR0VYUCwgWydISCcsICdtbScsICdzcycsICdzc3MnXSksXG4gICAgICdISDptbTpzcy5zc3MnKSxcblxuICAgLyoqXG4gICAgKiBAbmdkb2MgaW5wdXRcbiAgICAqIEBuYW1lIGlucHV0W3dlZWtdXG4gICAgKlxuICAgICogQGRlc2NyaXB0aW9uXG4gICAgKiBJbnB1dCB3aXRoIHdlZWstb2YtdGhlLXllYXIgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24gdG8gRGF0ZS4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICAqIHRoZSBIVE1MNSB3ZWVrIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICAqIHdlZWsgZm9ybWF0ICh5eXl5LVcjIyksIGZvciBleGFtcGxlOiBgMjAxMy1XMDJgLlxuICAgICpcbiAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhckpTIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXG4gICAgKlxuICAgICogVGhlIHZhbHVlIG9mIHRoZSByZXN1bHRpbmcgRGF0ZSBvYmplY3Qgd2lsbCBiZSBzZXQgdG8gVGh1cnNkYXkgYXQgMDA6MDA6MDAgb2YgdGhlIHJlcXVlc3RlZCB3ZWVrLFxuICAgICogZHVlIHRvIElTTy04NjAxIHdlZWsgbnVtYmVyaW5nIHN0YW5kYXJkcy4gSW5mb3JtYXRpb24gb24gSVNPJ3Mgc3lzdGVtIGZvciBudW1iZXJpbmcgdGhlIHdlZWtzIG9mIHRoZVxuICAgICogeWVhciBjYW4gYmUgZm91bmQgYXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1dlZWtfZGF0ZXNcbiAgICAqXG4gICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgKlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICAqICAgYXR0cmlidXRlIChlLmcuIGBtaW49XCJ7e21pbldlZWsgfCBkYXRlOid5eXl5LVd3dyd9fVwiYCkuIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkXG4gICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICAqICAgYXR0cmlidXRlIChlLmcuIGBtYXg9XCJ7e21heFdlZWsgfCBkYXRlOid5eXl5LVd3dyd9fVwiYCkuIE5vdGUgdGhhdCBgbWF4YCB3aWxsIGFsc28gYWRkXG4gICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gd2VlayBzdHJpbmdcbiAgICAqICAgdGhlIGBuZ01pbmAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8uIE5vdGUgdGhhdCBpdCBkb2VzIG5vdCBzZXQgdGhlIGBtaW5gIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgICogICB0aGUgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAqXG4gICAgKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJ3ZWVrLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIndlZWtFeGFtcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQ+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnd2Vla0V4YW1wbGUnLCBbXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZSgyMDEzLCAwLCAzKVxuICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcbiAgICAgIDwvc2NyaXB0PlxuICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgICA8bGFiZWw+UGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOlxuICAgICAgICAgIDxpbnB1dCBpZD1cImV4YW1wbGVJbnB1dFwiIHR5cGU9XCJ3ZWVrXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnZhbHVlXCJcbiAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJZWVlZLVcjI1wiIG1pbj1cIjIwMTItVzMyXCJcbiAgICAgICAgICAgICAgICAgbWF4PVwiMjAxMy1XNTJcIiByZXF1aXJlZCAvPlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLndlZWtcIj5cbiAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCJ9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCInKSk7XG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy1XMDEnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIwMTUtVzAxJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICAgICovXG4gICd3ZWVrJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnd2VlaycsIFdFRUtfUkVHRVhQLCB3ZWVrUGFyc2VyLCAneXl5eS1Xd3cnKSxcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W21vbnRoXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSW5wdXQgd2l0aCBtb250aCB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICogdGhlIEhUTUw1IG1vbnRoIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICogbW9udGggZm9ybWF0ICh5eXl5LU1NKSwgZm9yIGV4YW1wbGU6IGAyMDA5LTAxYC5cbiAgICpcbiAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogSW52YWxpZCBgRGF0ZWAgb2JqZWN0cyAoZGF0ZXMgd2hvc2UgYGdldFRpbWUoKWAgaXMgYE5hTmApIHdpbGwgYmUgcmVuZGVyZWQgYXMgYW4gZW1wdHkgc3RyaW5nLlxuICAgKiBJZiB0aGUgbW9kZWwgaXMgbm90IHNldCB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLCB0aGUgbmV4dCB2aWV3IHRvIG1vZGVsIHVwZGF0ZSB3aWxsIHNldCBpdFxuICAgKiB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLlxuICAgKlxuICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxuICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyBtb250aCBmb3JtYXQgKHl5eXktTU0pLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICogICBhdHRyaWJ1dGUgKGUuZy4gYG1pbj1cInt7bWluTW9udGggfCBkYXRlOid5eXl5LU1NJ319XCJgKS4gTm90ZSB0aGF0IGBtaW5gIHdpbGwgYWxzbyBhZGRcbiAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAqICAgVGhpcyBtdXN0IGJlIGEgdmFsaWQgSVNPIG1vbnRoIGZvcm1hdCAoeXl5eS1NTSkuIFlvdSBjYW4gYWxzbyB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhpc1xuICAgKiAgIGF0dHJpYnV0ZSAoZS5nLiBgbWF4PVwie3ttYXhNb250aCB8IGRhdGU6J3l5eXktTU0nfX1cImApLiBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZFxuICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgKiAgIHRoZSBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgKiAgIHRoZSBgbmdNYXhgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWF4YCBhdHRyaWJ1dGUuXG5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibW9udGgtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwibW9udGhFeGFtcGxlXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8c2NyaXB0PlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ21vbnRoRXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTMsIDksIDEpXG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgICA8L3NjcmlwdD5cbiAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgIDxsYWJlbCBmb3I9XCJleGFtcGxlSW5wdXRcIj5QaWNrIGEgbW9udGggaW4gMjAxMzo8L2xhYmVsPlxuICAgICAgIDxpbnB1dCBpZD1cImV4YW1wbGVJbnB1dFwiIHR5cGU9XCJtb250aFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NXCIgbWluPVwiMjAxMy0wMVwiIG1heD1cIjIwMTMtMTJcIiByZXF1aXJlZCAvPlxuICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5tb250aFwiPlxuICAgICAgICAgICAgTm90IGEgdmFsaWQgbW9udGghPC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTVwifX08L3R0Pjxici8+XG4gICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICA8L2Zvcm0+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU1cIicpKTtcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcblxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLTEwJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcyMDE1LTAxJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdtb250aCc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ21vbnRoJywgTU9OVEhfUkVHRVhQLFxuICAgICBjcmVhdGVEYXRlUGFyc2VyKE1PTlRIX1JFR0VYUCwgWyd5eXl5JywgJ01NJ10pLFxuICAgICAneXl5eS1NTScpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbbnVtYmVyXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIG51bWJlciB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gU2V0cyB0aGUgYG51bWJlcmAgdmFsaWRhdGlvblxuICAgKiBlcnJvciBpZiBub3QgYSB2YWxpZCBudW1iZXIuXG4gICAqXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBvZiB0eXBlIGBudW1iZXJgIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogQmUgYXdhcmUgdGhhdCBhIHN0cmluZyBjb250YWluaW5nIGEgbnVtYmVyIGlzIG5vdCBlbm91Z2guIFNlZSB0aGUge0BsaW5rIG5nTW9kZWw6bnVtZm10fVxuICAgKiBlcnJvciBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBhbiBleGFtcGxlIG9mIGhvdyB0byBjb252ZXJ0IHlvdXIgbW9kZWwgaWYgbmVjZXNzYXJ5LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICpcbiAgICpcbiAgICogQGtub3duSXNzdWVcbiAgICpcbiAgICogIyMjIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbiBhbmQgYGFsbG93SW52YWxpZGBcbiAgICpcbiAgICogSW4gYnJvd3NlcnMgdGhhdCBmb2xsb3cgdGhlXG4gICAqIFtIVE1MNSBzcGVjaWZpY2F0aW9uXShodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI251bWJlci1zdGF0ZS0lMjh0eXBlPW51bWJlciUyOSksXG4gICAqIGBpbnB1dFtudW1iZXJdYCBkb2VzIG5vdCB3b3JrIGFzIGV4cGVjdGVkIHdpdGgge0BsaW5rIG5nTW9kZWxPcHRpb25zIGBuZ01vZGVsT3B0aW9ucy5hbGxvd0ludmFsaWRgfS5cbiAgICogSWYgYSBub24tbnVtYmVyIGlzIGVudGVyZWQgaW4gdGhlIGlucHV0LCB0aGUgYnJvd3NlciB3aWxsIHJlcG9ydCB0aGUgdmFsdWUgYXMgYW4gZW1wdHkgc3RyaW5nLFxuICAgKiB3aGljaCBtZWFucyB0aGUgdmlldyAvIG1vZGVsIHZhbHVlcyBpbiBgbmdNb2RlbGAgYW5kIHN1YnNlcXVlbnRseSB0aGUgc2NvcGUgdmFsdWVcbiAgICogd2lsbCBhbHNvIGJlIGFuIGVtcHR5IHN0cmluZy5cbiAgICpcbiAgICogQGtub3duSXNzdWVcbiAgICpcbiAgICogIyMjIExhcmdlIG51bWJlcnMgYW5kIGBzdGVwYCB2YWxpZGF0aW9uXG4gICAqXG4gICAqIFRoZSBgc3RlcGAgdmFsaWRhdGlvbiB3aWxsIG5vdCB3b3JrIGNvcnJlY3RseSBmb3IgdmVyeSBsYXJnZSBudW1iZXJzIChlLmcuIDk5OTk5OTk5OTkpIGR1ZSB0b1xuICAgKiBKYXZhc2NyaXB0J3MgYXJpdGhtZXRpYyBsaW1pdGF0aW9ucy4gSWYgeW91IG5lZWQgdG8gaGFuZGxlIGxhcmdlIG51bWJlcnMsIHB1cnBvc2UtYnVpbHRcbiAgICogbGlicmFyaWVzIChlLmcuIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWtlTWNsL2JpZy5qcy8pLCBjYW4gYmUgaW5jbHVkZWQgaW50byBBbmd1bGFySlMgYnlcbiAgICoge0BsaW5rIGd1aWRlL2Zvcm1zI21vZGlmeWluZy1idWlsdC1pbi12YWxpZGF0b3JzIG92ZXJ3cml0aW5nIHRoZSB2YWxpZGF0b3JzfVxuICAgKiBmb3IgYG51bWJlcmAgYW5kIC8gb3IgYHN0ZXBgLCBvciBieSB7QGxpbmsgZ3VpZGUvZm9ybXMjY3VzdG9tLXZhbGlkYXRpb24gYXBwbHlpbmcgY3VzdG9tIHZhbGlkYXRvcnN9XG4gICAqIHRvIGFuIGBpbnB1dFt0ZXh0XWAgZWxlbWVudC4gVGhlIHNvdXJjZSBmb3IgYGlucHV0W251bWJlcl1gIHR5cGUgY2FuIGJlIHVzZWQgYXMgYSBzdGFydGluZ1xuICAgKiBwb2ludCBmb3IgYm90aCBpbXBsZW1lbnRhdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cbiAgICogICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgKiAgICBDYW4gYmUgaW50ZXJwb2xhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nTWluIExpa2UgYG1pbmAsIHNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbmdNaW5gLFxuICAgKiAgICBidXQgZG9lcyBub3QgdHJpZ2dlciBIVE1MNSBuYXRpdmUgdmFsaWRhdGlvbi4gVGFrZXMgYW4gZXhwcmVzc2lvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ01heCBMaWtlIGBtYXhgLCBzZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG5nTWF4YCxcbiAgICogICAgYnV0IGRvZXMgbm90IHRyaWdnZXIgSFRNTDUgbmF0aXZlIHZhbGlkYXRpb24uIFRha2VzIGFuIGV4cHJlc3Npb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc3RlcCBTZXRzIHRoZSBgc3RlcGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgZG9lcyBub3QgZml0IHRoZSBgc3RlcGAgY29uc3RyYWludC5cbiAgICogICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1N0ZXAgTGlrZSBgc3RlcGAsIHNldHMgdGhlIGBzdGVwYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBkb2VzIG5vdCBmaXQgdGhlIGBuZ1N0ZXBgIGNvbnN0cmFpbnQsXG4gICAqICAgIGJ1dCBkb2VzIG5vdCB0cmlnZ2VyIEhUTUw1IG5hdGl2ZSB2YWxpZGF0aW9uLiBUYWtlcyBhbiBleHByZXNzaW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cFxuICAgKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gICAqICAgICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gICAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gICAqICAgIGFjY291bnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwibnVtYmVyLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIm51bWJlckV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICAgICB2YWx1ZTogMTJcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5OdW1iZXI6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCIgbWF4PVwiOTlcIiByZXF1aXJlZD5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5udW1iZXJcIj5cbiAgICAgICAgICAgICAgIE5vdCB2YWxpZCBudW1iZXIhPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZScpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG4gICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS52YWx1ZScpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcxMicpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnMTIzJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdudW1iZXInOiBudW1iZXJJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3VybF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRleHQgaW5wdXQgd2l0aCBVUkwgdmFsaWRhdGlvbi4gU2V0cyB0aGUgYHVybGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIGNvbnRlbnQgaXMgbm90IGFcbiAgICogdmFsaWQgVVJMLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAqKk5vdGU6KiogYGlucHV0W3VybF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSB1cmxzIHRoYXQgaXMgZGVyaXZlZCBmcm9tIHRoZSByZWdleFxuICAgKiB1c2VkIGluIENocm9taXVtLiBJZiB5b3UgbmVlZCBzdHJpY3RlciB2YWxpZGF0aW9uLCB5b3UgY2FuIHVzZSBgbmctcGF0dGVybmAgb3IgbW9kaWZ5XG4gICAqIHRoZSBidWlsdC1pbiB2YWxpZGF0b3JzIChzZWUgdGhlIHtAbGluayBndWlkZS9mb3JtcyBGb3JtcyBndWlkZX0pXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cFxuICAgKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gICAqICAgICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gICAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gICAqICAgIGFjY291bnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwidXJsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInVybEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd1cmxFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS51cmwgPSB7XG4gICAgICAgICAgICAgICAgIHRleHQ6ICdodHRwOi8vZ29vZ2xlLmNvbSdcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5VUkw6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ1cmxcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInVybC50ZXh0XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudXJsXCI+XG4gICAgICAgICAgICAgICBOb3QgdmFsaWQgdXJsITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3t1cmwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnVybCA9IHt7ISFteUZvcm0uJGVycm9yLnVybH19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VybC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1cmwudGV4dCcpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2h0dHA6Ly9nb29nbGUuY29tJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgdXJsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2JveCcpO1xuXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd1cmwnOiB1cmxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W2VtYWlsXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIGVtYWlsIHZhbGlkYXRpb24uIFNldHMgdGhlIGBlbWFpbGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgbm90IGEgdmFsaWQgZW1haWxcbiAgICogYWRkcmVzcy5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogKipOb3RlOioqIGBpbnB1dFtlbWFpbF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSBlbWFpbCBhZGRyZXNzZXMgdGhhdCBpcyBkZXJpdmVkIGZyb20gdGhlIHJlZ2V4XG4gICAqIHVzZWQgaW4gQ2hyb21pdW0uIElmIHlvdSBuZWVkIHN0cmljdGVyIHZhbGlkYXRpb24gKGUuZy4gcmVxdWlyaW5nIGEgdG9wLWxldmVsIGRvbWFpbiksIHlvdSBjYW5cbiAgICogdXNlIGBuZy1wYXR0ZXJuYCBvciBtb2RpZnkgdGhlIGJ1aWx0LWluIHZhbGlkYXRvcnMgKHNlZSB0aGUge0BsaW5rIGd1aWRlL2Zvcm1zIEZvcm1zIGd1aWRlfSlcbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICAgKiAgICBtaW5sZW5ndGguXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNYXhsZW5ndGggU2V0cyBgbWF4bGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbG9uZ2VyIHRoYW5cbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXG4gICAqICAgIGFueSBsZW5ndGguXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcGF0dGVybiBTaW1pbGFyIHRvIGBuZ1BhdHRlcm5gIGV4Y2VwdCB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgdGhlIGFjdHVhbCBzdHJpbmdcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgKiAgICBhcyBpbiB0aGUgbmdQYXR0ZXJuIGRpcmVjdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIG5nTW9kZWwge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSAkdmlld1ZhbHVlfVxuICAgKiAgICBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBSZWdFeHAgb2JqZWN0LCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwXG4gICAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gICAqICAgIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC48YnIgLz5cbiAgICogICAgKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAgICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAgICogICAgYWNjb3VudC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJlbWFpbC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJlbWFpbEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdlbWFpbEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsID0ge1xuICAgICAgICAgICAgICAgICB0ZXh0OiAnbWVAZXhhbXBsZS5jb20nXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgICAgPGxhYmVsPkVtYWlsOlxuICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJlbWFpbFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZW1haWwudGV4dFwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZW1haWxcIj5cbiAgICAgICAgICAgICAgICAgTm90IHZhbGlkIGVtYWlsITwvc3Bhbj5cbiAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICA8dHQ+dGV4dCA9IHt7ZW1haWwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5lbWFpbCA9IHt7ISFteUZvcm0uJGVycm9yLmVtYWlsfX08L3R0Pjxici8+XG4gICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB0ZXh0ID0gZWxlbWVudChieS5iaW5kaW5nKCdlbWFpbC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdlbWFpbC50ZXh0JykpO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignbWVAZXhhbXBsZS5jb20nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgZW1haWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygneHh4Jyk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgPC9maWxlPlxuICAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ2VtYWlsJzogZW1haWxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3JhZGlvXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSFRNTCByYWRpbyBidXR0b24uXG4gICAqXG4gICAqICoqTm90ZToqKjxicj5cbiAgICogQWxsIGlucHV0cyBjb250cm9sbGVkIGJ5IHtAbGluayBuZ01vZGVsIG5nTW9kZWx9IChpbmNsdWRpbmcgdGhvc2Ugb2YgdHlwZSBgcmFkaW9gKSB3aWxsIHVzZSB0aGVcbiAgICogdmFsdWUgb2YgdGhlaXIgYG5hbWVgIGF0dHJpYnV0ZSB0byBkZXRlcm1pbmUgdGhlIHByb3BlcnR5IHVuZGVyIHdoaWNoIHRoZWlyXG4gICAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIE5nTW9kZWxDb250cm9sbGVyfSB3aWxsIGJlIHB1Ymxpc2hlZCBvbiB0aGUgcGFyZW50XG4gICAqIHtAbGluayBmb3JtLkZvcm1Db250cm9sbGVyIEZvcm1Db250cm9sbGVyfS4gVGh1cywgaWYgeW91IHVzZSB0aGUgc2FtZSBgbmFtZWAgZm9yIG11bHRpcGxlXG4gICAqIGlucHV0cyBvZiBhIGZvcm0gKGUuZy4gYSBncm91cCBvZiByYWRpbyBpbnB1dHMpLCBvbmx5IF9vbmVfIGBOZ01vZGVsQ29udHJvbGxlcmAgd2lsbCBiZVxuICAgKiBwdWJsaXNoZWQgb24gdGhlIHBhcmVudCBgRm9ybUNvbnRyb2xsZXJgIHVuZGVyIHRoYXQgbmFtZS4gVGhlIHJlc3Qgb2YgdGhlIGNvbnRyb2xsZXJzIHdpbGxcbiAgICogY29udGludWUgdG8gd29yayBhcyBleHBlY3RlZCwgYnV0IHlvdSB3b24ndCBiZSBhYmxlIHRvIGFjY2VzcyB0aGVtIGFzIHByb3BlcnRpZXMgb24gdGhlIHBhcmVudFxuICAgKiBgRm9ybUNvbnRyb2xsZXJgLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICAgKiAgIDxwPlxuICAgKiAgICAgSW4gcGxhaW4gSFRNTCBmb3JtcywgdGhlIGBuYW1lYCBhdHRyaWJ1dGUgaXMgdXNlZCB0byBpZGVudGlmeSBncm91cHMgb2YgcmFkaW8gaW5wdXRzLCBzb1xuICAgKiAgICAgdGhhdCB0aGUgYnJvd3NlciBjYW4gbWFuYWdlIHRoZWlyIHN0YXRlIChjaGVja2VkL3VuY2hlY2tlZCkgYmFzZWQgb24gdGhlIHN0YXRlIG9mIG90aGVyXG4gICAqICAgICBpbnB1dHMgaW4gdGhlIHNhbWUgZ3JvdXAuXG4gICAqICAgPC9wPlxuICAgKiAgIDxwPlxuICAgKiAgICAgSW4gQW5ndWxhckpTIGZvcm1zLCB0aGlzIGlzIG5vdCBuZWNlc3NhcnkuIFRoZSBpbnB1dCdzIHN0YXRlIHdpbGwgYmUgdXBkYXRlZCBiYXNlZCBvbiB0aGVcbiAgICogICAgIHZhbHVlIG9mIHRoZSB1bmRlcmx5aW5nIG1vZGVsIGRhdGEuXG4gICAqICAgPC9wPlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAgICogICBJZiB5b3Ugb21pdCB0aGUgYG5hbWVgIGF0dHJpYnV0ZSBvbiBhIHJhZGlvIGlucHV0LCBgbmdNb2RlbGAgd2lsbCBhdXRvbWF0aWNhbGx5IGFzc2lnbiBpdCBhXG4gICAqICAgdW5pcXVlIG5hbWUuXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgYG5nTW9kZWxgIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIHNlbGVjdGVkLlxuICAgKiAgICBOb3RlIHRoYXQgYHZhbHVlYCBvbmx5IHN1cHBvcnRzIGBzdHJpbmdgIHZhbHVlcywgaS5lLiB0aGUgc2NvcGUgbW9kZWwgbmVlZHMgdG8gYmUgYSBzdHJpbmcsXG4gICAqICAgIHRvby4gVXNlIGBuZ1ZhbHVlYCBpZiB5b3UgbmVlZCBjb21wbGV4IG1vZGVscyAoYG51bWJlcmAsIGBvYmplY3RgLCAuLi4pLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ1ZhbHVlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIHdoaWNoIGBuZ01vZGVsYCB3aWxsIGJlIGJlIHNldCB3aGVuIHRoZSByYWRpb1xuICAgKiAgICBpcyBzZWxlY3RlZC4gU2hvdWxkIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgYHZhbHVlYCBhdHRyaWJ1dGUgaWYgeW91IG5lZWRcbiAgICogICAgYSBub24tc3RyaW5nIGBuZ01vZGVsYCAoYGJvb2xlYW5gLCBgYXJyYXlgLCAuLi4pLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgICAgPGV4YW1wbGUgbmFtZT1cInJhZGlvLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInJhZGlvRXhhbXBsZVwiPlxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3JhZGlvRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAkc2NvcGUuY29sb3IgPSB7XG4gICAgICAgICAgICAgICAgIG5hbWU6ICdibHVlJ1xuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICRzY29wZS5zcGVjaWFsVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgIFwiaWRcIjogXCIxMjM0NVwiLFxuICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiZ3JlZW5cIlxuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICB9XSk7XG4gICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiB2YWx1ZT1cInJlZFwiPlxuICAgICAgICAgICAgIFJlZFxuICAgICAgICAgICA8L2xhYmVsPjxici8+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJjb2xvci5uYW1lXCIgbmctdmFsdWU9XCJzcGVjaWFsVmFsdWVcIj5cbiAgICAgICAgICAgICBHcmVlblxuICAgICAgICAgICA8L2xhYmVsPjxici8+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJjb2xvci5uYW1lXCIgdmFsdWU9XCJibHVlXCI+XG4gICAgICAgICAgICAgQmx1ZVxuICAgICAgICAgICA8L2xhYmVsPjxici8+XG4gICAgICAgICAgIDx0dD5jb2xvciA9IHt7Y29sb3IubmFtZSB8IGpzb259fTwvdHQ+PGJyLz5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgTm90ZSB0aGF0IGBuZy12YWx1ZT1cInNwZWNpYWxWYWx1ZVwiYCBzZXRzIHJhZGlvIGl0ZW0ncyB2YWx1ZSB0byBiZSB0aGUgdmFsdWUgb2YgYCRzY29wZS5zcGVjaWFsVmFsdWVgLlxuICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgICBpdCgnc2hvdWxkIGNoYW5nZSBzdGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0cyA9IGVsZW1lbnQuYWxsKGJ5Lm1vZGVsKCdjb2xvci5uYW1lJykpO1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gZWxlbWVudChieS5iaW5kaW5nKCdjb2xvci5uYW1lJykpO1xuXG4gICAgICAgICAgICBleHBlY3QoY29sb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2JsdWUnKTtcblxuICAgICAgICAgICAgaW5wdXRzLmdldCgwKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGNvbG9yLmdldFRleHQoKSkudG9Db250YWluKCdyZWQnKTtcblxuICAgICAgICAgICAgaW5wdXRzLmdldCgxKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGNvbG9yLmdldFRleHQoKSkudG9Db250YWluKCdncmVlbicpO1xuICAgICAgICAgIH0pO1xuICAgICAgICA8L2ZpbGU+XG4gICAgICA8L2V4YW1wbGU+XG4gICAqL1xuICAncmFkaW8nOiByYWRpb0lucHV0VHlwZSxcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3JhbmdlXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogTmF0aXZlIHJhbmdlIGlucHV0IHdpdGggdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uXG4gICAqXG4gICAqIFRoZSBtb2RlbCBmb3IgdGhlIHJhbmdlIGlucHV0IG11c3QgYWx3YXlzIGJlIGEgYE51bWJlcmAuXG4gICAqXG4gICAqIElFOSBhbmQgb3RoZXIgYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGUgYHJhbmdlYCB0eXBlIGZhbGwgYmFja1xuICAgKiB0byBhIHRleHQgaW5wdXQgd2l0aG91dCBhbnkgZGVmYXVsdCB2YWx1ZXMgZm9yIGBtaW5gLCBgbWF4YCBhbmQgYHN0ZXBgLiBNb2RlbCBiaW5kaW5nLFxuICAgKiB2YWxpZGF0aW9uIGFuZCBudW1iZXIgcGFyc2luZyBhcmUgbmV2ZXJ0aGVsZXNzIHN1cHBvcnRlZC5cbiAgICpcbiAgICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHJhbmdlIChsYXRlc3QgQ2hyb21lLCBTYWZhcmksIEZpcmVmb3gsIEVkZ2UpIHRyZWF0IGBpbnB1dFtyYW5nZV1gXG4gICAqIGluIGEgd2F5IHRoYXQgbmV2ZXIgYWxsb3dzIHRoZSBpbnB1dCB0byBob2xkIGFuIGludmFsaWQgdmFsdWUuIFRoYXQgbWVhbnM6XG4gICAqIC0gYW55IG5vbi1udW1lcmljYWwgdmFsdWUgaXMgc2V0IHRvIGAobWF4ICsgbWluKSAvIDJgLlxuICAgKiAtIGFueSBudW1lcmljYWwgdmFsdWUgdGhhdCBpcyBsZXNzIHRoYW4gdGhlIGN1cnJlbnQgbWluIHZhbCwgb3IgZ3JlYXRlciB0aGFuIHRoZSBjdXJyZW50IG1heCB2YWxcbiAgICogaXMgc2V0IHRvIHRoZSBtaW4gLyBtYXggdmFsIHJlc3BlY3RpdmVseS5cbiAgICogLSBhZGRpdGlvbmFsbHksIHRoZSBjdXJyZW50IGBzdGVwYCBpcyByZXNwZWN0ZWQsIHNvIHRoZSBuZWFyZXN0IHZhbHVlIHRoYXQgc2F0aXNmaWVzIGEgc3RlcFxuICAgKiBpcyB1c2VkLlxuICAgKlxuICAgKiBTZWUgdGhlIFtIVE1MIFNwZWMgb24gaW5wdXRbdHlwZT1yYW5nZV1dKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9mb3Jtcy5odG1sI3JhbmdlLXN0YXRlLSh0eXBlPXJhbmdlKSlcbiAgICogZm9yIG1vcmUgaW5mby5cbiAgICpcbiAgICogVGhpcyBoYXMgdGhlIGZvbGxvd2luZyBjb25zZXF1ZW5jZXMgZm9yIEFuZ3VsYXJKUzpcbiAgICpcbiAgICogU2luY2UgdGhlIGVsZW1lbnQgdmFsdWUgc2hvdWxkIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IG1vZGVsIHZhbHVlLCBhIHJhbmdlIGlucHV0XG4gICAqIHdpbGwgc2V0IHRoZSBib3VuZCBuZ01vZGVsIGV4cHJlc3Npb24gdG8gdGhlIHZhbHVlIHRoYXQgdGhlIGJyb3dzZXIgaGFzIHNldCBmb3IgdGhlXG4gICAqIGlucHV0IGVsZW1lbnQuIEZvciBleGFtcGxlLCBpbiB0aGUgZm9sbG93aW5nIGlucHV0IGA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZVwiPmAsXG4gICAqIGlmIHRoZSBhcHBsaWNhdGlvbiBzZXRzIGBtb2RlbC52YWx1ZSA9IG51bGxgLCB0aGUgYnJvd3NlciB3aWxsIHNldCB0aGUgaW5wdXQgdG8gYCc1MCdgLlxuICAgKiBBbmd1bGFySlMgd2lsbCB0aGVuIHNldCB0aGUgbW9kZWwgdG8gYDUwYCwgdG8gcHJldmVudCBpbnB1dCBhbmQgbW9kZWwgdmFsdWUgYmVpbmcgb3V0IG9mIHN5bmMuXG4gICAqXG4gICAqIFRoYXQgbWVhbnMgdGhlIG1vZGVsIGZvciByYW5nZSB3aWxsIGltbWVkaWF0ZWx5IGJlIHNldCB0byBgNTBgIGFmdGVyIGBuZ01vZGVsYCBoYXMgYmVlblxuICAgKiBpbml0aWFsaXplZC4gSXQgYWxzbyBtZWFucyBhIHJhbmdlIGlucHV0IGNhbiBuZXZlciBoYXZlIHRoZSByZXF1aXJlZCBlcnJvci5cbiAgICpcbiAgICogVGhpcyBkb2VzIG5vdCBvbmx5IGFmZmVjdCBjaGFuZ2VzIHRvIHRoZSBtb2RlbCB2YWx1ZSwgYnV0IGFsc28gdG8gdGhlIHZhbHVlcyBvZiB0aGUgYG1pbmAsXG4gICAqIGBtYXhgLCBhbmQgYHN0ZXBgIGF0dHJpYnV0ZXMuIFdoZW4gdGhlc2UgY2hhbmdlIGluIGEgd2F5IHRoYXQgd2lsbCBjYXVzZSB0aGUgYnJvd3NlciB0byBtb2RpZnlcbiAgICogdGhlIGlucHV0IHZhbHVlLCBBbmd1bGFySlMgd2lsbCBhbHNvIHVwZGF0ZSB0aGUgbW9kZWwgdmFsdWUuXG4gICAqXG4gICAqIEF1dG9tYXRpYyB2YWx1ZSBhZGp1c3RtZW50IGFsc28gbWVhbnMgdGhhdCBhIHJhbmdlIGlucHV0IGVsZW1lbnQgY2FuIG5ldmVyIGhhdmUgdGhlIGByZXF1aXJlZGAsXG4gICAqIGBtaW5gLCBvciBgbWF4YCBlcnJvcnMuXG4gICAqXG4gICAqIEhvd2V2ZXIsIGBzdGVwYCBpcyBjdXJyZW50bHkgb25seSBmdWxseSBpbXBsZW1lbnRlZCBieSBGaXJlZm94LiBPdGhlciBicm93c2VycyBoYXZlIHByb2JsZW1zXG4gICAqIHdoZW4gdGhlIHN0ZXAgdmFsdWUgY2hhbmdlcyBkeW5hbWljYWxseSAtIHRoZXkgZG8gbm90IGFkanVzdCB0aGUgZWxlbWVudCB2YWx1ZSBjb3JyZWN0bHksIGJ1dFxuICAgKiBpbnN0ZWFkIG1heSBzZXQgdGhlIGBzdGVwTWlzbWF0Y2hgIGVycm9yLiBJZiB0aGF0J3MgdGhlIGNhc2UsIHRoZSBBbmd1bGFySlMgd2lsbCBzZXQgdGhlIGBzdGVwYFxuICAgKiBlcnJvciBvbiB0aGUgaW5wdXQsIGFuZCBzZXQgdGhlIG1vZGVsIHRvIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgYGlucHV0W3JhbmdlXWAgaXMgbm90IGNvbXBhdGlibGUgd2l0aGBuZ01heGAsIGBuZ01pbmAsIGFuZCBgbmdTdGVwYCwgYmVjYXVzZSB0aGV5IGRvXG4gICAqIG5vdCBzZXQgdGhlIGBtaW5gIGFuZCBgbWF4YCBhdHRyaWJ1dGVzLCB3aGljaCBtZWFucyB0aGF0IHRoZSBicm93c2VyIHdvbid0IGF1dG9tYXRpY2FsbHkgYWRqdXN0XG4gICAqIHRoZSBpbnB1dCB2YWx1ZSBiYXNlZCBvbiB0aGVpciB2YWx1ZXMsIGFuZCB3aWxsIGFsd2F5cyBhc3N1bWUgbWluID0gMCwgbWF4ID0gMTAwLCBhbmQgc3RlcCA9IDEuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIHRvIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXJcbiAgICogICAgICAgICAgICAgICAgICB0aGFuIGBtaW5gLiBDYW4gYmUgaW50ZXJwb2xhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIHRvIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWF4YC5cbiAgICogICAgICAgICAgICAgICAgICBDYW4gYmUgaW50ZXJwb2xhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHN0ZXAgU2V0cyB0aGUgYHN0ZXBgIHZhbGlkYXRpb24gdG8gZW5zdXJlIHRoYXQgdGhlIHZhbHVlIGVudGVyZWQgbWF0Y2hlcyB0aGUgYHN0ZXBgXG4gICAqICAgICAgICAgICAgICAgICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtleHByZXNzaW9uPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiB0aGUgbmdNb2RlbCB2YWx1ZSBjaGFuZ2VzIGR1ZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICB0byB1c2VyIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nQ2hlY2tlZCBJZiB0aGUgZXhwcmVzc2lvbiBpcyB0cnV0aHksIHRoZW4gdGhlIGBjaGVja2VkYCBhdHRyaWJ1dGUgd2lsbCBiZSBzZXQgb24gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuICoqTm90ZSoqIDogYG5nQ2hlY2tlZGAgc2hvdWxkIG5vdCBiZSB1c2VkIGFsb25nc2lkZSBgbmdNb2RlbGAuXG4gICAqICAgICAgICAgICAgICAgICAgICAgIENoZWNrb3V0IHtAbGluayBuZy5kaXJlY3RpdmU6bmdDaGVja2VkIG5nQ2hlY2tlZH0gZm9yIHVzYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgICAgPGV4YW1wbGUgbmFtZT1cInJhbmdlLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInJhbmdlRXhhbXBsZVwiPlxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgncmFuZ2VFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlID0gNzU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1pbiA9IDEwO1xuICAgICAgICAgICAgICAgICRzY29wZS5tYXggPSA5MDtcbiAgICAgICAgICAgICAgfV0pO1xuICAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cblxuICAgICAgICAgICAgTW9kZWwgYXMgcmFuZ2U6IDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBuYW1lPVwicmFuZ2VcIiBuZy1tb2RlbD1cInZhbHVlXCIgbWluPVwie3ttaW59fVwiICBtYXg9XCJ7e21heH19XCI+XG4gICAgICAgICAgICA8aHI+XG4gICAgICAgICAgICBNb2RlbCBhcyBudW1iZXI6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPjxicj5cbiAgICAgICAgICAgIE1pbjogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1pblwiPjxicj5cbiAgICAgICAgICAgIE1heDogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1heFwiPjxicj5cbiAgICAgICAgICAgIHZhbHVlID0gPGNvZGU+e3t2YWx1ZX19PC9jb2RlPjxici8+XG4gICAgICAgICAgICBteUZvcm0ucmFuZ2UuJHZhbGlkID0gPGNvZGU+e3tteUZvcm0ucmFuZ2UuJHZhbGlkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgIG15Rm9ybS5yYW5nZS4kZXJyb3IgPSA8Y29kZT57e215Rm9ybS5yYW5nZS4kZXJyb3J9fTwvY29kZT5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cblxuICAgKiAjIyBSYW5nZSBJbnB1dCB3aXRoIG5nTWluICYgbmdNYXggYXR0cmlidXRlc1xuXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwicmFuZ2UtaW5wdXQtZGlyZWN0aXZlLW5nXCIgbW9kdWxlPVwicmFuZ2VFeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdyYW5nZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmFsdWUgPSA3NTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWluID0gMTA7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1heCA9IDkwO1xuICAgICAgICAgICAgICB9XSk7XG4gICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICAgTW9kZWwgYXMgcmFuZ2U6IDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBuYW1lPVwicmFuZ2VcIiBuZy1tb2RlbD1cInZhbHVlXCIgbmctbWluPVwibWluXCIgbmctbWF4PVwibWF4XCI+XG4gICAgICAgICAgICA8aHI+XG4gICAgICAgICAgICBNb2RlbCBhcyBudW1iZXI6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPjxicj5cbiAgICAgICAgICAgIE1pbjogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1pblwiPjxicj5cbiAgICAgICAgICAgIE1heDogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1heFwiPjxicj5cbiAgICAgICAgICAgIHZhbHVlID0gPGNvZGU+e3t2YWx1ZX19PC9jb2RlPjxici8+XG4gICAgICAgICAgICBteUZvcm0ucmFuZ2UuJHZhbGlkID0gPGNvZGU+e3tteUZvcm0ucmFuZ2UuJHZhbGlkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgIG15Rm9ybS5yYW5nZS4kZXJyb3IgPSA8Y29kZT57e215Rm9ybS5yYW5nZS4kZXJyb3J9fTwvY29kZT5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cblxuICAgKi9cbiAgJ3JhbmdlJzogcmFuZ2VJbnB1dFR5cGUsXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBpbnB1dFxuICAgKiBAbmFtZSBpbnB1dFtjaGVja2JveF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEhUTUwgY2hlY2tib3guXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nVHJ1ZVZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgc2V0IHdoZW4gc2VsZWN0ZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nRmFsc2VWYWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIG5vdCBzZWxlY3RlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJjaGVja2JveC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJjaGVja2JveEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjaGVja2JveEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrYm94TW9kZWwgPSB7XG4gICAgICAgICAgICAgICAgdmFsdWUxIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTIgOiAnWUVTJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICA8bGFiZWw+VmFsdWUxOlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrYm94TW9kZWwudmFsdWUxXCI+XG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPGxhYmVsPlZhbHVlMjpcbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2JveE1vZGVsLnZhbHVlMlwiXG4gICAgICAgICAgICAgICAgICAgIG5nLXRydWUtdmFsdWU9XCInWUVTJ1wiIG5nLWZhbHNlLXZhbHVlPVwiJ05PJ1wiPlxuICAgICAgICAgICAgPC9sYWJlbD48YnIvPlxuICAgICAgICAgICA8dHQ+dmFsdWUxID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMX19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+dmFsdWUyID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMn19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2Ugc3RhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZTEgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NoZWNrYm94TW9kZWwudmFsdWUxJykpO1xuICAgICAgICAgICAgdmFyIHZhbHVlMiA9IGVsZW1lbnQoYnkuYmluZGluZygnY2hlY2tib3hNb2RlbC52YWx1ZTInKSk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTEuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1lFUycpO1xuXG4gICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2JveE1vZGVsLnZhbHVlMScpKS5jbGljaygpO1xuICAgICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tib3hNb2RlbC52YWx1ZTInKSkuY2xpY2soKTtcblxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMS5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ05PJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdjaGVja2JveCc6IGNoZWNrYm94SW5wdXRUeXBlLFxuXG4gICdoaWRkZW4nOiBub29wLFxuICAnYnV0dG9uJzogbm9vcCxcbiAgJ3N1Ym1pdCc6IG5vb3AsXG4gICdyZXNldCc6IG5vb3AsXG4gICdmaWxlJzogbm9vcFxufTtcblxuZnVuY3Rpb24gc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCkge1xuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgPyB2YWx1ZSA6IHZhbHVlLnRvU3RyaW5nKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0ZXh0SW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcbiAgc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCk7XG59XG5cbmZ1bmN0aW9uIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICB2YXIgdHlwZSA9IGxvd2VyY2FzZShlbGVtZW50WzBdLnR5cGUpO1xuXG4gIC8vIEluIGNvbXBvc2l0aW9uIG1vZGUsIHVzZXJzIGFyZSBzdGlsbCBpbnB1dHRpbmcgaW50ZXJtZWRpYXRlIHRleHQgYnVmZmVyLFxuICAvLyBob2xkIHRoZSBsaXN0ZW5lciB1bnRpbCBjb21wb3NpdGlvbiBpcyBkb25lLlxuICAvLyBNb3JlIGFib3V0IGNvbXBvc2l0aW9uIGV2ZW50czogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NvbXBvc2l0aW9uRXZlbnRcbiAgaWYgKCEkc25pZmZlci5hbmRyb2lkKSB7XG4gICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuXG4gICAgZWxlbWVudC5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vIFN1cHBvcnQ6IElFOStcbiAgICBlbGVtZW50Lm9uKCdjb21wb3NpdGlvbnVwZGF0ZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAvLyBFbmQgY29tcG9zaXRpb24gd2hlbiBldi5kYXRhIGlzIGVtcHR5IHN0cmluZyBvbiAnY29tcG9zaXRpb251cGRhdGUnIGV2ZW50LlxuICAgICAgLy8gV2hlbiB0aGUgaW5wdXQgZGUtZm9jdXNzZXMgKGUuZy4gYnkgY2xpY2tpbmcgYXdheSksIElFIHRyaWdnZXJzICdjb21wb3NpdGlvbnVwZGF0ZSdcbiAgICAgIC8vIGluc3RlYWQgb2YgJ2NvbXBvc2l0aW9uZW5kJy5cbiAgICAgIGlmIChpc1VuZGVmaW5lZChldi5kYXRhKSB8fCBldi5kYXRhID09PSAnJykge1xuICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGVsZW1lbnQub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdGltZW91dDtcblxuICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAkYnJvd3Nlci5kZWZlci5jYW5jZWwodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGNvbXBvc2luZykgcmV0dXJuO1xuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsKCksXG4gICAgICAgIGV2ZW50ID0gZXYgJiYgZXYudHlwZTtcblxuICAgIC8vIEJ5IGRlZmF1bHQgd2Ugd2lsbCB0cmltIHRoZSB2YWx1ZVxuICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgbmctdHJpbSBleGlzdHMgd2Ugd2lsbCBhdm9pZCB0cmltbWluZ1xuICAgIC8vIElmIGlucHV0IHR5cGUgaXMgJ3Bhc3N3b3JkJywgdGhlIHZhbHVlIGlzIG5ldmVyIHRyaW1tZWRcbiAgICBpZiAodHlwZSAhPT0gJ3Bhc3N3b3JkJyAmJiAoIWF0dHIubmdUcmltIHx8IGF0dHIubmdUcmltICE9PSAnZmFsc2UnKSkge1xuICAgICAgdmFsdWUgPSB0cmltKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBJZiBhIGNvbnRyb2wgaXMgc3VmZmVyaW5nIGZyb20gYmFkIGlucHV0IChkdWUgdG8gbmF0aXZlIHZhbGlkYXRvcnMpLCBicm93c2VycyBkaXNjYXJkIGl0c1xuICAgIC8vIHZhbHVlLCBzbyBpdCBtYXkgYmUgbmVjZXNzYXJ5IHRvIHJldmFsaWRhdGUgKGJ5IGNhbGxpbmcgJHNldFZpZXdWYWx1ZSBhZ2FpbikgZXZlbiBpZiB0aGVcbiAgICAvLyBjb250cm9sJ3MgdmFsdWUgaXMgdGhlIHNhbWUgZW1wdHkgdmFsdWUgdHdpY2UgaW4gYSByb3cuXG4gICAgaWYgKGN0cmwuJHZpZXdWYWx1ZSAhPT0gdmFsdWUgfHwgKHZhbHVlID09PSAnJyAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykpIHtcbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZSh2YWx1ZSwgZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvLyBpZiB0aGUgYnJvd3NlciBkb2VzIHN1cHBvcnQgXCJpbnB1dFwiIGV2ZW50LCB3ZSBhcmUgZmluZSAtIGV4Y2VwdCBvbiBJRTkgd2hpY2ggZG9lc24ndCBmaXJlIHRoZVxuICAvLyBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UsIGRlbGV0ZSBvciBjdXRcbiAgaWYgKCRzbmlmZmVyLmhhc0V2ZW50KCdpbnB1dCcpKSB7XG4gICAgZWxlbWVudC5vbignaW5wdXQnLCBsaXN0ZW5lcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRlZmVyTGlzdGVuZXIgPSBmdW5jdGlvbihldiwgaW5wdXQsIG9yaWdWYWx1ZSkge1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHRpbWVvdXQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWlucHV0IHx8IGlucHV0LnZhbHVlICE9PSBvcmlnVmFsdWUpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgLyoqIEB0aGlzICovIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZTtcblxuICAgICAgLy8gaWdub3JlXG4gICAgICAvLyAgICBjb21tYW5kICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgICAgICAgICAgIGFycm93c1xuICAgICAgaWYgKGtleSA9PT0gOTEgfHwgKDE1IDwga2V5ICYmIGtleSA8IDE5KSB8fCAoMzcgPD0ga2V5ICYmIGtleSA8PSA0MCkpIHJldHVybjtcblxuICAgICAgZGVmZXJMaXN0ZW5lcihldmVudCwgdGhpcywgdGhpcy52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBpZiB1c2VyIG1vZGlmaWVzIGlucHV0IHZhbHVlIHVzaW5nIGNvbnRleHQgbWVudSBpbiBJRSwgd2UgbmVlZCBcInBhc3RlXCIsIFwiY3V0XCIgYW5kIFwiZHJvcFwiIGV2ZW50cyB0byBjYXRjaCBpdFxuICAgIGlmICgkc25pZmZlci5oYXNFdmVudCgncGFzdGUnKSkge1xuICAgICAgZWxlbWVudC5vbigncGFzdGUgY3V0IGRyb3AnLCBkZWZlckxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB1c2VyIHBhc3RlIGludG8gaW5wdXQgdXNpbmcgbW91c2Ugb24gb2xkZXIgYnJvd3NlclxuICAvLyBvciBmb3JtIGF1dG9jb21wbGV0ZSBvbiBuZXdlciBicm93c2VyLCB3ZSBuZWVkIFwiY2hhbmdlXCIgZXZlbnQgdG8gY2F0Y2ggaXRcbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIC8vIFNvbWUgbmF0aXZlIGlucHV0IHR5cGVzIChkYXRlLWZhbWlseSkgaGF2ZSB0aGUgYWJpbGl0eSB0byBjaGFuZ2UgdmFsaWRpdHkgd2l0aG91dFxuICAvLyBmaXJpbmcgYW55IGlucHV0L2NoYW5nZSBldmVudHMuXG4gIC8vIEZvciB0aGVzZSBldmVudCB0eXBlcywgd2hlbiBuYXRpdmUgdmFsaWRhdG9ycyBhcmUgcHJlc2VudCBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIHR5cGUsXG4gIC8vIGNoZWNrIGZvciB2YWxpZGl0eSBjaGFuZ2VzIG9uIHZhcmlvdXMgRE9NIGV2ZW50cy5cbiAgaWYgKFBBUlRJQUxfVkFMSURBVElPTl9UWVBFU1t0eXBlXSAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyAmJiB0eXBlID09PSBhdHRyLnR5cGUpIHtcbiAgICBlbGVtZW50Lm9uKFBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbihldikge1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHZhciB2YWxpZGl0eSA9IHRoaXNbVkFMSURJVFlfU1RBVEVfUFJPUEVSVFldO1xuICAgICAgICB2YXIgb3JpZ0JhZElucHV0ID0gdmFsaWRpdHkuYmFkSW5wdXQ7XG4gICAgICAgIHZhciBvcmlnVHlwZU1pc21hdGNoID0gdmFsaWRpdHkudHlwZU1pc21hdGNoO1xuICAgICAgICB0aW1lb3V0ID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgaWYgKHZhbGlkaXR5LmJhZElucHV0ICE9PSBvcmlnQmFkSW5wdXQgfHwgdmFsaWRpdHkudHlwZU1pc21hdGNoICE9PSBvcmlnVHlwZU1pc21hdGNoKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihldik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFdvcmthcm91bmQgZm9yIEZpcmVmb3ggdmFsaWRhdGlvbiAjMTIxMDIuXG4gICAgdmFyIHZhbHVlID0gY3RybC4kaXNFbXB0eShjdHJsLiR2aWV3VmFsdWUpID8gJycgOiBjdHJsLiR2aWV3VmFsdWU7XG4gICAgaWYgKGVsZW1lbnQudmFsKCkgIT09IHZhbHVlKSB7XG4gICAgICBlbGVtZW50LnZhbCh2YWx1ZSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiB3ZWVrUGFyc2VyKGlzb1dlZWssIGV4aXN0aW5nRGF0ZSkge1xuICBpZiAoaXNEYXRlKGlzb1dlZWspKSB7XG4gICAgcmV0dXJuIGlzb1dlZWs7XG4gIH1cblxuICBpZiAoaXNTdHJpbmcoaXNvV2VlaykpIHtcbiAgICBXRUVLX1JFR0VYUC5sYXN0SW5kZXggPSAwO1xuICAgIHZhciBwYXJ0cyA9IFdFRUtfUkVHRVhQLmV4ZWMoaXNvV2Vlayk7XG4gICAgaWYgKHBhcnRzKSB7XG4gICAgICB2YXIgeWVhciA9ICtwYXJ0c1sxXSxcbiAgICAgICAgICB3ZWVrID0gK3BhcnRzWzJdLFxuICAgICAgICAgIGhvdXJzID0gMCxcbiAgICAgICAgICBtaW51dGVzID0gMCxcbiAgICAgICAgICBzZWNvbmRzID0gMCxcbiAgICAgICAgICBtaWxsaXNlY29uZHMgPSAwLFxuICAgICAgICAgIGZpcnN0VGh1cnMgPSBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKHllYXIpLFxuICAgICAgICAgIGFkZERheXMgPSAod2VlayAtIDEpICogNztcblxuICAgICAgaWYgKGV4aXN0aW5nRGF0ZSkge1xuICAgICAgICBob3VycyA9IGV4aXN0aW5nRGF0ZS5nZXRIb3VycygpO1xuICAgICAgICBtaW51dGVzID0gZXhpc3RpbmdEYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICAgIG1pbGxpc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsIGZpcnN0VGh1cnMuZ2V0RGF0ZSgpICsgYWRkRGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIE5hTjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihyZWdleHAsIG1hcHBpbmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlzbywgcHJldmlvdXNEYXRlKSB7XG4gICAgdmFyIHBhcnRzLCBtYXA7XG5cbiAgICBpZiAoaXNEYXRlKGlzbykpIHtcbiAgICAgIHJldHVybiBpc287XG4gICAgfVxuXG4gICAgaWYgKGlzU3RyaW5nKGlzbykpIHtcbiAgICAgIC8vIFdoZW4gYSBkYXRlIGlzIEpTT04naWZpZWQgdG8gd3JhcHMgaXRzZWxmIGluc2lkZSBvZiBhbiBleHRyYVxuICAgICAgLy8gc2V0IG9mIGRvdWJsZSBxdW90ZXMuIFRoaXMgbWFrZXMgdGhlIGRhdGUgcGFyc2luZyBjb2RlIHVuYWJsZVxuICAgICAgLy8gdG8gbWF0Y2ggdGhlIGRhdGUgc3RyaW5nIGFuZCBwYXJzZSBpdCBhcyBhIGRhdGUuXG4gICAgICBpZiAoaXNvLmNoYXJBdCgwKSA9PT0gJ1wiJyAmJiBpc28uY2hhckF0KGlzby5sZW5ndGggLSAxKSA9PT0gJ1wiJykge1xuICAgICAgICBpc28gPSBpc28uc3Vic3RyaW5nKDEsIGlzby5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChJU09fREFURV9SRUdFWFAudGVzdChpc28pKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShpc28pO1xuICAgICAgfVxuICAgICAgcmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgICBwYXJ0cyA9IHJlZ2V4cC5leGVjKGlzbyk7XG5cbiAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICBpZiAocHJldmlvdXNEYXRlKSB7XG4gICAgICAgICAgbWFwID0ge1xuICAgICAgICAgICAgeXl5eTogcHJldmlvdXNEYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICBNTTogcHJldmlvdXNEYXRlLmdldE1vbnRoKCkgKyAxLFxuICAgICAgICAgICAgZGQ6IHByZXZpb3VzRGF0ZS5nZXREYXRlKCksXG4gICAgICAgICAgICBISDogcHJldmlvdXNEYXRlLmdldEhvdXJzKCksXG4gICAgICAgICAgICBtbTogcHJldmlvdXNEYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgICAgICAgIHNzOiBwcmV2aW91c0RhdGUuZ2V0U2Vjb25kcygpLFxuICAgICAgICAgICAgc3NzOiBwcmV2aW91c0RhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMDAwXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXAgPSB7IHl5eXk6IDE5NzAsIE1NOiAxLCBkZDogMSwgSEg6IDAsIG1tOiAwLCBzczogMCwgc3NzOiAwIH07XG4gICAgICAgIH1cblxuICAgICAgICBmb3JFYWNoKHBhcnRzLCBmdW5jdGlvbihwYXJ0LCBpbmRleCkge1xuICAgICAgICAgIGlmIChpbmRleCA8IG1hcHBpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBtYXBbbWFwcGluZ1tpbmRleF1dID0gK3BhcnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKG1hcC55eXl5LCBtYXAuTU0gLSAxLCBtYXAuZGQsIG1hcC5ISCwgbWFwLm1tLCBtYXAuc3MgfHwgMCwgbWFwLnNzcyAqIDEwMDAgfHwgMCk7XG4gICAgICAgIGlmIChtYXAueXl5eSA8IDEwMCkge1xuICAgICAgICAgIC8vIEluIHRoZSBjb25zdHJ1Y3RvciwgMi1kaWdpdCB5ZWFycyBtYXAgdG8gMTkwMC0xOTk5LlxuICAgICAgICAgIC8vIFVzZSBgc2V0RnVsbFllYXIoKWAgdG8gc2V0IHRoZSBjb3JyZWN0IHllYXIuXG4gICAgICAgICAgZGF0ZS5zZXRGdWxsWWVhcihtYXAueXl5eSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTmFOO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEYXRlSW5wdXRUeXBlKHR5cGUsIHJlZ2V4cCwgcGFyc2VEYXRlLCBmb3JtYXQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGR5bmFtaWNEYXRlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIsICRmaWx0ZXIpIHtcbiAgICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsIHR5cGUpO1xuICAgIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gICAgdmFyIHByZXZpb3VzRGF0ZTtcbiAgICB2YXIgcHJldmlvdXNUaW1lem9uZTtcblxuICAgIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKGN0cmwuJGlzRW1wdHkodmFsdWUpKSByZXR1cm4gbnVsbDtcblxuICAgICAgaWYgKHJlZ2V4cC50ZXN0KHZhbHVlKSkge1xuICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgcmVhZCBjdHJsLiRtb2RlbFZhbHVlLCBhcyB0aGVyZSBtaWdodCBiZSBhIGRpZmZlcmVudFxuICAgICAgICAvLyBwYXJzZXIvZm9ybWF0dGVyIGluIHRoZSBwcm9jZXNzaW5nIGNoYWluIHNvIHRoYXQgdGhlIG1vZGVsXG4gICAgICAgIC8vIGNvbnRhaW5zIHNvbWUgZGlmZmVyZW50IGRhdGEgZm9ybWF0IVxuICAgICAgICByZXR1cm4gcGFyc2VEYXRlQW5kQ29udmVydFRpbWVab25lVG9Mb2NhbCh2YWx1ZSwgcHJldmlvdXNEYXRlKTtcbiAgICAgIH1cbiAgICAgIGN0cmwuJCRwYXJzZXJOYW1lID0gdHlwZTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG5cbiAgICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSAmJiAhaXNEYXRlKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdkYXRlZm10JywgJ0V4cGVjdGVkIGB7MH1gIHRvIGJlIGEgZGF0ZScsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1ZhbGlkRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgcHJldmlvdXNEYXRlID0gdmFsdWU7XG4gICAgICAgIHZhciB0aW1lem9uZSA9IGN0cmwuJG9wdGlvbnMuZ2V0T3B0aW9uKCd0aW1lem9uZScpO1xuICAgICAgICBpZiAodGltZXpvbmUpIHtcbiAgICAgICAgICBwcmV2aW91c1RpbWV6b25lID0gdGltZXpvbmU7XG4gICAgICAgICAgcHJldmlvdXNEYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChwcmV2aW91c0RhdGUsIHRpbWV6b25lLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJGZpbHRlcignZGF0ZScpKHZhbHVlLCBmb3JtYXQsIHRpbWV6b25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IG51bGw7XG4gICAgICAgIHByZXZpb3VzVGltZXpvbmUgPSBudWxsO1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoaXNEZWZpbmVkKGF0dHIubWluKSB8fCBhdHRyLm5nTWluKSB7XG4gICAgICB2YXIgbWluVmFsO1xuICAgICAgY3RybC4kdmFsaWRhdG9ycy5taW4gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIWlzVmFsaWREYXRlKHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHBhcnNlRGF0ZSh2YWx1ZSkgPj0gbWluVmFsO1xuICAgICAgfTtcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21pbicsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBtaW5WYWwgPSBwYXJzZU9ic2VydmVkRGF0ZVZhbHVlKHZhbCk7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoaXNEZWZpbmVkKGF0dHIubWF4KSB8fCBhdHRyLm5nTWF4KSB7XG4gICAgICB2YXIgbWF4VmFsO1xuICAgICAgY3RybC4kdmFsaWRhdG9ycy5tYXggPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIWlzVmFsaWREYXRlKHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtYXhWYWwpIHx8IHBhcnNlRGF0ZSh2YWx1ZSkgPD0gbWF4VmFsO1xuICAgICAgfTtcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21heCcsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBtYXhWYWwgPSBwYXJzZU9ic2VydmVkRGF0ZVZhbHVlKHZhbCk7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1ZhbGlkRGF0ZSh2YWx1ZSkge1xuICAgICAgLy8gSW52YWxpZCBEYXRlOiBnZXRUaW1lKCkgcmV0dXJucyBOYU5cbiAgICAgIHJldHVybiB2YWx1ZSAmJiAhKHZhbHVlLmdldFRpbWUgJiYgdmFsdWUuZ2V0VGltZSgpICE9PSB2YWx1ZS5nZXRUaW1lKCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKSB7XG4gICAgICByZXR1cm4gaXNEZWZpbmVkKHZhbCkgJiYgIWlzRGF0ZSh2YWwpID8gcGFyc2VEYXRlQW5kQ29udmVydFRpbWVab25lVG9Mb2NhbCh2YWwpIHx8IHVuZGVmaW5lZCA6IHZhbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZURhdGVBbmRDb252ZXJ0VGltZVpvbmVUb0xvY2FsKHZhbHVlLCBwcmV2aW91c0RhdGUpIHtcbiAgICAgIHZhciB0aW1lem9uZSA9IGN0cmwuJG9wdGlvbnMuZ2V0T3B0aW9uKCd0aW1lem9uZScpO1xuXG4gICAgICBpZiAocHJldmlvdXNUaW1lem9uZSAmJiBwcmV2aW91c1RpbWV6b25lICE9PSB0aW1lem9uZSkge1xuICAgICAgICAvLyBJZiB0aGUgdGltZXpvbmUgaGFzIGNoYW5nZWQsIGFkanVzdCB0aGUgcHJldmlvdXNEYXRlIHRvIHRoZSBkZWZhdWx0IHRpbWV6b25lXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIG5ldyBkYXRlIGlzIGNvbnZlcnRlZCB3aXRoIHRoZSBjb3JyZWN0IHRpbWV6b25lIG9mZnNldFxuICAgICAgICBwcmV2aW91c0RhdGUgPSBhZGREYXRlTWludXRlcyhwcmV2aW91c0RhdGUsIHRpbWV6b25lVG9PZmZzZXQocHJldmlvdXNUaW1lem9uZSkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFyc2VkRGF0ZSA9IHBhcnNlRGF0ZSh2YWx1ZSwgcHJldmlvdXNEYXRlKTtcblxuICAgICAgaWYgKCFpc05hTihwYXJzZWREYXRlKSAmJiB0aW1lem9uZSkge1xuICAgICAgICBwYXJzZWREYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChwYXJzZWREYXRlLCB0aW1lem9uZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGJhZElucHV0Q2hlY2tlcihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgcGFyc2VyTmFtZSkge1xuICB2YXIgbm9kZSA9IGVsZW1lbnRbMF07XG4gIHZhciBuYXRpdmVWYWxpZGF0aW9uID0gY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMgPSBpc09iamVjdChub2RlLnZhbGlkaXR5KTtcbiAgaWYgKG5hdGl2ZVZhbGlkYXRpb24pIHtcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciB2YWxpZGl0eSA9IGVsZW1lbnQucHJvcChWQUxJRElUWV9TVEFURV9QUk9QRVJUWSkgfHwge307XG4gICAgICBpZiAodmFsaWRpdHkuYmFkSW5wdXQgfHwgdmFsaWRpdHkudHlwZU1pc21hdGNoKSB7XG4gICAgICAgIGN0cmwuJCRwYXJzZXJOYW1lID0gcGFyc2VyTmFtZTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIG51bWJlckZvcm1hdHRlclBhcnNlcihjdHJsKSB7XG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChjdHJsLiRpc0VtcHR5KHZhbHVlKSkgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoTlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSkgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuXG4gICAgY3RybC4kJHBhcnNlck5hbWUgPSAnbnVtYmVyJztcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9KTtcblxuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoIWN0cmwuJGlzRW1wdHkodmFsdWUpKSB7XG4gICAgICBpZiAoIWlzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdudW1mbXQnLCAnRXhwZWN0ZWQgYHswfWAgdG8gYmUgYSBudW1iZXInLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTnVtYmVyQXR0clZhbCh2YWwpIHtcbiAgaWYgKGlzRGVmaW5lZCh2YWwpICYmICFpc051bWJlcih2YWwpKSB7XG4gICAgdmFsID0gcGFyc2VGbG9hdCh2YWwpO1xuICB9XG4gIHJldHVybiAhaXNOdW1iZXJOYU4odmFsKSA/IHZhbCA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXJJbnRlZ2VyKG51bSkge1xuICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNDYzNjUzNi9ob3ctdG8tY2hlY2staWYtYS12YXJpYWJsZS1pcy1hbi1pbnRlZ2VyLWluLWphdmFzY3JpcHQjMTQ3OTQwNjZcbiAgLy8gKG1pbnVzIHRoZSBhc3N1bXB0aW9uIHRoYXQgYG51bWAgaXMgYSBudW1iZXIpXG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgcmV0dXJuIChudW0gfCAwKSA9PT0gbnVtO1xufVxuXG5mdW5jdGlvbiBjb3VudERlY2ltYWxzKG51bSkge1xuICB2YXIgbnVtU3RyaW5nID0gbnVtLnRvU3RyaW5nKCk7XG4gIHZhciBkZWNpbWFsU3ltYm9sSW5kZXggPSBudW1TdHJpbmcuaW5kZXhPZignLicpO1xuXG4gIGlmIChkZWNpbWFsU3ltYm9sSW5kZXggPT09IC0xKSB7XG4gICAgaWYgKC0xIDwgbnVtICYmIG51bSA8IDEpIHtcbiAgICAgIC8vIEl0IG1heSBiZSBpbiB0aGUgZXhwb25lbnRpYWwgbm90YXRpb24gZm9ybWF0IChgMWUtWGApXG4gICAgICB2YXIgbWF0Y2ggPSAvZS0oXFxkKykkLy5leGVjKG51bVN0cmluZyk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVybiBudW1TdHJpbmcubGVuZ3RoIC0gZGVjaW1hbFN5bWJvbEluZGV4IC0gMTtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZEZvclN0ZXAodmlld1ZhbHVlLCBzdGVwQmFzZSwgc3RlcCkge1xuICAvLyBBdCB0aGlzIHBvaW50IGBzdGVwQmFzZWAgYW5kIGBzdGVwYCBhcmUgZXhwZWN0ZWQgdG8gYmUgbm9uLU5hTiB2YWx1ZXNcbiAgLy8gYW5kIGB2aWV3VmFsdWVgIGlzIGV4cGVjdGVkIHRvIGJlIGEgdmFsaWQgc3RyaW5naWZpZWQgbnVtYmVyLlxuICB2YXIgdmFsdWUgPSBOdW1iZXIodmlld1ZhbHVlKTtcblxuICB2YXIgaXNOb25JbnRlZ2VyVmFsdWUgPSAhaXNOdW1iZXJJbnRlZ2VyKHZhbHVlKTtcbiAgdmFyIGlzTm9uSW50ZWdlclN0ZXBCYXNlID0gIWlzTnVtYmVySW50ZWdlcihzdGVwQmFzZSk7XG4gIHZhciBpc05vbkludGVnZXJTdGVwID0gIWlzTnVtYmVySW50ZWdlcihzdGVwKTtcblxuICAvLyBEdWUgdG8gbGltaXRhdGlvbnMgaW4gRmxvYXRpbmcgUG9pbnQgQXJpdGhtZXRpYyAoZS5nLiBgMC4zIC0gMC4yICE9PSAwLjFgIG9yXG4gIC8vIGAwLjUgJSAwLjEgIT09IDBgKSwgd2UgbmVlZCB0byBjb252ZXJ0IGFsbCBudW1iZXJzIHRvIGludGVnZXJzLlxuICBpZiAoaXNOb25JbnRlZ2VyVmFsdWUgfHwgaXNOb25JbnRlZ2VyU3RlcEJhc2UgfHwgaXNOb25JbnRlZ2VyU3RlcCkge1xuICAgIHZhciB2YWx1ZURlY2ltYWxzID0gaXNOb25JbnRlZ2VyVmFsdWUgPyBjb3VudERlY2ltYWxzKHZhbHVlKSA6IDA7XG4gICAgdmFyIHN0ZXBCYXNlRGVjaW1hbHMgPSBpc05vbkludGVnZXJTdGVwQmFzZSA/IGNvdW50RGVjaW1hbHMoc3RlcEJhc2UpIDogMDtcbiAgICB2YXIgc3RlcERlY2ltYWxzID0gaXNOb25JbnRlZ2VyU3RlcCA/IGNvdW50RGVjaW1hbHMoc3RlcCkgOiAwO1xuXG4gICAgdmFyIGRlY2ltYWxDb3VudCA9IE1hdGgubWF4KHZhbHVlRGVjaW1hbHMsIHN0ZXBCYXNlRGVjaW1hbHMsIHN0ZXBEZWNpbWFscyk7XG4gICAgdmFyIG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgZGVjaW1hbENvdW50KTtcblxuICAgIHZhbHVlID0gdmFsdWUgKiBtdWx0aXBsaWVyO1xuICAgIHN0ZXBCYXNlID0gc3RlcEJhc2UgKiBtdWx0aXBsaWVyO1xuICAgIHN0ZXAgPSBzdGVwICogbXVsdGlwbGllcjtcblxuICAgIGlmIChpc05vbkludGVnZXJWYWx1ZSkgdmFsdWUgPSBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgICBpZiAoaXNOb25JbnRlZ2VyU3RlcEJhc2UpIHN0ZXBCYXNlID0gTWF0aC5yb3VuZChzdGVwQmFzZSk7XG4gICAgaWYgKGlzTm9uSW50ZWdlclN0ZXApIHN0ZXAgPSBNYXRoLnJvdW5kKHN0ZXApO1xuICB9XG5cbiAgcmV0dXJuICh2YWx1ZSAtIHN0ZXBCYXNlKSAlIHN0ZXAgPT09IDA7XG59XG5cbmZ1bmN0aW9uIG51bWJlcklucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XG4gIGJhZElucHV0Q2hlY2tlcihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJ251bWJlcicpO1xuICBudW1iZXJGb3JtYXR0ZXJQYXJzZXIoY3RybCk7XG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG5cbiAgdmFyIG1pblZhbDtcbiAgdmFyIG1heFZhbDtcblxuICBpZiAoaXNEZWZpbmVkKGF0dHIubWluKSB8fCBhdHRyLm5nTWluKSB7XG4gICAgY3RybC4kdmFsaWRhdG9ycy5taW4gPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQobWluVmFsKSB8fCB2aWV3VmFsdWUgPj0gbWluVmFsO1xuICAgIH07XG5cbiAgICBhdHRyLiRvYnNlcnZlKCdtaW4nLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgIG1pblZhbCA9IHBhcnNlTnVtYmVyQXR0clZhbCh2YWwpO1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGlzRGVmaW5lZChhdHRyLm1heCkgfHwgYXR0ci5uZ01heCkge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWF4ID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgdmlld1ZhbHVlIDw9IG1heFZhbDtcbiAgICB9O1xuXG4gICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XG4gICAgICBtYXhWYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChpc0RlZmluZWQoYXR0ci5zdGVwKSB8fCBhdHRyLm5nU3RlcCkge1xuICAgIHZhciBzdGVwVmFsO1xuICAgIGN0cmwuJHZhbGlkYXRvcnMuc3RlcCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCBpc1VuZGVmaW5lZChzdGVwVmFsKSB8fFxuICAgICAgICAgICAgIGlzVmFsaWRGb3JTdGVwKHZpZXdWYWx1ZSwgbWluVmFsIHx8IDAsIHN0ZXBWYWwpO1xuICAgIH07XG5cbiAgICBhdHRyLiRvYnNlcnZlKCdzdGVwJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICBzdGVwVmFsID0gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCk7XG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmFuZ2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICdyYW5nZScpO1xuICBudW1iZXJGb3JtYXR0ZXJQYXJzZXIoY3RybCk7XG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG5cbiAgdmFyIHN1cHBvcnRzUmFuZ2UgPSBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyAmJiBlbGVtZW50WzBdLnR5cGUgPT09ICdyYW5nZScsXG4gICAgICBtaW5WYWwgPSBzdXBwb3J0c1JhbmdlID8gMCA6IHVuZGVmaW5lZCxcbiAgICAgIG1heFZhbCA9IHN1cHBvcnRzUmFuZ2UgPyAxMDAgOiB1bmRlZmluZWQsXG4gICAgICBzdGVwVmFsID0gc3VwcG9ydHNSYW5nZSA/IDEgOiB1bmRlZmluZWQsXG4gICAgICB2YWxpZGl0eSA9IGVsZW1lbnRbMF0udmFsaWRpdHksXG4gICAgICBoYXNNaW5BdHRyID0gaXNEZWZpbmVkKGF0dHIubWluKSxcbiAgICAgIGhhc01heEF0dHIgPSBpc0RlZmluZWQoYXR0ci5tYXgpLFxuICAgICAgaGFzU3RlcEF0dHIgPSBpc0RlZmluZWQoYXR0ci5zdGVwKTtcblxuICB2YXIgb3JpZ2luYWxSZW5kZXIgPSBjdHJsLiRyZW5kZXI7XG5cbiAgY3RybC4kcmVuZGVyID0gc3VwcG9ydHNSYW5nZSAmJiBpc0RlZmluZWQodmFsaWRpdHkucmFuZ2VVbmRlcmZsb3cpICYmIGlzRGVmaW5lZCh2YWxpZGl0eS5yYW5nZU92ZXJmbG93KSA/XG4gICAgLy9Ccm93c2VycyB0aGF0IGltcGxlbWVudCByYW5nZSB3aWxsIHNldCB0aGVzZSB2YWx1ZXMgYXV0b21hdGljYWxseSwgYnV0IHJlYWRpbmcgdGhlIGFkanVzdGVkIHZhbHVlcyBhZnRlclxuICAgIC8vJHJlbmRlciB3b3VsZCBjYXVzZSB0aGUgbWluIC8gbWF4IHZhbGlkYXRvcnMgdG8gYmUgYXBwbGllZCB3aXRoIHRoZSB3cm9uZyB2YWx1ZVxuICAgIGZ1bmN0aW9uIHJhbmdlUmVuZGVyKCkge1xuICAgICAgb3JpZ2luYWxSZW5kZXIoKTtcbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbGVtZW50LnZhbCgpKTtcbiAgICB9IDpcbiAgICBvcmlnaW5hbFJlbmRlcjtcblxuICBpZiAoaGFzTWluQXR0cikge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWluID0gc3VwcG9ydHNSYW5nZSA/XG4gICAgICAvLyBTaW5jZSBhbGwgYnJvd3NlcnMgc2V0IHRoZSBpbnB1dCB0byBhIHZhbGlkIHZhbHVlLCB3ZSBkb24ndCBuZWVkIHRvIGNoZWNrIHZhbGlkaXR5XG4gICAgICBmdW5jdGlvbiBub29wTWluVmFsaWRhdG9yKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG4gICAgICAvLyBub24tc3VwcG9ydCBicm93c2VycyB2YWxpZGF0ZSB0aGUgbWluIHZhbFxuICAgICAgZnVuY3Rpb24gbWluVmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1pblZhbCkgfHwgdmlld1ZhbHVlID49IG1pblZhbDtcbiAgICAgIH07XG5cbiAgICBzZXRJbml0aWFsVmFsdWVBbmRPYnNlcnZlcignbWluJywgbWluQ2hhbmdlKTtcbiAgfVxuXG4gIGlmIChoYXNNYXhBdHRyKSB7XG4gICAgY3RybC4kdmFsaWRhdG9ycy5tYXggPSBzdXBwb3J0c1JhbmdlID9cbiAgICAgIC8vIFNpbmNlIGFsbCBicm93c2VycyBzZXQgdGhlIGlucHV0IHRvIGEgdmFsaWQgdmFsdWUsIHdlIGRvbid0IG5lZWQgdG8gY2hlY2sgdmFsaWRpdHlcbiAgICAgIGZ1bmN0aW9uIG5vb3BNYXhWYWxpZGF0b3IoKSB7IHJldHVybiB0cnVlOyB9IDpcbiAgICAgIC8vIG5vbi1zdXBwb3J0IGJyb3dzZXJzIHZhbGlkYXRlIHRoZSBtYXggdmFsXG4gICAgICBmdW5jdGlvbiBtYXhWYWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQobWF4VmFsKSB8fCB2aWV3VmFsdWUgPD0gbWF4VmFsO1xuICAgICAgfTtcblxuICAgIHNldEluaXRpYWxWYWx1ZUFuZE9ic2VydmVyKCdtYXgnLCBtYXhDaGFuZ2UpO1xuICB9XG5cbiAgaWYgKGhhc1N0ZXBBdHRyKSB7XG4gICAgY3RybC4kdmFsaWRhdG9ycy5zdGVwID0gc3VwcG9ydHNSYW5nZSA/XG4gICAgICBmdW5jdGlvbiBuYXRpdmVTdGVwVmFsaWRhdG9yKCkge1xuICAgICAgICAvLyBDdXJyZW50bHksIG9ubHkgRkYgaW1wbGVtZW50cyB0aGUgc3BlYyBvbiBzdGVwIGNoYW5nZSBjb3JyZWN0bHkgKGkuZS4gYWRqdXN0aW5nIHRoZVxuICAgICAgICAvLyBpbnB1dCBlbGVtZW50IHZhbHVlIHRvIGEgdmFsaWQgdmFsdWUpLiBJdCdzIHBvc3NpYmxlIHRoYXQgb3RoZXIgYnJvd3NlcnMgc2V0IHRoZSBzdGVwTWlzbWF0Y2hcbiAgICAgICAgLy8gdmFsaWRpdHkgZXJyb3IgaW5zdGVhZCwgc28gd2UgY2FuIGF0IGxlYXN0IHJlcG9ydCBhbiBlcnJvciBpbiB0aGF0IGNhc2UuXG4gICAgICAgIHJldHVybiAhdmFsaWRpdHkuc3RlcE1pc21hdGNoO1xuICAgICAgfSA6XG4gICAgICAvLyBuZ1N0ZXAgZG9lc24ndCBzZXQgdGhlIHNldHAgYXR0ciwgc28gdGhlIGJyb3dzZXIgZG9lc24ndCBhZGp1c3QgdGhlIGlucHV0IHZhbHVlIGFzIHNldHRpbmcgc3RlcCB3b3VsZFxuICAgICAgZnVuY3Rpb24gc3RlcFZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCBpc1VuZGVmaW5lZChzdGVwVmFsKSB8fFxuICAgICAgICAgICAgICAgaXNWYWxpZEZvclN0ZXAodmlld1ZhbHVlLCBtaW5WYWwgfHwgMCwgc3RlcFZhbCk7XG4gICAgICB9O1xuXG4gICAgc2V0SW5pdGlhbFZhbHVlQW5kT2JzZXJ2ZXIoJ3N0ZXAnLCBzdGVwQ2hhbmdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEluaXRpYWxWYWx1ZUFuZE9ic2VydmVyKGh0bWxBdHRyTmFtZSwgY2hhbmdlRm4pIHtcbiAgICAvLyBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlcyBzZXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBvbmx5IGFmdGVyIGEgZGlnZXN0LCBidXQgd2UgbmVlZCB0aGVcbiAgICAvLyBhdHRyaWJ1dGUgdmFsdWUgd2hlbiB0aGUgaW5wdXQgaXMgZmlyc3QgcmVuZGVyZWQsIHNvIHRoYXQgdGhlIGJyb3dzZXIgY2FuIGFkanVzdCB0aGVcbiAgICAvLyBpbnB1dCB2YWx1ZSBiYXNlZCBvbiB0aGUgbWluL21heCB2YWx1ZVxuICAgIGVsZW1lbnQuYXR0cihodG1sQXR0ck5hbWUsIGF0dHJbaHRtbEF0dHJOYW1lXSk7XG4gICAgYXR0ci4kb2JzZXJ2ZShodG1sQXR0ck5hbWUsIGNoYW5nZUZuKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1pbkNoYW5nZSh2YWwpIHtcbiAgICBtaW5WYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAvLyBpZ25vcmUgY2hhbmdlcyBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydHNSYW5nZSkge1xuICAgICAgdmFyIGVsVmFsID0gZWxlbWVudC52YWwoKTtcbiAgICAgIC8vIElFMTEgZG9lc24ndCBzZXQgdGhlIGVsIHZhbCBjb3JyZWN0bHkgaWYgdGhlIG1pblZhbCBpcyBncmVhdGVyIHRoYW4gdGhlIGVsZW1lbnQgdmFsdWVcbiAgICAgIGlmIChtaW5WYWwgPiBlbFZhbCkge1xuICAgICAgICBlbFZhbCA9IG1pblZhbDtcbiAgICAgICAgZWxlbWVudC52YWwoZWxWYWwpO1xuICAgICAgfVxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsVmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1heENoYW5nZSh2YWwpIHtcbiAgICBtYXhWYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAvLyBpZ25vcmUgY2hhbmdlcyBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydHNSYW5nZSkge1xuICAgICAgdmFyIGVsVmFsID0gZWxlbWVudC52YWwoKTtcbiAgICAgIC8vIElFMTEgZG9lc24ndCBzZXQgdGhlIGVsIHZhbCBjb3JyZWN0bHkgaWYgdGhlIG1heFZhbCBpcyBsZXNzIHRoYW4gdGhlIGVsZW1lbnQgdmFsdWVcbiAgICAgIGlmIChtYXhWYWwgPCBlbFZhbCkge1xuICAgICAgICBlbGVtZW50LnZhbChtYXhWYWwpO1xuICAgICAgICAvLyBJRTExIGFuZCBDaHJvbWUgZG9uJ3Qgc2V0IHRoZSB2YWx1ZSB0byB0aGUgbWluVmFsIHdoZW4gbWF4IDwgbWluXG4gICAgICAgIGVsVmFsID0gbWF4VmFsIDwgbWluVmFsID8gbWluVmFsIDogbWF4VmFsO1xuICAgICAgfVxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsVmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0ZXBDaGFuZ2UodmFsKSB7XG4gICAgc3RlcFZhbCA9IHBhcnNlTnVtYmVyQXR0clZhbCh2YWwpO1xuICAgIC8vIGlnbm9yZSBjaGFuZ2VzIGJlZm9yZSBtb2RlbCBpcyBpbml0aWFsaXplZFxuICAgIGlmIChpc051bWJlck5hTihjdHJsLiRtb2RlbFZhbHVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNvbWUgYnJvd3NlcnMgZG9uJ3QgYWRqdXN0IHRoZSBpbnB1dCB2YWx1ZSBjb3JyZWN0bHksIGJ1dCBzZXQgdGhlIHN0ZXBNaXNtYXRjaCBlcnJvclxuICAgIGlmIChzdXBwb3J0c1JhbmdlICYmIGN0cmwuJHZpZXdWYWx1ZSAhPT0gZWxlbWVudC52YWwoKSkge1xuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnQudmFsKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHVybElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XG4gIC8vIE5vdGU6IG5vIGJhZElucHV0Q2hlY2tlciBoZXJlIGJ5IHB1cnBvc2UgYXMgYHVybGAgaXMgb25seSBhIHZhbGlkYXRpb25cbiAgLy8gaW4gYnJvd3NlcnMsIGkuZS4gd2UgY2FuIGFsd2F5cyByZWFkIG91dCBpbnB1dC52YWx1ZSBldmVuIGlmIGl0IGlzIG5vdCB2YWxpZCFcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcbiAgc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCk7XG5cbiAgY3RybC4kdmFsaWRhdG9ycy51cmwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgVVJMX1JFR0VYUC50ZXN0KHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZW1haWxJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICAvLyBOb3RlOiBubyBiYWRJbnB1dENoZWNrZXIgaGVyZSBieSBwdXJwb3NlIGFzIGB1cmxgIGlzIG9ubHkgYSB2YWxpZGF0aW9uXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xuXG4gIGN0cmwuJHZhbGlkYXRvcnMuZW1haWwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgRU1BSUxfUkVHRVhQLnRlc3QodmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiByYWRpb0lucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xuICB2YXIgZG9UcmltID0gIWF0dHIubmdUcmltIHx8IHRyaW0oYXR0ci5uZ1RyaW0pICE9PSAnZmFsc2UnO1xuICAvLyBtYWtlIHRoZSBuYW1lIHVuaXF1ZSwgaWYgbm90IGRlZmluZWRcbiAgaWYgKGlzVW5kZWZpbmVkKGF0dHIubmFtZSkpIHtcbiAgICBlbGVtZW50LmF0dHIoJ25hbWUnLCBuZXh0VWlkKCkpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICB2YXIgdmFsdWU7XG4gICAgaWYgKGVsZW1lbnRbMF0uY2hlY2tlZCkge1xuICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgaWYgKGRvVHJpbSkge1xuICAgICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xuICAgICAgfVxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlLCBldiAmJiBldi50eXBlKTtcbiAgICB9XG4gIH07XG5cbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgaWYgKGRvVHJpbSkge1xuICAgICAgdmFsdWUgPSB0cmltKHZhbHVlKTtcbiAgICB9XG4gICAgZWxlbWVudFswXS5jaGVja2VkID0gKHZhbHVlID09PSBjdHJsLiR2aWV3VmFsdWUpO1xuICB9O1xuXG4gIGF0dHIuJG9ic2VydmUoJ3ZhbHVlJywgY3RybC4kcmVuZGVyKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBjb250ZXh0LCBuYW1lLCBleHByZXNzaW9uLCBmYWxsYmFjaykge1xuICB2YXIgcGFyc2VGbjtcbiAgaWYgKGlzRGVmaW5lZChleHByZXNzaW9uKSkge1xuICAgIHBhcnNlRm4gPSAkcGFyc2UoZXhwcmVzc2lvbik7XG4gICAgaWYgKCFwYXJzZUZuLmNvbnN0YW50KSB7XG4gICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdjb25zdGV4cHInLCAnRXhwZWN0ZWQgY29uc3RhbnQgZXhwcmVzc2lvbiBmb3IgYHswfWAsIGJ1dCBzYXcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgezF9YC4nLCBuYW1lLCBleHByZXNzaW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlRm4oY29udGV4dCk7XG4gIH1cbiAgcmV0dXJuIGZhbGxiYWNrO1xufVxuXG5mdW5jdGlvbiBjaGVja2JveElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyLCAkZmlsdGVyLCAkcGFyc2UpIHtcbiAgdmFyIHRydWVWYWx1ZSA9IHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgc2NvcGUsICduZ1RydWVWYWx1ZScsIGF0dHIubmdUcnVlVmFsdWUsIHRydWUpO1xuICB2YXIgZmFsc2VWYWx1ZSA9IHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgc2NvcGUsICduZ0ZhbHNlVmFsdWUnLCBhdHRyLm5nRmFsc2VWYWx1ZSwgZmFsc2UpO1xuXG4gIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnRbMF0uY2hlY2tlZCwgZXYgJiYgZXYudHlwZSk7XG4gIH07XG5cbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGVsZW1lbnRbMF0uY2hlY2tlZCA9IGN0cmwuJHZpZXdWYWx1ZTtcbiAgfTtcblxuICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgYCRpc0VtcHR5YCBiZWNhdXNlIHRoZSAkdmlld1ZhbHVlIG9mIGFuIGVtcHR5IGNoZWNrYm94IGlzIGFsd2F5cyBzZXQgdG8gYGZhbHNlYFxuICAvLyBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIHBhcnNlciBiZWxvdywgd2hpY2ggY29tcGFyZXMgdGhlIGAkbW9kZWxWYWx1ZWAgd2l0aCBgdHJ1ZVZhbHVlYCB0byBjb252ZXJ0XG4gIC8vIGl0IHRvIGEgYm9vbGVhbi5cbiAgY3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBmYWxzZTtcbiAgfTtcblxuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZXF1YWxzKHZhbHVlLCB0cnVlVmFsdWUpO1xuICB9KTtcblxuICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPyB0cnVlVmFsdWUgOiBmYWxzZVZhbHVlO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHRleHRhcmVhXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSFRNTCB0ZXh0YXJlYSBlbGVtZW50IGNvbnRyb2wgd2l0aCBBbmd1bGFySlMgZGF0YS1iaW5kaW5nLiBUaGUgZGF0YS1iaW5kaW5nIGFuZCB2YWxpZGF0aW9uXG4gKiBwcm9wZXJ0aWVzIG9mIHRoaXMgZWxlbWVudCBhcmUgZXhhY3RseSB0aGUgc2FtZSBhcyB0aG9zZSBvZiB0aGVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXQgZWxlbWVudH0uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gKiAgICBtaW5sZW5ndGguXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2YgYW55XG4gKiAgICBsZW5ndGguXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gKiAgICBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHBcbiAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gKiAgICAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAqICAgIGFjY291bnQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtuZ1RyaW09dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlIEFuZ3VsYXJKUyB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxuICpcbiAqIEBrbm93bklzc3VlXG4gKlxuICogV2hlbiBzcGVjaWZ5aW5nIHRoZSBgcGxhY2Vob2xkZXJgIGF0dHJpYnV0ZSBvZiBgPHRleHRhcmVhPmAsIEludGVybmV0IEV4cGxvcmVyIHdpbGwgdGVtcG9yYXJpbHlcbiAqIGluc2VydCB0aGUgcGxhY2Vob2xkZXIgdmFsdWUgYXMgdGhlIHRleHRhcmVhJ3MgY29udGVudC4gSWYgdGhlIHBsYWNlaG9sZGVyIHZhbHVlIGNvbnRhaW5zXG4gKiBpbnRlcnBvbGF0aW9uIChge3sgLi4uIH19YCksIGFuIGVycm9yIHdpbGwgYmUgbG9nZ2VkIGluIHRoZSBjb25zb2xlIHdoZW4gQW5ndWxhckpTIHRyaWVzIHRvIHVwZGF0ZVxuICogdGhlIHZhbHVlIG9mIHRoZSBieS10aGVuLXJlbW92ZWQgdGV4dCBub2RlLiBUaGlzIGRvZXNuJ3QgYWZmZWN0IHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoZVxuICogdGV4dGFyZWEsIGJ1dCBjYW4gYmUgdW5kZXNpcmFibGUuXG4gKlxuICogWW91IGNhbiB3b3JrIGFyb3VuZCB0aGlzIEludGVybmV0IEV4cGxvcmVyIGlzc3VlIGJ5IHVzaW5nIGBuZy1hdHRyLXBsYWNlaG9sZGVyYCBpbnN0ZWFkIG9mXG4gKiBgcGxhY2Vob2xkZXJgIG9uIHRleHRhcmVhcywgd2hlbmV2ZXIgeW91IG5lZWQgaW50ZXJwb2xhdGlvbiBpbiB0aGUgcGxhY2Vob2xkZXIgdmFsdWUuIFlvdSBjYW5cbiAqIGZpbmQgbW9yZSBkZXRhaWxzIG9uIGBuZ0F0dHJgIGluIHRoZVxuICogW0ludGVycG9sYXRpb25dKGd1aWRlL2ludGVycG9sYXRpb24jLW5nYXR0ci1mb3ItYmluZGluZy10by1hcmJpdHJhcnktYXR0cmlidXRlcykgc2VjdGlvbiBvZiB0aGVcbiAqIERldmVsb3BlciBHdWlkZS5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgaW5wdXRcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVE1MIGlucHV0IGVsZW1lbnQgY29udHJvbC4gV2hlbiB1c2VkIHRvZ2V0aGVyIHdpdGgge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSwgaXQgcHJvdmlkZXMgZGF0YS1iaW5kaW5nLFxuICogaW5wdXQgc3RhdGUgY29udHJvbCwgYW5kIHZhbGlkYXRpb24uXG4gKiBJbnB1dCBjb250cm9sIGZvbGxvd3MgSFRNTDUgaW5wdXQgdHlwZXMgYW5kIHBvbHlmaWxscyB0aGUgSFRNTDUgdmFsaWRhdGlvbiBiZWhhdmlvciBmb3Igb2xkZXIgYnJvd3NlcnMuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBOb3QgZXZlcnkgZmVhdHVyZSBvZmZlcmVkIGlzIGF2YWlsYWJsZSBmb3IgYWxsIGlucHV0IHR5cGVzLlxuICogU3BlY2lmaWNhbGx5LCBkYXRhIGJpbmRpbmcgYW5kIGV2ZW50IGhhbmRsaW5nIHZpYSBgbmctbW9kZWxgIGlzIHVuc3VwcG9ydGVkIGZvciBgaW5wdXRbZmlsZV1gLlxuICogPC9kaXY+XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBuZ1JlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgaWYgc2V0IHRvIHRydWVcbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gKiAgICBtaW5sZW5ndGguXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2YgYW55XG4gKiAgICBsZW5ndGguXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gKiAgICB2YWx1ZSBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHBcbiAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gKiAgICAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAqICAgIGFjY291bnQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtuZ1RyaW09dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlIEFuZ3VsYXJKUyB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxuICogICAgVGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZCBmb3IgaW5wdXRbdHlwZT1wYXNzd29yZF0gY29udHJvbHMsIHdoaWNoIHdpbGwgbmV2ZXIgdHJpbSB0aGVcbiAqICAgIGlucHV0LlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cImlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImlucHV0RXhhbXBsZVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdpbnB1dEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICRzY29wZS51c2VyID0ge25hbWU6ICdndWVzdCcsIGxhc3Q6ICd2aXNpdG9yJ307XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICBVc2VyIG5hbWU6XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiIG5nLW1vZGVsPVwidXNlci5uYW1lXCIgcmVxdWlyZWQ+XG4gICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0udXNlck5hbWUuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgTGFzdCBuYW1lOlxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwibGFzdE5hbWVcIiBuZy1tb2RlbD1cInVzZXIubGFzdFwiXG4gICAgICAgICAgICAgIG5nLW1pbmxlbmd0aD1cIjNcIiBuZy1tYXhsZW5ndGg9XCIxMFwiPlxuICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmxhc3ROYW1lLiRlcnJvci5taW5sZW5ndGhcIj5cbiAgICAgICAgICAgICAgIFRvbyBzaG9ydCE8L3NwYW4+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubGFzdE5hbWUuJGVycm9yLm1heGxlbmd0aFwiPlxuICAgICAgICAgICAgICAgVG9vIGxvbmchPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgIDxocj5cbiAgICAgICAgIDx0dD51c2VyID0ge3t1c2VyfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLnVzZXJOYW1lLiR2YWxpZCA9IHt7bXlGb3JtLnVzZXJOYW1lLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS51c2VyTmFtZS4kZXJyb3IgPSB7e215Rm9ybS51c2VyTmFtZS4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0ubGFzdE5hbWUuJHZhbGlkID0ge3tteUZvcm0ubGFzdE5hbWUuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLmxhc3ROYW1lLiRlcnJvciA9IHt7bXlGb3JtLmxhc3ROYW1lLiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLm1pbmxlbmd0aCA9IHt7ISFteUZvcm0uJGVycm9yLm1pbmxlbmd0aH19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IubWF4bGVuZ3RoID0ge3shIW15Rm9ybS4kZXJyb3IubWF4bGVuZ3RofX08L3R0Pjxici8+XG4gICAgICAgPC9kaXY+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIHZhciB1c2VyID0gZWxlbWVudChieS5leGFjdEJpbmRpbmcoJ3VzZXInKSk7XG4gICAgICAgIHZhciB1c2VyTmFtZVZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0udXNlck5hbWUuJHZhbGlkJykpO1xuICAgICAgICB2YXIgbGFzdE5hbWVWYWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmxhc3ROYW1lLiR2YWxpZCcpKTtcbiAgICAgICAgdmFyIGxhc3ROYW1lRXJyb3IgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5sYXN0TmFtZS4kZXJyb3InKSk7XG4gICAgICAgIHZhciBmb3JtVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS4kdmFsaWQnKSk7XG4gICAgICAgIHZhciB1c2VyTmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlci5uYW1lJykpO1xuICAgICAgICB2YXIgdXNlckxhc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubGFzdCcpKTtcblxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIixcImxhc3RcIjpcInZpc2l0b3JcIn0nKTtcbiAgICAgICAgICBleHBlY3QodXNlck5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5IHdoZW4gcmVxdWlyZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB1c2VyTmFtZUlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgdXNlck5hbWVJbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibGFzdFwiOlwidmlzaXRvclwifScpO1xuICAgICAgICAgIGV4cGVjdCh1c2VyTmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgdmFsaWQgaWYgZW1wdHkgd2hlbiBtaW4gbGVuZ3RoIGlzIHNldCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwiLFwibGFzdFwiOlwiXCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBsZXNzIHRoYW4gcmVxdWlyZWQgbWluIGxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCd4eCcpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lRXJyb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ21pbmxlbmd0aCcpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBsb25nZXIgdGhhbiBtYXggbGVuZ3RoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuc2VuZEtleXMoJ3NvbWUgcmlkaWN1bG91c2x5IGxvbmcgbmFtZScpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lRXJyb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ21heGxlbmd0aCcpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIGlucHV0RGlyZWN0aXZlID0gWyckYnJvd3NlcicsICckc25pZmZlcicsICckZmlsdGVyJywgJyRwYXJzZScsXG4gICAgZnVuY3Rpb24oJGJyb3dzZXIsICRzbmlmZmVyLCAkZmlsdGVyLCAkcGFyc2UpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6IFsnP25nTW9kZWwnXSxcbiAgICBsaW5rOiB7XG4gICAgICBwcmU6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICBpZiAoY3RybHNbMF0pIHtcbiAgICAgICAgICAoaW5wdXRUeXBlW2xvd2VyY2FzZShhdHRyLnR5cGUpXSB8fCBpbnB1dFR5cGUudGV4dCkoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzWzBdLCAkc25pZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGJyb3dzZXIsICRmaWx0ZXIsICRwYXJzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxuXG5cbnZhciBDT05TVEFOVF9WQUxVRV9SRUdFWFAgPSAvXih0cnVlfGZhbHNlfFxcZCspJC87XG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nVmFsdWVcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBCaW5kcyB0aGUgZ2l2ZW4gZXhwcmVzc2lvbiB0byB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQuXG4gKlxuICogSXQgaXMgbWFpbmx5IHVzZWQgb24ge0BsaW5rIGlucHV0W3JhZGlvXSBgaW5wdXRbcmFkaW9dYH0gYW5kIG9wdGlvbiBlbGVtZW50cyxcbiAqIHNvIHRoYXQgd2hlbiB0aGUgZWxlbWVudCBpcyBzZWxlY3RlZCwgdGhlIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0gb2YgdGhhdCBlbGVtZW50IChvciBpdHNcbiAqIHtAbGluayBzZWxlY3QgYHNlbGVjdGB9IHBhcmVudCBlbGVtZW50KSBpcyBzZXQgdG8gdGhlIGJvdW5kIHZhbHVlLiBJdCBpcyBlc3BlY2lhbGx5IHVzZWZ1bFxuICogZm9yIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCBsaXN0cyB1c2luZyB7QGxpbmsgbmdSZXBlYXQgYG5nUmVwZWF0YH0sIGFzIHNob3duIGJlbG93LlxuICpcbiAqIEl0IGNhbiBhbHNvIGJlIHVzZWQgdG8gYWNoaWV2ZSBvbmUtd2F5IGJpbmRpbmcgb2YgYSBnaXZlbiBleHByZXNzaW9uIHRvIGFuIGlucHV0IGVsZW1lbnRcbiAqIHN1Y2ggYXMgYW4gYGlucHV0W3RleHRdYCBvciBhIGB0ZXh0YXJlYWAsIHdoZW4gdGhhdCBlbGVtZW50IGRvZXMgbm90IHVzZSBuZ01vZGVsLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1ZhbHVlIEFuZ3VsYXJKUyBleHByZXNzaW9uLCB3aG9zZSB2YWx1ZSB3aWxsIGJlIGJvdW5kIHRvIHRoZSBgdmFsdWVgIGF0dHJpYnV0ZVxuICogYW5kIGB2YWx1ZWAgcHJvcGVydHkgb2YgdGhlIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmdWYWx1ZS1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ2YWx1ZUV4YW1wbGVcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndmFsdWVFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ3BpenphJywgJ3VuaWNvcm5zJywgJ3JvYm90cyddO1xuICAgICAgICAgICAgICAkc2NvcGUubXkgPSB7IGZhdm9yaXRlOiAndW5pY29ybnMnIH07XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgIDxmb3JtIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgIDxoMj5XaGljaCBpcyB5b3VyIGZhdm9yaXRlPzwvaDI+XG4gICAgICAgICAgICA8bGFiZWwgbmctcmVwZWF0PVwibmFtZSBpbiBuYW1lc1wiIGZvcj1cInt7bmFtZX19XCI+XG4gICAgICAgICAgICAgIHt7bmFtZX19XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJteS5mYXZvcml0ZVwiXG4gICAgICAgICAgICAgICAgICAgICBuZy12YWx1ZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgaWQ9XCJ7e25hbWV9fVwiXG4gICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZmF2b3JpdGVcIj5cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGRpdj5Zb3UgY2hvc2Uge3tteS5mYXZvcml0ZX19PC9kaXY+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgdmFyIGZhdm9yaXRlID0gZWxlbWVudChieS5iaW5kaW5nKCdteS5mYXZvcml0ZScpKTtcblxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QoZmF2b3JpdGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3VuaWNvcm5zJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnc2hvdWxkIGJpbmQgdGhlIHZhbHVlcyB0byB0aGUgaW5wdXRzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudC5hbGwoYnkubW9kZWwoJ215LmZhdm9yaXRlJykpLmdldCgwKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChmYXZvcml0ZS5nZXRUZXh0KCkpLnRvQ29udGFpbigncGl6emEnKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdWYWx1ZURpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICAvKipcbiAgICogIGlucHV0cyB1c2UgdGhlIHZhbHVlIGF0dHJpYnV0ZSBhcyB0aGVpciBkZWZhdWx0IHZhbHVlIGlmIHRoZSB2YWx1ZSBwcm9wZXJ0eSBpcyBub3Qgc2V0LlxuICAgKiAgT25jZSB0aGUgdmFsdWUgcHJvcGVydHkgaGFzIGJlZW4gc2V0IChieSBhZGRpbmcgaW5wdXQpLCBpdCB3aWxsIG5vdCByZWFjdCB0byBjaGFuZ2VzIHRvXG4gICAqICB0aGUgdmFsdWUgYXR0cmlidXRlIGFueW1vcmUuIFNldHRpbmcgYm90aCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IGZpeGVzIHRoaXMgYmVoYXZpb3IsIGFuZFxuICAgKiAgbWFrZXMgaXQgcG9zc2libGUgdG8gdXNlIG5nVmFsdWUgYXMgYSBzb3J0IG9mIG9uZS13YXkgYmluZC5cbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnRWYWx1ZShlbGVtZW50LCBhdHRyLCB2YWx1ZSkge1xuICAgIC8vIFN1cHBvcnQ6IElFOSBvbmx5XG4gICAgLy8gSW4gSUU5IHZhbHVlcyBhcmUgY29udmVydGVkIHRvIHN0cmluZyAoZS5nLiBgaW5wdXQudmFsdWUgPSBudWxsYCByZXN1bHRzIGluIGBpbnB1dC52YWx1ZSA9PT0gJ251bGwnYCkuXG4gICAgdmFyIHByb3BWYWx1ZSA9IGlzRGVmaW5lZCh2YWx1ZSkgPyB2YWx1ZSA6IChtc2llID09PSA5KSA/ICcnIDogbnVsbDtcbiAgICBlbGVtZW50LnByb3AoJ3ZhbHVlJywgcHJvcFZhbHVlKTtcbiAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgdmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHByaW9yaXR5OiAxMDAsXG4gICAgY29tcGlsZTogZnVuY3Rpb24odHBsLCB0cGxBdHRyKSB7XG4gICAgICBpZiAoQ09OU1RBTlRfVkFMVUVfUkVHRVhQLnRlc3QodHBsQXR0ci5uZ1ZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUNvbnN0YW50TGluayhzY29wZSwgZWxtLCBhdHRyKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gc2NvcGUuJGV2YWwoYXR0ci5uZ1ZhbHVlKTtcbiAgICAgICAgICB1cGRhdGVFbGVtZW50VmFsdWUoZWxtLCBhdHRyLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUxpbmsoc2NvcGUsIGVsbSwgYXR0cikge1xuICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nVmFsdWUsIGZ1bmN0aW9uIHZhbHVlV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHVwZGF0ZUVsZW1lbnRWYWx1ZShlbG0sIGF0dHIsIHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmluZFxuICogQHJlc3RyaWN0IEFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQmluZGAgYXR0cmlidXRlIHRlbGxzIEFuZ3VsYXJKUyB0byByZXBsYWNlIHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHNwZWNpZmllZCBIVE1MIGVsZW1lbnRcbiAqIHdpdGggdGhlIHZhbHVlIG9mIGEgZ2l2ZW4gZXhwcmVzc2lvbiwgYW5kIHRvIHVwZGF0ZSB0aGUgdGV4dCBjb250ZW50IHdoZW4gdGhlIHZhbHVlIG9mIHRoYXRcbiAqIGV4cHJlc3Npb24gY2hhbmdlcy5cbiAqXG4gKiBUeXBpY2FsbHksIHlvdSBkb24ndCB1c2UgYG5nQmluZGAgZGlyZWN0bHksIGJ1dCBpbnN0ZWFkIHlvdSB1c2UgdGhlIGRvdWJsZSBjdXJseSBtYXJrdXAgbGlrZVxuICogYHt7IGV4cHJlc3Npb24gfX1gIHdoaWNoIGlzIHNpbWlsYXIgYnV0IGxlc3MgdmVyYm9zZS5cbiAqXG4gKiBJdCBpcyBwcmVmZXJhYmxlIHRvIHVzZSBgbmdCaW5kYCBpbnN0ZWFkIG9mIGB7eyBleHByZXNzaW9uIH19YCBpZiBhIHRlbXBsYXRlIGlzIG1vbWVudGFyaWx5XG4gKiBkaXNwbGF5ZWQgYnkgdGhlIGJyb3dzZXIgaW4gaXRzIHJhdyBzdGF0ZSBiZWZvcmUgQW5ndWxhckpTIGNvbXBpbGVzIGl0LiBTaW5jZSBgbmdCaW5kYCBpcyBhblxuICogZWxlbWVudCBhdHRyaWJ1dGUsIGl0IG1ha2VzIHRoZSBiaW5kaW5ncyBpbnZpc2libGUgdG8gdGhlIHVzZXIgd2hpbGUgdGhlIHBhZ2UgaXMgbG9hZGluZy5cbiAqXG4gKiBBbiBhbHRlcm5hdGl2ZSBzb2x1dGlvbiB0byB0aGlzIHByb2JsZW0gd291bGQgYmUgdXNpbmcgdGhlXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xvYWsgbmdDbG9ha30gZGlyZWN0aXZlLlxuICpcbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCaW5kIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBFbnRlciBhIG5hbWUgaW4gdGhlIExpdmUgUHJldmlldyB0ZXh0IGJveDsgdGhlIGdyZWV0aW5nIGJlbG93IHRoZSB0ZXh0IGJveCBjaGFuZ2VzIGluc3RhbnRseS5cbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRFeGFtcGxlXCIgbmFtZT1cIm5nLWJpbmRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2JpbmRFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSAnV2hpcmxlZCc7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGxhYmVsPkVudGVyIG5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjwvbGFiZWw+PGJyPlxuICAgICAgICAgSGVsbG8gPHNwYW4gbmctYmluZD1cIm5hbWVcIj48L3NwYW4+IVxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWJpbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBuYW1lSW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCduYW1lJykpO1xuXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCduYW1lJykpLmdldFRleHQoKSkudG9CZSgnV2hpcmxlZCcpO1xuICAgICAgICAgbmFtZUlucHV0LmNsZWFyKCk7XG4gICAgICAgICBuYW1lSW5wdXQuc2VuZEtleXMoJ3dvcmxkJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCduYW1lJykpLmdldFRleHQoKSkudG9CZSgnd29ybGQnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdCaW5kRGlyZWN0aXZlID0gWyckY29tcGlsZScsIGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBQycsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kQ29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRlbXBsYXRlRWxlbWVudCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdCaW5kTGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKGVsZW1lbnQsIGF0dHIubmdCaW5kKTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRbMF07XG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nQmluZCwgZnVuY3Rpb24gbmdCaW5kV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdCaW5kVGVtcGxhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdCaW5kVGVtcGxhdGVgIGRpcmVjdGl2ZSBzcGVjaWZpZXMgdGhhdCB0aGUgZWxlbWVudFxuICogdGV4dCBjb250ZW50IHNob3VsZCBiZSByZXBsYWNlZCB3aXRoIHRoZSBpbnRlcnBvbGF0aW9uIG9mIHRoZSB0ZW1wbGF0ZVxuICogaW4gdGhlIGBuZ0JpbmRUZW1wbGF0ZWAgYXR0cmlidXRlLlxuICogVW5saWtlIGBuZ0JpbmRgLCB0aGUgYG5nQmluZFRlbXBsYXRlYCBjYW4gY29udGFpbiBtdWx0aXBsZSBge3tgIGB9fWBcbiAqIGV4cHJlc3Npb25zLiBUaGlzIGRpcmVjdGl2ZSBpcyBuZWVkZWQgc2luY2Ugc29tZSBIVE1MIGVsZW1lbnRzXG4gKiAoc3VjaCBhcyBUSVRMRSBhbmQgT1BUSU9OKSBjYW5ub3QgY29udGFpbiBTUEFOIGVsZW1lbnRzLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtzdHJpbmd9IG5nQmluZFRlbXBsYXRlIHRlbXBsYXRlIG9mIGZvcm1cbiAqICAgPHR0Pnt7PC90dD4gPHR0PmV4cHJlc3Npb248L3R0PiA8dHQ+fX08L3R0PiB0byBldmFsLlxuICpcbiAqIEBleGFtcGxlXG4gKiBUcnkgaXQgaGVyZTogZW50ZXIgdGV4dCBpbiB0ZXh0IGJveCBhbmQgd2F0Y2ggdGhlIGdyZWV0aW5nIGNoYW5nZS5cbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRFeGFtcGxlXCIgbmFtZT1cIm5nLWJpbmQtdGVtcGxhdGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2JpbmRFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnNhbHV0YXRpb24gPSAnSGVsbG8nO1xuICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJ1dvcmxkJztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIDxsYWJlbD5TYWx1dGF0aW9uOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNhbHV0YXRpb25cIj48L2xhYmVsPjxicj5cbiAgICAgICAgPGxhYmVsPk5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjwvbGFiZWw+PGJyPlxuICAgICAgICA8cHJlIG5nLWJpbmQtdGVtcGxhdGU9XCJ7e3NhbHV0YXRpb259fSB7e25hbWV9fSFcIj48L3ByZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1iaW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgc2FsdXRhdGlvbkVsZW0gPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3NhbHV0YXRpb24nKSk7XG4gICAgICAgICB2YXIgc2FsdXRhdGlvbklucHV0ID0gZWxlbWVudChieS5tb2RlbCgnc2FsdXRhdGlvbicpKTtcbiAgICAgICAgIHZhciBuYW1lSW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCduYW1lJykpO1xuXG4gICAgICAgICBleHBlY3Qoc2FsdXRhdGlvbkVsZW0uZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBXb3JsZCEnKTtcblxuICAgICAgICAgc2FsdXRhdGlvbklucHV0LmNsZWFyKCk7XG4gICAgICAgICBzYWx1dGF0aW9uSW5wdXQuc2VuZEtleXMoJ0dyZWV0aW5ncycpO1xuICAgICAgICAgbmFtZUlucHV0LmNsZWFyKCk7XG4gICAgICAgICBuYW1lSW5wdXQuc2VuZEtleXMoJ3VzZXInKTtcblxuICAgICAgICAgZXhwZWN0KHNhbHV0YXRpb25FbGVtLmdldFRleHQoKSkudG9CZSgnR3JlZXRpbmdzIHVzZXIhJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlID0gWyckaW50ZXJwb2xhdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkaW50ZXJwb2xhdGUsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kVGVtcGxhdGVDb21waWxlKHRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVFbGVtZW50KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0JpbmRUZW1wbGF0ZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUoZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBpbnRlcnBvbGF0ZUZuLmV4cHJlc3Npb25zKTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRbMF07XG4gICAgICAgIGF0dHIuJG9ic2VydmUoJ25nQmluZFRlbXBsYXRlJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gaXNVbmRlZmluZWQodmFsdWUpID8gJycgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdCaW5kSHRtbFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRXZhbHVhdGVzIHRoZSBleHByZXNzaW9uIGFuZCBpbnNlcnRzIHRoZSByZXN1bHRpbmcgSFRNTCBpbnRvIHRoZSBlbGVtZW50IGluIGEgc2VjdXJlIHdheS4gQnkgZGVmYXVsdCxcbiAqIHRoZSByZXN1bHRpbmcgSFRNTCBjb250ZW50IHdpbGwgYmUgc2FuaXRpemVkIHVzaW5nIHRoZSB7QGxpbmsgbmdTYW5pdGl6ZS4kc2FuaXRpemUgJHNhbml0aXplfSBzZXJ2aWNlLlxuICogVG8gdXRpbGl6ZSB0aGlzIGZ1bmN0aW9uYWxpdHksIGVuc3VyZSB0aGF0IGAkc2FuaXRpemVgIGlzIGF2YWlsYWJsZSwgZm9yIGV4YW1wbGUsIGJ5IGluY2x1ZGluZyB7QGxpbmtcbiAqIG5nU2FuaXRpemV9IGluIHlvdXIgbW9kdWxlJ3MgZGVwZW5kZW5jaWVzIChub3QgaW4gY29yZSBBbmd1bGFySlMpLiBJbiBvcmRlciB0byB1c2Uge0BsaW5rIG5nU2FuaXRpemV9XG4gKiBpbiB5b3VyIG1vZHVsZSdzIGRlcGVuZGVuY2llcywgeW91IG5lZWQgdG8gaW5jbHVkZSBcImFuZ3VsYXItc2FuaXRpemUuanNcIiBpbiB5b3VyIGFwcGxpY2F0aW9uLlxuICpcbiAqIFlvdSBtYXkgYWxzbyBieXBhc3Mgc2FuaXRpemF0aW9uIGZvciB2YWx1ZXMgeW91IGtub3cgYXJlIHNhZmUuIFRvIGRvIHNvLCBiaW5kIHRvXG4gKiBhbiBleHBsaWNpdGx5IHRydXN0ZWQgdmFsdWUgdmlhIHtAbGluayBuZy4kc2NlI3RydXN0QXNIdG1sICRzY2UudHJ1c3RBc0h0bWx9LiAgU2VlIHRoZSBleGFtcGxlXG4gKiB1bmRlciB7QGxpbmsgbmcuJHNjZSNzaG93LW1lLWFuLWV4YW1wbGUtdXNpbmctc2NlLSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0uXG4gKlxuICogTm90ZTogSWYgYSBgJHNhbml0aXplYCBzZXJ2aWNlIGlzIHVuYXZhaWxhYmxlIGFuZCB0aGUgYm91bmQgdmFsdWUgaXNuJ3QgZXhwbGljaXRseSB0cnVzdGVkLCB5b3VcbiAqIHdpbGwgaGF2ZSBhbiBleGNlcHRpb24gKGluc3RlYWQgb2YgYW4gZXhwbG9pdC4pXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQmluZEh0bWwge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUuXG4gKlxuICogQGV4YW1wbGVcblxuICAgPGV4YW1wbGUgbW9kdWxlPVwiYmluZEh0bWxFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIiBuYW1lPVwibmctYmluZC1odG1sXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgPHAgbmctYmluZC1odG1sPVwibXlIVE1MXCI+PC9wPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kSHRtbEV4YW1wbGUnLCBbJ25nU2FuaXRpemUnXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICRzY29wZS5teUhUTUwgPVxuICAgICAgICAgICAgICAnSSBhbSBhbiA8Y29kZT5IVE1MPC9jb2RlPnN0cmluZyB3aXRoICcgK1xuICAgICAgICAgICAgICAnPGEgaHJlZj1cIiNcIj5saW5rcyE8L2E+IGFuZCBvdGhlciA8ZW0+c3R1ZmY8L2VtPic7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cblxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1iaW5kLWh0bWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ215SFRNTCcpKS5nZXRUZXh0KCkpLnRvQmUoXG4gICAgICAgICAgICAgJ0kgYW0gYW4gSFRNTHN0cmluZyB3aXRoIGxpbmtzISBhbmQgb3RoZXIgc3R1ZmYnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdCaW5kSHRtbERpcmVjdGl2ZSA9IFsnJHNjZScsICckcGFyc2UnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkc2NlLCAkcGFyc2UsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ0JpbmRIdG1sQ29tcGlsZSh0RWxlbWVudCwgdEF0dHJzKSB7XG4gICAgICB2YXIgbmdCaW5kSHRtbEdldHRlciA9ICRwYXJzZSh0QXR0cnMubmdCaW5kSHRtbCk7XG4gICAgICB2YXIgbmdCaW5kSHRtbFdhdGNoID0gJHBhcnNlKHRBdHRycy5uZ0JpbmRIdG1sLCBmdW5jdGlvbiBzY2VWYWx1ZU9mKHZhbCkge1xuICAgICAgICAvLyBVbndyYXAgdGhlIHZhbHVlIHRvIGNvbXBhcmUgdGhlIGFjdHVhbCBpbm5lciBzYWZlIHZhbHVlLCBub3QgdGhlIHdyYXBwZXIgb2JqZWN0LlxuICAgICAgICByZXR1cm4gJHNjZS52YWx1ZU9mKHZhbCk7XG4gICAgICB9KTtcbiAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRFbGVtZW50KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZEh0bWxMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0luZm8oZWxlbWVudCwgYXR0ci5uZ0JpbmRIdG1sKTtcblxuICAgICAgICBzY29wZS4kd2F0Y2gobmdCaW5kSHRtbFdhdGNoLCBmdW5jdGlvbiBuZ0JpbmRIdG1sV2F0Y2hBY3Rpb24oKSB7XG4gICAgICAgICAgLy8gVGhlIHdhdGNoZWQgdmFsdWUgaXMgdGhlIHVud3JhcHBlZCB2YWx1ZS4gVG8gYXZvaWQgcmUtZXNjYXBpbmcsIHVzZSB0aGUgZGlyZWN0IGdldHRlci5cbiAgICAgICAgICB2YXIgdmFsdWUgPSBuZ0JpbmRIdG1sR2V0dGVyKHNjb3BlKTtcbiAgICAgICAgICBlbGVtZW50Lmh0bWwoJHNjZS5nZXRUcnVzdGVkSHRtbCh2YWx1ZSkgfHwgJycpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDaGFuZ2VcbiAqIEByZXN0cmljdCBBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBFdmFsdWF0ZSB0aGUgZ2l2ZW4gZXhwcmVzc2lvbiB3aGVuIHRoZSB1c2VyIGNoYW5nZXMgdGhlIGlucHV0LlxuICogVGhlIGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkIGltbWVkaWF0ZWx5LCB1bmxpa2UgdGhlIEphdmFTY3JpcHQgb25jaGFuZ2UgZXZlbnRcbiAqIHdoaWNoIG9ubHkgdHJpZ2dlcnMgYXQgdGhlIGVuZCBvZiBhIGNoYW5nZSAodXN1YWxseSwgd2hlbiB0aGUgdXNlciBsZWF2ZXMgdGhlXG4gKiBmb3JtIGVsZW1lbnQgb3IgcHJlc3NlcyB0aGUgcmV0dXJuIGtleSkuXG4gKlxuICogVGhlIGBuZ0NoYW5nZWAgZXhwcmVzc2lvbiBpcyBvbmx5IGV2YWx1YXRlZCB3aGVuIGEgY2hhbmdlIGluIHRoZSBpbnB1dCB2YWx1ZSBjYXVzZXNcbiAqIGEgbmV3IHZhbHVlIHRvIGJlIGNvbW1pdHRlZCB0byB0aGUgbW9kZWwuXG4gKlxuICogSXQgd2lsbCBub3QgYmUgZXZhbHVhdGVkOlxuICogKiBpZiB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgYCRwYXJzZXJzYCB0cmFuc2Zvcm1hdGlvbiBwaXBlbGluZSBoYXMgbm90IGNoYW5nZWRcbiAqICogaWYgdGhlIGlucHV0IGhhcyBjb250aW51ZWQgdG8gYmUgaW52YWxpZCBzaW5jZSB0aGUgbW9kZWwgd2lsbCBzdGF5IGBudWxsYFxuICogKiBpZiB0aGUgbW9kZWwgaXMgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5IGFuZCBub3QgYnkgYSBjaGFuZ2UgdG8gdGhlIGlucHV0IHZhbHVlXG4gKlxuICpcbiAqIE5vdGUsIHRoaXMgZGlyZWN0aXZlIHJlcXVpcmVzIGBuZ01vZGVsYCB0byBiZSBwcmVzZW50LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NoYW5nZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uIGNoYW5nZVxuICogaW4gaW5wdXQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0NoYW5nZS1kaXJlY3RpdmVcIiBtb2R1bGU9XCJjaGFuZ2VFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjaGFuZ2VFeGFtcGxlJywgW10pXG4gKiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICAgJHNjb3BlLmNvdW50ZXIgPSAwO1xuICogICAgICAgICAgICRzY29wZS5jaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAgICAgICRzY29wZS5jb3VudGVyKys7XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjb25maXJtZWRcIiBuZy1jaGFuZ2U9XCJjaGFuZ2UoKVwiIGlkPVwibmctY2hhbmdlLWV4YW1wbGUxXCIgLz5cbiAqICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbmZpcm1lZFwiIGlkPVwibmctY2hhbmdlLWV4YW1wbGUyXCIgLz5cbiAqICAgICAgIDxsYWJlbCBmb3I9XCJuZy1jaGFuZ2UtZXhhbXBsZTJcIj5Db25maXJtZWQ8L2xhYmVsPjxiciAvPlxuICogICAgICAgPHR0PmRlYnVnID0ge3tjb25maXJtZWR9fTwvdHQ+PGJyLz5cbiAqICAgICAgIDx0dD5jb3VudGVyID0ge3tjb3VudGVyfX08L3R0Pjxici8+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgIHZhciBjb3VudGVyID0gZWxlbWVudChieS5iaW5kaW5nKCdjb3VudGVyJykpO1xuICogICAgIHZhciBkZWJ1ZyA9IGVsZW1lbnQoYnkuYmluZGluZygnY29uZmlybWVkJykpO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGlmIGNoYW5naW5nIGZyb20gdmlldycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzAnKTtcbiAqXG4gKiAgICAgICBlbGVtZW50KGJ5LmlkKCduZy1jaGFuZ2UtZXhhbXBsZTEnKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMScpO1xuICogICAgICAgZXhwZWN0KGRlYnVnLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gKiAgICAgfSk7XG4gKlxuICogICAgIGl0KCdzaG91bGQgbm90IGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGlmIGNoYW5naW5nIGZyb20gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGVsZW1lbnQoYnkuaWQoJ25nLWNoYW5nZS1leGFtcGxlMicpKS5jbGljaygpO1xuXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMCcpO1xuICogICAgICAgZXhwZWN0KGRlYnVnLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQ2hhbmdlRGlyZWN0aXZlID0gdmFsdWVGbih7XG4gIHJlc3RyaWN0OiAnQScsXG4gIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgICBjdHJsLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKSB7XG4gICAgICBzY29wZS4kZXZhbChhdHRyLm5nQ2hhbmdlKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qIGV4cG9ydGVkXG4gIG5nQ2xhc3NEaXJlY3RpdmUsXG4gIG5nQ2xhc3NFdmVuRGlyZWN0aXZlLFxuICBuZ0NsYXNzT2RkRGlyZWN0aXZlXG4qL1xuXG5mdW5jdGlvbiBjbGFzc0RpcmVjdGl2ZShuYW1lLCBzZWxlY3Rvcikge1xuICBuYW1lID0gJ25nQ2xhc3MnICsgbmFtZTtcbiAgdmFyIGluZGV4V2F0Y2hFeHByZXNzaW9uO1xuXG4gIHJldHVybiBbJyRwYXJzZScsIGZ1bmN0aW9uKCRwYXJzZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0FDJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIHZhciBjbGFzc0NvdW50cyA9IGVsZW1lbnQuZGF0YSgnJGNsYXNzQ291bnRzJyk7XG4gICAgICAgIHZhciBvbGRNb2R1bG8gPSB0cnVlO1xuICAgICAgICB2YXIgb2xkQ2xhc3NTdHJpbmc7XG5cbiAgICAgICAgaWYgKCFjbGFzc0NvdW50cykge1xuICAgICAgICAgIC8vIFVzZSBjcmVhdGVNYXAoKSB0byBwcmV2ZW50IGNsYXNzIGFzc3VtcHRpb25zIGludm9sdmluZyBwcm9wZXJ0eVxuICAgICAgICAgIC8vIG5hbWVzIGluIE9iamVjdC5wcm90b3R5cGVcbiAgICAgICAgICBjbGFzc0NvdW50cyA9IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgIGVsZW1lbnQuZGF0YSgnJGNsYXNzQ291bnRzJywgY2xhc3NDb3VudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5hbWUgIT09ICduZ0NsYXNzJykge1xuICAgICAgICAgIGlmICghaW5kZXhXYXRjaEV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIGluZGV4V2F0Y2hFeHByZXNzaW9uID0gJHBhcnNlKCckaW5kZXgnLCBmdW5jdGlvbiBtb2R1bG9Ud28oJGluZGV4KSB7XG4gICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgICAgICAgICAgIHJldHVybiAkaW5kZXggJiAxO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKGluZGV4V2F0Y2hFeHByZXNzaW9uLCBuZ0NsYXNzSW5kZXhXYXRjaEFjdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS4kd2F0Y2goJHBhcnNlKGF0dHJbbmFtZV0sIHRvQ2xhc3NTdHJpbmcpLCBuZ0NsYXNzV2F0Y2hBY3Rpb24pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZENsYXNzZXMoY2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICBjbGFzc1N0cmluZyA9IGRpZ2VzdENsYXNzQ291bnRzKHNwbGl0KGNsYXNzU3RyaW5nKSwgMSk7XG4gICAgICAgICAgYXR0ci4kYWRkQ2xhc3MoY2xhc3NTdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhjbGFzc1N0cmluZykge1xuICAgICAgICAgIGNsYXNzU3RyaW5nID0gZGlnZXN0Q2xhc3NDb3VudHMoc3BsaXQoY2xhc3NTdHJpbmcpLCAtMSk7XG4gICAgICAgICAgYXR0ci4kcmVtb3ZlQ2xhc3MoY2xhc3NTdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhvbGRDbGFzc1N0cmluZywgbmV3Q2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICB2YXIgb2xkQ2xhc3NBcnJheSA9IHNwbGl0KG9sZENsYXNzU3RyaW5nKTtcbiAgICAgICAgICB2YXIgbmV3Q2xhc3NBcnJheSA9IHNwbGl0KG5ld0NsYXNzU3RyaW5nKTtcblxuICAgICAgICAgIHZhciB0b1JlbW92ZUFycmF5ID0gYXJyYXlEaWZmZXJlbmNlKG9sZENsYXNzQXJyYXksIG5ld0NsYXNzQXJyYXkpO1xuICAgICAgICAgIHZhciB0b0FkZEFycmF5ID0gYXJyYXlEaWZmZXJlbmNlKG5ld0NsYXNzQXJyYXksIG9sZENsYXNzQXJyYXkpO1xuXG4gICAgICAgICAgdmFyIHRvUmVtb3ZlU3RyaW5nID0gZGlnZXN0Q2xhc3NDb3VudHModG9SZW1vdmVBcnJheSwgLTEpO1xuICAgICAgICAgIHZhciB0b0FkZFN0cmluZyA9IGRpZ2VzdENsYXNzQ291bnRzKHRvQWRkQXJyYXksIDEpO1xuXG4gICAgICAgICAgYXR0ci4kYWRkQ2xhc3ModG9BZGRTdHJpbmcpO1xuICAgICAgICAgIGF0dHIuJHJlbW92ZUNsYXNzKHRvUmVtb3ZlU3RyaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzQXJyYXksIGNvdW50KSB7XG4gICAgICAgICAgdmFyIGNsYXNzZXNUb1VwZGF0ZSA9IFtdO1xuXG4gICAgICAgICAgZm9yRWFjaChjbGFzc0FycmF5LCBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDAgfHwgY2xhc3NDb3VudHNbY2xhc3NOYW1lXSkge1xuICAgICAgICAgICAgICBjbGFzc0NvdW50c1tjbGFzc05hbWVdID0gKGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gfHwgMCkgKyBjb3VudDtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gPT09ICsoY291bnQgPiAwKSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXNUb1VwZGF0ZS5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBjbGFzc2VzVG9VcGRhdGUuam9pbignICcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbmdDbGFzc0luZGV4V2F0Y2hBY3Rpb24obmV3TW9kdWxvKSB7XG4gICAgICAgICAgLy8gVGhpcyB3YXRjaC1hY3Rpb24gc2hvdWxkIHJ1biBiZWZvcmUgdGhlIGBuZ0NsYXNzV2F0Y2hBY3Rpb24oKWAsIHRodXMgaXRcbiAgICAgICAgICAvLyBhZGRzL3JlbW92ZXMgYG9sZENsYXNzU3RyaW5nYC4gSWYgdGhlIGBuZ0NsYXNzYCBleHByZXNzaW9uIGhhcyBjaGFuZ2VkIGFzIHdlbGwsIHRoZVxuICAgICAgICAgIC8vIGBuZ0NsYXNzV2F0Y2hBY3Rpb24oKWAgd2lsbCB1cGRhdGUgdGhlIGNsYXNzZXMuXG4gICAgICAgICAgaWYgKG5ld01vZHVsbyA9PT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGFkZENsYXNzZXMob2xkQ2xhc3NTdHJpbmcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmVDbGFzc2VzKG9sZENsYXNzU3RyaW5nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvbGRNb2R1bG8gPSBuZXdNb2R1bG87XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBuZ0NsYXNzV2F0Y2hBY3Rpb24obmV3Q2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICBpZiAob2xkTW9kdWxvID09PSBzZWxlY3Rvcikge1xuICAgICAgICAgICAgdXBkYXRlQ2xhc3NlcyhvbGRDbGFzc1N0cmluZywgbmV3Q2xhc3NTdHJpbmcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9sZENsYXNzU3RyaW5nID0gbmV3Q2xhc3NTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XTtcblxuICAvLyBIZWxwZXJzXG4gIGZ1bmN0aW9uIGFycmF5RGlmZmVyZW5jZSh0b2tlbnMxLCB0b2tlbnMyKSB7XG4gICAgaWYgKCF0b2tlbnMxIHx8ICF0b2tlbnMxLmxlbmd0aCkgcmV0dXJuIFtdO1xuICAgIGlmICghdG9rZW5zMiB8fCAhdG9rZW5zMi5sZW5ndGgpIHJldHVybiB0b2tlbnMxO1xuXG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgb3V0ZXI6XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMxLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdG9rZW4gPSB0b2tlbnMxW2ldO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0b2tlbnMyLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gdG9rZW5zMltqXSkgY29udGludWUgb3V0ZXI7XG4gICAgICB9XG4gICAgICB2YWx1ZXMucHVzaCh0b2tlbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwbGl0KGNsYXNzU3RyaW5nKSB7XG4gICAgcmV0dXJuIGNsYXNzU3RyaW5nICYmIGNsYXNzU3RyaW5nLnNwbGl0KCcgJyk7XG4gIH1cblxuICBmdW5jdGlvbiB0b0NsYXNzU3RyaW5nKGNsYXNzVmFsdWUpIHtcbiAgICB2YXIgY2xhc3NTdHJpbmcgPSBjbGFzc1ZhbHVlO1xuXG4gICAgaWYgKGlzQXJyYXkoY2xhc3NWYWx1ZSkpIHtcbiAgICAgIGNsYXNzU3RyaW5nID0gY2xhc3NWYWx1ZS5tYXAodG9DbGFzc1N0cmluZykuam9pbignICcpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoY2xhc3NWYWx1ZSkpIHtcbiAgICAgIGNsYXNzU3RyaW5nID0gT2JqZWN0LmtleXMoY2xhc3NWYWx1ZSkuXG4gICAgICAgIGZpbHRlcihmdW5jdGlvbihrZXkpIHsgcmV0dXJuIGNsYXNzVmFsdWVba2V5XTsgfSkuXG4gICAgICAgIGpvaW4oJyAnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NTdHJpbmc7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsYXNzXG4gKiBAcmVzdHJpY3QgQUNcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0NsYXNzYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBkeW5hbWljYWxseSBzZXQgQ1NTIGNsYXNzZXMgb24gYW4gSFRNTCBlbGVtZW50IGJ5IGRhdGFiaW5kaW5nXG4gKiBhbiBleHByZXNzaW9uIHRoYXQgcmVwcmVzZW50cyBhbGwgY2xhc3NlcyB0byBiZSBhZGRlZC5cbiAqXG4gKiBUaGUgZGlyZWN0aXZlIG9wZXJhdGVzIGluIHRocmVlIGRpZmZlcmVudCB3YXlzLCBkZXBlbmRpbmcgb24gd2hpY2ggb2YgdGhyZWUgdHlwZXMgdGhlIGV4cHJlc3Npb25cbiAqIGV2YWx1YXRlcyB0bzpcbiAqXG4gKiAxLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZSBzdHJpbmcgc2hvdWxkIGJlIG9uZSBvciBtb3JlIHNwYWNlLWRlbGltaXRlZCBjbGFzc1xuICogbmFtZXMuXG4gKlxuICogMi4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGFuIG9iamVjdCwgdGhlbiBmb3IgZWFjaCBrZXktdmFsdWUgcGFpciBvZiB0aGVcbiAqIG9iamVjdCB3aXRoIGEgdHJ1dGh5IHZhbHVlIHRoZSBjb3JyZXNwb25kaW5nIGtleSBpcyB1c2VkIGFzIGEgY2xhc3MgbmFtZS5cbiAqXG4gKiAzLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYW4gYXJyYXksIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXkgc2hvdWxkIGVpdGhlciBiZSBhIHN0cmluZyBhcyBpblxuICogdHlwZSAxIG9yIGFuIG9iamVjdCBhcyBpbiB0eXBlIDIuIFRoaXMgbWVhbnMgdGhhdCB5b3UgY2FuIG1peCBzdHJpbmdzIGFuZCBvYmplY3RzIHRvZ2V0aGVyIGluIGFuIGFycmF5XG4gKiB0byBnaXZlIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciB3aGF0IENTUyBjbGFzc2VzIGFwcGVhci4gU2VlIHRoZSBjb2RlIGJlbG93IGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgd29uJ3QgYWRkIGR1cGxpY2F0ZSBjbGFzc2VzIGlmIGEgcGFydGljdWxhciBjbGFzcyB3YXMgYWxyZWFkeSBzZXQuXG4gKlxuICogV2hlbiB0aGUgZXhwcmVzc2lvbiBjaGFuZ2VzLCB0aGUgcHJldmlvdXNseSBhZGRlZCBjbGFzc2VzIGFyZSByZW1vdmVkIGFuZCBvbmx5IHRoZW4gYXJlIHRoZVxuICogbmV3IGNsYXNzZXMgYWRkZWQuXG4gKlxuICogQGtub3duSXNzdWVcbiAqIFlvdSBzaG91bGQgbm90IHVzZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9ufSBpbiB0aGUgdmFsdWUgb2YgdGhlIGBjbGFzc2BcbiAqIGF0dHJpYnV0ZSwgd2hlbiB1c2luZyB0aGUgYG5nQ2xhc3NgIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50LlxuICogU2VlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uI2tub3duLWlzc3VlcyBoZXJlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSAgICAgICB8IGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50ICAgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IHwganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCB8XG4gKlxuICogIyMjIG5nQ2xhc3MgYW5kIHByZS1leGlzdGluZyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnNcbiAgIFRoZSBuZ0NsYXNzIGRpcmVjdGl2ZSBzdGlsbCBzdXBwb3J0cyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnMgZXZlbiBpZiB0aGV5IGRvIG5vdCBmb2xsb3cgdGhlIG5nQW5pbWF0ZSBDU1MgbmFtaW5nIHN0cnVjdHVyZS5cbiAgIFVwb24gYW5pbWF0aW9uIG5nQW5pbWF0ZSB3aWxsIGFwcGx5IHN1cHBsZW1lbnRhcnkgQ1NTIGNsYXNzZXMgdG8gdHJhY2sgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgYW4gYW5pbWF0aW9uLCBidXQgdGhpcyB3aWxsIG5vdCBoaW5kZXJcbiAgIGFueSBwcmUtZXhpc3RpbmcgQ1NTIHRyYW5zaXRpb25zIGFscmVhZHkgb24gdGhlIGVsZW1lbnQuIFRvIGdldCBhbiBpZGVhIG9mIHdoYXQgaGFwcGVucyBkdXJpbmcgYSBjbGFzcy1iYXNlZCBhbmltYXRpb24sIGJlIHN1cmVcbiAgIHRvIHZpZXcgdGhlIHN0ZXAgYnkgc3RlcCBkZXRhaWxzIG9mIHtAbGluayAkYW5pbWF0ZSNhZGRDbGFzcyAkYW5pbWF0ZS5hZGRDbGFzc30gYW5kXG4gICB7QGxpbmsgJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgJGFuaW1hdGUucmVtb3ZlQ2xhc3N9LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLiBUaGUgcmVzdWx0XG4gKiAgIG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzXG4gKiAgIG5hbWVzLCBhbiBhcnJheSwgb3IgYSBtYXAgb2YgY2xhc3MgbmFtZXMgdG8gYm9vbGVhbiB2YWx1ZXMuIEluIHRoZSBjYXNlIG9mIGEgbWFwLCB0aGVcbiAqICAgbmFtZXMgb2YgdGhlIHByb3BlcnRpZXMgd2hvc2UgdmFsdWVzIGFyZSB0cnV0aHkgd2lsbCBiZSBhZGRlZCBhcyBjc3MgY2xhc3NlcyB0byB0aGVcbiAqICAgZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJhc2ljXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY2xhc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIntzdHJpa2U6IGRlbGV0ZWQsIGJvbGQ6IGltcG9ydGFudCwgJ2hhcy1lcnJvcic6IGVycm9yfVwiPk1hcCBTeW50YXggRXhhbXBsZTwvcD5cbiAgICAgICA8bGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiZGVsZXRlZFwiPlxuICAgICAgICAgIGRlbGV0ZWQgKGFwcGx5IFwic3RyaWtlXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImltcG9ydGFudFwiPlxuICAgICAgICAgIGltcG9ydGFudCAoYXBwbHkgXCJib2xkXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImVycm9yXCI+XG4gICAgICAgICAgZXJyb3IgKGFwcGx5IFwiaGFzLWVycm9yXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD5cbiAgICAgICA8aHI+XG4gICAgICAgPHAgbmctY2xhc3M9XCJzdHlsZVwiPlVzaW5nIFN0cmluZyBTeW50YXg8L3A+XG4gICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzdHlsZVwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCBzdHJpa2UgcmVkXCIgYXJpYS1sYWJlbD1cIlR5cGU6IGJvbGQgc3RyaWtlIHJlZFwiPlxuICAgICAgIDxocj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIltzdHlsZTEsIHN0eWxlMiwgc3R5bGUzXVwiPlVzaW5nIEFycmF5IFN5bnRheDwvcD5cbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTFcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTJcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZCAyXCI+PGJyPlxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlM1wiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiIGFyaWEtbGFiZWw9XCJUeXBlOiBib2xkLCBzdHJpa2Ugb3IgcmVkIDNcIj48YnI+XG4gICAgICAgPGhyPlxuICAgICAgIDxwIG5nLWNsYXNzPVwiW3N0eWxlNCwge29yYW5nZTogd2FybmluZ31dXCI+VXNpbmcgQXJyYXkgYW5kIE1hcCBTeW50YXg8L3A+XG4gICAgICAgPGlucHV0IG5nLW1vZGVsPVwic3R5bGU0XCIgcGxhY2Vob2xkZXI9XCJUeXBlOiBib2xkLCBzdHJpa2VcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlXCI+PGJyPlxuICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJ3YXJuaW5nXCI+IHdhcm5pbmcgKGFwcGx5IFwib3JhbmdlXCIgY2xhc3MpPC9sYWJlbD5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLnN0cmlrZSB7XG4gICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xuICAgICAgIH1cbiAgICAgICAuYm9sZCB7XG4gICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgIH1cbiAgICAgICAucmVkIHtcbiAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICB9XG4gICAgICAgLmhhcy1lcnJvciB7XG4gICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHllbGxvdztcbiAgICAgICB9XG4gICAgICAgLm9yYW5nZSB7XG4gICAgICAgICAgIGNvbG9yOiBvcmFuZ2U7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgcHMgPSBlbGVtZW50LmFsbChieS5jc3MoJ3AnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHRoZSBjbGFzcycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9ib2xkLyk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9oYXMtZXJyb3IvKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnaW1wb3J0YW50JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL2JvbGQvKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnZXJyb3InKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvaGFzLWVycm9yLyk7XG4gICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHN0cmluZyBleGFtcGxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZScpKS5jbGVhcigpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUnKSkuc2VuZEtleXMoJ3JlZCcpO1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ3JlZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ2FycmF5IGV4YW1wbGUgc2hvdWxkIGhhdmUgMyBjbGFzc2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMuZ2V0KDIpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTEnKSkuc2VuZEtleXMoJ2JvbGQnKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3N0eWxlMicpKS5zZW5kS2V5cygnc3RyaWtlJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTMnKSkuc2VuZEtleXMoJ3JlZCcpO1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgyKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ2JvbGQgc3RyaWtlIHJlZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ2FycmF5IHdpdGggbWFwIGV4YW1wbGUgc2hvdWxkIGhhdmUgMiBjbGFzc2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTQnKSkuc2VuZEtleXMoJ2JvbGQnKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3dhcm5pbmcnKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChwcy5sYXN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b0JlKCdib2xkIG9yYW5nZScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG5cbiAgIEBleGFtcGxlXG4gICAjIyMgQW5pbWF0aW9uc1xuXG4gICBUaGUgZXhhbXBsZSBiZWxvdyBkZW1vbnN0cmF0ZXMgaG93IHRvIHBlcmZvcm0gYW5pbWF0aW9ucyB1c2luZyBuZ0NsYXNzLlxuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctY2xhc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBpZD1cInNldGJ0blwiIHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInNldFwiIG5nLWNsaWNrPVwibXlWYXI9J215LWNsYXNzJ1wiPlxuICAgICAgPGlucHV0IGlkPVwiY2xlYXJidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJjbGVhclwiIG5nLWNsaWNrPVwibXlWYXI9JydcIj5cbiAgICAgIDxicj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiYmFzZS1jbGFzc1wiIG5nLWNsYXNzPVwibXlWYXJcIj5TYW1wbGUgVGV4dDwvc3Bhbj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmJhc2UtY2xhc3Mge1xuICAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xuICAgICAgIH1cblxuICAgICAgIC5iYXNlLWNsYXNzLm15LWNsYXNzIHtcbiAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICBmb250LXNpemU6M2VtO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcblxuICAgICAgICAgZWxlbWVudChieS5pZCgnc2V0YnRuJykpLmNsaWNrKCk7XG5cbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmJhc2UtY2xhc3MnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcblxuICAgICAgICAgZWxlbWVudChieS5pZCgnY2xlYXJidG4nKSkuY2xpY2soKTtcblxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdDbGFzc0RpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCcnLCB0cnVlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsYXNzT2RkXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxuICogY29uanVuY3Rpb24gd2l0aCBgbmdSZXBlYXRgIGFuZCB0YWtlIGVmZmVjdCBvbmx5IG9uIG9kZCAoZXZlbikgcm93cy5cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9LlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSAgICAgICB8IGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50ICAgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IHwganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCB8XG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NPZGQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlIHJlc3VsdFxuICogICBvZiB0aGUgZXZhbHVhdGlvbiBjYW4gYmUgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHNwYWNlIGRlbGltaXRlZCBjbGFzcyBuYW1lcyBvciBhbiBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNsYXNzLW9kZFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8b2wgbmctaW5pdD1cIm5hbWVzPVsnSm9obicsICdNYXJ5JywgJ0NhdGUnLCAnU3V6J11cIj5cbiAgICAgICAgICA8bGkgbmctcmVwZWF0PVwibmFtZSBpbiBuYW1lc1wiPlxuICAgICAgICAgICA8c3BhbiBuZy1jbGFzcy1vZGQ9XCInb2RkJ1wiIG5nLWNsYXNzLWV2ZW49XCInZXZlbidcIj5cbiAgICAgICAgICAgICB7e25hbWV9fVxuICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC9vbD5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLm9kZCB7XG4gICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgIH1cbiAgICAgICAuZXZlbiB7XG4gICAgICAgICBjb2xvcjogYmx1ZTtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3Mtb2RkIGFuZCBuZy1jbGFzcy1ldmVuJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygwKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvb2RkLyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygxKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvZXZlbi8pO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKlxuICogPGhyIC8+XG4gKiBAZXhhbXBsZVxuICogQW4gZXhhbXBsZSBvbiBob3cgdG8gaW1wbGVtZW50IGFuaW1hdGlvbnMgdXNpbmcgYG5nQ2xhc3NPZGRgOlxuICpcbiAgIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1jbGFzcy1vZGQtYW5pbWF0ZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctaW5pdD1cIml0ZW1zPVsnSXRlbSAzJywgJ0l0ZW0gMicsICdJdGVtIDEnLCAnSXRlbSAwJ11cIj5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJpdGVtcy51bnNoaWZ0KCdJdGVtICcgKyBpdGVtcy5sZW5ndGgpXCI+QWRkIGl0ZW08L2J1dHRvbj5cbiAgICAgICAgIDxociAvPlxuICAgICAgICAgPHRhYmxlPlxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiaXRlbSBpbiBpdGVtc1wiIG5nLWNsYXNzLW9kZD1cIidvZGQnXCI+XG4gICAgICAgICAgICAgPHRkPnt7IGl0ZW0gfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLm9kZCB7XG4gICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAwLCAwLjI1KTtcbiAgICAgICB9XG5cbiAgICAgICAub2RkLWFkZCwgLm9kZC1yZW1vdmUge1xuICAgICAgICAgdHJhbnNpdGlvbjogMS41cztcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgYWRkIG5ldyBlbnRyaWVzIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpc3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBidXR0b24gPSBlbGVtZW50KGJ5LmJ1dHRvblRleHQoJ0FkZCBpdGVtJykpO1xuICAgICAgICAgdmFyIHJvd3MgPSBlbGVtZW50LmFsbChieS5yZXBlYXRlcignaXRlbSBpbiBpdGVtcycpKTtcblxuICAgICAgICAgZXhwZWN0KHJvd3MuY291bnQoKSkudG9CZSg0KTtcbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgwKS5nZXRUZXh0KCkpLnRvQmUoJ0l0ZW0gMycpO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnSXRlbSAyJyk7XG5cbiAgICAgICAgIGJ1dHRvbi5jbGljaygpO1xuXG4gICAgICAgICBleHBlY3Qocm93cy5jb3VudCgpKS50b0JlKDUpO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnSXRlbSA0Jyk7XG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMSkuZ2V0VGV4dCgpKS50b0JlKCdJdGVtIDMnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgYWRkIG9kZCBjbGFzcyB0byBvZGQgZW50cmllcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIGJ1dHRvbiA9IGVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnQWRkIGl0ZW0nKSk7XG4gICAgICAgICB2YXIgcm93cyA9IGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKCdpdGVtIGluIGl0ZW1zJykpO1xuXG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9vZGQvKTtcbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9vZGQvKTtcblxuICAgICAgICAgYnV0dG9uLmNsaWNrKCk7XG5cbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgwKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL29kZC8pO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkubm90LnRvTWF0Y2goL29kZC8pO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0NsYXNzT2RkRGlyZWN0aXZlID0gY2xhc3NEaXJlY3RpdmUoJ09kZCcsIDApO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2xhc3NFdmVuXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxuICogY29uanVuY3Rpb24gd2l0aCBgbmdSZXBlYXRgIGFuZCB0YWtlIGVmZmVjdCBvbmx5IG9uIG9kZCAoZXZlbikgcm93cy5cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9LlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSAgICAgICB8IGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50ICAgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IHwganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCB8XG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NFdmVuIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuIFRoZVxuICogICByZXN1bHQgb2YgdGhlIGV2YWx1YXRpb24gY2FuIGJlIGEgc3RyaW5nIHJlcHJlc2VudGluZyBzcGFjZSBkZWxpbWl0ZWQgY2xhc3MgbmFtZXMgb3IgYW4gYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1jbGFzcy1ldmVuXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxvbCBuZy1pbml0PVwibmFtZXM9WydKb2huJywgJ01hcnknLCAnQ2F0ZScsICdTdXonXVwiPlxuICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJuYW1lIGluIG5hbWVzXCI+XG4gICAgICAgICAgIDxzcGFuIG5nLWNsYXNzLW9kZD1cIidvZGQnXCIgbmctY2xhc3MtZXZlbj1cIidldmVuJ1wiPlxuICAgICAgICAgICAgIHt7bmFtZX19ICZuYnNwOyAmbmJzcDsgJm5ic3A7XG4gICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L29sPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAub2RkIHtcbiAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgfVxuICAgICAgIC5ldmVuIHtcbiAgICAgICAgIGNvbG9yOiBibHVlO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcy1vZGQgYW5kIG5nLWNsYXNzLWV2ZW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDApLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxuICAgICAgICAgICB0b01hdGNoKC9vZGQvKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDEpLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxuICAgICAgICAgICB0b01hdGNoKC9ldmVuLyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKiA8aHIgLz5cbiAqIEBleGFtcGxlXG4gKiBBbiBleGFtcGxlIG9uIGhvdyB0byBpbXBsZW1lbnQgYW5pbWF0aW9ucyB1c2luZyBgbmdDbGFzc0V2ZW5gOlxuICpcbiAgIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1jbGFzcy1ldmVuLWFuaW1hdGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWluaXQ9XCJpdGVtcz1bJ0l0ZW0gMycsICdJdGVtIDInLCAnSXRlbSAxJywgJ0l0ZW0gMCddXCI+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiaXRlbXMudW5zaGlmdCgnSXRlbSAnICsgaXRlbXMubGVuZ3RoKVwiPkFkZCBpdGVtPC9idXR0b24+XG4gICAgICAgICA8aHIgLz5cbiAgICAgICAgIDx0YWJsZT5cbiAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cIml0ZW0gaW4gaXRlbXNcIiBuZy1jbGFzcy1ldmVuPVwiJ2V2ZW4nXCI+XG4gICAgICAgICAgICAgPHRkPnt7IGl0ZW0gfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmV2ZW4ge1xuICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMCwgMC4yNSk7XG4gICAgICAgfVxuXG4gICAgICAgLmV2ZW4tYWRkLCAuZXZlbi1yZW1vdmUge1xuICAgICAgICAgdHJhbnNpdGlvbjogMS41cztcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgYWRkIG5ldyBlbnRyaWVzIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpc3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBidXR0b24gPSBlbGVtZW50KGJ5LmJ1dHRvblRleHQoJ0FkZCBpdGVtJykpO1xuICAgICAgICAgdmFyIHJvd3MgPSBlbGVtZW50LmFsbChieS5yZXBlYXRlcignaXRlbSBpbiBpdGVtcycpKTtcblxuICAgICAgICAgZXhwZWN0KHJvd3MuY291bnQoKSkudG9CZSg0KTtcbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgwKS5nZXRUZXh0KCkpLnRvQmUoJ0l0ZW0gMycpO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnSXRlbSAyJyk7XG5cbiAgICAgICAgIGJ1dHRvbi5jbGljaygpO1xuXG4gICAgICAgICBleHBlY3Qocm93cy5jb3VudCgpKS50b0JlKDUpO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnSXRlbSA0Jyk7XG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMSkuZ2V0VGV4dCgpKS50b0JlKCdJdGVtIDMnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgYWRkIGV2ZW4gY2xhc3MgdG8gZXZlbiBlbnRyaWVzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgYnV0dG9uID0gZWxlbWVudChieS5idXR0b25UZXh0KCdBZGQgaXRlbScpKTtcbiAgICAgICAgIHZhciByb3dzID0gZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoJ2l0ZW0gaW4gaXRlbXMnKSk7XG5cbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgwKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9ldmVuLyk7XG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9ldmVuLyk7XG5cbiAgICAgICAgIGJ1dHRvbi5jbGljaygpO1xuXG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5ub3QudG9NYXRjaCgvZXZlbi8pO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvZXZlbi8pO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCdFdmVuJywgMSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDbG9ha1xuICogQHJlc3RyaWN0IEFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZSBpcyB1c2VkIHRvIHByZXZlbnQgdGhlIEFuZ3VsYXJKUyBodG1sIHRlbXBsYXRlIGZyb20gYmVpbmcgYnJpZWZseVxuICogZGlzcGxheWVkIGJ5IHRoZSBicm93c2VyIGluIGl0cyByYXcgKHVuY29tcGlsZWQpIGZvcm0gd2hpbGUgeW91ciBhcHBsaWNhdGlvbiBpcyBsb2FkaW5nLiBVc2UgdGhpc1xuICogZGlyZWN0aXZlIHRvIGF2b2lkIHRoZSB1bmRlc2lyYWJsZSBmbGlja2VyIGVmZmVjdCBjYXVzZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGUgZGlzcGxheS5cbiAqXG4gKiBUaGUgZGlyZWN0aXZlIGNhbiBiZSBhcHBsaWVkIHRvIHRoZSBgPGJvZHk+YCBlbGVtZW50LCBidXQgdGhlIHByZWZlcnJlZCB1c2FnZSBpcyB0byBhcHBseVxuICogbXVsdGlwbGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZXMgdG8gc21hbGwgcG9ydGlvbnMgb2YgdGhlIHBhZ2UgdG8gcGVybWl0IHByb2dyZXNzaXZlIHJlbmRlcmluZ1xuICogb2YgdGhlIGJyb3dzZXIgdmlldy5cbiAqXG4gKiBgbmdDbG9ha2Agd29ya3MgaW4gY29vcGVyYXRpb24gd2l0aCB0aGUgZm9sbG93aW5nIGNzcyBydWxlIGVtYmVkZGVkIHdpdGhpbiBgYW5ndWxhci5qc2AgYW5kXG4gKiBgYW5ndWxhci5taW4uanNgLlxuICogRm9yIENTUCBtb2RlIHBsZWFzZSBhZGQgYGFuZ3VsYXItY3NwLmNzc2AgdG8geW91ciBodG1sIGZpbGUgKHNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ3NwIG5nQ3NwfSkuXG4gKlxuICogYGBgY3NzXG4gKiBbbmdcXDpjbG9ha10sIFtuZy1jbG9ha10sIFtkYXRhLW5nLWNsb2FrXSwgW3gtbmctY2xvYWtdLCAubmctY2xvYWssIC54LW5nLWNsb2FrIHtcbiAqICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICogfVxuICogYGBgXG4gKlxuICogV2hlbiB0aGlzIGNzcyBydWxlIGlzIGxvYWRlZCBieSB0aGUgYnJvd3NlciwgYWxsIGh0bWwgZWxlbWVudHMgKGluY2x1ZGluZyB0aGVpciBjaGlsZHJlbikgdGhhdFxuICogYXJlIHRhZ2dlZCB3aXRoIHRoZSBgbmdDbG9ha2AgZGlyZWN0aXZlIGFyZSBoaWRkZW4uIFdoZW4gQW5ndWxhckpTIGVuY291bnRlcnMgdGhpcyBkaXJlY3RpdmVcbiAqIGR1cmluZyB0aGUgY29tcGlsYXRpb24gb2YgdGhlIHRlbXBsYXRlIGl0IGRlbGV0ZXMgdGhlIGBuZ0Nsb2FrYCBlbGVtZW50IGF0dHJpYnV0ZSwgbWFraW5nXG4gKiB0aGUgY29tcGlsZWQgZWxlbWVudCB2aXNpYmxlLlxuICpcbiAqIEZvciB0aGUgYmVzdCByZXN1bHQsIHRoZSBgYW5ndWxhci5qc2Agc2NyaXB0IG11c3QgYmUgbG9hZGVkIGluIHRoZSBoZWFkIHNlY3Rpb24gb2YgdGhlIGh0bWxcbiAqIGRvY3VtZW50OyBhbHRlcm5hdGl2ZWx5LCB0aGUgY3NzIHJ1bGUgYWJvdmUgbXVzdCBiZSBpbmNsdWRlZCBpbiB0aGUgZXh0ZXJuYWwgc3R5bGVzaGVldCBvZiB0aGVcbiAqIGFwcGxpY2F0aW9uLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY2xvYWtcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMVwiIG5nLWNsb2FrPnt7ICdoZWxsbycgfX08L2Rpdj5cbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMlwiIGNsYXNzPVwibmctY2xvYWtcIj57eyAnd29ybGQnIH19PC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgcmVtb3ZlIHRoZSB0ZW1wbGF0ZSBkaXJlY3RpdmUgYW5kIGNzcyBjbGFzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KCQoJyN0ZW1wbGF0ZTEnKS5nZXRBdHRyaWJ1dGUoJ25nLWNsb2FrJykpLlxuICAgICAgICAgICB0b0JlTnVsbCgpO1xuICAgICAgICAgZXhwZWN0KCQoJyN0ZW1wbGF0ZTInKS5nZXRBdHRyaWJ1dGUoJ25nLWNsb2FrJykpLlxuICAgICAgICAgICB0b0JlTnVsbCgpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKlxuICovXG52YXIgbmdDbG9ha0RpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcbiAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgIGF0dHIuJHNldCgnbmdDbG9haycsIHVuZGVmaW5lZCk7XG4gICAgZWxlbWVudC5yZW1vdmVDbGFzcygnbmctY2xvYWsnKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDb250cm9sbGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlIGF0dGFjaGVzIGEgY29udHJvbGxlciBjbGFzcyB0byB0aGUgdmlldy4gVGhpcyBpcyBhIGtleSBhc3BlY3Qgb2YgaG93IGFuZ3VsYXJcbiAqIHN1cHBvcnRzIHRoZSBwcmluY2lwbGVzIGJlaGluZCB0aGUgTW9kZWwtVmlldy1Db250cm9sbGVyIGRlc2lnbiBwYXR0ZXJuLlxuICpcbiAqIE1WQyBjb21wb25lbnRzIGluIGFuZ3VsYXI6XG4gKlxuICogKiBNb2RlbCDigJQgTW9kZWxzIGFyZSB0aGUgcHJvcGVydGllcyBvZiBhIHNjb3BlOyBzY29wZXMgYXJlIGF0dGFjaGVkIHRvIHRoZSBET00gd2hlcmUgc2NvcGUgcHJvcGVydGllc1xuICogICBhcmUgYWNjZXNzZWQgdGhyb3VnaCBiaW5kaW5ncy5cbiAqICogVmlldyDigJQgVGhlIHRlbXBsYXRlIChIVE1MIHdpdGggZGF0YSBiaW5kaW5ncykgdGhhdCBpcyByZW5kZXJlZCBpbnRvIHRoZSBWaWV3LlxuICogKiBDb250cm9sbGVyIOKAlCBUaGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlIHNwZWNpZmllcyBhIENvbnRyb2xsZXIgY2xhc3M7IHRoZSBjbGFzcyBjb250YWlucyBidXNpbmVzc1xuICogICBsb2dpYyBiZWhpbmQgdGhlIGFwcGxpY2F0aW9uIHRvIGRlY29yYXRlIHRoZSBzY29wZSB3aXRoIGZ1bmN0aW9ucyBhbmQgdmFsdWVzXG4gKlxuICogTm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBhdHRhY2ggY29udHJvbGxlcnMgdG8gdGhlIERPTSBieSBkZWNsYXJpbmcgaXQgaW4gYSByb3V0ZSBkZWZpbml0aW9uXG4gKiB2aWEgdGhlIHtAbGluayBuZ1JvdXRlLiRyb3V0ZSAkcm91dGV9IHNlcnZpY2UuIEEgY29tbW9uIG1pc3Rha2UgaXMgdG8gZGVjbGFyZSB0aGUgY29udHJvbGxlclxuICogYWdhaW4gdXNpbmcgYG5nLWNvbnRyb2xsZXJgIGluIHRoZSB0ZW1wbGF0ZSBpdHNlbGYuICBUaGlzIHdpbGwgY2F1c2UgdGhlIGNvbnRyb2xsZXIgdG8gYmUgYXR0YWNoZWRcbiAqIGFuZCBleGVjdXRlZCB0d2ljZS5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBzY29wZVxuICogQHByaW9yaXR5IDUwMFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NvbnRyb2xsZXIgTmFtZSBvZiBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHJlZ2lzdGVyZWQgd2l0aCB0aGUgY3VycmVudFxuICoge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIgJGNvbnRyb2xsZXJQcm92aWRlcn0gb3IgYW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn1cbiAqIHRoYXQgb24gdGhlIGN1cnJlbnQgc2NvcGUgZXZhbHVhdGVzIHRvIGEgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKlxuICogVGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgY2FuIGJlIHB1Ymxpc2hlZCBpbnRvIGEgc2NvcGUgcHJvcGVydHkgYnkgc3BlY2lmeWluZ1xuICogYG5nLWNvbnRyb2xsZXI9XCJhcyBwcm9wZXJ0eU5hbWVcImAuXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgaXMgYSBzaW1wbGUgZm9ybSBmb3IgZWRpdGluZyB1c2VyIGNvbnRhY3QgaW5mb3JtYXRpb24uIEFkZGluZywgcmVtb3ZpbmcsIGNsZWFyaW5nLCBhbmRcbiAqIGdyZWV0aW5nIGFyZSBtZXRob2RzIGRlY2xhcmVkIG9uIHRoZSBjb250cm9sbGVyIChzZWUgc291cmNlIHRhYikuIFRoZXNlIG1ldGhvZHMgY2FuXG4gKiBlYXNpbHkgYmUgY2FsbGVkIGZyb20gdGhlIEFuZ3VsYXJKUyBtYXJrdXAuIEFueSBjaGFuZ2VzIHRvIHRoZSBkYXRhIGFyZSBhdXRvbWF0aWNhbGx5IHJlZmxlY3RlZFxuICogaW4gdGhlIFZpZXcgd2l0aG91dCB0aGUgbmVlZCBmb3IgYSBtYW51YWwgdXBkYXRlLlxuICpcbiAqIFR3byBkaWZmZXJlbnQgZGVjbGFyYXRpb24gc3R5bGVzIGFyZSBpbmNsdWRlZCBiZWxvdzpcbiAqXG4gKiAqIG9uZSBiaW5kcyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGRpcmVjdGx5IG9udG8gdGhlIGNvbnRyb2xsZXIgdXNpbmcgYHRoaXNgOlxuICogYG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIxIGFzIHNldHRpbmdzXCJgXG4gKiAqIG9uZSBpbmplY3RzIGAkc2NvcGVgIGludG8gdGhlIGNvbnRyb2xsZXI6XG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcImBcbiAqXG4gKiBUaGUgc2Vjb25kIG9wdGlvbiBpcyBtb3JlIGNvbW1vbiBpbiB0aGUgQW5ndWxhckpTIGNvbW11bml0eSwgYW5kIGlzIGdlbmVyYWxseSB1c2VkIGluIGJvaWxlcnBsYXRlc1xuICogYW5kIGluIHRoaXMgZ3VpZGUuIEhvd2V2ZXIsIHRoZXJlIGFyZSBhZHZhbnRhZ2VzIHRvIGJpbmRpbmcgcHJvcGVydGllcyBkaXJlY3RseSB0byB0aGUgY29udHJvbGxlclxuICogYW5kIGF2b2lkaW5nIHNjb3BlLlxuICpcbiAqICogVXNpbmcgYGNvbnRyb2xsZXIgYXNgIG1ha2VzIGl0IG9idmlvdXMgd2hpY2ggY29udHJvbGxlciB5b3UgYXJlIGFjY2Vzc2luZyBpbiB0aGUgdGVtcGxhdGUgd2hlblxuICogbXVsdGlwbGUgY29udHJvbGxlcnMgYXBwbHkgdG8gYW4gZWxlbWVudC5cbiAqICogSWYgeW91IGFyZSB3cml0aW5nIHlvdXIgY29udHJvbGxlcnMgYXMgY2xhc3NlcyB5b3UgaGF2ZSBlYXNpZXIgYWNjZXNzIHRvIHRoZSBwcm9wZXJ0aWVzIGFuZFxuICogbWV0aG9kcywgd2hpY2ggd2lsbCBhcHBlYXIgb24gdGhlIHNjb3BlLCBmcm9tIGluc2lkZSB0aGUgY29udHJvbGxlciBjb2RlLlxuICogKiBTaW5jZSB0aGVyZSBpcyBhbHdheXMgYSBgLmAgaW4gdGhlIGJpbmRpbmdzLCB5b3UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBwcm90b3R5cGFsXG4gKiBpbmhlcml0YW5jZSBtYXNraW5nIHByaW1pdGl2ZXMuXG4gKlxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgYGNvbnRyb2xsZXIgYXNgIHN5bnRheC5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDb250cm9sbGVyQXNcIiBtb2R1bGU9XCJjb250cm9sbGVyQXNFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICA8ZGl2IGlkPVwiY3RybC1hcy1leG1wbFwiIG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIxIGFzIHNldHRpbmdzXCI+XG4gKiAgICAgIDxsYWJlbD5OYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNldHRpbmdzLm5hbWVcIi8+PC9sYWJlbD5cbiAqICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNldHRpbmdzLmdyZWV0KClcIj5ncmVldDwvYnV0dG9uPjxici8+XG4gKiAgICAgIENvbnRhY3Q6XG4gKiAgICAgIDx1bD5cbiAqICAgICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0c1wiPlxuICogICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cImNvbnRhY3QudHlwZVwiIGFyaWEtbGFiZWw9XCJDb250YWN0IG1ldGhvZFwiIGlkPVwic2VsZWN0X3t7JGluZGV4fX1cIj5cbiAqICAgICAgICAgICAgIDxvcHRpb24+cGhvbmU8L29wdGlvbj5cbiAqICAgICAgICAgICAgIDxvcHRpb24+ZW1haWw8L29wdGlvbj5cbiAqICAgICAgICAgIDwvc2VsZWN0PlxuICogICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJjb250YWN0LnZhbHVlXCIgYXJpYS1sYWJlbGxlZGJ5PVwic2VsZWN0X3t7JGluZGV4fX1cIiAvPlxuICogICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNldHRpbmdzLmNsZWFyQ29udGFjdChjb250YWN0KVwiPmNsZWFyPC9idXR0b24+XG4gKiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic2V0dGluZ3MucmVtb3ZlQ29udGFjdChjb250YWN0KVwiIGFyaWEtbGFiZWw9XCJSZW1vdmVcIj5YPC9idXR0b24+XG4gKiAgICAgICAgPC9saT5cbiAqICAgICAgICA8bGk+PGJ1dHRvbiBuZy1jbGljaz1cInNldHRpbmdzLmFkZENvbnRhY3QoKVwiPmFkZDwvYnV0dG9uPjwvbGk+XG4gKiAgICAgPC91bD5cbiAqICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgIGFuZ3VsYXIubW9kdWxlKCdjb250cm9sbGVyQXNFeGFtcGxlJywgW10pXG4gKiAgICAgIC5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXIxJywgU2V0dGluZ3NDb250cm9sbGVyMSk7XG4gKlxuICogICAgZnVuY3Rpb24gU2V0dGluZ3NDb250cm9sbGVyMSgpIHtcbiAqICAgICAgdGhpcy5uYW1lID0gJ0pvaG4gU21pdGgnO1xuICogICAgICB0aGlzLmNvbnRhY3RzID0gW1xuICogICAgICAgIHt0eXBlOiAncGhvbmUnLCB2YWx1ZTogJzQwOCA1NTUgMTIxMid9LFxuICogICAgICAgIHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnfVxuICogICAgICBdO1xuICogICAgfVxuICpcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmdyZWV0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgIGFsZXJ0KHRoaXMubmFtZSk7XG4gKiAgICB9O1xuICpcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmFkZENvbnRhY3QgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgdGhpcy5jb250YWN0cy5wdXNoKHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ3lvdXJuYW1lQGV4YW1wbGUub3JnJ30pO1xuICogICAgfTtcbiAqXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5yZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdFRvUmVtb3ZlKSB7XG4gKiAgICAgdmFyIGluZGV4ID0gdGhpcy5jb250YWN0cy5pbmRleE9mKGNvbnRhY3RUb1JlbW92ZSk7XG4gKiAgICAgIHRoaXMuY29udGFjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAqICAgIH07XG4gKlxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUuY2xlYXJDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge1xuICogICAgICBjb250YWN0LnR5cGUgPSAncGhvbmUnO1xuICogICAgICBjb250YWN0LnZhbHVlID0gJyc7XG4gKiAgICB9O1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICBpdCgnc2hvdWxkIGNoZWNrIGNvbnRyb2xsZXIgYXMnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50KGJ5LmlkKCdjdHJsLWFzLWV4bXBsJykpO1xuICogICAgICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkubW9kZWwoJ3NldHRpbmdzLm5hbWUnKSlcbiAqICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCdKb2huIFNtaXRoJyk7XG4gKlxuICogICAgICAgdmFyIGZpcnN0UmVwZWF0ID1cbiAqICAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygwKSk7XG4gKiAgICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cbiAqICAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygxKSk7XG4gKlxuICogICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCc0MDggNTU1IDEyMTInKTtcbiAqXG4gKiAgICAgICBleHBlY3Qoc2Vjb25kUmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCdqb2huLnNtaXRoQGV4YW1wbGUub3JnJyk7XG4gKlxuICogICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5idXR0b25UZXh0KCdjbGVhcicpKS5jbGljaygpO1xuICpcbiAqICAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgICAudG9CZSgnJyk7XG4gKlxuICogICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnYWRkJykpLmNsaWNrKCk7XG4gKlxuICogICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzJykucm93KDIpKVxuICogICAgICAgICAgIC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpXG4gKiAgICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgICAudG9CZSgneW91cm5hbWVAZXhhbXBsZS5vcmcnKTtcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdGhlIFwiYXR0YWNoIHRvIGAkc2NvcGVgXCIgc3R5bGUgb2YgY29udHJvbGxlci5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDb250cm9sbGVyXCIgbW9kdWxlPVwiY29udHJvbGxlckV4YW1wbGVcIj5cbiAqICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICA8ZGl2IGlkPVwiY3RybC1leG1wbFwiIG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIyXCI+XG4gKiAgICAgPGxhYmVsPk5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiLz48L2xhYmVsPlxuICogICAgIDxidXR0b24gbmctY2xpY2s9XCJncmVldCgpXCI+Z3JlZXQ8L2J1dHRvbj48YnIvPlxuICogICAgIENvbnRhY3Q6XG4gKiAgICAgPHVsPlxuICogICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cImNvbnRhY3QudHlwZVwiIGlkPVwic2VsZWN0X3t7JGluZGV4fX1cIj5cbiAqICAgICAgICAgICAgPG9wdGlvbj5waG9uZTwvb3B0aW9uPlxuICogICAgICAgICAgICA8b3B0aW9uPmVtYWlsPC9vcHRpb24+XG4gKiAgICAgICAgIDwvc2VsZWN0PlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbnRhY3QudmFsdWVcIiBhcmlhLWxhYmVsbGVkYnk9XCJzZWxlY3Rfe3skaW5kZXh9fVwiIC8+XG4gKiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjbGVhckNvbnRhY3QoY29udGFjdClcIj5jbGVhcjwvYnV0dG9uPlxuICogICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicmVtb3ZlQ29udGFjdChjb250YWN0KVwiPlg8L2J1dHRvbj5cbiAqICAgICAgIDwvbGk+XG4gKiAgICAgICA8bGk+WyA8YnV0dG9uIG5nLWNsaWNrPVwiYWRkQ29udGFjdCgpXCI+YWRkPC9idXR0b24+IF08L2xpPlxuICogICAgPC91bD5cbiAqICAgPC9kaXY+XG4gKiAgPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2xsZXJFeGFtcGxlJywgW10pXG4gKiAgICAgLmNvbnRyb2xsZXIoJ1NldHRpbmdzQ29udHJvbGxlcjInLCBbJyRzY29wZScsIFNldHRpbmdzQ29udHJvbGxlcjJdKTtcbiAqXG4gKiAgIGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbGxlcjIoJHNjb3BlKSB7XG4gKiAgICAgJHNjb3BlLm5hbWUgPSAnSm9obiBTbWl0aCc7XG4gKiAgICAgJHNjb3BlLmNvbnRhY3RzID0gW1xuICogICAgICAge3R5cGU6J3Bob25lJywgdmFsdWU6JzQwOCA1NTUgMTIxMid9LFxuICogICAgICAge3R5cGU6J2VtYWlsJywgdmFsdWU6J2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnfVxuICogICAgIF07XG4gKlxuICogICAgICRzY29wZS5ncmVldCA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgYWxlcnQoJHNjb3BlLm5hbWUpO1xuICogICAgIH07XG4gKlxuICogICAgICRzY29wZS5hZGRDb250YWN0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAkc2NvcGUuY29udGFjdHMucHVzaCh7dHlwZTonZW1haWwnLCB2YWx1ZToneW91cm5hbWVAZXhhbXBsZS5vcmcnfSk7XG4gKiAgICAgfTtcbiAqXG4gKiAgICAgJHNjb3BlLnJlbW92ZUNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0VG9SZW1vdmUpIHtcbiAqICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5jb250YWN0cy5pbmRleE9mKGNvbnRhY3RUb1JlbW92ZSk7XG4gKiAgICAgICAkc2NvcGUuY29udGFjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAqICAgICB9O1xuICpcbiAqICAgICAkc2NvcGUuY2xlYXJDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge1xuICogICAgICAgY29udGFjdC50eXBlID0gJ3Bob25lJztcbiAqICAgICAgIGNvbnRhY3QudmFsdWUgPSAnJztcbiAqICAgICB9O1xuICogICB9XG4gKiAgPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgIGl0KCdzaG91bGQgY2hlY2sgY29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xuICogICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5pZCgnY3RybC1leG1wbCcpKTtcbiAqXG4gKiAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5tb2RlbCgnbmFtZScpKVxuICogICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnSm9obiBTbWl0aCcpO1xuICpcbiAqICAgICAgdmFyIGZpcnN0UmVwZWF0ID1cbiAqICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDApKTtcbiAqICAgICAgdmFyIHNlY29uZFJlcGVhdCA9XG4gKiAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBjb250YWN0cycpLnJvdygxKSk7XG4gKlxuICogICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAudG9CZSgnNDA4IDU1NSAxMjEyJyk7XG4gKiAgICAgIGV4cGVjdChzZWNvbmRSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAudG9CZSgnam9obi5zbWl0aEBleGFtcGxlLm9yZycpO1xuICpcbiAqICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5idXR0b25UZXh0KCdjbGVhcicpKS5jbGljaygpO1xuICpcbiAqICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgLnRvQmUoJycpO1xuICpcbiAqICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnYWRkJykpLmNsaWNrKCk7XG4gKlxuICogICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gY29udGFjdHMnKS5yb3coMikpXG4gKiAgICAgICAgICAuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKVxuICogICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgIC50b0JlKCd5b3VybmFtZUBleGFtcGxlLm9yZycpO1xuICogICAgfSk7XG4gKiAgPC9maWxlPlxuICo8L2V4YW1wbGU+XG5cbiAqL1xudmFyIG5nQ29udHJvbGxlckRpcmVjdGl2ZSA9IFtmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHNjb3BlOiB0cnVlLFxuICAgIGNvbnRyb2xsZXI6ICdAJyxcbiAgICBwcmlvcml0eTogNTAwXG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NzcFxuICpcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEFuZ3VsYXJKUyBoYXMgc29tZSBmZWF0dXJlcyB0aGF0IGNhbiBjb25mbGljdCB3aXRoIGNlcnRhaW4gcmVzdHJpY3Rpb25zIHRoYXQgYXJlIGFwcGxpZWQgd2hlbiB1c2luZ1xuICogW0NTUCAoQ29udGVudCBTZWN1cml0eSBQb2xpY3kpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9TZWN1cml0eS9DU1ApIHJ1bGVzLlxuICpcbiAqIElmIHlvdSBpbnRlbmQgdG8gaW1wbGVtZW50IENTUCB3aXRoIHRoZXNlIHJ1bGVzIHRoZW4geW91IG11c3QgdGVsbCBBbmd1bGFySlMgbm90IHRvIHVzZSB0aGVzZVxuICogZmVhdHVyZXMuXG4gKlxuICogVGhpcyBpcyBuZWNlc3Nhcnkgd2hlbiBkZXZlbG9waW5nIHRoaW5ncyBsaWtlIEdvb2dsZSBDaHJvbWUgRXh0ZW5zaW9ucyBvciBVbml2ZXJzYWwgV2luZG93cyBBcHBzLlxuICpcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGRlZmF1bHQgcnVsZXMgaW4gQ1NQIGFmZmVjdCBBbmd1bGFySlM6XG4gKlxuICogKiBUaGUgdXNlIG9mIGBldmFsKClgLCBgRnVuY3Rpb24oc3RyaW5nKWAgYW5kIHNpbWlsYXIgZnVuY3Rpb25zIHRvIGR5bmFtaWNhbGx5IGNyZWF0ZSBhbmQgZXhlY3V0ZVxuICogY29kZSBmcm9tIHN0cmluZ3MgaXMgZm9yYmlkZGVuLiBBbmd1bGFySlMgbWFrZXMgdXNlIG9mIHRoaXMgaW4gdGhlIHtAbGluayAkcGFyc2V9IHNlcnZpY2UgdG9cbiAqIHByb3ZpZGUgYSAzMCUgaW5jcmVhc2UgaW4gdGhlIHNwZWVkIG9mIGV2YWx1YXRpbmcgQW5ndWxhckpTIGV4cHJlc3Npb25zLiAoVGhpcyBDU1AgcnVsZSBjYW4gYmVcbiAqIGRpc2FibGVkIHdpdGggdGhlIENTUCBrZXl3b3JkIGB1bnNhZmUtZXZhbGAsIGJ1dCBpdCBpcyBnZW5lcmFsbHkgbm90IHJlY29tbWVuZGVkIGFzIGl0IHdvdWxkXG4gKiB3ZWFrZW4gdGhlIHByb3RlY3Rpb25zIG9mZmVyZWQgYnkgQ1NQLilcbiAqXG4gKiAqIFRoZSB1c2Ugb2YgaW5saW5lIHJlc291cmNlcywgc3VjaCBhcyBpbmxpbmUgYDxzY3JpcHQ+YCBhbmQgYDxzdHlsZT5gIGVsZW1lbnRzLCBhcmUgZm9yYmlkZGVuLlxuICogVGhpcyBwcmV2ZW50cyBhcHBzIGZyb20gaW5qZWN0aW5nIGN1c3RvbSBzdHlsZXMgZGlyZWN0bHkgaW50byB0aGUgZG9jdW1lbnQuIEFuZ3VsYXJKUyBtYWtlcyB1c2Ugb2ZcbiAqIHRoaXMgdG8gaW5jbHVkZSBzb21lIENTUyBydWxlcyAoZS5nLiB7QGxpbmsgbmdDbG9ha30gYW5kIHtAbGluayBuZ0hpZGV9KS4gVG8gbWFrZSB0aGVzZVxuICogZGlyZWN0aXZlcyB3b3JrIHdoZW4gYSBDU1AgcnVsZSBpcyBibG9ja2luZyBpbmxpbmUgc3R5bGVzLCB5b3UgbXVzdCBsaW5rIHRvIHRoZSBgYW5ndWxhci1jc3AuY3NzYFxuICogaW4geW91ciBIVE1MIG1hbnVhbGx5LiAoVGhpcyBDU1AgcnVsZSBjYW4gYmUgZGlzYWJsZWQgd2l0aCB0aGUgQ1NQIGtleXdvcmQgYHVuc2FmZS1pbmxpbmVgLCBidXRcbiAqIGl0IGlzIGdlbmVyYWxseSBub3QgcmVjb21tZW5kZWQgYXMgaXQgd291bGQgd2Vha2VuIHRoZSBwcm90ZWN0aW9ucyBvZmZlcmVkIGJ5IENTUC4pXG4gKlxuICogSWYgeW91IGRvIG5vdCBwcm92aWRlIGBuZ0NzcGAgdGhlbiBBbmd1bGFySlMgdHJpZXMgdG8gYXV0b2RldGVjdCBpZiBDU1AgaXMgYmxvY2tpbmcgZHluYW1pYyBjb2RlXG4gKiBjcmVhdGlvbiBmcm9tIHN0cmluZ3MgKGUuZy4sIGB1bnNhZmUtZXZhbGAgbm90IHNwZWNpZmllZCBpbiBDU1AgaGVhZGVyKSBhbmQgYXV0b21hdGljYWxseVxuICogZGVhY3RpdmF0ZXMgdGhpcyBmZWF0dXJlIGluIHRoZSB7QGxpbmsgJHBhcnNlfSBzZXJ2aWNlLiBUaGlzIGF1dG9kZXRlY3Rpb24sIGhvd2V2ZXIsIHRyaWdnZXJzIGFcbiAqIENTUCBlcnJvciB0byBiZSBsb2dnZWQgaW4gdGhlIGNvbnNvbGU6XG4gKlxuICogYGBgXG4gKiBSZWZ1c2VkIHRvIGV2YWx1YXRlIGEgc3RyaW5nIGFzIEphdmFTY3JpcHQgYmVjYXVzZSAndW5zYWZlLWV2YWwnIGlzIG5vdCBhbiBhbGxvd2VkIHNvdXJjZSBvZlxuICogc2NyaXB0IGluIHRoZSBmb2xsb3dpbmcgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZGlyZWN0aXZlOiBcImRlZmF1bHQtc3JjICdzZWxmJ1wiLiBOb3RlIHRoYXRcbiAqICdzY3JpcHQtc3JjJyB3YXMgbm90IGV4cGxpY2l0bHkgc2V0LCBzbyAnZGVmYXVsdC1zcmMnIGlzIHVzZWQgYXMgYSBmYWxsYmFjay5cbiAqIGBgYFxuICpcbiAqIFRoaXMgZXJyb3IgaXMgaGFybWxlc3MgYnV0IGFubm95aW5nLiBUbyBwcmV2ZW50IHRoZSBlcnJvciBmcm9tIHNob3dpbmcgdXAsIHB1dCB0aGUgYG5nQ3NwYFxuICogZGlyZWN0aXZlIG9uIGFuIGVsZW1lbnQgb2YgdGhlIEhUTUwgZG9jdW1lbnQgdGhhdCBhcHBlYXJzIGJlZm9yZSB0aGUgYDxzY3JpcHQ+YCB0YWcgdGhhdCBsb2Fkc1xuICogdGhlIGBhbmd1bGFyLmpzYCBmaWxlLlxuICpcbiAqICpOb3RlOiBUaGlzIGRpcmVjdGl2ZSBpcyBvbmx5IGF2YWlsYWJsZSBpbiB0aGUgYG5nLWNzcGAgYW5kIGBkYXRhLW5nLWNzcGAgYXR0cmlidXRlIGZvcm0uKlxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSB3aGljaCBvZiB0aGUgQ1NQIHJlbGF0ZWQgQW5ndWxhckpTIGZlYXR1cmVzIHNob3VsZCBiZSBkZWFjdGl2YXRlZCBieSBwcm92aWRpbmdcbiAqIGEgdmFsdWUgZm9yIHRoZSBgbmctY3NwYCBhdHRyaWJ1dGUuIFRoZSBvcHRpb25zIGFyZSBhcyBmb2xsb3dzOlxuICpcbiAqICogbm8taW5saW5lLXN0eWxlOiB0aGlzIHN0b3BzIEFuZ3VsYXJKUyBmcm9tIGluamVjdGluZyBDU1Mgc3R5bGVzIGludG8gdGhlIERPTVxuICpcbiAqICogbm8tdW5zYWZlLWV2YWw6IHRoaXMgc3RvcHMgQW5ndWxhckpTIGZyb20gb3B0aW1pemluZyAkcGFyc2Ugd2l0aCB1bnNhZmUgZXZhbCBvZiBzdHJpbmdzXG4gKlxuICogWW91IGNhbiB1c2UgdGhlc2UgdmFsdWVzIGluIHRoZSBmb2xsb3dpbmcgY29tYmluYXRpb25zOlxuICpcbiAqXG4gKiAqIE5vIGRlY2xhcmF0aW9uIG1lYW5zIHRoYXQgQW5ndWxhckpTIHdpbGwgYXNzdW1lIHRoYXQgeW91IGNhbiBkbyBpbmxpbmUgc3R5bGVzLCBidXQgaXQgd2lsbCBkb1xuICogYSBydW50aW1lIGNoZWNrIGZvciB1bnNhZmUtZXZhbC4gRS5nLiBgPGJvZHk+YC4gVGhpcyBpcyBiYWNrd2FyZGx5IGNvbXBhdGlibGUgd2l0aCBwcmV2aW91c1xuICogdmVyc2lvbnMgb2YgQW5ndWxhckpTLlxuICpcbiAqICogQSBzaW1wbGUgYG5nLWNzcGAgKG9yIGBkYXRhLW5nLWNzcGApIGF0dHJpYnV0ZSB3aWxsIHRlbGwgQW5ndWxhckpTIHRvIGRlYWN0aXZhdGUgYm90aCBpbmxpbmVcbiAqIHN0eWxlcyBhbmQgdW5zYWZlIGV2YWwuIEUuZy4gYDxib2R5IG5nLWNzcD5gLiBUaGlzIGlzIGJhY2t3YXJkbHkgY29tcGF0aWJsZSB3aXRoIHByZXZpb3VzXG4gKiB2ZXJzaW9ucyBvZiBBbmd1bGFySlMuXG4gKlxuICogKiBTcGVjaWZ5aW5nIG9ubHkgYG5vLXVuc2FmZS1ldmFsYCB0ZWxscyBBbmd1bGFySlMgdGhhdCB3ZSBtdXN0IG5vdCB1c2UgZXZhbCwgYnV0IHRoYXQgd2UgY2FuXG4gKiBpbmplY3QgaW5saW5lIHN0eWxlcy4gRS5nLiBgPGJvZHkgbmctY3NwPVwibm8tdW5zYWZlLWV2YWxcIj5gLlxuICpcbiAqICogU3BlY2lmeWluZyBvbmx5IGBuby1pbmxpbmUtc3R5bGVgIHRlbGxzIEFuZ3VsYXJKUyB0aGF0IHdlIG11c3Qgbm90IGluamVjdCBzdHlsZXMsIGJ1dCB0aGF0IHdlIGNhblxuICogcnVuIGV2YWwgLSBubyBhdXRvbWF0aWMgY2hlY2sgZm9yIHVuc2FmZSBldmFsIHdpbGwgb2NjdXIuIEUuZy4gYDxib2R5IG5nLWNzcD1cIm5vLWlubGluZS1zdHlsZVwiPmBcbiAqXG4gKiAqIFNwZWNpZnlpbmcgYm90aCBgbm8tdW5zYWZlLWV2YWxgIGFuZCBgbm8taW5saW5lLXN0eWxlYCB0ZWxscyBBbmd1bGFySlMgdGhhdCB3ZSBtdXN0IG5vdCBpbmplY3RcbiAqIHN0eWxlcyBub3IgdXNlIGV2YWwsIHdoaWNoIGlzIHRoZSBzYW1lIGFzIGFuIGVtcHR5OiBuZy1jc3AuXG4gKiBFLmcuYDxib2R5IG5nLWNzcD1cIm5vLWlubGluZS1zdHlsZTtuby11bnNhZmUtZXZhbFwiPmBcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gYXBwbHkgdGhlIGBuZ0NzcGAgZGlyZWN0aXZlIHRvIHRoZSBgaHRtbGAgdGFnLlxuICAgYGBgaHRtbFxuICAgICA8IWRvY3R5cGUgaHRtbD5cbiAgICAgPGh0bWwgbmctYXBwIG5nLWNzcD5cbiAgICAgLi4uXG4gICAgIC4uLlxuICAgICA8L2h0bWw+XG4gICBgYGBcblxuICA8IS0tIE5vdGU6IHRoZSBgLmNzcGAgc3VmZml4IGluIHRoZSBleGFtcGxlIG5hbWUgdHJpZ2dlcnMgQ1NQIG1vZGUgaW4gb3VyIGh0dHAgc2VydmVyISAtLT5cbiAgPGV4YW1wbGUgbmFtZT1cImV4YW1wbGUuY3NwXCIgbW9kdWxlPVwiY3NwRXhhbXBsZVwiIG5nLWNzcD1cInRydWVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkNvbnRyb2xsZXIgYXMgY3RybFwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjdHJsLmluYygpXCIgaWQ9XCJpbmNcIj5JbmNyZW1lbnQ8L2J1dHRvbj5cbiAgICAgICAgICA8c3BhbiBpZD1cImNvdW50ZXJcIj5cbiAgICAgICAgICAgIHt7Y3RybC5jb3VudGVyfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImN0cmwuZXZpbCgpXCIgaWQ9XCJldmlsXCI+RXZpbDwvYnV0dG9uPlxuICAgICAgICAgIDxzcGFuIGlkPVwiZXZpbEVycm9yXCI+XG4gICAgICAgICAgICB7e2N0cmwuZXZpbEVycm9yfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY3NwRXhhbXBsZScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbmMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb3VudGVyKys7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5ldmlsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZXZhbCgnMSsyJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZXZhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmlsRXJyb3IgPSBlLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB1dGlsLCB3ZWJkcml2ZXI7XG5cbiAgICAgIHZhciBpbmNCdG4gPSBlbGVtZW50KGJ5LmlkKCdpbmMnKSk7XG4gICAgICB2YXIgY291bnRlciA9IGVsZW1lbnQoYnkuaWQoJ2NvdW50ZXInKSk7XG4gICAgICB2YXIgZXZpbEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2V2aWwnKSk7XG4gICAgICB2YXIgZXZpbEVycm9yID0gZWxlbWVudChieS5pZCgnZXZpbEVycm9yJykpO1xuXG4gICAgICBmdW5jdGlvbiBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIGJyb3dzZXIubWFuYWdlKCkubG9ncygpLmdldCgnYnJvd3NlcicpLnRoZW4oZnVuY3Rpb24oYnJvd3NlckxvZykge1xuICAgICAgICAgIHJldHVybiBicm93c2VyTG9nLmZpbHRlcihmdW5jdGlvbihsb2dFbnRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ0VudHJ5LmxldmVsLnZhbHVlID4gd2ViZHJpdmVyLmxvZ2dpbmcuTGV2ZWwuV0FSTklORy52YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFyRXJyb3JzKCkge1xuICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBleHBlY3ROb0Vycm9ycygpIHtcbiAgICAgICAgZ2V0QW5kQ2xlYXJTZXZlcmVFcnJvcnMoKS50aGVuKGZ1bmN0aW9uKGZpbHRlcmVkTG9nKSB7XG4gICAgICAgICAgZXhwZWN0KGZpbHRlcmVkTG9nLmxlbmd0aCkudG9FcXVhbCgwKTtcbiAgICAgICAgICBpZiAoZmlsdGVyZWRMb2cubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYnJvd3NlciBjb25zb2xlIGVycm9yczogJyArIHV0aWwuaW5zcGVjdChmaWx0ZXJlZExvZykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGV4cGVjdEVycm9yKHJlZ2V4KSB7XG4gICAgICAgIGdldEFuZENsZWFyU2V2ZXJlRXJyb3JzKCkudGhlbihmdW5jdGlvbihmaWx0ZXJlZExvZykge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgIGZpbHRlcmVkTG9nLmZvckVhY2goZnVuY3Rpb24obG9nKSB7XG4gICAgICAgICAgICBpZiAobG9nLm1lc3NhZ2UubWF0Y2gocmVnZXgpKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4cGVjdGVkIGFuIGVycm9yIHRoYXQgbWF0Y2hlcyAnICsgcmVnZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG4gICAgICAgIHdlYmRyaXZlciA9IHJlcXVpcmUoJ3NlbGVuaXVtLXdlYmRyaXZlcicpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZvciBub3csIHdlIG9ubHkgdGVzdCBvbiBDaHJvbWUsXG4gICAgICAvLyBhcyBTYWZhcmkgZG9lcyBub3QgbG9hZCB0aGUgcGFnZSB3aXRoIFByb3RyYWN0b3IncyBpbmplY3RlZCBzY3JpcHRzLFxuICAgICAgLy8gYW5kIEZpcmVmb3ggd2ViZHJpdmVyIGFsd2F5cyBkaXNhYmxlcyBjb250ZW50IHNlY3VyaXR5IHBvbGljeSAoIzYzNTgpXG4gICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciAhPT0gJ2Nocm9tZScpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIG5vdCByZXBvcnQgZXJyb3JzIHdoZW4gdGhlIHBhZ2UgaXMgbG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNsZWFyIGVycm9ycyBzbyB3ZSBhcmUgbm90IGRlcGVuZGVudCBvbiBwcmV2aW91cyB0ZXN0c1xuICAgICAgICBjbGVhckVycm9ycygpO1xuICAgICAgICAvLyBOZWVkIHRvIHJlbG9hZCB0aGUgcGFnZSBhcyB0aGUgcGFnZSBpcyBhbHJlYWR5IGxvYWRlZCB3aGVuXG4gICAgICAgIC8vIHdlIGNvbWUgaGVyZVxuICAgICAgICBicm93c2VyLmRyaXZlci5nZXRDdXJyZW50VXJsKCkudGhlbihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICBicm93c2VyLmdldCh1cmwpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXhwZWN0Tm9FcnJvcnMoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIGV4cHJlc3Npb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9FcXVhbCgnMCcpO1xuICAgICAgICBpbmNCdG4uY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCcxJyk7XG4gICAgICAgIGV4cGVjdE5vRXJyb3JzKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBhbmQgcmVwb3J0IGFuIGVycm9yIHdoZW4gdXNpbmcgXCJldmFsXCInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXZpbEJ0bi5jbGljaygpO1xuICAgICAgICBleHBlY3QoZXZpbEVycm9yLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBTZWN1cml0eSBQb2xpY3kvKTtcbiAgICAgICAgZXhwZWN0RXJyb3IoL0NvbnRlbnQgU2VjdXJpdHkgUG9saWN5Lyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAgKi9cblxuLy8gYG5nQ3NwYCBpcyBub3QgaW1wbGVtZW50ZWQgYXMgYSBwcm9wZXIgZGlyZWN0aXZlIGFueSBtb3JlLCBiZWNhdXNlIHdlIG5lZWQgaXQgYmUgcHJvY2Vzc2VkIHdoaWxlXG4vLyB3ZSBib290c3RyYXAgdGhlIGFwcCAoYmVmb3JlIGAkcGFyc2VgIGlzIGluc3RhbnRpYXRlZCkuIEZvciB0aGlzIHJlYXNvbiwgd2UganVzdCBoYXZlIHRoZSBgY3NwKClgXG4vLyBmbiB0aGF0IGxvb2tzIGZvciB0aGUgYG5nLWNzcGAgYXR0cmlidXRlIGFueXdoZXJlIGluIHRoZSBjdXJyZW50IGRvYy5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsaWNrXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIG5nQ2xpY2sgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igd2hlblxuICogYW4gZWxlbWVudCBpcyBjbGlja2VkLlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGljayB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjbGljay4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1jbGlja1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxzcGFuPlxuICAgICAgICBjb3VudDoge3tjb3VudH19XG4gICAgICA8L3NwYW4+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50JykpLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2J1dHRvbicpKS5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnY291bnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKCcxJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuLypcbiAqIEEgY29sbGVjdGlvbiBvZiBkaXJlY3RpdmVzIHRoYXQgYWxsb3dzIGNyZWF0aW9uIG9mIGN1c3RvbSBldmVudCBoYW5kbGVycyB0aGF0IGFyZSBkZWZpbmVkIGFzXG4gKiBBbmd1bGFySlMgZXhwcmVzc2lvbnMgYW5kIGFyZSBjb21waWxlZCBhbmQgZXhlY3V0ZWQgd2l0aGluIHRoZSBjdXJyZW50IHNjb3BlLlxuICovXG52YXIgbmdFdmVudERpcmVjdGl2ZXMgPSB7fTtcblxuLy8gRm9yIGV2ZW50cyB0aGF0IG1pZ2h0IGZpcmUgc3luY2hyb25vdXNseSBkdXJpbmcgRE9NIG1hbmlwdWxhdGlvblxuLy8gd2UgbmVlZCB0byBleGVjdXRlIHRoZWlyIGV2ZW50IGhhbmRsZXJzIGFzeW5jaHJvbm91c2x5IHVzaW5nICRldmFsQXN5bmMsXG4vLyBzbyB0aGF0IHRoZXkgYXJlIG5vdCBleGVjdXRlZCBpbiBhbiBpbmNvbnNpc3RlbnQgc3RhdGUuXG52YXIgZm9yY2VBc3luY0V2ZW50cyA9IHtcbiAgJ2JsdXInOiB0cnVlLFxuICAnZm9jdXMnOiB0cnVlXG59O1xuZm9yRWFjaChcbiAgJ2NsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZW1vdmUgbW91c2VlbnRlciBtb3VzZWxlYXZlIGtleWRvd24ga2V5dXAga2V5cHJlc3Mgc3VibWl0IGZvY3VzIGJsdXIgY29weSBjdXQgcGFzdGUnLnNwbGl0KCcgJyksXG4gIGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xuICAgIHZhciBkaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKCduZy0nICsgZXZlbnROYW1lKTtcbiAgICBuZ0V2ZW50RGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSA9IFsnJHBhcnNlJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcGFyc2UsICRyb290U2NvcGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKCRlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICAgLy8gTk9URTpcbiAgICAgICAgICAvLyBXZSBleHBvc2UgdGhlIHBvd2VyZnVsIGAkZXZlbnRgIG9iamVjdCBvbiB0aGUgc2NvcGUgdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gdGhlIFdpbmRvdyxcbiAgICAgICAgICAvLyBldGMuIFRoaXMgaXMgT0ssIGJlY2F1c2UgZXhwcmVzc2lvbnMgYXJlIG5vdCBzYW5kYm94ZWQgYW55IG1vcmUgKGFuZCB0aGUgZXhwcmVzc2lvblxuICAgICAgICAgIC8vIHNhbmRib3ggd2FzIG5ldmVyIG1lYW50IHRvIGJlIGEgc2VjdXJpdHkgZmVhdHVyZSBhbnl3YXkpLlxuICAgICAgICAgIHZhciBmbiA9ICRwYXJzZShhdHRyW2RpcmVjdGl2ZU5hbWVdKTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdFdmVudEhhbmRsZXIoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQub24oZXZlbnROYW1lLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmbihzY29wZSwgeyRldmVudDogZXZlbnR9KTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgaWYgKGZvcmNlQXN5bmNFdmVudHNbZXZlbnROYW1lXSAmJiAkcm9vdFNjb3BlLiQkcGhhc2UpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoY2FsbGJhY2spO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1dO1xuICB9XG4pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nRGJsY2xpY2tcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nRGJsY2xpY2tgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGEgZGJsY2xpY2sgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0RibGNsaWNrIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGEgZGJsY2xpY2suIChUaGUgRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YClcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWRibGNsaWNrXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLWRibGNsaWNrPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKG9uIGRvdWJsZSBjbGljaylcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2Vkb3duXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIG5nTW91c2Vkb3duIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlZG93biBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2Vkb3duIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNlZG93bi4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZWRvd25cIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2Vkb3duPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKG9uIG1vdXNlIGRvd24pXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNldXBcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZXVwIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZXVwIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNldXAuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctbW91c2V1cFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZXVwPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKG9uIG1vdXNlIHVwKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2VvdmVyXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VvdmVyIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZW92ZXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2VvdmVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLW1vdXNlb3ZlclwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZW92ZXI9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAod2hlbiBtb3VzZSBpcyBvdmVyKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZWVudGVyXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VlbnRlciBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VlbnRlciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBtb3VzZWVudGVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLW1vdXNlZW50ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2VlbnRlcj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGVudGVycylcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2VsZWF2ZVxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlbGVhdmUgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlbGVhdmUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2VsZWF2ZS4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZWxlYXZlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNlbGVhdmU9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAod2hlbiBtb3VzZSBsZWF2ZXMpXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNlbW92ZVxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlbW92ZSBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2Vtb3ZlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNlbW92ZS4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZW1vdmVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2Vtb3ZlPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgbW92ZXMpXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0tleWRvd25cbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBrZXlkb3duIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdLZXlkb3duIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGtleWRvd24uIChFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1rZXlkb3duXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmcta2V5ZG93bj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgIGtleSBkb3duIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0tleXVwXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5dXAgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0tleXVwIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGtleXVwLiAoRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YCBhbmQgY2FuIGJlIGludGVycm9nYXRlZCBmb3Iga2V5Q29kZSwgYWx0S2V5LCBldGMuKVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmcta2V5dXBcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8cD5UeXBpbmcgaW4gdGhlIGlucHV0IGJveCBiZWxvdyB1cGRhdGVzIHRoZSBrZXkgY291bnQ8L3A+XG4gICAgICAgPGlucHV0IG5nLWtleXVwPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPiBrZXkgdXAgY291bnQ6IHt7Y291bnR9fVxuXG4gICAgICAgPHA+VHlwaW5nIGluIHRoZSBpbnB1dCBib3ggYmVsb3cgdXBkYXRlcyB0aGUga2V5Y29kZTwvcD5cbiAgICAgICA8aW5wdXQgbmcta2V5dXA9XCJldmVudD0kZXZlbnRcIj5cbiAgICAgICA8cD5ldmVudCBrZXlDb2RlOiB7eyBldmVudC5rZXlDb2RlIH19PC9wPlxuICAgICAgIDxwPmV2ZW50IGFsdEtleToge3sgZXZlbnQuYWx0S2V5IH19PC9wPlxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nS2V5cHJlc3NcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleXByZXNzIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdLZXlwcmVzcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBrZXlwcmVzcy4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH1cbiAqIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1rZXlwcmVzc1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLWtleXByZXNzPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAga2V5IHByZXNzIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N1Ym1pdFxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IGZvcm1cbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBFbmFibGVzIGJpbmRpbmcgQW5ndWxhckpTIGV4cHJlc3Npb25zIHRvIG9uc3VibWl0IGV2ZW50cy5cbiAqXG4gKiBBZGRpdGlvbmFsbHkgaXQgcHJldmVudHMgdGhlIGRlZmF1bHQgYWN0aW9uICh3aGljaCBmb3IgZm9ybSBtZWFucyBzZW5kaW5nIHRoZSByZXF1ZXN0IHRvIHRoZVxuICogc2VydmVyIGFuZCByZWxvYWRpbmcgdGhlIGN1cnJlbnQgcGFnZSksIGJ1dCBvbmx5IGlmIHRoZSBmb3JtIGRvZXMgbm90IGNvbnRhaW4gYGFjdGlvbmAsXG4gKiBgZGF0YS1hY3Rpb25gLCBvciBgeC1hY3Rpb25gIGF0dHJpYnV0ZXMuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqV2FybmluZzoqKiBCZSBjYXJlZnVsIG5vdCB0byBjYXVzZSBcImRvdWJsZS1zdWJtaXNzaW9uXCIgYnkgdXNpbmcgYm90aCB0aGUgYG5nQ2xpY2tgIGFuZFxuICogYG5nU3VibWl0YCBoYW5kbGVycyB0b2dldGhlci4gU2VlIHRoZVxuICoge0BsaW5rIGZvcm0jc3VibWl0dGluZy1hLWZvcm0tYW5kLXByZXZlbnRpbmctdGhlLWRlZmF1bHQtYWN0aW9uIGBmb3JtYCBkaXJlY3RpdmUgZG9jdW1lbnRhdGlvbn1cbiAqIGZvciBhIGRldGFpbGVkIGRpc2N1c3Npb24gb2Ygd2hlbiBgbmdTdWJtaXRgIG1heSBiZSB0cmlnZ2VyZWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU3VibWl0IHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuXG4gKiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwic3VibWl0RXhhbXBsZVwiIG5hbWU9XCJuZy1zdWJtaXRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQ+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdzdWJtaXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5saXN0ID0gW107XG4gICAgICAgICAgICAkc2NvcGUudGV4dCA9ICdoZWxsbyc7XG4gICAgICAgICAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICgkc2NvcGUudGV4dCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5saXN0LnB1c2godGhpcy50ZXh0KTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9ICcnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1dKTtcbiAgICAgIDwvc2NyaXB0PlxuICAgICAgPGZvcm0gbmctc3VibWl0PVwic3VibWl0KClcIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgRW50ZXIgdGV4dCBhbmQgaGl0IGVudGVyOlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInRleHRcIiBuYW1lPVwidGV4dFwiIC8+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgaWQ9XCJzdWJtaXRcIiB2YWx1ZT1cIlN1Ym1pdFwiIC8+XG4gICAgICAgIDxwcmU+bGlzdD17e2xpc3R9fTwvcHJlPlxuICAgICAgPC9mb3JtPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLXN1Ym1pdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbGlzdCcpKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3Q9W10nKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCcnKTtcbiAgICAgICB9KTtcbiAgICAgICBpdCgnc2hvdWxkIGlnbm9yZSBlbXB0eSBzdHJpbmdzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9CZSgnbGlzdD1bXScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJyNzdWJtaXQnKSkuY2xpY2soKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xuICAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdGb2N1c1xuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBmb2N1cyBldmVudC5cbiAqXG4gKiBOb3RlOiBBcyB0aGUgYGZvY3VzYCBldmVudCBpcyBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gY2FsbGluZyBgaW5wdXQuZm9jdXMoKWBcbiAqIEFuZ3VsYXJKUyBleGVjdXRlcyB0aGUgZXhwcmVzc2lvbiB1c2luZyBgc2NvcGUuJGV2YWxBc3luY2AgaWYgdGhlIGV2ZW50IGlzIGZpcmVkXG4gKiBkdXJpbmcgYW4gYCRhcHBseWAgdG8gZW5zdXJlIGEgY29uc2lzdGVudCBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nRm9jdXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogZm9jdXMuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gKiBTZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0JsdXJcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gYmx1ciBldmVudC5cbiAqXG4gKiBBIFtibHVyIGV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHMvYmx1cikgZmlyZXMgd2hlblxuICogYW4gZWxlbWVudCBoYXMgbG9zdCBmb2N1cy5cbiAqXG4gKiBOb3RlOiBBcyB0aGUgYGJsdXJgIGV2ZW50IGlzIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgYWxzbyBkdXJpbmcgRE9NIG1hbmlwdWxhdGlvbnNcbiAqIChlLmcuIHJlbW92aW5nIGEgZm9jdXNzZWQgaW5wdXQpLFxuICogQW5ndWxhckpTIGV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIHVzaW5nIGBzY29wZS4kZXZhbEFzeW5jYCBpZiB0aGUgZXZlbnQgaXMgZmlyZWRcbiAqIGR1cmluZyBhbiBgJGFwcGx5YCB0byBlbnN1cmUgYSBjb25zaXN0ZW50IHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCbHVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGJsdXIuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gKiBTZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NvcHlcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gY29weSBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ29weSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjb3B5LiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNvcHlcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBuZy1jb3B5PVwiY29waWVkPXRydWVcIiBuZy1pbml0PVwiY29waWVkPWZhbHNlOyB2YWx1ZT0nY29weSBtZSdcIiBuZy1tb2RlbD1cInZhbHVlXCI+XG4gICAgICBjb3BpZWQ6IHt7Y29waWVkfX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDdXRcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gY3V0IGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDdXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogY3V0LiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWN1dFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLWN1dD1cImN1dD10cnVlXCIgbmctaW5pdD1cImN1dD1mYWxzZTsgdmFsdWU9J2N1dCBtZSdcIiBuZy1tb2RlbD1cInZhbHVlXCI+XG4gICAgICBjdXQ6IHt7Y3V0fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdQYXN0ZVxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBwYXN0ZSBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nUGFzdGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogcGFzdGUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctcGFzdGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBuZy1wYXN0ZT1cInBhc3RlPXRydWVcIiBuZy1pbml0PVwicGFzdGU9ZmFsc2VcIiBwbGFjZWhvbGRlcj0ncGFzdGUgaGVyZSc+XG4gICAgICBwYXN0ZWQ6IHt7cGFzdGV9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0lmXG4gKiBAcmVzdHJpY3QgQVxuICogQG11bHRpRWxlbWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0lmYCBkaXJlY3RpdmUgcmVtb3ZlcyBvciByZWNyZWF0ZXMgYSBwb3J0aW9uIG9mIHRoZSBET00gdHJlZSBiYXNlZCBvbiBhblxuICoge2V4cHJlc3Npb259LiBJZiB0aGUgZXhwcmVzc2lvbiBhc3NpZ25lZCB0byBgbmdJZmAgZXZhbHVhdGVzIHRvIGEgZmFsc2VcbiAqIHZhbHVlIHRoZW4gdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00sIG90aGVyd2lzZSBhIGNsb25lIG9mIHRoZVxuICogZWxlbWVudCBpcyByZWluc2VydGVkIGludG8gdGhlIERPTS5cbiAqXG4gKiBgbmdJZmAgZGlmZmVycyBmcm9tIGBuZ1Nob3dgIGFuZCBgbmdIaWRlYCBpbiB0aGF0IGBuZ0lmYCBjb21wbGV0ZWx5IHJlbW92ZXMgYW5kIHJlY3JlYXRlcyB0aGVcbiAqIGVsZW1lbnQgaW4gdGhlIERPTSByYXRoZXIgdGhhbiBjaGFuZ2luZyBpdHMgdmlzaWJpbGl0eSB2aWEgdGhlIGBkaXNwbGF5YCBjc3MgcHJvcGVydHkuICBBIGNvbW1vblxuICogY2FzZSB3aGVuIHRoaXMgZGlmZmVyZW5jZSBpcyBzaWduaWZpY2FudCBpcyB3aGVuIHVzaW5nIGNzcyBzZWxlY3RvcnMgdGhhdCByZWx5IG9uIGFuIGVsZW1lbnQnc1xuICogcG9zaXRpb24gd2l0aGluIHRoZSBET00sIHN1Y2ggYXMgdGhlIGA6Zmlyc3QtY2hpbGRgIG9yIGA6bGFzdC1jaGlsZGAgcHNldWRvLWNsYXNzZXMuXG4gKlxuICogTm90ZSB0aGF0IHdoZW4gYW4gZWxlbWVudCBpcyByZW1vdmVkIHVzaW5nIGBuZ0lmYCBpdHMgc2NvcGUgaXMgZGVzdHJveWVkIGFuZCBhIG5ldyBzY29wZVxuICogaXMgY3JlYXRlZCB3aGVuIHRoZSBlbGVtZW50IGlzIHJlc3RvcmVkLiAgVGhlIHNjb3BlIGNyZWF0ZWQgd2l0aGluIGBuZ0lmYCBpbmhlcml0cyBmcm9tXG4gKiBpdHMgcGFyZW50IHNjb3BlIHVzaW5nXG4gKiBbcHJvdG90eXBhbCBpbmhlcml0YW5jZV0oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy93aWtpL1VuZGVyc3RhbmRpbmctU2NvcGVzI2phdmFzY3JpcHQtcHJvdG90eXBhbC1pbmhlcml0YW5jZSkuXG4gKiBBbiBpbXBvcnRhbnQgaW1wbGljYXRpb24gb2YgdGhpcyBpcyBpZiBgbmdNb2RlbGAgaXMgdXNlZCB3aXRoaW4gYG5nSWZgIHRvIGJpbmQgdG9cbiAqIGEgamF2YXNjcmlwdCBwcmltaXRpdmUgZGVmaW5lZCBpbiB0aGUgcGFyZW50IHNjb3BlLiBJbiB0aGlzIGNhc2UgYW55IG1vZGlmaWNhdGlvbnMgbWFkZSB0byB0aGVcbiAqIHZhcmlhYmxlIHdpdGhpbiB0aGUgY2hpbGQgc2NvcGUgd2lsbCBvdmVycmlkZSAoaGlkZSkgdGhlIHZhbHVlIGluIHRoZSBwYXJlbnQgc2NvcGUuXG4gKlxuICogQWxzbywgYG5nSWZgIHJlY3JlYXRlcyBlbGVtZW50cyB1c2luZyB0aGVpciBjb21waWxlZCBzdGF0ZS4gQW4gZXhhbXBsZSBvZiB0aGlzIGJlaGF2aW9yXG4gKiBpcyBpZiBhbiBlbGVtZW50J3MgY2xhc3MgYXR0cmlidXRlIGlzIGRpcmVjdGx5IG1vZGlmaWVkIGFmdGVyIGl0J3MgY29tcGlsZWQsIHVzaW5nIHNvbWV0aGluZyBsaWtlXG4gKiBqUXVlcnkncyBgLmFkZENsYXNzKClgIG1ldGhvZCwgYW5kIHRoZSBlbGVtZW50IGlzIGxhdGVyIHJlbW92ZWQuIFdoZW4gYG5nSWZgIHJlY3JlYXRlcyB0aGUgZWxlbWVudFxuICogdGhlIGFkZGVkIGNsYXNzIHdpbGwgYmUgbG9zdCBiZWNhdXNlIHRoZSBvcmlnaW5hbCBjb21waWxlZCBzdGF0ZSBpcyB1c2VkIHRvIHJlZ2VuZXJhdGUgdGhlIGVsZW1lbnQuXG4gKlxuICogQWRkaXRpb25hbGx5LCB5b3UgY2FuIHByb3ZpZGUgYW5pbWF0aW9ucyB2aWEgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSB0byBhbmltYXRlIHRoZSBgZW50ZXJgXG4gKiBhbmQgYGxlYXZlYCBlZmZlY3RzLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNlbnRlciBlbnRlcn0gIHwganVzdCBhZnRlciB0aGUgYG5nSWZgIGNvbnRlbnRzIGNoYW5nZSBhbmQgYSBuZXcgRE9NIGVsZW1lbnQgaXMgY3JlYXRlZCBhbmQgaW5qZWN0ZWQgaW50byB0aGUgYG5nSWZgIGNvbnRhaW5lciB8XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNsZWF2ZSBsZWF2ZX0gIHwganVzdCBiZWZvcmUgdGhlIGBuZ0lmYCBjb250ZW50cyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBET00gfFxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgNjAwXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSWYgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIGZhbHN5IHRoZW5cbiAqICAgICB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSB0cmVlLiBJZiBpdCBpcyB0cnV0aHkgYSBjb3B5IG9mIHRoZSBjb21waWxlZFxuICogICAgIGVsZW1lbnQgaXMgYWRkZWQgdG8gdGhlIERPTSB0cmVlLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1pZlwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8bGFiZWw+Q2xpY2sgbWU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBuZy1pbml0PVwiY2hlY2tlZD10cnVlXCIgLz48L2xhYmVsPjxici8+XG4gICAgICBTaG93IHdoZW4gY2hlY2tlZDpcbiAgICAgIDxzcGFuIG5nLWlmPVwiY2hlY2tlZFwiIGNsYXNzPVwiYW5pbWF0ZS1pZlwiPlxuICAgICAgICBUaGlzIGlzIHJlbW92ZWQgd2hlbiB0aGUgY2hlY2tib3ggaXMgdW5jaGVja2VkLlxuICAgICAgPC9zcGFuPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLWlmIHtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1lbnRlciwgLmFuaW1hdGUtaWYubmctbGVhdmUge1xuICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLFxuICAgICAgLmFuaW1hdGUtaWYubmctbGVhdmUubmctbGVhdmUtYWN0aXZlIHtcbiAgICAgICAgb3BhY2l0eTowO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1sZWF2ZSxcbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XG4gICAgICAgIG9wYWNpdHk6MTtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nSWZEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgJyRjb21waWxlJywgZnVuY3Rpb24oJGFuaW1hdGUsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBwcmlvcml0eTogNjAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgJCR0bGI6IHRydWUsXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG4gICAgICAgIHZhciBibG9jaywgY2hpbGRTY29wZSwgcHJldmlvdXNFbGVtZW50cztcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgkYXR0ci5uZ0lmLCBmdW5jdGlvbiBuZ0lmV2F0Y2hBY3Rpb24odmFsdWUpIHtcblxuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFjaGlsZFNjb3BlKSB7XG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlKGZ1bmN0aW9uKGNsb25lLCBuZXdTY29wZSkge1xuICAgICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBuZXdTY29wZTtcbiAgICAgICAgICAgICAgICBjbG9uZVtjbG9uZS5sZW5ndGgrK10gPSAkY29tcGlsZS4kJGNyZWF0ZUNvbW1lbnQoJ2VuZCBuZ0lmJywgJGF0dHIubmdJZik7XG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2Ugb25seSBuZWVkIHRoZSBmaXJzdC9sYXN0IG5vZGUgb2YgdGhlIGNsb25lZCBub2Rlcy5cbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB3ZSBuZWVkIHRvIGtlZXAgdGhlIHJlZmVyZW5jZSB0byB0aGUganFsaXRlIHdyYXBwZXIgYXMgaXQgbWlnaHQgYmUgY2hhbmdlZCBsYXRlclxuICAgICAgICAgICAgICAgIC8vIGJ5IGEgZGlyZWN0aXZlIHdpdGggdGVtcGxhdGVVcmwgd2hlbiBpdHMgdGVtcGxhdGUgYXJyaXZlcy5cbiAgICAgICAgICAgICAgICBibG9jayA9IHtcbiAgICAgICAgICAgICAgICAgIGNsb25lOiBjbG9uZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsICRlbGVtZW50LnBhcmVudCgpLCAkZWxlbWVudCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNFbGVtZW50cykge1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGlsZFNjb3BlKSB7XG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmxvY2spIHtcbiAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50cyA9IGdldEJsb2NrTm9kZXMoYmxvY2suY2xvbmUpO1xuICAgICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShwcmV2aW91c0VsZW1lbnRzKS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9PSBmYWxzZSkgcHJldmlvdXNFbGVtZW50cyA9IG51bGw7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBibG9jayA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0luY2x1ZGVcbiAqIEByZXN0cmljdCBFQ0FcbiAqIEBzY29wZVxuICogQHByaW9yaXR5IC00MDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZldGNoZXMsIGNvbXBpbGVzIGFuZCBpbmNsdWRlcyBhbiBleHRlcm5hbCBIVE1MIGZyYWdtZW50LlxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSB0ZW1wbGF0ZSBVUkwgaXMgcmVzdHJpY3RlZCB0byB0aGUgc2FtZSBkb21haW4gYW5kIHByb3RvY29sIGFzIHRoZVxuICogYXBwbGljYXRpb24gZG9jdW1lbnQuIFRoaXMgaXMgZG9uZSBieSBjYWxsaW5nIHtAbGluayAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxuICogJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9IG9uIGl0LiBUbyBsb2FkIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgcHJvdG9jb2xzXG4gKiB5b3UgbWF5IGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0IHRoZW19IG9yXG4gKiB7QGxpbmsgJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmwgd3JhcCB0aGVtfSBhcyB0cnVzdGVkIHZhbHVlcy4gUmVmZXIgdG8gQW5ndWxhckpTJ3Mge0BsaW5rXG4gKiBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nfS5cbiAqXG4gKiBJbiBhZGRpdGlvbiwgdGhlIGJyb3dzZXInc1xuICogW1NhbWUgT3JpZ2luIFBvbGljeV0oaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9icm93c2Vyc2VjL3dpa2kvUGFydDIjU2FtZS1vcmlnaW5fcG9saWN5X2Zvcl9YTUxIdHRwUmVxdWVzdClcbiAqIGFuZCBbQ3Jvc3MtT3JpZ2luIFJlc291cmNlIFNoYXJpbmcgKENPUlMpXShodHRwOi8vd3d3LnczLm9yZy9UUi9jb3JzLylcbiAqIHBvbGljeSBtYXkgZnVydGhlciByZXN0cmljdCB3aGV0aGVyIHRoZSB0ZW1wbGF0ZSBpcyBzdWNjZXNzZnVsbHkgbG9hZGVkLlxuICogRm9yIGV4YW1wbGUsIGBuZ0luY2x1ZGVgIHdvbid0IHdvcmsgZm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cyBvbiBhbGwgYnJvd3NlcnMgYW5kIGZvciBgZmlsZTovL2BcbiAqIGFjY2VzcyBvbiBzb21lIGJyb3dzZXJzLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2VudGVyIGVudGVyfSAgfCB3aGVuIHRoZSBleHByZXNzaW9uIGNoYW5nZXMsIG9uIHRoZSBuZXcgaW5jbHVkZSB8XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNsZWF2ZSBsZWF2ZX0gIHwgd2hlbiB0aGUgZXhwcmVzc2lvbiBjaGFuZ2VzLCBvbiB0aGUgb2xkIGluY2x1ZGUgfFxuICpcbiAqIFRoZSBlbnRlciBhbmQgbGVhdmUgYW5pbWF0aW9uIG9jY3VyIGNvbmN1cnJlbnRseS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdJbmNsdWRlfHNyYyBBbmd1bGFySlMgZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIFVSTC4gSWYgdGhlIHNvdXJjZSBpcyBhIHN0cmluZyBjb25zdGFudCxcbiAqICAgICAgICAgICAgICAgICBtYWtlIHN1cmUgeW91IHdyYXAgaXQgaW4gKipzaW5nbGUqKiBxdW90ZXMsIGUuZy4gYHNyYz1cIidteVBhcnRpYWxUZW1wbGF0ZS5odG1sJ1wiYC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb25sb2FkIEV4cHJlc3Npb24gdG8gZXZhbHVhdGUgd2hlbiBhIG5ldyBwYXJ0aWFsIGlzIGxvYWRlZC5cbiAqICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgICAgICAgICAgICAgICAgKipOb3RlOioqIFdoZW4gdXNpbmcgb25sb2FkIG9uIFNWRyBlbGVtZW50cyBpbiBJRTExLCB0aGUgYnJvd3NlciB3aWxsIHRyeSB0byBjYWxsXG4gKiAgICAgICAgICAgICAgICAgIGEgZnVuY3Rpb24gd2l0aCB0aGUgbmFtZSBvbiB0aGUgd2luZG93IGVsZW1lbnQsIHdoaWNoIHdpbGwgdXN1YWxseSB0aHJvdyBhXG4gKiAgICAgICAgICAgICAgICAgIFwiZnVuY3Rpb24gaXMgdW5kZWZpbmVkXCIgZXJyb3IuIFRvIGZpeCB0aGlzLCB5b3UgY2FuIGluc3RlYWQgdXNlIGBkYXRhLW9ubG9hZGAgb3IgYVxuICogICAgICAgICAgICAgICAgICBkaWZmZXJlbnQgZm9ybSB0aGF0IHtAbGluayBndWlkZS9kaXJlY3RpdmUjbm9ybWFsaXphdGlvbiBtYXRjaGVzfSBgb25sb2FkYC5cbiAqICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAqXG4gKiBAcGFyYW0ge3N0cmluZz19IGF1dG9zY3JvbGwgV2hldGhlciBgbmdJbmNsdWRlYCBzaG91bGQgY2FsbCB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbFxuICogICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsfSB0byBzY3JvbGwgdGhlIHZpZXdwb3J0IGFmdGVyIHRoZSBjb250ZW50IGlzIGxvYWRlZC5cbiAqXG4gKiAgICAgICAgICAgICAgICAgIC0gSWYgdGhlIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LCBkaXNhYmxlIHNjcm9sbGluZy5cbiAqICAgICAgICAgICAgICAgICAgLSBJZiB0aGUgYXR0cmlidXRlIGlzIHNldCB3aXRob3V0IHZhbHVlLCBlbmFibGUgc2Nyb2xsaW5nLlxuICogICAgICAgICAgICAgICAgICAtIE90aGVyd2lzZSBlbmFibGUgc2Nyb2xsaW5nIG9ubHkgaWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydXRoeSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICA8ZXhhbXBsZSBtb2R1bGU9XCJpbmNsdWRlRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1pbmNsdWRlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwidGVtcGxhdGVcIiBuZy1vcHRpb25zPVwidC5uYW1lIGZvciB0IGluIHRlbXBsYXRlc1wiPlxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+KGJsYW5rKTwvb3B0aW9uPlxuICAgICAgIDwvc2VsZWN0PlxuICAgICAgIHVybCBvZiB0aGUgdGVtcGxhdGU6IDxjb2RlPnt7dGVtcGxhdGUudXJsfX08L2NvZGU+XG4gICAgICAgPGhyLz5cbiAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRlXCIgbmctaW5jbHVkZT1cInRlbXBsYXRlLnVybFwiPjwvZGl2PlxuICAgICAgIDwvZGl2PlxuICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2luY2x1ZGVFeGFtcGxlJywgWyduZ0FuaW1hdGUnXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGVzID1cbiAgICAgICAgICAgIFt7IG5hbWU6ICd0ZW1wbGF0ZTEuaHRtbCcsIHVybDogJ3RlbXBsYXRlMS5odG1sJ30sXG4gICAgICAgICAgICAgeyBuYW1lOiAndGVtcGxhdGUyLmh0bWwnLCB1cmw6ICd0ZW1wbGF0ZTIuaHRtbCd9XTtcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGUgPSAkc2NvcGUudGVtcGxhdGVzWzBdO1xuICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUxLmh0bWxcIj5cbiAgICAgIENvbnRlbnQgb2YgdGVtcGxhdGUxLmh0bWxcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInRlbXBsYXRlMi5odG1sXCI+XG4gICAgICBDb250ZW50IG9mIHRlbXBsYXRlMi5odG1sXG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLnNsaWRlLWFuaW1hdGUtY29udGFpbmVyIHtcbiAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGhlaWdodDo0MHB4O1xuICAgICAgICBvdmVyZmxvdzpoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlIHtcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlciwgLnNsaWRlLWFuaW1hdGUubmctbGVhdmUge1xuICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XG5cbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIHRvcDowO1xuICAgICAgICBsZWZ0OjA7XG4gICAgICAgIHJpZ2h0OjA7XG4gICAgICAgIGJvdHRvbTowO1xuICAgICAgICBkaXNwbGF5OmJsb2NrO1xuICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWVudGVyIHtcbiAgICAgICAgdG9wOi01MHB4O1xuICAgICAgfVxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWxlYXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xuICAgICAgICB0b3A6NTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIHRlbXBsYXRlU2VsZWN0ID0gZWxlbWVudChieS5tb2RlbCgndGVtcGxhdGUnKSk7XG4gICAgICB2YXIgaW5jbHVkZUVsZW0gPSBlbGVtZW50KGJ5LmNzcygnW25nLWluY2x1ZGVdJykpO1xuXG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUxLmh0bWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KGluY2x1ZGVFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0ZW1wbGF0ZTEuaHRtbC8pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZTIuaHRtbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgICAgLy8gRmlyZWZveCBjYW4ndCBoYW5kbGUgdXNpbmcgc2VsZWN0c1xuICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODBcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IG9mIHRlbXBsYXRlMi5odG1sLyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgdG8gYmxhbmsnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT09ICdmaXJlZm94Jykge1xuICAgICAgICAgIC8vIEZpcmVmb3ggY2FuJ3QgaGFuZGxlIHVzaW5nIHNlbGVjdHNcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgwKS5jbGljaygpO1xuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uaXNQcmVzZW50KCkpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBldmVudFxuICogQG5hbWUgbmdJbmNsdWRlIyRpbmNsdWRlQ29udGVudFJlcXVlc3RlZFxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBzY29wZSBuZ0luY2x1ZGUgd2FzIGRlY2xhcmVkIGluXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgZXZlcnkgdGltZSB0aGUgbmdJbmNsdWRlIGNvbnRlbnQgaXMgcmVxdWVzdGVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgVVJMIG9mIGNvbnRlbnQgdG8gbG9hZC5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGV2ZW50XG4gKiBAbmFtZSBuZ0luY2x1ZGUjJGluY2x1ZGVDb250ZW50TG9hZGVkXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIGN1cnJlbnQgbmdJbmNsdWRlIHNjb3BlXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgZXZlcnkgdGltZSB0aGUgbmdJbmNsdWRlIGNvbnRlbnQgaXMgcmVsb2FkZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZXZlbnRcbiAqIEBuYW1lIG5nSW5jbHVkZSMkaW5jbHVkZUNvbnRlbnRFcnJvclxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBzY29wZSBuZ0luY2x1ZGUgd2FzIGRlY2xhcmVkIGluXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgd2hlbiBhIHRlbXBsYXRlIEhUVFAgcmVxdWVzdCB5aWVsZHMgYW4gZXJyb25lb3VzIHJlc3BvbnNlIChzdGF0dXMgPCAyMDAgfHwgc3RhdHVzID4gMjk5KVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgVVJMIG9mIGNvbnRlbnQgdG8gbG9hZC5cbiAqL1xudmFyIG5nSW5jbHVkZURpcmVjdGl2ZSA9IFsnJHRlbXBsYXRlUmVxdWVzdCcsICckYW5jaG9yU2Nyb2xsJywgJyRhbmltYXRlJyxcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCR0ZW1wbGF0ZVJlcXVlc3QsICAgJGFuY2hvclNjcm9sbCwgICAkYW5pbWF0ZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICBwcmlvcml0eTogNDAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBjb250cm9sbGVyOiBhbmd1bGFyLm5vb3AsXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIHNyY0V4cCA9IGF0dHIubmdJbmNsdWRlIHx8IGF0dHIuc3JjLFxuICAgICAgICAgIG9ubG9hZEV4cCA9IGF0dHIub25sb2FkIHx8ICcnLFxuICAgICAgICAgIGF1dG9TY3JvbGxFeHAgPSBhdHRyLmF1dG9zY3JvbGw7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuICAgICAgICB2YXIgY2hhbmdlQ291bnRlciA9IDAsXG4gICAgICAgICAgICBjdXJyZW50U2NvcGUsXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQsXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudDtcblxuICAgICAgICB2YXIgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCkuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlKSBwcmV2aW91c0VsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBjdXJyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoKHNyY0V4cCwgZnVuY3Rpb24gbmdJbmNsdWRlV2F0Y2hBY3Rpb24oc3JjKSB7XG4gICAgICAgICAgdmFyIGFmdGVyQW5pbWF0aW9uID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPT0gZmFsc2UgJiYgaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApICYmXG4gICAgICAgICAgICAgICghYXV0b1Njcm9sbEV4cCB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkpIHtcbiAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB2YXIgdGhpc0NoYW5nZUlkID0gKytjaGFuZ2VDb3VudGVyO1xuXG4gICAgICAgICAgaWYgKHNyYykge1xuICAgICAgICAgICAgLy9zZXQgdGhlIDJuZCBwYXJhbSB0byB0cnVlIHRvIGlnbm9yZSB0aGUgdGVtcGxhdGUgcmVxdWVzdCBlcnJvciBzbyB0aGF0IHRoZSBpbm5lclxuICAgICAgICAgICAgLy9jb250ZW50cyBhbmQgc2NvcGUgY2FuIGJlIGNsZWFuZWQgdXAuXG4gICAgICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0KHNyYywgdHJ1ZSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBpZiAoc2NvcGUuJCRkZXN0cm95ZWQpIHJldHVybjtcblxuICAgICAgICAgICAgICBpZiAodGhpc0NoYW5nZUlkICE9PSBjaGFuZ2VDb3VudGVyKSByZXR1cm47XG4gICAgICAgICAgICAgIHZhciBuZXdTY29wZSA9IHNjb3BlLiRuZXcoKTtcbiAgICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IHJlc3BvbnNlO1xuXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFRoaXMgd2lsbCBhbHNvIGxpbmsgYWxsIGNoaWxkcmVuIG9mIG5nLWluY2x1ZGUgdGhhdCB3ZXJlIGNvbnRhaW5lZCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgICAgLy8gaHRtbC4gSWYgdGhhdCBjb250ZW50IGNvbnRhaW5zIGNvbnRyb2xsZXJzLCAuLi4gdGhleSBjb3VsZCBwb2xsdXRlL2NoYW5nZSB0aGUgc2NvcGUuXG4gICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHVzaW5nIG5nLWluY2x1ZGUgb24gYW4gZWxlbWVudCB3aXRoIGFkZGl0aW9uYWwgY29udGVudCBkb2VzIG5vdCBtYWtlIHNlbnNlLi4uXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbid0IHJlbW92ZSB0aGVtIGluIHRoZSBjbG9uZUF0dGNoRm4gb2YgJHRyYW5zY2x1ZGUgYXMgdGhhdFxuICAgICAgICAgICAgICAvLyBmdW5jdGlvbiBpcyBjYWxsZWQgYmVmb3JlIGxpbmtpbmcgdGhlIGNvbnRlbnQsIHdoaWNoIHdvdWxkIGFwcGx5IGNoaWxkXG4gICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZXMgdG8gbm9uIGV4aXN0aW5nIGVsZW1lbnRzLlxuICAgICAgICAgICAgICB2YXIgY2xvbmUgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsICRlbGVtZW50KS5kb25lKGFmdGVyQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbmV3U2NvcGU7XG4gICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY2xvbmU7XG5cbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRMb2FkZWQnLCBzcmMpO1xuICAgICAgICAgICAgICBzY29wZS4kZXZhbChvbmxvYWRFeHApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzQ2hhbmdlSWQgPT09IGNoYW5nZUNvdW50ZXIpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudEVycm9yJywgc3JjKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkJywgc3JjKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO1xuICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbi8vIFRoaXMgZGlyZWN0aXZlIGlzIGNhbGxlZCBkdXJpbmcgdGhlICR0cmFuc2NsdWRlIGNhbGwgb2YgdGhlIGZpcnN0IGBuZ0luY2x1ZGVgIGRpcmVjdGl2ZS5cbi8vIEl0IHdpbGwgcmVwbGFjZSBhbmQgY29tcGlsZSB0aGUgY29udGVudCBvZiB0aGUgZWxlbWVudCB3aXRoIHRoZSBsb2FkZWQgdGVtcGxhdGUuXG4vLyBXZSBuZWVkIHRoaXMgZGlyZWN0aXZlIHNvIHRoYXQgdGhlIGVsZW1lbnQgY29udGVudCBpcyBhbHJlYWR5IGZpbGxlZCB3aGVuXG4vLyB0aGUgbGluayBmdW5jdGlvbiBvZiBhbm90aGVyIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50IGFzIG5nSW5jbHVkZVxuLy8gaXMgY2FsbGVkLlxudmFyIG5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlID0gWyckY29tcGlsZScsXG4gIGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICAgIHByaW9yaXR5OiAtNDAwLFxuICAgICAgcmVxdWlyZTogJ25nSW5jbHVkZScsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsKSB7XG4gICAgICAgIGlmICh0b1N0cmluZy5jYWxsKCRlbGVtZW50WzBdKS5tYXRjaCgvU1ZHLykpIHtcbiAgICAgICAgICAvLyBXZWJLaXQ6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzU2OTggLS0tIFNWRyBlbGVtZW50cyBkbyBub3RcbiAgICAgICAgICAvLyBzdXBwb3J0IGlubmVySFRNTCwgc28gZGV0ZWN0IHRoaXMgaGVyZSBhbmQgdHJ5IHRvIGdlbmVyYXRlIHRoZSBjb250ZW50c1xuICAgICAgICAgIC8vIHNwZWNpYWxseS5cbiAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpO1xuICAgICAgICAgICRjb21waWxlKGpxTGl0ZUJ1aWxkRnJhZ21lbnQoY3RybC50ZW1wbGF0ZSwgd2luZG93LmRvY3VtZW50KS5jaGlsZE5vZGVzKShzY29wZSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gbmFtZXNwYWNlQWRhcHRlZENsb25lKGNsb25lKSB7XG4gICAgICAgICAgICAkZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xuICAgICAgICAgIH0sIHtmdXR1cmVQYXJlbnRFbGVtZW50OiAkZWxlbWVudH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRlbGVtZW50Lmh0bWwoY3RybC50ZW1wbGF0ZSk7XG4gICAgICAgICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0luaXRcbiAqIEByZXN0cmljdCBBQ1xuICogQHByaW9yaXR5IDQ1MFxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0luaXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdJbml0YCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBldmFsdWF0ZSBhbiBleHByZXNzaW9uIGluIHRoZVxuICogY3VycmVudCBzY29wZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYWJ1c2VkIHRvIGFkZCB1bm5lY2Vzc2FyeSBhbW91bnRzIG9mIGxvZ2ljIGludG8geW91ciB0ZW1wbGF0ZXMuXG4gKiBUaGVyZSBhcmUgb25seSBhIGZldyBhcHByb3ByaWF0ZSB1c2VzIG9mIGBuZ0luaXRgOlxuICogPHVsPlxuICogICA8bGk+YWxpYXNpbmcgc3BlY2lhbCBwcm9wZXJ0aWVzIG9mIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgYG5nUmVwZWF0YH0sXG4gKiAgICAgYXMgc2VlbiBpbiB0aGUgZGVtbyBiZWxvdy48L2xpPlxuICogICA8bGk+aW5pdGlhbGl6aW5nIGRhdGEgZHVyaW5nIGRldmVsb3BtZW50LCBvciBmb3IgZXhhbXBsZXMsIGFzIHNlZW4gdGhyb3VnaG91dCB0aGVzZSBkb2NzLjwvbGk+XG4gKiAgIDxsaT5pbmplY3RpbmcgZGF0YSB2aWEgc2VydmVyIHNpZGUgc2NyaXB0aW5nLjwvbGk+XG4gKiA8L3VsPlxuICpcbiAqIEJlc2lkZXMgdGhlc2UgZmV3IGNhc2VzLCB5b3Ugc2hvdWxkIHVzZSB7QGxpbmsgZ3VpZGUvY29tcG9uZW50IENvbXBvbmVudHN9IG9yXG4gKiB7QGxpbmsgZ3VpZGUvY29udHJvbGxlciBDb250cm9sbGVyc30gcmF0aGVyIHRoYW4gYG5nSW5pdGAgdG8gaW5pdGlhbGl6ZSB2YWx1ZXMgb24gYSBzY29wZS5cbiAqIDwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGUqKjogSWYgeW91IGhhdmUgYXNzaWdubWVudCBpbiBgbmdJbml0YCBhbG9uZyB3aXRoIGEge0BsaW5rIG5nLiRmaWx0ZXIgYGZpbHRlcmB9LCBtYWtlXG4gKiBzdXJlIHlvdSBoYXZlIHBhcmVudGhlc2VzIHRvIGVuc3VyZSBjb3JyZWN0IG9wZXJhdG9yIHByZWNlZGVuY2U6XG4gKiA8cHJlIGNsYXNzPVwicHJldHR5cHJpbnRcIj5cbiAqIGA8ZGl2IG5nLWluaXQ9XCJ0ZXN0MSA9ICgkaW5kZXggfCB0b1N0cmluZylcIj48L2Rpdj5gXG4gKiA8L3ByZT5cbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJpbml0RXhhbXBsZVwiIG5hbWU9XCJuZy1pbml0XCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICA8c2NyaXB0PlxuICAgICBhbmd1bGFyLm1vZHVsZSgnaW5pdEV4YW1wbGUnLCBbXSlcbiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgJHNjb3BlLmxpc3QgPSBbWydhJywgJ2InXSwgWydjJywgJ2QnXV07XG4gICAgICAgfV0pO1xuICAgPC9zY3JpcHQ+XG4gICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICA8ZGl2IG5nLXJlcGVhdD1cImlubmVyTGlzdCBpbiBsaXN0XCIgbmctaW5pdD1cIm91dGVySW5kZXggPSAkaW5kZXhcIj5cbiAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInZhbHVlIGluIGlubmVyTGlzdFwiIG5nLWluaXQ9XCJpbm5lckluZGV4ID0gJGluZGV4XCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJleGFtcGxlLWluaXRcIj5saXN0WyB7e291dGVySW5kZXh9fSBdWyB7e2lubmVySW5kZXh9fSBdID0ge3t2YWx1ZX19Ozwvc3Bhbj5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBhbGlhcyBpbmRleCBwb3NpdGlvbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBlbGVtZW50cyA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnLmV4YW1wbGUtaW5pdCcpKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMCkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAwIF1bIDAgXSA9IGE7Jyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMCBdWyAxIF0gPSBiOycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnRzLmdldCgyKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3RbIDEgXVsgMCBdID0gYzsnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMykuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAxIF1bIDEgXSA9IGQ7Jyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nSW5pdERpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcbiAgcHJpb3JpdHk6IDQ1MCxcbiAgY29tcGlsZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByZTogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIHNjb3BlLiRldmFsKGF0dHJzLm5nSW5pdCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdMaXN0XG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdMaXN0IG9wdGlvbmFsIGRlbGltaXRlciB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHNwbGl0IHRoZSB2YWx1ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRleHQgaW5wdXQgdGhhdCBjb252ZXJ0cyBiZXR3ZWVuIGEgZGVsaW1pdGVkIHN0cmluZyBhbmQgYW4gYXJyYXkgb2Ygc3RyaW5ncy4gVGhlIGRlZmF1bHRcbiAqIGRlbGltaXRlciBpcyBhIGNvbW1hIGZvbGxvd2VkIGJ5IGEgc3BhY2UgLSBlcXVpdmFsZW50IHRvIGBuZy1saXN0PVwiLCBcImAuIFlvdSBjYW4gc3BlY2lmeSBhIGN1c3RvbVxuICogZGVsaW1pdGVyIGFzIHRoZSB2YWx1ZSBvZiB0aGUgYG5nTGlzdGAgYXR0cmlidXRlIC0gZm9yIGV4YW1wbGUsIGBuZy1saXN0PVwiIHwgXCJgLlxuICpcbiAqIFRoZSBiZWhhdmlvdXIgb2YgdGhlIGRpcmVjdGl2ZSBpcyBhZmZlY3RlZCBieSB0aGUgdXNlIG9mIHRoZSBgbmdUcmltYCBhdHRyaWJ1dGUuXG4gKiAqIElmIGBuZ1RyaW1gIGlzIHNldCB0byBgXCJmYWxzZVwiYCB0aGVuIHdoaXRlc3BhY2UgYXJvdW5kIGJvdGggdGhlIHNlcGFyYXRvciBhbmQgZWFjaFxuICogICBsaXN0IGl0ZW0gaXMgcmVzcGVjdGVkLiBUaGlzIGltcGxpZXMgdGhhdCB0aGUgdXNlciBvZiB0aGUgZGlyZWN0aXZlIGlzIHJlc3BvbnNpYmxlIGZvclxuICogICBkZWFsaW5nIHdpdGggd2hpdGVzcGFjZSBidXQgYWxzbyBhbGxvd3MgeW91IHRvIHVzZSB3aGl0ZXNwYWNlIGFzIGEgZGVsaW1pdGVyLCBzdWNoIGFzIGFcbiAqICAgdGFiIG9yIG5ld2xpbmUgY2hhcmFjdGVyLlxuICogKiBPdGhlcndpc2Ugd2hpdGVzcGFjZSBhcm91bmQgdGhlIGRlbGltaXRlciBpcyBpZ25vcmVkIHdoZW4gc3BsaXR0aW5nIChhbHRob3VnaCBpdCBpcyByZXNwZWN0ZWRcbiAqICAgd2hlbiBqb2luaW5nIHRoZSBsaXN0IGl0ZW1zIGJhY2sgdG9nZXRoZXIpIGFuZCB3aGl0ZXNwYWNlIGFyb3VuZCBlYWNoIGxpc3QgaXRlbSBpcyBzdHJpcHBlZFxuICogICBiZWZvcmUgaXQgaXMgYWRkZWQgdG8gdGhlIG1vZGVsLlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgVmFsaWRhdGlvblxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0xpc3QtZGlyZWN0aXZlXCIgbW9kdWxlPVwibGlzdEV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgICBhbmd1bGFyLm1vZHVsZSgnbGlzdEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydtb3JwaGV1cycsICduZW8nLCAndHJpbml0eSddO1xuICogICAgICAgIH1dKTtcbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICA8bGFiZWw+TGlzdDogPGlucHV0IG5hbWU9XCJuYW1lc0lucHV0XCIgbmctbW9kZWw9XCJuYW1lc1wiIG5nLWxpc3QgcmVxdWlyZWQ+PC9sYWJlbD5cbiAqICAgICAgPHNwYW4gcm9sZT1cImFsZXJ0XCI+XG4gKiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAqICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gKiAgICAgIDwvc3Bhbj5cbiAqICAgICAgPGJyPlxuICogICAgICA8dHQ+bmFtZXMgPSB7e25hbWVzfX08L3R0Pjxici8+XG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICogICAgICA8dHQ+bXlGb3JtLm5hbWVzSW5wdXQuJGVycm9yID0ge3tteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICogICAgIDwvZm9ybT5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgdmFyIGxpc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ25hbWVzJykpO1xuICogICAgIHZhciBuYW1lcyA9IGVsZW1lbnQoYnkuZXhhY3RCaW5kaW5nKCduYW1lcycpKTtcbiAqICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZCcpKTtcbiAqICAgICB2YXIgZXJyb3IgPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5lcnJvcicpKTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QobmFtZXMuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1tcIm1vcnBoZXVzXCIsXCJuZW9cIixcInRyaW5pdHlcIl0nKTtcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICogICAgICAgZXhwZWN0KGVycm9yLmdldENzc1ZhbHVlKCdkaXNwbGF5JykpLnRvQmUoJ25vbmUnKTtcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBsaXN0SW5wdXQuY2xlYXIoKTtcbiAqICAgICAgIGxpc3RJbnB1dC5zZW5kS2V5cygnJyk7XG4gKlxuICogICAgICAgZXhwZWN0KG5hbWVzLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAqICAgICAgIGV4cGVjdChlcnJvci5nZXRDc3NWYWx1ZSgnZGlzcGxheScpKS5ub3QudG9CZSgnbm9uZScpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTcGxpdHRpbmcgb24gbmV3bGluZVxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0xpc3QtZGlyZWN0aXZlLW5ld2xpbmVzXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJsaXN0XCIgbmctbGlzdD1cIiYjMTA7XCIgbmctdHJpbT1cImZhbHNlXCI+PC90ZXh0YXJlYT5cbiAqICAgIDxwcmU+e3sgbGlzdCB8IGpzb24gfX08L3ByZT5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgaXQoXCJzaG91bGQgc3BsaXQgdGhlIHRleHQgYnkgbmV3bGluZXNcIiwgZnVuY3Rpb24oKSB7XG4gKiAgICAgICB2YXIgbGlzdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbGlzdCcpKTtcbiAqICAgICAgIHZhciBvdXRwdXQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QgfCBqc29uJykpO1xuICogICAgICAgbGlzdElucHV0LnNlbmRLZXlzKCdhYmNcXG5kZWZcXG5naGknKTtcbiAqICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1tcXG4gIFwiYWJjXCIsXFxuICBcImRlZlwiLFxcbiAgXCJnaGlcIlxcbl0nKTtcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqL1xudmFyIG5nTGlzdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcHJpb3JpdHk6IDEwMCxcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgICAgIHZhciBuZ0xpc3QgPSBhdHRyLm5nTGlzdCB8fCAnLCAnO1xuICAgICAgdmFyIHRyaW1WYWx1ZXMgPSBhdHRyLm5nVHJpbSAhPT0gJ2ZhbHNlJztcbiAgICAgIHZhciBzZXBhcmF0b3IgPSB0cmltVmFsdWVzID8gdHJpbShuZ0xpc3QpIDogbmdMaXN0O1xuXG4gICAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHZpZXdWYWx1ZSBpcyBpbnZhbGlkIChzYXkgcmVxdWlyZWQgYnV0IGVtcHR5KSBpdCB3aWxsIGJlIGB1bmRlZmluZWRgXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh2aWV3VmFsdWUpKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcblxuICAgICAgICBpZiAodmlld1ZhbHVlKSB7XG4gICAgICAgICAgZm9yRWFjaCh2aWV3VmFsdWUuc3BsaXQoc2VwYXJhdG9yKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbGlzdC5wdXNoKHRyaW1WYWx1ZXMgPyB0cmltKHZhbHVlKSA6IHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgfTtcblxuICAgICAgY3RybC4kcGFyc2Vycy5wdXNoKHBhcnNlKTtcbiAgICAgIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuam9pbihuZ0xpc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgJGlzRW1wdHkgYmVjYXVzZSBhbiBlbXB0eSBhcnJheSBtZWFucyB0aGUgaW5wdXQgaXMgZW1wdHkuXG4gICAgICBjdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCAhdmFsdWUubGVuZ3RoO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgVkFMSURfQ0xBU1M6IHRydWUsXG4gIElOVkFMSURfQ0xBU1M6IHRydWUsXG4gIFBSSVNUSU5FX0NMQVNTOiB0cnVlLFxuICBESVJUWV9DTEFTUzogdHJ1ZSxcbiAgVU5UT1VDSEVEX0NMQVNTOiB0cnVlLFxuICBUT1VDSEVEX0NMQVNTOiB0cnVlLFxuICBQRU5ESU5HX0NMQVNTOiB0cnVlLFxuICBhZGRTZXRWYWxpZGl0eU1ldGhvZDogdHJ1ZSxcbiAgc2V0dXBWYWxpZGl0eTogdHJ1ZSxcbiAgZGVmYXVsdE1vZGVsT3B0aW9uczogZmFsc2VcbiovXG5cblxudmFyIFZBTElEX0NMQVNTID0gJ25nLXZhbGlkJyxcbiAgICBJTlZBTElEX0NMQVNTID0gJ25nLWludmFsaWQnLFxuICAgIFBSSVNUSU5FX0NMQVNTID0gJ25nLXByaXN0aW5lJyxcbiAgICBESVJUWV9DTEFTUyA9ICduZy1kaXJ0eScsXG4gICAgVU5UT1VDSEVEX0NMQVNTID0gJ25nLXVudG91Y2hlZCcsXG4gICAgVE9VQ0hFRF9DTEFTUyA9ICduZy10b3VjaGVkJyxcbiAgICBFTVBUWV9DTEFTUyA9ICduZy1lbXB0eScsXG4gICAgTk9UX0VNUFRZX0NMQVNTID0gJ25nLW5vdC1lbXB0eSc7XG5cbnZhciBuZ01vZGVsTWluRXJyID0gbWluRXJyKCduZ01vZGVsJyk7XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJcbiAqIEBwcm9wZXJ0eSB7Kn0gJHZpZXdWYWx1ZSBUaGUgYWN0dWFsIHZhbHVlIGZyb20gdGhlIGNvbnRyb2wncyB2aWV3LiBGb3IgYGlucHV0YCBlbGVtZW50cywgdGhpcyBpcyBhXG4gKiBTdHJpbmcuIFNlZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0Vmlld1ZhbHVlfSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgd2hlbiB0aGUgJHZpZXdWYWx1ZVxuICogaXMgc2V0LlxuICpcbiAqIEBwcm9wZXJ0eSB7Kn0gJG1vZGVsVmFsdWUgVGhlIHZhbHVlIGluIHRoZSBtb2RlbCB0aGF0IHRoZSBjb250cm9sIGlzIGJvdW5kIHRvLlxuICpcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJHBhcnNlcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUsIGFzIGEgcGlwZWxpbmUsIHdoZW5ldmVyXG4gKiAgdGhlIGNvbnRyb2wgdXBkYXRlcyB0aGUgbmdNb2RlbENvbnRyb2xsZXIgd2l0aCBhIG5ldyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlXG4gICAgYCR2aWV3VmFsdWVgfSBmcm9tIHRoZSBET00sIHVzdWFsbHkgdmlhIHVzZXIgaW5wdXQuXG4gICAgU2VlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWaWV3VmFsdWUgYCRzZXRWaWV3VmFsdWUoKWB9IGZvciBhIGRldGFpbGVkIGxpZmVjeWNsZSBleHBsYW5hdGlvbi5cbiAgICBOb3RlIHRoYXQgdGhlIGAkcGFyc2Vyc2AgYXJlIG5vdCBjYWxsZWQgd2hlbiB0aGUgYm91bmQgbmdNb2RlbCBleHByZXNzaW9uIGNoYW5nZXMgcHJvZ3JhbW1hdGljYWxseS5cblxuICBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gYXJyYXkgb3JkZXIsIGVhY2ggcGFzc2luZ1xuICAgIGl0cyByZXR1cm4gdmFsdWUgdGhyb3VnaCB0byB0aGUgbmV4dC4gVGhlIGxhc3QgcmV0dXJuIHZhbHVlIGlzIGZvcndhcmRlZCB0byB0aGVcbiAgICB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgJHZhbGlkYXRvcnNgfSBjb2xsZWN0aW9uLlxuXG4gIFBhcnNlcnMgYXJlIHVzZWQgdG8gc2FuaXRpemUgLyBjb252ZXJ0IHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlXG4gICAgYCR2aWV3VmFsdWVgfS5cblxuICBSZXR1cm5pbmcgYHVuZGVmaW5lZGAgZnJvbSBhIHBhcnNlciBtZWFucyBhIHBhcnNlIGVycm9yIG9jY3VycmVkLiBJbiB0aGF0IGNhc2UsXG4gICAgbm8ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYCR2YWxpZGF0b3JzYH0gd2lsbCBydW4gYW5kIHRoZSBgbmdNb2RlbGBcbiAgICB3aWxsIGJlIHNldCB0byBgdW5kZWZpbmVkYCB1bmxlc3Mge0BsaW5rIG5nTW9kZWxPcHRpb25zIGBuZ01vZGVsT3B0aW9ucy5hbGxvd0ludmFsaWRgfVxuICAgIGlzIHNldCB0byBgdHJ1ZWAuIFRoZSBwYXJzZSBlcnJvciBpcyBzdG9yZWQgaW4gYG5nTW9kZWwuJGVycm9yLnBhcnNlYC5cblxuICBUaGlzIHNpbXBsZSBleGFtcGxlIHNob3dzIGEgcGFyc2VyIHRoYXQgd291bGQgY29udmVydCB0ZXh0IGlucHV0IHZhbHVlIHRvIGxvd2VyY2FzZTpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBwYXJzZSh2YWx1ZSkge1xuICogICBpZiAodmFsdWUpIHtcbiAqICAgICByZXR1cm4gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAqICAgfVxuICogfVxuICogbmdNb2RlbENvbnRyb2xsZXIuJHBhcnNlcnMucHVzaChwYXJzZSk7XG4gKiBgYGBcblxuICpcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJGZvcm1hdHRlcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUsIGFzIGEgcGlwZWxpbmUsIHdoZW5ldmVyXG4gICAgdGhlIGJvdW5kIG5nTW9kZWwgZXhwcmVzc2lvbiBjaGFuZ2VzIHByb2dyYW1tYXRpY2FsbHkuIFRoZSBgJGZvcm1hdHRlcnNgIGFyZSBub3QgY2FsbGVkIHdoZW4gdGhlXG4gICAgdmFsdWUgb2YgdGhlIGNvbnRyb2wgaXMgY2hhbmdlZCBieSB1c2VyIGludGVyYWN0aW9uLlxuXG4gIEZvcm1hdHRlcnMgYXJlIHVzZWQgdG8gZm9ybWF0IC8gY29udmVydCB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJG1vZGVsVmFsdWVcbiAgICBgJG1vZGVsVmFsdWVgfSBmb3IgZGlzcGxheSBpbiB0aGUgY29udHJvbC5cblxuICBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gcmV2ZXJzZSBhcnJheSBvcmRlciwgZWFjaCBwYXNzaW5nIHRoZSB2YWx1ZSB0aHJvdWdoIHRvIHRoZVxuICAgIG5leHQuIFRoZSBsYXN0IHJldHVybiB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBhY3R1YWwgRE9NIHZhbHVlLlxuXG4gIFRoaXMgc2ltcGxlIGV4YW1wbGUgc2hvd3MgYSBmb3JtYXR0ZXIgdGhhdCB3b3VsZCBjb252ZXJ0IHRoZSBtb2RlbCB2YWx1ZSB0byB1cHBlcmNhc2U6XG5cbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBmb3JtYXQodmFsdWUpIHtcbiAqICAgaWYgKHZhbHVlKSB7XG4gKiAgICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gKiAgIH1cbiAqIH1cbiAqIG5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmb3JtYXQpO1xuICogYGBgXG4gKlxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSAkdmFsaWRhdG9ycyBBIGNvbGxlY3Rpb24gb2YgdmFsaWRhdG9ycyB0aGF0IGFyZSBhcHBsaWVkXG4gKiAgICAgIHdoZW5ldmVyIHRoZSBtb2RlbCB2YWx1ZSBjaGFuZ2VzLiBUaGUga2V5IHZhbHVlIHdpdGhpbiB0aGUgb2JqZWN0IHJlZmVycyB0byB0aGUgbmFtZSBvZiB0aGVcbiAqICAgICAgdmFsaWRhdG9yIHdoaWxlIHRoZSBmdW5jdGlvbiByZWZlcnMgdG8gdGhlIHZhbGlkYXRpb24gb3BlcmF0aW9uLiBUaGUgdmFsaWRhdGlvbiBvcGVyYXRpb24gaXNcbiAqICAgICAgcHJvdmlkZWQgd2l0aCB0aGUgbW9kZWwgdmFsdWUgYXMgYW4gYXJndW1lbnQgYW5kIG11c3QgcmV0dXJuIGEgdHJ1ZSBvciBmYWxzZSB2YWx1ZSBkZXBlbmRpbmdcbiAqICAgICAgb24gdGhlIHJlc3BvbnNlIG9mIHRoYXQgdmFsaWRhdGlvbi5cbiAqXG4gKiBgYGBqc1xuICogbmdNb2RlbC4kdmFsaWRhdG9ycy52YWxpZENoYXJhY3RlcnMgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAqICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gKiAgIHJldHVybiAvWzAtOV0rLy50ZXN0KHZhbHVlKSAmJlxuICogICAgICAgICAgL1thLXpdKy8udGVzdCh2YWx1ZSkgJiZcbiAqICAgICAgICAgIC9bQS1aXSsvLnRlc3QodmFsdWUpICYmXG4gKiAgICAgICAgICAvXFxXKy8udGVzdCh2YWx1ZSk7XG4gKiB9O1xuICogYGBgXG4gKlxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSAkYXN5bmNWYWxpZGF0b3JzIEEgY29sbGVjdGlvbiBvZiB2YWxpZGF0aW9ucyB0aGF0IGFyZSBleHBlY3RlZCB0b1xuICogICAgICBwZXJmb3JtIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0aW9uIChlLmcuIGEgSFRUUCByZXF1ZXN0KS4gVGhlIHZhbGlkYXRpb24gZnVuY3Rpb24gdGhhdCBpcyBwcm92aWRlZFxuICogICAgICBpcyBleHBlY3RlZCB0byByZXR1cm4gYSBwcm9taXNlIHdoZW4gaXQgaXMgcnVuIGR1cmluZyB0aGUgbW9kZWwgdmFsaWRhdGlvbiBwcm9jZXNzLiBPbmNlIHRoZSBwcm9taXNlXG4gKiAgICAgIGlzIGRlbGl2ZXJlZCB0aGVuIHRoZSB2YWxpZGF0aW9uIHN0YXR1cyB3aWxsIGJlIHNldCB0byB0cnVlIHdoZW4gZnVsZmlsbGVkIGFuZCBmYWxzZSB3aGVuIHJlamVjdGVkLlxuICogICAgICBXaGVuIHRoZSBhc3luY2hyb25vdXMgdmFsaWRhdG9ycyBhcmUgdHJpZ2dlcmVkLCBlYWNoIG9mIHRoZSB2YWxpZGF0b3JzIHdpbGwgcnVuIGluIHBhcmFsbGVsIGFuZCB0aGUgbW9kZWxcbiAqICAgICAgdmFsdWUgd2lsbCBvbmx5IGJlIHVwZGF0ZWQgb25jZSBhbGwgdmFsaWRhdG9ycyBoYXZlIGJlZW4gZnVsZmlsbGVkLiBBcyBsb25nIGFzIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JcbiAqICAgICAgaXMgdW5mdWxmaWxsZWQsIGl0cyBrZXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgY29udHJvbGxlcnMgYCRwZW5kaW5nYCBwcm9wZXJ0eS4gQWxzbywgYWxsIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JzXG4gKiAgICAgIHdpbGwgb25seSBydW4gb25jZSBhbGwgc3luY2hyb25vdXMgdmFsaWRhdG9ycyBoYXZlIHBhc3NlZC5cbiAqXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IGlmICRodHRwIGlzIHVzZWQgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdGhhdCB0aGUgc2VydmVyIHJldHVybnMgYSBzdWNjZXNzIEhUVFAgcmVzcG9uc2UgY29kZVxuICogaW4gb3JkZXIgdG8gZnVsZmlsbCB0aGUgdmFsaWRhdGlvbiBhbmQgYSBzdGF0dXMgbGV2ZWwgb2YgYDR4eGAgaW4gb3JkZXIgdG8gcmVqZWN0IHRoZSB2YWxpZGF0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnMudW5pcXVlVXNlcm5hbWUgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAqICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gKlxuICogICAvLyBMb29rdXAgdXNlciBieSB1c2VybmFtZVxuICogICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyB2YWx1ZSkuXG4gKiAgICAgIHRoZW4oZnVuY3Rpb24gcmVzb2x2ZWQoKSB7XG4gKiAgICAgICAgLy91c2VybmFtZSBleGlzdHMsIHRoaXMgbWVhbnMgdmFsaWRhdGlvbiBmYWlsc1xuICogICAgICAgIHJldHVybiAkcS5yZWplY3QoJ2V4aXN0cycpO1xuICogICAgICB9LCBmdW5jdGlvbiByZWplY3RlZCgpIHtcbiAqICAgICAgICAvL3VzZXJuYW1lIGRvZXMgbm90IGV4aXN0LCB0aGVyZWZvcmUgdGhpcyB2YWxpZGF0aW9uIHBhc3Nlc1xuICogICAgICAgIHJldHVybiB0cnVlO1xuICogICAgICB9KTtcbiAqIH07XG4gKiBgYGBcbiAqXG4gKiBAcHJvcGVydHkge0FycmF5LjxGdW5jdGlvbj59ICR2aWV3Q2hhbmdlTGlzdGVuZXJzIEFycmF5IG9mIGZ1bmN0aW9ucyB0byBleGVjdXRlIHdoZW5ldmVyXG4gKiAgICAgYSBjaGFuZ2UgdG8ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSBgJHZpZXdWYWx1ZWB9IGhhcyBjYXVzZWQgYSBjaGFuZ2VcbiAqICAgICB0byB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkbW9kZWxWYWx1ZSBgJG1vZGVsVmFsdWVgfS5cbiAqICAgICBJdCBpcyBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIGFuZCBpdHMgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gKiAgICAgVGhpcyBjYW4gYmUgdXNlZCBpbiBwbGFjZSBvZiBhZGRpdGlvbmFsICR3YXRjaGVzIGFnYWluc3QgdGhlIG1vZGVsIHZhbHVlLlxuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkZXJyb3IgQW4gb2JqZWN0IGhhc2ggd2l0aCBhbGwgZmFpbGluZyB2YWxpZGF0b3IgaWRzIGFzIGtleXMuXG4gKiBAcHJvcGVydHkge09iamVjdH0gJHBlbmRpbmcgQW4gb2JqZWN0IGhhc2ggd2l0aCBhbGwgcGVuZGluZyB2YWxpZGF0b3IgaWRzIGFzIGtleXMuXG4gKlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdW50b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbm90IGxvc3QgZm9jdXMgeWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdG91Y2hlZCBUcnVlIGlmIGNvbnRyb2wgaGFzIGxvc3QgZm9jdXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGNvbnRyb2wgeWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgY29udHJvbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHZhbGlkIFRydWUgaWYgdGhlcmUgaXMgbm8gZXJyb3IuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGVycm9yIG9uIHRoZSBjb250cm9sLlxuICogQHByb3BlcnR5IHtzdHJpbmd9ICRuYW1lIFRoZSBuYW1lIGF0dHJpYnV0ZSBvZiB0aGUgY29udHJvbC5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgTmdNb2RlbENvbnRyb2xsZXJgIHByb3ZpZGVzIEFQSSBmb3IgdGhlIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0gZGlyZWN0aXZlLlxuICogVGhlIGNvbnRyb2xsZXIgY29udGFpbnMgc2VydmljZXMgZm9yIGRhdGEtYmluZGluZywgdmFsaWRhdGlvbiwgQ1NTIHVwZGF0ZXMsIGFuZCB2YWx1ZSBmb3JtYXR0aW5nXG4gKiBhbmQgcGFyc2luZy4gSXQgcHVycG9zZWZ1bGx5IGRvZXMgbm90IGNvbnRhaW4gYW55IGxvZ2ljIHdoaWNoIGRlYWxzIHdpdGggRE9NIHJlbmRlcmluZyBvclxuICogbGlzdGVuaW5nIHRvIERPTSBldmVudHMuXG4gKiBTdWNoIERPTSByZWxhdGVkIGxvZ2ljIHNob3VsZCBiZSBwcm92aWRlZCBieSBvdGhlciBkaXJlY3RpdmVzIHdoaWNoIG1ha2UgdXNlIG9mXG4gKiBgTmdNb2RlbENvbnRyb2xsZXJgIGZvciBkYXRhLWJpbmRpbmcgdG8gY29udHJvbCBlbGVtZW50cy5cbiAqIEFuZ3VsYXJKUyBwcm92aWRlcyB0aGlzIERPTSBsb2dpYyBmb3IgbW9zdCB7QGxpbmsgaW5wdXQgYGlucHV0YH0gZWxlbWVudHMuXG4gKiBBdCB0aGUgZW5kIG9mIHRoaXMgcGFnZSB5b3UgY2FuIGZpbmQgYSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciNjdXN0b20tY29udHJvbC1leGFtcGxlXG4gKiBjdXN0b20gY29udHJvbCBleGFtcGxlfSB0aGF0IHVzZXMgYG5nTW9kZWxDb250cm9sbGVyYCB0byBiaW5kIHRvIGBjb250ZW50ZWRpdGFibGVgIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQ3VzdG9tIENvbnRyb2wgRXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYE5nTW9kZWxDb250cm9sbGVyYCB3aXRoIGEgY3VzdG9tIGNvbnRyb2wgdG8gYWNoaWV2ZVxuICogZGF0YS1iaW5kaW5nLiBOb3RpY2UgaG93IGRpZmZlcmVudCBkaXJlY3RpdmVzIChgY29udGVudGVkaXRhYmxlYCwgYG5nLW1vZGVsYCwgYW5kIGByZXF1aXJlZGApXG4gKiBjb2xsYWJvcmF0ZSB0b2dldGhlciB0byBhY2hpZXZlIHRoZSBkZXNpcmVkIHJlc3VsdC5cbiAqXG4gKiBgY29udGVudGVkaXRhYmxlYCBpcyBhbiBIVE1MNSBhdHRyaWJ1dGUsIHdoaWNoIHRlbGxzIHRoZSBicm93c2VyIHRvIGxldCB0aGUgZWxlbWVudFxuICogY29udGVudHMgYmUgZWRpdGVkIGluIHBsYWNlIGJ5IHRoZSB1c2VyLlxuICpcbiAqIFdlIGFyZSB1c2luZyB0aGUge0BsaW5rIG5nLnNlcnZpY2U6JHNjZSAkc2NlfSBzZXJ2aWNlIGhlcmUgYW5kIGluY2x1ZGUgdGhlIHtAbGluayBuZ1Nhbml0aXplICRzYW5pdGl6ZX1cbiAqIG1vZHVsZSB0byBhdXRvbWF0aWNhbGx5IHJlbW92ZSBcImJhZFwiIGNvbnRlbnQgbGlrZSBpbmxpbmUgZXZlbnQgbGlzdGVuZXIgKGUuZy4gYDxzcGFuIG9uY2xpY2s9XCIuLi5cIj5gKS5cbiAqIEhvd2V2ZXIsIGFzIHdlIGFyZSB1c2luZyBgJHNjZWAgdGhlIG1vZGVsIGNhbiBzdGlsbCBkZWNpZGUgdG8gcHJvdmlkZSB1bnNhZmUgY29udGVudCBpZiBpdCBtYXJrc1xuICogdGhhdCBjb250ZW50IHVzaW5nIHRoZSBgJHNjZWAgc2VydmljZS5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwiTmdNb2RlbENvbnRyb2xsZXJcIiBtb2R1bGU9XCJjdXN0b21Db250cm9sXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIj5cbiAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICBbY29udGVudGVkaXRhYmxlXSB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgbWluLWhlaWdodDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLm5nLWludmFsaWQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7XG4gICAgICB9XG5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbUNvbnRyb2wnLCBbJ25nU2FuaXRpemUnXSkuXG4gICAgICAgIGRpcmVjdGl2ZSgnY29udGVudGVkaXRhYmxlJywgWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLCAvLyBvbmx5IGFjdGl2YXRlIG9uIGVsZW1lbnQgYXR0cmlidXRlXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLCAvLyBnZXQgYSBob2xkIG9mIE5nTW9kZWxDb250cm9sbGVyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgICAgaWYgKCFuZ01vZGVsKSByZXR1cm47IC8vIGRvIG5vdGhpbmcgaWYgbm8gbmctbW9kZWxcblxuICAgICAgICAgICAgICAvLyBTcGVjaWZ5IGhvdyBVSSBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwoJHNjZS5nZXRUcnVzdGVkSHRtbChuZ01vZGVsLiR2aWV3VmFsdWUgfHwgJycpKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNoYW5nZSBldmVudHMgdG8gZW5hYmxlIGJpbmRpbmdcbiAgICAgICAgICAgICAgZWxlbWVudC5vbignYmx1ciBrZXl1cCBjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKHJlYWQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmVhZCgpOyAvLyBpbml0aWFsaXplXG5cbiAgICAgICAgICAgICAgLy8gV3JpdGUgZGF0YSB0byB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gcmVhZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGVsZW1lbnQuaHRtbCgpO1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gd2UgY2xlYXIgdGhlIGNvbnRlbnQgZWRpdGFibGUgdGhlIGJyb3dzZXIgbGVhdmVzIGEgPGJyPiBiZWhpbmRcbiAgICAgICAgICAgICAgICAvLyBJZiBzdHJpcC1iciBhdHRyaWJ1dGUgaXMgcHJvdmlkZWQgdGhlbiB3ZSBzdHJpcCB0aGlzIG91dFxuICAgICAgICAgICAgICAgIGlmIChhdHRycy5zdHJpcEJyICYmIGh0bWwgPT09ICc8YnI+Jykge1xuICAgICAgICAgICAgICAgICAgaHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoaHRtbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gICAgICAgPGRpdiBjb250ZW50ZWRpdGFibGVcbiAgICAgICAgICAgIG5hbWU9XCJteVdpZGdldFwiIG5nLW1vZGVsPVwidXNlckNvbnRlbnRcIlxuICAgICAgICAgICAgc3RyaXAtYnI9XCJ0cnVlXCJcbiAgICAgICAgICAgIHJlcXVpcmVkPkNoYW5nZSBtZSE8L2Rpdj5cbiAgICAgICAgPHNwYW4gbmctc2hvdz1cIm15Rm9ybS5teVdpZGdldC4kZXJyb3IucmVxdWlyZWRcIj5SZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgPGhyPlxuICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInVzZXJDb250ZW50XCIgYXJpYS1sYWJlbD1cIkR5bmFtaWMgdGV4dGFyZWFcIj48L3RleHRhcmVhPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgaXQoJ3Nob3VsZCBkYXRhLWJpbmQgYW5kIGJlY29tZSBpbnZhbGlkJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ3NhZmFyaScgfHwgYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgIC8vIFNhZmFyaURyaXZlciBjYW4ndCBoYW5kbGUgY29udGVudGVkaXRhYmxlXG4gICAgICAgIC8vIGFuZCBGaXJlZm94IGRyaXZlciBjYW4ndCBjbGVhciBjb250ZW50ZWRpdGFibGVzIHZlcnkgd2VsbFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgY29udGVudEVkaXRhYmxlID0gZWxlbWVudChieS5jc3MoJ1tjb250ZW50ZWRpdGFibGVdJykpO1xuICAgICAgdmFyIGNvbnRlbnQgPSAnQ2hhbmdlIG1lISc7XG5cbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0VGV4dCgpKS50b0VxdWFsKGNvbnRlbnQpO1xuXG4gICAgICBjb250ZW50RWRpdGFibGUuY2xlYXIoKTtcbiAgICAgIGNvbnRlbnRFZGl0YWJsZS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5CQUNLX1NQQUNFKTtcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0VGV4dCgpKS50b0VxdWFsKCcnKTtcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9uZy1pbnZhbGlkLXJlcXVpcmVkLyk7XG4gICAgfSk7XG4gICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqXG4gKi9cbk5nTW9kZWxDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckYXR0cnMnLCAnJGVsZW1lbnQnLCAnJHBhcnNlJywgJyRhbmltYXRlJywgJyR0aW1lb3V0JywgJyRxJywgJyRpbnRlcnBvbGF0ZSddO1xuZnVuY3Rpb24gTmdNb2RlbENvbnRyb2xsZXIoJHNjb3BlLCAkZXhjZXB0aW9uSGFuZGxlciwgJGF0dHIsICRlbGVtZW50LCAkcGFyc2UsICRhbmltYXRlLCAkdGltZW91dCwgJHEsICRpbnRlcnBvbGF0ZSkge1xuICB0aGlzLiR2aWV3VmFsdWUgPSBOdW1iZXIuTmFOO1xuICB0aGlzLiRtb2RlbFZhbHVlID0gTnVtYmVyLk5hTjtcbiAgdGhpcy4kJHJhd01vZGVsVmFsdWUgPSB1bmRlZmluZWQ7IC8vIHN0b3JlcyB0aGUgcGFyc2VkIG1vZGVsVmFsdWUgLyBtb2RlbCBzZXQgZnJvbSBzY29wZSByZWdhcmRsZXNzIG9mIHZhbGlkaXR5LlxuICB0aGlzLiR2YWxpZGF0b3JzID0ge307XG4gIHRoaXMuJGFzeW5jVmFsaWRhdG9ycyA9IHt9O1xuICB0aGlzLiRwYXJzZXJzID0gW107XG4gIHRoaXMuJGZvcm1hdHRlcnMgPSBbXTtcbiAgdGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycyA9IFtdO1xuICB0aGlzLiR1bnRvdWNoZWQgPSB0cnVlO1xuICB0aGlzLiR0b3VjaGVkID0gZmFsc2U7XG4gIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcbiAgdGhpcy4kZGlydHkgPSBmYWxzZTtcbiAgdGhpcy4kdmFsaWQgPSB0cnVlO1xuICB0aGlzLiRpbnZhbGlkID0gZmFsc2U7XG4gIHRoaXMuJGVycm9yID0ge307IC8vIGtlZXAgaW52YWxpZCBrZXlzIGhlcmVcbiAgdGhpcy4kJHN1Y2Nlc3MgPSB7fTsgLy8ga2VlcCB2YWxpZCBrZXlzIGhlcmVcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDsgLy8ga2VlcCBwZW5kaW5nIGtleXMgaGVyZVxuICB0aGlzLiRuYW1lID0gJGludGVycG9sYXRlKCRhdHRyLm5hbWUgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xuICB0aGlzLiQkcGFyZW50Rm9ybSA9IG51bGxGb3JtQ3RybDtcbiAgdGhpcy4kb3B0aW9ucyA9IGRlZmF1bHRNb2RlbE9wdGlvbnM7XG4gIHRoaXMuJCR1cGRhdGVFdmVudHMgPSAnJztcbiAgLy8gQXR0YWNoIHRoZSBjb3JyZWN0IGNvbnRleHQgdG8gdGhlIGV2ZW50IGhhbmRsZXIgZnVuY3Rpb24gZm9yIHVwZGF0ZU9uXG4gIHRoaXMuJCR1cGRhdGVFdmVudEhhbmRsZXIgPSB0aGlzLiQkdXBkYXRlRXZlbnRIYW5kbGVyLmJpbmQodGhpcyk7XG5cbiAgdGhpcy4kJHBhcnNlZE5nTW9kZWwgPSAkcGFyc2UoJGF0dHIubmdNb2RlbCk7XG4gIHRoaXMuJCRwYXJzZWROZ01vZGVsQXNzaWduID0gdGhpcy4kJHBhcnNlZE5nTW9kZWwuYXNzaWduO1xuICB0aGlzLiQkbmdNb2RlbEdldCA9IHRoaXMuJCRwYXJzZWROZ01vZGVsO1xuICB0aGlzLiQkbmdNb2RlbFNldCA9IHRoaXMuJCRwYXJzZWROZ01vZGVsQXNzaWduO1xuICB0aGlzLiQkcGVuZGluZ0RlYm91bmNlID0gbnVsbDtcbiAgdGhpcy4kJHBhcnNlclZhbGlkID0gdW5kZWZpbmVkO1xuICB0aGlzLiQkcGFyc2VyTmFtZSA9ICdwYXJzZSc7XG5cbiAgdGhpcy4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQgPSAwO1xuXG4gIHRoaXMuJCRzY29wZSA9ICRzY29wZTtcbiAgdGhpcy4kJHJvb3RTY29wZSA9ICRzY29wZS4kcm9vdDtcbiAgdGhpcy4kJGF0dHIgPSAkYXR0cjtcbiAgdGhpcy4kJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgdGhpcy4kJGFuaW1hdGUgPSAkYW5pbWF0ZTtcbiAgdGhpcy4kJHRpbWVvdXQgPSAkdGltZW91dDtcbiAgdGhpcy4kJHBhcnNlID0gJHBhcnNlO1xuICB0aGlzLiQkcSA9ICRxO1xuICB0aGlzLiQkZXhjZXB0aW9uSGFuZGxlciA9ICRleGNlcHRpb25IYW5kbGVyO1xuXG4gIHNldHVwVmFsaWRpdHkodGhpcyk7XG4gIHNldHVwTW9kZWxXYXRjaGVyKHRoaXMpO1xufVxuXG5OZ01vZGVsQ29udHJvbGxlci5wcm90b3R5cGUgPSB7XG4gICQkaW5pdEdldHRlclNldHRlcnM6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLiRvcHRpb25zLmdldE9wdGlvbignZ2V0dGVyU2V0dGVyJykpIHtcbiAgICAgIHZhciBpbnZva2VNb2RlbEdldHRlciA9IHRoaXMuJCRwYXJzZSh0aGlzLiQkYXR0ci5uZ01vZGVsICsgJygpJyksXG4gICAgICAgICAgaW52b2tlTW9kZWxTZXR0ZXIgPSB0aGlzLiQkcGFyc2UodGhpcy4kJGF0dHIubmdNb2RlbCArICcoJCQkcCknKTtcblxuICAgICAgdGhpcy4kJG5nTW9kZWxHZXQgPSBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgdmFyIG1vZGVsVmFsdWUgPSB0aGlzLiQkcGFyc2VkTmdNb2RlbCgkc2NvcGUpO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihtb2RlbFZhbHVlKSkge1xuICAgICAgICAgIG1vZGVsVmFsdWUgPSBpbnZva2VNb2RlbEdldHRlcigkc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb2RlbFZhbHVlO1xuICAgICAgfTtcbiAgICAgIHRoaXMuJCRuZ01vZGVsU2V0ID0gZnVuY3Rpb24oJHNjb3BlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLiQkcGFyc2VkTmdNb2RlbCgkc2NvcGUpKSkge1xuICAgICAgICAgIGludm9rZU1vZGVsU2V0dGVyKCRzY29wZSwgeyQkJHA6IG5ld1ZhbHVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kJHBhcnNlZE5nTW9kZWxBc3NpZ24oJHNjb3BlLCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICghdGhpcy4kJHBhcnNlZE5nTW9kZWwuYXNzaWduKSB7XG4gICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdub25hc3NpZ24nLCAnRXhwcmVzc2lvbiBcXCd7MH1cXCcgaXMgbm9uLWFzc2lnbmFibGUuIEVsZW1lbnQ6IHsxfScsXG4gICAgICAgICAgdGhpcy4kJGF0dHIubmdNb2RlbCwgc3RhcnRpbmdUYWcodGhpcy4kJGVsZW1lbnQpKTtcbiAgICB9XG4gIH0sXG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyZW5kZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHVwZGF0ZWQuIEl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIHVzZXIgb2YgdGhlIG5nLW1vZGVsXG4gICAqIGRpcmVjdGl2ZSB3aWxsIGltcGxlbWVudCB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogVGhlIGAkcmVuZGVyKClgIG1ldGhvZCBpcyBpbnZva2VkIGluIHRoZSBmb2xsb3dpbmcgc2l0dWF0aW9uczpcbiAgICpcbiAgICogKiBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIGlzIGNhbGxlZC4gIElmIHdlIGFyZSByb2xsaW5nIGJhY2sgdGhlIHZpZXcgdmFsdWUgdG8gdGhlIGxhc3RcbiAgICogICBjb21taXR0ZWQgdmFsdWUgdGhlbiBgJHJlbmRlcigpYCBpcyBjYWxsZWQgdG8gdXBkYXRlIHRoZSBpbnB1dCBjb250cm9sLlxuICAgKiAqIFRoZSB2YWx1ZSByZWZlcmVuY2VkIGJ5IGBuZy1tb2RlbGAgaXMgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5IGFuZCBib3RoIHRoZSBgJG1vZGVsVmFsdWVgIGFuZFxuICAgKiAgIHRoZSBgJHZpZXdWYWx1ZWAgYXJlIGRpZmZlcmVudCBmcm9tIGxhc3QgdGltZS5cbiAgICpcbiAgICogU2luY2UgYG5nLW1vZGVsYCBkb2VzIG5vdCBkbyBhIGRlZXAgd2F0Y2gsIGAkcmVuZGVyKClgIGlzIG9ubHkgaW52b2tlZCBpZiB0aGUgdmFsdWVzIG9mXG4gICAqIGAkbW9kZWxWYWx1ZWAgYW5kIGAkdmlld1ZhbHVlYCBhcmUgYWN0dWFsbHkgZGlmZmVyZW50IGZyb20gdGhlaXIgcHJldmlvdXMgdmFsdWVzLiBJZiBgJG1vZGVsVmFsdWVgXG4gICAqIG9yIGAkdmlld1ZhbHVlYCBhcmUgb2JqZWN0cyAocmF0aGVyIHRoYW4gYSBzdHJpbmcgb3IgbnVtYmVyKSB0aGVuIGAkcmVuZGVyKClgIHdpbGwgbm90IGJlXG4gICAqIGludm9rZWQgaWYgeW91IG9ubHkgY2hhbmdlIGEgcHJvcGVydHkgb24gdGhlIG9iamVjdHMuXG4gICAqL1xuICAkcmVuZGVyOiBub29wLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGlzRW1wdHlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gd2UgbmVlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHZhbHVlIG9mIGFuIGlucHV0IGlzIGVtcHR5LlxuICAgKlxuICAgKiBGb3IgaW5zdGFuY2UsIHRoZSByZXF1aXJlZCBkaXJlY3RpdmUgZG9lcyB0aGlzIHRvIHdvcmsgb3V0IGlmIHRoZSBpbnB1dCBoYXMgZGF0YSBvciBub3QuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGAkaXNFbXB0eWAgZnVuY3Rpb24gY2hlY2tzIHdoZXRoZXIgdGhlIHZhbHVlIGlzIGB1bmRlZmluZWRgLCBgJydgLCBgbnVsbGAgb3IgYE5hTmAuXG4gICAqXG4gICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBmb3IgaW5wdXQgZGlyZWN0aXZlcyB3aG9zZSBjb25jZXB0IG9mIGJlaW5nIGVtcHR5IGlzIGRpZmZlcmVudCBmcm9tIHRoZVxuICAgKiBkZWZhdWx0LiBUaGUgYGNoZWNrYm94SW5wdXRUeXBlYCBkaXJlY3RpdmUgZG9lcyB0aGlzIGJlY2F1c2UgaW4gaXRzIGNhc2UgYSB2YWx1ZSBvZiBgZmFsc2VgXG4gICAqIGltcGxpZXMgZW1wdHkuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBpbnB1dCB0byBjaGVjayBmb3IgZW1wdGluZXNzLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIFwiZW1wdHlcIi5cbiAgICovXG4gICRpc0VtcHR5OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpIHx8IHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWU7XG4gIH0sXG5cbiAgJCR1cGRhdGVFbXB0eUNsYXNzZXM6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuJGlzRW1wdHkodmFsdWUpKSB7XG4gICAgICB0aGlzLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgTk9UX0VNUFRZX0NMQVNTKTtcbiAgICAgIHRoaXMuJCRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCBFTVBUWV9DTEFTUyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJCRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBFTVBUWV9DTEFTUyk7XG4gICAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgTk9UX0VNUFRZX0NMQVNTKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0UHJpc3RpbmVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGNvbnRyb2wgdG8gaXRzIHByaXN0aW5lIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLWRpcnR5YCBjbGFzcyBhbmQgc2V0IHRoZSBjb250cm9sIHRvIGl0cyBwcmlzdGluZVxuICAgKiBzdGF0ZSAoYG5nLXByaXN0aW5lYCBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSBwcmlzdGluZSB3aGVuIHRoZSBjb250cm9sXG4gICAqIGhhcyBub3QgYmVlbiBjaGFuZ2VkIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZC5cbiAgICovXG4gICRzZXRQcmlzdGluZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLiRwcmlzdGluZSA9IHRydWU7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldERpcnR5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyBkaXJ0eSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy1wcmlzdGluZWAgY2xhc3MgYW5kIHNldCB0aGUgY29udHJvbCB0byBpdHMgZGlydHlcbiAgICogc3RhdGUgKGBuZy1kaXJ0eWAgY2xhc3MpLiBBIG1vZGVsIGlzIGNvbnNpZGVyZWQgdG8gYmUgZGlydHkgd2hlbiB0aGUgY29udHJvbCBoYXMgYmVlbiBjaGFuZ2VkXG4gICAqIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZC5cbiAgICovXG4gICRzZXREaXJ0eTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZGlydHkgPSB0cnVlO1xuICAgIHRoaXMuJHByaXN0aW5lID0gZmFsc2U7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xuICAgIHRoaXMuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFVudG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdW50b3VjaGVkIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLXRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAoYG5nLXVudG91Y2hlZGAgY2xhc3MpLiBVcG9uIGNvbXBpbGF0aW9uLCBhIG1vZGVsIGlzIHNldCBhcyB1bnRvdWNoZWRcbiAgICogYnkgZGVmYXVsdCwgaG93ZXZlciB0aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHJlc3RvcmUgdGhhdCBzdGF0ZSBpZiB0aGUgbW9kZWwgaGFzXG4gICAqIGFscmVhZHkgYmVlbiB0b3VjaGVkIGJ5IHRoZSB1c2VyLlxuICAgKi9cbiAgJHNldFVudG91Y2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kdG91Y2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuJHVudG91Y2hlZCA9IHRydWU7XG4gICAgdGhpcy4kJGFuaW1hdGUuc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsIFVOVE9VQ0hFRF9DTEFTUywgVE9VQ0hFRF9DTEFTUyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy11bnRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXG4gICAqIHRvdWNoZWQgc3RhdGUgKGBuZy10b3VjaGVkYCBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSB0b3VjaGVkIHdoZW4gdGhlIHVzZXIgaGFzXG4gICAqIGZpcnN0IGZvY3VzZWQgdGhlIGNvbnRyb2wgZWxlbWVudCBhbmQgdGhlbiBzaGlmdGVkIGZvY3VzIGF3YXkgZnJvbSB0aGUgY29udHJvbCAoYmx1ciBldmVudCkuXG4gICAqL1xuICAkc2V0VG91Y2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kdG91Y2hlZCA9IHRydWU7XG4gICAgdGhpcy4kdW50b3VjaGVkID0gZmFsc2U7XG4gICAgdGhpcy4kJGFuaW1hdGUuc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsIFRPVUNIRURfQ0xBU1MsIFVOVE9VQ0hFRF9DTEFTUyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENhbmNlbCBhbiB1cGRhdGUgYW5kIHJlc2V0IHRoZSBpbnB1dCBlbGVtZW50J3MgdmFsdWUgdG8gcHJldmVudCBhbiB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAsXG4gICAqIHdoaWNoIG1heSBiZSBjYXVzZWQgYnkgYSBwZW5kaW5nIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBzb21lXG4gICAqIGZ1dHVyZSBldmVudC5cbiAgICpcbiAgICogSWYgeW91IGhhdmUgYW4gaW5wdXQgdGhhdCB1c2VzIGBuZy1tb2RlbC1vcHRpb25zYCB0byBzZXQgdXAgZGVib3VuY2VkIHVwZGF0ZXMgb3IgdXBkYXRlcyB0aGF0XG4gICAqIGRlcGVuZCBvbiBzcGVjaWFsIGV2ZW50cyBzdWNoIGFzIGBibHVyYCwgdGhlcmUgY2FuIGJlIGEgcGVyaW9kIHdoZW4gdGhlIGAkdmlld1ZhbHVlYCBpcyBvdXQgb2ZcbiAgICogc3luYyB3aXRoIHRoZSBuZ01vZGVsJ3MgYCRtb2RlbFZhbHVlYC5cbiAgICpcbiAgICogSW4gdGhpcyBjYXNlLCB5b3UgY2FuIHVzZSBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIHRvIG1hbnVhbGx5IGNhbmNlbCB0aGUgZGVib3VuY2VkIC8gZnV0dXJlIHVwZGF0ZVxuICAgKiBhbmQgcmVzZXQgdGhlIGlucHV0IHRvIHRoZSBsYXN0IGNvbW1pdHRlZCB2aWV3IHZhbHVlLlxuICAgKlxuICAgKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRoYXQgeW91IHJ1biBpbnRvIGRpZmZpY3VsdGllcyBpZiB5b3UgdHJ5IHRvIHVwZGF0ZSB0aGUgbmdNb2RlbCdzIGAkbW9kZWxWYWx1ZWBcbiAgICogcHJvZ3JhbW1hdGljYWxseSBiZWZvcmUgdGhlc2UgZGVib3VuY2VkL2Z1dHVyZSBldmVudHMgaGF2ZSByZXNvbHZlZC9vY2N1cnJlZCwgYmVjYXVzZSBBbmd1bGFySlMnc1xuICAgKiBkaXJ0eSBjaGVja2luZyBtZWNoYW5pc20gaXMgbm90IGFibGUgdG8gdGVsbCB3aGV0aGVyIHRoZSBtb2RlbCBoYXMgYWN0dWFsbHkgY2hhbmdlZCBvciBub3QuXG4gICAqXG4gICAqIFRoZSBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBwcm9ncmFtbWF0aWNhbGx5IGNoYW5naW5nIHRoZSBtb2RlbCBvZiBhblxuICAgKiBpbnB1dCB3aGljaCBtYXkgaGF2ZSBzdWNoIGV2ZW50cyBwZW5kaW5nLiBUaGlzIGlzIGltcG9ydGFudCBpbiBvcmRlciB0byBtYWtlIHN1cmUgdGhhdCB0aGVcbiAgICogaW5wdXQgZmllbGQgd2lsbCBiZSB1cGRhdGVkIHdpdGggdGhlIG5ldyBtb2RlbCB2YWx1ZSBhbmQgYW55IHBlbmRpbmcgb3BlcmF0aW9ucyBhcmUgY2FuY2VsbGVkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiA8ZXhhbXBsZSBuYW1lPVwibmctbW9kZWwtY2FuY2VsLXVwZGF0ZVwiIG1vZHVsZT1cImNhbmNlbC11cGRhdGUtZXhhbXBsZVwiPlxuICAgKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAgICogICAgIGFuZ3VsYXIubW9kdWxlKCdjYW5jZWwtdXBkYXRlLWV4YW1wbGUnLCBbXSlcbiAgICpcbiAgICogICAgIC5jb250cm9sbGVyKCdDYW5jZWxVcGRhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICogICAgICAgJHNjb3BlLm1vZGVsID0ge3ZhbHVlMTogJycsIHZhbHVlMjogJyd9O1xuICAgKlxuICAgKiAgICAgICAkc2NvcGUuc2V0RW1wdHkgPSBmdW5jdGlvbihlLCB2YWx1ZSwgcm9sbGJhY2spIHtcbiAgICogICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgKiAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgKiAgICAgICAgICAgaWYgKHJvbGxiYWNrKSB7XG4gICAqICAgICAgICAgICAgICRzY29wZS5teUZvcm1bdmFsdWVdLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xuICAgKiAgICAgICAgICAgfVxuICAgKiAgICAgICAgICAgJHNjb3BlLm1vZGVsW3ZhbHVlXSA9ICcnO1xuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfTtcbiAgICogICAgIH1dKTtcbiAgICogICA8L2ZpbGU+XG4gICAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkNhbmNlbFVwZGF0ZUNvbnRyb2xsZXJcIj5cbiAgICogICAgICAgPHA+Qm90aCBvZiB0aGVzZSBpbnB1dHMgYXJlIG9ubHkgdXBkYXRlZCBpZiB0aGV5IGFyZSBibHVycmVkLiBIaXR0aW5nIGVzY2FwZSBzaG91bGRcbiAgICogICAgICAgZW1wdHkgdGhlbS4gRm9sbG93IHRoZXNlIHN0ZXBzIGFuZCBvYnNlcnZlIHRoZSBkaWZmZXJlbmNlOjwvcD5cbiAgICogICAgICAgPG9sPlxuICAgKiAgICAgICAgIDxsaT5UeXBlIHNvbWV0aGluZyBpbiB0aGUgaW5wdXQuIFlvdSB3aWxsIHNlZSB0aGF0IHRoZSBtb2RlbCBpcyBub3QgeWV0IHVwZGF0ZWQ8L2xpPlxuICAgKiAgICAgICAgIDxsaT5QcmVzcyB0aGUgRXNjYXBlIGtleS5cbiAgICogICAgICAgICAgIDxvbD5cbiAgICogICAgICAgICAgICAgPGxpPiBJbiB0aGUgZmlyc3QgZXhhbXBsZSwgbm90aGluZyBoYXBwZW5zLCBiZWNhdXNlIHRoZSBtb2RlbCBpcyBhbHJlYWR5ICcnLCBhbmQgbm9cbiAgICogICAgICAgICAgICAgdXBkYXRlIGlzIGRldGVjdGVkLiBJZiB5b3UgYmx1ciB0aGUgaW5wdXQsIHRoZSBtb2RlbCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCB2aWV3LlxuICAgKiAgICAgICAgICAgICA8L2xpPlxuICAgKiAgICAgICAgICAgICA8bGk+IEluIHRoZSBzZWNvbmQgZXhhbXBsZSwgdGhlIHBlbmRpbmcgdXBkYXRlIGlzIGNhbmNlbGxlZCwgYW5kIHRoZSBpbnB1dCBpcyBzZXQgYmFja1xuICAgKiAgICAgICAgICAgICB0byB0aGUgbGFzdCBjb21taXR0ZWQgdmlldyB2YWx1ZSAoJycpLiBCbHVycmluZyB0aGUgaW5wdXQgZG9lcyBub3RoaW5nLlxuICAgKiAgICAgICAgICAgICA8L2xpPlxuICAgKiAgICAgICAgICAgPC9vbD5cbiAgICogICAgICAgICA8L2xpPlxuICAgKiAgICAgICA8L29sPlxuICAgKlxuICAgKiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJyB9XCI+XG4gICAqICAgICAgICAgPGRpdj5cbiAgICogICAgICAgICAgIDxwIGlkPVwiaW5wdXREZXNjcmlwdGlvbjFcIj5XaXRob3V0ICRyb2xsYmFja1ZpZXdWYWx1ZSgpOjwvcD5cbiAgICogICAgICAgICAgIDxpbnB1dCBuYW1lPVwidmFsdWUxXCIgYXJpYS1kZXNjcmliZWRieT1cImlucHV0RGVzY3JpcHRpb24xXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZTFcIlxuICAgKiAgICAgICAgICAgICAgICAgIG5nLWtleWRvd249XCJzZXRFbXB0eSgkZXZlbnQsICd2YWx1ZTEnKVwiPlxuICAgKiAgICAgICAgICAgdmFsdWUxOiBcInt7IG1vZGVsLnZhbHVlMSB9fVwiXG4gICAqICAgICAgICAgPC9kaXY+XG4gICAqXG4gICAqICAgICAgICAgPGRpdj5cbiAgICogICAgICAgICAgIDxwIGlkPVwiaW5wdXREZXNjcmlwdGlvbjJcIj5XaXRoICRyb2xsYmFja1ZpZXdWYWx1ZSgpOjwvcD5cbiAgICogICAgICAgICAgIDxpbnB1dCBuYW1lPVwidmFsdWUyXCIgYXJpYS1kZXNjcmliZWRieT1cImlucHV0RGVzY3JpcHRpb24yXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZTJcIlxuICAgKiAgICAgICAgICAgICAgICAgIG5nLWtleWRvd249XCJzZXRFbXB0eSgkZXZlbnQsICd2YWx1ZTInLCB0cnVlKVwiPlxuICAgKiAgICAgICAgICAgdmFsdWUyOiBcInt7IG1vZGVsLnZhbHVlMiB9fVwiXG4gICAqICAgICAgICAgPC9kaXY+XG4gICAqICAgICAgIDwvZm9ybT5cbiAgICogICAgIDwvZGl2PlxuICAgKiAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgICAgZGl2IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpdjpudGgtY2hpbGQoMSkge1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMzBweDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgPC9maWxlPlxuICAgKiA8L2V4YW1wbGU+XG4gICAqL1xuICAkcm9sbGJhY2tWaWV3VmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcbiAgICB0aGlzLiR2aWV3VmFsdWUgPSB0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtcbiAgICB0aGlzLiRyZW5kZXIoKTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUnVucyBlYWNoIG9mIHRoZSByZWdpc3RlcmVkIHZhbGlkYXRvcnMgKGZpcnN0IHN5bmNocm9ub3VzIHZhbGlkYXRvcnMgYW5kIHRoZW5cbiAgICogYXN5bmNocm9ub3VzIHZhbGlkYXRvcnMpLlxuICAgKiBJZiB0aGUgdmFsaWRpdHkgY2hhbmdlcyB0byBpbnZhbGlkLCB0aGUgbW9kZWwgd2lsbCBiZSBzZXQgdG8gYHVuZGVmaW5lZGAsXG4gICAqIHVubGVzcyB7QGxpbmsgbmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zLmFsbG93SW52YWxpZGB9IGlzIGB0cnVlYC5cbiAgICogSWYgdGhlIHZhbGlkaXR5IGNoYW5nZXMgdG8gdmFsaWQsIGl0IHdpbGwgc2V0IHRoZSBtb2RlbCB0byB0aGUgbGFzdCBhdmFpbGFibGUgdmFsaWRcbiAgICogYCRtb2RlbFZhbHVlYCwgaS5lLiBlaXRoZXIgdGhlIGxhc3QgcGFyc2VkIHZhbHVlIG9yIHRoZSBsYXN0IHZhbHVlIHNldCBmcm9tIHRoZSBzY29wZS5cbiAgICovXG4gICR2YWxpZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gaWdub3JlICR2YWxpZGF0ZSBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4odGhpcy4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmlld1ZhbHVlID0gdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7XG4gICAgLy8gTm90ZTogd2UgdXNlIHRoZSAkJHJhd01vZGVsVmFsdWUgYXMgJG1vZGVsVmFsdWUgbWlnaHQgaGF2ZSBiZWVuXG4gICAgLy8gc2V0IHRvIHVuZGVmaW5lZCBkdXJpbmcgYSB2aWV3IC0+IG1vZGVsIHVwZGF0ZSB0aGF0IGZvdW5kIHZhbGlkYXRpb25cbiAgICAvLyBlcnJvcnMuIFdlIGNhbid0IHBhcnNlIHRoZSB2aWV3IGhlcmUsIHNpbmNlIHRoYXQgY291bGQgY2hhbmdlXG4gICAgLy8gdGhlIG1vZGVsIGFsdGhvdWdoIG5laXRoZXIgdmlld1ZhbHVlIG5vciB0aGUgbW9kZWwgb24gdGhlIHNjb3BlIGNoYW5nZWRcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IHRoaXMuJCRyYXdNb2RlbFZhbHVlO1xuXG4gICAgdmFyIHByZXZWYWxpZCA9IHRoaXMuJHZhbGlkO1xuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IHRoaXMuJG1vZGVsVmFsdWU7XG5cbiAgICB2YXIgYWxsb3dJbnZhbGlkID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ2FsbG93SW52YWxpZCcpO1xuXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuJCRydW5WYWxpZGF0b3JzKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgZnVuY3Rpb24oYWxsVmFsaWQpIHtcbiAgICAgIC8vIElmIHRoZXJlIHdhcyBubyBjaGFuZ2UgaW4gdmFsaWRpdHksIGRvbid0IHVwZGF0ZSB0aGUgbW9kZWxcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgY2hhbmdpbmcgYW4gaW52YWxpZCBtb2RlbFZhbHVlIHRvIHVuZGVmaW5lZFxuICAgICAgaWYgKCFhbGxvd0ludmFsaWQgJiYgcHJldlZhbGlkICE9PSBhbGxWYWxpZCkge1xuICAgICAgICAvLyBOb3RlOiBEb24ndCBjaGVjayB0aGlzLiR2YWxpZCBoZXJlLCBhcyB3ZSBjb3VsZCBoYXZlXG4gICAgICAgIC8vIGV4dGVybmFsIHZhbGlkYXRvcnMgKGUuZy4gY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyKSxcbiAgICAgICAgLy8gdGhhdCBqdXN0IGNhbGwgJHNldFZhbGlkaXR5IGFuZCBuZWVkIHRoZSBtb2RlbCB2YWx1ZVxuICAgICAgICAvLyB0byBjYWxjdWxhdGUgdGhlaXIgdmFsaWRpdHkuXG4gICAgICAgIHRoYXQuJG1vZGVsVmFsdWUgPSBhbGxWYWxpZCA/IG1vZGVsVmFsdWUgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoYXQuJG1vZGVsVmFsdWUgIT09IHByZXZNb2RlbFZhbHVlKSB7XG4gICAgICAgICAgdGhhdC4kJHdyaXRlTW9kZWxUb1Njb3BlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAkJHJ1blZhbGlkYXRvcnM6IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgZG9uZUNhbGxiYWNrKSB7XG4gICAgdGhpcy4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQrKztcbiAgICB2YXIgbG9jYWxWYWxpZGF0aW9uUnVuSWQgPSB0aGlzLiQkY3VycmVudFZhbGlkYXRpb25SdW5JZDtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAvLyBjaGVjayBwYXJzZXIgZXJyb3JcbiAgICBpZiAoIXByb2Nlc3NQYXJzZUVycm9ycygpKSB7XG4gICAgICB2YWxpZGF0aW9uRG9uZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcHJvY2Vzc1N5bmNWYWxpZGF0b3JzKCkpIHtcbiAgICAgIHZhbGlkYXRpb25Eb25lKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJvY2Vzc0FzeW5jVmFsaWRhdG9ycygpO1xuXG4gICAgZnVuY3Rpb24gcHJvY2Vzc1BhcnNlRXJyb3JzKCkge1xuICAgICAgdmFyIGVycm9yS2V5ID0gdGhhdC4kJHBhcnNlck5hbWU7XG5cbiAgICAgIGlmIChpc1VuZGVmaW5lZCh0aGF0LiQkcGFyc2VyVmFsaWQpKSB7XG4gICAgICAgIHNldFZhbGlkaXR5KGVycm9yS2V5LCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhhdC4kJHBhcnNlclZhbGlkKSB7XG4gICAgICAgICAgZm9yRWFjaCh0aGF0LiR2YWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XG4gICAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3JFYWNoKHRoYXQuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odiwgbmFtZSkge1xuICAgICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgbnVsbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIHBhcnNlIGVycm9yIGxhc3QsIHRvIHByZXZlbnQgdW5zZXR0aW5nIGl0LCBzaG91bGQgYSAkdmFsaWRhdG9ycyBrZXkgPT0gcGFyc2VyTmFtZVxuICAgICAgICBzZXRWYWxpZGl0eShlcnJvcktleSwgdGhhdC4kJHBhcnNlclZhbGlkKTtcbiAgICAgICAgcmV0dXJuIHRoYXQuJCRwYXJzZXJWYWxpZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb2Nlc3NTeW5jVmFsaWRhdG9ycygpIHtcbiAgICAgIHZhciBzeW5jVmFsaWRhdG9yc1ZhbGlkID0gdHJ1ZTtcbiAgICAgIGZvckVhY2godGhhdC4kdmFsaWRhdG9ycywgZnVuY3Rpb24odmFsaWRhdG9yLCBuYW1lKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBCb29sZWFuKHZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpKTtcbiAgICAgICAgc3luY1ZhbGlkYXRvcnNWYWxpZCA9IHN5bmNWYWxpZGF0b3JzVmFsaWQgJiYgcmVzdWx0O1xuICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCByZXN1bHQpO1xuICAgICAgfSk7XG4gICAgICBpZiAoIXN5bmNWYWxpZGF0b3JzVmFsaWQpIHtcbiAgICAgICAgZm9yRWFjaCh0aGF0LiRhc3luY1ZhbGlkYXRvcnMsIGZ1bmN0aW9uKHYsIG5hbWUpIHtcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb2Nlc3NBc3luY1ZhbGlkYXRvcnMoKSB7XG4gICAgICB2YXIgdmFsaWRhdG9yUHJvbWlzZXMgPSBbXTtcbiAgICAgIHZhciBhbGxWYWxpZCA9IHRydWU7XG4gICAgICBmb3JFYWNoKHRoYXQuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odmFsaWRhdG9yLCBuYW1lKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gdmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSk7XG4gICAgICAgIGlmICghaXNQcm9taXNlTGlrZShwcm9taXNlKSkge1xuICAgICAgICAgIHRocm93IG5nTW9kZWxNaW5FcnIoJ25vcHJvbWlzZScsXG4gICAgICAgICAgICAnRXhwZWN0ZWQgYXN5bmNocm9ub3VzIHZhbGlkYXRvciB0byByZXR1cm4gYSBwcm9taXNlIGJ1dCBnb3QgXFwnezB9XFwnIGluc3RlYWQuJywgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgdmFsaWRhdG9yUHJvbWlzZXMucHVzaChwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdHJ1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFsbFZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgZmFsc2UpO1xuICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICAgIGlmICghdmFsaWRhdG9yUHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICAgIHZhbGlkYXRpb25Eb25lKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhhdC4kJHEuYWxsKHZhbGlkYXRvclByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhbGlkYXRpb25Eb25lKGFsbFZhbGlkKTtcbiAgICAgICAgfSwgbm9vcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VmFsaWRpdHkobmFtZSwgaXNWYWxpZCkge1xuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSB0aGF0LiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCkge1xuICAgICAgICB0aGF0LiRzZXRWYWxpZGl0eShuYW1lLCBpc1ZhbGlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2YWxpZGF0aW9uRG9uZShhbGxWYWxpZCkge1xuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSB0aGF0LiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCkge1xuXG4gICAgICAgIGRvbmVDYWxsYmFjayhhbGxWYWxpZCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGNvbW1pdFZpZXdWYWx1ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ29tbWl0IGEgcGVuZGluZyB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gdGhpcyBtZXRob2QgaXMgcmFyZWx5IG5lZWRlZCBhcyBgTmdNb2RlbENvbnRyb2xsZXJgXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxuICAgKi9cbiAgJGNvbW1pdFZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXdWYWx1ZSA9IHRoaXMuJHZpZXdWYWx1ZTtcblxuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcblxuICAgIC8vIElmIHRoZSB2aWV3IHZhbHVlIGhhcyBub3QgY2hhbmdlZCB0aGVuIHdlIHNob3VsZCBqdXN0IGV4aXQsIGV4Y2VwdCBpbiB0aGUgY2FzZSB3aGVyZSB0aGVyZSBpc1xuICAgIC8vIGEgbmF0aXZlIHZhbGlkYXRvciBvbiB0aGUgZWxlbWVudC4gSW4gdGhpcyBjYXNlIHRoZSB2YWxpZGF0aW9uIHN0YXRlIG1heSBoYXZlIGNoYW5nZWQgZXZlbiB0aG91Z2hcbiAgICAvLyB0aGUgdmlld1ZhbHVlIGhhcyBzdGF5ZWQgZW1wdHkuXG4gICAgaWYgKHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID09PSB2aWV3VmFsdWUgJiYgKHZpZXdWYWx1ZSAhPT0gJycgfHwgIXRoaXMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiQkdXBkYXRlRW1wdHlDbGFzc2VzKHZpZXdWYWx1ZSk7XG4gICAgdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPSB2aWV3VmFsdWU7XG5cbiAgICAvLyBjaGFuZ2UgdG8gZGlydHlcbiAgICBpZiAodGhpcy4kcHJpc3RpbmUpIHtcbiAgICAgIHRoaXMuJHNldERpcnR5KCk7XG4gICAgfVxuICAgIHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlKCk7XG4gIH0sXG5cbiAgJCRwYXJzZUFuZFZhbGlkYXRlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmlld1ZhbHVlID0gdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7XG4gICAgdmFyIG1vZGVsVmFsdWUgPSB2aWV3VmFsdWU7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgdGhpcy4kJHBhcnNlclZhbGlkID0gaXNVbmRlZmluZWQobW9kZWxWYWx1ZSkgPyB1bmRlZmluZWQgOiB0cnVlO1xuXG4gICAgLy8gUmVzZXQgYW55IHByZXZpb3VzIHBhcnNlIGVycm9yXG4gICAgdGhpcy4kc2V0VmFsaWRpdHkodGhpcy4kJHBhcnNlck5hbWUsIG51bGwpO1xuICAgIHRoaXMuJCRwYXJzZXJOYW1lID0gJ3BhcnNlJztcblxuICAgIGlmICh0aGlzLiQkcGFyc2VyVmFsaWQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kcGFyc2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb2RlbFZhbHVlID0gdGhpcy4kcGFyc2Vyc1tpXShtb2RlbFZhbHVlKTtcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKG1vZGVsVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy4kJHBhcnNlclZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzTnVtYmVyTmFOKHRoaXMuJG1vZGVsVmFsdWUpKSB7XG4gICAgICAvLyB0aGlzLiRtb2RlbFZhbHVlIGhhcyBub3QgYmVlbiB0b3VjaGVkIHlldC4uLlxuICAgICAgdGhpcy4kbW9kZWxWYWx1ZSA9IHRoaXMuJCRuZ01vZGVsR2V0KHRoaXMuJCRzY29wZSk7XG4gICAgfVxuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IHRoaXMuJG1vZGVsVmFsdWU7XG4gICAgdmFyIGFsbG93SW52YWxpZCA9IHRoaXMuJG9wdGlvbnMuZ2V0T3B0aW9uKCdhbGxvd0ludmFsaWQnKTtcbiAgICB0aGlzLiQkcmF3TW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XG5cbiAgICBpZiAoYWxsb3dJbnZhbGlkKSB7XG4gICAgICB0aGlzLiRtb2RlbFZhbHVlID0gbW9kZWxWYWx1ZTtcbiAgICAgIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCk7XG4gICAgfVxuXG4gICAgLy8gUGFzcyB0aGUgJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlIGhlcmUsIGJlY2F1c2UgdGhlIGNhY2hlZCB2aWV3VmFsdWUgbWlnaHQgYmUgb3V0IG9mIGRhdGUuXG4gICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIGUuZy4gJHNldFZpZXdWYWx1ZSBpcyBjYWxsZWQgZnJvbSBpbnNpZGUgYSBwYXJzZXJcbiAgICB0aGlzLiQkcnVuVmFsaWRhdG9ycyhtb2RlbFZhbHVlLCB0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSwgZnVuY3Rpb24oYWxsVmFsaWQpIHtcbiAgICAgIGlmICghYWxsb3dJbnZhbGlkKSB7XG4gICAgICAgIC8vIE5vdGU6IERvbid0IGNoZWNrIHRoaXMuJHZhbGlkIGhlcmUsIGFzIHdlIGNvdWxkIGhhdmVcbiAgICAgICAgLy8gZXh0ZXJuYWwgdmFsaWRhdG9ycyAoZS5nLiBjYWxjdWxhdGVkIG9uIHRoZSBzZXJ2ZXIpLFxuICAgICAgICAvLyB0aGF0IGp1c3QgY2FsbCAkc2V0VmFsaWRpdHkgYW5kIG5lZWQgdGhlIG1vZGVsIHZhbHVlXG4gICAgICAgIC8vIHRvIGNhbGN1bGF0ZSB0aGVpciB2YWxpZGl0eS5cbiAgICAgICAgdGhhdC4kbW9kZWxWYWx1ZSA9IGFsbFZhbGlkID8gbW9kZWxWYWx1ZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgd3JpdGVUb01vZGVsSWZOZWVkZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCkge1xuICAgICAgaWYgKHRoYXQuJG1vZGVsVmFsdWUgIT09IHByZXZNb2RlbFZhbHVlKSB7XG4gICAgICAgIHRoYXQuJCR3cml0ZU1vZGVsVG9TY29wZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAkJHdyaXRlTW9kZWxUb1Njb3BlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkbmdNb2RlbFNldCh0aGlzLiQkc2NvcGUsIHRoaXMuJG1vZGVsVmFsdWUpO1xuICAgIGZvckVhY2godGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgICAgICAgdGhpcy4kJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0Vmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBVcGRhdGUgdGhlIHZpZXcgdmFsdWUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhIGNvbnRyb2wgd2FudHMgdG8gY2hhbmdlIHRoZSB2aWV3IHZhbHVlOyB0eXBpY2FsbHksXG4gICAqIHRoaXMgaXMgZG9uZSBmcm9tIHdpdGhpbiBhIERPTSBldmVudCBoYW5kbGVyLiBGb3IgZXhhbXBsZSwgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXR9XG4gICAqIGRpcmVjdGl2ZSBjYWxscyBpdCB3aGVuIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgY2hhbmdlcyBhbmQge0BsaW5rIG5nLmRpcmVjdGl2ZTpzZWxlY3Qgc2VsZWN0fVxuICAgKiBjYWxscyBpdCB3aGVuIGFuIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAgICpcbiAgICogV2hlbiBgJHNldFZpZXdWYWx1ZWAgaXMgY2FsbGVkLCB0aGUgbmV3IGB2YWx1ZWAgd2lsbCBiZSBzdGFnZWQgZm9yIGNvbW1pdHRpbmcgdGhyb3VnaCB0aGUgYCRwYXJzZXJzYFxuICAgKiBhbmQgYCR2YWxpZGF0b3JzYCBwaXBlbGluZXMuIElmIHRoZXJlIGFyZSBubyBzcGVjaWFsIHtAbGluayBuZ01vZGVsT3B0aW9uc30gc3BlY2lmaWVkIHRoZW4gdGhlIHN0YWdlZFxuICAgKiB2YWx1ZSBpcyBzZW50IGRpcmVjdGx5IGZvciBwcm9jZXNzaW5nIHRocm91Z2ggdGhlIGAkcGFyc2Vyc2AgcGlwZWxpbmUuIEFmdGVyIHRoaXMsIHRoZSBgJHZhbGlkYXRvcnNgIGFuZFxuICAgKiBgJGFzeW5jVmFsaWRhdG9yc2AgYXJlIGNhbGxlZCBhbmQgdGhlIHZhbHVlIGlzIGFwcGxpZWQgdG8gYCRtb2RlbFZhbHVlYC5cbiAgICogRmluYWxseSwgdGhlIHZhbHVlIGlzIHNldCB0byB0aGUgKipleHByZXNzaW9uKiogc3BlY2lmaWVkIGluIHRoZSBgbmctbW9kZWxgIGF0dHJpYnV0ZSBhbmRcbiAgICogYWxsIHRoZSByZWdpc3RlcmVkIGNoYW5nZSBsaXN0ZW5lcnMsIGluIHRoZSBgJHZpZXdDaGFuZ2VMaXN0ZW5lcnNgIGxpc3QgYXJlIGNhbGxlZC5cbiAgICpcbiAgICogSW4gY2FzZSB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30gZGlyZWN0aXZlIGlzIHVzZWQgd2l0aCBgdXBkYXRlT25gXG4gICAqIGFuZCB0aGUgYGRlZmF1bHRgIHRyaWdnZXIgaXMgbm90IGxpc3RlZCwgYWxsIHRob3NlIGFjdGlvbnMgd2lsbCByZW1haW4gcGVuZGluZyB1bnRpbCBvbmUgb2YgdGhlXG4gICAqIGB1cGRhdGVPbmAgZXZlbnRzIGlzIHRyaWdnZXJlZCBvbiB0aGUgRE9NIGVsZW1lbnQuXG4gICAqIEFsbCB0aGVzZSBhY3Rpb25zIHdpbGwgYmUgZGVib3VuY2VkIGlmIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfVxuICAgKiBkaXJlY3RpdmUgaXMgdXNlZCB3aXRoIGEgY3VzdG9tIGRlYm91bmNlIGZvciB0aGlzIHBhcnRpY3VsYXIgZXZlbnQuXG4gICAqIE5vdGUgdGhhdCBhIGAkZGlnZXN0YCBpcyBvbmx5IHRyaWdnZXJlZCBvbmNlIHRoZSBgdXBkYXRlT25gIGV2ZW50cyBhcmUgZmlyZWQsIG9yIGlmIGBkZWJvdW5jZWBcbiAgICogaXMgc3BlY2lmaWVkLCBvbmNlIHRoZSB0aW1lciBydW5zIG91dC5cbiAgICpcbiAgICogV2hlbiB1c2VkIHdpdGggc3RhbmRhcmQgaW5wdXRzLCB0aGUgdmlldyB2YWx1ZSB3aWxsIGFsd2F5cyBiZSBhIHN0cmluZyAod2hpY2ggaXMgaW4gc29tZSBjYXNlc1xuICAgKiBwYXJzZWQgaW50byBhbm90aGVyIHR5cGUsIHN1Y2ggYXMgYSBgRGF0ZWAgb2JqZWN0IGZvciBgaW5wdXRbZGF0ZV1gLilcbiAgICogSG93ZXZlciwgY3VzdG9tIGNvbnRyb2xzIG1pZ2h0IGFsc28gcGFzcyBvYmplY3RzIHRvIHRoaXMgbWV0aG9kLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBtYWtlXG4gICAqIGEgY29weSBvZiB0aGUgb2JqZWN0IGJlZm9yZSBwYXNzaW5nIGl0IHRvIGAkc2V0Vmlld1ZhbHVlYC4gVGhpcyBpcyBiZWNhdXNlIGBuZ01vZGVsYCBkb2VzIG5vdFxuICAgKiBwZXJmb3JtIGEgZGVlcCB3YXRjaCBvZiBvYmplY3RzLCBpdCBvbmx5IGxvb2tzIGZvciBhIGNoYW5nZSBvZiBpZGVudGl0eS4gSWYgeW91IG9ubHkgY2hhbmdlXG4gICAqIHRoZSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0IHRoZW4gbmdNb2RlbCB3aWxsIG5vdCByZWFsaXplIHRoYXQgdGhlIG9iamVjdCBoYXMgY2hhbmdlZCBhbmRcbiAgICogd2lsbCBub3QgaW52b2tlIHRoZSBgJHBhcnNlcnNgIGFuZCBgJHZhbGlkYXRvcnNgIHBpcGVsaW5lcy4gRm9yIHRoaXMgcmVhc29uLCB5b3Ugc2hvdWxkXG4gICAqIG5vdCBjaGFuZ2UgcHJvcGVydGllcyBvZiB0aGUgY29weSBvbmNlIGl0IGhhcyBiZWVuIHBhc3NlZCB0byBgJHNldFZpZXdWYWx1ZWAuXG4gICAqIE90aGVyd2lzZSB5b3UgbWF5IGNhdXNlIHRoZSBtb2RlbCB2YWx1ZSBvbiB0aGUgc2NvcGUgdG8gY2hhbmdlIGluY29ycmVjdGx5LlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICAgKiBJbiBhbnkgY2FzZSwgdGhlIHZhbHVlIHBhc3NlZCB0byB0aGUgbWV0aG9kIHNob3VsZCBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCB2YWx1ZVxuICAgKiBvZiB0aGUgY29udHJvbC4gRm9yIGV4YW1wbGUsIGlmIHlvdSBhcmUgY2FsbGluZyBgJHNldFZpZXdWYWx1ZWAgZm9yIGFuIGlucHV0IGVsZW1lbnQsXG4gICAqIHlvdSBzaG91bGQgcGFzcyB0aGUgaW5wdXQgRE9NIHZhbHVlLiBPdGhlcndpc2UsIHRoZSBjb250cm9sIGFuZCB0aGUgc2NvcGUgbW9kZWwgYmVjb21lXG4gICAqIG91dCBvZiBzeW5jLiBJdCdzIGFsc28gaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBgJHNldFZpZXdWYWx1ZWAgZG9lcyBub3QgY2FsbCBgJHJlbmRlcmAgb3IgY2hhbmdlXG4gICAqIHRoZSBjb250cm9sJ3MgRE9NIHZhbHVlIGluIGFueSB3YXkuIElmIHdlIHdhbnQgdG8gY2hhbmdlIHRoZSBjb250cm9sJ3MgRE9NIHZhbHVlXG4gICAqIHByb2dyYW1tYXRpY2FsbHksIHdlIHNob3VsZCB1cGRhdGUgdGhlIGBuZ01vZGVsYCBzY29wZSBleHByZXNzaW9uLiBJdHMgbmV3IHZhbHVlIHdpbGwgYmVcbiAgICogcGlja2VkIHVwIGJ5IHRoZSBtb2RlbCBjb250cm9sbGVyLCB3aGljaCB3aWxsIHJ1biBpdCB0aHJvdWdoIHRoZSBgJGZvcm1hdHRlcnNgLCBgJHJlbmRlcmAgaXRcbiAgICogdG8gdXBkYXRlIHRoZSBET00sIGFuZCBmaW5hbGx5IGNhbGwgYCR2YWxpZGF0ZWAgb24gaXQuXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIHZhbHVlIGZyb20gdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmlnZ2VyIEV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoZSB1cGRhdGUuXG4gICAqL1xuICAkc2V0Vmlld1ZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgdHJpZ2dlcikge1xuICAgIHRoaXMuJHZpZXdWYWx1ZSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLiRvcHRpb25zLmdldE9wdGlvbigndXBkYXRlT25EZWZhdWx0JykpIHtcbiAgICAgIHRoaXMuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCh0cmlnZ2VyKTtcbiAgICB9XG4gIH0sXG5cbiAgJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdDogZnVuY3Rpb24odHJpZ2dlcikge1xuICAgIHZhciBkZWJvdW5jZURlbGF5ID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ2RlYm91bmNlJyk7XG5cbiAgICBpZiAoaXNOdW1iZXIoZGVib3VuY2VEZWxheVt0cmlnZ2VyXSkpIHtcbiAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZURlbGF5W3RyaWdnZXJdO1xuICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoZGVib3VuY2VEZWxheVsnZGVmYXVsdCddKSAmJlxuICAgICAgdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ3VwZGF0ZU9uJykuaW5kZXhPZih0cmlnZ2VyKSA9PT0gLTFcbiAgICApIHtcbiAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZURlbGF5WydkZWZhdWx0J107XG4gICAgfSBlbHNlIGlmIChpc051bWJlcihkZWJvdW5jZURlbGF5WycqJ10pKSB7XG4gICAgICBkZWJvdW5jZURlbGF5ID0gZGVib3VuY2VEZWxheVsnKiddO1xuICAgIH1cblxuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgaWYgKGRlYm91bmNlRGVsYXkgPiAwKSB7IC8vIHRoaXMgZmFpbHMgaWYgZGVib3VuY2VEZWxheSBpcyBhbiBvYmplY3RcbiAgICAgIHRoaXMuJCRwZW5kaW5nRGVib3VuY2UgPSB0aGlzLiQkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICB9LCBkZWJvdW5jZURlbGF5KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuJCRyb290U2NvcGUuJCRwaGFzZSkge1xuICAgICAgdGhpcy4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJCRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJG92ZXJyaWRlTW9kZWxPcHRpb25zXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBPdmVycmlkZSB0aGUgY3VycmVudCBtb2RlbCBvcHRpb25zIHNldHRpbmdzIHByb2dyYW1tYXRpY2FsbHkuXG4gICAqXG4gICAqIFRoZSBwcmV2aW91cyBgTW9kZWxPcHRpb25zYCB2YWx1ZSB3aWxsIG5vdCBiZSBtb2RpZmllZC4gSW5zdGVhZCwgYVxuICAgKiBuZXcgYE1vZGVsT3B0aW9uc2Agb2JqZWN0IHdpbGwgaW5oZXJpdCBmcm9tIHRoZSBwcmV2aW91cyBvbmUgb3ZlcnJpZGluZ1xuICAgKiBvciBpbmhlcml0aW5nIHNldHRpbmdzIHRoYXQgYXJlIGRlZmluZWQgaW4gdGhlIGdpdmVuIHBhcmFtZXRlci5cbiAgICpcbiAgICogU2VlIHtAbGluayBuZ01vZGVsT3B0aW9uc30gZm9yIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgb3B0aW9ucyBjYW4gYmUgc3BlY2lmaWVkXG4gICAqIGFuZCBob3cgbW9kZWwgb3B0aW9uIGluaGVyaXRhbmNlIHdvcmtzLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAqKk5vdGU6KiogdGhpcyBmdW5jdGlvbiBvbmx5IGFmZmVjdHMgdGhlIG9wdGlvbnMgc2V0IG9uIHRoZSBgbmdNb2RlbENvbnRyb2xsZXJgLFxuICAgKiBhbmQgbm90IHRoZSBvcHRpb25zIG9uIHRoZSB7QGxpbmsgbmdNb2RlbE9wdGlvbnN9IGRpcmVjdGl2ZSBmcm9tIHdoaWNoIHRoZXkgbWlnaHQgaGF2ZSBiZWVuXG4gICAqIG9idGFpbmVkIGluaXRpYWxseS5cbiAgICogPC9kaXY+XG4gICAqXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAgICogKipOb3RlOioqIGl0IGlzIG5vdCBwb3NzaWJsZSB0byBvdmVycmlkZSB0aGUgYGdldHRlclNldHRlcmAgb3B0aW9uLlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgYSBoYXNoIG9mIHNldHRpbmdzIHRvIG92ZXJyaWRlIHRoZSBwcmV2aW91cyBvcHRpb25zXG4gICAqXG4gICAqL1xuICAkb3ZlcnJpZGVNb2RlbE9wdGlvbnM6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB0aGlzLiRvcHRpb25zID0gdGhpcy4kb3B0aW9ucy5jcmVhdGVDaGlsZChvcHRpb25zKTtcbiAgICB0aGlzLiQkc2V0VXBkYXRlT25FdmVudHMoKTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKlxuICAgKiBAbmFtZSAgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcHJvY2Vzc01vZGVsVmFsdWVcblxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogUnVucyB0aGUgbW9kZWwgLT4gdmlldyBwaXBlbGluZSBvbiB0aGUgY3VycmVudFxuICAgKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkbW9kZWxWYWx1ZSAkbW9kZWxWYWx1ZX0uXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIGJ5IHRoaXMgbWV0aG9kOlxuICAgKlxuICAgKiAtIHRoZSBgJG1vZGVsVmFsdWVgIGlzIHJ1biB0aHJvdWdoIHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkZm9ybWF0dGVycyAkZm9ybWF0dGVyc31cbiAgICogYW5kIHRoZSByZXN1bHQgaXMgc2V0IHRvIHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gICAqIC0gdGhlIGBuZy1lbXB0eWAgb3IgYG5nLW5vdC1lbXB0eWAgY2xhc3MgaXMgc2V0IG9uIHRoZSBlbGVtZW50XG4gICAqIC0gaWYgdGhlIGAkdmlld1ZhbHVlYCBoYXMgY2hhbmdlZDpcbiAgICogICAtIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyZW5kZXIgJHJlbmRlcn0gaXMgY2FsbGVkIG9uIHRoZSBjb250cm9sXG4gICAqICAgLSB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgJHZhbGlkYXRvcnN9IGFyZSBydW4gYW5kXG4gICAqICAgdGhlIHZhbGlkYXRpb24gc3RhdHVzIGlzIHNldC5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IG5nTW9kZWwgaW50ZXJuYWxseSB3aGVuIHRoZSBib3VuZCBzY29wZSB2YWx1ZSBjaGFuZ2VzLlxuICAgKiBBcHBsaWNhdGlvbiBkZXZlbG9wZXJzIHVzdWFsbHkgZG8gbm90IGhhdmUgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uIHRoZW1zZWx2ZXMuXG4gICAqXG4gICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgd2hlbiB0aGUgYCR2aWV3VmFsdWVgIG9yIHRoZSByZW5kZXJlZCBET00gdmFsdWUgYXJlIG5vdCBjb3JyZWN0bHlcbiAgICogZm9ybWF0dGVkIGFuZCB0aGUgYCRtb2RlbFZhbHVlYCBtdXN0IGJlIHJ1biB0aHJvdWdoIHRoZSBgJGZvcm1hdHRlcnNgIGFnYWluLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBDb25zaWRlciBhIHRleHQgaW5wdXQgd2l0aCBhbiBhdXRvY29tcGxldGUgbGlzdCAoZm9yIGZydWl0KSwgd2hlcmUgdGhlIGl0ZW1zIGFyZVxuICAgKiBvYmplY3RzIHdpdGggYSBuYW1lIGFuZCBhbiBpZC5cbiAgICogQSB1c2VyIGVudGVycyBgYXBgIGFuZCB0aGVuIHNlbGVjdHMgYEFwcmljb3RgIGZyb20gdGhlIGxpc3QuXG4gICAqIEJhc2VkIG9uIHRoaXMsIHRoZSBhdXRvY29tcGxldGUgd2lkZ2V0IHdpbGwgY2FsbCBgJHNldFZpZXdWYWx1ZSh7bmFtZTogJ0Fwcmljb3QnLCBpZDogNDQzfSlgLFxuICAgKiBidXQgdGhlIHJlbmRlcmVkIHZhbHVlIHdpbGwgc3RpbGwgYmUgYGFwYC5cbiAgICogVGhlIHdpZGdldCBjYW4gdGhlbiBjYWxsIGBjdHJsLiRwcm9jZXNzTW9kZWxWYWx1ZSgpYCB0byBydW4gdGhlIG1vZGVsIC0+IHZpZXdcbiAgICogcGlwZWxpbmUgYWdhaW4sIHdoaWNoIGZvcm1hdHMgdGhlIG9iamVjdCB0byB0aGUgc3RyaW5nIGBBcHJpY290YCxcbiAgICogdGhlbiB1cGRhdGVzIHRoZSBgJHZpZXdWYWx1ZWAsIGFuZCBmaW5hbGx5IHJlbmRlcnMgaXQgaW4gdGhlIERPTS5cbiAgICpcbiAgICogPGV4YW1wbGUgbW9kdWxlPVwiaW5wdXRFeGFtcGxlXCIgbmFtZT1cIm5nLW1vZGVsLXByb2Nlc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cImlucHV0Q29udHJvbGxlclwiIHN0eWxlPVwiZGlzcGxheTogZmxleDtcIj5cbiAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1yaWdodDogMzBweDtcIj5cbiAgICAgICAgICBTZWFyY2ggRnJ1aXQ6XG4gICAgICAgICAgPGJhc2ljLWF1dG9jb21wbGV0ZSBpdGVtcz1cIml0ZW1zXCIgb24tc2VsZWN0PVwic2VsZWN0ZWRGcnVpdCA9IGl0ZW1cIj48L2Jhc2ljLWF1dG9jb21wbGV0ZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgTW9kZWw6PGJyPlxuICAgICAgICAgIDxwcmU+e3tzZWxlY3RlZEZydWl0IHwganNvbn19PC9wcmU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2lucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignaW5wdXRDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLml0ZW1zID0gW1xuICAgICAgICAgICAge25hbWU6ICdBcHJpY290JywgaWQ6IDQ0M30sXG4gICAgICAgICAgICB7bmFtZTogJ0NsZW1lbnRpbmUnLCBpZDogOTcyfSxcbiAgICAgICAgICAgIHtuYW1lOiAnRHVyaWFuJywgaWQ6IDE2OX0sXG4gICAgICAgICAgICB7bmFtZTogJ0phY2tmcnVpdCcsIGlkOiA5ODJ9LFxuICAgICAgICAgICAge25hbWU6ICdTdHJhd2JlcnJ5JywgaWQ6IDg2M31cbiAgICAgICAgICBdO1xuICAgICAgICB9KVxuICAgICAgICAuY29tcG9uZW50KCdiYXNpY0F1dG9jb21wbGV0ZScsIHtcbiAgICAgICAgICBiaW5kaW5nczoge1xuICAgICAgICAgICAgaXRlbXM6ICc8JyxcbiAgICAgICAgICAgIG9uU2VsZWN0OiAnJidcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0b2NvbXBsZXRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRlbGVtZW50LCAkc2NvcGUpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBuZ01vZGVsO1xuXG4gICAgICAgICAgICB0aGF0LiRwb3N0TGluayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBuZ01vZGVsID0gJGVsZW1lbnQuZmluZCgnaW5wdXQnKS5jb250cm9sbGVyKCduZ01vZGVsJyk7XG5cbiAgICAgICAgICAgICAgbmdNb2RlbC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5uYW1lKSB8fCB2YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Lml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodGhhdC5pdGVtc1tpXS5uYW1lID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHRoYXQuaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGF0LnNlbGVjdEl0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShpdGVtKTtcbiAgICAgICAgICAgICAgbmdNb2RlbC4kcHJvY2Vzc01vZGVsVmFsdWUoKTtcbiAgICAgICAgICAgICAgdGhhdC5vblNlbGVjdCh7aXRlbTogaXRlbX0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJhdXRvY29tcGxldGUuaHRtbFwiPlxuICAgICAgIDxkaXY+XG4gICAgICAgICA8aW5wdXQgdHlwZT1cInNlYXJjaFwiIG5nLW1vZGVsPVwiJGN0cmwuc2VhcmNoVGVybVwiIC8+XG4gICAgICAgICA8dWw+XG4gICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJpdGVtIGluICRjdHJsLml0ZW1zIHwgZmlsdGVyOiRjdHJsLnNlYXJjaFRlcm1cIj5cbiAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGN0cmwuc2VsZWN0SXRlbShpdGVtKVwiPnt7IGl0ZW0ubmFtZSB9fTwvYnV0dG9uPlxuICAgICAgICAgICA8L2xpPlxuICAgICAgICAgPC91bD5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgKiA8L2V4YW1wbGU+XG4gICAqXG4gICAqL1xuICAkcHJvY2Vzc01vZGVsVmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2aWV3VmFsdWUgPSB0aGlzLiQkZm9ybWF0KCk7XG5cbiAgICBpZiAodGhpcy4kdmlld1ZhbHVlICE9PSB2aWV3VmFsdWUpIHtcbiAgICAgIHRoaXMuJCR1cGRhdGVFbXB0eUNsYXNzZXModmlld1ZhbHVlKTtcbiAgICAgIHRoaXMuJHZpZXdWYWx1ZSA9IHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID0gdmlld1ZhbHVlO1xuICAgICAgdGhpcy4kcmVuZGVyKCk7XG4gICAgICAvLyBJdCBpcyBwb3NzaWJsZSB0aGF0IG1vZGVsIGFuZCB2aWV3IHZhbHVlIGhhdmUgYmVlbiB1cGRhdGVkIGR1cmluZyByZW5kZXJcbiAgICAgIHRoaXMuJCRydW5WYWxpZGF0b3JzKHRoaXMuJG1vZGVsVmFsdWUsIHRoaXMuJHZpZXdWYWx1ZSwgbm9vcCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgaW50ZXJuYWxseSB0byBydW4gdGhlICRmb3JtYXR0ZXJzIG9uIHRoZSAkbW9kZWxWYWx1ZVxuICAgKi9cbiAgJCRmb3JtYXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmb3JtYXR0ZXJzID0gdGhpcy4kZm9ybWF0dGVycyxcbiAgICAgICAgaWR4ID0gZm9ybWF0dGVycy5sZW5ndGg7XG5cbiAgICB2YXIgdmlld1ZhbHVlID0gdGhpcy4kbW9kZWxWYWx1ZTtcbiAgICB3aGlsZSAoaWR4LS0pIHtcbiAgICAgIHZpZXdWYWx1ZSA9IGZvcm1hdHRlcnNbaWR4XSh2aWV3VmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2aWV3VmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBpbnRlcm5hbGx5IHdoZW4gdGhlIGJvdW5kIHNjb3BlIHZhbHVlIGNoYW5nZXMuXG4gICAqL1xuICAkJHNldE1vZGVsVmFsdWU6IGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcbiAgICB0aGlzLiRtb2RlbFZhbHVlID0gdGhpcy4kJHJhd01vZGVsVmFsdWUgPSBtb2RlbFZhbHVlO1xuICAgIHRoaXMuJCRwYXJzZXJWYWxpZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLiRwcm9jZXNzTW9kZWxWYWx1ZSgpO1xuICB9LFxuXG4gICQkc2V0VXBkYXRlT25FdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLiQkdXBkYXRlRXZlbnRzKSB7XG4gICAgICB0aGlzLiQkZWxlbWVudC5vZmYodGhpcy4kJHVwZGF0ZUV2ZW50cywgdGhpcy4kJHVwZGF0ZUV2ZW50SGFuZGxlcik7XG4gICAgfVxuXG4gICAgdGhpcy4kJHVwZGF0ZUV2ZW50cyA9IHRoaXMuJG9wdGlvbnMuZ2V0T3B0aW9uKCd1cGRhdGVPbicpO1xuICAgIGlmICh0aGlzLiQkdXBkYXRlRXZlbnRzKSB7XG4gICAgICB0aGlzLiQkZWxlbWVudC5vbih0aGlzLiQkdXBkYXRlRXZlbnRzLCB0aGlzLiQkdXBkYXRlRXZlbnRIYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgJCR1cGRhdGVFdmVudEhhbmRsZXI6IGZ1bmN0aW9uKGV2KSB7XG4gICAgdGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KGV2ICYmIGV2LnR5cGUpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBzZXR1cE1vZGVsV2F0Y2hlcihjdHJsKSB7XG4gIC8vIG1vZGVsIC0+IHZhbHVlXG4gIC8vIE5vdGU6IHdlIGNhbm5vdCB1c2UgYSBub3JtYWwgc2NvcGUuJHdhdGNoIGFzIHdlIHdhbnQgdG8gZGV0ZWN0IHRoZSBmb2xsb3dpbmc6XG4gIC8vIDEuIHNjb3BlIHZhbHVlIGlzICdhJ1xuICAvLyAyLiB1c2VyIGVudGVycyAnYidcbiAgLy8gMy4gbmctY2hhbmdlIGtpY2tzIGluIGFuZCByZXZlcnRzIHNjb3BlIHZhbHVlIHRvICdhJ1xuICAvLyAgICAtPiBzY29wZSB2YWx1ZSBkaWQgbm90IGNoYW5nZSBzaW5jZSB0aGUgbGFzdCBkaWdlc3QgYXNcbiAgLy8gICAgICAgbmctY2hhbmdlIGV4ZWN1dGVzIGluIGFwcGx5IHBoYXNlXG4gIC8vIDQuIHZpZXcgc2hvdWxkIGJlIGNoYW5nZWQgYmFjayB0byAnYSdcbiAgY3RybC4kJHNjb3BlLiR3YXRjaChmdW5jdGlvbiBuZ01vZGVsV2F0Y2goc2NvcGUpIHtcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IGN0cmwuJCRuZ01vZGVsR2V0KHNjb3BlKTtcblxuICAgIC8vIGlmIHNjb3BlIG1vZGVsIHZhbHVlIGFuZCBuZ01vZGVsIHZhbHVlIGFyZSBvdXQgb2Ygc3luY1xuICAgIC8vIFRoaXMgY2Fubm90IGJlIG1vdmVkIHRvIHRoZSBhY3Rpb24gZnVuY3Rpb24sIGJlY2F1c2UgaXQgd291bGQgbm90IGNhdGNoIHRoZVxuICAgIC8vIGNhc2Ugd2hlcmUgdGhlIG1vZGVsIGlzIGNoYW5nZWQgaW4gdGhlIG5nQ2hhbmdlIGZ1bmN0aW9uIG9yIHRoZSBtb2RlbCBzZXR0ZXJcbiAgICBpZiAobW9kZWxWYWx1ZSAhPT0gY3RybC4kbW9kZWxWYWx1ZSAmJlxuICAgICAgLy8gY2hlY2tzIGZvciBOYU4gaXMgbmVlZGVkIHRvIGFsbG93IHNldHRpbmcgdGhlIG1vZGVsIHRvIE5hTiB3aGVuIHRoZXJlJ3MgYW4gYXN5bmNWYWxpZGF0b3JcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICAgIChjdHJsLiRtb2RlbFZhbHVlID09PSBjdHJsLiRtb2RlbFZhbHVlIHx8IG1vZGVsVmFsdWUgPT09IG1vZGVsVmFsdWUpXG4gICAgKSB7XG4gICAgICBjdHJsLiQkc2V0TW9kZWxWYWx1ZShtb2RlbFZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbW9kZWxWYWx1ZTtcbiAgfSk7XG59XG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VmFsaWRpdHlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENoYW5nZSB0aGUgdmFsaWRpdHkgc3RhdGUsIGFuZCBub3RpZnkgdGhlIGZvcm0uXG4gKlxuICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB3aXRoaW4gJHBhcnNlcnMvJGZvcm1hdHRlcnMgb3IgYSBjdXN0b20gdmFsaWRhdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAqIEhvd2V2ZXIsIGluIG1vc3QgY2FzZXMgaXQgc2hvdWxkIGJlIHN1ZmZpY2llbnQgdG8gdXNlIHRoZSBgbmdNb2RlbC4kdmFsaWRhdG9yc2AgYW5kXG4gKiBgbmdNb2RlbC4kYXN5bmNWYWxpZGF0b3JzYCBjb2xsZWN0aW9ucyB3aGljaCB3aWxsIGNhbGwgYCRzZXRWYWxpZGl0eWAgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsaWRhdGlvbkVycm9yS2V5IE5hbWUgb2YgdGhlIHZhbGlkYXRvci4gVGhlIGB2YWxpZGF0aW9uRXJyb3JLZXlgIHdpbGwgYmUgYXNzaWduZWRcbiAqICAgICAgICB0byBlaXRoZXIgYCRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldYCBvciBgJHBlbmRpbmdbdmFsaWRhdGlvbkVycm9yS2V5XWBcbiAqICAgICAgICAoZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYCksIHNvIHRoYXQgaXQgaXMgYXZhaWxhYmxlIGZvciBkYXRhLWJpbmRpbmcuXG4gKiAgICAgICAgVGhlIGB2YWxpZGF0aW9uRXJyb3JLZXlgIHNob3VsZCBiZSBpbiBjYW1lbENhc2UgYW5kIHdpbGwgZ2V0IGNvbnZlcnRlZCBpbnRvIGRhc2gtY2FzZVxuICogICAgICAgIGZvciBjbGFzcyBuYW1lLiBFeGFtcGxlOiBgbXlFcnJvcmAgd2lsbCByZXN1bHQgaW4gYG5nLXZhbGlkLW15LWVycm9yYCBhbmQgYG5nLWludmFsaWQtbXktZXJyb3JgXG4gKiAgICAgICAgY2xhc3NlcyBhbmQgY2FuIGJlIGJvdW5kIHRvIGFzIGB7eyBzb21lRm9ybS5zb21lQ29udHJvbC4kZXJyb3IubXlFcnJvciB9fWAuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmFsaWQgV2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBpcyB2YWxpZCAodHJ1ZSksIGludmFsaWQgKGZhbHNlKSwgcGVuZGluZyAodW5kZWZpbmVkKSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBvciBza2lwcGVkIChudWxsKS4gUGVuZGluZyBpcyB1c2VkIGZvciB1bmZ1bGZpbGxlZCBgJGFzeW5jVmFsaWRhdG9yc2AuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgU2tpcHBlZCBpcyB1c2VkIGJ5IEFuZ3VsYXJKUyB3aGVuIHZhbGlkYXRvcnMgZG8gbm90IHJ1biBiZWNhdXNlIG9mIHBhcnNlIGVycm9ycyBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIGAkYXN5bmNWYWxpZGF0b3JzYCBkbyBub3QgcnVuIGJlY2F1c2UgYW55IG9mIHRoZSBgJHZhbGlkYXRvcnNgIGZhaWxlZC5cbiAqL1xuYWRkU2V0VmFsaWRpdHlNZXRob2Qoe1xuICBjbGF6ejogTmdNb2RlbENvbnRyb2xsZXIsXG4gIHNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIG9iamVjdFtwcm9wZXJ0eV0gPSB0cnVlO1xuICB9LFxuICB1bnNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICB9XG59KTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW9kZWxcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vZGVsIGFzc2lnbmFibGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gYmluZCB0by5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdNb2RlbGAgZGlyZWN0aXZlIGJpbmRzIGFuIGBpbnB1dGAsYHNlbGVjdGAsIGB0ZXh0YXJlYWAgKG9yIGN1c3RvbSBmb3JtIGNvbnRyb2wpIHRvIGFcbiAqIHByb3BlcnR5IG9uIHRoZSBzY29wZSB1c2luZyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciBOZ01vZGVsQ29udHJvbGxlcn0sXG4gKiB3aGljaCBpcyBjcmVhdGVkIGFuZCBleHBvc2VkIGJ5IHRoaXMgZGlyZWN0aXZlLlxuICpcbiAqIGBuZ01vZGVsYCBpcyByZXNwb25zaWJsZSBmb3I6XG4gKlxuICogLSBCaW5kaW5nIHRoZSB2aWV3IGludG8gdGhlIG1vZGVsLCB3aGljaCBvdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYGlucHV0YCwgYHRleHRhcmVhYCBvciBgc2VsZWN0YFxuICogICByZXF1aXJlLlxuICogLSBQcm92aWRpbmcgdmFsaWRhdGlvbiBiZWhhdmlvciAoaS5lLiByZXF1aXJlZCwgbnVtYmVyLCBlbWFpbCwgdXJsKS5cbiAqIC0gS2VlcGluZyB0aGUgc3RhdGUgb2YgdGhlIGNvbnRyb2wgKHZhbGlkL2ludmFsaWQsIGRpcnR5L3ByaXN0aW5lLCB0b3VjaGVkL3VudG91Y2hlZCwgdmFsaWRhdGlvbiBlcnJvcnMpLlxuICogLSBTZXR0aW5nIHJlbGF0ZWQgY3NzIGNsYXNzZXMgb24gdGhlIGVsZW1lbnQgKGBuZy12YWxpZGAsIGBuZy1pbnZhbGlkYCwgYG5nLWRpcnR5YCwgYG5nLXByaXN0aW5lYCwgYG5nLXRvdWNoZWRgLFxuICogICBgbmctdW50b3VjaGVkYCwgYG5nLWVtcHR5YCwgYG5nLW5vdC1lbXB0eWApIGluY2x1ZGluZyBhbmltYXRpb25zLlxuICogLSBSZWdpc3RlcmluZyB0aGUgY29udHJvbCB3aXRoIGl0cyBwYXJlbnQge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGZvcm19LlxuICpcbiAqIE5vdGU6IGBuZ01vZGVsYCB3aWxsIHRyeSB0byBiaW5kIHRvIHRoZSBwcm9wZXJ0eSBnaXZlbiBieSBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uIG9uIHRoZVxuICogY3VycmVudCBzY29wZS4gSWYgdGhlIHByb3BlcnR5IGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBvbiB0aGlzIHNjb3BlLCBpdCB3aWxsIGJlIGNyZWF0ZWRcbiAqIGltcGxpY2l0bHkgYW5kIGFkZGVkIHRvIHRoZSBzY29wZS5cbiAqXG4gKiBGb3IgYmVzdCBwcmFjdGljZXMgb24gdXNpbmcgYG5nTW9kZWxgLCBzZWU6XG4gKlxuICogIC0gW1VuZGVyc3RhbmRpbmcgU2NvcGVzXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3dpa2kvVW5kZXJzdGFuZGluZy1TY29wZXMpXG4gKlxuICogRm9yIGJhc2ljIGV4YW1wbGVzLCBob3cgdG8gdXNlIGBuZ01vZGVsYCwgc2VlOlxuICpcbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXR9XG4gKiAgICAtIHtAbGluayBpbnB1dFt0ZXh0XSB0ZXh0fVxuICogICAgLSB7QGxpbmsgaW5wdXRbY2hlY2tib3hdIGNoZWNrYm94fVxuICogICAgLSB7QGxpbmsgaW5wdXRbcmFkaW9dIHJhZGlvfVxuICogICAgLSB7QGxpbmsgaW5wdXRbbnVtYmVyXSBudW1iZXJ9XG4gKiAgICAtIHtAbGluayBpbnB1dFtlbWFpbF0gZW1haWx9XG4gKiAgICAtIHtAbGluayBpbnB1dFt1cmxdIHVybH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W2RhdGVdIGRhdGV9XG4gKiAgICAtIHtAbGluayBpbnB1dFtkYXRldGltZS1sb2NhbF0gZGF0ZXRpbWUtbG9jYWx9XG4gKiAgICAtIHtAbGluayBpbnB1dFt0aW1lXSB0aW1lfVxuICogICAgLSB7QGxpbmsgaW5wdXRbbW9udGhdIG1vbnRofVxuICogICAgLSB7QGxpbmsgaW5wdXRbd2Vla10gd2Vla31cbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6c2VsZWN0IHNlbGVjdH1cbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6dGV4dGFyZWEgdGV4dGFyZWF9XG4gKlxuICogIyMgQ29tcGxleCBNb2RlbHMgKG9iamVjdHMgb3IgY29sbGVjdGlvbnMpXG4gKlxuICogQnkgZGVmYXVsdCwgYG5nTW9kZWxgIHdhdGNoZXMgdGhlIG1vZGVsIGJ5IHJlZmVyZW5jZSwgbm90IHZhbHVlLiBUaGlzIGlzIGltcG9ydGFudCB0byBrbm93IHdoZW5cbiAqIGJpbmRpbmcgaW5wdXRzIHRvIG1vZGVscyB0aGF0IGFyZSBvYmplY3RzIChlLmcuIGBEYXRlYCkgb3IgY29sbGVjdGlvbnMgKGUuZy4gYXJyYXlzKS4gSWYgb25seSBwcm9wZXJ0aWVzIG9mIHRoZVxuICogb2JqZWN0IG9yIGNvbGxlY3Rpb24gY2hhbmdlLCBgbmdNb2RlbGAgd2lsbCBub3QgYmUgbm90aWZpZWQgYW5kIHNvIHRoZSBpbnB1dCB3aWxsIG5vdCBiZSAgcmUtcmVuZGVyZWQuXG4gKlxuICogVGhlIG1vZGVsIG11c3QgYmUgYXNzaWduZWQgYW4gZW50aXJlbHkgbmV3IG9iamVjdCBvciBjb2xsZWN0aW9uIGJlZm9yZSBhIHJlLXJlbmRlcmluZyB3aWxsIG9jY3VyLlxuICpcbiAqIFNvbWUgZGlyZWN0aXZlcyBoYXZlIG9wdGlvbnMgdGhhdCB3aWxsIGNhdXNlIHRoZW0gdG8gdXNlIGEgY3VzdG9tIGAkd2F0Y2hDb2xsZWN0aW9uYCBvbiB0aGUgbW9kZWwgZXhwcmVzc2lvblxuICogLSBmb3IgZXhhbXBsZSwgYG5nT3B0aW9uc2Agd2lsbCBkbyBzbyB3aGVuIGEgYHRyYWNrIGJ5YCBjbGF1c2UgaXMgaW5jbHVkZWQgaW4gdGhlIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvbiBvclxuICogaWYgdGhlIHNlbGVjdCBpcyBnaXZlbiB0aGUgYG11bHRpcGxlYCBhdHRyaWJ1dGUuXG4gKlxuICogVGhlIGAkd2F0Y2hDb2xsZWN0aW9uKClgIG1ldGhvZCBvbmx5IGRvZXMgYSBzaGFsbG93IGNvbXBhcmlzb24sIG1lYW5pbmcgdGhhdCBjaGFuZ2luZyBwcm9wZXJ0aWVzIGRlZXBlciB0aGFuIHRoZVxuICogZmlyc3QgbGV2ZWwgb2YgdGhlIG9iamVjdCAob3Igb25seSBjaGFuZ2luZyB0aGUgcHJvcGVydGllcyBvZiBhbiBpdGVtIGluIHRoZSBjb2xsZWN0aW9uIGlmIGl0J3MgYW4gYXJyYXkpIHdpbGwgc3RpbGxcbiAqIG5vdCB0cmlnZ2VyIGEgcmUtcmVuZGVyaW5nIG9mIHRoZSBtb2RlbC5cbiAqXG4gKiAjIyBDU1MgY2xhc3Nlc1xuICogVGhlIGZvbGxvd2luZyBDU1MgY2xhc3NlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWQgb24gdGhlIGFzc29jaWF0ZWQgaW5wdXQvc2VsZWN0L3RleHRhcmVhIGVsZW1lbnRcbiAqIGRlcGVuZGluZyBvbiB0aGUgdmFsaWRpdHkgb2YgdGhlIG1vZGVsLlxuICpcbiAqICAtIGBuZy12YWxpZGA6IHRoZSBtb2RlbCBpcyB2YWxpZFxuICogIC0gYG5nLWludmFsaWRgOiB0aGUgbW9kZWwgaXMgaW52YWxpZFxuICogIC0gYG5nLXZhbGlkLVtrZXldYDogZm9yIGVhY2ggdmFsaWQga2V5IGFkZGVkIGJ5IGAkc2V0VmFsaWRpdHlgXG4gKiAgLSBgbmctaW52YWxpZC1ba2V5XWA6IGZvciBlYWNoIGludmFsaWQga2V5IGFkZGVkIGJ5IGAkc2V0VmFsaWRpdHlgXG4gKiAgLSBgbmctcHJpc3RpbmVgOiB0aGUgY29udHJvbCBoYXNuJ3QgYmVlbiBpbnRlcmFjdGVkIHdpdGggeWV0XG4gKiAgLSBgbmctZGlydHlgOiB0aGUgY29udHJvbCBoYXMgYmVlbiBpbnRlcmFjdGVkIHdpdGhcbiAqICAtIGBuZy10b3VjaGVkYDogdGhlIGNvbnRyb2wgaGFzIGJlZW4gYmx1cnJlZFxuICogIC0gYG5nLXVudG91Y2hlZGA6IHRoZSBjb250cm9sIGhhc24ndCBiZWVuIGJsdXJyZWRcbiAqICAtIGBuZy1wZW5kaW5nYDogYW55IGAkYXN5bmNWYWxpZGF0b3JzYCBhcmUgdW5mdWxmaWxsZWRcbiAqICAtIGBuZy1lbXB0eWA6IHRoZSB2aWV3IGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZSBvciB0aGUgdmFsdWUgaXMgZGVlbWVkIFwiZW1wdHlcIiwgYXMgZGVmaW5lZFxuICogICAgIGJ5IHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkaXNFbXB0eX0gbWV0aG9kXG4gKiAgLSBgbmctbm90LWVtcHR5YDogdGhlIHZpZXcgY29udGFpbnMgYSBub24tZW1wdHkgdmFsdWVcbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCBuZ0FuaW1hdGUgY2FuIGRldGVjdCBlYWNoIG9mIHRoZXNlIGNsYXNzZXMgd2hlbiBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogQW5pbWF0aW9ucyB3aXRoaW4gbW9kZWxzIGFyZSB0cmlnZ2VyZWQgd2hlbiBhbnkgb2YgdGhlIGFzc29jaWF0ZWQgQ1NTIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkXG4gKiBvbiB0aGUgaW5wdXQgZWxlbWVudCB3aGljaCBpcyBhdHRhY2hlZCB0byB0aGUgbW9kZWwuIFRoZXNlIGNsYXNzZXMgaW5jbHVkZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLFxuICogYC5uZy1pbnZhbGlkYCBhbmQgYC5uZy12YWxpZGAgYXMgd2VsbCBhcyBhbnkgb3RoZXIgdmFsaWRhdGlvbnMgdGhhdCBhcmUgcGVyZm9ybWVkIG9uIHRoZSBtb2RlbCBpdHNlbGYuXG4gKiBUaGUgYW5pbWF0aW9ucyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2l0aGluIG5nTW9kZWwgYXJlIHNpbWlsYXIgdG8gaG93IHRoZXkgd29yayBpbiBuZ0NsYXNzIGFuZFxuICogYW5pbWF0aW9ucyBjYW4gYmUgaG9va2VkIGludG8gdXNpbmcgQ1NTIHRyYW5zaXRpb25zLCBrZXlmcmFtZXMgYXMgd2VsbCBhcyBKUyBhbmltYXRpb25zLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBhIHNpbXBsZSB3YXkgdG8gdXRpbGl6ZSBDU1MgdHJhbnNpdGlvbnMgdG8gc3R5bGUgYW4gaW5wdXQgZWxlbWVudFxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcbiAqXG4gKiA8cHJlPlxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXG4gKiAvL2FkdmFuY2VkIGFuaW1hdGlvbnNcbiAqIC5teS1pbnB1dCB7XG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xuICogICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAqIH1cbiAqIC5teS1pbnB1dC5uZy1pbnZhbGlkIHtcbiAqICAgYmFja2dyb3VuZDogcmVkO1xuICogICBjb2xvcjp3aGl0ZTtcbiAqIH1cbiAqIDwvcHJlPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQmFzaWMgVXNhZ2VcbiAqIDxleGFtcGxlIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIGZpeEJhc2U9XCJ0cnVlXCIgbW9kdWxlPVwiaW5wdXRFeGFtcGxlXCIgbmFtZT1cIm5nLW1vZGVsXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2lucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUudmFsID0gJzEnO1xuICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8c3R5bGU+XG4gICAgICAgICAubXktaW5wdXQge1xuICAgICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICB9XG4gICAgICAgICAubXktaW5wdXQubmctaW52YWxpZCB7XG4gICAgICAgICAgIGNvbG9yOndoaXRlO1xuICAgICAgICAgICBiYWNrZ3JvdW5kOiByZWQ7XG4gICAgICAgICB9XG4gICAgICAgPC9zdHlsZT5cbiAgICAgICA8cCBpZD1cImlucHV0RGVzY3JpcHRpb25cIj5cbiAgICAgICAgVXBkYXRlIGlucHV0IHRvIHNlZSB0cmFuc2l0aW9ucyB3aGVuIHZhbGlkL2ludmFsaWQuXG4gICAgICAgIEludGVnZXIgaXMgYSB2YWxpZCB2YWx1ZS5cbiAgICAgICA8L3A+XG4gICAgICAgPGZvcm0gbmFtZT1cInRlc3RGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ2YWxcIiBuZy1wYXR0ZXJuPVwiL15cXGQrJC9cIiBuYW1lPVwiYW5pbVwiIGNsYXNzPVwibXktaW5wdXRcIlxuICAgICAgICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9XCJpbnB1dERlc2NyaXB0aW9uXCIgLz5cbiAgICAgICA8L2Zvcm0+XG4gICAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJpbmRpbmcgdG8gYSBnZXR0ZXIvc2V0dGVyXG4gKlxuICogU29tZXRpbWVzIGl0J3MgaGVscGZ1bCB0byBiaW5kIGBuZ01vZGVsYCB0byBhIGdldHRlci9zZXR0ZXIgZnVuY3Rpb24uICBBIGdldHRlci9zZXR0ZXIgaXMgYVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1vZGVsIHdoZW4gY2FsbGVkIHdpdGggemVybyBhcmd1bWVudHMsIGFuZCBzZXRzXG4gKiB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBtb2RlbCB3aGVuIGNhbGxlZCB3aXRoIGFuIGFyZ3VtZW50LiBJdCdzIHNvbWV0aW1lcyB1c2VmdWwgdG8gdXNlIHRoaXNcbiAqIGZvciBtb2RlbHMgdGhhdCBoYXZlIGFuIGludGVybmFsIHJlcHJlc2VudGF0aW9uIHRoYXQncyBkaWZmZXJlbnQgZnJvbSB3aGF0IHRoZSBtb2RlbCBleHBvc2VzXG4gKiB0byB0aGUgdmlldy5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICogKipCZXN0IFByYWN0aWNlOioqIEl0J3MgYmVzdCB0byBrZWVwIGdldHRlcnMgZmFzdCBiZWNhdXNlIEFuZ3VsYXJKUyBpcyBsaWtlbHkgdG8gY2FsbCB0aGVtIG1vcmVcbiAqIGZyZXF1ZW50bHkgdGhhbiBvdGhlciBwYXJ0cyBvZiB5b3VyIGNvZGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBZb3UgdXNlIHRoaXMgYmVoYXZpb3IgYnkgYWRkaW5nIGBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiYCB0byBhbiBlbGVtZW50IHRoYXRcbiAqIGhhcyBgbmctbW9kZWxgIGF0dGFjaGVkIHRvIGl0LiBZb3UgY2FuIGFsc28gYWRkIGBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiYCB0b1xuICogYSBgPGZvcm0+YCwgd2hpY2ggd2lsbCBlbmFibGUgdGhpcyBiZWhhdmlvciBmb3IgYWxsIGA8aW5wdXQ+YHMgd2l0aGluIGl0LiBTZWVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zYH0gZm9yIG1vcmUuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYG5nTW9kZWxgIHdpdGggYSBnZXR0ZXIvc2V0dGVyOlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbC1nZXR0ZXItc2V0dGVyXCIgbW9kdWxlPVwiZ2V0dGVyU2V0dGVyRXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAgICAgICAgICAgPGxhYmVsPk5hbWU6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiIC8+XG4gICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICA8L2Zvcm0+XG4gICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWUoKVwiPjwvc3Bhbj48L3ByZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2dldHRlclNldHRlckV4YW1wbGUnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgIHZhciBfbmFtZSA9ICdCcmlhbic7XG4gICAgICAgICAgICRzY29wZS51c2VyID0ge1xuICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uKG5ld05hbWUpIHtcbiAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IG5ld05hbWUgY2FuIGJlIHVuZGVmaW5lZCBmb3IgdHdvIHJlYXNvbnM6XG4gICAgICAgICAgICAgIC8vIDEuIEJlY2F1c2UgaXQgaXMgY2FsbGVkIGFzIGEgZ2V0dGVyIGFuZCB0aHVzIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50c1xuICAgICAgICAgICAgICAvLyAyLiBCZWNhdXNlIHRoZSBwcm9wZXJ0eSBzaG91bGQgYWN0dWFsbHkgYmUgc2V0IHRvIHVuZGVmaW5lZC4gVGhpcyBoYXBwZW5zIGUuZy4gaWYgdGhlXG4gICAgICAgICAgICAgIC8vICAgIGlucHV0IGlzIGludmFsaWRcbiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoX25hbWUgPSBuZXdOYW1lKSA6IF9uYW1lO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgbmdNb2RlbERpcmVjdGl2ZSA9IFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRyb290U2NvcGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6IFsnbmdNb2RlbCcsICdeP2Zvcm0nLCAnXj9uZ01vZGVsT3B0aW9ucyddLFxuICAgIGNvbnRyb2xsZXI6IE5nTW9kZWxDb250cm9sbGVyLFxuICAgIC8vIFByZWxpbmsgbmVlZHMgdG8gcnVuIGJlZm9yZSBhbnkgaW5wdXQgZGlyZWN0aXZlXG4gICAgLy8gc28gdGhhdCB3ZSBjYW4gc2V0IHRoZSBOZ01vZGVsT3B0aW9ucyBpbiBOZ01vZGVsQ29udHJvbGxlclxuICAgIC8vIGJlZm9yZSBhbnlvbmUgZWxzZSB1c2VzIGl0LlxuICAgIHByaW9yaXR5OiAxLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nTW9kZWxDb21waWxlKGVsZW1lbnQpIHtcbiAgICAgIC8vIFNldHVwIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbnRyb2xcbiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoUFJJU1RJTkVfQ0xBU1MpLmFkZENsYXNzKFVOVE9VQ0hFRF9DTEFTUykuYWRkQ2xhc3MoVkFMSURfQ0xBU1MpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcmU6IGZ1bmN0aW9uIG5nTW9kZWxQcmVMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXSxcbiAgICAgICAgICAgICAgZm9ybUN0cmwgPSBjdHJsc1sxXSB8fCBtb2RlbEN0cmwuJCRwYXJlbnRGb3JtLFxuICAgICAgICAgICAgICBvcHRpb25zQ3RybCA9IGN0cmxzWzJdO1xuXG4gICAgICAgICAgaWYgKG9wdGlvbnNDdHJsKSB7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJG9wdGlvbnMgPSBvcHRpb25zQ3RybC4kb3B0aW9ucztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtb2RlbEN0cmwuJCRpbml0R2V0dGVyU2V0dGVycygpO1xuXG4gICAgICAgICAgLy8gbm90aWZ5IG90aGVycywgZXNwZWNpYWxseSBwYXJlbnQgZm9ybXNcbiAgICAgICAgICBmb3JtQ3RybC4kYWRkQ29udHJvbChtb2RlbEN0cmwpO1xuXG4gICAgICAgICAgYXR0ci4kb2JzZXJ2ZSgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBpZiAobW9kZWxDdHJsLiRuYW1lICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICBtb2RlbEN0cmwuJCRwYXJlbnRGb3JtLiQkcmVuYW1lQ29udHJvbChtb2RlbEN0cmwsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kJHBhcmVudEZvcm0uJHJlbW92ZUNvbnRyb2wobW9kZWxDdHJsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zdDogZnVuY3Rpb24gbmdNb2RlbFBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAgICAgICAgICBtb2RlbEN0cmwuJCRzZXRVcGRhdGVPbkV2ZW50cygpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gc2V0VG91Y2hlZCgpIHtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kc2V0VG91Y2hlZCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsZW1lbnQub24oJ2JsdXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChtb2RlbEN0cmwuJHRvdWNoZWQpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xuICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKHNldFRvdWNoZWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KHNldFRvdWNoZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKiBleHBvcnRlZCBkZWZhdWx0TW9kZWxPcHRpb25zICovXG52YXIgZGVmYXVsdE1vZGVsT3B0aW9ucztcbnZhciBERUZBVUxUX1JFR0VYUCA9IC8oXFxzK3xeKWRlZmF1bHQoXFxzK3wkKS87XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIE1vZGVsT3B0aW9uc1xuICogQGRlc2NyaXB0aW9uXG4gKiBBIGNvbnRhaW5lciBmb3IgdGhlIG9wdGlvbnMgc2V0IGJ5IHRoZSB7QGxpbmsgbmdNb2RlbE9wdGlvbnN9IGRpcmVjdGl2ZVxuICovXG5mdW5jdGlvbiBNb2RlbE9wdGlvbnMob3B0aW9ucykge1xuICB0aGlzLiQkb3B0aW9ucyA9IG9wdGlvbnM7XG59XG5cbk1vZGVsT3B0aW9ucy5wcm90b3R5cGUgPSB7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgTW9kZWxPcHRpb25zI2dldE9wdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgb3B0aW9uIHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgb2YgdGhlIG9wdGlvblxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIG9wdGlvblxuICAgKi9cbiAgZ2V0T3B0aW9uOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuJCRvcHRpb25zW25hbWVdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIE1vZGVsT3B0aW9ucyNjcmVhdGVDaGlsZFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBhIGhhc2ggb2Ygb3B0aW9ucyBmb3IgdGhlIG5ldyBjaGlsZCB0aGF0IHdpbGwgb3ZlcnJpZGUgdGhlIHBhcmVudCdzIG9wdGlvbnNcbiAgICogQHJldHVybiB7TW9kZWxPcHRpb25zfSBhIG5ldyBgTW9kZWxPcHRpb25zYCBvYmplY3QgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICovXG4gIGNyZWF0ZUNoaWxkOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdmFyIGluaGVyaXRBbGwgPSBmYWxzZTtcblxuICAgIC8vIG1ha2UgYSBzaGFsbG93IGNvcHlcbiAgICBvcHRpb25zID0gZXh0ZW5kKHt9LCBvcHRpb25zKTtcblxuICAgIC8vIEluaGVyaXQgb3B0aW9ucyBmcm9tIHRoZSBwYXJlbnQgaWYgc3BlY2lmaWVkIGJ5IHRoZSB2YWx1ZSBgXCIkaW5oZXJpdFwiYFxuICAgIGZvckVhY2gob3B0aW9ucywgLyoqIEB0aGlzICovIGZ1bmN0aW9uKG9wdGlvbiwga2V5KSB7XG4gICAgICBpZiAob3B0aW9uID09PSAnJGluaGVyaXQnKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICcqJykge1xuICAgICAgICAgIGluaGVyaXRBbGwgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9wdGlvbnNba2V5XSA9IHRoaXMuJCRvcHRpb25zW2tleV07XG4gICAgICAgICAgLy8gYHVwZGF0ZU9uYCBpcyBzcGVjaWFsIHNvIHdlIG11c3QgYWxzbyBpbmhlcml0IHRoZSBgdXBkYXRlT25EZWZhdWx0YCBvcHRpb25cbiAgICAgICAgICBpZiAoa2V5ID09PSAndXBkYXRlT24nKSB7XG4gICAgICAgICAgICBvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdCA9IHRoaXMuJCRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChrZXkgPT09ICd1cGRhdGVPbicpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgYHVwZGF0ZU9uYCBwcm9wZXJ0eSBjb250YWlucyB0aGUgYGRlZmF1bHRgIGV2ZW50IHRoZW4gd2UgaGF2ZSB0byByZW1vdmVcbiAgICAgICAgICAvLyBpdCBmcm9tIHRoZSBldmVudCBsaXN0IGFuZCBzZXQgdGhlIGB1cGRhdGVPbkRlZmF1bHRgIGZsYWcuXG4gICAgICAgICAgb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQgPSBmYWxzZTtcbiAgICAgICAgICBvcHRpb25zW2tleV0gPSB0cmltKG9wdGlvbi5yZXBsYWNlKERFRkFVTFRfUkVHRVhQLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiAnICc7XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG5cbiAgICBpZiAoaW5oZXJpdEFsbCkge1xuICAgICAgLy8gV2UgaGF2ZSBhIHByb3BlcnR5IG9mIHRoZSBmb3JtOiBgXCIqXCI6IFwiJGluaGVyaXRcImBcbiAgICAgIGRlbGV0ZSBvcHRpb25zWycqJ107XG4gICAgICBkZWZhdWx0cyhvcHRpb25zLCB0aGlzLiQkb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gRmluYWxseSBhZGQgaW4gYW55IG1pc3NpbmcgZGVmYXVsdHNcbiAgICBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0TW9kZWxPcHRpb25zLiQkb3B0aW9ucyk7XG5cbiAgICByZXR1cm4gbmV3IE1vZGVsT3B0aW9ucyhvcHRpb25zKTtcbiAgfVxufTtcblxuXG5kZWZhdWx0TW9kZWxPcHRpb25zID0gbmV3IE1vZGVsT3B0aW9ucyh7XG4gIHVwZGF0ZU9uOiAnJyxcbiAgdXBkYXRlT25EZWZhdWx0OiB0cnVlLFxuICBkZWJvdW5jZTogMCxcbiAgZ2V0dGVyU2V0dGVyOiBmYWxzZSxcbiAgYWxsb3dJbnZhbGlkOiBmYWxzZSxcbiAgdGltZXpvbmU6IG51bGxcbn0pO1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb2RlbE9wdGlvbnNcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gbW9kaWZ5IHRoZSBiZWhhdmlvdXIgb2Yge0BsaW5rIG5nTW9kZWx9IGRpcmVjdGl2ZXMgd2l0aGluIHlvdXJcbiAqIGFwcGxpY2F0aW9uLiBZb3UgY2FuIHNwZWNpZnkgYW4gYG5nTW9kZWxPcHRpb25zYCBkaXJlY3RpdmUgb24gYW55IGVsZW1lbnQuIEFsbCB7QGxpbmsgbmdNb2RlbH1cbiAqIGRpcmVjdGl2ZXMgd2lsbCB1c2UgdGhlIG9wdGlvbnMgb2YgdGhlaXIgbmVhcmVzdCBgbmdNb2RlbE9wdGlvbnNgIGFuY2VzdG9yLlxuICpcbiAqIFRoZSBgbmdNb2RlbE9wdGlvbnNgIHNldHRpbmdzIGFyZSBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIGRpcmVjdGl2ZSBhc1xuICogYW4gQW5ndWxhckpTIGV4cHJlc3Npb24uIFRoaXMgZXhwcmVzc2lvbiBzaG91bGQgZXZhbHVhdGUgdG8gYW4gb2JqZWN0LCB3aG9zZSBwcm9wZXJ0aWVzIGNvbnRhaW5cbiAqIHRoZSBzZXR0aW5ncy4gRm9yIGV4YW1wbGU6IGA8ZGl2IG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGRlYm91bmNlOiAxMDAgfVwiYC5cbiAqXG4gKiAjIyBJbmhlcml0aW5nIE9wdGlvbnNcbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgdGhhdCBhbiBgbmdNb2RlbE9wdGlvbnNgIHNldHRpbmcgc2hvdWxkIGJlIGluaGVyaXRlZCBmcm9tIGEgcGFyZW50IGBuZ01vZGVsT3B0aW9uc2BcbiAqIGRpcmVjdGl2ZSBieSBnaXZpbmcgaXQgdGhlIHZhbHVlIG9mIGBcIiRpbmhlcml0XCJgLlxuICogVGhlbiBpdCB3aWxsIGluaGVyaXQgdGhhdCBzZXR0aW5nIGZyb20gdGhlIGZpcnN0IGBuZ01vZGVsT3B0aW9uc2AgZGlyZWN0aXZlIGZvdW5kIGJ5IHRyYXZlcnNpbmcgdXAgdGhlXG4gKiBET00gdHJlZS4gSWYgdGhlcmUgaXMgbm8gYW5jZXN0b3IgZWxlbWVudCBjb250YWluaW5nIGFuIGBuZ01vZGVsT3B0aW9uc2AgZGlyZWN0aXZlIHRoZW4gZGVmYXVsdCBzZXR0aW5nc1xuICogd2lsbCBiZSB1c2VkLlxuICpcbiAqIEZvciBleGFtcGxlIGdpdmVuIHRoZSBmb2xsb3dpbmcgZnJhZ21lbnQgb2YgSFRNTFxuICpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGFsbG93SW52YWxpZDogdHJ1ZSwgZGVib3VuY2U6IDIwMCB9XCI+XG4gKiAgIDxmb3JtIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnYmx1cicsIGFsbG93SW52YWxpZDogJyRpbmhlcml0JyB9XCI+XG4gKiAgICAgPGlucHV0IG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnZGVmYXVsdCcsIGFsbG93SW52YWxpZDogJyRpbmhlcml0JyB9XCIgLz5cbiAqICAgPC9mb3JtPlxuICogPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiB0aGUgYGlucHV0YCBlbGVtZW50IHdpbGwgaGF2ZSB0aGUgZm9sbG93aW5nIHNldHRpbmdzXG4gKlxuICogYGBganNcbiAqIHsgYWxsb3dJbnZhbGlkOiB0cnVlLCB1cGRhdGVPbjogJ2RlZmF1bHQnLCBkZWJvdW5jZTogMCB9XG4gKiBgYGBcbiAqXG4gKiBOb3RpY2UgdGhhdCB0aGUgYGRlYm91bmNlYCBzZXR0aW5nIHdhcyBub3QgaW5oZXJpdGVkIGFuZCB1c2VkIHRoZSBkZWZhdWx0IHZhbHVlIGluc3RlYWQuXG4gKlxuICogWW91IGNhbiBzcGVjaWZ5IHRoYXQgYWxsIHVuZGVmaW5lZCBzZXR0aW5ncyBhcmUgYXV0b21hdGljYWxseSBpbmhlcml0ZWQgZnJvbSBhbiBhbmNlc3RvciBieVxuICogaW5jbHVkaW5nIGEgcHJvcGVydHkgd2l0aCBrZXkgb2YgYFwiKlwiYCBhbmQgdmFsdWUgb2YgYFwiJGluaGVyaXRcImAuXG4gKlxuICogRm9yIGV4YW1wbGUgZ2l2ZW4gdGhlIGZvbGxvd2luZyBmcmFnbWVudCBvZiBIVE1MXG4gKlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgbmctbW9kZWwtb3B0aW9ucz1cInsgYWxsb3dJbnZhbGlkOiB0cnVlLCBkZWJvdW5jZTogMjAwIH1cIj5cbiAqICAgPGZvcm0gbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJywgXCIqXCI6ICckaW5oZXJpdCcgfVwiPlxuICogICAgIDxpbnB1dCBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2RlZmF1bHQnLCBcIipcIjogJyRpbmhlcml0JyB9XCIgLz5cbiAqICAgPC9mb3JtPlxuICogPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiB0aGUgYGlucHV0YCBlbGVtZW50IHdpbGwgaGF2ZSB0aGUgZm9sbG93aW5nIHNldHRpbmdzXG4gKlxuICogYGBganNcbiAqIHsgYWxsb3dJbnZhbGlkOiB0cnVlLCB1cGRhdGVPbjogJ2RlZmF1bHQnLCBkZWJvdW5jZTogMjAwIH1cbiAqIGBgYFxuICpcbiAqIE5vdGljZSB0aGF0IHRoZSBgZGVib3VuY2VgIHNldHRpbmcgbm93IGluaGVyaXRzIHRoZSB2YWx1ZSBmcm9tIHRoZSBvdXRlciBgPGRpdj5gIGVsZW1lbnQuXG4gKlxuICogSWYgeW91IGFyZSBjcmVhdGluZyBhIHJldXNhYmxlIGNvbXBvbmVudCB0aGVuIHlvdSBzaG91bGQgYmUgY2FyZWZ1bCB3aGVuIHVzaW5nIGBcIipcIjogXCIkaW5oZXJpdFwiYFxuICogc2luY2UgeW91IG1heSBpbmFkdmVydGVudGx5IGluaGVyaXQgYSBzZXR0aW5nIGluIHRoZSBmdXR1cmUgdGhhdCBjaGFuZ2VzIHRoZSBiZWhhdmlvciBvZiB5b3VyIGNvbXBvbmVudC5cbiAqXG4gKlxuICogIyMgVHJpZ2dlcmluZyBhbmQgZGVib3VuY2luZyBtb2RlbCB1cGRhdGVzXG4gKlxuICogVGhlIGB1cGRhdGVPbmAgYW5kIGBkZWJvdW5jZWAgcHJvcGVydGllcyBhbGxvdyB5b3UgdG8gc3BlY2lmeSBhIGN1c3RvbSBsaXN0IG9mIGV2ZW50cyB0aGF0IHdpbGxcbiAqIHRyaWdnZXIgYSBtb2RlbCB1cGRhdGUgYW5kL29yIGEgZGVib3VuY2luZyBkZWxheSBzbyB0aGF0IHRoZSBhY3R1YWwgdXBkYXRlIG9ubHkgdGFrZXMgcGxhY2Ugd2hlblxuICogYSB0aW1lciBleHBpcmVzOyB0aGlzIHRpbWVyIHdpbGwgYmUgcmVzZXQgYWZ0ZXIgYW5vdGhlciBjaGFuZ2UgdGFrZXMgcGxhY2UuXG4gKlxuICogR2l2ZW4gdGhlIG5hdHVyZSBvZiBgbmdNb2RlbE9wdGlvbnNgLCB0aGUgdmFsdWUgZGlzcGxheWVkIGluc2lkZSBpbnB1dCBmaWVsZHMgaW4gdGhlIHZpZXcgbWlnaHRcbiAqIGJlIGRpZmZlcmVudCBmcm9tIHRoZSB2YWx1ZSBpbiB0aGUgYWN0dWFsIG1vZGVsLiBUaGlzIG1lYW5zIHRoYXQgaWYgeW91IHVwZGF0ZSB0aGUgbW9kZWwgeW91XG4gKiBzaG91bGQgYWxzbyBpbnZva2Uge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHJvbGxiYWNrVmlld1ZhbHVlfSBvbiB0aGUgcmVsZXZhbnQgaW5wdXQgZmllbGQgaW5cbiAqIG9yZGVyIHRvIG1ha2Ugc3VyZSBpdCBpcyBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgbW9kZWwgYW5kIHRoYXQgYW55IGRlYm91bmNlZCBhY3Rpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogVGhlIGVhc2llc3Qgd2F5IHRvIHJlZmVyZW5jZSB0aGUgY29udHJvbCdzIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyb2xsYmFja1ZpZXdWYWx1ZX1cbiAqIG1ldGhvZCBpcyBieSBtYWtpbmcgc3VyZSB0aGUgaW5wdXQgaXMgcGxhY2VkIGluc2lkZSBhIGZvcm0gdGhhdCBoYXMgYSBgbmFtZWAgYXR0cmlidXRlLiBUaGlzIGlzXG4gKiBpbXBvcnRhbnQgYmVjYXVzZSBgZm9ybWAgY29udHJvbGxlcnMgYXJlIHB1Ymxpc2hlZCB0byB0aGUgcmVsYXRlZCBzY29wZSB1bmRlciB0aGUgbmFtZSBpbiB0aGVpclxuICogYG5hbWVgIGF0dHJpYnV0ZS5cbiAqXG4gKiBBbnkgcGVuZGluZyBjaGFuZ2VzIHdpbGwgdGFrZSBwbGFjZSBpbW1lZGlhdGVseSB3aGVuIGFuIGVuY2xvc2luZyBmb3JtIGlzIHN1Ym1pdHRlZCB2aWEgdGhlXG4gKiBgc3VibWl0YCBldmVudC4gTm90ZSB0aGF0IGBuZ0NsaWNrYCBldmVudHMgd2lsbCBvY2N1ciBiZWZvcmUgdGhlIG1vZGVsIGlzIHVwZGF0ZWQuIFVzZSBgbmdTdWJtaXRgXG4gKiB0byBoYXZlIGFjY2VzcyB0byB0aGUgdXBkYXRlZCBtb2RlbC5cbiAqXG4gKiAjIyMgT3ZlcnJpZGluZyBpbW1lZGlhdGUgdXBkYXRlc1xuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gb3ZlcnJpZGUgaW1tZWRpYXRlIHVwZGF0ZXMuIENoYW5nZXMgb24gdGhlIGlucHV0cyB3aXRoaW4gdGhlXG4gKiBmb3JtIHdpbGwgdXBkYXRlIHRoZSBtb2RlbCBvbmx5IHdoZW4gdGhlIGNvbnRyb2wgbG9zZXMgZm9jdXMgKGJsdXIgZXZlbnQpLiBJZiBgZXNjYXBlYCBrZXkgaXNcbiAqIHByZXNzZWQgd2hpbGUgdGhlIGlucHV0IGZpZWxkIGlzIGZvY3VzZWQsIHRoZSB2YWx1ZSBpcyByZXNldCB0byB0aGUgdmFsdWUgaW4gdGhlIGN1cnJlbnQgbW9kZWwuXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWxPcHRpb25zLWRpcmVjdGl2ZS1ibHVyXCIgbW9kdWxlPVwib3B0aW9uc0V4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XG4gKiAgICAgICAgIDxsYWJlbD5cbiAqICAgICAgICAgICBOYW1lOlxuICogICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcbiAqICAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJyB9XCJcbiAqICAgICAgICAgICAgICAgICAgbmcta2V5dXA9XCJjYW5jZWwoJGV2ZW50KVwiIC8+XG4gKiAgICAgICAgIDwvbGFiZWw+PGJyIC8+XG4gKiAgICAgICAgIDxsYWJlbD5cbiAqICAgICAgICAgICBPdGhlciBkYXRhOlxuICogICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidXNlci5kYXRhXCIgLz5cbiAqICAgICAgICAgPC9sYWJlbD48YnIgLz5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICAgIDxwcmU+dXNlci5uYW1lID0gPHNwYW4gbmctYmluZD1cInVzZXIubmFtZVwiPjwvc3Bhbj48L3ByZT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgYW5ndWxhci5tb2R1bGUoJ29wdGlvbnNFeGFtcGxlJywgW10pXG4gKiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAkc2NvcGUudXNlciA9IHsgbmFtZTogJ3NheScsIGRhdGE6ICcnIH07XG4gKlxuICogICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oZSkge1xuICogICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7XG4gKiAgICAgICAgICAgICAkc2NvcGUudXNlckZvcm0udXNlck5hbWUuJHJvbGxiYWNrVmlld1ZhbHVlKCk7XG4gKiAgICAgICAgICAgfVxuICogICAgICAgICB9O1xuICogICAgICAgfV0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICB2YXIgbW9kZWwgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VzZXIubmFtZScpKTtcbiAqICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLm5hbWUnKSk7XG4gKiAgICAgdmFyIG90aGVyID0gZWxlbWVudChieS5tb2RlbCgndXNlci5kYXRhJykpO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIGFsbG93IGN1c3RvbSBldmVudHMnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGlucHV0LnNlbmRLZXlzKCcgaGVsbG8nKTtcbiAqICAgICAgIGlucHV0LmNsaWNrKCk7XG4gKiAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0VxdWFsKCdzYXknKTtcbiAqICAgICAgIG90aGVyLmNsaWNrKCk7XG4gKiAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0VxdWFsKCdzYXkgaGVsbG8nKTtcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCAkcm9sbGJhY2tWaWV3VmFsdWUgd2hlbiBtb2RlbCBjaGFuZ2VzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBpbnB1dC5zZW5kS2V5cygnIGhlbGxvJyk7XG4gKiAgICAgICBleHBlY3QoaW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCdzYXkgaGVsbG8nKTtcbiAqICAgICAgIGlucHV0LnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkVTQ0FQRSk7XG4gKiAgICAgICBleHBlY3QoaW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCdzYXknKTtcbiAqICAgICAgIG90aGVyLmNsaWNrKCk7XG4gKiAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0VxdWFsKCdzYXknKTtcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqICMjIyBEZWJvdW5jaW5nIHVwZGF0ZXNcbiAqXG4gKiBUaGUgbmV4dCBleGFtcGxlIHNob3dzIGhvdyB0byBkZWJvdW5jZSBtb2RlbCBjaGFuZ2VzLiBNb2RlbCB3aWxsIGJlIHVwZGF0ZWQgb25seSAxIHNlYyBhZnRlciBsYXN0IGNoYW5nZS5cbiAqIElmIHRoZSBgQ2xlYXJgIGJ1dHRvbiBpcyBwcmVzc2VkLCBhbnkgZGVib3VuY2VkIGFjdGlvbiBpcyBjYW5jZWxlZCBhbmQgdGhlIHZhbHVlIGJlY29tZXMgZW1wdHkuXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWxPcHRpb25zLWRpcmVjdGl2ZS1kZWJvdW5jZVwiIG1vZHVsZT1cIm9wdGlvbnNFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxuICogICAgICAgICBOYW1lOlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxuICogICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxuICogICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgZGVib3VuY2U6IDEwMDAgfVwiIC8+XG4gKiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJ1c2VyRm9ybS51c2VyTmFtZS4kcm9sbGJhY2tWaWV3VmFsdWUoKTsgdXNlci5uYW1lPScnXCI+Q2xlYXI8L2J1dHRvbj48YnIgLz5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICAgIDxwcmU+dXNlci5uYW1lID0gPHNwYW4gbmctYmluZD1cInVzZXIubmFtZVwiPjwvc3Bhbj48L3ByZT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgYW5ndWxhci5tb2R1bGUoJ29wdGlvbnNFeGFtcGxlJywgW10pXG4gKiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAkc2NvcGUudXNlciA9IHsgbmFtZTogJ3NheScgfTtcbiAqICAgICAgIH1dKTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqICMjIyBEZWZhdWx0IGV2ZW50cywgZXh0cmEgdHJpZ2dlcnMsIGFuZCBjYXRjaC1hbGwgZGVib3VuY2UgdmFsdWVzXG4gKlxuICogVGhpcyBleGFtcGxlIHNob3dzIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBcImRlZmF1bHRcIiB1cGRhdGUgZXZlbnRzIGFuZFxuICogYWRkaXRpb25hbCBgdXBkYXRlT25gIHRyaWdnZXJzLlxuICpcbiAqIGBkZWZhdWx0YCBldmVudHMgYXJlIHRob3NlIHRoYXQgYXJlIGJvdW5kIHRvIHRoZSBjb250cm9sLCBhbmQgd2hlbiBmaXJlZCwgdXBkYXRlIHRoZSBgJHZpZXdWYWx1ZWBcbiAqIHZpYSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0Vmlld1ZhbHVlICRzZXRWaWV3VmFsdWV9LiBFdmVyeSBldmVudCB0aGF0IGlzIG5vdCBsaXN0ZWRcbiAqIGluIGB1cGRhdGVPbmAgaXMgY29uc2lkZXJlZCBhIFwiZGVmYXVsdFwiIGV2ZW50LCBzaW5jZSBkaWZmZXJlbnQgY29udHJvbCB0eXBlcyBoYXZlIGRpZmZlcmVudFxuICogZGVmYXVsdCBldmVudHMuXG4gKlxuICogVGhlIGNvbnRyb2wgaW4gdGhpcyBleGFtcGxlIHVwZGF0ZXMgYnkgXCJkZWZhdWx0XCIsIFwiY2xpY2tcIiwgYW5kIFwiYmx1clwiLCB3aXRoIGRpZmZlcmVudCBgZGVib3VuY2VgXG4gKiB2YWx1ZXMuIFlvdSBjYW4gc2VlIHRoYXQgXCJjbGlja1wiIGRvZXNuJ3QgaGF2ZSBhbiBpbmRpdmlkdWFsIGBkZWJvdW5jZWAgdmFsdWUgLVxuICogdGhlcmVmb3JlIGl0IHVzZXMgdGhlIGAqYCBkZWJvdW5jZSB2YWx1ZS5cbiAqXG4gKiBUaGVyZSBpcyBhbHNvIGEgYnV0dG9uIHRoYXQgY2FsbHMge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZpZXdWYWx1ZSAkc2V0Vmlld1ZhbHVlfVxuICogZGlyZWN0bHkgd2l0aCBhIFwiY3VzdG9tXCIgZXZlbnQuIFNpbmNlIFwiY3VzdG9tXCIgaXMgbm90IGRlZmluZWQgaW4gdGhlIGB1cGRhdGVPbmAgbGlzdCxcbiAqIGl0IGlzIGNvbnNpZGVyZWQgYSBcImRlZmF1bHRcIiBldmVudCBhbmQgd2lsbCB1cGRhdGUgdGhlXG4gKiBjb250cm9sIGlmIFwiZGVmYXVsdFwiIGlzIGRlZmluZWQgaW4gYHVwZGF0ZU9uYCwgYW5kIHdpbGwgcmVjZWl2ZSB0aGUgXCJkZWZhdWx0XCIgZGVib3VuY2UgdmFsdWUuXG4gKiBOb3RlIHRoYXQgdGhpcyBpcyBqdXN0IHRvIGlsbHVzdHJhdGUgaG93IGN1c3RvbSBjb250cm9scyB3b3VsZCBwb3NzaWJseSBjYWxsIGAkc2V0Vmlld1ZhbHVlYC5cbiAqXG4gKiBZb3UgY2FuIGNoYW5nZSB0aGUgYHVwZGF0ZU9uYCBhbmQgYGRlYm91bmNlYCBjb25maWd1cmF0aW9uIHRvIHRlc3QgZGlmZmVyZW50IHNjZW5hcmlvcy4gVGhpc1xuICogaXMgZG9uZSB3aXRoIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRvdmVycmlkZU1vZGVsT3B0aW9ucyAkb3ZlcnJpZGVNb2RlbE9wdGlvbnN9LlxuICpcbiAgPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWxPcHRpb25zLWFkdmFuY2VkXCIgbW9kdWxlPVwib3B0aW9uc0V4YW1wbGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxtb2RlbC11cGRhdGUtZGVtbz48L21vZGVsLXVwZGF0ZS1kZW1vPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnb3B0aW9uc0V4YW1wbGUnLCBbXSlcbiAgICAgICAgLmNvbXBvbmVudCgnbW9kZWxVcGRhdGVEZW1vJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSAnQ2hpbnVhJztcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgICAgICAgICB1cGRhdGVPbjogJ2RlZmF1bHQgYmx1ciBjbGljaycsXG4gICAgICAgICAgICAgIGRlYm91bmNlOiB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogMjAwMCxcbiAgICAgICAgICAgICAgICBibHVyOiAwLFxuICAgICAgICAgICAgICAgICcqJzogMTAwMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgZXZlbnRMaXN0ID0gdGhpcy5vcHRpb25zLnVwZGF0ZU9uLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKCcqJyk7XG4gICAgICAgICAgICAgIHZhciBldmVudHMgPSB7fTtcblxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGV2ZW50c1tldmVudExpc3RbaV1dID0gdGhpcy5vcHRpb25zLmRlYm91bmNlW2V2ZW50TGlzdFtpXV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLmV2ZW50cyA9IGV2ZW50cztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHRoaXMub3B0aW9ucywge1xuICAgICAgICAgICAgICAgIHVwZGF0ZU9uOiBPYmplY3Qua2V5cyh0aGlzLmV2ZW50cykuam9pbignICcpLnJlcGxhY2UoJyonLCAnJyksXG4gICAgICAgICAgICAgICAgZGVib3VuY2U6IHRoaXMuZXZlbnRzXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIHRoaXMuZm9ybS5pbnB1dC4kb3ZlcnJpZGVNb2RlbE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBldmVudCBmb3JtXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUV2ZW50cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJ0ZW1wbGF0ZS5odG1sXCI+XG4gICAgICA8Zm9ybSBuYW1lPVwiJGN0cmwuZm9ybVwiPlxuICAgICAgICBJbnB1dDogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCIkY3RybC5uYW1lXCIgbmctbW9kZWwtb3B0aW9ucz1cIiRjdHJsLm9wdGlvbnNcIiAvPlxuICAgICAgPC9mb3JtPlxuICAgICAgTW9kZWw6IDx0dD57eyRjdHJsLm5hbWV9fTwvdHQ+XG4gICAgICA8aHI+XG4gICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGN0cmwuZm9ybS5pbnB1dC4kc2V0Vmlld1ZhbHVlKCdzb21lIHZhbHVlJywgJ2N1c3RvbScpXCI+VHJpZ2dlciBzZXRWaWV3VmFsdWUgd2l0aCAnc29tZSB2YWx1ZScgYW5kICdjdXN0b20nIGV2ZW50PC9idXR0b24+XG5cbiAgICAgIDxocj5cbiAgICAgIDxmb3JtIG5nLXN1Ym1pdD1cIiRjdHJsLnVwZGF0ZU9wdGlvbnMoKVwiPlxuICAgICAgICA8Yj51cGRhdGVPbjwvYj48YnI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiJGN0cmwub3B0aW9ucy51cGRhdGVPblwiIG5nLWNoYW5nZT1cIiRjdHJsLnVwZGF0ZUV2ZW50cygpXCIgbmctbW9kZWwtb3B0aW9ucz1cIntkZWJvdW5jZTogNTAwfVwiPlxuXG4gICAgICAgIDx0YWJsZT5cbiAgICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGg+T3B0aW9uPC90aD5cbiAgICAgICAgICAgIDx0aD5EZWJvdW5jZSB2YWx1ZTwvdGg+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiKGtleSwgdmFsdWUpIGluICRjdHJsLmV2ZW50c1wiPlxuICAgICAgICAgICAgPHRkPnt7a2V5fX08L3RkPlxuICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCIkY3RybC5ldmVudHNba2V5XVwiIC8+PC90ZD5cbiAgICAgICAgICA8L3RyPlxuICAgICAgICA8L3RhYmxlPlxuXG4gICAgICAgIDxicj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIlVwZGF0ZSBvcHRpb25zXCI+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKlxuICpcbiAqICMjIE1vZGVsIHVwZGF0ZXMgYW5kIHZhbGlkYXRpb25cbiAqXG4gKiBUaGUgZGVmYXVsdCBiZWhhdmlvdXIgaW4gYG5nTW9kZWxgIGlzIHRoYXQgdGhlIG1vZGVsIHZhbHVlIGlzIHNldCB0byBgdW5kZWZpbmVkYCB3aGVuIHRoZVxuICogdmFsaWRhdGlvbiBkZXRlcm1pbmVzIHRoYXQgdGhlIHZhbHVlIGlzIGludmFsaWQuIEJ5IHNldHRpbmcgdGhlIGBhbGxvd0ludmFsaWRgIHByb3BlcnR5IHRvIHRydWUsXG4gKiB0aGUgbW9kZWwgd2lsbCBzdGlsbCBiZSB1cGRhdGVkIGV2ZW4gaWYgdGhlIHZhbHVlIGlzIGludmFsaWQuXG4gKlxuICpcbiAqICMjIENvbm5lY3RpbmcgdG8gdGhlIHNjb3BlXG4gKlxuICogQnkgc2V0dGluZyB0aGUgYGdldHRlclNldHRlcmAgcHJvcGVydHkgdG8gdHJ1ZSB5b3UgYXJlIHRlbGxpbmcgbmdNb2RlbCB0aGF0IHRoZSBgbmdNb2RlbGAgZXhwcmVzc2lvblxuICogb24gdGhlIHNjb3BlIHJlZmVycyB0byBhIFwiZ2V0dGVyL3NldHRlclwiIGZ1bmN0aW9uIHJhdGhlciB0aGFuIHRoZSB2YWx1ZSBpdHNlbGYuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBiaW5kIHRvIGdldHRlci9zZXR0ZXJzOlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZ2V0dGVyLXNldHRlclwiIG1vZHVsZT1cImdldHRlclNldHRlckV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XG4gKiAgICAgICAgIDxsYWJlbD5cbiAqICAgICAgICAgICBOYW1lOlxuICogICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcbiAqICAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cIiAvPlxuICogICAgICAgICA8L2xhYmVsPlxuICogICAgICAgPC9mb3JtPlxuICogICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lKClcIj48L3NwYW4+PC9wcmU+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdnZXR0ZXJTZXR0ZXJFeGFtcGxlJywgW10pXG4gKiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICB2YXIgX25hbWUgPSAnQnJpYW4nO1xuICogICAgICAgICAkc2NvcGUudXNlciA9IHtcbiAqICAgICAgICAgICBuYW1lOiBmdW5jdGlvbihuZXdOYW1lKSB7XG4gKiAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5pc0RlZmluZWQobmV3TmFtZSkgPyAoX25hbWUgPSBuZXdOYW1lKSA6IF9uYW1lO1xuICogICAgICAgICAgIH1cbiAqICAgICAgICAgfTtcbiAqICAgICAgIH1dKTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqXG4gKiAjIyBTcGVjaWZ5aW5nIHRpbWV6b25lc1xuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSB0aGUgdGltZXpvbmUgdGhhdCBkYXRlL3RpbWUgaW5wdXQgZGlyZWN0aXZlcyBleHBlY3QgYnkgcHJvdmlkaW5nIGl0cyBuYW1lIGluIHRoZVxuICogYHRpbWV6b25lYCBwcm9wZXJ0eS5cbiAqXG4gKlxuICogIyMgUHJvZ3JhbW1hdGljYWxseSBjaGFuZ2luZyBvcHRpb25zXG4gKlxuICogVGhlIGBuZ01vZGVsT3B0aW9uc2AgZXhwcmVzc2lvbiBpcyBvbmx5IGV2YWx1YXRlZCBvbmNlIHdoZW4gdGhlIGRpcmVjdGl2ZSBpcyBsaW5rZWQ7IGl0IGlzIG5vdFxuICogd2F0Y2hlZCBmb3IgY2hhbmdlcy4gSG93ZXZlciwgaXQgaXMgcG9zc2libGUgdG8gb3ZlcnJpZGUgdGhlIG9wdGlvbnMgb24gYSBzaW5nbGVcbiAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyfSBpbnN0YW5jZSB3aXRoXG4gKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkb3ZlcnJpZGVNb2RlbE9wdGlvbnMgYE5nTW9kZWxDb250cm9sbGVyIyRvdmVycmlkZU1vZGVsT3B0aW9ucygpYH0uXG4gKiBTZWUgYWxzbyB0aGUgZXhhbXBsZSBmb3JcbiAqIHtAbGluayBuZ01vZGVsT3B0aW9ucyNkZWZhdWx0LWV2ZW50cy1leHRyYS10cmlnZ2Vycy1hbmQtY2F0Y2gtYWxsLWRlYm91bmNlLXZhbHVlc1xuICogRGVmYXVsdCBldmVudHMsIGV4dHJhIHRyaWdnZXJzLCBhbmQgY2F0Y2gtYWxsIGRlYm91bmNlIHZhbHVlc30uXG4gKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBuZ01vZGVsT3B0aW9ucyBvcHRpb25zIHRvIGFwcGx5IHRvIHtAbGluayBuZ01vZGVsfSBkaXJlY3RpdmVzIG9uIHRoaXMgZWxlbWVudCBhbmRcbiAqICAgYW5kIGl0cyBkZXNjZW5kZW50cy4gVmFsaWQga2V5cyBhcmU6XG4gKiAgIC0gYHVwZGF0ZU9uYDogc3RyaW5nIHNwZWNpZnlpbmcgd2hpY2ggZXZlbnQgc2hvdWxkIHRoZSBpbnB1dCBiZSBib3VuZCB0by4gWW91IGNhbiBzZXQgc2V2ZXJhbFxuICogICAgIGV2ZW50cyB1c2luZyBhbiBzcGFjZSBkZWxpbWl0ZWQgbGlzdC4gVGhlcmUgaXMgYSBzcGVjaWFsIGV2ZW50IGNhbGxlZCBgZGVmYXVsdGAgdGhhdFxuICogICAgIG1hdGNoZXMgdGhlIGRlZmF1bHQgZXZlbnRzIGJlbG9uZ2luZyB0byB0aGUgY29udHJvbC4gVGhlc2UgYXJlIHRoZSBldmVudHMgdGhhdCBhcmUgYm91bmQgdG9cbiAqICAgICB0aGUgY29udHJvbCwgYW5kIHdoZW4gZmlyZWQsIHVwZGF0ZSB0aGUgYCR2aWV3VmFsdWVgIHZpYSBgJHNldFZpZXdWYWx1ZWAuXG4gKlxuICogICAgIGBuZ01vZGVsT3B0aW9uc2AgY29uc2lkZXJzIGV2ZXJ5IGV2ZW50IHRoYXQgaXMgbm90IGxpc3RlZCBpbiBgdXBkYXRlT25gIGEgXCJkZWZhdWx0XCIgZXZlbnQsXG4gKiAgICAgc2luY2UgZGlmZmVyZW50IGNvbnRyb2wgdHlwZXMgdXNlIGRpZmZlcmVudCBkZWZhdWx0IGV2ZW50cy5cbiAqXG4gKiAgICAgU2VlIGFsc28gdGhlIHNlY3Rpb24ge0BsaW5rIG5nTW9kZWxPcHRpb25zI3RyaWdnZXJpbmctYW5kLWRlYm91bmNpbmctbW9kZWwtdXBkYXRlc1xuICogICAgIFRyaWdnZXJpbmcgYW5kIGRlYm91bmNpbmcgbW9kZWwgdXBkYXRlc30uXG4gKlxuICogICAtIGBkZWJvdW5jZWA6IGludGVnZXIgdmFsdWUgd2hpY2ggY29udGFpbnMgdGhlIGRlYm91bmNlIG1vZGVsIHVwZGF0ZSB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuIEFcbiAqICAgICB2YWx1ZSBvZiAwIHRyaWdnZXJzIGFuIGltbWVkaWF0ZSB1cGRhdGUuIElmIGFuIG9iamVjdCBpcyBzdXBwbGllZCBpbnN0ZWFkLCB5b3UgY2FuIHNwZWNpZnkgYVxuICogICAgIGN1c3RvbSB2YWx1ZSBmb3IgZWFjaCBldmVudC4gRm9yIGV4YW1wbGU6XG4gKiAgICAgYGBgXG4gKiAgICAgbmctbW9kZWwtb3B0aW9ucz1cIntcbiAqICAgICAgIHVwZGF0ZU9uOiAnZGVmYXVsdCBibHVyJyxcbiAqICAgICAgIGRlYm91bmNlOiB7ICdkZWZhdWx0JzogNTAwLCAnYmx1cic6IDAgfVxuICogICAgIH1cIlxuICogICAgIGBgYFxuICogICAgIFlvdSBjYW4gdXNlIHRoZSBgKmAga2V5IHRvIHNwZWNpZnkgYSBkZWJvdW5jZSB2YWx1ZSB0aGF0IGFwcGxpZXMgdG8gYWxsIGV2ZW50cyB0aGF0IGFyZSBub3RcbiAqICAgICBzcGVjaWZpY2FsbHkgbGlzdGVkLiBJbiB0aGUgZm9sbG93aW5nIGV4YW1wbGUsIGBtb3VzZXVwYCB3b3VsZCBoYXZlIGEgZGVib3VuY2UgZGVsYXkgb2YgMTAwMDpcbiAqICAgICBgYGBcbiAqICAgICBuZy1tb2RlbC1vcHRpb25zPVwie1xuICogICAgICAgdXBkYXRlT246ICdkZWZhdWx0IGJsdXIgbW91c2V1cCcsXG4gKiAgICAgICBkZWJvdW5jZTogeyAnZGVmYXVsdCc6IDUwMCwgJ2JsdXInOiAwLCAnKic6IDEwMDAgfVxuICogICAgIH1cIlxuICogICAgIGBgYFxuICogICAtIGBhbGxvd0ludmFsaWRgOiBib29sZWFuIHZhbHVlIHdoaWNoIGluZGljYXRlcyB0aGF0IHRoZSBtb2RlbCBjYW4gYmUgc2V0IHdpdGggdmFsdWVzIHRoYXQgZGlkXG4gKiAgICAgbm90IHZhbGlkYXRlIGNvcnJlY3RseSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHNldHRpbmcgdGhlIG1vZGVsIHRvIHVuZGVmaW5lZC5cbiAqICAgLSBgZ2V0dGVyU2V0dGVyYDogYm9vbGVhbiB2YWx1ZSB3aGljaCBkZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRvIHRyZWF0IGZ1bmN0aW9ucyBib3VuZCB0b1xuICogICAgIGBuZ01vZGVsYCBhcyBnZXR0ZXJzL3NldHRlcnMuXG4gKiAgIC0gYHRpbWV6b25lYDogRGVmaW5lcyB0aGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGZvclxuICogICAgIGA8aW5wdXQgdHlwZT1cImRhdGVcIiAvPmAsIGA8aW5wdXQgdHlwZT1cInRpbWVcIiAvPmAsIC4uLiAuIEl0IHVuZGVyc3RhbmRzIFVUQy9HTVQgYW5kIHRoZVxuICogICAgIGNvbnRpbmVudGFsIFVTIHRpbWUgem9uZSBhYmJyZXZpYXRpb25zLCBidXQgZm9yIGdlbmVyYWwgdXNlLCB1c2UgYSB0aW1lIHpvbmUgb2Zmc2V0LCBmb3JcbiAqICAgICBleGFtcGxlLCBgJyswNDMwJ2AgKDQgaG91cnMsIDMwIG1pbnV0ZXMgZWFzdCBvZiB0aGUgR3JlZW53aWNoIG1lcmlkaWFuKVxuICogICAgIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3NlciB3aWxsIGJlIHVzZWQuXG4gKiAgICAgTm90ZSB0aGF0IGNoYW5naW5nIHRoZSB0aW1lem9uZSB3aWxsIGhhdmUgbm8gZWZmZWN0IG9uIHRoZSBjdXJyZW50IGRhdGUsIGFuZCBpcyBvbmx5IGFwcGxpZWQgYWZ0ZXJcbiAqICAgICB0aGUgbmV4dCBpbnB1dCAvIG1vZGVsIGNoYW5nZS5cbiAqXG4gKi9cbnZhciBuZ01vZGVsT3B0aW9uc0RpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICBOZ01vZGVsT3B0aW9uc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJGF0dHJzJywgJyRzY29wZSddO1xuICBmdW5jdGlvbiBOZ01vZGVsT3B0aW9uc0NvbnRyb2xsZXIoJGF0dHJzLCAkc2NvcGUpIHtcbiAgICB0aGlzLiQkYXR0cnMgPSAkYXR0cnM7XG4gICAgdGhpcy4kJHNjb3BlID0gJHNjb3BlO1xuICB9XG4gIE5nTW9kZWxPcHRpb25zQ29udHJvbGxlci5wcm90b3R5cGUgPSB7XG4gICAgJG9uSW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyZW50T3B0aW9ucyA9IHRoaXMucGFyZW50Q3RybCA/IHRoaXMucGFyZW50Q3RybC4kb3B0aW9ucyA6IGRlZmF1bHRNb2RlbE9wdGlvbnM7XG4gICAgICB2YXIgbW9kZWxPcHRpb25zRGVmaW5pdGlvbiA9IHRoaXMuJCRzY29wZS4kZXZhbCh0aGlzLiQkYXR0cnMubmdNb2RlbE9wdGlvbnMpO1xuXG4gICAgICB0aGlzLiRvcHRpb25zID0gcGFyZW50T3B0aW9ucy5jcmVhdGVDaGlsZChtb2RlbE9wdGlvbnNEZWZpbml0aW9uKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIC8vIG5nTW9kZWxPcHRpb25zIG5lZWRzIHRvIHJ1biBiZWZvcmUgbmdNb2RlbCBhbmQgaW5wdXQgZGlyZWN0aXZlc1xuICAgIHByaW9yaXR5OiAxMCxcbiAgICByZXF1aXJlOiB7cGFyZW50Q3RybDogJz9eXm5nTW9kZWxPcHRpb25zJ30sXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICBjb250cm9sbGVyOiBOZ01vZGVsT3B0aW9uc0NvbnRyb2xsZXJcbiAgfTtcbn07XG5cblxuLy8gc2hhbGxvdyBjb3B5IG92ZXIgdmFsdWVzIGZyb20gYHNyY2AgdGhhdCBhcmUgbm90IGFscmVhZHkgc3BlY2lmaWVkIG9uIGBkc3RgXG5mdW5jdGlvbiBkZWZhdWx0cyhkc3QsIHNyYykge1xuICBmb3JFYWNoKHNyYywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIGlmICghaXNEZWZpbmVkKGRzdFtrZXldKSkge1xuICAgICAgZHN0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTm9uQmluZGFibGVcbiAqIEByZXN0cmljdCBBQ1xuICogQHByaW9yaXR5IDEwMDBcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ05vbkJpbmRhYmxlYCBkaXJlY3RpdmUgdGVsbHMgQW5ndWxhckpTIG5vdCB0byBjb21waWxlIG9yIGJpbmQgdGhlIGNvbnRlbnRzIG9mIHRoZSBjdXJyZW50XG4gKiBET00gZWxlbWVudCwgaW5jbHVkaW5nIGRpcmVjdGl2ZXMgb24gdGhlIGVsZW1lbnQgaXRzZWxmIHRoYXQgaGF2ZSBhIGxvd2VyIHByaW9yaXR5IHRoYW5cbiAqIGBuZ05vbkJpbmRhYmxlYC4gVGhpcyBpcyB1c2VmdWwgaWYgdGhlIGVsZW1lbnQgY29udGFpbnMgd2hhdCBhcHBlYXJzIHRvIGJlIEFuZ3VsYXJKUyBkaXJlY3RpdmVzXG4gKiBhbmQgYmluZGluZ3MgYnV0IHdoaWNoIHNob3VsZCBiZSBpZ25vcmVkIGJ5IEFuZ3VsYXJKUy4gVGhpcyBjb3VsZCBiZSB0aGUgY2FzZSBpZiB5b3UgaGF2ZSBhIHNpdGVcbiAqIHRoYXQgZGlzcGxheXMgc25pcHBldHMgb2YgY29kZSwgZm9yIGluc3RhbmNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBJbiB0aGlzIGV4YW1wbGUgdGhlcmUgYXJlIHR3byBsb2NhdGlvbnMgd2hlcmUgYSBzaW1wbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nIChge3t9fWApIGlzIHByZXNlbnQsXG4gKiBidXQgdGhlIG9uZSB3cmFwcGVkIGluIGBuZ05vbkJpbmRhYmxlYCBpcyBsZWZ0IGFsb25lLlxuICpcbiAgPGV4YW1wbGUgbmFtZT1cIm5nLW5vbi1iaW5kYWJsZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2Pk5vcm1hbDoge3sxICsgMn19PC9kaXY+XG4gICAgICA8ZGl2IG5nLW5vbi1iaW5kYWJsZT5JZ25vcmVkOiB7ezEgKyAyfX08L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLW5vbi1iaW5kYWJsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJzEgKyAyJykpLmdldFRleHQoKSkudG9Db250YWluKCczJyk7XG4gICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnZGl2JykpLmxhc3QoKS5nZXRUZXh0KCkpLnRvTWF0Y2goLzEgXFwrIDIvKTtcbiAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ05vbkJpbmRhYmxlRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoeyB0ZXJtaW5hbDogdHJ1ZSwgcHJpb3JpdHk6IDEwMDAgfSk7XG5cbi8qIGV4cG9ydGVkIG5nT3B0aW9uc0RpcmVjdGl2ZSAqL1xuXG4vKiBnbG9iYWwganFMaXRlUmVtb3ZlICovXG5cbnZhciBuZ09wdGlvbnNNaW5FcnIgPSBtaW5FcnIoJ25nT3B0aW9ucycpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nT3B0aW9uc1xuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgYG5nT3B0aW9uc2AgYXR0cmlidXRlIGNhbiBiZSB1c2VkIHRvIGR5bmFtaWNhbGx5IGdlbmVyYXRlIGEgbGlzdCBvZiBgPG9wdGlvbj5gXG4gKiBlbGVtZW50cyBmb3IgdGhlIGA8c2VsZWN0PmAgZWxlbWVudCB1c2luZyB0aGUgYXJyYXkgb3Igb2JqZWN0IG9idGFpbmVkIGJ5IGV2YWx1YXRpbmcgdGhlXG4gKiBgbmdPcHRpb25zYCBjb21wcmVoZW5zaW9uIGV4cHJlc3Npb24uXG4gKlxuICogSW4gbWFueSBjYXNlcywge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0gY2FuIGJlIHVzZWQgb24gYDxvcHRpb24+YCBlbGVtZW50cyBpbnN0ZWFkIG9mXG4gKiBgbmdPcHRpb25zYCB0byBhY2hpZXZlIGEgc2ltaWxhciByZXN1bHQuIEhvd2V2ZXIsIGBuZ09wdGlvbnNgIHByb3ZpZGVzIHNvbWUgYmVuZWZpdHM6XG4gKiAtIG1vcmUgZmxleGliaWxpdHkgaW4gaG93IHRoZSBgPHNlbGVjdD5gJ3MgbW9kZWwgaXMgYXNzaWduZWQgdmlhIHRoZSBgc2VsZWN0YCAqKmBhc2AqKiBwYXJ0IG9mIHRoZVxuICogY29tcHJlaGVuc2lvbiBleHByZXNzaW9uXG4gKiAtIHJlZHVjZWQgbWVtb3J5IGNvbnN1bXB0aW9uIGJ5IG5vdCBjcmVhdGluZyBhIG5ldyBzY29wZSBmb3IgZWFjaCByZXBlYXRlZCBpbnN0YW5jZVxuICogLSBpbmNyZWFzZWQgcmVuZGVyIHNwZWVkIGJ5IGNyZWF0aW5nIHRoZSBvcHRpb25zIGluIGEgZG9jdW1lbnRGcmFnbWVudCBpbnN0ZWFkIG9mIGluZGl2aWR1YWxseVxuICpcbiAqIFdoZW4gYW4gaXRlbSBpbiB0aGUgYDxzZWxlY3Q+YCBtZW51IGlzIHNlbGVjdGVkLCB0aGUgYXJyYXkgZWxlbWVudCBvciBvYmplY3QgcHJvcGVydHlcbiAqIHJlcHJlc2VudGVkIGJ5IHRoZSBzZWxlY3RlZCBvcHRpb24gd2lsbCBiZSBib3VuZCB0byB0aGUgbW9kZWwgaWRlbnRpZmllZCBieSB0aGUgYG5nTW9kZWxgXG4gKiBkaXJlY3RpdmUuXG4gKlxuICogT3B0aW9uYWxseSwgYSBzaW5nbGUgaGFyZC1jb2RlZCBgPG9wdGlvbj5gIGVsZW1lbnQsIHdpdGggdGhlIHZhbHVlIHNldCB0byBhbiBlbXB0eSBzdHJpbmcsIGNhblxuICogYmUgbmVzdGVkIGludG8gdGhlIGA8c2VsZWN0PmAgZWxlbWVudC4gVGhpcyBlbGVtZW50IHdpbGwgdGhlbiByZXByZXNlbnQgdGhlIGBudWxsYCBvciBcIm5vdCBzZWxlY3RlZFwiXG4gKiBvcHRpb24uIFNlZSBleGFtcGxlIGJlbG93IGZvciBkZW1vbnN0cmF0aW9uLlxuICpcbiAqICMjIENvbXBsZXggTW9kZWxzIChvYmplY3RzIG9yIGNvbGxlY3Rpb25zKVxuICpcbiAqIEJ5IGRlZmF1bHQsIGBuZ01vZGVsYCB3YXRjaGVzIHRoZSBtb2RlbCBieSByZWZlcmVuY2UsIG5vdCB2YWx1ZS4gVGhpcyBpcyBpbXBvcnRhbnQgdG8ga25vdyB3aGVuXG4gKiBiaW5kaW5nIHRoZSBzZWxlY3QgdG8gYSBtb2RlbCB0aGF0IGlzIGFuIG9iamVjdCBvciBhIGNvbGxlY3Rpb24uXG4gKlxuICogT25lIGlzc3VlIG9jY3VycyBpZiB5b3Ugd2FudCB0byBwcmVzZWxlY3QgYW4gb3B0aW9uLiBGb3IgZXhhbXBsZSwgaWYgeW91IHNldFxuICogdGhlIG1vZGVsIHRvIGFuIG9iamVjdCB0aGF0IGlzIGVxdWFsIHRvIGFuIG9iamVjdCBpbiB5b3VyIGNvbGxlY3Rpb24sIGBuZ09wdGlvbnNgIHdvbid0IGJlIGFibGUgdG8gc2V0IHRoZSBzZWxlY3Rpb24sXG4gKiBiZWNhdXNlIHRoZSBvYmplY3RzIGFyZSBub3QgaWRlbnRpY2FsLiBTbyBieSBkZWZhdWx0LCB5b3Ugc2hvdWxkIGFsd2F5cyByZWZlcmVuY2UgdGhlIGl0ZW0gaW4geW91ciBjb2xsZWN0aW9uXG4gKiBmb3IgcHJlc2VsZWN0aW9ucywgZS5nLjogYCRzY29wZS5zZWxlY3RlZCA9ICRzY29wZS5jb2xsZWN0aW9uWzNdYC5cbiAqXG4gKiBBbm90aGVyIHNvbHV0aW9uIGlzIHRvIHVzZSBhIGB0cmFjayBieWAgY2xhdXNlLCBiZWNhdXNlIHRoZW4gYG5nT3B0aW9uc2Agd2lsbCB0cmFjayB0aGUgaWRlbnRpdHlcbiAqIG9mIHRoZSBpdGVtIG5vdCBieSByZWZlcmVuY2UsIGJ1dCBieSB0aGUgcmVzdWx0IG9mIHRoZSBgdHJhY2sgYnlgIGV4cHJlc3Npb24uIEZvciBleGFtcGxlLCBpZiB5b3VyXG4gKiBjb2xsZWN0aW9uIGl0ZW1zIGhhdmUgYW4gaWQgcHJvcGVydHksIHlvdSB3b3VsZCBgdHJhY2sgYnkgaXRlbS5pZGAuXG4gKlxuICogQSBkaWZmZXJlbnQgaXNzdWUgd2l0aCBvYmplY3RzIG9yIGNvbGxlY3Rpb25zIGlzIHRoYXQgbmdNb2RlbCB3b24ndCBkZXRlY3QgaWYgYW4gb2JqZWN0IHByb3BlcnR5IG9yXG4gKiBhIGNvbGxlY3Rpb24gaXRlbSBjaGFuZ2VzLiBGb3IgdGhhdCByZWFzb24sIGBuZ09wdGlvbnNgIGFkZGl0aW9uYWxseSB3YXRjaGVzIHRoZSBtb2RlbCB1c2luZ1xuICogYCR3YXRjaENvbGxlY3Rpb25gLCB3aGVuIHRoZSBleHByZXNzaW9uIGNvbnRhaW5zIGEgYHRyYWNrIGJ5YCBjbGF1c2Ugb3IgdGhlIHRoZSBzZWxlY3QgaGFzIHRoZSBgbXVsdGlwbGVgIGF0dHJpYnV0ZS5cbiAqIFRoaXMgYWxsb3dzIG5nT3B0aW9ucyB0byB0cmlnZ2VyIGEgcmUtcmVuZGVyaW5nIG9mIHRoZSBvcHRpb25zIGV2ZW4gaWYgdGhlIGFjdHVhbCBvYmplY3QvY29sbGVjdGlvblxuICogaGFzIG5vdCBjaGFuZ2VkIGlkZW50aXR5LCBidXQgb25seSBhIHByb3BlcnR5IG9uIHRoZSBvYmplY3Qgb3IgYW4gaXRlbSBpbiB0aGUgY29sbGVjdGlvbiBjaGFuZ2VzLlxuICpcbiAqIE5vdGUgdGhhdCBgJHdhdGNoQ29sbGVjdGlvbmAgZG9lcyBhIHNoYWxsb3cgY29tcGFyaXNvbiBvZiB0aGUgcHJvcGVydGllcyBvZiB0aGUgb2JqZWN0IChvciB0aGUgaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb25cbiAqIGlmIHRoZSBtb2RlbCBpcyBhbiBhcnJheSkuIFRoaXMgbWVhbnMgdGhhdCBjaGFuZ2luZyBhIHByb3BlcnR5IGRlZXBlciB0aGFuIHRoZSBmaXJzdCBsZXZlbCBpbnNpZGUgdGhlXG4gKiBvYmplY3QvY29sbGVjdGlvbiB3aWxsIG5vdCB0cmlnZ2VyIGEgcmUtcmVuZGVyaW5nLlxuICpcbiAqICMjIGBzZWxlY3RgICoqYGFzYCoqXG4gKlxuICogVXNpbmcgYHNlbGVjdGAgKipgYXNgKiogd2lsbCBiaW5kIHRoZSByZXN1bHQgb2YgdGhlIGBzZWxlY3RgIGV4cHJlc3Npb24gdG8gdGhlIG1vZGVsLCBidXRcbiAqIHRoZSB2YWx1ZSBvZiB0aGUgYDxzZWxlY3Q+YCBhbmQgYDxvcHRpb24+YCBodG1sIGVsZW1lbnRzIHdpbGwgYmUgZWl0aGVyIHRoZSBpbmRleCAoZm9yIGFycmF5IGRhdGEgc291cmNlcylcbiAqIG9yIHByb3BlcnR5IG5hbWUgKGZvciBvYmplY3QgZGF0YSBzb3VyY2VzKSBvZiB0aGUgdmFsdWUgd2l0aGluIHRoZSBjb2xsZWN0aW9uLiBJZiBhICoqYHRyYWNrIGJ5YCoqIGV4cHJlc3Npb25cbiAqIGlzIHVzZWQsIHRoZSByZXN1bHQgb2YgdGhhdCBleHByZXNzaW9uIHdpbGwgYmUgc2V0IGFzIHRoZSB2YWx1ZSBvZiB0aGUgYG9wdGlvbmAgYW5kIGBzZWxlY3RgIGVsZW1lbnRzLlxuICpcbiAqXG4gKiAjIyMgYHNlbGVjdGAgKipgYXNgKiogYW5kICoqYHRyYWNrIGJ5YCoqXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqIEJlIGNhcmVmdWwgd2hlbiB1c2luZyBgc2VsZWN0YCAqKmBhc2AqKiBhbmQgKipgdHJhY2sgYnlgKiogaW4gdGhlIHNhbWUgZXhwcmVzc2lvbi5cbiAqIDwvZGl2PlxuICpcbiAqIEdpdmVuIHRoaXMgYXJyYXkgb2YgaXRlbXMgb24gdGhlICRzY29wZTpcbiAqXG4gKiBgYGBqc1xuICogJHNjb3BlLml0ZW1zID0gW3tcbiAqICAgaWQ6IDEsXG4gKiAgIGxhYmVsOiAnYUxhYmVsJyxcbiAqICAgc3ViSXRlbTogeyBuYW1lOiAnYVN1Ykl0ZW0nIH1cbiAqIH0sIHtcbiAqICAgaWQ6IDIsXG4gKiAgIGxhYmVsOiAnYkxhYmVsJyxcbiAqICAgc3ViSXRlbTogeyBuYW1lOiAnYlN1Ykl0ZW0nIH1cbiAqIH1dO1xuICogYGBgXG4gKlxuICogVGhpcyB3aWxsIHdvcms6XG4gKlxuICogYGBgaHRtbFxuICogPHNlbGVjdCBuZy1vcHRpb25zPVwiaXRlbSBhcyBpdGVtLmxhYmVsIGZvciBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5IGl0ZW0uaWRcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCI+PC9zZWxlY3Q+XG4gKiBgYGBcbiAqIGBgYGpzXG4gKiAkc2NvcGUuc2VsZWN0ZWQgPSAkc2NvcGUuaXRlbXNbMF07XG4gKiBgYGBcbiAqXG4gKiBidXQgdGhpcyB3aWxsIG5vdCB3b3JrOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxzZWxlY3Qgbmctb3B0aW9ucz1cIml0ZW0uc3ViSXRlbSBhcyBpdGVtLmxhYmVsIGZvciBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5IGl0ZW0uaWRcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCI+PC9zZWxlY3Q+XG4gKiBgYGBcbiAqIGBgYGpzXG4gKiAkc2NvcGUuc2VsZWN0ZWQgPSAkc2NvcGUuaXRlbXNbMF0uc3ViSXRlbTtcbiAqIGBgYFxuICpcbiAqIEluIGJvdGggZXhhbXBsZXMsIHRoZSAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uIGlzIGFwcGxpZWQgc3VjY2Vzc2Z1bGx5IHRvIGVhY2ggYGl0ZW1gIGluIHRoZVxuICogYGl0ZW1zYCBhcnJheS4gQmVjYXVzZSB0aGUgc2VsZWN0ZWQgb3B0aW9uIGhhcyBiZWVuIHNldCBwcm9ncmFtbWF0aWNhbGx5IGluIHRoZSBjb250cm9sbGVyLCB0aGVcbiAqICoqYHRyYWNrIGJ5YCoqIGV4cHJlc3Npb24gaXMgYWxzbyBhcHBsaWVkIHRvIHRoZSBgbmdNb2RlbGAgdmFsdWUuIEluIHRoZSBmaXJzdCBleGFtcGxlLCB0aGVcbiAqIGBuZ01vZGVsYCB2YWx1ZSBpcyBgaXRlbXNbMF1gIGFuZCB0aGUgKipgdHJhY2sgYnlgKiogZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYGl0ZW1zWzBdLmlkYCB3aXRoXG4gKiBubyBpc3N1ZS4gSW4gdGhlIHNlY29uZCBleGFtcGxlLCB0aGUgYG5nTW9kZWxgIHZhbHVlIGlzIGBpdGVtc1swXS5zdWJJdGVtYCBhbmQgdGhlICoqYHRyYWNrIGJ5YCoqXG4gKiBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBgaXRlbXNbMF0uc3ViSXRlbS5pZGAgKHdoaWNoIGlzIHVuZGVmaW5lZCkuIEFzIGEgcmVzdWx0LCB0aGUgbW9kZWwgdmFsdWVcbiAqIGlzIG5vdCBtYXRjaGVkIGFnYWluc3QgYW55IGA8b3B0aW9uPmAgYW5kIHRoZSBgPHNlbGVjdD5gIGFwcGVhcnMgYXMgaGF2aW5nIG5vIHNlbGVjdGVkIHZhbHVlLlxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAqIEBwYXJhbSB7Y29tcHJlaGVuc2lvbl9leHByZXNzaW9ufSBuZ09wdGlvbnMgaW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgZm9ybXM6XG4gKlxuICogICAqIGZvciBhcnJheSBkYXRhIHNvdXJjZXM6XG4gKiAgICAgKiBgbGFiZWxgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWBcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxuICogICAgICogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWBcbiAqICAgICAqIGBsYWJlbGAgKipgZGlzYWJsZSB3aGVuYCoqIGBkaXNhYmxlYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXG4gKiAgICAgKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YCAqKmB0cmFjayBieWAqKiBgdHJhY2tleHByYFxuICogICAgICogYGxhYmVsYCAqKmBkaXNhYmxlIHdoZW5gKiogYGRpc2FibGVgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWAgKipgdHJhY2sgYnlgKiogYHRyYWNrZXhwcmBcbiAqICAgICAqIGBsYWJlbGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YCB8IG9yZGVyQnk6YG9yZGVyZXhwcmAgKipgdHJhY2sgYnlgKiogYHRyYWNrZXhwcmBcbiAqICAgICAgICAoZm9yIGluY2x1ZGluZyBhIGZpbHRlciB3aXRoIGB0cmFjayBieWApXG4gKiAgICogZm9yIG9iamVjdCBkYXRhIHNvdXJjZXM6XG4gKiAgICAgKiBgbGFiZWxgICoqYGZvciAoYCoqYGtleWAgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBmb3IgKGAqKmBrZXlgICoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYCAqKmBmb3IgKGAqKmBrZXlgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICogICAgICogYGxhYmVsYCAqKmBkaXNhYmxlIHdoZW5gKiogYGRpc2FibGVgICoqYGZvciAoYCoqYGtleWAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXG4gKiAgICAgKiBgc2VsZWN0YCAqKmBhc2AqKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGBcbiAqICAgICAgICAgKipgZm9yYCBgKGAqKmBrZXlgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBkaXNhYmxlIHdoZW5gKiogYGRpc2FibGVgXG4gKiAgICAgICAgICoqYGZvcmAgYChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqXG4gKiBXaGVyZTpcbiAqXG4gKiAgICogYGFycmF5YCAvIGBvYmplY3RgOiBhbiBleHByZXNzaW9uIHdoaWNoIGV2YWx1YXRlcyB0byBhbiBhcnJheSAvIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiAgICogYHZhbHVlYDogbG9jYWwgdmFyaWFibGUgd2hpY2ggd2lsbCByZWZlciB0byBlYWNoIGl0ZW0gaW4gdGhlIGBhcnJheWAgb3IgZWFjaCBwcm9wZXJ0eSB2YWx1ZVxuICogICAgICBvZiBgb2JqZWN0YCBkdXJpbmcgaXRlcmF0aW9uLlxuICogICAqIGBrZXlgOiBsb2NhbCB2YXJpYWJsZSB3aGljaCB3aWxsIHJlZmVyIHRvIGEgcHJvcGVydHkgbmFtZSBpbiBgb2JqZWN0YCBkdXJpbmcgaXRlcmF0aW9uLlxuICogICAqIGBsYWJlbGA6IFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmUgdGhlIGxhYmVsIGZvciBgPG9wdGlvbj5gIGVsZW1lbnQuIFRoZVxuICogICAgIGBleHByZXNzaW9uYCB3aWxsIG1vc3QgbGlrZWx5IHJlZmVyIHRvIHRoZSBgdmFsdWVgIHZhcmlhYmxlIChlLmcuIGB2YWx1ZS5wcm9wZXJ0eU5hbWVgKS5cbiAqICAgKiBgc2VsZWN0YDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSBib3VuZCB0byB0aGUgbW9kZWwgb2YgdGhlIHBhcmVudCBgPHNlbGVjdD5gXG4gKiAgICAgIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQsIGBzZWxlY3RgIGV4cHJlc3Npb24gd2lsbCBkZWZhdWx0IHRvIGB2YWx1ZWAuXG4gKiAgICogYGdyb3VwYDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSB1c2VkIHRvIGdyb3VwIG9wdGlvbnMgdXNpbmcgdGhlIGA8b3B0Z3JvdXA+YFxuICogICAgICBET00gZWxlbWVudC5cbiAqICAgKiBgZGlzYWJsZWA6IFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmUgdXNlZCB0byBkaXNhYmxlIHRoZSByZW5kZXJlZCBgPG9wdGlvbj5gXG4gKiAgICAgIGVsZW1lbnQuIFJldHVybiBgdHJ1ZWAgdG8gZGlzYWJsZS5cbiAqICAgKiBgdHJhY2tleHByYDogVXNlZCB3aGVuIHdvcmtpbmcgd2l0aCBhbiBhcnJheSBvZiBvYmplY3RzLiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlXG4gKiAgICAgIHVzZWQgdG8gaWRlbnRpZnkgdGhlIG9iamVjdHMgaW4gdGhlIGFycmF5LiBUaGUgYHRyYWNrZXhwcmAgd2lsbCBtb3N0IGxpa2VseSByZWZlciB0byB0aGVcbiAqICAgICBgdmFsdWVgIHZhcmlhYmxlIChlLmcuIGB2YWx1ZS5wcm9wZXJ0eU5hbWVgKS4gV2l0aCB0aGlzIHRoZSBzZWxlY3Rpb24gaXMgcHJlc2VydmVkXG4gKiAgICAgIGV2ZW4gd2hlbiB0aGUgb3B0aW9ucyBhcmUgcmVjcmVhdGVkIChlLmcuIHJlbG9hZGVkIGZyb20gdGhlIHNlcnZlcikuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFRoZSBjb250cm9sIGlzIGNvbnNpZGVyZWQgdmFsaWQgb25seSBpZiB2YWx1ZSBpcyBlbnRlcmVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQXR0clNpemUgc2V0cyB0aGUgc2l6ZSBvZiB0aGUgc2VsZWN0IGVsZW1lbnQgZHluYW1pY2FsbHkuIFVzZXMgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiMtbmdhdHRyLWZvci1iaW5kaW5nLXRvLWFyYml0cmFyeS1hdHRyaWJ1dGVzIG5nQXR0cn0gZGlyZWN0aXZlLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbW9kdWxlPVwic2VsZWN0RXhhbXBsZVwiIG5hbWU9XCJzZWxlY3RcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxzY3JpcHQ+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdzZWxlY3RFeGFtcGxlJywgW10pXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5jb2xvcnMgPSBbXG4gICAgICAgICAgICAgIHtuYW1lOidibGFjaycsIHNoYWRlOidkYXJrJ30sXG4gICAgICAgICAgICAgIHtuYW1lOid3aGl0ZScsIHNoYWRlOidsaWdodCcsIG5vdEFuT3B0aW9uOiB0cnVlfSxcbiAgICAgICAgICAgICAge25hbWU6J3JlZCcsIHNoYWRlOidkYXJrJ30sXG4gICAgICAgICAgICAgIHtuYW1lOidibHVlJywgc2hhZGU6J2RhcmsnLCBub3RBbk9wdGlvbjogdHJ1ZX0sXG4gICAgICAgICAgICAgIHtuYW1lOid5ZWxsb3cnLCBzaGFkZTonbGlnaHQnLCBub3RBbk9wdGlvbjogZmFsc2V9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgJHNjb3BlLm15Q29sb3IgPSAkc2NvcGUuY29sb3JzWzJdOyAvLyByZWRcbiAgICAgICAgICB9XSk7XG4gICAgICAgIDwvc2NyaXB0PlxuICAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJjb2xvciBpbiBjb2xvcnNcIj5cbiAgICAgICAgICAgICAgPGxhYmVsPk5hbWU6IDxpbnB1dCBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIj48L2xhYmVsPlxuICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY29sb3Iubm90QW5PcHRpb25cIj4gRGlzYWJsZWQ/PC9sYWJlbD5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvbG9ycy5zcGxpY2UoJGluZGV4LCAxKVwiIGFyaWEtbGFiZWw9XCJSZW1vdmVcIj5YPC9idXR0b24+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY29sb3JzLnB1c2goe30pXCI+YWRkPC9idXR0b24+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPGhyLz5cbiAgICAgICAgICA8bGFiZWw+Q29sb3IgKG51bGwgbm90IGFsbG93ZWQpOlxuICAgICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm15Q29sb3JcIiBuZy1vcHRpb25zPVwiY29sb3IubmFtZSBmb3IgY29sb3IgaW4gY29sb3JzXCI+PC9zZWxlY3Q+XG4gICAgICAgICAgPC9sYWJlbD48YnIvPlxuICAgICAgICAgIDxsYWJlbD5Db2xvciAobnVsbCBhbGxvd2VkKTpcbiAgICAgICAgICA8c3BhbiAgY2xhc3M9XCJudWxsYWJsZVwiPlxuICAgICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm15Q29sb3JcIiBuZy1vcHRpb25zPVwiY29sb3IubmFtZSBmb3IgY29sb3IgaW4gY29sb3JzXCI+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj4tLSBjaG9vc2UgY29sb3IgLS08L29wdGlvbj5cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgIDwvc3Bhbj48L2xhYmVsPjxici8+XG5cbiAgICAgICAgICA8bGFiZWw+Q29sb3IgZ3JvdXBlZCBieSBzaGFkZTpcbiAgICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZ3JvdXAgYnkgY29sb3Iuc2hhZGUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPlxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPC9sYWJlbD48YnIvPlxuXG4gICAgICAgICAgPGxhYmVsPkNvbG9yIGdyb3VwZWQgYnkgc2hhZGUsIHdpdGggc29tZSBkaXNhYmxlZDpcbiAgICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCJcbiAgICAgICAgICAgICAgICAgIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGdyb3VwIGJ5IGNvbG9yLnNoYWRlIGRpc2FibGUgd2hlbiBjb2xvci5ub3RBbk9wdGlvbiBmb3IgY29sb3IgaW4gY29sb3JzXCI+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA8L2xhYmVsPjxici8+XG5cblxuXG4gICAgICAgICAgU2VsZWN0IDxidXR0b24gbmctY2xpY2s9XCJteUNvbG9yID0geyBuYW1lOidub3QgaW4gbGlzdCcsIHNoYWRlOiAnb3RoZXInIH1cIj5ib2d1czwvYnV0dG9uPi5cbiAgICAgICAgICA8YnIvPlxuICAgICAgICAgIDxoci8+XG4gICAgICAgICAgQ3VycmVudGx5IHNlbGVjdGVkOiB7eyB7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0gfX1cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyOnNvbGlkIDFweCBibGFjazsgaGVpZ2h0OjIwcHhcIlxuICAgICAgICAgICAgICAgbmctc3R5bGU9XCJ7J2JhY2tncm91bmQtY29sb3InOm15Q29sb3IubmFtZX1cIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLW9wdGlvbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygne3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9JykpLmdldFRleHQoKSkudG9NYXRjaCgncmVkJyk7XG4gICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5Lm1vZGVsKCdteUNvbG9yJykpLmZpcnN0KCkuY2xpY2soKTtcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkuY3NzKCdzZWxlY3RbbmctbW9kZWw9XCJteUNvbG9yXCJdIG9wdGlvbicpKS5maXJzdCgpLmNsaWNrKCk7XG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3tzZWxlY3RlZF9jb2xvcjpteUNvbG9yfScpKS5nZXRUZXh0KCkpLnRvTWF0Y2goJ2JsYWNrJyk7XG4gICAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcubnVsbGFibGUgc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXScpKS5jbGljaygpO1xuICAgICAgICAgICBlbGVtZW50LmFsbChieS5jc3MoJy5udWxsYWJsZSBzZWxlY3RbbmctbW9kZWw9XCJteUNvbG9yXCJdIG9wdGlvbicpKS5maXJzdCgpLmNsaWNrKCk7XG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3tzZWxlY3RlZF9jb2xvcjpteUNvbG9yfScpKS5nZXRUZXh0KCkpLnRvTWF0Y2goJ251bGwnKTtcbiAgICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG4vLyAgICAgICAgICAgICAgICAgICAgIC8vMDAwMDExMTExMTExMTEwMDAwMDAwMDAwMDIyMjIyMjIyMjIwMDAwMDAwMDAwMDAwMDAwMDAwMDAzMzMzMzMzMzMzMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0MDAwMDAwMDAwMDAwMDU1NTU1NTU1NTU1NTUwMDAwMDAwMDA2NjY2NjY2NjY2NjY2MDAwMDAwMDc3Nzc3Nzc3Nzc3NzcwMDAwMDAwMDAwMDAwMDA4ODg4ODg4ODg4MDAwMDAwMDAwMDAwMDAwMDAwMDk5OTk5OTk5OTlcbnZhciBOR19PUFRJT05TX1JFR0VYUCA9IC9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccytncm91cFxccytieVxccysoW1xcc1xcU10rPykpPyg/OlxccytkaXNhYmxlXFxzK3doZW5cXHMrKFtcXHNcXFNdKz8pKT9cXHMrZm9yXFxzKyg/OihbJFxcd11bJFxcd10qKXwoPzpcXChcXHMqKFskXFx3XVskXFx3XSopXFxzKixcXHMqKFskXFx3XVskXFx3XSopXFxzKlxcKSkpXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpPyQvO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTogdmFsdWUgZXhwcmVzc2lvbiAodmFsdWVGbilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDI6IGxhYmVsIGV4cHJlc3Npb24gKGRpc3BsYXlGbilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDM6IGdyb3VwIGJ5IGV4cHJlc3Npb24gKGdyb3VwQnlGbilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDQ6IGRpc2FibGUgd2hlbiBleHByZXNzaW9uIChkaXNhYmxlV2hlbkZuKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gNTogYXJyYXkgaXRlbSB2YXJpYWJsZSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA2OiBvYmplY3QgaXRlbSBrZXkgdmFyaWFibGUgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gNzogb2JqZWN0IGl0ZW0gdmFsdWUgdmFyaWFibGUgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gODogY29sbGVjdGlvbiBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA5OiB0cmFjayBieSBleHByZXNzaW9uXG4vKiBlc2xpbnQtZW5hYmxlICovXG5cblxudmFyIG5nT3B0aW9uc0RpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLCAnJGRvY3VtZW50JywgJyRwYXJzZScsIGZ1bmN0aW9uKCRjb21waWxlLCAkZG9jdW1lbnQsICRwYXJzZSkge1xuXG4gIGZ1bmN0aW9uIHBhcnNlT3B0aW9uc0V4cHJlc3Npb24ob3B0aW9uc0V4cCwgc2VsZWN0RWxlbWVudCwgc2NvcGUpIHtcblxuICAgIHZhciBtYXRjaCA9IG9wdGlvbnNFeHAubWF0Y2goTkdfT1BUSU9OU19SRUdFWFApO1xuICAgIGlmICghKG1hdGNoKSkge1xuICAgICAgdGhyb3cgbmdPcHRpb25zTWluRXJyKCdpZXhwJyxcbiAgICAgICAgJ0V4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiAnICtcbiAgICAgICAgJ1xcJ19zZWxlY3RfIChhcyBfbGFiZWxfKT8gZm9yIChfa2V5XywpP192YWx1ZV8gaW4gX2NvbGxlY3Rpb25fXFwnJyArXG4gICAgICAgICcgYnV0IGdvdCBcXCd7MH1cXCcuIEVsZW1lbnQ6IHsxfScsXG4gICAgICAgIG9wdGlvbnNFeHAsIHN0YXJ0aW5nVGFnKHNlbGVjdEVsZW1lbnQpKTtcbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IHRoZSBwYXJ0cyBmcm9tIHRoZSBuZ09wdGlvbnMgZXhwcmVzc2lvblxuXG4gICAgLy8gVGhlIHZhcmlhYmxlIG5hbWUgZm9yIHRoZSB2YWx1ZSBvZiB0aGUgaXRlbSBpbiB0aGUgY29sbGVjdGlvblxuICAgIHZhciB2YWx1ZU5hbWUgPSBtYXRjaFs1XSB8fCBtYXRjaFs3XTtcbiAgICAvLyBUaGUgdmFyaWFibGUgbmFtZSBmb3IgdGhlIGtleSBvZiB0aGUgaXRlbSBpbiB0aGUgY29sbGVjdGlvblxuICAgIHZhciBrZXlOYW1lID0gbWF0Y2hbNl07XG5cbiAgICAvLyBBbiBleHByZXNzaW9uIHRoYXQgZ2VuZXJhdGVzIHRoZSB2aWV3VmFsdWUgZm9yIGFuIG9wdGlvbiBpZiB0aGVyZSBpcyBhIGxhYmVsIGV4cHJlc3Npb25cbiAgICB2YXIgc2VsZWN0QXMgPSAvIGFzIC8udGVzdChtYXRjaFswXSkgJiYgbWF0Y2hbMV07XG4gICAgLy8gQW4gZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgdG8gdHJhY2sgdGhlIGlkIG9mIGVhY2ggb2JqZWN0IGluIHRoZSBvcHRpb25zIGNvbGxlY3Rpb25cbiAgICB2YXIgdHJhY2tCeSA9IG1hdGNoWzldO1xuICAgIC8vIEFuIGV4cHJlc3Npb24gdGhhdCBnZW5lcmF0ZXMgdGhlIHZpZXdWYWx1ZSBmb3IgYW4gb3B0aW9uIGlmIHRoZXJlIGlzIG5vIGxhYmVsIGV4cHJlc3Npb25cbiAgICB2YXIgdmFsdWVGbiA9ICRwYXJzZShtYXRjaFsyXSA/IG1hdGNoWzFdIDogdmFsdWVOYW1lKTtcbiAgICB2YXIgc2VsZWN0QXNGbiA9IHNlbGVjdEFzICYmICRwYXJzZShzZWxlY3RBcyk7XG4gICAgdmFyIHZpZXdWYWx1ZUZuID0gc2VsZWN0QXNGbiB8fCB2YWx1ZUZuO1xuICAgIHZhciB0cmFja0J5Rm4gPSB0cmFja0J5ICYmICRwYXJzZSh0cmFja0J5KTtcblxuICAgIC8vIEdldCB0aGUgdmFsdWUgYnkgd2hpY2ggd2UgYXJlIGdvaW5nIHRvIHRyYWNrIHRoZSBvcHRpb25cbiAgICAvLyBpZiB3ZSBoYXZlIGEgdHJhY2tGbiB0aGVuIHVzZSB0aGF0IChwYXNzaW5nIHNjb3BlIGFuZCBsb2NhbHMpXG4gICAgLy8gb3RoZXJ3aXNlIGp1c3QgaGFzaCB0aGUgZ2l2ZW4gdmlld1ZhbHVlXG4gICAgdmFyIGdldFRyYWNrQnlWYWx1ZUZuID0gdHJhY2tCeSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih2YWx1ZSwgbG9jYWxzKSB7IHJldHVybiB0cmFja0J5Rm4oc2NvcGUsIGxvY2Fscyk7IH0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0SGFzaE9mVmFsdWUodmFsdWUpIHsgcmV0dXJuIGhhc2hLZXkodmFsdWUpOyB9O1xuICAgIHZhciBnZXRUcmFja0J5VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICByZXR1cm4gZ2V0VHJhY2tCeVZhbHVlRm4odmFsdWUsIGdldExvY2Fscyh2YWx1ZSwga2V5KSk7XG4gICAgfTtcblxuICAgIHZhciBkaXNwbGF5Rm4gPSAkcGFyc2UobWF0Y2hbMl0gfHwgbWF0Y2hbMV0pO1xuICAgIHZhciBncm91cEJ5Rm4gPSAkcGFyc2UobWF0Y2hbM10gfHwgJycpO1xuICAgIHZhciBkaXNhYmxlV2hlbkZuID0gJHBhcnNlKG1hdGNoWzRdIHx8ICcnKTtcbiAgICB2YXIgdmFsdWVzRm4gPSAkcGFyc2UobWF0Y2hbOF0pO1xuXG4gICAgdmFyIGxvY2FscyA9IHt9O1xuICAgIHZhciBnZXRMb2NhbHMgPSBrZXlOYW1lID8gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgbG9jYWxzW2tleU5hbWVdID0ga2V5O1xuICAgICAgbG9jYWxzW3ZhbHVlTmFtZV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBsb2NhbHM7XG4gICAgfSA6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIGxvY2FscztcbiAgICB9O1xuXG5cbiAgICBmdW5jdGlvbiBPcHRpb24oc2VsZWN0VmFsdWUsIHZpZXdWYWx1ZSwgbGFiZWwsIGdyb3VwLCBkaXNhYmxlZCkge1xuICAgICAgdGhpcy5zZWxlY3RWYWx1ZSA9IHNlbGVjdFZhbHVlO1xuICAgICAgdGhpcy52aWV3VmFsdWUgPSB2aWV3VmFsdWU7XG4gICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XG4gICAgICB0aGlzLmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0T3B0aW9uVmFsdWVzS2V5cyhvcHRpb25WYWx1ZXMpIHtcbiAgICAgIHZhciBvcHRpb25WYWx1ZXNLZXlzO1xuXG4gICAgICBpZiAoIWtleU5hbWUgJiYgaXNBcnJheUxpa2Uob3B0aW9uVmFsdWVzKSkge1xuICAgICAgICBvcHRpb25WYWx1ZXNLZXlzID0gb3B0aW9uVmFsdWVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWYgb2JqZWN0LCBleHRyYWN0IGtleXMsIGluIGVudW1lcmF0aW9uIG9yZGVyLCB1bnNvcnRlZFxuICAgICAgICBvcHRpb25WYWx1ZXNLZXlzID0gW107XG4gICAgICAgIGZvciAodmFyIGl0ZW1LZXkgaW4gb3B0aW9uVmFsdWVzKSB7XG4gICAgICAgICAgaWYgKG9wdGlvblZhbHVlcy5oYXNPd25Qcm9wZXJ0eShpdGVtS2V5KSAmJiBpdGVtS2V5LmNoYXJBdCgwKSAhPT0gJyQnKSB7XG4gICAgICAgICAgICBvcHRpb25WYWx1ZXNLZXlzLnB1c2goaXRlbUtleSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3B0aW9uVmFsdWVzS2V5cztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHJhY2tCeTogdHJhY2tCeSxcbiAgICAgIGdldFRyYWNrQnlWYWx1ZTogZ2V0VHJhY2tCeVZhbHVlLFxuICAgICAgZ2V0V2F0Y2hhYmxlczogJHBhcnNlKHZhbHVlc0ZuLCBmdW5jdGlvbihvcHRpb25WYWx1ZXMpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgY29sbGVjdGlvbiBvZiB0aGluZ3MgdGhhdCB3ZSB3b3VsZCBsaWtlIHRvIHdhdGNoICh3YXRjaGVkQXJyYXkpXG4gICAgICAgIC8vIHNvIHRoYXQgdGhleSBjYW4gYWxsIGJlIHdhdGNoZWQgdXNpbmcgYSBzaW5nbGUgJHdhdGNoQ29sbGVjdGlvblxuICAgICAgICAvLyB0aGF0IG9ubHkgcnVucyB0aGUgaGFuZGxlciBvbmNlIGlmIGFueXRoaW5nIGNoYW5nZXNcbiAgICAgICAgdmFyIHdhdGNoZWRBcnJheSA9IFtdO1xuICAgICAgICBvcHRpb25WYWx1ZXMgPSBvcHRpb25WYWx1ZXMgfHwgW107XG5cbiAgICAgICAgdmFyIG9wdGlvblZhbHVlc0tleXMgPSBnZXRPcHRpb25WYWx1ZXNLZXlzKG9wdGlvblZhbHVlcyk7XG4gICAgICAgIHZhciBvcHRpb25WYWx1ZXNMZW5ndGggPSBvcHRpb25WYWx1ZXNLZXlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvblZhbHVlc0xlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIHZhciBrZXkgPSAob3B0aW9uVmFsdWVzID09PSBvcHRpb25WYWx1ZXNLZXlzKSA/IGluZGV4IDogb3B0aW9uVmFsdWVzS2V5c1tpbmRleF07XG4gICAgICAgICAgdmFyIHZhbHVlID0gb3B0aW9uVmFsdWVzW2tleV07XG5cbiAgICAgICAgICB2YXIgbG9jYWxzID0gZ2V0TG9jYWxzKHZhbHVlLCBrZXkpO1xuICAgICAgICAgIHZhciBzZWxlY3RWYWx1ZSA9IGdldFRyYWNrQnlWYWx1ZUZuKHZhbHVlLCBsb2NhbHMpO1xuICAgICAgICAgIHdhdGNoZWRBcnJheS5wdXNoKHNlbGVjdFZhbHVlKTtcblxuICAgICAgICAgIC8vIE9ubHkgbmVlZCB0byB3YXRjaCB0aGUgZGlzcGxheUZuIGlmIHRoZXJlIGlzIGEgc3BlY2lmaWMgbGFiZWwgZXhwcmVzc2lvblxuICAgICAgICAgIGlmIChtYXRjaFsyXSB8fCBtYXRjaFsxXSkge1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gZGlzcGxheUZuKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgICAgd2F0Y2hlZEFycmF5LnB1c2gobGFiZWwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE9ubHkgbmVlZCB0byB3YXRjaCB0aGUgZGlzYWJsZVdoZW5GbiBpZiB0aGVyZSBpcyBhIHNwZWNpZmljIGRpc2FibGUgZXhwcmVzc2lvblxuICAgICAgICAgIGlmIChtYXRjaFs0XSkge1xuICAgICAgICAgICAgdmFyIGRpc2FibGVXaGVuID0gZGlzYWJsZVdoZW5GbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICAgIHdhdGNoZWRBcnJheS5wdXNoKGRpc2FibGVXaGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdhdGNoZWRBcnJheTtcbiAgICAgIH0pLFxuXG4gICAgICBnZXRPcHRpb25zOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgb3B0aW9uSXRlbXMgPSBbXTtcbiAgICAgICAgdmFyIHNlbGVjdFZhbHVlTWFwID0ge307XG5cbiAgICAgICAgLy8gVGhlIG9wdGlvbiB2YWx1ZXMgd2VyZSBhbHJlYWR5IGNvbXB1dGVkIGluIHRoZSBgZ2V0V2F0Y2hhYmxlc2AgZm4sXG4gICAgICAgIC8vIHdoaWNoIG11c3QgaGF2ZSBiZWVuIGNhbGxlZCB0byB0cmlnZ2VyIGBnZXRPcHRpb25zYFxuICAgICAgICB2YXIgb3B0aW9uVmFsdWVzID0gdmFsdWVzRm4oc2NvcGUpIHx8IFtdO1xuICAgICAgICB2YXIgb3B0aW9uVmFsdWVzS2V5cyA9IGdldE9wdGlvblZhbHVlc0tleXMob3B0aW9uVmFsdWVzKTtcbiAgICAgICAgdmFyIG9wdGlvblZhbHVlc0xlbmd0aCA9IG9wdGlvblZhbHVlc0tleXMubGVuZ3RoO1xuXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25WYWx1ZXNMZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICB2YXIga2V5ID0gKG9wdGlvblZhbHVlcyA9PT0gb3B0aW9uVmFsdWVzS2V5cykgPyBpbmRleCA6IG9wdGlvblZhbHVlc0tleXNbaW5kZXhdO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IG9wdGlvblZhbHVlc1trZXldO1xuICAgICAgICAgIHZhciBsb2NhbHMgPSBnZXRMb2NhbHModmFsdWUsIGtleSk7XG4gICAgICAgICAgdmFyIHZpZXdWYWx1ZSA9IHZpZXdWYWx1ZUZuKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgIHZhciBzZWxlY3RWYWx1ZSA9IGdldFRyYWNrQnlWYWx1ZUZuKHZpZXdWYWx1ZSwgbG9jYWxzKTtcbiAgICAgICAgICB2YXIgbGFiZWwgPSBkaXNwbGF5Rm4oc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBCeUZuKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgIHZhciBkaXNhYmxlZCA9IGRpc2FibGVXaGVuRm4oc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgdmFyIG9wdGlvbkl0ZW0gPSBuZXcgT3B0aW9uKHNlbGVjdFZhbHVlLCB2aWV3VmFsdWUsIGxhYmVsLCBncm91cCwgZGlzYWJsZWQpO1xuXG4gICAgICAgICAgb3B0aW9uSXRlbXMucHVzaChvcHRpb25JdGVtKTtcbiAgICAgICAgICBzZWxlY3RWYWx1ZU1hcFtzZWxlY3RWYWx1ZV0gPSBvcHRpb25JdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpdGVtczogb3B0aW9uSXRlbXMsXG4gICAgICAgICAgc2VsZWN0VmFsdWVNYXA6IHNlbGVjdFZhbHVlTWFwLFxuICAgICAgICAgIGdldE9wdGlvbkZyb21WaWV3VmFsdWU6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0VmFsdWVNYXBbZ2V0VHJhY2tCeVZhbHVlKHZhbHVlKV07XG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRWaWV3VmFsdWVGcm9tT3B0aW9uOiBmdW5jdGlvbihvcHRpb24pIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSB2aWV3VmFsdWUgY291bGQgYmUgYW4gb2JqZWN0IHRoYXQgbWF5IGJlIG11dGF0ZWQgYnkgdGhlIGFwcGxpY2F0aW9uLFxuICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBtYWtlIGEgY29weSBhbmQgbm90IHJldHVybiB0aGUgcmVmZXJlbmNlIHRvIHRoZSB2YWx1ZSBvbiB0aGUgb3B0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRyYWNrQnkgPyBjb3B5KG9wdGlvbi52aWV3VmFsdWUpIDogb3B0aW9uLnZpZXdWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG5cbiAgLy8gU3VwcG9ydDogSUUgOSBvbmx5XG4gIC8vIFdlIGNhbid0IGp1c3QganFMaXRlKCc8b3B0aW9uPicpIHNpbmNlIGpxTGl0ZSBpcyBub3Qgc21hcnQgZW5vdWdoXG4gIC8vIHRvIGNyZWF0ZSBpdCBpbiA8c2VsZWN0PiBhbmQgSUUgYmFyZnMgb3RoZXJ3aXNlLlxuICB2YXIgb3B0aW9uVGVtcGxhdGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyksXG4gICAgICBvcHRHcm91cFRlbXBsYXRlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGdyb3VwJyk7XG5cbiAgICBmdW5jdGlvbiBuZ09wdGlvbnNQb3N0TGluayhzY29wZSwgc2VsZWN0RWxlbWVudCwgYXR0ciwgY3RybHMpIHtcblxuICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1swXTtcbiAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuICAgICAgdmFyIG11bHRpcGxlID0gYXR0ci5tdWx0aXBsZTtcblxuICAgICAgLy8gVGhlIGVtcHR5T3B0aW9uIGFsbG93cyB0aGUgYXBwbGljYXRpb24gZGV2ZWxvcGVyIHRvIHByb3ZpZGUgdGhlaXIgb3duIGN1c3RvbSBcImVtcHR5XCJcbiAgICAgIC8vIG9wdGlvbiB3aGVuIHRoZSB2aWV3VmFsdWUgZG9lcyBub3QgbWF0Y2ggYW55IG9mIHRoZSBvcHRpb24gdmFsdWVzLlxuICAgICAgZm9yICh2YXIgaSA9IDAsIGNoaWxkcmVuID0gc2VsZWN0RWxlbWVudC5jaGlsZHJlbigpLCBpaSA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgaWYgKGNoaWxkcmVuW2ldLnZhbHVlID09PSAnJykge1xuICAgICAgICAgIHNlbGVjdEN0cmwuaGFzRW1wdHlPcHRpb24gPSB0cnVlO1xuICAgICAgICAgIHNlbGVjdEN0cmwuZW1wdHlPcHRpb24gPSBjaGlsZHJlbi5lcShpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgZW1wdHkgb3B0aW9uIHdpbGwgYmUgY29tcGlsZWQgYW5kIHJlbmRlcmVkIGJlZm9yZSB3ZSBmaXJzdCBnZW5lcmF0ZSB0aGUgb3B0aW9uc1xuICAgICAgc2VsZWN0RWxlbWVudC5lbXB0eSgpO1xuXG4gICAgICB2YXIgcHJvdmlkZWRFbXB0eU9wdGlvbiA9ICEhc2VsZWN0Q3RybC5lbXB0eU9wdGlvbjtcblxuICAgICAgdmFyIHVua25vd25PcHRpb24gPSBqcUxpdGUob3B0aW9uVGVtcGxhdGUuY2xvbmVOb2RlKGZhbHNlKSk7XG4gICAgICB1bmtub3duT3B0aW9uLnZhbCgnPycpO1xuXG4gICAgICB2YXIgb3B0aW9ucztcbiAgICAgIHZhciBuZ09wdGlvbnMgPSBwYXJzZU9wdGlvbnNFeHByZXNzaW9uKGF0dHIubmdPcHRpb25zLCBzZWxlY3RFbGVtZW50LCBzY29wZSk7XG4gICAgICAvLyBUaGlzIHN0b3JlcyB0aGUgbmV3bHkgY3JlYXRlZCBvcHRpb25zIGJlZm9yZSB0aGV5IGFyZSBhcHBlbmRlZCB0byB0aGUgc2VsZWN0LlxuICAgICAgLy8gU2luY2UgdGhlIGNvbnRlbnRzIGFyZSByZW1vdmVkIGZyb20gdGhlIGZyYWdtZW50IHdoZW4gaXQgaXMgYXBwZW5kZWQsXG4gICAgICAvLyB3ZSBvbmx5IG5lZWQgdG8gY3JlYXRlIGl0IG9uY2UuXG4gICAgICB2YXIgbGlzdEZyYWdtZW50ID0gJGRvY3VtZW50WzBdLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgLy8gT3ZlcndyaXRlIHRoZSBpbXBsZW1lbnRhdGlvbi4gbmdPcHRpb25zIGRvZXNuJ3QgdXNlIGhhc2hlc1xuICAgICAgc2VsZWN0Q3RybC5nZW5lcmF0ZVVua25vd25PcHRpb25WYWx1ZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICByZXR1cm4gJz8nO1xuICAgICAgfTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBjb250cm9sbGVyIG1ldGhvZHMgZm9yIG11bHRpcGxlIHNlbGVjdGFibGUgb3B0aW9uc1xuICAgICAgaWYgKCFtdWx0aXBsZSkge1xuXG4gICAgICAgIHNlbGVjdEN0cmwud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uIHdyaXRlTmdPcHRpb25zVmFsdWUodmFsdWUpIHtcbiAgICAgICAgICAvLyBUaGUgb3B0aW9ucyBtaWdodCBub3QgYmUgZGVmaW5lZCB5ZXQgd2hlbiBuZ01vZGVsIHRyaWVzIHRvIHJlbmRlclxuICAgICAgICAgIGlmICghb3B0aW9ucykgcmV0dXJuO1xuXG4gICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9uID0gc2VsZWN0RWxlbWVudFswXS5vcHRpb25zW3NlbGVjdEVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleF07XG4gICAgICAgICAgdmFyIG9wdGlvbiA9IG9wdGlvbnMuZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZSh2YWx1ZSk7XG5cbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdG8gcmVtb3ZlIHRoZSBzZWxlY3RlZCBhdHRyaWJ1dGUgZnJvbSB0aGUgcHJldmlvdXNseSBzZWxlY3RlZCBvcHRpb25cbiAgICAgICAgICAvLyBPdGhlcndpc2UsIHNjcmVlbiByZWFkZXJzIG1pZ2h0IGdldCBjb25mdXNlZFxuICAgICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbikgc2VsZWN0ZWRPcHRpb24ucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgICAgaWYgKG9wdGlvbikge1xuICAgICAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIHRoZSBvcHRpb24gd2hlbiBpdCBpcyBhbHJlYWR5IHNlbGVjdGVkLlxuICAgICAgICAgICAgLy8gRm9yIGV4YW1wbGUsIHRoZSBicm93c2VyIHdpbGwgc2VsZWN0IHRoZSBmaXJzdCBvcHRpb24gYnkgZGVmYXVsdC4gSW4gdGhhdCBjYXNlLFxuICAgICAgICAgICAgLy8gbW9zdCBwcm9wZXJ0aWVzIGFyZSBzZXQgYXV0b21hdGljYWxseSAtIGV4Y2VwdCB0aGUgYHNlbGVjdGVkYCBhdHRyaWJ1dGUsIHdoaWNoIHdlXG4gICAgICAgICAgICAvLyBzZXQgYWx3YXlzXG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RFbGVtZW50WzBdLnZhbHVlICE9PSBvcHRpb24uc2VsZWN0VmFsdWUpIHtcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5yZW1vdmVVbmtub3duT3B0aW9uKCk7XG5cbiAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudFswXS52YWx1ZSA9IG9wdGlvbi5zZWxlY3RWYWx1ZTtcbiAgICAgICAgICAgICAgb3B0aW9uLmVsZW1lbnQuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcHRpb24uZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdEN0cmwuc2VsZWN0VW5rbm93bk9yRW1wdHlPcHRpb24odmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3RDdHJsLnJlYWRWYWx1ZSA9IGZ1bmN0aW9uIHJlYWROZ09wdGlvbnNWYWx1ZSgpIHtcblxuICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9IG9wdGlvbnMuc2VsZWN0VmFsdWVNYXBbc2VsZWN0RWxlbWVudC52YWwoKV07XG5cbiAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb24gJiYgIXNlbGVjdGVkT3B0aW9uLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBzZWxlY3RDdHJsLnVuc2VsZWN0RW1wdHlPcHRpb24oKTtcbiAgICAgICAgICAgIHNlbGVjdEN0cmwucmVtb3ZlVW5rbm93bk9wdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihzZWxlY3RlZE9wdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBgdHJhY2sgYnlgIHRoZW4gd2UgbXVzdCB3YXRjaCB0aGUgdHJhY2tlZCB2YWx1ZSBvbiB0aGUgbW9kZWxcbiAgICAgICAgLy8gc2luY2UgbmdNb2RlbCBvbmx5IHdhdGNoZXMgZm9yIG9iamVjdCBpZGVudGl0eSBjaGFuZ2VcbiAgICAgICAgLy8gRklYTUU6IFdoZW4gYSB1c2VyIHNlbGVjdHMgYW4gb3B0aW9uLCB0aGlzIHdhdGNoIHdpbGwgZmlyZSBuZWVkbGVzc2x5XG4gICAgICAgIGlmIChuZ09wdGlvbnMudHJhY2tCeSkge1xuICAgICAgICAgIHNjb3BlLiR3YXRjaChcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gbmdPcHRpb25zLmdldFRyYWNrQnlWYWx1ZShuZ01vZGVsQ3RybC4kdmlld1ZhbHVlKTsgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7IH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgc2VsZWN0Q3RybC53cml0ZVZhbHVlID0gZnVuY3Rpb24gd3JpdGVOZ09wdGlvbnNNdWx0aXBsZSh2YWx1ZXMpIHtcbiAgICAgICAgICAvLyBUaGUgb3B0aW9ucyBtaWdodCBub3QgYmUgZGVmaW5lZCB5ZXQgd2hlbiBuZ01vZGVsIHRyaWVzIHRvIHJlbmRlclxuICAgICAgICAgIGlmICghb3B0aW9ucykgcmV0dXJuO1xuXG4gICAgICAgICAgLy8gT25seSBzZXQgYDxvcHRpb24+LnNlbGVjdGVkYCBpZiBuZWNlc3NhcnksIGluIG9yZGVyIHRvIHByZXZlbnQgc29tZSBicm93c2VycyBmcm9tXG4gICAgICAgICAgLy8gc2Nyb2xsaW5nIHRvIGA8b3B0aW9uPmAgZWxlbWVudHMgdGhhdCBhcmUgb3V0c2lkZSB0aGUgYDxzZWxlY3Q+YCBlbGVtZW50J3Mgdmlld3BvcnQuXG4gICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9IHZhbHVlcyAmJiB2YWx1ZXMubWFwKGdldEFuZFVwZGF0ZVNlbGVjdGVkT3B0aW9uKSB8fCBbXTtcblxuICAgICAgICAgIG9wdGlvbnMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihvcHRpb24pIHtcbiAgICAgICAgICAgIGlmIChvcHRpb24uZWxlbWVudC5zZWxlY3RlZCAmJiAhaW5jbHVkZXMoc2VsZWN0ZWRPcHRpb25zLCBvcHRpb24pKSB7XG4gICAgICAgICAgICAgIG9wdGlvbi5lbGVtZW50LnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICBzZWxlY3RDdHJsLnJlYWRWYWx1ZSA9IGZ1bmN0aW9uIHJlYWROZ09wdGlvbnNNdWx0aXBsZSgpIHtcbiAgICAgICAgICB2YXIgc2VsZWN0ZWRWYWx1ZXMgPSBzZWxlY3RFbGVtZW50LnZhbCgpIHx8IFtdLFxuICAgICAgICAgICAgICBzZWxlY3Rpb25zID0gW107XG5cbiAgICAgICAgICBmb3JFYWNoKHNlbGVjdGVkVmFsdWVzLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IG9wdGlvbnMuc2VsZWN0VmFsdWVNYXBbdmFsdWVdO1xuICAgICAgICAgICAgaWYgKG9wdGlvbiAmJiAhb3B0aW9uLmRpc2FibGVkKSBzZWxlY3Rpb25zLnB1c2gob3B0aW9ucy5nZXRWaWV3VmFsdWVGcm9tT3B0aW9uKG9wdGlvbikpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdGlvbnM7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIGB0cmFjayBieWAgdGhlbiB3ZSBtdXN0IHdhdGNoIHRoZXNlIHRyYWNrZWQgdmFsdWVzIG9uIHRoZSBtb2RlbFxuICAgICAgICAvLyBzaW5jZSBuZ01vZGVsIG9ubHkgd2F0Y2hlcyBmb3Igb2JqZWN0IGlkZW50aXR5IGNoYW5nZVxuICAgICAgICBpZiAobmdPcHRpb25zLnRyYWNrQnkpIHtcblxuICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShuZ01vZGVsQ3RybC4kdmlld1ZhbHVlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZS5tYXAoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmdPcHRpb25zLmdldFRyYWNrQnlWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3ZpZGVkRW1wdHlPcHRpb24pIHtcblxuICAgICAgICAvLyBjb21waWxlIHRoZSBlbGVtZW50IHNpbmNlIHRoZXJlIG1pZ2h0IGJlIGJpbmRpbmdzIGluIGl0XG4gICAgICAgICRjb21waWxlKHNlbGVjdEN0cmwuZW1wdHlPcHRpb24pKHNjb3BlKTtcblxuICAgICAgICBzZWxlY3RFbGVtZW50LnByZXBlbmQoc2VsZWN0Q3RybC5lbXB0eU9wdGlvbik7XG5cbiAgICAgICAgaWYgKHNlbGVjdEN0cmwuZW1wdHlPcHRpb25bMF0ubm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UKSB7XG4gICAgICAgICAgLy8gVGhpcyBtZWFucyB0aGUgZW1wdHkgb3B0aW9uIGhhcyBjdXJyZW50bHkgbm8gYWN0dWFsIERPTSBub2RlLCBwcm9iYWJseSBiZWNhdXNlXG4gICAgICAgICAgLy8gaXQgaGFzIGJlZW4gbW9kaWZpZWQgYnkgYSB0cmFuc2NsdXNpb24gZGlyZWN0aXZlLlxuICAgICAgICAgIHNlbGVjdEN0cmwuaGFzRW1wdHlPcHRpb24gPSBmYWxzZTtcblxuICAgICAgICAgIC8vIFJlZGVmaW5lIHRoZSByZWdpc3Rlck9wdGlvbiBmdW5jdGlvbiwgd2hpY2ggd2lsbCBjYXRjaFxuICAgICAgICAgIC8vIG9wdGlvbnMgdGhhdCBhcmUgYWRkZWQgYnkgbmdJZiBldGMuIChyZW5kZXJpbmcgb2YgdGhlIG5vZGUgaXMgYXN5bmMgYmVjYXVzZSBvZlxuICAgICAgICAgIC8vIGxhenkgdHJhbnNjbHVzaW9uKVxuICAgICAgICAgIHNlbGVjdEN0cmwucmVnaXN0ZXJPcHRpb24gPSBmdW5jdGlvbihvcHRpb25TY29wZSwgb3B0aW9uRWwpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25FbC52YWwoKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5oYXNFbXB0eU9wdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwuZW1wdHlPcHRpb24gPSBvcHRpb25FbDtcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5lbXB0eU9wdGlvbi5yZW1vdmVDbGFzcygnbmctc2NvcGUnKTtcbiAgICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBuZXcgZW1wdHkgb3B0aW9uIGlzIHNlbGVjdGVkIGlmIHByZXZpb3VzbHkgbm8gb3B0aW9uIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG5cbiAgICAgICAgICAgICAgb3B0aW9uRWwub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5lZWRzUmVyZW5kZXIgPSBzZWxlY3RDdHJsLiRpc0VtcHR5T3B0aW9uU2VsZWN0ZWQoKTtcblxuICAgICAgICAgICAgICAgIHNlbGVjdEN0cmwuaGFzRW1wdHlPcHRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RDdHJsLmVtcHR5T3B0aW9uID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5lZWRzUmVyZW5kZXIpIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgY2xhc3MsIHdoaWNoIGlzIGFkZGVkIGF1dG9tYXRpY2FsbHkgYmVjYXVzZSB3ZSByZWNvbXBpbGUgdGhlIGVsZW1lbnQgYW5kIGl0XG4gICAgICAgICAgLy8gYmVjb21lcyB0aGUgY29tcGlsYXRpb24gcm9vdFxuICAgICAgICAgIHNlbGVjdEN0cmwuZW1wdHlPcHRpb24ucmVtb3ZlQ2xhc3MoJ25nLXNjb3BlJyk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvLyBXZSB3aWxsIHJlLXJlbmRlciB0aGUgb3B0aW9uIGVsZW1lbnRzIGlmIHRoZSBvcHRpb24gdmFsdWVzIG9yIGxhYmVscyBjaGFuZ2VcbiAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24obmdPcHRpb25zLmdldFdhdGNoYWJsZXMsIHVwZGF0ZU9wdGlvbnMpO1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAgICAgZnVuY3Rpb24gYWRkT3B0aW9uRWxlbWVudChvcHRpb24sIHBhcmVudCkge1xuICAgICAgICB2YXIgb3B0aW9uRWxlbWVudCA9IG9wdGlvblRlbXBsYXRlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChvcHRpb25FbGVtZW50KTtcbiAgICAgICAgdXBkYXRlT3B0aW9uRWxlbWVudChvcHRpb24sIG9wdGlvbkVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRBbmRVcGRhdGVTZWxlY3RlZE9wdGlvbih2aWV3VmFsdWUpIHtcbiAgICAgICAgdmFyIG9wdGlvbiA9IG9wdGlvbnMuZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZSh2aWV3VmFsdWUpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IG9wdGlvbiAmJiBvcHRpb24uZWxlbWVudDtcblxuICAgICAgICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5zZWxlY3RlZCkgZWxlbWVudC5zZWxlY3RlZCA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlT3B0aW9uRWxlbWVudChvcHRpb24sIGVsZW1lbnQpIHtcbiAgICAgICAgb3B0aW9uLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICBlbGVtZW50LmRpc2FibGVkID0gb3B0aW9uLmRpc2FibGVkO1xuICAgICAgICAvLyBTdXBwb3J0OiBJRSAxMSBvbmx5LCBFZGdlIDEyLTEzIG9ubHlcbiAgICAgICAgLy8gTk9URTogVGhlIGxhYmVsIG11c3QgYmUgc2V0IGJlZm9yZSB0aGUgdmFsdWUsIG90aGVyd2lzZSBJRSAxMSAmIEVkZ2UgY3JlYXRlIHVucmVzcG9uc2l2ZVxuICAgICAgICAvLyBzZWxlY3RzIGluIGNlcnRhaW4gY2lyY3Vtc3RhbmNlcyB3aGVuIG11bHRpcGxlIHNlbGVjdHMgYXJlIG5leHQgdG8gZWFjaCBvdGhlciBhbmQgZGlzcGxheVxuICAgICAgICAvLyB0aGUgb3B0aW9uIGxpc3QgaW4gbGlzdGJveCBzdHlsZSwgaS5lLiB0aGUgc2VsZWN0IGlzIFttdWx0aXBsZV0sIG9yIHNwZWNpZmllcyBhIFtzaXplXS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzExMzE0IGZvciBtb3JlIGluZm8uXG4gICAgICAgIC8vIFRoaXMgaXMgdW5mb3J0dW5hdGVseSB1bnRlc3RhYmxlIHdpdGggdW5pdCAvIGUyZSB0ZXN0c1xuICAgICAgICBpZiAob3B0aW9uLmxhYmVsICE9PSBlbGVtZW50LmxhYmVsKSB7XG4gICAgICAgICAgZWxlbWVudC5sYWJlbCA9IG9wdGlvbi5sYWJlbDtcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gb3B0aW9uLmxhYmVsO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBvcHRpb24uc2VsZWN0VmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMoKSB7XG4gICAgICAgIHZhciBwcmV2aW91c1ZhbHVlID0gb3B0aW9ucyAmJiBzZWxlY3RDdHJsLnJlYWRWYWx1ZSgpO1xuXG4gICAgICAgIC8vIFdlIG11c3QgcmVtb3ZlIGFsbCBjdXJyZW50IG9wdGlvbnMsIGJ1dCBjYW5ub3Qgc2ltcGx5IHNldCBpbm5lckhUTUwgPSBudWxsXG4gICAgICAgIC8vIHNpbmNlIHRoZSBwcm92aWRlZEVtcHR5T3B0aW9uIG1pZ2h0IGhhdmUgYW4gbmdJZiBvbiBpdCB0aGF0IGluc2VydHMgY29tbWVudHMgd2hpY2ggd2VcbiAgICAgICAgLy8gbXVzdCBwcmVzZXJ2ZS5cbiAgICAgICAgLy8gSW5zdGVhZCwgaXRlcmF0ZSBvdmVyIHRoZSBjdXJyZW50IG9wdGlvbiBlbGVtZW50cyBhbmQgcmVtb3ZlIHRoZW0gb3IgdGhlaXIgb3B0Z3JvdXBcbiAgICAgICAgLy8gcGFyZW50c1xuICAgICAgICBpZiAob3B0aW9ucykge1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IG9wdGlvbnMuaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zLml0ZW1zW2ldO1xuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChvcHRpb24uZ3JvdXApKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZVJlbW92ZShvcHRpb24uZWxlbWVudC5wYXJlbnROb2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGpxTGl0ZVJlbW92ZShvcHRpb24uZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IG5nT3B0aW9ucy5nZXRPcHRpb25zKCk7XG5cbiAgICAgICAgdmFyIGdyb3VwRWxlbWVudE1hcCA9IHt9O1xuXG4gICAgICAgIG9wdGlvbnMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbiBhZGRPcHRpb24ob3B0aW9uKSB7XG4gICAgICAgICAgdmFyIGdyb3VwRWxlbWVudDtcblxuICAgICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9uLmdyb3VwKSkge1xuXG4gICAgICAgICAgICAvLyBUaGlzIG9wdGlvbiBpcyB0byBsaXZlIGluIGEgZ3JvdXBcbiAgICAgICAgICAgIC8vIFNlZSBpZiB3ZSBoYXZlIGFscmVhZHkgY3JlYXRlZCB0aGlzIGdyb3VwXG4gICAgICAgICAgICBncm91cEVsZW1lbnQgPSBncm91cEVsZW1lbnRNYXBbb3B0aW9uLmdyb3VwXTtcblxuICAgICAgICAgICAgaWYgKCFncm91cEVsZW1lbnQpIHtcblxuICAgICAgICAgICAgICBncm91cEVsZW1lbnQgPSBvcHRHcm91cFRlbXBsYXRlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgICAgICAgIGxpc3RGcmFnbWVudC5hcHBlbmRDaGlsZChncm91cEVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGFiZWwgb24gdGhlIGdyb3VwIGVsZW1lbnRcbiAgICAgICAgICAgICAgLy8gXCJudWxsXCIgaXMgc3BlY2lhbCBjYXNlZCBiZWNhdXNlIG9mIFNhZmFyaVxuICAgICAgICAgICAgICBncm91cEVsZW1lbnQubGFiZWwgPSBvcHRpb24uZ3JvdXAgPT09IG51bGwgPyAnbnVsbCcgOiBvcHRpb24uZ3JvdXA7XG5cbiAgICAgICAgICAgICAgLy8gU3RvcmUgaXQgZm9yIHVzZSBsYXRlclxuICAgICAgICAgICAgICBncm91cEVsZW1lbnRNYXBbb3B0aW9uLmdyb3VwXSA9IGdyb3VwRWxlbWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWRkT3B0aW9uRWxlbWVudChvcHRpb24sIGdyb3VwRWxlbWVudCk7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAvLyBUaGlzIG9wdGlvbiBpcyBub3QgaW4gYSBncm91cFxuICAgICAgICAgICAgYWRkT3B0aW9uRWxlbWVudChvcHRpb24sIGxpc3RGcmFnbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzZWxlY3RFbGVtZW50WzBdLmFwcGVuZENoaWxkKGxpc3RGcmFnbWVudCk7XG5cbiAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuXG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQgZHVlIHRvIHRoZSB1cGRhdGUgdG8gdGhlIG9wdGlvbnNcbiAgICAgICAgaWYgKCFuZ01vZGVsQ3RybC4kaXNFbXB0eShwcmV2aW91c1ZhbHVlKSkge1xuICAgICAgICAgIHZhciBuZXh0VmFsdWUgPSBzZWxlY3RDdHJsLnJlYWRWYWx1ZSgpO1xuICAgICAgICAgIHZhciBpc05vdFByaW1pdGl2ZSA9IG5nT3B0aW9ucy50cmFja0J5IHx8IG11bHRpcGxlO1xuICAgICAgICAgIGlmIChpc05vdFByaW1pdGl2ZSA/ICFlcXVhbHMocHJldmlvdXNWYWx1ZSwgbmV4dFZhbHVlKSA6IHByZXZpb3VzVmFsdWUgIT09IG5leHRWYWx1ZSkge1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShuZXh0VmFsdWUpO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIHJlcXVpcmU6IFsnc2VsZWN0JywgJ25nTW9kZWwnXSxcbiAgICBsaW5rOiB7XG4gICAgICBwcmU6IGZ1bmN0aW9uIG5nT3B0aW9uc1ByZUxpbmsoc2NvcGUsIHNlbGVjdEVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG4gICAgICAgIC8vIERlYWN0aXZhdGUgdGhlIFNlbGVjdENvbnRyb2xsZXIucmVnaXN0ZXIgbWV0aG9kIHRvIHByZXZlbnRcbiAgICAgICAgLy8gb3B0aW9uIGRpcmVjdGl2ZXMgZnJvbSBhY2NpZGVudGFsbHkgcmVnaXN0ZXJpbmcgdGhlbXNlbHZlc1xuICAgICAgICAvLyAoYW5kIHVud2FudGVkICRkZXN0cm95IGhhbmRsZXJzIGV0Yy4pXG4gICAgICAgIGN0cmxzWzBdLnJlZ2lzdGVyT3B0aW9uID0gbm9vcDtcbiAgICAgIH0sXG4gICAgICBwb3N0OiBuZ09wdGlvbnNQb3N0TGlua1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nUGx1cmFsaXplXG4gKiBAcmVzdHJpY3QgRUFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIGBuZ1BsdXJhbGl6ZWAgaXMgYSBkaXJlY3RpdmUgdGhhdCBkaXNwbGF5cyBtZXNzYWdlcyBhY2NvcmRpbmcgdG8gZW4tVVMgbG9jYWxpemF0aW9uIHJ1bGVzLlxuICogVGhlc2UgcnVsZXMgYXJlIGJ1bmRsZWQgd2l0aCBhbmd1bGFyLmpzLCBidXQgY2FuIGJlIG92ZXJyaWRkZW5cbiAqIChzZWUge0BsaW5rIGd1aWRlL2kxOG4gQW5ndWxhckpTIGkxOG59IGRldiBndWlkZSkuIFlvdSBjb25maWd1cmUgbmdQbHVyYWxpemUgZGlyZWN0aXZlXG4gKiBieSBzcGVjaWZ5aW5nIHRoZSBtYXBwaW5ncyBiZXR3ZWVuXG4gKiBbcGx1cmFsIGNhdGVnb3JpZXNdKGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcy9jbGRyLXRtcC90cnVuay9kaWZmL3N1cHBsZW1lbnRhbC9sYW5ndWFnZV9wbHVyYWxfcnVsZXMuaHRtbClcbiAqIGFuZCB0aGUgc3RyaW5ncyB0byBiZSBkaXNwbGF5ZWQuXG4gKlxuICogIyMgUGx1cmFsIGNhdGVnb3JpZXMgYW5kIGV4cGxpY2l0IG51bWJlciBydWxlc1xuICogVGhlcmUgYXJlIHR3b1xuICogW3BsdXJhbCBjYXRlZ29yaWVzXShodHRwOi8vdW5pY29kZS5vcmcvcmVwb3MvY2xkci10bXAvdHJ1bmsvZGlmZi9zdXBwbGVtZW50YWwvbGFuZ3VhZ2VfcGx1cmFsX3J1bGVzLmh0bWwpXG4gKiBpbiBBbmd1bGFySlMncyBkZWZhdWx0IGVuLVVTIGxvY2FsZTogXCJvbmVcIiBhbmQgXCJvdGhlclwiLlxuICpcbiAqIFdoaWxlIGEgcGx1cmFsIGNhdGVnb3J5IG1heSBtYXRjaCBtYW55IG51bWJlcnMgKGZvciBleGFtcGxlLCBpbiBlbi1VUyBsb2NhbGUsIFwib3RoZXJcIiBjYW4gbWF0Y2hcbiAqIGFueSBudW1iZXIgdGhhdCBpcyBub3QgMSksIGFuIGV4cGxpY2l0IG51bWJlciBydWxlIGNhbiBvbmx5IG1hdGNoIG9uZSBudW1iZXIuIEZvciBleGFtcGxlLCB0aGVcbiAqIGV4cGxpY2l0IG51bWJlciBydWxlIGZvciBcIjNcIiBtYXRjaGVzIHRoZSBudW1iZXIgMy4gVGhlcmUgYXJlIGV4YW1wbGVzIG9mIHBsdXJhbCBjYXRlZ29yaWVzXG4gKiBhbmQgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIHRocm91Z2hvdXQgdGhlIHJlc3Qgb2YgdGhpcyBkb2N1bWVudGF0aW9uLlxuICpcbiAqICMjIENvbmZpZ3VyaW5nIG5nUGx1cmFsaXplXG4gKiBZb3UgY29uZmlndXJlIG5nUGx1cmFsaXplIGJ5IHByb3ZpZGluZyAyIGF0dHJpYnV0ZXM6IGBjb3VudGAgYW5kIGB3aGVuYC5cbiAqIFlvdSBjYW4gYWxzbyBwcm92aWRlIGFuIG9wdGlvbmFsIGF0dHJpYnV0ZSwgYG9mZnNldGAuXG4gKlxuICogVGhlIHZhbHVlIG9mIHRoZSBgY291bnRgIGF0dHJpYnV0ZSBjYW4gYmUgZWl0aGVyIGEgc3RyaW5nIG9yIGFuIHtAbGluayBndWlkZS9leHByZXNzaW9uXG4gKiBBbmd1bGFySlMgZXhwcmVzc2lvbn07IHRoZXNlIGFyZSBldmFsdWF0ZWQgb24gdGhlIGN1cnJlbnQgc2NvcGUgZm9yIGl0cyBib3VuZCB2YWx1ZS5cbiAqXG4gKiBUaGUgYHdoZW5gIGF0dHJpYnV0ZSBzcGVjaWZpZXMgdGhlIG1hcHBpbmdzIGJldHdlZW4gcGx1cmFsIGNhdGVnb3JpZXMgYW5kIHRoZSBhY3R1YWxcbiAqIHN0cmluZyB0byBiZSBkaXNwbGF5ZWQuIFRoZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIHNob3VsZCBiZSBhIEpTT04gb2JqZWN0LlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gY29uZmlndXJlIG5nUGx1cmFsaXplOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiXG4gICAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAnMSBwZXJzb24gaXMgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t9IHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxuICogPC9uZy1wbHVyYWxpemU+XG4gKmBgYFxuICpcbiAqIEluIHRoZSBleGFtcGxlLCBgXCIwOiBOb2JvZHkgaXMgdmlld2luZy5cImAgaXMgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUuIElmIHlvdSBkaWQgbm90XG4gKiBzcGVjaWZ5IHRoaXMgcnVsZSwgMCB3b3VsZCBiZSBtYXRjaGVkIHRvIHRoZSBcIm90aGVyXCIgY2F0ZWdvcnkgYW5kIFwiMCBwZW9wbGUgYXJlIHZpZXdpbmdcIlxuICogd291bGQgYmUgc2hvd24gaW5zdGVhZCBvZiBcIk5vYm9keSBpcyB2aWV3aW5nXCIuIFlvdSBjYW4gc3BlY2lmeSBhbiBleHBsaWNpdCBudW1iZXIgcnVsZSBmb3JcbiAqIG90aGVyIG51bWJlcnMsIGZvciBleGFtcGxlIDEyLCBzbyB0aGF0IGluc3RlYWQgb2Ygc2hvd2luZyBcIjEyIHBlb3BsZSBhcmUgdmlld2luZ1wiLCB5b3UgY2FuXG4gKiBzaG93IFwiYSBkb3plbiBwZW9wbGUgYXJlIHZpZXdpbmdcIi5cbiAqXG4gKiBZb3UgY2FuIHVzZSBhIHNldCBvZiBjbG9zZWQgYnJhY2VzIChge31gKSBhcyBhIHBsYWNlaG9sZGVyIGZvciB0aGUgbnVtYmVyIHRoYXQgeW91IHdhbnQgc3Vic3RpdHV0ZWRcbiAqIGludG8gcGx1cmFsaXplZCBzdHJpbmdzLiBJbiB0aGUgcHJldmlvdXMgZXhhbXBsZSwgQW5ndWxhckpTIHdpbGwgcmVwbGFjZSBge31gIHdpdGhcbiAqIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT5ge3twZXJzb25Db3VudH19YDwvc3Bhbj4uIFRoZSBjbG9zZWQgYnJhY2VzIGB7fWAgaXMgYSBwbGFjZWhvbGRlclxuICogZm9yIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57e251bWJlckV4cHJlc3Npb259fTwvc3Bhbj4uXG4gKlxuICogSWYgbm8gcnVsZSBpcyBkZWZpbmVkIGZvciBhIGNhdGVnb3J5LCB0aGVuIGFuIGVtcHR5IHN0cmluZyBpcyBkaXNwbGF5ZWQgYW5kIGEgd2FybmluZyBpcyBnZW5lcmF0ZWQuXG4gKiBOb3RlIHRoYXQgc29tZSBsb2NhbGVzIGRlZmluZSBtb3JlIGNhdGVnb3JpZXMgdGhhbiBgb25lYCBhbmQgYG90aGVyYC4gRm9yIGV4YW1wbGUsIGZyLWZyIGRlZmluZXMgYGZld2AgYW5kIGBtYW55YC5cbiAqXG4gKiAjIyBDb25maWd1cmluZyBuZ1BsdXJhbGl6ZSB3aXRoIG9mZnNldFxuICogVGhlIGBvZmZzZXRgIGF0dHJpYnV0ZSBhbGxvd3MgZnVydGhlciBjdXN0b21pemF0aW9uIG9mIHBsdXJhbGl6ZWQgdGV4dCwgd2hpY2ggY2FuIHJlc3VsdCBpblxuICogYSBiZXR0ZXIgdXNlciBleHBlcmllbmNlLiBGb3IgZXhhbXBsZSwgaW5zdGVhZCBvZiB0aGUgbWVzc2FnZSBcIjQgcGVvcGxlIGFyZSB2aWV3aW5nIHRoaXMgZG9jdW1lbnRcIixcbiAqIHlvdSBtaWdodCBkaXNwbGF5IFwiSm9obiwgS2F0ZSBhbmQgMiBvdGhlcnMgYXJlIHZpZXdpbmcgdGhpcyBkb2N1bWVudFwiLlxuICogVGhlIG9mZnNldCBhdHRyaWJ1dGUgYWxsb3dzIHlvdSB0byBvZmZzZXQgYSBudW1iZXIgYnkgYW55IGRlc2lyZWQgdmFsdWUuXG4gKiBMZXQncyB0YWtlIGEgbG9vayBhdCBhbiBleGFtcGxlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiIG9mZnNldD0yXG4gKiAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICcxJzogJ3t7cGVyc29uMX19IGlzIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICcyJzogJ3t7cGVyc29uMX19IGFuZCB7e3BlcnNvbjJ9fSBhcmUgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIHt9IG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxuICogPC9uZy1wbHVyYWxpemU+XG4gKiBgYGBcbiAqXG4gKiBOb3RpY2UgdGhhdCB3ZSBhcmUgc3RpbGwgdXNpbmcgdHdvIHBsdXJhbCBjYXRlZ29yaWVzKG9uZSwgb3RoZXIpLCBidXQgd2UgYWRkZWRcbiAqIHRocmVlIGV4cGxpY2l0IG51bWJlciBydWxlcyAwLCAxIGFuZCAyLlxuICogV2hlbiBvbmUgcGVyc29uLCBwZXJoYXBzIEpvaG4sIHZpZXdzIHRoZSBkb2N1bWVudCwgXCJKb2huIGlzIHZpZXdpbmdcIiB3aWxsIGJlIHNob3duLlxuICogV2hlbiB0aHJlZSBwZW9wbGUgdmlldyB0aGUgZG9jdW1lbnQsIG5vIGV4cGxpY2l0IG51bWJlciBydWxlIGlzIGZvdW5kLCBzb1xuICogYW4gb2Zmc2V0IG9mIDIgaXMgdGFrZW4gb2ZmIDMsIGFuZCBBbmd1bGFySlMgdXNlcyAxIHRvIGRlY2lkZSB0aGUgcGx1cmFsIGNhdGVnb3J5LlxuICogSW4gdGhpcyBjYXNlLCBwbHVyYWwgY2F0ZWdvcnkgJ29uZScgaXMgbWF0Y2hlZCBhbmQgXCJKb2huLCBNYXJ5IGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nXCJcbiAqIGlzIHNob3duLlxuICpcbiAqIE5vdGUgdGhhdCB3aGVuIHlvdSBzcGVjaWZ5IG9mZnNldHMsIHlvdSBtdXN0IHByb3ZpZGUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIGZvclxuICogbnVtYmVycyBmcm9tIDAgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgb2Zmc2V0LiBJZiB5b3UgdXNlIGFuIG9mZnNldCBvZiAzLCBmb3IgZXhhbXBsZSxcbiAqIHlvdSBtdXN0IHByb3ZpZGUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIGZvciAwLCAxLCAyIGFuZCAzLiBZb3UgbXVzdCBhbHNvIHByb3ZpZGUgcGx1cmFsIHN0cmluZ3MgZm9yXG4gKiBwbHVyYWwgY2F0ZWdvcmllcyBcIm9uZVwiIGFuZCBcIm90aGVyXCIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8ZXhwcmVzc2lvbn0gY291bnQgVGhlIHZhcmlhYmxlIHRvIGJlIGJvdW5kIHRvLlxuICogQHBhcmFtIHtzdHJpbmd9IHdoZW4gVGhlIG1hcHBpbmcgYmV0d2VlbiBwbHVyYWwgY2F0ZWdvcnkgdG8gaXRzIGNvcnJlc3BvbmRpbmcgc3RyaW5ncy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb2Zmc2V0IE9mZnNldCB0byBkZWR1Y3QgZnJvbSB0aGUgdG90YWwgbnVtYmVyLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbW9kdWxlPVwicGx1cmFsaXplRXhhbXBsZVwiIG5hbWU9XCJuZy1wbHVyYWxpemVcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3BsdXJhbGl6ZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb24xID0gJ0lnb3InO1xuICAgICAgICAgICAgICAkc2NvcGUucGVyc29uMiA9ICdNaXNrbyc7XG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb25Db3VudCA9IDE7XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgIDwvc2NyaXB0PlxuICAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgIDxsYWJlbD5QZXJzb24gMTo8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInBlcnNvbjFcIiB2YWx1ZT1cIklnb3JcIiAvPjwvbGFiZWw+PGJyLz5cbiAgICAgICAgICA8bGFiZWw+UGVyc29uIDI6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb24yXCIgdmFsdWU9XCJNaXNrb1wiIC8+PC9sYWJlbD48YnIvPlxuICAgICAgICAgIDxsYWJlbD5OdW1iZXIgb2YgUGVvcGxlOjxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwicGVyc29uQ291bnRcIiB2YWx1ZT1cIjFcIiAvPjwvbGFiZWw+PGJyLz5cblxuICAgICAgICAgIDwhLS0tIEV4YW1wbGUgd2l0aCBzaW1wbGUgcGx1cmFsaXphdGlvbiBydWxlcyBmb3IgZW4gbG9jYWxlIC0tLT5cbiAgICAgICAgICBXaXRob3V0IE9mZnNldDpcbiAgICAgICAgICA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAnMSBwZXJzb24gaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7fSBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cbiAgICAgICAgICA8L25nLXBsdXJhbGl6ZT48YnI+XG5cbiAgICAgICAgICA8IS0tLSBFeGFtcGxlIHdpdGggb2Zmc2V0IC0tLT5cbiAgICAgICAgICBXaXRoIE9mZnNldCgyKTpcbiAgICAgICAgICA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIiBvZmZzZXQ9MlxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxJzogJ3t7cGVyc29uMX19IGlzIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMic6ICd7e3BlcnNvbjF9fSBhbmQge3twZXJzb24yfX0gYXJlIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIHt9IG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxuICAgICAgICAgIDwvbmctcGx1cmFsaXplPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCBzaG93IGNvcnJlY3QgcGx1cmFsaXplZCBzdHJpbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgd2l0aG91dE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgwKTtcbiAgICAgICAgICB2YXIgd2l0aE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgxKTtcbiAgICAgICAgICB2YXIgY291bnRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbkNvdW50JykpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCcxIHBlcnNvbiBpcyB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciBpcyB2aWV3aW5nLicpO1xuXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzAnKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnTm9ib2R5IGlzIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdOb2JvZHkgaXMgdmlld2luZy4nKTtcblxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCcyJyk7XG5cbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzIgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciBhbmQgTWlza28gYXJlIHZpZXdpbmcuJyk7XG5cbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnMycpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCczIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IsIE1pc2tvIGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nLicpO1xuXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzQnKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnNCBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yLCBNaXNrbyBhbmQgMiBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnc2hvdWxkIHNob3cgZGF0YS1ib3VuZCBuYW1lcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB3aXRoT2Zmc2V0ID0gZWxlbWVudC5hbGwoYnkuY3NzKCduZy1wbHVyYWxpemUnKSkuZ2V0KDEpO1xuICAgICAgICAgIHZhciBwZXJzb25Db3VudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbkNvdW50JykpO1xuICAgICAgICAgIHZhciBwZXJzb24xID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uMScpKTtcbiAgICAgICAgICB2YXIgcGVyc29uMiA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbjInKSk7XG4gICAgICAgICAgcGVyc29uQ291bnQuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb25Db3VudC5zZW5kS2V5cygnNCcpO1xuICAgICAgICAgIHBlcnNvbjEuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb24xLnNlbmRLZXlzKCdEaScpO1xuICAgICAgICAgIHBlcnNvbjIuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb24yLnNlbmRLZXlzKCdWb2p0YScpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnRGksIFZvanRhIGFuZCAyIG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdQbHVyYWxpemVEaXJlY3RpdmUgPSBbJyRsb2NhbGUnLCAnJGludGVycG9sYXRlJywgJyRsb2cnLCBmdW5jdGlvbigkbG9jYWxlLCAkaW50ZXJwb2xhdGUsICRsb2cpIHtcbiAgdmFyIEJSQUNFID0gL3t9L2csXG4gICAgICBJU19XSEVOID0gL153aGVuKE1pbnVzKT8oLispJC87XG5cbiAgcmV0dXJuIHtcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIG51bWJlckV4cCA9IGF0dHIuY291bnQsXG4gICAgICAgICAgd2hlbkV4cCA9IGF0dHIuJGF0dHIud2hlbiAmJiBlbGVtZW50LmF0dHIoYXR0ci4kYXR0ci53aGVuKSwgLy8gd2UgaGF2ZSB7e319IGluIGF0dHJzXG4gICAgICAgICAgb2Zmc2V0ID0gYXR0ci5vZmZzZXQgfHwgMCxcbiAgICAgICAgICB3aGVucyA9IHNjb3BlLiRldmFsKHdoZW5FeHApIHx8IHt9LFxuICAgICAgICAgIHdoZW5zRXhwRm5zID0ge30sXG4gICAgICAgICAgc3RhcnRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2woKSxcbiAgICAgICAgICBlbmRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksXG4gICAgICAgICAgYnJhY2VSZXBsYWNlbWVudCA9IHN0YXJ0U3ltYm9sICsgbnVtYmVyRXhwICsgJy0nICsgb2Zmc2V0ICsgZW5kU3ltYm9sLFxuICAgICAgICAgIHdhdGNoUmVtb3ZlciA9IGFuZ3VsYXIubm9vcCxcbiAgICAgICAgICBsYXN0Q291bnQ7XG5cbiAgICAgIGZvckVhY2goYXR0ciwgZnVuY3Rpb24oZXhwcmVzc2lvbiwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICB2YXIgdG1wTWF0Y2ggPSBJU19XSEVOLmV4ZWMoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIGlmICh0bXBNYXRjaCkge1xuICAgICAgICAgIHZhciB3aGVuS2V5ID0gKHRtcE1hdGNoWzFdID8gJy0nIDogJycpICsgbG93ZXJjYXNlKHRtcE1hdGNoWzJdKTtcbiAgICAgICAgICB3aGVuc1t3aGVuS2V5XSA9IGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyW2F0dHJpYnV0ZU5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBmb3JFYWNoKHdoZW5zLCBmdW5jdGlvbihleHByZXNzaW9uLCBrZXkpIHtcbiAgICAgICAgd2hlbnNFeHBGbnNba2V5XSA9ICRpbnRlcnBvbGF0ZShleHByZXNzaW9uLnJlcGxhY2UoQlJBQ0UsIGJyYWNlUmVwbGFjZW1lbnQpKTtcblxuICAgICAgfSk7XG5cbiAgICAgIHNjb3BlLiR3YXRjaChudW1iZXJFeHAsIGZ1bmN0aW9uIG5nUGx1cmFsaXplV2F0Y2hBY3Rpb24obmV3VmFsKSB7XG4gICAgICAgIHZhciBjb3VudCA9IHBhcnNlRmxvYXQobmV3VmFsKTtcbiAgICAgICAgdmFyIGNvdW50SXNOYU4gPSBpc051bWJlck5hTihjb3VudCk7XG5cbiAgICAgICAgaWYgKCFjb3VudElzTmFOICYmICEoY291bnQgaW4gd2hlbnMpKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUgc3VjaCBhcyAxLCAyLCAzLi4uIGlzIGRlZmluZWQsIGp1c3QgdXNlIGl0LlxuICAgICAgICAgIC8vIE90aGVyd2lzZSwgY2hlY2sgaXQgYWdhaW5zdCBwbHVyYWxpemF0aW9uIHJ1bGVzIGluICRsb2NhbGUgc2VydmljZS5cbiAgICAgICAgICBjb3VudCA9ICRsb2NhbGUucGx1cmFsQ2F0KGNvdW50IC0gb2Zmc2V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGJvdGggYGNvdW50YCBhbmQgYGxhc3RDb3VudGAgYXJlIE5hTiwgd2UgZG9uJ3QgbmVlZCB0byByZS1yZWdpc3RlciBhIHdhdGNoLlxuICAgICAgICAvLyBJbiBKUyBgTmFOICE9PSBOYU5gLCBzbyB3ZSBoYXZlIHRvIGV4cGxpY2l0bHkgY2hlY2suXG4gICAgICAgIGlmICgoY291bnQgIT09IGxhc3RDb3VudCkgJiYgIShjb3VudElzTmFOICYmIGlzTnVtYmVyTmFOKGxhc3RDb3VudCkpKSB7XG4gICAgICAgICAgd2F0Y2hSZW1vdmVyKCk7XG4gICAgICAgICAgdmFyIHdoZW5FeHBGbiA9IHdoZW5zRXhwRm5zW2NvdW50XTtcbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQod2hlbkV4cEZuKSkge1xuICAgICAgICAgICAgaWYgKG5ld1ZhbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICRsb2cuZGVidWcoJ25nUGx1cmFsaXplOiBubyBydWxlIGRlZmluZWQgZm9yIFxcJycgKyBjb3VudCArICdcXCcgaW4gJyArIHdoZW5FeHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2F0Y2hSZW1vdmVyID0gbm9vcDtcbiAgICAgICAgICAgIHVwZGF0ZUVsZW1lbnRUZXh0KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdhdGNoUmVtb3ZlciA9IHNjb3BlLiR3YXRjaCh3aGVuRXhwRm4sIHVwZGF0ZUVsZW1lbnRUZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGFzdENvdW50ID0gY291bnQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVFbGVtZW50VGV4dChuZXdUZXh0KSB7XG4gICAgICAgIGVsZW1lbnQudGV4dChuZXdUZXh0IHx8ICcnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1JlZlxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdSZWZgIGF0dHJpYnV0ZSB0ZWxscyBBbmd1bGFySlMgdG8gYXNzaWduIHRoZSBjb250cm9sbGVyIG9mIGEgY29tcG9uZW50IChvciBhIGRpcmVjdGl2ZSlcbiAqIHRvIHRoZSBnaXZlbiBwcm9wZXJ0eSBpbiB0aGUgY3VycmVudCBzY29wZS4gSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBhZGQgdGhlIGpxbGl0ZS13cmFwcGVkIERPTVxuICogZWxlbWVudCB0byB0aGUgc2NvcGUuXG4gKlxuICogSWYgdGhlIGVsZW1lbnQgd2l0aCBgbmdSZWZgIGlzIGRlc3Ryb3llZCBgbnVsbGAgaXMgYXNzaWduZWQgdG8gdGhlIHByb3BlcnR5LlxuICpcbiAqIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBhc3NpZ24gZnJvbSBhIGNoaWxkIGludG8gdGhlIHBhcmVudCBzY29wZSwgeW91IG11c3QgaW5pdGlhbGl6ZSB0aGVcbiAqIHRhcmdldCBwcm9wZXJ0eSBvbiB0aGUgcGFyZW50IHNjb3BlLCBvdGhlcndpc2UgYG5nUmVmYCB3aWxsIGFzc2lnbiBvbiB0aGUgY2hpbGQgc2NvcGUuXG4gKiBUaGlzIGNvbW1vbmx5IGhhcHBlbnMgd2hlbiBhc3NpZ25pbmcgZWxlbWVudHMgb3IgY29tcG9uZW50cyB3cmFwcGVkIGluIHtAbGluayBuZ0lmfSBvclxuICoge0BsaW5rIG5nUmVwZWF0fS4gU2VlIHRoZSBzZWNvbmQgZXhhbXBsZSBiZWxvdy5cbiAqXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdSZWYgcHJvcGVydHkgbmFtZSAtIEEgdmFsaWQgQW5ndWxhckpTIGV4cHJlc3Npb24gaWRlbnRpZmllciB0byB3aGljaCB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyIG9yIGpxbGl0ZS13cmFwcGVkIERPTSBlbGVtZW50IHdpbGwgYmUgYm91bmQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVmUmVhZCByZWFkIHZhbHVlIC0gVGhlIG5hbWUgb2YgYSBkaXJlY3RpdmUgKG9yIGNvbXBvbmVudCkgb24gdGhpcyBlbGVtZW50LFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgdGhlIHNwZWNpYWwgc3RyaW5nIGAkZWxlbWVudGAuIElmIGEgbmFtZSBpcyBwcm92aWRlZCwgYG5nUmVmYCB3aWxsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24gdGhlIG1hdGNoaW5nIGNvbnRyb2xsZXIuIElmIGAkZWxlbWVudGAgaXMgcHJvdmlkZWQsIHRoZSBlbGVtZW50XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdHNlbGYgaXMgYXNzaWduZWQgKGV2ZW4gaWYgYSBjb250cm9sbGVyIGlzIGF2YWlsYWJsZSkuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgU2ltcGxlIHRvZ2dsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0aGUgY29udHJvbGxlciBvZiB0aGUgY29tcG9uZW50IHRvZ2dsZVxuICogaXMgcmV1c2VkIGluIHRoZSB0ZW1wbGF0ZSB0aHJvdWdoIHRoZSBzY29wZSB0byB1c2UgaXRzIGxvZ2ljLlxuICogPGV4YW1wbGUgbmFtZT1cIm5nLXJlZi1jb21wb25lbnRcIiBtb2R1bGU9XCJteUFwcFwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxteS10b2dnbGUgbmctcmVmPVwibXlUb2dnbGVcIj48L215LXRvZ2dsZT5cbiAqICAgICA8YnV0dG9uIG5nLWNsaWNrPVwibXlUb2dnbGUudG9nZ2xlKClcIj5Ub2dnbGU8L2J1dHRvbj5cbiAqICAgICA8ZGl2IG5nLXNob3c9XCJteVRvZ2dsZS5pc09wZW4oKVwiPlxuICogICAgICAgWW91IGFyZSB1c2luZyBhIGNvbXBvbmVudCBpbiB0aGUgc2FtZSB0ZW1wbGF0ZSB0byBzaG93IGl0LlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFtdKVxuICogICAgIC5jb21wb25lbnQoJ215VG9nZ2xlJywge1xuICogICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gVG9nZ2xlQ29udHJvbGxlcigpIHtcbiAqICAgICAgICAgdmFyIG9wZW5lZCA9IGZhbHNlO1xuICogICAgICAgICB0aGlzLmlzT3BlbiA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gb3BlbmVkOyB9O1xuICogICAgICAgICB0aGlzLnRvZ2dsZSA9IGZ1bmN0aW9uKCkgeyBvcGVuZWQgPSAhb3BlbmVkOyB9O1xuICogICAgICAgfVxuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICAgaXQoJ3Nob3VsZCBwdWJsaXNoIHRoZSB0b2dnbGUgaW50byB0aGUgc2NvcGUnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgICB2YXIgdG9nZ2xlID0gZWxlbWVudChieS5idXR0b25UZXh0KCdUb2dnbGUnKSk7XG4gKiAgICAgICAgZXhwZWN0KHRvZ2dsZS5ldmFsdWF0ZSgnbXlUb2dnbGUuaXNPcGVuKCknKSkudG9FcXVhbChmYWxzZSk7XG4gKiAgICAgICAgdG9nZ2xlLmNsaWNrKCk7XG4gKiAgICAgICAgZXhwZWN0KHRvZ2dsZS5ldmFsdWF0ZSgnbXlUb2dnbGUuaXNPcGVuKCknKSkudG9FcXVhbCh0cnVlKTtcbiAqICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIG5nUmVmIGluc2lkZSBzY29wZXNcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgYG5nUmVmYCB3b3JrcyB3aXRoIGNoaWxkIHNjb3Blcy4gVGhlIGBuZ1JlcGVhdGAtZWQgYG15V3JhcHBlcmAgY29tcG9uZW50c1xuICogYXJlIGFzc2lnbmVkIHRvIHRoZSBzY29wZSBvZiBgbXlSb290YCwgYmVjYXVzZSB0aGUgYHRvZ2dsZXNgIHByb3BlcnR5IGhhcyBiZWVuIGluaXRpYWxpemVkLlxuICogVGhlIHJlcGVhdGVkIGBteVRvZ2dsZWAgY29tcG9uZW50cyBhcmUgcHVibGlzaGVkIHRvIHRoZSBjaGlsZCBzY29wZXMgY3JlYXRlZCBieSBgbmdSZXBlYXRgLlxuICogYG5nSWZgIGJlaGF2ZXMgc2ltaWxhcmx5IC0gdGhlIGFzc2lnbm1lbnQgb2YgYG15VG9nZ2xlYCBoYXBwZW5zIGluIHRoZSBgbmdJZmAgY2hpbGQgc2NvcGUsXG4gKiBiZWNhdXNlIHRoZSB0YXJnZXQgcHJvcGVydHkgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIG9uIHRoZSBgbXlSb290YCBjb21wb25lbnQgY29udHJvbGxlci5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmctcmVmLXNjb3Blc1wiIG1vZHVsZT1cIm15QXBwXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPG15LXJvb3Q+PC9teS1yb290PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFtdKVxuICogICAgIC5jb21wb25lbnQoJ215Um9vdCcsIHtcbiAqICAgICAgIHRlbXBsYXRlVXJsOiAncm9vdC5odG1sJyxcbiAqICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICogICAgICAgICB0aGlzLndyYXBwZXJzID0gW107IC8vIGluaXRpYWxpemUgdGhlIGFycmF5IHNvIHRoYXQgdGhlIHdyYXBwZXJzIGFyZSBhc3NpZ25lZCBpbnRvIHRoZSBwYXJlbnQgc2NvcGVcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICogICAgIC5jb21wb25lbnQoJ215VG9nZ2xlJywge1xuICogICAgICAgdGVtcGxhdGU6ICc8c3Ryb25nPm15VG9nZ2xlPC9zdHJvbmc+PGJ1dHRvbiBuZy1jbGljaz1cIiRjdHJsLnRvZ2dsZSgpXCIgbmctdHJhbnNjbHVkZT48L2J1dHRvbj4nLFxuICogICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAqICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIFRvZ2dsZUNvbnRyb2xsZXIoKSB7XG4gKiAgICAgICAgIHZhciBvcGVuZWQgPSBmYWxzZTtcbiAqICAgICAgICAgdGhpcy5pc09wZW4gPSBmdW5jdGlvbigpIHsgcmV0dXJuIG9wZW5lZDsgfTtcbiAqICAgICAgICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbigpIHsgb3BlbmVkID0gIW9wZW5lZDsgfTtcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICogICAgIC5jb21wb25lbnQoJ215V3JhcHBlcicsIHtcbiAqICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gKiAgICAgICB0ZW1wbGF0ZTogJzxzdHJvbmc+bXlXcmFwcGVyPC9zdHJvbmc+JyArXG4gKiAgICAgICAgICc8ZGl2Pm5nUmVwZWF0VG9nZ2xlLmlzT3BlbigpOiB7eyRjdHJsLm5nUmVwZWF0VG9nZ2xlLmlzT3BlbigpIHwganNvbn19PC9kaXY+JyArXG4gKiAgICAgICAgICc8bXktdG9nZ2xlIG5nLXJlZj1cIiRjdHJsLm5nUmVwZWF0VG9nZ2xlXCI+PG5nLXRyYW5zY2x1ZGU+PC9uZy10cmFuc2NsdWRlPjwvbXktdG9nZ2xlPidcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicm9vdC5odG1sXCI+XG4gKiAgICAgPHN0cm9uZz5teVJvb3Q8L3N0cm9uZz5cbiAqICAgICA8bXktdG9nZ2xlIG5nLXJlZj1cIiRjdHJsLm91dGVyVG9nZ2xlXCI+T3V0ZXIgVG9nZ2xlPC9teS10b2dnbGU+XG4gKiAgICAgPGRpdj5vdXRlclRvZ2dsZS5pc09wZW4oKToge3skY3RybC5vdXRlclRvZ2dsZS5pc09wZW4oKSB8IGpzb259fTwvZGl2PlxuICogICAgIDxkaXY+PGVtPndyYXBwZXJzIGFzc2lnbmVkIHRvIHJvb3Q8L2VtPjxicj5cbiAqICAgICA8ZGl2IG5nLXJlcGVhdD1cIndyYXBwZXIgaW4gJGN0cmwud3JhcHBlcnNcIj5cbiAqICAgICAgIHdyYXBwZXIubmdSZXBlYXRUb2dnbGUuaXNPcGVuKCk6IHt7d3JhcHBlci5uZ1JlcGVhdFRvZ2dsZS5pc09wZW4oKSB8IGpzb259fVxuICogICAgIDwvZGl2PlxuICpcbiAqICAgICA8dWw+XG4gKiAgICAgICA8bGkgbmctcmVwZWF0PVwiKGluZGV4LCB2YWx1ZSkgaW4gWzEsMiwzXVwiPlxuICogICAgICAgICA8c3Ryb25nPm5nUmVwZWF0PC9zdHJvbmc+XG4gKiAgICAgICAgIDxkaXY+b3V0ZXJUb2dnbGUuaXNPcGVuKCk6IHt7JGN0cmwub3V0ZXJUb2dnbGUuaXNPcGVuKCkgfCBqc29ufX08L2Rpdj5cbiAqICAgICAgICAgPG15LXdyYXBwZXIgbmctcmVmPVwiJGN0cmwud3JhcHBlcnNbaW5kZXhdXCI+bmdSZXBlYXQgVG9nZ2xlIHt7JGluZGV4ICsgMX19PC9teS13cmFwcGVyPlxuICogICAgICAgPC9saT5cbiAqICAgICA8L3VsPlxuICpcbiAqICAgICA8ZGl2Pm5nSWZUb2dnbGUuaXNPcGVuKCk6IHt7bmdJZlRvZ2dsZS5pc09wZW4oKX19IC8vIFRoaXMgaXMgYWx3YXlzIHVuZGVmaW5lZCBiZWNhdXNlIGl0J3NcbiAqICAgICAgIGFzc2lnbmVkIHRvIHRoZSBjaGlsZCBzY29wZSBjcmVhdGVkIGJ5IG5nSWYuXG4gKiAgICAgPC9kaXY+XG4gKiAgICAgPGRpdiBuZy1pZj1cInRydWVcIj5cbiAgICAgICAgICA8c3Ryb25nPm5nSWY8L3N0cm9uZz5cbiAqICAgICAgICA8bXktdG9nZ2xlIG5nLXJlZj1cIm5nSWZUb2dnbGVcIj5uZ0lmIFRvZ2dsZTwvbXktdG9nZ2xlPlxuICogICAgICAgIDxkaXY+bmdJZlRvZ2dsZS5pc09wZW4oKToge3tuZ0lmVG9nZ2xlLmlzT3BlbigpIHwganNvbn19PC9kaXY+XG4gKiAgICAgICAgPGRpdj5vdXRlclRvZ2dsZS5pc09wZW4oKToge3skY3RybC5vdXRlclRvZ2dsZS5pc09wZW4oKSB8IGpzb259fTwvZGl2PlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJzdHlsZXMuY3NzXCI+XG4gKiAgICAgdWwge1xuICogICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAqICAgICAgIHBhZGRpbmctbGVmdDogMDtcbiAqICAgICB9XG4gKlxuICogICAgIGxpW25nLXJlcGVhdF0ge1xuICogICAgICAgYmFja2dyb3VuZDogbGlnaHRncmVlbjtcbiAqICAgICAgIHBhZGRpbmc6IDhweDtcbiAqICAgICAgIG1hcmdpbjogOHB4O1xuICogICAgIH1cbiAqXG4gKiAgICAgW25nLWlmXSB7XG4gKiAgICAgICBiYWNrZ3JvdW5kOiBsaWdodGdyZXk7XG4gKiAgICAgICBwYWRkaW5nOiA4cHg7XG4gKiAgICAgfVxuICpcbiAqICAgICBteS1yb290IHtcbiAqICAgICAgIGJhY2tncm91bmQ6IGxpZ2h0Z29sZGVucm9keWVsbG93O1xuICogICAgICAgcGFkZGluZzogOHB4O1xuICogICAgICAgZGlzcGxheTogYmxvY2s7XG4gKiAgICAgfVxuICpcbiAqICAgICBteS13cmFwcGVyIHtcbiAqICAgICAgIGJhY2tncm91bmQ6IGxpZ2h0c2FsbW9uO1xuICogICAgICAgcGFkZGluZzogOHB4O1xuICogICAgICAgZGlzcGxheTogYmxvY2s7XG4gKiAgICAgfVxuICpcbiAqICAgICBteS10b2dnbGUge1xuICogICAgICAgYmFja2dyb3VuZDogbGlnaHRibHVlO1xuICogICAgICAgcGFkZGluZzogOHB4O1xuICogICAgICAgZGlzcGxheTogYmxvY2s7XG4gKiAgICAgfVxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICAgdmFyIE91dGVyVG9nZ2xlID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAgIGVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnT3V0ZXIgVG9nZ2xlJykpLmNsaWNrKCk7XG4gKiAgICAgICAgfTtcbiAqICAgICAgICB0aGlzLmlzT3BlbiA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgcmV0dXJuIGVsZW1lbnQuYWxsKGJ5LmJpbmRpbmcoJ291dGVyVG9nZ2xlLmlzT3BlbigpJykpLmZpcnN0KCkuZ2V0VGV4dCgpO1xuICogICAgICAgIH07XG4gKiAgICAgIH07XG4gKiAgICAgIHZhciBOZ1JlcGVhdFRvZ2dsZSA9IGZ1bmN0aW9uKGkpIHtcbiAqICAgICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoJyhpbmRleCwgdmFsdWUpIGluIFsxLDIsM10nKSkuZ2V0KGkgLSAxKTtcbiAqICAgICAgICB0aGlzLnRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgZWxlbWVudChieS5idXR0b25UZXh0KCduZ1JlcGVhdCBUb2dnbGUgJyArIGkpKS5jbGljaygpO1xuICogICAgICAgIH07XG4gKiAgICAgICAgdGhpcy5pc09wZW4gPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAgIHJldHVybiBwYXJlbnQuZWxlbWVudChieS5iaW5kaW5nKCduZ1JlcGVhdFRvZ2dsZS5pc09wZW4oKSB8IGpzb24nKSkuZ2V0VGV4dCgpO1xuICogICAgICAgIH07XG4gKiAgICAgICAgdGhpcy5pc091dGVyT3BlbiA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgcmV0dXJuIHBhcmVudC5lbGVtZW50KGJ5LmJpbmRpbmcoJ291dGVyVG9nZ2xlLmlzT3BlbigpIHwganNvbicpKS5nZXRUZXh0KCk7XG4gKiAgICAgICAgfTtcbiAqICAgICAgfTtcbiAqICAgICAgdmFyIE5nUmVwZWF0VG9nZ2xlcyA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgIHZhciB0b2dnbGVzID0gWzEsMiwzXS5tYXAoZnVuY3Rpb24oaSkgeyByZXR1cm4gbmV3IE5nUmVwZWF0VG9nZ2xlKGkpOyB9KTtcbiAqICAgICAgICB0aGlzLmZvckVhY2ggPSBmdW5jdGlvbihmbikge1xuICogICAgICAgICAgdG9nZ2xlcy5mb3JFYWNoKGZuKTtcbiAqICAgICAgICB9O1xuICogICAgICAgIHRoaXMuaXNPdXRlck9wZW4gPSBmdW5jdGlvbihpKSB7XG4gKiAgICAgICAgICByZXR1cm4gdG9nZ2xlc1tpIC0gMV0uaXNPdXRlck9wZW4oKTtcbiAqICAgICAgICB9O1xuICogICAgICB9O1xuICogICAgICB2YXIgTmdJZlRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50KGJ5LmNzcygnW25nLWlmXScpKTtcbiAqICAgICAgICB0aGlzLnRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgZWxlbWVudChieS5idXR0b25UZXh0KCduZ0lmIFRvZ2dsZScpKS5jbGljaygpO1xuICogICAgICAgIH07XG4gKiAgICAgICAgdGhpcy5pc09wZW4gPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAgIHJldHVybiBieS5iaW5kaW5nKCduZ0lmVG9nZ2xlLmlzT3BlbigpIHwganNvbicpLmdldFRleHQoKTtcbiAqICAgICAgICB9O1xuICogICAgICAgIHRoaXMuaXNPdXRlck9wZW4gPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAgIHJldHVybiBwYXJlbnQuZWxlbWVudChieS5iaW5kaW5nKCdvdXRlclRvZ2dsZS5pc09wZW4oKSB8IGpzb24nKSkuZ2V0VGV4dCgpO1xuICogICAgICAgIH07XG4gKiAgICAgIH07XG4gKlxuICogICAgICBpdCgnc2hvdWxkIHRvZ2dsZSB0aGUgb3V0ZXIgdG9nZ2xlJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgdmFyIG91dGVyVG9nZ2xlID0gbmV3IE91dGVyVG9nZ2xlKCk7XG4gKiAgICAgICAgZXhwZWN0KG91dGVyVG9nZ2xlLmlzT3BlbigpKS50b0VxdWFsKCdvdXRlclRvZ2dsZS5pc09wZW4oKTogZmFsc2UnKTtcbiAqICAgICAgICBvdXRlclRvZ2dsZS50b2dnbGUoKTtcbiAqICAgICAgICBleHBlY3Qob3V0ZXJUb2dnbGUuaXNPcGVuKCkpLnRvRXF1YWwoJ291dGVyVG9nZ2xlLmlzT3BlbigpOiB0cnVlJyk7XG4gKiAgICAgIH0pO1xuICpcbiAqICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgYWxsIG91dGVyIHRvZ2dsZXMnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgICB2YXIgb3V0ZXJUb2dnbGUgPSBuZXcgT3V0ZXJUb2dnbGUoKTtcbiAqICAgICAgICB2YXIgcmVwZWF0VG9nZ2xlcyA9IG5ldyBOZ1JlcGVhdFRvZ2dsZXMoKTtcbiAqICAgICAgICB2YXIgaWZUb2dnbGUgPSBuZXcgTmdJZlRvZ2dsZSgpO1xuICogICAgICAgIGV4cGVjdChvdXRlclRvZ2dsZS5pc09wZW4oKSkudG9FcXVhbCgnb3V0ZXJUb2dnbGUuaXNPcGVuKCk6IGZhbHNlJyk7XG4gKiAgICAgICAgZXhwZWN0KHJlcGVhdFRvZ2dsZXMuaXNPdXRlck9wZW4oMSkpLnRvRXF1YWwoJ291dGVyVG9nZ2xlLmlzT3BlbigpOiBmYWxzZScpO1xuICogICAgICAgIGV4cGVjdChyZXBlYXRUb2dnbGVzLmlzT3V0ZXJPcGVuKDIpKS50b0VxdWFsKCdvdXRlclRvZ2dsZS5pc09wZW4oKTogZmFsc2UnKTtcbiAqICAgICAgICBleHBlY3QocmVwZWF0VG9nZ2xlcy5pc091dGVyT3BlbigzKSkudG9FcXVhbCgnb3V0ZXJUb2dnbGUuaXNPcGVuKCk6IGZhbHNlJyk7XG4gKiAgICAgICAgZXhwZWN0KGlmVG9nZ2xlLmlzT3V0ZXJPcGVuKCkpLnRvRXF1YWwoJ291dGVyVG9nZ2xlLmlzT3BlbigpOiBmYWxzZScpO1xuICogICAgICAgIG91dGVyVG9nZ2xlLnRvZ2dsZSgpO1xuICogICAgICAgIGV4cGVjdChvdXRlclRvZ2dsZS5pc09wZW4oKSkudG9FcXVhbCgnb3V0ZXJUb2dnbGUuaXNPcGVuKCk6IHRydWUnKTtcbiAqICAgICAgICBleHBlY3QocmVwZWF0VG9nZ2xlcy5pc091dGVyT3BlbigxKSkudG9FcXVhbCgnb3V0ZXJUb2dnbGUuaXNPcGVuKCk6IHRydWUnKTtcbiAqICAgICAgICBleHBlY3QocmVwZWF0VG9nZ2xlcy5pc091dGVyT3BlbigyKSkudG9FcXVhbCgnb3V0ZXJUb2dnbGUuaXNPcGVuKCk6IHRydWUnKTtcbiAqICAgICAgICBleHBlY3QocmVwZWF0VG9nZ2xlcy5pc091dGVyT3BlbigzKSkudG9FcXVhbCgnb3V0ZXJUb2dnbGUuaXNPcGVuKCk6IHRydWUnKTtcbiAqICAgICAgICBleHBlY3QoaWZUb2dnbGUuaXNPdXRlck9wZW4oKSkudG9FcXVhbCgnb3V0ZXJUb2dnbGUuaXNPcGVuKCk6IHRydWUnKTtcbiAqICAgICAgfSk7XG4gKlxuICogICAgICBpdCgnc2hvdWxkIHRvZ2dsZSBlYWNoIHJlcGVhdCBpdGVyYXRpb24gc2VwYXJhdGVseScsIGZ1bmN0aW9uKCkge1xuICogICAgICAgIHZhciByZXBlYXRUb2dnbGVzID0gbmV3IE5nUmVwZWF0VG9nZ2xlcygpO1xuICpcbiAqICAgICAgICByZXBlYXRUb2dnbGVzLmZvckVhY2goZnVuY3Rpb24ocmVwZWF0VG9nZ2xlKSB7XG4gKiAgICAgICAgICBleHBlY3QocmVwZWF0VG9nZ2xlLmlzT3BlbigpKS50b0VxdWFsKCduZ1JlcGVhdFRvZ2dsZS5pc09wZW4oKTogZmFsc2UnKTtcbiAqICAgICAgICAgIGV4cGVjdChyZXBlYXRUb2dnbGUuaXNPdXRlck9wZW4oKSkudG9FcXVhbCgnb3V0ZXJUb2dnbGUuaXNPcGVuKCk6IGZhbHNlJyk7XG4gKiAgICAgICAgICByZXBlYXRUb2dnbGUudG9nZ2xlKCk7XG4gKiAgICAgICAgICBleHBlY3QocmVwZWF0VG9nZ2xlLmlzT3BlbigpKS50b0VxdWFsKCduZ1JlcGVhdFRvZ2dsZS5pc09wZW4oKTogdHJ1ZScpO1xuICogICAgICAgICAgZXhwZWN0KHJlcGVhdFRvZ2dsZS5pc091dGVyT3BlbigpKS50b0VxdWFsKCdvdXRlclRvZ2dsZS5pc09wZW4oKTogZmFsc2UnKTtcbiAqICAgICAgICB9KTtcbiAqICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKi9cblxudmFyIG5nUmVmTWluRXJyID0gbWluRXJyKCduZ1JlZicpO1xuXG52YXIgbmdSZWZEaXJlY3RpdmUgPSBbJyRwYXJzZScsIGZ1bmN0aW9uKCRwYXJzZSkge1xuICByZXR1cm4ge1xuICAgIHByaW9yaXR5OiAtMSwgLy8gTmVlZGVkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggZWxlbWVudCB0cmFuc2NsdXNpb24gb24gdGhlIHNhbWUgZWxlbWVudFxuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgY29tcGlsZTogZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykge1xuICAgICAgLy8gR2V0IHRoZSBleHBlY3RlZCBjb250cm9sbGVyIG5hbWUsIGNvbnZlcnRzIDxkYXRhLXNvbWUtdGhpbmc+IGludG8gXCJzb21lVGhpbmdcIlxuICAgICAgdmFyIGNvbnRyb2xsZXJOYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG5vZGVOYW1lXyh0RWxlbWVudCkpO1xuXG4gICAgICAvLyBHZXQgdGhlIGV4cHJlc3Npb24gZm9yIHZhbHVlIGJpbmRpbmdcbiAgICAgIHZhciBnZXR0ZXIgPSAkcGFyc2UodEF0dHJzLm5nUmVmKTtcbiAgICAgIHZhciBzZXR0ZXIgPSBnZXR0ZXIuYXNzaWduIHx8IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aHJvdyBuZ1JlZk1pbkVycignbm9uYXNzaWduJywgJ0V4cHJlc3Npb24gaW4gbmdSZWY9XCJ7MH1cIiBpcyBub24tYXNzaWduYWJsZSEnLCB0QXR0cnMubmdSZWYpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB2YXIgcmVmVmFsdWU7XG5cbiAgICAgICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KCduZ1JlZlJlYWQnKSkge1xuICAgICAgICAgIGlmIChhdHRycy5uZ1JlZlJlYWQgPT09ICckZWxlbWVudCcpIHtcbiAgICAgICAgICAgIHJlZlZhbHVlID0gZWxlbWVudDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVmVmFsdWUgPSBlbGVtZW50LmRhdGEoJyQnICsgYXR0cnMubmdSZWZSZWFkICsgJ0NvbnRyb2xsZXInKTtcblxuICAgICAgICAgICAgaWYgKCFyZWZWYWx1ZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZ1JlZk1pbkVycihcbiAgICAgICAgICAgICAgICAnbm9jdHJsJyxcbiAgICAgICAgICAgICAgICAnVGhlIGNvbnRyb2xsZXIgZm9yIG5nUmVmUmVhZD1cInswfVwiIGNvdWxkIG5vdCBiZSBmb3VuZCBvbiBuZ1JlZj1cInsxfVwiJyxcbiAgICAgICAgICAgICAgICBhdHRycy5uZ1JlZlJlYWQsXG4gICAgICAgICAgICAgICAgdEF0dHJzLm5nUmVmXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlZlZhbHVlID0gZWxlbWVudC5kYXRhKCckJyArIGNvbnRyb2xsZXJOYW1lICsgJ0NvbnRyb2xsZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZlZhbHVlID0gcmVmVmFsdWUgfHwgZWxlbWVudDtcblxuICAgICAgICBzZXR0ZXIoc2NvcGUsIHJlZlZhbHVlKTtcblxuICAgICAgICAvLyB3aGVuIHRoZSBlbGVtZW50IGlzIHJlbW92ZWQsIHJlbW92ZSBpdCAobnVsbGlmeSBpdClcbiAgICAgICAgZWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyBvbmx5IHJlbW92ZSBpdCBpZiB2YWx1ZSBoYXMgbm90IGNoYW5nZWQsXG4gICAgICAgICAgLy8gYmVjYXVzZSBhbmltYXRpb25zIChhbmQgb3RoZXIgcHJvY2VkdXJlcykgbWF5IGR1cGxpY2F0ZSBlbGVtZW50c1xuICAgICAgICAgIGlmIChnZXR0ZXIoc2NvcGUpID09PSByZWZWYWx1ZSkge1xuICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuLyogZXhwb3J0ZWQgbmdSZXBlYXREaXJlY3RpdmUgKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1JlcGVhdFxuICogQG11bHRpRWxlbWVudFxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdSZXBlYXRgIGRpcmVjdGl2ZSBpbnN0YW50aWF0ZXMgYSB0ZW1wbGF0ZSBvbmNlIHBlciBpdGVtIGZyb20gYSBjb2xsZWN0aW9uLiBFYWNoIHRlbXBsYXRlXG4gKiBpbnN0YW5jZSBnZXRzIGl0cyBvd24gc2NvcGUsIHdoZXJlIHRoZSBnaXZlbiBsb29wIHZhcmlhYmxlIGlzIHNldCB0byB0aGUgY3VycmVudCBjb2xsZWN0aW9uIGl0ZW0sXG4gKiBhbmQgYCRpbmRleGAgaXMgc2V0IHRvIHRoZSBpdGVtIGluZGV4IG9yIGtleS5cbiAqXG4gKiBTcGVjaWFsIHByb3BlcnRpZXMgYXJlIGV4cG9zZWQgb24gdGhlIGxvY2FsIHNjb3BlIG9mIGVhY2ggdGVtcGxhdGUgaW5zdGFuY2UsIGluY2x1ZGluZzpcbiAqXG4gKiB8IFZhcmlhYmxlICB8IFR5cGUgICAgICAgICAgICB8IERldGFpbHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IGAkaW5kZXhgICB8IHtAdHlwZSBudW1iZXJ9ICB8IGl0ZXJhdG9yIG9mZnNldCBvZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCAoMC4ubGVuZ3RoLTEpICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkZmlyc3RgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgZmlyc3QgaW4gdGhlIGl0ZXJhdG9yLiAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkbWlkZGxlYCB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgaW4gdGhlIGl0ZXJhdG9yLiB8XG4gKiB8IGAkbGFzdGAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgbGFzdCBpbiB0aGUgaXRlcmF0b3IuICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkZXZlbmAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIGl0ZXJhdG9yIHBvc2l0aW9uIGAkaW5kZXhgIGlzIGV2ZW4gKG90aGVyd2lzZSBmYWxzZSkuICAgICAgICAgICB8XG4gKiB8IGAkb2RkYCAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIGl0ZXJhdG9yIHBvc2l0aW9uIGAkaW5kZXhgIGlzIG9kZCAob3RoZXJ3aXNlIGZhbHNlKS4gICAgICAgICAgICB8XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICAgQ3JlYXRpbmcgYWxpYXNlcyBmb3IgdGhlc2UgcHJvcGVydGllcyBpcyBwb3NzaWJsZSB3aXRoIHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbml0IGBuZ0luaXRgfS5cbiAqICAgVGhpcyBtYXkgYmUgdXNlZnVsIHdoZW4sIGZvciBpbnN0YW5jZSwgbmVzdGluZyBuZ1JlcGVhdHMuXG4gKiA8L2Rpdj5cbiAqXG4gKlxuICogIyMgSXRlcmF0aW5nIG92ZXIgb2JqZWN0IHByb3BlcnRpZXNcbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBnZXQgYG5nUmVwZWF0YCB0byBpdGVyYXRlIG92ZXIgdGhlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0IHVzaW5nIHRoZSBmb2xsb3dpbmdcbiAqIHN5bnRheDpcbiAqXG4gKiBgYGBqc1xuICogPGRpdiBuZy1yZXBlYXQ9XCIoa2V5LCB2YWx1ZSkgaW4gbXlPYmpcIj4gLi4uIDwvZGl2PlxuICogYGBgXG4gKlxuICogSG93ZXZlciwgdGhlcmUgYXJlIGEgZmV3IGxpbWl0YXRpb25zIGNvbXBhcmVkIHRvIGFycmF5IGl0ZXJhdGlvbjpcbiAqXG4gKiAtIFRoZSBKYXZhU2NyaXB0IHNwZWNpZmljYXRpb24gZG9lcyBub3QgZGVmaW5lIHRoZSBvcmRlciBvZiBrZXlzXG4gKiAgIHJldHVybmVkIGZvciBhbiBvYmplY3QsIHNvIEFuZ3VsYXJKUyByZWxpZXMgb24gdGhlIG9yZGVyIHJldHVybmVkIGJ5IHRoZSBicm93c2VyXG4gKiAgIHdoZW4gcnVubmluZyBgZm9yIGtleSBpbiBteU9iamAuIEJyb3dzZXJzIGdlbmVyYWxseSBmb2xsb3cgdGhlIHN0cmF0ZWd5IG9mIHByb3ZpZGluZ1xuICogICBrZXlzIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IHdlcmUgZGVmaW5lZCwgYWx0aG91Z2ggdGhlcmUgYXJlIGV4Y2VwdGlvbnMgd2hlbiBrZXlzIGFyZSBkZWxldGVkXG4gKiAgIGFuZCByZWluc3RhdGVkLiBTZWUgdGhlXG4gKiAgIFtNRE4gcGFnZSBvbiBgZGVsZXRlYCBmb3IgbW9yZSBpbmZvXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9PcGVyYXRvcnMvZGVsZXRlI0Nyb3NzLWJyb3dzZXJfbm90ZXMpLlxuICpcbiAqIC0gYG5nUmVwZWF0YCB3aWxsIHNpbGVudGx5ICppZ25vcmUqIG9iamVjdCBrZXlzIHN0YXJ0aW5nIHdpdGggYCRgLCBiZWNhdXNlXG4gKiAgIGl0J3MgYSBwcmVmaXggdXNlZCBieSBBbmd1bGFySlMgZm9yIHB1YmxpYyAoYCRgKSBhbmQgcHJpdmF0ZSAoYCQkYCkgcHJvcGVydGllcy5cbiAqXG4gKiAtIFRoZSBidWlsdC1pbiBmaWx0ZXJzIHtAbGluayBuZy5vcmRlckJ5IG9yZGVyQnl9IGFuZCB7QGxpbmsgbmcuZmlsdGVyIGZpbHRlcn0gZG8gbm90IHdvcmsgd2l0aFxuICogICBvYmplY3RzLCBhbmQgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB1c2VkIHdpdGggb25lLlxuICpcbiAqIElmIHlvdSBhcmUgaGl0dGluZyBhbnkgb2YgdGhlc2UgbGltaXRhdGlvbnMsIHRoZSByZWNvbW1lbmRlZCB3b3JrYXJvdW5kIGlzIHRvIGNvbnZlcnQgeW91ciBvYmplY3QgaW50byBhbiBhcnJheVxuICogdGhhdCBpcyBzb3J0ZWQgaW50byB0aGUgb3JkZXIgdGhhdCB5b3UgcHJlZmVyIGJlZm9yZSBwcm92aWRpbmcgaXQgdG8gYG5nUmVwZWF0YC4gWW91IGNvdWxkXG4gKiBkbyB0aGlzIHdpdGggYSBmaWx0ZXIgc3VjaCBhcyBbdG9BcnJheUZpbHRlcl0oaHR0cDovL25nbW9kdWxlcy5vcmcvbW9kdWxlcy9hbmd1bGFyLXRvQXJyYXlGaWx0ZXIpXG4gKiBvciBpbXBsZW1lbnQgYSBgJHdhdGNoYCBvbiB0aGUgb2JqZWN0IHlvdXJzZWxmLlxuICpcbiAqXG4gKiAjIyBUcmFja2luZyBhbmQgRHVwbGljYXRlc1xuICpcbiAqIGBuZ1JlcGVhdGAgdXNlcyB7QGxpbmsgJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hDb2xsZWN0aW9uICR3YXRjaENvbGxlY3Rpb259IHRvIGRldGVjdCBjaGFuZ2VzIGluXG4gKiB0aGUgY29sbGVjdGlvbi4gV2hlbiBhIGNoYW5nZSBoYXBwZW5zLCBgbmdSZXBlYXRgIHRoZW4gbWFrZXMgdGhlIGNvcnJlc3BvbmRpbmcgY2hhbmdlcyB0byB0aGUgRE9NOlxuICpcbiAqICogV2hlbiBhbiBpdGVtIGlzIGFkZGVkLCBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgdGVtcGxhdGUgaXMgYWRkZWQgdG8gdGhlIERPTS5cbiAqICogV2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQsIGl0cyB0ZW1wbGF0ZSBpbnN0YW5jZSBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAqICogV2hlbiBpdGVtcyBhcmUgcmVvcmRlcmVkLCB0aGVpciByZXNwZWN0aXZlIHRlbXBsYXRlcyBhcmUgcmVvcmRlcmVkIGluIHRoZSBET00uXG4gKlxuICogVG8gbWluaW1pemUgY3JlYXRpb24gb2YgRE9NIGVsZW1lbnRzLCBgbmdSZXBlYXRgIHVzZXMgYSBmdW5jdGlvblxuICogdG8gXCJrZWVwIHRyYWNrXCIgb2YgYWxsIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIERPTSBlbGVtZW50cy5cbiAqIEZvciBleGFtcGxlLCBpZiBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLCBgbmdSZXBlYXRgIHdpbGwga25vdyB0aGF0IGFsbCBvdGhlciBpdGVtc1xuICogYWxyZWFkeSBoYXZlIERPTSBlbGVtZW50cywgYW5kIHdpbGwgbm90IHJlLXJlbmRlciB0aGVtLlxuICpcbiAqIEFsbCBkaWZmZXJlbnQgdHlwZXMgb2YgdHJhY2tpbmcgZnVuY3Rpb25zLCB0aGVpciBzeW50YXgsIGFuZCBhbmQgdGhlaXIgc3VwcG9ydCBmb3IgZHVwbGljYXRlXG4gKiBpdGVtcyBpbiBjb2xsZWN0aW9ucyBjYW4gYmUgZm91bmQgaW4gdGhlXG4gKiB7QGxpbmsgbmdSZXBlYXQjbmdSZXBlYXQtYXJndW1lbnRzIG5nUmVwZWF0IGV4cHJlc3Npb24gZGVzY3JpcHRpb259LlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzXCI+XG4gKiAqKkJlc3QgUHJhY3RpY2U6KiogSWYgeW91IGFyZSB3b3JraW5nIHdpdGggb2JqZWN0cyB0aGF0IGhhdmUgYSB1bmlxdWUgaWRlbnRpZmllciBwcm9wZXJ0eSwgeW91XG4gKiBzaG91bGQgdHJhY2sgYnkgdGhpcyBpZGVudGlmaWVyIGluc3RlYWQgb2YgdGhlIG9iamVjdCBpbnN0YW5jZSxcbiAqIGUuZy4gYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgaXRlbS5pZGAuXG4gKiBTaG91bGQgeW91IHJlbG9hZCB5b3VyIGRhdGEgbGF0ZXIsIGBuZ1JlcGVhdGAgd2lsbCBub3QgaGF2ZSB0byByZWJ1aWxkIHRoZSBET00gZWxlbWVudHMgZm9yIGl0ZW1zXG4gKiBpdCBoYXMgYWxyZWFkeSByZW5kZXJlZCwgZXZlbiBpZiB0aGUgSmF2YVNjcmlwdCBvYmplY3RzIGluIHRoZSBjb2xsZWN0aW9uIGhhdmUgYmVlbiBzdWJzdGl0dXRlZFxuICogZm9yIG5ldyBvbmVzLiBGb3IgbGFyZ2UgY29sbGVjdGlvbnMsIHRoaXMgc2lnbmlmaWNhbnRseSBpbXByb3ZlcyByZW5kZXJpbmcgcGVyZm9ybWFuY2UuXG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyMgRWZmZWN0cyBvZiBET00gRWxlbWVudCByZS11c2VcbiAqXG4gKiBXaGVuIERPTSBlbGVtZW50cyBhcmUgcmUtdXNlZCwgbmdSZXBlYXQgdXBkYXRlcyB0aGUgc2NvcGUgZm9yIHRoZSBlbGVtZW50LCB3aGljaCB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVwZGF0ZSBhbnkgYWN0aXZlIGJpbmRpbmdzIG9uIHRoZSB0ZW1wbGF0ZS4gSG93ZXZlciwgb3RoZXJcbiAqIGZ1bmN0aW9uYWxpdHkgd2lsbCBub3QgYmUgdXBkYXRlZCwgYmVjYXVzZSB0aGUgZWxlbWVudCBpcyBub3QgcmUtY3JlYXRlZDpcbiAqXG4gKiAtIERpcmVjdGl2ZXMgYXJlIG5vdCByZS1jb21waWxlZFxuICogLSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiNvbmUtdGltZS1iaW5kaW5nIG9uZS10aW1lIGV4cHJlc3Npb25zfSBvbiB0aGUgcmVwZWF0ZWQgdGVtcGxhdGUgYXJlIG5vdFxuICogdXBkYXRlZCBpZiB0aGV5IGhhdmUgc3RhYmlsaXplZC5cbiAqXG4gKiBUaGUgYWJvdmUgYWZmZWN0cyBhbGwga2luZHMgb2YgZWxlbWVudCByZS11c2UgZHVlIHRvIHRyYWNraW5nLCBidXQgbWF5IGJlIGVzcGVjaWFsbHkgdmlzaWJsZVxuICogd2hlbiB0cmFja2luZyBieSBgJGluZGV4YCBkdWUgdG8gdGhlIHdheSBuZ1JlcGVhdCByZS11c2VzIGVsZW1lbnRzLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyB0aGUgZWZmZWN0cyBvZiBkaWZmZXJlbnQgYWN0aW9ucyB3aXRoIHRyYWNraW5nOlxuXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nUmVwZWF0XCIgbmFtZT1cIm5nUmVwZWF0LXRyYWNraW5nXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ25nUmVwZWF0JywgWyduZ0FuaW1hdGUnXSkuY29udHJvbGxlcigncmVwZWF0Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICB2YXIgZnJpZW5kcyA9IFtcbiAgICAgICAgICB7bmFtZTonSm9obicsIGFnZToyNX0sXG4gICAgICAgICAge25hbWU6J01hcnknLCBhZ2U6NDB9LFxuICAgICAgICAgIHtuYW1lOidQZXRlcicsIGFnZTo4NX1cbiAgICAgICAgXTtcblxuICAgICAgICAkc2NvcGUucmVtb3ZlRmlyc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuZnJpZW5kcy5zaGlmdCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS51cGRhdGVBZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuZnJpZW5kcy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICBlbC5hZ2UgPSBlbC5hZ2UgKyA1O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmZyaWVuZHMpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5mcmllbmRzID0gYW5ndWxhci5jb3B5KGZyaWVuZHMpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5yZXNldCgpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJyZXBlYXRDb250cm9sbGVyXCI+XG4gICAgICAgIDxvbD5cbiAgICAgICAgICA8bGk+V2hlbiB5b3UgY2xpY2sgXCJVcGRhdGUgQWdlXCIsIG9ubHkgdGhlIGZpcnN0IGxpc3QgdXBkYXRlcyB0aGUgYWdlLCBiZWNhdXNlIGFsbCBvdGhlcnMgaGF2ZVxuICAgICAgICAgIGEgb25lLXRpbWUgYmluZGluZyBvbiB0aGUgYWdlIHByb3BlcnR5LiBJZiB5b3UgdGhlbiBjbGljayBcIkNvcHlcIiwgdGhlIGN1cnJlbnQgZnJpZW5kIGxpc3RcbiAgICAgICAgICBpcyBjb3BpZWQsIGFuZCBub3cgdGhlIHNlY29uZCBsaXN0IHVwZGF0ZXMgdGhlIGFnZSwgYmVjYXVzZSB0aGUgaWRlbnRpdHkgb2YgdGhlIGNvbGxlY3Rpb24gaXRlbXNcbiAgICAgICAgICBoYXMgY2hhbmdlZCBhbmQgdGhlIGxpc3QgbXVzdCBiZSByZS1yZW5kZXJlZC4gVGhlIDNyZCBhbmQgNHRoIGxpc3Qgc3RheSB0aGUgc2FtZSwgYmVjYXVzZSBhbGwgdGhlXG4gICAgICAgICAgaXRlbXMgYXJlIGFscmVhZHkga25vd24gYWNjb3JkaW5nIHRvIHRoZWlyIHRyYWNraW5nIGZ1bmN0aW9ucy5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDxsaT5XaGVuIHlvdSBjbGljayBcIlJlbW92ZSBGaXJzdFwiLCB0aGUgNHRoIGxpc3QgaGFzIHRoZSB3cm9uZyBhZ2Ugb24gYm90aCByZW1haW5pbmcgaXRlbXMuIFRoaXMgaXNcbiAgICAgICAgICBkdWUgdG8gdHJhY2tpbmcgYnkgJGluZGV4OiB3aGVuIHRoZSBmaXJzdCBjb2xsZWN0aW9uIGl0ZW0gaXMgcmVtb3ZlZCwgbmdSZXBlYXQgcmV1c2VzIHRoZSBmaXJzdFxuICAgICAgICAgIERPTSBlbGVtZW50IGZvciB0aGUgbmV3IGZpcnN0IGNvbGxlY3Rpb24gaXRlbSwgYW5kIHNvIG9uLiBTaW5jZSB0aGUgYWdlIHByb3BlcnR5IGlzIG9uZS10aW1lXG4gICAgICAgICAgYm91bmQsIHRoZSB2YWx1ZSByZW1haW5zIGZyb20gdGhlIGNvbGxlY3Rpb24gaXRlbSB3aGljaCB3YXMgcHJldmlvdXNseSBhdCB0aGlzIGluZGV4LlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvb2w+XG5cbiAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInJlbW92ZUZpcnN0KClcIj5SZW1vdmUgRmlyc3Q8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInVwZGF0ZUFnZSgpXCI+VXBkYXRlIEFnZTwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY29weSgpXCI+Q29weTwvYnV0dG9uPlxuICAgICAgICA8YnI+PGJ1dHRvbiBuZy1jbGljaz1cInJlc2V0KClcIj5SZXNldCBMaXN0PC9idXR0b24+XG4gICAgICAgIDxicj5cbiAgICAgICAgPGNvZGU+dHJhY2sgYnkgJGlkKGZyaWVuZCk8L2NvZGU+IChkZWZhdWx0KTpcbiAgICAgICAgPHVsIGNsYXNzPVwiZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHNcIj5cbiAgICAgICAgICAgIHt7ZnJpZW5kLm5hbWV9fSBpcyB7e2ZyaWVuZC5hZ2V9fSB5ZWFycyBvbGQuXG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGNvZGU+dHJhY2sgYnkgJGlkKGZyaWVuZCk8L2NvZGU+IChkZWZhdWx0KSwgd2l0aCBhZ2Ugb25lLXRpbWUgYmluZGluZzpcbiAgICAgICAgPHVsIGNsYXNzPVwiZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHNcIj5cbiAgICAgICAgICAgIHt7ZnJpZW5kLm5hbWV9fSBpcyB7ezo6ZnJpZW5kLmFnZX19IHllYXJzIG9sZC5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgICA8Y29kZT50cmFjayBieSBmcmllbmQubmFtZTwvY29kZT4sIHdpdGggYWdlIG9uZS10aW1lIGJpbmRpbmc6XG4gICAgICAgIDx1bCBjbGFzcz1cImV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJhbmltYXRlLXJlcGVhdFwiIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHRyYWNrIGJ5IGZyaWVuZC5uYW1lXCI+XG4gICAgICAgICAgICB7e2ZyaWVuZC5uYW1lfX0gIGlzIHt7OjpmcmllbmQuYWdlfX0geWVhcnMgb2xkLlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIDxjb2RlPnRyYWNrIGJ5ICRpbmRleDwvY29kZT4sIHdpdGggYWdlIG9uZS10aW1lIGJpbmRpbmc6XG4gICAgICAgIDx1bCBjbGFzcz1cImV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJhbmltYXRlLXJlcGVhdFwiIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHRyYWNrIGJ5ICRpbmRleFwiPlxuICAgICAgICAgICAge3tmcmllbmQubmFtZX19IGlzIHt7OjpmcmllbmQuYWdlfX0geWVhcnMgb2xkLlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lciB7XG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGxpc3Qtc3R5bGU6bm9uZTtcbiAgICAgICAgbWFyZ2luOjA7XG4gICAgICAgIHBhZGRpbmc6MCAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQge1xuICAgICAgICBsaW5lLWhlaWdodDozMHB4O1xuICAgICAgICBsaXN0LXN0eWxlOm5vbmU7XG4gICAgICAgIGJveC1zaXppbmc6Ym9yZGVyLWJveDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUge1xuICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyIHtcbiAgICAgICAgb3BhY2l0eTowO1xuICAgICAgICBtYXgtaGVpZ2h0OjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLm5nLW1vdmUtYWN0aXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XG4gICAgICAgIG9wYWNpdHk6MTtcbiAgICAgICAgbWF4LWhlaWdodDozMHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuXG4gKlxuICogIyMgU3BlY2lhbCByZXBlYXQgc3RhcnQgYW5kIGVuZCBwb2ludHNcbiAqIFRvIHJlcGVhdCBhIHNlcmllcyBvZiBlbGVtZW50cyBpbnN0ZWFkIG9mIGp1c3Qgb25lIHBhcmVudCBlbGVtZW50LCBuZ1JlcGVhdCAoYXMgd2VsbCBhcyBvdGhlciBuZyBkaXJlY3RpdmVzKSBzdXBwb3J0cyBleHRlbmRpbmdcbiAqIHRoZSByYW5nZSBvZiB0aGUgcmVwZWF0ZXIgYnkgZGVmaW5pbmcgZXhwbGljaXQgc3RhcnQgYW5kIGVuZCBwb2ludHMgYnkgdXNpbmcgKipuZy1yZXBlYXQtc3RhcnQqKiBhbmQgKipuZy1yZXBlYXQtZW5kKiogcmVzcGVjdGl2ZWx5LlxuICogVGhlICoqbmctcmVwZWF0LXN0YXJ0KiogZGlyZWN0aXZlIHdvcmtzIHRoZSBzYW1lIGFzICoqbmctcmVwZWF0KiosIGJ1dCB3aWxsIHJlcGVhdCBhbGwgdGhlIEhUTUwgY29kZSAoaW5jbHVkaW5nIHRoZSB0YWcgaXQncyBkZWZpbmVkIG9uKVxuICogdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgZW5kaW5nIEhUTUwgdGFnIHdoZXJlICoqbmctcmVwZWF0LWVuZCoqIGlzIHBsYWNlZC5cbiAqXG4gKiBUaGUgZXhhbXBsZSBiZWxvdyBtYWtlcyB1c2Ugb2YgdGhpcyBmZWF0dXJlOlxuICogYGBgaHRtbFxuICogICA8aGVhZGVyIG5nLXJlcGVhdC1zdGFydD1cIml0ZW0gaW4gaXRlbXNcIj5cbiAqICAgICBIZWFkZXIge3sgaXRlbSB9fVxuICogICA8L2hlYWRlcj5cbiAqICAgPGRpdiBjbGFzcz1cImJvZHlcIj5cbiAqICAgICBCb2R5IHt7IGl0ZW0gfX1cbiAqICAgPC9kaXY+XG4gKiAgIDxmb290ZXIgbmctcmVwZWF0LWVuZD5cbiAqICAgICBGb290ZXIge3sgaXRlbSB9fVxuICogICA8L2Zvb3Rlcj5cbiAqIGBgYFxuICpcbiAqIEFuZCB3aXRoIGFuIGlucHV0IG9mIHtAdHlwZSBbJ0EnLCdCJ119IGZvciB0aGUgaXRlbXMgdmFyaWFibGUgaW4gdGhlIGV4YW1wbGUgYWJvdmUsIHRoZSBvdXRwdXQgd2lsbCBldmFsdWF0ZSB0bzpcbiAqIGBgYGh0bWxcbiAqICAgPGhlYWRlcj5cbiAqICAgICBIZWFkZXIgQVxuICogICA8L2hlYWRlcj5cbiAqICAgPGRpdiBjbGFzcz1cImJvZHlcIj5cbiAqICAgICBCb2R5IEFcbiAqICAgPC9kaXY+XG4gKiAgIDxmb290ZXI+XG4gKiAgICAgRm9vdGVyIEFcbiAqICAgPC9mb290ZXI+XG4gKiAgIDxoZWFkZXI+XG4gKiAgICAgSGVhZGVyIEJcbiAqICAgPC9oZWFkZXI+XG4gKiAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XG4gKiAgICAgQm9keSBCXG4gKiAgIDwvZGl2PlxuICogICA8Zm9vdGVyPlxuICogICAgIEZvb3RlciBCXG4gKiAgIDwvZm9vdGVyPlxuICogYGBgXG4gKlxuICogVGhlIGN1c3RvbSBzdGFydCBhbmQgZW5kIHBvaW50cyBmb3IgbmdSZXBlYXQgYWxzbyBzdXBwb3J0IGFsbCBvdGhlciBIVE1MIGRpcmVjdGl2ZSBzeW50YXggZmxhdm9ycyBwcm92aWRlZCBpbiBBbmd1bGFySlMgKHN1Y2hcbiAqIGFzICoqZGF0YS1uZy1yZXBlYXQtc3RhcnQqKiwgKip4LW5nLXJlcGVhdC1zdGFydCoqIGFuZCAqKm5nOnJlcGVhdC1zdGFydCoqKS5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogfCBBbmltYXRpb24gICAgICAgICAgICAgICAgICAgICAgICB8IE9jY3VycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNlbnRlciBlbnRlcn0gfCB3aGVuIGEgbmV3IGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGxpc3Qgb3Igd2hlbiBhbiBpdGVtIGlzIHJldmVhbGVkIGFmdGVyIGEgZmlsdGVyIHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2xlYXZlIGxlYXZlfSB8IHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGxpc3Qgb3Igd2hlbiBhbiBpdGVtIGlzIGZpbHRlcmVkIG91dCB8XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNtb3ZlIG1vdmUgfSB8IHdoZW4gYW4gYWRqYWNlbnQgaXRlbSBpcyBmaWx0ZXJlZCBvdXQgY2F1c2luZyBhIHJlb3JkZXIgb3Igd2hlbiB0aGUgaXRlbSBjb250ZW50cyBhcmUgcmVvcmRlcmVkIHxcbiAqXG4gKiBTZWUgdGhlIGV4YW1wbGUgYmVsb3cgZm9yIGRlZmluaW5nIENTUyBhbmltYXRpb25zIHdpdGggbmdSZXBlYXQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSAxMDAwXG4gKiBAcGFyYW0ge3JlcGVhdF9leHByZXNzaW9ufSBuZ1JlcGVhdCBUaGUgZXhwcmVzc2lvbiBpbmRpY2F0aW5nIGhvdyB0byBlbnVtZXJhdGUgYSBjb2xsZWN0aW9uLiBUaGVzZVxuICogICBmb3JtYXRzIGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkOlxuICpcbiAqICAgKiBgdmFyaWFibGUgaW4gZXhwcmVzc2lvbmAg4oCTIHdoZXJlIHZhcmlhYmxlIGlzIHRoZSB1c2VyIGRlZmluZWQgbG9vcCB2YXJpYWJsZSBhbmQgYGV4cHJlc3Npb25gXG4gKiAgICAgaXMgYSBzY29wZSBleHByZXNzaW9uIGdpdmluZyB0aGUgY29sbGVjdGlvbiB0byBlbnVtZXJhdGUuXG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgYWxidW0gaW4gYXJ0aXN0LmFsYnVtc2AuXG4gKlxuICogICAqIGAoa2V5LCB2YWx1ZSkgaW4gZXhwcmVzc2lvbmAg4oCTIHdoZXJlIGBrZXlgIGFuZCBgdmFsdWVgIGNhbiBiZSBhbnkgdXNlciBkZWZpbmVkIGlkZW50aWZpZXJzLFxuICogICAgIGFuZCBgZXhwcmVzc2lvbmAgaXMgdGhlIHNjb3BlIGV4cHJlc3Npb24gZ2l2aW5nIHRoZSBjb2xsZWN0aW9uIHRvIGVudW1lcmF0ZS5cbiAqXG4gKiAgICAgRm9yIGV4YW1wbGU6IGAobmFtZSwgYWdlKSBpbiB7J2FkYW0nOjEwLCAnYW1hbGllJzoxMn1gLlxuICpcbiAqICAgKiBgdmFyaWFibGUgaW4gZXhwcmVzc2lvbiB0cmFjayBieSB0cmFja2luZ19leHByZXNzaW9uYCDigJMgWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gb3B0aW9uYWwgdHJhY2tpbmcgZXhwcmVzc2lvblxuICogICAgIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGFzc29jaWF0ZSB0aGUgb2JqZWN0cyBpbiB0aGUgY29sbGVjdGlvbiB3aXRoIHRoZSBET00gZWxlbWVudHMuIElmIG5vIHRyYWNraW5nIGV4cHJlc3Npb25cbiAqICAgICBpcyBzcGVjaWZpZWQsIG5nLXJlcGVhdCBhc3NvY2lhdGVzIGVsZW1lbnRzIGJ5IGlkZW50aXR5LiBJdCBpcyBhbiBlcnJvciB0byBoYXZlXG4gKiAgICAgbW9yZSB0aGFuIG9uZSB0cmFja2luZyBleHByZXNzaW9uIHZhbHVlIHJlc29sdmUgdG8gdGhlIHNhbWUga2V5LiAoVGhpcyB3b3VsZCBtZWFuIHRoYXQgdHdvIGRpc3RpbmN0IG9iamVjdHMgYXJlXG4gKiAgICAgbWFwcGVkIHRvIHRoZSBzYW1lIERPTSBlbGVtZW50LCB3aGljaCBpcyBub3QgcG9zc2libGUuKVxuICpcbiAqICAgICAqRGVmYXVsdCB0cmFja2luZzogJGlkKCkqOiBgaXRlbSBpbiBpdGVtc2AgaXMgZXF1aXZhbGVudCB0byBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSAkaWQoaXRlbSlgLlxuICogICAgIFRoaXMgaW1wbGllcyB0aGF0IHRoZSBET00gZWxlbWVudHMgd2lsbCBiZSBhc3NvY2lhdGVkIGJ5IGl0ZW0gaWRlbnRpdHkgaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogICAgIFRoZSBidWlsdC1pbiBgJGlkKClgIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGFzc2lnbiBhIHVuaXF1ZVxuICogICAgIGAkJGhhc2hLZXlgIHByb3BlcnR5IHRvIGVhY2ggaXRlbSBpbiB0aGUgY29sbGVjdGlvbi4gVGhpcyBwcm9wZXJ0eSBpcyB0aGVuIHVzZWQgYXMgYSBrZXkgdG8gYXNzb2NpYXRlZCBET00gZWxlbWVudHNcbiAqICAgICB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24gYnkgaWRlbnRpdHkuIE1vdmluZyB0aGUgc2FtZSBvYmplY3Qgd291bGQgbW92ZVxuICogICAgIHRoZSBET00gZWxlbWVudCBpbiB0aGUgc2FtZSB3YXkgaW4gdGhlIERPTS5cbiAqICAgICBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgaWQgZnVuY3Rpb24gZG9lcyBub3Qgc3VwcG9ydCBkdXBsaWNhdGUgcHJpbWl0aXZlIHZhbHVlcyAoYG51bWJlcmAsIGBzdHJpbmdgKSxcbiAqICAgICBidXQgc3VwcG9ydHMgZHVwbGljdGFlIG5vbi1wcmltaXRpdmUgdmFsdWVzIChgb2JqZWN0YCkgdGhhdCBhcmUgKmVxdWFsKiBpbiBzaGFwZS5cbiAqXG4gKiAgICAgKkN1c3RvbSBFeHByZXNzaW9uKjogSXQgaXMgcG9zc2libGUgdG8gdXNlIGFueSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBjb21wdXRlIHRoZSB0cmFja2luZ1xuICogICAgIGlkLCBmb3IgZXhhbXBsZSB3aXRoIGEgZnVuY3Rpb24sIG9yIHVzaW5nIGEgcHJvcGVydHkgb24gdGhlIGNvbGxlY3Rpb24gaXRlbXMuXG4gKiAgICAgYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgaXRlbS5pZGAgaXMgYSB0eXBpY2FsIHBhdHRlcm4gd2hlbiB0aGUgaXRlbXMgaGF2ZSBhIHVuaXF1ZSBpZGVudGlmaWVyLFxuICogICAgIGUuZy4gZGF0YWJhc2UgaWQuIEluIHRoaXMgY2FzZSB0aGUgb2JqZWN0IGlkZW50aXR5IGRvZXMgbm90IG1hdHRlci4gVHdvIG9iamVjdHMgYXJlIGNvbnNpZGVyZWRcbiAqICAgICBlcXVpdmFsZW50IGFzIGxvbmcgYXMgdGhlaXIgYGlkYCBwcm9wZXJ0eSBpcyBzYW1lLlxuICogICAgIFRyYWNraW5nIGJ5IHVuaXF1ZSBpZGVudGlmaWVyIGlzIHRoZSBtb3N0IHBlcmZvcm1hbnQgd2F5IGFuZCBzaG91bGQgYmUgdXNlZCB3aGVuZXZlciBwb3NzaWJsZS5cbiAqXG4gKiAgICAgKiRpbmRleCo6IFRoaXMgc3BlY2lhbCBwcm9wZXJ0eSB0cmFja3MgdGhlIGNvbGxlY3Rpb24gaXRlbXMgYnkgdGhlaXIgaW5kZXgsIGFuZFxuICogICAgIHJlLXVzZXMgdGhlIERPTSBlbGVtZW50cyB0aGF0IG1hdGNoIHRoYXQgaW5kZXgsIGUuZy4gYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgJGluZGV4YC4gVGhpcyBjYW5cbiAqICAgICBiZSB1c2VkIGZvciBhIHBlcmZvcm1hbmNlIGltcHJvdmVtZW50IGlmIG5vIHVuaXF1ZSBpZGVudGZpZXIgaXMgYXZhaWxhYmxlIGFuZCB0aGUgaWRlbnRpdHkgb2ZcbiAqICAgICB0aGUgY29sbGVjdGlvbiBpdGVtcyBjYW5ub3QgYmUgZWFzaWx5IGNvbXB1dGVkLiBJdCBhbHNvIGFsbG93cyBkdXBsaWNhdGVzLlxuICpcbiAqICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogICAgICAgPHN0cm9uZz5Ob3RlOjwvc3Ryb25nPiBSZS11c2luZyBET00gZWxlbWVudHMgY2FuIGhhdmUgdW5mb3Jlc2VlbiBlZmZlY3RzLiBSZWFkIHRoZVxuICogICAgICAge0BsaW5rIG5nUmVwZWF0I3RyYWNraW5nLWFuZC1kdXBsaWNhdGVzIHNlY3Rpb24gb24gdHJhY2tpbmcgYW5kIGR1cGxpY2F0ZXN9IGZvclxuICogICAgICAgbW9yZSBpbmZvLlxuICogICAgIDwvZGl2PlxuICpcbiAqICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogICAgICAgPHN0cm9uZz5Ob3RlOjwvc3Ryb25nPiB0aGUgYHRyYWNrIGJ5YCBleHByZXNzaW9uIG11c3QgY29tZSBsYXN0IC0gYWZ0ZXIgYW55IGZpbHRlcnMsIGFuZCB0aGUgYWxpYXMgZXhwcmVzc2lvbjpcbiAqICAgICAgIGBpdGVtIGluIGl0ZW1zIHwgZmlsdGVyOnNlYXJjaFRleHQgYXMgcmVzdWx0cyAgdHJhY2sgYnkgaXRlbS5pZGBcbiAqICAgICA8L2Rpdj5cbiAqXG4gKiAgICogYHZhcmlhYmxlIGluIGV4cHJlc3Npb24gYXMgYWxpYXNfZXhwcmVzc2lvbmAg4oCTIFlvdSBjYW4gYWxzbyBwcm92aWRlIGFuIG9wdGlvbmFsIGFsaWFzIGV4cHJlc3Npb24gd2hpY2ggd2lsbCB0aGVuIHN0b3JlIHRoZVxuICogICAgIGludGVybWVkaWF0ZSByZXN1bHRzIG9mIHRoZSByZXBlYXRlciBhZnRlciB0aGUgZmlsdGVycyBoYXZlIGJlZW4gYXBwbGllZC4gVHlwaWNhbGx5IHRoaXMgaXMgdXNlZCB0byByZW5kZXIgYSBzcGVjaWFsIG1lc3NhZ2VcbiAqICAgICB3aGVuIGEgZmlsdGVyIGlzIGFjdGl2ZSBvbiB0aGUgcmVwZWF0ZXIsIGJ1dCB0aGUgZmlsdGVyZWQgcmVzdWx0IHNldCBpcyBlbXB0eS5cbiAqXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zIHwgZmlsdGVyOnggYXMgcmVzdWx0c2Agd2lsbCBzdG9yZSB0aGUgZnJhZ21lbnQgb2YgdGhlIHJlcGVhdGVkIGl0ZW1zIGFzIGByZXN1bHRzYCwgYnV0IG9ubHkgYWZ0ZXJcbiAqICAgICB0aGUgaXRlbXMgaGF2ZSBiZWVuIHByb2Nlc3NlZCB0aHJvdWdoIHRoZSBmaWx0ZXIuXG4gKlxuICogICAgIFBsZWFzZSBub3RlIHRoYXQgYGFzIFt2YXJpYWJsZSBuYW1lXSBpcyBub3QgYW4gb3BlcmF0b3IgYnV0IHJhdGhlciBhIHBhcnQgb2YgbmdSZXBlYXRcbiAqICAgICBtaWNyby1zeW50YXggc28gaXQgY2FuIGJlIHVzZWQgb25seSBhZnRlciBhbGwgZmlsdGVycyAoYW5kIG5vdCBhcyBvcGVyYXRvciwgaW5zaWRlIGFuIGV4cHJlc3Npb24pLlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgfCBmaWx0ZXIgOiB4IHwgb3JkZXJCeSA6IG9yZGVyIHwgbGltaXRUbyA6IGxpbWl0IGFzIHJlc3VsdHMgdHJhY2sgYnkgaXRlbS5pZGAgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgdXNlcyBgbmdSZXBlYXRgIHRvIGRpc3BsYXkgYSBsaXN0IG9mIHBlb3BsZS4gQSBmaWx0ZXIgaXMgdXNlZCB0byByZXN0cmljdCB0aGUgZGlzcGxheWVkXG4gKiByZXN1bHRzIGJ5IG5hbWUgb3IgYnkgYWdlLiBOZXcgKGVudGVyaW5nKSBhbmQgcmVtb3ZlZCAobGVhdmluZykgaXRlbXMgYXJlIGFuaW1hdGVkLlxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ1JlcGVhdFwiIG5hbWU9XCJuZ1JlcGVhdFwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJyZXBlYXRDb250cm9sbGVyXCI+XG4gICAgICAgIEkgaGF2ZSB7e2ZyaWVuZHMubGVuZ3RofX0gZnJpZW5kcy4gVGhleSBhcmU6XG4gICAgICAgIDxpbnB1dCB0eXBlPVwic2VhcmNoXCIgbmctbW9kZWw9XCJxXCIgcGxhY2Vob2xkZXI9XCJmaWx0ZXIgZnJpZW5kcy4uLlwiIGFyaWEtbGFiZWw9XCJmaWx0ZXIgZnJpZW5kc1wiIC8+XG4gICAgICAgIDx1bCBjbGFzcz1cImV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJhbmltYXRlLXJlcGVhdFwiIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgZmlsdGVyOnEgYXMgcmVzdWx0cyB0cmFjayBieSBmcmllbmQubmFtZVwiPlxuICAgICAgICAgICAgW3t7JGluZGV4ICsgMX19XSB7e2ZyaWVuZC5uYW1lfX0gd2hvIGlzIHt7ZnJpZW5kLmFnZX19IHllYXJzIG9sZC5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctaWY9XCJyZXN1bHRzLmxlbmd0aCA9PT0gMFwiPlxuICAgICAgICAgICAgPHN0cm9uZz5ObyByZXN1bHRzIGZvdW5kLi4uPC9zdHJvbmc+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnbmdSZXBlYXQnLCBbJ25nQW5pbWF0ZSddKS5jb250cm9sbGVyKCdyZXBlYXRDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5mcmllbmRzID0gW1xuICAgICAgICAgIHtuYW1lOidKb2huJywgYWdlOjI1LCBnZW5kZXI6J2JveSd9LFxuICAgICAgICAgIHtuYW1lOidKZXNzaWUnLCBhZ2U6MzAsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICAgIHtuYW1lOidKb2hhbm5hJywgYWdlOjI4LCBnZW5kZXI6J2dpcmwnfSxcbiAgICAgICAgICB7bmFtZTonSm95JywgYWdlOjE1LCBnZW5kZXI6J2dpcmwnfSxcbiAgICAgICAgICB7bmFtZTonTWFyeScsIGFnZToyOCwgZ2VuZGVyOidnaXJsJ30sXG4gICAgICAgICAge25hbWU6J1BldGVyJywgYWdlOjk1LCBnZW5kZXI6J2JveSd9LFxuICAgICAgICAgIHtuYW1lOidTZWJhc3RpYW4nLCBhZ2U6NTAsIGdlbmRlcjonYm95J30sXG4gICAgICAgICAge25hbWU6J0VyaWthJywgYWdlOjI3LCBnZW5kZXI6J2dpcmwnfSxcbiAgICAgICAgICB7bmFtZTonUGF0cmljaycsIGFnZTo0MCwgZ2VuZGVyOidib3knfSxcbiAgICAgICAgICB7bmFtZTonU2FtYW50aGEnLCBhZ2U6NjAsIGdlbmRlcjonZ2lybCd9XG4gICAgICAgIF07XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lciB7XG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGxpc3Qtc3R5bGU6bm9uZTtcbiAgICAgICAgbWFyZ2luOjA7XG4gICAgICAgIHBhZGRpbmc6MCAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQge1xuICAgICAgICBsaW5lLWhlaWdodDozMHB4O1xuICAgICAgICBsaXN0LXN0eWxlOm5vbmU7XG4gICAgICAgIGJveC1zaXppbmc6Ym9yZGVyLWJveDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUge1xuICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyIHtcbiAgICAgICAgb3BhY2l0eTowO1xuICAgICAgICBtYXgtaGVpZ2h0OjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLm5nLW1vdmUtYWN0aXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XG4gICAgICAgIG9wYWNpdHk6MTtcbiAgICAgICAgbWF4LWhlaWdodDozMHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgZnJpZW5kcyA9IGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmQgaW4gZnJpZW5kcycpKTtcblxuICAgICAgaXQoJ3Nob3VsZCByZW5kZXIgaW5pdGlhbCBkYXRhIHNldCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QoZnJpZW5kcy5jb3VudCgpKS50b0JlKDEwKTtcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDApLmdldFRleHQoKSkudG9FcXVhbCgnWzFdIEpvaG4gd2hvIGlzIDI1IHllYXJzIG9sZC4nKTtcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDEpLmdldFRleHQoKSkudG9FcXVhbCgnWzJdIEplc3NpZSB3aG8gaXMgMzAgeWVhcnMgb2xkLicpO1xuICAgICAgICBleHBlY3QoZnJpZW5kcy5sYXN0KCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMTBdIFNhbWFudGhhIHdobyBpcyA2MCB5ZWFycyBvbGQuJyk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2ZyaWVuZHMubGVuZ3RoJykpLmdldFRleHQoKSlcbiAgICAgICAgICAgIC50b01hdGNoKFwiSSBoYXZlIDEwIGZyaWVuZHMuIFRoZXkgYXJlOlwiKTtcbiAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgcmVwZWF0ZXIgd2hlbiBmaWx0ZXIgcHJlZGljYXRlIGNoYW5nZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMTApO1xuXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdxJykpLnNlbmRLZXlzKCdtYScpO1xuXG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5jb3VudCgpKS50b0JlKDIpO1xuICAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDApLmdldFRleHQoKSkudG9FcXVhbCgnWzFdIE1hcnkgd2hvIGlzIDI4IHllYXJzIG9sZC4nKTtcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmxhc3QoKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1syXSBTYW1hbnRoYSB3aG8gaXMgNjAgeWVhcnMgb2xkLicpO1xuICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nUmVwZWF0RGlyZWN0aXZlID0gWyckcGFyc2UnLCAnJGFuaW1hdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkcGFyc2UsICRhbmltYXRlLCAkY29tcGlsZSkge1xuICB2YXIgTkdfUkVNT1ZFRCA9ICckJE5HX1JFTU9WRUQnO1xuICB2YXIgbmdSZXBlYXRNaW5FcnIgPSBtaW5FcnIoJ25nUmVwZWF0Jyk7XG5cbiAgdmFyIHVwZGF0ZVNjb3BlID0gZnVuY3Rpb24oc2NvcGUsIGluZGV4LCB2YWx1ZUlkZW50aWZpZXIsIHZhbHVlLCBrZXlJZGVudGlmaWVyLCBrZXksIGFycmF5TGVuZ3RoKSB7XG4gICAgLy8gVE9ETyhwZXJmKTogZ2VuZXJhdGUgc2V0dGVycyB0byBzaGF2ZSBvZmYgfjQwbXMgb3IgMS0xLjUlXG4gICAgc2NvcGVbdmFsdWVJZGVudGlmaWVyXSA9IHZhbHVlO1xuICAgIGlmIChrZXlJZGVudGlmaWVyKSBzY29wZVtrZXlJZGVudGlmaWVyXSA9IGtleTtcbiAgICBzY29wZS4kaW5kZXggPSBpbmRleDtcbiAgICBzY29wZS4kZmlyc3QgPSAoaW5kZXggPT09IDApO1xuICAgIHNjb3BlLiRsYXN0ID0gKGluZGV4ID09PSAoYXJyYXlMZW5ndGggLSAxKSk7XG4gICAgc2NvcGUuJG1pZGRsZSA9ICEoc2NvcGUuJGZpcnN0IHx8IHNjb3BlLiRsYXN0KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuICAgIHNjb3BlLiRvZGQgPSAhKHNjb3BlLiRldmVuID0gKGluZGV4ICYgMSkgPT09IDApO1xuICB9O1xuXG4gIHZhciBnZXRCbG9ja1N0YXJ0ID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgICByZXR1cm4gYmxvY2suY2xvbmVbMF07XG4gIH07XG5cbiAgdmFyIGdldEJsb2NrRW5kID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgICByZXR1cm4gYmxvY2suY2xvbmVbYmxvY2suY2xvbmUubGVuZ3RoIC0gMV07XG4gIH07XG5cblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBwcmlvcml0eTogMTAwMCxcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAkJHRsYjogdHJ1ZSxcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ1JlcGVhdENvbXBpbGUoJGVsZW1lbnQsICRhdHRyKSB7XG4gICAgICB2YXIgZXhwcmVzc2lvbiA9ICRhdHRyLm5nUmVwZWF0O1xuICAgICAgdmFyIG5nUmVwZWF0RW5kQ29tbWVudCA9ICRjb21waWxlLiQkY3JlYXRlQ29tbWVudCgnZW5kIG5nUmVwZWF0JywgZXhwcmVzc2lvbik7XG5cbiAgICAgIHZhciBtYXRjaCA9IGV4cHJlc3Npb24ubWF0Y2goL15cXHMqKFtcXHNcXFNdKz8pXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpP1xccyokLyk7XG5cbiAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2lleHAnLCAnRXhwZWN0ZWQgZXhwcmVzc2lvbiBpbiBmb3JtIG9mIFxcJ19pdGVtXyBpbiBfY29sbGVjdGlvbl9bIHRyYWNrIGJ5IF9pZF9dXFwnIGJ1dCBnb3QgXFwnezB9XFwnLicsXG4gICAgICAgICAgICBleHByZXNzaW9uKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxocyA9IG1hdGNoWzFdO1xuICAgICAgdmFyIHJocyA9IG1hdGNoWzJdO1xuICAgICAgdmFyIGFsaWFzQXMgPSBtYXRjaFszXTtcbiAgICAgIHZhciB0cmFja0J5RXhwID0gbWF0Y2hbNF07XG5cbiAgICAgIG1hdGNoID0gbGhzLm1hdGNoKC9eKD86KFxccypbJFxcd10rKXxcXChcXHMqKFskXFx3XSspXFxzKixcXHMqKFskXFx3XSspXFxzKlxcKSkkLyk7XG5cbiAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2lpZGV4cCcsICdcXCdfaXRlbV9cXCcgaW4gXFwnX2l0ZW1fIGluIF9jb2xsZWN0aW9uX1xcJyBzaG91bGQgYmUgYW4gaWRlbnRpZmllciBvciBcXCcoX2tleV8sIF92YWx1ZV8pXFwnIGV4cHJlc3Npb24sIGJ1dCBnb3QgXFwnezB9XFwnLicsXG4gICAgICAgICAgICBsaHMpO1xuICAgICAgfVxuICAgICAgdmFyIHZhbHVlSWRlbnRpZmllciA9IG1hdGNoWzNdIHx8IG1hdGNoWzFdO1xuICAgICAgdmFyIGtleUlkZW50aWZpZXIgPSBtYXRjaFsyXTtcblxuICAgICAgaWYgKGFsaWFzQXMgJiYgKCEvXlskYS16QS1aX11bJGEtekEtWjAtOV9dKiQvLnRlc3QoYWxpYXNBcykgfHxcbiAgICAgICAgICAvXihudWxsfHVuZGVmaW5lZHx0aGlzfFxcJGluZGV4fFxcJGZpcnN0fFxcJG1pZGRsZXxcXCRsYXN0fFxcJGV2ZW58XFwkb2RkfFxcJHBhcmVudHxcXCRyb290fFxcJGlkKSQvLnRlc3QoYWxpYXNBcykpKSB7XG4gICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdiYWRpZGVudCcsICdhbGlhcyBcXCd7MH1cXCcgaXMgaW52YWxpZCAtLS0gbXVzdCBiZSBhIHZhbGlkIEpTIGlkZW50aWZpZXIgd2hpY2ggaXMgbm90IGEgcmVzZXJ2ZWQgbmFtZS4nLFxuICAgICAgICAgIGFsaWFzQXMpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdHJhY2tCeUV4cEdldHRlciwgdHJhY2tCeUlkRXhwRm4sIHRyYWNrQnlJZEFycmF5Rm4sIHRyYWNrQnlJZE9iakZuO1xuICAgICAgdmFyIGhhc2hGbkxvY2FscyA9IHskaWQ6IGhhc2hLZXl9O1xuXG4gICAgICBpZiAodHJhY2tCeUV4cCkge1xuICAgICAgICB0cmFja0J5RXhwR2V0dGVyID0gJHBhcnNlKHRyYWNrQnlFeHApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhY2tCeUlkQXJyYXlGbiA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gaGFzaEtleSh2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRyYWNrQnlJZE9iakZuID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nUmVwZWF0TGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcblxuICAgICAgICBpZiAodHJhY2tCeUV4cEdldHRlcikge1xuICAgICAgICAgIHRyYWNrQnlJZEV4cEZuID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIC8vIGFzc2lnbiBrZXksIHZhbHVlLCBhbmQgJGluZGV4IHRvIHRoZSBsb2NhbHMgc28gdGhhdCB0aGV5IGNhbiBiZSB1c2VkIGluIGhhc2ggZnVuY3Rpb25zXG4gICAgICAgICAgICBpZiAoa2V5SWRlbnRpZmllcikgaGFzaEZuTG9jYWxzW2tleUlkZW50aWZpZXJdID0ga2V5O1xuICAgICAgICAgICAgaGFzaEZuTG9jYWxzW3ZhbHVlSWRlbnRpZmllcl0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGhhc2hGbkxvY2Fscy4kaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIHJldHVybiB0cmFja0J5RXhwR2V0dGVyKCRzY29wZSwgaGFzaEZuTG9jYWxzKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RvcmUgYSBsaXN0IG9mIGVsZW1lbnRzIGZyb20gcHJldmlvdXMgcnVuLiBUaGlzIGlzIGEgaGFzaCB3aGVyZSBrZXkgaXMgdGhlIGl0ZW0gZnJvbSB0aGVcbiAgICAgICAgLy8gaXRlcmF0b3IsIGFuZCB0aGUgdmFsdWUgaXMgb2JqZWN0cyB3aXRoIGZvbGxvd2luZyBwcm9wZXJ0aWVzLlxuICAgICAgICAvLyAgIC0gc2NvcGU6IGJvdW5kIHNjb3BlXG4gICAgICAgIC8vICAgLSBjbG9uZTogcHJldmlvdXMgZWxlbWVudC5cbiAgICAgICAgLy8gICAtIGluZGV4OiBwb3NpdGlvblxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBhcmUgdXNpbmcgbm8tcHJvdG8gb2JqZWN0IHNvIHRoYXQgd2UgZG9uJ3QgbmVlZCB0byBndWFyZCBhZ2FpbnN0IGluaGVyaXRlZCBwcm9wcyB2aWFcbiAgICAgICAgLy8gaGFzT3duUHJvcGVydHkuXG4gICAgICAgIHZhciBsYXN0QmxvY2tNYXAgPSBjcmVhdGVNYXAoKTtcblxuICAgICAgICAvL3dhdGNoIHByb3BzXG4gICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKHJocywgZnVuY3Rpb24gbmdSZXBlYXRBY3Rpb24oY29sbGVjdGlvbikge1xuICAgICAgICAgIHZhciBpbmRleCwgbGVuZ3RoLFxuICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSAkZWxlbWVudFswXSwgICAgIC8vIG5vZGUgdGhhdCBjbG9uZWQgbm9kZXMgc2hvdWxkIGJlIGluc2VydGVkIGFmdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZWQgdG8gdGhlIGNvbW1lbnQgbm9kZSBhbmNob3JcbiAgICAgICAgICAgICAgbmV4dE5vZGUsXG4gICAgICAgICAgICAgIC8vIFNhbWUgYXMgbGFzdEJsb2NrTWFwIGJ1dCBpdCBoYXMgdGhlIGN1cnJlbnQgc3RhdGUuIEl0IHdpbGwgYmVjb21lIHRoZVxuICAgICAgICAgICAgICAvLyBsYXN0QmxvY2tNYXAgb24gdGhlIG5leHQgaXRlcmF0aW9uLlxuICAgICAgICAgICAgICBuZXh0QmxvY2tNYXAgPSBjcmVhdGVNYXAoKSxcbiAgICAgICAgICAgICAgY29sbGVjdGlvbkxlbmd0aCxcbiAgICAgICAgICAgICAga2V5LCB2YWx1ZSwgLy8ga2V5L3ZhbHVlIG9mIGl0ZXJhdGlvblxuICAgICAgICAgICAgICB0cmFja0J5SWQsXG4gICAgICAgICAgICAgIHRyYWNrQnlJZEZuLFxuICAgICAgICAgICAgICBjb2xsZWN0aW9uS2V5cyxcbiAgICAgICAgICAgICAgYmxvY2ssICAgICAgIC8vIGxhc3Qgb2JqZWN0IGluZm9ybWF0aW9uIHtzY29wZSwgZWxlbWVudCwgaWR9XG4gICAgICAgICAgICAgIG5leHRCbG9ja09yZGVyLFxuICAgICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlO1xuXG4gICAgICAgICAgaWYgKGFsaWFzQXMpIHtcbiAgICAgICAgICAgICRzY29wZVthbGlhc0FzXSA9IGNvbGxlY3Rpb247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uS2V5cyA9IGNvbGxlY3Rpb247XG4gICAgICAgICAgICB0cmFja0J5SWRGbiA9IHRyYWNrQnlJZEV4cEZuIHx8IHRyYWNrQnlJZEFycmF5Rm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyYWNrQnlJZEZuID0gdHJhY2tCeUlkRXhwRm4gfHwgdHJhY2tCeUlkT2JqRm47XG4gICAgICAgICAgICAvLyBpZiBvYmplY3QsIGV4dHJhY3Qga2V5cywgaW4gZW51bWVyYXRpb24gb3JkZXIsIHVuc29ydGVkXG4gICAgICAgICAgICBjb2xsZWN0aW9uS2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbUtleSBpbiBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbGxlY3Rpb24sIGl0ZW1LZXkpICYmIGl0ZW1LZXkuY2hhckF0KDApICE9PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uS2V5cy5wdXNoKGl0ZW1LZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29sbGVjdGlvbkxlbmd0aCA9IGNvbGxlY3Rpb25LZXlzLmxlbmd0aDtcbiAgICAgICAgICBuZXh0QmxvY2tPcmRlciA9IG5ldyBBcnJheShjb2xsZWN0aW9uTGVuZ3RoKTtcblxuICAgICAgICAgIC8vIGxvY2F0ZSBleGlzdGluZyBpdGVtc1xuICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNvbGxlY3Rpb25MZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGtleSA9IChjb2xsZWN0aW9uID09PSBjb2xsZWN0aW9uS2V5cykgPyBpbmRleCA6IGNvbGxlY3Rpb25LZXlzW2luZGV4XTtcbiAgICAgICAgICAgIHZhbHVlID0gY29sbGVjdGlvbltrZXldO1xuICAgICAgICAgICAgdHJhY2tCeUlkID0gdHJhY2tCeUlkRm4oa2V5LCB2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgaWYgKGxhc3RCbG9ja01hcFt0cmFja0J5SWRdKSB7XG4gICAgICAgICAgICAgIC8vIGZvdW5kIHByZXZpb3VzbHkgc2VlbiBibG9ja1xuICAgICAgICAgICAgICBibG9jayA9IGxhc3RCbG9ja01hcFt0cmFja0J5SWRdO1xuICAgICAgICAgICAgICBkZWxldGUgbGFzdEJsb2NrTWFwW3RyYWNrQnlJZF07XG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcFt0cmFja0J5SWRdID0gYmxvY2s7XG4gICAgICAgICAgICAgIG5leHRCbG9ja09yZGVyW2luZGV4XSA9IGJsb2NrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXSkge1xuICAgICAgICAgICAgICAvLyBpZiBjb2xsaXNpb24gZGV0ZWN0ZWQuIHJlc3RvcmUgbGFzdEJsb2NrTWFwIGFuZCB0aHJvdyBhbiBlcnJvclxuICAgICAgICAgICAgICBmb3JFYWNoKG5leHRCbG9ja09yZGVyLCBmdW5jdGlvbihibG9jaykge1xuICAgICAgICAgICAgICAgIGlmIChibG9jayAmJiBibG9jay5zY29wZSkgbGFzdEJsb2NrTWFwW2Jsb2NrLmlkXSA9IGJsb2NrO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2R1cGVzJyxcbiAgICAgICAgICAgICAgICAgICdEdXBsaWNhdGVzIGluIGEgcmVwZWF0ZXIgYXJlIG5vdCBhbGxvd2VkLiBVc2UgXFwndHJhY2sgYnlcXCcgZXhwcmVzc2lvbiB0byBzcGVjaWZ5IHVuaXF1ZSBrZXlzLiBSZXBlYXRlcjogezB9LCBEdXBsaWNhdGUga2V5OiB7MX0sIER1cGxpY2F0ZSB2YWx1ZTogezJ9JyxcbiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIHRyYWNrQnlJZCwgdmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gbmV3IG5ldmVyIGJlZm9yZSBzZWVuIGJsb2NrXG4gICAgICAgICAgICAgIG5leHRCbG9ja09yZGVyW2luZGV4XSA9IHtpZDogdHJhY2tCeUlkLCBzY29wZTogdW5kZWZpbmVkLCBjbG9uZTogdW5kZWZpbmVkfTtcbiAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwW3RyYWNrQnlJZF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJlbW92ZSBsZWZ0b3ZlciBpdGVtc1xuICAgICAgICAgIGZvciAodmFyIGJsb2NrS2V5IGluIGxhc3RCbG9ja01hcCkge1xuICAgICAgICAgICAgYmxvY2sgPSBsYXN0QmxvY2tNYXBbYmxvY2tLZXldO1xuICAgICAgICAgICAgZWxlbWVudHNUb1JlbW92ZSA9IGdldEJsb2NrTm9kZXMoYmxvY2suY2xvbmUpO1xuICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudHNUb1JlbW92ZSk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHNUb1JlbW92ZVswXS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IHdhcyBub3QgcmVtb3ZlZCB5ZXQgYmVjYXVzZSBvZiBwZW5kaW5nIGFuaW1hdGlvbiwgbWFyayBpdCBhcyBkZWxldGVkXG4gICAgICAgICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIGlnbm9yZSBpdCBsYXRlclxuICAgICAgICAgICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gZWxlbWVudHNUb1JlbW92ZS5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNUb1JlbW92ZVtpbmRleF1bTkdfUkVNT1ZFRF0gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9jay5zY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHdlIGFyZSBub3QgdXNpbmcgZm9yRWFjaCBmb3IgcGVyZiByZWFzb25zICh0cnlpbmcgdG8gYXZvaWQgI2NhbGwpXG4gICAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgY29sbGVjdGlvbkxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAga2V5ID0gKGNvbGxlY3Rpb24gPT09IGNvbGxlY3Rpb25LZXlzKSA/IGluZGV4IDogY29sbGVjdGlvbktleXNbaW5kZXhdO1xuICAgICAgICAgICAgdmFsdWUgPSBjb2xsZWN0aW9uW2tleV07XG4gICAgICAgICAgICBibG9jayA9IG5leHRCbG9ja09yZGVyW2luZGV4XTtcblxuICAgICAgICAgICAgaWYgKGJsb2NrLnNjb3BlKSB7XG4gICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgYWxyZWFkeSBzZWVuIHRoaXMgb2JqZWN0LCB0aGVuIHdlIG5lZWQgdG8gcmV1c2UgdGhlXG4gICAgICAgICAgICAgIC8vIGFzc29jaWF0ZWQgc2NvcGUvZWxlbWVudFxuXG4gICAgICAgICAgICAgIG5leHROb2RlID0gcHJldmlvdXNOb2RlO1xuXG4gICAgICAgICAgICAgIC8vIHNraXAgbm9kZXMgdGhhdCBhcmUgYWxyZWFkeSBwZW5kaW5nIHJlbW92YWwgdmlhIGxlYXZlIGFuaW1hdGlvblxuICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0Tm9kZS5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgfSB3aGlsZSAobmV4dE5vZGUgJiYgbmV4dE5vZGVbTkdfUkVNT1ZFRF0pO1xuXG4gICAgICAgICAgICAgIGlmIChnZXRCbG9ja1N0YXJ0KGJsb2NrKSAhPT0gbmV4dE5vZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBpdGVtIHdoaWNoIGdvdCBtb3ZlZFxuICAgICAgICAgICAgICAgICRhbmltYXRlLm1vdmUoZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSksIG51bGwsIHByZXZpb3VzTm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gZ2V0QmxvY2tFbmQoYmxvY2spO1xuICAgICAgICAgICAgICB1cGRhdGVTY29wZShibG9jay5zY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgY29sbGVjdGlvbkxlbmd0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBuZXcgaXRlbSB3aGljaCB3ZSBkb24ndCBrbm93IGFib3V0XG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlKGZ1bmN0aW9uIG5nUmVwZWF0VHJhbnNjbHVkZShjbG9uZSwgc2NvcGUpIHtcbiAgICAgICAgICAgICAgICBibG9jay5zY29wZSA9IHNjb3BlO1xuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb25lLXZzLWNyZWF0ZWNvbW1lbnRcbiAgICAgICAgICAgICAgICB2YXIgZW5kTm9kZSA9IG5nUmVwZWF0RW5kQ29tbWVudC5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNsb25lW2Nsb25lLmxlbmd0aCsrXSA9IGVuZE5vZGU7XG5cbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgbnVsbCwgcHJldmlvdXNOb2RlKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSBlbmROb2RlO1xuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFdlIG9ubHkgbmVlZCB0aGUgZmlyc3QvbGFzdCBub2RlIG9mIHRoZSBjbG9uZWQgbm9kZXMuXG4gICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgd2UgbmVlZCB0byBrZWVwIHRoZSByZWZlcmVuY2UgdG8gdGhlIGpxbGl0ZSB3cmFwcGVyIGFzIGl0IG1pZ2h0IGJlIGNoYW5nZWQgbGF0ZXJcbiAgICAgICAgICAgICAgICAvLyBieSBhIGRpcmVjdGl2ZSB3aXRoIHRlbXBsYXRlVXJsIHdoZW4gaXRzIHRlbXBsYXRlIGFycml2ZXMuXG4gICAgICAgICAgICAgICAgYmxvY2suY2xvbmUgPSBjbG9uZTtcbiAgICAgICAgICAgICAgICBuZXh0QmxvY2tNYXBbYmxvY2suaWRdID0gYmxvY2s7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2NvcGUoYmxvY2suc2NvcGUsIGluZGV4LCB2YWx1ZUlkZW50aWZpZXIsIHZhbHVlLCBrZXlJZGVudGlmaWVyLCBrZXksIGNvbGxlY3Rpb25MZW5ndGgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGFzdEJsb2NrTWFwID0gbmV4dEJsb2NrTWFwO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbnZhciBOR19ISURFX0NMQVNTID0gJ25nLWhpZGUnO1xudmFyIE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1MgPSAnbmctaGlkZS1hbmltYXRlJztcbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTaG93XG4gKiBAbXVsdGlFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nU2hvd2AgZGlyZWN0aXZlIHNob3dzIG9yIGhpZGVzIHRoZSBnaXZlbiBIVE1MIGVsZW1lbnQgYmFzZWQgb24gdGhlIGV4cHJlc3Npb24gcHJvdmlkZWQgdG9cbiAqIHRoZSBgbmdTaG93YCBhdHRyaWJ1dGUuXG4gKlxuICogVGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIGJ5IHJlbW92aW5nIG9yIGFkZGluZyB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3Mgb250byB0aGUgZWxlbWVudC5cbiAqIFRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyBwcmVkZWZpbmVkIGluIEFuZ3VsYXJKUyBhbmQgc2V0cyB0aGUgZGlzcGxheSBzdHlsZSB0byBub25lICh1c2luZyBhblxuICogYCFpbXBvcnRhbnRgIGZsYWcpLiBGb3IgQ1NQIG1vZGUgcGxlYXNlIGFkZCBgYW5ndWxhci1jc3AuY3NzYCB0byB5b3VyIEhUTUwgZmlsZSAoc2VlXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ3NwIG5nQ3NwfSkuXG4gKlxuICogYGBgaHRtbFxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIHRydXRoeSAoZWxlbWVudCBpcyB2aXNpYmxlKSAtLT5cbiAqIDxkaXYgbmctc2hvdz1cIm15VmFsdWVcIj48L2Rpdj5cbiAqXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgZmFsc3kgKGVsZW1lbnQgaXMgaGlkZGVuKSAtLT5cbiAqIDxkaXYgbmctc2hvdz1cIm15VmFsdWVcIiBjbGFzcz1cIm5nLWhpZGVcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIFdoZW4gdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgZmFsc3kgdmFsdWUgdGhlbiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgYWRkZWRcbiAqIHRvIHRoZSBjbGFzcyBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgY2F1c2luZyBpdCB0byBiZWNvbWUgaGlkZGVuLiBXaGVuIHRydXRoeSwgdGhlIGAubmctaGlkZWBcbiAqIENTUyBjbGFzcyBpcyByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgY2F1c2luZyB0aGUgZWxlbWVudCBub3QgdG8gYXBwZWFyIGhpZGRlbi5cbiAqXG4gKiAjIyBXaHkgaXMgYCFpbXBvcnRhbnRgIHVzZWQ/XG4gKlxuICogWW91IG1heSBiZSB3b25kZXJpbmcgd2h5IGAhaW1wb3J0YW50YCBpcyB1c2VkIGZvciB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MuIFRoaXMgaXMgYmVjYXVzZSB0aGVcbiAqIGAubmctaGlkZWAgc2VsZWN0b3IgY2FuIGJlIGVhc2lseSBvdmVycmlkZGVuIGJ5IGhlYXZpZXIgc2VsZWN0b3JzLiBGb3IgZXhhbXBsZSwgc29tZXRoaW5nIGFzXG4gKiBzaW1wbGUgYXMgY2hhbmdpbmcgdGhlIGRpc3BsYXkgc3R5bGUgb24gYSBIVE1MIGxpc3QgaXRlbSB3b3VsZCBtYWtlIGhpZGRlbiBlbGVtZW50cyBhcHBlYXJcbiAqIHZpc2libGUuIFRoaXMgYWxzbyBiZWNvbWVzIGEgYmlnZ2VyIGlzc3VlIHdoZW4gZGVhbGluZyB3aXRoIENTUyBmcmFtZXdvcmtzLlxuICpcbiAqIEJ5IHVzaW5nIGAhaW1wb3J0YW50YCwgdGhlIHNob3cgYW5kIGhpZGUgYmVoYXZpb3Igd2lsbCB3b3JrIGFzIGV4cGVjdGVkIGRlc3BpdGUgYW55IGNsYXNoIGJldHdlZW5cbiAqIENTUyBzZWxlY3RvciBzcGVjaWZpY2l0eSAod2hlbiBgIWltcG9ydGFudGAgaXNuJ3QgdXNlZCB3aXRoIGFueSBjb25mbGljdGluZyBzdHlsZXMpLiBJZiBhXG4gKiBkZXZlbG9wZXIgY2hvb3NlcyB0byBvdmVycmlkZSB0aGUgc3R5bGluZyB0byBjaGFuZ2UgaG93IHRvIGhpZGUgYW4gZWxlbWVudCB0aGVuIGl0IGlzIGp1c3QgYVxuICogbWF0dGVyIG9mIHVzaW5nIGAhaW1wb3J0YW50YCBpbiB0aGVpciBvd24gQ1NTIGNvZGUuXG4gKlxuICogIyMjIE92ZXJyaWRpbmcgYC5uZy1oaWRlYFxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSBgLm5nLWhpZGVgIGNsYXNzIHdpbGwgc3R5bGUgdGhlIGVsZW1lbnQgd2l0aCBgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50YC4gSWYgeW91XG4gKiB3aXNoIHRvIGNoYW5nZSB0aGUgaGlkZSBiZWhhdmlvciB3aXRoIGBuZ1Nob3dgL2BuZ0hpZGVgLCB5b3UgY2FuIHNpbXBseSBvdmVyd3JpdGUgdGhlIHN0eWxlcyBmb3JcbiAqIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcy4gTm90ZSB0aGF0IHRoZSBzZWxlY3RvciB0aGF0IG5lZWRzIHRvIGJlIHVzZWQgaXMgYWN0dWFsbHlcbiAqIGAubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSlgIHRvIGNvcGUgd2l0aCBleHRyYSBhbmltYXRpb24gY2xhc3NlcyB0aGF0IGNhbiBiZSBhZGRlZC5cbiAqXG4gKiBgYGBjc3NcbiAqIC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKSB7XG4gKiAgIC8mIzQyOyBUaGVzZSBhcmUganVzdCBhbHRlcm5hdGl2ZSB3YXlzIG9mIGhpZGluZyBhbiBlbGVtZW50ICYjNDI7L1xuICogICBkaXNwbGF5OiBibG9jayFpbXBvcnRhbnQ7XG4gKiAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAqICAgdG9wOiAtOTk5OXB4O1xuICogICBsZWZ0OiAtOTk5OXB4O1xuICogfVxuICogYGBgXG4gKlxuICogQnkgZGVmYXVsdCB5b3UgZG9uJ3QgbmVlZCB0byBvdmVycmlkZSBhbnl0aGluZyBpbiBDU1MgYW5kIHRoZSBhbmltYXRpb25zIHdpbGwgd29yayBhcm91bmQgdGhlXG4gKiBkaXNwbGF5IHN0eWxlLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE9jY3VycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rICRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSBgLm5nLWhpZGVgICAgICAgIHwgQWZ0ZXIgdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgbm9uIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gaGlkZGVuLiB8XG4gKiB8IHtAbGluayAkYW5pbWF0ZSNyZW1vdmVDbGFzcyByZW1vdmVDbGFzc30gYC5uZy1oaWRlYCB8IEFmdGVyIHRoZSBgbmdTaG93YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgY29udGVudHMgYXJlIHNldCB0byB2aXNpYmxlLiAgICAgICAgfFxuICpcbiAqIEFuaW1hdGlvbnMgaW4gYG5nU2hvd2AvYG5nSGlkZWAgd29yayB3aXRoIHRoZSBzaG93IGFuZCBoaWRlIGV2ZW50cyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2hlbiB0aGVcbiAqIGRpcmVjdGl2ZSBleHByZXNzaW9uIGlzIHRydWUgYW5kIGZhbHNlLiBUaGlzIHN5c3RlbSB3b3JrcyBsaWtlIHRoZSBhbmltYXRpb24gc3lzdGVtIHByZXNlbnQgd2l0aFxuICogYG5nQ2xhc3NgIGV4Y2VwdCB0aGF0IHlvdSBtdXN0IGFsc28gaW5jbHVkZSB0aGUgYCFpbXBvcnRhbnRgIGZsYWcgdG8gb3ZlcnJpZGUgdGhlIGRpc3BsYXlcbiAqIHByb3BlcnR5IHNvIHRoYXQgdGhlIGVsZW1lbnRzIGFyZSBub3QgYWN0dWFsbHkgaGlkZGVuIGR1cmluZyB0aGUgYW5pbWF0aW9uLlxuICpcbiAqIGBgYGNzc1xuICogLyYjNDI7IEEgd29ya2luZyBleGFtcGxlIGNhbiBiZSBmb3VuZCBhdCB0aGUgYm90dG9tIG9mIHRoaXMgcGFnZS4gJiM0MjsvXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCwgLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUge1xuICogICB0cmFuc2l0aW9uOiBhbGwgMC41cyBsaW5lYXI7XG4gKiB9XG4gKlxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCwgYXMgb2YgQW5ndWxhckpTIHZlcnNpb24gMS4zLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNoYW5nZSB0aGUgZGlzcGxheSBwcm9wZXJ0eVxuICogdG8gYmxvY2sgZHVyaW5nIGFuaW1hdGlvbiBzdGF0ZXMgLSBuZ0FuaW1hdGUgd2lsbCBhdXRvbWF0aWNhbGx5IGhhbmRsZSB0aGUgc3R5bGUgdG9nZ2xpbmcgZm9yIHlvdS5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTaG93IElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHkvZmFsc3kgdGhlbiB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgaXMgc2hvd24vaGlkZGVuIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBAZXhhbXBsZVxuICogQSBzaW1wbGUgZXhhbXBsZSwgYW5pbWF0aW5nIHRoZSBlbGVtZW50J3Mgb3BhY2l0eTpcbiAqXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1zaG93LXNpbXBsZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICBTaG93OiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCIgYXJpYS1sYWJlbD1cIlRvZ2dsZSBuZ1Nob3dcIj48YnIgLz5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGFuaW1hdGUtc2hvdy1oaWRlXCIgbmctc2hvdz1cImNoZWNrZWRcIj5cbiAgICAgICAgSSBzaG93IHVwIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLmFuaW1hdGUtc2hvdy1oaWRlLm5nLWhpZGUge1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1zaG93LWhpZGUubmctaGlkZS1hZGQsXG4gICAgICAuYW5pbWF0ZS1zaG93LWhpZGUubmctaGlkZS1yZW1vdmUge1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgbGluZWFyIDAuNXM7XG4gICAgICB9XG5cbiAgICAgIC5jaGVjay1lbGVtZW50IHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmdTaG93JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGVja2JveCA9IGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSk7XG4gICAgICAgIHZhciBjaGVja0VsZW0gPSBlbGVtZW50KGJ5LmNzcygnLmNoZWNrLWVsZW1lbnQnKSk7XG5cbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgY2hlY2tib3guY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKlxuICogPGhyIC8+XG4gKiBAZXhhbXBsZVxuICogQSBtb3JlIGNvbXBsZXggZXhhbXBsZSwgZmVhdHVyaW5nIGRpZmZlcmVudCBzaG93L2hpZGUgYW5pbWF0aW9uczpcbiAqXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1zaG93LWNvbXBsZXhcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgU2hvdzogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIGFyaWEtbGFiZWw9XCJUb2dnbGUgbmdTaG93XCI+PGJyIC8+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBmdW5reS1zaG93LWhpZGVcIiBuZy1zaG93PVwiY2hlY2tlZFwiPlxuICAgICAgICBJIHNob3cgdXAgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICBib2R5IHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgcGVyc3BlY3RpdmU6IDEwMDBweDtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLWFkZCB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWigwKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2UtaW4tb3V0O1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtYWRkLm5nLWhpZGUtYWRkLWFjdGl2ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWigtMTM1ZGVnKTtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLXJlbW92ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWSg5MGRlZyk7XG4gICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1yZW1vdmUubmctaGlkZS1yZW1vdmUtYWN0aXZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVZKDApO1xuICAgICAgfVxuXG4gICAgICAuY2hlY2stZWxlbWVudCB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nU2hvdycsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2tib3ggPSBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpO1xuICAgICAgICB2YXIgY2hlY2tFbGVtID0gZWxlbWVudChieS5jc3MoJy5jaGVjay1lbGVtZW50JykpO1xuXG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgIGNoZWNrYm94LmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICpcbiAqIEBrbm93bklzc3VlXG4gKlxuICogIyMjIEZsaWNrZXJpbmcgd2hlbiB1c2luZyBuZ1Nob3cgdG8gdG9nZ2xlIGJldHdlZW4gZWxlbWVudHNcbiAqXG4gKiBXaGVuIHVzaW5nIHtAbGluayBuZ1Nob3d9IGFuZCAvIG9yIHtAbGluayBuZ0hpZGV9IHRvIHRvZ2dsZSBiZXR3ZWVuIGVsZW1lbnRzLCBpdCBjYW5cbiAqIGhhcHBlbiB0aGF0IGJvdGggdGhlIGVsZW1lbnQgdG8gc2hvdyBhbmQgdGhlIGVsZW1lbnQgdG8gaGlkZSBhcmUgdmlzaWJsZSBmb3IgYSB2ZXJ5IHNob3J0IHRpbWUuXG4gKlxuICogVGhpcyB1c3VhbGx5IGhhcHBlbnMgd2hlbiB0aGUge0BsaW5rIG5nQW5pbWF0ZSBuZ0FuaW1hdGUgbW9kdWxlfSBpcyBpbmNsdWRlZCwgYnV0IG5vIGFjdHVhbCBhbmltYXRpb25zXG4gKiBhcmUgZGVmaW5lZCBmb3Ige0BsaW5rIG5nU2hvd30gLyB7QGxpbmsgbmdIaWRlfS4gSW50ZXJuZXQgRXhwbG9yZXIgaXMgYWZmZWN0ZWQgbW9yZSBvZnRlbiB0aGFuXG4gKiBvdGhlciBicm93c2Vycy5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCB3YXkgdG8gbWl0aWdhdGUgdGhpcyBwcm9ibGVtOlxuICpcbiAqIC0ge0BsaW5rIGd1aWRlL2FuaW1hdGlvbnMjaG93LXRvLXNlbGVjdGl2ZWx5LWVuYWJsZS1kaXNhYmxlLWFuZC1za2lwLWFuaW1hdGlvbnMgRGlzYWJsZSBhbmltYXRpb25zIG9uIHRoZSBhZmZlY3RlZCBlbGVtZW50c30uXG4gKiAtIFVzZSB7QGxpbmsgbmdJZn0gb3Ige0BsaW5rIG5nU3dpdGNofSBpbnN0ZWFkIG9mIHtAbGluayBuZ1Nob3d9IC8ge0BsaW5rIG5nSGlkZX0uXG4gKiAtIFVzZSB0aGUgc3BlY2lhbCBDU1Mgc2VsZWN0b3IgYG5nLWhpZGUubmctaGlkZS1hbmltYXRlYCB0byBzZXQgYHtkaXNwbGF5OiBub25lfWAgb3Igc2ltaWxhciBvbiB0aGUgYWZmZWN0ZWQgZWxlbWVudHMuXG4gKiAtIFVzZSBgbmctY2xhc3M9XCJ7J25nLWhpZGUnOiBleHByZXNzaW9ufWAgaW5zdGVhZCBvZiBpbnN0ZWFkIG9mIHtAbGluayBuZ1Nob3d9IC8ge0BsaW5rIG5nSGlkZX0uXG4gKiAtIERlZmluZSBhbiBhbmltYXRpb24gb24gdGhlIGFmZmVjdGVkIGVsZW1lbnRzLlxuICovXG52YXIgbmdTaG93RGlyZWN0aXZlID0gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBtdWx0aUVsZW1lbnQ6IHRydWUsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nU2hvdywgZnVuY3Rpb24gbmdTaG93V2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gd2UncmUgYWRkaW5nIGEgdGVtcG9yYXJ5LCBhbmltYXRpb24tc3BlY2lmaWMgY2xhc3MgZm9yIG5nLWhpZGUgc2luY2UgdGhpcyB3YXlcbiAgICAgICAgLy8gd2UgY2FuIGNvbnRyb2wgd2hlbiB0aGUgZWxlbWVudCBpcyBhY3R1YWxseSBkaXNwbGF5ZWQgb24gc2NyZWVuIHdpdGhvdXQgaGF2aW5nXG4gICAgICAgIC8vIHRvIGhhdmUgYSBnbG9iYWwvZ3JlZWR5IENTUyBzZWxlY3RvciB0aGF0IGJyZWFrcyB3aGVuIG90aGVyIGFuaW1hdGlvbnMgYXJlIHJ1bi5cbiAgICAgICAgLy8gUmVhZDogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTEwMyNpc3N1ZWNvbW1lbnQtNTgzMzU4NDVcbiAgICAgICAgJGFuaW1hdGVbdmFsdWUgPyAncmVtb3ZlQ2xhc3MnIDogJ2FkZENsYXNzJ10oZWxlbWVudCwgTkdfSElERV9DTEFTUywge1xuICAgICAgICAgIHRlbXBDbGFzc2VzOiBOR19ISURFX0lOX1BST0dSRVNTX0NMQVNTXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV07XG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0hpZGVcbiAqIEBtdWx0aUVsZW1lbnRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdIaWRlYCBkaXJlY3RpdmUgc2hvd3Mgb3IgaGlkZXMgdGhlIGdpdmVuIEhUTUwgZWxlbWVudCBiYXNlZCBvbiB0aGUgZXhwcmVzc2lvbiBwcm92aWRlZCB0b1xuICogdGhlIGBuZ0hpZGVgIGF0dHJpYnV0ZS5cbiAqXG4gKiBUaGUgZWxlbWVudCBpcyBzaG93biBvciBoaWRkZW4gYnkgcmVtb3Zpbmcgb3IgYWRkaW5nIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBvbnRvIHRoZSBlbGVtZW50LlxuICogVGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIHByZWRlZmluZWQgaW4gQW5ndWxhckpTIGFuZCBzZXRzIHRoZSBkaXNwbGF5IHN0eWxlIHRvIG5vbmUgKHVzaW5nIGFuXG4gKiBgIWltcG9ydGFudGAgZmxhZykuIEZvciBDU1AgbW9kZSBwbGVhc2UgYWRkIGBhbmd1bGFyLWNzcC5jc3NgIHRvIHlvdXIgSFRNTCBmaWxlIChzZWVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgdHJ1dGh5IChlbGVtZW50IGlzIGhpZGRlbikgLS0+XG4gKiA8ZGl2IG5nLWhpZGU9XCJteVZhbHVlXCIgY2xhc3M9XCJuZy1oaWRlXCI+PC9kaXY+XG4gKlxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIGZhbHN5IChlbGVtZW50IGlzIHZpc2libGUpIC0tPlxuICogPGRpdiBuZy1oaWRlPVwibXlWYWx1ZVwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogV2hlbiB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSB0cnV0aHkgdmFsdWUgdGhlbiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgYWRkZWRcbiAqIHRvIHRoZSBjbGFzcyBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgY2F1c2luZyBpdCB0byBiZWNvbWUgaGlkZGVuLiBXaGVuIGZhbHN5LCB0aGUgYC5uZy1oaWRlYFxuICogQ1NTIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCBjYXVzaW5nIHRoZSBlbGVtZW50IG5vdCB0byBhcHBlYXIgaGlkZGVuLlxuICpcbiAqICMjIFdoeSBpcyBgIWltcG9ydGFudGAgdXNlZD9cbiAqXG4gKiBZb3UgbWF5IGJlIHdvbmRlcmluZyB3aHkgYCFpbXBvcnRhbnRgIGlzIHVzZWQgZm9yIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcy4gVGhpcyBpcyBiZWNhdXNlIHRoZVxuICogYC5uZy1oaWRlYCBzZWxlY3RvciBjYW4gYmUgZWFzaWx5IG92ZXJyaWRkZW4gYnkgaGVhdmllciBzZWxlY3RvcnMuIEZvciBleGFtcGxlLCBzb21ldGhpbmcgYXNcbiAqIHNpbXBsZSBhcyBjaGFuZ2luZyB0aGUgZGlzcGxheSBzdHlsZSBvbiBhIEhUTUwgbGlzdCBpdGVtIHdvdWxkIG1ha2UgaGlkZGVuIGVsZW1lbnRzIGFwcGVhclxuICogdmlzaWJsZS4gVGhpcyBhbHNvIGJlY29tZXMgYSBiaWdnZXIgaXNzdWUgd2hlbiBkZWFsaW5nIHdpdGggQ1NTIGZyYW1ld29ya3MuXG4gKlxuICogQnkgdXNpbmcgYCFpbXBvcnRhbnRgLCB0aGUgc2hvdyBhbmQgaGlkZSBiZWhhdmlvciB3aWxsIHdvcmsgYXMgZXhwZWN0ZWQgZGVzcGl0ZSBhbnkgY2xhc2ggYmV0d2VlblxuICogQ1NTIHNlbGVjdG9yIHNwZWNpZmljaXR5ICh3aGVuIGAhaW1wb3J0YW50YCBpc24ndCB1c2VkIHdpdGggYW55IGNvbmZsaWN0aW5nIHN0eWxlcykuIElmIGFcbiAqIGRldmVsb3BlciBjaG9vc2VzIHRvIG92ZXJyaWRlIHRoZSBzdHlsaW5nIHRvIGNoYW5nZSBob3cgdG8gaGlkZSBhbiBlbGVtZW50IHRoZW4gaXQgaXMganVzdCBhXG4gKiBtYXR0ZXIgb2YgdXNpbmcgYCFpbXBvcnRhbnRgIGluIHRoZWlyIG93biBDU1MgY29kZS5cbiAqXG4gKiAjIyMgT3ZlcnJpZGluZyBgLm5nLWhpZGVgXG4gKlxuICogQnkgZGVmYXVsdCwgdGhlIGAubmctaGlkZWAgY2xhc3Mgd2lsbCBzdHlsZSB0aGUgZWxlbWVudCB3aXRoIGBkaXNwbGF5OiBub25lICFpbXBvcnRhbnRgLiBJZiB5b3VcbiAqIHdpc2ggdG8gY2hhbmdlIHRoZSBoaWRlIGJlaGF2aW9yIHdpdGggYG5nU2hvd2AvYG5nSGlkZWAsIHlvdSBjYW4gc2ltcGx5IG92ZXJ3cml0ZSB0aGUgc3R5bGVzIGZvclxuICogdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBOb3RlIHRoYXQgdGhlIHNlbGVjdG9yIHRoYXQgbmVlZHMgdG8gYmUgdXNlZCBpcyBhY3R1YWxseVxuICogYC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKWAgdG8gY29wZSB3aXRoIGV4dHJhIGFuaW1hdGlvbiBjbGFzc2VzIHRoYXQgY2FuIGJlIGFkZGVkLlxuICpcbiAqIGBgYGNzc1xuICogLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpIHtcbiAqICAgLyYjNDI7IFRoZXNlIGFyZSBqdXN0IGFsdGVybmF0aXZlIHdheXMgb2YgaGlkaW5nIGFuIGVsZW1lbnQgJiM0MjsvXG4gKiAgIGRpc3BsYXk6IGJsb2NrIWltcG9ydGFudDtcbiAqICAgcG9zaXRpb246IGFic29sdXRlO1xuICogICB0b3A6IC05OTk5cHg7XG4gKiAgIGxlZnQ6IC05OTk5cHg7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBCeSBkZWZhdWx0IHlvdSBkb24ndCBuZWVkIHRvIG92ZXJyaWRlIGluIENTUyBhbnl0aGluZyBhbmQgdGhlIGFuaW1hdGlvbnMgd2lsbCB3b3JrIGFyb3VuZCB0aGVcbiAqIGRpc3BsYXkgc3R5bGUuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgJGFuaW1hdGUjYWRkQ2xhc3MgYWRkQ2xhc3N9IGAubmctaGlkZWAgICAgICAgfCBBZnRlciB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSB0cnV0aHkgdmFsdWUgYW5kIGp1c3QgYmVmb3JlIHRoZSBjb250ZW50cyBhcmUgc2V0IHRvIGhpZGRlbi4gIHxcbiAqIHwge0BsaW5rICRhbmltYXRlI3JlbW92ZUNsYXNzIHJlbW92ZUNsYXNzfSBgLm5nLWhpZGVgIHwgQWZ0ZXIgdGhlIGBuZ0hpZGVgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgbm9uIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgY29udGVudHMgYXJlIHNldCB0byB2aXNpYmxlLiB8XG4gKlxuICogQW5pbWF0aW9ucyBpbiBgbmdTaG93YC9gbmdIaWRlYCB3b3JrIHdpdGggdGhlIHNob3cgYW5kIGhpZGUgZXZlbnRzIHRoYXQgYXJlIHRyaWdnZXJlZCB3aGVuIHRoZVxuICogZGlyZWN0aXZlIGV4cHJlc3Npb24gaXMgdHJ1ZSBhbmQgZmFsc2UuIFRoaXMgc3lzdGVtIHdvcmtzIGxpa2UgdGhlIGFuaW1hdGlvbiBzeXN0ZW0gcHJlc2VudCB3aXRoXG4gKiBgbmdDbGFzc2AgZXhjZXB0IHRoYXQgeW91IG11c3QgYWxzbyBpbmNsdWRlIHRoZSBgIWltcG9ydGFudGAgZmxhZyB0byBvdmVycmlkZSB0aGUgZGlzcGxheVxuICogcHJvcGVydHkgc28gdGhhdCB0aGUgZWxlbWVudHMgYXJlIG5vdCBhY3R1YWxseSBoaWRkZW4gZHVyaW5nIHRoZSBhbmltYXRpb24uXG4gKlxuICogYGBgY3NzXG4gKiAvJiM0MjsgQSB3b3JraW5nIGV4YW1wbGUgY2FuIGJlIGZvdW5kIGF0IHRoZSBib3R0b20gb2YgdGhpcyBwYWdlLiAmIzQyOy9cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLCAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7XG4gKiAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGxpbmVhcjtcbiAqIH1cbiAqXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUubmctaGlkZS1yZW1vdmUtYWN0aXZlIHsgLi4uIH1cbiAqIGBgYFxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0LCBhcyBvZiBBbmd1bGFySlMgdmVyc2lvbiAxLjMsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hhbmdlIHRoZSBkaXNwbGF5IHByb3BlcnR5XG4gKiB0byBibG9jayBkdXJpbmcgYW5pbWF0aW9uIHN0YXRlcyAtIG5nQW5pbWF0ZSB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBzdHlsZSB0b2dnbGluZyBmb3IgeW91LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0hpZGUgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeS9mYWxzeSB0aGVuIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCBpcyBoaWRkZW4vc2hvd24gcmVzcGVjdGl2ZWx5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBBIHNpbXBsZSBleGFtcGxlLCBhbmltYXRpbmcgdGhlIGVsZW1lbnQncyBvcGFjaXR5OlxuICpcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLWhpZGUtc2ltcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIEhpZGU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIG5nSGlkZVwiPjxiciAvPlxuICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgYW5pbWF0ZS1zaG93LWhpZGVcIiBuZy1oaWRlPVwiY2hlY2tlZFwiPlxuICAgICAgICBJIGhpZGUgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuYW5pbWF0ZS1zaG93LWhpZGUubmctaGlkZSB7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlLWFkZCxcbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlLXJlbW92ZSB7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCBsaW5lYXIgMC41cztcbiAgICAgIH1cblxuICAgICAgLmNoZWNrLWVsZW1lbnQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZ0hpZGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoZWNrYm94ID0gZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKTtcbiAgICAgICAgdmFyIGNoZWNrRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCcuY2hlY2stZWxlbWVudCcpKTtcblxuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGNoZWNrYm94LmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqXG4gKiA8aHIgLz5cbiAqIEBleGFtcGxlXG4gKiBBIG1vcmUgY29tcGxleCBleGFtcGxlLCBmZWF0dXJpbmcgZGlmZmVyZW50IHNob3cvaGlkZSBhbmltYXRpb25zOlxuICpcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLWhpZGUtY29tcGxleFwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICBIaWRlOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCIgYXJpYS1sYWJlbD1cIlRvZ2dsZSBuZ0hpZGVcIj48YnIgLz5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGZ1bmt5LXNob3ctaGlkZVwiIG5nLWhpZGU9XCJjaGVja2VkXCI+XG4gICAgICAgIEkgaGlkZSB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIGJvZHkge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBwZXJzcGVjdGl2ZTogMTAwMHB4O1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtYWRkIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVaKDApO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVaKC0xMzVkZWcpO1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVZKDkwZGVnKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVkoMCk7XG4gICAgICB9XG5cbiAgICAgIC5jaGVjay1lbGVtZW50IHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmdIaWRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGVja2JveCA9IGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSk7XG4gICAgICAgIHZhciBjaGVja0VsZW0gPSBlbGVtZW50KGJ5LmNzcygnLmNoZWNrLWVsZW1lbnQnKSk7XG5cbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKHRydWUpO1xuICAgICAgICBjaGVja2JveC5jbGljaygpO1xuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKlxuICogQGtub3duSXNzdWVcbiAqXG4gKiAjIyMgRmxpY2tlcmluZyB3aGVuIHVzaW5nIG5nSGlkZSB0byB0b2dnbGUgYmV0d2VlbiBlbGVtZW50c1xuICpcbiAqIFdoZW4gdXNpbmcge0BsaW5rIG5nU2hvd30gYW5kIC8gb3Ige0BsaW5rIG5nSGlkZX0gdG8gdG9nZ2xlIGJldHdlZW4gZWxlbWVudHMsIGl0IGNhblxuICogaGFwcGVuIHRoYXQgYm90aCB0aGUgZWxlbWVudCB0byBzaG93IGFuZCB0aGUgZWxlbWVudCB0byBoaWRlIGFyZSB2aXNpYmxlIGZvciBhIHZlcnkgc2hvcnQgdGltZS5cbiAqXG4gKiBUaGlzIHVzdWFsbHkgaGFwcGVucyB3aGVuIHRoZSB7QGxpbmsgbmdBbmltYXRlIG5nQW5pbWF0ZSBtb2R1bGV9IGlzIGluY2x1ZGVkLCBidXQgbm8gYWN0dWFsIGFuaW1hdGlvbnNcbiAqIGFyZSBkZWZpbmVkIGZvciB7QGxpbmsgbmdTaG93fSAvIHtAbGluayBuZ0hpZGV9LiBJbnRlcm5ldCBFeHBsb3JlciBpcyBhZmZlY3RlZCBtb3JlIG9mdGVuIHRoYW5cbiAqIG90aGVyIGJyb3dzZXJzLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHdheSB0byBtaXRpZ2F0ZSB0aGlzIHByb2JsZW06XG4gKlxuICogLSB7QGxpbmsgZ3VpZGUvYW5pbWF0aW9ucyNob3ctdG8tc2VsZWN0aXZlbHktZW5hYmxlLWRpc2FibGUtYW5kLXNraXAtYW5pbWF0aW9ucyBEaXNhYmxlIGFuaW1hdGlvbnMgb24gdGhlIGFmZmVjdGVkIGVsZW1lbnRzfS5cbiAqIC0gVXNlIHtAbGluayBuZ0lmfSBvciB7QGxpbmsgbmdTd2l0Y2h9IGluc3RlYWQgb2Yge0BsaW5rIG5nU2hvd30gLyB7QGxpbmsgbmdIaWRlfS5cbiAqIC0gVXNlIHRoZSBzcGVjaWFsIENTUyBzZWxlY3RvciBgbmctaGlkZS5uZy1oaWRlLWFuaW1hdGVgIHRvIHNldCBge2Rpc3BsYXk6IG5vbmV9YCBvciBzaW1pbGFyIG9uIHRoZSBhZmZlY3RlZCBlbGVtZW50cy5cbiAqIC0gVXNlIGBuZy1jbGFzcz1cInsnbmctaGlkZSc6IGV4cHJlc3Npb259YCBpbnN0ZWFkIG9mIGluc3RlYWQgb2Yge0BsaW5rIG5nU2hvd30gLyB7QGxpbmsgbmdIaWRlfS5cbiAqIC0gRGVmaW5lIGFuIGFuaW1hdGlvbiBvbiB0aGUgYWZmZWN0ZWQgZWxlbWVudHMuXG4gKi9cbnZhciBuZ0hpZGVEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdIaWRlLCBmdW5jdGlvbiBuZ0hpZGVXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICAvLyBUaGUgY29tbWVudCBpbnNpZGUgb2YgdGhlIG5nU2hvd0RpcmVjdGl2ZSBleHBsYWlucyB3aHkgd2UgYWRkIGFuZFxuICAgICAgICAvLyByZW1vdmUgYSB0ZW1wb3JhcnkgY2xhc3MgZm9yIHRoZSBzaG93L2hpZGUgYW5pbWF0aW9uXG4gICAgICAgICRhbmltYXRlW3ZhbHVlID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKGVsZW1lbnQsTkdfSElERV9DTEFTUywge1xuICAgICAgICAgIHRlbXBDbGFzc2VzOiBOR19ISURFX0lOX1BST0dSRVNTX0NMQVNTXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTdHlsZVxuICogQHJlc3RyaWN0IEFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nU3R5bGVgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNldCBDU1Mgc3R5bGUgb24gYW4gSFRNTCBlbGVtZW50IGNvbmRpdGlvbmFsbHkuXG4gKlxuICogQGtub3duSXNzdWVcbiAqIFlvdSBzaG91bGQgbm90IHVzZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9ufSBpbiB0aGUgdmFsdWUgb2YgdGhlIGBzdHlsZWBcbiAqIGF0dHJpYnV0ZSwgd2hlbiB1c2luZyB0aGUgYG5nU3R5bGVgIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50LlxuICogU2VlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uI2tub3duLWlzc3VlcyBoZXJlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1N0eWxlXG4gKlxuICoge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gd2hpY2ggZXZhbHMgdG8gYW5cbiAqIG9iamVjdCB3aG9zZSBrZXlzIGFyZSBDU1Mgc3R5bGUgbmFtZXMgYW5kIHZhbHVlcyBhcmUgY29ycmVzcG9uZGluZyB2YWx1ZXMgZm9yIHRob3NlIENTU1xuICoga2V5cy5cbiAqXG4gKiBTaW5jZSBzb21lIENTUyBzdHlsZSBuYW1lcyBhcmUgbm90IHZhbGlkIGtleXMgZm9yIGFuIG9iamVjdCwgdGhleSBtdXN0IGJlIHF1b3RlZC5cbiAqIFNlZSB0aGUgJ2JhY2tncm91bmQtY29sb3InIHN0eWxlIGluIHRoZSBleGFtcGxlIGJlbG93LlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctc3R5bGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInNldCBjb2xvclwiIG5nLWNsaWNrPVwibXlTdHlsZT17Y29sb3I6J3JlZCd9XCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXQgYmFja2dyb3VuZFwiIG5nLWNsaWNrPVwibXlTdHlsZT17J2JhY2tncm91bmQtY29sb3InOidibHVlJ31cIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cImNsZWFyXCIgbmctY2xpY2s9XCJteVN0eWxlPXt9XCI+XG4gICAgICAgIDxici8+XG4gICAgICAgIDxzcGFuIG5nLXN0eWxlPVwibXlTdHlsZVwiPlNhbXBsZSBUZXh0PC9zcGFuPlxuICAgICAgICA8cHJlPm15U3R5bGU9e3tteVN0eWxlfX08L3ByZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgc3BhbiB7XG4gICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgY29sb3JTcGFuID0gZWxlbWVudChieS5jc3MoJ3NwYW4nKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLXN0eWxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoY29sb3JTcGFuLmdldENzc1ZhbHVlKCdjb2xvcicpKS50b0JlKCdyZ2JhKDAsIDAsIDAsIDEpJyk7XG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnaW5wdXRbdmFsdWU9XFwnc2V0IGNvbG9yXFwnXScpKS5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGNvbG9yU3Bhbi5nZXRDc3NWYWx1ZSgnY29sb3InKSkudG9CZSgncmdiYSgyNTUsIDAsIDAsIDEpJyk7XG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnaW5wdXRbdmFsdWU9Y2xlYXJdJykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoY29sb3JTcGFuLmdldENzc1ZhbHVlKCdjb2xvcicpKS50b0JlKCdyZ2JhKDAsIDAsIDAsIDEpJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nU3R5bGVEaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZShmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGF0dHIubmdTdHlsZSwgZnVuY3Rpb24gbmdTdHlsZVdhdGNoQWN0aW9uKG5ld1N0eWxlcywgb2xkU3R5bGVzKSB7XG4gICAgaWYgKG9sZFN0eWxlcyAmJiAobmV3U3R5bGVzICE9PSBvbGRTdHlsZXMpKSB7XG4gICAgICBmb3JFYWNoKG9sZFN0eWxlcywgZnVuY3Rpb24odmFsLCBzdHlsZSkgeyBlbGVtZW50LmNzcyhzdHlsZSwgJycpO30pO1xuICAgIH1cbiAgICBpZiAobmV3U3R5bGVzKSBlbGVtZW50LmNzcyhuZXdTdHlsZXMpO1xuICB9KTtcbn0pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU3dpdGNoXG4gKiBAcmVzdHJpY3QgRUFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdTd2l0Y2hgIGRpcmVjdGl2ZSBpcyB1c2VkIHRvIGNvbmRpdGlvbmFsbHkgc3dhcCBET00gc3RydWN0dXJlIG9uIHlvdXIgdGVtcGxhdGUgYmFzZWQgb24gYSBzY29wZSBleHByZXNzaW9uLlxuICogRWxlbWVudHMgd2l0aGluIGBuZ1N3aXRjaGAgYnV0IHdpdGhvdXQgYG5nU3dpdGNoV2hlbmAgb3IgYG5nU3dpdGNoRGVmYXVsdGAgZGlyZWN0aXZlcyB3aWxsIGJlIHByZXNlcnZlZCBhdCB0aGUgbG9jYXRpb25cbiAqIGFzIHNwZWNpZmllZCBpbiB0aGUgdGVtcGxhdGUuXG4gKlxuICogVGhlIGRpcmVjdGl2ZSBpdHNlbGYgd29ya3Mgc2ltaWxhciB0byBuZ0luY2x1ZGUsIGhvd2V2ZXIsIGluc3RlYWQgb2YgZG93bmxvYWRpbmcgdGVtcGxhdGUgY29kZSAob3IgbG9hZGluZyBpdFxuICogZnJvbSB0aGUgdGVtcGxhdGUgY2FjaGUpLCBgbmdTd2l0Y2hgIHNpbXBseSBjaG9vc2VzIG9uZSBvZiB0aGUgbmVzdGVkIGVsZW1lbnRzIGFuZCBtYWtlcyBpdCB2aXNpYmxlIGJhc2VkIG9uIHdoaWNoIGVsZW1lbnRcbiAqIG1hdGNoZXMgdGhlIHZhbHVlIG9idGFpbmVkIGZyb20gdGhlIGV2YWx1YXRlZCBleHByZXNzaW9uLiBJbiBvdGhlciB3b3JkcywgeW91IGRlZmluZSBhIGNvbnRhaW5lciBlbGVtZW50XG4gKiAod2hlcmUgeW91IHBsYWNlIHRoZSBkaXJlY3RpdmUpLCBwbGFjZSBhbiBleHByZXNzaW9uIG9uIHRoZSAqKmBvbj1cIi4uLlwiYCBhdHRyaWJ1dGUqKlxuICogKG9yIHRoZSAqKmBuZy1zd2l0Y2g9XCIuLi5cImAgYXR0cmlidXRlKiopLCBkZWZpbmUgYW55IGlubmVyIGVsZW1lbnRzIGluc2lkZSBvZiB0aGUgZGlyZWN0aXZlIGFuZCBwbGFjZVxuICogYSB3aGVuIGF0dHJpYnV0ZSBwZXIgZWxlbWVudC4gVGhlIHdoZW4gYXR0cmlidXRlIGlzIHVzZWQgdG8gaW5mb3JtIG5nU3dpdGNoIHdoaWNoIGVsZW1lbnQgdG8gZGlzcGxheSB3aGVuIHRoZSBvblxuICogZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQuIElmIGEgbWF0Y2hpbmcgZXhwcmVzc2lvbiBpcyBub3QgZm91bmQgdmlhIGEgd2hlbiBhdHRyaWJ1dGUgdGhlbiBhbiBlbGVtZW50IHdpdGggdGhlIGRlZmF1bHRcbiAqIGF0dHJpYnV0ZSBpcyBkaXNwbGF5ZWQuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqIEJlIGF3YXJlIHRoYXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMgdG8gbWF0Y2ggYWdhaW5zdCBjYW5ub3QgYmUgZXhwcmVzc2lvbnMuIFRoZXkgYXJlIGludGVycHJldGVkXG4gKiBhcyBsaXRlcmFsIHN0cmluZyB2YWx1ZXMgdG8gbWF0Y2ggYWdhaW5zdC5cbiAqIEZvciBleGFtcGxlLCAqKmBuZy1zd2l0Y2gtd2hlbj1cInNvbWVWYWxcImAqKiB3aWxsIG1hdGNoIGFnYWluc3QgdGhlIHN0cmluZyBgXCJzb21lVmFsXCJgIG5vdCBhZ2FpbnN0IHRoZVxuICogdmFsdWUgb2YgdGhlIGV4cHJlc3Npb24gYCRzY29wZS5zb21lVmFsYC5cbiAqIDwvZGl2PlxuXG4gKiBAYW5pbWF0aW9uc1xuICogfCBBbmltYXRpb24gICAgICAgICAgICAgICAgICAgICAgICB8IE9jY3VycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNlbnRlciBlbnRlcn0gIHwgYWZ0ZXIgdGhlIG5nU3dpdGNoIGNvbnRlbnRzIGNoYW5nZSBhbmQgdGhlIG1hdGNoZWQgY2hpbGQgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlIHRoZSBjb250YWluZXIgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjbGVhdmUgbGVhdmV9ICB8IGFmdGVyIHRoZSBuZ1N3aXRjaCBjb250ZW50cyBjaGFuZ2UgYW5kIGp1c3QgYmVmb3JlIHRoZSBmb3JtZXIgY29udGVudHMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgRE9NIHxcbiAqXG4gKiBAdXNhZ2VcbiAqXG4gKiBgYGBcbiAqIDxBTlkgbmctc3dpdGNoPVwiZXhwcmVzc2lvblwiPlxuICogICA8QU5ZIG5nLXN3aXRjaC13aGVuPVwibWF0Y2hWYWx1ZTFcIj4uLi48L0FOWT5cbiAqICAgPEFOWSBuZy1zd2l0Y2gtd2hlbj1cIm1hdGNoVmFsdWUyXCI+Li4uPC9BTlk+XG4gKiAgIDxBTlkgbmctc3dpdGNoLWRlZmF1bHQ+Li4uPC9BTlk+XG4gKiA8L0FOWT5cbiAqIGBgYFxuICpcbiAqXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSAxMjAwXG4gKiBAcGFyYW0geyp9IG5nU3dpdGNofG9uIGV4cHJlc3Npb24gdG8gbWF0Y2ggYWdhaW5zdCA8Y29kZT5uZy1zd2l0Y2gtd2hlbjwvY29kZT4uXG4gKiBPbiBjaGlsZCBlbGVtZW50cyBhZGQ6XG4gKlxuICogKiBgbmdTd2l0Y2hXaGVuYDogdGhlIGNhc2Ugc3RhdGVtZW50IHRvIG1hdGNoIGFnYWluc3QuIElmIG1hdGNoIHRoZW4gdGhpc1xuICogICBjYXNlIHdpbGwgYmUgZGlzcGxheWVkLiBJZiB0aGUgc2FtZSBtYXRjaCBhcHBlYXJzIG11bHRpcGxlIHRpbWVzLCBhbGwgdGhlXG4gKiAgIGVsZW1lbnRzIHdpbGwgYmUgZGlzcGxheWVkLiBJdCBpcyBwb3NzaWJsZSB0byBhc3NvY2lhdGUgbXVsdGlwbGUgdmFsdWVzIHRvXG4gKiAgIHRoZSBzYW1lIGBuZ1N3aXRjaFdoZW5gIGJ5IGRlZmluaW5nIHRoZSBvcHRpb25hbCBhdHRyaWJ1dGVcbiAqICAgYG5nU3dpdGNoV2hlblNlcGFyYXRvcmAuIFRoZSBzZXBhcmF0b3Igd2lsbCBiZSB1c2VkIHRvIHNwbGl0IHRoZSB2YWx1ZSBvZlxuICogICB0aGUgYG5nU3dpdGNoV2hlbmAgYXR0cmlidXRlIGludG8gbXVsdGlwbGUgdG9rZW5zLCBhbmQgdGhlIGVsZW1lbnQgd2lsbCBzaG93XG4gKiAgIGlmIGFueSBvZiB0aGUgYG5nU3dpdGNoYCBldmFsdWF0ZXMgdG8gYW55IG9mIHRoZXNlIHRva2Vucy5cbiAqICogYG5nU3dpdGNoRGVmYXVsdGA6IHRoZSBkZWZhdWx0IGNhc2Ugd2hlbiBubyBvdGhlciBjYXNlIG1hdGNoLiBJZiB0aGVyZVxuICogICBhcmUgbXVsdGlwbGUgZGVmYXVsdCBjYXNlcywgYWxsIG9mIHRoZW0gd2lsbCBiZSBkaXNwbGF5ZWQgd2hlbiBubyBvdGhlclxuICogICBjYXNlIG1hdGNoLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICA8ZXhhbXBsZSBtb2R1bGU9XCJzd2l0Y2hFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLXN3aXRjaFwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwic2VsZWN0aW9uXCIgbmctb3B0aW9ucz1cIml0ZW0gZm9yIGl0ZW0gaW4gaXRlbXNcIj5cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIDxjb2RlPnNlbGVjdGlvbj17e3NlbGVjdGlvbn19PC9jb2RlPlxuICAgICAgICA8aHIvPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2gtY29udGFpbmVyXCJcbiAgICAgICAgICBuZy1zd2l0Y2ggb249XCJzZWxlY3Rpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaFwiIG5nLXN3aXRjaC13aGVuPVwic2V0dGluZ3N8b3B0aW9uc1wiIG5nLXN3aXRjaC13aGVuLXNlcGFyYXRvcj1cInxcIj5TZXR0aW5ncyBEaXY8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaFwiIG5nLXN3aXRjaC13aGVuPVwiaG9tZVwiPkhvbWUgU3BhbjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoXCIgbmctc3dpdGNoLWRlZmF1bHQ+ZGVmYXVsdDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnc3dpdGNoRXhhbXBsZScsIFsnbmdBbmltYXRlJ10pXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLml0ZW1zID0gWydzZXR0aW5ncycsICdob21lJywgJ29wdGlvbnMnLCAnb3RoZXInXTtcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0aW9uID0gJHNjb3BlLml0ZW1zWzBdO1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLmFuaW1hdGUtc3dpdGNoLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBoZWlnaHQ6NDBweDtcbiAgICAgICAgb3ZlcmZsb3c6aGlkZGVuO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gge1xuICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1hbmltYXRlIHtcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xuXG4gICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xuICAgICAgICB0b3A6MDtcbiAgICAgICAgbGVmdDowO1xuICAgICAgICByaWdodDowO1xuICAgICAgICBib3R0b206MDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSxcbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1lbnRlciB7XG4gICAgICAgIHRvcDotNTBweDtcbiAgICAgIH1cbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1sZWF2ZSxcbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xuICAgICAgICB0b3A6MDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIHN3aXRjaEVsZW0gPSBlbGVtZW50KGJ5LmNzcygnW25nLXN3aXRjaF0nKSk7XG4gICAgICB2YXIgc2VsZWN0ID0gZWxlbWVudChieS5tb2RlbCgnc2VsZWN0aW9uJykpO1xuXG4gICAgICBpdCgnc2hvdWxkIHN0YXJ0IGluIHNldHRpbmdzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvU2V0dGluZ3MgRGl2Lyk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHRvIGhvbWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZWN0LmFsbChieS5jc3MoJ29wdGlvbicpKS5nZXQoMSkuY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KHN3aXRjaEVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Ib21lIFNwYW4vKTtcbiAgICAgIH0pO1xuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgdG8gc2V0dGluZ3MgdmlhIFwib3B0aW9uc1wiJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDIpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvU2V0dGluZ3MgRGl2Lyk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgc2VsZWN0IGRlZmF1bHQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZWN0LmFsbChieS5jc3MoJ29wdGlvbicpKS5nZXQoMykuY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KHN3aXRjaEVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9kZWZhdWx0Lyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nU3dpdGNoRGlyZWN0aXZlID0gWyckYW5pbWF0ZScsICckY29tcGlsZScsIGZ1bmN0aW9uKCRhbmltYXRlLCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHJlcXVpcmU6ICduZ1N3aXRjaCcsXG5cbiAgICAvLyBhc2tzIGZvciAkc2NvcGUgdG8gZm9vbCB0aGUgQkMgY29udHJvbGxlciBtb2R1bGVcbiAgICBjb250cm9sbGVyOiBbJyRzY29wZScsIGZ1bmN0aW9uIE5nU3dpdGNoQ29udHJvbGxlcigpIHtcbiAgICAgdGhpcy5jYXNlcyA9IHt9O1xuICAgIH1dLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBuZ1N3aXRjaENvbnRyb2xsZXIpIHtcbiAgICAgIHZhciB3YXRjaEV4cHIgPSBhdHRyLm5nU3dpdGNoIHx8IGF0dHIub24sXG4gICAgICAgICAgc2VsZWN0ZWRUcmFuc2NsdWRlcyA9IFtdLFxuICAgICAgICAgIHNlbGVjdGVkRWxlbWVudHMgPSBbXSxcbiAgICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9ucyA9IFtdLFxuICAgICAgICAgIHNlbGVjdGVkU2NvcGVzID0gW107XG5cbiAgICAgIHZhciBzcGxpY2VGYWN0b3J5ID0gZnVuY3Rpb24oYXJyYXksIGluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlKSBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBzY29wZS4kd2F0Y2god2F0Y2hFeHByLCBmdW5jdGlvbiBuZ1N3aXRjaFdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBpLCBpaTtcblxuICAgICAgICAvLyBTdGFydCB3aXRoIHRoZSBsYXN0LCBpbiBjYXNlIHRoZSBhcnJheSBpcyBtb2RpZmllZCBkdXJpbmcgdGhlIGxvb3BcbiAgICAgICAgd2hpbGUgKHByZXZpb3VzTGVhdmVBbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICRhbmltYXRlLmNhbmNlbChwcmV2aW91c0xlYXZlQW5pbWF0aW9ucy5wb3AoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHNlbGVjdGVkU2NvcGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnZXRCbG9ja05vZGVzKHNlbGVjdGVkRWxlbWVudHNbaV0uY2xvbmUpO1xuICAgICAgICAgIHNlbGVjdGVkU2NvcGVzW2ldLiRkZXN0cm95KCk7XG4gICAgICAgICAgdmFyIHJ1bm5lciA9IHByZXZpb3VzTGVhdmVBbmltYXRpb25zW2ldID0gJGFuaW1hdGUubGVhdmUoc2VsZWN0ZWQpO1xuICAgICAgICAgIHJ1bm5lci5kb25lKHNwbGljZUZhY3RvcnkocHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMsIGkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgc2VsZWN0ZWRTY29wZXMubGVuZ3RoID0gMDtcblxuICAgICAgICBpZiAoKHNlbGVjdGVkVHJhbnNjbHVkZXMgPSBuZ1N3aXRjaENvbnRyb2xsZXIuY2FzZXNbJyEnICsgdmFsdWVdIHx8IG5nU3dpdGNoQ29udHJvbGxlci5jYXNlc1snPyddKSkge1xuICAgICAgICAgIGZvckVhY2goc2VsZWN0ZWRUcmFuc2NsdWRlcywgZnVuY3Rpb24oc2VsZWN0ZWRUcmFuc2NsdWRlKSB7XG4gICAgICAgICAgICBzZWxlY3RlZFRyYW5zY2x1ZGUudHJhbnNjbHVkZShmdW5jdGlvbihjYXNlRWxlbWVudCwgc2VsZWN0ZWRTY29wZSkge1xuICAgICAgICAgICAgICBzZWxlY3RlZFNjb3Blcy5wdXNoKHNlbGVjdGVkU2NvcGUpO1xuICAgICAgICAgICAgICB2YXIgYW5jaG9yID0gc2VsZWN0ZWRUcmFuc2NsdWRlLmVsZW1lbnQ7XG4gICAgICAgICAgICAgIGNhc2VFbGVtZW50W2Nhc2VFbGVtZW50Lmxlbmd0aCsrXSA9ICRjb21waWxlLiQkY3JlYXRlQ29tbWVudCgnZW5kIG5nU3dpdGNoV2hlbicpO1xuICAgICAgICAgICAgICB2YXIgYmxvY2sgPSB7IGNsb25lOiBjYXNlRWxlbWVudCB9O1xuXG4gICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudHMucHVzaChibG9jayk7XG4gICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNhc2VFbGVtZW50LCBhbmNob3IucGFyZW50KCksIGFuY2hvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV07XG5cbnZhciBuZ1N3aXRjaFdoZW5EaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XG4gIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgcHJpb3JpdHk6IDEyMDAsXG4gIHJlcXVpcmU6ICdebmdTd2l0Y2gnLFxuICBtdWx0aUVsZW1lbnQ6IHRydWUsXG4gIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybCwgJHRyYW5zY2x1ZGUpIHtcblxuICAgIHZhciBjYXNlcyA9IGF0dHJzLm5nU3dpdGNoV2hlbi5zcGxpdChhdHRycy5uZ1N3aXRjaFdoZW5TZXBhcmF0b3IpLnNvcnQoKS5maWx0ZXIoXG4gICAgICAvLyBGaWx0ZXIgZHVwbGljYXRlIGNhc2VzXG4gICAgICBmdW5jdGlvbihlbGVtZW50LCBpbmRleCwgYXJyYXkpIHsgcmV0dXJuIGFycmF5W2luZGV4IC0gMV0gIT09IGVsZW1lbnQ7IH1cbiAgICApO1xuXG4gICAgZm9yRWFjaChjYXNlcywgZnVuY3Rpb24od2hlbkNhc2UpIHtcbiAgICAgIGN0cmwuY2FzZXNbJyEnICsgd2hlbkNhc2VdID0gKGN0cmwuY2FzZXNbJyEnICsgd2hlbkNhc2VdIHx8IFtdKTtcbiAgICAgIGN0cmwuY2FzZXNbJyEnICsgd2hlbkNhc2VdLnB1c2goeyB0cmFuc2NsdWRlOiAkdHJhbnNjbHVkZSwgZWxlbWVudDogZWxlbWVudCB9KTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbnZhciBuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XG4gIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgcHJpb3JpdHk6IDEyMDAsXG4gIHJlcXVpcmU6ICdebmdTd2l0Y2gnLFxuICBtdWx0aUVsZW1lbnQ6IHRydWUsXG4gIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuICAgIGN0cmwuY2FzZXNbJz8nXSA9IChjdHJsLmNhc2VzWyc/J10gfHwgW10pO1xuICAgIGN0cmwuY2FzZXNbJz8nXS5wdXNoKHsgdHJhbnNjbHVkZTogJHRyYW5zY2x1ZGUsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XG4gICB9XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1RyYW5zY2x1ZGVcbiAqIEByZXN0cmljdCBFQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERpcmVjdGl2ZSB0aGF0IG1hcmtzIHRoZSBpbnNlcnRpb24gcG9pbnQgZm9yIHRoZSB0cmFuc2NsdWRlZCBET00gb2YgdGhlIG5lYXJlc3QgcGFyZW50IGRpcmVjdGl2ZSB0aGF0IHVzZXMgdHJhbnNjbHVzaW9uLlxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSB0aGF0IHlvdSB3YW50IHRvIGluc2VydCBhIG5hbWVkIHRyYW5zY2x1c2lvbiBzbG90LCBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IHNsb3QsIGJ5IHByb3ZpZGluZyB0aGUgc2xvdCBuYW1lXG4gKiBhcyB0aGUgdmFsdWUgb2YgdGhlIGBuZy10cmFuc2NsdWRlYCBvciBgbmctdHJhbnNjbHVkZS1zbG90YCBhdHRyaWJ1dGUuXG4gKlxuICogSWYgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgbm90IGVtcHR5IChpLmUuIGNvbnRhaW5zIG9uZSBvciBtb3JlIERPTSBub2RlcywgaW5jbHVkaW5nIHdoaXRlc3BhY2UgdGV4dCBub2RlcyksIGFueSBleGlzdGluZ1xuICogY29udGVudCBvZiB0aGlzIGVsZW1lbnQgd2lsbCBiZSByZW1vdmVkIGJlZm9yZSB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBpcyBpbnNlcnRlZC5cbiAqIElmIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50IGlzIGVtcHR5IChvciBvbmx5IHdoaXRlc3BhY2UpLCB0aGUgZXhpc3RpbmcgY29udGVudCBpcyBsZWZ0IGludGFjdC4gVGhpcyBsZXRzIHlvdSBwcm92aWRlIGZhbGxiYWNrXG4gKiBjb250ZW50IGluIHRoZSBjYXNlIHRoYXQgbm8gdHJhbnNjbHVkZWQgY29udGVudCBpcyBwcm92aWRlZC5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdUcmFuc2NsdWRlfG5nVHJhbnNjbHVkZVNsb3QgdGhlIG5hbWUgb2YgdGhlIHNsb3QgdG8gaW5zZXJ0IGF0IHRoaXMgcG9pbnQuIElmIHRoaXMgaXMgbm90IHByb3ZpZGVkLCBpcyBlbXB0eVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGl0cyB2YWx1ZSBpcyB0aGUgc2FtZSBhcyB0aGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHRoZW4gdGhlIGRlZmF1bHQgc2xvdCBpcyB1c2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQmFzaWMgdHJhbnNjbHVzaW9uXG4gKiBUaGlzIGV4YW1wbGUgZGVtb25zdHJhdGVzIGJhc2ljIHRyYW5zY2x1c2lvbiBvZiBjb250ZW50IGludG8gYSBjb21wb25lbnQgZGlyZWN0aXZlLlxuICogPGV4YW1wbGUgbmFtZT1cInNpbXBsZVRyYW5zY2x1ZGVFeGFtcGxlXCIgbW9kdWxlPVwidHJhbnNjbHVkZUV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ3RyYW5zY2x1ZGVFeGFtcGxlJywgW10pXG4gKiAgICAgICAgLmRpcmVjdGl2ZSgncGFuZScsIGZ1bmN0aW9uKCl7XG4gKiAgICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gKiAgICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICogICAgICAgICAgICAgc2NvcGU6IHsgdGl0bGU6J0AnIH0sXG4gKiAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgc3R5bGU9XCJib3JkZXI6IDFweCBzb2xpZCBibGFjaztcIj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogZ3JheVwiPnt7dGl0bGV9fTwvZGl2PicgK1xuICogICAgICAgICAgICAgICAgICAgICAgICAgJzxuZy10cmFuc2NsdWRlPjwvbmctdHJhbnNjbHVkZT4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+J1xuICogICAgICAgICAgIH07XG4gKiAgICAgICB9KVxuICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgJHNjb3BlLnRpdGxlID0gJ0xvcmVtIElwc3VtJztcbiAqICAgICAgICAgJHNjb3BlLnRleHQgPSAnTmVxdWUgcG9ycm8gcXVpc3F1YW0gZXN0IHF1aSBkb2xvcmVtIGlwc3VtIHF1aWEgZG9sb3IuLi4nO1xuICogICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ0aXRsZVwiIGFyaWEtbGFiZWw9XCJ0aXRsZVwiPiA8YnIvPlxuICogICAgICAgPHRleHRhcmVhIG5nLW1vZGVsPVwidGV4dFwiIGFyaWEtbGFiZWw9XCJ0ZXh0XCI+PC90ZXh0YXJlYT4gPGJyLz5cbiAqICAgICAgIDxwYW5lIHRpdGxlPVwie3t0aXRsZX19XCI+PHNwYW4+e3t0ZXh0fX08L3NwYW4+PC9wYW5lPlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICAgaXQoJ3Nob3VsZCBoYXZlIHRyYW5zY2x1ZGVkJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgdmFyIHRpdGxlRWxlbWVudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RpdGxlJykpO1xuICogICAgICAgIHRpdGxlRWxlbWVudC5jbGVhcigpO1xuICogICAgICAgIHRpdGxlRWxlbWVudC5zZW5kS2V5cygnVElUTEUnKTtcbiAqICAgICAgICB2YXIgdGV4dEVsZW1lbnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0ZXh0JykpO1xuICogICAgICAgIHRleHRFbGVtZW50LmNsZWFyKCk7XG4gKiAgICAgICAgdGV4dEVsZW1lbnQuc2VuZEtleXMoJ1RFWFQnKTtcbiAqICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd0aXRsZScpKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1RJVExFJyk7XG4gKiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndGV4dCcpKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1RFWFQnKTtcbiAqICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFRyYW5zY2x1ZGUgZmFsbGJhY2sgY29udGVudFxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYE5nVHJhbnNjbHVkZWAgd2l0aCBmYWxsYmFjayBjb250ZW50LCB0aGF0XG4gKiBpcyBkaXNwbGF5ZWQgaWYgbm8gdHJhbnNjbHVkZWQgY29udGVudCBpcyBwcm92aWRlZC5cbiAqXG4gKiA8ZXhhbXBsZSBtb2R1bGU9XCJ0cmFuc2NsdWRlRmFsbGJhY2tDb250ZW50RXhhbXBsZVwiIG5hbWU9XCJuZy10cmFuc2NsdWRlXCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogPHNjcmlwdD5cbiAqIGFuZ3VsYXIubW9kdWxlKCd0cmFuc2NsdWRlRmFsbGJhY2tDb250ZW50RXhhbXBsZScsIFtdKVxuICogLmRpcmVjdGl2ZSgnbXlCdXR0b24nLCBmdW5jdGlvbigpe1xuICogICAgICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAqICAgICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAqICAgICAgICAgICAgICAgc2NvcGU6IHRydWUsXG4gKiAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGJ1dHRvbiBzdHlsZT1cImN1cnNvcjogcG9pbnRlcjtcIj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxuZy10cmFuc2NsdWRlPicgK1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8YiBzdHlsZT1cImNvbG9yOiByZWQ7XCI+QnV0dG9uMTwvYj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvbmctdHJhbnNjbHVkZT4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICc8L2J1dHRvbj4nXG4gKiAgICAgICAgICAgICB9O1xuICogICAgICAgICB9KTtcbiAqIDwvc2NyaXB0PlxuICogPCEtLSBmYWxsYmFjayBidXR0b24gY29udGVudCAtLT5cbiAqIDxteS1idXR0b24gaWQ9XCJmYWxsYmFja1wiPjwvbXktYnV0dG9uPlxuICogPCEtLSBtb2RpZmllZCBidXR0b24gY29udGVudCAtLT5cbiAqIDxteS1idXR0b24gaWQ9XCJtb2RpZmllZFwiPlxuICogICA8aSBzdHlsZT1cImNvbG9yOiBncmVlbjtcIj5CdXR0b24yPC9pPlxuICogPC9teS1idXR0b24+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiBpdCgnc2hvdWxkIGhhdmUgZGlmZmVyZW50IHRyYW5zY2x1ZGUgZWxlbWVudCBjb250ZW50JywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZmFsbGJhY2snKSkuZ2V0VGV4dCgpKS50b0JlKCdCdXR0b24xJyk7XG4gKiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbW9kaWZpZWQnKSkuZ2V0VGV4dCgpKS50b0JlKCdCdXR0b24yJyk7XG4gKiAgICAgICAgfSk7XG4gKiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBNdWx0aS1zbG90IHRyYW5zY2x1c2lvblxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB1c2luZyBtdWx0aS1zbG90IHRyYW5zY2x1c2lvbiBpbiBhIGNvbXBvbmVudCBkaXJlY3RpdmUuXG4gKiA8ZXhhbXBsZSBuYW1lPVwibXVsdGlTbG90VHJhbnNjbHVkZUV4YW1wbGVcIiBtb2R1bGU9XCJtdWx0aVNsb3RUcmFuc2NsdWRlRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgPHN0eWxlPlxuICogICAgICAudGl0bGUsIC5mb290ZXIge1xuICogICAgICAgIGJhY2tncm91bmQtY29sb3I6IGdyYXlcbiAqICAgICAgfVxuICogICAgPC9zdHlsZT5cbiAqICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInRpdGxlXCIgYXJpYS1sYWJlbD1cInRpdGxlXCI+IDxici8+XG4gKiAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInRleHRcIiBhcmlhLWxhYmVsPVwidGV4dFwiPjwvdGV4dGFyZWE+IDxici8+XG4gKiAgICAgIDxwYW5lPlxuICogICAgICAgIDxwYW5lLXRpdGxlPjxhIG5nLWhyZWY9XCJ7e2xpbmt9fVwiPnt7dGl0bGV9fTwvYT48L3BhbmUtdGl0bGU+XG4gKiAgICAgICAgPHBhbmUtYm9keT48cD57e3RleHR9fTwvcD48L3BhbmUtYm9keT5cbiAqICAgICAgPC9wYW5lPlxuICogICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgYW5ndWxhci5tb2R1bGUoJ211bHRpU2xvdFRyYW5zY2x1ZGVFeGFtcGxlJywgW10pXG4gKiAgICAgLmRpcmVjdGl2ZSgncGFuZScsIGZ1bmN0aW9uKCkge1xuICogICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICogICAgICAgICAgdHJhbnNjbHVkZToge1xuICogICAgICAgICAgICAndGl0bGUnOiAnP3BhbmVUaXRsZScsXG4gKiAgICAgICAgICAgICdib2R5JzogJ3BhbmVCb2R5JyxcbiAqICAgICAgICAgICAgJ2Zvb3Rlcic6ICc/cGFuZUZvb3RlcidcbiAqICAgICAgICAgIH0sXG4gKiAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgc3R5bGU9XCJib3JkZXI6IDFweCBzb2xpZCBibGFjaztcIj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidGl0bGVcIiBuZy10cmFuc2NsdWRlPVwidGl0bGVcIj5GYWxsYmFjayBUaXRsZTwvZGl2PicgK1xuICogICAgICAgICAgICAgICAgICAgICAgJzxkaXYgbmctdHJhbnNjbHVkZT1cImJvZHlcIj48L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZm9vdGVyXCIgbmctdHJhbnNjbHVkZT1cImZvb3RlclwiPkZhbGxiYWNrIEZvb3RlcjwvZGl2PicgK1xuICogICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nXG4gKiAgICAgICAgfTtcbiAqICAgIH0pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUudGl0bGUgPSAnTG9yZW0gSXBzdW0nO1xuICogICAgICAkc2NvcGUubGluayA9ICdodHRwczovL2dvb2dsZS5jb20nO1xuICogICAgICAkc2NvcGUudGV4dCA9ICdOZXF1ZSBwb3JybyBxdWlzcXVhbSBlc3QgcXVpIGRvbG9yZW0gaXBzdW0gcXVpYSBkb2xvci4uLic7XG4gKiAgICB9XSk7XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgICBpdCgnc2hvdWxkIGhhdmUgdHJhbnNjbHVkZWQgdGhlIHRpdGxlIGFuZCB0aGUgYm9keScsIGZ1bmN0aW9uKCkge1xuICogICAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0aXRsZScpKTtcbiAqICAgICAgICB0aXRsZUVsZW1lbnQuY2xlYXIoKTtcbiAqICAgICAgICB0aXRsZUVsZW1lbnQuc2VuZEtleXMoJ1RJVExFJyk7XG4gKiAgICAgICAgdmFyIHRleHRFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGV4dCcpKTtcbiAqICAgICAgICB0ZXh0RWxlbWVudC5jbGVhcigpO1xuICogICAgICAgIHRleHRFbGVtZW50LnNlbmRLZXlzKCdURVhUJyk7XG4gKiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcudGl0bGUnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdUSVRMRScpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3RleHQnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdURVhUJyk7XG4gKiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuZm9vdGVyJykpLmdldFRleHQoKSkudG9FcXVhbCgnRmFsbGJhY2sgRm9vdGVyJyk7XG4gKiAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1RyYW5zY2x1ZGVNaW5FcnIgPSBtaW5FcnIoJ25nVHJhbnNjbHVkZScpO1xudmFyIG5nVHJhbnNjbHVkZURpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUFDJyxcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ1RyYW5zY2x1ZGVDb21waWxlKHRFbGVtZW50KSB7XG5cbiAgICAgIC8vIFJlbW92ZSBhbmQgY2FjaGUgYW55IG9yaWdpbmFsIGNvbnRlbnQgdG8gYWN0IGFzIGEgZmFsbGJhY2tcbiAgICAgIHZhciBmYWxsYmFja0xpbmtGbiA9ICRjb21waWxlKHRFbGVtZW50LmNvbnRlbnRzKCkpO1xuICAgICAgdEVsZW1lbnQuZW1wdHkoKTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nVHJhbnNjbHVkZVBvc3RMaW5rKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgY29udHJvbGxlciwgJHRyYW5zY2x1ZGUpIHtcblxuICAgICAgICBpZiAoISR0cmFuc2NsdWRlKSB7XG4gICAgICAgICAgdGhyb3cgbmdUcmFuc2NsdWRlTWluRXJyKCdvcnBoYW4nLFxuICAgICAgICAgICdJbGxlZ2FsIHVzZSBvZiBuZ1RyYW5zY2x1ZGUgZGlyZWN0aXZlIGluIHRoZSB0ZW1wbGF0ZSEgJyArXG4gICAgICAgICAgJ05vIHBhcmVudCBkaXJlY3RpdmUgdGhhdCByZXF1aXJlcyBhIHRyYW5zY2x1c2lvbiBmb3VuZC4gJyArXG4gICAgICAgICAgJ0VsZW1lbnQ6IHswfScsXG4gICAgICAgICAgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBpcyBvZiB0aGUgZm9ybTogYG5nLXRyYW5zY2x1ZGU9XCJuZy10cmFuc2NsdWRlXCJgIHRoZW4gdHJlYXQgaXQgbGlrZSB0aGUgZGVmYXVsdFxuICAgICAgICBpZiAoJGF0dHJzLm5nVHJhbnNjbHVkZSA9PT0gJGF0dHJzLiRhdHRyLm5nVHJhbnNjbHVkZSkge1xuICAgICAgICAgICRhdHRycy5uZ1RyYW5zY2x1ZGUgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2xvdE5hbWUgPSAkYXR0cnMubmdUcmFuc2NsdWRlIHx8ICRhdHRycy5uZ1RyYW5zY2x1ZGVTbG90O1xuXG4gICAgICAgIC8vIElmIHRoZSBzbG90IGlzIHJlcXVpcmVkIGFuZCBubyB0cmFuc2NsdXNpb24gY29udGVudCBpcyBwcm92aWRlZCB0aGVuIHRoaXMgY2FsbCB3aWxsIHRocm93IGFuIGVycm9yXG4gICAgICAgICR0cmFuc2NsdWRlKG5nVHJhbnNjbHVkZUNsb25lQXR0YWNoRm4sIG51bGwsIHNsb3ROYW1lKTtcblxuICAgICAgICAvLyBJZiB0aGUgc2xvdCBpcyBvcHRpb25hbCBhbmQgbm8gdHJhbnNjbHVzaW9uIGNvbnRlbnQgaXMgcHJvdmlkZWQgdGhlbiB1c2UgdGhlIGZhbGxiYWNrIGNvbnRlbnRcbiAgICAgICAgaWYgKHNsb3ROYW1lICYmICEkdHJhbnNjbHVkZS5pc1Nsb3RGaWxsZWQoc2xvdE5hbWUpKSB7XG4gICAgICAgICAgdXNlRmFsbGJhY2tDb250ZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBuZ1RyYW5zY2x1ZGVDbG9uZUF0dGFjaEZuKGNsb25lLCB0cmFuc2NsdWRlZFNjb3BlKSB7XG4gICAgICAgICAgaWYgKGNsb25lLmxlbmd0aCAmJiBub3RXaGl0ZXNwYWNlKGNsb25lKSkge1xuICAgICAgICAgICAgJGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXNlRmFsbGJhY2tDb250ZW50KCk7XG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBub3RoaW5nIGxpbmtlZCBhZ2FpbnN0IHRoZSB0cmFuc2NsdWRlZCBzY29wZSBzaW5jZSBubyBjb250ZW50IHdhcyBhdmFpbGFibGUsXG4gICAgICAgICAgICAvLyBzbyBpdCBzaG91bGQgYmUgc2FmZSB0byBjbGVhbiB1cCB0aGUgZ2VuZXJhdGVkIHNjb3BlLlxuICAgICAgICAgICAgdHJhbnNjbHVkZWRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVzZUZhbGxiYWNrQ29udGVudCgpIHtcbiAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIHRoZSBmYWxsYmFjayBjb250ZW50IHJhdGhlciB0aGFuIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50LFxuICAgICAgICAgIC8vIHdlIGxpbmsgYWdhaW5zdCB0aGUgc2NvcGUgb2YgdGhpcyBkaXJlY3RpdmUgcmF0aGVyIHRoYW4gdGhlIHRyYW5zY2x1ZGVkIHNjb3BlXG4gICAgICAgICAgZmFsbGJhY2tMaW5rRm4oJHNjb3BlLCBmdW5jdGlvbihjbG9uZSkge1xuICAgICAgICAgICAgJGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG5vdFdoaXRlc3BhY2Uobm9kZXMpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBub2Rlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IE5PREVfVFlQRV9URVhUIHx8IG5vZGUubm9kZVZhbHVlLnRyaW0oKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgc2NyaXB0XG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTG9hZCB0aGUgY29udGVudCBvZiBhIGA8c2NyaXB0PmAgZWxlbWVudCBpbnRvIHtAbGluayBuZy4kdGVtcGxhdGVDYWNoZSBgJHRlbXBsYXRlQ2FjaGVgfSwgc28gdGhhdCB0aGVcbiAqIHRlbXBsYXRlIGNhbiBiZSB1c2VkIGJ5IHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbmNsdWRlIGBuZ0luY2x1ZGVgfSxcbiAqIHtAbGluayBuZ1JvdXRlLmRpcmVjdGl2ZTpuZ1ZpZXcgYG5nVmlld2B9LCBvciB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZXN9LiBUaGUgdHlwZSBvZiB0aGVcbiAqIGA8c2NyaXB0PmAgZWxlbWVudCBtdXN0IGJlIHNwZWNpZmllZCBhcyBgdGV4dC9uZy10ZW1wbGF0ZWAsIGFuZCBhIGNhY2hlIG5hbWUgZm9yIHRoZSB0ZW1wbGF0ZSBtdXN0IGJlXG4gKiBhc3NpZ25lZCB0aHJvdWdoIHRoZSBlbGVtZW50J3MgYGlkYCwgd2hpY2ggY2FuIHRoZW4gYmUgdXNlZCBhcyBhIGRpcmVjdGl2ZSdzIGB0ZW1wbGF0ZVVybGAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgTXVzdCBiZSBzZXQgdG8gYCd0ZXh0L25nLXRlbXBsYXRlJ2AuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQ2FjaGUgbmFtZSBvZiB0aGUgdGVtcGxhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAgPGV4YW1wbGUgIG5hbWU9XCJzY3JpcHQtdGFnXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQgdHlwZT1cInRleHQvbmctdGVtcGxhdGVcIiBpZD1cIi90cGwuaHRtbFwiPlxuICAgICAgICBDb250ZW50IG9mIHRoZSB0ZW1wbGF0ZS5cbiAgICAgIDwvc2NyaXB0PlxuXG4gICAgICA8YSBuZy1jbGljaz1cImN1cnJlbnRUcGw9Jy90cGwuaHRtbCdcIiBpZD1cInRwbC1saW5rXCI+TG9hZCBpbmxpbmVkIHRlbXBsYXRlPC9hPlxuICAgICAgPGRpdiBpZD1cInRwbC1jb250ZW50XCIgbmctaW5jbHVkZSBzcmM9XCJjdXJyZW50VHBsXCI+PC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZSBkZWZpbmVkIGluc2lkZSBzY3JpcHQgdGFnJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjdHBsLWxpbmsnKSkuY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjdHBsLWNvbnRlbnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IG9mIHRoZSB0ZW1wbGF0ZS8pO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBzY3JpcHREaXJlY3RpdmUgPSBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIGlmIChhdHRyLnR5cGUgPT09ICd0ZXh0L25nLXRlbXBsYXRlJykge1xuICAgICAgICB2YXIgdGVtcGxhdGVVcmwgPSBhdHRyLmlkLFxuICAgICAgICAgICAgdGV4dCA9IGVsZW1lbnRbMF0udGV4dDtcblxuICAgICAgICAkdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGVVcmwsIHRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1dO1xuXG4vKiBleHBvcnRlZCBzZWxlY3REaXJlY3RpdmUsIG9wdGlvbkRpcmVjdGl2ZSAqL1xuXG52YXIgbm9vcE5nTW9kZWxDb250cm9sbGVyID0geyAkc2V0Vmlld1ZhbHVlOiBub29wLCAkcmVuZGVyOiBub29wIH07XG5cbmZ1bmN0aW9uIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKG9wdGlvbkVsLCB2YWx1ZSkge1xuICBvcHRpb25FbC5wcm9wKCdzZWxlY3RlZCcsIHZhbHVlKTtcbiAgLyoqXG4gICAqIFdoZW4gdW5zZWxlY3RpbmcgYW4gb3B0aW9uLCBzZXR0aW5nIHRoZSBwcm9wZXJ0eSB0byBudWxsIC8gZmFsc2Ugc2hvdWxkIGJlIGVub3VnaFxuICAgKiBIb3dldmVyLCBzY3JlZW5yZWFkZXJzIG1pZ2h0IHJlYWN0IHRvIHRoZSBzZWxlY3RlZCBhdHRyaWJ1dGUgaW5zdGVhZCwgc2VlXG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzE0NDE5XG4gICAqIE5vdGU6IFwic2VsZWN0ZWRcIiBpcyBhIGJvb2xlYW4gYXR0ciBhbmQgd2lsbCBiZSByZW1vdmVkIHdoZW4gdGhlIFwidmFsdWVcIiBhcmcgaW4gYXR0cigpIGlzIGZhbHNlXG4gICAqIG9yIG51bGxcbiAgICovXG4gIG9wdGlvbkVsLmF0dHIoJ3NlbGVjdGVkJywgdmFsdWUpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyB0eXBlXG4gKiBAbmFtZSAgc2VsZWN0LlNlbGVjdENvbnRyb2xsZXJcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBjb250cm9sbGVyIGZvciB0aGUge0BsaW5rIG5nLnNlbGVjdCBzZWxlY3R9IGRpcmVjdGl2ZS4gVGhlIGNvbnRyb2xsZXIgZXhwb3Nlc1xuICogYSBmZXcgdXRpbGl0eSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgdG8gYXVnbWVudCB0aGUgYmVoYXZpb3Igb2YgYSByZWd1bGFyIG9yIGFuXG4gKiB7QGxpbmsgbmcubmdPcHRpb25zIG5nT3B0aW9uc30gc2VsZWN0IGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTZXQgYSBjdXN0b20gZXJyb3Igd2hlbiB0aGUgdW5rbm93biBvcHRpb24gaXMgc2VsZWN0ZWRcbiAqXG4gKiBUaGlzIGV4YW1wbGUgc2V0cyBhIGN1c3RvbSBlcnJvciBcInVua25vd25WYWx1ZVwiIG9uIHRoZSBuZ01vZGVsQ29udHJvbGxlclxuICogd2hlbiB0aGUgc2VsZWN0IGVsZW1lbnQncyB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZCwgaS5lLiB3aGVuIHRoZSBtb2RlbCBpcyBzZXQgdG8gYSB2YWx1ZVxuICogdGhhdCBpcyBub3QgbWF0Y2hlZCBieSBhbnkgb3B0aW9uLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJzZWxlY3QtdW5rbm93bi12YWx1ZS1lcnJvclwiIG1vZHVsZT1cInN0YXRpY1NlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwidGVzdFNlbGVjdFwiPiBTaW5nbGUgc2VsZWN0OiA8L2xhYmVsPjxicj5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJ0ZXN0U2VsZWN0XCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiIHVua25vd24tdmFsdWUtZXJyb3I+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTFcIj5PcHRpb24gMTwvb3B0aW9uPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0yXCI+T3B0aW9uIDI8L29wdGlvbj5cbiAqICAgICA8L3NlbGVjdD48YnI+XG4gKiAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLWlmPVwibXlGb3JtLnRlc3RTZWxlY3QuJGVycm9yLnVua25vd25WYWx1ZVwiPlxuICogICAgICAgRXJyb3I6IFRoZSBjdXJyZW50IG1vZGVsIGRvZXNuJ3QgbWF0Y2ggYW55IG9wdGlvbjwvc3Bhbj48YnI+XG4gKlxuICogICAgIDxidXR0b24gbmctY2xpY2s9XCJmb3JjZVVua25vd25PcHRpb24oKVwiPkZvcmNlIHVua25vd24gb3B0aW9uPC9idXR0b24+PGJyPlxuICogICA8L2Zvcm0+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnc3RhdGljU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuc2VsZWN0ZWQgPSBudWxsO1xuICpcbiAqICAgICAgJHNjb3BlLmZvcmNlVW5rbm93bk9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICRzY29wZS5zZWxlY3RlZCA9ICdub25zZW5zZSc7XG4gKiAgICAgIH07XG4gKiAgIH1dKVxuICogICAuZGlyZWN0aXZlKCd1bmtub3duVmFsdWVFcnJvcicsIGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiB7XG4gKiAgICAgICByZXF1aXJlOiBbJ25nTW9kZWwnLCAnc2VsZWN0J10sXG4gKiAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gKiAgICAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGN0cmxzWzBdO1xuICogICAgICAgICB2YXIgc2VsZWN0Q3RybCA9IGN0cmxzWzFdO1xuICpcbiAqICAgICAgICAgbmdNb2RlbEN0cmwuJHZhbGlkYXRvcnMudW5rbm93blZhbHVlID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gKiAgICAgICAgICAgaWYgKHNlbGVjdEN0cmwuJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkKCkpIHtcbiAqICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAqICAgICAgICAgICB9XG4gKlxuICogICAgICAgICAgIHJldHVybiB0cnVlO1xuICogICAgICAgICB9O1xuICogICAgICAgfVxuICpcbiAqICAgICB9O1xuICogICB9KTtcbiAqIDwvZmlsZT5cbiAqPC9leGFtcGxlPlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFNldCB0aGUgXCJyZXF1aXJlZFwiIGVycm9yIHdoZW4gdGhlIHVua25vd24gb3B0aW9uIGlzIHNlbGVjdGVkLlxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSBcInJlcXVpcmVkXCIgZXJyb3Igb24gdGhlIG5nTW9kZWxDb250cm9sbGVyIGlzIG9ubHkgc2V0IG9uIGEgcmVxdWlyZWQgc2VsZWN0XG4gKiB3aGVuIHRoZSBlbXB0eSBvcHRpb24gaXMgc2VsZWN0ZWQuIFRoaXMgZXhhbXBsZSBhZGRzIGEgY3VzdG9tIGRpcmVjdGl2ZSB0aGF0IGFsc28gc2V0cyB0aGVcbiAqIGVycm9yIHdoZW4gdGhlIHVua25vd24gb3B0aW9uIGlzIHNlbGVjdGVkLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJzZWxlY3QtdW5rbm93bi12YWx1ZS1yZXF1aXJlZFwiIG1vZHVsZT1cInN0YXRpY1NlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwidGVzdFNlbGVjdFwiPiBTZWxlY3Q6IDwvbGFiZWw+PGJyPlxuICogICAgIDxzZWxlY3QgbmFtZT1cInRlc3RTZWxlY3RcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCIgcmVxdWlyZWQgdW5rbm93bi12YWx1ZS1yZXF1aXJlZD5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMVwiPk9wdGlvbiAxPC9vcHRpb24+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTJcIj5PcHRpb24gMjwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0Pjxicj5cbiAqICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctaWY9XCJteUZvcm0udGVzdFNlbGVjdC4kZXJyb3IucmVxdWlyZWRcIj5FcnJvcjogUGxlYXNlIHNlbGVjdCBhIHZhbHVlPC9zcGFuPjxicj5cbiAqXG4gKiAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImZvcmNlVW5rbm93bk9wdGlvbigpXCI+Rm9yY2UgdW5rbm93biBvcHRpb248L2J1dHRvbj48YnI+XG4gKiAgIDwvZm9ybT5cbiAqIDwvZGl2PlxuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogIGFuZ3VsYXIubW9kdWxlKCdzdGF0aWNTZWxlY3QnLCBbXSlcbiAqICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICRzY29wZS5zZWxlY3RlZCA9IG51bGw7XG4gKlxuICogICAgICAkc2NvcGUuZm9yY2VVbmtub3duT3B0aW9uID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgJHNjb3BlLnNlbGVjdGVkID0gJ25vbnNlbnNlJztcbiAqICAgICAgfTtcbiAqICAgfV0pXG4gKiAgIC5kaXJlY3RpdmUoJ3Vua25vd25WYWx1ZVJlcXVpcmVkJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIHtcbiAqICAgICAgIHByaW9yaXR5OiAxLCAvLyBUaGlzIGRpcmVjdGl2ZSBtdXN0IHJ1biBhZnRlciB0aGUgcmVxdWlyZWQgZGlyZWN0aXZlIGhhcyBhZGRlZCBpdHMgdmFsaWRhdG9yXG4gKiAgICAgICByZXF1aXJlOiBbJ25nTW9kZWwnLCAnc2VsZWN0J10sXG4gKiAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gKiAgICAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGN0cmxzWzBdO1xuICogICAgICAgICB2YXIgc2VsZWN0Q3RybCA9IGN0cmxzWzFdO1xuICpcbiAqICAgICAgICAgdmFyIG9yaWdpbmFsUmVxdWlyZWRWYWxpZGF0b3IgPSBuZ01vZGVsQ3RybC4kdmFsaWRhdG9ycy5yZXF1aXJlZDtcbiAqXG4gKiAgICAgICAgIG5nTW9kZWxDdHJsLiR2YWxpZGF0b3JzLnJlcXVpcmVkID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgaWYgKGF0dHJzLnJlcXVpcmVkICYmIHNlbGVjdEN0cmwuJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkKCkpIHtcbiAqICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAqICAgICAgICAgICB9XG4gKlxuICogICAgICAgICAgIHJldHVybiBvcmlnaW5hbFJlcXVpcmVkVmFsaWRhdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gKiAgICAgICAgIH07XG4gKiAgICAgICB9XG4gKiAgICAgfTtcbiAqICAgfSk7XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgaXQoJ3Nob3VsZCBzaG93IHRoZSBlcnJvciBtZXNzYWdlIHdoZW4gdGhlIHVua25vd24gb3B0aW9uIGlzIHNlbGVjdGVkJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciBlcnJvciA9IGVsZW1lbnQoYnkuY2xhc3NOYW1lKCdlcnJvcicpKTtcblxuICAgICAgZXhwZWN0KGVycm9yLmdldFRleHQoKSkudG9CZSgnRXJyb3I6IFBsZWFzZSBzZWxlY3QgYSB2YWx1ZScpO1xuXG4gICAgICBlbGVtZW50KGJ5LmNzc0NvbnRhaW5pbmdUZXh0KCdvcHRpb24nLCAnT3B0aW9uIDEnKSkuY2xpY2soKTtcblxuICAgICAgZXhwZWN0KGVycm9yLmlzUHJlc2VudCgpKS50b0JlKGZhbHNlKTtcblxuICAgICAgZWxlbWVudChieS50YWdOYW1lKCdidXR0b24nKSkuY2xpY2soKTtcblxuICAgICAgZXhwZWN0KGVycm9yLmdldFRleHQoKSkudG9CZSgnRXJyb3I6IFBsZWFzZSBzZWxlY3QgYSB2YWx1ZScpO1xuICAgIH0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICpcbiAqL1xudmFyIFNlbGVjdENvbnRyb2xsZXIgPVxuICAgICAgICBbJyRlbGVtZW50JywgJyRzY29wZScsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbigkZWxlbWVudCwgJHNjb3BlKSB7XG5cbiAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgb3B0aW9uc01hcCA9IG5ldyBOZ01hcCgpO1xuXG4gIHNlbGYuc2VsZWN0VmFsdWVNYXAgPSB7fTsgLy8gS2V5cyBhcmUgdGhlIGhhc2hlZCB2YWx1ZXMsIHZhbHVlcyB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cbiAgLy8gSWYgdGhlIG5nTW9kZWwgZG9lc24ndCBnZXQgcHJvdmlkZWQgdGhlbiBwcm92aWRlIGEgZHVtbXkgbm9vcCB2ZXJzaW9uIHRvIHByZXZlbnQgZXJyb3JzXG4gIHNlbGYubmdNb2RlbEN0cmwgPSBub29wTmdNb2RlbENvbnRyb2xsZXI7XG4gIHNlbGYubXVsdGlwbGUgPSBmYWxzZTtcblxuICAvLyBUaGUgXCJ1bmtub3duXCIgb3B0aW9uIGlzIG9uZSB0aGF0IGlzIHByZXBlbmRlZCB0byB0aGUgbGlzdCBpZiB0aGUgdmlld1ZhbHVlXG4gIC8vIGRvZXMgbm90IG1hdGNoIGFueSBvZiB0aGUgb3B0aW9ucy4gV2hlbiBpdCBpcyByZW5kZXJlZCB0aGUgdmFsdWUgb2YgdGhlIHVua25vd25cbiAgLy8gb3B0aW9uIGlzICc/IFhYWCA/JyB3aGVyZSBYWFggaXMgdGhlIGhhc2hLZXkgb2YgdGhlIHZhbHVlIHRoYXQgaXMgbm90IGtub3duLlxuICAvL1xuICAvLyBTdXBwb3J0OiBJRSA5IG9ubHlcbiAgLy8gV2UgY2FuJ3QganVzdCBqcUxpdGUoJzxvcHRpb24+Jykgc2luY2UganFMaXRlIGlzIG5vdCBzbWFydCBlbm91Z2hcbiAgLy8gdG8gY3JlYXRlIGl0IGluIDxzZWxlY3Q+IGFuZCBJRSBiYXJmcyBvdGhlcndpc2UuXG4gIHNlbGYudW5rbm93bk9wdGlvbiA9IGpxTGl0ZSh3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJykpO1xuXG4gIC8vIFRoZSBlbXB0eSBvcHRpb24gaXMgYW4gb3B0aW9uIHdpdGggdGhlIHZhbHVlICcnIHRoYXQgdGhlIGFwcGxpY2F0aW9uIGRldmVsb3BlciBjYW5cbiAgLy8gcHJvdmlkZSBpbnNpZGUgdGhlIHNlbGVjdC4gSXQgaXMgYWx3YXlzIHNlbGVjdGFibGUgYW5kIGluZGljYXRlcyB0aGF0IGEgXCJudWxsXCIgc2VsZWN0aW9uIGhhc1xuICAvLyBiZWVuIG1hZGUgYnkgdGhlIHVzZXIuXG4gIC8vIElmIHRoZSBzZWxlY3QgaGFzIGFuIGVtcHR5IG9wdGlvbiwgYW5kIHRoZSBtb2RlbCBvZiB0aGUgc2VsZWN0IGlzIHNldCB0byBcInVuZGVmaW5lZFwiIG9yIFwibnVsbFwiLFxuICAvLyB0aGUgZW1wdHkgb3B0aW9uIGlzIHNlbGVjdGVkLlxuICAvLyBJZiB0aGUgbW9kZWwgaXMgc2V0IHRvIGEgZGlmZmVyZW50IHVubWF0Y2hlZCB2YWx1ZSwgdGhlIHVua25vd24gb3B0aW9uIGlzIHJlbmRlcmVkIGFuZFxuICAvLyBzZWxlY3RlZCwgaS5lIGJvdGggYXJlIHByZXNlbnQsIGJlY2F1c2UgYSBcIm51bGxcIiBzZWxlY3Rpb24gYW5kIGFuIHVua25vd24gdmFsdWUgYXJlIGRpZmZlcmVudC5cbiAgc2VsZi5oYXNFbXB0eU9wdGlvbiA9IGZhbHNlO1xuICBzZWxmLmVtcHR5T3B0aW9uID0gdW5kZWZpbmVkO1xuXG4gIHNlbGYucmVuZGVyVW5rbm93bk9wdGlvbiA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhciB1bmtub3duVmFsID0gc2VsZi5nZW5lcmF0ZVVua25vd25PcHRpb25WYWx1ZSh2YWwpO1xuICAgIHNlbGYudW5rbm93bk9wdGlvbi52YWwodW5rbm93blZhbCk7XG4gICAgJGVsZW1lbnQucHJlcGVuZChzZWxmLnVua25vd25PcHRpb24pO1xuICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKHNlbGYudW5rbm93bk9wdGlvbiwgdHJ1ZSk7XG4gICAgJGVsZW1lbnQudmFsKHVua25vd25WYWwpO1xuICB9O1xuXG4gIHNlbGYudXBkYXRlVW5rbm93bk9wdGlvbiA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhciB1bmtub3duVmFsID0gc2VsZi5nZW5lcmF0ZVVua25vd25PcHRpb25WYWx1ZSh2YWwpO1xuICAgIHNlbGYudW5rbm93bk9wdGlvbi52YWwodW5rbm93blZhbCk7XG4gICAgc2V0T3B0aW9uU2VsZWN0ZWRTdGF0dXMoc2VsZi51bmtub3duT3B0aW9uLCB0cnVlKTtcbiAgICAkZWxlbWVudC52YWwodW5rbm93blZhbCk7XG4gIH07XG5cbiAgc2VsZi5nZW5lcmF0ZVVua25vd25PcHRpb25WYWx1ZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHJldHVybiAnPyAnICsgaGFzaEtleSh2YWwpICsgJyA/JztcbiAgfTtcblxuICBzZWxmLnJlbW92ZVVua25vd25PcHRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2VsZi51bmtub3duT3B0aW9uLnBhcmVudCgpKSBzZWxmLnVua25vd25PcHRpb24ucmVtb3ZlKCk7XG4gIH07XG5cbiAgc2VsZi5zZWxlY3RFbXB0eU9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzZWxmLmVtcHR5T3B0aW9uKSB7XG4gICAgICAkZWxlbWVudC52YWwoJycpO1xuICAgICAgc2V0T3B0aW9uU2VsZWN0ZWRTdGF0dXMoc2VsZi5lbXB0eU9wdGlvbiwgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHNlbGYudW5zZWxlY3RFbXB0eU9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzZWxmLmhhc0VtcHR5T3B0aW9uKSB7XG4gICAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhzZWxmLmVtcHR5T3B0aW9uLCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgLy8gZGlzYWJsZSB1bmtub3duIG9wdGlvbiBzbyB0aGF0IHdlIGRvbid0IGRvIHdvcmsgd2hlbiB0aGUgd2hvbGUgc2VsZWN0IGlzIGJlaW5nIGRlc3Ryb3llZFxuICAgIHNlbGYucmVuZGVyVW5rbm93bk9wdGlvbiA9IG5vb3A7XG4gIH0pO1xuXG4gIC8vIFJlYWQgdGhlIHZhbHVlIG9mIHRoZSBzZWxlY3QgY29udHJvbCwgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgY2hhbmdlcyBkZXBlbmRpbmdcbiAgLy8gdXBvbiB3aGV0aGVyIHRoZSBzZWxlY3QgY2FuIGhhdmUgbXVsdGlwbGUgdmFsdWVzIGFuZCB3aGV0aGVyIG5nT3B0aW9ucyBpcyBhdCB3b3JrLlxuICBzZWxmLnJlYWRWYWx1ZSA9IGZ1bmN0aW9uIHJlYWRTaW5nbGVWYWx1ZSgpIHtcbiAgICB2YXIgdmFsID0gJGVsZW1lbnQudmFsKCk7XG4gICAgLy8gbmdWYWx1ZSBhZGRlZCBvcHRpb24gdmFsdWVzIGFyZSBzdG9yZWQgaW4gdGhlIHNlbGVjdFZhbHVlTWFwLCBub3JtYWwgaW50ZXJwb2xhdGlvbnMgYXJlIG5vdFxuICAgIHZhciByZWFsVmFsID0gdmFsIGluIHNlbGYuc2VsZWN0VmFsdWVNYXAgPyBzZWxmLnNlbGVjdFZhbHVlTWFwW3ZhbF0gOiB2YWw7XG5cbiAgICBpZiAoc2VsZi5oYXNPcHRpb24ocmVhbFZhbCkpIHtcbiAgICAgIHJldHVybiByZWFsVmFsO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG5cbiAgLy8gV3JpdGUgdGhlIHZhbHVlIHRvIHRoZSBzZWxlY3QgY29udHJvbCwgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgY2hhbmdlcyBkZXBlbmRpbmdcbiAgLy8gdXBvbiB3aGV0aGVyIHRoZSBzZWxlY3QgY2FuIGhhdmUgbXVsdGlwbGUgdmFsdWVzIGFuZCB3aGV0aGVyIG5nT3B0aW9ucyBpcyBhdCB3b3JrLlxuICBzZWxmLndyaXRlVmFsdWUgPSBmdW5jdGlvbiB3cml0ZVNpbmdsZVZhbHVlKHZhbHVlKSB7XG4gICAgLy8gTWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgc2VsZWN0ZWQgYXR0cmlidXRlIGZyb20gdGhlIHByZXZpb3VzbHkgc2VsZWN0ZWQgb3B0aW9uXG4gICAgLy8gT3RoZXJ3aXNlLCBzY3JlZW4gcmVhZGVycyBtaWdodCBnZXQgY29uZnVzZWRcbiAgICB2YXIgY3VycmVudGx5U2VsZWN0ZWRPcHRpb24gPSAkZWxlbWVudFswXS5vcHRpb25zWyRlbGVtZW50WzBdLnNlbGVjdGVkSW5kZXhdO1xuICAgIGlmIChjdXJyZW50bHlTZWxlY3RlZE9wdGlvbikgc2V0T3B0aW9uU2VsZWN0ZWRTdGF0dXMoanFMaXRlKGN1cnJlbnRseVNlbGVjdGVkT3B0aW9uKSwgZmFsc2UpO1xuXG4gICAgaWYgKHNlbGYuaGFzT3B0aW9uKHZhbHVlKSkge1xuICAgICAgc2VsZi5yZW1vdmVVbmtub3duT3B0aW9uKCk7XG5cbiAgICAgIHZhciBoYXNoZWRWYWwgPSBoYXNoS2V5KHZhbHVlKTtcbiAgICAgICRlbGVtZW50LnZhbChoYXNoZWRWYWwgaW4gc2VsZi5zZWxlY3RWYWx1ZU1hcCA/IGhhc2hlZFZhbCA6IHZhbHVlKTtcblxuICAgICAgLy8gU2V0IHNlbGVjdGVkIGF0dHJpYnV0ZSBhbmQgcHJvcGVydHkgb24gc2VsZWN0ZWQgb3B0aW9uIGZvciBzY3JlZW4gcmVhZGVyc1xuICAgICAgdmFyIHNlbGVjdGVkT3B0aW9uID0gJGVsZW1lbnRbMF0ub3B0aW9uc1skZWxlbWVudFswXS5zZWxlY3RlZEluZGV4XTtcbiAgICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKGpxTGl0ZShzZWxlY3RlZE9wdGlvbiksIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLnNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uKHZhbHVlKTtcbiAgICB9XG4gIH07XG5cblxuICAvLyBUZWxsIHRoZSBzZWxlY3QgY29udHJvbCB0aGF0IGFuIG9wdGlvbiwgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUsIGhhcyBiZWVuIGFkZGVkXG4gIHNlbGYuYWRkT3B0aW9uID0gZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcbiAgICAvLyBTa2lwIGNvbW1lbnQgbm9kZXMsIGFzIHRoZXkgb25seSBwb2xsdXRlIHRoZSBgb3B0aW9uc01hcGBcbiAgICBpZiAoZWxlbWVudFswXS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0NPTU1FTlQpIHJldHVybjtcblxuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KHZhbHVlLCAnXCJvcHRpb24gdmFsdWVcIicpO1xuICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgIHNlbGYuaGFzRW1wdHlPcHRpb24gPSB0cnVlO1xuICAgICAgc2VsZi5lbXB0eU9wdGlvbiA9IGVsZW1lbnQ7XG4gICAgfVxuICAgIHZhciBjb3VudCA9IG9wdGlvbnNNYXAuZ2V0KHZhbHVlKSB8fCAwO1xuICAgIG9wdGlvbnNNYXAuc2V0KHZhbHVlLCBjb3VudCArIDEpO1xuICAgIC8vIE9ubHkgcmVuZGVyIGF0IHRoZSBlbmQgb2YgYSBkaWdlc3QuIFRoaXMgaW1wcm92ZXMgcmVuZGVyIHBlcmZvcm1hbmNlIHdoZW4gbWFueSBvcHRpb25zXG4gICAgLy8gYXJlIGFkZGVkIGR1cmluZyBhIGRpZ2VzdCBhbmQgZW5zdXJlcyBhbGwgcmVsZXZhbnQgb3B0aW9ucyBhcmUgY29ycmVjdGx5IG1hcmtlZCBhcyBzZWxlY3RlZFxuICAgIHNjaGVkdWxlUmVuZGVyKCk7XG4gIH07XG5cbiAgLy8gVGVsbCB0aGUgc2VsZWN0IGNvbnRyb2wgdGhhdCBhbiBvcHRpb24sIHdpdGggdGhlIGdpdmVuIHZhbHVlLCBoYXMgYmVlbiByZW1vdmVkXG4gIHNlbGYucmVtb3ZlT3B0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgY291bnQgPSBvcHRpb25zTWFwLmdldCh2YWx1ZSk7XG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgb3B0aW9uc01hcC5kZWxldGUodmFsdWUpO1xuICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgc2VsZi5oYXNFbXB0eU9wdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuZW1wdHlPcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnNNYXAuc2V0KHZhbHVlLCBjb3VudCAtIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBDaGVjayB3aGV0aGVyIHRoZSBzZWxlY3QgY29udHJvbCBoYXMgYW4gb3B0aW9uIG1hdGNoaW5nIHRoZSBnaXZlbiB2YWx1ZVxuICBzZWxmLmhhc09wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhb3B0aW9uc01hcC5nZXQodmFsdWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyIyRoYXNFbXB0eU9wdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNlbGVjdCBlbGVtZW50IGN1cnJlbnRseSBoYXMgYW4gZW1wdHkgb3B0aW9uXG4gICAqIGVsZW1lbnQsIGkuZS4gYW4gb3B0aW9uIHRoYXQgc2lnbmlmaWVzIHRoYXQgdGhlIHNlbGVjdCBpcyBlbXB0eSAvIHRoZSBzZWxlY3Rpb24gaXMgbnVsbC5cbiAgICpcbiAgICovXG4gIHNlbGYuJGhhc0VtcHR5T3B0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuaGFzRW1wdHlPcHRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgc2VsZWN0LlNlbGVjdENvbnRyb2xsZXIjJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2VsZWN0IGVsZW1lbnQncyB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZC4gVGhlIHVua25vd24gb3B0aW9uIGlzIGFkZGVkXG4gICAqIGFuZCBhdXRvbWF0aWNhbGx5IHNlbGVjdGVkIHdoZW5ldmVyIHRoZSBzZWxlY3QgbW9kZWwgZG9lc24ndCBtYXRjaCBhbnkgb3B0aW9uLlxuICAgKlxuICAgKi9cbiAgc2VsZi4kaXNVbmtub3duT3B0aW9uU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBQcmVzZW5jZSBvZiB0aGUgdW5rbm93biBvcHRpb24gbWVhbnMgaXQgaXMgc2VsZWN0ZWRcbiAgICByZXR1cm4gJGVsZW1lbnRbMF0ub3B0aW9uc1swXSA9PT0gc2VsZi51bmtub3duT3B0aW9uWzBdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyIyRpc0VtcHR5T3B0aW9uU2VsZWN0ZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzZWxlY3QgZWxlbWVudCBoYXMgYW4gZW1wdHkgb3B0aW9uIGFuZCB0aGlzIGVtcHR5IG9wdGlvbiBpcyBjdXJyZW50bHlcbiAgICogc2VsZWN0ZWQuIFJldHVybnMgYGZhbHNlYCBpZiB0aGUgc2VsZWN0IGVsZW1lbnQgaGFzIG5vIGVtcHR5IG9wdGlvbiBvciBpdCBpcyBub3Qgc2VsZWN0ZWQuXG4gICAqXG4gICAqL1xuICBzZWxmLiRpc0VtcHR5T3B0aW9uU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5oYXNFbXB0eU9wdGlvbiAmJiAkZWxlbWVudFswXS5vcHRpb25zWyRlbGVtZW50WzBdLnNlbGVjdGVkSW5kZXhdID09PSBzZWxmLmVtcHR5T3B0aW9uWzBdO1xuICB9O1xuXG4gIHNlbGYuc2VsZWN0VW5rbm93bk9yRW1wdHlPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsICYmIHNlbGYuZW1wdHlPcHRpb24pIHtcbiAgICAgIHNlbGYucmVtb3ZlVW5rbm93bk9wdGlvbigpO1xuICAgICAgc2VsZi5zZWxlY3RFbXB0eU9wdGlvbigpO1xuICAgIH0gZWxzZSBpZiAoc2VsZi51bmtub3duT3B0aW9uLnBhcmVudCgpLmxlbmd0aCkge1xuICAgICAgc2VsZi51cGRhdGVVbmtub3duT3B0aW9uKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5yZW5kZXJVbmtub3duT3B0aW9uKHZhbHVlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJlbmRlclNjaGVkdWxlZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBzY2hlZHVsZVJlbmRlcigpIHtcbiAgICBpZiAocmVuZGVyU2NoZWR1bGVkKSByZXR1cm47XG4gICAgcmVuZGVyU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAkc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xuICAgICAgcmVuZGVyU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICBzZWxmLm5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciB1cGRhdGVTY2hlZHVsZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUocmVuZGVyQWZ0ZXIpIHtcbiAgICBpZiAodXBkYXRlU2NoZWR1bGVkKSByZXR1cm47XG5cbiAgICB1cGRhdGVTY2hlZHVsZWQgPSB0cnVlO1xuXG4gICAgJHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcbiAgICAgIGlmICgkc2NvcGUuJCRkZXN0cm95ZWQpIHJldHVybjtcblxuICAgICAgdXBkYXRlU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICBzZWxmLm5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoc2VsZi5yZWFkVmFsdWUoKSk7XG4gICAgICBpZiAocmVuZGVyQWZ0ZXIpIHNlbGYubmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cblxuICBzZWxmLnJlZ2lzdGVyT3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uU2NvcGUsIG9wdGlvbkVsZW1lbnQsIG9wdGlvbkF0dHJzLCBpbnRlcnBvbGF0ZVZhbHVlRm4sIGludGVycG9sYXRlVGV4dEZuKSB7XG5cbiAgICBpZiAob3B0aW9uQXR0cnMuJGF0dHIubmdWYWx1ZSkge1xuICAgICAgLy8gVGhlIHZhbHVlIGF0dHJpYnV0ZSBpcyBzZXQgYnkgbmdWYWx1ZVxuICAgICAgdmFyIG9sZFZhbCwgaGFzaGVkVmFsID0gTmFOO1xuICAgICAgb3B0aW9uQXR0cnMuJG9ic2VydmUoJ3ZhbHVlJywgZnVuY3Rpb24gdmFsdWVBdHRyaWJ1dGVPYnNlcnZlQWN0aW9uKG5ld1ZhbCkge1xuXG4gICAgICAgIHZhciByZW1vdmFsO1xuICAgICAgICB2YXIgcHJldmlvdXNseVNlbGVjdGVkID0gb3B0aW9uRWxlbWVudC5wcm9wKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgIGlmIChpc0RlZmluZWQoaGFzaGVkVmFsKSkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlT3B0aW9uKG9sZFZhbCk7XG4gICAgICAgICAgZGVsZXRlIHNlbGYuc2VsZWN0VmFsdWVNYXBbaGFzaGVkVmFsXTtcbiAgICAgICAgICByZW1vdmFsID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGhhc2hlZFZhbCA9IGhhc2hLZXkobmV3VmFsKTtcbiAgICAgICAgb2xkVmFsID0gbmV3VmFsO1xuICAgICAgICBzZWxmLnNlbGVjdFZhbHVlTWFwW2hhc2hlZFZhbF0gPSBuZXdWYWw7XG4gICAgICAgIHNlbGYuYWRkT3B0aW9uKG5ld1ZhbCwgb3B0aW9uRWxlbWVudCk7XG4gICAgICAgIC8vIFNldCB0aGUgYXR0cmlidXRlIGRpcmVjdGx5IGluc3RlYWQgb2YgdXNpbmcgb3B0aW9uQXR0cnMuJHNldCAtIHRoaXMgc3RvcHMgdGhlIG9ic2VydmVyXG4gICAgICAgIC8vIGZyb20gZmlyaW5nIGEgc2Vjb25kIHRpbWUuIE90aGVyICRvYnNlcnZlcnMgb24gdmFsdWUgd2lsbCBhbHNvIGdldCB0aGUgcmVzdWx0IG9mIHRoZVxuICAgICAgICAvLyBuZ1ZhbHVlIGV4cHJlc3Npb24sIG5vdCB0aGUgaGFzaGVkIHZhbHVlXG4gICAgICAgIG9wdGlvbkVsZW1lbnQuYXR0cigndmFsdWUnLCBoYXNoZWRWYWwpO1xuXG4gICAgICAgIGlmIChyZW1vdmFsICYmIHByZXZpb3VzbHlTZWxlY3RlZCkge1xuICAgICAgICAgIHNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZVZhbHVlRm4pIHtcbiAgICAgIC8vIFRoZSB2YWx1ZSBhdHRyaWJ1dGUgaXMgaW50ZXJwb2xhdGVkXG4gICAgICBvcHRpb25BdHRycy4kb2JzZXJ2ZSgndmFsdWUnLCBmdW5jdGlvbiB2YWx1ZUF0dHJpYnV0ZU9ic2VydmVBY3Rpb24obmV3VmFsKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIGlzIG92ZXJ3cml0dGVuIGluIG5nT3B0aW9ucyBhbmQgaGFzIHNpZGUtZWZmZWN0cyFcbiAgICAgICAgc2VsZi5yZWFkVmFsdWUoKTtcblxuICAgICAgICB2YXIgcmVtb3ZhbDtcbiAgICAgICAgdmFyIHByZXZpb3VzbHlTZWxlY3RlZCA9IG9wdGlvbkVsZW1lbnQucHJvcCgnc2VsZWN0ZWQnKTtcblxuICAgICAgICBpZiAoaXNEZWZpbmVkKG9sZFZhbCkpIHtcbiAgICAgICAgICBzZWxmLnJlbW92ZU9wdGlvbihvbGRWYWwpO1xuICAgICAgICAgIHJlbW92YWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9sZFZhbCA9IG5ld1ZhbDtcbiAgICAgICAgc2VsZi5hZGRPcHRpb24obmV3VmFsLCBvcHRpb25FbGVtZW50KTtcblxuICAgICAgICBpZiAocmVtb3ZhbCAmJiBwcmV2aW91c2x5U2VsZWN0ZWQpIHtcbiAgICAgICAgICBzY2hlZHVsZVZpZXdWYWx1ZVVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGludGVycG9sYXRlVGV4dEZuKSB7XG4gICAgICAvLyBUaGUgdGV4dCBjb250ZW50IGlzIGludGVycG9sYXRlZFxuICAgICAgb3B0aW9uU2NvcGUuJHdhdGNoKGludGVycG9sYXRlVGV4dEZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZVdhdGNoQWN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgIG9wdGlvbkF0dHJzLiRzZXQoJ3ZhbHVlJywgbmV3VmFsKTtcbiAgICAgICAgdmFyIHByZXZpb3VzbHlTZWxlY3RlZCA9IG9wdGlvbkVsZW1lbnQucHJvcCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgaWYgKG9sZFZhbCAhPT0gbmV3VmFsKSB7XG4gICAgICAgICAgc2VsZi5yZW1vdmVPcHRpb24ob2xkVmFsKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFkZE9wdGlvbihuZXdWYWwsIG9wdGlvbkVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChvbGRWYWwgJiYgcHJldmlvdXNseVNlbGVjdGVkKSB7XG4gICAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZSB2YWx1ZSBhdHRyaWJ1dGUgaXMgc3RhdGljXG4gICAgICBzZWxmLmFkZE9wdGlvbihvcHRpb25BdHRycy52YWx1ZSwgb3B0aW9uRWxlbWVudCk7XG4gICAgfVxuXG5cbiAgICBvcHRpb25BdHRycy4kb2JzZXJ2ZSgnZGlzYWJsZWQnLCBmdW5jdGlvbihuZXdWYWwpIHtcblxuICAgICAgLy8gU2luY2UgbW9kZWwgdXBkYXRlcyB3aWxsIGFsc28gc2VsZWN0IGRpc2FibGVkIG9wdGlvbnMgKGxpa2UgbmdPcHRpb25zKSxcbiAgICAgIC8vIHdlIG9ubHkgaGF2ZSB0byBoYW5kbGUgb3B0aW9ucyBiZWNvbWluZyBkaXNhYmxlZCwgbm90IGVuYWJsZWRcblxuICAgICAgaWYgKG5ld1ZhbCA9PT0gJ3RydWUnIHx8IG5ld1ZhbCAmJiBvcHRpb25FbGVtZW50LnByb3AoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgaWYgKHNlbGYubXVsdGlwbGUpIHtcbiAgICAgICAgICBzY2hlZHVsZVZpZXdWYWx1ZVVwZGF0ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLm5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUobnVsbCk7XG4gICAgICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG9wdGlvbkVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY3VycmVudFZhbHVlID0gc2VsZi5yZWFkVmFsdWUoKTtcbiAgICAgIHZhciByZW1vdmVWYWx1ZSA9IG9wdGlvbkF0dHJzLnZhbHVlO1xuXG4gICAgICBzZWxmLnJlbW92ZU9wdGlvbihyZW1vdmVWYWx1ZSk7XG4gICAgICBzY2hlZHVsZVJlbmRlcigpO1xuXG4gICAgICBpZiAoc2VsZi5tdWx0aXBsZSAmJiBjdXJyZW50VmFsdWUgJiYgY3VycmVudFZhbHVlLmluZGV4T2YocmVtb3ZlVmFsdWUpICE9PSAtMSB8fFxuICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9PT0gcmVtb3ZlVmFsdWVcbiAgICAgICkge1xuICAgICAgICAvLyBXaGVuIG11bHRpcGxlIChzZWxlY3RlZCkgb3B0aW9ucyBhcmUgZGVzdHJveWVkIGF0IHRoZSBzYW1lIHRpbWUsIHdlIGRvbid0IHdhbnRcbiAgICAgICAgLy8gdG8gcnVuIGEgbW9kZWwgdXBkYXRlIGZvciBlYWNoIG9mIHRoZW0uIEluc3RlYWQsIHJ1biBhIHNpbmdsZSB1cGRhdGUgaW4gdGhlICQkcG9zdERpZ2VzdFxuICAgICAgICBzY2hlZHVsZVZpZXdWYWx1ZVVwZGF0ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHNlbGVjdFxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhUTUwgYHNlbGVjdGAgZWxlbWVudCB3aXRoIEFuZ3VsYXJKUyBkYXRhLWJpbmRpbmcuXG4gKlxuICogVGhlIGBzZWxlY3RgIGRpcmVjdGl2ZSBpcyB1c2VkIHRvZ2V0aGVyIHdpdGgge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSB0byBwcm92aWRlIGRhdGEtYmluZGluZ1xuICogYmV0d2VlbiB0aGUgc2NvcGUgYW5kIHRoZSBgPHNlbGVjdD5gIGNvbnRyb2wgKGluY2x1ZGluZyBzZXR0aW5nIGRlZmF1bHQgdmFsdWVzKS5cbiAqIEl0IGFsc28gaGFuZGxlcyBkeW5hbWljIGA8b3B0aW9uPmAgZWxlbWVudHMsIHdoaWNoIGNhbiBiZSBhZGRlZCB1c2luZyB0aGUge0BsaW5rIG5nUmVwZWF0IGBuZ1JlcGVhdH1gIG9yXG4gKiB7QGxpbmsgbmdPcHRpb25zIGBuZ09wdGlvbnNgfSBkaXJlY3RpdmVzLlxuICpcbiAqIFdoZW4gYW4gaXRlbSBpbiB0aGUgYDxzZWxlY3Q+YCBtZW51IGlzIHNlbGVjdGVkLCB0aGUgdmFsdWUgb2YgdGhlIHNlbGVjdGVkIG9wdGlvbiB3aWxsIGJlIGJvdW5kXG4gKiB0byB0aGUgbW9kZWwgaWRlbnRpZmllZCBieSB0aGUgYG5nTW9kZWxgIGRpcmVjdGl2ZS4gV2l0aCBzdGF0aWMgb3IgcmVwZWF0ZWQgb3B0aW9ucywgdGhpcyBpc1xuICogdGhlIGNvbnRlbnQgb2YgdGhlIGB2YWx1ZWAgYXR0cmlidXRlIG9yIHRoZSB0ZXh0Q29udGVudCBvZiB0aGUgYDxvcHRpb24+YCwgaWYgdGhlIHZhbHVlIGF0dHJpYnV0ZSBpcyBtaXNzaW5nLlxuICogVmFsdWUgYW5kIHRleHRDb250ZW50IGNhbiBiZSBpbnRlcnBvbGF0ZWQuXG4gKlxuICogVGhlIHtAbGluayBzZWxlY3QuU2VsZWN0Q29udHJvbGxlciBzZWxlY3QgY29udHJvbGxlcn0gZXhwb3NlcyB1dGlsaXR5IGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkXG4gKiB0byBtYW5pcHVsYXRlIHRoZSBzZWxlY3QncyBiZWhhdmlvci5cbiAqXG4gKiAjIyBNYXRjaGluZyBtb2RlbCBhbmQgb3B0aW9uIHZhbHVlc1xuICpcbiAqIEluIGdlbmVyYWwsIHRoZSBtYXRjaCBiZXR3ZWVuIHRoZSBtb2RlbCBhbmQgYW4gb3B0aW9uIGlzIGV2YWx1YXRlZCBieSBzdHJpY3RseSBjb21wYXJpbmcgdGhlIG1vZGVsXG4gKiB2YWx1ZSBhZ2FpbnN0IHRoZSB2YWx1ZSBvZiB0aGUgYXZhaWxhYmxlIG9wdGlvbnMuXG4gKlxuICogSWYgeW91IGFyZSBzZXR0aW5nIHRoZSBvcHRpb24gdmFsdWUgd2l0aCB0aGUgb3B0aW9uJ3MgYHZhbHVlYCBhdHRyaWJ1dGUsIG9yIHRleHRDb250ZW50LCB0aGVcbiAqIHZhbHVlIHdpbGwgYWx3YXlzIGJlIGEgYHN0cmluZ2Agd2hpY2ggbWVhbnMgdGhhdCB0aGUgbW9kZWwgdmFsdWUgbXVzdCBhbHNvIGJlIGEgc3RyaW5nLlxuICogT3RoZXJ3aXNlIHRoZSBgc2VsZWN0YCBkaXJlY3RpdmUgY2Fubm90IG1hdGNoIHRoZW0gY29ycmVjdGx5LlxuICpcbiAqIFRvIGJpbmQgdGhlIG1vZGVsIHRvIGEgbm9uLXN0cmluZyB2YWx1ZSwgeW91IGNhbiB1c2Ugb25lIG9mIHRoZSBmb2xsb3dpbmcgc3RyYXRlZ2llczpcbiAqIC0gdGhlIHtAbGluayBuZy5uZ09wdGlvbnMgYG5nT3B0aW9uc2B9IGRpcmVjdGl2ZVxuICogICAoe0BsaW5rIG5nLnNlbGVjdCN1c2luZy1zZWxlY3Qtd2l0aC1uZ29wdGlvbnMtYW5kLXNldHRpbmctYS1kZWZhdWx0LXZhbHVlfSlcbiAqIC0gdGhlIHtAbGluayBuZy5uZ1ZhbHVlIGBuZ1ZhbHVlYH0gZGlyZWN0aXZlLCB3aGljaCBhbGxvd3MgYXJiaXRyYXJ5IGV4cHJlc3Npb25zIHRvIGJlXG4gKiAgIG9wdGlvbiB2YWx1ZXMgKHtAbGluayBuZy5zZWxlY3QjdXNpbmctbmd2YWx1ZS10by1iaW5kLXRoZS1tb2RlbC10by1hbi1hcnJheS1vZi1vYmplY3RzIEV4YW1wbGV9KVxuICogLSBtb2RlbCAkcGFyc2VycyAvICRmb3JtYXR0ZXJzIHRvIGNvbnZlcnQgdGhlIHN0cmluZyB2YWx1ZVxuICogICAoe0BsaW5rIG5nLnNlbGVjdCNiaW5kaW5nLXNlbGVjdC10by1hLW5vbi1zdHJpbmctdmFsdWUtdmlhLW5nbW9kZWwtcGFyc2luZy1mb3JtYXR0aW5nIEV4YW1wbGV9KVxuICpcbiAqIElmIHRoZSB2aWV3VmFsdWUgb2YgYG5nTW9kZWxgIGRvZXMgbm90IG1hdGNoIGFueSBvZiB0aGUgb3B0aW9ucywgdGhlbiB0aGUgY29udHJvbFxuICogd2lsbCBhdXRvbWF0aWNhbGx5IGFkZCBhbiBcInVua25vd25cIiBvcHRpb24sIHdoaWNoIGl0IHRoZW4gcmVtb3ZlcyB3aGVuIHRoZSBtaXNtYXRjaCBpcyByZXNvbHZlZC5cbiAqXG4gKiBPcHRpb25hbGx5LCBhIHNpbmdsZSBoYXJkLWNvZGVkIGA8b3B0aW9uPmAgZWxlbWVudCwgd2l0aCB0aGUgdmFsdWUgc2V0IHRvIGFuIGVtcHR5IHN0cmluZywgY2FuXG4gKiBiZSBuZXN0ZWQgaW50byB0aGUgYDxzZWxlY3Q+YCBlbGVtZW50LiBUaGlzIGVsZW1lbnQgd2lsbCB0aGVuIHJlcHJlc2VudCB0aGUgYG51bGxgIG9yIFwibm90IHNlbGVjdGVkXCJcbiAqIG9wdGlvbi4gU2VlIGV4YW1wbGUgYmVsb3cgZm9yIGRlbW9uc3RyYXRpb24uXG4gKlxuICogIyMgQ2hvb3NpbmcgYmV0d2VlbiBgbmdSZXBlYXRgIGFuZCBgbmdPcHRpb25zYFxuICpcbiAqIEluIG1hbnkgY2FzZXMsIGBuZ1JlcGVhdGAgY2FuIGJlIHVzZWQgb24gYDxvcHRpb24+YCBlbGVtZW50cyBpbnN0ZWFkIG9mIHtAbGluayBuZy5kaXJlY3RpdmU6bmdPcHRpb25zXG4gKiBuZ09wdGlvbnN9IHRvIGFjaGlldmUgYSBzaW1pbGFyIHJlc3VsdC4gSG93ZXZlciwgYG5nT3B0aW9uc2AgcHJvdmlkZXMgc29tZSBiZW5lZml0czpcbiAqIC0gbW9yZSBmbGV4aWJpbGl0eSBpbiBob3cgdGhlIGA8c2VsZWN0PmAncyBtb2RlbCBpcyBhc3NpZ25lZCB2aWEgdGhlIGBzZWxlY3RgICoqYGFzYCoqIHBhcnQgb2YgdGhlXG4gKiBjb21wcmVoZW5zaW9uIGV4cHJlc3Npb25cbiAqIC0gcmVkdWNlZCBtZW1vcnkgY29uc3VtcHRpb24gYnkgbm90IGNyZWF0aW5nIGEgbmV3IHNjb3BlIGZvciBlYWNoIHJlcGVhdGVkIGluc3RhbmNlXG4gKiAtIGluY3JlYXNlZCByZW5kZXIgc3BlZWQgYnkgY3JlYXRpbmcgdGhlIG9wdGlvbnMgaW4gYSBkb2N1bWVudEZyYWdtZW50IGluc3RlYWQgb2YgaW5kaXZpZHVhbGx5XG4gKlxuICogU3BlY2lmaWNhbGx5LCBzZWxlY3Qgd2l0aCByZXBlYXRlZCBvcHRpb25zIHNsb3dzIGRvd24gc2lnbmlmaWNhbnRseSBzdGFydGluZyBhdCAyMDAwIG9wdGlvbnMgaW5cbiAqIENocm9tZSBhbmQgSW50ZXJuZXQgRXhwbG9yZXIgLyBFZGdlLlxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbXVsdGlwbGUgQWxsb3dzIG11bHRpcGxlIG9wdGlvbnMgdG8gYmUgc2VsZWN0ZWQuIFRoZSBzZWxlY3RlZCB2YWx1ZXMgd2lsbCBiZVxuICogICAgIGJvdW5kIHRvIHRoZSBtb2RlbCBhcyBhbiBhcnJheS5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIHJlcXVpcmVkIGF0dHJpYnV0ZSBhbmQgcmVxdWlyZWQgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gKiB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBuZ1JlcXVpcmVkIGluc3RlYWQgb2YgcmVxdWlyZWRcbiAqIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSByZXF1aXJlZCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gc2VsZWN0ZWQgb3B0aW9uKHMpIGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIHNlbGVjdCBlbGVtZW50LlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ09wdGlvbnMgc2V0cyB0aGUgb3B0aW9ucyB0aGF0IHRoZSBzZWxlY3QgaXMgcG9wdWxhdGVkIHdpdGggYW5kIGRlZmluZXMgd2hhdCBpc1xuICogc2V0IG9uIHRoZSBtb2RlbCBvbiBzZWxlY3Rpb24uIFNlZSB7QGxpbmsgbmdPcHRpb25zIGBuZ09wdGlvbnNgfS5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdBdHRyU2l6ZSBzZXRzIHRoZSBzaXplIG9mIHRoZSBzZWxlY3QgZWxlbWVudCBkeW5hbWljYWxseS4gVXNlcyB0aGVcbiAqIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIy1uZ2F0dHItZm9yLWJpbmRpbmctdG8tYXJiaXRyYXJ5LWF0dHJpYnV0ZXMgbmdBdHRyfSBkaXJlY3RpdmUuXG4gKlxuICpcbiAqIEBrbm93bklzc3VlXG4gKlxuICogSW4gRmlyZWZveCwgdGhlIHNlbGVjdCBtb2RlbCBpcyBvbmx5IHVwZGF0ZWQgd2hlbiB0aGUgc2VsZWN0IGVsZW1lbnQgaXMgYmx1cnJlZC4gRm9yIGV4YW1wbGUsXG4gKiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIG9wdGlvbnMgd2l0aCB0aGUga2V5Ym9hcmQsIHRoZSBzZWxlY3QgbW9kZWwgaXMgb25seSBzZXQgdG8gdGhlXG4gKiBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uIHdoZW4gdGhlIHNlbGVjdCBpcyBibHVycmVkLCBlLmcgdmlhIHRhYiBrZXkgb3IgY2xpY2tpbmcgdGhlIG1vdXNlXG4gKiBvdXRzaWRlIHRoZSBzZWxlY3QuXG4gKlxuICogVGhpcyBpcyBkdWUgdG8gYW4gYW1iaWd1aXR5IGluIHRoZSBzZWxlY3QgZWxlbWVudCBzcGVjaWZpY2F0aW9uLiBTZWUgdGhlXG4gKiBbaXNzdWUgb24gdGhlIEZpcmVmb3ggYnVnIHRyYWNrZXJdKGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEyNjM3OSlcbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uLCBhbmQgdGhpc1xuICogW0dpdGh1YiBjb21tZW50IGZvciBhIHdvcmthcm91bmRdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzkxMzQjaXNzdWVjb21tZW50LTEzMDgwMDQ4OClcbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFNpbXBsZSBgc2VsZWN0YCBlbGVtZW50cyB3aXRoIHN0YXRpYyBvcHRpb25zXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInN0YXRpYy1zZWxlY3RcIiBtb2R1bGU9XCJzdGF0aWNTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cInNpbmdsZVNlbGVjdFwiPiBTaW5nbGUgc2VsZWN0OiA8L2xhYmVsPjxicj5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJzaW5nbGVTZWxlY3RcIiBuZy1tb2RlbD1cImRhdGEuc2luZ2xlU2VsZWN0XCI+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTFcIj5PcHRpb24gMTwvb3B0aW9uPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0yXCI+T3B0aW9uIDI8L29wdGlvbj5cbiAqICAgICA8L3NlbGVjdD48YnI+XG4gKlxuICogICAgIDxsYWJlbCBmb3I9XCJzaW5nbGVTZWxlY3RcIj4gU2luZ2xlIHNlbGVjdCB3aXRoIFwibm90IHNlbGVjdGVkXCIgb3B0aW9uIGFuZCBkeW5hbWljIG9wdGlvbiB2YWx1ZXM6IDwvbGFiZWw+PGJyPlxuICogICAgIDxzZWxlY3QgbmFtZT1cInNpbmdsZVNlbGVjdFwiIGlkPVwic2luZ2xlU2VsZWN0XCIgbmctbW9kZWw9XCJkYXRhLnNpbmdsZVNlbGVjdFwiPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPi0tLVBsZWFzZSBzZWxlY3QtLS08L29wdGlvbj4gPCEtLSBub3Qgc2VsZWN0ZWQgLyBibGFuayBvcHRpb24gLS0+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwie3tkYXRhLm9wdGlvbjF9fVwiPk9wdGlvbiAxPC9vcHRpb24+IDwhLS0gaW50ZXJwb2xhdGlvbiAtLT5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+PGJyPlxuICogICAgIDxidXR0b24gbmctY2xpY2s9XCJmb3JjZVVua25vd25PcHRpb24oKVwiPkZvcmNlIHVua25vd24gb3B0aW9uPC9idXR0b24+PGJyPlxuICogICAgIDx0dD5zaW5nbGVTZWxlY3QgPSB7e2RhdGEuc2luZ2xlU2VsZWN0fX08L3R0PlxuICpcbiAqICAgICA8aHI+XG4gKiAgICAgPGxhYmVsIGZvcj1cIm11bHRpcGxlU2VsZWN0XCI+IE11bHRpcGxlIHNlbGVjdDogPC9sYWJlbD48YnI+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwibXVsdGlwbGVTZWxlY3RcIiBpZD1cIm11bHRpcGxlU2VsZWN0XCIgbmctbW9kZWw9XCJkYXRhLm11bHRpcGxlU2VsZWN0XCIgbXVsdGlwbGU+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTFcIj5PcHRpb24gMTwvb3B0aW9uPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0yXCI+T3B0aW9uIDI8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tM1wiPk9wdGlvbiAzPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+PGJyPlxuICogICAgIDx0dD5tdWx0aXBsZVNlbGVjdCA9IHt7ZGF0YS5tdWx0aXBsZVNlbGVjdH19PC90dD48YnIvPlxuICogICA8L2Zvcm0+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnc3RhdGljU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuZGF0YSA9IHtcbiAqICAgICAgIHNpbmdsZVNlbGVjdDogbnVsbCxcbiAqICAgICAgIG11bHRpcGxlU2VsZWN0OiBbXSxcbiAqICAgICAgIG9wdGlvbjE6ICdvcHRpb24tMSdcbiAqICAgICAgfTtcbiAqXG4gKiAgICAgICRzY29wZS5mb3JjZVVua25vd25PcHRpb24gPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAkc2NvcGUuZGF0YS5zaW5nbGVTZWxlY3QgPSAnbm9uc2Vuc2UnO1xuICogICAgICB9O1xuICogICB9XSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFVzaW5nIGBuZ1JlcGVhdGAgdG8gZ2VuZXJhdGUgYHNlbGVjdGAgb3B0aW9uc1xuICogPGV4YW1wbGUgbmFtZT1cInNlbGVjdC1uZ3JlcGVhdFwiIG1vZHVsZT1cIm5ncmVwZWF0U2VsZWN0XCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiPlxuICogICAgIDxsYWJlbCBmb3I9XCJyZXBlYXRTZWxlY3RcIj4gUmVwZWF0IHNlbGVjdDogPC9sYWJlbD5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJyZXBlYXRTZWxlY3RcIiBpZD1cInJlcGVhdFNlbGVjdFwiIG5nLW1vZGVsPVwiZGF0YS5tb2RlbFwiPlxuICogICAgICAgPG9wdGlvbiBuZy1yZXBlYXQ9XCJvcHRpb24gaW4gZGF0YS5hdmFpbGFibGVPcHRpb25zXCIgdmFsdWU9XCJ7e29wdGlvbi5pZH19XCI+e3tvcHRpb24ubmFtZX19PC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+XG4gKiAgIDwvZm9ybT5cbiAqICAgPGhyPlxuICogICA8dHQ+bW9kZWwgPSB7e2RhdGEubW9kZWx9fTwvdHQ+PGJyLz5cbiAqIDwvZGl2PlxuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogIGFuZ3VsYXIubW9kdWxlKCduZ3JlcGVhdFNlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLmRhdGEgPSB7XG4gKiAgICAgICBtb2RlbDogbnVsbCxcbiAqICAgICAgIGF2YWlsYWJsZU9wdGlvbnM6IFtcbiAqICAgICAgICAge2lkOiAnMScsIG5hbWU6ICdPcHRpb24gQSd9LFxuICogICAgICAgICB7aWQ6ICcyJywgbmFtZTogJ09wdGlvbiBCJ30sXG4gKiAgICAgICAgIHtpZDogJzMnLCBuYW1lOiAnT3B0aW9uIEMnfVxuICogICAgICAgXVxuICogICAgICB9O1xuICogICB9XSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFVzaW5nIGBuZ1ZhbHVlYCB0byBiaW5kIHRoZSBtb2RlbCB0byBhbiBhcnJheSBvZiBvYmplY3RzXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LW5ndmFsdWVcIiBtb2R1bGU9XCJuZ3ZhbHVlU2VsZWN0XCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiPlxuICogICAgIDxsYWJlbCBmb3I9XCJuZ3ZhbHVlc2VsZWN0XCI+IG5ndmFsdWUgc2VsZWN0OiA8L2xhYmVsPlxuICogICAgIDxzZWxlY3Qgc2l6ZT1cIjZcIiBuYW1lPVwibmd2YWx1ZXNlbGVjdFwiIG5nLW1vZGVsPVwiZGF0YS5tb2RlbFwiIG11bHRpcGxlPlxuICogICAgICAgPG9wdGlvbiBuZy1yZXBlYXQ9XCJvcHRpb24gaW4gZGF0YS5hdmFpbGFibGVPcHRpb25zXCIgbmctdmFsdWU9XCJvcHRpb24udmFsdWVcIj57e29wdGlvbi5uYW1lfX08L29wdGlvbj5cbiAqICAgICA8L3NlbGVjdD5cbiAqICAgPC9mb3JtPlxuICogICA8aHI+XG4gKiAgIDxwcmU+bW9kZWwgPSB7e2RhdGEubW9kZWwgfCBqc29ufX08L3ByZT48YnIvPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ25ndmFsdWVTZWxlY3QnLCBbXSlcbiAqICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICRzY29wZS5kYXRhID0ge1xuICogICAgICAgbW9kZWw6IG51bGwsXG4gKiAgICAgICBhdmFpbGFibGVPcHRpb25zOiBbXG4gICAgICAgICAgIHt2YWx1ZTogJ215U3RyaW5nJywgbmFtZTogJ3N0cmluZyd9LFxuICAgICAgICAgICB7dmFsdWU6IDEsIG5hbWU6ICdpbnRlZ2VyJ30sXG4gICAgICAgICAgIHt2YWx1ZTogdHJ1ZSwgbmFtZTogJ2Jvb2xlYW4nfSxcbiAgICAgICAgICAge3ZhbHVlOiBudWxsLCBuYW1lOiAnbnVsbCd9LFxuICAgICAgICAgICB7dmFsdWU6IHtwcm9wOiAndmFsdWUnfSwgbmFtZTogJ29iamVjdCd9LFxuICAgICAgICAgICB7dmFsdWU6IFsnYSddLCBuYW1lOiAnYXJyYXknfVxuICogICAgICAgXVxuICogICAgICB9O1xuICogICB9XSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFVzaW5nIGBzZWxlY3RgIHdpdGggYG5nT3B0aW9uc2AgYW5kIHNldHRpbmcgYSBkZWZhdWx0IHZhbHVlXG4gKiBTZWUgdGhlIHtAbGluayBuZ09wdGlvbnMgbmdPcHRpb25zIGRvY3VtZW50YXRpb259IGZvciBtb3JlIGBuZ09wdGlvbnNgIHVzYWdlIGV4YW1wbGVzLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJzZWxlY3Qtd2l0aC1kZWZhdWx0LXZhbHVlc1wiIG1vZHVsZT1cImRlZmF1bHRWYWx1ZVNlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwibXlTZWxlY3RcIj5NYWtlIGEgY2hvaWNlOjwvbGFiZWw+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwibXlTZWxlY3RcIiBpZD1cIm15U2VsZWN0XCJcbiAqICAgICAgIG5nLW9wdGlvbnM9XCJvcHRpb24ubmFtZSBmb3Igb3B0aW9uIGluIGRhdGEuYXZhaWxhYmxlT3B0aW9ucyB0cmFjayBieSBvcHRpb24uaWRcIlxuICogICAgICAgbmctbW9kZWw9XCJkYXRhLnNlbGVjdGVkT3B0aW9uXCI+PC9zZWxlY3Q+XG4gKiAgIDwvZm9ybT5cbiAqICAgPGhyPlxuICogICA8dHQ+b3B0aW9uID0ge3tkYXRhLnNlbGVjdGVkT3B0aW9ufX08L3R0Pjxici8+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnZGVmYXVsdFZhbHVlU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuZGF0YSA9IHtcbiAqICAgICAgIGF2YWlsYWJsZU9wdGlvbnM6IFtcbiAqICAgICAgICAge2lkOiAnMScsIG5hbWU6ICdPcHRpb24gQSd9LFxuICogICAgICAgICB7aWQ6ICcyJywgbmFtZTogJ09wdGlvbiBCJ30sXG4gKiAgICAgICAgIHtpZDogJzMnLCBuYW1lOiAnT3B0aW9uIEMnfVxuICogICAgICAgXSxcbiAqICAgICAgIHNlbGVjdGVkT3B0aW9uOiB7aWQ6ICczJywgbmFtZTogJ09wdGlvbiBDJ30gLy9UaGlzIHNldHMgdGhlIGRlZmF1bHQgdmFsdWUgb2YgdGhlIHNlbGVjdCBpbiB0aGUgdWlcbiAqICAgICAgIH07XG4gKiAgIH1dKTtcbiAqIDwvZmlsZT5cbiAqPC9leGFtcGxlPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQmluZGluZyBgc2VsZWN0YCB0byBhIG5vbi1zdHJpbmcgdmFsdWUgdmlhIGBuZ01vZGVsYCBwYXJzaW5nIC8gZm9ybWF0dGluZ1xuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJzZWxlY3Qtd2l0aC1ub24tc3RyaW5nLW9wdGlvbnNcIiBtb2R1bGU9XCJub25TdHJpbmdTZWxlY3RcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibW9kZWwuaWRcIiBjb252ZXJ0LXRvLW51bWJlcj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCIwXCI+WmVybzwvb3B0aW9uPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIjFcIj5PbmU8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCIyXCI+VHdvPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+XG4gKiAgICAge3sgbW9kZWwgfX1cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgYW5ndWxhci5tb2R1bGUoJ25vblN0cmluZ1NlbGVjdCcsIFtdKVxuICogICAgICAgLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlKSB7XG4gKiAgICAgICAgICRyb290U2NvcGUubW9kZWwgPSB7IGlkOiAyIH07XG4gKiAgICAgICB9KVxuICogICAgICAgLmRpcmVjdGl2ZSgnY29udmVydFRvTnVtYmVyJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICogICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICogICAgICAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbCkge1xuICogICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodmFsLCAxMCk7XG4gKiAgICAgICAgICAgICB9KTtcbiAqICAgICAgICAgICAgIG5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWwpIHtcbiAqICAgICAgICAgICAgICAgcmV0dXJuICcnICsgdmFsO1xuICogICAgICAgICAgICAgfSk7XG4gKiAgICAgICAgICAgfVxuICogICAgICAgICB9O1xuICogICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ21vZGVsLmlkJykpLiQoJ29wdGlvbjpjaGVja2VkJykuZ2V0VGV4dCgpKS50b0VxdWFsKCdUd28nKTtcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqL1xudmFyIHNlbGVjdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiBbJ3NlbGVjdCcsICc/bmdNb2RlbCddLFxuICAgIGNvbnRyb2xsZXI6IFNlbGVjdENvbnRyb2xsZXIsXG4gICAgcHJpb3JpdHk6IDEsXG4gICAgbGluazoge1xuICAgICAgcHJlOiBzZWxlY3RQcmVMaW5rLFxuICAgICAgcG9zdDogc2VsZWN0UG9zdExpbmtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gc2VsZWN0UHJlTGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcblxuICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1swXTtcbiAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuXG4gICAgICAvLyBpZiBuZ01vZGVsIGlzIG5vdCBkZWZpbmVkLCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nIGJ1dCBzZXQgdGhlIHJlZ2lzdGVyT3B0aW9uXG4gICAgICAvLyBmdW5jdGlvbiB0byBub29wLCBzbyBvcHRpb25zIGRvbid0IGdldCBhZGRlZCBpbnRlcm5hbGx5XG4gICAgICBpZiAoIW5nTW9kZWxDdHJsKSB7XG4gICAgICAgIHNlbGVjdEN0cmwucmVnaXN0ZXJPcHRpb24gPSBub29wO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cblxuICAgICAgc2VsZWN0Q3RybC5uZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsO1xuXG4gICAgICAvLyBXaGVuIHRoZSBzZWxlY3RlZCBpdGVtKHMpIGNoYW5nZXMgd2UgZGVsZWdhdGUgZ2V0dGluZyB0aGUgdmFsdWUgb2YgdGhlIHNlbGVjdCBjb250cm9sXG4gICAgICAvLyB0byB0aGUgYHJlYWRWYWx1ZWAgbWV0aG9kLCB3aGljaCBjYW4gYmUgY2hhbmdlZCBpZiB0aGUgc2VsZWN0IGNhbiBoYXZlIG11bHRpcGxlXG4gICAgICAvLyBzZWxlY3RlZCB2YWx1ZXMgb3IgaWYgdGhlIG9wdGlvbnMgYXJlIGJlaW5nIGdlbmVyYXRlZCBieSBgbmdPcHRpb25zYFxuICAgICAgZWxlbWVudC5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdEN0cmwucmVtb3ZlVW5rbm93bk9wdGlvbigpO1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShzZWxlY3RDdHJsLnJlYWRWYWx1ZSgpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gSWYgdGhlIHNlbGVjdCBhbGxvd3MgbXVsdGlwbGUgdmFsdWVzIHRoZW4gd2UgbmVlZCB0byBtb2RpZnkgaG93IHdlIHJlYWQgYW5kIHdyaXRlXG4gICAgICAvLyB2YWx1ZXMgZnJvbSBhbmQgdG8gdGhlIGNvbnRyb2w7IGFsc28gd2hhdCBpdCBtZWFucyBmb3IgdGhlIHZhbHVlIHRvIGJlIGVtcHR5IGFuZFxuICAgICAgLy8gd2UgaGF2ZSB0byBhZGQgYW4gZXh0cmEgd2F0Y2ggc2luY2UgbmdNb2RlbCBkb2Vzbid0IHdvcmsgd2VsbCB3aXRoIGFycmF5cyAtIGl0XG4gICAgICAvLyBkb2Vzbid0IHRyaWdnZXIgcmVuZGVyaW5nIGlmIG9ubHkgYW4gaXRlbSBpbiB0aGUgYXJyYXkgY2hhbmdlcy5cbiAgICAgIGlmIChhdHRyLm11bHRpcGxlKSB7XG4gICAgICAgIHNlbGVjdEN0cmwubXVsdGlwbGUgPSB0cnVlO1xuXG4gICAgICAgIC8vIFJlYWQgdmFsdWUgbm93IG5lZWRzIHRvIGNoZWNrIGVhY2ggb3B0aW9uIHRvIHNlZSBpZiBpdCBpcyBzZWxlY3RlZFxuICAgICAgICBzZWxlY3RDdHJsLnJlYWRWYWx1ZSA9IGZ1bmN0aW9uIHJlYWRNdWx0aXBsZVZhbHVlKCkge1xuICAgICAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgICAgICAgIGZvckVhY2goZWxlbWVudC5maW5kKCdvcHRpb24nKSwgZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkICYmICFvcHRpb24uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgdmFyIHZhbCA9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgYXJyYXkucHVzaCh2YWwgaW4gc2VsZWN0Q3RybC5zZWxlY3RWYWx1ZU1hcCA/IHNlbGVjdEN0cmwuc2VsZWN0VmFsdWVNYXBbdmFsXSA6IHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFdyaXRlIHZhbHVlIG5vdyBuZWVkcyB0byBzZXQgdGhlIHNlbGVjdGVkIHByb3BlcnR5IG9mIGVhY2ggbWF0Y2hpbmcgb3B0aW9uXG4gICAgICAgIHNlbGVjdEN0cmwud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uIHdyaXRlTXVsdGlwbGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICAgIGZvckVhY2goZWxlbWVudC5maW5kKCdvcHRpb24nKSwgZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2hvdWxkQmVTZWxlY3RlZCA9ICEhdmFsdWUgJiYgKGluY2x1ZGVzKHZhbHVlLCBvcHRpb24udmFsdWUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVzKHZhbHVlLCBzZWxlY3RDdHJsLnNlbGVjdFZhbHVlTWFwW29wdGlvbi52YWx1ZV0pKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50bHlTZWxlY3RlZCA9IG9wdGlvbi5zZWxlY3RlZDtcblxuICAgICAgICAgICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5LCBFZGdlIDEyLTE1K1xuICAgICAgICAgICAgLy8gSW4gSUUgYW5kIEVkZ2UgYWRkaW5nIG9wdGlvbnMgdG8gdGhlIHNlbGVjdGlvbiB2aWEgc2hpZnQrY2xpY2svVVAvRE9XTlxuICAgICAgICAgICAgLy8gd2lsbCBkZS1zZWxlY3QgYWxyZWFkeSBzZWxlY3RlZCBvcHRpb25zIGlmIFwic2VsZWN0ZWRcIiBvbiB0aG9zZSBvcHRpb25zIHdhcyBzZXRcbiAgICAgICAgICAgIC8vIG1vcmUgdGhhbiBvbmNlIChpLmUuIHdoZW4gdGhlIG9wdGlvbnMgd2VyZSBhbHJlYWR5IHNlbGVjdGVkKVxuICAgICAgICAgICAgLy8gU28gd2Ugb25seSBtb2RpZnkgdGhlIHNlbGVjdGVkIHByb3BlcnR5IGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgYmVoYXZpb3IgY2Fubm90IGJlIHJlcGxpY2F0ZWQgdmlhIHVuaXQgdGVzdHMgYmVjYXVzZSBpdCBvbmx5IHNob3dzIGluIHRoZVxuICAgICAgICAgICAgLy8gYWN0dWFsIHVzZXIgaW50ZXJmYWNlLlxuICAgICAgICAgICAgaWYgKHNob3VsZEJlU2VsZWN0ZWQgIT09IGN1cnJlbnRseVNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKGpxTGl0ZShvcHRpb24pLCBzaG91bGRCZVNlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHdlIGhhdmUgdG8gZG8gaXQgb24gZWFjaCB3YXRjaCBzaW5jZSBuZ01vZGVsIHdhdGNoZXMgcmVmZXJlbmNlLCBidXRcbiAgICAgICAgLy8gd2UgbmVlZCB0byB3b3JrIG9mIGFuIGFycmF5LCBzbyB3ZSBuZWVkIHRvIHNlZSBpZiBhbnl0aGluZyB3YXMgaW5zZXJ0ZWQvcmVtb3ZlZFxuICAgICAgICB2YXIgbGFzdFZpZXcsIGxhc3RWaWV3UmVmID0gTmFOO1xuICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gc2VsZWN0TXVsdGlwbGVXYXRjaCgpIHtcbiAgICAgICAgICBpZiAobGFzdFZpZXdSZWYgPT09IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgJiYgIWVxdWFscyhsYXN0VmlldywgbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGxhc3RWaWV3ID0gc2hhbGxvd0NvcHkobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSk7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxhc3RWaWV3UmVmID0gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSWYgd2UgYXJlIGEgbXVsdGlwbGUgc2VsZWN0IHRoZW4gdmFsdWUgaXMgbm93IGEgY29sbGVjdGlvblxuICAgICAgICAvLyBzbyB0aGUgbWVhbmluZyBvZiAkaXNFbXB0eSBjaGFuZ2VzXG4gICAgICAgIG5nTW9kZWxDdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgfTtcblxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGVjdFBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIC8vIGlmIG5nTW9kZWwgaXMgbm90IGRlZmluZWQsIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuICAgICAgaWYgKCFuZ01vZGVsQ3RybCkgcmV0dXJuO1xuXG4gICAgICB2YXIgc2VsZWN0Q3RybCA9IGN0cmxzWzBdO1xuXG4gICAgICAvLyBXZSBkZWxlZ2F0ZSByZW5kZXJpbmcgdG8gdGhlIGB3cml0ZVZhbHVlYCBtZXRob2QsIHdoaWNoIGNhbiBiZSBjaGFuZ2VkXG4gICAgICAvLyBpZiB0aGUgc2VsZWN0IGNhbiBoYXZlIG11bHRpcGxlIHNlbGVjdGVkIHZhbHVlcyBvciBpZiB0aGUgb3B0aW9ucyBhcmUgYmVpbmdcbiAgICAgIC8vIGdlbmVyYXRlZCBieSBgbmdPcHRpb25zYC5cbiAgICAgIC8vIFRoaXMgbXVzdCBiZSBkb25lIGluIHRoZSBwb3N0TGluayBmbiB0byBwcmV2ZW50ICRyZW5kZXIgdG8gYmUgY2FsbGVkIGJlZm9yZVxuICAgICAgLy8gYWxsIG5vZGVzIGhhdmUgYmVlbiBsaW5rZWQgY29ycmVjdGx5LlxuICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxlY3RDdHJsLndyaXRlVmFsdWUobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbn07XG5cblxuLy8gVGhlIG9wdGlvbiBkaXJlY3RpdmUgaXMgcHVyZWx5IGRlc2lnbmVkIHRvIGNvbW11bmljYXRlIHRoZSBleGlzdGVuY2UgKG9yIGxhY2sgb2YpXG4vLyBvZiBkeW5hbWljYWxseSBjcmVhdGVkIChhbmQgZGVzdHJveWVkKSBvcHRpb24gZWxlbWVudHMgdG8gdGhlaXIgY29udGFpbmluZyBzZWxlY3Rcbi8vIGRpcmVjdGl2ZSB2aWEgaXRzIGNvbnRyb2xsZXIuXG52YXIgb3B0aW9uRGlyZWN0aXZlID0gWyckaW50ZXJwb2xhdGUnLCBmdW5jdGlvbigkaW50ZXJwb2xhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHByaW9yaXR5OiAxMDAsXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIGludGVycG9sYXRlVmFsdWVGbiwgaW50ZXJwb2xhdGVUZXh0Rm47XG5cbiAgICAgIGlmIChpc0RlZmluZWQoYXR0ci5uZ1ZhbHVlKSkge1xuICAgICAgICAvLyBXaWxsIGJlIGhhbmRsZWQgYnkgcmVnaXN0ZXJPcHRpb25cbiAgICAgIH0gZWxzZSBpZiAoaXNEZWZpbmVkKGF0dHIudmFsdWUpKSB7XG4gICAgICAgIC8vIElmIHRoZSB2YWx1ZSBhdHRyaWJ1dGUgaXMgZGVmaW5lZCwgY2hlY2sgaWYgaXQgY29udGFpbnMgYW4gaW50ZXJwb2xhdGlvblxuICAgICAgICBpbnRlcnBvbGF0ZVZhbHVlRm4gPSAkaW50ZXJwb2xhdGUoYXR0ci52YWx1ZSwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiB0aGUgdmFsdWUgYXR0cmlidXRlIGlzIG5vdCBkZWZpbmVkIHRoZW4gd2UgZmFsbCBiYWNrIHRvIHRoZVxuICAgICAgICAvLyB0ZXh0IGNvbnRlbnQgb2YgdGhlIG9wdGlvbiBlbGVtZW50LCB3aGljaCBtYXkgYmUgaW50ZXJwb2xhdGVkXG4gICAgICAgIGludGVycG9sYXRlVGV4dEZuID0gJGludGVycG9sYXRlKGVsZW1lbnQudGV4dCgpLCB0cnVlKTtcbiAgICAgICAgaWYgKCFpbnRlcnBvbGF0ZVRleHRGbikge1xuICAgICAgICAgIGF0dHIuJHNldCgndmFsdWUnLCBlbGVtZW50LnRleHQoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYW4gb3B0aW1pemF0aW9uIG92ZXIgdXNpbmcgXl4gc2luY2Ugd2UgZG9uJ3Qgd2FudCB0byBoYXZlIHRvIHNlYXJjaFxuICAgICAgICAvLyBhbGwgdGhlIHdheSB0byB0aGUgcm9vdCBvZiB0aGUgRE9NIGZvciBldmVyeSBzaW5nbGUgb3B0aW9uIGVsZW1lbnRcbiAgICAgICAgdmFyIHNlbGVjdEN0cmxOYW1lID0gJyRzZWxlY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHBhcmVudCA9IGVsZW1lbnQucGFyZW50KCksXG4gICAgICAgICAgICBzZWxlY3RDdHJsID0gcGFyZW50LmRhdGEoc2VsZWN0Q3RybE5hbWUpIHx8XG4gICAgICAgICAgICAgIHBhcmVudC5wYXJlbnQoKS5kYXRhKHNlbGVjdEN0cmxOYW1lKTsgLy8gaW4gY2FzZSB3ZSBhcmUgaW4gb3B0Z3JvdXBcblxuICAgICAgICBpZiAoc2VsZWN0Q3RybCkge1xuICAgICAgICAgIHNlbGVjdEN0cmwucmVnaXN0ZXJPcHRpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGludGVycG9sYXRlVmFsdWVGbiwgaW50ZXJwb2xhdGVUZXh0Rm4pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nUmVxdWlyZWRcbiAqIEByZXN0cmljdCBBXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1JlcXVpcmVkIEFuZ3VsYXJKUyBleHByZXNzaW9uLiBJZiBpdCBldmFsdWF0ZXMgdG8gYHRydWVgLCBpdCBzZXRzIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGByZXF1aXJlZGAgYXR0cmlidXRlIHRvIHRoZSBlbGVtZW50IGFuZCBhZGRzIHRoZSBgcmVxdWlyZWRgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYHZhbGlkYXRvcmB9LlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIG5nUmVxdWlyZWQgYWRkcyB0aGUgcmVxdWlyZWQge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYHZhbGlkYXRvcmB9IHRvIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0uXG4gKiBJdCBpcyBtb3N0IG9mdGVuIHVzZWQgZm9yIHtAbGluayBpbnB1dCBgaW5wdXRgfSBhbmQge0BsaW5rIHNlbGVjdCBgc2VsZWN0YH0gY29udHJvbHMsIGJ1dCBjYW4gYWxzbyBiZVxuICogYXBwbGllZCB0byBjdXN0b20gY29udHJvbHMuXG4gKlxuICogVGhlIGRpcmVjdGl2ZSBzZXRzIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBpZiB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gaW5zaWRlXG4gKiBgbmdSZXF1aXJlZGAgZXZhbHVhdGVzIHRvIHRydWUuIEEgc3BlY2lhbCBkaXJlY3RpdmUgZm9yIHNldHRpbmcgYHJlcXVpcmVkYCBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZVxuICogY2Fubm90IHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSBgcmVxdWlyZWRgLiBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb24gZ3VpZGV9XG4gKiBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIFRoZSB2YWxpZGF0b3Igd2lsbCBzZXQgdGhlIGByZXF1aXJlZGAgZXJyb3Iga2V5IHRvIHRydWUgaWYgdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlIGlzIHNldCBhbmRcbiAqIGNhbGxpbmcge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGlzRW1wdHkgYE5nTW9kZWxDb250cm9sbGVyLiRpc0VtcHR5YH0gd2l0aCB0aGVcbiAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgYG5nTW9kZWwuJHZpZXdWYWx1ZWB9IHJldHVybnMgYHRydWVgLiBGb3IgZXhhbXBsZSwgdGhlXG4gKiBgJGlzRW1wdHkoKWAgaW1wbGVtZW50YXRpb24gZm9yIGBpbnB1dFt0ZXh0XWAgY2hlY2tzIHRoZSBsZW5ndGggb2YgdGhlIGAkdmlld1ZhbHVlYC4gV2hlbiBkZXZlbG9waW5nXG4gKiBjdXN0b20gY29udHJvbHMsIGAkaXNFbXB0eSgpYCBjYW4gYmUgb3ZlcndyaXR0ZW4gdG8gYWNjb3VudCBmb3IgYSAkdmlld1ZhbHVlIHRoYXQgaXMgbm90IHN0cmluZy1iYXNlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nUmVxdWlyZWREaXJlY3RpdmVcIiBtb2R1bGU9XCJuZ1JlcXVpcmVkRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxzY3JpcHQ+XG4gKiAgICAgICBhbmd1bGFyLm1vZHVsZSgnbmdSZXF1aXJlZEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUucmVxdWlyZWQgPSB0cnVlO1xuICogICAgICAgICB9XSk7XG4gKiAgICAgPC9zY3JpcHQ+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJmb3JtXCI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJyZXF1aXJlZFwiPlRvZ2dsZSByZXF1aXJlZDogPC9sYWJlbD5cbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwicmVxdWlyZWRcIiBpZD1cInJlcXVpcmVkXCIgLz5cbiAqICAgICAgICAgPGJyPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwiaW5wdXRcIj5UaGlzIGlucHV0IG11c3QgYmUgZmlsbGVkIGlmIGByZXF1aXJlZGAgaXMgdHJ1ZTogPC9sYWJlbD5cbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJtb2RlbFwiIGlkPVwiaW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1yZXF1aXJlZD1cInJlcXVpcmVkXCIgLz48YnI+XG4gKiAgICAgICAgIDxocj5cbiAqICAgICAgICAgcmVxdWlyZWQgZXJyb3Igc2V0PyA9IDxjb2RlPnt7Zm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWR9fTwvY29kZT48YnI+XG4gKiAgICAgICAgIG1vZGVsID0gPGNvZGU+e3ttb2RlbH19PC9jb2RlPlxuICogICAgICAgPC9mb3JtPlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgcmVxdWlyZWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2Zvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkJykpO1xuICAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygnbW9kZWwnKSk7XG4gICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5pZCgnaW5wdXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHNldCB0aGUgcmVxdWlyZWQgZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChyZXF1aXJlZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuXG4gICAgICAgICBpbnB1dC5zZW5kS2V5cygnMTIzJyk7XG4gICAgICAgICBleHBlY3QocmVxdWlyZWQuZ2V0VGV4dCgpKS5ub3QudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzEyMycpO1xuICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciByZXF1aXJlZERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcbiAgICAgIGF0dHIucmVxdWlyZWQgPSB0cnVlOyAvLyBmb3JjZSB0cnV0aHkgaW4gY2FzZSB3ZSBhcmUgb24gbm9uIGlucHV0IGVsZW1lbnRcblxuICAgICAgY3RybC4kdmFsaWRhdG9ycy5yZXF1aXJlZCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm4gIWF0dHIucmVxdWlyZWQgfHwgIWN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKTtcbiAgICAgIH07XG5cbiAgICAgIGF0dHIuJG9ic2VydmUoJ3JlcXVpcmVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nUGF0dGVyblxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb258UmVnRXhwfSBuZ1BhdHRlcm4gQW5ndWxhckpTIGV4cHJlc3Npb24gdGhhdCBtdXN0IGV2YWx1YXRlIHRvIGEgYFJlZ0V4cGAgb3IgYSBgU3RyaW5nYFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNhYmxlIGludG8gYSBgUmVnRXhwYCwgb3IgYSBgUmVnRXhwYCBsaXRlcmFsLiBTZWUgYWJvdmUgZm9yXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIG5nUGF0dGVybiBhZGRzIHRoZSBwYXR0ZXJuIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfSB0byB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LlxuICogSXQgaXMgbW9zdCBvZnRlbiB1c2VkIGZvciB0ZXh0LWJhc2VkIHtAbGluayBpbnB1dCBgaW5wdXRgfSBjb250cm9scywgYnV0IGNhbiBhbHNvIGJlIGFwcGxpZWQgdG8gY3VzdG9tIHRleHQtYmFzZWQgY29udHJvbHMuXG4gKlxuICogVGhlIHZhbGlkYXRvciBzZXRzIHRoZSBgcGF0dGVybmAgZXJyb3Iga2V5IGlmIHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlIGBuZ01vZGVsLiR2aWV3VmFsdWVgfVxuICogZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgd2hpY2ggaXMgb2J0YWluZWQgZnJvbSB0aGUgYG5nUGF0dGVybmAgYXR0cmlidXRlIHZhbHVlOlxuICogLSB0aGUgdmFsdWUgaXMgYW4gQW5ndWxhckpTIGV4cHJlc3Npb246XG4gKiAgIC0gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gKiAgIC0gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwIGFmdGVyIHdyYXBwaW5nIGl0XG4gKiAgICAgaW4gYF5gIGFuZCBgJGAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYG5ldyBSZWdFeHAoJ15hYmMkJylgLlxuICogLSBJZiB0aGUgdmFsdWUgaXMgYSBSZWdFeHAgbGl0ZXJhbCwgZS5nLiBgbmdQYXR0ZXJuPVwiL15cXGQrJC9cImAsIGl0IGlzIHVzZWQgZGlyZWN0bHkuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gKiBzdGFydCBhdCB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgc2VhcmNoJ3MgbWF0Y2gsIHRodXMgbm90IHRha2luZyB0aGUgd2hvbGUgaW5wdXQgdmFsdWUgaW50b1xuICogYWNjb3VudC5cbiAqIDwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKk5vdGU6KiogVGhpcyBkaXJlY3RpdmUgaXMgYWxzbyBhZGRlZCB3aGVuIHRoZSBwbGFpbiBgcGF0dGVybmAgYXR0cmlidXRlIGlzIHVzZWQsIHdpdGggdHdvXG4gKiBkaWZmZXJlbmNlczpcbiAqIDxvbD5cbiAqICAgPGxpPlxuICogICAgIGBuZ1BhdHRlcm5gIGRvZXMgbm90IHNldCB0aGUgYHBhdHRlcm5gIGF0dHJpYnV0ZSBhbmQgdGhlcmVmb3JlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbiBpc1xuICogICAgIG5vdCBhdmFpbGFibGUuXG4gKiAgIDwvbGk+XG4gKiAgIDxsaT5cbiAqICAgICBUaGUgYG5nUGF0dGVybmAgYXR0cmlidXRlIG11c3QgYmUgYW4gZXhwcmVzc2lvbiwgd2hpbGUgdGhlIGBwYXR0ZXJuYCB2YWx1ZSBtdXN0IGJlXG4gKiAgICAgaW50ZXJwb2xhdGVkLlxuICogICA8L2xpPlxuICogPC9vbD5cbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdQYXR0ZXJuRGlyZWN0aXZlXCIgbW9kdWxlPVwibmdQYXR0ZXJuRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxzY3JpcHQ+XG4gKiAgICAgICBhbmd1bGFyLm1vZHVsZSgnbmdQYXR0ZXJuRXhhbXBsZScsIFtdKVxuICogICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgICRzY29wZS5yZWdleCA9ICdcXFxcZCsnO1xuICogICAgICAgICB9XSk7XG4gKiAgICAgPC9zY3JpcHQ+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJmb3JtXCI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJyZWdleFwiPlNldCBhIHBhdHRlcm4gKHJlZ2V4IHN0cmluZyk6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwicmVnZXhcIiBpZD1cInJlZ2V4XCIgLz5cbiAqICAgICAgICAgPGJyPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwiaW5wdXRcIj5UaGlzIGlucHV0IGlzIHJlc3RyaWN0ZWQgYnkgdGhlIGN1cnJlbnQgcGF0dGVybjogPC9sYWJlbD5cbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJtb2RlbFwiIGlkPVwiaW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1wYXR0ZXJuPVwicmVnZXhcIiAvPjxicj5cbiAqICAgICAgICAgPGhyPlxuICogICAgICAgICBpbnB1dCB2YWxpZD8gPSA8Y29kZT57e2Zvcm0uaW5wdXQuJHZhbGlkfX08L2NvZGU+PGJyPlxuICogICAgICAgICBtb2RlbCA9IDxjb2RlPnt7bW9kZWx9fTwvY29kZT5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIG1vZGVsID0gZWxlbWVudChieS5iaW5kaW5nKCdtb2RlbCcpKTtcbiAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5LmlkKCdpbnB1dCcpKTtcblxuICAgICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgdGhlIGlucHV0IHdpdGggdGhlIGRlZmF1bHQgcGF0dGVybicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2FhYScpO1xuICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkubm90LnRvQ29udGFpbignYWFhJyk7XG5cbiAgICAgICAgIGlucHV0LmNsZWFyKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJzEyMycpO1xuICAgICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzEyMycpO1xuICAgICAgICAgfSk7XG4gICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIHBhdHRlcm5EaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG5cbiAgICAgIHZhciByZWdleHAsIHBhdHRlcm5FeHAgPSBhdHRyLm5nUGF0dGVybiB8fCBhdHRyLnBhdHRlcm47XG4gICAgICBhdHRyLiRvYnNlcnZlKCdwYXR0ZXJuJywgZnVuY3Rpb24ocmVnZXgpIHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKHJlZ2V4KSAmJiByZWdleC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKCdeJyArIHJlZ2V4ICsgJyQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZWdleCAmJiAhcmVnZXgudGVzdCkge1xuICAgICAgICAgIHRocm93IG1pbkVycignbmdQYXR0ZXJuJykoJ25vcmVnZXhwJyxcbiAgICAgICAgICAgICdFeHBlY3RlZCB7MH0gdG8gYmUgYSBSZWdFeHAgYnV0IHdhcyB7MX0uIEVsZW1lbnQ6IHsyfScsIHBhdHRlcm5FeHAsXG4gICAgICAgICAgICByZWdleCwgc3RhcnRpbmdUYWcoZWxtKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdleHAgPSByZWdleCB8fCB1bmRlZmluZWQ7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcblxuICAgICAgY3RybC4kdmFsaWRhdG9ycy5wYXR0ZXJuID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIC8vIEhUTUw1IHBhdHRlcm4gY29uc3RyYWludCB2YWxpZGF0ZXMgdGhlIGlucHV0IHZhbHVlLCBzbyB3ZSB2YWxpZGF0ZSB0aGUgdmlld1ZhbHVlXG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQocmVnZXhwKSB8fCByZWdleHAudGVzdCh2aWV3VmFsdWUpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTWF4bGVuZ3RoXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNYXhsZW5ndGggQW5ndWxhckpTIGV4cHJlc3Npb24gdGhhdCBtdXN0IGV2YWx1YXRlIHRvIGEgYE51bWJlcmAgb3IgYFN0cmluZ2BcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2FibGUgaW50byBhIGBOdW1iZXJgLiBVc2VkIGFzIHZhbHVlIGZvciB0aGUgYG1heGxlbmd0aGBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgdmFsaWRhdG9yfS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBuZ01heGxlbmd0aCBhZGRzIHRoZSBtYXhsZW5ndGgge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYHZhbGlkYXRvcmB9IHRvIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0uXG4gKiBJdCBpcyBtb3N0IG9mdGVuIHVzZWQgZm9yIHRleHQtYmFzZWQge0BsaW5rIGlucHV0IGBpbnB1dGB9IGNvbnRyb2xzLCBidXQgY2FuIGFsc28gYmUgYXBwbGllZCB0byBjdXN0b20gdGV4dC1iYXNlZCBjb250cm9scy5cbiAqXG4gKiBUaGUgdmFsaWRhdG9yIHNldHMgdGhlIGBtYXhsZW5ndGhgIGVycm9yIGtleSBpZiB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSBgbmdNb2RlbC4kdmlld1ZhbHVlYH1cbiAqIGlzIGxvbmdlciB0aGFuIHRoZSBpbnRlZ2VyIG9idGFpbmVkIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXJKUyBleHByZXNzaW9uIGdpdmVuIGluIHRoZVxuICogYG5nTWF4bGVuZ3RoYCBhdHRyaWJ1dGUgdmFsdWUuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICoqTm90ZToqKiBUaGlzIGRpcmVjdGl2ZSBpcyBhbHNvIGFkZGVkIHdoZW4gdGhlIHBsYWluIGBtYXhsZW5ndGhgIGF0dHJpYnV0ZSBpcyB1c2VkLCB3aXRoIHR3b1xuICogZGlmZmVyZW5jZXM6XG4gKiA8b2w+XG4gKiAgIDxsaT5cbiAqICAgICBgbmdNYXhsZW5ndGhgIGRvZXMgbm90IHNldCB0aGUgYG1heGxlbmd0aGAgYXR0cmlidXRlIGFuZCB0aGVyZWZvcmUgSFRNTDUgY29uc3RyYWludFxuICogICAgIHZhbGlkYXRpb24gaXMgbm90IGF2YWlsYWJsZS5cbiAqICAgPC9saT5cbiAqICAgPGxpPlxuICogICAgIFRoZSBgbmdNYXhsZW5ndGhgIGF0dHJpYnV0ZSBtdXN0IGJlIGFuIGV4cHJlc3Npb24sIHdoaWxlIHRoZSBgbWF4bGVuZ3RoYCB2YWx1ZSBtdXN0IGJlXG4gKiAgICAgaW50ZXJwb2xhdGVkLlxuICogICA8L2xpPlxuICogPC9vbD5cbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNYXhsZW5ndGhEaXJlY3RpdmVcIiBtb2R1bGU9XCJuZ01heGxlbmd0aEV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ25nTWF4bGVuZ3RoRXhhbXBsZScsIFtdKVxuICogICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgICRzY29wZS5tYXhsZW5ndGggPSA1O1xuICogICAgICAgICB9XSk7XG4gKiAgICAgPC9zY3JpcHQ+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJmb3JtXCI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJtYXhsZW5ndGhcIj5TZXQgYSBtYXhsZW5ndGg6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJtYXhsZW5ndGhcIiBpZD1cIm1heGxlbmd0aFwiIC8+XG4gKiAgICAgICAgIDxicj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cImlucHV0XCI+VGhpcyBpbnB1dCBpcyByZXN0cmljdGVkIGJ5IHRoZSBjdXJyZW50IG1heGxlbmd0aDogPC9sYWJlbD5cbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJtb2RlbFwiIGlkPVwiaW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tYXhsZW5ndGg9XCJtYXhsZW5ndGhcIiAvPjxicj5cbiAqICAgICAgICAgPGhyPlxuICogICAgICAgICBpbnB1dCB2YWxpZD8gPSA8Y29kZT57e2Zvcm0uaW5wdXQuJHZhbGlkfX08L2NvZGU+PGJyPlxuICogICAgICAgICBtb2RlbCA9IDxjb2RlPnt7bW9kZWx9fTwvY29kZT5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIG1vZGVsID0gZWxlbWVudChieS5iaW5kaW5nKCdtb2RlbCcpKTtcbiAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5LmlkKCdpbnB1dCcpKTtcblxuICAgICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgdGhlIGlucHV0IHdpdGggdGhlIGRlZmF1bHQgbWF4bGVuZ3RoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWJjZGVmJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS5ub3QudG9Db250YWluKCdhYmNkZWYnKTtcblxuICAgICAgICAgaW5wdXQuY2xlYXIoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWJjZGUnKTtcbiAgICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9Db250YWluKCdhYmNkZScpO1xuICAgICAgICAgfSk7XG4gICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIG1heGxlbmd0aERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIG1heGxlbmd0aCA9IC0xO1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4bGVuZ3RoJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIGludFZhbCA9IHRvSW50KHZhbHVlKTtcbiAgICAgICAgbWF4bGVuZ3RoID0gaXNOdW1iZXJOYU4oaW50VmFsKSA/IC0xIDogaW50VmFsO1xuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1heGxlbmd0aCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm4gKG1heGxlbmd0aCA8IDApIHx8IGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCAodmlld1ZhbHVlLmxlbmd0aCA8PSBtYXhsZW5ndGgpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTWlubGVuZ3RoXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNaW5sZW5ndGggQW5ndWxhckpTIGV4cHJlc3Npb24gdGhhdCBtdXN0IGV2YWx1YXRlIHRvIGEgYE51bWJlcmAgb3IgYFN0cmluZ2BcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2FibGUgaW50byBhIGBOdW1iZXJgLiBVc2VkIGFzIHZhbHVlIGZvciB0aGUgYG1pbmxlbmd0aGBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgdmFsaWRhdG9yfS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBuZ01pbmxlbmd0aCBhZGRzIHRoZSBtaW5sZW5ndGgge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYHZhbGlkYXRvcmB9IHRvIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0uXG4gKiBJdCBpcyBtb3N0IG9mdGVuIHVzZWQgZm9yIHRleHQtYmFzZWQge0BsaW5rIGlucHV0IGBpbnB1dGB9IGNvbnRyb2xzLCBidXQgY2FuIGFsc28gYmUgYXBwbGllZCB0byBjdXN0b20gdGV4dC1iYXNlZCBjb250cm9scy5cbiAqXG4gKiBUaGUgdmFsaWRhdG9yIHNldHMgdGhlIGBtaW5sZW5ndGhgIGVycm9yIGtleSBpZiB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSBgbmdNb2RlbC4kdmlld1ZhbHVlYH1cbiAqIGlzIHNob3J0ZXIgdGhhbiB0aGUgaW50ZWdlciBvYnRhaW5lZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGVcbiAqIGBuZ01pbmxlbmd0aGAgYXR0cmlidXRlIHZhbHVlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKk5vdGU6KiogVGhpcyBkaXJlY3RpdmUgaXMgYWxzbyBhZGRlZCB3aGVuIHRoZSBwbGFpbiBgbWlubGVuZ3RoYCBhdHRyaWJ1dGUgaXMgdXNlZCwgd2l0aCB0d29cbiAqIGRpZmZlcmVuY2VzOlxuICogPG9sPlxuICogICA8bGk+XG4gKiAgICAgYG5nTWlubGVuZ3RoYCBkb2VzIG5vdCBzZXQgdGhlIGBtaW5sZW5ndGhgIGF0dHJpYnV0ZSBhbmQgdGhlcmVmb3JlIEhUTUw1IGNvbnN0cmFpbnRcbiAqICAgICB2YWxpZGF0aW9uIGlzIG5vdCBhdmFpbGFibGUuXG4gKiAgIDwvbGk+XG4gKiAgIDxsaT5cbiAqICAgICBUaGUgYG5nTWlubGVuZ3RoYCB2YWx1ZSBtdXN0IGJlIGFuIGV4cHJlc3Npb24sIHdoaWxlIHRoZSBgbWlubGVuZ3RoYCB2YWx1ZSBtdXN0IGJlXG4gKiAgICAgaW50ZXJwb2xhdGVkLlxuICogICA8L2xpPlxuICogPC9vbD5cbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNaW5sZW5ndGhEaXJlY3RpdmVcIiBtb2R1bGU9XCJuZ01pbmxlbmd0aEV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ25nTWlubGVuZ3RoRXhhbXBsZScsIFtdKVxuICogICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgICRzY29wZS5taW5sZW5ndGggPSAzO1xuICogICAgICAgICB9XSk7XG4gKiAgICAgPC9zY3JpcHQ+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJmb3JtXCI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJtaW5sZW5ndGhcIj5TZXQgYSBtaW5sZW5ndGg6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJtaW5sZW5ndGhcIiBpZD1cIm1pbmxlbmd0aFwiIC8+XG4gKiAgICAgICAgIDxicj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cImlucHV0XCI+VGhpcyBpbnB1dCBpcyByZXN0cmljdGVkIGJ5IHRoZSBjdXJyZW50IG1pbmxlbmd0aDogPC9sYWJlbD5cbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJtb2RlbFwiIGlkPVwiaW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1taW5sZW5ndGg9XCJtaW5sZW5ndGhcIiAvPjxicj5cbiAqICAgICAgICAgPGhyPlxuICogICAgICAgICBpbnB1dCB2YWxpZD8gPSA8Y29kZT57e2Zvcm0uaW5wdXQuJHZhbGlkfX08L2NvZGU+PGJyPlxuICogICAgICAgICBtb2RlbCA9IDxjb2RlPnt7bW9kZWx9fTwvY29kZT5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIG1vZGVsID0gZWxlbWVudChieS5iaW5kaW5nKCdtb2RlbCcpKTtcbiAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5LmlkKCdpbnB1dCcpKTtcblxuICAgICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgdGhlIGlucHV0IHdpdGggdGhlIGRlZmF1bHQgbWlubGVuZ3RoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWInKTtcbiAgICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLm5vdC50b0NvbnRhaW4oJ2FiJyk7XG5cbiAgICAgICAgIGlucHV0LnNlbmRLZXlzKCdhYmMnKTtcbiAgICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvQ29udGFpbignYWJjJyk7XG4gICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIG1pbmxlbmd0aERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIG1pbmxlbmd0aCA9IDA7XG4gICAgICBhdHRyLiRvYnNlcnZlKCdtaW5sZW5ndGgnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBtaW5sZW5ndGggPSB0b0ludCh2YWx1ZSkgfHwgMDtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgICAgY3RybC4kdmFsaWRhdG9ycy5taW5sZW5ndGggPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCB2aWV3VmFsdWUubGVuZ3RoID49IG1pbmxlbmd0aDtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxuaWYgKHdpbmRvdy5hbmd1bGFyLmJvb3RzdHJhcCkge1xuICAvLyBBbmd1bGFySlMgaXMgYWxyZWFkeSBsb2FkZWQsIHNvIHdlIGNhbiByZXR1cm4gaGVyZS4uLlxuICBpZiAod2luZG93LmNvbnNvbGUpIHtcbiAgICBjb25zb2xlLmxvZygnV0FSTklORzogVHJpZWQgdG8gbG9hZCBBbmd1bGFySlMgbW9yZSB0aGFuIG9uY2UuJyk7XG4gIH1cbiAgcmV0dXJuO1xufVxuXG4vLyB0cnkgdG8gYmluZCB0byBqcXVlcnkgbm93IHNvIHRoYXQgb25lIGNhbiB3cml0ZSBqcUxpdGUoZm4pXG4vLyBidXQgd2Ugd2lsbCByZWJpbmQgb24gYm9vdHN0cmFwIGFnYWluLlxuYmluZEpRdWVyeSgpO1xuXG5wdWJsaXNoRXh0ZXJuYWxBUEkoYW5ndWxhcik7XG5cbmFuZ3VsYXIubW9kdWxlKFwibmdMb2NhbGVcIiwgW10sIFtcIiRwcm92aWRlXCIsIGZ1bmN0aW9uKCRwcm92aWRlKSB7XG52YXIgUExVUkFMX0NBVEVHT1JZID0ge1pFUk86IFwiemVyb1wiLCBPTkU6IFwib25lXCIsIFRXTzogXCJ0d29cIiwgRkVXOiBcImZld1wiLCBNQU5ZOiBcIm1hbnlcIiwgT1RIRVI6IFwib3RoZXJcIn07XG5mdW5jdGlvbiBnZXREZWNpbWFscyhuKSB7XG4gIG4gPSBuICsgJyc7XG4gIHZhciBpID0gbi5pbmRleE9mKCcuJyk7XG4gIHJldHVybiAoaSA9PSAtMSkgPyAwIDogbi5sZW5ndGggLSBpIC0gMTtcbn1cblxuZnVuY3Rpb24gZ2V0VkYobiwgb3B0X3ByZWNpc2lvbikge1xuICB2YXIgdiA9IG9wdF9wcmVjaXNpb247XG5cbiAgaWYgKHVuZGVmaW5lZCA9PT0gdikge1xuICAgIHYgPSBNYXRoLm1pbihnZXREZWNpbWFscyhuKSwgMyk7XG4gIH1cblxuICB2YXIgYmFzZSA9IE1hdGgucG93KDEwLCB2KTtcbiAgdmFyIGYgPSAoKG4gKiBiYXNlKSB8IDApICUgYmFzZTtcbiAgcmV0dXJuIHt2OiB2LCBmOiBmfTtcbn1cblxuJHByb3ZpZGUudmFsdWUoXCIkbG9jYWxlXCIsIHtcbiAgXCJEQVRFVElNRV9GT1JNQVRTXCI6IHtcbiAgICBcIkFNUE1TXCI6IFtcbiAgICAgIFwiQU1cIixcbiAgICAgIFwiUE1cIlxuICAgIF0sXG4gICAgXCJEQVlcIjogW1xuICAgICAgXCJTdW5kYXlcIixcbiAgICAgIFwiTW9uZGF5XCIsXG4gICAgICBcIlR1ZXNkYXlcIixcbiAgICAgIFwiV2VkbmVzZGF5XCIsXG4gICAgICBcIlRodXJzZGF5XCIsXG4gICAgICBcIkZyaWRheVwiLFxuICAgICAgXCJTYXR1cmRheVwiXG4gICAgXSxcbiAgICBcIkVSQU5BTUVTXCI6IFtcbiAgICAgIFwiQmVmb3JlIENocmlzdFwiLFxuICAgICAgXCJBbm5vIERvbWluaVwiXG4gICAgXSxcbiAgICBcIkVSQVNcIjogW1xuICAgICAgXCJCQ1wiLFxuICAgICAgXCJBRFwiXG4gICAgXSxcbiAgICBcIkZJUlNUREFZT0ZXRUVLXCI6IDYsXG4gICAgXCJNT05USFwiOiBbXG4gICAgICBcIkphbnVhcnlcIixcbiAgICAgIFwiRmVicnVhcnlcIixcbiAgICAgIFwiTWFyY2hcIixcbiAgICAgIFwiQXByaWxcIixcbiAgICAgIFwiTWF5XCIsXG4gICAgICBcIkp1bmVcIixcbiAgICAgIFwiSnVseVwiLFxuICAgICAgXCJBdWd1c3RcIixcbiAgICAgIFwiU2VwdGVtYmVyXCIsXG4gICAgICBcIk9jdG9iZXJcIixcbiAgICAgIFwiTm92ZW1iZXJcIixcbiAgICAgIFwiRGVjZW1iZXJcIlxuICAgIF0sXG4gICAgXCJTSE9SVERBWVwiOiBbXG4gICAgICBcIlN1blwiLFxuICAgICAgXCJNb25cIixcbiAgICAgIFwiVHVlXCIsXG4gICAgICBcIldlZFwiLFxuICAgICAgXCJUaHVcIixcbiAgICAgIFwiRnJpXCIsXG4gICAgICBcIlNhdFwiXG4gICAgXSxcbiAgICBcIlNIT1JUTU9OVEhcIjogW1xuICAgICAgXCJKYW5cIixcbiAgICAgIFwiRmViXCIsXG4gICAgICBcIk1hclwiLFxuICAgICAgXCJBcHJcIixcbiAgICAgIFwiTWF5XCIsXG4gICAgICBcIkp1blwiLFxuICAgICAgXCJKdWxcIixcbiAgICAgIFwiQXVnXCIsXG4gICAgICBcIlNlcFwiLFxuICAgICAgXCJPY3RcIixcbiAgICAgIFwiTm92XCIsXG4gICAgICBcIkRlY1wiXG4gICAgXSxcbiAgICBcIlNUQU5EQUxPTkVNT05USFwiOiBbXG4gICAgICBcIkphbnVhcnlcIixcbiAgICAgIFwiRmVicnVhcnlcIixcbiAgICAgIFwiTWFyY2hcIixcbiAgICAgIFwiQXByaWxcIixcbiAgICAgIFwiTWF5XCIsXG4gICAgICBcIkp1bmVcIixcbiAgICAgIFwiSnVseVwiLFxuICAgICAgXCJBdWd1c3RcIixcbiAgICAgIFwiU2VwdGVtYmVyXCIsXG4gICAgICBcIk9jdG9iZXJcIixcbiAgICAgIFwiTm92ZW1iZXJcIixcbiAgICAgIFwiRGVjZW1iZXJcIlxuICAgIF0sXG4gICAgXCJXRUVLRU5EUkFOR0VcIjogW1xuICAgICAgNSxcbiAgICAgIDZcbiAgICBdLFxuICAgIFwiZnVsbERhdGVcIjogXCJFRUVFLCBNTU1NIGQsIHlcIixcbiAgICBcImxvbmdEYXRlXCI6IFwiTU1NTSBkLCB5XCIsXG4gICAgXCJtZWRpdW1cIjogXCJNTU0gZCwgeSBoOm1tOnNzIGFcIixcbiAgICBcIm1lZGl1bURhdGVcIjogXCJNTU0gZCwgeVwiLFxuICAgIFwibWVkaXVtVGltZVwiOiBcImg6bW06c3MgYVwiLFxuICAgIFwic2hvcnRcIjogXCJNL2QveXkgaDptbSBhXCIsXG4gICAgXCJzaG9ydERhdGVcIjogXCJNL2QveXlcIixcbiAgICBcInNob3J0VGltZVwiOiBcImg6bW0gYVwiXG4gIH0sXG4gIFwiTlVNQkVSX0ZPUk1BVFNcIjoge1xuICAgIFwiQ1VSUkVOQ1lfU1lNXCI6IFwiJFwiLFxuICAgIFwiREVDSU1BTF9TRVBcIjogXCIuXCIsXG4gICAgXCJHUk9VUF9TRVBcIjogXCIsXCIsXG4gICAgXCJQQVRURVJOU1wiOiBbXG4gICAgICB7XG4gICAgICAgIFwiZ1NpemVcIjogMyxcbiAgICAgICAgXCJsZ1NpemVcIjogMyxcbiAgICAgICAgXCJtYXhGcmFjXCI6IDMsXG4gICAgICAgIFwibWluRnJhY1wiOiAwLFxuICAgICAgICBcIm1pbkludFwiOiAxLFxuICAgICAgICBcIm5lZ1ByZVwiOiBcIi1cIixcbiAgICAgICAgXCJuZWdTdWZcIjogXCJcIixcbiAgICAgICAgXCJwb3NQcmVcIjogXCJcIixcbiAgICAgICAgXCJwb3NTdWZcIjogXCJcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJnU2l6ZVwiOiAzLFxuICAgICAgICBcImxnU2l6ZVwiOiAzLFxuICAgICAgICBcIm1heEZyYWNcIjogMixcbiAgICAgICAgXCJtaW5GcmFjXCI6IDIsXG4gICAgICAgIFwibWluSW50XCI6IDEsXG4gICAgICAgIFwibmVnUHJlXCI6IFwiLVxcdTAwYTRcIixcbiAgICAgICAgXCJuZWdTdWZcIjogXCJcIixcbiAgICAgICAgXCJwb3NQcmVcIjogXCJcXHUwMGE0XCIsXG4gICAgICAgIFwicG9zU3VmXCI6IFwiXCJcbiAgICAgIH1cbiAgICBdXG4gIH0sXG4gIFwiaWRcIjogXCJlbi11c1wiLFxuICBcImxvY2FsZUlEXCI6IFwiZW5fVVNcIixcbiAgXCJwbHVyYWxDYXRcIjogZnVuY3Rpb24obiwgb3B0X3ByZWNpc2lvbikgeyAgdmFyIGkgPSBuIHwgMDsgIHZhciB2ZiA9IGdldFZGKG4sIG9wdF9wcmVjaXNpb24pOyAgaWYgKGkgPT0gMSAmJiB2Zi52ID09IDApIHsgICAgcmV0dXJuIFBMVVJBTF9DQVRFR09SWS5PTkU7ICB9ICByZXR1cm4gUExVUkFMX0NBVEVHT1JZLk9USEVSO31cbn0pO1xufV0pO1xuXG4gIGpxTGl0ZShmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFySW5pdCh3aW5kb3cuZG9jdW1lbnQsIGJvb3RzdHJhcCk7XG4gIH0pO1xuXG59KSh3aW5kb3cpO1xuXG4hd2luZG93LmFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlICYmIHdpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuaGVhZCkucHJlcGVuZCgnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPkBjaGFyc2V0IFwiVVRGLThcIjtbbmdcXFxcOmNsb2FrXSxbbmctY2xvYWtdLFtkYXRhLW5nLWNsb2FrXSxbeC1uZy1jbG9ha10sLm5nLWNsb2FrLC54LW5nLWNsb2FrLC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXFxcOmZvcm17ZGlzcGxheTpibG9jazt9Lm5nLWFuaW1hdGUtc2hpbXt2aXNpYmlsaXR5OmhpZGRlbjt9Lm5nLWFuY2hvcntwb3NpdGlvbjphYnNvbHV0ZTt9PC9zdHlsZT4nKTsiLCIvKipcbiAqIFN0YXRlLWJhc2VkIHJvdXRpbmcgZm9yIEFuZ3VsYXJKUyAxLnhcbiAqIFRoaXMgYnVuZGxlIHJlcXVpcmVzIHRoZSB1aS1yb3V0ZXItY29yZS5qcyBidW5kbGUgZnJvbSB0aGUgQHVpcm91dGVyL2NvcmUgcGFja2FnZS5cbiAqIEB2ZXJzaW9uIHYxLjAuMTlcbiAqIEBsaW5rIGh0dHBzOi8vdWktcm91dGVyLmdpdGh1Yi5pb1xuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzLCByZXF1aXJlKCdhbmd1bGFyJyksIHJlcXVpcmUoJ0B1aXJvdXRlci9jb3JlJykpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJywgJ2FuZ3VsYXInLCAnQHVpcm91dGVyL2NvcmUnXSwgZmFjdG9yeSkgOlxuICAgIChmYWN0b3J5KChnbG9iYWxbJ0B1aXJvdXRlci9hbmd1bGFyanMnXSA9IHt9KSxnbG9iYWwuYW5ndWxhcixnbG9iYWxbJ0B1aXJvdXRlci9jb3JlJ10pKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzLG5nX2Zyb21faW1wb3J0LGNvcmUpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG5nX2Zyb21fZ2xvYmFsID0gYW5ndWxhcjtcbiAgICB2YXIgbmcgPSBuZ19mcm9tX2ltcG9ydCAmJiBuZ19mcm9tX2ltcG9ydC5tb2R1bGUgPyBuZ19mcm9tX2ltcG9ydCA6IG5nX2Zyb21fZ2xvYmFsO1xuXG4gICAgZnVuY3Rpb24gZ2V0TmcxVmlld0NvbmZpZ0ZhY3RvcnkoKSB7XG4gICAgICAgIHZhciB0ZW1wbGF0ZUZhY3RvcnkgPSBudWxsO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHBhdGgsIHZpZXcpIHtcbiAgICAgICAgICAgIHRlbXBsYXRlRmFjdG9yeSA9IHRlbXBsYXRlRmFjdG9yeSB8fCBjb3JlLnNlcnZpY2VzLiRpbmplY3Rvci5nZXQoJyR0ZW1wbGF0ZUZhY3RvcnknKTtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IE5nMVZpZXdDb25maWcocGF0aCwgdmlldywgdGVtcGxhdGVGYWN0b3J5KV07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciBoYXNBbnlLZXkgPSBmdW5jdGlvbiAoa2V5cywgb2JqKSB7IHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHsgcmV0dXJuIGFjYyB8fCBjb3JlLmlzRGVmaW5lZChvYmpba2V5XSk7IH0sIGZhbHNlKTsgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGEgW1tTdGF0ZUJ1aWxkZXIuYnVpbGRlcl1dIGZ1bmN0aW9uIGZvciBhbmd1bGFyMSBgdmlld3NgLlxuICAgICAqXG4gICAgICogV2hlbiB0aGUgW1tTdGF0ZUJ1aWxkZXJdXSBidWlsZHMgYSBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0IGZyb20gYSByYXcgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoaXMgYnVpbGRlclxuICAgICAqIGhhbmRsZXMgdGhlIGB2aWV3c2AgcHJvcGVydHkgd2l0aCBsb2dpYyBzcGVjaWZpYyB0byBAdWlyb3V0ZXIvYW5ndWxhcmpzIChuZzEpLlxuICAgICAqXG4gICAgICogSWYgbm8gYHZpZXdzOiB7fWAgcHJvcGVydHkgZXhpc3RzIG9uIHRoZSBbW1N0YXRlRGVjbGFyYXRpb25dXSwgdGhlbiBpdCBjcmVhdGVzIHRoZSBgdmlld3NgIG9iamVjdFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBzdGF0ZS1sZXZlbCBjb25maWd1cmF0aW9uIHRvIGEgdmlldyBuYW1lZCBgJGRlZmF1bHRgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5nMVZpZXdzQnVpbGRlcihzdGF0ZSkge1xuICAgICAgICAvLyBEbyBub3QgcHJvY2VzcyByb290IHN0YXRlXG4gICAgICAgIGlmICghc3RhdGUucGFyZW50KVxuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB2YXIgdHBsS2V5cyA9IFsndGVtcGxhdGVQcm92aWRlcicsICd0ZW1wbGF0ZVVybCcsICd0ZW1wbGF0ZScsICdub3RpZnknLCAnYXN5bmMnXSwgY3RybEtleXMgPSBbJ2NvbnRyb2xsZXInLCAnY29udHJvbGxlclByb3ZpZGVyJywgJ2NvbnRyb2xsZXJBcycsICdyZXNvbHZlQXMnXSwgY29tcEtleXMgPSBbJ2NvbXBvbmVudCcsICdiaW5kaW5ncycsICdjb21wb25lbnRQcm92aWRlciddLCBub25Db21wS2V5cyA9IHRwbEtleXMuY29uY2F0KGN0cmxLZXlzKSwgYWxsVmlld0tleXMgPSBjb21wS2V5cy5jb25jYXQobm9uQ29tcEtleXMpO1xuICAgICAgICAvLyBEbyBub3QgYWxsb3cgYSBzdGF0ZSB0byBoYXZlIGJvdGggc3RhdGUtbGV2ZWwgcHJvcHMgYW5kIGFsc28gYSBgdmlld3M6IHt9YCBwcm9wZXJ0eS5cbiAgICAgICAgLy8gQSBzdGF0ZSB3aXRob3V0IGEgYHZpZXdzOiB7fWAgcHJvcGVydHkgY2FuIGRlY2xhcmUgcHJvcGVydGllcyBmb3IgdGhlIGAkZGVmYXVsdGAgdmlldyBhcyBwcm9wZXJ0aWVzIG9mIHRoZSBzdGF0ZS5cbiAgICAgICAgLy8gSG93ZXZlciwgdGhlIGAkZGVmYXVsdGAgYXBwcm9hY2ggc2hvdWxkIG5vdCBiZSBtaXhlZCB3aXRoIGEgc2VwYXJhdGUgYHZpZXdzOiBgIGJsb2NrLlxuICAgICAgICBpZiAoY29yZS5pc0RlZmluZWQoc3RhdGUudmlld3MpICYmIGhhc0FueUtleShhbGxWaWV3S2V5cywgc3RhdGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIgKyBzdGF0ZS5uYW1lICsgXCInIGhhcyBhICd2aWV3cycgb2JqZWN0LiBcIiArXG4gICAgICAgICAgICAgICAgXCJJdCBjYW5ub3QgYWxzbyBoYXZlIFxcXCJ2aWV3IHByb3BlcnRpZXNcXFwiIGF0IHRoZSBzdGF0ZSBsZXZlbC4gIFwiICtcbiAgICAgICAgICAgICAgICBcIk1vdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGludG8gYSB2aWV3IChpbiB0aGUgJ3ZpZXdzJyBvYmplY3QpOiBcIiArXG4gICAgICAgICAgICAgICAgKFwiIFwiICsgYWxsVmlld0tleXMuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGNvcmUuaXNEZWZpbmVkKHN0YXRlW2tleV0pOyB9KS5qb2luKCcsICcpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZpZXdzID0ge30sIHZpZXdzT2JqZWN0ID0gc3RhdGUudmlld3MgfHwgeyAkZGVmYXVsdDogY29yZS5waWNrKHN0YXRlLCBhbGxWaWV3S2V5cykgfTtcbiAgICAgICAgY29yZS5mb3JFYWNoKHZpZXdzT2JqZWN0LCBmdW5jdGlvbiAoY29uZmlnLCBuYW1lKSB7XG4gICAgICAgICAgICAvLyBBY2NvdW50IGZvciB2aWV3czogeyBcIlwiOiB7IHRlbXBsYXRlLi4uIH0gfVxuICAgICAgICAgICAgbmFtZSA9IG5hbWUgfHwgJyRkZWZhdWx0JztcbiAgICAgICAgICAgIC8vIEFjY291bnQgZm9yIHZpZXdzOiB7IGhlYWRlcjogXCJoZWFkZXJDb21wb25lbnRcIiB9XG4gICAgICAgICAgICBpZiAoY29yZS5pc1N0cmluZyhjb25maWcpKVxuICAgICAgICAgICAgICAgIGNvbmZpZyA9IHsgY29tcG9uZW50OiBjb25maWcgfTtcbiAgICAgICAgICAgIC8vIE1ha2UgYSBzaGFsbG93IGNvcHkgb2YgdGhlIGNvbmZpZyBvYmplY3RcbiAgICAgICAgICAgIGNvbmZpZyA9IGNvcmUuZXh0ZW5kKHt9LCBjb25maWcpO1xuICAgICAgICAgICAgLy8gRG8gbm90IGFsbG93IGEgdmlldyB0byBtaXggcHJvcHMgZm9yIGNvbXBvbmVudC1zdHlsZSB2aWV3IHdpdGggcHJvcHMgZm9yIHRlbXBsYXRlL2NvbnRyb2xsZXItc3R5bGUgdmlld1xuICAgICAgICAgICAgaWYgKGhhc0FueUtleShjb21wS2V5cywgY29uZmlnKSAmJiBoYXNBbnlLZXkobm9uQ29tcEtleXMsIGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY29tYmluZTogXCIgKyBjb21wS2V5cy5qb2luKCd8JykgKyBcIiB3aXRoOiBcIiArIG5vbkNvbXBLZXlzLmpvaW4oJ3wnKSArIFwiIGluIHN0YXRldmlldzogJ1wiICsgbmFtZSArIFwiQFwiICsgc3RhdGUubmFtZSArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpZy5yZXNvbHZlQXMgPSBjb25maWcucmVzb2x2ZUFzIHx8ICckcmVzb2x2ZSc7XG4gICAgICAgICAgICBjb25maWcuJHR5cGUgPSAnbmcxJztcbiAgICAgICAgICAgIGNvbmZpZy4kY29udGV4dCA9IHN0YXRlO1xuICAgICAgICAgICAgY29uZmlnLiRuYW1lID0gbmFtZTtcbiAgICAgICAgICAgIHZhciBub3JtYWxpemVkID0gY29yZS5WaWV3U2VydmljZS5ub3JtYWxpemVVSVZpZXdUYXJnZXQoY29uZmlnLiRjb250ZXh0LCBjb25maWcuJG5hbWUpO1xuICAgICAgICAgICAgY29uZmlnLiR1aVZpZXdOYW1lID0gbm9ybWFsaXplZC51aVZpZXdOYW1lO1xuICAgICAgICAgICAgY29uZmlnLiR1aVZpZXdDb250ZXh0QW5jaG9yID0gbm9ybWFsaXplZC51aVZpZXdDb250ZXh0QW5jaG9yO1xuICAgICAgICAgICAgdmlld3NbbmFtZV0gPSBjb25maWc7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmlld3M7XG4gICAgfVxuICAgIHZhciBpZCA9IDA7XG4gICAgdmFyIE5nMVZpZXdDb25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE5nMVZpZXdDb25maWcocGF0aCwgdmlld0RlY2wsIGZhY3RvcnkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xuICAgICAgICAgICAgdGhpcy52aWV3RGVjbCA9IHZpZXdEZWNsO1xuICAgICAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICAgICAgICAgIHRoaXMuJGlkID0gaWQrKztcbiAgICAgICAgICAgIHRoaXMubG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKHVpVmlldywgY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgPyBfdGhpcy5mYWN0b3J5Lm1ha2VDb21wb25lbnRUZW1wbGF0ZSh1aVZpZXcsIGNvbnRleHQsIF90aGlzLmNvbXBvbmVudCwgX3RoaXMudmlld0RlY2wuYmluZGluZ3MpXG4gICAgICAgICAgICAgICAgICAgIDogX3RoaXMudGVtcGxhdGU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIE5nMVZpZXdDb25maWcucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICRxID0gY29yZS5zZXJ2aWNlcy4kcTtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gbmV3IGNvcmUuUmVzb2x2ZUNvbnRleHQodGhpcy5wYXRoKTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhdGgucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5vZGUpIHsgcmV0dXJuIGNvcmUuZXh0ZW5kKGFjYywgbm9kZS5wYXJhbVZhbHVlcyk7IH0sIHt9KTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJHEud2hlbih0aGlzLmZhY3RvcnkuZnJvbUNvbmZpZyh0aGlzLnZpZXdEZWNsLCBwYXJhbXMsIGNvbnRleHQpKSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAkcS53aGVuKHRoaXMuZ2V0Q29udHJvbGxlcihjb250ZXh0KSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuICRxLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGNvcmUudHJhY2UudHJhY2VWaWV3U2VydmljZUV2ZW50KCdMb2FkZWQnLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29udHJvbGxlciA9IHJlc3VsdHMuY29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICBjb3JlLmV4dGVuZChfdGhpcywgcmVzdWx0cy50ZW1wbGF0ZSk7IC8vIEVpdGhlciB7IHRlbXBsYXRlOiBcInRwbFwiIH0gb3IgeyBjb21wb25lbnQ6IFwiY21wTmFtZVwiIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIGNvbnRyb2xsZXIgZm9yIGEgdmlldyBjb25maWd1cmF0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb258UHJvbWlzZS48RnVuY3Rpb24+fSBSZXR1cm5zIGEgY29udHJvbGxlciwgb3IgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBjb250cm9sbGVyLlxuICAgICAgICAgKi9cbiAgICAgICAgTmcxVmlld0NvbmZpZy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlciA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgcHJvdmlkZXIgPSB0aGlzLnZpZXdEZWNsLmNvbnRyb2xsZXJQcm92aWRlcjtcbiAgICAgICAgICAgIGlmICghY29yZS5pc0luamVjdGFibGUocHJvdmlkZXIpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdEZWNsLmNvbnRyb2xsZXI7XG4gICAgICAgICAgICB2YXIgZGVwcyA9IGNvcmUuc2VydmljZXMuJGluamVjdG9yLmFubm90YXRlKHByb3ZpZGVyKTtcbiAgICAgICAgICAgIHZhciBwcm92aWRlckZuID0gY29yZS5pc0FycmF5KHByb3ZpZGVyKSA/IGNvcmUudGFpbChwcm92aWRlcikgOiBwcm92aWRlcjtcbiAgICAgICAgICAgIHZhciByZXNvbHZhYmxlID0gbmV3IGNvcmUuUmVzb2x2YWJsZSgnJywgcHJvdmlkZXJGbiwgZGVwcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQoY29udGV4dCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOZzFWaWV3Q29uZmlnO1xuICAgIH0oKSk7XG5cbiAgICAvKiogQG1vZHVsZSB2aWV3ICovXG4gICAgLyoqXG4gICAgICogU2VydmljZSB3aGljaCBtYW5hZ2VzIGxvYWRpbmcgb2YgdGVtcGxhdGVzIGZyb20gYSBWaWV3Q29uZmlnLlxuICAgICAqL1xuICAgIHZhciBUZW1wbGF0ZUZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFRlbXBsYXRlRmFjdG9yeSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLl91c2VIdHRwID0gbmcudmVyc2lvbi5taW5vciA8IDM7XG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLiRnZXQgPSBbXG4gICAgICAgICAgICAgICAgJyRodHRwJyxcbiAgICAgICAgICAgICAgICAnJHRlbXBsYXRlQ2FjaGUnLFxuICAgICAgICAgICAgICAgICckaW5qZWN0b3InLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRpbmplY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kdGVtcGxhdGVSZXF1ZXN0ID0gJGluamVjdG9yLmhhcyAmJiAkaW5qZWN0b3IuaGFzKCckdGVtcGxhdGVSZXF1ZXN0JykgJiYgJGluamVjdG9yLmdldCgnJHRlbXBsYXRlUmVxdWVzdCcpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kaHR0cCA9ICRodHRwO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kdGVtcGxhdGVDYWNoZSA9ICR0ZW1wbGF0ZUNhY2hlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS51c2VIdHRwU2VydmljZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fdXNlSHR0cCA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGZyb20gYSBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGNvbmZpZyBDb25maWd1cmF0aW9uIG9iamVjdCBmb3Igd2hpY2ggdG8gbG9hZCBhIHRlbXBsYXRlLlxuICAgICAgICAgKiBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMgYXJlIHNlYXJjaCBpbiB0aGUgc3BlY2lmaWVkIG9yZGVyLCBhbmQgdGhlIGZpcnN0IG9uZVxuICAgICAgICAgKiB0aGF0IGlzIGRlZmluZWQgaXMgdXNlZCB0byBjcmVhdGUgdGhlIHRlbXBsYXRlOlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zICBQYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIHRlbXBsYXRlIGZ1bmN0aW9uLlxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dCBUaGUgcmVzb2x2ZSBjb250ZXh0IGFzc29jaWF0ZWQgd2l0aCB0aGUgdGVtcGxhdGUncyB2aWV3XG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ3xvYmplY3R9ICBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZywgb3IgYSBwcm9taXNlIGZvclxuICAgICAgICAgKiB0aGF0IHN0cmluZyxvciBgbnVsbGAgaWYgbm8gdGVtcGxhdGUgaXMgY29uZmlndXJlZC5cbiAgICAgICAgICovXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUuZnJvbUNvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcsIHBhcmFtcywgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRUZW1wbGF0ZSA9ICc8dWktdmlldz48L3VpLXZpZXc+JztcbiAgICAgICAgICAgIHZhciBhc1RlbXBsYXRlID0gZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gY29yZS5zZXJ2aWNlcy4kcS53aGVuKHJlc3VsdCkudGhlbihmdW5jdGlvbiAoc3RyKSB7IHJldHVybiAoeyB0ZW1wbGF0ZTogc3RyIH0pOyB9KTsgfTtcbiAgICAgICAgICAgIHZhciBhc0NvbXBvbmVudCA9IGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIGNvcmUuc2VydmljZXMuJHEud2hlbihyZXN1bHQpLnRoZW4oZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gKHsgY29tcG9uZW50OiBzdHIgfSk7IH0pOyB9O1xuICAgICAgICAgICAgcmV0dXJuIGNvcmUuaXNEZWZpbmVkKGNvbmZpZy50ZW1wbGF0ZSlcbiAgICAgICAgICAgICAgICA/IGFzVGVtcGxhdGUodGhpcy5mcm9tU3RyaW5nKGNvbmZpZy50ZW1wbGF0ZSwgcGFyYW1zKSlcbiAgICAgICAgICAgICAgICA6IGNvcmUuaXNEZWZpbmVkKGNvbmZpZy50ZW1wbGF0ZVVybClcbiAgICAgICAgICAgICAgICAgICAgPyBhc1RlbXBsYXRlKHRoaXMuZnJvbVVybChjb25maWcudGVtcGxhdGVVcmwsIHBhcmFtcykpXG4gICAgICAgICAgICAgICAgICAgIDogY29yZS5pc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlUHJvdmlkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFzVGVtcGxhdGUodGhpcy5mcm9tUHJvdmlkZXIoY29uZmlnLnRlbXBsYXRlUHJvdmlkZXIsIHBhcmFtcywgY29udGV4dCkpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvcmUuaXNEZWZpbmVkKGNvbmZpZy5jb21wb25lbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhc0NvbXBvbmVudChjb25maWcuY29tcG9uZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29yZS5pc0RlZmluZWQoY29uZmlnLmNvbXBvbmVudFByb3ZpZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFzQ29tcG9uZW50KHRoaXMuZnJvbUNvbXBvbmVudFByb3ZpZGVyKGNvbmZpZy5jb21wb25lbnRQcm92aWRlciwgcGFyYW1zLCBjb250ZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBhc1RlbXBsYXRlKGRlZmF1bHRUZW1wbGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZnJvbSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHN0cmluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHRlbXBsYXRlIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcuXG4gICAgICAgICAqIEBwYXJhbSBwYXJhbXMgUGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfG9iamVjdH0gVGhlIHRlbXBsYXRlIGh0bWwgYXMgYSBzdHJpbmcsIG9yIGEgcHJvbWlzZSBmb3IgdGhhdFxuICAgICAgICAgKiBzdHJpbmcuXG4gICAgICAgICAqL1xuICAgICAgICBUZW1wbGF0ZUZhY3RvcnkucHJvdG90eXBlLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAodGVtcGxhdGUsIHBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuIGNvcmUuaXNGdW5jdGlvbih0ZW1wbGF0ZSkgPyB0ZW1wbGF0ZShwYXJhbXMpIDogdGVtcGxhdGU7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2FkcyBhIHRlbXBsYXRlIGZyb20gdGhlIGEgVVJMIHZpYSBgJGh0dHBgIGFuZCBgJHRlbXBsYXRlQ2FjaGVgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbn0gdXJsIHVybCBvZiB0aGUgdGVtcGxhdGUgdG8gbG9hZCwgb3IgYSBmdW5jdGlvblxuICAgICAgICAgKiB0aGF0IHJldHVybnMgYSB1cmwuXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgUGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSB1cmwgZnVuY3Rpb24uXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ3xQcm9taXNlLjxzdHJpbmc+fSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZywgb3IgYSBwcm9taXNlXG4gICAgICAgICAqIGZvciB0aGF0IHN0cmluZy5cbiAgICAgICAgICovXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUuZnJvbVVybCA9IGZ1bmN0aW9uICh1cmwsIHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKGNvcmUuaXNGdW5jdGlvbih1cmwpKVxuICAgICAgICAgICAgICAgIHVybCA9IHVybChwYXJhbXMpO1xuICAgICAgICAgICAgaWYgKHVybCA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3VzZUh0dHApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kaHR0cFxuICAgICAgICAgICAgICAgICAgICAuZ2V0KHVybCwgeyBjYWNoZTogdGhpcy4kdGVtcGxhdGVDYWNoZSwgaGVhZGVyczogeyBBY2NlcHQ6ICd0ZXh0L2h0bWwnIH0gfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRlbXBsYXRlUmVxdWVzdCh1cmwpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGJ5IGludm9raW5nIGFuIGluamVjdGFibGUgcHJvdmlkZXIgZnVuY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBwcm92aWRlciBGdW5jdGlvbiB0byBpbnZva2UgdmlhIGBsb2NhbHNgXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluamVjdEZuIGEgZnVuY3Rpb24gdXNlZCB0byBpbnZva2UgdGhlIHRlbXBsYXRlIHByb3ZpZGVyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ3xQcm9taXNlLjxzdHJpbmc+fSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZywgb3IgYSBwcm9taXNlXG4gICAgICAgICAqIGZvciB0aGF0IHN0cmluZy5cbiAgICAgICAgICovXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUuZnJvbVByb3ZpZGVyID0gZnVuY3Rpb24gKHByb3ZpZGVyLCBwYXJhbXMsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciBkZXBzID0gY29yZS5zZXJ2aWNlcy4kaW5qZWN0b3IuYW5ub3RhdGUocHJvdmlkZXIpO1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyRm4gPSBjb3JlLmlzQXJyYXkocHJvdmlkZXIpID8gY29yZS50YWlsKHByb3ZpZGVyKSA6IHByb3ZpZGVyO1xuICAgICAgICAgICAgdmFyIHJlc29sdmFibGUgPSBuZXcgY29yZS5SZXNvbHZhYmxlKCcnLCBwcm92aWRlckZuLCBkZXBzKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldChjb250ZXh0KTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBjb21wb25lbnQncyB0ZW1wbGF0ZSBieSBpbnZva2luZyBhbiBpbmplY3RhYmxlIHByb3ZpZGVyIGZ1bmN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcHJvdmlkZXIgRnVuY3Rpb24gdG8gaW52b2tlIHZpYSBgbG9jYWxzYFxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbmplY3RGbiBhIGZ1bmN0aW9uIHVzZWQgdG8gaW52b2tlIHRoZSB0ZW1wbGF0ZSBwcm92aWRlclxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nOiBcIjxjb21wb25lbnQtbmFtZSBpbnB1dDE9Jzo6JHJlc29sdmUuZm9vJz48L2NvbXBvbmVudC1uYW1lPlwiLlxuICAgICAgICAgKi9cbiAgICAgICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tQ29tcG9uZW50UHJvdmlkZXIgPSBmdW5jdGlvbiAocHJvdmlkZXIsIHBhcmFtcywgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGRlcHMgPSBjb3JlLnNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShwcm92aWRlcik7XG4gICAgICAgICAgICB2YXIgcHJvdmlkZXJGbiA9IGNvcmUuaXNBcnJheShwcm92aWRlcikgPyBjb3JlLnRhaWwocHJvdmlkZXIpIDogcHJvdmlkZXI7XG4gICAgICAgICAgICB2YXIgcmVzb2x2YWJsZSA9IG5ldyBjb3JlLlJlc29sdmFibGUoJycsIHByb3ZpZGVyRm4sIGRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0KGNvbnRleHQpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGZyb20gYSBjb21wb25lbnQncyBuYW1lXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaW1wbGVtZW50cyByb3V0ZS10by1jb21wb25lbnQuXG4gICAgICAgICAqIEl0IHdvcmtzIGJ5IHJldHJpZXZpbmcgdGhlIGNvbXBvbmVudCAoZGlyZWN0aXZlKSBtZXRhZGF0YSBmcm9tIHRoZSBpbmplY3Rvci5cbiAgICAgICAgICogSXQgYW5hbHlzZXMgdGhlIGNvbXBvbmVudCdzIGJpbmRpbmdzLCB0aGVuIGNvbnN0cnVjdHMgYSB0ZW1wbGF0ZSB0aGF0IGluc3RhbnRpYXRlcyB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKiBUaGUgdGVtcGxhdGUgd2lyZXMgaW5wdXQgYW5kIG91dHB1dCBiaW5kaW5ncyB0byByZXNvbHZlcyBvciBmcm9tIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gdWlWaWV3IHtvYmplY3R9IFRoZSBwYXJlbnQgdWktdmlldyAoZm9yIGJpbmRpbmcgb3V0cHV0cyB0byBjYWxsYmFja3MpXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBSZXNvbHZlQ29udGV4dCAoZm9yIGJpbmRpbmcgb3V0cHV0cyB0byBjYWxsYmFja3MgcmV0dXJuZWQgZnJvbSByZXNvbHZlcylcbiAgICAgICAgICogQHBhcmFtIGNvbXBvbmVudCB7c3RyaW5nfSBDb21wb25lbnQncyBuYW1lIGluIGNhbWVsIGNhc2UuXG4gICAgICAgICAqIEBwYXJhbSBiaW5kaW5ncyBBbiBvYmplY3QgZGVmaW5pbmcgdGhlIGNvbXBvbmVudCdzIGJpbmRpbmdzOiB7Zm9vOiAnPCd9XG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRlbXBsYXRlIGFzIGEgc3RyaW5nOiBcIjxjb21wb25lbnQtbmFtZSBpbnB1dDE9Jzo6JHJlc29sdmUuZm9vJz48L2NvbXBvbmVudC1uYW1lPlwiLlxuICAgICAgICAgKi9cbiAgICAgICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5tYWtlQ29tcG9uZW50VGVtcGxhdGUgPSBmdW5jdGlvbiAodWlWaWV3LCBjb250ZXh0LCBjb21wb25lbnQsIGJpbmRpbmdzKSB7XG4gICAgICAgICAgICBiaW5kaW5ncyA9IGJpbmRpbmdzIHx8IHt9O1xuICAgICAgICAgICAgLy8gQmluZCBvbmNlIHByZWZpeFxuICAgICAgICAgICAgdmFyIHByZWZpeCA9IG5nLnZlcnNpb24ubWlub3IgPj0gMyA/ICc6OicgOiAnJztcbiAgICAgICAgICAgIC8vIENvbnZlcnQgdG8ga2Vib2IgbmFtZS4gQWRkIHgtIHByZWZpeCBpZiB0aGUgc3RyaW5nIHN0YXJ0cyB3aXRoIGB4LWAgb3IgYGRhdGEtYFxuICAgICAgICAgICAgdmFyIGtlYm9iID0gZnVuY3Rpb24gKGNhbWVsQ2FzZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZWJvYmVkID0gY29yZS5rZWJvYlN0cmluZyhjYW1lbENhc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiAvXih4fGRhdGEpLS8uZXhlYyhrZWJvYmVkKSA/IFwieC1cIiArIGtlYm9iZWQgOiBrZWJvYmVkO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVUcGwgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGlucHV0Lm5hbWUsIHR5cGUgPSBpbnB1dC50eXBlO1xuICAgICAgICAgICAgICAgIHZhciBhdHRyTmFtZSA9IGtlYm9iKG5hbWUpO1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1aS12aWV3IGhhcyBhbiBhdHRyaWJ1dGUgd2hpY2ggbWF0Y2hlcyBhIGJpbmRpbmcgb24gdGhlIHJvdXRlZCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAvLyB0aGVuIHBhc3MgdGhhdCBhdHRyaWJ1dGUgdGhyb3VnaCB0byB0aGUgcm91dGVkIGNvbXBvbmVudCB0ZW1wbGF0ZS5cbiAgICAgICAgICAgICAgICAvLyBQcmVmZXIgdWktdmlldyB3aXJlZCBtYXBwaW5ncyB0byByZXNvbHZlIGRhdGEsIHVubGVzcyB0aGUgcmVzb2x2ZSB3YXMgZXhwbGljaXRseSBib3VuZCB1c2luZyBgYmluZGluZ3M6YFxuICAgICAgICAgICAgICAgIGlmICh1aVZpZXcuYXR0cihhdHRyTmFtZSkgJiYgIWJpbmRpbmdzW25hbWVdKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0ck5hbWUgKyBcIj0nXCIgKyB1aVZpZXcuYXR0cihhdHRyTmFtZSkgKyBcIidcIjtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZU5hbWUgPSBiaW5kaW5nc1tuYW1lXSB8fCBuYW1lO1xuICAgICAgICAgICAgICAgIC8vIFByZS1ldmFsdWF0ZSB0aGUgZXhwcmVzc2lvbiBmb3IgXCJAXCIgYmluZGluZ3MgYnkgZW5jbG9zaW5nIGluIHt7IH19XG4gICAgICAgICAgICAgICAgLy8gc29tZS1hdHRyPVwie3sgOjokcmVzb2x2ZS5zb21lUmVzb2x2ZU5hbWUgfX1cIlxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnQCcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRyTmFtZSArIFwiPSd7e1wiICsgcHJlZml4ICsgXCIkcmVzb2x2ZS5cIiArIHJlc29sdmVOYW1lICsgXCJ9fSdcIjtcbiAgICAgICAgICAgICAgICAvLyBXaXJlIFwiJlwiIGNhbGxiYWNrcyB0byByZXNvbHZlcyB0aGF0IHJldHVybiBhIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSByZXN1bHQgb2YgdGhlIHJlc29sdmUgKHNob3VsZCBiZSBhIGZ1bmN0aW9uKSBhbmQgYW5ub3RhdGUgaXQgdG8gZ2V0IGl0cyBhcmd1bWVudHMuXG4gICAgICAgICAgICAgICAgLy8gc29tZS1hdHRyPVwiJHJlc29sdmUuc29tZVJlc29sdmVSZXN1bHROYW1lKGZvbywgYmFyKVwiXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICcmJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gY29udGV4dC5nZXRSZXNvbHZhYmxlKHJlc29sdmVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gcmVzICYmIHJlcy5kYXRhO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IChmbiAmJiBjb3JlLnNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShmbikpIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2NvdW50IGZvciBhcnJheSBzdHlsZSBpbmplY3Rpb24sIGkuZS4sIFsnZm9vJywgZnVuY3Rpb24oZm9vKSB7fV1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5SWR4U3RyID0gY29yZS5pc0FycmF5KGZuKSA/IFwiW1wiICsgKGZuLmxlbmd0aCAtIDEpICsgXCJdXCIgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJOYW1lICsgXCI9JyRyZXNvbHZlLlwiICsgcmVzb2x2ZU5hbWUgKyBhcnJheUlkeFN0ciArIFwiKFwiICsgYXJncy5qb2luKCcsJykgKyBcIiknXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHNvbWUtYXR0cj1cIjo6JHJlc29sdmUuc29tZVJlc29sdmVOYW1lXCJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXR0ck5hbWUgKyBcIj0nXCIgKyBwcmVmaXggKyBcIiRyZXNvbHZlLlwiICsgcmVzb2x2ZU5hbWUgKyBcIidcIjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgYXR0cnMgPSBnZXRDb21wb25lbnRCaW5kaW5ncyhjb21wb25lbnQpXG4gICAgICAgICAgICAgICAgLm1hcChhdHRyaWJ1dGVUcGwpXG4gICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgICAgICAgIHZhciBrZWJvYk5hbWUgPSBrZWJvYihjb21wb25lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIFwiPFwiICsga2Vib2JOYW1lICsgXCIgXCIgKyBhdHRycyArIFwiPjwvXCIgKyBrZWJvYk5hbWUgKyBcIj5cIjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRlbXBsYXRlRmFjdG9yeTtcbiAgICB9KCkpO1xuICAgIC8vIEdldHMgYWxsIHRoZSBkaXJlY3RpdmUocyknIGlucHV0cyAoJ0AnLCAnPScsIGFuZCAnPCcpIGFuZCBvdXRwdXRzICgnJicpXG4gICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50QmluZGluZ3MobmFtZSkge1xuICAgICAgICB2YXIgY21wRGVmcyA9IGNvcmUuc2VydmljZXMuJGluamVjdG9yLmdldChuYW1lICsgJ0RpcmVjdGl2ZScpOyAvLyBjb3VsZCBiZSBtdWx0aXBsZVxuICAgICAgICBpZiAoIWNtcERlZnMgfHwgIWNtcERlZnMubGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGZpbmQgY29tcG9uZW50IG5hbWVkICdcIiArIG5hbWUgKyBcIidcIik7XG4gICAgICAgIHJldHVybiBjbXBEZWZzLm1hcChnZXRCaW5kaW5ncykucmVkdWNlKGNvcmUudW5uZXN0UiwgW10pO1xuICAgIH1cbiAgICAvLyBHaXZlbiBhIGRpcmVjdGl2ZSBkZWZpbml0aW9uLCBmaW5kIGl0cyBvYmplY3QgaW5wdXQgYXR0cmlidXRlc1xuICAgIC8vIFVzZSBkaWZmZXJlbnQgcHJvcGVydGllcywgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIGRpcmVjdGl2ZSAoY29tcG9uZW50LCBiaW5kVG9Db250cm9sbGVyLCBub3JtYWwpXG4gICAgdmFyIGdldEJpbmRpbmdzID0gZnVuY3Rpb24gKGRlZikge1xuICAgICAgICBpZiAoY29yZS5pc09iamVjdChkZWYuYmluZFRvQ29udHJvbGxlcikpXG4gICAgICAgICAgICByZXR1cm4gc2NvcGVCaW5kaW5ncyhkZWYuYmluZFRvQ29udHJvbGxlcik7XG4gICAgICAgIHJldHVybiBzY29wZUJpbmRpbmdzKGRlZi5zY29wZSk7XG4gICAgfTtcbiAgICAvLyBmb3IgbmcgMS4yIHN0eWxlLCBwcm9jZXNzIHRoZSBzY29wZTogeyBpbnB1dDogXCI9Zm9vXCIgfVxuICAgIC8vIGZvciBuZyAxLjMgdGhyb3VnaCBuZyAxLjUsIHByb2Nlc3MgdGhlIGNvbXBvbmVudCdzIGJpbmRUb0NvbnRyb2xsZXI6IHsgaW5wdXQ6IFwiPWZvb1wiIH0gb2JqZWN0XG4gICAgdmFyIHNjb3BlQmluZGluZ3MgPSBmdW5jdGlvbiAoYmluZGluZ3NPYmopIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGJpbmRpbmdzT2JqIHx8IHt9KVxuICAgICAgICAgICAgLy8gWyAnaW5wdXQnLCBbICc9Zm9vJywgJz0nLCAnZm9vJyBdIF1cbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gW2tleSwgL14oWz08QCZdKVs/XT8oLiopLy5leGVjKGJpbmRpbmdzT2JqW2tleV0pXTsgfSlcbiAgICAgICAgICAgIC8vIHNraXAgbWFsZm9ybWVkIHZhbHVlc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAodHVwbGUpIHsgcmV0dXJuIGNvcmUuaXNEZWZpbmVkKHR1cGxlKSAmJiBjb3JlLmlzQXJyYXkodHVwbGVbMV0pOyB9KVxuICAgICAgICAgICAgLy8geyBuYW1lOiAoJ2ZvbycgfHwgJ2lucHV0JyksIHR5cGU6ICc9JyB9XG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gKHsgbmFtZTogdHVwbGVbMV1bMl0gfHwgdHVwbGVbMF0sIHR5cGU6IHR1cGxlWzFdWzFdIH0pOyB9KTtcbiAgICB9O1xuXG4gICAgLyoqIEBtb2R1bGUgbmcxICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuICAgIC8qKlxuICAgICAqIFRoZSBBbmd1bGFyIDEgYFN0YXRlUHJvdmlkZXJgXG4gICAgICpcbiAgICAgKiBUaGUgYCRzdGF0ZVByb3ZpZGVyYCB3b3JrcyBzaW1pbGFyIHRvIEFuZ3VsYXIncyB2MSByb3V0ZXIsIGJ1dCBpdCBmb2N1c2VzIHB1cmVseVxuICAgICAqIG9uIHN0YXRlLlxuICAgICAqXG4gICAgICogQSBzdGF0ZSBjb3JyZXNwb25kcyB0byBhIFwicGxhY2VcIiBpbiB0aGUgYXBwbGljYXRpb24gaW4gdGVybXMgb2YgdGhlIG92ZXJhbGwgVUkgYW5kXG4gICAgICogbmF2aWdhdGlvbi4gQSBzdGF0ZSBkZXNjcmliZXMgKHZpYSB0aGUgY29udHJvbGxlciAvIHRlbXBsYXRlIC8gdmlldyBwcm9wZXJ0aWVzKSB3aGF0XG4gICAgICogdGhlIFVJIGxvb2tzIGxpa2UgYW5kIGRvZXMgYXQgdGhhdCBwbGFjZS5cbiAgICAgKlxuICAgICAqIFN0YXRlcyBvZnRlbiBoYXZlIHRoaW5ncyBpbiBjb21tb24sIGFuZCB0aGUgcHJpbWFyeSB3YXkgb2YgZmFjdG9yaW5nIG91dCB0aGVzZVxuICAgICAqIGNvbW1vbmFsaXRpZXMgaW4gdGhpcyBtb2RlbCBpcyB2aWEgdGhlIHN0YXRlIGhpZXJhcmNoeSwgaS5lLiBwYXJlbnQvY2hpbGQgc3RhdGVzIGFrYVxuICAgICAqIG5lc3RlZCBzdGF0ZXMuXG4gICAgICpcbiAgICAgKiBUaGUgYCRzdGF0ZVByb3ZpZGVyYCBwcm92aWRlcyBpbnRlcmZhY2VzIHRvIGRlY2xhcmUgdGhlc2Ugc3RhdGVzIGZvciB5b3VyIGFwcC5cbiAgICAgKi9cbiAgICB2YXIgU3RhdGVQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU3RhdGVQcm92aWRlcihzdGF0ZVJlZ2lzdHJ5LCBzdGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVSZWdpc3RyeSA9IHN0YXRlUmVnaXN0cnk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlU2VydmljZSA9IHN0YXRlU2VydmljZTtcbiAgICAgICAgICAgIGNvcmUuY3JlYXRlUHJveHlGdW5jdGlvbnMoY29yZS52YWwoU3RhdGVQcm92aWRlci5wcm90b3R5cGUpLCB0aGlzLCBjb3JlLnZhbCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29yYXRlcyBzdGF0ZXMgd2hlbiB0aGV5IGFyZSByZWdpc3RlcmVkXG4gICAgICAgICAqXG4gICAgICAgICAqIEFsbG93cyB5b3UgdG8gZXh0ZW5kIChjYXJlZnVsbHkpIG9yIG92ZXJyaWRlIChhdCB5b3VyIG93biBwZXJpbCkgdGhlXG4gICAgICAgICAqIGBzdGF0ZUJ1aWxkZXJgIG9iamVjdCB1c2VkIGludGVybmFsbHkgYnkgW1tTdGF0ZVJlZ2lzdHJ5XV0uXG4gICAgICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gYWRkIGN1c3RvbSBmdW5jdGlvbmFsaXR5IHRvIHVpLXJvdXRlcixcbiAgICAgICAgICogZm9yIGV4YW1wbGUgaW5mZXJyaW5nIHRlbXBsYXRlVXJsIGJhc2VkIG9uIHRoZSBzdGF0ZSBuYW1lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuIHBhc3Npbmcgb25seSBhIG5hbWUsIGl0IHJldHVybnMgdGhlIGN1cnJlbnQgKG9yaWdpbmFsIG9yIGRlY29yYXRlZCkgYnVpbGRlclxuICAgICAgICAgKiBmdW5jdGlvbiB0aGF0IG1hdGNoZXMgYG5hbWVgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYnVpbGRlciBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgZGVjb3JhdGVkIGFyZSBsaXN0ZWQgYmVsb3cuIFRob3VnaCBub3QgYWxsXG4gICAgICAgICAqIG5lY2Vzc2FyaWx5IGhhdmUgYSBnb29kIHVzZSBjYXNlIGZvciBkZWNvcmF0aW9uLCB0aGF0IGlzIHVwIHRvIHlvdSB0byBkZWNpZGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEluIGFkZGl0aW9uLCB1c2VycyBjYW4gYXR0YWNoIGN1c3RvbSBkZWNvcmF0b3JzLCB3aGljaCB3aWxsIGdlbmVyYXRlIG5ld1xuICAgICAgICAgKiBwcm9wZXJ0aWVzIHdpdGhpbiB0aGUgc3RhdGUncyBpbnRlcm5hbCBkZWZpbml0aW9uLiBUaGVyZSBpcyBjdXJyZW50bHkgbm8gY2xlYXJcbiAgICAgICAgICogdXNlLWNhc2UgZm9yIHRoaXMgYmV5b25kIGFjY2Vzc2luZyBpbnRlcm5hbCBzdGF0ZXMgKGkuZS4gJHN0YXRlLiRjdXJyZW50KSxcbiAgICAgICAgICogaG93ZXZlciwgZXhwZWN0IHRoaXMgdG8gYmVjb21lIGluY3JlYXNpbmdseSByZWxldmFudCBhcyB3ZSBpbnRyb2R1Y2UgYWRkaXRpb25hbFxuICAgICAgICAgKiBtZXRhLXByb2dyYW1taW5nIGZlYXR1cmVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiAqKldhcm5pbmcqKjogRGVjb3JhdG9ycyBzaG91bGQgbm90IGJlIGludGVyZGVwZW5kZW50IGJlY2F1c2UgdGhlIG9yZGVyIG9mXG4gICAgICAgICAqIGV4ZWN1dGlvbiBvZiB0aGUgYnVpbGRlciBmdW5jdGlvbnMgaW4gbm9uLWRldGVybWluaXN0aWMuIEJ1aWxkZXIgZnVuY3Rpb25zXG4gICAgICAgICAqIHNob3VsZCBvbmx5IGJlIGRlcGVuZGVudCBvbiB0aGUgc3RhdGUgZGVmaW5pdGlvbiBvYmplY3QgYW5kIHN1cGVyIGZ1bmN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKlxuICAgICAgICAgKiBFeGlzdGluZyBidWlsZGVyIGZ1bmN0aW9ucyBhbmQgY3VycmVudCByZXR1cm4gdmFsdWVzOlxuICAgICAgICAgKlxuICAgICAgICAgKiAtICoqcGFyZW50KiogYHtvYmplY3R9YCAtIHJldHVybnMgdGhlIHBhcmVudCBzdGF0ZSBvYmplY3QuXG4gICAgICAgICAqIC0gKipkYXRhKiogYHtvYmplY3R9YCAtIHJldHVybnMgc3RhdGUgZGF0YSwgaW5jbHVkaW5nIGFueSBpbmhlcml0ZWQgZGF0YSB0aGF0IGlzIG5vdFxuICAgICAgICAgKiAgIG92ZXJyaWRkZW4gYnkgb3duIHZhbHVlcyAoaWYgYW55KS5cbiAgICAgICAgICogLSAqKnVybCoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGEge0BsaW5rIHVpLnJvdXRlci51dGlsLnR5cGU6VXJsTWF0Y2hlciBVcmxNYXRjaGVyfVxuICAgICAgICAgKiAgIG9yIGBudWxsYC5cbiAgICAgICAgICogLSAqKm5hdmlnYWJsZSoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGNsb3Nlc3QgYW5jZXN0b3Igc3RhdGUgdGhhdCBoYXMgYSBVUkwgKGFrYSBpc1xuICAgICAgICAgKiAgIG5hdmlnYWJsZSkuXG4gICAgICAgICAqIC0gKipwYXJhbXMqKiBge29iamVjdH1gIC0gcmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZSBwYXJhbXMgdGhhdCBhcmUgZW5zdXJlZCB0b1xuICAgICAgICAgKiAgIGJlIGEgc3VwZXItc2V0IG9mIHBhcmVudCdzIHBhcmFtcy5cbiAgICAgICAgICogLSAqKnZpZXdzKiogYHtvYmplY3R9YCAtIHJldHVybnMgYSB2aWV3cyBvYmplY3Qgd2hlcmUgZWFjaCBrZXkgaXMgYW4gYWJzb2x1dGUgdmlld1xuICAgICAgICAgKiAgIG5hbWUgKGkuZS4gXCJ2aWV3TmFtZUBzdGF0ZU5hbWVcIikgYW5kIGVhY2ggdmFsdWUgaXMgdGhlIGNvbmZpZyBvYmplY3RcbiAgICAgICAgICogICAodGVtcGxhdGUsIGNvbnRyb2xsZXIpIGZvciB0aGUgdmlldy4gRXZlbiB3aGVuIHlvdSBkb24ndCB1c2UgdGhlIHZpZXdzIG9iamVjdFxuICAgICAgICAgKiAgIGV4cGxpY2l0bHkgb24gYSBzdGF0ZSBjb25maWcsIG9uZSBpcyBzdGlsbCBjcmVhdGVkIGZvciB5b3UgaW50ZXJuYWxseS5cbiAgICAgICAgICogICBTbyBieSBkZWNvcmF0aW5nIHRoaXMgYnVpbGRlciBmdW5jdGlvbiB5b3UgaGF2ZSBhY2Nlc3MgdG8gZGVjb3JhdGluZyB0ZW1wbGF0ZVxuICAgICAgICAgKiAgIGFuZCBjb250cm9sbGVyIHByb3BlcnRpZXMuXG4gICAgICAgICAqIC0gKipvd25QYXJhbXMqKiBge29iamVjdH1gIC0gcmV0dXJucyBhbiBhcnJheSBvZiBwYXJhbXMgdGhhdCBiZWxvbmcgdG8gdGhlIHN0YXRlLFxuICAgICAgICAgKiAgIG5vdCBpbmNsdWRpbmcgYW55IHBhcmFtcyBkZWZpbmVkIGJ5IGFuY2VzdG9yIHN0YXRlcy5cbiAgICAgICAgICogLSAqKnBhdGgqKiBge3N0cmluZ31gIC0gcmV0dXJucyB0aGUgZnVsbCBwYXRoIGZyb20gdGhlIHJvb3QgZG93biB0byB0aGlzIHN0YXRlLlxuICAgICAgICAgKiAgIE5lZWRlZCBmb3Igc3RhdGUgYWN0aXZhdGlvbi5cbiAgICAgICAgICogLSAqKmluY2x1ZGVzKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gb2JqZWN0IHRoYXQgaW5jbHVkZXMgZXZlcnkgc3RhdGUgdGhhdFxuICAgICAgICAgKiAgIHdvdWxkIHBhc3MgYSBgJHN0YXRlLmluY2x1ZGVzKClgIHRlc3QuXG4gICAgICAgICAqXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgICAgICogT3ZlcnJpZGUgdGhlIGludGVybmFsICd2aWV3cycgYnVpbGRlciB3aXRoIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgc3RhdGVcbiAgICAgICAgICogZGVmaW5pdGlvbiwgYW5kIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnRlcm5hbCBmdW5jdGlvbiBiZWluZyBvdmVycmlkZGVuOlxuICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgKiAkc3RhdGVQcm92aWRlci5kZWNvcmF0b3IoJ3ZpZXdzJywgZnVuY3Rpb24gKHN0YXRlLCBwYXJlbnQpIHtcbiAgICAgICAgICogICBsZXQgcmVzdWx0ID0ge30sXG4gICAgICAgICAqICAgICAgIHZpZXdzID0gcGFyZW50KHN0YXRlKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICBhbmd1bGFyLmZvckVhY2godmlld3MsIGZ1bmN0aW9uIChjb25maWcsIG5hbWUpIHtcbiAgICAgICAgICogICAgIGxldCBhdXRvTmFtZSA9IChzdGF0ZS5uYW1lICsgJy4nICsgbmFtZSkucmVwbGFjZSgnLicsICcvJyk7XG4gICAgICAgICAqICAgICBjb25maWcudGVtcGxhdGVVcmwgPSBjb25maWcudGVtcGxhdGVVcmwgfHwgJy9wYXJ0aWFscy8nICsgYXV0b05hbWUgKyAnLmh0bWwnO1xuICAgICAgICAgKiAgICAgcmVzdWx0W25hbWVdID0gY29uZmlnO1xuICAgICAgICAgKiAgIH0pO1xuICAgICAgICAgKiAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKlxuICAgICAgICAgKiAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICogICB2aWV3czoge1xuICAgICAgICAgKiAgICAgJ2NvbnRhY3QubGlzdCc6IHsgY29udHJvbGxlcjogJ0xpc3RDb250cm9sbGVyJyB9LFxuICAgICAgICAgKiAgICAgJ2NvbnRhY3QuaXRlbSc6IHsgY29udHJvbGxlcjogJ0l0ZW1Db250cm9sbGVyJyB9XG4gICAgICAgICAqICAgfVxuICAgICAgICAgKiB9KTtcbiAgICAgICAgICogYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqXG4gICAgICAgICAqIGBgYGpzXG4gICAgICAgICAqIC8vIEF1dG8tcG9wdWxhdGVzIGxpc3QgYW5kIGl0ZW0gdmlld3Mgd2l0aCAvcGFydGlhbHMvaG9tZS9jb250YWN0L2xpc3QuaHRtbCxcbiAgICAgICAgICogLy8gYW5kIC9wYXJ0aWFscy9ob21lL2NvbnRhY3QvaXRlbS5odG1sLCByZXNwZWN0aXZlbHkuXG4gICAgICAgICAqICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgKiBgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGJ1aWxkZXIgZnVuY3Rpb24gdG8gZGVjb3JhdGUuXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBmdW5jIEEgZnVuY3Rpb24gdGhhdCBpcyByZXNwb25zaWJsZSBmb3IgZGVjb3JhdGluZyB0aGUgb3JpZ2luYWxcbiAgICAgICAgICogYnVpbGRlciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzOlxuICAgICAgICAgKlxuICAgICAgICAgKiAgIC0gYHtvYmplY3R9YCAtIHN0YXRlIC0gVGhlIHN0YXRlIGNvbmZpZyBvYmplY3QuXG4gICAgICAgICAqICAgLSBge29iamVjdH1gIC0gc3VwZXIgLSBUaGUgb3JpZ2luYWwgYnVpbGRlciBmdW5jdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0fSAkc3RhdGVQcm92aWRlciAtICRzdGF0ZVByb3ZpZGVyIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdGF0ZVByb3ZpZGVyLnByb3RvdHlwZS5kZWNvcmF0b3IgPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IobmFtZSwgZnVuYykgfHwgdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgU3RhdGVQcm92aWRlci5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbikge1xuICAgICAgICAgICAgaWYgKGNvcmUuaXNPYmplY3QobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uID0gbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlUmVnaXN0cnkucmVnaXN0ZXIoZGVmaW5pdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVycyBhbiBpbnZhbGlkIHN0YXRlIGhhbmRsZXJcbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRvIFtbU3RhdGVTZXJ2aWNlLm9uSW52YWxpZF1dIGZvciBuZzEuXG4gICAgICAgICAqL1xuICAgICAgICBTdGF0ZVByb3ZpZGVyLnByb3RvdHlwZS5vbkludmFsaWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlU2VydmljZS5vbkludmFsaWQoY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RhdGVQcm92aWRlcjtcbiAgICB9KCkpO1xuXG4gICAgLyoqIEBtb2R1bGUgbmcxICovIC8qKiAqL1xuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgYSBbW1N0YXRlQnVpbGRlci5idWlsZGVyXV0gZnVuY3Rpb24gZm9yIGFuZ3VsYXIxIGBvbkVudGVyYCwgYG9uRXhpdGAsXG4gICAgICogYG9uUmV0YWluYCBjYWxsYmFjayBob29rcyBvbiBhIFtbTmcxU3RhdGVEZWNsYXJhdGlvbl1dLlxuICAgICAqXG4gICAgICogV2hlbiB0aGUgW1tTdGF0ZUJ1aWxkZXJdXSBidWlsZHMgYSBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0IGZyb20gYSByYXcgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoaXMgYnVpbGRlclxuICAgICAqIGVuc3VyZXMgdGhhdCB0aG9zZSBob29rcyBhcmUgaW5qZWN0YWJsZSBmb3IgQHVpcm91dGVyL2FuZ3VsYXJqcyAobmcxKS5cbiAgICAgKi9cbiAgICB2YXIgZ2V0U3RhdGVIb29rQnVpbGRlciA9IGZ1bmN0aW9uIChob29rTmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3RhdGVIb29rQnVpbGRlcihzdGF0ZU9iamVjdCwgcGFyZW50Rm4pIHtcbiAgICAgICAgICAgIHZhciBob29rID0gc3RhdGVPYmplY3RbaG9va05hbWVdO1xuICAgICAgICAgICAgdmFyIHBhdGhuYW1lID0gaG9va05hbWUgPT09ICdvbkV4aXQnID8gJ2Zyb20nIDogJ3RvJztcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlY29yYXRlZE5nMUhvb2sodHJhbnMsIHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdmVDb250ZXh0ID0gbmV3IGNvcmUuUmVzb2x2ZUNvbnRleHQodHJhbnMudHJlZUNoYW5nZXMocGF0aG5hbWUpKTtcbiAgICAgICAgICAgICAgICB2YXIgc3ViQ29udGV4dCA9IHJlc29sdmVDb250ZXh0LnN1YkNvbnRleHQoc3RhdGUuJCRzdGF0ZSgpKTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxzID0gY29yZS5leHRlbmQoZ2V0TG9jYWxzKHN1YkNvbnRleHQpLCB7ICRzdGF0ZSQ6IHN0YXRlLCAkdHJhbnNpdGlvbiQ6IHRyYW5zIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb3JlLnNlcnZpY2VzLiRpbmplY3Rvci5pbnZva2UoaG9vaywgdGhpcywgbG9jYWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBob29rID8gZGVjb3JhdGVkTmcxSG9vayA6IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICogQG1vZHVsZSBuZzFcbiAgICAgKi8gLyoqICovXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBVSS1Sb3V0ZXIgTG9jYXRpb25TZXJ2aWNlcyBhbmQgTG9jYXRpb25Db25maWcgdXNpbmcgQW5ndWxhciAxJ3MgJGxvY2F0aW9uIHNlcnZpY2VcbiAgICAgKi9cbiAgICB2YXIgTmcxTG9jYXRpb25TZXJ2aWNlcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTmcxTG9jYXRpb25TZXJ2aWNlcygkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAgICAgLy8gLm9uQ2hhbmdlKCkgcmVnaXN0cnlcbiAgICAgICAgICAgIHRoaXMuX3VybExpc3RlbmVycyA9IFtdO1xuICAgICAgICAgICAgdGhpcy4kbG9jYXRpb25Qcm92aWRlciA9ICRsb2NhdGlvblByb3ZpZGVyO1xuICAgICAgICAgICAgdmFyIF9scCA9IGNvcmUudmFsKCRsb2NhdGlvblByb3ZpZGVyKTtcbiAgICAgICAgICAgIGNvcmUuY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xwLCB0aGlzLCBfbHAsIFsnaGFzaFByZWZpeCddKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQXBwbHlzIG5nMS1zcGVjaWZpYyBwYXRoIHBhcmFtZXRlciBlbmNvZGluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgQW5ndWxhciAxIGAkbG9jYXRpb25gIHNlcnZpY2UgaXMgYSBiaXQgd2VpcmQuXG4gICAgICAgICAqIEl0IGRvZXNuJ3QgYWxsb3cgc2xhc2hlcyB0byBiZSBlbmNvZGVkL2RlY29kZWQgYmktZGlyZWN0aW9uYWxseS5cbiAgICAgICAgICpcbiAgICAgICAgICogU2VlIHRoZSB3cml0ZXVwIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL3VpLXJvdXRlci9pc3N1ZXMvMjU5OFxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGNvZGUgcGF0Y2hlcyB0aGUgYHBhdGhgIHBhcmFtZXRlciB0eXBlIHNvIGl0IGVuY29kZWQvZGVjb2RlcyBzbGFzaGVzIGFzIH4yRlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcm91dGVyXG4gICAgICAgICAqL1xuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLm1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGUgPSBmdW5jdGlvbiAocm91dGVyKSB7XG4gICAgICAgICAgICB2YXIgcGF0aFR5cGUgPSByb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkudHlwZSgncGF0aCcpO1xuICAgICAgICAgICAgcGF0aFR5cGUuZW5jb2RlID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geCAhPSBudWxsID8geC50b1N0cmluZygpLnJlcGxhY2UoLyh+fFxcLykvZywgZnVuY3Rpb24gKG0pIHsgcmV0dXJuICh7ICd+JzogJ35+JywgJy8nOiAnfjJGJyB9W21dKTsgfSkgOiB4O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHBhdGhUeXBlLmRlY29kZSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHggIT0gbnVsbCA/IHgudG9TdHJpbmcoKS5yZXBsYWNlKC8ofn58fjJGKS9nLCBmdW5jdGlvbiAobSkgeyByZXR1cm4gKHsgJ35+JzogJ34nLCAnfjJGJzogJy8nIH1bbV0pOyB9KSA6IHg7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuX3VybExpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb3JlLnJlbW92ZUZyb20oX3RoaXMuX3VybExpc3RlbmVycykoY2FsbGJhY2spOyB9O1xuICAgICAgICB9O1xuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS5odG1sNU1vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaHRtbDVNb2RlID0gdGhpcy4kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoKTtcbiAgICAgICAgICAgIGh0bWw1TW9kZSA9IGNvcmUuaXNPYmplY3QoaHRtbDVNb2RlKSA/IGh0bWw1TW9kZS5lbmFibGVkIDogaHRtbDVNb2RlO1xuICAgICAgICAgICAgcmV0dXJuIGh0bWw1TW9kZSAmJiB0aGlzLiRzbmlmZmVyLmhpc3Rvcnk7XG4gICAgICAgIH07XG4gICAgICAgIE5nMUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLmJhc2VIcmVmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VIcmVmIHx8ICh0aGlzLl9iYXNlSHJlZiA9IHRoaXMuJGJyb3dzZXIuYmFzZUhyZWYoKSB8fCB0aGlzLiR3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS51cmwgPSBmdW5jdGlvbiAobmV3VXJsLCByZXBsYWNlLCBzdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHJlcGxhY2UgPT09IHZvaWQgMCkgeyByZXBsYWNlID0gZmFsc2U7IH1cbiAgICAgICAgICAgIGlmIChjb3JlLmlzRGVmaW5lZChuZXdVcmwpKVxuICAgICAgICAgICAgICAgIHRoaXMuJGxvY2F0aW9uLnVybChuZXdVcmwpO1xuICAgICAgICAgICAgaWYgKHJlcGxhY2UpXG4gICAgICAgICAgICAgICAgdGhpcy4kbG9jYXRpb24ucmVwbGFjZSgpO1xuICAgICAgICAgICAgaWYgKHN0YXRlKVxuICAgICAgICAgICAgICAgIHRoaXMuJGxvY2F0aW9uLnN0YXRlKHN0YXRlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRsb2NhdGlvbi51cmwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUuX3J1bnRpbWVTZXJ2aWNlcyA9IGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzbmlmZmVyLCAkYnJvd3NlciwgJHdpbmRvdykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuJGxvY2F0aW9uID0gJGxvY2F0aW9uO1xuICAgICAgICAgICAgdGhpcy4kc25pZmZlciA9ICRzbmlmZmVyO1xuICAgICAgICAgICAgdGhpcy4kYnJvd3NlciA9ICRicm93c2VyO1xuICAgICAgICAgICAgdGhpcy4kd2luZG93ID0gJHdpbmRvdztcbiAgICAgICAgICAgIC8vIEJpbmQgJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcyB0byB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgaW4gTG9jYXRpb25TZXJ2aWNlLm9uQ2hhbmdlXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uIChldnQpIHsgcmV0dXJuIF90aGlzLl91cmxMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuKGV2dCk7IH0pOyB9KTtcbiAgICAgICAgICAgIHZhciBfbG9jID0gY29yZS52YWwoJGxvY2F0aW9uKTtcbiAgICAgICAgICAgIC8vIEJpbmQgdGhlc2UgTG9jYXRpb25TZXJ2aWNlIGZ1bmN0aW9ucyB0byAkbG9jYXRpb25cbiAgICAgICAgICAgIGNvcmUuY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xvYywgdGhpcywgX2xvYywgWydyZXBsYWNlJywgJ3BhdGgnLCAnc2VhcmNoJywgJ2hhc2gnXSk7XG4gICAgICAgICAgICAvLyBCaW5kIHRoZXNlIExvY2F0aW9uQ29uZmlnIGZ1bmN0aW9ucyB0byAkbG9jYXRpb25cbiAgICAgICAgICAgIGNvcmUuY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xvYywgdGhpcywgX2xvYywgWydwb3J0JywgJ3Byb3RvY29sJywgJ2hvc3QnXSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOZzFMb2NhdGlvblNlcnZpY2VzO1xuICAgIH0oKSk7XG5cbiAgICAvKiogQG1vZHVsZSB1cmwgKi8gLyoqICovXG4gICAgLyoqXG4gICAgICogTWFuYWdlcyBydWxlcyBmb3IgY2xpZW50LXNpZGUgVVJMXG4gICAgICpcbiAgICAgKiAjIyMgRGVwcmVjYXRpb24gd2FybmluZzpcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG5vdyBjb25zaWRlcmVkIHRvIGJlIGFuIGludGVybmFsIEFQSVxuICAgICAqIFVzZSB0aGUgW1tVcmxTZXJ2aWNlXV0gaW5zdGVhZC5cbiAgICAgKiBGb3IgY29uZmlndXJpbmcgVVJMIHJ1bGVzLCB1c2UgdGhlIFtbVXJsUnVsZXNBcGldXSB3aGljaCBjYW4gYmUgZm91bmQgYXMgW1tVcmxTZXJ2aWNlLnJ1bGVzXV0uXG4gICAgICpcbiAgICAgKiBUaGlzIGNsYXNzIG1hbmFnZXMgdGhlIHJvdXRlciBydWxlcyBmb3Igd2hhdCB0byBkbyB3aGVuIHRoZSBVUkwgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIFRoaXMgcHJvdmlkZXIgcmVtYWlucyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHZhciBVcmxSb3V0ZXJQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgZnVuY3Rpb24gVXJsUm91dGVyUHJvdmlkZXIocm91dGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgICAgICB0aGlzLl91cmxSb3V0ZXIgPSByb3V0ZXIudXJsUm91dGVyO1xuICAgICAgICB9XG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLmluamVjdGFibGVIYW5kbGVyID0gZnVuY3Rpb24gKHJvdXRlciwgaGFuZGxlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gY29yZS5zZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKGhhbmRsZXIsIG51bGwsIHsgJG1hdGNoOiBtYXRjaCwgJHN0YXRlUGFyYW1zOiByb3V0ZXIuZ2xvYmFscy5wYXJhbXMgfSk7IH07XG4gICAgICAgIH07XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVybFJvdXRlciA9IHRoaXMuX3VybFJvdXRlcjtcbiAgICAgICAgICAgIHVybFJvdXRlci51cGRhdGUodHJ1ZSk7XG4gICAgICAgICAgICBpZiAoIXVybFJvdXRlci5pbnRlcmNlcHREZWZlcnJlZClcbiAgICAgICAgICAgICAgICB1cmxSb3V0ZXIubGlzdGVuKCk7XG4gICAgICAgICAgICByZXR1cm4gdXJsUm91dGVyO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgdXJsIGhhbmRsZXIgZnVuY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFJlZ2lzdGVycyBhIGxvdyBsZXZlbCB1cmwgaGFuZGxlciAoYSBgcnVsZWApLlxuICAgICAgICAgKiBBIHJ1bGUgZGV0ZWN0cyBzcGVjaWZpYyBVUkwgcGF0dGVybnMgYW5kIHJldHVybnMgYSByZWRpcmVjdCwgb3IgcGVyZm9ybXMgc29tZSBhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIGEgcnVsZSByZXR1cm5zIGEgc3RyaW5nLCB0aGUgVVJMIGlzIHJlcGxhY2VkIHdpdGggdGhlIHN0cmluZywgYW5kIGFsbCBydWxlcyBhcmUgZmlyZWQgYWdhaW4uXG4gICAgICAgICAqXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgICAgICogYGBganNcbiAgICAgICAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlci5yb3V0ZXInXSk7XG4gICAgICAgICAqXG4gICAgICAgICAqIGFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICAgICAgKiAgIC8vIEhlcmUncyBhbiBleGFtcGxlIG9mIGhvdyB5b3UgbWlnaHQgYWxsb3cgY2FzZSBpbnNlbnNpdGl2ZSB1cmxzXG4gICAgICAgICAqICAgJHVybFJvdXRlclByb3ZpZGVyLnJ1bGUoZnVuY3Rpb24gKCRpbmplY3RvciwgJGxvY2F0aW9uKSB7XG4gICAgICAgICAqICAgICB2YXIgcGF0aCA9ICRsb2NhdGlvbi5wYXRoKCksXG4gICAgICAgICAqICAgICAgICAgbm9ybWFsaXplZCA9IHBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgIGlmIChwYXRoICE9PSBub3JtYWxpemVkKSB7XG4gICAgICAgICAqICAgICAgIHJldHVybiBub3JtYWxpemVkO1xuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKiAgIH0pO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICogYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBydWxlRm5cbiAgICAgICAgICogSGFuZGxlciBmdW5jdGlvbiB0aGF0IHRha2VzIGAkaW5qZWN0b3JgIGFuZCBgJGxvY2F0aW9uYCBzZXJ2aWNlcyBhcyBhcmd1bWVudHMuXG4gICAgICAgICAqIFlvdSBjYW4gdXNlIHRoZW0gdG8gZGV0ZWN0IGEgdXJsIGFuZCByZXR1cm4gYSBkaWZmZXJlbnQgdXJsIGFzIGEgc3RyaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIFtbVXJsUm91dGVyUHJvdmlkZXJdXSAoYHRoaXNgKVxuICAgICAgICAgKi9cbiAgICAgICAgVXJsUm91dGVyUHJvdmlkZXIucHJvdG90eXBlLnJ1bGUgPSBmdW5jdGlvbiAocnVsZUZuKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCFjb3JlLmlzRnVuY3Rpb24ocnVsZUZuKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcnVsZUZuKGNvcmUuc2VydmljZXMuJGluamVjdG9yLCBfdGhpcy5fcm91dGVyLmxvY2F0aW9uU2VydmljZSk7IH07XG4gICAgICAgICAgICB2YXIgcnVsZSA9IG5ldyBjb3JlLkJhc2VVcmxSdWxlKG1hdGNoLCBjb3JlLmlkZW50aXR5KTtcbiAgICAgICAgICAgIHRoaXMuX3VybFJvdXRlci5ydWxlKHJ1bGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHRoZSBwYXRoIG9yIGJlaGF2aW9yIHRvIHVzZSB3aGVuIG5vIHVybCBjYW4gYmUgbWF0Y2hlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgKiB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyLnJvdXRlciddKTtcbiAgICAgICAgICpcbiAgICAgICAgICogYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICAqICAgLy8gaWYgdGhlIHBhdGggZG9lc24ndCBtYXRjaCBhbnkgb2YgdGhlIHVybHMgeW91IGNvbmZpZ3VyZWRcbiAgICAgICAgICogICAvLyBvdGhlcndpc2Ugd2lsbCB0YWtlIGNhcmUgb2Ygcm91dGluZyB0aGUgdXNlciB0byB0aGVcbiAgICAgICAgICogICAvLyBzcGVjaWZpZWQgdXJsXG4gICAgICAgICAqICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2luZGV4Jyk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgLy8gRXhhbXBsZSBvZiB1c2luZyBmdW5jdGlvbiBydWxlIGFzIHBhcmFtXG4gICAgICAgICAqICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcbiAgICAgICAgICogICAgIHJldHVybiAnL2EvdmFsaWQvdXJsJztcbiAgICAgICAgICogICB9KTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcnVsZVxuICAgICAgICAgKiBUaGUgdXJsIHBhdGggeW91IHdhbnQgdG8gcmVkaXJlY3QgdG8gb3IgYSBmdW5jdGlvbiBydWxlIHRoYXQgcmV0dXJucyB0aGUgdXJsIHBhdGggb3IgcGVyZm9ybXMgYSBgJHN0YXRlLmdvKClgLlxuICAgICAgICAgKiBUaGUgZnVuY3Rpb24gdmVyc2lvbiBpcyBwYXNzZWQgdHdvIHBhcmFtczogYCRpbmplY3RvcmAgYW5kIGAkbG9jYXRpb25gIHNlcnZpY2VzLCBhbmQgc2hvdWxkIHJldHVybiBhIHVybCBzdHJpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdH0gYCR1cmxSb3V0ZXJQcm92aWRlcmAgLSBgJHVybFJvdXRlclByb3ZpZGVyYCBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVXJsUm91dGVyUHJvdmlkZXIucHJvdG90eXBlLm90aGVyd2lzZSA9IGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHVybFJvdXRlciA9IHRoaXMuX3VybFJvdXRlcjtcbiAgICAgICAgICAgIGlmIChjb3JlLmlzU3RyaW5nKHJ1bGUpKSB7XG4gICAgICAgICAgICAgICAgdXJsUm91dGVyLm90aGVyd2lzZShydWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvcmUuaXNGdW5jdGlvbihydWxlKSkge1xuICAgICAgICAgICAgICAgIHVybFJvdXRlci5vdGhlcndpc2UoZnVuY3Rpb24gKCkgeyByZXR1cm4gcnVsZShjb3JlLnNlcnZpY2VzLiRpbmplY3RvciwgX3RoaXMuX3JvdXRlci5sb2NhdGlvblNlcnZpY2UpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgc3RyaW5nIG9yIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlcnMgYSBoYW5kbGVyIGZvciBhIGdpdmVuIHVybCBtYXRjaGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgdGhlIGhhbmRsZXIgaXMgYSBzdHJpbmcsIGl0IGlzXG4gICAgICAgICAqIHRyZWF0ZWQgYXMgYSByZWRpcmVjdCwgYW5kIGlzIGludGVycG9sYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHN5bnRheCBvZiBtYXRjaFxuICAgICAgICAgKiAoaS5lLiBsaWtlIGBTdHJpbmcucmVwbGFjZSgpYCBmb3IgYFJlZ0V4cGAsIG9yIGxpa2UgYSBgVXJsTWF0Y2hlcmAgcGF0dGVybiBvdGhlcndpc2UpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJZiB0aGUgaGFuZGxlciBpcyBhIGZ1bmN0aW9uLCBpdCBpcyBpbmplY3RhYmxlLlxuICAgICAgICAgKiBJdCBnZXRzIGludm9rZWQgaWYgYCRsb2NhdGlvbmAgbWF0Y2hlcy5cbiAgICAgICAgICogWW91IGhhdmUgdGhlIG9wdGlvbiBvZiBpbmplY3QgdGhlIG1hdGNoIG9iamVjdCBhcyBgJG1hdGNoYC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGhhbmRsZXIgY2FuIHJldHVyblxuICAgICAgICAgKlxuICAgICAgICAgKiAtICoqZmFsc3kqKiB0byBpbmRpY2F0ZSB0aGF0IHRoZSBydWxlIGRpZG4ndCBtYXRjaCBhZnRlciBhbGwsIHRoZW4gYCR1cmxSb3V0ZXJgXG4gICAgICAgICAqICAgd2lsbCBjb250aW51ZSB0cnlpbmcgdG8gZmluZCBhbm90aGVyIG9uZSB0aGF0IG1hdGNoZXMuXG4gICAgICAgICAqIC0gKipzdHJpbmcqKiB3aGljaCBpcyB0cmVhdGVkIGFzIGEgcmVkaXJlY3QgYW5kIHBhc3NlZCB0byBgJGxvY2F0aW9uLnVybCgpYFxuICAgICAgICAgKiAtICoqdm9pZCoqIG9yIGFueSAqKnRydXRoeSoqIHZhbHVlIHRlbGxzIGAkdXJsUm91dGVyYCB0aGF0IHRoZSB1cmwgd2FzIGhhbmRsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgICAgICogYGBganNcbiAgICAgICAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlci5yb3V0ZXInXSk7XG4gICAgICAgICAqXG4gICAgICAgICAqIGFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICAgICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCRzdGF0ZS51cmwsIGZ1bmN0aW9uICgkbWF0Y2gsICRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgKiAgICAgaWYgKCRzdGF0ZS4kY3VycmVudC5uYXZpZ2FibGUgIT09IHN0YXRlIHx8XG4gICAgICAgICAqICAgICAgICAgIWVxdWFsRm9yS2V5cygkbWF0Y2gsICRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgKiAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oc3RhdGUsICRtYXRjaCwgZmFsc2UpO1xuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKiAgIH0pO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICogYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB3aGF0IEEgcGF0dGVybiBzdHJpbmcgdG8gbWF0Y2gsIGNvbXBpbGVkIGFzIGEgW1tVcmxNYXRjaGVyXV0uXG4gICAgICAgICAqIEBwYXJhbSBoYW5kbGVyIFRoZSBwYXRoIChvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwYXRoKSB0aGF0IHlvdSB3YW50IHRvIHJlZGlyZWN0IHlvdXIgdXNlciB0by5cbiAgICAgICAgICogQHBhcmFtIHJ1bGVDYWxsYmFjayBbb3B0aW9uYWxdIEEgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyB0aGUgYHJ1bGVgIHJlZ2lzdGVyZWQgd2l0aCBbW1VybE1hdGNoZXIucnVsZV1dXG4gICAgICAgICAqXG4gICAgICAgICAqIE5vdGU6IHRoZSBoYW5kbGVyIG1heSBhbHNvIGludm9rZSBhcmJpdHJhcnkgY29kZSwgc3VjaCBhcyBgJHN0YXRlLmdvKClgXG4gICAgICAgICAqL1xuICAgICAgICBVcmxSb3V0ZXJQcm92aWRlci5wcm90b3R5cGUud2hlbiA9IGZ1bmN0aW9uICh3aGF0LCBoYW5kbGVyKSB7XG4gICAgICAgICAgICBpZiAoY29yZS5pc0FycmF5KGhhbmRsZXIpIHx8IGNvcmUuaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIgPSBVcmxSb3V0ZXJQcm92aWRlci5pbmplY3RhYmxlSGFuZGxlcih0aGlzLl9yb3V0ZXIsIGhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdXJsUm91dGVyLndoZW4od2hhdCwgaGFuZGxlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGVzIG1vbml0b3Jpbmcgb2YgdGhlIFVSTC5cbiAgICAgICAgICpcbiAgICAgICAgICogQ2FsbCB0aGlzIG1ldGhvZCBiZWZvcmUgVUktUm91dGVyIGhhcyBib290c3RyYXBwZWQuXG4gICAgICAgICAqIEl0IHdpbGwgc3RvcCBVSS1Sb3V0ZXIgZnJvbSBwZXJmb3JtaW5nIHRoZSBpbml0aWFsIHVybCBzeW5jLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgdG8gcGVyZm9ybSBzb21lIGFzeW5jaHJvbm91cyBpbml0aWFsaXphdGlvbiBiZWZvcmUgdGhlIHJvdXRlciBzdGFydHMuXG4gICAgICAgICAqIE9uY2UgdGhlIGluaXRpYWxpemF0aW9uIGlzIGNvbXBsZXRlLCBjYWxsIFtbbGlzdGVuXV0gdG8gdGVsbCBVSS1Sb3V0ZXIgdG8gc3RhcnQgd2F0Y2hpbmcgYW5kIHN5bmNocm9uaXppbmcgdGhlIFVSTC5cbiAgICAgICAgICpcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgKiB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xuICAgICAgICAgKlxuICAgICAgICAgKiBhcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICogICAvLyBQcmV2ZW50ICR1cmxSb3V0ZXIgZnJvbSBhdXRvbWF0aWNhbGx5IGludGVyY2VwdGluZyBVUkwgY2hhbmdlcztcbiAgICAgICAgICogICAkdXJsUm91dGVyUHJvdmlkZXIuZGVmZXJJbnRlcmNlcHQoKTtcbiAgICAgICAgICogfSlcbiAgICAgICAgICpcbiAgICAgICAgICogYXBwLnJ1bihmdW5jdGlvbiAoTXlTZXJ2aWNlLCAkdXJsUm91dGVyLCAkaHR0cCkge1xuICAgICAgICAgKiAgICRodHRwLmdldChcIi9zdHVmZlwiKS50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICogICAgIE15U2VydmljZS5kb1N0dWZmKHJlc3AuZGF0YSk7XG4gICAgICAgICAqICAgICAkdXJsUm91dGVyLmxpc3RlbigpO1xuICAgICAgICAgKiAgICAgJHVybFJvdXRlci5zeW5jKCk7XG4gICAgICAgICAqICAgfSk7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKiBgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGRlZmVyIEluZGljYXRlcyB3aGV0aGVyIHRvIGRlZmVyIGxvY2F0aW9uIGNoYW5nZSBpbnRlcmNlcHRpb24uXG4gICAgICAgICAqICAgICAgICBQYXNzaW5nIG5vIHBhcmFtZXRlciBpcyBlcXVpdmFsZW50IHRvIGB0cnVlYC5cbiAgICAgICAgICovXG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS5kZWZlckludGVyY2VwdCA9IGZ1bmN0aW9uIChkZWZlcikge1xuICAgICAgICAgICAgdGhpcy5fdXJsUm91dGVyLmRlZmVySW50ZXJjZXB0KGRlZmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFVybFJvdXRlclByb3ZpZGVyO1xuICAgIH0oKSk7XG5cbiAgICAvKipcbiAgICAgKiAjIEFuZ3VsYXIgMSB0eXBlc1xuICAgICAqXG4gICAgICogVUktUm91dGVyIGNvcmUgcHJvdmlkZXMgdmFyaW91cyBUeXBlc2NyaXB0IHR5cGVzIHdoaWNoIHlvdSBjYW4gdXNlIGZvciBjb2RlIGNvbXBsZXRpb24gYW5kIHZhbGlkYXRpbmcgcGFyYW1ldGVyIHZhbHVlcywgZXRjLlxuICAgICAqIFRoZSBjdXN0b21pemF0aW9ucyB0byB0aGUgY29yZSB0eXBlcyBmb3IgQW5ndWxhciBVSS1Sb3V0ZXIgYXJlIGRvY3VtZW50ZWQgaGVyZS5cbiAgICAgKlxuICAgICAqIFRoZSBvcHRpb25hbCBbWyRyZXNvbHZlXV0gc2VydmljZSBpcyBhbHNvIGRvY3VtZW50ZWQgaGVyZS5cbiAgICAgKlxuICAgICAqIEBtb2R1bGUgbmcxXG4gICAgICogQHByZWZlcnJlZFxuICAgICAqL1xuICAgIG5nLm1vZHVsZSgndWkucm91dGVyLmFuZ3VsYXIxJywgW10pO1xuICAgIHZhciBtb2RfaW5pdCA9IG5nLm1vZHVsZSgndWkucm91dGVyLmluaXQnLCBbJ25nJ10pO1xuICAgIHZhciBtb2RfdXRpbCA9IG5nLm1vZHVsZSgndWkucm91dGVyLnV0aWwnLCBbJ3VpLnJvdXRlci5pbml0J10pO1xuICAgIHZhciBtb2RfcnRyID0gbmcubW9kdWxlKCd1aS5yb3V0ZXIucm91dGVyJywgWyd1aS5yb3V0ZXIudXRpbCddKTtcbiAgICB2YXIgbW9kX3N0YXRlID0gbmcubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnLCBbJ3VpLnJvdXRlci5yb3V0ZXInLCAndWkucm91dGVyLnV0aWwnLCAndWkucm91dGVyLmFuZ3VsYXIxJ10pO1xuICAgIHZhciBtb2RfbWFpbiA9IG5nLm1vZHVsZSgndWkucm91dGVyJywgWyd1aS5yb3V0ZXIuaW5pdCcsICd1aS5yb3V0ZXIuc3RhdGUnLCAndWkucm91dGVyLmFuZ3VsYXIxJ10pO1xuICAgIHZhciBtb2RfY21wdCA9IG5nLm1vZHVsZSgndWkucm91dGVyLmNvbXBhdCcsIFsndWkucm91dGVyJ10pOyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lXG4gICAgdmFyIHJvdXRlciA9IG51bGw7XG4gICAgJHVpUm91dGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJGxvY2F0aW9uUHJvdmlkZXInXTtcbiAgICAvKiogVGhpcyBhbmd1bGFyIDEgcHJvdmlkZXIgaW5zdGFudGlhdGVzIGEgUm91dGVyIGFuZCBleHBvc2VzIGl0cyBzZXJ2aWNlcyB2aWEgdGhlIGFuZ3VsYXIgaW5qZWN0b3IgKi9cbiAgICBmdW5jdGlvbiAkdWlSb3V0ZXJQcm92aWRlcigkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJvdXRlciB3aGVuIHRoZSAkdWlSb3V0ZXJQcm92aWRlciBpcyBpbml0aWFsaXplZFxuICAgICAgICByb3V0ZXIgPSB0aGlzLnJvdXRlciA9IG5ldyBjb3JlLlVJUm91dGVyKCk7XG4gICAgICAgIHJvdXRlci5zdGF0ZVByb3ZpZGVyID0gbmV3IFN0YXRlUHJvdmlkZXIocm91dGVyLnN0YXRlUmVnaXN0cnksIHJvdXRlci5zdGF0ZVNlcnZpY2UpO1xuICAgICAgICAvLyBBcHBseSBuZzEgc3BlY2lmaWMgU3RhdGVCdWlsZGVyIGNvZGUgZm9yIGB2aWV3c2AsIGByZXNvbHZlYCwgYW5kIGBvbkV4aXQvUmV0YWluL0VudGVyYCBwcm9wZXJ0aWVzXG4gICAgICAgIHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcigndmlld3MnLCBuZzFWaWV3c0J1aWxkZXIpO1xuICAgICAgICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoJ29uRXhpdCcsIGdldFN0YXRlSG9va0J1aWxkZXIoJ29uRXhpdCcpKTtcbiAgICAgICAgcm91dGVyLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKCdvblJldGFpbicsIGdldFN0YXRlSG9va0J1aWxkZXIoJ29uUmV0YWluJykpO1xuICAgICAgICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoJ29uRW50ZXInLCBnZXRTdGF0ZUhvb2tCdWlsZGVyKCdvbkVudGVyJykpO1xuICAgICAgICByb3V0ZXIudmlld1NlcnZpY2UuX3BsdWdpbmFwaS5fdmlld0NvbmZpZ0ZhY3RvcnkoJ25nMScsIGdldE5nMVZpZXdDb25maWdGYWN0b3J5KCkpO1xuICAgICAgICB2YXIgbmcxTG9jYXRpb25TZXJ2aWNlID0gKHJvdXRlci5sb2NhdGlvblNlcnZpY2UgPSByb3V0ZXIubG9jYXRpb25Db25maWcgPSBuZXcgTmcxTG9jYXRpb25TZXJ2aWNlcygkbG9jYXRpb25Qcm92aWRlcikpO1xuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLm1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGUocm91dGVyKTtcbiAgICAgICAgLy8gYmFja3dhcmRzIGNvbXBhdDogYWxzbyBleHBvc2Ugcm91dGVyIGluc3RhbmNlIGFzICR1aVJvdXRlclByb3ZpZGVyLnJvdXRlclxuICAgICAgICByb3V0ZXJbJ3JvdXRlciddID0gcm91dGVyO1xuICAgICAgICByb3V0ZXJbJyRnZXQnXSA9ICRnZXQ7XG4gICAgICAgICRnZXQuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRicm93c2VyJywgJyR3aW5kb3cnLCAnJHNuaWZmZXInLCAnJHJvb3RTY29wZScsICckaHR0cCcsICckdGVtcGxhdGVDYWNoZSddO1xuICAgICAgICBmdW5jdGlvbiAkZ2V0KCRsb2NhdGlvbiwgJGJyb3dzZXIsICR3aW5kb3csICRzbmlmZmVyLCAkcm9vdFNjb3BlLCAkaHR0cCwgJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgICAgIG5nMUxvY2F0aW9uU2VydmljZS5fcnVudGltZVNlcnZpY2VzKCRyb290U2NvcGUsICRsb2NhdGlvbiwgJHNuaWZmZXIsICRicm93c2VyLCAkd2luZG93KTtcbiAgICAgICAgICAgIGRlbGV0ZSByb3V0ZXJbJ3JvdXRlciddO1xuICAgICAgICAgICAgZGVsZXRlIHJvdXRlclsnJGdldCddO1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm91dGVyO1xuICAgIH1cbiAgICB2YXIgZ2V0UHJvdmlkZXJGb3IgPSBmdW5jdGlvbiAoc2VydmljZU5hbWUpIHsgcmV0dXJuIFtcbiAgICAgICAgJyR1aVJvdXRlclByb3ZpZGVyJyxcbiAgICAgICAgZnVuY3Rpb24gKCR1cnApIHtcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gJHVycC5yb3V0ZXJbc2VydmljZU5hbWVdO1xuICAgICAgICAgICAgc2VydmljZVsnJGdldCddID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VydmljZTsgfTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlO1xuICAgICAgICB9LFxuICAgIF07IH07XG4gICAgLy8gVGhpcyBlZmZlY3RpdmVseSBjYWxscyAkZ2V0KCkgb24gYCR1aVJvdXRlclByb3ZpZGVyYCB0byB0cmlnZ2VyIGluaXQgKHdoZW4gbmcgZW50ZXJzIHJ1bnRpbWUpXG4gICAgcnVuQmxvY2suJGluamVjdCA9IFsnJGluamVjdG9yJywgJyRxJywgJyR1aVJvdXRlciddO1xuICAgIGZ1bmN0aW9uIHJ1bkJsb2NrKCRpbmplY3RvciwgJHEsICR1aVJvdXRlcikge1xuICAgICAgICBjb3JlLnNlcnZpY2VzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcbiAgICAgICAgY29yZS5zZXJ2aWNlcy4kcSA9ICRxO1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXIvaXNzdWVzLzM2NzhcbiAgICAgICAgaWYgKCEkaW5qZWN0b3IuaGFzT3duUHJvcGVydHkoJ3N0cmljdERpJykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgJGluamVjdG9yLmludm9rZShmdW5jdGlvbiAoY2hlY2tTdHJpY3REaSkgeyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICRpbmplY3Rvci5zdHJpY3REaSA9ICEhL3N0cmljdCBtb2RlLy5leGVjKGVycm9yICYmIGVycm9yLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSAkaW5qZWN0b3IgaXMgbm93IGF2YWlsYWJsZS5cbiAgICAgICAgLy8gRmluZCBhbnkgcmVzb2x2YWJsZXMgdGhhdCBoYWQgZGVwZW5kZW5jeSBhbm5vdGF0aW9uIGRlZmVycmVkXG4gICAgICAgICR1aVJvdXRlci5zdGF0ZVJlZ2lzdHJ5XG4gICAgICAgICAgICAuZ2V0KClcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguJCRzdGF0ZSgpLnJlc29sdmFibGVzOyB9KVxuICAgICAgICAgICAgLnJlZHVjZShjb3JlLnVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5kZXBzID09PSAnZGVmZXJyZWQnOyB9KVxuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHJlc29sdmFibGUpIHsgcmV0dXJuIChyZXNvbHZhYmxlLmRlcHMgPSAkaW5qZWN0b3IuYW5ub3RhdGUocmVzb2x2YWJsZS5yZXNvbHZlRm4sICRpbmplY3Rvci5zdHJpY3REaSkpOyB9KTtcbiAgICB9XG4gICAgLy8gJHVybFJvdXRlciBzZXJ2aWNlIGFuZCAkdXJsUm91dGVyUHJvdmlkZXJcbiAgICB2YXIgZ2V0VXJsUm91dGVyUHJvdmlkZXIgPSBmdW5jdGlvbiAodWlSb3V0ZXIpIHsgcmV0dXJuICh1aVJvdXRlci51cmxSb3V0ZXJQcm92aWRlciA9IG5ldyBVcmxSb3V0ZXJQcm92aWRlcih1aVJvdXRlcikpOyB9O1xuICAgIC8vICRzdGF0ZSBzZXJ2aWNlIGFuZCAkc3RhdGVQcm92aWRlclxuICAgIC8vICR1cmxSb3V0ZXIgc2VydmljZSBhbmQgJHVybFJvdXRlclByb3ZpZGVyXG4gICAgdmFyIGdldFN0YXRlUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjb3JlLmV4dGVuZChyb3V0ZXIuc3RhdGVQcm92aWRlciwgeyAkZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXIuc3RhdGVTZXJ2aWNlOyB9IH0pOyB9O1xuICAgIHdhdGNoRGlnZXN0cy4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJ107XG4gICAgZnVuY3Rpb24gd2F0Y2hEaWdlc3RzKCRyb290U2NvcGUpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29yZS50cmFjZS5hcHByb3hpbWF0ZURpZ2VzdHMrKztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1vZF9pbml0LnByb3ZpZGVyKCckdWlSb3V0ZXInLCAkdWlSb3V0ZXJQcm92aWRlcik7XG4gICAgbW9kX3J0ci5wcm92aWRlcignJHVybFJvdXRlcicsIFsnJHVpUm91dGVyUHJvdmlkZXInLCBnZXRVcmxSb3V0ZXJQcm92aWRlcl0pO1xuICAgIG1vZF91dGlsLnByb3ZpZGVyKCckdXJsU2VydmljZScsIGdldFByb3ZpZGVyRm9yKCd1cmxTZXJ2aWNlJykpO1xuICAgIG1vZF91dGlsLnByb3ZpZGVyKCckdXJsTWF0Y2hlckZhY3RvcnknLCBbJyR1aVJvdXRlclByb3ZpZGVyJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLnVybE1hdGNoZXJGYWN0b3J5OyB9XSk7XG4gICAgbW9kX3V0aWwucHJvdmlkZXIoJyR0ZW1wbGF0ZUZhY3RvcnknLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgVGVtcGxhdGVGYWN0b3J5KCk7IH0pO1xuICAgIG1vZF9zdGF0ZS5wcm92aWRlcignJHN0YXRlUmVnaXN0cnknLCBnZXRQcm92aWRlckZvcignc3RhdGVSZWdpc3RyeScpKTtcbiAgICBtb2Rfc3RhdGUucHJvdmlkZXIoJyR1aVJvdXRlckdsb2JhbHMnLCBnZXRQcm92aWRlckZvcignZ2xvYmFscycpKTtcbiAgICBtb2Rfc3RhdGUucHJvdmlkZXIoJyR0cmFuc2l0aW9ucycsIGdldFByb3ZpZGVyRm9yKCd0cmFuc2l0aW9uU2VydmljZScpKTtcbiAgICBtb2Rfc3RhdGUucHJvdmlkZXIoJyRzdGF0ZScsIFsnJHVpUm91dGVyUHJvdmlkZXInLCBnZXRTdGF0ZVByb3ZpZGVyXSk7XG4gICAgbW9kX3N0YXRlLmZhY3RvcnkoJyRzdGF0ZVBhcmFtcycsIFsnJHVpUm91dGVyJywgZnVuY3Rpb24gKCR1aVJvdXRlcikgeyByZXR1cm4gJHVpUm91dGVyLmdsb2JhbHMucGFyYW1zOyB9XSk7XG4gICAgbW9kX21haW4uZmFjdG9yeSgnJHZpZXcnLCBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXIudmlld1NlcnZpY2U7IH0pO1xuICAgIG1vZF9tYWluLnNlcnZpY2UoJyR0cmFjZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvcmUudHJhY2U7IH0pO1xuICAgIG1vZF9tYWluLnJ1bih3YXRjaERpZ2VzdHMpO1xuICAgIG1vZF91dGlsLnJ1bihbJyR1cmxNYXRjaGVyRmFjdG9yeScsIGZ1bmN0aW9uICgkdXJsTWF0Y2hlckZhY3RvcnkpIHsgfV0pO1xuICAgIG1vZF9zdGF0ZS5ydW4oWyckc3RhdGUnLCBmdW5jdGlvbiAoJHN0YXRlKSB7IH1dKTtcbiAgICBtb2RfcnRyLnJ1bihbJyR1cmxSb3V0ZXInLCBmdW5jdGlvbiAoJHVybFJvdXRlcikgeyB9XSk7XG4gICAgbW9kX2luaXQucnVuKHJ1bkJsb2NrKTtcbiAgICAvKiogQGhpZGRlbiBUT0RPOiBmaW5kIGEgcGxhY2UgdG8gbW92ZSB0aGlzICovXG4gICAgdmFyIGdldExvY2FscyA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIHRva2VucyA9IGN0eC5nZXRUb2tlbnMoKS5maWx0ZXIoY29yZS5pc1N0cmluZyk7XG4gICAgICAgIHZhciB0dXBsZXMgPSB0b2tlbnMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciByZXNvbHZhYmxlID0gY3R4LmdldFJlc29sdmFibGUoa2V5KTtcbiAgICAgICAgICAgIHZhciB3YWl0UG9saWN5ID0gY3R4LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYztcbiAgICAgICAgICAgIHJldHVybiBba2V5LCB3YWl0UG9saWN5ID09PSAnTk9XQUlUJyA/IHJlc29sdmFibGUucHJvbWlzZSA6IHJlc29sdmFibGUuZGF0YV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHVwbGVzLnJlZHVjZShjb3JlLmFwcGx5UGFpcnMsIHt9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgKG9yIHBlbmRpbmcpIFN0YXRlIFBhcmFtZXRlcnNcbiAgICAgKlxuICAgICAqIEFuIGluamVjdGFibGUgZ2xvYmFsICoqU2VydmljZSBPYmplY3QqKiB3aGljaCBob2xkcyB0aGUgc3RhdGUgcGFyYW1ldGVycyBmb3IgdGhlIGxhdGVzdCAqKlNVQ0NFU1NGVUwqKiB0cmFuc2l0aW9uLlxuICAgICAqXG4gICAgICogVGhlIHZhbHVlcyBhcmUgbm90IHVwZGF0ZWQgdW50aWwgKmFmdGVyKiBhIGBUcmFuc2l0aW9uYCBzdWNjZXNzZnVsbHkgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogKipBbHNvOioqIGFuIGluamVjdGFibGUgKipQZXItVHJhbnNpdGlvbiBPYmplY3QqKiBvYmplY3Qgd2hpY2ggaG9sZHMgdGhlIHBlbmRpbmcgc3RhdGUgcGFyYW1ldGVycyBmb3IgdGhlIHBlbmRpbmcgYFRyYW5zaXRpb25gIGN1cnJlbnRseSBydW5uaW5nLlxuICAgICAqXG4gICAgICogIyMjIERlcHJlY2F0aW9uIHdhcm5pbmc6XG4gICAgICpcbiAgICAgKiBUaGUgdmFsdWUgaW5qZWN0ZWQgZm9yIGAkc3RhdGVQYXJhbXNgIGlzIGRpZmZlcmVudCBkZXBlbmRpbmcgb24gd2hlcmUgaXQgaXMgaW5qZWN0ZWQuXG4gICAgICpcbiAgICAgKiAtIFdoZW4gaW5qZWN0ZWQgaW50byBhbiBhbmd1bGFyIHNlcnZpY2UsIHRoZSBvYmplY3QgaW5qZWN0ZWQgaXMgdGhlIGdsb2JhbCAqKlNlcnZpY2UgT2JqZWN0Kiogd2l0aCB0aGUgcGFyYW1ldGVyIHZhbHVlcyBmb3IgdGhlIGxhdGVzdCBzdWNjZXNzZnVsIGBUcmFuc2l0aW9uYC5cbiAgICAgKiAtIFdoZW4gaW5qZWN0ZWQgaW50byB0cmFuc2l0aW9uIGhvb2tzLCByZXNvbHZlcywgb3IgdmlldyBjb250cm9sbGVycywgdGhlIG9iamVjdCBpcyB0aGUgKipQZXItVHJhbnNpdGlvbiBPYmplY3QqKiB3aXRoIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGZvciB0aGUgcnVubmluZyBgVHJhbnNpdGlvbmAuXG4gICAgICpcbiAgICAgKiBCZWNhdXNlIG9mIHRoZXNlIGNvbmZ1c2luZyBkZXRhaWxzLCB0aGlzIHNlcnZpY2UgaXMgZGVwcmVjYXRlZC5cbiAgICAgKlxuICAgICAqICMjIyBJbnN0ZWFkIG9mIHVzaW5nIHRoZSBnbG9iYWwgYCRzdGF0ZVBhcmFtc2Agc2VydmljZSBvYmplY3QsXG4gICAgICogaW5qZWN0IFtbJHVpUm91dGVyR2xvYmFsc11dIGFuZCB1c2UgW1tVSVJvdXRlckdsb2JhbHMucGFyYW1zXV1cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogTXlTZXJ2aWNlLiRpbmplY3QgPSBbJyR1aVJvdXRlckdsb2JhbHMnXTtcbiAgICAgKiBmdW5jdGlvbiBNeVNlcnZpY2UoJHVpUm91dGVyR2xvYmFscykge1xuICAgICAqICAgcmV0dXJuIHtcbiAgICAgKiAgICAgcGFyYW1WYWx1ZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgICAgICByZXR1cm4gJHVpUm91dGVyR2xvYmFscy5wYXJhbXM7XG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgSW5zdGVhZCBvZiB1c2luZyB0aGUgcGVyLXRyYW5zaXRpb24gYCRzdGF0ZVBhcmFtc2Agb2JqZWN0LFxuICAgICAqIGluamVjdCB0aGUgY3VycmVudCBgVHJhbnNpdGlvbmAgKGFzIFtbJHRyYW5zaXRpb24kXV0pIGFuZCB1c2UgW1tUcmFuc2l0aW9uLnBhcmFtc11dXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIE15Q29udHJvbGxlci4kaW5qZWN0ID0gWyckdHJhbnNpdGlvbiQnXTtcbiAgICAgKiBmdW5jdGlvbiBNeUNvbnRyb2xsZXIoJHRyYW5zaXRpb24kKSB7XG4gICAgICogICB2YXIgdXNlcm5hbWUgPSAkdHJhbnNpdGlvbiQucGFyYW1zKCkudXNlcm5hbWU7XG4gICAgICogICAvLyAuLiBkbyBzb21ldGhpbmcgd2l0aCB1c2VybmFtZVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIC0tLVxuICAgICAqXG4gICAgICogVGhpcyBvYmplY3QgY2FuIGJlIGluamVjdGVkIGludG8gb3RoZXIgc2VydmljZXMuXG4gICAgICpcbiAgICAgKiAjIyMjIERlcHJlY2F0ZWQgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIFNvbWVTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRzdGF0ZVBhcmFtcyddO1xuICAgICAqIGZ1bmN0aW9uIFNvbWVTZXJ2aWNlKCRodHRwLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgKiAgIHJldHVybiB7XG4gICAgICogICAgIGdldFVzZXI6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvJyArICRzdGF0ZVBhcmFtcy51c2VybmFtZSk7XG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKiB9O1xuICAgICAqIGFuZ3VsYXIuc2VydmljZSgnU29tZVNlcnZpY2UnLCBTb21lU2VydmljZSk7XG4gICAgICogYGBgXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqICMgQW5ndWxhciAxIERpcmVjdGl2ZXNcbiAgICAgKlxuICAgICAqIFRoZXNlIGFyZSB0aGUgZGlyZWN0aXZlcyBpbmNsdWRlZCBpbiBVSS1Sb3V0ZXIgZm9yIEFuZ3VsYXIgMS5cbiAgICAgKiBUaGVzZSBkaXJlY3RpdmVzIGFyZSB1c2VkIGluIHRlbXBsYXRlcyB0byBjcmVhdGUgdmlld3BvcnRzIGFuZCBsaW5rL25hdmlnYXRlIHRvIHN0YXRlcy5cbiAgICAgKlxuICAgICAqIEBuZzFhcGlcbiAgICAgKiBAcHJlZmVycmVkXG4gICAgICogQG1vZHVsZSBkaXJlY3RpdmVzXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gcGFyc2VTdGF0ZVJlZihyZWYpIHtcbiAgICAgICAgdmFyIHBhcnNlZDtcbiAgICAgICAgdmFyIHBhcmFtc09ubHkgPSByZWYubWF0Y2goL15cXHMqKHtbXn1dKn0pXFxzKiQvKTtcbiAgICAgICAgaWYgKHBhcmFtc09ubHkpXG4gICAgICAgICAgICByZWYgPSAnKCcgKyBwYXJhbXNPbmx5WzFdICsgJyknO1xuICAgICAgICBwYXJzZWQgPSByZWYucmVwbGFjZSgvXFxuL2csICcgJykubWF0Y2goL15cXHMqKFteKF0qPylcXHMqKFxcKCguKilcXCkpP1xccyokLyk7XG4gICAgICAgIGlmICghcGFyc2VkIHx8IHBhcnNlZC5sZW5ndGggIT09IDQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0YXRlIHJlZiAnXCIgKyByZWYgKyBcIidcIik7XG4gICAgICAgIHJldHVybiB7IHN0YXRlOiBwYXJzZWRbMV0gfHwgbnVsbCwgcGFyYW1FeHByOiBwYXJzZWRbM10gfHwgbnVsbCB9O1xuICAgIH1cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uIHN0YXRlQ29udGV4dChlbCkge1xuICAgICAgICB2YXIgJHVpVmlldyA9IGVsLnBhcmVudCgpLmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKTtcbiAgICAgICAgdmFyIHBhdGggPSBjb3JlLnBhcnNlKCckY2ZnLnBhdGgnKSgkdWlWaWV3KTtcbiAgICAgICAgcmV0dXJuIHBhdGggPyBjb3JlLnRhaWwocGF0aCkuc3RhdGUubmFtZSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBwcm9jZXNzZWREZWYoJHN0YXRlLCAkZWxlbWVudCwgZGVmKSB7XG4gICAgICAgIHZhciB1aVN0YXRlID0gZGVmLnVpU3RhdGUgfHwgJHN0YXRlLmN1cnJlbnQubmFtZTtcbiAgICAgICAgdmFyIHVpU3RhdGVPcHRzID0gY29yZS5leHRlbmQoZGVmYXVsdE9wdHMoJGVsZW1lbnQsICRzdGF0ZSksIGRlZi51aVN0YXRlT3B0cyB8fCB7fSk7XG4gICAgICAgIHZhciBocmVmID0gJHN0YXRlLmhyZWYodWlTdGF0ZSwgZGVmLnVpU3RhdGVQYXJhbXMsIHVpU3RhdGVPcHRzKTtcbiAgICAgICAgcmV0dXJuIHsgdWlTdGF0ZTogdWlTdGF0ZSwgdWlTdGF0ZVBhcmFtczogZGVmLnVpU3RhdGVQYXJhbXMsIHVpU3RhdGVPcHRzOiB1aVN0YXRlT3B0cywgaHJlZjogaHJlZiB9O1xuICAgIH1cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uIGdldFR5cGVJbmZvKGVsKSB7XG4gICAgICAgIC8vIFNWR0FFbGVtZW50IGRvZXMgbm90IHVzZSB0aGUgaHJlZiBhdHRyaWJ1dGUsIGJ1dCByYXRoZXIgdGhlICd4bGlua0hyZWYnIGF0dHJpYnV0ZS5cbiAgICAgICAgdmFyIGlzU3ZnID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVsLnByb3AoJ2hyZWYnKSkgPT09ICdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXSc7XG4gICAgICAgIHZhciBpc0Zvcm0gPSBlbFswXS5ub2RlTmFtZSA9PT0gJ0ZPUk0nO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXR0cjogaXNGb3JtID8gJ2FjdGlvbicgOiBpc1N2ZyA/ICd4bGluazpocmVmJyA6ICdocmVmJyxcbiAgICAgICAgICAgIGlzQW5jaG9yOiBlbC5wcm9wKCd0YWdOYW1lJykudG9VcHBlckNhc2UoKSA9PT0gJ0EnLFxuICAgICAgICAgICAgY2xpY2thYmxlOiAhaXNGb3JtLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uIGNsaWNrSG9vayhlbCwgJHN0YXRlLCAkdGltZW91dCwgdHlwZSwgZ2V0RGVmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGUud2hpY2ggfHwgZS5idXR0b24sIHRhcmdldCA9IGdldERlZigpO1xuICAgICAgICAgICAgaWYgKCEoYnV0dG9uID4gMSB8fCBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5IHx8IGUuc2hpZnRLZXkgfHwgZWwuYXR0cigndGFyZ2V0JykpKSB7XG4gICAgICAgICAgICAgICAgLy8gSEFDSzogVGhpcyBpcyB0byBhbGxvdyBuZy1jbGlja3MgdG8gYmUgcHJvY2Vzc2VkIGJlZm9yZSB0aGUgdHJhbnNpdGlvbiBpcyBpbml0aWF0ZWQ6XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25fMSA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbC5hdHRyKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28odGFyZ2V0LnVpU3RhdGUsIHRhcmdldC51aVN0YXRlUGFyYW1zLCB0YXJnZXQudWlTdGF0ZU9wdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzdGF0ZSBoYXMgbm8gVVJMLCBpZ25vcmUgb25lIHByZXZlbnREZWZhdWx0IGZyb20gdGhlIDxhPiBkaXJlY3RpdmUuXG4gICAgICAgICAgICAgICAgdmFyIGlnbm9yZVByZXZlbnREZWZhdWx0Q291bnRfMSA9IHR5cGUuaXNBbmNob3IgJiYgIXRhcmdldC5ocmVmID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlnbm9yZVByZXZlbnREZWZhdWx0Q291bnRfMS0tIDw9IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodHJhbnNpdGlvbl8xKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uIGRlZmF1bHRPcHRzKGVsLCAkc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlbGF0aXZlOiBzdGF0ZUNvbnRleHQoZWwpIHx8ICRzdGF0ZS4kY3VycmVudCxcbiAgICAgICAgICAgIGluaGVyaXQ6IHRydWUsXG4gICAgICAgICAgICBzb3VyY2U6ICdzcmVmJyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKGVsZW1lbnQsIHNjb3BlLCBob29rRm4sIHVpU3RhdGVPcHRzKSB7XG4gICAgICAgIHZhciBldmVudHM7XG4gICAgICAgIGlmICh1aVN0YXRlT3B0cykge1xuICAgICAgICAgICAgZXZlbnRzID0gdWlTdGF0ZU9wdHMuZXZlbnRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29yZS5pc0FycmF5KGV2ZW50cykpIHtcbiAgICAgICAgICAgIGV2ZW50cyA9IFsnY2xpY2snXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb24gPSBlbGVtZW50Lm9uID8gJ29uJyA6ICdiaW5kJztcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBldmVudHNfMSA9IGV2ZW50czsgX2kgPCBldmVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBldmVudF8xID0gZXZlbnRzXzFbX2ldO1xuICAgICAgICAgICAgZWxlbWVudFtvbl0oZXZlbnRfMSwgaG9va0ZuKTtcbiAgICAgICAgfVxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9mZiA9IGVsZW1lbnQub2ZmID8gJ29mZicgOiAndW5iaW5kJztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZXZlbnRzXzIgPSBldmVudHM7IF9pIDwgZXZlbnRzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50XzIgPSBldmVudHNfMltfaV07XG4gICAgICAgICAgICAgICAgZWxlbWVudFtvZmZdKGV2ZW50XzIsIGhvb2tGbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBgdWktc3JlZmA6IEEgZGlyZWN0aXZlIGZvciBsaW5raW5nIHRvIGEgc3RhdGVcbiAgICAgKlxuICAgICAqIEEgZGlyZWN0aXZlIHdoaWNoIGxpbmtzIHRvIGEgc3RhdGUgKGFuZCBvcHRpb25hbGx5LCBwYXJhbWV0ZXJzKS5cbiAgICAgKiBXaGVuIGNsaWNrZWQsIHRoaXMgZGlyZWN0aXZlIGFjdGl2YXRlcyB0aGUgbGlua2VkIHN0YXRlIHdpdGggdGhlIHN1cHBsaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiAjIyMgTGlua2VkIFN0YXRlXG4gICAgICogVGhlIGF0dHJpYnV0ZSB2YWx1ZSBvZiB0aGUgYHVpLXNyZWZgIGlzIHRoZSBuYW1lIG9mIHRoZSBzdGF0ZSB0byBsaW5rIHRvLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIFRoaXMgd2lsbCBhY3RpdmF0ZSB0aGUgYGhvbWVgIHN0YXRlIHdoZW4gdGhlIGxpbmsgaXMgY2xpY2tlZC5cbiAgICAgKiBgYGBodG1sXG4gICAgICogPGEgdWktc3JlZj1cImhvbWVcIj5Ib21lPC9hPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIFJlbGF0aXZlIExpbmtzXG4gICAgICogWW91IGNhbiBhbHNvIHVzZSByZWxhdGl2ZSBzdGF0ZSBwYXRocyB3aXRoaW4gYHVpLXNyZWZgLCBqdXN0IGxpa2UgYSByZWxhdGl2ZSBwYXRoIHBhc3NlZCB0byBgJHN0YXRlLmdvKClgIChbW1N0YXRlU2VydmljZS5nb11dKS5cbiAgICAgKiBZb3UganVzdCBuZWVkIHRvIGJlIGF3YXJlIHRoYXQgdGhlIHBhdGggaXMgcmVsYXRpdmUgdG8gdGhlIHN0YXRlIHRoYXQgKmNyZWF0ZWQqIHRoZSBsaW5rLlxuICAgICAqIFRoaXMgYWxsb3dzIGEgc3RhdGUgdG8gY3JlYXRlIGEgcmVsYXRpdmUgYHVpLXNyZWZgIHdoaWNoIGFsd2F5cyB0YXJnZXRzIHRoZSBzYW1lIGRlc3RpbmF0aW9uLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIEJvdGggdGhlc2UgbGlua3MgYXJlIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgc3RhdGUsIGV2ZW4gd2hlbiBhIGNoaWxkIHN0YXRlIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIHVpLXNyZWY9XCIuY2hpbGQxXCI+Y2hpbGQgMSBzdGF0ZTwvYT5cbiAgICAgKiA8YSB1aS1zcmVmPVwiLmNoaWxkMlwiPmNoaWxkIDIgc3RhdGU8L2E+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGlzIGxpbmsgYWN0aXZhdGVzIHRoZSBwYXJlbnQgc3RhdGUuXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIHVpLXNyZWY9XCJeXCI+UmV0dXJuPC9hPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIGhyZWZzXG4gICAgICogSWYgdGhlIGxpbmtlZCBzdGF0ZSBoYXMgYSBVUkwsIHRoZSBkaXJlY3RpdmUgd2lsbCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIGFuZFxuICAgICAqIHVwZGF0ZSB0aGUgYGhyZWZgIGF0dHJpYnV0ZSAodXNpbmcgdGhlIFtbU3RhdGVTZXJ2aWNlLmhyZWZdXSAgbWV0aG9kKS5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBBc3N1bWluZyB0aGUgYHVzZXJzYCBzdGF0ZSBoYXMgYSB1cmwgb2YgYC91c2Vycy9gXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIHVpLXNyZWY9XCJ1c2Vyc1wiIGhyZWY9XCIvdXNlcnMvXCI+VXNlcnM8L2E+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgUGFyYW1ldGVyIFZhbHVlc1xuICAgICAqIEluIGFkZGl0aW9uIHRvIHRoZSBzdGF0ZSBuYW1lLCBhIGB1aS1zcmVmYCBjYW4gaW5jbHVkZSBwYXJhbWV0ZXIgdmFsdWVzIHdoaWNoIGFyZSBhcHBsaWVkIHdoZW4gYWN0aXZhdGluZyB0aGUgc3RhdGUuXG4gICAgICogUGFyYW0gdmFsdWVzIGNhbiBiZSBwcm92aWRlZCBpbiB0aGUgYHVpLXNyZWZgIHZhbHVlIGFmdGVyIHRoZSBzdGF0ZSBuYW1lLCBlbmNsb3NlZCBieSBwYXJlbnRoZXNlcy5cbiAgICAgKiBUaGUgY29udGVudCBpbnNpZGUgdGhlIHBhcmVudGhlc2VzIGlzIGFuIGV4cHJlc3Npb24sIGV2YWx1YXRlZCB0byB0aGUgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBUaGlzIGV4YW1wbGUgcmVuZGVycyBhIGxpc3Qgb2YgbGlua3MgdG8gdXNlcnMuXG4gICAgICogVGhlIHN0YXRlJ3MgYHVzZXJJZGAgcGFyYW1ldGVyIHZhbHVlIGNvbWVzIGZyb20gZWFjaCB1c2VyJ3MgYHVzZXIuaWRgIHByb3BlcnR5LlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8bGkgbmctcmVwZWF0PVwidXNlciBpbiB1c2Vyc1wiPlxuICAgICAqICAgPGEgdWktc3JlZj1cInVzZXJzLmRldGFpbCh7IHVzZXJJZDogdXNlci5pZCB9KVwiPnt7IHVzZXIuZGlzcGxheU5hbWUgfX08L2E+XG4gICAgICogPC9saT5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIE5vdGU6XG4gICAgICogVGhlIHBhcmFtZXRlciB2YWx1ZXMgZXhwcmVzc2lvbiBpcyBgJHdhdGNoYGVkIGZvciB1cGRhdGVzLlxuICAgICAqXG4gICAgICogIyMjIFRyYW5zaXRpb24gT3B0aW9uc1xuICAgICAqIFlvdSBjYW4gc3BlY2lmeSBbW1RyYW5zaXRpb25PcHRpb25zXV0gdG8gcGFzcyB0byBbW1N0YXRlU2VydmljZS5nb11dIGJ5IHVzaW5nIHRoZSBgdWktc3JlZi1vcHRzYCBhdHRyaWJ1dGUuXG4gICAgICogT3B0aW9ucyBhcmUgcmVzdHJpY3RlZCB0byBgbG9jYXRpb25gLCBgaW5oZXJpdGAsIGFuZCBgcmVsb2FkYC5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGEgdWktc3JlZj1cImhvbWVcIiB1aS1zcmVmLW9wdHM9XCJ7IHJlbG9hZDogdHJ1ZSB9XCI+SG9tZTwvYT5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyBPdGhlciBET00gRXZlbnRzXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGFsc28gY3VzdG9taXplIHdoaWNoIERPTSBldmVudHMgdG8gcmVzcG9uZCB0byAoaW5zdGVhZCBvZiBgY2xpY2tgKSBieVxuICAgICAqIHByb3ZpZGluZyBhbiBgZXZlbnRzYCBhcnJheSBpbiB0aGUgYHVpLXNyZWYtb3B0c2AgYXR0cmlidXRlLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8aW5wdXQgdHlwZT1cInRleHRcIiB1aS1zcmVmPVwiY29udGFjdHNcIiB1aS1zcmVmLW9wdHM9XCJ7IGV2ZW50czogWydjaGFuZ2UnLCAnYmx1ciddIH1cIj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyBIaWdobGlnaHRpbmcgdGhlIGFjdGl2ZSBsaW5rXG4gICAgICogVGhpcyBkaXJlY3RpdmUgY2FuIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBbW3VpU3JlZkFjdGl2ZV1dIHRvIGhpZ2hsaWdodCB0aGUgYWN0aXZlIGxpbmsuXG4gICAgICpcbiAgICAgKiAjIyMgRXhhbXBsZXNcbiAgICAgKiBJZiB5b3UgaGF2ZSB0aGUgZm9sbG93aW5nIHRlbXBsYXRlOlxuICAgICAqXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIHVpLXNyZWY9XCJob21lXCI+SG9tZTwvYT5cbiAgICAgKiA8YSB1aS1zcmVmPVwiYWJvdXRcIj5BYm91dDwvYT5cbiAgICAgKiA8YSB1aS1zcmVmPVwie3BhZ2U6IDJ9XCI+TmV4dCBwYWdlPC9hPlxuICAgICAqXG4gICAgICogPHVsPlxuICAgICAqICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxuICAgICAqICAgICAgICAgPGEgdWktc3JlZj1cImNvbnRhY3RzLmRldGFpbCh7IGlkOiBjb250YWN0LmlkIH0pXCI+e3sgY29udGFjdC5uYW1lIH19PC9hPlxuICAgICAqICAgICA8L2xpPlxuICAgICAqIDwvdWw+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGVuIChhc3N1bWluZyB0aGUgY3VycmVudCBzdGF0ZSBpcyBgY29udGFjdHNgKSB0aGUgcmVuZGVyZWQgaHRtbCBpbmNsdWRpbmcgaHJlZnMgd291bGQgYmU6XG4gICAgICpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGEgaHJlZj1cIiMvaG9tZVwiIHVpLXNyZWY9XCJob21lXCI+SG9tZTwvYT5cbiAgICAgKiA8YSBocmVmPVwiIy9hYm91dFwiIHVpLXNyZWY9XCJhYm91dFwiPkFib3V0PC9hPlxuICAgICAqIDxhIGhyZWY9XCIjL2NvbnRhY3RzP3BhZ2U9MlwiIHVpLXNyZWY9XCJ7cGFnZTogMn1cIj5OZXh0IHBhZ2U8L2E+XG4gICAgICpcbiAgICAgKiA8dWw+XG4gICAgICogICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XG4gICAgICogICAgICAgICA8YSBocmVmPVwiIy9jb250YWN0cy8xXCIgdWktc3JlZj1cImNvbnRhY3RzLmRldGFpbCh7IGlkOiBjb250YWN0LmlkIH0pXCI+Sm9lPC9hPlxuICAgICAqICAgICA8L2xpPlxuICAgICAqICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxuICAgICAqICAgICAgICAgPGEgaHJlZj1cIiMvY29udGFjdHMvMlwiIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPkFsaWNlPC9hPlxuICAgICAqICAgICA8L2xpPlxuICAgICAqICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxuICAgICAqICAgICAgICAgPGEgaHJlZj1cIiMvY29udGFjdHMvM1wiIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPkJvYjwvYT5cbiAgICAgKiAgICAgPC9saT5cbiAgICAgKiA8L3VsPlxuICAgICAqXG4gICAgICogPGEgaHJlZj1cIiMvaG9tZVwiIHVpLXNyZWY9XCJob21lXCIgdWktc3JlZi1vcHRzPVwie3JlbG9hZDogdHJ1ZX1cIj5Ib21lPC9hPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIE5vdGVzXG4gICAgICpcbiAgICAgKiAtIFlvdSBjYW4gdXNlIGB1aS1zcmVmYCB0byBjaGFuZ2UgKipvbmx5IHRoZSBwYXJhbWV0ZXIgdmFsdWVzKiogYnkgb21pdHRpbmcgdGhlIHN0YXRlIG5hbWUgYW5kIHBhcmVudGhlc2VzLlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBTZXRzIHRoZSBgbGFuZ2AgcGFyYW1ldGVyIHRvIGBlbmAgYW5kIHJlbWFpbnMgb24gdGhlIHNhbWUgc3RhdGUuXG4gICAgICpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGEgdWktc3JlZj1cInsgbGFuZzogJ2VuJyB9XCI+RW5nbGlzaDwvYT5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIC0gQSBtaWRkbGUtY2xpY2ssIHJpZ2h0LWNsaWNrLCBvciBjdHJsLWNsaWNrIGlzIGhhbmRsZWQgKG5hdGl2ZWx5KSBieSB0aGUgYnJvd3NlciB0byBvcGVuIHRoZSBocmVmIGluIGEgbmV3IHdpbmRvdywgZm9yIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiAtIFVubGlrZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyBleHByZXNzaW9uLCB0aGUgc3RhdGUgbmFtZSBpcyBub3QgYCR3YXRjaGBlZCAoZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMpLlxuICAgICAqIElmIHlvdSBuZWVkIHRvIGR5bmFtaWNhbGx5IHVwZGF0ZSB0aGUgc3RhdGUgYmVpbmcgbGlua2VkIHRvLCB1c2UgdGhlIGZ1bGx5IGR5bmFtaWMgW1t1aVN0YXRlXV0gZGlyZWN0aXZlLlxuICAgICAqL1xuICAgIHZhciB1aVNyZWZEaXJlY3RpdmU7XG4gICAgdWlTcmVmRGlyZWN0aXZlID0gW1xuICAgICAgICAnJHVpUm91dGVyJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgZnVuY3Rpb24gJFN0YXRlUmVmRGlyZWN0aXZlKCR1aVJvdXRlciwgJHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHZhciAkc3RhdGUgPSAkdWlSb3V0ZXIuc3RhdGVTZXJ2aWNlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgICAgIHJlcXVpcmU6IFsnP151aVNyZWZBY3RpdmUnLCAnP151aVNyZWZBY3RpdmVFcSddLFxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIHVpU3JlZkFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGdldFR5cGVJbmZvKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlID0gdWlTcmVmQWN0aXZlWzFdIHx8IHVpU3JlZkFjdGl2ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVubGlua0luZm9GbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBob29rRm47XG4gICAgICAgICAgICAgICAgICAgIHZhciByYXdEZWYgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdldERlZiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb2Nlc3NlZERlZigkc3RhdGUsIGVsZW1lbnQsIHJhd0RlZik7IH07XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWYgPSBwYXJzZVN0YXRlUmVmKGF0dHJzLnVpU3JlZik7XG4gICAgICAgICAgICAgICAgICAgIHJhd0RlZi51aVN0YXRlID0gcmVmLnN0YXRlO1xuICAgICAgICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZU9wdHMgPSBhdHRycy51aVNyZWZPcHRzID8gc2NvcGUuJGV2YWwoYXR0cnMudWlTcmVmT3B0cykgOiB7fTtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZiA9IGdldERlZigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVubGlua0luZm9GbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmxpbmtJbmZvRm4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5saW5rSW5mb0ZuID0gYWN0aXZlLiQkYWRkU3RhdGVJbmZvKGRlZi51aVN0YXRlLCBkZWYudWlTdGF0ZVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmhyZWYgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRycy4kc2V0KHR5cGUuYXR0ciwgZGVmLmhyZWYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWYucGFyYW1FeHByKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2gocmVmLnBhcmFtRXhwciwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd0RlZi51aVN0YXRlUGFyYW1zID0gY29yZS5leHRlbmQoe30sIHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd0RlZi51aVN0YXRlUGFyYW1zID0gY29yZS5leHRlbmQoe30sIHNjb3BlLiRldmFsKHJlZi5wYXJhbUV4cHIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsICR1aVJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZCh1cGRhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsICR1aVJvdXRlci50cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIHVwZGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2xpY2thYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBob29rRm4gPSBjbGlja0hvb2soZWxlbWVudCwgJHN0YXRlLCAkdGltZW91dCwgdHlwZSwgZ2V0RGVmKTtcbiAgICAgICAgICAgICAgICAgICAgYmluZEV2ZW50cyhlbGVtZW50LCBzY29wZSwgaG9va0ZuLCByYXdEZWYudWlTdGF0ZU9wdHMpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIF07XG4gICAgLyoqXG4gICAgICogYHVpLXN0YXRlYDogQSBmdWxseSBkeW5hbWljIGRpcmVjdGl2ZSBmb3IgbGlua2luZyB0byBhIHN0YXRlXG4gICAgICpcbiAgICAgKiBBIGRpcmVjdGl2ZSB3aGljaCBsaW5rcyB0byBhIHN0YXRlIChhbmQgb3B0aW9uYWxseSwgcGFyYW1ldGVycykuXG4gICAgICogV2hlbiBjbGlja2VkLCB0aGlzIGRpcmVjdGl2ZSBhY3RpdmF0ZXMgdGhlIGxpbmtlZCBzdGF0ZSB3aXRoIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgICAqXG4gICAgICogKipUaGlzIGRpcmVjdGl2ZSBpcyB2ZXJ5IHNpbWlsYXIgdG8gW1t1aVNyZWZdXSwgYnV0IGl0IGAkb2JzZXJ2ZWBzIGFuZCBgJHdhdGNoYGVzL2V2YWx1YXRlcyBhbGwgaXRzIGlucHV0cy4qKlxuICAgICAqXG4gICAgICogQSBkaXJlY3RpdmUgd2hpY2ggbGlua3MgdG8gYSBzdGF0ZSAoYW5kIG9wdGlvbmFsbHksIHBhcmFtZXRlcnMpLlxuICAgICAqIFdoZW4gY2xpY2tlZCwgdGhpcyBkaXJlY3RpdmUgYWN0aXZhdGVzIHRoZSBsaW5rZWQgc3RhdGUgd2l0aCB0aGUgc3VwcGxpZWQgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICAgKlxuICAgICAqICMjIyBMaW5rZWQgU3RhdGVcbiAgICAgKiBUaGUgYXR0cmlidXRlIHZhbHVlIG9mIGB1aS1zdGF0ZWAgaXMgYW4gZXhwcmVzc2lvbiB3aGljaCBpcyBgJHdhdGNoYGVkIGFuZCBldmFsdWF0ZWQgYXMgdGhlIHN0YXRlIHRvIGxpbmsgdG8uXG4gICAgICogKipUaGlzIGlzIGluIGNvbnRyYXN0IHdpdGggYHVpLXNyZWZgLCB3aGljaCB0YWtlcyBhIHN0YXRlIG5hbWUgYXMgYSBzdHJpbmcgbGl0ZXJhbC4qKlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIENyZWF0ZSBhIGxpc3Qgb2YgbGlua3MuXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxsaSBuZy1yZXBlYXQ9XCJsaW5rIGluIG5hdmxpbmtzXCI+XG4gICAgICogICA8YSB1aS1zdGF0ZT1cImxpbmsuc3RhdGVcIj57eyBsaW5rLmRpc3BsYXlOYW1lIH19PC9hPlxuICAgICAqIDwvbGk+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgUmVsYXRpdmUgTGlua3NcbiAgICAgKiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSByZWxhdGl2ZSBwYXRoLCBpdCBpcyBwcm9jZXNzZWQgbGlrZSBbW3VpU3JlZl1dLlxuICAgICAqIFlvdSBqdXN0IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGUgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgc3RhdGUgdGhhdCAqY3JlYXRlZCogdGhlIGxpbmsuXG4gICAgICogVGhpcyBhbGxvd3MgYSBzdGF0ZSB0byBjcmVhdGUgcmVsYXRpdmUgYHVpLXN0YXRlYCB3aGljaCBhbHdheXMgdGFyZ2V0cyB0aGUgc2FtZSBkZXN0aW5hdGlvbi5cbiAgICAgKlxuICAgICAqICMjIyBocmVmc1xuICAgICAqIElmIHRoZSBsaW5rZWQgc3RhdGUgaGFzIGEgVVJMLCB0aGUgZGlyZWN0aXZlIHdpbGwgYXV0b21hdGljYWxseSBnZW5lcmF0ZSBhbmRcbiAgICAgKiB1cGRhdGUgdGhlIGBocmVmYCBhdHRyaWJ1dGUgKHVzaW5nIHRoZSBbW1N0YXRlU2VydmljZS5ocmVmXV0gIG1ldGhvZCkuXG4gICAgICpcbiAgICAgKiAjIyMgUGFyYW1ldGVyIFZhbHVlc1xuICAgICAqIEluIGFkZGl0aW9uIHRvIHRoZSBzdGF0ZSBuYW1lIGV4cHJlc3Npb24sIGEgYHVpLXN0YXRlYCBjYW4gaW5jbHVkZSBwYXJhbWV0ZXIgdmFsdWVzIHdoaWNoIGFyZSBhcHBsaWVkIHdoZW4gYWN0aXZhdGluZyB0aGUgc3RhdGUuXG4gICAgICogUGFyYW0gdmFsdWVzIHNob3VsZCBiZSBwcm92aWRlZCB1c2luZyB0aGUgYHVpLXN0YXRlLXBhcmFtc2AgYXR0cmlidXRlLlxuICAgICAqIFRoZSBgdWktc3RhdGUtcGFyYW1zYCBhdHRyaWJ1dGUgdmFsdWUgaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIGFuIGV4cHJlc3Npb24uXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogVGhpcyBleGFtcGxlIHJlbmRlcnMgYSBsaXN0IG9mIGxpbmtzIHdpdGggcGFyYW0gdmFsdWVzLlxuICAgICAqIFRoZSBzdGF0ZSdzIGB1c2VySWRgIHBhcmFtZXRlciB2YWx1ZSBjb21lcyBmcm9tIGVhY2ggdXNlcidzIGB1c2VyLmlkYCBwcm9wZXJ0eS5cbiAgICAgKiBgYGBodG1sXG4gICAgICogPGxpIG5nLXJlcGVhdD1cImxpbmsgaW4gbmF2bGlua3NcIj5cbiAgICAgKiAgIDxhIHVpLXN0YXRlPVwibGluay5zdGF0ZVwiIHVpLXN0YXRlLXBhcmFtcz1cImxpbmsucGFyYW1zXCI+e3sgbGluay5kaXNwbGF5TmFtZSB9fTwvYT5cbiAgICAgKiA8L2xpPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIFRyYW5zaXRpb24gT3B0aW9uc1xuICAgICAqIFlvdSBjYW4gc3BlY2lmeSBbW1RyYW5zaXRpb25PcHRpb25zXV0gdG8gcGFzcyB0byBbW1N0YXRlU2VydmljZS5nb11dIGJ5IHVzaW5nIHRoZSBgdWktc3RhdGUtb3B0c2AgYXR0cmlidXRlLlxuICAgICAqIE9wdGlvbnMgYXJlIHJlc3RyaWN0ZWQgdG8gYGxvY2F0aW9uYCwgYGluaGVyaXRgLCBhbmQgYHJlbG9hZGAuXG4gICAgICogVGhlIHZhbHVlIG9mIHRoZSBgdWktc3RhdGUtb3B0c2AgaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIGFuIGV4cHJlc3Npb24uXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIHVpLXN0YXRlPVwicmV0dXJudG8uc3RhdGVcIiB1aS1zdGF0ZS1vcHRzPVwieyByZWxvYWQ6IHRydWUgfVwiPkhvbWU8L2E+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgT3RoZXIgRE9NIEV2ZW50c1xuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIGN1c3RvbWl6ZSB3aGljaCBET00gZXZlbnRzIHRvIHJlc3BvbmQgdG8gKGluc3RlYWQgb2YgYGNsaWNrYCkgYnlcbiAgICAgKiBwcm92aWRpbmcgYW4gYGV2ZW50c2AgYXJyYXkgaW4gdGhlIGB1aS1zdGF0ZS1vcHRzYCBhdHRyaWJ1dGUuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBgaHRtbFxuICAgICAqIDxpbnB1dCB0eXBlPVwidGV4dFwiIHVpLXN0YXRlPVwiY29udGFjdHNcIiB1aS1zdGF0ZS1vcHRzPVwieyBldmVudHM6IFsnY2hhbmdlJywgJ2JsdXInXSB9XCI+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgSGlnaGxpZ2h0aW5nIHRoZSBhY3RpdmUgbGlua1xuICAgICAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggW1t1aVNyZWZBY3RpdmVdXSB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rLlxuICAgICAqXG4gICAgICogIyMjIE5vdGVzXG4gICAgICpcbiAgICAgKiAtIFlvdSBjYW4gdXNlIGB1aS1wYXJhbXNgIHRvIGNoYW5nZSAqKm9ubHkgdGhlIHBhcmFtZXRlciB2YWx1ZXMqKiBieSBvbWl0dGluZyB0aGUgc3RhdGUgbmFtZSBhbmQgc3VwcGx5aW5nIG9ubHkgYHVpLXN0YXRlLXBhcmFtc2AuXG4gICAgICogICBIb3dldmVyLCBpdCBtaWdodCBiZSBzaW1wbGVyIHRvIHVzZSBbW3VpU3JlZl1dIHBhcmFtZXRlci1vbmx5IGxpbmtzLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIFNldHMgdGhlIGBsYW5nYCBwYXJhbWV0ZXIgdG8gYGVuYCBhbmQgcmVtYWlucyBvbiB0aGUgc2FtZSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8YSB1aS1zdGF0ZT1cIlwiIHVpLXN0YXRlLXBhcmFtcz1cInsgbGFuZzogJ2VuJyB9XCI+RW5nbGlzaDwvYT5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIC0gQSBtaWRkbGUtY2xpY2ssIHJpZ2h0LWNsaWNrLCBvciBjdHJsLWNsaWNrIGlzIGhhbmRsZWQgKG5hdGl2ZWx5KSBieSB0aGUgYnJvd3NlciB0byBvcGVuIHRoZSBocmVmIGluIGEgbmV3IHdpbmRvdywgZm9yIGV4YW1wbGUuXG4gICAgICogYGBgXG4gICAgICovXG4gICAgdmFyIHVpU3RhdGVEaXJlY3RpdmU7XG4gICAgdWlTdGF0ZURpcmVjdGl2ZSA9IFtcbiAgICAgICAgJyR1aVJvdXRlcicsXG4gICAgICAgICckdGltZW91dCcsXG4gICAgICAgIGZ1bmN0aW9uICRTdGF0ZVJlZkR5bmFtaWNEaXJlY3RpdmUoJHVpUm91dGVyLCAkdGltZW91dCkge1xuICAgICAgICAgICAgdmFyICRzdGF0ZSA9ICR1aVJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICAgICAgcmVxdWlyZTogWyc/XnVpU3JlZkFjdGl2ZScsICc/XnVpU3JlZkFjdGl2ZUVxJ10sXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgdWlTcmVmQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZ2V0VHlwZUluZm8oZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmUgPSB1aVNyZWZBY3RpdmVbMV0gfHwgdWlTcmVmQWN0aXZlWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdW5saW5rSW5mb0ZuID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhvb2tGbjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhd0RlZiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0RGVmID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJvY2Vzc2VkRGVmKCRzdGF0ZSwgZWxlbWVudCwgcmF3RGVmKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0QXR0cnMgPSBbJ3VpU3RhdGUnLCAndWlTdGF0ZVBhcmFtcycsICd1aVN0YXRlT3B0cyddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd2F0Y2hEZXJlZ0ZucyA9IGlucHV0QXR0cnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGF0dHIpIHsgcmV0dXJuICgoYWNjW2F0dHJdID0gY29yZS5ub29wKSwgYWNjKTsgfSwge30pO1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVmID0gZ2V0RGVmKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5saW5rSW5mb0ZuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubGlua0luZm9GbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmxpbmtJbmZvRm4gPSBhY3RpdmUuJCRhZGRTdGF0ZUluZm8oZGVmLnVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWYuaHJlZiAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLiRzZXQodHlwZS5hdHRyLCBkZWYuaHJlZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRBdHRycy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF3RGVmW2ZpZWxkXSA9IGF0dHJzW2ZpZWxkXSA/IHNjb3BlLiRldmFsKGF0dHJzW2ZpZWxkXSkgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoZmllbGQsIGZ1bmN0aW9uIChleHByKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hEZXJlZ0Zuc1tmaWVsZF0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXRjaERlcmVnRm5zW2ZpZWxkXSA9IHNjb3BlLiR3YXRjaChleHByLCBmdW5jdGlvbiAobmV3dmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd0RlZltmaWVsZF0gPSBuZXd2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsICR1aVJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZCh1cGRhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsICR1aVJvdXRlci50cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIHVwZGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2xpY2thYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBob29rRm4gPSBjbGlja0hvb2soZWxlbWVudCwgJHN0YXRlLCAkdGltZW91dCwgdHlwZSwgZ2V0RGVmKTtcbiAgICAgICAgICAgICAgICAgICAgYmluZEV2ZW50cyhlbGVtZW50LCBzY29wZSwgaG9va0ZuLCByYXdEZWYudWlTdGF0ZU9wdHMpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIF07XG4gICAgLyoqXG4gICAgICogYHVpLXNyZWYtYWN0aXZlYCBhbmQgYHVpLXNyZWYtYWN0aXZlLWVxYDogQSBkaXJlY3RpdmUgdGhhdCBhZGRzIGEgQ1NTIGNsYXNzIHdoZW4gYSBgdWktc3JlZmAgaXMgYWN0aXZlXG4gICAgICpcbiAgICAgKiBBIGRpcmVjdGl2ZSB3b3JraW5nIGFsb25nc2lkZSBbW3VpU3JlZl1dIGFuZCBbW3VpU3RhdGVdXSB0byBhZGQgY2xhc3NlcyB0byBhbiBlbGVtZW50IHdoZW4gdGhlXG4gICAgICogcmVsYXRlZCBkaXJlY3RpdmUncyBzdGF0ZSBpcyBhY3RpdmUgKGFuZCByZW1vdmUgdGhlbSB3aGVuIGl0IGlzIGluYWN0aXZlKS5cbiAgICAgKlxuICAgICAqIFRoZSBwcmltYXJ5IHVzZS1jYXNlIGlzIHRvIGhpZ2hsaWdodCB0aGUgYWN0aXZlIGxpbmsgaW4gbmF2aWdhdGlvbiBtZW51cyxcbiAgICAgKiBkaXN0aW5ndWlzaGluZyBpdCBmcm9tIHRoZSBpbmFjdGl2ZSBtZW51IGl0ZW1zLlxuICAgICAqXG4gICAgICogIyMjIExpbmtpbmcgdG8gYSBgdWktc3JlZmAgb3IgYHVpLXN0YXRlYFxuICAgICAqIGB1aS1zcmVmLWFjdGl2ZWAgY2FuIGxpdmUgb24gdGhlIHNhbWUgZWxlbWVudCBhcyBgdWktc3JlZmAvYHVpLXN0YXRlYCwgb3IgaXQgY2FuIGJlIG9uIGEgcGFyZW50IGVsZW1lbnQuXG4gICAgICogSWYgYSBgdWktc3JlZi1hY3RpdmVgIGlzIGEgcGFyZW50IHRvIG1vcmUgdGhhbiBvbmUgYHVpLXNyZWZgL2B1aS1zdGF0ZWAsIGl0IHdpbGwgYXBwbHkgdGhlIENTUyBjbGFzcyB3aGVuICoqYW55IG9mIHRoZSBsaW5rcyBhcmUgYWN0aXZlKiouXG4gICAgICpcbiAgICAgKiAjIyMgTWF0Y2hpbmdcbiAgICAgKlxuICAgICAqIFRoZSBgdWktc3JlZi1hY3RpdmVgIGRpcmVjdGl2ZSBhcHBsaWVzIHRoZSBDU1MgY2xhc3Mgd2hlbiB0aGUgYHVpLXNyZWZgL2B1aS1zdGF0ZWAncyB0YXJnZXQgc3RhdGUgKipvciBhbnkgY2hpbGQgc3RhdGUgaXMgYWN0aXZlKiouXG4gICAgICogVGhpcyBpcyBhIFwiZnV6enkgbWF0Y2hcIiB3aGljaCB1c2VzIFtbU3RhdGVTZXJ2aWNlLmluY2x1ZGVzXV0uXG4gICAgICpcbiAgICAgKiBUaGUgYHVpLXNyZWYtYWN0aXZlLWVxYCBkaXJlY3RpdmUgYXBwbGllcyB0aGUgQ1NTIGNsYXNzIHdoZW4gdGhlIGB1aS1zcmVmYC9gdWktc3RhdGVgJ3MgdGFyZ2V0IHN0YXRlIGlzIGRpcmVjdGx5IGFjdGl2ZSAobm90IHdoZW4gY2hpbGQgc3RhdGVzIGFyZSBhY3RpdmUpLlxuICAgICAqIFRoaXMgaXMgYW4gXCJleGFjdCBtYXRjaFwiIHdoaWNoIHVzZXMgW1tTdGF0ZVNlcnZpY2UuaXNdXS5cbiAgICAgKlxuICAgICAqICMjIyBQYXJhbWV0ZXIgdmFsdWVzXG4gICAgICogSWYgdGhlIGB1aS1zcmVmYC9gdWktc3RhdGVgIGluY2x1ZGVzIHBhcmFtZXRlciB2YWx1ZXMsIHRoZSBjdXJyZW50IHBhcmFtZXRlciB2YWx1ZXMgbXVzdCBtYXRjaCB0aGUgbGluaydzIHZhbHVlcyBmb3IgdGhlIGxpbmsgdG8gYmUgaGlnaGxpZ2h0ZWQuXG4gICAgICogVGhpcyBhbGxvd3MgYSBsaXN0IG9mIGxpbmtzIHRvIHRoZSBzYW1lIHN0YXRlIHdpdGggZGlmZmVyZW50IHBhcmFtZXRlcnMgdG8gYmUgcmVuZGVyZWQsIGFuZCB0aGUgY29ycmVjdCBvbmUgaGlnaGxpZ2h0ZWQuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBgaHRtbFxuICAgICAqIDxsaSBuZy1yZXBlYXQ9XCJ1c2VyIGluIHVzZXJzXCIgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIj5cbiAgICAgKiAgIDxhIHVpLXNyZWY9XCJ1c2VyLmRldGFpbHMoeyB1c2VySWQ6IHVzZXIuaWQgfSlcIj57eyB1c2VyLmxhc3ROYW1lIH19PC9hPlxuICAgICAqIDwvbGk+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgRXhhbXBsZXNcbiAgICAgKlxuICAgICAqIEdpdmVuIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGU6XG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8dWw+XG4gICAgICogICA8bGkgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiBjbGFzcz1cIml0ZW1cIj5cbiAgICAgKiAgICAgPGEgaHJlZiB1aS1zcmVmPVwiYXBwLnVzZXIoe3VzZXI6ICdiaWxib2JhZ2dpbnMnfSlcIj5AYmlsYm9iYWdnaW5zPC9hPlxuICAgICAqICAgPC9saT5cbiAgICAgKiA8L3VsPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogV2hlbiB0aGUgYXBwIHN0YXRlIGlzIGBhcHAudXNlcmAgKG9yIGFueSBjaGlsZCBzdGF0ZSksXG4gICAgICogYW5kIGNvbnRhaW5zIHRoZSBzdGF0ZSBwYXJhbWV0ZXIgXCJ1c2VyXCIgd2l0aCB2YWx1ZSBcImJpbGJvYmFnZ2luc1wiLFxuICAgICAqIHRoZSByZXN1bHRpbmcgSFRNTCB3aWxsIGFwcGVhciBhcyAobm90ZSB0aGUgJ2FjdGl2ZScgY2xhc3MpOlxuICAgICAqXG4gICAgICogYGBgaHRtbFxuICAgICAqIDx1bD5cbiAgICAgKiAgIDxsaSB1aS1zcmVmLWFjdGl2ZT1cImFjdGl2ZVwiIGNsYXNzPVwiaXRlbSBhY3RpdmVcIj5cbiAgICAgKiAgICAgPGEgdWktc3JlZj1cImFwcC51c2VyKHt1c2VyOiAnYmlsYm9iYWdnaW5zJ30pXCIgaHJlZj1cIi91c2Vycy9iaWxib2JhZ2dpbnNcIj5AYmlsYm9iYWdnaW5zPC9hPlxuICAgICAqICAgPC9saT5cbiAgICAgKiA8L3VsPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIEdsb2IgbW9kZVxuICAgICAqXG4gICAgICogSXQgaXMgcG9zc2libGUgdG8gcGFzcyBgdWktc3JlZi1hY3RpdmVgIGFuIGV4cHJlc3Npb24gdGhhdCBldmFsdWF0ZXMgdG8gYW4gb2JqZWN0LlxuICAgICAqIFRoZSBvYmplY3RzIGtleXMgcmVwcmVzZW50IGFjdGl2ZSBjbGFzcyBuYW1lcyBhbmQgdmFsdWVzIHJlcHJlc2VudCB0aGUgcmVzcGVjdGl2ZSBzdGF0ZSBuYW1lcy9nbG9icy5cbiAgICAgKiBgdWktc3JlZi1hY3RpdmVgIHdpbGwgbWF0Y2ggaWYgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlICoqaW5jbHVkZXMqKiBhbnkgb2ZcbiAgICAgKiB0aGUgc3BlY2lmaWVkIHN0YXRlIG5hbWVzL2dsb2JzLCBldmVuIHRoZSBhYnN0cmFjdCBvbmVzLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIEdpdmVuIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGUsIHdpdGggXCJhZG1pblwiIGJlaW5nIGFuIGFic3RyYWN0IHN0YXRlOlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8ZGl2IHVpLXNyZWYtYWN0aXZlPVwieydhY3RpdmUnOiAnYWRtaW4uKionfVwiPlxuICAgICAqICAgPGEgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiB1aS1zcmVmPVwiYWRtaW4ucm9sZXNcIj5Sb2xlczwvYT5cbiAgICAgKiA8L2Rpdj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEFycmF5cyBhcmUgYWxzbyBzdXBwb3J0ZWQgYXMgdmFsdWVzIGluIHRoZSBgbmdDbGFzc2AtbGlrZSBpbnRlcmZhY2UuXG4gICAgICogVGhpcyBhbGxvd3MgbXVsdGlwbGUgc3RhdGVzIHRvIGFkZCBgYWN0aXZlYCBjbGFzcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBHaXZlbiB0aGUgZm9sbG93aW5nIHRlbXBsYXRlLCB3aXRoIFwiYWRtaW4ucm9sZXNcIiBiZWluZyB0aGUgY3VycmVudCBzdGF0ZSwgdGhlIGNsYXNzIHdpbGwgYmUgYWRkZWQgdG9vOlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8ZGl2IHVpLXNyZWYtYWN0aXZlPVwieydhY3RpdmUnOiBbJ293bmVyLioqJywgJ2FkbWluLioqJ119XCI+XG4gICAgICogICA8YSB1aS1zcmVmLWFjdGl2ZT1cImFjdGl2ZVwiIHVpLXNyZWY9XCJhZG1pbi5yb2xlc1wiPlJvbGVzPC9hPlxuICAgICAqIDwvZGl2PlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogV2hlbiB0aGUgY3VycmVudCBzdGF0ZSBpcyBcImFkbWluLnJvbGVzXCIgdGhlIFwiYWN0aXZlXCIgY2xhc3Mgd2lsbCBiZSBhcHBsaWVkIHRvIGJvdGggdGhlIGA8ZGl2PmAgYW5kIGA8YT5gIGVsZW1lbnRzLlxuICAgICAqIEl0IGlzIGltcG9ydGFudCB0byBub3RlIHRoYXQgdGhlIHN0YXRlIG5hbWVzL2dsb2JzIHBhc3NlZCB0byBgdWktc3JlZi1hY3RpdmVgIG92ZXJyaWRlIGFueSBzdGF0ZSBwcm92aWRlZCBieSBhIGxpbmtlZCBgdWktc3JlZmAuXG4gICAgICpcbiAgICAgKiAjIyMgTm90ZXM6XG4gICAgICpcbiAgICAgKiAtIFRoZSBjbGFzcyBuYW1lIGlzIGludGVycG9sYXRlZCAqKm9uY2UqKiBkdXJpbmcgdGhlIGRpcmVjdGl2ZXMgbGluayB0aW1lIChhbnkgZnVydGhlciBjaGFuZ2VzIHRvIHRoZVxuICAgICAqIGludGVycG9sYXRlZCB2YWx1ZSBhcmUgaWdub3JlZCkuXG4gICAgICpcbiAgICAgKiAtIE11bHRpcGxlIGNsYXNzZXMgbWF5IGJlIHNwZWNpZmllZCBpbiBhIHNwYWNlLXNlcGFyYXRlZCBmb3JtYXQ6IGB1aS1zcmVmLWFjdGl2ZT0nY2xhc3MxIGNsYXNzMiBjbGFzczMnYFxuICAgICAqL1xuICAgIHZhciB1aVNyZWZBY3RpdmVEaXJlY3RpdmU7XG4gICAgdWlTcmVmQWN0aXZlRGlyZWN0aXZlID0gW1xuICAgICAgICAnJHN0YXRlJyxcbiAgICAgICAgJyRzdGF0ZVBhcmFtcycsXG4gICAgICAgICckaW50ZXJwb2xhdGUnLFxuICAgICAgICAnJHVpUm91dGVyJyxcbiAgICAgICAgZnVuY3Rpb24gJFN0YXRlUmVmQWN0aXZlRGlyZWN0aXZlKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkaW50ZXJwb2xhdGUsICR1aVJvdXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFtcbiAgICAgICAgICAgICAgICAgICAgJyRzY29wZScsXG4gICAgICAgICAgICAgICAgICAgICckZWxlbWVudCcsXG4gICAgICAgICAgICAgICAgICAgICckYXR0cnMnLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRXFDbGFzcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1aVNyZWZBY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBwcm9iYWJseSBpc24ndCBtdWNoIHBvaW50IGluICRvYnNlcnZpbmcgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdWlTcmVmQWN0aXZlIGFuZCB1aVNyZWZBY3RpdmVFcSBzaGFyZSB0aGUgc2FtZSBkaXJlY3RpdmUgb2JqZWN0IHdpdGggc29tZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2xpZ2h0IGRpZmZlcmVuY2UgaW4gbG9naWMgcm91dGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRXFDbGFzcyA9ICRpbnRlcnBvbGF0ZSgkYXR0cnMudWlTcmVmQWN0aXZlRXEgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aVNyZWZBY3RpdmUgPSAkc2NvcGUuJGV2YWwoJGF0dHJzLnVpU3JlZkFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcuIHVpU3JlZkFjdGl2ZSBpcyBub3QgYSB2YWxpZCBleHByZXNzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byB1c2luZyAkaW50ZXJwb2xhdGUgYmVsb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVpU3JlZkFjdGl2ZSA9IHVpU3JlZkFjdGl2ZSB8fCAkaW50ZXJwb2xhdGUoJGF0dHJzLnVpU3JlZkFjdGl2ZSB8fCAnJywgZmFsc2UpKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdCh1aVNyZWZBY3RpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgdWlTcmVmIHRvIGNvbW11bmljYXRlIHdpdGggdWlTcmVmQWN0aXZlW0VxdWFsc11cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJCRhZGRTdGF0ZUluZm8gPSBmdW5jdGlvbiAobmV3U3RhdGUsIG5ld1BhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFscmVhZHkgZ290IGFuIGV4cGxpY2l0IHN0YXRlIHByb3ZpZGVkIGJ5IHVpLXNyZWYtYWN0aXZlLCBzbyB3ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNoYWRvdyB0aGUgb25lIHRoYXQgY29tZXMgZnJvbSB1aS1zcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcmUuaXNPYmplY3QodWlTcmVmQWN0aXZlKSAmJiBzdGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXJlZ2lzdGVyID0gYWRkU3RhdGUobmV3U3RhdGUsIG5ld1BhcmFtcywgdWlTcmVmQWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVyZWdpc3RlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVBZnRlclRyYW5zaXRpb24odHJhbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFucy5wcm9taXNlLnRoZW4odXBkYXRlLCBjb3JlLm5vb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBzZXR1cEV2ZW50TGlzdGVuZXJzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR1aVJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVBZnRlclRyYW5zaXRpb24oJHVpUm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXJlZ2lzdGVyU3RhdGVzQ2hhbmdlZExpc3RlbmVyID0gJHVpUm91dGVyLnN0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKGhhbmRsZVN0YXRlc0NoYW5nZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXJlZ2lzdGVyT25TdGFydExpc3RlbmVyID0gJHVpUm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sIHVwZGF0ZUFmdGVyVHJhbnNpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlcmVnaXN0ZXJTdGF0ZUNoYW5nZVN1Y2Nlc3NMaXN0ZW5lciA9ICRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCB1cGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBjbGVhblVwKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdGVyU3RhdGVzQ2hhbmdlZExpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcmVnaXN0ZXJPblN0YXJ0TGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyZWdpc3RlclN0YXRlQ2hhbmdlU3VjY2Vzc0xpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVN0YXRlc0NoYW5nZWQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGVzRnJvbURlZmluaXRpb25PYmplY3QodWlTcmVmQWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldFN0YXRlc0Zyb21EZWZpbml0aW9uT2JqZWN0KHN0YXRlc0RlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29yZS5pc09iamVjdChzdGF0ZXNEZWZpbml0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5mb3JFYWNoKHN0YXRlc0RlZmluaXRpb24sIGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgYWN0aXZlQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhYnN0cmFjdCBhZGRpbmcgc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkU3RhdGVGb3JDbGFzcyA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgYWN0aXZlQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmID0gcGFyc2VTdGF0ZVJlZihzdGF0ZU9yTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkU3RhdGUocmVmLnN0YXRlLCAkc2NvcGUuJGV2YWwocmVmLnBhcmFtRXhwciksIGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29yZS5pc1N0cmluZyhzdGF0ZU9yTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzdGF0ZSBpcyBzdHJpbmcsIGp1c3QgYWRkIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFN0YXRlRm9yQ2xhc3Moc3RhdGVPck5hbWUsIGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvcmUuaXNBcnJheShzdGF0ZU9yTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzdGF0ZSBpcyBhbiBhcnJheSwgaXRlcmF0ZSBvdmVyIGl0IGFuZCBhZGQgZWFjaCBhcnJheSBpdGVtIGluZGl2aWR1YWxseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlLmZvckVhY2goc3RhdGVPck5hbWUsIGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTdGF0ZUZvckNsYXNzKHN0YXRlT3JOYW1lLCBhY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFN0YXRlKHN0YXRlTmFtZSwgc3RhdGVQYXJhbXMsIGFjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gJHN0YXRlLmdldChzdGF0ZU5hbWUsIHN0YXRlQ29udGV4dCgkZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZUluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSB8fCB7IG5hbWU6IHN0YXRlTmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHN0YXRlUGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVDbGFzczogYWN0aXZlQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXMucHVzaChzdGF0ZUluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiByZW1vdmVTdGF0ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5yZW1vdmVGcm9tKHN0YXRlcykoc3RhdGVJbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHJvdXRlIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwbGl0Q2xhc3NlcyA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0ci5zcGxpdCgvXFxzLykuZmlsdGVyKGNvcmUuaWRlbnRpdHkpOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRDbGFzc2VzID0gZnVuY3Rpb24gKHN0YXRlTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVMaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmFjdGl2ZUNsYXNzOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChzcGxpdENsYXNzZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVkdWNlKGNvcmUudW5uZXN0UiwgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsbENsYXNzZXMgPSBnZXRDbGFzc2VzKHN0YXRlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChzcGxpdENsYXNzZXMoYWN0aXZlRXFDbGFzcykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoY29yZS51bmlxUiwgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmdXp6eUNsYXNzZXMgPSBnZXRDbGFzc2VzKHN0YXRlcy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICRzdGF0ZS5pbmNsdWRlcyh4LnN0YXRlLm5hbWUsIHgucGFyYW1zKTsgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGFjdGx5TWF0Y2hlc0FueSA9ICEhc3RhdGVzLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4gJHN0YXRlLmlzKHguc3RhdGUubmFtZSwgeC5wYXJhbXMpOyB9KS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4YWN0Q2xhc3NlcyA9IGV4YWN0bHlNYXRjaGVzQW55ID8gc3BsaXRDbGFzc2VzKGFjdGl2ZUVxQ2xhc3MpIDogW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZENsYXNzZXMgPSBmdXp6eUNsYXNzZXMuY29uY2F0KGV4YWN0Q2xhc3NlcykucmVkdWNlKGNvcmUudW5pcVIsIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlQ2xhc3NlcyA9IGFsbENsYXNzZXMuZmlsdGVyKGZ1bmN0aW9uIChjbHMpIHsgcmV0dXJuICFjb3JlLmluQXJyYXkoYWRkQ2xhc3NlcywgY2xzKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkgeyByZXR1cm4gJGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xhc3NOYW1lKSB7IHJldHVybiAkZWxlbWVudC5yZW1vdmVDbGFzcyhjbGFzc05hbWUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIF07XG4gICAgbmdcbiAgICAgICAgLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJylcbiAgICAgICAgLmRpcmVjdGl2ZSgndWlTcmVmJywgdWlTcmVmRGlyZWN0aXZlKVxuICAgICAgICAuZGlyZWN0aXZlKCd1aVNyZWZBY3RpdmUnLCB1aVNyZWZBY3RpdmVEaXJlY3RpdmUpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3VpU3JlZkFjdGl2ZUVxJywgdWlTcmVmQWN0aXZlRGlyZWN0aXZlKVxuICAgICAgICAuZGlyZWN0aXZlKCd1aVN0YXRlJywgdWlTdGF0ZURpcmVjdGl2ZSk7XG5cbiAgICAvKiogQG1vZHVsZSBuZzEgKi8gLyoqIGZvciB0eXBlZG9jICovXG4gICAgLyoqXG4gICAgICogYGlzU3RhdGVgIEZpbHRlcjogdHJ1dGh5IGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIHRoZSBwYXJhbWV0ZXJcbiAgICAgKlxuICAgICAqIFRyYW5zbGF0ZXMgdG8gW1tTdGF0ZVNlcnZpY2UuaXNdXSBgJHN0YXRlLmlzKFwic3RhdGVOYW1lXCIpYC5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGRpdiBuZy1pZj1cIidzdGF0ZU5hbWUnIHwgaXNTdGF0ZVwiPnNob3cgaWYgc3RhdGUgaXMgJ3N0YXRlTmFtZSc8L2Rpdj5cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICAkSXNTdGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckc3RhdGUnXTtcbiAgICBmdW5jdGlvbiAkSXNTdGF0ZUZpbHRlcigkc3RhdGUpIHtcbiAgICAgICAgdmFyIGlzRmlsdGVyID0gZnVuY3Rpb24gKHN0YXRlLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiAkc3RhdGUuaXMoc3RhdGUsIHBhcmFtcywgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIGlzRmlsdGVyLiRzdGF0ZWZ1bCA9IHRydWU7XG4gICAgICAgIHJldHVybiBpc0ZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYGluY2x1ZGVkQnlTdGF0ZWAgRmlsdGVyOiB0cnV0aHkgaWYgdGhlIGN1cnJlbnQgc3RhdGUgaW5jbHVkZXMgdGhlIHBhcmFtZXRlclxuICAgICAqXG4gICAgICogVHJhbnNsYXRlcyB0byBbW1N0YXRlU2VydmljZS5pbmNsdWRlc11dYCAkc3RhdGUuaXMoXCJmdWxsT3JQYXJ0aWFsU3RhdGVOYW1lXCIpYC5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGRpdiBuZy1pZj1cIidmdWxsT3JQYXJ0aWFsU3RhdGVOYW1lJyB8IGluY2x1ZGVkQnlTdGF0ZVwiPnNob3cgaWYgc3RhdGUgaW5jbHVkZXMgJ2Z1bGxPclBhcnRpYWxTdGF0ZU5hbWUnPC9kaXY+XG4gICAgICogYGBgXG4gICAgICovXG4gICAgJEluY2x1ZGVkQnlTdGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckc3RhdGUnXTtcbiAgICBmdW5jdGlvbiAkSW5jbHVkZWRCeVN0YXRlRmlsdGVyKCRzdGF0ZSkge1xuICAgICAgICB2YXIgaW5jbHVkZXNGaWx0ZXIgPSBmdW5jdGlvbiAoc3RhdGUsIHBhcmFtcywgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS5pbmNsdWRlcyhzdGF0ZSwgcGFyYW1zLCBvcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW5jbHVkZXNGaWx0ZXIuJHN0YXRlZnVsID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGluY2x1ZGVzRmlsdGVyO1xuICAgIH1cbiAgICBuZ1xuICAgICAgICAubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKVxuICAgICAgICAuZmlsdGVyKCdpc1N0YXRlJywgJElzU3RhdGVGaWx0ZXIpXG4gICAgICAgIC5maWx0ZXIoJ2luY2x1ZGVkQnlTdGF0ZScsICRJbmNsdWRlZEJ5U3RhdGVGaWx0ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQG5nMWFwaVxuICAgICAqIEBtb2R1bGUgZGlyZWN0aXZlc1xuICAgICAqL1xuICAgIC8qKlxuICAgICAqIGB1aS12aWV3YDogQSB2aWV3cG9ydCBkaXJlY3RpdmUgd2hpY2ggaXMgZmlsbGVkIGluIGJ5IGEgdmlldyBmcm9tIHRoZSBhY3RpdmUgc3RhdGUuXG4gICAgICpcbiAgICAgKiAjIyMgQXR0cmlidXRlc1xuICAgICAqXG4gICAgICogLSBgbmFtZWA6IChPcHRpb25hbCkgQSB2aWV3IG5hbWUuXG4gICAgICogICBUaGUgbmFtZSBzaG91bGQgYmUgdW5pcXVlIGFtb25nc3QgdGhlIG90aGVyIHZpZXdzIGluIHRoZSBzYW1lIHN0YXRlLlxuICAgICAqICAgWW91IGNhbiBoYXZlIHZpZXdzIG9mIHRoZSBzYW1lIG5hbWUgdGhhdCBsaXZlIGluIGRpZmZlcmVudCBzdGF0ZXMuXG4gICAgICogICBUaGUgdWktdmlldyBjYW4gYmUgdGFyZ2V0ZWQgaW4gYSBWaWV3IHVzaW5nIHRoZSBuYW1lIChbW05nMVN0YXRlRGVjbGFyYXRpb24udmlld3NdXSkuXG4gICAgICpcbiAgICAgKiAtIGBhdXRvc2Nyb2xsYDogYW4gZXhwcmVzc2lvbi4gV2hlbiBpdCBldmFsdWF0ZXMgdG8gdHJ1ZSwgdGhlIGB1aS12aWV3YCB3aWxsIGJlIHNjcm9sbGVkIGludG8gdmlldyB3aGVuIGl0IGlzIGFjdGl2YXRlZC5cbiAgICAgKiAgIFVzZXMgW1skdWlWaWV3U2Nyb2xsXV0gdG8gZG8gdGhlIHNjcm9sbGluZy5cbiAgICAgKlxuICAgICAqIC0gYG9ubG9hZGA6IEV4cHJlc3Npb24gdG8gZXZhbHVhdGUgd2hlbmV2ZXIgdGhlIHZpZXcgdXBkYXRlcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBBIHZpZXcgY2FuIGJlIHVubmFtZWQgb3IgbmFtZWQuXG4gICAgICogYGBgaHRtbFxuICAgICAqIDwhLS0gVW5uYW1lZCAtLT5cbiAgICAgKiA8ZGl2IHVpLXZpZXc+PC9kaXY+XG4gICAgICpcbiAgICAgKiA8IS0tIE5hbWVkIC0tPlxuICAgICAqIDxkaXYgdWktdmlldz1cInZpZXdOYW1lXCI+PC9kaXY+XG4gICAgICpcbiAgICAgKiA8IS0tIE5hbWVkIChkaWZmZXJlbnQgc3R5bGUpIC0tPlxuICAgICAqIDx1aS12aWV3IG5hbWU9XCJ2aWV3TmFtZVwiPjwvdWktdmlldz5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSBoYXZlIG9uZSB1bm5hbWVkIHZpZXcgd2l0aGluIGFueSB0ZW1wbGF0ZSAob3Igcm9vdCBodG1sKS4gSWYgeW91IGFyZSBvbmx5IHVzaW5nIGFcbiAgICAgKiBzaW5nbGUgdmlldyBhbmQgaXQgaXMgdW5uYW1lZCB0aGVuIHlvdSBjYW4gcG9wdWxhdGUgaXQgbGlrZSBzbzpcbiAgICAgKlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8ZGl2IHVpLXZpZXc+PC9kaXY+XG4gICAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAgICAgKiAgIHRlbXBsYXRlOiBcIjxoMT5IRUxMTyE8L2gxPlwiXG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZSBhYm92ZSBpcyBhIGNvbnZlbmllbnQgc2hvcnRjdXQgZXF1aXZhbGVudCB0byBzcGVjaWZ5aW5nIHlvdXIgdmlldyBleHBsaWNpdGx5IHdpdGggdGhlXG4gICAgICogW1tOZzFTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0gY29uZmlnIHByb3BlcnR5LCBieSBuYW1lLCBpbiB0aGlzIGNhc2UgYW4gZW1wdHkgbmFtZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAgICAgKiAgIHZpZXdzOiB7XG4gICAgICogICAgIFwiXCI6IHtcbiAgICAgKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEJ1dCB0eXBpY2FsbHkgeW91J2xsIG9ubHkgdXNlIHRoZSB2aWV3cyBwcm9wZXJ0eSBpZiB5b3UgbmFtZSB5b3VyIHZpZXcgb3IgaGF2ZSBtb3JlIHRoYW4gb25lIHZpZXdcbiAgICAgKiBpbiB0aGUgc2FtZSB0ZW1wbGF0ZS4gVGhlcmUncyBub3QgcmVhbGx5IGEgY29tcGVsbGluZyByZWFzb24gdG8gbmFtZSBhIHZpZXcgaWYgaXRzIHRoZSBvbmx5IG9uZSxcbiAgICAgKiBidXQgeW91IGNvdWxkIGlmIHlvdSB3YW50ZWQsIGxpa2Ugc286XG4gICAgICpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGRpdiB1aS12aWV3PVwibWFpblwiPjwvZGl2PlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAkc3RhdGVQcm92aWRlci5zdGF0ZShcImhvbWVcIiwge1xuICAgICAqICAgdmlld3M6IHtcbiAgICAgKiAgICAgXCJtYWluXCI6IHtcbiAgICAgKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFJlYWxseSB0aG91Z2gsIHlvdSdsbCB1c2Ugdmlld3MgdG8gc2V0IHVwIG11bHRpcGxlIHZpZXdzOlxuICAgICAqXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxkaXYgdWktdmlldz48L2Rpdj5cbiAgICAgKiA8ZGl2IHVpLXZpZXc9XCJjaGFydFwiPjwvZGl2PlxuICAgICAqIDxkaXYgdWktdmlldz1cImRhdGFcIj48L2Rpdj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAgICAgKiAgIHZpZXdzOiB7XG4gICAgICogICAgIFwiXCI6IHtcbiAgICAgKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICAgICAqICAgICB9LFxuICAgICAqICAgICBcImNoYXJ0XCI6IHtcbiAgICAgKiAgICAgICB0ZW1wbGF0ZTogXCI8Y2hhcnRfdGhpbmcvPlwiXG4gICAgICogICAgIH0sXG4gICAgICogICAgIFwiZGF0YVwiOiB7XG4gICAgICogICAgICAgdGVtcGxhdGU6IFwiPGRhdGFfdGhpbmcvPlwiXG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKiB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlcyBmb3IgYGF1dG9zY3JvbGxgOlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8IS0tIElmIGF1dG9zY3JvbGwgcHJlc2VudCB3aXRoIG5vIGV4cHJlc3Npb24sXG4gICAgICogICAgICB0aGVuIHNjcm9sbCB1aS12aWV3IGludG8gdmlldyAtLT5cbiAgICAgKiA8dWktdmlldyBhdXRvc2Nyb2xsLz5cbiAgICAgKlxuICAgICAqIDwhLS0gSWYgYXV0b3Njcm9sbCBwcmVzZW50IHdpdGggdmFsaWQgZXhwcmVzc2lvbixcbiAgICAgKiAgICAgIHRoZW4gc2Nyb2xsIHVpLXZpZXcgaW50byB2aWV3IGlmIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUgLS0+XG4gICAgICogPHVpLXZpZXcgYXV0b3Njcm9sbD0ndHJ1ZScvPlxuICAgICAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J2ZhbHNlJy8+XG4gICAgICogPHVpLXZpZXcgYXV0b3Njcm9sbD0nc2NvcGVWYXJpYWJsZScvPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogUmVzb2x2ZSBkYXRhOlxuICAgICAqXG4gICAgICogVGhlIHJlc29sdmVkIGRhdGEgZnJvbSB0aGUgc3RhdGUncyBgcmVzb2x2ZWAgYmxvY2sgaXMgcGxhY2VkIG9uIHRoZSBzY29wZSBhcyBgJHJlc29sdmVgICh0aGlzXG4gICAgICogY2FuIGJlIGN1c3RvbWl6ZWQgdXNpbmcgW1tOZzFWaWV3RGVjbGFyYXRpb24ucmVzb2x2ZUFzXV0pLiAgVGhpcyBjYW4gYmUgdGhlbiBhY2Nlc3NlZCBmcm9tIHRoZSB0ZW1wbGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3aGVuIGBjb250cm9sbGVyQXNgIGlzIGJlaW5nIHVzZWQsIGAkcmVzb2x2ZWAgaXMgc2V0IG9uIHRoZSBjb250cm9sbGVyIGluc3RhbmNlICphZnRlciogdGhlXG4gICAgICogY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQuICBUaGUgYCRvbkluaXQoKWAgaG9vayBjYW4gYmUgdXNlZCB0byBwZXJmb3JtIGluaXRpYWxpemF0aW9uIGNvZGUgd2hpY2hcbiAgICAgKiBkZXBlbmRzIG9uIGAkcmVzb2x2ZWAgZGF0YS5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuICAgICAqICAgdGVtcGxhdGU6ICc8bXktY29tcG9uZW50IHVzZXI9XCIkcmVzb2x2ZS51c2VyXCI+PC9teS1jb21wb25lbnQ+JyxcbiAgICAgKiAgIHJlc29sdmU6IHtcbiAgICAgKiAgICAgdXNlcjogZnVuY3Rpb24oVXNlclNlcnZpY2UpIHsgcmV0dXJuIFVzZXJTZXJ2aWNlLmZldGNoVXNlcigpOyB9XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgdmFyIHVpVmlldztcbiAgICB1aVZpZXcgPSBbXG4gICAgICAgICckdmlldycsXG4gICAgICAgICckYW5pbWF0ZScsXG4gICAgICAgICckdWlWaWV3U2Nyb2xsJyxcbiAgICAgICAgJyRpbnRlcnBvbGF0ZScsXG4gICAgICAgICckcScsXG4gICAgICAgIGZ1bmN0aW9uICRWaWV3RGlyZWN0aXZlKCR2aWV3LCAkYW5pbWF0ZSwgJHVpVmlld1Njcm9sbCwgJGludGVycG9sYXRlLCAkcSkge1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UmVuZGVyZXIoYXR0cnMsIHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZW50ZXI6IGZ1bmN0aW9uIChlbGVtZW50LCB0YXJnZXQsIGNiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmcudmVyc2lvbi5taW5vciA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihlbGVtZW50LCBudWxsLCB0YXJnZXQpLnRoZW4oY2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoZWxlbWVudCwgbnVsbCwgdGFyZ2V0LCBjYik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxlYXZlOiBmdW5jdGlvbiAoZWxlbWVudCwgY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZy52ZXJzaW9uLm1pbm9yID4gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnQpLnRoZW4oY2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudCwgY2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBjb25maWdzRXF1YWwoY29uZmlnMSwgY29uZmlnMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25maWcxID09PSBjb25maWcyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJvb3REYXRhID0ge1xuICAgICAgICAgICAgICAgICRjZmc6IHsgdmlld0RlY2w6IHsgJGNvbnRleHQ6ICR2aWV3Ll9wbHVnaW5hcGkuX3Jvb3RWaWV3Q29udGV4dCgpIH0gfSxcbiAgICAgICAgICAgICAgICAkdWlWaWV3OiB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICAgICAgICAgICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogNDAwLFxuICAgICAgICAgICAgICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICAgICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAodEVsZW1lbnQsIHRBdHRycywgJHRyYW5zY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgJGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25sb2FkRXhwID0gYXR0cnNbJ29ubG9hZCddIHx8ICcnLCBhdXRvU2Nyb2xsRXhwID0gYXR0cnNbJ2F1dG9zY3JvbGwnXSwgcmVuZGVyZXIgPSBnZXRSZW5kZXJlcihhdHRycywgc2NvcGUpLCBpbmhlcml0ZWQgPSAkZWxlbWVudC5pbmhlcml0ZWREYXRhKCckdWlWaWV3JykgfHwgcm9vdERhdGEsIG5hbWUgPSAkaW50ZXJwb2xhdGUoYXR0cnNbJ3VpVmlldyddIHx8IGF0dHJzWyduYW1lJ10gfHwgJycpKHNjb3BlKSB8fCAnJGRlZmF1bHQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzRWwsIGN1cnJlbnRFbCwgY3VycmVudFNjb3BlLCB2aWV3Q29uZmlnLCB1bnJlZ2lzdGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVVJVmlldyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdHlwZTogJ25nMScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRpcmVjdGl2ZS5jb3VudCsrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnFuOiBpbmhlcml0ZWQuJHVpVmlldy5mcW4gPyBpbmhlcml0ZWQuJHVpVmlldy5mcW4gKyAnLicgKyBuYW1lIDogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnVXBkYXRlZDogY29uZmlnVXBkYXRlZENhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBjcmVhdGlvbkNvbnRleHQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjb250ZXh0IGluIHdoaWNoIHRoaXMgdWktdmlldyBcInRhZ1wiIHdhcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcm9tUGFyZW50VGFnQ29uZmlnID0gY29yZS5wYXJzZSgnJGNmZy52aWV3RGVjbC4kY29udGV4dCcpKGluaGVyaXRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IDx1aS12aWV3IG5hbWU9XCJmb29cIj48dWktdmlldyBuYW1lPVwiYmFyXCI+PC91aS12aWV3PjwvdWktdmlldz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL3VpLXJvdXRlci9pc3N1ZXMvMzM1NVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbVBhcmVudFRhZyA9IGNvcmUucGFyc2UoJyR1aVZpZXcuY3JlYXRpb25Db250ZXh0JykoaW5oZXJpdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyb21QYXJlbnRUYWdDb25maWcgfHwgZnJvbVBhcmVudFRhZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUudHJhY2UudHJhY2VVSVZpZXdFdmVudCgnTGlua2luZycsIGFjdGl2ZVVJVmlldyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb25maWdVcGRhdGVkQ2FsbGJhY2soY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZyAmJiAhKGNvbmZpZyBpbnN0YW5jZW9mIE5nMVZpZXdDb25maWcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3NFcXVhbCh2aWV3Q29uZmlnLCBjb25maWcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS50cmFjZS50cmFjZVVJVmlld0NvbmZpZ1VwZGF0ZWQoYWN0aXZlVUlWaWV3LCBjb25maWcgJiYgY29uZmlnLnZpZXdEZWNsICYmIGNvbmZpZy52aWV3RGVjbC4kY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVWaWV3KGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKCckdWlWaWV3JywgeyAkdWlWaWV3OiBhY3RpdmVVSVZpZXcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVWaWV3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyID0gJHZpZXcucmVnaXN0ZXJVSVZpZXcoYWN0aXZlVUlWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS50cmFjZS50cmFjZVVJVmlld0V2ZW50KCdEZXN0cm95aW5nL1VucmVnaXN0ZXJpbmcnLCBhY3RpdmVVSVZpZXcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVucmVnaXN0ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2xlYW51cExhc3RWaWV3KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUudHJhY2UudHJhY2VVSVZpZXdFdmVudCgnUmVtb3ZpbmcgKHByZXZpb3VzKSBlbCcsIHByZXZpb3VzRWwuZGF0YSgnJHVpVmlldycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNFbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS50cmFjZS50cmFjZVVJVmlld0V2ZW50KCdEZXN0cm95aW5nIHNjb3BlJywgYWN0aXZlVUlWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRkZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF92aWV3RGF0YV8xID0gY3VycmVudEVsLmRhdGEoJyR1aVZpZXdBbmltJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUudHJhY2UudHJhY2VVSVZpZXdFdmVudCgnQW5pbWF0ZSBvdXQnLCBfdmlld0RhdGFfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmxlYXZlKGN1cnJlbnRFbCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZXdEYXRhXzEuJCRhbmltTGVhdmUucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNFbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0VsID0gY3VycmVudEVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVZpZXcoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1Njb3BlID0gc2NvcGUuJG5ldygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmltRW50ZXIgPSAkcS5kZWZlcigpLCBhbmltTGVhdmUgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkdWlWaWV3RGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNmZzogY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdWlWaWV3OiBhY3RpdmVVSVZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHVpVmlld0FuaW0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhbmltRW50ZXI6IGFuaW1FbnRlci5wcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYW5pbUxlYXZlOiBhbmltTGVhdmUucHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCRhbmltTGVhdmU6IGFuaW1MZWF2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBuZ2RvYyBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBuYW1lIHVpLnJvdXRlci5zdGF0ZS5kaXJlY3RpdmU6dWktdmlldyMkdmlld0NvbnRlbnRMb2FkaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50T2YgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50VHlwZSBlbWl0cyBvbiB1aS12aWV3IGRpcmVjdGl2ZSBzY29wZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogRmlyZWQgb25jZSB0aGUgdmlldyAqKmJlZ2lucyBsb2FkaW5nKiosICpiZWZvcmUqIHRoZSBET00gaXMgcmVuZGVyZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgRXZlbnQgb2JqZWN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2aWV3TmFtZSBOYW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3BlLiRlbWl0KCckdmlld0NvbnRlbnRMb2FkaW5nJywgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lZCA9ICR0cmFuc2NsdWRlKG5ld1Njb3BlLCBmdW5jdGlvbiAoY2xvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZGF0YSgnJHVpVmlld0FuaW0nLCAkdWlWaWV3QW5pbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lLmRhdGEoJyR1aVZpZXcnLCAkdWlWaWV3RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmVudGVyKGNsb25lLCAkZWxlbWVudCwgZnVuY3Rpb24gb25VSVZpZXdFbnRlcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1FbnRlci5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNjb3BlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50QW5pbWF0aW9uRW5kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY29yZS5pc0RlZmluZWQoYXV0b1Njcm9sbEV4cCkgJiYgIWF1dG9TY3JvbGxFeHApIHx8IHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHVpVmlld1Njcm9sbChjbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdFZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RWwgPSBjbG9uZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbmV3U2NvcGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG5nZG9jIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG5hbWUgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3IyR2aWV3Q29udGVudExvYWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudE9mIHVpLnJvdXRlci5zdGF0ZS5kaXJlY3RpdmU6dWktdmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudFR5cGUgZW1pdHMgb24gdWktdmlldyBkaXJlY3RpdmUgc2NvcGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24gICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBGaXJlZCBvbmNlIHRoZSB2aWV3IGlzICoqbG9hZGVkKiosICphZnRlciogdGhlIERPTSBpcyByZW5kZXJlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBFdmVudCBvYmplY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckdmlld0NvbnRlbnRMb2FkZWQnLCBjb25maWcgfHwgdmlld0NvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRldmFsKG9ubG9hZEV4cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuICAgICAgICB9LFxuICAgIF07XG4gICAgJFZpZXdEaXJlY3RpdmVGaWxsLiRpbmplY3QgPSBbJyRjb21waWxlJywgJyRjb250cm9sbGVyJywgJyR0cmFuc2l0aW9ucycsICckdmlldycsICckcScsICckdGltZW91dCddO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gJFZpZXdEaXJlY3RpdmVGaWxsKCRjb21waWxlLCAkY29udHJvbGxlciwgJHRyYW5zaXRpb25zLCAkdmlldywgJHEsICR0aW1lb3V0KSB7XG4gICAgICAgIHZhciBnZXRDb250cm9sbGVyQXMgPSBjb3JlLnBhcnNlKCd2aWV3RGVjbC5jb250cm9sbGVyQXMnKTtcbiAgICAgICAgdmFyIGdldFJlc29sdmVBcyA9IGNvcmUucGFyc2UoJ3ZpZXdEZWNsLnJlc29sdmVBcycpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQ0EnLFxuICAgICAgICAgICAgcHJpb3JpdHk6IC00MDAsXG4gICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAodEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5pdGlhbCA9IHRFbGVtZW50Lmh0bWwoKTtcbiAgICAgICAgICAgICAgICB0RWxlbWVudC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsICRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YSgnJHVpVmlldycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50Lmh0bWwoaW5pdGlhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29tcGlsZSgkZWxlbWVudC5jb250ZW50cygpKShzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNmZyA9IGRhdGEuJGNmZyB8fCB7IHZpZXdEZWNsOiB7fSwgZ2V0VGVtcGxhdGU6IGNvcmUubm9vcCB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZUN0eCA9IGNmZy5wYXRoICYmIG5ldyBjb3JlLlJlc29sdmVDb250ZXh0KGNmZy5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuaHRtbChjZmcuZ2V0VGVtcGxhdGUoJGVsZW1lbnQsIHJlc29sdmVDdHgpIHx8IGluaXRpYWwpO1xuICAgICAgICAgICAgICAgICAgICBjb3JlLnRyYWNlLnRyYWNlVUlWaWV3RmlsbChkYXRhLiR1aVZpZXcsICRlbGVtZW50Lmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5rID0gJGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gY2ZnLmNvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyQXMgPSBnZXRDb250cm9sbGVyQXMoY2ZnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc29sdmVBcyA9IGdldFJlc29sdmVBcyhjZmcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxzID0gcmVzb2x2ZUN0eCAmJiBnZXRMb2NhbHMocmVzb2x2ZUN0eCk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlW3Jlc29sdmVBc10gPSBsb2NhbHM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJvbGxlckluc3RhbmNlID0gKCRjb250cm9sbGVyKGNvbnRyb2xsZXIsIGNvcmUuZXh0ZW5kKHt9LCBsb2NhbHMsIHsgJHNjb3BlOiBzY29wZSwgJGVsZW1lbnQ6ICRlbGVtZW50IH0pKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlckFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVbY29udHJvbGxlckFzXSA9IGNvbnRyb2xsZXJJbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZVtjb250cm9sbGVyQXNdW3Jlc29sdmVBc10gPSBsb2NhbHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBVc2UgJHZpZXcgc2VydmljZSBhcyBhIGNlbnRyYWwgcG9pbnQgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudC1sZXZlbCBob29rc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlbiwgd2hlbiBhIGNvbXBvbmVudCBpcyBjcmVhdGVkLCB0ZWxsIHRoZSAkdmlldyBzZXJ2aWNlLCBzbyBpdCBjYW4gaW52b2tlIGhvb2tzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkdmlldy5jb21wb25lbnRMb2FkZWQoY29udHJvbGxlckluc3RhbmNlLCB7ICRzY29wZTogc2NvcGUsICRlbGVtZW50OiAkZWxlbWVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjb3BlLiRvbignJGRlc3Ryb3knLCAoKSA9PiAkdmlldy5jb21wb25lbnRVbmxvYWRlZChjb250cm9sbGVySW5zdGFuY2UsIHsgJHNjb3BlOiBzY29wZSwgJGVsZW1lbnQ6ICRlbGVtZW50IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJywgY29udHJvbGxlckluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmNoaWxkcmVuKCkuZGF0YSgnJG5nQ29udHJvbGxlckNvbnRyb2xsZXInLCBjb250cm9sbGVySW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzKCRxLCAkdHJhbnNpdGlvbnMsIGNvbnRyb2xsZXJJbnN0YW5jZSwgc2NvcGUsIGNmZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIGNvbXBvbmVudCB0byBhcHBlYXIgaW4gdGhlIERPTVxuICAgICAgICAgICAgICAgICAgICBpZiAoY29yZS5pc1N0cmluZyhjZmcuY29tcG9uZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtlYm9iTmFtZSA9IGNvcmUua2Vib2JTdHJpbmcoY2ZnLmNvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnUmVnZXhwXzEgPSBuZXcgUmVnRXhwKFwiXih4LXxkYXRhLSk/XCIgKyBrZWJvYk5hbWUgKyBcIiRcIiwgJ2knKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRDb21wb25lbnRDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3RpdmVFbCA9IFtdLnNsaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKCRlbGVtZW50WzBdLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwgJiYgZWwudGFnTmFtZSAmJiB0YWdSZWdleHBfMS5leGVjKGVsLnRhZ05hbWUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlRWwgJiYgbmcuZWxlbWVudChkaXJlY3RpdmVFbCkuZGF0YShcIiRcIiArIGNmZy5jb21wb25lbnQgKyBcIkNvbnRyb2xsZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlcmVnaXN0ZXJXYXRjaF8xID0gc2NvcGUuJHdhdGNoKGdldENvbXBvbmVudENvbnRyb2xsZXIsIGZ1bmN0aW9uIChjdHJsSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN0cmxJbnN0YW5jZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcygkcSwgJHRyYW5zaXRpb25zLCBjdHJsSW5zdGFuY2UsIHNjb3BlLCBjZmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcmVnaXN0ZXJXYXRjaF8xKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsaW5rKHNjb3BlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICB2YXIgaGFzQ29tcG9uZW50SW1wbCA9IHR5cGVvZiBuZy5tb2R1bGUoJ3VpLnJvdXRlcicpWydjb21wb25lbnQnXSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAvKiogQGhpZGRlbiBpbmNyZW1lbnRpbmcgaWQgKi9cbiAgICB2YXIgX3VpQ2FuRXhpdElkID0gMDtcbiAgICAvKiogQGhpZGRlbiBUT0RPOiBtb3ZlIHRoZXNlIGNhbGxiYWNrcyB0byAkdmlldyBhbmQvb3IgYC9ob29rcy9jb21wb25lbnRzLnRzYCBvciBzb21ldGhpbmcgKi9cbiAgICBmdW5jdGlvbiByZWdpc3RlckNvbnRyb2xsZXJDYWxsYmFja3MoJHEsICR0cmFuc2l0aW9ucywgY29udHJvbGxlckluc3RhbmNlLCAkc2NvcGUsIGNmZykge1xuICAgICAgICAvLyBDYWxsICRvbkluaXQoKSBBU0FQXG4gICAgICAgIGlmIChjb3JlLmlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLiRvbkluaXQpICYmICEoY2ZnLnZpZXdEZWNsLmNvbXBvbmVudCAmJiBoYXNDb21wb25lbnRJbXBsKSkge1xuICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlLiRvbkluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmlld1N0YXRlID0gY29yZS50YWlsKGNmZy5wYXRoKS5zdGF0ZS5zZWxmO1xuICAgICAgICB2YXIgaG9va09wdGlvbnMgPSB7IGJpbmQ6IGNvbnRyb2xsZXJJbnN0YW5jZSB9O1xuICAgICAgICAvLyBBZGQgY29tcG9uZW50LWxldmVsIGhvb2sgZm9yIG9uVWlQYXJhbXNDaGFuZ2VkXG4gICAgICAgIGlmIChjb3JlLmlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLnVpT25QYXJhbXNDaGFuZ2VkKSkge1xuICAgICAgICAgICAgdmFyIHJlc29sdmVDb250ZXh0ID0gbmV3IGNvcmUuUmVzb2x2ZUNvbnRleHQoY2ZnLnBhdGgpO1xuICAgICAgICAgICAgdmFyIHZpZXdDcmVhdGlvblRyYW5zXzEgPSByZXNvbHZlQ29udGV4dC5nZXRSZXNvbHZhYmxlKCckdHJhbnNpdGlvbiQnKS5kYXRhO1xuICAgICAgICAgICAgLy8gRmlyZSBjYWxsYmFjayBvbiBhbnkgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uXG4gICAgICAgICAgICB2YXIgcGFyYW1zVXBkYXRlZCA9IGZ1bmN0aW9uICgkdHJhbnNpdGlvbiQpIHtcbiAgICAgICAgICAgICAgICAvLyBFeGl0IGVhcmx5IGlmIHRoZSAkdHJhbnNpdGlvbiQgaXMgdGhlIHNhbWUgYXMgdGhlIHZpZXcgd2FzIGNyZWF0ZWQgd2l0aGluLlxuICAgICAgICAgICAgICAgIC8vIEV4aXQgZWFybHkgaWYgdGhlICR0cmFuc2l0aW9uJCB3aWxsIGV4aXQgdGhlIHN0YXRlIHRoZSB2aWV3IGlzIGZvci5cbiAgICAgICAgICAgICAgICBpZiAoJHRyYW5zaXRpb24kID09PSB2aWV3Q3JlYXRpb25UcmFuc18xIHx8ICR0cmFuc2l0aW9uJC5leGl0aW5nKCkuaW5kZXhPZih2aWV3U3RhdGUpICE9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciB0b1BhcmFtcyA9ICR0cmFuc2l0aW9uJC5wYXJhbXMoJ3RvJyk7XG4gICAgICAgICAgICAgICAgdmFyIGZyb21QYXJhbXMgPSAkdHJhbnNpdGlvbiQucGFyYW1zKCdmcm9tJyk7XG4gICAgICAgICAgICAgICAgdmFyIGdldE5vZGVTY2hlbWEgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5wYXJhbVNjaGVtYTsgfTtcbiAgICAgICAgICAgICAgICB2YXIgdG9TY2hlbWEgPSAkdHJhbnNpdGlvbiRcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVDaGFuZ2VzKCd0bycpXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoZ2V0Tm9kZVNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgLnJlZHVjZShjb3JlLnVubmVzdFIsIFtdKTtcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVNjaGVtYSA9ICR0cmFuc2l0aW9uJFxuICAgICAgICAgICAgICAgICAgICAudHJlZUNoYW5nZXMoJ2Zyb20nKVxuICAgICAgICAgICAgICAgICAgICAubWFwKGdldE5vZGVTY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoY29yZS51bm5lc3RSLCBbXSk7XG4gICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdG8gcGFyYW1zIHRoYXQgaGF2ZSBkaWZmZXJlbnQgdmFsdWVzIHRoYW4gdGhlIGZyb20gcGFyYW1zXG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZWRUb1BhcmFtcyA9IHRvU2NoZW1hLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IGZyb21TY2hlbWEuaW5kZXhPZihwYXJhbSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHggPT09IC0xIHx8ICFmcm9tU2NoZW1hW2lkeF0udHlwZS5lcXVhbHModG9QYXJhbXNbcGFyYW0uaWRdLCBmcm9tUGFyYW1zW3BhcmFtLmlkXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gT25seSB0cmlnZ2VyIGNhbGxiYWNrIGlmIGEgdG8gcGFyYW0gaGFzIGNoYW5nZWQgb3IgaXMgbmV3XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZWRUb1BhcmFtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5nZWRLZXlzXzEgPSBjaGFuZ2VkVG9QYXJhbXMubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIHRoZSBwYXJhbXMgdG8gb25seSBjaGFuZ2VkL25ldyB0byBwYXJhbXMuICBgJHRyYW5zaXRpb24kLnBhcmFtcygpYCBtYXkgYmUgdXNlZCB0byBnZXQgYWxsIHBhcmFtcy5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlcyA9IGNvcmUuZmlsdGVyKHRvUGFyYW1zLCBmdW5jdGlvbiAodmFsLCBrZXkpIHsgcmV0dXJuIGNoYW5nZWRLZXlzXzEuaW5kZXhPZihrZXkpICE9PSAtMTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZS51aU9uUGFyYW1zQ2hhbmdlZChuZXdWYWx1ZXMsICR0cmFuc2l0aW9uJCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgJHRyYW5zaXRpb25zLm9uU3VjY2Vzcyh7fSwgcGFyYW1zVXBkYXRlZCwgaG9va09wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgY29tcG9uZW50LWxldmVsIGhvb2sgZm9yIHVpQ2FuRXhpdFxuICAgICAgICBpZiAoY29yZS5pc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS51aUNhbkV4aXQpKSB7XG4gICAgICAgICAgICB2YXIgaWRfMSA9IF91aUNhbkV4aXRJZCsrO1xuICAgICAgICAgICAgdmFyIGNhY2hlUHJvcF8xID0gJ191aUNhbkV4aXRJZHMnO1xuICAgICAgICAgICAgLy8gUmV0dXJucyB0cnVlIGlmIGEgcmVkaXJlY3QgdHJhbnNpdGlvbiBhbHJlYWR5IGFuc3dlcmVkIHRydXRoeVxuICAgICAgICAgICAgdmFyIHByZXZUcnV0aHlBbnN3ZXJfMSA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIXRyYW5zICYmICgodHJhbnNbY2FjaGVQcm9wXzFdICYmIHRyYW5zW2NhY2hlUHJvcF8xXVtpZF8xXSA9PT0gdHJ1ZSkgfHwgcHJldlRydXRoeUFuc3dlcl8xKHRyYW5zLnJlZGlyZWN0ZWRGcm9tKCkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBJZiBhIHVzZXIgYW5zd2VyZWQgeWVzLCBidXQgdGhlIHRyYW5zaXRpb24gd2FzIGxhdGVyIHJlZGlyZWN0ZWQsIGRvbid0IGFsc28gYXNrIGZvciB0aGUgbmV3IHJlZGlyZWN0IHRyYW5zaXRpb25cbiAgICAgICAgICAgIHZhciB3cmFwcGVkSG9vayA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlO1xuICAgICAgICAgICAgICAgIHZhciBpZHMgPSAodHJhbnNbY2FjaGVQcm9wXzFdID0gdHJhbnNbY2FjaGVQcm9wXzFdIHx8IHt9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXByZXZUcnV0aHlBbnN3ZXJfMSh0cmFucykpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRxLndoZW4oY29udHJvbGxlckluc3RhbmNlLnVpQ2FuRXhpdCh0cmFucykpO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gKGlkc1tpZF8xXSA9IHZhbCAhPT0gZmFsc2UpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNyaXRlcmlhID0geyBleGl0aW5nOiB2aWV3U3RhdGUubmFtZSB9O1xuICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdHJhbnNpdGlvbnMub25CZWZvcmUoY3JpdGVyaWEsIHdyYXBwZWRIb29rLCBob29rT3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCB1aVZpZXcpO1xuICAgIG5nLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCAkVmlld0RpcmVjdGl2ZUZpbGwpO1xuXG4gICAgLyoqIEBtb2R1bGUgbmcxICovIC8qKiAqL1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gJFZpZXdTY3JvbGxQcm92aWRlcigpIHtcbiAgICAgICAgdmFyIHVzZUFuY2hvclNjcm9sbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVzZUFuY2hvclNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHVzZUFuY2hvclNjcm9sbCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuJGdldCA9IFtcbiAgICAgICAgICAgICckYW5jaG9yU2Nyb2xsJyxcbiAgICAgICAgICAgICckdGltZW91dCcsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJGFuY2hvclNjcm9sbCwgJHRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlQW5jaG9yU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkYW5jaG9yU2Nyb2xsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudFswXS5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICAgICAgICAgICAgICB9LCAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgfVxuICAgIG5nLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykucHJvdmlkZXIoJyR1aVZpZXdTY3JvbGwnLCAkVmlld1Njcm9sbFByb3ZpZGVyKTtcblxuICAgIC8qKlxuICAgICAqIE1haW4gZW50cnkgcG9pbnQgZm9yIGFuZ3VsYXIgMS54IGJ1aWxkXG4gICAgICogQG1vZHVsZSBuZzFcbiAgICAgKi8gLyoqICovXG4gICAgdmFyIGluZGV4ID0gJ3VpLnJvdXRlcic7XG5cbiAgICBPYmplY3Qua2V5cyhjb3JlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgZXhwb3J0c1trZXldID0gY29yZVtrZXldOyB9KTtcbiAgICBleHBvcnRzLmNvcmUgPSBjb3JlO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGluZGV4O1xuICAgIGV4cG9ydHMud2F0Y2hEaWdlc3RzID0gd2F0Y2hEaWdlc3RzO1xuICAgIGV4cG9ydHMuZ2V0TG9jYWxzID0gZ2V0TG9jYWxzO1xuICAgIGV4cG9ydHMuZ2V0TmcxVmlld0NvbmZpZ0ZhY3RvcnkgPSBnZXROZzFWaWV3Q29uZmlnRmFjdG9yeTtcbiAgICBleHBvcnRzLm5nMVZpZXdzQnVpbGRlciA9IG5nMVZpZXdzQnVpbGRlcjtcbiAgICBleHBvcnRzLk5nMVZpZXdDb25maWcgPSBOZzFWaWV3Q29uZmlnO1xuICAgIGV4cG9ydHMuU3RhdGVQcm92aWRlciA9IFN0YXRlUHJvdmlkZXI7XG4gICAgZXhwb3J0cy5VcmxSb3V0ZXJQcm92aWRlciA9IFVybFJvdXRlclByb3ZpZGVyO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVpLXJvdXRlci1hbmd1bGFyanMuanMubWFwXG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSwgZXZhbCkoXCJ0aGlzXCIpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiaW1wb3J0IGFwaSBmcm9tICcuLi9hcGkvYXBpJ1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZUNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcigkc2NvcGUpIHtcbiAgICB0aGlzLnNvbWV0aGluZyA9bnVsbDtcbiAgfTtcbiAgZ2V0TWVzc2FnZSgpIHtcbiAgICBsZXQgcGFyYW0gPSB7XG4gICAgICB4bmFtZTogJ2RvZG9sJ1xuICAgIH1cbiAgICBhcGkuZG9Qb3N0KCd3YWxsZXR3LmV4bWFzdGVyYmFuaz8nLCBwYXJhbSxmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICBpZihyZXNwb25zZS5TVEFUVVMgPT09J09LJyl7XG4gICAgICAgIHRoaXMuc29tZXRoaW5nPXJlc3BvbnNlO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn0iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLnNlcnZlciA9ICdodHRwczovL3d3dy5leGFjdC5jby5pZC9TRS8nXG4gICAgICAgIC8vdGhpcy5zZXJ2ZXIgPSAnaHR0cDovLzE5Mi4xNjguMC4xMTM6ODA4NC9TRS8nOyBcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGRvUG9zdChzZXJ2aWNlLCBkYXRhLHJlc3VsdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGh0dHBTZXJ2ZXIgPSB0aGlzLnNlcnZlciArIHNlcnZpY2U7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkLnBvc3QoaHR0cFNlcnZlciwgZGF0YSwgZnVuY3Rpb24gKHJlc3BvbnNlLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0IChKU09OLnBhcnNlKHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2Vjb25kIHN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XG4gICAgICAgICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmaW5pc2hlZFwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHN0YXRpYyBhc3luYyBkb0dldChzZXJ2aWNlLCBkYXRhLHJlc3VsdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGh0dHBTZXJ2ZXIgPSB0aGlzLnNlcnZlciArIHNlcnZpY2U7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkLmdldChodHRwU2VydmVyLCBkYXRhLCBmdW5jdGlvbiAocmVzcG9uc2UsIHN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNlY29uZCBzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xuICAgICAgICAgICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmluaXNoZWRcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbn1cbiIsIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2My4zLjFcbiAqIGh0dHBzOi8vanF1ZXJ5LmNvbS9cbiAqXG4gKiBJbmNsdWRlcyBTaXp6bGUuanNcbiAqIGh0dHBzOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE4LTAxLTIwVDE3OjI0WlxuICovXG4oIGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vIEZvciBDb21tb25KUyBhbmQgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgd2hlcmUgYSBwcm9wZXIgYHdpbmRvd2Bcblx0XHQvLyBpcyBwcmVzZW50LCBleGVjdXRlIHRoZSBmYWN0b3J5IGFuZCBnZXQgalF1ZXJ5LlxuXHRcdC8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaGF2ZSBhIGB3aW5kb3dgIHdpdGggYSBgZG9jdW1lbnRgXG5cdFx0Ly8gKHN1Y2ggYXMgTm9kZS5qcyksIGV4cG9zZSBhIGZhY3RvcnkgYXMgbW9kdWxlLmV4cG9ydHMuXG5cdFx0Ly8gVGhpcyBhY2NlbnR1YXRlcyB0aGUgbmVlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgcmVhbCBgd2luZG93YC5cblx0XHQvLyBlLmcuIHZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpKHdpbmRvdyk7XG5cdFx0Ly8gU2VlIHRpY2tldCAjMTQ1NDkgZm9yIG1vcmUgaW5mby5cblx0XHRtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/XG5cdFx0XHRmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6XG5cdFx0XHRmdW5jdGlvbiggdyApIHtcblx0XHRcdFx0aWYgKCAhdy5kb2N1bWVudCApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhY3RvcnkoIHcgKTtcblx0XHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0ZmFjdG9yeSggZ2xvYmFsICk7XG5cdH1cblxuLy8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXRcbn0gKSggdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkge1xuXG4vLyBFZGdlIDw9IDEyIC0gMTMrLCBGaXJlZm94IDw9MTggLSA0NSssIElFIDEwIC0gMTEsIFNhZmFyaSA1LjEgLSA5KywgaU9TIDYgLSA5LjFcbi8vIHRocm93IGV4Y2VwdGlvbnMgd2hlbiBub24tc3RyaWN0IGNvZGUgKGUuZy4sIEFTUC5ORVQgNC41KSBhY2Nlc3NlcyBzdHJpY3QgbW9kZVxuLy8gYXJndW1lbnRzLmNhbGxlZS5jYWxsZXIgKHRyYWMtMTMzMzUpLiBCdXQgYXMgb2YgalF1ZXJ5IDMuMCAoMjAxNiksIHN0cmljdCBtb2RlIHNob3VsZCBiZSBjb21tb25cbi8vIGVub3VnaCB0aGF0IGFsbCBzdWNoIGF0dGVtcHRzIGFyZSBndWFyZGVkIGluIGEgdHJ5IGJsb2NrLlxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBhcnIgPSBbXTtcblxudmFyIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50O1xuXG52YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbnZhciBzbGljZSA9IGFyci5zbGljZTtcblxudmFyIGNvbmNhdCA9IGFyci5jb25jYXQ7XG5cbnZhciBwdXNoID0gYXJyLnB1c2g7XG5cbnZhciBpbmRleE9mID0gYXJyLmluZGV4T2Y7XG5cbnZhciBjbGFzczJ0eXBlID0ge307XG5cbnZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7XG5cbnZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgZm5Ub1N0cmluZyA9IGhhc093bi50b1N0cmluZztcblxudmFyIE9iamVjdEZ1bmN0aW9uU3RyaW5nID0gZm5Ub1N0cmluZy5jYWxsKCBPYmplY3QgKTtcblxudmFyIHN1cHBvcnQgPSB7fTtcblxudmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiBpc0Z1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgIC8vIFN1cHBvcnQ6IENocm9tZSA8PTU3LCBGaXJlZm94IDw9NTJcbiAgICAgIC8vIEluIHNvbWUgYnJvd3NlcnMsIHR5cGVvZiByZXR1cm5zIFwiZnVuY3Rpb25cIiBmb3IgSFRNTCA8b2JqZWN0PiBlbGVtZW50c1xuICAgICAgLy8gKGkuZS4sIGB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvYmplY3RcIiApID09PSBcImZ1bmN0aW9uXCJgKS5cbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gY2xhc3NpZnkgKmFueSogRE9NIG5vZGUgYXMgYSBmdW5jdGlvbi5cbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIG9iai5ub2RlVHlwZSAhPT0gXCJudW1iZXJcIjtcbiAgfTtcblxuXG52YXIgaXNXaW5kb3cgPSBmdW5jdGlvbiBpc1dpbmRvdyggb2JqICkge1xuXHRcdHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG5cdH07XG5cblxuXG5cblx0dmFyIHByZXNlcnZlZFNjcmlwdEF0dHJpYnV0ZXMgPSB7XG5cdFx0dHlwZTogdHJ1ZSxcblx0XHRzcmM6IHRydWUsXG5cdFx0bm9Nb2R1bGU6IHRydWVcblx0fTtcblxuXHRmdW5jdGlvbiBET01FdmFsKCBjb2RlLCBkb2MsIG5vZGUgKSB7XG5cdFx0ZG9jID0gZG9jIHx8IGRvY3VtZW50O1xuXG5cdFx0dmFyIGksXG5cdFx0XHRzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJzY3JpcHRcIiApO1xuXG5cdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdGlmICggbm9kZSApIHtcblx0XHRcdGZvciAoIGkgaW4gcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyApIHtcblx0XHRcdFx0aWYgKCBub2RlWyBpIF0gKSB7XG5cdFx0XHRcdFx0c2NyaXB0WyBpIF0gPSBub2RlWyBpIF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZG9jLmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdCApLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApO1xuXHR9XG5cblxuZnVuY3Rpb24gdG9UeXBlKCBvYmogKSB7XG5cdGlmICggb2JqID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIG9iaiArIFwiXCI7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9Mi4zIG9ubHkgKGZ1bmN0aW9uaXNoIFJlZ0V4cClcblx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cblx0XHRjbGFzczJ0eXBlWyB0b1N0cmluZy5jYWxsKCBvYmogKSBdIHx8IFwib2JqZWN0XCIgOlxuXHRcdHR5cGVvZiBvYmo7XG59XG4vKiBnbG9iYWwgU3ltYm9sICovXG4vLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuZXNsaW50cmMuanNvbiB3b3VsZCBjcmVhdGUgYSBkYW5nZXIgb2YgdXNpbmcgdGhlIGdsb2JhbFxuLy8gdW5ndWFyZGVkIGluIGFub3RoZXIgcGxhY2UsIGl0IHNlZW1zIHNhZmVyIHRvIGRlZmluZSBnbG9iYWwgb25seSBmb3IgdGhpcyBtb2R1bGVcblxuXG5cbnZhclxuXHR2ZXJzaW9uID0gXCIzLjMuMVwiLFxuXG5cdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblxuXHRcdC8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJ1xuXHRcdC8vIE5lZWQgaW5pdCBpZiBqUXVlcnkgaXMgY2FsbGVkIChqdXN0IGFsbG93IGVycm9yIHRvIGJlIHRocm93biBpZiBub3QgaW5jbHVkZWQpXG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHlcblx0Ly8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQXG5cdHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nO1xuXG5qUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0ge1xuXG5cdC8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWRcblx0anF1ZXJ5OiB2ZXJzaW9uLFxuXG5cdGNvbnN0cnVjdG9yOiBqUXVlcnksXG5cblx0Ly8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwXG5cdGxlbmd0aDogMCxcblxuXHR0b0FycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1Jcblx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0Z2V0OiBmdW5jdGlvbiggbnVtICkge1xuXG5cdFx0Ly8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheVxuXHRcdGlmICggbnVtID09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXRcblx0XHRyZXR1cm4gbnVtIDwgMCA/IHRoaXNbIG51bSArIHRoaXMubGVuZ3RoIF0gOiB0aGlzWyBudW0gXTtcblx0fSxcblxuXHQvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG5cdC8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KVxuXHRwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblxuXHRcdC8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0XG5cdFx0dmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApO1xuXG5cdFx0Ly8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSlcblx0XHRyZXQucHJldk9iamVjdCA9IHRoaXM7XG5cblx0XHQvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldFxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0Ly8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC5cblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2sgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTtcblx0XHR9ICkgKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzWyBqIF0gXSA6IFtdICk7XG5cdH0sXG5cblx0ZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKTtcblx0fSxcblxuXHQvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdC8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLlxuXHRwdXNoOiBwdXNoLFxuXHRzb3J0OiBhcnIuc29ydCxcblx0c3BsaWNlOiBhcnIuc3BsaWNlXG59O1xuXG5qUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhaXNGdW5jdGlvbiggdGFyZ2V0ICkgKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHQvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcblx0aWYgKCBpID09PSBsZW5ndGggKSB7XG5cdFx0dGFyZ2V0ID0gdGhpcztcblx0XHRpLS07XG5cdH1cblxuXHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblxuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoICggb3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdICkgIT0gbnVsbCApIHtcblxuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRzcmMgPSB0YXJnZXRbIG5hbWUgXTtcblx0XHRcdFx0Y29weSA9IG9wdGlvbnNbIG5hbWUgXTtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdGlmICggdGFyZ2V0ID09PSBjb3B5ICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvcHkgKSB8fFxuXHRcdFx0XHRcdCggY29weUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KCBjb3B5ICkgKSApICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSApIHtcblx0XHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBBcnJheS5pc0FycmF5KCBzcmMgKSA/IHNyYyA6IFtdO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBzcmMgKSA/IHNyYyA6IHt9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTtcblxuXHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGNvcHk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZVxuXHRleHBhbmRvOiBcImpRdWVyeVwiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXG5cdC8vIEFzc3VtZSBqUXVlcnkgaXMgcmVhZHkgd2l0aG91dCB0aGUgcmVhZHkgbW9kdWxlXG5cdGlzUmVhZHk6IHRydWUsXG5cblx0ZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCBtc2cgKTtcblx0fSxcblxuXHRub29wOiBmdW5jdGlvbigpIHt9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIHByb3RvLCBDdG9yO1xuXG5cdFx0Ly8gRGV0ZWN0IG9idmlvdXMgbmVnYXRpdmVzXG5cdFx0Ly8gVXNlIHRvU3RyaW5nIGluc3RlYWQgb2YgalF1ZXJ5LnR5cGUgdG8gY2F0Y2ggaG9zdCBvYmplY3RzXG5cdFx0aWYgKCAhb2JqIHx8IHRvU3RyaW5nLmNhbGwoIG9iaiApICE9PSBcIltvYmplY3QgT2JqZWN0XVwiICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHByb3RvID0gZ2V0UHJvdG8oIG9iaiApO1xuXG5cdFx0Ly8gT2JqZWN0cyB3aXRoIG5vIHByb3RvdHlwZSAoZS5nLiwgYE9iamVjdC5jcmVhdGUoIG51bGwgKWApIGFyZSBwbGFpblxuXHRcdGlmICggIXByb3RvICkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gT2JqZWN0cyB3aXRoIHByb3RvdHlwZSBhcmUgcGxhaW4gaWZmIHRoZXkgd2VyZSBjb25zdHJ1Y3RlZCBieSBhIGdsb2JhbCBPYmplY3QgZnVuY3Rpb25cblx0XHRDdG9yID0gaGFzT3duLmNhbGwoIHByb3RvLCBcImNvbnN0cnVjdG9yXCIgKSAmJiBwcm90by5jb25zdHJ1Y3Rvcjtcblx0XHRyZXR1cm4gdHlwZW9mIEN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBmblRvU3RyaW5nLmNhbGwoIEN0b3IgKSA9PT0gT2JqZWN0RnVuY3Rpb25TdHJpbmc7XG5cdH0sXG5cblx0aXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblxuXHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5cdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lc2xpbnQvZXNsaW50L2lzc3Vlcy82MTI1XG5cdFx0dmFyIG5hbWU7XG5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0Ly8gRXZhbHVhdGVzIGEgc2NyaXB0IGluIGEgZ2xvYmFsIGNvbnRleHRcblx0Z2xvYmFsRXZhbDogZnVuY3Rpb24oIGNvZGUgKSB7XG5cdFx0RE9NRXZhbCggY29kZSApO1xuXHR9LFxuXG5cdGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrICkge1xuXHRcdHZhciBsZW5ndGgsIGkgPSAwO1xuXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7XG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBvYmo7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5XG5cdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdHJldHVybiB0ZXh0ID09IG51bGwgP1xuXHRcdFx0XCJcIiA6XG5cdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0fSxcblxuXHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHtcblx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuXHRcdGlmICggYXJyICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXlMaWtlKCBPYmplY3QoIGFyciApICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggcmV0LFxuXHRcdFx0XHRcdHR5cGVvZiBhcnIgPT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdFsgYXJyIF0gOiBhcnJcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guY2FsbCggcmV0LCBhcnIgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdGluQXJyYXk6IGZ1bmN0aW9uKCBlbGVtLCBhcnIsIGkgKSB7XG5cdFx0cmV0dXJuIGFyciA9PSBudWxsID8gLTEgOiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdG1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHtcblx0XHR2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsXG5cdFx0XHRqID0gMCxcblx0XHRcdGkgPSBmaXJzdC5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdGZpcnN0WyBpKysgXSA9IHNlY29uZFsgaiBdO1xuXHRcdH1cblxuXHRcdGZpcnN0Lmxlbmd0aCA9IGk7XG5cblx0XHRyZXR1cm4gZmlyc3Q7XG5cdH0sXG5cblx0Z3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkge1xuXHRcdHZhciBjYWxsYmFja0ludmVyc2UsXG5cdFx0XHRtYXRjaGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcblx0XHRcdGNhbGxiYWNrRXhwZWN0ID0gIWludmVydDtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCBvbmx5IHNhdmluZyB0aGUgaXRlbXNcblx0XHQvLyB0aGF0IHBhc3MgdGhlIHZhbGlkYXRvciBmdW5jdGlvblxuXHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0Y2FsbGJhY2tJbnZlcnNlID0gIWNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpICk7XG5cdFx0XHRpZiAoIGNhbGxiYWNrSW52ZXJzZSAhPT0gY2FsbGJhY2tFeHBlY3QgKSB7XG5cdFx0XHRcdG1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVzO1xuXHR9LFxuXG5cdC8vIGFyZyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHtcblx0XHR2YXIgbGVuZ3RoLCB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0cmV0ID0gW107XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgdHJhbnNsYXRpbmcgZWFjaCBvZiB0aGUgaXRlbXMgdG8gdGhlaXIgbmV3IHZhbHVlc1xuXHRcdGlmICggaXNBcnJheUxpa2UoIGVsZW1zICkgKSB7XG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGg7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKCBpIGluIGVsZW1zICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0cmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApO1xuXHR9LFxuXG5cdC8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0c1xuXHRndWlkOiAxLFxuXG5cdC8vIGpRdWVyeS5zdXBwb3J0IGlzIG5vdCB1c2VkIGluIENvcmUgYnV0IG90aGVyIHByb2plY3RzIGF0dGFjaCB0aGVpclxuXHQvLyBwcm9wZXJ0aWVzIHRvIGl0IHNvIGl0IG5lZWRzIHRvIGV4aXN0LlxuXHRzdXBwb3J0OiBzdXBwb3J0XG59ICk7XG5cbmlmICggdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRqUXVlcnkuZm5bIFN5bWJvbC5pdGVyYXRvciBdID0gYXJyWyBTeW1ib2wuaXRlcmF0b3IgXTtcbn1cblxuLy8gUG9wdWxhdGUgdGhlIGNsYXNzMnR5cGUgbWFwXG5qUXVlcnkuZWFjaCggXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbFwiLnNwbGl0KCBcIiBcIiApLFxuZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xufSApO1xuXG5mdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkge1xuXG5cdC8vIFN1cHBvcnQ6IHJlYWwgaU9TIDguMiBvbmx5IChub3QgcmVwcm9kdWNpYmxlIGluIHNpbXVsYXRvcilcblx0Ly8gYGluYCBjaGVjayB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0yMTQ1KVxuXHQvLyBoYXNPd24gaXNuJ3QgdXNlZCBoZXJlIGR1ZSB0byBmYWxzZSBuZWdhdGl2ZXNcblx0Ly8gcmVnYXJkaW5nIE5vZGVsaXN0IGxlbmd0aCBpbiBJRVxuXHR2YXIgbGVuZ3RoID0gISFvYmogJiYgXCJsZW5ndGhcIiBpbiBvYmogJiYgb2JqLmxlbmd0aCxcblx0XHR0eXBlID0gdG9UeXBlKCBvYmogKTtcblxuXHRpZiAoIGlzRnVuY3Rpb24oIG9iaiApIHx8IGlzV2luZG93KCBvYmogKSApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRyZXR1cm4gdHlwZSA9PT0gXCJhcnJheVwiIHx8IGxlbmd0aCA9PT0gMCB8fFxuXHRcdHR5cGVvZiBsZW5ndGggPT09IFwibnVtYmVyXCIgJiYgbGVuZ3RoID4gMCAmJiAoIGxlbmd0aCAtIDEgKSBpbiBvYmo7XG59XG52YXIgU2l6emxlID1cbi8qIVxuICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjIuMy4zXG4gKiBodHRwczovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxNi0wOC0wOFxuICovXG4oZnVuY3Rpb24oIHdpbmRvdyApIHtcblxudmFyIGksXG5cdHN1cHBvcnQsXG5cdEV4cHIsXG5cdGdldFRleHQsXG5cdGlzWE1MLFxuXHR0b2tlbml6ZSxcblx0Y29tcGlsZSxcblx0c2VsZWN0LFxuXHRvdXRlcm1vc3RDb250ZXh0LFxuXHRzb3J0SW5wdXQsXG5cdGhhc0R1cGxpY2F0ZSxcblxuXHQvLyBMb2NhbCBkb2N1bWVudCB2YXJzXG5cdHNldERvY3VtZW50LFxuXHRkb2N1bWVudCxcblx0ZG9jRWxlbSxcblx0ZG9jdW1lbnRJc0hUTUwsXG5cdHJidWdneVFTQSxcblx0cmJ1Z2d5TWF0Y2hlcyxcblx0bWF0Y2hlcyxcblx0Y29udGFpbnMsXG5cblx0Ly8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuXHRleHBhbmRvID0gXCJzaXp6bGVcIiArIDEgKiBuZXcgRGF0ZSgpLFxuXHRwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsXG5cdGRpcnJ1bnMgPSAwLFxuXHRkb25lID0gMCxcblx0Y2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRjb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0c29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIDA7XG5cdH0sXG5cblx0Ly8gSW5zdGFuY2UgbWV0aG9kc1xuXHRoYXNPd24gPSAoe30pLmhhc093blByb3BlcnR5LFxuXHRhcnIgPSBbXSxcblx0cG9wID0gYXJyLnBvcCxcblx0cHVzaF9uYXRpdmUgPSBhcnIucHVzaCxcblx0cHVzaCA9IGFyci5wdXNoLFxuXHRzbGljZSA9IGFyci5zbGljZSxcblx0Ly8gVXNlIGEgc3RyaXBwZWQtZG93biBpbmRleE9mIGFzIGl0J3MgZmFzdGVyIHRoYW4gbmF0aXZlXG5cdC8vIGh0dHBzOi8vanNwZXJmLmNvbS90aG9yLWluZGV4b2YtdnMtZm9yLzVcblx0aW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdGxlbiA9IGxpc3QubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0aWYgKCBsaXN0W2ldID09PSBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXG5cdGJvb2xlYW5zID0gXCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLFxuXG5cdC8vIFJlZ3VsYXIgZXhwcmVzc2lvbnNcblxuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZVxuXHR3aGl0ZXNwYWNlID0gXCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLFxuXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllclxuXHRpZGVudGlmaWVyID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXDAtXFxcXHhhMF0pK1wiLFxuXG5cdC8vIEF0dHJpYnV0ZSBzZWxlY3RvcnM6IGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHRhdHRyaWJ1dGVzID0gXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIE9wZXJhdG9yIChjYXB0dXJlIDIpXG5cdFx0XCIqKFsqXiR8IX5dPz0pXCIgKyB3aGl0ZXNwYWNlICtcblx0XHQvLyBcIkF0dHJpYnV0ZSB2YWx1ZXMgbXVzdCBiZSBDU1MgaWRlbnRpZmllcnMgW2NhcHR1cmUgNV0gb3Igc3RyaW5ncyBbY2FwdHVyZSAzIG9yIGNhcHR1cmUgNF1cIlxuXHRcdFwiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIgKyBpZGVudGlmaWVyICsgXCIpKXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcIipcXFxcXVwiLFxuXG5cdHBzZXVkb3MgPSBcIjooXCIgKyBpZGVudGlmaWVyICsgXCIpKD86XFxcXCgoXCIgK1xuXHRcdC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG5cdFx0Ly8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG5cdFx0XCIoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXxcIiArXG5cdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXHRcdC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcblx0XHRcIi4qXCIgK1xuXHRcdFwiKVxcXFwpfClcIixcblxuXHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRydHJpbSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIiArIHdoaXRlc3BhY2UgKyBcIiskXCIsIFwiZ1wiICksXG5cblx0cmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdHJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKihbPit+XXxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXG5cdHJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCBcIj1cIiArIHdoaXRlc3BhY2UgKyBcIiooW15cXFxcXSdcXFwiXSo/KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcIkNMQVNTXCI6IG5ldyBSZWdFeHAoIFwiXlxcXFwuKFwiICsgaWRlbnRpZmllciArIFwiKVwiICksXG5cdFx0XCJUQUdcIjogbmV3IFJlZ0V4cCggXCJeKFwiICsgaWRlbnRpZmllciArIFwifFsqXSlcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdC8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGBcblx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblxuXHQvLyBDU1MgZXNjYXBlc1xuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyNFxuXHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdGVzY2FwZWQgOlxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gQ1NTIHN0cmluZy9pZGVudGlmaWVyIHNlcmlhbGl6YXRpb25cblx0Ly8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLyNjb21tb24tc2VyaWFsaXppbmctaWRpb21zXG5cdHJjc3Nlc2NhcGUgPSAvKFtcXDAtXFx4MWZcXHg3Zl18Xi0/XFxkKXxeLSR8W15cXDAtXFx4MWZcXHg3Zi1cXHVGRkZGXFx3LV0vZyxcblx0ZmNzc2VzY2FwZSA9IGZ1bmN0aW9uKCBjaCwgYXNDb2RlUG9pbnQgKSB7XG5cdFx0aWYgKCBhc0NvZGVQb2ludCApIHtcblxuXHRcdFx0Ly8gVSswMDAwIE5VTEwgYmVjb21lcyBVK0ZGRkQgUkVQTEFDRU1FTlQgQ0hBUkFDVEVSXG5cdFx0XHRpZiAoIGNoID09PSBcIlxcMFwiICkge1xuXHRcdFx0XHRyZXR1cm4gXCJcXHVGRkZEXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnRyb2wgY2hhcmFjdGVycyBhbmQgKGRlcGVuZGVudCB1cG9uIHBvc2l0aW9uKSBudW1iZXJzIGdldCBlc2NhcGVkIGFzIGNvZGUgcG9pbnRzXG5cdFx0XHRyZXR1cm4gY2guc2xpY2UoIDAsIC0xICkgKyBcIlxcXFxcIiArIGNoLmNoYXJDb2RlQXQoIGNoLmxlbmd0aCAtIDEgKS50b1N0cmluZyggMTYgKSArIFwiIFwiO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyIHBvdGVudGlhbGx5LXNwZWNpYWwgQVNDSUkgY2hhcmFjdGVycyBnZXQgYmFja3NsYXNoLWVzY2FwZWRcblx0XHRyZXR1cm4gXCJcXFxcXCIgKyBjaDtcblx0fSxcblxuXHQvLyBVc2VkIGZvciBpZnJhbWVzXG5cdC8vIFNlZSBzZXREb2N1bWVudCgpXG5cdC8vIFJlbW92aW5nIHRoZSBmdW5jdGlvbiB3cmFwcGVyIGNhdXNlcyBhIFwiUGVybWlzc2lvbiBEZW5pZWRcIlxuXHQvLyBlcnJvciBpbiBJRVxuXHR1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0c2V0RG9jdW1lbnQoKTtcblx0fSxcblxuXHRkaXNhYmxlZEFuY2VzdG9yID0gYWRkQ29tYmluYXRvcihcblx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSB0cnVlICYmIChcImZvcm1cIiBpbiBlbGVtIHx8IFwibGFiZWxcIiBpbiBlbGVtKTtcblx0XHR9LFxuXHRcdHsgZGlyOiBcInBhcmVudE5vZGVcIiwgbmV4dDogXCJsZWdlbmRcIiB9XG5cdCk7XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcblx0XHR9IDpcblxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0dmFyIGogPSB0YXJnZXQubGVuZ3RoLFxuXHRcdFx0XHRpID0gMDtcblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG0sIGksIGVsZW0sIG5pZCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsXG5cdFx0bmV3Q29udGV4dCA9IGNvbnRleHQgJiYgY29udGV4dC5vd25lckRvY3VtZW50LFxuXG5cdFx0Ly8gbm9kZVR5cGUgZGVmYXVsdHMgdG8gOSwgc2luY2UgY29udGV4dCBkZWZhdWx0cyB0byBkb2N1bWVudFxuXHRcdG5vZGVUeXBlID0gY29udGV4dCA/IGNvbnRleHQubm9kZVR5cGUgOiA5O1xuXG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG5cdC8vIFJldHVybiBlYXJseSBmcm9tIGNhbGxzIHdpdGggaW52YWxpZCBzZWxlY3RvciBvciBjb250ZXh0XG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0Ly8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50c1xuXHRpZiAoICFzZWVkICkge1xuXG5cdFx0aWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHtcblx0XHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdFx0fVxuXHRcdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdFx0Ly8gSWYgdGhlIHNlbGVjdG9yIGlzIHN1ZmZpY2llbnRseSBzaW1wbGUsIHRyeSB1c2luZyBhIFwiZ2V0KkJ5KlwiIERPTSBtZXRob2Rcblx0XHRcdC8vIChleGNlcHRpbmcgRG9jdW1lbnRGcmFnbWVudCBjb250ZXh0LCB3aGVyZSB0aGUgbWV0aG9kcyBkb24ndCBleGlzdClcblx0XHRcdGlmICggbm9kZVR5cGUgIT09IDExICYmIChtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSkgKSB7XG5cblx0XHRcdFx0Ly8gSUQgc2VsZWN0b3Jcblx0XHRcdFx0aWYgKCAobSA9IG1hdGNoWzFdKSApIHtcblxuXHRcdFx0XHRcdC8vIERvY3VtZW50IGNvbnRleHRcblx0XHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdFx0Ly8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnNcblx0XHRcdFx0XHRcdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0XHRpZiAoIGVsZW0uaWQgPT09IG0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRWxlbWVudCBjb250ZXh0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHQvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG5cdFx0XHRcdFx0XHRpZiAoIG5ld0NvbnRleHQgJiYgKGVsZW0gPSBuZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICYmXG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiZcblx0XHRcdFx0XHRcdFx0ZWxlbS5pZCA9PT0gbSApIHtcblxuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFR5cGUgc2VsZWN0b3Jcblx0XHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHRcdC8vIENsYXNzIHNlbGVjdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoIChtID0gbWF0Y2hbM10pICYmIHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJlxuXHRcdFx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVGFrZSBhZHZhbnRhZ2Ugb2YgcXVlcnlTZWxlY3RvckFsbFxuXHRcdFx0aWYgKCBzdXBwb3J0LnFzYSAmJlxuXHRcdFx0XHQhY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdICYmXG5cdFx0XHRcdCghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7XG5cblx0XHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dDtcblx0XHRcdFx0XHRuZXdTZWxlY3RvciA9IHNlbGVjdG9yO1xuXG5cdFx0XHRcdC8vIHFTQSBsb29rcyBvdXRzaWRlIEVsZW1lbnQgY29udGV4dCwgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudFxuXHRcdFx0XHQvLyBUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhpcyB3b3JrYXJvdW5kIHRlY2huaXF1ZVxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PThcblx0XHRcdFx0Ly8gRXhjbHVkZSBvYmplY3QgZWxlbWVudHNcblx0XHRcdFx0fSBlbHNlIGlmICggY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHRcdFx0Ly8gQ2FwdHVyZSB0aGUgY29udGV4dCBJRCwgc2V0dGluZyBpdCBmaXJzdCBpZiBuZWNlc3Nhcnlcblx0XHRcdFx0XHRpZiAoIChuaWQgPSBjb250ZXh0LmdldEF0dHJpYnV0ZSggXCJpZFwiICkpICkge1xuXHRcdFx0XHRcdFx0bmlkID0gbmlkLnJlcGxhY2UoIHJjc3Nlc2NhcGUsIGZjc3Nlc2NhcGUgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgKG5pZCA9IGV4cGFuZG8pICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gUHJlZml4IGV2ZXJ5IHNlbGVjdG9yIGluIHRoZSBsaXN0XG5cdFx0XHRcdFx0Z3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0XHRcdFx0aSA9IGdyb3Vwcy5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRncm91cHNbaV0gPSBcIiNcIiArIG5pZCArIFwiIFwiICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oIFwiLFwiICk7XG5cblx0XHRcdFx0XHQvLyBFeHBhbmQgY29udGV4dCBmb3Igc2libGluZyBzZWxlY3RvcnNcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHxcblx0XHRcdFx0XHRcdGNvbnRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLFxuXHRcdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9IGNhdGNoICggcXNhRXJyb3IgKSB7XG5cdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdGlmICggbmlkID09PSBleHBhbmRvICkge1xuXHRcdFx0XHRcdFx0XHRjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWxsIG90aGVyc1xuXHRyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcbiAqXHRwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuICpcdGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG5cdHZhciBrZXlzID0gW107XG5cblx0ZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG5cdFx0Ly8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1Nylcblx0XHRpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG5cdFx0XHQvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcblx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07XG5cdFx0fVxuXHRcdHJldHVybiAoY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSk7XG5cdH1cblx0cmV0dXJuIGNhY2hlO1xufVxuXG4vKipcbiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFya1xuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuXHRmblsgZXhwYW5kbyBdID0gdHJ1ZTtcblx0cmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZWxlbWVudCBhbmQgcmV0dXJucyBhIGJvb2xlYW4gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBlbCApO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9IGZpbmFsbHkge1xuXHRcdC8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdFxuXHRcdGlmICggZWwucGFyZW50Tm9kZSApIHtcblx0XHRcdGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGVsICk7XG5cdFx0fVxuXHRcdC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG5cdFx0ZWwgPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7XG5cdHZhciBhcnIgPSBhdHRycy5zcGxpdChcInxcIiksXG5cdFx0aSA9IGFyci5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0RXhwci5hdHRySGFuZGxlWyBhcnJbaV0gXSA9IGhhbmRsZXI7XG5cdH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYlxuICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG4gKi9cbmZ1bmN0aW9uIHNpYmxpbmdDaGVjayggYSwgYiApIHtcblx0dmFyIGN1ciA9IGIgJiYgYSxcblx0XHRkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0YS5zb3VyY2VJbmRleCAtIGIuc291cmNlSW5kZXg7XG5cblx0Ly8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzXG5cdGlmICggZGlmZiApIHtcblx0XHRyZXR1cm4gZGlmZjtcblx0fVxuXG5cdC8vIENoZWNrIGlmIGIgZm9sbG93cyBhXG5cdGlmICggY3VyICkge1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7XG5cdFx0XHRpZiAoIGN1ciA9PT0gYiApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhID8gMSA6IC0xO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gKG5hbWUgPT09IFwiaW5wdXRcIiB8fCBuYW1lID09PSBcImJ1dHRvblwiKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciA6ZW5hYmxlZC86ZGlzYWJsZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGlzYWJsZWQgdHJ1ZSBmb3IgOmRpc2FibGVkOyBmYWxzZSBmb3IgOmVuYWJsZWRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIGRpc2FibGVkICkge1xuXG5cdC8vIEtub3duIDpkaXNhYmxlZCBmYWxzZSBwb3NpdGl2ZXM6IGZpZWxkc2V0W2Rpc2FibGVkXSA+IGxlZ2VuZDpudGgtb2YtdHlwZShuKzIpIDpjYW4tZGlzYWJsZVxuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBPbmx5IGNlcnRhaW4gZWxlbWVudHMgY2FuIG1hdGNoIDplbmFibGVkIG9yIDpkaXNhYmxlZFxuXHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NjcmlwdGluZy5odG1sI3NlbGVjdG9yLWVuYWJsZWRcblx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zY3JpcHRpbmcuaHRtbCNzZWxlY3Rvci1kaXNhYmxlZFxuXHRcdGlmICggXCJmb3JtXCIgaW4gZWxlbSApIHtcblxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGluaGVyaXRlZCBkaXNhYmxlZG5lc3Mgb24gcmVsZXZhbnQgbm9uLWRpc2FibGVkIGVsZW1lbnRzOlxuXHRcdFx0Ly8gKiBsaXN0ZWQgZm9ybS1hc3NvY2lhdGVkIGVsZW1lbnRzIGluIGEgZGlzYWJsZWQgZmllbGRzZXRcblx0XHRcdC8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjYXRlZ29yeS1saXN0ZWRcblx0XHRcdC8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjb25jZXB0LWZlLWRpc2FibGVkXG5cdFx0XHQvLyAqIG9wdGlvbiBlbGVtZW50cyBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHQvLyAgIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY29uY2VwdC1vcHRpb24tZGlzYWJsZWRcblx0XHRcdC8vIEFsbCBzdWNoIGVsZW1lbnRzIGhhdmUgYSBcImZvcm1cIiBwcm9wZXJ0eS5cblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICYmIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdC8vIE9wdGlvbiBlbGVtZW50cyBkZWZlciB0byBhIHBhcmVudCBvcHRncm91cCBpZiBwcmVzZW50XG5cdFx0XHRcdGlmICggXCJsYWJlbFwiIGluIGVsZW0gKSB7XG5cdFx0XHRcdFx0aWYgKCBcImxhYmVsXCIgaW4gZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0ucGFyZW50Tm9kZS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA2IC0gMTFcblx0XHRcdFx0Ly8gVXNlIHRoZSBpc0Rpc2FibGVkIHNob3J0Y3V0IHByb3BlcnR5IHRvIGNoZWNrIGZvciBkaXNhYmxlZCBmaWVsZHNldCBhbmNlc3RvcnNcblx0XHRcdFx0cmV0dXJuIGVsZW0uaXNEaXNhYmxlZCA9PT0gZGlzYWJsZWQgfHxcblxuXHRcdFx0XHRcdC8vIFdoZXJlIHRoZXJlIGlzIG5vIGlzRGlzYWJsZWQsIGNoZWNrIG1hbnVhbGx5XG5cdFx0XHRcdFx0LyoganNoaW50IC1XMDE4ICovXG5cdFx0XHRcdFx0ZWxlbS5pc0Rpc2FibGVkICE9PSAhZGlzYWJsZWQgJiZcblx0XHRcdFx0XHRcdGRpc2FibGVkQW5jZXN0b3IoIGVsZW0gKSA9PT0gZGlzYWJsZWQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblxuXHRcdC8vIFRyeSB0byB3aW5ub3cgb3V0IGVsZW1lbnRzIHRoYXQgY2FuJ3QgYmUgZGlzYWJsZWQgYmVmb3JlIHRydXN0aW5nIHRoZSBkaXNhYmxlZCBwcm9wZXJ0eS5cblx0XHQvLyBTb21lIHZpY3RpbXMgZ2V0IGNhdWdodCBpbiBvdXIgbmV0IChsYWJlbCwgbGVnZW5kLCBtZW51LCB0cmFjayksIGJ1dCBpdCBzaG91bGRuJ3Rcblx0XHQvLyBldmVuIGV4aXN0IG9uIHRoZW0sIGxldCBhbG9uZSBoYXZlIGEgYm9vbGVhbiB2YWx1ZS5cblx0XHR9IGVsc2UgaWYgKCBcImxhYmVsXCIgaW4gZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblx0XHR9XG5cblx0XHQvLyBSZW1haW5pbmcgZWxlbWVudHMgYXJlIG5laXRoZXIgOmVuYWJsZWQgbm9yIDpkaXNhYmxlZFxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuXHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgc3ViV2luZG93LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBSZXR1cm4gZWFybHkgaWYgZG9jIGlzIGludmFsaWQgb3IgYWxyZWFkeSBzZWxlY3RlZFxuXHRpZiAoIGRvYyA9PT0gZG9jdW1lbnQgfHwgZG9jLm5vZGVUeXBlICE9PSA5IHx8ICFkb2MuZG9jdW1lbnRFbGVtZW50ICkge1xuXHRcdHJldHVybiBkb2N1bWVudDtcblx0fVxuXG5cdC8vIFVwZGF0ZSBnbG9iYWwgdmFyaWFibGVzXG5cdGRvY3VtZW50ID0gZG9jO1xuXHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jdW1lbnQgKTtcblxuXHQvLyBTdXBwb3J0OiBJRSA5LTExLCBFZGdlXG5cdC8vIEFjY2Vzc2luZyBpZnJhbWUgZG9jdW1lbnRzIGFmdGVyIHVubG9hZCB0aHJvd3MgXCJwZXJtaXNzaW9uIGRlbmllZFwiIGVycm9ycyAoalF1ZXJ5ICMxMzkzNilcblx0aWYgKCBwcmVmZXJyZWREb2MgIT09IGRvY3VtZW50ICYmXG5cdFx0KHN1YldpbmRvdyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3KSAmJiBzdWJXaW5kb3cudG9wICE9PSBzdWJXaW5kb3cgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSAxMSwgRWRnZVxuXHRcdGlmICggc3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMCBvbmx5XG5cdFx0fSBlbHNlIGlmICggc3ViV2luZG93LmF0dGFjaEV2ZW50ICkge1xuXHRcdFx0c3ViV2luZG93LmF0dGFjaEV2ZW50KCBcIm9udW5sb2FkXCIsIHVubG9hZEhhbmRsZXIgKTtcblx0XHR9XG5cdH1cblxuXHQvKiBBdHRyaWJ1dGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBTdXBwb3J0OiBJRTw4XG5cdC8vIFZlcmlmeSB0aGF0IGdldEF0dHJpYnV0ZSByZWFsbHkgcmV0dXJucyBhdHRyaWJ1dGVzIGFuZCBub3QgcHJvcGVydGllc1xuXHQvLyAoZXhjZXB0aW5nIElFOCBib29sZWFucylcblx0c3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRlbC5jbGFzc05hbWUgPSBcImlcIjtcblx0XHRyZXR1cm4gIWVsLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKTtcblx0fSk7XG5cblx0LyogZ2V0RWxlbWVudChzKUJ5KlxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpIHJldHVybnMgb25seSBlbGVtZW50c1xuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID0gYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRlbC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlQ29tbWVudChcIlwiKSApO1xuXHRcdHJldHVybiAhZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aDtcblx0fSk7XG5cblx0Ly8gU3VwcG9ydDogSUU8OVxuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbW1hdGljYWxseS1zZXQgbmFtZXMsXG5cdC8vIHNvIHVzZSBhIHJvdW5kYWJvdXQgZ2V0RWxlbWVudHNCeU5hbWUgdGVzdFxuXHRzdXBwb3J0LmdldEJ5SWQgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGVsICkuaWQgPSBleHBhbmRvO1xuXHRcdHJldHVybiAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBJRCBmaWx0ZXIgYW5kIGZpbmRcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maWx0ZXJbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcdEV4cHIuZmluZFtcIklEXCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0dmFyIGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXHRcdFx0XHRyZXR1cm4gZWxlbSA/IFsgZWxlbSBdIDogW107XG5cdFx0XHR9XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gIGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiZcblx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0cmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgNiAtIDcgb25seVxuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRFeHByLmZpbmRbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCwgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRcdHZhciBub2RlLCBpLCBlbGVtcyxcblx0XHRcdFx0XHRlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0gKSB7XG5cblx0XHRcdFx0XHQvLyBWZXJpZnkgdGhlIGlkIGF0dHJpYnV0ZVxuXHRcdFx0XHRcdG5vZGUgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0XHRpZiAoIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gaWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gWyBlbGVtIF07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRmFsbCBiYWNrIG9uIGdldEVsZW1lbnRzQnlOYW1lXG5cdFx0XHRcdFx0ZWxlbXMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlOYW1lKCBpZCApO1xuXHRcdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtc1tpKytdKSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0XHRcdGlmICggbm9kZSAmJiBub2RlLnZhbHVlID09PSBpZCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFsgZWxlbSBdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0Ly8gVGFnXG5cdEV4cHIuZmluZFtcIlRBR1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgP1xuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgZG9uJ3QgaGF2ZSBnRUJUTlxuXHRcdFx0fSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyApO1xuXHRcdFx0fVxuXHRcdH0gOlxuXG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHR0bXAgPSBbXSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdC8vIEJ5IGhhcHB5IGNvaW5jaWRlbmNlLCBhIChicm9rZW4pIGdFQlROIGFwcGVhcnMgb24gRG9jdW1lbnRGcmFnbWVudCBub2RlcyB0b29cblx0XHRcdFx0cmVzdWx0cyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzXG5cdFx0XHRpZiAoIHRhZyA9PT0gXCIqXCIgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdHRtcC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRtcDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH07XG5cblx0Ly8gQ2xhc3Ncblx0RXhwci5maW5kW1wiQ0xBU1NcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgZnVuY3Rpb24oIGNsYXNzTmFtZSwgY29udGV4dCApIHtcblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBjbGFzc05hbWUgKTtcblx0XHR9XG5cdH07XG5cblx0LyogUVNBL21hdGNoZXNTZWxlY3RvclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gUVNBIGFuZCBtYXRjaGVzU2VsZWN0b3Igc3VwcG9ydFxuXG5cdC8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpXG5cdHJidWdneU1hdGNoZXMgPSBbXTtcblxuXHQvLyBxU2EoOmZvY3VzKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoQ2hyb21lIDIxKVxuXHQvLyBXZSBhbGxvdyB0aGlzIGJlY2F1c2Ugb2YgYSBidWcgaW4gSUU4LzkgdGhhdCB0aHJvd3MgYW4gZXJyb3Jcblx0Ly8gd2hlbmV2ZXIgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIGlzIGFjY2Vzc2VkIG9uIGFuIGlmcmFtZVxuXHQvLyBTbywgd2UgYWxsb3cgOmZvY3VzIHRvIHBhc3MgdGhyb3VnaCBRU0EgYWxsIHRoZSB0aW1lIHRvIGF2b2lkIHRoZSBJRSBlcnJvclxuXHQvLyBTZWUgaHR0cHM6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzc4XG5cdHJidWdneVFTQSA9IFtdO1xuXG5cdGlmICggKHN1cHBvcnQucXNhID0gcm5hdGl2ZS50ZXN0KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsICkpICkge1xuXHRcdC8vIEJ1aWxkIFFTQSByZWdleFxuXHRcdC8vIFJlZ2V4IHN0cmF0ZWd5IGFkb3B0ZWQgZnJvbSBEaWVnbyBQZXJpbmlcblx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTlcblx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGVsICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxyXFxcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9oaDQ2NTM4OC5hc3B4I2F0dHJpYnV0ZV9zZWN0aW9uXG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKig/OnZhbHVlfFwiICsgYm9vbGVhbnMgKyBcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWU8MjksIEFuZHJvaWQ8NC40LCBTYWZhcmk8Ny4wKywgaU9TPDcuMCssIFBoYW50b21KUzwxLjkuOCtcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiOmNoZWNrZWRcIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4KywgaU9TIDgrXG5cdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2ODUxXG5cdFx0XHQvLyBJbi1wYWdlIGBzZWxlY3RvciNpZCBzaWJsaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcImEjXCIgKyBleHBhbmRvICsgXCIrKlwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIi4jLitbK35dXCIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRcdGVsLmlubmVySFRNTCA9IFwiPGEgaHJlZj0nJyBkaXNhYmxlZD0nZGlzYWJsZWQnPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PlwiO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBXaW5kb3dzIDggTmF0aXZlIEFwcHNcblx0XHRcdC8vIFRoZSB0eXBlIGFuZCBuYW1lIGF0dHJpYnV0ZXMgYXJlIHJlc3RyaWN0ZWQgZHVyaW5nIC5pbm5lckhUTUwgYXNzaWdubWVudFxuXHRcdFx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJoaWRkZW5cIiApO1xuXHRcdFx0ZWwuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwibmFtZVwiICsgd2hpdGVzcGFjZSArIFwiKlsqXiR8IX5dPz1cIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGRiAzLjUgLSA6ZW5hYmxlZC86ZGlzYWJsZWQgYW5kIGhpZGRlbiBlbGVtZW50cyAoaGlkZGVuIGVsZW1lbnRzIGFyZSBzdGlsbCBlbmFibGVkKVxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCAhPT0gMiApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdFx0XHQvLyBJRSdzIDpkaXNhYmxlZCBzZWxlY3RvciBkb2VzIG5vdCBwaWNrIHVwIHRoZSBjaGlsZHJlbiBvZiBkaXNhYmxlZCBmaWVsZHNldHNcblx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGVsICkuZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiOmRpc2FibGVkXCIpLmxlbmd0aCAhPT0gMiApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0ZWwucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIik7XG5cdFx0XHRyYnVnZ3lRU0EucHVzaChcIiwuKjpcIik7XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLm1hdGNoZXMgfHxcblx0XHRkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7XG5cblx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIGl0J3MgcG9zc2libGUgdG8gZG8gbWF0Y2hlc1NlbGVjdG9yXG5cdFx0XHQvLyBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIChJRSA5KVxuXHRcdFx0c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZWwsIFwiKlwiICk7XG5cblx0XHRcdC8vIFRoaXMgc2hvdWxkIGZhaWwgd2l0aCBhbiBleGNlcHRpb25cblx0XHRcdC8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWRcblx0XHRcdG1hdGNoZXMuY2FsbCggZWwsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG5cdFx0fSk7XG5cdH1cblxuXHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKFwifFwiKSApO1xuXHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXG5cdC8qIENvbnRhaW5zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0aGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApO1xuXG5cdC8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlclxuXHQvLyBQdXJwb3NlZnVsbHkgc2VsZi1leGNsdXNpdmVcblx0Ly8gQXMgaW4sIGFuIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiBpdHNlbGZcblx0Y29udGFpbnMgPSBoYXNDb21wYXJlIHx8IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb250YWlucyApID9cblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdHZhciBhZG93biA9IGEubm9kZVR5cGUgPT09IDkgPyBhLmRvY3VtZW50RWxlbWVudCA6IGEsXG5cdFx0XHRcdGJ1cCA9IGIgJiYgYi5wYXJlbnROb2RlO1xuXHRcdFx0cmV0dXJuIGEgPT09IGJ1cCB8fCAhISggYnVwICYmIGJ1cC5ub2RlVHlwZSA9PT0gMSAmJiAoXG5cdFx0XHRcdGFkb3duLmNvbnRhaW5zID9cblx0XHRcdFx0XHRhZG93bi5jb250YWlucyggYnVwICkgOlxuXHRcdFx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gJiYgYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYnVwICkgJiAxNlxuXHRcdFx0KSk7XG5cdFx0fSA6XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHRpZiAoIGIgKSB7XG5cdFx0XHRcdHdoaWxlICggKGIgPSBiLnBhcmVudE5vZGUpICkge1xuXHRcdFx0XHRcdGlmICggYiA9PT0gYSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblx0LyogU29ydGluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gRG9jdW1lbnQgb3JkZXIgc29ydGluZ1xuXHRzb3J0T3JkZXIgPSBoYXNDb21wYXJlID9cblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cblx0XHQvLyBGbGFnIGZvciBkdXBsaWNhdGUgcmVtb3ZhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHQvLyBTb3J0IG9uIG1ldGhvZCBleGlzdGVuY2UgaWYgb25seSBvbmUgaW5wdXQgaGFzIGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uXG5cdFx0dmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO1xuXHRcdGlmICggY29tcGFyZSApIHtcblx0XHRcdHJldHVybiBjb21wYXJlO1xuXHRcdH1cblxuXHRcdC8vIENhbGN1bGF0ZSBwb3NpdGlvbiBpZiBib3RoIGlucHV0cyBiZWxvbmcgdG8gdGhlIHNhbWUgZG9jdW1lbnRcblx0XHRjb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgP1xuXHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYiApIDpcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHdlIGtub3cgdGhleSBhcmUgZGlzY29ubmVjdGVkXG5cdFx0XHQxO1xuXG5cdFx0Ly8gRGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0aWYgKCBjb21wYXJlICYgMSB8fFxuXHRcdFx0KCFzdXBwb3J0LnNvcnREZXRhY2hlZCAmJiBiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBhICkgPT09IGNvbXBhcmUpICkge1xuXG5cdFx0XHQvLyBDaG9vc2UgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBpcyByZWxhdGVkIHRvIG91ciBwcmVmZXJyZWQgZG9jdW1lbnRcblx0XHRcdGlmICggYSA9PT0gZG9jdW1lbnQgfHwgYS5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBhKSApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBiID09PSBkb2N1bWVudCB8fCBiLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGIpICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHR9IDpcblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0Ly8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdXAgPSBhLnBhcmVudE5vZGUsXG5cdFx0XHRidXAgPSBiLnBhcmVudE5vZGUsXG5cdFx0XHRhcCA9IFsgYSBdLFxuXHRcdFx0YnAgPSBbIGIgXTtcblxuXHRcdC8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkXG5cdFx0aWYgKCAhYXVwIHx8ICFidXAgKSB7XG5cdFx0XHRyZXR1cm4gYSA9PT0gZG9jdW1lbnQgPyAtMSA6XG5cdFx0XHRcdGIgPT09IGRvY3VtZW50ID8gMSA6XG5cdFx0XHRcdGF1cCA/IC0xIDpcblx0XHRcdFx0YnVwID8gMSA6XG5cdFx0XHRcdHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblxuXHRcdC8vIElmIHRoZSBub2RlcyBhcmUgc2libGluZ3MsIHdlIGNhbiBkbyBhIHF1aWNrIGNoZWNrXG5cdFx0fSBlbHNlIGlmICggYXVwID09PSBidXAgKSB7XG5cdFx0XHRyZXR1cm4gc2libGluZ0NoZWNrKCBhLCBiICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlIHdlIG5lZWQgZnVsbCBsaXN0cyBvZiB0aGVpciBhbmNlc3RvcnMgZm9yIGNvbXBhcmlzb25cblx0XHRjdXIgPSBhO1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcblx0XHRcdGFwLnVuc2hpZnQoIGN1ciApO1xuXHRcdH1cblx0XHRjdXIgPSBiO1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcblx0XHRcdGJwLnVuc2hpZnQoIGN1ciApO1xuXHRcdH1cblxuXHRcdC8vIFdhbGsgZG93biB0aGUgdHJlZSBsb29raW5nIGZvciBhIGRpc2NyZXBhbmN5XG5cdFx0d2hpbGUgKCBhcFtpXSA9PT0gYnBbaV0gKSB7XG5cdFx0XHRpKys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGkgP1xuXHRcdFx0Ly8gRG8gYSBzaWJsaW5nIGNoZWNrIGlmIHRoZSBub2RlcyBoYXZlIGEgY29tbW9uIGFuY2VzdG9yXG5cdFx0XHRzaWJsaW5nQ2hlY2soIGFwW2ldLCBicFtpXSApIDpcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIG5vZGVzIGluIG91ciBkb2N1bWVudCBzb3J0IGZpcnN0XG5cdFx0XHRhcFtpXSA9PT0gcHJlZmVycmVkRG9jID8gLTEgOlxuXHRcdFx0YnBbaV0gPT09IHByZWZlcnJlZERvYyA/IDEgOlxuXHRcdFx0MDtcblx0fTtcblxuXHRyZXR1cm4gZG9jdW1lbnQ7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcblx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0Ly8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG5cdGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0IWNvbXBpbGVyQ2FjaGVbIGV4cHIgKyBcIiBcIiBdICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIGZyYWdtZW50IGluIElFIDlcblx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cdH1cblxuXHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xufTtcblxuU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVzY2FwZSA9IGZ1bmN0aW9uKCBzZWwgKSB7XG5cdHJldHVybiAoc2VsICsgXCJcIikucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7XG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0Ly8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1Mylcblx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0bWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0MiB3aGF0IChjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0NSBzaWduIG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQ4IHkgb2YgeS1jb21wb25lbnRcblx0XHRcdCovXG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0bWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcblx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cblx0XHRcdGlmICggbWF0Y2hFeHByW1wiQ0hJTERcIl0udGVzdCggbWF0Y2hbMF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRtYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCI7XG5cblx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiZcblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHQvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIiApO1xuXHRcdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRmYWxzZTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBub2RlSW5kZXgsIHN0YXJ0LFxuXHRcdFx0XHRcdFx0ZGlyID0gc2ltcGxlICE9PSBmb3J3YXJkID8gXCJuZXh0U2libGluZ1wiIDogXCJwcmV2aW91c1NpYmxpbmdcIixcblx0XHRcdFx0XHRcdHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSxcblx0XHRcdFx0XHRcdG5hbWUgPSBvZlR5cGUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0dXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGUsXG5cdFx0XHRcdFx0XHRkaWZmID0gZmFsc2U7XG5cblx0XHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHRcdFx0aWYgKCBzaW1wbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggZGlyICkge1xuXHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSBub2RlWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cblx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4XG5cblx0XHRcdFx0XHRcdFx0Ly8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheVxuXHRcdFx0XHRcdFx0XHRub2RlID0gcGFyZW50O1xuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdGNhY2hlID0gdW5pcXVlQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4ICYmIGNhY2hlWyAyIF07XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdO1xuXG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBzZWVraW5nIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgcHJldmlvdXNseS1jYWNoZWQgZWxlbWVudCBpbmRleCBpZiBhdmFpbGFibGVcblx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRcdG5vZGVJbmRleCA9IGNhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbIDEgXTtcblx0XHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4O1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8geG1sIDpudGgtY2hpbGQoLi4uKVxuXHRcdFx0XHRcdFx0XHQvLyBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pXG5cdFx0XHRcdFx0XHRcdGlmICggZGlmZiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVUeXBlID09PSAxICkgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0KytkaWZmICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENhY2hlIHRoZSBpbmRleCBvZiBlYWNoIGVuY291bnRlcmVkIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSW5jb3Jwb3JhdGUgdGhlIG9mZnNldCwgdGhlbiBjaGVjayBhZ2FpbnN0IGN5Y2xlIHNpemVcblx0XHRcdFx0XHRcdGRpZmYgLT0gbGFzdDtcblx0XHRcdFx0XHRcdHJldHVybiBkaWZmID09PSBmaXJzdCB8fCAoIGRpZmYgJSBmaXJzdCA9PT0gMCAmJiBkaWZmIC8gZmlyc3QgPj0gMCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIHBzZXVkbywgYXJndW1lbnQgKSB7XG5cdFx0XHQvLyBwc2V1ZG8tY2xhc3MgbmFtZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmVcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jcHNldWRvLWNsYXNzZXNcblx0XHRcdC8vIFByaW9yaXRpemUgYnkgY2FzZSBzZW5zaXRpdml0eSBpbiBjYXNlIGN1c3RvbSBwc2V1ZG9zIGFyZSBhZGRlZCB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzXG5cdFx0XHQvLyBSZW1lbWJlciB0aGF0IHNldEZpbHRlcnMgaW5oZXJpdHMgZnJvbSBwc2V1ZG9zXG5cdFx0XHR2YXIgYXJncyxcblx0XHRcdFx0Zm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiICsgcHNldWRvICk7XG5cblx0XHRcdC8vIFRoZSB1c2VyIG1heSB1c2UgY3JlYXRlUHNldWRvIHRvIGluZGljYXRlIHRoYXRcblx0XHRcdC8vIGFyZ3VtZW50cyBhcmUgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgZmlsdGVyIGZ1bmN0aW9uXG5cdFx0XHQvLyBqdXN0IGFzIFNpenpsZSBkb2VzXG5cdFx0XHRpZiAoIGZuWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHJldHVybiBmbiggYXJndW1lbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQnV0IG1haW50YWluIHN1cHBvcnQgZm9yIG9sZCBzaWduYXR1cmVzXG5cdFx0XHRpZiAoIGZuLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHRcdGFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCBcIlwiLCBhcmd1bWVudCBdO1xuXHRcdFx0XHRyZXR1cm4gRXhwci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KCBwc2V1ZG8udG9Mb3dlckNhc2UoKSApID9cblx0XHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7XG5cdFx0XHRcdFx0XHR2YXIgaWR4LFxuXHRcdFx0XHRcdFx0XHRtYXRjaGVkID0gZm4oIHNlZWQsIGFyZ3VtZW50ICksXG5cdFx0XHRcdFx0XHRcdGkgPSBtYXRjaGVkLmxlbmd0aDtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZHggPSBpbmRleE9mKCBzZWVkLCBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHRcdHNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZuKCBlbGVtLCAwLCBhcmdzICk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZuO1xuXHRcdH1cblx0fSxcblxuXHRwc2V1ZG9zOiB7XG5cdFx0Ly8gUG90ZW50aWFsbHkgY29tcGxleCBwc2V1ZG9zXG5cdFx0XCJub3RcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdC8vIFRyaW0gdGhlIHNlbGVjdG9yIHBhc3NlZCB0byBjb21waWxlXG5cdFx0XHQvLyB0byBhdm9pZCB0cmVhdGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZ1xuXHRcdFx0Ly8gc3BhY2VzIGFzIGNvbWJpbmF0b3JzXG5cdFx0XHR2YXIgaW5wdXQgPSBbXSxcblx0XHRcdFx0cmVzdWx0cyA9IFtdLFxuXHRcdFx0XHRtYXRjaGVyID0gY29tcGlsZSggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApICk7XG5cblx0XHRcdHJldHVybiBtYXRjaGVyWyBleHBhbmRvIF0gP1xuXHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0XHRcdHVubWF0Y2hlZCA9IG1hdGNoZXIoIHNlZWQsIG51bGwsIHhtbCwgW10gKSxcblx0XHRcdFx0XHRcdGkgPSBzZWVkLmxlbmd0aDtcblxuXHRcdFx0XHRcdC8vIE1hdGNoIGVsZW1lbnRzIHVubWF0Y2hlZCBieSBgbWF0Y2hlcmBcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRzZWVkW2ldID0gIShtYXRjaGVzW2ldID0gZWxlbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBlbGVtO1xuXHRcdFx0XHRcdG1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTtcblx0XHRcdFx0XHQvLyBEb24ndCBrZWVwIHRoZSBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0XHRcdGlucHV0WzBdID0gbnVsbDtcblx0XHRcdFx0XHRyZXR1cm4gIXJlc3VsdHMucG9wKCk7XG5cdFx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImhhc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJjb250YWluc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGVsZW0uaW5uZXJUZXh0IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdC8vIFwiV2hldGhlciBhbiBlbGVtZW50IGlzIHJlcHJlc2VudGVkIGJ5IGEgOmxhbmcoKSBzZWxlY3RvclxuXHRcdC8vIGlzIGJhc2VkIHNvbGVseSBvbiB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlXG5cdFx0Ly8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQyxcblx0XHQvLyBvciBiZWdpbm5pbmcgd2l0aCB0aGUgaWRlbnRpZmllciBDIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IFwiLVwiLlxuXHRcdC8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LlxuXHRcdC8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuXCJcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2xhbmctcHNldWRvXG5cdFx0XCJsYW5nXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7XG5cdFx0XHQvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXG5cdFx0XHRpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgXCJcIikgKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIiArIGxhbmcgKTtcblx0XHRcdH1cblx0XHRcdGxhbmcgPSBsYW5nLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIGVsZW1MYW5nO1xuXHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0aWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRcdFx0XHRlbGVtLmxhbmcgOlxuXHRcdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKSB8fCBlbGVtLmdldEF0dHJpYnV0ZShcImxhbmdcIikpICkge1xuXG5cdFx0XHRcdFx0XHRlbGVtTGFuZyA9IGVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArIFwiLVwiICkgPT09IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IHdoaWxlICggKGVsZW0gPSBlbGVtLnBhcmVudE5vZGUpICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdC8vIE1pc2NlbGxhbmVvdXNcblx0XHRcInRhcmdldFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuXHRcdFx0cmV0dXJuIGhhc2ggJiYgaGFzaC5zbGljZSggMSApID09PSBlbGVtLmlkO1xuXHRcdH0sXG5cblx0XHRcInJvb3RcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jRWxlbTtcblx0XHR9LFxuXG5cdFx0XCJmb2N1c1wiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7XG5cdFx0fSxcblxuXHRcdC8vIEJvb2xlYW4gcHJvcGVydGllc1xuXHRcdFwiZW5hYmxlZFwiOiBjcmVhdGVEaXNhYmxlZFBzZXVkbyggZmFsc2UgKSxcblx0XHRcImRpc2FibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCB0cnVlICksXG5cblx0XHRcImNoZWNrZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gKG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gXCJvcHRpb25cIiAmJiAhIWVsZW0uc2VsZWN0ZWQpO1xuXHRcdH0sXG5cblx0XHRcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gQWNjZXNzaW5nIHRoaXMgcHJvcGVydHkgbWFrZXMgc2VsZWN0ZWQtYnktZGVmYXVsdFxuXHRcdFx0Ly8gb3B0aW9ucyBpbiBTYWZhcmkgd29yayBwcm9wZXJseVxuXHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZWxlbS5zZWxlY3RlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0Ly8gQ29udGVudHNcblx0XHRcImVtcHR5XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG9cblx0XHRcdC8vIDplbXB0eSBpcyBuZWdhdGVkIGJ5IGVsZW1lbnQgKDEpIG9yIGNvbnRlbnQgbm9kZXMgKHRleHQ6IDM7IGNkYXRhOiA0OyBlbnRpdHkgcmVmOiA1KSxcblx0XHRcdC8vICAgYnV0IG5vdCBieSBvdGhlcnMgKGNvbW1lbnQ6IDg7IHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb246IDc7IGV0Yy4pXG5cdFx0XHQvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cblx0XHRcInBhcmVudFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAhRXhwci5wc2V1ZG9zW1wiZW1wdHlcIl0oIGVsZW0gKTtcblx0XHR9LFxuXG5cdFx0Ly8gRWxlbWVudC9pbnB1dCB0eXBlc1xuXHRcdFwiaGVhZGVyXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdH0sXG5cblx0XHRcImlucHV0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHJpbnB1dHMudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdH0sXG5cblx0XHRcImJ1dHRvblwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IFwiYnV0dG9uXCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIjtcblx0XHR9LFxuXG5cdFx0XCJ0ZXh0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGF0dHI7XG5cdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgJiZcblx0XHRcdFx0ZWxlbS50eXBlID09PSBcInRleHRcIiAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFPDhcblx0XHRcdFx0Ly8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sIFwic2VhcmNoXCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCJcblx0XHRcdFx0KCAoYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkgPT0gbnVsbCB8fCBhdHRyLnRvTG93ZXJDYXNlKCkgPT09IFwidGV4dFwiICk7XG5cdFx0fSxcblxuXHRcdC8vIFBvc2l0aW9uLWluLWNvbGxlY3Rpb25cblx0XHRcImZpcnN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gWyAwIF07XG5cdFx0fSksXG5cblx0XHRcImxhc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gWyBsZW5ndGggLSAxIF07XG5cdFx0fSksXG5cblx0XHRcImVxXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTtcblx0XHR9KSxcblxuXHRcdFwiZXZlblwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwib2RkXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAxO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJsdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7IC0taSA+PSAwOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImd0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgKytpIDwgbGVuZ3RoOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSlcblx0fVxufTtcblxuRXhwci5wc2V1ZG9zW1wibnRoXCJdID0gRXhwci5wc2V1ZG9zW1wiZXFcIl07XG5cbi8vIEFkZCBidXR0b24vaW5wdXQgdHlwZSBwc2V1ZG9zXG5mb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApO1xufVxuZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTtcbn1cblxuLy8gRWFzeSBBUEkgZm9yIGNyZWF0aW5nIG5ldyBzZXRGaWx0ZXJzXG5mdW5jdGlvbiBzZXRGaWx0ZXJzKCkge31cbnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuRXhwci5zZXRGaWx0ZXJzID0gbmV3IHNldEZpbHRlcnMoKTtcblxudG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHtcblx0dmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsXG5cdFx0c29GYXIsIGdyb3VwcywgcHJlRmlsdGVycyxcblx0XHRjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cblx0aWYgKCBjYWNoZWQgKSB7XG5cdFx0cmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTtcblx0fVxuXG5cdHNvRmFyID0gc2VsZWN0b3I7XG5cdGdyb3VwcyA9IFtdO1xuXHRwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7XG5cblx0d2hpbGUgKCBzb0ZhciApIHtcblxuXHRcdC8vIENvbW1hIGFuZCBmaXJzdCBydW5cblx0XHRpZiAoICFtYXRjaGVkIHx8IChtYXRjaCA9IHJjb21tYS5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdGlmICggbWF0Y2ggKSB7XG5cdFx0XHRcdC8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkXG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoWzBdLmxlbmd0aCApIHx8IHNvRmFyO1xuXHRcdFx0fVxuXHRcdFx0Z3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTtcblx0XHR9XG5cblx0XHRtYXRjaGVkID0gZmFsc2U7XG5cblx0XHQvLyBDb21iaW5hdG9yc1xuXHRcdGlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHQvLyBDYXN0IGRlc2NlbmRhbnQgY29tYmluYXRvcnMgdG8gc3BhY2Vcblx0XHRcdFx0dHlwZTogbWF0Y2hbMF0ucmVwbGFjZSggcnRyaW0sIFwiIFwiIClcblx0XHRcdH0pO1xuXHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGaWx0ZXJzXG5cdFx0Zm9yICggdHlwZSBpbiBFeHByLmZpbHRlciApIHtcblx0XHRcdGlmICggKG1hdGNoID0gbWF0Y2hFeHByWyB0eXBlIF0uZXhlYyggc29GYXIgKSkgJiYgKCFwcmVGaWx0ZXJzWyB0eXBlIF0gfHxcblx0XHRcdFx0KG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7XG5cdFx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRtYXRjaGVzOiBtYXRjaFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoICFtYXRjaGVkICkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGludmFsaWQgZXhjZXNzXG5cdC8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZ1xuXHQvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yIG9yIHJldHVybiB0b2tlbnNcblx0cmV0dXJuIHBhcnNlT25seSA/XG5cdFx0c29GYXIubGVuZ3RoIDpcblx0XHRzb0ZhciA/XG5cdFx0XHRTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOlxuXHRcdFx0Ly8gQ2FjaGUgdGhlIHRva2Vuc1xuXHRcdFx0dG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7XG59O1xuXG5mdW5jdGlvbiB0b1NlbGVjdG9yKCB0b2tlbnMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdHNlbGVjdG9yID0gXCJcIjtcblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0c2VsZWN0b3IgKz0gdG9rZW5zW2ldLnZhbHVlO1xuXHR9XG5cdHJldHVybiBzZWxlY3Rvcjtcbn1cblxuZnVuY3Rpb24gYWRkQ29tYmluYXRvciggbWF0Y2hlciwgY29tYmluYXRvciwgYmFzZSApIHtcblx0dmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLFxuXHRcdHNraXAgPSBjb21iaW5hdG9yLm5leHQsXG5cdFx0a2V5ID0gc2tpcCB8fCBkaXIsXG5cdFx0Y2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYga2V5ID09PSBcInBhcmVudE5vZGVcIixcblx0XHRkb25lTmFtZSA9IGRvbmUrKztcblxuXHRyZXR1cm4gY29tYmluYXRvci5maXJzdCA/XG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gOlxuXG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBhbGwgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRzXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsXG5cdFx0XHRcdG5ld0NhY2hlID0gWyBkaXJydW5zLCBkb25lTmFtZSBdO1xuXG5cdFx0XHQvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdIHx8IChvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdGlmICggc2tpcCAmJiBza2lwID09PSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW0gPSBlbGVtWyBkaXIgXSB8fCBlbGVtO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICggKG9sZENhY2hlID0gdW5pcXVlQ2FjaGVbIGtleSBdKSAmJlxuXHRcdFx0XHRcdFx0XHRvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsga2V5IF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ID09PSBkb2N1bWVudCB8fCBjb250ZXh0IHx8IG91dGVybW9zdDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHNcblx0XHRcdC8vIFN1cHBvcnQ6IElFPDksIFNhZmFyaVxuXHRcdFx0Ly8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6IFwibGVuZ3RoXCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkXG5cdFx0XHRmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggYnlFbGVtZW50ICYmIGVsZW0gKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0aWYgKCAhY29udGV4dCAmJiBlbGVtLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0XHRcdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0XHRcdFx0XHRcdHhtbCA9ICFkb2N1bWVudElzSFRNTDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCB8fCBkb2N1bWVudCwgeG1sKSApIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnNcblx0XHRcdFx0aWYgKCBieVNldCApIHtcblx0XHRcdFx0XHQvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzXG5cdFx0XHRcdFx0aWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlZENvdW50LS07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTGVuZ3RoZW4gdGhlIGFycmF5IGZvciBldmVyeSBlbGVtZW50LCBtYXRjaGVkIG9yIG5vdFxuXHRcdFx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0XHRcdHVubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIGBpYCBpcyBub3cgdGhlIGNvdW50IG9mIGVsZW1lbnRzIHZpc2l0ZWQgYWJvdmUsIGFuZCBhZGRpbmcgaXQgdG8gYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIG1ha2VzIHRoZSBsYXR0ZXIgbm9ubmVnYXRpdmUuXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBOT1RFOiBUaGlzIGNhbiBiZSBza2lwcGVkIGlmIHRoZXJlIGFyZSBubyB1bm1hdGNoZWQgZWxlbWVudHMgKGkuZS4sIGBtYXRjaGVkQ291bnRgXG5cdFx0XHQvLyBlcXVhbHMgYGlgKSwgdW5sZXNzIHdlIGRpZG4ndCB2aXNpdCBfYW55XyBlbGVtZW50cyBpbiB0aGUgYWJvdmUgbG9vcCBiZWNhdXNlIHdlIGhhdmVcblx0XHRcdC8vIG5vIGVsZW1lbnQgbWF0Y2hlcnMgYW5kIG5vIHNlZWQuXG5cdFx0XHQvLyBJbmNyZW1lbnRpbmcgYW4gaW5pdGlhbGx5LXN0cmluZyBcIjBcIiBgaWAgYWxsb3dzIGBpYCB0byByZW1haW4gYSBzdHJpbmcgb25seSBpbiB0aGF0XG5cdFx0XHQvLyBjYXNlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIFwiMDBcIiBgbWF0Y2hlZENvdW50YCB0aGF0IGRpZmZlcnMgZnJvbSBgaWAgYnV0IGlzIGFsc29cblx0XHRcdC8vIG51bWVyaWNhbGx5IHplcm8uXG5cdFx0XHRpZiAoIGJ5U2V0ICYmIGkgIT09IG1hdGNoZWRDb3VudCApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdC8vIFJlaW50ZWdyYXRlIGVsZW1lbnQgbWF0Y2hlcyB0byBlbGltaW5hdGUgdGhlIG5lZWQgZm9yIHNvcnRpbmdcblx0XHRcdFx0XHRpZiAoIG1hdGNoZWRDb3VudCA+IDAgKSB7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCAhKHVubWF0Y2hlZFtpXSB8fCBzZXRNYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0XHRzZXRNYXRjaGVkW2ldID0gcG9wLmNhbGwoIHJlc3VsdHMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzXG5cdFx0XHRcdFx0c2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzXG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNldE1hdGNoZWQgKTtcblxuXHRcdFx0XHQvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmdcblx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmXG5cdFx0XHRcdFx0KCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7XG5cblx0XHRcdFx0XHRTaXp6bGUudW5pcXVlU29ydCggcmVzdWx0cyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVyc1xuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHVubWF0Y2hlZDtcblx0XHR9O1xuXG5cdHJldHVybiBieVNldCA/XG5cdFx0bWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6XG5cdFx0c3VwZXJNYXRjaGVyO1xufVxuXG5jb21waWxlID0gU2l6emxlLmNvbXBpbGUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIG1hdGNoIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkge1xuXHR2YXIgaSxcblx0XHRzZXRNYXRjaGVycyA9IFtdLFxuXHRcdGVsZW1lbnRNYXRjaGVycyA9IFtdLFxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoICFjYWNoZWQgKSB7XG5cdFx0Ly8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50XG5cdFx0aWYgKCAhbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaCA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdH1cblx0XHRpID0gbWF0Y2gubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0Y2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoW2ldICk7XG5cdFx0XHRpZiAoIGNhY2hlZFsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRzZXRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWNoZSB0aGUgY29tcGlsZWQgZnVuY3Rpb25cblx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlKCBzZWxlY3RvciwgbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgKTtcblxuXHRcdC8vIFNhdmUgc2VsZWN0b3IgYW5kIHRva2VuaXphdGlvblxuXHRcdGNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHR9XG5cdHJldHVybiBjYWNoZWQ7XG59O1xuXG4vKipcbiAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkXG4gKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0XG4gKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c11cbiAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0XG4gKi9cbnNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLFxuXHRcdGNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgc2VsZWN0b3IsXG5cdFx0bWF0Y2ggPSAhc2VlZCAmJiB0b2tlbml6ZSggKHNlbGVjdG9yID0gY29tcGlsZWQuc2VsZWN0b3IgfHwgc2VsZWN0b3IpICk7XG5cblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cblx0Ly8gVHJ5IHRvIG1pbmltaXplIG9wZXJhdGlvbnMgaWYgdGhlcmUgaXMgb25seSBvbmUgc2VsZWN0b3IgaW4gdGhlIGxpc3QgYW5kIG5vIHNlZWRcblx0Ly8gKHRoZSBsYXR0ZXIgb2Ygd2hpY2ggZ3VhcmFudGVlcyB1cyBjb250ZXh0KVxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFJlZHVjZSBjb250ZXh0IGlmIHRoZSBsZWFkaW5nIGNvbXBvdW5kIHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0Y29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJiBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkge1xuXG5cdFx0XHRjb250ZXh0ID0gKCBFeHByLmZpbmRbXCJJRFwiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07XG5cdFx0XHRpZiAoICFjb250ZXh0ICkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0Ly8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuXHRcdFx0fSBlbHNlIGlmICggY29tcGlsZWQgKSB7XG5cdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcblx0XHRpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRva2VuID0gdG9rZW5zW2ldO1xuXG5cdFx0XHQvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yXG5cdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuXHRcdFx0XHQvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnNcblx0XHRcdFx0aWYgKCAoc2VlZCA9IGZpbmQoXG5cdFx0XHRcdFx0dG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuXHRcdFx0XHRcdHJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0XHRcdFx0KSkgKSB7XG5cblx0XHRcdFx0XHQvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcblx0XHRcdFx0XHR0b2tlbnMuc3BsaWNlKCBpLCAxICk7XG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcblx0XHRcdFx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG5cdC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcblx0KCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKFxuXHRcdHNlZWQsXG5cdFx0Y29udGV4dCxcblx0XHQhZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmVzdWx0cyxcblx0XHQhY29udGV4dCB8fCByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdCk7XG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gT25lLXRpbWUgYXNzaWdubWVudHNcblxuLy8gU29ydCBzdGFiaWxpdHlcbnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lIDE0LTM1K1xuLy8gQWx3YXlzIGFzc3VtZSBkdXBsaWNhdGVzIGlmIHRoZXkgYXJlbid0IHBhc3NlZCB0byB0aGUgY29tcGFyaXNvbiBmdW5jdGlvblxuc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7XG5cbi8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudFxuc2V0RG9jdW1lbnQoKTtcblxuLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNylcbi8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKlxuc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGVsLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4XG5pZiAoICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JyMnPjwvYT5cIjtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIgO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxpbnB1dC8+XCI7XG5cdGVsLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSA9PSBudWxsO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgdmFsO1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xuXHRcdH1cblx0fSk7XG59XG5cbnJldHVybiBTaXp6bGU7XG5cbn0pKCB3aW5kb3cgKTtcblxuXG5cbmpRdWVyeS5maW5kID0gU2l6emxlO1xualF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzO1xuXG4vLyBEZXByZWNhdGVkXG5qUXVlcnkuZXhwclsgXCI6XCIgXSA9IGpRdWVyeS5leHByLnBzZXVkb3M7XG5qUXVlcnkudW5pcXVlU29ydCA9IGpRdWVyeS51bmlxdWUgPSBTaXp6bGUudW5pcXVlU29ydDtcbmpRdWVyeS50ZXh0ID0gU2l6emxlLmdldFRleHQ7XG5qUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5qUXVlcnkuY29udGFpbnMgPSBTaXp6bGUuY29udGFpbnM7XG5qUXVlcnkuZXNjYXBlU2VsZWN0b3IgPSBTaXp6bGUuZXNjYXBlO1xuXG5cblxuXG52YXIgZGlyID0gZnVuY3Rpb24oIGVsZW0sIGRpciwgdW50aWwgKSB7XG5cdHZhciBtYXRjaGVkID0gW10sXG5cdFx0dHJ1bmNhdGUgPSB1bnRpbCAhPT0gdW5kZWZpbmVkO1xuXG5cdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkge1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXRjaGVkO1xufTtcblxuXG52YXIgc2libGluZ3MgPSBmdW5jdGlvbiggbiwgZWxlbSApIHtcblx0dmFyIG1hdGNoZWQgPSBbXTtcblxuXHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdGlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkge1xuXHRcdFx0bWF0Y2hlZC5wdXNoKCBuICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG5cblxuZnVuY3Rpb24gbm9kZU5hbWUoIGVsZW0sIG5hbWUgKSB7XG5cbiAgcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cbn07XG52YXIgcnNpbmdsZVRhZyA9ICggL148KFthLXpdW15cXC9cXDA+OlxceDIwXFx0XFxyXFxuXFxmXSopW1xceDIwXFx0XFxyXFxuXFxmXSpcXC8/Pig/OjxcXC9cXDE+fCkkL2kgKTtcblxuXG5cbi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90XG5mdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcblx0aWYgKCBpc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdHJldHVybiAhIXF1YWxpZmllci5jYWxsKCBlbGVtLCBpLCBlbGVtICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBTaW5nbGUgZWxlbWVudFxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gQXJyYXlsaWtlIG9mIGVsZW1lbnRzIChqUXVlcnksIGFyZ3VtZW50cywgQXJyYXkpXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGluZGV4T2YuY2FsbCggcXVhbGlmaWVyLCBlbGVtICkgPiAtMSApICE9PSBub3Q7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gRmlsdGVyZWQgZGlyZWN0bHkgZm9yIGJvdGggc2ltcGxlIGFuZCBjb21wbGV4IHNlbGVjdG9yc1xuXHRyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7XG59XG5cbmpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHtcblx0dmFyIGVsZW0gPSBlbGVtc1sgMCBdO1xuXG5cdGlmICggbm90ICkge1xuXHRcdGV4cHIgPSBcIjpub3QoXCIgKyBleHByICsgXCIpXCI7XG5cdH1cblxuXHRpZiAoIGVsZW1zLmxlbmd0aCA9PT0gMSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdHJldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW107XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlcyggZXhwciwgalF1ZXJ5LmdyZXAoIGVsZW1zLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMTtcblx0fSApICk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgaSwgcmV0LFxuXHRcdFx0bGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRzZWxmID0gdGhpcztcblxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggc2VsZlsgaSBdLCB0aGlzICkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gKSApO1xuXHRcdH1cblxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBbXSApO1xuXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbGVuID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCByZXQgKSA6IHJldDtcblx0fSxcblx0ZmlsdGVyOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSApICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSApICk7XG5cdH0sXG5cdGlzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuICEhd2lubm93KFxuXHRcdFx0dGhpcyxcblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIHBvc2l0aW9uYWwvcmVsYXRpdmUgc2VsZWN0b3IsIGNoZWNrIG1lbWJlcnNoaXAgaW4gdGhlIHJldHVybmVkIHNldFxuXHRcdFx0Ly8gc28gJChcInA6Zmlyc3RcIikuaXMoXCJwOmxhc3RcIikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvIFwicFwiLlxuXHRcdFx0dHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICYmIHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3IgKSA6XG5cdFx0XHRcdHNlbGVjdG9yIHx8IFtdLFxuXHRcdFx0ZmFsc2Vcblx0XHQpLmxlbmd0aDtcblx0fVxufSApO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHQvLyBTaG9ydGN1dCBzaW1wbGUgI2lkIGNhc2UgZm9yIHNwZWVkXG5cdHJxdWlja0V4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0rKSkkLyxcblxuXHRpbml0ID0galF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJvb3QgKSB7XG5cdFx0dmFyIG1hdGNoLCBlbGVtO1xuXG5cdFx0Ly8gSEFORExFOiAkKFwiXCIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpXG5cdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHQvLyBNZXRob2QgaW5pdCgpIGFjY2VwdHMgYW4gYWx0ZXJuYXRlIHJvb3RqUXVlcnlcblx0XHQvLyBzbyBtaWdyYXRlIGNhbiBzdXBwb3J0IGpRdWVyeS5zdWIgKGdoLTIxMDEpXG5cdFx0cm9vdCA9IHJvb3QgfHwgcm9vdGpRdWVyeTtcblxuXHRcdC8vIEhhbmRsZSBIVE1MIHN0cmluZ3Ncblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGlmICggc2VsZWN0b3JbIDAgXSA9PT0gXCI8XCIgJiZcblx0XHRcdFx0c2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiZcblx0XHRcdFx0c2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cblx0XHRcdFx0Ly8gQXNzdW1lIHRoYXQgc3RyaW5ncyB0aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCA8PiBhcmUgSFRNTCBhbmQgc2tpcCB0aGUgcmVnZXggY2hlY2tcblx0XHRcdFx0bWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYXRjaCBodG1sIG9yIG1ha2Ugc3VyZSBubyBjb250ZXh0IGlzIHNwZWNpZmllZCBmb3IgI2lkXG5cdFx0XHRpZiAoIG1hdGNoICYmICggbWF0Y2hbIDEgXSB8fCAhY29udGV4dCApICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWyAxIF0gKSB7XG5cdFx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZXh0WyAwIF0gOiBjb250ZXh0O1xuXG5cdFx0XHRcdFx0Ly8gT3B0aW9uIHRvIHJ1biBzY3JpcHRzIGlzIHRydWUgZm9yIGJhY2stY29tcGF0XG5cdFx0XHRcdFx0Ly8gSW50ZW50aW9uYWxseSBsZXQgdGhlIGVycm9yIGJlIHRocm93biBpZiBwYXJzZUhUTUwgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoXG5cdFx0XHRcdFx0XHRtYXRjaFsgMSBdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWyAxIF0gKSAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29udGV4dCApICkge1xuXHRcdFx0XHRcdFx0Zm9yICggbWF0Y2ggaW4gY29udGV4dCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBQcm9wZXJ0aWVzIG9mIGNvbnRleHQgYXJlIGNhbGxlZCBhcyBtZXRob2RzIGlmIHBvc3NpYmxlXG5cdFx0XHRcdFx0XHRcdGlmICggaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTtcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKCNpZClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWyAyIF0gKTtcblxuXHRcdFx0XHRcdGlmICggZWxlbSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSW5qZWN0IHRoZSBlbGVtZW50IGRpcmVjdGx5IGludG8gdGhlIGpRdWVyeSBvYmplY3Rcblx0XHRcdFx0XHRcdHRoaXNbIDAgXSA9IGVsZW07XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cblx0XHRcdC8vIEhBTkRMRTogJChleHByLCAkKC4uLikpXG5cdFx0XHR9IGVsc2UgaWYgKCAhY29udGV4dCB8fCBjb250ZXh0LmpxdWVyeSApIHtcblx0XHRcdFx0cmV0dXJuICggY29udGV4dCB8fCByb290ICkuZmluZCggc2VsZWN0b3IgKTtcblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpXG5cdFx0XHQvLyAod2hpY2ggaXMganVzdCBlcXVpdmFsZW50IHRvOiAkKGNvbnRleHQpLmZpbmQoZXhwcilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdC8vIEhBTkRMRTogJChET01FbGVtZW50KVxuXHRcdH0gZWxzZSBpZiAoIHNlbGVjdG9yLm5vZGVUeXBlICkge1xuXHRcdFx0dGhpc1sgMCBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBpc0Z1bmN0aW9uKCBzZWxlY3RvciApICkge1xuXHRcdFx0cmV0dXJuIHJvb3QucmVhZHkgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHJvb3QucmVhZHkoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIEV4ZWN1dGUgaW1tZWRpYXRlbHkgaWYgcmVhZHkgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0c2VsZWN0b3IoIGpRdWVyeSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cblx0Ly8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXRcblx0Z3VhcmFudGVlZFVuaXF1ZSA9IHtcblx0XHRjaGlsZHJlbjogdHJ1ZSxcblx0XHRjb250ZW50czogdHJ1ZSxcblx0XHRuZXh0OiB0cnVlLFxuXHRcdHByZXY6IHRydWVcblx0fTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRoYXM6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0dmFyIHRhcmdldHMgPSBqUXVlcnkoIHRhcmdldCwgdGhpcyApLFxuXHRcdFx0bCA9IHRhcmdldHMubGVuZ3RoO1xuXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbIGkgXSApICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGNsb3Nlc3Q6IGZ1bmN0aW9uKCBzZWxlY3RvcnMsIGNvbnRleHQgKSB7XG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0bWF0Y2hlZCA9IFtdLFxuXHRcdFx0dGFyZ2V0cyA9IHR5cGVvZiBzZWxlY3RvcnMgIT09IFwic3RyaW5nXCIgJiYgalF1ZXJ5KCBzZWxlY3RvcnMgKTtcblxuXHRcdC8vIFBvc2l0aW9uYWwgc2VsZWN0b3JzIG5ldmVyIG1hdGNoLCBzaW5jZSB0aGVyZSdzIG5vIF9zZWxlY3Rpb25fIGNvbnRleHRcblx0XHRpZiAoICFybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9ycyApICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmb3IgKCBjdXIgPSB0aGlzWyBpIF07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzXG5cdFx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHRhcmdldHMgP1xuXHRcdFx0XHRcdFx0dGFyZ2V0cy5pbmRleCggY3VyICkgPiAtMSA6XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdFx0Y3VyLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggY3VyLCBzZWxlY3RvcnMgKSApICkge1xuXG5cdFx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApIDogbWF0Y2hlZCApO1xuXHR9LFxuXG5cdC8vIERldGVybWluZSB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCB3aXRoaW4gdGhlIHNldFxuXHRpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBObyBhcmd1bWVudCwgcmV0dXJuIGluZGV4IGluIHBhcmVudFxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLnBhcmVudE5vZGUgKSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTE7XG5cdFx0fVxuXG5cdFx0Ly8gSW5kZXggaW4gc2VsZWN0b3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggalF1ZXJ5KCBlbGVtICksIHRoaXNbIDAgXSApO1xuXHRcdH1cblxuXHRcdC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuXHRcdHJldHVybiBpbmRleE9mLmNhbGwoIHRoaXMsXG5cblx0XHRcdC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuXHRcdFx0ZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtXG5cdFx0KTtcblx0fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soXG5cdFx0XHRqUXVlcnkudW5pcXVlU29ydChcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLmdldCgpLCBqUXVlcnkoIHNlbGVjdG9yLCBjb250ZXh0ICkgKVxuXHRcdFx0KVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXG5cdFx0KTtcblx0fVxufSApO1xuXG5mdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHtcblx0d2hpbGUgKCAoIGN1ciA9IGN1clsgZGlyIF0gKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCgge1xuXHRwYXJlbnQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0cmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDtcblx0fSxcblx0cGFyZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG5cdH0sXG5cdG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTtcblx0fSxcblx0Y2hpbGRyZW46IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5ncyggZWxlbS5maXJzdENoaWxkICk7XG5cdH0sXG5cdGNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgaWYgKCBub2RlTmFtZSggZWxlbSwgXCJpZnJhbWVcIiApICkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHksIGlPUyA3IG9ubHksIEFuZHJvaWQgQnJvd3NlciA8PTQuMyBvbmx5XG4gICAgICAgIC8vIFRyZWF0IHRoZSB0ZW1wbGF0ZSBlbGVtZW50IGFzIGEgcmVndWxhciBvbmUgaW4gYnJvd3NlcnMgdGhhdFxuICAgICAgICAvLyBkb24ndCBzdXBwb3J0IGl0LlxuICAgICAgICBpZiAoIG5vZGVOYW1lKCBlbGVtLCBcInRlbXBsYXRlXCIgKSApIHtcbiAgICAgICAgICAgIGVsZW0gPSBlbGVtLmNvbnRlbnQgfHwgZWxlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXG5cdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRlc1xuXHRcdFx0aWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkge1xuXHRcdFx0XHRqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0gKTtcbnZhciBybm90aHRtbHdoaXRlID0gKCAvW15cXHgyMFxcdFxcclxcblxcZl0rL2cgKTtcblxuXG5cbi8vIENvbnZlcnQgU3RyaW5nLWZvcm1hdHRlZCBvcHRpb25zIGludG8gT2JqZWN0LWZvcm1hdHRlZCBvbmVzXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0ge307XG5cdGpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW10sIGZ1bmN0aW9uKCBfLCBmbGFnICkge1xuXHRcdG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcblx0fSApO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSA6XG5cdFx0alF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTtcblxuXHR2YXIgLy8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZ1xuXHRcdGZpcmluZyxcblxuXHRcdC8vIExhc3QgZmlyZSB2YWx1ZSBmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzXG5cdFx0bWVtb3J5LFxuXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblxuXHRcdC8vIEZsYWcgdG8gcHJldmVudCBmaXJpbmdcblx0XHRsb2NrZWQsXG5cblx0XHQvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdFxuXHRcdGxpc3QgPSBbXSxcblxuXHRcdC8vIFF1ZXVlIG9mIGV4ZWN1dGlvbiBkYXRhIGZvciByZXBlYXRhYmxlIGxpc3RzXG5cdFx0cXVldWUgPSBbXSxcblxuXHRcdC8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IGFkZC9yZW1vdmUgYXMgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4ID0gLTEsXG5cblx0XHQvLyBGaXJlIGNhbGxiYWNrc1xuXHRcdGZpcmUgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5mb3JjZSBzaW5nbGUtZmlyaW5nXG5cdFx0XHRsb2NrZWQgPSBsb2NrZWQgfHwgb3B0aW9ucy5vbmNlO1xuXG5cdFx0XHQvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucyxcblx0XHRcdC8vIHJlc3BlY3RpbmcgZmlyaW5nSW5kZXggb3ZlcnJpZGVzIGFuZCBydW50aW1lIGNoYW5nZXNcblx0XHRcdGZpcmVkID0gZmlyaW5nID0gdHJ1ZTtcblx0XHRcdGZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkge1xuXHRcdFx0XHRtZW1vcnkgPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0XHR3aGlsZSAoICsrZmlyaW5nSW5kZXggPCBsaXN0Lmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdC8vIFJ1biBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGVhcmx5IHRlcm1pbmF0aW9uXG5cdFx0XHRcdFx0aWYgKCBsaXN0WyBmaXJpbmdJbmRleCBdLmFwcGx5KCBtZW1vcnlbIDAgXSwgbWVtb3J5WyAxIF0gKSA9PT0gZmFsc2UgJiZcblx0XHRcdFx0XHRcdG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEp1bXAgdG8gZW5kIGFuZCBmb3JnZXQgdGhlIGRhdGEgc28gLmFkZCBkb2Vzbid0IHJlLWZpcmVcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0XHRtZW1vcnkgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdFxuXHRcdFx0aWYgKCAhb3B0aW9ucy5tZW1vcnkgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRmaXJpbmcgPSBmYWxzZTtcblxuXHRcdFx0Ly8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2Rcblx0XHRcdGlmICggbG9ja2VkICkge1xuXG5cdFx0XHRcdC8vIEtlZXAgYW4gZW1wdHkgbGlzdCBpZiB3ZSBoYXZlIGRhdGEgZm9yIGZ1dHVyZSBhZGQgY2FsbHNcblx0XHRcdFx0aWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgdGhpcyBvYmplY3QgaXMgc3BlbnRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaXN0ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cblx0XHRcdC8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3Rcblx0XHRcdGFkZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgbWVtb3J5IGZyb20gYSBwYXN0IHJ1biwgd2Ugc2hvdWxkIGZpcmUgYWZ0ZXIgYWRkaW5nXG5cdFx0XHRcdFx0aWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0cXVldWUucHVzaCggbWVtb3J5ICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0KCBmdW5jdGlvbiBhZGQoIGFyZ3MgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGlzdC5wdXNoKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIHRvVHlwZSggYXJnICkgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBJbnNwZWN0IHJlY3Vyc2l2ZWx5XG5cdFx0XHRcdFx0XHRcdFx0YWRkKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdH0gKSggYXJndW1lbnRzICk7XG5cblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhIGNhbGxiYWNrIGZyb20gdGhlIGxpc3Rcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0dmFyIGluZGV4O1xuXHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0bGlzdC5zcGxpY2UoIGluZGV4LCAxICk7XG5cblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBmaXJpbmcgaW5kZXhlc1xuXHRcdFx0XHRcdFx0aWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHtcblx0XHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXgtLTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDaGVjayBpZiBhIGdpdmVuIGNhbGxiYWNrIGlzIGluIHRoZSBsaXN0LlxuXHRcdFx0Ly8gSWYgbm8gYXJndW1lbnQgaXMgZ2l2ZW4sIHJldHVybiB3aGV0aGVyIG9yIG5vdCBsaXN0IGhhcyBjYWxsYmFja3MgYXR0YWNoZWQuXG5cdFx0XHRoYXM6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0cmV0dXJuIGZuID9cblx0XHRcdFx0XHRqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDpcblx0XHRcdFx0XHRsaXN0Lmxlbmd0aCA+IDA7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBEaXNhYmxlIC5maXJlIGFuZCAuYWRkXG5cdFx0XHQvLyBBYm9ydCBhbnkgY3VycmVudC9wZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdC8vIENsZWFyIGFsbCBjYWxsYmFja3MgYW5kIHZhbHVlc1xuXHRcdFx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxvY2tlZCA9IHF1ZXVlID0gW107XG5cdFx0XHRcdGxpc3QgPSBtZW1vcnkgPSBcIlwiO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhbGlzdDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmVcblx0XHRcdC8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpXG5cdFx0XHQvLyBBYm9ydCBhbnkgcGVuZGluZyBleGVjdXRpb25zXG5cdFx0XHRsb2NrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0aWYgKCAhbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhbG9ja2VkO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2FsbCBhbGwgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGNvbnRleHQgYW5kIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZVdpdGg6IGZ1bmN0aW9uKCBjb250ZXh0LCBhcmdzICkge1xuXHRcdFx0XHRpZiAoICFsb2NrZWQgKSB7XG5cdFx0XHRcdFx0YXJncyA9IGFyZ3MgfHwgW107XG5cdFx0XHRcdFx0YXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0aWYgKCAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzXG5cdFx0XHRmaXJlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5maXJlV2l0aCggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmZ1bmN0aW9uIElkZW50aXR5KCB2ICkge1xuXHRyZXR1cm4gdjtcbn1cbmZ1bmN0aW9uIFRocm93ZXIoIGV4ICkge1xuXHR0aHJvdyBleDtcbn1cblxuZnVuY3Rpb24gYWRvcHRWYWx1ZSggdmFsdWUsIHJlc29sdmUsIHJlamVjdCwgbm9WYWx1ZSApIHtcblx0dmFyIG1ldGhvZDtcblxuXHR0cnkge1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIHByb21pc2UgYXNwZWN0IGZpcnN0IHRvIHByaXZpbGVnZSBzeW5jaHJvbm91cyBiZWhhdmlvclxuXHRcdGlmICggdmFsdWUgJiYgaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS5wcm9taXNlICkgKSApIHtcblx0XHRcdG1ldGhvZC5jYWxsKCB2YWx1ZSApLmRvbmUoIHJlc29sdmUgKS5mYWlsKCByZWplY3QgKTtcblxuXHRcdC8vIE90aGVyIHRoZW5hYmxlc1xuXHRcdH0gZWxzZSBpZiAoIHZhbHVlICYmIGlzRnVuY3Rpb24oICggbWV0aG9kID0gdmFsdWUudGhlbiApICkgKSB7XG5cdFx0XHRtZXRob2QuY2FsbCggdmFsdWUsIHJlc29sdmUsIHJlamVjdCApO1xuXG5cdFx0Ly8gT3RoZXIgbm9uLXRoZW5hYmxlc1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIENvbnRyb2wgYHJlc29sdmVgIGFyZ3VtZW50cyBieSBsZXR0aW5nIEFycmF5I3NsaWNlIGNhc3QgYm9vbGVhbiBgbm9WYWx1ZWAgdG8gaW50ZWdlcjpcblx0XHRcdC8vICogZmFsc2U6IFsgdmFsdWUgXS5zbGljZSggMCApID0+IHJlc29sdmUoIHZhbHVlIClcblx0XHRcdC8vICogdHJ1ZTogWyB2YWx1ZSBdLnNsaWNlKCAxICkgPT4gcmVzb2x2ZSgpXG5cdFx0XHRyZXNvbHZlLmFwcGx5KCB1bmRlZmluZWQsIFsgdmFsdWUgXS5zbGljZSggbm9WYWx1ZSApICk7XG5cdFx0fVxuXG5cdC8vIEZvciBQcm9taXNlcy9BKywgY29udmVydCBleGNlcHRpb25zIGludG8gcmVqZWN0aW9uc1xuXHQvLyBTaW5jZSBqUXVlcnkud2hlbiBkb2Vzbid0IHVud3JhcCB0aGVuYWJsZXMsIHdlIGNhbiBza2lwIHRoZSBleHRyYSBjaGVja3MgYXBwZWFyaW5nIGluXG5cdC8vIERlZmVycmVkI3RoZW4gdG8gY29uZGl0aW9uYWxseSBzdXBwcmVzcyByZWplY3Rpb24uXG5cdH0gY2F0Y2ggKCB2YWx1ZSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIG9ubHlcblx0XHQvLyBTdHJpY3QgbW9kZSBmdW5jdGlvbnMgaW52b2tlZCB3aXRob3V0IC5jYWxsLy5hcHBseSBnZXQgZ2xvYmFsLW9iamVjdCBjb250ZXh0XG5cdFx0cmVqZWN0LmFwcGx5KCB1bmRlZmluZWQsIFsgdmFsdWUgXSApO1xuXHR9XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHREZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7XG5cdFx0dmFyIHR1cGxlcyA9IFtcblxuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgY2FsbGJhY2tzLFxuXHRcdFx0XHQvLyAuLi4gLnRoZW4gaGFuZGxlcnMsIGFyZ3VtZW50IGluZGV4LCBbZmluYWwgc3RhdGVdXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm1lbW9yeVwiICksXG5cdFx0XHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJtZW1vcnlcIiApLCAyIF0sXG5cdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XHRcdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgMCwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAxLCBcInJlamVjdGVkXCIgXVxuXHRcdFx0XSxcblx0XHRcdHN0YXRlID0gXCJwZW5kaW5nXCIsXG5cdFx0XHRwcm9taXNlID0ge1xuXHRcdFx0XHRzdGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhbHdheXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLmRvbmUoIGFyZ3VtZW50cyApLmZhaWwoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImNhdGNoXCI6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS50aGVuKCBudWxsLCBmbiApO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0cGlwZTogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gTWFwIHR1cGxlcyAocHJvZ3Jlc3MsIGRvbmUsIGZhaWwpIHRvIGFyZ3VtZW50cyAoZG9uZSwgZmFpbCwgcHJvZ3Jlc3MpXG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGlzRnVuY3Rpb24oIGZuc1sgdHVwbGVbIDQgXSBdICkgJiYgZm5zWyB0dXBsZVsgNCBdIF07XG5cblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQucHJvZ3Jlc3MoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIubm90aWZ5IH0pXG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkLmRvbmUoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIucmVzb2x2ZSB9KVxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZC5mYWlsKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlamVjdCB9KVxuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDEgXSBdKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0dXJuZWQgPSBmbiAmJiBmbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCByZXR1cm5lZCAmJiBpc0Z1bmN0aW9uKCByZXR1cm5lZC5wcm9taXNlICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZC5wcm9taXNlKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXJbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50c1xuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzICkge1xuXHRcdFx0XHRcdHZhciBtYXhEZXB0aCA9IDA7XG5cdFx0XHRcdFx0ZnVuY3Rpb24gcmVzb2x2ZSggZGVwdGgsIGRlZmVycmVkLCBoYW5kbGVyLCBzcGVjaWFsICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0YXJncyA9IGFyZ3VtZW50cyxcblx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0dXJuZWQsIHRoZW47XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy4zXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01OVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWdub3JlIGRvdWJsZS1yZXNvbHV0aW9uIGF0dGVtcHRzXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoIDwgbWF4RGVwdGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQgPSBoYW5kbGVyLmFwcGx5KCB0aGF0LCBhcmdzICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjFcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTQ4XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHJldHVybmVkID09PSBkZWZlcnJlZC5wcm9taXNlKCkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoIFwiVGhlbmFibGUgc2VsZi1yZXNvbHV0aW9uXCIgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbnMgMi4zLjMuMSwgMy41XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01NFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNzVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJldHJpZXZlIGB0aGVuYCBvbmx5IG9uY2Vcblx0XHRcdFx0XHRcdFx0XHRcdHRoZW4gPSByZXR1cm5lZCAmJlxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNjRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBjaGVjayBvYmplY3RzIGFuZCBmdW5jdGlvbnMgZm9yIHRoZW5hYmlsaXR5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCggdHlwZW9mIHJldHVybmVkID09PSBcIm9iamVjdFwiIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZW9mIHJldHVybmVkID09PSBcImZ1bmN0aW9uXCIgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZC50aGVuO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgYSByZXR1cm5lZCB0aGVuYWJsZVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCB0aGVuICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3BlY2lhbCBwcm9jZXNzb3JzIChub3RpZnkpIGp1c3Qgd2FpdCBmb3IgcmVzb2x1dGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhlbi5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gTm9ybWFsIHByb2Nlc3NvcnMgKHJlc29sdmUpIGFsc28gaG9vayBpbnRvIHByb2dyZXNzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgZGlzcmVnYXJkIG9sZGVyIHJlc29sdXRpb24gdmFsdWVzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWF4RGVwdGgrKztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoZW4uY2FsbChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwgc3BlY2lhbCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBUaHJvd2VyLCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhbGwgb3RoZXIgcmV0dXJuZWQgdmFsdWVzXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgc3Vic3RpdHV0ZSBoYW5kbGVycyBwYXNzIG9uIGNvbnRleHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gSWRlbnRpdHkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhhdCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcmdzID0gWyByZXR1cm5lZCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUHJvY2VzcyB0aGUgdmFsdWUocylcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmYXVsdCBwcm9jZXNzIGlzIHJlc29sdmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0KCBzcGVjaWFsIHx8IGRlZmVycmVkLnJlc29sdmVXaXRoICkoIHRoYXQsIGFyZ3MgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBub3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgY2F0Y2ggYW5kIHJlamVjdCBleGNlcHRpb25zXG5cdFx0XHRcdFx0XHRcdFx0cHJvY2VzcyA9IHNwZWNpYWwgP1xuXHRcdFx0XHRcdFx0XHRcdFx0bWlnaHRUaHJvdyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKCBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuNC4xXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNjFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgcG9zdC1yZXNvbHV0aW9uIGV4Y2VwdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoICsgMSA+PSBtYXhEZXB0aCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBzdWJzdGl0dXRlIGhhbmRsZXJzIHBhc3Mgb24gY29udGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGhhbmRsZXIgIT09IFRocm93ZXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoYXQgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBbIGUgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuMVxuXHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01N1xuXHRcdFx0XHRcdFx0XHQvLyBSZS1yZXNvbHZlIHByb21pc2VzIGltbWVkaWF0ZWx5IHRvIGRvZGdlIGZhbHNlIHJlamVjdGlvbiBmcm9tXG5cdFx0XHRcdFx0XHRcdC8vIHN1YnNlcXVlbnQgZXJyb3JzXG5cdFx0XHRcdFx0XHRcdGlmICggZGVwdGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0cHJvY2VzcygpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ2FsbCBhbiBvcHRpb25hbCBob29rIHRvIHJlY29yZCB0aGUgc3RhY2ssIGluIGNhc2Ugb2YgZXhjZXB0aW9uXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2luY2UgaXQncyBvdGhlcndpc2UgbG9zdCB3aGVuIGV4ZWN1dGlvbiBnb2VzIGFzeW5jXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cHJvY2Vzcy5zdGFja1RyYWNlID0galF1ZXJ5LkRlZmVycmVkLmdldFN0YWNrSG9vaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggcHJvY2VzcyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblxuXHRcdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRpc0Z1bmN0aW9uKCBvblByb2dyZXNzICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25Qcm9ncmVzcyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRJZGVudGl0eSxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlci5ub3RpZnlXaXRoXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDEgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uRnVsZmlsbGVkICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25GdWxmaWxsZWQgOlxuXHRcdFx0XHRcdFx0XHRcdFx0SWRlbnRpdHlcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAyIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRpc0Z1bmN0aW9uKCBvblJlamVjdGVkICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25SZWplY3RlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRUaHJvd2VyXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kc1xuXHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblx0XHRcdHZhciBsaXN0ID0gdHVwbGVbIDIgXSxcblx0XHRcdFx0c3RhdGVTdHJpbmcgPSB0dXBsZVsgNSBdO1xuXG5cdFx0XHQvLyBwcm9taXNlLnByb2dyZXNzID0gbGlzdC5hZGRcblx0XHRcdC8vIHByb21pc2UuZG9uZSA9IGxpc3QuYWRkXG5cdFx0XHQvLyBwcm9taXNlLmZhaWwgPSBsaXN0LmFkZFxuXHRcdFx0cHJvbWlzZVsgdHVwbGVbIDEgXSBdID0gbGlzdC5hZGQ7XG5cblx0XHRcdC8vIEhhbmRsZSBzdGF0ZVxuXHRcdFx0aWYgKCBzdGF0ZVN0cmluZyApIHtcblx0XHRcdFx0bGlzdC5hZGQoXG5cdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZXNvbHZlZFwiIChpLmUuLCBmdWxmaWxsZWQpXG5cdFx0XHRcdFx0XHQvLyBzdGF0ZSA9IFwicmVqZWN0ZWRcIlxuXHRcdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHQvLyBmdWxmaWxsZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHR0dXBsZXNbIDMgLSBpIF1bIDIgXS5kaXNhYmxlLFxuXG5cdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuZGlzYWJsZVxuXHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5kaXNhYmxlXG5cdFx0XHRcdFx0dHVwbGVzWyAzIC0gaSBdWyAzIF0uZGlzYWJsZSxcblxuXHRcdFx0XHRcdC8vIHByb2dyZXNzX2NhbGxiYWNrcy5sb2NrXG5cdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDIgXS5sb2NrLFxuXG5cdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMubG9ja1xuXHRcdFx0XHRcdHR1cGxlc1sgMCBdWyAzIF0ubG9ja1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5maXJlXG5cdFx0XHQvLyBmdWxmaWxsZWRfaGFuZGxlcnMuZmlyZVxuXHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuZmlyZVxuXHRcdFx0bGlzdC5hZGQoIHR1cGxlWyAzIF0uZmlyZSApO1xuXG5cdFx0XHQvLyBkZWZlcnJlZC5ub3RpZnkgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQubm90aWZ5V2l0aCguLi4pIH1cblx0XHRcdC8vIGRlZmVycmVkLnJlc29sdmUgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQucmVzb2x2ZVdpdGgoLi4uKSB9XG5cdFx0XHQvLyBkZWZlcnJlZC5yZWplY3QgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQucmVqZWN0V2l0aCguLi4pIH1cblx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHVuZGVmaW5lZCA6IHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH07XG5cblx0XHRcdC8vIGRlZmVycmVkLm5vdGlmeVdpdGggPSBsaXN0LmZpcmVXaXRoXG5cdFx0XHQvLyBkZWZlcnJlZC5yZXNvbHZlV2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdC8vIGRlZmVycmVkLnJlamVjdFdpdGggPSBsaXN0LmZpcmVXaXRoXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0gPSBsaXN0LmZpcmVXaXRoO1xuXHRcdH0gKTtcblxuXHRcdC8vIE1ha2UgdGhlIGRlZmVycmVkIGEgcHJvbWlzZVxuXHRcdHByb21pc2UucHJvbWlzZSggZGVmZXJyZWQgKTtcblxuXHRcdC8vIENhbGwgZ2l2ZW4gZnVuYyBpZiBhbnlcblx0XHRpZiAoIGZ1bmMgKSB7XG5cdFx0XHRmdW5jLmNhbGwoIGRlZmVycmVkLCBkZWZlcnJlZCApO1xuXHRcdH1cblxuXHRcdC8vIEFsbCBkb25lIVxuXHRcdHJldHVybiBkZWZlcnJlZDtcblx0fSxcblxuXHQvLyBEZWZlcnJlZCBoZWxwZXJcblx0d2hlbjogZnVuY3Rpb24oIHNpbmdsZVZhbHVlICkge1xuXHRcdHZhclxuXG5cdFx0XHQvLyBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXNcblx0XHRcdHJlbWFpbmluZyA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cblx0XHRcdC8vIGNvdW50IG9mIHVucHJvY2Vzc2VkIGFyZ3VtZW50c1xuXHRcdFx0aSA9IHJlbWFpbmluZyxcblxuXHRcdFx0Ly8gc3Vib3JkaW5hdGUgZnVsZmlsbG1lbnQgZGF0YVxuXHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gQXJyYXkoIGkgKSxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblxuXHRcdFx0Ly8gdGhlIG1hc3RlciBEZWZlcnJlZFxuXHRcdFx0bWFzdGVyID0galF1ZXJ5LkRlZmVycmVkKCksXG5cblx0XHRcdC8vIHN1Ym9yZGluYXRlIGNhbGxiYWNrIGZhY3Rvcnlcblx0XHRcdHVwZGF0ZUZ1bmMgPSBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXNvbHZlQ29udGV4dHNbIGkgXSA9IHRoaXM7XG5cdFx0XHRcdFx0cmVzb2x2ZVZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdGlmICggISggLS1yZW1haW5pbmcgKSApIHtcblx0XHRcdFx0XHRcdG1hc3Rlci5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblxuXHRcdC8vIFNpbmdsZS0gYW5kIGVtcHR5IGFyZ3VtZW50cyBhcmUgYWRvcHRlZCBsaWtlIFByb21pc2UucmVzb2x2ZVxuXHRcdGlmICggcmVtYWluaW5nIDw9IDEgKSB7XG5cdFx0XHRhZG9wdFZhbHVlKCBzaW5nbGVWYWx1ZSwgbWFzdGVyLmRvbmUoIHVwZGF0ZUZ1bmMoIGkgKSApLnJlc29sdmUsIG1hc3Rlci5yZWplY3QsXG5cdFx0XHRcdCFyZW1haW5pbmcgKTtcblxuXHRcdFx0Ly8gVXNlIC50aGVuKCkgdG8gdW53cmFwIHNlY29uZGFyeSB0aGVuYWJsZXMgKGNmLiBnaC0zMDAwKVxuXHRcdFx0aWYgKCBtYXN0ZXIuc3RhdGUoKSA9PT0gXCJwZW5kaW5nXCIgfHxcblx0XHRcdFx0aXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdICYmIHJlc29sdmVWYWx1ZXNbIGkgXS50aGVuICkgKSB7XG5cblx0XHRcdFx0cmV0dXJuIG1hc3Rlci50aGVuKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gTXVsdGlwbGUgYXJndW1lbnRzIGFyZSBhZ2dyZWdhdGVkIGxpa2UgUHJvbWlzZS5hbGwgYXJyYXkgZWxlbWVudHNcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdGFkb3B0VmFsdWUoIHJlc29sdmVWYWx1ZXNbIGkgXSwgdXBkYXRlRnVuYyggaSApLCBtYXN0ZXIucmVqZWN0ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hc3Rlci5wcm9taXNlKCk7XG5cdH1cbn0gKTtcblxuXG4vLyBUaGVzZSB1c3VhbGx5IGluZGljYXRlIGEgcHJvZ3JhbW1lciBtaXN0YWtlIGR1cmluZyBkZXZlbG9wbWVudCxcbi8vIHdhcm4gYWJvdXQgdGhlbSBBU0FQIHJhdGhlciB0aGFuIHN3YWxsb3dpbmcgdGhlbSBieSBkZWZhdWx0LlxudmFyIHJlcnJvck5hbWVzID0gL14oRXZhbHxJbnRlcm5hbHxSYW5nZXxSZWZlcmVuY2V8U3ludGF4fFR5cGV8VVJJKUVycm9yJC87XG5cbmpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rID0gZnVuY3Rpb24oIGVycm9yLCBzdGFjayApIHtcblxuXHQvLyBTdXBwb3J0OiBJRSA4IC0gOSBvbmx5XG5cdC8vIENvbnNvbGUgZXhpc3RzIHdoZW4gZGV2IHRvb2xzIGFyZSBvcGVuLCB3aGljaCBjYW4gaGFwcGVuIGF0IGFueSB0aW1lXG5cdGlmICggd2luZG93LmNvbnNvbGUgJiYgd2luZG93LmNvbnNvbGUud2FybiAmJiBlcnJvciAmJiByZXJyb3JOYW1lcy50ZXN0KCBlcnJvci5uYW1lICkgKSB7XG5cdFx0d2luZG93LmNvbnNvbGUud2FybiggXCJqUXVlcnkuRGVmZXJyZWQgZXhjZXB0aW9uOiBcIiArIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrLCBzdGFjayApO1xuXHR9XG59O1xuXG5cblxuXG5qUXVlcnkucmVhZHlFeGNlcHRpb24gPSBmdW5jdGlvbiggZXJyb3IgKSB7XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHR0aHJvdyBlcnJvcjtcblx0fSApO1xufTtcblxuXG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cbmpRdWVyeS5mbi5yZWFkeSA9IGZ1bmN0aW9uKCBmbiApIHtcblxuXHRyZWFkeUxpc3Rcblx0XHQudGhlbiggZm4gKVxuXG5cdFx0Ly8gV3JhcCBqUXVlcnkucmVhZHlFeGNlcHRpb24gaW4gYSBmdW5jdGlvbiBzbyB0aGF0IHRoZSBsb29rdXBcblx0XHQvLyBoYXBwZW5zIGF0IHRoZSB0aW1lIG9mIGVycm9yIGhhbmRsaW5nIGluc3RlYWQgb2YgY2FsbGJhY2tcblx0XHQvLyByZWdpc3RyYXRpb24uXG5cdFx0LmNhdGNoKCBmdW5jdGlvbiggZXJyb3IgKSB7XG5cdFx0XHRqUXVlcnkucmVhZHlFeGNlcHRpb24oIGVycm9yICk7XG5cdFx0fSApO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdGlzUmVhZHk6IGZhbHNlLFxuXG5cdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0Ly8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcblx0cmVhZHlXYWl0OiAxLFxuXG5cdC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0cmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG5cdFx0Ly8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuXHRcdGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuXHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0aWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuXHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkucmVhZHkudGhlbiA9IHJlYWR5TGlzdC50aGVuO1xuXG4vLyBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZFxuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkICk7XG5cdGpRdWVyeS5yZWFkeSgpO1xufVxuXG4vLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZFxuLy8gYWZ0ZXIgdGhlIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMCBvbmx5XG4vLyBPbGRlciBJRSBzb21ldGltZXMgc2lnbmFscyBcImludGVyYWN0aXZlXCIgdG9vIHNvb25cbmlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIHx8XG5cdCggZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIgJiYgIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCApICkge1xuXG5cdC8vIEhhbmRsZSBpdCBhc3luY2hyb25vdXNseSB0byBhbGxvdyBzY3JpcHRzIHRoZSBvcHBvcnR1bml0eSB0byBkZWxheSByZWFkeVxuXHR3aW5kb3cuc2V0VGltZW91dCggalF1ZXJ5LnJlYWR5ICk7XG5cbn0gZWxzZSB7XG5cblx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cblx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQgKTtcbn1cblxuXG5cblxuLy8gTXVsdGlmdW5jdGlvbmFsIG1ldGhvZCB0byBnZXQgYW5kIHNldCB2YWx1ZXMgb2YgYSBjb2xsZWN0aW9uXG4vLyBUaGUgdmFsdWUvcyBjYW4gb3B0aW9uYWxseSBiZSBleGVjdXRlZCBpZiBpdCdzIGEgZnVuY3Rpb25cbnZhciBhY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXG5cdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0aWYgKCB0b1R5cGUoIGtleSApID09PSBcIm9iamVjdFwiICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cdFx0Zm9yICggaSBpbiBrZXkgKSB7XG5cdFx0XHRhY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5WyBpIF0sIHRydWUsIGVtcHR5R2V0LCByYXcgKTtcblx0XHR9XG5cblx0Ly8gU2V0cyBvbmUgdmFsdWVcblx0fSBlbHNlIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXG5cdFx0aWYgKCAhaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJhdyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKCBidWxrICkge1xuXG5cdFx0XHQvLyBCdWxrIG9wZXJhdGlvbnMgcnVuIGFnYWluc3QgdGhlIGVudGlyZSBzZXRcblx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0Zm4gPSBudWxsO1xuXG5cdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbihcblx0XHRcdFx0XHRlbGVtc1sgaSBdLCBrZXksIHJhdyA/XG5cdFx0XHRcdFx0dmFsdWUgOlxuXHRcdFx0XHRcdHZhbHVlLmNhbGwoIGVsZW1zWyBpIF0sIGksIGZuKCBlbGVtc1sgaSBdLCBrZXkgKSApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBjaGFpbmFibGUgKSB7XG5cdFx0cmV0dXJuIGVsZW1zO1xuXHR9XG5cblx0Ly8gR2V0c1xuXHRpZiAoIGJ1bGsgKSB7XG5cdFx0cmV0dXJuIGZuLmNhbGwoIGVsZW1zICk7XG5cdH1cblxuXHRyZXR1cm4gbGVuID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xudmFyIHJtc1ByZWZpeCA9IC9eLW1zLS8sXG5cdHJkYXNoQWxwaGEgPSAvLShbYS16XSkvZztcblxuLy8gVXNlZCBieSBjYW1lbENhc2UgYXMgY2FsbGJhY2sgdG8gcmVwbGFjZSgpXG5mdW5jdGlvbiBmY2FtZWxDYXNlKCBhbGwsIGxldHRlciApIHtcblx0cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDE1XG4vLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpXG5mdW5jdGlvbiBjYW1lbENhc2UoIHN0cmluZyApIHtcblx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG59XG52YXIgYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKCBvd25lciApIHtcblxuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0cmV0dXJuIG93bmVyLm5vZGVUeXBlID09PSAxIHx8IG93bmVyLm5vZGVUeXBlID09PSA5IHx8ICEoICtvd25lci5ub2RlVHlwZSApO1xufTtcblxuXG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0dGhpcy5leHBhbmRvID0galF1ZXJ5LmV4cGFuZG8gKyBEYXRhLnVpZCsrO1xufVxuXG5EYXRhLnVpZCA9IDE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXG5cdGNhY2hlOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGVcblx0XHR2YXIgdmFsdWUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF2YWx1ZSApIHtcblx0XHRcdHZhbHVlID0ge307XG5cblx0XHRcdC8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLFxuXHRcdFx0Ly8gYnV0IHdlIHNob3VsZCBub3QsIHNlZSAjODMzNS5cblx0XHRcdC8vIEFsd2F5cyByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LlxuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBvd25lciApICkge1xuXG5cdFx0XHRcdC8vIElmIGl0IGlzIGEgbm9kZSB1bmxpa2VseSB0byBiZSBzdHJpbmdpZnktZWQgb3IgbG9vcGVkIG92ZXJcblx0XHRcdFx0Ly8gdXNlIHBsYWluIGFzc2lnbm1lbnRcblx0XHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB2YWx1ZTtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2Ugc2VjdXJlIGl0IGluIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHlcblx0XHRcdFx0Ly8gY29uZmlndXJhYmxlIG11c3QgYmUgdHJ1ZSB0byBhbGxvdyB0aGUgcHJvcGVydHkgdG8gYmVcblx0XHRcdFx0Ly8gZGVsZXRlZCB3aGVuIGRhdGEgaXMgcmVtb3ZlZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb3duZXIsIHRoaXMuZXhwYW5kbywge1xuXHRcdFx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGUoIG93bmVyICk7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRjYWNoZVsgY2FtZWxDYXNlKCBkYXRhICkgXSA9IHZhbHVlO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCB7IHByb3BlcnRpZXMgfSBdIGFyZ3Ncblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBDb3B5IHRoZSBwcm9wZXJ0aWVzIG9uZS1ieS1vbmUgdG8gdGhlIGNhY2hlIG9iamVjdFxuXHRcdFx0Zm9yICggcHJvcCBpbiBkYXRhICkge1xuXHRcdFx0XHRjYWNoZVsgY2FtZWxDYXNlKCBwcm9wICkgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9LFxuXHRnZXQ6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHR0aGlzLmNhY2hlKCBvd25lciApIDpcblxuXHRcdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdICYmIG93bmVyWyB0aGlzLmV4cGFuZG8gXVsgY2FtZWxDYXNlKCBrZXkgKSBdO1xuXHR9LFxuXHRhY2Nlc3M6IGZ1bmN0aW9uKCBvd25lciwga2V5LCB2YWx1ZSApIHtcblxuXHRcdC8vIEluIGNhc2VzIHdoZXJlIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWRcblx0XHQvLyAgIDIuIEEgc3RyaW5nIGtleSB3YXMgc3BlY2lmaWVkLCBidXQgbm8gdmFsdWUgcHJvdmlkZWRcblx0XHQvL1xuXHRcdC8vIFRha2UgdGhlIFwicmVhZFwiIHBhdGggYW5kIGFsbG93IHRoZSBnZXQgbWV0aG9kIHRvIGRldGVybWluZVxuXHRcdC8vIHdoaWNoIHZhbHVlIHRvIHJldHVybiwgcmVzcGVjdGl2ZWx5IGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gVGhlIGVudGlyZSBjYWNoZSBvYmplY3Rcblx0XHQvLyAgIDIuIFRoZSBkYXRhIHN0b3JlZCBhdCB0aGUga2V5XG5cdFx0Ly9cblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdCggKCBrZXkgJiYgdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiApICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSApIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0KCBvd25lciwga2V5ICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2hlbiB0aGUga2V5IGlzIG5vdCBhIHN0cmluZywgb3IgYm90aCBhIGtleSBhbmQgdmFsdWVcblx0XHQvLyBhcmUgc3BlY2lmaWVkLCBzZXQgb3IgZXh0ZW5kIChleGlzdGluZyBvYmplY3RzKSB3aXRoIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gQW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcblx0XHQvLyAgIDIuIEEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vXG5cdFx0dGhpcy5zZXQoIG93bmVyLCBrZXksIHZhbHVlICk7XG5cblx0XHQvLyBTaW5jZSB0aGUgXCJzZXRcIiBwYXRoIGNhbiBoYXZlIHR3byBwb3NzaWJsZSBlbnRyeSBwb2ludHNcblx0XHQvLyByZXR1cm4gdGhlIGV4cGVjdGVkIGRhdGEgYmFzZWQgb24gd2hpY2ggcGF0aCB3YXMgdGFrZW5bKl1cblx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoga2V5O1xuXHR9LFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHZhciBpLFxuXHRcdFx0Y2FjaGUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHRpZiAoIGNhY2hlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSgga2V5ICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYga2V5IGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0Ly8gV2UgYWx3YXlzIHNldCBjYW1lbENhc2Uga2V5cywgc28gcmVtb3ZlIHRoYXQuXG5cdFx0XHRcdGtleSA9IGtleS5tYXAoIGNhbWVsQ2FzZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0a2V5ID0gY2FtZWxDYXNlKCBrZXkgKTtcblxuXHRcdFx0XHQvLyBJZiBhIGtleSB3aXRoIHRoZSBzcGFjZXMgZXhpc3RzLCB1c2UgaXQuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdGtleSA9IGtleSBpbiBjYWNoZSA/XG5cdFx0XHRcdFx0WyBrZXkgXSA6XG5cdFx0XHRcdFx0KCBrZXkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpID0ga2V5Lmxlbmd0aDtcblxuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5WyBpIF0gXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgdGhlIGV4cGFuZG8gaWYgdGhlcmUncyBubyBtb3JlIGRhdGFcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApICkge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1XG5cdFx0XHQvLyBXZWJraXQgJiBCbGluayBwZXJmb3JtYW5jZSBzdWZmZXJzIHdoZW4gZGVsZXRpbmcgcHJvcGVydGllc1xuXHRcdFx0Ly8gZnJvbSBET00gbm9kZXMsIHNvIHNldCB0byB1bmRlZmluZWQgaW5zdGVhZFxuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Mzc4NjA3IChidWcgcmVzdHJpY3RlZClcblx0XHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlbGV0ZSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRoYXNEYXRhOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0dmFyIGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdHJldHVybiBjYWNoZSAhPT0gdW5kZWZpbmVkICYmICFqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKTtcblx0fVxufTtcbnZhciBkYXRhUHJpdiA9IG5ldyBEYXRhKCk7XG5cbnZhciBkYXRhVXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvW0EtWl0vZztcblxuZnVuY3Rpb24gZ2V0RGF0YSggZGF0YSApIHtcblx0aWYgKCBkYXRhID09PSBcInRydWVcIiApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGlmICggZGF0YSA9PT0gXCJmYWxzZVwiICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggZGF0YSA9PT0gXCJudWxsXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZ1xuXHRpZiAoIGRhdGEgPT09ICtkYXRhICsgXCJcIiApIHtcblx0XHRyZXR1cm4gK2RhdGE7XG5cdH1cblxuXHRpZiAoIHJicmFjZS50ZXN0KCBkYXRhICkgKSB7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKTtcblx0fVxuXG5cdHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJCZcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGdldERhdGEoIGRhdGEgKTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge31cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyXG5cdFx0XHRkYXRhVXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKTtcblx0fSxcblxuXHRkYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YVVzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YVByaXYgbWV0aG9kcywgdGhlc2UgY2FuIGJlIGRlcHJlY2F0ZWQuXG5cdF9kYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0X3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZGF0YTogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGRhdGEsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0YXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlcztcblxuXHRcdC8vIEdldHMgYWxsIHZhbHVlc1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHRoaXMubGVuZ3RoICkge1xuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtICk7XG5cblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFkYXRhUHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBUaGUgYXR0cnMgZWxlbWVudHMgY2FuIGJlIG51bGwgKCMxNDg5NClcblx0XHRcdFx0XHRcdGlmICggYXR0cnNbIGkgXSApIHtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IGF0dHJzWyBpIF0ubmFtZTtcblx0XHRcdFx0XHRcdFx0aWYgKCBuYW1lLmluZGV4T2YoIFwiZGF0YS1cIiApID09PSAwICkge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWUgPSBjYW1lbENhc2UoIG5hbWUuc2xpY2UoIDUgKSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblx0XHR9XG5cblx0XHQvLyBTZXRzIG11bHRpcGxlIHZhbHVlc1xuXHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhVXNlci5zZXQoIHRoaXMsIGtleSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHQvLyBUaGUga2V5IHdpbGwgYWx3YXlzIGJlIGNhbWVsQ2FzZWQgaW4gRGF0YVxuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIFwiZGlzY292ZXJcIiB0aGUgZGF0YSBpblxuXHRcdFx0XHQvLyBIVE1MNSBjdXN0b20gZGF0YS0qIGF0dHJzXG5cdFx0XHRcdGRhdGEgPSBkYXRhQXR0ciggZWxlbSwga2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV2UgdHJpZWQgcmVhbGx5IGhhcmQsIGJ1dCB0aGUgZGF0YSBkb2Vzbid0IGV4aXN0LlxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCB0aGUgZGF0YS4uLlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBXZSBhbHdheXMgc3RvcmUgdGhlIGNhbWVsQ2FzZWQga2V5XG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSwgbnVsbCwgdHJ1ZSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhVXNlci5yZW1vdmUoIHRoaXMsIGtleSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBxdWV1ZTtcblxuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHR5cGUgPSAoIHR5cGUgfHwgXCJmeFwiICkgKyBcInF1ZXVlXCI7XG5cdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmdldCggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHQvLyBTcGVlZCB1cCBkZXF1ZXVlIGJ5IGdldHRpbmcgb3V0IHF1aWNrbHkgaWYgdGhpcyBpcyBqdXN0IGEgbG9va3VwXG5cdFx0XHRpZiAoIGRhdGEgKSB7XG5cdFx0XHRcdGlmICggIXF1ZXVlIHx8IEFycmF5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSApICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cXVldWUucHVzaCggZGF0YSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcXVldWUgfHwgW107XG5cdFx0fVxuXHR9LFxuXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLFxuXHRcdFx0c3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCksXG5cdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLFxuXHRcdFx0bmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApO1xuXHRcdFx0fTtcblxuXHRcdC8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWxcblx0XHRpZiAoIGZuID09PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdHN0YXJ0TGVuZ3RoLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblxuXHRcdFx0Ly8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuXHRcdFx0Ly8gYXV0b21hdGljYWxseSBkZXF1ZXVlZFxuXHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgKSB7XG5cdFx0XHRcdHF1ZXVlLnVuc2hpZnQoIFwiaW5wcm9ncmVzc1wiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb25cblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0Zm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcblx0XHR9XG5cblx0XHRpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gTm90IHB1YmxpYyAtIGdlbmVyYXRlIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybiB0aGUgY3VycmVudCBvbmVcblx0X3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBrZXksIHtcblx0XHRcdGVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKS5hZGQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArIFwicXVldWVcIiwga2V5IF0gKTtcblx0XHRcdH0gKVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgc2V0dGVyID0gMjtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRkYXRhID0gdHlwZTtcblx0XHRcdHR5cGUgPSBcImZ4XCI7XG5cdFx0XHRzZXR0ZXItLTtcblx0XHR9XG5cblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCBzZXR0ZXIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWyAwIF0sIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMgOlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbIDAgXSAhPT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHR9LFxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSApO1xuXHR9LFxuXHRjbGVhclF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdH0sXG5cblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhUHJpdi5nZXQoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuXHRcdFx0aWYgKCB0bXAgJiYgdG1wLmVtcHR5ICkge1xuXHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHR0bXAuZW1wdHkuYWRkKCByZXNvbHZlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJlc29sdmUoKTtcblx0XHRyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7XG5cdH1cbn0gKTtcbnZhciBwbnVtID0gKCAvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLyApLnNvdXJjZTtcblxudmFyIHJjc3NOdW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBwbnVtICsgXCIpKFthLXolXSopJFwiLCBcImlcIiApO1xuXG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuV2l0aGluVHJlZSA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblxuXHRcdC8vIGlzSGlkZGVuV2l0aGluVHJlZSBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uO1xuXHRcdC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuXHRcdGVsZW0gPSBlbCB8fCBlbGVtO1xuXG5cdFx0Ly8gSW5saW5lIHN0eWxlIHRydW1wcyBhbGxcblx0XHRyZXR1cm4gZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fFxuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmXG5cblx0XHRcdC8vIE90aGVyd2lzZSwgY2hlY2sgY29tcHV0ZWQgc3R5bGVcblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MyAtIDQ1XG5cdFx0XHQvLyBEaXNjb25uZWN0ZWQgZWxlbWVudHMgY2FuIGhhdmUgY29tcHV0ZWQgZGlzcGxheTogbm9uZSwgc28gZmlyc3QgY29uZmlybSB0aGF0IGVsZW0gaXNcblx0XHRcdC8vIGluIHRoZSBkb2N1bWVudC5cblx0XHRcdGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgJiZcblxuXHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSA9PT0gXCJub25lXCI7XG5cdH07XG5cbnZhciBzd2FwID0gZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrLCBhcmdzICkge1xuXHR2YXIgcmV0LCBuYW1lLFxuXHRcdG9sZCA9IHt9O1xuXG5cdC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0b2xkWyBuYW1lIF0gPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb3B0aW9uc1sgbmFtZSBdO1xuXHR9XG5cblx0cmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTtcblxuXHQvLyBSZXZlcnQgdGhlIG9sZCB2YWx1ZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9sZFsgbmFtZSBdO1xuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG5cblxuXG5cbmZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7XG5cdHZhciBhZGp1c3RlZCwgc2NhbGUsXG5cdFx0bWF4SXRlcmF0aW9ucyA9IDIwLFxuXHRcdGN1cnJlbnRWYWx1ZSA9IHR3ZWVuID9cblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uY3VyKCk7XG5cdFx0XHR9IDpcblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgcHJvcCwgXCJcIiApO1xuXHRcdFx0fSxcblx0XHRpbml0aWFsID0gY3VycmVudFZhbHVlKCksXG5cdFx0dW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXG5cdFx0Ly8gU3RhcnRpbmcgdmFsdWUgY29tcHV0YXRpb24gaXMgcmVxdWlyZWQgZm9yIHBvdGVudGlhbCB1bml0IG1pc21hdGNoZXNcblx0XHRpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICtpbml0aWFsICkgJiZcblx0XHRcdHJjc3NOdW0uZXhlYyggalF1ZXJ5LmNzcyggZWxlbSwgcHJvcCApICk7XG5cblx0aWYgKCBpbml0aWFsSW5Vbml0ICYmIGluaXRpYWxJblVuaXRbIDMgXSAhPT0gdW5pdCApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD01NFxuXHRcdC8vIEhhbHZlIHRoZSBpdGVyYXRpb24gdGFyZ2V0IHZhbHVlIHRvIHByZXZlbnQgaW50ZXJmZXJlbmNlIGZyb20gQ1NTIHVwcGVyIGJvdW5kcyAoZ2gtMjE0NClcblx0XHRpbml0aWFsID0gaW5pdGlhbCAvIDI7XG5cblx0XHQvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzXG5cdFx0dW5pdCA9IHVuaXQgfHwgaW5pdGlhbEluVW5pdFsgMyBdO1xuXG5cdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRpbml0aWFsSW5Vbml0ID0gK2luaXRpYWwgfHwgMTtcblxuXHRcdHdoaWxlICggbWF4SXRlcmF0aW9ucy0tICkge1xuXG5cdFx0XHQvLyBFdmFsdWF0ZSBhbmQgdXBkYXRlIG91ciBiZXN0IGd1ZXNzIChkb3VibGluZyBndWVzc2VzIHRoYXQgemVybyBvdXQpLlxuXHRcdFx0Ly8gRmluaXNoIGlmIHRoZSBzY2FsZSBlcXVhbHMgb3IgY3Jvc3NlcyAxIChtYWtpbmcgdGhlIG9sZCpuZXcgcHJvZHVjdCBub24tcG9zaXRpdmUpLlxuXHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBpbml0aWFsSW5Vbml0ICsgdW5pdCApO1xuXHRcdFx0aWYgKCAoIDEgLSBzY2FsZSApICogKCAxIC0gKCBzY2FsZSA9IGN1cnJlbnRWYWx1ZSgpIC8gaW5pdGlhbCB8fCAwLjUgKSApIDw9IDAgKSB7XG5cdFx0XHRcdG1heEl0ZXJhdGlvbnMgPSAwO1xuXHRcdFx0fVxuXHRcdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgLyBzY2FsZTtcblxuXHRcdH1cblxuXHRcdGluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0ICogMjtcblx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0dmFsdWVQYXJ0cyA9IHZhbHVlUGFydHMgfHwgW107XG5cdH1cblxuXHRpZiAoIHZhbHVlUGFydHMgKSB7XG5cdFx0aW5pdGlhbEluVW5pdCA9ICtpbml0aWFsSW5Vbml0IHx8ICtpbml0aWFsIHx8IDA7XG5cblx0XHQvLyBBcHBseSByZWxhdGl2ZSBvZmZzZXQgKCs9Ly09KSBpZiBzcGVjaWZpZWRcblx0XHRhZGp1c3RlZCA9IHZhbHVlUGFydHNbIDEgXSA/XG5cdFx0XHRpbml0aWFsSW5Vbml0ICsgKCB2YWx1ZVBhcnRzWyAxIF0gKyAxICkgKiB2YWx1ZVBhcnRzWyAyIF0gOlxuXHRcdFx0K3ZhbHVlUGFydHNbIDIgXTtcblx0XHRpZiAoIHR3ZWVuICkge1xuXHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHR0d2Vlbi5zdGFydCA9IGluaXRpYWxJblVuaXQ7XG5cdFx0XHR0d2Vlbi5lbmQgPSBhZGp1c3RlZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGFkanVzdGVkO1xufVxuXG5cbnZhciBkZWZhdWx0RGlzcGxheU1hcCA9IHt9O1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApIHtcblx0dmFyIHRlbXAsXG5cdFx0ZG9jID0gZWxlbS5vd25lckRvY3VtZW50LFxuXHRcdG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZSxcblx0XHRkaXNwbGF5ID0gZGVmYXVsdERpc3BsYXlNYXBbIG5vZGVOYW1lIF07XG5cblx0aWYgKCBkaXNwbGF5ICkge1xuXHRcdHJldHVybiBkaXNwbGF5O1xuXHR9XG5cblx0dGVtcCA9IGRvYy5ib2R5LmFwcGVuZENoaWxkKCBkb2MuY3JlYXRlRWxlbWVudCggbm9kZU5hbWUgKSApO1xuXHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggdGVtcCwgXCJkaXNwbGF5XCIgKTtcblxuXHR0ZW1wLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHRlbXAgKTtcblxuXHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdGRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdH1cblx0ZGVmYXVsdERpc3BsYXlNYXBbIG5vZGVOYW1lIF0gPSBkaXNwbGF5O1xuXG5cdHJldHVybiBkaXNwbGF5O1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLFxuXHRcdHZhbHVlcyA9IFtdLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cblx0Ly8gRGV0ZXJtaW5lIG5ldyBkaXNwbGF5IHZhbHVlIGZvciBlbGVtZW50cyB0aGF0IG5lZWQgdG8gY2hhbmdlXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0ZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdO1xuXHRcdGlmICggIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblxuXHRcdFx0Ly8gU2luY2Ugd2UgZm9yY2UgdmlzaWJpbGl0eSB1cG9uIGNhc2NhZGUtaGlkZGVuIGVsZW1lbnRzLCBhbiBpbW1lZGlhdGUgKGFuZCBzbG93KVxuXHRcdFx0Ly8gY2hlY2sgaXMgcmVxdWlyZWQgaW4gdGhpcyBmaXJzdCBsb29wIHVubGVzcyB3ZSBoYXZlIGEgbm9uZW1wdHkgZGlzcGxheSB2YWx1ZSAoZWl0aGVyXG5cdFx0XHQvLyBpbmxpbmUgb3IgYWJvdXQtdG8tYmUtcmVzdG9yZWQpXG5cdFx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZGlzcGxheVwiICkgfHwgbnVsbDtcblx0XHRcdFx0aWYgKCAhdmFsdWVzWyBpbmRleCBdICkge1xuXHRcdFx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuV2l0aGluVHJlZSggZWxlbSApICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBcIm5vbmVcIjtcblxuXHRcdFx0XHQvLyBSZW1lbWJlciB3aGF0IHdlJ3JlIG92ZXJ3cml0aW5nXG5cdFx0XHRcdGRhdGFQcml2LnNldCggZWxlbSwgXCJkaXNwbGF5XCIsIGRpc3BsYXkgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBTZXQgdGhlIGRpc3BsYXkgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3AgdG8gYXZvaWQgY29uc3RhbnQgcmVmbG93XG5cdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0aWYgKCB2YWx1ZXNbIGluZGV4IF0gIT0gbnVsbCApIHtcblx0XHRcdGVsZW1lbnRzWyBpbmRleCBdLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZXNbIGluZGV4IF07XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRzO1xufVxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcywgdHJ1ZSApO1xuXHR9LFxuXHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTtcblx0fSxcblx0dG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW5XaXRoaW5UcmVlKCB0aGlzICkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmhpZGUoKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cbn0gKTtcbnZhciByY2hlY2thYmxlVHlwZSA9ICggL14oPzpjaGVja2JveHxyYWRpbykkL2kgKTtcblxudmFyIHJ0YWdOYW1lID0gKCAvPChbYS16XVteXFwvXFwwPlxceDIwXFx0XFxyXFxuXFxmXSspL2kgKTtcblxudmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8Xm1vZHVsZSR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pICk7XG5cblxuXG4vLyBXZSBoYXZlIHRvIGNsb3NlIHRoZXNlIHRhZ3MgdG8gc3VwcG9ydCBYSFRNTCAoIzEzMjAwKVxudmFyIHdyYXBNYXAgPSB7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0b3B0aW9uOiBbIDEsIFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLCBcIjwvc2VsZWN0PlwiIF0sXG5cblx0Ly8gWEhUTUwgcGFyc2VycyBkbyBub3QgbWFnaWNhbGx5IGluc2VydCBlbGVtZW50cyBpbiB0aGVcblx0Ly8gc2FtZSB3YXkgdGhhdCB0YWcgc291cCBwYXJzZXJzIGRvLiBTbyB3ZSBjYW5ub3Qgc2hvcnRlblxuXHQvLyB0aGlzIGJ5IG9taXR0aW5nIDx0Ym9keT4gb3Igb3RoZXIgcmVxdWlyZWQgZWxlbWVudHMuXG5cdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0Y29sOiBbIDIsIFwiPHRhYmxlPjxjb2xncm91cD5cIiwgXCI8L2NvbGdyb3VwPjwvdGFibGU+XCIgXSxcblx0dHI6IFsgMiwgXCI8dGFibGU+PHRib2R5PlwiLCBcIjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0X2RlZmF1bHQ6IFsgMCwgXCJcIiwgXCJcIiBdXG59O1xuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xuXG53cmFwTWFwLnRib2R5ID0gd3JhcE1hcC50Zm9vdCA9IHdyYXBNYXAuY29sZ3JvdXAgPSB3cmFwTWFwLmNhcHRpb24gPSB3cmFwTWFwLnRoZWFkO1xud3JhcE1hcC50aCA9IHdyYXBNYXAudGQ7XG5cblxuZnVuY3Rpb24gZ2V0QWxsKCBjb250ZXh0LCB0YWcgKSB7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHQvLyBVc2UgdHlwZW9mIHRvIGF2b2lkIHplcm8tYXJndW1lbnQgbWV0aG9kIGludm9jYXRpb24gb24gaG9zdCBvYmplY3RzICgjMTUxNTEpXG5cdHZhciByZXQ7XG5cblx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRyZXQgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKTtcblxuXHR9IGVsc2UgaWYgKCB0eXBlb2YgY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdHJldCA9IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8IFwiKlwiICk7XG5cblx0fSBlbHNlIHtcblx0XHRyZXQgPSBbXTtcblx0fVxuXG5cdGlmICggdGFnID09PSB1bmRlZmluZWQgfHwgdGFnICYmIG5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICk7XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufVxuXG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YVByaXYuc2V0KFxuXHRcdFx0ZWxlbXNbIGkgXSxcblx0XHRcdFwiZ2xvYmFsRXZhbFwiLFxuXHRcdFx0IXJlZkVsZW1lbnRzIHx8IGRhdGFQcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuXG52YXIgcmh0bWwgPSAvPHwmIz9cXHcrOy87XG5cbmZ1bmN0aW9uIGJ1aWxkRnJhZ21lbnQoIGVsZW1zLCBjb250ZXh0LCBzY3JpcHRzLCBzZWxlY3Rpb24sIGlnbm9yZWQgKSB7XG5cdHZhciBlbGVtLCB0bXAsIHRhZywgd3JhcCwgY29udGFpbnMsIGosXG5cdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRub2RlcyA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGVsZW0gPSBlbGVtc1sgaSBdO1xuXG5cdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdC8vIEFkZCBub2RlcyBkaXJlY3RseVxuXHRcdFx0aWYgKCB0b1R5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7XG5cblx0XHRcdC8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZVxuXHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0bm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggZWxlbSApICk7XG5cblx0XHRcdC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG1wID0gdG1wIHx8IGZyYWdtZW50LmFwcGVuZENoaWxkKCBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApO1xuXG5cdFx0XHRcdC8vIERlc2VyaWFsaXplIGEgc3RhbmRhcmQgcmVwcmVzZW50YXRpb25cblx0XHRcdFx0dGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHR0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgalF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIGVsZW0gKSArIHdyYXBbIDIgXTtcblxuXHRcdFx0XHQvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcblx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdFx0dG1wID0gdG1wLmxhc3RDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIHRtcC5jaGlsZE5vZGVzICk7XG5cblx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0dG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdFx0XHQvLyBFbnN1cmUgdGhlIGNyZWF0ZWQgbm9kZXMgYXJlIG9ycGhhbmVkICgjMTIzOTIpXG5cdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuXHRmcmFnbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG5cblx0aSA9IDA7XG5cdHdoaWxlICggKCBlbGVtID0gbm9kZXNbIGkrKyBdICkgKSB7XG5cblx0XHQvLyBTa2lwIGVsZW1lbnRzIGFscmVhZHkgaW4gdGhlIGNvbnRleHQgY29sbGVjdGlvbiAodHJhYy00MDg3KVxuXHRcdGlmICggc2VsZWN0aW9uICYmIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBzZWxlY3Rpb24gKSA+IC0xICkge1xuXHRcdFx0aWYgKCBpZ25vcmVkICkge1xuXHRcdFx0XHRpZ25vcmVkLnB1c2goIGVsZW0gKTtcblx0XHRcdH1cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdC8vIEFwcGVuZCB0byBmcmFnbWVudFxuXHRcdHRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgXCJzY3JpcHRcIiApO1xuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGlmICggY29udGFpbnMgKSB7XG5cdFx0XHRzZXRHbG9iYWxFdmFsKCB0bXAgKTtcblx0XHR9XG5cblx0XHQvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG5cdFx0aWYgKCBzY3JpcHRzICkge1xuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRtcFsgaisrIF0gKSApIHtcblx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgXCJcIiApICkge1xuXHRcdFx0XHRcdHNjcmlwdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZyYWdtZW50O1xufVxuXG5cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRkaXYgPSBmcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICksXG5cdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5XG5cdC8vIENoZWNrIHN0YXRlIGxvc3QgaWYgdGhlIG5hbWUgaXMgc2V0ICgjMTEyMTcpXG5cdC8vIFN1cHBvcnQ6IFdpbmRvd3MgV2ViIEFwcHMgKFdXQSlcblx0Ly8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpXG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwicmFkaW9cIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwiY2hlY2tlZFwiLCBcImNoZWNrZWRcIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcInRcIiApO1xuXG5cdGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4xIG9ubHlcblx0Ly8gT2xkZXIgV2ViS2l0IGRvZXNuJ3QgY2xvbmUgY2hlY2tlZCBzdGF0ZSBjb3JyZWN0bHkgaW4gZnJhZ21lbnRzXG5cdHN1cHBvcnQuY2hlY2tDbG9uZSA9IGRpdi5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0gKSgpO1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuXG5cbnZhclxuXHRya2V5RXZlbnQgPSAvXmtleS8sXG5cdHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFxuXHRydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KS87XG5cbmZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuLy8gU2VlICMxMzM5MyBmb3IgbW9yZSBpbmZvXG5mdW5jdGlvbiBzYWZlQWN0aXZlRWxlbWVudCgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0fSBjYXRjaCAoIGVyciApIHsgfVxufVxuXG5mdW5jdGlvbiBvbiggZWxlbSwgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lICkge1xuXHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdC8vIFR5cGVzIGNhbiBiZSBhIG1hcCBvZiB0eXBlcy9oYW5kbGVyc1xuXHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vICggdHlwZXMtT2JqZWN0LCBzZWxlY3RvciwgZGF0YSApXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdGRhdGEgPSBkYXRhIHx8IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRvbiggZWxlbSwgdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXG5cdGlmICggZGF0YSA9PSBudWxsICYmIGZuID09IG51bGwgKSB7XG5cblx0XHQvLyAoIHR5cGVzLCBmbiApXG5cdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdH0gZWxzZSBpZiAoIGZuID09IG51bGwgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMsIHNlbGVjdG9yLCBmbiApXG5cdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vICggdHlwZXMsIGRhdGEsIGZuIClcblx0XHRcdGZuID0gZGF0YTtcblx0XHRcdGRhdGEgPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHR9IGVsc2UgaWYgKCAhZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW07XG5cdH1cblxuXHRpZiAoIG9uZSA9PT0gMSApIHtcblx0XHRvcmlnRm4gPSBmbjtcblx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRqUXVlcnkoKS5vZmYoIGV2ZW50ICk7XG5cdFx0XHRyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9O1xuXG5cdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRmbi5ndWlkID0gb3JpZ0ZuLmd1aWQgfHwgKCBvcmlnRm4uZ3VpZCA9IGpRdWVyeS5ndWlkKysgKTtcblx0fVxuXHRyZXR1cm4gZWxlbS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCB0eXBlcywgZm4sIGRhdGEsIHNlbGVjdG9yICk7XG5cdH0gKTtcbn1cblxuLypcbiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cbiAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuXG4gKi9cbmpRdWVyeS5ldmVudCA9IHtcblxuXHRnbG9iYWw6IHt9LFxuXG5cdGFkZDogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBkYXRhLCBzZWxlY3RvciApIHtcblxuXHRcdHZhciBoYW5kbGVPYmpJbiwgZXZlbnRIYW5kbGUsIHRtcCxcblx0XHRcdGV2ZW50cywgdCwgaGFuZGxlT2JqLFxuXHRcdFx0c3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLFxuXHRcdFx0ZWxlbURhdGEgPSBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdC8vIERvbid0IGF0dGFjaCBldmVudHMgdG8gbm9EYXRhIG9yIHRleHQvY29tbWVudCBub2RlcyAoYnV0IGFsbG93IHBsYWluIG9iamVjdHMpXG5cdFx0aWYgKCAhZWxlbURhdGEgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGFuIG9iamVjdCBvZiBjdXN0b20gZGF0YSBpbiBsaWV1IG9mIHRoZSBoYW5kbGVyXG5cdFx0aWYgKCBoYW5kbGVyLmhhbmRsZXIgKSB7XG5cdFx0XHRoYW5kbGVPYmpJbiA9IGhhbmRsZXI7XG5cdFx0XHRoYW5kbGVyID0gaGFuZGxlT2JqSW4uaGFuZGxlcjtcblx0XHRcdHNlbGVjdG9yID0gaGFuZGxlT2JqSW4uc2VsZWN0b3I7XG5cdFx0fVxuXG5cdFx0Ly8gRW5zdXJlIHRoYXQgaW52YWxpZCBzZWxlY3RvcnMgdGhyb3cgZXhjZXB0aW9ucyBhdCBhdHRhY2ggdGltZVxuXHRcdC8vIEV2YWx1YXRlIGFnYWluc3QgZG9jdW1lbnRFbGVtZW50IGluIGNhc2UgZWxlbSBpcyBhIG5vbi1lbGVtZW50IG5vZGUgKGUuZy4sIGRvY3VtZW50KVxuXHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGRvY3VtZW50RWxlbWVudCwgc2VsZWN0b3IgKTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0ZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG5cdFx0fVxuXHRcdGlmICggISggZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgKSApIHtcblx0XHRcdGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgP1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZWxlbSwgYXJndW1lbnRzICkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2Vcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVGhlcmUgKm11c3QqIGJlIGEgdHlwZSwgbm8gYXR0YWNoaW5nIG5hbWVzcGFjZS1vbmx5IGhhbmRsZXJzXG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgZXZlbnQgY2hhbmdlcyBpdHMgdHlwZSwgdXNlIHRoZSBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgY2hhbmdlZCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gSWYgc2VsZWN0b3IgZGVmaW5lZCwgZGV0ZXJtaW5lIHNwZWNpYWwgZXZlbnQgYXBpIHR5cGUsIG90aGVyd2lzZSBnaXZlbiB0eXBlXG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cblx0XHRcdC8vIFVwZGF0ZSBzcGVjaWFsIGJhc2VkIG9uIG5ld2x5IHJlc2V0IHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBoYW5kbGVPYmogaXMgcGFzc2VkIHRvIGFsbCBldmVudCBoYW5kbGVyc1xuXHRcdFx0aGFuZGxlT2JqID0galF1ZXJ5LmV4dGVuZCgge1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKVxuXHRcdFx0fSwgaGFuZGxlT2JqSW4gKTtcblxuXHRcdFx0Ly8gSW5pdCB0aGUgZXZlbnQgaGFuZGxlciBxdWV1ZSBpZiB3ZSdyZSB0aGUgZmlyc3Rcblx0XHRcdGlmICggISggaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSApICkge1xuXHRcdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdID0gW107XG5cdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQgPSAwO1xuXG5cdFx0XHRcdC8vIE9ubHkgdXNlIGFkZEV2ZW50TGlzdGVuZXIgaWYgdGhlIHNwZWNpYWwgZXZlbnRzIGhhbmRsZXIgcmV0dXJucyBmYWxzZVxuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnNldHVwIHx8XG5cdFx0XHRcdFx0c3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdGlmICggZWxlbS5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBldmVudEhhbmRsZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNwZWNpYWwuYWRkICkge1xuXHRcdFx0XHRzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblxuXHRcdFx0XHRpZiAoICFoYW5kbGVPYmouaGFuZGxlci5ndWlkICkge1xuXHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyLmd1aWQgPSBoYW5kbGVyLmd1aWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHRvIHRoZSBlbGVtZW50J3MgaGFuZGxlciBsaXN0LCBkZWxlZ2F0ZXMgaW4gZnJvbnRcblx0XHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLCAwLCBoYW5kbGVPYmogKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhhbmRsZXJzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBLZWVwIHRyYWNrIG9mIHdoaWNoIGV2ZW50cyBoYXZlIGV2ZXIgYmVlbiB1c2VkLCBmb3IgZXZlbnQgb3B0aW1pemF0aW9uXG5cdFx0XHRqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlO1xuXHRcdH1cblxuXHR9LFxuXG5cdC8vIERldGFjaCBhbiBldmVudCBvciBzZXQgb2YgZXZlbnRzIGZyb20gYW4gZWxlbWVudFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgc2VsZWN0b3IsIG1hcHBlZFR5cGVzICkge1xuXG5cdFx0dmFyIGosIG9yaWdDb3VudCwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdGlmICggIWVsZW1EYXRhIHx8ICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE9uY2UgZm9yIGVhY2ggdHlwZS5uYW1lc3BhY2UgaW4gdHlwZXM7IHR5cGUgbWF5IGJlIG9taXR0ZWRcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVW5iaW5kIGFsbCBldmVudHMgKG9uIHRoaXMgbmFtZXNwYWNlLCBpZiBwcm92aWRlZCkgZm9yIHRoZSBlbGVtZW50XG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICsgdHlwZXNbIHQgXSwgaGFuZGxlciwgc2VsZWN0b3IsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdO1xuXHRcdFx0dG1wID0gdG1wWyAyIF0gJiZcblx0XHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fFxuXHRcdFx0XHRcdFx0c2VsZWN0b3IgPT09IFwiKipcIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHtcblx0XHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGosIDEgKTtcblxuXHRcdFx0XHRcdGlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIHNwZWNpYWwucmVtb3ZlICkge1xuXHRcdFx0XHRcdFx0c3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBnZW5lcmljIGV2ZW50IGhhbmRsZXIgaWYgd2UgcmVtb3ZlZCBzb21ldGhpbmcgYW5kIG5vIG1vcmUgaGFuZGxlcnMgZXhpc3Rcblx0XHRcdC8vIChhdm9pZHMgcG90ZW50aWFsIGZvciBlbmRsZXNzIHJlY3Vyc2lvbiBkdXJpbmcgcmVtb3ZhbCBvZiBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzKVxuXHRcdFx0aWYgKCBvcmlnQ291bnQgJiYgIWhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0aWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fFxuXHRcdFx0XHRcdHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBlbGVtRGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlbGV0ZSBldmVudHNbIHR5cGUgXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgZGF0YSBhbmQgdGhlIGV4cGFuZG8gaWYgaXQncyBubyBsb25nZXIgdXNlZFxuXHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkge1xuXHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImhhbmRsZSBldmVudHNcIiApO1xuXHRcdH1cblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIG5hdGl2ZUV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0dmFyIGV2ZW50ID0galF1ZXJ5LmV2ZW50LmZpeCggbmF0aXZlRXZlbnQgKTtcblxuXHRcdHZhciBpLCBqLCByZXQsIG1hdGNoZWQsIGhhbmRsZU9iaiwgaGFuZGxlclF1ZXVlLFxuXHRcdFx0YXJncyA9IG5ldyBBcnJheSggYXJndW1lbnRzLmxlbmd0aCApLFxuXHRcdFx0aGFuZGxlcnMgPSAoIGRhdGFQcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWyAwIF0gPSBldmVudDtcblxuXHRcdGZvciAoIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0YXJnc1sgaSBdID0gYXJndW1lbnRzWyBpIF07XG5cdFx0fVxuXG5cdFx0ZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBoYW5kbGVyc1xuXHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuXHRcdC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoIG1hdGNoZWQgPSBoYW5kbGVyUXVldWVbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRldmVudC5jdXJyZW50VGFyZ2V0ID0gbWF0Y2hlZC5lbGVtO1xuXG5cdFx0XHRqID0gMDtcblx0XHRcdHdoaWxlICggKCBoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSApICYmXG5cdFx0XHRcdCFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXG5cdFx0XHRcdC8vIFRyaWdnZXJlZCBldmVudCBtdXN0IGVpdGhlciAxKSBoYXZlIG5vIG5hbWVzcGFjZSwgb3IgMikgaGF2ZSBuYW1lc3BhY2Uocylcblx0XHRcdFx0Ly8gYSBzdWJzZXQgb3IgZXF1YWwgdG8gdGhvc2UgaW4gdGhlIGJvdW5kIGV2ZW50IChib3RoIGNhbiBoYXZlIG5vIG5hbWVzcGFjZSkuXG5cdFx0XHRcdGlmICggIWV2ZW50LnJuYW1lc3BhY2UgfHwgZXZlbnQucm5hbWVzcGFjZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyBoYW5kbGVPYmoub3JpZ1R5cGUgXSB8fCB7fSApLmhhbmRsZSB8fFxuXHRcdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIgKS5hcHBseSggbWF0Y2hlZC5lbGVtLCBhcmdzICk7XG5cblx0XHRcdFx0XHRpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoIGV2ZW50LnJlc3VsdCA9IHJldCApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbCB0aGUgcG9zdERpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZVxuXHRcdGlmICggc3BlY2lhbC5wb3N0RGlzcGF0Y2ggKSB7XG5cdFx0XHRzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0aGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7XG5cdFx0dmFyIGksIGhhbmRsZU9iaiwgc2VsLCBtYXRjaGVkSGFuZGxlcnMsIG1hdGNoZWRTZWxlY3RvcnMsXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdGlmICggZGVsZWdhdGVDb3VudCAmJlxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTlcblx0XHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICh0cmFjLTEzMTgwKVxuXHRcdFx0Y3VyLm5vZGVUeXBlICYmXG5cblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MlxuXHRcdFx0Ly8gU3VwcHJlc3Mgc3BlYy12aW9sYXRpbmcgY2xpY2tzIGluZGljYXRpbmcgYSBub24tcHJpbWFyeSBwb2ludGVyIGJ1dHRvbiAodHJhYy0zODYxKVxuXHRcdFx0Ly8gaHR0cHM6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnQtdHlwZS1jbGlja1xuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTEgb25seVxuXHRcdFx0Ly8gLi4uYnV0IG5vdCBhcnJvdyBrZXkgXCJjbGlja3NcIiBvZiByYWRpbyBpbnB1dHMsIHdoaWNoIGNhbiBoYXZlIGBidXR0b25gIC0xIChnaC0yMzQzKVxuXHRcdFx0ISggZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiICYmIGV2ZW50LmJ1dHRvbiA+PSAxICkgKSB7XG5cblx0XHRcdGZvciAoIDsgY3VyICE9PSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkge1xuXG5cdFx0XHRcdC8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KVxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPT09IDEgJiYgISggZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiICYmIGN1ci5kaXNhYmxlZCA9PT0gdHJ1ZSApICkge1xuXHRcdFx0XHRcdG1hdGNoZWRIYW5kbGVycyA9IFtdO1xuXHRcdFx0XHRcdG1hdGNoZWRTZWxlY3RvcnMgPSB7fTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID4gLTEgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkSGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggbWF0Y2hlZEhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZWRIYW5kbGVycyB9ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVyc1xuXHRcdGN1ciA9IHRoaXM7XG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50IDwgaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogaGFuZGxlcnMuc2xpY2UoIGRlbGVnYXRlQ291bnQgKSB9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhhbmRsZXJRdWV1ZTtcblx0fSxcblxuXHRhZGRQcm9wOiBmdW5jdGlvbiggbmFtZSwgaG9vayApIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIGpRdWVyeS5FdmVudC5wcm90b3R5cGUsIG5hbWUsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cblx0XHRcdGdldDogaXNGdW5jdGlvbiggaG9vayApID9cblx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBob29rKCB0aGlzLm9yaWdpbmFsRXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gOlxuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFsgbmFtZSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblxuXHRcdFx0c2V0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcywgbmFtZSwge1xuXHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGZpeDogZnVuY3Rpb24oIG9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0cmV0dXJuIG9yaWdpbmFsRXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0b3JpZ2luYWxFdmVudCA6XG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCBvcmlnaW5hbEV2ZW50ICk7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblxuXHRcdFx0Ly8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZFxuXHRcdFx0bm9CdWJibGU6IHRydWVcblx0XHR9LFxuXHRcdGZvY3VzOiB7XG5cblx0XHRcdC8vIEZpcmUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcyAhPT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmZvY3VzICkge1xuXHRcdFx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNpblwiXG5cdFx0fSxcblx0XHRibHVyOiB7XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuYmx1ciApIHtcblx0XHRcdFx0XHR0aGlzLmJsdXIoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNvdXRcIlxuXHRcdH0sXG5cdFx0Y2xpY2s6IHtcblxuXHRcdFx0Ly8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgbm9kZU5hbWUoIHRoaXMsIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHRoaXMuY2xpY2soKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBkb24ndCBmaXJlIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rc1xuXHRcdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0cmV0dXJuIG5vZGVOYW1lKCBldmVudC50YXJnZXQsIFwiYVwiICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdGJlZm9yZXVubG9hZDoge1xuXHRcdFx0cG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCAyMCtcblx0XHRcdFx0Ly8gRmlyZWZveCBkb2Vzbid0IGFsZXJ0IGlmIHRoZSByZXR1cm5WYWx1ZSBmaWVsZCBpcyBub3Qgc2V0LlxuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZSA9IGV2ZW50LnJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblxuXHQvLyBUaGlzIFwiaWZcIiBpcyBuZWVkZWQgZm9yIHBsYWluIG9iamVjdHNcblx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUgKTtcblx0fVxufTtcblxualF1ZXJ5LkV2ZW50ID0gZnVuY3Rpb24oIHNyYywgcHJvcHMgKSB7XG5cblx0Ly8gQWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IHRoZSAnbmV3JyBrZXl3b3JkXG5cdGlmICggISggdGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCApICkge1xuXHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBFdmVudCBvYmplY3Rcblx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0dGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjO1xuXHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXG5cdFx0Ly8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcblx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdHNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9Mi4zIG9ubHlcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdFx0Ly8gQ3JlYXRlIHRhcmdldCBwcm9wZXJ0aWVzXG5cdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDw9NiAtIDcgb25seVxuXHRcdC8vIFRhcmdldCBzaG91bGQgbm90IGJlIGEgdGV4dCBub2RlICgjNTA0LCAjMTMxNDMpXG5cdFx0dGhpcy50YXJnZXQgPSAoIHNyYy50YXJnZXQgJiYgc3JjLnRhcmdldC5ub2RlVHlwZSA9PT0gMyApID9cblx0XHRcdHNyYy50YXJnZXQucGFyZW50Tm9kZSA6XG5cdFx0XHRzcmMudGFyZ2V0O1xuXG5cdFx0dGhpcy5jdXJyZW50VGFyZ2V0ID0gc3JjLmN1cnJlbnRUYXJnZXQ7XG5cdFx0dGhpcy5yZWxhdGVkVGFyZ2V0ID0gc3JjLnJlbGF0ZWRUYXJnZXQ7XG5cblx0Ly8gRXZlbnQgdHlwZVxuXHR9IGVsc2Uge1xuXHRcdHRoaXMudHlwZSA9IHNyYztcblx0fVxuXG5cdC8vIFB1dCBleHBsaWNpdGx5IHByb3ZpZGVkIHByb3BlcnRpZXMgb250byB0aGUgZXZlbnQgb2JqZWN0XG5cdGlmICggcHJvcHMgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdGhpcywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIENyZWF0ZSBhIHRpbWVzdGFtcCBpZiBpbmNvbWluZyBldmVudCBkb2Vzbid0IGhhdmUgb25lXG5cdHRoaXMudGltZVN0YW1wID0gc3JjICYmIHNyYy50aW1lU3RhbXAgfHwgRGF0ZS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAwMzAzMzEvZWNtYS1zY3JpcHQtYmluZGluZy5odG1sXG5qUXVlcnkuRXZlbnQucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LkV2ZW50LFxuXHRpc0RlZmF1bHRQcmV2ZW50ZWQ6IHJldHVybkZhbHNlLFxuXHRpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cdGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNTaW11bGF0ZWQ6IGZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXHRzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdH1cblxuXHRcdHRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH1cbn07XG5cbi8vIEluY2x1ZGVzIGFsbCBjb21tb24gZXZlbnQgcHJvcHMgaW5jbHVkaW5nIEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50IHNwZWNpZmljIHByb3BzXG5qUXVlcnkuZWFjaCgge1xuXHRhbHRLZXk6IHRydWUsXG5cdGJ1YmJsZXM6IHRydWUsXG5cdGNhbmNlbGFibGU6IHRydWUsXG5cdGNoYW5nZWRUb3VjaGVzOiB0cnVlLFxuXHRjdHJsS2V5OiB0cnVlLFxuXHRkZXRhaWw6IHRydWUsXG5cdGV2ZW50UGhhc2U6IHRydWUsXG5cdG1ldGFLZXk6IHRydWUsXG5cdHBhZ2VYOiB0cnVlLFxuXHRwYWdlWTogdHJ1ZSxcblx0c2hpZnRLZXk6IHRydWUsXG5cdHZpZXc6IHRydWUsXG5cdFwiY2hhclwiOiB0cnVlLFxuXHRjaGFyQ29kZTogdHJ1ZSxcblx0a2V5OiB0cnVlLFxuXHRrZXlDb2RlOiB0cnVlLFxuXHRidXR0b246IHRydWUsXG5cdGJ1dHRvbnM6IHRydWUsXG5cdGNsaWVudFg6IHRydWUsXG5cdGNsaWVudFk6IHRydWUsXG5cdG9mZnNldFg6IHRydWUsXG5cdG9mZnNldFk6IHRydWUsXG5cdHBvaW50ZXJJZDogdHJ1ZSxcblx0cG9pbnRlclR5cGU6IHRydWUsXG5cdHNjcmVlblg6IHRydWUsXG5cdHNjcmVlblk6IHRydWUsXG5cdHRhcmdldFRvdWNoZXM6IHRydWUsXG5cdHRvRWxlbWVudDogdHJ1ZSxcblx0dG91Y2hlczogdHJ1ZSxcblxuXHR3aGljaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBidXR0b24gPSBldmVudC5idXR0b247XG5cblx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRpZiAoIGV2ZW50LndoaWNoID09IG51bGwgJiYgcmtleUV2ZW50LnRlc3QoIGV2ZW50LnR5cGUgKSApIHtcblx0XHRcdHJldHVybiBldmVudC5jaGFyQ29kZSAhPSBudWxsID8gZXZlbnQuY2hhckNvZGUgOiBldmVudC5rZXlDb2RlO1xuXHRcdH1cblxuXHRcdC8vIEFkZCB3aGljaCBmb3IgY2xpY2s6IDEgPT09IGxlZnQ7IDIgPT09IG1pZGRsZTsgMyA9PT0gcmlnaHRcblx0XHRpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCAmJiBybW91c2VFdmVudC50ZXN0KCBldmVudC50eXBlICkgKSB7XG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDEgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDIgKSB7XG5cdFx0XHRcdHJldHVybiAzO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDQgKSB7XG5cdFx0XHRcdHJldHVybiAyO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQud2hpY2g7XG5cdH1cbn0sIGpRdWVyeS5ldmVudC5hZGRQcm9wICk7XG5cbi8vIENyZWF0ZSBtb3VzZWVudGVyL2xlYXZlIGV2ZW50cyB1c2luZyBtb3VzZW92ZXIvb3V0IGFuZCBldmVudC10aW1lIGNoZWNrc1xuLy8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS5cbi8vIERvIHRoZSBzYW1lIGZvciBwb2ludGVyZW50ZXIvcG9pbnRlcmxlYXZlIGFuZCBwb2ludGVyb3Zlci9wb2ludGVyb3V0XG4vL1xuLy8gU3VwcG9ydDogU2FmYXJpIDcgb25seVxuLy8gU2FmYXJpIHNlbmRzIG1vdXNlZW50ZXIgdG9vIG9mdGVuOyBzZWU6XG4vLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NzAyNThcbi8vIGZvciB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGJ1ZyAoaXQgZXhpc3RlZCBpbiBvbGRlciBDaHJvbWUgdmVyc2lvbnMgYXMgd2VsbCkuXG5qUXVlcnkuZWFjaCgge1xuXHRtb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLFxuXHRtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCIsXG5cdHBvaW50ZXJlbnRlcjogXCJwb2ludGVyb3ZlclwiLFxuXHRwb2ludGVybGVhdmU6IFwicG9pbnRlcm91dFwiXG59LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgb3JpZyBdID0ge1xuXHRcdGRlbGVnYXRlVHlwZTogZml4LFxuXHRcdGJpbmRUeXBlOiBmaXgsXG5cblx0XHRoYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciByZXQsXG5cdFx0XHRcdHRhcmdldCA9IHRoaXMsXG5cdFx0XHRcdHJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0LFxuXHRcdFx0XHRoYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7XG5cblx0XHRcdC8vIEZvciBtb3VzZWVudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuXG5cdFx0XHQvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuXHRcdFx0aWYgKCAhcmVsYXRlZCB8fCAoIHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSApICkge1xuXHRcdFx0XHRldmVudC50eXBlID0gaGFuZGxlT2JqLm9yaWdUeXBlO1xuXHRcdFx0XHRyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBmaXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblx0fTtcbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIDEgKTtcblx0fSxcblx0b2ZmOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBmbiApIHtcblx0XHR2YXIgaGFuZGxlT2JqLCB0eXBlO1xuXHRcdGlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkge1xuXG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID9cblx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUgKyBcIi5cIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOlxuXHRcdFx0XHRcdGhhbmRsZU9iai5vcmlnVHlwZSxcblx0XHRcdFx0aGFuZGxlT2JqLnNlbGVjdG9yLFxuXHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlclxuXHRcdFx0KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzIFssIGZuXSApXG5cdFx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdFx0Zm4gPSByZXR1cm5GYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cblxudmFyXG5cblx0LyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuXG5cdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZXNsaW50L2VzbGludC9pc3N1ZXMvMzIyOVxuXHRyeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbYS16XVteXFwvXFwwPlxceDIwXFx0XFxyXFxuXFxmXSopW14+XSopXFwvPi9naSxcblxuXHQvKiBlc2xpbnQtZW5hYmxlICovXG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMCAtIDExLCBFZGdlIDEyIC0gMTMgb25seVxuXHQvLyBJbiBJRS9FZGdlIHVzaW5nIHJlZ2V4IGdyb3VwcyBoZXJlIGNhdXNlcyBzZXZlcmUgc2xvd2Rvd25zLlxuXHQvLyBTZWUgaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy8xNzM2NTEyL1xuXHRybm9Jbm5lcmh0bWwgPSAvPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxcblxuXHQvLyBjaGVja2VkPVwiY2hlY2tlZFwiIG9yIGNoZWNrZWRcblx0cmNoZWNrZWQgPSAvY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLFxuXHRyY2xlYW5TY3JpcHQgPSAvXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2c7XG5cbi8vIFByZWZlciBhIHRib2R5IG92ZXIgaXRzIHBhcmVudCB0YWJsZSBmb3IgY29udGFpbmluZyBuZXcgcm93c1xuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRpZiAoIG5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdG5vZGVOYW1lKCBjb250ZW50Lm5vZGVUeXBlICE9PSAxMSA/IGNvbnRlbnQgOiBjb250ZW50LmZpcnN0Q2hpbGQsIFwidHJcIiApICkge1xuXG5cdFx0cmV0dXJuIGpRdWVyeSggZWxlbSApLmNoaWxkcmVuKCBcInRib2R5XCIgKVsgMCBdIHx8IGVsZW07XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKCBlbGVtLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSAhPT0gbnVsbCApICsgXCIvXCIgKyBlbGVtLnR5cGU7XG5cdHJldHVybiBlbGVtO1xufVxuZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHtcblx0aWYgKCAoIGVsZW0udHlwZSB8fCBcIlwiICkuc2xpY2UoIDAsIDUgKSA9PT0gXCJ0cnVlL1wiICkge1xuXHRcdGVsZW0udHlwZSA9IGVsZW0udHlwZS5zbGljZSggNSApO1xuXHR9IGVsc2Uge1xuXHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBcInR5cGVcIiApO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBpLCBsLCB0eXBlLCBwZGF0YU9sZCwgcGRhdGFDdXIsIHVkYXRhT2xkLCB1ZGF0YUN1ciwgZXZlbnRzO1xuXG5cdGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyAxLiBDb3B5IHByaXZhdGUgZGF0YTogZXZlbnRzLCBoYW5kbGVycywgZXRjLlxuXHRpZiAoIGRhdGFQcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YVByaXYuYWNjZXNzKCBzcmMgKTtcblx0XHRwZGF0YUN1ciA9IGRhdGFQcml2LnNldCggZGVzdCwgcGRhdGFPbGQgKTtcblx0XHRldmVudHMgPSBwZGF0YU9sZC5ldmVudHM7XG5cblx0XHRpZiAoIGV2ZW50cyApIHtcblx0XHRcdGRlbGV0ZSBwZGF0YUN1ci5oYW5kbGU7XG5cdFx0XHRwZGF0YUN1ci5ldmVudHMgPSB7fTtcblxuXHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIDIuIENvcHkgdXNlciBkYXRhXG5cdGlmICggZGF0YVVzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhVXNlci5hY2Nlc3MoIHNyYyApO1xuXHRcdHVkYXRhQ3VyID0galF1ZXJ5LmV4dGVuZCgge30sIHVkYXRhT2xkICk7XG5cblx0XHRkYXRhVXNlci5zZXQoIGRlc3QsIHVkYXRhQ3VyICk7XG5cdH1cbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxuZnVuY3Rpb24gZG9tTWFuaXAoIGNvbGxlY3Rpb24sIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICkge1xuXG5cdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHR2YXIgZnJhZ21lbnQsIGZpcnN0LCBzY3JpcHRzLCBoYXNTY3JpcHRzLCBub2RlLCBkb2MsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuXHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0dmFsdWUgPSBhcmdzWyAwIF0sXG5cdFx0dmFsdWVJc0Z1bmN0aW9uID0gaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHQvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXRcblx0aWYgKCB2YWx1ZUlzRnVuY3Rpb24gfHxcblx0XHRcdCggbCA+IDEgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdHJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdHZhciBzZWxmID0gY29sbGVjdGlvbi5lcSggaW5kZXggKTtcblx0XHRcdGlmICggdmFsdWVJc0Z1bmN0aW9uICkge1xuXHRcdFx0XHRhcmdzWyAwIF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTtcblx0XHRcdH1cblx0XHRcdGRvbU1hbmlwKCBzZWxmLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApO1xuXHRcdH0gKTtcblx0fVxuXG5cdGlmICggbCApIHtcblx0XHRmcmFnbWVudCA9IGJ1aWxkRnJhZ21lbnQoIGFyZ3MsIGNvbGxlY3Rpb25bIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgY29sbGVjdGlvbiwgaWdub3JlZCApO1xuXHRcdGZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdGlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7XG5cdFx0XHRmcmFnbWVudCA9IGZpcnN0O1xuXHRcdH1cblxuXHRcdC8vIFJlcXVpcmUgZWl0aGVyIG5ldyBjb250ZW50IG9yIGFuIGludGVyZXN0IGluIGlnbm9yZWQgZWxlbWVudHMgdG8gaW52b2tlIHRoZSBjYWxsYmFja1xuXHRcdGlmICggZmlyc3QgfHwgaWdub3JlZCApIHtcblx0XHRcdHNjcmlwdHMgPSBqUXVlcnkubWFwKCBnZXRBbGwoIGZyYWdtZW50LCBcInNjcmlwdFwiICksIGRpc2FibGVTY3JpcHQgKTtcblx0XHRcdGhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDtcblxuXHRcdFx0Ly8gVXNlIHRoZSBvcmlnaW5hbCBmcmFnbWVudCBmb3IgdGhlIGxhc3QgaXRlbVxuXHRcdFx0Ly8gaW5zdGVhZCBvZiB0aGUgZmlyc3QgYmVjYXVzZSBpdCBjYW4gZW5kIHVwXG5cdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRub2RlID0gZnJhZ21lbnQ7XG5cblx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRub2RlID0galF1ZXJ5LmNsb25lKCBub2RlLCB0cnVlLCB0cnVlICk7XG5cblx0XHRcdFx0XHQvLyBLZWVwIHJlZmVyZW5jZXMgdG8gY2xvbmVkIHNjcmlwdHMgZm9yIGxhdGVyIHJlc3RvcmF0aW9uXG5cdFx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjYWxsYmFjay5jYWxsKCBjb2xsZWN0aW9uWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRcdC8vIFJlZW5hYmxlIHNjcmlwdHNcblx0XHRcdFx0alF1ZXJ5Lm1hcCggc2NyaXB0cywgcmVzdG9yZVNjcmlwdCApO1xuXG5cdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IHNjcmlwdHNbIGkgXTtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdCFkYXRhUHJpdi5hY2Nlc3MoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiZcblx0XHRcdFx0XHRcdGpRdWVyeS5jb250YWlucyggZG9jLCBub2RlICkgKSB7XG5cblx0XHRcdFx0XHRcdGlmICggbm9kZS5zcmMgJiYgKCBub2RlLnR5cGUgfHwgXCJcIiApLnRvTG93ZXJDYXNlKCkgICE9PSBcIm1vZHVsZVwiICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5Ll9ldmFsVXJsICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0RE9NRXZhbCggbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKCByY2xlYW5TY3JpcHQsIFwiXCIgKSwgZG9jLCBub2RlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNvbGxlY3Rpb247XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSggZWxlbSwgc2VsZWN0b3IsIGtlZXBEYXRhICkge1xuXHR2YXIgbm9kZSxcblx0XHRub2RlcyA9IHNlbGVjdG9yID8galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIGVsZW0gKSA6IGVsZW0sXG5cdFx0aSA9IDA7XG5cblx0Zm9yICggOyAoIG5vZGUgPSBub2Rlc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdGlmICggIWtlZXBEYXRhICYmIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIG5vZGUgKSApO1xuXHRcdH1cblxuXHRcdGlmICggbm9kZS5wYXJlbnROb2RlICkge1xuXHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIG5vZGUub3duZXJEb2N1bWVudCwgbm9kZSApICkge1xuXHRcdFx0XHRzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0fVxuXHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0cmV0dXJuIGh0bWwucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICk7XG5cdH0sXG5cblx0Y2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHR2YXIgaSwgbCwgc3JjRWxlbWVudHMsIGRlc3RFbGVtZW50cyxcblx0XHRcdGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSxcblx0XHRcdGluUGFnZSA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cblx0XHQvLyBGaXggSUUgY2xvbmluZyBpc3N1ZXNcblx0XHRpZiAoICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICYmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmXG5cdFx0XHRcdCFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwczovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRjbGVhbkRhdGE6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblx0XHR2YXIgZGF0YSwgZWxlbSwgdHlwZSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT09IHVuZGVmaW5lZDsgaSsrICkge1xuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cdFx0XHRcdGlmICggKCBkYXRhID0gZWxlbVsgZGF0YVByaXYuZXhwYW5kbyBdICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdGZvciAoIHR5cGUgaW4gZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbFsgdHlwZSBdICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgc2hvcnRjdXQgdG8gYXZvaWQgalF1ZXJ5LmV2ZW50LnJlbW92ZSdzIG92ZXJoZWFkXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9MzUgLSA0NStcblx0XHRcdFx0XHQvLyBBc3NpZ24gdW5kZWZpbmVkIGluc3RlYWQgb2YgdXNpbmcgZGVsZXRlLCBzZWUgRGF0YSNyZW1vdmVcblx0XHRcdFx0XHRlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCBlbGVtWyBkYXRhVXNlci5leHBhbmRvIF0gKSB7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGRldGFjaDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTtcblx0fSxcblxuXHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMubmV4dFNpYmxpbmcgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG1lbW9yeSBsZWFrc1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblxuXHRcdFx0XHQvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2Rlc1xuXHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdGRhdGFBbmRFdmVudHMgPSBkYXRhQW5kRXZlbnRzID09IG51bGwgPyBmYWxzZSA6IGRhdGFBbmRFdmVudHM7XG5cdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoICggZSApIHt9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmFwcGVuZCggdmFsdWUgKTtcblx0XHRcdH1cblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9LFxuXG5cdHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaWdub3JlZCA9IFtdO1xuXG5cdFx0Ly8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggbm9uLWlnbm9yZWQgY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcblxuXHRcdFx0aWYgKCBqUXVlcnkuaW5BcnJheSggdGhpcywgaWdub3JlZCApIDwgMCApIHtcblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uXG5cdFx0fSwgaWdub3JlZCApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCB7XG5cdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuXHRpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG5cdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxufSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgZWxlbXMsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdGxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcblx0XHRcdGVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKCB0cnVlICk7XG5cdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0Ly8gLmdldCgpIGJlY2F1c2UgcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0cHVzaC5hcHBseSggcmV0LCBlbGVtcy5nZXQoKSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7XG5cdH07XG59ICk7XG52YXIgcm51bW5vbnB4ID0gbmV3IFJlZ0V4cCggXCJeKFwiICsgcG51bSArIFwiKSg/IXB4KVthLXolXSskXCIsIFwiaVwiICk7XG5cbnZhciBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seSwgRmlyZWZveCA8PTMwICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHR2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztcblxuXHRcdGlmICggIXZpZXcgfHwgIXZpZXcub3BlbmVyICkge1xuXHRcdFx0dmlldyA9IHdpbmRvdztcblx0XHR9XG5cblx0XHRyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG5cdH07XG5cbnZhciByYm94U3R5bGUgPSBuZXcgUmVnRXhwKCBjc3NFeHBhbmQuam9pbiggXCJ8XCIgKSwgXCJpXCIgKTtcblxuXG5cbiggZnVuY3Rpb24oKSB7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkge1xuXG5cdFx0Ly8gVGhpcyBpcyBhIHNpbmdsZXRvbiwgd2UgbmVlZCB0byBleGVjdXRlIGl0IG9ubHkgb25jZVxuXHRcdGlmICggIWRpdiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O1wiICtcblx0XHRcdFwibWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowXCI7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XCJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7XCIgK1xuXHRcdFx0XCJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O1wiICtcblx0XHRcdFwid2lkdGg6NjAlO3RvcDoxJVwiO1xuXHRcdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICkuYXBwZW5kQ2hpbGQoIGRpdiApO1xuXG5cdFx0dmFyIGRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiApO1xuXHRcdHBpeGVsUG9zaXRpb25WYWwgPSBkaXZTdHlsZS50b3AgIT09IFwiMSVcIjtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gNDRcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnRWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdlN0eWxlLm1hcmdpbkxlZnQgKSA9PT0gMTI7XG5cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5LCBTYWZhcmkgPD05LjEgLSAxMC4xLCBpT1MgPD03LjAgLSA5LjNcblx0XHQvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3Rcblx0XHRkaXYuc3R5bGUucmlnaHQgPSBcIjYwJVwiO1xuXHRcdHBpeGVsQm94U3R5bGVzVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS5yaWdodCApID09PSAzNjtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdFx0Ly8gRGV0ZWN0IG1pc3JlcG9ydGluZyBvZiBjb250ZW50IGRpbWVuc2lvbnMgZm9yIGJveC1zaXppbmc6Ym9yZGVyLWJveCBlbGVtZW50c1xuXHRcdGJveFNpemluZ1JlbGlhYmxlVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS53aWR0aCApID09PSAzNjtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgb25seVxuXHRcdC8vIERldGVjdCBvdmVyZmxvdzpzY3JvbGwgc2NyZXdpbmVzcyAoZ2gtMzY5OSlcblx0XHRkaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0c2Nyb2xsYm94U2l6ZVZhbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gMzYgfHwgXCJhYnNvbHV0ZVwiO1xuXG5cdFx0ZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdC8vIE51bGxpZnkgdGhlIGRpdiBzbyBpdCB3b3VsZG4ndCBiZSBzdG9yZWQgaW4gdGhlIG1lbW9yeSBhbmRcblx0XHQvLyBpdCB3aWxsIGFsc28gYmUgYSBzaWduIHRoYXQgY2hlY2tzIGFscmVhZHkgcGVyZm9ybWVkXG5cdFx0ZGl2ID0gbnVsbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHJvdW5kUGl4ZWxNZWFzdXJlcyggbWVhc3VyZSApIHtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZCggcGFyc2VGbG9hdCggbWVhc3VyZSApICk7XG5cdH1cblxuXHR2YXIgcGl4ZWxQb3NpdGlvblZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsIHNjcm9sbGJveFNpemVWYWwsIHBpeGVsQm94U3R5bGVzVmFsLFxuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdFZhbCxcblx0XHRjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG5cdFx0ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuXG5cdC8vIEZpbmlzaCBlYXJseSBpbiBsaW1pdGVkIChub24tYnJvd3NlcikgZW52aXJvbm1lbnRzXG5cdGlmICggIWRpdi5zdHlsZSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdC8vIFN0eWxlIG9mIGNsb25lZCBlbGVtZW50IGFmZmVjdHMgc291cmNlIGVsZW1lbnQgY2xvbmVkICgjODkwOClcblx0ZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJjb250ZW50LWJveFwiO1xuXHRkaXYuY2xvbmVOb2RlKCB0cnVlICkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcIlwiO1xuXHRzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSA9IGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9PT0gXCJjb250ZW50LWJveFwiO1xuXG5cdGpRdWVyeS5leHRlbmQoIHN1cHBvcnQsIHtcblx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdH0sXG5cdFx0cGl4ZWxCb3hTdHlsZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBwaXhlbEJveFN0eWxlc1ZhbDtcblx0XHR9LFxuXHRcdHBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBwaXhlbFBvc2l0aW9uVmFsO1xuXHRcdH0sXG5cdFx0cmVsaWFibGVNYXJnaW5MZWZ0OiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsO1xuXHRcdH0sXG5cdFx0c2Nyb2xsYm94U2l6ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHNjcm9sbGJveFNpemVWYWw7XG5cdFx0fVxuXHR9ICk7XG59ICkoKTtcblxuXG5mdW5jdGlvbiBjdXJDU1MoIGVsZW0sIG5hbWUsIGNvbXB1dGVkICkge1xuXHR2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LFxuXG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA1MStcblx0XHQvLyBSZXRyaWV2aW5nIHN0eWxlIGJlZm9yZSBjb21wdXRlZCBzb21laG93XG5cdFx0Ly8gZml4ZXMgYW4gaXNzdWUgd2l0aCBnZXR0aW5nIHdyb25nIHZhbHVlc1xuXHRcdC8vIG9uIGRldGFjaGVkIGVsZW1lbnRzXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBuZWVkZWQgZm9yOlxuXHQvLyAgIC5jc3MoJ2ZpbHRlcicpIChJRSA5IG9ubHksICMxMjUzNylcblx0Ly8gICAuY3NzKCctLWN1c3RvbVByb3BlcnR5KSAoIzMxNDQpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cblx0XHRpZiAoIHJldCA9PT0gXCJcIiAmJiAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHtcblx0XHRcdHJldCA9IGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSApO1xuXHRcdH1cblxuXHRcdC8vIEEgdHJpYnV0ZSB0byB0aGUgXCJhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzXCJcblx0XHQvLyBBbmRyb2lkIEJyb3dzZXIgcmV0dXJucyBwZXJjZW50YWdlIGZvciBzb21lIHZhbHVlcyxcblx0XHQvLyBidXQgd2lkdGggc2VlbXMgdG8gYmUgcmVsaWFibHkgcGl4ZWxzLlxuXHRcdC8vIFRoaXMgaXMgYWdhaW5zdCB0aGUgQ1NTT00gZHJhZnQgc3BlYzpcblx0XHQvLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3Jlc29sdmVkLXZhbHVlc1xuXHRcdGlmICggIXN1cHBvcnQucGl4ZWxCb3hTdHlsZXMoKSAmJiBybnVtbm9ucHgudGVzdCggcmV0ICkgJiYgcmJveFN0eWxlLnRlc3QoIG5hbWUgKSApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0d2lkdGggPSBzdHlsZS53aWR0aDtcblx0XHRcdG1pbldpZHRoID0gc3R5bGUubWluV2lkdGg7XG5cdFx0XHRtYXhXaWR0aCA9IHN0eWxlLm1heFdpZHRoO1xuXG5cdFx0XHQvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7XG5cdFx0XHRyZXQgPSBjb21wdXRlZC53aWR0aDtcblxuXHRcdFx0Ly8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXHRcdFx0c3R5bGUud2lkdGggPSB3aWR0aDtcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7XG5cdFx0XHRzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXQgIT09IHVuZGVmaW5lZCA/XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdFx0Ly8gSUUgcmV0dXJucyB6SW5kZXggdmFsdWUgYXMgYW4gaW50ZWdlci5cblx0XHRyZXQgKyBcIlwiIDpcblx0XHRyZXQ7XG59XG5cblxuZnVuY3Rpb24gYWRkR2V0SG9va0lmKCBjb25kaXRpb25GbiwgaG9va0ZuICkge1xuXG5cdC8vIERlZmluZSB0aGUgaG9vaywgd2UnbGwgY2hlY2sgb24gdGhlIGZpcnN0IHJ1biBpZiBpdCdzIHJlYWxseSBuZWVkZWQuXG5cdHJldHVybiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggY29uZGl0aW9uRm4oKSApIHtcblxuXHRcdFx0XHQvLyBIb29rIG5vdCBuZWVkZWQgKG9yIGl0J3Mgbm90IHBvc3NpYmxlIHRvIHVzZSBpdCBkdWVcblx0XHRcdFx0Ly8gdG8gbWlzc2luZyBkZXBlbmRlbmN5KSwgcmVtb3ZlIGl0LlxuXHRcdFx0XHRkZWxldGUgdGhpcy5nZXQ7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSG9vayBuZWVkZWQ7IHJlZGVmaW5lIGl0IHNvIHRoYXQgdGhlIHN1cHBvcnQgdGVzdCBpcyBub3QgZXhlY3V0ZWQgYWdhaW4uXG5cdFx0XHRyZXR1cm4gKCB0aGlzLmdldCA9IGhvb2tGbiApLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9XG5cdH07XG59XG5cblxudmFyXG5cblx0Ly8gU3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZVxuXHQvLyBleGNlcHQgXCJ0YWJsZVwiLCBcInRhYmxlLWNlbGxcIiwgb3IgXCJ0YWJsZS1jYXB0aW9uXCJcblx0Ly8gU2VlIGhlcmUgZm9yIGRpc3BsYXkgdmFsdWVzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5XG5cdHJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxcblx0cmN1c3RvbVByb3AgPSAvXi0tLyxcblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH0sXG5cblx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiTW96XCIsIFwibXNcIiBdLFxuXHRlbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLnN0eWxlO1xuXG4vLyBSZXR1cm4gYSBjc3MgcHJvcGVydHkgbWFwcGVkIHRvIGEgcG90ZW50aWFsbHkgdmVuZG9yIHByZWZpeGVkIHByb3BlcnR5XG5mdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHtcblxuXHQvLyBTaG9ydGN1dCBmb3IgbmFtZXMgdGhhdCBhcmUgbm90IHZlbmRvciBwcmVmaXhlZFxuXHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWyAwIF0udG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoIDEgKSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0fVxufVxuXG4vLyBSZXR1cm4gYSBwcm9wZXJ0eSBtYXBwZWQgYWxvbmcgd2hhdCBqUXVlcnkuY3NzUHJvcHMgc3VnZ2VzdHMgb3IgdG9cbi8vIGEgdmVuZG9yIHByZWZpeGVkIHByb3BlcnR5LlxuZnVuY3Rpb24gZmluYWxQcm9wTmFtZSggbmFtZSApIHtcblx0dmFyIHJldCA9IGpRdWVyeS5jc3NQcm9wc1sgbmFtZSBdO1xuXHRpZiAoICFyZXQgKSB7XG5cdFx0cmV0ID0galF1ZXJ5LmNzc1Byb3BzWyBuYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHx8IG5hbWU7XG5cdH1cblx0cmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApIHtcblxuXHQvLyBBbnkgcmVsYXRpdmUgKCsvLSkgdmFsdWVzIGhhdmUgYWxyZWFkeSBiZWVuXG5cdC8vIG5vcm1hbGl6ZWQgYXQgdGhpcyBwb2ludFxuXHR2YXIgbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKTtcblx0cmV0dXJuIG1hdGNoZXMgP1xuXG5cdFx0Ly8gR3VhcmQgYWdhaW5zdCB1bmRlZmluZWQgXCJzdWJ0cmFjdFwiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3Ncblx0XHRNYXRoLm1heCggMCwgbWF0Y2hlc1sgMiBdIC0gKCBzdWJ0cmFjdCB8fCAwICkgKSArICggbWF0Y2hlc1sgMyBdIHx8IFwicHhcIiApIDpcblx0XHR2YWx1ZTtcbn1cblxuZnVuY3Rpb24gYm94TW9kZWxBZGp1c3RtZW50KCBlbGVtLCBkaW1lbnNpb24sIGJveCwgaXNCb3JkZXJCb3gsIHN0eWxlcywgY29tcHV0ZWRWYWwgKSB7XG5cdHZhciBpID0gZGltZW5zaW9uID09PSBcIndpZHRoXCIgPyAxIDogMCxcblx0XHRleHRyYSA9IDAsXG5cdFx0ZGVsdGEgPSAwO1xuXG5cdC8vIEFkanVzdG1lbnQgbWF5IG5vdCBiZSBuZWNlc3Nhcnlcblx0aWYgKCBib3ggPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSApIHtcblx0XHRyZXR1cm4gMDtcblx0fVxuXG5cdGZvciAoIDsgaSA8IDQ7IGkgKz0gMiApIHtcblxuXHRcdC8vIEJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpblxuXHRcdGlmICggYm94ID09PSBcIm1hcmdpblwiICkge1xuXHRcdFx0ZGVsdGEgKz0galF1ZXJ5LmNzcyggZWxlbSwgYm94ICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdC8vIElmIHdlIGdldCBoZXJlIHdpdGggYSBjb250ZW50LWJveCwgd2UncmUgc2Vla2luZyBcInBhZGRpbmdcIiBvciBcImJvcmRlclwiIG9yIFwibWFyZ2luXCJcblx0XHRpZiAoICFpc0JvcmRlckJveCApIHtcblxuXHRcdFx0Ly8gQWRkIHBhZGRpbmdcblx0XHRcdGRlbHRhICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBGb3IgXCJib3JkZXJcIiBvciBcIm1hcmdpblwiLCBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGJveCAhPT0gXCJwYWRkaW5nXCIgKSB7XG5cdFx0XHRcdGRlbHRhICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cblx0XHRcdC8vIEJ1dCBzdGlsbCBrZWVwIHRyYWNrIG9mIGl0IG90aGVyd2lzZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZXh0cmEgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdC8vIElmIHdlIGdldCBoZXJlIHdpdGggYSBib3JkZXItYm94IChjb250ZW50ICsgcGFkZGluZyArIGJvcmRlciksIHdlJ3JlIHNlZWtpbmcgXCJjb250ZW50XCIgb3Jcblx0XHQvLyBcInBhZGRpbmdcIiBvciBcIm1hcmdpblwiXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gRm9yIFwiY29udGVudFwiLCBzdWJ0cmFjdCBwYWRkaW5nXG5cdFx0XHRpZiAoIGJveCA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdGRlbHRhIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3IgXCJjb250ZW50XCIgb3IgXCJwYWRkaW5nXCIsIHN1YnRyYWN0IGJvcmRlclxuXHRcdFx0aWYgKCBib3ggIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdGRlbHRhIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWNjb3VudCBmb3IgcG9zaXRpdmUgY29udGVudC1ib3ggc2Nyb2xsIGd1dHRlciB3aGVuIHJlcXVlc3RlZCBieSBwcm92aWRpbmcgY29tcHV0ZWRWYWxcblx0aWYgKCAhaXNCb3JkZXJCb3ggJiYgY29tcHV0ZWRWYWwgPj0gMCApIHtcblxuXHRcdC8vIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBpcyBhIHJvdW5kZWQgc3VtIG9mIGNvbnRlbnQsIHBhZGRpbmcsIHNjcm9sbCBndXR0ZXIsIGFuZCBib3JkZXJcblx0XHQvLyBBc3N1bWluZyBpbnRlZ2VyIHNjcm9sbCBndXR0ZXIsIHN1YnRyYWN0IHRoZSByZXN0IGFuZCByb3VuZCBkb3duXG5cdFx0ZGVsdGEgKz0gTWF0aC5tYXgoIDAsIE1hdGguY2VpbChcblx0XHRcdGVsZW1bIFwib2Zmc2V0XCIgKyBkaW1lbnNpb25bIDAgXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKCAxICkgXSAtXG5cdFx0XHRjb21wdXRlZFZhbCAtXG5cdFx0XHRkZWx0YSAtXG5cdFx0XHRleHRyYSAtXG5cdFx0XHQwLjVcblx0XHQpICk7XG5cdH1cblxuXHRyZXR1cm4gZGVsdGE7XG59XG5cbmZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIGRpbWVuc2lvbiwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBjb21wdXRlZCBzdHlsZVxuXHR2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksXG5cdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBkaW1lbnNpb24sIHN0eWxlcyApLFxuXHRcdGlzQm9yZGVyQm94ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3g7XG5cblx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTU0XG5cdC8vIFJldHVybiBhIGNvbmZvdW5kaW5nIG5vbi1waXhlbCB2YWx1ZSBvciBmZWlnbiBpZ25vcmFuY2UsIGFzIGFwcHJvcHJpYXRlLlxuXHRpZiAoIHJudW1ub25weC50ZXN0KCB2YWwgKSApIHtcblx0XHRpZiAoICFleHRyYSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXHRcdHZhbCA9IFwiYXV0b1wiO1xuXHR9XG5cblx0Ly8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcblx0Ly8gZm9yIGdldENvbXB1dGVkU3R5bGUgc2lsZW50bHkgZmFsbHMgYmFjayB0byB0aGUgcmVsaWFibGUgZWxlbS5zdHlsZVxuXHR2YWx1ZUlzQm9yZGVyQm94ID0gdmFsdWVJc0JvcmRlckJveCAmJlxuXHRcdCggc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IHZhbCA9PT0gZWxlbS5zdHlsZVsgZGltZW5zaW9uIF0gKTtcblxuXHQvLyBGYWxsIGJhY2sgdG8gb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IHdoZW4gdmFsdWUgaXMgXCJhdXRvXCJcblx0Ly8gVGhpcyBoYXBwZW5zIGZvciBpbmxpbmUgZWxlbWVudHMgd2l0aCBubyBleHBsaWNpdCBzZXR0aW5nIChnaC0zNTcxKVxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4xIC0gNC4zIG9ubHlcblx0Ly8gQWxzbyB1c2Ugb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IGZvciBtaXNyZXBvcnRlZCBpbmxpbmUgZGltZW5zaW9ucyAoZ2gtMzYwMilcblx0aWYgKCB2YWwgPT09IFwiYXV0b1wiIHx8XG5cdFx0IXBhcnNlRmxvYXQoIHZhbCApICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiaW5saW5lXCIgKSB7XG5cblx0XHR2YWwgPSBlbGVtWyBcIm9mZnNldFwiICsgZGltZW5zaW9uWyAwIF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSggMSApIF07XG5cblx0XHQvLyBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgcHJvdmlkZSBib3JkZXItYm94IHZhbHVlc1xuXHRcdHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlO1xuXHR9XG5cblx0Ly8gTm9ybWFsaXplIFwiXCIgYW5kIGF1dG9cblx0dmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDtcblxuXHQvLyBBZGp1c3QgZm9yIHRoZSBlbGVtZW50J3MgYm94IG1vZGVsXG5cdHJldHVybiAoIHZhbCArXG5cdFx0Ym94TW9kZWxBZGp1c3RtZW50KFxuXHRcdFx0ZWxlbSxcblx0XHRcdGRpbWVuc2lvbixcblx0XHRcdGV4dHJhIHx8ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSxcblx0XHRcdHZhbHVlSXNCb3JkZXJCb3gsXG5cdFx0XHRzdHlsZXMsXG5cblx0XHRcdC8vIFByb3ZpZGUgdGhlIGN1cnJlbnQgY29tcHV0ZWQgc2l6ZSB0byByZXF1ZXN0IHNjcm9sbCBndXR0ZXIgY2FsY3VsYXRpb24gKGdoLTM1ODkpXG5cdFx0XHR2YWxcblx0XHQpXG5cdCkgKyBcInB4XCI7XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnRcIjogdHJ1ZSxcblx0XHRcImNvbHVtbkNvdW50XCI6IHRydWUsXG5cdFx0XCJmaWxsT3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwiZmxleEdyb3dcIjogdHJ1ZSxcblx0XHRcImZsZXhTaHJpbmtcIjogdHJ1ZSxcblx0XHRcImZvbnRXZWlnaHRcIjogdHJ1ZSxcblx0XHRcImxpbmVIZWlnaHRcIjogdHJ1ZSxcblx0XHRcIm9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcIm9yZGVyXCI6IHRydWUsXG5cdFx0XCJvcnBoYW5zXCI6IHRydWUsXG5cdFx0XCJ3aWRvd3NcIjogdHJ1ZSxcblx0XHRcInpJbmRleFwiOiB0cnVlLFxuXHRcdFwiem9vbVwiOiB0cnVlXG5cdH0sXG5cblx0Ly8gQWRkIGluIHByb3BlcnRpZXMgd2hvc2UgbmFtZXMgeW91IHdpc2ggdG8gZml4IGJlZm9yZVxuXHQvLyBzZXR0aW5nIG9yIGdldHRpbmcgdGhlIHZhbHVlXG5cdGNzc1Byb3BzOiB7fSxcblxuXHQvLyBHZXQgYW5kIHNldCB0aGUgc3R5bGUgcHJvcGVydHkgb24gYSBET00gTm9kZVxuXHRzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHtcblxuXHRcdC8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdGlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuXHRcdHZhciByZXQsIHR5cGUsIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBjYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdGlzQ3VzdG9tUHJvcCA9IHJjdXN0b21Qcm9wLnRlc3QoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZS4gV2UgZG9uJ3Rcblx0XHQvLyB3YW50IHRvIHF1ZXJ5IHRoZSB2YWx1ZSBpZiBpdCBpcyBhIENTUyBjdXN0b20gcHJvcGVydHlcblx0XHQvLyBzaW5jZSB0aGV5IGFyZSB1c2VyLWRlZmluZWQuXG5cdFx0aWYgKCAhaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0bmFtZSA9IGZpbmFsUHJvcE5hbWUoIG9yaWdOYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0cyBob29rIGZvciB0aGUgcHJlZml4ZWQgdmVyc2lvbiwgdGhlbiB1bnByZWZpeGVkIHZlcnNpb25cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIHNldHRpbmcgYSB2YWx1ZVxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cblx0XHRcdC8vIENvbnZlcnQgXCIrPVwiIG9yIFwiLT1cIiB0byByZWxhdGl2ZSBudW1iZXJzICgjNzM0NSlcblx0XHRcdGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiAmJiAoIHJldCA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmIHJldFsgMSBdICkge1xuXHRcdFx0XHR2YWx1ZSA9IGFkanVzdENTUyggZWxlbSwgbmFtZSwgcmV0ICk7XG5cblx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdHR5cGUgPSBcIm51bWJlclwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQgKCM3MTE2KVxuXHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIG51bWJlciB3YXMgcGFzc2VkIGluLCBhZGQgdGhlIHVuaXQgKGV4Y2VwdCBmb3IgY2VydGFpbiBDU1MgcHJvcGVydGllcylcblx0XHRcdGlmICggdHlwZSA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0dmFsdWUgKz0gcmV0ICYmIHJldFsgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgb3JpZ05hbWUgXSA/IFwiXCIgOiBcInB4XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gYmFja2dyb3VuZC0qIHByb3BzIGFmZmVjdCBvcmlnaW5hbCBjbG9uZSdzIHZhbHVlc1xuXHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0aWYgKCAhaG9va3MgfHwgISggXCJzZXRcIiBpbiBob29rcyApIHx8XG5cdFx0XHRcdCggdmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRpZiAoIGlzQ3VzdG9tUHJvcCApIHtcblx0XHRcdFx0XHRzdHlsZS5zZXRQcm9wZXJ0eSggbmFtZSwgdmFsdWUgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBub24tY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBmYWxzZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3Rcblx0XHRcdHJldHVybiBzdHlsZVsgbmFtZSBdO1xuXHRcdH1cblx0fSxcblxuXHRjc3M6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBleHRyYSwgc3R5bGVzICkge1xuXHRcdHZhciB2YWwsIG51bSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGNhbWVsQ2FzZSggbmFtZSApLFxuXHRcdFx0aXNDdXN0b21Qcm9wID0gcmN1c3RvbVByb3AudGVzdCggbmFtZSApO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lLiBXZSBkb24ndFxuXHRcdC8vIHdhbnQgdG8gbW9kaWZ5IHRoZSB2YWx1ZSBpZiBpdCBpcyBhIENTUyBjdXN0b20gcHJvcGVydHlcblx0XHQvLyBzaW5jZSB0aGV5IGFyZSB1c2VyLWRlZmluZWQuXG5cdFx0aWYgKCAhaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0bmFtZSA9IGZpbmFsUHJvcE5hbWUoIG9yaWdOYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gVHJ5IHByZWZpeGVkIG5hbWUgZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgbmFtZVxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlLCBpZiBhIHdheSB0byBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGV4aXN0cywgdXNlIHRoYXRcblx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IFwibm9ybWFsXCIgdG8gY29tcHV0ZWQgdmFsdWVcblx0XHRpZiAoIHZhbCA9PT0gXCJub3JtYWxcIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHtcblx0XHRcdHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIE1ha2UgbnVtZXJpYyBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpY1xuXHRcdGlmICggZXh0cmEgPT09IFwiXCIgfHwgZXh0cmEgKSB7XG5cdFx0XHRudW0gPSBwYXJzZUZsb2F0KCB2YWwgKTtcblx0XHRcdHJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBpc0Zpbml0ZSggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiBdLCBmdW5jdGlvbiggaSwgZGltZW5zaW9uICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIGRpbWVuc2lvbiBdID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0Ly8gQ2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtXG5cdFx0XHRcdC8vIGJ1dCBpdCBtdXN0IGhhdmUgYSBjdXJyZW50IGRpc3BsYXkgc3R5bGUgdGhhdCB3b3VsZCBiZW5lZml0XG5cdFx0XHRcdHJldHVybiByZGlzcGxheXN3YXAudGVzdCggalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApICYmXG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCtcblx0XHRcdFx0XHQvLyBUYWJsZSBjb2x1bW5zIGluIFNhZmFyaSBoYXZlIG5vbi16ZXJvIG9mZnNldFdpZHRoICYgemVyb1xuXHRcdFx0XHRcdC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIHVubGVzcyBkaXNwbGF5IGlzIGNoYW5nZWQuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdFx0XHRcdFx0Ly8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYSBkaXNjb25uZWN0ZWQgbm9kZVxuXHRcdFx0XHRcdC8vIGluIElFIHRocm93cyBhbiBlcnJvci5cblx0XHRcdFx0XHQoICFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoIHx8ICFlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICkgP1xuXHRcdFx0XHRcdFx0c3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBkaW1lbnNpb24sIGV4dHJhICk7XG5cdFx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgZGltZW5zaW9uLCBleHRyYSApO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSB7XG5cdFx0XHR2YXIgbWF0Y2hlcyxcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksXG5cdFx0XHRcdGlzQm9yZGVyQm94ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0c3VidHJhY3QgPSBleHRyYSAmJiBib3hNb2RlbEFkanVzdG1lbnQoXG5cdFx0XHRcdFx0ZWxlbSxcblx0XHRcdFx0XHRkaW1lbnNpb24sXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0aXNCb3JkZXJCb3gsXG5cdFx0XHRcdFx0c3R5bGVzXG5cdFx0XHRcdCk7XG5cblx0XHRcdC8vIEFjY291bnQgZm9yIHVucmVsaWFibGUgYm9yZGVyLWJveCBkaW1lbnNpb25zIGJ5IGNvbXBhcmluZyBvZmZzZXQqIHRvIGNvbXB1dGVkIGFuZFxuXHRcdFx0Ly8gZmFraW5nIGEgY29udGVudC1ib3ggdG8gZ2V0IGJvcmRlciBhbmQgcGFkZGluZyAoZ2gtMzY5OSlcblx0XHRcdGlmICggaXNCb3JkZXJCb3ggJiYgc3VwcG9ydC5zY3JvbGxib3hTaXplKCkgPT09IHN0eWxlcy5wb3NpdGlvbiApIHtcblx0XHRcdFx0c3VidHJhY3QgLT0gTWF0aC5jZWlsKFxuXHRcdFx0XHRcdGVsZW1bIFwib2Zmc2V0XCIgKyBkaW1lbnNpb25bIDAgXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKCAxICkgXSAtXG5cdFx0XHRcdFx0cGFyc2VGbG9hdCggc3R5bGVzWyBkaW1lbnNpb24gXSApIC1cblx0XHRcdFx0XHRib3hNb2RlbEFkanVzdG1lbnQoIGVsZW0sIGRpbWVuc2lvbiwgXCJib3JkZXJcIiwgZmFsc2UsIHN0eWxlcyApIC1cblx0XHRcdFx0XHQwLjVcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCB0byBwaXhlbHMgaWYgdmFsdWUgYWRqdXN0bWVudCBpcyBuZWVkZWRcblx0XHRcdGlmICggc3VidHJhY3QgJiYgKCBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiZcblx0XHRcdFx0KCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgIT09IFwicHhcIiApIHtcblxuXHRcdFx0XHRlbGVtLnN0eWxlWyBkaW1lbnNpb24gXSA9IHZhbHVlO1xuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5jc3MoIGVsZW0sIGRpbWVuc2lvbiApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApO1xuXHRcdH1cblx0fTtcbn0gKTtcblxualF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LFxuXHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdHJldHVybiAoIHBhcnNlRmxvYXQoIGN1ckNTUyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIgKSApIHx8XG5cdFx0XHRcdGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtXG5cdFx0XHRcdFx0c3dhcCggZWxlbSwgeyBtYXJnaW5MZWZ0OiAwIH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcblx0XHRcdFx0XHR9IClcblx0XHRcdFx0KSArIFwicHhcIjtcblx0XHR9XG5cdH1cbik7XG5cbi8vIFRoZXNlIGhvb2tzIGFyZSB1c2VkIGJ5IGFuaW1hdGUgdG8gZXhwYW5kIHByb3BlcnRpZXNcbmpRdWVyeS5lYWNoKCB7XG5cdG1hcmdpbjogXCJcIixcblx0cGFkZGluZzogXCJcIixcblx0Ym9yZGVyOiBcIldpZHRoXCJcbn0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHtcblx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0ZXhwYW5kZWQgPSB7fSxcblxuXHRcdFx0XHQvLyBBc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcblx0XHRcdFx0cGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdCggXCIgXCIgKSA6IFsgdmFsdWUgXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgNDsgaSsrICkge1xuXHRcdFx0XHRleHBhbmRlZFsgcHJlZml4ICsgY3NzRXhwYW5kWyBpIF0gKyBzdWZmaXggXSA9XG5cdFx0XHRcdFx0cGFydHNbIGkgXSB8fCBwYXJ0c1sgaSAtIDIgXSB8fCBwYXJ0c1sgMCBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXhwYW5kZWQ7XG5cdFx0fVxuXHR9O1xuXG5cdGlmICggcHJlZml4ICE9PSBcIm1hcmdpblwiICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRjc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgc3R5bGVzLCBsZW4sXG5cdFx0XHRcdG1hcCA9IHt9LFxuXHRcdFx0XHRpID0gMDtcblxuXHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCBuYW1lICkgKSB7XG5cdFx0XHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0XHRsZW4gPSBuYW1lLmxlbmd0aDtcblxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRtYXBbIG5hbWVbIGkgXSBdID0galF1ZXJ5LmNzcyggZWxlbSwgbmFtZVsgaSBdLCBmYWxzZSwgc3R5bGVzICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbWFwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSwgdmFsdWUgKSA6XG5cdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTtcblx0XHR9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fVxufSApO1xuXG5cbmZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHtcblx0cmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTtcbn1cbmpRdWVyeS5Ud2VlbiA9IFR3ZWVuO1xuXG5Ud2Vlbi5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBUd2Vlbixcblx0aW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkge1xuXHRcdHRoaXMuZWxlbSA9IGVsZW07XG5cdFx0dGhpcy5wcm9wID0gcHJvcDtcblx0XHR0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0O1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0Ly8gVXNlIGEgcHJvcGVydHkgb24gdGhlIGVsZW1lbnQgZGlyZWN0bHkgd2hlbiBpdCBpcyBub3QgYSBET00gZWxlbWVudCxcblx0XHRcdC8vIG9yIHdoZW4gdGhlcmUgaXMgbm8gbWF0Y2hpbmcgc3R5bGUgcHJvcGVydHkgdGhhdCBleGlzdHMuXG5cdFx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgIT09IDEgfHxcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdICE9IG51bGwgJiYgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07XG5cdFx0XHR9XG5cblx0XHRcdC8vIFBhc3NpbmcgYW4gZW1wdHkgc3RyaW5nIGFzIGEgM3JkIHBhcmFtZXRlciB0byAuY3NzIHdpbGwgYXV0b21hdGljYWxseVxuXHRcdFx0Ly8gYXR0ZW1wdCBhIHBhcnNlRmxvYXQgYW5kIGZhbGxiYWNrIHRvIGEgc3RyaW5nIGlmIHRoZSBwYXJzZSBmYWlscy5cblx0XHRcdC8vIFNpbXBsZSB2YWx1ZXMgc3VjaCBhcyBcIjEwcHhcIiBhcmUgcGFyc2VkIHRvIEZsb2F0O1xuXHRcdFx0Ly8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyBcInJvdGF0ZSgxcmFkKVwiIGFyZSByZXR1cm5lZCBhcy1pcy5cblx0XHRcdHJlc3VsdCA9IGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIFwiXCIgKTtcblxuXHRcdFx0Ly8gRW1wdHkgc3RyaW5ncywgbnVsbCwgdW5kZWZpbmVkIGFuZCBcImF1dG9cIiBhcmUgY29udmVydGVkIHRvIDAuXG5cdFx0XHRyZXR1cm4gIXJlc3VsdCB8fCByZXN1bHQgPT09IFwiYXV0b1wiID8gMCA6IHJlc3VsdDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8XG5cdFx0XHRcdFx0alF1ZXJ5LmNzc0hvb2tzWyB0d2Vlbi5wcm9wIF0gKSApIHtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCB0d2Vlbi5ub3cgKyB0d2Vlbi51bml0ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuLy8gUGFuaWMgYmFzZWQgYXBwcm9hY2ggdG8gc2V0dGluZyB0aGluZ3Mgb24gZGlzY29ubmVjdGVkIG5vZGVzXG5Ud2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wID0gVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7XG5cdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZWFzaW5nID0ge1xuXHRsaW5lYXI6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiBwO1xuXHR9LFxuXHRzd2luZzogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIDAuNSAtIE1hdGguY29zKCBwICogTWF0aC5QSSApIC8gMjtcblx0fSxcblx0X2RlZmF1bHQ6IFwic3dpbmdcIlxufTtcblxualF1ZXJ5LmZ4ID0gVHdlZW4ucHJvdG90eXBlLmluaXQ7XG5cbi8vIEJhY2sgY29tcGF0IDwxLjggZXh0ZW5zaW9uIHBvaW50XG5qUXVlcnkuZnguc3RlcCA9IHt9O1xuXG5cblxuXG52YXJcblx0ZnhOb3csIGluUHJvZ3Jlc3MsXG5cdHJmeHR5cGVzID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFxuXHRycnVuID0gL3F1ZXVlSG9va3MkLztcblxuZnVuY3Rpb24gc2NoZWR1bGUoKSB7XG5cdGlmICggaW5Qcm9ncmVzcyApIHtcblx0XHRpZiAoIGRvY3VtZW50LmhpZGRlbiA9PT0gZmFsc2UgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSApIHtcblx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHNjaGVkdWxlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBzY2hlZHVsZSwgalF1ZXJ5LmZ4LmludGVydmFsICk7XG5cdFx0fVxuXG5cdFx0alF1ZXJ5LmZ4LnRpY2soKTtcblx0fVxufVxuXG4vLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5XG5mdW5jdGlvbiBjcmVhdGVGeE5vdygpIHtcblx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9ICk7XG5cdHJldHVybiAoIGZ4Tm93ID0gRGF0ZS5ub3coKSApO1xufVxuXG4vLyBHZW5lcmF0ZSBwYXJhbWV0ZXJzIHRvIGNyZWF0ZSBhIHN0YW5kYXJkIGFuaW1hdGlvblxuZnVuY3Rpb24gZ2VuRngoIHR5cGUsIGluY2x1ZGVXaWR0aCApIHtcblx0dmFyIHdoaWNoLFxuXHRcdGkgPSAwLFxuXHRcdGF0dHJzID0geyBoZWlnaHQ6IHR5cGUgfTtcblxuXHQvLyBJZiB3ZSBpbmNsdWRlIHdpZHRoLCBzdGVwIHZhbHVlIGlzIDEgdG8gZG8gYWxsIGNzc0V4cGFuZCB2YWx1ZXMsXG5cdC8vIG90aGVyd2lzZSBzdGVwIHZhbHVlIGlzIDIgdG8gc2tpcCBvdmVyIExlZnQgYW5kIFJpZ2h0XG5cdGluY2x1ZGVXaWR0aCA9IGluY2x1ZGVXaWR0aCA/IDEgOiAwO1xuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgLSBpbmNsdWRlV2lkdGggKSB7XG5cdFx0d2hpY2ggPSBjc3NFeHBhbmRbIGkgXTtcblx0XHRhdHRyc1sgXCJtYXJnaW5cIiArIHdoaWNoIF0gPSBhdHRyc1sgXCJwYWRkaW5nXCIgKyB3aGljaCBdID0gdHlwZTtcblx0fVxuXG5cdGlmICggaW5jbHVkZVdpZHRoICkge1xuXHRcdGF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7XG5cdH1cblxuXHRyZXR1cm4gYXR0cnM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKCB2YWx1ZSwgcHJvcCwgYW5pbWF0aW9uICkge1xuXHR2YXIgdHdlZW4sXG5cdFx0Y29sbGVjdGlvbiA9ICggQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW10gKS5jb25jYXQoIEFuaW1hdGlvbi50d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICggdHdlZW4gPSBjb2xsZWN0aW9uWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgcHJvcCwgdmFsdWUgKSApICkge1xuXG5cdFx0XHQvLyBXZSdyZSBkb25lIHdpdGggdGhpcyBwcm9wZXJ0eVxuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHtcblx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIGhvb2tzLCBvbGRmaXJlLCBwcm9wVHdlZW4sIHJlc3RvcmVEaXNwbGF5LCBkaXNwbGF5LFxuXHRcdGlzQm94ID0gXCJ3aWR0aFwiIGluIHByb3BzIHx8IFwiaGVpZ2h0XCIgaW4gcHJvcHMsXG5cdFx0YW5pbSA9IHRoaXMsXG5cdFx0b3JpZyA9IHt9LFxuXHRcdHN0eWxlID0gZWxlbS5zdHlsZSxcblx0XHRoaWRkZW4gPSBlbGVtLm5vZGVUeXBlICYmIGlzSGlkZGVuV2l0aGluVHJlZSggZWxlbSApLFxuXHRcdGRhdGFTaG93ID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cblx0Ly8gUXVldWUtc2tpcHBpbmcgYW5pbWF0aW9ucyBoaWphY2sgdGhlIGZ4IGhvb2tzXG5cdGlmICggIW9wdHMucXVldWUgKSB7XG5cdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIFwiZnhcIiApO1xuXHRcdGlmICggaG9va3MudW5xdWV1ZWQgPT0gbnVsbCApIHtcblx0XHRcdGhvb2tzLnVucXVldWVkID0gMDtcblx0XHRcdG9sZGZpcmUgPSBob29rcy5lbXB0eS5maXJlO1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICFob29rcy51bnF1ZXVlZCApIHtcblx0XHRcdFx0XHRvbGRmaXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHRcdGhvb2tzLnVucXVldWVkKys7XG5cblx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIEVuc3VyZSB0aGUgY29tcGxldGUgaGFuZGxlciBpcyBjYWxsZWQgYmVmb3JlIHRoaXMgY29tcGxldGVzXG5cdFx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGhvb2tzLnVucXVldWVkLS07XG5cdFx0XHRcdGlmICggIWpRdWVyeS5xdWV1ZSggZWxlbSwgXCJmeFwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIERldGVjdCBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLnRlc3QoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIFByZXRlbmQgdG8gYmUgaGlkZGVuIGlmIHRoaXMgaXMgYSBcInNob3dcIiBhbmRcblx0XHRcdFx0Ly8gdGhlcmUgaXMgc3RpbGwgZGF0YSBmcm9tIGEgc3RvcHBlZCBzaG93L2hpZGVcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gXCJzaG93XCIgJiYgZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdGhpZGRlbiA9IHRydWU7XG5cblx0XHRcdFx0Ly8gSWdub3JlIGFsbCBvdGhlciBuby1vcCBzaG93L2hpZGUgZGF0YVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXHRcdH1cblx0fVxuXG5cdC8vIEJhaWwgb3V0IGlmIHRoaXMgaXMgYSBuby1vcCBsaWtlIC5oaWRlKCkuaGlkZSgpXG5cdHByb3BUd2VlbiA9ICFqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcHMgKTtcblx0aWYgKCAhcHJvcFR3ZWVuICYmIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gUmVzdHJpY3QgXCJvdmVyZmxvd1wiIGFuZCBcImRpc3BsYXlcIiBzdHlsZXMgZHVyaW5nIGJveCBhbmltYXRpb25zXG5cdGlmICggaXNCb3ggJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExLCBFZGdlIDEyIC0gMTVcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFIGRvZXMgbm90IGluZmVyIHRoZSBzaG9ydGhhbmRcblx0XHQvLyBmcm9tIGlkZW50aWNhbGx5LXZhbHVlZCBvdmVyZmxvd1ggYW5kIG92ZXJmbG93WSBhbmQgRWRnZSBqdXN0IG1pcnJvcnNcblx0XHQvLyB0aGUgb3ZlcmZsb3dYIHZhbHVlIHRoZXJlLlxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gSWRlbnRpZnkgYSBkaXNwbGF5IHR5cGUsIHByZWZlcnJpbmcgb2xkIHNob3cvaGlkZSBkYXRhIG92ZXIgdGhlIENTUyBjYXNjYWRlXG5cdFx0cmVzdG9yZURpc3BsYXkgPSBkYXRhU2hvdyAmJiBkYXRhU2hvdy5kaXNwbGF5O1xuXHRcdGlmICggcmVzdG9yZURpc3BsYXkgPT0gbnVsbCApIHtcblx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXHRcdH1cblx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0aWYgKCByZXN0b3JlRGlzcGxheSApIHtcblx0XHRcdFx0ZGlzcGxheSA9IHJlc3RvcmVEaXNwbGF5O1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBHZXQgbm9uZW1wdHkgdmFsdWUocykgYnkgdGVtcG9yYXJpbHkgZm9yY2luZyB2aXNpYmlsaXR5XG5cdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSwgdHJ1ZSApO1xuXHRcdFx0XHRyZXN0b3JlRGlzcGxheSA9IGVsZW0uc3R5bGUuZGlzcGxheSB8fCByZXN0b3JlRGlzcGxheTtcblx0XHRcdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFuaW1hdGUgaW5saW5lIGVsZW1lbnRzIGFzIGlubGluZS1ibG9ja1xuXHRcdGlmICggZGlzcGxheSA9PT0gXCJpbmxpbmVcIiB8fCBkaXNwbGF5ID09PSBcImlubGluZS1ibG9ja1wiICYmIHJlc3RvcmVEaXNwbGF5ICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZmxvYXRcIiApID09PSBcIm5vbmVcIiApIHtcblxuXHRcdFx0XHQvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlIGF0IHRoZSBlbmQgb2YgcHVyZSBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRcdFx0XHRpZiAoICFwcm9wVHdlZW4gKSB7XG5cdFx0XHRcdFx0YW5pbS5kb25lKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHN0eWxlLmRpc3BsYXkgPSByZXN0b3JlRGlzcGxheTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0aWYgKCByZXN0b3JlRGlzcGxheSA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0ZGlzcGxheSA9IHN0eWxlLmRpc3BsYXk7XG5cdFx0XHRcdFx0XHRyZXN0b3JlRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID8gXCJcIiA6IGRpc3BsYXk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmICggb3B0cy5vdmVyZmxvdyApIHtcblx0XHRzdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG5cdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gSW1wbGVtZW50IHNob3cvaGlkZSBhbmltYXRpb25zXG5cdHByb3BUd2VlbiA9IGZhbHNlO1xuXHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cblx0XHQvLyBHZW5lcmFsIHNob3cvaGlkZSBzZXR1cCBmb3IgdGhpcyBlbGVtZW50IGFuaW1hdGlvblxuXHRcdGlmICggIXByb3BUd2VlbiApIHtcblx0XHRcdGlmICggZGF0YVNob3cgKSB7XG5cdFx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSBkYXRhU2hvdy5oaWRkZW47XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRhdGFTaG93ID0gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBcImZ4c2hvd1wiLCB7IGRpc3BsYXk6IHJlc3RvcmVEaXNwbGF5IH0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RvcmUgaGlkZGVuL3Zpc2libGUgZm9yIHRvZ2dsZSBzbyBgLnN0b3AoKS50b2dnbGUoKWAgXCJyZXZlcnNlc1wiXG5cdFx0XHRpZiAoIHRvZ2dsZSApIHtcblx0XHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2hvdyBlbGVtZW50cyBiZWZvcmUgYW5pbWF0aW5nIHRoZW1cblx0XHRcdGlmICggaGlkZGVuICkge1xuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0sIHRydWUgKTtcblx0XHRcdH1cblxuXHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tbG9vcC1mdW5jICovXG5cblx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8qIGVzbGludC1lbmFibGUgbm8tbG9vcC1mdW5jICovXG5cblx0XHRcdFx0Ly8gVGhlIGZpbmFsIHN0ZXAgb2YgYSBcImhpZGVcIiBhbmltYXRpb24gaXMgYWN0dWFsbHkgaGlkaW5nIHRoZSBlbGVtZW50XG5cdFx0XHRcdGlmICggIWhpZGRlbiApIHtcblx0XHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFwiZnhzaG93XCIgKTtcblx0XHRcdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHQvLyBQZXItcHJvcGVydHkgc2V0dXBcblx0XHRwcm9wVHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblx0XHRpZiAoICEoIHByb3AgaW4gZGF0YVNob3cgKSApIHtcblx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSBwcm9wVHdlZW4uc3RhcnQ7XG5cdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0cHJvcFR3ZWVuLmVuZCA9IHByb3BUd2Vlbi5zdGFydDtcblx0XHRcdFx0cHJvcFR3ZWVuLnN0YXJ0ID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG5cdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cblx0Ly8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG5cdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdG5hbWUgPSBjYW1lbENhc2UoIGluZGV4ICk7XG5cdFx0ZWFzaW5nID0gc3BlY2lhbEVhc2luZ1sgbmFtZSBdO1xuXHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF07XG5cdFx0aWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0ZWFzaW5nID0gdmFsdWVbIDEgXTtcblx0XHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggIT09IG5hbWUgKSB7XG5cdFx0XHRwcm9wc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRkZWxldGUgcHJvcHNbIGluZGV4IF07XG5cdFx0fVxuXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcblx0XHRpZiAoIGhvb2tzICYmIFwiZXhwYW5kXCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWx1ZSA9IGhvb2tzLmV4cGFuZCggdmFsdWUgKTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXG5cdFx0XHQvLyBOb3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29uJ3Qgb3ZlcndyaXRlIGV4aXN0aW5nIGtleXMuXG5cdFx0XHQvLyBSZXVzaW5nICdpbmRleCcgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG5cdFx0XHRmb3IgKCBpbmRleCBpbiB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhKCBpbmRleCBpbiBwcm9wcyApICkge1xuXHRcdFx0XHRcdHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG5cdFx0XHRcdFx0c3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzcGVjaWFsRWFzaW5nWyBuYW1lIF0gPSBlYXNpbmc7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIEFuaW1hdGlvbiggZWxlbSwgcHJvcGVydGllcywgb3B0aW9ucyApIHtcblx0dmFyIHJlc3VsdCxcblx0XHRzdG9wcGVkLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBBbmltYXRpb24ucHJlZmlsdGVycy5sZW5ndGgsXG5cdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBEb24ndCBtYXRjaCBlbGVtIGluIHRoZSA6YW5pbWF0ZWQgc2VsZWN0b3Jcblx0XHRcdGRlbGV0ZSB0aWNrLmVsZW07XG5cdFx0fSApLFxuXHRcdHRpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdFx0cmVtYWluaW5nID0gTWF0aC5tYXgoIDAsIGFuaW1hdGlvbi5zdGFydFRpbWUgKyBhbmltYXRpb24uZHVyYXRpb24gLSBjdXJyZW50VGltZSApLFxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zIG9ubHlcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdICk7XG5cblx0XHRcdC8vIElmIHRoZXJlJ3MgbW9yZSB0byBkbywgeWllbGRcblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiB0aGlzIHdhcyBhbiBlbXB0eSBhbmltYXRpb24sIHN5bnRoZXNpemUgYSBmaW5hbCBwcm9ncmVzcyBub3RpZmljYXRpb25cblx0XHRcdGlmICggIWxlbmd0aCApIHtcblx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIDEsIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXNvbHZlIHRoZSBhbmltYXRpb24gYW5kIHJlcG9ydCBpdHMgY29uY2x1c2lvblxuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXHRcdGFuaW1hdGlvbiA9IGRlZmVycmVkLnByb21pc2UoIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRwcm9wczogalF1ZXJ5LmV4dGVuZCgge30sIHByb3BlcnRpZXMgKSxcblx0XHRcdG9wdHM6IGpRdWVyeS5leHRlbmQoIHRydWUsIHtcblx0XHRcdFx0c3BlY2lhbEVhc2luZzoge30sXG5cdFx0XHRcdGVhc2luZzogalF1ZXJ5LmVhc2luZy5fZGVmYXVsdFxuXHRcdFx0fSwgb3B0aW9ucyApLFxuXHRcdFx0b3JpZ2luYWxQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuXHRcdFx0b3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLFxuXHRcdFx0c3RhcnRUaW1lOiBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuXHRcdFx0ZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG5cdFx0XHR0d2VlbnM6IFtdLFxuXHRcdFx0Y3JlYXRlVHdlZW46IGZ1bmN0aW9uKCBwcm9wLCBlbmQgKSB7XG5cdFx0XHRcdHZhciB0d2VlbiA9IGpRdWVyeS5Ud2VlbiggZWxlbSwgYW5pbWF0aW9uLm9wdHMsIHByb3AsIGVuZCxcblx0XHRcdFx0XHRcdGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmdbIHByb3AgXSB8fCBhbmltYXRpb24ub3B0cy5lYXNpbmcgKTtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVucy5wdXNoKCB0d2VlbiApO1xuXHRcdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0XHR9LFxuXHRcdFx0c3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7XG5cdFx0XHRcdHZhciBpbmRleCA9IDAsXG5cblx0XHRcdFx0XHQvLyBJZiB3ZSBhcmUgZ29pbmcgdG8gdGhlIGVuZCwgd2Ugd2FudCB0byBydW4gYWxsIHRoZSB0d2VlbnNcblx0XHRcdFx0XHQvLyBvdGhlcndpc2Ugd2Ugc2tpcCB0aGlzIHBhcnRcblx0XHRcdFx0XHRsZW5ndGggPSBnb3RvRW5kID8gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGggOiAwO1xuXHRcdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0c3RvcHBlZCA9IHRydWU7XG5cdFx0XHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgMSwgMCBdICk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0fSApLFxuXHRcdHByb3BzID0gYW5pbWF0aW9uLnByb3BzO1xuXG5cdHByb3BGaWx0ZXIoIHByb3BzLCBhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nICk7XG5cblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRyZXN1bHQgPSBBbmltYXRpb24ucHJlZmlsdGVyc1sgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIGVsZW0sIHByb3BzLCBhbmltYXRpb24ub3B0cyApO1xuXHRcdGlmICggcmVzdWx0ICkge1xuXHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCByZXN1bHQuc3RvcCApICkge1xuXHRcdFx0XHRqUXVlcnkuX3F1ZXVlSG9va3MoIGFuaW1hdGlvbi5lbGVtLCBhbmltYXRpb24ub3B0cy5xdWV1ZSApLnN0b3AgPVxuXHRcdFx0XHRcdHJlc3VsdC5zdG9wLmJpbmQoIHJlc3VsdCApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdH1cblxuXHRqUXVlcnkubWFwKCBwcm9wcywgY3JlYXRlVHdlZW4sIGFuaW1hdGlvbiApO1xuXG5cdGlmICggaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHtcblx0XHRhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTtcblx0fVxuXG5cdC8vIEF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdGFuaW1hdGlvblxuXHRcdC5wcm9ncmVzcyggYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MgKVxuXHRcdC5kb25lKCBhbmltYXRpb24ub3B0cy5kb25lLCBhbmltYXRpb24ub3B0cy5jb21wbGV0ZSApXG5cdFx0LmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKVxuXHRcdC5hbHdheXMoIGFuaW1hdGlvbi5vcHRzLmFsd2F5cyApO1xuXG5cdGpRdWVyeS5meC50aW1lcihcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aWNrLCB7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0YW5pbTogYW5pbWF0aW9uLFxuXHRcdFx0cXVldWU6IGFuaW1hdGlvbi5vcHRzLnF1ZXVlXG5cdFx0fSApXG5cdCk7XG5cblx0cmV0dXJuIGFuaW1hdGlvbjtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXJzOiB7XG5cdFx0XCIqXCI6IFsgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuXHRcdFx0dmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKTtcblx0XHRcdGFkanVzdENTUyggdHdlZW4uZWxlbSwgcHJvcCwgcmNzc051bS5leGVjKCB2YWx1ZSApLCB0d2VlbiApO1xuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH0gXVxuXHR9LFxuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuXHRcdFx0Y2FsbGJhY2sgPSBwcm9wcztcblx0XHRcdHByb3BzID0gWyBcIipcIiBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwcm9wcyA9IHByb3BzLm1hdGNoKCBybm90aHRtbHdoaXRlICk7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0cHJvcCA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0QW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gPSBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXTtcblx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9LFxuXG5cdHByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLFxuXG5cdHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuXHRcdGlmICggcHJlcGVuZCApIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcblx0dmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuXHRcdGNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8XG5cdFx0XHRpc0Z1bmN0aW9uKCBzcGVlZCApICYmIHNwZWVkLFxuXHRcdGR1cmF0aW9uOiBzcGVlZCxcblx0XHRlYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdC8vIEdvIHRvIHRoZSBlbmQgc3RhdGUgaWYgZnggYXJlIG9mZlxuXHRpZiAoIGpRdWVyeS5meC5vZmYgKSB7XG5cdFx0b3B0LmR1cmF0aW9uID0gMDtcblxuXHR9IGVsc2Uge1xuXHRcdGlmICggdHlwZW9mIG9wdC5kdXJhdGlvbiAhPT0gXCJudW1iZXJcIiApIHtcblx0XHRcdGlmICggb3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgKSB7XG5cdFx0XHRcdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5zcGVlZHNbIG9wdC5kdXJhdGlvbiBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvcHQuZHVyYXRpb24gPSBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIE5vcm1hbGl6ZSBvcHQucXVldWUgLSB0cnVlL3VuZGVmaW5lZC9udWxsIC0+IFwiZnhcIlxuXHRpZiAoIG9wdC5xdWV1ZSA9PSBudWxsIHx8IG9wdC5xdWV1ZSA9PT0gdHJ1ZSApIHtcblx0XHRvcHQucXVldWUgPSBcImZ4XCI7XG5cdH1cblxuXHQvLyBRdWV1ZWluZ1xuXHRvcHQub2xkID0gb3B0LmNvbXBsZXRlO1xuXG5cdG9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGZhZGVUbzogZnVuY3Rpb24oIHNwZWVkLCB0bywgZWFzaW5nLCBjYWxsYmFjayApIHtcblxuXHRcdC8vIFNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMFxuXHRcdHJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW5XaXRoaW5UcmVlICkuY3NzKCBcIm9wYWNpdHlcIiwgMCApLnNob3coKVxuXG5cdFx0XHQvLyBBbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcblx0XHRcdC5lbmQoKS5hbmltYXRlKCB7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBPcGVyYXRlIG9uIGEgY29weSBvZiBwcm9wIHNvIHBlci1wcm9wZXJ0eSBlYXNpbmcgd29uJ3QgYmUgbG9zdFxuXHRcdFx0XHR2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cblx0XHRcdFx0Ly8gRW1wdHkgYW5pbWF0aW9ucywgb3IgZmluaXNoaW5nIHJlc29sdmVzIGltbWVkaWF0ZWx5XG5cdFx0XHRcdGlmICggZW1wdHkgfHwgZGF0YVByaXYuZ2V0KCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG5cdFx0XHRcdFx0YW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjtcblxuXHRcdHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cblx0XHRcdHRoaXMuZWFjaCggZG9BbmltYXRpb24gKSA6XG5cdFx0XHR0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7XG5cdH0sXG5cdHN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkge1xuXHRcdHZhciBzdG9wUXVldWUgPSBmdW5jdGlvbiggaG9va3MgKSB7XG5cdFx0XHR2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdHN0b3AoIGdvdG9FbmQgKTtcblx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuXHRcdFx0Y2xlYXJRdWV1ZSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGNsZWFyUXVldWUgJiYgdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBkZXF1ZXVlID0gdHJ1ZSxcblx0XHRcdFx0aW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArIFwicXVldWVIb29rc1wiLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICk7XG5cblx0XHRcdGlmICggaW5kZXggKSB7XG5cdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG5cdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGluZGV4IGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7XG5cdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJlxuXHRcdFx0XHRcdCggdHlwZSA9PSBudWxsIHx8IHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApICkge1xuXG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuXHRcdFx0XHRcdGRlcXVldWUgPSBmYWxzZTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWQuXG5cdFx0XHQvLyBUaW1lcnMgY3VycmVudGx5IHdpbGwgY2FsbCB0aGVpciBjb21wbGV0ZSBjYWxsYmFja3MsIHdoaWNoXG5cdFx0XHQvLyB3aWxsIGRlcXVldWUgYnV0IG9ubHkgaWYgdGhleSB3ZXJlIGdvdG9FbmQuXG5cdFx0XHRpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXHRmaW5pc2g6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdGlmICggdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICksXG5cdFx0XHRcdHF1ZXVlID0gZGF0YVsgdHlwZSArIFwicXVldWVcIiBdLFxuXHRcdFx0XHRob29rcyA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlSG9va3NcIiBdLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRsZW5ndGggPSBxdWV1ZSA/IHF1ZXVlLmxlbmd0aCA6IDA7XG5cblx0XHRcdC8vIEVuYWJsZSBmaW5pc2hpbmcgZmxhZyBvbiBwcml2YXRlIGRhdGFcblx0XHRcdGRhdGEuZmluaXNoID0gdHJ1ZTtcblxuXHRcdFx0Ly8gRW1wdHkgdGhlIHF1ZXVlIGZpcnN0XG5cdFx0XHRqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7XG5cblx0XHRcdGlmICggaG9va3MgJiYgaG9va3Muc3RvcCApIHtcblx0XHRcdFx0aG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmIHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYW5pbWF0aW9ucyBpbiB0aGUgb2xkIHF1ZXVlIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0aWYgKCBxdWV1ZVsgaW5kZXggXSAmJiBxdWV1ZVsgaW5kZXggXS5maW5pc2ggKSB7XG5cdFx0XHRcdFx0cXVldWVbIGluZGV4IF0uZmluaXNoLmNhbGwoIHRoaXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUdXJuIG9mZiBmaW5pc2hpbmcgZmxhZ1xuXHRcdFx0ZGVsZXRlIGRhdGEuZmluaXNoO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdHZhciBjc3NGbiA9IGpRdWVyeS5mblsgbmFtZSBdO1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gc3BlZWQgPT0gbnVsbCB8fCB0eXBlb2Ygc3BlZWQgPT09IFwiYm9vbGVhblwiID9cblx0XHRcdGNzc0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSA6XG5cdFx0XHR0aGlzLmFuaW1hdGUoIGdlbkZ4KCBuYW1lLCB0cnVlICksIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59ICk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKCB7XG5cdHNsaWRlRG93bjogZ2VuRngoIFwic2hvd1wiICksXG5cdHNsaWRlVXA6IGdlbkZ4KCBcImhpZGVcIiApLFxuXHRzbGlkZVRvZ2dsZTogZ2VuRngoIFwidG9nZ2xlXCIgKSxcblx0ZmFkZUluOiB7IG9wYWNpdHk6IFwic2hvd1wiIH0sXG5cdGZhZGVPdXQ6IHsgb3BhY2l0eTogXCJoaWRlXCIgfSxcblx0ZmFkZVRvZ2dsZTogeyBvcGFjaXR5OiBcInRvZ2dsZVwiIH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS50aW1lcnMgPSBbXTtcbmpRdWVyeS5meC50aWNrID0gZnVuY3Rpb24oKSB7XG5cdHZhciB0aW1lcixcblx0XHRpID0gMCxcblx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzO1xuXG5cdGZ4Tm93ID0gRGF0ZS5ub3coKTtcblxuXHRmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7XG5cdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblxuXHRcdC8vIFJ1biB0aGUgdGltZXIgYW5kIHNhZmVseSByZW1vdmUgaXQgd2hlbiBkb25lIChhbGxvd2luZyBmb3IgZXh0ZXJuYWwgcmVtb3ZhbClcblx0XHRpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcblx0XHRcdHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0b3AoKTtcblx0fVxuXHRmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0alF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuXHRqUXVlcnkuZnguc3RhcnQoKTtcbn07XG5cbmpRdWVyeS5meC5pbnRlcnZhbCA9IDEzO1xualF1ZXJ5LmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cdGlmICggaW5Qcm9ncmVzcyApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpblByb2dyZXNzID0gdHJ1ZTtcblx0c2NoZWR1bGUoKTtcbn07XG5cbmpRdWVyeS5meC5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdGluUHJvZ3Jlc3MgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcblx0c2xvdzogNjAwLFxuXHRmYXN0OiAyMDAsXG5cblx0Ly8gRGVmYXVsdCBzcGVlZFxuXHRfZGVmYXVsdDogNDAwXG59O1xuXG5cbi8vIEJhc2VkIG9mZiBvZiB0aGUgcGx1Z2luIGJ5IENsaW50IEhlbGZlcnMsIHdpdGggcGVybWlzc2lvbi5cbi8vIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDEwMDMyNDAxNDc0Ny9odHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvXG5qUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcblx0dGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcblx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG5cdFx0dmFyIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCggbmV4dCwgdGltZSApO1xuXHRcdGhvb2tzLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXQgKTtcblx0XHR9O1xuXHR9ICk7XG59O1xuXG5cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApLFxuXHRcdHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic2VsZWN0XCIgKSxcblx0XHRvcHQgPSBzZWxlY3QuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwib3B0aW9uXCIgKSApO1xuXG5cdGlucHV0LnR5cGUgPSBcImNoZWNrYm94XCI7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMyBvbmx5XG5cdC8vIERlZmF1bHQgdmFsdWUgZm9yIGEgY2hlY2tib3ggc2hvdWxkIGJlIFwib25cIlxuXHRzdXBwb3J0LmNoZWNrT24gPSBpbnB1dC52YWx1ZSAhPT0gXCJcIjtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gTXVzdCBhY2Nlc3Mgc2VsZWN0ZWRJbmRleCB0byBtYWtlIGRlZmF1bHQgb3B0aW9ucyBzZWxlY3Rcblx0c3VwcG9ydC5vcHRTZWxlY3RlZCA9IG9wdC5zZWxlY3RlZDtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gQW4gaW5wdXQgbG9zZXMgaXRzIHZhbHVlIGFmdGVyIGJlY29taW5nIGEgcmFkaW9cblx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblx0aW5wdXQudmFsdWUgPSBcInRcIjtcblx0aW5wdXQudHlwZSA9IFwicmFkaW9cIjtcblx0c3VwcG9ydC5yYWRpb1ZhbHVlID0gaW5wdXQudmFsdWUgPT09IFwidFwiO1xufSApKCk7XG5cblxudmFyIGJvb2xIb29rLFxuXHRhdHRySGFuZGxlID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRhdHRyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgalF1ZXJ5LmF0dHIsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXG5cdHJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBuYW1lICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHRhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBEb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuXHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5wcm9wKCBlbGVtLCBuYW1lLCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdC8vIEF0dHJpYnV0ZSBob29rcyBhcmUgZGV0ZXJtaW5lZCBieSB0aGUgbG93ZXJjYXNlIHZlcnNpb25cblx0XHQvLyBHcmFiIG5lY2Vzc2FyeSBob29rIGlmIG9uZSBpcyBkZWZpbmVkXG5cdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUudG9Mb3dlckNhc2UoKSBdIHx8XG5cdFx0XHRcdCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgPyBib29sSG9vayA6IHVuZGVmaW5lZCApO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggdmFsdWUgPT09IG51bGwgKSB7XG5cdFx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdCggcmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApICkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIHZhbHVlICsgXCJcIiApO1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblxuXHRcdHJldCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdC8vIE5vbi1leGlzdGVudCBhdHRyaWJ1dGVzIHJldHVybiBudWxsLCB3ZSBub3JtYWxpemUgdG8gdW5kZWZpbmVkXG5cdFx0cmV0dXJuIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xuXHR9LFxuXG5cdGF0dHJIb29rczoge1xuXHRcdHR5cGU6IHtcblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICFzdXBwb3J0LnJhZGlvVmFsdWUgJiYgdmFsdWUgPT09IFwicmFkaW9cIiAmJlxuXHRcdFx0XHRcdG5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR2YXIgdmFsID0gZWxlbS52YWx1ZTtcblx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIHZhbHVlICk7XG5cdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnZhbHVlID0gdmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdHZhciBuYW1lLFxuXHRcdFx0aSA9IDAsXG5cblx0XHRcdC8vIEF0dHJpYnV0ZSBuYW1lcyBjYW4gY29udGFpbiBub24tSFRNTCB3aGl0ZXNwYWNlIGNoYXJhY3RlcnNcblx0XHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2F0dHJpYnV0ZXMtMlxuXHRcdFx0YXR0ck5hbWVzID0gdmFsdWUgJiYgdmFsdWUubWF0Y2goIHJub3RodG1sd2hpdGUgKTtcblxuXHRcdGlmICggYXR0ck5hbWVzICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHR3aGlsZSAoICggbmFtZSA9IGF0dHJOYW1lc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlc1xuYm9vbEhvb2sgPSB7XG5cdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkge1xuXHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcblxualF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXFx3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgZ2V0dGVyID0gYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7XG5cblx0YXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciByZXQsIGhhbmRsZSxcblx0XHRcdGxvd2VyY2FzZU5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRpZiAoICFpc1hNTCApIHtcblxuXHRcdFx0Ly8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcCBieSB0ZW1wb3JhcmlseSByZW1vdmluZyB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlIGdldHRlclxuXHRcdFx0aGFuZGxlID0gYXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdO1xuXHRcdFx0YXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdID0gcmV0O1xuXHRcdFx0cmV0ID0gZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApICE9IG51bGwgP1xuXHRcdFx0XHRsb3dlcmNhc2VOYW1lIDpcblx0XHRcdFx0bnVsbDtcblx0XHRcdGF0dHJIYW5kbGVbIGxvd2VyY2FzZU5hbWUgXSA9IGhhbmRsZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcbn0gKTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkucHJvcCwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlUHJvcDogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIEZpeCBuYW1lIGFuZCBhdHRhY2ggaG9va3Ncblx0XHRcdG5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKCBlbGVtWyBuYW1lIF0gPSB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblxuXHRcdHJldHVybiBlbGVtWyBuYW1lIF07XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdFx0XHQvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGVcblx0XHRcdFx0Ly8gY29ycmVjdCB2YWx1ZSB3aGVuIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0XG5cdFx0XHRcdC8vIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE0MTExNjIzMzM0Ny9odHRwOi8vZmx1aWRwcm9qZWN0Lm9yZy9ibG9nLzIwMDgvMDEvMDkvZ2V0dGluZy1zZXR0aW5nLWFuZC1yZW1vdmluZy10YWJpbmRleC12YWx1ZXMtd2l0aC1qYXZhc2NyaXB0L1xuXHRcdFx0XHQvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKVxuXHRcdFx0XHR2YXIgdGFiaW5kZXggPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInRhYmluZGV4XCIgKTtcblxuXHRcdFx0XHRpZiAoIHRhYmluZGV4ICkge1xuXHRcdFx0XHRcdHJldHVybiBwYXJzZUludCggdGFiaW5kZXgsIDEwICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0cmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHxcblx0XHRcdFx0XHRyY2xpY2thYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSAmJlxuXHRcdFx0XHRcdGVsZW0uaHJlZlxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0cHJvcEZpeDoge1xuXHRcdFwiZm9yXCI6IFwiaHRtbEZvclwiLFxuXHRcdFwiY2xhc3NcIjogXCJjbGFzc05hbWVcIlxuXHR9XG59ICk7XG5cbi8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuLy8gQWNjZXNzaW5nIHRoZSBzZWxlY3RlZEluZGV4IHByb3BlcnR5XG4vLyBmb3JjZXMgdGhlIGJyb3dzZXIgdG8gcmVzcGVjdCBzZXR0aW5nIHNlbGVjdGVkXG4vLyBvbiB0aGUgb3B0aW9uXG4vLyBUaGUgZ2V0dGVyIGVuc3VyZXMgYSBkZWZhdWx0IG9wdGlvbiBpcyBzZWxlY3RlZFxuLy8gd2hlbiBpbiBhbiBvcHRncm91cFxuLy8gZXNsaW50IHJ1bGUgXCJuby11bnVzZWQtZXhwcmVzc2lvbnNcIiBpcyBkaXNhYmxlZCBmb3IgdGhpcyBjb2RlXG4vLyBzaW5jZSBpdCBjb25zaWRlcnMgc3VjaCBhY2Nlc3Npb25zIG5vb3BcbmlmICggIXN1cHBvcnQub3B0U2VsZWN0ZWQgKSB7XG5cdGpRdWVyeS5wcm9wSG9va3Muc2VsZWN0ZWQgPSB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0LyogZXNsaW50IG5vLXVudXNlZC1leHByZXNzaW9uczogXCJvZmZcIiAqL1xuXG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdC8qIGVzbGludCBuby11bnVzZWQtZXhwcmVzc2lvbnM6IFwib2ZmXCIgKi9cblxuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICkge1xuXHRcdFx0XHRwYXJlbnQuc2VsZWN0ZWRJbmRleDtcblxuXHRcdFx0XHRpZiAoIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKCBbXG5cdFwidGFiSW5kZXhcIixcblx0XCJyZWFkT25seVwiLFxuXHRcIm1heExlbmd0aFwiLFxuXHRcImNlbGxTcGFjaW5nXCIsXG5cdFwiY2VsbFBhZGRpbmdcIixcblx0XCJyb3dTcGFuXCIsXG5cdFwiY29sU3BhblwiLFxuXHRcInVzZU1hcFwiLFxuXHRcImZyYW1lQm9yZGVyXCIsXG5cdFwiY29udGVudEVkaXRhYmxlXCJcbl0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkucHJvcEZpeFsgdGhpcy50b0xvd2VyQ2FzZSgpIF0gPSB0aGlzO1xufSApO1xuXG5cblxuXG5cdC8vIFN0cmlwIGFuZCBjb2xsYXBzZSB3aGl0ZXNwYWNlIGFjY29yZGluZyB0byBIVE1MIHNwZWNcblx0Ly8gaHR0cHM6Ly9pbmZyYS5zcGVjLndoYXR3Zy5vcmcvI3N0cmlwLWFuZC1jb2xsYXBzZS1hc2NpaS13aGl0ZXNwYWNlXG5cdGZ1bmN0aW9uIHN0cmlwQW5kQ29sbGFwc2UoIHZhbHVlICkge1xuXHRcdHZhciB0b2tlbnMgPSB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdO1xuXHRcdHJldHVybiB0b2tlbnMuam9pbiggXCIgXCIgKTtcblx0fVxuXG5cbmZ1bmN0aW9uIGdldENsYXNzKCBlbGVtICkge1xuXHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiApIHx8IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZXNUb0FycmF5KCB2YWx1ZSApIHtcblx0aWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gdmFsdWUubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXTtcblx0fVxuXHRyZXR1cm4gW107XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRpID0gMDtcblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5hZGRDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0Y2xhc3NlcyA9IGNsYXNzZXNUb0FycmF5KCB2YWx1ZSApO1xuXG5cdFx0aWYgKCBjbGFzc2VzLmxlbmd0aCApIHtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0Y3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApO1xuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBjdXJWYWx1ZSApICsgXCIgXCIgKTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBzdHJpcEFuZENvbGxhcHNlKCBjdXIgKTtcblx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiwgZmluYWxWYWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkucmVtb3ZlQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hdHRyKCBcImNsYXNzXCIsIFwiXCIgKTtcblx0XHR9XG5cblx0XHRjbGFzc2VzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIGNsYXNzZXMubGVuZ3RoICkge1xuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cblx0XHRcdFx0Ly8gVGhpcyBleHByZXNzaW9uIGlzIGhlcmUgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSBhZGRDbGFzcylcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIFwiIFwiICsgc3RyaXBBbmRDb2xsYXBzZSggY3VyVmFsdWUgKSArIFwiIFwiICk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPiAtMSApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBzdHJpcEFuZENvbGxhcHNlKCBjdXIgKTtcblx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiwgZmluYWxWYWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkge1xuXHRcdHZhciB0eXBlID0gdHlwZW9mIHZhbHVlLFxuXHRcdFx0aXNWYWxpZFZhbHVlID0gdHlwZSA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KCB2YWx1ZSApO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGVWYWwgPT09IFwiYm9vbGVhblwiICYmIGlzVmFsaWRWYWx1ZSApIHtcblx0XHRcdHJldHVybiBzdGF0ZVZhbCA/IHRoaXMuYWRkQ2xhc3MoIHZhbHVlICkgOiB0aGlzLnJlbW92ZUNsYXNzKCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS50b2dnbGVDbGFzcyhcblx0XHRcdFx0XHR2YWx1ZS5jYWxsKCB0aGlzLCBpLCBnZXRDbGFzcyggdGhpcyApLCBzdGF0ZVZhbCApLFxuXHRcdFx0XHRcdHN0YXRlVmFsXG5cdFx0XHRcdCk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY2xhc3NOYW1lLCBpLCBzZWxmLCBjbGFzc05hbWVzO1xuXG5cdFx0XHRpZiAoIGlzVmFsaWRWYWx1ZSApIHtcblxuXHRcdFx0XHQvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuXHRcdFx0XHRpID0gMDtcblx0XHRcdFx0c2VsZiA9IGpRdWVyeSggdGhpcyApO1xuXHRcdFx0XHRjbGFzc05hbWVzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRcdFx0d2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdFx0Y2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTtcblx0XHRcdFx0aWYgKCBjbGFzc05hbWUgKSB7XG5cblx0XHRcdFx0XHQvLyBTdG9yZSBjbGFzc05hbWUgaWYgc2V0XG5cdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgY2xhc3NOYW1lICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxuXHRcdFx0XHQvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxuXHRcdFx0XHQvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxuXHRcdFx0XHQvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG5cdFx0XHRcdGlmICggdGhpcy5zZXRBdHRyaWJ1dGUgKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIixcblx0XHRcdFx0XHRcdGNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0XHRcdFx0XCJcIiA6XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiICkgfHwgXCJcIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0aGFzQ2xhc3M6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgY2xhc3NOYW1lLCBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRjbGFzc05hbWUgPSBcIiBcIiArIHNlbGVjdG9yICsgXCIgXCI7XG5cdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBnZXRDbGFzcyggZWxlbSApICkgKyBcIiBcIiApLmluZGV4T2YoIGNsYXNzTmFtZSApID4gLTEgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59ICk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHZhbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBob29rcywgcmV0LCB2YWx1ZUlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8XG5cdFx0XHRcdFx0alF1ZXJ5LnZhbEhvb2tzWyBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0XHRpZiAoIGhvb2tzICYmXG5cdFx0XHRcdFx0XCJnZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSApICE9PSB1bmRlZmluZWRcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldCA9IGVsZW0udmFsdWU7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRpZiAoIHR5cGVvZiByZXQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJldC5yZXBsYWNlKCBycmV0dXJuLCBcIlwiICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBIYW5kbGUgY2FzZXMgd2hlcmUgdmFsdWUgaXMgbnVsbC91bmRlZiBvciBudW1iZXJcblx0XHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID8gXCJcIiA6IHJldDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhbHVlSXNGdW5jdGlvbiA9IGlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdHZhciB2YWw7XG5cblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHZhbHVlSXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggQXJyYXkuaXNBcnJheSggdmFsICkgKSB7XG5cdFx0XHRcdHZhbCA9IGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIjtcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoIFwic2V0XCIgaW4gaG9va3MgKSB8fCBob29rcy5zZXQoIHRoaXMsIHZhbCwgXCJ2YWx1ZVwiICkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dGhpcy52YWx1ZSA9IHZhbDtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHR2YWxIb29rczoge1xuXHRcdG9wdGlvbjoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0XHR2YXIgdmFsID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ2YWx1ZVwiICk7XG5cdFx0XHRcdHJldHVybiB2YWwgIT0gbnVsbCA/XG5cdFx0XHRcdFx0dmFsIDpcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9MTAgLSAxMSBvbmx5XG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdC8vIFN0cmlwIGFuZCBjb2xsYXBzZSB3aGl0ZXNwYWNlXG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLXdoaXRlc3BhY2Vcblx0XHRcdFx0XHRzdHJpcEFuZENvbGxhcHNlKCBqUXVlcnkudGV4dCggZWxlbSApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLCBpLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIixcblx0XHRcdFx0XHR2YWx1ZXMgPSBvbmUgPyBudWxsIDogW10sXG5cdFx0XHRcdFx0bWF4ID0gb25lID8gaW5kZXggKyAxIDogb3B0aW9ucy5sZW5ndGg7XG5cblx0XHRcdFx0aWYgKCBpbmRleCA8IDAgKSB7XG5cdFx0XHRcdFx0aSA9IG1heDtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGkgPSBvbmUgPyBpbmRleCA6IDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5cdFx0XHRcdFx0Ly8gSUU4LTkgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpXG5cdFx0XHRcdFx0aWYgKCAoIG9wdGlvbi5zZWxlY3RlZCB8fCBpID09PSBpbmRleCApICYmXG5cblx0XHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuXHRcdFx0XHRcdFx0XHQhb3B0aW9uLmRpc2FibGVkICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8XG5cdFx0XHRcdFx0XHRcdFx0IW5vZGVOYW1lKCBvcHRpb24ucGFyZW50Tm9kZSwgXCJvcHRncm91cFwiICkgKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gR2V0IHRoZSBzcGVjaWZpYyB2YWx1ZSBmb3IgdGhlIG9wdGlvblxuXHRcdFx0XHRcdFx0dmFsdWUgPSBqUXVlcnkoIG9wdGlvbiApLnZhbCgpO1xuXG5cdFx0XHRcdFx0XHQvLyBXZSBkb24ndCBuZWVkIGFuIGFycmF5IGZvciBvbmUgc2VsZWN0c1xuXHRcdFx0XHRcdFx0aWYgKCBvbmUgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gTXVsdGktU2VsZWN0cyByZXR1cm4gYW4gYXJyYXlcblx0XHRcdFx0XHRcdHZhbHVlcy5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIG9wdGlvblNldCwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0dmFsdWVzID0galF1ZXJ5Lm1ha2VBcnJheSggdmFsdWUgKSxcblx0XHRcdFx0XHRpID0gb3B0aW9ucy5sZW5ndGg7XG5cblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXG5cdFx0XHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblxuXHRcdFx0XHRcdGlmICggb3B0aW9uLnNlbGVjdGVkID1cblx0XHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID4gLTFcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdG9wdGlvblNldCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXRcblx0XHRcdFx0aWYgKCAhb3B0aW9uU2V0ICkge1xuXHRcdFx0XHRcdGVsZW0uc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaCggWyBcInJhZGlvXCIsIFwiY2hlY2tib3hcIiBdLCBmdW5jdGlvbigpIHtcblx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0gPSB7XG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoIGVsZW0gKS52YWwoKSwgdmFsdWUgKSA+IC0xICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7XG5cdFx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBudWxsID8gXCJvblwiIDogZWxlbS52YWx1ZTtcblx0XHR9O1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIFJldHVybiBqUXVlcnkgZm9yIGF0dHJpYnV0ZXMtb25seSBpbmNsdXNpb25cblxuXG5zdXBwb3J0LmZvY3VzaW4gPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG52YXIgcmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sXG5cdHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrID0gZnVuY3Rpb24oIGUgKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0fTtcblxualF1ZXJ5LmV4dGVuZCggalF1ZXJ5LmV2ZW50LCB7XG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50LCBkYXRhLCBlbGVtLCBvbmx5SGFuZGxlcnMgKSB7XG5cblx0XHR2YXIgaSwgY3VyLCB0bXAsIGJ1YmJsZVR5cGUsIG9udHlwZSwgaGFuZGxlLCBzcGVjaWFsLCBsYXN0RWxlbWVudCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdCggXCIuXCIgKSA6IFtdO1xuXG5cdFx0Y3VyID0gbGFzdEVsZW1lbnQgPSB0bXAgPSBlbGVtID0gZWxlbSB8fCBkb2N1bWVudDtcblxuXHRcdC8vIERvbid0IGRvIGV2ZW50cyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gZm9jdXMvYmx1ciBtb3JwaHMgdG8gZm9jdXNpbi9vdXQ7IGVuc3VyZSB3ZSdyZSBub3QgZmlyaW5nIHRoZW0gcmlnaHQgbm93XG5cdFx0aWYgKCByZm9jdXNNb3JwaC50ZXN0KCB0eXBlICsgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZS5pbmRleE9mKCBcIi5cIiApID4gLTEgKSB7XG5cblx0XHRcdC8vIE5hbWVzcGFjZWQgdHJpZ2dlcjsgY3JlYXRlIGEgcmVnZXhwIHRvIG1hdGNoIGV2ZW50IHR5cGUgaW4gaGFuZGxlKClcblx0XHRcdG5hbWVzcGFjZXMgPSB0eXBlLnNwbGl0KCBcIi5cIiApO1xuXHRcdFx0dHlwZSA9IG5hbWVzcGFjZXMuc2hpZnQoKTtcblx0XHRcdG5hbWVzcGFjZXMuc29ydCgpO1xuXHRcdH1cblx0XHRvbnR5cGUgPSB0eXBlLmluZGV4T2YoIFwiOlwiICkgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKTtcblx0XHRldmVudC5ybmFtZXNwYWNlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oIFwiXFxcXC4oPzouKlxcXFwufClcIiApICsgXCIoXFxcXC58JClcIiApIDpcblx0XHRcdG51bGw7XG5cblx0XHQvLyBDbGVhbiB1cCB0aGUgZXZlbnQgaW4gY2FzZSBpdCBpcyBiZWluZyByZXVzZWRcblx0XHRldmVudC5yZXN1bHQgPSB1bmRlZmluZWQ7XG5cdFx0aWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZWxlbTtcblx0XHR9XG5cblx0XHQvLyBDbG9uZSBhbnkgaW5jb21pbmcgZGF0YSBhbmQgcHJlcGVuZCB0aGUgZXZlbnQsIGNyZWF0aW5nIHRoZSBoYW5kbGVyIGFyZyBsaXN0XG5cdFx0ZGF0YSA9IGRhdGEgPT0gbnVsbCA/XG5cdFx0XHRbIGV2ZW50IF0gOlxuXHRcdFx0alF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7XG5cblx0XHQvLyBBbGxvdyBzcGVjaWFsIGV2ZW50cyB0byBkcmF3IG91dHNpZGUgdGhlIGxpbmVzXG5cdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmIHNwZWNpYWwudHJpZ2dlciAmJiBzcGVjaWFsLnRyaWdnZXIuYXBwbHkoIGVsZW0sIGRhdGEgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpXG5cdFx0Ly8gQnViYmxlIHVwIHRvIGRvY3VtZW50LCB0aGVuIHRvIHdpbmRvdzsgd2F0Y2ggZm9yIGEgZ2xvYmFsIG93bmVyRG9jdW1lbnQgdmFyICgjOTcyNClcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdGJ1YmJsZVR5cGUgPSBzcGVjaWFsLmRlbGVnYXRlVHlwZSB8fCB0eXBlO1xuXHRcdFx0aWYgKCAhcmZvY3VzTW9ycGgudGVzdCggYnViYmxlVHlwZSArIHR5cGUgKSApIHtcblx0XHRcdFx0Y3VyID0gY3VyLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKCA7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0dG1wID0gY3VyO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPbmx5IGFkZCB3aW5kb3cgaWYgd2UgZ290IHRvIGRvY3VtZW50IChlLmcuLCBub3QgcGxhaW4gb2JqIG9yIGRldGFjaGVkIERPTSlcblx0XHRcdGlmICggdG1wID09PSAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCApICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKCBjdXIgPSBldmVudFBhdGhbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRsYXN0RWxlbWVudCA9IGN1cjtcblx0XHRcdGV2ZW50LnR5cGUgPSBpID4gMSA/XG5cdFx0XHRcdGJ1YmJsZVR5cGUgOlxuXHRcdFx0XHRzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7XG5cblx0XHRcdC8vIGpRdWVyeSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSAoIGRhdGFQcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmXG5cdFx0XHRcdGRhdGFQcml2LmdldCggY3VyLCBcImhhbmRsZVwiICk7XG5cdFx0XHRpZiAoIGhhbmRsZSApIHtcblx0XHRcdFx0aGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTmF0aXZlIGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9IG9udHlwZSAmJiBjdXJbIG9udHlwZSBdO1xuXHRcdFx0aWYgKCBoYW5kbGUgJiYgaGFuZGxlLmFwcGx5ICYmIGFjY2VwdERhdGEoIGN1ciApICkge1xuXHRcdFx0XHRldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRldmVudC50eXBlID0gdHlwZTtcblxuXHRcdC8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3dcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXG5cdFx0XHRpZiAoICggIXNwZWNpYWwuX2RlZmF1bHQgfHxcblx0XHRcdFx0c3BlY2lhbC5fZGVmYXVsdC5hcHBseSggZXZlbnRQYXRoLnBvcCgpLCBkYXRhICkgPT09IGZhbHNlICkgJiZcblx0XHRcdFx0YWNjZXB0RGF0YSggZWxlbSApICkge1xuXG5cdFx0XHRcdC8vIENhbGwgYSBuYXRpdmUgRE9NIG1ldGhvZCBvbiB0aGUgdGFyZ2V0IHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0aWYgKCBvbnR5cGUgJiYgaXNGdW5jdGlvbiggZWxlbVsgdHlwZSBdICkgJiYgIWlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyBEb24ndCByZS10cmlnZ2VyIGFuIG9uRk9PIGV2ZW50IHdoZW4gd2UgY2FsbCBpdHMgRk9PKCkgbWV0aG9kXG5cdFx0XHRcdFx0dG1wID0gZWxlbVsgb250eXBlIF07XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZVxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuXG5cdFx0XHRcdFx0aWYgKCBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0XHRcdFx0bGFzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRlbGVtWyB0eXBlIF0oKTtcblxuXHRcdFx0XHRcdGlmICggZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdFx0XHRcdGxhc3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSB0bXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHQvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmVcblx0Ly8gVXNlZCBvbmx5IGZvciBgZm9jdXMoaW4gfCBvdXQpYCBldmVudHNcblx0c2ltdWxhdGU6IGZ1bmN0aW9uKCB0eXBlLCBlbGVtLCBldmVudCApIHtcblx0XHR2YXIgZSA9IGpRdWVyeS5leHRlbmQoXG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCksXG5cdFx0XHRldmVudCxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0aXNTaW11bGF0ZWQ6IHRydWVcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIGUsIG51bGwsIGVsZW0gKTtcblx0fVxuXG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCB0aGlzICk7XG5cdFx0fSApO1xuXHR9LFxuXHR0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIGVsZW0gPSB0aGlzWyAwIF07XG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cblxuLy8gU3VwcG9ydDogRmlyZWZveCA8PTQ0XG4vLyBGaXJlZm94IGRvZXNuJ3QgaGF2ZSBmb2N1cyhpbiB8IG91dCkgZXZlbnRzXG4vLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY4Nzc4N1xuLy9cbi8vIFN1cHBvcnQ6IENocm9tZSA8PTQ4IC0gNDksIFNhZmFyaSA8PTkuMCAtIDkuMVxuLy8gZm9jdXMoaW4gfCBvdXQpIGV2ZW50cyBmaXJlIGFmdGVyIGZvY3VzICYgYmx1ciBldmVudHMsXG4vLyB3aGljaCBpcyBzcGVjIHZpb2xhdGlvbiAtIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLWZvY3VzZXZlbnQtZXZlbnQtb3JkZXJcbi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ5ODU3XG5pZiAoICFzdXBwb3J0LmZvY3VzaW4gKSB7XG5cdGpRdWVyeS5lYWNoKCB7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cblx0XHQvLyBBdHRhY2ggYSBzaW5nbGUgY2FwdHVyaW5nIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50IHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dFxuXHRcdHZhciBoYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSApO1xuXHRcdH07XG5cblx0XHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZml4IF0gPSB7XG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsICggYXR0YWNoZXMgfHwgMCApICsgMSApO1xuXHRcdFx0fSxcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApIC0gMTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsIGF0dGFjaGVzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9ICk7XG59XG52YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG5cbnZhciBub25jZSA9IERhdGUubm93KCk7XG5cbnZhciBycXVlcnkgPSAoIC9cXD8vICk7XG5cblxuXG4vLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nXG5qUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0dmFyIHhtbDtcblx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdC8vIElFIHRocm93cyBvbiBwYXJzZUZyb21TdHJpbmcgd2l0aCBpbnZhbGlkIGlucHV0LlxuXHR0cnkge1xuXHRcdHhtbCA9ICggbmV3IHdpbmRvdy5ET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIEFycmF5LmlzQXJyYXkoIG9iaiApICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIGFycmF5IGl0ZW0uXG5cdFx0alF1ZXJ5LmVhY2goIG9iaiwgZnVuY3Rpb24oIGksIHYgKSB7XG5cdFx0XHRpZiAoIHRyYWRpdGlvbmFsIHx8IHJicmFja2V0LnRlc3QoIHByZWZpeCApICkge1xuXG5cdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBJdGVtIGlzIG5vbi1zY2FsYXIgKGFycmF5IG9yIG9iamVjdCksIGVuY29kZSBpdHMgbnVtZXJpYyBpbmRleC5cblx0XHRcdFx0YnVpbGRQYXJhbXMoXG5cdFx0XHRcdFx0cHJlZml4ICsgXCJbXCIgKyAoIHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT0gbnVsbCA/IGkgOiBcIlwiICkgKyBcIl1cIixcblx0XHRcdFx0XHR2LFxuXHRcdFx0XHRcdHRyYWRpdGlvbmFsLFxuXHRcdFx0XHRcdGFkZFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgdG9UeXBlKCBvYmogKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS5cblx0XHRhZGQoIHByZWZpeCwgb2JqICk7XG5cdH1cbn1cblxuLy8gU2VyaWFsaXplIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMgb3IgYSBzZXQgb2Zcbi8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZ1xualF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24oIGEsIHRyYWRpdGlvbmFsICkge1xuXHR2YXIgcHJlZml4LFxuXHRcdHMgPSBbXSxcblx0XHRhZGQgPSBmdW5jdGlvbigga2V5LCB2YWx1ZU9yRnVuY3Rpb24gKSB7XG5cblx0XHRcdC8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgdXNlIGl0cyByZXR1cm4gdmFsdWVcblx0XHRcdHZhciB2YWx1ZSA9IGlzRnVuY3Rpb24oIHZhbHVlT3JGdW5jdGlvbiApID9cblx0XHRcdFx0dmFsdWVPckZ1bmN0aW9uKCkgOlxuXHRcdFx0XHR2YWx1ZU9yRnVuY3Rpb247XG5cblx0XHRcdHNbIHMubGVuZ3RoIF0gPSBlbmNvZGVVUklDb21wb25lbnQoIGtleSApICsgXCI9XCIgK1xuXHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKTtcblx0XHR9O1xuXG5cdC8vIElmIGFuIGFycmF5IHdhcyBwYXNzZWQgaW4sIGFzc3VtZSB0aGF0IGl0IGlzIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMuXG5cdGlmICggQXJyYXkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSB0aGUgZm9ybSBlbGVtZW50c1xuXHRcdGpRdWVyeS5lYWNoKCBhLCBmdW5jdGlvbigpIHtcblx0XHRcdGFkZCggdGhpcy5uYW1lLCB0aGlzLnZhbHVlICk7XG5cdFx0fSApO1xuXG5cdH0gZWxzZSB7XG5cblx0XHQvLyBJZiB0cmFkaXRpb25hbCwgZW5jb2RlIHRoZSBcIm9sZFwiIHdheSAodGhlIHdheSAxLjMuMiBvciBvbGRlclxuXHRcdC8vIGRpZCBpdCksIG90aGVyd2lzZSBlbmNvZGUgcGFyYW1zIHJlY3Vyc2l2ZWx5LlxuXHRcdGZvciAoIHByZWZpeCBpbiBhICkge1xuXHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCwgYVsgcHJlZml4IF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIHJlc3VsdGluZyBzZXJpYWxpemF0aW9uXG5cdHJldHVybiBzLmpvaW4oIFwiJlwiICk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5wYXJhbSggdGhpcy5zZXJpYWxpemVBcnJheSgpICk7XG5cdH0sXG5cdHNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBDYW4gYWRkIHByb3BIb29rIGZvciBcImVsZW1lbnRzXCIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzXG5cdFx0XHR2YXIgZWxlbWVudHMgPSBqUXVlcnkucHJvcCggdGhpcywgXCJlbGVtZW50c1wiICk7XG5cdFx0XHRyZXR1cm4gZWxlbWVudHMgPyBqUXVlcnkubWFrZUFycmF5KCBlbGVtZW50cyApIDogdGhpcztcblx0XHR9IClcblx0XHQuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0eXBlID0gdGhpcy50eXBlO1xuXG5cdFx0XHQvLyBVc2UgLmlzKCBcIjpkaXNhYmxlZFwiICkgc28gdGhhdCBmaWVsZHNldFtkaXNhYmxlZF0gd29ya3Ncblx0XHRcdHJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCBcIjpkaXNhYmxlZFwiICkgJiZcblx0XHRcdFx0cnN1Ym1pdHRhYmxlLnRlc3QoIHRoaXMubm9kZU5hbWUgKSAmJiAhcnN1Ym1pdHRlclR5cGVzLnRlc3QoIHR5cGUgKSAmJlxuXHRcdFx0XHQoIHRoaXMuY2hlY2tlZCB8fCAhcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7XG5cdFx0fSApXG5cdFx0Lm1hcCggZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuXHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9ICkuZ2V0KCk7XG5cdH1cbn0gKTtcblxuXG52YXJcblx0cjIwID0gLyUyMC9nLFxuXHRyaGFzaCA9IC8jLiokLyxcblx0cmFudGlDYWNoZSA9IC8oWz8mXSlfPVteJl0qLyxcblx0cmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL21nLFxuXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXG5cdC8qIFByZWZpbHRlcnNcblx0ICogMSkgVGhleSBhcmUgdXNlZnVsIHRvIGludHJvZHVjZSBjdXN0b20gZGF0YVR5cGVzIChzZWUgYWpheC9qc29ucC5qcyBmb3IgYW4gZXhhbXBsZSlcblx0ICogMikgVGhlc2UgYXJlIGNhbGxlZDpcblx0ICogICAgLSBCRUZPUkUgYXNraW5nIGZvciBhIHRyYW5zcG9ydFxuXHQgKiAgICAtIEFGVEVSIHBhcmFtIHNlcmlhbGl6YXRpb24gKHMuZGF0YSBpcyBhIHN0cmluZyBpZiBzLnByb2Nlc3NEYXRhIGlzIHRydWUpXG5cdCAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0ICogNCkgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHQgKiA1KSBleGVjdXRpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBjb250aW51ZSBkb3duIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0cHJlZmlsdGVycyA9IHt9LFxuXG5cdC8qIFRyYW5zcG9ydHMgYmluZGluZ3Ncblx0ICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiAyKSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0dHJhbnNwb3J0cyA9IHt9LFxuXG5cdC8vIEF2b2lkIGNvbW1lbnQtcHJvbG9nIGNoYXIgc2VxdWVuY2UgKCMxMDA5OCk7IG11c3QgYXBwZWFzZSBsaW50IGFuZCBldmFkZSBjb21wcmVzc2lvblxuXHRhbGxUeXBlcyA9IFwiKi9cIi5jb25jYXQoIFwiKlwiICksXG5cblx0Ly8gQW5jaG9yIHRhZyBmb3IgcGFyc2luZyB0aGUgZG9jdW1lbnQgb3JpZ2luXG5cdG9yaWdpbkFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdG9yaWdpbkFuY2hvci5ocmVmID0gbG9jYXRpb24uaHJlZjtcblxuLy8gQmFzZSBcImNvbnN0cnVjdG9yXCIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydFxuZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cblx0Ly8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byBcIipcIlxuXHRyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblxuXHRcdGlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG5cdFx0XHRkYXRhVHlwZUV4cHJlc3Npb24gPSBcIipcIjtcblx0XHR9XG5cblx0XHR2YXIgZGF0YVR5cGUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIGZ1bmMgKSApIHtcblxuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoIGRhdGFUeXBlID0gZGF0YVR5cGVzWyBpKysgXSApICkge1xuXG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbIDAgXSA9PT0gXCIrXCIgKSB7XG5cdFx0XHRcdFx0ZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkudW5zaGlmdCggZnVuYyApO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBhcHBlbmRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXG5cdFx0XHRcdG9wdGlvbnMuZGF0YVR5cGVzLnVuc2hpZnQoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0aW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCBzZWVraW5nVHJhbnNwb3J0ICkge1xuXHRcdFx0XHRyZXR1cm4gISggc2VsZWN0ZWQgPSBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoIGRlZXAgPSB7fSApICkgKVsga2V5IF0gPSBzcmNbIGtleSBdO1xuXHRcdH1cblx0fVxuXHRpZiAoIGRlZXAgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdHJ1ZSwgdGFyZ2V0LCBkZWVwICk7XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0O1xufVxuXG4vKiBIYW5kbGVzIHJlc3BvbnNlcyB0byBhbiBhamF4IHJlcXVlc3Q6XG4gKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKVxuICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7XG5cblx0dmFyIGN0LCB0eXBlLCBmaW5hbERhdGFUeXBlLCBmaXJzdERhdGFUeXBlLFxuXHRcdGNvbnRlbnRzID0gcy5jb250ZW50cyxcblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblxuXHQvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2Vzc1xuXHR3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcblx0XHRkYXRhVHlwZXMuc2hpZnQoKTtcblx0XHRpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayBpZiB3ZSdyZSBkZWFsaW5nIHdpdGggYSBrbm93biBjb250ZW50LXR5cGVcblx0aWYgKCBjdCApIHtcblx0XHRmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkge1xuXHRcdFx0aWYgKCBjb250ZW50c1sgdHlwZSBdICYmIGNvbnRlbnRzWyB0eXBlIF0udGVzdCggY3QgKSApIHtcblx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlXG5cdGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuXHRcdGZpbmFsRGF0YVR5cGUgPSBkYXRhVHlwZXNbIDAgXTtcblx0fSBlbHNlIHtcblxuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWyAwIF0gXSApIHtcblx0XHRcdFx0ZmluYWxEYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhZmlyc3REYXRhVHlwZSApIHtcblx0XHRcdFx0Zmlyc3REYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gT3IganVzdCB1c2UgZmlyc3Qgb25lXG5cdFx0ZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTtcblx0fVxuXG5cdC8vIElmIHdlIGZvdW5kIGEgZGF0YVR5cGVcblx0Ly8gV2UgYWRkIHRoZSBkYXRhVHlwZSB0byB0aGUgbGlzdCBpZiBuZWVkZWRcblx0Ly8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuXHRpZiAoIGZpbmFsRGF0YVR5cGUgKSB7XG5cdFx0aWYgKCBmaW5hbERhdGFUeXBlICE9PSBkYXRhVHlwZXNbIDAgXSApIHtcblx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7XG5cdFx0fVxuXHRcdHJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTtcblx0fVxufVxuXG4vKiBDaGFpbiBjb252ZXJzaW9ucyBnaXZlbiB0aGUgcmVxdWVzdCBhbmQgdGhlIG9yaWdpbmFsIHJlc3BvbnNlXG4gKiBBbHNvIHNldHMgdGhlIHJlc3BvbnNlWFhYIGZpZWxkcyBvbiB0aGUganFYSFIgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICkge1xuXHR2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldixcblx0XHRjb252ZXJ0ZXJzID0ge30sXG5cblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHRcdC8vIFRoZXJlJ3Mgb25seSB3b3JrIHRvIGRvIGlmIGN1cnJlbnQgZGF0YVR5cGUgaXMgbm9uLWF1dG9cblx0XHRcdGlmICggY3VycmVudCA9PT0gXCIqXCIgKSB7XG5cblx0XHRcdFx0Y3VycmVudCA9IHByZXY7XG5cblx0XHRcdC8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnRcblx0XHRcdH0gZWxzZSBpZiAoIHByZXYgIT09IFwiKlwiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU2VlayBhIGRpcmVjdCBjb252ZXJ0ZXJcblx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIGN1cnJlbnQgXSB8fCBjb252ZXJ0ZXJzWyBcIiogXCIgKyBjdXJyZW50IF07XG5cblx0XHRcdFx0Ly8gSWYgbm9uZSBmb3VuZCwgc2VlayBhIHBhaXJcblx0XHRcdFx0aWYgKCAhY29udiApIHtcblx0XHRcdFx0XHRmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnRcblx0XHRcdFx0XHRcdHRtcCA9IGNvbnYyLnNwbGl0KCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0aWYgKCB0bXBbIDEgXSA9PT0gY3VycmVudCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBJZiBwcmV2IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYWNjZXB0ZWQgaW5wdXRcblx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIHRtcFsgMCBdIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRjb252ZXJ0ZXJzWyBcIiogXCIgKyB0bXBbIDAgXSBdO1xuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBjb252ID09PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggY29udmVydGVyc1sgY29udjIgXSAhPT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQgPSB0bXBbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKVxuXHRcdFx0XHRpZiAoIGNvbnYgIT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHQvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtXG5cdFx0XHRcdFx0aWYgKCBjb252ICYmIHMudGhyb3dzICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZTogXCJwYXJzZXJlcnJvclwiLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBjb252ID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgcHJldiArIFwiIHRvIFwiICsgY3VycmVudFxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHN0YXRlOiBcInN1Y2Nlc3NcIiwgZGF0YTogcmVzcG9uc2UgfTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIENvdW50ZXIgZm9yIGhvbGRpbmcgdGhlIG51bWJlciBvZiBhY3RpdmUgcXVlcmllc1xuXHRhY3RpdmU6IDAsXG5cblx0Ly8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdFxuXHRsYXN0TW9kaWZpZWQ6IHt9LFxuXHRldGFnOiB7fSxcblxuXHRhamF4U2V0dGluZ3M6IHtcblx0XHR1cmw6IGxvY2F0aW9uLmhyZWYsXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBsb2NhdGlvbi5wcm90b2NvbCApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblxuXHRcdC8qXG5cdFx0dGltZW91dDogMCxcblx0XHRkYXRhOiBudWxsLFxuXHRcdGRhdGFUeXBlOiBudWxsLFxuXHRcdHVzZXJuYW1lOiBudWxsLFxuXHRcdHBhc3N3b3JkOiBudWxsLFxuXHRcdGNhY2hlOiBudWxsLFxuXHRcdHRocm93czogZmFsc2UsXG5cdFx0dHJhZGl0aW9uYWw6IGZhbHNlLFxuXHRcdGhlYWRlcnM6IHt9LFxuXHRcdCovXG5cblx0XHRhY2NlcHRzOiB7XG5cdFx0XHRcIipcIjogYWxsVHlwZXMsXG5cdFx0XHR0ZXh0OiBcInRleHQvcGxhaW5cIixcblx0XHRcdGh0bWw6IFwidGV4dC9odG1sXCIsXG5cdFx0XHR4bWw6IFwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLFxuXHRcdFx0anNvbjogXCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIlxuXHRcdH0sXG5cblx0XHRjb250ZW50czoge1xuXHRcdFx0eG1sOiAvXFxieG1sXFxiLyxcblx0XHRcdGh0bWw6IC9cXGJodG1sLyxcblx0XHRcdGpzb246IC9cXGJqc29uXFxiL1xuXHRcdH0sXG5cblx0XHRyZXNwb25zZUZpZWxkczoge1xuXHRcdFx0eG1sOiBcInJlc3BvbnNlWE1MXCIsXG5cdFx0XHR0ZXh0OiBcInJlc3BvbnNlVGV4dFwiLFxuXHRcdFx0anNvbjogXCJyZXNwb25zZUpTT05cIlxuXHRcdH0sXG5cblx0XHQvLyBEYXRhIGNvbnZlcnRlcnNcblx0XHQvLyBLZXlzIHNlcGFyYXRlIHNvdXJjZSAob3IgY2F0Y2hhbGwgXCIqXCIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG5cdFx0Y29udmVydGVyczoge1xuXG5cdFx0XHQvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHRcblx0XHRcdFwiKiB0ZXh0XCI6IFN0cmluZyxcblxuXHRcdFx0Ly8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pXG5cdFx0XHRcInRleHQgaHRtbFwiOiB0cnVlLFxuXG5cdFx0XHQvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uXG5cdFx0XHRcInRleHQganNvblwiOiBKU09OLnBhcnNlLFxuXG5cdFx0XHQvLyBQYXJzZSB0ZXh0IGFzIHhtbFxuXHRcdFx0XCJ0ZXh0IHhtbFwiOiBqUXVlcnkucGFyc2VYTUxcblx0XHR9LFxuXG5cdFx0Ly8gRm9yIG9wdGlvbnMgdGhhdCBzaG91bGRuJ3QgYmUgZGVlcCBleHRlbmRlZDpcblx0XHQvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmXG5cdFx0Ly8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmVcblx0XHQvLyBkZWVwIGV4dGVuZGVkIChzZWUgYWpheEV4dGVuZClcblx0XHRmbGF0T3B0aW9uczoge1xuXHRcdFx0dXJsOiB0cnVlLFxuXHRcdFx0Y29udGV4dDogdHJ1ZVxuXHRcdH1cblx0fSxcblxuXHQvLyBDcmVhdGVzIGEgZnVsbCBmbGVkZ2VkIHNldHRpbmdzIG9iamVjdCBpbnRvIHRhcmdldFxuXHQvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuXG5cdC8vIElmIHRhcmdldCBpcyBvbWl0dGVkLCB3cml0ZXMgaW50byBhamF4U2V0dGluZ3MuXG5cdGFqYXhTZXR1cDogZnVuY3Rpb24oIHRhcmdldCwgc2V0dGluZ3MgKSB7XG5cdFx0cmV0dXJuIHNldHRpbmdzID9cblxuXHRcdFx0Ly8gQnVpbGRpbmcgYSBzZXR0aW5ncyBvYmplY3Rcblx0XHRcdGFqYXhFeHRlbmQoIGFqYXhFeHRlbmQoIHRhcmdldCwgalF1ZXJ5LmFqYXhTZXR0aW5ncyApLCBzZXR0aW5ncyApIDpcblxuXHRcdFx0Ly8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5nc1xuXHRcdFx0YWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7XG5cdH0sXG5cblx0YWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksXG5cdGFqYXhUcmFuc3BvcnQ6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cyApLFxuXG5cdC8vIE1haW4gbWV0aG9kXG5cdGFqYXg6IGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZVxuXHRcdGlmICggdHlwZW9mIHVybCA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdG9wdGlvbnMgPSB1cmw7XG5cdFx0XHR1cmwgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gRm9yY2Ugb3B0aW9ucyB0byBiZSBhbiBvYmplY3Rcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRcdHZhciB0cmFuc3BvcnQsXG5cblx0XHRcdC8vIFVSTCB3aXRob3V0IGFudGktY2FjaGUgcGFyYW1cblx0XHRcdGNhY2hlVVJMLFxuXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cblx0XHRcdC8vIHRpbWVvdXQgaGFuZGxlXG5cdFx0XHR0aW1lb3V0VGltZXIsXG5cblx0XHRcdC8vIFVybCBjbGVhbnVwIHZhclxuXHRcdFx0dXJsQW5jaG9yLFxuXG5cdFx0XHQvLyBSZXF1ZXN0IHN0YXRlIChiZWNvbWVzIGZhbHNlIHVwb24gc2VuZCBhbmQgdHJ1ZSB1cG9uIGNvbXBsZXRpb24pXG5cdFx0XHRjb21wbGV0ZWQsXG5cblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cblx0XHRcdC8vIExvb3AgdmFyaWFibGVcblx0XHRcdGksXG5cblx0XHRcdC8vIHVuY2FjaGVkIHBhcnQgb2YgdGhlIHVybFxuXHRcdFx0dW5jYWNoZWQsXG5cblx0XHRcdC8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3Rcblx0XHRcdHMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLFxuXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cblx0XHRcdC8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb25cblx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJlxuXHRcdFx0XHQoIGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZSB8fCBjYWxsYmFja0NvbnRleHQuanF1ZXJ5ICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggY2FsbGJhY2tDb250ZXh0ICkgOlxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudCxcblxuXHRcdFx0Ly8gRGVmZXJyZWRzXG5cdFx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblxuXHRcdFx0Ly8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSlcblx0XHRcdHJlcXVlc3RIZWFkZXJzID0ge30sXG5cdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sXG5cblx0XHRcdC8vIERlZmF1bHQgYWJvcnQgbWVzc2FnZVxuXHRcdFx0c3RyQWJvcnQgPSBcImNhbmNlbGVkXCIsXG5cblx0XHRcdC8vIEZha2UgeGhyXG5cdFx0XHRqcVhIUiA9IHtcblx0XHRcdFx0cmVhZHlTdGF0ZTogMCxcblxuXHRcdFx0XHQvLyBCdWlsZHMgaGVhZGVycyBoYXNodGFibGUgaWYgbmVlZGVkXG5cdFx0XHRcdGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdFx0XHRcdHZhciBtYXRjaDtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0XHRcdGlmICggIXJlc3BvbnNlSGVhZGVycyApIHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzID0ge307XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKCBtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbXBsZXRlZCA/IHJlc3BvbnNlSGVhZGVyc1N0cmluZyA6IG51bGw7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FjaGVzIHRoZSBoZWFkZXJcblx0XHRcdFx0c2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRuYW1lID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gPVxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSB8fCBuYW1lO1xuXHRcdFx0XHRcdFx0cmVxdWVzdEhlYWRlcnNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlclxuXHRcdFx0XHRvdmVycmlkZU1pbWVUeXBlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2tzIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzXG5cdFx0XHRcdFx0XHRcdGZvciAoIGNvZGUgaW4gbWFwICkge1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApO1xuXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgbG9jYXRpb24uaHJlZiApICsgXCJcIiApXG5cdFx0XHQucmVwbGFjZSggcnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiApO1xuXG5cdFx0Ly8gQWxpYXMgbWV0aG9kIG9wdGlvbiB0byB0eXBlIGFzIHBlciB0aWNrZXQgIzEyMDA0XG5cdFx0cy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTtcblxuXHRcdC8vIEV4dHJhY3QgZGF0YVR5cGVzIGxpc3Rcblx0XHRzLmRhdGFUeXBlcyA9ICggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblxuXHRcdC8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB0aGUgb3JpZ2luIGRvZXNuJ3QgbWF0Y2ggdGhlIGN1cnJlbnQgb3JpZ2luLlxuXHRcdGlmICggcy5jcm9zc0RvbWFpbiA9PSBudWxsICkge1xuXHRcdFx0dXJsQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IC0gMTEsIEVkZ2UgMTIgLSAxNVxuXHRcdFx0Ly8gSUUgdGhyb3dzIGV4Y2VwdGlvbiBvbiBhY2Nlc3NpbmcgdGhlIGhyZWYgcHJvcGVydHkgaWYgdXJsIGlzIG1hbGZvcm1lZCxcblx0XHRcdC8vIGUuZy4gaHR0cDovL2V4YW1wbGUuY29tOjgweC9cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHVybEFuY2hvci5ocmVmID0gcy51cmw7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IC0gMTEgb25seVxuXHRcdFx0XHQvLyBBbmNob3IncyBob3N0IHByb3BlcnR5IGlzbid0IGNvcnJlY3RseSBzZXQgd2hlbiBzLnVybCBpcyByZWxhdGl2ZVxuXHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHVybEFuY2hvci5ocmVmO1xuXHRcdFx0XHRzLmNyb3NzRG9tYWluID0gb3JpZ2luQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgb3JpZ2luQW5jaG9yLmhvc3QgIT09XG5cdFx0XHRcdFx0dXJsQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgdXJsQW5jaG9yLmhvc3Q7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciBwYXJzaW5nIHRoZSBVUkwsIGFzc3VtZSBpdCBpcyBjcm9zc0RvbWFpbixcblx0XHRcdFx0Ly8gaXQgY2FuIGJlIHJlamVjdGVkIGJ5IHRoZSB0cmFuc3BvcnQgaWYgaXQgaXMgaW52YWxpZFxuXHRcdFx0XHRzLmNyb3NzRG9tYWluID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0fVxuXG5cdFx0Ly8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG9cblx0XHQvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KVxuXHRcdGZpcmVHbG9iYWxzID0galF1ZXJ5LmV2ZW50ICYmIHMuZ2xvYmFsO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0c1xuXHRcdGlmICggZmlyZUdsb2JhbHMgJiYgalF1ZXJ5LmFjdGl2ZSsrID09PSAwICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0YXJ0XCIgKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHQvLyBSZW1vdmUgaGFzaCB0byBzaW1wbGlmeSB1cmwgbWFuaXB1bGF0aW9uXG5cdFx0Y2FjaGVVUkwgPSBzLnVybC5yZXBsYWNlKCByaGFzaCwgXCJcIiApO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBoYXNoIHNvIHdlIGNhbiBwdXQgaXQgYmFja1xuXHRcdFx0dW5jYWNoZWQgPSBzLnVybC5zbGljZSggY2FjaGVVUkwubGVuZ3RoICk7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlIGFuZCBzaG91bGQgYmUgcHJvY2Vzc2VkLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICYmICggcy5wcm9jZXNzRGF0YSB8fCB0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICkgKSB7XG5cdFx0XHRcdGNhY2hlVVJMICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmRhdGE7XG5cblx0XHRcdFx0Ly8gIzk2ODI6IHJlbW92ZSBkYXRhIHNvIHRoYXQgaXQncyBub3QgdXNlZCBpbiBhbiBldmVudHVhbCByZXRyeVxuXHRcdFx0XHRkZWxldGUgcy5kYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgb3IgdXBkYXRlIGFudGktY2FjaGUgcGFyYW0gaWYgbmVlZGVkXG5cdFx0XHRpZiAoIHMuY2FjaGUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9IGNhY2hlVVJMLnJlcGxhY2UoIHJhbnRpQ2FjaGUsIFwiJDFcIiApO1xuXHRcdFx0XHR1bmNhY2hlZCA9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyAoIG5vbmNlKysgKSArIHVuY2FjaGVkO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQdXQgaGFzaCBhbmQgYW50aS1jYWNoZSBvbiB0aGUgVVJMIHRoYXQgd2lsbCBiZSByZXF1ZXN0ZWQgKGdoLTE3MzIpXG5cdFx0XHRzLnVybCA9IGNhY2hlVVJMICsgdW5jYWNoZWQ7XG5cblx0XHQvLyBDaGFuZ2UgJyUyMCcgdG8gJysnIGlmIHRoaXMgaXMgZW5jb2RlZCBmb3JtIGJvZHkgY29udGVudCAoZ2gtMjY1OClcblx0XHR9IGVsc2UgaWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJlxuXHRcdFx0KCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKS5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgKSB7XG5cdFx0XHRzLmRhdGEgPSBzLmRhdGEucmVwbGFjZSggcjIwLCBcIitcIiApO1xuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSA/XG5cdFx0XHRcdHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdICtcblx0XHRcdFx0XHQoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJlxuXHRcdFx0KCBzLmJlZm9yZVNlbmQuY2FsbCggY2FsbGJhY2tDb250ZXh0LCBqcVhIUiwgcyApID09PSBmYWxzZSB8fCBjb21wbGV0ZWQgKSApIHtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuXG5cdFx0XHRyZXR1cm4ganFYSFIuYWJvcnQoKTtcblx0XHR9XG5cblx0XHQvLyBBYm9ydGluZyBpcyBubyBsb25nZXIgYSBjYW5jZWxsYXRpb25cblx0XHRzdHJBYm9ydCA9IFwiYWJvcnRcIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tzIG9uIGRlZmVycmVkc1xuXHRcdGNvbXBsZXRlRGVmZXJyZWQuYWRkKCBzLmNvbXBsZXRlICk7XG5cdFx0anFYSFIuZG9uZSggcy5zdWNjZXNzICk7XG5cdFx0anFYSFIuZmFpbCggcy5lcnJvciApO1xuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYWpheFNlbmQsIHN0b3AgdGhlcmVcblx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0anFYSFIuYWJvcnQoIFwidGltZW91dFwiICk7XG5cdFx0XHRcdH0sIHMudGltZW91dCApO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBSZXRocm93IHBvc3QtY29tcGxldGlvbiBleGNlcHRpb25zXG5cdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBQcm9wYWdhdGUgb3RoZXJzIGFzIHJlc3VsdHNcblx0XHRcdFx0ZG9uZSggLTEsIGUgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsYmFjayBmb3Igd2hlbiBldmVyeXRoaW5nIGlzIGRvbmVcblx0XHRmdW5jdGlvbiBkb25lKCBzdGF0dXMsIG5hdGl2ZVN0YXR1c1RleHQsIHJlc3BvbnNlcywgaGVhZGVycyApIHtcblx0XHRcdHZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsXG5cdFx0XHRcdHN0YXR1c1RleHQgPSBuYXRpdmVTdGF0dXNUZXh0O1xuXG5cdFx0XHQvLyBJZ25vcmUgcmVwZWF0IGludm9jYXRpb25zXG5cdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb21wbGV0ZWQgPSB0cnVlO1xuXG5cdFx0XHQvLyBDbGVhciB0aW1lb3V0IGlmIGl0IGV4aXN0c1xuXHRcdFx0aWYgKCB0aW1lb3V0VGltZXIgKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvblxuXHRcdFx0Ly8gKG5vIG1hdHRlciBob3cgbG9uZyB0aGUganFYSFIgb2JqZWN0IHdpbGwgYmUgdXNlZClcblx0XHRcdHRyYW5zcG9ydCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0Ly8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nID0gaGVhZGVycyB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTZXQgcmVhZHlTdGF0ZVxuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDtcblxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHN1Y2Nlc3NmdWxcblx0XHRcdGlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXG5cdFx0XHQvLyBHZXQgcmVzcG9uc2UgZGF0YVxuXHRcdFx0aWYgKCByZXNwb25zZXMgKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpXG5cdFx0XHRyZXNwb25zZSA9IGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApO1xuXG5cdFx0XHQvLyBJZiBzdWNjZXNzZnVsLCBoYW5kbGUgdHlwZSBjaGFpbmluZ1xuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cblx0XHRcdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRcdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJMYXN0LU1vZGlmaWVkXCIgKTtcblx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcImV0YWdcIiApO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBFeHRyYWN0IGVycm9yIGZyb20gc3RhdHVzVGV4dCBhbmQgbm9ybWFsaXplIGZvciBub24tYWJvcnRzXG5cdFx0XHRcdGVycm9yID0gc3RhdHVzVGV4dDtcblx0XHRcdFx0aWYgKCBzdGF0dXMgfHwgIXN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwiZXJyb3JcIjtcblx0XHRcdFx0XHRpZiAoIHN0YXR1cyA8IDAgKSB7XG5cdFx0XHRcdFx0XHRzdGF0dXMgPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgZGF0YSBmb3IgdGhlIGZha2UgeGhyIG9iamVjdFxuXHRcdFx0anFYSFIuc3RhdHVzID0gc3RhdHVzO1xuXHRcdFx0anFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyBcIlwiO1xuXG5cdFx0XHQvLyBTdWNjZXNzL0Vycm9yXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBzdWNjZXNzLCBzdGF0dXNUZXh0LCBqcVhIUiBdICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdGpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTtcblx0XHRcdHN0YXR1c0NvZGUgPSB1bmRlZmluZWQ7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBpc1N1Y2Nlc3MgPyBcImFqYXhTdWNjZXNzXCIgOiBcImFqYXhFcnJvclwiLFxuXHRcdFx0XHRcdFsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbXBsZXRlXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4Q29tcGxldGVcIiwgWyBqcVhIUiwgcyBdICk7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyXG5cdFx0XHRcdGlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0b3BcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwiZ2V0XCIsIFwicG9zdFwiIF0sIGZ1bmN0aW9uKCBpLCBtZXRob2QgKSB7XG5cdGpRdWVyeVsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjaywgdHlwZSApIHtcblxuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBjYWxsYmFjaztcblx0XHRcdGNhbGxiYWNrID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHVybCBjYW4gYmUgYW4gb3B0aW9ucyBvYmplY3QgKHdoaWNoIHRoZW4gbXVzdCBoYXZlIC51cmwpXG5cdFx0cmV0dXJuIGpRdWVyeS5hamF4KCBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSwgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHVybCApICYmIHVybCApICk7XG5cdH07XG59ICk7XG5cblxualF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCApIHtcblx0cmV0dXJuIGpRdWVyeS5hamF4KCB7XG5cdFx0dXJsOiB1cmwsXG5cblx0XHQvLyBNYWtlIHRoaXMgZXhwbGljaXQsIHNpbmNlIHVzZXIgY2FuIG92ZXJyaWRlIHRoaXMgdGhyb3VnaCBhamF4U2V0dXAgKCMxMTI2NClcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdGNhY2hlOiB0cnVlLFxuXHRcdGFzeW5jOiBmYWxzZSxcblx0XHRnbG9iYWw6IGZhbHNlLFxuXHRcdFwidGhyb3dzXCI6IHRydWVcblx0fSApO1xufTtcblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCB0aGlzWyAwIF0gKSB7XG5cdFx0XHRpZiAoIGlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdFx0aHRtbCA9IGh0bWwuY2FsbCggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kXG5cdFx0XHR3cmFwID0galF1ZXJ5KCBodG1sLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCApLmVxKCAwICkuY2xvbmUoIHRydWUgKTtcblxuXHRcdFx0aWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0d3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHR3cmFwLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gdGhpcztcblxuXHRcdFx0XHR3aGlsZSAoIGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZWxlbTtcblx0XHRcdH0gKS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKCB0aGlzLCBpICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksXG5cdFx0XHRcdGNvbnRlbnRzID0gc2VsZi5jb250ZW50cygpO1xuXG5cdFx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCApIHtcblx0XHRcdFx0Y29udGVudHMud3JhcEFsbCggaHRtbCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLmFwcGVuZCggaHRtbCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHR3cmFwOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHR2YXIgaHRtbElzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKCBodG1sICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGh0bWxJc0Z1bmN0aW9uID8gaHRtbC5jYWxsKCB0aGlzLCBpICkgOiBodG1sICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdHVud3JhcDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHRoaXMucGFyZW50KCBzZWxlY3RvciApLm5vdCggXCJib2R5XCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcblx0XHR9ICk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuZXhwci5wc2V1ZG9zLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZSggZWxlbSApO1xufTtcbmpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gISEoIGVsZW0ub2Zmc2V0V2lkdGggfHwgZWxlbS5vZmZzZXRIZWlnaHQgfHwgZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApO1xufTtcblxuXG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuXHR9IGNhdGNoICggZSApIHt9XG59O1xuXG52YXIgeGhyU3VjY2Vzc1N0YXR1cyA9IHtcblxuXHRcdC8vIEZpbGUgcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgY29kZSAwLCBhc3N1bWUgMjAwXG5cdFx0MDogMjAwLFxuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHQvLyAjMTQ1MDogc29tZXRpbWVzIElFIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDRcblx0XHQxMjIzOiAyMDRcblx0fSxcblx0eGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTtcblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0dmFyIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrO1xuXG5cdC8vIENyb3NzIGRvbWFpbiBvbmx5IGFsbG93ZWQgaWYgc3VwcG9ydGVkIHRocm91Z2ggWE1MSHR0cFJlcXVlc3Rcblx0aWYgKCBzdXBwb3J0LmNvcnMgfHwgeGhyU3VwcG9ydGVkICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggaGVhZGVycywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHZhciBpLFxuXHRcdFx0XHRcdHhociA9IG9wdGlvbnMueGhyKCk7XG5cblx0XHRcdFx0eGhyLm9wZW4oXG5cdFx0XHRcdFx0b3B0aW9ucy50eXBlLFxuXHRcdFx0XHRcdG9wdGlvbnMudXJsLFxuXHRcdFx0XHRcdG9wdGlvbnMuYXN5bmMsXG5cdFx0XHRcdFx0b3B0aW9ucy51c2VybmFtZSxcblx0XHRcdFx0XHRvcHRpb25zLnBhc3N3b3JkXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdGZvciAoIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0XHR4aHJbIGkgXSA9IG9wdGlvbnMueGhyRmllbGRzWyBpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7XG5cdFx0XHRcdFx0eGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFgtUmVxdWVzdGVkLVdpdGggaGVhZGVyXG5cdFx0XHRcdC8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmVcblx0XHRcdFx0Ly8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS5cblx0XHRcdFx0Ly8gKGl0IGNhbiBhbHdheXMgYmUgc2V0IG9uIGEgcGVyLXJlcXVlc3QgYmFzaXMgb3IgZXZlbiB1c2luZyBhamF4U2V0dXApXG5cdFx0XHRcdC8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLlxuXHRcdFx0XHRpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXQgaGVhZGVyc1xuXHRcdFx0XHRmb3IgKCBpIGluIGhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IGVycm9yQ2FsbGJhY2sgPSB4aHIub25sb2FkID1cblx0XHRcdFx0XHRcdFx0XHR4aHIub25lcnJvciA9IHhoci5vbmFib3J0ID0geGhyLm9udGltZW91dCA9XG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiYWJvcnRcIiApIHtcblx0XHRcdFx0XHRcdFx0XHR4aHIuYWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gXCJlcnJvclwiICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHRcdFx0XHQvLyBPbiBhIG1hbnVhbCBuYXRpdmUgYWJvcnQsIElFOSB0aHJvd3Ncblx0XHRcdFx0XHRcdFx0XHQvLyBlcnJvcnMgb24gYW55IHByb3BlcnR5IGFjY2VzcyB0aGF0IGlzIG5vdCByZWFkeVN0YXRlXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlb2YgeGhyLnN0YXR1cyAhPT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCAwLCBcImVycm9yXCIgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmlsZTogcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgMDsgc2VlICM4NjA1LCAjMTQyMDdcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHRcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyU3VjY2Vzc1N0YXR1c1sgeGhyLnN0YXR1cyBdIHx8IHhoci5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dCxcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElFOSBoYXMgbm8gWEhSMiBidXQgdGhyb3dzIG9uIGJpbmFyeSAodHJhYy0xMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBYSFIyIG5vbi10ZXh0LCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgaXQgKGdoLTI0OTgpXG5cdFx0XHRcdFx0XHRcdFx0XHQoIHhoci5yZXNwb25zZVR5cGUgfHwgXCJ0ZXh0XCIgKSAhPT0gXCJ0ZXh0XCIgIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgYmluYXJ5OiB4aHIucmVzcG9uc2UgfSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgdGV4dDogeGhyLnJlc3BvbnNlVGV4dCB9LFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0ZXJyb3JDYWxsYmFjayA9IHhoci5vbmVycm9yID0geGhyLm9udGltZW91dCA9IGNhbGxiYWNrKCBcImVycm9yXCIgKTtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA5IG9ubHlcblx0XHRcdFx0Ly8gVXNlIG9ucmVhZHlzdGF0ZWNoYW5nZSB0byByZXBsYWNlIG9uYWJvcnRcblx0XHRcdFx0Ly8gdG8gaGFuZGxlIHVuY2F1Z2h0IGFib3J0c1xuXHRcdFx0XHRpZiAoIHhoci5vbmFib3J0ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0eGhyLm9uYWJvcnQgPSBlcnJvckNhbGxiYWNrO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgcmVhZHlTdGF0ZSBiZWZvcmUgdGltZW91dCBhcyBpdCBjaGFuZ2VzXG5cdFx0XHRcdFx0XHRpZiAoIHhoci5yZWFkeVN0YXRlID09PSA0ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFsbG93IG9uZXJyb3IgdG8gYmUgY2FsbGVkIGZpcnN0LFxuXHRcdFx0XHRcdFx0XHQvLyBidXQgdGhhdCB3aWxsIG5vdCBoYW5kbGUgYSBuYXRpdmUgYWJvcnRcblx0XHRcdFx0XHRcdFx0Ly8gQWxzbywgc2F2ZSBlcnJvckNhbGxiYWNrIHRvIGEgdmFyaWFibGVcblx0XHRcdFx0XHRcdFx0Ly8gYXMgeGhyLm9uZXJyb3IgY2Fubm90IGJlIGFjY2Vzc2VkXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3JDYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDcmVhdGUgdGhlIGFib3J0IGNhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2soIFwiYWJvcnRcIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cblx0XHRcdFx0XHQvLyBEbyBzZW5kIHRoZSByZXF1ZXN0ICh0aGlzIG1heSByYWlzZSBhbiBleGNlcHRpb24pXG5cdFx0XHRcdFx0eGhyLnNlbmQoIG9wdGlvbnMuaGFzQ29udGVudCAmJiBvcHRpb25zLmRhdGEgfHwgbnVsbCApO1xuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHRcdC8vICMxNDY4MzogT25seSByZXRocm93IGlmIHRoaXMgaGFzbid0IGJlZW4gbm90aWZpZWQgYXMgYW4gZXJyb3IgeWV0XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gUHJldmVudCBhdXRvLWV4ZWN1dGlvbiBvZiBzY3JpcHRzIHdoZW4gbm8gZXhwbGljaXQgZGF0YVR5cGUgd2FzIHByb3ZpZGVkIChTZWUgZ2gtMjQzMilcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBmdW5jdGlvbiggcyApIHtcblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMuY29udGVudHMuc2NyaXB0ID0gZmFsc2U7XG5cdH1cbn0gKTtcblxuLy8gSW5zdGFsbCBzY3JpcHQgZGF0YVR5cGVcbmpRdWVyeS5hamF4U2V0dXAoIHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIFwiICtcblx0XHRcdFwiYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJcblx0fSxcblx0Y29udGVudHM6IHtcblx0XHRzY3JpcHQ6IC9cXGIoPzpqYXZhfGVjbWEpc2NyaXB0XFxiL1xuXHR9LFxuXHRjb252ZXJ0ZXJzOiB7XG5cdFx0XCJ0ZXh0IHNjcmlwdFwiOiBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7XG5cdFx0XHRyZXR1cm4gdGV4dDtcblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0gKTtcblxuLy8gQmluZCBzY3JpcHQgdGFnIGhhY2sgdHJhbnNwb3J0XG5qUXVlcnkuYWpheFRyYW5zcG9ydCggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KCBcIjxzY3JpcHQ+XCIgKS5wcm9wKCB7XG5cdFx0XHRcdFx0Y2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LFxuXHRcdFx0XHRcdHNyYzogcy51cmxcblx0XHRcdFx0fSApLm9uKFxuXHRcdFx0XHRcdFwibG9hZCBlcnJvclwiLFxuXHRcdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIGV2dCApIHtcblx0XHRcdFx0XHRcdHNjcmlwdC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrID0gbnVsbDtcblx0XHRcdFx0XHRcdGlmICggZXZ0ICkge1xuXHRcdFx0XHRcdFx0XHRjb21wbGV0ZSggZXZ0LnR5cGUgPT09IFwiZXJyb3JcIiA/IDQwNCA6IDIwMCwgZXZ0LnR5cGUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gVXNlIG5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIHRvIGF2b2lkIG91ciBkb21NYW5pcCBBSkFYIHRyaWNrZXJ5XG5cdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdFsgMCBdICk7XG5cdFx0XHR9LFxuXHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG59ICk7XG5cblxuXG5cbnZhciBvbGRDYWxsYmFja3MgPSBbXSxcblx0cmpzb25wID0gLyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztcblxuLy8gRGVmYXVsdCBqc29ucCBzZXR0aW5nc1xualF1ZXJ5LmFqYXhTZXR1cCgge1xuXHRqc29ucDogXCJjYWxsYmFja1wiLFxuXHRqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArIFwiX1wiICsgKCBub25jZSsrICkgKTtcblx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRyZXR1cm4gY2FsbGJhY2s7XG5cdH1cbn0gKTtcblxuLy8gRGV0ZWN0LCBub3JtYWxpemUgb3B0aW9ucyBhbmQgaW5zdGFsbCBjYWxsYmFja3MgZm9yIGpzb25wIHJlcXVlc3RzXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJqc29uIGpzb25wXCIsIGZ1bmN0aW9uKCBzLCBvcmlnaW5hbFNldHRpbmdzLCBqcVhIUiApIHtcblxuXHR2YXIgY2FsbGJhY2tOYW1lLCBvdmVyd3JpdHRlbiwgcmVzcG9uc2VDb250YWluZXIsXG5cdFx0anNvblByb3AgPSBzLmpzb25wICE9PSBmYWxzZSAmJiAoIHJqc29ucC50ZXN0KCBzLnVybCApID9cblx0XHRcdFwidXJsXCIgOlxuXHRcdFx0dHlwZW9mIHMuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQoIHMuY29udGVudFR5cGUgfHwgXCJcIiApXG5cdFx0XHRcdFx0LmluZGV4T2YoIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgKSA9PT0gMCAmJlxuXHRcdFx0XHRyanNvbnAudGVzdCggcy5kYXRhICkgJiYgXCJkYXRhXCJcblx0XHQpO1xuXG5cdC8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyBcImpzb25wXCIgb3Igd2UgaGF2ZSBhIHBhcmFtZXRlciB0byBzZXRcblx0aWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSBcImpzb25wXCIgKSB7XG5cblx0XHQvLyBHZXQgY2FsbGJhY2sgbmFtZSwgcmVtZW1iZXJpbmcgcHJlZXhpc3RpbmcgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGl0XG5cdFx0Y2FsbGJhY2tOYW1lID0gcy5qc29ucENhbGxiYWNrID0gaXNGdW5jdGlvbiggcy5qc29ucENhbGxiYWNrICkgP1xuXHRcdFx0cy5qc29ucENhbGxiYWNrKCkgOlxuXHRcdFx0cy5qc29ucENhbGxiYWNrO1xuXG5cdFx0Ly8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YVxuXHRcdGlmICgganNvblByb3AgKSB7XG5cdFx0XHRzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsIFwiJDFcIiArIGNhbGxiYWNrTmFtZSApO1xuXHRcdH0gZWxzZSBpZiAoIHMuanNvbnAgIT09IGZhbHNlICkge1xuXHRcdFx0cy51cmwgKz0gKCBycXVlcnkudGVzdCggcy51cmwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuanNvbnAgKyBcIj1cIiArIGNhbGxiYWNrTmFtZTtcblx0XHR9XG5cblx0XHQvLyBVc2UgZGF0YSBjb252ZXJ0ZXIgdG8gcmV0cmlldmUganNvbiBhZnRlciBzY3JpcHQgZXhlY3V0aW9uXG5cdFx0cy5jb252ZXJ0ZXJzWyBcInNjcmlwdCBqc29uXCIgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIEZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBJZiBwcmV2aW91cyB2YWx1ZSBkaWRuJ3QgZXhpc3QgLSByZW1vdmUgaXRcblx0XHRcdGlmICggb3ZlcndyaXR0ZW4gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0alF1ZXJ5KCB3aW5kb3cgKS5yZW1vdmVQcm9wKCBjYWxsYmFja05hbWUgKTtcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWVcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2F2ZSBiYWNrIGFzIGZyZWVcblx0XHRcdGlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7XG5cblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgcmUtdXNpbmcgdGhlIG9wdGlvbnMgZG9lc24ndCBzY3JldyB0aGluZ3MgYXJvdW5kXG5cdFx0XHRcdHMuanNvbnBDYWxsYmFjayA9IG9yaWdpbmFsU2V0dGluZ3MuanNvbnBDYWxsYmFjaztcblxuXHRcdFx0XHQvLyBTYXZlIHRoZSBjYWxsYmFjayBuYW1lIGZvciBmdXR1cmUgdXNlXG5cdFx0XHRcdG9sZENhbGxiYWNrcy5wdXNoKCBjYWxsYmFja05hbWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FsbCBpZiBpdCB3YXMgYSBmdW5jdGlvbiBhbmQgd2UgaGF2ZSBhIHJlc3BvbnNlXG5cdFx0XHRpZiAoIHJlc3BvbnNlQ29udGFpbmVyICYmIGlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSApO1xuXG5cdFx0Ly8gRGVsZWdhdGUgdG8gc2NyaXB0XG5cdFx0cmV0dXJuIFwic2NyaXB0XCI7XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gU3VwcG9ydDogU2FmYXJpIDggb25seVxuLy8gSW4gU2FmYXJpIDggZG9jdW1lbnRzIGNyZWF0ZWQgdmlhIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudFxuLy8gY29sbGFwc2Ugc2libGluZyBmb3JtczogdGhlIHNlY29uZCBvbmUgYmVjb21lcyBhIGNoaWxkIG9mIHRoZSBmaXJzdCBvbmUuXG4vLyBCZWNhdXNlIG9mIHRoYXQsIHRoaXMgc2VjdXJpdHkgbWVhc3VyZSBoYXMgdG8gYmUgZGlzYWJsZWQgaW4gU2FmYXJpIDguXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM3MzM3XG5zdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCA9ICggZnVuY3Rpb24oKSB7XG5cdHZhciBib2R5ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCBcIlwiICkuYm9keTtcblx0Ym9keS5pbm5lckhUTUwgPSBcIjxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+XCI7XG5cdHJldHVybiBib2R5LmNoaWxkTm9kZXMubGVuZ3RoID09PSAyO1xufSApKCk7XG5cblxuLy8gQXJndW1lbnQgXCJkYXRhXCIgc2hvdWxkIGJlIHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsXG4vLyBkZWZhdWx0cyB0byBkb2N1bWVudFxuLy8ga2VlcFNjcmlwdHMgKG9wdGlvbmFsKTogSWYgdHJ1ZSwgd2lsbCBpbmNsdWRlIHNjcmlwdHMgcGFzc2VkIGluIHRoZSBodG1sIHN0cmluZ1xualF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHtcblx0aWYgKCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0a2VlcFNjcmlwdHMgPSBjb250ZXh0O1xuXHRcdGNvbnRleHQgPSBmYWxzZTtcblx0fVxuXG5cdHZhciBiYXNlLCBwYXJzZWQsIHNjcmlwdHM7XG5cblx0aWYgKCAhY29udGV4dCApIHtcblxuXHRcdC8vIFN0b3Agc2NyaXB0cyBvciBpbmxpbmUgZXZlbnQgaGFuZGxlcnMgZnJvbSBiZWluZyBleGVjdXRlZCBpbW1lZGlhdGVseVxuXHRcdC8vIGJ5IHVzaW5nIGRvY3VtZW50LmltcGxlbWVudGF0aW9uXG5cdFx0aWYgKCBzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCApIHtcblx0XHRcdGNvbnRleHQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIFwiXCIgKTtcblxuXHRcdFx0Ly8gU2V0IHRoZSBiYXNlIGhyZWYgZm9yIHRoZSBjcmVhdGVkIGRvY3VtZW50XG5cdFx0XHQvLyBzbyBhbnkgcGFyc2VkIGVsZW1lbnRzIHdpdGggVVJMc1xuXHRcdFx0Ly8gYXJlIGJhc2VkIG9uIHRoZSBkb2N1bWVudCdzIFVSTCAoZ2gtMjk2NSlcblx0XHRcdGJhc2UgPSBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiYmFzZVwiICk7XG5cdFx0XHRiYXNlLmhyZWYgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmO1xuXHRcdFx0Y29udGV4dC5oZWFkLmFwcGVuZENoaWxkKCBiYXNlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnRleHQgPSBkb2N1bWVudDtcblx0XHR9XG5cdH1cblxuXHRwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKTtcblx0c2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTtcblxuXHQvLyBTaW5nbGUgdGFnXG5cdGlmICggcGFyc2VkICkge1xuXHRcdHJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWyAxIF0gKSBdO1xuXHR9XG5cblx0cGFyc2VkID0gYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLyoqXG4gKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlXG4gKi9cbmpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZiggXCIgXCIgKTtcblxuXHRpZiAoIG9mZiA+IC0xICkge1xuXHRcdHNlbGVjdG9yID0gc3RyaXBBbmRDb2xsYXBzZSggdXJsLnNsaWNlKCBvZmYgKSApO1xuXHRcdHVybCA9IHVybC5zbGljZSggMCwgb2ZmICk7XG5cdH1cblxuXHQvLyBJZiBpdCdzIGEgZnVuY3Rpb25cblx0aWYgKCBpc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrXG5cdFx0Y2FsbGJhY2sgPSBwYXJhbXM7XG5cdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXG5cdC8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmdcblx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0dHlwZSA9IFwiUE9TVFwiO1xuXHR9XG5cblx0Ly8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3Rcblx0aWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG5cdFx0alF1ZXJ5LmFqYXgoIHtcblx0XHRcdHVybDogdXJsLFxuXG5cdFx0XHQvLyBJZiBcInR5cGVcIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gXCJHRVRcIiBtZXRob2Qgd2lsbCBiZSB1c2VkLlxuXHRcdFx0Ly8gTWFrZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGV4cGxpY2l0IHNpbmNlXG5cdFx0XHQvLyB1c2VyIGNhbiBvdmVycmlkZSBpdCB0aHJvdWdoIGFqYXhTZXR1cCBtZXRob2Rcblx0XHRcdHR5cGU6IHR5cGUgfHwgXCJHRVRcIixcblx0XHRcdGRhdGFUeXBlOiBcImh0bWxcIixcblx0XHRcdGRhdGE6IHBhcmFtc1xuXHRcdH0gKS5kb25lKCBmdW5jdGlvbiggcmVzcG9uc2VUZXh0ICkge1xuXG5cdFx0XHQvLyBTYXZlIHJlc3BvbnNlIGZvciB1c2UgaW4gY29tcGxldGUgY2FsbGJhY2tcblx0XHRcdHJlc3BvbnNlID0gYXJndW1lbnRzO1xuXG5cdFx0XHRzZWxmLmh0bWwoIHNlbGVjdG9yID9cblxuXHRcdFx0XHQvLyBJZiBhIHNlbGVjdG9yIHdhcyBzcGVjaWZpZWQsIGxvY2F0ZSB0aGUgcmlnaHQgZWxlbWVudHMgaW4gYSBkdW1teSBkaXZcblx0XHRcdFx0Ly8gRXhjbHVkZSBzY3JpcHRzIHRvIGF2b2lkIElFICdQZXJtaXNzaW9uIERlbmllZCcgZXJyb3JzXG5cdFx0XHRcdGpRdWVyeSggXCI8ZGl2PlwiICkuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG5cdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXG5cdFx0Ly8gSWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImRhdGFcIiwgXCJzdGF0dXNcIiwgXCJqcVhIUlwiXG5cdFx0Ly8gYnV0IHRoZXkgYXJlIGlnbm9yZWQgYmVjYXVzZSByZXNwb25zZSB3YXMgc2V0IGFib3ZlLlxuXHRcdC8vIElmIGl0IGZhaWxzLCB0aGlzIGZ1bmN0aW9uIGdldHMgXCJqcVhIUlwiLCBcInN0YXR1c1wiLCBcImVycm9yXCJcblx0XHR9ICkuYWx3YXlzKCBjYWxsYmFjayAmJiBmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHtcblx0XHRcdHNlbGYuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGlzLCByZXNwb25zZSB8fCBbIGpxWEhSLnJlc3BvbnNlVGV4dCwgc3RhdHVzLCBqcVhIUiBdICk7XG5cdFx0XHR9ICk7XG5cdFx0fSApO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5cblxuXG4vLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xualF1ZXJ5LmVhY2goIFtcblx0XCJhamF4U3RhcnRcIixcblx0XCJhamF4U3RvcFwiLFxuXHRcImFqYXhDb21wbGV0ZVwiLFxuXHRcImFqYXhFcnJvclwiLFxuXHRcImFqYXhTdWNjZXNzXCIsXG5cdFwiYWpheFNlbmRcIlxuXSwgZnVuY3Rpb24oIGksIHR5cGUgKSB7XG5cdGpRdWVyeS5mblsgdHlwZSBdID0gZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlLCBmbiApO1xuXHR9O1xufSApO1xuXG5cblxuXG5qUXVlcnkuZXhwci5wc2V1ZG9zLmFuaW1hdGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiBqUXVlcnkuZ3JlcCggalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiBlbGVtID09PSBmbi5lbGVtO1xuXHR9ICkubGVuZ3RoO1xufTtcblxuXG5cblxualF1ZXJ5Lm9mZnNldCA9IHtcblx0c2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcblx0XHR2YXIgY3VyUG9zaXRpb24sIGN1ckxlZnQsIGN1ckNTU1RvcCwgY3VyVG9wLCBjdXJPZmZzZXQsIGN1ckNTU0xlZnQsIGNhbGN1bGF0ZVBvc2l0aW9uLFxuXHRcdFx0cG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSxcblx0XHRcdGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcblx0XHRcdHByb3BzID0ge307XG5cblx0XHQvLyBTZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG5cdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdGVsZW0uc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0fVxuXG5cdFx0Y3VyT2Zmc2V0ID0gY3VyRWxlbS5vZmZzZXQoKTtcblx0XHRjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG5cdFx0Y3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwibGVmdFwiICk7XG5cdFx0Y2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApICYmXG5cdFx0XHQoIGN1ckNTU1RvcCArIGN1ckNTU0xlZnQgKS5pbmRleE9mKCBcImF1dG9cIiApID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7XG5cblx0XHRcdC8vIFVzZSBqUXVlcnkuZXh0ZW5kIGhlcmUgdG8gYWxsb3cgbW9kaWZpY2F0aW9uIG9mIGNvb3JkaW5hdGVzIGFyZ3VtZW50IChnaC0xODQ4KVxuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgalF1ZXJ5LmV4dGVuZCgge30sIGN1ck9mZnNldCApICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0Ly8gb2Zmc2V0KCkgcmVsYXRlcyBhbiBlbGVtZW50J3MgYm9yZGVyIGJveCB0byB0aGUgZG9jdW1lbnQgb3JpZ2luXG5cdG9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBQcmVzZXJ2ZSBjaGFpbmluZyBmb3Igc2V0dGVyXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIG9wdGlvbnMgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHRoaXMgOlxuXHRcdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRcdGpRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KCB0aGlzLCBvcHRpb25zLCBpICk7XG5cdFx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHR2YXIgcmVjdCwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXTtcblxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHplcm9zIGZvciBkaXNjb25uZWN0ZWQgYW5kIGhpZGRlbiAoZGlzcGxheTogbm9uZSkgZWxlbWVudHMgKGdoLTIzMTApXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdFx0Ly8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYVxuXHRcdC8vIGRpc2Nvbm5lY3RlZCBub2RlIGluIElFIHRocm93cyBhbiBlcnJvclxuXHRcdGlmICggIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XHR9XG5cblx0XHQvLyBHZXQgZG9jdW1lbnQtcmVsYXRpdmUgcG9zaXRpb24gYnkgYWRkaW5nIHZpZXdwb3J0IHNjcm9sbCB0byB2aWV3cG9ydC1yZWxhdGl2ZSBnQkNSXG5cdFx0cmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0d2luID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IHJlY3QudG9wICsgd2luLnBhZ2VZT2Zmc2V0LFxuXHRcdFx0bGVmdDogcmVjdC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0XG5cdFx0fTtcblx0fSxcblxuXHQvLyBwb3NpdGlvbigpIHJlbGF0ZXMgYW4gZWxlbWVudCdzIG1hcmdpbiBib3ggdG8gaXRzIG9mZnNldCBwYXJlbnQncyBwYWRkaW5nIGJveFxuXHQvLyBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSBiZWhhdmlvciBvZiBDU1MgYWJzb2x1dGUgcG9zaXRpb25pbmdcblx0cG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsIGRvYyxcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXG5cdFx0Ly8gcG9zaXRpb246Zml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHRoZSB2aWV3cG9ydCwgd2hpY2ggaXRzZWxmIGFsd2F5cyBoYXMgemVybyBvZmZzZXRcblx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApID09PSBcImZpeGVkXCIgKSB7XG5cblx0XHRcdC8vIEFzc3VtZSBwb3NpdGlvbjpmaXhlZCBpbXBsaWVzIGF2YWlsYWJpbGl0eSBvZiBnZXRCb3VuZGluZ0NsaWVudFJlY3Rcblx0XHRcdG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblxuXHRcdFx0Ly8gQWNjb3VudCBmb3IgdGhlICpyZWFsKiBvZmZzZXQgcGFyZW50LCB3aGljaCBjYW4gYmUgdGhlIGRvY3VtZW50IG9yIGl0cyByb290IGVsZW1lbnRcblx0XHRcdC8vIHdoZW4gYSBzdGF0aWNhbGx5IHBvc2l0aW9uZWQgZWxlbWVudCBpcyBpZGVudGlmaWVkXG5cdFx0XHRkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cdFx0XHRvZmZzZXRQYXJlbnQgPSBlbGVtLm9mZnNldFBhcmVudCB8fCBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiZcblx0XHRcdFx0KCBvZmZzZXRQYXJlbnQgPT09IGRvYy5ib2R5IHx8IG9mZnNldFBhcmVudCA9PT0gZG9jLmRvY3VtZW50RWxlbWVudCApICYmXG5cdFx0XHRcdGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSB7XG5cblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIG9mZnNldFBhcmVudCAmJiBvZmZzZXRQYXJlbnQgIT09IGVsZW0gJiYgb2Zmc2V0UGFyZW50Lm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIEluY29ycG9yYXRlIGJvcmRlcnMgaW50byBpdHMgb2Zmc2V0LCBzaW5jZSB0aGV5IGFyZSBvdXRzaWRlIGl0cyBjb250ZW50IG9yaWdpblxuXHRcdFx0XHRwYXJlbnRPZmZzZXQgPSBqUXVlcnkoIG9mZnNldFBhcmVudCApLm9mZnNldCgpO1xuXHRcdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJib3JkZXJUb3BXaWR0aFwiLCB0cnVlICk7XG5cdFx0XHRcdHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJib3JkZXJMZWZ0V2lkdGhcIiwgdHJ1ZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFN1YnRyYWN0IHBhcmVudCBvZmZzZXRzIGFuZCBlbGVtZW50IG1hcmdpbnNcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luVG9wXCIsIHRydWUgKSxcblx0XHRcdGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnQgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiwgdHJ1ZSApXG5cdFx0fTtcblx0fSxcblxuXHQvLyBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBkb2N1bWVudEVsZW1lbnQgaW4gdGhlIGZvbGxvd2luZyBjYXNlczpcblx0Ly8gMSkgRm9yIHRoZSBlbGVtZW50IGluc2lkZSB0aGUgaWZyYW1lIHdpdGhvdXQgb2Zmc2V0UGFyZW50LCB0aGlzIG1ldGhvZCB3aWxsIHJldHVyblxuXHQvLyAgICBkb2N1bWVudEVsZW1lbnQgb2YgdGhlIHBhcmVudCB3aW5kb3dcblx0Ly8gMikgRm9yIHRoZSBoaWRkZW4gb3IgZGV0YWNoZWQgZWxlbWVudFxuXHQvLyAzKSBGb3IgYm9keSBvciBodG1sIGVsZW1lbnQsIGkuZS4gaW4gY2FzZSBvZiB0aGUgaHRtbCBub2RlIC0gaXQgd2lsbCByZXR1cm4gaXRzZWxmXG5cdC8vXG5cdC8vIGJ1dCB0aG9zZSBleGNlcHRpb25zIHdlcmUgbmV2ZXIgcHJlc2VudGVkIGFzIGEgcmVhbCBsaWZlIHVzZS1jYXNlc1xuXHQvLyBhbmQgbWlnaHQgYmUgY29uc2lkZXJlZCBhcyBtb3JlIHByZWZlcmFibGUgcmVzdWx0cy5cblx0Ly9cblx0Ly8gVGhpcyBsb2dpYywgaG93ZXZlciwgaXMgbm90IGd1YXJhbnRlZWQgYW5kIGNhbiBjaGFuZ2UgYXQgYW55IHBvaW50IGluIHRoZSBmdXR1cmVcblx0b2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50O1xuXG5cdFx0XHR3aGlsZSAoIG9mZnNldFBhcmVudCAmJiBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwicG9zaXRpb25cIiApID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50RWxlbWVudDtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXG5cdFx0XHQvLyBDb2FsZXNjZSBkb2N1bWVudHMgYW5kIHdpbmRvd3Ncblx0XHRcdHZhciB3aW47XG5cdFx0XHRpZiAoIGlzV2luZG93KCBlbGVtICkgKSB7XG5cdFx0XHRcdHdpbiA9IGVsZW07XG5cdFx0XHR9IGVsc2UgaWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR3aW4gPSBlbGVtLmRlZmF1bHRWaWV3O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luLnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbi5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9O1xufSApO1xuXG4vLyBTdXBwb3J0OiBTYWZhcmkgPD03IC0gOS4xLCBDaHJvbWUgPD0zNyAtIDQ5XG4vLyBBZGQgdGhlIHRvcC9sZWZ0IGNzc0hvb2tzIHVzaW5nIGpRdWVyeS5mbi5wb3NpdGlvblxuLy8gV2Via2l0IGJ1ZzogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTI5MDg0XG4vLyBCbGluayBidWc6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU4OTM0N1xuLy8gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHBlcmNlbnQgd2hlbiBzcGVjaWZpZWQgZm9yIHRvcC9sZWZ0L2JvdHRvbS9yaWdodDtcbi8vIHJhdGhlciB0aGFuIG1ha2UgdGhlIGNzcyBtb2R1bGUgZGVwZW5kIG9uIHRoZSBvZmZzZXQgbW9kdWxlLCBqdXN0IGNoZWNrIGZvciBpdCBoZXJlXG5qUXVlcnkuZWFjaCggWyBcInRvcFwiLCBcImxlZnRcIiBdLCBmdW5jdGlvbiggaSwgcHJvcCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcm9wIF0gPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucGl4ZWxQb3NpdGlvbixcblx0XHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0XHRjb21wdXRlZCA9IGN1ckNTUyggZWxlbSwgcHJvcCApO1xuXG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSApO1xuXG5cbi8vIENyZWF0ZSBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aCwgb3V0ZXJIZWlnaHQgYW5kIG91dGVyV2lkdGggbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgSGVpZ2h0OiBcImhlaWdodFwiLCBXaWR0aDogXCJ3aWR0aFwiIH0sIGZ1bmN0aW9uKCBuYW1lLCB0eXBlICkge1xuXHRqUXVlcnkuZWFjaCggeyBwYWRkaW5nOiBcImlubmVyXCIgKyBuYW1lLCBjb250ZW50OiB0eXBlLCBcIlwiOiBcIm91dGVyXCIgKyBuYW1lIH0sXG5cdFx0ZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cblx0XHQvLyBNYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGhcblx0XHRqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHtcblx0XHRcdHZhciBjaGFpbmFibGUgPSBhcmd1bWVudHMubGVuZ3RoICYmICggZGVmYXVsdEV4dHJhIHx8IHR5cGVvZiBtYXJnaW4gIT09IFwiYm9vbGVhblwiICksXG5cdFx0XHRcdGV4dHJhID0gZGVmYXVsdEV4dHJhIHx8ICggbWFyZ2luID09PSB0cnVlIHx8IHZhbHVlID09PSB0cnVlID8gXCJtYXJnaW5cIiA6IFwiYm9yZGVyXCIgKTtcblxuXHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgZG9jO1xuXG5cdFx0XHRcdGlmICggaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vICQoIHdpbmRvdyApLm91dGVyV2lkdGgvSGVpZ2h0IHJldHVybiB3L2ggaW5jbHVkaW5nIHNjcm9sbGJhcnMgKGdoLTE3MjkpXG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmNOYW1lLmluZGV4T2YoIFwib3V0ZXJcIiApID09PSAwID9cblx0XHRcdFx0XHRcdGVsZW1bIFwiaW5uZXJcIiArIG5hbWUgXSA6XG5cdFx0XHRcdFx0XHRlbGVtLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsgXCJjbGllbnRcIiArIG5hbWUgXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBkb2N1bWVudCB3aWR0aCBvciBoZWlnaHRcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdGRvYyA9IGVsZW0uZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0XHRcdFx0Ly8gRWl0aGVyIHNjcm9sbFtXaWR0aC9IZWlnaHRdIG9yIG9mZnNldFtXaWR0aC9IZWlnaHRdIG9yIGNsaWVudFtXaWR0aC9IZWlnaHRdLFxuXHRcdFx0XHRcdC8vIHdoaWNoZXZlciBpcyBncmVhdGVzdFxuXHRcdFx0XHRcdHJldHVybiBNYXRoLm1heChcblx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJzY3JvbGxcIiArIG5hbWUgXSwgZG9jWyBcInNjcm9sbFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcIm9mZnNldFwiICsgbmFtZSBdLCBkb2NbIFwib2Zmc2V0XCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRkb2NbIFwiY2xpZW50XCIgKyBuYW1lIF1cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSApO1xuXHRcdH07XG5cdH0gKTtcbn0gKTtcblxuXG5qUXVlcnkuZWFjaCggKCBcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudVwiICkuc3BsaXQoIFwiIFwiICksXG5cdGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG5cdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG5cdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHR9O1xufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGhvdmVyOiBmdW5jdGlvbiggZm5PdmVyLCBmbk91dCApIHtcblx0XHRyZXR1cm4gdGhpcy5tb3VzZWVudGVyKCBmbk92ZXIgKS5tb3VzZWxlYXZlKCBmbk91dCB8fCBmbk92ZXIgKTtcblx0fVxufSApO1xuXG5cblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblxuXHRcdC8vICggbmFtZXNwYWNlICkgb3IgKCBzZWxlY3RvciwgdHlwZXMgWywgZm5dIClcblx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/XG5cdFx0XHR0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDpcblx0XHRcdHRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbiApO1xuXHR9XG59ICk7XG5cbi8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueVxuLy8gYXJndW1lbnRzLlxuLy8galF1ZXJ5LnByb3h5IGlzIGRlcHJlY2F0ZWQgdG8gcHJvbW90ZSBzdGFuZGFyZHMgKHNwZWNpZmljYWxseSBGdW5jdGlvbiNiaW5kKVxuLy8gSG93ZXZlciwgaXQgaXMgbm90IHNsYXRlZCBmb3IgcmVtb3ZhbCBhbnkgdGltZSBzb29uXG5qUXVlcnkucHJveHkgPSBmdW5jdGlvbiggZm4sIGNvbnRleHQgKSB7XG5cdHZhciB0bXAsIGFyZ3MsIHByb3h5O1xuXG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0dG1wID0gZm5bIGNvbnRleHQgXTtcblx0XHRjb250ZXh0ID0gZm47XG5cdFx0Zm4gPSB0bXA7XG5cdH1cblxuXHQvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuXHQvLyB0aGlzIHRocm93cyBhIFR5cGVFcnJvciwgYnV0IHdlIHdpbGwganVzdCByZXR1cm4gdW5kZWZpbmVkLlxuXHRpZiAoICFpc0Z1bmN0aW9uKCBmbiApICkge1xuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblxuXHQvLyBTaW11bGF0ZWQgYmluZFxuXHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAyICk7XG5cdHByb3h5ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGZuLmFwcGx5KCBjb250ZXh0IHx8IHRoaXMsIGFyZ3MuY29uY2F0KCBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSApICk7XG5cdH07XG5cblx0Ly8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkXG5cdHByb3h5Lmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCBqUXVlcnkuZ3VpZCsrO1xuXG5cdHJldHVybiBwcm94eTtcbn07XG5cbmpRdWVyeS5ob2xkUmVhZHkgPSBmdW5jdGlvbiggaG9sZCApIHtcblx0aWYgKCBob2xkICkge1xuXHRcdGpRdWVyeS5yZWFkeVdhaXQrKztcblx0fSBlbHNlIHtcblx0XHRqUXVlcnkucmVhZHkoIHRydWUgKTtcblx0fVxufTtcbmpRdWVyeS5pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmpRdWVyeS5wYXJzZUpTT04gPSBKU09OLnBhcnNlO1xualF1ZXJ5Lm5vZGVOYW1lID0gbm9kZU5hbWU7XG5qUXVlcnkuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5qUXVlcnkuaXNXaW5kb3cgPSBpc1dpbmRvdztcbmpRdWVyeS5jYW1lbENhc2UgPSBjYW1lbENhc2U7XG5qUXVlcnkudHlwZSA9IHRvVHlwZTtcblxualF1ZXJ5Lm5vdyA9IERhdGUubm93O1xuXG5qUXVlcnkuaXNOdW1lcmljID0gZnVuY3Rpb24oIG9iaiApIHtcblxuXHQvLyBBcyBvZiBqUXVlcnkgMy4wLCBpc051bWVyaWMgaXMgbGltaXRlZCB0b1xuXHQvLyBzdHJpbmdzIGFuZCBudW1iZXJzIChwcmltaXRpdmVzIG9yIG9iamVjdHMpXG5cdC8vIHRoYXQgY2FuIGJlIGNvZXJjZWQgdG8gZmluaXRlIG51bWJlcnMgKGdoLTI2NjIpXG5cdHZhciB0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApO1xuXHRyZXR1cm4gKCB0eXBlID09PSBcIm51bWJlclwiIHx8IHR5cGUgPT09IFwic3RyaW5nXCIgKSAmJlxuXG5cdFx0Ly8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKFwiXCIpXG5cdFx0Ly8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuXHRcdC8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTlxuXHRcdCFpc05hTiggb2JqIC0gcGFyc2VGbG9hdCggb2JqICkgKTtcbn07XG5cblxuXG5cbi8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdFxuLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4vLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG4vLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2Vcbi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXG4vLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblx0ZGVmaW5lKCBcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fSApO1xufVxuXG5cblxuXG52YXJcblxuXHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0X2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksXG5cblx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XyQgPSB3aW5kb3cuJDtcblxualF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0aWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy4kID0gXyQ7XG5cdH1cblxuXHRpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeTtcbn07XG5cbi8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG4vLyAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpXG4vLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpXG5pZiAoICFub0dsb2JhbCApIHtcblx0d2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0galF1ZXJ5O1xufVxuXG5cblxuXG5yZXR1cm4galF1ZXJ5O1xufSApO1xuIiwidmFyIF9QUk9GSUxFO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZUN0cmx7XG4gICAgY29uc3RydWN0b3IoJHNjb3BlKXtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgICAgICRzY29wZS5hY2NvdW50TmFtZT1cIkRvZG9sXCI7XG4gICAgfTtcblxuICAgIHN0YXRpYyBpbml0KCl7XG4gICAgICAgIF9QUk9GSUxFPSdET09EOycgXG4gICAgICAgIHJldHVybiBfUFJPRklMRTtcbiAgICB9XG4gICAgXG59IiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgeyBleHRlbmQsIHNpbGVudFJlamVjdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXMgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbnZhciBSZWplY3RUeXBlO1xuKGZ1bmN0aW9uIChSZWplY3RUeXBlKSB7XG4gICAgLyoqXG4gICAgICogQSBuZXcgdHJhbnNpdGlvbiBzdXBlcnNlZGVkIHRoaXMgb25lLlxuICAgICAqXG4gICAgICogV2hpbGUgdGhpcyB0cmFuc2l0aW9uIHdhcyBydW5uaW5nLCBhIG5ldyB0cmFuc2l0aW9uIHN0YXJ0ZWQuXG4gICAgICogVGhpcyB0cmFuc2l0aW9uIGlzIGNhbmNlbGxlZCBiZWNhdXNlIGl0IHdhcyBzdXBlcnNlZGVkIGJ5IG5ldyB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIlNVUEVSU0VERURcIl0gPSAyXSA9IFwiU1VQRVJTRURFRFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2l0aW9uIHdhcyBhYm9ydGVkXG4gICAgICpcbiAgICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgYWJvcnRlZCBieSBhIGhvb2sgd2hpY2ggcmV0dXJuZWQgYGZhbHNlYFxuICAgICAqL1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIkFCT1JURURcIl0gPSAzXSA9IFwiQUJPUlRFRFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2l0aW9uIHdhcyBpbnZhbGlkXG4gICAgICpcbiAgICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgbmV2ZXIgc3RhcnRlZCBiZWNhdXNlIGl0IHdhcyBpbnZhbGlkXG4gICAgICovXG4gICAgUmVqZWN0VHlwZVtSZWplY3RUeXBlW1wiSU5WQUxJRFwiXSA9IDRdID0gXCJJTlZBTElEXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zaXRpb24gd2FzIGlnbm9yZWRcbiAgICAgKlxuICAgICAqIFRoZSB0cmFuc2l0aW9uIHdhcyBpZ25vcmVkIGJlY2F1c2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QuXG4gICAgICpcbiAgICAgKiBFaXRoZXI6XG4gICAgICpcbiAgICAgKiAtIFRoZSB0cmFuc2l0aW9uIGlzIHRhcmdldGluZyB0aGUgY3VycmVudCBzdGF0ZSBhbmQgcGFyYW1ldGVyIHZhbHVlc1xuICAgICAqIC0gVGhlIHRyYW5zaXRpb24gaXMgdGFyZ2V0aW5nIHRoZSBzYW1lIHN0YXRlIGFuZCBwYXJhbWV0ZXIgdmFsdWVzIGFzIHRoZSBjdXJyZW50bHkgcnVubmluZyB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIklHTk9SRURcIl0gPSA1XSA9IFwiSUdOT1JFRFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2l0aW9uIGVycm9yZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIGdlbmVyYWxseSBtZWFucyBhIGhvb2sgdGhyZXcgYW4gZXJyb3Igb3IgcmV0dXJuZWQgYSByZWplY3RlZCBwcm9taXNlXG4gICAgICovXG4gICAgUmVqZWN0VHlwZVtSZWplY3RUeXBlW1wiRVJST1JcIl0gPSA2XSA9IFwiRVJST1JcIjtcbn0pKFJlamVjdFR5cGUgfHwgKFJlamVjdFR5cGUgPSB7fSkpO1xuZXhwb3J0IHsgUmVqZWN0VHlwZSB9O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBpZCA9IDA7XG52YXIgUmVqZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlamVjdGlvbih0eXBlLCBtZXNzYWdlLCBkZXRhaWwpIHtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy4kaWQgPSBpZCsrO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLmRldGFpbCA9IGRldGFpbDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqIGlzIGEgcmVqZWN0ZWQgcHJvbWlzZSBjcmVhdGVkIGZyb20gdGhlIGBhc1Byb21pc2VgIGZhY3RvcnkgKi9cbiAgICBSZWplY3Rpb24uaXNSZWplY3Rpb25Qcm9taXNlID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gJ2Z1bmN0aW9uJyAmJiBpcyhSZWplY3Rpb24pKG9iai5fdHJhbnNpdGlvblJlamVjdGlvbik7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gdHJhbnNpdGlvbiBzdXBlcnNlZGVkICovXG4gICAgUmVqZWN0aW9uLnN1cGVyc2VkZWQgPSBmdW5jdGlvbiAoZGV0YWlsLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIHN1cGVyc2VkZWQgYnkgYSBkaWZmZXJlbnQgdHJhbnNpdGlvbic7XG4gICAgICAgIHZhciByZWplY3Rpb24gPSBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuU1VQRVJTRURFRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWRpcmVjdGVkKSB7XG4gICAgICAgICAgICByZWplY3Rpb24ucmVkaXJlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlamVjdGlvbjtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byByZWRpcmVjdGVkIHRyYW5zaXRpb24gKi9cbiAgICBSZWplY3Rpb24ucmVkaXJlY3RlZCA9IGZ1bmN0aW9uIChkZXRhaWwpIHtcbiAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5zdXBlcnNlZGVkKGRldGFpbCwgeyByZWRpcmVjdGVkOiB0cnVlIH0pO1xuICAgIH07XG4gICAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGludmFsaWQgdHJhbnNpdGlvbiAqL1xuICAgIFJlamVjdGlvbi5pbnZhbGlkID0gZnVuY3Rpb24gKGRldGFpbCkge1xuICAgICAgICB2YXIgbWVzc2FnZSA9ICdUaGlzIHRyYW5zaXRpb24gaXMgaW52YWxpZCc7XG4gICAgICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuSU5WQUxJRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byBpZ25vcmVkIHRyYW5zaXRpb24gKi9cbiAgICBSZWplY3Rpb24uaWdub3JlZCA9IGZ1bmN0aW9uIChkZXRhaWwpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnVGhlIHRyYW5zaXRpb24gd2FzIGlnbm9yZWQnO1xuICAgICAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLklHTk9SRUQsIG1lc3NhZ2UsIGRldGFpbCk7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gYWJvcnRlZCB0cmFuc2l0aW9uICovXG4gICAgUmVqZWN0aW9uLmFib3J0ZWQgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIGFib3J0ZWQnO1xuICAgICAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLkFCT1JURUQsIG1lc3NhZ2UsIGRldGFpbCk7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gYWJvcnRlZCB0cmFuc2l0aW9uICovXG4gICAgUmVqZWN0aW9uLmVycm9yZWQgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGVycm9yZWQnO1xuICAgICAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLkVSUk9SLCBtZXNzYWdlLCBkZXRhaWwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFJlamVjdGlvblxuICAgICAqXG4gICAgICogTm9ybWFsaXplcyBhIHZhbHVlIGFzIGEgUmVqZWN0aW9uLlxuICAgICAqIElmIHRoZSB2YWx1ZSBpcyBhbHJlYWR5IGEgUmVqZWN0aW9uLCByZXR1cm5zIGl0LlxuICAgICAqIE90aGVyd2lzZSwgd3JhcHMgYW5kIHJldHVybnMgdGhlIHZhbHVlIGFzIGEgUmVqZWN0aW9uIChSZWplY3Rpb24gdHlwZTogRVJST1IpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYGRldGFpbGAgaWYgaXQgaXMgYWxyZWFkeSBhIGBSZWplY3Rpb25gLCBlbHNlIHJldHVybnMgYW4gRVJST1IgUmVqZWN0aW9uLlxuICAgICAqL1xuICAgIFJlamVjdGlvbi5ub3JtYWxpemUgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XG4gICAgICAgIHJldHVybiBpcyhSZWplY3Rpb24pKGRldGFpbCkgPyBkZXRhaWwgOiBSZWplY3Rpb24uZXJyb3JlZChkZXRhaWwpO1xuICAgIH07XG4gICAgUmVqZWN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRldGFpbFN0cmluZyA9IGZ1bmN0aW9uIChkKSB7IHJldHVybiAoZCAmJiBkLnRvU3RyaW5nICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nID8gZC50b1N0cmluZygpIDogc3RyaW5naWZ5KGQpKTsgfTtcbiAgICAgICAgdmFyIGRldGFpbCA9IGRldGFpbFN0cmluZyh0aGlzLmRldGFpbCk7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsICRpZCA9IF9hLiRpZCwgdHlwZSA9IF9hLnR5cGUsIG1lc3NhZ2UgPSBfYS5tZXNzYWdlO1xuICAgICAgICByZXR1cm4gXCJUcmFuc2l0aW9uIFJlamVjdGlvbigkaWQ6IFwiICsgJGlkICsgXCIgdHlwZTogXCIgKyB0eXBlICsgXCIsIG1lc3NhZ2U6IFwiICsgbWVzc2FnZSArIFwiLCBkZXRhaWw6IFwiICsgZGV0YWlsICsgXCIpXCI7XG4gICAgfTtcbiAgICBSZWplY3Rpb24ucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGV4dGVuZChzaWxlbnRSZWplY3Rpb24odGhpcyksIHsgX3RyYW5zaXRpb25SZWplY3Rpb246IHRoaXMgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVqZWN0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFJlamVjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVqZWN0RmFjdG9yeS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIGNvcmVcbiAqL1xuLyoqXG4gKiBNYXRjaGVzIHN0YXRlIG5hbWVzIHVzaW5nIGdsb2ItbGlrZSBwYXR0ZXJuIHN0cmluZ3MuXG4gKlxuICogR2xvYnMgY2FuIGJlIHVzZWQgaW4gc3BlY2lmaWMgQVBJcyBpbmNsdWRpbmc6XG4gKlxuICogLSBbW1N0YXRlU2VydmljZS5pc11dXG4gKiAtIFtbU3RhdGVTZXJ2aWNlLmluY2x1ZGVzXV1cbiAqIC0gVGhlIGZpcnN0IGFyZ3VtZW50IHRvIEhvb2sgUmVnaXN0cmF0aW9uIGZ1bmN0aW9ucyBsaWtlIFtbVHJhbnNpdGlvblNlcnZpY2Uub25TdGFydF1dXG4gKiAgICAtIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBhbmQgW1tIb29rTWF0Y2hDcml0ZXJpb25dXVxuICpcbiAqIEEgYEdsb2JgIHN0cmluZyBpcyBhIHBhdHRlcm4gd2hpY2ggbWF0Y2hlcyBzdGF0ZSBuYW1lcy5cbiAqIE5lc3RlZCBzdGF0ZSBuYW1lcyBhcmUgc3BsaXQgaW50byBzZWdtZW50cyAoc2VwYXJhdGVkIGJ5IGEgZG90KSB3aGVuIHByb2Nlc3NpbmcuXG4gKiBUaGUgc3RhdGUgbmFtZWQgYGZvby5iYXIuYmF6YCBpcyBzcGxpdCBpbnRvIHRocmVlIHNlZ21lbnRzIFsnZm9vJywgJ2JhcicsICdiYXonXVxuICpcbiAqIEdsb2JzIHdvcmsgYWNjb3JkaW5nIHRvIHRoZSBmb2xsb3dpbmcgcnVsZXM6XG4gKlxuICogIyMjIEV4YWN0IG1hdGNoOlxuICpcbiAqIFRoZSBnbG9iIGAnQS5CJ2AgbWF0Y2hlcyB0aGUgc3RhdGUgbmFtZWQgZXhhY3RseSBgJ0EuQidgLlxuICpcbiAqIHwgR2xvYiAgICAgICAgfE1hdGNoZXMgc3RhdGVzIG5hbWVkfERvZXMgbm90IG1hdGNoIHN0YXRlIG5hbWVkfFxuICogfDotLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IGAnQSdgICAgICAgIHwgYCdBJ2AgICAgICAgICAgICAgICB8IGAnQidgICwgYCdBLkMnYCAgICAgIHxcbiAqIHwgYCdBLkInYCAgICAgfCBgJ0EuQidgICAgICAgICAgICAgIHwgYCdBJ2AgLCBgJ0EuQi5DJ2AgICAgfFxuICogfCBgJ2ZvbydgICAgICB8IGAnZm9vJ2AgICAgICAgICAgICAgfCBgJ0ZPTydgICwgYCdmb28uYmFyJ2B8XG4gKlxuICogIyMjIFNpbmdsZSBzdGFyIChgKmApXG4gKlxuICogQSBzaW5nbGUgc3RhciAoYCpgKSBpcyBhIHdpbGRjYXJkIHRoYXQgbWF0Y2hlcyBleGFjdGx5IG9uZSBzZWdtZW50LlxuICpcbiAqIHwgR2xvYiAgICAgICAgfE1hdGNoZXMgc3RhdGVzIG5hbWVkICB8RG9lcyBub3QgbWF0Y2ggc3RhdGUgbmFtZWQgfFxuICogfDotLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IGAnKidgICAgICAgIHwgYCdBJ2AgLCBgJ1onYCAgICAgICAgfCBgJ0EuQidgICwgYCdaLlkuWCdgICAgICAgIHxcbiAqIHwgYCdBLionYCAgICAgfCBgJ0EuQidgICwgYCdBLkMnYCAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgICAgICAgfFxuICogfCBgJ0EuKi4qJ2AgICB8IGAnQS5CLkMnYCAsIGAnQS5YLlknYHwgYCdBJ2AsIGAnQS5CJ2AgLCBgJ1ouWS5YJ2B8XG4gKlxuICogIyMjIERvdWJsZSBzdGFyIChgKipgKVxuICpcbiAqIEEgZG91YmxlIHN0YXIgKGAnKionYCkgaXMgYSB3aWxkY2FyZCB0aGF0IG1hdGNoZXMgKnplcm8gb3IgbW9yZSBzZWdtZW50cypcbiAqXG4gKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxEb2VzIG5vdCBtYXRjaCBzdGF0ZSBuYW1lZCAgICAgICAgIHxcbiAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJyoqJ2AgICAgICB8IGAnQSdgICwgYCdBLkInYCwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgICB8IChtYXRjaGVzIGFsbCBzdGF0ZXMpICAgICAgICAgICAgICB8XG4gKiB8IGAnQS4qKidgICAgIHwgYCdBJ2AgLCBgJ0EuQidgICwgYCdBLkMuWCdgICAgICAgICAgICAgICAgICAgIHwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYCcqKi5YJ2AgICAgfCBgJ1gnYCAsIGAnQS5YJ2AgLCBgJ1ouWS5YJ2AgICAgICAgICAgICAgICAgICAgfCBgJ0EnYCAsIGAnQS5sb2dpbi5aJ2AgICAgICAgICAgICAgfFxuICogfCBgJ0EuKiouWCdgICB8IGAnQS5YJ2AgLCBgJ0EuQi5YJ2AgLCBgJ0EuQi5DLlgnYCAgICAgICAgICAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgICAgICAgICAgICAgICB8XG4gKlxuICovXG52YXIgR2xvYiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHbG9iKHRleHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5nbG9iID0gdGV4dC5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgcmVnZXhwU3RyaW5nID0gdGhpcy50ZXh0XG4gICAgICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc2VnKSB7XG4gICAgICAgICAgICBpZiAoc2VnID09PSAnKionKVxuICAgICAgICAgICAgICAgIHJldHVybiAnKD86fCg/OlxcXFwuW14uXSopKiknO1xuICAgICAgICAgICAgaWYgKHNlZyA9PT0gJyonKVxuICAgICAgICAgICAgICAgIHJldHVybiAnXFxcXC5bXi5dKic7XG4gICAgICAgICAgICByZXR1cm4gJ1xcXFwuJyArIHNlZztcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgICAgdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKCdeJyArIHJlZ2V4cFN0cmluZyArICckJyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBoYXMgZ2xvYi1saWtlIGNoYXJhY3RlcnMgaW4gaXQgKi9cbiAgICBHbG9iLmlzID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgcmV0dXJuICEhL1shLCpdKy8uZXhlYyh0ZXh0KTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgZ2xvYiBmcm9tIHRoZSBzdHJpbmcsIG9yIG51bGwgaWYgdGhlIHN0cmluZyBpc24ndCBHbG9iLWxpa2UgKi9cbiAgICBHbG9iLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICByZXR1cm4gR2xvYi5pcyh0ZXh0KSA/IG5ldyBHbG9iKHRleHQpIDogbnVsbDtcbiAgICB9O1xuICAgIEdsb2IucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdleHAudGVzdCgnLicgKyBuYW1lKTtcbiAgICB9O1xuICAgIHJldHVybiBHbG9iO1xufSgpKTtcbmV4cG9ydCB7IEdsb2IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2IuanMubWFwIiwiLyoqIEBtb2R1bGUgY29tbW9uICovXG5pbXBvcnQgeyBwdXNoVG8gfSBmcm9tICcuL2NvbW1vbic7XG52YXIgUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVldWUoX2l0ZW1zLCBfbGltaXQpIHtcbiAgICAgICAgaWYgKF9pdGVtcyA9PT0gdm9pZCAwKSB7IF9pdGVtcyA9IFtdOyB9XG4gICAgICAgIGlmIChfbGltaXQgPT09IHZvaWQgMCkgeyBfbGltaXQgPSBudWxsOyB9XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gX2l0ZW1zO1xuICAgICAgICB0aGlzLl9saW1pdCA9IF9saW1pdDtcbiAgICAgICAgdGhpcy5fZXZpY3RMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5vbkV2aWN0ID0gcHVzaFRvKHRoaXMuX2V2aWN0TGlzdGVuZXJzKTtcbiAgICB9XG4gICAgUXVldWUucHJvdG90eXBlLmVucXVldWUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgaWYgKHRoaXMuX2xpbWl0ICYmIGl0ZW1zLmxlbmd0aCA+IHRoaXMuX2xpbWl0KVxuICAgICAgICAgICAgdGhpcy5ldmljdCgpO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5ldmljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9pdGVtcy5zaGlmdCgpO1xuICAgICAgICB0aGlzLl9ldmljdExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4oaXRlbSk7IH0pO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zaXplKCkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMuc3BsaWNlKDAsIDEpWzBdO1xuICAgIH07XG4gICAgUXVldWUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2l0ZW1zO1xuICAgICAgICB0aGlzLl9pdGVtcyA9IFtdO1xuICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoO1xuICAgIH07XG4gICAgUXVldWUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBpZHggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xuICAgICAgICByZXR1cm4gaWR4ID4gLTEgJiYgdGhpcy5faXRlbXMuc3BsaWNlKGlkeCwgMSlbMF07XG4gICAgfTtcbiAgICBRdWV1ZS5wcm90b3R5cGUucGVla1RhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGggLSAxXTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5wZWVrSGVhZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSgpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zWzBdO1xuICAgIH07XG4gICAgcmV0dXJuIFF1ZXVlO1xufSgpKTtcbmV4cG9ydCB7IFF1ZXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWV1ZS5qcy5tYXAiLCIvKipcbiAqIEZ1bmN0aW9ucyB0aGF0IG1hbmlwdWxhdGUgc3RyaW5nc1xuICpcbiAqIEFsdGhvdWdoIHRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIHRoZXkgYXJlIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgbm90aWNlLlxuICpcbiAqIEBtb2R1bGUgY29tbW9uX3N0cmluZ3NcbiAqLyAvKiogKi9cbmltcG9ydCB7IGlzQXJyYXksIGlzRnVuY3Rpb24sIGlzSW5qZWN0YWJsZSwgaXNOdWxsLCBpc09iamVjdCwgaXNQcm9taXNlLCBpc1N0cmluZywgaXNVbmRlZmluZWQgfSBmcm9tICcuL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUmVqZWN0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9yZWplY3RGYWN0b3J5JztcbmltcG9ydCB7IGlkZW50aXR5LCBwdXNoUiwgdGFpbCB9IGZyb20gJy4vY29tbW9uJztcbmltcG9ydCB7IHBhdHRlcm4sIHZhbCB9IGZyb20gJy4vaG9mJztcbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyBzaG9ydGVuZWQgdG8gYSBtYXhpbXVtIGxlbmd0aFxuICpcbiAqIElmIHRoZSBzdHJpbmcgaXMgYWxyZWFkeSBsZXNzIHRoYW4gdGhlIGBtYXhgIGxlbmd0aCwgcmV0dXJuIHRoZSBzdHJpbmcuXG4gKiBFbHNlIHJldHVybiB0aGUgc3RyaW5nLCBzaG9ydGVuZWQgdG8gYG1heCAtIDNgIGFuZCBhcHBlbmQgdGhyZWUgZG90cyAoXCIuLi5cIikuXG4gKlxuICogQHBhcmFtIG1heCB0aGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIHN0cmluZyB0byByZXR1cm5cbiAqIEBwYXJhbSBzdHIgdGhlIGlucHV0IHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWF4TGVuZ3RoKG1heCwgc3RyKSB7XG4gICAgaWYgKHN0ci5sZW5ndGggPD0gbWF4KVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIG1heCAtIDMpICsgJy4uLic7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcsIHdpdGggc3BhY2VzIGFkZGVkIHRvIHRoZSBlbmQsIHVwIHRvIGEgZGVzaXJlZCBzdHIgbGVuZ3RoXG4gKlxuICogSWYgdGhlIHN0cmluZyBpcyBhbHJlYWR5IGxvbmdlciB0aGFuIHRoZSBkZXNpcmVkIGxlbmd0aCwgcmV0dXJuIHRoZSBzdHJpbmcuXG4gKiBFbHNlIHJldHVybnMgdGhlIHN0cmluZywgd2l0aCBleHRyYSBzcGFjZXMgb24gdGhlIGVuZCwgc3VjaCB0aGF0IGl0IHJlYWNoZXMgYGxlbmd0aGAgY2hhcmFjdGVycy5cbiAqXG4gKiBAcGFyYW0gbGVuZ3RoIHRoZSBkZXNpcmVkIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHRvIHJldHVyblxuICogQHBhcmFtIHN0ciB0aGUgaW5wdXQgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYWRTdHJpbmcobGVuZ3RoLCBzdHIpIHtcbiAgICB3aGlsZSAoc3RyLmxlbmd0aCA8IGxlbmd0aClcbiAgICAgICAgc3RyICs9ICcgJztcbiAgICByZXR1cm4gc3RyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGtlYm9iU3RyaW5nKGNhbWVsQ2FzZSkge1xuICAgIHJldHVybiBjYW1lbENhc2VcbiAgICAgICAgLnJlcGxhY2UoL14oW0EtWl0pLywgZnVuY3Rpb24gKCQxKSB7IHJldHVybiAkMS50b0xvd2VyQ2FzZSgpOyB9KSAvLyByZXBsYWNlIGZpcnN0IGNoYXJcbiAgICAgICAgLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24gKCQxKSB7IHJldHVybiAnLScgKyAkMS50b0xvd2VyQ2FzZSgpOyB9KTsgLy8gcmVwbGFjZSByZXN0XG59XG5leHBvcnQgZnVuY3Rpb24gZnVuY3Rpb25Ub1N0cmluZyhmbikge1xuICAgIHZhciBmblN0ciA9IGZuVG9TdHJpbmcoZm4pO1xuICAgIHZhciBuYW1lZEZ1bmN0aW9uTWF0Y2ggPSBmblN0ci5tYXRjaCgvXihmdW5jdGlvbiBbXiBdK1xcKFteKV0qXFwpKS8pO1xuICAgIHZhciB0b1N0ciA9IG5hbWVkRnVuY3Rpb25NYXRjaCA/IG5hbWVkRnVuY3Rpb25NYXRjaFsxXSA6IGZuU3RyO1xuICAgIHZhciBmbk5hbWUgPSBmblsnbmFtZSddIHx8ICcnO1xuICAgIGlmIChmbk5hbWUgJiYgdG9TdHIubWF0Y2goL2Z1bmN0aW9uIFxcKC8pKSB7XG4gICAgICAgIHJldHVybiAnZnVuY3Rpb24gJyArIGZuTmFtZSArIHRvU3RyLnN1YnN0cig5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRvU3RyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZuVG9TdHJpbmcoZm4pIHtcbiAgICB2YXIgX2ZuID0gaXNBcnJheShmbikgPyBmbi5zbGljZSgtMSlbMF0gOiBmbjtcbiAgICByZXR1cm4gKF9mbiAmJiBfZm4udG9TdHJpbmcoKSkgfHwgJ3VuZGVmaW5lZCc7XG59XG52YXIgaXNSZWplY3Rpb24gPSBSZWplY3Rpb24uaXNSZWplY3Rpb25Qcm9taXNlO1xudmFyIGhhc1RvU3RyaW5nID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBpc09iamVjdChvYmopICYmICFpc0FycmF5KG9iaikgJiYgb2JqLmNvbnN0cnVjdG9yICE9PSBPYmplY3QgJiYgaXNGdW5jdGlvbihvYmoudG9TdHJpbmcpO1xufTtcbnZhciBzdHJpbmdpZnlQYXR0ZXJuID0gcGF0dGVybihbXG4gICAgW2lzVW5kZWZpbmVkLCB2YWwoJ3VuZGVmaW5lZCcpXSxcbiAgICBbaXNOdWxsLCB2YWwoJ251bGwnKV0sXG4gICAgW2lzUHJvbWlzZSwgdmFsKCdbUHJvbWlzZV0nKV0sXG4gICAgW2lzUmVqZWN0aW9uLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5fdHJhbnNpdGlvblJlamVjdGlvbi50b1N0cmluZygpOyB9XSxcbiAgICBbaGFzVG9TdHJpbmcsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRvU3RyaW5nKCk7IH1dLFxuICAgIFtpc0luamVjdGFibGUsIGZ1bmN0aW9uVG9TdHJpbmddLFxuICAgIFt2YWwodHJ1ZSksIGlkZW50aXR5XSxcbl0pO1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeShvKSB7XG4gICAgdmFyIHNlZW4gPSBbXTtcbiAgICBmdW5jdGlvbiBmb3JtYXQodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKHNlZW4uaW5kZXhPZih2YWx1ZSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiAnW2NpcmN1bGFyIHJlZl0nO1xuICAgICAgICAgICAgc2Vlbi5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyaW5naWZ5UGF0dGVybih2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc1VuZGVmaW5lZChvKSkge1xuICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBJRSAmIEVkZ2UgU3BlYyBpbmNvbXBhdGliaWxpdHkgd2hlcmUgcmVwbGFjZXIgZnVuY3Rpb24gd291bGQgbm90IGJlIGNhbGxlZCB3aGVuIEpTT04uc3RyaW5naWZ5XG4gICAgICAgIC8vIGlzIGdpdmVuIGB1bmRlZmluZWRgIGFzIHZhbHVlLiBUbyB3b3JrIGFyb3VuZCB0aGF0LCB3ZSBzaW1wbHkgZGV0ZWN0IGB1bmRlZmluZWRgIGFuZCBiYWlsIG91dCBlYXJseSBieVxuICAgICAgICAvLyBtYW51YWxseSBzdHJpbmdpZnlpbmcgaXQuXG4gICAgICAgIHJldHVybiBmb3JtYXQobyk7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgeyByZXR1cm4gZm9ybWF0KHZhbHVlKTsgfSkucmVwbGFjZSgvXFxcXFwiL2csICdcIicpO1xufVxuLyoqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHNwbGl0cyBhIHN0cmluZyBvbiBhIGNoYXJhY3RlciBvciBzdWJzdHJpbmcgKi9cbmV4cG9ydCB2YXIgYmVmb3JlQWZ0ZXJTdWJzdHIgPSBmdW5jdGlvbiAoY2hhcikgeyByZXR1cm4gZnVuY3Rpb24gKHN0cikge1xuICAgIGlmICghc3RyKVxuICAgICAgICByZXR1cm4gWycnLCAnJ107XG4gICAgdmFyIGlkeCA9IHN0ci5pbmRleE9mKGNoYXIpO1xuICAgIGlmIChpZHggPT09IC0xKVxuICAgICAgICByZXR1cm4gW3N0ciwgJyddO1xuICAgIHJldHVybiBbc3RyLnN1YnN0cigwLCBpZHgpLCBzdHIuc3Vic3RyKGlkeCArIDEpXTtcbn07IH07XG5leHBvcnQgdmFyIGhvc3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oPzpbYS16XSs6KT8vL1teL10rLycpO1xuZXhwb3J0IHZhciBzdHJpcExhc3RQYXRoRWxlbWVudCA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXC9bXi9dKiQvLCAnJyk7IH07XG5leHBvcnQgdmFyIHNwbGl0SGFzaCA9IGJlZm9yZUFmdGVyU3Vic3RyKCcjJyk7XG5leHBvcnQgdmFyIHNwbGl0UXVlcnkgPSBiZWZvcmVBZnRlclN1YnN0cignPycpO1xuZXhwb3J0IHZhciBzcGxpdEVxdWFsID0gYmVmb3JlQWZ0ZXJTdWJzdHIoJz0nKTtcbmV4cG9ydCB2YXIgdHJpbUhhc2hWYWwgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiAoc3RyID8gc3RyLnJlcGxhY2UoL14jLywgJycpIDogJycpOyB9O1xuLyoqXG4gKiBTcGxpdHMgb24gYSBkZWxpbWl0ZXIsIGJ1dCByZXR1cm5zIHRoZSBkZWxpbWl0ZXJzIGluIHRoZSBhcnJheVxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiB2YXIgc3BsaXRPblNsYXNoZXMgPSBzcGxpdE9uRGVsaW0oJy8nKTtcbiAqIHNwbGl0T25TbGFzaGVzKFwiL2Zvb1wiKTsgLy8gW1wiL1wiLCBcImZvb1wiXVxuICogc3BsaXRPblNsYXNoZXMoXCIvZm9vL1wiKTsgLy8gW1wiL1wiLCBcImZvb1wiLCBcIi9cIl1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRPbkRlbGltKGRlbGltKSB7XG4gICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgnKCcgKyBkZWxpbSArICcpJywgJ2cnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyLnNwbGl0KHJlKS5maWx0ZXIoaWRlbnRpdHkpOyB9O1xufVxuLyoqXG4gKiBSZWR1Y2UgZm4gdGhhdCBqb2lucyBuZWlnaGJvcmluZyBzdHJpbmdzXG4gKlxuICogR2l2ZW4gYW4gYXJyYXkgb2Ygc3RyaW5ncywgcmV0dXJucyBhIG5ldyBhcnJheVxuICogd2hlcmUgYWxsIG5laWdoYm9yaW5nIHN0cmluZ3MgaGF2ZSBiZWVuIGpvaW5lZC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogbGV0IGFyciA9IFtcImZvb1wiLCBcImJhclwiLCAxLCBcImJhelwiLCBcIlwiLCBcInF1eFwiIF07XG4gKiBhcnIucmVkdWNlKGpvaW5OZWlnaGJvcnNSLCBbXSkgLy8gW1wiZm9vYmFyXCIsIDEsIFwiYmF6cXV4XCIgXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBqb2luTmVpZ2hib3JzUihhY2MsIHgpIHtcbiAgICBpZiAoaXNTdHJpbmcodGFpbChhY2MpKSAmJiBpc1N0cmluZyh4KSlcbiAgICAgICAgcmV0dXJuIGFjYy5zbGljZSgwLCAtMSkuY29uY2F0KHRhaWwoYWNjKSArIHgpO1xuICAgIHJldHVybiBwdXNoUihhY2MsIHgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5ncy5qcy5tYXAiLCIvKipcbiAqICMgVHJhbnNpdGlvbiB0cmFjaW5nIChkZWJ1ZylcbiAqXG4gKiBFbmFibGUgdHJhbnNpdGlvbiB0cmFjaW5nIHRvIHByaW50IHRyYW5zaXRpb24gaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUsXG4gKiBpbiBvcmRlciB0byBoZWxwIGRlYnVnIHlvdXIgYXBwbGljYXRpb24uXG4gKiBUcmFjaW5nIGxvZ3MgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBUcmFuc2l0aW9uIHRvIHlvdXIgY29uc29sZS5cbiAqXG4gKiBUbyBlbmFibGUgdHJhY2luZywgaW1wb3J0IHRoZSBbW1RyYWNlXV0gc2luZ2xldG9uIGFuZCBlbmFibGUgb25lIG9yIG1vcmUgY2F0ZWdvcmllcy5cbiAqXG4gKiAjIyMgRVM2XG4gKiBgYGBqc1xuICogaW1wb3J0IHt0cmFjZX0gZnJvbSBcIkB1aXJvdXRlci9jb3JlXCI7XG4gKiB0cmFjZS5lbmFibGUoMSwgNSk7IC8vIFRSQU5TSVRJT04gYW5kIFZJRVdDT05GSUdcbiAqIGBgYFxuICpcbiAqICMjIyBDSlNcbiAqIGBgYGpzXG4gKiBsZXQgdHJhY2UgPSByZXF1aXJlKFwiQHVpcm91dGVyL2NvcmVcIikudHJhY2U7XG4gKiB0cmFjZS5lbmFibGUoXCJUUkFOU0lUSU9OXCIsIFwiVklFV0NPTkZJR1wiKTtcbiAqIGBgYFxuICpcbiAqICMjIyBHbG9iYWxzXG4gKiBgYGBqc1xuICogbGV0IHRyYWNlID0gd2luZG93W1wiQHVpcm91dGVyL2NvcmVcIl0udHJhY2U7XG4gKiB0cmFjZS5lbmFibGUoKTsgLy8gVHJhY2UgZXZlcnl0aGluZyAodmVyeSB2ZXJib3NlKVxuICogYGBgXG4gKlxuICogIyMjIEFuZ3VsYXIgMTpcbiAqIGBgYGpzXG4gKiBhcHAucnVuKCR0cmFjZSA9PiAkdHJhY2UuZW5hYmxlKCkpO1xuICogYGBgXG4gKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdHJhY2VcbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tY29uc29sZSAqL1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IGlzRnVuY3Rpb24sIGlzTnVtYmVyIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5LCBmdW5jdGlvblRvU3RyaW5nLCBtYXhMZW5ndGgsIHBhZFN0cmluZyB9IGZyb20gJy4vc3RyaW5ncyc7XG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gdWlWaWV3U3RyaW5nKHVpdmlldykge1xuICAgIGlmICghdWl2aWV3KVxuICAgICAgICByZXR1cm4gJ3VpLXZpZXcgKGRlZnVuY3QpJztcbiAgICB2YXIgc3RhdGUgPSB1aXZpZXcuY3JlYXRpb25Db250ZXh0ID8gdWl2aWV3LmNyZWF0aW9uQ29udGV4dC5uYW1lIHx8ICcocm9vdCknIDogJyhub25lKSc7XG4gICAgcmV0dXJuIFwiW3VpLXZpZXcjXCIgKyB1aXZpZXcuaWQgKyBcIiBcIiArIHVpdmlldy4kdHlwZSArIFwiOlwiICsgdWl2aWV3LmZxbiArIFwiIChcIiArIHVpdmlldy5uYW1lICsgXCJAXCIgKyBzdGF0ZSArIFwiKV1cIjtcbn1cbi8qKiBAaGlkZGVuICovXG52YXIgdmlld0NvbmZpZ1N0cmluZyA9IGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7XG4gICAgdmFyIHZpZXcgPSB2aWV3Q29uZmlnLnZpZXdEZWNsO1xuICAgIHZhciBzdGF0ZSA9IHZpZXcuJGNvbnRleHQubmFtZSB8fCAnKHJvb3QpJztcbiAgICByZXR1cm4gXCJbVmlldyNcIiArIHZpZXdDb25maWcuJGlkICsgXCIgZnJvbSAnXCIgKyBzdGF0ZSArIFwiJyBzdGF0ZV06IHRhcmdldCB1aS12aWV3OiAnXCIgKyB2aWV3LiR1aVZpZXdOYW1lICsgXCJAXCIgKyB2aWV3LiR1aVZpZXdDb250ZXh0QW5jaG9yICsgXCInXCI7XG59O1xuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZWRDYXQoaW5wdXQpIHtcbiAgICByZXR1cm4gaXNOdW1iZXIoaW5wdXQpID8gQ2F0ZWdvcnlbaW5wdXRdIDogQ2F0ZWdvcnlbQ2F0ZWdvcnlbaW5wdXRdXTtcbn1cbi8qKiBAaGlkZGVuICovXG52YXIgY29uc29sZUxvZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5sb2csIGNvbnNvbGUpO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBjb25zb2xldGFibGUgPSBpc0Z1bmN0aW9uKGNvbnNvbGUudGFibGUpID8gY29uc29sZS50YWJsZS5iaW5kKGNvbnNvbGUpIDogY29uc29sZUxvZy5iaW5kKGNvbnNvbGUpO1xuLyoqXG4gKiBUcmFjZSBjYXRlZ29yaWVzIEVudW1cbiAqXG4gKiBFbmFibGUgb3IgZGlzYWJsZSBhIGNhdGVnb3J5IHVzaW5nIFtbVHJhY2UuZW5hYmxlXV0gb3IgW1tUcmFjZS5kaXNhYmxlXV1cbiAqXG4gKiBgdHJhY2UuZW5hYmxlKENhdGVnb3J5LlRSQU5TSVRJT04pYFxuICpcbiAqIFRoZXNlIGNhbiBhbHNvIGJlIHByb3ZpZGVkIHVzaW5nIGEgbWF0Y2hpbmcgc3RyaW5nLCBvciBwb3NpdGlvbiBvcmRpbmFsXG4gKlxuICogYHRyYWNlLmVuYWJsZShcIlRSQU5TSVRJT05cIilgXG4gKlxuICogYHRyYWNlLmVuYWJsZSgxKWBcbiAqL1xudmFyIENhdGVnb3J5O1xuKGZ1bmN0aW9uIChDYXRlZ29yeSkge1xuICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiUkVTT0xWRVwiXSA9IDBdID0gXCJSRVNPTFZFXCI7XG4gICAgQ2F0ZWdvcnlbQ2F0ZWdvcnlbXCJUUkFOU0lUSU9OXCJdID0gMV0gPSBcIlRSQU5TSVRJT05cIjtcbiAgICBDYXRlZ29yeVtDYXRlZ29yeVtcIkhPT0tcIl0gPSAyXSA9IFwiSE9PS1wiO1xuICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiVUlWSUVXXCJdID0gM10gPSBcIlVJVklFV1wiO1xuICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiVklFV0NPTkZJR1wiXSA9IDRdID0gXCJWSUVXQ09ORklHXCI7XG59KShDYXRlZ29yeSB8fCAoQ2F0ZWdvcnkgPSB7fSkpO1xuZXhwb3J0IHsgQ2F0ZWdvcnkgfTtcbi8qKiBAaGlkZGVuICovXG52YXIgX3RpZCA9IHBhcnNlKCckaWQnKTtcbi8qKiBAaGlkZGVuICovXG52YXIgX3JpZCA9IHBhcnNlKCdyb3V0ZXIuJGlkJyk7XG4vKiogQGhpZGRlbiAqL1xudmFyIHRyYW5zTGJsID0gZnVuY3Rpb24gKHRyYW5zKSB7IHJldHVybiBcIlRyYW5zaXRpb24gI1wiICsgX3RpZCh0cmFucykgKyBcIi1cIiArIF9yaWQodHJhbnMpOyB9O1xuLyoqXG4gKiBQcmludHMgVUktUm91dGVyIFRyYW5zaXRpb24gdHJhY2UgaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUuXG4gKi9cbnZhciBUcmFjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uIFRyYWNlKCkge1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9lbmFibGVkID0ge307XG4gICAgICAgIHRoaXMuYXBwcm94aW1hdGVEaWdlc3RzID0gMDtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuX3NldCA9IGZ1bmN0aW9uIChlbmFibGVkLCBjYXRlZ29yaWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghY2F0ZWdvcmllcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBPYmplY3Qua2V5cyhDYXRlZ29yeSlcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrKSB7IHJldHVybiBwYXJzZUludChrLCAxMCk7IH0pXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaykgeyByZXR1cm4gIWlzTmFOKGspOyB9KVxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gQ2F0ZWdvcnlba2V5XTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0ZWdvcmllcy5tYXAobm9ybWFsaXplZENhdCkuZm9yRWFjaChmdW5jdGlvbiAoY2F0ZWdvcnkpIHsgcmV0dXJuIChfdGhpcy5fZW5hYmxlZFtjYXRlZ29yeV0gPSBlbmFibGVkKTsgfSk7XG4gICAgfTtcbiAgICBUcmFjZS5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2F0ZWdvcmllcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgY2F0ZWdvcmllc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldCh0cnVlLCBjYXRlZ29yaWVzKTtcbiAgICB9O1xuICAgIFRyYWNlLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2F0ZWdvcmllcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgY2F0ZWdvcmllc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldChmYWxzZSwgY2F0ZWdvcmllcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGVuYWJsZWQgc3RhdGV1cyBvZiBhIFtbQ2F0ZWdvcnldXVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0cmFjZS5lbmFibGVkKFwiVklFV0NPTkZJR1wiKTsgLy8gdHJ1ZSBvciBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybnMgYm9vbGVhbiB0cnVlIGlmIHRoZSBjYXRlZ29yeSBpcyBlbmFibGVkXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLmVuYWJsZWQgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZW5hYmxlZFtub3JtYWxpemVkQ2F0KGNhdGVnb3J5KV07XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVRyYW5zaXRpb25TdGFydCA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5UUkFOU0lUSU9OKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6IFN0YXJ0ZWQgIC0+IFwiICsgc3RyaW5naWZ5KHRyYW5zKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVRyYW5zaXRpb25JZ25vcmVkID0gZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlRSQU5TSVRJT04pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogSWdub3JlZCAgPD4gXCIgKyBzdHJpbmdpZnkodHJhbnMpKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlSG9va0ludm9jYXRpb24gPSBmdW5jdGlvbiAoc3RlcCwgdHJhbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuSE9PSykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBldmVudCA9IHBhcnNlKCd0cmFjZURhdGEuaG9va1R5cGUnKShvcHRpb25zKSB8fCAnaW50ZXJuYWwnLCBjb250ZXh0ID0gcGFyc2UoJ3RyYWNlRGF0YS5jb250ZXh0LnN0YXRlLm5hbWUnKShvcHRpb25zKSB8fCBwYXJzZSgndHJhY2VEYXRhLmNvbnRleHQnKShvcHRpb25zKSB8fCAndW5rbm93bicsIG5hbWUgPSBmdW5jdGlvblRvU3RyaW5nKHN0ZXAucmVnaXN0ZXJlZEhvb2suY2FsbGJhY2spO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogICBIb29rIC0+IFwiICsgZXZlbnQgKyBcIiBjb250ZXh0OiBcIiArIGNvbnRleHQgKyBcIiwgXCIgKyBtYXhMZW5ndGgoMjAwLCBuYW1lKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZUhvb2tSZXN1bHQgPSBmdW5jdGlvbiAoaG9va1Jlc3VsdCwgdHJhbnMsIHRyYW5zaXRpb25PcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LkhPT0spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogICA8LSBIb29rIHJldHVybmVkOiBcIiArIG1heExlbmd0aCgyMDAsIHN0cmluZ2lmeShob29rUmVzdWx0KSkpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VSZXNvbHZlUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCB3aGVuLCB0cmFucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5SRVNPTFZFKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6ICAgICAgICAgUmVzb2x2aW5nIFwiICsgcGF0aCArIFwiIChcIiArIHdoZW4gKyBcIilcIik7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVJlc29sdmFibGVSZXNvbHZlZCA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlLCB0cmFucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5SRVNPTFZFKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6ICAgICAgICAgICAgICAgPC0gUmVzb2x2ZWQgIFwiICsgcmVzb2x2YWJsZSArIFwiIHRvOiBcIiArIG1heExlbmd0aCgyMDAsIHN0cmluZ2lmeShyZXNvbHZhYmxlLmRhdGEpKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZUVycm9yID0gZnVuY3Rpb24gKHJlYXNvbiwgdHJhbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiA8LSBSZWplY3RlZCBcIiArIHN0cmluZ2lmeSh0cmFucykgKyBcIiwgcmVhc29uOiBcIiArIHJlYXNvbik7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVN1Y2Nlc3MgPSBmdW5jdGlvbiAoZmluYWxTdGF0ZSwgdHJhbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiA8LSBTdWNjZXNzICBcIiArIHN0cmluZ2lmeSh0cmFucykgKyBcIiwgZmluYWwgc3RhdGU6IFwiICsgZmluYWxTdGF0ZS5uYW1lKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVUlWaWV3RXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQsIHZpZXdEYXRhLCBleHRyYSkge1xuICAgICAgICBpZiAoZXh0cmEgPT09IHZvaWQgMCkgeyBleHRyYSA9ICcnOyB9XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlVJVklFVykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKFwidWktdmlldzogXCIgKyBwYWRTdHJpbmcoMzAsIGV2ZW50KSArIFwiIFwiICsgdWlWaWV3U3RyaW5nKHZpZXdEYXRhKSArIGV4dHJhKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZCA9IGZ1bmN0aW9uICh2aWV3RGF0YSwgY29udGV4dCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5VSVZJRVcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnRyYWNlVUlWaWV3RXZlbnQoJ1VwZGF0aW5nJywgdmlld0RhdGEsIFwiIHdpdGggVmlld0NvbmZpZyBmcm9tIGNvbnRleHQ9J1wiICsgY29udGV4dCArIFwiJ1wiKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVUlWaWV3RmlsbCA9IGZ1bmN0aW9uICh2aWV3RGF0YSwgaHRtbCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5VSVZJRVcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnRyYWNlVUlWaWV3RXZlbnQoJ0ZpbGwnLCB2aWV3RGF0YSwgXCIgd2l0aDogXCIgKyBtYXhMZW5ndGgoMjAwLCBodG1sKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVZpZXdTeW5jID0gZnVuY3Rpb24gKHBhaXJzKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlZJRVdDT05GSUcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgdWl2aGVhZGVyID0gJ3VpdmlldyBjb21wb25lbnQgZnFuJztcbiAgICAgICAgdmFyIGNmZ2hlYWRlciA9ICd2aWV3IGNvbmZpZyBzdGF0ZSAodmlldyBuYW1lKSc7XG4gICAgICAgIHZhciBtYXBwaW5nID0gcGFpcnNcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdWlWaWV3ID0gX2EudWlWaWV3LCB2aWV3Q29uZmlnID0gX2Eudmlld0NvbmZpZztcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHZhciB1aXYgPSB1aVZpZXcgJiYgdWlWaWV3LmZxbjtcbiAgICAgICAgICAgIHZhciBjZmcgPSB2aWV3Q29uZmlnICYmIHZpZXdDb25maWcudmlld0RlY2wuJGNvbnRleHQubmFtZSArIFwiOiAoXCIgKyB2aWV3Q29uZmlnLnZpZXdEZWNsLiRuYW1lICsgXCIpXCI7XG4gICAgICAgICAgICByZXR1cm4gX2IgPSB7fSwgX2JbdWl2aGVhZGVyXSA9IHVpdiwgX2JbY2ZnaGVhZGVyXSA9IGNmZywgX2I7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gKGFbdWl2aGVhZGVyXSB8fCAnJykubG9jYWxlQ29tcGFyZShiW3VpdmhlYWRlcl0gfHwgJycpOyB9KTtcbiAgICAgICAgY29uc29sZXRhYmxlKG1hcHBpbmcpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50LCB2aWV3Q29uZmlnKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlZJRVdDT05GSUcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlZJRVdDT05GSUc6IFwiICsgZXZlbnQgKyBcIiBcIiArIHZpZXdDb25maWdTdHJpbmcodmlld0NvbmZpZykpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50ID0gZnVuY3Rpb24gKGV2ZW50LCB2aWV3RGF0YSkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5WSUVXQ09ORklHKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2coXCJWSUVXQ09ORklHOiBcIiArIGV2ZW50ICsgXCIgXCIgKyB1aVZpZXdTdHJpbmcodmlld0RhdGEpKTtcbiAgICB9O1xuICAgIHJldHVybiBUcmFjZTtcbn0oKSk7XG5leHBvcnQgeyBUcmFjZSB9O1xuLyoqXG4gKiBUaGUgW1tUcmFjZV1dIHNpbmdsZXRvblxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge3RyYWNlfSBmcm9tIFwiQHVpcm91dGVyL2NvcmVcIjtcbiAqIHRyYWNlLmVuYWJsZSgxLCA1KTtcbiAqIGBgYFxuICovXG52YXIgdHJhY2UgPSBuZXcgVHJhY2UoKTtcbmV4cG9ydCB7IHRyYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHBhcmFtc1xuICovXG4vKiogKi9cbmltcG9ydCB7IGV4dGVuZCwgZmlsdGVyLCBtYXAgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzQXJyYXksIGlzRGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbi8qKlxuICogQW4gaW50ZXJuYWwgY2xhc3Mgd2hpY2ggaW1wbGVtZW50cyBbW1BhcmFtVHlwZURlZmluaXRpb25dXS5cbiAqXG4gKiBBIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGlzIGEgcGxhaW4gamF2YXNjcmlwdCBvYmplY3QgdXNlZCB0byByZWdpc3RlciBjdXN0b20gcGFyYW1ldGVyIHR5cGVzLlxuICogV2hlbiBhIHBhcmFtIHR5cGUgZGVmaW5pdGlvbiBpcyByZWdpc3RlcmVkLCBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGNyZWF0ZWQgaW50ZXJuYWxseS5cbiAqXG4gKiBUaGlzIGNsYXNzIGhhcyBuYWl2ZSBpbXBsZW1lbnRhdGlvbnMgZm9yIGFsbCB0aGUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gbWV0aG9kcy5cbiAqXG4gKiBVc2VkIGJ5IFtbVXJsTWF0Y2hlcl1dIHdoZW4gbWF0Y2hpbmcgb3IgZm9ybWF0dGluZyBVUkxzLCBvciBjb21wYXJpbmcgYW5kIHZhbGlkYXRpbmcgcGFyYW1ldGVyIHZhbHVlcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogdmFyIHBhcmFtVHlwZURlZiA9IHtcbiAqICAgZGVjb2RlOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApOyB9LFxuICogICBlbmNvZGU6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsICYmIHZhbC50b1N0cmluZygpOyB9LFxuICogICBlcXVhbHM6IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIHRoaXMuaXMoYSkgJiYgYSA9PT0gYjsgfSxcbiAqICAgaXM6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gYW5ndWxhci5pc051bWJlcih2YWwpICYmIGlzRmluaXRlKHZhbCkgJiYgdmFsICUgMSA9PT0gMDsgfSxcbiAqICAgcGF0dGVybjogL1xcZCsvXG4gKiB9XG4gKlxuICogdmFyIHBhcmFtVHlwZSA9IG5ldyBQYXJhbVR5cGUocGFyYW1UeXBlRGVmKTtcbiAqIGBgYFxuICogQGludGVybmFsYXBpXG4gKi9cbnZhciBQYXJhbVR5cGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRlZiAgQSBjb25maWd1cmF0aW9uIG9iamVjdCB3aGljaCBjb250YWlucyB0aGUgY3VzdG9tIHR5cGUgZGVmaW5pdGlvbi4gIFRoZSBvYmplY3Qnc1xuICAgICAqICAgICAgICBwcm9wZXJ0aWVzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgbWV0aG9kcyBhbmQvb3IgcGF0dGVybiBpbiBgUGFyYW1UeXBlYCdzIHB1YmxpYyBpbnRlcmZhY2UuXG4gICAgICogQHJldHVybnMgYSBuZXcgUGFyYW1UeXBlIG9iamVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBhcmFtVHlwZShkZWYpIHtcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgICAgIHRoaXMucGF0dGVybiA9IC8uKi87XG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgICAgICB0aGlzLmluaGVyaXQgPSB0cnVlO1xuICAgICAgICBleHRlbmQodGhpcywgZGVmKTtcbiAgICB9XG4gICAgLy8gY29uc2lkZXIgdGhlc2UgZm91ciBtZXRob2RzIHRvIGJlIFwiYWJzdHJhY3QgbWV0aG9kc1wiIHRoYXQgc2hvdWxkIGJlIG92ZXJyaWRkZW5cbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBQYXJhbVR5cGUucHJvdG90eXBlLmlzID0gZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFBhcmFtVHlwZS5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBQYXJhbVR5cGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzXG4gICAgICAgIHJldHVybiBhID09IGI7XG4gICAgfTtcbiAgICBQYXJhbVR5cGUucHJvdG90eXBlLiRzdWJQYXR0ZXJuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3ViID0gdGhpcy5wYXR0ZXJuLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBzdWIuc3Vic3RyKDEsIHN1Yi5sZW5ndGggLSAyKTtcbiAgICB9O1xuICAgIFBhcmFtVHlwZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIntQYXJhbVR5cGU6XCIgKyB0aGlzLm5hbWUgKyBcIn1cIjtcbiAgICB9O1xuICAgIC8qKiBHaXZlbiBhbiBlbmNvZGVkIHN0cmluZywgb3IgYSBkZWNvZGVkIG9iamVjdCwgcmV0dXJucyBhIGRlY29kZWQgb2JqZWN0ICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS4kbm9ybWFsaXplID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pcyh2YWwpID8gdmFsIDogdGhpcy5kZWNvZGUodmFsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdyYXBzIGFuIGV4aXN0aW5nIGN1c3RvbSBQYXJhbVR5cGUgYXMgYW4gYXJyYXkgb2YgUGFyYW1UeXBlLCBkZXBlbmRpbmcgb24gJ21vZGUnLlxuICAgICAqIGUuZy46XG4gICAgICogLSB1cmxtYXRjaGVyIHBhdHRlcm4gXCIvcGF0aD97cXVlcnlQYXJhbVtdOmludH1cIlxuICAgICAqIC0gdXJsOiBcIi9wYXRoP3F1ZXJ5UGFyYW09MSZxdWVyeVBhcmFtPTJcbiAgICAgKiAtICRzdGF0ZVBhcmFtcy5xdWVyeVBhcmFtIHdpbGwgYmUgWzEsIDJdXG4gICAgICogaWYgYG1vZGVgIGlzIFwiYXV0b1wiLCB0aGVuXG4gICAgICogLSB1cmw6IFwiL3BhdGg/cXVlcnlQYXJhbT0xIHdpbGwgY3JlYXRlICRzdGF0ZVBhcmFtcy5xdWVyeVBhcmFtOiAxXG4gICAgICogLSB1cmw6IFwiL3BhdGg/cXVlcnlQYXJhbT0xJnF1ZXJ5UGFyYW09MiB3aWxsIGNyZWF0ZSAkc3RhdGVQYXJhbXMucXVlcnlQYXJhbTogWzEsIDJdXG4gICAgICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS4kYXNBcnJheSA9IGZ1bmN0aW9uIChtb2RlLCBpc1NlYXJjaCkge1xuICAgICAgICBpZiAoIW1vZGUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgaWYgKG1vZGUgPT09ICdhdXRvJyAmJiAhaXNTZWFyY2gpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInYXV0bycgYXJyYXkgbW9kZSBpcyBmb3IgcXVlcnkgcGFyYW1ldGVycyBvbmx5XCIpO1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5VHlwZSh0aGlzLCBtb2RlKTtcbiAgICB9O1xuICAgIHJldHVybiBQYXJhbVR5cGU7XG59KCkpO1xuZXhwb3J0IHsgUGFyYW1UeXBlIH07XG4vKipcbiAqIFdyYXBzIHVwIGEgYFBhcmFtVHlwZWAgb2JqZWN0IHRvIGhhbmRsZSBhcnJheSB2YWx1ZXMuXG4gKiBAaW50ZXJuYWxhcGlcbiAqL1xuZnVuY3Rpb24gQXJyYXlUeXBlKHR5cGUsIG1vZGUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIC8vIFdyYXAgbm9uLWFycmF5IHZhbHVlIGFzIGFycmF5XG4gICAgZnVuY3Rpb24gYXJyYXlXcmFwKHZhbCkge1xuICAgICAgICByZXR1cm4gaXNBcnJheSh2YWwpID8gdmFsIDogaXNEZWZpbmVkKHZhbCkgPyBbdmFsXSA6IFtdO1xuICAgIH1cbiAgICAvLyBVbndyYXAgYXJyYXkgdmFsdWUgZm9yIFwiYXV0b1wiIG1vZGUuIFJldHVybiB1bmRlZmluZWQgZm9yIGVtcHR5IGFycmF5LlxuICAgIGZ1bmN0aW9uIGFycmF5VW53cmFwKHZhbCkge1xuICAgICAgICBzd2l0Y2ggKHZhbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBtb2RlID09PSAnYXV0bycgPyB2YWxbMF0gOiB2YWw7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gV3JhcHMgdHlwZSAoLmlzLy5lbmNvZGUvLmRlY29kZSkgZnVuY3Rpb25zIHRvIG9wZXJhdGUgb24gZWFjaCB2YWx1ZSBvZiBhbiBhcnJheVxuICAgIGZ1bmN0aW9uIGFycmF5SGFuZGxlcihjYWxsYmFjaywgYWxsVHJ1dGh5TW9kZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheSh2YWwpICYmIHZhbC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgIHZhciBhcnIgPSBhcnJheVdyYXAodmFsKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBtYXAoYXJyLCBjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gYWxsVHJ1dGh5TW9kZSA9PT0gdHJ1ZSA/IGZpbHRlcihyZXN1bHQsIGZ1bmN0aW9uICh4KSB7IHJldHVybiAheDsgfSkubGVuZ3RoID09PSAwIDogYXJyYXlVbndyYXAocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gV3JhcHMgdHlwZSAoLmVxdWFscykgZnVuY3Rpb25zIHRvIG9wZXJhdGUgb24gZWFjaCB2YWx1ZSBvZiBhbiBhcnJheVxuICAgIGZ1bmN0aW9uIGFycmF5RXF1YWxzSGFuZGxlcihjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsMSwgdmFsMikge1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBhcnJheVdyYXAodmFsMSksIHJpZ2h0ID0gYXJyYXlXcmFwKHZhbDIpO1xuICAgICAgICAgICAgaWYgKGxlZnQubGVuZ3RoICE9PSByaWdodC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZWZ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFjayhsZWZ0W2ldLCByaWdodFtpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBbJ2VuY29kZScsICdkZWNvZGUnLCAnZXF1YWxzJywgJyRub3JtYWxpemUnXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBwYXJhbVR5cGVGbiA9IHR5cGVbbmFtZV0uYmluZCh0eXBlKTtcbiAgICAgICAgdmFyIHdyYXBwZXJGbiA9IG5hbWUgPT09ICdlcXVhbHMnID8gYXJyYXlFcXVhbHNIYW5kbGVyIDogYXJyYXlIYW5kbGVyO1xuICAgICAgICBfdGhpc1tuYW1lXSA9IHdyYXBwZXJGbihwYXJhbVR5cGVGbik7XG4gICAgfSk7XG4gICAgZXh0ZW5kKHRoaXMsIHtcbiAgICAgICAgZHluYW1pYzogdHlwZS5keW5hbWljLFxuICAgICAgICBuYW1lOiB0eXBlLm5hbWUsXG4gICAgICAgIHBhdHRlcm46IHR5cGUucGF0dGVybixcbiAgICAgICAgaW5oZXJpdDogdHlwZS5pbmhlcml0LFxuICAgICAgICByYXc6IHR5cGUucmF3LFxuICAgICAgICBpczogYXJyYXlIYW5kbGVyKHR5cGUuaXMuYmluZCh0eXBlKSwgdHJ1ZSksXG4gICAgICAgICRhcnJheU1vZGU6IG1vZGUsXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJhbVR5cGUuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgZmlsdGVyLCBtYXAsIGFsbFRydWVSIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBwcm9wIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc0luamVjdGFibGUsIGlzRGVmaW5lZCwgaXNTdHJpbmcsIGlzQXJyYXksIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmltcG9ydCB7IFBhcmFtVHlwZSB9IGZyb20gJy4vcGFyYW1UeXBlJztcbi8qKiBAaGlkZGVuICovXG52YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8qKiBAaGlkZGVuICovXG52YXIgaXNTaG9ydGhhbmQgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgcmV0dXJuIFsndmFsdWUnLCAndHlwZScsICdzcXVhc2gnLCAnYXJyYXknLCAnZHluYW1pYyddLmZpbHRlcihoYXNPd24uYmluZChjZmcgfHwge30pKS5sZW5ndGggPT09IDA7XG59O1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIERlZlR5cGU7XG4oZnVuY3Rpb24gKERlZlR5cGUpIHtcbiAgICBEZWZUeXBlW0RlZlR5cGVbXCJQQVRIXCJdID0gMF0gPSBcIlBBVEhcIjtcbiAgICBEZWZUeXBlW0RlZlR5cGVbXCJTRUFSQ0hcIl0gPSAxXSA9IFwiU0VBUkNIXCI7XG4gICAgRGVmVHlwZVtEZWZUeXBlW1wiQ09ORklHXCJdID0gMl0gPSBcIkNPTkZJR1wiO1xufSkoRGVmVHlwZSB8fCAoRGVmVHlwZSA9IHt9KSk7XG5leHBvcnQgeyBEZWZUeXBlIH07XG5mdW5jdGlvbiBnZXRQYXJhbURlY2xhcmF0aW9uKHBhcmFtTmFtZSwgbG9jYXRpb24sIHN0YXRlKSB7XG4gICAgdmFyIG5vUmVsb2FkT25TZWFyY2ggPSAoc3RhdGUucmVsb2FkT25TZWFyY2ggPT09IGZhbHNlICYmIGxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSCkgfHwgdW5kZWZpbmVkO1xuICAgIHZhciBkeW5hbWljID0gW3N0YXRlLmR5bmFtaWMsIG5vUmVsb2FkT25TZWFyY2hdLmZpbmQoaXNEZWZpbmVkKTtcbiAgICB2YXIgZGVmYXVsdENvbmZpZyA9IGlzRGVmaW5lZChkeW5hbWljKSA/IHsgZHluYW1pYzogZHluYW1pYyB9IDoge307XG4gICAgdmFyIHBhcmFtQ29uZmlnID0gdW53cmFwU2hvcnRoYW5kKHN0YXRlICYmIHN0YXRlLnBhcmFtcyAmJiBzdGF0ZS5wYXJhbXNbcGFyYW1OYW1lXSk7XG4gICAgcmV0dXJuIGV4dGVuZChkZWZhdWx0Q29uZmlnLCBwYXJhbUNvbmZpZyk7XG59XG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gdW53cmFwU2hvcnRoYW5kKGNmZykge1xuICAgIGNmZyA9IGlzU2hvcnRoYW5kKGNmZykgPyB7IHZhbHVlOiBjZmcgfSA6IGNmZztcbiAgICBnZXRTdGF0aWNEZWZhdWx0VmFsdWVbJ19fY2FjaGVhYmxlJ10gPSB0cnVlO1xuICAgIGZ1bmN0aW9uIGdldFN0YXRpY0RlZmF1bHRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIGNmZy52YWx1ZTtcbiAgICB9XG4gICAgdmFyICQkZm4gPSBpc0luamVjdGFibGUoY2ZnLnZhbHVlKSA/IGNmZy52YWx1ZSA6IGdldFN0YXRpY0RlZmF1bHRWYWx1ZTtcbiAgICByZXR1cm4gZXh0ZW5kKGNmZywgeyAkJGZuOiAkJGZuIH0pO1xufVxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGdldFR5cGUoY2ZnLCB1cmxUeXBlLCBsb2NhdGlvbiwgaWQsIHBhcmFtVHlwZXMpIHtcbiAgICBpZiAoY2ZnLnR5cGUgJiYgdXJsVHlwZSAmJiB1cmxUeXBlLm5hbWUgIT09ICdzdHJpbmcnKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbSAnXCIgKyBpZCArIFwiJyBoYXMgdHdvIHR5cGUgY29uZmlndXJhdGlvbnMuXCIpO1xuICAgIGlmIChjZmcudHlwZSAmJiB1cmxUeXBlICYmIHVybFR5cGUubmFtZSA9PT0gJ3N0cmluZycgJiYgcGFyYW1UeXBlcy50eXBlKGNmZy50eXBlKSlcbiAgICAgICAgcmV0dXJuIHBhcmFtVHlwZXMudHlwZShjZmcudHlwZSk7XG4gICAgaWYgKHVybFR5cGUpXG4gICAgICAgIHJldHVybiB1cmxUeXBlO1xuICAgIGlmICghY2ZnLnR5cGUpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBsb2NhdGlvbiA9PT0gRGVmVHlwZS5DT05GSUdcbiAgICAgICAgICAgID8gJ2FueSdcbiAgICAgICAgICAgIDogbG9jYXRpb24gPT09IERlZlR5cGUuUEFUSFxuICAgICAgICAgICAgICAgID8gJ3BhdGgnXG4gICAgICAgICAgICAgICAgOiBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0hcbiAgICAgICAgICAgICAgICAgICAgPyAncXVlcnknXG4gICAgICAgICAgICAgICAgICAgIDogJ3N0cmluZyc7XG4gICAgICAgIHJldHVybiBwYXJhbVR5cGVzLnR5cGUodHlwZSk7XG4gICAgfVxuICAgIHJldHVybiBjZmcudHlwZSBpbnN0YW5jZW9mIFBhcmFtVHlwZSA/IGNmZy50eXBlIDogcGFyYW1UeXBlcy50eXBlKGNmZy50eXBlKTtcbn1cbi8qKlxuICogQGludGVybmFsYXBpXG4gKiByZXR1cm5zIGZhbHNlLCB0cnVlLCBvciB0aGUgc3F1YXNoIHZhbHVlIHRvIGluZGljYXRlIHRoZSBcImRlZmF1bHQgcGFyYW1ldGVyIHVybCBzcXVhc2ggcG9saWN5XCIuXG4gKi9cbmZ1bmN0aW9uIGdldFNxdWFzaFBvbGljeShjb25maWcsIGlzT3B0aW9uYWwsIGRlZmF1bHRQb2xpY3kpIHtcbiAgICB2YXIgc3F1YXNoID0gY29uZmlnLnNxdWFzaDtcbiAgICBpZiAoIWlzT3B0aW9uYWwgfHwgc3F1YXNoID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghaXNEZWZpbmVkKHNxdWFzaCkgfHwgc3F1YXNoID09IG51bGwpXG4gICAgICAgIHJldHVybiBkZWZhdWx0UG9saWN5O1xuICAgIGlmIChzcXVhc2ggPT09IHRydWUgfHwgaXNTdHJpbmcoc3F1YXNoKSlcbiAgICAgICAgcmV0dXJuIHNxdWFzaDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNxdWFzaCBwb2xpY3k6ICdcIiArIHNxdWFzaCArIFwiJy4gVmFsaWQgcG9saWNpZXM6IGZhbHNlLCB0cnVlLCBvciBhcmJpdHJhcnkgc3RyaW5nXCIpO1xufVxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZnVuY3Rpb24gZ2V0UmVwbGFjZShjb25maWcsIGFycmF5TW9kZSwgaXNPcHRpb25hbCwgc3F1YXNoKSB7XG4gICAgdmFyIGRlZmF1bHRQb2xpY3kgPSBbXG4gICAgICAgIHsgZnJvbTogJycsIHRvOiBpc09wdGlvbmFsIHx8IGFycmF5TW9kZSA/IHVuZGVmaW5lZCA6ICcnIH0sXG4gICAgICAgIHsgZnJvbTogbnVsbCwgdG86IGlzT3B0aW9uYWwgfHwgYXJyYXlNb2RlID8gdW5kZWZpbmVkIDogJycgfSxcbiAgICBdO1xuICAgIHZhciByZXBsYWNlID0gaXNBcnJheShjb25maWcucmVwbGFjZSkgPyBjb25maWcucmVwbGFjZSA6IFtdO1xuICAgIGlmIChpc1N0cmluZyhzcXVhc2gpKVxuICAgICAgICByZXBsYWNlLnB1c2goeyBmcm9tOiBzcXVhc2gsIHRvOiB1bmRlZmluZWQgfSk7XG4gICAgdmFyIGNvbmZpZ3VyZWRLZXlzID0gbWFwKHJlcGxhY2UsIHByb3AoJ2Zyb20nKSk7XG4gICAgcmV0dXJuIGZpbHRlcihkZWZhdWx0UG9saWN5LCBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gY29uZmlndXJlZEtleXMuaW5kZXhPZihpdGVtLmZyb20pID09PSAtMTsgfSkuY29uY2F0KHJlcGxhY2UpO1xufVxuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFBhcmFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhcmFtKGlkLCB0eXBlLCBsb2NhdGlvbiwgdXJsTWF0Y2hlckZhY3RvcnksIHN0YXRlKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBnZXRQYXJhbURlY2xhcmF0aW9uKGlkLCBsb2NhdGlvbiwgc3RhdGUpO1xuICAgICAgICB0eXBlID0gZ2V0VHlwZShjb25maWcsIHR5cGUsIGxvY2F0aW9uLCBpZCwgdXJsTWF0Y2hlckZhY3RvcnkucGFyYW1UeXBlcyk7XG4gICAgICAgIHZhciBhcnJheU1vZGUgPSBnZXRBcnJheU1vZGUoKTtcbiAgICAgICAgdHlwZSA9IGFycmF5TW9kZSA/IHR5cGUuJGFzQXJyYXkoYXJyYXlNb2RlLCBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0gpIDogdHlwZTtcbiAgICAgICAgdmFyIGlzT3B0aW9uYWwgPSBjb25maWcudmFsdWUgIT09IHVuZGVmaW5lZCB8fCBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0g7XG4gICAgICAgIHZhciBkeW5hbWljID0gaXNEZWZpbmVkKGNvbmZpZy5keW5hbWljKSA/ICEhY29uZmlnLmR5bmFtaWMgOiAhIXR5cGUuZHluYW1pYztcbiAgICAgICAgdmFyIHJhdyA9IGlzRGVmaW5lZChjb25maWcucmF3KSA/ICEhY29uZmlnLnJhdyA6ICEhdHlwZS5yYXc7XG4gICAgICAgIHZhciBzcXVhc2ggPSBnZXRTcXVhc2hQb2xpY3koY29uZmlnLCBpc09wdGlvbmFsLCB1cmxNYXRjaGVyRmFjdG9yeS5kZWZhdWx0U3F1YXNoUG9saWN5KCkpO1xuICAgICAgICB2YXIgcmVwbGFjZSA9IGdldFJlcGxhY2UoY29uZmlnLCBhcnJheU1vZGUsIGlzT3B0aW9uYWwsIHNxdWFzaCk7XG4gICAgICAgIHZhciBpbmhlcml0ID0gaXNEZWZpbmVkKGNvbmZpZy5pbmhlcml0KSA/ICEhY29uZmlnLmluaGVyaXQgOiAhIXR5cGUuaW5oZXJpdDtcbiAgICAgICAgLy8gYXJyYXkgY29uZmlnOiBwYXJhbSBuYW1lIChwYXJhbVtdKSBvdmVycmlkZXMgZGVmYXVsdCBzZXR0aW5ncy4gIGV4cGxpY2l0IGNvbmZpZyBvdmVycmlkZXMgcGFyYW0gbmFtZS5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QXJyYXlNb2RlKCkge1xuICAgICAgICAgICAgdmFyIGFycmF5RGVmYXVsdHMgPSB7IGFycmF5OiBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0ggPyAnYXV0bycgOiBmYWxzZSB9O1xuICAgICAgICAgICAgdmFyIGFycmF5UGFyYW1Ob21lbmNsYXR1cmUgPSBpZC5tYXRjaCgvXFxbXFxdJC8pID8geyBhcnJheTogdHJ1ZSB9IDoge307XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKGFycmF5RGVmYXVsdHMsIGFycmF5UGFyYW1Ob21lbmNsYXR1cmUsIGNvbmZpZykuYXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgZXh0ZW5kKHRoaXMsIHsgaWQ6IGlkLCB0eXBlOiB0eXBlLCBsb2NhdGlvbjogbG9jYXRpb24sIGlzT3B0aW9uYWw6IGlzT3B0aW9uYWwsIGR5bmFtaWM6IGR5bmFtaWMsIHJhdzogcmF3LCBzcXVhc2g6IHNxdWFzaCwgcmVwbGFjZTogcmVwbGFjZSwgaW5oZXJpdDogaW5oZXJpdCwgYXJyYXk6IGFycmF5TW9kZSwgY29uZmlnOiBjb25maWcgfSk7XG4gICAgfVxuICAgIFBhcmFtLnZhbHVlcyA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0ge307IH1cbiAgICAgICAgdmFyIHBhcmFtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcGFyYW1zXzEgPSBwYXJhbXM7IF9pIDwgcGFyYW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNfMVtfaV07XG4gICAgICAgICAgICBwYXJhbVZhbHVlc1twYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZXNbcGFyYW0uaWRdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1WYWx1ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5kcyBbW1BhcmFtXV0gb2JqZWN0cyB3aGljaCBoYXZlIGRpZmZlcmVudCBwYXJhbSB2YWx1ZXNcbiAgICAgKlxuICAgICAqIEZpbHRlcnMgYSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIHRvIG9ubHkgdGhvc2Ugd2hvc2UgcGFyYW1ldGVyIHZhbHVlcyBkaWZmZXIgaW4gdHdvIHBhcmFtIHZhbHVlIG9iamVjdHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJhbXM6IFRoZSBsaXN0IG9mIFBhcmFtIG9iamVjdHMgdG8gZmlsdGVyXG4gICAgICogQHBhcmFtIHZhbHVlczE6IFRoZSBmaXJzdCBzZXQgb2YgcGFyYW1ldGVyIHZhbHVlc1xuICAgICAqIEBwYXJhbSB2YWx1ZXMyOiB0aGUgc2Vjb25kIHNldCBvZiBwYXJhbWV0ZXIgdmFsdWVzXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbnkgUGFyYW0gb2JqZWN0cyB3aG9zZSB2YWx1ZXMgd2VyZSBkaWZmZXJlbnQgYmV0d2VlbiB2YWx1ZXMxIGFuZCB2YWx1ZXMyXG4gICAgICovXG4gICAgUGFyYW0uY2hhbmdlZCA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlczEsIHZhbHVlczIpIHtcbiAgICAgICAgaWYgKHZhbHVlczEgPT09IHZvaWQgMCkgeyB2YWx1ZXMxID0ge307IH1cbiAgICAgICAgaWYgKHZhbHVlczIgPT09IHZvaWQgMCkgeyB2YWx1ZXMyID0ge307IH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhcGFyYW0udHlwZS5lcXVhbHModmFsdWVzMVtwYXJhbS5pZF0sIHZhbHVlczJbcGFyYW0uaWRdKTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdHdvIHBhcmFtIHZhbHVlIG9iamVjdHMgYXJlIGVxdWFsIChmb3IgYSBzZXQgb2YgW1tQYXJhbV1dIG9iamVjdHMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyYW1zIFRoZSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIHRvIGNoZWNrXG4gICAgICogQHBhcmFtIHZhbHVlczEgVGhlIGZpcnN0IHNldCBvZiBwYXJhbSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gdmFsdWVzMiBUaGUgc2Vjb25kIHNldCBvZiBwYXJhbSB2YWx1ZXNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHBhcmFtIHZhbHVlcyBpbiB2YWx1ZXMxIGFuZCB2YWx1ZXMyIGFyZSBlcXVhbFxuICAgICAqL1xuICAgIFBhcmFtLmVxdWFscyA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlczEsIHZhbHVlczIpIHtcbiAgICAgICAgaWYgKHZhbHVlczEgPT09IHZvaWQgMCkgeyB2YWx1ZXMxID0ge307IH1cbiAgICAgICAgaWYgKHZhbHVlczIgPT09IHZvaWQgMCkgeyB2YWx1ZXMyID0ge307IH1cbiAgICAgICAgcmV0dXJuIFBhcmFtLmNoYW5nZWQocGFyYW1zLCB2YWx1ZXMxLCB2YWx1ZXMyKS5sZW5ndGggPT09IDA7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGEgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXJlIHZhbGlkLCBhY2NvcmRpbmcgdG8gdGhlIFBhcmFtIGRlZmluaXRpb25zICovXG4gICAgUGFyYW0udmFsaWRhdGVzID0gZnVuY3Rpb24gKHBhcmFtcywgdmFsdWVzKSB7XG4gICAgICAgIGlmICh2YWx1ZXMgPT09IHZvaWQgMCkgeyB2YWx1ZXMgPSB7fTsgfVxuICAgICAgICByZXR1cm4gcGFyYW1zLm1hcChmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtLnZhbGlkYXRlcyh2YWx1ZXNbcGFyYW0uaWRdKTsgfSkucmVkdWNlKGFsbFRydWVSLCB0cnVlKTtcbiAgICB9O1xuICAgIFBhcmFtLnByb3RvdHlwZS5pc0RlZmF1bHRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09wdGlvbmFsICYmIHRoaXMudHlwZS5lcXVhbHModGhpcy52YWx1ZSgpLCB2YWx1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBbSW50ZXJuYWxdIEdldHMgdGhlIGRlY29kZWQgcmVwcmVzZW50YXRpb24gb2YgYSB2YWx1ZSBpZiB0aGUgdmFsdWUgaXMgZGVmaW5lZCwgb3RoZXJ3aXNlLCByZXR1cm5zIHRoZVxuICAgICAqIGRlZmF1bHQgdmFsdWUsIHdoaWNoIG1heSBiZSB0aGUgcmVzdWx0IG9mIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgUGFyYW0ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBbSW50ZXJuYWxdIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHBhcmFtZXRlciwgd2hpY2ggbWF5IGJlIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZ2V0RGVmYXVsdFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLl9kZWZhdWx0VmFsdWVDYWNoZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2RlZmF1bHRWYWx1ZUNhY2hlLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIGlmICghc2VydmljZXMuJGluamVjdG9yKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5qZWN0YWJsZSBmdW5jdGlvbnMgY2Fubm90IGJlIGNhbGxlZCBhdCBjb25maWd1cmF0aW9uIHRpbWUnKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKF90aGlzLmNvbmZpZy4kJGZuKTtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IG51bGwgJiYgZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQgJiYgIV90aGlzLnR5cGUuaXMoZGVmYXVsdFZhbHVlKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZWZhdWx0IHZhbHVlIChcIiArIGRlZmF1bHRWYWx1ZSArIFwiKSBmb3IgcGFyYW1ldGVyICdcIiArIF90aGlzLmlkICsgXCInIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBQYXJhbVR5cGUgKFwiICsgX3RoaXMudHlwZS5uYW1lICsgXCIpXCIpO1xuICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy4kJGZuWydfX2NhY2hlYWJsZSddKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2RlZmF1bHRWYWx1ZUNhY2hlID0geyBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlcGxhY2VTcGVjaWFsVmFsdWVzID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnJlcGxhY2U7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR1cGxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0dXBsZS5mcm9tID09PSB2YWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0dXBsZS50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH07XG4gICAgICAgIHZhbHVlID0gcmVwbGFjZVNwZWNpYWxWYWx1ZXModmFsdWUpO1xuICAgICAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpID8gZ2V0RGVmYXVsdFZhbHVlKCkgOiB0aGlzLnR5cGUuJG5vcm1hbGl6ZSh2YWx1ZSk7XG4gICAgfTtcbiAgICBQYXJhbS5wcm90b3R5cGUuaXNTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSDtcbiAgICB9O1xuICAgIFBhcmFtLnByb3RvdHlwZS52YWxpZGF0ZXMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gVGhlcmUgd2FzIG5vIHBhcmFtZXRlciB2YWx1ZSwgYnV0IHRoZSBwYXJhbSBpcyBvcHRpb25hbFxuICAgICAgICBpZiAoKGlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gbnVsbCkgJiYgdGhpcy5pc09wdGlvbmFsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIFRoZSB2YWx1ZSB3YXMgbm90IG9mIHRoZSBjb3JyZWN0IFBhcmFtVHlwZSwgYW5kIGNvdWxkIG5vdCBiZSBkZWNvZGVkIHRvIHRoZSBjb3JyZWN0IFBhcmFtVHlwZVxuICAgICAgICB2YXIgbm9ybWFsaXplZCA9IHRoaXMudHlwZS4kbm9ybWFsaXplKHZhbHVlKTtcbiAgICAgICAgaWYgKCF0aGlzLnR5cGUuaXMobm9ybWFsaXplZCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIFRoZSB2YWx1ZSB3YXMgb2YgdGhlIGNvcnJlY3QgdHlwZSwgYnV0IHdoZW4gZW5jb2RlZCwgZGlkIG5vdCBtYXRjaCB0aGUgUGFyYW1UeXBlJ3MgcmVnZXhwXG4gICAgICAgIHZhciBlbmNvZGVkID0gdGhpcy50eXBlLmVuY29kZShub3JtYWxpemVkKTtcbiAgICAgICAgcmV0dXJuICEoaXNTdHJpbmcoZW5jb2RlZCkgJiYgIXRoaXMudHlwZS5wYXR0ZXJuLmV4ZWMoZW5jb2RlZCkpO1xuICAgIH07XG4gICAgUGFyYW0ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJ7UGFyYW06XCIgKyB0aGlzLmlkICsgXCIgXCIgKyB0aGlzLnR5cGUgKyBcIiBzcXVhc2g6ICdcIiArIHRoaXMuc3F1YXNoICsgXCInIG9wdGlvbmFsOiBcIiArIHRoaXMuaXNPcHRpb25hbCArIFwifVwiO1xuICAgIH07XG4gICAgcmV0dXJuIFBhcmFtO1xufSgpKTtcbmV4cG9ydCB7IFBhcmFtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJhbS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHBhcmFtc1xuICovXG4vKiogKi9cbmltcG9ydCB7IGZyb21Kc29uLCB0b0pzb24sIGlkZW50aXR5LCBlcXVhbHMsIGluaGVyaXQsIG1hcCwgZXh0ZW5kLCBwaWNrIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc0RlZmluZWQsIGlzTnVsbE9yVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgaXMgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBQYXJhbVR5cGUgfSBmcm9tICcuL3BhcmFtVHlwZSc7XG4vKipcbiAqIEEgcmVnaXN0cnkgZm9yIHBhcmFtZXRlciB0eXBlcy5cbiAqXG4gKiBUaGlzIHJlZ2lzdHJ5IG1hbmFnZXMgdGhlIGJ1aWx0LWluIChhbmQgY3VzdG9tKSBwYXJhbWV0ZXIgdHlwZXMuXG4gKlxuICogVGhlIGJ1aWx0LWluIHBhcmFtZXRlciB0eXBlcyBhcmU6XG4gKlxuICogLSBbW3N0cmluZ11dXG4gKiAtIFtbcGF0aF1dXG4gKiAtIFtbcXVlcnldXVxuICogLSBbW2hhc2hdXVxuICogLSBbW2ludF1dXG4gKiAtIFtbYm9vbF1dXG4gKiAtIFtbZGF0ZV1dXG4gKiAtIFtbanNvbl1dXG4gKiAtIFtbYW55XV1cbiAqL1xudmFyIFBhcmFtVHlwZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIGZ1bmN0aW9uIFBhcmFtVHlwZXMoKSB7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuZW5xdWV1ZSA9IHRydWU7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMudHlwZVF1ZXVlID0gW107XG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0VHlwZXMgPSBwaWNrKFBhcmFtVHlwZXMucHJvdG90eXBlLCBbXG4gICAgICAgICAgICAnaGFzaCcsXG4gICAgICAgICAgICAnc3RyaW5nJyxcbiAgICAgICAgICAgICdxdWVyeScsXG4gICAgICAgICAgICAncGF0aCcsXG4gICAgICAgICAgICAnaW50JyxcbiAgICAgICAgICAgICdib29sJyxcbiAgICAgICAgICAgICdkYXRlJyxcbiAgICAgICAgICAgICdqc29uJyxcbiAgICAgICAgICAgICdhbnknLFxuICAgICAgICBdKTtcbiAgICAgICAgLy8gUmVnaXN0ZXIgZGVmYXVsdCB0eXBlcy4gU3RvcmUgdGhlbSBpbiB0aGUgcHJvdG90eXBlIG9mIHRoaXMudHlwZXMuXG4gICAgICAgIHZhciBtYWtlVHlwZSA9IGZ1bmN0aW9uIChkZWZpbml0aW9uLCBuYW1lKSB7IHJldHVybiBuZXcgUGFyYW1UeXBlKGV4dGVuZCh7IG5hbWU6IG5hbWUgfSwgZGVmaW5pdGlvbikpOyB9O1xuICAgICAgICB0aGlzLnR5cGVzID0gaW5oZXJpdChtYXAodGhpcy5kZWZhdWx0VHlwZXMsIG1ha2VUeXBlKSwge30pO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgUGFyYW1UeXBlcy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50eXBlcyA9IHt9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgcGFyYW1ldGVyIHR5cGVcbiAgICAgKlxuICAgICAqIEVuZCB1c2VycyBzaG91bGQgY2FsbCBbW1VybE1hdGNoZXJGYWN0b3J5LnR5cGVdXSwgd2hpY2ggZGVsZWdhdGVzIHRvIHRoaXMgbWV0aG9kLlxuICAgICAqL1xuICAgIFBhcmFtVHlwZXMucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKSB7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKGRlZmluaXRpb24pKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZXNbbmFtZV07XG4gICAgICAgIGlmICh0aGlzLnR5cGVzLmhhc093blByb3BlcnR5KG5hbWUpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQSB0eXBlIG5hbWVkICdcIiArIG5hbWUgKyBcIicgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkLlwiKTtcbiAgICAgICAgdGhpcy50eXBlc1tuYW1lXSA9IG5ldyBQYXJhbVR5cGUoZXh0ZW5kKHsgbmFtZTogbmFtZSB9LCBkZWZpbml0aW9uKSk7XG4gICAgICAgIGlmIChkZWZpbml0aW9uRm4pIHtcbiAgICAgICAgICAgIHRoaXMudHlwZVF1ZXVlLnB1c2goeyBuYW1lOiBuYW1lLCBkZWY6IGRlZmluaXRpb25GbiB9KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbnF1ZXVlKVxuICAgICAgICAgICAgICAgIHRoaXMuX2ZsdXNoVHlwZVF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgUGFyYW1UeXBlcy5wcm90b3R5cGUuX2ZsdXNoVHlwZVF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGhpcy50eXBlUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMudHlwZVF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAodHlwZS5wYXR0ZXJuKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBjYW5ub3Qgb3ZlcnJpZGUgYSB0eXBlJ3MgLnBhdHRlcm4gYXQgcnVudGltZS5cIik7XG4gICAgICAgICAgICBleHRlbmQodGhpcy50eXBlc1t0eXBlLm5hbWVdLCBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKHR5cGUuZGVmKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQYXJhbVR5cGVzO1xufSgpKTtcbmV4cG9ydCB7IFBhcmFtVHlwZXMgfTtcbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBpbml0RGVmYXVsdFR5cGVzKCkge1xuICAgIHZhciBtYWtlRGVmYXVsdFR5cGUgPSBmdW5jdGlvbiAoZGVmKSB7XG4gICAgICAgIHZhciB2YWxUb1N0cmluZyA9IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuICh2YWwgIT0gbnVsbCA/IHZhbC50b1N0cmluZygpIDogdmFsKTsgfTtcbiAgICAgICAgdmFyIGRlZmF1bHRUeXBlQmFzZSA9IHtcbiAgICAgICAgICAgIGVuY29kZTogdmFsVG9TdHJpbmcsXG4gICAgICAgICAgICBkZWNvZGU6IHZhbFRvU3RyaW5nLFxuICAgICAgICAgICAgaXM6IGlzKFN0cmluZyksXG4gICAgICAgICAgICBwYXR0ZXJuOiAvLiovLFxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnRyaXBsZS1lcXVhbHNcbiAgICAgICAgICAgIGVxdWFsczogZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgPT0gYjsgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgZGVmYXVsdFR5cGVCYXNlLCBkZWYpO1xuICAgIH07XG4gICAgLy8gRGVmYXVsdCBQYXJhbWV0ZXIgVHlwZSBEZWZpbml0aW9uc1xuICAgIGV4dGVuZChQYXJhbVR5cGVzLnByb3RvdHlwZSwge1xuICAgICAgICBzdHJpbmc6IG1ha2VEZWZhdWx0VHlwZSh7fSksXG4gICAgICAgIHBhdGg6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBwYXR0ZXJuOiAvW14vXSovLFxuICAgICAgICB9KSxcbiAgICAgICAgcXVlcnk6IG1ha2VEZWZhdWx0VHlwZSh7fSksXG4gICAgICAgIGhhc2g6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBpbmhlcml0OiBmYWxzZSxcbiAgICAgICAgfSksXG4gICAgICAgIGludDogbWFrZURlZmF1bHRUeXBlKHtcbiAgICAgICAgICAgIGRlY29kZTogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gcGFyc2VJbnQodmFsLCAxMCk7IH0sXG4gICAgICAgICAgICBpczogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQodmFsKSAmJiB0aGlzLmRlY29kZSh2YWwudG9TdHJpbmcoKSkgPT09IHZhbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXR0ZXJuOiAvLT9cXGQrLyxcbiAgICAgICAgfSksXG4gICAgICAgIGJvb2w6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuICh2YWwgJiYgMSkgfHwgMDsgfSxcbiAgICAgICAgICAgIGRlY29kZTogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gcGFyc2VJbnQodmFsLCAxMCkgIT09IDA7IH0sXG4gICAgICAgICAgICBpczogaXMoQm9vbGVhbiksXG4gICAgICAgICAgICBwYXR0ZXJuOiAvMHwxLyxcbiAgICAgICAgfSksXG4gICAgICAgIGRhdGU6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuaXModmFsKVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IFt2YWwuZ2V0RnVsbFllYXIoKSwgKCcwJyArICh2YWwuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMiksICgnMCcgKyB2YWwuZ2V0RGF0ZSgpKS5zbGljZSgtMildLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pcyh2YWwpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IHRoaXMuY2FwdHVyZS5leGVjKHZhbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gbmV3IERhdGUobWF0Y2hbMV0sIG1hdGNoWzJdIC0gMSwgbWF0Y2hbM10pIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB2YWwgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTih2YWwudmFsdWVPZigpKTsgfSxcbiAgICAgICAgICAgIGVxdWFsczogZnVuY3Rpb24gKGwsIHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWydnZXRGdWxsWWVhcicsICdnZXRNb250aCcsICdnZXREYXRlJ10ucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGZuKSB7IHJldHVybiBhY2MgJiYgbFtmbl0oKSA9PT0gcltmbl0oKTsgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0dGVybjogL1swLTldezR9LSg/OjBbMS05XXwxWzAtMl0pLSg/OjBbMS05XXxbMS0yXVswLTldfDNbMC0xXSkvLFxuICAgICAgICAgICAgY2FwdHVyZTogLyhbMC05XXs0fSktKDBbMS05XXwxWzAtMl0pLSgwWzEtOV18WzEtMl1bMC05XXwzWzAtMV0pLyxcbiAgICAgICAgfSksXG4gICAgICAgIGpzb246IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBlbmNvZGU6IHRvSnNvbixcbiAgICAgICAgICAgIGRlY29kZTogZnJvbUpzb24sXG4gICAgICAgICAgICBpczogaXMoT2JqZWN0KSxcbiAgICAgICAgICAgIGVxdWFsczogZXF1YWxzLFxuICAgICAgICAgICAgcGF0dGVybjogL1teL10qLyxcbiAgICAgICAgfSksXG4gICAgICAgIC8vIGRvZXMgbm90IGVuY29kZS9kZWNvZGVcbiAgICAgICAgYW55OiBtYWtlRGVmYXVsdFR5cGUoe1xuICAgICAgICAgICAgZW5jb2RlOiBpZGVudGl0eSxcbiAgICAgICAgICAgIGRlY29kZTogaWRlbnRpdHksXG4gICAgICAgICAgICBpczogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgIGVxdWFsczogZXF1YWxzLFxuICAgICAgICB9KSxcbiAgICB9KTtcbn1cbmluaXREZWZhdWx0VHlwZXMoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcmFtVHlwZXMuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBleHRlbmQsIGFuY2VzdG9ycyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFN0YXRlUGFyYW1zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRlUGFyYW1zKHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHsgcGFyYW1zID0ge307IH1cbiAgICAgICAgZXh0ZW5kKHRoaXMsIHBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1lcmdlcyBhIHNldCBvZiBwYXJhbWV0ZXJzIHdpdGggYWxsIHBhcmFtZXRlcnMgaW5oZXJpdGVkIGJldHdlZW4gdGhlIGNvbW1vbiBwYXJlbnRzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgc3RhdGUgYW5kIGEgZ2l2ZW4gZGVzdGluYXRpb24gc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbmV3UGFyYW1zIFRoZSBzZXQgb2YgcGFyYW1ldGVycyB3aGljaCB3aWxsIGJlIGNvbXBvc2l0ZWQgd2l0aCBpbmhlcml0ZWQgcGFyYW1zLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkY3VycmVudCBJbnRlcm5hbCBkZWZpbml0aW9uIG9mIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9ICR0byBJbnRlcm5hbCBkZWZpbml0aW9uIG9mIG9iamVjdCByZXByZXNlbnRpbmcgc3RhdGUgdG8gdHJhbnNpdGlvbiB0by5cbiAgICAgKi9cbiAgICBTdGF0ZVBhcmFtcy5wcm90b3R5cGUuJGluaGVyaXQgPSBmdW5jdGlvbiAobmV3UGFyYW1zLCAkY3VycmVudCwgJHRvKSB7XG4gICAgICAgIHZhciBwYXJlbnRQYXJhbXM7XG4gICAgICAgIHZhciBwYXJlbnRzID0gYW5jZXN0b3JzKCRjdXJyZW50LCAkdG8pLCBpbmhlcml0ZWQgPSB7fSwgaW5oZXJpdExpc3QgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBwYXJlbnRzKSB7XG4gICAgICAgICAgICBpZiAoIXBhcmVudHNbaV0gfHwgIXBhcmVudHNbaV0ucGFyYW1zKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcGFyZW50UGFyYW1zID0gT2JqZWN0LmtleXMocGFyZW50c1tpXS5wYXJhbXMpO1xuICAgICAgICAgICAgaWYgKCFwYXJlbnRQYXJhbXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBwYXJlbnRQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5oZXJpdExpc3QuaW5kZXhPZihwYXJlbnRQYXJhbXNbal0pID49IDApXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGluaGVyaXRMaXN0LnB1c2gocGFyZW50UGFyYW1zW2pdKTtcbiAgICAgICAgICAgICAgICBpbmhlcml0ZWRbcGFyZW50UGFyYW1zW2pdXSA9IHRoaXNbcGFyZW50UGFyYW1zW2pdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBpbmhlcml0ZWQsIG5ld1BhcmFtcyk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGVQYXJhbXM7XG59KCkpO1xuZXhwb3J0IHsgU3RhdGVQYXJhbXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlUGFyYW1zLmpzLm1hcCIsIi8qKiBAbW9kdWxlIHBhdGggKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBleHRlbmQsIGFwcGx5UGFpcnMsIGZpbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHByb3BFcSB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqXG4gKiBBIG5vZGUgaW4gYSBbW1RyZWVDaGFuZ2VzXV0gcGF0aFxuICpcbiAqIEZvciBhIFtbVHJlZUNoYW5nZXNdXSBwYXRoLCB0aGlzIGNsYXNzIGhvbGRzIHRoZSBzdGF0ZWZ1bCBpbmZvcm1hdGlvbiBmb3IgYSBzaW5nbGUgbm9kZSBpbiB0aGUgcGF0aC5cbiAqIEVhY2ggUGF0aE5vZGUgY29ycmVzcG9uZHMgdG8gYSBzdGF0ZSBiZWluZyBlbnRlcmVkLCBleGl0ZWQsIG9yIHJldGFpbmVkLlxuICogVGhlIHN0YXRlZnVsIGluZm9ybWF0aW9uIGluY2x1ZGVzIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHJlc29sdmUgZGF0YS5cbiAqL1xudmFyIFBhdGhOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhdGhOb2RlKHN0YXRlT3JOb2RlKSB7XG4gICAgICAgIGlmIChzdGF0ZU9yTm9kZSBpbnN0YW5jZW9mIFBhdGhOb2RlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN0YXRlT3JOb2RlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IG5vZGUuc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnBhcmFtU2NoZW1hID0gbm9kZS5wYXJhbVNjaGVtYS5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IGV4dGVuZCh7fSwgbm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy52aWV3cyA9IG5vZGUudmlld3MgJiYgbm9kZS52aWV3cy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RhdGVPck5vZGU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnBhcmFtU2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZhYmxlcyA9IHN0YXRlLnJlc29sdmFibGVzLm1hcChmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMuY2xvbmUoKTsgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUGF0aE5vZGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKHRoaXMpO1xuICAgIH07XG4gICAgLyoqIFNldHMgW1twYXJhbVZhbHVlc11dIGZvciB0aGUgbm9kZSwgZnJvbSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCBoYXNoICovXG4gICAgUGF0aE5vZGUucHJvdG90eXBlLmFwcGx5UmF3UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICB2YXIgZ2V0UGFyYW1WYWwgPSBmdW5jdGlvbiAocGFyYW1EZWYpIHsgcmV0dXJuIFtwYXJhbURlZi5pZCwgcGFyYW1EZWYudmFsdWUocGFyYW1zW3BhcmFtRGVmLmlkXSldOyB9O1xuICAgICAgICB0aGlzLnBhcmFtVmFsdWVzID0gdGhpcy5wYXJhbVNjaGVtYS5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHBEZWYpIHsgcmV0dXJuIGFwcGx5UGFpcnMobWVtbywgZ2V0UGFyYW1WYWwocERlZikpOyB9LCB7fSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqIEdldHMgYSBzcGVjaWZpYyBbW1BhcmFtXV0gbWV0YWRhdGEgdGhhdCBiZWxvbmdzIHRvIHRoZSBub2RlICovXG4gICAgUGF0aE5vZGUucHJvdG90eXBlLnBhcmFtZXRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBmaW5kKHRoaXMucGFyYW1TY2hlbWEsIHByb3BFcSgnaWQnLCBuYW1lKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzdGF0ZSBhbmQgcGFyYW1ldGVyIHZhbHVlcyBmb3IgYW5vdGhlciBQYXRoTm9kZSBhcmVcbiAgICAgKiBlcXVhbCB0byB0aGUgc3RhdGUgYW5kIHBhcmFtIHZhbHVlcyBmb3IgdGhpcyBQYXRoTm9kZVxuICAgICAqL1xuICAgIFBhdGhOb2RlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobm9kZSwgcGFyYW1zRm4pIHtcbiAgICAgICAgdmFyIGRpZmYgPSB0aGlzLmRpZmYobm9kZSwgcGFyYW1zRm4pO1xuICAgICAgICByZXR1cm4gZGlmZiAmJiBkaWZmLmxlbmd0aCA9PT0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmRzIFBhcmFtcyB3aXRoIGRpZmZlcmVudCBwYXJhbWV0ZXIgdmFsdWVzIG9uIGFub3RoZXIgUGF0aE5vZGUuXG4gICAgICpcbiAgICAgKiBHaXZlbiBhbm90aGVyIG5vZGUgKG9mIHRoZSBzYW1lIHN0YXRlKSwgZmluZHMgdGhlIHBhcmFtZXRlciB2YWx1ZXMgd2hpY2ggZGlmZmVyLlxuICAgICAqIFJldHVybnMgdGhlIFtbUGFyYW1dXSAoc2NoZW1hIG9iamVjdHMpIHdob3NlIHBhcmFtZXRlciB2YWx1ZXMgZGlmZmVyLlxuICAgICAqXG4gICAgICogR2l2ZW4gYW5vdGhlciBub2RlIGZvciBhIGRpZmZlcmVudCBzdGF0ZSwgcmV0dXJucyBgZmFsc2VgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBjb21wYXJlIHRvXG4gICAgICogQHBhcmFtIHBhcmFtc0ZuIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHdoaWNoIHBhcmFtZXRlcnMgc2hvdWxkIGJlIGNvbXBhcmVkLlxuICAgICAqIEByZXR1cm5zIFRoZSBbW1BhcmFtXV1zIHdoaWNoIGRpZmZlciwgb3IgbnVsbCBpZiB0aGUgdHdvIG5vZGVzIGFyZSBmb3IgZGlmZmVyZW50IHN0YXRlc1xuICAgICAqL1xuICAgIFBhdGhOb2RlLnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24gKG5vZGUsIHBhcmFtc0ZuKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBub2RlLnN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgcGFyYW1zID0gcGFyYW1zRm4gPyBwYXJhbXNGbih0aGlzKSA6IHRoaXMucGFyYW1TY2hlbWE7XG4gICAgICAgIHJldHVybiBQYXJhbS5jaGFuZ2VkKHBhcmFtcywgdGhpcy5wYXJhbVZhbHVlcywgbm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIFBhdGhOb2RlXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIGluc3RhbmNlIG1ldGhvZCBgbm9kZS5jbG9uZSgpYFxuICAgICAqL1xuICAgIFBhdGhOb2RlLmNsb25lID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuY2xvbmUoKTsgfTtcbiAgICByZXR1cm4gUGF0aE5vZGU7XG59KCkpO1xuZXhwb3J0IHsgUGF0aE5vZGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhdGhOb2RlLmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgc3RhdGVcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi4vY29tbW9uJztcbi8qKlxuICogRW5jYXBzdWxhdGUgdGhlIHRhcmdldCAoZGVzdGluYXRpb24pIHN0YXRlL3BhcmFtcy9vcHRpb25zIG9mIGEgW1tUcmFuc2l0aW9uXV0uXG4gKlxuICogVGhpcyBjbGFzcyBpcyBmcmVxdWVudGx5IHVzZWQgdG8gcmVkaXJlY3QgYSB0cmFuc2l0aW9uIHRvIGEgbmV3IGRlc3RpbmF0aW9uLlxuICpcbiAqIFNlZTpcbiAqXG4gKiAtIFtbSG9va1Jlc3VsdF1dXG4gKiAtIFtbVHJhbnNpdGlvbkhvb2tGbl1dXG4gKiAtIFtbVHJhbnNpdGlvblNlcnZpY2Uub25TdGFydF1dXG4gKlxuICogVG8gY3JlYXRlIGEgYFRhcmdldFN0YXRlYCwgdXNlIFtbU3RhdGVTZXJ2aWNlLnRhcmdldF1dLlxuICpcbiAqIC0tLVxuICpcbiAqIFRoaXMgY2xhc3Mgd3JhcHM6XG4gKlxuICogMSkgYW4gaWRlbnRpZmllciBmb3IgYSBzdGF0ZVxuICogMikgYSBzZXQgb2YgcGFyYW1ldGVyc1xuICogMykgYW5kIHRyYW5zaXRpb24gb3B0aW9uc1xuICogNCkgdGhlIHJlZ2lzdGVyZWQgc3RhdGUgb2JqZWN0ICh0aGUgW1tTdGF0ZURlY2xhcmF0aW9uXV0pXG4gKlxuICogTWFueSBVSS1Sb3V0ZXIgQVBJcyBzdWNoIGFzIFtbU3RhdGVTZXJ2aWNlLmdvXV0gdGFrZSBhIFtbU3RhdGVPck5hbWVdXSBhcmd1bWVudCB3aGljaCBjYW5cbiAqIGVpdGhlciBiZSBhICpzdGF0ZSBvYmplY3QqIChhIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9yIFtbU3RhdGVPYmplY3RdXSkgb3IgYSAqc3RhdGUgbmFtZSogKGEgc3RyaW5nKS5cbiAqIFRoZSBgVGFyZ2V0U3RhdGVgIGNsYXNzIG5vcm1hbGl6ZXMgdGhvc2Ugb3B0aW9ucy5cbiAqXG4gKiBBIGBUYXJnZXRTdGF0ZWAgbWF5IGJlIHZhbGlkICh0aGUgc3RhdGUgYmVpbmcgdGFyZ2V0ZWQgZXhpc3RzIGluIHRoZSByZWdpc3RyeSlcbiAqIG9yIGludmFsaWQgKHRoZSBzdGF0ZSBiZWluZyB0YXJnZXRlZCBpcyBub3QgcmVnaXN0ZXJlZCkuXG4gKi9cbnZhciBUYXJnZXRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgVGFyZ2V0U3RhdGUgY29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIE5vdGU6IERvIG5vdCBjb25zdHJ1Y3QgYSBgVGFyZ2V0U3RhdGVgIG1hbnVhbGx5LlxuICAgICAqIFRvIGNyZWF0ZSBhIGBUYXJnZXRTdGF0ZWAsIHVzZSB0aGUgW1tTdGF0ZVNlcnZpY2UudGFyZ2V0XV0gZmFjdG9yeSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX3N0YXRlUmVnaXN0cnkgVGhlIFN0YXRlUmVnaXN0cnkgdG8gdXNlIHRvIGxvb2sgdXAgdGhlIF9kZWZpbml0aW9uXG4gICAgICogQHBhcmFtIF9pZGVudGlmaWVyIEFuIGlkZW50aWZpZXIgZm9yIGEgc3RhdGUuXG4gICAgICogICAgRWl0aGVyIGEgZnVsbHktcXVhbGlmaWVkIHN0YXRlIG5hbWUsIG9yIHRoZSBvYmplY3QgdXNlZCB0byBkZWZpbmUgdGhlIHN0YXRlLlxuICAgICAqIEBwYXJhbSBfcGFyYW1zIFBhcmFtZXRlcnMgZm9yIHRoZSB0YXJnZXQgc3RhdGVcbiAgICAgKiBAcGFyYW0gX29wdGlvbnMgVHJhbnNpdGlvbiBvcHRpb25zLlxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGFyZ2V0U3RhdGUoX3N0YXRlUmVnaXN0cnksIF9pZGVudGlmaWVyLCBfcGFyYW1zLCBfb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9zdGF0ZVJlZ2lzdHJ5ID0gX3N0YXRlUmVnaXN0cnk7XG4gICAgICAgIHRoaXMuX2lkZW50aWZpZXIgPSBfaWRlbnRpZmllcjtcbiAgICAgICAgdGhpcy5faWRlbnRpZmllciA9IF9pZGVudGlmaWVyO1xuICAgICAgICB0aGlzLl9wYXJhbXMgPSBleHRlbmQoe30sIF9wYXJhbXMgfHwge30pO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHt9LCBfb3B0aW9ucyB8fCB7fSk7XG4gICAgICAgIHRoaXMuX2RlZmluaXRpb24gPSBfc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoX2lkZW50aWZpZXIsIHRoaXMuX29wdGlvbnMucmVsYXRpdmUpO1xuICAgIH1cbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIHN0YXRlIHRoaXMgb2JqZWN0IHRhcmdldHMgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUubmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24ubmFtZSkgfHwgdGhpcy5faWRlbnRpZmllcjtcbiAgICB9O1xuICAgIC8qKiBUaGUgaWRlbnRpZmllciB1c2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBUYXJnZXRTdGF0ZSAqL1xuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5pZGVudGlmaWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWRlbnRpZmllcjtcbiAgICB9O1xuICAgIC8qKiBUaGUgdGFyZ2V0IHBhcmFtZXRlciB2YWx1ZXMgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUucGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyYW1zO1xuICAgIH07XG4gICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvYmplY3QgKGlmIGl0IHdhcyBmb3VuZCkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuJHN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmaW5pdGlvbjtcbiAgICB9O1xuICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgZGVjbGFyYXRpb24gKGlmIGl0IHdhcyBmb3VuZCkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24uc2VsZjtcbiAgICB9O1xuICAgIC8qKiBUaGUgdGFyZ2V0IG9wdGlvbnMgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfTtcbiAgICAvKiogVHJ1ZSBpZiB0aGUgdGFyZ2V0IHN0YXRlIHdhcyBmb3VuZCAqL1xuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5leGlzdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24uc2VsZik7XG4gICAgfTtcbiAgICAvKiogVHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIHZhbGlkICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZXJyb3IoKTtcbiAgICB9O1xuICAgIC8qKiBJZiB0aGUgb2JqZWN0IGlzIGludmFsaWQsIHJldHVybnMgdGhlIHJlYXNvbiB3aHkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBiYXNlID0gdGhpcy5vcHRpb25zKCkucmVsYXRpdmU7XG4gICAgICAgIGlmICghdGhpcy5fZGVmaW5pdGlvbiAmJiAhIWJhc2UpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZU5hbWUgPSBiYXNlLm5hbWUgPyBiYXNlLm5hbWUgOiBiYXNlO1xuICAgICAgICAgICAgcmV0dXJuIFwiQ291bGQgbm90IHJlc29sdmUgJ1wiICsgdGhpcy5uYW1lKCkgKyBcIicgZnJvbSBzdGF0ZSAnXCIgKyBzdGF0ZU5hbWUgKyBcIidcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24pXG4gICAgICAgICAgICByZXR1cm4gXCJObyBzdWNoIHN0YXRlICdcIiArIHRoaXMubmFtZSgpICsgXCInXCI7XG4gICAgICAgIGlmICghdGhpcy5fZGVmaW5pdGlvbi5zZWxmKVxuICAgICAgICAgICAgcmV0dXJuIFwiU3RhdGUgJ1wiICsgdGhpcy5uYW1lKCkgKyBcIicgaGFzIGFuIGludmFsaWQgZGVmaW5pdGlvblwiO1xuICAgIH07XG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCInXCIgKyB0aGlzLm5hbWUoKSArIFwiJ1wiICsgc3RyaW5naWZ5KHRoaXMucGFyYW1zKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyBUYXJnZXRTdGF0ZSB3aGljaCB0YXJnZXRzIGEgZGlmZmVyZW50IHN0YXRlLlxuICAgICAqIFRoZSBuZXcgVGFyZ2V0U3RhdGUgaGFzIHRoZSBzYW1lIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHRyYW5zaXRpb24gb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZSBUaGUgbmV3IHN0YXRlIHRoYXQgc2hvdWxkIGJlIHRhcmdldGVkXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKHRoaXMuX3N0YXRlUmVnaXN0cnksIHN0YXRlLCB0aGlzLl9wYXJhbXMsIHRoaXMuX29wdGlvbnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyBUYXJnZXRTdGF0ZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyB0aGUgbmV3IHBhcmFtZXRlciB2YWx1ZXMgdG8gdXNlXG4gICAgICogQHBhcmFtIHJlcGxhY2UgV2hlbiBmYWxzZSAoZGVmYXVsdCkgdGhlIG5ldyBwYXJhbWV0ZXIgdmFsdWVzIHdpbGwgYmUgbWVyZ2VkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWVzLlxuICAgICAqICAgICAgICAgICAgICAgIFdoZW4gdHJ1ZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2YWx1ZXMuXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhQYXJhbXMgPSBmdW5jdGlvbiAocGFyYW1zLCByZXBsYWNlKSB7XG4gICAgICAgIGlmIChyZXBsYWNlID09PSB2b2lkIDApIHsgcmVwbGFjZSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSByZXBsYWNlID8gcGFyYW1zIDogZXh0ZW5kKHt9LCB0aGlzLl9wYXJhbXMsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgbmV3UGFyYW1zLCB0aGlzLl9vcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgVGFyZ2V0U3RhdGUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgVHJhbnNpdGlvbiBPcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG5ldyBvcHRpb25zIHRvIHVzZVxuICAgICAqIEBwYXJhbSByZXBsYWNlIFdoZW4gZmFsc2UgKGRlZmF1bHQpIHRoZSBuZXcgb3B0aW9ucyB3aWxsIGJlIG1lcmdlZCB3aXRoIHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAgICogICAgICAgICAgICAgICAgV2hlbiB0cnVlIHRoZSBvcHRpb25zIHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMsIHJlcGxhY2UpIHtcbiAgICAgICAgaWYgKHJlcGxhY2UgPT09IHZvaWQgMCkgeyByZXBsYWNlID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIG5ld09wdHMgPSByZXBsYWNlID8gb3B0aW9ucyA6IGV4dGVuZCh7fSwgdGhpcy5fb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgdGhpcy5fcGFyYW1zLCBuZXdPcHRzKTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBoYXMgYSBzdGF0ZSBwcm9wZXJ0eSB0aGF0IG1pZ2h0IGJlIGEgc3RhdGUgb3Igc3RhdGUgbmFtZSAqL1xuICAgIFRhcmdldFN0YXRlLmlzRGVmID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5zdGF0ZSAmJiAoaXNTdHJpbmcob2JqLnN0YXRlKSB8fCBpc1N0cmluZyhvYmouc3RhdGUubmFtZSkpOyB9O1xuICAgIHJldHVybiBUYXJnZXRTdGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBUYXJnZXRTdGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFyZ2V0U3RhdGUuanMubWFwIiwiLyoqIEBtb2R1bGUgcGF0aCAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgZmluZCwgcGljaywgb21pdCwgdGFpbCwgbWVyZ2VSLCB2YWx1ZXMsIHVubmVzdFIsIGluQXJyYXksIGFycmF5VHVwbGVzLCB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBUYXJnZXRTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3RhcmdldFN0YXRlJztcbmltcG9ydCB7IFBhdGhOb2RlIH0gZnJvbSAnLi9wYXRoTm9kZSc7XG4vKipcbiAqIFRoaXMgY2xhc3MgY29udGFpbnMgZnVuY3Rpb25zIHdoaWNoIGNvbnZlcnQgVGFyZ2V0U3RhdGVzLCBOb2RlcyBhbmQgcGF0aHMgZnJvbSBvbmUgdHlwZSB0byBhbm90aGVyLlxuICovXG52YXIgUGF0aFV0aWxzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhdGhVdGlscygpIHtcbiAgICB9XG4gICAgLyoqIEdpdmVuIGEgUGF0aE5vZGVbXSwgY3JlYXRlIGFuIFRhcmdldFN0YXRlICovXG4gICAgUGF0aFV0aWxzLm1ha2VUYXJnZXRTdGF0ZSA9IGZ1bmN0aW9uIChyZWdpc3RyeSwgcGF0aCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0YWlsKHBhdGgpLnN0YXRlO1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKHJlZ2lzdHJ5LCBzdGF0ZSwgcGF0aC5tYXAocHJvcCgncGFyYW1WYWx1ZXMnKSkucmVkdWNlKG1lcmdlUiwge30pLCB7fSk7XG4gICAgfTtcbiAgICBQYXRoVXRpbHMuYnVpbGRQYXRoID0gZnVuY3Rpb24gKHRhcmdldFN0YXRlKSB7XG4gICAgICAgIHZhciB0b1BhcmFtcyA9IHRhcmdldFN0YXRlLnBhcmFtcygpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0U3RhdGUuJHN0YXRlKCkucGF0aC5tYXAoZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBuZXcgUGF0aE5vZGUoc3RhdGUpLmFwcGx5UmF3UGFyYW1zKHRvUGFyYW1zKTsgfSk7XG4gICAgfTtcbiAgICAvKiogR2l2ZW4gYSBmcm9tUGF0aDogUGF0aE5vZGVbXSBhbmQgYSBUYXJnZXRTdGF0ZSwgYnVpbGRzIGEgdG9QYXRoOiBQYXRoTm9kZVtdICovXG4gICAgUGF0aFV0aWxzLmJ1aWxkVG9QYXRoID0gZnVuY3Rpb24gKGZyb21QYXRoLCB0YXJnZXRTdGF0ZSkge1xuICAgICAgICB2YXIgdG9QYXRoID0gUGF0aFV0aWxzLmJ1aWxkUGF0aCh0YXJnZXRTdGF0ZSk7XG4gICAgICAgIGlmICh0YXJnZXRTdGF0ZS5vcHRpb25zKCkuaW5oZXJpdCkge1xuICAgICAgICAgICAgcmV0dXJuIFBhdGhVdGlscy5pbmhlcml0UGFyYW1zKGZyb21QYXRoLCB0b1BhdGgsIE9iamVjdC5rZXlzKHRhcmdldFN0YXRlLnBhcmFtcygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvUGF0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgVmlld0NvbmZpZyBvYmplY3RzIGFuZCBhZGRzIHRvIG5vZGVzLlxuICAgICAqXG4gICAgICogT24gZWFjaCBbW1BhdGhOb2RlXV0sIGNyZWF0ZXMgVmlld0NvbmZpZyBvYmplY3RzIGZyb20gdGhlIHZpZXdzOiBwcm9wZXJ0eSBvZiB0aGUgbm9kZSdzIHN0YXRlXG4gICAgICovXG4gICAgUGF0aFV0aWxzLmFwcGx5Vmlld0NvbmZpZ3MgPSBmdW5jdGlvbiAoJHZpZXcsIHBhdGgsIHN0YXRlcykge1xuICAgICAgICAvLyBPbmx5IGFwcGx5IHRoZSB2aWV3Q29uZmlncyB0byB0aGUgbm9kZXMgZm9yIHRoZSBnaXZlbiBzdGF0ZXNcbiAgICAgICAgcGF0aC5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIGluQXJyYXkoc3RhdGVzLCBub2RlLnN0YXRlKTsgfSkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgdmFyIHZpZXdEZWNscyA9IHZhbHVlcyhub2RlLnN0YXRlLnZpZXdzIHx8IHt9KTtcbiAgICAgICAgICAgIHZhciBzdWJQYXRoID0gUGF0aFV0aWxzLnN1YlBhdGgocGF0aCwgZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4gPT09IG5vZGU7IH0pO1xuICAgICAgICAgICAgdmFyIHZpZXdDb25maWdzID0gdmlld0RlY2xzLm1hcChmdW5jdGlvbiAodmlldykgeyByZXR1cm4gJHZpZXcuY3JlYXRlVmlld0NvbmZpZyhzdWJQYXRoLCB2aWV3KTsgfSk7XG4gICAgICAgICAgICBub2RlLnZpZXdzID0gdmlld0NvbmZpZ3MucmVkdWNlKHVubmVzdFIsIFtdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGZyb21QYXRoIGFuZCBhIHRvUGF0aCwgcmV0dXJucyBhIG5ldyB0byBwYXRoIHdoaWNoIGluaGVyaXRzIHBhcmFtZXRlcnMgZnJvbSB0aGUgZnJvbVBhdGhcbiAgICAgKlxuICAgICAqIEZvciBhIHBhcmFtZXRlciBpbiBhIG5vZGUgdG8gYmUgaW5oZXJpdGVkIGZyb20gdGhlIGZyb20gcGF0aDpcbiAgICAgKiAtIFRoZSB0b1BhdGgncyBub2RlIG11c3QgaGF2ZSBhIG1hdGNoaW5nIG5vZGUgaW4gdGhlIGZyb21QYXRoIChieSBzdGF0ZSkuXG4gICAgICogLSBUaGUgcGFyYW1ldGVyIG5hbWUgbXVzdCBub3QgYmUgZm91bmQgaW4gdGhlIHRvS2V5cyBwYXJhbWV0ZXIgYXJyYXkuXG4gICAgICpcbiAgICAgKiBOb3RlOiB0aGUga2V5cyBwcm92aWRlZCBpbiB0b0tleXMgYXJlIGludGVuZGVkIHRvIGJlIHRob3NlIHBhcmFtIGtleXMgZXhwbGljaXRseSBzcGVjaWZpZWQgYnkgc29tZVxuICAgICAqIGNhbGxlciwgZm9yIGluc3RhbmNlLCAkc3RhdGUudHJhbnNpdGlvblRvKC4uLiwgdG9QYXJhbXMpLiAgSWYgYSBrZXkgd2FzIGZvdW5kIGluIHRvUGFyYW1zLFxuICAgICAqIGl0IGlzIG5vdCBpbmhlcml0ZWQgZnJvbSB0aGUgZnJvbVBhdGguXG4gICAgICovXG4gICAgUGF0aFV0aWxzLmluaGVyaXRQYXJhbXMgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRvUGF0aCwgdG9LZXlzKSB7XG4gICAgICAgIGlmICh0b0tleXMgPT09IHZvaWQgMCkgeyB0b0tleXMgPSBbXTsgfVxuICAgICAgICBmdW5jdGlvbiBub2RlUGFyYW1WYWxzKHBhdGgsIHN0YXRlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IGZpbmQocGF0aCwgcHJvcEVxKCdzdGF0ZScsIHN0YXRlKSk7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBub2RlICYmIG5vZGUucGFyYW1WYWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub0luaGVyaXQgPSBmcm9tUGF0aFxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5wYXJhbVNjaGVtYTsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gIXBhcmFtLmluaGVyaXQ7IH0pXG4gICAgICAgICAgICAubWFwKHByb3AoJ2lkJykpO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2l2ZW4gYW4gW1tQYXRoTm9kZV1dIFwidG9Ob2RlXCIsIHJldHVybiBhIG5ldyBbW1BhdGhOb2RlXV0gd2l0aCBwYXJhbSB2YWx1ZXMgaW5oZXJpdGVkIGZyb20gdGhlXG4gICAgICAgICAqIG1hdGNoaW5nIG5vZGUgaW4gZnJvbVBhdGguICBPbmx5IGluaGVyaXQga2V5cyB0aGF0IGFyZW4ndCBmb3VuZCBpbiBcInRvS2V5c1wiIGZyb20gdGhlIG5vZGUgaW4gXCJmcm9tUGF0aFwiXCJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VJbmhlcml0ZWRQYXJhbXNOb2RlKHRvTm9kZSkge1xuICAgICAgICAgICAgLy8gQWxsIHBhcmFtIHZhbHVlcyBmb3IgdGhlIG5vZGUgKG1heSBpbmNsdWRlIGRlZmF1bHQga2V5L3ZhbHMsIHdoZW4ga2V5IHdhcyBub3QgZm91bmQgaW4gdG9QYXJhbXMpXG4gICAgICAgICAgICB2YXIgdG9QYXJhbVZhbHMgPSBleHRlbmQoe30sIHRvTm9kZSAmJiB0b05vZGUucGFyYW1WYWx1ZXMpO1xuICAgICAgICAgICAgLy8gbGltaXRlZCB0byBvbmx5IHRob3NlIGtleXMgZm91bmQgaW4gdG9QYXJhbXNcbiAgICAgICAgICAgIHZhciBpbmNvbWluZ1BhcmFtVmFscyA9IHBpY2sodG9QYXJhbVZhbHMsIHRvS2V5cyk7XG4gICAgICAgICAgICB0b1BhcmFtVmFscyA9IG9taXQodG9QYXJhbVZhbHMsIHRvS2V5cyk7XG4gICAgICAgICAgICB2YXIgZnJvbVBhcmFtVmFscyA9IG9taXQobm9kZVBhcmFtVmFscyhmcm9tUGF0aCwgdG9Ob2RlLnN0YXRlKSB8fCB7fSwgbm9Jbmhlcml0KTtcbiAgICAgICAgICAgIC8vIGV4dGVuZCB0b1BhcmFtVmFscyB3aXRoIGFueSBmcm9tUGFyYW1WYWxzLCB0aGVuIG92ZXJyaWRlIGFueSBvZiB0aG9zZSB0aG9zZSB3aXRoIGluY29taW5nUGFyYW1WYWxzXG4gICAgICAgICAgICB2YXIgb3duUGFyYW1WYWxzID0gZXh0ZW5kKHRvUGFyYW1WYWxzLCBmcm9tUGFyYW1WYWxzLCBpbmNvbWluZ1BhcmFtVmFscyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKHRvTm9kZS5zdGF0ZSkuYXBwbHlSYXdQYXJhbXMob3duUGFyYW1WYWxzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgcGFyYW0ga2V5cyBzcGVjaWZpZWQgYnkgdGhlIGluY29taW5nIHRvUGFyYW1zXG4gICAgICAgIHJldHVybiB0b1BhdGgubWFwKG1ha2VJbmhlcml0ZWRQYXJhbXNOb2RlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSB0cmVlIGNoYW5nZXMgKGVudGVyaW5nLCBleGl0aW5nKSBiZXR3ZWVuIGEgZnJvbVBhdGggYW5kIHRvUGF0aC5cbiAgICAgKi9cbiAgICBQYXRoVXRpbHMudHJlZUNoYW5nZXMgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRvUGF0aCwgcmVsb2FkU3RhdGUpIHtcbiAgICAgICAgdmFyIG1heCA9IE1hdGgubWluKGZyb21QYXRoLmxlbmd0aCwgdG9QYXRoLmxlbmd0aCk7XG4gICAgICAgIHZhciBrZWVwID0gMDtcbiAgICAgICAgdmFyIG5vZGVzTWF0Y2ggPSBmdW5jdGlvbiAobm9kZTEsIG5vZGUyKSB7IHJldHVybiBub2RlMS5lcXVhbHMobm9kZTIsIFBhdGhVdGlscy5ub25EeW5hbWljUGFyYW1zKTsgfTtcbiAgICAgICAgd2hpbGUgKGtlZXAgPCBtYXggJiYgZnJvbVBhdGhba2VlcF0uc3RhdGUgIT09IHJlbG9hZFN0YXRlICYmIG5vZGVzTWF0Y2goZnJvbVBhdGhba2VlcF0sIHRvUGF0aFtrZWVwXSkpIHtcbiAgICAgICAgICAgIGtlZXArKztcbiAgICAgICAgfVxuICAgICAgICAvKiogR2l2ZW4gYSByZXRhaW5lZCBub2RlLCByZXR1cm4gYSBuZXcgbm9kZSB3aGljaCB1c2VzIHRoZSB0byBub2RlJ3MgcGFyYW0gdmFsdWVzICovXG4gICAgICAgIGZ1bmN0aW9uIGFwcGx5VG9QYXJhbXMocmV0YWluZWROb2RlLCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBjbG9uZWQgPSByZXRhaW5lZE5vZGUuY2xvbmUoKTtcbiAgICAgICAgICAgIGNsb25lZC5wYXJhbVZhbHVlcyA9IHRvUGF0aFtpZHhdLnBhcmFtVmFsdWVzO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZnJvbSwgcmV0YWluZWQsIGV4aXRpbmcsIGVudGVyaW5nLCB0bztcbiAgICAgICAgZnJvbSA9IGZyb21QYXRoO1xuICAgICAgICByZXRhaW5lZCA9IGZyb20uc2xpY2UoMCwga2VlcCk7XG4gICAgICAgIGV4aXRpbmcgPSBmcm9tLnNsaWNlKGtlZXApO1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcmV0YWluZWQgcGF0aCAod2l0aCBzaGFsbG93IGNvcGllcyBvZiBub2Rlcykgd2hpY2ggaGF2ZSB0aGUgcGFyYW1zIG9mIHRoZSB0b1BhdGggbWFwcGVkXG4gICAgICAgIHZhciByZXRhaW5lZFdpdGhUb1BhcmFtcyA9IHJldGFpbmVkLm1hcChhcHBseVRvUGFyYW1zKTtcbiAgICAgICAgZW50ZXJpbmcgPSB0b1BhdGguc2xpY2Uoa2VlcCk7XG4gICAgICAgIHRvID0gcmV0YWluZWRXaXRoVG9QYXJhbXMuY29uY2F0KGVudGVyaW5nKTtcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogZnJvbSwgdG86IHRvLCByZXRhaW5lZDogcmV0YWluZWQsIHJldGFpbmVkV2l0aFRvUGFyYW1zOiByZXRhaW5lZFdpdGhUb1BhcmFtcywgZXhpdGluZzogZXhpdGluZywgZW50ZXJpbmc6IGVudGVyaW5nIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHBhdGggd2hpY2ggaXM6IHRoZSBzdWJwYXRoIG9mIHRoZSBmaXJzdCBwYXRoIHdoaWNoIG1hdGNoZXMgdGhlIHNlY29uZCBwYXRoLlxuICAgICAqXG4gICAgICogVGhlIG5ldyBwYXRoIHN0YXJ0cyBmcm9tIHJvb3QgYW5kIGNvbnRhaW5zIGFueSBub2RlcyB0aGF0IG1hdGNoIHRoZSBub2RlcyBpbiB0aGUgc2Vjb25kIHBhdGguXG4gICAgICogSXQgc3RvcHMgYmVmb3JlIHRoZSBmaXJzdCBub24tbWF0Y2hpbmcgbm9kZS5cbiAgICAgKlxuICAgICAqIE5vZGVzIGFyZSBjb21wYXJlZCB1c2luZyB0aGVpciBzdGF0ZSBwcm9wZXJ0eSBhbmQgdGhlaXIgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICAgKiBJZiBhIGBwYXJhbXNGbmAgaXMgcHJvdmlkZWQsIG9ubHkgdGhlIFtbUGFyYW1dXSByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24gd2lsbCBiZSBjb25zaWRlcmVkIHdoZW4gY29tcGFyaW5nIG5vZGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhBIHRoZSBmaXJzdCBwYXRoXG4gICAgICogQHBhcmFtIHBhdGhCIHRoZSBzZWNvbmQgcGF0aFxuICAgICAqIEBwYXJhbSBwYXJhbXNGbiBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHBhcmFtZXRlcnMgdG8gY29uc2lkZXIgd2hlbiBjb21wYXJpbmdcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIFBhdGhOb2RlcyBmcm9tIHRoZSBmaXJzdCBwYXRoIHdoaWNoIG1hdGNoIHRoZSBub2RlcyBpbiB0aGUgc2Vjb25kIHBhdGhcbiAgICAgKi9cbiAgICBQYXRoVXRpbHMubWF0Y2hpbmcgPSBmdW5jdGlvbiAocGF0aEEsIHBhdGhCLCBwYXJhbXNGbikge1xuICAgICAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgICAgICB2YXIgdHVwbGVzID0gYXJyYXlUdXBsZXMocGF0aEEsIHBhdGhCKTtcbiAgICAgICAgcmV0dXJuIHR1cGxlcy5yZWR1Y2UoZnVuY3Rpb24gKG1hdGNoaW5nLCBfYSkge1xuICAgICAgICAgICAgdmFyIG5vZGVBID0gX2FbMF0sIG5vZGVCID0gX2FbMV07XG4gICAgICAgICAgICBkb25lID0gZG9uZSB8fCAhbm9kZUEuZXF1YWxzKG5vZGVCLCBwYXJhbXNGbik7XG4gICAgICAgICAgICByZXR1cm4gZG9uZSA/IG1hdGNoaW5nIDogbWF0Y2hpbmcuY29uY2F0KG5vZGVBKTtcbiAgICAgICAgfSwgW10pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHR3byBwYXRocyBhcmUgaWRlbnRpY2FsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhBXG4gICAgICogQHBhcmFtIHBhdGhCXG4gICAgICogQHBhcmFtIHBhcmFtc0ZuIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgcGFyYW1ldGVycyB0byBjb25zaWRlciB3aGVuIGNvbXBhcmluZ1xuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHRoZSBzdGF0ZXMgYW5kIHBhcmFtZXRlciB2YWx1ZXMgZm9yIGJvdGggcGF0aHMgYXJlIGlkZW50aWNhbFxuICAgICAqL1xuICAgIFBhdGhVdGlscy5lcXVhbHMgPSBmdW5jdGlvbiAocGF0aEEsIHBhdGhCLCBwYXJhbXNGbikge1xuICAgICAgICByZXR1cm4gcGF0aEEubGVuZ3RoID09PSBwYXRoQi5sZW5ndGggJiYgUGF0aFV0aWxzLm1hdGNoaW5nKHBhdGhBLCBwYXRoQiwgcGFyYW1zRm4pLmxlbmd0aCA9PT0gcGF0aEEubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgc3VicGF0aCBvZiBhIHBhdGgsIHdoaWNoIHN0b3BzIGF0IHRoZSBmaXJzdCBtYXRjaGluZyBub2RlXG4gICAgICpcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBub2RlcywgcmV0dXJucyBhIHN1YnNldCBvZiB0aGUgYXJyYXkgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3Qgbm9kZSxcbiAgICAgKiBzdG9wcGluZyB3aGVuIHRoZSBmaXJzdCBub2RlIG1hdGNoZXMgdGhlIHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIGEgcGF0aCBvZiBbW1BhdGhOb2RlXV1zXG4gICAgICogQHBhcmFtIHByZWRpY2F0ZSBhIFtbUHJlZGljYXRlXV0gZm4gdGhhdCBtYXRjaGVzIFtbUGF0aE5vZGVdXXNcbiAgICAgKiBAcmV0dXJucyBhIHN1YnBhdGggdXAgdG8gdGhlIG1hdGNoaW5nIG5vZGUsIG9yIHVuZGVmaW5lZCBpZiBubyBtYXRjaCBpcyBmb3VuZFxuICAgICAqL1xuICAgIFBhdGhVdGlscy5zdWJQYXRoID0gZnVuY3Rpb24gKHBhdGgsIHByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgbm9kZSA9IGZpbmQocGF0aCwgcHJlZGljYXRlKTtcbiAgICAgICAgdmFyIGVsZW1lbnRJZHggPSBwYXRoLmluZGV4T2Yobm9kZSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50SWR4ID09PSAtMSA/IHVuZGVmaW5lZCA6IHBhdGguc2xpY2UoMCwgZWxlbWVudElkeCArIDEpO1xuICAgIH07XG4gICAgUGF0aFV0aWxzLm5vbkR5bmFtaWNQYXJhbXMgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5zdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogZmFsc2UgfSkuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gIXBhcmFtLmR5bmFtaWM7IH0pO1xuICAgIH07XG4gICAgLyoqIEdldHMgdGhlIHJhdyBwYXJhbWV0ZXIgdmFsdWVzIGZyb20gYSBwYXRoICovXG4gICAgUGF0aFV0aWxzLnBhcmFtVmFsdWVzID0gZnVuY3Rpb24gKHBhdGgpIHsgcmV0dXJuIHBhdGgucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5vZGUpIHsgcmV0dXJuIGV4dGVuZChhY2MsIG5vZGUucGFyYW1WYWx1ZXMpOyB9LCB7fSk7IH07XG4gICAgcmV0dXJuIFBhdGhVdGlscztcbn0oKSk7XG5leHBvcnQgeyBQYXRoVXRpbHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhdGhVdGlscy5qcy5tYXAiLCIvKiogQGludGVybmFsYXBpICovXG5leHBvcnQgdmFyIHJlc29sdmVQb2xpY2llcyA9IHtcbiAgICB3aGVuOiB7XG4gICAgICAgIExBWlk6ICdMQVpZJyxcbiAgICAgICAgRUFHRVI6ICdFQUdFUicsXG4gICAgfSxcbiAgICBhc3luYzoge1xuICAgICAgICBXQUlUOiAnV0FJVCcsXG4gICAgICAgIE5PV0FJVDogJ05PV0FJVCcsXG4gICAgICAgIFJYV0FJVDogJ1JYV0FJVCcsXG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmZhY2UuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSByZXNvbHZlXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBleHRlbmQsIGlkZW50aXR5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgdHJhY2UgfSBmcm9tICcuLi9jb21tb24vdHJhY2UnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiwgaXNPYmplY3QgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBpc051bGxPclVuZGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbi8vIFRPRE86IGV4cGxpY2l0bHkgbWFrZSB0aGlzIHVzZXIgY29uZmlndXJhYmxlXG5leHBvcnQgdmFyIGRlZmF1bHRSZXNvbHZlUG9saWN5ID0ge1xuICAgIHdoZW46ICdMQVpZJyxcbiAgICBhc3luYzogJ1dBSVQnLFxufTtcbi8qKlxuICogVGhlIGJhc2ljIGJ1aWxkaW5nIGJsb2NrIGZvciB0aGUgcmVzb2x2ZSBzeXN0ZW0uXG4gKlxuICogUmVzb2x2YWJsZXMgZW5jYXBzdWxhdGUgYSBzdGF0ZSdzIHJlc29sdmUncyByZXNvbHZlRm4sIHRoZSByZXNvbHZlRm4ncyBkZWNsYXJlZCBkZXBlbmRlbmNpZXMsIHRoZSB3cmFwcGVkICgucHJvbWlzZSksXG4gKiBhbmQgdGhlIHVud3JhcHBlZC13aGVuLWNvbXBsZXRlICguZGF0YSkgcmVzdWx0IG9mIHRoZSByZXNvbHZlRm4uXG4gKlxuICogUmVzb2x2YWJsZS5nZXQoKSBlaXRoZXIgcmV0cmlldmVzIHRoZSBSZXNvbHZhYmxlJ3MgZXhpc3RpbmcgcHJvbWlzZSwgb3IgZWxzZSBpbnZva2VzIHJlc29sdmUoKSAod2hpY2ggaW52b2tlcyB0aGVcbiAqIHJlc29sdmVGbikgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBwcm9taXNlLlxuICpcbiAqIFJlc29sdmFibGUuZ2V0KCkgYW5kIFJlc29sdmFibGUucmVzb2x2ZSgpIGJvdGggZXhlY3V0ZSB3aXRoaW4gYSBjb250ZXh0IHBhdGgsIHdoaWNoIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3RcbiAqIHBhcmFtZXRlciB0byB0aG9zZSBmbnMuXG4gKi9cbnZhciBSZXNvbHZhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc29sdmFibGUoYXJnMSwgcmVzb2x2ZUZuLCBkZXBzLCBwb2xpY3ksIGRhdGEpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChhcmcxIGluc3RhbmNlb2YgUmVzb2x2YWJsZSkge1xuICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGFyZzEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24ocmVzb2x2ZUZuKSkge1xuICAgICAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGFyZzEpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbmV3IFJlc29sdmFibGUoKTogdG9rZW4gYXJndW1lbnQgaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgICAgIGlmICghaXNGdW5jdGlvbihyZXNvbHZlRm4pKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbmV3IFJlc29sdmFibGUoKTogcmVzb2x2ZUZuIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICAgICAgdGhpcy50b2tlbiA9IGFyZzE7XG4gICAgICAgICAgICB0aGlzLnBvbGljeSA9IHBvbGljeTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZUZuID0gcmVzb2x2ZUZuO1xuICAgICAgICAgICAgdGhpcy5kZXBzID0gZGVwcyB8fCBbXTtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gZGF0YSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5yZXNvbHZlZCA/IHNlcnZpY2VzLiRxLndoZW4odGhpcy5kYXRhKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc09iamVjdChhcmcxKSAmJiBhcmcxLnRva2VuICYmIChhcmcxLmhhc093blByb3BlcnR5KCdyZXNvbHZlRm4nKSB8fCBhcmcxLmhhc093blByb3BlcnR5KCdkYXRhJykpKSB7XG4gICAgICAgICAgICB2YXIgbGl0ZXJhbCA9IGFyZzE7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUobGl0ZXJhbC50b2tlbiwgbGl0ZXJhbC5yZXNvbHZlRm4sIGxpdGVyYWwuZGVwcywgbGl0ZXJhbC5wb2xpY3ksIGxpdGVyYWwuZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUuZ2V0UG9saWN5ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciB0aGlzUG9saWN5ID0gdGhpcy5wb2xpY3kgfHwge307XG4gICAgICAgIHZhciBzdGF0ZVBvbGljeSA9IChzdGF0ZSAmJiBzdGF0ZS5yZXNvbHZlUG9saWN5KSB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdoZW46IHRoaXNQb2xpY3kud2hlbiB8fCBzdGF0ZVBvbGljeS53aGVuIHx8IGRlZmF1bHRSZXNvbHZlUG9saWN5LndoZW4sXG4gICAgICAgICAgICBhc3luYzogdGhpc1BvbGljeS5hc3luYyB8fCBzdGF0ZVBvbGljeS5hc3luYyB8fCBkZWZhdWx0UmVzb2x2ZVBvbGljeS5hc3luYyxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91c2x5IHJlc29sdmUgdGhpcyBSZXNvbHZhYmxlJ3MgZGF0YVxuICAgICAqXG4gICAgICogR2l2ZW4gYSBSZXNvbHZlQ29udGV4dCB0aGF0IHRoaXMgUmVzb2x2YWJsZSBpcyBmb3VuZCBpbjpcbiAgICAgKiBXYWl0IGZvciB0aGlzIFJlc29sdmFibGUncyBkZXBlbmRlbmNpZXMsIHRoZW4gaW52b2tlIHRoaXMgUmVzb2x2YWJsZSdzIGZ1bmN0aW9uXG4gICAgICogYW5kIHVwZGF0ZSB0aGUgUmVzb2x2YWJsZSdzIHN0YXRlXG4gICAgICovXG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uIChyZXNvbHZlQ29udGV4dCwgdHJhbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyICRxID0gc2VydmljZXMuJHE7XG4gICAgICAgIC8vIEdldHMgYWxsIGRlcGVuZGVuY2llcyBmcm9tIFJlc29sdmVDb250ZXh0IGFuZCB3YWl0IGZvciB0aGVtIHRvIGJlIHJlc29sdmVkXG4gICAgICAgIHZhciBnZXRSZXNvbHZhYmxlRGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLmFsbChyZXNvbHZlQ29udGV4dC5nZXREZXBlbmRlbmNpZXMoX3RoaXMpLm1hcChmdW5jdGlvbiAocmVzb2x2YWJsZSkgeyByZXR1cm4gcmVzb2x2YWJsZS5nZXQocmVzb2x2ZUNvbnRleHQsIHRyYW5zKTsgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBJbnZva2VzIHRoZSByZXNvbHZlIGZ1bmN0aW9uIHBhc3NpbmcgdGhlIHJlc29sdmVkIGRlcGVuZGVuY2llcyBhcyBhcmd1bWVudHNcbiAgICAgICAgdmFyIGludm9rZVJlc29sdmVGbiA9IGZ1bmN0aW9uIChyZXNvbHZlZERlcHMpIHsgcmV0dXJuIF90aGlzLnJlc29sdmVGbi5hcHBseShudWxsLCByZXNvbHZlZERlcHMpOyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9yIFJYV0FJVCBwb2xpY3k6XG4gICAgICAgICAqXG4gICAgICAgICAqIEdpdmVuIGFuIG9ic2VydmFibGUgcmV0dXJuZWQgZnJvbSBhIHJlc29sdmUgZnVuY3Rpb246XG4gICAgICAgICAqIC0gZW5hYmxlcyAuY2FjaGUoKSBtb2RlICh0aGlzIGFsbG93cyBtdWx0aWNhc3Qgc3Vic2NyaWJlcnMpXG4gICAgICAgICAqIC0gdGhlbiBjYWxscyB0b1Byb21pc2UoKSAodGhpcyB0cmlnZ2VycyBzdWJzY3JpYmUoKSBhbmQgdGh1cyBmZXRjaGVzKVxuICAgICAgICAgKiAtIFdhaXRzIGZvciB0aGUgcHJvbWlzZSwgdGhlbiByZXR1cm4gdGhlIGNhY2hlZCBvYnNlcnZhYmxlIChub3QgdGhlIGZpcnN0IGVtaXR0ZWQgdmFsdWUpLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHdhaXRGb3JSeCA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlJCkge1xuICAgICAgICAgICAgdmFyIGNhY2hlZCA9IG9ic2VydmFibGUkLmNhY2hlKDEpO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFxuICAgICAgICAgICAgICAgIC50YWtlKDEpXG4gICAgICAgICAgICAgICAgLnRvUHJvbWlzZSgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY2FjaGVkOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gSWYgdGhlIHJlc29sdmUgcG9saWN5IGlzIFJYV0FJVCwgd2FpdCBmb3IgdGhlIG9ic2VydmFibGUgdG8gZW1pdCBzb21ldGhpbmcuIG90aGVyd2lzZSBwYXNzIHRocm91Z2guXG4gICAgICAgIHZhciBub2RlID0gcmVzb2x2ZUNvbnRleHQuZmluZE5vZGUodGhpcyk7XG4gICAgICAgIHZhciBzdGF0ZSA9IG5vZGUgJiYgbm9kZS5zdGF0ZTtcbiAgICAgICAgdmFyIG1heWJlV2FpdEZvclJ4ID0gdGhpcy5nZXRQb2xpY3koc3RhdGUpLmFzeW5jID09PSAnUlhXQUlUJyA/IHdhaXRGb3JSeCA6IGlkZW50aXR5O1xuICAgICAgICAvLyBBZnRlciB0aGUgZmluYWwgdmFsdWUgaGFzIGJlZW4gcmVzb2x2ZWQsIHVwZGF0ZSB0aGUgc3RhdGUgb2YgdGhlIFJlc29sdmFibGVcbiAgICAgICAgdmFyIGFwcGx5UmVzb2x2ZWRWYWx1ZSA9IGZ1bmN0aW9uIChyZXNvbHZlZFZhbHVlKSB7XG4gICAgICAgICAgICBfdGhpcy5kYXRhID0gcmVzb2x2ZWRWYWx1ZTtcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmVGbiA9IG51bGw7XG4gICAgICAgICAgICB0cmFjZS50cmFjZVJlc29sdmFibGVSZXNvbHZlZChfdGhpcywgdHJhbnMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFNldHMgdGhlIHByb21pc2UgcHJvcGVydHkgZmlyc3QsIHRoZW4gZ2V0c1Jlc29sdmFibGVEZXBlbmRlbmNpZXMgaW4gdGhlIGNvbnRleHQgb2YgdGhlIHByb21pc2UgY2hhaW4uIEFsd2F5cyB3YWl0cyBvbmUgdGljay5cbiAgICAgICAgcmV0dXJuICh0aGlzLnByb21pc2UgPSAkcVxuICAgICAgICAgICAgLndoZW4oKVxuICAgICAgICAgICAgLnRoZW4oZ2V0UmVzb2x2YWJsZURlcGVuZGVuY2llcylcbiAgICAgICAgICAgIC50aGVuKGludm9rZVJlc29sdmVGbilcbiAgICAgICAgICAgIC50aGVuKG1heWJlV2FpdEZvclJ4KVxuICAgICAgICAgICAgLnRoZW4oYXBwbHlSZXNvbHZlZFZhbHVlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIGEgcHJvbWlzZSBmb3IgdGhpcyBSZXNvbHZhYmxlJ3MgZGF0YS5cbiAgICAgKlxuICAgICAqIEZldGNoZXMgdGhlIGRhdGEgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICAgICAqIFJldHVybnMgdGhlIGV4aXN0aW5nIHByb21pc2UgaWYgaXQgaGFzIGFscmVhZHkgYmVlbiBmZXRjaGVkIG9uY2UuXG4gICAgICovXG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHJlc29sdmVDb250ZXh0LCB0cmFucykge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlIHx8IHRoaXMucmVzb2x2ZShyZXNvbHZlQ29udGV4dCwgdHJhbnMpO1xuICAgIH07XG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlJlc29sdmFibGUodG9rZW46IFwiICsgc3RyaW5naWZ5KHRoaXMudG9rZW4pICsgXCIsIHJlcXVpcmVzOiBbXCIgKyB0aGlzLmRlcHMubWFwKHN0cmluZ2lmeSkgKyBcIl0pXCI7XG4gICAgfTtcbiAgICBSZXNvbHZhYmxlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHRoaXMpO1xuICAgIH07XG4gICAgUmVzb2x2YWJsZS5mcm9tRGF0YSA9IGZ1bmN0aW9uICh0b2tlbiwgZGF0YSkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRhdGE7IH0sIG51bGwsIG51bGwsIGRhdGEpOyB9O1xuICAgIHJldHVybiBSZXNvbHZhYmxlO1xufSgpKTtcbmV4cG9ydCB7IFJlc29sdmFibGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc29sdmFibGUuanMubWFwIiwiLyoqIEBtb2R1bGUgcmVzb2x2ZSAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBmaW5kLCB0YWlsLCB1bmlxUiwgdW5uZXN0UiwgaW5BcnJheSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcEVxLCBub3QgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyByZXNvbHZlUG9saWNpZXMgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi9yZXNvbHZhYmxlJztcbmltcG9ydCB7IFBhdGhVdGlscyB9IGZyb20gJy4uL3BhdGgvcGF0aFV0aWxzJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uJztcbnZhciB3aGVucyA9IHJlc29sdmVQb2xpY2llcy53aGVuO1xudmFyIEFMTF9XSEVOUyA9IFt3aGVucy5FQUdFUiwgd2hlbnMuTEFaWV07XG52YXIgRUFHRVJfV0hFTlMgPSBbd2hlbnMuRUFHRVJdO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWluZmVycmFibGUtdHlwZXNcbmV4cG9ydCB2YXIgTkFUSVZFX0lOSkVDVE9SX1RPS0VOID0gJ05hdGl2ZSBJbmplY3Rvcic7XG4vKipcbiAqIEVuY2Fwc3VsYXRlcyBEZXBlbmRlbmN5IEluamVjdGlvbiBmb3IgYSBwYXRoIG9mIG5vZGVzXG4gKlxuICogVUktUm91dGVyIHN0YXRlcyBhcmUgb3JnYW5pemVkIGFzIGEgdHJlZS5cbiAqIEEgbmVzdGVkIHN0YXRlIGhhcyBhIHBhdGggb2YgYW5jZXN0b3JzIHRvIHRoZSByb290IG9mIHRoZSB0cmVlLlxuICogV2hlbiBhIHN0YXRlIGlzIGJlaW5nIGFjdGl2YXRlZCwgZWFjaCBlbGVtZW50IGluIHRoZSBwYXRoIGlzIHdyYXBwZWQgYXMgYSBbW1BhdGhOb2RlXV0uXG4gKiBBIGBQYXRoTm9kZWAgaXMgYSBzdGF0ZWZ1bCBvYmplY3QgdGhhdCBob2xkcyB0aGluZ3MgbGlrZSBwYXJhbWV0ZXJzIGFuZCByZXNvbHZhYmxlcyBmb3IgdGhlIHN0YXRlIGJlaW5nIGFjdGl2YXRlZC5cbiAqXG4gKiBUaGUgUmVzb2x2ZUNvbnRleHQgY2xvc2VzIG92ZXIgdGhlIFtbUGF0aE5vZGVdXXMsIGFuZCBwcm92aWRlcyBESSBmb3IgdGhlIGxhc3Qgbm9kZSBpbiB0aGUgcGF0aC5cbiAqL1xudmFyIFJlc29sdmVDb250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc29sdmVDb250ZXh0KF9wYXRoKSB7XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICB9XG4gICAgLyoqIEdldHMgYWxsIHRoZSB0b2tlbnMgZm91bmQgaW4gdGhlIHJlc29sdmUgY29udGV4dCwgZGUtZHVwbGljYXRlZCAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5nZXRUb2tlbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXRoLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBub2RlKSB7IHJldHVybiBhY2MuY29uY2F0KG5vZGUucmVzb2x2YWJsZXMubWFwKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnRva2VuOyB9KSk7IH0sIFtdKS5yZWR1Y2UodW5pcVIsIFtdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFJlc29sdmFibGUgdGhhdCBtYXRjaGVzIHRoZSB0b2tlblxuICAgICAqXG4gICAgICogR2V0cyB0aGUgbGFzdCBSZXNvbHZhYmxlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW4gaW4gdGhpcyBjb250ZXh0LCBvciB1bmRlZmluZWQuXG4gICAgICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIFJlc29sdmVDb250ZXh0XG4gICAgICovXG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmdldFJlc29sdmFibGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIG1hdGNoaW5nID0gdGhpcy5fcGF0aFxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5yZXNvbHZhYmxlczsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnRva2VuID09PSB0b2tlbjsgfSk7XG4gICAgICAgIHJldHVybiB0YWlsKG1hdGNoaW5nKTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIHRoZSBbW1Jlc29sdmVQb2xpY3ldXSBmb3IgdGhlIGdpdmVuIFtbUmVzb2x2YWJsZV1dICovXG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmdldFBvbGljeSA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5maW5kTm9kZShyZXNvbHZhYmxlKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0UG9saWN5KG5vZGUuc3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFJlc29sdmVDb250ZXh0IHRoYXQgaW5jbHVkZXMgYSBwb3J0aW9uIG9mIHRoaXMgb25lXG4gICAgICpcbiAgICAgKiBHaXZlbiBhIHN0YXRlLCB0aGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IFJlc29sdmVDb250ZXh0IGZyb20gdGhpcyBvbmUuXG4gICAgICogVGhlIG5ldyBjb250ZXh0IHN0YXJ0cyBhdCB0aGUgZmlyc3Qgbm9kZSAocm9vdCkgYW5kIHN0b3BzIGF0IHRoZSBub2RlIGZvciB0aGUgYHN0YXRlYCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiAjIyMjIFdoeVxuICAgICAqXG4gICAgICogV2hlbiBhIHRyYW5zaXRpb24gaXMgY3JlYXRlZCwgdGhlIG5vZGVzIGluIHRoZSBcIlRvIFBhdGhcIiBhcmUgaW5qZWN0ZWQgZnJvbSBhIFJlc29sdmVDb250ZXh0LlxuICAgICAqIEEgUmVzb2x2ZUNvbnRleHQgY2xvc2VzIG92ZXIgYSBwYXRoIG9mIFtbUGF0aE5vZGVdXXMgYW5kIHByb2Nlc3NlcyB0aGUgcmVzb2x2YWJsZXMuXG4gICAgICogVGhlIFwiVG8gU3RhdGVcIiBjYW4gaW5qZWN0IHZhbHVlcyBmcm9tIGl0cyBvd24gcmVzb2x2YWJsZXMsIGFzIHdlbGwgYXMgdGhvc2UgZnJvbSBhbGwgaXRzIGFuY2VzdG9yIHN0YXRlJ3MgKG5vZGUncykuXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBuYXJyb3dlciBjb250ZXh0IHdoZW4gaW5qZWN0aW5nIGFuY2VzdG9yIG5vZGVzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgbGV0IEFCQ0QgPSBuZXcgUmVzb2x2ZUNvbnRleHQoW0EsIEIsIEMsIERdKTtgXG4gICAgICpcbiAgICAgKiBHaXZlbiBhIHBhdGggYFtBLCBCLCBDLCBEXWAsIHdoZXJlIGBBYCwgYEJgLCBgQ2AgYW5kIGBEYCBhcmUgbm9kZXMgZm9yIHN0YXRlcyBgYWAsIGBiYCwgYGNgLCBgZGA6XG4gICAgICogV2hlbiBpbmplY3RpbmcgYERgLCBgRGAgc2hvdWxkIGhhdmUgYWNjZXNzIHRvIGFsbCByZXNvbHZhYmxlcyBmcm9tIGBBYCwgYEJgLCBgQ2AsIGBEYC5cbiAgICAgKiBIb3dldmVyLCBgQmAgc2hvdWxkIG9ubHkgYmUgYWJsZSB0byBhY2Nlc3MgcmVzb2x2YWJsZXMgZnJvbSBgQWAsIGBCYC5cbiAgICAgKlxuICAgICAqIFdoZW4gcmVzb2x2aW5nIGZvciB0aGUgYEJgIG5vZGUsIGZpcnN0IHRha2UgdGhlIGZ1bGwgXCJUbyBQYXRoXCIgQ29udGV4dCBgW0EsQixDLERdYCBhbmQgbGltaXQgdG8gdGhlIHN1YnBhdGggYFtBLEJdYC5cbiAgICAgKiBgbGV0IEFCID0gQUJDRC5zdWJjb250ZXh0KGEpYFxuICAgICAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5zdWJDb250ZXh0ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQoUGF0aFV0aWxzLnN1YlBhdGgodGhpcy5fcGF0aCwgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuc3RhdGUgPT09IHN0YXRlOyB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIFJlc29sdmFibGVzIHRvIHRoZSBub2RlIHRoYXQgbWF0Y2hlcyB0aGUgc3RhdGVcbiAgICAgKlxuICAgICAqIFRoaXMgYWRkcyBhIFtbUmVzb2x2YWJsZV1dIChnZW5lcmFsbHkgb25lIGNyZWF0ZWQgb24gdGhlIGZseTsgbm90IGRlY2xhcmVkIG9uIGEgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSBibG9jaykuXG4gICAgICogVGhlIHJlc29sdmFibGUgaXMgYWRkZWQgdG8gdGhlIG5vZGUgbWF0Y2hpbmcgdGhlIGBzdGF0ZWAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogVGhlc2UgbmV3IHJlc29sdmFibGVzIGFyZSBub3QgYXV0b21hdGljYWxseSBmZXRjaGVkLlxuICAgICAqIFRoZSBjYWxsaW5nIGNvZGUgc2hvdWxkIGVpdGhlciBmZXRjaCB0aGVtLCBmZXRjaCBzb21ldGhpbmcgdGhhdCBkZXBlbmRzIG9uIHRoZW0sXG4gICAgICogb3IgcmVseSBvbiBbW3Jlc29sdmVQYXRoXV0gYmVpbmcgY2FsbGVkIHdoZW4gc29tZSBzdGF0ZSBpcyBiZWluZyBlbnRlcmVkLlxuICAgICAqXG4gICAgICogTm90ZTogZWFjaCByZXNvbHZhYmxlJ3MgW1tSZXNvbHZlUG9saWN5XV0gaXMgbWVyZ2VkIHdpdGggdGhlIHN0YXRlJ3MgcG9saWN5LCBhbmQgdGhlIGdsb2JhbCBkZWZhdWx0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ld1Jlc29sdmFibGVzIHRoZSBuZXcgUmVzb2x2YWJsZXNcbiAgICAgKiBAcGFyYW0gc3RhdGUgVXNlZCB0byBmaW5kIHRoZSBub2RlIHRvIHB1dCB0aGUgcmVzb2x2YWJsZSBvblxuICAgICAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5hZGRSZXNvbHZhYmxlcyA9IGZ1bmN0aW9uIChuZXdSZXNvbHZhYmxlcywgc3RhdGUpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBmaW5kKHRoaXMuX3BhdGgsIHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgICAgICB2YXIga2V5cyA9IG5ld1Jlc29sdmFibGVzLm1hcChmdW5jdGlvbiAocikgeyByZXR1cm4gci50b2tlbjsgfSk7XG4gICAgICAgIG5vZGUucmVzb2x2YWJsZXMgPSBub2RlLnJlc29sdmFibGVzLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4ga2V5cy5pbmRleE9mKHIudG9rZW4pID09PSAtMTsgfSkuY29uY2F0KG5ld1Jlc29sdmFibGVzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiByZXNvbHZlZCBwYXRoIEVsZW1lbnQgcHJvbWlzZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB3aGVuXG4gICAgICogQHBhcmFtIHRyYW5zXG4gICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pnxhbnl9XG4gICAgICovXG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLnJlc29sdmVQYXRoID0gZnVuY3Rpb24gKHdoZW4sIHRyYW5zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh3aGVuID09PSB2b2lkIDApIHsgd2hlbiA9ICdMQVpZJzsgfVxuICAgICAgICAvLyBUaGlzIG9wdGlvbiBkZXRlcm1pbmVzIHdoaWNoICd3aGVuJyBwb2xpY3kgUmVzb2x2YWJsZXMgd2UgYXJlIGFib3V0IHRvIGZldGNoLlxuICAgICAgICB2YXIgd2hlbk9wdGlvbiA9IGluQXJyYXkoQUxMX1dIRU5TLCB3aGVuKSA/IHdoZW4gOiAnTEFaWSc7XG4gICAgICAgIC8vIElmIHRoZSBjYWxsZXIgc3BlY2lmaWVkIEVBR0VSLCBvbmx5IHRoZSBFQUdFUiBSZXNvbHZhYmxlcyBhcmUgZmV0Y2hlZC5cbiAgICAgICAgLy8gaWYgdGhlIGNhbGxlciBzcGVjaWZpZWQgTEFaWSwgYm90aCBFQUdFUiBhbmQgTEFaWSBSZXNvbHZhYmxlcyBhcmUgZmV0Y2hlZC5gXG4gICAgICAgIHZhciBtYXRjaGVkV2hlbnMgPSB3aGVuT3B0aW9uID09PSByZXNvbHZlUG9saWNpZXMud2hlbi5FQUdFUiA/IEVBR0VSX1dIRU5TIDogQUxMX1dIRU5TO1xuICAgICAgICAvLyBnZXQgdGhlIHN1YnBhdGggdG8gdGhlIHN0YXRlIGFyZ3VtZW50LCBpZiBwcm92aWRlZFxuICAgICAgICB0cmFjZS50cmFjZVJlc29sdmVQYXRoKHRoaXMuX3BhdGgsIHdoZW4sIHRyYW5zKTtcbiAgICAgICAgdmFyIG1hdGNoZXNQb2xpY3kgPSBmdW5jdGlvbiAoYWNjZXB0ZWRWYWxzLCB3aGVuT3JBc3luYykgeyByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbkFycmF5KGFjY2VwdGVkVmFscywgX3RoaXMuZ2V0UG9saWN5KHJlc29sdmFibGUpW3doZW5PckFzeW5jXSk7XG4gICAgICAgIH07IH07XG4gICAgICAgIC8vIFRyaWdnZXIgYWxsIHRoZSAobWF0Y2hpbmcpIFJlc29sdmFibGVzIGluIHRoZSBwYXRoXG4gICAgICAgIC8vIFJlZHVjZSBhbGwgdGhlIFwiV0FJVFwiIFJlc29sdmFibGVzIGludG8gYW4gYXJyYXlcbiAgICAgICAgdmFyIHByb21pc2VzID0gdGhpcy5fcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbm9kZSkge1xuICAgICAgICAgICAgdmFyIG5vZGVSZXNvbHZhYmxlcyA9IG5vZGUucmVzb2x2YWJsZXMuZmlsdGVyKG1hdGNoZXNQb2xpY3kobWF0Y2hlZFdoZW5zLCAnd2hlbicpKTtcbiAgICAgICAgICAgIHZhciBub3dhaXQgPSBub2RlUmVzb2x2YWJsZXMuZmlsdGVyKG1hdGNoZXNQb2xpY3koWydOT1dBSVQnXSwgJ2FzeW5jJykpO1xuICAgICAgICAgICAgdmFyIHdhaXQgPSBub2RlUmVzb2x2YWJsZXMuZmlsdGVyKG5vdChtYXRjaGVzUG9saWN5KFsnTk9XQUlUJ10sICdhc3luYycpKSk7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIG1hdGNoaW5nIFJlc29sdmFibGVzLCBzdGFydCB0aGVpciBhc3luYyBmZXRjaCBwcm9jZXNzLlxuICAgICAgICAgICAgdmFyIHN1YkNvbnRleHQgPSBfdGhpcy5zdWJDb250ZXh0KG5vZGUuc3RhdGUpO1xuICAgICAgICAgICAgdmFyIGdldFJlc3VsdCA9IGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJcbiAgICAgICAgICAgICAgICAgICAgLmdldChzdWJDb250ZXh0LCB0cmFucylcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIGEgdHVwbGUgdGhhdCBpbmNsdWRlcyB0aGUgUmVzb2x2YWJsZSdzIHRva2VuXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gKHsgdG9rZW46IHIudG9rZW4sIHZhbHVlOiB2YWx1ZSB9KTsgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbm93YWl0LmZvckVhY2goZ2V0UmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybiBhY2MuY29uY2F0KHdhaXQubWFwKGdldFJlc3VsdCkpO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIC8vIFdhaXQgZm9yIGFsbCB0aGUgXCJXQUlUXCIgcmVzb2x2YWJsZXNcbiAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLmFsbChwcm9taXNlcyk7XG4gICAgfTtcbiAgICBSZXNvbHZlQ29udGV4dC5wcm90b3R5cGUuaW5qZWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmplY3RvciB8fCAodGhpcy5faW5qZWN0b3IgPSBuZXcgVUlJbmplY3RvckltcGwodGhpcykpO1xuICAgIH07XG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmZpbmROb2RlID0gZnVuY3Rpb24gKHJlc29sdmFibGUpIHtcbiAgICAgICAgcmV0dXJuIGZpbmQodGhpcy5fcGF0aCwgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIGluQXJyYXkobm9kZS5yZXNvbHZhYmxlcywgcmVzb2x2YWJsZSk7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXN5bmMgZGVwZW5kZW5jaWVzIG9mIGEgUmVzb2x2YWJsZVxuICAgICAqXG4gICAgICogR2l2ZW4gYSBSZXNvbHZhYmxlLCByZXR1cm5zIGl0cyBkZXBlbmRlbmNpZXMgYXMgYSBSZXNvbHZhYmxlW11cbiAgICAgKi9cbiAgICBSZXNvbHZlQ29udGV4dC5wcm90b3R5cGUuZ2V0RGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKHJlc29sdmFibGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmZpbmROb2RlKHJlc29sdmFibGUpO1xuICAgICAgICAvLyBGaW5kIHdoaWNoIG90aGVyIHJlc29sdmFibGVzIGFyZSBcInZpc2libGVcIiB0byB0aGUgYHJlc29sdmFibGVgIGFyZ3VtZW50XG4gICAgICAgIC8vIHN1YnBhdGggc3RvcHBpbmcgYXQgcmVzb2x2YWJsZSdzIG5vZGUsIG9yIHRoZSB3aG9sZSBwYXRoIChpZiB0aGUgcmVzb2x2YWJsZSBpc24ndCBpbiB0aGUgcGF0aClcbiAgICAgICAgdmFyIHN1YlBhdGggPSBQYXRoVXRpbHMuc3ViUGF0aCh0aGlzLl9wYXRoLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA9PT0gbm9kZTsgfSkgfHwgdGhpcy5fcGF0aDtcbiAgICAgICAgdmFyIGF2YWlsYWJsZVJlc29sdmFibGVzID0gc3ViUGF0aFxuICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBfbm9kZSkgeyByZXR1cm4gYWNjLmNvbmNhdChfbm9kZS5yZXNvbHZhYmxlcyk7IH0sIFtdKSAvLyBhbGwgb2Ygc3VicGF0aCdzIHJlc29sdmFibGVzXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcyAhPT0gcmVzb2x2YWJsZTsgfSk7IC8vIGZpbHRlciBvdXQgdGhlIGByZXNvbHZhYmxlYCBhcmd1bWVudFxuICAgICAgICB2YXIgZ2V0RGVwZW5kZW5jeSA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIG1hdGNoaW5nID0gYXZhaWxhYmxlUmVzb2x2YWJsZXMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnRva2VuID09PSB0b2tlbjsgfSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hpbmcubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0YWlsKG1hdGNoaW5nKTtcbiAgICAgICAgICAgIHZhciBmcm9tSW5qZWN0b3IgPSBfdGhpcy5pbmplY3RvcigpLmdldE5hdGl2ZSh0b2tlbik7XG4gICAgICAgICAgICBpZiAoaXNVbmRlZmluZWQoZnJvbUluamVjdG9yKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgRGVwZW5kZW5jeSBJbmplY3Rpb24gdG9rZW46ICcgKyBzdHJpbmdpZnkodG9rZW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2YWJsZSh0b2tlbiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZnJvbUluamVjdG9yOyB9LCBbXSwgZnJvbUluamVjdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZGVwcy5tYXAoZ2V0RGVwZW5kZW5jeSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVzb2x2ZUNvbnRleHQ7XG59KCkpO1xuZXhwb3J0IHsgUmVzb2x2ZUNvbnRleHQgfTtcbnZhciBVSUluamVjdG9ySW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVSUluamVjdG9ySW1wbChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMubmF0aXZlID0gdGhpcy5nZXQoTkFUSVZFX0lOSkVDVE9SX1RPS0VOKSB8fCBzZXJ2aWNlcy4kaW5qZWN0b3I7XG4gICAgfVxuICAgIFVJSW5qZWN0b3JJbXBsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIHJlc29sdmFibGUgPSB0aGlzLmNvbnRleHQuZ2V0UmVzb2x2YWJsZSh0b2tlbik7XG4gICAgICAgIGlmIChyZXNvbHZhYmxlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZXh0LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYyA9PT0gJ05PV0FJVCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQodGhpcy5jb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzb2x2YWJsZS5yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzb2x2YWJsZSBhc3luYyAuZ2V0KCkgbm90IGNvbXBsZXRlOicgKyBzdHJpbmdpZnkocmVzb2x2YWJsZS50b2tlbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXROYXRpdmUodG9rZW4pO1xuICAgIH07XG4gICAgVUlJbmplY3RvckltcGwucHJvdG90eXBlLmdldEFzeW5jID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHZhciByZXNvbHZhYmxlID0gdGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodG9rZW4pO1xuICAgICAgICBpZiAocmVzb2x2YWJsZSlcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldCh0aGlzLmNvbnRleHQpO1xuICAgICAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbih0aGlzLm5hdGl2ZS5nZXQodG9rZW4pKTtcbiAgICB9O1xuICAgIFVJSW5qZWN0b3JJbXBsLnByb3RvdHlwZS5nZXROYXRpdmUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlICYmIHRoaXMubmF0aXZlLmdldCh0b2tlbik7XG4gICAgfTtcbiAgICByZXR1cm4gVUlJbmplY3RvckltcGw7XG59KCkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb2x2ZUNvbnRleHQuanMubWFwIiwiLyoqIEBtb2R1bGUgc3RhdGUgKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgYXBwbHlQYWlycywgZXh0ZW5kLCBpZGVudGl0eSwgaW5oZXJpdCwgbWFwT2JqLCBub29wLCBvbWl0LCB0YWlsLCB2YWx1ZXMgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzQXJyYXksIGlzRGVmaW5lZCwgaXNGdW5jdGlvbiwgaXNTdHJpbmcgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICcuLi9jb21tb24vc3RyaW5ncyc7XG5pbXBvcnQgeyBpcywgcGF0dGVybiwgcGlwZSwgcHJvcCwgdmFsIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG52YXIgcGFyc2VVcmwgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgaWYgKCFpc1N0cmluZyh1cmwpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHJvb3QgPSB1cmwuY2hhckF0KDApID09PSAnXic7XG4gICAgcmV0dXJuIHsgdmFsOiByb290ID8gdXJsLnN1YnN0cmluZygxKSA6IHVybCwgcm9vdDogcm9vdCB9O1xufTtcbmZ1bmN0aW9uIG5hbWVCdWlsZGVyKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLm5hbWU7XG59XG5mdW5jdGlvbiBzZWxmQnVpbGRlcihzdGF0ZSkge1xuICAgIHN0YXRlLnNlbGYuJCRzdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0YXRlOyB9O1xuICAgIHJldHVybiBzdGF0ZS5zZWxmO1xufVxuZnVuY3Rpb24gZGF0YUJ1aWxkZXIoc3RhdGUpIHtcbiAgICBpZiAoc3RhdGUucGFyZW50ICYmIHN0YXRlLnBhcmVudC5kYXRhKSB7XG4gICAgICAgIHN0YXRlLmRhdGEgPSBzdGF0ZS5zZWxmLmRhdGEgPSBpbmhlcml0KHN0YXRlLnBhcmVudC5kYXRhLCBzdGF0ZS5kYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlLmRhdGE7XG59XG52YXIgZ2V0VXJsQnVpbGRlciA9IGZ1bmN0aW9uICgkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciwgcm9vdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiB1cmxCdWlsZGVyKHN0YXRlT2JqZWN0KSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHN0YXRlT2JqZWN0LnNlbGY7XG4gICAgICAgIC8vIEZvciBmdXR1cmUgc3RhdGVzLCBpLmUuLCBzdGF0ZXMgd2hvc2UgbmFtZSBlbmRzIHdpdGggYC4qKmAsXG4gICAgICAgIC8vIG1hdGNoIGFueXRoaW5nIHRoYXQgc3RhcnRzIHdpdGggdGhlIHVybCBwcmVmaXhcbiAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLnVybCAmJiBzdGF0ZS5uYW1lICYmIHN0YXRlLm5hbWUubWF0Y2goL1xcLlxcKlxcKiQvKSkge1xuICAgICAgICAgICAgc3RhdGUudXJsICs9ICd7cmVtYWluZGVyOmFueX0nOyAvLyBtYXRjaCBhbnkgcGF0aCAoLiopXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmVudCA9IHN0YXRlT2JqZWN0LnBhcmVudDtcbiAgICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlVXJsKHN0YXRlLnVybCk7XG4gICAgICAgIHZhciB1cmwgPSAhcGFyc2VkID8gc3RhdGUudXJsIDogJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuY29tcGlsZShwYXJzZWQudmFsLCB7IHN0YXRlOiBzdGF0ZSB9KTtcbiAgICAgICAgaWYgKCF1cmwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCEkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5pc01hdGNoZXIodXJsKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdXJsICdcIiArIHVybCArIFwiJyBpbiBzdGF0ZSAnXCIgKyBzdGF0ZU9iamVjdCArIFwiJ1wiKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZCAmJiBwYXJzZWQucm9vdCA/IHVybCA6ICgocGFyZW50ICYmIHBhcmVudC5uYXZpZ2FibGUpIHx8IHJvb3QoKSkudXJsLmFwcGVuZCh1cmwpO1xuICAgIH07XG59O1xudmFyIGdldE5hdmlnYWJsZUJ1aWxkZXIgPSBmdW5jdGlvbiAoaXNSb290KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5hdmlnYWJsZUJ1aWxkZXIoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuICFpc1Jvb3Qoc3RhdGUpICYmIHN0YXRlLnVybCA/IHN0YXRlIDogc3RhdGUucGFyZW50ID8gc3RhdGUucGFyZW50Lm5hdmlnYWJsZSA6IG51bGw7XG4gICAgfTtcbn07XG52YXIgZ2V0UGFyYW1zQnVpbGRlciA9IGZ1bmN0aW9uIChwYXJhbUZhY3RvcnkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcGFyYW1zQnVpbGRlcihzdGF0ZSkge1xuICAgICAgICB2YXIgbWFrZUNvbmZpZ1BhcmFtID0gZnVuY3Rpb24gKGNvbmZpZywgaWQpIHsgcmV0dXJuIHBhcmFtRmFjdG9yeS5mcm9tQ29uZmlnKGlkLCBudWxsLCBzdGF0ZS5zZWxmKTsgfTtcbiAgICAgICAgdmFyIHVybFBhcmFtcyA9IChzdGF0ZS51cmwgJiYgc3RhdGUudXJsLnBhcmFtZXRlcnMoeyBpbmhlcml0OiBmYWxzZSB9KSkgfHwgW107XG4gICAgICAgIHZhciBub25VcmxQYXJhbXMgPSB2YWx1ZXMobWFwT2JqKG9taXQoc3RhdGUucGFyYW1zIHx8IHt9LCB1cmxQYXJhbXMubWFwKHByb3AoJ2lkJykpKSwgbWFrZUNvbmZpZ1BhcmFtKSk7XG4gICAgICAgIHJldHVybiB1cmxQYXJhbXNcbiAgICAgICAgICAgIC5jb25jYXQobm9uVXJsUGFyYW1zKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocCkgeyByZXR1cm4gW3AuaWQsIHBdOyB9KVxuICAgICAgICAgICAgLnJlZHVjZShhcHBseVBhaXJzLCB7fSk7XG4gICAgfTtcbn07XG5mdW5jdGlvbiBwYXRoQnVpbGRlcihzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5wYXJlbnQgPyBzdGF0ZS5wYXJlbnQucGF0aC5jb25jYXQoc3RhdGUpIDogLypyb290Ki8gW3N0YXRlXTtcbn1cbmZ1bmN0aW9uIGluY2x1ZGVzQnVpbGRlcihzdGF0ZSkge1xuICAgIHZhciBpbmNsdWRlcyA9IHN0YXRlLnBhcmVudCA/IGV4dGVuZCh7fSwgc3RhdGUucGFyZW50LmluY2x1ZGVzKSA6IHt9O1xuICAgIGluY2x1ZGVzW3N0YXRlLm5hbWVdID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5jbHVkZXM7XG59XG4vKipcbiAqIFRoaXMgaXMgYSBbW1N0YXRlQnVpbGRlci5idWlsZGVyXV0gZnVuY3Rpb24gZm9yIHRoZSBgcmVzb2x2ZTpgIGJsb2NrIG9uIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0uXG4gKlxuICogV2hlbiB0aGUgW1tTdGF0ZUJ1aWxkZXJdXSBidWlsZHMgYSBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0IGZyb20gYSByYXcgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoaXMgYnVpbGRlclxuICogdmFsaWRhdGVzIHRoZSBgcmVzb2x2ZWAgcHJvcGVydHkgYW5kIGNvbnZlcnRzIGl0IHRvIGEgW1tSZXNvbHZhYmxlXV0gYXJyYXkuXG4gKlxuICogcmVzb2x2ZTogaW5wdXQgdmFsdWUgY2FuIGJlOlxuICpcbiAqIHtcbiAqICAgLy8gYW5hbHl6ZWQgYnV0IG5vdCBpbmplY3RlZFxuICogICBteUZvb1Jlc29sdmU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gXCJteUZvb0RhdGFcIjsgfSxcbiAqXG4gKiAgIC8vIGZ1bmN0aW9uLnRvU3RyaW5nKCkgcGFyc2VkLCBcIkRlcGVuZGVuY3lOYW1lXCIgZGVwIGFzIHN0cmluZyAobm90IG1pbi1zYWZlKVxuICogICBteUJhclJlc29sdmU6IGZ1bmN0aW9uKERlcGVuZGVuY3lOYW1lKSB7IHJldHVybiBEZXBlbmRlbmN5TmFtZS5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sXG4gKlxuICogICAvLyBBcnJheSBzcGxpdDsgXCJEZXBlbmRlbmN5TmFtZVwiIGRlcCBhcyBzdHJpbmdcbiAqICAgbXlCYXpSZXNvbHZlOiBbIFwiRGVwZW5kZW5jeU5hbWVcIiwgZnVuY3Rpb24oZGVwKSB7IHJldHVybiBkZXAuZmV0Y2hTb21ldGhpbmdBc1Byb21pc2UoKSB9LFxuICpcbiAqICAgLy8gQXJyYXkgc3BsaXQ7IERlcGVuZGVuY3lUeXBlIGRlcCBhcyB0b2tlbiAoY29tcGFyZWQgdXNpbmcgPT09KVxuICogICBteVF1eFJlc29sdmU6IFsgRGVwZW5kZW5jeVR5cGUsIGZ1bmN0aW9uKGRlcCkgeyByZXR1cm4gZGVwLmZldGNoU29tZXRpbmdBc1Byb21pc2UoKSB9LFxuICpcbiAqICAgLy8gdmFsLiRpbmplY3QgdXNlZCBhcyBkZXBzXG4gKiAgIC8vIHdoZXJlOlxuICogICAvLyAgICAgY29yZ2VSZXNvbHZlLiRpbmplY3QgPSBbXCJEZXBlbmRlbmN5TmFtZVwiXTtcbiAqICAgLy8gICAgIGZ1bmN0aW9uIGNvcmdlUmVzb2x2ZShkZXApIHsgZGVwLmZldGNoU29tZXRpbmdBc1Byb21pc2UoKSB9XG4gKiAgIC8vIHRoZW4gXCJEZXBlbmRlbmN5TmFtZVwiIGRlcCBhcyBzdHJpbmdcbiAqICAgbXlDb3JnZVJlc29sdmU6IGNvcmdlUmVzb2x2ZSxcbiAqXG4gKiAgLy8gaW5qZWN0IHNlcnZpY2UgYnkgbmFtZVxuICogIC8vIFdoZW4gYSBzdHJpbmcgaXMgZm91bmQsIGRlc3VnYXIgY3JlYXRpbmcgYSByZXNvbHZlIHRoYXQgaW5qZWN0cyB0aGUgbmFtZWQgc2VydmljZVxuICogICBteUdyYXVsdFJlc29sdmU6IFwiU29tZVNlcnZpY2VcIlxuICogfVxuICpcbiAqIG9yOlxuICpcbiAqIFtcbiAqICAgbmV3IFJlc29sdmFibGUoXCJteUZvb1Jlc29sdmVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBcIm15Rm9vRGF0YVwiIH0pLFxuICogICBuZXcgUmVzb2x2YWJsZShcIm15QmFyUmVzb2x2ZVwiLCBmdW5jdGlvbihkZXApIHsgcmV0dXJuIGRlcC5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sIFsgXCJEZXBlbmRlbmN5TmFtZVwiIF0pLFxuICogICB7IHByb3ZpZGU6IFwibXlCYXpSZXNvbHZlXCIsIHVzZUZhY3Rvcnk6IGZ1bmN0aW9uKGRlcCkgeyBkZXAuZmV0Y2hTb21ldGhpbmdBc1Byb21pc2UoKSB9LCBkZXBzOiBbIFwiRGVwZW5kZW5jeU5hbWVcIiBdIH1cbiAqIF1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmFibGVzQnVpbGRlcihzdGF0ZSkge1xuICAgIC8qKiBjb252ZXJ0IHJlc29sdmU6IHt9IGFuZCByZXNvbHZlUG9saWN5OiB7fSBvYmplY3RzIHRvIGFuIGFycmF5IG9mIHR1cGxlcyAqL1xuICAgIHZhciBvYmplY3RzMlR1cGxlcyA9IGZ1bmN0aW9uIChyZXNvbHZlT2JqLCByZXNvbHZlUG9saWNpZXMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHJlc29sdmVPYmogfHwge30pLm1hcChmdW5jdGlvbiAodG9rZW4pIHsgcmV0dXJuICh7XG4gICAgICAgICAgICB0b2tlbjogdG9rZW4sXG4gICAgICAgICAgICB2YWw6IHJlc29sdmVPYmpbdG9rZW5dLFxuICAgICAgICAgICAgZGVwczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcG9saWN5OiByZXNvbHZlUG9saWNpZXNbdG9rZW5dLFxuICAgICAgICB9KTsgfSk7XG4gICAgfTtcbiAgICAvKiogZmV0Y2ggREkgYW5ub3RhdGlvbnMgZnJvbSBhIGZ1bmN0aW9uIG9yIG5nMS1zdHlsZSBhcnJheSAqL1xuICAgIHZhciBhbm5vdGF0ZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB2YXIgJGluamVjdG9yID0gc2VydmljZXMuJGluamVjdG9yO1xuICAgICAgICAvLyBuZzEgZG9lc24ndCBoYXZlIGFuICRpbmplY3RvciB1bnRpbCBydW50aW1lLlxuICAgICAgICAvLyBJZiB0aGUgJGluamVjdG9yIGRvZXNuJ3QgZXhpc3QsIHVzZSBcImRlZmVycmVkXCIgbGl0ZXJhbCBhcyBhXG4gICAgICAgIC8vIG1hcmtlciBpbmRpY2F0aW5nIHRoZXkgc2hvdWxkIGJlIGFubm90YXRlZCB3aGVuIHJ1bnRpbWUgc3RhcnRzXG4gICAgICAgIHJldHVybiBmblsnJGluamVjdCddIHx8ICgkaW5qZWN0b3IgJiYgJGluamVjdG9yLmFubm90YXRlKGZuLCAkaW5qZWN0b3Iuc3RyaWN0RGkpKSB8fCAnZGVmZXJyZWQnO1xuICAgIH07XG4gICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBoYXMgYm90aCBgdG9rZW5gIGFuZCBgcmVzb2x2ZUZuYCwgYW5kIGlzIHByb2JhYmx5IGEgW1tSZXNvbHZlTGl0ZXJhbF1dICovXG4gICAgdmFyIGlzUmVzb2x2ZUxpdGVyYWwgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiAhIShvYmoudG9rZW4gJiYgb2JqLnJlc29sdmVGbik7IH07XG4gICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBsb29rcyBsaWtlIGEgcHJvdmlkZSBsaXRlcmFsLCBvciBhIG5nMiBQcm92aWRlciAqL1xuICAgIHZhciBpc0xpa2VOZzJQcm92aWRlciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICEhKChvYmoucHJvdmlkZSB8fCBvYmoudG9rZW4pICYmIChvYmoudXNlVmFsdWUgfHwgb2JqLnVzZUZhY3RvcnkgfHwgb2JqLnVzZUV4aXN0aW5nIHx8IG9iai51c2VDbGFzcykpO1xuICAgIH07XG4gICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBsb29rcyBsaWtlIGEgdHVwbGUgZnJvbSBvYmoyVHVwbGVzICovXG4gICAgdmFyIGlzVHVwbGVGcm9tT2JqID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gISEob2JqICYmIG9iai52YWwgJiYgKGlzU3RyaW5nKG9iai52YWwpIHx8IGlzQXJyYXkob2JqLnZhbCkgfHwgaXNGdW5jdGlvbihvYmoudmFsKSkpO1xuICAgIH07XG4gICAgLyoqIGV4dHJhY3RzIHRoZSB0b2tlbiBmcm9tIGEgUHJvdmlkZXIgb3IgcHJvdmlkZSBsaXRlcmFsICovXG4gICAgdmFyIGdldFRva2VuID0gZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAucHJvdmlkZSB8fCBwLnRva2VuOyB9O1xuICAgIC8vIHByZXR0aWVyLWlnbm9yZTogR2l2ZW4gYSBsaXRlcmFsIHJlc29sdmUgb3IgcHJvdmlkZXIgb2JqZWN0LCByZXR1cm5zIGEgUmVzb2x2YWJsZVxuICAgIHZhciBsaXRlcmFsMlJlc29sdmFibGUgPSBwYXR0ZXJuKFtcbiAgICAgICAgW3Byb3AoJ3Jlc29sdmVGbicpLCBmdW5jdGlvbiAocCkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIHAucmVzb2x2ZUZuLCBwLmRlcHMsIHAucG9saWN5KTsgfV0sXG4gICAgICAgIFtwcm9wKCd1c2VGYWN0b3J5JyksIGZ1bmN0aW9uIChwKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgcC51c2VGYWN0b3J5LCBwLmRlcHMgfHwgcC5kZXBlbmRlbmNpZXMsIHAucG9saWN5KTsgfV0sXG4gICAgICAgIFtwcm9wKCd1c2VDbGFzcycpLCBmdW5jdGlvbiAocCkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBwLnVzZUNsYXNzKCk7IH0sIFtdLCBwLnBvbGljeSk7IH1dLFxuICAgICAgICBbcHJvcCgndXNlVmFsdWUnKSwgZnVuY3Rpb24gKHApIHsgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKGdldFRva2VuKHApLCBmdW5jdGlvbiAoKSB7IHJldHVybiBwLnVzZVZhbHVlOyB9LCBbXSwgcC5wb2xpY3ksIHAudXNlVmFsdWUpOyB9XSxcbiAgICAgICAgW3Byb3AoJ3VzZUV4aXN0aW5nJyksIGZ1bmN0aW9uIChwKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgaWRlbnRpdHksIFtwLnVzZUV4aXN0aW5nXSwgcC5wb2xpY3kpOyB9XSxcbiAgICBdKTtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICB2YXIgdHVwbGUyUmVzb2x2YWJsZSA9IHBhdHRlcm4oW1xuICAgICAgICBbcGlwZShwcm9wKCd2YWwnKSwgaXNTdHJpbmcpLCBmdW5jdGlvbiAodHVwbGUpIHsgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCBpZGVudGl0eSwgW3R1cGxlLnZhbF0sIHR1cGxlLnBvbGljeSk7IH1dLFxuICAgICAgICBbcGlwZShwcm9wKCd2YWwnKSwgaXNBcnJheSksIGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUodHVwbGUudG9rZW4sIHRhaWwodHVwbGUudmFsKSwgdHVwbGUudmFsLnNsaWNlKDAsIC0xKSwgdHVwbGUucG9saWN5KTsgfV0sXG4gICAgICAgIFtwaXBlKHByb3AoJ3ZhbCcpLCBpc0Z1bmN0aW9uKSwgZnVuY3Rpb24gKHR1cGxlKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZSh0dXBsZS50b2tlbiwgdHVwbGUudmFsLCBhbm5vdGF0ZSh0dXBsZS52YWwpLCB0dXBsZS5wb2xpY3kpOyB9XSxcbiAgICBdKTtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICB2YXIgaXRlbTJSZXNvbHZhYmxlID0gcGF0dGVybihbXG4gICAgICAgIFtpcyhSZXNvbHZhYmxlKSwgZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHI7IH1dLFxuICAgICAgICBbaXNSZXNvbHZlTGl0ZXJhbCwgbGl0ZXJhbDJSZXNvbHZhYmxlXSxcbiAgICAgICAgW2lzTGlrZU5nMlByb3ZpZGVyLCBsaXRlcmFsMlJlc29sdmFibGVdLFxuICAgICAgICBbaXNUdXBsZUZyb21PYmosIHR1cGxlMlJlc29sdmFibGVdLFxuICAgICAgICBbdmFsKHRydWUpLCBmdW5jdGlvbiAob2JqKSB7IHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNvbHZlIHZhbHVlOiAnICsgc3RyaW5naWZ5KG9iaikpOyB9LF0sXG4gICAgXSk7XG4gICAgLy8gSWYgcmVzb2x2ZUJsb2NrIGlzIGFscmVhZHkgYW4gYXJyYXksIHVzZSBpdCBhcy1pcy5cbiAgICAvLyBPdGhlcndpc2UsIGFzc3VtZSBpdCdzIGFuIG9iamVjdCBhbmQgY29udmVydCB0byBhbiBBcnJheSBvZiB0dXBsZXNcbiAgICB2YXIgZGVjbCA9IHN0YXRlLnJlc29sdmU7XG4gICAgdmFyIGl0ZW1zID0gaXNBcnJheShkZWNsKSA/IGRlY2wgOiBvYmplY3RzMlR1cGxlcyhkZWNsLCBzdGF0ZS5yZXNvbHZlUG9saWN5IHx8IHt9KTtcbiAgICByZXR1cm4gaXRlbXMubWFwKGl0ZW0yUmVzb2x2YWJsZSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbGFwaSBBIGludGVybmFsIGdsb2JhbCBzZXJ2aWNlXG4gKlxuICogU3RhdGVCdWlsZGVyIGlzIGEgZmFjdG9yeSBmb3IgdGhlIGludGVybmFsIFtbU3RhdGVPYmplY3RdXSBvYmplY3RzLlxuICpcbiAqIFdoZW4geW91IHJlZ2lzdGVyIGEgc3RhdGUgd2l0aCB0aGUgW1tTdGF0ZVJlZ2lzdHJ5XV0sIHlvdSByZWdpc3RlciBhIHBsYWluIG9sZCBqYXZhc2NyaXB0IG9iamVjdCB3aGljaFxuICogY29uZm9ybXMgdG8gdGhlIFtbU3RhdGVEZWNsYXJhdGlvbl1dIGludGVyZmFjZS4gIFRoaXMgZmFjdG9yeSB0YWtlcyB0aGF0IG9iamVjdCBhbmQgYnVpbGRzIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0LCB3aGljaCBoYXMgYW4gQVBJIGFuZCBpcyB1c2VkIGludGVybmFsbHkuXG4gKlxuICogQ3VzdG9tIHByb3BlcnRpZXMgb3IgQVBJIG1heSBiZSBhZGRlZCB0byB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCBieSByZWdpc3RlcmluZyBhIGRlY29yYXRvciBmdW5jdGlvblxuICogdXNpbmcgdGhlIFtbYnVpbGRlcl1dIG1ldGhvZC5cbiAqL1xudmFyIFN0YXRlQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0ZUJ1aWxkZXIobWF0Y2hlciwgdXJsTWF0Y2hlckZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hlcjtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgcm9vdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hdGNoZXIuZmluZCgnJyk7IH07XG4gICAgICAgIHZhciBpc1Jvb3QgPSBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLm5hbWUgPT09ICcnOyB9O1xuICAgICAgICBmdW5jdGlvbiBwYXJlbnRCdWlsZGVyKHN0YXRlKSB7XG4gICAgICAgICAgICBpZiAoaXNSb290KHN0YXRlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLmZpbmQoc2VsZi5wYXJlbnROYW1lKHN0YXRlKSkgfHwgcm9vdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVpbGRlcnMgPSB7XG4gICAgICAgICAgICBuYW1lOiBbbmFtZUJ1aWxkZXJdLFxuICAgICAgICAgICAgc2VsZjogW3NlbGZCdWlsZGVyXSxcbiAgICAgICAgICAgIHBhcmVudDogW3BhcmVudEJ1aWxkZXJdLFxuICAgICAgICAgICAgZGF0YTogW2RhdGFCdWlsZGVyXSxcbiAgICAgICAgICAgIC8vIEJ1aWxkIGEgVVJMTWF0Y2hlciBpZiBuZWNlc3NhcnksIGVpdGhlciB2aWEgYSByZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkxcbiAgICAgICAgICAgIHVybDogW2dldFVybEJ1aWxkZXIodXJsTWF0Y2hlckZhY3RvcnksIHJvb3QpXSxcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGNsb3Nlc3QgYW5jZXN0b3Igc3RhdGUgdGhhdCBoYXMgYSBVUkwgKGkuZS4gaXMgbmF2aWdhYmxlKVxuICAgICAgICAgICAgbmF2aWdhYmxlOiBbZ2V0TmF2aWdhYmxlQnVpbGRlcihpc1Jvb3QpXSxcbiAgICAgICAgICAgIHBhcmFtczogW2dldFBhcmFtc0J1aWxkZXIodXJsTWF0Y2hlckZhY3RvcnkucGFyYW1GYWN0b3J5KV0sXG4gICAgICAgICAgICAvLyBFYWNoIGZyYW1ld29yay1zcGVjaWZpYyB1aS1yb3V0ZXIgaW1wbGVtZW50YXRpb24gc2hvdWxkIGRlZmluZSBpdHMgb3duIGB2aWV3c2AgYnVpbGRlclxuICAgICAgICAgICAgLy8gZS5nLiwgc3JjL25nMS9zdGF0ZWJ1aWxkZXJzL3ZpZXdzLnRzXG4gICAgICAgICAgICB2aWV3czogW10sXG4gICAgICAgICAgICAvLyBLZWVwIGEgZnVsbCBwYXRoIGZyb20gdGhlIHJvb3QgZG93biB0byB0aGlzIHN0YXRlIGFzIHRoaXMgaXMgbmVlZGVkIGZvciBzdGF0ZSBhY3RpdmF0aW9uLlxuICAgICAgICAgICAgcGF0aDogW3BhdGhCdWlsZGVyXSxcbiAgICAgICAgICAgIC8vIFNwZWVkIHVwICRzdGF0ZS5pbmNsdWRlcygpIGFzIGl0J3MgdXNlZCBhIGxvdFxuICAgICAgICAgICAgaW5jbHVkZXM6IFtpbmNsdWRlc0J1aWxkZXJdLFxuICAgICAgICAgICAgcmVzb2x2YWJsZXM6IFtyZXNvbHZhYmxlc0J1aWxkZXJdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBbW0J1aWxkZXJGdW5jdGlvbl1dIGZvciBhIHNwZWNpZmljIFtbU3RhdGVPYmplY3RdXSBwcm9wZXJ0eSAoZS5nLiwgYHBhcmVudGAsIGB1cmxgLCBvciBgcGF0aGApLlxuICAgICAqIE1vcmUgdGhhbiBvbmUgQnVpbGRlckZ1bmN0aW9uIGNhbiBiZSByZWdpc3RlcmVkIGZvciBhIGdpdmVuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogVGhlIEJ1aWxkZXJGdW5jdGlvbihzKSB3aWxsIGJlIHVzZWQgdG8gZGVmaW5lIHRoZSBwcm9wZXJ0eSBvbiBhbnkgc3Vic2VxdWVudGx5IGJ1aWx0IFtbU3RhdGVPYmplY3RdXSBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIFN0YXRlIHByb3BlcnR5IGJlaW5nIHJlZ2lzdGVyZWQgZm9yLlxuICAgICAqIEBwYXJhbSBmbiBUaGUgQnVpbGRlckZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBidWlsZCB0aGUgU3RhdGUgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBCdWlsZGVyRnVuY3Rpb25cbiAgICAgKi9cbiAgICBTdGF0ZUJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkZXIgPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcbiAgICAgICAgdmFyIGJ1aWxkZXJzID0gdGhpcy5idWlsZGVycztcbiAgICAgICAgdmFyIGFycmF5ID0gYnVpbGRlcnNbbmFtZV0gfHwgW107XG4gICAgICAgIC8vIEJhY2t3YXJkcyBjb21wYXQ6IGlmIG9ubHkgb25lIGJ1aWxkZXIgZXhpc3RzLCByZXR1cm4gaXQsIGVsc2UgcmV0dXJuIHdob2xlIGFyYXJ5LlxuICAgICAgICBpZiAoaXNTdHJpbmcobmFtZSkgJiYgIWlzRGVmaW5lZChmbikpXG4gICAgICAgICAgICByZXR1cm4gYXJyYXkubGVuZ3RoID4gMSA/IGFycmF5IDogYXJyYXlbMF07XG4gICAgICAgIGlmICghaXNTdHJpbmcobmFtZSkgfHwgIWlzRnVuY3Rpb24oZm4pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBidWlsZGVyc1tuYW1lXSA9IGFycmF5O1xuICAgICAgICBidWlsZGVyc1tuYW1lXS5wdXNoKGZuKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJ1aWxkZXJzW25hbWVdLnNwbGljZShidWlsZGVyc1tuYW1lXS5pbmRleE9mKGZuLCAxKSkgJiYgbnVsbDsgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhbGwgb2YgdGhlIHByb3BlcnRpZXMgb24gYW4gZXNzZW50aWFsbHkgYmxhbmsgU3RhdGUgb2JqZWN0LCByZXR1cm5pbmcgYSBTdGF0ZSBvYmplY3Qgd2hpY2ggaGFzIGFsbCBpdHNcbiAgICAgKiBwcm9wZXJ0aWVzIGFuZCBBUEkgYnVpbHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGUgYW4gdW5pbml0aWFsaXplZCBTdGF0ZSBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB0aGUgYnVpbHQgU3RhdGUgb2JqZWN0XG4gICAgICovXG4gICAgU3RhdGVCdWlsZGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBtYXRjaGVyID0gX2EubWF0Y2hlciwgYnVpbGRlcnMgPSBfYS5idWlsZGVycztcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50TmFtZShzdGF0ZSk7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgIW1hdGNoZXIuZmluZChwYXJlbnQsIHVuZGVmaW5lZCwgZmFsc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYnVpbGRlcnMpIHtcbiAgICAgICAgICAgIGlmICghYnVpbGRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHZhciBjaGFpbiA9IGJ1aWxkZXJzW2tleV0ucmVkdWNlKGZ1bmN0aW9uIChwYXJlbnRGbiwgc3RlcCkgeyByZXR1cm4gZnVuY3Rpb24gKF9zdGF0ZSkgeyByZXR1cm4gc3RlcChfc3RhdGUsIHBhcmVudEZuKTsgfTsgfSwgbm9vcCk7XG4gICAgICAgICAgICBzdGF0ZVtrZXldID0gY2hhaW4oc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9O1xuICAgIFN0YXRlQnVpbGRlci5wcm90b3R5cGUucGFyZW50TmFtZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAvLyBuYW1lID0gJ2Zvby5iYXIuYmF6LioqJ1xuICAgICAgICB2YXIgbmFtZSA9IHN0YXRlLm5hbWUgfHwgJyc7XG4gICAgICAgIC8vIHNlZ21lbnRzID0gWydmb28nLCAnYmFyJywgJ2JheicsICcuKionXVxuICAgICAgICB2YXIgc2VnbWVudHMgPSBuYW1lLnNwbGl0KCcuJyk7XG4gICAgICAgIC8vIHNlZ21lbnRzID0gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICAgIHZhciBsYXN0U2VnbWVudCA9IHNlZ21lbnRzLnBvcCgpO1xuICAgICAgICAvLyBzZWdtZW50cyA9IFsnZm9vJywgJ2JhciddIChpZ25vcmUgLioqIHNlZ21lbnQgZm9yIGZ1dHVyZSBzdGF0ZXMpXG4gICAgICAgIGlmIChsYXN0U2VnbWVudCA9PT0gJyoqJylcbiAgICAgICAgICAgIHNlZ21lbnRzLnBvcCgpO1xuICAgICAgICBpZiAoc2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3RhdGVzIHRoYXQgc3BlY2lmeSB0aGUgJ3BhcmVudDonIHByb3BlcnR5IHNob3VsZCBub3QgaGF2ZSBhICcuJyBpbiB0aGVpciBuYW1lIChcIiArIG5hbWUgKyBcIilcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAnZm9vLmJhcidcbiAgICAgICAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKCcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdGF0ZS5wYXJlbnQpXG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIHJldHVybiBpc1N0cmluZyhzdGF0ZS5wYXJlbnQpID8gc3RhdGUucGFyZW50IDogc3RhdGUucGFyZW50Lm5hbWU7XG4gICAgfTtcbiAgICBTdGF0ZUJ1aWxkZXIucHJvdG90eXBlLm5hbWUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBzdGF0ZS5uYW1lO1xuICAgICAgICBpZiAobmFtZS5pbmRleE9mKCcuJykgIT09IC0xIHx8ICFzdGF0ZS5wYXJlbnQpXG4gICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgdmFyIHBhcmVudE5hbWUgPSBpc1N0cmluZyhzdGF0ZS5wYXJlbnQpID8gc3RhdGUucGFyZW50IDogc3RhdGUucGFyZW50Lm5hbWU7XG4gICAgICAgIHJldHVybiBwYXJlbnROYW1lID8gcGFyZW50TmFtZSArICcuJyArIG5hbWUgOiBuYW1lO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRlQnVpbGRlcjtcbn0oKSk7XG5leHBvcnQgeyBTdGF0ZUJ1aWxkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlQnVpbGRlci5qcy5tYXAiLCJ2YXIgVHJhbnNpdGlvbkhvb2tQaGFzZTtcbihmdW5jdGlvbiAoVHJhbnNpdGlvbkhvb2tQaGFzZSkge1xuICAgIFRyYW5zaXRpb25Ib29rUGhhc2VbVHJhbnNpdGlvbkhvb2tQaGFzZVtcIkNSRUFURVwiXSA9IDBdID0gXCJDUkVBVEVcIjtcbiAgICBUcmFuc2l0aW9uSG9va1BoYXNlW1RyYW5zaXRpb25Ib29rUGhhc2VbXCJCRUZPUkVcIl0gPSAxXSA9IFwiQkVGT1JFXCI7XG4gICAgVHJhbnNpdGlvbkhvb2tQaGFzZVtUcmFuc2l0aW9uSG9va1BoYXNlW1wiUlVOXCJdID0gMl0gPSBcIlJVTlwiO1xuICAgIFRyYW5zaXRpb25Ib29rUGhhc2VbVHJhbnNpdGlvbkhvb2tQaGFzZVtcIlNVQ0NFU1NcIl0gPSAzXSA9IFwiU1VDQ0VTU1wiO1xuICAgIFRyYW5zaXRpb25Ib29rUGhhc2VbVHJhbnNpdGlvbkhvb2tQaGFzZVtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XG59KShUcmFuc2l0aW9uSG9va1BoYXNlIHx8IChUcmFuc2l0aW9uSG9va1BoYXNlID0ge30pKTtcbnZhciBUcmFuc2l0aW9uSG9va1Njb3BlO1xuKGZ1bmN0aW9uIChUcmFuc2l0aW9uSG9va1Njb3BlKSB7XG4gICAgVHJhbnNpdGlvbkhvb2tTY29wZVtUcmFuc2l0aW9uSG9va1Njb3BlW1wiVFJBTlNJVElPTlwiXSA9IDBdID0gXCJUUkFOU0lUSU9OXCI7XG4gICAgVHJhbnNpdGlvbkhvb2tTY29wZVtUcmFuc2l0aW9uSG9va1Njb3BlW1wiU1RBVEVcIl0gPSAxXSA9IFwiU1RBVEVcIjtcbn0pKFRyYW5zaXRpb25Ib29rU2NvcGUgfHwgKFRyYW5zaXRpb25Ib29rU2NvcGUgPSB7fSkpO1xuZXhwb3J0IHsgVHJhbnNpdGlvbkhvb2tQaGFzZSwgVHJhbnNpdGlvbkhvb2tTY29wZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJmYWNlLmpzLm1hcCIsImltcG9ydCB7IGRlZmF1bHRzLCB2YWx1ZXMsIGZpbmQsIGluaGVyaXQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHByb3BFcSB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgR2xvYiB9IGZyb20gJy4uL2NvbW1vbi9nbG9iJztcbmltcG9ydCB7IGlzT2JqZWN0LCBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuLyoqXG4gKiBJbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhIFVJLVJvdXRlciBzdGF0ZS5cbiAqXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgY3JlYXRlZCB3aGVuIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1N0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiBBIHJlZ2lzdGVyZWQgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgYXVnbWVudGVkIHdpdGggYSBnZXR0ZXIgKFtbU3RhdGVEZWNsYXJhdGlvbi4kJHN0YXRlXV0pIHdoaWNoIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAqXG4gKiBUaGlzIGNsYXNzIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIFtbU3RhdGVEZWNsYXJhdGlvbl1dLlxuICogRWFjaCBvZiBpdHMgb3duIHByb3BlcnRpZXMgKGkuZS4sIGBoYXNPd25Qcm9wZXJ0eWApIGFyZSBidWlsdCB1c2luZyBidWlsZGVycyBmcm9tIHRoZSBbW1N0YXRlQnVpbGRlcl1dLlxuICovXG52YXIgU3RhdGVPYmplY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBkZXByZWNhdGVkIHVzZSBTdGF0ZS5jcmVhdGUoKSAqL1xuICAgIGZ1bmN0aW9uIFN0YXRlT2JqZWN0KGNvbmZpZykge1xuICAgICAgICByZXR1cm4gU3RhdGVPYmplY3QuY3JlYXRlKGNvbmZpZyB8fCB7fSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHN0YXRlIG9iamVjdCB0byBwdXQgdGhlIHByaXZhdGUvaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbnRvLlxuICAgICAqIFRoZSBvYmplY3QncyBwcm90b3R5cGUgY2hhaW4gbG9va3MgbGlrZTpcbiAgICAgKiAoSW50ZXJuYWwgU3RhdGUgT2JqZWN0KSAtPiAoQ29weSBvZiBTdGF0ZS5wcm90b3R5cGUpIC0+IChTdGF0ZSBEZWNsYXJhdGlvbiBvYmplY3QpIC0+IChTdGF0ZSBEZWNsYXJhdGlvbidzIHByb3RvdHlwZS4uLilcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZURlY2wgdGhlIHVzZXItc3VwcGxpZWQgU3RhdGUgRGVjbGFyYXRpb25cbiAgICAgKiBAcmV0dXJucyB7U3RhdGVPYmplY3R9IGFuIGludGVybmFsIFN0YXRlIG9iamVjdFxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChzdGF0ZURlY2wpIHtcbiAgICAgICAgc3RhdGVEZWNsID0gU3RhdGVPYmplY3QuaXNTdGF0ZUNsYXNzKHN0YXRlRGVjbCkgPyBuZXcgc3RhdGVEZWNsKCkgOiBzdGF0ZURlY2w7XG4gICAgICAgIHZhciBzdGF0ZSA9IGluaGVyaXQoaW5oZXJpdChzdGF0ZURlY2wsIFN0YXRlT2JqZWN0LnByb3RvdHlwZSkpO1xuICAgICAgICBzdGF0ZURlY2wuJCRzdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0YXRlOyB9O1xuICAgICAgICBzdGF0ZS5zZWxmID0gc3RhdGVEZWNsO1xuICAgICAgICBzdGF0ZS5fX3N0YXRlT2JqZWN0Q2FjaGUgPSB7XG4gICAgICAgICAgICBuYW1lR2xvYjogR2xvYi5mcm9tU3RyaW5nKHN0YXRlLm5hbWUpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhcmFtZXRlciBpcyB0aGUgc2FtZSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIENvbXBhcmVzIHRoZSBpZGVudGl0eSBvZiB0aGUgc3RhdGUgYWdhaW5zdCB0aGUgcGFzc2VkIHZhbHVlLCB3aGljaCBpcyBlaXRoZXIgYW4gb2JqZWN0XG4gICAgICogcmVmZXJlbmNlIHRvIHRoZSBhY3R1YWwgYFN0YXRlYCBpbnN0YW5jZSwgdGhlIG9yaWdpbmFsIGRlZmluaXRpb24gb2JqZWN0IHBhc3NlZCB0b1xuICAgICAqIGAkc3RhdGVQcm92aWRlci5zdGF0ZSgpYCwgb3IgdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlZiBDYW4gYmUgb25lIG9mIChhKSBhIGBTdGF0ZWAgaW5zdGFuY2UsIChiKSBhbiBvYmplY3QgdGhhdCB3YXMgcGFzc2VkXG4gICAgICogICAgICAgIGludG8gYCRzdGF0ZVByb3ZpZGVyLnN0YXRlKClgLCAoYykgdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1lIG9mIGEgc3RhdGUgYXMgYSBzdHJpbmcuXG4gICAgICogQHJldHVybnMgUmV0dXJucyBgdHJ1ZWAgaWYgYHJlZmAgbWF0Y2hlcyB0aGUgY3VycmVudCBgU3RhdGVgIGluc3RhbmNlLlxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHJlZiB8fCB0aGlzLnNlbGYgPT09IHJlZiB8fCB0aGlzLmZxbigpID09PSByZWY7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCB0aGlzIGRvZXMgbm90IHByb3Blcmx5IGhhbmRsZSBkb3Qgbm90YXRpb25cbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgZG90LXNlcGFyYXRlZCBuYW1lIG9mIHRoZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBTdGF0ZU9iamVjdC5wcm90b3R5cGUuZnFuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyZW50IHx8ICEodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICAgIHZhciBuYW1lID0gdGhpcy5wYXJlbnQuZnFuKCk7XG4gICAgICAgIHJldHVybiBuYW1lID8gbmFtZSArICcuJyArIHRoaXMubmFtZSA6IHRoaXMubmFtZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJvb3Qgbm9kZSBvZiB0aGlzIHN0YXRlJ3MgdHJlZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByb290IG9mIHRoaXMgc3RhdGUncyB0cmVlLlxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5yb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnJvb3QoKSkgfHwgdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXRlJ3MgYFBhcmFtYCBvYmplY3RzXG4gICAgICpcbiAgICAgKiBHZXRzIHRoZSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIG93bmVkIGJ5IHRoZSBzdGF0ZS5cbiAgICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIGluY2x1ZGVzIHRoZSBhbmNlc3RvciBzdGF0ZXMnIFtbUGFyYW1dXSBvYmplY3RzLlxuICAgICAqIElmIGBvcHRzLm1hdGNoaW5nS2V5c2AgZXhpc3RzLCByZXR1cm5zIG9ubHkgYFBhcmFtYHMgd2hvc2UgYGlkYCBpcyBhIGtleSBvbiB0aGUgYG1hdGNoaW5nS2V5c2Agb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0cyBvcHRpb25zXG4gICAgICovXG4gICAgU3RhdGVPYmplY3QucHJvdG90eXBlLnBhcmFtZXRlcnMgPSBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICBvcHRzID0gZGVmYXVsdHMob3B0cywgeyBpbmhlcml0OiB0cnVlLCBtYXRjaGluZ0tleXM6IG51bGwgfSk7XG4gICAgICAgIHZhciBpbmhlcml0ZWQgPSAob3B0cy5pbmhlcml0ICYmIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnBhcmFtZXRlcnMoKSkgfHwgW107XG4gICAgICAgIHJldHVybiBpbmhlcml0ZWRcbiAgICAgICAgICAgIC5jb25jYXQodmFsdWVzKHRoaXMucGFyYW1zKSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhb3B0cy5tYXRjaGluZ0tleXMgfHwgb3B0cy5tYXRjaGluZ0tleXMuaGFzT3duUHJvcGVydHkocGFyYW0uaWQpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzaW5nbGUgW1tQYXJhbV1dIHRoYXQgaXMgb3duZWQgYnkgdGhlIHN0YXRlXG4gICAgICpcbiAgICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIHNlYXJjaGVzIHRoZSBhbmNlc3RvciBzdGF0ZXNgIFtbUGFyYW1dXXMuXG4gICAgICogQHBhcmFtIGlkIHRoZSBuYW1lIG9mIHRoZSBbW1BhcmFtXV0gdG8gcmV0dXJuXG4gICAgICogQHBhcmFtIG9wdHMgb3B0aW9uc1xuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5wYXJhbWV0ZXIgPSBmdW5jdGlvbiAoaWQsIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICAgICAgcmV0dXJuICgodGhpcy51cmwgJiYgdGhpcy51cmwucGFyYW1ldGVyKGlkLCBvcHRzKSkgfHxcbiAgICAgICAgICAgIGZpbmQodmFsdWVzKHRoaXMucGFyYW1zKSwgcHJvcEVxKCdpZCcsIGlkKSkgfHxcbiAgICAgICAgICAgIChvcHRzLmluaGVyaXQgJiYgdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQucGFyYW1ldGVyKGlkKSkpO1xuICAgIH07XG4gICAgU3RhdGVPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcW4oKTtcbiAgICB9O1xuICAgIC8qKiBQcmVkaWNhdGUgd2hpY2ggcmV0dXJucyB0cnVlIGlmIHRoZSBvYmplY3QgaXMgYW4gY2xhc3Mgd2l0aCBAU3RhdGUoKSBkZWNvcmF0b3IgKi9cbiAgICBTdGF0ZU9iamVjdC5pc1N0YXRlQ2xhc3MgPSBmdW5jdGlvbiAoc3RhdGVEZWNsKSB7XG4gICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKHN0YXRlRGVjbCkgJiYgc3RhdGVEZWNsWydfX3VpUm91dGVyU3RhdGUnXSA9PT0gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKiBQcmVkaWNhdGUgd2hpY2ggcmV0dXJucyB0cnVlIGlmIHRoZSBvYmplY3QgaXMgYW4gaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCAqL1xuICAgIFN0YXRlT2JqZWN0LmlzU3RhdGUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBpc09iamVjdChvYmpbJ19fc3RhdGVPYmplY3RDYWNoZSddKTsgfTtcbiAgICByZXR1cm4gU3RhdGVPYmplY3Q7XG59KCkpO1xuZXhwb3J0IHsgU3RhdGVPYmplY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlT2JqZWN0LmpzLm1hcCIsIi8qKiBAbW9kdWxlIHN0YXRlICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyB2YWx1ZXMgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbnZhciBTdGF0ZU1hdGNoZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGVNYXRjaGVyKF9zdGF0ZXMpIHtcbiAgICAgICAgdGhpcy5fc3RhdGVzID0gX3N0YXRlcztcbiAgICB9XG4gICAgU3RhdGVNYXRjaGVyLnByb3RvdHlwZS5pc1JlbGF0aXZlID0gZnVuY3Rpb24gKHN0YXRlTmFtZSkge1xuICAgICAgICBzdGF0ZU5hbWUgPSBzdGF0ZU5hbWUgfHwgJyc7XG4gICAgICAgIHJldHVybiBzdGF0ZU5hbWUuaW5kZXhPZignLicpID09PSAwIHx8IHN0YXRlTmFtZS5pbmRleE9mKCdeJykgPT09IDA7XG4gICAgfTtcbiAgICBTdGF0ZU1hdGNoZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIGJhc2UsIG1hdGNoR2xvYikge1xuICAgICAgICBpZiAobWF0Y2hHbG9iID09PSB2b2lkIDApIHsgbWF0Y2hHbG9iID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoIXN0YXRlT3JOYW1lICYmIHN0YXRlT3JOYW1lICE9PSAnJylcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBpc1N0ciA9IGlzU3RyaW5nKHN0YXRlT3JOYW1lKTtcbiAgICAgICAgdmFyIG5hbWUgPSBpc1N0ciA/IHN0YXRlT3JOYW1lIDogc3RhdGVPck5hbWUubmFtZTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWxhdGl2ZShuYW1lKSlcbiAgICAgICAgICAgIG5hbWUgPSB0aGlzLnJlc29sdmVQYXRoKG5hbWUsIGJhc2UpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZXNbbmFtZV07XG4gICAgICAgIGlmIChzdGF0ZSAmJiAoaXNTdHIgfHwgKCFpc1N0ciAmJiAoc3RhdGUgPT09IHN0YXRlT3JOYW1lIHx8IHN0YXRlLnNlbGYgPT09IHN0YXRlT3JOYW1lKSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTdHIgJiYgbWF0Y2hHbG9iKSB7XG4gICAgICAgICAgICB2YXIgX3N0YXRlcyA9IHZhbHVlcyh0aGlzLl9zdGF0ZXMpO1xuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBfc3RhdGVzLmZpbHRlcihmdW5jdGlvbiAoX3N0YXRlKSB7IHJldHVybiBfc3RhdGUuX19zdGF0ZU9iamVjdENhY2hlLm5hbWVHbG9iICYmIF9zdGF0ZS5fX3N0YXRlT2JqZWN0Q2FjaGUubmFtZUdsb2IubWF0Y2hlcyhuYW1lKTsgfSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0YXRlTWF0Y2hlci5maW5kOiBGb3VuZCBtdWx0aXBsZSBtYXRjaGVzIGZvciBcIiArIG5hbWUgKyBcIiB1c2luZyBnbG9iOiBcIiwgbWF0Y2hlcy5tYXAoZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC5uYW1lOyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlc1swXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgU3RhdGVNYXRjaGVyLnByb3RvdHlwZS5yZXNvbHZlUGF0aCA9IGZ1bmN0aW9uIChuYW1lLCBiYXNlKSB7XG4gICAgICAgIGlmICghYmFzZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJlZmVyZW5jZSBwb2ludCBnaXZlbiBmb3IgcGF0aCAnXCIgKyBuYW1lICsgXCInXCIpO1xuICAgICAgICB2YXIgYmFzZVN0YXRlID0gdGhpcy5maW5kKGJhc2UpO1xuICAgICAgICB2YXIgc3BsaXROYW1lID0gbmFtZS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgcGF0aExlbmd0aCA9IHNwbGl0TmFtZS5sZW5ndGg7XG4gICAgICAgIHZhciBpID0gMCwgY3VycmVudCA9IGJhc2VTdGF0ZTtcbiAgICAgICAgZm9yICg7IGkgPCBwYXRoTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzcGxpdE5hbWVbaV0gPT09ICcnICYmIGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gYmFzZVN0YXRlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwbGl0TmFtZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50LnBhcmVudClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGF0aCAnXCIgKyBuYW1lICsgXCInIG5vdCB2YWxpZCBmb3Igc3RhdGUgJ1wiICsgYmFzZVN0YXRlLm5hbWUgKyBcIidcIik7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbE5hbWUgPSBzcGxpdE5hbWUuc2xpY2UoaSkuam9pbignLicpO1xuICAgICAgICByZXR1cm4gY3VycmVudC5uYW1lICsgKGN1cnJlbnQubmFtZSAmJiByZWxOYW1lID8gJy4nIDogJycpICsgcmVsTmFtZTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZU1hdGNoZXI7XG59KCkpO1xuZXhwb3J0IHsgU3RhdGVNYXRjaGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGF0ZU1hdGNoZXIuanMubWFwIiwiLyoqIEBtb2R1bGUgc3RhdGUgKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBpbkFycmF5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBwcm9wIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG4vKiogQGludGVybmFsYXBpICovXG52YXIgU3RhdGVRdWV1ZU1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGVRdWV1ZU1hbmFnZXIoJHJlZ2lzdHJ5LCAkdXJsUm91dGVyLCBzdGF0ZXMsIGJ1aWxkZXIsIGxpc3RlbmVycykge1xuICAgICAgICB0aGlzLiRyZWdpc3RyeSA9ICRyZWdpc3RyeTtcbiAgICAgICAgdGhpcy4kdXJsUm91dGVyID0gJHVybFJvdXRlcjtcbiAgICAgICAgdGhpcy5zdGF0ZXMgPSBzdGF0ZXM7XG4gICAgICAgIHRoaXMuYnVpbGRlciA9IGJ1aWxkZXI7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIHRoaXMubWF0Y2hlciA9ICRyZWdpc3RyeS5tYXRjaGVyO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgU3RhdGVRdWV1ZU1hbmFnZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICB9O1xuICAgIFN0YXRlUXVldWVNYW5hZ2VyLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChzdGF0ZURlY2wpIHtcbiAgICAgICAgdmFyIHF1ZXVlID0gdGhpcy5xdWV1ZTtcbiAgICAgICAgdmFyIHN0YXRlID0gU3RhdGVPYmplY3QuY3JlYXRlKHN0YXRlRGVjbCk7XG4gICAgICAgIHZhciBuYW1lID0gc3RhdGUubmFtZTtcbiAgICAgICAgaWYgKCFpc1N0cmluZyhuYW1lKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3RhdGUgbXVzdCBoYXZlIGEgdmFsaWQgbmFtZScpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZXMuaGFzT3duUHJvcGVydHkobmFtZSkgfHwgaW5BcnJheShxdWV1ZS5tYXAocHJvcCgnbmFtZScpKSwgbmFtZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIgKyBuYW1lICsgXCInIGlzIGFscmVhZHkgZGVmaW5lZFwiKTtcbiAgICAgICAgcXVldWUucHVzaChzdGF0ZSk7XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH07XG4gICAgU3RhdGVRdWV1ZU1hbmFnZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBxdWV1ZSA9IF9hLnF1ZXVlLCBzdGF0ZXMgPSBfYS5zdGF0ZXMsIGJ1aWxkZXIgPSBfYS5idWlsZGVyO1xuICAgICAgICB2YXIgcmVnaXN0ZXJlZCA9IFtdLCAvLyBzdGF0ZXMgdGhhdCBnb3QgcmVnaXN0ZXJlZFxuICAgICAgICBvcnBoYW5zID0gW10sIC8vIHN0YXRlcyB0aGF0IGRvbid0IHlldCBoYXZlIGEgcGFyZW50IHJlZ2lzdGVyZWRcbiAgICAgICAgcHJldmlvdXNRdWV1ZUxlbmd0aCA9IHt9OyAvLyBrZWVwIHRyYWNrIG9mIGhvdyBsb25nIHRoZSBxdWV1ZSB3aGVuIGFuIG9ycGhhbiB3YXMgZmlyc3QgZW5jb3VudGVyZWRcbiAgICAgICAgdmFyIGdldFN0YXRlID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIF90aGlzLnN0YXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBfdGhpcy5zdGF0ZXNbbmFtZV07IH07XG4gICAgICAgIHZhciBub3RpZnlMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocmVnaXN0ZXJlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIGxpc3RlbmVyKCdyZWdpc3RlcmVkJywgcmVnaXN0ZXJlZC5tYXAoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuc2VsZjsgfSkpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICB2YXIgbmFtZV8xID0gc3RhdGUubmFtZTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBidWlsZGVyLmJ1aWxkKHN0YXRlKTtcbiAgICAgICAgICAgIHZhciBvcnBoYW5JZHggPSBvcnBoYW5zLmluZGV4T2Yoc3RhdGUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1N0YXRlID0gZ2V0U3RhdGUobmFtZV8xKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdTdGF0ZSAmJiBleGlzdGluZ1N0YXRlLm5hbWUgPT09IG5hbWVfMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIgKyBuYW1lXzEgKyBcIicgaXMgYWxyZWFkeSBkZWZpbmVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdGdXR1cmVTdGF0ZSA9IGdldFN0YXRlKG5hbWVfMSArICcuKionKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdGdXR1cmVTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZnV0dXJlIHN0YXRlIG9mIHRoZSBzYW1lIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVnaXN0cnkuZGVyZWdpc3RlcihleGlzdGluZ0Z1dHVyZVN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGVzW25hbWVfMV0gPSBzdGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaFJvdXRlKHN0YXRlKTtcbiAgICAgICAgICAgICAgICBpZiAob3JwaGFuSWR4ID49IDApXG4gICAgICAgICAgICAgICAgICAgIG9ycGhhbnMuc3BsaWNlKG9ycGhhbklkeCwgMSk7XG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJlZC5wdXNoKHN0YXRlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmV2ID0gcHJldmlvdXNRdWV1ZUxlbmd0aFtuYW1lXzFdO1xuICAgICAgICAgICAgcHJldmlvdXNRdWV1ZUxlbmd0aFtuYW1lXzFdID0gcXVldWUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKG9ycGhhbklkeCA+PSAwICYmIHByZXYgPT09IHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgdHdvIGNvbnNlY3V0aXZlIGl0ZXJhdGlvbnMgd2hlcmUgbm8gYWRkaXRpb25hbCBzdGF0ZXMgd2VyZSBkZXF1ZXVlZCBzdWNjZXNzZnVsbHkuXG4gICAgICAgICAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVnaXN0ZXIgb3JwaGFuZWQgc3RhdGUgJyR7bmFtZX0nYCk7XG4gICAgICAgICAgICAgICAgcXVldWUucHVzaChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9ycGhhbklkeCA8IDApIHtcbiAgICAgICAgICAgICAgICBvcnBoYW5zLnB1c2goc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUucHVzaChzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgICAgIHJldHVybiBzdGF0ZXM7XG4gICAgfTtcbiAgICBTdGF0ZVF1ZXVlTWFuYWdlci5wcm90b3R5cGUuYXR0YWNoUm91dGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlLmFic3RyYWN0IHx8ICFzdGF0ZS51cmwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuJHVybFJvdXRlci5ydWxlKHRoaXMuJHVybFJvdXRlci51cmxSdWxlRmFjdG9yeS5jcmVhdGUoc3RhdGUpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZVF1ZXVlTWFuYWdlcjtcbn0oKSk7XG5leHBvcnQgeyBTdGF0ZVF1ZXVlTWFuYWdlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVRdWV1ZU1hbmFnZXIuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBzdGF0ZVxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgU3RhdGVNYXRjaGVyIH0gZnJvbSAnLi9zdGF0ZU1hdGNoZXInO1xuaW1wb3J0IHsgU3RhdGVCdWlsZGVyIH0gZnJvbSAnLi9zdGF0ZUJ1aWxkZXInO1xuaW1wb3J0IHsgU3RhdGVRdWV1ZU1hbmFnZXIgfSBmcm9tICcuL3N0YXRlUXVldWVNYW5hZ2VyJztcbmltcG9ydCB7IHJlbW92ZUZyb20gfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHByb3BFcSB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xudmFyIFN0YXRlUmVnaXN0cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIGZ1bmN0aW9uIFN0YXRlUmVnaXN0cnkoX3JvdXRlcikge1xuICAgICAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xuICAgICAgICB0aGlzLnN0YXRlcyA9IHt9O1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLm1hdGNoZXIgPSBuZXcgU3RhdGVNYXRjaGVyKHRoaXMuc3RhdGVzKTtcbiAgICAgICAgdGhpcy5idWlsZGVyID0gbmV3IFN0YXRlQnVpbGRlcih0aGlzLm1hdGNoZXIsIF9yb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkpO1xuICAgICAgICB0aGlzLnN0YXRlUXVldWUgPSBuZXcgU3RhdGVRdWV1ZU1hbmFnZXIodGhpcywgX3JvdXRlci51cmxSb3V0ZXIsIHRoaXMuc3RhdGVzLCB0aGlzLmJ1aWxkZXIsIHRoaXMubGlzdGVuZXJzKTtcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJSb290KCk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5fcmVnaXN0ZXJSb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcm9vdFN0YXRlRGVmID0ge1xuICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICB1cmw6ICdeJyxcbiAgICAgICAgICAgIHZpZXdzOiBudWxsLFxuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgJyMnOiB7IHZhbHVlOiBudWxsLCB0eXBlOiAnaGFzaCcsIGR5bmFtaWM6IHRydWUgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIF9yb290ID0gKHRoaXMuX3Jvb3QgPSB0aGlzLnN0YXRlUXVldWUucmVnaXN0ZXIocm9vdFN0YXRlRGVmKSk7XG4gICAgICAgIF9yb290Lm5hdmlnYWJsZSA9IG51bGw7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgU3RhdGVSZWdpc3RyeS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zdGF0ZVF1ZXVlLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXQoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gX3RoaXMuZ2V0KHN0YXRlKSAmJiBfdGhpcy5kZXJlZ2lzdGVyKHN0YXRlKTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gZm9yIGEgU3RhdGUgUmVnaXN0cnkgZXZlbnRzXG4gICAgICpcbiAgICAgKiBBZGRzIGEgY2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIHdoZW4gc3RhdGVzIGFyZSByZWdpc3RlcmVkIG9yIGRlcmVnaXN0ZXJlZCB3aXRoIHRoZSBTdGF0ZVJlZ2lzdHJ5LlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IGFsbFN0YXRlcyA9IHJlZ2lzdHJ5LmdldCgpO1xuICAgICAqXG4gICAgICogLy8gTGF0ZXIsIGludm9rZSBkZXJlZ2lzdGVyRm4oKSB0byByZW1vdmUgdGhlIGxpc3RlbmVyXG4gICAgICogbGV0IGRlcmVnaXN0ZXJGbiA9IHJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZCgoZXZlbnQsIHN0YXRlcykgPT4ge1xuICAgICAqICAgc3dpdGNoKGV2ZW50KSB7XG4gICAgICogICAgIGNhc2U6ICdyZWdpc3RlcmVkJzpcbiAgICAgKiAgICAgICBzdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiBhbGxTdGF0ZXMucHVzaChzdGF0ZSkpO1xuICAgICAqICAgICAgIGJyZWFrO1xuICAgICAqICAgICBjYXNlOiAnZGVyZWdpc3RlcmVkJzpcbiAgICAgKiAgICAgICBzdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiB7XG4gICAgICogICAgICAgICBsZXQgaWR4ID0gYWxsU3RhdGVzLmluZGV4T2Yoc3RhdGUpO1xuICAgICAqICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIGFsbFN0YXRlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgKiAgICAgICB9KTtcbiAgICAgKiAgICAgICBicmVhaztcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBhIGNhbGxiYWNrIGZ1bmN0aW9uIGludm9rZWQgd2hlbiB0aGUgcmVnaXN0ZXJlZCBzdGF0ZXMgY2hhbmdlcy5cbiAgICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzLCBgZXZlbnRgIGFuZCBgc3RhdGVgLlxuICAgICAqICAgICAgICBTZWUgW1tTdGF0ZVJlZ2lzdHJ5TGlzdGVuZXJdXVxuICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGRlcmVnaXN0ZXJzIHRoZSBsaXN0ZW5lclxuICAgICAqL1xuICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLm9uU3RhdGVzQ2hhbmdlZCA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJMaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHJlbW92ZUZyb20odGhpcy5saXN0ZW5lcnMpKGxpc3RlbmVyKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW1wbGljaXQgcm9vdCBzdGF0ZVxuICAgICAqXG4gICAgICogR2V0cyB0aGUgcm9vdCBvZiB0aGUgc3RhdGUgdHJlZS5cbiAgICAgKiBUaGUgcm9vdCBzdGF0ZSBpcyBpbXBsaWNpdGx5IGNyZWF0ZWQgYnkgVUktUm91dGVyLlxuICAgICAqIE5vdGU6IHRoaXMgcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIHJlcHJlc2VudGF0aW9uLCBub3QgYSBbW1N0YXRlRGVjbGFyYXRpb25dXVxuICAgICAqXG4gICAgICogQHJldHVybiB0aGUgcm9vdCBbW1N0YXRlT2JqZWN0XV1cbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5yb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcm9vdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSBzdGF0ZSB0byB0aGUgcmVnaXN0cnlcbiAgICAgKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9yIHF1ZXVlcyBpdCBmb3IgcmVnaXN0cmF0aW9uLlxuICAgICAqXG4gICAgICogTm90ZTogYSBzdGF0ZSB3aWxsIGJlIHF1ZXVlZCBpZiB0aGUgc3RhdGUncyBwYXJlbnQgaXNuJ3QgeWV0IHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGVEZWZpbml0aW9uIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBzdGF0ZSB0byByZWdpc3Rlci5cbiAgICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAgICAgKiAgICAgICAgICBJZiB0aGUgc3RhdGUgd2FzIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkLCB0aGVuIHRoZSBvYmplY3QgaXMgZnVsbHkgYnVpbHQgKFNlZTogW1tTdGF0ZUJ1aWxkZXJdXSkuXG4gICAgICogICAgICAgICAgSWYgdGhlIHN0YXRlIHdhcyBvbmx5IHF1ZXVlZCwgdGhlbiB0aGUgb2JqZWN0IGlzIG5vdCBmdWxseSBidWlsdC5cbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChzdGF0ZURlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVRdWV1ZS5yZWdpc3RlcihzdGF0ZURlZmluaXRpb24pO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5fZGVyZWdpc3RlclRyZWUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFsbCA9IHRoaXMuZ2V0KCkubWFwKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLiQkc3RhdGUoKTsgfSk7XG4gICAgICAgIHZhciBnZXRDaGlsZHJlbiA9IGZ1bmN0aW9uIChzdGF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBfY2hpbGRyZW4gPSBhbGwuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzdGF0ZXMuaW5kZXhPZihzLnBhcmVudCkgIT09IC0xOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfY2hpbGRyZW4ubGVuZ3RoID09PSAwID8gX2NoaWxkcmVuIDogX2NoaWxkcmVuLmNvbmNhdChnZXRDaGlsZHJlbihfY2hpbGRyZW4pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gZ2V0Q2hpbGRyZW4oW3N0YXRlXSk7XG4gICAgICAgIHZhciBkZXJlZ2lzdGVyZWQgPSBbc3RhdGVdLmNvbmNhdChjaGlsZHJlbikucmV2ZXJzZSgpO1xuICAgICAgICBkZXJlZ2lzdGVyZWQuZm9yRWFjaChmdW5jdGlvbiAoX3N0YXRlKSB7XG4gICAgICAgICAgICB2YXIgJHVyID0gX3RoaXMuX3JvdXRlci51cmxSb3V0ZXI7XG4gICAgICAgICAgICAvLyBSZW1vdmUgVVJMIHJ1bGVcbiAgICAgICAgICAgICR1clxuICAgICAgICAgICAgICAgIC5ydWxlcygpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihwcm9wRXEoJ3N0YXRlJywgX3N0YXRlKSlcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgkdXIucmVtb3ZlUnVsZS5iaW5kKCR1cikpO1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHN0YXRlIGZyb20gcmVnaXN0cnlcbiAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5zdGF0ZXNbX3N0YXRlLm5hbWVdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlcmVnaXN0ZXJlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBzdGF0ZSBmcm9tIHRoZSByZWdpc3RyeVxuICAgICAqXG4gICAgICogVGhpcyByZW1vdmVzIGEgc3RhdGUgZnJvbSB0aGUgcmVnaXN0cnkuXG4gICAgICogSWYgdGhlIHN0YXRlIGhhcyBjaGlsZHJlbiwgdGhleSBhcmUgYXJlIGFsc28gcmVtb3ZlZCBmcm9tIHRoZSByZWdpc3RyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSB0aGUgc3RhdGUncyBuYW1lIG9yIG9iamVjdCByZXByZXNlbnRhdGlvblxuICAgICAqIEByZXR1cm5zIHtTdGF0ZU9iamVjdFtdfSBhIGxpc3Qgb2YgcmVtb3ZlZCBzdGF0ZXNcbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lKSB7XG4gICAgICAgIHZhciBfc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmICghX3N0YXRlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgZGVyZWdpc3RlciBzdGF0ZTsgbm90IGZvdW5kOiBcIiArIHN0YXRlT3JOYW1lKTtcbiAgICAgICAgdmFyIGRlcmVnaXN0ZXJlZFN0YXRlcyA9IHRoaXMuX2RlcmVnaXN0ZXJUcmVlKF9zdGF0ZS4kJHN0YXRlKCkpO1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gbGlzdGVuZXIoJ2RlcmVnaXN0ZXJlZCcsIGRlcmVnaXN0ZXJlZFN0YXRlcy5tYXAoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuc2VsZjsgfSkpOyB9KTtcbiAgICAgICAgcmV0dXJuIGRlcmVnaXN0ZXJlZFN0YXRlcztcbiAgICB9O1xuICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgYmFzZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0YXRlcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBfdGhpcy5zdGF0ZXNbbmFtZV0uc2VsZjsgfSk7XG4gICAgICAgIHZhciBmb3VuZCA9IHRoaXMubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBiYXNlKTtcbiAgICAgICAgcmV0dXJuIChmb3VuZCAmJiBmb3VuZC5zZWxmKSB8fCBudWxsO1xuICAgIH07XG4gICAgU3RhdGVSZWdpc3RyeS5wcm90b3R5cGUuZGVjb3JhdG9yID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRlci5idWlsZGVyKG5hbWUsIGZ1bmMpO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRlUmVnaXN0cnk7XG59KCkpO1xuZXhwb3J0IHsgU3RhdGVSZWdpc3RyeSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVSZWdpc3RyeS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9va1BoYXNlIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZGVmYXVsdHMsIG5vb3AsIHNpbGVudFJlamVjdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgZm5Ub1N0cmluZywgbWF4TGVuZ3RoIH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgaXMsIHBhcnNlIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4uL2NvbW1vbi90cmFjZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgUmVqZWN0aW9uIH0gZnJvbSAnLi9yZWplY3RGYWN0b3J5JztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvdGFyZ2V0U3RhdGUnO1xudmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIGN1cnJlbnQ6IG5vb3AsXG4gICAgdHJhbnNpdGlvbjogbnVsbCxcbiAgICB0cmFjZURhdGE6IHt9LFxuICAgIGJpbmQ6IG51bGwsXG59O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBUcmFuc2l0aW9uSG9vayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUcmFuc2l0aW9uSG9vayh0cmFuc2l0aW9uLCBzdGF0ZUNvbnRleHQsIHJlZ2lzdGVyZWRIb29rLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgICAgIHRoaXMuc3RhdGVDb250ZXh0ID0gc3RhdGVDb250ZXh0O1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRIb29rID0gcmVnaXN0ZXJlZEhvb2s7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuaXNTdXBlcnNlZGVkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMudHlwZS5ob29rUGhhc2UgPT09IFRyYW5zaXRpb25Ib29rUGhhc2UuUlVOICYmICFfdGhpcy5vcHRpb25zLnRyYW5zaXRpb24uaXNBY3RpdmUoKTsgfTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpO1xuICAgICAgICB0aGlzLnR5cGUgPSByZWdpc3RlcmVkSG9vay5ldmVudFR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYWlucyB0b2dldGhlciBhbiBhcnJheSBvZiBUcmFuc2l0aW9uSG9va3MuXG4gICAgICpcbiAgICAgKiBHaXZlbiBhIGxpc3Qgb2YgW1tUcmFuc2l0aW9uSG9va11dIG9iamVjdHMsIGNoYWlucyB0aGVtIHRvZ2V0aGVyLlxuICAgICAqIEVhY2ggaG9vayBpcyBpbnZva2VkIGFmdGVyIHRoZSBwcmV2aW91cyBvbmUgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIGhvb2tzOiBUcmFuc2l0aW9uSG9va1tdID0gZ2V0SG9va3MoKTtcbiAgICAgKiBsZXQgcHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gVHJhbnNpdGlvbkhvb2suY2hhaW4oaG9va3MpO1xuICAgICAqXG4gICAgICogcHJvbWlzZS50aGVuKGhhbmRsZVN1Y2Nlc3MsIGhhbmRsZUVycm9yKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBob29rcyB0aGUgbGlzdCBvZiBob29rcyB0byBjaGFpbiB0b2dldGhlclxuICAgICAqIEBwYXJhbSB3YWl0Rm9yIGlmIHByb3ZpZGVkLCB0aGUgY2hhaW4gaXMgYC50aGVuKClgJ2VkIG9mZiB0aGlzIHByb21pc2VcbiAgICAgKiBAcmV0dXJucyBhIGBQcm9taXNlYCBmb3Igc2VxdWVudGlhbGx5IGludm9raW5nIHRoZSBob29rcyAoaW4gb3JkZXIpXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2suY2hhaW4gPSBmdW5jdGlvbiAoaG9va3MsIHdhaXRGb3IpIHtcbiAgICAgICAgLy8gQ2hhaW4gdGhlIG5leHQgaG9vayBvZmYgdGhlIHByZXZpb3VzXG4gICAgICAgIHZhciBjcmVhdGVIb29rQ2hhaW5SID0gZnVuY3Rpb24gKHByZXYsIG5leHRIb29rKSB7IHJldHVybiBwcmV2LnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV4dEhvb2suaW52b2tlSG9vaygpOyB9KTsgfTtcbiAgICAgICAgcmV0dXJuIGhvb2tzLnJlZHVjZShjcmVhdGVIb29rQ2hhaW5SLCB3YWl0Rm9yIHx8IHNlcnZpY2VzLiRxLndoZW4oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnZva2VzIGFsbCB0aGUgcHJvdmlkZWQgVHJhbnNpdGlvbkhvb2tzLCBpbiBvcmRlci5cbiAgICAgKiBFYWNoIGhvb2sncyByZXR1cm4gdmFsdWUgaXMgY2hlY2tlZC5cbiAgICAgKiBJZiBhbnkgaG9vayByZXR1cm5zIGEgcHJvbWlzZSwgdGhlbiB0aGUgcmVzdCBvZiB0aGUgaG9va3MgYXJlIGNoYWluZWQgb2ZmIHRoYXQgcHJvbWlzZSwgYW5kIHRoZSBwcm9taXNlIGlzIHJldHVybmVkLlxuICAgICAqIElmIG5vIGhvb2sgcmV0dXJucyBhIHByb21pc2UsIHRoZW4gYWxsIGhvb2tzIGFyZSBwcm9jZXNzZWQgc3luY2hyb25vdXNseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBob29rcyB0aGUgbGlzdCBvZiBUcmFuc2l0aW9uSG9va3MgdG8gaW52b2tlXG4gICAgICogQHBhcmFtIGRvbmVDYWxsYmFjayBhIGNhbGxiYWNrIHRoYXQgaXMgaW52b2tlZCBhZnRlciBhbGwgdGhlIGhvb2tzIGhhdmUgc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZFxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgYXN5bmMgcmVzdWx0LCBvciB0aGUgcmVzdWx0IG9mIHRoZSBjYWxsYmFja1xuICAgICAqL1xuICAgIFRyYW5zaXRpb25Ib29rLmludm9rZUhvb2tzID0gZnVuY3Rpb24gKGhvb2tzLCBkb25lQ2FsbGJhY2spIHtcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgaG9va3MubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgdmFyIGhvb2tSZXN1bHQgPSBob29rc1tpZHhdLmludm9rZUhvb2soKTtcbiAgICAgICAgICAgIGlmIChpc1Byb21pc2UoaG9va1Jlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nSG9va3MgPSBob29rcy5zbGljZShpZHggKyAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJhbnNpdGlvbkhvb2suY2hhaW4ocmVtYWluaW5nSG9va3MsIGhvb2tSZXN1bHQpLnRoZW4oZG9uZUNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9uZUNhbGxiYWNrKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSdW4gYWxsIFRyYW5zaXRpb25Ib29rcywgaWdub3JpbmcgdGhlaXIgcmV0dXJuIHZhbHVlLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb25Ib29rLnJ1bkFsbEhvb2tzID0gZnVuY3Rpb24gKGhvb2tzKSB7XG4gICAgICAgIGhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIGhvb2suaW52b2tlSG9vaygpOyB9KTtcbiAgICB9O1xuICAgIFRyYW5zaXRpb25Ib29rLnByb3RvdHlwZS5sb2dFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVNlcnZpY2UuZGVmYXVsdEVycm9ySGFuZGxlcigpKGVycik7XG4gICAgfTtcbiAgICBUcmFuc2l0aW9uSG9vay5wcm90b3R5cGUuaW52b2tlSG9vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGhvb2sgPSB0aGlzLnJlZ2lzdGVyZWRIb29rO1xuICAgICAgICBpZiAoaG9vay5fZGVyZWdpc3RlcmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgbm90Q3VycmVudCA9IHRoaXMuZ2V0Tm90Q3VycmVudFJlamVjdGlvbigpO1xuICAgICAgICBpZiAobm90Q3VycmVudClcbiAgICAgICAgICAgIHJldHVybiBub3RDdXJyZW50O1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdHJhY2UudHJhY2VIb29rSW52b2NhdGlvbih0aGlzLCB0aGlzLnRyYW5zaXRpb24sIG9wdGlvbnMpO1xuICAgICAgICB2YXIgaW52b2tlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBob29rLmNhbGxiYWNrLmNhbGwob3B0aW9ucy5iaW5kLCBfdGhpcy50cmFuc2l0aW9uLCBfdGhpcy5zdGF0ZUNvbnRleHQpOyB9O1xuICAgICAgICB2YXIgbm9ybWFsaXplRXJyID0gZnVuY3Rpb24gKGVycikgeyByZXR1cm4gUmVqZWN0aW9uLm5vcm1hbGl6ZShlcnIpLnRvUHJvbWlzZSgpOyB9O1xuICAgICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBob29rLmV2ZW50VHlwZS5nZXRFcnJvckhhbmRsZXIoX3RoaXMpKGVycik7IH07XG4gICAgICAgIHZhciBoYW5kbGVSZXN1bHQgPSBmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiBob29rLmV2ZW50VHlwZS5nZXRSZXN1bHRIYW5kbGVyKF90aGlzKShyZXN1bHQpOyB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGludm9rZUNhbGxiYWNrKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMudHlwZS5zeW5jaHJvbm91cyAmJiBpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuY2F0Y2gobm9ybWFsaXplRXJyKS50aGVuKGhhbmRsZVJlc3VsdCwgaGFuZGxlRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIElmIGNhbGxiYWNrIHRocm93cyAoc3luY2hyb25vdXNseSlcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihSZWplY3Rpb24ubm9ybWFsaXplKGVycikpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKGhvb2suaW52b2tlTGltaXQgJiYgKytob29rLmludm9rZUNvdW50ID49IGhvb2suaW52b2tlTGltaXQpIHtcbiAgICAgICAgICAgICAgICBob29rLmRlcmVnaXN0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaGFuZGxlcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGEgVHJhbnNpdGlvbiBIb29rLlxuICAgICAqXG4gICAgICogQSBob29rIGNhbiByZXR1cm4gZmFsc2UgKGNhbmNlbCksIGEgVGFyZ2V0U3RhdGUgKHJlZGlyZWN0KSxcbiAgICAgKiBvciBhIHByb21pc2UgKHdoaWNoIG1heSBsYXRlciByZXNvbHZlIHRvIGZhbHNlIG9yIGEgcmVkaXJlY3QpXG4gICAgICpcbiAgICAgKiBUaGlzIGFsc28gaGFuZGxlcyBcInRyYW5zaXRpb24gc3VwZXJzZWRlZFwiIC0tIHdoZW4gYSBuZXcgdHJhbnNpdGlvblxuICAgICAqIHdhcyBzdGFydGVkIHdoaWxlIHRoZSBob29rIHdhcyBzdGlsbCBydW5uaW5nXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLmhhbmRsZUhvb2tSZXN1bHQgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBub3RDdXJyZW50ID0gdGhpcy5nZXROb3RDdXJyZW50UmVqZWN0aW9uKCk7XG4gICAgICAgIGlmIChub3RDdXJyZW50KVxuICAgICAgICAgICAgcmV0dXJuIG5vdEN1cnJlbnQ7XG4gICAgICAgIC8vIEhvb2sgcmV0dXJuZWQgYSBwcm9taXNlXG4gICAgICAgIGlmIChpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHByb21pc2UsIHRoZW4gcmVwcm9jZXNzIHdpdGggdGhlIHJlc3VsdGluZyB2YWx1ZVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUhvb2tSZXN1bHQodmFsKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2UudHJhY2VIb29rUmVzdWx0KHJlc3VsdCwgdGhpcy50cmFuc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAvLyBIb29rIHJldHVybmVkIGZhbHNlXG4gICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAvLyBBYm9ydCB0aGlzIFRyYW5zaXRpb25cbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uYWJvcnRlZCgnSG9vayBhYm9ydGVkIHRyYW5zaXRpb24nKS50b1Byb21pc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNUYXJnZXRTdGF0ZSA9IGlzKFRhcmdldFN0YXRlKTtcbiAgICAgICAgLy8gaG9vayByZXR1cm5lZCBhIFRhcmdldFN0YXRlXG4gICAgICAgIGlmIChpc1RhcmdldFN0YXRlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIC8vIEhhbHQgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbiBhbmQgcmVkaXJlY3QgKGEgbmV3IFRyYW5zaXRpb24pIHRvIHRoZSBUYXJnZXRTdGF0ZS5cbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24ucmVkaXJlY3RlZChyZXN1bHQpLnRvUHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBSZWplY3Rpb24gcHJvbWlzZSBpZiB0aGUgdHJhbnNpdGlvbiBpcyBubyBsb25nZXIgY3VycmVudCBkdWVcbiAgICAgKiB0byBhIHN0b3BwZWQgcm91dGVyIChkaXNwb3NlZCksIG9yIGEgbmV3IHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWQgYW5kIHN1cGVyc2VkZWQgdGhpcyBvbmUuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLmdldE5vdEN1cnJlbnRSZWplY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnRyYW5zaXRpb24ucm91dGVyO1xuICAgICAgICAvLyBUaGUgcm91dGVyIGlzIHN0b3BwZWRcbiAgICAgICAgaWYgKHJvdXRlci5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uYWJvcnRlZChcIlVJUm91dGVyIGluc3RhbmNlICNcIiArIHJvdXRlci4kaWQgKyBcIiBoYXMgYmVlbiBzdG9wcGVkIChkaXNwb3NlZClcIikudG9Qcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbi5fYWJvcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5hYm9ydGVkKCkudG9Qcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyB0cmFuc2l0aW9uIGlzIG5vIGxvbmdlciBjdXJyZW50LlxuICAgICAgICAvLyBBbm90aGVyIHRyYW5zaXRpb24gc3RhcnRlZCB3aGlsZSB0aGlzIGhvb2sgd2FzIHN0aWxsIHJ1bm5pbmcuXG4gICAgICAgIGlmICh0aGlzLmlzU3VwZXJzZWRlZCgpKSB7XG4gICAgICAgICAgICAvLyBBYm9ydCB0aGlzIHRyYW5zaXRpb25cbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uc3VwZXJzZWRlZCh0aGlzLm9wdGlvbnMuY3VycmVudCgpKS50b1Byb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBvcHRpb25zID0gX2Eub3B0aW9ucywgcmVnaXN0ZXJlZEhvb2sgPSBfYS5yZWdpc3RlcmVkSG9vaztcbiAgICAgICAgdmFyIGV2ZW50ID0gcGFyc2UoJ3RyYWNlRGF0YS5ob29rVHlwZScpKG9wdGlvbnMpIHx8ICdpbnRlcm5hbCcsIGNvbnRleHQgPSBwYXJzZSgndHJhY2VEYXRhLmNvbnRleHQuc3RhdGUubmFtZScpKG9wdGlvbnMpIHx8IHBhcnNlKCd0cmFjZURhdGEuY29udGV4dCcpKG9wdGlvbnMpIHx8ICd1bmtub3duJywgbmFtZSA9IGZuVG9TdHJpbmcocmVnaXN0ZXJlZEhvb2suY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gZXZlbnQgKyBcIiBjb250ZXh0OiBcIiArIGNvbnRleHQgKyBcIiwgXCIgKyBtYXhMZW5ndGgoMjAwLCBuYW1lKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZXNlIEdldFJlc3VsdEhhbmRsZXIocykgYXJlIHVzZWQgYnkgW1tpbnZva2VIb29rXV0gYmVsb3dcbiAgICAgKiBFYWNoIEhvb2tUeXBlIGNob29zZXMgYSBHZXRSZXN1bHRIYW5kbGVyIChTZWU6IFtbVHJhbnNpdGlvblNlcnZpY2UuX2RlZmluZUNvcmVFdmVudHNdXSlcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxUID0gZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIGhvb2suaGFuZGxlSG9va1Jlc3VsdChyZXN1bHQpO1xuICAgIH07IH07XG4gICAgLyoqXG4gICAgICogSWYgdGhlIHJlc3VsdCBpcyBhIHByb21pc2UgcmVqZWN0aW9uLCBsb2cgaXQuXG4gICAgICogT3RoZXJ3aXNlLCBpZ25vcmUgdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uSG9vay5MT0dfUkVKRUNURURfUkVTVUxUID0gZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgcmVzdWx0LmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIGhvb2subG9nRXJyb3IoUmVqZWN0aW9uLm5vcm1hbGl6ZShlcnIpKTsgfSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTsgfTtcbiAgICAvKipcbiAgICAgKiBUaGVzZSBHZXRFcnJvckhhbmRsZXIocykgYXJlIHVzZWQgYnkgW1tpbnZva2VIb29rXV0gYmVsb3dcbiAgICAgKiBFYWNoIEhvb2tUeXBlIGNob29zZXMgYSBHZXRFcnJvckhhbmRsZXIgKFNlZTogW1tUcmFuc2l0aW9uU2VydmljZS5fZGVmaW5lQ29yZUV2ZW50c11dKVxuICAgICAqL1xuICAgIFRyYW5zaXRpb25Ib29rLkxPR19FUlJPUiA9IGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIGhvb2subG9nRXJyb3IoZXJyb3IpOyB9OyB9O1xuICAgIFRyYW5zaXRpb25Ib29rLlJFSkVDVF9FUlJPUiA9IGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIHNpbGVudFJlamVjdGlvbihlcnJvcik7IH07IH07XG4gICAgVHJhbnNpdGlvbkhvb2suVEhST1dfRVJST1IgPSBmdW5jdGlvbiAoaG9vaykgeyByZXR1cm4gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH07IH07XG4gICAgcmV0dXJuIFRyYW5zaXRpb25Ib29rO1xufSgpKTtcbmV4cG9ydCB7IFRyYW5zaXRpb25Ib29rIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2l0aW9uSG9vay5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCBHbG9iLCBleHRlbmQsIHJlbW92ZUZyb20sIHRhaWwsIHZhbHVlcywgaWRlbnRpdHksIG1hcE9iaiB9IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyAvLyBoYXMgb3IgaXMgdXNpbmdcblRyYW5zaXRpb25Ib29rU2NvcGUsIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiBzdGF0ZSBtYXRjaGVzIHRoZSBtYXRjaENyaXRlcmlhXG4gKlxuICogQGhpZGRlblxuICpcbiAqIEBwYXJhbSBzdGF0ZSBhIFN0YXRlIE9iamVjdCB0byB0ZXN0IGFnYWluc3RcbiAqIEBwYXJhbSBjcml0ZXJpb25cbiAqIC0gSWYgYSBzdHJpbmcsIG1hdGNoU3RhdGUgdXNlcyB0aGUgc3RyaW5nIGFzIGEgZ2xvYi1tYXRjaGVyIGFnYWluc3QgdGhlIHN0YXRlIG5hbWVcbiAqIC0gSWYgYW4gYXJyYXkgKG9mIHN0cmluZ3MpLCBtYXRjaFN0YXRlIHVzZXMgZWFjaCBzdHJpbmcgaW4gdGhlIGFycmF5IGFzIGEgZ2xvYi1tYXRjaGVycyBhZ2FpbnN0IHRoZSBzdGF0ZSBuYW1lXG4gKiAgIGFuZCByZXR1cm5zIGEgcG9zaXRpdmUgbWF0Y2ggaWYgYW55IG9mIHRoZSBnbG9icyBtYXRjaC5cbiAqIC0gSWYgYSBmdW5jdGlvbiwgbWF0Y2hTdGF0ZSBjYWxscyB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgc3RhdGUgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZnVuY3Rpb24ncyByZXN1bHQgaXMgdHJ1dGh5LlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaFN0YXRlKHN0YXRlLCBjcml0ZXJpb24pIHtcbiAgICB2YXIgdG9NYXRjaCA9IGlzU3RyaW5nKGNyaXRlcmlvbikgPyBbY3JpdGVyaW9uXSA6IGNyaXRlcmlvbjtcbiAgICBmdW5jdGlvbiBtYXRjaEdsb2JzKF9zdGF0ZSkge1xuICAgICAgICB2YXIgZ2xvYlN0cmluZ3MgPSB0b01hdGNoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdsb2JTdHJpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYiA9IG5ldyBHbG9iKGdsb2JTdHJpbmdzW2ldKTtcbiAgICAgICAgICAgIGlmICgoZ2xvYiAmJiBnbG9iLm1hdGNoZXMoX3N0YXRlLm5hbWUpKSB8fCAoIWdsb2IgJiYgZ2xvYlN0cmluZ3NbaV0gPT09IF9zdGF0ZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIG1hdGNoRm4gPSAoaXNGdW5jdGlvbih0b01hdGNoKSA/IHRvTWF0Y2ggOiBtYXRjaEdsb2JzKTtcbiAgICByZXR1cm4gISFtYXRjaEZuKHN0YXRlKTtcbn1cbi8qKlxuICogQGludGVybmFsYXBpXG4gKiBUaGUgcmVnaXN0cmF0aW9uIGRhdGEgZm9yIGEgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tcbiAqL1xudmFyIFJlZ2lzdGVyZWRIb29rID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlZ2lzdGVyZWRIb29rKHRyYW5TdmMsIGV2ZW50VHlwZSwgY2FsbGJhY2ssIG1hdGNoQ3JpdGVyaWEsIHJlbW92ZUhvb2tGcm9tUmVnaXN0cnksIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdGhpcy50cmFuU3ZjID0gdHJhblN2YztcbiAgICAgICAgdGhpcy5ldmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5tYXRjaENyaXRlcmlhID0gbWF0Y2hDcml0ZXJpYTtcbiAgICAgICAgdGhpcy5yZW1vdmVIb29rRnJvbVJlZ2lzdHJ5ID0gcmVtb3ZlSG9va0Zyb21SZWdpc3RyeTtcbiAgICAgICAgdGhpcy5pbnZva2VDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX2RlcmVnaXN0ZXJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gb3B0aW9ucy5wcmlvcml0eSB8fCAwO1xuICAgICAgICB0aGlzLmJpbmQgPSBvcHRpb25zLmJpbmQgfHwgbnVsbDtcbiAgICAgICAgdGhpcy5pbnZva2VMaW1pdCA9IG9wdGlvbnMuaW52b2tlTGltaXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1hdGNoaW5nIFtbUGF0aE5vZGVdXXNcbiAgICAgKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIFtbUGF0aE5vZGVdXXMsIGFuZCBhIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0sIHJldHVybnMgYW4gYXJyYXkgY29udGFpbmluZ1xuICAgICAqIHRoZSBbW1BhdGhOb2RlXV1zIHRoYXQgdGhlIGNyaXRlcmlhIG1hdGNoZXMsIG9yIGBudWxsYCBpZiB0aGVyZSB3ZXJlIG5vIG1hdGNoaW5nIG5vZGVzLlxuICAgICAqXG4gICAgICogUmV0dXJuaW5nIGBudWxsYCBpcyBzaWduaWZpY2FudCB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuIHRoZSBkZWZhdWx0XG4gICAgICogXCJtYXRjaC1hbGwgY3JpdGVyaW9uIHZhbHVlXCIgb2YgYHRydWVgIGNvbXBhcmVkIHRvIGEgYCgpID0+IHRydWVgIGZ1bmN0aW9uLFxuICAgICAqIHdoZW4gdGhlIG5vZGVzIGlzIGFuIGVtcHR5IGFycmF5LlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c2VmdWwgdG8gYWxsb3cgYSB0cmFuc2l0aW9uIG1hdGNoIGNyaXRlcmlhIG9mIGBlbnRlcmluZzogdHJ1ZWBcbiAgICAgKiB0byBzdGlsbCBtYXRjaCBhIHRyYW5zaXRpb24sIGV2ZW4gd2hlbiBgZW50ZXJpbmcgPT09IFtdYC4gIENvbnRyYXN0IHRoYXRcbiAgICAgKiB3aXRoIGBlbnRlcmluZzogKHN0YXRlKSA9PiB0cnVlYCB3aGljaCBvbmx5IG1hdGNoZXMgd2hlbiBhIHN0YXRlIGlzIGFjdHVhbGx5XG4gICAgICogYmVpbmcgZW50ZXJlZC5cbiAgICAgKi9cbiAgICBSZWdpc3RlcmVkSG9vay5wcm90b3R5cGUuX21hdGNoaW5nTm9kZXMgPSBmdW5jdGlvbiAobm9kZXMsIGNyaXRlcmlvbikge1xuICAgICAgICBpZiAoY3JpdGVyaW9uID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgICAgICB2YXIgbWF0Y2hpbmcgPSBub2Rlcy5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG1hdGNoU3RhdGUobm9kZS5zdGF0ZSwgY3JpdGVyaW9uKTsgfSk7XG4gICAgICAgIHJldHVybiBtYXRjaGluZy5sZW5ndGggPyBtYXRjaGluZyA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IG1hdGNoIGNyaXRlcmlhIChhbGwgYHRydWVgKVxuICAgICAqXG4gICAgICogUmV0dXJucyBhbiBvYmplY3Qgd2hpY2ggaGFzIGFsbCB0aGUgY3JpdGVyaWEgbWF0Y2ggcGF0aHMgYXMga2V5cyBhbmQgYHRydWVgIGFzIHZhbHVlcywgaS5lLjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgdG86IHRydWUsXG4gICAgICogICBmcm9tOiB0cnVlLFxuICAgICAqICAgZW50ZXJpbmc6IHRydWUsXG4gICAgICogICBleGl0aW5nOiB0cnVlLFxuICAgICAqICAgcmV0YWluZWQ6IHRydWUsXG4gICAgICogfVxuICAgICAqL1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5fZ2V0RGVmYXVsdE1hdGNoQ3JpdGVyaWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXBPYmoodGhpcy50cmFuU3ZjLl9wbHVnaW5hcGkuX2dldFBhdGhUeXBlcygpLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgbWF0Y2hpbmcgbm9kZXMgYXMgW1tJTWF0Y2hpbmdOb2Rlc11dXG4gICAgICpcbiAgICAgKiBDcmVhdGUgYSBJTWF0Y2hpbmdOb2RlcyBvYmplY3QgZnJvbSB0aGUgVHJhbnNpdGlvbkhvb2tUeXBlcyB0aGF0IGlzIHJvdWdobHkgZXF1aXZhbGVudCB0bzpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IG1hdGNoZXM6IElNYXRjaGluZ05vZGVzID0ge1xuICAgICAqICAgdG86ICAgICAgIF9tYXRjaGluZ05vZGVzKFt0YWlsKHRyZWVDaGFuZ2VzLnRvKV0sICAgbWMudG8pLFxuICAgICAqICAgZnJvbTogICAgIF9tYXRjaGluZ05vZGVzKFt0YWlsKHRyZWVDaGFuZ2VzLmZyb20pXSwgbWMuZnJvbSksXG4gICAgICogICBleGl0aW5nOiAgX21hdGNoaW5nTm9kZXModHJlZUNoYW5nZXMuZXhpdGluZywgICAgICBtYy5leGl0aW5nKSxcbiAgICAgKiAgIHJldGFpbmVkOiBfbWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcy5yZXRhaW5lZCwgICAgIG1jLnJldGFpbmVkKSxcbiAgICAgKiAgIGVudGVyaW5nOiBfbWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcy5lbnRlcmluZywgICAgIG1jLmVudGVyaW5nKSxcbiAgICAgKiB9O1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5fZ2V0TWF0Y2hpbmdOb2RlcyA9IGZ1bmN0aW9uICh0cmVlQ2hhbmdlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY3JpdGVyaWEgPSBleHRlbmQodGhpcy5fZ2V0RGVmYXVsdE1hdGNoQ3JpdGVyaWEoKSwgdGhpcy5tYXRjaENyaXRlcmlhKTtcbiAgICAgICAgdmFyIHBhdGhzID0gdmFsdWVzKHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSk7XG4gICAgICAgIHJldHVybiBwYXRocy5yZWR1Y2UoZnVuY3Rpb24gKG1uLCBwYXRodHlwZSkge1xuICAgICAgICAgICAgLy8gU1RBVEUgc2NvcGUgY3JpdGVyaWEgbWF0Y2hlcyBhZ2FpbnN0IGV2ZXJ5IG5vZGUgaW4gdGhlIHBhdGguXG4gICAgICAgICAgICAvLyBUUkFOU0lUSU9OIHNjb3BlIGNyaXRlcmlhIG1hdGNoZXMgYWdhaW5zdCBvbmx5IHRoZSBsYXN0IG5vZGUgaW4gdGhlIHBhdGhcbiAgICAgICAgICAgIHZhciBpc1N0YXRlSG9vayA9IHBhdGh0eXBlLnNjb3BlID09PSBUcmFuc2l0aW9uSG9va1Njb3BlLlNUQVRFO1xuICAgICAgICAgICAgdmFyIHBhdGggPSB0cmVlQ2hhbmdlc1twYXRodHlwZS5uYW1lXSB8fCBbXTtcbiAgICAgICAgICAgIHZhciBub2RlcyA9IGlzU3RhdGVIb29rID8gcGF0aCA6IFt0YWlsKHBhdGgpXTtcbiAgICAgICAgICAgIG1uW3BhdGh0eXBlLm5hbWVdID0gX3RoaXMuX21hdGNoaW5nTm9kZXMobm9kZXMsIGNyaXRlcmlhW3BhdGh0eXBlLm5hbWVdKTtcbiAgICAgICAgICAgIHJldHVybiBtbjtcbiAgICAgICAgfSwge30pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGhvb2sncyBbW21hdGNoQ3JpdGVyaWFdXSBtYXRjaCB0aGUgZ2l2ZW4gW1tUcmVlQ2hhbmdlc11dXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbiBJTWF0Y2hpbmdOb2RlcyBvYmplY3QsIG9yIG51bGwuIElmIGFuIElNYXRjaGluZ05vZGVzIG9iamVjdCBpcyByZXR1cm5lZCwgaXRzIHZhbHVlc1xuICAgICAqIGFyZSB0aGUgbWF0Y2hpbmcgW1tQYXRoTm9kZV1dcyBmb3IgZWFjaCBbW0hvb2tNYXRjaENyaXRlcmlvbl1dICh0bywgZnJvbSwgZXhpdGluZywgcmV0YWluZWQsIGVudGVyaW5nKVxuICAgICAqL1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKHRyZWVDaGFuZ2VzKSB7XG4gICAgICAgIHZhciBtYXRjaGVzID0gdGhpcy5fZ2V0TWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcyk7XG4gICAgICAgIC8vIENoZWNrIGlmIGFsbCB0aGUgY3JpdGVyaWEgbWF0Y2hlZCB0aGUgVHJlZUNoYW5nZXMgb2JqZWN0XG4gICAgICAgIHZhciBhbGxNYXRjaGVkID0gdmFsdWVzKG1hdGNoZXMpLmV2ZXJ5KGlkZW50aXR5KTtcbiAgICAgICAgcmV0dXJuIGFsbE1hdGNoZWQgPyBtYXRjaGVzIDogbnVsbDtcbiAgICB9O1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbW92ZUhvb2tGcm9tUmVnaXN0cnkodGhpcyk7XG4gICAgICAgIHRoaXMuX2RlcmVnaXN0ZXJlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gUmVnaXN0ZXJlZEhvb2s7XG59KCkpO1xuZXhwb3J0IHsgUmVnaXN0ZXJlZEhvb2sgfTtcbi8qKiBAaGlkZGVuIFJldHVybiBhIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBvZiB0aGUgcmVxdWVzdGVkIHR5cGUuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUV2ZW50KHJlZ2lzdHJ5LCB0cmFuc2l0aW9uU2VydmljZSwgZXZlbnRUeXBlKSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBvYmplY3Qgd2hpY2ggaG9sZHMgdGhlIHJlZ2lzdGVyZWQgdHJhbnNpdGlvbiBob29rcy5cbiAgICB2YXIgX3JlZ2lzdGVyZWRIb29rcyA9IChyZWdpc3RyeS5fcmVnaXN0ZXJlZEhvb2tzID0gcmVnaXN0cnkuX3JlZ2lzdGVyZWRIb29rcyB8fCB7fSk7XG4gICAgdmFyIGhvb2tzID0gKF9yZWdpc3RlcmVkSG9va3NbZXZlbnRUeXBlLm5hbWVdID0gW10pO1xuICAgIHZhciByZW1vdmVIb29rRm4gPSByZW1vdmVGcm9tKGhvb2tzKTtcbiAgICAvLyBDcmVhdGUgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb24gb24gdGhlIElIb29rUmVnaXN0cnkgZm9yIHRoZSBldmVudFxuICAgIHJlZ2lzdHJ5W2V2ZW50VHlwZS5uYW1lXSA9IGhvb2tSZWdpc3RyYXRpb25GbjtcbiAgICBmdW5jdGlvbiBob29rUmVnaXN0cmF0aW9uRm4obWF0Y2hPYmplY3QsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciByZWdpc3RlcmVkSG9vayA9IG5ldyBSZWdpc3RlcmVkSG9vayh0cmFuc2l0aW9uU2VydmljZSwgZXZlbnRUeXBlLCBjYWxsYmFjaywgbWF0Y2hPYmplY3QsIHJlbW92ZUhvb2tGbiwgb3B0aW9ucyk7XG4gICAgICAgIGhvb2tzLnB1c2gocmVnaXN0ZXJlZEhvb2spO1xuICAgICAgICByZXR1cm4gcmVnaXN0ZXJlZEhvb2suZGVyZWdpc3Rlci5iaW5kKHJlZ2lzdGVyZWRIb29rKTtcbiAgICB9XG4gICAgcmV0dXJuIGhvb2tSZWdpc3RyYXRpb25Gbjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvb2tSZWdpc3RyeS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgYXNzZXJ0UHJlZGljYXRlLCB1bm5lc3RSLCBpZGVudGl0eSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFRyYW5zaXRpb25Ib29rUGhhc2UsIFRyYW5zaXRpb25Ib29rU2NvcGUsIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2sgfSBmcm9tICcuL3RyYW5zaXRpb25Ib29rJztcbi8qKlxuICogVGhpcyBjbGFzcyByZXR1cm5zIGFwcGxpY2FibGUgVHJhbnNpdGlvbkhvb2tzIGZvciBhIHNwZWNpZmljIFRyYW5zaXRpb24gaW5zdGFuY2UuXG4gKlxuICogSG9va3MgKFtbUmVnaXN0ZXJlZEhvb2tdXSkgbWF5IGJlIHJlZ2lzdGVyZWQgZ2xvYmFsbHksIGUuZy4sICR0cmFuc2l0aW9ucy5vbkVudGVyKC4uLiksIG9yIGxvY2FsbHksIGUuZy5cbiAqIG15VHJhbnNpdGlvbi5vbkVudGVyKC4uLikuICBUaGUgSG9va0J1aWxkZXIgZmluZHMgbWF0Y2hpbmcgUmVnaXN0ZXJlZEhvb2tzICh3aGVyZSB0aGUgbWF0Y2ggY3JpdGVyaWEgaXNcbiAqIGRldGVybWluZWQgYnkgdGhlIHR5cGUgb2YgaG9vaylcbiAqXG4gKiBUaGUgSG9va0J1aWxkZXIgYWxzbyBjb252ZXJ0cyBSZWdpc3RlcmVkSG9va3Mgb2JqZWN0cyB0byBUcmFuc2l0aW9uSG9vayBvYmplY3RzLCB3aGljaCBhcmUgdXNlZCB0byBydW4gYSBUcmFuc2l0aW9uLlxuICpcbiAqIFRoZSBIb29rQnVpbGRlciBjb25zdHJ1Y3RvciBpcyBnaXZlbiB0aGUgJHRyYW5zaXRpb25zIHNlcnZpY2UgYW5kIGEgVHJhbnNpdGlvbiBpbnN0YW5jZS4gIFRodXMsIGEgSG9va0J1aWxkZXJcbiAqIGluc3RhbmNlIG1heSBvbmx5IGJlIHVzZWQgZm9yIG9uZSBzcGVjaWZpYyBUcmFuc2l0aW9uIG9iamVjdC4gKHNpZGUgbm90ZTogdGhlIF90cmVlQ2hhbmdlcyBhY2Nlc3NvciBpcyBwcml2YXRlXG4gKiBpbiB0aGUgVHJhbnNpdGlvbiBjbGFzcywgc28gd2UgbXVzdCBhbHNvIHByb3ZpZGUgdGhlIFRyYW5zaXRpb24ncyBfdHJlZUNoYW5nZXMpXG4gKlxuICovXG52YXIgSG9va0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSG9va0J1aWxkZXIodHJhbnNpdGlvbikge1xuICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuICAgIH1cbiAgICBIb29rQnVpbGRlci5wcm90b3R5cGUuYnVpbGRIb29rc0ZvclBoYXNlID0gZnVuY3Rpb24gKHBoYXNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciAkdHJhbnNpdGlvbnMgPSB0aGlzLnRyYW5zaXRpb24ucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xuICAgICAgICByZXR1cm4gJHRyYW5zaXRpb25zLl9wbHVnaW5hcGlcbiAgICAgICAgICAgIC5fZ2V0RXZlbnRzKHBoYXNlKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gX3RoaXMuYnVpbGRIb29rcyh0eXBlKTsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAuZmlsdGVyKGlkZW50aXR5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgbmV3bHkgYnVpbHQgVHJhbnNpdGlvbkhvb2sgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIC0gRmluZHMgYWxsIFJlZ2lzdGVyZWRIb29rcyByZWdpc3RlcmVkIGZvciB0aGUgZ2l2ZW4gYGhvb2tUeXBlYCB3aGljaCBtYXRjaGVkIHRoZSB0cmFuc2l0aW9uJ3MgW1tUcmVlQ2hhbmdlc11dLlxuICAgICAqIC0gRmluZHMgW1tQYXRoTm9kZV1dIChvciBgUGF0aE5vZGVbXWApIHRvIHVzZSBhcyB0aGUgVHJhbnNpdGlvbkhvb2sgY29udGV4dChzKVxuICAgICAqIC0gRm9yIGVhY2ggb2YgdGhlIFtbUGF0aE5vZGVdXXMsIGNyZWF0ZXMgYSBUcmFuc2l0aW9uSG9va1xuICAgICAqXG4gICAgICogQHBhcmFtIGhvb2tUeXBlIHRoZSB0eXBlIG9mIHRoZSBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbiwgZS5nLiwgJ29uRW50ZXInLCAnb25GaW5pc2gnLlxuICAgICAqL1xuICAgIEhvb2tCdWlsZGVyLnByb3RvdHlwZS5idWlsZEhvb2tzID0gZnVuY3Rpb24gKGhvb2tUeXBlKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcy50cmFuc2l0aW9uO1xuICAgICAgICB2YXIgdHJlZUNoYW5nZXMgPSB0cmFuc2l0aW9uLnRyZWVDaGFuZ2VzKCk7XG4gICAgICAgIC8vIEZpbmQgYWxsIHRoZSBtYXRjaGluZyByZWdpc3RlcmVkIGhvb2tzIGZvciBhIGdpdmVuIGhvb2sgdHlwZVxuICAgICAgICB2YXIgbWF0Y2hpbmdIb29rcyA9IHRoaXMuZ2V0TWF0Y2hpbmdIb29rcyhob29rVHlwZSwgdHJlZUNoYW5nZXMpO1xuICAgICAgICBpZiAoIW1hdGNoaW5nSG9va3MpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHZhciBiYXNlSG9va09wdGlvbnMgPSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLFxuICAgICAgICAgICAgY3VycmVudDogdHJhbnNpdGlvbi5vcHRpb25zKCkuY3VycmVudCxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG1ha2VUcmFuc2l0aW9uSG9va3MgPSBmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICAgICAgLy8gRmV0Y2ggdGhlIE5vZGVzIHRoYXQgY2F1c2VkIHRoaXMgaG9vayB0byBtYXRjaC5cbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gaG9vay5tYXRjaGVzKHRyZWVDaGFuZ2VzKTtcbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgUGF0aE5vZGVbXSB0aGF0IHdpbGwgYmUgdXNlZCBhcyBUcmFuc2l0aW9uSG9vayBjb250ZXh0IG9iamVjdHNcbiAgICAgICAgICAgIHZhciBtYXRjaGluZ05vZGVzID0gbWF0Y2hlc1tob29rVHlwZS5jcml0ZXJpYU1hdGNoUGF0aC5uYW1lXTtcbiAgICAgICAgICAgIC8vIFJldHVybiBhbiBhcnJheSBvZiBIb29rVHVwbGVzXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hpbmdOb2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX29wdGlvbnMgPSBleHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICBiaW5kOiBob29rLmJpbmQsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlRGF0YTogeyBob29rVHlwZTogaG9va1R5cGUubmFtZSwgY29udGV4dDogbm9kZSB9LFxuICAgICAgICAgICAgICAgIH0sIGJhc2VIb29rT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gaG9va1R5cGUuY3JpdGVyaWFNYXRjaFBhdGguc2NvcGUgPT09IFRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUgPyBub2RlLnN0YXRlLnNlbGYgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uSG9vayA9IG5ldyBUcmFuc2l0aW9uSG9vayh0cmFuc2l0aW9uLCBzdGF0ZSwgaG9vaywgX29wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGhvb2s6IGhvb2ssIG5vZGU6IG5vZGUsIHRyYW5zaXRpb25Ib29rOiB0cmFuc2l0aW9uSG9vayB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBtYXRjaGluZ0hvb2tzXG4gICAgICAgICAgICAubWFwKG1ha2VUcmFuc2l0aW9uSG9va3MpXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLnNvcnQodHVwbGVTb3J0KGhvb2tUeXBlLnJldmVyc2VTb3J0KSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHR1cGxlKSB7IHJldHVybiB0dXBsZS50cmFuc2l0aW9uSG9vazsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5kcyBhbGwgUmVnaXN0ZXJlZEhvb2tzIGZyb206XG4gICAgICogLSBUaGUgVHJhbnNpdGlvbiBvYmplY3QgaW5zdGFuY2UgaG9vayByZWdpc3RyeVxuICAgICAqIC0gVGhlIFRyYW5zaXRpb25TZXJ2aWNlICgkdHJhbnNpdGlvbnMpIGdsb2JhbCBob29rIHJlZ2lzdHJ5XG4gICAgICpcbiAgICAgKiB3aGljaCBtYXRjaGVkOlxuICAgICAqIC0gdGhlIGV2ZW50VHlwZVxuICAgICAqIC0gdGhlIG1hdGNoQ3JpdGVyaWEgKHRvLCBmcm9tLCBleGl0aW5nLCByZXRhaW5lZCwgZW50ZXJpbmcpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiBtYXRjaGVkIFtbUmVnaXN0ZXJlZEhvb2tdXXNcbiAgICAgKi9cbiAgICBIb29rQnVpbGRlci5wcm90b3R5cGUuZ2V0TWF0Y2hpbmdIb29rcyA9IGZ1bmN0aW9uIChob29rVHlwZSwgdHJlZUNoYW5nZXMpIHtcbiAgICAgICAgdmFyIGlzQ3JlYXRlID0gaG9va1R5cGUuaG9va1BoYXNlID09PSBUcmFuc2l0aW9uSG9va1BoYXNlLkNSRUFURTtcbiAgICAgICAgLy8gSW5zdGFuY2UgYW5kIEdsb2JhbCBob29rIHJlZ2lzdHJpZXNcbiAgICAgICAgdmFyICR0cmFuc2l0aW9ucyA9IHRoaXMudHJhbnNpdGlvbi5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2U7XG4gICAgICAgIHZhciByZWdpc3RyaWVzID0gaXNDcmVhdGUgPyBbJHRyYW5zaXRpb25zXSA6IFt0aGlzLnRyYW5zaXRpb24sICR0cmFuc2l0aW9uc107XG4gICAgICAgIHJldHVybiByZWdpc3RyaWVzXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZWcpIHsgcmV0dXJuIHJlZy5nZXRIb29rcyhob29rVHlwZS5uYW1lKTsgfSkgLy8gR2V0IG5hbWVkIGhvb2tzIGZyb20gcmVnaXN0cmllc1xuICAgICAgICAgICAgLmZpbHRlcihhc3NlcnRQcmVkaWNhdGUoaXNBcnJheSwgXCJicm9rZW4gZXZlbnQgbmFtZWQ6IFwiICsgaG9va1R5cGUubmFtZSkpIC8vIFNhbml0eSBjaGVja1xuICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSkgLy8gVW4tbmVzdCBSZWdpc3RlcmVkSG9va1tdW10gdG8gUmVnaXN0ZXJlZEhvb2tbXSBhcnJheVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaG9vaykgeyByZXR1cm4gaG9vay5tYXRjaGVzKHRyZWVDaGFuZ2VzKTsgfSk7IC8vIE9ubHkgdGhvc2Ugc2F0aXNmeWluZyBtYXRjaENyaXRlcmlhXG4gICAgfTtcbiAgICByZXR1cm4gSG9va0J1aWxkZXI7XG59KCkpO1xuZXhwb3J0IHsgSG9va0J1aWxkZXIgfTtcbi8qKlxuICogQSBmYWN0b3J5IGZvciBhIHNvcnQgZnVuY3Rpb24gZm9yIEhvb2tUdXBsZXMuXG4gKlxuICogVGhlIHNvcnQgZnVuY3Rpb24gZmlyc3QgY29tcGFyZXMgdGhlIFBhdGhOb2RlIGRlcHRoIChob3cgZGVlcCBpbiB0aGUgc3RhdGUgdHJlZSBhIG5vZGUgaXMpLCB0aGVuIGNvbXBhcmVzXG4gKiB0aGUgRXZlbnRIb29rIHByaW9yaXR5LlxuICpcbiAqIEBwYXJhbSByZXZlcnNlRGVwdGhTb3J0IGEgYm9vbGVhbiwgd2hlbiB0cnVlLCByZXZlcnNlcyB0aGUgc29ydCBvcmRlciBmb3IgdGhlIG5vZGUgZGVwdGhcbiAqIEByZXR1cm5zIGEgdHVwbGUgc29ydCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiB0dXBsZVNvcnQocmV2ZXJzZURlcHRoU29ydCkge1xuICAgIGlmIChyZXZlcnNlRGVwdGhTb3J0ID09PSB2b2lkIDApIHsgcmV2ZXJzZURlcHRoU29ydCA9IGZhbHNlOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVEZXB0aFRoZW5Qcmlvcml0eShsLCByKSB7XG4gICAgICAgIHZhciBmYWN0b3IgPSByZXZlcnNlRGVwdGhTb3J0ID8gLTEgOiAxO1xuICAgICAgICB2YXIgZGVwdGhEZWx0YSA9IChsLm5vZGUuc3RhdGUucGF0aC5sZW5ndGggLSByLm5vZGUuc3RhdGUucGF0aC5sZW5ndGgpICogZmFjdG9yO1xuICAgICAgICByZXR1cm4gZGVwdGhEZWx0YSAhPT0gMCA/IGRlcHRoRGVsdGEgOiByLmhvb2sucHJpb3JpdHkgLSBsLmhvb2sucHJpb3JpdHk7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvb2tCdWlsZGVyLmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdHJhbnNpdGlvblxuICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICcuLi9jb21tb24vc3RyaW5ncyc7XG5pbXBvcnQgeyBtYXAsIGZpbmQsIGV4dGVuZCwgbWVyZ2VSLCB0YWlsLCBvbWl0LCBhcnJheVR1cGxlcywgdW5uZXN0UiwgaWRlbnRpdHksIGFueVRydWVSIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc09iamVjdCwgaXNVbmRlZmluZWQgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBwcm9wLCBwcm9wRXEsIHZhbCwgbm90LCBpcyB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2tQaGFzZSwgfSBmcm9tICcuL2ludGVyZmFjZSc7IC8vIGhhcyBvciBpcyB1c2luZ1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2sgfSBmcm9tICcuL3RyYW5zaXRpb25Ib29rJztcbmltcG9ydCB7IG1hdGNoU3RhdGUsIG1ha2VFdmVudCB9IGZyb20gJy4vaG9va1JlZ2lzdHJ5JztcbmltcG9ydCB7IEhvb2tCdWlsZGVyIH0gZnJvbSAnLi9ob29rQnVpbGRlcic7XG5pbXBvcnQgeyBQYXRoVXRpbHMgfSBmcm9tICcuLi9wYXRoL3BhdGhVdGlscyc7XG5pbXBvcnQgeyBQYXJhbSB9IGZyb20gJy4uL3BhcmFtcy9wYXJhbSc7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcbmltcG9ydCB7IFJlc29sdmVDb250ZXh0IH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZlQ29udGV4dCc7XG5pbXBvcnQgeyBSZWplY3Rpb24gfSBmcm9tICcuL3JlamVjdEZhY3RvcnknO1xuaW1wb3J0IHsgZmxhdHRlblIsIHVuaXFSIH0gZnJvbSAnLi4vY29tbW9uJztcbi8qKiBAaGlkZGVuICovXG52YXIgc3RhdGVTZWxmID0gcHJvcCgnc2VsZicpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgdHJhbnNpdGlvbiBiZXR3ZWVuIHR3byBzdGF0ZXMuXG4gKlxuICogV2hlbiBuYXZpZ2F0aW5nIHRvIGEgc3RhdGUsIHdlIGFyZSB0cmFuc2l0aW9uaW5nICoqZnJvbSoqIHRoZSBjdXJyZW50IHN0YXRlICoqdG8qKiB0aGUgbmV3IHN0YXRlLlxuICpcbiAqIFRoaXMgb2JqZWN0IGNvbnRhaW5zIGFsbCBjb250ZXh0dWFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSB0by9mcm9tIHN0YXRlcywgcGFyYW1ldGVycywgcmVzb2x2ZXMuXG4gKiBJdCBoYXMgaW5mb3JtYXRpb24gYWJvdXQgYWxsIHN0YXRlcyBiZWluZyBlbnRlcmVkIGFuZCBleGl0ZWQgYXMgYSByZXN1bHQgb2YgdGhlIHRyYW5zaXRpb24uXG4gKi9cbnZhciBUcmFuc2l0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNpdGlvbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgdGFyZ2V0IHN0YXRlIGlzIG5vdCB2YWxpZCwgYW4gZXJyb3IgaXMgdGhyb3duLlxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZnJvbVBhdGggVGhlIHBhdGggb2YgW1tQYXRoTm9kZV1dcyBmcm9tIHdoaWNoIHRoZSB0cmFuc2l0aW9uIGlzIGxlYXZpbmcuICBUaGUgbGFzdCBub2RlIGluIHRoZSBgZnJvbVBhdGhgXG4gICAgICogICAgICAgIGVuY2Fwc3VsYXRlcyB0aGUgXCJmcm9tIHN0YXRlXCIuXG4gICAgICogQHBhcmFtIHRhcmdldFN0YXRlIFRoZSB0YXJnZXQgc3RhdGUgYW5kIHBhcmFtZXRlcnMgYmVpbmcgdHJhbnNpdGlvbmVkIHRvIChhbHNvLCB0aGUgdHJhbnNpdGlvbiBvcHRpb25zKVxuICAgICAqIEBwYXJhbSByb3V0ZXIgVGhlIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyYW5zaXRpb24oZnJvbVBhdGgsIHRhcmdldFN0YXRlLCByb3V0ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fZGVmZXJyZWQgPSBzZXJ2aWNlcy4kcS5kZWZlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBwcm9taXNlIGlzIHJlc29sdmVkIG9yIHJlamVjdGVkIGJhc2VkIG9uIHRoZSBvdXRjb21lIG9mIHRoZSBUcmFuc2l0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuIHRoZSB0cmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkXG4gICAgICAgICAqIFdoZW4gdGhlIHRyYW5zaXRpb24gaXMgdW5zdWNjZXNzZnVsLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIHRoZSBbW1JlamVjdGlvbl1dIG9yIGphdmFzY3JpcHQgZXJyb3JcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMuX2RlZmVycmVkLnByb21pc2U7XG4gICAgICAgIC8qKiBAaGlkZGVuIEhvbGRzIHRoZSBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbnMgc3VjaCBhcyB0aG9zZSBwYXNzZWQgdG8gVHJhbnNpdGlvbi5vblN0YXJ0KCkgKi9cbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJlZEhvb2tzID0ge307XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuX2hvb2tCdWlsZGVyID0gbmV3IEhvb2tCdWlsZGVyKHRoaXMpO1xuICAgICAgICAvKiogQ2hlY2tzIGlmIHRoaXMgdHJhbnNpdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlL3J1bm5pbmcuICovXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uID09PSBfdGhpczsgfTtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuX3RhcmdldFN0YXRlID0gdGFyZ2V0U3RhdGU7XG4gICAgICAgIGlmICghdGFyZ2V0U3RhdGUudmFsaWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRhcmdldFN0YXRlLmVycm9yKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGN1cnJlbnQoKSBpcyBhc3N1bWVkIHRvIGNvbWUgZnJvbSB0YXJnZXRTdGF0ZS5vcHRpb25zLCBidXQgcHJvdmlkZSBhIG5haXZlIGltcGxlbWVudGF0aW9uIG90aGVyd2lzZS5cbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IGV4dGVuZCh7IGN1cnJlbnQ6IHZhbCh0aGlzKSB9LCB0YXJnZXRTdGF0ZS5vcHRpb25zKCkpO1xuICAgICAgICB0aGlzLiRpZCA9IHJvdXRlci50cmFuc2l0aW9uU2VydmljZS5fdHJhbnNpdGlvbkNvdW50Kys7XG4gICAgICAgIHZhciB0b1BhdGggPSBQYXRoVXRpbHMuYnVpbGRUb1BhdGgoZnJvbVBhdGgsIHRhcmdldFN0YXRlKTtcbiAgICAgICAgdGhpcy5fdHJlZUNoYW5nZXMgPSBQYXRoVXRpbHMudHJlZUNoYW5nZXMoZnJvbVBhdGgsIHRvUGF0aCwgdGhpcy5fb3B0aW9ucy5yZWxvYWRTdGF0ZSk7XG4gICAgICAgIHRoaXMuY3JlYXRlVHJhbnNpdGlvbkhvb2tSZWdGbnMoKTtcbiAgICAgICAgdmFyIG9uQ3JlYXRlSG9va3MgPSB0aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UoVHJhbnNpdGlvbkhvb2tQaGFzZS5DUkVBVEUpO1xuICAgICAgICBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhvbkNyZWF0ZUhvb2tzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9KTtcbiAgICAgICAgdGhpcy5hcHBseVZpZXdDb25maWdzKHJvdXRlcik7XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25CZWZvcmUgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uU3RhcnQgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRXhpdCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25SZXRhaW4gPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRW50ZXIgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRmluaXNoID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vblN1Y2Nlc3MgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuXG4gICAgICogQ3JlYXRlcyB0aGUgdHJhbnNpdGlvbi1sZXZlbCBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbnNcbiAgICAgKiAod2hpY2ggY2FuIHRoZW4gYmUgdXNlZCB0byByZWdpc3RlciBob29rcylcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5jcmVhdGVUcmFuc2l0aW9uSG9va1JlZ0ZucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuX3BsdWdpbmFwaVxuICAgICAgICAgICAgLl9nZXRFdmVudHMoKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gdHlwZS5ob29rUGhhc2UgIT09IFRyYW5zaXRpb25Ib29rUGhhc2UuQ1JFQVRFOyB9KVxuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIG1ha2VFdmVudChfdGhpcywgX3RoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLCB0eXBlKTsgfSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZ2V0SG9va3MgPSBmdW5jdGlvbiAoaG9va05hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lzdGVyZWRIb29rc1tob29rTmFtZV07XG4gICAgfTtcbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5hcHBseVZpZXdDb25maWdzID0gZnVuY3Rpb24gKHJvdXRlcikge1xuICAgICAgICB2YXIgZW50ZXJpbmdTdGF0ZXMgPSB0aGlzLl90cmVlQ2hhbmdlcy5lbnRlcmluZy5tYXAoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuc3RhdGU7IH0pO1xuICAgICAgICBQYXRoVXRpbHMuYXBwbHlWaWV3Q29uZmlncyhyb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuJHZpZXcsIHRoaXMuX3RyZWVDaGFuZ2VzLnRvLCBlbnRlcmluZ1N0YXRlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRoZSBpbnRlcm5hbCBmcm9tIFtTdGF0ZV0gb2JqZWN0XG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuJGZyb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20pLnN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgdG8gW1N0YXRlXSBvYmplY3RcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS4kdG8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLnRvKS5zdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFwiZnJvbSBzdGF0ZVwiXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbWluZyAqZnJvbSouXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIChcImZyb20gc3RhdGVcIikuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZnJvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZyb20oKS5zZWxmO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgXCJ0byBzdGF0ZVwiXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGdvaW5nICp0byouXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIHRhcmdldCBzdGF0ZSAoXCJ0byBzdGF0ZVwiKS5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHRvKCkuc2VsZjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFRhcmdldCBTdGF0ZVxuICAgICAqXG4gICAgICogQSB0cmFuc2l0aW9uJ3MgW1tUYXJnZXRTdGF0ZV1dIGVuY2Fwc3VsYXRlcyB0aGUgW1t0b11dIHN0YXRlLCB0aGUgW1twYXJhbXNdXSwgYW5kIHRoZSBbW29wdGlvbnNdXSBhcyBhIHNpbmdsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgW1tUYXJnZXRTdGF0ZV1dIG9mIHRoaXMgVHJhbnNpdGlvblxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnRhcmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0U3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdHdvIHRyYW5zaXRpb25zIGFyZSBlcXVpdmFsZW50LlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbiAoY29tcGFyZSkge1xuICAgICAgICBpZiAoY29tcGFyZSBpbnN0YW5jZW9mIFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IEFsc28gY29tcGFyZSBwYXJhbWV0ZXJzXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pcyh7IHRvOiBjb21wYXJlLiR0bygpLm5hbWUsIGZyb206IGNvbXBhcmUuJGZyb20oKS5uYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhKChjb21wYXJlLnRvICYmICFtYXRjaFN0YXRlKHRoaXMuJHRvKCksIGNvbXBhcmUudG8pKSB8fFxuICAgICAgICAgICAgKGNvbXBhcmUuZnJvbSAmJiAhbWF0Y2hTdGF0ZSh0aGlzLiRmcm9tKCksIGNvbXBhcmUuZnJvbSkpKTtcbiAgICB9O1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnBhcmFtcyA9IGZ1bmN0aW9uIChwYXRobmFtZSkge1xuICAgICAgICBpZiAocGF0aG5hbWUgPT09IHZvaWQgMCkgeyBwYXRobmFtZSA9ICd0byc7IH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUodGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdLm1hcChwcm9wKCdwYXJhbVZhbHVlcycpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpO1xuICAgIH07XG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucGFyYW1zQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyb21QYXJhbXMgPSB0aGlzLnBhcmFtcygnZnJvbScpO1xuICAgICAgICB2YXIgdG9QYXJhbXMgPSB0aGlzLnBhcmFtcygndG8nKTtcbiAgICAgICAgLy8gQWxsIHRoZSBwYXJhbWV0ZXJzIGRlY2xhcmVkIG9uIGJvdGggdGhlIFwidG9cIiBhbmQgXCJmcm9tXCIgcGF0aHNcbiAgICAgICAgdmFyIGFsbFBhcmFtRGVzY3JpcHRvcnMgPSBbXVxuICAgICAgICAgICAgLmNvbmNhdCh0aGlzLl90cmVlQ2hhbmdlcy50bylcbiAgICAgICAgICAgIC5jb25jYXQodGhpcy5fdHJlZUNoYW5nZXMuZnJvbSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHBhdGhOb2RlKSB7IHJldHVybiBwYXRoTm9kZS5wYXJhbVNjaGVtYTsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UoZmxhdHRlblIsIFtdKVxuICAgICAgICAgICAgLnJlZHVjZSh1bmlxUiwgW10pO1xuICAgICAgICB2YXIgY2hhbmdlZFBhcmFtRGVzY3JpcHRvcnMgPSBQYXJhbS5jaGFuZ2VkKGFsbFBhcmFtRGVzY3JpcHRvcnMsIGZyb21QYXJhbXMsIHRvUGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIGNoYW5nZWRQYXJhbURlc2NyaXB0b3JzLnJlZHVjZShmdW5jdGlvbiAoY2hhbmdlZFZhbHVlcywgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgY2hhbmdlZFZhbHVlc1tkZXNjcmlwdG9yLmlkXSA9IHRvUGFyYW1zW2Rlc2NyaXB0b3IuaWRdO1xuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWRWYWx1ZXM7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBbW1VJSW5qZWN0b3JdXSBEZXBlbmRlbmN5IEluamVjdG9yXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgRGVwZW5kZW5jeSBJbmplY3RvciBmb3IgdGhlIFRyYW5zaXRpb24ncyB0YXJnZXQgc3RhdGUgKHRvIHN0YXRlKS5cbiAgICAgKiBUaGUgaW5qZWN0b3IgcHJvdmlkZXMgcmVzb2x2ZSB2YWx1ZXMgd2hpY2ggdGhlIHRhcmdldCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxuICAgICAqXG4gICAgICogVGhlIGBVSUluamVjdG9yYCBjYW4gYWxzbyBwcm92aWRlIHZhbHVlcyBmcm9tIHRoZSBuYXRpdmUgcm9vdC9nbG9iYWwgaW5qZWN0b3IgKG5nMS9uZzIpLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLm9uRW50ZXIoeyBlbnRlcmluZzogJ215U3RhdGUnIH0sIHRyYW5zID0+IHtcbiAgICAgKiAgIHZhciBteVJlc29sdmVWYWx1ZSA9IHRyYW5zLmluamVjdG9yKCkuZ2V0KCdteVJlc29sdmUnKTtcbiAgICAgKiAgIC8vIEluamVjdCBhIGdsb2JhbCBzZXJ2aWNlIGZyb20gdGhlIGdsb2JhbC9uYXRpdmUgaW5qZWN0b3IgKGlmIGl0IGV4aXN0cylcbiAgICAgKiAgIHZhciBNeVNlcnZpY2UgPSB0cmFucy5pbmplY3RvcigpLmdldCgnTXlTZXJ2aWNlJyk7XG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEluIHNvbWUgY2FzZXMgKHN1Y2ggYXMgYG9uQmVmb3JlYCksIHlvdSBtYXkgbmVlZCBhY2Nlc3MgdG8gc29tZSByZXNvbHZlIGRhdGEgYnV0IGl0IGhhcyBub3QgeWV0IGJlZW4gZmV0Y2hlZC5cbiAgICAgKiBZb3UgY2FuIHVzZSBbW1VJSW5qZWN0b3IuZ2V0QXN5bmNdXSB0byBnZXQgYSBwcm9taXNlIGZvciB0aGUgZGF0YS5cbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiAub25CZWZvcmUoe30sIHRyYW5zID0+IHtcbiAgICAgKiAgIHJldHVybiB0cmFucy5pbmplY3RvcigpLmdldEFzeW5jKCdteVJlc29sdmUnKS50aGVuKG15UmVzb2x2ZVZhbHVlID0+XG4gICAgICogICAgIHJldHVybiBteVJlc29sdmVWYWx1ZSAhPT0gJ0FCT1JUJztcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSWYgYSBgc3RhdGVgIGlzIHByb3ZpZGVkLCB0aGUgaW5qZWN0b3IgdGhhdCBpcyByZXR1cm5lZCB3aWxsIGJlIGxpbWl0ZWQgdG8gcmVzb2x2ZSB2YWx1ZXMgdGhhdCB0aGUgcHJvdmlkZWQgc3RhdGUgaGFzIGFjY2VzcyB0by5cbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgaWYgYm90aCBhIHBhcmVudCBzdGF0ZSBgZm9vYCBhbmQgYSBjaGlsZCBzdGF0ZSBgZm9vLmJhcmAgaGF2ZSBib3RoIGRlZmluZWQgYSByZXNvbHZlIHN1Y2ggYXMgYGRhdGFgLlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIC5vbkVudGVyKHsgdG86ICdmb28uYmFyJyB9LCB0cmFucyA9PiB7XG4gICAgICogICAvLyByZXR1cm5zIHJlc3VsdCBvZiBgZm9vYCBzdGF0ZSdzIGBteVJlc29sdmVgIHJlc29sdmVcbiAgICAgKiAgIC8vIGV2ZW4gdGhvdWdoIGBmb28uYmFyYCBhbHNvIGhhcyBhIGBteVJlc29sdmVgIHJlc29sdmVcbiAgICAgKiAgIHZhciBmb29EYXRhID0gdHJhbnMuaW5qZWN0b3IoJ2ZvbycpLmdldCgnbXlSZXNvbHZlJyk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJZiB5b3UgbmVlZCByZXNvbHZlIGRhdGEgZnJvbSB0aGUgZXhpdGluZyBzdGF0ZXMsIHBhc3MgYCdmcm9tJ2AgYXMgYHBhdGhOYW1lYC5cbiAgICAgKiBUaGUgcmVzb2x2ZSBkYXRhIGZyb20gdGhlIGBmcm9tYCBwYXRoIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLm9uRXhpdCh7IGV4aXRpbmc6ICdmb28uYmFyJyB9LCB0cmFucyA9PiB7XG4gICAgICogICAvLyBHZXRzIHRoZSByZXNvbHZlIHZhbHVlIG9mIGBteVJlc29sdmVgIGZyb20gdGhlIHN0YXRlIGJlaW5nIGV4aXRlZFxuICAgICAqICAgdmFyIGZvb0RhdGEgPSB0cmFucy5pbmplY3RvcihudWxsLCAnZnJvbScpLmdldCgnbXlSZXNvbHZlJyk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZSBMaW1pdHMgdGhlIHJlc29sdmVzIHByb3ZpZGVkIHRvIG9ubHkgdGhlIHJlc29sdmVzIHRoZSBwcm92aWRlZCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxuICAgICAqIEBwYXJhbSBwYXRoTmFtZSBEZWZhdWx0OiBgJ3RvJ2A6IENob29zZXMgdGhlIHBhdGggZm9yIHdoaWNoIHRvIGNyZWF0ZSB0aGUgaW5qZWN0b3IuIFVzZSB0aGlzIHRvIGFjY2VzcyByZXNvbHZlcyBmb3IgYGV4aXRpbmdgIHN0YXRlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgW1tVSUluamVjdG9yXV1cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5pbmplY3RvciA9IGZ1bmN0aW9uIChzdGF0ZSwgcGF0aE5hbWUpIHtcbiAgICAgICAgaWYgKHBhdGhOYW1lID09PSB2b2lkIDApIHsgcGF0aE5hbWUgPSAndG8nOyB9XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aE5hbWVdO1xuICAgICAgICBpZiAoc3RhdGUpXG4gICAgICAgICAgICBwYXRoID0gUGF0aFV0aWxzLnN1YlBhdGgocGF0aCwgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuc3RhdGUgPT09IHN0YXRlIHx8IG5vZGUuc3RhdGUubmFtZSA9PT0gc3RhdGU7IH0pO1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KHBhdGgpLmluamVjdG9yKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBhdmFpbGFibGUgcmVzb2x2ZSB0b2tlbnMgKGtleXMpXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIFtbaW5qZWN0b3JdXSB0byBpbnNwZWN0IHRoZSByZXNvbHZlIHZhbHVlc1xuICAgICAqIGF2YWlsYWJsZSB0byB0aGUgVHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgcmV0dXJucyBhbGwgdGhlIHRva2VucyBkZWZpbmVkIG9uIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0gYmxvY2tzLCBmb3IgdGhlIHN0YXRlc1xuICAgICAqIGluIHRoZSBUcmFuc2l0aW9uJ3MgW1tUcmVlQ2hhbmdlcy50b11dIHBhdGguXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogVGhpcyBleGFtcGxlIGxvZ3MgYWxsIHJlc29sdmUgdmFsdWVzXG4gICAgICogYGBganNcbiAgICAgKiBsZXQgdG9rZW5zID0gdHJhbnMuZ2V0UmVzb2x2ZVRva2VucygpO1xuICAgICAqIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IGNvbnNvbGUubG9nKHRva2VuICsgXCIgPSBcIiArIHRyYW5zLmluamVjdG9yKCkuZ2V0KHRva2VuKSkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIFRoaXMgZXhhbXBsZSBjcmVhdGVzIHByb21pc2VzIGZvciBlYWNoIHJlc29sdmUgdmFsdWUuXG4gICAgICogVGhpcyB0cmlnZ2VycyBmZXRjaGVzIG9mIHJlc29sdmVzIChpZiBhbnkgaGF2ZSBub3QgeWV0IGJlZW4gZmV0Y2hlZCkuXG4gICAgICogV2hlbiBhbGwgcHJvbWlzZXMgaGF2ZSBhbGwgc2V0dGxlZCwgaXQgbG9ncyB0aGUgcmVzb2x2ZSB2YWx1ZXMuXG4gICAgICogYGBganNcbiAgICAgKiBsZXQgdG9rZW5zID0gdHJhbnMuZ2V0UmVzb2x2ZVRva2VucygpO1xuICAgICAqIGxldCBwcm9taXNlID0gdG9rZW5zLm1hcCh0b2tlbiA9PiB0cmFucy5pbmplY3RvcigpLmdldEFzeW5jKHRva2VuKSk7XG4gICAgICogUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4odmFsdWVzID0+IGNvbnNvbGUubG9nKFwiUmVzb2x2ZWQgdmFsdWVzOiBcIiArIHZhbHVlcykpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogTm90ZTogQW5ndWxhciAxIHVzZXJzIHdob3VsZCB1c2UgYCRxLmFsbCgpYFxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhuYW1lIHJlc29sdmUgY29udGV4dCdzIHBhdGggbmFtZSAoZS5nLiwgYHRvYCBvciBgZnJvbWApXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiByZXNvbHZlIHRva2VucyAoa2V5cylcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5nZXRSZXNvbHZlVG9rZW5zID0gZnVuY3Rpb24gKHBhdGhuYW1lKSB7XG4gICAgICAgIGlmIChwYXRobmFtZSA9PT0gdm9pZCAwKSB7IHBhdGhuYW1lID0gJ3RvJzsgfVxuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhuYW1lXSkuZ2V0VG9rZW5zKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEeW5hbWljYWxseSBhZGRzIGEgbmV3IFtbUmVzb2x2YWJsZV1dIChpLmUuLCBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dKSB0byB0aGlzIHRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBBbGxvd3MgYSB0cmFuc2l0aW9uIGhvb2sgdG8gZHluYW1pY2FsbHkgYWRkIGEgUmVzb2x2YWJsZSB0byB0aGlzIFRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBVc2UgdGhlIFtbVHJhbnNpdGlvbi5pbmplY3Rvcl1dIHRvIHJldHJpZXZlIHRoZSByZXNvbHZlZCBkYXRhIGluIHN1YnNlcXVlbnQgaG9va3MgKFtbVUlJbmplY3Rvci5nZXRdXSkuXG4gICAgICpcbiAgICAgKiBJZiBhIGBzdGF0ZWAgYXJndW1lbnQgaXMgcHJvdmlkZWQsIHRoZSBSZXNvbHZhYmxlIGlzIHByb2Nlc3NlZCB3aGVuIHRoYXQgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAgICAgKiBJZiBubyBgc3RhdGVgIGlzIHByb3ZpZGVkIHRoZW4gdGhlIHJvb3Qgc3RhdGUgaXMgdXNlZC5cbiAgICAgKiBJZiB0aGUgZ2l2ZW4gYHN0YXRlYCBoYXMgYWxyZWFkeSBiZWVuIGVudGVyZWQsIHRoZSBSZXNvbHZhYmxlIGlzIHByb2Nlc3NlZCB3aGVuIGFueSBjaGlsZCBzdGF0ZSBpcyBlbnRlcmVkLlxuICAgICAqIElmIG5vIGNoaWxkIHN0YXRlcyB3aWxsIGJlIGVudGVyZWQsIHRoZSBSZXNvbHZhYmxlIGlzIHByb2Nlc3NlZCBkdXJpbmcgdGhlIGBvbkZpbmlzaGAgcGhhc2Ugb2YgdGhlIFRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYHN0YXRlYCBhcmd1bWVudCBhbHNvIHNjb3BlcyB0aGUgcmVzb2x2ZWQgZGF0YS5cbiAgICAgKiBUaGUgcmVzb2x2ZWQgZGF0YSBpcyBhdmFpbGFibGUgZnJvbSB0aGUgaW5qZWN0b3IgZm9yIHRoYXQgYHN0YXRlYCBhbmQgYW55IGNoaWxkcmVuIHN0YXRlcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCB0cmFuc2l0aW9uID0+IHtcbiAgICAgKiAgIHRyYW5zaXRpb24uYWRkUmVzb2x2YWJsZSh7XG4gICAgICogICAgIHRva2VuOiAnbXlSZXNvbHZlJyxcbiAgICAgKiAgICAgZGVwczogWydNeVNlcnZpY2UnXSxcbiAgICAgKiAgICAgcmVzb2x2ZUZuOiBteVNlcnZpY2UgPT4gbXlTZXJ2aWNlLmdldERhdGEoKVxuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzb2x2YWJsZSBhIFtbUmVzb2x2YWJsZUxpdGVyYWxdXSBvYmplY3QgKG9yIGEgW1tSZXNvbHZhYmxlXV0pXG4gICAgICogQHBhcmFtIHN0YXRlIHRoZSBzdGF0ZSBpbiB0aGUgXCJ0byBwYXRoXCIgd2hpY2ggc2hvdWxkIHJlY2VpdmUgdGhlIG5ldyByZXNvbHZlIChvdGhlcndpc2UsIHRoZSByb290IHN0YXRlKVxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmFkZFJlc29sdmFibGUgPSBmdW5jdGlvbiAocmVzb2x2YWJsZSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlID09PSB2b2lkIDApIHsgc3RhdGUgPSAnJzsgfVxuICAgICAgICByZXNvbHZhYmxlID0gaXMoUmVzb2x2YWJsZSkocmVzb2x2YWJsZSkgPyByZXNvbHZhYmxlIDogbmV3IFJlc29sdmFibGUocmVzb2x2YWJsZSk7XG4gICAgICAgIHZhciBzdGF0ZU5hbWUgPSB0eXBlb2Ygc3RhdGUgPT09ICdzdHJpbmcnID8gc3RhdGUgOiBzdGF0ZS5uYW1lO1xuICAgICAgICB2YXIgdG9wYXRoID0gdGhpcy5fdHJlZUNoYW5nZXMudG87XG4gICAgICAgIHZhciB0YXJnZXROb2RlID0gZmluZCh0b3BhdGgsIGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnN0YXRlLm5hbWUgPT09IHN0YXRlTmFtZTsgfSk7XG4gICAgICAgIHZhciByZXNvbHZlQ29udGV4dCA9IG5ldyBSZXNvbHZlQ29udGV4dCh0b3BhdGgpO1xuICAgICAgICByZXNvbHZlQ29udGV4dC5hZGRSZXNvbHZhYmxlcyhbcmVzb2x2YWJsZV0sIHRhcmdldE5vZGUuc3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdHJhbnNpdGlvbiBmcm9tIHdoaWNoIHRoaXMgdHJhbnNpdGlvbiB3YXMgcmVkaXJlY3RlZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBjdXJyZW50IHRyYW5zaXRpb24gaXMgYSByZWRpcmVjdCwgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgdHJhbnNpdGlvbiB0aGF0IHdhcyByZWRpcmVjdGVkLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IHRyYW5zaXRpb25BID0gJHN0YXRlLmdvKCdBJykudHJhbnNpdGlvblxuICAgICAqIHRyYW5zaXRpb25BLm9uU3RhcnQoe30sICgpID0+ICRzdGF0ZS50YXJnZXQoJ0InKSk7XG4gICAgICogJHRyYW5zaXRpb25zLm9uU3VjY2Vzcyh7IHRvOiAnQicgfSwgKHRyYW5zKSA9PiB7XG4gICAgICogICB0cmFucy50bygpLm5hbWUgPT09ICdCJzsgLy8gdHJ1ZVxuICAgICAqICAgdHJhbnMucmVkaXJlY3RlZEZyb20oKSA9PT0gdHJhbnNpdGlvbkE7IC8vIHRydWVcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwcmV2aW91cyBUcmFuc2l0aW9uLCBvciBudWxsIGlmIHRoaXMgVHJhbnNpdGlvbiBpcyBub3QgdGhlIHJlc3VsdCBvZiBhIHJlZGlyZWN0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucmVkaXJlY3RlZEZyb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zLnJlZGlyZWN0ZWRGcm9tIHx8IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIGluIGEgcmVkaXJlY3QgY2hhaW5cbiAgICAgKlxuICAgICAqIEEgdHJhbnNpdGlvbiBtaWdodCBiZWxvbmcgdG8gYSBsb25nIGNoYWluIG9mIG11bHRpcGxlIHJlZGlyZWN0cy5cbiAgICAgKiBUaGlzIG1ldGhvZCB3YWxrcyB0aGUgW1tyZWRpcmVjdGVkRnJvbV1dIGNoYWluIGJhY2sgdG8gdGhlIG9yaWdpbmFsIChmaXJzdCkgdHJhbnNpdGlvbiBpbiB0aGUgY2hhaW4uXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiAvLyBzdGF0ZXNcbiAgICAgKiByZWdpc3RyeS5yZWdpc3Rlcih7IG5hbWU6ICdBJywgcmVkaXJlY3RUbzogJ0InIH0pO1xuICAgICAqIHJlZ2lzdHJ5LnJlZ2lzdGVyKHsgbmFtZTogJ0InLCByZWRpcmVjdFRvOiAnQycgfSk7XG4gICAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnQycsIHJlZGlyZWN0VG86ICdEJyB9KTtcbiAgICAgKiByZWdpc3RyeS5yZWdpc3Rlcih7IG5hbWU6ICdEJyB9KTtcbiAgICAgKlxuICAgICAqIGxldCB0cmFuc2l0aW9uQSA9ICRzdGF0ZS5nbygnQScpLnRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3MoeyB0bzogJ0QnIH0sICh0cmFucykgPT4ge1xuICAgICAqICAgdHJhbnMudG8oKS5uYW1lID09PSAnRCc7IC8vIHRydWVcbiAgICAgKiAgIHRyYW5zLnJlZGlyZWN0ZWRGcm9tKCkudG8oKS5uYW1lID09PSAnQyc7IC8vIHRydWVcbiAgICAgKiAgIHRyYW5zLm9yaWdpbmFsVHJhbnNpdGlvbigpID09PSB0cmFuc2l0aW9uQTsgLy8gdHJ1ZVxuICAgICAqICAgdHJhbnMub3JpZ2luYWxUcmFuc2l0aW9uKCkudG8oKS5uYW1lID09PSAnQSc7IC8vIHRydWVcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBvcmlnaW5hbCBUcmFuc2l0aW9uIHRoYXQgc3RhcnRlZCBhIHJlZGlyZWN0IGNoYWluXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub3JpZ2luYWxUcmFuc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmYgPSB0aGlzLnJlZGlyZWN0ZWRGcm9tKCk7XG4gICAgICAgIHJldHVybiAocmYgJiYgcmYub3JpZ2luYWxUcmFuc2l0aW9uKCkpIHx8IHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRyYW5zaXRpb24gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybnMgdGhlIG9wdGlvbnMgZm9yIHRoaXMgVHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXRlcyBiZWluZyBlbnRlcmVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgd2lsbCBiZSBlbnRlcmVkIGR1cmluZyB0aGlzIHRyYW5zaXRpb24uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZW50ZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXAodGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmcsIHByb3AoJ3N0YXRlJykpLm1hcChzdGF0ZVNlbGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhdGVzIGJlaW5nIGV4aXRlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIHN0YXRlcyB0aGF0IHdpbGwgYmUgZXhpdGVkIGR1cmluZyB0aGlzIHRyYW5zaXRpb24uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZXhpdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG1hcCh0aGlzLl90cmVlQ2hhbmdlcy5leGl0aW5nLCBwcm9wKCdzdGF0ZScpKVxuICAgICAgICAgICAgLm1hcChzdGF0ZVNlbGYpXG4gICAgICAgICAgICAucmV2ZXJzZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhdGVzIGJlaW5nIHJldGFpbmVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgYXJlIGFscmVhZHkgZW50ZXJlZCBmcm9tIGEgcHJldmlvdXMgVHJhbnNpdGlvbiwgdGhhdCB3aWxsIG5vdCBiZVxuICAgICAqICAgIGV4aXRlZCBkdXJpbmcgdGhpcyBUcmFuc2l0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucmV0YWluZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXAodGhpcy5fdHJlZUNoYW5nZXMucmV0YWluZWQsIHByb3AoJ3N0YXRlJykpLm1hcChzdGF0ZVNlbGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBbW1ZpZXdDb25maWddXXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgVHJhbnNpdGlvblxuICAgICAqXG4gICAgICogRWFjaCBzdGF0ZSBjYW4gZGVmaW5lIG9uZSBvciBtb3JlIHZpZXdzICh0ZW1wbGF0ZS9jb250cm9sbGVyKSwgd2hpY2ggYXJlIGVuY2Fwc3VsYXRlZCBhcyBgVmlld0NvbmZpZ2Agb2JqZWN0cy5cbiAgICAgKiBUaGlzIG1ldGhvZCBmZXRjaGVzIHRoZSBgVmlld0NvbmZpZ3NgIGZvciBhIGdpdmVuIHBhdGggaW4gdGhlIFRyYW5zaXRpb24gKGUuZy4sIFwidG9cIiBvciBcImVudGVyaW5nXCIpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhuYW1lIHRoZSBuYW1lIG9mIHRoZSBwYXRoIHRvIGZldGNoIHZpZXdzIGZvcjpcbiAgICAgKiAgIChgJ3RvJ2AsIGAnZnJvbSdgLCBgJ2VudGVyaW5nJ2AsIGAnZXhpdGluZydgLCBgJ3JldGFpbmVkJ2ApXG4gICAgICogQHBhcmFtIHN0YXRlIElmIHByb3ZpZGVkLCBvbmx5IHJldHVybnMgdGhlIGBWaWV3Q29uZmlnYHMgZm9yIGEgc2luZ2xlIHN0YXRlIGluIHRoZSBwYXRoXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIGxpc3Qgb2YgVmlld0NvbmZpZyBvYmplY3RzIGZvciB0aGUgZ2l2ZW4gcGF0aC5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS52aWV3cyA9IGZ1bmN0aW9uIChwYXRobmFtZSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKHBhdGhuYW1lID09PSB2b2lkIDApIHsgcGF0aG5hbWUgPSAnZW50ZXJpbmcnOyB9XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdO1xuICAgICAgICBwYXRoID0gIXN0YXRlID8gcGF0aCA6IHBhdGguZmlsdGVyKHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgICAgICByZXR1cm4gcGF0aFxuICAgICAgICAgICAgLm1hcChwcm9wKCd2aWV3cycpKVxuICAgICAgICAgICAgLmZpbHRlcihpZGVudGl0eSlcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pO1xuICAgIH07XG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudHJlZUNoYW5nZXMgPSBmdW5jdGlvbiAocGF0aG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhuYW1lID8gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdIDogdGhpcy5fdHJlZUNoYW5nZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRyYW5zaXRpb24gdGhhdCBpcyBhIHJlZGlyZWN0aW9uIG9mIHRoZSBjdXJyZW50IG9uZS5cbiAgICAgKlxuICAgICAqIFRoaXMgdHJhbnNpdGlvbiBjYW4gYmUgcmV0dXJuZWQgZnJvbSBhIFtbVHJhbnNpdGlvblNlcnZpY2VdXSBob29rIHRvXG4gICAgICogcmVkaXJlY3QgYSB0cmFuc2l0aW9uIHRvIGEgbmV3IHN0YXRlIGFuZC9vciBzZXQgb2YgcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIG5ldyBbW1RyYW5zaXRpb25dXSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkge1xuICAgICAgICB2YXIgcmVkaXJlY3RzID0gMSwgdHJhbnMgPSB0aGlzO1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uZGl0aW9uYWwtYXNzaWdubWVudFxuICAgICAgICB3aGlsZSAoKHRyYW5zID0gdHJhbnMucmVkaXJlY3RlZEZyb20oKSkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCsrcmVkaXJlY3RzID4gMjApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIG1hbnkgY29uc2VjdXRpdmUgVHJhbnNpdGlvbiByZWRpcmVjdHMgKDIwKylcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlZGlyZWN0T3B0cyA9IHsgcmVkaXJlY3RlZEZyb206IHRoaXMsIHNvdXJjZTogJ3JlZGlyZWN0JyB9O1xuICAgICAgICAvLyBJZiB0aGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgY2F1c2VkIGJ5IFVSTCBzeW5jLCB0aGVuIHVzZSB7IGxvY2F0aW9uOiAncmVwbGFjZScgfVxuICAgICAgICAvLyBvbiB0aGUgbmV3IHRyYW5zaXRpb24gKHVubGVzcyB0aGUgdGFyZ2V0IHN0YXRlIGV4cGxpY2l0bHkgc3BlY2lmaWVzIGxvY2F0aW9uOiBmYWxzZSkuXG4gICAgICAgIC8vIFRoaXMgY2F1c2VzIHRoZSBvcmlnaW5hbCB1cmwgdG8gYmUgcmVwbGFjZWQgd2l0aCB0aGUgdXJsIGZvciB0aGUgcmVkaXJlY3QgdGFyZ2V0XG4gICAgICAgIC8vIHNvIHRoZSBvcmlnaW5hbCB1cmwgZGlzYXBwZWFycyBmcm9tIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMoKS5zb3VyY2UgPT09ICd1cmwnICYmIHRhcmdldFN0YXRlLm9wdGlvbnMoKS5sb2NhdGlvbiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJlZGlyZWN0T3B0cy5sb2NhdGlvbiA9ICdyZXBsYWNlJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3T3B0aW9ucyA9IGV4dGVuZCh7fSwgdGhpcy5vcHRpb25zKCksIHRhcmdldFN0YXRlLm9wdGlvbnMoKSwgcmVkaXJlY3RPcHRzKTtcbiAgICAgICAgdGFyZ2V0U3RhdGUgPSB0YXJnZXRTdGF0ZS53aXRoT3B0aW9ucyhuZXdPcHRpb25zLCB0cnVlKTtcbiAgICAgICAgdmFyIG5ld1RyYW5zaXRpb24gPSB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUodGhpcy5fdHJlZUNoYW5nZXMuZnJvbSwgdGFyZ2V0U3RhdGUpO1xuICAgICAgICB2YXIgb3JpZ2luYWxFbnRlcmluZ05vZGVzID0gdGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmc7XG4gICAgICAgIHZhciByZWRpcmVjdEVudGVyaW5nTm9kZXMgPSBuZXdUcmFuc2l0aW9uLl90cmVlQ2hhbmdlcy5lbnRlcmluZztcbiAgICAgICAgLy8gLS0tIFJlLXVzZSByZXNvbHZlIGRhdGEgZnJvbSBvcmlnaW5hbCB0cmFuc2l0aW9uIC0tLVxuICAgICAgICAvLyBXaGVuIHJlZGlyZWN0aW5nIGZyb20gYSBwYXJlbnQgc3RhdGUgdG8gYSBjaGlsZCBzdGF0ZSB3aGVyZSB0aGUgcGFyZW50IHBhcmFtZXRlciB2YWx1ZXMgaGF2ZW4ndCBjaGFuZ2VkXG4gICAgICAgIC8vIChiZWNhdXNlIG9mIHRoZSByZWRpcmVjdCksIHRoZSByZXNvbHZlcyBmZXRjaGVkIGJ5IHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIGFyZSBzdGlsbCB2YWxpZCBpbiB0aGVcbiAgICAgICAgLy8gcmVkaXJlY3RlZCB0cmFuc2l0aW9uLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGFsbG93cyB5b3UgdG8gZGVmaW5lIGEgcmVkaXJlY3Qgb24gYSBwYXJlbnQgc3RhdGUgd2hpY2ggZGVwZW5kcyBvbiBhbiBhc3luYyByZXNvbHZlIHZhbHVlLlxuICAgICAgICAvLyBZb3UgY2FuIHdhaXQgZm9yIHRoZSByZXNvbHZlLCB0aGVuIHJlZGlyZWN0IHRvIGEgY2hpbGQgc3RhdGUgYmFzZWQgb24gdGhlIHJlc3VsdC5cbiAgICAgICAgLy8gVGhlIHJlZGlyZWN0ZWQgdHJhbnNpdGlvbiBkb2VzIG5vdCBoYXZlIHRvIHJlLWZldGNoIHRoZSByZXNvbHZlLlxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdmFyIG5vZGVJc1JlbG9hZGluZyA9IGZ1bmN0aW9uIChyZWxvYWRTdGF0ZSkgeyByZXR1cm4gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiByZWxvYWRTdGF0ZSAmJiBub2RlLnN0YXRlLmluY2x1ZGVzW3JlbG9hZFN0YXRlLm5hbWVdO1xuICAgICAgICB9OyB9O1xuICAgICAgICAvLyBGaW5kIGFueSBcImVudGVyaW5nXCIgbm9kZXMgaW4gdGhlIHJlZGlyZWN0IHBhdGggdGhhdCBtYXRjaCB0aGUgb3JpZ2luYWwgcGF0aCBhbmQgYXJlbid0IGJlaW5nIHJlbG9hZGVkXG4gICAgICAgIHZhciBtYXRjaGluZ0VudGVyaW5nTm9kZXMgPSBQYXRoVXRpbHMubWF0Y2hpbmcocmVkaXJlY3RFbnRlcmluZ05vZGVzLCBvcmlnaW5hbEVudGVyaW5nTm9kZXMsIFBhdGhVdGlscy5ub25EeW5hbWljUGFyYW1zKS5maWx0ZXIobm90KG5vZGVJc1JlbG9hZGluZyh0YXJnZXRTdGF0ZS5vcHRpb25zKCkucmVsb2FkU3RhdGUpKSk7XG4gICAgICAgIC8vIFVzZSB0aGUgZXhpc3RpbmcgKHBvc3NpYmx5IHByZS1yZXNvbHZlZCkgcmVzb2x2YWJsZXMgZm9yIHRoZSBtYXRjaGluZyBlbnRlcmluZyBub2Rlcy5cbiAgICAgICAgbWF0Y2hpbmdFbnRlcmluZ05vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUsIGlkeCkge1xuICAgICAgICAgICAgbm9kZS5yZXNvbHZhYmxlcyA9IG9yaWdpbmFsRW50ZXJpbmdOb2Rlc1tpZHhdLnJlc29sdmFibGVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ld1RyYW5zaXRpb247XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiBJZiBhIHRyYW5zaXRpb24gZG9lc24ndCBleGl0L2VudGVyIGFueSBzdGF0ZXMsIHJldHVybnMgYW55IFtbUGFyYW1dXSB3aG9zZSB2YWx1ZSBjaGFuZ2VkICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuX2NoYW5nZWRQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YyA9IHRoaXMuX3RyZWVDaGFuZ2VzO1xuICAgICAgICAvKiogUmV0dXJuIHVuZGVmaW5lZCBpZiBpdCdzIG5vdCBhIFwiZHluYW1pY1wiIHRyYW5zaXRpb24sIGZvciB0aGUgZm9sbG93aW5nIHJlYXNvbnMgKi9cbiAgICAgICAgLy8gSWYgdXNlciBleHBsaWNpdGx5IHdhbnRzIGEgcmVsb2FkXG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zLnJlbG9hZClcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIElmIGFueSBzdGF0ZXMgYXJlIGV4aXRpbmcgb3IgZW50ZXJpbmdcbiAgICAgICAgaWYgKHRjLmV4aXRpbmcubGVuZ3RoIHx8IHRjLmVudGVyaW5nLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIElmIHRvL2Zyb20gcGF0aCBsZW5ndGhzIGRpZmZlclxuICAgICAgICBpZiAodGMudG8ubGVuZ3RoICE9PSB0Yy5mcm9tLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIElmIHRoZSB0by9mcm9tIHBhdGhzIGFyZSBkaWZmZXJlbnRcbiAgICAgICAgdmFyIHBhdGhzRGlmZmVyID0gYXJyYXlUdXBsZXModGMudG8sIHRjLmZyb20pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gdHVwbGVbMF0uc3RhdGUgIT09IHR1cGxlWzFdLnN0YXRlOyB9KVxuICAgICAgICAgICAgLnJlZHVjZShhbnlUcnVlUiwgZmFsc2UpO1xuICAgICAgICBpZiAocGF0aHNEaWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAvLyBGaW5kIGFueSBwYXJhbWV0ZXIgdmFsdWVzIHRoYXQgZGlmZmVyXG4gICAgICAgIHZhciBub2RlU2NoZW1hcyA9IHRjLnRvLm1hcChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5wYXJhbVNjaGVtYTsgfSk7XG4gICAgICAgIHZhciBfYSA9IFt0Yy50bywgdGMuZnJvbV0ubWFwKGZ1bmN0aW9uIChwYXRoKSB7IHJldHVybiBwYXRoLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5wYXJhbVZhbHVlczsgfSk7IH0pLCB0b1ZhbHVlcyA9IF9hWzBdLCBmcm9tVmFsdWVzID0gX2FbMV07XG4gICAgICAgIHZhciB0dXBsZXMgPSBhcnJheVR1cGxlcyhub2RlU2NoZW1hcywgdG9WYWx1ZXMsIGZyb21WYWx1ZXMpO1xuICAgICAgICByZXR1cm4gdHVwbGVzLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzY2hlbWEgPSBfYVswXSwgdG9WYWxzID0gX2FbMV0sIGZyb21WYWxzID0gX2FbMl07XG4gICAgICAgICAgICByZXR1cm4gUGFyYW0uY2hhbmdlZChzY2hlbWEsIHRvVmFscywgZnJvbVZhbHMpO1xuICAgICAgICB9KS5yZWR1Y2UodW5uZXN0UiwgW10pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0cmFuc2l0aW9uIGlzIGR5bmFtaWMuXG4gICAgICpcbiAgICAgKiBBIHRyYW5zaXRpb24gaXMgZHluYW1pYyBpZiBubyBzdGF0ZXMgYXJlIGVudGVyZWQgbm9yIGV4aXRlZCwgYnV0IGF0IGxlYXN0IG9uZSBkeW5hbWljIHBhcmFtZXRlciBoYXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIFRyYW5zaXRpb24gaXMgZHluYW1pY1xuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmR5bmFtaWMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjaGFuZ2VzID0gdGhpcy5fY2hhbmdlZFBhcmFtcygpO1xuICAgICAgICByZXR1cm4gIWNoYW5nZXMgPyBmYWxzZSA6IGNoYW5nZXMubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmR5bmFtaWM7IH0pLnJlZHVjZShhbnlUcnVlUiwgZmFsc2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0cmFuc2l0aW9uIGlzIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiBBIHRyYW5zaXRpb24gaXMgaWdub3JlZCBpZiBubyBzdGF0ZXMgYXJlIGVudGVyZWQgbm9yIGV4aXRlZCwgYW5kIG5vIHBhcmFtZXRlciB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyBpZ25vcmVkLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmlnbm9yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2lnbm9yZWRSZWFzb24oKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuX2lnbm9yZWRSZWFzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwZW5kaW5nID0gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uO1xuICAgICAgICB2YXIgcmVsb2FkU3RhdGUgPSB0aGlzLl9vcHRpb25zLnJlbG9hZFN0YXRlO1xuICAgICAgICB2YXIgc2FtZSA9IGZ1bmN0aW9uIChwYXRoQSwgcGF0aEIpIHtcbiAgICAgICAgICAgIGlmIChwYXRoQS5sZW5ndGggIT09IHBhdGhCLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB2YXIgbWF0Y2hpbmcgPSBQYXRoVXRpbHMubWF0Y2hpbmcocGF0aEEsIHBhdGhCKTtcbiAgICAgICAgICAgIHJldHVybiBwYXRoQS5sZW5ndGggPT09IG1hdGNoaW5nLmZpbHRlcihmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gIXJlbG9hZFN0YXRlIHx8ICFub2RlLnN0YXRlLmluY2x1ZGVzW3JlbG9hZFN0YXRlLm5hbWVdOyB9KS5sZW5ndGg7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBuZXdUQyA9IHRoaXMudHJlZUNoYW5nZXMoKTtcbiAgICAgICAgdmFyIHBlbmRUQyA9IHBlbmRpbmcgJiYgcGVuZGluZy50cmVlQ2hhbmdlcygpO1xuICAgICAgICBpZiAocGVuZFRDICYmIHNhbWUocGVuZFRDLnRvLCBuZXdUQy50bykgJiYgc2FtZShwZW5kVEMuZXhpdGluZywgbmV3VEMuZXhpdGluZykpXG4gICAgICAgICAgICByZXR1cm4gJ1NhbWVBc1BlbmRpbmcnO1xuICAgICAgICBpZiAobmV3VEMuZXhpdGluZy5sZW5ndGggPT09IDAgJiYgbmV3VEMuZW50ZXJpbmcubGVuZ3RoID09PSAwICYmIHNhbWUobmV3VEMuZnJvbSwgbmV3VEMudG8pKVxuICAgICAgICAgICAgcmV0dXJuICdTYW1lQXNDdXJyZW50JztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIHRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGdlbmVyYWxseSBjYWxsZWQgZnJvbSB0aGUgW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvblRvXV1cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBwcm9taXNlIGZvciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBydW5BbGxIb29rcyA9IFRyYW5zaXRpb25Ib29rLnJ1bkFsbEhvb2tzO1xuICAgICAgICAvLyBHZXRzIHRyYW5zaXRpb24gaG9va3MgYXJyYXkgZm9yIHRoZSBnaXZlbiBwaGFzZVxuICAgICAgICB2YXIgZ2V0SG9va3NGb3IgPSBmdW5jdGlvbiAocGhhc2UpIHsgcmV0dXJuIF90aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UocGhhc2UpOyB9O1xuICAgICAgICAvLyBXaGVuIHRoZSBjaGFpbiBpcyBjb21wbGV0ZSwgdGhlbiByZXNvbHZlIG9yIHJlamVjdCB0aGUgZGVmZXJyZWRcbiAgICAgICAgdmFyIHRyYW5zaXRpb25TdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJhY2UudHJhY2VTdWNjZXNzKF90aGlzLiR0bygpLCBfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5zdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLl9kZWZlcnJlZC5yZXNvbHZlKF90aGlzLnRvKCkpO1xuICAgICAgICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5TVUNDRVNTKSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0cmFuc2l0aW9uRXJyb3IgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICB0cmFjZS50cmFjZUVycm9yKHJlYXNvbiwgX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMuc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuX2RlZmVycmVkLnJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgX3RoaXMuX2Vycm9yID0gcmVhc29uO1xuICAgICAgICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5FUlJPUikpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcnVuVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFdhaXQgdG8gYnVpbGQgdGhlIFJVTiBob29rIGNoYWluIHVudGlsIHRoZSBCRUZPUkUgaG9va3MgYXJlIGRvbmVcbiAgICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIGEgQkVGT1JFIGhvb2sgdG8gZHluYW1pY2FsbHkgYWRkIGFkZGl0aW9uYWwgUlVOIGhvb2tzIHZpYSB0aGUgVHJhbnNpdGlvbiBvYmplY3QuXG4gICAgICAgICAgICB2YXIgYWxsUnVuSG9va3MgPSBnZXRIb29rc0ZvcihUcmFuc2l0aW9uSG9va1BoYXNlLlJVTik7XG4gICAgICAgICAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4odW5kZWZpbmVkKTsgfTtcbiAgICAgICAgICAgIHJldHVybiBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhhbGxSdW5Ib29rcywgZG9uZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYmFscyA9IF90aGlzLnJvdXRlci5nbG9iYWxzO1xuICAgICAgICAgICAgZ2xvYmFscy5sYXN0U3RhcnRlZFRyYW5zaXRpb25JZCA9IF90aGlzLiRpZDtcbiAgICAgICAgICAgIGdsb2JhbHMudHJhbnNpdGlvbiA9IF90aGlzO1xuICAgICAgICAgICAgZ2xvYmFscy50cmFuc2l0aW9uSGlzdG9yeS5lbnF1ZXVlKF90aGlzKTtcbiAgICAgICAgICAgIHRyYWNlLnRyYWNlVHJhbnNpdGlvblN0YXJ0KF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhbGxCZWZvcmVIb29rcyA9IGdldEhvb2tzRm9yKFRyYW5zaXRpb25Ib29rUGhhc2UuQkVGT1JFKTtcbiAgICAgICAgVHJhbnNpdGlvbkhvb2suaW52b2tlSG9va3MoYWxsQmVmb3JlSG9va3MsIHN0YXJ0VHJhbnNpdGlvbilcbiAgICAgICAgICAgIC50aGVuKHJ1blRyYW5zaXRpb24pXG4gICAgICAgICAgICAudGhlbih0cmFuc2l0aW9uU3VjY2VzcywgdHJhbnNpdGlvbkVycm9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgVHJhbnNpdGlvbiBpcyB2YWxpZFxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyB2YWxpZFxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZXJyb3IoKSB8fCB0aGlzLnN1Y2Nlc3MgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFib3J0cyB0aGlzIHRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqIEltcGVyYXRpdmUgQVBJIHRvIGFib3J0IGEgVHJhbnNpdGlvbi5cbiAgICAgKiBUaGlzIG9ubHkgYXBwbGllcyB0byBUcmFuc2l0aW9ucyB0aGF0IGFyZSBub3QgeWV0IGNvbXBsZXRlLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBEbyBub3Qgc2V0IGZsYWcgaWYgdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBjb21wbGV0ZVxuICAgICAgICBpZiAoaXNVbmRlZmluZWQodGhpcy5zdWNjZXNzKSkge1xuICAgICAgICAgICAgdGhpcy5fYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBUcmFuc2l0aW9uIGVycm9yIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIElmIHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQgKGFuZCBjb3VsZCBub3QgYmUgcnVuKSwgcmV0dXJucyB0aGUgcmVhc29uIHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQuXG4gICAgICogSWYgdGhlIHRyYW5zaXRpb24gd2FzIHZhbGlkIGFuZCByYW4sIGJ1dCB3YXMgbm90IHN1Y2Nlc3NmdWwsIHJldHVybnMgdGhlIHJlYXNvbiB0aGUgdHJhbnNpdGlvbiBmYWlsZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIHRyYW5zaXRpb24gcmVqZWN0aW9uIGV4cGxhaW5pbmcgd2h5IHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQsIG9yIHRoZSByZWFzb24gdGhlIHRyYW5zaXRpb24gZmFpbGVkLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLiR0bygpO1xuICAgICAgICBpZiAoc3RhdGUuc2VsZi5hYnN0cmFjdCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5pbnZhbGlkKFwiQ2Fubm90IHRyYW5zaXRpb24gdG8gYWJzdHJhY3Qgc3RhdGUgJ1wiICsgc3RhdGUubmFtZSArIFwiJ1wiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyYW1EZWZzID0gc3RhdGUucGFyYW1ldGVycygpO1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5wYXJhbXMoKTtcbiAgICAgICAgdmFyIGludmFsaWRQYXJhbXMgPSBwYXJhbURlZnMuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gIXBhcmFtLnZhbGlkYXRlcyh2YWx1ZXNbcGFyYW0uaWRdKTsgfSk7XG4gICAgICAgIGlmIChpbnZhbGlkUGFyYW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGludmFsaWRWYWx1ZXMgPSBpbnZhbGlkUGFyYW1zLm1hcChmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIFwiW1wiICsgcGFyYW0uaWQgKyBcIjpcIiArIHN0cmluZ2lmeSh2YWx1ZXNbcGFyYW0uaWRdKSArIFwiXVwiOyB9KS5qb2luKCcsICcpO1xuICAgICAgICAgICAgdmFyIGRldGFpbCA9IFwiVGhlIGZvbGxvd2luZyBwYXJhbWV0ZXIgdmFsdWVzIGFyZSBub3QgdmFsaWQgZm9yIHN0YXRlICdcIiArIHN0YXRlLm5hbWUgKyBcIic6IFwiICsgaW52YWxpZFZhbHVlcztcbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uaW52YWxpZChkZXRhaWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN1Y2Nlc3MgPT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBUcmFuc2l0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcm9tU3RhdGVPck5hbWUgPSB0aGlzLmZyb20oKTtcbiAgICAgICAgdmFyIHRvU3RhdGVPck5hbWUgPSB0aGlzLnRvKCk7XG4gICAgICAgIHZhciBhdm9pZEVtcHR5SGFzaCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXNbJyMnXSAhPT0gbnVsbCAmJiBwYXJhbXNbJyMnXSAhPT0gdW5kZWZpbmVkID8gcGFyYW1zIDogb21pdChwYXJhbXMsIFsnIyddKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gKFgpIG1lYW5zIHRoZSB0byBzdGF0ZSBpcyBpbnZhbGlkLlxuICAgICAgICB2YXIgaWQgPSB0aGlzLiRpZCwgZnJvbSA9IGlzT2JqZWN0KGZyb21TdGF0ZU9yTmFtZSkgPyBmcm9tU3RhdGVPck5hbWUubmFtZSA6IGZyb21TdGF0ZU9yTmFtZSwgZnJvbVBhcmFtcyA9IHN0cmluZ2lmeShhdm9pZEVtcHR5SGFzaCh0aGlzLl90cmVlQ2hhbmdlcy5mcm9tLm1hcChwcm9wKCdwYXJhbVZhbHVlcycpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpKSwgdG9WYWxpZCA9IHRoaXMudmFsaWQoKSA/ICcnIDogJyhYKSAnLCB0byA9IGlzT2JqZWN0KHRvU3RhdGVPck5hbWUpID8gdG9TdGF0ZU9yTmFtZS5uYW1lIDogdG9TdGF0ZU9yTmFtZSwgdG9QYXJhbXMgPSBzdHJpbmdpZnkoYXZvaWRFbXB0eUhhc2godGhpcy5wYXJhbXMoKSkpO1xuICAgICAgICByZXR1cm4gXCJUcmFuc2l0aW9uI1wiICsgaWQgKyBcIiggJ1wiICsgZnJvbSArIFwiJ1wiICsgZnJvbVBhcmFtcyArIFwiIC0+IFwiICsgdG9WYWxpZCArIFwiJ1wiICsgdG8gKyBcIidcIiArIHRvUGFyYW1zICsgXCIgKVwiO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFuc2l0aW9uLmRpVG9rZW4gPSBUcmFuc2l0aW9uO1xuICAgIHJldHVybiBUcmFuc2l0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFRyYW5zaXRpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zaXRpb24uanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB1cmxcbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBtYXAsIGluaGVyaXQsIGlkZW50aXR5LCB1bm5lc3QsIHRhaWwsIGZpbmQsIGFsbFRydWVSLCB1bm5lc3RSLCBhcnJheVR1cGxlcyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc0FycmF5LCBpc1N0cmluZywgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUGFyYW0sIERlZlR5cGUgfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgam9pbk5laWdoYm9yc1IsIHNwbGl0T25EZWxpbSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IGRlZmF1bHRzIH0gZnJvbSAnLi4vY29tbW9uJztcbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBxdW90ZVJlZ0V4cChzdHIsIHBhcmFtKSB7XG4gICAgdmFyIHN1cnJvdW5kUGF0dGVybiA9IFsnJywgJyddLCByZXN1bHQgPSBzdHIucmVwbGFjZSgvW1xcXFxcXFtcXF1cXF4kKis/LigpfHt9XS9nLCAnXFxcXCQmJyk7XG4gICAgaWYgKCFwYXJhbSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBzd2l0Y2ggKHBhcmFtLnNxdWFzaCkge1xuICAgICAgICBjYXNlIGZhbHNlOlxuICAgICAgICAgICAgc3Vycm91bmRQYXR0ZXJuID0gWycoJywgJyknICsgKHBhcmFtLmlzT3B0aW9uYWwgPyAnPycgOiAnJyldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgICAgICAgICAgc3Vycm91bmRQYXR0ZXJuID0gWycoPzovKCcsICcpfC8pPyddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBzdXJyb3VuZFBhdHRlcm4gPSBbXCIoXCIgKyBwYXJhbS5zcXVhc2ggKyBcInxcIiwgJyk/J107XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdCArIHN1cnJvdW5kUGF0dGVyblswXSArIHBhcmFtLnR5cGUucGF0dGVybi5zb3VyY2UgKyBzdXJyb3VuZFBhdHRlcm5bMV07XG59XG4vKiogQGhpZGRlbiAqL1xudmFyIG1lbW9pemVUbyA9IGZ1bmN0aW9uIChvYmosIF9wcm9wLCBmbikgeyByZXR1cm4gKG9ialtfcHJvcF0gPSBvYmpbX3Byb3BdIHx8IGZuKCkpOyB9O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBzcGxpdE9uU2xhc2ggPSBzcGxpdE9uRGVsaW0oJy8nKTtcbnZhciBkZWZhdWx0Q29uZmlnID0ge1xuICAgIHN0YXRlOiB7IHBhcmFtczoge30gfSxcbiAgICBzdHJpY3Q6IHRydWUsXG4gICAgY2FzZUluc2Vuc2l0aXZlOiB0cnVlLFxufTtcbi8qKlxuICogTWF0Y2hlcyBVUkxzIGFnYWluc3QgcGF0dGVybnMuXG4gKlxuICogTWF0Y2hlcyBVUkxzIGFnYWluc3QgcGF0dGVybnMgYW5kIGV4dHJhY3RzIG5hbWVkIHBhcmFtZXRlcnMgZnJvbSB0aGUgcGF0aCBvciB0aGUgc2VhcmNoXG4gKiBwYXJ0IG9mIHRoZSBVUkwuXG4gKlxuICogQSBVUkwgcGF0dGVybiBjb25zaXN0cyBvZiBhIHBhdGggcGF0dGVybiwgb3B0aW9uYWxseSBmb2xsb3dlZCBieSAnPycgYW5kIGEgbGlzdCBvZiBzZWFyY2ggKHF1ZXJ5KVxuICogcGFyYW1ldGVycy4gTXVsdGlwbGUgc2VhcmNoIHBhcmFtZXRlciBuYW1lcyBhcmUgc2VwYXJhdGVkIGJ5ICcmJy4gU2VhcmNoIHBhcmFtZXRlcnNcbiAqIGRvIG5vdCBpbmZsdWVuY2Ugd2hldGhlciBvciBub3QgYSBVUkwgaXMgbWF0Y2hlZCwgYnV0IHRoZWlyIHZhbHVlcyBhcmUgcGFzc2VkIHRocm91Z2ggaW50b1xuICogdGhlIG1hdGNoZWQgcGFyYW1ldGVycyByZXR1cm5lZCBieSBbW1VybE1hdGNoZXIuZXhlY11dLlxuICpcbiAqIC0gKlBhdGggcGFyYW1ldGVycyogYXJlIGRlZmluZWQgdXNpbmcgY3VybHkgYnJhY2UgcGxhY2Vob2xkZXJzIChgL3NvbWVwYXRoL3twYXJhbX1gKVxuICogb3IgY29sb24gcGxhY2Vob2xkZXJzIChgL3NvbWVQYXRoLzpwYXJhbWApLlxuICpcbiAqIC0gKkEgcGFyYW1ldGVyIFJlZ0V4cCogbWF5IGJlIGRlZmluZWQgZm9yIGEgcGFyYW0gYWZ0ZXIgYSBjb2xvblxuICogKGAvc29tZVBhdGgve3BhcmFtOlthLXpBLVowLTldK31gKSBpbiBhIGN1cmx5IGJyYWNlIHBsYWNlaG9sZGVyLlxuICogVGhlIHJlZ2V4cCBtdXN0IG1hdGNoIGZvciB0aGUgdXJsIHRvIGJlIG1hdGNoZWQuXG4gKiBTaG91bGQgdGhlIHJlZ2V4cCBpdHNlbGYgY29udGFpbiBjdXJseSBicmFjZXMsIHRoZXkgbXVzdCBiZSBpbiBtYXRjaGVkIHBhaXJzIG9yIGVzY2FwZWQgd2l0aCBhIGJhY2tzbGFzaC5cbiAqXG4gKiBOb3RlOiBhIFJlZ0V4cCBwYXJhbWV0ZXIgd2lsbCBlbmNvZGUgaXRzIHZhbHVlIHVzaW5nIGVpdGhlciBbW1BhcmFtVHlwZXMucGF0aF1dIG9yIFtbUGFyYW1UeXBlcy5xdWVyeV1dLlxuICpcbiAqIC0gKkN1c3RvbSBwYXJhbWV0ZXIgdHlwZXMqIG1heSBhbHNvIGJlIHNwZWNpZmllZCBhZnRlciBhIGNvbG9uIChgL3NvbWVQYXRoL3twYXJhbTppbnR9YCkgaW4gY3VybHkgYnJhY2UgcGFyYW1ldGVycy5cbiAqICAgU2VlIFtbVXJsTWF0Y2hlckZhY3RvcnkudHlwZV1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIC0gKkNhdGNoLWFsbCBwYXJhbWV0ZXJzKiBhcmUgZGVmaW5lZCB1c2luZyBhbiBhc3RlcmlzayBwbGFjZWhvbGRlciAoYC9zb21lcGF0aC8qY2F0Y2hhbGxwYXJhbWApLlxuICogICBBIGNhdGNoLWFsbCAqIHBhcmFtZXRlciB2YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIHJlbWFpbmRlciBvZiB0aGUgVVJMLlxuICpcbiAqIC0tLVxuICpcbiAqIFBhcmFtZXRlciBuYW1lcyBtYXkgY29udGFpbiBvbmx5IHdvcmQgY2hhcmFjdGVycyAobGF0aW4gbGV0dGVycywgZGlnaXRzLCBhbmQgdW5kZXJzY29yZSkgYW5kXG4gKiBtdXN0IGJlIHVuaXF1ZSB3aXRoaW4gdGhlIHBhdHRlcm4gKGFjcm9zcyBib3RoIHBhdGggYW5kIHNlYXJjaCBwYXJhbWV0ZXJzKS5cbiAqIEEgcGF0aCBwYXJhbWV0ZXIgbWF0Y2hlcyBhbnkgbnVtYmVyIG9mIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiAnLycuIEZvciBjYXRjaC1hbGxcbiAqIHBsYWNlaG9sZGVycyB0aGUgcGF0aCBwYXJhbWV0ZXIgbWF0Y2hlcyBhbnkgbnVtYmVyIG9mIGNoYXJhY3RlcnMuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogKiBgJy9oZWxsby8nYCAtIE1hdGNoZXMgb25seSBpZiB0aGUgcGF0aCBpcyBleGFjdGx5ICcvaGVsbG8vJy4gVGhlcmUgaXMgbm8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yXG4gKiAgIHRyYWlsaW5nIHNsYXNoZXMsIGFuZCBwYXR0ZXJucyBoYXZlIHRvIG1hdGNoIHRoZSBlbnRpcmUgcGF0aCwgbm90IGp1c3QgYSBwcmVmaXguXG4gKiAqIGAnL3VzZXIvOmlkJ2AgLSBNYXRjaGVzICcvdXNlci9ib2InIG9yICcvdXNlci8xMjM0ISEhJyBvciBldmVuICcvdXNlci8nIGJ1dCBub3QgJy91c2VyJyBvclxuICogICAnL3VzZXIvYm9iL2RldGFpbHMnLiBUaGUgc2Vjb25kIHBhdGggc2VnbWVudCB3aWxsIGJlIGNhcHR1cmVkIGFzIHRoZSBwYXJhbWV0ZXIgJ2lkJy5cbiAqICogYCcvdXNlci97aWR9J2AgLSBTYW1lIGFzIHRoZSBwcmV2aW91cyBleGFtcGxlLCBidXQgdXNpbmcgY3VybHkgYnJhY2Ugc3ludGF4LlxuICogKiBgJy91c2VyL3tpZDpbXi9dKn0nYCAtIFNhbWUgYXMgdGhlIHByZXZpb3VzIGV4YW1wbGUuXG4gKiAqIGAnL3VzZXIve2lkOlswLTlhLWZBLUZdezEsOH19J2AgLSBTaW1pbGFyIHRvIHRoZSBwcmV2aW91cyBleGFtcGxlLCBidXQgb25seSBtYXRjaGVzIGlmIHRoZSBpZFxuICogICBwYXJhbWV0ZXIgY29uc2lzdHMgb2YgMSB0byA4IGhleCBkaWdpdHMuXG4gKiAqIGAnL2ZpbGVzL3twYXRoOi4qfSdgIC0gTWF0Y2hlcyBhbnkgVVJMIHN0YXJ0aW5nIHdpdGggJy9maWxlcy8nIGFuZCBjYXB0dXJlcyB0aGUgcmVzdCBvZiB0aGVcbiAqICAgcGF0aCBpbnRvIHRoZSBwYXJhbWV0ZXIgJ3BhdGgnLlxuICogKiBgJy9maWxlcy8qcGF0aCdgIC0gZGl0dG8uXG4gKiAqIGAnL2NhbGVuZGFyL3tzdGFydDpkYXRlfSdgIC0gTWF0Y2hlcyBcIi9jYWxlbmRhci8yMDE0LTExLTEyXCIgKGJlY2F1c2UgdGhlIHBhdHRlcm4gZGVmaW5lZFxuICogICBpbiB0aGUgYnVpbHQtaW4gIGBkYXRlYCBQYXJhbVR5cGUgbWF0Y2hlcyBgMjAxNC0xMS0xMmApIGFuZCBwcm92aWRlcyBhIERhdGUgb2JqZWN0IGluICRzdGF0ZVBhcmFtcy5zdGFydFxuICpcbiAqL1xudmFyIFVybE1hdGNoZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHBhdHRlcm4gVGhlIHBhdHRlcm4gdG8gY29tcGlsZSBpbnRvIGEgbWF0Y2hlci5cbiAgICAgKiBAcGFyYW0gcGFyYW1UeXBlcyBUaGUgW1tQYXJhbVR5cGVzXV0gcmVnaXN0cnlcbiAgICAgKiBAcGFyYW0gcGFyYW1GYWN0b3J5IEEgW1tQYXJhbUZhY3RvcnldXSBvYmplY3RcbiAgICAgKiBAcGFyYW0gY29uZmlnICBBIFtbVXJsTWF0Y2hlckNvbXBpbGVDb25maWddXSBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFVybE1hdGNoZXIocGF0dGVybiwgcGFyYW1UeXBlcywgcGFyYW1GYWN0b3J5LCBjb25maWcpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fY2FjaGUgPSB7IHBhdGg6IFt0aGlzXSB9O1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9wYXJhbXMgPSBbXTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fc2VnbWVudHMgPSBbXTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fY29tcGlsZWQgPSBbXTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWcgPSBkZWZhdWx0cyhjb25maWcsIGRlZmF1bHRDb25maWcpO1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgICAgICAvLyBGaW5kIGFsbCBwbGFjZWhvbGRlcnMgYW5kIGNyZWF0ZSBhIGNvbXBpbGVkIHBhdHRlcm4sIHVzaW5nIGVpdGhlciBjbGFzc2ljIG9yIGN1cmx5IHN5bnRheDpcbiAgICAgICAgLy8gICAnKicgbmFtZVxuICAgICAgICAvLyAgICc6JyBuYW1lXG4gICAgICAgIC8vICAgJ3snIG5hbWUgJ30nXG4gICAgICAgIC8vICAgJ3snIG5hbWUgJzonIHJlZ2V4cCAnfSdcbiAgICAgICAgLy8gVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBzb21ld2hhdCBjb21wbGljYXRlZCBkdWUgdG8gdGhlIG5lZWQgdG8gYWxsb3cgY3VybHkgYnJhY2VzXG4gICAgICAgIC8vIGluc2lkZSB0aGUgcmVndWxhciBleHByZXNzaW9uLiBUaGUgcGxhY2Vob2xkZXIgcmVnZXhwIGJyZWFrcyBkb3duIGFzIGZvbGxvd3M6XG4gICAgICAgIC8vICAgIChbOipdKShbXFx3XFxbXFxdXSspICAgICAgICAgICAgICAtIGNsYXNzaWMgcGxhY2Vob2xkZXIgKCQxIC8gJDIpIChzZWFyY2ggdmVyc2lvbiBoYXMgLSBmb3Igc25ha2UtY2FzZSlcbiAgICAgICAgLy8gICAgXFx7KFtcXHdcXFtcXF1dKykoPzpcXDpcXHMqKCAuLi4gKSk/XFx9ICAtIGN1cmx5IGJyYWNlIHBsYWNlaG9sZGVyICgkMykgd2l0aCBvcHRpb25hbCByZWdleHAvdHlwZSAuLi4gKCQ0KSAoc2VhcmNoIHZlcnNpb24gaGFzIC0gZm9yIHNuYWtlLWNhc2VcbiAgICAgICAgLy8gICAgKD86IC4uLiB8IC4uLiB8IC4uLiApKyAgICAgICAgIC0gdGhlIHJlZ2V4cCBjb25zaXN0cyBvZiBhbnkgbnVtYmVyIG9mIGF0b21zLCBhbiBhdG9tIGJlaW5nIGVpdGhlclxuICAgICAgICAvLyAgICBbXnt9XFxcXF0rICAgICAgICAgICAgICAgICAgICAgICAtIGFueXRoaW5nIG90aGVyIHRoYW4gY3VybHkgYnJhY2VzIG9yIGJhY2tzbGFzaFxuICAgICAgICAvLyAgICBcXFxcLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIGEgYmFja3NsYXNoIGVzY2FwZVxuICAgICAgICAvLyAgICBcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0gICAgICAgICAgLSBhIG1hdGNoZWQgc2V0IG9mIGN1cmx5IGJyYWNlcyBjb250YWluaW5nIG90aGVyIGF0b21zXG4gICAgICAgIHZhciBwbGFjZWhvbGRlciA9IC8oWzoqXSkoW1xcd1xcW1xcXV0rKXxcXHsoW1xcd1xcW1xcXV0rKSg/OlxcOlxccyooKD86W157fVxcXFxdK3xcXFxcLnxcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0pKykpP1xcfS9nO1xuICAgICAgICB2YXIgc2VhcmNoUGxhY2Vob2xkZXIgPSAvKFs6XT8pKFtcXHdcXFtcXF0uLV0rKXxcXHsoW1xcd1xcW1xcXS4tXSspKD86XFw6XFxzKigoPzpbXnt9XFxcXF0rfFxcXFwufFxceyg/Oltee31cXFxcXSt8XFxcXC4pKlxcfSkrKSk/XFx9L2c7XG4gICAgICAgIHZhciBwYXR0ZXJucyA9IFtdO1xuICAgICAgICB2YXIgbGFzdCA9IDA7XG4gICAgICAgIHZhciBtYXRjaEFycmF5O1xuICAgICAgICB2YXIgY2hlY2tQYXJhbUVycm9ycyA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgaWYgKCFVcmxNYXRjaGVyLm5hbWVWYWxpZGF0b3IudGVzdChpZCkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbWV0ZXIgbmFtZSAnXCIgKyBpZCArIFwiJyBpbiBwYXR0ZXJuICdcIiArIHBhdHRlcm4gKyBcIidcIik7XG4gICAgICAgICAgICBpZiAoZmluZChfdGhpcy5fcGFyYW1zLCBwcm9wRXEoJ2lkJywgaWQpKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEdXBsaWNhdGUgcGFyYW1ldGVyIG5hbWUgJ1wiICsgaWQgKyBcIicgaW4gcGF0dGVybiAnXCIgKyBwYXR0ZXJuICsgXCInXCIpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBTcGxpdCBpbnRvIHN0YXRpYyBzZWdtZW50cyBzZXBhcmF0ZWQgYnkgcGF0aCBwYXJhbWV0ZXIgcGxhY2Vob2xkZXJzLlxuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGlzIGFsd2F5cyAxIG1vcmUgdGhhbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMuXG4gICAgICAgIHZhciBtYXRjaERldGFpbHMgPSBmdW5jdGlvbiAobSwgaXNTZWFyY2gpIHtcbiAgICAgICAgICAgIC8vIElFWzc4XSByZXR1cm5zICcnIGZvciB1bm1hdGNoZWQgZ3JvdXBzIGluc3RlYWQgb2YgbnVsbFxuICAgICAgICAgICAgdmFyIGlkID0gbVsyXSB8fCBtWzNdO1xuICAgICAgICAgICAgdmFyIHJlZ2V4cCA9IGlzU2VhcmNoID8gbVs0XSA6IG1bNF0gfHwgKG1bMV0gPT09ICcqJyA/ICdbXFxcXHNcXFxcU10qJyA6IG51bGwpO1xuICAgICAgICAgICAgdmFyIG1ha2VSZWdleHBUeXBlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmhlcml0KHBhcmFtVHlwZXMudHlwZShpc1NlYXJjaCA/ICdxdWVyeScgOiAncGF0aCcpLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IG5ldyBSZWdFeHAoc3RyLCBfdGhpcy5jb25maWcuY2FzZUluc2Vuc2l0aXZlID8gJ2knIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICByZWdleHA6IHJlZ2V4cCxcbiAgICAgICAgICAgICAgICBzZWdtZW50OiBwYXR0ZXJuLnN1YnN0cmluZyhsYXN0LCBtLmluZGV4KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAhcmVnZXhwID8gbnVsbCA6IHBhcmFtVHlwZXMudHlwZShyZWdleHApIHx8IG1ha2VSZWdleHBUeXBlKHJlZ2V4cCksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZGV0YWlscztcbiAgICAgICAgdmFyIHNlZ21lbnQ7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XG4gICAgICAgIHdoaWxlICgobWF0Y2hBcnJheSA9IHBsYWNlaG9sZGVyLmV4ZWMocGF0dGVybikpKSB7XG4gICAgICAgICAgICBkZXRhaWxzID0gbWF0Y2hEZXRhaWxzKG1hdGNoQXJyYXksIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChkZXRhaWxzLnNlZ21lbnQuaW5kZXhPZignPycpID49IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIHdlJ3JlIGludG8gdGhlIHNlYXJjaCBwYXJ0XG4gICAgICAgICAgICBjaGVja1BhcmFtRXJyb3JzKGRldGFpbHMuaWQpO1xuICAgICAgICAgICAgdGhpcy5fcGFyYW1zLnB1c2gocGFyYW1GYWN0b3J5LmZyb21QYXRoKGRldGFpbHMuaWQsIGRldGFpbHMudHlwZSwgY29uZmlnLnN0YXRlKSk7XG4gICAgICAgICAgICB0aGlzLl9zZWdtZW50cy5wdXNoKGRldGFpbHMuc2VnbWVudCk7XG4gICAgICAgICAgICBwYXR0ZXJucy5wdXNoKFtkZXRhaWxzLnNlZ21lbnQsIHRhaWwodGhpcy5fcGFyYW1zKV0pO1xuICAgICAgICAgICAgbGFzdCA9IHBsYWNlaG9sZGVyLmxhc3RJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBzZWdtZW50ID0gcGF0dGVybi5zdWJzdHJpbmcobGFzdCk7XG4gICAgICAgIC8vIEZpbmQgYW55IHNlYXJjaCBwYXJhbWV0ZXIgbmFtZXMgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIGxhc3Qgc2VnbWVudFxuICAgICAgICB2YXIgaSA9IHNlZ21lbnQuaW5kZXhPZignPycpO1xuICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgc2VhcmNoID0gc2VnbWVudC5zdWJzdHJpbmcoaSk7XG4gICAgICAgICAgICBzZWdtZW50ID0gc2VnbWVudC5zdWJzdHJpbmcoMCwgaSk7XG4gICAgICAgICAgICBpZiAoc2VhcmNoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsYXN0ID0gMDtcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uZGl0aW9uYWwtYXNzaWdubWVudFxuICAgICAgICAgICAgICAgIHdoaWxlICgobWF0Y2hBcnJheSA9IHNlYXJjaFBsYWNlaG9sZGVyLmV4ZWMoc2VhcmNoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscyA9IG1hdGNoRGV0YWlscyhtYXRjaEFycmF5LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tQYXJhbUVycm9ycyhkZXRhaWxzLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyYW1zLnB1c2gocGFyYW1GYWN0b3J5LmZyb21TZWFyY2goZGV0YWlscy5pZCwgZGV0YWlscy50eXBlLCBjb25maWcuc3RhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdCA9IHBsYWNlaG9sZGVyLmxhc3RJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgPyZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2VnbWVudHMucHVzaChzZWdtZW50KTtcbiAgICAgICAgdGhpcy5fY29tcGlsZWQgPSBwYXR0ZXJucy5tYXAoZnVuY3Rpb24gKF9wYXR0ZXJuKSB7IHJldHVybiBxdW90ZVJlZ0V4cC5hcHBseShudWxsLCBfcGF0dGVybik7IH0pLmNvbmNhdChxdW90ZVJlZ0V4cChzZWdtZW50KSk7XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVXJsTWF0Y2hlci5lbmNvZGVEYXNoZXMgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIC8vIFJlcGxhY2UgZGFzaGVzIHdpdGggZW5jb2RlZCBcIlxcLVwiXG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC8tL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIlNUMlXCIgKyBjXG4gICAgICAgICAgICAgICAgLmNoYXJDb2RlQXQoMClcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gR2l2ZW4gYSBtYXRjaGVyLCByZXR1cm4gYW4gYXJyYXkgd2l0aCB0aGUgbWF0Y2hlcidzIHBhdGggc2VnbWVudHMgYW5kIHBhdGggcGFyYW1zLCBpbiBvcmRlciAqL1xuICAgIFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zID0gZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgICAgdmFyIHN0YXRpY1NlZ21lbnRzID0gbWF0Y2hlci5fc2VnbWVudHM7XG4gICAgICAgIHZhciBwYXRoUGFyYW1zID0gbWF0Y2hlci5fcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcC5sb2NhdGlvbiA9PT0gRGVmVHlwZS5QQVRIOyB9KTtcbiAgICAgICAgcmV0dXJuIGFycmF5VHVwbGVzKHN0YXRpY1NlZ21lbnRzLCBwYXRoUGFyYW1zLmNvbmNhdCh1bmRlZmluZWQpKVxuICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggIT09ICcnICYmIGlzRGVmaW5lZCh4KTsgfSk7XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiBHaXZlbiBhIG1hdGNoZXIsIHJldHVybiBhbiBhcnJheSB3aXRoIHRoZSBtYXRjaGVyJ3MgcXVlcnkgcGFyYW1zICovXG4gICAgVXJsTWF0Y2hlci5xdWVyeVBhcmFtcyA9IGZ1bmN0aW9uIChtYXRjaGVyKSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVyLl9wYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLmxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSDsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb21wYXJlIHR3byBVcmxNYXRjaGVyc1xuICAgICAqXG4gICAgICogVGhpcyBjb21wYXJpc29uIGZ1bmN0aW9uIGNvbnZlcnRzIGEgVXJsTWF0Y2hlciBpbnRvIHN0YXRpYyBhbmQgZHluYW1pYyBwYXRoIHNlZ21lbnRzLlxuICAgICAqIEVhY2ggc3RhdGljIHBhdGggc2VnbWVudCBpcyBhIHN0YXRpYyBzdHJpbmcgYmV0d2VlbiBhIHBhdGggc2VwYXJhdG9yIChzbGFzaCBjaGFyYWN0ZXIpLlxuICAgICAqIEVhY2ggZHluYW1pYyBzZWdtZW50IGlzIGEgcGF0aCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBUaGUgY29tcGFyaXNvbiBmdW5jdGlvbiBzb3J0cyBzdGF0aWMgc2VnbWVudHMgYmVmb3JlIGR5bmFtaWMgb25lcy5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLmNvbXBhcmUgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAvKipcbiAgICAgICAgICogVHVybiBhIFVybE1hdGNoZXIgYW5kIGFsbCBpdHMgcGFyZW50IG1hdGNoZXJzIGludG8gYW4gYXJyYXlcbiAgICAgICAgICogb2Ygc2xhc2ggbGl0ZXJhbHMgJy8nLCBzdHJpbmcgbGl0ZXJhbHMsIGFuZCBQYXJhbSBvYmplY3RzXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgZXhhbXBsZSBtYXRjaGVyIG1hdGNoZXMgc3RyaW5ncyBsaWtlIFwiL2Zvby86cGFyYW0vdGFpbFwiOlxuICAgICAgICAgKiB2YXIgbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb29cIikuYXBwZW5kKCR1bWYuY29tcGlsZShcIi86cGFyYW1cIikpLmFwcGVuZCgkdW1mLmNvbXBpbGUoXCIvXCIpKS5hcHBlbmQoJHVtZi5jb21waWxlKFwidGFpbFwiKSk7XG4gICAgICAgICAqIHZhciByZXN1bHQgPSBzZWdtZW50cyhtYXRjaGVyKTsgLy8gWyAnLycsICdmb28nLCAnLycsIFBhcmFtLCAnLycsICd0YWlsJyBdXG4gICAgICAgICAqXG4gICAgICAgICAqIENhY2hlcyB0aGUgcmVzdWx0IGFzIGBtYXRjaGVyLl9jYWNoZS5zZWdtZW50c2BcbiAgICAgICAgICovXG4gICAgICAgIHZhciBzZWdtZW50cyA9IGZ1bmN0aW9uIChtYXRjaGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKG1hdGNoZXIuX2NhY2hlLnNlZ21lbnRzID1cbiAgICAgICAgICAgICAgICBtYXRjaGVyLl9jYWNoZS5zZWdtZW50cyB8fFxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVyLl9jYWNoZS5wYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZWR1Y2Uoam9pbk5laWdoYm9yc1IsIFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gKGlzU3RyaW5nKHgpID8gc3BsaXRPblNsYXNoKHgpIDogeCk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBzb3J0IHdlaWdodCBmb3IgZWFjaCBzZWdtZW50IG9mIGEgVXJsTWF0Y2hlclxuICAgICAgICAgKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIHJlc3VsdCBhcyBgbWF0Y2hlci5fY2FjaGUud2VpZ2h0c2BcbiAgICAgICAgICovXG4gICAgICAgIHZhciB3ZWlnaHRzID0gZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAobWF0Y2hlci5fY2FjaGUud2VpZ2h0cyA9XG4gICAgICAgICAgICAgICAgbWF0Y2hlci5fY2FjaGUud2VpZ2h0cyB8fFxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50cyhtYXRjaGVyKS5tYXAoZnVuY3Rpb24gKHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvcnQgc2xhc2hlcyBmaXJzdCwgdGhlbiBzdGF0aWMgc3RyaW5ncywgdGhlIFBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ21lbnQgPT09ICcvJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1N0cmluZyhzZWdtZW50KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgUGFyYW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhZHMgc2hvcnRlciBhcnJheSBpbi1wbGFjZSAobXV0YXRlcylcbiAgICAgICAgICovXG4gICAgICAgIHZhciBwYWRBcnJheXMgPSBmdW5jdGlvbiAobCwgciwgcGFkVmFsKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gTWF0aC5tYXgobC5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgICAgIHdoaWxlIChsLmxlbmd0aCA8IGxlbilcbiAgICAgICAgICAgICAgICBsLnB1c2gocGFkVmFsKTtcbiAgICAgICAgICAgIHdoaWxlIChyLmxlbmd0aCA8IGxlbilcbiAgICAgICAgICAgICAgICByLnB1c2gocGFkVmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHdlaWdodHNBID0gd2VpZ2h0cyhhKSwgd2VpZ2h0c0IgPSB3ZWlnaHRzKGIpO1xuICAgICAgICBwYWRBcnJheXMod2VpZ2h0c0EsIHdlaWdodHNCLCAwKTtcbiAgICAgICAgdmFyIF9wYWlycyA9IGFycmF5VHVwbGVzKHdlaWdodHNBLCB3ZWlnaHRzQik7XG4gICAgICAgIHZhciBjbXAsIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBfcGFpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNtcCA9IF9wYWlyc1tpXVswXSAtIF9wYWlyc1tpXVsxXTtcbiAgICAgICAgICAgIGlmIChjbXAgIT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNtcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgY29uY2F0ZW5hdGVkIFVybE1hdGNoZXJcbiAgICAgKlxuICAgICAqIEJ1aWxkcyBhIG5ldyBVcmxNYXRjaGVyIGJ5IGFwcGVuZGluZyBhbm90aGVyIFVybE1hdGNoZXIgdG8gdGhpcyBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXJsIEEgYFVybE1hdGNoZXJgIGluc3RhbmNlIHRvIGFwcGVuZCBhcyBhIGNoaWxkIG9mIHRoZSBjdXJyZW50IGBVcmxNYXRjaGVyYC5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuLnB1c2godXJsKTtcbiAgICAgICAgdXJsLl9jYWNoZSA9IHtcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuX2NhY2hlLnBhdGguY29uY2F0KHVybCksXG4gICAgICAgICAgICBwYXJlbnQ6IHRoaXMsXG4gICAgICAgICAgICBwYXR0ZXJuOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5pc1Jvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5wYXRoWzBdID09PSB0aGlzO1xuICAgIH07XG4gICAgLyoqIFJldHVybnMgdGhlIGlucHV0IHBhdHRlcm4gc3RyaW5nICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdHRlcm47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0cyB0aGUgc3BlY2lmaWVkIHVybC9wYXRoIGFnYWluc3QgdGhpcyBtYXRjaGVyLlxuICAgICAqXG4gICAgICogVGVzdHMgaWYgdGhlIGdpdmVuIHVybCBtYXRjaGVzIHRoaXMgbWF0Y2hlcidzIHBhdHRlcm4sIGFuZCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjYXB0dXJlZFxuICAgICAqIHBhcmFtZXRlciB2YWx1ZXMuICBSZXR1cm5zIG51bGwgaWYgdGhlIHBhdGggZG9lcyBub3QgbWF0Y2guXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuZWQgb2JqZWN0IGNvbnRhaW5zIHRoZSB2YWx1ZXNcbiAgICAgKiBvZiBhbnkgc2VhcmNoIHBhcmFtZXRlcnMgdGhhdCBhcmUgbWVudGlvbmVkIGluIHRoZSBwYXR0ZXJuLCBidXQgdGhlaXIgdmFsdWUgbWF5IGJlIG51bGwgaWZcbiAgICAgKiB0aGV5IGFyZSBub3QgcHJlc2VudCBpbiBgc2VhcmNoYC4gVGhpcyBtZWFucyB0aGF0IHNlYXJjaCBwYXJhbWV0ZXJzIGFyZSBhbHdheXMgdHJlYXRlZFxuICAgICAqIGFzIG9wdGlvbmFsLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbmV3IFVybE1hdGNoZXIoJy91c2VyL3tpZH0/cSZyJykuZXhlYygnL3VzZXIvYm9iJywge1xuICAgICAqICAgeDogJzEnLCBxOiAnaGVsbG8nXG4gICAgICogfSk7XG4gICAgICogLy8gcmV0dXJucyB7IGlkOiAnYm9iJywgcTogJ2hlbGxvJywgcjogbnVsbCB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAgICBUaGUgVVJMIHBhdGggdG8gbWF0Y2gsIGUuZy4gYCRsb2NhdGlvbi5wYXRoKClgLlxuICAgICAqIEBwYXJhbSBzZWFyY2ggIFVSTCBzZWFyY2ggcGFyYW1ldGVycywgZS5nLiBgJGxvY2F0aW9uLnNlYXJjaCgpYC5cbiAgICAgKiBAcGFyYW0gaGFzaCAgICBVUkwgaGFzaCBlLmcuIGAkbG9jYXRpb24uaGFzaCgpYC5cbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNhcHR1cmVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAgICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUuZXhlYyA9IGZ1bmN0aW9uIChwYXRoLCBzZWFyY2gsIGhhc2gsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHNlYXJjaCA9PT0gdm9pZCAwKSB7IHNlYXJjaCA9IHt9OyB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciBtYXRjaCA9IG1lbW9pemVUbyh0aGlzLl9jYWNoZSwgJ3BhdHRlcm4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChbXG4gICAgICAgICAgICAgICAgJ14nLFxuICAgICAgICAgICAgICAgIHVubmVzdChfdGhpcy5fY2FjaGUucGF0aC5tYXAocHJvcCgnX2NvbXBpbGVkJykpKS5qb2luKCcnKSxcbiAgICAgICAgICAgICAgICBfdGhpcy5jb25maWcuc3RyaWN0ID09PSBmYWxzZSA/ICcvPycgOiAnJyxcbiAgICAgICAgICAgICAgICAnJCcsXG4gICAgICAgICAgICBdLmpvaW4oJycpLCBfdGhpcy5jb25maWcuY2FzZUluc2Vuc2l0aXZlID8gJ2knIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfSkuZXhlYyhwYXRoKTtcbiAgICAgICAgaWYgKCFtYXRjaClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAvLyBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgeyBpc29sYXRlOiBmYWxzZSB9KTtcbiAgICAgICAgdmFyIGFsbFBhcmFtcyA9IHRoaXMucGFyYW1ldGVycygpLCBwYXRoUGFyYW1zID0gYWxsUGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuICFwYXJhbS5pc1NlYXJjaCgpOyB9KSwgc2VhcmNoUGFyYW1zID0gYWxsUGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtLmlzU2VhcmNoKCk7IH0pLCBuUGF0aFNlZ21lbnRzID0gdGhpcy5fY2FjaGUucGF0aC5tYXAoZnVuY3Rpb24gKHVybG0pIHsgcmV0dXJuIHVybG0uX3NlZ21lbnRzLmxlbmd0aCAtIDE7IH0pLnJlZHVjZShmdW5jdGlvbiAoYSwgeCkgeyByZXR1cm4gYSArIHg7IH0pLCB2YWx1ZXMgPSB7fTtcbiAgICAgICAgaWYgKG5QYXRoU2VnbWVudHMgIT09IG1hdGNoLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmJhbGFuY2VkIGNhcHR1cmUgZ3JvdXAgaW4gcm91dGUgJ1wiICsgdGhpcy5wYXR0ZXJuICsgXCInXCIpO1xuICAgICAgICBmdW5jdGlvbiBkZWNvZGVQYXRoQXJyYXkocGFyYW1WYWwpIHtcbiAgICAgICAgICAgIHZhciByZXZlcnNlU3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHJcbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCcnKVxuICAgICAgICAgICAgICAgICAgICAucmV2ZXJzZSgpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdW5xdW90ZURhc2hlcyA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXFxcLS9nLCAnLScpOyB9O1xuICAgICAgICAgICAgdmFyIHNwbGl0ID0gcmV2ZXJzZVN0cmluZyhwYXJhbVZhbCkuc3BsaXQoLy0oPyFcXFxcKS8pO1xuICAgICAgICAgICAgdmFyIGFsbFJldmVyc2VkID0gbWFwKHNwbGl0LCByZXZlcnNlU3RyaW5nKTtcbiAgICAgICAgICAgIHJldHVybiBtYXAoYWxsUmV2ZXJzZWQsIHVucXVvdGVEYXNoZXMpLnJldmVyc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5QYXRoU2VnbWVudHM7IGkrKykge1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gcGF0aFBhcmFtc1tpXTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG1hdGNoW2kgKyAxXTtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBwYXJhbSB2YWx1ZSBtYXRjaGVzIGEgcHJlLXJlcGxhY2UgcGFpciwgcmVwbGFjZSB0aGUgdmFsdWUgYmVmb3JlIGRlY29kaW5nLlxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJhbS5yZXBsYWNlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtLnJlcGxhY2Vbal0uZnJvbSA9PT0gdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyYW0ucmVwbGFjZVtqXS50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiBwYXJhbS5hcnJheSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRlY29kZVBhdGhBcnJheSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmFtLnR5cGUuZGVjb2RlKHZhbHVlKTtcbiAgICAgICAgICAgIHZhbHVlc1twYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VhcmNoUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBzZWFyY2hbcGFyYW0uaWRdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJhbS5yZXBsYWNlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtLnJlcGxhY2Vbal0uZnJvbSA9PT0gdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyYW0ucmVwbGFjZVtqXS50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyYW0udHlwZS5kZWNvZGUodmFsdWUpO1xuICAgICAgICAgICAgdmFsdWVzW3BhcmFtLmlkXSA9IHBhcmFtLnZhbHVlKHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChoYXNoKVxuICAgICAgICAgICAgdmFsdWVzWycjJ10gPSBoYXNoO1xuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFJldHVybnMgYWxsIHRoZSBbW1BhcmFtXV0gb2JqZWN0cyBvZiBhbGwgcGF0aCBhbmQgc2VhcmNoIHBhcmFtZXRlcnMgb2YgdGhpcyBwYXR0ZXJuIGluIG9yZGVyIG9mIGFwcGVhcmFuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7QXJyYXkuPFBhcmFtPn0gIEFuIGFycmF5IG9mIFtbUGFyYW1dXSBvYmplY3RzLiBNdXN0IGJlIHRyZWF0ZWQgYXMgcmVhZC1vbmx5LiBJZiB0aGVcbiAgICAgKiAgICBwYXR0ZXJuIGhhcyBubyBwYXJhbWV0ZXJzLCBhbiBlbXB0eSBhcnJheSBpcyByZXR1cm5lZC5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5wYXJhbWV0ZXJzID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICAgICAgaWYgKG9wdHMuaW5oZXJpdCA9PT0gZmFsc2UpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFyYW1zO1xuICAgICAgICByZXR1cm4gdW5uZXN0KHRoaXMuX2NhY2hlLnBhdGgubWFwKGZ1bmN0aW9uIChtYXRjaGVyKSB7IHJldHVybiBtYXRjaGVyLl9wYXJhbXM7IH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIHBhcmFtZXRlciBmcm9tIHRoaXMgVXJsTWF0Y2hlciBieSBpZFxuICAgICAqXG4gICAgICogQHBhcmFtIGlkXG4gICAgICogQHBhcmFtIG9wdHNcbiAgICAgKiBAcmV0dXJucyB7VHxQYXJhbXxhbnl8Ym9vbGVhbnxVcmxNYXRjaGVyfG51bGx9XG4gICAgICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUucGFyYW1ldGVyID0gZnVuY3Rpb24gKGlkLCBvcHRzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChvcHRzID09PSB2b2lkIDApIHsgb3B0cyA9IHt9OyB9XG4gICAgICAgIHZhciBmaW5kUGFyYW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMuX3BhcmFtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtLmlkID09PSBpZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5fY2FjaGUucGFyZW50O1xuICAgICAgICByZXR1cm4gZmluZFBhcmFtKCkgfHwgKG9wdHMuaW5oZXJpdCAhPT0gZmFsc2UgJiYgcGFyZW50ICYmIHBhcmVudC5wYXJhbWV0ZXIoaWQsIG9wdHMpKSB8fCBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHRoZSBpbnB1dCBwYXJhbWV0ZXIgdmFsdWVzIGFnYWluc3QgdGhpcyBVcmxNYXRjaGVyXG4gICAgICpcbiAgICAgKiBDaGVja3MgYW4gb2JqZWN0IGhhc2ggb2YgcGFyYW1ldGVycyB0byB2YWxpZGF0ZSB0aGVpciBjb3JyZWN0bmVzcyBhY2NvcmRpbmcgdG8gdGhlIHBhcmFtZXRlclxuICAgICAqIHR5cGVzIG9mIHRoaXMgYFVybE1hdGNoZXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyBUaGUgb2JqZWN0IGhhc2ggb2YgcGFyYW1ldGVycyB0byB2YWxpZGF0ZS5cbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGB0cnVlYCBpZiBgcGFyYW1zYCB2YWxpZGF0ZXMsIG90aGVyd2lzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIFVybE1hdGNoZXIucHJvdG90eXBlLnZhbGlkYXRlcyA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgdmFyIHZhbGlkUGFyYW1WYWwgPSBmdW5jdGlvbiAocGFyYW0sIHZhbCkgeyByZXR1cm4gIXBhcmFtIHx8IHBhcmFtLnZhbGlkYXRlcyh2YWwpOyB9O1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgICAgIC8vIEknbSBub3Qgc3VyZSB3aHkgdGhpcyBjaGVja3Mgb25seSB0aGUgcGFyYW0ga2V5cyBwYXNzZWQgaW4sIGFuZCBub3QgYWxsIHRoZSBwYXJhbXMga25vd24gdG8gdGhlIG1hdGNoZXJcbiAgICAgICAgdmFyIHBhcmFtU2NoZW1hID0gdGhpcy5wYXJhbWV0ZXJzKCkuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbURlZikgeyByZXR1cm4gcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtRGVmLmlkKTsgfSk7XG4gICAgICAgIHJldHVybiBwYXJhbVNjaGVtYS5tYXAoZnVuY3Rpb24gKHBhcmFtRGVmKSB7IHJldHVybiB2YWxpZFBhcmFtVmFsKHBhcmFtRGVmLCBwYXJhbXNbcGFyYW1EZWYuaWRdKTsgfSkucmVkdWNlKGFsbFRydWVSLCB0cnVlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXMsIGNyZWF0ZXMgYSBVUkwgZnJvbSB0aGlzIFVybE1hdGNoZXIuXG4gICAgICpcbiAgICAgKiBDcmVhdGVzIGEgVVJMIHRoYXQgbWF0Y2hlcyB0aGlzIHBhdHRlcm4gYnkgc3Vic3RpdHV0aW5nIHRoZSBzcGVjaWZpZWQgdmFsdWVzXG4gICAgICogZm9yIHRoZSBwYXRoIGFuZCBzZWFyY2ggcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIG5ldyBVcmxNYXRjaGVyKCcvdXNlci97aWR9P3EnKS5mb3JtYXQoeyBpZDonYm9iJywgcToneWVzJyB9KTtcbiAgICAgKiAvLyByZXR1cm5zICcvdXNlci9ib2I/cT15ZXMnXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWVzICB0aGUgdmFsdWVzIHRvIHN1YnN0aXR1dGUgZm9yIHRoZSBwYXJhbWV0ZXJzIGluIHRoaXMgcGF0dGVybi5cbiAgICAgKiBAcmV0dXJucyB0aGUgZm9ybWF0dGVkIFVSTCAocGF0aCBhbmQgb3B0aW9uYWxseSBzZWFyY2ggcGFydCkuXG4gICAgICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0ge307IH1cbiAgICAgICAgLy8gQnVpbGQgdGhlIGZ1bGwgcGF0aCBvZiBVcmxNYXRjaGVycyAoaW5jbHVkaW5nIGFsbCBwYXJlbnQgVXJsTWF0Y2hlcnMpXG4gICAgICAgIHZhciB1cmxNYXRjaGVycyA9IHRoaXMuX2NhY2hlLnBhdGg7XG4gICAgICAgIC8vIEV4dHJhY3QgYWxsIHRoZSBzdGF0aWMgc2VnbWVudHMgYW5kIFBhcmFtcyAocHJvY2Vzc2VkIGFzIFBhcmFtRGV0YWlscylcbiAgICAgICAgLy8gaW50byBhbiBvcmRlcmVkIGFycmF5XG4gICAgICAgIHZhciBwYXRoU2VnbWVudHNBbmRQYXJhbXMgPSB1cmxNYXRjaGVyc1xuICAgICAgICAgICAgLm1hcChVcmxNYXRjaGVyLnBhdGhTZWdtZW50c0FuZFBhcmFtcylcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiAoaXNTdHJpbmcoeCkgPyB4IDogZ2V0RGV0YWlscyh4KSk7IH0pO1xuICAgICAgICAvLyBFeHRyYWN0IHRoZSBxdWVyeSBwYXJhbXMgaW50byBhIHNlcGFyYXRlIGFycmF5XG4gICAgICAgIHZhciBxdWVyeVBhcmFtcyA9IHVybE1hdGNoZXJzXG4gICAgICAgICAgICAubWFwKFVybE1hdGNoZXIucXVlcnlQYXJhbXMpXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLm1hcChnZXREZXRhaWxzKTtcbiAgICAgICAgdmFyIGlzSW52YWxpZCA9IGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gcGFyYW0uaXNWYWxpZCA9PT0gZmFsc2U7IH07XG4gICAgICAgIGlmIChwYXRoU2VnbWVudHNBbmRQYXJhbXMuY29uY2F0KHF1ZXJ5UGFyYW1zKS5maWx0ZXIoaXNJbnZhbGlkKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHaXZlbiBhIFBhcmFtLCBhcHBsaWVzIHRoZSBwYXJhbWV0ZXIgdmFsdWUsIHRoZW4gcmV0dXJucyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBpdFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0RGV0YWlscyhwYXJhbSkge1xuICAgICAgICAgICAgLy8gTm9ybWFsaXplIHRvIHR5cGVkIHZhbHVlXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJhbS52YWx1ZSh2YWx1ZXNbcGFyYW0uaWRdKTtcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gcGFyYW0udmFsaWRhdGVzKHZhbHVlKTtcbiAgICAgICAgICAgIHZhciBpc0RlZmF1bHRWYWx1ZSA9IHBhcmFtLmlzRGVmYXVsdFZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIHNxdWFzaCBtb2RlIGZvciB0aGUgcGFyYW1ldGVyXG4gICAgICAgICAgICB2YXIgc3F1YXNoID0gaXNEZWZhdWx0VmFsdWUgPyBwYXJhbS5zcXVhc2ggOiBmYWxzZTtcbiAgICAgICAgICAgIC8vIEFsbG93IHRoZSBQYXJhbWV0ZXIncyBUeXBlIHRvIGVuY29kZSB0aGUgdmFsdWVcbiAgICAgICAgICAgIHZhciBlbmNvZGVkID0gcGFyYW0udHlwZS5lbmNvZGUodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHsgcGFyYW06IHBhcmFtLCB2YWx1ZTogdmFsdWUsIGlzVmFsaWQ6IGlzVmFsaWQsIGlzRGVmYXVsdFZhbHVlOiBpc0RlZmF1bHRWYWx1ZSwgc3F1YXNoOiBzcXVhc2gsIGVuY29kZWQ6IGVuY29kZWQgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBCdWlsZCB1cCB0aGUgcGF0aC1wb3J0aW9uIGZyb20gdGhlIGxpc3Qgb2Ygc3RhdGljIHNlZ21lbnRzIGFuZCBwYXJhbWV0ZXJzXG4gICAgICAgIHZhciBwYXRoU3RyaW5nID0gcGF0aFNlZ21lbnRzQW5kUGFyYW1zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCB4KSB7XG4gICAgICAgICAgICAvLyBUaGUgZWxlbWVudCBpcyBhIHN0YXRpYyBzZWdtZW50IChhIHJhdyBzdHJpbmcpOyBqdXN0IGFwcGVuZCBpdFxuICAgICAgICAgICAgaWYgKGlzU3RyaW5nKHgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MgKyB4O1xuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBpdCdzIGEgUGFyYW1EZXRhaWxzLlxuICAgICAgICAgICAgdmFyIHNxdWFzaCA9IHguc3F1YXNoLCBlbmNvZGVkID0geC5lbmNvZGVkLCBwYXJhbSA9IHgucGFyYW07XG4gICAgICAgICAgICAvLyBJZiBzcXVhc2ggaXMgPT09IHRydWUsIHRyeSB0byByZW1vdmUgYSBzbGFzaCBmcm9tIHRoZSBwYXRoXG4gICAgICAgICAgICBpZiAoc3F1YXNoID09PSB0cnVlKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MubWF0Y2goL1xcLyQvKSA/IGFjYy5zbGljZSgwLCAtMSkgOiBhY2M7XG4gICAgICAgICAgICAvLyBJZiBzcXVhc2ggaXMgYSBzdHJpbmcsIHVzZSB0aGUgc3RyaW5nIGZvciB0aGUgcGFyYW0gdmFsdWVcbiAgICAgICAgICAgIGlmIChpc1N0cmluZyhzcXVhc2gpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MgKyBzcXVhc2g7XG4gICAgICAgICAgICBpZiAoc3F1YXNoICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjOyAvLyA/XG4gICAgICAgICAgICBpZiAoZW5jb2RlZCA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAvLyBJZiB0aGlzIHBhcmFtZXRlciB2YWx1ZSBpcyBhbiBhcnJheSwgZW5jb2RlIHRoZSB2YWx1ZSB1c2luZyBlbmNvZGVEYXNoZXNcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGVuY29kZWQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MgKyBtYXAoZW5jb2RlZCwgVXJsTWF0Y2hlci5lbmNvZGVEYXNoZXMpLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBwYXJhbWV0ZXIgdHlwZSBpcyBcInJhd1wiLCB0aGVuIGRvIG5vdCBlbmNvZGVVUklDb21wb25lbnRcbiAgICAgICAgICAgIGlmIChwYXJhbS5yYXcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYyArIGVuY29kZWQ7XG4gICAgICAgICAgICAvLyBFbmNvZGUgdGhlIHZhbHVlXG4gICAgICAgICAgICByZXR1cm4gYWNjICsgZW5jb2RlVVJJQ29tcG9uZW50KGVuY29kZWQpO1xuICAgICAgICB9LCAnJyk7XG4gICAgICAgIC8vIEJ1aWxkIHRoZSBxdWVyeSBzdHJpbmcgYnkgYXBwbHlpbmcgcGFyYW1ldGVyIHZhbHVlcyAoYXJyYXkgb3IgcmVndWxhcilcbiAgICAgICAgLy8gdGhlbiBtYXBwaW5nIHRvIGtleT12YWx1ZSwgdGhlbiBmbGF0dGVuaW5nIGFuZCBqb2luaW5nIHVzaW5nIFwiJlwiXG4gICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHF1ZXJ5UGFyYW1zXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChwYXJhbURldGFpbHMpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IHBhcmFtRGV0YWlscy5wYXJhbSwgc3F1YXNoID0gcGFyYW1EZXRhaWxzLnNxdWFzaCwgZW5jb2RlZCA9IHBhcmFtRGV0YWlscy5lbmNvZGVkLCBpc0RlZmF1bHRWYWx1ZSA9IHBhcmFtRGV0YWlscy5pc0RlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIGlmIChlbmNvZGVkID09IG51bGwgfHwgKGlzRGVmYXVsdFZhbHVlICYmIHNxdWFzaCAhPT0gZmFsc2UpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICghaXNBcnJheShlbmNvZGVkKSlcbiAgICAgICAgICAgICAgICBlbmNvZGVkID0gW2VuY29kZWRdO1xuICAgICAgICAgICAgaWYgKGVuY29kZWQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICghcGFyYW0ucmF3KVxuICAgICAgICAgICAgICAgIGVuY29kZWQgPSBtYXAoZW5jb2RlZCwgZW5jb2RlVVJJQ29tcG9uZW50KTtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVkLm1hcChmdW5jdGlvbiAodmFsKSB7IHJldHVybiBwYXJhbS5pZCArIFwiPVwiICsgdmFsOyB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoaWRlbnRpdHkpXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLmpvaW4oJyYnKTtcbiAgICAgICAgLy8gQ29uY2F0IHRoZSBwYXRoc3RyaW5nIHdpdGggdGhlIHF1ZXJ5U3RyaW5nIChpZiBleGlzdHMpIGFuZCB0aGUgaGFzaFN0cmluZyAoaWYgZXhpc3RzKVxuICAgICAgICByZXR1cm4gcGF0aFN0cmluZyArIChxdWVyeVN0cmluZyA/IFwiP1wiICsgcXVlcnlTdHJpbmcgOiAnJykgKyAodmFsdWVzWycjJ10gPyAnIycgKyB2YWx1ZXNbJyMnXSA6ICcnKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVXJsTWF0Y2hlci5uYW1lVmFsaWRhdG9yID0gL15cXHcrKFstLl0rXFx3KykqKD86XFxbXFxdKT8kLztcbiAgICByZXR1cm4gVXJsTWF0Y2hlcjtcbn0oKSk7XG5leHBvcnQgeyBVcmxNYXRjaGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmxNYXRjaGVyLmpzLm1hcCIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBmb3JFYWNoLCBleHRlbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzT2JqZWN0LCBpc0RlZmluZWQsIGlzRnVuY3Rpb24sIGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVXJsTWF0Y2hlciB9IGZyb20gJy4vdXJsTWF0Y2hlcic7XG5pbXBvcnQgeyBQYXJhbSwgRGVmVHlwZSB9IGZyb20gJy4uL3BhcmFtcy9wYXJhbSc7XG5pbXBvcnQgeyBQYXJhbVR5cGVzIH0gZnJvbSAnLi4vcGFyYW1zL3BhcmFtVHlwZXMnO1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFBhcmFtRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQYXJhbUZhY3RvcnkodW1mKSB7XG4gICAgICAgIHRoaXMudW1mID0gdW1mO1xuICAgIH1cbiAgICBQYXJhbUZhY3RvcnkucHJvdG90eXBlLmZyb21Db25maWcgPSBmdW5jdGlvbiAoaWQsIHR5cGUsIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyYW0oaWQsIHR5cGUsIERlZlR5cGUuQ09ORklHLCB0aGlzLnVtZiwgc3RhdGUpO1xuICAgIH07XG4gICAgUGFyYW1GYWN0b3J5LnByb3RvdHlwZS5mcm9tUGF0aCA9IGZ1bmN0aW9uIChpZCwgdHlwZSwgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJhbShpZCwgdHlwZSwgRGVmVHlwZS5QQVRILCB0aGlzLnVtZiwgc3RhdGUpO1xuICAgIH07XG4gICAgUGFyYW1GYWN0b3J5LnByb3RvdHlwZS5mcm9tU2VhcmNoID0gZnVuY3Rpb24gKGlkLCB0eXBlLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFBhcmFtKGlkLCB0eXBlLCBEZWZUeXBlLlNFQVJDSCwgdGhpcy51bWYsIHN0YXRlKTtcbiAgICB9O1xuICAgIHJldHVybiBQYXJhbUZhY3Rvcnk7XG59KCkpO1xuZXhwb3J0IHsgUGFyYW1GYWN0b3J5IH07XG4vKipcbiAqIEZhY3RvcnkgZm9yIFtbVXJsTWF0Y2hlcl1dIGluc3RhbmNlcy5cbiAqXG4gKiBUaGUgZmFjdG9yeSBpcyBhdmFpbGFibGUgdG8gbmcxIHNlcnZpY2VzIGFzXG4gKiBgJHVybE1hdGNoZXJGYWN0b3J5YCBvciBuZzEgcHJvdmlkZXJzIGFzIGAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcmAuXG4gKi9cbnZhciBVcmxNYXRjaGVyRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVcmxNYXRjaGVyRmFjdG9yeSgpIHtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5wYXJhbVR5cGVzID0gbmV3IFBhcmFtVHlwZXMoKTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5faXNDYXNlSW5zZW5zaXRpdmUgPSBmYWxzZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5faXNTdHJpY3RNb2RlID0gdHJ1ZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGVmYXVsdFNxdWFzaFBvbGljeSA9IGZhbHNlO1xuICAgICAgICAvKiogQGludGVybmFsYXBpIENyZWF0ZXMgYSBuZXcgW1tQYXJhbV1dIGZvciBhIGdpdmVuIGxvY2F0aW9uIChEZWZUeXBlKSAqL1xuICAgICAgICB0aGlzLnBhcmFtRmFjdG9yeSA9IG5ldyBQYXJhbUZhY3RvcnkodGhpcyk7XG4gICAgICAgIGV4dGVuZCh0aGlzLCB7IFVybE1hdGNoZXI6IFVybE1hdGNoZXIsIFBhcmFtOiBQYXJhbSB9KTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmNhc2VJbnNlbnNpdGl2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5faXNDYXNlSW5zZW5zaXRpdmUpO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLnN0cmljdE1vZGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9pc1N0cmljdE1vZGUgPSBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiB0aGlzLl9pc1N0cmljdE1vZGUpO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmRlZmF1bHRTcXVhc2hQb2xpY3kgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUgIT09IHRydWUgJiYgdmFsdWUgIT09IGZhbHNlICYmICFpc1N0cmluZyh2YWx1ZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNxdWFzaCBwb2xpY3k6IFwiICsgdmFsdWUgKyBcIi4gVmFsaWQgcG9saWNpZXM6IGZhbHNlLCB0cnVlLCBhcmJpdHJhcnktc3RyaW5nXCIpO1xuICAgICAgICByZXR1cm4gKHRoaXMuX2RlZmF1bHRTcXVhc2hQb2xpY3kgPSBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiB0aGlzLl9kZWZhdWx0U3F1YXNoUG9saWN5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBbW1VybE1hdGNoZXJdXSBmb3IgdGhlIHNwZWNpZmllZCBwYXR0ZXJuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdHRlcm4gIFRoZSBVUkwgcGF0dGVybi5cbiAgICAgKiBAcGFyYW0gY29uZmlnICBUaGUgY29uZmlnIG9iamVjdCBoYXNoLlxuICAgICAqIEByZXR1cm5zIFRoZSBVcmxNYXRjaGVyLlxuICAgICAqL1xuICAgIFVybE1hdGNoZXJGYWN0b3J5LnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24gKHBhdHRlcm4sIGNvbmZpZykge1xuICAgICAgICAvLyBiYWNrd2FyZC1jb21wYXRpYmxlIHN1cHBvcnQgZm9yIGNvbmZpZy5wYXJhbXMgLT4gY29uZmlnLnN0YXRlLnBhcmFtc1xuICAgICAgICB2YXIgcGFyYW1zID0gY29uZmlnICYmICFjb25maWcuc3RhdGUgJiYgY29uZmlnLnBhcmFtcztcbiAgICAgICAgY29uZmlnID0gcGFyYW1zID8gX19hc3NpZ24oeyBzdGF0ZTogeyBwYXJhbXM6IHBhcmFtcyB9IH0sIGNvbmZpZykgOiBjb25maWc7XG4gICAgICAgIHZhciBnbG9iYWxDb25maWcgPSB7IHN0cmljdDogdGhpcy5faXNTdHJpY3RNb2RlLCBjYXNlSW5zZW5zaXRpdmU6IHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlIH07XG4gICAgICAgIHJldHVybiBuZXcgVXJsTWF0Y2hlcihwYXR0ZXJuLCB0aGlzLnBhcmFtVHlwZXMsIHRoaXMucGFyYW1GYWN0b3J5LCBleHRlbmQoZ2xvYmFsQ29uZmlnLCBjb25maWcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIG9iamVjdCBpcyBhIFtbVXJsTWF0Y2hlcl1dLCBvciBmYWxzZSBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2JqZWN0ICBUaGUgb2JqZWN0IHRvIHBlcmZvcm0gdGhlIHR5cGUgY2hlY2sgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBtYXRjaGVzIHRoZSBgVXJsTWF0Y2hlcmAgaW50ZXJmYWNlLCBieVxuICAgICAqICAgICAgICAgIGltcGxlbWVudGluZyBhbGwgdGhlIHNhbWUgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyRmFjdG9yeS5wcm90b3R5cGUuaXNNYXRjaGVyID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAvLyBUT0RPOiB0eXBlb2Y/XG4gICAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICAgIGZvckVhY2goVXJsTWF0Y2hlci5wcm90b3R5cGUsIGZ1bmN0aW9uICh2YWwsIG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbCkpXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmIChpc0RlZmluZWQob2JqZWN0W25hbWVdKSAmJiBpc0Z1bmN0aW9uKG9iamVjdFtuYW1lXSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJlZ2lzdGVycyBhIGN1c3RvbSBbW1BhcmFtVHlwZV1dIG9iamVjdFxuICAgICAqXG4gICAgICogQSBbW1BhcmFtVHlwZV1dIGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIFVSTHMgd2l0aCB0eXBlZCBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgIFRoZSB0eXBlIG5hbWUuXG4gICAgICogQHBhcmFtIGRlZmluaXRpb24gVGhlIHR5cGUgZGVmaW5pdGlvbi4gU2VlIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGZvciBpbmZvcm1hdGlvbiBvbiB0aGUgdmFsdWVzIGFjY2VwdGVkLlxuICAgICAqIEBwYXJhbSBkZWZpbml0aW9uRm4gQSBmdW5jdGlvbiB0aGF0IGlzIGluamVjdGVkIGJlZm9yZSB0aGUgYXBwIHJ1bnRpbWUgc3RhcnRzLlxuICAgICAqICAgICAgICBUaGUgcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIGEgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0uXG4gICAgICogICAgICAgIFRoZSByZXN1bHQgaXMgbWVyZ2VkIGludG8gdGhlIGV4aXN0aW5nIGBkZWZpbml0aW9uYC5cbiAgICAgKiAgICAgICAgU2VlIFtbUGFyYW1UeXBlXV0gZm9yIGluZm9ybWF0aW9uIG9uIHRoZSB2YWx1ZXMgYWNjZXB0ZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyAtIGlmIGEgdHlwZSB3YXMgcmVnaXN0ZXJlZDogdGhlIFtbVXJsTWF0Y2hlckZhY3RvcnldXVxuICAgICAqICAgLSBpZiBvbmx5IHRoZSBgbmFtZWAgcGFyYW1ldGVyIHdhcyBzcGVjaWZpZWQ6IHRoZSBjdXJyZW50bHkgcmVnaXN0ZXJlZCBbW1BhcmFtVHlwZV1dIG9iamVjdCwgb3IgdW5kZWZpbmVkXG4gICAgICpcbiAgICAgKiBOb3RlOiBSZWdpc3RlciBjdXN0b20gdHlwZXMgKmJlZm9yZSB1c2luZyB0aGVtKiBpbiBhIHN0YXRlIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBTZWUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gZm9yIGV4YW1wbGVzXG4gICAgICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKSB7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy5wYXJhbVR5cGVzLnR5cGUobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKTtcbiAgICAgICAgcmV0dXJuICFpc0RlZmluZWQoZGVmaW5pdGlvbikgPyB0eXBlIDogdGhpcztcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5lbnF1ZXVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5fZmx1c2hUeXBlUXVldWUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5kaXNwb3NlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gVXJsTWF0Y2hlckZhY3Rvcnk7XG59KCkpO1xuZXhwb3J0IHsgVXJsTWF0Y2hlckZhY3RvcnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybE1hdGNoZXJGYWN0b3J5LmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi8gLyoqICovXG5pbXBvcnQgeyBVcmxNYXRjaGVyIH0gZnJvbSAnLi91cmxNYXRjaGVyJztcbmltcG9ydCB7IGlzU3RyaW5nLCBpc0RlZmluZWQsIGlzRnVuY3Rpb24gfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBpZGVudGl0eSwgZXh0ZW5kIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpcywgcGF0dGVybiB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG4vKipcbiAqIENyZWF0ZXMgYSBbW1VybFJ1bGVdXVxuICpcbiAqIENyZWF0ZXMgYSBbW1VybFJ1bGVdXSBmcm9tIGE6XG4gKlxuICogLSBgc3RyaW5nYFxuICogLSBbW1VybE1hdGNoZXJdXVxuICogLSBgUmVnRXhwYFxuICogLSBbW1N0YXRlT2JqZWN0XV1cbiAqIEBpbnRlcm5hbGFwaVxuICovXG52YXIgVXJsUnVsZUZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVXJsUnVsZUZhY3Rvcnkocm91dGVyKSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgIH1cbiAgICBVcmxSdWxlRmFjdG9yeS5wcm90b3R5cGUuY29tcGlsZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLnVybE1hdGNoZXJGYWN0b3J5LmNvbXBpbGUoc3RyKTtcbiAgICB9O1xuICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAod2hhdCwgaGFuZGxlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgaXNTdGF0ZSA9IFN0YXRlT2JqZWN0LmlzU3RhdGU7XG4gICAgICAgIHZhciBtYWtlUnVsZSA9IHBhdHRlcm4oW1xuICAgICAgICAgICAgW2lzU3RyaW5nLCBmdW5jdGlvbiAoX3doYXQpIHsgcmV0dXJuIG1ha2VSdWxlKF90aGlzLmNvbXBpbGUoX3doYXQpKTsgfV0sXG4gICAgICAgICAgICBbaXMoVXJsTWF0Y2hlciksIGZ1bmN0aW9uIChfd2hhdCkgeyByZXR1cm4gX3RoaXMuZnJvbVVybE1hdGNoZXIoX3doYXQsIGhhbmRsZXIpOyB9XSxcbiAgICAgICAgICAgIFtpc1N0YXRlLCBmdW5jdGlvbiAoX3doYXQpIHsgcmV0dXJuIF90aGlzLmZyb21TdGF0ZShfd2hhdCwgX3RoaXMucm91dGVyKTsgfV0sXG4gICAgICAgICAgICBbaXMoUmVnRXhwKSwgZnVuY3Rpb24gKF93aGF0KSB7IHJldHVybiBfdGhpcy5mcm9tUmVnRXhwKF93aGF0LCBoYW5kbGVyKTsgfV0sXG4gICAgICAgICAgICBbaXNGdW5jdGlvbiwgZnVuY3Rpb24gKF93aGF0KSB7IHJldHVybiBuZXcgQmFzZVVybFJ1bGUoX3doYXQsIGhhbmRsZXIpOyB9XSxcbiAgICAgICAgXSk7XG4gICAgICAgIHZhciBydWxlID0gbWFrZVJ1bGUod2hhdCk7XG4gICAgICAgIGlmICghcnVsZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgJ3doYXQnIGluIHdoZW4oKVwiKTtcbiAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIFVybFJ1bGUgd2hpY2ggbWF0Y2hlcyBiYXNlZCBvbiBhIFVybE1hdGNoZXJcbiAgICAgKlxuICAgICAqIFRoZSBgaGFuZGxlcmAgbWF5IGJlIGVpdGhlciBhIGBzdHJpbmdgLCBhIFtbVXJsUnVsZUhhbmRsZXJGbl1dIG9yIGFub3RoZXIgW1tVcmxNYXRjaGVyXV1cbiAgICAgKlxuICAgICAqICMjIEhhbmRsZXIgYXMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogSWYgYGhhbmRsZXJgIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGg6XG4gICAgICpcbiAgICAgKiAtIG1hdGNoZWQgcGFyYW1ldGVyIHZhbHVlcyAoW1tSYXdQYXJhbXNdXSBmcm9tIFtbVXJsTWF0Y2hlci5leGVjXV0pXG4gICAgICogLSB1cmw6IHRoZSBjdXJyZW50IFVybCAoW1tVcmxQYXJ0c11dKVxuICAgICAqIC0gcm91dGVyOiB0aGUgcm91dGVyIG9iamVjdCAoW1tVSVJvdXRlcl1dKVxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIHVybE1hdGNoZXIgPSAkdW1mLmNvbXBpbGUoXCIvZm9vLzpmb29JZC86YmFySWRcIik7XG4gICAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21VcmxNYXRjaGVyKHVybE1hdGNoZXIsIG1hdGNoID0+IFwiL2hvbWUvXCIgKyBtYXRjaC5mb29JZCArIFwiL1wiICsgbWF0Y2guYmFySWQpO1xuICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvMTIzLzQ1NidcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIEhhbmRsZXIgYXMgVXJsTWF0Y2hlclxuICAgICAqXG4gICAgICogSWYgYGhhbmRsZXJgIGlzIGEgVXJsTWF0Y2hlciwgdGhlIGhhbmRsZXIgbWF0Y2hlciBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgbmV3IHVybC5cbiAgICAgKiBUaGUgYGhhbmRsZXJgIFVybE1hdGNoZXIgaXMgZm9ybWF0dGVkIHVzaW5nIHRoZSBtYXRjaGVkIHBhcmFtIGZyb20gdGhlIGZpcnN0IG1hdGNoZXIuXG4gICAgICogVGhlIHVybCBpcyByZXBsYWNlZCB3aXRoIHRoZSByZXN1bHQuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiB2YXIgdXJsTWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb28vOmZvb0lkLzpiYXJJZFwiKTtcbiAgICAgKiB2YXIgaGFuZGxlciA9ICR1bWYuY29tcGlsZShcIi9ob21lLzpmb29JZC86YmFySWRcIik7XG4gICAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21VcmxNYXRjaGVyKHVybE1hdGNoZXIsIGhhbmRsZXIpO1xuICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvMTIzLzQ1NidcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBVcmxSdWxlRmFjdG9yeS5wcm90b3R5cGUuZnJvbVVybE1hdGNoZXIgPSBmdW5jdGlvbiAodXJsTWF0Y2hlciwgaGFuZGxlcikge1xuICAgICAgICB2YXIgX2hhbmRsZXIgPSBoYW5kbGVyO1xuICAgICAgICBpZiAoaXNTdHJpbmcoaGFuZGxlcikpXG4gICAgICAgICAgICBoYW5kbGVyID0gdGhpcy5yb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZShoYW5kbGVyKTtcbiAgICAgICAgaWYgKGlzKFVybE1hdGNoZXIpKGhhbmRsZXIpKVxuICAgICAgICAgICAgX2hhbmRsZXIgPSBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIGhhbmRsZXIuZm9ybWF0KG1hdGNoKTsgfTtcbiAgICAgICAgZnVuY3Rpb24gbWF0Y2hVcmxQYXJhbXRlcnModXJsKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdXJsTWF0Y2hlci5leGVjKHVybC5wYXRoLCB1cmwuc2VhcmNoLCB1cmwuaGFzaCk7XG4gICAgICAgICAgICByZXR1cm4gdXJsTWF0Y2hlci52YWxpZGF0ZXMocGFyYW1zKSAmJiBwYXJhbXM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJpb3JpdGl6ZSBVUkxzLCBsb3dlc3QgdG8gaGlnaGVzdDpcbiAgICAgICAgLy8gLSBTb21lIG9wdGlvbmFsIFVSTCBwYXJhbWV0ZXJzLCBidXQgbm9uZSBtYXRjaGVkXG4gICAgICAgIC8vIC0gTm8gb3B0aW9uYWwgcGFyYW1ldGVycyBpbiBVUkxcbiAgICAgICAgLy8gLSBTb21lIG9wdGlvbmFsIHBhcmFtZXRlcnMsIHNvbWUgbWF0Y2hlZFxuICAgICAgICAvLyAtIFNvbWUgb3B0aW9uYWwgcGFyYW1ldGVycywgYWxsIG1hdGNoZWRcbiAgICAgICAgZnVuY3Rpb24gbWF0Y2hQcmlvcml0eShwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25hbCA9IHVybE1hdGNoZXIucGFyYW1ldGVycygpLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtLmlzT3B0aW9uYWw7IH0pO1xuICAgICAgICAgICAgaWYgKCFvcHRpb25hbC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuMDAwMDAxO1xuICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSBvcHRpb25hbC5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiBwYXJhbXNbcGFyYW0uaWRdOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVkLmxlbmd0aCAvIG9wdGlvbmFsLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGV0YWlscyA9IHsgdXJsTWF0Y2hlcjogdXJsTWF0Y2hlciwgbWF0Y2hQcmlvcml0eTogbWF0Y2hQcmlvcml0eSwgdHlwZTogJ1VSTE1BVENIRVInIH07XG4gICAgICAgIHJldHVybiBleHRlbmQobmV3IEJhc2VVcmxSdWxlKG1hdGNoVXJsUGFyYW10ZXJzLCBfaGFuZGxlciksIGRldGFpbHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBVcmxSdWxlIHdoaWNoIG1hdGNoZXMgYSBzdGF0ZSBieSBpdHMgdXJsXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVN0YXRlKCRzdGF0ZS5nZXQoJ2ZvbycpLCByb3V0ZXIpO1xuICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpO1xuICAgICAqIC8vIFN0YXJ0cyBhIHRyYW5zaXRpb24gdG8gJ2Zvbycgd2l0aCBwYXJhbXM6IHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIHJvdXRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlcyBtYXRjaCBieSB0cmFuc2l0aW9uaW5nIHRvIG1hdGNoZWQgc3RhdGVcbiAgICAgICAgICpcbiAgICAgICAgICogRmlyc3QgY2hlY2tzIGlmIHRoZSByb3V0ZXIgc2hvdWxkIHN0YXJ0IGEgbmV3IHRyYW5zaXRpb24uXG4gICAgICAgICAqIEEgbmV3IHRyYW5zaXRpb24gaXMgbm90IHJlcXVpcmVkIGlmIHRoZSBjdXJyZW50IHN0YXRlJ3MgVVJMXG4gICAgICAgICAqIGFuZCB0aGUgbmV3IFVSTCBhcmUgYWxyZWFkeSBpZGVudGljYWxcbiAgICAgICAgICovXG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgICAgICB2YXIgJHN0YXRlID0gcm91dGVyLnN0YXRlU2VydmljZTtcbiAgICAgICAgICAgIHZhciBnbG9iYWxzID0gcm91dGVyLmdsb2JhbHM7XG4gICAgICAgICAgICBpZiAoJHN0YXRlLmhyZWYoc3RhdGUsIG1hdGNoKSAhPT0gJHN0YXRlLmhyZWYoZ2xvYmFscy5jdXJyZW50LCBnbG9iYWxzLnBhcmFtcykpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUudHJhbnNpdGlvblRvKHN0YXRlLCBtYXRjaCwgeyBpbmhlcml0OiB0cnVlLCBzb3VyY2U6ICd1cmwnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgZGV0YWlscyA9IHsgc3RhdGU6IHN0YXRlLCB0eXBlOiAnU1RBVEUnIH07XG4gICAgICAgIHJldHVybiBleHRlbmQodGhpcy5mcm9tVXJsTWF0Y2hlcihzdGF0ZS51cmwsIGhhbmRsZXIpLCBkZXRhaWxzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgVXJsUnVsZSB3aGljaCBtYXRjaGVzIGJhc2VkIG9uIGEgcmVndWxhciBleHByZXNzaW9uXG4gICAgICpcbiAgICAgKiBUaGUgYGhhbmRsZXJgIG1heSBiZSBlaXRoZXIgYSBbW1VybFJ1bGVIYW5kbGVyRm5dXSBvciBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqICMjIEhhbmRsZXIgYXMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogSWYgYGhhbmRsZXJgIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGg6XG4gICAgICpcbiAgICAgKiAtIHJlZ2V4cCBtYXRjaCBhcnJheSAoZnJvbSBgcmVnZXhwYClcbiAgICAgKiAtIHVybDogdGhlIGN1cnJlbnQgVXJsIChbW1VybFBhcnRzXV0pXG4gICAgICogLSByb3V0ZXI6IHRoZSByb3V0ZXIgb2JqZWN0IChbW1VJUm91dGVyXV0pXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVJlZ0V4cCgvXlxcL2Zvb1xcLyhiYXJ8YmF6KSQvLCBtYXRjaCA9PiBcIi9ob21lL1wiICsgbWF0Y2hbMV0pXG4gICAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby9iYXInKTsgLy8gcmVzdWx0cyBpbiBbICcvZm9vL2JhcicsICdiYXInIF1cbiAgICAgKiB2YXIgcmVzdWx0ID0gcnVsZS5oYW5kbGVyKG1hdGNoKTsgLy8gJy9ob21lL2JhcidcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIEhhbmRsZXIgYXMgc3RyaW5nXG4gICAgICpcbiAgICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBzdHJpbmcsIHRoZSB1cmwgaXMgKnJlcGxhY2VkIGJ5IHRoZSBzdHJpbmcqIHdoZW4gdGhlIFJ1bGUgaXMgaW52b2tlZC5cbiAgICAgKiBUaGUgc3RyaW5nIGlzIGZpcnN0IGludGVycG9sYXRlZCB1c2luZyBgc3RyaW5nLnJlcGxhY2UoKWAgc3R5bGUgcGF0dGVybi5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tUmVnRXhwKC9eXFwvZm9vXFwvKGJhcnxiYXopJC8sIFwiL2hvbWUvJDFcIilcbiAgICAgKiB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKCcvZm9vL2JhcicpOyAvLyByZXN1bHRzIGluIFsgJy9mb28vYmFyJywgJ2JhcicgXVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvYmFyJ1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tUmVnRXhwID0gZnVuY3Rpb24gKHJlZ2V4cCwgaGFuZGxlcikge1xuICAgICAgICBpZiAocmVnZXhwLmdsb2JhbCB8fCByZWdleHAuc3RpY2t5KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSdWxlIFJlZ0V4cCBtdXN0IG5vdCBiZSBnbG9iYWwgb3Igc3RpY2t5Jyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBoYW5kbGVyIGlzIGEgc3RyaW5nLCB0aGUgdXJsIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIHN0cmluZy5cbiAgICAgICAgICogSWYgdGhlIHN0cmluZyBoYXMgYW55IFN0cmluZy5yZXBsYWNlKCkgc3R5bGUgdmFyaWFibGVzIGluIGl0IChsaWtlIGAkMmApLFxuICAgICAgICAgKiB0aGV5IHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIGNhcHR1cmVzIGZyb20gW1ttYXRjaF1dXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmVkaXJlY3RVcmxUbyA9IGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgLy8gSW50ZXJwb2xhdGVzIG1hdGNoZWQgdmFsdWVzIGludG8gJDEgJDIsIGV0YyB1c2luZyBhIFN0cmluZy5yZXBsYWNlKCktc3R5bGUgcGF0dGVyblxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIucmVwbGFjZSgvXFwkKFxcJHxcXGR7MSwyfSkvLCBmdW5jdGlvbiAobSwgd2hhdCkgeyByZXR1cm4gbWF0Y2hbd2hhdCA9PT0gJyQnID8gMCA6IE51bWJlcih3aGF0KV07IH0pO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgX2hhbmRsZXIgPSBpc1N0cmluZyhoYW5kbGVyKSA/IHJlZGlyZWN0VXJsVG8gOiBoYW5kbGVyO1xuICAgICAgICB2YXIgbWF0Y2hQYXJhbXNGcm9tUmVnZXhwID0gZnVuY3Rpb24gKHVybCkgeyByZXR1cm4gcmVnZXhwLmV4ZWModXJsLnBhdGgpOyB9O1xuICAgICAgICB2YXIgZGV0YWlscyA9IHsgcmVnZXhwOiByZWdleHAsIHR5cGU6ICdSRUdFWFAnIH07XG4gICAgICAgIHJldHVybiBleHRlbmQobmV3IEJhc2VVcmxSdWxlKG1hdGNoUGFyYW1zRnJvbVJlZ2V4cCwgX2hhbmRsZXIpLCBkZXRhaWxzKTtcbiAgICB9O1xuICAgIFVybFJ1bGVGYWN0b3J5LmlzVXJsUnVsZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBbJ3R5cGUnLCAnbWF0Y2gnLCAnaGFuZGxlciddLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGlzRGVmaW5lZChvYmpba2V5XSk7IH0pOyB9O1xuICAgIHJldHVybiBVcmxSdWxlRmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBVcmxSdWxlRmFjdG9yeSB9O1xuLyoqXG4gKiBBIGJhc2UgcnVsZSB3aGljaCBjYWxscyBgbWF0Y2hgXG4gKlxuICogVGhlIHZhbHVlIGZyb20gdGhlIGBtYXRjaGAgZnVuY3Rpb24gaXMgcGFzc2VkIHRocm91Z2ggdG8gdGhlIGBoYW5kbGVyYC5cbiAqIEBpbnRlcm5hbGFwaVxuICovXG52YXIgQmFzZVVybFJ1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmFzZVVybFJ1bGUobWF0Y2gsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5tYXRjaCA9IG1hdGNoO1xuICAgICAgICB0aGlzLnR5cGUgPSAnUkFXJztcbiAgICAgICAgdGhpcy5tYXRjaFByaW9yaXR5ID0gZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiAwIC0gX3RoaXMuJGlkOyB9O1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyIHx8IGlkZW50aXR5O1xuICAgIH1cbiAgICByZXR1cm4gQmFzZVVybFJ1bGU7XG59KCkpO1xuZXhwb3J0IHsgQmFzZVVybFJ1bGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybFJ1bGUuanMubWFwIiwiLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgY3JlYXRlUHJveHlGdW5jdGlvbnMsIGV4dGVuZCwgcmVtb3ZlRnJvbSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc0Z1bmN0aW9uLCBpc1N0cmluZyB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuL3VybE1hdGNoZXInO1xuaW1wb3J0IHsgaXMsIHBhdHRlcm4sIHZhbCB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgVXJsUnVsZUZhY3RvcnkgfSBmcm9tICcuL3VybFJ1bGUnO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS90YXJnZXRTdGF0ZSc7XG5pbXBvcnQgeyBzdHJpcExhc3RQYXRoRWxlbWVudCB9IGZyb20gJy4uL2NvbW1vbic7XG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gYXBwZW5kQmFzZVBhdGgodXJsLCBpc0h0bWw1LCBhYnNvbHV0ZSwgYmFzZUhyZWYpIHtcbiAgICBpZiAoYmFzZUhyZWYgPT09ICcvJylcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICBpZiAoaXNIdG1sNSlcbiAgICAgICAgcmV0dXJuIHN0cmlwTGFzdFBhdGhFbGVtZW50KGJhc2VIcmVmKSArIHVybDtcbiAgICBpZiAoYWJzb2x1dGUpXG4gICAgICAgIHJldHVybiBiYXNlSHJlZi5zbGljZSgxKSArIHVybDtcbiAgICByZXR1cm4gdXJsO1xufVxuLyoqIEBoaWRkZW4gKi9cbnZhciBwcmlvcml0eVNvcnQgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gKGIucHJpb3JpdHkgfHwgMCkgLSAoYS5wcmlvcml0eSB8fCAwKTsgfTtcbi8qKiBAaGlkZGVuICovXG52YXIgdHlwZVNvcnQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHZhciB3ZWlnaHRzID0geyBTVEFURTogNCwgVVJMTUFUQ0hFUjogNCwgUkVHRVhQOiAzLCBSQVc6IDIsIE9USEVSOiAxIH07XG4gICAgcmV0dXJuICh3ZWlnaHRzW2EudHlwZV0gfHwgMCkgLSAod2VpZ2h0c1tiLnR5cGVdIHx8IDApO1xufTtcbi8qKiBAaGlkZGVuICovXG52YXIgdXJsTWF0Y2hlclNvcnQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiAhYS51cmxNYXRjaGVyIHx8ICFiLnVybE1hdGNoZXIgPyAwIDogVXJsTWF0Y2hlci5jb21wYXJlKGEudXJsTWF0Y2hlciwgYi51cmxNYXRjaGVyKTtcbn07XG4vKiogQGhpZGRlbiAqL1xudmFyIGlkU29ydCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgLy8gSWRlbnRpY2FsbHkgc29ydGVkIFNUQVRFIGFuZCBVUkxNQVRDSEVSIGJlc3QgcnVsZSB3aWxsIGJlIGNob3NlbiBieSBgbWF0Y2hQcmlvcml0eWAgYWZ0ZXIgZWFjaCBydWxlIG1hdGNoZXMgdGhlIFVSTFxuICAgIHZhciB1c2VNYXRjaFByaW9yaXR5ID0geyBTVEFURTogdHJ1ZSwgVVJMTUFUQ0hFUjogdHJ1ZSB9O1xuICAgIHZhciBlcXVhbCA9IHVzZU1hdGNoUHJpb3JpdHlbYS50eXBlXSAmJiB1c2VNYXRjaFByaW9yaXR5W2IudHlwZV07XG4gICAgcmV0dXJuIGVxdWFsID8gMCA6IChhLiRpZCB8fCAwKSAtIChiLiRpZCB8fCAwKTtcbn07XG4vKipcbiAqIERlZmF1bHQgcnVsZSBwcmlvcml0eSBzb3J0aW5nIGZ1bmN0aW9uLlxuICpcbiAqIFNvcnRzIHJ1bGVzIGJ5OlxuICpcbiAqIC0gRXhwbGljaXQgcHJpb3JpdHkgKHNldCBydWxlIHByaW9yaXR5IHVzaW5nIFtbVXJsUnVsZXNBcGkud2hlbl1dKVxuICogLSBSdWxlIHR5cGUgKFNUQVRFOiA0LCBVUkxNQVRDSEVSOiA0LCBSRUdFWFA6IDMsIFJBVzogMiwgT1RIRVI6IDEpXG4gKiAtIGBVcmxNYXRjaGVyYCBzcGVjaWZpY2l0eSAoW1tVcmxNYXRjaGVyLmNvbXBhcmVdXSk6IHdvcmtzIGZvciBTVEFURSBhbmQgVVJMTUFUQ0hFUiB0eXBlcyB0byBwaWNrIHRoZSBtb3N0IHNwZWNpZmljIHJ1bGUuXG4gKiAtIFJ1bGUgcmVnaXN0cmF0aW9uIG9yZGVyIChmb3IgcnVsZSB0eXBlcyBvdGhlciB0aGFuIFNUQVRFIGFuZCBVUkxNQVRDSEVSKVxuICogICAtIEVxdWFsbHkgc29ydGVkIFN0YXRlIGFuZCBVcmxNYXRjaGVyIHJ1bGVzIHdpbGwgZWFjaCBtYXRjaCB0aGUgVVJMLlxuICogICAgIFRoZW4sIHRoZSAqYmVzdCogbWF0Y2ggaXMgY2hvc2VuIGJhc2VkIG9uIGhvdyBtYW55IHBhcmFtZXRlciB2YWx1ZXMgd2VyZSBtYXRjaGVkLlxuICpcbiAqIEBjb3JlYXBpXG4gKi9cbnZhciBkZWZhdWx0UnVsZVNvcnRGbjtcbmRlZmF1bHRSdWxlU29ydEZuID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICB2YXIgY21wID0gcHJpb3JpdHlTb3J0KGEsIGIpO1xuICAgIGlmIChjbXAgIT09IDApXG4gICAgICAgIHJldHVybiBjbXA7XG4gICAgY21wID0gdHlwZVNvcnQoYSwgYik7XG4gICAgaWYgKGNtcCAhPT0gMClcbiAgICAgICAgcmV0dXJuIGNtcDtcbiAgICBjbXAgPSB1cmxNYXRjaGVyU29ydChhLCBiKTtcbiAgICBpZiAoY21wICE9PSAwKVxuICAgICAgICByZXR1cm4gY21wO1xuICAgIHJldHVybiBpZFNvcnQoYSwgYik7XG59O1xuLyoqXG4gKiBVcGRhdGVzIFVSTCBhbmQgcmVzcG9uZHMgdG8gVVJMIGNoYW5nZXNcbiAqXG4gKiAjIyMgRGVwcmVjYXRpb24gd2FybmluZzpcbiAqIFRoaXMgY2xhc3MgaXMgbm93IGNvbnNpZGVyZWQgdG8gYmUgYW4gaW50ZXJuYWwgQVBJXG4gKiBVc2UgdGhlIFtbVXJsU2VydmljZV1dIGluc3RlYWQuXG4gKiBGb3IgY29uZmlndXJpbmcgVVJMIHJ1bGVzLCB1c2UgdGhlIFtbVXJsUnVsZXNBcGldXSB3aGljaCBjYW4gYmUgZm91bmQgYXMgW1tVcmxTZXJ2aWNlLnJ1bGVzXV0uXG4gKlxuICogVGhpcyBjbGFzcyB1cGRhdGVzIHRoZSBVUkwgd2hlbiB0aGUgc3RhdGUgY2hhbmdlcy5cbiAqIEl0IGFsc28gcmVzcG9uZHMgdG8gY2hhbmdlcyBpbiB0aGUgVVJMLlxuICovXG52YXIgVXJsUm91dGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gVXJsUm91dGVyKHJvdXRlcikge1xuICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLl9zb3J0Rm4gPSBkZWZhdWx0UnVsZVNvcnRGbjtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fcnVsZXMgPSBbXTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5pbnRlcmNlcHREZWZlcnJlZCA9IGZhbHNlO1xuICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLl9pZCA9IDA7XG4gICAgICAgIC8qKiBAaGlkZGVuICovIHRoaXMuX3NvcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMudXJsUnVsZUZhY3RvcnkgPSBuZXcgVXJsUnVsZUZhY3Rvcnkocm91dGVyKTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModmFsKFVybFJvdXRlci5wcm90b3R5cGUpLCB0aGlzLCB2YWwodGhpcykpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxpc3RlbihmYWxzZSk7XG4gICAgICAgIHRoaXMuX3J1bGVzID0gW107XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9vdGhlcndpc2VGbjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIChjb21wYXJlRm4pIHtcbiAgICAgICAgdGhpcy5fcnVsZXMgPSB0aGlzLnN0YWJsZVNvcnQodGhpcy5fcnVsZXMsICh0aGlzLl9zb3J0Rm4gPSBjb21wYXJlRm4gfHwgdGhpcy5fc29ydEZuKSk7XG4gICAgICAgIHRoaXMuX3NvcnRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLmVuc3VyZVNvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fc29ydGVkIHx8IHRoaXMuc29ydCgpO1xuICAgIH07XG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5zdGFibGVTb3J0ID0gZnVuY3Rpb24gKGFyciwgY29tcGFyZUZuKSB7XG4gICAgICAgIHZhciBhcnJPZldyYXBwZXIgPSBhcnIubWFwKGZ1bmN0aW9uIChlbGVtLCBpZHgpIHsgcmV0dXJuICh7IGVsZW06IGVsZW0sIGlkeDogaWR4IH0pOyB9KTtcbiAgICAgICAgYXJyT2ZXcmFwcGVyLnNvcnQoZnVuY3Rpb24gKHdyYXBwZXJBLCB3cmFwcGVyQikge1xuICAgICAgICAgICAgdmFyIGNtcERpZmYgPSBjb21wYXJlRm4od3JhcHBlckEuZWxlbSwgd3JhcHBlckIuZWxlbSk7XG4gICAgICAgICAgICByZXR1cm4gY21wRGlmZiA9PT0gMCA/IHdyYXBwZXJBLmlkeCAtIHdyYXBwZXJCLmlkeCA6IGNtcERpZmY7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXJyT2ZXcmFwcGVyLm1hcChmdW5jdGlvbiAod3JhcHBlcikgeyByZXR1cm4gd3JhcHBlci5lbGVtOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgVVJMLCBjaGVjayBhbGwgcnVsZXMgYW5kIHJldHVybiB0aGUgYmVzdCBbW01hdGNoUmVzdWx0XV1cbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICogQHJldHVybnMge01hdGNoUmVzdWx0fVxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZW5zdXJlU29ydGVkKCk7XG4gICAgICAgIHVybCA9IGV4dGVuZCh7IHBhdGg6ICcnLCBzZWFyY2g6IHt9LCBoYXNoOiAnJyB9LCB1cmwpO1xuICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVzKCk7XG4gICAgICAgIGlmICh0aGlzLl9vdGhlcndpc2VGbilcbiAgICAgICAgICAgIHJ1bGVzLnB1c2godGhpcy5fb3RoZXJ3aXNlRm4pO1xuICAgICAgICAvLyBDaGVja3MgYSBzaW5nbGUgcnVsZS4gUmV0dXJucyB7IHJ1bGU6IHJ1bGUsIG1hdGNoOiBtYXRjaCwgd2VpZ2h0OiB3ZWlnaHQgfSBpZiBpdCBtYXRjaGVkLCBvciB1bmRlZmluZWRcbiAgICAgICAgdmFyIGNoZWNrUnVsZSA9IGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKHVybCwgX3RoaXMuX3JvdXRlcik7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2ggJiYgeyBtYXRjaDogbWF0Y2gsIHJ1bGU6IHJ1bGUsIHdlaWdodDogcnVsZS5tYXRjaFByaW9yaXR5KG1hdGNoKSB9O1xuICAgICAgICB9O1xuICAgICAgICAvLyBUaGUgcnVsZXMgYXJlIHByZS1zb3J0ZWQuXG4gICAgICAgIC8vIC0gRmluZCB0aGUgZmlyc3QgbWF0Y2hpbmcgcnVsZS5cbiAgICAgICAgLy8gLSBGaW5kIGFueSBvdGhlciBtYXRjaGluZyBydWxlIHRoYXQgc29ydGVkICpleGFjdGx5IHRoZSBzYW1lKiwgYWNjb3JkaW5nIHRvIGAuc29ydCgpYC5cbiAgICAgICAgLy8gLSBDaG9vc2UgdGhlIHJ1bGUgd2l0aCB0aGUgaGlnaGVzdCBtYXRjaCB3ZWlnaHQuXG4gICAgICAgIHZhciBiZXN0O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBTdG9wIHdoZW4gdGhlcmUgaXMgYSAnYmVzdCcgcnVsZSBhbmQgdGhlIG5leHQgcnVsZSBzb3J0cyBkaWZmZXJlbnRseSB0aGFuIGl0LlxuICAgICAgICAgICAgaWYgKGJlc3QgJiYgdGhpcy5fc29ydEZuKHJ1bGVzW2ldLCBiZXN0LnJ1bGUpICE9PSAwKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBjaGVja1J1bGUocnVsZXNbaV0pO1xuICAgICAgICAgICAgLy8gUGljayB0aGUgYmVzdCBNYXRjaFJlc3VsdFxuICAgICAgICAgICAgYmVzdCA9ICFiZXN0IHx8IChjdXJyZW50ICYmIGN1cnJlbnQud2VpZ2h0ID4gYmVzdC53ZWlnaHQpID8gY3VycmVudCA6IGJlc3Q7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJlc3Q7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGlmIChldnQgJiYgZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLl9yb3V0ZXIsICR1cmwgPSByb3V0ZXIudXJsU2VydmljZSwgJHN0YXRlID0gcm91dGVyLnN0YXRlU2VydmljZTtcbiAgICAgICAgdmFyIHVybCA9IHtcbiAgICAgICAgICAgIHBhdGg6ICR1cmwucGF0aCgpLFxuICAgICAgICAgICAgc2VhcmNoOiAkdXJsLnNlYXJjaCgpLFxuICAgICAgICAgICAgaGFzaDogJHVybC5oYXNoKCksXG4gICAgICAgIH07XG4gICAgICAgIHZhciBiZXN0ID0gdGhpcy5tYXRjaCh1cmwpO1xuICAgICAgICB2YXIgYXBwbHlSZXN1bHQgPSBwYXR0ZXJuKFtcbiAgICAgICAgICAgIFtpc1N0cmluZywgZnVuY3Rpb24gKG5ld3VybCkgeyByZXR1cm4gJHVybC51cmwobmV3dXJsLCB0cnVlKTsgfV0sXG4gICAgICAgICAgICBbVGFyZ2V0U3RhdGUuaXNEZWYsIGZ1bmN0aW9uIChkZWYpIHsgcmV0dXJuICRzdGF0ZS5nbyhkZWYuc3RhdGUsIGRlZi5wYXJhbXMsIGRlZi5vcHRpb25zKTsgfV0sXG4gICAgICAgICAgICBbaXMoVGFyZ2V0U3RhdGUpLCBmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiAkc3RhdGUuZ28odGFyZ2V0LnN0YXRlKCksIHRhcmdldC5wYXJhbXMoKSwgdGFyZ2V0Lm9wdGlvbnMoKSk7IH1dLFxuICAgICAgICBdKTtcbiAgICAgICAgYXBwbHlSZXN1bHQoYmVzdCAmJiBiZXN0LnJ1bGUuaGFuZGxlcihiZXN0Lm1hdGNoLCB1cmwsIHJvdXRlcikpO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAoZW5hYmxlZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoZW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0b3BGbiAmJiB0aGlzLl9zdG9wRm4oKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9zdG9wRm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX3N0b3BGbiA9IHRoaXMuX3N0b3BGbiB8fCB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS5vbkNoYW5nZShmdW5jdGlvbiAoZXZ0KSB7IHJldHVybiBfdGhpcy5zeW5jKGV2dCk7IH0pKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJLlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJlYWQpIHtcbiAgICAgICAgdmFyICR1cmwgPSB0aGlzLl9yb3V0ZXIubG9jYXRpb25TZXJ2aWNlO1xuICAgICAgICBpZiAocmVhZCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9ICR1cmwudXJsKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCR1cmwudXJsKCkgPT09IHRoaXMubG9jYXRpb24pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICR1cmwudXJsKHRoaXMubG9jYXRpb24sIHRydWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJLlxuICAgICAqXG4gICAgICogUHVzaGVzIGEgbmV3IGxvY2F0aW9uIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKiBAcGFyYW0gdXJsTWF0Y2hlclxuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlcGxhY2UgPSBvcHRpb25zICYmICEhb3B0aW9ucy5yZXBsYWNlO1xuICAgICAgICB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS51cmwodXJsTWF0Y2hlci5mb3JtYXQocGFyYW1zIHx8IHt9KSwgcmVwbGFjZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYW5kIHJldHVybnMgYSBVUkwgd2l0aCBpbnRlcnBvbGF0ZWQgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9hYm91dC86cGVyc29uXCIpO1xuICAgICAqIHBhcmFtcyA9IHsgcGVyc29uOiBcImJvYlwiIH07XG4gICAgICogJGJvYiA9ICR1cmxSb3V0ZXIuaHJlZihtYXRjaGVyLCBwYXJhbXMpO1xuICAgICAqIC8vICRib2IgPT0gXCIvYWJvdXQvYm9iXCI7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXJsTWF0Y2hlciBUaGUgW1tVcmxNYXRjaGVyXV0gb2JqZWN0IHdoaWNoIGlzIHVzZWQgYXMgdGhlIHRlbXBsYXRlIG9mIHRoZSBVUkwgdG8gZ2VuZXJhdGUuXG4gICAgICogQHBhcmFtIHBhcmFtcyBBbiBvYmplY3Qgb2YgcGFyYW1ldGVyIHZhbHVlcyB0byBmaWxsIHRoZSBtYXRjaGVyJ3MgcmVxdWlyZWQgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgYXJlOlxuICAgICAqXG4gICAgICogLSAqKmBhYnNvbHV0ZWAqKiAtIHtib29sZWFuPWZhbHNlfSwgIElmIHRydWUgd2lsbCBnZW5lcmF0ZSBhbiBhYnNvbHV0ZSB1cmwsIGUuZy4gXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL2Z1bGx1cmxcIi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJldHVybnMgdGhlIGZ1bGx5IGNvbXBpbGVkIFVSTCwgb3IgYG51bGxgIGlmIGBwYXJhbXNgIGZhaWwgdmFsaWRhdGlvbiBhZ2FpbnN0IGB1cmxNYXRjaGVyYFxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUuaHJlZiA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHVybCA9IHVybE1hdGNoZXIuZm9ybWF0KHBhcmFtcyk7XG4gICAgICAgIGlmICh1cmwgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGFic29sdXRlOiBmYWxzZSB9O1xuICAgICAgICB2YXIgY2ZnID0gdGhpcy5fcm91dGVyLnVybFNlcnZpY2UuY29uZmlnO1xuICAgICAgICB2YXIgaXNIdG1sNSA9IGNmZy5odG1sNU1vZGUoKTtcbiAgICAgICAgaWYgKCFpc0h0bWw1ICYmIHVybCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdXJsID0gJyMnICsgY2ZnLmhhc2hQcmVmaXgoKSArIHVybDtcbiAgICAgICAgfVxuICAgICAgICB1cmwgPSBhcHBlbmRCYXNlUGF0aCh1cmwsIGlzSHRtbDUsIG9wdGlvbnMuYWJzb2x1dGUsIGNmZy5iYXNlSHJlZigpKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLmFic29sdXRlIHx8ICF1cmwpIHtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNsYXNoID0gIWlzSHRtbDUgJiYgdXJsID8gJy8nIDogJyc7XG4gICAgICAgIHZhciBjZmdQb3J0ID0gY2ZnLnBvcnQoKTtcbiAgICAgICAgdmFyIHBvcnQgPSAoY2ZnUG9ydCA9PT0gODAgfHwgY2ZnUG9ydCA9PT0gNDQzID8gJycgOiAnOicgKyBjZmdQb3J0KTtcbiAgICAgICAgcmV0dXJuIFtjZmcucHJvdG9jb2woKSwgJzovLycsIGNmZy5ob3N0KCksIHBvcnQsIHNsYXNoLCB1cmxdLmpvaW4oJycpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFudWFsbHkgYWRkcyBhIFVSTCBSdWxlLlxuICAgICAqXG4gICAgICogVXN1YWxseSwgYSB1cmwgcnVsZSBpcyBhZGRlZCB1c2luZyBbW1N0YXRlRGVjbGFyYXRpb24udXJsXV0gb3IgW1t3aGVuXV0uXG4gICAgICogVGhpcyBhcGkgY2FuIGJlIHVzZWQgZGlyZWN0bHkgZm9yIG1vcmUgY29udHJvbCAodG8gcmVnaXN0ZXIgYSBbW0Jhc2VVcmxSdWxlXV0sIGZvciBleGFtcGxlKS5cbiAgICAgKiBSdWxlcyBjYW4gYmUgY3JlYXRlZCB1c2luZyBbW1VybFJvdXRlci51cmxSdWxlRmFjdG9yeV1dLCBvciBjcmVhdGUgbWFudWFsbHkgYXMgc2ltcGxlIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBBIHJ1bGUgc2hvdWxkIGhhdmUgYSBgbWF0Y2hgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdHJ1dGh5IGlmIHRoZSBydWxlIG1hdGNoZWQuXG4gICAgICogSXQgc2hvdWxkIGFsc28gaGF2ZSBhIGBoYW5kbGVyYCBmdW5jdGlvbiB3aGljaCBpcyBpbnZva2VkIGlmIHRoZSBydWxlIGlzIHRoZSBiZXN0IG1hdGNoLlxuICAgICAqXG4gICAgICogQHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgZGVyZWdpc3RlcnMgdGhlIHJ1bGVcbiAgICAgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnJ1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIVVybFJ1bGVGYWN0b3J5LmlzVXJsUnVsZShydWxlKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBydWxlJyk7XG4gICAgICAgIHJ1bGUuJGlkID0gdGhpcy5faWQrKztcbiAgICAgICAgcnVsZS5wcmlvcml0eSA9IHJ1bGUucHJpb3JpdHkgfHwgMDtcbiAgICAgICAgdGhpcy5fcnVsZXMucHVzaChydWxlKTtcbiAgICAgICAgdGhpcy5fc29ydGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZW1vdmVSdWxlKHJ1bGUpOyB9O1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5yZW1vdmVSdWxlID0gZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgcmVtb3ZlRnJvbSh0aGlzLl9ydWxlcywgcnVsZSk7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnJ1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVuc3VyZVNvcnRlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcnVsZXMuc2xpY2UoKTtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUub3RoZXJ3aXNlID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIGhhbmRsZXJGbiA9IGdldEhhbmRsZXJGbihoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5fb3RoZXJ3aXNlRm4gPSB0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZSh2YWwodHJ1ZSksIGhhbmRsZXJGbik7XG4gICAgICAgIHRoaXMuX3NvcnRlZCA9IGZhbHNlO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5pbml0aWFsID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIGhhbmRsZXJGbiA9IGdldEhhbmRsZXJGbihoYW5kbGVyKTtcbiAgICAgICAgdmFyIG1hdGNoRm4gPSBmdW5jdGlvbiAodXJsUGFydHMsIHJvdXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb25IaXN0b3J5LnNpemUoKSA9PT0gMCAmJiAhIS9eXFwvPyQvLmV4ZWModXJsUGFydHMucGF0aCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucnVsZSh0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZShtYXRjaEZuLCBoYW5kbGVyRm4pKTtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUud2hlbiA9IGZ1bmN0aW9uIChtYXRjaGVyLCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBydWxlID0gdGhpcy51cmxSdWxlRmFjdG9yeS5jcmVhdGUobWF0Y2hlciwgaGFuZGxlcik7XG4gICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9ucyAmJiBvcHRpb25zLnByaW9yaXR5KSlcbiAgICAgICAgICAgIHJ1bGUucHJpb3JpdHkgPSBvcHRpb25zLnByaW9yaXR5O1xuICAgICAgICB0aGlzLnJ1bGUocnVsZSk7XG4gICAgICAgIHJldHVybiBydWxlO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5kZWZlckludGVyY2VwdCA9IGZ1bmN0aW9uIChkZWZlcikge1xuICAgICAgICBpZiAoZGVmZXIgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGRlZmVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHREZWZlcnJlZCA9IGRlZmVyO1xuICAgIH07XG4gICAgcmV0dXJuIFVybFJvdXRlcjtcbn0oKSk7XG5leHBvcnQgeyBVcmxSb3V0ZXIgfTtcbmZ1bmN0aW9uIGdldEhhbmRsZXJGbihoYW5kbGVyKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGhhbmRsZXIpICYmICFpc1N0cmluZyhoYW5kbGVyKSAmJiAhaXMoVGFyZ2V0U3RhdGUpKGhhbmRsZXIpICYmICFUYXJnZXRTdGF0ZS5pc0RlZihoYW5kbGVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInaGFuZGxlcicgbXVzdCBiZSBhIHN0cmluZywgZnVuY3Rpb24sIFRhcmdldFN0YXRlLCBvciBoYXZlIGEgc3RhdGU6ICduZXd0YXJnZXQnIHByb3BlcnR5XCIpO1xuICAgIH1cbiAgICByZXR1cm4gaXNGdW5jdGlvbihoYW5kbGVyKSA/IGhhbmRsZXIgOiB2YWwoaGFuZGxlcik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmxSb3V0ZXIuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB2aWV3XG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBlcXVhbHMsIGFwcGx5UGFpcnMsIHJlbW92ZUZyb20sIGluQXJyYXksIGZpbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGN1cnJ5LCBwcm9wIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNBcnJheSB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbi8qKlxuICogVGhlIFZpZXcgc2VydmljZVxuICpcbiAqIFRoaXMgc2VydmljZSBwYWlycyBleGlzdGluZyBgdWktdmlld2AgY29tcG9uZW50cyAod2hpY2ggbGl2ZSBpbiB0aGUgRE9NKVxuICogd2l0aCB2aWV3IGNvbmZpZ3MgKGZyb20gdGhlIHN0YXRlIGRlY2xhcmF0aW9uIG9iamVjdHM6IFtbU3RhdGVEZWNsYXJhdGlvbi52aWV3c11dKS5cbiAqXG4gKiAtIEFmdGVyIGEgc3VjY2Vzc2Z1bCBUcmFuc2l0aW9uLCB0aGUgdmlld3MgZnJvbSB0aGUgbmV3bHkgZW50ZXJlZCBzdGF0ZXMgYXJlIGFjdGl2YXRlZCB2aWEgW1thY3RpdmF0ZVZpZXdDb25maWddXS5cbiAqICAgVGhlIHZpZXdzIGZyb20gZXhpdGVkIHN0YXRlcyBhcmUgZGVhY3RpdmF0ZWQgdmlhIFtbZGVhY3RpdmF0ZVZpZXdDb25maWddXS5cbiAqICAgKFNlZTogdGhlIFtbcmVnaXN0ZXJBY3RpdmF0ZVZpZXdzXV0gVHJhbnNpdGlvbiBIb29rKVxuICpcbiAqIC0gQXMgYHVpLXZpZXdgIGNvbXBvbmVudHMgcG9wIGluIGFuZCBvdXQgb2YgZXhpc3RlbmNlLCB0aGV5IHJlZ2lzdGVyIHRoZW1zZWx2ZXMgdXNpbmcgW1tyZWdpc3RlclVJVmlld11dLlxuICpcbiAqIC0gV2hlbiB0aGUgW1tzeW5jXV0gZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgcmVnaXN0ZXJlZCBgdWktdmlld2AocykgKFtbQWN0aXZlVUlWaWV3XV0pXG4gKiBhcmUgY29uZmlndXJlZCB3aXRoIHRoZSBtYXRjaGluZyBbW1ZpZXdDb25maWddXShzKVxuICpcbiAqL1xudmFyIFZpZXdTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZpZXdTZXJ2aWNlKHJvdXRlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy5fdWlWaWV3cyA9IFtdO1xuICAgICAgICB0aGlzLl92aWV3Q29uZmlncyA9IFtdO1xuICAgICAgICB0aGlzLl92aWV3Q29uZmlnRmFjdG9yaWVzID0ge307XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLl9wbHVnaW5hcGkgPSB7XG4gICAgICAgICAgICBfcm9vdFZpZXdDb250ZXh0OiB0aGlzLl9yb290Vmlld0NvbnRleHQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIF92aWV3Q29uZmlnRmFjdG9yeTogdGhpcy5fdmlld0NvbmZpZ0ZhY3RvcnkuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIF9yZWdpc3RlcmVkVUlWaWV3OiBmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIGZpbmQoX3RoaXMuX3VpVmlld3MsIGZ1bmN0aW9uICh2aWV3KSB7IHJldHVybiBfdGhpcy5yb3V0ZXIuJGlkICsgXCIuXCIgKyB2aWV3LmlkID09PSBpZDsgfSk7IH0sXG4gICAgICAgICAgICBfcmVnaXN0ZXJlZFVJVmlld3M6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl91aVZpZXdzOyB9LFxuICAgICAgICAgICAgX2FjdGl2ZVZpZXdDb25maWdzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fdmlld0NvbmZpZ3M7IH0sXG4gICAgICAgICAgICBfb25TeW5jOiBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiByZW1vdmVGcm9tKF90aGlzLl9saXN0ZW5lcnMsIGxpc3RlbmVyKTsgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZXMgYSB2aWV3J3MgbmFtZSBmcm9tIGEgc3RhdGUudmlld3MgY29uZmlndXJhdGlvbiBibG9jay5cbiAgICAgKlxuICAgICAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgYnkgYSBmcmFtZXdvcmsgaW1wbGVtZW50YXRpb24gdG8gY2FsY3VsYXRlIHRoZSB2YWx1ZXMgZm9yXG4gICAgICogW1tfVmlld0RlY2xhcmF0aW9uLiR1aVZpZXdOYW1lXV0gYW5kIFtbX1ZpZXdEZWNsYXJhdGlvbi4kdWlWaWV3Q29udGV4dEFuY2hvcl1dLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRleHQgdGhlIGNvbnRleHQgb2JqZWN0IChzdGF0ZSBkZWNsYXJhdGlvbikgdGhhdCB0aGUgdmlldyBiZWxvbmdzIHRvXG4gICAgICogQHBhcmFtIHJhd1ZpZXdOYW1lIHRoZSBuYW1lIG9mIHRoZSB2aWV3LCBhcyBkZWNsYXJlZCBpbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRoZSBub3JtYWxpemVkIHVpVmlld05hbWUgYW5kIHVpVmlld0NvbnRleHRBbmNob3IgdGhhdCB0aGUgdmlldyB0YXJnZXRzXG4gICAgICovXG4gICAgVmlld1NlcnZpY2Uubm9ybWFsaXplVUlWaWV3VGFyZ2V0ID0gZnVuY3Rpb24gKGNvbnRleHQsIHJhd1ZpZXdOYW1lKSB7XG4gICAgICAgIGlmIChyYXdWaWV3TmFtZSA9PT0gdm9pZCAwKSB7IHJhd1ZpZXdOYW1lID0gJyc7IH1cbiAgICAgICAgLy8gVE9ETzogVmFsaWRhdGUgaW5jb21pbmcgdmlldyBuYW1lIHdpdGggYSByZWdleHAgdG8gYWxsb3c6XG4gICAgICAgIC8vIGV4OiBcInZpZXcubmFtZUBmb28uYmFyXCIgLCBcIl4uXi52aWV3Lm5hbWVcIiAsIFwidmlldy5uYW1lQF4uXlwiICwgXCJcIiAsXG4gICAgICAgIC8vIFwiQFwiICwgXCIkZGVmYXVsdEBeXCIgLCBcIiEkZGVmYXVsdC4kZGVmYXVsdFwiICwgXCIhZm9vLmJhclwiXG4gICAgICAgIHZhciB2aWV3QXRDb250ZXh0ID0gcmF3Vmlld05hbWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgdmFyIHVpVmlld05hbWUgPSB2aWV3QXRDb250ZXh0WzBdIHx8ICckZGVmYXVsdCc7IC8vIGRlZmF1bHQgdG8gdW5uYW1lZCB2aWV3XG4gICAgICAgIHZhciB1aVZpZXdDb250ZXh0QW5jaG9yID0gaXNTdHJpbmcodmlld0F0Q29udGV4dFsxXSkgPyB2aWV3QXRDb250ZXh0WzFdIDogJ14nOyAvLyBkZWZhdWx0IHRvIHBhcmVudCBjb250ZXh0XG4gICAgICAgIC8vIEhhbmRsZSByZWxhdGl2ZSB2aWV3LW5hbWUgc3VnYXIgc3ludGF4LlxuICAgICAgICAvLyBNYXRjaGVzIHJhd1ZpZXdOYW1lIFwiXi5eLl4uZm9vLmJhclwiIGludG8gYXJyYXk6IFtcIl4uXi5eLmZvby5iYXJcIiwgXCJeLl4uXlwiLCBcImZvby5iYXJcIl0sXG4gICAgICAgIHZhciByZWxhdGl2ZVZpZXdOYW1lU3VnYXIgPSAvXihcXF4oPzpcXC5cXF4pKilcXC4oLiokKS8uZXhlYyh1aVZpZXdOYW1lKTtcbiAgICAgICAgaWYgKHJlbGF0aXZlVmlld05hbWVTdWdhcikge1xuICAgICAgICAgICAgLy8gQ2xvYmJlcnMgZXhpc3RpbmcgY29udGV4dEFuY2hvciAocmF3Vmlld05hbWUgdmFsaWRhdGlvbiB3aWxsIGZpeCB0aGlzKVxuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IHJlbGF0aXZlVmlld05hbWVTdWdhclsxXTsgLy8gc2V0IGFuY2hvciB0byBcIl4uXi5eXCJcbiAgICAgICAgICAgIHVpVmlld05hbWUgPSByZWxhdGl2ZVZpZXdOYW1lU3VnYXJbMl07IC8vIHNldCB2aWV3LW5hbWUgdG8gXCJmb28uYmFyXCJcbiAgICAgICAgfVxuICAgICAgICBpZiAodWlWaWV3TmFtZS5jaGFyQXQoMCkgPT09ICchJykge1xuICAgICAgICAgICAgdWlWaWV3TmFtZSA9IHVpVmlld05hbWUuc3Vic3RyKDEpO1xuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9ICcnOyAvLyB0YXJnZXQgYWJzb2x1dGVseSBmcm9tIHJvb3RcbiAgICAgICAgfVxuICAgICAgICAvLyBoYW5kbGUgcGFyZW50IHJlbGF0aXZlIHRhcmdldGluZyBcIl4uXi5eXCJcbiAgICAgICAgdmFyIHJlbGF0aXZlTWF0Y2ggPSAvXihcXF4oPzpcXC5cXF4pKikkLztcbiAgICAgICAgaWYgKHJlbGF0aXZlTWF0Y2guZXhlYyh1aVZpZXdDb250ZXh0QW5jaG9yKSkge1xuICAgICAgICAgICAgdmFyIGFuY2hvclN0YXRlID0gdWlWaWV3Q29udGV4dEFuY2hvci5zcGxpdCgnLicpLnJlZHVjZShmdW5jdGlvbiAoYW5jaG9yLCB4KSB7IHJldHVybiBhbmNob3IucGFyZW50OyB9LCBjb250ZXh0KTtcbiAgICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3IgPSBhbmNob3JTdGF0ZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVpVmlld0NvbnRleHRBbmNob3IgPT09ICcuJykge1xuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IGNvbnRleHQubmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB1aVZpZXdOYW1lOiB1aVZpZXdOYW1lLCB1aVZpZXdDb250ZXh0QW5jaG9yOiB1aVZpZXdDb250ZXh0QW5jaG9yIH07XG4gICAgfTtcbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuX3Jvb3RWaWV3Q29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fcm9vdENvbnRleHQgPSBjb250ZXh0IHx8IHRoaXMuX3Jvb3RDb250ZXh0KTtcbiAgICB9O1xuICAgIFZpZXdTZXJ2aWNlLnByb3RvdHlwZS5fdmlld0NvbmZpZ0ZhY3RvcnkgPSBmdW5jdGlvbiAodmlld1R5cGUsIGZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5fdmlld0NvbmZpZ0ZhY3Rvcmllc1t2aWV3VHlwZV0gPSBmYWN0b3J5O1xuICAgIH07XG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmNyZWF0ZVZpZXdDb25maWcgPSBmdW5jdGlvbiAocGF0aCwgZGVjbCkge1xuICAgICAgICB2YXIgY2ZnRmFjdG9yeSA9IHRoaXMuX3ZpZXdDb25maWdGYWN0b3JpZXNbZGVjbC4kdHlwZV07XG4gICAgICAgIGlmICghY2ZnRmFjdG9yeSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmlld1NlcnZpY2U6IE5vIHZpZXcgY29uZmlnIGZhY3RvcnkgcmVnaXN0ZXJlZCBmb3IgdHlwZSAnICsgZGVjbC4kdHlwZSk7XG4gICAgICAgIHZhciBjZmdzID0gY2ZnRmFjdG9yeShwYXRoLCBkZWNsKTtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkoY2ZncykgPyBjZmdzIDogW2NmZ3NdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGVhY3RpdmF0ZXMgYSBWaWV3Q29uZmlnLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkZWFjdGl2YXRlcyBhIGBWaWV3Q29uZmlnYC5cbiAgICAgKiBBZnRlciBjYWxsaW5nIFtbc3luY11dLCBpdCB3aWxsIHVuLXBhaXIgZnJvbSBhbnkgYHVpLXZpZXdgIHdpdGggd2hpY2ggaXQgaXMgY3VycmVudGx5IHBhaXJlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2aWV3Q29uZmlnIFRoZSBWaWV3Q29uZmlnIHZpZXcgdG8gZGVyZWdpc3Rlci5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuZGVhY3RpdmF0ZVZpZXdDb25maWcgPSBmdW5jdGlvbiAodmlld0NvbmZpZykge1xuICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoJzwtIFJlbW92aW5nJywgdmlld0NvbmZpZyk7XG4gICAgICAgIHJlbW92ZUZyb20odGhpcy5fdmlld0NvbmZpZ3MsIHZpZXdDb25maWcpO1xuICAgIH07XG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmFjdGl2YXRlVmlld0NvbmZpZyA9IGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VFdmVudCgnLT4gUmVnaXN0ZXJpbmcnLCB2aWV3Q29uZmlnKTtcbiAgICAgICAgdGhpcy5fdmlld0NvbmZpZ3MucHVzaCh2aWV3Q29uZmlnKTtcbiAgICB9O1xuICAgIFZpZXdTZXJ2aWNlLnByb3RvdHlwZS5zeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdWlWaWV3c0J5RnFuID0gdGhpcy5fdWlWaWV3cy5tYXAoZnVuY3Rpb24gKHVpdikgeyByZXR1cm4gW3Vpdi5mcW4sIHVpdl07IH0pLnJlZHVjZShhcHBseVBhaXJzLCB7fSk7XG4gICAgICAgIC8vIFJldHVybiBhIHdlaWdodGVkIGRlcHRoIHZhbHVlIGZvciBhIHVpVmlldy5cbiAgICAgICAgLy8gVGhlIGRlcHRoIGlzIHRoZSBuZXN0aW5nIGRlcHRoIG9mIHVpLXZpZXdzIChiYXNlZCBvbiBGUU47IHRpbWVzIDEwLDAwMClcbiAgICAgICAgLy8gcGx1cyB0aGUgZGVwdGggb2YgdGhlIHN0YXRlIHRoYXQgaXMgcG9wdWxhdGluZyB0aGUgdWlWaWV3XG4gICAgICAgIGZ1bmN0aW9uIHVpVmlld0RlcHRoKHVpVmlldykge1xuICAgICAgICAgICAgdmFyIHN0YXRlRGVwdGggPSBmdW5jdGlvbiAoY29udGV4dCkgeyByZXR1cm4gKGNvbnRleHQgJiYgY29udGV4dC5wYXJlbnQgPyBzdGF0ZURlcHRoKGNvbnRleHQucGFyZW50KSArIDEgOiAxKTsgfTtcbiAgICAgICAgICAgIHJldHVybiB1aVZpZXcuZnFuLnNwbGl0KCcuJykubGVuZ3RoICogMTAwMDAgKyBzdGF0ZURlcHRoKHVpVmlldy5jcmVhdGlvbkNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiB0aGUgVmlld0NvbmZpZydzIGNvbnRleHQncyBkZXB0aCBpbiB0aGUgY29udGV4dCB0cmVlLlxuICAgICAgICBmdW5jdGlvbiB2aWV3Q29uZmlnRGVwdGgoY29uZmlnKSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbmZpZy52aWV3RGVjbC4kY29udGV4dCwgY291bnQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKCsrY291bnQgJiYgY29udGV4dC5wYXJlbnQpXG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQucGFyZW50O1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIEdpdmVuIGEgZGVwdGggZnVuY3Rpb24sIHJldHVybnMgYSBjb21wYXJlIGZ1bmN0aW9uIHdoaWNoIGNhbiByZXR1cm4gZWl0aGVyIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nIG9yZGVyXG4gICAgICAgIHZhciBkZXB0aENvbXBhcmUgPSBjdXJyeShmdW5jdGlvbiAoZGVwdGhGbiwgcG9zTmVnLCBsZWZ0LCByaWdodCkgeyByZXR1cm4gcG9zTmVnICogKGRlcHRoRm4obGVmdCkgLSBkZXB0aEZuKHJpZ2h0KSk7IH0pO1xuICAgICAgICB2YXIgbWF0Y2hpbmdDb25maWdQYWlyID0gZnVuY3Rpb24gKHVpVmlldykge1xuICAgICAgICAgICAgdmFyIG1hdGNoaW5nQ29uZmlncyA9IF90aGlzLl92aWV3Q29uZmlncy5maWx0ZXIoVmlld1NlcnZpY2UubWF0Y2hlcyh1aVZpZXdzQnlGcW4sIHVpVmlldykpO1xuICAgICAgICAgICAgaWYgKG1hdGNoaW5nQ29uZmlncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBPSy4gIENoaWxkIHN0YXRlcyBjYW4gdGFyZ2V0IGEgdWktdmlldyB0aGF0IHRoZSBwYXJlbnQgc3RhdGUgYWxzbyB0YXJnZXRzICh0aGUgY2hpbGQgd2lucylcbiAgICAgICAgICAgICAgICAvLyBTb3J0IGJ5IGRlcHRoIGFuZCByZXR1cm4gdGhlIG1hdGNoIGZyb20gdGhlIGRlZXBlc3QgY2hpbGRcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgTXVsdGlwbGUgbWF0Y2hpbmcgdmlldyBjb25maWdzIGZvciAke3VpVmlldy5mcW59YCwgbWF0Y2hpbmdDb25maWdzKTtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0NvbmZpZ3Muc29ydChkZXB0aENvbXBhcmUodmlld0NvbmZpZ0RlcHRoLCAtMSkpOyAvLyBkZXNjZW5kaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB1aVZpZXc6IHVpVmlldywgdmlld0NvbmZpZzogbWF0Y2hpbmdDb25maWdzWzBdIH07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjb25maWd1cmVVSVZpZXcgPSBmdW5jdGlvbiAodHVwbGUpIHtcbiAgICAgICAgICAgIC8vIElmIGEgcGFyZW50IHVpLXZpZXcgaXMgcmVjb25maWd1cmVkLCBpdCBjb3VsZCBkZXN0cm95IGNoaWxkIHVpLXZpZXdzLlxuICAgICAgICAgICAgLy8gQmVmb3JlIGNvbmZpZ3VyaW5nIGEgY2hpbGQgdWktdmlldywgbWFrZSBzdXJlIGl0J3Mgc3RpbGwgaW4gdGhlIGFjdGl2ZSB1aVZpZXdzIGFycmF5LlxuICAgICAgICAgICAgaWYgKF90aGlzLl91aVZpZXdzLmluZGV4T2YodHVwbGUudWlWaWV3KSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgdHVwbGUudWlWaWV3LmNvbmZpZ1VwZGF0ZWQodHVwbGUudmlld0NvbmZpZyk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFNvcnQgdmlld3MgYnkgRlFOIGFuZCBzdGF0ZSBkZXB0aC4gUHJvY2VzcyB1aXZpZXdzIG5lYXJlc3QgdGhlIHJvb3QgZmlyc3QuXG4gICAgICAgIHZhciB1aVZpZXdUdXBsZXMgPSB0aGlzLl91aVZpZXdzLnNvcnQoZGVwdGhDb21wYXJlKHVpVmlld0RlcHRoLCAxKSkubWFwKG1hdGNoaW5nQ29uZmlnUGFpcik7XG4gICAgICAgIHZhciBtYXRjaGVkVmlld0NvbmZpZ3MgPSB1aVZpZXdUdXBsZXMubWFwKGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gdHVwbGUudmlld0NvbmZpZzsgfSk7XG4gICAgICAgIHZhciB1bm1hdGNoZWRDb25maWdUdXBsZXMgPSB0aGlzLl92aWV3Q29uZmlnc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoY29uZmlnKSB7IHJldHVybiAhaW5BcnJheShtYXRjaGVkVmlld0NvbmZpZ3MsIGNvbmZpZyk7IH0pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7IHJldHVybiAoeyB1aVZpZXc6IHVuZGVmaW5lZCwgdmlld0NvbmZpZzogdmlld0NvbmZpZyB9KTsgfSk7XG4gICAgICAgIHVpVmlld1R1cGxlcy5mb3JFYWNoKGNvbmZpZ3VyZVVJVmlldyk7XG4gICAgICAgIHZhciBhbGxUdXBsZXMgPSB1aVZpZXdUdXBsZXMuY29uY2F0KHVubWF0Y2hlZENvbmZpZ1R1cGxlcyk7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyByZXR1cm4gY2IoYWxsVHVwbGVzKTsgfSk7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1N5bmMoYWxsVHVwbGVzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGB1aS12aWV3YCBjb21wb25lbnRcbiAgICAgKlxuICAgICAqIFdoZW4gYSBgdWktdmlld2AgY29tcG9uZW50IGlzIGNyZWF0ZWQsIGl0IHVzZXMgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgaXRzZWxmLlxuICAgICAqIEFmdGVyIHJlZ2lzdHJhdGlvbiB0aGUgW1tzeW5jXV0gbWV0aG9kIGlzIHVzZWQgdG8gZW5zdXJlIGFsbCBgdWktdmlld2AgYXJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgcHJvcGVyIFtbVmlld0NvbmZpZ11dLlxuICAgICAqXG4gICAgICogTm90ZTogdGhlIGB1aS12aWV3YCBjb21wb25lbnQgdXNlcyB0aGUgYFZpZXdDb25maWdgIHRvIGRldGVybWluZSB3aGF0IHZpZXcgc2hvdWxkIGJlIGxvYWRlZCBpbnNpZGUgdGhlIGB1aS12aWV3YCxcbiAgICAgKiBhbmQgd2hhdCB0aGUgdmlldydzIHN0YXRlIGNvbnRleHQgaXMuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGVyZSBpcyBubyBjb3JyZXNwb25kaW5nIGBkZXJlZ2lzdGVyVUlWaWV3YC5cbiAgICAgKiAgICAgICBBIGB1aS12aWV3YCBzaG91bGQgaGFuZyBvbiB0byB0aGUgcmV0dXJuIHZhbHVlIG9mIGByZWdpc3RlclVJVmlld2AgYW5kIGludm9rZSBpdCB0byBkZXJlZ2lzdGVyIGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1aVZpZXcgVGhlIG1ldGFkYXRhIGZvciBhIFVJVmlld1xuICAgICAqIEByZXR1cm4gYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gdXNlZCB3aGVuIHRoZSB2aWV3IGlzIGRlc3Ryb3llZC5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXJVSVZpZXcgPSBmdW5jdGlvbiAodWlWaWV3KSB7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudCgnLT4gUmVnaXN0ZXJpbmcnLCB1aVZpZXcpO1xuICAgICAgICB2YXIgdWlWaWV3cyA9IHRoaXMuX3VpVmlld3M7XG4gICAgICAgIHZhciBmcW5BbmRUeXBlTWF0Y2hlcyA9IGZ1bmN0aW9uICh1aXYpIHsgcmV0dXJuIHVpdi5mcW4gPT09IHVpVmlldy5mcW4gJiYgdWl2LiR0eXBlID09PSB1aVZpZXcuJHR5cGU7IH07XG4gICAgICAgIGlmICh1aVZpZXdzLmZpbHRlcihmcW5BbmRUeXBlTWF0Y2hlcykubGVuZ3RoKVxuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCchISEhIGR1cGxpY2F0ZSB1aVZpZXcgbmFtZWQ6JywgdWlWaWV3KTtcbiAgICAgICAgdWlWaWV3cy5wdXNoKHVpVmlldyk7XG4gICAgICAgIHRoaXMuc3luYygpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IHVpVmlld3MuaW5kZXhPZih1aVZpZXcpO1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoJ1RyaWVkIHJlbW92aW5nIG5vbi1yZWdpc3RlcmVkIHVpVmlldycsIHVpVmlldyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCc8LSBEZXJlZ2lzdGVyaW5nJywgdWlWaWV3KTtcbiAgICAgICAgICAgIHJlbW92ZUZyb20odWlWaWV3cykodWlWaWV3KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygdmlld3MgY3VycmVudGx5IGF2YWlsYWJsZSBvbiB0aGUgcGFnZSwgYnkgZnVsbHktcXVhbGlmaWVkIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBmdWxseS1xdWFsaWZpZWQgdmlldyBuYW1lcy5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdWlWaWV3cy5tYXAocHJvcCgnZnFuJykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiB2aWV3cyBvbiB0aGUgcGFnZSBjb250YWluaW5nIGxvYWRlZCBjb250ZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgZnVsbHktcXVhbGlmaWVkIHZpZXcgbmFtZXMuXG4gICAgICovXG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VpVmlld3MuZmlsdGVyKHByb3AoJyRjb25maWcnKSkubWFwKHByb3AoJ25hbWUnKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIHVpLXZpZXcgYW5kIGEgVmlld0NvbmZpZywgZGV0ZXJtaW5lcyBpZiB0aGV5IFwibWF0Y2hcIi5cbiAgICAgKlxuICAgICAqIEEgdWktdmlldyBoYXMgYSBmdWxseSBxdWFsaWZpZWQgbmFtZSAoZnFuKSBhbmQgYSBjb250ZXh0IG9iamVjdC4gIFRoZSBmcW4gaXMgYnVpbHQgZnJvbSBpdHMgb3ZlcmFsbCBsb2NhdGlvbiBpblxuICAgICAqIHRoZSBET00sIGRlc2NyaWJpbmcgaXRzIG5lc3RpbmcgcmVsYXRpb25zaGlwIHRvIGFueSBwYXJlbnQgdWktdmlldyB0YWdzIGl0IGlzIG5lc3RlZCBpbnNpZGUgb2YuXG4gICAgICpcbiAgICAgKiBBIFZpZXdDb25maWcgaGFzIGEgdGFyZ2V0IHVpLXZpZXcgbmFtZSBhbmQgYSBjb250ZXh0IGFuY2hvci4gIFRoZSB1aS12aWV3IG5hbWUgY2FuIGJlIGEgc2ltcGxlIG5hbWUsIG9yXG4gICAgICogY2FuIGJlIGEgc2VnbWVudGVkIHVpLXZpZXcgcGF0aCwgZGVzY3JpYmluZyBhIHBvcnRpb24gb2YgYSB1aS12aWV3IGZxbi5cbiAgICAgKlxuICAgICAqIEluIG9yZGVyIGZvciBhIHVpLXZpZXcgdG8gbWF0Y2ggVmlld0NvbmZpZywgdWktdmlldydzICR0eXBlIG11c3QgbWF0Y2ggdGhlIFZpZXdDb25maWcncyAkdHlwZVxuICAgICAqXG4gICAgICogSWYgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgdWktdmlldyBuYW1lIGlzIGEgc2ltcGxlIG5hbWUgKG5vIGRvdHMpLCB0aGVuIGEgdWktdmlldyBtYXRjaGVzIGlmOlxuICAgICAqIC0gdGhlIHVpLXZpZXcncyBuYW1lIG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZVxuICAgICAqIC0gdGhlIHVpLXZpZXcncyBjb250ZXh0IG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyBhbmNob3JcbiAgICAgKlxuICAgICAqIElmIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IHVpLXZpZXcgbmFtZSBpcyBhIHNlZ21lbnRlZCBuYW1lICh3aXRoIGRvdHMpLCB0aGVuIGEgdWktdmlldyBtYXRjaGVzIGlmOlxuICAgICAqIC0gVGhlcmUgZXhpc3RzIGEgcGFyZW50IHVpLXZpZXcgd2hlcmU6XG4gICAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIG1hdGNoZXMgdGhlIGZpcnN0IHNlZ21lbnQgKGluZGV4IDApIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICAgKiAgICAtIHRoZSBwYXJlbnQgdWktdmlldydzIGNvbnRleHQgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvclxuICAgICAqIC0gQW5kIHRoZSByZW1haW5pbmcgc2VnbWVudHMgKGluZGV4IDEuLm4pIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWUgbWF0Y2ggdGhlIHRhaWwgb2YgdGhlIHVpLXZpZXcncyBmcW5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBET006XG4gICAgICogPHVpLXZpZXc+ICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSByb290IGNvbnRleHQgKG5hbWU6IFwiXCIpIC0tPlxuICAgICAqICAgPHVpLXZpZXcgbmFtZT1cImZvb1wiPiAgICAgICAgICAgICAgICA8IS0tIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQgbmFtZWQ6IFwiQVwiICAgICAgLS0+XG4gICAgICogICAgIDx1aS12aWV3PiAgICAgICAgICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSBjb250ZXh0IG5hbWVkOiBcIkEuQlwiICAgIC0tPlxuICAgICAqICAgICAgIDx1aS12aWV3IG5hbWU9XCJiYXJcIj4gICAgICAgICAgICA8IS0tIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQgbmFtZWQ6IFwiQS5CLkNcIiAgLS0+XG4gICAgICogICAgICAgPC91aS12aWV3PlxuICAgICAqICAgICA8L3VpLXZpZXc+XG4gICAgICogICA8L3VpLXZpZXc+XG4gICAgICogPC91aS12aWV3PlxuICAgICAqXG4gICAgICogdWlWaWV3czogW1xuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdFwiLCAgICAgICAgICAgICAgICAgIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIlwiIH0gfSxcbiAgICAgKiAgeyBmcW46IFwiJGRlZmF1bHQuZm9vXCIsICAgICAgICAgICAgICBjcmVhdGlvbkNvbnRleHQ6IHsgbmFtZTogXCJBXCIgfSB9LFxuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHRcIiwgICAgIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIkEuQlwiIH0gfVxuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIsIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIkEuQi5DXCIgfSB9XG4gICAgICogXVxuICAgICAqXG4gICAgICogVGhlc2UgZm91ciB2aWV3IGNvbmZpZ3MgYWxsIG1hdGNoIHRoZSB1aS12aWV3IHdpdGggdGhlIGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCI6XG4gICAgICpcbiAgICAgKiAtIFZpZXdDb25maWcxOiB7IHVpVmlld05hbWU6IFwiYmFyXCIsICAgICAgICAgICAgICAgICAgICAgICB1aVZpZXdDb250ZXh0QW5jaG9yOiBcIkEuQi5DXCIgfVxuICAgICAqIC0gVmlld0NvbmZpZzI6IHsgdWlWaWV3TmFtZTogXCIkZGVmYXVsdC5iYXJcIiwgICAgICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQS5CXCIgfVxuICAgICAqIC0gVmlld0NvbmZpZzM6IHsgdWlWaWV3TmFtZTogXCJmb28uJGRlZmF1bHQuYmFyXCIsICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQVwiIH1cbiAgICAgKiAtIFZpZXdDb25maWc0OiB7IHVpVmlld05hbWU6IFwiJGRlZmF1bHQuZm9vLiRkZWZhdWx0LmJhclwiLCB1aVZpZXdDb250ZXh0QW5jaG9yOiBcIlwiIH1cbiAgICAgKlxuICAgICAqIFVzaW5nIFZpZXdDb25maWczIGFzIGFuIGV4YW1wbGUsIGl0IG1hdGNoZXMgdGhlIHVpLXZpZXcgd2l0aCBmcW4gXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIgYmVjYXVzZTpcbiAgICAgKiAtIFRoZSBWaWV3Q29uZmlnJ3Mgc2VnbWVudGVkIHRhcmdldCBuYW1lIGlzOiBbIFwiZm9vXCIsIFwiJGRlZmF1bHRcIiwgXCJiYXJcIiBdXG4gICAgICogLSBUaGVyZSBleGlzdHMgYSBwYXJlbnQgdWktdmlldyAod2hpY2ggaGFzIGZxbjogXCIkZGVmYXVsdC5mb29cIikgd2hlcmU6XG4gICAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIFwiZm9vXCIgbWF0Y2hlcyB0aGUgZmlyc3Qgc2VnbWVudCBcImZvb1wiIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICAgKiAgICAtIHRoZSBwYXJlbnQgdWktdmlldydzIGNvbnRleHQgXCJBXCIgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvciBjb250ZXh0IFwiQVwiXG4gICAgICogLSBBbmQgdGhlIHJlbWFpbmluZyBzZWdtZW50cyBbIFwiJGRlZmF1bHRcIiwgXCJiYXJcIiBdLmpvaW4oXCIuXCJfIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWUgbWF0Y2hcbiAgICAgKiAgIHRoZSB0YWlsIG9mIHRoZSB1aS12aWV3J3MgZnFuIFwiZGVmYXVsdC5iYXJcIlxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICovXG4gICAgVmlld1NlcnZpY2UubWF0Y2hlcyA9IGZ1bmN0aW9uICh1aVZpZXdzQnlGcW4sIHVpVmlldykgeyByZXR1cm4gZnVuY3Rpb24gKHZpZXdDb25maWcpIHtcbiAgICAgICAgLy8gRG9uJ3Qgc3VwcGx5IGFuIG5nMSB1aS12aWV3IHdpdGggYW4gbmcyIFZpZXdDb25maWcsIGV0Y1xuICAgICAgICBpZiAodWlWaWV3LiR0eXBlICE9PSB2aWV3Q29uZmlnLnZpZXdEZWNsLiR0eXBlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBTcGxpdCBuYW1lcyBhcGFydCBmcm9tIGJvdGggdmlld0NvbmZpZyBhbmQgdWlWaWV3IGludG8gc2VnbWVudHNcbiAgICAgICAgdmFyIHZjID0gdmlld0NvbmZpZy52aWV3RGVjbDtcbiAgICAgICAgdmFyIHZjU2VnbWVudHMgPSB2Yy4kdWlWaWV3TmFtZS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgdWl2U2VnbWVudHMgPSB1aVZpZXcuZnFuLnNwbGl0KCcuJyk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YWlscyBvZiB0aGUgc2VnbWVudCBhcnJheXMgbWF0Y2guIGV4LCB0aGVzZSBhcnJheXMnIHRhaWxzIG1hdGNoOlxuICAgICAgICAvLyB2YzogW1wiZm9vXCIsIFwiYmFyXCJdLCB1aXYgZnFuOiBbXCIkZGVmYXVsdFwiLCBcImZvb1wiLCBcImJhclwiXVxuICAgICAgICBpZiAoIWVxdWFscyh2Y1NlZ21lbnRzLCB1aXZTZWdtZW50cy5zbGljZSgwIC0gdmNTZWdtZW50cy5sZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gTm93IGNoZWNrIGlmIHRoZSBmcW4gZW5kaW5nIGF0IHRoZSBmaXJzdCBzZWdtZW50IG9mIHRoZSB2aWV3Q29uZmlnIG1hdGNoZXMgdGhlIGNvbnRleHQ6XG4gICAgICAgIC8vIFtcIiRkZWZhdWx0XCIsIFwiZm9vXCJdLmpvaW4oXCIuXCIpID09IFwiJGRlZmF1bHQuZm9vXCIsIGRvZXMgdGhlIHVpLXZpZXcgJGRlZmF1bHQuZm9vIGNvbnRleHQgbWF0Y2g/XG4gICAgICAgIHZhciBuZWdPZmZzZXQgPSAxIC0gdmNTZWdtZW50cy5sZW5ndGggfHwgdW5kZWZpbmVkO1xuICAgICAgICB2YXIgZnFuVG9GaXJzdFNlZ21lbnQgPSB1aXZTZWdtZW50cy5zbGljZSgwLCBuZWdPZmZzZXQpLmpvaW4oJy4nKTtcbiAgICAgICAgdmFyIHVpVmlld0NvbnRleHQgPSB1aVZpZXdzQnlGcW5bZnFuVG9GaXJzdFNlZ21lbnRdLmNyZWF0aW9uQ29udGV4dDtcbiAgICAgICAgcmV0dXJuIHZjLiR1aVZpZXdDb250ZXh0QW5jaG9yID09PSAodWlWaWV3Q29udGV4dCAmJiB1aVZpZXdDb250ZXh0Lm5hbWUpO1xuICAgIH07IH07XG4gICAgcmV0dXJuIFZpZXdTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFZpZXdTZXJ2aWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12aWV3LmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgY29yZVxuICovIC8qKiAqL1xuaW1wb3J0IHsgU3RhdGVQYXJhbXMgfSBmcm9tICcuL3BhcmFtcy9zdGF0ZVBhcmFtcyc7XG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gJy4vY29tbW9uL3F1ZXVlJztcbi8qKlxuICogR2xvYmFsIHJvdXRlciBzdGF0ZVxuICpcbiAqIFRoaXMgaXMgd2hlcmUgd2UgaG9sZCB0aGUgZ2xvYmFsIG11dGFibGUgc3RhdGUgc3VjaCBhcyBjdXJyZW50IHN0YXRlLCBjdXJyZW50XG4gKiBwYXJhbXMsIGN1cnJlbnQgdHJhbnNpdGlvbiwgZXRjLlxuICovXG52YXIgVUlSb3V0ZXJHbG9iYWxzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFVJUm91dGVyR2xvYmFscygpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlc1xuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgcGFyYW1ldGVyIHZhbHVlcyBmcm9tIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhcmFtcyA9IG5ldyBTdGF0ZVBhcmFtcygpO1xuICAgICAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgICAgIHRoaXMubGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQgPSAtMTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25IaXN0b3J5ID0gbmV3IFF1ZXVlKFtdLCAxKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucyA9IG5ldyBRdWV1ZShbXSwgMSk7XG4gICAgfVxuICAgIFVJUm91dGVyR2xvYmFscy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uSGlzdG9yeS5jbGVhcigpO1xuICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5jbGVhcigpO1xuICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFVJUm91dGVyR2xvYmFscztcbn0oKSk7XG5leHBvcnQgeyBVSVJvdXRlckdsb2JhbHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2JhbHMuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB1cmxcbiAqLyAvKiogKi9cbmltcG9ydCB7IG5vdEltcGxlbWVudGVkIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBub29wLCBjcmVhdGVQcm94eUZ1bmN0aW9ucyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBtYWtlU3R1YiA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkgeyByZXR1cm4gKChhY2Nba2V5XSA9IG5vdEltcGxlbWVudGVkKGtleSkpLCBhY2MpOyB9LCB7IGRpc3Bvc2U6IG5vb3AgfSk7XG59O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBsb2NhdGlvblNlcnZpY2VzRm5zID0gWyd1cmwnLCAncGF0aCcsICdzZWFyY2gnLCAnaGFzaCcsICdvbkNoYW5nZSddO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBsb2NhdGlvbkNvbmZpZ0ZucyA9IFsncG9ydCcsICdwcm90b2NvbCcsICdob3N0JywgJ2Jhc2VIcmVmJywgJ2h0bWw1TW9kZScsICdoYXNoUHJlZml4J107XG4vKiogQGhpZGRlbiAqL1xudmFyIHVtZkZucyA9IFsndHlwZScsICdjYXNlSW5zZW5zaXRpdmUnLCAnc3RyaWN0TW9kZScsICdkZWZhdWx0U3F1YXNoUG9saWN5J107XG4vKiogQGhpZGRlbiAqL1xudmFyIHJ1bGVzRm5zID0gWydzb3J0JywgJ3doZW4nLCAnaW5pdGlhbCcsICdvdGhlcndpc2UnLCAncnVsZXMnLCAncnVsZScsICdyZW1vdmVSdWxlJ107XG4vKiogQGhpZGRlbiAqL1xudmFyIHN5bmNGbnMgPSBbJ2RlZmVySW50ZXJjZXB0JywgJ2xpc3RlbicsICdzeW5jJywgJ21hdGNoJ107XG4vKipcbiAqIEFQSSBmb3IgVVJMIG1hbmFnZW1lbnRcbiAqL1xudmFyIFVybFNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBVcmxTZXJ2aWNlKHJvdXRlciwgbGF0ZUJpbmQpIHtcbiAgICAgICAgaWYgKGxhdGVCaW5kID09PSB2b2lkIDApIHsgbGF0ZUJpbmQgPSB0cnVlOyB9XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLnJ1bGVzID0ge307XG4gICAgICAgIHRoaXMuY29uZmlnID0ge307XG4gICAgICAgIC8vIHByb3h5IGZ1bmN0aW9uIGNhbGxzIGZyb20gVXJsU2VydmljZSB0byB0aGUgTG9jYXRpb25TZXJ2aWNlL0xvY2F0aW9uQ29uZmlnXG4gICAgICAgIHZhciBsb2NhdGlvblNlcnZpY2VzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLmxvY2F0aW9uU2VydmljZTsgfTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnMobG9jYXRpb25TZXJ2aWNlcywgdGhpcywgbG9jYXRpb25TZXJ2aWNlcywgbG9jYXRpb25TZXJ2aWNlc0ZucywgbGF0ZUJpbmQpO1xuICAgICAgICB2YXIgbG9jYXRpb25Db25maWcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXIubG9jYXRpb25Db25maWc7IH07XG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKGxvY2F0aW9uQ29uZmlnLCB0aGlzLmNvbmZpZywgbG9jYXRpb25Db25maWcsIGxvY2F0aW9uQ29uZmlnRm5zLCBsYXRlQmluZCk7XG4gICAgICAgIHZhciB1bWYgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXIudXJsTWF0Y2hlckZhY3Rvcnk7IH07XG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHVtZiwgdGhpcy5jb25maWcsIHVtZiwgdW1mRm5zKTtcbiAgICAgICAgdmFyIHVybFJvdXRlciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci51cmxSb3V0ZXI7IH07XG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHVybFJvdXRlciwgdGhpcy5ydWxlcywgdXJsUm91dGVyLCBydWxlc0Zucyk7XG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHVybFJvdXRlciwgdGhpcywgdXJsUm91dGVyLCBzeW5jRm5zKTtcbiAgICB9XG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUudXJsID0gZnVuY3Rpb24gKG5ld3VybCwgcmVwbGFjZSwgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUucGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5oYXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IFVSTCBwYXJ0c1xuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgY3VycmVudCBVUkwgY29tcG9uZW50cyBhcyBhIFtbVXJsUGFydHNdXSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgY3VycmVudCB1cmwgcGFydHNcbiAgICAgKi9cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5wYXJ0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHsgcGF0aDogdGhpcy5wYXRoKCksIHNlYXJjaDogdGhpcy5zZWFyY2goKSwgaGFzaDogdGhpcy5oYXNoKCkgfTtcbiAgICB9O1xuICAgIFVybFNlcnZpY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUuZGVmZXJJbnRlcmNlcHQgPSBmdW5jdGlvbiAoZGVmZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAodXJsUGFydHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBVcmxTZXJ2aWNlLmxvY2F0aW9uU2VydmljZVN0dWIgPSBtYWtlU3R1Yihsb2NhdGlvblNlcnZpY2VzRm5zKTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFVybFNlcnZpY2UubG9jYXRpb25Db25maWdTdHViID0gbWFrZVN0dWIobG9jYXRpb25Db25maWdGbnMpO1xuICAgIHJldHVybiBVcmxTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFVybFNlcnZpY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybFNlcnZpY2UuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBjb3JlXG4gKi8gLyoqICovXG5pbXBvcnQgeyBVcmxNYXRjaGVyRmFjdG9yeSB9IGZyb20gJy4vdXJsL3VybE1hdGNoZXJGYWN0b3J5JztcbmltcG9ydCB7IFVybFJvdXRlciB9IGZyb20gJy4vdXJsL3VybFJvdXRlcic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4vdHJhbnNpdGlvbi90cmFuc2l0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBWaWV3U2VydmljZSB9IGZyb20gJy4vdmlldy92aWV3JztcbmltcG9ydCB7IFN0YXRlUmVnaXN0cnkgfSBmcm9tICcuL3N0YXRlL3N0YXRlUmVnaXN0cnknO1xuaW1wb3J0IHsgU3RhdGVTZXJ2aWNlIH0gZnJvbSAnLi9zdGF0ZS9zdGF0ZVNlcnZpY2UnO1xuaW1wb3J0IHsgVUlSb3V0ZXJHbG9iYWxzIH0gZnJvbSAnLi9nbG9iYWxzJztcbmltcG9ydCB7IHZhbHVlcywgcmVtb3ZlRnJvbSB9IGZyb20gJy4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBVcmxTZXJ2aWNlIH0gZnJvbSAnLi91cmwvdXJsU2VydmljZSc7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4vY29tbW9uL3RyYWNlJztcbi8qKiBAaGlkZGVuICovXG52YXIgX3JvdXRlckluc3RhbmNlID0gMDtcbi8qKlxuICogVGhlIG1hc3RlciBjbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGFuIGluc3RhbmNlIG9mIFVJLVJvdXRlci5cbiAqXG4gKiBVSS1Sb3V0ZXIgKGZvciBlYWNoIHNwZWNpZmljIGZyYW1ld29yaykgd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBkdXJpbmcgYm9vdHN0cmFwLlxuICogVGhpcyBjbGFzcyBpbnN0YW50aWF0ZXMgYW5kIHdpcmVzIHRoZSBVSS1Sb3V0ZXIgc2VydmljZXMgdG9nZXRoZXIuXG4gKlxuICogQWZ0ZXIgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFVJUm91dGVyIGNsYXNzIGlzIGNyZWF0ZWQsIGl0IHNob3VsZCBiZSBjb25maWd1cmVkIGZvciB5b3VyIGFwcC5cbiAqIEZvciBpbnN0YW5jZSwgYXBwIHN0YXRlcyBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1VJUm91dGVyLnN0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiAtLS1cbiAqXG4gKiBOb3JtYWxseSB0aGUgZnJhbWV3b3JrIGNvZGUgd2lsbCBib290c3RyYXAgVUktUm91dGVyLlxuICogSWYgeW91IGFyZSBib290c3RyYXBwaW5nIFVJUm91dGVyIG1hbnVhbGx5LCB0ZWxsIGl0IHRvIG1vbml0b3IgdGhlIFVSTCBieSBjYWxsaW5nXG4gKiBbW1VybFNlcnZpY2UubGlzdGVuXV0gdGhlbiBbW1VybFNlcnZpY2Uuc3luY11dLlxuICovXG52YXIgVUlSb3V0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgVUlSb3V0ZXJgIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIGxvY2F0aW9uU2VydmljZSBhIFtbTG9jYXRpb25TZXJ2aWNlc11dIGltcGxlbWVudGF0aW9uXG4gICAgICogQHBhcmFtIGxvY2F0aW9uQ29uZmlnIGEgW1tMb2NhdGlvbkNvbmZpZ11dIGltcGxlbWVudGF0aW9uXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICovXG4gICAgZnVuY3Rpb24gVUlSb3V0ZXIobG9jYXRpb25TZXJ2aWNlLCBsb2NhdGlvbkNvbmZpZykge1xuICAgICAgICBpZiAobG9jYXRpb25TZXJ2aWNlID09PSB2b2lkIDApIHsgbG9jYXRpb25TZXJ2aWNlID0gVXJsU2VydmljZS5sb2NhdGlvblNlcnZpY2VTdHViOyB9XG4gICAgICAgIGlmIChsb2NhdGlvbkNvbmZpZyA9PT0gdm9pZCAwKSB7IGxvY2F0aW9uQ29uZmlnID0gVXJsU2VydmljZS5sb2NhdGlvbkNvbmZpZ1N0dWI7IH1cbiAgICAgICAgdGhpcy5sb2NhdGlvblNlcnZpY2UgPSBsb2NhdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubG9jYXRpb25Db25maWcgPSBsb2NhdGlvbkNvbmZpZztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy4kaWQgPSBfcm91dGVySW5zdGFuY2UrKztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGlzcG9zYWJsZXMgPSBbXTtcbiAgICAgICAgLyoqIFByb3ZpZGVzIHRyYWNlIGluZm9ybWF0aW9uIHRvIHRoZSBjb25zb2xlICovXG4gICAgICAgIHRoaXMudHJhY2UgPSB0cmFjZTtcbiAgICAgICAgLyoqIFByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gdWktdmlldyBzeW5jaHJvbml6YXRpb24gKi9cbiAgICAgICAgdGhpcy52aWV3U2VydmljZSA9IG5ldyBWaWV3U2VydmljZSh0aGlzKTtcbiAgICAgICAgLyoqIEdsb2JhbCByb3V0ZXIgc3RhdGUgKi9cbiAgICAgICAgdGhpcy5nbG9iYWxzID0gbmV3IFVJUm91dGVyR2xvYmFscygpO1xuICAgICAgICAvKiogUHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byBUcmFuc2l0aW9ucyAqL1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25TZXJ2aWNlID0gbmV3IFRyYW5zaXRpb25TZXJ2aWNlKHRoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVwcmVjYXRlZCBmb3IgcHVibGljIHVzZS4gVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWQuXG4gICAgICAgICAqIEBkZXByZWNhdGVkIFVzZSBbW3VybFNlcnZpY2VdXSBpbnN0ZWFkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVybE1hdGNoZXJGYWN0b3J5ID0gbmV3IFVybE1hdGNoZXJGYWN0b3J5KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXByZWNhdGVkIGZvciBwdWJsaWMgdXNlLiBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZC5cbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXJsUm91dGVyID0gbmV3IFVybFJvdXRlcih0aGlzKTtcbiAgICAgICAgLyoqIFByb3ZpZGVzIGEgcmVnaXN0cnkgZm9yIHN0YXRlcywgYW5kIHJlbGF0ZWQgcmVnaXN0cmF0aW9uIHNlcnZpY2VzICovXG4gICAgICAgIHRoaXMuc3RhdGVSZWdpc3RyeSA9IG5ldyBTdGF0ZVJlZ2lzdHJ5KHRoaXMpO1xuICAgICAgICAvKiogUHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byBzdGF0ZXMgKi9cbiAgICAgICAgdGhpcy5zdGF0ZVNlcnZpY2UgPSBuZXcgU3RhdGVTZXJ2aWNlKHRoaXMpO1xuICAgICAgICAvKiogUHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byB0aGUgVVJMICovXG4gICAgICAgIHRoaXMudXJsU2VydmljZSA9IG5ldyBVcmxTZXJ2aWNlKHRoaXMpO1xuICAgICAgICAvKiogQGhpZGRlbiBwbHVnaW4gaW5zdGFuY2VzIGFyZSByZWdpc3RlcmVkIGhlcmUgKi9cbiAgICAgICAgdGhpcy5fcGx1Z2lucyA9IHt9O1xuICAgICAgICB0aGlzLnZpZXdTZXJ2aWNlLl9wbHVnaW5hcGkuX3Jvb3RWaWV3Q29udGV4dCh0aGlzLnN0YXRlUmVnaXN0cnkucm9vdCgpKTtcbiAgICAgICAgdGhpcy5nbG9iYWxzLiRjdXJyZW50ID0gdGhpcy5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKTtcbiAgICAgICAgdGhpcy5nbG9iYWxzLmN1cnJlbnQgPSB0aGlzLmdsb2JhbHMuJGN1cnJlbnQuc2VsZjtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMuZ2xvYmFscyk7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZSh0aGlzLnN0YXRlU2VydmljZSk7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZSh0aGlzLnN0YXRlUmVnaXN0cnkpO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy50cmFuc2l0aW9uU2VydmljZSk7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZSh0aGlzLnVybFJvdXRlcik7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZShsb2NhdGlvblNlcnZpY2UpO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGUobG9jYXRpb25Db25maWcpO1xuICAgIH1cbiAgICAvKiogUmVnaXN0ZXJzIGFuIG9iamVjdCB0byBiZSBub3RpZmllZCB3aGVuIHRoZSByb3V0ZXIgaXMgZGlzcG9zZWQgKi9cbiAgICBVSVJvdXRlci5wcm90b3R5cGUuZGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlKSB7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZGlzcG9zYWJsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGlzIHJvdXRlciBpbnN0YW5jZVxuICAgICAqXG4gICAgICogV2hlbiBjYWxsZWQsIGNsZWFycyByZXNvdXJjZXMgcmV0YWluZWQgYnkgdGhlIHJvdXRlciBieSBjYWxsaW5nIGBkaXNwb3NlKHRoaXMpYCBvbiBhbGxcbiAgICAgKiByZWdpc3RlcmVkIFtbZGlzcG9zYWJsZV1dIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBPciwgaWYgYSBgZGlzcG9zYWJsZWAgb2JqZWN0IGlzIHByb3ZpZGVkLCBjYWxscyBgZGlzcG9zZSh0aGlzKWAgb24gdGhhdCBvYmplY3Qgb25seS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkaXNwb3NhYmxlIChvcHRpb25hbCkgdGhlIGRpc3Bvc2FibGUgdG8gZGlzcG9zZVxuICAgICAqL1xuICAgIFVJUm91dGVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKGRpc3Bvc2FibGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGRpc3Bvc2FibGUgJiYgaXNGdW5jdGlvbihkaXNwb3NhYmxlLmRpc3Bvc2UpKSB7XG4gICAgICAgICAgICBkaXNwb3NhYmxlLmRpc3Bvc2UodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMuc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHR5cGVvZiBkLmRpc3Bvc2UgPT09ICdmdW5jdGlvbicgJiYgZC5kaXNwb3NlKF90aGlzKTtcbiAgICAgICAgICAgICAgICByZW1vdmVGcm9tKF90aGlzLl9kaXNwb3NhYmxlcywgZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkgeyB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHBsdWdpbiB0byBVSS1Sb3V0ZXJcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGFkZHMgYSBVSS1Sb3V0ZXIgUGx1Z2luLlxuICAgICAqIEEgcGx1Z2luIGNhbiBlbmhhbmNlIG9yIGNoYW5nZSBVSS1Sb3V0ZXIgYmVoYXZpb3IgdXNpbmcgYW55IHB1YmxpYyBBUEkuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQgeyBNeUNvb2xQbHVnaW4gfSBmcm9tIFwidWktcm91dGVyLWNvb2wtcGx1Z2luXCI7XG4gICAgICpcbiAgICAgKiB2YXIgcGx1Z2luID0gcm91dGVyLmFkZFBsdWdpbihNeUNvb2xQbHVnaW4pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIFBsdWdpbiBhdXRob3JpbmdcbiAgICAgKlxuICAgICAqIEEgcGx1Z2luIGlzIHNpbXBseSBhIGNsYXNzIChvciBjb25zdHJ1Y3RvciBmdW5jdGlvbikgd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZSBhbmQgKG9wdGlvbmFsbHkpIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhlIHBsdWdpbiBjYW4gaW1wbGVtZW50IGl0cyBmdW5jdGlvbmFsaXR5IHVzaW5nIGFueSBvZiB0aGUgcHVibGljIEFQSXMgb2YgW1tVSVJvdXRlcl1dLlxuICAgICAqIEZvciBleGFtcGxlLCBpdCBtYXkgY29uZmlndXJlIHJvdXRlciBvcHRpb25zIG9yIGFkZCBhIFRyYW5zaXRpb24gSG9vay5cbiAgICAgKlxuICAgICAqIFRoZSBwbHVnaW4gY2FuIHRoZW4gYmUgcHVibGlzaGVkIGFzIGEgc2VwYXJhdGUgbW9kdWxlLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogZXhwb3J0IGNsYXNzIE15QXV0aFBsdWdpbiBpbXBsZW1lbnRzIFVJUm91dGVyUGx1Z2luIHtcbiAgICAgKiAgIGNvbnN0cnVjdG9yKHJvdXRlcjogVUlSb3V0ZXIsIG9wdGlvbnM6IGFueSkge1xuICAgICAqICAgICB0aGlzLm5hbWUgPSBcIk15QXV0aFBsdWdpblwiO1xuICAgICAqICAgICBsZXQgJHRyYW5zaXRpb25zID0gcm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xuICAgICAqICAgICBsZXQgJHN0YXRlID0gcm91dGVyLnN0YXRlU2VydmljZTtcbiAgICAgKlxuICAgICAqICAgICBsZXQgYXV0aENyaXRlcmlhID0ge1xuICAgICAqICAgICAgIHRvOiAoc3RhdGUpID0+IHN0YXRlLmRhdGEgJiYgc3RhdGUuZGF0YS5yZXF1aXJlc0F1dGhcbiAgICAgKiAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICBmdW5jdGlvbiBhdXRoSG9vayh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKSB7XG4gICAgICogICAgICAgbGV0IGF1dGhTZXJ2aWNlID0gdHJhbnNpdGlvbi5pbmplY3RvcigpLmdldCgnQXV0aFNlcnZpY2UnKTtcbiAgICAgKiAgICAgICBpZiAoIWF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICogICAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldCgnbG9naW4nKTtcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH1cbiAgICAgKlxuICAgICAqICAgICAkdHJhbnNpdGlvbnMub25TdGFydChhdXRoQ3JpdGVyaWEsIGF1dGhIb29rKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGx1Z2luIG9uZSBvZjpcbiAgICAgKiAgICAgICAgLSBhIHBsdWdpbiBjbGFzcyB3aGljaCBpbXBsZW1lbnRzIFtbVUlSb3V0ZXJQbHVnaW5dXVxuICAgICAqICAgICAgICAtIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIGEgW1tVSVJvdXRlclBsdWdpbl1dIHdoaWNoIGFjY2VwdHMgYSBbW1VJUm91dGVyXV0gaW5zdGFuY2VcbiAgICAgKiAgICAgICAgLSBhIGZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZSBhbmQgcmV0dXJucyBhIFtbVUlSb3V0ZXJQbHVnaW5dXSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnMgdG8gcGFzcyB0byB0aGUgcGx1Z2luIGNsYXNzL2ZhY3RvcnlcbiAgICAgKiBAcmV0dXJucyB0aGUgcmVnaXN0ZXJlZCBwbHVnaW4gaW5zdGFuY2VcbiAgICAgKi9cbiAgICBVSVJvdXRlci5wcm90b3R5cGUucGx1Z2luID0gZnVuY3Rpb24gKHBsdWdpbiwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB2YXIgcGx1Z2luSW5zdGFuY2UgPSBuZXcgcGx1Z2luKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIXBsdWdpbkluc3RhbmNlLm5hbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHByb3BlcnR5IGBuYW1lYCBtaXNzaW5nIG9uIHBsdWdpbjogJyArIHBsdWdpbkluc3RhbmNlKTtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChwbHVnaW5JbnN0YW5jZSk7XG4gICAgICAgIHJldHVybiAodGhpcy5fcGx1Z2luc1twbHVnaW5JbnN0YW5jZS5uYW1lXSA9IHBsdWdpbkluc3RhbmNlKTtcbiAgICB9O1xuICAgIFVJUm91dGVyLnByb3RvdHlwZS5nZXRQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luTmFtZSkge1xuICAgICAgICByZXR1cm4gcGx1Z2luTmFtZSA/IHRoaXMuX3BsdWdpbnNbcGx1Z2luTmFtZV0gOiB2YWx1ZXModGhpcy5fcGx1Z2lucyk7XG4gICAgfTtcbiAgICByZXR1cm4gVUlSb3V0ZXI7XG59KCkpO1xuZXhwb3J0IHsgVUlSb3V0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlci5qcy5tYXAiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4uL3Jlc29sdmUnO1xuaW1wb3J0IHsgaW5BcnJheSwgdW5pcVIsIHVubmVzdFIsIHZhbHVlcyB9IGZyb20gJy4uL2NvbW1vbic7XG5mdW5jdGlvbiBhZGRDb3JlUmVzb2x2YWJsZXModHJhbnMpIHtcbiAgICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoVUlSb3V0ZXIsIHRyYW5zLnJvdXRlciksICcnKTtcbiAgICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoVHJhbnNpdGlvbiwgdHJhbnMpLCAnJyk7XG4gICAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKCckdHJhbnNpdGlvbiQnLCB0cmFucyksICcnKTtcbiAgICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoJyRzdGF0ZVBhcmFtcycsIHRyYW5zLnBhcmFtcygpKSwgJycpO1xuICAgIHRyYW5zLmVudGVyaW5nKCkuZm9yRWFjaChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKCckc3RhdGUkJywgc3RhdGUpLCBzdGF0ZSk7XG4gICAgfSk7XG59XG5leHBvcnQgdmFyIHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uQ3JlYXRlKHt9LCBhZGRDb3JlUmVzb2x2YWJsZXMpO1xufTtcbnZhciBUUkFOU0lUSU9OX1RPS0VOUyA9IFsnJHRyYW5zaXRpb24kJywgVHJhbnNpdGlvbl07XG52YXIgaXNUcmFuc2l0aW9uID0gaW5BcnJheShUUkFOU0lUSU9OX1RPS0VOUyk7XG4vLyBSZWZlcmVuY2VzIHRvIFRyYW5zaXRpb24gaW4gdGhlIHRyZWVDaGFuZ2VzIHBhdGhub2RlcyBtYWtlcyBhbGxcbi8vIHByZXZpb3VzIFRyYW5zaXRpb25zIHJlYWNoYWJsZSBpbiBtZW1vcnksIGNhdXNpbmcgYSBtZW1vcnkgbGVha1xuLy8gVGhpcyBmdW5jdGlvbiByZW1vdmVzIHJlc29sdmVzIGZvciAnJHRyYW5zaXRpb24kJyBhbmQgYFRyYW5zaXRpb25gIGZyb20gdGhlIHRyZWVDaGFuZ2VzLlxuLy8gRG8gbm90IHVzZSB0aGlzIG9uIGN1cnJlbnQgdHJhbnNpdGlvbnMsIG9ubHkgb24gb2xkIG9uZXMuXG5leHBvcnQgdmFyIHRyZWVDaGFuZ2VzQ2xlYW51cCA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgIHZhciBub2RlcyA9IHZhbHVlcyh0cmFucy50cmVlQ2hhbmdlcygpKVxuICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAucmVkdWNlKHVuaXFSLCBbXSk7XG4gICAgLy8gSWYgdGhlIHJlc29sdmFibGUgaXMgYSBUcmFuc2l0aW9uLCByZXR1cm4gYSBuZXcgcmVzb2x2YWJsZSB3aXRoIG51bGwgZGF0YVxuICAgIHZhciByZXBsYWNlVHJhbnNpdGlvbldpdGhOdWxsID0gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNpdGlvbihyLnRva2VuKSA/IFJlc29sdmFibGUuZnJvbURhdGEoci50b2tlbiwgbnVsbCkgOiByO1xuICAgIH07XG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBub2RlLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5tYXAocmVwbGFjZVRyYW5zaXRpb25XaXRoTnVsbCk7XG4gICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29yZVJlc29sdmFibGVzLmpzLm1hcCIsIi8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzRnVuY3Rpb24gfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS90YXJnZXRTdGF0ZSc7XG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCByZWRpcmVjdHMgdG8gYSBkaWZmZXJlbnQgc3RhdGUgb3IgcGFyYW1zXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7IHRvOiAoc3RhdGUpID0+ICEhc3RhdGUucmVkaXJlY3RUbyB9LCByZWRpcmVjdEhvb2spO2BcbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlZGlyZWN0VG9dXVxuICovXG52YXIgcmVkaXJlY3RUb0hvb2sgPSBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICB2YXIgcmVkaXJlY3QgPSB0cmFucy50bygpLnJlZGlyZWN0VG87XG4gICAgaWYgKCFyZWRpcmVjdClcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciAkc3RhdGUgPSB0cmFucy5yb3V0ZXIuc3RhdGVTZXJ2aWNlO1xuICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgaWYgKCFyZXN1bHQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBUYXJnZXRTdGF0ZSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGlmIChpc1N0cmluZyhyZXN1bHQpKVxuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQocmVzdWx0LCB0cmFucy5wYXJhbXMoKSwgdHJhbnMub3B0aW9ucygpKTtcbiAgICAgICAgaWYgKHJlc3VsdFsnc3RhdGUnXSB8fCByZXN1bHRbJ3BhcmFtcyddKVxuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQocmVzdWx0WydzdGF0ZSddIHx8IHRyYW5zLnRvKCksIHJlc3VsdFsncGFyYW1zJ10gfHwgdHJhbnMucGFyYW1zKCksIHRyYW5zLm9wdGlvbnMoKSk7XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uKHJlZGlyZWN0KSkge1xuICAgICAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbihyZWRpcmVjdCh0cmFucykpLnRoZW4oaGFuZGxlUmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRsZVJlc3VsdChyZWRpcmVjdCk7XG59O1xuZXhwb3J0IHZhciByZWdpc3RlclJlZGlyZWN0VG9Ib29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoeyB0bzogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLnJlZGlyZWN0VG87IH0gfSwgcmVkaXJlY3RUb0hvb2spO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZGlyZWN0VG8uanMubWFwIiwiLyoqXG4gKiBBIGZhY3Rvcnkgd2hpY2ggY3JlYXRlcyBhbiBvbkVudGVyLCBvbkV4aXQgb3Igb25SZXRhaW4gdHJhbnNpdGlvbiBob29rIGZ1bmN0aW9uXG4gKlxuICogVGhlIHJldHVybmVkIGZ1bmN0aW9uIGludm9rZXMgdGhlIChmb3IgaW5zdGFuY2UpIHN0YXRlLm9uRW50ZXIgaG9vayB3aGVuIHRoZVxuICogc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKGhvb2tOYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0cmFuc2l0aW9uLCBzdGF0ZSkge1xuICAgICAgICB2YXIgX3N0YXRlID0gc3RhdGUuJCRzdGF0ZSgpO1xuICAgICAgICB2YXIgaG9va0ZuID0gX3N0YXRlW2hvb2tOYW1lXTtcbiAgICAgICAgcmV0dXJuIGhvb2tGbih0cmFuc2l0aW9uLCBzdGF0ZSk7XG4gICAgfTtcbn1cbi8qKlxuICogVGhlIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0gZm9yIG9uRXhpdFxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIGlzIGJlaW5nIGV4aXRlZCwgdGhlIHN0YXRlJ3MgLm9uRXhpdCBmdW5jdGlvbiBpcyBpbnZva2VkLlxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uRXhpdCh7IGV4aXRpbmc6IChzdGF0ZSkgPT4gISFzdGF0ZS5vbkV4aXQgfSwgb25FeGl0SG9vayk7YFxuICpcbiAqIFNlZTogW1tJSG9va1JlZ2lzdHJ5Lm9uRXhpdF1dXG4gKi9cbnZhciBvbkV4aXRIb29rID0gbWFrZUVudGVyRXhpdFJldGFpbkhvb2soJ29uRXhpdCcpO1xuZXhwb3J0IHZhciByZWdpc3Rlck9uRXhpdEhvb2sgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25FeGl0KHsgZXhpdGluZzogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLm9uRXhpdDsgfSB9LCBvbkV4aXRIb29rKTtcbn07XG4vKipcbiAqIFRoZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciBvblJldGFpblxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIHdhcyBhbHJlYWR5IGVudGVyZWQsIGFuZCBpcyBub3QgYmVpbmcgZXhpdGVkIG9yIHJlLWVudGVyZWQsIHRoZSBzdGF0ZSdzIC5vblJldGFpbiBmdW5jdGlvbiBpcyBpbnZva2VkLlxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uUmV0YWluKHsgcmV0YWluZWQ6IChzdGF0ZSkgPT4gISFzdGF0ZS5vblJldGFpbiB9LCBvblJldGFpbkhvb2spO2BcbiAqXG4gKiBTZWU6IFtbSUhvb2tSZWdpc3RyeS5vblJldGFpbl1dXG4gKi9cbnZhciBvblJldGFpbkhvb2sgPSBtYWtlRW50ZXJFeGl0UmV0YWluSG9vaygnb25SZXRhaW4nKTtcbmV4cG9ydCB2YXIgcmVnaXN0ZXJPblJldGFpbkhvb2sgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25SZXRhaW4oeyByZXRhaW5lZDogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLm9uUmV0YWluOyB9IH0sIG9uUmV0YWluSG9vayk7XG59O1xuLyoqXG4gKiBUaGUgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXSBmb3Igb25FbnRlclxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIGlzIGJlaW5nIGVudGVyZWQsIHRoZSBzdGF0ZSdzIC5vbkVudGVyIGZ1bmN0aW9uIGlzIGludm9rZWQuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiAoc3RhdGUpID0+ICEhc3RhdGUub25FbnRlciB9LCBvbkVudGVySG9vayk7YFxuICpcbiAqIFNlZTogW1tJSG9va1JlZ2lzdHJ5Lm9uRW50ZXJdXVxuICovXG52YXIgb25FbnRlckhvb2sgPSBtYWtlRW50ZXJFeGl0UmV0YWluSG9vaygnb25FbnRlcicpO1xuZXhwb3J0IHZhciByZWdpc3Rlck9uRW50ZXJIb29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uRW50ZXIoeyBlbnRlcmluZzogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLm9uRW50ZXI7IH0gfSwgb25FbnRlckhvb2spO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9uRW50ZXJFeGl0UmV0YWluLmpzLm1hcCIsIi8qKiBAbW9kdWxlIGhvb2tzICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IFJlc29sdmVDb250ZXh0IH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZlQ29udGV4dCc7XG5pbXBvcnQgeyB2YWwgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmV4cG9ydCB2YXIgUkVTT0xWRV9IT09LX1BSSU9SSVRZID0gMTAwMDtcbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgRUFHRVIgUmVzb2x2YWJsZXMgaW4gdGhlIFRvIFBhdGhcbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCBlYWdlclJlc29sdmVQYXRoLCB7IHByaW9yaXR5OiAxMDAwIH0pO2BcbiAqXG4gKiBXaGVuIGEgVHJhbnNpdGlvbiBzdGFydHMsIHRoaXMgaG9vayByZXNvbHZlcyBhbGwgdGhlIEVBR0VSIFJlc29sdmFibGVzLCB3aGljaCB0aGUgdHJhbnNpdGlvbiB0aGVuIHdhaXRzIGZvci5cbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXVxuICovXG52YXIgZWFnZXJSZXNvbHZlUGF0aCA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQodHJhbnMudHJlZUNoYW5nZXMoKS50bykucmVzb2x2ZVBhdGgoJ0VBR0VSJywgdHJhbnMpLnRoZW4obm9vcCk7XG59O1xuZXhwb3J0IHZhciByZWdpc3RlckVhZ2VyUmVzb2x2ZVBhdGggPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7fSwgZWFnZXJSZXNvbHZlUGF0aCwgeyBwcmlvcml0eTogUkVTT0xWRV9IT09LX1BSSU9SSVRZIH0pO1xufTtcbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgTEFaWSBSZXNvbHZhYmxlcyBmb3IgdGhlIHN0YXRlIChhbmQgYWxsIGl0cyBhbmNlc3RvcnMpIGluIHRoZSBUbyBQYXRoXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiAoKSA9PiB0cnVlIH0sIGxhenlSZXNvbHZlU3RhdGUsIHsgcHJpb3JpdHk6IDEwMDAgfSk7YFxuICpcbiAqIFdoZW4gYSBTdGF0ZSBpcyBiZWluZyBlbnRlcmVkLCB0aGlzIGhvb2sgcmVzb2x2ZXMgYWxsIHRoZSBSZXNvbHZhYmxlcyBmb3IgdGhpcyBzdGF0ZSwgd2hpY2ggdGhlIHRyYW5zaXRpb24gdGhlbiB3YWl0cyBmb3IuXG4gKlxuICogU2VlIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV1cbiAqL1xudmFyIGxhenlSZXNvbHZlU3RhdGUgPSBmdW5jdGlvbiAodHJhbnMsIHN0YXRlKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcygpLnRvKVxuICAgICAgICAuc3ViQ29udGV4dChzdGF0ZS4kJHN0YXRlKCkpXG4gICAgICAgIC5yZXNvbHZlUGF0aCgnTEFaWScsIHRyYW5zKVxuICAgICAgICAudGhlbihub29wKTtcbn07XG5leHBvcnQgdmFyIHJlZ2lzdGVyTGF6eVJlc29sdmVTdGF0ZSA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkVudGVyKHsgZW50ZXJpbmc6IHZhbCh0cnVlKSB9LCBsYXp5UmVzb2x2ZVN0YXRlLCB7IHByaW9yaXR5OiBSRVNPTFZFX0hPT0tfUFJJT1JJVFkgfSk7XG59O1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHJlc29sdmVzIGFueSBkeW5hbWljYWxseSBhZGRlZCAoTEFaWSBvciBFQUdFUikgUmVzb2x2YWJsZXMuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25GaW5pc2goe30sIGVhZ2VyUmVzb2x2ZVBhdGgsIHsgcHJpb3JpdHk6IDEwMDAgfSk7YFxuICpcbiAqIEFmdGVyIGFsbCBlbnRlcmluZyBzdGF0ZXMgaGF2ZSBiZWVuIGVudGVyZWQsIHRoaXMgaG9vayByZXNvbHZlcyBhbnkgcmVtYWluaW5nIFJlc29sdmFibGVzLlxuICogVGhlc2UgYXJlIHR5cGljYWxseSBkeW5hbWljIHJlc29sdmVzIHdoaWNoIHdlcmUgYWRkZWQgYnkgc29tZSBUcmFuc2l0aW9uIEhvb2sgdXNpbmcgW1tUcmFuc2l0aW9uLmFkZFJlc29sdmFibGVdXS5cbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXVxuICovXG52YXIgcmVzb2x2ZVJlbWFpbmluZyA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQodHJhbnMudHJlZUNoYW5nZXMoKS50bykucmVzb2x2ZVBhdGgoJ0xBWlknLCB0cmFucykudGhlbihub29wKTtcbn07XG5leHBvcnQgdmFyIHJlZ2lzdGVyUmVzb2x2ZVJlbWFpbmluZyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkZpbmlzaCh7fSwgcmVzb2x2ZVJlbWFpbmluZywgeyBwcmlvcml0eTogUkVTT0xWRV9IT09LX1BSSU9SSVRZIH0pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc29sdmUuanMubWFwIiwiLyoqIEBtb2R1bGUgaG9va3MgKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHdhaXRzIGZvciB0aGUgdmlld3MgdG8gbG9hZFxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sIGxvYWRFbnRlcmluZ1ZpZXdzKTtgXG4gKlxuICogQWxsb3dzIHRoZSB2aWV3cyB0byBkbyBhc3luYyB3b3JrIGluIFtbVmlld0NvbmZpZy5sb2FkXV0gYmVmb3JlIHRoZSB0cmFuc2l0aW9uIGNvbnRpbnVlcy5cbiAqIEluIGFuZ3VsYXIgMSwgdGhpcyBpbmNsdWRlcyBsb2FkaW5nIHRoZSB0ZW1wbGF0ZXMuXG4gKi9cbnZhciBsb2FkRW50ZXJpbmdWaWV3cyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uKSB7XG4gICAgdmFyICRxID0gc2VydmljZXMuJHE7XG4gICAgdmFyIGVudGVyaW5nVmlld3MgPSB0cmFuc2l0aW9uLnZpZXdzKCdlbnRlcmluZycpO1xuICAgIGlmICghZW50ZXJpbmdWaWV3cy5sZW5ndGgpXG4gICAgICAgIHJldHVybjtcbiAgICByZXR1cm4gJHEuYWxsKGVudGVyaW5nVmlld3MubWFwKGZ1bmN0aW9uICh2aWV3KSB7IHJldHVybiAkcS53aGVuKHZpZXcubG9hZCgpKTsgfSkpLnRoZW4obm9vcCk7XG59O1xuZXhwb3J0IHZhciByZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uRmluaXNoKHt9LCBsb2FkRW50ZXJpbmdWaWV3cyk7XG59O1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIGFjdGl2YXRlcyB0aGUgbmV3IHZpZXdzIHdoZW4gYSB0cmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCBhY3RpdmF0ZVZpZXdzKTtgXG4gKlxuICogQWZ0ZXIgYSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLCB0aGlzIGhvb2sgZGVhY3RpdmF0ZXMgdGhlIG9sZCB2aWV3cyBmcm9tIHRoZSBwcmV2aW91cyBzdGF0ZSxcbiAqIGFuZCBhY3RpdmF0ZXMgdGhlIG5ldyB2aWV3cyBmcm9tIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqXG4gKiBTZWUgW1tWaWV3U2VydmljZV1dXG4gKi9cbnZhciBhY3RpdmF0ZVZpZXdzID0gZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcbiAgICB2YXIgZW50ZXJpbmdWaWV3cyA9IHRyYW5zaXRpb24udmlld3MoJ2VudGVyaW5nJyk7XG4gICAgdmFyIGV4aXRpbmdWaWV3cyA9IHRyYW5zaXRpb24udmlld3MoJ2V4aXRpbmcnKTtcbiAgICBpZiAoIWVudGVyaW5nVmlld3MubGVuZ3RoICYmICFleGl0aW5nVmlld3MubGVuZ3RoKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyICR2aWV3ID0gdHJhbnNpdGlvbi5yb3V0ZXIudmlld1NlcnZpY2U7XG4gICAgZXhpdGluZ1ZpZXdzLmZvckVhY2goZnVuY3Rpb24gKHZjKSB7IHJldHVybiAkdmlldy5kZWFjdGl2YXRlVmlld0NvbmZpZyh2Yyk7IH0pO1xuICAgIGVudGVyaW5nVmlld3MuZm9yRWFjaChmdW5jdGlvbiAodmMpIHsgcmV0dXJuICR2aWV3LmFjdGl2YXRlVmlld0NvbmZpZyh2Yyk7IH0pO1xuICAgICR2aWV3LnN5bmMoKTtcbn07XG5leHBvcnQgdmFyIHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIGFjdGl2YXRlVmlld3MpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXdzLmpzLm1hcCIsImltcG9ydCB7IGNvcHkgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCB1cGRhdGVzIGdsb2JhbCBVSS1Sb3V0ZXIgc3RhdGVcbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7fSwgdXBkYXRlR2xvYmFsU3RhdGUpO2BcbiAqXG4gKiBCZWZvcmUgYSBbW1RyYW5zaXRpb25dXSBzdGFydHMsIHVwZGF0ZXMgdGhlIGdsb2JhbCB2YWx1ZSBvZiBcInRoZSBjdXJyZW50IHRyYW5zaXRpb25cIiAoW1tHbG9iYWxzLnRyYW5zaXRpb25dXSkuXG4gKiBBZnRlciBhIHN1Y2Nlc3NmdWwgW1tUcmFuc2l0aW9uXV0sIHVwZGF0ZXMgdGhlIGdsb2JhbCB2YWx1ZXMgb2YgXCJ0aGUgY3VycmVudCBzdGF0ZVwiXG4gKiAoW1tHbG9iYWxzLmN1cnJlbnRdXSBhbmQgW1tHbG9iYWxzLiRjdXJyZW50XV0pIGFuZCBcInRoZSBjdXJyZW50IHBhcmFtIHZhbHVlc1wiIChbW0dsb2JhbHMucGFyYW1zXV0pLlxuICpcbiAqIFNlZSBhbHNvIHRoZSBkZXByZWNhdGVkIHByb3BlcnRpZXM6XG4gKiBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uXV0sIFtbU3RhdGVTZXJ2aWNlLmN1cnJlbnRdXSwgW1tTdGF0ZVNlcnZpY2UucGFyYW1zXV1cbiAqL1xudmFyIHVwZGF0ZUdsb2JhbFN0YXRlID0gZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgdmFyIGdsb2JhbHMgPSB0cmFucy5yb3V0ZXIuZ2xvYmFscztcbiAgICB2YXIgdHJhbnNpdGlvblN1Y2Nlc3NmdWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGdsb2JhbHMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLmVucXVldWUodHJhbnMpO1xuICAgICAgICBnbG9iYWxzLiRjdXJyZW50ID0gdHJhbnMuJHRvKCk7XG4gICAgICAgIGdsb2JhbHMuY3VycmVudCA9IGdsb2JhbHMuJGN1cnJlbnQuc2VsZjtcbiAgICAgICAgY29weSh0cmFucy5wYXJhbXMoKSwgZ2xvYmFscy5wYXJhbXMpO1xuICAgIH07XG4gICAgdmFyIGNsZWFyQ3VycmVudFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIERvIG5vdCBjbGVhciBnbG9iYWxzLnRyYW5zaXRpb24gaWYgYSBkaWZmZXJlbnQgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZCBpbiB0aGUgbWVhbnRpbWVcbiAgICAgICAgaWYgKGdsb2JhbHMudHJhbnNpdGlvbiA9PT0gdHJhbnMpXG4gICAgICAgICAgICBnbG9iYWxzLnRyYW5zaXRpb24gPSBudWxsO1xuICAgIH07XG4gICAgdHJhbnMub25TdWNjZXNzKHt9LCB0cmFuc2l0aW9uU3VjY2Vzc2Z1bCwgeyBwcmlvcml0eTogMTAwMDAgfSk7XG4gICAgdHJhbnMucHJvbWlzZS50aGVuKGNsZWFyQ3VycmVudFRyYW5zaXRpb24sIGNsZWFyQ3VycmVudFRyYW5zaXRpb24pO1xufTtcbmV4cG9ydCB2YXIgcmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkNyZWF0ZSh7fSwgdXBkYXRlR2xvYmFsU3RhdGUpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZUdsb2JhbHMuanMubWFwIiwiLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHVwZGF0ZXMgdGhlIFVSTCBhZnRlciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgdXBkYXRlVXJsKTtgXG4gKi9cbnZhciB1cGRhdGVVcmwgPSBmdW5jdGlvbiAodHJhbnNpdGlvbikge1xuICAgIHZhciBvcHRpb25zID0gdHJhbnNpdGlvbi5vcHRpb25zKCk7XG4gICAgdmFyICRzdGF0ZSA9IHRyYW5zaXRpb24ucm91dGVyLnN0YXRlU2VydmljZTtcbiAgICB2YXIgJHVybFJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyLnVybFJvdXRlcjtcbiAgICAvLyBEb250IHVwZGF0ZSB0aGUgdXJsIGluIHRoZXNlIHNpdHVhdGlvbnM6XG4gICAgLy8gVGhlIHRyYW5zaXRpb24gd2FzIHRyaWdnZXJlZCBieSBhIFVSTCBzeW5jIChvcHRpb25zLnNvdXJjZSA9PT0gJ3VybCcpXG4gICAgLy8gVGhlIHVzZXIgZG9lc24ndCB3YW50IHRoZSB1cmwgdG8gdXBkYXRlIChvcHRpb25zLmxvY2F0aW9uID09PSBmYWxzZSlcbiAgICAvLyBUaGUgZGVzdGluYXRpb24gc3RhdGUsIGFuZCBhbGwgcGFyZW50cyBoYXZlIG5vIG5hdmlnYWJsZSB1cmxcbiAgICBpZiAob3B0aW9ucy5zb3VyY2UgIT09ICd1cmwnICYmIG9wdGlvbnMubG9jYXRpb24gJiYgJHN0YXRlLiRjdXJyZW50Lm5hdmlnYWJsZSkge1xuICAgICAgICB2YXIgdXJsT3B0aW9ucyA9IHsgcmVwbGFjZTogb3B0aW9ucy5sb2NhdGlvbiA9PT0gJ3JlcGxhY2UnIH07XG4gICAgICAgICR1cmxSb3V0ZXIucHVzaCgkc3RhdGUuJGN1cnJlbnQubmF2aWdhYmxlLnVybCwgJHN0YXRlLnBhcmFtcywgdXJsT3B0aW9ucyk7XG4gICAgfVxuICAgICR1cmxSb3V0ZXIudXBkYXRlKHRydWUpO1xufTtcbmV4cG9ydCB2YXIgcmVnaXN0ZXJVcGRhdGVVcmwgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGVVcmwsIHsgcHJpb3JpdHk6IDk5OTkgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXJsLmpzLm1hcCIsImltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCBwZXJmb3JtcyBsYXp5IGxvYWRpbmdcbiAqXG4gKiBXaGVuIGVudGVyaW5nIGEgc3RhdGUgXCJhYmNcIiB3aGljaCBoYXMgYSBgbGF6eUxvYWRgIGZ1bmN0aW9uIGRlZmluZWQ6XG4gKiAtIEludm9rZSB0aGUgYGxhenlMb2FkYCBmdW5jdGlvbiAodW5sZXNzIGl0IGlzIGFscmVhZHkgaW4gcHJvY2VzcylcbiAqICAgLSBGbGFnIHRoZSBob29rIGZ1bmN0aW9uIGFzIFwiaW4gcHJvY2Vzc1wiXG4gKiAgIC0gVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBwcm9taXNlICh0aGF0IHJlc29sdmVzIHdoZW4gbGF6eSBsb2FkaW5nIGlzIGNvbXBsZXRlKVxuICogLSBXYWl0IGZvciB0aGUgcHJvbWlzZSB0byBzZXR0bGVcbiAqICAgLSBJZiB0aGUgcHJvbWlzZSByZXNvbHZlcyB0byBhIFtbTGF6eUxvYWRSZXN1bHRdXSwgdGhlbiByZWdpc3RlciB0aG9zZSBzdGF0ZXNcbiAqICAgLSBGbGFnIHRoZSBob29rIGZ1bmN0aW9uIGFzIFwibm90IGluIHByb2Nlc3NcIlxuICogLSBJZiB0aGUgaG9vayB3YXMgc3VjY2Vzc2Z1bFxuICogICAtIFJlbW92ZSB0aGUgYGxhenlMb2FkYCBmdW5jdGlvbiBmcm9tIHRoZSBzdGF0ZSBkZWNsYXJhdGlvblxuICogLSBJZiBhbGwgdGhlIGhvb2tzIHdlcmUgc3VjY2Vzc2Z1bFxuICogICAtIFJldHJ5IHRoZSB0cmFuc2l0aW9uIChieSByZXR1cm5pbmcgYSBUYXJnZXRTdGF0ZSlcbiAqXG4gKiBgYGBcbiAqIC5zdGF0ZSgnYWJjJywge1xuICogICBjb21wb25lbnQ6ICdmb29Db21wb25lbnQnLFxuICogICBsYXp5TG9hZDogKCkgPT4gU3lzdGVtLmltcG9ydCgnLi9mb29Db21wb25lbnQnKVxuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ubGF6eUxvYWRdXVxuICovXG52YXIgbGF6eUxvYWRIb29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcbiAgICB2YXIgcm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXI7XG4gICAgZnVuY3Rpb24gcmV0cnlUcmFuc2l0aW9uKCkge1xuICAgICAgICBpZiAodHJhbnNpdGlvbi5vcmlnaW5hbFRyYW5zaXRpb24oKS5vcHRpb25zKCkuc291cmNlICE9PSAndXJsJykge1xuICAgICAgICAgICAgLy8gVGhlIG9yaWdpbmFsIHRyYW5zaXRpb24gd2FzIG5vdCB0cmlnZ2VyZWQgdmlhIHVybCBzeW5jXG4gICAgICAgICAgICAvLyBUaGUgbGF6eSBzdGF0ZSBzaG91bGQgYmUgbG9hZGVkIG5vdywgc28gcmUtdHJ5IHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uXG4gICAgICAgICAgICB2YXIgb3JpZyA9IHRyYW5zaXRpb24udGFyZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXIuc3RhdGVTZXJ2aWNlLnRhcmdldChvcmlnLmlkZW50aWZpZXIoKSwgb3JpZy5wYXJhbXMoKSwgb3JpZy5vcHRpb25zKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIHdhcyB0cmlnZ2VyZWQgdmlhIHVybCBzeW5jXG4gICAgICAgIC8vIFJ1biB0aGUgVVJMIHJ1bGVzIGFuZCBmaW5kIHRoZSBiZXN0IG1hdGNoXG4gICAgICAgIHZhciAkdXJsID0gcm91dGVyLnVybFNlcnZpY2U7XG4gICAgICAgIHZhciByZXN1bHQgPSAkdXJsLm1hdGNoKCR1cmwucGFydHMoKSk7XG4gICAgICAgIHZhciBydWxlID0gcmVzdWx0ICYmIHJlc3VsdC5ydWxlO1xuICAgICAgICAvLyBJZiB0aGUgYmVzdCBtYXRjaCBpcyBhIHN0YXRlLCByZWRpcmVjdCB0aGUgdHJhbnNpdGlvbiAoaW5zdGVhZFxuICAgICAgICAvLyBvZiBjYWxsaW5nIHN5bmMoKSB3aGljaCBzdXBlcnNlZGVzIHRoZSBjdXJyZW50IHRyYW5zaXRpb24pXG4gICAgICAgIGlmIChydWxlICYmIHJ1bGUudHlwZSA9PT0gJ1NUQVRFJykge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gcnVsZS5zdGF0ZTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSByZXN1bHQubWF0Y2g7XG4gICAgICAgICAgICByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZS50YXJnZXQoc3RhdGUsIHBhcmFtcywgdHJhbnNpdGlvbi5vcHRpb25zKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vIG1hdGNoaW5nIHN0YXRlIGZvdW5kLCBzbyBsZXQgLnN5bmMoKSBjaG9vc2UgdGhlIGJlc3Qgbm9uLXN0YXRlIG1hdGNoL290aGVyd2lzZVxuICAgICAgICByb3V0ZXIudXJsU2VydmljZS5zeW5jKCk7XG4gICAgfVxuICAgIHZhciBwcm9taXNlcyA9IHRyYW5zaXRpb25cbiAgICAgICAgLmVudGVyaW5nKClcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuICEhc3RhdGUuJCRzdGF0ZSgpLmxhenlMb2FkOyB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gbGF6eUxvYWRTdGF0ZSh0cmFuc2l0aW9uLCBzdGF0ZSk7IH0pO1xuICAgIHJldHVybiBzZXJ2aWNlcy4kcS5hbGwocHJvbWlzZXMpLnRoZW4ocmV0cnlUcmFuc2l0aW9uKTtcbn07XG5leHBvcnQgdmFyIHJlZ2lzdGVyTGF6eUxvYWRIb29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHsgZW50ZXJpbmc6IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gISFzdGF0ZS5sYXp5TG9hZDsgfSB9LCBsYXp5TG9hZEhvb2spO1xufTtcbi8qKlxuICogSW52b2tlcyBhIHN0YXRlJ3MgbGF6eSBsb2FkIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHRyYW5zaXRpb24gYSBUcmFuc2l0aW9uIGNvbnRleHRcbiAqIEBwYXJhbSBzdGF0ZSB0aGUgc3RhdGUgdG8gbGF6eSBsb2FkXG4gKiBAcmV0dXJucyBBIHByb21pc2UgZm9yIHRoZSBsYXp5IGxvYWQgcmVzdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXp5TG9hZFN0YXRlKHRyYW5zaXRpb24sIHN0YXRlKSB7XG4gICAgdmFyIGxhenlMb2FkRm4gPSBzdGF0ZS4kJHN0YXRlKCkubGF6eUxvYWQ7XG4gICAgLy8gU3RvcmUvZ2V0IHRoZSBsYXp5IGxvYWQgcHJvbWlzZSBvbi9mcm9tIHRoZSBob29rZm4gc28gaXQgZG9lc24ndCBnZXQgcmUtaW52b2tlZFxuICAgIHZhciBwcm9taXNlID0gbGF6eUxvYWRGblsnX3Byb21pc2UnXTtcbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBkZWxldGUgc3RhdGUubGF6eUxvYWQ7XG4gICAgICAgICAgICBkZWxldGUgc3RhdGUuJCRzdGF0ZSgpLmxhenlMb2FkO1xuICAgICAgICAgICAgZGVsZXRlIGxhenlMb2FkRm5bJ19wcm9taXNlJ107XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBkZWxldGUgbGF6eUxvYWRGblsnX3Byb21pc2UnXTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS5yZWplY3QoZXJyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcHJvbWlzZSA9IGxhenlMb2FkRm5bJ19wcm9taXNlJ10gPSBzZXJ2aWNlcy4kcVxuICAgICAgICAgICAgLndoZW4obGF6eUxvYWRGbih0cmFuc2l0aW9uLCBzdGF0ZSkpXG4gICAgICAgICAgICAudGhlbih1cGRhdGVTdGF0ZVJlZ2lzdHJ5KVxuICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuICAgIH1cbiAgICAvKiogUmVnaXN0ZXIgYW55IGxhenkgbG9hZGVkIHN0YXRlIGRlZmluaXRpb25zICovXG4gICAgZnVuY3Rpb24gdXBkYXRlU3RhdGVSZWdpc3RyeShyZXN1bHQpIHtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiBBcnJheS5pc0FycmF5KHJlc3VsdC5zdGF0ZXMpKSB7XG4gICAgICAgICAgICByZXN1bHQuc3RhdGVzLmZvckVhY2goZnVuY3Rpb24gKF9zdGF0ZSkgeyByZXR1cm4gdHJhbnNpdGlvbi5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5yZWdpc3Rlcihfc3RhdGUpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhenlMb2FkLmpzLm1hcCIsImltcG9ydCB7IFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi90cmFuc2l0aW9uSG9vayc7XG4vKipcbiAqIFRoaXMgY2xhc3MgZGVmaW5lcyBhIHR5cGUgb2YgaG9vaywgc3VjaCBhcyBgb25CZWZvcmVgIG9yIGBvbkVudGVyYC5cbiAqIFBsdWdpbnMgY2FuIGRlZmluZSBjdXN0b20gaG9vayB0eXBlcywgc3VjaCBhcyBzdGlja3kgc3RhdGVzIGRvZXMgZm9yIGBvbkluYWN0aXZlYC5cbiAqXG4gKiBAaW50ZXJhbGFwaVxuICovXG52YXIgVHJhbnNpdGlvbkV2ZW50VHlwZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbmZlcnJhYmxlLXR5cGVzICovXG4gICAgZnVuY3Rpb24gVHJhbnNpdGlvbkV2ZW50VHlwZShuYW1lLCBob29rUGhhc2UsIGhvb2tPcmRlciwgY3JpdGVyaWFNYXRjaFBhdGgsIHJldmVyc2VTb3J0LCBnZXRSZXN1bHRIYW5kbGVyLCBnZXRFcnJvckhhbmRsZXIsIHN5bmNocm9ub3VzKSB7XG4gICAgICAgIGlmIChyZXZlcnNlU29ydCA9PT0gdm9pZCAwKSB7IHJldmVyc2VTb3J0ID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGdldFJlc3VsdEhhbmRsZXIgPT09IHZvaWQgMCkgeyBnZXRSZXN1bHRIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suSEFORExFX1JFU1VMVDsgfVxuICAgICAgICBpZiAoZ2V0RXJyb3JIYW5kbGVyID09PSB2b2lkIDApIHsgZ2V0RXJyb3JIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suUkVKRUNUX0VSUk9SOyB9XG4gICAgICAgIGlmIChzeW5jaHJvbm91cyA9PT0gdm9pZCAwKSB7IHN5bmNocm9ub3VzID0gZmFsc2U7IH1cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5ob29rUGhhc2UgPSBob29rUGhhc2U7XG4gICAgICAgIHRoaXMuaG9va09yZGVyID0gaG9va09yZGVyO1xuICAgICAgICB0aGlzLmNyaXRlcmlhTWF0Y2hQYXRoID0gY3JpdGVyaWFNYXRjaFBhdGg7XG4gICAgICAgIHRoaXMucmV2ZXJzZVNvcnQgPSByZXZlcnNlU29ydDtcbiAgICAgICAgdGhpcy5nZXRSZXN1bHRIYW5kbGVyID0gZ2V0UmVzdWx0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5nZXRFcnJvckhhbmRsZXIgPSBnZXRFcnJvckhhbmRsZXI7XG4gICAgICAgIHRoaXMuc3luY2hyb25vdXMgPSBzeW5jaHJvbm91cztcbiAgICB9XG4gICAgcmV0dXJuIFRyYW5zaXRpb25FdmVudFR5cGU7XG59KCkpO1xuZXhwb3J0IHsgVHJhbnNpdGlvbkV2ZW50VHlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNpdGlvbkV2ZW50VHlwZS5qcy5tYXAiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IFJlamVjdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeSc7XG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCBza2lwcyBhIHRyYW5zaXRpb24gaWYgaXQgc2hvdWxkIGJlIGlnbm9yZWRcbiAqXG4gKiBUaGlzIGhvb2sgaXMgaW52b2tlZCBhdCB0aGUgZW5kIG9mIHRoZSBvbkJlZm9yZSBwaGFzZS5cbiAqXG4gKiBJZiB0aGUgdHJhbnNpdGlvbiBzaG91bGQgYmUgaWdub3JlZCAoYmVjYXVzZSBubyBwYXJhbWV0ZXIgb3Igc3RhdGVzIGNoYW5nZWQpXG4gKiB0aGVuIHRoZSB0cmFuc2l0aW9uIGlzIGlnbm9yZWQgYW5kIG5vdCBwcm9jZXNzZWQuXG4gKi9cbmZ1bmN0aW9uIGlnbm9yZWRIb29rKHRyYW5zKSB7XG4gICAgdmFyIGlnbm9yZWRSZWFzb24gPSB0cmFucy5faWdub3JlZFJlYXNvbigpO1xuICAgIGlmICghaWdub3JlZFJlYXNvbilcbiAgICAgICAgcmV0dXJuO1xuICAgIHRyYWNlLnRyYWNlVHJhbnNpdGlvbklnbm9yZWQodHJhbnMpO1xuICAgIHZhciBwZW5kaW5nID0gdHJhbnMucm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbjtcbiAgICAvLyBUaGUgdXNlciBjbGlja2VkIGEgbGluayBnb2luZyBiYWNrIHRvIHRoZSAqY3VycmVudCBzdGF0ZSogKCdBJylcbiAgICAvLyBIb3dldmVyLCB0aGVyZSBpcyBhbHNvIGEgcGVuZGluZyB0cmFuc2l0aW9uIGluIGZsaWdodCAodG8gJ0InKVxuICAgIC8vIEFib3J0IHRoZSB0cmFuc2l0aW9uIHRvICdCJyBiZWNhdXNlIHRoZSB1c2VyIG5vdyB3YW50cyB0byBiZSBiYWNrIGF0ICdBJy5cbiAgICBpZiAoaWdub3JlZFJlYXNvbiA9PT0gJ1NhbWVBc0N1cnJlbnQnICYmIHBlbmRpbmcpIHtcbiAgICAgICAgcGVuZGluZy5hYm9ydCgpO1xuICAgIH1cbiAgICByZXR1cm4gUmVqZWN0aW9uLmlnbm9yZWQoKS50b1Byb21pc2UoKTtcbn1cbmV4cG9ydCB2YXIgcmVnaXN0ZXJJZ25vcmVkVHJhbnNpdGlvbkhvb2sgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sIGlnbm9yZWRIb29rLCB7IHByaW9yaXR5OiAtOTk5OSB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pZ25vcmVkVHJhbnNpdGlvbi5qcy5tYXAiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB0aGF0IHJlamVjdHMgdGhlIFRyYW5zaXRpb24gaWYgaXQgaXMgaW52YWxpZFxuICpcbiAqIFRoaXMgaG9vayBpcyBpbnZva2VkIGF0IHRoZSBlbmQgb2YgdGhlIG9uQmVmb3JlIHBoYXNlLlxuICogSWYgdGhlIHRyYW5zaXRpb24gaXMgaW52YWxpZCAoZm9yIGV4YW1wbGUsIHBhcmFtIHZhbHVlcyBkbyBub3QgdmFsaWRhdGUpXG4gKiB0aGVuIHRoZSB0cmFuc2l0aW9uIGlzIHJlamVjdGVkLlxuICovXG5mdW5jdGlvbiBpbnZhbGlkVHJhbnNpdGlvbkhvb2sodHJhbnMpIHtcbiAgICBpZiAoIXRyYW5zLnZhbGlkKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRyYW5zLmVycm9yKCkudG9TdHJpbmcoKSk7XG4gICAgfVxufVxuZXhwb3J0IHZhciByZWdpc3RlckludmFsaWRUcmFuc2l0aW9uSG9vayA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7fSwgaW52YWxpZFRyYW5zaXRpb25Ib29rLCB7IHByaW9yaXR5OiAtMTAwMDAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW52YWxpZFRyYW5zaXRpb24uanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2tTY29wZSwgVHJhbnNpdGlvbkhvb2tQaGFzZSwgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi90cmFuc2l0aW9uJztcbmltcG9ydCB7IG1ha2VFdmVudCB9IGZyb20gJy4vaG9va1JlZ2lzdHJ5JztcbmltcG9ydCB7IHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzLCB0cmVlQ2hhbmdlc0NsZWFudXAgfSBmcm9tICcuLi9ob29rcy9jb3JlUmVzb2x2YWJsZXMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJSZWRpcmVjdFRvSG9vayB9IGZyb20gJy4uL2hvb2tzL3JlZGlyZWN0VG8nO1xuaW1wb3J0IHsgcmVnaXN0ZXJPbkV4aXRIb29rLCByZWdpc3Rlck9uUmV0YWluSG9vaywgcmVnaXN0ZXJPbkVudGVySG9vayB9IGZyb20gJy4uL2hvb2tzL29uRW50ZXJFeGl0UmV0YWluJztcbmltcG9ydCB7IHJlZ2lzdGVyRWFnZXJSZXNvbHZlUGF0aCwgcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlLCByZWdpc3RlclJlc29sdmVSZW1haW5pbmcgfSBmcm9tICcuLi9ob29rcy9yZXNvbHZlJztcbmltcG9ydCB7IHJlZ2lzdGVyTG9hZEVudGVyaW5nVmlld3MsIHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyB9IGZyb20gJy4uL2hvb2tzL3ZpZXdzJztcbmltcG9ydCB7IHJlZ2lzdGVyVXBkYXRlR2xvYmFsU3RhdGUgfSBmcm9tICcuLi9ob29rcy91cGRhdGVHbG9iYWxzJztcbmltcG9ydCB7IHJlZ2lzdGVyVXBkYXRlVXJsIH0gZnJvbSAnLi4vaG9va3MvdXJsJztcbmltcG9ydCB7IHJlZ2lzdGVyTGF6eUxvYWRIb29rIH0gZnJvbSAnLi4vaG9va3MvbGF6eUxvYWQnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkV2ZW50VHlwZSB9IGZyb20gJy4vdHJhbnNpdGlvbkV2ZW50VHlwZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9vayB9IGZyb20gJy4vdHJhbnNpdGlvbkhvb2snO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgcmVtb3ZlRnJvbSwgdmFsdWVzLCBjcmVhdGVQcm94eUZ1bmN0aW9ucyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgdmFsIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyByZWdpc3Rlcklnbm9yZWRUcmFuc2l0aW9uSG9vayB9IGZyb20gJy4uL2hvb2tzL2lnbm9yZWRUcmFuc2l0aW9uJztcbmltcG9ydCB7IHJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi4vaG9va3MvaW52YWxpZFRyYW5zaXRpb24nO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBbW1RyYW5zaXRpb25dXSBvcHRpb25zLlxuICpcbiAqIEluY2x1ZGUgdGhpcyBvYmplY3Qgd2hlbiBhcHBseWluZyBjdXN0b20gZGVmYXVsdHM6XG4gKiBsZXQgcmVsb2FkT3B0cyA9IHsgcmVsb2FkOiB0cnVlLCBub3RpZnk6IHRydWUgfVxuICogbGV0IG9wdGlvbnMgPSBkZWZhdWx0cyh0aGVpck9wdHMsIGN1c3RvbURlZmF1bHRzLCBkZWZhdWx0T3B0aW9ucyk7XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFRyYW5zT3B0cyA9IHtcbiAgICBsb2NhdGlvbjogdHJ1ZSxcbiAgICByZWxhdGl2ZTogbnVsbCxcbiAgICBpbmhlcml0OiBmYWxzZSxcbiAgICBub3RpZnk6IHRydWUsXG4gICAgcmVsb2FkOiBmYWxzZSxcbiAgICBjdXN0b206IHt9LFxuICAgIGN1cnJlbnQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgc291cmNlOiAndW5rbm93bicsXG59O1xuLyoqXG4gKiBUaGlzIGNsYXNzIHByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gVHJhbnNpdGlvbnMuXG4gKlxuICogLSBNb3N0IGltcG9ydGFudGx5LCBpdCBhbGxvd3MgZ2xvYmFsIFRyYW5zaXRpb24gSG9va3MgdG8gYmUgcmVnaXN0ZXJlZC5cbiAqIC0gSXQgYWxsb3dzIHRoZSBkZWZhdWx0IHRyYW5zaXRpb24gZXJyb3IgaGFuZGxlciB0byBiZSBzZXQuXG4gKiAtIEl0IGFsc28gaGFzIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IFtbVHJhbnNpdGlvbl1dIG9iamVjdHMsICh1c2VkIGludGVybmFsbHkgYnkgdGhlIFtbU3RhdGVTZXJ2aWNlXV0pLlxuICpcbiAqIEF0IGJvb3RzdHJhcCwgW1tVSVJvdXRlcl1dIGNyZWF0ZXMgYSBzaW5nbGUgaW5zdGFuY2UgKHNpbmdsZXRvbikgb2YgdGhpcyBjbGFzcy5cbiAqL1xudmFyIFRyYW5zaXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gVHJhbnNpdGlvblNlcnZpY2UoX3JvdXRlcikge1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl90cmFuc2l0aW9uQ291bnQgPSAwO1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgdHJhbnNpdGlvbiBob29rIHR5cGVzLCBzdWNoIGFzIGBvbkVudGVyYCwgYG9uU3RhcnRgLCBldGMgKi9cbiAgICAgICAgdGhpcy5fZXZlbnRUeXBlcyA9IFtdO1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tzICovXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyZWRIb29rcyA9IHt9O1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgIHBhdGhzIG9uIGEgY3JpdGVyaWEgb2JqZWN0ICovXG4gICAgICAgIHRoaXMuX2NyaXRlcmlhUGF0aHMgPSB7fTtcbiAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcbiAgICAgICAgdGhpcy4kdmlldyA9IF9yb3V0ZXIudmlld1NlcnZpY2U7XG4gICAgICAgIHRoaXMuX2RlcmVnaXN0ZXJIb29rRm5zID0ge307XG4gICAgICAgIHRoaXMuX3BsdWdpbmFwaSA9IGNyZWF0ZVByb3h5RnVuY3Rpb25zKHZhbCh0aGlzKSwge30sIHZhbCh0aGlzKSwgW1xuICAgICAgICAgICAgJ19kZWZpbmVQYXRoVHlwZScsXG4gICAgICAgICAgICAnX2RlZmluZUV2ZW50JyxcbiAgICAgICAgICAgICdfZ2V0UGF0aFR5cGVzJyxcbiAgICAgICAgICAgICdfZ2V0RXZlbnRzJyxcbiAgICAgICAgICAgICdnZXRIb29rcycsXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLl9kZWZpbmVDb3JlUGF0aHMoKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lQ29yZUV2ZW50cygpO1xuICAgICAgICB0aGlzLl9yZWdpc3RlckNvcmVUcmFuc2l0aW9uSG9va3MoKTtcbiAgICAgICAgX3JvdXRlci5nbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5vbkV2aWN0KHRyZWVDaGFuZ2VzQ2xlYW51cCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvbkhvb2tGbl1dLCBjYWxsZWQgKndoaWxlIGEgdHJhbnNpdGlvbiBpcyBiZWluZyBjb25zdHJ1Y3RlZCouXG4gICAgICpcbiAgICAgKiBSZWdpc3RlcnMgYSB0cmFuc2l0aW9uIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIGR1cmluZyB0cmFuc2l0aW9uIGNvbnN0cnVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgbG93IGxldmVsIGhvb2sgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBwbHVnaW5zLlxuICAgICAqIFRoaXMgY2FuIGJlIGEgdXNlZnVsIHRpbWUgZm9yIHBsdWdpbnMgdG8gYWRkIHJlc29sdmVzIG9yIG11dGF0ZSB0aGUgdHJhbnNpdGlvbiBhcyBuZWVkZWQuXG4gICAgICogVGhlIFN0aWNreSBTdGF0ZXMgcGx1Z2luIHVzZXMgdGhpcyBob29rIHRvIG1vZGlmeSB0aGUgdHJlZWNoYW5nZXMuXG4gICAgICpcbiAgICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAgICpcbiAgICAgKiBgb25DcmVhdGVgIGhvb2tzIGFyZSBpbnZva2VkICp3aGlsZSBhIHRyYW5zaXRpb24gaXMgYmVpbmcgY29uc3RydWN0ZWQqLlxuICAgICAqXG4gICAgICogIyMjIFJldHVybiB2YWx1ZVxuICAgICAqXG4gICAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICogQHBhcmFtIGNyaXRlcmlhIGRlZmluZXMgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIEhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGludm9rZWQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIHJlZ2lzdHJhdGlvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgaG9vay5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25DcmVhdGUgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkJlZm9yZSA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uU3RhcnQgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkV4aXQgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vblJldGFpbiA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uRW50ZXIgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkZpbmlzaCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uU3VjY2VzcyA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGRpc3Bvc2VcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyb3V0ZXIpIHtcbiAgICAgICAgdmFsdWVzKHRoaXMuX3JlZ2lzdGVyZWRIb29rcykuZm9yRWFjaChmdW5jdGlvbiAoaG9va3NBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIGhvb2tzQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICAgICAgICAgIGhvb2suX2RlcmVnaXN0ZXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbShob29rc0FycmF5LCBob29rKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgW1tUcmFuc2l0aW9uXV0gb2JqZWN0XG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IFRyYW5zaXRpb24gb2JqZWN0cy5cbiAgICAgKiBJdCBpcyB1c2VkIGludGVybmFsbHkgYnkgdGhlIFtbU3RhdGVTZXJ2aWNlXV0gYW5kIHNob3VsZCBnZW5lcmFsbHkgbm90IGJlIGNhbGxlZCBieSBhcHBsaWNhdGlvbiBjb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZyb21QYXRoIHRoZSBwYXRoIHRvIHRoZSBjdXJyZW50IHN0YXRlICh0aGUgZnJvbSBzdGF0ZSlcbiAgICAgKiBAcGFyYW0gdGFyZ2V0U3RhdGUgdGhlIHRhcmdldCBzdGF0ZSAoZGVzdGluYXRpb24pXG4gICAgICogQHJldHVybnMgYSBUcmFuc2l0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChmcm9tUGF0aCwgdGFyZ2V0U3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGZyb21QYXRoLCB0YXJnZXRTdGF0ZSwgdGhpcy5fcm91dGVyKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9kZWZpbmVDb3JlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgUGhhc2UgPSBUcmFuc2l0aW9uSG9va1BoYXNlO1xuICAgICAgICB2YXIgVEggPSBUcmFuc2l0aW9uSG9vaztcbiAgICAgICAgdmFyIHBhdGhzID0gdGhpcy5fY3JpdGVyaWFQYXRocztcbiAgICAgICAgdmFyIE5PUk1BTF9TT1JUID0gZmFsc2UsIFJFVkVSU0VfU09SVCA9IHRydWU7XG4gICAgICAgIHZhciBTWU5DSFJPTk9VUyA9IHRydWU7XG4gICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvbkNyZWF0ZScsIFBoYXNlLkNSRUFURSwgMCwgcGF0aHMudG8sIE5PUk1BTF9TT1JULCBUSC5MT0dfUkVKRUNURURfUkVTVUxULCBUSC5USFJPV19FUlJPUiwgU1lOQ0hST05PVVMpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25CZWZvcmUnLCBQaGFzZS5CRUZPUkUsIDAsIHBhdGhzLnRvKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uU3RhcnQnLCBQaGFzZS5SVU4sIDAsIHBhdGhzLnRvKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uRXhpdCcsIFBoYXNlLlJVTiwgMTAwLCBwYXRocy5leGl0aW5nLCBSRVZFUlNFX1NPUlQpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25SZXRhaW4nLCBQaGFzZS5SVU4sIDIwMCwgcGF0aHMucmV0YWluZWQpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25FbnRlcicsIFBoYXNlLlJVTiwgMzAwLCBwYXRocy5lbnRlcmluZyk7XG4gICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvbkZpbmlzaCcsIFBoYXNlLlJVTiwgNDAwLCBwYXRocy50byk7XG4gICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvblN1Y2Nlc3MnLCBQaGFzZS5TVUNDRVNTLCAwLCBwYXRocy50bywgTk9STUFMX1NPUlQsIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsIFRILkxPR19FUlJPUiwgU1lOQ0hST05PVVMpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25FcnJvcicsIFBoYXNlLkVSUk9SLCAwLCBwYXRocy50bywgTk9STUFMX1NPUlQsIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsIFRILkxPR19FUlJPUiwgU1lOQ0hST05PVVMpO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuX2RlZmluZUNvcmVQYXRocyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIFNUQVRFID0gVHJhbnNpdGlvbkhvb2tTY29wZS5TVEFURSwgVFJBTlNJVElPTiA9IFRyYW5zaXRpb25Ib29rU2NvcGUuVFJBTlNJVElPTjtcbiAgICAgICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ3RvJywgVFJBTlNJVElPTik7XG4gICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdmcm9tJywgVFJBTlNJVElPTik7XG4gICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdleGl0aW5nJywgU1RBVEUpO1xuICAgICAgICB0aGlzLl9kZWZpbmVQYXRoVHlwZSgncmV0YWluZWQnLCBTVEFURSk7XG4gICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdlbnRlcmluZycsIFNUQVRFKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9kZWZpbmVFdmVudCA9IGZ1bmN0aW9uIChuYW1lLCBob29rUGhhc2UsIGhvb2tPcmRlciwgY3JpdGVyaWFNYXRjaFBhdGgsIHJldmVyc2VTb3J0LCBnZXRSZXN1bHRIYW5kbGVyLCBnZXRFcnJvckhhbmRsZXIsIHN5bmNocm9ub3VzKSB7XG4gICAgICAgIGlmIChyZXZlcnNlU29ydCA9PT0gdm9pZCAwKSB7IHJldmVyc2VTb3J0ID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGdldFJlc3VsdEhhbmRsZXIgPT09IHZvaWQgMCkgeyBnZXRSZXN1bHRIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suSEFORExFX1JFU1VMVDsgfVxuICAgICAgICBpZiAoZ2V0RXJyb3JIYW5kbGVyID09PSB2b2lkIDApIHsgZ2V0RXJyb3JIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suUkVKRUNUX0VSUk9SOyB9XG4gICAgICAgIGlmIChzeW5jaHJvbm91cyA9PT0gdm9pZCAwKSB7IHN5bmNocm9ub3VzID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IG5ldyBUcmFuc2l0aW9uRXZlbnRUeXBlKG5hbWUsIGhvb2tQaGFzZSwgaG9va09yZGVyLCBjcml0ZXJpYU1hdGNoUGF0aCwgcmV2ZXJzZVNvcnQsIGdldFJlc3VsdEhhbmRsZXIsIGdldEVycm9ySGFuZGxlciwgc3luY2hyb25vdXMpO1xuICAgICAgICB0aGlzLl9ldmVudFR5cGVzLnB1c2goZXZlbnRUeXBlKTtcbiAgICAgICAgbWFrZUV2ZW50KHRoaXMsIHRoaXMsIGV2ZW50VHlwZSk7XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZ2V0RXZlbnRzID0gZnVuY3Rpb24gKHBoYXNlKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uSG9va1R5cGVzID0gaXNEZWZpbmVkKHBoYXNlKVxuICAgICAgICAgICAgPyB0aGlzLl9ldmVudFR5cGVzLmZpbHRlcihmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gdHlwZS5ob29rUGhhc2UgPT09IHBoYXNlOyB9KVxuICAgICAgICAgICAgOiB0aGlzLl9ldmVudFR5cGVzLnNsaWNlKCk7XG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uSG9va1R5cGVzLnNvcnQoZnVuY3Rpb24gKGwsIHIpIHtcbiAgICAgICAgICAgIHZhciBjbXBCeVBoYXNlID0gbC5ob29rUGhhc2UgLSByLmhvb2tQaGFzZTtcbiAgICAgICAgICAgIHJldHVybiBjbXBCeVBoYXNlID09PSAwID8gbC5ob29rT3JkZXIgLSByLmhvb2tPcmRlciA6IGNtcEJ5UGhhc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIFBhdGggdG8gYmUgdXNlZCBhcyBhIGNyaXRlcmlvbiBhZ2FpbnN0IGEgVHJlZUNoYW5nZXMgcGF0aFxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGU6IHRoZSBgZXhpdGluZ2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBTVEFURSBzY29wZWQgcGF0aC5cbiAgICAgKiBJdCB3YXMgZGVmaW5lZCBieSBjYWxsaW5nIGBkZWZpbmVUcmVlQ2hhbmdlc0NyaXRlcmlvbignZXhpdGluZycsIFRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUpYFxuICAgICAqIEVhY2ggc3RhdGUgaW4gdGhlIGV4aXRpbmcgcGF0aCBpcyBjaGVja2VkIGFnYWluc3QgdGhlIGNyaXRlcmlhIGFuZCByZXR1cm5lZCBhcyBwYXJ0IG9mIHRoZSBtYXRjaC5cbiAgICAgKlxuICAgICAqIEFub3RoZXIgZXhhbXBsZTogdGhlIGB0b2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBUUkFOU0lUSU9OIHNjb3BlZCBwYXRoLlxuICAgICAqIEl0IHdhcyBkZWZpbmVkIGJ5IGNhbGxpbmcgYGRlZmluZVRyZWVDaGFuZ2VzQ3JpdGVyaW9uKCd0bycsIFRyYW5zaXRpb25Ib29rU2NvcGUuVFJBTlNJVElPTilgXG4gICAgICogT25seSB0aGUgdGFpbCBvZiB0aGUgYHRvYCBwYXRoIGlzIGNoZWNrZWQgYWdhaW5zdCB0aGUgY3JpdGVyaWEgYW5kIHJldHVybmVkIGFzIHBhcnQgb2YgdGhlIG1hdGNoLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZGVmaW5lUGF0aFR5cGUgPSBmdW5jdGlvbiAobmFtZSwgaG9va1Njb3BlKSB7XG4gICAgICAgIHRoaXMuX2NyaXRlcmlhUGF0aHNbbmFtZV0gPSB7IG5hbWU6IG5hbWUsIHNjb3BlOiBob29rU2NvcGUgfTtcbiAgICB9O1xuICAgIC8qKiAqIEBoaWRkZW4gKi9cbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuX2dldFBhdGhUeXBlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyaXRlcmlhUGF0aHM7XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5nZXRIb29rcyA9IGZ1bmN0aW9uIChob29rTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJlZEhvb2tzW2hvb2tOYW1lXTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9yZWdpc3RlckNvcmVUcmFuc2l0aW9uSG9va3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmbnMgPSB0aGlzLl9kZXJlZ2lzdGVySG9va0ZucztcbiAgICAgICAgZm5zLmFkZENvcmVSZXNvbHZlcyA9IHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzKHRoaXMpO1xuICAgICAgICBmbnMuaWdub3JlZCA9IHJlZ2lzdGVySWdub3JlZFRyYW5zaXRpb25Ib29rKHRoaXMpO1xuICAgICAgICBmbnMuaW52YWxpZCA9IHJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rKHRoaXMpO1xuICAgICAgICAvLyBXaXJlIHVwIHJlZGlyZWN0VG8gaG9va1xuICAgICAgICBmbnMucmVkaXJlY3RUbyA9IHJlZ2lzdGVyUmVkaXJlY3RUb0hvb2sodGhpcyk7XG4gICAgICAgIC8vIFdpcmUgdXAgb25FeGl0L1JldGFpbi9FbnRlciBzdGF0ZSBob29rc1xuICAgICAgICBmbnMub25FeGl0ID0gcmVnaXN0ZXJPbkV4aXRIb29rKHRoaXMpO1xuICAgICAgICBmbnMub25SZXRhaW4gPSByZWdpc3Rlck9uUmV0YWluSG9vayh0aGlzKTtcbiAgICAgICAgZm5zLm9uRW50ZXIgPSByZWdpc3Rlck9uRW50ZXJIb29rKHRoaXMpO1xuICAgICAgICAvLyBXaXJlIHVwIFJlc29sdmUgaG9va3NcbiAgICAgICAgZm5zLmVhZ2VyUmVzb2x2ZSA9IHJlZ2lzdGVyRWFnZXJSZXNvbHZlUGF0aCh0aGlzKTtcbiAgICAgICAgZm5zLmxhenlSZXNvbHZlID0gcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlKHRoaXMpO1xuICAgICAgICBmbnMucmVzb2x2ZUFsbCA9IHJlZ2lzdGVyUmVzb2x2ZVJlbWFpbmluZyh0aGlzKTtcbiAgICAgICAgLy8gV2lyZSB1cCB0aGUgVmlldyBtYW5hZ2VtZW50IGhvb2tzXG4gICAgICAgIGZucy5sb2FkVmlld3MgPSByZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzKHRoaXMpO1xuICAgICAgICBmbnMuYWN0aXZhdGVWaWV3cyA9IHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyh0aGlzKTtcbiAgICAgICAgLy8gVXBkYXRlcyBnbG9iYWwgc3RhdGUgYWZ0ZXIgYSB0cmFuc2l0aW9uXG4gICAgICAgIGZucy51cGRhdGVHbG9iYWxzID0gcmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSh0aGlzKTtcbiAgICAgICAgLy8gQWZ0ZXIgZ2xvYmFscy5jdXJyZW50IGlzIHVwZGF0ZWQgYXQgcHJpb3JpdHk6IDEwMDAwXG4gICAgICAgIGZucy51cGRhdGVVcmwgPSByZWdpc3RlclVwZGF0ZVVybCh0aGlzKTtcbiAgICAgICAgLy8gTGF6eSBsb2FkIHN0YXRlIHRyZWVzXG4gICAgICAgIGZucy5sYXp5TG9hZCA9IHJlZ2lzdGVyTGF6eUxvYWRIb29rKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFRyYW5zaXRpb25TZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFRyYW5zaXRpb25TZXJ2aWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2l0aW9uU2VydmljZS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHN0YXRlXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgY3JlYXRlUHJveHlGdW5jdGlvbnMsIGRlZmF1bHRzLCBleHRlbmQsIGluQXJyYXksIG5vb3AsIHJlbW92ZUZyb20sIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSwgc2lsZW50UmVqZWN0aW9uLCB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc09iamVjdCwgaXNTdHJpbmcgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gJy4uL2NvbW1vbi9xdWV1ZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgUGF0aFV0aWxzIH0gZnJvbSAnLi4vcGF0aC9wYXRoVXRpbHMnO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoL3BhdGhOb2RlJztcbmltcG9ydCB7IGRlZmF1bHRUcmFuc09wdHMgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFJlamVjdGlvbiwgUmVqZWN0VHlwZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeSc7XG5pbXBvcnQgeyBUYXJnZXRTdGF0ZSB9IGZyb20gJy4vdGFyZ2V0U3RhdGUnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgR2xvYiB9IGZyb20gJy4uL2NvbW1vbi9nbG9iJztcbmltcG9ydCB7IFJlc29sdmVDb250ZXh0IH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZlQ29udGV4dCc7XG5pbXBvcnQgeyBsYXp5TG9hZFN0YXRlIH0gZnJvbSAnLi4vaG9va3MvbGF6eUxvYWQnO1xuaW1wb3J0IHsgbm90LCB2YWwgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbi8qKlxuICogUHJvdmlkZXMgc3RhdGUgcmVsYXRlZCBzZXJ2aWNlIGZ1bmN0aW9uc1xuICpcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byB1aS1yb3V0ZXIgc3RhdGVzLlxuICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBsb2NhdGVkIG9uIHRoZSBnbG9iYWwgW1tVSVJvdXRlcl1dIG9iamVjdC5cbiAqL1xudmFyIFN0YXRlU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgZnVuY3Rpb24gU3RhdGVTZXJ2aWNlKHJvdXRlcikge1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgICAgICB0aGlzLmludmFsaWRDYWxsYmFja3MgPSBbXTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fZGVmYXVsdEVycm9ySGFuZGxlciA9IGZ1bmN0aW9uICRkZWZhdWx0RXJyb3JIYW5kbGVyKCRlcnJvciQpIHtcbiAgICAgICAgICAgIGlmICgkZXJyb3IkIGluc3RhbmNlb2YgRXJyb3IgJiYgJGVycm9yJC5zdGFjaykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCRlcnJvciQgaW5zdGFuY2VvZiBSZWplY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgaWYgKCRlcnJvciQuZGV0YWlsICYmICRlcnJvciQuZGV0YWlsLnN0YWNrKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQuZGV0YWlsLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBnZXR0ZXJzID0gWydjdXJyZW50JywgJyRjdXJyZW50JywgJ3BhcmFtcycsICd0cmFuc2l0aW9uJ107XG4gICAgICAgIHZhciBib3VuZEZucyA9IE9iamVjdC5rZXlzKFN0YXRlU2VydmljZS5wcm90b3R5cGUpLmZpbHRlcihub3QoaW5BcnJheShnZXR0ZXJzKSkpO1xuICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh2YWwoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSksIHRoaXMsIHZhbCh0aGlzKSwgYm91bmRGbnMpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJ0cmFuc2l0aW9uXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBbW1RyYW5zaXRpb25dXSBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MgKG9yIG51bGwpXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLnRyYW5zaXRpb25dXVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJwYXJhbXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGxhdGVzdCBzdWNjZXNzZnVsIHN0YXRlIHBhcmFtZXRlcnNcbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRocm91Z2ggdG8gW1tVSVJvdXRlckdsb2JhbHMucGFyYW1zXV1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMucGFyYW1zO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJjdXJyZW50XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IFtbU3RhdGVEZWNsYXJhdGlvbl1dXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLmN1cnJlbnRdXVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy5jdXJyZW50O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCIkY3VycmVudFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCBbW1N0YXRlT2JqZWN0XV1cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRocm91Z2ggdG8gW1tVSVJvdXRlckdsb2JhbHMuJGN1cnJlbnRdXVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy4kY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0RXJyb3JIYW5kbGVyKG5vb3ApO1xuICAgICAgICB0aGlzLmludmFsaWRDYWxsYmFja3MgPSBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXIgZm9yIHdoZW4gW1t0cmFuc2l0aW9uVG9dXSBpcyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHN0YXRlLlxuICAgICAqXG4gICAgICogSW52b2tlcyB0aGUgW1tvbkludmFsaWRdXSBjYWxsYmFja3MsIGluIG5hdHVyYWwgb3JkZXIuXG4gICAgICogRWFjaCBjYWxsYmFjaydzIHJldHVybiB2YWx1ZSBpcyBjaGVja2VkIGluIHNlcXVlbmNlIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgVGFyZ2V0U3RhdGUuXG4gICAgICogVGhlIHJlc3VsdHMgb2YgdGhlIGNhbGxiYWNrcyBhcmUgd3JhcHBlZCBpbiAkcS53aGVuKCksIHNvIHRoZSBjYWxsYmFja3MgbWF5IHJldHVybiBwcm9taXNlcy5cbiAgICAgKlxuICAgICAqIElmIGEgY2FsbGJhY2sgcmV0dXJucyBhbiBUYXJnZXRTdGF0ZSwgdGhlbiBpdCBpcyB1c2VkIGFzIGFyZ3VtZW50cyB0byAkc3RhdGUudHJhbnNpdGlvblRvKCkgYW5kIHRoZSByZXN1bHQgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLl9oYW5kbGVJbnZhbGlkVGFyZ2V0U3RhdGUgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRvU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGZyb21TdGF0ZSA9IFBhdGhVdGlscy5tYWtlVGFyZ2V0U3RhdGUodGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeSwgZnJvbVBhdGgpO1xuICAgICAgICB2YXIgZ2xvYmFscyA9IHRoaXMucm91dGVyLmdsb2JhbHM7XG4gICAgICAgIHZhciBsYXRlc3RUaGluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdsb2JhbHMudHJhbnNpdGlvbkhpc3RvcnkucGVla1RhaWwoKTsgfTtcbiAgICAgICAgdmFyIGxhdGVzdCA9IGxhdGVzdFRoaW5nKCk7XG4gICAgICAgIHZhciBjYWxsYmFja1F1ZXVlID0gbmV3IFF1ZXVlKHRoaXMuaW52YWxpZENhbGxiYWNrcy5zbGljZSgpKTtcbiAgICAgICAgdmFyIGluamVjdG9yID0gbmV3IFJlc29sdmVDb250ZXh0KGZyb21QYXRoKS5pbmplY3RvcigpO1xuICAgICAgICB2YXIgY2hlY2tGb3JSZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICghKHJlc3VsdCBpbnN0YW5jZW9mIFRhcmdldFN0YXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSByZXN1bHQ7XG4gICAgICAgICAgICAvLyBSZWNyZWF0ZSB0aGUgVGFyZ2V0U3RhdGUsIGluIGNhc2UgdGhlIHN0YXRlIGlzIG5vdyBkZWZpbmVkLlxuICAgICAgICAgICAgdGFyZ2V0ID0gX3RoaXMudGFyZ2V0KHRhcmdldC5pZGVudGlmaWVyKCksIHRhcmdldC5wYXJhbXMoKSwgdGFyZ2V0Lm9wdGlvbnMoKSk7XG4gICAgICAgICAgICBpZiAoIXRhcmdldC52YWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5pbnZhbGlkKHRhcmdldC5lcnJvcigpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXRlc3RUaGluZygpICE9PSBsYXRlc3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLnN1cGVyc2VkZWQoKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50cmFuc2l0aW9uVG8odGFyZ2V0LmlkZW50aWZpZXIoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTmV4dENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdmFyIG5leHRDYWxsYmFjayA9IGNhbGxiYWNrUXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgaWYgKG5leHRDYWxsYmFjayA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uaW52YWxpZCh0b1N0YXRlLmVycm9yKCkpLnRvUHJvbWlzZSgpO1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrUmVzdWx0ID0gc2VydmljZXMuJHEud2hlbihuZXh0Q2FsbGJhY2sodG9TdGF0ZSwgZnJvbVN0YXRlLCBpbmplY3RvcikpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrUmVzdWx0LnRoZW4oY2hlY2tGb3JSZWRpcmVjdCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiByZXN1bHQgfHwgaW52b2tlTmV4dENhbGxiYWNrKCk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnZva2VOZXh0Q2FsbGJhY2soKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhbiBJbnZhbGlkIFN0YXRlIGhhbmRsZXJcbiAgICAgKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbT25JbnZhbGlkQ2FsbGJhY2tdXSBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvblRvXV1cbiAgICAgKiBoYXMgYmVlbiBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHN0YXRlIHJlZmVyZW5jZSBwYXJhbWV0ZXJcbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBzdGF0ZVNlcnZpY2Uub25JbnZhbGlkKGZ1bmN0aW9uKHRvLCBmcm9tLCBpbmplY3Rvcikge1xuICAgICAqICAgaWYgKHRvLm5hbWUoKSA9PT0gJ2ZvbycpIHtcbiAgICAgKiAgICAgbGV0IGxhenlMb2FkZXIgPSBpbmplY3Rvci5nZXQoJ0xhenlMb2FkU2VydmljZScpO1xuICAgICAqICAgICByZXR1cm4gbGF6eUxvYWRlci5sb2FkKCdmb28nKVxuICAgICAqICAgICAgICAgLnRoZW4oKCkgPT4gc3RhdGVTZXJ2aWNlLnRhcmdldCgnZm9vJykpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgaW52b2tlZCB3aGVuIHRoZSB0b1N0YXRlIGlzIGludmFsaWRcbiAgICAgKiAgIFRoaXMgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIChpbnZhbGlkKSB0b1N0YXRlLCB0aGUgZnJvbVN0YXRlLCBhbmQgYW4gaW5qZWN0b3IuXG4gICAgICogICBUaGUgZnVuY3Rpb24gbWF5IG9wdGlvbmFsbHkgcmV0dXJuIGEgW1tUYXJnZXRTdGF0ZV1dIG9yIGEgUHJvbWlzZSBmb3IgYSBUYXJnZXRTdGF0ZS5cbiAgICAgKiAgIElmIG9uZSBpcyByZXR1cm5lZCwgaXQgaXMgdHJlYXRlZCBhcyBhIHJlZGlyZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLm9uSW52YWxpZCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmludmFsaWRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICByZW1vdmVGcm9tKHRoaXMuaW52YWxpZENhbGxiYWNrcykoY2FsbGJhY2spO1xuICAgICAgICB9LmJpbmQodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWxvYWRzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICpcbiAgICAgKiBBIG1ldGhvZCB0aGF0IGZvcmNlIHJlbG9hZHMgdGhlIGN1cnJlbnQgc3RhdGUsIG9yIGEgcGFydGlhbCBzdGF0ZSBoaWVyYXJjaHkuXG4gICAgICogQWxsIHJlc29sdmVzIGFyZSByZS1yZXNvbHZlZCwgYW5kIGNvbXBvbmVudHMgcmVpbnN0YW50aWF0ZWQuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBsZXQgYXBwIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICAgKlxuICAgICAqIGFwcC5jb250cm9sbGVyKCdjdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XG4gICAgICogICAkc2NvcGUucmVsb2FkID0gZnVuY3Rpb24oKXtcbiAgICAgKiAgICAgJHN0YXRlLnJlbG9hZCgpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogTm90ZTogYHJlbG9hZCgpYCBpcyBqdXN0IGFuIGFsaWFzIGZvcjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogJHN0YXRlLnRyYW5zaXRpb25Ubygkc3RhdGUuY3VycmVudCwgJHN0YXRlLnBhcmFtcywge1xuICAgICAqICAgcmVsb2FkOiB0cnVlLCBpbmhlcml0OiBmYWxzZVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbG9hZFN0YXRlIEEgc3RhdGUgbmFtZSBvciBhIHN0YXRlIG9iamVjdC5cbiAgICAgKiAgICBJZiBwcmVzZW50LCB0aGlzIHN0YXRlIGFuZCBhbGwgaXRzIGNoaWxkcmVuIHdpbGwgYmUgcmVsb2FkZWQsIGJ1dCBhbmNlc3RvcnMgd2lsbCBub3QgcmVsb2FkLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLy9hc3N1bWluZyBhcHAgYXBwbGljYXRpb24gY29uc2lzdHMgb2YgMyBzdGF0ZXM6ICdjb250YWN0cycsICdjb250YWN0cy5kZXRhaWwnLCAnY29udGFjdHMuZGV0YWlsLml0ZW0nXG4gICAgICogLy9hbmQgY3VycmVudCBzdGF0ZSBpcyAnY29udGFjdHMuZGV0YWlsLml0ZW0nXG4gICAgICogbGV0IGFwcCBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XG4gICAgICpcbiAgICAgKiBhcHAuY29udHJvbGxlcignY3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSkge1xuICAgICAqICAgJHNjb3BlLnJlbG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAgICogICAgIC8vd2lsbCByZWxvYWQgJ2NvbnRhY3QuZGV0YWlsJyBhbmQgbmVzdGVkICdjb250YWN0LmRldGFpbC5pdGVtJyBzdGF0ZXNcbiAgICAgKiAgICAgJHN0YXRlLnJlbG9hZCgnY29udGFjdC5kZXRhaWwnKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBuZXcgdHJhbnNpdGlvbi4gU2VlIFtbU3RhdGVTZXJ2aWNlLmdvXV1cbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uIChyZWxvYWRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8odGhpcy5jdXJyZW50LCB0aGlzLnBhcmFtcywge1xuICAgICAgICAgICAgcmVsb2FkOiBpc0RlZmluZWQocmVsb2FkU3RhdGUpID8gcmVsb2FkU3RhdGUgOiB0cnVlLFxuICAgICAgICAgICAgaW5oZXJpdDogZmFsc2UsXG4gICAgICAgICAgICBub3RpZnk6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zaXRpb24gdG8gYSBkaWZmZXJlbnQgc3RhdGUgYW5kL29yIHBhcmFtZXRlcnNcbiAgICAgKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgdHJhbnNpdGlvbmluZyB0byBhIG5ldyBzdGF0ZS5cbiAgICAgKlxuICAgICAqIGAkc3RhdGUuZ29gIGNhbGxzIGAkc3RhdGUudHJhbnNpdGlvblRvYCBpbnRlcm5hbGx5IGJ1dCBhdXRvbWF0aWNhbGx5IHNldHMgb3B0aW9ucyB0b1xuICAgICAqIGB7IGxvY2F0aW9uOiB0cnVlLCBpbmhlcml0OiB0cnVlLCByZWxhdGl2ZTogcm91dGVyLmdsb2JhbHMuJGN1cnJlbnQsIG5vdGlmeTogdHJ1ZSB9YC5cbiAgICAgKiBUaGlzIGFsbG93cyB5b3UgdG8gdXNlIGVpdGhlciBhbiBhYnNvbHV0ZSBvciByZWxhdGl2ZSBgdG9gIGFyZ3VtZW50IChiZWNhdXNlIG9mIGByZWxhdGl2ZTogcm91dGVyLmdsb2JhbHMuJGN1cnJlbnRgKS5cbiAgICAgKiBJdCBhbHNvIGFsbG93cyB5b3UgdG8gc3BlY2lmeSAqIG9ubHkgdGhlIHBhcmFtZXRlcnMgeW91J2QgbGlrZSB0byB1cGRhdGUsIHdoaWxlIGxldHRpbmcgdW5zcGVjaWZpZWQgcGFyYW1ldGVyc1xuICAgICAqIGluaGVyaXQgZnJvbSB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzIChiZWNhdXNlIG9mIGBpbmhlcml0OiB0cnVlYCkuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBsZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xuICAgICAqXG4gICAgICogYXBwLmNvbnRyb2xsZXIoJ2N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUpIHtcbiAgICAgKiAgICRzY29wZS5jaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgICAgJHN0YXRlLmdvKCdjb250YWN0LmRldGFpbCcpO1xuICAgICAqICAgfTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0byBBYnNvbHV0ZSBzdGF0ZSBuYW1lLCBzdGF0ZSBvYmplY3QsIG9yIHJlbGF0aXZlIHN0YXRlIHBhdGggKHJlbGF0aXZlIHRvIGN1cnJlbnQgc3RhdGUpLlxuICAgICAqXG4gICAgICogU29tZSBleGFtcGxlczpcbiAgICAgKlxuICAgICAqIC0gYCRzdGF0ZS5nbygnY29udGFjdC5kZXRhaWwnKWAgLSB3aWxsIGdvIHRvIHRoZSBgY29udGFjdC5kZXRhaWxgIHN0YXRlXG4gICAgICogLSBgJHN0YXRlLmdvKCdeJylgIC0gd2lsbCBnbyB0byB0aGUgcGFyZW50IHN0YXRlXG4gICAgICogLSBgJHN0YXRlLmdvKCdeLnNpYmxpbmcnKWAgLSBpZiBjdXJyZW50IHN0YXRlIGlzIGBob21lLmNoaWxkYCwgd2lsbCBnbyB0byB0aGUgYGhvbWUuc2libGluZ2Agc3RhdGVcbiAgICAgKiAtIGAkc3RhdGUuZ28oJy5jaGlsZC5ncmFuZGNoaWxkJylgIC0gaWYgY3VycmVudCBzdGF0ZSBpcyBob21lLCB3aWxsIGdvIHRvIHRoZSBgaG9tZS5jaGlsZC5ncmFuZGNoaWxkYCBzdGF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyBBIG1hcCBvZiB0aGUgcGFyYW1ldGVycyB0aGF0IHdpbGwgYmUgc2VudCB0byB0aGUgc3RhdGUsIHdpbGwgcG9wdWxhdGUgJHN0YXRlUGFyYW1zLlxuICAgICAqXG4gICAgICogICAgQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCB3aWxsIGJlIGluaGVyaXRlZCBmcm9tIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcyAoYmVjYXVzZSBvZiBgaW5oZXJpdDogdHJ1ZWApLlxuICAgICAqICAgIFRoaXMgYWxsb3dzLCBmb3IgZXhhbXBsZSwgZ29pbmcgdG8gYSBzaWJsaW5nIHN0YXRlIHRoYXQgc2hhcmVzIHBhcmFtZXRlcnMgZGVmaW5lZCBieSBhIHBhcmVudCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRyYW5zaXRpb24gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybnMge3Byb21pc2V9IEEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBuZXcgdHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gKHRvLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRlZmF1dEdvT3B0cyA9IHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQsIGluaGVyaXQ6IHRydWUgfTtcbiAgICAgICAgdmFyIHRyYW5zT3B0cyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1dEdvT3B0cywgZGVmYXVsdFRyYW5zT3B0cyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb25Ubyh0bywgcGFyYW1zLCB0cmFuc09wdHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFtbVGFyZ2V0U3RhdGVdXVxuICAgICAqXG4gICAgICogVGhpcyBpcyBhIGZhY3RvcnkgbWV0aG9kIGZvciBjcmVhdGluZyBhIFRhcmdldFN0YXRlXG4gICAgICpcbiAgICAgKiBUaGlzIG1heSBiZSByZXR1cm5lZCBmcm9tIGEgVHJhbnNpdGlvbiBIb29rIHRvIHJlZGlyZWN0IGEgdHJhbnNpdGlvbiwgZm9yIGV4YW1wbGUuXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS50YXJnZXQgPSBmdW5jdGlvbiAoaWRlbnRpZmllciwgcGFyYW1zLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIC8vIElmIHdlJ3JlIHJlbG9hZGluZywgZmluZCB0aGUgc3RhdGUgb2JqZWN0IHRvIHJlbG9hZCBmcm9tXG4gICAgICAgIGlmIChpc09iamVjdChvcHRpb25zLnJlbG9hZCkgJiYgIW9wdGlvbnMucmVsb2FkLm5hbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVsb2FkIHN0YXRlIG9iamVjdCcpO1xuICAgICAgICB2YXIgcmVnID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeTtcbiAgICAgICAgb3B0aW9ucy5yZWxvYWRTdGF0ZSA9XG4gICAgICAgICAgICBvcHRpb25zLnJlbG9hZCA9PT0gdHJ1ZSA/IHJlZy5yb290KCkgOiByZWcubWF0Y2hlci5maW5kKG9wdGlvbnMucmVsb2FkLCBvcHRpb25zLnJlbGF0aXZlKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVsb2FkICYmICFvcHRpb25zLnJlbG9hZFN0YXRlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VjaCByZWxvYWQgc3RhdGUgJ1wiICsgKGlzU3RyaW5nKG9wdGlvbnMucmVsb2FkKSA/IG9wdGlvbnMucmVsb2FkIDogb3B0aW9ucy5yZWxvYWQubmFtZSkgKyBcIidcIik7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeSwgaWRlbnRpZmllciwgcGFyYW1zLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZ2V0Q3VycmVudFBhdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBnbG9iYWxzID0gdGhpcy5yb3V0ZXIuZ2xvYmFscztcbiAgICAgICAgdmFyIGxhdGVzdFN1Y2Nlc3MgPSBnbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5wZWVrVGFpbCgpO1xuICAgICAgICB2YXIgcm9vdFBhdGggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbbmV3IFBhdGhOb2RlKF90aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKSldOyB9O1xuICAgICAgICByZXR1cm4gbGF0ZXN0U3VjY2VzcyA/IGxhdGVzdFN1Y2Nlc3MudHJlZUNoYW5nZXMoKS50byA6IHJvb3RQYXRoKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb3ctbGV2ZWwgbWV0aG9kIGZvciB0cmFuc2l0aW9uaW5nIHRvIGEgbmV3IHN0YXRlLlxuICAgICAqXG4gICAgICogVGhlIFtbZ29dXSBtZXRob2QgKHdoaWNoIHVzZXMgYHRyYW5zaXRpb25Ub2AgaW50ZXJuYWxseSkgaXMgcmVjb21tZW5kZWQgaW4gbW9zdCBzaXR1YXRpb25zLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICAgKlxuICAgICAqIGFwcC5jb250cm9sbGVyKCdjdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XG4gICAgICogICAkc2NvcGUuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICogICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oJ2NvbnRhY3QuZGV0YWlsJyk7XG4gICAgICogICB9O1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHRvIFN0YXRlIG5hbWUgb3Igc3RhdGUgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB0b1BhcmFtcyBBIG1hcCBvZiB0aGUgcGFyYW1ldGVycyB0aGF0IHdpbGwgYmUgc2VudCB0byB0aGUgc3RhdGUsXG4gICAgICogICAgICB3aWxsIHBvcHVsYXRlICRzdGF0ZVBhcmFtcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUcmFuc2l0aW9uIG9wdGlvbnNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBuZXcgdHJhbnNpdGlvbi4gU2VlIFtbZ29dXVxuICAgICAqL1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUudHJhbnNpdGlvblRvID0gZnVuY3Rpb24gKHRvLCB0b1BhcmFtcywgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodG9QYXJhbXMgPT09IHZvaWQgMCkgeyB0b1BhcmFtcyA9IHt9OyB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcbiAgICAgICAgdmFyIGdsb2JhbHMgPSByb3V0ZXIuZ2xvYmFscztcbiAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRUcmFuc09wdHMpO1xuICAgICAgICB2YXIgZ2V0Q3VycmVudCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdsb2JhbHMudHJhbnNpdGlvbjsgfTtcbiAgICAgICAgb3B0aW9ucyA9IGV4dGVuZChvcHRpb25zLCB7IGN1cnJlbnQ6IGdldEN1cnJlbnQgfSk7XG4gICAgICAgIHZhciByZWYgPSB0aGlzLnRhcmdldCh0bywgdG9QYXJhbXMsIG9wdGlvbnMpO1xuICAgICAgICB2YXIgY3VycmVudFBhdGggPSB0aGlzLmdldEN1cnJlbnRQYXRoKCk7XG4gICAgICAgIGlmICghcmVmLmV4aXN0cygpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZUludmFsaWRUYXJnZXRTdGF0ZShjdXJyZW50UGF0aCwgcmVmKTtcbiAgICAgICAgaWYgKCFyZWYudmFsaWQoKSlcbiAgICAgICAgICAgIHJldHVybiBzaWxlbnRSZWplY3Rpb24ocmVmLmVycm9yKCkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lhbCBoYW5kbGluZyBmb3IgSWdub3JlZCwgQWJvcnRlZCwgYW5kIFJlZGlyZWN0ZWQgdHJhbnNpdGlvbnNcbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHNlbWFudGljcyBmb3IgdGhlIHRyYW5zaXRpb24ucnVuKCkgcHJvbWlzZSBhbmQgdGhlIFN0YXRlU2VydmljZS50cmFuc2l0aW9uVG8oKVxuICAgICAgICAgKiBwcm9taXNlIGRpZmZlci4gRm9yIGluc3RhbmNlLCB0aGUgcnVuKCkgcHJvbWlzZSBtYXkgYmUgcmVqZWN0ZWQgYmVjYXVzZSBpdCB3YXNcbiAgICAgICAgICogSUdOT1JFRCwgYnV0IHRoZSB0cmFuc2l0aW9uVG8oKSBwcm9taXNlIGlzIHJlc29sdmVkIGJlY2F1c2UgZnJvbSB0aGUgdXNlciBwZXJzcGVjdGl2ZVxuICAgICAgICAgKiBubyBlcnJvciBvY2N1cnJlZC4gIExpa2V3aXNlLCB0aGUgdHJhbnNpdGlvbi5ydW4oKSBwcm9taXNlIG1heSBiZSByZWplY3RlZCBiZWNhdXNlIG9mXG4gICAgICAgICAqIGEgUmVkaXJlY3QsIGJ1dCB0aGUgdHJhbnNpdGlvblRvKCkgcHJvbWlzZSBpcyBjaGFpbmVkIHRvIHRoZSBuZXcgVHJhbnNpdGlvbidzIHByb21pc2UuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlciA9IGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZWplY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNMYXRlc3QgPSByb3V0ZXIuZ2xvYmFscy5sYXN0U3RhcnRlZFRyYW5zaXRpb25JZCA9PT0gdHJhbnMuJGlkO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci50eXBlID09PSBSZWplY3RUeXBlLklHTk9SRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uc2lkZXIgaWdub3JlZCBgVHJhbnNpdGlvbi5ydW4oKWAgYXMgYSBzdWNjZXNzZnVsIGB0cmFuc2l0aW9uVG9gXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKGdsb2JhbHMuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkZXRhaWwgPSBlcnJvci5kZXRhaWw7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnR5cGUgPT09IFJlamVjdFR5cGUuU1VQRVJTRURFRCAmJiBlcnJvci5yZWRpcmVjdGVkICYmIGRldGFpbCBpbnN0YW5jZW9mIFRhcmdldFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGBUcmFuc2l0aW9uLnJ1bigpYCB3YXMgcmVkaXJlY3RlZCwgYWxsb3cgdGhlIGB0cmFuc2l0aW9uVG8oKWAgcHJvbWlzZSB0byByZXNvbHZlIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgICAgICAgICAvLyBieSByZXR1cm5pbmcgdGhlIHByb21pc2UgZm9yIHRoZSBuZXcgKHJlZGlyZWN0KSBgVHJhbnNpdGlvbi5ydW4oKWAuXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdCA9IHRyYW5zLnJlZGlyZWN0KGRldGFpbCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWRpcmVjdC5ydW4oKS5jYXRjaChyZWplY3RlZFRyYW5zaXRpb25IYW5kbGVyKHJlZGlyZWN0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlcnJvci50eXBlID09PSBSZWplY3RUeXBlLkFCT1JURUQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxlciA9IF90aGlzLmRlZmF1bHRFcnJvckhhbmRsZXIoKTtcbiAgICAgICAgICAgIGVycm9ySGFuZGxlcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gc2VydmljZXMuJHEucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfTsgfTtcbiAgICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUoY3VycmVudFBhdGgsIHJlZik7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uVG9Qcm9taXNlID0gdHJhbnNpdGlvbi5ydW4oKS5jYXRjaChyZWplY3RlZFRyYW5zaXRpb25IYW5kbGVyKHRyYW5zaXRpb24pKTtcbiAgICAgICAgc2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlKHRyYW5zaXRpb25Ub1Byb21pc2UpOyAvLyBpc3N1ZSAjMjY3NlxuICAgICAgICAvLyBSZXR1cm4gYSBwcm9taXNlIGZvciB0aGUgdHJhbnNpdGlvbiwgd2hpY2ggYWxzbyBoYXMgdGhlIHRyYW5zaXRpb24gb2JqZWN0IG9uIGl0LlxuICAgICAgICByZXR1cm4gZXh0ZW5kKHRyYW5zaXRpb25Ub1Byb21pc2UsIHsgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBzdGF0ZSAqaXMqIHRoZSBwcm92aWRlZCBzdGF0ZVxuICAgICAqXG4gICAgICogU2ltaWxhciB0byBbW2luY2x1ZGVzXV0gYnV0IG9ubHkgY2hlY2tzIGZvciB0aGUgZnVsbCBzdGF0ZSBuYW1lLlxuICAgICAqIElmIHBhcmFtcyBpcyBzdXBwbGllZCB0aGVuIGl0IHdpbGwgYmUgdGVzdGVkIGZvciBzdHJpY3QgZXF1YWxpdHkgYWdhaW5zdCB0aGUgY3VycmVudFxuICAgICAqIGFjdGl2ZSBwYXJhbXMgb2JqZWN0LCBzbyBhbGwgcGFyYW1zIG11c3QgbWF0Y2ggd2l0aCBub25lIG1pc3NpbmcgYW5kIG5vIGV4dHJhcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZS4kY3VycmVudC5uYW1lID0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSc7XG4gICAgICpcbiAgICAgKiAvLyBhYnNvbHV0ZSBuYW1lXG4gICAgICogJHN0YXRlLmlzKCdjb250YWN0LmRldGFpbHMuaXRlbScpOyAvLyByZXR1cm5zIHRydWVcbiAgICAgKiAkc3RhdGUuaXMoY29udGFjdERldGFpbEl0ZW1TdGF0ZU9iamVjdCk7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogLy8gcmVsYXRpdmUgbmFtZSAoLiBhbmQgXiksIHR5cGljYWxseSBmcm9tIGEgdGVtcGxhdGVcbiAgICAgKiAvLyBFLmcuIGZyb20gdGhlICdjb250YWN0cy5kZXRhaWxzJyB0ZW1wbGF0ZVxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8ZGl2IG5nLWNsYXNzPVwie2hpZ2hsaWdodGVkOiAkc3RhdGUuaXMoJy5pdGVtJyl9XCI+SXRlbTwvZGl2PlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIFRoZSBzdGF0ZSBuYW1lIChhYnNvbHV0ZSBvciByZWxhdGl2ZSkgb3Igc3RhdGUgb2JqZWN0IHlvdSdkIGxpa2UgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHBhcmFtcyBBIHBhcmFtIG9iamVjdCwgZS5nLiBge3NlY3Rpb25JZDogc2VjdGlvbi5pZH1gLCB0aGF0IHlvdSdkIGxpa2VcbiAgICAgKiB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICogICAtIGByZWxhdGl2ZWA6IElmIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSBuYW1lIGFuZCBgb3B0aW9ucy5yZWxhdGl2ZWAgaXMgc2V0LCAuaXMgd2lsbFxuICAgICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIHRydWUgaWYgaXQgaXMgdGhlIHN0YXRlLlxuICAgICAqL1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIHBhcmFtcywgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgeyByZWxhdGl2ZTogdGhpcy4kY3VycmVudCB9KTtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoc3RhdGVPck5hbWUsIG9wdGlvbnMucmVsYXRpdmUpO1xuICAgICAgICBpZiAoIWlzRGVmaW5lZChzdGF0ZSkpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy4kY3VycmVudCAhPT0gc3RhdGUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghcGFyYW1zKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBzY2hlbWEgPSBzdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogdHJ1ZSwgbWF0Y2hpbmdLZXlzOiBwYXJhbXMgfSk7XG4gICAgICAgIHJldHVybiBQYXJhbS5lcXVhbHMoc2NoZW1hLCBQYXJhbS52YWx1ZXMoc2NoZW1hLCBwYXJhbXMpLCB0aGlzLnBhcmFtcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgc3RhdGUgKmluY2x1ZGVzKiB0aGUgcHJvdmlkZWQgc3RhdGVcbiAgICAgKlxuICAgICAqIEEgbWV0aG9kIHRvIGRldGVybWluZSBpZiB0aGUgY3VycmVudCBhY3RpdmUgc3RhdGUgaXMgZXF1YWwgdG8gb3IgaXMgdGhlIGNoaWxkIG9mIHRoZVxuICAgICAqIHN0YXRlIHN0YXRlTmFtZS4gSWYgYW55IHBhcmFtcyBhcmUgcGFzc2VkIHRoZW4gdGhleSB3aWxsIGJlIHRlc3RlZCBmb3IgYSBtYXRjaCBhcyB3ZWxsLlxuICAgICAqIE5vdCBhbGwgdGhlIHBhcmFtZXRlcnMgbmVlZCB0byBiZSBwYXNzZWQsIGp1c3QgdGhlIG9uZXMgeW91J2QgbGlrZSB0byB0ZXN0IGZvciBlcXVhbGl0eS5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZSB3aGVuIGAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSdgXG4gICAgICogYGBganNcbiAgICAgKiAvLyBVc2luZyBwYXJ0aWFsIG5hbWVzXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHNcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHNcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHMuaXRlbVwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHMubGlzdFwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImFib3V0XCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMjIEdsb2IgRXhhbXBsZXMgd2hlbiBgKiAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbS51cmwnYDpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qLipcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiKiouaXRlbS4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiKi5kZXRhaWxzLml0ZW0udXJsXCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqLmRldGFpbHMuKi51cmxcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qXCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiaXRlbS4qKlwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIEEgcGFydGlhbCBuYW1lLCByZWxhdGl2ZSBuYW1lLCBnbG9iIHBhdHRlcm4sXG4gICAgICogICBvciBzdGF0ZSBvYmplY3QgdG8gYmUgc2VhcmNoZWQgZm9yIHdpdGhpbiB0aGUgY3VycmVudCBzdGF0ZSBuYW1lLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQSBwYXJhbSBvYmplY3QsIGUuZy4gYHtzZWN0aW9uSWQ6IHNlY3Rpb24uaWR9YCxcbiAgICAgKiAgIHRoYXQgeW91J2QgbGlrZSB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICogICAtIGByZWxhdGl2ZWA6IElmIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSBuYW1lIGFuZCBgb3B0aW9ucy5yZWxhdGl2ZWAgaXMgc2V0LCAuaXMgd2lsbFxuICAgICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGl0IGRvZXMgaW5jbHVkZSB0aGUgc3RhdGVcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQgfSk7XG4gICAgICAgIHZhciBnbG9iID0gaXNTdHJpbmcoc3RhdGVPck5hbWUpICYmIEdsb2IuZnJvbVN0cmluZyhzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmIChnbG9iKSB7XG4gICAgICAgICAgICBpZiAoIWdsb2IubWF0Y2hlcyh0aGlzLiRjdXJyZW50Lm5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHN0YXRlT3JOYW1lID0gdGhpcy4kY3VycmVudC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKSwgaW5jbHVkZSA9IHRoaXMuJGN1cnJlbnQuaW5jbHVkZXM7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKHN0YXRlKSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKGluY2x1ZGVbc3RhdGUubmFtZV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB2YXIgc2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IHRydWUsIG1hdGNoaW5nS2V5czogcGFyYW1zIH0pO1xuICAgICAgICByZXR1cm4gUGFyYW0uZXF1YWxzKHNjaGVtYSwgUGFyYW0udmFsdWVzKHNjaGVtYSwgcGFyYW1zKSwgdGhpcy5wYXJhbXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgVVJMIGZvciBhIHN0YXRlIGFuZCBwYXJhbWV0ZXJzXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSB1cmwgZm9yIHRoZSBnaXZlbiBzdGF0ZSBwb3B1bGF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1zLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogZXhwZWN0KCRzdGF0ZS5ocmVmKFwiYWJvdXQucGVyc29uXCIsIHsgcGVyc29uOiBcImJvYlwiIH0pKS50b0VxdWFsKFwiL2Fib3V0L2JvYlwiKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSBUaGUgc3RhdGUgbmFtZSBvciBzdGF0ZSBvYmplY3QgeW91J2QgbGlrZSB0byBnZW5lcmF0ZSBhIHVybCBmcm9tLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IG9mIHBhcmFtZXRlciB2YWx1ZXMgdG8gZmlsbCB0aGUgc3RhdGUncyByZXF1aXJlZCBwYXJhbWV0ZXJzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21waWxlZCBzdGF0ZSB1cmxcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmhyZWYgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIHBhcmFtcywgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGVmYXVsdEhyZWZPcHRzID0ge1xuICAgICAgICAgICAgbG9zc3k6IHRydWUsXG4gICAgICAgICAgICBpbmhlcml0OiB0cnVlLFxuICAgICAgICAgICAgYWJzb2x1dGU6IGZhbHNlLFxuICAgICAgICAgICAgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQsXG4gICAgICAgIH07XG4gICAgICAgIG9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0SHJlZk9wdHMpO1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKTtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQoc3RhdGUpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLmluaGVyaXQpXG4gICAgICAgICAgICBwYXJhbXMgPSB0aGlzLnBhcmFtcy4kaW5oZXJpdChwYXJhbXMsIHRoaXMuJGN1cnJlbnQsIHN0YXRlKTtcbiAgICAgICAgdmFyIG5hdiA9IHN0YXRlICYmIG9wdGlvbnMubG9zc3kgPyBzdGF0ZS5uYXZpZ2FibGUgOiBzdGF0ZTtcbiAgICAgICAgaWYgKCFuYXYgfHwgbmF2LnVybCA9PT0gdW5kZWZpbmVkIHx8IG5hdi51cmwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlci51cmxSb3V0ZXIuaHJlZihuYXYudXJsLCBwYXJhbXMsIHtcbiAgICAgICAgICAgIGFic29sdXRlOiBvcHRpb25zLmFic29sdXRlLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgb3IgZ2V0cyB0aGUgZGVmYXVsdCBbW3RyYW5zaXRpb25Ub11dIGVycm9yIGhhbmRsZXIuXG4gICAgICpcbiAgICAgKiBUaGUgZXJyb3IgaGFuZGxlciBpcyBjYWxsZWQgd2hlbiBhIFtbVHJhbnNpdGlvbl1dIGlzIHJlamVjdGVkIG9yIHdoZW4gYW55IGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgVHJhbnNpdGlvbi5cbiAgICAgKiBUaGlzIGluY2x1ZGVzIGVycm9ycyBjYXVzZWQgYnkgcmVzb2x2ZXMgYW5kIHRyYW5zaXRpb24gaG9va3MuXG4gICAgICpcbiAgICAgKiBOb3RlOlxuICAgICAqIFRoaXMgaGFuZGxlciBkb2VzIG5vdCByZWNlaXZlIGNlcnRhaW4gVHJhbnNpdGlvbiByZWplY3Rpb25zLlxuICAgICAqIFJlZGlyZWN0ZWQgYW5kIElnbm9yZWQgVHJhbnNpdGlvbnMgYXJlIG5vdCBjb25zaWRlcmVkIHRvIGJlIGVycm9ycyBieSBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXS5cbiAgICAgKlxuICAgICAqIFRoZSBidWlsdC1pbiBkZWZhdWx0IGVycm9yIGhhbmRsZXIgbG9ncyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGUuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHByb3ZpZGUgeW91ciBvd24gY3VzdG9tIGhhbmRsZXIuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBzdGF0ZVNlcnZpY2UuZGVmYXVsdEVycm9ySGFuZGxlcihmdW5jdGlvbigpIHtcbiAgICAgKiAgIC8vIERvIG5vdCBsb2cgdHJhbnNpdGlvblRvIGVycm9yc1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGhhbmRsZXIgYSBnbG9iYWwgZXJyb3IgaGFuZGxlciBmdW5jdGlvblxuICAgICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IGdsb2JhbCBlcnJvciBoYW5kbGVyXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5kZWZhdWx0RXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyID0gaGFuZGxlciB8fCB0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyKTtcbiAgICB9O1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBiYXNlKSB7XG4gICAgICAgIHZhciByZWcgPSB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5O1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiByZWcuZ2V0KCk7XG4gICAgICAgIHJldHVybiByZWcuZ2V0KHN0YXRlT3JOYW1lLCBiYXNlIHx8IHRoaXMuJGN1cnJlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTGF6eSBsb2FkcyBhIHN0YXRlXG4gICAgICpcbiAgICAgKiBFeHBsaWNpdGx5IHJ1bnMgYSBzdGF0ZSdzIFtbU3RhdGVEZWNsYXJhdGlvbi5sYXp5TG9hZF1dIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIHRoZSBzdGF0ZSB0aGF0IHNob3VsZCBiZSBsYXp5IGxvYWRlZFxuICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHRoZSBvcHRpb25hbCBUcmFuc2l0aW9uIGNvbnRleHQgdG8gdXNlIChpZiB0aGUgbGF6eUxvYWQgZnVuY3Rpb24gcmVxdWlyZXMgYW4gaW5qZWN0b3IsIGV0YylcbiAgICAgKiBOb3RlOiBJZiBubyB0cmFuc2l0aW9uIGlzIHByb3ZpZGVkLCBhIG5vb3AgdHJhbnNpdGlvbiBpcyBjcmVhdGVkIHVzaW5nIHRoZSBmcm9tIHRoZSBjdXJyZW50IHN0YXRlIHRvIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAqIFRoaXMgbm9vcCB0cmFuc2l0aW9uIGlzIG5vdCBhY3R1YWxseSBydW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgdG8gbGF6eSBsb2FkXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5sYXp5TG9hZCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgdHJhbnNpdGlvbikge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmICghc3RhdGUgfHwgIXN0YXRlLmxhenlMb2FkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gbm90IGxhenkgbG9hZCAnICsgc3RhdGVPck5hbWUpO1xuICAgICAgICB2YXIgY3VycmVudFBhdGggPSB0aGlzLmdldEN1cnJlbnRQYXRoKCk7XG4gICAgICAgIHZhciB0YXJnZXQgPSBQYXRoVXRpbHMubWFrZVRhcmdldFN0YXRlKHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnksIGN1cnJlbnRQYXRoKTtcbiAgICAgICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gfHwgdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlKGN1cnJlbnRQYXRoLCB0YXJnZXQpO1xuICAgICAgICByZXR1cm4gbGF6eUxvYWRTdGF0ZSh0cmFuc2l0aW9uLCBzdGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGVTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFN0YXRlU2VydmljZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVTZXJ2aWNlLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBpc0FycmF5LCBpc09iamVjdCB9IGZyb20gJy4uL2NvbW1vbi9pbmRleCc7XG4vKipcbiAqIEFuIGFuZ3VsYXIxLWxpa2UgcHJvbWlzZSBhcGlcbiAqXG4gKiBUaGlzIG9iamVjdCBpbXBsZW1lbnRzIGZvdXIgbWV0aG9kcyBzaW1pbGFyIHRvIHRoZVxuICogW2FuZ3VsYXIgMSBwcm9taXNlIGFwaV0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJHEpXG4gKlxuICogVUktUm91dGVyIGV2b2x2ZWQgZnJvbSBhbiBhbmd1bGFyIDEgbGlicmFyeSB0byBhIGZyYW1ld29yayBhZ25vc3RpYyBsaWJyYXJ5LlxuICogSG93ZXZlciwgc29tZSBvZiB0aGUgYEB1aXJvdXRlci9jb3JlYCBjb2RlIHVzZXMgdGhlc2UgbmcxIHN0eWxlIEFQSXMgdG8gc3VwcG9ydCBuZzEgc3R5bGUgZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gKlxuICogVGhpcyBBUEkgcHJvdmlkZXMgbmF0aXZlIEVTNiBwcm9taXNlIHN1cHBvcnQgd3JhcHBlZCBhcyBhICRxLWxpa2UgQVBJLlxuICogSW50ZXJuYWxseSwgVUktUm91dGVyIHVzZXMgdGhpcyAkcSBvYmplY3QgdG8gcGVyZm9ybSBwcm9taXNlIG9wZXJhdGlvbnMuXG4gKiBUaGUgYGFuZ3VsYXItdWktcm91dGVyYCAodWktcm91dGVyIGZvciBhbmd1bGFyIDEpIHVzZXMgdGhlICRxIEFQSSBwcm92aWRlZCBieSBhbmd1bGFyLlxuICpcbiAqICRxLWxpa2UgcHJvbWlzZSBhcGlcbiAqL1xuZXhwb3J0IHZhciAkcSA9IHtcbiAgICAvKiogTm9ybWFsaXplcyBhIHZhbHVlIGFzIGEgcHJvbWlzZSAqL1xuICAgIHdoZW46IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgcmV0dXJuIHJlc29sdmUodmFsKTsgfSk7IH0sXG4gICAgLyoqIE5vcm1hbGl6ZXMgYSB2YWx1ZSBhcyBhIHByb21pc2UgcmVqZWN0aW9uICovXG4gICAgcmVqZWN0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICByZWplY3QodmFsKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvKiogQHJldHVybnMgYSBkZWZlcnJlZCBvYmplY3QsIHdoaWNoIGhhcyBgcmVzb2x2ZWAgYW5kIGByZWplY3RgIGZ1bmN0aW9ucyAqL1xuICAgIGRlZmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHt9O1xuICAgICAgICBkZWZlcnJlZC5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XG4gICAgfSxcbiAgICAvKiogTGlrZSBQcm9taXNlLmFsbCgpLCBidXQgYWxzbyBzdXBwb3J0cyBvYmplY3Qga2V5L3Byb21pc2Ugbm90YXRpb24gbGlrZSAkcSAqL1xuICAgIGFsbDogZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgICAgIGlmIChpc0FycmF5KHByb21pc2VzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNPYmplY3QocHJvbWlzZXMpKSB7XG4gICAgICAgICAgICAvLyBDb252ZXJ0IHByb21pc2VzIG1hcCB0byBwcm9taXNlcyBhcnJheS5cbiAgICAgICAgICAgIC8vIFdoZW4gZWFjaCBwcm9taXNlIHJlc29sdmVzLCBtYXAgaXQgdG8gYSB0dXBsZSB7IGtleToga2V5LCB2YWw6IHZhbCB9XG4gICAgICAgICAgICB2YXIgY2hhaW4gPSBPYmplY3Qua2V5cyhwcm9taXNlcykubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHByb21pc2VzW2tleV0udGhlbihmdW5jdGlvbiAodmFsKSB7IHJldHVybiAoeyBrZXk6IGtleSwgdmFsOiB2YWwgfSk7IH0pOyB9KTtcbiAgICAgICAgICAgIC8vIFRoZW4gd2FpdCBmb3IgYWxsIHByb21pc2VzIHRvIHJlc29sdmUsIGFuZCBjb252ZXJ0IHRoZW0gYmFjayB0byBhbiBvYmplY3RcbiAgICAgICAgICAgIHJldHVybiAkcS5hbGwoY2hhaW4pLnRoZW4oZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHR1cGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY1t0dXBsZS5rZXldID0gdHVwbGUudmFsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBleHRlbmQsIGFzc2VydFByZWRpY2F0ZSwgaXNGdW5jdGlvbiwgaXNBcnJheSwgaXNJbmplY3RhYmxlLCB9IGZyb20gJy4uL2NvbW1vbi9pbmRleCc7XG4vLyBnbG9iYWxseSBhdmFpbGFibGUgaW5qZWN0YWJsZXNcbnZhciBnbG9iYWxzID0ge307XG52YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvZ207XG52YXIgQVJHVU1FTlRfTkFNRVMgPSAvKFteXFxzLF0rKS9nO1xuLyoqXG4gKiBBIGJhc2ljIGFuZ3VsYXIxLWxpa2UgaW5qZWN0b3IgYXBpXG4gKlxuICogVGhpcyBvYmplY3QgaW1wbGVtZW50cyBmb3VyIG1ldGhvZHMgc2ltaWxhciB0byB0aGVcbiAqIFthbmd1bGFyIDEgZGVwZW5kZW5jeSBpbmplY3Rvcl0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2F1dG8vc2VydmljZS8kaW5qZWN0b3IpXG4gKlxuICogVUktUm91dGVyIGV2b2x2ZWQgZnJvbSBhbiBhbmd1bGFyIDEgbGlicmFyeSB0byBhIGZyYW1ld29yayBhZ25vc3RpYyBsaWJyYXJ5LlxuICogSG93ZXZlciwgc29tZSBvZiB0aGUgYEB1aXJvdXRlci9jb3JlYCBjb2RlIHVzZXMgdGhlc2UgbmcxIHN0eWxlIEFQSXMgdG8gc3VwcG9ydCBuZzEgc3R5bGUgZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gKlxuICogVGhpcyBvYmplY3QgcHJvdmlkZXMgYSBuYWl2ZSBpbXBsZW1lbnRhdGlvbiBvZiBhIGdsb2JhbGx5IHNjb3BlZCBkZXBlbmRlbmN5IGluamVjdGlvbiBzeXN0ZW0uXG4gKiBJdCBzdXBwb3J0cyB0aGUgZm9sbG93aW5nIERJIGFwcHJvYWNoZXM6XG4gKlxuICogIyMjIEZ1bmN0aW9uIHBhcmFtZXRlciBuYW1lc1xuICpcbiAqIEEgZnVuY3Rpb24ncyBgLnRvU3RyaW5nKClgIGlzIGNhbGxlZCwgYW5kIHRoZSBwYXJhbWV0ZXIgbmFtZXMgYXJlIHBhcnNlZC5cbiAqIFRoaXMgb25seSB3b3JrcyB3aGVuIHRoZSBwYXJhbWV0ZXIgbmFtZXMgYXJlbid0IFwibWFuZ2xlZFwiIGJ5IGEgbWluaWZpZXIgc3VjaCBhcyBVZ2xpZnlKUy5cbiAqXG4gKiBgYGBqc1xuICogZnVuY3Rpb24gaW5qZWN0ZWRGdW5jdGlvbihGb29TZXJ2aWNlLCBCYXJTZXJ2aWNlKSB7XG4gKiAgIC8vIEZvb1NlcnZpY2UgYW5kIEJhclNlcnZpY2UgYXJlIGluamVjdGVkXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgRnVuY3Rpb24gYW5ub3RhdGlvblxuICpcbiAqIEEgZnVuY3Rpb24gbWF5IGJlIGFubm90YXRlZCB3aXRoIGFuIGFycmF5IG9mIGRlcGVuZGVuY3kgbmFtZXMgYXMgdGhlIGAkaW5qZWN0YCBwcm9wZXJ0eS5cbiAqXG4gKiBgYGBqc1xuICogaW5qZWN0ZWRGdW5jdGlvbi4kaW5qZWN0ID0gWyAnRm9vU2VydmljZScsICdCYXJTZXJ2aWNlJyBdO1xuICogZnVuY3Rpb24gaW5qZWN0ZWRGdW5jdGlvbihmcywgYnMpIHtcbiAqICAgLy8gRm9vU2VydmljZSBhbmQgQmFyU2VydmljZSBhcmUgaW5qZWN0ZWQgYXMgZnMgYW5kIGJzIHBhcmFtZXRlcnNcbiAqIH1cbiAqIGBgYFxuICpcbiAqICMjIyBBcnJheSBub3RhdGlvblxuICpcbiAqIEFuIGFycmF5IHByb3ZpZGVzIHRoZSBuYW1lcyBvZiB0aGUgZGVwZW5kZW5jaWVzIHRvIGluamVjdCAoYXMgc3RyaW5ncykuXG4gKiBUaGUgZnVuY3Rpb24gaXMgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgYXJyYXkuXG4gKlxuICogYGBganNcbiAqIFsgJ0Zvb1NlcnZpY2UnLCAnQmFyU2VydmljZScsIGZ1bmN0aW9uIChmcywgYnMpIHtcbiAqICAgLy8gRm9vU2VydmljZSBhbmQgQmFyU2VydmljZSBhcmUgaW5qZWN0ZWQgYXMgZnMgYW5kIGJzIHBhcmFtZXRlcnNcbiAqIH1dXG4gKiBgYGBcbiAqXG4gKiBAdHlwZSB7JEluamVjdG9yTGlrZX1cbiAqL1xuZXhwb3J0IHZhciAkaW5qZWN0b3IgPSB7XG4gICAgLyoqIEdldHMgYW4gb2JqZWN0IGZyb20gREkgYmFzZWQgb24gYSBzdHJpbmcgdG9rZW4gKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBnbG9iYWxzW25hbWVdOyB9LFxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYW4gb2JqZWN0IG5hbWVkIGBuYW1lYCBleGlzdHMgaW4gZ2xvYmFsIERJICovXG4gICAgaGFzOiBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gJGluamVjdG9yLmdldChuYW1lKSAhPSBudWxsOyB9LFxuICAgIC8qKlxuICAgICAqIEluamVjdHMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIGZuIHRoZSBmdW5jdGlvbiB0byBpbmplY3RcbiAgICAgKiBAcGFyYW0gY29udGV4dCB0aGUgZnVuY3Rpb24ncyBgdGhpc2AgYmluZGluZ1xuICAgICAqIEBwYXJhbSBsb2NhbHMgQW4gb2JqZWN0IHdpdGggYWRkaXRpb25hbCBESSB0b2tlbnMgYW5kIHZhbHVlcywgc3VjaCBhcyBgeyBzb21lVG9rZW46IHsgZm9vOiAxIH0gfWBcbiAgICAgKi9cbiAgICBpbnZva2U6IGZ1bmN0aW9uIChmbiwgY29udGV4dCwgbG9jYWxzKSB7XG4gICAgICAgIHZhciBhbGwgPSBleHRlbmQoe30sIGdsb2JhbHMsIGxvY2FscyB8fCB7fSk7XG4gICAgICAgIHZhciBwYXJhbXMgPSAkaW5qZWN0b3IuYW5ub3RhdGUoZm4pO1xuICAgICAgICB2YXIgZW5zdXJlRXhpc3QgPSBhc3NlcnRQcmVkaWNhdGUoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gYWxsLmhhc093blByb3BlcnR5KGtleSk7IH0sIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIFwiREkgY2FuJ3QgZmluZCBpbmplY3RhYmxlOiAnXCIgKyBrZXkgKyBcIidcIjsgfSk7XG4gICAgICAgIHZhciBhcmdzID0gcGFyYW1zLmZpbHRlcihlbnN1cmVFeGlzdCkubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiBhbGxbeF07IH0pO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpXG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBmbi5zbGljZSgtMSlbMF0uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24ncyBkZXBlbmRlbmNpZXNcbiAgICAgKlxuICAgICAqIEFuYWx5emVzIGEgZnVuY3Rpb24gKG9yIGFycmF5KSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBESSB0b2tlbnMgdGhhdCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXG4gICAgICogQHJldHVybiBhbiBhcnJheSBvZiBgc3RyaW5nYHNcbiAgICAgKi9cbiAgICBhbm5vdGF0ZTogZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlmICghaXNJbmplY3RhYmxlKGZuKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBhbiBpbmplY3RhYmxlIGZ1bmN0aW9uOiBcIiArIGZuKTtcbiAgICAgICAgaWYgKGZuICYmIGZuLiRpbmplY3QpXG4gICAgICAgICAgICByZXR1cm4gZm4uJGluamVjdDtcbiAgICAgICAgaWYgKGlzQXJyYXkoZm4pKVxuICAgICAgICAgICAgcmV0dXJuIGZuLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgdmFyIGZuU3RyID0gZm4udG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyk7XG4gICAgICAgIHZhciByZXN1bHQgPSBmblN0ci5zbGljZShmblN0ci5pbmRleE9mKCcoJykgKyAxLCBmblN0ci5pbmRleE9mKCcpJykpLm1hdGNoKEFSR1VNRU5UX05BTUVTKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBbXTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluamVjdG9yLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBpZGVudGl0eSwgdW5uZXN0UiwgaXNBcnJheSwgc3BsaXRFcXVhbCwgc3BsaXRIYXNoLCBzcGxpdFF1ZXJ5LCB9IGZyb20gJy4uL2NvbW1vbic7XG5leHBvcnQgdmFyIGtleVZhbHNUb09iamVjdFIgPSBmdW5jdGlvbiAoYWNjdW0sIF9hKSB7XG4gICAgdmFyIGtleSA9IF9hWzBdLCB2YWwgPSBfYVsxXTtcbiAgICBpZiAoIWFjY3VtLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgYWNjdW1ba2V5XSA9IHZhbDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheShhY2N1bVtrZXldKSkge1xuICAgICAgICBhY2N1bVtrZXldLnB1c2godmFsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFjY3VtW2tleV0gPSBbYWNjdW1ba2V5XSwgdmFsXTtcbiAgICB9XG4gICAgcmV0dXJuIGFjY3VtO1xufTtcbmV4cG9ydCB2YXIgZ2V0UGFyYW1zID0gZnVuY3Rpb24gKHF1ZXJ5U3RyaW5nKSB7XG4gICAgcmV0dXJuIHF1ZXJ5U3RyaW5nXG4gICAgICAgIC5zcGxpdCgnJicpXG4gICAgICAgIC5maWx0ZXIoaWRlbnRpdHkpXG4gICAgICAgIC5tYXAoc3BsaXRFcXVhbClcbiAgICAgICAgLnJlZHVjZShrZXlWYWxzVG9PYmplY3RSLCB7fSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsKHVybCkge1xuICAgIHZhciBvckVtcHR5U3RyaW5nID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggfHwgJyc7IH07XG4gICAgdmFyIF9hID0gc3BsaXRIYXNoKHVybCkubWFwKG9yRW1wdHlTdHJpbmcpLCBiZWZvcmVoYXNoID0gX2FbMF0sIGhhc2ggPSBfYVsxXTtcbiAgICB2YXIgX2IgPSBzcGxpdFF1ZXJ5KGJlZm9yZWhhc2gpLm1hcChvckVtcHR5U3RyaW5nKSwgcGF0aCA9IF9iWzBdLCBzZWFyY2ggPSBfYlsxXTtcbiAgICByZXR1cm4geyBwYXRoOiBwYXRoLCBzZWFyY2g6IHNlYXJjaCwgaGFzaDogaGFzaCwgdXJsOiB1cmwgfTtcbn1cbmV4cG9ydCB2YXIgYnVpbGRVcmwgPSBmdW5jdGlvbiAobG9jKSB7XG4gICAgdmFyIHBhdGggPSBsb2MucGF0aCgpO1xuICAgIHZhciBzZWFyY2hPYmplY3QgPSBsb2Muc2VhcmNoKCk7XG4gICAgdmFyIGhhc2ggPSBsb2MuaGFzaCgpO1xuICAgIHZhciBzZWFyY2ggPSBPYmplY3Qua2V5cyhzZWFyY2hPYmplY3QpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgcGFyYW0gPSBzZWFyY2hPYmplY3Rba2V5XTtcbiAgICAgICAgdmFyIHZhbHMgPSBpc0FycmF5KHBhcmFtKSA/IHBhcmFtIDogW3BhcmFtXTtcbiAgICAgICAgcmV0dXJuIHZhbHMubWFwKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIGtleSArICc9JyArIHZhbDsgfSk7XG4gICAgfSlcbiAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgLmpvaW4oJyYnKTtcbiAgICByZXR1cm4gcGF0aCArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyAoaGFzaCA/ICcjJyArIGhhc2ggOiAnJyk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGxvY2F0aW9uUGx1Z2luRmFjdG9yeShuYW1lLCBpc0h0bWw1LCBzZXJ2aWNlQ2xhc3MsIGNvbmZpZ3VyYXRpb25DbGFzcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAodWlSb3V0ZXIpIHtcbiAgICAgICAgdmFyIHNlcnZpY2UgPSAodWlSb3V0ZXIubG9jYXRpb25TZXJ2aWNlID0gbmV3IHNlcnZpY2VDbGFzcyh1aVJvdXRlcikpO1xuICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9ICh1aVJvdXRlci5sb2NhdGlvbkNvbmZpZyA9IG5ldyBjb25maWd1cmF0aW9uQ2xhc3ModWlSb3V0ZXIsIGlzSHRtbDUpKTtcbiAgICAgICAgZnVuY3Rpb24gZGlzcG9zZShyb3V0ZXIpIHtcbiAgICAgICAgICAgIHJvdXRlci5kaXNwb3NlKHNlcnZpY2UpO1xuICAgICAgICAgICAgcm91dGVyLmRpc3Bvc2UoY29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbmFtZTogbmFtZSwgc2VydmljZTogc2VydmljZSwgY29uZmlndXJhdGlvbjogY29uZmlndXJhdGlvbiwgZGlzcG9zZTogZGlzcG9zZSB9O1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCIvKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi8gLyoqICovXG5pbXBvcnQgeyBkZXJlZ0FsbCwgaXNEZWZpbmVkLCByZW1vdmVGcm9tLCByb290IH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7IGJ1aWxkVXJsLCBnZXRQYXJhbXMsIHBhcnNlVXJsIH0gZnJvbSAnLi91dGlscyc7XG4vKiogQSBiYXNlIGBMb2NhdGlvblNlcnZpY2VzYCAqL1xudmFyIEJhc2VMb2NhdGlvblNlcnZpY2VzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhc2VMb2NhdGlvblNlcnZpY2VzKHJvdXRlciwgZmlyZUFmdGVyVXBkYXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZmlyZUFmdGVyVXBkYXRlID0gZmlyZUFmdGVyVXBkYXRlO1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZ0KSB7IHJldHVybiBfdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IHJldHVybiBjYihldnQpOyB9KTsgfTtcbiAgICAgICAgdGhpcy5oYXNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyc2VVcmwoX3RoaXMuX2dldCgpKS5oYXNoOyB9O1xuICAgICAgICB0aGlzLnBhdGggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBwYXJzZVVybChfdGhpcy5fZ2V0KCkpLnBhdGg7IH07XG4gICAgICAgIHRoaXMuc2VhcmNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0UGFyYW1zKHBhcnNlVXJsKF90aGlzLl9nZXQoKSkuc2VhcmNoKTsgfTtcbiAgICAgICAgdGhpcy5fbG9jYXRpb24gPSByb290LmxvY2F0aW9uO1xuICAgICAgICB0aGlzLl9oaXN0b3J5ID0gcm9vdC5oaXN0b3J5O1xuICAgIH1cbiAgICBCYXNlTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUudXJsID0gZnVuY3Rpb24gKHVybCwgcmVwbGFjZSkge1xuICAgICAgICBpZiAocmVwbGFjZSA9PT0gdm9pZCAwKSB7IHJlcGxhY2UgPSB0cnVlOyB9XG4gICAgICAgIGlmIChpc0RlZmluZWQodXJsKSAmJiB1cmwgIT09IHRoaXMuX2dldCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXQobnVsbCwgbnVsbCwgdXJsLCByZXBsYWNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpcmVBZnRlclVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyByZXR1cm4gY2IoeyB1cmw6IHVybCB9KTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1aWxkVXJsKHRoaXMpO1xuICAgIH07XG4gICAgQmFzZUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGNiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZUZyb20oX3RoaXMuX2xpc3RlbmVycywgY2IpOyB9O1xuICAgIH07XG4gICAgQmFzZUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XG4gICAgICAgIGRlcmVnQWxsKHRoaXMuX2xpc3RlbmVycyk7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUxvY2F0aW9uU2VydmljZXM7XG59KCkpO1xuZXhwb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2VMb2NhdGlvblNlcnZpY2UuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgcm9vdCwgdHJpbUhhc2hWYWwgfSBmcm9tICcuLi9jb21tb24nO1xuaW1wb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfSBmcm9tICcuL2Jhc2VMb2NhdGlvblNlcnZpY2UnO1xuLyoqIEEgYExvY2F0aW9uU2VydmljZXNgIHRoYXQgdXNlcyB0aGUgYnJvd3NlciBoYXNoIFwiI1wiIHRvIGdldC9zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gKi9cbnZhciBIYXNoTG9jYXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhIYXNoTG9jYXRpb25TZXJ2aWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEhhc2hMb2NhdGlvblNlcnZpY2Uocm91dGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJvdXRlciwgZmFsc2UpIHx8IHRoaXM7XG4gICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIF90aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cmltSGFzaFZhbCh0aGlzLl9sb2NhdGlvbi5oYXNoKTtcbiAgICB9O1xuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbiAoc3RhdGUsIHRpdGxlLCB1cmwsIHJlcGxhY2UpIHtcbiAgICAgICAgdGhpcy5fbG9jYXRpb24uaGFzaCA9IHVybDtcbiAgICB9O1xuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIHJvdXRlcik7XG4gICAgICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuX2xpc3RlbmVyKTtcbiAgICB9O1xuICAgIHJldHVybiBIYXNoTG9jYXRpb25TZXJ2aWNlO1xufShCYXNlTG9jYXRpb25TZXJ2aWNlcykpO1xuZXhwb3J0IHsgSGFzaExvY2F0aW9uU2VydmljZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzaExvY2F0aW9uU2VydmljZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBCYXNlTG9jYXRpb25TZXJ2aWNlcyB9IGZyb20gJy4vYmFzZUxvY2F0aW9uU2VydmljZSc7XG4vKiogQSBgTG9jYXRpb25TZXJ2aWNlc2AgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gZnJvbSBhbiBpbi1tZW1vcnkgb2JqZWN0ICovXG52YXIgTWVtb3J5TG9jYXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZW1vcnlMb2NhdGlvblNlcnZpY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVtb3J5TG9jYXRpb25TZXJ2aWNlKHJvdXRlcikge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcm91dGVyLCB0cnVlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNZW1vcnlMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91cmw7XG4gICAgfTtcbiAgICBNZW1vcnlMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbiAoc3RhdGUsIHRpdGxlLCB1cmwsIHJlcGxhY2UpIHtcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xuICAgIH07XG4gICAgcmV0dXJuIE1lbW9yeUxvY2F0aW9uU2VydmljZTtcbn0oQmFzZUxvY2F0aW9uU2VydmljZXMpKTtcbmV4cG9ydCB7IE1lbW9yeUxvY2F0aW9uU2VydmljZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVtb3J5TG9jYXRpb25TZXJ2aWNlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfSBmcm9tICcuL2Jhc2VMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgcm9vdCwgc3BsaXRIYXNoLCBzcGxpdFF1ZXJ5LCBzdHJpcExhc3RQYXRoRWxlbWVudCB9IGZyb20gJy4uL2NvbW1vbic7XG4vKipcbiAqIEEgYExvY2F0aW9uU2VydmljZXNgIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIHVzaW5nIHRoZSBicm93c2VyJ3MgYGxvY2F0aW9uYCBhbmQgYGhpc3RvcnlgIGFwaXNcbiAqXG4gKiBVc2VzIGBoaXN0b3J5LnB1c2hTdGF0ZWAgYW5kIGBoaXN0b3J5LnJlcGxhY2VTdGF0ZWBcbiAqL1xudmFyIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZShyb3V0ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcm91dGVyLCB0cnVlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fY29uZmlnID0gcm91dGVyLnVybFNlcnZpY2UuY29uZmlnO1xuICAgICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgX3RoaXMuX2xpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYmFzZSBwcmVmaXggd2l0aG91dDpcbiAgICAgKiAtIHRyYWlsaW5nIHNsYXNoXG4gICAgICogLSB0cmFpbGluZyBmaWxlbmFtZVxuICAgICAqIC0gcHJvdG9jb2wgYW5kIGhvc3RuYW1lXG4gICAgICpcbiAgICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZS8nPiwgdGhpcyByZXR1cm5zICcvYmFzZScuXG4gICAgICogSWYgPGJhc2UgaHJlZj0nL2Zvby9iYXNlLyc+LCB0aGlzIHJldHVybnMgJy9mb28vYmFzZScuXG4gICAgICogSWYgPGJhc2UgaHJlZj0nL2Jhc2UvaW5kZXguaHRtbCc+LCB0aGlzIHJldHVybnMgJy9iYXNlJy5cbiAgICAgKiBJZiA8YmFzZSBocmVmPSdodHRwOi8vbG9jYWxob3N0OjgwODAvYmFzZS9pbmRleC5odG1sJz4sIHRoaXMgcmV0dXJucyAnL2Jhc2UnLlxuICAgICAqIElmIDxiYXNlIGhyZWY9Jy9iYXNlJz4sIHRoaXMgcmV0dXJucyAnJy5cbiAgICAgKiBJZiA8YmFzZSBocmVmPSdodHRwOi8vbG9jYWxob3N0OjgwODAnPiwgdGhpcyByZXR1cm5zICcnLlxuICAgICAqIElmIDxiYXNlIGhyZWY9J2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC8nPiwgdGhpcyByZXR1cm5zICcnLlxuICAgICAqXG4gICAgICogU2VlOiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL2Rldi9zZW1hbnRpY3MuaHRtbCN0aGUtYmFzZS1lbGVtZW50XG4gICAgICovXG4gICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZ2V0QmFzZVByZWZpeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmlwTGFzdFBhdGhFbGVtZW50KHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpKTtcbiAgICB9O1xuICAgIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX2dldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5fbG9jYXRpb24sIHBhdGhuYW1lID0gX2EucGF0aG5hbWUsIGhhc2ggPSBfYS5oYXNoLCBzZWFyY2ggPSBfYS5zZWFyY2g7XG4gICAgICAgIHNlYXJjaCA9IHNwbGl0UXVlcnkoc2VhcmNoKVsxXTsgLy8gc3RyaXAgPyBpZiBmb3VuZFxuICAgICAgICBoYXNoID0gc3BsaXRIYXNoKGhhc2gpWzFdOyAvLyBzdHJpcCAjIGlmIGZvdW5kXG4gICAgICAgIHZhciBiYXNlUHJlZml4ID0gdGhpcy5fZ2V0QmFzZVByZWZpeCgpO1xuICAgICAgICB2YXIgZXhhY3RCYXNlSHJlZk1hdGNoID0gcGF0aG5hbWUgPT09IHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpO1xuICAgICAgICB2YXIgc3RhcnRzV2l0aEJhc2UgPSBwYXRobmFtZS5zdWJzdHIoMCwgYmFzZVByZWZpeC5sZW5ndGgpID09PSBiYXNlUHJlZml4O1xuICAgICAgICBwYXRobmFtZSA9IGV4YWN0QmFzZUhyZWZNYXRjaCA/ICcvJyA6IHN0YXJ0c1dpdGhCYXNlID8gcGF0aG5hbWUuc3Vic3RyaW5nKGJhc2VQcmVmaXgubGVuZ3RoKSA6IHBhdGhuYW1lO1xuICAgICAgICByZXR1cm4gcGF0aG5hbWUgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgKGhhc2ggPyAnIycgKyBoYXNoIDogJycpO1xuICAgIH07XG4gICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fc2V0ID0gZnVuY3Rpb24gKHN0YXRlLCB0aXRsZSwgdXJsLCByZXBsYWNlKSB7XG4gICAgICAgIHZhciBiYXNlUHJlZml4ID0gdGhpcy5fZ2V0QmFzZVByZWZpeCgpO1xuICAgICAgICB2YXIgc2xhc2ggPSB1cmwgJiYgdXJsWzBdICE9PSAnLycgPyAnLycgOiAnJztcbiAgICAgICAgdmFyIGZ1bGxVcmwgPSB1cmwgPT09ICcnIHx8IHVybCA9PT0gJy8nID8gdGhpcy5fY29uZmlnLmJhc2VIcmVmKCkgOiBiYXNlUHJlZml4ICsgc2xhc2ggKyB1cmw7XG4gICAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5LnJlcGxhY2VTdGF0ZShzdGF0ZSwgdGl0bGUsIGZ1bGxVcmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoU3RhdGUoc3RhdGUsIHRpdGxlLCBmdWxsVXJsKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKHJvdXRlcikge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLCByb3V0ZXIpO1xuICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5fbGlzdGVuZXIpO1xuICAgIH07XG4gICAgcmV0dXJuIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZTtcbn0oQmFzZUxvY2F0aW9uU2VydmljZXMpKTtcbmV4cG9ydCB7IFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLmpzLm1hcCIsImltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbi8qKiBBIGBMb2NhdGlvbkNvbmZpZ2AgbW9jayB0aGF0IGdldHMvc2V0cyBhbGwgY29uZmlnIGZyb20gYW4gaW4tbWVtb3J5IG9iamVjdCAqL1xudmFyIE1lbW9yeUxvY2F0aW9uQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1lbW9yeUxvY2F0aW9uQ29uZmlnKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSBub29wO1xuICAgICAgICB0aGlzLl9iYXNlSHJlZiA9ICcnO1xuICAgICAgICB0aGlzLl9wb3J0ID0gODA7XG4gICAgICAgIHRoaXMuX3Byb3RvY29sID0gJ2h0dHAnO1xuICAgICAgICB0aGlzLl9ob3N0ID0gJ2xvY2FsaG9zdCc7XG4gICAgICAgIHRoaXMuX2hhc2hQcmVmaXggPSAnJztcbiAgICAgICAgdGhpcy5wb3J0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX3BvcnQ7IH07XG4gICAgICAgIHRoaXMucHJvdG9jb2wgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fcHJvdG9jb2w7IH07XG4gICAgICAgIHRoaXMuaG9zdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9ob3N0OyB9O1xuICAgICAgICB0aGlzLmJhc2VIcmVmID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2Jhc2VIcmVmOyB9O1xuICAgICAgICB0aGlzLmh0bWw1TW9kZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICAgICAgICB0aGlzLmhhc2hQcmVmaXggPSBmdW5jdGlvbiAobmV3dmFsKSB7IHJldHVybiAoaXNEZWZpbmVkKG5ld3ZhbCkgPyAoX3RoaXMuX2hhc2hQcmVmaXggPSBuZXd2YWwpIDogX3RoaXMuX2hhc2hQcmVmaXgpOyB9O1xuICAgIH1cbiAgICByZXR1cm4gTWVtb3J5TG9jYXRpb25Db25maWc7XG59KCkpO1xuZXhwb3J0IHsgTWVtb3J5TG9jYXRpb25Db25maWcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbW9yeUxvY2F0aW9uQ29uZmlnLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBpc0RlZmluZWQsIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuLyoqIEEgYExvY2F0aW9uQ29uZmlnYCB0aGF0IGRlbGVnYXRlcyB0byB0aGUgYnJvd3NlcidzIGBsb2NhdGlvbmAgb2JqZWN0ICovXG52YXIgQnJvd3NlckxvY2F0aW9uQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJyb3dzZXJMb2NhdGlvbkNvbmZpZyhyb3V0ZXIsIF9pc0h0bWw1KSB7XG4gICAgICAgIGlmIChfaXNIdG1sNSA9PT0gdm9pZCAwKSB7IF9pc0h0bWw1ID0gZmFsc2U7IH1cbiAgICAgICAgdGhpcy5faXNIdG1sNSA9IF9pc0h0bWw1O1xuICAgICAgICB0aGlzLl9iYXNlSHJlZiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5faGFzaFByZWZpeCA9ICcnO1xuICAgIH1cbiAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLnBvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChsb2NhdGlvbi5wb3J0KSB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKGxvY2F0aW9uLnBvcnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb3RvY29sKCkgPT09ICdodHRwcycgPyA0NDMgOiA4MDtcbiAgICB9O1xuICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUucHJvdG9jb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5yZXBsYWNlKC86L2csICcnKTtcbiAgICB9O1xuICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUuaG9zdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhvc3RuYW1lO1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5odG1sNU1vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0h0bWw1O1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5oYXNoUHJlZml4ID0gZnVuY3Rpb24gKG5ld3ByZWZpeCkge1xuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKG5ld3ByZWZpeCkgPyAodGhpcy5faGFzaFByZWZpeCA9IG5ld3ByZWZpeCkgOiB0aGlzLl9oYXNoUHJlZml4O1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5iYXNlSHJlZiA9IGZ1bmN0aW9uIChocmVmKSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQoaHJlZikpXG4gICAgICAgICAgICB0aGlzLl9iYXNlSHJlZiA9IGhyZWY7XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh0aGlzLl9iYXNlSHJlZikpXG4gICAgICAgICAgICB0aGlzLl9iYXNlSHJlZiA9IHRoaXMuZ2V0QmFzZUhyZWYoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VIcmVmO1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5nZXRCYXNlSHJlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhc2VUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdO1xuICAgICAgICBpZiAoIWJhc2VUYWcgfHwgIWJhc2VUYWcuaHJlZilcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5wYXRobmFtZSB8fCAnLyc7XG4gICAgICAgIHJldHVybiBiYXNlVGFnLmhyZWYucmVwbGFjZSgvXihodHRwcz86KT9cXC9cXC9bXi9dKi8sICcnKTtcbiAgICB9O1xuICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICByZXR1cm4gQnJvd3NlckxvY2F0aW9uQ29uZmlnO1xufSgpKTtcbmV4cG9ydCB7IEJyb3dzZXJMb2NhdGlvbkNvbmZpZyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3NlckxvY2F0aW9uQ29uZmlnLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBCcm93c2VyTG9jYXRpb25Db25maWcgfSBmcm9tICcuL2Jyb3dzZXJMb2NhdGlvbkNvbmZpZyc7XG5pbXBvcnQgeyBIYXNoTG9jYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9oYXNoTG9jYXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IGxvY2F0aW9uUGx1Z2luRmFjdG9yeSB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9wdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgTWVtb3J5TG9jYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9tZW1vcnlMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgTWVtb3J5TG9jYXRpb25Db25maWcgfSBmcm9tICcuL21lbW9yeUxvY2F0aW9uQ29uZmlnJztcbmltcG9ydCB7ICRpbmplY3RvciB9IGZyb20gJy4vaW5qZWN0b3InO1xuaW1wb3J0IHsgJHEgfSBmcm9tICcuL3EnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmV4cG9ydCBmdW5jdGlvbiBzZXJ2aWNlc1BsdWdpbihyb3V0ZXIpIHtcbiAgICBzZXJ2aWNlcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gICAgc2VydmljZXMuJHEgPSAkcTtcbiAgICByZXR1cm4geyBuYW1lOiAndmFuaWxsYS5zZXJ2aWNlcycsICRxOiAkcSwgJGluamVjdG9yOiAkaW5qZWN0b3IsIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0gfTtcbn1cbi8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdXNlcyB0aGUgYnJvd3NlciBoYXNoIHRvIGdldC9zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gKi9cbmV4cG9ydCB2YXIgaGFzaExvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KCd2YW5pbGxhLmhhc2hCYW5nTG9jYXRpb24nLCBmYWxzZSwgSGFzaExvY2F0aW9uU2VydmljZSwgQnJvd3NlckxvY2F0aW9uQ29uZmlnKTtcbi8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gdXNpbmcgdGhlIGJyb3dzZXIncyBgbG9jYXRpb25gIGFuZCBgaGlzdG9yeWAgYXBpcyAqL1xuZXhwb3J0IHZhciBwdXNoU3RhdGVMb2NhdGlvblBsdWdpbiA9IGxvY2F0aW9uUGx1Z2luRmFjdG9yeSgndmFuaWxsYS5wdXNoU3RhdGVMb2NhdGlvbicsIHRydWUsIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSwgQnJvd3NlckxvY2F0aW9uQ29uZmlnKTtcbi8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gZnJvbSBhbiBpbi1tZW1vcnkgb2JqZWN0ICovXG5leHBvcnQgdmFyIG1lbW9yeUxvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KCd2YW5pbGxhLm1lbW9yeUxvY2F0aW9uJywgZmFsc2UsIE1lbW9yeUxvY2F0aW9uU2VydmljZSwgTWVtb3J5TG9jYXRpb25Db25maWcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGx1Z2lucy5qcy5tYXAiLCIvKipcbiAqICMgQ29yZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzXG4gKlxuICogVGhlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMgdGhhdCBhcmUgY29yZSB0byB1aS1yb3V0ZXIgYW5kIGRvIG5vdCBiZWxvbmdcbiAqIHRvIGEgbW9yZSBzcGVjaWZpYyBzdWJzeXN0ZW0gKHN1Y2ggYXMgcmVzb2x2ZSkuXG4gKlxuICogQGNvcmVhcGlcbiAqIEBwcmVmZXJyZWRcbiAqIEBtb2R1bGUgY29yZVxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFVJUm91dGVyUGx1Z2luQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVSVJvdXRlclBsdWdpbkJhc2UoKSB7XG4gICAgfVxuICAgIFVJUm91dGVyUGx1Z2luQmFzZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyb3V0ZXIpIHsgfTtcbiAgICByZXR1cm4gVUlSb3V0ZXJQbHVnaW5CYXNlO1xufSgpKTtcbmV4cG9ydCB7IFVJUm91dGVyUGx1Z2luQmFzZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJmYWNlLmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgY29tbW9uXG4gKi8gLyoqICovXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL3BhcmFtcy9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL3BhdGgvaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi9yZXNvbHZlL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGUvaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi90cmFuc2l0aW9uL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vdXJsL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vdmlldy9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL2dsb2JhbHMnO1xuZXhwb3J0ICogZnJvbSAnLi9yb3V0ZXInO1xuZXhwb3J0ICogZnJvbSAnLi92YW5pbGxhJztcbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=