!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";(function(t){n.d(e,"M",function(){return a}),n.d(e,"x",function(){return s}),n.d(e,"Q",function(){return c}),n.d(e,"w",function(){return l}),n.d(e,"r",function(){return f}),n.d(e,"q",function(){return p}),n.d(e,"y",function(){return h}),n.d(e,"E",function(){return d}),n.d(e,"n",function(){return v}),n.d(e,"A",function(){return m}),n.d(e,"z",function(){return g}),n.d(e,"b",function(){return $}),n.d(e,"L",function(){return y}),n.d(e,"d",function(){return b}),n.d(e,"K",function(){return w}),n.d(e,"c",function(){return x}),n.d(e,"p",function(){return O}),n.d(e,"o",function(){return E}),n.d(e,"D",function(){return S}),n.d(e,"f",function(){return C}),n.d(e,"H",function(){return j}),n.d(e,"F",function(){return k}),n.d(e,"I",function(){return T}),n.d(e,"s",function(){return _}),n.d(e,"t",function(){return A}),n.d(e,"C",function(){return R}),n.d(e,"B",function(){return P}),n.d(e,"U",function(){return N}),n.d(e,"e",function(){return D}),n.d(e,"g",function(){return I}),n.d(e,"T",function(){return M}),n.d(e,"v",function(){return V}),n.d(e,"J",function(){return q}),n.d(e,"R",function(){return L}),n.d(e,"S",function(){return H}),n.d(e,"u",function(){return U}),n.d(e,"l",function(){return F}),n.d(e,"k",function(){return B}),n.d(e,"j",function(){return W}),n.d(e,"G",function(){return z}),n.d(e,"i",function(){return G}),n.d(e,"h",function(){return J}),n.d(e,"P",function(){return K}),n.d(e,"m",function(){return Y}),n.d(e,"a",function(){return X}),n.d(e,"N",function(){return Z}),n.d(e,"O",function(){return tt});var r=n(1),i=n(2),o=n(3),a="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||void 0,u=a.angular||{},s=u.fromJson||JSON.parse.bind(JSON),c=u.toJson||JSON.stringify.bind(JSON),l=u.forEach||function(t,e,n){if(Object(r.a)(t))return t.forEach(e,n);Object.keys(t).forEach(function(n){return e(t[n],n)})},f=Object.assign||X,p=u.equals||Q;function h(t){return t}function d(){}function v(t,e,n,r,i){void 0===i&&(i=!1);var o=function(e){return t()[e].bind(n())};return(r=r||Object.keys(t())).reduce(function(t,n){return t[n]=i?function(t){return function(){return e[t]=o(t),e[t].apply(null,arguments)}}(n):o(n),t},e)}var m=function(t,e){return f(Object.create(t),e)},g=Object(i.e)($);function $(t,e){return-1!==t.indexOf(e)}var y=Object(i.e)(b);function b(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),t}var w=Object(i.e)(x);function x(t,e){return t.push(e),e}var O=function(t){return t.slice().forEach(function(e){"function"==typeof e&&e(),y(t,e)})};function E(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=f.apply(void 0,[{}].concat(e.reverse()));return f(r,j(t||{},Object.keys(r)))}var S=function(t,e){return f(t,e)};function C(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n}function j(t,e){var n={};for(var r in t)-1!==e.indexOf(r)&&(n[r]=t[r]);return n}function k(t,e){return Object.keys(t).filter(Object(i.i)(g(e))).reduce(function(e,n){return e[n]=t[n],e},{})}function T(t,e){return P(t,Object(i.n)(e))}function _(t,e){var n=Object(r.a)(t),i=n?[]:{},o=n?function(t){return i.push(t)}:function(t,e){return i[e]=t};return l(t,function(t,n){e(t,n)&&o(t,n)}),i}function A(t,e){var n;return l(t,function(t,r){n||e(t,r)&&(n=t)}),n}var R=P;function P(t,e,n){return n=n||(Object(r.a)(t)?[]:{}),l(t,function(t,r){return n[r]=e(t,r)}),n}var N=function(t){return Object.keys(t).map(function(e){return t[e]})},D=function(t,e){return t&&e},I=function(t,e){return t||e},M=function(t,e){return t.concat(e)},V=function(t,e){return Object(r.a)(e)?t.concat(e.reduce(V,[])):q(t,e)};function q(t,e){return t.push(e),t}var L=function(t,e){return g(t,e)?t:q(t,e)},H=function(t){return t.reduce(M,[])},U=function(t){return t.reduce(V,[])},F=W,B=W;function W(t,e){return void 0===e&&(e="assert failure"),function(n){var i=t(n);if(!i)throw new Error(Object(r.d)(e)?e(n):e);return i}}var z=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})};function G(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];for(var n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),r=[],i=function(e){switch(t.length){case 1:r.push([t[0][e]]);break;case 2:r.push([t[0][e],t[1][e]]);break;case 3:r.push([t[0][e],t[1][e],t[2][e]]);break;case 4:r.push([t[0][e],t[1][e],t[2][e],t[3][e]]);break;default:r.push(t.map(function(t){return t[e]}))}},o=0;o<n;o++)i(o);return r}function J(t,e){var n,i;if(Object(r.a)(e)&&(n=e[0],i=e[1]),!Object(r.l)(n))throw new Error("invalid parameters to applyPairs");return t[n]=i,t}function K(t){return t.length&&t[t.length-1]||void 0}function Y(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e||(e={}),f(e,t)}function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r=Object.keys(n),i=0;i<r.length;i++)t[r[i]]=n[r[i]]}return t}function Q(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n=typeof t;if(n!==typeof e||"object"!==n)return!1;var o=[t,e];if(Object(i.a)(r.a)(o))return function(t,e){return t.length===e.length&&G(t,e).reduce(function(t,e){return t&&Q(e[0],e[1])},!0)}(t,e);if(Object(i.a)(r.b)(o))return t.getTime()===e.getTime();if(Object(i.a)(r.k)(o))return t.toString()===e.toString();if(Object(i.a)(r.d)(o))return!0;if([r.d,r.a,r.b,r.k].map(i.c).reduce(function(t,e){return t||!!e(o)},!1))return!1;var a={};for(var u in t){if(!Q(t[u],e[u]))return!1;a[u]=!0}for(var u in e)if(!a[u])return!1;return!0}var Z=function(t){return t.catch(function(t){return 0})&&t},tt=function(t){return Z(o.b.$q.reject(t))}}).call(this,n(14))},function(t,e,n){"use strict";n.d(e,"m",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"h",function(){return f}),n.d(e,"l",function(){return p}),n.d(e,"i",function(){return h}),n.d(e,"a",function(){return d}),n.d(e,"b",function(){return v}),n.d(e,"k",function(){return m}),n.d(e,"e",function(){return g}),n.d(e,"j",function(){return $});var r=n(2),i=Object.prototype.toString,o=function(t){return function(e){return typeof e===t}},a=o("undefined"),u=Object(r.i)(a),s=function(t){return null===t},c=Object(r.j)(s,a),l=o("function"),f=o("number"),p=o("string"),h=function(t){return null!==t&&"object"==typeof t},d=Array.isArray,v=function(t){return"[object Date]"===i.call(t)},m=function(t){return"[object RegExp]"===i.call(t)};function g(t){if(d(t)&&t.length){var e=t.slice(0,-1),n=t.slice(-1);return!(e.filter(Object(r.i)(p)).length||n.filter(Object(r.i)(l)).length)}return l(t)}var $=Object(r.b)(h,Object(r.m)(Object(r.n)("then"),l))},function(t,e,n){"use strict";function r(t){var e=[].slice.apply(arguments,[1]),n=t.length;return function e(r){return r.length>=n?t.apply(null,r):function(){return e(r.concat([].slice.apply(arguments)))}}(e)}function i(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(null,[].slice.call(arguments).reverse())}n.d(e,"e",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"m",function(){return o}),n.d(e,"n",function(){return a}),n.d(e,"o",function(){return u}),n.d(e,"k",function(){return s}),n.d(e,"i",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"j",function(){return f}),n.d(e,"a",function(){return p}),n.d(e,"c",function(){return h}),n.d(e,"h",function(){return d}),n.d(e,"f",function(){return v}),n.d(e,"p",function(){return m}),n.d(e,"g",function(){return g}),n.d(e,"l",function(){return $});var a=function(t){return function(e){return e&&e[t]}},u=r(function(t,e,n){return n&&n[t]===e}),s=function(t){return o.apply(null,t.split(".").map(a))},c=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}};function l(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)&&e.apply(null,n)}}function f(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)||e.apply(null,n)}}var p=function(t){return function(e){return e.reduce(function(e,n){return e&&!!t(n)},!0)}},h=function(t){return function(e){return e.reduce(function(e,n){return e||!!t(n)},!1)}},d=function(t){return function(e){return null!=e&&e.constructor===t||e instanceof t}},v=function(t){return function(e){return t===e}},m=function(t){return function(){return t}};function g(t,e){return function(n){return n[t].apply(n,e)}}function $(t){return function(e){for(var n=0;n<t.length;n++)if(t[n][0](e))return t[n][1](e)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}},i={$q:void 0,$injector:void 0}},function(t,e,n){n(12),t.exports=angular},function(t,e,n){"use strict";n(6);!function(t){t&&t.__esModule}(n(11))},function(t,e,n){var r=n(7);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,"div h1{color:black}button{font-size:13px;padding:5px 10px;background-color:orange;color:white;border:none;border-radius:2px}button:hover{font-size:13px;padding:5px 10px;background-color:gray;color:white;border:none;border-radius:2px}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),a=null,u=0,s=[],c=n(10);function l(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(m(i.parts[a],e))}else{var u=[];for(a=0;a<i.parts.length;a++)u.push(m(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:u}}}}function f(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}function p(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=s[s.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),s.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=s.indexOf(t);e>=0&&s.splice(e,1)}function d(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function m(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var s=u++;n=a||(a=d(e)),r=$.bind(null,n,s,!1),i=$.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=c(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),u=t.href;t.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}.bind(null,n,e),i=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){h(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return l(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(u=r[a.id]).refs--,i.push(u)}t&&l(f(t,e),e);for(o=0;o<i.length;o++){var u;if(0===(u=i[o]).refs){for(var s=0;s<u.parts.length;s++)u.parts[s]();delete r[u.id]}}}};var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function $(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(4)),i=(a(n(13)),a(n(15))),o=a(n(18));function a(t){return t&&t.__esModule?t:{default:t}}var u=r.default.module("app",["ui.router"]);u.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("/",{url:"/",templateUrl:"pages/home.html"}).state("/profile",{url:"/profile",templateUrl:"pages/profile.html"})}]),u.controller("HomeCtrl",i.default),u.controller("ProfileCtrl",o.default),e.default=u},function(t,e){
/**
 * @license AngularJS v1.6.9
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";var e={objectMaxDepth:5};function n(t){if(!L(t))return e;q(t.objectMaxDepth)&&(e.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN)}function r(t){return F(t)&&t>0}function i(t,n){return n=n||Error,function(){var r,i,o=arguments[0],a=arguments[1],u="["+(t?t+":":"")+o+"] ",s=pt(arguments,2).map(function(t){return Jt(t,e.objectMaxDepth)});for(u+=a.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<s.length?s[e]:t}),u+="\nhttp://errors.angularjs.org/1.6.9/"+(t?t+"/":"")+o,i=0,r="?";i<s.length;i++,r="&")u+=r+"p"+i+"="+encodeURIComponent(s[i]);return new n(u)}}var o=/^\/(.+)\/([a-z]*)$/,a="validity",u=Object.prototype.hasOwnProperty,s=function(t){return U(t)?t.toLowerCase():t},c=function(t){return U(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(s=function(t){return U(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},c=function(t){return U(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var l,f,p,h,d=[].slice,v=[].splice,m=[].push,g=Object.prototype.toString,$=Object.getPrototypeOf,y=i("ng"),b=t.angular||(t.angular={}),w=0;function x(t){if(null==t||K(t))return!1;if(W(t)||U(t)||f&&t instanceof f)return!0;var e="length"in Object(t)&&t.length;return F(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function O(t,e,n){var r,i;if(t)if(G(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(W(t)||x(t)){var o="object"!=typeof t;for(r=0,i=t.length;r<i;r++)(o||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==O)t.forEach(e,n,t);else if(H(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)u.call(t,r)&&e.call(n,t[r],r,t);return t}function E(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function S(t){return function(e,n){t(n,e)}}function C(){return++w}function j(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function k(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var a=e[i];if(L(a)||G(a))for(var u=Object.keys(a),s=0,c=u.length;s<c;s++){var l=u[s],f=a[l];n&&L(f)?B(f)?t[l]=new Date(f.valueOf()):J(f)?t[l]=new RegExp(f):f.nodeName?t[l]=f.cloneNode(!0):nt(f)?t[l]=f.clone():(L(t[l])||(t[l]=W(f)?[]:{}),k(t[l],[f],!0)):t[l]=f}}return j(t,r),t}function T(t){return k(t,d.call(arguments,1),!1)}function _(t){return k(t,d.call(arguments,1),!0)}function A(t){return parseInt(t,10)}l=t.document.documentMode;var R=Number.isNaN||function(t){return t!=t};function P(t,e){return T(Object.create(t),e)}function N(){}function D(t){return t}function I(t){return function(){return t}}function M(t){return G(t.toString)&&t.toString!==g}function V(t){return void 0===t}function q(t){return void 0!==t}function L(t){return null!==t&&"object"==typeof t}function H(t){return null!==t&&"object"==typeof t&&!$(t)}function U(t){return"string"==typeof t}function F(t){return"number"==typeof t}function B(t){return"[object Date]"===g.call(t)}N.$inject=[],D.$inject=[];var W=Array.isArray;function z(t){switch(g.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function G(t){return"function"==typeof t}function J(t){return"[object RegExp]"===g.call(t)}function K(t){return t&&t.window===t}function Y(t){return t&&t.$evalAsync&&t.$watch}function X(t){return"boolean"==typeof t}function Q(t){return t&&G(t.then)}var Z=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return U(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function rt(t){return s(t.nodeName||t[0]&&t[0].nodeName)}function it(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function ot(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function at(t,e,n){var i=[],o=[];if(n=r(n)?n:NaN,e){if(function(t){return t&&F(t.length)&&Z.test(g.call(t))}(e)||function(t){return"[object ArrayBuffer]"===g.call(t)}(e))throw y("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw y("cpi","Can't copy! Source and destination are identical.");return W(e)?e.length=0:O(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),i.push(t),o.push(e),a(t,e,n)}return s(t,n);function a(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(W(t))for(var o=0,a=t.length;o<a;o++)e.push(s(t[o],n));else if(H(t))for(r in t)e[r]=s(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=s(t[r],n));else for(r in t)u.call(t,r)&&(e[r]=s(t[r],n));return j(e,i),e}function s(t,e){if(!L(t))return t;var n=i.indexOf(t);if(-1!==n)return o[n];if(K(t)||Y(t))throw y("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,u=function(t){switch(g.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(s(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(G(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===u&&(u=W(t)?[]:Object.create($(t)),r=!0),i.push(t),o.push(u),r?a(t,u,e):u}}function ut(t,e){return t===e||t!=t&&e!=e}function st(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o===typeof e&&"object"===o){if(!W(t)){if(B(t))return!!B(e)&&ut(t.getTime(),e.getTime());if(J(t))return!!J(e)&&t.toString()===e.toString();if(Y(t)||Y(e)||K(t)||K(e)||W(e)||B(e)||J(e))return!1;for(r in i=Lt(),t)if("$"!==r.charAt(0)&&!G(t[r])){if(!st(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&q(e[r])&&!G(e[r]))return!1;return!0}if(!W(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!st(t[r],e[r]))return!1;return!0}}return!1}var ct=function(){if(!q(ct.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ct.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ct.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ct.rules},lt=function(){if(q(lt.name_))return lt.name_;var e,n,r,i,o=Ct.length;for(n=0;n<o;++n)if(r=Ct[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return lt.name_=i};function ft(t,e,n){return t.concat(d.call(e,n))}function pt(t,e){return d.call(t,e||0)}function ht(t,e){var n=arguments.length>2?pt(arguments,2):[];return!G(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ft(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:K(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":Y(n)&&(r="$SCOPE"),r}function vt(t,e){if(!V(t))return F(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function mt(t){return U(t)?JSON.parse(t):t}var gt=/:/g;function $t(t,e){t=t.replace(gt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return R(n)?e:n}function yt(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*($t(e,r)-r))}function bt(t){t=f(t).clone().empty();var e=f("<div>").append(t).html();try{return t[0].nodeType===Ft?s(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+s(e)})}catch(t){return s(e)}}function wt(t){try{return decodeURIComponent(t)}catch(t){}}function xt(t){var e={};return O((t||"").split("&"),function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),q(r=wt(r))&&(i=!q(i)||wt(i),u.call(e,r)?W(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))}),e}function Ot(t){var e=[];return O(t,function(t,n){W(t)?O(t,function(t){e.push(St(n,!0)+(!0===t?"":"="+St(t,!0)))}):e.push(St(n,!0)+(!0===t?"":"="+St(t,!0)))}),e.length?e.join("&"):""}function Et(t){return St(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function St(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var Ct=["ng-","data-ng-","ng:","x-ng-"];var jt=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every(function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(t.document);function kt(e,n){var r,i,o={};if(O(Ct,function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))}),O(Ct,function(t){var n,o=t+"app";!r&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!jt)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,r,i=Ct.length;for(r=0;r<i;++r)if(n=Ct[r]+e,U(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],o)}}function Tt(e,n,r){L(r)||(r={});r=T({strictDi:!1},r);var i=function(){if((e=f(e)).injector()){var i=e[0]===t.document?"document":bt(e);throw y("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Ye(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!a.test(t.name))return i();t.name=t.name.replace(a,""),b.resumeBootstrap=function(t){return O(t,function(t){n.push(t)}),i()},G(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function _t(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function At(t){var e=b.element(t).injector();if(!e)throw y("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Rt=/[A-Z]/g;function Pt(t,e){return e=e||"_",t.replace(Rt,function(t,n){return(n?e:"")+t.toLowerCase()})}var Nt=!1;function Dt(t,e,n){if(!t)throw y("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function It(t,e,n){return n&&W(t)&&(t=t[t.length-1]),Dt(G(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Mt(t,e){if("hasOwnProperty"===t)throw y("badname","hasOwnProperty is not a valid {0} name",e)}function Vt(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,u=0;u<a;u++)r=i[u],t&&(t=(o=t)[r]);return!n&&G(t)?ht(o,t):t}function qt(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=f(d.call(t,0,i))),e.push(n));return e||t}function Lt(){return Object.create(null)}function Ht(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!M(t)||W(t)||B(t)?vt(t):t.toString()}return t}var Ut=1,Ft=3,Bt=8,Wt=9,zt=11;function Gt(t,e){if(W(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(L(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Jt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):V(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return r(e)&&(t=b.copy(t,null,e)),JSON.stringify(t,function(t,e){if(L(e=dt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e})}(t,e):t}var Kt={full:"1.6.9",major:1,minor:6,dot:9,codeName:"fiery-basilisk"};he.expando="ng339";var Yt=he.cache={},Xt=1;he._data=function(t){return this.cache[t[this.expando]]||{}};var Qt=/-([a-z])/g,Zt=/^-ms-/,te={mouseleave:"mouseout",mouseenter:"mouseover"},ee=i("jqLite");function ne(t,e){return e.toUpperCase()}function re(t){return t.replace(Qt,ne)}var ie=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,oe=/<|&#?\w+;/,ae=/<([\w:-]+)/,ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,se={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ce(t){return!oe.test(t)}function le(t){var e=t.nodeType;return e===Ut||!e||e===Wt}function fe(t,e){var n,r,i,o,a=e.createDocumentFragment(),u=[];if(ce(t))u.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),r=(ae.exec(t)||["",""])[1].toLowerCase(),i=se[r]||se._default,n.innerHTML=i[1]+t.replace(ue,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;u=ft(u,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",O(u,function(t){a.appendChild(t)}),a}se.optgroup=se.option,se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td;var pe=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function he(e){if(e instanceof he)return e;var n;if(U(e)&&(e=tt(e),n=!0),!(this instanceof he)){if(n&&"<"!==e.charAt(0))throw ee("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new he(e)}n?Oe(this,function(e,n){var r;return n=n||t.document,(r=ie.exec(e))?[n.createElement(r[1])]:(r=fe(e,n))?r.childNodes:[]}(e)):G(e)?ke(e):Oe(this,e)}function de(t){return t.cloneNode(!0)}function ve(t,e){!e&&le(t)&&f.cleanData([t]),t.querySelectorAll&&f.cleanData(t.querySelectorAll("*"))}function me(t,e,n,r){if(q(r))throw ee("offargs","jqLite#off() does not support the `selector` argument");var i=$e(t),o=i&&i.events,a=i&&i.handle;if(a)if(e){var u=function(e){var r=o[e];q(n)&&ot(r||[],n),q(n)&&r&&r.length>0||(t.removeEventListener(e,a),delete o[e])};O(e.split(" "),function(t){u(t),te[t]&&u(te[t])})}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,a),delete o[e]}function ge(t,e){var n=t.ng339,r=n&&Yt[n];if(r){if(e)return void delete r.data[e];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),me(t)),delete Yt[n],t.ng339=void 0}}function $e(t,e){var n=t.ng339,r=n&&Yt[n];return e&&!r&&(t.ng339=n=++Xt,r=Yt[n]={events:{},data:{},handle:void 0}),r}function ye(t,e,n){if(le(t)){var r,i=q(n),o=!i&&e&&!L(e),a=!e,u=$e(t,!o),s=u&&u.data;if(i)s[re(e)]=n;else{if(a)return s;if(o)return s&&s[re(e)];for(r in e)s[re(r)]=e[r]}}}function be(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function we(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;O(e.split(" "),function(t){t=tt(t),r=r.replace(" "+t+" "," ")}),r!==n&&t.setAttribute("class",tt(r))}}function xe(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;O(e.split(" "),function(t){t=tt(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")}),r!==n&&t.setAttribute("class",tt(r))}}function Oe(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ee(t,e){return Se(t,"$"+(e||"ngController")+"Controller")}function Se(t,e,n){t.nodeType===Wt&&(t=t.documentElement);for(var r=W(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if(q(n=f.data(t,r[i])))return n;t=t.parentNode||t.nodeType===zt&&t.host}}function Ce(t){for(ve(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function je(t,e){e||ve(t);var n=t.parentNode;n&&n.removeChild(t)}function ke(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var Te=he.prototype={ready:ke,toString:function(){var t=[];return O(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return f(t>=0?this[t]:this[this.length+t])},length:0,push:m,sort:[].sort,splice:[].splice},_e={};O("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){_e[s(t)]=t});var Ae={};O("input,select,option,textarea,button,form,details".split(","),function(t){Ae[t]=!0});var Re={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Pe(t,e){var n=_e[e.toLowerCase()];return n&&Ae[rt(t)]&&n}function Ne(t,e,n){n.call(t,e)}function De(t,e,n){var r=e.relatedTarget;r&&(r===t||pe.call(t,r))||n.call(t,e)}function Ie(){this.$get=function(){return T(he,{hasClass:function(t,e){return t.attr&&(t=t[0]),be(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),xe(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)}})}}function Me(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||C)():r+":"+t}O({data:ye,removeData:ge,hasData:function(t){for(var e in Yt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ge(t[e])}},function(t,e){he[e]=t}),O({data:ye,inheritedData:Se,scope:function(t){return f.data(t,"$scope")||Se(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return f.data(t,"$isolateScope")||f.data(t,"$isolateScopeNoTemplate")},controller:Ee,injector:function(t){return Se(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:be,css:function(t,e,n){if(e=function(t){return re(t.replace(Zt,"ms-"))}(e),!q(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==Ft&&2!==i&&i!==Bt&&t.getAttribute){var o=s(e),a=_e[o];if(!q(n))return r=t.getAttribute(e),a&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&a?t.removeAttribute(e):t.setAttribute(e,a?o:n)}},prop:function(t,e,n){if(!q(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(V(e)){var n=t.nodeType;return n===Ut||n===Ft?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(V(e)){if(t.multiple&&"select"===rt(t)){var n=[];return O(t.options,function(t){t.selected&&n.push(t.value||t.text)}),n}return t.value}t.value=e},html:function(t,e){if(V(e))return t.innerHTML;ve(t,!0),t.innerHTML=e},empty:Ce},function(t,e){he.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==Ce&&V(2===t.length&&t!==be&&t!==Ee?e:n)){if(L(e)){for(r=0;r<o;r++)if(t===ye)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var a=t.$dv,u=V(a)?Math.min(o,1):o,s=0;s<u;s++){var c=t(this[s],e,n);a=a?a+c:c}return a}for(r=0;r<o;r++)t(this[r],e,n);return this}}),O({removeData:ge,on:function(t,e,n,r){if(q(r))throw ee("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(le(t)){var i=$e(t,!0),o=i.events,a=i.handle;a||(a=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(V(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var u=i.specialHandlerWrapper||Ne;o>1&&(i=Gt(i));for(var s=0;s<o;s++)n.isImmediatePropagationStopped()||u(t,n,i[s])}};return n.elem=t,n}(t,o));for(var u=e.indexOf(" ")>=0?e.split(" "):[e],s=u.length,c=function(e,r,i){var u=o[e];u||((u=o[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,a)),u.push(n)};s--;)e=u[s],te[e]?(c(te[e],De),c(e,void 0,!0)):c(e)}},off:me,one:function(t,e,n){(t=f(t)).on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;ve(t),O(new he(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return O(t.childNodes,function(t){t.nodeType===Ut&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Ut||n===zt)for(var r=0,i=(e=new he(e)).length;r<i;r++){var o=e[r];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===Ut){var n=t.firstChild;O(new he(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){!function(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}(t,f(e).eq(0).clone()[0])},remove:je,detach:function(t){je(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new he(e)).length;i<o;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:xe,removeClass:we,toggleClass:function(t,e,n){e&&O(e.split(" "),function(e){var r=n;V(r)&&(r=!be(t,e)),(r?xe:we)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==zt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:de,triggerHandler:function(t,e,n){var r,i,o,a=e.type||e,u=$e(t),s=u&&u.events,c=s&&s[a];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:N,type:a,target:t},e.type&&(r=T(r,e)),i=Gt(c),o=n?[r].concat(n):[r],O(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){he.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;o<a;o++)V(i)?q(i=t(this[o],e,n,r))&&(i=f(i)):Oe(i,t(this[o],e,n,r));return q(i)?i:this}}),he.prototype.bind=he.prototype.on,he.prototype.unbind=he.prototype.off;var Ve=Object.create(null);function qe(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}qe.prototype={_idx:function(t){return t===this._lastKey?this._lastIndex:(this._lastKey=t,this._lastIndex=this._keys.indexOf(t),this._lastIndex)},_transformKey:function(t){return R(t)?Ve:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Le=qe,He=[function(){this.$get=[function(){return Le}]}],Ue=/^([^(]+?)=>/,Fe=/^[^(]*\(\s*([^)]*)\)/m,Be=/,/,We=/^\s*(_?)(\S+?)\1\s*$/,ze=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ge=i("$injector");function Je(t){return Function.prototype.toString.call(t)}function Ke(t){var e=Je(t).replace(ze,"");return e.match(Ue)||e.match(Fe)}function Ye(t,e){e=!0===e;var n={},r="Provider",i=[],o=new Le,a={$provide:{provider:d(v),factory:d(m),service:d(function(t,e){return m(t,["$injector",function(t){return t.instantiate(e)}])}),value:d(function(t,e){return m(t,I(e),!1)}),constant:d(function(t,e){Mt(t,"constant"),a[t]=e,s[t]=e}),decorator:function(t,e){var n=u.get(t+r),i=n.$get;n.$get=function(){var t=f.invoke(i,n);return f.invoke(e,null,{$delegate:t})}}}},u=a.$injector=$(a,function(t,e){throw b.isString(e)&&i.push(e),Ge("unpr","Unknown provider: {0}",i.join(" <- "))}),s={},c=$(s,function(t,e){var n=u.get(t+r,e);return f.invoke(n.$get,n,void 0,t)}),f=c;a["$injector"+r]={$get:I(c)},f.modules=u.modules=Lt();var p=g(t);return(f=c.get("$injector")).strictDi=e,O(p,function(t){t&&f.invoke(t)}),f.loadNewModules=function(t){O(g(t),function(t){t&&f.invoke(t)})},f;function d(t){return function(e,n){if(!L(e))return t(e,n);O(e,S(t))}}function v(t,e){if(Mt(t,"service"),(G(e)||W(e))&&(e=u.instantiate(e)),!e.$get)throw Ge("pget","Provider '{0}' must define $get factory method.",t);return a[t+r]=e}function m(t,e,n){return v(t,{$get:!1!==n?function(t,e){return function(){var n=f.invoke(e,this);if(V(n))throw Ge("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}(t,e):e})}function g(t){Dt(V(t)||W(t),"modulesToLoad","not an array");var e,n=[];return O(t,function(t){if(!o.get(t)){o.set(t,!0);try{U(t)?(e=h(t),f.modules[t]=e,n=n.concat(g(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):G(t)?n.push(u.invoke(t)):W(t)?n.push(u.invoke(t)):It(t,"module")}catch(e){throw W(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ge("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=u.get(r[0]);i[r[1]].apply(i,r[2])}}}),n}function $(t,o){function u(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ge("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=o(e,r),t[e]}catch(r){throw t[e]===n&&delete t[e],r}finally{i.shift()}}function s(t,n,r){for(var i=[],o=Ye.$$annotate(t,e,r),a=0,s=o.length;a<s;a++){var c=o[a];if("string"!=typeof c)throw Ge("itkn","Incorrect injection token! Expected service name as string, got {0}",c);i.push(n&&n.hasOwnProperty(c)?n[c]:u(c,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i=s(t,n,r);return W(t)&&(t=t[t.length-1]),function(t){if(l||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return X(e)||(e=t.$$ngIsClass=/^(?:class\b|constructor\()/.test(Je(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,n){var r=W(t)?t[t.length-1]:t,i=s(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:u,annotate:Ye.$$annotate,has:function(e){return a.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Xe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var o=n.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=u.yOffset;if(G(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else F(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function u(t){var e;(t=U(t)?t:F(t)?t.toString():r.hash())?(e=o.getElementById(t))?a(e):(e=function(t){var e=null;return Array.prototype.some.call(t,function(t){if("a"===rt(t))return e=t,!0}),e}(o.getElementsByName(t)))?a(e):"top"===t&&a(null):a(null)}return e&&i.$watch(function(){return r.hash()},function(e,n){e===n&&""===e||function(e,n){"complete"===(n=n||t).document.readyState?n.setTimeout(e):f(n).on("load",e)}(function(){i.$evalAsync(u)})}),u}]}Ye.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw U(n)&&n||(n=t.name||function(t){var e=Ke(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Ge("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);O(Ke(t)[1].split(Be),function(t){t.replace(We,function(t,e,n){r.push(n)})})}t.$inject=r}}else W(t)?(It(t[i=t.length-1],"fn"),r=t.slice(0,i)):It(t,"fn",!0);return r};var Qe=i("$animate"),Ze=1;function tn(t,e){return t||e?t?e?(W(t)&&(t=t.join(" ")),W(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function en(t){return L(t)?t:{}}var nn=function(){this.$get=N},rn=function(){var t=new Le,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:N,on:N,off:N,pin:N,push:function(a,u,s,c){c&&c(),(s=s||{}).from&&a.css(s.from),s.to&&a.css(s.to),(s.addClass||s.removeClass)&&function(n,a,u){var s=t.get(n)||{},c=i(s,a,!0),l=i(s,u,!1);(c||l)&&(t.set(n,s),e.push(n),1===e.length&&r.$$postDigest(o))}(a,s.addClass,s.removeClass);var l=new n;return l.complete(),l}};function i(t,e,n){var r=!1;return e&&O(e=U(e)?e.split(" "):W(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function o(){O(e,function(e){var n=t.get(e);if(n){var r=function(t){U(t)&&(t=t.split(" "));var e=Lt();return O(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),i="",o="";O(n,function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)}),O(e,function(t){i&&xe(t,i),o&&we(t,o)}),t.delete(e)}}),e.length=0}}]},on=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Qe("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=G(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&((n=t instanceof RegExp?t:null)&&new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(n.toString())))throw n=null,Qe("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Ze)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,i,o){return r=r&&f(r),i=i&&f(i),e(n,r=r||i.parent(),i),t.push(n,"enter",en(o))},move:function(n,r,i,o){return r=r&&f(r),i=i&&f(i),e(n,r=r||i.parent(),i),t.push(n,"move",en(o))},leave:function(e,n){return t.push(e,"leave",en(n),function(){e.remove()})},addClass:function(e,n,r){return(r=en(r)).addClass=tn(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=en(r)).removeClass=tn(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=en(i)).addClass=tn(i.addClass,n),i.removeClass=tn(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return(o=en(o)).from=o.from?T(o.from,n):n,o.to=o.to?T(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=tn(o.tempClasses,i),t.push(e,"animate",o)}}}]}],an=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},un=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function r(){if(n===t.length)return void e(!0);t[n](function(t){!1!==t?(n++,r()):e(!1)})}()},o.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}O(t,function(t){t.done(i)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:N,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(O(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},sn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=at(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var o,a=new n;return{start:u,end:u};function u(){return t(function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),o||a.complete(),o=!0}),a}}}]};function cn(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new function(t,e,n,r){var i=this,o=t.location,a=t.history,u=t.setTimeout,s=t.clearTimeout,c={};i.isMock=!1;var l=0,p=[];function h(t){try{t.apply(null,pt(arguments,1))}finally{if(0==--l)for(;p.length;)try{p.pop()()}catch(t){n.error(t)}}}i.$$completeOutstandingRequest=h,i.$$incOutstandingRequestCount=function(){l++},i.notifyWhenNoOutstandingRequests=function(t){0===l?t():p.push(t)};var d,v,m=o.href,g=e.find("base"),$=null,y=r.history?function(){try{return a.state}catch(t){}}:N;S(),i.url=function(e,n,u){if(V(u)&&(u=null),o!==t.location&&(o=t.location),a!==t.history&&(a=t.history),e){var s=v===u;if(m===e&&(!r.history||s))return i;var c=m&&ir(m)===ir(e);return m=e,v=u,!r.history||c&&s?(c||($=e),n?o.replace(e):c?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&($=e)):(a[n?"replaceState":"pushState"](u,"",e),S()),$&&($=e),i}return $||o.href.replace(/%27/g,"'")},i.state=function(){return d};var b=[],w=!1;function x(){$=null,C()}var E=null;function S(){st(d=V(d=y())?null:d,E)&&(d=E),E=d,v=d}function C(){var t=v;S(),m===i.url()&&t===d||(m=i.url(),v=d,O(b,function(t){t(i.url(),d)}))}i.onUrlChange=function(e){return w||(r.history&&f(t).on("popstate",x),f(t).on("hashchange",x),w=!0),b.push(e),e},i.$$applicationDestroyed=function(){f(t).off("hashchange popstate",x)},i.$$checkUrlChange=C,i.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},i.defer=function(t,e){var n;return l++,n=u(function(){delete c[n],h(t)},e||0),c[n]=!0,n},i.defer.cancel=function(t){return!!c[t]&&(delete c[t],s(t),h(N),!0)}}(t,r,e,n)}]}function ln(){this.$get=function(){var t={};function e(e,n){if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var r=0,o=T({},n,{id:e}),a=Lt(),u=n&&n.capacity||Number.MAX_VALUE,s=Lt(),c=null,l=null;return t[e]={put:function(t,e){if(!V(e)){if(u<Number.MAX_VALUE)f(s[t]||(s[t]={key:t}));return t in a||r++,a[t]=e,r>u&&this.remove(l.key),e}},get:function(t){if(u<Number.MAX_VALUE){var e=s[t];if(!e)return;f(e)}return a[t]},remove:function(t){if(u<Number.MAX_VALUE){var e=s[t];if(!e)return;e===c&&(c=e.p),e===l&&(l=e.n),p(e.n,e.p),delete s[t]}t in a&&(delete a[t],r--)},removeAll:function(){a=Lt(),r=0,s=Lt(),c=l=null},destroy:function(){a=null,o=null,s=null,delete t[e]},info:function(){return T({},o,{size:r})}};function f(t){t!==c&&(l?l===t&&(l=t.n):l=t,p(t.n,t.p),p(t,c),(c=t).n=null)}function p(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return O(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function fn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var pn=i("$compile");var hn=new function(){};function dn(e,n){var r={},i="Directive",o=/^\s*directive:\s*([\w-]+)\s+(.*)$/,a=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,h=/^(on[a-z]+|formaction)$/,d=Lt();function v(t,e,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,i=Lt();return O(t,function(t,o){if(t in d)i[o]=d[t];else{var a=t.match(r);if(!a)throw pn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(d[t]=i[o])}}),i}function m(t,e){var n={isolateScope:null,bindToController:null};if(L(t.scope)&&(!0===t.bindToController?(n.bindToController=v(t.scope,e,!0),n.isolateScope={}):n.isolateScope=v(t.scope,e,!1)),L(t.bindToController)&&(n.bindToController=v(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw pn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return Dt(n,"name"),Mt(n,"directive"),U(n)?(!function(t){var e=t.charAt(0);if(!e||e!==s(e))throw pn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw pn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Dt(o,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+i,["$injector","$exceptionHandler",function(t,e){var i=[];return O(r[n],function(r,o){try{var a=t.invoke(r);G(a)?a={compile:I(a)}:!a.compile&&a.link&&(a.compile=I(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!W(e)&&L(e)&&O(e,function(t,n){var r=t.match(p);t.substring(r[0].length)||(e[n]=r[0]+n)}),e}(a),a.restrict=function(t,e){if(t&&(!U(t)||!/[EACM]/.test(t)))throw pn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=r.$$moduleName,i.push(a)}catch(t){e(t)}}),i}])),r[n].push(o)):O(n,S(t)),this},this.component=function t(e,n){if(!U(e))return O(e,S(ht(this,t))),this;var r=n.controller||function(){};function i(t){function e(e){return G(e)||W(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=n.template||n.templateUrl?n.template:"",o={controller:r,controllerAs:function(t,e){if(e&&U(e))return e;if(U(t)){var n=xn.exec(t);if(n)return n[3]}}(n.controller)||n.controllerAs||"$ctrl",template:e(i),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return O(n,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return O(n,function(t,e){"$"===e.charAt(0)&&(i[e]=t,G(r)&&(r[e]=t))}),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationWhitelist=function(t){return q(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return q(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var $=!0;this.debugInfoEnabled=function(t){return q(t)?($=t,this):$};var y=!1;this.preAssignBindingsEnabled=function(t){return q(t)?(y=t,this):y};var b=!1;this.strictComponentBindingsEnabled=function(t){return q(t)?(b=t,this):b};var w=10;this.onChangesTtl=function(t){return arguments.length?(w=t,this):w};var x=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(x=t,this):x};var E=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(E=t,this):E},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,d,v,S,C,j,k,_,A){var R,I=/^\w/,M=t.document.createElement("div"),H=x,F=E,B=w;function J(){try{if(!--B)throw R=void 0,pn("infchng","{0} $onChanges() iterations reached. Aborting!\n",w);j.$apply(function(){for(var t=[],e=0,n=R.length;e<n;++e)try{R[e]()}catch(e){t.push(e)}if(R=void 0,t.length)throw t})}finally{B++}}function K(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function Q(t,e){try{t.addClass(e)}catch(t){}}K.prototype={$normalize:$n,$addClass:function(t){t&&t.length>0&&_.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&_.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=yn(t,e);n&&n.length&&_.addClass(this.$$element,n);var r=yn(e,t);r&&r.length&&_.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i,o=Pe(this.$$element[0],t),a=function(t){return Re[t]}(t),u=t;if(o?(this.$$element.prop(t,e),r=o):a&&(this[a]=e,u=a),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Pt(t,"-")),"a"===(i=rt(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===i&&"src"===t)this[t]=e=A(e,"src"===t);else if("img"===i&&"srcset"===t&&q(e)){for(var s="",c=tt(e),l=/\s/.test(c)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,f=c.split(l),p=Math.floor(f.length/2),h=0;h<p;h++){var v=2*h;s+=A(tt(f[v]),!0),s+=" "+tt(f[v+1])}var m=tt(f[2*h]).split(/\s/);s+=A(tt(m[0]),!0),2===m.length&&(s+=" "+tt(m[1])),this[t]=e=s}!1!==n&&(null===e||V(e)?this.$$element.removeAttr(r):I.test(r)?this.$$element.attr(r,e):function(t,e,n){M.innerHTML="<span "+e+">";var r=M.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var g=this.$$observers;g&&O(g[u],function(t){try{t(e)}catch(t){d(t)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=Lt()),i=r[t]||(r[t]=[]);return i.push(e),j.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(t)||V(n[t])||e(n[t])}),function(){ot(i,e)}}};var Z=n.startSymbol(),et=n.endSymbol(),nt="{{"===Z&&"}}"===et?D:function(t){return t.replace(/\{\{/g,Z).replace(/}}/g,et)},it=/^ngAttr[A-Z]/,at=/^(.+)Start$/;return ct.$$addBindingInfo=$?function(t,e){var n=t.data("$binding")||[];W(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:N,ct.$$addBindingClass=$?function(t){Q(t,"ng-binding")}:N,ct.$$addScopeInfo=$?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:N,ct.$$addScopeClass=$?function(t,e){Q(t,e?"ng-isolate-scope":"ng-scope")}:N,ct.$$createComment=function(e,n){var r="";return $&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},ct;function ct(t,e,n,r,i){t instanceof f||(t=f(t));var o=lt(t,e,t,n,r,i);ct.$$addScopeClass(t);var a=null;return function(e,n,r){if(!t)throw pn("multilink","This element has already been linked.");Dt(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var u,s=(r=r||{}).parentBoundTranscludeFn,c=r.transcludeControllers,l=r.futureParentElement;if(s&&s.$$boundTransclude&&(s=s.$$boundTransclude),a||(a=function(t){var e=t&&t[0];return e&&"foreignobject"!==rt(e)&&g.call(e).match(/SVG/)?"svg":"html"}(l)),u="html"!==a?f(Tt(a,f("<div>").append(t).html())):n?Te.clone.call(t):t,c)for(var p in c)u.data("$"+p+"Controller",c[p].instance);return ct.$$addScopeInfo(u,e),n&&n(u,e),o&&o(e,u,u,s),n||(t=o=null),u}}function lt(t,e,n,r,i,o){for(var a,u,s,c,p,h,d,v=[],m=W(t)||t instanceof f,g=0;g<t.length;g++)a=new K,11===l&&ft(t,g,m),(s=(u=vt(t[g],[],a,0===g?r:void 0,i)).length?yt(u,t[g],a,e,n,null,[],[],o):null)&&s.scope&&ct.$$addScopeClass(a.$$element),p=s&&s.terminal||!(c=t[g].childNodes)||!c.length?null:lt(c,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:e),(s||p)&&(v.push(g,s,p),h=!0,d=d||s),o=null;return h?function(t,n,r,i){var o,a,u,s,c,l,p,h,m;if(d){var g=n.length;for(m=new Array(g),c=0;c<v.length;c+=3)p=v[c],m[p]=n[p]}else m=n;for(c=0,l=v.length;c<l;)u=m[v[c++]],o=v[c++],a=v[c++],o?(o.scope?(s=t.$new(),ct.$$addScopeInfo(f(u),s)):s=t,h=o.transcludeOnThisElement?dt(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?dt(t,e):null,o(a,s,u,r,h)):a&&a(t,u.childNodes,void 0,i)}:null}function ft(t,e,n){var r,i=t[e],o=i.parentNode;if(i.nodeType===Ft)for(;(r=o?i.nextSibling:t[e+1])&&r.nodeType===Ft;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function dt(t,e,n){function r(r,i,o,a,u){return r||((r=t.$new(!1,u)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=Lt();for(var o in e.$$slots)e.$$slots[o]?i[o]=dt(t,e.$$slots[o],n):i[o]=null;return r}function vt(t,e,r,i,u){var s,c,l,f=t.nodeType,p=r.$attr;switch(f){case Ut:Ot(e,$n(c=rt(t)),"E",i,u);for(var h,d,v,m,g,$,y=t.attributes,b=0,w=y&&y.length;b<w;b++){var x=!1,O=!1;d=(h=y[b]).name,g=h.value,m=$n(d),($=it.test(m))&&(d=d.replace(mn,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var E=m.match(at);E&&Et(E[1])&&(x=d,O=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),p[v=$n(d.toLowerCase())]=d,!$&&r.hasOwnProperty(v)||(r[v]=g,Pe(t,v)&&(r[v]=!0)),_t(t,e,g,v,$),Ot(e,v,"A",i,u,x,O)}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!F)break;if(L(l=t.className)&&(l=l.animVal),U(l)&&""!==l)for(;s=a.exec(l);)Ot(e,v=$n(s[2]),"C",i,u)&&(r[v]=tt(s[3])),l=l.substr(s.index+s[0].length);break;case Ft:!function(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&ct.$$addBindingClass(e),function(t,e){var i=e.parent();n||ct.$$addBindingClass(i),ct.$$addBindingInfo(i,r.expressions),t.$watch(r,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case Bt:if(!H)break;!function(t,e,n,r,i){try{var a=o.exec(t.nodeValue);if(a){var u=$n(a[1]);Ot(e,u,"M",r,i)&&(n[u]=tt(a[2]))}}catch(t){}}(t,e,r,i,u)}return e.sort(jt),e}function mt(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw pn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===Ut&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return f(r)}function gt(t,e,n){return function(r,i,o,a,u){return i=mt(i[0],e,n),t(r,i,o,a,u)}}function $t(t,e,n,r,i,o){var a;return t?ct(e,n,r,i,o):function(){return a||(a=ct(e,n,r,i,o),e=n=o=null),a.apply(this,arguments)}}function yt(t,e,n,r,i,o,a,u,s){s=s||{};for(var c,l,p,h,v,m=-Number.MAX_VALUE,g=s.newScopeDirective,$=s.controllerDirectives,b=s.newIsolateScopeDirective,w=s.templateDirective,x=s.nonTlbTranscludeDirective,E=!1,S=!1,j=s.hasElementTranscludeDirective,k=n.$$element=f(e),_=o,A=r,R=!1,P=!1,N=0,D=t.length;N<D;N++){var I=(c=t[N]).$$start,M=c.$$end;if(I&&(k=mt(e,I,M)),p=void 0,m>c.priority)break;if((v=c.scope)&&(c.templateUrl||(L(v)?(kt("new/isolated scope",b||g,c,k),b=c):kt("new/isolated scope",b,c,k)),g=g||c),l=c.name,!R&&(c.replace&&(c.templateUrl||c.template)||c.transclude&&!c.$$tlb)){for(var q,H=N+1;q=t[H++];)if(q.transclude&&!q.$$tlb||q.replace&&(q.templateUrl||q.template)){P=!0;break}R=!0}if(!c.templateUrl&&c.controller&&($=$||Lt(),kt("'"+l+"' controller",$[l],c,k),$[l]=c),v=c.transclude)if(E=!0,c.$$tlb||(kt("transclusion",x,c,k),x=c),"element"===v)j=!0,m=c.priority,p=k,k=n.$$element=f(ct.$$createComment(l,n[l])),e=k[0],At(i,pt(p),e),p[0].$$parentNode=p[0].parentNode,A=$t(P,p,r,m,_&&_.name,{nonTlbTranscludeDirective:x});else{var U=Lt();if(L(v)){p=[];var F=Lt(),B=Lt();for(var z in O(v,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,F[t]=e,U[e]=null,B[e]=n}),O(k.contents(),function(t){var e=F[$n(rt(t))];e?(B[e]=!0,U[e]=U[e]||[],U[e].push(t)):p.push(t)}),O(B,function(t,e){if(!t)throw pn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),U)U[z]&&(U[z]=$t(P,U[z],r))}else p=f(de(e)).contents();k.empty(),(A=$t(P,p,r,void 0,void 0,{needsNewScope:c.$$isolateScope||c.$$newScope})).$$slots=U}if(c.template)if(S=!0,kt("template",w,c,k),w=c,v=G(c.template)?c.template(k,n):c.template,v=nt(v),c.replace){if(_=c,p=ce(v)?[]:bn(Tt(c.templateNamespace,tt(v))),e=p[0],1!==p.length||e.nodeType!==Ut)throw pn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",l,"");At(i,k,e);var J={$attr:{}},X=vt(e,[],J),Q=t.splice(N+1,t.length-(N+1));(b||g)&&xt(X,b,g),t=t.concat(X).concat(Q),St(n,J),D=t.length}else k.html(v);if(c.templateUrl)S=!0,kt("template",w,c,k),w=c,c.replace&&(_=c),it=Ct(t.splice(N,t.length-N),k,n,i,E&&A,a,u,{controllerDirectives:$,newScopeDirective:g!==c&&g,newIsolateScopeDirective:b,templateDirective:w,nonTlbTranscludeDirective:x}),D=t.length;else if(c.compile)try{h=c.compile(k,n,A);var Z=c.$$originalDirective||c;G(h)?et(null,ht(Z,h),I,M):h&&et(ht(Z,h.pre),ht(Z,h.post),I,M)}catch(t){d(t,bt(k))}c.terminal&&(it.terminal=!0,m=Math.max(m,c.priority))}return it.scope=g&&!0===g.scope,it.transcludeOnThisElement=E,it.templateOnThisElement=S,it.transclude=A,s.hasElementTranscludeDirective=j,it;function et(t,e,n,r){t&&(n&&(t=gt(t,n,r)),t.require=c.require,t.directiveName=l,(b===c||c.$$isolateScope)&&(t=Rt(t,{isolateScope:!0})),a.push(t)),e&&(n&&(e=gt(e,n,r)),e.require=c.require,e.directiveName=l,(b===c||c.$$isolateScope)&&(e=Rt(e,{isolateScope:!0})),u.push(e))}function it(t,r,i,o,s){var c,l,p,h,v,m,x,E,S,k;for(var _ in e===i?(S=n,E=n.$$element):S=new K(E=f(i),n),v=r,b?h=r.$new(!0):g&&(v=r.$parent),s&&((x=function(t,e,n,r){var i;Y(t)||(r=n,n=e,e=t,t=void 0);j&&(i=m);n||(n=j?E.parent():E);if(!r)return s(t,e,i,n,D);var o=s.$$slots[r];if(o)return o(t,e,i,n,D);if(V(o))throw pn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,bt(E))}).$$boundTransclude=s,x.isSlotFilled=function(t){return!!s.$$slots[t]}),$&&(m=function(t,e,n,r,i,o,a){var u=Lt();for(var s in r){var c=r[s],l={$scope:c===a||c.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},f=c.controller;"@"===f&&(f=e[c.name]);var p=C(f,l,!0,c.controllerAs);u[c.name]=p,t.data("$"+c.name+"Controller",p.instance)}return u}(E,S,x,$,h,r,b)),b&&(ct.$$addScopeInfo(E,h,!0,!(w&&(w===b||w===b.$$originalDirective))),ct.$$addScopeClass(E,!0),h.$$isolateBindings=b.$$isolateBindings,(k=Mt(r,S,h,h.$$isolateBindings,b)).removeWatches&&h.$on("$destroy",k.removeWatches)),m){var A=$[_],R=m[_],P=A.$$bindings.bindToController;if(y){R.bindingInfo=P?Mt(v,S,R.instance,P,A):{};var N=R();N!==R.instance&&(R.instance=N,E.data("$"+A.name+"Controller",N),R.bindingInfo.removeWatches&&R.bindingInfo.removeWatches(),R.bindingInfo=Mt(v,S,R.instance,P,A))}else R.instance=R(),E.data("$"+A.name+"Controller",R.instance),R.bindingInfo=Mt(v,S,R.instance,P,A)}for(O($,function(t,e){var n=t.require;t.bindToController&&!W(n)&&L(n)&&T(m[e].instance,wt(e,n,E,m))}),O(m,function(t){var e=t.instance;if(G(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){d(t)}if(G(e.$onInit))try{e.$onInit()}catch(t){d(t)}G(e.$doCheck)&&(v.$watch(function(){e.$doCheck()}),e.$doCheck()),G(e.$onDestroy)&&v.$on("$destroy",function(){e.$onDestroy()})}),c=0,l=a.length;c<l;c++)Nt(p=a[c],p.isolateScope?h:r,E,S,p.require&&wt(p.directiveName,p.require,E,m),x);var D=r;for(b&&(b.template||null===b.templateUrl)&&(D=h),t&&t(D,i.childNodes,void 0,s),c=u.length-1;c>=0;c--)Nt(p=u[c],p.isolateScope?h:r,E,S,p.require&&wt(p.directiveName,p.require,E,m),x);O(m,function(t){var e=t.instance;G(e.$postLink)&&e.$postLink()})}}function wt(t,e,n,r){var i;if(U(e)){var o=e.match(p),a=e.substring(o[0].length),u=o[1]||o[3],s="?"===o[2];if("^^"===u?n=n.parent():i=(i=r&&r[a])&&i.instance,!i){var c="$"+a+"Controller";i=u?n.inheritedData(c):n.data(c)}if(!i&&!s)throw pn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(W(e)){i=[];for(var l=0,f=e.length;l<f;l++)i[l]=wt(t,e[l],n,r)}else L(e)&&(i={},O(e,function(e,o){i[o]=wt(t,e,n,r)}));return i||null}function xt(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=P(t[r],{$$isolateScope:e,$$newScope:n})}function Ot(t,n,o,a,u,s,c){if(n===u)return null;var l=null;if(r.hasOwnProperty(n))for(var f,p=e.get(n+i),h=0,d=p.length;h<d;h++)if(f=p[h],(V(a)||a>f.priority)&&-1!==f.restrict.indexOf(o)){if(s&&(f=P(f,{$$start:s,$$end:c})),!f.$$bindings){var v=f.$$bindings=m(f,f.name);L(v.isolateScope)&&(f.$$isolateBindings=v.isolateScope)}t.push(f),l=f}return l}function Et(t){if(r.hasOwnProperty(t))for(var n=e.get(t+i),o=0,a=n.length;o<a;o++)if(n[o].multiElement)return!0;return!1}function St(t,e){var n=e.$attr,r=t.$attr;O(t,function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))}),O(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function Ct(t,e,n,r,i,o,a,u){var s,c,l=[],p=e[0],h=t.shift(),m=P(h,{templateUrl:null,transclude:null,replace:null,$$originalDirective:h}),g=G(h.templateUrl)?h.templateUrl(e,n):h.templateUrl,$=h.templateNamespace;return e.empty(),v(g).then(function(d){var v,y,b,w;if(d=nt(d),h.replace){if(b=ce(d)?[]:bn(Tt($,tt(d))),v=b[0],1!==b.length||v.nodeType!==Ut)throw pn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h.name,g);y={$attr:{}},At(r,e,v);var x=vt(v,[],y);L(h.scope)&&xt(x,!0),t=x.concat(t),St(n,y)}else v=p,e.html(d);for(t.unshift(m),s=yt(t,v,n,i,e,h,o,a,u),O(r,function(t,n){t===v&&(r[n]=e[0])}),c=lt(e[0].childNodes,i);l.length;){var E=l.shift(),S=l.shift(),C=l.shift(),j=l.shift(),k=e[0];if(!E.$$destroyed){if(S!==p){var T=S.className;u.hasElementTranscludeDirective&&h.replace||(k=de(v)),At(C,f(S),k),Q(f(k),T)}w=s.transcludeOnThisElement?dt(E,s.transclude,j):j,s(c,E,k,r,w)}}l=null}).catch(function(t){z(t)&&d(t)}),function(t,e,n,r,i){var o=i;e.$$destroyed||(l?l.push(e,n,r,o):(s.transcludeOnThisElement&&(o=dt(e,s.transclude,i)),s(c,e,n,r,o)))}}function jt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function kt(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw pn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,bt(r))}function Tt(e,n){switch(e=s(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function _t(t,e,r,i,o){var a=function(t,e){if("srcdoc"===e)return k.HTML;var n=rt(t);if("src"===e||"ngSrc"===e){if(-1===["img","video","audio","source","track"].indexOf(n))return k.RESOURCE_URL}else if("xlinkHref"===e||"form"===n&&"action"===e||"link"===n&&"href"===e)return k.RESOURCE_URL}(t,i),u=!o,s=c[i]||o,l=n(r,u,a,s);if(l){if("multiple"===i&&"select"===rt(t))throw pn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",bt(t));if(h.test(i))throw pn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var u=o.$$observers||(o.$$observers=Lt()),c=o[i];c!==r&&(l=c&&n(c,!0,a,s),r=c),l&&(o[i]=l(t),(u[i]||(u[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(l,function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)}))}}}})}}function At(e,n,r){var i,o,a=n[0],u=n.length,s=a.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===a){e[i++]=r;for(var c=i,l=c+u-1,p=e.length;c<p;c++,l++)l<p?e[c]=e[l]:delete e[c];e.length-=u-1,e.context===a&&(e.context=r);break}s&&s.replaceChild(r,a);var h=t.document.createDocumentFragment();for(i=0;i<u;i++)h.appendChild(n[i]);for(f.hasData(a)&&(f.data(r,f.data(a)),f(a).off("$destroy")),f.cleanData(h.querySelectorAll("*")),i=1;i<u;i++)delete n[i];n[0]=r,n.length=1}function Rt(t,e){return T(function(){return t.apply(null,arguments)},t,e)}function Nt(t,e,n,r,i,o){try{t(e,n,r,i,o)}catch(t){d(t,bt(n))}}function It(t,e){if(b)throw pn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Mt(t,e,r,i,o){var a,s=[],c={};function l(e,n,i){G(r.$onChanges)&&!ut(n,i)&&(R||(t.$$postDigest(J),R=[]),a||(a={},R.push(f)),a[e]&&(i=a[e].previousValue),a[e]=new vn(i,n))}function f(){r.$onChanges(a),a=void 0}return O(i,function(i,a){var f,p,h,d,v,m=i.attrName,g=i.optional;switch(i.mode){case"@":g||u.call(e,m)||(It(m,o.name),r[a]=e[m]=void 0),v=e.$observe(m,function(t){if(U(t)||X(t)){var e=r[a];l(a,t,e),r[a]=t}}),e.$$observers[m].$$scope=t,U(f=e[m])?r[a]=n(f)(t):X(f)&&(r[a]=f),c[a]=new vn(hn,r[a]),s.push(v);break;case"=":if(!u.call(e,m)){if(g)break;It(m,o.name),e[m]=void 0}if(g&&!e[m])break;p=S(e[m]),d=p.literal?st:ut,h=p.assign||function(){throw f=r[a]=p(t),pn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[m],m,o.name)},f=r[a]=p(t);var $=function(e){return d(e,r[a])||(d(e,f)?h(t,e=r[a]):r[a]=e),f=e};$.$stateful=!0,v=i.collection?t.$watchCollection(e[m],$):t.$watch(S(e[m],$),null,p.literal),s.push(v);break;case"<":if(!u.call(e,m)){if(g)break;It(m,o.name),e[m]=void 0}if(g&&!e[m])break;var y=(p=S(e[m])).literal,b=r[a]=p(t);c[a]=new vn(hn,r[a]),v=t.$watch(p,function(t,e){if(e===t){if(e===b||y&&st(e,b))return;e=b}l(a,t,e),r[a]=t},y),s.push(v);break;case"&":if(g||u.call(e,m)||It(m,o.name),(p=e.hasOwnProperty(m)?S(e[m]):N)===N&&g)break;r[a]=function(e){return p(t,e)}}}),{initialChanges:c,removeWatches:s.length&&function(){for(var t=0,e=s.length;t<e;++t)s[t]()}}}}]}function vn(t,e){this.previousValue=t,this.currentValue=e}dn.$inject=["$provide","$$sanitizeUriProvider"],vn.prototype.isFirstChange=function(){return this.previousValue===hn};var mn=/^((?:x|data)[:\-_])/i,gn=/[:\-_]+(.)/g;function $n(t){return t.replace(mn,"").replace(gn,function(t,e,n){return n?e.toUpperCase():e})}function yn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],u=0;u<i.length;u++)if(a===i[u])continue t;n+=(n.length>0?" ":"")+a}return n}function bn(t){var e=(t=f(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===Bt||n.nodeType===Ft&&""===n.nodeValue.trim())&&v.call(t,e,1)}return t}var wn=i("$controller"),xn=/^(\S+)(\s+as\s+([\w$]+))?$/;function On(){var t={},e=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Mt(e,"controller"),L(e)?T(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(n,r){return function(i,a,u,s){var c,l,f,p;if(u=!0===u,s&&U(s)&&(p=s),U(i)){if(!(l=i.match(xn)))throw wn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);if(f=l[1],p=p||l[3],!(i=t.hasOwnProperty(f)?t[f]:Vt(a.$scope,f,!0)||(e?Vt(r,f,!0):void 0)))throw wn("ctrlreg","The controller with the name '{0}' is not registered.",f);It(i,f,!0)}if(u){var h=(W(i)?i[i.length-1]:i).prototype;return c=Object.create(h||null),p&&o(a,p,c,f||i.name),T(function(){var t=n.invoke(i,c,a,f);return t!==c&&(L(t)||G(t))&&(c=t,p&&o(a,p,c,f||i.name)),c},{instance:c,identifier:p})}return c=n.instantiate(i,a,f),p&&o(a,p,c,f||i.name),c};function o(t,e,n,r){if(!t||!L(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}}]}function En(){this.$get=["$window",function(t){return f(t.document)}]}function Sn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],r=n&&n.hidden;function i(){r=n.hidden}return t.on("visibilitychange",i),e.$on("$destroy",function(){t.off("visibilitychange",i)}),function(){return r}}]}function Cn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var jn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof f&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},kn="application/json",Tn={"Content-Type":kn+";charset=utf-8"},_n=/^\[|^\{(?!\{)/,An={"[":/]$/,"{":/}$/},Rn=/^\)]\}',?\n/,Pn=i("$http");function Nn(t){return L(t)?B(t)?t.toISOString():vt(t):t}function Dn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return E(t,function(t,n){null===t||V(t)||G(t)||(W(t)?O(t,function(t){e.push(St(n)+"="+St(Nn(t)))}):e.push(St(n)+"="+St(Nn(t))))}),e.join("&")}}}function In(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){if(null===n||V(n))return;W(n)?O(n,function(e,n){t(e,r+"["+(L(e)?n:"")+"]")}):L(n)&&!B(n)?E(n,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):e.push(St(r)+"="+St(Nn(n)))}(t,"",!0),e.join("&")}}}function Mn(t,e){if(U(t)){var n=t.replace(Rn,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(kn);if(i||function(t){var e=t.match(_n);return e&&An[e[0]].test(t)}(n))try{t=mt(n)}catch(e){if(!i)return t;throw Pn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}return t}function Vn(t){var e,n=Lt();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return U(t)?O(t.split("\n"),function(t){e=t.indexOf(":"),r(s(tt(t.substr(0,e))),tt(t.substr(e+1)))}):L(t)&&O(t,function(t,e){r(s(e),tt(t))}),n}function qn(t){var e;return function(n){if(e||(e=Vn(t)),n){var r=e[s(n)];return void 0===r&&(r=null),r}return e}}function Ln(t,e,n,r){return G(r)?r(t,e,n):(O(r,function(r){t=r(t,e,n)}),t)}function Hn(t){return 200<=t&&t<300}function Un(){var t=this.defaults={transformResponse:[Mn],transformRequest:[function(t){return!L(t)||function(t){return"[object File]"===g.call(t)}(t)||function(t){return"[object Blob]"===g.call(t)}(t)||function(t){return"[object FormData]"===g.call(t)}(t)?t:vt(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Gt(Tn),put:Gt(Tn),patch:Gt(Tn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return q(t)?(e=!!t,this):e};var n=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(r,o,a,u,l,f,p,h){var d=u("$http");t.paramSerializer=U(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var v=[];function m(n){if(!L(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!U(h.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var u=T({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);u.headers=function(e){var n,r,i,o=t.headers,a=T({},e.headers);o=T({},o.common,o[s(e.method)]);t:for(n in o){for(i in r=s(n),a)if(s(i)===r)continue t;a[n]=o[n]}return function(t,e){var n,r={};return O(t,function(t,i){G(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t}),r}(a,Gt(e))}(n),u.method=c(u.method),u.paramSerializer=U(u.paramSerializer)?p.get(u.paramSerializer):u.paramSerializer,r.$$incOutstandingRequestCount();var g=[],$=[],y=f.resolve(u);return O(v,function(t){(t.request||t.requestError)&&g.unshift(t.request,t.requestError),(t.response||t.responseError)&&$.push(t.response,t.responseError)}),y=(y=b(y=(y=b(y,g)).then(function(n){var r=n.headers,i=Ln(n.data,qn(r),void 0,n.transformRequest);V(i)&&O(r,function(t,e){"content-type"===s(e)&&delete r[e]});V(n.withCredentials)&&!V(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,r){var i,u,c=f.defer(),p=c.promise,v=n.headers,g="jsonp"===s(n.method),$=n.url;g?$=h.getTrustedResourceUrl($):U($)||($=h.valueOf($));$=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}($,n.paramSerializer(n.params)),g&&($=function(t,e){var n=t.split("?");if(n.length>2)throw Pn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return O(xt(n[1]),function(n,r){if("JSON_CALLBACK"===n)throw Pn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(r===e)throw Pn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)}),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}($,n.jsonpCallbackParam));m.pendingRequests.push(n),p.then(E,E),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=L(n.cache)?n.cache:L(t.cache)?t.cache:d);i&&(q(u=i.get($))?Q(u)?u.then(x,x):W(u)?w(u[1],u[0],Gt(u[2]),u[3],u[4]):w(u,200,{},"OK","complete"):i.put($,p));if(V(u)){var y=ii(n.url)?a()[n.xsrfCookieName||t.xsrfCookieName]:void 0;y&&(v[n.xsrfHeaderName||t.xsrfHeaderName]=y),o(n.method,$,r,function(t,n,r,o,a){i&&(Hn(t)?i.put($,[t,n,Vn(r),o,a]):i.remove($));function u(){w(n,t,r,o,a)}e?l.$applyAsync(u):(u(),l.$$phase||l.$apply())},v,n.timeout,n.withCredentials,n.responseType,b(n.eventHandlers),b(n.uploadEventHandlers))}return p;function b(t){if(t){var n={};return O(t,function(t,r){n[r]=function(n){function r(){t(n)}e?l.$applyAsync(r):l.$$phase?r():l.$apply(r)}}),n}}function w(t,e,r,i,o){(Hn(e=e>=-1?e:0)?c.resolve:c.reject)({data:t,status:e,headers:qn(r),config:n,statusText:i,xhrStatus:o})}function x(t){w(t.data,t.status,Gt(t.headers()),t.statusText,t.xhrStatus)}function E(){var t=m.pendingRequests.indexOf(n);-1!==t&&m.pendingRequests.splice(t,1)}}(n,i).then(w,w)}),$)).finally(function(){r.$$completeOutstandingRequest(N)});function b(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function w(t){var e=T({},t);return e.data=Ln(t.data,t.headers,t.status,u.transformResponse),Hn(t.status)?e:f.reject(e)}}return O(n,function(t){v.unshift(U(t)?p.get(t):p.invoke(t))}),m.pendingRequests=[],function(t){O(arguments,function(t){m[t]=function(e,n){return m(T({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){O(arguments,function(t){m[t]=function(e,n,r){return m(T({},r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),m.defaults=t,m}]}function Fn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Bn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(o,a,u,c,l,f,p,h,d,v){if(a=a||t.url(),"jsonp"===s(o))var m=r.createCallback(a),g=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var u=-1,s="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),s=t.type,u="error"===t.type?404:200),n&&n(u,s)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}(a,m,function(t,e){var n=200===t&&r.getResponse(m);w(c,t,n,"",e,"complete"),r.removeCallback(m)});else{var $=e(o,a);$.open(o,a,!0),O(l,function(t,e){q(t)&&$.setRequestHeader(e,t)}),$.onload=function(){var t=$.statusText||"",e="response"in $?$.response:$.responseText,n=1223===$.status?204:$.status;0===n&&(n=e?200:"file"===ri(a).protocol?404:0),w(c,n,e,$.getAllResponseHeaders(),t,"complete")};if($.onerror=function(){w(c,-1,null,null,"","error")},$.onabort=function(){w(c,-1,null,null,"","abort")},$.ontimeout=function(){w(c,-1,null,null,"","timeout")},O(d,function(t,e){$.addEventListener(e,t)}),O(v,function(t,e){$.upload.addEventListener(e,t)}),p&&($.withCredentials=!0),h)try{$.responseType=h}catch(t){if("json"!==h)throw t}$.send(V(u)?null:u)}if(f>0)var y=n(b,f);else Q(f)&&f.then(b);function b(){g&&g(),$&&$.abort()}function w(t,e,r,i,o,a){q(y)&&n.cancel(y),g=$=null,t(e,r,i,o,a)}}}(t,r,t.defer,e,n[0])}]}var Wn=b.$interpolateMinErr=i("$interpolate");function zn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var o=t.length,a=e.length,u=new RegExp(t.replace(/./g,c),"g"),s=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function l(n){return n.replace(u,t).replace(s,e)}function f(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function p(u,s,c,p){if(!u.length||-1===u.indexOf(t)){var h;if(!s)(h=I(l(u))).exp=u,h.expressions=[],h.$$watchDelegate=f;return h}p=!!p;for(var d,v,m,g=0,$=[],y=[],b=u.length,w=[],x=[];g<b;){if(-1===(d=u.indexOf(t,g))||-1===(v=u.indexOf(e,d+o))){g!==b&&w.push(l(u.substring(g)));break}g!==d&&w.push(l(u.substring(g,d))),m=u.substring(d+o,v),$.push(m),y.push(n(m,S)),g=v+a,x.push(w.length),w.push("")}if(c&&w.length>1&&Wn.throwNoconcat(u),!s||$.length){var O=function(t){for(var e=0,n=$.length;e<n;e++){if(p&&V(t[e]))return;w[x[e]]=t[e]}return w.join("")},E=function(t){return c?i.getTrusted(c,t):i.valueOf(t)};return T(function(t){var e=0,n=$.length,i=new Array(n);try{for(;e<n;e++)i[e]=y[e](t);return O(i)}catch(t){r(Wn.interr(u,t))}},{exp:u,expressions:$,$$watchDelegate:function(t,e){var n;return t.$watchGroup(y,function(r,i){var o=O(r);e.call(this,o,r!==i?n:o,t),n=o})}})}function S(t){try{return t=E(t),p&&!q(t)?t:Ht(t)}catch(t){r(Wn.interr(u,t))}}}return p.startSymbol=function(){return t},p.endSymbol=function(){return e},p}]}function Gn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,r,i){var o={};function a(a,u,s,c){var l=arguments.length>4,f=l?pt(arguments,4):[],p=e.setInterval,h=e.clearInterval,d=0,v=q(c)&&!c,m=(v?r:n).defer(),g=m.promise;return s=q(s)?s:0,g.$$intervalId=p(function(){v?i.defer($):t.$evalAsync($),m.notify(d++),s>0&&d>=s&&(m.resolve(d),h(g.$$intervalId),delete o[g.$$intervalId]),v||t.$apply()},u),o[g.$$intervalId]=m,g;function $(){l?a.apply(null,f):a(d)}}return a.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(qr(o[t.$$intervalId].promise),o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},a}]}Wn.throwNoconcat=function(t){throw Wn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Wn.interr=function(t,e){return Wn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Jn=function(){this.$get=function(){var t=b.callbacks,e={};return{createCallback:function(n){var r="_"+(t.$$counter++).toString(36),i="angular.callbacks."+r,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(r);return e[i]=t[r]=o,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var r=e[n];delete t[r.id],delete e[n]}}}},Kn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Yn={http:80,https:443,ftp:21},Xn=i("$location");function Qn(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=Et(e[n].replace(/%2F/g,"/"));return e.join("/")}function Zn(t,e){var n=ri(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=A(n.port)||Yn[n.protocol]||null}var tr=/^\s*[\\/]{2,}/;function er(t,e,n){if(tr.test(t))throw Xn("badpath",'Invalid url "{0}".',t);var r="/"!==t.charAt(0);r&&(t="/"+t);var i=ri(t),o=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var n=t.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),e&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=xt(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function nr(t,e){return t.slice(0,e.length)===e}function rr(t,e){if(nr(e,t))return e.substr(t.length)}function ir(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function or(t){return t.replace(/(#.+)|#$/,"$1")}function ar(t,e,n){this.$$html5=!0,n=n||"",Zn(t,this),this.$$parse=function(t){var n=rr(e,t);if(!U(n))throw Xn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);er(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=Ot(this.$$search),n=this.$$hash?"#"+Et(this.$$hash):"";this.$$url=Qn(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(q(o=rr(t,r))?(a=o,u=n&&q(o=rr(n,o))?e+(rr("/",o)||o):t+a):q(o=rr(e,r))?u=e+o:e===r+"/"&&(u=e),u&&this.$$parse(u),!!u);var o,a,u}}function ur(t,e,n){Zn(t,this),this.$$parse=function(r){var i,o=rr(t,r)||rr(e,r);V(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",V(o)&&(t=r,this.replace())):V(i=rr(n,o))&&(i=o),er(i,this,!1),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;nr(e,n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$compose=function(){var e=Ot(this.$$search),r=this.$$hash?"#"+Et(this.$$hash):"";this.$$url=Qn(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,n){return ir(t)===ir(e)&&(this.$$parse(e),!0)}}function sr(t,e,n){this.$$html5=!0,ur.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===ir(r)?o=r:(a=rr(e,r))?o=t+n+a:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$compose=function(){var e=Ot(this.$$search),r=this.$$hash?"#"+Et(this.$$hash):"";this.$$url=Qn(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url,this.$$urlUpdatedByLocation=!0}}var cr={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:lr("$$absUrl"),url:function(t){if(V(t))return this.$$url;var e=Kn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:lr("$$protocol"),host:lr("$$host"),port:lr("$$port"),path:fr("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(U(t)||F(t))t=t.toString(),this.$$search=xt(t);else{if(!L(t))throw Xn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");O(t=at(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:V(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:fr("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function lr(t){return function(){return this[t]}}function fr(t,e){return function(n){return V(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function pr(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return q(e)?(t=e,this):t},this.html5Mode=function(t){return X(t)?(e.enabled=t,this):L(t)?(X(t.enabled)&&(e.enabled=t.enabled),X(t.requireBase)&&(e.requireBase=t.requireBase),(X(t.rewriteLinks)||U(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){var u,s,c,l=r.baseHref(),p=r.url();if(e.enabled){if(!l&&e.requireBase)throw Xn("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=function(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}(p)+(l||"/"),s=i.history?ar:sr}else c=ir(p),s=ur;var h=function(t){return t.substr(0,ir(t).lastIndexOf("/")+1)}(c);(u=new s(c,h,"#"+t)).$$parseLinkUrl(p,p),u.$$state=r.state();var d=/^\s*(javascript|mailto):/i;function v(t,e,n){var i=u.url(),o=u.$$state;try{r.url(t,e,n),u.$$state=r.state()}catch(t){throw u.url(i),u.$$state=o,t}}o.on("click",function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var s=f(t.target);"a"!==rt(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!U(i)||!V(s.attr(i))){var c=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");L(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=ri(c.animVal).href),d.test(c)||!c||s.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(c,l)&&(t.preventDefault(),u.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),or(u.absUrl())!==or(p)&&r.url(u.absUrl(),!0);var m=!0;return r.onUrlChange(function(t,e){nr(t,h)?(n.$evalAsync(function(){var r,i=u.absUrl(),o=u.$$state;t=or(t),u.$$parse(t),u.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,u.absUrl()===t&&(r?(u.$$parse(i),u.$$state=o,v(i,!1,o)):(m=!1,g(i,o)))}),n.$$phase||n.$digest()):a.location.href=t}),n.$watch(function(){if(m||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var t=or(r.url()),e=or(u.absUrl()),o=r.state(),a=u.$$replace,s=t!==e||u.$$html5&&i.history&&o!==u.$$state;(m||s)&&(m=!1,n.$evalAsync(function(){var e=u.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,u.$$state,o).defaultPrevented;u.absUrl()===e&&(r?(u.$$parse(t),u.$$state=o):(s&&v(e,a,o===u.$$state?null:u.$$state),g(t,o)))}))}u.$$replace=!1}),u;function g(t,e){n.$broadcast("$locationChangeSuccess",u.absUrl(),t,u.$$state,e)}}]}function hr(){var t=!0,e=this;this.debugEnabled=function(e){return q(e)?(t=e,this):t},this.$get=["$window",function(n){var r=l||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()};function i(t){var e=n.console||{},i=e[t]||e.log||N;return function(){var t=[];return O(arguments,function(e){t.push(function(t){return z(t)&&(t.stack&&r?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),Function.prototype.apply.call(i,e,t)}}}]}O([sr,ur,ar],function(t){t.prototype=Object.create(cr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==ar||!this.$$html5)throw Xn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=V(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var dr=i("$parse"),vr={}.constructor.prototype.valueOf;function mr(t){return t+""}var gr=Lt();O("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){gr[t]=!0});var $r={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},yr=function(t){this.options=t};yr.prototype={constructor:yr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=gr[e],o=gr[n],a=gr[r];if(i||o||a){var u=a?r:o?n:e;this.tokens.push({index:this.index,text:u,operator:!0}),this.index+=u.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=q(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw dr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=s(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=$r[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var br=function(t,e){this.lexer=t,this.options=e};function wr(t,e){return void 0!==t?t:e}function xr(t,e){return void 0===t?e:void 0===e?t:t+e}br.Program="Program",br.ExpressionStatement="ExpressionStatement",br.AssignmentExpression="AssignmentExpression",br.ConditionalExpression="ConditionalExpression",br.LogicalExpression="LogicalExpression",br.BinaryExpression="BinaryExpression",br.UnaryExpression="UnaryExpression",br.CallExpression="CallExpression",br.MemberExpression="MemberExpression",br.Identifier="Identifier",br.Literal="Literal",br.ArrayExpression="ArrayExpression",br.Property="Property",br.ObjectExpression="ObjectExpression",br.ThisExpression="ThisExpression",br.LocalsExpression="LocalsExpression",br.NGValueParameter="NGValueParameter",br.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:br.Program,body:t}},expressionStatement:function(){return{type:br.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!jr(t))throw dr("lval","Trying to assign a value to a non l-value");t={type:br.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:br.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:br.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:br.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:br.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:br.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:br.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:br.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:br.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=at(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:br.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:br.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:br.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:br.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:br.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:br.Identifier,name:t.text}},constant:function(){return{type:br.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:br.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:br.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:br.ObjectExpression,properties:e}},throwError:function(t,e){throw dr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw dr("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw dr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:br.ThisExpression},$locals:{type:br.LocalsExpression}}};var Or=1,Er=2;function Sr(t,e,n){var r,i,o,a=t.isPure=function(t,e){switch(t.type){case br.MemberExpression:if(t.computed)return!1;break;case br.UnaryExpression:return Or;case br.BinaryExpression:return"+"!==t.operator&&Or;case br.CallExpression:return!1}return void 0===e?Er:e}(t,n);switch(t.type){case br.Program:r=!0,O(t.body,function(t){Sr(t.expression,e,a),r=r&&t.expression.constant}),t.constant=r;break;case br.Literal:t.constant=!0,t.toWatch=[];break;case br.UnaryExpression:Sr(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case br.BinaryExpression:Sr(t.left,e,a),Sr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case br.LogicalExpression:Sr(t.left,e,a),Sr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case br.ConditionalExpression:Sr(t.test,e,a),Sr(t.alternate,e,a),Sr(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case br.Identifier:t.constant=!1,t.toWatch=[t];break;case br.MemberExpression:Sr(t.object,e,a),t.computed&&Sr(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case br.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),r=o,i=[],O(t.arguments,function(t){Sr(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=o?i:[t];break;case br.AssignmentExpression:Sr(t.left,e,a),Sr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case br.ArrayExpression:r=!0,i=[],O(t.elements,function(t){Sr(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=i;break;case br.ObjectExpression:r=!0,i=[],O(t.properties,function(t){Sr(t.value,e,a),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(Sr(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))}),t.constant=r,t.toWatch=i;break;case br.ThisExpression:case br.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Cr(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function jr(t){return t.type===br.Identifier||t.type===br.MemberExpression}function kr(t){if(1===t.body.length&&jr(t.body[0].expression))return{type:br.AssignmentExpression,left:t.body[0].expression,right:{type:br.NGValueParameter},operator:"="}}function Tr(t){this.$filter=t}function _r(t){this.$filter=t}function Ar(t,e,n){this.ast=new br(t,n),this.astCompiler=n.csp?new _r(e):new Tr(e)}function Rr(t){return G(t.valueOf)?t.valueOf():vr.call(t)}function Pr(){var t,e,n=Lt(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){var o={csp:ct().noUnsafeEval,literals:at(r),isIdentifierStart:G(t)&&t,isIdentifierContinue:G(e)&&e};return a.$$getAst=function(t){return new Ar(new yr(o),i,o).getAst(t).ast},a;function a(t,e){var r,a;switch(typeof t){case"string":if(t=t.trim(),!(r=n[a=t]))(r=new Ar(new yr(o),i,o).parse(t)).constant?r.$$watchDelegate=f:r.oneTime?r.$$watchDelegate=r.literal?l:c:r.inputs&&(r.$$watchDelegate=s),n[a]=r;return p(r,e);case"function":return p(t,e);default:return p(N,e)}}function u(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Rr(t))&&!n)&&(t===e||t!=t&&e!=e)}function s(t,e,n,r,i){var o,a=r.inputs;if(1===a.length){var s=u;return a=a[0],t.$watch(function(t){var e=a(t);return u(e,s,a.isPure)||(o=r(t,void 0,void 0,[e]),s=e&&Rr(e)),o},e,n,i)}for(var c=[],l=[],f=0,p=a.length;f<p;f++)c[f]=u,l[f]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var s=a[n](t);(e||(e=!u(s,c[n],a[n].isPure)))&&(l[n]=s,c[n]=s&&Rr(s))}return e&&(o=r(t,void 0,void 0,l)),o},e,n,i)}function c(t,e,n,r,i){var o,a;return o=r.inputs?s(t,u,n,r,i):t.$watch(function(t){return r(t)},u,n);function u(t,n,r){a=t,G(e)&&e(t,n,r),q(t)&&r.$$postDigest(function(){q(a)&&o()})}}function l(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,G(e)&&e(t,n,r),a(t)&&r.$$postDigest(function(){a(o)&&i()})},n);function a(t){var e=!0;return O(t,function(t){q(t)||(e=!1)}),e}}function f(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function p(t,e){if(!e)return t;var n=t.$$watchDelegate,r=!1,i=n!==l&&n!==c?function(n,i,o,a){var u=r&&a?a[0]:t(n,i,o,a);return e(u,n,i)}:function(n,r,i,o){var a=t(n,r,i,o),u=e(a,n,r);return q(a)?u:a};return r=!t.inputs,n&&n!==s?(i.$$watchDelegate=n,i.inputs=t.inputs):e.$stateful||(i.$$watchDelegate=s,i.inputs=t.inputs?t.inputs:[t]),i.inputs&&(i.inputs=i.inputs.map(function(t){return t.isPure===Er?function(e){return t(e)}:t})),i}}]}function Nr(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Ir(function(t){e.$evalAsync(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return q(e)?(t=e,this):t}}function Dr(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Ir(function(t){e.defer(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return q(e)?(t=e,this):t}}function Ir(t,e,n){var r=i("$q",TypeError),o=0,a=[];function u(){return new function(){var t=this.promise=new s;this.resolve=function(e){f(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){d(t,e)}}}function s(){this.$$state={status:0}}function c(){for(;!o&&a.length;){var t=a.shift();if(!Mr(t)){Vr(t);var n="Possibly unhandled rejection: "+Jt(t.value);z(t.value)?e(t.value,n):e(n)}}}function l(r){!n||r.pending||2!==r.status||Mr(r)||(0===o&&0===a.length&&t(c),a.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++o,t(function(){!function(r){var i,a,u;u=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var s=0,l=u.length;s<l;++s){Vr(r),a=u[s][0],i=u[s][r.status];try{G(i)?f(a,i(r.value)):1===r.status?f(a,r.value):p(a,r.value)}catch(t){p(a,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--o,n&&0===o&&t(c)}}(r)}))}function f(t,e){t.$$state.status||(e===t?h(t,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):function t(e,n){var r;var i=!1;try{(L(n)||G(n))&&(r=n.then),G(r)?(e.$$state.status=-1,r.call(n,function o(t){if(i)return;i=!0,function t(e,n){var r;var i=!1;try{(L(n)||G(n))&&(r=n.then),G(r)?(e.$$state.status=-1,r.call(n,o,a,function(t){d(e,t)})):(e.$$state.value=n,e.$$state.status=1,l(e.$$state))}catch(t){a(t)}function o(n){i||(i=!0,t(e,n))}function a(t){i||(i=!0,h(e,t))}}(e,t)},a,function(t){d(e,t)})):(e.$$state.value=n,e.$$state.status=1,l(e.$$state))}catch(t){a(t)}function o(n){i||(i=!0,t(e,n))}function a(t){i||(i=!0,h(e,t))}}(t,e))}function p(t,e){t.$$state.status||h(t,e)}function h(t,e){t.$$state.value=e,t.$$state.status=2,l(t.$$state)}function d(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t(function(){for(var t,n,o=0,a=i.length;o<a;o++){n=i[o][0],t=i[o][3];try{d(n,G(t)?t(r):r)}catch(t){e(t)}}})}function v(t){var e=new s;return p(e,t),e}function m(t,e,n){var r=null;try{G(n)&&(r=n())}catch(t){return v(t)}return Q(r)?r.then(function(){return e(t)},v):e(t)}function g(t,e,n,r){var i=new s;return f(i,t),i.then(e,n,r)}T(s.prototype,{then:function(t,e,n){if(V(t)&&V(e)&&V(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&l(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return m(e,$,t)},function(e){return m(e,v,t)},e)}});var $=g;function y(t){if(!G(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new s;return t(function(t){f(e,t)},function(t){p(e,t)}),e}return y.prototype=s.prototype,y.defer=u,y.reject=v,y.when=g,y.resolve=$,y.all=function(t){var e=new s,n=0,r=W(t)?[]:{};return O(t,function(t,i){n++,g(t).then(function(t){r[i]=t,--n||f(e,r)},function(t){p(e,t)})}),0===n&&f(e,r),e},y.race=function(t){var e=u();return O(t,function(t){g(t).then(e.resolve,e.reject)}),e.promise},y}function Mr(t){return!!t.pur}function Vr(t){t.pur=!0}function qr(t){Vr(t.$$state)}function Lr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Hr(){var t=10,e=i("$rootScope"),n=null,r=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,o,a){function s(t){t.currentScope.$$destroyed=!0}function c(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(t,e){var n;return e=e||this,t?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",s),n},$watch:function(t,e,r,i){var a=o(t),u=G(e)?e:N;if(a.$$watchDelegate)return a.$$watchDelegate(this,u,r,a,t);var s=this,c=s.$$watchers,l={fn:u,last:b,get:a,exp:i||t,eq:!!r};return n=null,c||((c=s.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,$(this,1),function(){var t=ot(c,l);t>=0&&($(s,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],o=this,a=!1,u=!0;if(!t.length){var s=!0;return o.$evalAsync(function(){s&&e(r,r,o)}),function(){s=!1}}if(1===t.length)return this.$watch(t[0],function(t,i,o){r[0]=t,n[0]=i,e(r,t===i?r:n,o)});function c(){a=!1,u?(u=!1,e(r,r,o)):e(r,n,o)}return O(t,function(t,e){var u=o.$watch(t,function(t,i){r[e]=t,n[e]=i,a||(a=!0,o.$evalAsync(c))});i.push(u)}),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){v.$stateful=!0;var n,r,i,a=this,s=e.length>1,c=0,l=o(t,v),f=[],p={},h=!0,d=0;function v(t){var e,i,o,a;if(!V(n=t)){if(L(n))if(x(n)){r!==f&&(d=(r=f).length=0,c++),e=n.length,d!==e&&(c++,r.length=d=e);for(var s=0;s<e;s++)a=r[s],o=n[s],a!=a&&o!=o||a===o||(c++,r[s]=o)}else{for(i in r!==p&&(r=p={},d=0,c++),e=0,n)u.call(n,i)&&(e++,o=n[i],a=r[i],i in r?a!=a&&o!=o||a===o||(c++,r[i]=o):(d++,r[i]=o,c++));if(d>e)for(i in c++,r)u.call(n,i)||(d--,delete r[i])}else r!==n&&(r=n,c++);return c}}return this.$watch(l,function(){if(h?(h=!1,e(n,n,a)):e(n,i,a),s)if(L(n))if(x(n)){i=new Array(n.length);for(var t=0;t<n.length;t++)i[t]=n[t]}else for(var r in i={},n)u.call(n,r)&&(i[r]=n[r]);else i=n})},$digest:function(){var o,u,s,c,l,d,$,y,x,O=t,E=[];m("$digest"),a.$$checkUrlChange(),this===f&&null!==r&&(a.defer.cancel(r),w()),n=null;do{l=!1,$=this;for(var S=0;S<p.length;S++){try{(0,(x=p[S]).fn)(x.scope,x.locals)}catch(t){i(t)}n=null}p.length=0;t:do{if(c=$.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(o=c[c.$$digestWatchIndex])if((u=(0,o.get)($))===(s=o.last)||(o.eq?st(u,s):R(u)&&R(s))){if(o===n){l=!1;break t}}else l=!0,n=o,o.last=o.eq?at(u,null):u,(0,o.fn)(u,s===b?u:s,$),O<5&&(E[y=4-O]||(E[y]=[]),E[y].push({msg:G(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:u,oldVal:s}))}catch(t){i(t)}if(!(d=$.$$watchersCount&&$.$$childHead||$!==this&&$.$$nextSibling))for(;$!==this&&!(d=$.$$nextSibling);)$=$.$parent}while($=d);if((l||p.length)&&!O--)throw g(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,E)}while(l||p.length);for(g();v<h.length;)try{h[v++]()}catch(t){i(t)}h.length=v=0,a.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===f&&a.$$applicationDestroyed(),$(this,-this.$$watchersCount),this.$$listenerCount)y(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=N,this.$on=this.$watch=this.$watchGroup=function(){return N},this.$$listeners={},this.$$nextSibling=null,function t(e){9===l&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return o(t)(this,e)},$evalAsync:function(t,e){f.$$phase||p.length||a.defer(function(){p.length&&f.$digest()}),p.push({scope:this,fn:o(t),locals:e})},$$postDigest:function(t){h.push(t)},$apply:function(t){try{m("$apply");try{return this.$eval(t)}finally{g()}}catch(t){i(t)}finally{try{f.$digest()}catch(t){throw i(t),t}}},$applyAsync:function(t){var e=this;t&&d.push(function(){e.$eval(t)}),t=o(t),null===r&&(r=a.defer(function(){f.$apply(w)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],y(i,1,t))}},$emit:function(t,e){var n,r,o,a=[],u=this,s=!1,c={name:t,targetScope:u,stopPropagation:function(){s=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=ft([c],arguments,1);do{for(n=u.$$listeners[t]||a,c.currentScope=u,r=0,o=n.length;r<o;r++)if(n[r])try{n[r].apply(null,l)}catch(t){i(t)}else n.splice(r,1),r--,o--;if(s)break;u=u.$parent}while(u);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,r=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var a,u,s,c=ft([o],arguments,1);n=r;){for(o.currentScope=n,u=0,s=(a=n.$$listeners[t]||[]).length;u<s;u++)if(a[u])try{a[u].apply(null,c)}catch(t){i(t)}else a.splice(u,1),u--,s--;if(!(r=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(r=n.$$nextSibling);)n=n.$parent}return o.currentScope=null,o}};var f=new c,p=f.$$asyncQueue=[],h=f.$$postDigestQueue=[],d=f.$$applyAsyncQueue=[],v=0;return f;function m(t){if(f.$$phase)throw e("inprog","{0} already in progress",f.$$phase);f.$$phase=t}function g(){f.$$phase=null}function $(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function y(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function b(){}function w(){for(;d.length;)try{d.shift()()}catch(t){i(t)}r=null}}]}function Ur(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return q(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return q(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return""===(i=ri(n&&n.trim()).href)||i.match(o)?n:"unsafe:"+i}}}Tr.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Sr(t,e.$filter);var n,r="";if(this.stage="assign",n=kr(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Cr(t.body);e.stage="inputs",O(o,function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",u=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,mr,wr,xr);return this.state=this.stage=void 0,u},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return O(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return O(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,o){var a,u,s,c,l,f=this;if(r=r||N,!o&&q(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case br.Program:O(t.body,function(e,n){f.recurse(e.expression,void 0,void 0,function(t){u=t}),n!==t.body.length-1?f.current().body.push(u,";"):f.return_(u)});break;case br.Literal:c=this.escape(t.value),this.assign(e,c),r(e||c);break;case br.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){u=t}),c=t.operator+"("+this.ifDefined(u,0)+")",this.assign(e,c),r(c);break;case br.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){u=t}),c="+"===t.operator?this.plus(a,u):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(u,0):"("+a+")"+t.operator+"("+u+")",this.assign(e,c),r(c);break;case br.LogicalExpression:e=e||this.nextId(),f.recurse(t.left,e),f.if_("&&"===t.operator?e:f.not(e),f.lazyRecurse(t.right,e)),r(e);break;case br.ConditionalExpression:e=e||this.nextId(),f.recurse(t.test,e),f.if_(e,f.lazyRecurse(t.alternate,e),f.lazyRecurse(t.consequent,e)),r(e);break;case br.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",t.name)),function(){f.if_("inputs"===f.stage||"s",function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",t.name)),f.lazyAssign(f.nonComputedMember("s",t.name),"{}")),f.assign(e,f.nonComputedMember("s",t.name))})},e&&f.lazyAssign(e,f.nonComputedMember("l",t.name))),r(e);break;case br.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),f.recurse(t.object,a,void 0,function(){f.if_(f.notNull(a),function(){t.computed?(u=f.nextId(),f.recurse(t.property,u),f.getStringValue(u),i&&1!==i&&f.if_(f.not(f.computedMember(a,u)),f.lazyAssign(f.computedMember(a,u),"{}")),c=f.computedMember(a,u),f.assign(e,c),n&&(n.computed=!0,n.name=u)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(a,t.property.name)),f.lazyAssign(f.nonComputedMember(a,t.property.name),"{}")),c=f.nonComputedMember(a,t.property.name),f.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))},function(){f.assign(e,"undefined")}),r(e)},!!i);break;case br.CallExpression:e=e||this.nextId(),t.filter?(u=f.filter(t.callee.name),s=[],O(t.arguments,function(t){var e=f.nextId();f.recurse(t,e),s.push(e)}),c=u+"("+s.join(",")+")",f.assign(e,c),r(e)):(u=f.nextId(),a={},s=[],f.recurse(t.callee,u,a,function(){f.if_(f.notNull(u),function(){O(t.arguments,function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,function(t){s.push(t)})}),c=a.name?f.member(a.context,a.name,a.computed)+"("+s.join(",")+")":u+"("+s.join(",")+")",f.assign(e,c)},function(){f.assign(e,"undefined")}),r(e)}));break;case br.AssignmentExpression:u=this.nextId(),a={},this.recurse(t.left,void 0,a,function(){f.if_(f.notNull(a.context),function(){f.recurse(t.right,u),c=f.member(a.context,a.name,a.computed)+t.operator+u,f.assign(e,c),r(e||c)})},1);break;case br.ArrayExpression:s=[],O(t.elements,function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,function(t){s.push(t)})}),c="["+s.join(",")+"]",this.assign(e,c),r(e||c);break;case br.ObjectExpression:s=[],l=!1,O(t.properties,function(t){t.computed&&(l=!0)}),l?(e=e||this.nextId(),this.assign(e,"{}"),O(t.properties,function(t){t.computed?(a=f.nextId(),f.recurse(t.key,a)):a=t.key.type===br.Identifier?t.key.name:""+t.key.value,u=f.nextId(),f.recurse(t.value,u),f.assign(f.member(e,a,t.computed),u)})):(O(t.properties,function(e){f.recurse(e.value,t.constant?void 0:f.nextId(),void 0,function(t){s.push(f.escape(e.key.type===br.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+s.join(",")+"}",this.assign(e,c)),r(e||c);break;case br.ThisExpression:this.assign(e,"s"),r(e||"s");break;case br.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case br.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(U(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(F(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw dr("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},_r.prototype={compile:function(t){var e,n,r=this;Sr(t,r.$filter),(e=kr(t))&&(n=this.recurse(e));var i,o=Cr(t.body);o&&(i=[],O(o,function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,i.push(n),t.watchId=e}));var a=[];O(t.body,function(t){a.push(r.recurse(t.expression))});var u=0===t.body.length?N:1===t.body.length?a[0]:function(t,e){var n;return O(a,function(r){n=r(t,e)}),n};return n&&(u.assign=function(t,e,r){return n(t,r,e)}),i&&(u.inputs=i),u},recurse:function(t,e,n){var r,i,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case br.Literal:return this.value(t.value,e);case br.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case br.BinaryExpression:case br.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case br.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case br.Identifier:return a.identifier(t.name,e,n);case br.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case br.CallExpression:return o=[],O(t.arguments,function(t){o.push(a.recurse(t))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,a){for(var u=[],s=0;s<o.length;++s)u.push(o[s](t,n,r,a));var c=i.apply(void 0,u,a);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,r,a){var u,s=i(t,n,r,a);if(null!=s.value){for(var c=[],l=0;l<o.length;++l)c.push(o[l](t,n,r,a));u=s.value.apply(s.context,c)}return e?{value:u}:u};case br.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,a){var u=r(t,n,o,a),s=i(t,n,o,a);return u.context[u.name]=s,e?{value:s}:s};case br.ArrayExpression:return o=[],O(t.elements,function(t){o.push(a.recurse(t))}),function(t,n,r,i){for(var a=[],u=0;u<o.length;++u)a.push(o[u](t,n,r,i));return e?{value:a}:a};case br.ObjectExpression:return o=[],O(t.properties,function(t){t.computed?o.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):o.push({key:t.key.type===br.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,r,i){for(var a={},u=0;u<o.length;++u)o[u].computed?a[o[u].key(t,n,r,i)]=o[u].value(t,n,r,i):a[o[u].key]=o[u].value(t,n,r,i);return e?{value:a}:a};case br.ThisExpression:return function(t){return e?{value:t}:t};case br.LocalsExpression:return function(t,n){return e?{value:n}:n};case br.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=q(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=q(a)?-a:-0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var u=xr(t(r,i,o,a),e(r,i,o,a));return n?{value:u}:u}},"binary-":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a),s=e(r,i,o,a),c=(q(u)?u:0)-(q(s)?s:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)*e(r,i,o,a);return n?{value:u}:u}},"binary/":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)/e(r,i,o,a);return n?{value:u}:u}},"binary%":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)%e(r,i,o,a);return n?{value:u}:u}},"binary===":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)===e(r,i,o,a);return n?{value:u}:u}},"binary!==":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)!==e(r,i,o,a);return n?{value:u}:u}},"binary==":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)==e(r,i,o,a);return n?{value:u}:u}},"binary!=":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)!=e(r,i,o,a);return n?{value:u}:u}},"binary<":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)<e(r,i,o,a);return n?{value:u}:u}},"binary>":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)>e(r,i,o,a);return n?{value:u}:u}},"binary<=":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)<=e(r,i,o,a);return n?{value:u}:u}},"binary>=":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)>=e(r,i,o,a);return n?{value:u}:u}},"binary&&":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)&&e(r,i,o,a);return n?{value:u}:u}},"binary||":function(t,e,n){return function(r,i,o,a){var u=t(r,i,o,a)||e(r,i,o,a);return n?{value:u}:u}},"ternary?:":function(t,e,n,r){return function(i,o,a,u){var s=t(i,o,a,u)?e(i,o,a,u):n(i,o,a,u);return r?{value:s}:s}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,o,a){var u=i&&t in i?i:r;n&&1!==n&&u&&null==u[t]&&(u[t]={});var s=u?u[t]:void 0;return e?{context:u,name:t,value:s}:s}},computedMember:function(t,e,n,r){return function(i,o,a,u){var s,c,l=t(i,o,a,u);return null!=l&&(s=mr(s=e(i,o,a,u)),r&&1!==r&&l&&!l[s]&&(l[s]={}),c=l[s]),n?{context:l,name:s,value:c}:c}},nonComputedMember:function(t,e,n,r){return function(i,o,a,u){var s=t(i,o,a,u);r&&1!==r&&s&&null==s[e]&&(s[e]={});var c=null!=s?s[e]:void 0;return n?{context:s,name:e,value:c}:c}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}},Ar.prototype={constructor:Ar,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===br.Literal||t.body[0].expression.type===br.ArrayExpression||t.body[0].expression.type===br.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Fr=i("$sce"),Br={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Wr=/_([a-z])/g;function zr(t){return t.replace(Wr,ne)}function Gr(t){var e=[];return q(t)&&O(t,function(t){e.push(function(t){if("self"===t)return t;if(U(t)){if(t.indexOf("***")>-1)throw Fr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(J(t))return new RegExp("^"+t.source+"$");throw Fr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Jr(){this.SCE_CONTEXTS=Br;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Gr(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Gr(t)),e},this.$get=["$injector",function(n){var r=function(t){throw Fr("unsafe","Attempting to use an unsafe value in a safe context.")};function i(t,e){return"self"===t?ii(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(r=n.get("$sanitize"));var a=o(),u={};return u[Br.HTML]=o(a),u[Br.CSS]=o(a),u[Br.URL]=o(a),u[Br.JS]=o(a),u[Br.RESOURCE_URL]=o(u[Br.URL]),{trustAs:function(t,e){var n=u.hasOwnProperty(t)?u[t]:null;if(!n)throw Fr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||V(e)||""===e)return e;if("string"!=typeof e)throw Fr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,o){if(null===o||V(o)||""===o)return o;var a=u.hasOwnProperty(n)?u[n]:null;if(a&&o instanceof a)return o.$$unwrapTrustedValue();if(n===Br.RESOURCE_URL){if(function(n){var r,o,a=ri(n.toString()),u=!1;for(r=0,o=t.length;r<o;r++)if(i(t[r],a)){u=!0;break}if(u)for(r=0,o=e.length;r<o;r++)if(i(e[r],a)){u=!1;break}return u}(o))return o;throw Fr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",o.toString())}if(n===Br.HTML)return r(o);throw Fr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof a?t.$$unwrapTrustedValue():t}}}]}function Kr(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&l<8)throw Fr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Gt(Br);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=D),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,o=r.getTrusted,a=r.trustAs;return O(Br,function(t,e){var n=s(e);r[zr("parse_as_"+n)]=function(e){return i(t,e)},r[zr("get_trusted_"+n)]=function(e){return o(t,e)},r[zr("trust_as_"+n)]=function(e){return a(t,e)}}),r}]}function Yr(){this.$get=["$window","$document",function(t,e){var n={},r=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=A((/android (\d+)/.exec(s((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},u=a.body&&a.body.style,c=!1,f=!1;return u&&(c=!!("transition"in u||"webkitTransition"in u),f=!!("animation"in u||"webkitAnimation"in u)),{history:!(!r||i<4||o),hasEvent:function(t){if("input"===t&&l)return!1;if(V(n[t])){var e=a.createElement("div");n[t]="on"+t in e}return n[t]},csp:ct(),transitions:c,animations:f,android:i}}]}var Xr=i("$compile");function Qr(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,o){function a(u,s){a.totalPendingRequests++,U(u)&&!V(n.get(u))||(u=o.getTrustedResourceUrl(u));var c=r.defaults&&r.defaults.transformResponse;return W(c)?c=c.filter(function(t){return t!==Mn}):c===Mn&&(c=null),r.get(u,T({cache:n,transformResponse:c},t)).finally(function(){a.totalPendingRequests--}).then(function(t){return n.put(u,t.data),t.data},function(t){s||(t=Xr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",u,t.status,t.statusText),e(t));return i.reject(t)})}return a.totalPendingRequests=0,a}]}function Zr(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={findBindings:function(t,e,n){var r=[];return O(t.getElementsByClassName("ng-binding"),function(t){var i=b.element(t).data("$binding");i&&O(i,function(i){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)})}),r},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o="["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]',a=t.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return r}]}function ti(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var o={};function a(a,u,s){G(a)||(s=u,u=a,a=N);var c,l=pt(arguments,3),f=q(s)&&!s,p=(f?r:n).defer(),h=p.promise;return c=e.defer(function(){try{p.resolve(a.apply(null,l))}catch(t){p.reject(t),i(t)}finally{delete o[h.$$timeoutId]}f||t.$apply()},u),h.$$timeoutId=c,o[c]=p,h}return a.cancel=function(t){return!!(t&&t.$$timeoutId in o)&&(qr(o[t.$$timeoutId].promise),o[t.$$timeoutId].reject("canceled"),delete o[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},a}]}var ei=t.document.createElement("a"),ni=ri(t.location.href);function ri(t){var e=t;return l&&(ei.setAttribute("href",e),e=ei.href),ei.setAttribute("href",e),{href:ei.href,protocol:ei.protocol?ei.protocol.replace(/:$/,""):"",host:ei.host,search:ei.search?ei.search.replace(/^\?/,""):"",hash:ei.hash?ei.hash.replace(/^#/,""):"",hostname:ei.hostname,port:ei.port,pathname:"/"===ei.pathname.charAt(0)?ei.pathname:"/"+ei.pathname}}function ii(t){var e=U(t)?ri(t):t;return e.protocol===ni.protocol&&e.host===ni.host}function oi(){this.$get=I(t)}function ai(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,u,s,c=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(c!==r)for(t=(r=c).split("; "),n={},a=0;a<t.length;a++)(u=(o=t[a]).indexOf("="))>0&&(s=i(o.substring(0,u)),V(n[s])&&(n[s]=i(o.substring(u+1))));return n}}function ui(){this.$get=ai}function si(t){var e="Filter";function n(r,i){if(L(r)){var o={};return O(r,function(t,e){o[e]=n(e,t)}),o}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",vi),n("date",ji),n("filter",ci),n("json",ki),n("limitTo",Ai),n("lowercase",Ti),n("number",mi),n("orderBy",Pi),n("uppercase",_i)}function ci(){return function(t,e,n,r){if(!x(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var o,a;switch(r=r||"$",fi(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(t,e,n,r){var i=L(t)&&n in t;!0===e?e=st:G(e)||(e=function(t,e){return!V(t)&&(null===t||null===e?t===e:!(L(e)||L(t)&&!M(t))&&(t=s(""+t),e=s(""+e),-1!==t.indexOf(e)))});return function(o){return i&&!L(o)?li(o,t[n],e,n,!1):li(o,t,e,n,r)}}(e,n,r,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function li(t,e,n,r,i,o){var a=fi(t),u=fi(e);if("string"===u&&"!"===e.charAt(0))return!li(t,e.substring(1),n,r,i);if(W(t))return t.some(function(t){return li(t,e,n,r,i)});switch(a){case"object":var s;if(i){for(s in t)if(s.charAt&&"$"!==s.charAt(0)&&li(t[s],e,n,r,!0))return!0;return!o&&li(t,e,n,r,!1)}if("object"===u){for(s in e){var c=e[s];if(!G(c)&&!V(c)){var l=s===r;if(!li(l?t:t[s],c,n,r,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function fi(t){return null===t?"null":typeof t}ai.$inject=["$document"],si.$inject=["$provide"];var pi=22,hi=".",di="0";function vi(t){var e=t.NUMBER_FORMATS;return function(t,n,r){V(n)&&(n=e.CURRENCY_SYM),V(r)&&(r=e.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:gi(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(i,n)}}function mi(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:gi(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function gi(t,e,n,r,i){if(!U(t)&&!F(t)||isNaN(t))return"";var o,a=!isFinite(t),u=!1,s=Math.abs(t)+"",c="";if(a)c="";else{(function(t,e,n,r){var i=t.d,o=i.length-t.i,a=(e=V(e)?Math.min(Math.max(n,o),r):+e)+t.i,u=i[a];if(a>0){i.splice(Math.max(t.i,a));for(var s=a;s<i.length;s++)i[s]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,a=e+1),i[0]=0;for(var c=1;c<a;c++)i[c]=0}if(u>=5)if(a-1<0){for(var l=0;l>a;l--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[a-1]++;for(;o<Math.max(0,e);o++)i.push(0);var f=i.reduceRight(function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)},0);f&&(i.unshift(f),t.i++)})(o=function(t){var e,n,r,i,o,a=0;for((n=t.indexOf(hi))>-1&&(t=t.replace(hi,"")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charAt(r)===di;r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===di;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>pi&&(e=e.splice(0,pi-1),a=n-1,n=1),{d:e,e:a,i:n}}(s),i,e.minFrac,e.maxFrac);var l=o.d,f=o.i,p=o.e,h=[];for(u=l.reduce(function(t,e){return t&&!e},!0);f<0;)l.unshift(0),f++;f>0?h=l.splice(f,l.length):(h=l,l=[0]);var d=[];for(l.length>=e.lgSize&&d.unshift(l.splice(-e.lgSize,l.length).join(""));l.length>e.gSize;)d.unshift(l.splice(-e.gSize,l.length).join(""));l.length&&d.unshift(l.join("")),c=d.join(n),h.length&&(c+=r+h.join("")),p&&(c+="e+"+p)}return t<0&&!u?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function $i(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t=di+t;return n&&(t=t.substr(t.length-e)),i+t}function yi(t,e,n,r,i){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),$i(a,e,r,i)}}function bi(t,e,n){return function(r,i){var o=r["get"+t]();return i[c((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function wi(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function xi(t){return function(e){var n=wi(e.getFullYear()),r=+function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}(e)-+n;return $i(1+Math.round(r/6048e5),t)}}function Oi(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}vi.$inject=["$locale"],mi.$inject=["$locale"];var Ei={yyyy:yi("FullYear",4,0,!1,!0),yy:yi("FullYear",2,0,!0,!0),y:yi("FullYear",1,0,!1,!0),MMMM:bi("Month"),MMM:bi("Month",!0),MM:yi("Month",2,1),M:yi("Month",1,1),LLLL:bi("Month",!1,!0),dd:yi("Date",2),d:yi("Date",1),HH:yi("Hours",2),H:yi("Hours",1),hh:yi("Hours",2,-12),h:yi("Hours",1,-12),mm:yi("Minutes",2),m:yi("Minutes",1),ss:yi("Seconds",2),s:yi("Seconds",1),sss:yi("Milliseconds",3),EEEE:bi("Day"),EEE:bi("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=$i(Math[r>0?"floor":"ceil"](r/60),2)+$i(Math.abs(r%60),2)},ww:xi(2),w:xi(1),G:Oi,GG:Oi,GGG:Oi,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Si=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Ci=/^-?\d+$/;function ji(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,a,u="",s=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,U(n)&&(n=Ci.test(n)?A(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,o=0,a=n[8]?r.setUTCFullYear:r.setFullYear,u=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=A(n[9]+n[10]),o=A(n[9]+n[11])),a.call(r,A(n[1]),A(n[2])-1,A(n[3]));var s=A(n[4]||0)-i,c=A(n[5]||0)-o,l=A(n[6]||0),f=Math.round(1e3*parseFloat("0."+(n[7]||0)));return u.call(r,s,c,l,f),r}return t}(n)),F(n)&&(n=new Date(n)),!B(n)||!isFinite(n.getTime()))return n;for(;r;)(a=Si.exec(r))?r=(s=ft(s,a,1)).pop():(s.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=$t(i,c),n=yt(n,i,!0)),O(s,function(e){o=Ei[e],u+=o?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function ki(){return function(t,e){return V(e)&&(e=2),vt(t,e)}}ji.$inject=["$locale"];var Ti=I(s),_i=I(c);function Ai(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):A(e),R(e)?t:(F(t)&&(t=t.toString()),x(t)?(n=(n=!n||isNaN(n)?0:A(n))<0?Math.max(0,t.length+n):n,e>=0?Ri(t,n,n+e):0===n?Ri(t,e,t.length):Ri(t,Math.max(0,n+e),n)):t)}}function Ri(t,e,n){return U(t)?t.slice(e,n):d.call(t,e,n)}function Pi(t){return function(r,o,a,u){if(null==r)return r;if(!x(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);W(o)||(o=[o]),0===o.length&&(o=["+"]);var s=function(e){return e.map(function(e){var n=1,r=D;if(G(e))r=e;else if(U(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}})}(o),c=a?-1:1,l=G(u)?u:n,f=Array.prototype.map.call(r,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:s.map(function(r){return function(t,n){var r=typeof t;null===t?(r="string",t="null"):"object"===r&&(t=function(t){if(G(t.valueOf)&&e(t=t.valueOf()))return t;if(M(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:r,index:n}}(r.get(t),n)})}});return f.sort(function(t,e){for(var r=0,i=s.length;r<i;r++){var o=l(t.predicateValues[r],e.predicateValues[r]);if(o)return o*s[r].descending*c}return(l(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*c}),r=f.map(function(t){return t.value})};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,r=t.type,i=e.type;if(r===i){var o=t.value,a=e.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(L(o)&&(o=t.index),L(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n=r<i?-1:1;return n}}function Ni(t){return G(t)&&(t={link:t}),t.restrict=t.restrict||"AC",I(t)}Pi.$inject=["$parse"];var Di=I({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===g.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Ii={};O(_e,function(t,e){if("multiple"!==t){var n=$n("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),Ii[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}}),O(Re,function(t,e){Ii[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(o);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),O(["src","srcset","href"],function(t){var e=$n("ng-"+t);Ii[e]=function(){return{priority:99,link:function(n,r,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===g.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(e,function(e){e?(i.$set(a,e),l&&o&&r.prop(o,i[a])):"href"===t&&i.$set(a,null)})}}}});var Mi={$addControl:N,$$renameControl:function(t,e){t.$name=e},$removeControl:N,$setValidity:N,$setDirty:N,$setPristine:N,$setSubmitted:N},Vi="ng-pending";function qi(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Mi,this.$$element=t,this.$$animate=r,Fi(this)}qi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],qi.prototype={$rollbackViewValue:function(){O(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){O(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){Mt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],O(this.$pending,function(e,n){this.$setValidity(n,null,t)},this),O(this.$error,function(e,n){this.$setValidity(n,null,t)},this),O(this.$$success,function(e,n){this.$setValidity(n,null,t)},this),ot(this.$$controls,t),t.$$parentForm=Mi},$setDirty:function(){this.$$animate.removeClass(this.$$element,Vo),this.$$animate.addClass(this.$$element,qo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Vo,qo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,O(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){O(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Bi({clazz:qi,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(ot(r,n),0===r.length&&delete t[e])}});var Li=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:qi,compile:function(n,i){n.addClass(Vo).addClass(Io);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,a){var u=a[0];if(!("action"in i)){var s=function(e){t.$apply(function(){u.$commitViewValue(),u.$setSubmitted()}),e.preventDefault()};n[0].addEventListener("submit",s),n.on("$destroy",function(){e(function(){n[0].removeEventListener("submit",s)},0,!1)})}(a[1]||u.$$parentForm).$addControl(u);var c=o?r(u.$name):N;o&&(c(t,u),i.$observe(o,function(e){u.$name!==e&&(c(t,void 0),u.$$parentForm.$$renameControl(u,e),(c=r(u.$name))(t,u))})),n.on("$destroy",function(){u.$$parentForm.$removeControl(u),c(t,void 0),T(u,Mi)})}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||N}}]},Hi=Li(),Ui=Li(!0);function Fi(t){t.$$classCache={},t.$$classCache[Mo]=!(t.$$classCache[Io]=t.$$element.hasClass(Io))}function Bi(t){var e=t.clazz,n=t.set,r=t.unset;function i(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+Pt(e,"-"):"",i(t,Io+e,!0===n),i(t,Mo+e,!1===n)}e.prototype.$setValidity=function(t,e,a){var u;V(e)?function(t,e,r,i){t[e]||(t[e]={});n(t[e],r,i)}(this,"$pending",t,a):function(t,e,n,i){t[e]&&r(t[e],n,i);Wi(t[e])&&(t[e]=void 0)}(this,"$pending",t,a),X(e)?e?(r(this.$error,t,a),n(this.$$success,t,a)):(n(this.$error,t,a),r(this.$$success,t,a)):(r(this.$error,t,a),r(this.$$success,t,a)),this.$pending?(i(this,Vi,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(i(this,Vi,!1),this.$valid=Wi(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,u=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,u,this)}}function Wi(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var zi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Gi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Ji=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Ki=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Yi=/^(\d{4,})-(\d{2})-(\d{2})$/,Xi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Qi=/^(\d{4,})-W(\d\d)$/,Zi=/^(\d{4,})-(\d\d)$/,to=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,eo="keydown wheel mousedown",no=Lt();O("date,datetime-local,month,time,week".split(","),function(t){no[t]=!0});var ro={text:function(t,e,n,r,i,o){oo(t,e,n,r,i,o),io(r)},date:uo("date",Yi,ao(Yi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":uo("datetimelocal",Xi,ao(Xi,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:uo("time",to,ao(to,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:uo("week",Qi,function(t,e){if(B(t))return t;if(U(t)){Qi.lastIndex=0;var n=Qi.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,u=0,s=0,c=wi(r),l=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),u=e.getSeconds(),s=e.getMilliseconds()),new Date(r,0,c.getDate()+l,o,a,u,s)}}return NaN},"yyyy-Www"),month:uo("month",Zi,ao(Zi,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o){var a,u;so(t,e,n,r),co(r),oo(t,e,n,r,i,o),(q(n.min)||n.ngMin)&&(r.$validators.min=function(t){return r.$isEmpty(t)||V(a)||t>=a},n.$observe("min",function(t){a=lo(t),r.$validate()}));(q(n.max)||n.ngMax)&&(r.$validators.max=function(t){return r.$isEmpty(t)||V(u)||t<=u},n.$observe("max",function(t){u=lo(t),r.$validate()}));if(q(n.step)||n.ngStep){var s;r.$validators.step=function(t,e){return r.$isEmpty(e)||V(s)||ho(e,a||0,s)},n.$observe("step",function(t){s=lo(t),r.$validate()})}},url:function(t,e,n,r,i,o){oo(t,e,n,r,i,o),io(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Gi.test(n)}},email:function(t,e,n,r,i,o){oo(t,e,n,r,i,o),io(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Ji.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==tt(n.ngTrim);V(n.name)&&e.attr("name",C());e.on("click",function(t){var o;e[0].checked&&(o=n.value,i&&(o=tt(o)),r.$setViewValue(o,t&&t.type))}),r.$render=function(){var t=n.value;i&&(t=tt(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){so(t,e,n,r),co(r),oo(t,e,n,r,i,o);var a=r.$$hasNativeValidators&&"range"===e[0].type,u=a?0:void 0,s=a?100:void 0,c=a?1:void 0,l=e[0].validity,f=q(n.min),p=q(n.max),h=q(n.step),d=r.$render;r.$render=a&&q(l.rangeUnderflow)&&q(l.rangeOverflow)?function(){d(),r.$setViewValue(e.val())}:d,f&&(r.$validators.min=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||V(u)||e>=u},v("min",function(t){if(u=lo(t),R(r.$modelValue))return;if(a){var n=e.val();u>n&&(n=u,e.val(n)),r.$setViewValue(n)}else r.$validate()}));p&&(r.$validators.max=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||V(s)||e<=s},v("max",function(t){if(s=lo(t),R(r.$modelValue))return;if(a){var n=e.val();s<n&&(e.val(s),n=s<u?u:s),r.$setViewValue(n)}else r.$validate()}));h&&(r.$validators.step=a?function(){return!l.stepMismatch}:function(t,e){return r.$isEmpty(e)||V(c)||ho(e,u||0,c)},v("step",function(t){if(c=lo(t),R(r.$modelValue))return;a&&r.$viewValue!==e.val()?r.$setViewValue(e.val()):r.$validate()}));function v(t,r){e.attr(t,n[t]),n.$observe(t,r)}},checkbox:function(t,e,n,r,i,o,a,u){var s=vo(u,t,"ngTrueValue",n.ngTrueValue,!0),c=vo(u,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return st(t,s)}),r.$parsers.push(function(t){return t?s:c})},hidden:N,button:N,submit:N,reset:N,file:N};function io(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function oo(t,e,n,r,i,o){var u,c=s(e[0].type);if(!i.android){var l=!1;e.on("compositionstart",function(){l=!0}),e.on("compositionend",function(){l=!1,f()})}var f=function(t){if(u&&(o.defer.cancel(u),u=null),!l){var i=e.val(),a=t&&t.type;"password"===c||n.ngTrim&&"false"===n.ngTrim||(i=tt(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,a)}};if(i.hasEvent("input"))e.on("input",f);else{var p=function(t,e,n){u||(u=o.defer(function(){u=null,e&&e.value===n||f(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||p(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut drop",p)}e.on("change",f),no[c]&&r.$$hasNativeValidators&&c===n.type&&e.on(eo,function(t){if(!u){var e=this[a],n=e.badInput,r=e.typeMismatch;u=o.defer(function(){u=null,e.badInput===n&&e.typeMismatch===r||f(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function ao(t,e){return function(n,r){var i,o;if(B(n))return n;if(U(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),zi.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},O(i,function(t,n){n<e.length&&(o[e[n]]=+t)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function uo(t,e,n,r){return function(i,o,a,u,s,c,l){so(i,o,a,u),oo(0,o,a,u,s,c);var f,p,h,d=u&&u.$options.getOption("timezone");(u.$$parserName=t,u.$parsers.push(function(t){if(u.$isEmpty(t))return null;if(e.test(t)){var r=n(t,f);return d&&(r=yt(r,d)),r}}),u.$formatters.push(function(t){if(t&&!B(t))throw Lo("datefmt","Expected `{0}` to be a date",t);return v(t)?((f=t)&&d&&(f=yt(f,d,!0)),l("date")(t,r,d)):(f=null,"")}),q(a.min)||a.ngMin)&&(u.$validators.min=function(t){return!v(t)||V(p)||n(t)>=p},a.$observe("min",function(t){p=m(t),u.$validate()}));(q(a.max)||a.ngMax)&&(u.$validators.max=function(t){return!v(t)||V(h)||n(t)<=h},a.$observe("max",function(t){h=m(t),u.$validate()}));function v(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function m(t){return q(t)&&!B(t)?n(t)||void 0:t}}}function so(t,e,n,r){var i=e[0];(r.$$hasNativeValidators=L(i.validity))&&r.$parsers.push(function(t){var n=e.prop(a)||{};return n.badInput||n.typeMismatch?void 0:t})}function co(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:Ki.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!F(e))throw Lo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function lo(t){return q(t)&&!F(t)&&(t=parseFloat(t)),R(t)?void 0:t}function fo(t){return(0|t)===t}function po(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function ho(t,e,n){var r=Number(t),i=!fo(r),o=!fo(e),a=!fo(n);if(i||o||a){var u=i?po(r):0,s=o?po(e):0,c=a?po(n):0,l=Math.max(u,s,c),f=Math.pow(10,l);r*=f,e*=f,n*=f,i&&(r=Math.round(r)),o&&(e=Math.round(e)),a&&(n=Math.round(n))}return(r-e)%n==0}function vo(t,e,n,r,i){var o;if(q(r)){if(!(o=t(r)).constant)throw Lo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(e)}return i}var mo=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,u){u[0]&&(ro[s(a.type)]||ro.text)(i,o,a,u[0],e,t,n,r)}}}}],go=/^(true|false|\d+)$/,$o=function(){function t(t,e,n){var r=q(n)?n:9===l?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return go.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,function(e){t(n,r,e)})}}}},yo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=Ht(t)})}}}}],bo=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var o=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(t){r.textContent=V(t)?"":t})}}}}],wo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")})}}}}],xo=I({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function Oo(t,e){var n;return t="ngClass"+t,["$parse",function(u){return{restrict:"AC",link:function(s,c,l){var f,p=l[t].trim(),h=":"===p.charAt(0)&&":"===p.charAt(1),d=u(p,h?a:o),v=h?function(t){var e=o(t);e!==f&&y(e)}:y,m=c.data("$classCounts"),g=!0;function $(t,e){var n=[];return O(t,function(t){(e>0||m[t])&&(m[t]=(m[t]||0)+e,m[t]===+(e>0)&&n.push(t))}),n.join(" ")}function y(t){g===e&&function(t,e){var n=i(t),o=i(e),a=r(n,o),u=r(o,n),s=$(a,-1),c=$(u,1);l.$addClass(c),l.$removeClass(s)}(f,t),f=t}m||(m=Lt(),c.data("$classCounts",m)),"ngClass"!==t&&(n||(n=u("$index",function(t){return 1&t})),s.$watch(n,function(t){t===e?function(t){t=$(i(t),1),l.$addClass(t)}(f):function(t){t=$(i(t),-1),l.$removeClass(t)}(f);g=t})),s.$watch(d,v,h)}}}];function r(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function i(t){return t&&t.split(" ")}function o(t){var e=t;return W(t)?e=t.map(o).join(" "):L(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}function a(t){var e=t;if(W(t))e=t.map(a);else if(L(t)){var n=!1;e=Object.keys(t).filter(function(e){var r=t[e];return!n&&V(r)&&(n=!0),r}),n&&e.push(void 0)}return e}}var Eo=Oo("",!0),So=Oo("Odd",0),Co=Oo("Even",1),jo=Ni({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),ko=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],To={},_o={blur:!0,focus:!0};O("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=$n("ng-"+t);To[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e]);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};_o[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Ao=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var u,s,c;n.$watch(i.ngIf,function(n){n?s||a(function(n,o){s=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),u={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),s&&(s.$destroy(),s=null),u&&(c=qt(u.clone),t.leave(c).done(function(t){!1!==t&&(c=null)}),u=null))})}}}],Ro=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",u=i.autoscroll;return function(r,i,s,c,l){var f,p,h,d=0,v=function(){p&&(p.remove(),p=null),f&&(f.$destroy(),f=null),h&&(n.leave(h).done(function(t){!1!==t&&(p=null)}),p=h,h=null)};r.$watch(o,function(o){var s=function(t){!1===t||!q(u)||u&&!r.$eval(u)||e()},p=++d;o?(t(o,!0).then(function(t){if(!r.$$destroyed&&p===d){var e=r.$new();c.template=t;var u=l(e,function(t){v(),n.enter(t,null,i).done(s)});h=u,(f=e).$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||p===d&&(v(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(v(),c.template=null)})}}}}],Po=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(g.call(r[0]).match(/SVG/))return r.empty(),void e(fe(o.template,t.document).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});r.html(o.template),e(r.contents())(n)}}}],No=Ni({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Do=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",o="false"!==n.ngTrim,a=o?tt(i):i;r.$parsers.push(function(t){if(!V(t)){var e=[];return t&&O(t.split(a),function(t){t&&e.push(o?tt(t):t)}),e}}),r.$formatters.push(function(t){if(W(t))return t.join(i)}),r.$isEmpty=function(t){return!t||!t.length}}}},Io="ng-valid",Mo="ng-invalid",Vo="ng-pristine",qo="ng-dirty",Lo=i("ngModel");function Ho(t,e,n,r,i,o,a,u,s){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=s(n.name||"",!1)(t),this.$$parentForm=Mi,this.$options=Uo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:t}),this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=u,this.$$exceptionHandler=e,Fi(this),function(t){t.$$scope.$watch(function(e){var n=t.$$ngModelGet(e);return n===t.$modelValue||t.$modelValue!=t.$modelValue&&n!=n||t.$$setModelValue(n),n})}(this)}Ho.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Ho.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return G(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){G(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Lo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,bt(this.$$element))},$render:N,$isEmpty:function(t){return V(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,qo),this.$$animate.addClass(this.$$element,Vo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Vo),this.$$animate.addClass(this.$$element,qo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!R(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,function(t){i||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var r=this.$$currentValidationRunId,i=this;function o(t,e){r===i.$$currentValidationRunId&&i.$setValidity(t,e)}function a(t){r===i.$$currentValidationRunId&&n(t)}!function(){var t=i.$$parserName||"parse";if(!V(i.$$parserValid))return i.$$parserValid||(O(i.$validators,function(t,e){o(e,null)}),O(i.$asyncValidators,function(t,e){o(e,null)})),o(t,i.$$parserValid),i.$$parserValid;o(t,null);return!0}()?a(!1):function(){var n=!0;if(O(i.$validators,function(r,i){var a=Boolean(r(t,e));n=n&&a,o(i,a)}),!n)return O(i.$asyncValidators,function(t,e){o(e,null)}),!1;return!0}()?function(){var n=[],r=!0;O(i.$asyncValidators,function(i,a){var u=i(t,e);if(!Q(u))throw Lo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",u);o(a,void 0),n.push(u.then(function(){o(a,!0)},function(){r=!1,o(a,!1)}))}),n.length?i.$$q.all(n).then(function(){a(r)},N):a(!0)}():a(!1)},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!V(t)||void 0,this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(V(t=this.$parsers[n](t))){this.$$parserValid=!1;break}R(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==r&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(n){i||(e.$modelValue=n?t:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),O(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");F(e[t])?e=e[t]:F(e.default)&&(e=e.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,N))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Bi({clazz:Ho,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Uo,Fo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ho,priority:1,compile:function(e){return e.addClass(Vo).addClass("ng-untouched").addClass(Io),{pre:function(t,e,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];function a(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(a):e.$apply(a))})}}}}}],Bo=/(\s+|^)default(\s+|$)/;function Wo(t){this.$$options=t}Wo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return O(t=T({},t),function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=tt(n.replace(Bo,function(){return t.updateOnDefault=!0," "})))},this),e&&(delete t["*"],Go(t,this.$$options)),Go(t,Uo.$$options),new Wo(t)}},Uo=new Wo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var zo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Uo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function Go(t,e){O(e,function(e,n){q(t[n])||(t[n]=e)})}var Jo=Ni({terminal:!0,priority:1e3}),Ko=i("ngOptions"),Yo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Xo=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=N},post:function(t,a,u,s){for(var c=s[0],l=s[1],p=u.multiple,h=0,d=a.children(),v=d.length;h<v;h++)if(""===d[h].value){c.hasEmptyOption=!0,c.emptyOption=d.eq(h);break}a.empty();var m,g=!!c.emptyOption;f(i.cloneNode(!1)).val("?");var $=function(t,e,n){var i=t.match(Yo);if(!i)throw Ko("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,bt(e));var o=i[5]||i[7],a=i[6],u=/ as /.test(i[0])&&i[1],s=i[9],c=r(i[2]?i[1]:o),l=u&&r(u)||c,f=s&&r(s),p=s?function(t,e){return f(n,e)}:function(t){return Me(t)},h=function(t,e){return p(t,y(t,e))},d=r(i[2]||i[1]),v=r(i[3]||""),m=r(i[4]||""),g=r(i[8]),$={},y=a?function(t,e){return $[a]=e,$[o]=t,$}:function(t){return $[o]=t,$};function b(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function w(t){var e;if(!a&&x(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:s,getTrackByValue:h,getWatchables:r(g,function(t){for(var e=[],r=w(t=t||[]),o=r.length,a=0;a<o;a++){var u=t===r?a:r[a],s=t[u],c=y(s,u),l=p(s,c);if(e.push(l),i[2]||i[1]){var f=d(n,c);e.push(f)}if(i[4]){var h=m(n,c);e.push(h)}}return e}),getOptions:function(){for(var t=[],e={},r=g(n)||[],i=w(r),o=i.length,a=0;a<o;a++){var u=r===i?a:i[a],c=r[u],f=y(c,u),$=l(n,f),x=p($,f),O=new b(x,$,d(n,f),v(n,f),m(n,f));t.push(O),e[x]=O}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[h(t)]},getViewValueFromOption:function(t){return s?at(t.viewValue):t.viewValue}}}}}(u.ngOptions,a,t),y=n[0].createDocumentFragment();function b(t,e){var n=i.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,n)}function w(t){var e=m.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}c.generateUnknownOptionValue=function(t){return"?"},p?(c.writeValue=function(t){if(m){var e=t&&t.map(w)||[];m.items.forEach(function(t){t.element.selected&&!it(e,t)&&(t.element.selected=!1)})}},c.readValue=function(){var t=[];return O(a.val()||[],function(e){var n=m.selectValueMap[e];n&&!n.disabled&&t.push(m.getViewValueFromOption(n))}),t},$.trackBy&&t.$watchCollection(function(){if(W(l.$viewValue))return l.$viewValue.map(function(t){return $.getTrackByValue(t)})},function(){l.$render()})):(c.writeValue=function(t){if(m){var e=a[0].options[a[0].selectedIndex],n=m.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(c.removeUnknownOption(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):c.selectUnknownOrEmptyOption(t)}},c.readValue=function(){var t=m.selectValueMap[a.val()];return t&&!t.disabled?(c.unselectEmptyOption(),c.removeUnknownOption(),m.getViewValueFromOption(t)):null},$.trackBy&&t.$watch(function(){return $.getTrackByValue(l.$viewValue)},function(){l.$render()})),g&&(e(c.emptyOption)(t),a.prepend(c.emptyOption),c.emptyOption[0].nodeType===Bt?(c.hasEmptyOption=!1,c.registerOption=function(t,e){""===e.val()&&(c.hasEmptyOption=!0,c.emptyOption=e,c.emptyOption.removeClass("ng-scope"),l.$render(),e.on("$destroy",function(){var t=c.$isEmptyOptionSelected();c.hasEmptyOption=!1,c.emptyOption=void 0,t&&l.$render()}))}):c.emptyOption.removeClass("ng-scope")),t.$watchCollection($.getWatchables,function(){var t=m&&c.readValue();if(m)for(var e=m.items.length-1;e>=0;e--){var n=m.items[e];q(n.group)?je(n.element.parentNode):je(n.element)}var r={};if((m=$.getOptions()).items.forEach(function(t){var e;q(t.group)?((e=r[t.group])||(e=o.cloneNode(!1),y.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),b(t,e)):b(t,y)}),a[0].appendChild(y),l.$render(),!l.$isEmpty(t)){var i=c.readValue(),u=$.trackBy||p;(u?st(t,i):t===i)||(l.$setViewValue(i),l.$render())}})}}}}],Qo=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,a,u){var c,l=u.count,f=u.$attr.when&&a.attr(u.$attr.when),p=u.offset||0,h=o.$eval(f)||{},d={},v=e.startSymbol(),m=e.endSymbol(),g=v+l+"-"+p+m,$=b.noop;function y(t){a.text(t||"")}O(u,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+s(n[2]);h[r]=a.attr(u.$attr[e])}}),O(h,function(t,n){d[n]=e(t.replace(r,g))}),o.$watch(l,function(e){var r=parseFloat(e),i=R(r);if(i||r in h||(r=t.pluralCat(r-p)),!(r===c||i&&R(c))){$();var a=d[r];V(a)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),$=N,y()):$=o.$watch(a,y),c=r}})}}}],Zo=["$parse","$animate","$compile",function(t,e,n){var r=i("ngRepeat"),o=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},s=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,c){var l=c.ngRepeat,f=n.$$createComment("end ngRepeat",l),p=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",l);var h=p[1],d=p[2],v=p[3],m=p[4];if(!(p=h.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw r("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",h);var g,$,y,b,w=p[3]||p[1],E=p[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw r("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var S={$id:Me};return m?g=t(m):(y=function(t,e){return Me(e)},b=function(t){return t}),function(t,n,i,c,p){g&&($=function(e,n,r){return E&&(S[E]=e),S[w]=n,S.$index=r,g(t,S)});var h=Lt();t.$watchCollection(d,function(i){var c,d,m,g,S,C,j,k,T,_,A,R,P=n[0],N=Lt();if(v&&(t[v]=i),x(i))T=i,k=$||y;else for(var D in k=$||b,T=[],i)u.call(i,D)&&"$"!==D.charAt(0)&&T.push(D);for(g=T.length,A=new Array(g),c=0;c<g;c++)if(S=i===T?c:T[c],C=i[S],j=k(S,C,c),h[j])_=h[j],delete h[j],N[j]=_,A[c]=_;else{if(N[j])throw O(A,function(t){t&&t.scope&&(h[t.id]=t)}),r("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",l,j,C);A[c]={id:j,scope:void 0,clone:void 0},N[j]=!0}for(var I in h){if(R=qt((_=h[I]).clone),e.leave(R),R[0].parentNode)for(c=0,d=R.length;c<d;c++)R[c].$$NG_REMOVED=!0;_.scope.$destroy()}for(c=0;c<g;c++)if(S=i===T?c:T[c],C=i[S],(_=A[c]).scope){m=P;do{m=m.nextSibling}while(m&&m.$$NG_REMOVED);a(_)!==m&&e.move(qt(_.clone),null,P),P=s(_),o(_.scope,c,w,C,E,S,g)}else p(function(t,n){_.scope=n;var r=f.cloneNode(!1);t[t.length++]=r,e.enter(t,null,P),P=r,_.clone=t,N[_.id]=_,o(_.scope,c,w,C,E,S,g)});h=N})}}}}],ta=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ea=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],na=Ni(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&O(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),ra=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var a=i.ngSwitch||i.on,u=[],s=[],c=[],l=[],f=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(a,function(n){for(var r,i;c.length;)t.cancel(c.pop());for(r=0,i=l.length;r<i;++r){var a=qt(s[r].clone);l[r].$destroy(),(c[r]=t.leave(a)).done(f(c,r))}s.length=0,l.length=0,(u=o.cases["!"+n]||o.cases["?"])&&O(u,function(n){n.transclude(function(r,i){l.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:r};s.push(a),t.enter(r,o.parent(),o)})})})}}}],ia=Ni({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){O(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})})}}),oa=Ni({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),aa=i("ngTransclude"),ua=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){if(!o)throw aa("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",bt(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var a=r.ngTransclude||r.ngTranscludeSlot;function u(){n(t,function(t){e.append(t)})}o(function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==Ft||r.nodeValue.trim())return!0}}(t)?e.append(t):(u(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&u()}}}}],sa=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],ca={$setViewValue:N,$render:N};function la(t,e){t.prop("selected",e),t.attr("selected",e)}var fa=["$element","$scope",function(e,n){var r=this,i=new Le;r.selectValueMap={},r.ngModelCtrl=ca,r.multiple=!1,r.unknownOption=f(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),la(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),la(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(t){return"? "+Me(t)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),la(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&la(r.emptyOption,!1)},n.$on("$destroy",function(){r.renderUnknownOption=N}),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&la(f(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=Me(t);e.val(i in r.selectValueMap?i:t);var o=e[0].options[e[0].selectedIndex];la(f(o),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(t,e){if(e[0].nodeType!==Bt){Mt(t,'"option value"'),""===t&&(r.hasEmptyOption=!0,r.emptyOption=e);var n=i.get(t)||0;i.set(t,n+1),a()}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(t){null==t&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(t):r.renderUnknownOption(t)};var o=!1;function a(){o||(o=!0,n.$$postDigest(function(){o=!1,r.ngModelCtrl.$render()}))}var u=!1;function s(t){u||(u=!0,n.$$postDigest(function(){n.$$destroyed||(u=!1,r.ngModelCtrl.$setViewValue(r.readValue()),t&&r.ngModelCtrl.$render())}))}r.registerOption=function(t,e,n,i,o){if(n.$attr.ngValue){var u,c=NaN;n.$observe("value",function(t){var n,i=e.prop("selected");q(c)&&(r.removeOption(u),delete r.selectValueMap[c],n=!0),c=Me(t),u=t,r.selectValueMap[c]=t,r.addOption(t,e),e.attr("value",c),n&&i&&s()})}else i?n.$observe("value",function(t){var n;r.readValue();var i=e.prop("selected");q(u)&&(r.removeOption(u),n=!0),u=t,r.addOption(t,e),n&&i&&s()}):o?t.$watch(o,function(t,i){n.$set("value",t);var o=e.prop("selected");i!==t&&r.removeOption(i),r.addOption(t,e),i&&o&&s()}):r.addOption(n.value,e);n.$observe("disabled",function(t){("true"===t||t&&e.prop("selected"))&&(r.multiple?s(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))}),e.on("$destroy",function(){var t=r.readValue(),e=n.value;r.removeOption(e),a(),(r.multiple&&t&&-1!==t.indexOf(e)||t===e)&&s(!0)})}}],pa=function(){return{restrict:"E",require:["select","?ngModel"],controller:fa,priority:1,link:{pre:function(t,e,n,r){var i=r[0],o=r[1];if(!o)return void(i.registerOption=N);if(i.ngModelCtrl=o,e.on("change",function(){i.removeUnknownOption(),t.$apply(function(){o.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return O(e.find("option"),function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),t},i.writeValue=function(t){O(e.find("option"),function(e){var n=!!t&&(it(t,e.value)||it(t,i.selectValueMap[e.value])),r=e.selected;n!==r&&la(f(e),n)})};var a,u=NaN;t.$watch(function(){u!==o.$viewValue||st(a,o.$viewValue)||(a=Gt(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,r){var i=r[1];if(!i)return;var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}},ha=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return q(n.ngValue)||(q(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o=e.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(t,e,n,r,i)}}}}],da=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},va=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var o,a=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(U(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,bt(e));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||V(o)||o.test(e)}}}}},ma=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=A(t);i=R(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return i<0||r.$isEmpty(e)||e.length<=i}}}}},ga=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=A(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!Nt){var n=lt();(p=V(n)?t.jQuery:n?t[n]:void 0)&&p.fn.on?(f=p,T(p.fn,{scope:Te.scope,isolateScope:Te.isolateScope,controller:Te.controller,injector:Te.injector,inheritedData:Te.inheritedData}),e=p.cleanData,p.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=p._data(r,"events"))&&n.$destroy&&p(r).triggerHandler("$destroy");e(t)}):f=he,b.element=f,Nt=!0}}(),function(e){T(e,{errorHandlingConfig:n,bootstrap:Tt,copy:at,extend:T,merge:_,equals:st,element:f,forEach:O,injector:Ye,noop:N,bind:ht,toJson:vt,fromJson:mt,identity:D,isUndefined:V,isDefined:q,isString:U,isFunction:G,isObject:L,isNumber:F,isElement:nt,isArray:W,version:Kt,isDate:B,lowercase:s,uppercase:c,callbacks:{$$counter:0},getTestability:At,reloadWithDebugInfo:_t,$$minErr:i,$$csp:ct,$$encodeUriSegment:Et,$$encodeUriQuery:St,$$stringify:Ht}),(h=function(t){var e=i("$injector"),n=i("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||i,r(o,"module",function(){var t={};return function(i,o,a){var u={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(i,"module"),o&&t.hasOwnProperty(i)&&(t[i]=null),r(t,i,function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],s=[],c=f("$injector","invoke","push",r),l={_invokeQueue:t,_configBlocks:r,_runBlocks:s,info:function(t){if(q(t)){if(!L(t))throw n("aobj","Argument '{0}' must be an object","value");return u=t,this}return u},requires:o,name:i,provider:p("$provide","provider"),factory:p("$provide","factory"),service:p("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),decorator:p("$provide","decorator",r),animation:p("$animateProvider","register"),filter:p("$filterProvider","register"),controller:p("$controllerProvider","register"),directive:p("$compileProvider","directive"),component:p("$compileProvider","component"),config:c,run:function(t){return s.push(t),this}};return a&&c(a),l;function f(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),l}}function p(e,n,r){return r||(r=t),function(t,o){return o&&G(o)&&(o.$$moduleName=i),r.push([e,n,arguments]),l}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Ur}),t.provider("$compile",dn).directive({a:Di,input:mo,textarea:mo,form:Hi,script:sa,select:pa,option:ha,ngBind:yo,ngBindHtml:wo,ngBindTemplate:bo,ngClass:Eo,ngClassEven:Co,ngClassOdd:So,ngCloak:jo,ngController:ko,ngForm:Ui,ngHide:ea,ngIf:Ao,ngInclude:Ro,ngInit:No,ngNonBindable:Jo,ngPluralize:Qo,ngRepeat:Zo,ngShow:ta,ngStyle:na,ngSwitch:ra,ngSwitchWhen:ia,ngSwitchDefault:oa,ngOptions:Xo,ngTransclude:ua,ngModel:Fo,ngList:Do,ngChange:xo,pattern:va,ngPattern:va,required:da,ngRequired:da,minlength:ga,ngMinlength:ga,maxlength:ma,ngMaxlength:ma,ngValue:$o,ngModelOptions:zo}).directive({ngInclude:Po}).directive(Ii).directive(To),t.provider({$anchorScroll:Xe,$animate:on,$animateCss:sn,$$animateJs:nn,$$animateQueue:rn,$$AnimateRunner:un,$$animateAsyncRun:an,$browser:cn,$cacheFactory:ln,$controller:On,$document:En,$$isDocumentHidden:Sn,$exceptionHandler:Cn,$filter:si,$$forceReflow:jn,$interpolate:zn,$interval:Gn,$http:Un,$httpParamSerializer:Dn,$httpParamSerializerJQLike:In,$httpBackend:Bn,$xhrFactory:Fn,$jsonpCallbacks:Jn,$location:pr,$log:hr,$parse:Pr,$rootScope:Hr,$q:Nr,$$q:Dr,$sce:Kr,$sceDelegate:Jr,$sniffer:Yr,$templateCache:fn,$templateRequest:Qr,$$testability:Zr,$timeout:ti,$window:oi,$$rAF:Lr,$$jqLite:Ie,$$Map:He,$$cookieReader:ui})}]).info({angularVersion:"1.6.9"})}(b),b.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,r){var i=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,r);return 1==i&&0==o.v?e:n}})}]),f(function(){kt(t.document,Tt)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e,n){
/**
 * State-based routing for AngularJS 1.x
 * This bundle requires the ui-router-core.js bundle from the @uirouter/core package.
 * @version v1.0.19
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e,n){"use strict";var r=angular,i=e&&e.module?e:r;function o(){var t=null;return function(e,r){return t=t||n.services.$injector.get("$templateFactory"),[new c(e,r,t)]}}var a=function(t,e){return t.reduce(function(t,r){return t||n.isDefined(e[r])},!1)};function u(t){if(!t.parent)return{};var e=["component","bindings","componentProvider"],r=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),i=e.concat(r);if(n.isDefined(t.views)&&a(i,t))throw new Error("State '"+t.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+i.filter(function(e){return n.isDefined(t[e])}).join(", "));var o={},u=t.views||{$default:n.pick(t,i)};return n.forEach(u,function(i,u){if(u=u||"$default",n.isString(i)&&(i={component:i}),i=n.extend({},i),a(e,i)&&a(r,i))throw new Error("Cannot combine: "+e.join("|")+" with: "+r.join("|")+" in stateview: '"+u+"@"+t.name+"'");i.resolveAs=i.resolveAs||"$resolve",i.$type="ng1",i.$context=t,i.$name=u;var s=n.ViewService.normalizeUIViewTarget(i.$context,i.$name);i.$uiViewName=s.uiViewName,i.$uiViewContextAnchor=s.uiViewContextAnchor,o[u]=i}),o}var s=0,c=function(){function t(t,e,n){var r=this;this.path=t,this.viewDecl=e,this.factory=n,this.$id=s++,this.loaded=!1,this.getTemplate=function(t,e){return r.component?r.factory.makeComponentTemplate(t,e,r.component,r.viewDecl.bindings):r.template}}return t.prototype.load=function(){var t=this,e=n.services.$q,r=new n.ResolveContext(this.path),i=this.path.reduce(function(t,e){return n.extend(t,e.paramValues)},{}),o={template:e.when(this.factory.fromConfig(this.viewDecl,i,r)),controller:e.when(this.getController(r))};return e.all(o).then(function(e){return n.trace.traceViewServiceEvent("Loaded",t),t.controller=e.controller,n.extend(t,e.template),t})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!n.isInjectable(e))return this.viewDecl.controller;var r=n.services.$injector.annotate(e),i=n.isArray(e)?n.tail(e):e,o=new n.Resolvable("",i,r);return o.get(t)},t}(),l=function(){function t(){var t=this;this._useHttp=i.version.minor<3,this.$get=["$http","$templateCache","$injector",function(e,n,r){return t.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),t.$http=e,t.$templateCache=n,t}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,r){var i=function(t){return n.services.$q.when(t).then(function(t){return{template:t}})},o=function(t){return n.services.$q.when(t).then(function(t){return{component:t}})};return n.isDefined(t.template)?i(this.fromString(t.template,e)):n.isDefined(t.templateUrl)?i(this.fromUrl(t.templateUrl,e)):n.isDefined(t.templateProvider)?i(this.fromProvider(t.templateProvider,e,r)):n.isDefined(t.component)?o(t.component):n.isDefined(t.componentProvider)?o(this.fromComponentProvider(t.componentProvider,e,r)):i("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return n.isFunction(t)?t(e):t},t.prototype.fromUrl=function(t,e){return n.isFunction(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,r){var i=n.services.$injector.annotate(t),o=n.isArray(t)?n.tail(t):t,a=new n.Resolvable("",o,i);return a.get(r)},t.prototype.fromComponentProvider=function(t,e,r){var i=n.services.$injector.annotate(t),o=n.isArray(t)?n.tail(t):t,a=new n.Resolvable("",o,i);return a.get(r)},t.prototype.makeComponentTemplate=function(t,e,r,o){o=o||{};var a=i.version.minor>=3?"::":"",u=function(t){var e=n.kebobString(t);return/^(x|data)-/.exec(e)?"x-"+e:e},s=function(t){var e=n.services.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(f).reduce(n.unnestR,[])}(r).map(function(r){var i=r.name,s=r.type,c=u(i);if(t.attr(c)&&!o[i])return c+"='"+t.attr(c)+"'";var l=o[i]||i;if("@"===s)return c+"='{{"+a+"$resolve."+l+"}}'";if("&"===s){var f=e.getResolvable(l),p=f&&f.data,h=p&&n.services.$injector.annotate(p)||[],d=n.isArray(p)?"["+(p.length-1)+"]":"";return c+"='$resolve."+l+d+"("+h.join(",")+")'"}return c+"='"+a+"$resolve."+l+"'"}).join(" "),c=u(r);return"<"+c+" "+s+"></"+c+">"},t}(),f=function(t){return n.isObject(t.bindToController)?p(t.bindToController):p(t.scope)},p=function(t){return Object.keys(t||{}).map(function(e){return[e,/^([=<@&])[?]?(.*)/.exec(t[e])]}).filter(function(t){return n.isDefined(t)&&n.isArray(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},h=function(){function t(e,r){this.stateRegistry=e,this.stateService=r,n.createProxyFunctions(n.val(t.prototype),this,n.val(this))}return t.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},t.prototype.state=function(t,e){return n.isObject(t)?e=t:e.name=t,this.stateRegistry.register(e),this},t.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},t}(),d=function(t){return function(e,r){var i=e[t],o="onExit"===t?"from":"to";return i?function(t,e){var r=new n.ResolveContext(t.treeChanges(o)).subContext(e.$$state()),a=n.extend(A(r),{$state$:e,$transition$:t});return n.services.$injector.invoke(i,this,a)}:void 0}},v=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=n.val(t);n.createProxyFunctions(e,this,e,["hashPrefix"])}return t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return n.removeFrom(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=n.isObject(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.baseHref=function(){return this._baseHref||(this._baseHref=this.$browser.baseHref()||this.$window.location.pathname)},t.prototype.url=function(t,e,r){return void 0===e&&(e=!1),n.isDefined(t)&&this.$location.url(t),e&&this.$location.replace(),r&&this.$location.state(r),this.$location.url()},t.prototype._runtimeServices=function(t,e,r,i,o){var a=this;this.$location=e,this.$sniffer=r,this.$browser=i,this.$window=o,t.$on("$locationChangeSuccess",function(t){return a._urlListeners.forEach(function(e){return e(t)})});var u=n.val(e);n.createProxyFunctions(u,this,u,["replace","path","search","hash"]),n.createProxyFunctions(u,this,u,["port","protocol","host"])},t}(),m=function(){function t(t){this._router=t,this._urlRouter=t.urlRouter}return t.injectableHandler=function(t,e){return function(r){return n.services.$injector.invoke(e,null,{$match:r,$stateParams:t.globals.params})}},t.prototype.$get=function(){var t=this._urlRouter;return t.update(!0),t.interceptDeferred||t.listen(),t},t.prototype.rule=function(t){var e=this;if(!n.isFunction(t))throw new Error("'rule' must be a function");var r=new n.BaseUrlRule(function(){return t(n.services.$injector,e._router.locationService)},n.identity);return this._urlRouter.rule(r),this},t.prototype.otherwise=function(t){var e=this,r=this._urlRouter;if(n.isString(t))r.otherwise(t);else{if(!n.isFunction(t))throw new Error("'rule' must be a string or function");r.otherwise(function(){return t(n.services.$injector,e._router.locationService)})}return this},t.prototype.when=function(e,r){return(n.isArray(r)||n.isFunction(r))&&(r=t.injectableHandler(this._router,r)),this._urlRouter.when(e,r),this},t.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)},t}();i.module("ui.router.angular1",[]);var g=i.module("ui.router.init",["ng"]),$=i.module("ui.router.util",["ui.router.init"]),y=i.module("ui.router.router",["ui.router.util"]),b=i.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),w=i.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),x=(i.module("ui.router.compat",["ui.router"]),null);function O(t){(x=this.router=new n.UIRouter).stateProvider=new h(x.stateRegistry,x.stateService),x.stateRegistry.decorator("views",u),x.stateRegistry.decorator("onExit",d("onExit")),x.stateRegistry.decorator("onRetain",d("onRetain")),x.stateRegistry.decorator("onEnter",d("onEnter")),x.viewService._pluginapi._viewConfigFactory("ng1",o());var e=x.locationService=x.locationConfig=new v(t);function r(t,n,r,i,o,a,u){return e._runtimeServices(o,t,i,n,r),delete x.router,delete x.$get,x}return v.monkeyPatchPathParameterType(x),x.router=x,x.$get=r,r.$inject=["$location","$browser","$window","$sniffer","$rootScope","$http","$templateCache"],x}O.$inject=["$locationProvider"];var E=function(t){return["$uiRouterProvider",function(e){var n=e.router[t];return n.$get=function(){return n},n}]};function S(t,e,r){if(n.services.$injector=t,n.services.$q=e,!t.hasOwnProperty("strictDi"))try{t.invoke(function(t){})}catch(e){t.strictDi=!!/strict mode/.exec(e&&e.toString())}r.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(n.unnestR,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(e){return e.deps=t.annotate(e.resolveFn,t.strictDi)})}function C(t){t.$watch(function(){n.trace.approximateDigests++})}S.$inject=["$injector","$q","$uiRouter"],C.$inject=["$rootScope"],g.provider("$uiRouter",O),y.provider("$urlRouter",["$uiRouterProvider",function(t){return t.urlRouterProvider=new m(t)}]),$.provider("$urlService",E("urlService")),$.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return x.urlMatcherFactory}]),$.provider("$templateFactory",function(){return new l}),b.provider("$stateRegistry",E("stateRegistry")),b.provider("$uiRouterGlobals",E("globals")),b.provider("$transitions",E("transitionService")),b.provider("$state",["$uiRouterProvider",function(){return n.extend(x.stateProvider,{$get:function(){return x.stateService}})}]),b.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),w.factory("$view",function(){return x.viewService}),w.service("$trace",function(){return n.trace}),w.run(C),$.run(["$urlMatcherFactory",function(t){}]),b.run(["$state",function(t){}]),y.run(["$urlRouter",function(t){}]),g.run(S);var j,k,T,_,A=function(t){var e=t.getTokens().filter(n.isString),r=e.map(function(e){var n=t.getResolvable(e),r=t.getPolicy(n).async;return[e,"NOWAIT"===r?n.promise:n.data]});return r.reduce(n.applyPairs,{})};function R(t){var e,n=t.match(/^\s*({[^}]*})\s*$/);if(n&&(t="("+n[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function P(t){var e=t.parent().inheritedData("$uiView"),r=n.parse("$cfg.path")(e);return r?n.tail(r).state.name:void 0}function N(t,e,r){var i=r.uiState||t.current.name,o=n.extend(function(t,e){return{relative:P(t)||e.$current,inherit:!0,source:"sref"}}(e,t),r.uiStateOpts||{}),a=t.href(i,r.uiStateParams,o);return{uiState:i,uiStateParams:r.uiStateParams,uiStateOpts:o,href:a}}function D(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function I(t,e,n,r,i){return function(o){var a=o.which||o.button,u=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var s=n(function(){t.attr("disabled")||e.go(u.uiState,u.uiStateParams,u.uiStateOpts)});o.preventDefault();var c=r.isAnchor&&!u.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(s)}}}}function M(t,e,r,i){var o;i&&(o=i.events),n.isArray(o)||(o=["click"]);for(var a=t.on?"on":"bind",u=0,s=o;u<s.length;u++){var c=s[u];t[a](c,r)}e.$on("$destroy",function(){for(var e=t.off?"off":"unbind",n=0,i=o;n<i.length;n++){var a=i[n];t[e](a,r)}})}function V(t){var e=function(e,n,r){return t.is(e,n,r)};return e.$stateful=!0,e}function q(t){var e=function(e,n,r){return t.includes(e,n,r)};return e.$stateful=!0,e}function L(t,e,r,o,a,u){var s=n.parse("viewDecl.controllerAs"),c=n.parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(o){var u=o.html();return o.empty(),function(o,l){var f=l.data("$uiView");if(!f)return l.html(u),void t(l.contents())(o);var p=f.$cfg||{viewDecl:{},getTemplate:n.noop},h=p.path&&new n.ResolveContext(p.path);l.html(p.getTemplate(l,h)||u),n.trace.traceUIViewFill(f.$uiView,l.html());var d=t(l.contents()),v=p.controller,m=s(p),g=c(p),$=h&&A(h);if(o[g]=$,v){var y=e(v,n.extend({},$,{$scope:o,$element:l}));m&&(o[m]=y,o[m][g]=$),l.data("$ngControllerController",y),l.children().data("$ngControllerController",y),F(a,r,y,o,p)}if(n.isString(p.component))var b=n.kebobString(p.component),w=new RegExp("^(x-|data-)?"+b+"$","i"),x=o.$watch(function(){var t=[].slice.call(l[0].children).filter(function(t){return t&&t.tagName&&w.exec(t.tagName)});return t&&i.element(t).data("$"+p.component+"Controller")},function(t){t&&(F(a,r,t,o,p),x())});d(o)}}}}j=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,u){var s,c=D(o),l=u[1]||u[0],f=null,p={},h=function(){return N(r,o,p)},d=R(a.uiSref);function v(){var t=h();f&&f(),l&&(f=l.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&a.$set(c.attr,t.href)}p.uiState=d.state,p.uiStateOpts=a.uiSrefOpts?i.$eval(a.uiSrefOpts):{},d.paramExpr&&(i.$watch(d.paramExpr,function(t){p.uiStateParams=n.extend({},t),v()},!0),p.uiStateParams=n.extend({},i.$eval(d.paramExpr))),v(),i.$on("$destroy",t.stateRegistry.onStatesChanged(v)),i.$on("$destroy",t.transitionService.onSuccess({},v)),c.clickable&&(s=I(o,r,e,c,h),M(o,i,s,p.uiStateOpts))}}}],k=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,u){var s,c=D(o),l=u[1]||u[0],f=null,p={},h=function(){return N(r,o,p)},d=["uiState","uiStateParams","uiStateOpts"],v=d.reduce(function(t,e){return t[e]=n.noop,t},{});function m(){var t=h();f&&f(),l&&(f=l.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&a.$set(c.attr,t.href)}d.forEach(function(t){p[t]=a[t]?i.$eval(a[t]):null,a.$observe(t,function(e){v[t](),v[t]=i.$watch(e,function(e){p[t]=e,m()},!0)})}),m(),i.$on("$destroy",t.stateRegistry.onStatesChanged(m)),i.$on("$destroy",t.transitionService.onSuccess({},m)),c.clickable&&(s=I(o,r,e,c,h),M(o,i,s,p.uiStateOpts))}}}],T=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,r,i){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,o,a){var u,s,c=[];u=r(a.uiSrefActiveEq||"",!1)(e);try{s=e.$eval(a.uiSrefActive)}catch(t){}function l(t){t.promise.then(d,n.noop)}function f(){p(s)}function p(t){n.isObject(t)&&(c=[],n.forEach(t,function(t,r){var i=function(t,n){var r=R(t);h(r.state,e.$eval(r.paramExpr),n)};n.isString(t)?i(t,r):n.isArray(t)&&n.forEach(t,function(t){i(t,r)})}))}function h(e,r,i){var a=t.get(e,P(o)),u={state:a||{name:e},params:r,activeClass:i};return c.push(u),function(){n.removeFrom(c)(u)}}function d(){var r=function(t){return t.split(/\s/).filter(n.identity)},i=function(t){return t.map(function(t){return t.activeClass}).map(r).reduce(n.unnestR,[])},a=i(c).concat(r(u)).reduce(n.uniqR,[]),s=i(c.filter(function(e){return t.includes(e.state.name,e.params)})),l=!!c.filter(function(e){return t.is(e.state.name,e.params)}).length,f=l?r(u):[],p=s.concat(f).reduce(n.uniqR,[]),h=a.filter(function(t){return!n.inArray(p,t)});e.$evalAsync(function(){p.forEach(function(t){return o.addClass(t)}),h.forEach(function(t){return o.removeClass(t)})})}p(s=s||r(a.uiSrefActive||"",!1)(e)),this.$$addStateInfo=function(t,e){if(!(n.isObject(s)&&c.length>0)){var r=h(t,e,s);return d(),r}},e.$on("$destroy",function(){var t=i.stateRegistry.onStatesChanged(f),n=i.transitionService.onStart({},l),r=e.$on("$stateChangeSuccess",d);return function(){t(),n(),r()}}()),i.globals.transition&&l(i.globals.transition),d()}]}}],i.module("ui.router.state").directive("uiSref",j).directive("uiSrefActive",T).directive("uiSrefActiveEq",T).directive("uiState",k),V.$inject=["$state"],q.$inject=["$state"],i.module("ui.router.state").filter("isState",V).filter("includedByState",q),_=["$view","$animate","$uiViewScroll","$interpolate","$q",function(t,e,r,o,a){var u={$cfg:{viewDecl:{$context:t._pluginapi._rootViewContext()}},$uiView:{}},s={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(l,f,p){return function(l,f,h){var d,v,m,g,$,y=h.onload||"",b=h.autoscroll,w={enter:function(t,n,r){i.version.minor>2?e.enter(t,null,n).then(r):e.enter(t,null,n,r)},leave:function(t,n){i.version.minor>2?e.leave(t).then(n):e.leave(t,n)}},x=f.inheritedData("$uiView")||u,O=o(h.uiView||h.name||"")(l)||"$default",E={$type:"ng1",id:s.count++,name:O,fqn:x.$uiView.fqn?x.$uiView.fqn+"."+O:O,config:null,configUpdated:function(t){(!t||t instanceof c)&&(function(t,e){return t===e}(g,t)||(n.trace.traceUIViewConfigUpdated(E,t&&t.viewDecl&&t.viewDecl.$context),g=t,S(t)))},get creationContext(){var t=n.parse("$cfg.viewDecl.$context")(x),e=n.parse("$uiView.creationContext")(x);return t||e}};function S(t){var e=l.$new(),i=a.defer(),o=a.defer(),u={$cfg:t,$uiView:E},s={$animEnter:i.promise,$animLeave:o.promise,$$animLeave:o};e.$emit("$viewContentLoading",O);var c=p(e,function(t){t.data("$uiViewAnim",s),t.data("$uiView",u),w.enter(t,f,function(){i.resolve(),m&&m.$emit("$viewContentAnimationEnded"),(n.isDefined(b)&&!b||l.$eval(b))&&r(t)}),function(){if(d&&(n.trace.traceUIViewEvent("Removing (previous) el",d.data("$uiView")),d.remove(),d=null),m&&(n.trace.traceUIViewEvent("Destroying scope",E),m.$destroy(),m=null),v){var t=v.data("$uiViewAnim");n.trace.traceUIViewEvent("Animate out",t),w.leave(v,function(){t.$$animLeave.resolve(),d=null}),d=v,v=null}}()});v=c,(m=e).$emit("$viewContentLoaded",t||g),m.$eval(y)}n.trace.traceUIViewEvent("Linking",E),f.data("$uiView",{$uiView:E}),S(),$=t.registerUIView(E),l.$on("$destroy",function(){n.trace.traceUIViewEvent("Destroying/Unregistering",E),$()})}}};return s}],L.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var H="function"==typeof i.module("ui.router").component,U=0;function F(t,e,r,i,o){!n.isFunction(r.$onInit)||o.viewDecl.component&&H||r.$onInit();var a=n.tail(o.path).state.self,u={bind:r};if(n.isFunction(r.uiOnParamsChanged)){var s=new n.ResolveContext(o.path),c=s.getResolvable("$transition$").data;i.$on("$destroy",e.onSuccess({},function(t){if(t!==c&&-1===t.exiting().indexOf(a)){var e=t.params("to"),i=t.params("from"),o=function(t){return t.paramSchema},u=t.treeChanges("to").map(o).reduce(n.unnestR,[]),s=t.treeChanges("from").map(o).reduce(n.unnestR,[]),l=u.filter(function(t){var n=s.indexOf(t);return-1===n||!s[n].type.equals(e[t.id],i[t.id])});if(l.length){var f=l.map(function(t){return t.id}),p=n.filter(e,function(t,e){return-1!==f.indexOf(e)});r.uiOnParamsChanged(p,t)}}},u))}if(n.isFunction(r.uiCanExit)){var l=U++,f=function(t){return!!t&&(t._uiCanExitIds&&!0===t._uiCanExitIds[l]||f(t.redirectedFrom()))},p={exiting:a.name};i.$on("$destroy",e.onBefore(p,function(e){var n,i=e._uiCanExitIds=e._uiCanExitIds||{};return f(e)||(n=t.when(r.uiCanExit(e))).then(function(t){return i[l]=!1!==t}),n},u))}}i.module("ui.router.state").directive("uiView",_),i.module("ui.router.state").directive("uiView",L),i.module("ui.router.state").provider("$uiViewScroll",function(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]}),Object.keys(n).forEach(function(e){t[e]=n[e]}),t.core=n,t.default="ui.router",t.watchDigests=C,t.getLocals=A,t.getNg1ViewConfigFactory=o,t.ng1ViewsBuilder=u,t.Ng1ViewConfig=c,t.StateProvider=h,t.UrlRouterProvider=m,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(4),n(19))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(16));var o=void 0,a=function(){function t(e,n){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(o=e).message=e.name,this.http=n}return t.$inject=["$scope","$http"],r(t,[{key:"getMessage",value:function(){i.default.ngPost(this.http,"walletw.exmasterbank?",{xname:"dodol"},function(t){console.log(t),"OK"===t.STATUS&&(o.listBank=t.LIST_BANK)}).catch(function(t){console.log(t)})}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(17));var o="https://www.exact.co.id/SE/",a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"ngPost",value:async function(t,e,n,r){t.post(o+e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){r(t.data)}).catch(function(t){console.log(t.status)})}},{key:"ngGet",value:async function(t,e,n,r){t.get(o+e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){r(t.data)}).catch(function(t){console.log(t.status)})}},{key:"ngPut",value:async function(t,e,n,r){t.put(o+e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){r(t.data)}).catch(function(t){console.log(t.status)})}},{key:"ngDelete",value:async function(t,e,n,r){t.put(o+e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){r(t.data)}).catch(function(t){console.log(t.status)})}},{key:"doPost",value:async function(t,e,n){try{var r=o+t;setTimeout(function(){i.default.post(r,e,function(t,e){n(JSON.parse(t))}).done(function(t,e){console.log(e)}).fail(function(t){console.log(t)}).always(function(t){console.log("Request Done")})},3e3)}catch(t){return null}}},{key:"doGet",value:async function(t,e,n){try{var r=o+t;setTimeout(function(){i.default.get(r,e,function(t,e){n(JSON.parse(t))}).done(function(t,e){console.log(e)}).fail(function(t){console.log(t)}).always(function(t){console.log("Request Done")})},3e3)}catch(t){return null}}}]),t}();e.default=a},function(t,e,n){var r;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,i){"use strict";var o=[],a=n.document,u=Object.getPrototypeOf,s=o.slice,c=o.concat,l=o.push,f=o.indexOf,p={},h=p.toString,d=p.hasOwnProperty,v=d.toString,m=v.call(Object),g={},$=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function(t){return null!=t&&t===t.window},b={type:!0,src:!0,noModule:!0};function w(t,e,n){var r,i=(e=e||a).createElement("script");if(i.text=t,n)for(r in b)n[r]&&(i[r]=n[r]);e.head.appendChild(i).parentNode.removeChild(i)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?p[h.call(t)]||"object":typeof t}var O=function(t,e){return new O.fn.init(t,e)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function S(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!$(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}O.fn=O.prototype={jquery:"3.3.1",constructor:O,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=O.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return O.each(this,t)},map:function(t){return this.pushStack(O.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},O.extend=O.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},u=1,s=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[u]||{},u++),"object"==typeof a||$(a)||(a={}),u===s&&(a=this,u--);u<s;u++)if(null!=(t=arguments[u]))for(e in t)n=a[e],a!==(r=t[e])&&(c&&r&&(O.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&O.isPlainObject(n)?n:{},a[e]=O.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},O.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==h.call(t))&&(!(e=u(t))||"function"==typeof(n=d.call(e,"constructor")&&e.constructor)&&v.call(n)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){w(t)},each:function(t,e){var n,r=0;if(S(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(E,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?O.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:f.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(S(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return c.apply([],a)},guid:1,support:g}),"function"==typeof Symbol&&(O.fn[Symbol.iterator]=o[Symbol.iterator]),O.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){p["[object "+e+"]"]=e.toLowerCase()});var C=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){var e,n,r,i,o,a,u,s,c,l,f,p,h,d,v,m,g,$,y,b="sizzle"+1*new Date,w=t.document,x=0,O=0,E=at(),S=at(),C=at(),j=function(t,e){return t===e&&(f=!0),0},k={}.hasOwnProperty,T=[],_=T.pop,A=T.push,R=T.push,P=T.slice,N=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",V="\\["+I+"*("+M+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+I+"*\\]",q=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",L=new RegExp(I+"+","g"),H=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),U=new RegExp("^"+I+"*,"+I+"*"),F=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),B=new RegExp("="+I+"*([^\\]'\"]*?)"+I+"*\\]","g"),W=new RegExp(q),z=new RegExp("^"+M+"$"),G={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){p()},it=$t(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{R.apply(T=P.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(t){R={apply:T.length?function(t,e){A.apply(t,P.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,u,c,l,f,d,g,$=e&&e.ownerDocument,x=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return r;if(!i&&((e?e.ownerDocument||e:w)!==h&&p(e),e=e||h,v)){if(11!==x&&(f=X.exec(t)))if(o=f[1]){if(9===x){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if($&&(c=$.getElementById(o))&&y(e,c)&&c.id===o)return r.push(c),r}else{if(f[2])return R.apply(r,e.getElementsByTagName(t)),r;if((o=f[3])&&n.getElementsByClassName&&e.getElementsByClassName)return R.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!C[t+" "]&&(!m||!m.test(t))){if(1!==x)$=e,g=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(et,nt):e.setAttribute("id",l=b),u=(d=a(t)).length;u--;)d[u]="#"+l+" "+gt(d[u]);g=d.join(","),$=Q.test(t)&&vt(e.parentNode)||e}if(g)try{return R.apply(r,$.querySelectorAll(g)),r}catch(t){}finally{l===b&&e.removeAttribute("id")}}}return s(t.replace(H,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ut(t){return t[b]=!0,t}function st(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ht(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function dt(t){return ut(function(e){return e=+e,ut(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:w;return a!==h&&9===a.nodeType&&a.documentElement?(d=(h=a).documentElement,v=!o(h),w!==h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=st(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=st(function(t){return t.appendChild(h.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(h.getElementsByClassName),n.getById=st(function(t){return d.appendChild(t).id=b,!h.getElementsByName||!h.getElementsByName(b).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&v){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&v){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&v)return e.getElementsByClassName(t)},g=[],m=[],(n.qsa=Y.test(h.querySelectorAll))&&(st(function(t){d.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+I+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+I+"*(?:value|"+D+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")}),st(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+I+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test($=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&st(function(t){n.disconnectedMatch=$.call(t,"*"),$.call(t,"[s!='']:x"),g.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),e=Y.test(d.compareDocumentPosition),y=e||Y.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},j=e?function(t,e){if(t===e)return f=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===h||t.ownerDocument===w&&y(w,t)?-1:e===h||e.ownerDocument===w&&y(w,e)?1:l?N(l,t)-N(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return f=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],u=[e];if(!i||!o)return t===h?-1:e===h?1:i?-1:o?1:l?N(l,t)-N(l,e):0;if(i===o)return lt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?lt(a[r],u[r]):a[r]===w?-1:u[r]===w?1:0},h):h},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==h&&p(t),e=e.replace(B,"='$1']"),n.matchesSelector&&v&&!C[e+" "]&&(!g||!g.test(e))&&(!m||!m.test(e)))try{var r=$.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,h,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==h&&p(t),y(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==h&&p(t);var i=r.attrHandle[e.toLowerCase()],o=i&&k.call(r.attrHandle,e.toLowerCase())?i(t,e,!v):void 0;return void 0!==o?o:n.attributes||!v?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(f=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(j),f){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:ut,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Z,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Z,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Z,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+I+")"+t+"("+I+"|$)"))&&E(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(L," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),u="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,s){var c,l,f,p,h,d,v=o!==a?"nextSibling":"previousSibling",m=e.parentNode,g=u&&e.nodeName.toLowerCase(),$=!s&&!u,y=!1;if(m){if(o){for(;v;){for(p=e;p=p[v];)if(u?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;d=v="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&$){for(y=(h=(c=(l=(f=(p=m)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[t]||[])[0]===x&&c[1])&&c[2],p=h&&m.childNodes[h];p=++h&&p&&p[v]||(y=h=0)||d.pop();)if(1===p.nodeType&&++y&&p===e){l[t]=[x,h,y];break}}else if($&&(y=h=(c=(l=(f=(p=e)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[t]||[])[0]===x&&c[1]),!1===y)for(;(p=++h&&p&&p[v]||(y=h=0)||d.pop())&&((u?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++y||($&&((l=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[t]=[x,y]),p!==e)););return(y-=i)===r||y%r==0&&y/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=N(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:ut(function(t){var e=[],n=[],r=u(t.replace(H,"$1"));return r[b]?ut(function(t,e,n,i){for(var o,a=r(t,null,i,[]),u=t.length;u--;)(o=a[u])&&(t[u]=!(e[u]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:ut(function(t){return function(e){return ot(t,e).length>0}}),contains:ut(function(t){return t=t.replace(Z,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:ut(function(t){return z.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(Z,tt).toLowerCase(),function(e){var n;do{if(n=v?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ht(!1),disabled:ht(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(t,e){return[e-1]}),eq:dt(function(t,e,n){return[n<0?n+e:n]}),even:dt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:dt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:dt(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:dt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function mt(){}function gt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function $t(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,u=O++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,s){var c,l,f,p=[x,u];if(s){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(l=(f=e[b]||(e[b]={}))[e.uniqueID]||(f[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[o])&&c[0]===x&&c[1]===u)return p[2]=c[2];if(l[o]=p,p[2]=t(e,n,s))return!0}return!1}}function yt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function bt(t,e,n,r,i){for(var o,a=[],u=0,s=t.length,c=null!=e;u<s;u++)(o=t[u])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(u)));return a}function wt(t,e,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),ut(function(o,a,u,s){var c,l,f,p=[],h=[],d=a.length,v=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",u.nodeType?[u]:u,[]),m=!t||!o&&e?v:bt(v,p,t,u,s),g=n?i||(o?t:d||r)?[]:a:m;if(n&&n(m,g,u,s),r)for(c=bt(g,h),r(c,[],u,s),l=c.length;l--;)(f=c[l])&&(g[h[l]]=!(m[h[l]]=f));if(o){if(i||t){if(i){for(c=[],l=g.length;l--;)(f=g[l])&&c.push(m[l]=f);i(null,g=[],c,s)}for(l=g.length;l--;)(f=g[l])&&(c=i?N(o,f):p[l])>-1&&(o[c]=!(a[c]=f))}}else g=bt(g===a?g.splice(d,g.length):g),i?i(null,a,g,s):R.apply(a,g)})}function xt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],u=a||r.relative[" "],s=a?1:0,l=$t(function(t){return t===e},u,!0),f=$t(function(t){return N(e,t)>-1},u,!0),p=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?l(t,n,r):f(t,n,r));return e=null,i}];s<o;s++)if(n=r.relative[t[s].type])p=[$t(yt(p),n)];else{if((n=r.filter[t[s].type].apply(null,t[s].matches))[b]){for(i=++s;i<o&&!r.relative[t[i].type];i++);return wt(s>1&&yt(p),s>1&&gt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(H,"$1"),n,s<i&&xt(t.slice(s,i)),i<o&&xt(t=t.slice(i)),i<o&&gt(t))}p.push(n)}return yt(p)}return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,a=ot.tokenize=function(t,e){var n,i,o,a,u,s,c,l=S[t+" "];if(l)return e?0:l.slice(0);for(u=t,s=[],c=r.preFilter;u;){for(a in n&&!(i=U.exec(u))||(i&&(u=u.slice(i[0].length)||u),s.push(o=[])),n=!1,(i=F.exec(u))&&(n=i.shift(),o.push({value:n,type:i[0].replace(H," ")}),u=u.slice(n.length)),r.filter)!(i=G[a].exec(u))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),u=u.slice(n.length));if(!n)break}return e?u.length:u?ot.error(t):S(t,s).slice(0)},u=ot.compile=function(t,e){var n,i=[],o=[],u=C[t+" "];if(!u){for(e||(e=a(t)),n=e.length;n--;)(u=xt(e[n]))[b]?i.push(u):o.push(u);(u=C(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,u,s,l){var f,d,m,g=0,$="0",y=o&&[],b=[],w=c,O=o||i&&r.find.TAG("*",l),E=x+=null==w?1:Math.random()||.1,S=O.length;for(l&&(c=a===h||a||l);$!==S&&null!=(f=O[$]);$++){if(i&&f){for(d=0,a||f.ownerDocument===h||(p(f),u=!v);m=t[d++];)if(m(f,a||h,u)){s.push(f);break}l&&(x=E)}n&&((f=!m&&f)&&g--,o&&y.push(f))}if(g+=$,n&&$!==g){for(d=0;m=e[d++];)m(y,b,a,u);if(o){if(g>0)for(;$--;)y[$]||b[$]||(b[$]=_.call(s));b=bt(b)}R.apply(s,b),l&&!o&&b.length>0&&g+e.length>1&&ot.uniqueSort(s)}return l&&(x=E,c=w),y};return n?ut(o):o}(o,i))).selector=t}return u},s=ot.select=function(t,e,n,i){var o,s,c,l,f,p="function"==typeof t&&t,h=!i&&a(t=p.selector||t);if(n=n||[],1===h.length){if((s=h[0]=h[0].slice(0)).length>2&&"ID"===(c=s[0]).type&&9===e.nodeType&&v&&r.relative[s[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(Z,tt),e)||[])[0]))return n;p&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(o=G.needsContext.test(t)?0:s.length;o--&&(c=s[o],!r.relative[l=c.type]);)if((f=r.find[l])&&(i=f(c.matches[0].replace(Z,tt),Q.test(s[0].type)&&vt(e.parentNode)||e))){if(s.splice(o,1),!(t=i.length&&gt(s)))return R.apply(n,i),n;break}}return(p||u(t,h))(i,e,!v,n,!e||Q.test(t)&&vt(e.parentNode)||e),n},n.sortStable=b.split("").sort(j).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=st(function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))}),st(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&st(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),st(function(t){return null==t.getAttribute("disabled")})||ct(D,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),ot}(n);O.find=C,O.expr=C.selectors,O.expr[":"]=O.expr.pseudos,O.uniqueSort=O.unique=C.uniqueSort,O.text=C.getText,O.isXMLDoc=C.isXML,O.contains=C.contains,O.escapeSelector=C.escape;var j=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&O(t).is(n))break;r.push(t)}return r},k=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},T=O.expr.match.needsContext;function _(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(t,e,n){return $(e)?O.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?O.grep(t,function(t){return t===e!==n}):"string"!=typeof e?O.grep(t,function(t){return f.call(e,t)>-1!==n}):O.filter(e,t,n)}O.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?O.find.matchesSelector(r,t)?[r]:[]:O.find.matches(t,O.grep(e,function(t){return 1===t.nodeType}))},O.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(O(t).filter(function(){for(e=0;e<r;e++)if(O.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)O.find(t,i[e],n);return r>1?O.uniqueSort(n):n},filter:function(t){return this.pushStack(R(this,t||[],!1))},not:function(t){return this.pushStack(R(this,t||[],!0))},is:function(t){return!!R(this,"string"==typeof t&&T.test(t)?O(t):t||[],!1).length}});var P,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(O.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:N.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof O?e[0]:e,O.merge(this,O.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),A.test(r[1])&&O.isPlainObject(e))for(r in e)$(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):$(t)?void 0!==n.ready?n.ready(t):t(O):O.makeArray(t,this)}).prototype=O.fn,P=O(a);var D=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function M(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}O.fn.extend({has:function(t){var e=O(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(O.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&O(t);if(!T.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&O.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?O.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?f.call(O(t),this[0]):f.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(O.uniqueSort(O.merge(this.get(),O(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),O.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return j(t,"parentNode")},parentsUntil:function(t,e,n){return j(t,"parentNode",n)},next:function(t){return M(t,"nextSibling")},prev:function(t){return M(t,"previousSibling")},nextAll:function(t){return j(t,"nextSibling")},prevAll:function(t){return j(t,"previousSibling")},nextUntil:function(t,e,n){return j(t,"nextSibling",n)},prevUntil:function(t,e,n){return j(t,"previousSibling",n)},siblings:function(t){return k((t.parentNode||{}).firstChild,t)},children:function(t){return k(t.firstChild)},contents:function(t){return _(t,"iframe")?t.contentDocument:(_(t,"template")&&(t=t.content||t),O.merge([],t.childNodes))}},function(t,e){O.fn[t]=function(n,r){var i=O.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=O.filter(r,i)),this.length>1&&(I[t]||O.uniqueSort(i),D.test(t)&&i.reverse()),this.pushStack(i)}});var V=/[^\x20\t\r\n\f]+/g;function q(t){return t}function L(t){throw t}function H(t,e,n,r){var i;try{t&&$(i=t.promise)?i.call(t).done(e).fail(n):t&&$(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}O.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return O.each(t.match(V)||[],function(t,n){e[n]=!0}),e}(t):O.extend({},t);var e,n,r,i,o=[],a=[],u=-1,s=function(){for(i=i||t.once,r=e=!0;a.length;u=-1)for(n=a.shift();++u<o.length;)!1===o[u].apply(n[0],n[1])&&t.stopOnFalse&&(u=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(u=o.length-1,a.push(n)),function e(n){O.each(n,function(n,r){$(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&e(r)})}(arguments),n&&!e&&s()),this},remove:function(){return O.each(arguments,function(t,e){for(var n;(n=O.inArray(e,o,n))>-1;)o.splice(n,1),n<=u&&u--}),this},has:function(t){return t?O.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||s()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},O.extend({Deferred:function(t){var e=[["notify","progress",O.Callbacks("memory"),O.Callbacks("memory"),2],["resolve","done",O.Callbacks("once memory"),O.Callbacks("once memory"),0,"resolved"],["reject","fail",O.Callbacks("once memory"),O.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return O.Deferred(function(n){O.each(e,function(e,r){var i=$(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&$(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,r,i){var o=0;function a(t,e,r,i){return function(){var u=this,s=arguments,c=function(){var n,c;if(!(t<o)){if((n=r.apply(u,s))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,$(c)?i?c.call(n,a(o,e,q,i),a(o,e,L,i)):(o++,c.call(n,a(o,e,q,i),a(o,e,L,i),a(o,e,q,e.notifyWith))):(r!==q&&(u=void 0,s=[n]),(i||e.resolveWith)(u,s))}},l=i?c:function(){try{c()}catch(n){O.Deferred.exceptionHook&&O.Deferred.exceptionHook(n,l.stackTrace),t+1>=o&&(r!==L&&(u=void 0,s=[n]),e.rejectWith(u,s))}};t?l():(O.Deferred.getStackHook&&(l.stackTrace=O.Deferred.getStackHook()),n.setTimeout(l))}}return O.Deferred(function(n){e[0][3].add(a(0,n,$(i)?i:q,n.notifyWith)),e[1][3].add(a(0,n,$(t)?t:q)),e[2][3].add(a(0,n,$(r)?r:L))}).promise()},promise:function(t){return null!=t?O.extend(t,i):i}},o={};return O.each(e,function(t,n){var a=n[2],u=n[5];i[n[1]]=a.add,u&&a.add(function(){r=u},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),o=O.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(H(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||$(i[n]&&i[n].then)))return o.then();for(;n--;)H(i[n],a(n),o.reject);return o.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;O.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&U.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},O.readyException=function(t){n.setTimeout(function(){throw t})};var F=O.Deferred();function B(){a.removeEventListener("DOMContentLoaded",B),n.removeEventListener("load",B),O.ready()}O.fn.ready=function(t){return F.then(t).catch(function(t){O.readyException(t)}),this},O.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--O.readyWait:O.isReady)||(O.isReady=!0,!0!==t&&--O.readyWait>0||F.resolveWith(a,[O]))}}),O.ready.then=F.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(O.ready):(a.addEventListener("DOMContentLoaded",B),n.addEventListener("load",B));var W=function(t,e,n,r,i,o,a){var u=0,s=t.length,c=null==n;if("object"===x(n))for(u in i=!0,n)W(t,e,u,n[u],!0,o,a);else if(void 0!==r&&(i=!0,$(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(O(t),n)})),e))for(;u<s;u++)e(t[u],n,a?r:r.call(t[u],u,e(t[u],n)));return i?t:c?e.call(t):s?e(t[0],n):o},z=/^-ms-/,G=/-([a-z])/g;function J(t,e){return e.toUpperCase()}function K(t){return t.replace(z,"ms-").replace(G,J)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=O.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in r?[e]:e.match(V)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||O.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!O.isEmptyObject(e)}};var Q=new X,Z=new X,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}O.extend({hasData:function(t){return Z.hasData(t)||Q.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return Q.access(t,e,n)},_removeData:function(t,e){Q.remove(t,e)}}),O.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=K(r.slice(5)),nt(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){Z.set(this,t)}):W(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Z.get(o,t))?n:void 0!==(n=nt(o,t))?n:void 0;this.each(function(){Z.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Z.remove(this,t)})}}),O.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Q.get(t,e),n&&(!r||Array.isArray(n)?r=Q.access(t,e,O.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=O.queue(t,e),r=n.length,i=n.shift(),o=O._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){O.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Q.get(t,n)||Q.access(t,n,{empty:O.Callbacks("once memory").add(function(){Q.remove(t,[e+"queue",n])})})}}),O.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?O.queue(this[0],t):void 0===e?this:this.each(function(){var n=O.queue(this,t,e);O._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&O.dequeue(this,t)})},dequeue:function(t){return this.each(function(){O.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=O.Deferred(),o=this,a=this.length,u=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Q.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(e)}});var rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&O.contains(t.ownerDocument,t)&&"none"===O.css(t,"display")},ut=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};function st(t,e,n,r){var i,o,a=20,u=r?function(){return r.cur()}:function(){return O.css(t,e,"")},s=u(),c=n&&n[3]||(O.cssNumber[e]?"":"px"),l=(O.cssNumber[e]||"px"!==c&&+s)&&it.exec(O.css(t,e));if(l&&l[3]!==c){for(s/=2,c=c||l[3],l=+s||1;a--;)O.style(t,e,l+c),(1-o)*(1-(o=u()/s||.5))<=0&&(a=0),l/=o;l*=2,O.style(t,e,l+c),n=n||[]}return n&&(l=+l||+s||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var ct={};function lt(t){var e,n=t.ownerDocument,r=t.nodeName,i=ct[r];return i||(e=n.body.appendChild(n.createElement(r)),i=O.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ct[r]=i,i)}function ft(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&at(r)&&(i[o]=lt(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}O.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?O(this).show():O(this).hide()})}});var pt=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,dt=/^$|^module$|\/(?:java|ecma)script/i,vt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&_(t,e)?O.merge([t],n):n}function gt(t,e){for(var n=0,r=t.length;n<r;n++)Q.set(t[n],"globalEval",!e||Q.get(e[n],"globalEval"))}vt.optgroup=vt.option,vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td;var $t=/<|&#?\w+;/;function yt(t,e,n,r,i){for(var o,a,u,s,c,l,f=e.createDocumentFragment(),p=[],h=0,d=t.length;h<d;h++)if((o=t[h])||0===o)if("object"===x(o))O.merge(p,o.nodeType?[o]:o);else if($t.test(o)){for(a=a||f.appendChild(e.createElement("div")),u=(ht.exec(o)||["",""])[1].toLowerCase(),s=vt[u]||vt._default,a.innerHTML=s[1]+O.htmlPrefilter(o)+s[2],l=s[0];l--;)a=a.lastChild;O.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(e.createTextNode(o));for(f.textContent="",h=0;o=p[h++];)if(r&&O.inArray(o,r)>-1)i&&i.push(o);else if(c=O.contains(o.ownerDocument,o),a=mt(f.appendChild(o),"script"),c&&gt(a),n)for(l=0;o=a[l++];)dt.test(o.type||"")&&n.push(o);return f}!function(){var t=a.createDocumentFragment().appendChild(a.createElement("div")),e=a.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),g.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var bt=a.documentElement,wt=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ot=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function St(){return!1}function Ct(){try{return a.activeElement}catch(t){}}function jt(t,e,n,r,i,o){var a,u;if("object"==typeof e){for(u in"string"!=typeof n&&(r=r||n,n=void 0),e)jt(t,u,n,r,e[u],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=St;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return O().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=O.guid++)),t.each(function(){O.event.add(this,e,i,r,n)})}O.event={global:{},add:function(t,e,n,r,i){var o,a,u,s,c,l,f,p,h,d,v,m=Q.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&O.find.matchesSelector(bt,i),n.guid||(n.guid=O.guid++),(s=m.events)||(s=m.events={}),(a=m.handle)||(a=m.handle=function(e){return void 0!==O&&O.event.triggered!==e.type?O.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(V)||[""]).length;c--;)h=v=(u=Ot.exec(e[c])||[])[1],d=(u[2]||"").split(".").sort(),h&&(f=O.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=O.event.special[h]||{},l=O.extend({type:h,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&O.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=s[h])||((p=s[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,d,a)||t.addEventListener&&t.addEventListener(h,a)),f.add&&(f.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),O.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,a,u,s,c,l,f,p,h,d,v,m=Q.hasData(t)&&Q.get(t);if(m&&(s=m.events)){for(c=(e=(e||"").match(V)||[""]).length;c--;)if(h=v=(u=Ot.exec(e[c])||[])[1],d=(u[2]||"").split(".").sort(),h){for(f=O.event.special[h]||{},p=s[h=(r?f.delegateType:f.bindType)||h]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)l=p[o],!i&&v!==l.origType||n&&n.guid!==l.guid||u&&!u.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,f.remove&&f.remove.call(t,l));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(t,d,m.handle)||O.removeEvent(t,h,m.handle),delete s[h])}else for(h in s)O.event.remove(t,h+e[c],n,r,!0);O.isEmptyObject(s)&&Q.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,u=O.event.fix(t),s=new Array(arguments.length),c=(Q.get(this,"events")||{})[u.type]||[],l=O.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(a=O.event.handlers.call(this,u,c),e=0;(i=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((O.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,a,u=[],s=e.delegateCount,c=t.target;if(s&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<s;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?O(i,this).index(c)>-1:O.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&u.push({elem:c,handlers:o})}return c=this,s<e.length&&u.push({elem:c,handlers:e.slice(s)}),u},addProp:function(t,e){Object.defineProperty(O.Event.prototype,t,{enumerable:!0,configurable:!0,get:$(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[O.expando]?t:new O.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ct()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ct()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&_(this,"input"))return this.click(),!1},_default:function(t){return _(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},O.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},O.Event=function(t,e){if(!(this instanceof O.Event))return new O.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&O.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[O.expando]=!0},O.Event.prototype={constructor:O.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},O.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},O.event.addProp),O.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){O.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||O.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),O.fn.extend({on:function(t,e,n,r){return jt(this,t,e,n,r)},one:function(t,e,n,r){return jt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,O(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each(function(){O.event.remove(this,t,n,e)})}});var kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Tt=/<script|<style|<link/i,_t=/checked\s*(?:[^=]|=\s*.checked.)/i,At=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Rt(t,e){return _(t,"table")&&_(11!==e.nodeType?e:e.firstChild,"tr")&&O(t).children("tbody")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Dt(t,e){var n,r,i,o,a,u,s,c;if(1===e.nodeType){if(Q.hasData(t)&&(o=Q.access(t),a=Q.set(e,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)O.event.add(e,i,c[i][n]);Z.hasData(t)&&(u=Z.access(t),s=O.extend({},u),Z.set(e,s))}}function It(t,e){var n=e.nodeName.toLowerCase();"input"===n&&pt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Mt(t,e,n,r){e=c.apply([],e);var i,o,a,u,s,l,f=0,p=t.length,h=p-1,d=e[0],v=$(d);if(v||p>1&&"string"==typeof d&&!g.checkClone&&_t.test(d))return t.each(function(i){var o=t.eq(i);v&&(e[0]=d.call(this,i,o.html())),Mt(o,e,n,r)});if(p&&(o=(i=yt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(a=O.map(mt(i,"script"),Pt)).length;f<p;f++)s=i,f!==h&&(s=O.clone(s,!0,!0),u&&O.merge(a,mt(s,"script"))),n.call(t[f],s,f);if(u)for(l=a[a.length-1].ownerDocument,O.map(a,Nt),f=0;f<u;f++)s=a[f],dt.test(s.type||"")&&!Q.access(s,"globalEval")&&O.contains(l,s)&&(s.src&&"module"!==(s.type||"").toLowerCase()?O._evalUrl&&O._evalUrl(s.src):w(s.textContent.replace(At,""),l,s))}return t}function Vt(t,e,n){for(var r,i=e?O.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||O.cleanData(mt(r)),r.parentNode&&(n&&O.contains(r.ownerDocument,r)&&gt(mt(r,"script")),r.parentNode.removeChild(r));return t}O.extend({htmlPrefilter:function(t){return t.replace(kt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,u=t.cloneNode(!0),s=O.contains(t.ownerDocument,t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||O.isXMLDoc(t)))for(a=mt(u),r=0,i=(o=mt(t)).length;r<i;r++)It(o[r],a[r]);if(e)if(n)for(o=o||mt(t),a=a||mt(u),r=0,i=o.length;r<i;r++)Dt(o[r],a[r]);else Dt(t,u);return(a=mt(u,"script")).length>0&&gt(a,!s&&mt(t,"script")),u},cleanData:function(t){for(var e,n,r,i=O.event.special,o=0;void 0!==(n=t[o]);o++)if(Y(n)){if(e=n[Q.expando]){if(e.events)for(r in e.events)i[r]?O.event.remove(n,r):O.removeEvent(n,r,e.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),O.fn.extend({detach:function(t){return Vt(this,t,!0)},remove:function(t){return Vt(this,t)},text:function(t){return W(this,function(t){return void 0===t?O.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Mt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Rt(this,t).appendChild(t)})},prepend:function(){return Mt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Rt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Mt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Mt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(O.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return O.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Tt.test(t)&&!vt[(ht.exec(t)||["",""])[1].toLowerCase()]){t=O.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(O.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Mt(this,arguments,function(e){var n=this.parentNode;O.inArray(this,t)<0&&(O.cleanData(mt(this)),n&&n.replaceChild(e,this))},t)}}),O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){O.fn[t]=function(t){for(var n,r=[],i=O(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),O(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}});var qt=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),Lt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Ht=new RegExp(ot.join("|"),"i");function Ut(t,e,n){var r,i,o,a,u=t.style;return(n=n||Lt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||O.contains(t.ownerDocument,t)||(a=O.style(t,e)),!g.pixelBoxStyles()&&qt.test(a)&&Ht.test(e)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Ft(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",bt.appendChild(c).appendChild(l);var t=n.getComputedStyle(l);r="1%"!==t.top,s=12===e(t.marginLeft),l.style.right="60%",u=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=36===l.offsetWidth||"absolute",bt.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var r,i,o,u,s,c=a.createElement("div"),l=a.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===l.style.backgroundClip,O.extend(g,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),u},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),o}}))}();var Bt=/^(none|table(?!-c[ea]).+)/,Wt=/^--/,zt={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:"0",fontWeight:"400"},Jt=["Webkit","Moz","ms"],Kt=a.createElement("div").style;function Yt(t){var e=O.cssProps[t];return e||(e=O.cssProps[t]=function(t){if(t in Kt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Jt.length;n--;)if((t=Jt[n]+e)in Kt)return t}(t)||t),e}function Xt(t,e,n){var r=it.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Qt(t,e,n,r,i,o){var a="width"===e?1:0,u=0,s=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(s+=O.css(t,n+ot[a],!0,i)),r?("content"===n&&(s-=O.css(t,"padding"+ot[a],!0,i)),"margin"!==n&&(s-=O.css(t,"border"+ot[a]+"Width",!0,i))):(s+=O.css(t,"padding"+ot[a],!0,i),"padding"!==n?s+=O.css(t,"border"+ot[a]+"Width",!0,i):u+=O.css(t,"border"+ot[a]+"Width",!0,i));return!r&&o>=0&&(s+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-s-u-.5))),s}function Zt(t,e,n){var r=Lt(t),i=Ut(t,e,r),o="border-box"===O.css(t,"boxSizing",!1,r),a=o;if(qt.test(i)){if(!n)return i;i="auto"}return a=a&&(g.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===O.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+Qt(t,e,n||(o?"border":"content"),a,r,i)+"px"}function te(t,e,n,r,i){return new te.prototype.init(t,e,n,r,i)}O.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ut(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,u=K(e),s=Wt.test(e),c=t.style;if(s||(e=Yt(u)),a=O.cssHooks[e]||O.cssHooks[u],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:c[e];"string"===(o=typeof n)&&(i=it.exec(n))&&i[1]&&(n=st(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(O.cssNumber[u]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(s?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,a,u=K(e);return Wt.test(e)||(e=Yt(u)),(a=O.cssHooks[e]||O.cssHooks[u])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Ut(t,e,r)),"normal"===i&&e in Gt&&(i=Gt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),O.each(["height","width"],function(t,e){O.cssHooks[e]={get:function(t,n,r){if(n)return!Bt.test(O.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,e,r):ut(t,zt,function(){return Zt(t,e,r)})},set:function(t,n,r){var i,o=Lt(t),a="border-box"===O.css(t,"boxSizing",!1,o),u=r&&Qt(t,e,r,a,o);return a&&g.scrollboxSize()===o.position&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Qt(t,e,"border",!1,o)-.5)),u&&(i=it.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=O.css(t,e)),Xt(0,n,u)}}}),O.cssHooks.marginLeft=Ft(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Ut(t,"marginLeft"))||t.getBoundingClientRect().left-ut(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),O.each({margin:"",padding:"",border:"Width"},function(t,e){O.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+ot[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(O.cssHooks[t+e].set=Xt)}),O.fn.extend({css:function(t,e){return W(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Lt(t),i=e.length;a<i;a++)o[e[a]]=O.css(t,e[a],!1,r);return o}return void 0!==n?O.style(t,e,n):O.css(t,e)},t,e,arguments.length>1)}}),O.Tween=te,te.prototype={constructor:te,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||O.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(O.cssNumber[n]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,n=te.propHooks[this.prop];return this.options.duration?this.pos=e=O.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):te.propHooks._default.set(this),this}},te.prototype.init.prototype=te.prototype,te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=O.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){O.fx.step[t.prop]?O.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[O.cssProps[t.prop]]&&!O.cssHooks[t.prop]?t.elem[t.prop]=t.now:O.style(t.elem,t.prop,t.now+t.unit)}}},te.propHooks.scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},O.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},O.fx=te.prototype.init,O.fx.step={};var ee,ne,re=/^(?:toggle|show|hide)$/,ie=/queueHooks$/;function oe(){ne&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(oe):n.setTimeout(oe,O.fx.interval),O.fx.tick())}function ae(){return n.setTimeout(function(){ee=void 0}),ee=Date.now()}function ue(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=ot[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function se(t,e,n){for(var r,i=(ce.tweeners[e]||[]).concat(ce.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function ce(t,e,n){var r,i,o=0,a=ce.prefilters.length,u=O.Deferred().always(function(){delete s.elem}),s=function(){if(i)return!1;for(var e=ee||ae(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return u.notifyWith(t,[c,r,n]),r<1&&a?n:(a||u.notifyWith(t,[c,1,0]),u.resolveWith(t,[c]),!1)},c=u.promise({elem:t,props:O.extend({},e),opts:O.extend(!0,{specialEasing:{},easing:O.easing._default},n),originalProperties:e,originalOptions:n,startTime:ee||ae(),duration:n.duration,tweens:[],createTween:function(e,n){var r=O.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(u.notifyWith(t,[c,1,0]),u.resolveWith(t,[c,e])):u.rejectWith(t,[c,e]),this}}),l=c.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=K(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=O.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=ce.prefilters[o].call(c,t,l,c.opts))return $(r.stop)&&(O._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return O.map(l,se,c),$(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),O.fx.timer(O.extend(s,{elem:t,anim:c,queue:c.opts.queue})),c}O.Animation=O.extend(ce,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return st(n.elem,t,it.exec(e),n),n}]},tweener:function(t,e){$(t)?(e=t,t=["*"]):t=t.match(V);for(var n,r=0,i=t.length;r<i;r++)n=t[r],ce.tweeners[n]=ce.tweeners[n]||[],ce.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,u,s,c,l,f="width"in e||"height"in e,p=this,h={},d=t.style,v=t.nodeType&&at(t),m=Q.get(t,"fxshow");for(r in n.queue||(null==(a=O._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,O.queue(t,"fx").length||a.empty.fire()})})),e)if(i=e[r],re.test(i)){if(delete e[r],o=o||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;v=!0}h[r]=m&&m[r]||O.style(t,r)}if((s=!O.isEmptyObject(e))||!O.isEmptyObject(h))for(r in f&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=m&&m.display)&&(c=Q.get(t,"display")),"none"===(l=O.css(t,"display"))&&(c?l=c:(ft([t],!0),c=t.style.display||c,l=O.css(t,"display"),ft([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===O.css(t,"float")&&(s||(p.done(function(){d.display=c}),null==c&&(l=d.display,c="none"===l?"":l)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),s=!1,h)s||(m?"hidden"in m&&(v=m.hidden):m=Q.access(t,"fxshow",{display:c}),o&&(m.hidden=!v),v&&ft([t],!0),p.done(function(){for(r in v||ft([t]),Q.remove(t,"fxshow"),h)O.style(t,r,h[r])})),s=se(v?m[r]:0,r,p),r in m||(m[r]=s.start,v&&(s.end=s.start,s.start=0))}],prefilter:function(t,e){e?ce.prefilters.unshift(t):ce.prefilters.push(t)}}),O.speed=function(t,e,n){var r=t&&"object"==typeof t?O.extend({},t):{complete:n||!n&&e||$(t)&&t,duration:t,easing:n&&e||e&&!$(e)&&e};return O.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in O.fx.speeds?r.duration=O.fx.speeds[r.duration]:r.duration=O.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){$(r.old)&&r.old.call(this),r.queue&&O.dequeue(this,r.queue)},r},O.fn.extend({fadeTo:function(t,e,n,r){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=O.isEmptyObject(t),o=O.speed(e,n,r),a=function(){var e=ce(this,O.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=O.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ie.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||O.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Q.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=O.timers,a=r?r.length:0;for(n.finish=!0,O.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),O.each(["toggle","show","hide"],function(t,e){var n=O.fn[e];O.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,r,i)}}),O.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){O.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),O.timers=[],O.fx.tick=function(){var t,e=0,n=O.timers;for(ee=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||O.fx.stop(),ee=void 0},O.fx.timer=function(t){O.timers.push(t),O.fx.start()},O.fx.interval=13,O.fx.start=function(){ne||(ne=!0,oe())},O.fx.stop=function(){ne=null},O.fx.speeds={slow:600,fast:200,_default:400},O.fn.delay=function(t,e){return t=O.fx&&O.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,r){var i=n.setTimeout(e,t);r.stop=function(){n.clearTimeout(i)}})},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var le,fe=O.expr.attrHandle;O.fn.extend({attr:function(t,e){return W(this,O.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){O.removeAttr(this,t)})}}),O.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?O.prop(t,e,n):(1===o&&O.isXMLDoc(t)||(i=O.attrHooks[e.toLowerCase()]||(O.expr.match.bool.test(e)?le:void 0)),void 0!==n?null===n?void O.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=O.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&_(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(V);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),le={set:function(t,e,n){return!1===e?O.removeAttr(t,n):t.setAttribute(n,n),n}},O.each(O.expr.match.bool.source.match(/\w+/g),function(t,e){var n=fe[e]||O.find.attr;fe[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=fe[a],fe[a]=i,i=null!=n(t,e,r)?a:null,fe[a]=o),i}});var pe=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;function de(t){return(t.match(V)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(V)||[]}O.fn.extend({prop:function(t,e){return W(this,O.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[O.propFix[t]||t]})}}),O.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&O.isXMLDoc(t)||(e=O.propFix[e]||e,i=O.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=O.find.attr(t,"tabindex");return e?parseInt(e,10):pe.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(O.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),O.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){O.propFix[this.toLowerCase()]=this}),O.fn.extend({addClass:function(t){var e,n,r,i,o,a,u,s=0;if($(t))return this.each(function(e){O(this).addClass(t.call(this,e,ve(this)))});if((e=me(t)).length)for(;n=this[s++];)if(i=ve(n),r=1===n.nodeType&&" "+de(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(u=de(r))&&n.setAttribute("class",u)}return this},removeClass:function(t){var e,n,r,i,o,a,u,s=0;if($(t))return this.each(function(e){O(this).removeClass(t.call(this,e,ve(this)))});if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;n=this[s++];)if(i=ve(n),r=1===n.nodeType&&" "+de(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(u=de(r))&&n.setAttribute("class",u)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):$(t)?this.each(function(n){O(this).toggleClass(t.call(this,n,ve(this),e),e)}):this.each(function(){var e,i,o,a;if(r)for(i=0,o=O(this),a=me(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ve(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Q.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+de(ve(n))+" ").indexOf(e)>-1)return!0;return!1}});var ge=/\r/g;O.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=$(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,O(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=O.map(i,function(t){return null==t?"":t+""})),(e=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=O.valHooks[i.type]||O.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ge,""):null==n?"":n:void 0}}),O.extend({valHooks:{option:{get:function(t){var e=O.find.attr(t,"value");return null!=e?e:de(O.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,u=a?null:[],s=a?o+1:i.length;for(r=o<0?s:a?o:0;r<s;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!_(n.parentNode,"optgroup"))){if(e=O(n).val(),a)return e;u.push(e)}return u},set:function(t,e){for(var n,r,i=t.options,o=O.makeArray(e),a=i.length;a--;)((r=i[a]).selected=O.inArray(O.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),O.each(["radio","checkbox"],function(){O.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=O.inArray(O(t).val(),e)>-1}},g.checkOn||(O.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in n;var $e=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};O.extend(O.event,{trigger:function(t,e,r,i){var o,u,s,c,l,f,p,h,v=[r||a],m=d.call(t,"type")?t.type:t,g=d.call(t,"namespace")?t.namespace.split("."):[];if(u=h=s=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!$e.test(m+O.event.triggered)&&(m.indexOf(".")>-1&&(m=(g=m.split(".")).shift(),g.sort()),l=m.indexOf(":")<0&&"on"+m,(t=t[O.expando]?t:new O.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:O.makeArray(e,[t]),p=O.event.special[m]||{},i||!p.trigger||!1!==p.trigger.apply(r,e))){if(!i&&!p.noBubble&&!y(r)){for(c=p.delegateType||m,$e.test(c+m)||(u=u.parentNode);u;u=u.parentNode)v.push(u),s=u;s===(r.ownerDocument||a)&&v.push(s.defaultView||s.parentWindow||n)}for(o=0;(u=v[o++])&&!t.isPropagationStopped();)h=u,t.type=o>1?c:p.bindType||m,(f=(Q.get(u,"events")||{})[t.type]&&Q.get(u,"handle"))&&f.apply(u,e),(f=l&&u[l])&&f.apply&&Y(u)&&(t.result=f.apply(u,e),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(v.pop(),e)||!Y(r)||l&&$(r[m])&&!y(r)&&((s=r[l])&&(r[l]=null),O.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,ye),r[m](),t.isPropagationStopped()&&h.removeEventListener(m,ye),O.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(t,e,n){var r=O.extend(new O.Event,n,{type:t,isSimulated:!0});O.event.trigger(r,null,e)}}),O.fn.extend({trigger:function(t,e){return this.each(function(){O.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return O.event.trigger(t,e,n,!0)}}),g.focusin||O.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){O.event.simulate(e,t.target,O.event.fix(t))};O.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=Q.access(r,e);i||r.addEventListener(t,n,!0),Q.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Q.access(r,e)-1;i?Q.access(r,e,i):(r.removeEventListener(t,n,!0),Q.remove(r,e))}}});var be=n.location,we=Date.now(),xe=/\?/;O.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||O.error("Invalid XML: "+t),e};var Oe=/\[\]$/,Ee=/\r?\n/g,Se=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function je(t,e,n,r){var i;if(Array.isArray(e))O.each(e,function(e,i){n||Oe.test(t)?r(t,i):je(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==x(e))r(t,e);else for(i in e)je(t+"["+i+"]",e[i],n,r)}O.param=function(t,e){var n,r=[],i=function(t,e){var n=$(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!O.isPlainObject(t))O.each(t,function(){i(this.name,this.value)});else for(n in t)je(n,t[n],e,i);return r.join("&")},O.fn.extend({serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=O.prop(this,"elements");return t?O.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!O(this).is(":disabled")&&Ce.test(this.nodeName)&&!Se.test(t)&&(this.checked||!pt.test(t))}).map(function(t,e){var n=O(this).val();return null==n?null:Array.isArray(n)?O.map(n,function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}}):{name:e.name,value:n.replace(Ee,"\r\n")}}).get()}});var ke=/%20/g,Te=/#.*$/,_e=/([?&])_=[^&]*/,Ae=/^(.*?):[ \t]*([^\r\n]*)$/gm,Re=/^(?:GET|HEAD)$/,Pe=/^\/\//,Ne={},De={},Ie="*/".concat("*"),Me=a.createElement("a");function Ve(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(V)||[];if($(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function qe(t,e,n,r){var i={},o=t===De;function a(u){var s;return i[u]=!0,O.each(t[u]||[],function(t,u){var c=u(e,n,r);return"string"!=typeof c||o||i[c]?o?!(s=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),s}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Le(t,e){var n,r,i=O.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&O.extend(!0,t,r),t}Me.href=be.href,O.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":O.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Le(Le(t,O.ajaxSettings),e):Le(O.ajaxSettings,t)},ajaxPrefilter:Ve(Ne),ajaxTransport:Ve(De),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,u,s,c,l,f,p,h,d=O.ajaxSetup({},e),v=d.context||d,m=d.context&&(v.nodeType||v.jquery)?O(v):O.event,g=O.Deferred(),$=O.Callbacks("once memory"),y=d.statusCode||{},b={},w={},x="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(l){if(!u)for(u={};e=Ae.exec(o);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)E.always(t[E.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||x;return r&&r.abort(e),S(0,e),this}};if(g.promise(E),d.url=((t||d.url||be.href)+"").replace(Pe,be.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(V)||[""],null==d.crossDomain){c=a.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Me.protocol+"//"+Me.host!=c.protocol+"//"+c.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=O.param(d.data,d.traditional)),qe(Ne,d,e,E),l)return E;for(p in(f=O.event&&d.global)&&0==O.active++&&O.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Re.test(d.type),i=d.url.replace(Te,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(ke,"+")):(h=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(xe.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(_e,"$1"),h=(xe.test(i)?"&":"?")+"_="+we+++h),d.url=i+h),d.ifModified&&(O.lastModified[i]&&E.setRequestHeader("If-Modified-Since",O.lastModified[i]),O.etag[i]&&E.setRequestHeader("If-None-Match",O.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ie+"; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(v,E,d)||l))return E.abort();if(x="abort",$.add(d.complete),E.done(d.success),E.fail(d.error),r=qe(De,d,e,E)){if(E.readyState=1,f&&m.trigger("ajaxSend",[E,d]),l)return E;d.async&&d.timeout>0&&(s=n.setTimeout(function(){E.abort("timeout")},d.timeout));try{l=!1,r.send(b,S)}catch(t){if(l)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,a,u){var c,p,h,b,w,x=e;l||(l=!0,s&&n.clearTimeout(s),r=void 0,o=u||"",E.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(b=function(t,e,n){for(var r,i,o,a,u=t.contents,s=t.dataTypes;"*"===s[0];)s.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){s.unshift(i);break}if(s[0]in n)o=s[0];else{for(i in n){if(!s[0]||t.converters[i+" "+s[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==s[0]&&s.unshift(o),n[o]}(d,E,a)),b=function(t,e,n,r){var i,o,a,u,s,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!s&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),s=o,o=l.shift())if("*"===o)o=s;else if("*"!==s&&s!==o){if(!(a=c[s+" "+o]||c["* "+o]))for(i in c)if((u=i.split(" "))[1]===o&&(a=c[s+" "+u[0]]||c["* "+u[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=u[0],l.unshift(u[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+s+" to "+o}}}return{state:"success",data:e}}(d,b,E,c),c?(d.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(O.lastModified[i]=w),(w=E.getResponseHeader("etag"))&&(O.etag[i]=w)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=b.state,p=b.data,c=!(h=b.error))):(h=x,!t&&x||(x="error",t<0&&(t=0))),E.status=t,E.statusText=(e||x)+"",c?g.resolveWith(v,[p,x,E]):g.rejectWith(v,[E,x,h]),E.statusCode(y),y=void 0,f&&m.trigger(c?"ajaxSuccess":"ajaxError",[E,d,c?p:h]),$.fireWith(v,[E,x]),f&&(m.trigger("ajaxComplete",[E,d]),--O.active||O.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return O.get(t,e,n,"json")},getScript:function(t,e){return O.get(t,void 0,e,"script")}}),O.each(["get","post"],function(t,e){O[e]=function(t,n,r,i){return $(n)&&(i=i||r,r=n,n=void 0),O.ajax(O.extend({url:t,type:e,dataType:i,data:n,success:r},O.isPlainObject(t)&&t))}}),O._evalUrl=function(t){return O.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},O.fn.extend({wrapAll:function(t){var e;return this[0]&&($(t)&&(t=t.call(this[0])),e=O(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return $(t)?this.each(function(e){O(this).wrapInner(t.call(this,e))}):this.each(function(){var e=O(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=$(t);return this.each(function(n){O(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){O(this).replaceWith(this.childNodes)}),this}}),O.expr.pseudos.hidden=function(t){return!O.expr.pseudos.visible(t)},O.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},O.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},Ue=O.ajaxSettings.xhr();g.cors=!!Ue&&"withCredentials"in Ue,g.ajax=Ue=!!Ue,O.ajaxTransport(function(t){var e,r;if(g.cors||Ue&&!t.crossDomain)return{send:function(i,o){var a,u=t.xhr();if(u.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)u[a]=t.xhrFields[a];for(a in t.mimeType&&u.overrideMimeType&&u.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)u.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=r=u.onload=u.onerror=u.onabort=u.ontimeout=u.onreadystatechange=null,"abort"===t?u.abort():"error"===t?"number"!=typeof u.status?o(0,"error"):o(u.status,u.statusText):o(He[u.status]||u.status,u.statusText,"text"!==(u.responseType||"text")||"string"!=typeof u.responseText?{binary:u.response}:{text:u.responseText},u.getAllResponseHeaders()))}},u.onload=e(),r=u.onerror=u.ontimeout=e("error"),void 0!==u.onabort?u.onabort=r:u.onreadystatechange=function(){4===u.readyState&&n.setTimeout(function(){e&&r()})},e=e("abort");try{u.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),O.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return O.globalEval(t),t}}}),O.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),O.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(r,i){e=O("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}});var Fe=[],Be=/(=)\?(?=&|$)|\?\?/;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Fe.pop()||O.expando+"_"+we++;return this[t]=!0,t}}),O.ajaxPrefilter("json jsonp",function(t,e,r){var i,o,a,u=!1!==t.jsonp&&(Be.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Be.test(t.data)&&"data");if(u||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=$(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(Be,"$1"+i):!1!==t.jsonp&&(t.url+=(xe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||O.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?O(n).removeProp(i):n[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Fe.push(i)),a&&$(o)&&o(a[0]),a=o=void 0}),"script"}),g.createHTMLDocument=function(){var t=a.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),O.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((r=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(r)):e=a),i=A.exec(t),o=!n&&[],i?[e.createElement(i[1])]:(i=yt([t],e,o),o&&o.length&&O(o).remove(),O.merge([],i.childNodes)));var r,i,o},O.fn.load=function(t,e,n){var r,i,o,a=this,u=t.indexOf(" ");return u>-1&&(r=de(t.slice(u)),t=t.slice(0,u)),$(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&O.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?O("<div>").append(O.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},O.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){O.fn[e]=function(t){return this.on(e,t)}}),O.expr.pseudos.animated=function(t){return O.grep(O.timers,function(e){return t===e.elem}).length},O.offset={setOffset:function(t,e,n){var r,i,o,a,u,s,c=O.css(t,"position"),l=O(t),f={};"static"===c&&(t.style.position="relative"),u=l.offset(),o=O.css(t,"top"),s=O.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+s).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(s)||0),$(e)&&(e=e.call(t,n,O.extend({},u))),null!=e.top&&(f.top=e.top-u.top+a),null!=e.left&&(f.left=e.left-u.left+i),"using"in e?e.using.call(t,f):l.css(f)}},O.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){O.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===O.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===O.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=O(t).offset()).top+=O.css(t,"borderTopWidth",!0),i.left+=O.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-O.css(r,"marginTop",!0),left:e.left-i.left-O.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===O.css(t,"position");)t=t.offsetParent;return t||bt})}}),O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;O.fn[t]=function(r){return W(this,function(t,r,i){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),O.each(["top","left"],function(t,e){O.cssHooks[e]=Ft(g.pixelPosition,function(t,n){if(n)return n=Ut(t,e),qt.test(n)?O(t).position()[e]+"px":n})}),O.each({Height:"height",Width:"width"},function(t,e){O.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){O.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),u=n||(!0===i||!0===o?"margin":"border");return W(this,function(e,n,i){var o;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?O.css(e,n,u):O.style(e,n,i,u)},e,a?i:void 0,a)}})}),O.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){O.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),O.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),O.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),O.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),$(t))return r=s.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(s.call(arguments)))}).guid=t.guid=t.guid||O.guid++,i},O.holdReady=function(t){t?O.readyWait++:O.ready(!0)},O.isArray=Array.isArray,O.parseJSON=JSON.parse,O.nodeName=_,O.isFunction=$,O.isWindow=y,O.camelCase=K,O.type=x,O.now=Date.now,O.isNumeric=function(t){var e=O.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(r=function(){return O}.apply(e,[]))||(t.exports=r);var We=n.jQuery,ze=n.$;return O.noConflict=function(t){return n.$===O&&(n.$=ze),t&&n.jQuery===O&&(n.jQuery=We),O},i||(n.jQuery=n.$=O),O})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$scope=e,e.accountName="Dodol"}return r(t,null,[{key:"init",value:function(){return"DOOD;"}}]),t}();e.default=i},function(t,e,n){"use strict";n.r(e);var r,i=n(0),o=n(3),a=function(){function t(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return t.is=function(t){return!!/[!,*]+/.exec(t)},t.fromString=function(e){return t.is(e)?new t(e):null},t.prototype.matches=function(t){return this.regexp.test("."+t)},t}(),u=n(2),s=n(1),c=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e,this._evictListeners=[],this.onEvict=Object(i.K)(this._evictListeners)}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&this.evict(),t},t.prototype.evict=function(){var t=this._items.shift();return this._evictListeners.forEach(function(e){return e(t)}),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();!function(t){t[t.SUPERSEDED=2]="SUPERSEDED",t[t.ABORTED=3]="ABORTED",t[t.INVALID=4]="INVALID",t[t.IGNORED=5]="IGNORED",t[t.ERROR=6]="ERROR"}(r||(r={}));var l=0,f=function(){function t(t,e,n){this.$id=l++,this.type=t,this.message=e,this.detail=n}return t.isRejectionPromise=function(e){return e&&"function"==typeof e.then&&Object(u.h)(t)(e._transitionRejection)},t.superseded=function(e,n){var i=new t(r.SUPERSEDED,"The transition has been superseded by a different transition",e);return n&&n.redirected&&(i.redirected=!0),i},t.redirected=function(e){return t.superseded(e,{redirected:!0})},t.invalid=function(e){return new t(r.INVALID,"This transition is invalid",e)},t.ignored=function(e){return new t(r.IGNORED,"The transition was ignored",e)},t.aborted=function(e){return new t(r.ABORTED,"The transition has been aborted",e)},t.errored=function(e){return new t(r.ERROR,"The transition errored",e)},t.normalize=function(e){return Object(u.h)(t)(e)?e:t.errored(e)},t.prototype.toString=function(){var t=function(t){return t&&t.toString!==Object.prototype.toString?t.toString():y(t)}(this.detail);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+t+")"},t.prototype.toPromise=function(){return Object(i.r)(Object(i.O)(this),{_transitionRejection:this})},t}();function p(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function h(t,e){for(;e.length<t;)e+=" ";return e}function d(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function v(t){var e=m(t),n=e.match(/^(function [^ ]+\([^)]*\))/),r=n?n[1]:e,i=t.name||"";return i&&r.match(/function \(/)?"function "+i+r.substr(9):r}function m(t){var e=Object(s.a)(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}var g=f.isRejectionPromise,$=Object(u.l)([[s.m,Object(u.p)("undefined")],[s.f,Object(u.p)("null")],[s.j,Object(u.p)("[Promise]")],[g,function(t){return t._transitionRejection.toString()}],[function(t){return Object(s.i)(t)&&!Object(s.a)(t)&&t.constructor!==Object&&Object(s.d)(t.toString)},function(t){return t.toString()}],[s.e,v],[Object(u.p)(!0),i.y]]);function y(t){var e=[];function n(t){if(Object(s.i)(t)){if(-1!==e.indexOf(t))return"[circular ref]";e.push(t)}return $(t)}return Object(s.m)(t)?n(t):JSON.stringify(t,function(t,e){return n(e)}).replace(/\\"/g,'"')}var b=function(t){return function(e){if(!e)return["",""];var n=e.indexOf(t);return-1===n?[e,""]:[e.substr(0,n),e.substr(n+1)]}},w=new RegExp("^(?:[a-z]+:)?//[^/]+/"),x=function(t){return t.replace(/\/[^/]*$/,"")},O=b("#"),E=b("?"),S=b("="),C=function(t){return t?t.replace(/^#/,""):""};function j(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(i.y)}}function k(t,e){return Object(s.l)(Object(i.P)(t))&&Object(s.l)(e)?t.slice(0,-1).concat(Object(i.P)(t)+e):Object(i.J)(t,e)}function T(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function _(t){return Object(s.h)(t)?A[t]:A[A[t]]}var A,R=Function.prototype.bind.call(console.log,console),P=Object(s.d)(console.table)?console.table.bind(console):R.bind(console);!function(t){t[t.RESOLVE=0]="RESOLVE",t[t.TRANSITION=1]="TRANSITION",t[t.HOOK=2]="HOOK",t[t.UIVIEW=3]="UIVIEW",t[t.VIEWCONFIG=4]="VIEWCONFIG"}(A||(A={}));var N=Object(u.k)("$id"),D=Object(u.k)("router.$id"),I=function(t){return"Transition #"+N(t)+"-"+D(t)},M=function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(t,e){var n=this;e.length||(e=Object.keys(A).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(t){return A[t]})),e.map(_).forEach(function(e){return n._enabled[e]=t})},t.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},t.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},t.prototype.enabled=function(t){return!!this._enabled[_(t)]},t.prototype.traceTransitionStart=function(t){this.enabled(A.TRANSITION)&&console.log(I(t)+": Started  -> "+y(t))},t.prototype.traceTransitionIgnored=function(t){this.enabled(A.TRANSITION)&&console.log(I(t)+": Ignored  <> "+y(t))},t.prototype.traceHookInvocation=function(t,e,n){if(this.enabled(A.HOOK)){var r=Object(u.k)("traceData.hookType")(n)||"internal",i=Object(u.k)("traceData.context.state.name")(n)||Object(u.k)("traceData.context")(n)||"unknown",o=v(t.registeredHook.callback);console.log(I(e)+":   Hook -> "+r+" context: "+i+", "+p(200,o))}},t.prototype.traceHookResult=function(t,e,n){this.enabled(A.HOOK)&&console.log(I(e)+":   <- Hook returned: "+p(200,y(t)))},t.prototype.traceResolvePath=function(t,e,n){this.enabled(A.RESOLVE)&&console.log(I(n)+":         Resolving "+t+" ("+e+")")},t.prototype.traceResolvableResolved=function(t,e){this.enabled(A.RESOLVE)&&console.log(I(e)+":               <- Resolved  "+t+" to: "+p(200,y(t.data)))},t.prototype.traceError=function(t,e){this.enabled(A.TRANSITION)&&console.log(I(e)+": <- Rejected "+y(e)+", reason: "+t)},t.prototype.traceSuccess=function(t,e){this.enabled(A.TRANSITION)&&console.log(I(e)+": <- Success  "+y(e)+", final state: "+t.name)},t.prototype.traceUIViewEvent=function(t,e,n){void 0===n&&(n=""),this.enabled(A.UIVIEW)&&console.log("ui-view: "+h(30,t)+" "+T(e)+n)},t.prototype.traceUIViewConfigUpdated=function(t,e){this.enabled(A.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+e+"'")},t.prototype.traceUIViewFill=function(t,e){this.enabled(A.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+p(200,e))},t.prototype.traceViewSync=function(t){if(this.enabled(A.VIEWCONFIG)){var e="uiview component fqn",n=t.map(function(t){var n,r=t.uiView,i=t.viewConfig,o=r&&r.fqn,a=i&&i.viewDecl.$context.name+": ("+i.viewDecl.$name+")";return(n={})[e]=o,n["view config state (view name)"]=a,n}).sort(function(t,n){return(t[e]||"").localeCompare(n[e]||"")});P(n)}},t.prototype.traceViewServiceEvent=function(t,e){this.enabled(A.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+function(t){var e=t.viewDecl,n=e.$context.name||"(root)";return"[View#"+t.$id+" from '"+n+"' state]: target ui-view: '"+e.$uiViewName+"@"+e.$uiViewContextAnchor+"'"}(e))},t.prototype.traceViewServiceUIViewEvent=function(t,e){this.enabled(A.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+T(e))},t}(),V=new M,q=function(){function t(t){this.pattern=/.*/,this.inherit=!0,Object(i.r)(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new function(t,e){var n=this;function r(t){return Object(s.a)(t)?t:Object(s.c)(t)?[t]:[]}function o(t,n){return function(o){if(Object(s.a)(o)&&0===o.length)return o;var a=r(o),u=Object(i.B)(a,t);return!0===n?0===Object(i.s)(u,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===e?t[0]:t;default:return t}}(u)}}function a(t){return function(e,n){var i=r(e),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!t(i[a],o[a]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach(function(e){var r=t[e].bind(t),i="equals"===e?a:o;n[e]=i(r)}),Object(i.r)(this,{dynamic:t.dynamic,name:t.name,pattern:t.pattern,inherit:t.inherit,raw:t.raw,is:o(t.is.bind(t),!0),$arrayMode:e})}(this,t)},t}();var L,H=Object.prototype.hasOwnProperty,U=function(t){return 0===["value","type","squash","array","dynamic"].filter(H.bind(t||{})).length};function F(t,e,n){var r=!1===n.reloadOnSearch&&e===L.SEARCH||void 0,o=[n.dynamic,r].find(s.c),a=Object(s.c)(o)?{dynamic:o}:{},u=function(t){function e(){return t.value}t=U(t)?{value:t}:t,e.__cacheable=!0;var n=Object(s.e)(t.value)?t.value:e;return Object(i.r)(t,{$$fn:n})}(n&&n.params&&n.params[t]);return Object(i.r)(a,u)}!function(t){t[t.PATH=0]="PATH",t[t.SEARCH=1]="SEARCH",t[t.CONFIG=2]="CONFIG"}(L||(L={}));var B=function(){function t(t,e,n,r,o){var a=F(t,n,o);e=function(t,e,n,r,i){if(t.type&&e&&"string"!==e.name)throw new Error("Param '"+r+"' has two type configurations.");if(t.type&&e&&"string"===e.name&&i.type(t.type))return i.type(t.type);if(e)return e;if(!t.type){var o=n===L.CONFIG?"any":n===L.PATH?"path":n===L.SEARCH?"query":"string";return i.type(o)}return t.type instanceof q?t.type:i.type(t.type)}(a,e,n,t,r.paramTypes);var c=function(){var e={array:n===L.SEARCH&&"auto"},r=t.match(/\[\]$/)?{array:!0}:{};return Object(i.r)(e,r,a).array}();e=c?e.$asArray(c,n===L.SEARCH):e;var l=void 0!==a.value||n===L.SEARCH,f=Object(s.c)(a.dynamic)?!!a.dynamic:!!e.dynamic,p=Object(s.c)(a.raw)?!!a.raw:!!e.raw,h=function(t,e,n){var r=t.squash;if(!e||!1===r)return!1;if(!Object(s.c)(r)||null==r)return n;if(!0===r||Object(s.l)(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}(a,l,r.defaultSquashPolicy()),d=function(t,e,n,r){var o=[{from:"",to:n||e?void 0:""},{from:null,to:n||e?void 0:""}],a=Object(s.a)(t.replace)?t.replace:[];Object(s.l)(r)&&a.push({from:r,to:void 0});var c=Object(i.B)(a,Object(u.n)("from"));return Object(i.s)(o,function(t){return-1===c.indexOf(t.from)}).concat(a)}(a,c,l,h),v=Object(s.c)(a.inherit)?!!a.inherit:!!e.inherit;Object(i.r)(this,{id:t,type:e,location:n,isOptional:l,dynamic:f,raw:p,squash:h,replace:d,inherit:v,array:c,config:a})}return t.values=function(t,e){void 0===e&&(e={});for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];n[o.id]=o.value(e[o.id])}return n},t.changed=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t.filter(function(t){return!t.type.equals(e[t.id],n[t.id])})},t.equals=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),0===t.changed(e,n,r).length},t.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(i.e,!0)},t.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},t.prototype.value=function(t){var e=this;return t=function(t){for(var n=0,r=e.replace;n<r.length;n++){var i=r[n];if(i.from===t)return i.to}return t}(t),Object(s.m)(t)?function(){if(e._defaultValueCache)return e._defaultValueCache.defaultValue;if(!o.b.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=o.b.$injector.invoke(e.config.$$fn);if(null!==t&&void 0!==t&&!e.type.is(t))throw new Error("Default value ("+t+") for parameter '"+e.id+"' is not an instance of ParamType ("+e.type.name+")");return e.config.$$fn.__cacheable&&(e._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},t.prototype.isSearch=function(){return this.location===L.SEARCH},t.prototype.validates=function(t){if((Object(s.m)(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var n=this.type.encode(e);return!(Object(s.l)(n)&&!this.type.pattern.exec(n))},t.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},t}(),W=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=Object(i.H)(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=Object(i.A)(Object(i.B)(this.defaultTypes,function(t,e){return new q(Object(i.r)({name:e},t))}),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,n){if(!Object(s.c)(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new q(Object(i.r)({name:t},e)),n&&(this.typeQueue.push({name:t,def:n}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");Object(i.r)(this.types[t.name],o.b.$injector.invoke(t.def))}},t}();!function(){var t=function(t){var e=function(t){return null!=t?t.toString():t},n={encode:e,decode:e,is:Object(u.h)(String),pattern:/.*/,equals:function(t,e){return t==e}};return Object(i.r)({},n,t)};Object(i.r)(W.prototype,{string:t({}),path:t({pattern:/[^/]*/}),query:t({}),hash:t({inherit:!1}),int:t({decode:function(t){return parseInt(t,10)},is:function(t){return!Object(s.g)(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:t({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:Object(u.h)(Boolean),pattern:/0|1/}),date:t({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return["getFullYear","getMonth","getDate"].reduce(function(n,r){return n&&t[r]()===e[r]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:t({encode:i.Q,decode:i.x,is:Object(u.h)(Object),equals:i.q,pattern:/[^/]*/}),any:t({encode:i.y,decode:i.y,is:function(){return!0},equals:i.q})})}();var z=function(){function t(t){void 0===t&&(t={}),Object(i.r)(this,t)}return t.prototype.$inherit=function(t,e,n){var r,o=Object(i.f)(e,n),a={},u=[];for(var s in o)if(o[s]&&o[s].params&&(r=Object.keys(o[s].params)).length)for(var c in r)u.indexOf(r[c])>=0||(u.push(r[c]),a[r[c]]=this[r[c]]);return Object(i.r)({},a,t)},t}(),G=function(){function t(e){if(e instanceof t){var n=e;this.state=n.state,this.paramSchema=n.paramSchema.slice(),this.paramValues=Object(i.r)({},n.paramValues),this.resolvables=n.resolvables.slice(),this.views=n.views&&n.views.slice()}else{var r=e;this.state=r,this.paramSchema=r.parameters({inherit:!1}),this.paramValues={},this.resolvables=r.resolvables.map(function(t){return t.clone()})}}return t.prototype.clone=function(){return new t(this)},t.prototype.applyRawParams=function(t){return this.paramValues=this.paramSchema.reduce(function(e,n){return Object(i.h)(e,function(e){return[e.id,e.value(t[e.id])]}(n))},{}),this},t.prototype.parameter=function(t){return Object(i.t)(this.paramSchema,Object(u.o)("id",t))},t.prototype.equals=function(t,e){var n=this.diff(t,e);return n&&0===n.length},t.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var n=e?e(this):this.paramSchema;return B.changed(n,this.paramValues,t.paramValues)},t.clone=function(t){return t.clone()},t}(),J=function(){function t(t,e,n,r){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=Object(i.r)({},n||{}),this._options=Object(i.r)({},r||{}),this._definition=t.matcher.find(e,this._options.relative)}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+y(this.params())},t.prototype.withState=function(e){return new t(this._stateRegistry,e,this._params,this._options)},t.prototype.withParams=function(e,n){void 0===n&&(n=!1);var r=n?e:Object(i.r)({},this._params,e);return new t(this._stateRegistry,this._identifier,r,this._options)},t.prototype.withOptions=function(e,n){void 0===n&&(n=!1);var r=n?e:Object(i.r)({},this._options,e);return new t(this._stateRegistry,this._identifier,this._params,r)},t.isDef=function(t){return t&&t.state&&(Object(s.l)(t.state)||Object(s.l)(t.state.name))},t}(),K=function(){function t(){}return t.makeTargetState=function(t,e){var n=Object(i.P)(e).state;return new J(t,n,e.map(Object(u.n)("paramValues")).reduce(i.D,{}),{})},t.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new G(t).applyRawParams(e)})},t.buildToPath=function(e,n){var r=t.buildPath(n);return n.options().inherit?t.inheritParams(e,r,Object.keys(n.params())):r},t.applyViewConfigs=function(e,n,r){n.filter(function(t){return Object(i.z)(r,t.state)}).forEach(function(r){var o=Object(i.U)(r.state.views||{}),a=t.subPath(n,function(t){return t===r}),u=o.map(function(t){return e.createViewConfig(a,t)});r.views=u.reduce(i.T,[])})},t.inheritParams=function(t,e,n){void 0===n&&(n=[]);var r=t.map(function(t){return t.paramSchema}).reduce(i.T,[]).filter(function(t){return!t.inherit}).map(Object(u.n)("id"));return e.map(function(e){var o=Object(i.r)({},e&&e.paramValues),a=Object(i.H)(o,n);o=Object(i.F)(o,n);var s=Object(i.F)(function(t,e){var n=Object(i.t)(t,Object(u.o)("state",e));return Object(i.r)({},n&&n.paramValues)}(t,e.state)||{},r),c=Object(i.r)(o,s,a);return new G(e.state).applyRawParams(c)})},t.treeChanges=function(e,n,r){for(var i,o,a,u,s=Math.min(e.length,n.length),c=0,l=function(e,n){return e.equals(n,t.nonDynamicParams)};c<s&&e[c].state!==r&&l(e[c],n[c]);)c++;o=(i=e).slice(0,c),a=i.slice(c);var f=o.map(function(t,e){var r=t.clone();return r.paramValues=n[e].paramValues,r});return u=n.slice(c),{from:i,to:f.concat(u),retained:o,retainedWithToParams:f,exiting:a,entering:u}},t.matching=function(t,e,n){var r=!1;return Object(i.i)(t,e).reduce(function(t,e){var i=e[0],o=e[1];return(r=r||!i.equals(o,n))?t:t.concat(i)},[])},t.equals=function(e,n,r){return e.length===n.length&&t.matching(e,n,r).length===e.length},t.subPath=function(t,e){var n=Object(i.t)(t,e),r=t.indexOf(n);return-1===r?void 0:t.slice(0,r+1)},t.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},t.paramValues=function(t){return t.reduce(function(t,e){return Object(i.r)(t,e.paramValues)},{})},t}(),Y={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},X={when:"LAZY",async:"WAIT"},Q=function(){function t(e,n,r,a,u){if(this.resolved=!1,this.promise=void 0,e instanceof t)Object(i.r)(this,e);else if(Object(s.d)(n)){if(Object(s.g)(e))throw new Error("new Resolvable(): token argument is required");if(!Object(s.d)(n))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=e,this.policy=a,this.resolveFn=n,this.deps=r||[],this.data=u,this.resolved=void 0!==u,this.promise=this.resolved?o.b.$q.when(this.data):void 0}else if(Object(s.i)(e)&&e.token&&(e.hasOwnProperty("resolveFn")||e.hasOwnProperty("data"))){var c=e;return new t(c.token,c.resolveFn,c.deps,c.policy,c.data)}}return t.prototype.getPolicy=function(t){var e=this.policy||{},n=t&&t.resolvePolicy||{};return{when:e.when||n.when||X.when,async:e.async||n.async||X.async}},t.prototype.resolve=function(t,e){var n=this,r=o.b.$q,a=t.findNode(this),u=a&&a.state,s="RXWAIT"===this.getPolicy(u).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:i.y;return this.promise=r.when().then(function(){return r.all(t.getDependencies(n).map(function(n){return n.get(t,e)}))}).then(function(t){return n.resolveFn.apply(null,t)}).then(s).then(function(t){return n.data=t,n.resolved=!0,n.resolveFn=null,V.traceResolvableResolved(n,e),n.data})},t.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},t.prototype.toString=function(){return"Resolvable(token: "+y(this.token)+", requires: ["+this.deps.map(y)+"])"},t.prototype.clone=function(){return new t(this)},t.fromData=function(e,n){return new t(e,function(){return n},null,null,n)},t}(),Z=Y.when,tt=[Z.EAGER,Z.LAZY],et=[Z.EAGER],nt="Native Injector",rt=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(i.R,[])},t.prototype.getResolvable=function(t){var e=this._path.map(function(t){return t.resolvables}).reduce(i.T,[]).filter(function(e){return e.token===t});return Object(i.P)(e)},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(K.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var n=Object(i.t)(this._path,Object(u.o)("state",e)),r=t.map(function(t){return t.token});n.resolvables=n.resolvables.filter(function(t){return-1===r.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,e){var n=this;void 0===t&&(t="LAZY");var r=(Object(i.z)(tt,t)?t:"LAZY")===Y.when.EAGER?et:tt;V.traceResolvePath(this._path,t,e);var a=function(t,e){return function(r){return Object(i.z)(t,n.getPolicy(r)[e])}},s=this._path.reduce(function(t,i){var o=i.resolvables.filter(a(r,"when")),s=o.filter(a(["NOWAIT"],"async")),c=o.filter(Object(u.i)(a(["NOWAIT"],"async"))),l=n.subContext(i.state),f=function(t){return t.get(l,e).then(function(e){return{token:t.token,value:e}})};return s.forEach(f),t.concat(c.map(f))},[]);return o.b.$q.all(s)},t.prototype.injector=function(){return this._injector||(this._injector=new it(this))},t.prototype.findNode=function(t){return Object(i.t)(this._path,function(e){return Object(i.z)(e.resolvables,t)})},t.prototype.getDependencies=function(t){var e=this,n=this.findNode(t),r=(K.subPath(this._path,function(t){return t===n})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(e){return e!==t});return t.deps.map(function(t){var n=r.filter(function(e){return e.token===t});if(n.length)return Object(i.P)(n);var o=e.injector().getNative(t);if(Object(s.m)(o))throw new Error("Could not find Dependency Injection token: "+y(t));return new Q(t,function(){return o},[],o)})},t}(),it=function(){function t(t){this.context=t,this.native=this.get(nt)||o.b.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+y(e.token));return e.data}return this.getNative(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):o.b.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}();function ot(t){return t.name}function at(t){return t.self.$$state=function(){return t},t.self}function ut(t){return t.parent&&t.parent.data&&(t.data=t.self.data=Object(i.A)(t.parent.data,t.data)),t.data}var st=function(t,e){return function(n){var r=n.self;r&&r.url&&r.name&&r.name.match(/\.\*\*$/)&&(r.url+="{remainder:any}");var i=n.parent,o=function(t){if(!Object(s.l)(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(r.url),a=o?t.compile(o.val,{state:r}):r.url;if(!a)return null;if(!t.isMatcher(a))throw new Error("Invalid url '"+a+"' in state '"+n+"'");return o&&o.root?a:(i&&i.navigable||e()).url.append(a)}},ct=function(t){return function(e){return!t(e)&&e.url?e:e.parent?e.parent.navigable:null}},lt=function(t){return function(e){var n=e.url&&e.url.parameters({inherit:!1})||[],r=Object(i.U)(Object(i.C)(Object(i.F)(e.params||{},n.map(Object(u.n)("id"))),function(n,r){return t.fromConfig(r,null,e.self)}));return n.concat(r).map(function(t){return[t.id,t]}).reduce(i.h,{})}};function ft(t){return t.parent?t.parent.path.concat(t):[t]}function pt(t){var e=t.parent?Object(i.r)({},t.parent.includes):{};return e[t.name]=!0,e}function ht(t){var e=function(t){return t.provide||t.token},n=Object(u.l)([[Object(u.n)("resolveFn"),function(t){return new Q(e(t),t.resolveFn,t.deps,t.policy)}],[Object(u.n)("useFactory"),function(t){return new Q(e(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[Object(u.n)("useClass"),function(t){return new Q(e(t),function(){return new t.useClass},[],t.policy)}],[Object(u.n)("useValue"),function(t){return new Q(e(t),function(){return t.useValue},[],t.policy,t.useValue)}],[Object(u.n)("useExisting"),function(t){return new Q(e(t),i.y,[t.useExisting],t.policy)}]]),r=Object(u.l)([[Object(u.m)(Object(u.n)("val"),s.l),function(t){return new Q(t.token,i.y,[t.val],t.policy)}],[Object(u.m)(Object(u.n)("val"),s.a),function(t){return new Q(t.token,Object(i.P)(t.val),t.val.slice(0,-1),t.policy)}],[Object(u.m)(Object(u.n)("val"),s.d),function(t){return new Q(t.token,t.val,function(t){var e=o.b.$injector;return t.$inject||e&&e.annotate(t,e.strictDi)||"deferred"}(t.val),t.policy)}]]),a=Object(u.l)([[Object(u.h)(Q),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},n],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},n],[function(t){return!!(t&&t.val&&(Object(s.l)(t.val)||Object(s.a)(t.val)||Object(s.d)(t.val)))},r],[Object(u.p)(!0),function(t){throw new Error("Invalid resolve value: "+y(t))}]]),c=t.resolve;return(Object(s.a)(c)?c:function(t,e){return Object.keys(t||{}).map(function(n){return{token:n,val:t[n],deps:void 0,policy:e[n]}})}(c,t.resolvePolicy||{})).map(a)}var dt,vt,mt=function(){function t(t,e){this.matcher=t;var n=this,r=function(){return t.find("")},i=function(t){return""===t.name};this.builders={name:[ot],self:[at],parent:[function(e){return i(e)?null:t.find(n.parentName(e))||r()}],data:[ut],url:[st(e,r)],navigable:[ct(i)],params:[lt(e.paramFactory)],views:[],path:[ft],includes:[pt],resolvables:[ht]}}return t.prototype.builder=function(t,e){var n=this.builders,r=n[t]||[];return Object(s.l)(t)&&!Object(s.c)(e)?r.length>1?r:r[0]:Object(s.l)(t)&&Object(s.d)(e)?(n[t]=r,n[t].push(e),function(){return n[t].splice(n[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this.matcher,n=this.builders,r=this.parentName(t);if(r&&!e.find(r,void 0,!1))return null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o].reduce(function(t,e){return function(n){return e(n,t)}},i.E);t[o]=a(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",n=e.split(".");if("**"===n.pop()&&n.pop(),n.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return n.join(".")}return t.parent?Object(s.l)(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var n=Object(s.l)(t.parent)?t.parent:t.parent.name;return n?n+"."+e:e},t}(),gt=function(){function t(e){return t.create(e||{})}return t.create=function(e){e=t.isStateClass(e)?new e:e;var n=Object(i.A)(Object(i.A)(e,t.prototype));return e.$$state=function(){return n},n.self=e,n.__stateObjectCache={nameGlob:a.fromString(n.name)},n},t.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},t.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},t.prototype.root=function(){return this.parent&&this.parent.root()||this},t.prototype.parameters=function(t){return((t=Object(i.o)(t,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(Object(i.U)(this.params)).filter(function(e){return!t.matchingKeys||t.matchingKeys.hasOwnProperty(e.id)})},t.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||Object(i.t)(Object(i.U)(this.params),Object(u.o)("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},t.prototype.toString=function(){return this.fqn()},t.isStateClass=function(t){return Object(s.d)(t)&&!0===t.__uiRouterState},t.isState=function(t){return Object(s.i)(t.__stateObjectCache)},t}(),$t=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,n){if(void 0===n&&(n=!0),t||""===t){var r=Object(s.l)(t),o=r?t:t.name;this.isRelative(o)&&(o=this.resolvePath(o,e));var a=this._states[o];if(a&&(r||!(r||a!==t&&a.self!==t)))return a;if(r&&n){var u=Object(i.U)(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(o)});return u.length>1&&console.log("stateMatcher.find: Found multiple matches for "+o+" using glob: ",u.map(function(t){return t.name})),u[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var n=this.find(e),r=t.split("."),i=r.length,o=0,a=n;o<i;o++)if(""!==r[o]||0!==o){if("^"!==r[o])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+n.name+"'");a=a.parent}else a=n;var u=r.slice(o).join(".");return a.name+(a.name&&u?".":"")+u},t}(),yt=function(){function t(t,e,n,r,i){this.$registry=t,this.$urlRouter=e,this.states=n,this.builder=r,this.listeners=i,this.queue=[],this.matcher=t.matcher}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,n=gt.create(t),r=n.name;if(!Object(s.l)(r))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(r)||Object(i.z)(e.map(Object(u.n)("name")),r))throw new Error("State '"+r+"' is already defined");return e.push(n),this.flush(),n},t.prototype.flush=function(){for(var t=this,e=this.queue,n=this.states,r=this.builder,i=[],o=[],a={},u=function(e){return t.states.hasOwnProperty(e)&&t.states[e]},s=function(){i.length&&t.listeners.forEach(function(t){return t("registered",i.map(function(t){return t.self}))})};e.length>0;){var c=e.shift(),l=c.name,f=r.build(c),p=o.indexOf(c);if(f){var h=u(l);if(h&&h.name===l)throw new Error("State '"+l+"' is already defined");var d=u(l+".**");d&&this.$registry.deregister(d),n[l]=c,this.attachRoute(c),p>=0&&o.splice(p,1),i.push(c)}else{var v=a[l];if(a[l]=e.length,p>=0&&v===e.length)return e.push(c),s(),n;p<0&&o.push(c),e.push(c)}}return s(),n},t.prototype.attachRoute=function(t){!t.abstract&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},t}(),bt=function(){function t(t){this._router=t,this.states={},this.listeners=[],this.matcher=new $t(this.states),this.builder=new mt(this.matcher,t.urlMatcherFactory),this.stateQueue=new yt(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var t=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(e){return t.get(e)&&t.deregister(e)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){Object(i.L)(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var e=this,n=this.get().map(function(t){return t.$$state()}),r=function(t){var e=n.filter(function(e){return-1!==t.indexOf(e.parent)});return 0===e.length?e:e.concat(r(e))},i=r([t]),o=[t].concat(i).reverse();return o.forEach(function(t){var n=e._router.urlRouter;n.rules().filter(Object(u.o)("state",t)).forEach(n.removeRule.bind(n)),delete e.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var n=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",n.map(function(t){return t.self}))}),n},t.prototype.get=function(t,e){var n=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return n.states[t].self});var r=this.matcher.find(t,e);return r&&r.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}();!function(t){t[t.CREATE=0]="CREATE",t[t.BEFORE=1]="BEFORE",t[t.RUN=2]="RUN",t[t.SUCCESS=3]="SUCCESS",t[t.ERROR=4]="ERROR"}(dt||(dt={})),function(t){t[t.TRANSITION=0]="TRANSITION",t[t.STATE=1]="STATE"}(vt||(vt={}));var wt={current:i.E,transition:null,traceData:{},bind:null},xt=function(){function t(t,e,n,r){var o=this;this.transition=t,this.stateContext=e,this.registeredHook=n,this.options=r,this.isSuperseded=function(){return o.type.hookPhase===dt.RUN&&!o.options.transition.isActive()},this.options=Object(i.o)(r,wt),this.type=n.eventType}return t.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||o.b.$q.when())},t.invokeHooks=function(e,n){for(var r=0;r<e.length;r++){var i=e[r].invokeHook();if(Object(s.j)(i)){var o=e.slice(r+1);return t.chain(o,i).then(n)}}return n()},t.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},t.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},t.prototype.invokeHook=function(){var t=this,e=this.registeredHook;if(!e._deregistered){var n=this.getNotCurrentRejection();if(n)return n;var r=this.options;V.traceHookInvocation(this,this.transition,r);var i=function(n){return e.eventType.getErrorHandler(t)(n)},o=function(n){return e.eventType.getResultHandler(t)(n)};try{var a=e.callback.call(r.bind,t.transition,t.stateContext);return!this.type.synchronous&&Object(s.j)(a)?a.catch(function(t){return f.normalize(t).toPromise()}).then(o,i):o(a)}catch(t){return i(f.normalize(t))}finally{e.invokeLimit&&++e.invokeCount>=e.invokeLimit&&e.deregister()}}},t.prototype.handleHookResult=function(t){var e=this,n=this.getNotCurrentRejection();return n||(Object(s.j)(t)?t.then(function(t){return e.handleHookResult(t)}):(V.traceHookResult(t,this.transition,this.options),!1===t?f.aborted("Hook aborted transition").toPromise():Object(u.h)(J)(t)?f.redirected(t).toPromise():void 0))},t.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?f.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?f.aborted().toPromise():this.isSuperseded()?f.superseded(this.options.current()).toPromise():void 0},t.prototype.toString=function(){var t=this.options,e=this.registeredHook;return(Object(u.k)("traceData.hookType")(t)||"internal")+" context: "+(Object(u.k)("traceData.context.state.name")(t)||Object(u.k)("traceData.context")(t)||"unknown")+", "+p(200,m(e.callback))},t.HANDLE_RESULT=function(t){return function(e){return t.handleHookResult(e)}},t.LOG_REJECTED_RESULT=function(t){return function(e){Object(s.j)(e)&&e.catch(function(e){return t.logError(f.normalize(e))})}},t.LOG_ERROR=function(t){return function(e){return t.logError(e)}},t.REJECT_ERROR=function(t){return function(t){return Object(i.O)(t)}},t.THROW_ERROR=function(t){return function(t){throw t}},t}();function Ot(t,e){var n=Object(s.l)(e)?[e]:e;return!!(Object(s.d)(n)?n:function(t){for(var e=n,r=0;r<e.length;r++){var i=new a(e[r]);if(i&&i.matches(t.name)||!i&&e[r]===t.name)return!0}return!1})(t)}var Et=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=n,this.matchCriteria=r,this.removeHookFromRegistry=i,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}return t.prototype._matchingNodes=function(t,e){if(!0===e)return t;var n=t.filter(function(t){return Ot(t.state,e)});return n.length?n:null},t.prototype._getDefaultMatchCriteria=function(){return Object(i.C)(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},t.prototype._getMatchingNodes=function(t){var e=this,n=Object(i.r)(this._getDefaultMatchCriteria(),this.matchCriteria);return Object(i.U)(this.tranSvc._pluginapi._getPathTypes()).reduce(function(r,o){var a=o.scope===vt.STATE,u=t[o.name]||[],s=a?u:[Object(i.P)(u)];return r[o.name]=e._matchingNodes(s,n[o.name]),r},{})},t.prototype.matches=function(t){var e=this._getMatchingNodes(t);return Object(i.U)(e).every(i.y)?e:null},t.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},t}();function St(t,e,n){var r=(t._registeredHooks=t._registeredHooks||{})[n.name]=[],o=Object(i.L)(r);function a(t,i,a){void 0===a&&(a={});var u=new Et(e,n,i,t,o,a);return r.push(u),u.deregister.bind(u)}return t[n.name]=a,a}var Ct=function(){function t(t){this.transition=t}return t.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(i.T,[]).filter(i.y)},t.prototype.buildHooks=function(t){var e=this.transition,n=e.treeChanges(),r=this.getMatchingHooks(t,n);if(!r)return[];var o={transition:e,current:e.options().current};return r.map(function(r){return r.matches(n)[t.criteriaMatchPath.name].map(function(n){var a=Object(i.r)({bind:r.bind,traceData:{hookType:t.name,context:n}},o),u=t.criteriaMatchPath.scope===vt.STATE?n.state.self:null,s=new xt(e,u,r,a);return{hook:r,node:n,transitionHook:s}})}).reduce(i.T,[]).sort(function(t){void 0===t&&(t=!1);return function(e,n){var r=t?-1:1,i=(e.node.state.path.length-n.node.state.path.length)*r;return 0!==i?i:n.hook.priority-e.hook.priority}}(t.reverseSort)).map(function(t){return t.transitionHook})},t.prototype.getMatchingHooks=function(t,e){var n=t.hookPhase===dt.CREATE,r=this.transition.router.transitionService;return(n?[r]:[this.transition,r]).map(function(e){return e.getHooks(t.name)}).filter(Object(i.l)(s.a,"broken event named: "+t.name)).reduce(i.T,[]).filter(function(t){return t.matches(e)})},t}();var jt=Object(u.n)("self"),kt=function(){function t(t,e,n){var r=this;if(this._deferred=o.b.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new Ct(this),this.isActive=function(){return r.router.globals.transition===r},this.router=n,this._targetState=e,!e.valid())throw new Error(e.error());this._options=Object(i.r)({current:Object(u.p)(this)},e.options()),this.$id=n.transitionService._transitionCount++;var a=K.buildToPath(t,e);this._treeChanges=K.treeChanges(t,a,this._options.reloadState),this.createTransitionHookRegFns();var s=this._hookBuilder.buildHooksForPhase(dt.CREATE);xt.invokeHooks(s,function(){return null}),this.applyViewConfigs(n)}return t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.createTransitionHookRegFns=function(){var t=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==dt.CREATE}).forEach(function(e){return St(t,t.router.transitionService,e)})},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});K.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},t.prototype.$from=function(){return Object(i.P)(this._treeChanges.from).state},t.prototype.$to=function(){return Object(i.P)(this._treeChanges.to).state},t.prototype.from=function(){return this.$from().self},t.prototype.to=function(){return this.$to().self},t.prototype.targetState=function(){return this._targetState},t.prototype.is=function(e){return e instanceof t?this.is({to:e.$to().name,from:e.$from().name}):!(e.to&&!Ot(this.$to(),e.to)||e.from&&!Ot(this.$from(),e.from))},t.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(Object(u.n)("paramValues")).reduce(i.D,{}))},t.prototype.paramsChanged=function(){var t=this.params("from"),e=this.params("to"),n=[].concat(this._treeChanges.to).concat(this._treeChanges.from).map(function(t){return t.paramSchema}).reduce(i.v,[]).reduce(i.R,[]);return B.changed(n,t,e).reduce(function(t,n){return t[n.id]=e[n.id],t},{})},t.prototype.injector=function(t,e){void 0===e&&(e="to");var n=this._treeChanges[e];return t&&(n=K.subPath(n,function(e){return e.state===t||e.state.name===t})),new rt(n).injector()},t.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new rt(this._treeChanges[t]).getTokens()},t.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=Object(u.h)(Q)(t)?t:new Q(t);var n="string"==typeof e?e:e.name,r=this._treeChanges.to,o=Object(i.t)(r,function(t){return t.state.name===n});new rt(r).addResolvables([t],o.state)},t.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},t.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},t.prototype.options=function(){return this._options},t.prototype.entering=function(){return Object(i.B)(this._treeChanges.entering,Object(u.n)("state")).map(jt)},t.prototype.exiting=function(){return Object(i.B)(this._treeChanges.exiting,Object(u.n)("state")).map(jt).reverse()},t.prototype.retained=function(){return Object(i.B)(this._treeChanges.retained,Object(u.n)("state")).map(jt)},t.prototype.views=function(t,e){void 0===t&&(t="entering");var n=this._treeChanges[t];return(n=e?n.filter(Object(u.o)("state",e)):n).map(Object(u.n)("views")).filter(i.y).reduce(i.T,[])},t.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},t.prototype.redirect=function(t){for(var e=1,n=this;null!=(n=n.redirectedFrom());)if(++e>20)throw new Error("Too many consecutive Transition redirects (20+)");var r={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(r.location="replace");var o=Object(i.r)({},this.options(),t.options(),r);t=t.withOptions(o,!0);var a=this.router.transitionService.create(this._treeChanges.from,t),s=this._treeChanges.entering,c=a._treeChanges.entering;return K.matching(c,s,K.nonDynamicParams).filter(Object(u.i)(function(t){return function(e){return t&&e.state.includes[t.name]}}(t.options().reloadState))).forEach(function(t,e){t.resolvables=s[e].resolvables}),a},t.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&(!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length&&!Object(i.i)(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(i.g,!1))){var e=t.to.map(function(t){return t.paramSchema}),n=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})}),r=n[0],o=n[1];return Object(i.i)(e,r,o).map(function(t){var e=t[0],n=t[1],r=t[2];return B.changed(e,n,r)}).reduce(i.T,[])}},t.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(i.g,!1)},t.prototype.ignored=function(){return!!this._ignoredReason()},t.prototype._ignoredReason=function(){var t=this.router.globals.transition,e=this._options.reloadState,n=function(t,n){if(t.length!==n.length)return!1;var r=K.matching(t,n);return t.length===r.filter(function(t){return!e||!t.state.includes[e.name]}).length},r=this.treeChanges(),i=t&&t.treeChanges();return i&&n(i.to,r.to)&&n(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&n(r.from,r.to)?"SameAsCurrent":void 0},t.prototype.run=function(){var t=this,e=xt.runAllHooks,n=function(e){return t._hookBuilder.buildHooksForPhase(e)},r=n(dt.BEFORE);return xt.invokeHooks(r,function(){var e=t.router.globals;return e.lastStartedTransitionId=t.$id,e.transition=t,e.transitionHistory.enqueue(t),V.traceTransitionStart(t),o.b.$q.when(void 0)}).then(function(){var t=n(dt.RUN);return xt.invokeHooks(t,function(){return o.b.$q.when(void 0)})}).then(function(){V.traceSuccess(t.$to(),t),t.success=!0,t._deferred.resolve(t.to()),e(n(dt.SUCCESS))},function(r){V.traceError(r,t),t.success=!1,t._deferred.reject(r),t._error=r,e(n(dt.ERROR))}),this.promise},t.prototype.valid=function(){return!this.error()||void 0!==this.success},t.prototype.abort=function(){Object(s.m)(this.success)&&(this._aborted=!0)},t.prototype.error=function(){var t=this.$to();if(t.self.abstract)return f.invalid("Cannot transition to abstract state '"+t.name+"'");var e=t.parameters(),n=this.params(),r=e.filter(function(t){return!t.validates(n[t.id])});if(r.length){var i=r.map(function(t){return"["+t.id+":"+y(n[t.id])+"]"}).join(", "),o="The following parameter values are not valid for state '"+t.name+"': "+i;return f.invalid(o)}return!1===this.success?this._error:void 0},t.prototype.toString=function(){var t=this.from(),e=this.to(),n=function(t){return null!==t["#"]&&void 0!==t["#"]?t:Object(i.F)(t,["#"])};return"Transition#"+this.$id+"( '"+(Object(s.i)(t)?t.name:t)+"'"+y(n(this._treeChanges.from.map(Object(u.n)("paramValues")).reduce(i.D,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(Object(s.i)(e)?e.name:e)+"'"+y(n(this.params()))+" )"},t.diToken=t,t}();function Tt(t,e){var n=["",""],r=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return r;switch(e.squash){case!1:n=["(",")"+(e.isOptional?"?":"")];break;case!0:r=r.replace(/\/$/,""),n=["(?:/(",")|/)?"];break;default:n=["("+e.squash+"|",")?"]}return r+n[0]+e.type.pattern.source+n[1]}var _t=j("/"),At={state:{params:{}},strict:!0,caseInsensitive:!0},Rt=function(){function t(e,n,r,o){var a=this;this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.config=o=Object(i.o)(o,At),this.pattern=e;for(var s,c,l,f=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,p=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h=[],d=0,v=function(n){if(!t.nameValidator.test(n))throw new Error("Invalid parameter name '"+n+"' in pattern '"+e+"'");if(Object(i.t)(a._params,Object(u.o)("id",n)))throw new Error("Duplicate parameter name '"+n+"' in pattern '"+e+"'")},m=function(t,r){var o=t[2]||t[3],u=r?t[4]:t[4]||("*"===t[1]?"[\\s\\S]*":null);return{id:o,regexp:u,segment:e.substring(d,t.index),type:u?n.type(u)||function(t){return Object(i.A)(n.type(r?"query":"path"),{pattern:new RegExp(t,a.config.caseInsensitive?"i":void 0)})}(u):null}};(s=f.exec(e))&&!((c=m(s,!1)).segment.indexOf("?")>=0);)v(c.id),this._params.push(r.fromPath(c.id,c.type,o.state)),this._segments.push(c.segment),h.push([c.segment,Object(i.P)(this._params)]),d=f.lastIndex;var g=(l=e.substring(d)).indexOf("?");if(g>=0){var $=l.substring(g);if(l=l.substring(0,g),$.length>0)for(d=0;s=p.exec($);)v((c=m(s,!0)).id),this._params.push(r.fromSearch(c.id,c.type,o.state)),d=f.lastIndex}this._segments.push(l),this._compiled=h.map(function(t){return Tt.apply(null,t)}).concat(Tt(l))}return t.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},t.pathSegmentsAndParams=function(t){var e=t._segments,n=t._params.filter(function(t){return t.location===L.PATH});return Object(i.i)(e,n.concat(void 0)).reduce(i.T,[]).filter(function(t){return""!==t&&Object(s.c)(t)})},t.queryParams=function(t){return t._params.filter(function(t){return t.location===L.SEARCH})},t.compare=function(e,n){var r=function(e){return e._cache.weights=e._cache.weights||function(e){return e._cache.segments=e._cache.segments||e._cache.path.map(t.pathSegmentsAndParams).reduce(i.T,[]).reduce(k,[]).map(function(t){return Object(s.l)(t)?_t(t):t}).reduce(i.T,[])}(e).map(function(t){return"/"===t?1:Object(s.l)(t)?2:t instanceof B?3:void 0})},o=r(e),a=r(n);!function(t,e,n){for(var r=Math.max(t.length,e.length);t.length<r;)t.push(n);for(;e.length<r;)e.push(n)}(o,a,0);var u,c,l=Object(i.i)(o,a);for(c=0;c<l.length;c++)if(0!==(u=l[c][0]-l[c][1]))return u;return 0},t.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},t.prototype.isRoot=function(){return this._cache.path[0]===this},t.prototype.toString=function(){return this.pattern},t.prototype.exec=function(t,e,n,r){var o=this;void 0===e&&(e={}),void 0===r&&(r={});var a=function(t,e,n){return t[e]=t[e]||n()}(this._cache,"pattern",function(){return new RegExp(["^",Object(i.S)(o._cache.path.map(Object(u.n)("_compiled"))).join(""),!1===o.config.strict?"/?":"","$"].join(""),o.config.caseInsensitive?"i":void 0)}).exec(t);if(!a)return null;var c=this.parameters(),l=c.filter(function(t){return!t.isSearch()}),f=c.filter(function(t){return t.isSearch()}),p=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),h={};if(p!==a.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");function d(t){var e=function(t){return t.split("").reverse().join("")},n=e(t).split(/-(?!\\)/),r=Object(i.B)(n,e);return Object(i.B)(r,function(t){return t.replace(/\\-/g,"-")}).reverse()}for(var v=0;v<p;v++){for(var m=l[v],g=a[v+1],$=0;$<m.replace.length;$++)m.replace[$].from===g&&(g=m.replace[$].to);g&&!0===m.array&&(g=d(g)),Object(s.c)(g)&&(g=m.type.decode(g)),h[m.id]=m.value(g)}return f.forEach(function(t){for(var n=e[t.id],r=0;r<t.replace.length;r++)t.replace[r].from===n&&(n=t.replace[r].to);Object(s.c)(n)&&(n=t.type.decode(n)),h[t.id]=t.value(n)}),n&&(h["#"]=n),h},t.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:Object(i.S)(this._cache.path.map(function(t){return t._params}))},t.prototype.parameter=function(t,e){var n=this;void 0===e&&(e={});var r=this._cache.parent;return function(){for(var e=0,r=n._params;e<r.length;e++){var i=r[e];if(i.id===t)return i}}()||!1!==e.inherit&&r&&r.parameter(t,e)||null},t.prototype.validates=function(t){return t=t||{},this.parameters().filter(function(e){return t.hasOwnProperty(e.id)}).map(function(e){return function(t,e){return!t||t.validates(e)}(e,t[e.id])}).reduce(i.e,!0)},t.prototype.format=function(e){void 0===e&&(e={});var n=this._cache.path,r=n.map(t.pathSegmentsAndParams).reduce(i.T,[]).map(function(t){return Object(s.l)(t)?t:a(t)}),o=n.map(t.queryParams).reduce(i.T,[]).map(a);if(r.concat(o).filter(function(t){return!1===t.isValid}).length)return null;function a(t){var n=t.value(e[t.id]),r=t.validates(n),i=t.isDefaultValue(n);return{param:t,value:n,isValid:r,isDefaultValue:i,squash:!!i&&t.squash,encoded:t.type.encode(n)}}var u=r.reduce(function(e,n){if(Object(s.l)(n))return e+n;var r=n.squash,o=n.encoded,a=n.param;return!0===r?e.match(/\/$/)?e.slice(0,-1):e:Object(s.l)(r)?e+r:!1!==r?e:null==o?e:Object(s.a)(o)?e+Object(i.B)(o,t.encodeDashes).join("-"):a.raw?e+o:e+encodeURIComponent(o)},""),c=o.map(function(t){var e=t.param,n=t.squash,r=t.encoded,o=t.isDefaultValue;if(!(null==r||o&&!1!==n)&&(Object(s.a)(r)||(r=[r]),0!==r.length))return e.raw||(r=Object(i.B)(r,encodeURIComponent)),r.map(function(t){return e.id+"="+t})}).filter(i.y).reduce(i.T,[]).join("&");return u+(c?"?"+c:"")+(e["#"]?"#"+e["#"]:"")},t.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,t}(),Pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Nt=function(){function t(t){this.umf=t}return t.prototype.fromConfig=function(t,e,n){return new B(t,e,L.CONFIG,this.umf,n)},t.prototype.fromPath=function(t,e,n){return new B(t,e,L.PATH,this.umf,n)},t.prototype.fromSearch=function(t,e,n){return new B(t,e,L.SEARCH,this.umf,n)},t}(),Dt=function(){function t(){this.paramTypes=new W,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.paramFactory=new Nt(this),Object(i.r)(this,{UrlMatcher:Rt,Param:B})}return t.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=Object(s.c)(t)?t:this._isCaseInsensitive},t.prototype.strictMode=function(t){return this._isStrictMode=Object(s.c)(t)?t:this._isStrictMode},t.prototype.defaultSquashPolicy=function(t){if(Object(s.c)(t)&&!0!==t&&!1!==t&&!Object(s.l)(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Object(s.c)(t)?t:this._defaultSquashPolicy},t.prototype.compile=function(t,e){var n=e&&!e.state&&e.params;e=n?Pt({state:{params:n}},e):e;var r={strict:this._isStrictMode,caseInsensitive:this._isCaseInsensitive};return new Rt(t,this.paramTypes,this.paramFactory,Object(i.r)(r,e))},t.prototype.isMatcher=function(t){if(!Object(s.i)(t))return!1;var e=!0;return Object(i.w)(Rt.prototype,function(n,r){Object(s.d)(n)&&(e=e&&Object(s.c)(t[r])&&Object(s.d)(t[r]))}),e},t.prototype.type=function(t,e,n){var r=this.paramTypes.type(t,e,n);return Object(s.c)(e)?this:r},t.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},t.prototype.dispose=function(){this.paramTypes.dispose()},t}(),It=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var n=this,r=gt.isState,i=Object(u.l)([[s.l,function(t){return i(n.compile(t))}],[Object(u.h)(Rt),function(t){return n.fromUrlMatcher(t,e)}],[r,function(t){return n.fromState(t,n.router)}],[Object(u.h)(RegExp),function(t){return n.fromRegExp(t,e)}],[s.d,function(t){return new Mt(t,e)}]]),o=i(t);if(!o)throw new Error("invalid 'what' in when()");return o},t.prototype.fromUrlMatcher=function(t,e){var n=e;Object(s.l)(e)&&(e=this.router.urlMatcherFactory.compile(e)),Object(u.h)(Rt)(e)&&(n=function(t){return e.format(t)});var r={urlMatcher:t,matchPriority:function(e){var n=t.parameters().filter(function(t){return t.isOptional});return n.length?n.filter(function(t){return e[t.id]}).length/n.length:1e-6},type:"URLMATCHER"};return Object(i.r)(new Mt(function(e){var n=t.exec(e.path,e.search,e.hash);return t.validates(n)&&n},n),r)},t.prototype.fromState=function(t,e){var n={state:t,type:"STATE"};return Object(i.r)(this.fromUrlMatcher(t.url,function(n){var r=e.stateService,i=e.globals;r.href(t,n)!==r.href(i.current,i.params)&&r.transitionTo(t,n,{inherit:!0,source:"url"})}),n)},t.prototype.fromRegExp=function(t,e){if(t.global||t.sticky)throw new Error("Rule RegExp must not be global or sticky");var n=Object(s.l)(e)?function(t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}:e,r={regexp:t,type:"REGEXP"};return Object(i.r)(new Mt(function(e){return t.exec(e.path)},n),r)},t.isUrlRule=function(t){return t&&["type","match","handler"].every(function(e){return Object(s.c)(t[e])})},t}(),Mt=function(){return function(t,e){var n=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-n.$id},this.handler=e||i.y}}();var Vt;Vt=function(t,e){var n=function(t,e){return(e.priority||0)-(t.priority||0)}(t,e);return 0!==n?n:0!==(n=function(t,e){var n={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(n[t.type]||0)-(n[e.type]||0)}(t,e))?n:0!==(n=function(t,e){return t.urlMatcher&&e.urlMatcher?Rt.compare(t.urlMatcher,e.urlMatcher):0}(t,e))?n:function(t,e){var n={STATE:!0,URLMATCHER:!0};return n[t.type]&&n[e.type]?0:(t.$id||0)-(e.$id||0)}(t,e)};var qt=function(){function t(e){this._sortFn=Vt,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=e,this.urlRuleFactory=new It(e),Object(i.n)(Object(u.p)(t.prototype),this,Object(u.p)(this))}return t.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},t.prototype.sort=function(t){this._rules=this.stableSort(this._rules,this._sortFn=t||this._sortFn),this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,e){var n=t.map(function(t,e){return{elem:t,idx:e}});return n.sort(function(t,n){var r=e(t.elem,n.elem);return 0===r?t.idx-n.idx:r}),n.map(function(t){return t.elem})},t.prototype.match=function(t){var e=this;this.ensureSorted(),t=Object(i.r)({path:"",search:{},hash:""},t);var n=this.rules();this._otherwiseFn&&n.push(this._otherwiseFn);for(var r,o=function(n){var r=n.match(t,e._router);return r&&{match:r,rule:n,weight:n.matchPriority(r)}},a=0;a<n.length&&(!r||0===this._sortFn(n[a],r.rule));a++){var u=o(n[a]);r=!r||u&&u.weight>r.weight?u:r}return r},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this._router,n=e.urlService,r=e.stateService,i={path:n.path(),search:n.search(),hash:n.hash()},o=this.match(i);Object(u.l)([[s.l,function(t){return n.url(t,!0)}],[J.isDef,function(t){return r.go(t.state,t.params,t.options)}],[Object(u.h)(J),function(t){return r.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,i,e))}},t.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)});this._stopFn&&this._stopFn(),delete this._stopFn},t.prototype.update=function(t){var e=this._router.locationService;t?this.location=e.url():e.url()!==this.location&&e.url(this.location,!0)},t.prototype.push=function(t,e,n){var r=n&&!!n.replace;this._router.urlService.url(t.format(e||{}),r)},t.prototype.href=function(t,e,n){var r=t.format(e);if(null==r)return null;n=n||{absolute:!1};var i=this._router.urlService.config,o=i.html5Mode();if(o||null===r||(r="#"+i.hashPrefix()+r),r=function(t,e,n,r){return"/"===r?t:e?x(r)+t:n?r.slice(1)+t:t}(r,o,n.absolute,i.baseHref()),!n.absolute||!r)return r;var a=!o&&r?"/":"",u=i.port(),s=80===u||443===u?"":":"+u;return[i.protocol(),"://",i.host(),s,a,r].join("")},t.prototype.rule=function(t){var e=this;if(!It.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.removeRule=function(t){Object(i.L)(this._rules,t)},t.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},t.prototype.otherwise=function(t){var e=Lt(t);this._otherwiseFn=this.urlRuleFactory.create(Object(u.p)(!0),e),this._sorted=!1},t.prototype.initial=function(t){var e=Lt(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},t.prototype.when=function(t,e,n){var r=this.urlRuleFactory.create(t,e);return Object(s.c)(n&&n.priority)&&(r.priority=n.priority),this.rule(r),r},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t}();function Lt(t){if(!(Object(s.d)(t)||Object(s.l)(t)||Object(u.h)(J)(t)||J.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return Object(s.d)(t)?t:Object(u.p)(t)}var Ht=function(){function t(t){var e=this;this.router=t,this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIView:function(t){return Object(i.t)(e._uiViews,function(n){return e.router.$id+"."+n.id===t})},_registeredUIViews:function(){return e._uiViews},_activeViewConfigs:function(){return e._viewConfigs},_onSync:function(t){return e._listeners.push(t),function(){return Object(i.L)(e._listeners,t)}}}}return t.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var n=e.split("@"),r=n[0]||"$default",i=Object(s.l)(n[1])?n[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(r);o&&(i=o[1],r=o[2]),"!"===r.charAt(0)&&(r=r.substr(1),i="");/^(\^(?:\.\^)*)$/.exec(i)?i=i.split(".").reduce(function(t,e){return t.parent},t).name:"."===i&&(i=t.name);return{uiViewName:r,uiViewContextAnchor:i}},t.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},t.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},t.prototype.createViewConfig=function(t,e){var n=this._viewConfigFactories[e.$type];if(!n)throw new Error("ViewService: No view config factory registered for type "+e.$type);var r=n(t,e);return Object(s.a)(r)?r:[r]},t.prototype.deactivateViewConfig=function(t){V.traceViewServiceEvent("<- Removing",t),Object(i.L)(this._viewConfigs,t)},t.prototype.activateViewConfig=function(t){V.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},t.prototype.sync=function(){var e=this,n=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(i.h,{});function r(t){for(var e=t.viewDecl.$context,n=0;++n&&e.parent;)e=e.parent;return n}var o=Object(u.e)(function(t,e,n,r){return e*(t(n)-t(r))}),a=this._uiViews.sort(o(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(i){var a=e._viewConfigs.filter(t.matches(n,i));return a.length>1&&a.sort(o(r,-1)),{uiView:i,viewConfig:a[0]}}),s=a.map(function(t){return t.viewConfig}),c=this._viewConfigs.filter(function(t){return!Object(i.z)(s,t)}).map(function(t){return{uiView:void 0,viewConfig:t}});a.forEach(function(t){-1!==e._uiViews.indexOf(t.uiView)&&t.uiView.configUpdated(t.viewConfig)});var l=a.concat(c);this._listeners.forEach(function(t){return t(l)}),V.traceViewSync(l)},t.prototype.registerUIView=function(t){V.traceViewServiceUIViewEvent("-> Registering",t);var e=this._uiViews;return e.filter(function(e){return e.fqn===t.fqn&&e.$type===t.$type}).length&&V.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",t),e.push(t),this.sync(),function(){-1!==e.indexOf(t)?(V.traceViewServiceUIViewEvent("<- Deregistering",t),Object(i.L)(e)(t)):V.traceViewServiceUIViewEvent("Tried removing non-registered uiView",t)}},t.prototype.available=function(){return this._uiViews.map(Object(u.n)("fqn"))},t.prototype.active=function(){return this._uiViews.filter(Object(u.n)("$config")).map(Object(u.n)("name"))},t.matches=function(t,e){return function(n){if(e.$type!==n.viewDecl.$type)return!1;var r=n.viewDecl,o=r.$uiViewName.split("."),a=e.fqn.split(".");if(!Object(i.q)(o,a.slice(0-o.length)))return!1;var u=1-o.length||void 0,s=a.slice(0,u).join("."),c=t[s].creationContext;return r.$uiViewContextAnchor===(c&&c.name)}},t}(),Ut=function(){function t(){this.params=new z,this.lastStartedTransitionId=-1,this.transitionHistory=new c([],1),this.successfulTransitions=new c([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}(),Ft=function(t){return t.reduce(function(t,e){return t[e]=Object(o.a)(e),t},{dispose:i.E})},Bt=["url","path","search","hash","onChange"],Wt=["port","protocol","host","baseHref","html5Mode","hashPrefix"],zt=["type","caseInsensitive","strictMode","defaultSquashPolicy"],Gt=["sort","when","initial","otherwise","rules","rule","removeRule"],Jt=["deferIntercept","listen","sync","match"],Kt=function(){function t(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};var n=function(){return t.locationService};Object(i.n)(n,this,n,Bt,e);var r=function(){return t.locationConfig};Object(i.n)(r,this.config,r,Wt,e);var o=function(){return t.urlMatcherFactory};Object(i.n)(o,this.config,o,zt);var a=function(){return t.urlRouter};Object(i.n)(a,this.rules,a,Gt),Object(i.n)(a,this,a,Jt)}return t.prototype.url=function(t,e,n){},t.prototype.path=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.onChange=function(t){},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.dispose=function(){},t.prototype.sync=function(t){},t.prototype.listen=function(t){},t.prototype.deferIntercept=function(t){},t.prototype.match=function(t){},t.locationServiceStub=Ft(Bt),t.locationConfigStub=Ft(Wt),t}(),Yt=0,Xt=function(){function t(t,e){void 0===t&&(t=Kt.locationServiceStub),void 0===e&&(e=Kt.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=Yt++,this._disposed=!1,this._disposables=[],this.trace=V,this.viewService=new Ht(this),this.globals=new Ut,this.transitionService=new be(this),this.urlMatcherFactory=new Dt,this.urlRouter=new qt(this),this.stateRegistry=new bt(this),this.stateService=new we(this),this.urlService=new Kt(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;t&&Object(s.d)(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),Object(i.L)(e._disposables,t)}catch(t){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var n=new t(this,e);if(!n.name)throw new Error("Required property `name` missing on plugin: "+n);return this._disposables.push(n),this._plugins[n.name]=n},t.prototype.getPlugin=function(t){return t?this._plugins[t]:Object(i.U)(this._plugins)},t}();function Qt(t){t.addResolvable(Q.fromData(Xt,t.router),""),t.addResolvable(Q.fromData(kt,t),""),t.addResolvable(Q.fromData("$transition$",t),""),t.addResolvable(Q.fromData("$stateParams",t.params()),""),t.entering().forEach(function(e){t.addResolvable(Q.fromData("$state$",e),e)})}var Zt=["$transition$",kt],te=Object(i.z)(Zt),ee=function(t){var e=function(t){return te(t.token)?Q.fromData(t.token,null):t};Object(i.U)(t.treeChanges()).reduce(i.T,[]).reduce(i.R,[]).forEach(function(t){t.resolvables=t.resolvables.map(e)})},ne=function(t){var e=t.to().redirectTo;if(e){var n=t.router.stateService;return Object(s.d)(e)?o.b.$q.when(e(t)).then(r):r(e)}function r(e){if(e)return e instanceof J?e:Object(s.l)(e)?n.target(e,t.params(),t.options()):e.state||e.params?n.target(e.state||t.to(),e.params||t.params(),t.options()):void 0}};function re(t){return function(e,n){return(0,n.$$state()[t])(e,n)}}var ie=re("onExit"),oe=re("onRetain"),ae=re("onEnter"),ue=function(t){return new rt(t.treeChanges().to).resolvePath("EAGER",t).then(i.E)},se=function(t,e){return new rt(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(i.E)},ce=function(t){return new rt(t.treeChanges().to).resolvePath("LAZY",t).then(i.E)},le=function(t){var e=o.b.$q,n=t.views("entering");if(n.length)return e.all(n.map(function(t){return e.when(t.load())})).then(i.E)},fe=function(t){var e=t.views("entering"),n=t.views("exiting");if(e.length||n.length){var r=t.router.viewService;n.forEach(function(t){return r.deactivateViewConfig(t)}),e.forEach(function(t){return r.activateViewConfig(t)}),r.sync()}},pe=function(t){var e=t.router.globals,n=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,Object(i.m)(t.params(),e.params)},{priority:1e4}),t.promise.then(n,n)},he=function(t){var e=t.options(),n=t.router.stateService,r=t.router.urlRouter;if("url"!==e.source&&e.location&&n.$current.navigable){var i={replace:"replace"===e.location};r.push(n.$current.navigable.url,n.params,i)}r.update(!0)},de=function(t){var e=t.router;var n=t.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(e){return ve(t,e)});return o.b.$q.all(n).then(function(){if("url"!==t.originalTransition().options().source){var n=t.targetState();return e.stateService.target(n.identifier(),n.params(),n.options())}var r=e.urlService,i=r.match(r.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var a=o.state,u=i.match;return e.stateService.target(a,u,t.options())}e.urlService.sync()})};function ve(t,e){var n=e.$$state().lazyLoad,r=n._promise;if(!r){r=n._promise=o.b.$q.when(n(t,e)).then(function(e){e&&Array.isArray(e.states)&&e.states.forEach(function(e){return t.router.stateRegistry.register(e)});return e}).then(function(t){return delete e.lazyLoad,delete e.$$state().lazyLoad,delete n._promise,t},function(t){return delete n._promise,o.b.$q.reject(t)})}return r}var me=function(){return function(t,e,n,r,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=xt.HANDLE_RESULT),void 0===a&&(a=xt.REJECT_ERROR),void 0===u&&(u=!1),this.name=t,this.hookPhase=e,this.hookOrder=n,this.criteriaMatchPath=r,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=u}}();function ge(t){var e=t._ignoredReason();if(e){V.traceTransitionIgnored(t);var n=t.router.globals.transition;return"SameAsCurrent"===e&&n&&n.abort(),f.ignored().toPromise()}}function $e(t){if(!t.valid())throw new Error(t.error().toString())}var ye={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},be=function(){function t(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=Object(i.n)(Object(u.p)(this),{},Object(u.p)(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),t.globals.successfulTransitions.onEvict(ee)}return t.prototype.onCreate=function(t,e,n){},t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.dispose=function(t){Object(i.U)(this._registeredHooks).forEach(function(t){return t.forEach(function(e){e._deregistered=!0,Object(i.L)(t,e)})})},t.prototype.create=function(t,e){return new kt(t,e,this._router)},t.prototype._defineCoreEvents=function(){var t=dt,e=xt,n=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,n.to,!1,e.LOG_REJECTED_RESULT,e.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,n.to),this._defineEvent("onStart",t.RUN,0,n.to),this._defineEvent("onExit",t.RUN,100,n.exiting,!0),this._defineEvent("onRetain",t.RUN,200,n.retained),this._defineEvent("onEnter",t.RUN,300,n.entering),this._defineEvent("onFinish",t.RUN,400,n.to),this._defineEvent("onSuccess",t.SUCCESS,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var t=vt.STATE,e=vt.TRANSITION;this._definePathType("to",e),this._definePathType("from",e),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},t.prototype._defineEvent=function(t,e,n,r,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=xt.HANDLE_RESULT),void 0===a&&(a=xt.REJECT_ERROR),void 0===u&&(u=!1);var s=new me(t,e,n,r,i,o,a,u);this._eventTypes.push(s),St(this,this,s)},t.prototype._getEvents=function(t){return(Object(s.c)(t)?this._eventTypes.filter(function(e){return e.hookPhase===t}):this._eventTypes.slice()).sort(function(t,e){var n=t.hookPhase-e.hookPhase;return 0===n?t.hookOrder-e.hookOrder:n})},t.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=function(t){return t.onCreate({},Qt)}(this),t.ignored=function(t){return t.onBefore({},ge,{priority:-9999})}(this),t.invalid=function(t){return t.onBefore({},$e,{priority:-1e4})}(this),t.redirectTo=function(t){return t.onStart({to:function(t){return!!t.redirectTo}},ne)}(this),t.onExit=function(t){return t.onExit({exiting:function(t){return!!t.onExit}},ie)}(this),t.onRetain=function(t){return t.onRetain({retained:function(t){return!!t.onRetain}},oe)}(this),t.onEnter=function(t){return t.onEnter({entering:function(t){return!!t.onEnter}},ae)}(this),t.eagerResolve=function(t){return t.onStart({},ue,{priority:1e3})}(this),t.lazyResolve=function(t){return t.onEnter({entering:Object(u.p)(!0)},se,{priority:1e3})}(this),t.resolveAll=function(t){return t.onFinish({},ce,{priority:1e3})}(this),t.loadViews=function(t){return t.onFinish({},le)}(this),t.activateViews=function(t){return t.onSuccess({},fe)}(this),t.updateGlobals=function(t){return t.onCreate({},pe)}(this),t.updateUrl=function(t){return t.onSuccess({},he,{priority:9999})}(this),t.lazyLoad=function(t){return t.onBefore({entering:function(t){return!!t.lazyLoad}},de)}(this)},t}(),we=function(){function t(e){this.router=e,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof f?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var n=Object.keys(t.prototype).filter(Object(u.i)(Object(i.z)(["current","$current","params","transition"])));Object(i.n)(Object(u.p)(t.prototype),this,Object(u.p)(this),n)}return Object.defineProperty(t.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.defaultErrorHandler(i.E),this.invalidCallbacks=[]},t.prototype._handleInvalidTargetState=function(t,e){var n=this,r=K.makeTargetState(this.router.stateRegistry,t),i=this.router.globals,a=function(){return i.transitionHistory.peekTail()},u=a(),s=new c(this.invalidCallbacks.slice()),l=new rt(t).injector(),p=function(t){if(t instanceof J){var e=t;return(e=n.target(e.identifier(),e.params(),e.options())).valid()?a()!==u?f.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):f.invalid(e.error()).toPromise()}};return function t(){var n=s.dequeue();return void 0===n?f.invalid(e.error()).toPromise():o.b.$q.when(n(e,r,l)).then(p).then(function(e){return e||t()})}()},t.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){Object(i.L)(this.invalidCallbacks)(t)}.bind(this)},t.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!Object(s.c)(t)||t,inherit:!1,notify:!1})},t.prototype.go=function(t,e,n){var r={relative:this.$current,inherit:!0},o=Object(i.o)(n,r,ye);return this.transitionTo(t,e,o)},t.prototype.target=function(t,e,n){if(void 0===n&&(n={}),Object(s.i)(n.reload)&&!n.reload.name)throw new Error("Invalid reload state object");var r=this.router.stateRegistry;if(n.reloadState=!0===n.reload?r.root():r.matcher.find(n.reload,n.relative),n.reload&&!n.reloadState)throw new Error("No such reload state '"+(Object(s.l)(n.reload)?n.reload:n.reload.name)+"'");return new J(this.router.stateRegistry,t,e,n)},t.prototype.getCurrentPath=function(){var t=this,e=this.router.globals.successfulTransitions.peekTail();return e?e.treeChanges().to:[new G(t.router.stateRegistry.root())]},t.prototype.transitionTo=function(t,e,n){var a=this;void 0===e&&(e={}),void 0===n&&(n={});var u=this.router,s=u.globals;n=Object(i.o)(n,ye);n=Object(i.r)(n,{current:function(){return s.transition}});var c=this.target(t,e,n),l=this.getCurrentPath();if(!c.exists())return this._handleInvalidTargetState(l,c);if(!c.valid())return Object(i.O)(c.error());var p=function(t){return function(e){if(e instanceof f){var n=u.globals.lastStartedTransitionId===t.$id;if(e.type===r.IGNORED)return n&&u.urlRouter.update(),o.b.$q.when(s.current);var i=e.detail;if(e.type===r.SUPERSEDED&&e.redirected&&i instanceof J){var c=t.redirect(i);return c.run().catch(p(c))}if(e.type===r.ABORTED)return n&&u.urlRouter.update(),o.b.$q.reject(e)}return a.defaultErrorHandler()(e),o.b.$q.reject(e)}},h=this.router.transitionService.create(l,c),d=h.run().catch(p(h));return Object(i.N)(d),Object(i.r)(d,{transition:h})},t.prototype.is=function(t,e,n){n=Object(i.o)(n,{relative:this.$current});var r=this.router.stateRegistry.matcher.find(t,n.relative);if(Object(s.c)(r)){if(this.$current!==r)return!1;if(!e)return!0;var o=r.parameters({inherit:!0,matchingKeys:e});return B.equals(o,B.values(o,e),this.params)}},t.prototype.includes=function(t,e,n){n=Object(i.o)(n,{relative:this.$current});var r=Object(s.l)(t)&&a.fromString(t);if(r){if(!r.matches(this.$current.name))return!1;t=this.$current.name}var o=this.router.stateRegistry.matcher.find(t,n.relative),u=this.$current.includes;if(Object(s.c)(o)){if(!Object(s.c)(u[o.name]))return!1;if(!e)return!0;var c=o.parameters({inherit:!0,matchingKeys:e});return B.equals(c,B.values(c,e),this.params)}},t.prototype.href=function(t,e,n){var r={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};n=Object(i.o)(n,r),e=e||{};var o=this.router.stateRegistry.matcher.find(t,n.relative);if(!Object(s.c)(o))return null;n.inherit&&(e=this.params.$inherit(e,this.$current,o));var a=o&&n.lossy?o.navigable:o;return a&&void 0!==a.url&&null!==a.url?this.router.urlRouter.href(a.url,e,{absolute:n.absolute}):null},t.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},t.prototype.get=function(t,e){var n=this.router.stateRegistry;return 0===arguments.length?n.get():n.get(t,e||this.$current)},t.prototype.lazyLoad=function(t,e){var n=this.get(t);if(!n||!n.lazyLoad)throw new Error("Can not lazy load "+t);var r=this.getCurrentPath(),i=K.makeTargetState(this.router.stateRegistry,r);return ve(e=e||this.router.transitionService.create(r,i),n)},t}(),xe={when:function(t){return new Promise(function(e,n){return e(t)})},reject:function(t){return new Promise(function(e,n){n(t)})},defer:function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},all:function(t){if(Object(s.a)(t))return Promise.all(t);if(Object(s.i)(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return xe.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}},Oe={},Ee=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Se=/([^\s,]+)/g,Ce={get:function(t){return Oe[t]},has:function(t){return null!=Ce.get(t)},invoke:function(t,e,n){var r=Object(i.r)({},Oe,n||{}),o=Ce.annotate(t),a=Object(i.l)(function(t){return r.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),u=o.filter(a).map(function(t){return r[t]});return Object(s.d)(t)?t.apply(e,u):t.slice(-1)[0].apply(e,u)},annotate:function(t){if(!Object(s.e)(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(Object(s.a)(t))return t.slice(0,-1);var e=t.toString().replace(Ee,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(Se)||[]}},je=function(t,e){var n=e[0],r=e[1];return t.hasOwnProperty(n)?Object(s.a)(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r,t},ke=function(t){return t.split("&").filter(i.y).map(S).reduce(je,{})};function Te(t){var e=function(t){return t||""},n=O(t).map(e),r=n[0],i=n[1],o=E(r).map(e);return{path:o[0],search:o[1],hash:i,url:t}}var _e=function(t){var e=t.path(),n=t.search(),r=t.hash(),o=Object.keys(n).map(function(t){var e=n[t];return(Object(s.a)(e)?e:[e]).map(function(e){return t+"="+e})}).reduce(i.T,[]).join("&");return e+(o?"?"+o:"")+(r?"#"+r:"")};function Ae(t,e,n,r){return function(i){var o=i.locationService=new n(i),a=i.locationConfig=new r(i,e);return{name:t,service:o,configuration:a,dispose:function(t){t.dispose(o),t.dispose(a)}}}}var Re=function(){function t(t,e){var n=this;this.fireAfterUpdate=e,this._listeners=[],this._listener=function(t){return n._listeners.forEach(function(e){return e(t)})},this.hash=function(){return Te(n._get()).hash},this.path=function(){return Te(n._get()).path},this.search=function(){return ke(Te(n._get()).search)},this._location=i.M.location,this._history=i.M.history}return t.prototype.url=function(t,e){return void 0===e&&(e=!0),Object(s.c)(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate&&this._listeners.forEach(function(e){return e({url:t})})),_e(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return Object(i.L)(e._listeners,t)}},t.prototype.dispose=function(t){Object(i.p)(this._listeners)},t}(),Pe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ne=function(t){function e(e){var n=t.call(this,e,!1)||this;return i.M.addEventListener("hashchange",n._listener,!1),n}return Pe(e,t),e.prototype._get=function(){return C(this._location.hash)},e.prototype._set=function(t,e,n,r){this._location.hash=n},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),i.M.removeEventListener("hashchange",this._listener)},e}(Re),De=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ie=function(t){function e(e){return t.call(this,e,!0)||this}return De(e,t),e.prototype._get=function(){return this._url},e.prototype._set=function(t,e,n,r){this._url=n},e}(Re),Me=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=function(t){function e(e){var n=t.call(this,e,!0)||this;return n._config=e.urlService.config,i.M.addEventListener("popstate",n._listener,!1),n}return Me(e,t),e.prototype._getBasePrefix=function(){return x(this._config.baseHref())},e.prototype._get=function(){var t=this._location,e=t.pathname,n=t.hash,r=t.search;r=E(r)[1],n=O(n)[1];var i=this._getBasePrefix(),o=e===this._config.baseHref(),a=e.substr(0,i.length)===i;return(e=o?"/":a?e.substring(i.length):e)+(r?"?"+r:"")+(n?"#"+n:"")},e.prototype._set=function(t,e,n,r){var i=this._getBasePrefix(),o=n&&"/"!==n[0]?"/":"",a=""===n||"/"===n?this._config.baseHref():i+o+n;r?this._history.replaceState(t,e,a):this._history.pushState(t,e,a)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),i.M.removeEventListener("popstate",this._listener)},e}(Re),qe=function(){return function(){var t=this;this.dispose=i.E,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return t._port},this.protocol=function(){return t._protocol},this.host=function(){return t._host},this.baseHref=function(){return t._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(e){return Object(s.c)(e)?t._hashPrefix=e:t._hashPrefix}}}(),Le=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return Object(s.c)(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return Object(s.c)(t)&&(this._baseHref=t),Object(s.m)(this._baseHref)&&(this._baseHref=this.getBaseHref()),this._baseHref},t.prototype.getBaseHref=function(){var t=document.getElementsByTagName("base")[0];return t&&t.href?t.href.replace(/^(https?:)?\/\/[^/]*/,""):location.pathname||"/"},t.prototype.dispose=function(){},t}();function He(t){return o.b.$injector=Ce,o.b.$q=xe,{name:"vanilla.services",$q:xe,$injector:Ce,dispose:function(){return null}}}var Ue=Ae("vanilla.hashBangLocation",!1,Ne,Le),Fe=Ae("vanilla.pushStateLocation",!0,Ve,Le),Be=Ae("vanilla.memoryLocation",!1,Ie,qe),We=function(){function t(){}return t.prototype.dispose=function(t){},t}();n.d(e,"root",function(){return i.M}),n.d(e,"fromJson",function(){return i.x}),n.d(e,"toJson",function(){return i.Q}),n.d(e,"forEach",function(){return i.w}),n.d(e,"extend",function(){return i.r}),n.d(e,"equals",function(){return i.q}),n.d(e,"identity",function(){return i.y}),n.d(e,"noop",function(){return i.E}),n.d(e,"createProxyFunctions",function(){return i.n}),n.d(e,"inherit",function(){return i.A}),n.d(e,"inArray",function(){return i.z}),n.d(e,"_inArray",function(){return i.b}),n.d(e,"removeFrom",function(){return i.L}),n.d(e,"_removeFrom",function(){return i.d}),n.d(e,"pushTo",function(){return i.K}),n.d(e,"_pushTo",function(){return i.c}),n.d(e,"deregAll",function(){return i.p}),n.d(e,"defaults",function(){return i.o}),n.d(e,"mergeR",function(){return i.D}),n.d(e,"ancestors",function(){return i.f}),n.d(e,"pick",function(){return i.H}),n.d(e,"omit",function(){return i.F}),n.d(e,"pluck",function(){return i.I}),n.d(e,"filter",function(){return i.s}),n.d(e,"find",function(){return i.t}),n.d(e,"mapObj",function(){return i.C}),n.d(e,"map",function(){return i.B}),n.d(e,"values",function(){return i.U}),n.d(e,"allTrueR",function(){return i.e}),n.d(e,"anyTrueR",function(){return i.g}),n.d(e,"unnestR",function(){return i.T}),n.d(e,"flattenR",function(){return i.v}),n.d(e,"pushR",function(){return i.J}),n.d(e,"uniqR",function(){return i.R}),n.d(e,"unnest",function(){return i.S}),n.d(e,"flatten",function(){return i.u}),n.d(e,"assertPredicate",function(){return i.l}),n.d(e,"assertMap",function(){return i.k}),n.d(e,"assertFn",function(){return i.j}),n.d(e,"pairs",function(){return i.G}),n.d(e,"arrayTuples",function(){return i.i}),n.d(e,"applyPairs",function(){return i.h}),n.d(e,"tail",function(){return i.P}),n.d(e,"copy",function(){return i.m}),n.d(e,"_extend",function(){return i.a}),n.d(e,"silenceUncaughtInPromise",function(){return i.N}),n.d(e,"silentRejection",function(){return i.O}),n.d(e,"notImplemented",function(){return o.a}),n.d(e,"services",function(){return o.b}),n.d(e,"Glob",function(){return a}),n.d(e,"curry",function(){return u.e}),n.d(e,"compose",function(){return u.d}),n.d(e,"pipe",function(){return u.m}),n.d(e,"prop",function(){return u.n}),n.d(e,"propEq",function(){return u.o}),n.d(e,"parse",function(){return u.k}),n.d(e,"not",function(){return u.i}),n.d(e,"and",function(){return u.b}),n.d(e,"or",function(){return u.j}),n.d(e,"all",function(){return u.a}),n.d(e,"any",function(){return u.c}),n.d(e,"is",function(){return u.h}),n.d(e,"eq",function(){return u.f}),n.d(e,"val",function(){return u.p}),n.d(e,"invoke",function(){return u.g}),n.d(e,"pattern",function(){return u.l}),n.d(e,"isUndefined",function(){return s.m}),n.d(e,"isDefined",function(){return s.c}),n.d(e,"isNull",function(){return s.f}),n.d(e,"isNullOrUndefined",function(){return s.g}),n.d(e,"isFunction",function(){return s.d}),n.d(e,"isNumber",function(){return s.h}),n.d(e,"isString",function(){return s.l}),n.d(e,"isObject",function(){return s.i}),n.d(e,"isArray",function(){return s.a}),n.d(e,"isDate",function(){return s.b}),n.d(e,"isRegExp",function(){return s.k}),n.d(e,"isInjectable",function(){return s.e}),n.d(e,"isPromise",function(){return s.j}),n.d(e,"Queue",function(){return c}),n.d(e,"maxLength",function(){return p}),n.d(e,"padString",function(){return h}),n.d(e,"kebobString",function(){return d}),n.d(e,"functionToString",function(){return v}),n.d(e,"fnToString",function(){return m}),n.d(e,"stringify",function(){return y}),n.d(e,"beforeAfterSubstr",function(){return b}),n.d(e,"hostRegex",function(){return w}),n.d(e,"stripLastPathElement",function(){return x}),n.d(e,"splitHash",function(){return O}),n.d(e,"splitQuery",function(){return E}),n.d(e,"splitEqual",function(){return S}),n.d(e,"trimHashVal",function(){return C}),n.d(e,"splitOnDelim",function(){return j}),n.d(e,"joinNeighborsR",function(){return k}),n.d(e,"Category",function(){return A}),n.d(e,"Trace",function(){return M}),n.d(e,"trace",function(){return V}),n.d(e,"DefType",function(){return L}),n.d(e,"Param",function(){return B}),n.d(e,"ParamTypes",function(){return W}),n.d(e,"StateParams",function(){return z}),n.d(e,"ParamType",function(){return q}),n.d(e,"PathNode",function(){return G}),n.d(e,"PathUtils",function(){return K}),n.d(e,"resolvePolicies",function(){return Y}),n.d(e,"defaultResolvePolicy",function(){return X}),n.d(e,"Resolvable",function(){return Q}),n.d(e,"NATIVE_INJECTOR_TOKEN",function(){return nt}),n.d(e,"ResolveContext",function(){return rt}),n.d(e,"resolvablesBuilder",function(){return ht}),n.d(e,"StateBuilder",function(){return mt}),n.d(e,"StateObject",function(){return gt}),n.d(e,"StateMatcher",function(){return $t}),n.d(e,"StateQueueManager",function(){return yt}),n.d(e,"StateRegistry",function(){return bt}),n.d(e,"StateService",function(){return we}),n.d(e,"TargetState",function(){return J}),n.d(e,"TransitionHookPhase",function(){return dt}),n.d(e,"TransitionHookScope",function(){return vt}),n.d(e,"HookBuilder",function(){return Ct}),n.d(e,"matchState",function(){return Ot}),n.d(e,"RegisteredHook",function(){return Et}),n.d(e,"makeEvent",function(){return St}),n.d(e,"RejectType",function(){return r}),n.d(e,"Rejection",function(){return f}),n.d(e,"Transition",function(){return kt}),n.d(e,"TransitionHook",function(){return xt}),n.d(e,"TransitionEventType",function(){return me}),n.d(e,"defaultTransOpts",function(){return ye}),n.d(e,"TransitionService",function(){return be}),n.d(e,"UrlMatcher",function(){return Rt}),n.d(e,"ParamFactory",function(){return Nt}),n.d(e,"UrlMatcherFactory",function(){return Dt}),n.d(e,"UrlRouter",function(){return qt}),n.d(e,"UrlRuleFactory",function(){return It}),n.d(e,"BaseUrlRule",function(){return Mt}),n.d(e,"UrlService",function(){return Kt}),n.d(e,"ViewService",function(){return Ht}),n.d(e,"UIRouterGlobals",function(){return Ut}),n.d(e,"UIRouter",function(){return Xt}),n.d(e,"$q",function(){return xe}),n.d(e,"$injector",function(){return Ce}),n.d(e,"BaseLocationServices",function(){return Re}),n.d(e,"HashLocationService",function(){return Ne}),n.d(e,"MemoryLocationService",function(){return Ie}),n.d(e,"PushStateLocationService",function(){return Ve}),n.d(e,"MemoryLocationConfig",function(){return qe}),n.d(e,"BrowserLocationConfig",function(){return Le}),n.d(e,"keyValsToObjectR",function(){return je}),n.d(e,"getParams",function(){return ke}),n.d(e,"parseUrl",function(){return Te}),n.d(e,"buildUrl",function(){return _e}),n.d(e,"locationPluginFactory",function(){return Ae}),n.d(e,"servicesPlugin",function(){return He}),n.d(e,"hashLocationPlugin",function(){return Ue}),n.d(e,"pushStateLocationPlugin",function(){return Fe}),n.d(e,"memoryLocationPlugin",function(){return Be}),n.d(e,"UIRouterPluginBase",function(){return We})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vcHJlZGljYXRlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vaG9mLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2NvbW1vbi9jb3Jlc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FuZ3VsYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5zY3NzP2MxYzMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi91cmxzLmpzIiwid2VicGFjazovLy8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FuZ3VsYXIvYW5ndWxhci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2FuZ3VsYXJqcy9yZWxlYXNlL3VpLXJvdXRlci1hbmd1bGFyanMuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlci9Ib21lQ3RybC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBpL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5L2Rpc3QvanF1ZXJ5LmpzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyL1Byb2ZpbGVDdHJsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vZ2xvYi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vcXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL3N0cmluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL3RyYWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhcmFtcy9wYXJhbVR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vcGFyYW1zL3BhcmFtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhcmFtcy9wYXJhbVR5cGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhcmFtcy9zdGF0ZVBhcmFtcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9wYXRoL3BhdGhOb2RlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3N0YXRlL3RhcmdldFN0YXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhdGgvcGF0aFV0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3Jlc29sdmUvaW50ZXJmYWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3Jlc29sdmUvcmVzb2x2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9yZXNvbHZlL3Jlc29sdmVDb250ZXh0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3N0YXRlL3N0YXRlQnVpbGRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL2ludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9zdGF0ZS9zdGF0ZU9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9zdGF0ZS9zdGF0ZU1hdGNoZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vc3RhdGUvc3RhdGVRdWV1ZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vc3RhdGUvc3RhdGVSZWdpc3RyeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL3RyYW5zaXRpb25Ib29rLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vaG9va1JlZ2lzdHJ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vaG9va0J1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdHJhbnNpdGlvbi90cmFuc2l0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3VybC91cmxNYXRjaGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3VybC91cmxNYXRjaGVyRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS91cmwvdXJsUnVsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS91cmwvdXJsUm91dGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZpZXcvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9nbG9iYWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3VybC91cmxTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3JvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9jb3JlUmVzb2x2YWJsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaG9va3MvcmVkaXJlY3RUby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9vbkVudGVyRXhpdFJldGFpbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9yZXNvbHZlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL3ZpZXdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL3VwZGF0ZUdsb2JhbHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaG9va3MvdXJsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL2xhenlMb2FkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vdHJhbnNpdGlvbkV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9pZ25vcmVkVHJhbnNpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9pbnZhbGlkVHJhbnNpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3N0YXRlL3N0YXRlU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL3EuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9pbmplY3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL3V0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZhbmlsbGEvYmFzZUxvY2F0aW9uU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL2hhc2hMb2NhdGlvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9tZW1vcnlMb2NhdGlvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9wdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9tZW1vcnlMb2NhdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL2Jyb3dzZXJMb2NhdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL3BsdWdpbnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaW50ZXJmYWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX2NvcmVzZXJ2aWNlc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwicm9vdCIsInNlbGYiLCJnbG9iYWwiLCJ1bmRlZmluZWQiLCJhbmd1bGFyIiwiZnJvbUpzb24iLCJKU09OIiwicGFyc2UiLCJ0b0pzb24iLCJzdHJpbmdpZnkiLCJmb3JFYWNoIiwib2JqIiwiY2IiLCJfdGhpcyIsIl9wcmVkaWNhdGVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJrZXlzIiwiZXh0ZW5kIiwiYXNzaWduIiwiX2V4dGVuZCIsImVxdWFscyIsIl9lcXVhbHMiLCJpZGVudGl0eSIsIngiLCJub29wIiwiY3JlYXRlUHJveHlGdW5jdGlvbnMiLCJzb3VyY2UiLCJ0YXJnZXQiLCJmbk5hbWVzIiwibGF0ZWJpbmQiLCJiaW5kRnVuY3Rpb24iLCJmbk5hbWUiLCJyZWR1Y2UiLCJhY2MiLCJhcHBseSIsImFyZ3VtZW50cyIsIm1ha2VMYXRlUmViaW5kRm4iLCJpbmhlcml0IiwicGFyZW50IiwiZXh0cmEiLCJpbkFycmF5IiwiX2hvZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX2luQXJyYXkiLCJhcnJheSIsImluZGV4T2YiLCJyZW1vdmVGcm9tIiwiX3JlbW92ZUZyb20iLCJpZHgiLCJzcGxpY2UiLCJwdXNoVG8iLCJfcHVzaFRvIiwiYXJyIiwidmFsIiwicHVzaCIsImRlcmVnQWxsIiwiZnVuY3Rpb25zIiwic2xpY2UiLCJmbiIsImRlZmF1bHRzIiwib3B0cyIsImRlZmF1bHRzTGlzdCIsIl9pIiwibGVuZ3RoIiwiZGVmYXVsdFZhbHMiLCJjb25jYXQiLCJyZXZlcnNlIiwicGljayIsIm1lcmdlUiIsIm1lbW8iLCJpdGVtIiwiYW5jZXN0b3JzIiwiZmlyc3QiLCJzZWNvbmQiLCJwYXRoIiwicHJvcE5hbWVzIiwib2JqQ29weSIsIl9wcm9wIiwib21pdCIsImZpbHRlciIsInBsdWNrIiwiY29sbGVjdGlvbiIsInByb3BOYW1lIiwibWFwIiwiY2FsbGJhY2siLCJyZXN1bHQiLCJhY2NlcHQiLCJmaW5kIiwibWFwT2JqIiwidmFsdWVzIiwiYWxsVHJ1ZVIiLCJlbGVtIiwiYW55VHJ1ZVIiLCJ1bm5lc3RSIiwiZmxhdHRlblIiLCJwdXNoUiIsInVuaXFSIiwidG9rZW4iLCJ1bm5lc3QiLCJmbGF0dGVuIiwiYXNzZXJ0UHJlZGljYXRlIiwiYXNzZXJ0Rm4iLCJhc3NlcnRNYXAiLCJwcmVkaWNhdGVPck1hcCIsImVyck1zZyIsIkVycm9yIiwicGFpcnMiLCJhcnJheVR1cGxlcyIsImFyZ3MiLCJtYXhBcnJheUxlbiIsIm1pbiIsIk1hdGgiLCJfbG9vcF8xIiwiYXBwbHlQYWlycyIsImtleVZhbFR1cGxlIiwidGFpbCIsImNvcHkiLCJzcmMiLCJkZXN0IiwidG9PYmoiLCJqIiwibzEiLCJvMiIsInQxIiwidHVwIiwiYTEiLCJhMiIsImIiLCJfYXJyYXlzRXEiLCJnZXRUaW1lIiwidG9TdHJpbmciLCJzaWxlbmNlVW5jYXVnaHRJblByb21pc2UiLCJwcm9taXNlIiwiY2F0Y2giLCJlIiwic2lsZW50UmVqZWN0aW9uIiwiZXJyb3IiLCIkcSIsInJlamVjdCIsIl9ob2ZfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsInRvU3RyIiwidGlzIiwiaXNVbmRlZmluZWQiLCJpc0RlZmluZWQiLCJpc051bGwiLCJpc051bGxPclVuZGVmaW5lZCIsImlzRnVuY3Rpb24iLCJpc051bWJlciIsImlzU3RyaW5nIiwiaXNPYmplY3QiLCJpc0FycmF5IiwiQXJyYXkiLCJpc0RhdGUiLCJpc1JlZ0V4cCIsImlzSW5qZWN0YWJsZSIsImhlYWQiLCJpc1Byb21pc2UiLCJjdXJyeSIsImluaXRpYWxfYXJncyIsImZ1bmNfYXJnc19sZW5ndGgiLCJjdXJyaWVkIiwiY29tcG9zZSIsInN0YXJ0IiwidGhpcyIsInBpcGUiLCJmdW5jcyIsIl9fd2VicGFja19leHBvcnRzX18iLCJwYXR0ZXJuIiwicHJvcCIsInByb3BFcSIsIl92YWwiLCJzcGxpdCIsIm5vdCIsImFuZCIsImZuMSIsImZuMiIsIm9yIiwiYWxsIiwiYW55IiwiaXMiLCJjdG9yIiwiY29uc3RydWN0b3IiLCJlcSIsIm90aGVyIiwidiIsImludm9rZSIsInN0cnVjdCIsIm5vdEltcGxlbWVudGVkIiwiZm5uYW1lIiwic2VydmljZXMiLCIkaW5qZWN0b3IiLCJjb250ZW50Iiwib3B0aW9ucyIsImhtciIsInRyYW5zZm9ybSIsImluc2VydEludG8iLCJsb2NhbHMiLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0NvbW1lbnQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiaWQiLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJtZW1vaXplIiwid2luZG93IiwiZG9jdW1lbnQiLCJhdG9iIiwiZ2V0RWxlbWVudCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50Iiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInN0eWxlc0luc2VydGVkQXRUb3AiLCJmaXhVcmxzIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJkb21TdHlsZSIsInJlZnMiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiY3JlYXRlU3R5bGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHJzIiwidHlwZSIsImFkZEF0dHJzIiwiZWwiLCJzZXRBdHRyaWJ1dGUiLCJ1cGRhdGUiLCJyZW1vdmUiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJhdXRvRml4VXJscyIsImNvbnZlcnRUb0Fic29sdXRlVXJscyIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInJlcGxhY2VUZXh0IiwidGV4dFN0b3JlIiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsIkJvb2xlYW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsImxvY2F0aW9uIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwibmV3VXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCIsImFwcCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJIb21lQ3RybCIsIlByb2ZpbGVDdHJsIiwibWluRXJyQ29uZmlnIiwib2JqZWN0TWF4RGVwdGgiLCJlcnJvckhhbmRsaW5nQ29uZmlnIiwiaXNWYWxpZE9iamVjdE1heERlcHRoIiwiTmFOIiwibWF4RGVwdGgiLCJtaW5FcnIiLCJFcnJvckNvbnN0cnVjdG9yIiwicGFyYW1QcmVmaXgiLCJjb2RlIiwidGVtcGxhdGUiLCJtZXNzYWdlIiwidGVtcGxhdGVBcmdzIiwic2xpY2VBcmdzIiwiYXJnIiwidG9EZWJ1Z1N0cmluZyIsIm1hdGNoIiwiUkVHRVhfU1RSSU5HX1JFR0VYUCIsIlZBTElESVRZX1NUQVRFX1BST1BFUlRZIiwibG93ZXJjYXNlIiwic3RyaW5nIiwidG9Mb3dlckNhc2UiLCJ1cHBlcmNhc2UiLCJ0b1VwcGVyQ2FzZSIsImNoIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hhckNvZGVBdCIsIm1zaWUiLCJqcUxpdGUiLCJqUXVlcnkiLCJhbmd1bGFyTW9kdWxlIiwiZ2V0UHJvdG90eXBlT2YiLCJuZ01pbkVyciIsInVpZCIsImlzQXJyYXlMaWtlIiwiaXNXaW5kb3ciLCJpdGVyYXRvciIsImNvbnRleHQiLCJpc1ByaW1pdGl2ZSIsImlzQmxhbmtPYmplY3QiLCJmb3JFYWNoU29ydGVkIiwic29ydCIsInJldmVyc2VQYXJhbXMiLCJpdGVyYXRvckZuIiwibmV4dFVpZCIsInNldEhhc2hLZXkiLCJoIiwiJCRoYXNoS2V5IiwiYmFzZUV4dGVuZCIsImRzdCIsIm9ianMiLCJkZWVwIiwiaWkiLCJqaiIsIkRhdGUiLCJ2YWx1ZU9mIiwiUmVnRXhwIiwibm9kZU5hbWUiLCJjbG9uZU5vZGUiLCJpc0VsZW1lbnQiLCJjbG9uZSIsIm1lcmdlIiwidG9JbnQiLCJzdHIiLCJwYXJzZUludCIsImRvY3VtZW50TW9kZSIsImlzTnVtYmVyTmFOIiwiTnVtYmVyIiwiaXNOYU4iLCJudW0iLCIkIiwidmFsdWVGbiIsImhhc0N1c3RvbVRvU3RyaW5nIiwiJGluamVjdCIsImlzRXJyb3IiLCJpc1Njb3BlIiwiJGV2YWxBc3luYyIsIiR3YXRjaCIsImlzQm9vbGVhbiIsImlzUHJvbWlzZUxpa2UiLCJ0aGVuIiwiVFlQRURfQVJSQVlfUkVHRVhQIiwiZXNjYXBlRm9yUmVnZXhwIiwibm9kZSIsImF0dHIiLCJub2RlTmFtZV8iLCJlbGVtZW50IiwiaW5jbHVkZXMiLCJhcnJheVJlbW92ZSIsImRlc3RpbmF0aW9uIiwic3RhY2tTb3VyY2UiLCJzdGFja0Rlc3QiLCJpc1R5cGVkQXJyYXkiLCJpc0FycmF5QnVmZmVyIiwiY29weVJlY3Vyc2UiLCJjb3B5RWxlbWVudCIsIm5lZWRzUmVjdXJzZSIsImJ1ZmZlciIsImJ5dGVPZmZzZXQiLCJjb3BpZWQiLCJBcnJheUJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJVaW50OEFycmF5Iiwic2V0IiwicmUiLCJsYXN0SW5kZXgiLCJjb3B5VHlwZSIsInNpbXBsZUNvbXBhcmUiLCJhIiwia2V5U2V0IiwiY3JlYXRlTWFwIiwiY2hhckF0IiwiY3NwIiwicnVsZXMiLCJuZ0NzcEVsZW1lbnQiLCJuZ0NzcEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIm5vVW5zYWZlRXZhbCIsIm5vSW5saW5lU3R5bGUiLCJGdW5jdGlvbiIsImpxIiwibmFtZV8iLCJwcmVmaXgiLCJuZ0F0dHJQcmVmaXhlcyIsImFycmF5MSIsImFycmF5MiIsInN0YXJ0SW5kZXgiLCJjdXJyeUFyZ3MiLCJ0b0pzb25SZXBsYWNlciIsInByZXR0eSIsImpzb24iLCJBTExfQ09MT05TIiwidGltZXpvbmVUb09mZnNldCIsInRpbWV6b25lIiwiZmFsbGJhY2siLCJyZXF1ZXN0ZWRUaW1lem9uZU9mZnNldCIsImNvbnZlcnRUaW1lem9uZVRvTG9jYWwiLCJkYXRlIiwiZGF0ZVRpbWV6b25lT2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJtaW51dGVzIiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJhZGREYXRlTWludXRlcyIsInN0YXJ0aW5nVGFnIiwiZW1wdHkiLCJlbGVtSHRtbCIsImFwcGVuZCIsImh0bWwiLCJub2RlVHlwZSIsIk5PREVfVFlQRV9URVhUIiwidHJ5RGVjb2RlVVJJQ29tcG9uZW50IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFyc2VLZXlWYWx1ZSIsImtleVZhbHVlIiwic3BsaXRQb2ludCIsInN1YnN0cmluZyIsInRvS2V5VmFsdWUiLCJhcnJheVZhbHVlIiwiZW5jb2RlVXJpUXVlcnkiLCJlbmNvZGVVcmlTZWdtZW50IiwicGN0RW5jb2RlU3BhY2VzIiwiaXNBdXRvQm9vdHN0cmFwQWxsb3dlZCIsInNjcmlwdCIsImN1cnJlbnRTY3JpcHQiLCJIVE1MU2NyaXB0RWxlbWVudCIsIlNWR1NjcmlwdEVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwiZ2V0TmFtZWRJdGVtIiwiZXZlcnkiLCJvcmlnaW4iLCJhbGxvd0F1dG9Cb290c3RyYXAiLCJhbmd1bGFySW5pdCIsImJvb3RzdHJhcCIsImFwcEVsZW1lbnQiLCJoYXNBdHRyaWJ1dGUiLCJjYW5kaWRhdGUiLCJjb25zb2xlIiwic3RyaWN0RGkiLCJuZ0F0dHIiLCJnZXROZ0F0dHJpYnV0ZSIsImRvQm9vdHN0cmFwIiwiaW5qZWN0b3IiLCJ0YWciLCJ1bnNoaWZ0IiwiJHByb3ZpZGUiLCJkZWJ1Z0luZm9FbmFibGVkIiwiJGNvbXBpbGVQcm92aWRlciIsImNyZWF0ZUluamVjdG9yIiwic2NvcGUiLCJjb21waWxlIiwiJGFwcGx5IiwiZGF0YSIsIk5HX0VOQUJMRV9ERUJVR19JTkZPIiwiTkdfREVGRVJfQk9PVFNUUkFQIiwicmVzdW1lQm9vdHN0cmFwIiwiZXh0cmFNb2R1bGVzIiwicmVzdW1lRGVmZXJyZWRCb290c3RyYXAiLCJyZWxvYWRXaXRoRGVidWdJbmZvIiwicmVsb2FkIiwiZ2V0VGVzdGFiaWxpdHkiLCJyb290RWxlbWVudCIsIlNOQUtFX0NBU0VfUkVHRVhQIiwic25ha2VfY2FzZSIsInNlcGFyYXRvciIsImxldHRlciIsInBvcyIsImJpbmRKUXVlcnlGaXJlZCIsImFzc2VydEFyZyIsInJlYXNvbiIsImFzc2VydEFyZ0ZuIiwiYWNjZXB0QXJyYXlBbm5vdGF0aW9uIiwiYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkiLCJiaW5kRm5Ub1Njb3BlIiwibGFzdEluc3RhbmNlIiwibGVuIiwiZ2V0QmxvY2tOb2RlcyIsIm5vZGVzIiwiYmxvY2tOb2RlcyIsImVuZE5vZGUiLCJOT0RFX1RZUEVfRUxFTUVOVCIsIk5PREVfVFlQRV9DT01NRU5UIiwiTk9ERV9UWVBFX0RPQ1VNRU5UIiwiTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UIiwic2hhbGxvd0NvcHkiLCJzZWVuIiwic2VyaWFsaXplT2JqZWN0IiwidmVyc2lvbiIsImZ1bGwiLCJtYWpvciIsIm1pbm9yIiwiZG90IiwiY29kZU5hbWUiLCJKUUxpdGUiLCJleHBhbmRvIiwianFDYWNoZSIsImNhY2hlIiwianFJZCIsIl9kYXRhIiwiREFTSF9MT1dFUkNBU0VfUkVHRVhQIiwiTVNfSEFDS19SRUdFWFAiLCJNT1VTRV9FVkVOVF9NQVAiLCJtb3VzZWxlYXZlIiwibW91c2VlbnRlciIsImpxTGl0ZU1pbkVyciIsImZuQ2FtZWxDYXNlUmVwbGFjZSIsImtlYmFiVG9DYW1lbCIsIlNJTkdMRV9UQUdfUkVHRVhQIiwiSFRNTF9SRUdFWFAiLCJUQUdfTkFNRV9SRUdFWFAiLCJYSFRNTF9UQUdfUkVHRVhQIiwid3JhcE1hcCIsIm9wdGlvbiIsInRoZWFkIiwiY29sIiwidHIiLCJ0ZCIsIl9kZWZhdWx0IiwianFMaXRlSXNUZXh0Tm9kZSIsImpxTGl0ZUFjY2VwdHNEYXRhIiwianFMaXRlQnVpbGRGcmFnbWVudCIsInRtcCIsIndyYXAiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJleGVjIiwiaW5uZXJIVE1MIiwibGFzdENoaWxkIiwidGV4dENvbnRlbnQiLCJvcHRncm91cCIsInRib2R5IiwidGZvb3QiLCJjb2xncm91cCIsImNhcHRpb24iLCJ0aCIsImpxTGl0ZUNvbnRhaW5zIiwiTm9kZSIsImNvbnRhaW5zIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJhcmdJc1N0cmluZyIsImpxTGl0ZUFkZE5vZGVzIiwicGFyc2VkIiwianFMaXRlUGFyc2VIVE1MIiwianFMaXRlUmVhZHkiLCJqcUxpdGVDbG9uZSIsImpxTGl0ZURlYWxvYyIsIm9ubHlEZXNjZW5kYW50cyIsImNsZWFuRGF0YSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJqcUxpdGVPZmYiLCJ1bnN1cHBvcnRlZCIsImV4cGFuZG9TdG9yZSIsImpxTGl0ZUV4cGFuZG9TdG9yZSIsImV2ZW50cyIsImhhbmRsZSIsInJlbW92ZUhhbmRsZXIiLCJsaXN0ZW5lckZucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJqcUxpdGVSZW1vdmVEYXRhIiwiZXhwYW5kb0lkIiwibmczMzkiLCIkZGVzdHJveSIsImNyZWF0ZUlmTmVjZXNzYXJ5IiwianFMaXRlRGF0YSIsImlzU2ltcGxlU2V0dGVyIiwiaXNTaW1wbGVHZXR0ZXIiLCJtYXNzR2V0dGVyIiwianFMaXRlSGFzQ2xhc3MiLCJzZWxlY3RvciIsImpxTGl0ZVJlbW92ZUNsYXNzIiwiY3NzQ2xhc3NlcyIsImV4aXN0aW5nQ2xhc3NlcyIsIm5ld0NsYXNzZXMiLCJjc3NDbGFzcyIsImpxTGl0ZUFkZENsYXNzIiwiZWxlbWVudHMiLCJqcUxpdGVDb250cm9sbGVyIiwianFMaXRlSW5oZXJpdGVkRGF0YSIsImRvY3VtZW50RWxlbWVudCIsIm5hbWVzIiwianFMaXRlRW1wdHkiLCJqcUxpdGVSZW1vdmUiLCJrZWVwRGF0YSIsInRyaWdnZXIiLCJyZWFkeVN0YXRlIiwic2V0VGltZW91dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJKUUxpdGVQcm90b3R5cGUiLCJyZWFkeSIsIkJPT0xFQU5fQVRUUiIsIkJPT0xFQU5fRUxFTUVOVFMiLCJBTElBU0VEX0FUVFIiLCJuZ01pbmxlbmd0aCIsIm5nTWF4bGVuZ3RoIiwibmdNaW4iLCJuZ01heCIsIm5nUGF0dGVybiIsIm5nU3RlcCIsImdldEJvb2xlYW5BdHRyTmFtZSIsImJvb2xlYW5BdHRyIiwiZGVmYXVsdEhhbmRsZXJXcmFwcGVyIiwiZXZlbnQiLCJoYW5kbGVyIiwic3BlY2lhbE1vdXNlSGFuZGxlcldyYXBwZXIiLCJyZWxhdGVkIiwicmVsYXRlZFRhcmdldCIsIiQkanFMaXRlUHJvdmlkZXIiLCIkZ2V0IiwiaGFzQ2xhc3MiLCJjbGFzc2VzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhhc2hLZXkiLCJuZXh0VWlkRm4iLCJvYmpUeXBlIiwicmVtb3ZlRGF0YSIsImhhc0RhdGEiLCJpbmhlcml0ZWREYXRhIiwiaXNvbGF0ZVNjb3BlIiwicmVtb3ZlQXR0ciIsInJlbW92ZUF0dHJpYnV0ZSIsImNzc0tlYmFiVG9DYW1lbCIsInJldCIsImxvd2VyY2FzZWROYW1lIiwiaXNCb29sZWFuQXR0ciIsInRleHQiLCJnZXRUZXh0IiwiJGR2IiwibXVsdGlwbGUiLCJzZWxlY3RlZCIsImFyZzEiLCJhcmcyIiwibm9kZUNvdW50Iiwibm9kZVZhbHVlIiwib24iLCJldmVudEhhbmRsZXIiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJkZWZhdWx0UHJldmVudGVkIiwiZXZlbnRGbnMiLCJldmVudEZuc0xlbmd0aCIsImltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCIsIm9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwic3RvcFByb3BhZ2F0aW9uIiwiaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQiLCJoYW5kbGVyV3JhcHBlciIsInNwZWNpYWxIYW5kbGVyV3JhcHBlciIsImNyZWF0ZUV2ZW50SGFuZGxlciIsInR5cGVzIiwiYWRkSGFuZGxlciIsIm5vRXZlbnRMaXN0ZW5lciIsIm9mZiIsIm9uZSIsIm9uRm4iLCJyZXBsYWNlV2l0aCIsInJlcGxhY2VOb2RlIiwicmVwbGFjZUNoaWxkIiwiY2hpbGRyZW4iLCJjb250ZW50cyIsImNoaWxkIiwicHJlcGVuZCIsIndyYXBOb2RlIiwid3JhcHBlciIsImpxTGl0ZVdyYXBOb2RlIiwiZGV0YWNoIiwiYWZ0ZXIiLCJuZXdFbGVtZW50IiwidG9nZ2xlQ2xhc3MiLCJjb25kaXRpb24iLCJjbGFzc05hbWUiLCJjbGFzc0NvbmRpdGlvbiIsIm5leHQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInRyaWdnZXJIYW5kbGVyIiwiZXh0cmFQYXJhbWV0ZXJzIiwiZHVtbXlFdmVudCIsImV2ZW50Rm5zQ29weSIsImhhbmRsZXJBcmdzIiwiZXZlbnROYW1lIiwicHJldmVudERlZmF1bHQiLCJhcmczIiwidW5iaW5kIiwibmFuS2V5IiwiTmdNYXBTaGltIiwiX2tleXMiLCJfdmFsdWVzIiwiX2xhc3RLZXkiLCJfbGFzdEluZGV4IiwiX2lkeCIsIl90cmFuc2Zvcm1LZXkiLCJkZWxldGUiLCJOZ01hcCIsIiQkTWFwUHJvdmlkZXIiLCJBUlJPV19BUkciLCJGTl9BUkdTIiwiRk5fQVJHX1NQTElUIiwiRk5fQVJHIiwiU1RSSVBfQ09NTUVOVFMiLCIkaW5qZWN0b3JNaW5FcnIiLCJzdHJpbmdpZnlGbiIsImV4dHJhY3RBcmdzIiwiZm5UZXh0IiwibW9kdWxlc1RvTG9hZCIsIklOU1RBTlRJQVRJTkciLCJwcm92aWRlclN1ZmZpeCIsImxvYWRlZE1vZHVsZXMiLCJwcm92aWRlckNhY2hlIiwicHJvdmlkZXIiLCJzdXBwb3J0T2JqZWN0IiwiZmFjdG9yeSIsInNlcnZpY2UiLCJpbnN0YW50aWF0ZSIsImNvbnN0YW50IiwiaW5zdGFuY2VDYWNoZSIsImRlY29yYXRvciIsInNlcnZpY2VOYW1lIiwiZGVjb3JGbiIsIm9yaWdQcm92aWRlciIsInByb3ZpZGVySW5qZWN0b3IiLCJvcmlnJGdldCIsIm9yaWdJbnN0YW5jZSIsImluc3RhbmNlSW5qZWN0b3IiLCIkZGVsZWdhdGUiLCJjcmVhdGVJbnRlcm5hbEluamVjdG9yIiwiY2FsbGVyIiwicHJvdG9JbnN0YW5jZUluamVjdG9yIiwicnVuQmxvY2tzIiwibG9hZE1vZHVsZXMiLCJsb2FkTmV3TW9kdWxlcyIsIm1vZHMiLCJkZWxlZ2F0ZSIsInByb3ZpZGVyXyIsImZhY3RvcnlGbiIsImVuZm9yY2UiLCJlbmZvcmNlUmV0dXJuVmFsdWUiLCJtb2R1bGVGbiIsInJlcXVpcmVzIiwiX3J1bkJsb2NrcyIsInJ1bkludm9rZVF1ZXVlIiwiX2ludm9rZVF1ZXVlIiwiX2NvbmZpZ0Jsb2NrcyIsInN0YWNrIiwicXVldWUiLCJpbnZva2VBcmdzIiwiZ2V0U2VydmljZSIsImVyciIsInNoaWZ0IiwiaW5qZWN0aW9uQXJncyIsIiQkYW5ub3RhdGUiLCJmdW5jIiwiJCRuZ0lzQ2xhc3MiLCJpc0NsYXNzIiwiVHlwZSIsImFubm90YXRlIiwiaGFzIiwiJEFuY2hvclNjcm9sbFByb3ZpZGVyIiwiYXV0b1Njcm9sbGluZ0VuYWJsZWQiLCJkaXNhYmxlQXV0b1Njcm9sbGluZyIsIiR3aW5kb3ciLCIkbG9jYXRpb24iLCIkcm9vdFNjb3BlIiwic2Nyb2xsVG8iLCJzY3JvbGxJbnRvVmlldyIsIm9mZnNldCIsInNjcm9sbCIsInlPZmZzZXQiLCJnZXRDb21wdXRlZFN0eWxlIiwicG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJib3R0b20iLCJnZXRZT2Zmc2V0IiwiZWxlbVRvcCIsInRvcCIsInNjcm9sbEJ5IiwiaGFzaCIsImVsbSIsImdldEVsZW1lbnRCeUlkIiwic29tZSIsImdldEZpcnN0QW5jaG9yIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJuZXdWYWwiLCJvbGRWYWwiLCJhY3Rpb24iLCJ3aW4iLCJqcUxpdGVEb2N1bWVudExvYWRlZCIsImxhc3QiLCJhbm9uRm4iLCJ1bmRlcnNjb3JlIiwiJGFuaW1hdGVNaW5FcnIiLCJFTEVNRU5UX05PREUiLCJtZXJnZUNsYXNzZXMiLCJwcmVwYXJlQW5pbWF0ZU9wdGlvbnMiLCIkJENvcmVBbmltYXRlSnNQcm92aWRlciIsIiQkQ29yZUFuaW1hdGVRdWV1ZVByb3ZpZGVyIiwicG9zdERpZ2VzdFF1ZXVlIiwicG9zdERpZ2VzdEVsZW1lbnRzIiwiJCRBbmltYXRlUnVubmVyIiwiZW5hYmxlZCIsInBpbiIsImRvbU9wZXJhdGlvbiIsImZyb20iLCJ0byIsImFkZCIsImNsYXNzZXNBZGRlZCIsInVwZGF0ZURhdGEiLCJjbGFzc2VzUmVtb3ZlZCIsIiQkcG9zdERpZ2VzdCIsImhhbmRsZUNTU0NsYXNzQ2hhbmdlcyIsImFkZFJlbW92ZUNsYXNzZXNQb3N0RGlnZXN0IiwicnVubmVyIiwiY29tcGxldGUiLCJjaGFuZ2VkIiwiZXhpc3RpbmciLCJrbGFzcyIsInNwbGl0Q2xhc3NlcyIsInRvQWRkIiwidG9SZW1vdmUiLCJzdGF0dXMiLCIkQW5pbWF0ZVByb3ZpZGVyIiwiY2xhc3NOYW1lRmlsdGVyIiwiY3VzdG9tRmlsdGVyIiwiJCRyZWdpc3RlcmVkQW5pbWF0aW9ucyIsInJlZ2lzdGVyIiwic3Vic3RyIiwiZmlsdGVyRm4iLCJleHByZXNzaW9uIiwiJCRhbmltYXRlUXVldWUiLCJkb21JbnNlcnQiLCJwYXJlbnRFbGVtZW50IiwiYWZ0ZXJFbGVtZW50IiwiYWZ0ZXJOb2RlIiwiZXh0cmFjdEVsZW1lbnROb2RlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNhbmNlbCIsImVuZCIsImVudGVyIiwibW92ZSIsImxlYXZlIiwiYWRkY2xhc3MiLCJzZXRDbGFzcyIsImFuaW1hdGUiLCJ0ZW1wQ2xhc3NlcyIsIiQkQW5pbWF0ZUFzeW5jUnVuRmFjdG9yeVByb3ZpZGVyIiwiJCRyQUYiLCJ3YWl0UXVldWUiLCJ3YWl0Rm9yVGljayIsInBhc3NlZCIsIiQkQW5pbWF0ZVJ1bm5lckZhY3RvcnlQcm92aWRlciIsIiRzbmlmZmVyIiwiJCRhbmltYXRlQXN5bmNSdW4iLCIkJGlzRG9jdW1lbnRIaWRkZW4iLCIkdGltZW91dCIsIkFuaW1hdGVSdW5uZXIiLCJzZXRIb3N0IiwicmFmVGljayIsIl9kb25lQ2FsbGJhY2tzIiwiX3RpY2siLCJ0aW1lb3V0VGljayIsIl9zdGF0ZSIsImNoYWluIiwicmVzcG9uc2UiLCJydW5uZXJzIiwiY291bnQiLCJvblByb2dyZXNzIiwiZG9uZSIsInByb2dyZXNzIiwiZ2V0UHJvbWlzZSIsInJlc29sdmUiLCJyZXNvbHZlSGFuZGxlciIsInJlamVjdEhhbmRsZXIiLCJmaW5hbGx5IiwicGF1c2UiLCJyZXN1bWUiLCJfcmVzb2x2ZSIsIiRDb3JlQW5pbWF0ZUNzc1Byb3ZpZGVyIiwiaW5pdGlhbE9wdGlvbnMiLCIkJHByZXBhcmVkIiwiY2xlYW51cFN0eWxlcyIsImNsb3NlZCIsInJ1biIsImFwcGx5QW5pbWF0aW9uQ29udGVudHMiLCIkQnJvd3NlclByb3ZpZGVyIiwiJGxvZyIsIiRkb2N1bWVudCIsImhpc3RvcnkiLCJjbGVhclRpbWVvdXQiLCJwZW5kaW5nRGVmZXJJZHMiLCJpc01vY2siLCJvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCIsIm91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcyIsImNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0IiwicG9wIiwiJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCIsIiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQiLCJub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzIiwiY2FjaGVkU3RhdGUiLCJsYXN0SGlzdG9yeVN0YXRlIiwibGFzdEJyb3dzZXJVcmwiLCJiYXNlRWxlbWVudCIsInBlbmRpbmdMb2NhdGlvbiIsImdldEN1cnJlbnRTdGF0ZSIsImNhY2hlU3RhdGUiLCJzYW1lU3RhdGUiLCJzYW1lQmFzZSIsInN0cmlwSGFzaCIsImdldEhhc2giLCJ1cmxDaGFuZ2VMaXN0ZW5lcnMiLCJ1cmxDaGFuZ2VJbml0IiwiY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UiLCJmaXJlU3RhdGVPclVybENoYW5nZSIsImxhc3RDYWNoZWRTdGF0ZSIsInByZXZMYXN0SGlzdG9yeVN0YXRlIiwibGlzdGVuZXIiLCJvblVybENoYW5nZSIsIiQkYXBwbGljYXRpb25EZXN0cm95ZWQiLCIkJGNoZWNrVXJsQ2hhbmdlIiwiYmFzZUhyZWYiLCJkZWZlciIsImRlbGF5IiwidGltZW91dElkIiwiZGVmZXJJZCIsIiRDYWNoZUZhY3RvcnlQcm92aWRlciIsImNhY2hlcyIsImNhY2hlRmFjdG9yeSIsImNhY2hlSWQiLCJzaXplIiwic3RhdHMiLCJjYXBhY2l0eSIsIk1BWF9WQUxVRSIsImxydUhhc2giLCJmcmVzaEVuZCIsInN0YWxlRW5kIiwicHV0IiwicmVmcmVzaCIsImxydUVudHJ5IiwicmVtb3ZlQWxsIiwiZGVzdHJveSIsImluZm8iLCJlbnRyeSIsIm5leHRFbnRyeSIsInByZXZFbnRyeSIsIiRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIiLCIkY2FjaGVGYWN0b3J5IiwiJGNvbXBpbGVNaW5FcnIiLCJfVU5JTklUSUFMSVpFRF9WQUxVRSIsIiRDb21waWxlUHJvdmlkZXIiLCIkJHNhbml0aXplVXJpUHJvdmlkZXIiLCJoYXNEaXJlY3RpdmVzIiwiU3VmZml4IiwiQ09NTUVOVF9ESVJFQ1RJVkVfUkVHRVhQIiwiQ0xBU1NfRElSRUNUSVZFX1JFR0VYUCIsIkFMTF9PUl9OT1RISU5HX0FUVFJTIiwiaXRlbXMiLCJtYWtlTWFwIiwiUkVRVUlSRV9QUkVGSVhfUkVHRVhQIiwiRVZFTlRfSEFORExFUl9BVFRSX1JFR0VYUCIsImJpbmRpbmdDYWNoZSIsInBhcnNlSXNvbGF0ZUJpbmRpbmdzIiwiZGlyZWN0aXZlTmFtZSIsImlzQ29udHJvbGxlciIsIkxPQ0FMX1JFR0VYUCIsImJpbmRpbmdzIiwiZGVmaW5pdGlvbiIsInNjb3BlTmFtZSIsIm9wdGlvbmFsIiwiYXR0ck5hbWUiLCJwYXJzZURpcmVjdGl2ZUJpbmRpbmdzIiwiZGlyZWN0aXZlIiwiYmluZFRvQ29udHJvbGxlciIsInJlZ2lzdGVyRGlyZWN0aXZlIiwiZGlyZWN0aXZlRmFjdG9yeSIsImFzc2VydFZhbGlkRGlyZWN0aXZlTmFtZSIsIiRleGNlcHRpb25IYW5kbGVyIiwiZGlyZWN0aXZlcyIsInByaW9yaXR5IiwicmVxdWlyZSIsImdldERpcmVjdGl2ZVJlcXVpcmUiLCJyZXN0cmljdCIsImdldERpcmVjdGl2ZVJlc3RyaWN0IiwiJCRtb2R1bGVOYW1lIiwiY29tcG9uZW50IiwicmVnaXN0ZXJDb21wb25lbnQiLCJtYWtlSW5qZWN0YWJsZSIsInRFbGVtZW50IiwidEF0dHJzIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJkZG8iLCJjb250cm9sbGVyQXMiLCJpZGVudCIsIkNOVFJMX1JFRyIsImlkZW50aWZpZXJGb3JDb250cm9sbGVyIiwidHJhbnNjbHVkZSIsImFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0IiwicmVnZXhwIiwiaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0IiwicHJlQXNzaWduQmluZGluZ3NFbmFibGVkIiwic3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkIiwiVFRMIiwib25DaGFuZ2VzVHRsIiwiY29tbWVudERpcmVjdGl2ZXNFbmFibGVkQ29uZmlnIiwiY29tbWVudERpcmVjdGl2ZXNFbmFibGVkIiwiY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZyIsImNzc0NsYXNzRGlyZWN0aXZlc0VuYWJsZWQiLCIkaW50ZXJwb2xhdGUiLCIkdGVtcGxhdGVSZXF1ZXN0IiwiJHBhcnNlIiwiJGNvbnRyb2xsZXIiLCIkc2NlIiwiJGFuaW1hdGUiLCIkJHNhbml0aXplVXJpIiwib25DaGFuZ2VzUXVldWUiLCJTSU1QTEVfQVRUUl9OQU1FIiwic3BlY2lhbEF0dHJIb2xkZXIiLCJmbHVzaE9uQ2hhbmdlc1F1ZXVlIiwiZXJyb3JzIiwiQXR0cmlidXRlcyIsImF0dHJpYnV0ZXNUb0NvcHkiLCIkYXR0ciIsIiQkZWxlbWVudCIsInNhZmVBZGRDbGFzcyIsIiRub3JtYWxpemUiLCJkaXJlY3RpdmVOb3JtYWxpemUiLCIkYWRkQ2xhc3MiLCJjbGFzc1ZhbCIsIiRyZW1vdmVDbGFzcyIsIiR1cGRhdGVDbGFzcyIsIm9sZENsYXNzZXMiLCJ0b2tlbkRpZmZlcmVuY2UiLCIkc2V0Iiwid3JpdGVBdHRyIiwiYm9vbGVhbktleSIsImFsaWFzZWRLZXkiLCJnZXRBbGlhc2VkQXR0ck5hbWUiLCJvYnNlcnZlciIsInRyaW1tZWRTcmNzZXQiLCJyYXdVcmlzIiwibmJyVXJpc1dpdGgycGFydHMiLCJmbG9vciIsImlubmVySWR4IiwibGFzdFR1cGxlIiwiYXR0cmlidXRlIiwicmVtb3ZlTmFtZWRJdGVtIiwic2V0TmFtZWRJdGVtIiwic2V0U3BlY2lhbEF0dHIiLCIkJG9ic2VydmVycyIsIiRvYnNlcnZlIiwibGlzdGVuZXJzIiwiJCRpbnRlciIsInN0YXJ0U3ltYm9sIiwiZW5kU3ltYm9sIiwiZGVub3JtYWxpemVUZW1wbGF0ZSIsIk5HX0FUVFJfQklORElORyIsIk1VTFRJX0VMRU1FTlRfRElSX1JFIiwiJCRhZGRCaW5kaW5nSW5mbyIsImJpbmRpbmciLCIkJGFkZEJpbmRpbmdDbGFzcyIsIiQkYWRkU2NvcGVJbmZvIiwiaXNvbGF0ZWQiLCJub1RlbXBsYXRlIiwiZGF0YU5hbWUiLCIkJGFkZFNjb3BlQ2xhc3MiLCIkJGNyZWF0ZUNvbW1lbnQiLCJjb21tZW50IiwiY3JlYXRlQ29tbWVudCIsIiRjb21waWxlTm9kZXMiLCJ0cmFuc2NsdWRlRm4iLCJtYXhQcmlvcml0eSIsImlnbm9yZURpcmVjdGl2ZSIsInByZXZpb3VzQ29tcGlsZUNvbnRleHQiLCJjb21wb3NpdGVMaW5rRm4iLCJjb21waWxlTm9kZXMiLCJuYW1lc3BhY2UiLCJjbG9uZUNvbm5lY3RGbiIsIm5lZWRzTmV3U2NvcGUiLCIkcGFyZW50IiwiJG5ldyIsIiRsaW5rTm9kZSIsInBhcmVudEJvdW5kVHJhbnNjbHVkZUZuIiwidHJhbnNjbHVkZUNvbnRyb2xsZXJzIiwiZnV0dXJlUGFyZW50RWxlbWVudCIsIiQkYm91bmRUcmFuc2NsdWRlIiwiZGV0ZWN0TmFtZXNwYWNlRm9yQ2hpbGRFbGVtZW50cyIsIndyYXBUZW1wbGF0ZSIsImNvbnRyb2xsZXJOYW1lIiwiaW5zdGFuY2UiLCJub2RlTGlzdCIsIiRyb290RWxlbWVudCIsIm5vZGVMaW5rRm4iLCJjaGlsZExpbmtGbiIsImxpbmtGbkZvdW5kIiwibm9kZUxpbmtGbkZvdW5kIiwibGlua0ZucyIsIm5vdExpdmVMaXN0IiwibWVyZ2VDb25zZWN1dGl2ZVRleHROb2RlcyIsImNvbGxlY3REaXJlY3RpdmVzIiwiYXBwbHlEaXJlY3RpdmVzVG9Ob2RlIiwidGVybWluYWwiLCJ0cmFuc2NsdWRlT25UaGlzRWxlbWVudCIsInRlbXBsYXRlT25UaGlzRWxlbWVudCIsImNoaWxkU2NvcGUiLCJjaGlsZEJvdW5kVHJhbnNjbHVkZUZuIiwic3RhYmxlTm9kZUxpc3QiLCJub2RlTGlzdExlbmd0aCIsImNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuIiwic2libGluZyIsInByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4iLCJib3VuZFRyYW5zY2x1ZGVGbiIsInRyYW5zY2x1ZGVkU2NvcGUiLCJjbG9uZUZuIiwiY29udHJvbGxlcnMiLCJjb250YWluaW5nU2NvcGUiLCIkJHRyYW5zY2x1ZGVkIiwiYm91bmRTbG90cyIsIiQkc2xvdHMiLCJzbG90TmFtZSIsImF0dHJzTWFwIiwiYWRkRGlyZWN0aXZlIiwibk5hbWUiLCJuZ0F0dHJOYW1lIiwiaXNOZ0F0dHIiLCJuQXR0cnMiLCJhdHRyU3RhcnROYW1lIiwiYXR0ckVuZE5hbWUiLCJQUkVGSVhfUkVHRVhQIiwibXVsdGlFbGVtZW50TWF0Y2giLCJkaXJlY3RpdmVJc011bHRpRWxlbWVudCIsImFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZSIsImFuaW1WYWwiLCJpbnRlcnBvbGF0ZUZuIiwidGVtcGxhdGVOb2RlIiwidGVtcGxhdGVOb2RlUGFyZW50IiwiaGFzQ29tcGlsZVBhcmVudCIsImV4cHJlc3Npb25zIiwiYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlIiwiY29sbGVjdENvbW1lbnREaXJlY3RpdmVzIiwiYnlQcmlvcml0eSIsImdyb3VwU2NhbiIsImF0dHJTdGFydCIsImF0dHJFbmQiLCJkZXB0aCIsImdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyIiwibGlua0ZuIiwiY29tcGlsYXRpb25HZW5lcmF0b3IiLCJlYWdlciIsImNvbXBpbGVkIiwiY29tcGlsZU5vZGUiLCJ0ZW1wbGF0ZUF0dHJzIiwianFDb2xsZWN0aW9uIiwib3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlIiwicHJlTGlua0ZucyIsInBvc3RMaW5rRm5zIiwiJHRlbXBsYXRlIiwiZGlyZWN0aXZlVmFsdWUiLCJ0ZXJtaW5hbFByaW9yaXR5IiwibmV3U2NvcGVEaXJlY3RpdmUiLCJjb250cm9sbGVyRGlyZWN0aXZlcyIsIm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSIsInRlbXBsYXRlRGlyZWN0aXZlIiwibm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSIsImhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUiLCJoYXNUZW1wbGF0ZSIsImhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlIiwiJGNvbXBpbGVOb2RlIiwicmVwbGFjZURpcmVjdGl2ZSIsImNoaWxkVHJhbnNjbHVkZUZuIiwiZGlkU2NhbkZvck11bHRpcGxlVHJhbnNjbHVzaW9uIiwibWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciIsIiQkc3RhcnQiLCIkJGVuZCIsImFzc2VydE5vRHVwbGljYXRlIiwiJCR0bGIiLCJjYW5kaWRhdGVEaXJlY3RpdmUiLCJzY2FubmluZ0luZGV4IiwiJCRwYXJlbnROb2RlIiwic2xvdHMiLCJzbG90TWFwIiwiZmlsbGVkU2xvdHMiLCJlbGVtZW50U2VsZWN0b3IiLCJmaWxsZWQiLCIkJGlzb2xhdGVTY29wZSIsIiQkbmV3U2NvcGUiLCJyZW1vdmVDb21tZW50cyIsInRlbXBsYXRlTmFtZXNwYWNlIiwibmV3VGVtcGxhdGVBdHRycyIsInRlbXBsYXRlRGlyZWN0aXZlcyIsInVucHJvY2Vzc2VkRGlyZWN0aXZlcyIsIm1hcmtEaXJlY3RpdmVTY29wZSIsIm1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzIiwiY29tcGlsZVRlbXBsYXRlVXJsIiwiJCRvcmlnaW5hbERpcmVjdGl2ZSIsImFkZExpbmtGbnMiLCJwcmUiLCJwb3N0IiwibWF4IiwiY2xvbmVBbmRBbm5vdGF0ZUZuIiwibGlua05vZGUiLCJjb250cm9sbGVyU2NvcGUiLCJlbGVtZW50Q29udHJvbGxlcnMiLCJzY29wZUJpbmRpbmdJbmZvIiwiY2xvbmVBdHRhY2hGbiIsInNjb3BlVG9DaGlsZCIsInNsb3RUcmFuc2NsdWRlRm4iLCJpc1Nsb3RGaWxsZWQiLCJjb250cm9sbGVyS2V5IiwiJHNjb3BlIiwiJHRyYW5zY2x1ZGUiLCJjb250cm9sbGVySW5zdGFuY2UiLCJzZXR1cENvbnRyb2xsZXJzIiwiJCRpc29sYXRlQmluZGluZ3MiLCJpbml0aWFsaXplRGlyZWN0aXZlQmluZGluZ3MiLCJyZW1vdmVXYXRjaGVzIiwiJG9uIiwiY29udHJvbGxlckRpcmVjdGl2ZSIsIiQkYmluZGluZ3MiLCJiaW5kaW5nSW5mbyIsImNvbnRyb2xsZXJSZXN1bHQiLCJnZXRDb250cm9sbGVycyIsIiRvbkNoYW5nZXMiLCJpbml0aWFsQ2hhbmdlcyIsIiRvbkluaXQiLCIkZG9DaGVjayIsIiRvbkRlc3Ryb3kiLCJpbnZva2VMaW5rRm4iLCIkcG9zdExpbmsiLCJpbmhlcml0VHlwZSIsIm5ld1Njb3BlIiwidERpcmVjdGl2ZXMiLCJzdGFydEF0dHJOYW1lIiwiZW5kQXR0ck5hbWUiLCJtdWx0aUVsZW1lbnQiLCJzcmNBdHRyIiwiZHN0QXR0ciIsImFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuIiwiYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuIiwibGlua1F1ZXVlIiwiYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSIsIm9yaWdBc3luY0RpcmVjdGl2ZSIsImRlcml2ZWRTeW5jRGlyZWN0aXZlIiwidGVtcFRlbXBsYXRlQXR0cnMiLCJiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlIiwibGlua1Jvb3RFbGVtZW50IiwiJCRkZXN0cm95ZWQiLCJpZ25vcmVDaGlsZExpbmtGbiIsImRpZmYiLCJ3aGF0IiwicHJldmlvdXNEaXJlY3RpdmUiLCJ3cmFwTW9kdWxlTmFtZUlmRGVmaW5lZCIsIm1vZHVsZU5hbWUiLCJ0cnVzdGVkQ29udGV4dCIsImF0dHJOb3JtYWxpemVkTmFtZSIsIkhUTUwiLCJSRVNPVVJDRV9VUkwiLCJnZXRUcnVzdGVkQ29udGV4dCIsIm11c3RIYXZlRXhwcmVzc2lvbiIsImFsbE9yTm90aGluZyIsIm5ld1ZhbHVlIiwiJCRzY29wZSIsIm9sZFZhbHVlIiwiZWxlbWVudHNUb1JlbW92ZSIsIm5ld05vZGUiLCJmaXJzdEVsZW1lbnRUb1JlbW92ZSIsInJlbW92ZUNvdW50IiwiajIiLCJhbm5vdGF0aW9uIiwic3RyaWN0QmluZGluZ3NDaGVjayIsImNoYW5nZXMiLCJyZW1vdmVXYXRjaENvbGxlY3Rpb24iLCJyZWNvcmRDaGFuZ2VzIiwiY3VycmVudFZhbHVlIiwicHJldmlvdXNWYWx1ZSIsInRyaWdnZXJPbkNoYW5nZXNIb29rIiwiU2ltcGxlQ2hhbmdlIiwibGFzdFZhbHVlIiwicGFyZW50R2V0IiwicGFyZW50U2V0IiwiY29tcGFyZSIsInJlbW92ZVdhdGNoIiwibGl0ZXJhbCIsInBhcmVudFZhbHVlV2F0Y2giLCJwYXJlbnRWYWx1ZSIsIiRzdGF0ZWZ1bCIsIiR3YXRjaENvbGxlY3Rpb24iLCJkZWVwV2F0Y2giLCJpbml0aWFsVmFsdWUiLCJwcmV2aW91cyIsImN1cnJlbnQiLCJpc0ZpcnN0Q2hhbmdlIiwiU1BFQ0lBTF9DSEFSU19SRUdFWFAiLCJfIiwic3RyMSIsInN0cjIiLCJ0b2tlbnMxIiwidG9rZW5zMiIsIm91dGVyIiwianFOb2RlcyIsIiRjb250cm9sbGVyTWluRXJyIiwiJENvbnRyb2xsZXJQcm92aWRlciIsImdsb2JhbHMiLCJhbGxvd0dsb2JhbHMiLCJsYXRlciIsImlkZW50aWZpZXIiLCJjb250cm9sbGVyUHJvdG90eXBlIiwiYWRkSWRlbnRpZmllciIsIiREb2N1bWVudFByb3ZpZGVyIiwiJCRJc0RvY3VtZW50SGlkZGVuUHJvdmlkZXIiLCJkb2MiLCJoaWRkZW4iLCJjaGFuZ2VMaXN0ZW5lciIsIiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIiLCJleGNlcHRpb24iLCJjYXVzZSIsIiQkRm9yY2VSZWZsb3dQcm92aWRlciIsImRvbU5vZGUiLCJib2R5Iiwib2Zmc2V0V2lkdGgiLCJBUFBMSUNBVElPTl9KU09OIiwiQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04iLCJDb250ZW50LVR5cGUiLCJKU09OX1NUQVJUIiwiSlNPTl9FTkRTIiwiWyIsInsiLCJKU09OX1BST1RFQ1RJT05fUFJFRklYIiwiJGh0dHBNaW5FcnIiLCJzZXJpYWxpemVWYWx1ZSIsInRvSVNPU3RyaW5nIiwiJEh0dHBQYXJhbVNlcmlhbGl6ZXJQcm92aWRlciIsInBhcmFtcyIsIiRIdHRwUGFyYW1TZXJpYWxpemVySlFMaWtlUHJvdmlkZXIiLCJzZXJpYWxpemUiLCJ0b1NlcmlhbGl6ZSIsInRvcExldmVsIiwiZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybSIsImhlYWRlcnMiLCJ0ZW1wRGF0YSIsImNvbnRlbnRUeXBlIiwiaGFzSnNvbkNvbnRlbnRUeXBlIiwianNvblN0YXJ0IiwiaXNKc29uTGlrZSIsInBhcnNlSGVhZGVycyIsImZpbGxJblBhcnNlZCIsImxpbmUiLCJoZWFkZXJWYWwiLCJoZWFkZXJLZXkiLCJoZWFkZXJzR2V0dGVyIiwiaGVhZGVyc09iaiIsInRyYW5zZm9ybURhdGEiLCJmbnMiLCJpc1N1Y2Nlc3MiLCIkSHR0cFByb3ZpZGVyIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaXNGaWxlIiwiaXNCbG9iIiwiaXNGb3JtRGF0YSIsImNvbW1vbiIsIkFjY2VwdCIsInBhdGNoIiwieHNyZkNvb2tpZU5hbWUiLCJ4c3JmSGVhZGVyTmFtZSIsInBhcmFtU2VyaWFsaXplciIsImpzb25wQ2FsbGJhY2tQYXJhbSIsInVzZUFwcGx5QXN5bmMiLCJpbnRlcmNlcHRvckZhY3RvcmllcyIsImludGVyY2VwdG9ycyIsIiRicm93c2VyIiwiJGh0dHBCYWNrZW5kIiwiJCRjb29raWVSZWFkZXIiLCJkZWZhdWx0Q2FjaGUiLCJyZXZlcnNlZEludGVyY2VwdG9ycyIsIiRodHRwIiwicmVxdWVzdENvbmZpZyIsIm1ldGhvZCIsImRlZkhlYWRlck5hbWUiLCJsb3dlcmNhc2VEZWZIZWFkZXJOYW1lIiwicmVxSGVhZGVyTmFtZSIsImRlZkhlYWRlcnMiLCJyZXFIZWFkZXJzIiwiZGVmYXVsdEhlYWRlcnNJdGVyYXRpb24iLCJoZWFkZXJDb250ZW50IiwicHJvY2Vzc2VkSGVhZGVycyIsImhlYWRlckZuIiwiaGVhZGVyIiwiZXhlY3V0ZUhlYWRlckZucyIsIm1lcmdlSGVhZGVycyIsInJlcXVlc3RJbnRlcmNlcHRvcnMiLCJyZXNwb25zZUludGVyY2VwdG9ycyIsImludGVyY2VwdG9yIiwicmVxdWVzdCIsInJlcXVlc3RFcnJvciIsInJlc3BvbnNlRXJyb3IiLCJjaGFpbkludGVyY2VwdG9ycyIsInJlcURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJjYWNoZWRSZXNwIiwiZGVmZXJyZWQiLCJpc0pzb25wIiwiZ2V0VHJ1c3RlZFJlc291cmNlVXJsIiwic2VyaWFsaXplZFBhcmFtcyIsImJ1aWxkVXJsIiwiY2JLZXkiLCJzYW5pdGl6ZUpzb25wQ2FsbGJhY2tQYXJhbSIsInBlbmRpbmdSZXF1ZXN0cyIsInJlbW92ZVBlbmRpbmdSZXEiLCJyZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQiLCJyZXNvbHZlUHJvbWlzZSIsInhzcmZWYWx1ZSIsInVybElzU2FtZU9yaWdpbiIsImhlYWRlcnNTdHJpbmciLCJzdGF0dXNUZXh0IiwieGhyU3RhdHVzIiwicmVzb2x2ZUh0dHBQcm9taXNlIiwiJGFwcGx5QXN5bmMiLCIkJHBoYXNlIiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsImNyZWF0ZUFwcGx5SGFuZGxlcnMiLCJldmVudEhhbmRsZXJzIiwidXBsb2FkRXZlbnRIYW5kbGVycyIsImFwcGx5SGFuZGxlcnMiLCJjYWxsRXZlbnRIYW5kbGVyIiwic2VuZFJlcSIsInRoZW5GbiIsInJlamVjdEZuIiwicmVzcCIsImludGVyY2VwdG9yRmFjdG9yeSIsImNyZWF0ZVNob3J0TWV0aG9kcyIsImNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhIiwiJHhockZhY3RvcnlQcm92aWRlciIsIlhNTEh0dHBSZXF1ZXN0IiwiJEh0dHBCYWNrZW5kUHJvdmlkZXIiLCIkanNvbnBDYWxsYmFja3MiLCIkeGhyRmFjdG9yeSIsImNyZWF0ZVhociIsIiRicm93c2VyRGVmZXIiLCJjYWxsYmFja3MiLCJyYXdEb2N1bWVudCIsImNhbGxiYWNrUGF0aCIsImNyZWF0ZUNhbGxiYWNrIiwianNvbnBEb25lIiwiYXN5bmMiLCJ3YXNDYWxsZWQiLCJqc29ucFJlcSIsImdldFJlc3BvbnNlIiwiY29tcGxldGVSZXF1ZXN0IiwicmVtb3ZlQ2FsbGJhY2siLCJ4aHIiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsInJlc3BvbnNlVGV4dCIsInVybFJlc29sdmUiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJvbmVycm9yIiwib25hYm9ydCIsIm9udGltZW91dCIsInVwbG9hZCIsInNlbmQiLCJ0aW1lb3V0UmVxdWVzdCIsImFib3J0IiwiY3JlYXRlSHR0cEJhY2tlbmQiLCIkaW50ZXJwb2xhdGVNaW5FcnIiLCIkSW50ZXJwb2xhdGVQcm92aWRlciIsInN0YXJ0U3ltYm9sTGVuZ3RoIiwiZW5kU3ltYm9sTGVuZ3RoIiwiZXNjYXBlZFN0YXJ0UmVnZXhwIiwiZXNjYXBlIiwiZXNjYXBlZEVuZFJlZ2V4cCIsInVuZXNjYXBlVGV4dCIsImNvbnN0YW50V2F0Y2hEZWxlZ2F0ZSIsIm9iamVjdEVxdWFsaXR5IiwiY29uc3RhbnRJbnRlcnAiLCJ1bndhdGNoIiwiZXhwIiwiJCR3YXRjaERlbGVnYXRlIiwiZW5kSW5kZXgiLCJwYXJzZUZucyIsInRleHRMZW5ndGgiLCJleHByZXNzaW9uUG9zaXRpb25zIiwicGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvciIsInRocm93Tm9jb25jYXQiLCJjb21wdXRlIiwiZ2V0VmFsdWUiLCJnZXRUcnVzdGVkIiwiaW50ZXJyIiwiJHdhdGNoR3JvdXAiLCJvbGRWYWx1ZXMiLCJjdXJyVmFsdWUiLCIkSW50ZXJ2YWxQcm92aWRlciIsIiQkcSIsImludGVydmFscyIsImludGVydmFsIiwiaW52b2tlQXBwbHkiLCJoYXNQYXJhbXMiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJpdGVyYXRpb24iLCJza2lwQXBwbHkiLCIkJGludGVydmFsSWQiLCJub3RpZnkiLCJtYXJrUUV4Y2VwdGlvbkhhbmRsZWQiLCIkanNvbnBDYWxsYmFja3NQcm92aWRlciIsImNhbGxiYWNrTWFwIiwiY2FsbGJhY2tJZCIsIiQkY291bnRlciIsImNhbGxlZCIsIlBBVEhfTUFUQ0giLCJERUZBVUxUX1BPUlRTIiwiaHR0cCIsImh0dHBzIiwiZnRwIiwiJGxvY2F0aW9uTWluRXJyIiwiZW5jb2RlUGF0aCIsInNlZ21lbnRzIiwicGFyc2VBYnNvbHV0ZVVybCIsImFic29sdXRlVXJsIiwibG9jYXRpb25PYmoiLCJwYXJzZWRVcmwiLCIkJHByb3RvY29sIiwiJCRob3N0IiwiaG9zdG5hbWUiLCIkJHBvcnQiLCJwb3J0IiwiRE9VQkxFX1NMQVNIX1JFR0VYIiwicGFyc2VBcHBVcmwiLCJodG1sNU1vZGUiLCJwcmVmaXhlZCIsIiQkcGF0aCIsImRlY29kZVBhdGgiLCIkJHNlYXJjaCIsInNlYXJjaCIsIiQkaGFzaCIsInN0YXJ0c1dpdGgiLCJzdHJpcEJhc2VVcmwiLCJ0cmltRW1wdHlIYXNoIiwiTG9jYXRpb25IdG1sNVVybCIsImFwcEJhc2UiLCJhcHBCYXNlTm9GaWxlIiwiYmFzZVByZWZpeCIsIiQkaHRtbDUiLCIkJHBhcnNlIiwicGF0aFVybCIsIiQkY29tcG9zZSIsIiQkdXJsIiwiJCRhYnNVcmwiLCIkJHVybFVwZGF0ZWRCeUxvY2F0aW9uIiwiJCRwYXJzZUxpbmtVcmwiLCJyZWxIcmVmIiwiYXBwVXJsIiwicHJldkFwcFVybCIsInJld3JpdHRlblVybCIsIkxvY2F0aW9uSGFzaGJhbmdVcmwiLCJoYXNoUHJlZml4Iiwid2l0aG91dEhhc2hVcmwiLCJ3aXRob3V0QmFzZVVybCIsImZpcnN0UGF0aFNlZ21lbnRNYXRjaCIsIndpbmRvd3NGaWxlUGF0aEV4cCIsInJlbW92ZVdpbmRvd3NEcml2ZU5hbWUiLCJMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCIsImxvY2F0aW9uUHJvdG90eXBlIiwiJCRyZXBsYWNlIiwiYWJzVXJsIiwibG9jYXRpb25HZXR0ZXIiLCJsb2NhdGlvbkdldHRlclNldHRlciIsInBhcmFtVmFsdWUiLCJwcmVwcm9jZXNzIiwiJExvY2F0aW9uUHJvdmlkZXIiLCJyZXF1aXJlQmFzZSIsInJld3JpdGVMaW5rcyIsIkxvY2F0aW9uTW9kZSIsImluaXRpYWxVcmwiLCJzZXJ2ZXJCYXNlIiwibGFzdEluZGV4T2YiLCJzdHJpcEZpbGUiLCIkJHN0YXRlIiwiSUdOT1JFX1VSSV9SRUdFWFAiLCJzZXRCcm93c2VyVXJsV2l0aEZhbGxiYWNrIiwib2xkVXJsIiwib2xkU3RhdGUiLCJjdHJsS2V5IiwibWV0YUtleSIsInNoaWZ0S2V5Iiwid2hpY2giLCJidXR0b24iLCJhYnNIcmVmIiwiaW5pdGlhbGl6aW5nIiwibmV3U3RhdGUiLCIkYnJvYWRjYXN0IiwiYWZ0ZXJMb2NhdGlvbkNoYW5nZSIsIiRkaWdlc3QiLCJjdXJyZW50UmVwbGFjZSIsInVybE9yU3RhdGVDaGFuZ2VkIiwiJExvZ1Byb3ZpZGVyIiwiZGVidWciLCJkZWJ1Z0VuYWJsZWQiLCJmbGFnIiwiZm9ybWF0U3RhY2tUcmFjZSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImxvZyIsImNvbnNvbGVMb2ciLCJ3YXJuIiwibG9nRm4iLCJzb3VyY2VVUkwiLCJmb3JtYXRFcnJvciIsIkxvY2F0aW9uIiwiJHBhcnNlTWluRXJyIiwib2JqZWN0VmFsdWVPZiIsImdldFN0cmluZ1ZhbHVlIiwiT1BFUkFUT1JTIiwib3BlcmF0b3IiLCJFU0NBUEUiLCJmIiwiJyIsIlwiIiwiTGV4ZXIiLCJsZXgiLCJ0b2tlbnMiLCJyZWFkU3RyaW5nIiwicGVlayIsInJlYWROdW1iZXIiLCJpc0lkZW50aWZpZXJTdGFydCIsInBlZWtNdWx0aWNoYXIiLCJyZWFkSWRlbnQiLCJpc1doaXRlc3BhY2UiLCJjaDIiLCJjaDMiLCJvcDEiLCJvcDIiLCJvcDMiLCJ0aHJvd0Vycm9yIiwiY2hhcnMiLCJjb2RlUG9pbnRBdCIsImlzVmFsaWRJZGVudGlmaWVyU3RhcnQiLCJpc0lkZW50aWZpZXJDb250aW51ZSIsImlzVmFsaWRJZGVudGlmaWVyQ29udGludWUiLCJjcCIsImNwMSIsImNwMiIsImlzRXhwT3BlcmF0b3IiLCJjb2xTdHIiLCJudW1iZXIiLCJwZWVrQ2giLCJxdW90ZSIsInJhd1N0cmluZyIsImhleCIsIkFTVCIsImxleGVyIiwiaWZEZWZpbmVkIiwicGx1c0ZuIiwiUHJvZ3JhbSIsIkV4cHJlc3Npb25TdGF0ZW1lbnQiLCJBc3NpZ25tZW50RXhwcmVzc2lvbiIsIkNvbmRpdGlvbmFsRXhwcmVzc2lvbiIsIkxvZ2ljYWxFeHByZXNzaW9uIiwiQmluYXJ5RXhwcmVzc2lvbiIsIlVuYXJ5RXhwcmVzc2lvbiIsIkNhbGxFeHByZXNzaW9uIiwiTWVtYmVyRXhwcmVzc2lvbiIsIklkZW50aWZpZXIiLCJMaXRlcmFsIiwiQXJyYXlFeHByZXNzaW9uIiwiUHJvcGVydHkiLCJPYmplY3RFeHByZXNzaW9uIiwiVGhpc0V4cHJlc3Npb24iLCJMb2NhbHNFeHByZXNzaW9uIiwiTkdWYWx1ZVBhcmFtZXRlciIsImFzdCIsInByb2dyYW0iLCJleHByZXNzaW9uU3RhdGVtZW50IiwiZXhwZWN0IiwiZmlsdGVyQ2hhaW4iLCJsZWZ0IiwiYXNzaWdubWVudCIsInRlcm5hcnkiLCJpc0Fzc2lnbmFibGUiLCJyaWdodCIsImFsdGVybmF0ZSIsImNvbnNlcXVlbnQiLCJsb2dpY2FsT1IiLCJjb25zdW1lIiwibG9naWNhbEFORCIsImVxdWFsaXR5IiwicmVsYXRpb25hbCIsImFkZGl0aXZlIiwibXVsdGlwbGljYXRpdmUiLCJ1bmFyeSIsImFyZ3VtZW50IiwicHJpbWFyeSIsImFycmF5RGVjbGFyYXRpb24iLCJzZWxmUmVmZXJlbnRpYWwiLCJsaXRlcmFscyIsImNhbGxlZSIsInBhcnNlQXJndW1lbnRzIiwiY29tcHV0ZWQiLCJiYXNlRXhwcmVzc2lvbiIsInBlZWtUb2tlbiIsInByb3BlcnRpZXMiLCJraW5kIiwibXNnIiwiZTEiLCJlMiIsImUzIiwiZTQiLCJwZWVrQWhlYWQiLCIkbG9jYWxzIiwiUFVSSVRZX0FCU09MVVRFIiwiUFVSSVRZX1JFTEFUSVZFIiwiZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyIsIiRmaWx0ZXIiLCJwYXJlbnRJc1B1cmUiLCJhbGxDb25zdGFudHMiLCJhcmdzVG9XYXRjaCIsImlzU3RhdGVsZXNzRmlsdGVyIiwiYXN0SXNQdXJlIiwiaXNQdXJlIiwiZXhwciIsInRvV2F0Y2giLCJmaWx0ZXJOYW1lIiwiaXNTdGF0ZWxlc3MiLCJnZXRJbnB1dHMiLCJsYXN0RXhwcmVzc2lvbiIsImFzc2lnbmFibGVBU1QiLCJBU1RDb21waWxlciIsIkFTVEludGVycHJldGVyIiwiUGFyc2VyIiwiYXN0Q29tcGlsZXIiLCJnZXRWYWx1ZU9mIiwiJFBhcnNlUHJvdmlkZXIiLCJpZGVudFN0YXJ0IiwiaWRlbnRDb250aW51ZSIsInRydWUiLCJmYWxzZSIsIm51bGwiLCJhZGRMaXRlcmFsIiwibGl0ZXJhbE5hbWUiLCJsaXRlcmFsVmFsdWUiLCJzZXRJZGVudGlmaWVyRm5zIiwiaWRlbnRpZmllclN0YXJ0IiwiaWRlbnRpZmllckNvbnRpbnVlIiwiJHBhcnNlT3B0aW9ucyIsIiQkZ2V0QXN0IiwiZ2V0QXN0IiwiaW50ZXJjZXB0b3JGbiIsInBhcnNlZEV4cHJlc3Npb24iLCJjYWNoZUtleSIsIm9uZVRpbWUiLCJvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUiLCJvbmVUaW1lV2F0Y2hEZWxlZ2F0ZSIsImlucHV0cyIsImlucHV0c1dhdGNoRGVsZWdhdGUiLCJhZGRJbnRlcmNlcHRvciIsImV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2siLCJvbGRWYWx1ZU9mVmFsdWUiLCJjb21wYXJlT2JqZWN0SWRlbnRpdHkiLCJwcmV0dHlQcmludEV4cHJlc3Npb24iLCJsYXN0UmVzdWx0IiwiaW5wdXRFeHByZXNzaW9ucyIsIm9sZElucHV0VmFsdWVPZiIsIm5ld0lucHV0VmFsdWUiLCJvbGRJbnB1dFZhbHVlT2ZWYWx1ZXMiLCJvbGRJbnB1dFZhbHVlcyIsIm9uZVRpbWVMaXN0ZW5lciIsIm9sZCIsImlzQWxsRGVmaW5lZCIsImFsbERlZmluZWQiLCJ3YXRjaERlbGVnYXRlIiwidXNlSW5wdXRzIiwiJFFQcm92aWRlciIsImVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zIiwicUZhY3RvcnkiLCIkJFFQcm92aWRlciIsIm5leHRUaWNrIiwiZXhjZXB0aW9uSGFuZGxlciIsIiRxTWluRXJyIiwiVHlwZUVycm9yIiwicXVldWVTaXplIiwiY2hlY2tRdWV1ZSIsIlByb21pc2UiLCJyZWplY3RQcm9taXNlIiwibm90aWZ5UHJvbWlzZSIsInByb2Nlc3NDaGVja3MiLCJ0b0NoZWNrIiwiaXNTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQiLCJtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZCIsImVycm9yTWVzc2FnZSIsInNjaGVkdWxlUHJvY2Vzc1F1ZXVlIiwicGVuZGluZyIsInByb2Nlc3NTY2hlZHVsZWQiLCIkJHBhc3NUb0V4Y2VwdGlvbkhhbmRsZXIiLCJwcm9jZXNzUXVldWUiLCIkJHJlamVjdCIsIiQkcmVzb2x2ZSIsImRvUmVzb2x2ZSIsImRvUmVqZWN0IiwiaGFuZGxlQ2FsbGJhY2siLCJyZXNvbHZlciIsImNhbGxiYWNrT3V0cHV0Iiwid2hlbiIsImVycmJhY2siLCJwcm9ncmVzc0JhY2siLCJvbkZ1bGZpbGxlZCIsIm9uUmVqZWN0ZWQiLCIkUSIsInByb21pc2VzIiwiY291bnRlciIsInJlc3VsdHMiLCJyYWNlIiwicHVyIiwicSIsIiQkUkFGUHJvdmlkZXIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmFmU3VwcG9ydGVkIiwicmFmIiwidGltZXIiLCJzdXBwb3J0ZWQiLCIkUm9vdFNjb3BlUHJvdmlkZXIiLCIkcm9vdFNjb3BlTWluRXJyIiwibGFzdERpcnR5V2F0Y2giLCJhcHBseUFzeW5jSWQiLCJkaWdlc3RUdGwiLCJkZXN0cm95Q2hpbGRTY29wZSIsIiRldmVudCIsImN1cnJlbnRTY29wZSIsIlNjb3BlIiwiJGlkIiwiJCR3YXRjaGVycyIsIiQkbmV4dFNpYmxpbmciLCIkJHByZXZTaWJsaW5nIiwiJCRjaGlsZEhlYWQiLCIkJGNoaWxkVGFpbCIsIiRyb290IiwiJCRsaXN0ZW5lcnMiLCIkJGxpc3RlbmVyQ291bnQiLCIkJHdhdGNoZXJzQ291bnQiLCJpc29sYXRlIiwiJCRDaGlsZFNjb3BlIiwiQ2hpbGRTY29wZSIsImNyZWF0ZUNoaWxkU2NvcGVDbGFzcyIsIndhdGNoRXhwIiwid2F0Y2hlciIsImluaXRXYXRjaFZhbCIsIiQkZGlnZXN0V2F0Y2hJbmRleCIsImluY3JlbWVudFdhdGNoZXJzQ291bnQiLCJ3YXRjaEV4cHJlc3Npb25zIiwibmV3VmFsdWVzIiwiZGVyZWdpc3RlckZucyIsImNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkIiwiZmlyc3RSdW4iLCJzaG91bGRDYWxsIiwid2F0Y2hHcm91cEFjdGlvbiIsInVud2F0Y2hGbiIsIiR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvciIsInZlcnlPbGRWYWx1ZSIsInRyYWNrVmVyeU9sZFZhbHVlIiwiY2hhbmdlRGV0ZWN0ZWQiLCJjaGFuZ2VEZXRlY3RvciIsImludGVybmFsQXJyYXkiLCJpbnRlcm5hbE9iamVjdCIsImluaXRSdW4iLCJvbGRMZW5ndGgiLCJfdmFsdWUiLCJuZXdMZW5ndGgiLCJuZXdJdGVtIiwib2xkSXRlbSIsIndhdGNoIiwid2F0Y2hlcnMiLCJkaXJ0eSIsImxvZ0lkeCIsImFzeW5jVGFzayIsInR0bCIsIndhdGNoTG9nIiwiYmVnaW5QaGFzZSIsImZsdXNoQXBwbHlBc3luYyIsImFzeW5jUXVldWVQb3NpdGlvbiIsImFzeW5jUXVldWUiLCJ0cmF2ZXJzZVNjb3Blc0xvb3AiLCJjbGVhclBoYXNlIiwicG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24iLCJkZWNyZW1lbnRMaXN0ZW5lckNvdW50IiwiY2xlYW5VcFNjb3BlIiwiJGV2YWwiLCJhcHBseUFzeW5jUXVldWUiLCJuYW1lZExpc3RlbmVycyIsImluZGV4T2ZMaXN0ZW5lciIsIiRlbWl0IiwidGFyZ2V0U2NvcGUiLCJsaXN0ZW5lckFyZ3MiLCIkJGFzeW5jUXVldWUiLCIkJHBvc3REaWdlc3RRdWV1ZSIsIiQkYXBwbHlBc3luY1F1ZXVlIiwicGhhc2UiLCIkJFNhbml0aXplVXJpUHJvdmlkZXIiLCJ1cmkiLCJpc0ltYWdlIiwibm9ybWFsaXplZFZhbCIsInJlZ2V4IiwibmV4dElkIiwiZmlsdGVycyIsInZhcnMiLCJvd24iLCJhc3NpZ25hYmxlIiwic3RhZ2UiLCJjb21wdXRpbmciLCJyZWN1cnNlIiwicmV0dXJuXyIsImdlbmVyYXRlRnVuY3Rpb24iLCJmbktleSIsImludG9JZCIsIndhdGNoSWQiLCJmblN0cmluZyIsIlVTRSIsIlNUUklDVCIsImZpbHRlclByZWZpeCIsIndhdGNoRm5zIiwiaW5wdXQiLCJ2YXJzUHJlZml4Iiwic2VjdGlvbiIsIm5hbWVJZCIsInJlY3Vyc2lvbkZuIiwic2tpcFdhdGNoSWRDaGVjayIsImlmXyIsImxhenlBc3NpZ24iLCJjb21wdXRlZE1lbWJlciIsImxhenlSZWN1cnNlIiwicGx1cyIsImdldEhhc093blByb3BlcnR5Iiwibm9uQ29tcHV0ZWRNZW1iZXIiLCJub3ROdWxsIiwibWVtYmVyIiwiZGVmYXVsdFZhbHVlIiwic3RyaW5nRXNjYXBlRm4iLCJzdHJpbmdFc2NhcGVSZWdleCIsInNraXAiLCJpbml0IiwicmhzIiwibGhzIiwidW5hcnkrIiwidW5hcnktIiwidW5hcnkhIiwiYmluYXJ5KyIsImJpbmFyeS0iLCJiaW5hcnkqIiwiYmluYXJ5LyIsImJpbmFyeSUiLCJiaW5hcnk9PT0iLCJiaW5hcnkhPT0iLCJiaW5hcnk9PSIsImJpbmFyeSE9IiwiYmluYXJ5PCIsImJpbmFyeT4iLCJiaW5hcnk8PSIsImJpbmFyeT49IiwiYmluYXJ5JiYiLCJiaW5hcnl8fCIsInRlcm5hcnk/OiIsImlzTGl0ZXJhbCIsImlzQ29uc3RhbnQiLCIkc2NlTWluRXJyIiwiU0NFX0NPTlRFWFRTIiwiQ1NTIiwiSlMiLCJVTkRFUlNDT1JFX0xPV0VSQ0FTRV9SRUdFWFAiLCJzbmFrZVRvQ2FtZWwiLCJhZGp1c3RNYXRjaGVycyIsIm1hdGNoZXJzIiwiYWRqdXN0ZWRNYXRjaGVycyIsIm1hdGNoZXIiLCJhZGp1c3RNYXRjaGVyIiwiJFNjZURlbGVnYXRlUHJvdmlkZXIiLCJyZXNvdXJjZVVybFdoaXRlbGlzdCIsInJlc291cmNlVXJsQmxhY2tsaXN0IiwiaHRtbFNhbml0aXplciIsIm1hdGNoVXJsIiwiZ2VuZXJhdGVIb2xkZXJUeXBlIiwiQmFzZSIsImhvbGRlclR5cGUiLCJ0cnVzdGVkVmFsdWUiLCIkJHVud3JhcFRydXN0ZWRWYWx1ZSIsInRydXN0ZWRWYWx1ZUhvbGRlckJhc2UiLCJieVR5cGUiLCJ0cnVzdEFzIiwiQ29uc3RydWN0b3IiLCJtYXliZVRydXN0ZWQiLCJhbGxvd2VkIiwiaXNSZXNvdXJjZVVybEFsbG93ZWRCeVBvbGljeSIsIiRTY2VQcm92aWRlciIsIiRzY2VEZWxlZ2F0ZSIsInNjZSIsImlzRW5hYmxlZCIsInBhcnNlQXMiLCJlbnVtVmFsdWUiLCJsTmFtZSIsIiRTbmlmZmVyUHJvdmlkZXIiLCJldmVudFN1cHBvcnQiLCJoYXNIaXN0b3J5UHVzaFN0YXRlIiwibnciLCJwcm9jZXNzIiwiY2hyb21lIiwicnVudGltZSIsInB1c2hTdGF0ZSIsImFuZHJvaWQiLCJib3hlZSIsImJvZHlTdHlsZSIsInRyYW5zaXRpb25zIiwiYW5pbWF0aW9ucyIsImhhc0V2ZW50IiwiZGl2RWxtIiwiJHRlbXBsYXRlUmVxdWVzdE1pbkVyciIsIiRUZW1wbGF0ZVJlcXVlc3RQcm92aWRlciIsImh0dHBPcHRpb25zIiwiJHRlbXBsYXRlQ2FjaGUiLCJoYW5kbGVSZXF1ZXN0Rm4iLCJ0cGwiLCJpZ25vcmVSZXF1ZXN0RXJyb3IiLCJ0b3RhbFBlbmRpbmdSZXF1ZXN0cyIsInRyYW5zZm9ybWVyIiwiJCRUZXN0YWJpbGl0eVByb3ZpZGVyIiwidGVzdGFiaWxpdHkiLCJmaW5kQmluZGluZ3MiLCJvcHRfZXhhY3RNYXRjaCIsIm1hdGNoZXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZGF0YUJpbmRpbmciLCJiaW5kaW5nTmFtZSIsImZpbmRNb2RlbHMiLCJwcmVmaXhlcyIsImdldExvY2F0aW9uIiwic2V0TG9jYXRpb24iLCJ3aGVuU3RhYmxlIiwiJFRpbWVvdXRQcm92aWRlciIsImRlZmVycmVkcyIsIiQkdGltZW91dElkIiwidXJsUGFyc2luZ05vZGUiLCJvcmlnaW5VcmwiLCJyZXF1ZXN0VXJsIiwiJFdpbmRvd1Byb3ZpZGVyIiwiJCRDb29raWVSZWFkZXIiLCJsYXN0Q29va2llcyIsImxhc3RDb29raWVTdHJpbmciLCJzYWZlRGVjb2RlVVJJQ29tcG9uZW50IiwiY29va2llQXJyYXkiLCJjb29raWUiLCJjdXJyZW50Q29va2llU3RyaW5nIiwic2FmZUdldENvb2tpZSIsIiQkQ29va2llUmVhZGVyUHJvdmlkZXIiLCIkRmlsdGVyUHJvdmlkZXIiLCJzdWZmaXgiLCJjdXJyZW5jeUZpbHRlciIsImRhdGVGaWx0ZXIiLCJmaWx0ZXJGaWx0ZXIiLCJqc29uRmlsdGVyIiwibGltaXRUb0ZpbHRlciIsImxvd2VyY2FzZUZpbHRlciIsIm51bWJlckZpbHRlciIsIm9yZGVyQnlGaWx0ZXIiLCJ1cHBlcmNhc2VGaWx0ZXIiLCJjb21wYXJhdG9yIiwiYW55UHJvcGVydHlLZXkiLCJwcmVkaWNhdGVGbiIsIm1hdGNoQWdhaW5zdEFueVByb3AiLCJnZXRUeXBlRm9yRmlsdGVyIiwic2hvdWxkTWF0Y2hQcmltaXRpdmVzIiwiYWN0dWFsIiwiZXhwZWN0ZWQiLCJkZWVwQ29tcGFyZSIsImNyZWF0ZVByZWRpY2F0ZUZuIiwiZG9udE1hdGNoV2hvbGVPYmplY3QiLCJhY3R1YWxUeXBlIiwiZXhwZWN0ZWRUeXBlIiwiZXhwZWN0ZWRWYWwiLCJtYXRjaEFueVByb3BlcnR5IiwiTUFYX0RJR0lUUyIsIkRFQ0lNQUxfU0VQIiwiWkVST19DSEFSIiwiJGxvY2FsZSIsImZvcm1hdHMiLCJOVU1CRVJfRk9STUFUUyIsImFtb3VudCIsImN1cnJlbmN5U3ltYm9sIiwiZnJhY3Rpb25TaXplIiwiQ1VSUkVOQ1lfU1lNIiwiUEFUVEVSTlMiLCJtYXhGcmFjIiwiY3VycmVuY3lTeW1ib2xSZSIsImZvcm1hdE51bWJlciIsIkdST1VQX1NFUCIsImdyb3VwU2VwIiwiZGVjaW1hbFNlcCIsInBhcnNlZE51bWJlciIsImlzSW5maW5pdHkiLCJpc0Zpbml0ZSIsImlzWmVybyIsIm51bVN0ciIsImFicyIsImZvcm1hdHRlZFRleHQiLCJtaW5GcmFjIiwiZGlnaXRzIiwiZnJhY3Rpb25MZW4iLCJyb3VuZEF0IiwiZGlnaXQiLCJrIiwiY2FycnkiLCJyZWR1Y2VSaWdodCIsInJvdW5kTnVtYmVyIiwibnVtYmVyT2ZJbnRlZ2VyRGlnaXRzIiwiemVyb3MiLCJleHBvbmVudCIsImludGVnZXJMZW4iLCJkZWNpbWFscyIsImdyb3VwcyIsImxnU2l6ZSIsImdTaXplIiwibmVnUHJlIiwibmVnU3VmIiwicG9zUHJlIiwicG9zU3VmIiwicGFkTnVtYmVyIiwibmVnV3JhcCIsIm5lZyIsImRhdGVHZXR0ZXIiLCJkYXRlU3RyR2V0dGVyIiwic2hvcnRGb3JtIiwic3RhbmRBbG9uZSIsImdldEZpcnN0VGh1cnNkYXlPZlllYXIiLCJ5ZWFyIiwiZGF5T2ZXZWVrT25GaXJzdCIsImdldERheSIsIndlZWtHZXR0ZXIiLCJmaXJzdFRodXJzIiwiZ2V0RnVsbFllYXIiLCJkYXRldGltZSIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldFRodXJzZGF5VGhpc1dlZWsiLCJyb3VuZCIsImVyYUdldHRlciIsIkVSQVMiLCJEQVRFX0ZPUk1BVFMiLCJ5eXl5IiwieXkiLCJ5IiwiTU1NTSIsIk1NTSIsIk1NIiwiTSIsIkxMTEwiLCJkZCIsIkhIIiwiSCIsImhoIiwibW0iLCJzcyIsInNzcyIsIkVFRUUiLCJFRUUiLCJnZXRIb3VycyIsIkFNUE1TIiwiWiIsInpvbmUiLCJwYWRkZWRab25lIiwid3ciLCJ3IiwiRyIsIkdHIiwiR0dHIiwiR0dHRyIsIkVSQU5BTUVTIiwiREFURV9GT1JNQVRTX1NQTElUIiwiTlVNQkVSX1NUUklORyIsIlJfSVNPODYwMV9TVFIiLCJmb3JtYXQiLCJEQVRFVElNRV9GT1JNQVRTIiwidHpIb3VyIiwidHpNaW4iLCJkYXRlU2V0dGVyIiwic2V0VVRDRnVsbFllYXIiLCJzZXRGdWxsWWVhciIsInRpbWVTZXR0ZXIiLCJzZXRVVENIb3VycyIsInNldEhvdXJzIiwibXMiLCJwYXJzZUZsb2F0IiwianNvblN0cmluZ1RvRGF0ZSIsInNwYWNpbmciLCJsaW1pdCIsImJlZ2luIiwiSW5maW5pdHkiLCJzbGljZUZuIiwic29ydFByZWRpY2F0ZSIsInJldmVyc2VPcmRlciIsImNvbXBhcmVGbiIsInByZWRpY2F0ZXMiLCJzb3J0UHJlZGljYXRlcyIsInByZWRpY2F0ZSIsImRlc2NlbmRpbmciLCJwcm9jZXNzUHJlZGljYXRlcyIsImRlZmF1bHRDb21wYXJlIiwiY29tcGFyZVZhbHVlcyIsInRpZUJyZWFrZXIiLCJwcmVkaWNhdGVWYWx1ZXMiLCJvYmplY3RWYWx1ZSIsImdldFByZWRpY2F0ZVZhbHVlIiwidjEiLCJ2MiIsInR5cGUxIiwidHlwZTIiLCJ2YWx1ZTEiLCJ2YWx1ZTIiLCJuZ0RpcmVjdGl2ZSIsImh0bWxBbmNob3JEaXJlY3RpdmUiLCJ4bGlua0hyZWYiLCJuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyIsIm5vcm1hbGl6ZWQiLCJkZWZhdWx0TGlua0ZuIiwibmdNb2RlbCIsImh0bWxBdHRyIiwibnVsbEZvcm1DdHJsIiwiJGFkZENvbnRyb2wiLCIkJHJlbmFtZUNvbnRyb2wiLCJjb250cm9sIiwiJG5hbWUiLCIkcmVtb3ZlQ29udHJvbCIsIiRzZXRWYWxpZGl0eSIsIiRzZXREaXJ0eSIsIiRzZXRQcmlzdGluZSIsIiRzZXRTdWJtaXR0ZWQiLCJQRU5ESU5HX0NMQVNTIiwiRm9ybUNvbnRyb2xsZXIiLCIkJGNvbnRyb2xzIiwiJGVycm9yIiwiJCRzdWNjZXNzIiwiJHBlbmRpbmciLCJuZ0Zvcm0iLCIkZGlydHkiLCIkcHJpc3RpbmUiLCIkdmFsaWQiLCIkaW52YWxpZCIsIiRzdWJtaXR0ZWQiLCIkJHBhcmVudEZvcm0iLCIkJGFuaW1hdGUiLCJzZXR1cFZhbGlkaXR5IiwiJHJvbGxiYWNrVmlld1ZhbHVlIiwiJGNvbW1pdFZpZXdWYWx1ZSIsIm5ld05hbWUiLCJvbGROYW1lIiwiUFJJU1RJTkVfQ0xBU1MiLCJESVJUWV9DTEFTUyIsIiRzZXRVbnRvdWNoZWQiLCJhZGRTZXRWYWxpZGl0eU1ldGhvZCIsImNsYXp6IiwidW5zZXQiLCJmb3JtRGlyZWN0aXZlRmFjdG9yeSIsImlzTmdGb3JtIiwiZm9ybUVsZW1lbnQiLCJWQUxJRF9DTEFTUyIsIm5hbWVBdHRyIiwiY3RybHMiLCJoYW5kbGVGb3JtU3VibWlzc2lvbiIsInNldHRlciIsImdldFNldHRlciIsImZvcm1EaXJlY3RpdmUiLCJuZ0Zvcm1EaXJlY3RpdmUiLCIkJGNsYXNzQ2FjaGUiLCJJTlZBTElEX0NMQVNTIiwiY2FjaGVkVG9nZ2xlQ2xhc3MiLCJjdHJsIiwic3dpdGNoVmFsdWUiLCJ0b2dnbGVWYWxpZGF0aW9uQ3NzIiwidmFsaWRhdGlvbkVycm9yS2V5IiwiaXNWYWxpZCIsImNvbWJpbmVkU3RhdGUiLCJjcmVhdGVBbmRTZXQiLCJpc09iamVjdEVtcHR5IiwidW5zZXRBbmRDbGVhbnVwIiwiSVNPX0RBVEVfUkVHRVhQIiwiVVJMX1JFR0VYUCIsIkVNQUlMX1JFR0VYUCIsIk5VTUJFUl9SRUdFWFAiLCJEQVRFX1JFR0VYUCIsIkRBVEVUSU1FTE9DQUxfUkVHRVhQIiwiV0VFS19SRUdFWFAiLCJNT05USF9SRUdFWFAiLCJUSU1FX1JFR0VYUCIsIlBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMiLCJQQVJUSUFMX1ZBTElEQVRJT05fVFlQRVMiLCJpbnB1dFR5cGUiLCJiYXNlSW5wdXRUeXBlIiwic3RyaW5nQmFzZWRJbnB1dFR5cGUiLCJjcmVhdGVEYXRlSW5wdXRUeXBlIiwiY3JlYXRlRGF0ZVBhcnNlciIsImRhdGV0aW1lLWxvY2FsIiwidGltZSIsIndlZWsiLCJpc29XZWVrIiwiZXhpc3RpbmdEYXRlIiwiaG91cnMiLCJzZWNvbmRzIiwibWlsbGlzZWNvbmRzIiwiYWRkRGF5cyIsImdldFNlY29uZHMiLCJnZXRNaWxsaXNlY29uZHMiLCJtb250aCIsIm1pblZhbCIsIm1heFZhbCIsImJhZElucHV0Q2hlY2tlciIsIm51bWJlckZvcm1hdHRlclBhcnNlciIsIiR2YWxpZGF0b3JzIiwiJGlzRW1wdHkiLCJwYXJzZU51bWJlckF0dHJWYWwiLCIkdmFsaWRhdGUiLCJzdGVwIiwic3RlcFZhbCIsIm1vZGVsVmFsdWUiLCJ2aWV3VmFsdWUiLCJpc1ZhbGlkRm9yU3RlcCIsIiQkcGFyc2VyTmFtZSIsImVtYWlsIiwicmFkaW8iLCJkb1RyaW0iLCJuZ1RyaW0iLCJldiIsImNoZWNrZWQiLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiR2aWV3VmFsdWUiLCJyYW5nZSIsInN1cHBvcnRzUmFuZ2UiLCIkJGhhc05hdGl2ZVZhbGlkYXRvcnMiLCJ2YWxpZGl0eSIsImhhc01pbkF0dHIiLCJoYXNNYXhBdHRyIiwiaGFzU3RlcEF0dHIiLCJvcmlnaW5hbFJlbmRlciIsInJhbmdlVW5kZXJmbG93IiwicmFuZ2VPdmVyZmxvdyIsInNldEluaXRpYWxWYWx1ZUFuZE9ic2VydmVyIiwiJG1vZGVsVmFsdWUiLCJlbFZhbCIsInN0ZXBNaXNtYXRjaCIsImh0bWxBdHRyTmFtZSIsImNoYW5nZUZuIiwiY2hlY2tib3giLCJ0cnVlVmFsdWUiLCJwYXJzZUNvbnN0YW50RXhwciIsIm5nVHJ1ZVZhbHVlIiwiZmFsc2VWYWx1ZSIsIm5nRmFsc2VWYWx1ZSIsIiRmb3JtYXR0ZXJzIiwiJHBhcnNlcnMiLCJzdWJtaXQiLCJyZXNldCIsImZpbGUiLCJjb21wb3NpbmciLCJkZWZlckxpc3RlbmVyIiwib3JpZ1ZhbHVlIiwia2V5Q29kZSIsIm9yaWdCYWRJbnB1dCIsImJhZElucHV0Iiwib3JpZ1R5cGVNaXNtYXRjaCIsInR5cGVNaXNtYXRjaCIsIm1hcHBpbmciLCJpc28iLCJwYXJzZURhdGUiLCJwcmV2aW91c0RhdGUiLCIkb3B0aW9ucyIsImdldE9wdGlvbiIsInBhcnNlZERhdGUiLCJuZ01vZGVsTWluRXJyIiwiaXNWYWxpZERhdGUiLCJwYXJzZU9ic2VydmVkRGF0ZVZhbHVlIiwiaXNOdW1iZXJJbnRlZ2VyIiwiY291bnREZWNpbWFscyIsIm51bVN0cmluZyIsImRlY2ltYWxTeW1ib2xJbmRleCIsInN0ZXBCYXNlIiwiaXNOb25JbnRlZ2VyVmFsdWUiLCJpc05vbkludGVnZXJTdGVwQmFzZSIsImlzTm9uSW50ZWdlclN0ZXAiLCJ2YWx1ZURlY2ltYWxzIiwic3RlcEJhc2VEZWNpbWFscyIsInN0ZXBEZWNpbWFscyIsImRlY2ltYWxDb3VudCIsIm11bHRpcGxpZXIiLCJwb3ciLCJwYXJzZUZuIiwiaW5wdXREaXJlY3RpdmUiLCJDT05TVEFOVF9WQUxVRV9SRUdFWFAiLCJuZ1ZhbHVlRGlyZWN0aXZlIiwidXBkYXRlRWxlbWVudFZhbHVlIiwicHJvcFZhbHVlIiwidHBsQXR0ciIsIm5nVmFsdWUiLCJuZ0JpbmREaXJlY3RpdmUiLCIkY29tcGlsZSIsInRlbXBsYXRlRWxlbWVudCIsIm5nQmluZCIsIm5nQmluZFRlbXBsYXRlRGlyZWN0aXZlIiwibmdCaW5kVGVtcGxhdGUiLCJuZ0JpbmRIdG1sRGlyZWN0aXZlIiwibmdCaW5kSHRtbEdldHRlciIsIm5nQmluZEh0bWwiLCJuZ0JpbmRIdG1sV2F0Y2giLCJnZXRUcnVzdGVkSHRtbCIsIm5nQ2hhbmdlRGlyZWN0aXZlIiwiJHZpZXdDaGFuZ2VMaXN0ZW5lcnMiLCJuZ0NoYW5nZSIsImNsYXNzRGlyZWN0aXZlIiwiaW5kZXhXYXRjaEV4cHJlc3Npb24iLCJvbGRDbGFzc1N0cmluZyIsImlzT25lVGltZSIsIndhdGNoRXhwcmVzc2lvbiIsInRvRmxhdFZhbHVlIiwidG9DbGFzc1N0cmluZyIsIndhdGNoQWN0aW9uIiwibmV3Q2xhc3NWYWx1ZSIsIm5ld0NsYXNzU3RyaW5nIiwibmdDbGFzc1dhdGNoQWN0aW9uIiwiY2xhc3NDb3VudHMiLCJvbGRNb2R1bG8iLCJkaWdlc3RDbGFzc0NvdW50cyIsImNsYXNzQXJyYXkiLCJjbGFzc2VzVG9VcGRhdGUiLCJvbGRDbGFzc0FycmF5IiwibmV3Q2xhc3NBcnJheSIsInRvUmVtb3ZlQXJyYXkiLCJhcnJheURpZmZlcmVuY2UiLCJ0b0FkZEFycmF5IiwidG9SZW1vdmVTdHJpbmciLCJ0b0FkZFN0cmluZyIsInVwZGF0ZUNsYXNzZXMiLCIkaW5kZXgiLCJuZXdNb2R1bG8iLCJjbGFzc1N0cmluZyIsImFkZENsYXNzZXMiLCJyZW1vdmVDbGFzc2VzIiwiY2xhc3NWYWx1ZSIsImZsYXRWYWx1ZSIsImhhc1VuZGVmaW5lZCIsIm5nQ2xhc3NEaXJlY3RpdmUiLCJuZ0NsYXNzT2RkRGlyZWN0aXZlIiwibmdDbGFzc0V2ZW5EaXJlY3RpdmUiLCJuZ0Nsb2FrRGlyZWN0aXZlIiwibmdDb250cm9sbGVyRGlyZWN0aXZlIiwibmdFdmVudERpcmVjdGl2ZXMiLCJmb3JjZUFzeW5jRXZlbnRzIiwiYmx1ciIsImZvY3VzIiwibmdJZkRpcmVjdGl2ZSIsImJsb2NrIiwicHJldmlvdXNFbGVtZW50cyIsIm5nSWYiLCJuZ0luY2x1ZGVEaXJlY3RpdmUiLCIkYW5jaG9yU2Nyb2xsIiwic3JjRXhwIiwibmdJbmNsdWRlIiwib25sb2FkRXhwIiwiYXV0b1Njcm9sbEV4cCIsImF1dG9zY3JvbGwiLCJwcmV2aW91c0VsZW1lbnQiLCJjdXJyZW50RWxlbWVudCIsImNoYW5nZUNvdW50ZXIiLCJjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50IiwiYWZ0ZXJBbmltYXRpb24iLCJ0aGlzQ2hhbmdlSWQiLCJuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZSIsIm5nSW5pdERpcmVjdGl2ZSIsIm5nSW5pdCIsIm5nTGlzdERpcmVjdGl2ZSIsIm5nTGlzdCIsInRyaW1WYWx1ZXMiLCJOZ01vZGVsQ29udHJvbGxlciIsIiQkcmF3TW9kZWxWYWx1ZSIsIiRhc3luY1ZhbGlkYXRvcnMiLCIkdW50b3VjaGVkIiwiJHRvdWNoZWQiLCJkZWZhdWx0TW9kZWxPcHRpb25zIiwiJCR1cGRhdGVFdmVudHMiLCIkJHVwZGF0ZUV2ZW50SGFuZGxlciIsIiQkcGFyc2VkTmdNb2RlbCIsIiQkcGFyc2VkTmdNb2RlbEFzc2lnbiIsIiQkbmdNb2RlbEdldCIsIiQkbmdNb2RlbFNldCIsIiQkcGVuZGluZ0RlYm91bmNlIiwiJCRwYXJzZXJWYWxpZCIsIiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCIsIiQkYXR0ciIsIiQkdGltZW91dCIsIiQkZXhjZXB0aW9uSGFuZGxlciIsIiQkc2V0TW9kZWxWYWx1ZSIsInNldHVwTW9kZWxXYXRjaGVyIiwiJCRpbml0R2V0dGVyU2V0dGVycyIsImludm9rZU1vZGVsR2V0dGVyIiwiaW52b2tlTW9kZWxTZXR0ZXIiLCIkJCRwIiwiJCR1cGRhdGVFbXB0eUNsYXNzZXMiLCIkc2V0VG91Y2hlZCIsIiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSIsInByZXZWYWxpZCIsInByZXZNb2RlbFZhbHVlIiwiYWxsb3dJbnZhbGlkIiwidGhhdCIsIiQkcnVuVmFsaWRhdG9ycyIsImFsbFZhbGlkIiwiJCR3cml0ZU1vZGVsVG9TY29wZSIsImRvbmVDYWxsYmFjayIsImxvY2FsVmFsaWRhdGlvblJ1bklkIiwic2V0VmFsaWRpdHkiLCJ2YWxpZGF0aW9uRG9uZSIsImVycm9yS2V5IiwicHJvY2Vzc1BhcnNlRXJyb3JzIiwic3luY1ZhbGlkYXRvcnNWYWxpZCIsInZhbGlkYXRvciIsInByb2Nlc3NTeW5jVmFsaWRhdG9ycyIsInZhbGlkYXRvclByb21pc2VzIiwicHJvY2Vzc0FzeW5jVmFsaWRhdG9ycyIsIiQkcGFyc2VBbmRWYWxpZGF0ZSIsIndyaXRlVG9Nb2RlbElmTmVlZGVkIiwiJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCIsImRlYm91bmNlRGVsYXkiLCIkb3ZlcnJpZGVNb2RlbE9wdGlvbnMiLCJjcmVhdGVDaGlsZCIsIiQkc2V0VXBkYXRlT25FdmVudHMiLCIkcHJvY2Vzc01vZGVsVmFsdWUiLCIkJGZvcm1hdCIsImZvcm1hdHRlcnMiLCJuZ01vZGVsRGlyZWN0aXZlIiwibW9kZWxDdHJsIiwiZm9ybUN0cmwiLCJvcHRpb25zQ3RybCIsInNldFRvdWNoZWQiLCJERUZBVUxUX1JFR0VYUCIsIk1vZGVsT3B0aW9ucyIsIiQkb3B0aW9ucyIsImluaGVyaXRBbGwiLCJ1cGRhdGVPbkRlZmF1bHQiLCJ1cGRhdGVPbiIsImRlYm91bmNlIiwiZ2V0dGVyU2V0dGVyIiwibmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUiLCJOZ01vZGVsT3B0aW9uc0NvbnRyb2xsZXIiLCIkJGF0dHJzIiwicGFyZW50T3B0aW9ucyIsInBhcmVudEN0cmwiLCJtb2RlbE9wdGlvbnNEZWZpbml0aW9uIiwibmdNb2RlbE9wdGlvbnMiLCJuZ05vbkJpbmRhYmxlRGlyZWN0aXZlIiwibmdPcHRpb25zTWluRXJyIiwiTkdfT1BUSU9OU19SRUdFWFAiLCJuZ09wdGlvbnNEaXJlY3RpdmUiLCJvcHRpb25UZW1wbGF0ZSIsIm9wdEdyb3VwVGVtcGxhdGUiLCJzZWxlY3RFbGVtZW50IiwicmVnaXN0ZXJPcHRpb24iLCJzZWxlY3RDdHJsIiwibmdNb2RlbEN0cmwiLCJoYXNFbXB0eU9wdGlvbiIsImVtcHR5T3B0aW9uIiwicHJvdmlkZWRFbXB0eU9wdGlvbiIsIm5nT3B0aW9ucyIsIm9wdGlvbnNFeHAiLCJ2YWx1ZU5hbWUiLCJrZXlOYW1lIiwic2VsZWN0QXMiLCJ0cmFja0J5Iiwidmlld1ZhbHVlRm4iLCJ0cmFja0J5Rm4iLCJnZXRUcmFja0J5VmFsdWVGbiIsImdldFRyYWNrQnlWYWx1ZSIsImdldExvY2FscyIsImRpc3BsYXlGbiIsImdyb3VwQnlGbiIsImRpc2FibGVXaGVuRm4iLCJ2YWx1ZXNGbiIsIk9wdGlvbiIsInNlbGVjdFZhbHVlIiwibGFiZWwiLCJncm91cCIsImRpc2FibGVkIiwiZ2V0T3B0aW9uVmFsdWVzS2V5cyIsIm9wdGlvblZhbHVlcyIsIm9wdGlvblZhbHVlc0tleXMiLCJpdGVtS2V5IiwiZ2V0V2F0Y2hhYmxlcyIsIndhdGNoZWRBcnJheSIsIm9wdGlvblZhbHVlc0xlbmd0aCIsImRpc2FibGVXaGVuIiwiZ2V0T3B0aW9ucyIsIm9wdGlvbkl0ZW1zIiwic2VsZWN0VmFsdWVNYXAiLCJvcHRpb25JdGVtIiwiZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZSIsImdldFZpZXdWYWx1ZUZyb21PcHRpb24iLCJwYXJzZU9wdGlvbnNFeHByZXNzaW9uIiwibGlzdEZyYWdtZW50IiwiYWRkT3B0aW9uRWxlbWVudCIsIm9wdGlvbkVsZW1lbnQiLCJ1cGRhdGVPcHRpb25FbGVtZW50IiwiZ2V0QW5kVXBkYXRlU2VsZWN0ZWRPcHRpb24iLCJnZW5lcmF0ZVVua25vd25PcHRpb25WYWx1ZSIsIndyaXRlVmFsdWUiLCJzZWxlY3RlZE9wdGlvbnMiLCJyZWFkVmFsdWUiLCJzZWxlY3Rpb25zIiwic2VsZWN0ZWRPcHRpb24iLCJzZWxlY3RlZEluZGV4IiwicmVtb3ZlVW5rbm93bk9wdGlvbiIsInNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uIiwidW5zZWxlY3RFbXB0eU9wdGlvbiIsIm9wdGlvblNjb3BlIiwib3B0aW9uRWwiLCJuZWVkc1JlcmVuZGVyIiwiJGlzRW1wdHlPcHRpb25TZWxlY3RlZCIsImdyb3VwRWxlbWVudE1hcCIsImdyb3VwRWxlbWVudCIsIm5leHRWYWx1ZSIsImlzTm90UHJpbWl0aXZlIiwibmdQbHVyYWxpemVEaXJlY3RpdmUiLCJCUkFDRSIsIklTX1dIRU4iLCJsYXN0Q291bnQiLCJudW1iZXJFeHAiLCJ3aGVuRXhwIiwid2hlbnMiLCJ3aGVuc0V4cEZucyIsImJyYWNlUmVwbGFjZW1lbnQiLCJ3YXRjaFJlbW92ZXIiLCJ1cGRhdGVFbGVtZW50VGV4dCIsIm5ld1RleHQiLCJhdHRyaWJ1dGVOYW1lIiwidG1wTWF0Y2giLCJ3aGVuS2V5IiwiY291bnRJc05hTiIsInBsdXJhbENhdCIsIndoZW5FeHBGbiIsIm5nUmVwZWF0RGlyZWN0aXZlIiwibmdSZXBlYXRNaW5FcnIiLCJ1cGRhdGVTY29wZSIsInZhbHVlSWRlbnRpZmllciIsImtleUlkZW50aWZpZXIiLCJhcnJheUxlbmd0aCIsIiRmaXJzdCIsIiRsYXN0IiwiJG1pZGRsZSIsIiRvZGQiLCIkZXZlbiIsImdldEJsb2NrU3RhcnQiLCJnZXRCbG9ja0VuZCIsIm5nUmVwZWF0IiwibmdSZXBlYXRFbmRDb21tZW50IiwiYWxpYXNBcyIsInRyYWNrQnlFeHAiLCJ0cmFja0J5RXhwR2V0dGVyIiwidHJhY2tCeUlkRXhwRm4iLCJ0cmFja0J5SWRBcnJheUZuIiwidHJhY2tCeUlkT2JqRm4iLCJoYXNoRm5Mb2NhbHMiLCJsYXN0QmxvY2tNYXAiLCJuZXh0Tm9kZSIsImNvbGxlY3Rpb25MZW5ndGgiLCJ0cmFja0J5SWQiLCJ0cmFja0J5SWRGbiIsImNvbGxlY3Rpb25LZXlzIiwibmV4dEJsb2NrT3JkZXIiLCJwcmV2aW91c05vZGUiLCJuZXh0QmxvY2tNYXAiLCJibG9ja0tleSIsIm5nU2hvd0RpcmVjdGl2ZSIsIm5nU2hvdyIsIm5nSGlkZURpcmVjdGl2ZSIsIm5nSGlkZSIsIm5nU3R5bGVEaXJlY3RpdmUiLCJuZ1N0eWxlIiwib2xkU3R5bGVzIiwibmdTd2l0Y2hEaXJlY3RpdmUiLCJjYXNlcyIsIm5nU3dpdGNoQ29udHJvbGxlciIsIndhdGNoRXhwciIsIm5nU3dpdGNoIiwic2VsZWN0ZWRUcmFuc2NsdWRlcyIsInNlbGVjdGVkRWxlbWVudHMiLCJwcmV2aW91c0xlYXZlQW5pbWF0aW9ucyIsInNlbGVjdGVkU2NvcGVzIiwic3BsaWNlRmFjdG9yeSIsInNlbGVjdGVkVHJhbnNjbHVkZSIsImNhc2VFbGVtZW50Iiwic2VsZWN0ZWRTY29wZSIsImFuY2hvciIsIm5nU3dpdGNoV2hlbkRpcmVjdGl2ZSIsIm5nU3dpdGNoV2hlbiIsIm5nU3dpdGNoV2hlblNlcGFyYXRvciIsIndoZW5DYXNlIiwibmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlIiwibmdUcmFuc2NsdWRlTWluRXJyIiwibmdUcmFuc2NsdWRlRGlyZWN0aXZlIiwiZmFsbGJhY2tMaW5rRm4iLCJuZ1RyYW5zY2x1ZGUiLCJuZ1RyYW5zY2x1ZGVTbG90IiwidXNlRmFsbGJhY2tDb250ZW50Iiwibm90V2hpdGVzcGFjZSIsInNjcmlwdERpcmVjdGl2ZSIsIm5vb3BOZ01vZGVsQ29udHJvbGxlciIsInNldE9wdGlvblNlbGVjdGVkU3RhdHVzIiwiU2VsZWN0Q29udHJvbGxlciIsIm9wdGlvbnNNYXAiLCJ1bmtub3duT3B0aW9uIiwicmVuZGVyVW5rbm93bk9wdGlvbiIsInVua25vd25WYWwiLCJ1cGRhdGVVbmtub3duT3B0aW9uIiwic2VsZWN0RW1wdHlPcHRpb24iLCJyZWFsVmFsIiwiaGFzT3B0aW9uIiwiY3VycmVudGx5U2VsZWN0ZWRPcHRpb24iLCJoYXNoZWRWYWwiLCJhZGRPcHRpb24iLCJzY2hlZHVsZVJlbmRlciIsInJlbW92ZU9wdGlvbiIsIiRoYXNFbXB0eU9wdGlvbiIsIiRpc1Vua25vd25PcHRpb25TZWxlY3RlZCIsInJlbmRlclNjaGVkdWxlZCIsInVwZGF0ZVNjaGVkdWxlZCIsInNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlIiwicmVuZGVyQWZ0ZXIiLCJvcHRpb25BdHRycyIsImludGVycG9sYXRlVmFsdWVGbiIsImludGVycG9sYXRlVGV4dEZuIiwicmVtb3ZhbCIsInByZXZpb3VzbHlTZWxlY3RlZCIsInJlbW92ZVZhbHVlIiwic2VsZWN0RGlyZWN0aXZlIiwic2hvdWxkQmVTZWxlY3RlZCIsImN1cnJlbnRseVNlbGVjdGVkIiwibGFzdFZpZXciLCJsYXN0Vmlld1JlZiIsIm9wdGlvbkRpcmVjdGl2ZSIsInJlcXVpcmVkRGlyZWN0aXZlIiwicmVxdWlyZWQiLCJwYXR0ZXJuRGlyZWN0aXZlIiwicGF0dGVybkV4cCIsIm1heGxlbmd0aERpcmVjdGl2ZSIsIm1heGxlbmd0aCIsImludFZhbCIsIm1pbmxlbmd0aERpcmVjdGl2ZSIsIm1pbmxlbmd0aCIsIm9yaWdpbmFsQ2xlYW5EYXRhIiwianFOYW1lIiwiZWxlbXMiLCJiaW5kSlF1ZXJ5IiwiJCRtaW5FcnIiLCIkJGNzcCIsIiQkZW5jb2RlVXJpU2VnbWVudCIsIiQkZW5jb2RlVXJpUXVlcnkiLCIkJHN0cmluZ2lmeSIsImVuc3VyZSIsImNvbmZpZ0ZuIiwiaW52b2tlUXVldWUiLCJjb25maWdCbG9ja3MiLCJpbnZva2VMYXRlciIsIm1vZHVsZUluc3RhbmNlIiwiaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lIiwiYW5pbWF0aW9uIiwiaW5zZXJ0TWV0aG9kIiwicmVjaXBlTmFtZSIsImZhY3RvcnlGdW5jdGlvbiIsInNldHVwTW9kdWxlTG9hZGVyIiwidGV4dGFyZWEiLCJmb3JtIiwic2VsZWN0IiwibmdDbGFzcyIsIm5nQ2xhc3NFdmVuIiwibmdDbGFzc09kZCIsIm5nQ2xvYWsiLCJuZ0NvbnRyb2xsZXIiLCJuZ05vbkJpbmRhYmxlIiwibmdQbHVyYWxpemUiLCJuZ1N3aXRjaERlZmF1bHQiLCJuZ1JlcXVpcmVkIiwiJGFuaW1hdGVDc3MiLCIkJGFuaW1hdGVKcyIsIiQkZm9yY2VSZWZsb3ciLCIkaW50ZXJ2YWwiLCIkaHR0cFBhcmFtU2VyaWFsaXplciIsIiRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlIiwiJCR0ZXN0YWJpbGl0eSIsIiQkanFMaXRlIiwiJCRNYXAiLCJhbmd1bGFyVmVyc2lvbiIsInB1Ymxpc2hFeHRlcm5hbEFQSSIsIlBMVVJBTF9DQVRFR09SWSIsIkRBWSIsIkZJUlNUREFZT0ZXRUVLIiwiTU9OVEgiLCJTSE9SVERBWSIsIlNIT1JUTU9OVEgiLCJTVEFOREFMT05FTU9OVEgiLCJXRUVLRU5EUkFOR0UiLCJmdWxsRGF0ZSIsImxvbmdEYXRlIiwibWVkaXVtIiwibWVkaXVtRGF0ZSIsIm1lZGl1bVRpbWUiLCJzaG9ydCIsInNob3J0RGF0ZSIsInNob3J0VGltZSIsIm1pbkludCIsImxvY2FsZUlEIiwib3B0X3ByZWNpc2lvbiIsInZmIiwiZ2V0RGVjaW1hbHMiLCJnZXRWRiIsIm5nX2Zyb21faW1wb3J0IiwiY29yZSIsIm5nX2Zyb21fZ2xvYmFsIiwibmciLCJnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSIsInRlbXBsYXRlRmFjdG9yeSIsInZpZXciLCJOZzFWaWV3Q29uZmlnIiwiaGFzQW55S2V5IiwibmcxVmlld3NCdWlsZGVyIiwiY29tcEtleXMiLCJub25Db21wS2V5cyIsImFsbFZpZXdLZXlzIiwidmlld3MiLCJ2aWV3c09iamVjdCIsIiRkZWZhdWx0IiwicmVzb2x2ZUFzIiwiJHR5cGUiLCIkY29udGV4dCIsIlZpZXdTZXJ2aWNlIiwibm9ybWFsaXplVUlWaWV3VGFyZ2V0IiwiJHVpVmlld05hbWUiLCJ1aVZpZXdOYW1lIiwiJHVpVmlld0NvbnRleHRBbmNob3IiLCJ1aVZpZXdDb250ZXh0QW5jaG9yIiwidmlld0RlY2wiLCJsb2FkZWQiLCJnZXRUZW1wbGF0ZSIsInVpVmlldyIsIm1ha2VDb21wb25lbnRUZW1wbGF0ZSIsImxvYWQiLCJSZXNvbHZlQ29udGV4dCIsInBhcmFtVmFsdWVzIiwiZnJvbUNvbmZpZyIsImdldENvbnRyb2xsZXIiLCJ0cmFjZSIsInRyYWNlVmlld1NlcnZpY2VFdmVudCIsImNvbnRyb2xsZXJQcm92aWRlciIsImRlcHMiLCJwcm92aWRlckZuIiwicmVzb2x2YWJsZSIsIlJlc29sdmFibGUiLCJUZW1wbGF0ZUZhY3RvcnkiLCJfdXNlSHR0cCIsInVzZUh0dHBTZXJ2aWNlIiwiYXNUZW1wbGF0ZSIsImFzQ29tcG9uZW50IiwiZnJvbVN0cmluZyIsImZyb21VcmwiLCJ0ZW1wbGF0ZVByb3ZpZGVyIiwiZnJvbVByb3ZpZGVyIiwiY29tcG9uZW50UHJvdmlkZXIiLCJmcm9tQ29tcG9uZW50UHJvdmlkZXIiLCJrZWJvYiIsImNhbWVsQ2FzZSIsImtlYm9iZWQiLCJrZWJvYlN0cmluZyIsImNtcERlZnMiLCJnZXRCaW5kaW5ncyIsImdldENvbXBvbmVudEJpbmRpbmdzIiwicmVzb2x2ZU5hbWUiLCJyZXMiLCJnZXRSZXNvbHZhYmxlIiwiYXJyYXlJZHhTdHIiLCJrZWJvYk5hbWUiLCJkZWYiLCJzY29wZUJpbmRpbmdzIiwiYmluZGluZ3NPYmoiLCJ0dXBsZSIsIlN0YXRlUHJvdmlkZXIiLCJzdGF0ZVJlZ2lzdHJ5Iiwic3RhdGVTZXJ2aWNlIiwib25JbnZhbGlkIiwiZ2V0U3RhdGVIb29rQnVpbGRlciIsImhvb2tOYW1lIiwic3RhdGVPYmplY3QiLCJwYXJlbnRGbiIsImhvb2siLCJ0cmFucyIsInN1YkNvbnRleHQiLCJ0cmVlQ2hhbmdlcyIsIiRzdGF0ZSQiLCIkdHJhbnNpdGlvbiQiLCJOZzFMb2NhdGlvblNlcnZpY2VzIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJfdXJsTGlzdGVuZXJzIiwiX2xwIiwibW9ua2V5UGF0Y2hQYXRoUGFyYW1ldGVyVHlwZSIsInJvdXRlciIsInBhdGhUeXBlIiwidXJsTWF0Y2hlckZhY3RvcnkiLCJlbmNvZGUiLCJ+IiwiLyIsImRlY29kZSIsIn5+IiwifjJGIiwiZGlzcG9zZSIsIm9uQ2hhbmdlIiwiX2Jhc2VIcmVmIiwiX3J1bnRpbWVTZXJ2aWNlcyIsImV2dCIsIl9sb2MiLCJVcmxSb3V0ZXJQcm92aWRlciIsIl9yb3V0ZXIiLCJfdXJsUm91dGVyIiwidXJsUm91dGVyIiwiaW5qZWN0YWJsZUhhbmRsZXIiLCIkbWF0Y2giLCIkc3RhdGVQYXJhbXMiLCJpbnRlcmNlcHREZWZlcnJlZCIsImxpc3RlbiIsInJ1bGUiLCJydWxlRm4iLCJCYXNlVXJsUnVsZSIsImxvY2F0aW9uU2VydmljZSIsImRlZmVySW50ZXJjZXB0IiwibW9kX2luaXQiLCJtb2RfdXRpbCIsIm1vZF9ydHIiLCJtb2Rfc3RhdGUiLCJtb2RfbWFpbiIsIiR1aVJvdXRlclByb3ZpZGVyIiwiVUlSb3V0ZXIiLCJzdGF0ZVByb3ZpZGVyIiwidmlld1NlcnZpY2UiLCJfcGx1Z2luYXBpIiwiX3ZpZXdDb25maWdGYWN0b3J5IiwibmcxTG9jYXRpb25TZXJ2aWNlIiwibG9jYXRpb25Db25maWciLCJnZXRQcm92aWRlckZvciIsIiR1cnAiLCJydW5CbG9jayIsIiR1aVJvdXRlciIsImNoZWNrU3RyaWN0RGkiLCJyZXNvbHZhYmxlcyIsInJlc29sdmVGbiIsIndhdGNoRGlnZXN0cyIsImFwcHJveGltYXRlRGlnZXN0cyIsInVpUm91dGVyIiwidXJsUm91dGVyUHJvdmlkZXIiLCIkdXJsTWF0Y2hlckZhY3RvcnkiLCIkc3RhdGUiLCIkdXJsUm91dGVyIiwidWlTcmVmRGlyZWN0aXZlIiwidWlTdGF0ZURpcmVjdGl2ZSIsInVpU3JlZkFjdGl2ZURpcmVjdGl2ZSIsImN0eCIsImdldFRva2VucyIsInR1cGxlcyIsIndhaXRQb2xpY3kiLCJnZXRQb2xpY3kiLCJwYXJzZVN0YXRlUmVmIiwicmVmIiwicGFyYW1zT25seSIsInBhcmFtRXhwciIsInN0YXRlQ29udGV4dCIsIiR1aVZpZXciLCJwcm9jZXNzZWREZWYiLCJ1aVN0YXRlIiwidWlTdGF0ZU9wdHMiLCJyZWxhdGl2ZSIsIiRjdXJyZW50IiwiZGVmYXVsdE9wdHMiLCJ1aVN0YXRlUGFyYW1zIiwiZ2V0VHlwZUluZm8iLCJpc1N2ZyIsImlzRm9ybSIsImlzQW5jaG9yIiwiY2xpY2thYmxlIiwiY2xpY2tIb29rIiwiZ2V0RGVmIiwidHJhbnNpdGlvbl8xIiwiZ28iLCJpZ25vcmVQcmV2ZW50RGVmYXVsdENvdW50XzEiLCJiaW5kRXZlbnRzIiwiaG9va0ZuIiwiZXZlbnRzXzEiLCJldmVudF8xIiwiZXZlbnRzXzIiLCJldmVudF8yIiwiJElzU3RhdGVGaWx0ZXIiLCJpc0ZpbHRlciIsIiRJbmNsdWRlZEJ5U3RhdGVGaWx0ZXIiLCJpbmNsdWRlc0ZpbHRlciIsIiRWaWV3RGlyZWN0aXZlRmlsbCIsIiR0cmFuc2l0aW9ucyIsIiR2aWV3IiwiZ2V0Q29udHJvbGxlckFzIiwiZ2V0UmVzb2x2ZUFzIiwiaW5pdGlhbCIsImNmZyIsIiRjZmciLCJyZXNvbHZlQ3R4IiwidHJhY2VVSVZpZXdGaWxsIiwicmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzIiwidGFnUmVnZXhwXzEiLCJkZXJlZ2lzdGVyV2F0Y2hfMSIsImRpcmVjdGl2ZUVsIiwidGFnTmFtZSIsImN0cmxJbnN0YW5jZSIsInVpU3JlZkFjdGl2ZSIsImFjdGl2ZSIsInVubGlua0luZm9GbiIsInJhd0RlZiIsInVpU3JlZiIsIiQkYWRkU3RhdGVJbmZvIiwidWlTcmVmT3B0cyIsIm9uU3RhdGVzQ2hhbmdlZCIsInRyYW5zaXRpb25TZXJ2aWNlIiwib25TdWNjZXNzIiwiaW5wdXRBdHRycyIsIndhdGNoRGVyZWdGbnMiLCJmaWVsZCIsIm5ld3ZhbCIsImFjdGl2ZUVxQ2xhc3MiLCJzdGF0ZXMiLCJ1aVNyZWZBY3RpdmVFcSIsInVwZGF0ZUFmdGVyVHJhbnNpdGlvbiIsImhhbmRsZVN0YXRlc0NoYW5nZWQiLCJzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdCIsInN0YXRlc0RlZmluaXRpb24iLCJzdGF0ZU9yTmFtZSIsImFjdGl2ZUNsYXNzIiwiYWRkU3RhdGVGb3JDbGFzcyIsImFkZFN0YXRlIiwic3RhdGVOYW1lIiwic3RhdGVQYXJhbXMiLCJzdGF0ZUluZm8iLCJnZXRDbGFzc2VzIiwic3RhdGVMaXN0IiwiYWxsQ2xhc3NlcyIsImZ1enp5Q2xhc3NlcyIsImV4YWN0bHlNYXRjaGVzQW55IiwiZXhhY3RDbGFzc2VzIiwiY2xzIiwibmV3UGFyYW1zIiwiZGVyZWdpc3RlciIsImRlcmVnaXN0ZXJTdGF0ZXNDaGFuZ2VkTGlzdGVuZXIiLCJkZXJlZ2lzdGVyT25TdGFydExpc3RlbmVyIiwib25TdGFydCIsImRlcmVnaXN0ZXJTdGF0ZUNoYW5nZVN1Y2Nlc3NMaXN0ZW5lciIsInNldHVwRXZlbnRMaXN0ZW5lcnMiLCJ0cmFuc2l0aW9uIiwiJHVpVmlld1Njcm9sbCIsInJvb3REYXRhIiwiX3Jvb3RWaWV3Q29udGV4dCIsInByZXZpb3VzRWwiLCJjdXJyZW50RWwiLCJ2aWV3Q29uZmlnIiwidW5yZWdpc3RlciIsInJlbmRlcmVyIiwiaW5oZXJpdGVkIiwiYWN0aXZlVUlWaWV3IiwiZnFuIiwiY29uZmlnVXBkYXRlZCIsImNvbmZpZzEiLCJjb25maWcyIiwiY29uZmlnc0VxdWFsIiwidHJhY2VVSVZpZXdDb25maWdVcGRhdGVkIiwidXBkYXRlVmlldyIsImNyZWF0aW9uQ29udGV4dCIsImZyb21QYXJlbnRUYWdDb25maWciLCJmcm9tUGFyZW50VGFnIiwiYW5pbUVudGVyIiwiYW5pbUxlYXZlIiwiJHVpVmlld0RhdGEiLCIkdWlWaWV3QW5pbSIsIiRhbmltRW50ZXIiLCIkYW5pbUxlYXZlIiwiJCRhbmltTGVhdmUiLCJjbG9uZWQiLCJ0cmFjZVVJVmlld0V2ZW50IiwiX3ZpZXdEYXRhXzEiLCJjbGVhbnVwTGFzdFZpZXciLCJyZWdpc3RlclVJVmlldyIsImhhc0NvbXBvbmVudEltcGwiLCJfdWlDYW5FeGl0SWQiLCJ2aWV3U3RhdGUiLCJob29rT3B0aW9ucyIsInVpT25QYXJhbXNDaGFuZ2VkIiwicmVzb2x2ZUNvbnRleHQiLCJ2aWV3Q3JlYXRpb25UcmFuc18xIiwiZXhpdGluZyIsInRvUGFyYW1zIiwiZnJvbVBhcmFtcyIsImdldE5vZGVTY2hlbWEiLCJwYXJhbVNjaGVtYSIsInRvU2NoZW1hIiwiZnJvbVNjaGVtYSIsImNoYW5nZWRUb1BhcmFtcyIsInBhcmFtIiwiY2hhbmdlZEtleXNfMSIsInVpQ2FuRXhpdCIsImlkXzEiLCJwcmV2VHJ1dGh5QW5zd2VyXzEiLCJyZWRpcmVjdGVkRnJvbSIsImNyaXRlcmlhIiwib25CZWZvcmUiLCJpZHMiLCJ1c2VBbmNob3JTY3JvbGwiLCJkZWZhdWx0IiwiZyIsImV2YWwiLCJIb21lQ29udHJvbGxlciIsIl9jbGFzc0NhbGxDaGVjayIsImFwaSIsIm5nUG9zdCIsInhuYW1lIiwiU1RBVFVTIiwibGlzdEJhbmsiLCJMSVNUX0JBTksiLCJzZXJ2ZXIiLCJBcGkiLCJodHRwU2VydmVyIiwicmVzcG9uZSIsImZhaWwiLCJhbHdheXMiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIm5vR2xvYmFsIiwiZ2V0UHJvdG8iLCJjbGFzczJ0eXBlIiwiaGFzT3duIiwiZm5Ub1N0cmluZyIsIk9iamVjdEZ1bmN0aW9uU3RyaW5nIiwic3VwcG9ydCIsInByZXNlcnZlZFNjcmlwdEF0dHJpYnV0ZXMiLCJub01vZHVsZSIsIkRPTUV2YWwiLCJ0b1R5cGUiLCJydHJpbSIsImpxdWVyeSIsInRvQXJyYXkiLCJwdXNoU3RhY2siLCJwcmV2T2JqZWN0IiwiZWFjaCIsImNvcHlJc0FycmF5IiwiaXNQbGFpbk9iamVjdCIsInJhbmRvbSIsImlzUmVhZHkiLCJwcm90byIsIkN0b3IiLCJpc0VtcHR5T2JqZWN0IiwiZ2xvYmFsRXZhbCIsIm1ha2VBcnJheSIsImdyZXAiLCJpbnZlcnQiLCJjYWxsYmFja0V4cGVjdCIsImd1aWQiLCJTaXp6bGUiLCJFeHByIiwiaXNYTUwiLCJ0b2tlbml6ZSIsIm91dGVybW9zdENvbnRleHQiLCJzb3J0SW5wdXQiLCJoYXNEdXBsaWNhdGUiLCJzZXREb2N1bWVudCIsImRvY0VsZW0iLCJkb2N1bWVudElzSFRNTCIsInJidWdneVFTQSIsInJidWdneU1hdGNoZXMiLCJwcmVmZXJyZWREb2MiLCJkaXJydW5zIiwiY2xhc3NDYWNoZSIsImNyZWF0ZUNhY2hlIiwidG9rZW5DYWNoZSIsImNvbXBpbGVyQ2FjaGUiLCJzb3J0T3JkZXIiLCJwdXNoX25hdGl2ZSIsImJvb2xlYW5zIiwid2hpdGVzcGFjZSIsInBzZXVkb3MiLCJyd2hpdGVzcGFjZSIsInJjb21tYSIsInJjb21iaW5hdG9ycyIsInJhdHRyaWJ1dGVRdW90ZXMiLCJycHNldWRvIiwicmlkZW50aWZpZXIiLCJtYXRjaEV4cHIiLCJJRCIsIkNMQVNTIiwiVEFHIiwiQVRUUiIsIlBTRVVETyIsIkNISUxEIiwiYm9vbCIsIm5lZWRzQ29udGV4dCIsInJpbnB1dHMiLCJyaGVhZGVyIiwicm5hdGl2ZSIsInJxdWlja0V4cHIiLCJyc2libGluZyIsInJ1bmVzY2FwZSIsImZ1bmVzY2FwZSIsImVzY2FwZWQiLCJlc2NhcGVkV2hpdGVzcGFjZSIsImhpZ2giLCJyY3NzZXNjYXBlIiwiZmNzc2VzY2FwZSIsImFzQ29kZVBvaW50IiwidW5sb2FkSGFuZGxlciIsImRpc2FibGVkQW5jZXN0b3IiLCJhZGRDb21iaW5hdG9yIiwiZGlyIiwiZWxzIiwic2VlZCIsIm5pZCIsIm5ld1NlbGVjdG9yIiwibmV3Q29udGV4dCIsIm93bmVyRG9jdW1lbnQiLCJxc2EiLCJ0b1NlbGVjdG9yIiwidGVzdENvbnRleHQiLCJxc2FFcnJvciIsImNhY2hlTGVuZ3RoIiwibWFya0Z1bmN0aW9uIiwiYXNzZXJ0IiwiYWRkSGFuZGxlIiwiYXR0ckhhbmRsZSIsInNpYmxpbmdDaGVjayIsImN1ciIsInNvdXJjZUluZGV4IiwiY3JlYXRlSW5wdXRQc2V1ZG8iLCJjcmVhdGVCdXR0b25Qc2V1ZG8iLCJjcmVhdGVEaXNhYmxlZFBzZXVkbyIsImlzRGlzYWJsZWQiLCJjcmVhdGVQb3NpdGlvbmFsUHNldWRvIiwibWF0Y2hJbmRleGVzIiwiaGFzQ29tcGFyZSIsInN1YldpbmRvdyIsImRlZmF1bHRWaWV3IiwiYXR0YWNoRXZlbnQiLCJnZXRCeUlkIiwiYXR0cklkIiwiZ2V0QXR0cmlidXRlTm9kZSIsIm1hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm9NYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsImRpc2Nvbm5lY3RlZE1hdGNoIiwiYWRvd24iLCJidXAiLCJzb3J0RGV0YWNoZWQiLCJhdXAiLCJhcCIsImJwIiwic3BlY2lmaWVkIiwic2VsIiwidW5pcXVlU29ydCIsImR1cGxpY2F0ZXMiLCJkZXRlY3REdXBsaWNhdGVzIiwic29ydFN0YWJsZSIsInNlbGVjdG9ycyIsImNyZWF0ZVBzZXVkbyIsIj4iLCIgIiwiKyIsInByZUZpbHRlciIsImV4Y2VzcyIsInVucXVvdGVkIiwibm9kZU5hbWVTZWxlY3RvciIsImNoZWNrIiwic2ltcGxlIiwiZm9yd2FyZCIsIm9mVHlwZSIsInhtbCIsInVuaXF1ZUNhY2hlIiwib3V0ZXJDYWNoZSIsIm5vZGVJbmRleCIsInVzZUNhY2hlIiwidW5pcXVlSUQiLCJwc2V1ZG8iLCJzZXRGaWx0ZXJzIiwibWF0Y2hlZCIsInVubWF0Y2hlZCIsImlubmVyVGV4dCIsImxhbmciLCJlbGVtTGFuZyIsImFjdGl2ZUVsZW1lbnQiLCJoYXNGb2N1cyIsInRhYkluZGV4IiwiZXZlbiIsIm9kZCIsImx0IiwiZ3QiLCJwYXNzd29yZCIsImltYWdlIiwiY29tYmluYXRvciIsImNoZWNrTm9uRWxlbWVudHMiLCJkb25lTmFtZSIsIm9sZENhY2hlIiwibmV3Q2FjaGUiLCJlbGVtZW50TWF0Y2hlciIsImNvbmRlbnNlIiwibmV3VW5tYXRjaGVkIiwibWFwcGVkIiwic2V0TWF0Y2hlciIsInBvc3RGaWx0ZXIiLCJwb3N0RmluZGVyIiwicG9zdFNlbGVjdG9yIiwidGVtcCIsInByZU1hcCIsInBvc3RNYXAiLCJwcmVleGlzdGluZyIsImNvbnRleHRzIiwibXVsdGlwbGVDb250ZXh0cyIsIm1hdGNoZXJJbiIsIm1hdGNoZXJPdXQiLCJtYXRjaGVyRnJvbVRva2VucyIsImNoZWNrQ29udGV4dCIsImxlYWRpbmdSZWxhdGl2ZSIsImltcGxpY2l0UmVsYXRpdmUiLCJtYXRjaENvbnRleHQiLCJtYXRjaEFueUNvbnRleHQiLCJwYXJzZU9ubHkiLCJzb0ZhciIsInByZUZpbHRlcnMiLCJjYWNoZWQiLCJzZXRNYXRjaGVycyIsImVsZW1lbnRNYXRjaGVycyIsImJ5U2V0IiwiYnlFbGVtZW50Iiwic3VwZXJNYXRjaGVyIiwib3V0ZXJtb3N0IiwibWF0Y2hlZENvdW50Iiwic2V0TWF0Y2hlZCIsImNvbnRleHRCYWNrdXAiLCJkaXJydW5zVW5pcXVlIiwibWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzIiwidW5pcXVlIiwiaXNYTUxEb2MiLCJlc2NhcGVTZWxlY3RvciIsInVudGlsIiwidHJ1bmNhdGUiLCJzaWJsaW5ncyIsInJuZWVkc0NvbnRleHQiLCJyc2luZ2xlVGFnIiwid2lubm93IiwicXVhbGlmaWVyIiwicm9vdGpRdWVyeSIsInBhcnNlSFRNTCIsInJwYXJlbnRzcHJldiIsImd1YXJhbnRlZWRVbmlxdWUiLCJwcmV2IiwidGFyZ2V0cyIsImNsb3Nlc3QiLCJwcmV2QWxsIiwiYWRkQmFjayIsInBhcmVudHMiLCJwYXJlbnRzVW50aWwiLCJuZXh0QWxsIiwibmV4dFVudGlsIiwicHJldlVudGlsIiwicm5vdGh0bWx3aGl0ZSIsIklkZW50aXR5IiwiVGhyb3dlciIsImV4IiwiYWRvcHRWYWx1ZSIsIm5vVmFsdWUiLCJDYWxsYmFja3MiLCJjcmVhdGVPcHRpb25zIiwiZmlyaW5nIiwibWVtb3J5IiwiZmlyZWQiLCJsb2NrZWQiLCJmaXJpbmdJbmRleCIsImZpcmUiLCJvbmNlIiwic3RvcE9uRmFsc2UiLCJkaXNhYmxlIiwibG9jayIsImZpcmVXaXRoIiwiRGVmZXJyZWQiLCJuZXdEZWZlciIsInJldHVybmVkIiwic3BlY2lhbCIsIm1pZ2h0VGhyb3ciLCJub3RpZnlXaXRoIiwicmVzb2x2ZVdpdGgiLCJleGNlcHRpb25Ib29rIiwic3RhY2tUcmFjZSIsInJlamVjdFdpdGgiLCJnZXRTdGFja0hvb2siLCJzdGF0ZVN0cmluZyIsInNpbmdsZVZhbHVlIiwicmVtYWluaW5nIiwicmVzb2x2ZUNvbnRleHRzIiwicmVzb2x2ZVZhbHVlcyIsIm1hc3RlciIsInVwZGF0ZUZ1bmMiLCJyZXJyb3JOYW1lcyIsInJlYWR5RXhjZXB0aW9uIiwicmVhZHlMaXN0IiwiY29tcGxldGVkIiwicmVhZHlXYWl0Iiwid2FpdCIsImRvU2Nyb2xsIiwiYWNjZXNzIiwiY2hhaW5hYmxlIiwiZW1wdHlHZXQiLCJyYXciLCJidWxrIiwicm1zUHJlZml4IiwicmRhc2hBbHBoYSIsImZjYW1lbENhc2UiLCJhY2NlcHREYXRhIiwib3duZXIiLCJEYXRhIiwiY29uZmlndXJhYmxlIiwiZGF0YVByaXYiLCJkYXRhVXNlciIsInJicmFjZSIsInJtdWx0aURhc2giLCJkYXRhQXR0ciIsImdldERhdGEiLCJfcmVtb3ZlRGF0YSIsImRlcXVldWUiLCJzdGFydExlbmd0aCIsImhvb2tzIiwiX3F1ZXVlSG9va3MiLCJzdG9wIiwiY2xlYXJRdWV1ZSIsInBudW0iLCJyY3NzTnVtIiwiY3NzRXhwYW5kIiwiaXNIaWRkZW5XaXRoaW5UcmVlIiwiZGlzcGxheSIsInN3YXAiLCJhZGp1c3RDU1MiLCJ2YWx1ZVBhcnRzIiwidHdlZW4iLCJhZGp1c3RlZCIsInNjYWxlIiwibWF4SXRlcmF0aW9ucyIsInVuaXQiLCJjc3NOdW1iZXIiLCJpbml0aWFsSW5Vbml0IiwiZGVmYXVsdERpc3BsYXlNYXAiLCJnZXREZWZhdWx0RGlzcGxheSIsInNob3dIaWRlIiwic2hvdyIsImhpZGUiLCJ0b2dnbGUiLCJyY2hlY2thYmxlVHlwZSIsInJ0YWdOYW1lIiwicnNjcmlwdFR5cGUiLCJnZXRBbGwiLCJzZXRHbG9iYWxFdmFsIiwicmVmRWxlbWVudHMiLCJyaHRtbCIsImJ1aWxkRnJhZ21lbnQiLCJzY3JpcHRzIiwic2VsZWN0aW9uIiwiaWdub3JlZCIsImh0bWxQcmVmaWx0ZXIiLCJkaXYiLCJjaGVja0Nsb25lIiwibm9DbG9uZUNoZWNrZWQiLCJya2V5RXZlbnQiLCJybW91c2VFdmVudCIsInJ0eXBlbmFtZXNwYWNlIiwicmV0dXJuVHJ1ZSIsInJldHVybkZhbHNlIiwic2FmZUFjdGl2ZUVsZW1lbnQiLCJvcmlnRm4iLCJoYW5kbGVPYmpJbiIsImV2ZW50SGFuZGxlIiwiaGFuZGxlT2JqIiwiaGFuZGxlcnMiLCJuYW1lc3BhY2VzIiwib3JpZ1R5cGUiLCJlbGVtRGF0YSIsInRyaWdnZXJlZCIsImRpc3BhdGNoIiwiZGVsZWdhdGVUeXBlIiwiYmluZFR5cGUiLCJkZWxlZ2F0ZUNvdW50Iiwic2V0dXAiLCJtYXBwZWRUeXBlcyIsIm9yaWdDb3VudCIsInRlYXJkb3duIiwicmVtb3ZlRXZlbnQiLCJuYXRpdmVFdmVudCIsImhhbmRsZXJRdWV1ZSIsImZpeCIsImRlbGVnYXRlVGFyZ2V0IiwicHJlRGlzcGF0Y2giLCJpc1Byb3BhZ2F0aW9uU3RvcHBlZCIsImN1cnJlbnRUYXJnZXQiLCJybmFtZXNwYWNlIiwicG9zdERpc3BhdGNoIiwibWF0Y2hlZEhhbmRsZXJzIiwibWF0Y2hlZFNlbGVjdG9ycyIsImFkZFByb3AiLCJFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJ3cml0YWJsZSIsIm5vQnViYmxlIiwiY2xpY2siLCJiZWZvcmV1bmxvYWQiLCJyZXR1cm5WYWx1ZSIsInByb3BzIiwidGltZVN0YW1wIiwibm93IiwiaXNTaW11bGF0ZWQiLCJhbHRLZXkiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImNoYW5nZWRUb3VjaGVzIiwiZGV0YWlsIiwiZXZlbnRQaGFzZSIsInBhZ2VYIiwicGFnZVkiLCJjaGFyIiwiY2hhckNvZGUiLCJidXR0b25zIiwiY2xpZW50WCIsImNsaWVudFkiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwic2NyZWVuWCIsInNjcmVlblkiLCJ0YXJnZXRUb3VjaGVzIiwidG9FbGVtZW50IiwidG91Y2hlcyIsInBvaW50ZXJlbnRlciIsInBvaW50ZXJsZWF2ZSIsIm9yaWciLCJyeGh0bWxUYWciLCJybm9Jbm5lcmh0bWwiLCJyY2hlY2tlZCIsInJjbGVhblNjcmlwdCIsIm1hbmlwdWxhdGlvblRhcmdldCIsImRpc2FibGVTY3JpcHQiLCJyZXN0b3JlU2NyaXB0IiwiY2xvbmVDb3B5RXZlbnQiLCJwZGF0YU9sZCIsInBkYXRhQ3VyIiwidWRhdGFPbGQiLCJ1ZGF0YUN1ciIsImZpeElucHV0IiwiZG9tTWFuaXAiLCJoYXNTY3JpcHRzIiwiaU5vQ2xvbmUiLCJ2YWx1ZUlzRnVuY3Rpb24iLCJfZXZhbFVybCIsImRhdGFBbmRFdmVudHMiLCJkZWVwRGF0YUFuZEV2ZW50cyIsInNyY0VsZW1lbnRzIiwiZGVzdEVsZW1lbnRzIiwiaW5QYWdlIiwiYXBwZW5kVG8iLCJwcmVwZW5kVG8iLCJpbnNlcnRBZnRlciIsInJlcGxhY2VBbGwiLCJvcmlnaW5hbCIsImluc2VydCIsInJudW1ub25weCIsImdldFN0eWxlcyIsIm9wZW5lciIsInJib3hTdHlsZSIsImN1ckNTUyIsIndpZHRoIiwibWluV2lkdGgiLCJtYXhXaWR0aCIsImdldFByb3BlcnR5VmFsdWUiLCJwaXhlbEJveFN0eWxlcyIsImFkZEdldEhvb2tJZiIsImNvbmRpdGlvbkZuIiwiY29tcHV0ZVN0eWxlVGVzdHMiLCJjb250YWluZXIiLCJkaXZTdHlsZSIsInBpeGVsUG9zaXRpb25WYWwiLCJyZWxpYWJsZU1hcmdpbkxlZnRWYWwiLCJyb3VuZFBpeGVsTWVhc3VyZXMiLCJtYXJnaW5MZWZ0IiwicGl4ZWxCb3hTdHlsZXNWYWwiLCJib3hTaXppbmdSZWxpYWJsZVZhbCIsInNjcm9sbGJveFNpemVWYWwiLCJtZWFzdXJlIiwiYmFja2dyb3VuZENsaXAiLCJjbGVhckNsb25lU3R5bGUiLCJib3hTaXppbmdSZWxpYWJsZSIsInBpeGVsUG9zaXRpb24iLCJyZWxpYWJsZU1hcmdpbkxlZnQiLCJzY3JvbGxib3hTaXplIiwicmRpc3BsYXlzd2FwIiwicmN1c3RvbVByb3AiLCJjc3NTaG93IiwidmlzaWJpbGl0eSIsImNzc05vcm1hbFRyYW5zZm9ybSIsImxldHRlclNwYWNpbmciLCJmb250V2VpZ2h0IiwiY3NzUHJlZml4ZXMiLCJlbXB0eVN0eWxlIiwiZmluYWxQcm9wTmFtZSIsImNzc1Byb3BzIiwiY2FwTmFtZSIsInZlbmRvclByb3BOYW1lIiwic2V0UG9zaXRpdmVOdW1iZXIiLCJzdWJ0cmFjdCIsImJveE1vZGVsQWRqdXN0bWVudCIsImRpbWVuc2lvbiIsImJveCIsImlzQm9yZGVyQm94IiwiY29tcHV0ZWRWYWwiLCJkZWx0YSIsImNlaWwiLCJnZXRXaWR0aE9ySGVpZ2h0IiwidmFsdWVJc0JvcmRlckJveCIsIlR3ZWVuIiwiZWFzaW5nIiwiY3NzSG9va3MiLCJvcGFjaXR5IiwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiLCJjb2x1bW5Db3VudCIsImZpbGxPcGFjaXR5IiwiZmxleEdyb3ciLCJmbGV4U2hyaW5rIiwibGluZUhlaWdodCIsIm9yZGVyIiwib3JwaGFucyIsIndpZG93cyIsInpJbmRleCIsInpvb20iLCJvcmlnTmFtZSIsImlzQ3VzdG9tUHJvcCIsInNldFByb3BlcnR5IiwiZ2V0Q2xpZW50UmVjdHMiLCJtYXJnaW4iLCJwYWRkaW5nIiwiYm9yZGVyIiwiZXhwYW5kIiwiZXhwYW5kZWQiLCJwcm9wSG9va3MiLCJwZXJjZW50IiwiZWFzZWQiLCJkdXJhdGlvbiIsImZ4Iiwic2Nyb2xsVG9wIiwic2Nyb2xsTGVmdCIsImxpbmVhciIsInN3aW5nIiwiY29zIiwiUEkiLCJmeE5vdyIsImluUHJvZ3Jlc3MiLCJyZnh0eXBlcyIsInJydW4iLCJzY2hlZHVsZSIsInRpY2siLCJjcmVhdGVGeE5vdyIsImdlbkZ4IiwiaW5jbHVkZVdpZHRoIiwiaGVpZ2h0IiwiY3JlYXRlVHdlZW4iLCJBbmltYXRpb24iLCJ0d2VlbmVycyIsInN0b3BwZWQiLCJwcmVmaWx0ZXJzIiwiY3VycmVudFRpbWUiLCJzdGFydFRpbWUiLCJ0d2VlbnMiLCJzcGVjaWFsRWFzaW5nIiwib3JpZ2luYWxQcm9wZXJ0aWVzIiwib3JpZ2luYWxPcHRpb25zIiwiZ290b0VuZCIsInByb3BGaWx0ZXIiLCJhbmltIiwiKiIsInR3ZWVuZXIiLCJvbGRmaXJlIiwicHJvcFR3ZWVuIiwicmVzdG9yZURpc3BsYXkiLCJpc0JveCIsImRhdGFTaG93IiwidW5xdWV1ZWQiLCJvdmVyZmxvdyIsIm92ZXJmbG93WCIsIm92ZXJmbG93WSIsInByZWZpbHRlciIsInNwZWVkIiwib3B0Iiwic3BlZWRzIiwiZmFkZVRvIiwib3B0YWxsIiwiZG9BbmltYXRpb24iLCJmaW5pc2giLCJzdG9wUXVldWUiLCJ0aW1lcnMiLCJjc3NGbiIsInNsaWRlRG93biIsInNsaWRlVXAiLCJzbGlkZVRvZ2dsZSIsImZhZGVJbiIsImZhZGVPdXQiLCJmYWRlVG9nZ2xlIiwic2xvdyIsImZhc3QiLCJjaGVja09uIiwib3B0U2VsZWN0ZWQiLCJyYWRpb1ZhbHVlIiwiYm9vbEhvb2siLCJuVHlwZSIsImF0dHJIb29rcyIsImF0dHJOYW1lcyIsImxvd2VyY2FzZU5hbWUiLCJyZm9jdXNhYmxlIiwicmNsaWNrYWJsZSIsInN0cmlwQW5kQ29sbGFwc2UiLCJnZXRDbGFzcyIsImNsYXNzZXNUb0FycmF5IiwicmVtb3ZlUHJvcCIsInByb3BGaXgiLCJ0YWJpbmRleCIsImZvciIsImNsYXNzIiwiY3VyVmFsdWUiLCJmaW5hbFZhbHVlIiwic3RhdGVWYWwiLCJpc1ZhbGlkVmFsdWUiLCJjbGFzc05hbWVzIiwicnJldHVybiIsInZhbEhvb2tzIiwib3B0aW9uU2V0IiwiZm9jdXNpbiIsInJmb2N1c01vcnBoIiwic3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2siLCJvbmx5SGFuZGxlcnMiLCJidWJibGVUeXBlIiwib250eXBlIiwibGFzdEVsZW1lbnQiLCJldmVudFBhdGgiLCJpc1RyaWdnZXIiLCJwYXJlbnRXaW5kb3ciLCJzaW11bGF0ZSIsImF0dGFjaGVzIiwibm9uY2UiLCJycXVlcnkiLCJwYXJzZVhNTCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInJicmFja2V0IiwickNSTEYiLCJyc3VibWl0dGVyVHlwZXMiLCJyc3VibWl0dGFibGUiLCJidWlsZFBhcmFtcyIsInRyYWRpdGlvbmFsIiwidmFsdWVPckZ1bmN0aW9uIiwic2VyaWFsaXplQXJyYXkiLCJyMjAiLCJyaGFzaCIsInJhbnRpQ2FjaGUiLCJyaGVhZGVycyIsInJub0NvbnRlbnQiLCJycHJvdG9jb2wiLCJ0cmFuc3BvcnRzIiwiYWxsVHlwZXMiLCJvcmlnaW5BbmNob3IiLCJhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMiLCJzdHJ1Y3R1cmUiLCJkYXRhVHlwZUV4cHJlc3Npb24iLCJkYXRhVHlwZSIsImRhdGFUeXBlcyIsImluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzIiwianFYSFIiLCJpbnNwZWN0ZWQiLCJzZWVraW5nVHJhbnNwb3J0IiwiaW5zcGVjdCIsInByZWZpbHRlck9yRmFjdG9yeSIsImRhdGFUeXBlT3JUcmFuc3BvcnQiLCJhamF4RXh0ZW5kIiwiZmxhdE9wdGlvbnMiLCJhamF4U2V0dGluZ3MiLCJsYXN0TW9kaWZpZWQiLCJldGFnIiwiaXNMb2NhbCIsInByb2Nlc3NEYXRhIiwiYWNjZXB0cyIsInJlc3BvbnNlRmllbGRzIiwiY29udmVydGVycyIsIiogdGV4dCIsInRleHQgaHRtbCIsInRleHQganNvbiIsInRleHQgeG1sIiwiYWpheFNldHVwIiwic2V0dGluZ3MiLCJhamF4UHJlZmlsdGVyIiwiYWpheFRyYW5zcG9ydCIsImFqYXgiLCJ0cmFuc3BvcnQiLCJjYWNoZVVSTCIsInJlc3BvbnNlSGVhZGVyc1N0cmluZyIsInJlc3BvbnNlSGVhZGVycyIsInRpbWVvdXRUaW1lciIsInVybEFuY2hvciIsImZpcmVHbG9iYWxzIiwidW5jYWNoZWQiLCJjYWxsYmFja0NvbnRleHQiLCJnbG9iYWxFdmVudENvbnRleHQiLCJjb21wbGV0ZURlZmVycmVkIiwic3RhdHVzQ29kZSIsInJlcXVlc3RIZWFkZXJzIiwicmVxdWVzdEhlYWRlcnNOYW1lcyIsInN0ckFib3J0IiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJvdmVycmlkZU1pbWVUeXBlIiwibWltZVR5cGUiLCJmaW5hbFRleHQiLCJjcm9zc0RvbWFpbiIsImhhc0NvbnRlbnQiLCJpZk1vZGlmaWVkIiwiYmVmb3JlU2VuZCIsInN1Y2Nlc3MiLCJuYXRpdmVTdGF0dXNUZXh0IiwicmVzcG9uc2VzIiwibW9kaWZpZWQiLCJjdCIsImZpbmFsRGF0YVR5cGUiLCJmaXJzdERhdGFUeXBlIiwiYWpheEhhbmRsZVJlc3BvbnNlcyIsImNvbnYyIiwiY29udiIsImRhdGFGaWx0ZXIiLCJ0aHJvd3MiLCJhamF4Q29udmVydCIsImdldEpTT04iLCJnZXRTY3JpcHQiLCJ3cmFwQWxsIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJ3cmFwSW5uZXIiLCJodG1sSXNGdW5jdGlvbiIsInVud3JhcCIsInZpc2libGUiLCJvZmZzZXRIZWlnaHQiLCJ4aHJTdWNjZXNzU3RhdHVzIiwiMCIsIjEyMjMiLCJ4aHJTdXBwb3J0ZWQiLCJjb3JzIiwiZXJyb3JDYWxsYmFjayIsInVzZXJuYW1lIiwieGhyRmllbGRzIiwib25yZWFkeXN0YXRlY2hhbmdlIiwiYmluYXJ5IiwidGV4dCBzY3JpcHQiLCJjaGFyc2V0Iiwic2NyaXB0Q2hhcnNldCIsIm9sZENhbGxiYWNrcyIsInJqc29ucCIsImpzb25wIiwianNvbnBDYWxsYmFjayIsIm9yaWdpbmFsU2V0dGluZ3MiLCJjYWxsYmFja05hbWUiLCJvdmVyd3JpdHRlbiIsInJlc3BvbnNlQ29udGFpbmVyIiwianNvblByb3AiLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJpbXBsZW1lbnRhdGlvbiIsImtlZXBTY3JpcHRzIiwiYW5pbWF0ZWQiLCJzZXRPZmZzZXQiLCJjdXJQb3NpdGlvbiIsImN1ckxlZnQiLCJjdXJDU1NUb3AiLCJjdXJUb3AiLCJjdXJPZmZzZXQiLCJjdXJDU1NMZWZ0IiwiY3VyRWxlbSIsInVzaW5nIiwicmVjdCIsInBhZ2VZT2Zmc2V0IiwicGFnZVhPZmZzZXQiLCJvZmZzZXRQYXJlbnQiLCJwYXJlbnRPZmZzZXQiLCJIZWlnaHQiLCJXaWR0aCIsIiIsImRlZmF1bHRFeHRyYSIsImZ1bmNOYW1lIiwiaG92ZXIiLCJmbk92ZXIiLCJmbk91dCIsInVuZGVsZWdhdGUiLCJwcm94eSIsImhvbGRSZWFkeSIsImhvbGQiLCJwYXJzZUpTT04iLCJpc051bWVyaWMiLCJfalF1ZXJ5IiwiXyQiLCJub0NvbmZsaWN0IiwiYWNjb3VudE5hbWUiLCJSZWplY3RUeXBlIiwiR2xvYiIsImdsb2IiLCJyZWdleHBTdHJpbmciLCJzZWciLCJxdWV1ZV9RdWV1ZSIsIlF1ZXVlIiwiX2l0ZW1zIiwiX2xpbWl0IiwiX2V2aWN0TGlzdGVuZXJzIiwib25FdmljdCIsImVucXVldWUiLCJldmljdCIsImNsZWFyIiwicGVla1RhaWwiLCJwZWVrSGVhZCIsInJlamVjdEZhY3RvcnlfaWQiLCJyZWplY3RGYWN0b3J5X1JlamVjdGlvbiIsIlJlamVjdGlvbiIsImlzUmVqZWN0aW9uUHJvbWlzZSIsImhvZiIsIl90cmFuc2l0aW9uUmVqZWN0aW9uIiwic3VwZXJzZWRlZCIsInJlamVjdGlvbiIsIlNVUEVSU0VERUQiLCJyZWRpcmVjdGVkIiwiaW52YWxpZCIsIklOVkFMSUQiLCJJR05PUkVEIiwiYWJvcnRlZCIsIkFCT1JURUQiLCJlcnJvcmVkIiwiRVJST1IiLCJub3JtYWxpemUiLCJkZXRhaWxTdHJpbmciLCJ0b1Byb21pc2UiLCJtYXhMZW5ndGgiLCJwYWRTdHJpbmciLCJmdW5jdGlvblRvU3RyaW5nIiwiZm5TdHIiLCJuYW1lZEZ1bmN0aW9uTWF0Y2giLCJfZm4iLCJpc1JlamVjdGlvbiIsInN0cmluZ2lmeVBhdHRlcm4iLCJiZWZvcmVBZnRlclN1YnN0ciIsImhvc3RSZWdleCIsInN0cmlwTGFzdFBhdGhFbGVtZW50Iiwic3BsaXRIYXNoIiwic3BsaXRRdWVyeSIsInNwbGl0RXF1YWwiLCJ0cmltSGFzaFZhbCIsInNwbGl0T25EZWxpbSIsImRlbGltIiwiam9pbk5laWdoYm9yc1IiLCJ1aVZpZXdTdHJpbmciLCJ1aXZpZXciLCJub3JtYWxpemVkQ2F0IiwiQ2F0ZWdvcnkiLCJjb25zb2xldGFibGUiLCJ0YWJsZSIsIl90aWQiLCJfcmlkIiwidHJhbnNMYmwiLCJ0cmFjZV9UcmFjZSIsIlRyYWNlIiwiX2VuYWJsZWQiLCJfc2V0IiwiY2F0ZWdvcmllcyIsImNhdGVnb3J5IiwiZW5hYmxlIiwidHJhY2VUcmFuc2l0aW9uU3RhcnQiLCJUUkFOU0lUSU9OIiwidHJhY2VUcmFuc2l0aW9uSWdub3JlZCIsInRyYWNlSG9va0ludm9jYXRpb24iLCJIT09LIiwicmVnaXN0ZXJlZEhvb2siLCJ0cmFjZUhvb2tSZXN1bHQiLCJob29rUmVzdWx0IiwidHJhbnNpdGlvbk9wdGlvbnMiLCJ0cmFjZVJlc29sdmVQYXRoIiwiUkVTT0xWRSIsInRyYWNlUmVzb2x2YWJsZVJlc29sdmVkIiwidHJhY2VFcnJvciIsInRyYWNlU3VjY2VzcyIsImZpbmFsU3RhdGUiLCJ2aWV3RGF0YSIsIlVJVklFVyIsInRyYWNlVmlld1N5bmMiLCJWSUVXQ09ORklHIiwidWl2aGVhZGVyIiwiX2EiLCJfYiIsInVpdiIsImxvY2FsZUNvbXBhcmUiLCJ2aWV3Q29uZmlnU3RyaW5nIiwidHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50IiwicGFyYW1UeXBlX1BhcmFtVHlwZSIsIlBhcmFtVHlwZSIsIiRzdWJQYXR0ZXJuIiwic3ViIiwiJGFzQXJyYXkiLCJpc1NlYXJjaCIsImFycmF5V3JhcCIsImFycmF5SGFuZGxlciIsImFsbFRydXRoeU1vZGUiLCJhcnJheVVud3JhcCIsImFycmF5RXF1YWxzSGFuZGxlciIsInZhbDEiLCJ2YWwyIiwicGFyYW1UeXBlRm4iLCJ3cmFwcGVyRm4iLCJkeW5hbWljIiwiJGFycmF5TW9kZSIsIkRlZlR5cGUiLCJpc1Nob3J0aGFuZCIsImdldFBhcmFtRGVjbGFyYXRpb24iLCJwYXJhbU5hbWUiLCJub1JlbG9hZE9uU2VhcmNoIiwicmVsb2FkT25TZWFyY2giLCJTRUFSQ0giLCJkZWZhdWx0Q29uZmlnIiwicGFyYW1Db25maWciLCJnZXRTdGF0aWNEZWZhdWx0VmFsdWUiLCIkJGZuIiwidW53cmFwU2hvcnRoYW5kIiwicGFyYW1fUGFyYW0iLCJQYXJhbSIsInVybFR5cGUiLCJwYXJhbVR5cGVzIiwiQ09ORklHIiwiUEFUSCIsImdldFR5cGUiLCJhcnJheU1vZGUiLCJhcnJheURlZmF1bHRzIiwiYXJyYXlQYXJhbU5vbWVuY2xhdHVyZSIsImdldEFycmF5TW9kZSIsImlzT3B0aW9uYWwiLCJzcXVhc2giLCJkZWZhdWx0UG9saWN5IiwiZ2V0U3F1YXNoUG9saWN5IiwiZGVmYXVsdFNxdWFzaFBvbGljeSIsImNvbmZpZ3VyZWRLZXlzIiwiZ2V0UmVwbGFjZSIsInBhcmFtc18xIiwidmFsdWVzMSIsInZhbHVlczIiLCJ2YWxpZGF0ZXMiLCJpc0RlZmF1bHRWYWx1ZSIsInJlcGxhY2VTcGVjaWFsVmFsdWVzIiwiX2RlZmF1bHRWYWx1ZUNhY2hlIiwiY29yZXNlcnZpY2VzIiwiZ2V0RGVmYXVsdFZhbHVlIiwiZW5jb2RlZCIsInBhcmFtVHlwZXNfUGFyYW1UeXBlcyIsIlBhcmFtVHlwZXMiLCJ0eXBlUXVldWUiLCJkZWZhdWx0VHlwZXMiLCJkZWZpbml0aW9uRm4iLCJfZmx1c2hUeXBlUXVldWUiLCJtYWtlRGVmYXVsdFR5cGUiLCJ2YWxUb1N0cmluZyIsImRlZmF1bHRUeXBlQmFzZSIsInF1ZXJ5IiwiaW50IiwiY2FwdHVyZSIsImluaXREZWZhdWx0VHlwZXMiLCJzdGF0ZVBhcmFtc19TdGF0ZVBhcmFtcyIsIlN0YXRlUGFyYW1zIiwiJGluaGVyaXQiLCIkdG8iLCJwYXJlbnRQYXJhbXMiLCJpbmhlcml0TGlzdCIsInBhdGhOb2RlX1BhdGhOb2RlIiwiUGF0aE5vZGUiLCJzdGF0ZU9yTm9kZSIsInBhcmFtZXRlcnMiLCJhcHBseVJhd1BhcmFtcyIsInBEZWYiLCJwYXJhbURlZiIsImdldFBhcmFtVmFsIiwicGFyYW1ldGVyIiwicGFyYW1zRm4iLCJ0YXJnZXRTdGF0ZV9UYXJnZXRTdGF0ZSIsIlRhcmdldFN0YXRlIiwiX3N0YXRlUmVnaXN0cnkiLCJfaWRlbnRpZmllciIsIl9wYXJhbXMiLCJfb3B0aW9ucyIsIl9kZWZpbml0aW9uIiwiZXhpc3RzIiwidmFsaWQiLCJ3aXRoU3RhdGUiLCJ3aXRoUGFyYW1zIiwid2l0aE9wdGlvbnMiLCJuZXdPcHRzIiwiaXNEZWYiLCJwYXRoVXRpbHNfUGF0aFV0aWxzIiwiUGF0aFV0aWxzIiwibWFrZVRhcmdldFN0YXRlIiwicmVnaXN0cnkiLCJidWlsZFBhdGgiLCJ0YXJnZXRTdGF0ZSIsImJ1aWxkVG9QYXRoIiwiZnJvbVBhdGgiLCJ0b1BhdGgiLCJpbmhlcml0UGFyYW1zIiwiYXBwbHlWaWV3Q29uZmlncyIsInZpZXdEZWNscyIsInN1YlBhdGgiLCJ2aWV3Q29uZmlncyIsImNyZWF0ZVZpZXdDb25maWciLCJ0b0tleXMiLCJub0luaGVyaXQiLCJ0b05vZGUiLCJ0b1BhcmFtVmFscyIsImluY29taW5nUGFyYW1WYWxzIiwiZnJvbVBhcmFtVmFscyIsIm5vZGVQYXJhbVZhbHMiLCJvd25QYXJhbVZhbHMiLCJyZWxvYWRTdGF0ZSIsInJldGFpbmVkIiwiZW50ZXJpbmciLCJrZWVwIiwibm9kZXNNYXRjaCIsIm5vZGUxIiwibm9kZTIiLCJub25EeW5hbWljUGFyYW1zIiwicmV0YWluZWRXaXRoVG9QYXJhbXMiLCJyZXRhaW5lZE5vZGUiLCJtYXRjaGluZyIsInBhdGhBIiwicGF0aEIiLCJub2RlQSIsIm5vZGVCIiwiZWxlbWVudElkeCIsInJlc29sdmVQb2xpY2llcyIsIkxBWlkiLCJFQUdFUiIsIldBSVQiLCJOT1dBSVQiLCJSWFdBSVQiLCJkZWZhdWx0UmVzb2x2ZVBvbGljeSIsInJlc29sdmFibGVfUmVzb2x2YWJsZSIsInBvbGljeSIsInJlc29sdmVkIiwidGhpc1BvbGljeSIsInN0YXRlUG9saWN5IiwicmVzb2x2ZVBvbGljeSIsImZpbmROb2RlIiwibWF5YmVXYWl0Rm9yUngiLCJvYnNlcnZhYmxlJCIsInRha2UiLCJnZXREZXBlbmRlbmNpZXMiLCJyZXNvbHZlZERlcHMiLCJyZXNvbHZlZFZhbHVlIiwiZnJvbURhdGEiLCJBTExfV0hFTlMiLCJFQUdFUl9XSEVOUyIsIk5BVElWRV9JTkpFQ1RPUl9UT0tFTiIsInJlc29sdmVDb250ZXh0X1Jlc29sdmVDb250ZXh0IiwiX3BhdGgiLCJhZGRSZXNvbHZhYmxlcyIsIm5ld1Jlc29sdmFibGVzIiwicmVzb2x2ZVBhdGgiLCJtYXRjaGVkV2hlbnMiLCJtYXRjaGVzUG9saWN5IiwiYWNjZXB0ZWRWYWxzIiwid2hlbk9yQXN5bmMiLCJub2RlUmVzb2x2YWJsZXMiLCJub3dhaXQiLCJnZXRSZXN1bHQiLCJfaW5qZWN0b3IiLCJyZXNvbHZlQ29udGV4dF9VSUluamVjdG9ySW1wbCIsImF2YWlsYWJsZVJlc29sdmFibGVzIiwiX25vZGUiLCJmcm9tSW5qZWN0b3IiLCJnZXROYXRpdmUiLCJVSUluamVjdG9ySW1wbCIsIm5hdGl2ZSIsImdldEFzeW5jIiwibmFtZUJ1aWxkZXIiLCJzZWxmQnVpbGRlciIsImRhdGFCdWlsZGVyIiwiZ2V0VXJsQnVpbGRlciIsIiR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyIiwicGFyc2VVcmwiLCJpc01hdGNoZXIiLCJuYXZpZ2FibGUiLCJnZXROYXZpZ2FibGVCdWlsZGVyIiwiaXNSb290IiwiZ2V0UGFyYW1zQnVpbGRlciIsInBhcmFtRmFjdG9yeSIsInVybFBhcmFtcyIsIm5vblVybFBhcmFtcyIsInBhdGhCdWlsZGVyIiwiaW5jbHVkZXNCdWlsZGVyIiwicmVzb2x2YWJsZXNCdWlsZGVyIiwiZ2V0VG9rZW4iLCJwcm92aWRlIiwibGl0ZXJhbDJSZXNvbHZhYmxlIiwidXNlRmFjdG9yeSIsImRlcGVuZGVuY2llcyIsInVzZUNsYXNzIiwidXNlVmFsdWUiLCJ1c2VFeGlzdGluZyIsInR1cGxlMlJlc29sdmFibGUiLCJpdGVtMlJlc29sdmFibGUiLCJkZWNsIiwicmVzb2x2ZU9iaiIsIm9iamVjdHMyVHVwbGVzIiwiVHJhbnNpdGlvbkhvb2tQaGFzZSIsIlRyYW5zaXRpb25Ib29rU2NvcGUiLCJzdGF0ZUJ1aWxkZXJfU3RhdGVCdWlsZGVyIiwiU3RhdGVCdWlsZGVyIiwiYnVpbGRlcnMiLCJwYXJlbnROYW1lIiwiYnVpbGRlciIsImJ1aWxkIiwic3RhdGVPYmplY3RfU3RhdGVPYmplY3QiLCJTdGF0ZU9iamVjdCIsInN0YXRlRGVjbCIsImlzU3RhdGVDbGFzcyIsIl9fc3RhdGVPYmplY3RDYWNoZSIsIm5hbWVHbG9iIiwibWF0Y2hpbmdLZXlzIiwiaXNTdGF0ZSIsInN0YXRlTWF0Y2hlcl9TdGF0ZU1hdGNoZXIiLCJTdGF0ZU1hdGNoZXIiLCJfc3RhdGVzIiwiaXNSZWxhdGl2ZSIsIm1hdGNoR2xvYiIsImlzU3RyIiwiYmFzZVN0YXRlIiwic3BsaXROYW1lIiwicGF0aExlbmd0aCIsInJlbE5hbWUiLCJzdGF0ZVF1ZXVlTWFuYWdlcl9TdGF0ZVF1ZXVlTWFuYWdlciIsIlN0YXRlUXVldWVNYW5hZ2VyIiwiJHJlZ2lzdHJ5IiwiZmx1c2giLCJyZWdpc3RlcmVkIiwicHJldmlvdXNRdWV1ZUxlbmd0aCIsImdldFN0YXRlIiwibm90aWZ5TGlzdGVuZXJzIiwibmFtZV8xIiwib3JwaGFuSWR4IiwiZXhpc3RpbmdTdGF0ZSIsImV4aXN0aW5nRnV0dXJlU3RhdGUiLCJhdHRhY2hSb3V0ZSIsImFic3RyYWN0IiwidXJsUnVsZUZhY3RvcnkiLCJzdGF0ZVJlZ2lzdHJ5X1N0YXRlUmVnaXN0cnkiLCJTdGF0ZVJlZ2lzdHJ5Iiwic3RhdGVRdWV1ZSIsIl9yZWdpc3RlclJvb3QiLCJfcm9vdCIsIiMiLCJzdGF0ZURlZmluaXRpb24iLCJfZGVyZWdpc3RlclRyZWUiLCJnZXRDaGlsZHJlbiIsIl9jaGlsZHJlbiIsImRlcmVnaXN0ZXJlZCIsIiR1ciIsInJlbW92ZVJ1bGUiLCJkZXJlZ2lzdGVyZWRTdGF0ZXMiLCJmb3VuZCIsImRlZmF1bHRPcHRpb25zIiwidHJhY2VEYXRhIiwidHJhbnNpdGlvbkhvb2tfVHJhbnNpdGlvbkhvb2siLCJUcmFuc2l0aW9uSG9vayIsImlzU3VwZXJzZWRlZCIsImhvb2tQaGFzZSIsIlJVTiIsImlzQWN0aXZlIiwiZXZlbnRUeXBlIiwid2FpdEZvciIsIm5leHRIb29rIiwiaW52b2tlSG9vayIsImludm9rZUhvb2tzIiwicmVtYWluaW5nSG9va3MiLCJydW5BbGxIb29rcyIsImxvZ0Vycm9yIiwiZGVmYXVsdEVycm9ySGFuZGxlciIsIl9kZXJlZ2lzdGVyZWQiLCJub3RDdXJyZW50IiwiZ2V0Tm90Q3VycmVudFJlamVjdGlvbiIsImhhbmRsZUVycm9yIiwiZ2V0RXJyb3JIYW5kbGVyIiwiaGFuZGxlUmVzdWx0IiwiZ2V0UmVzdWx0SGFuZGxlciIsInN5bmNocm9ub3VzIiwiaW52b2tlTGltaXQiLCJpbnZva2VDb3VudCIsImhhbmRsZUhvb2tSZXN1bHQiLCJpc1RhcmdldFN0YXRlIiwiX2Rpc3Bvc2VkIiwiX2Fib3J0ZWQiLCJIQU5ETEVfUkVTVUxUIiwiTE9HX1JFSkVDVEVEX1JFU1VMVCIsIkxPR19FUlJPUiIsIlJFSkVDVF9FUlJPUiIsIlRIUk9XX0VSUk9SIiwibWF0Y2hTdGF0ZSIsImNyaXRlcmlvbiIsInRvTWF0Y2giLCJnbG9iU3RyaW5ncyIsImhvb2tSZWdpc3RyeV9SZWdpc3RlcmVkSG9vayIsIlJlZ2lzdGVyZWRIb29rIiwidHJhblN2YyIsIm1hdGNoQ3JpdGVyaWEiLCJyZW1vdmVIb29rRnJvbVJlZ2lzdHJ5IiwiX21hdGNoaW5nTm9kZXMiLCJfZ2V0RGVmYXVsdE1hdGNoQ3JpdGVyaWEiLCJfZ2V0UGF0aFR5cGVzIiwiX2dldE1hdGNoaW5nTm9kZXMiLCJtbiIsInBhdGh0eXBlIiwiaXNTdGF0ZUhvb2siLCJTVEFURSIsIm1ha2VFdmVudCIsIl9yZWdpc3RlcmVkSG9va3MiLCJyZW1vdmVIb29rRm4iLCJob29rUmVnaXN0cmF0aW9uRm4iLCJtYXRjaE9iamVjdCIsImhvb2tCdWlsZGVyX0hvb2tCdWlsZGVyIiwiSG9va0J1aWxkZXIiLCJidWlsZEhvb2tzRm9yUGhhc2UiLCJfZ2V0RXZlbnRzIiwiYnVpbGRIb29rcyIsImhvb2tUeXBlIiwibWF0Y2hpbmdIb29rcyIsImdldE1hdGNoaW5nSG9va3MiLCJiYXNlSG9va09wdGlvbnMiLCJjcml0ZXJpYU1hdGNoUGF0aCIsInRyYW5zaXRpb25Ib29rIiwicmV2ZXJzZURlcHRoU29ydCIsImZhY3RvciIsImRlcHRoRGVsdGEiLCJ0dXBsZVNvcnQiLCJyZXZlcnNlU29ydCIsImlzQ3JlYXRlIiwiQ1JFQVRFIiwicmVnIiwiZ2V0SG9va3MiLCJzdGF0ZVNlbGYiLCJ0cmFuc2l0aW9uX1RyYW5zaXRpb24iLCJUcmFuc2l0aW9uIiwiX2RlZmVycmVkIiwiX2hvb2tCdWlsZGVyIiwiX3RhcmdldFN0YXRlIiwiX3RyYW5zaXRpb25Db3VudCIsIl90cmVlQ2hhbmdlcyIsImNyZWF0ZVRyYW5zaXRpb25Ib29rUmVnRm5zIiwib25DcmVhdGVIb29rcyIsIm9uRXhpdCIsIm9uUmV0YWluIiwib25FbnRlciIsIm9uRmluaXNoIiwib25FcnJvciIsImVudGVyaW5nU3RhdGVzIiwiJGZyb20iLCJmcmVlemUiLCJwYXJhbXNDaGFuZ2VkIiwiYWxsUGFyYW1EZXNjcmlwdG9ycyIsInBhdGhOb2RlIiwiY2hhbmdlZFZhbHVlcyIsImRlc2NyaXB0b3IiLCJwYXRoTmFtZSIsImdldFJlc29sdmVUb2tlbnMiLCJhZGRSZXNvbHZhYmxlIiwidG9wYXRoIiwidGFyZ2V0Tm9kZSIsIm9yaWdpbmFsVHJhbnNpdGlvbiIsInJmIiwicmVkaXJlY3QiLCJyZWRpcmVjdHMiLCJyZWRpcmVjdE9wdHMiLCJuZXdPcHRpb25zIiwibmV3VHJhbnNpdGlvbiIsIm9yaWdpbmFsRW50ZXJpbmdOb2RlcyIsInJlZGlyZWN0RW50ZXJpbmdOb2RlcyIsIm5vZGVJc1JlbG9hZGluZyIsIl9jaGFuZ2VkUGFyYW1zIiwidGMiLCJub2RlU2NoZW1hcyIsInRvVmFsdWVzIiwiZnJvbVZhbHVlcyIsInNjaGVtYSIsInRvVmFscyIsImZyb21WYWxzIiwiX2lnbm9yZWRSZWFzb24iLCJzYW1lIiwibmV3VEMiLCJwZW5kVEMiLCJnZXRIb29rc0ZvciIsImFsbEJlZm9yZUhvb2tzIiwiQkVGT1JFIiwibGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQiLCJ0cmFuc2l0aW9uSGlzdG9yeSIsImFsbFJ1bkhvb2tzIiwiU1VDQ0VTUyIsIl9lcnJvciIsInBhcmFtRGVmcyIsImludmFsaWRQYXJhbXMiLCJpbnZhbGlkVmFsdWVzIiwiZnJvbVN0YXRlT3JOYW1lIiwidG9TdGF0ZU9yTmFtZSIsImF2b2lkRW1wdHlIYXNoIiwiZGlUb2tlbiIsInF1b3RlUmVnRXhwIiwic3Vycm91bmRQYXR0ZXJuIiwic3BsaXRPblNsYXNoIiwidXJsTWF0Y2hlcl9kZWZhdWx0Q29uZmlnIiwic3RyaWN0IiwiY2FzZUluc2Vuc2l0aXZlIiwidXJsTWF0Y2hlcl9VcmxNYXRjaGVyIiwiVXJsTWF0Y2hlciIsIl9jYWNoZSIsIl9zZWdtZW50cyIsIl9jb21waWxlZCIsIm1hdGNoQXJyYXkiLCJkZXRhaWxzIiwic2VnbWVudCIsInBsYWNlaG9sZGVyIiwic2VhcmNoUGxhY2Vob2xkZXIiLCJwYXR0ZXJucyIsImNoZWNrUGFyYW1FcnJvcnMiLCJuYW1lVmFsaWRhdG9yIiwibWF0Y2hEZXRhaWxzIiwibWFrZVJlZ2V4cFR5cGUiLCJmcm9tU2VhcmNoIiwiX3BhdHRlcm4iLCJlbmNvZGVEYXNoZXMiLCJwYXRoU2VnbWVudHNBbmRQYXJhbXMiLCJzdGF0aWNTZWdtZW50cyIsInBhdGhQYXJhbXMiLCJxdWVyeVBhcmFtcyIsIndlaWdodHMiLCJ3ZWlnaHRzQSIsIndlaWdodHNCIiwicGFkVmFsIiwicGFkQXJyYXlzIiwiY21wIiwiX3BhaXJzIiwibWVtb2l6ZVRvIiwiYWxsUGFyYW1zIiwic2VhcmNoUGFyYW1zIiwiblBhdGhTZWdtZW50cyIsInVybG0iLCJkZWNvZGVQYXRoQXJyYXkiLCJwYXJhbVZhbCIsInJldmVyc2VTdHJpbmciLCJhbGxSZXZlcnNlZCIsImZpbmRQYXJhbSIsInZhbGlkUGFyYW1WYWwiLCJ1cmxNYXRjaGVycyIsImdldERldGFpbHMiLCJwYXRoU3RyaW5nIiwicXVlcnlTdHJpbmciLCJwYXJhbURldGFpbHMiLCJfX2Fzc2lnbiIsInVybE1hdGNoZXJGYWN0b3J5X1BhcmFtRmFjdG9yeSIsIlBhcmFtRmFjdG9yeSIsInVtZiIsInVybE1hdGNoZXJGYWN0b3J5X1VybE1hdGNoZXJGYWN0b3J5IiwiVXJsTWF0Y2hlckZhY3RvcnkiLCJfaXNDYXNlSW5zZW5zaXRpdmUiLCJfaXNTdHJpY3RNb2RlIiwiX2RlZmF1bHRTcXVhc2hQb2xpY3kiLCJzdHJpY3RNb2RlIiwiZ2xvYmFsQ29uZmlnIiwidXJsUnVsZV9VcmxSdWxlRmFjdG9yeSIsIlVybFJ1bGVGYWN0b3J5IiwibWFrZVJ1bGUiLCJfd2hhdCIsImZyb21VcmxNYXRjaGVyIiwiZnJvbVN0YXRlIiwiZnJvbVJlZ0V4cCIsInVybFJ1bGVfQmFzZVVybFJ1bGUiLCJ1cmxNYXRjaGVyIiwiX2hhbmRsZXIiLCJtYXRjaFByaW9yaXR5IiwidHJhbnNpdGlvblRvIiwic3RpY2t5IiwiaXNVcmxSdWxlIiwiZGVmYXVsdFJ1bGVTb3J0Rm4iLCJwcmlvcml0eVNvcnQiLCJVUkxNQVRDSEVSIiwiUkVHRVhQIiwiUkFXIiwiT1RIRVIiLCJ0eXBlU29ydCIsInVybE1hdGNoZXJTb3J0IiwidXNlTWF0Y2hQcmlvcml0eSIsImlkU29ydCIsInVybFJvdXRlcl9VcmxSb3V0ZXIiLCJVcmxSb3V0ZXIiLCJfc29ydEZuIiwiX3J1bGVzIiwiX2lkIiwiX3NvcnRlZCIsIl9vdGhlcndpc2VGbiIsInN0YWJsZVNvcnQiLCJlbnN1cmVTb3J0ZWQiLCJhcnJPZldyYXBwZXIiLCJ3cmFwcGVyQSIsIndyYXBwZXJCIiwiY21wRGlmZiIsImJlc3QiLCJjaGVja1J1bGUiLCJ3ZWlnaHQiLCJzeW5jIiwiJHVybCIsInVybFNlcnZpY2UiLCJuZXd1cmwiLCJhcHBseVJlc3VsdCIsIl9zdG9wRm4iLCJyZWFkIiwiYWJzb2x1dGUiLCJpc0h0bWw1IiwiYXBwZW5kQmFzZVBhdGgiLCJzbGFzaCIsImNmZ1BvcnQiLCJoYW5kbGVyRm4iLCJnZXRIYW5kbGVyRm4iLCJ1cmxQYXJ0cyIsInZpZXdfVmlld1NlcnZpY2UiLCJfdWlWaWV3cyIsIl92aWV3Q29uZmlncyIsIl92aWV3Q29uZmlnRmFjdG9yaWVzIiwiX2xpc3RlbmVycyIsIl9yZWdpc3RlcmVkVUlWaWV3IiwiX3JlZ2lzdGVyZWRVSVZpZXdzIiwiX2FjdGl2ZVZpZXdDb25maWdzIiwiX29uU3luYyIsInJhd1ZpZXdOYW1lIiwidmlld0F0Q29udGV4dCIsInJlbGF0aXZlVmlld05hbWVTdWdhciIsIl9yb290Q29udGV4dCIsInZpZXdUeXBlIiwiY2ZnRmFjdG9yeSIsImNmZ3MiLCJkZWFjdGl2YXRlVmlld0NvbmZpZyIsImFjdGl2YXRlVmlld0NvbmZpZyIsInVpVmlld3NCeUZxbiIsInZpZXdDb25maWdEZXB0aCIsImRlcHRoQ29tcGFyZSIsImRlcHRoRm4iLCJwb3NOZWciLCJ1aVZpZXdUdXBsZXMiLCJzdGF0ZURlcHRoIiwibWF0Y2hpbmdDb25maWdzIiwibWF0Y2hlZFZpZXdDb25maWdzIiwidW5tYXRjaGVkQ29uZmlnVHVwbGVzIiwiYWxsVHVwbGVzIiwidWlWaWV3cyIsImF2YWlsYWJsZSIsInZjIiwidmNTZWdtZW50cyIsInVpdlNlZ21lbnRzIiwibmVnT2Zmc2V0IiwiZnFuVG9GaXJzdFNlZ21lbnQiLCJ1aVZpZXdDb250ZXh0IiwiZ2xvYmFsc19VSVJvdXRlckdsb2JhbHMiLCJVSVJvdXRlckdsb2JhbHMiLCJzdWNjZXNzZnVsVHJhbnNpdGlvbnMiLCJtYWtlU3R1YiIsImxvY2F0aW9uU2VydmljZXNGbnMiLCJsb2NhdGlvbkNvbmZpZ0ZucyIsInVtZkZucyIsInJ1bGVzRm5zIiwic3luY0ZucyIsInVybFNlcnZpY2VfVXJsU2VydmljZSIsIlVybFNlcnZpY2UiLCJsYXRlQmluZCIsImxvY2F0aW9uU2VydmljZXMiLCJsb2NhdGlvblNlcnZpY2VTdHViIiwibG9jYXRpb25Db25maWdTdHViIiwiX3JvdXRlckluc3RhbmNlIiwicm91dGVyX1VJUm91dGVyIiwiX2Rpc3Bvc2FibGVzIiwidHJhbnNpdGlvblNlcnZpY2VfVHJhbnNpdGlvblNlcnZpY2UiLCJzdGF0ZVNlcnZpY2VfU3RhdGVTZXJ2aWNlIiwiX3BsdWdpbnMiLCJkaXNwb3NhYmxlIiwicGx1Z2luIiwicGx1Z2luSW5zdGFuY2UiLCJnZXRQbHVnaW4iLCJwbHVnaW5OYW1lIiwiYWRkQ29yZVJlc29sdmFibGVzIiwiVFJBTlNJVElPTl9UT0tFTlMiLCJpc1RyYW5zaXRpb24iLCJ0cmVlQ2hhbmdlc0NsZWFudXAiLCJyZXBsYWNlVHJhbnNpdGlvbldpdGhOdWxsIiwicmVkaXJlY3RUb0hvb2siLCJyZWRpcmVjdFRvIiwibWFrZUVudGVyRXhpdFJldGFpbkhvb2siLCJvbkV4aXRIb29rIiwib25SZXRhaW5Ib29rIiwib25FbnRlckhvb2siLCJlYWdlclJlc29sdmVQYXRoIiwibGF6eVJlc29sdmVTdGF0ZSIsInJlc29sdmVSZW1haW5pbmciLCJsb2FkRW50ZXJpbmdWaWV3cyIsImVudGVyaW5nVmlld3MiLCJhY3RpdmF0ZVZpZXdzIiwiZXhpdGluZ1ZpZXdzIiwidXBkYXRlR2xvYmFsU3RhdGUiLCJjbGVhckN1cnJlbnRUcmFuc2l0aW9uIiwidXBkYXRlVXJsIiwidXJsT3B0aW9ucyIsImxhenlMb2FkSG9vayIsImxhenlMb2FkIiwibGF6eUxvYWRTdGF0ZSIsImxhenlMb2FkRm4iLCJ0cmFuc2l0aW9uRXZlbnRUeXBlX1RyYW5zaXRpb25FdmVudFR5cGUiLCJob29rT3JkZXIiLCJpZ25vcmVkSG9vayIsImlnbm9yZWRSZWFzb24iLCJpbnZhbGlkVHJhbnNpdGlvbkhvb2siLCJkZWZhdWx0VHJhbnNPcHRzIiwiY3VzdG9tIiwiVHJhbnNpdGlvblNlcnZpY2UiLCJfZXZlbnRUeXBlcyIsIl9jcml0ZXJpYVBhdGhzIiwiX2RlcmVnaXN0ZXJIb29rRm5zIiwiX2RlZmluZUNvcmVQYXRocyIsIl9kZWZpbmVDb3JlRXZlbnRzIiwiX3JlZ2lzdGVyQ29yZVRyYW5zaXRpb25Ib29rcyIsIm9uQ3JlYXRlIiwiaG9va3NBcnJheSIsIlBoYXNlIiwiVEgiLCJwYXRocyIsIl9kZWZpbmVFdmVudCIsIl9kZWZpbmVQYXRoVHlwZSIsImNtcEJ5UGhhc2UiLCJob29rU2NvcGUiLCJhZGRDb3JlUmVzb2x2ZXMiLCJyZWdpc3RlckFkZENvcmVSZXNvbHZhYmxlcyIsInJlZ2lzdGVySWdub3JlZFRyYW5zaXRpb25Ib29rIiwicmVnaXN0ZXJJbnZhbGlkVHJhbnNpdGlvbkhvb2siLCJyZWdpc3RlclJlZGlyZWN0VG9Ib29rIiwicmVnaXN0ZXJPbkV4aXRIb29rIiwicmVnaXN0ZXJPblJldGFpbkhvb2siLCJyZWdpc3Rlck9uRW50ZXJIb29rIiwiZWFnZXJSZXNvbHZlIiwicmVnaXN0ZXJFYWdlclJlc29sdmVQYXRoIiwibGF6eVJlc29sdmUiLCJyZWdpc3RlckxhenlSZXNvbHZlU3RhdGUiLCJyZXNvbHZlQWxsIiwicmVnaXN0ZXJSZXNvbHZlUmVtYWluaW5nIiwibG9hZFZpZXdzIiwicmVnaXN0ZXJMb2FkRW50ZXJpbmdWaWV3cyIsInJlZ2lzdGVyQWN0aXZhdGVWaWV3cyIsInVwZGF0ZUdsb2JhbHMiLCJyZWdpc3RlclVwZGF0ZUdsb2JhbFN0YXRlIiwicmVnaXN0ZXJVcGRhdGVVcmwiLCJyZWdpc3RlckxhenlMb2FkSG9vayIsIlN0YXRlU2VydmljZSIsImludmFsaWRDYWxsYmFja3MiLCJfZGVmYXVsdEVycm9ySGFuZGxlciIsIiRlcnJvciQiLCJib3VuZEZucyIsIl9oYW5kbGVJbnZhbGlkVGFyZ2V0U3RhdGUiLCJ0b1N0YXRlIiwibGF0ZXN0VGhpbmciLCJsYXRlc3QiLCJjYWxsYmFja1F1ZXVlIiwiY2hlY2tGb3JSZWRpcmVjdCIsImludm9rZU5leHRDYWxsYmFjayIsIm5leHRDYWxsYmFjayIsImRlZmF1dEdvT3B0cyIsInRyYW5zT3B0cyIsImdldEN1cnJlbnRQYXRoIiwibGF0ZXN0U3VjY2VzcyIsImN1cnJlbnRQYXRoIiwicmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlciIsImlzTGF0ZXN0IiwiZXJyb3JIYW5kbGVyIiwidHJhbnNpdGlvblRvUHJvbWlzZSIsImluY2x1ZGUiLCJkZWZhdWx0SHJlZk9wdHMiLCJsb3NzeSIsIm5hdiIsInFfJHEiLCJpbmplY3Rvcl9nbG9iYWxzIiwiQVJHVU1FTlRfTkFNRVMiLCJpbmplY3Rvcl8kaW5qZWN0b3IiLCJlbnN1cmVFeGlzdCIsImtleVZhbHNUb09iamVjdFIiLCJhY2N1bSIsImdldFBhcmFtcyIsInV0aWxzX3BhcnNlVXJsIiwib3JFbXB0eVN0cmluZyIsImJlZm9yZWhhc2giLCJsb2MiLCJzZWFyY2hPYmplY3QiLCJsb2NhdGlvblBsdWdpbkZhY3RvcnkiLCJzZXJ2aWNlQ2xhc3MiLCJjb25maWd1cmF0aW9uQ2xhc3MiLCJjb25maWd1cmF0aW9uIiwiYmFzZUxvY2F0aW9uU2VydmljZV9CYXNlTG9jYXRpb25TZXJ2aWNlcyIsIkJhc2VMb2NhdGlvblNlcnZpY2VzIiwiZmlyZUFmdGVyVXBkYXRlIiwiX2xpc3RlbmVyIiwiX2dldCIsIl9sb2NhdGlvbiIsIl9oaXN0b3J5IiwiX19leHRlbmRzIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX18iLCJoYXNoTG9jYXRpb25TZXJ2aWNlX0hhc2hMb2NhdGlvblNlcnZpY2UiLCJfc3VwZXIiLCJIYXNoTG9jYXRpb25TZXJ2aWNlIiwidGl0bGUiLCJtZW1vcnlMb2NhdGlvblNlcnZpY2VfZXh0ZW5kcyIsIk1lbW9yeUxvY2F0aW9uU2VydmljZSIsIl91cmwiLCJwdXNoU3RhdGVMb2NhdGlvblNlcnZpY2VfZXh0ZW5kcyIsInB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZV9QdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UiLCJQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UiLCJfY29uZmlnIiwiX2dldEJhc2VQcmVmaXgiLCJleGFjdEJhc2VIcmVmTWF0Y2giLCJzdGFydHNXaXRoQmFzZSIsImZ1bGxVcmwiLCJyZXBsYWNlU3RhdGUiLCJtZW1vcnlMb2NhdGlvbkNvbmZpZ19NZW1vcnlMb2NhdGlvbkNvbmZpZyIsIl9wb3J0IiwiX3Byb3RvY29sIiwiX2hvc3QiLCJfaGFzaFByZWZpeCIsImJyb3dzZXJMb2NhdGlvbkNvbmZpZ19Ccm93c2VyTG9jYXRpb25Db25maWciLCJCcm93c2VyTG9jYXRpb25Db25maWciLCJfaXNIdG1sNSIsIm5ld3ByZWZpeCIsImdldEJhc2VIcmVmIiwiYmFzZVRhZyIsInNlcnZpY2VzUGx1Z2luIiwiaGFzaExvY2F0aW9uUGx1Z2luIiwicHVzaFN0YXRlTG9jYXRpb25QbHVnaW4iLCJtZW1vcnlMb2NhdGlvblBsdWdpbiIsIlVJUm91dGVyUGx1Z2luQmFzZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9B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QUEsS0FHQTY1SSxFQUFBdnNKLFVBQUE0NUYsUUFBQSxhQUNBMnlELEVBdkNBLEdDT0EsU0FBQUssR0FBQXp6RCxHQUdBLE9BRkFzb0MsRUFBQSxFQUFBeDFILFVBQUFzOUksR0FDQTluQixFQUFBLEVBQUE3NEgsR0FBQXdnSixJQUNZenFKLEtBQUEsbUJBQUFpSyxHQUFBd2dKLEdBQUFuOUksVUFBQXM5SSxHQUFBM3ZELFFBQUEsV0FBK0UsY0FHM0YsSUFBQWl6RCxHQUFBNUMsR0FBQSw4QkFBQWdCLEdBQUFxQixJQUVBUSxHQUFBN0MsR0FBQSwrQkFBQXdCLEdBQUFhLElBRUFTLEdBQUE5QyxHQUFBLDRCQUFBcUIsR0FBQVcsSUNiQWUsR0FBQSxXQUNBLFNBQUFBLEtBR0EsT0FEQUEsRUFBQWh0SixVQUFBNDVGLFFBQUEsU0FBQVQsS0FDQTZ6RCxFQUpBLDZoTkNYQWh2SixFQUFBVSxFQUFBK0wsRUFBQSx1Q0FBQXVpSiIsImZpbGUiOiJhcHAuZDRjNWVjYmIxZjQ3NzI3MGNlM2QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4iLCIvKipcbiAqIFJhbmRvbSB1dGlsaXR5IGZ1bmN0aW9ucyB1c2VkIGluIHRoZSBVSS1Sb3V0ZXIgY29kZVxuICpcbiAqIFRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIGJ1dCBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQHByZWZlcnJlZFxuICogQG1vZHVsZSBjb21tb25cbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNBcnJheSwgaXNSZWdFeHAsIGlzRGF0ZSB9IGZyb20gJy4vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBhbGwsIGFueSwgcHJvcCwgY3VycnksIG5vdCB9IGZyb20gJy4vaG9mJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi9jb3Jlc2VydmljZXMnO1xuZXhwb3J0IHZhciByb290ID0gKHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGYgJiYgc2VsZikgfHxcbiAgICAodHlwZW9mIGdsb2JhbCA9PT0gJ29iamVjdCcgJiYgZ2xvYmFsLmdsb2JhbCA9PT0gZ2xvYmFsICYmIGdsb2JhbCkgfHxcbiAgICB0aGlzO1xudmFyIGFuZ3VsYXIgPSByb290LmFuZ3VsYXIgfHwge307XG5leHBvcnQgdmFyIGZyb21Kc29uID0gYW5ndWxhci5mcm9tSnNvbiB8fCBKU09OLnBhcnNlLmJpbmQoSlNPTik7XG5leHBvcnQgdmFyIHRvSnNvbiA9IGFuZ3VsYXIudG9Kc29uIHx8IEpTT04uc3RyaW5naWZ5LmJpbmQoSlNPTik7XG5leHBvcnQgdmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2ggfHwgX2ZvckVhY2g7XG5leHBvcnQgdmFyIGV4dGVuZCA9IE9iamVjdC5hc3NpZ24gfHwgX2V4dGVuZDtcbmV4cG9ydCB2YXIgZXF1YWxzID0gYW5ndWxhci5lcXVhbHMgfHwgX2VxdWFscztcbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eSh4KSB7XG4gICAgcmV0dXJuIHg7XG59XG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgfVxuLyoqXG4gKiBCdWlsZHMgcHJveHkgZnVuY3Rpb25zIG9uIHRoZSBgdG9gIG9iamVjdCB3aGljaCBwYXNzIHRocm91Z2ggdG8gdGhlIGBmcm9tYCBvYmplY3QuXG4gKlxuICogRm9yIGVhY2gga2V5IGluIGBmbk5hbWVzYCwgY3JlYXRlcyBhIHByb3h5IGZ1bmN0aW9uIG9uIHRoZSBgdG9gIG9iamVjdC5cbiAqIFRoZSBwcm94eSBmdW5jdGlvbiBjYWxscyB0aGUgcmVhbCBmdW5jdGlvbiBvbiB0aGUgYGZyb21gIG9iamVjdC5cbiAqXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogVGhpcyBleGFtcGxlIGNyZWF0ZXMgYW4gbmV3IGNsYXNzIGluc3RhbmNlIHdob3NlIGZ1bmN0aW9ucyBhcmUgcHJlYm91bmQgdG8gdGhlIG5ldydkIG9iamVjdC5cbiAqIGBgYGpzXG4gKiBjbGFzcyBGb28ge1xuICogICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gKiAgICAgLy8gQmluZHMgYWxsIGZ1bmN0aW9ucyBmcm9tIEZvby5wcm90b3R5cGUgdG8gJ3RoaXMnLFxuICogICAgIC8vIHRoZW4gY29waWVzIHRoZW0gdG8gJ3RoaXMnXG4gKiAgICAgYmluZEZ1bmN0aW9ucyhGb28ucHJvdG90eXBlLCB0aGlzLCB0aGlzKTtcbiAqICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICogICB9XG4gKlxuICogICBsb2coKSB7XG4gKiAgICAgY29uc29sZS5sb2codGhpcy5kYXRhKTtcbiAqICAgfVxuICogfVxuICpcbiAqIGxldCBteUZvbyA9IG5ldyBGb28oWzEsMiwzXSk7XG4gKiB2YXIgbG9naXQgPSBteUZvby5sb2c7XG4gKiBsb2dpdCgpOyAvLyBsb2dzIFsxLCAyLCAzXSBmcm9tIHRoZSBteUZvbyAndGhpcycgaW5zdGFuY2VcbiAqIGBgYFxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIFRoaXMgZXhhbXBsZSBjcmVhdGVzIGEgYm91bmQgdmVyc2lvbiBvZiBhIHNlcnZpY2UgZnVuY3Rpb24sIGFuZCBjb3BpZXMgaXQgdG8gYW5vdGhlciBvYmplY3RcbiAqIGBgYFxuICpcbiAqIHZhciBTb21lU2VydmljZSA9IHtcbiAqICAgdGhpcy5kYXRhID0gWzMsIDQsIDVdO1xuICogICB0aGlzLmxvZyA9IGZ1bmN0aW9uKCkge1xuICogICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YSk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiAvLyBDb25zdHJ1Y3RvciBmblxuICogZnVuY3Rpb24gT3RoZXJUaGluZygpIHtcbiAqICAgLy8gQmluZHMgYWxsIGZ1bmN0aW9ucyBmcm9tIFNvbWVTZXJ2aWNlIHRvIFNvbWVTZXJ2aWNlLFxuICogICAvLyB0aGVuIGNvcGllcyB0aGVtIHRvICd0aGlzJ1xuICogICBiaW5kRnVuY3Rpb25zKFNvbWVTZXJ2aWNlLCB0aGlzLCBTb21lU2VydmljZSk7XG4gKiB9XG4gKlxuICogbGV0IG15T3RoZXJUaGluZyA9IG5ldyBPdGhlclRoaW5nKCk7XG4gKiBteU90aGVyVGhpbmcubG9nKCk7IC8vIGxvZ3MgWzMsIDQsIDVdIGZyb20gU29tZVNlcnZpY2UncyAndGhpcydcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzb3VyY2UgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHNvdXJjZSBvYmplY3Qgd2hpY2ggY29udGFpbnMgdGhlIG9yaWdpbmFsIGZ1bmN0aW9ucyB0byBiZSBib3VuZFxuICogQHBhcmFtIHRhcmdldCBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgdGFyZ2V0IG9iamVjdCB3aGljaCB3aWxsIHJlY2VpdmUgdGhlIGJvdW5kIGZ1bmN0aW9uc1xuICogQHBhcmFtIGJpbmQgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG9iamVjdCB3aGljaCB0aGUgZnVuY3Rpb25zIHdpbGwgYmUgYm91bmQgdG9cbiAqIEBwYXJhbSBmbk5hbWVzIFRoZSBmdW5jdGlvbiBuYW1lcyB3aGljaCB3aWxsIGJlIGJvdW5kIChEZWZhdWx0cyB0byBhbGwgdGhlIGZ1bmN0aW9ucyBmb3VuZCBvbiB0aGUgJ2Zyb20nIG9iamVjdClcbiAqIEBwYXJhbSBsYXRlYmluZCBJZiB0cnVlLCB0aGUgYmluZGluZyBvZiB0aGUgZnVuY3Rpb24gaXMgZGVsYXllZCB1bnRpbCB0aGUgZmlyc3QgdGltZSBpdCdzIGludm9rZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHNvdXJjZSwgdGFyZ2V0LCBiaW5kLCBmbk5hbWVzLCBsYXRlYmluZCkge1xuICAgIGlmIChsYXRlYmluZCA9PT0gdm9pZCAwKSB7IGxhdGViaW5kID0gZmFsc2U7IH1cbiAgICB2YXIgYmluZEZ1bmN0aW9uID0gZnVuY3Rpb24gKGZuTmFtZSkgeyByZXR1cm4gc291cmNlKClbZm5OYW1lXS5iaW5kKGJpbmQoKSk7IH07XG4gICAgdmFyIG1ha2VMYXRlUmViaW5kRm4gPSBmdW5jdGlvbiAoZm5OYW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBsYXRlUmViaW5kRnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0YXJnZXRbZm5OYW1lXSA9IGJpbmRGdW5jdGlvbihmbk5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtmbk5hbWVdLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBmbk5hbWVzID0gZm5OYW1lcyB8fCBPYmplY3Qua2V5cyhzb3VyY2UoKSk7XG4gICAgcmV0dXJuIGZuTmFtZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5hbWUpIHtcbiAgICAgICAgYWNjW25hbWVdID0gbGF0ZWJpbmQgPyBtYWtlTGF0ZVJlYmluZEZuKG5hbWUpIDogYmluZEZ1bmN0aW9uKG5hbWUpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHRhcmdldCk7XG59XG4vKipcbiAqIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgaGVscGVyLlxuICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2hpY2ggaGFzIGBwYXJlbnRgIG9iamVjdCBhcyBpdHMgcHJvdG90eXBlLCBhbmQgdGhlbiBjb3BpZXMgdGhlIHByb3BlcnRpZXMgZnJvbSBgZXh0cmFgIG9udG8gaXRcbiAqL1xuZXhwb3J0IHZhciBpbmhlcml0ID0gZnVuY3Rpb24gKHBhcmVudCwgZXh0cmEpIHsgcmV0dXJuIGV4dGVuZChPYmplY3QuY3JlYXRlKHBhcmVudCksIGV4dHJhKTsgfTtcbi8qKiBHaXZlbiBhbiBhcnJheSwgcmV0dXJucyB0cnVlIGlmIHRoZSBvYmplY3QgaXMgZm91bmQgaW4gdGhlIGFycmF5LCAodXNpbmcgaW5kZXhPZikgKi9cbmV4cG9ydCB2YXIgaW5BcnJheSA9IGN1cnJ5KF9pbkFycmF5KTtcbmV4cG9ydCBmdW5jdGlvbiBfaW5BcnJheShhcnJheSwgb2JqKSB7XG4gICAgcmV0dXJuIGFycmF5LmluZGV4T2Yob2JqKSAhPT0gLTE7XG59XG4vKipcbiAqIEdpdmVuIGFuIGFycmF5LCBhbmQgYW4gaXRlbSwgaWYgdGhlIGl0ZW0gaXMgZm91bmQgaW4gdGhlIGFycmF5LCBpdCByZW1vdmVzIGl0IChpbi1wbGFjZSkuXG4gKiBUaGUgc2FtZSBhcnJheSBpcyByZXR1cm5lZFxuICovXG5leHBvcnQgdmFyIHJlbW92ZUZyb20gPSBjdXJyeShfcmVtb3ZlRnJvbSk7XG5leHBvcnQgZnVuY3Rpb24gX3JlbW92ZUZyb20oYXJyYXksIG9iaikge1xuICAgIHZhciBpZHggPSBhcnJheS5pbmRleE9mKG9iaik7XG4gICAgaWYgKGlkeCA+PSAwKVxuICAgICAgICBhcnJheS5zcGxpY2UoaWR4LCAxKTtcbiAgICByZXR1cm4gYXJyYXk7XG59XG4vKiogcHVzaGVzIGEgdmFsdWVzIHRvIGFuIGFycmF5IGFuZCByZXR1cm5zIHRoZSB2YWx1ZSAqL1xuZXhwb3J0IHZhciBwdXNoVG8gPSBjdXJyeShfcHVzaFRvKTtcbmV4cG9ydCBmdW5jdGlvbiBfcHVzaFRvKGFyciwgdmFsKSB7XG4gICAgcmV0dXJuIGFyci5wdXNoKHZhbCksIHZhbDtcbn1cbi8qKiBHaXZlbiBhbiBhcnJheSBvZiAoZGVyZWdpc3RyYXRpb24pIGZ1bmN0aW9ucywgY2FsbHMgYWxsIGZ1bmN0aW9ucyBhbmQgcmVtb3ZlcyBlYWNoIG9uZSBmcm9tIHRoZSBzb3VyY2UgYXJyYXkgKi9cbmV4cG9ydCB2YXIgZGVyZWdBbGwgPSBmdW5jdGlvbiAoZnVuY3Rpb25zKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9ucy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBmbigpO1xuICAgICAgICByZW1vdmVGcm9tKGZ1bmN0aW9ucywgZm4pO1xuICAgIH0pO1xufTtcbi8qKlxuICogQXBwbGllcyBhIHNldCBvZiBkZWZhdWx0cyB0byBhbiBvcHRpb25zIG9iamVjdC4gIFRoZSBvcHRpb25zIG9iamVjdCBpcyBmaWx0ZXJlZFxuICogdG8gb25seSB0aG9zZSBwcm9wZXJ0aWVzIG9mIHRoZSBvYmplY3RzIGluIHRoZSBkZWZhdWx0c0xpc3QuXG4gKiBFYXJsaWVyIG9iamVjdHMgaW4gdGhlIGRlZmF1bHRzTGlzdCB0YWtlIHByZWNlZGVuY2Ugd2hlbiBhcHBseWluZyBkZWZhdWx0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdHMpIHtcbiAgICB2YXIgZGVmYXVsdHNMaXN0ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgZGVmYXVsdHNMaXN0W19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgZGVmYXVsdFZhbHMgPSBleHRlbmQuYXBwbHkodm9pZCAwLCBbe31dLmNvbmNhdChkZWZhdWx0c0xpc3QucmV2ZXJzZSgpKSk7XG4gICAgcmV0dXJuIGV4dGVuZChkZWZhdWx0VmFscywgcGljayhvcHRzIHx8IHt9LCBPYmplY3Qua2V5cyhkZWZhdWx0VmFscykpKTtcbn1cbi8qKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCBtZXJnZXMgZWFjaCBlbGVtZW50IG9mIHRoZSBsaXN0IGludG8gYSBzaW5nbGUgb2JqZWN0LCB1c2luZyBleHRlbmQgKi9cbmV4cG9ydCB2YXIgbWVyZ2VSID0gZnVuY3Rpb24gKG1lbW8sIGl0ZW0pIHsgcmV0dXJuIGV4dGVuZChtZW1vLCBpdGVtKTsgfTtcbi8qKlxuICogRmluZHMgdGhlIGNvbW1vbiBhbmNlc3RvciBwYXRoIGJldHdlZW4gdHdvIHN0YXRlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZmlyc3QgVGhlIGZpcnN0IHN0YXRlLlxuICogQHBhcmFtIHtPYmplY3R9IHNlY29uZCBUaGUgc2Vjb25kIHN0YXRlLlxuICogQHJldHVybiB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGUgbmFtZXMgaW4gZGVzY2VuZGluZyBvcmRlciwgbm90IGluY2x1ZGluZyB0aGUgcm9vdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuY2VzdG9ycyhmaXJzdCwgc2Vjb25kKSB7XG4gICAgdmFyIHBhdGggPSBbXTtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Zm9yaW5cbiAgICBmb3IgKHZhciBuIGluIGZpcnN0LnBhdGgpIHtcbiAgICAgICAgaWYgKGZpcnN0LnBhdGhbbl0gIT09IHNlY29uZC5wYXRoW25dKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIHBhdGgucHVzaChmaXJzdC5wYXRoW25dKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59XG4vKipcbiAqIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgXG4gKiB2YXIgZm9vID0geyBhOiAxLCBiOiAyLCBjOiAzIH07XG4gKiB2YXIgYWIgPSBwaWNrKGZvbywgWydhJywgJ2InXSk7IC8vIHsgYTogMSwgYjogMiB9XG4gKiBgYGBcbiAqIEBwYXJhbSBvYmogdGhlIHNvdXJjZSBvYmplY3RcbiAqIEBwYXJhbSBwcm9wTmFtZXMgYW4gQXJyYXkgb2Ygc3RyaW5ncywgd2hpY2ggYXJlIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0eSBuYW1lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGljayhvYmosIHByb3BOYW1lcykge1xuICAgIHZhciBvYmpDb3B5ID0ge307XG4gICAgZm9yICh2YXIgX3Byb3AgaW4gb2JqKSB7XG4gICAgICAgIGlmIChwcm9wTmFtZXMuaW5kZXhPZihfcHJvcCkgIT09IC0xKSB7XG4gICAgICAgICAgICBvYmpDb3B5W19wcm9wXSA9IG9ialtfcHJvcF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iakNvcHk7XG59XG4vKipcbiAqIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbWl0dGluZyB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogdmFyIGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xuICogdmFyIGFiID0gb21pdChmb28sIFsnYScsICdiJ10pOyAvLyB7IGM6IDMgfVxuICogYGBgXG4gKiBAcGFyYW0gb2JqIHRoZSBzb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0gcHJvcE5hbWVzIGFuIEFycmF5IG9mIHN0cmluZ3MsIHdoaWNoIGFyZSB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydHkgbmFtZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9taXQob2JqLCBwcm9wTmFtZXMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKVxuICAgICAgICAuZmlsdGVyKG5vdChpbkFycmF5KHByb3BOYW1lcykpKVxuICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkgeyByZXR1cm4gKChhY2Nba2V5XSA9IG9ialtrZXldKSwgYWNjKTsgfSwge30pO1xufVxuLyoqXG4gKiBNYXBzIGFuIGFycmF5LCBvciBvYmplY3QgdG8gYSBwcm9wZXJ0eSAoYnkgbmFtZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBsdWNrKGNvbGxlY3Rpb24sIHByb3BOYW1lKSB7XG4gICAgcmV0dXJuIG1hcChjb2xsZWN0aW9uLCBwcm9wKHByb3BOYW1lKSk7XG59XG4vKiogRmlsdGVycyBhbiBBcnJheSBvciBhbiBPYmplY3QncyBwcm9wZXJ0aWVzIGJhc2VkIG9uIGEgcHJlZGljYXRlICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyKGNvbGxlY3Rpb24sIGNhbGxiYWNrKSB7XG4gICAgdmFyIGFyciA9IGlzQXJyYXkoY29sbGVjdGlvbiksIHJlc3VsdCA9IGFyciA/IFtdIDoge307XG4gICAgdmFyIGFjY2VwdCA9IGFyciA/IGZ1bmN0aW9uICh4KSB7IHJldHVybiByZXN1bHQucHVzaCh4KTsgfSA6IGZ1bmN0aW9uICh4LCBrZXkpIHsgcmV0dXJuIChyZXN1bHRba2V5XSA9IHgpOyB9O1xuICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKGl0ZW0sIGkpKVxuICAgICAgICAgICAgYWNjZXB0KGl0ZW0sIGkpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKiogRmluZHMgYW4gb2JqZWN0IGZyb20gYW4gYXJyYXksIG9yIGEgcHJvcGVydHkgb2YgYW4gb2JqZWN0LCB0aGF0IG1hdGNoZXMgYSBwcmVkaWNhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGNhbGxiYWNrKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uIChpdGVtLCBpKSB7XG4gICAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChjYWxsYmFjayhpdGVtLCBpKSlcbiAgICAgICAgICAgIHJlc3VsdCA9IGl0ZW07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKiBHaXZlbiBhbiBvYmplY3QsIHJldHVybnMgYSBuZXcgb2JqZWN0LCB3aGVyZSBlYWNoIHByb3BlcnR5IGlzIHRyYW5zZm9ybWVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbiAqL1xuZXhwb3J0IHZhciBtYXBPYmogPSBtYXA7XG4vKiogTWFwcyBhbiBhcnJheSBvciBvYmplY3QgcHJvcGVydGllcyB1c2luZyBhIGNhbGxiYWNrIGZ1bmN0aW9uICovXG5leHBvcnQgZnVuY3Rpb24gbWFwKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0YXJnZXQpIHtcbiAgICB0YXJnZXQgPSB0YXJnZXQgfHwgKGlzQXJyYXkoY29sbGVjdGlvbikgPyBbXSA6IHt9KTtcbiAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uIChpdGVtLCBpKSB7IHJldHVybiAodGFyZ2V0W2ldID0gY2FsbGJhY2soaXRlbSwgaSkpOyB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLyoqXG4gKiBHaXZlbiBhbiBvYmplY3QsIHJldHVybiBpdHMgZW51bWVyYWJsZSBwcm9wZXJ0eSB2YWx1ZXNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9XG4gKiBsZXQgdmFscyA9IHZhbHVlcyhmb28pOyAvLyBbIDEsIDIsIDMgXVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdmFsdWVzID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gb2JqW2tleV07IH0pOyB9O1xuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgYWxsIG9mIHRoZSB2YWx1ZXMgYXJlIHRydXRoeS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IHZhbHMgPSBbIDEsIHRydWUsIHt9LCBcImhlbGxvIHdvcmxkXCJdO1xuICogdmFscy5yZWR1Y2UoYWxsVHJ1ZVIsIHRydWUpOyAvLyB0cnVlXG4gKlxuICogdmFscy5wdXNoKDApO1xuICogdmFscy5yZWR1Y2UoYWxsVHJ1ZVIsIHRydWUpOyAvLyBmYWxzZVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgYWxsVHJ1ZVIgPSBmdW5jdGlvbiAobWVtbywgZWxlbSkgeyByZXR1cm4gbWVtbyAmJiBlbGVtOyB9O1xuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgYW55IG9mIHRoZSB2YWx1ZXMgYXJlIHRydXRoeS5cbiAqXG4gKiAgKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IHZhbHMgPSBbIDAsIG51bGwsIHVuZGVmaW5lZCBdO1xuICogdmFscy5yZWR1Y2UoYW55VHJ1ZVIsIHRydWUpOyAvLyBmYWxzZVxuICpcbiAqIHZhbHMucHVzaChcImhlbGxvIHdvcmxkXCIpO1xuICogdmFscy5yZWR1Y2UoYW55VHJ1ZVIsIHRydWUpOyAvLyB0cnVlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBhbnlUcnVlUiA9IGZ1bmN0aW9uIChtZW1vLCBlbGVtKSB7IHJldHVybiBtZW1vIHx8IGVsZW07IH07XG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB3aGljaCB1bi1uZXN0cyBhIHNpbmdsZSBsZXZlbCBvZiBhcnJheXNcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogaW5wdXQucmVkdWNlKHVubmVzdFIsIFtdKSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBbIFwiZG91YmxlLCBcIm5lc3RlZFwiIF0gXVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdW5uZXN0UiA9IGZ1bmN0aW9uIChtZW1vLCBlbGVtKSB7IHJldHVybiBtZW1vLmNvbmNhdChlbGVtKTsgfTtcbi8qKlxuICogUmVkdWNlIGZ1bmN0aW9uIHdoaWNoIHJlY3Vyc2l2ZWx5IHVuLW5lc3RzIGFsbCBhcnJheXNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGlucHV0ID0gWyBbIFwiYVwiLCBcImJcIiBdLCBbIFwiY1wiLCBcImRcIiBdLCBbIFsgXCJkb3VibGVcIiwgXCJuZXN0ZWRcIiBdIF0gXTtcbiAqIGlucHV0LnJlZHVjZSh1bm5lc3RSLCBbXSkgLy8gWyBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJkb3VibGUsIFwibmVzdGVkXCIgXVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlblIgPSBmdW5jdGlvbiAobWVtbywgZWxlbSkge1xuICAgIHJldHVybiBpc0FycmF5KGVsZW0pID8gbWVtby5jb25jYXQoZWxlbS5yZWR1Y2UoZmxhdHRlblIsIFtdKSkgOiBwdXNoUihtZW1vLCBlbGVtKTtcbn07XG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IHB1c2hlcyBhbiBvYmplY3QgdG8gYW4gYXJyYXksIHRoZW4gcmV0dXJucyB0aGUgYXJyYXkuXG4gKiBNb3N0bHkganVzdCBmb3IgW1tmbGF0dGVuUl1dIGFuZCBbW3VuaXFSXV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHB1c2hSKGFyciwgb2JqKSB7XG4gICAgYXJyLnB1c2gob2JqKTtcbiAgICByZXR1cm4gYXJyO1xufVxuLyoqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IGZpbHRlcnMgb3V0IGR1cGxpY2F0ZXMgKi9cbmV4cG9ydCB2YXIgdW5pcVIgPSBmdW5jdGlvbiAoYWNjLCB0b2tlbikgeyByZXR1cm4gKGluQXJyYXkoYWNjLCB0b2tlbikgPyBhY2MgOiBwdXNoUihhY2MsIHRva2VuKSk7IH07XG4vKipcbiAqIFJldHVybiBhIG5ldyBhcnJheSB3aXRoIGEgc2luZ2xlIGxldmVsIG9mIGFycmF5cyB1bm5lc3RlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGlucHV0ID0gWyBbIFwiYVwiLCBcImJcIiBdLCBbIFwiY1wiLCBcImRcIiBdLCBbIFsgXCJkb3VibGVcIiwgXCJuZXN0ZWRcIiBdIF0gXTtcbiAqIHVubmVzdChpbnB1dCkgLy8gWyBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgWyBcImRvdWJsZSwgXCJuZXN0ZWRcIiBdIF1cbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIHVubmVzdCA9IGZ1bmN0aW9uIChhcnIpIHsgcmV0dXJuIGFyci5yZWR1Y2UodW5uZXN0UiwgW10pOyB9O1xuLyoqXG4gKiBSZXR1cm4gYSBjb21wbGV0ZWx5IGZsYXR0ZW5lZCB2ZXJzaW9uIG9mIGFuIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogZmxhdHRlbihpbnB1dCkgLy8gWyBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJkb3VibGUsIFwibmVzdGVkXCIgXVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uIChhcnIpIHsgcmV0dXJuIGFyci5yZWR1Y2UoZmxhdHRlblIsIFtdKTsgfTtcbi8qKlxuICogR2l2ZW4gYSAuZmlsdGVyIFByZWRpY2F0ZSwgYnVpbGRzIGEgLmZpbHRlciBQcmVkaWNhdGUgd2hpY2ggdGhyb3dzIGFuIGVycm9yIGlmIGFueSBlbGVtZW50cyBkbyBub3QgcGFzcy5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaXNOdW1iZXIgPSAob2JqKSA9PiB0eXBlb2Yob2JqKSA9PT0gJ251bWJlcic7XG4gKiBsZXQgYWxsTnVtYmVycyA9IFsgMSwgMiwgMywgNCwgNSBdO1xuICogYWxsTnVtYmVycy5maWx0ZXIoYXNzZXJ0UHJlZGljYXRlKGlzTnVtYmVyKSk7IC8vT0tcbiAqXG4gKiBsZXQgb25lU3RyaW5nID0gWyAxLCAyLCAzLCA0LCBcIjVcIiBdO1xuICogb25lU3RyaW5nLmZpbHRlcihhc3NlcnRQcmVkaWNhdGUoaXNOdW1iZXIsIFwiTm90IGFsbCBudW1iZXJzXCIpKTsgLy8gdGhyb3dzIEVycm9yKFwiXCJOb3QgYWxsIG51bWJlcnNcIlwiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGFzc2VydFByZWRpY2F0ZSA9IGFzc2VydEZuO1xuLyoqXG4gKiBHaXZlbiBhIC5tYXAgZnVuY3Rpb24sIGJ1aWxkcyBhIC5tYXAgZnVuY3Rpb24gd2hpY2ggdGhyb3dzIGFuIGVycm9yIGlmIGFueSBtYXBwZWQgZWxlbWVudHMgZG8gbm90IHBhc3MgYSB0cnV0aHluZXNzIHRlc3QuXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogdmFyIGRhdGEgPSB7IGZvbzogMSwgYmFyOiAyIH07XG4gKlxuICogbGV0IGtleXMgPSBbICdmb28nLCAnYmFyJyBdXG4gKiBsZXQgdmFsdWVzID0ga2V5cy5tYXAoYXNzZXJ0TWFwKGtleSA9PiBkYXRhW2tleV0sIFwiS2V5IG5vdCBmb3VuZFwiKSk7XG4gKiAvLyB2YWx1ZXMgaXMgWzEsIDJdXG4gKlxuICogbGV0IGtleXMgPSBbICdmb28nLCAnYmFyJywgJ2JheicgXVxuICogbGV0IHZhbHVlcyA9IGtleXMubWFwKGFzc2VydE1hcChrZXkgPT4gZGF0YVtrZXldLCBcIktleSBub3QgZm91bmRcIikpO1xuICogLy8gdGhyb3dzIEVycm9yKFwiS2V5IG5vdCBmb3VuZFwiKVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgYXNzZXJ0TWFwID0gYXNzZXJ0Rm47XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0Rm4ocHJlZGljYXRlT3JNYXAsIGVyck1zZykge1xuICAgIGlmIChlcnJNc2cgPT09IHZvaWQgMCkgeyBlcnJNc2cgPSAnYXNzZXJ0IGZhaWx1cmUnOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHByZWRpY2F0ZU9yTWFwKG9iaik7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoaXNGdW5jdGlvbihlcnJNc2cpID8gZXJyTXNnKG9iaikgOiBlcnJNc2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cbi8qKlxuICogTGlrZSBfLnBhaXJzOiBHaXZlbiBhbiBvYmplY3QsIHJldHVybnMgYW4gYXJyYXkgb2Yga2V5L3ZhbHVlIHBhaXJzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIHBhaXJzKHsgZm9vOiBcIkZPT1wiLCBiYXI6IFwiQkFSIH0pIC8vIFsgWyBcImZvb1wiLCBcIkZPT1wiIF0sIFsgXCJiYXJcIjogXCJCQVJcIiBdIF1cbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIHBhaXJzID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gW2tleSwgb2JqW2tleV1dOyB9KTsgfTtcbi8qKlxuICogR2l2ZW4gdHdvIG9yIG1vcmUgcGFyYWxsZWwgYXJyYXlzLCByZXR1cm5zIGFuIGFycmF5IG9mIHR1cGxlcyB3aGVyZVxuICogZWFjaCB0dXBsZSBpcyBjb21wb3NlZCBvZiBbIGFbaV0sIGJbaV0sIC4uLiB6W2ldIF1cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGZvbyA9IFsgMCwgMiwgNCwgNiBdO1xuICogbGV0IGJhciA9IFsgMSwgMywgNSwgNyBdO1xuICogbGV0IGJheiA9IFsgMTAsIDMwLCA1MCwgNzAgXTtcbiAqIGFycmF5VHVwbGVzKGZvbywgYmFyKTsgICAgICAgLy8gWyBbMCwgMV0sIFsyLCAzXSwgWzQsIDVdLCBbNiwgN10gXVxuICogYXJyYXlUdXBsZXMoZm9vLCBiYXIsIGJheik7ICAvLyBbIFswLCAxLCAxMF0sIFsyLCAzLCAzMF0sIFs0LCA1LCA1MF0sIFs2LCA3LCA3MF0gXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheVR1cGxlcygpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gW107XG4gICAgdmFyIG1heEFycmF5TGVuID0gYXJncy5yZWR1Y2UoZnVuY3Rpb24gKG1pbiwgYXJyKSB7IHJldHVybiBNYXRoLm1pbihhcnIubGVuZ3RoLCBtaW4pOyB9LCA5MDA3MTk5MjU0NzQwOTkxKTsgLy8gYWthIDJeNTMg4oiSIDEgYWthIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhIGhvdCBmdW5jdGlvblxuICAgICAgICAvLyBVbnJvbGwgd2hlbiB0aGVyZSBhcmUgMS00IGFyZ3VtZW50c1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goW2FyZ3NbMF1baV1dKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbYXJnc1swXVtpXSwgYXJnc1sxXVtpXV0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFthcmdzWzBdW2ldLCBhcmdzWzFdW2ldLCBhcmdzWzJdW2ldXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goW2FyZ3NbMF1baV0sIGFyZ3NbMV1baV0sIGFyZ3NbMl1baV0sIGFyZ3NbM11baV1dKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYXJncy5tYXAoZnVuY3Rpb24gKGFycmF5KSB7IHJldHVybiBhcnJheVtpXTsgfSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heEFycmF5TGVuOyBpKyspIHtcbiAgICAgICAgX2xvb3BfMShpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogUmVkdWNlIGZ1bmN0aW9uIHdoaWNoIGJ1aWxkcyBhbiBvYmplY3QgZnJvbSBhbiBhcnJheSBvZiBba2V5LCB2YWx1ZV0gcGFpcnMuXG4gKlxuICogRWFjaCBpdGVyYXRpb24gc2V0cyB0aGUga2V5L3ZhbCBwYWlyIG9uIHRoZSBtZW1vIG9iamVjdCwgdGhlbiByZXR1cm5zIHRoZSBtZW1vIGZvciB0aGUgbmV4dCBpdGVyYXRpb24uXG4gKlxuICogRWFjaCBrZXlWYWx1ZVR1cGxlIHNob3VsZCBiZSBhbiBhcnJheSB3aXRoIHZhbHVlcyBbIGtleTogc3RyaW5nLCB2YWx1ZTogYW55IF1cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogdmFyIHBhaXJzID0gWyBbXCJmb29rZXlcIiwgXCJmb292YWxcIl0sIFtcImJhcmtleVwiLCBcImJhcnZhbFwiXSBdXG4gKlxuICogdmFyIHBhaXJzVG9PYmogPSBwYWlycy5yZWR1Y2UoKG1lbW8sIHBhaXIpID0+IGFwcGx5UGFpcnMobWVtbywgcGFpciksIHt9KVxuICogLy8gcGFpcnNUb09iaiA9PSB7IGZvb2tleTogXCJmb292YWxcIiwgYmFya2V5OiBcImJhcnZhbFwiIH1cbiAqXG4gKiAvLyBPciwgbW9yZSBzaW1wbHk6XG4gKiB2YXIgcGFpcnNUb09iaiA9IHBhaXJzLnJlZHVjZShhcHBseVBhaXJzLCB7fSlcbiAqIC8vIHBhaXJzVG9PYmogPT0geyBmb29rZXk6IFwiZm9vdmFsXCIsIGJhcmtleTogXCJiYXJ2YWxcIiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGFpcnMobWVtbywga2V5VmFsVHVwbGUpIHtcbiAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICBpZiAoaXNBcnJheShrZXlWYWxUdXBsZSkpXG4gICAgICAgIGtleSA9IGtleVZhbFR1cGxlWzBdLCB2YWx1ZSA9IGtleVZhbFR1cGxlWzFdO1xuICAgIGlmICghaXNTdHJpbmcoa2V5KSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBhcmFtZXRlcnMgdG8gYXBwbHlQYWlycycpO1xuICAgIG1lbW9ba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiBtZW1vO1xufVxuLyoqIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5ICovXG5leHBvcnQgZnVuY3Rpb24gdGFpbChhcnIpIHtcbiAgICByZXR1cm4gKGFyci5sZW5ndGggJiYgYXJyW2Fyci5sZW5ndGggLSAxXSkgfHwgdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBzaGFsbG93IGNvcHkgZnJvbSBzcmMgdG8gZGVzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weShzcmMsIGRlc3QpIHtcbiAgICBpZiAoZGVzdClcbiAgICAgICAgT2JqZWN0LmtleXMoZGVzdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBkZWxldGUgZGVzdFtrZXldOyB9KTtcbiAgICBpZiAoIWRlc3QpXG4gICAgICAgIGRlc3QgPSB7fTtcbiAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYyk7XG59XG4vKiogTmFpdmUgZm9yRWFjaCBpbXBsZW1lbnRhdGlvbiB3b3JrcyB3aXRoIE9iamVjdHMgb3IgQXJyYXlzICovXG5mdW5jdGlvbiBfZm9yRWFjaChvYmosIGNiLCBfdGhpcykge1xuICAgIGlmIChpc0FycmF5KG9iaikpXG4gICAgICAgIHJldHVybiBvYmouZm9yRWFjaChjYiwgX3RoaXMpO1xuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBjYihvYmpba2V5XSwga2V5KTsgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2V4dGVuZCh0b09iaikge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBvYmogPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGlmICghb2JqKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB0b09ialtrZXlzW2pdXSA9IG9ialtrZXlzW2pdXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG9PYmo7XG59XG5mdW5jdGlvbiBfZXF1YWxzKG8xLCBvMikge1xuICAgIGlmIChvMSA9PT0gbzIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChvMSA9PT0gbnVsbCB8fCBvMiA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChvMSAhPT0gbzEgJiYgbzIgIT09IG8yKVxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gTmFOID09PSBOYU5cbiAgICB2YXIgdDEgPSB0eXBlb2YgbzEsIHQyID0gdHlwZW9mIG8yO1xuICAgIGlmICh0MSAhPT0gdDIgfHwgdDEgIT09ICdvYmplY3QnKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHR1cCA9IFtvMSwgbzJdO1xuICAgIGlmIChhbGwoaXNBcnJheSkodHVwKSlcbiAgICAgICAgcmV0dXJuIF9hcnJheXNFcShvMSwgbzIpO1xuICAgIGlmIChhbGwoaXNEYXRlKSh0dXApKVxuICAgICAgICByZXR1cm4gbzEuZ2V0VGltZSgpID09PSBvMi5nZXRUaW1lKCk7XG4gICAgaWYgKGFsbChpc1JlZ0V4cCkodHVwKSlcbiAgICAgICAgcmV0dXJuIG8xLnRvU3RyaW5nKCkgPT09IG8yLnRvU3RyaW5nKCk7XG4gICAgaWYgKGFsbChpc0Z1bmN0aW9uKSh0dXApKVxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gbWVoXG4gICAgdmFyIHByZWRpY2F0ZXMgPSBbaXNGdW5jdGlvbiwgaXNBcnJheSwgaXNEYXRlLCBpc1JlZ0V4cF07XG4gICAgaWYgKHByZWRpY2F0ZXMubWFwKGFueSkucmVkdWNlKGZ1bmN0aW9uIChiLCBmbikgeyByZXR1cm4gYiB8fCAhIWZuKHR1cCk7IH0sIGZhbHNlKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBrZXlzID0ge307XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmZvcmluXG4gICAgZm9yICh2YXIga2V5IGluIG8xKSB7XG4gICAgICAgIGlmICghX2VxdWFscyhvMVtrZXldLCBvMltrZXldKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAga2V5c1trZXldID0gdHJ1ZTtcbiAgICB9XG4gICAgZm9yICh2YXIga2V5IGluIG8yKSB7XG4gICAgICAgIGlmICgha2V5c1trZXldKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIF9hcnJheXNFcShhMSwgYTIpIHtcbiAgICBpZiAoYTEubGVuZ3RoICE9PSBhMi5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gYXJyYXlUdXBsZXMoYTEsIGEyKS5yZWR1Y2UoZnVuY3Rpb24gKGIsIHQpIHsgcmV0dXJuIGIgJiYgX2VxdWFscyh0WzBdLCB0WzFdKTsgfSwgdHJ1ZSk7XG59XG4vLyBpc3N1ZSAjMjY3NlxuZXhwb3J0IHZhciBzaWxlbmNlVW5jYXVnaHRJblByb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZSkgeyByZXR1cm4gcHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gMDsgfSkgJiYgcHJvbWlzZTsgfTtcbmV4cG9ydCB2YXIgc2lsZW50UmVqZWN0aW9uID0gZnVuY3Rpb24gKGVycm9yKSB7IHJldHVybiBzaWxlbmNlVW5jYXVnaHRJblByb21pc2Uoc2VydmljZXMuJHEucmVqZWN0KGVycm9yKSk7IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwiLyoqIFByZWRpY2F0ZXNcbiAqXG4gKiBUaGVzZSBwcmVkaWNhdGVzIHJldHVybiB0cnVlL2ZhbHNlIGJhc2VkIG9uIHRoZSBpbnB1dC5cbiAqIEFsdGhvdWdoIHRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIHRoZXkgYXJlIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgbm90aWNlLlxuICpcbiAqIEBtb2R1bGUgY29tbW9uX3ByZWRpY2F0ZXNcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBhbmQsIG5vdCwgcGlwZSwgcHJvcCwgb3IgfSBmcm9tICcuL2hvZic7XG52YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIHRpcyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gdHlwZW9mIHggPT09IHQ7IH07IH07XG5leHBvcnQgdmFyIGlzVW5kZWZpbmVkID0gdGlzKCd1bmRlZmluZWQnKTtcbmV4cG9ydCB2YXIgaXNEZWZpbmVkID0gbm90KGlzVW5kZWZpbmVkKTtcbmV4cG9ydCB2YXIgaXNOdWxsID0gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gPT09IG51bGw7IH07XG5leHBvcnQgdmFyIGlzTnVsbE9yVW5kZWZpbmVkID0gb3IoaXNOdWxsLCBpc1VuZGVmaW5lZCk7XG5leHBvcnQgdmFyIGlzRnVuY3Rpb24gPSB0aXMoJ2Z1bmN0aW9uJyk7XG5leHBvcnQgdmFyIGlzTnVtYmVyID0gdGlzKCdudW1iZXInKTtcbmV4cG9ydCB2YXIgaXNTdHJpbmcgPSB0aXMoJ3N0cmluZycpO1xuZXhwb3J0IHZhciBpc09iamVjdCA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICE9PSBudWxsICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0JzsgfTtcbmV4cG9ydCB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5leHBvcnQgdmFyIGlzRGF0ZSA9IChmdW5jdGlvbiAoeCkgeyByZXR1cm4gdG9TdHIuY2FsbCh4KSA9PT0gJ1tvYmplY3QgRGF0ZV0nOyB9KTtcbmV4cG9ydCB2YXIgaXNSZWdFeHAgPSAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHRvU3RyLmNhbGwoeCkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nOyB9KTtcbi8qKlxuICogUHJlZGljYXRlIHdoaWNoIGNoZWNrcyBpZiBhIHZhbHVlIGlzIGluamVjdGFibGVcbiAqXG4gKiBBIHZhbHVlIGlzIFwiaW5qZWN0YWJsZVwiIGlmIGl0IGlzIGEgZnVuY3Rpb24sIG9yIGlmIGl0IGlzIGFuIG5nMSBhcnJheS1ub3RhdGlvbi1zdHlsZSBhcnJheVxuICogd2hlcmUgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgYXJyYXkgYXJlIFN0cmluZ3MsIGV4Y2VwdCB0aGUgbGFzdCBvbmUsIHdoaWNoIGlzIGEgRnVuY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW5qZWN0YWJsZSh2YWwpIHtcbiAgICBpZiAoaXNBcnJheSh2YWwpICYmIHZhbC5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGhlYWQgPSB2YWwuc2xpY2UoMCwgLTEpLCB0YWlsID0gdmFsLnNsaWNlKC0xKTtcbiAgICAgICAgcmV0dXJuICEoaGVhZC5maWx0ZXIobm90KGlzU3RyaW5nKSkubGVuZ3RoIHx8IHRhaWwuZmlsdGVyKG5vdChpc0Z1bmN0aW9uKSkubGVuZ3RoKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24odmFsKTtcbn1cbi8qKlxuICogUHJlZGljYXRlIHdoaWNoIGNoZWNrcyBpZiBhIHZhbHVlIGxvb2tzIGxpa2UgYSBQcm9taXNlXG4gKlxuICogSXQgaXMgcHJvYmFibHkgYSBQcm9taXNlIGlmIGl0J3MgYW4gb2JqZWN0LCBhbmQgaXQgaGFzIGEgYHRoZW5gIHByb3BlcnR5IHdoaWNoIGlzIGEgRnVuY3Rpb25cbiAqL1xuZXhwb3J0IHZhciBpc1Byb21pc2UgPSBhbmQoaXNPYmplY3QsIHBpcGUocHJvcCgndGhlbicpLCBpc0Z1bmN0aW9uKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcmVkaWNhdGVzLmpzLm1hcCIsIi8qKlxuICogSGlnaGVyIG9yZGVyIGZ1bmN0aW9uc1xuICpcbiAqIFRoZXNlIHV0aWxpdHkgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgYnV0IGFyZSBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG5vdGljZS5cbiAqXG4gKiBAbW9kdWxlIGNvbW1vbl9ob2ZcbiAqLyAvKiogKi9cbi8qKlxuICogUmV0dXJucyBhIG5ldyBmdW5jdGlvbiBmb3IgW1BhcnRpYWwgQXBwbGljYXRpb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BhcnRpYWxfYXBwbGljYXRpb24pIG9mIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi5cbiAqXG4gKiBHaXZlbiBhIGZ1bmN0aW9uIHdpdGggTiBwYXJhbWV0ZXJzLCByZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIHRoYXQgc3VwcG9ydHMgcGFydGlhbCBhcHBsaWNhdGlvbi5cbiAqIFRoZSBuZXcgZnVuY3Rpb24gYWNjZXB0cyBhbnl3aGVyZSBmcm9tIDEgdG8gTiBwYXJhbWV0ZXJzLiAgV2hlbiB0aGF0IGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIE0gcGFyYW1ldGVycyxcbiAqIHdoZXJlIE0gaXMgbGVzcyB0aGFuIE4sIGl0IHJldHVybnMgYSBuZXcgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHRoZSByZW1haW5pbmcgcGFyYW1ldGVycy4gIEl0IGNvbnRpbnVlcyB0b1xuICogYWNjZXB0IG1vcmUgcGFyYW1ldGVycyB1bnRpbCBhbGwgTiBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBzdXBwbGllZC5cbiAqXG4gKlxuICogVGhpcyBjb250cml2ZWQgZXhhbXBsZSB1c2VzIGEgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24gYXMgYW4gcHJlZGljYXRlLCB3aGljaCByZXR1cm5zIHRydWVcbiAqIGlmIGFuIG9iamVjdCBpcyBmb3VuZCBpbiBib3RoIGFycmF5cy5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIC8vIHJldHVybnMgdHJ1ZSBpZiBhbiBvYmplY3QgaXMgaW4gYm90aCBvZiB0aGUgdHdvIGFycmF5c1xuICogZnVuY3Rpb24gaW5Cb3RoKGFycmF5MSwgYXJyYXkyLCBvYmplY3QpIHtcbiAqICAgcmV0dXJuIGFycmF5MS5pbmRleE9mKG9iamVjdCkgIT09IC0xICYmXG4gKiAgICAgICAgICBhcnJheTIuaW5kZXhPZihvYmplY3QpICE9PSAxO1xuICogfVxuICogbGV0IG9iajEsIG9iajIsIG9iajMsIG9iajQsIG9iajUsIG9iajYsIG9iajdcbiAqIGxldCBmb29zID0gW29iajEsIG9iajNdXG4gKiBsZXQgYmFycyA9IFtvYmozLCBvYmo0LCBvYmo1XVxuICpcbiAqIC8vIEEgY3VycmllZCBcImNvcHlcIiBvZiBpbkJvdGhcbiAqIGxldCBjdXJyaWVkSW5Cb3RoID0gY3VycnkoaW5Cb3RoKTtcbiAqIC8vIFBhcnRpYWxseSBhcHBseSBib3RoIHRoZSBhcnJheTEgYW5kIGFycmF5MlxuICogbGV0IGluRm9vc0FuZEJhcnMgPSBjdXJyaWVkSW5Cb3RoKGZvb3MsIGJhcnMpO1xuICpcbiAqIC8vIFN1cHBseSB0aGUgZmluYWwgYXJndW1lbnQ7IHNpbmNlIGFsbCBhcmd1bWVudHMgYXJlXG4gKiAvLyBzdXBwbGllZCwgdGhlIG9yaWdpbmFsIGluQm90aCBmdW5jdGlvbiBpcyB0aGVuIGNhbGxlZC5cbiAqIGxldCBvYmoxSW5Cb3RoID0gaW5Gb29zQW5kQmFycyhvYmoxKTsgLy8gZmFsc2VcbiAqXG4gKiAvLyBVc2UgdGhlIGluRm9vc0FuZEJhcnMgYXMgYSBwcmVkaWNhdGUuXG4gKiAvLyBGaWx0ZXIsIG9uIGVhY2ggaXRlcmF0aW9uLCBzdXBwbGllcyB0aGUgZmluYWwgYXJndW1lbnRcbiAqIGxldCBhbGxPYmpzID0gWyBvYmoxLCBvYmoyLCBvYmozLCBvYmo0LCBvYmo1LCBvYmo2LCBvYmo3IF07XG4gKiBsZXQgZm91bmRJbkJvdGggPSBhbGxPYmpzLmZpbHRlcihpbkZvb3NBbmRCYXJzKTsgLy8gWyBvYmozIF1cbiAqXG4gKiBgYGBcbiAqXG4gKiBTdG9sZW4gZnJvbTogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80Mzk0NzQ3L2phdmFzY3JpcHQtY3VycnktZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0gZm5cbiAqIEByZXR1cm5zIHsqfGZ1bmN0aW9uKCk6ICgqfGFueSl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjdXJyeShmbikge1xuICAgIHZhciBpbml0aWFsX2FyZ3MgPSBbXS5zbGljZS5hcHBseShhcmd1bWVudHMsIFsxXSk7XG4gICAgdmFyIGZ1bmNfYXJnc19sZW5ndGggPSBmbi5sZW5ndGg7XG4gICAgZnVuY3Rpb24gY3VycmllZChhcmdzKSB7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSBmdW5jX2FyZ3NfbGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJpZWQoYXJncy5jb25jYXQoW10uc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gY3VycmllZChpbml0aWFsX2FyZ3MpO1xufVxuLyoqXG4gKiBHaXZlbiBhIHZhcmFyZ3MgbGlzdCBvZiBmdW5jdGlvbnMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGNvbXBvc2VzIHRoZSBhcmd1bWVudCBmdW5jdGlvbnMsIHJpZ2h0LXRvLWxlZnRcbiAqIGdpdmVuOiBmKHgpLCBnKHgpLCBoKHgpXG4gKiBsZXQgY29tcG9zZWQgPSBjb21wb3NlKGYsZyxoKVxuICogdGhlbiwgY29tcG9zZWQgaXM6IGYoZyhoKHgpKSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvc2UoKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIHN0YXJ0ID0gYXJncy5sZW5ndGggLSAxO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpID0gc3RhcnQsIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuLyoqXG4gKiBHaXZlbiBhIHZhcmFyZ3MgbGlzdCBvZiBmdW5jdGlvbnMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIGNvbXBvc2VzIHRoZSBhcmd1bWVudCBmdW5jdGlvbnMsIGxlZnQtdG8tcmlnaHRcbiAqIGdpdmVuOiBmKHgpLCBnKHgpLCBoKHgpXG4gKiBsZXQgcGlwZWQgPSBwaXBlKGYsZyxoKTtcbiAqIHRoZW4sIHBpcGVkIGlzOiBoKGcoZih4KSkpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkge1xuICAgIHZhciBmdW5jcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGZ1bmNzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBjb21wb3NlLmFwcGx5KG51bGwsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5yZXZlcnNlKCkpO1xufVxuLyoqXG4gKiBHaXZlbiBhIHByb3BlcnR5IG5hbWUsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhhdCBwcm9wZXJ0eSBmcm9tIGFuIG9iamVjdFxuICogbGV0IG9iaiA9IHsgZm9vOiAxLCBuYW1lOiBcImJsYXJnXCIgfTtcbiAqIGxldCBnZXROYW1lID0gcHJvcChcIm5hbWVcIik7XG4gKiBnZXROYW1lKG9iaikgPT09IFwiYmxhcmdcIlxuICovXG5leHBvcnQgdmFyIHByb3AgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9ialtuYW1lXTsgfTsgfTtcbi8qKlxuICogR2l2ZW4gYSBwcm9wZXJ0eSBuYW1lIGFuZCBhIHZhbHVlLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB3aGV0aGVyXG4gKiB0aGUgcGFzc2VkIG9iamVjdCBoYXMgYSBwcm9wZXJ0eSB0aGF0IG1hdGNoZXMgdGhlIHZhbHVlXG4gKiBsZXQgb2JqID0geyBmb286IDEsIG5hbWU6IFwiYmxhcmdcIiB9O1xuICogbGV0IGdldE5hbWUgPSBwcm9wRXEoXCJuYW1lXCIsIFwiYmxhcmdcIik7XG4gKiBnZXROYW1lKG9iaikgPT09IHRydWVcbiAqL1xuZXhwb3J0IHZhciBwcm9wRXEgPSBjdXJyeShmdW5jdGlvbiAobmFtZSwgX3ZhbCwgb2JqKSB7IHJldHVybiBvYmogJiYgb2JqW25hbWVdID09PSBfdmFsOyB9KTtcbi8qKlxuICogR2l2ZW4gYSBkb3R0ZWQgcHJvcGVydHkgbmFtZSwgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG5lc3RlZCBwcm9wZXJ0eSBmcm9tIGFuIG9iamVjdCwgb3IgdW5kZWZpbmVkXG4gKiBsZXQgb2JqID0geyBpZDogMSwgbmVzdGVkT2JqOiB7IGZvbzogMSwgbmFtZTogXCJibGFyZ1wiIH0sIH07XG4gKiBsZXQgZ2V0TmFtZSA9IHByb3AoXCJuZXN0ZWRPYmoubmFtZVwiKTtcbiAqIGdldE5hbWUob2JqKSA9PT0gXCJibGFyZ1wiXG4gKiBsZXQgcHJvcE5vdEZvdW5kID0gcHJvcChcInRoaXMucHJvcGVydHkuZG9lc250LmV4aXN0XCIpO1xuICogcHJvcE5vdEZvdW5kKG9iaikgPT09IHVuZGVmaW5lZFxuICovXG5leHBvcnQgdmFyIHBhcnNlID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIHBpcGUuYXBwbHkobnVsbCwgbmFtZS5zcGxpdCgnLicpLm1hcChwcm9wKSk7IH07XG4vKipcbiAqIEdpdmVuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdHJ1dGh5IG9yIGZhbHNleSB2YWx1ZSwgcmV0dXJucyBhXG4gKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG9wcG9zaXRlIChmYWxzZXkgb3IgdHJ1dGh5KSB2YWx1ZSBnaXZlbiB0aGUgc2FtZSBpbnB1dHNcbiAqL1xuZXhwb3J0IHZhciBub3QgPSBmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuICFmbi5hcHBseShudWxsLCBhcmdzKTtcbn07IH07XG4vKipcbiAqIEdpdmVuIHR3byBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdHJ1dGh5IG9yIGZhbHNleSB2YWx1ZXMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1dGh5XG4gKiBpZiBib3RoIGZ1bmN0aW9ucyByZXR1cm4gdHJ1dGh5IGZvciB0aGUgZ2l2ZW4gYXJndW1lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbmQoZm4xLCBmbjIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbjEuYXBwbHkobnVsbCwgYXJncykgJiYgZm4yLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH07XG59XG4vKipcbiAqIEdpdmVuIHR3byBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdHJ1dGh5IG9yIGZhbHNleSB2YWx1ZXMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1dGh5XG4gKiBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlIGZ1bmN0aW9ucyByZXR1cm5zIHRydXRoeSBmb3IgdGhlIGdpdmVuIGFyZ3VtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gb3IoZm4xLCBmbjIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbjEuYXBwbHkobnVsbCwgYXJncykgfHwgZm4yLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH07XG59XG4vKipcbiAqIENoZWNrIGlmIGFsbCB0aGUgZWxlbWVudHMgb2YgYW4gYXJyYXkgbWF0Y2ggYSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0gZm4xIGEgcHJlZGljYXRlIGZ1bmN0aW9uIGBmbjFgXG4gKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGFuIGFycmF5IGFuZCByZXR1cm5zIHRydWUgaWYgYGZuMWAgaXMgdHJ1ZSBmb3IgYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheVxuICovXG5leHBvcnQgdmFyIGFsbCA9IGZ1bmN0aW9uIChmbjEpIHsgcmV0dXJuIGZ1bmN0aW9uIChhcnIpIHsgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGIsIHgpIHsgcmV0dXJuIGIgJiYgISFmbjEoeCk7IH0sIHRydWUpOyB9OyB9O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmV4cG9ydCB2YXIgYW55ID0gZnVuY3Rpb24gKGZuMSkgeyByZXR1cm4gZnVuY3Rpb24gKGFycikgeyByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoYiwgeCkgeyByZXR1cm4gYiB8fCAhIWZuMSh4KTsgfSwgZmFsc2UpOyB9OyB9O1xuLyoqIEdpdmVuIGEgY2xhc3MsIHJldHVybnMgYSBQcmVkaWNhdGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBvZiB0aGF0IGNsYXNzICovXG5leHBvcnQgdmFyIGlzID0gZnVuY3Rpb24gKGN0b3IpIHsgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gKG9iaiAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gY3RvcikgfHwgb2JqIGluc3RhbmNlb2YgY3Rvcjtcbn07IH07XG4vKiogR2l2ZW4gYSB2YWx1ZSwgcmV0dXJucyBhIFByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbm90aGVyIHZhbHVlIGlzID09PSBlcXVhbCB0byB0aGUgb3JpZ2luYWwgdmFsdWUgKi9cbmV4cG9ydCB2YXIgZXEgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIGZ1bmN0aW9uIChvdGhlcikgeyByZXR1cm4gdmFsdWUgPT09IG90aGVyOyB9OyB9O1xuLyoqIEdpdmVuIGEgdmFsdWUsIHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZSB2YWx1ZSAqL1xuZXhwb3J0IHZhciB2YWwgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gdjsgfTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBpbnZva2UoZm5OYW1lLCBhcmdzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9ialtmbk5hbWVdLmFwcGx5KG9iaiwgYXJncyk7IH07XG59XG4vKipcbiAqIFNvcnRhIGxpa2UgUGF0dGVybiBNYXRjaGluZyAoYSBmdW5jdGlvbmFsIHByb2dyYW1taW5nIGNvbmRpdGlvbmFsIGNvbnN0cnVjdClcbiAqXG4gKiBTZWUgaHR0cDovL2MyLmNvbS9jZ2kvd2lraT9QYXR0ZXJuTWF0Y2hpbmdcbiAqXG4gKiBUaGlzIGlzIGEgY29uZGl0aW9uYWwgY29uc3RydWN0IHdoaWNoIGFsbG93cyBhIHNlcmllcyBvZiBwcmVkaWNhdGVzIGFuZCBvdXRwdXQgZnVuY3Rpb25zXG4gKiB0byBiZSBjaGVja2VkIGFuZCB0aGVuIGFwcGxpZWQuICBFYWNoIHByZWRpY2F0ZSByZWNlaXZlcyB0aGUgaW5wdXQuICBJZiB0aGUgcHJlZGljYXRlXG4gKiByZXR1cm5zIHRydXRoeSwgdGhlbiBpdHMgbWF0Y2hpbmcgb3V0cHV0IGZ1bmN0aW9uIChtYXBwaW5nIGZ1bmN0aW9uKSBpcyBwcm92aWRlZCB3aXRoXG4gKiB0aGUgaW5wdXQgYW5kLCB0aGVuIHRoZSByZXN1bHQgaXMgcmV0dXJuZWQuXG4gKlxuICogRWFjaCBjb21iaW5hdGlvbiAoMi10dXBsZSkgb2YgcHJlZGljYXRlICsgb3V0cHV0IGZ1bmN0aW9uIHNob3VsZCBiZSBwbGFjZWQgaW4gYW4gYXJyYXlcbiAqIG9mIHNpemUgMjogWyBwcmVkaWNhdGUsIG1hcEZuIF1cbiAqXG4gKiBUaGVzZSAyLXR1cGxlcyBzaG91bGQgYmUgcHV0IGluIGFuIG91dGVyIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiAvLyBIZXJlJ3MgYSAyLXR1cGxlIHdoZXJlIHRoZSBmaXJzdCBlbGVtZW50IGlzIHRoZSBpc1N0cmluZyBwcmVkaWNhdGVcbiAqIC8vIGFuZCB0aGUgc2Vjb25kIGVsZW1lbnQgaXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaW5wdXRcbiAqIGxldCBmaXJzdFR1cGxlID0gWyBhbmd1bGFyLmlzU3RyaW5nLCAoaW5wdXQpID0+IGBIZXJlcyB5b3VyIHN0cmluZyAke2lucHV0fWAgXTtcbiAqXG4gKiAvLyBTZWNvbmQgdHVwbGU6IHByZWRpY2F0ZSBcImlzTnVtYmVyXCIsIG1hcGZuIHJldHVybnMgYSBkZXNjcmlwdGlvblxuICogbGV0IHNlY29uZFR1cGxlID0gWyBhbmd1bGFyLmlzTnVtYmVyLCAoaW5wdXQpID0+IGAoJHtpbnB1dH0pIFRoYXQncyBhIG51bWJlciFgIF07XG4gKlxuICogbGV0IHRoaXJkID0gWyAoaW5wdXQpID0+IGlucHV0ID09PSBudWxsLCAgKGlucHV0KSA9PiBgT2gsIG51bGwuLi5gIF07XG4gKlxuICogbGV0IGZvdXJ0aCA9IFsgKGlucHV0KSA9PiBpbnB1dCA9PT0gdW5kZWZpbmVkLCAgKGlucHV0KSA9PiBgbm90ZGVmaW5lZGAgXTtcbiAqXG4gKiBsZXQgZGVzY3JpcHRpb25PZiA9IHBhdHRlcm4oWyBmaXJzdFR1cGxlLCBzZWNvbmRUdXBsZSwgdGhpcmQsIGZvdXJ0aCBdKTtcbiAqXG4gKiBjb25zb2xlLmxvZyhkZXNjcmlwdGlvbk9mKHVuZGVmaW5lZCkpOyAvLyAnbm90ZGVmaW5lZCdcbiAqIGNvbnNvbGUubG9nKGRlc2NyaXB0aW9uT2YoNTUpKTsgLy8gJyg1NSkgVGhhdCdzIGEgbnVtYmVyISdcbiAqIGNvbnNvbGUubG9nKGRlc2NyaXB0aW9uT2YoXCJmb29cIikpOyAvLyAnSGVyZSdzIHlvdXIgc3RyaW5nIGZvbydcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzdHJ1Y3QgQSAyRCBhcnJheS4gIEVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXkgc2hvdWxkIGJlIGFuIGFycmF5LCBhIDItdHVwbGUsXG4gKiB3aXRoIGEgUHJlZGljYXRlIGFuZCBhIG1hcHBpbmcvb3V0cHV0IGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oYW55KTogKn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhdHRlcm4oc3RydWN0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RydWN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc3RydWN0W2ldWzBdKHgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJ1Y3RbaV1bMV0oeCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9mLmpzLm1hcCIsImV4cG9ydCB2YXIgbm90SW1wbGVtZW50ZWQgPSBmdW5jdGlvbiAoZm5uYW1lKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGZubmFtZSArIFwiKCk6IE5vIGNvcmVzZXJ2aWNlcyBpbXBsZW1lbnRhdGlvbiBmb3IgVUktUm91dGVyIGlzIGxvYWRlZC5cIik7XG59OyB9O1xudmFyIHNlcnZpY2VzID0ge1xuICAgICRxOiB1bmRlZmluZWQsXG4gICAgJGluamVjdG9yOiB1bmRlZmluZWQsXG59O1xuZXhwb3J0IHsgc2VydmljZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvcmVzZXJ2aWNlcy5qcy5tYXAiLCJyZXF1aXJlKCcuL2FuZ3VsYXInKTtcbm1vZHVsZS5leHBvcnRzID0gYW5ndWxhcjtcbiIsImltcG9ydCAnLi9zdHlsZS5zY3NzJztcbmltcG9ydCBhcHAgZnJvbSAnLi9hcHAnOyIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL3N0eWxlLnNjc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vc3R5bGUuc2Nzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiZGl2IGgxe2NvbG9yOmJsYWNrfWJ1dHRvbntmb250LXNpemU6MTNweDtwYWRkaW5nOjVweCAxMHB4O2JhY2tncm91bmQtY29sb3I6b3JhbmdlO2NvbG9yOndoaXRlO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MnB4fWJ1dHRvbjpob3Zlcntmb250LXNpemU6MTNweDtwYWRkaW5nOjVweCAxMHB4O2JhY2tncm91bmQtY29sb3I6Z3JheTtjb2xvcjp3aGl0ZTtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjJweH1cXG5cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvICsgXCIgXCIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cbiIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvfFxccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuIiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdSb3V0ZXIgZnJvbSAnQHVpcm91dGVyL2FuZ3VsYXJqcyc7XG5pbXBvcnQgSG9tZUN0cmwgZnJvbSAnLi9jb250cm9sbGVyL0hvbWVDdHJsJztcbmltcG9ydCBQcm9maWxlQ3RybCBmcm9tICcuL2NvbnRyb2xsZXIvUHJvZmlsZUN0cmwnO1xuXG5jb25zdCBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSlcbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAuc3RhdGUoJy8nLCB7XG4gICAgICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFnZXMvaG9tZS5odG1sJ1xuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJy9wcm9maWxlJywge1xuICAgICAgICAgICAgdXJsOiAnL3Byb2ZpbGUnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYWdlcy9wcm9maWxlLmh0bWwnXG4gICAgICAgIH0pO1xufSk7XG5hcHAuY29udHJvbGxlcignSG9tZUN0cmwnLCBIb21lQ3RybCk7XG5hcHAuY29udHJvbGxlcignUHJvZmlsZUN0cmwnLCBQcm9maWxlQ3RybCk7XG5leHBvcnQgZGVmYXVsdCBhcHA7IiwiLyoqXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuNi45XG4gKiAoYykgMjAxMC0yMDE4IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbih3aW5kb3cpIHsndXNlIHN0cmljdCc7XG5cbi8qIGV4cG9ydGVkXG4gIG1pbkVyckNvbmZpZyxcbiAgZXJyb3JIYW5kbGluZ0NvbmZpZyxcbiAgaXNWYWxpZE9iamVjdE1heERlcHRoXG4qL1xuXG52YXIgbWluRXJyQ29uZmlnID0ge1xuICBvYmplY3RNYXhEZXB0aDogNVxufTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZXJyb3JIYW5kbGluZ0NvbmZpZ1xuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbmZpZ3VyZSBzZXZlcmFsIGFzcGVjdHMgb2YgZXJyb3IgaGFuZGxpbmcgaW4gQW5ndWxhckpTIGlmIHVzZWQgYXMgYSBzZXR0ZXIgb3IgcmV0dXJuIHRoZVxuICogY3VycmVudCBjb25maWd1cmF0aW9uIGlmIHVzZWQgYXMgYSBnZXR0ZXIuIFRoZSBmb2xsb3dpbmcgb3B0aW9ucyBhcmUgc3VwcG9ydGVkOlxuICpcbiAqIC0gKipvYmplY3RNYXhEZXB0aCoqOiBUaGUgbWF4aW11bSBkZXB0aCB0byB3aGljaCBvYmplY3RzIGFyZSB0cmF2ZXJzZWQgd2hlbiBzdHJpbmdpZmllZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKlxuICogT21pdHRlZCBvciB1bmRlZmluZWQgb3B0aW9ucyB3aWxsIGxlYXZlIHRoZSBjb3JyZXNwb25kaW5nIGNvbmZpZ3VyYXRpb24gdmFsdWVzIHVuY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdC4gTWF5IG9ubHkgY29udGFpbiB0aGUgb3B0aW9ucyB0aGF0IG5lZWQgdG8gYmVcbiAqICAgICB1cGRhdGVkLiBTdXBwb3J0ZWQga2V5czpcbiAqXG4gKiAqIGBvYmplY3RNYXhEZXB0aGAgICoqe051bWJlcn0qKiAtIFRoZSBtYXggZGVwdGggZm9yIHN0cmluZ2lmeWluZyBvYmplY3RzLiBTZXR0aW5nIHRvIGFcbiAqICAgbm9uLXBvc2l0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCByZW1vdmVzIHRoZSBtYXggZGVwdGggbGltaXQuXG4gKiAgIERlZmF1bHQ6IDVcbiAqL1xuZnVuY3Rpb24gZXJyb3JIYW5kbGluZ0NvbmZpZyhjb25maWcpIHtcbiAgaWYgKGlzT2JqZWN0KGNvbmZpZykpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGNvbmZpZy5vYmplY3RNYXhEZXB0aCkpIHtcbiAgICAgIG1pbkVyckNvbmZpZy5vYmplY3RNYXhEZXB0aCA9IGlzVmFsaWRPYmplY3RNYXhEZXB0aChjb25maWcub2JqZWN0TWF4RGVwdGgpID8gY29uZmlnLm9iamVjdE1heERlcHRoIDogTmFOO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbWluRXJyQ29uZmlnO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXhEZXB0aFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZE9iamVjdE1heERlcHRoKG1heERlcHRoKSB7XG4gIHJldHVybiBpc051bWJlcihtYXhEZXB0aCkgJiYgbWF4RGVwdGggPiAwO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgb2JqZWN0IHByb3ZpZGVzIGEgdXRpbGl0eSBmb3IgcHJvZHVjaW5nIHJpY2ggRXJyb3IgbWVzc2FnZXMgd2l0aGluXG4gKiBBbmd1bGFySlMuIEl0IGNhbiBiZSBjYWxsZWQgYXMgZm9sbG93czpcbiAqXG4gKiB2YXIgZXhhbXBsZU1pbkVyciA9IG1pbkVycignZXhhbXBsZScpO1xuICogdGhyb3cgZXhhbXBsZU1pbkVycignb25lJywgJ1RoaXMgezB9IGlzIHsxfScsIGZvbywgYmFyKTtcbiAqXG4gKiBUaGUgYWJvdmUgY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBtaW5FcnIgaW4gdGhlIGV4YW1wbGUgbmFtZXNwYWNlLiBUaGVcbiAqIHJlc3VsdGluZyBlcnJvciB3aWxsIGhhdmUgYSBuYW1lc3BhY2VkIGVycm9yIGNvZGUgb2YgZXhhbXBsZS5vbmUuICBUaGVcbiAqIHJlc3VsdGluZyBlcnJvciB3aWxsIHJlcGxhY2UgezB9IHdpdGggdGhlIHZhbHVlIG9mIGZvbywgYW5kIHsxfSB3aXRoIHRoZVxuICogdmFsdWUgb2YgYmFyLiBUaGUgb2JqZWN0IGlzIG5vdCByZXN0cmljdGVkIGluIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIGl0IGNhblxuICogdGFrZS5cbiAqXG4gKiBJZiBmZXdlciBhcmd1bWVudHMgYXJlIHNwZWNpZmllZCB0aGFuIG5lY2Vzc2FyeSBmb3IgaW50ZXJwb2xhdGlvbiwgdGhlIGV4dHJhXG4gKiBpbnRlcnBvbGF0aW9uIG1hcmtlcnMgd2lsbCBiZSBwcmVzZXJ2ZWQgaW4gdGhlIGZpbmFsIHN0cmluZy5cbiAqXG4gKiBTaW5jZSBkYXRhIHdpbGwgYmUgcGFyc2VkIHN0YXRpY2FsbHkgZHVyaW5nIGEgYnVpbGQgc3RlcCwgc29tZSByZXN0cmljdGlvbnNcbiAqIGFyZSBhcHBsaWVkIHdpdGggcmVzcGVjdCB0byBob3cgbWluRXJyIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhbmQgY2FsbGVkLlxuICogSW5zdGFuY2VzIHNob3VsZCBoYXZlIG5hbWVzIG9mIHRoZSBmb3JtIG5hbWVzcGFjZU1pbkVyciBmb3IgYSBtaW5FcnIgY3JlYXRlZFxuICogdXNpbmcgbWluRXJyKCduYW1lc3BhY2UnKSAuIEVycm9yIGNvZGVzLCBuYW1lc3BhY2VzIGFuZCB0ZW1wbGF0ZSBzdHJpbmdzXG4gKiBzaG91bGQgYWxsIGJlIHN0YXRpYyBzdHJpbmdzLCBub3QgdmFyaWFibGVzIG9yIGdlbmVyYWwgZXhwcmVzc2lvbnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZSBUaGUgbmFtZXNwYWNlIHRvIHVzZSBmb3IgdGhlIG5ldyBtaW5FcnIgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBFcnJvckNvbnN0cnVjdG9yIEN1c3RvbSBlcnJvciBjb25zdHJ1Y3RvciB0byBiZSBpbnN0YW50aWF0ZWQgd2hlbiByZXR1cm5pbmdcbiAqICAgZXJyb3IgZnJvbSByZXR1cm5lZCBmdW5jdGlvbiwgZm9yIGNhc2VzIHdoZW4gYSBwYXJ0aWN1bGFyIHR5cGUgb2YgZXJyb3IgaXMgdXNlZnVsLlxuICogQHJldHVybnMge2Z1bmN0aW9uKGNvZGU6c3RyaW5nLCB0ZW1wbGF0ZTpzdHJpbmcsIC4uLnRlbXBsYXRlQXJncyk6IEVycm9yfSBtaW5FcnIgaW5zdGFuY2VcbiAqL1xuXG5mdW5jdGlvbiBtaW5FcnIobW9kdWxlLCBFcnJvckNvbnN0cnVjdG9yKSB7XG4gIEVycm9yQ29uc3RydWN0b3IgPSBFcnJvckNvbnN0cnVjdG9yIHx8IEVycm9yO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvZGUgPSBhcmd1bWVudHNbMF0sXG4gICAgICB0ZW1wbGF0ZSA9IGFyZ3VtZW50c1sxXSxcbiAgICAgIG1lc3NhZ2UgPSAnWycgKyAobW9kdWxlID8gbW9kdWxlICsgJzonIDogJycpICsgY29kZSArICddICcsXG4gICAgICB0ZW1wbGF0ZUFyZ3MgPSBzbGljZUFyZ3MoYXJndW1lbnRzLCAyKS5tYXAoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0b0RlYnVnU3RyaW5nKGFyZywgbWluRXJyQ29uZmlnLm9iamVjdE1heERlcHRoKTtcbiAgICAgIH0pLFxuICAgICAgcGFyYW1QcmVmaXgsIGk7XG5cbiAgICBtZXNzYWdlICs9IHRlbXBsYXRlLnJlcGxhY2UoL1xce1xcZCtcXH0vZywgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgIHZhciBpbmRleCA9ICttYXRjaC5zbGljZSgxLCAtMSk7XG5cbiAgICAgIGlmIChpbmRleCA8IHRlbXBsYXRlQXJncy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlQXJnc1tpbmRleF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2UgKz0gJ1xcbmh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjYuOS8nICtcbiAgICAgIChtb2R1bGUgPyBtb2R1bGUgKyAnLycgOiAnJykgKyBjb2RlO1xuXG4gICAgZm9yIChpID0gMCwgcGFyYW1QcmVmaXggPSAnPyc7IGkgPCB0ZW1wbGF0ZUFyZ3MubGVuZ3RoOyBpKyssIHBhcmFtUHJlZml4ID0gJyYnKSB7XG4gICAgICBtZXNzYWdlICs9IHBhcmFtUHJlZml4ICsgJ3AnICsgaSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh0ZW1wbGF0ZUFyZ3NbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRXJyb3JDb25zdHJ1Y3RvcihtZXNzYWdlKTtcbiAgfTtcbn1cblxuLyogV2UgbmVlZCB0byB0ZWxsIEVTTGludCB3aGF0IHZhcmlhYmxlcyBhcmUgYmVpbmcgZXhwb3J0ZWQgKi9cbi8qIGV4cG9ydGVkXG4gIGFuZ3VsYXIsXG4gIG1zaWUsXG4gIGpxTGl0ZSxcbiAgalF1ZXJ5LFxuICBzbGljZSxcbiAgc3BsaWNlLFxuICBwdXNoLFxuICB0b1N0cmluZyxcbiAgbWluRXJyQ29uZmlnLFxuICBlcnJvckhhbmRsaW5nQ29uZmlnLFxuICBpc1ZhbGlkT2JqZWN0TWF4RGVwdGgsXG4gIG5nTWluRXJyLFxuICBhbmd1bGFyTW9kdWxlLFxuICB1aWQsXG4gIFJFR0VYX1NUUklOR19SRUdFWFAsXG4gIFZBTElESVRZX1NUQVRFX1BST1BFUlRZLFxuXG4gIGxvd2VyY2FzZSxcbiAgdXBwZXJjYXNlLFxuICBtYW51YWxMb3dlcmNhc2UsXG4gIG1hbnVhbFVwcGVyY2FzZSxcbiAgbm9kZU5hbWVfLFxuICBpc0FycmF5TGlrZSxcbiAgZm9yRWFjaCxcbiAgZm9yRWFjaFNvcnRlZCxcbiAgcmV2ZXJzZVBhcmFtcyxcbiAgbmV4dFVpZCxcbiAgc2V0SGFzaEtleSxcbiAgZXh0ZW5kLFxuICB0b0ludCxcbiAgaW5oZXJpdCxcbiAgbWVyZ2UsXG4gIG5vb3AsXG4gIGlkZW50aXR5LFxuICB2YWx1ZUZuLFxuICBpc1VuZGVmaW5lZCxcbiAgaXNEZWZpbmVkLFxuICBpc09iamVjdCxcbiAgaXNCbGFua09iamVjdCxcbiAgaXNTdHJpbmcsXG4gIGlzTnVtYmVyLFxuICBpc051bWJlck5hTixcbiAgaXNEYXRlLFxuICBpc0Vycm9yLFxuICBpc0FycmF5LFxuICBpc0Z1bmN0aW9uLFxuICBpc1JlZ0V4cCxcbiAgaXNXaW5kb3csXG4gIGlzU2NvcGUsXG4gIGlzRmlsZSxcbiAgaXNGb3JtRGF0YSxcbiAgaXNCbG9iLFxuICBpc0Jvb2xlYW4sXG4gIGlzUHJvbWlzZUxpa2UsXG4gIHRyaW0sXG4gIGVzY2FwZUZvclJlZ2V4cCxcbiAgaXNFbGVtZW50LFxuICBtYWtlTWFwLFxuICBpbmNsdWRlcyxcbiAgYXJyYXlSZW1vdmUsXG4gIGNvcHksXG4gIHNpbXBsZUNvbXBhcmUsXG4gIGVxdWFscyxcbiAgY3NwLFxuICBqcSxcbiAgY29uY2F0LFxuICBzbGljZUFyZ3MsXG4gIGJpbmQsXG4gIHRvSnNvblJlcGxhY2VyLFxuICB0b0pzb24sXG4gIGZyb21Kc29uLFxuICBjb252ZXJ0VGltZXpvbmVUb0xvY2FsLFxuICB0aW1lem9uZVRvT2Zmc2V0LFxuICBzdGFydGluZ1RhZyxcbiAgdHJ5RGVjb2RlVVJJQ29tcG9uZW50LFxuICBwYXJzZUtleVZhbHVlLFxuICB0b0tleVZhbHVlLFxuICBlbmNvZGVVcmlTZWdtZW50LFxuICBlbmNvZGVVcmlRdWVyeSxcbiAgYW5ndWxhckluaXQsXG4gIGJvb3RzdHJhcCxcbiAgZ2V0VGVzdGFiaWxpdHksXG4gIHNuYWtlX2Nhc2UsXG4gIGJpbmRKUXVlcnksXG4gIGFzc2VydEFyZyxcbiAgYXNzZXJ0QXJnRm4sXG4gIGFzc2VydE5vdEhhc093blByb3BlcnR5LFxuICBnZXR0ZXIsXG4gIGdldEJsb2NrTm9kZXMsXG4gIGhhc093blByb3BlcnR5LFxuICBjcmVhdGVNYXAsXG4gIHN0cmluZ2lmeSxcblxuICBOT0RFX1RZUEVfRUxFTUVOVCxcbiAgTk9ERV9UWVBFX0FUVFJJQlVURSxcbiAgTk9ERV9UWVBFX1RFWFQsXG4gIE5PREVfVFlQRV9DT01NRU5ULFxuICBOT0RFX1RZUEVfRE9DVU1FTlQsXG4gIE5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVFxuKi9cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbmdcbiAqIEBtb2R1bGUgbmdcbiAqIEBpbnN0YWxsYXRpb25cbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoZSBuZyBtb2R1bGUgaXMgbG9hZGVkIGJ5IGRlZmF1bHQgd2hlbiBhbiBBbmd1bGFySlMgYXBwbGljYXRpb24gaXMgc3RhcnRlZC4gVGhlIG1vZHVsZSBpdHNlbGZcbiAqIGNvbnRhaW5zIHRoZSBlc3NlbnRpYWwgY29tcG9uZW50cyBmb3IgYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uIHRvIGZ1bmN0aW9uLiBUaGUgdGFibGUgYmVsb3dcbiAqIGxpc3RzIGEgaGlnaCBsZXZlbCBicmVha2Rvd24gb2YgZWFjaCBvZiB0aGUgc2VydmljZXMvZmFjdG9yaWVzLCBmaWx0ZXJzLCBkaXJlY3RpdmVzIGFuZCB0ZXN0aW5nXG4gKiBjb21wb25lbnRzIGF2YWlsYWJsZSB3aXRoaW4gdGhpcyBjb3JlIG1vZHVsZS5cbiAqXG4gKi9cblxudmFyIFJFR0VYX1NUUklOR19SRUdFWFAgPSAvXlxcLyguKylcXC8oW2Etel0qKSQvO1xuXG4vLyBUaGUgbmFtZSBvZiBhIGZvcm0gY29udHJvbCdzIFZhbGlkaXR5U3RhdGUgcHJvcGVydHkuXG4vLyBUaGlzIGlzIHVzZWQgc28gdGhhdCBpdCdzIHBvc3NpYmxlIGZvciBpbnRlcm5hbCB0ZXN0cyB0byBjcmVhdGUgbW9jayBWYWxpZGl0eVN0YXRlcy5cbnZhciBWQUxJRElUWV9TVEFURV9QUk9QRVJUWSA9ICd2YWxpZGl0eSc7XG5cblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIubG93ZXJjYXNlXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXByZWNhdGVkXG4gKiBzaW5jZVZlcnNpb249XCIxLjUuMFwiXG4gKiByZW1vdmVWZXJzaW9uPVwiMS43LjBcIlxuICogVXNlIFtTdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvdG9Mb3dlckNhc2UpIGluc3RlYWQuXG4gKlxuICogQGRlc2NyaXB0aW9uIENvbnZlcnRzIHRoZSBzcGVjaWZpZWQgc3RyaW5nIHRvIGxvd2VyY2FzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byBsb3dlcmNhc2UuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBMb3dlcmNhc2VkIHN0cmluZy5cbiAqL1xudmFyIGxvd2VyY2FzZSA9IGZ1bmN0aW9uKHN0cmluZykge3JldHVybiBpc1N0cmluZyhzdHJpbmcpID8gc3RyaW5nLnRvTG93ZXJDYXNlKCkgOiBzdHJpbmc7fTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIudXBwZXJjYXNlXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXByZWNhdGVkXG4gKiBzaW5jZVZlcnNpb249XCIxLjUuMFwiXG4gKiByZW1vdmVWZXJzaW9uPVwiMS43LjBcIlxuICogVXNlIFtTdHJpbmcucHJvdG90eXBlLnRvVXBwZXJDYXNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvdG9VcHBlckNhc2UpIGluc3RlYWQuXG4gKlxuICogQGRlc2NyaXB0aW9uIENvbnZlcnRzIHRoZSBzcGVjaWZpZWQgc3RyaW5nIHRvIHVwcGVyY2FzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byB1cHBlcmNhc2UuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBVcHBlcmNhc2VkIHN0cmluZy5cbiAqL1xudmFyIHVwcGVyY2FzZSA9IGZ1bmN0aW9uKHN0cmluZykge3JldHVybiBpc1N0cmluZyhzdHJpbmcpID8gc3RyaW5nLnRvVXBwZXJDYXNlKCkgOiBzdHJpbmc7fTtcblxuXG52YXIgbWFudWFsTG93ZXJjYXNlID0gZnVuY3Rpb24ocykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG4gIHJldHVybiBpc1N0cmluZyhzKVxuICAgICAgPyBzLnJlcGxhY2UoL1tBLVpdL2csIGZ1bmN0aW9uKGNoKSB7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2guY2hhckNvZGVBdCgwKSB8IDMyKTt9KVxuICAgICAgOiBzO1xuICAvKiBlc2xpbnQtZW5hYmxlICovXG59O1xudmFyIG1hbnVhbFVwcGVyY2FzZSA9IGZ1bmN0aW9uKHMpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSAqL1xuICByZXR1cm4gaXNTdHJpbmcocylcbiAgICAgID8gcy5yZXBsYWNlKC9bYS16XS9nLCBmdW5jdGlvbihjaCkge3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoLmNoYXJDb2RlQXQoMCkgJiB+MzIpO30pXG4gICAgICA6IHM7XG4gIC8qIGVzbGludC1lbmFibGUgKi9cbn07XG5cblxuLy8gU3RyaW5nI3RvTG93ZXJDYXNlIGFuZCBTdHJpbmcjdG9VcHBlckNhc2UgZG9uJ3QgcHJvZHVjZSBjb3JyZWN0IHJlc3VsdHMgaW4gYnJvd3NlcnMgd2l0aCBUdXJraXNoXG4vLyBsb2NhbGUsIGZvciB0aGlzIHJlYXNvbiB3ZSBuZWVkIHRvIGRldGVjdCB0aGlzIGNhc2UgYW5kIHJlZGVmaW5lIGxvd2VyY2FzZS91cHBlcmNhc2UgbWV0aG9kc1xuLy8gd2l0aCBjb3JyZWN0IGJ1dCBzbG93ZXIgYWx0ZXJuYXRpdmVzLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTEzODdcbmlmICgnaScgIT09ICdJJy50b0xvd2VyQ2FzZSgpKSB7XG4gIGxvd2VyY2FzZSA9IG1hbnVhbExvd2VyY2FzZTtcbiAgdXBwZXJjYXNlID0gbWFudWFsVXBwZXJjYXNlO1xufVxuXG5cbnZhclxuICAgIG1zaWUsICAgICAgICAgICAgIC8vIGhvbGRzIG1ham9yIHZlcnNpb24gbnVtYmVyIGZvciBJRSwgb3IgTmFOIGlmIFVBIGlzIG5vdCBJRS5cbiAgICBqcUxpdGUsICAgICAgICAgICAvLyBkZWxheSBiaW5kaW5nIHNpbmNlIGpRdWVyeSBjb3VsZCBiZSBsb2FkZWQgYWZ0ZXIgdXMuXG4gICAgalF1ZXJ5LCAgICAgICAgICAgLy8gZGVsYXkgYmluZGluZ1xuICAgIHNsaWNlICAgICAgICAgICAgID0gW10uc2xpY2UsXG4gICAgc3BsaWNlICAgICAgICAgICAgPSBbXS5zcGxpY2UsXG4gICAgcHVzaCAgICAgICAgICAgICAgPSBbXS5wdXNoLFxuICAgIHRvU3RyaW5nICAgICAgICAgID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcbiAgICBnZXRQcm90b3R5cGVPZiAgICA9IE9iamVjdC5nZXRQcm90b3R5cGVPZixcbiAgICBuZ01pbkVyciAgICAgICAgICA9IG1pbkVycignbmcnKSxcblxuICAgIC8qKiBAbmFtZSBhbmd1bGFyICovXG4gICAgYW5ndWxhciAgICAgICAgICAgPSB3aW5kb3cuYW5ndWxhciB8fCAod2luZG93LmFuZ3VsYXIgPSB7fSksXG4gICAgYW5ndWxhck1vZHVsZSxcbiAgICB1aWQgICAgICAgICAgICAgICA9IDA7XG5cbi8vIFN1cHBvcnQ6IElFIDktMTEgb25seVxuLyoqXG4gKiBkb2N1bWVudE1vZGUgaXMgYW4gSUUtb25seSBwcm9wZXJ0eVxuICogaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2NjMTk2OTg4KHY9dnMuODUpLmFzcHhcbiAqL1xubXNpZSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudE1vZGU7XG5cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBgb2JqYCBpcyBhbiBhcnJheSBvciBhcnJheS1saWtlIG9iamVjdCAoTm9kZUxpc3QsIEFyZ3VtZW50cyxcbiAqICAgICAgICAgICAgICAgICAgIFN0cmluZyAuLi4pXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKG9iaikge1xuXG4gIC8vIGBudWxsYCwgYHVuZGVmaW5lZGAgYW5kIGB3aW5kb3dgIGFyZSBub3QgYXJyYXktbGlrZVxuICBpZiAob2JqID09IG51bGwgfHwgaXNXaW5kb3cob2JqKSkgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIGFycmF5cywgc3RyaW5ncyBhbmQgalF1ZXJ5L2pxTGl0ZSBvYmplY3RzIGFyZSBhcnJheSBsaWtlXG4gIC8vICoganFMaXRlIGlzIGVpdGhlciB0aGUgalF1ZXJ5IG9yIGpxTGl0ZSBjb25zdHJ1Y3RvciBmdW5jdGlvblxuICAvLyAqIHdlIGhhdmUgdG8gY2hlY2sgdGhlIGV4aXN0ZW5jZSBvZiBqcUxpdGUgZmlyc3QgYXMgdGhpcyBtZXRob2QgaXMgY2FsbGVkXG4gIC8vICAgdmlhIHRoZSBmb3JFYWNoIG1ldGhvZCB3aGVuIGNvbnN0cnVjdGluZyB0aGUganFMaXRlIG9iamVjdCBpbiB0aGUgZmlyc3QgcGxhY2VcbiAgaWYgKGlzQXJyYXkob2JqKSB8fCBpc1N0cmluZyhvYmopIHx8IChqcUxpdGUgJiYgb2JqIGluc3RhbmNlb2YganFMaXRlKSkgcmV0dXJuIHRydWU7XG5cbiAgLy8gU3VwcG9ydDogaU9TIDguMiAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpXG4gIC8vIFwibGVuZ3RoXCIgaW4gb2JqIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTExNTA4KVxuICB2YXIgbGVuZ3RoID0gJ2xlbmd0aCcgaW4gT2JqZWN0KG9iaikgJiYgb2JqLmxlbmd0aDtcblxuICAvLyBOb2RlTGlzdCBvYmplY3RzICh3aXRoIGBpdGVtYCBtZXRob2QpIGFuZFxuICAvLyBvdGhlciBvYmplY3RzIHdpdGggc3VpdGFibGUgbGVuZ3RoIGNoYXJhY3RlcmlzdGljcyBhcmUgYXJyYXktbGlrZVxuICByZXR1cm4gaXNOdW1iZXIobGVuZ3RoKSAmJlxuICAgIChsZW5ndGggPj0gMCAmJiAoKGxlbmd0aCAtIDEpIGluIG9iaiB8fCBvYmogaW5zdGFuY2VvZiBBcnJheSkgfHwgdHlwZW9mIG9iai5pdGVtID09PSAnZnVuY3Rpb24nKTtcblxufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5mb3JFYWNoXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSW52b2tlcyB0aGUgYGl0ZXJhdG9yYCBmdW5jdGlvbiBvbmNlIGZvciBlYWNoIGl0ZW0gaW4gYG9iamAgY29sbGVjdGlvbiwgd2hpY2ggY2FuIGJlIGVpdGhlciBhblxuICogb2JqZWN0IG9yIGFuIGFycmF5LiBUaGUgYGl0ZXJhdG9yYCBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGggYGl0ZXJhdG9yKHZhbHVlLCBrZXksIG9iailgLCB3aGVyZSBgdmFsdWVgXG4gKiBpcyB0aGUgdmFsdWUgb2YgYW4gb2JqZWN0IHByb3BlcnR5IG9yIGFuIGFycmF5IGVsZW1lbnQsIGBrZXlgIGlzIHRoZSBvYmplY3QgcHJvcGVydHkga2V5IG9yXG4gKiBhcnJheSBlbGVtZW50IGluZGV4IGFuZCBvYmogaXMgdGhlIGBvYmpgIGl0c2VsZi4gU3BlY2lmeWluZyBhIGBjb250ZXh0YCBmb3IgdGhlIGZ1bmN0aW9uIGlzIG9wdGlvbmFsLlxuICpcbiAqIEl0IGlzIHdvcnRoIG5vdGluZyB0aGF0IGAuZm9yRWFjaGAgZG9lcyBub3QgaXRlcmF0ZSBvdmVyIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlY2F1c2UgaXQgZmlsdGVyc1xuICogdXNpbmcgdGhlIGBoYXNPd25Qcm9wZXJ0eWAgbWV0aG9kLlxuICpcbiAqIFVubGlrZSBFUzI2MidzXG4gKiBbQXJyYXkucHJvdG90eXBlLmZvckVhY2hdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS40LjQuMTgpLFxuICogcHJvdmlkaW5nICd1bmRlZmluZWQnIG9yICdudWxsJyB2YWx1ZXMgZm9yIGBvYmpgIHdpbGwgbm90IHRocm93IGEgVHlwZUVycm9yLCBidXQgcmF0aGVyIGp1c3RcbiAqIHJldHVybiB0aGUgdmFsdWUgcHJvdmlkZWQuXG4gKlxuICAgYGBganNcbiAgICAgdmFyIHZhbHVlcyA9IHtuYW1lOiAnbWlza28nLCBnZW5kZXI6ICdtYWxlJ307XG4gICAgIHZhciBsb2cgPSBbXTtcbiAgICAgYW5ndWxhci5mb3JFYWNoKHZhbHVlcywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgIHRoaXMucHVzaChrZXkgKyAnOiAnICsgdmFsdWUpO1xuICAgICB9LCBsb2cpO1xuICAgICBleHBlY3QobG9nKS50b0VxdWFsKFsnbmFtZTogbWlza28nLCAnZ2VuZGVyOiBtYWxlJ10pO1xuICAgYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBPYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3IgSXRlcmF0b3IgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdD19IGNvbnRleHQgT2JqZWN0IHRvIGJlY29tZSBjb250ZXh0IChgdGhpc2ApIGZvciB0aGUgaXRlcmF0b3IgZnVuY3Rpb24uXG4gKiBAcmV0dXJucyB7T2JqZWN0fEFycmF5fSBSZWZlcmVuY2UgdG8gYG9iamAuXG4gKi9cblxuZnVuY3Rpb24gZm9yRWFjaChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gIHZhciBrZXksIGxlbmd0aDtcbiAgaWYgKG9iaikge1xuICAgIGlmIChpc0Z1bmN0aW9uKG9iaikpIHtcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAoa2V5ICE9PSAncHJvdG90eXBlJyAmJiBrZXkgIT09ICdsZW5ndGgnICYmIGtleSAhPT0gJ25hbWUnICYmIG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9iaikgfHwgaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAgdmFyIGlzUHJpbWl0aXZlID0gdHlwZW9mIG9iaiAhPT0gJ29iamVjdCc7XG4gICAgICBmb3IgKGtleSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlIHx8IGtleSBpbiBvYmopIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9iai5mb3JFYWNoICYmIG9iai5mb3JFYWNoICE9PSBmb3JFYWNoKSB7XG4gICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0LCBvYmopO1xuICAgIH0gZWxzZSBpZiAoaXNCbGFua09iamVjdChvYmopKSB7XG4gICAgICAvLyBjcmVhdGVNYXAoKSBmYXN0IHBhdGggLS0tIFNhZmUgdG8gYXZvaWQgaGFzT3duUHJvcGVydHkgY2hlY2sgYmVjYXVzZSBwcm90b3R5cGUgY2hhaW4gaXMgZW1wdHlcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqLmhhc093blByb3BlcnR5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBTbG93IHBhdGggZm9yIG9iamVjdHMgaW5oZXJpdGluZyBPYmplY3QucHJvdG90eXBlLCBoYXNPd25Qcm9wZXJ0eSBjaGVjayBuZWVkZWRcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2xvdyBwYXRoIGZvciBvYmplY3RzIHdoaWNoIGRvIG5vdCBoYXZlIGEgbWV0aG9kIGBoYXNPd25Qcm9wZXJ0eWBcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaFNvcnRlZChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKS5zb3J0KCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleXNbaV1dLCBrZXlzW2ldKTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn1cblxuXG4vKipcbiAqIHdoZW4gdXNpbmcgZm9yRWFjaCB0aGUgcGFyYW1zIGFyZSB2YWx1ZSwga2V5LCBidXQgaXQgaXMgb2Z0ZW4gdXNlZnVsIHRvIGhhdmUga2V5LCB2YWx1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCAqKX0gaXRlcmF0b3JGblxuICogQHJldHVybnMge2Z1bmN0aW9uKCosIHN0cmluZyl9XG4gKi9cbmZ1bmN0aW9uIHJldmVyc2VQYXJhbXMoaXRlcmF0b3JGbikge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGtleSkge2l0ZXJhdG9yRm4oa2V5LCB2YWx1ZSk7fTtcbn1cblxuLyoqXG4gKiBBIGNvbnNpc3RlbnQgd2F5IG9mIGNyZWF0aW5nIHVuaXF1ZSBJRHMgaW4gYW5ndWxhci5cbiAqXG4gKiBVc2luZyBzaW1wbGUgbnVtYmVycyBhbGxvd3MgdXMgdG8gZ2VuZXJhdGUgMjguNiBtaWxsaW9uIHVuaXF1ZSBpZHMgcGVyIHNlY29uZCBmb3IgMTAgeWVhcnMgYmVmb3JlXG4gKiB3ZSBoaXQgbnVtYmVyIHByZWNpc2lvbiBpc3N1ZXMgaW4gSmF2YVNjcmlwdC5cbiAqXG4gKiBNYXRoLnBvdygyLDUzKSAvIDYwIC8gNjAgLyAyNCAvIDM2NSAvIDEwID0gMjguNk1cbiAqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbiB1bmlxdWUgYWxwaGEtbnVtZXJpYyBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gbmV4dFVpZCgpIHtcbiAgcmV0dXJuICsrdWlkO1xufVxuXG5cbi8qKlxuICogU2V0IG9yIGNsZWFyIHRoZSBoYXNoa2V5IGZvciBhbiBvYmplY3QuXG4gKiBAcGFyYW0gb2JqIG9iamVjdFxuICogQHBhcmFtIGggdGhlIGhhc2hrZXkgKCF0cnV0aHkgdG8gZGVsZXRlIHRoZSBoYXNoa2V5KVxuICovXG5mdW5jdGlvbiBzZXRIYXNoS2V5KG9iaiwgaCkge1xuICBpZiAoaCkge1xuICAgIG9iai4kJGhhc2hLZXkgPSBoO1xuICB9IGVsc2Uge1xuICAgIGRlbGV0ZSBvYmouJCRoYXNoS2V5O1xuICB9XG59XG5cblxuZnVuY3Rpb24gYmFzZUV4dGVuZChkc3QsIG9ianMsIGRlZXApIHtcbiAgdmFyIGggPSBkc3QuJCRoYXNoS2V5O1xuXG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IG9ianMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBvYmogPSBvYmpzW2ldO1xuICAgIGlmICghaXNPYmplY3Qob2JqKSAmJiAhaXNGdW5jdGlvbihvYmopKSBjb250aW51ZTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0ga2V5cy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tqXTtcbiAgICAgIHZhciBzcmMgPSBvYmpba2V5XTtcblxuICAgICAgaWYgKGRlZXAgJiYgaXNPYmplY3Qoc3JjKSkge1xuICAgICAgICBpZiAoaXNEYXRlKHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IG5ldyBEYXRlKHNyYy52YWx1ZU9mKCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUmVnRXhwKHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IG5ldyBSZWdFeHAoc3JjKTtcbiAgICAgICAgfSBlbHNlIGlmIChzcmMubm9kZU5hbWUpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IHNyYy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IHNyYy5jbG9uZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghaXNPYmplY3QoZHN0W2tleV0pKSBkc3Rba2V5XSA9IGlzQXJyYXkoc3JjKSA/IFtdIDoge307XG4gICAgICAgICAgYmFzZUV4dGVuZChkc3Rba2V5XSwgW3NyY10sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkc3Rba2V5XSA9IHNyYztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRIYXNoS2V5KGRzdCwgaCk7XG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmV4dGVuZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEV4dGVuZHMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBgZHN0YCBieSBjb3B5aW5nIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZnJvbSB0aGUgYHNyY2Agb2JqZWN0KHMpXG4gKiB0byBgZHN0YC4gWW91IGNhbiBzcGVjaWZ5IG11bHRpcGxlIGBzcmNgIG9iamVjdHMuIElmIHlvdSB3YW50IHRvIHByZXNlcnZlIG9yaWdpbmFsIG9iamVjdHMsIHlvdSBjYW4gZG8gc29cbiAqIGJ5IHBhc3NpbmcgYW4gZW1wdHkgb2JqZWN0IGFzIHRoZSB0YXJnZXQ6IGB2YXIgb2JqZWN0ID0gYW5ndWxhci5leHRlbmQoe30sIG9iamVjdDEsIG9iamVjdDIpYC5cbiAqXG4gKiAqKk5vdGU6KiogS2VlcCBpbiBtaW5kIHRoYXQgYGFuZ3VsYXIuZXh0ZW5kYCBkb2VzIG5vdCBzdXBwb3J0IHJlY3Vyc2l2ZSBtZXJnZSAoZGVlcCBjb3B5KS4gVXNlXG4gKiB7QGxpbmsgYW5ndWxhci5tZXJnZX0gZm9yIHRoaXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRzdCBEZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gc3JjIFNvdXJjZSBvYmplY3QocykuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZWZlcmVuY2UgdG8gYGRzdGAuXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChkc3QpIHtcbiAgcmV0dXJuIGJhc2VFeHRlbmQoZHN0LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGZhbHNlKTtcbn1cblxuXG4vKipcbiogQG5nZG9jIGZ1bmN0aW9uXG4qIEBuYW1lIGFuZ3VsYXIubWVyZ2VcbiogQG1vZHVsZSBuZ1xuKiBAa2luZCBmdW5jdGlvblxuKlxuKiBAZGVzY3JpcHRpb25cbiogRGVlcGx5IGV4dGVuZHMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBgZHN0YCBieSBjb3B5aW5nIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZnJvbSB0aGUgYHNyY2Agb2JqZWN0KHMpXG4qIHRvIGBkc3RgLiBZb3UgY2FuIHNwZWNpZnkgbXVsdGlwbGUgYHNyY2Agb2JqZWN0cy4gSWYgeW91IHdhbnQgdG8gcHJlc2VydmUgb3JpZ2luYWwgb2JqZWN0cywgeW91IGNhbiBkbyBzb1xuKiBieSBwYXNzaW5nIGFuIGVtcHR5IG9iamVjdCBhcyB0aGUgdGFyZ2V0OiBgdmFyIG9iamVjdCA9IGFuZ3VsYXIubWVyZ2Uoe30sIG9iamVjdDEsIG9iamVjdDIpYC5cbipcbiogVW5saWtlIHtAbGluayBhbmd1bGFyLmV4dGVuZCBleHRlbmQoKX0sIGBtZXJnZSgpYCByZWN1cnNpdmVseSBkZXNjZW5kcyBpbnRvIG9iamVjdCBwcm9wZXJ0aWVzIG9mIHNvdXJjZVxuKiBvYmplY3RzLCBwZXJmb3JtaW5nIGEgZGVlcCBjb3B5LlxuKlxuKiBAZGVwcmVjYXRlZFxuKiBzaW5jZVZlcnNpb249XCIxLjYuNVwiXG4qIFRoaXMgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCwgYnV0IHdpbGwgbm90IGJlIHJlbW92ZWQgaW4gdGhlIDEueCBsaWZlY3ljbGUuXG4qIFRoZXJlIGFyZSBlZGdlIGNhc2VzIChzZWUge0BsaW5rIGFuZ3VsYXIubWVyZ2Uja25vd24taXNzdWVzIGtub3duIGlzc3Vlc30pIHRoYXQgYXJlIG5vdFxuKiBzdXBwb3J0ZWQgYnkgdGhpcyBmdW5jdGlvbi4gV2Ugc3VnZ2VzdFxuKiB1c2luZyBbbG9kYXNoJ3MgbWVyZ2UoKV0oaHR0cHM6Ly9sb2Rhc2guY29tL2RvY3MvNC4xNy40I21lcmdlKSBpbnN0ZWFkLlxuKlxuKiBAa25vd25Jc3N1ZVxuKiBUaGlzIGlzIGEgbGlzdCBvZiAoa25vd24pIG9iamVjdCB0eXBlcyB0aGF0IGFyZSBub3QgaGFuZGxlZCBjb3JyZWN0bHkgYnkgdGhpcyBmdW5jdGlvbjpcbiogLSBbYEJsb2JgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYilcbiogLSBbYE1lZGlhU3RyZWFtYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL01lZGlhU3RyZWFtKVxuKiAtIFtgQ2FudmFzR3JhZGllbnRgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQ2FudmFzR3JhZGllbnQpXG4qIC0gQW5ndWxhckpTIHtAbGluayAkcm9vdFNjb3BlLlNjb3BlIHNjb3Blc307XG4qXG4qIEBwYXJhbSB7T2JqZWN0fSBkc3QgRGVzdGluYXRpb24gb2JqZWN0LlxuKiBAcGFyYW0gey4uLk9iamVjdH0gc3JjIFNvdXJjZSBvYmplY3QocykuXG4qIEByZXR1cm5zIHtPYmplY3R9IFJlZmVyZW5jZSB0byBgZHN0YC5cbiovXG5mdW5jdGlvbiBtZXJnZShkc3QpIHtcbiAgcmV0dXJuIGJhc2VFeHRlbmQoZHN0LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIHRydWUpO1xufVxuXG5cblxuZnVuY3Rpb24gdG9JbnQoc3RyKSB7XG4gIHJldHVybiBwYXJzZUludChzdHIsIDEwKTtcbn1cblxudmFyIGlzTnVtYmVyTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIGlzTnVtYmVyTmFOKG51bSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gIHJldHVybiBudW0gIT09IG51bTtcbn07XG5cblxuZnVuY3Rpb24gaW5oZXJpdChwYXJlbnQsIGV4dHJhKSB7XG4gIHJldHVybiBleHRlbmQoT2JqZWN0LmNyZWF0ZShwYXJlbnQpLCBleHRyYSk7XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLm5vb3BcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgbm8gb3BlcmF0aW9ucy4gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZnVsIHdoZW4gd3JpdGluZyBjb2RlIGluIHRoZVxuICogZnVuY3Rpb25hbCBzdHlsZS5cbiAgIGBgYGpzXG4gICAgIGZ1bmN0aW9uIGZvbyhjYWxsYmFjaykge1xuICAgICAgIHZhciByZXN1bHQgPSBjYWxjdWxhdGVSZXN1bHQoKTtcbiAgICAgICAoY2FsbGJhY2sgfHwgYW5ndWxhci5ub29wKShyZXN1bHQpO1xuICAgICB9XG4gICBgYGBcbiAqL1xuZnVuY3Rpb24gbm9vcCgpIHt9XG5ub29wLiRpbmplY3QgPSBbXTtcblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pZGVudGl0eVxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGl0cyBmaXJzdCBhcmd1bWVudC4gVGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgd2hlbiB3cml0aW5nIGNvZGUgaW4gdGhlXG4gKiBmdW5jdGlvbmFsIHN0eWxlLlxuICpcbiAgIGBgYGpzXG4gICBmdW5jdGlvbiB0cmFuc2Zvcm1lcih0cmFuc2Zvcm1hdGlvbkZuLCB2YWx1ZSkge1xuICAgICByZXR1cm4gKHRyYW5zZm9ybWF0aW9uRm4gfHwgYW5ndWxhci5pZGVudGl0eSkodmFsdWUpO1xuICAgfTtcblxuICAgLy8gRS5nLlxuICAgZnVuY3Rpb24gZ2V0UmVzdWx0KGZuLCBpbnB1dCkge1xuICAgICByZXR1cm4gKGZuIHx8IGFuZ3VsYXIuaWRlbnRpdHkpKGlucHV0KTtcbiAgIH07XG5cbiAgIGdldFJlc3VsdChmdW5jdGlvbihuKSB7IHJldHVybiBuICogMjsgfSwgMjEpOyAgIC8vIHJldHVybnMgNDJcbiAgIGdldFJlc3VsdChudWxsLCAyMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybnMgMjFcbiAgIGdldFJlc3VsdCh1bmRlZmluZWQsIDIxKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybnMgMjFcbiAgIGBgYFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgdG8gYmUgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHBhc3NlZCBpbi5cbiAqL1xuZnVuY3Rpb24gaWRlbnRpdHkoJCkge3JldHVybiAkO31cbmlkZW50aXR5LiRpbmplY3QgPSBbXTtcblxuXG5mdW5jdGlvbiB2YWx1ZUZuKHZhbHVlKSB7cmV0dXJuIGZ1bmN0aW9uIHZhbHVlUmVmKCkge3JldHVybiB2YWx1ZTt9O31cblxuZnVuY3Rpb24gaGFzQ3VzdG9tVG9TdHJpbmcob2JqKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKG9iai50b1N0cmluZykgJiYgb2JqLnRvU3RyaW5nICE9PSB0b1N0cmluZztcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc1VuZGVmaW5lZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgdW5kZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyB1bmRlZmluZWQuXG4gKi9cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzRGVmaW5lZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgZGVmaW5lZC5cbiAqL1xuZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzT2JqZWN0XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgT2JqZWN0YC4gVW5saWtlIGB0eXBlb2ZgIGluIEphdmFTY3JpcHQsIGBudWxsYHMgYXJlIG5vdFxuICogY29uc2lkZXJlZCB0byBiZSBvYmplY3RzLiBOb3RlIHRoYXQgSmF2YVNjcmlwdCBhcnJheXMgYXJlIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBPYmplY3RgIGJ1dCBub3QgYG51bGxgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBodHRwOi8vanNwZXJmLmNvbS9pc29iamVjdDRcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhIG51bGwgcHJvdG90eXBlXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgT2JqZWN0YCB3aXRoIGEgbnVsbCBwcm90b3R5cGVcbiAqL1xuZnVuY3Rpb24gaXNCbGFua09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzU3RyaW5nXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIGBTdHJpbmdgLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBTdHJpbmdgLlxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO31cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc051bWJlclxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgTnVtYmVyYC5cbiAqXG4gKiBUaGlzIGluY2x1ZGVzIHRoZSBcInNwZWNpYWxcIiBudW1iZXJzIGBOYU5gLCBgK0luZmluaXR5YCBhbmQgYC1JbmZpbml0eWAuXG4gKlxuICogSWYgeW91IHdpc2ggdG8gZXhjbHVkZSB0aGVzZSB0aGVuIHlvdSBjYW4gdXNlIHRoZSBuYXRpdmVcbiAqIFtgaXNGaW5pdGUnXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9pc0Zpbml0ZSlcbiAqIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgTnVtYmVyYC5cbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJzt9XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNEYXRlXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHZhbHVlIGlzIGEgZGF0ZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgRGF0ZWAuXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc0FycmF5XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgQXJyYXlgLiBBbGlhcyBvZiBBcnJheS5pc0FycmF5LlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgQXJyYXlgLlxuICovXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGFuIGBFcnJvcmAuXG4gKiBMb29zZWx5IGJhc2VkIG9uIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2lzZXJyb3JcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYW4gYEVycm9yYC5cbiAqL1xuZnVuY3Rpb24gaXNFcnJvcih2YWx1ZSkge1xuICB2YXIgdGFnID0gdG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIHN3aXRjaCAodGFnKSB7XG4gICAgY2FzZSAnW29iamVjdCBFcnJvcl0nOiByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdbb2JqZWN0IEV4Y2VwdGlvbl0nOiByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdbb2JqZWN0IERPTUV4Y2VwdGlvbl0nOiByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OiByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBFcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc0Z1bmN0aW9uXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIGBGdW5jdGlvbmAuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYEZ1bmN0aW9uYC5cbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7fVxuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIHZhbHVlIGlzIGEgcmVndWxhciBleHByZXNzaW9uIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYFJlZ0V4cGAuXG4gKi9cbmZ1bmN0aW9uIGlzUmVnRXhwKHZhbHVlKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5cblxuLyoqXG4gKiBDaGVja3MgaWYgYG9iamAgaXMgYSB3aW5kb3cgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IG9iaiBPYmplY3QgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGBvYmpgIGlzIGEgd2luZG93IG9iai5cbiAqL1xuZnVuY3Rpb24gaXNXaW5kb3cob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLndpbmRvdyA9PT0gb2JqO1xufVxuXG5cbmZ1bmN0aW9uIGlzU2NvcGUob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLiRldmFsQXN5bmMgJiYgb2JqLiR3YXRjaDtcbn1cblxuXG5mdW5jdGlvbiBpc0ZpbGUob2JqKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEZpbGVdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBGb3JtRGF0YV0nO1xufVxuXG5cbmZ1bmN0aW9uIGlzQmxvYihvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG5cbmZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7XG59XG5cblxuZnVuY3Rpb24gaXNQcm9taXNlTGlrZShvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBpc0Z1bmN0aW9uKG9iai50aGVuKTtcbn1cblxuXG52YXIgVFlQRURfQVJSQVlfUkVHRVhQID0gL15cXFtvYmplY3QgKD86VWludDh8VWludDhDbGFtcGVkfFVpbnQxNnxVaW50MzJ8SW50OHxJbnQxNnxJbnQzMnxGbG9hdDMyfEZsb2F0NjQpQXJyYXldJC87XG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICYmIGlzTnVtYmVyKHZhbHVlLmxlbmd0aCkgJiYgVFlQRURfQVJSQVlfUkVHRVhQLnRlc3QodG9TdHJpbmcuY2FsbCh2YWx1ZSkpO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyKG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xufVxuXG5cbnZhciB0cmltID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGlzU3RyaW5nKHZhbHVlKSA/IHZhbHVlLnRyaW0oKSA6IHZhbHVlO1xufTtcblxuLy8gQ29waWVkIGZyb206XG4vLyBodHRwOi8vZG9jcy5jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vZ2l0L2xvY2FsX2Nsb3N1cmVfZ29vZ19zdHJpbmdfc3RyaW5nLmpzLnNvdXJjZS5odG1sI2xpbmUxMDIxXG4vLyBQcmVyZXE6IHMgaXMgYSBzdHJpbmcuXG52YXIgZXNjYXBlRm9yUmVnZXhwID0gZnVuY3Rpb24ocykge1xuICByZXR1cm4gc1xuICAgIC5yZXBsYWNlKC8oWy0oKVtcXF17fSs/Ki4kXnwsOiM8IVxcXFxdKS9nLCAnXFxcXCQxJylcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIC5yZXBsYWNlKC9cXHgwOC9nLCAnXFxcXHgwOCcpO1xufTtcblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc0VsZW1lbnRcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGEgRE9NIGVsZW1lbnQgKG9yIHdyYXBwZWQgalF1ZXJ5IGVsZW1lbnQpLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50IChvciB3cmFwcGVkIGpRdWVyeSBlbGVtZW50KS5cbiAqL1xuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcbiAgcmV0dXJuICEhKG5vZGUgJiZcbiAgICAobm9kZS5ub2RlTmFtZSAgLy8gV2UgYXJlIGEgZGlyZWN0IGVsZW1lbnQuXG4gICAgfHwgKG5vZGUucHJvcCAmJiBub2RlLmF0dHIgJiYgbm9kZS5maW5kKSkpOyAgLy8gV2UgaGF2ZSBhbiBvbiBhbmQgZmluZCBtZXRob2QgcGFydCBvZiBqUXVlcnkgQVBJLlxufVxuXG4vKipcbiAqIEBwYXJhbSBzdHIgJ2tleTEsa2V5MiwuLi4nXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBpbiB0aGUgZm9ybSBvZiB7a2V5MTp0cnVlLCBrZXkyOnRydWUsIC4uLn1cbiAqL1xuZnVuY3Rpb24gbWFrZU1hcChzdHIpIHtcbiAgdmFyIG9iaiA9IHt9LCBpdGVtcyA9IHN0ci5zcGxpdCgnLCcpLCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICBvYmpbaXRlbXNbaV1dID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG5cbmZ1bmN0aW9uIG5vZGVOYW1lXyhlbGVtZW50KSB7XG4gIHJldHVybiBsb3dlcmNhc2UoZWxlbWVudC5ub2RlTmFtZSB8fCAoZWxlbWVudFswXSAmJiBlbGVtZW50WzBdLm5vZGVOYW1lKSk7XG59XG5cbmZ1bmN0aW9uIGluY2x1ZGVzKGFycmF5LCBvYmopIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYXJyYXksIG9iaikgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBhcnJheVJlbW92ZShhcnJheSwgdmFsdWUpIHtcbiAgdmFyIGluZGV4ID0gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XG4gIGlmIChpbmRleCA+PSAwKSB7XG4gICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuICByZXR1cm4gaW5kZXg7XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmNvcHlcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLCB3aGljaCBzaG91bGQgYmUgYW4gb2JqZWN0IG9yIGFuIGFycmF5LlxuICpcbiAqICogSWYgbm8gZGVzdGluYXRpb24gaXMgc3VwcGxpZWQsIGEgY29weSBvZiB0aGUgb2JqZWN0IG9yIGFycmF5IGlzIGNyZWF0ZWQuXG4gKiAqIElmIGEgZGVzdGluYXRpb24gaXMgcHJvdmlkZWQsIGFsbCBvZiBpdHMgZWxlbWVudHMgKGZvciBhcnJheXMpIG9yIHByb3BlcnRpZXMgKGZvciBvYmplY3RzKVxuICogICBhcmUgZGVsZXRlZCBhbmQgdGhlbiBhbGwgZWxlbWVudHMvcHJvcGVydGllcyBmcm9tIHRoZSBzb3VyY2UgYXJlIGNvcGllZCB0byBpdC5cbiAqICogSWYgYHNvdXJjZWAgaXMgbm90IGFuIG9iamVjdCBvciBhcnJheSAoaW5jLiBgbnVsbGAgYW5kIGB1bmRlZmluZWRgKSwgYHNvdXJjZWAgaXMgcmV0dXJuZWQuXG4gKiAqIElmIGBzb3VyY2VgIGlzIGlkZW50aWNhbCB0byBgZGVzdGluYXRpb25gIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93bi5cbiAqXG4gKiA8YnIgLz5cbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAgIE9ubHkgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGFyZSB0YWtlbiBpbnRvIGFjY291bnQuIE5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMgKGJvdGggb24gYHNvdXJjZWBcbiAqICAgYW5kIG9uIGBkZXN0aW5hdGlvbmApIHdpbGwgYmUgaWdub3JlZC5cbiAqIDwvZGl2PlxuICpcbiAqIEBwYXJhbSB7Kn0gc291cmNlIFRoZSBzb3VyY2UgdGhhdCB3aWxsIGJlIHVzZWQgdG8gbWFrZSBhIGNvcHkuXG4gKiAgICAgICAgICAgICAgICAgICBDYW4gYmUgYW55IHR5cGUsIGluY2x1ZGluZyBwcmltaXRpdmVzLCBgbnVsbGAsIGFuZCBgdW5kZWZpbmVkYC5cbiAqIEBwYXJhbSB7KE9iamVjdHxBcnJheSk9fSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBpbnRvIHdoaWNoIHRoZSBzb3VyY2UgaXMgY29waWVkLiBJZlxuICogICAgIHByb3ZpZGVkLCBtdXN0IGJlIG9mIHRoZSBzYW1lIHR5cGUgYXMgYHNvdXJjZWAuXG4gKiBAcmV0dXJucyB7Kn0gVGhlIGNvcHkgb3IgdXBkYXRlZCBgZGVzdGluYXRpb25gLCBpZiBgZGVzdGluYXRpb25gIHdhcyBzcGVjaWZpZWQuXG4gKlxuICogQGV4YW1wbGVcbiAgPGV4YW1wbGUgbW9kdWxlPVwiY29weUV4YW1wbGVcIiBuYW1lPVwiYW5ndWxhci1jb3B5XCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIDxmb3JtIG5vdmFsaWRhdGUgY2xhc3M9XCJzaW1wbGUtZm9ybVwiPlxuICAgICAgICAgIDxsYWJlbD5OYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIubmFtZVwiIC8+PC9sYWJlbD48YnIgLz5cbiAgICAgICAgICA8bGFiZWw+QWdlOiAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cInVzZXIuYWdlXCIgLz48L2xhYmVsPjxiciAvPlxuICAgICAgICAgIEdlbmRlcjogPGxhYmVsPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cInVzZXIuZ2VuZGVyXCIgdmFsdWU9XCJtYWxlXCIgLz5tYWxlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJ1c2VyLmdlbmRlclwiIHZhbHVlPVwiZmVtYWxlXCIgLz5mZW1hbGU8L2xhYmVsPjxiciAvPlxuICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJyZXNldCgpXCI+UkVTRVQ8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwidXBkYXRlKHVzZXIpXCI+U0FWRTwvYnV0dG9uPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDxwcmU+Zm9ybSA9IHt7dXNlciB8IGpzb259fTwvcHJlPlxuICAgICAgICA8cHJlPmxlYWRlciA9IHt7bGVhZGVyIHwganNvbn19PC9wcmU+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgLy8gTW9kdWxlOiBjb3B5RXhhbXBsZVxuICAgICAgYW5ndWxhci5cbiAgICAgICAgbW9kdWxlKCdjb3B5RXhhbXBsZScsIFtdKS5cbiAgICAgICAgY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5sZWFkZXIgPSB7fTtcblxuICAgICAgICAgICRzY29wZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gRXhhbXBsZSB3aXRoIDEgYXJndW1lbnRcbiAgICAgICAgICAgICRzY29wZS51c2VyID0gYW5ndWxhci5jb3B5KCRzY29wZS5sZWFkZXIpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgICAgLy8gRXhhbXBsZSB3aXRoIDIgYXJndW1lbnRzXG4gICAgICAgICAgICBhbmd1bGFyLmNvcHkodXNlciwgJHNjb3BlLmxlYWRlcik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgICRzY29wZS5yZXNldCgpO1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uIGNvcHkoc291cmNlLCBkZXN0aW5hdGlvbiwgbWF4RGVwdGgpIHtcbiAgdmFyIHN0YWNrU291cmNlID0gW107XG4gIHZhciBzdGFja0Rlc3QgPSBbXTtcbiAgbWF4RGVwdGggPSBpc1ZhbGlkT2JqZWN0TWF4RGVwdGgobWF4RGVwdGgpID8gbWF4RGVwdGggOiBOYU47XG5cbiAgaWYgKGRlc3RpbmF0aW9uKSB7XG4gICAgaWYgKGlzVHlwZWRBcnJheShkZXN0aW5hdGlvbikgfHwgaXNBcnJheUJ1ZmZlcihkZXN0aW5hdGlvbikpIHtcbiAgICAgIHRocm93IG5nTWluRXJyKCdjcHRhJywgJ0NhblxcJ3QgY29weSEgVHlwZWRBcnJheSBkZXN0aW5hdGlvbiBjYW5ub3QgYmUgbXV0YXRlZC4nKTtcbiAgICB9XG4gICAgaWYgKHNvdXJjZSA9PT0gZGVzdGluYXRpb24pIHtcbiAgICAgIHRocm93IG5nTWluRXJyKCdjcGknLCAnQ2FuXFwndCBjb3B5ISBTb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGFyZSBpZGVudGljYWwuJyk7XG4gICAgfVxuXG4gICAgLy8gRW1wdHkgdGhlIGRlc3RpbmF0aW9uIG9iamVjdFxuICAgIGlmIChpc0FycmF5KGRlc3RpbmF0aW9uKSkge1xuICAgICAgZGVzdGluYXRpb24ubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yRWFjaChkZXN0aW5hdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoa2V5ICE9PSAnJCRoYXNoS2V5Jykge1xuICAgICAgICAgIGRlbGV0ZSBkZXN0aW5hdGlvbltrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZSk7XG4gICAgc3RhY2tEZXN0LnB1c2goZGVzdGluYXRpb24pO1xuICAgIHJldHVybiBjb3B5UmVjdXJzZShzb3VyY2UsIGRlc3RpbmF0aW9uLCBtYXhEZXB0aCk7XG4gIH1cblxuICByZXR1cm4gY29weUVsZW1lbnQoc291cmNlLCBtYXhEZXB0aCk7XG5cbiAgZnVuY3Rpb24gY29weVJlY3Vyc2Uoc291cmNlLCBkZXN0aW5hdGlvbiwgbWF4RGVwdGgpIHtcbiAgICBtYXhEZXB0aC0tO1xuICAgIGlmIChtYXhEZXB0aCA8IDApIHtcbiAgICAgIHJldHVybiAnLi4uJztcbiAgICB9XG4gICAgdmFyIGggPSBkZXN0aW5hdGlvbi4kJGhhc2hLZXk7XG4gICAgdmFyIGtleTtcbiAgICBpZiAoaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzb3VyY2UubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBkZXN0aW5hdGlvbi5wdXNoKGNvcHlFbGVtZW50KHNvdXJjZVtpXSwgbWF4RGVwdGgpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzQmxhbmtPYmplY3Qoc291cmNlKSkge1xuICAgICAgLy8gY3JlYXRlTWFwKCkgZmFzdCBwYXRoIC0tLSBTYWZlIHRvIGF2b2lkIGhhc093blByb3BlcnR5IGNoZWNrIGJlY2F1c2UgcHJvdG90eXBlIGNoYWluIGlzIGVtcHR5XG4gICAgICBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgZGVzdGluYXRpb25ba2V5XSA9IGNvcHlFbGVtZW50KHNvdXJjZVtrZXldLCBtYXhEZXB0aCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzb3VyY2UgJiYgdHlwZW9mIHNvdXJjZS5oYXNPd25Qcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gU2xvdyBwYXRoLCB3aGljaCBtdXN0IHJlbHkgb24gaGFzT3duUHJvcGVydHlcbiAgICAgIGZvciAoa2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBkZXN0aW5hdGlvbltrZXldID0gY29weUVsZW1lbnQoc291cmNlW2tleV0sIG1heERlcHRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTbG93ZXN0IHBhdGggLS0tIGhhc093blByb3BlcnR5IGNhbid0IGJlIGNhbGxlZCBhcyBhIG1ldGhvZFxuICAgICAgZm9yIChrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIGRlc3RpbmF0aW9uW2tleV0gPSBjb3B5RWxlbWVudChzb3VyY2Vba2V5XSwgbWF4RGVwdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHNldEhhc2hLZXkoZGVzdGluYXRpb24sIGgpO1xuICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvcHlFbGVtZW50KHNvdXJjZSwgbWF4RGVwdGgpIHtcbiAgICAvLyBTaW1wbGUgdmFsdWVzXG4gICAgaWYgKCFpc09iamVjdChzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gc291cmNlO1xuICAgIH1cblxuICAgIC8vIEFscmVhZHkgY29waWVkIHZhbHVlc1xuICAgIHZhciBpbmRleCA9IHN0YWNrU291cmNlLmluZGV4T2Yoc291cmNlKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICByZXR1cm4gc3RhY2tEZXN0W2luZGV4XTtcbiAgICB9XG5cbiAgICBpZiAoaXNXaW5kb3coc291cmNlKSB8fCBpc1Njb3BlKHNvdXJjZSkpIHtcbiAgICAgIHRocm93IG5nTWluRXJyKCdjcHdzJyxcbiAgICAgICAgJ0NhblxcJ3QgY29weSEgTWFraW5nIGNvcGllcyBvZiBXaW5kb3cgb3IgU2NvcGUgaW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgfVxuXG4gICAgdmFyIG5lZWRzUmVjdXJzZSA9IGZhbHNlO1xuICAgIHZhciBkZXN0aW5hdGlvbiA9IGNvcHlUeXBlKHNvdXJjZSk7XG5cbiAgICBpZiAoZGVzdGluYXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVzdGluYXRpb24gPSBpc0FycmF5KHNvdXJjZSkgPyBbXSA6IE9iamVjdC5jcmVhdGUoZ2V0UHJvdG90eXBlT2Yoc291cmNlKSk7XG4gICAgICBuZWVkc1JlY3Vyc2UgPSB0cnVlO1xuICAgIH1cblxuICAgIHN0YWNrU291cmNlLnB1c2goc291cmNlKTtcbiAgICBzdGFja0Rlc3QucHVzaChkZXN0aW5hdGlvbik7XG5cbiAgICByZXR1cm4gbmVlZHNSZWN1cnNlXG4gICAgICA/IGNvcHlSZWN1cnNlKHNvdXJjZSwgZGVzdGluYXRpb24sIG1heERlcHRoKVxuICAgICAgOiBkZXN0aW5hdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvcHlUeXBlKHNvdXJjZSkge1xuICAgIHN3aXRjaCAodG9TdHJpbmcuY2FsbChzb3VyY2UpKSB7XG4gICAgICBjYXNlICdbb2JqZWN0IEludDhBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBJbnQxNkFycmF5XSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEludDMyQXJyYXldJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgRmxvYXQzMkFycmF5XSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50OEFycmF5XSc6XG4gICAgICBjYXNlICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XSc6XG4gICAgICBjYXNlICdbb2JqZWN0IFVpbnQxNkFycmF5XSc6XG4gICAgICBjYXNlICdbb2JqZWN0IFVpbnQzMkFycmF5XSc6XG4gICAgICAgIHJldHVybiBuZXcgc291cmNlLmNvbnN0cnVjdG9yKGNvcHlFbGVtZW50KHNvdXJjZS5idWZmZXIpLCBzb3VyY2UuYnl0ZU9mZnNldCwgc291cmNlLmxlbmd0aCk7XG5cbiAgICAgIGNhc2UgJ1tvYmplY3QgQXJyYXlCdWZmZXJdJzpcbiAgICAgICAgLy8gU3VwcG9ydDogSUUxMFxuICAgICAgICBpZiAoIXNvdXJjZS5zbGljZSkge1xuICAgICAgICAgIC8vIElmIHdlJ3JlIGluIHRoaXMgY2FzZSB3ZSBrbm93IHRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyBBcnJheUJ1ZmZlclxuICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4gICAgICAgICAgdmFyIGNvcGllZCA9IG5ldyBBcnJheUJ1ZmZlcihzb3VyY2UuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoY29waWVkKS5zZXQobmV3IFVpbnQ4QXJyYXkoc291cmNlKSk7XG4gICAgICAgICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgICAgICAgIHJldHVybiBjb3BpZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zbGljZSgwKTtcblxuICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuICAgICAgICByZXR1cm4gbmV3IHNvdXJjZS5jb25zdHJ1Y3Rvcihzb3VyY2UudmFsdWVPZigpKTtcblxuICAgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcbiAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cChzb3VyY2Uuc291cmNlLCBzb3VyY2UudG9TdHJpbmcoKS5tYXRjaCgvW14vXSokLylbMF0pO1xuICAgICAgICByZS5sYXN0SW5kZXggPSBzb3VyY2UubGFzdEluZGV4O1xuICAgICAgICByZXR1cm4gcmU7XG5cbiAgICAgIGNhc2UgJ1tvYmplY3QgQmxvYl0nOlxuICAgICAgICByZXR1cm4gbmV3IHNvdXJjZS5jb25zdHJ1Y3Rvcihbc291cmNlXSwge3R5cGU6IHNvdXJjZS50eXBlfSk7XG4gICAgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24oc291cmNlLmNsb25lTm9kZSkpIHtcbiAgICAgIHJldHVybiBzb3VyY2UuY2xvbmVOb2RlKHRydWUpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbmZ1bmN0aW9uIHNpbXBsZUNvbXBhcmUoYSwgYikgeyByZXR1cm4gYSA9PT0gYiB8fCAoYSAhPT0gYSAmJiBiICE9PSBiKTsgfVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmVxdWFsc1xuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgdHdvIG9iamVjdHMgb3IgdHdvIHZhbHVlcyBhcmUgZXF1aXZhbGVudC4gU3VwcG9ydHMgdmFsdWUgdHlwZXMsIHJlZ3VsYXJcbiAqIGV4cHJlc3Npb25zLCBhcnJheXMgYW5kIG9iamVjdHMuXG4gKlxuICogVHdvIG9iamVjdHMgb3IgdmFsdWVzIGFyZSBjb25zaWRlcmVkIGVxdWl2YWxlbnQgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBmb2xsb3dpbmcgaXMgdHJ1ZTpcbiAqXG4gKiAqIEJvdGggb2JqZWN0cyBvciB2YWx1ZXMgcGFzcyBgPT09YCBjb21wYXJpc29uLlxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIGFyZSBvZiB0aGUgc2FtZSB0eXBlIGFuZCBhbGwgb2YgdGhlaXIgcHJvcGVydGllcyBhcmUgZXF1YWwgYnlcbiAqICAgY29tcGFyaW5nIHRoZW0gd2l0aCBgYW5ndWxhci5lcXVhbHNgLlxuICogKiBCb3RoIHZhbHVlcyBhcmUgTmFOLiAoSW4gSmF2YVNjcmlwdCwgTmFOID09IE5hTiA9PiBmYWxzZS4gQnV0IHdlIGNvbnNpZGVyIHR3byBOYU4gYXMgZXF1YWwpXG4gKiAqIEJvdGggdmFsdWVzIHJlcHJlc2VudCB0aGUgc2FtZSByZWd1bGFyIGV4cHJlc3Npb24gKEluIEphdmFTY3JpcHQsXG4gKiAgIC9hYmMvID09IC9hYmMvID0+IGZhbHNlLiBCdXQgd2UgY29uc2lkZXIgdHdvIHJlZ3VsYXIgZXhwcmVzc2lvbnMgYXMgZXF1YWwgd2hlbiB0aGVpciB0ZXh0dWFsXG4gKiAgIHJlcHJlc2VudGF0aW9uIG1hdGNoZXMpLlxuICpcbiAqIER1cmluZyBhIHByb3BlcnR5IGNvbXBhcmlzb24sIHByb3BlcnRpZXMgb2YgYGZ1bmN0aW9uYCB0eXBlIGFuZCBwcm9wZXJ0aWVzIHdpdGggbmFtZXNcbiAqIHRoYXQgYmVnaW4gd2l0aCBgJGAgYXJlIGlnbm9yZWQuXG4gKlxuICogU2NvcGUgYW5kIERPTVdpbmRvdyBvYmplY3RzIGFyZSBiZWluZyBjb21wYXJlZCBvbmx5IGJ5IGlkZW50aWZ5IChgPT09YCkuXG4gKlxuICogQHBhcmFtIHsqfSBvMSBPYmplY3Qgb3IgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gbzIgT2JqZWN0IG9yIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBhcmd1bWVudHMgYXJlIGVxdWFsLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJlcXVhbHNFeGFtcGxlXCIgbmFtZT1cImVxdWFsc0V4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIDxmb3JtIG5vdmFsaWRhdGU+XG4gICAgICAgICAgPGgzPlVzZXIgMTwvaDM+XG4gICAgICAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyMS5uYW1lXCI+XG4gICAgICAgICAgQWdlOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwidXNlcjEuYWdlXCI+XG5cbiAgICAgICAgICA8aDM+VXNlciAyPC9oMz5cbiAgICAgICAgICBOYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIyLm5hbWVcIj5cbiAgICAgICAgICBBZ2U6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ1c2VyMi5hZ2VcIj5cblxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIkNvbXBhcmVcIiBuZy1jbGljaz1cImNvbXBhcmUoKVwiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFVzZXIgMTogPHByZT57e3VzZXIxIHwganNvbn19PC9wcmU+XG4gICAgICAgICAgVXNlciAyOiA8cHJlPnt7dXNlcjIgfCBqc29ufX08L3ByZT5cbiAgICAgICAgICBFcXVhbDogPHByZT57e3Jlc3VsdH19PC9wcmU+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdlcXVhbHNFeGFtcGxlJywgW10pLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUudXNlcjEgPSB7fTtcbiAgICAgICAgICAkc2NvcGUudXNlcjIgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuY29tcGFyZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnJlc3VsdCA9IGFuZ3VsYXIuZXF1YWxzKCRzY29wZS51c2VyMSwgJHNjb3BlLnVzZXIyKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uIGVxdWFscyhvMSwgbzIpIHtcbiAgaWYgKG8xID09PSBvMikgcmV0dXJuIHRydWU7XG4gIGlmIChvMSA9PT0gbnVsbCB8fCBvMiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gIGlmIChvMSAhPT0gbzEgJiYgbzIgIT09IG8yKSByZXR1cm4gdHJ1ZTsgLy8gTmFOID09PSBOYU5cbiAgdmFyIHQxID0gdHlwZW9mIG8xLCB0MiA9IHR5cGVvZiBvMiwgbGVuZ3RoLCBrZXksIGtleVNldDtcbiAgaWYgKHQxID09PSB0MiAmJiB0MSA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoaXNBcnJheShvMSkpIHtcbiAgICAgIGlmICghaXNBcnJheShvMikpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICgobGVuZ3RoID0gbzEubGVuZ3RoKSA9PT0gbzIubGVuZ3RoKSB7XG4gICAgICAgIGZvciAoa2V5ID0gMDsga2V5IDwgbGVuZ3RoOyBrZXkrKykge1xuICAgICAgICAgIGlmICghZXF1YWxzKG8xW2tleV0sIG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0RhdGUobzEpKSB7XG4gICAgICBpZiAoIWlzRGF0ZShvMikpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBzaW1wbGVDb21wYXJlKG8xLmdldFRpbWUoKSwgbzIuZ2V0VGltZSgpKTtcbiAgICB9IGVsc2UgaWYgKGlzUmVnRXhwKG8xKSkge1xuICAgICAgaWYgKCFpc1JlZ0V4cChvMikpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBvMS50b1N0cmluZygpID09PSBvMi50b1N0cmluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNTY29wZShvMSkgfHwgaXNTY29wZShvMikgfHwgaXNXaW5kb3cobzEpIHx8IGlzV2luZG93KG8yKSB8fFxuICAgICAgICBpc0FycmF5KG8yKSB8fCBpc0RhdGUobzIpIHx8IGlzUmVnRXhwKG8yKSkgcmV0dXJuIGZhbHNlO1xuICAgICAga2V5U2V0ID0gY3JlYXRlTWFwKCk7XG4gICAgICBmb3IgKGtleSBpbiBvMSkge1xuICAgICAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyQnIHx8IGlzRnVuY3Rpb24obzFba2V5XSkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIWVxdWFscyhvMVtrZXldLCBvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBrZXlTZXRba2V5XSA9IHRydWU7XG4gICAgICB9XG4gICAgICBmb3IgKGtleSBpbiBvMikge1xuICAgICAgICBpZiAoIShrZXkgaW4ga2V5U2V0KSAmJlxuICAgICAgICAgICAga2V5LmNoYXJBdCgwKSAhPT0gJyQnICYmXG4gICAgICAgICAgICBpc0RlZmluZWQobzJba2V5XSkgJiZcbiAgICAgICAgICAgICFpc0Z1bmN0aW9uKG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgY3NwID0gZnVuY3Rpb24oKSB7XG4gIGlmICghaXNEZWZpbmVkKGNzcC5ydWxlcykpIHtcblxuXG4gICAgdmFyIG5nQ3NwRWxlbWVudCA9ICh3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25nLWNzcF0nKSB8fFxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbmctY3NwXScpKTtcblxuICAgIGlmIChuZ0NzcEVsZW1lbnQpIHtcbiAgICAgIHZhciBuZ0NzcEF0dHJpYnV0ZSA9IG5nQ3NwRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25nLWNzcCcpIHx8XG4gICAgICAgICAgICAgICAgICAgIG5nQ3NwRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmctY3NwJyk7XG4gICAgICBjc3AucnVsZXMgPSB7XG4gICAgICAgIG5vVW5zYWZlRXZhbDogIW5nQ3NwQXR0cmlidXRlIHx8IChuZ0NzcEF0dHJpYnV0ZS5pbmRleE9mKCduby11bnNhZmUtZXZhbCcpICE9PSAtMSksXG4gICAgICAgIG5vSW5saW5lU3R5bGU6ICFuZ0NzcEF0dHJpYnV0ZSB8fCAobmdDc3BBdHRyaWJ1dGUuaW5kZXhPZignbm8taW5saW5lLXN0eWxlJykgIT09IC0xKVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3NwLnJ1bGVzID0ge1xuICAgICAgICBub1Vuc2FmZUV2YWw6IG5vVW5zYWZlRXZhbCgpLFxuICAgICAgICBub0lubGluZVN0eWxlOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY3NwLnJ1bGVzO1xuXG4gIGZ1bmN0aW9uIG5vVW5zYWZlRXZhbCgpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldywgbm8tbmV3LWZ1bmNcbiAgICAgIG5ldyBGdW5jdGlvbignJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBtb2R1bGUgbmdcbiAqIEBuYW1lIG5nSnFcbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdKcSB0aGUgbmFtZSBvZiB0aGUgbGlicmFyeSBhdmFpbGFibGUgdW5kZXIgYHdpbmRvd2BcbiAqIHRvIGJlIHVzZWQgZm9yIGFuZ3VsYXIuZWxlbWVudFxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgdGhpcyBkaXJlY3RpdmUgdG8gZm9yY2UgdGhlIGFuZ3VsYXIuZWxlbWVudCBsaWJyYXJ5LiAgVGhpcyBzaG91bGQgYmVcbiAqIHVzZWQgdG8gZm9yY2UgZWl0aGVyIGpxTGl0ZSBieSBsZWF2aW5nIG5nLWpxIGJsYW5rIG9yIHNldHRpbmcgdGhlIG5hbWUgb2ZcbiAqIHRoZSBqcXVlcnkgdmFyaWFibGUgdW5kZXIgd2luZG93IChlZy4galF1ZXJ5KS5cbiAqXG4gKiBTaW5jZSBBbmd1bGFySlMgbG9va3MgZm9yIHRoaXMgZGlyZWN0aXZlIHdoZW4gaXQgaXMgbG9hZGVkIChkb2Vzbid0IHdhaXQgZm9yIHRoZVxuICogRE9NQ29udGVudExvYWRlZCBldmVudCksIGl0IG11c3QgYmUgcGxhY2VkIG9uIGFuIGVsZW1lbnQgdGhhdCBjb21lcyBiZWZvcmUgdGhlIHNjcmlwdFxuICogd2hpY2ggbG9hZHMgYW5ndWxhci4gQWxzbywgb25seSB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgYG5nLWpxYCB3aWxsIGJlIHVzZWQgYW5kIGFsbFxuICogb3RoZXJzIGlnbm9yZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gZm9yY2UganFMaXRlIHVzaW5nIHRoZSBgbmdKcWAgZGlyZWN0aXZlIHRvIHRoZSBgaHRtbGAgdGFnLlxuIGBgYGh0bWxcbiA8IWRvY3R5cGUgaHRtbD5cbiA8aHRtbCBuZy1hcHAgbmctanE+XG4gLi4uXG4gLi4uXG4gPC9odG1sPlxuIGBgYFxuICogQGV4YW1wbGVcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gdXNlIGEgalF1ZXJ5IGJhc2VkIGxpYnJhcnkgb2YgYSBkaWZmZXJlbnQgbmFtZS5cbiAqIFRoZSBsaWJyYXJ5IG5hbWUgbXVzdCBiZSBhdmFpbGFibGUgYXQgdGhlIHRvcCBtb3N0ICd3aW5kb3cnLlxuIGBgYGh0bWxcbiA8IWRvY3R5cGUgaHRtbD5cbiA8aHRtbCBuZy1hcHAgbmctanE9XCJqUXVlcnlMaWJcIj5cbiAuLi5cbiAuLi5cbiA8L2h0bWw+XG4gYGBgXG4gKi9cbnZhciBqcSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoaXNEZWZpbmVkKGpxLm5hbWVfKSkgcmV0dXJuIGpxLm5hbWVfO1xuICB2YXIgZWw7XG4gIHZhciBpLCBpaSA9IG5nQXR0clByZWZpeGVzLmxlbmd0aCwgcHJlZml4LCBuYW1lO1xuICBmb3IgKGkgPSAwOyBpIDwgaWk7ICsraSkge1xuICAgIHByZWZpeCA9IG5nQXR0clByZWZpeGVzW2ldO1xuICAgIGVsID0gd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1snICsgcHJlZml4LnJlcGxhY2UoJzonLCAnXFxcXDonKSArICdqcV0nKTtcbiAgICBpZiAoZWwpIHtcbiAgICAgIG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUocHJlZml4ICsgJ2pxJyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKGpxLm5hbWVfID0gbmFtZSk7XG59O1xuXG5mdW5jdGlvbiBjb25jYXQoYXJyYXkxLCBhcnJheTIsIGluZGV4KSB7XG4gIHJldHVybiBhcnJheTEuY29uY2F0KHNsaWNlLmNhbGwoYXJyYXkyLCBpbmRleCkpO1xufVxuXG5mdW5jdGlvbiBzbGljZUFyZ3MoYXJncywgc3RhcnRJbmRleCkge1xuICByZXR1cm4gc2xpY2UuY2FsbChhcmdzLCBzdGFydEluZGV4IHx8IDApO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmJpbmRcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggY2FsbHMgZnVuY3Rpb24gYGZuYCBib3VuZCB0byBgc2VsZmAgKGBzZWxmYCBiZWNvbWVzIHRoZSBgdGhpc2AgZm9yXG4gKiBgZm5gKS4gWW91IGNhbiBzdXBwbHkgb3B0aW9uYWwgYGFyZ3NgIHRoYXQgYXJlIHByZWJvdW5kIHRvIHRoZSBmdW5jdGlvbi4gVGhpcyBmZWF0dXJlIGlzIGFsc29cbiAqIGtub3duIGFzIFtwYXJ0aWFsIGFwcGxpY2F0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BhcnRpYWxfYXBwbGljYXRpb24pLCBhc1xuICogZGlzdGluZ3Vpc2hlZCBmcm9tIFtmdW5jdGlvbiBjdXJyeWluZ10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DdXJyeWluZyNDb250cmFzdF93aXRoX3BhcnRpYWxfZnVuY3Rpb25fYXBwbGljYXRpb24pLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZWxmIENvbnRleHQgd2hpY2ggYGZuYCBzaG91bGQgYmUgZXZhbHVhdGVkIGluLlxuICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBGdW5jdGlvbiB0byBiZSBib3VuZC5cbiAqIEBwYXJhbSB7Li4uKn0gYXJncyBPcHRpb25hbCBhcmd1bWVudHMgdG8gYmUgcHJlYm91bmQgdG8gdGhlIGBmbmAgZnVuY3Rpb24gY2FsbC5cbiAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBGdW5jdGlvbiB0aGF0IHdyYXBzIHRoZSBgZm5gIHdpdGggYWxsIHRoZSBzcGVjaWZpZWQgYmluZGluZ3MuXG4gKi9cbmZ1bmN0aW9uIGJpbmQoc2VsZiwgZm4pIHtcbiAgdmFyIGN1cnJ5QXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gc2xpY2VBcmdzKGFyZ3VtZW50cywgMikgOiBbXTtcbiAgaWYgKGlzRnVuY3Rpb24oZm4pICYmICEoZm4gaW5zdGFuY2VvZiBSZWdFeHApKSB7XG4gICAgcmV0dXJuIGN1cnJ5QXJncy5sZW5ndGhcbiAgICAgID8gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgICAgID8gZm4uYXBwbHkoc2VsZiwgY29uY2F0KGN1cnJ5QXJncywgYXJndW1lbnRzLCAwKSlcbiAgICAgICAgICAgIDogZm4uYXBwbHkoc2VsZiwgY3VycnlBcmdzKTtcbiAgICAgICAgfVxuICAgICAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgICAgICAgPyBmbi5hcHBseShzZWxmLCBhcmd1bWVudHMpXG4gICAgICAgICAgICA6IGZuLmNhbGwoc2VsZik7XG4gICAgICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gSW4gSUUsIG5hdGl2ZSBtZXRob2RzIGFyZSBub3QgZnVuY3Rpb25zIHNvIHRoZXkgY2Fubm90IGJlIGJvdW5kIChub3RlOiB0aGV5IGRvbid0IG5lZWQgdG8gYmUpLlxuICAgIHJldHVybiBmbjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHRvSnNvblJlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgdmFyIHZhbCA9IHZhbHVlO1xuXG4gIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXkuY2hhckF0KDApID09PSAnJCcgJiYga2V5LmNoYXJBdCgxKSA9PT0gJyQnKSB7XG4gICAgdmFsID0gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKGlzV2luZG93KHZhbHVlKSkge1xuICAgIHZhbCA9ICckV0lORE9XJztcbiAgfSBlbHNlIGlmICh2YWx1ZSAmJiAgd2luZG93LmRvY3VtZW50ID09PSB2YWx1ZSkge1xuICAgIHZhbCA9ICckRE9DVU1FTlQnO1xuICB9IGVsc2UgaWYgKGlzU2NvcGUodmFsdWUpKSB7XG4gICAgdmFsID0gJyRTQ09QRSc7XG4gIH1cblxuICByZXR1cm4gdmFsO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLnRvSnNvblxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNlcmlhbGl6ZXMgaW5wdXQgaW50byBhIEpTT04tZm9ybWF0dGVkIHN0cmluZy4gUHJvcGVydGllcyB3aXRoIGxlYWRpbmcgJCQgY2hhcmFjdGVycyB3aWxsIGJlXG4gKiBzdHJpcHBlZCBzaW5jZSBBbmd1bGFySlMgdXNlcyB0aGlzIG5vdGF0aW9uIGludGVybmFsbHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl8RGF0ZXxzdHJpbmd8bnVtYmVyfGJvb2xlYW59IG9iaiBJbnB1dCB0byBiZSBzZXJpYWxpemVkIGludG8gSlNPTi5cbiAqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXJ9IFtwcmV0dHk9Ml0gSWYgc2V0IHRvIHRydWUsIHRoZSBKU09OIG91dHB1dCB3aWxsIGNvbnRhaW4gbmV3bGluZXMgYW5kIHdoaXRlc3BhY2UuXG4gKiAgICBJZiBzZXQgdG8gYW4gaW50ZWdlciwgdGhlIEpTT04gb3V0cHV0IHdpbGwgY29udGFpbiB0aGF0IG1hbnkgc3BhY2VzIHBlciBpbmRlbnRhdGlvbi5cbiAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBKU09OLWlmaWVkIHN0cmluZyByZXByZXNlbnRpbmcgYG9iamAuXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqIFRoZSBTYWZhcmkgYnJvd3NlciB0aHJvd3MgYSBgUmFuZ2VFcnJvcmAgaW5zdGVhZCBvZiByZXR1cm5pbmcgYG51bGxgIHdoZW4gaXQgdHJpZXMgdG8gc3RyaW5naWZ5IGEgYERhdGVgXG4gKiBvYmplY3Qgd2l0aCBhbiBpbnZhbGlkIGRhdGUgdmFsdWUuIFRoZSBvbmx5IHJlbGlhYmxlIHdheSB0byBwcmV2ZW50IHRoaXMgaXMgdG8gbW9ua2V5cGF0Y2ggdGhlXG4gKiBgRGF0ZS5wcm90b3R5cGUudG9KU09OYCBtZXRob2QgYXMgZm9sbG93czpcbiAqXG4gKiBgYGBcbiAqIHZhciBfRGF0ZXRvSlNPTiA9IERhdGUucHJvdG90eXBlLnRvSlNPTjtcbiAqIERhdGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICogICB0cnkge1xuICogICAgIHJldHVybiBfRGF0ZXRvSlNPTi5jYWxsKHRoaXMpO1xuICogICB9IGNhdGNoKGUpIHtcbiAqICAgICBpZiAoZSBpbnN0YW5jZW9mIFJhbmdlRXJyb3IpIHtcbiAqICAgICAgIHJldHVybiBudWxsO1xuICogICAgIH1cbiAqICAgICB0aHJvdyBlO1xuICogICB9XG4gKiB9O1xuICogYGBgXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvcHVsbC8xNDIyMSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuZnVuY3Rpb24gdG9Kc29uKG9iaiwgcHJldHR5KSB7XG4gIGlmIChpc1VuZGVmaW5lZChvYmopKSByZXR1cm4gdW5kZWZpbmVkO1xuICBpZiAoIWlzTnVtYmVyKHByZXR0eSkpIHtcbiAgICBwcmV0dHkgPSBwcmV0dHkgPyAyIDogbnVsbDtcbiAgfVxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCB0b0pzb25SZXBsYWNlciwgcHJldHR5KTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5mcm9tSnNvblxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERlc2VyaWFsaXplcyBhIEpTT04gc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIEpTT04gc3RyaW5nIHRvIGRlc2VyaWFsaXplLlxuICogQHJldHVybnMge09iamVjdHxBcnJheXxzdHJpbmd8bnVtYmVyfSBEZXNlcmlhbGl6ZWQgSlNPTiBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGZyb21Kc29uKGpzb24pIHtcbiAgcmV0dXJuIGlzU3RyaW5nKGpzb24pXG4gICAgICA/IEpTT04ucGFyc2UoanNvbilcbiAgICAgIDoganNvbjtcbn1cblxuXG52YXIgQUxMX0NPTE9OUyA9IC86L2c7XG5mdW5jdGlvbiB0aW1lem9uZVRvT2Zmc2V0KHRpbWV6b25lLCBmYWxsYmFjaykge1xuICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHksIEVkZ2UgMTMtMTUrXG4gIC8vIElFL0VkZ2UgZG8gbm90IFwidW5kZXJzdGFuZFwiIGNvbG9uIChgOmApIGluIHRpbWV6b25lXG4gIHRpbWV6b25lID0gdGltZXpvbmUucmVwbGFjZShBTExfQ09MT05TLCAnJyk7XG4gIHZhciByZXF1ZXN0ZWRUaW1lem9uZU9mZnNldCA9IERhdGUucGFyc2UoJ0phbiAwMSwgMTk3MCAwMDowMDowMCAnICsgdGltZXpvbmUpIC8gNjAwMDA7XG4gIHJldHVybiBpc051bWJlck5hTihyZXF1ZXN0ZWRUaW1lem9uZU9mZnNldCkgPyBmYWxsYmFjayA6IHJlcXVlc3RlZFRpbWV6b25lT2Zmc2V0O1xufVxuXG5cbmZ1bmN0aW9uIGFkZERhdGVNaW51dGVzKGRhdGUsIG1pbnV0ZXMpIHtcbiAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcbiAgZGF0ZS5zZXRNaW51dGVzKGRhdGUuZ2V0TWludXRlcygpICsgbWludXRlcyk7XG4gIHJldHVybiBkYXRlO1xufVxuXG5cbmZ1bmN0aW9uIGNvbnZlcnRUaW1lem9uZVRvTG9jYWwoZGF0ZSwgdGltZXpvbmUsIHJldmVyc2UpIHtcbiAgcmV2ZXJzZSA9IHJldmVyc2UgPyAtMSA6IDE7XG4gIHZhciBkYXRlVGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gIHZhciB0aW1lem9uZU9mZnNldCA9IHRpbWV6b25lVG9PZmZzZXQodGltZXpvbmUsIGRhdGVUaW1lem9uZU9mZnNldCk7XG4gIHJldHVybiBhZGREYXRlTWludXRlcyhkYXRlLCByZXZlcnNlICogKHRpbWV6b25lT2Zmc2V0IC0gZGF0ZVRpbWV6b25lT2Zmc2V0KSk7XG59XG5cblxuLyoqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0aW5nVGFnKGVsZW1lbnQpIHtcbiAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KS5jbG9uZSgpLmVtcHR5KCk7XG4gIHZhciBlbGVtSHRtbCA9IGpxTGl0ZSgnPGRpdj4nKS5hcHBlbmQoZWxlbWVudCkuaHRtbCgpO1xuICB0cnkge1xuICAgIHJldHVybiBlbGVtZW50WzBdLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfVEVYVCA/IGxvd2VyY2FzZShlbGVtSHRtbCkgOlxuICAgICAgICBlbGVtSHRtbC5cbiAgICAgICAgICBtYXRjaCgvXig8W14+XSs+KS8pWzFdLlxuICAgICAgICAgIHJlcGxhY2UoL148KFtcXHctXSspLywgZnVuY3Rpb24obWF0Y2gsIG5vZGVOYW1lKSB7cmV0dXJuICc8JyArIGxvd2VyY2FzZShub2RlTmFtZSk7fSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbG93ZXJjYXNlKGVsZW1IdG1sKTtcbiAgfVxuXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIFRyaWVzIHRvIGRlY29kZSB0aGUgVVJJIGNvbXBvbmVudCB3aXRob3V0IHRocm93aW5nIGFuIGV4Y2VwdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHN0ciB2YWx1ZSBwb3RlbnRpYWwgVVJJIGNvbXBvbmVudCB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgY2FuIGJlIGRlY29kZWRcbiAqIHdpdGggdGhlIGRlY29kZVVSSUNvbXBvbmVudCBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZ25vcmUgYW55IGludmFsaWQgdXJpIGNvbXBvbmVudC5cbiAgfVxufVxuXG5cbi8qKlxuICogUGFyc2VzIGFuIGVzY2FwZWQgdXJsIHF1ZXJ5IHN0cmluZyBpbnRvIGtleS12YWx1ZSBwYWlycy5cbiAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZyxib29sZWFufEFycmF5Pn1cbiAqL1xuZnVuY3Rpb24gcGFyc2VLZXlWYWx1ZSgvKipzdHJpbmcqL2tleVZhbHVlKSB7XG4gIHZhciBvYmogPSB7fTtcbiAgZm9yRWFjaCgoa2V5VmFsdWUgfHwgJycpLnNwbGl0KCcmJyksIGZ1bmN0aW9uKGtleVZhbHVlKSB7XG4gICAgdmFyIHNwbGl0UG9pbnQsIGtleSwgdmFsO1xuICAgIGlmIChrZXlWYWx1ZSkge1xuICAgICAga2V5ID0ga2V5VmFsdWUgPSBrZXlWYWx1ZS5yZXBsYWNlKC9cXCsvZywnJTIwJyk7XG4gICAgICBzcGxpdFBvaW50ID0ga2V5VmFsdWUuaW5kZXhPZignPScpO1xuICAgICAgaWYgKHNwbGl0UG9pbnQgIT09IC0xKSB7XG4gICAgICAgIGtleSA9IGtleVZhbHVlLnN1YnN0cmluZygwLCBzcGxpdFBvaW50KTtcbiAgICAgICAgdmFsID0ga2V5VmFsdWUuc3Vic3RyaW5nKHNwbGl0UG9pbnQgKyAxKTtcbiAgICAgIH1cbiAgICAgIGtleSA9IHRyeURlY29kZVVSSUNvbXBvbmVudChrZXkpO1xuICAgICAgaWYgKGlzRGVmaW5lZChrZXkpKSB7XG4gICAgICAgIHZhbCA9IGlzRGVmaW5lZCh2YWwpID8gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KHZhbCkgOiB0cnVlO1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmpba2V5XSkpIHtcbiAgICAgICAgICBvYmpba2V5XS5wdXNoKHZhbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2JqW2tleV0gPSBbb2JqW2tleV0sdmFsXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHRvS2V5VmFsdWUob2JqKSB7XG4gIHZhciBwYXJ0cyA9IFtdO1xuICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24oYXJyYXlWYWx1ZSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSkgK1xuICAgICAgICAgICAgICAgICAgIChhcnJheVZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeShhcnJheVZhbHVlLCB0cnVlKSkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSkgK1xuICAgICAgICAgICAgICAgKHZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgdHJ1ZSkpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcGFydHMubGVuZ3RoID8gcGFydHMuam9pbignJicpIDogJyc7XG59XG5cblxuLyoqXG4gKiBXZSBuZWVkIG91ciBjdXN0b20gbWV0aG9kIGJlY2F1c2UgZW5jb2RlVVJJQ29tcG9uZW50IGlzIHRvbyBhZ2dyZXNzaXZlIGFuZCBkb2Vzbid0IGZvbGxvd1xuICogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMzk4Ni50eHQgd2l0aCByZWdhcmRzIHRvIHRoZSBjaGFyYWN0ZXIgc2V0IChwY2hhcikgYWxsb3dlZCBpbiBwYXRoXG4gKiBzZWdtZW50czpcbiAqICAgIHNlZ21lbnQgICAgICAgPSAqcGNoYXJcbiAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxuICogICAgcGN0LWVuY29kZWQgICA9IFwiJVwiIEhFWERJRyBIRVhESUdcbiAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcbiAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcbiAqICAgICAgICAgICAgICAgICAgICAgLyBcIipcIiAvIFwiK1wiIC8gXCIsXCIgLyBcIjtcIiAvIFwiPVwiXG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVyaVNlZ21lbnQodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVcmlRdWVyeSh2YWwsIHRydWUpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyNi9naSwgJyYnKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lM0QvZ2ksICc9JykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTJCL2dpLCAnKycpO1xufVxuXG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgZm9yIGVuY29kaW5nICprZXkqIG9yICp2YWx1ZSogcGFydHMgb2YgcXVlcnkgY29tcG9uZW50LiBXZSBuZWVkIGEgY3VzdG9tXG4gKiBtZXRob2QgYmVjYXVzZSBlbmNvZGVVUklDb21wb25lbnQgaXMgdG9vIGFnZ3Jlc3NpdmUgYW5kIGVuY29kZXMgc3R1ZmYgdGhhdCBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIGVuY29kZWQgcGVyIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODY6XG4gKiAgICBxdWVyeSAgICAgICAgID0gKiggcGNoYXIgLyBcIi9cIiAvIFwiP1wiIClcbiAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxuICogICAgdW5yZXNlcnZlZCAgICA9IEFMUEhBIC8gRElHSVQgLyBcIi1cIiAvIFwiLlwiIC8gXCJfXCIgLyBcIn5cIlxuICogICAgcGN0LWVuY29kZWQgICA9IFwiJVwiIEhFWERJRyBIRVhESUdcbiAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcbiAqICAgICAgICAgICAgICAgICAgICAgLyBcIipcIiAvIFwiK1wiIC8gXCIsXCIgLyBcIjtcIiAvIFwiPVwiXG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVyaVF1ZXJ5KHZhbCwgcGN0RW5jb2RlU3BhY2VzKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lM0IvZ2ksICc7JykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTIwL2csIChwY3RFbmNvZGVTcGFjZXMgPyAnJTIwJyA6ICcrJykpO1xufVxuXG52YXIgbmdBdHRyUHJlZml4ZXMgPSBbJ25nLScsICdkYXRhLW5nLScsICduZzonLCAneC1uZy0nXTtcblxuZnVuY3Rpb24gZ2V0TmdBdHRyaWJ1dGUoZWxlbWVudCwgbmdBdHRyKSB7XG4gIHZhciBhdHRyLCBpLCBpaSA9IG5nQXR0clByZWZpeGVzLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGlpOyArK2kpIHtcbiAgICBhdHRyID0gbmdBdHRyUHJlZml4ZXNbaV0gKyBuZ0F0dHI7XG4gICAgaWYgKGlzU3RyaW5nKGF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyKSkpIHtcbiAgICAgIHJldHVybiBhdHRyO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gYWxsb3dBdXRvQm9vdHN0cmFwKGRvY3VtZW50KSB7XG4gIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0O1xuXG4gIGlmICghc2NyaXB0KSB7XG4gICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgLy8gSUUgZG9lcyBub3QgaGF2ZSBgZG9jdW1lbnQuY3VycmVudFNjcmlwdGBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIElmIHRoZSBgY3VycmVudFNjcmlwdGAgcHJvcGVydHkgaGFzIGJlZW4gY2xvYmJlcmVkIGp1c3QgcmV0dXJuIGZhbHNlLCBzaW5jZSB0aGlzIGluZGljYXRlcyBhIHByb2JhYmxlIGF0dGFja1xuICBpZiAoIShzY3JpcHQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTFNjcmlwdEVsZW1lbnQgfHwgc2NyaXB0IGluc3RhbmNlb2Ygd2luZG93LlNWR1NjcmlwdEVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGF0dHJpYnV0ZXMgPSBzY3JpcHQuYXR0cmlidXRlcztcbiAgdmFyIHNyY3MgPSBbYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ3NyYycpLCBhdHRyaWJ1dGVzLmdldE5hbWVkSXRlbSgnaHJlZicpLCBhdHRyaWJ1dGVzLmdldE5hbWVkSXRlbSgneGxpbms6aHJlZicpXTtcblxuICByZXR1cm4gc3Jjcy5ldmVyeShmdW5jdGlvbihzcmMpIHtcbiAgICBpZiAoIXNyYykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghc3JjLnZhbHVlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgbGluay5ocmVmID0gc3JjLnZhbHVlO1xuXG4gICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbiA9PT0gbGluay5vcmlnaW4pIHtcbiAgICAgIC8vIFNhbWUtb3JpZ2luIHJlc291cmNlcyBhcmUgYWx3YXlzIGFsbG93ZWQsIGV2ZW4gZm9yIG5vbi13aGl0ZWxpc3RlZCBzY2hlbWVzLlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIERpc2FibGVkIGJvb3RzdHJhcHBpbmcgdW5sZXNzIGFuZ3VsYXIuanMgd2FzIGxvYWRlZCBmcm9tIGEga25vd24gc2NoZW1lIHVzZWQgb24gdGhlIHdlYi5cbiAgICAvLyBUaGlzIGlzIHRvIHByZXZlbnQgYW5ndWxhci5qcyBidW5kbGVkIHdpdGggYnJvd3NlciBleHRlbnNpb25zIGZyb20gYmVpbmcgdXNlZCB0byBieXBhc3MgdGhlXG4gICAgLy8gY29udGVudCBzZWN1cml0eSBwb2xpY3kgaW4gd2ViIHBhZ2VzIGFuZCBvdGhlciBicm93c2VyIGV4dGVuc2lvbnMuXG4gICAgc3dpdGNoIChsaW5rLnByb3RvY29sKSB7XG4gICAgICBjYXNlICdodHRwOic6XG4gICAgICBjYXNlICdodHRwczonOlxuICAgICAgY2FzZSAnZnRwOic6XG4gICAgICBjYXNlICdibG9iOic6XG4gICAgICBjYXNlICdmaWxlOic6XG4gICAgICBjYXNlICdkYXRhOic6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIENhY2hlZCBhcyBpdCBoYXMgdG8gcnVuIGR1cmluZyBsb2FkaW5nIHNvIHRoYXQgZG9jdW1lbnQuY3VycmVudFNjcmlwdCBpcyBhdmFpbGFibGUuXG52YXIgaXNBdXRvQm9vdHN0cmFwQWxsb3dlZCA9IGFsbG93QXV0b0Jvb3RzdHJhcCh3aW5kb3cuZG9jdW1lbnQpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQXBwXG4gKiBAbW9kdWxlIG5nXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2FuZ3VsYXIuTW9kdWxlfSBuZ0FwcCBhbiBvcHRpb25hbCBhcHBsaWNhdGlvblxuICogICB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlfSBuYW1lIHRvIGxvYWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBuZ1N0cmljdERpIGlmIHRoaXMgYXR0cmlidXRlIGlzIHByZXNlbnQgb24gdGhlIGFwcCBlbGVtZW50LCB0aGUgaW5qZWN0b3Igd2lsbCBiZVxuICogICBjcmVhdGVkIGluIFwic3RyaWN0LWRpXCIgbW9kZS4gVGhpcyBtZWFucyB0aGF0IHRoZSBhcHBsaWNhdGlvbiB3aWxsIGZhaWwgdG8gaW52b2tlIGZ1bmN0aW9ucyB3aGljaFxuICogICBkbyBub3QgdXNlIGV4cGxpY2l0IGZ1bmN0aW9uIGFubm90YXRpb24gKGFuZCBhcmUgdGh1cyB1bnN1aXRhYmxlIGZvciBtaW5pZmljYXRpb24pLCBhcyBkZXNjcmliZWRcbiAqICAgaW4ge0BsaW5rIGd1aWRlL2RpIHRoZSBEZXBlbmRlbmN5IEluamVjdGlvbiBndWlkZX0sIGFuZCB1c2VmdWwgZGVidWdnaW5nIGluZm8gd2lsbCBhc3Npc3QgaW5cbiAqICAgdHJhY2tpbmcgZG93biB0aGUgcm9vdCBvZiB0aGVzZSBidWdzLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFVzZSB0aGlzIGRpcmVjdGl2ZSB0byAqKmF1dG8tYm9vdHN0cmFwKiogYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uLiBUaGUgYG5nQXBwYCBkaXJlY3RpdmVcbiAqIGRlc2lnbmF0ZXMgdGhlICoqcm9vdCBlbGVtZW50Kiogb2YgdGhlIGFwcGxpY2F0aW9uIGFuZCBpcyB0eXBpY2FsbHkgcGxhY2VkIG5lYXIgdGhlIHJvb3QgZWxlbWVudFxuICogb2YgdGhlIHBhZ2UgLSBlLmcuIG9uIHRoZSBgPGJvZHk+YCBvciBgPGh0bWw+YCB0YWdzLlxuICpcbiAqIFRoZXJlIGFyZSBhIGZldyB0aGluZ3MgdG8ga2VlcCBpbiBtaW5kIHdoZW4gdXNpbmcgYG5nQXBwYDpcbiAqIC0gb25seSBvbmUgQW5ndWxhckpTIGFwcGxpY2F0aW9uIGNhbiBiZSBhdXRvLWJvb3RzdHJhcHBlZCBwZXIgSFRNTCBkb2N1bWVudC4gVGhlIGZpcnN0IGBuZ0FwcGBcbiAqICAgZm91bmQgaW4gdGhlIGRvY3VtZW50IHdpbGwgYmUgdXNlZCB0byBkZWZpbmUgdGhlIHJvb3QgZWxlbWVudCB0byBhdXRvLWJvb3RzdHJhcCBhcyBhblxuICogICBhcHBsaWNhdGlvbi4gVG8gcnVuIG11bHRpcGxlIGFwcGxpY2F0aW9ucyBpbiBhbiBIVE1MIGRvY3VtZW50IHlvdSBtdXN0IG1hbnVhbGx5IGJvb3RzdHJhcCB0aGVtIHVzaW5nXG4gKiAgIHtAbGluayBhbmd1bGFyLmJvb3RzdHJhcH0gaW5zdGVhZC5cbiAqIC0gQW5ndWxhckpTIGFwcGxpY2F0aW9ucyBjYW5ub3QgYmUgbmVzdGVkIHdpdGhpbiBlYWNoIG90aGVyLlxuICogLSBEbyBub3QgdXNlIGEgZGlyZWN0aXZlIHRoYXQgdXNlcyB7QGxpbmsgbmcuJGNvbXBpbGUjdHJhbnNjbHVzaW9uIHRyYW5zY2x1c2lvbn0gb24gdGhlIHNhbWUgZWxlbWVudCBhcyBgbmdBcHBgLlxuICogICBUaGlzIGluY2x1ZGVzIGRpcmVjdGl2ZXMgc3VjaCBhcyB7QGxpbmsgbmcubmdJZiBgbmdJZmB9LCB7QGxpbmsgbmcubmdJbmNsdWRlIGBuZ0luY2x1ZGVgfSBhbmRcbiAqICAge0BsaW5rIG5nUm91dGUubmdWaWV3IGBuZ1ZpZXdgfS5cbiAqICAgRG9pbmcgdGhpcyBtaXNwbGFjZXMgdGhlIGFwcCB7QGxpbmsgbmcuJHJvb3RFbGVtZW50IGAkcm9vdEVsZW1lbnRgfSBhbmQgdGhlIGFwcCdzIHtAbGluayBhdXRvLiRpbmplY3RvciBpbmplY3Rvcn0sXG4gKiAgIGNhdXNpbmcgYW5pbWF0aW9ucyB0byBzdG9wIHdvcmtpbmcgYW5kIG1ha2luZyB0aGUgaW5qZWN0b3IgaW5hY2Nlc3NpYmxlIGZyb20gb3V0c2lkZSB0aGUgYXBwLlxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSBhbiAqKkFuZ3VsYXJKUyBtb2R1bGUqKiB0byBiZSB1c2VkIGFzIHRoZSByb290IG1vZHVsZSBmb3IgdGhlIGFwcGxpY2F0aW9uLiAgVGhpc1xuICogbW9kdWxlIHdpbGwgYmUgbG9hZGVkIGludG8gdGhlIHtAbGluayBhdXRvLiRpbmplY3Rvcn0gd2hlbiB0aGUgYXBwbGljYXRpb24gaXMgYm9vdHN0cmFwcGVkLiBJdFxuICogc2hvdWxkIGNvbnRhaW4gdGhlIGFwcGxpY2F0aW9uIGNvZGUgbmVlZGVkIG9yIGhhdmUgZGVwZW5kZW5jaWVzIG9uIG90aGVyIG1vZHVsZXMgdGhhdCB3aWxsXG4gKiBjb250YWluIHRoZSBjb2RlLiBTZWUge0BsaW5rIGFuZ3VsYXIubW9kdWxlfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBJbiB0aGUgZXhhbXBsZSBiZWxvdyBpZiB0aGUgYG5nQXBwYCBkaXJlY3RpdmUgd2VyZSBub3QgcGxhY2VkIG9uIHRoZSBgaHRtbGAgZWxlbWVudCB0aGVuIHRoZVxuICogZG9jdW1lbnQgd291bGQgbm90IGJlIGNvbXBpbGVkLCB0aGUgYEFwcENvbnRyb2xsZXJgIHdvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgYW5kIHRoZSBge3sgYStiIH19YFxuICogd291bGQgbm90IGJlIHJlc29sdmVkIHRvIGAzYC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyBTaW1wbGUgVXNhZ2VcbiAqXG4gKiBgbmdBcHBgIGlzIHRoZSBlYXNpZXN0LCBhbmQgbW9zdCBjb21tb24gd2F5IHRvIGJvb3RzdHJhcCBhbiBhcHBsaWNhdGlvbi5cbiAqXG4gPGV4YW1wbGUgbW9kdWxlPVwibmdBcHBEZW1vXCIgbmFtZT1cIm5nLWFwcFwiPlxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgIDxkaXYgbmctY29udHJvbGxlcj1cIm5nQXBwRGVtb0NvbnRyb2xsZXJcIj5cbiAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxuICAgPC9kaXY+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICBhbmd1bGFyLm1vZHVsZSgnbmdBcHBEZW1vJywgW10pLmNvbnRyb2xsZXIoJ25nQXBwRGVtb0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgJHNjb3BlLmEgPSAxO1xuICAgICAkc2NvcGUuYiA9IDI7XG4gICB9KTtcbiAgIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIyMgV2l0aCBgbmdTdHJpY3REaWBcbiAqXG4gKiBVc2luZyBgbmdTdHJpY3REaWAsIHlvdSB3b3VsZCBzZWUgc29tZXRoaW5nIGxpa2UgdGhpczpcbiAqXG4gPGV4YW1wbGUgbmctYXBwLWluY2x1ZGVkPVwidHJ1ZVwiIG5hbWU9XCJzdHJpY3QtZGlcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICA8ZGl2IG5nLWFwcD1cIm5nQXBwU3RyaWN0RGVtb1wiIG5nLXN0cmljdC1kaT5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHb29kQ29udHJvbGxlcjFcIj5cbiAgICAgICAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxuXG4gICAgICAgICAgIDxwPlRoaXMgcmVuZGVycyBiZWNhdXNlIHRoZSBjb250cm9sbGVyIGRvZXMgbm90IGZhaWwgdG9cbiAgICAgICAgICAgICAgaW5zdGFudGlhdGUsIGJ5IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gc3R5bGUgKHNlZVxuICAgICAgICAgICAgICBzY3JpcHQuanMgZm9yIGRldGFpbHMpXG4gICAgICAgICAgIDwvcD5cbiAgICAgICA8L2Rpdj5cblxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkdvb2RDb250cm9sbGVyMlwiPlxuICAgICAgICAgICBOYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJuYW1lXCI+PGJyIC8+XG4gICAgICAgICAgIEhlbGxvLCB7e25hbWV9fSFcblxuICAgICAgICAgICA8cD5UaGlzIHJlbmRlcnMgYmVjYXVzZSB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBmYWlsIHRvXG4gICAgICAgICAgICAgIGluc3RhbnRpYXRlLCBieSB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9uIHN0eWxlXG4gICAgICAgICAgICAgIChzZWUgc2NyaXB0LmpzIGZvciBkZXRhaWxzKVxuICAgICAgICAgICA8L3A+XG4gICAgICAgPC9kaXY+XG5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJCYWRDb250cm9sbGVyXCI+XG4gICAgICAgICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cblxuICAgICAgICAgICA8cD5UaGUgY29udHJvbGxlciBjb3VsZCBub3QgYmUgaW5zdGFudGlhdGVkLCBkdWUgdG8gcmVseWluZ1xuICAgICAgICAgICAgICBvbiBhdXRvbWF0aWMgZnVuY3Rpb24gYW5ub3RhdGlvbnMgKHdoaWNoIGFyZSBkaXNhYmxlZCBpblxuICAgICAgICAgICAgICBzdHJpY3QgbW9kZSkuIEFzIHN1Y2gsIHRoZSBjb250ZW50IG9mIHRoaXMgc2VjdGlvbiBpcyBub3RcbiAgICAgICAgICAgICAgaW50ZXJwb2xhdGVkLCBhbmQgdGhlcmUgc2hvdWxkIGJlIGFuIGVycm9yIGluIHlvdXIgd2ViIGNvbnNvbGUuXG4gICAgICAgICAgIDwvcD5cbiAgICAgICA8L2Rpdj5cbiAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgYW5ndWxhci5tb2R1bGUoJ25nQXBwU3RyaWN0RGVtbycsIFtdKVxuICAgICAvLyBCYWRDb250cm9sbGVyIHdpbGwgZmFpbCB0byBpbnN0YW50aWF0ZSwgZHVlIHRvIHJlbHlpbmcgb24gYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb24sXG4gICAgIC8vIHJhdGhlciB0aGFuIGFuIGV4cGxpY2l0IGFubm90YXRpb25cbiAgICAgLmNvbnRyb2xsZXIoJ0JhZENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAkc2NvcGUuYSA9IDE7XG4gICAgICAgJHNjb3BlLmIgPSAyO1xuICAgICB9KVxuICAgICAvLyBVbmxpa2UgQmFkQ29udHJvbGxlciwgR29vZENvbnRyb2xsZXIxIGFuZCBHb29kQ29udHJvbGxlcjIgd2lsbCBub3QgZmFpbCB0byBiZSBpbnN0YW50aWF0ZWQsXG4gICAgIC8vIGR1ZSB0byB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9ucyB1c2luZyB0aGUgYXJyYXkgc3R5bGUgYW5kICRpbmplY3QgcHJvcGVydHksIHJlc3BlY3RpdmVseS5cbiAgICAgLmNvbnRyb2xsZXIoJ0dvb2RDb250cm9sbGVyMScsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgJHNjb3BlLmEgPSAxO1xuICAgICAgICRzY29wZS5iID0gMjtcbiAgICAgfV0pXG4gICAgIC5jb250cm9sbGVyKCdHb29kQ29udHJvbGxlcjInLCBHb29kQ29udHJvbGxlcjIpO1xuICAgICBmdW5jdGlvbiBHb29kQ29udHJvbGxlcjIoJHNjb3BlKSB7XG4gICAgICAgJHNjb3BlLm5hbWUgPSAnV29ybGQnO1xuICAgICB9XG4gICAgIEdvb2RDb250cm9sbGVyMi4kaW5qZWN0ID0gWyckc2NvcGUnXTtcbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgIGRpdltuZy1jb250cm9sbGVyXSB7XG4gICAgICAgbWFyZ2luLWJvdHRvbTogMWVtO1xuICAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICBib3JkZXI6IDFweCBzb2xpZDtcbiAgICAgICBwYWRkaW5nOiAuNWVtO1xuICAgfVxuICAgZGl2W25nLWNvbnRyb2xsZXJePUdvb2RdIHtcbiAgICAgICBib3JkZXItY29sb3I6ICNkNmU5YzY7XG4gICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2RmZjBkODtcbiAgICAgICBjb2xvcjogIzNjNzYzZDtcbiAgIH1cbiAgIGRpdltuZy1jb250cm9sbGVyXj1CYWRdIHtcbiAgICAgICBib3JkZXItY29sb3I6ICNlYmNjZDE7XG4gICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YyZGVkZTtcbiAgICAgICBjb2xvcjogI2E5NDQ0MjtcbiAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgfVxuICAgPC9maWxlPlxuIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gYW5ndWxhckluaXQoZWxlbWVudCwgYm9vdHN0cmFwKSB7XG4gIHZhciBhcHBFbGVtZW50LFxuICAgICAgbW9kdWxlLFxuICAgICAgY29uZmlnID0ge307XG5cbiAgLy8gVGhlIGVsZW1lbnQgYGVsZW1lbnRgIGhhcyBwcmlvcml0eSBvdmVyIGFueSBvdGhlciBlbGVtZW50LlxuICBmb3JFYWNoKG5nQXR0clByZWZpeGVzLCBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgbmFtZSA9IHByZWZpeCArICdhcHAnO1xuXG4gICAgaWYgKCFhcHBFbGVtZW50ICYmIGVsZW1lbnQuaGFzQXR0cmlidXRlICYmIGVsZW1lbnQuaGFzQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBhcHBFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIG1vZHVsZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgfSk7XG4gIGZvckVhY2gobmdBdHRyUHJlZml4ZXMsIGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIHZhciBuYW1lID0gcHJlZml4ICsgJ2FwcCc7XG4gICAgdmFyIGNhbmRpZGF0ZTtcblxuICAgIGlmICghYXBwRWxlbWVudCAmJiAoY2FuZGlkYXRlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbJyArIG5hbWUucmVwbGFjZSgnOicsICdcXFxcOicpICsgJ10nKSkpIHtcbiAgICAgIGFwcEVsZW1lbnQgPSBjYW5kaWRhdGU7XG4gICAgICBtb2R1bGUgPSBjYW5kaWRhdGUuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgfSk7XG4gIGlmIChhcHBFbGVtZW50KSB7XG4gICAgaWYgKCFpc0F1dG9Cb290c3RyYXBBbGxvd2VkKSB7XG4gICAgICB3aW5kb3cuY29uc29sZS5lcnJvcignQW5ndWxhckpTOiBkaXNhYmxpbmcgYXV0b21hdGljIGJvb3RzdHJhcC4gPHNjcmlwdD4gcHJvdG9jb2wgaW5kaWNhdGVzICcgK1xuICAgICAgICAgICdhbiBleHRlbnNpb24sIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgZG9lcyBub3QgbWF0Y2guJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbmZpZy5zdHJpY3REaSA9IGdldE5nQXR0cmlidXRlKGFwcEVsZW1lbnQsICdzdHJpY3QtZGknKSAhPT0gbnVsbDtcbiAgICBib290c3RyYXAoYXBwRWxlbWVudCwgbW9kdWxlID8gW21vZHVsZV0gOiBbXSwgY29uZmlnKTtcbiAgfVxufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5ib290c3RyYXBcbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoaXMgZnVuY3Rpb24gdG8gbWFudWFsbHkgc3RhcnQgdXAgQW5ndWxhckpTIGFwcGxpY2F0aW9uLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIHtAbGluayBndWlkZS9ib290c3RyYXAgQm9vdHN0cmFwIGd1aWRlfS5cbiAqXG4gKiBBbmd1bGFySlMgd2lsbCBkZXRlY3QgaWYgaXQgaGFzIGJlZW4gbG9hZGVkIGludG8gdGhlIGJyb3dzZXIgbW9yZSB0aGFuIG9uY2UgYW5kIG9ubHkgYWxsb3cgdGhlXG4gKiBmaXJzdCBsb2FkZWQgc2NyaXB0IHRvIGJlIGJvb3RzdHJhcHBlZCBhbmQgd2lsbCByZXBvcnQgYSB3YXJuaW5nIHRvIHRoZSBicm93c2VyIGNvbnNvbGUgZm9yXG4gKiBlYWNoIG9mIHRoZSBzdWJzZXF1ZW50IHNjcmlwdHMuIFRoaXMgcHJldmVudHMgc3RyYW5nZSByZXN1bHRzIGluIGFwcGxpY2F0aW9ucywgd2hlcmUgb3RoZXJ3aXNlXG4gKiBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgQW5ndWxhckpTIHRyeSB0byB3b3JrIG9uIHRoZSBET00uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBQcm90cmFjdG9yIGJhc2VkIGVuZC10by1lbmQgdGVzdHMgY2Fubm90IHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGJvb3RzdHJhcCBtYW51YWxseS5cbiAqIFRoZXkgbXVzdCB1c2Uge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0FwcCBuZ0FwcH0uXG4gKiA8L2Rpdj5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipOb3RlOioqIERvIG5vdCBib290c3RyYXAgdGhlIGFwcCBvbiBhbiBlbGVtZW50IHdpdGggYSBkaXJlY3RpdmUgdGhhdCB1c2VzIHtAbGluayBuZy4kY29tcGlsZSN0cmFuc2NsdXNpb24gdHJhbnNjbHVzaW9ufSxcbiAqIHN1Y2ggYXMge0BsaW5rIG5nLm5nSWYgYG5nSWZgfSwge0BsaW5rIG5nLm5nSW5jbHVkZSBgbmdJbmNsdWRlYH0gYW5kIHtAbGluayBuZ1JvdXRlLm5nVmlldyBgbmdWaWV3YH0uXG4gKiBEb2luZyB0aGlzIG1pc3BsYWNlcyB0aGUgYXBwIHtAbGluayBuZy4kcm9vdEVsZW1lbnQgYCRyb290RWxlbWVudGB9IGFuZCB0aGUgYXBwJ3Mge0BsaW5rIGF1dG8uJGluamVjdG9yIGluamVjdG9yfSxcbiAqIGNhdXNpbmcgYW5pbWF0aW9ucyB0byBzdG9wIHdvcmtpbmcgYW5kIG1ha2luZyB0aGUgaW5qZWN0b3IgaW5hY2Nlc3NpYmxlIGZyb20gb3V0c2lkZSB0aGUgYXBwLlxuICogPC9kaXY+XG4gKlxuICogYGBgaHRtbFxuICogPCFkb2N0eXBlIGh0bWw+XG4gKiA8aHRtbD5cbiAqIDxib2R5PlxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiV2VsY29tZUNvbnRyb2xsZXJcIj5cbiAqICAge3tncmVldGluZ319XG4gKiA8L2Rpdj5cbiAqXG4gKiA8c2NyaXB0IHNyYz1cImFuZ3VsYXIuanNcIj48L3NjcmlwdD5cbiAqIDxzY3JpcHQ+XG4gKiAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZGVtbycsIFtdKVxuICogICAuY29udHJvbGxlcignV2VsY29tZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICRzY29wZS5ncmVldGluZyA9ICdXZWxjb21lISc7XG4gKiAgIH0pO1xuICogICBhbmd1bGFyLmJvb3RzdHJhcChkb2N1bWVudCwgWydkZW1vJ10pO1xuICogPC9zY3JpcHQ+XG4gKiA8L2JvZHk+XG4gKiA8L2h0bWw+XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgRE9NIGVsZW1lbnQgd2hpY2ggaXMgdGhlIHJvb3Qgb2YgQW5ndWxhckpTIGFwcGxpY2F0aW9uLlxuICogQHBhcmFtIHtBcnJheTxTdHJpbmd8RnVuY3Rpb258QXJyYXk+PX0gbW9kdWxlcyBhbiBhcnJheSBvZiBtb2R1bGVzIHRvIGxvYWQgaW50byB0aGUgYXBwbGljYXRpb24uXG4gKiAgICAgRWFjaCBpdGVtIGluIHRoZSBhcnJheSBzaG91bGQgYmUgdGhlIG5hbWUgb2YgYSBwcmVkZWZpbmVkIG1vZHVsZSBvciBhIChESSBhbm5vdGF0ZWQpXG4gKiAgICAgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgYnkgdGhlIGluamVjdG9yIGFzIGEgYGNvbmZpZ2AgYmxvY2suXG4gKiAgICAgU2VlOiB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlc31cbiAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIGFuIG9iamVjdCBmb3IgZGVmaW5pbmcgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgYXBwbGljYXRpb24uIFRoZVxuICogICAgIGZvbGxvd2luZyBrZXlzIGFyZSBzdXBwb3J0ZWQ6XG4gKlxuICogKiBgc3RyaWN0RGlgIC0gZGlzYWJsZSBhdXRvbWF0aWMgZnVuY3Rpb24gYW5ub3RhdGlvbiBmb3IgdGhlIGFwcGxpY2F0aW9uLiBUaGlzIGlzIG1lYW50IHRvXG4gKiAgIGFzc2lzdCBpbiBmaW5kaW5nIGJ1Z3Mgd2hpY2ggYnJlYWsgbWluaWZpZWQgY29kZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqXG4gKiBAcmV0dXJucyB7YXV0by4kaW5qZWN0b3J9IFJldHVybnMgdGhlIG5ld2x5IGNyZWF0ZWQgaW5qZWN0b3IgZm9yIHRoaXMgYXBwLlxuICovXG5mdW5jdGlvbiBib290c3RyYXAoZWxlbWVudCwgbW9kdWxlcywgY29uZmlnKSB7XG4gIGlmICghaXNPYmplY3QoY29uZmlnKSkgY29uZmlnID0ge307XG4gIHZhciBkZWZhdWx0Q29uZmlnID0ge1xuICAgIHN0cmljdERpOiBmYWxzZVxuICB9O1xuICBjb25maWcgPSBleHRlbmQoZGVmYXVsdENvbmZpZywgY29uZmlnKTtcbiAgdmFyIGRvQm9vdHN0cmFwID0gZnVuY3Rpb24oKSB7XG4gICAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KTtcblxuICAgIGlmIChlbGVtZW50LmluamVjdG9yKCkpIHtcbiAgICAgIHZhciB0YWcgPSAoZWxlbWVudFswXSA9PT0gd2luZG93LmRvY3VtZW50KSA/ICdkb2N1bWVudCcgOiBzdGFydGluZ1RhZyhlbGVtZW50KTtcbiAgICAgIC8vIEVuY29kZSBhbmdsZSBicmFja2V0cyB0byBwcmV2ZW50IGlucHV0IGZyb20gYmVpbmcgc2FuaXRpemVkIHRvIGVtcHR5IHN0cmluZyAjODY4My5cbiAgICAgIHRocm93IG5nTWluRXJyKFxuICAgICAgICAgICdidHN0cnBkJyxcbiAgICAgICAgICAnQXBwIGFscmVhZHkgYm9vdHN0cmFwcGVkIHdpdGggdGhpcyBlbGVtZW50IFxcJ3swfVxcJycsXG4gICAgICAgICAgdGFnLnJlcGxhY2UoLzwvLCcmbHQ7JykucmVwbGFjZSgvPi8sJyZndDsnKSk7XG4gICAgfVxuXG4gICAgbW9kdWxlcyA9IG1vZHVsZXMgfHwgW107XG4gICAgbW9kdWxlcy51bnNoaWZ0KFsnJHByb3ZpZGUnLCBmdW5jdGlvbigkcHJvdmlkZSkge1xuICAgICAgJHByb3ZpZGUudmFsdWUoJyRyb290RWxlbWVudCcsIGVsZW1lbnQpO1xuICAgIH1dKTtcblxuICAgIGlmIChjb25maWcuZGVidWdJbmZvRW5hYmxlZCkge1xuICAgICAgLy8gUHVzaGluZyBzbyB0aGF0IHRoaXMgb3ZlcnJpZGVzIGBkZWJ1Z0luZm9FbmFibGVkYCBzZXR0aW5nIGRlZmluZWQgaW4gdXNlcidzIGBtb2R1bGVzYC5cbiAgICAgIG1vZHVsZXMucHVzaChbJyRjb21waWxlUHJvdmlkZXInLCBmdW5jdGlvbigkY29tcGlsZVByb3ZpZGVyKSB7XG4gICAgICAgICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZCh0cnVlKTtcbiAgICAgIH1dKTtcbiAgICB9XG5cbiAgICBtb2R1bGVzLnVuc2hpZnQoJ25nJyk7XG4gICAgdmFyIGluamVjdG9yID0gY3JlYXRlSW5qZWN0b3IobW9kdWxlcywgY29uZmlnLnN0cmljdERpKTtcbiAgICBpbmplY3Rvci5pbnZva2UoWyckcm9vdFNjb3BlJywgJyRyb290RWxlbWVudCcsICckY29tcGlsZScsICckaW5qZWN0b3InLFxuICAgICAgIGZ1bmN0aW9uIGJvb3RzdHJhcEFwcGx5KHNjb3BlLCBlbGVtZW50LCBjb21waWxlLCBpbmplY3Rvcikge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudC5kYXRhKCckaW5qZWN0b3InLCBpbmplY3Rvcik7XG4gICAgICAgICAgY29tcGlsZShlbGVtZW50KShzY29wZSk7XG4gICAgICAgIH0pO1xuICAgICAgfV1cbiAgICApO1xuICAgIHJldHVybiBpbmplY3RvcjtcbiAgfTtcblxuICB2YXIgTkdfRU5BQkxFX0RFQlVHX0lORk8gPSAvXk5HX0VOQUJMRV9ERUJVR19JTkZPIS87XG4gIHZhciBOR19ERUZFUl9CT09UU1RSQVAgPSAvXk5HX0RFRkVSX0JPT1RTVFJBUCEvO1xuXG4gIGlmICh3aW5kb3cgJiYgTkdfRU5BQkxFX0RFQlVHX0lORk8udGVzdCh3aW5kb3cubmFtZSkpIHtcbiAgICBjb25maWcuZGVidWdJbmZvRW5hYmxlZCA9IHRydWU7XG4gICAgd2luZG93Lm5hbWUgPSB3aW5kb3cubmFtZS5yZXBsYWNlKE5HX0VOQUJMRV9ERUJVR19JTkZPLCAnJyk7XG4gIH1cblxuICBpZiAod2luZG93ICYmICFOR19ERUZFUl9CT09UU1RSQVAudGVzdCh3aW5kb3cubmFtZSkpIHtcbiAgICByZXR1cm4gZG9Cb290c3RyYXAoKTtcbiAgfVxuXG4gIHdpbmRvdy5uYW1lID0gd2luZG93Lm5hbWUucmVwbGFjZShOR19ERUZFUl9CT09UU1RSQVAsICcnKTtcbiAgYW5ndWxhci5yZXN1bWVCb290c3RyYXAgPSBmdW5jdGlvbihleHRyYU1vZHVsZXMpIHtcbiAgICBmb3JFYWNoKGV4dHJhTW9kdWxlcywgZnVuY3Rpb24obW9kdWxlKSB7XG4gICAgICBtb2R1bGVzLnB1c2gobW9kdWxlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZG9Cb290c3RyYXAoKTtcbiAgfTtcblxuICBpZiAoaXNGdW5jdGlvbihhbmd1bGFyLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKSkge1xuICAgIGFuZ3VsYXIucmVzdW1lRGVmZXJyZWRCb290c3RyYXAoKTtcbiAgfVxufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5yZWxvYWRXaXRoRGVidWdJbmZvXG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIHJlbG9hZCB0aGUgY3VycmVudCBhcHBsaWNhdGlvbiB3aXRoIGRlYnVnIGluZm9ybWF0aW9uIHR1cm5lZCBvbi5cbiAqIFRoaXMgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGEgY2FsbCB0byBgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKGZhbHNlKWAuXG4gKlxuICogU2VlIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RlYnVnSW5mb0VuYWJsZWR9IGZvciBtb3JlLlxuICovXG5mdW5jdGlvbiByZWxvYWRXaXRoRGVidWdJbmZvKCkge1xuICB3aW5kb3cubmFtZSA9ICdOR19FTkFCTEVfREVCVUdfSU5GTyEnICsgd2luZG93Lm5hbWU7XG4gIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbn1cblxuLyoqXG4gKiBAbmFtZSBhbmd1bGFyLmdldFRlc3RhYmlsaXR5XG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgdGVzdGFiaWxpdHkgc2VydmljZSBmb3IgdGhlIGluc3RhbmNlIG9mIEFuZ3VsYXJKUyBvbiB0aGUgZ2l2ZW5cbiAqIGVsZW1lbnQuXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgRE9NIGVsZW1lbnQgd2hpY2ggaXMgdGhlIHJvb3Qgb2YgQW5ndWxhckpTIGFwcGxpY2F0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRUZXN0YWJpbGl0eShyb290RWxlbWVudCkge1xuICB2YXIgaW5qZWN0b3IgPSBhbmd1bGFyLmVsZW1lbnQocm9vdEVsZW1lbnQpLmluamVjdG9yKCk7XG4gIGlmICghaW5qZWN0b3IpIHtcbiAgICB0aHJvdyBuZ01pbkVycigndGVzdCcsXG4gICAgICAnbm8gaW5qZWN0b3IgZm91bmQgZm9yIGVsZW1lbnQgYXJndW1lbnQgdG8gZ2V0VGVzdGFiaWxpdHknKTtcbiAgfVxuICByZXR1cm4gaW5qZWN0b3IuZ2V0KCckJHRlc3RhYmlsaXR5Jyk7XG59XG5cbnZhciBTTkFLRV9DQVNFX1JFR0VYUCA9IC9bQS1aXS9nO1xuZnVuY3Rpb24gc25ha2VfY2FzZShuYW1lLCBzZXBhcmF0b3IpIHtcbiAgc2VwYXJhdG9yID0gc2VwYXJhdG9yIHx8ICdfJztcbiAgcmV0dXJuIG5hbWUucmVwbGFjZShTTkFLRV9DQVNFX1JFR0VYUCwgZnVuY3Rpb24obGV0dGVyLCBwb3MpIHtcbiAgICByZXR1cm4gKHBvcyA/IHNlcGFyYXRvciA6ICcnKSArIGxldHRlci50b0xvd2VyQ2FzZSgpO1xuICB9KTtcbn1cblxudmFyIGJpbmRKUXVlcnlGaXJlZCA9IGZhbHNlO1xuZnVuY3Rpb24gYmluZEpRdWVyeSgpIHtcbiAgdmFyIG9yaWdpbmFsQ2xlYW5EYXRhO1xuXG4gIGlmIChiaW5kSlF1ZXJ5RmlyZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBiaW5kIHRvIGpRdWVyeSBpZiBwcmVzZW50O1xuICB2YXIganFOYW1lID0ganEoKTtcbiAgalF1ZXJ5ID0gaXNVbmRlZmluZWQoanFOYW1lKSA/IHdpbmRvdy5qUXVlcnkgOiAgIC8vIHVzZSBqUXVlcnkgKGlmIHByZXNlbnQpXG4gICAgICAgICAgICFqcU5hbWUgICAgICAgICAgICAgPyB1bmRlZmluZWQgICAgIDogICAvLyB1c2UganFMaXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dbanFOYW1lXTsgICAvLyB1c2UgalF1ZXJ5IHNwZWNpZmllZCBieSBgbmdKcWBcblxuICAvLyBVc2UgalF1ZXJ5IGlmIGl0IGV4aXN0cyB3aXRoIHByb3BlciBmdW5jdGlvbmFsaXR5LCBvdGhlcndpc2UgZGVmYXVsdCB0byB1cy5cbiAgLy8gQW5ndWxhckpTIDEuMisgcmVxdWlyZXMgalF1ZXJ5IDEuNysgZm9yIG9uKCkvb2ZmKCkgc3VwcG9ydC5cbiAgLy8gQW5ndWxhckpTIDEuMysgdGVjaG5pY2FsbHkgcmVxdWlyZXMgYXQgbGVhc3QgalF1ZXJ5IDIuMSsgYnV0IGl0IG1heSB3b3JrIHdpdGggb2xkZXJcbiAgLy8gdmVyc2lvbnMuIEl0IHdpbGwgbm90IHdvcmsgZm9yIHN1cmUgd2l0aCBqUXVlcnkgPDEuNywgdGhvdWdoLlxuICBpZiAoalF1ZXJ5ICYmIGpRdWVyeS5mbi5vbikge1xuICAgIGpxTGl0ZSA9IGpRdWVyeTtcbiAgICBleHRlbmQoalF1ZXJ5LmZuLCB7XG4gICAgICBzY29wZTogSlFMaXRlUHJvdG90eXBlLnNjb3BlLFxuICAgICAgaXNvbGF0ZVNjb3BlOiBKUUxpdGVQcm90b3R5cGUuaXNvbGF0ZVNjb3BlLFxuICAgICAgY29udHJvbGxlcjogLyoqIEB0eXBlIHs/fSAqLyAoSlFMaXRlUHJvdG90eXBlKS5jb250cm9sbGVyLFxuICAgICAgaW5qZWN0b3I6IEpRTGl0ZVByb3RvdHlwZS5pbmplY3RvcixcbiAgICAgIGluaGVyaXRlZERhdGE6IEpRTGl0ZVByb3RvdHlwZS5pbmhlcml0ZWREYXRhXG4gICAgfSk7XG5cbiAgICAvLyBBbGwgbm9kZXMgcmVtb3ZlZCBmcm9tIHRoZSBET00gdmlhIHZhcmlvdXMgalF1ZXJ5IEFQSXMgbGlrZSAucmVtb3ZlKClcbiAgICAvLyBhcmUgcGFzc2VkIHRocm91Z2ggalF1ZXJ5LmNsZWFuRGF0YS4gTW9ua2V5LXBhdGNoIHRoaXMgbWV0aG9kIHRvIGZpcmVcbiAgICAvLyB0aGUgJGRlc3Ryb3kgZXZlbnQgb24gYWxsIHJlbW92ZWQgbm9kZXMuXG4gICAgb3JpZ2luYWxDbGVhbkRhdGEgPSBqUXVlcnkuY2xlYW5EYXRhO1xuICAgIGpRdWVyeS5jbGVhbkRhdGEgPSBmdW5jdGlvbihlbGVtcykge1xuICAgICAgdmFyIGV2ZW50cztcbiAgICAgIGZvciAodmFyIGkgPSAwLCBlbGVtOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKyspIHtcbiAgICAgICAgZXZlbnRzID0galF1ZXJ5Ll9kYXRhKGVsZW0sICdldmVudHMnKTtcbiAgICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHMuJGRlc3Ryb3kpIHtcbiAgICAgICAgICBqUXVlcnkoZWxlbSkudHJpZ2dlckhhbmRsZXIoJyRkZXN0cm95Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9yaWdpbmFsQ2xlYW5EYXRhKGVsZW1zKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGpxTGl0ZSA9IEpRTGl0ZTtcbiAgfVxuXG4gIGFuZ3VsYXIuZWxlbWVudCA9IGpxTGl0ZTtcblxuICAvLyBQcmV2ZW50IGRvdWJsZS1wcm94eWluZy5cbiAgYmluZEpRdWVyeUZpcmVkID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiB0aHJvdyBlcnJvciBpZiB0aGUgYXJndW1lbnQgaXMgZmFsc3kuXG4gKi9cbmZ1bmN0aW9uIGFzc2VydEFyZyhhcmcsIG5hbWUsIHJlYXNvbikge1xuICBpZiAoIWFyZykge1xuICAgIHRocm93IG5nTWluRXJyKCdhcmVxJywgJ0FyZ3VtZW50IFxcJ3swfVxcJyBpcyB7MX0nLCAobmFtZSB8fCAnPycpLCAocmVhc29uIHx8ICdyZXF1aXJlZCcpKTtcbiAgfVxuICByZXR1cm4gYXJnO1xufVxuXG5mdW5jdGlvbiBhc3NlcnRBcmdGbihhcmcsIG5hbWUsIGFjY2VwdEFycmF5QW5ub3RhdGlvbikge1xuICBpZiAoYWNjZXB0QXJyYXlBbm5vdGF0aW9uICYmIGlzQXJyYXkoYXJnKSkge1xuICAgICAgYXJnID0gYXJnW2FyZy5sZW5ndGggLSAxXTtcbiAgfVxuXG4gIGFzc2VydEFyZyhpc0Z1bmN0aW9uKGFyZyksIG5hbWUsICdub3QgYSBmdW5jdGlvbiwgZ290ICcgK1xuICAgICAgKGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyA/IGFyZy5jb25zdHJ1Y3Rvci5uYW1lIHx8ICdPYmplY3QnIDogdHlwZW9mIGFyZykpO1xuICByZXR1cm4gYXJnO1xufVxuXG4vKipcbiAqIHRocm93IGVycm9yIGlmIHRoZSBuYW1lIGdpdmVuIGlzIGhhc093blByb3BlcnR5XG4gKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgICAgdGhlIG5hbWUgdG8gdGVzdFxuICogQHBhcmFtICB7U3RyaW5nfSBjb250ZXh0IHRoZSBjb250ZXh0IGluIHdoaWNoIHRoZSBuYW1lIGlzIHVzZWQsIHN1Y2ggYXMgbW9kdWxlIG9yIGRpcmVjdGl2ZVxuICovXG5mdW5jdGlvbiBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCBjb250ZXh0KSB7XG4gIGlmIChuYW1lID09PSAnaGFzT3duUHJvcGVydHknKSB7XG4gICAgdGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCAnaGFzT3duUHJvcGVydHkgaXMgbm90IGEgdmFsaWQgezB9IG5hbWUnLCBjb250ZXh0KTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgdmFsdWUgYWNjZXNzaWJsZSBmcm9tIHRoZSBvYmplY3QgYnkgcGF0aC4gQW55IHVuZGVmaW5lZCB0cmF2ZXJzYWxzIGFyZSBpZ25vcmVkXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIHN0YXJ0aW5nIG9iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggcGF0aCB0byB0cmF2ZXJzZVxuICogQHBhcmFtIHtib29sZWFufSBbYmluZEZuVG9TY29wZT10cnVlXVxuICogQHJldHVybnMge09iamVjdH0gdmFsdWUgYXMgYWNjZXNzaWJsZSBieSBwYXRoXG4gKi9cbi8vVE9ETyhtaXNrbyk6IHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmVtb3ZlZFxuZnVuY3Rpb24gZ2V0dGVyKG9iaiwgcGF0aCwgYmluZEZuVG9TY29wZSkge1xuICBpZiAoIXBhdGgpIHJldHVybiBvYmo7XG4gIHZhciBrZXlzID0gcGF0aC5zcGxpdCgnLicpO1xuICB2YXIga2V5O1xuICB2YXIgbGFzdEluc3RhbmNlID0gb2JqO1xuICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGtleSA9IGtleXNbaV07XG4gICAgaWYgKG9iaikge1xuICAgICAgb2JqID0gKGxhc3RJbnN0YW5jZSA9IG9iailba2V5XTtcbiAgICB9XG4gIH1cbiAgaWYgKCFiaW5kRm5Ub1Njb3BlICYmIGlzRnVuY3Rpb24ob2JqKSkge1xuICAgIHJldHVybiBiaW5kKGxhc3RJbnN0YW5jZSwgb2JqKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgRE9NIHNpYmxpbmdzIGJldHdlZW4gdGhlIGZpcnN0IGFuZCBsYXN0IG5vZGUgaW4gdGhlIGdpdmVuIGFycmF5LlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgbGlrZSBvYmplY3RcbiAqIEByZXR1cm5zIHtBcnJheX0gdGhlIGlucHV0dGVkIG9iamVjdCBvciBhIGpxTGl0ZSBjb2xsZWN0aW9uIGNvbnRhaW5pbmcgdGhlIG5vZGVzXG4gKi9cbmZ1bmN0aW9uIGdldEJsb2NrTm9kZXMobm9kZXMpIHtcbiAgLy8gVE9ETyhwZXJmKTogdXBkYXRlIGBub2Rlc2AgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBvYmplY3Q/XG4gIHZhciBub2RlID0gbm9kZXNbMF07XG4gIHZhciBlbmROb2RlID0gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV07XG4gIHZhciBibG9ja05vZGVzO1xuXG4gIGZvciAodmFyIGkgPSAxOyBub2RlICE9PSBlbmROb2RlICYmIChub2RlID0gbm9kZS5uZXh0U2libGluZyk7IGkrKykge1xuICAgIGlmIChibG9ja05vZGVzIHx8IG5vZGVzW2ldICE9PSBub2RlKSB7XG4gICAgICBpZiAoIWJsb2NrTm9kZXMpIHtcbiAgICAgICAgYmxvY2tOb2RlcyA9IGpxTGl0ZShzbGljZS5jYWxsKG5vZGVzLCAwLCBpKSk7XG4gICAgICB9XG4gICAgICBibG9ja05vZGVzLnB1c2gobm9kZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJsb2NrTm9kZXMgfHwgbm9kZXM7XG59XG5cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG9iamVjdCB3aXRob3V0IGEgcHJvdG90eXBlLiBUaGlzIG9iamVjdCBpcyB1c2VmdWwgZm9yIGxvb2t1cCB3aXRob3V0IGhhdmluZyB0b1xuICogZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGljYWxseSBpbmhlcml0ZWQgcHJvcGVydGllcyB2aWEgaGFzT3duUHJvcGVydHkuXG4gKlxuICogUmVsYXRlZCBtaWNyby1iZW5jaG1hcmtzOlxuICogLSBodHRwOi8vanNwZXJmLmNvbS9vYmplY3QtY3JlYXRlMlxuICogLSBodHRwOi8vanNwZXJmLmNvbS9wcm90by1tYXAtbG9va3VwLzJcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vZm9yLWluLXZzLW9iamVjdC1rZXlzMlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1hcCgpIHtcbiAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgeyAvLyBudWxsIHx8IHVuZGVmaW5lZFxuICAgIHJldHVybiAnJztcbiAgfVxuICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICBicmVhaztcbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgdmFsdWUgPSAnJyArIHZhbHVlO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChoYXNDdXN0b21Ub1N0cmluZyh2YWx1ZSkgJiYgIWlzQXJyYXkodmFsdWUpICYmICFpc0RhdGUodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gdG9Kc29uKHZhbHVlKTtcbiAgICAgIH1cbiAgfVxuXG4gIHJldHVybiB2YWx1ZTtcbn1cblxudmFyIE5PREVfVFlQRV9FTEVNRU5UID0gMTtcbnZhciBOT0RFX1RZUEVfQVRUUklCVVRFID0gMjtcbnZhciBOT0RFX1RZUEVfVEVYVCA9IDM7XG52YXIgTk9ERV9UWVBFX0NPTU1FTlQgPSA4O1xudmFyIE5PREVfVFlQRV9ET0NVTUVOVCA9IDk7XG52YXIgTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UID0gMTE7XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlXG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBJbnRlcmZhY2UgZm9yIGNvbmZpZ3VyaW5nIEFuZ3VsYXJKUyB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlc30uXG4gKi9cblxuZnVuY3Rpb24gc2V0dXBNb2R1bGVMb2FkZXIod2luZG93KSB7XG5cbiAgdmFyICRpbmplY3Rvck1pbkVyciA9IG1pbkVycignJGluamVjdG9yJyk7XG4gIHZhciBuZ01pbkVyciA9IG1pbkVycignbmcnKTtcblxuICBmdW5jdGlvbiBlbnN1cmUob2JqLCBuYW1lLCBmYWN0b3J5KSB7XG4gICAgcmV0dXJuIG9ialtuYW1lXSB8fCAob2JqW25hbWVdID0gZmFjdG9yeSgpKTtcbiAgfVxuXG4gIHZhciBhbmd1bGFyID0gZW5zdXJlKHdpbmRvdywgJ2FuZ3VsYXInLCBPYmplY3QpO1xuXG4gIC8vIFdlIG5lZWQgdG8gZXhwb3NlIGBhbmd1bGFyLiQkbWluRXJyYCB0byBtb2R1bGVzIHN1Y2ggYXMgYG5nUmVzb3VyY2VgIHRoYXQgcmVmZXJlbmNlIGl0IGR1cmluZyBib290c3RyYXBcbiAgYW5ndWxhci4kJG1pbkVyciA9IGFuZ3VsYXIuJCRtaW5FcnIgfHwgbWluRXJyO1xuXG4gIHJldHVybiBlbnN1cmUoYW5ndWxhciwgJ21vZHVsZScsIGZ1bmN0aW9uKCkge1xuICAgIC8qKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsIGFuZ3VsYXIuTW9kdWxlPn0gKi9cbiAgICB2YXIgbW9kdWxlcyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICogQG5hbWUgYW5ndWxhci5tb2R1bGVcbiAgICAgKiBAbW9kdWxlIG5nXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBUaGUgYGFuZ3VsYXIubW9kdWxlYCBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXJKU1xuICAgICAqIG1vZHVsZXMuXG4gICAgICogQWxsIG1vZHVsZXMgKEFuZ3VsYXJKUyBjb3JlIG9yIDNyZCBwYXJ0eSkgdGhhdCBzaG91bGQgYmUgYXZhaWxhYmxlIHRvIGFuIGFwcGxpY2F0aW9uIG11c3QgYmVcbiAgICAgKiByZWdpc3RlcmVkIHVzaW5nIHRoaXMgbWVjaGFuaXNtLlxuICAgICAqXG4gICAgICogUGFzc2luZyBvbmUgYXJndW1lbnQgcmV0cmlldmVzIGFuIGV4aXN0aW5nIHtAbGluayBhbmd1bGFyLk1vZHVsZX0sXG4gICAgICogd2hlcmVhcyBwYXNzaW5nIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQgY3JlYXRlcyBhIG5ldyB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9XG4gICAgICpcbiAgICAgKlxuICAgICAqICMgTW9kdWxlXG4gICAgICpcbiAgICAgKiBBIG1vZHVsZSBpcyBhIGNvbGxlY3Rpb24gb2Ygc2VydmljZXMsIGRpcmVjdGl2ZXMsIGNvbnRyb2xsZXJzLCBmaWx0ZXJzLCBhbmQgY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbi5cbiAgICAgKiBgYW5ndWxhci5tb2R1bGVgIGlzIHVzZWQgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZVxuICAgICAqIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdteU1vZHVsZScsIFtdKTtcbiAgICAgKlxuICAgICAqIC8vIHJlZ2lzdGVyIGEgbmV3IHNlcnZpY2VcbiAgICAgKiBteU1vZHVsZS52YWx1ZSgnYXBwTmFtZScsICdNeUNvb2xBcHAnKTtcbiAgICAgKlxuICAgICAqIC8vIGNvbmZpZ3VyZSBleGlzdGluZyBzZXJ2aWNlcyBpbnNpZGUgaW5pdGlhbGl6YXRpb24gYmxvY2tzLlxuICAgICAqIG15TW9kdWxlLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgKiAgIC8vIENvbmZpZ3VyZSBleGlzdGluZyBwcm92aWRlcnNcbiAgICAgKiAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJyEnKTtcbiAgICAgKiB9XSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGVuIHlvdSBjYW4gY3JlYXRlIGFuIGluamVjdG9yIGFuZCBsb2FkIHlvdXIgbW9kdWxlcyBsaWtlIHRoaXM6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciBpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoWyduZycsICdteU1vZHVsZSddKVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSG93ZXZlciBpdCdzIG1vcmUgbGlrZWx5IHRoYXQgeW91J2xsIGp1c3QgdXNlXG4gICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0FwcCBuZ0FwcH0gb3JcbiAgICAgKiB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IHRvIHNpbXBsaWZ5IHRoaXMgcHJvY2VzcyBmb3IgeW91LlxuICAgICAqXG4gICAgICogQHBhcmFtIHshc3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBtb2R1bGUgdG8gY3JlYXRlIG9yIHJldHJpZXZlLlxuICAgICAqIEBwYXJhbSB7IUFycmF5LjxzdHJpbmc+PX0gcmVxdWlyZXMgSWYgc3BlY2lmaWVkIHRoZW4gbmV3IG1vZHVsZSBpcyBiZWluZyBjcmVhdGVkLiBJZlxuICAgICAqICAgICAgICB1bnNwZWNpZmllZCB0aGVuIHRoZSBtb2R1bGUgaXMgYmVpbmcgcmV0cmlldmVkIGZvciBmdXJ0aGVyIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbj19IGNvbmZpZ0ZuIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb24gZm9yIHRoZSBtb2R1bGUuIFNhbWUgYXNcbiAgICAgKiAgICAgICAge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZyBNb2R1bGUjY29uZmlnKCl9LlxuICAgICAqIEByZXR1cm5zIHthbmd1bGFyLk1vZHVsZX0gbmV3IG1vZHVsZSB3aXRoIHRoZSB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9IGFwaS5cbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gbW9kdWxlKG5hbWUsIHJlcXVpcmVzLCBjb25maWdGbikge1xuXG4gICAgICB2YXIgaW5mbyA9IHt9O1xuXG4gICAgICB2YXIgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkgPSBmdW5jdGlvbihuYW1lLCBjb250ZXh0KSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnaGFzT3duUHJvcGVydHknKSB7XG4gICAgICAgICAgdGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCAnaGFzT3duUHJvcGVydHkgaXMgbm90IGEgdmFsaWQgezB9IG5hbWUnLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ21vZHVsZScpO1xuICAgICAgaWYgKHJlcXVpcmVzICYmIG1vZHVsZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgbW9kdWxlc1tuYW1lXSA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZW5zdXJlKG1vZHVsZXMsIG5hbWUsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXJlcXVpcmVzKSB7XG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdub21vZCcsICdNb2R1bGUgXFwnezB9XFwnIGlzIG5vdCBhdmFpbGFibGUhIFlvdSBlaXRoZXIgbWlzc3BlbGxlZCAnICtcbiAgICAgICAgICAgICAndGhlIG1vZHVsZSBuYW1lIG9yIGZvcmdvdCB0byBsb2FkIGl0LiBJZiByZWdpc3RlcmluZyBhIG1vZHVsZSBlbnN1cmUgdGhhdCB5b3UgJyArXG4gICAgICAgICAgICAgJ3NwZWNpZnkgdGhlIGRlcGVuZGVuY2llcyBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LicsIG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXkuPEFycmF5LjwqPj59ICovXG4gICAgICAgIHZhciBpbnZva2VRdWV1ZSA9IFtdO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5LjxGdW5jdGlvbj59ICovXG4gICAgICAgIHZhciBjb25maWdCbG9ja3MgPSBbXTtcblxuICAgICAgICAvKiogQHR5cGUgeyFBcnJheS48RnVuY3Rpb24+fSAqL1xuICAgICAgICB2YXIgcnVuQmxvY2tzID0gW107XG5cbiAgICAgICAgdmFyIGNvbmZpZyA9IGludm9rZUxhdGVyKCckaW5qZWN0b3InLCAnaW52b2tlJywgJ3B1c2gnLCBjb25maWdCbG9ja3MpO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7YW5ndWxhci5Nb2R1bGV9ICovXG4gICAgICAgIHZhciBtb2R1bGVJbnN0YW5jZSA9IHtcbiAgICAgICAgICAvLyBQcml2YXRlIHN0YXRlXG4gICAgICAgICAgX2ludm9rZVF1ZXVlOiBpbnZva2VRdWV1ZSxcbiAgICAgICAgICBfY29uZmlnQmxvY2tzOiBjb25maWdCbG9ja3MsXG4gICAgICAgICAgX3J1bkJsb2NrczogcnVuQmxvY2tzLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2luZm9cbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdD19IGluZm8gSW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZHVsZVxuICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R8TW9kdWxlfSBUaGUgY3VycmVudCBpbmZvIG9iamVjdCBmb3IgdGhpcyBtb2R1bGUgaWYgY2FsbGVkIGFzIGEgZ2V0dGVyLFxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICBvciBgdGhpc2AgaWYgY2FsbGVkIGFzIGEgc2V0dGVyLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogUmVhZCBhbmQgd3JpdGUgY3VzdG9tIGluZm9ybWF0aW9uIGFib3V0IHRoaXMgbW9kdWxlLlxuICAgICAgICAgICAqIEZvciBleGFtcGxlIHlvdSBjb3VsZCBwdXQgdGhlIHZlcnNpb24gb2YgdGhlIG1vZHVsZSBpbiBoZXJlLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogYGBganNcbiAgICAgICAgICAgKiBhbmd1bGFyLm1vZHVsZSgnbXlNb2R1bGUnLCBbXSkuaW5mbyh7IHZlcnNpb246ICcxLjAuMCcgfSk7XG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBUaGUgdmVyc2lvbiBjb3VsZCB0aGVuIGJlIHJlYWQgYmFjayBvdXQgYnkgYWNjZXNzaW5nIHRoZSBtb2R1bGUgZWxzZXdoZXJlOlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICogdmFyIHZlcnNpb24gPSBhbmd1bGFyLm1vZHVsZSgnbXlNb2R1bGUnKS5pbmZvKCkudmVyc2lvbjtcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFlvdSBjYW4gYWxzbyByZXRyaWV2ZSB0aGlzIGluZm9ybWF0aW9uIGR1cmluZyBydW50aW1lIHZpYSB0aGVcbiAgICAgICAgICAgKiB7QGxpbmsgJGluamVjdG9yI21vZHVsZXMgYCRpbmplY3Rvci5tb2R1bGVzYH0gcHJvcGVydHk6XG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgICAqIHZhciB2ZXJzaW9uID0gJGluamVjdG9yLm1vZHVsZXNbJ215TW9kdWxlJ10uaW5mbygpLnZlcnNpb247XG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICovXG4gICAgICAgICAgaW5mbzogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB0aHJvdyBuZ01pbkVycignYW9iaicsICdBcmd1bWVudCBcXCd7MH1cXCcgbXVzdCBiZSBhbiBvYmplY3QnLCAndmFsdWUnKTtcbiAgICAgICAgICAgICAgaW5mbyA9IHZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNyZXF1aXJlc1xuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIEhvbGRzIHRoZSBsaXN0IG9mIG1vZHVsZXMgd2hpY2ggdGhlIGluamVjdG9yIHdpbGwgbG9hZCBiZWZvcmUgdGhlIGN1cnJlbnQgbW9kdWxlIGlzXG4gICAgICAgICAgICogbG9hZGVkLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHJlcXVpcmVzOiByZXF1aXJlcyxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI25hbWVcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBOYW1lIG9mIHRoZSBtb2R1bGUuXG4gICAgICAgICAgICovXG4gICAgICAgICAgbmFtZTogbmFtZSxcblxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3Byb3ZpZGVyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3ZpZGVyVHlwZSBDb25zdHJ1Y3Rpb24gZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiB0aGVcbiAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgcHJvdmlkZXI6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJHByb3ZpZGUnLCAncHJvdmlkZXInKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNmYWN0b3J5XG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3ZpZGVyRnVuY3Rpb24gRnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiB0aGUgc2VydmljZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjZmFjdG9yeSAkcHJvdmlkZS5mYWN0b3J5KCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGZhY3Rvcnk6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJHByb3ZpZGUnLCAnZmFjdG9yeScpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3NlcnZpY2VcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uc3RydWN0b3IgQSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW5zdGFudGlhdGVkLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgc2VydmljZTogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckcHJvdmlkZScsICdzZXJ2aWNlJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjdmFsdWVcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHsqfSBvYmplY3QgU2VydmljZSBpbnN0YW5jZSBvYmplY3QuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlICRwcm92aWRlLnZhbHVlKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHZhbHVlOiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAndmFsdWUnKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNjb25zdGFudFxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBjb25zdGFudCBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHsqfSBvYmplY3QgQ29uc3RhbnQgdmFsdWUuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogQmVjYXVzZSB0aGUgY29uc3RhbnRzIGFyZSBmaXhlZCwgdGhleSBnZXQgYXBwbGllZCBiZWZvcmUgb3RoZXIgcHJvdmlkZSBtZXRob2RzLlxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNjb25zdGFudCAkcHJvdmlkZS5jb25zdGFudCgpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb25zdGFudDogaW52b2tlTGF0ZXIoJyRwcm92aWRlJywgJ2NvbnN0YW50JywgJ3Vuc2hpZnQnKSxcblxuICAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjZGVjb3JhdG9yXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIGRlY29yYXRlLlxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGRlY29yRm4gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgc2VydmljZSBuZWVkcyB0byBiZVxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFudGlhdGVkIGFuZCBzaG91bGQgcmV0dXJuIHRoZSBkZWNvcmF0ZWQgc2VydmljZSBpbnN0YW5jZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yICRwcm92aWRlLmRlY29yYXRvcigpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBkZWNvcmF0b3I6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJHByb3ZpZGUnLCAnZGVjb3JhdG9yJywgY29uZmlnQmxvY2tzKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNhbmltYXRpb25cbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgYW5pbWF0aW9uIG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhbmltYXRpb25GYWN0b3J5IEZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiBhblxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqXG4gICAgICAgICAgICogKipOT1RFKio6IGFuaW1hdGlvbnMgdGFrZSBlZmZlY3Qgb25seSBpZiB0aGUgKipuZ0FuaW1hdGUqKiBtb2R1bGUgaXMgbG9hZGVkLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBEZWZpbmVzIGFuIGFuaW1hdGlvbiBob29rIHRoYXQgY2FuIGJlIGxhdGVyIHVzZWQgd2l0aFxuICAgICAgICAgICAqIHtAbGluayAkYW5pbWF0ZSAkYW5pbWF0ZX0gc2VydmljZSBhbmQgZGlyZWN0aXZlcyB0aGF0IHVzZSB0aGlzIHNlcnZpY2UuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgICAqIG1vZHVsZS5hbmltYXRpb24oJy5hbmltYXRpb24tbmFtZScsIGZ1bmN0aW9uKCRpbmplY3QxLCAkaW5qZWN0Mikge1xuICAgICAgICAgICAqICAgcmV0dXJuIHtcbiAgICAgICAgICAgKiAgICAgZXZlbnROYW1lIDogZnVuY3Rpb24oZWxlbWVudCwgZG9uZSkge1xuICAgICAgICAgICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAqICAgICAgIC8vb25jZSBjb21wbGV0ZSwgdGhlbiBydW4gZG9uZSgpXG4gICAgICAgICAgICogICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhbmNlbGxhdGlvbkZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgKiAgICAgICAgIC8vY29kZSB0byBjYW5jZWwgdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAqICAgICAgIH1cbiAgICAgICAgICAgKiAgICAgfVxuICAgICAgICAgICAqICAgfVxuICAgICAgICAgICAqIH0pXG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRhbmltYXRlUHJvdmlkZXIjcmVnaXN0ZXIgJGFuaW1hdGVQcm92aWRlci5yZWdpc3RlcigpfSBhbmRcbiAgICAgICAgICAgKiB7QGxpbmsgbmdBbmltYXRlIG5nQW5pbWF0ZSBtb2R1bGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGFuaW1hdGlvbjogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckYW5pbWF0ZVByb3ZpZGVyJywgJ3JlZ2lzdGVyJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjZmlsdGVyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEZpbHRlciBuYW1lIC0gdGhpcyBtdXN0IGJlIGEgdmFsaWQgQW5ndWxhckpTIGV4cHJlc3Npb24gaWRlbnRpZmllclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbHRlckZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIGZpbHRlci5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRmaWx0ZXJQcm92aWRlciNyZWdpc3RlciAkZmlsdGVyUHJvdmlkZXIucmVnaXN0ZXIoKX0uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgICAgICAgICAqICoqTm90ZToqKiBGaWx0ZXIgbmFtZXMgbXVzdCBiZSB2YWxpZCBBbmd1bGFySlMge0BsaW5rIGV4cHJlc3Npb259IGlkZW50aWZpZXJzLCBzdWNoIGFzIGB1cHBlcmNhc2VgIG9yIGBvcmRlckJ5YC5cbiAgICAgICAgICAgKiBOYW1lcyB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycywgc3VjaCBhcyBoeXBoZW5zIGFuZCBkb3RzLCBhcmUgbm90IGFsbG93ZWQuIElmIHlvdSB3aXNoIHRvIG5hbWVzcGFjZVxuICAgICAgICAgICAqIHlvdXIgZmlsdGVycywgdGhlbiB5b3UgY2FuIHVzZSBjYXBpdGFsaXphdGlvbiAoYG15YXBwU3Vic2VjdGlvbkZpbHRlcnhgKSBvciB1bmRlcnNjb3Jlc1xuICAgICAgICAgICAqIChgbXlhcHBfc3Vic2VjdGlvbl9maWx0ZXJ4YCkuXG4gICAgICAgICAgICogPC9kaXY+XG4gICAgICAgICAgICovXG4gICAgICAgICAgZmlsdGVyOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRmaWx0ZXJQcm92aWRlcicsICdyZWdpc3RlcicpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbnRyb2xsZXJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIENvbnRyb2xsZXIgbmFtZSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBjb250cm9sbGVycyB3aGVyZSB0aGVcbiAgICAgICAgICAgKiAgICBrZXlzIGFyZSB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBjb25zdHJ1Y3RvcnMuXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uc3RydWN0b3IgQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIjcmVnaXN0ZXIgJGNvbnRyb2xsZXJQcm92aWRlci5yZWdpc3RlcigpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb250cm9sbGVyOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRjb250cm9sbGVyUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNkaXJlY3RpdmVcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIERpcmVjdGl2ZSBuYW1lLCBvciBhbiBvYmplY3QgbWFwIG9mIGRpcmVjdGl2ZXMgd2hlcmUgdGhlXG4gICAgICAgICAgICogICAga2V5cyBhcmUgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgZmFjdG9yaWVzLlxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGRpcmVjdGl2ZUZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mXG4gICAgICAgICAgICogZGlyZWN0aXZlcy5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlICRjb21waWxlUHJvdmlkZXIuZGlyZWN0aXZlKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGRpcmVjdGl2ZTogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckY29tcGlsZVByb3ZpZGVyJywgJ2RpcmVjdGl2ZScpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbXBvbmVudFxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgaW4gY2FtZWwtY2FzZSAoaS5lLiBteUNvbXAgd2hpY2ggd2lsbCBtYXRjaCBhcyBteS1jb21wKVxuICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIENvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdCAoYSBzaW1wbGlmaWVkXG4gICAgICAgICAgICogICAge0BsaW5rIG5nLiRjb21waWxlI2RpcmVjdGl2ZS1kZWZpbml0aW9uLW9iamVjdCBkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3R9KVxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogU2VlIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2NvbXBvbmVudCAkY29tcGlsZVByb3ZpZGVyLmNvbXBvbmVudCgpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb21wb25lbnQ6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJGNvbXBpbGVQcm92aWRlcicsICdjb21wb25lbnQnKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNjb25maWdcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZmlnRm4gRXhlY3V0ZSB0aGlzIGZ1bmN0aW9uIG9uIG1vZHVsZSBsb2FkLiBVc2VmdWwgZm9yIHNlcnZpY2VcbiAgICAgICAgICAgKiAgICBjb25maWd1cmF0aW9uLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBjb25maWd1cmUgc2VydmljZXMgYnkgaW5qZWN0aW5nIHRoZWlyXG4gICAgICAgICAgICoge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI3Byb3ZpZGVyIGBwcm92aWRlcnNgfSwgZS5nLiBmb3IgYWRkaW5nIHJvdXRlcyB0byB0aGVcbiAgICAgICAgICAgKiB7QGxpbmsgbmdSb3V0ZS4kcm91dGVQcm92aWRlciAkcm91dGVQcm92aWRlcn0uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBOb3RlIHRoYXQgeW91IGNhbiBvbmx5IGluamVjdCB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjcHJvdmlkZXIgYHByb3ZpZGVyc2B9IGFuZFxuICAgICAgICAgICAqIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25zdGFudCBgY29uc3RhbnRzYH0gaW50byB0aGlzIGZ1bmN0aW9uLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogRm9yIG1vcmUgYWJvdXQgaG93IHRvIGNvbmZpZ3VyZSBzZXJ2aWNlcywgc2VlXG4gICAgICAgICAgICoge0BsaW5rIHByb3ZpZGVycyNwcm92aWRlci1yZWNpcGUgUHJvdmlkZXIgUmVjaXBlfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb25maWc6IGNvbmZpZyxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNydW5cbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW5pdGlhbGl6YXRpb25GbiBFeGVjdXRlIHRoaXMgZnVuY3Rpb24gYWZ0ZXIgaW5qZWN0b3IgY3JlYXRpb24uXG4gICAgICAgICAgICogICAgVXNlZnVsIGZvciBhcHBsaWNhdGlvbiBpbml0aWFsaXphdGlvbi5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgd29yayB3aGljaCBzaG91bGQgYmUgcGVyZm9ybWVkIHdoZW4gdGhlIGluamVjdG9yIGlzIGRvbmVcbiAgICAgICAgICAgKiBsb2FkaW5nIGFsbCBtb2R1bGVzLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHJ1bjogZnVuY3Rpb24oYmxvY2spIHtcbiAgICAgICAgICAgIHJ1bkJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoY29uZmlnRm4pIHtcbiAgICAgICAgICBjb25maWcoY29uZmlnRm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1vZHVsZUluc3RhbmNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvdmlkZXJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZz19IGluc2VydE1ldGhvZFxuICAgICAgICAgKiBAcmV0dXJucyB7YW5ndWxhci5Nb2R1bGV9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbnZva2VMYXRlcihwcm92aWRlciwgbWV0aG9kLCBpbnNlcnRNZXRob2QsIHF1ZXVlKSB7XG4gICAgICAgICAgaWYgKCFxdWV1ZSkgcXVldWUgPSBpbnZva2VRdWV1ZTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBxdWV1ZVtpbnNlcnRNZXRob2QgfHwgJ3B1c2gnXShbcHJvdmlkZXIsIG1ldGhvZCwgYXJndW1lbnRzXSk7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlSW5zdGFuY2U7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvdmlkZXJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICAgICAgICAgKiBAcmV0dXJucyB7YW5ndWxhci5Nb2R1bGV9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUocHJvdmlkZXIsIG1ldGhvZCwgcXVldWUpIHtcbiAgICAgICAgICBpZiAoIXF1ZXVlKSBxdWV1ZSA9IGludm9rZVF1ZXVlO1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNpcGVOYW1lLCBmYWN0b3J5RnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChmYWN0b3J5RnVuY3Rpb24gJiYgaXNGdW5jdGlvbihmYWN0b3J5RnVuY3Rpb24pKSBmYWN0b3J5RnVuY3Rpb24uJCRtb2R1bGVOYW1lID0gbmFtZTtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goW3Byb3ZpZGVyLCBtZXRob2QsIGFyZ3VtZW50c10pO1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZUluc3RhbmNlO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG59XG5cbi8qIGdsb2JhbCBzaGFsbG93Q29weTogdHJ1ZSAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzaGFsbG93IGNvcHkgb2YgYW4gb2JqZWN0LCBhbiBhcnJheSBvciBhIHByaW1pdGl2ZS5cbiAqXG4gKiBBc3N1bWVzIHRoYXQgdGhlcmUgYXJlIG5vIHByb3RvIHByb3BlcnRpZXMgZm9yIG9iamVjdHMuXG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KHNyYywgZHN0KSB7XG4gIGlmIChpc0FycmF5KHNyYykpIHtcbiAgICBkc3QgPSBkc3QgfHwgW107XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzcmMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgZHN0W2ldID0gc3JjW2ldO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChzcmMpKSB7XG4gICAgZHN0ID0gZHN0IHx8IHt9O1xuXG4gICAgZm9yICh2YXIga2V5IGluIHNyYykge1xuICAgICAgaWYgKCEoa2V5LmNoYXJBdCgwKSA9PT0gJyQnICYmIGtleS5jaGFyQXQoMSkgPT09ICckJykpIHtcbiAgICAgICAgZHN0W2tleV0gPSBzcmNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZHN0IHx8IHNyYztcbn1cblxuLyogZXhwb3J0ZWQgdG9EZWJ1Z1N0cmluZyAqL1xuXG5mdW5jdGlvbiBzZXJpYWxpemVPYmplY3Qob2JqLCBtYXhEZXB0aCkge1xuICB2YXIgc2VlbiA9IFtdO1xuXG4gIC8vIFRoZXJlIGlzIG5vIGRpcmVjdCB3YXkgdG8gc3RyaW5naWZ5IG9iamVjdCB1bnRpbCByZWFjaGluZyBhIHNwZWNpZmljIGRlcHRoXG4gIC8vIGFuZCBhIHZlcnkgZGVlcCBvYmplY3QgY2FuIGNhdXNlIGEgcGVyZm9ybWFuY2UgaXNzdWUsIHNvIHdlIGNvcHkgdGhlIG9iamVjdFxuICAvLyBiYXNlZCBvbiB0aGlzIHNwZWNpZmljIGRlcHRoIGFuZCB0aGVuIHN0cmluZ2lmeSBpdC5cbiAgaWYgKGlzVmFsaWRPYmplY3RNYXhEZXB0aChtYXhEZXB0aCkpIHtcbiAgICAvLyBUaGlzIGZpbGUgaXMgYWxzbyBpbmNsdWRlZCBpbiBgYW5ndWxhci1sb2FkZXJgLCBzbyBgY29weSgpYCBtaWdodCBub3QgYWx3YXlzIGJlIGF2YWlsYWJsZSBpblxuICAgIC8vIHRoZSBjbG9zdXJlLiBUaGVyZWZvcmUsIGl0IGlzIGxhemlseSByZXRyaWV2ZWQgYXMgYGFuZ3VsYXIuY29weSgpYCB3aGVuIG5lZWRlZC5cbiAgICBvYmogPSBhbmd1bGFyLmNvcHkob2JqLCBudWxsLCBtYXhEZXB0aCk7XG4gIH1cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICB2YWwgPSB0b0pzb25SZXBsYWNlcihrZXksIHZhbCk7XG4gICAgaWYgKGlzT2JqZWN0KHZhbCkpIHtcblxuICAgICAgaWYgKHNlZW4uaW5kZXhPZih2YWwpID49IDApIHJldHVybiAnLi4uJztcblxuICAgICAgc2Vlbi5wdXNoKHZhbCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0b0RlYnVnU3RyaW5nKG9iaiwgbWF4RGVwdGgpIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLCAnJyk7XG4gIH0gZWxzZSBpZiAoaXNVbmRlZmluZWQob2JqKSkge1xuICAgIHJldHVybiAndW5kZWZpbmVkJztcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBzZXJpYWxpemVPYmplY3Qob2JqLCBtYXhEZXB0aCk7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuLyogZ2xvYmFsIGFuZ3VsYXJNb2R1bGU6IHRydWUsXG4gIHZlcnNpb246IHRydWUsXG5cbiAgJENvbXBpbGVQcm92aWRlcixcblxuICBodG1sQW5jaG9yRGlyZWN0aXZlLFxuICBpbnB1dERpcmVjdGl2ZSxcbiAgaW5wdXREaXJlY3RpdmUsXG4gIGZvcm1EaXJlY3RpdmUsXG4gIHNjcmlwdERpcmVjdGl2ZSxcbiAgc2VsZWN0RGlyZWN0aXZlLFxuICBvcHRpb25EaXJlY3RpdmUsXG4gIG5nQmluZERpcmVjdGl2ZSxcbiAgbmdCaW5kSHRtbERpcmVjdGl2ZSxcbiAgbmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUsXG4gIG5nQ2xhc3NEaXJlY3RpdmUsXG4gIG5nQ2xhc3NFdmVuRGlyZWN0aXZlLFxuICBuZ0NsYXNzT2RkRGlyZWN0aXZlLFxuICBuZ0Nsb2FrRGlyZWN0aXZlLFxuICBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUsXG4gIG5nRm9ybURpcmVjdGl2ZSxcbiAgbmdIaWRlRGlyZWN0aXZlLFxuICBuZ0lmRGlyZWN0aXZlLFxuICBuZ0luY2x1ZGVEaXJlY3RpdmUsXG4gIG5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlLFxuICBuZ0luaXREaXJlY3RpdmUsXG4gIG5nTm9uQmluZGFibGVEaXJlY3RpdmUsXG4gIG5nUGx1cmFsaXplRGlyZWN0aXZlLFxuICBuZ1JlcGVhdERpcmVjdGl2ZSxcbiAgbmdTaG93RGlyZWN0aXZlLFxuICBuZ1N0eWxlRGlyZWN0aXZlLFxuICBuZ1N3aXRjaERpcmVjdGl2ZSxcbiAgbmdTd2l0Y2hXaGVuRGlyZWN0aXZlLFxuICBuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUsXG4gIG5nT3B0aW9uc0RpcmVjdGl2ZSxcbiAgbmdUcmFuc2NsdWRlRGlyZWN0aXZlLFxuICBuZ01vZGVsRGlyZWN0aXZlLFxuICBuZ0xpc3REaXJlY3RpdmUsXG4gIG5nQ2hhbmdlRGlyZWN0aXZlLFxuICBwYXR0ZXJuRGlyZWN0aXZlLFxuICBwYXR0ZXJuRGlyZWN0aXZlLFxuICByZXF1aXJlZERpcmVjdGl2ZSxcbiAgcmVxdWlyZWREaXJlY3RpdmUsXG4gIG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgbWlubGVuZ3RoRGlyZWN0aXZlLFxuICBtYXhsZW5ndGhEaXJlY3RpdmUsXG4gIG1heGxlbmd0aERpcmVjdGl2ZSxcbiAgbmdWYWx1ZURpcmVjdGl2ZSxcbiAgbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUsXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzLFxuICBuZ0V2ZW50RGlyZWN0aXZlcyxcblxuICAkQW5jaG9yU2Nyb2xsUHJvdmlkZXIsXG4gICRBbmltYXRlUHJvdmlkZXIsXG4gICRDb3JlQW5pbWF0ZUNzc1Byb3ZpZGVyLFxuICAkJENvcmVBbmltYXRlSnNQcm92aWRlcixcbiAgJCRDb3JlQW5pbWF0ZVF1ZXVlUHJvdmlkZXIsXG4gICQkQW5pbWF0ZVJ1bm5lckZhY3RvcnlQcm92aWRlcixcbiAgJCRBbmltYXRlQXN5bmNSdW5GYWN0b3J5UHJvdmlkZXIsXG4gICRCcm93c2VyUHJvdmlkZXIsXG4gICRDYWNoZUZhY3RvcnlQcm92aWRlcixcbiAgJENvbnRyb2xsZXJQcm92aWRlcixcbiAgJERhdGVQcm92aWRlcixcbiAgJERvY3VtZW50UHJvdmlkZXIsXG4gICQkSXNEb2N1bWVudEhpZGRlblByb3ZpZGVyLFxuICAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyLFxuICAkRmlsdGVyUHJvdmlkZXIsXG4gICQkRm9yY2VSZWZsb3dQcm92aWRlcixcbiAgJEludGVycG9sYXRlUHJvdmlkZXIsXG4gICRJbnRlcnZhbFByb3ZpZGVyLFxuICAkSHR0cFByb3ZpZGVyLFxuICAkSHR0cFBhcmFtU2VyaWFsaXplclByb3ZpZGVyLFxuICAkSHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZVByb3ZpZGVyLFxuICAkSHR0cEJhY2tlbmRQcm92aWRlcixcbiAgJHhockZhY3RvcnlQcm92aWRlcixcbiAgJGpzb25wQ2FsbGJhY2tzUHJvdmlkZXIsXG4gICRMb2NhdGlvblByb3ZpZGVyLFxuICAkTG9nUHJvdmlkZXIsXG4gICQkTWFwUHJvdmlkZXIsXG4gICRQYXJzZVByb3ZpZGVyLFxuICAkUm9vdFNjb3BlUHJvdmlkZXIsXG4gICRRUHJvdmlkZXIsXG4gICQkUVByb3ZpZGVyLFxuICAkJFNhbml0aXplVXJpUHJvdmlkZXIsXG4gICRTY2VQcm92aWRlcixcbiAgJFNjZURlbGVnYXRlUHJvdmlkZXIsXG4gICRTbmlmZmVyUHJvdmlkZXIsXG4gICRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIsXG4gICRUZW1wbGF0ZVJlcXVlc3RQcm92aWRlcixcbiAgJCRUZXN0YWJpbGl0eVByb3ZpZGVyLFxuICAkVGltZW91dFByb3ZpZGVyLFxuICAkJFJBRlByb3ZpZGVyLFxuICAkV2luZG93UHJvdmlkZXIsXG4gICQkanFMaXRlUHJvdmlkZXIsXG4gICQkQ29va2llUmVhZGVyUHJvdmlkZXJcbiovXG5cblxuLyoqXG4gKiBAbmdkb2Mgb2JqZWN0XG4gKiBAbmFtZSBhbmd1bGFyLnZlcnNpb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICogQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgQW5ndWxhckpTIHZlcnNpb24uXG4gKlxuICogVGhpcyBvYmplY3QgaGFzIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAtIGBmdWxsYCDigJMgYHtzdHJpbmd9YCDigJMgRnVsbCB2ZXJzaW9uIHN0cmluZywgc3VjaCBhcyBcIjAuOS4xOFwiLlxuICogLSBgbWFqb3JgIOKAkyBge251bWJlcn1gIOKAkyBNYWpvciB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjBcIi5cbiAqIC0gYG1pbm9yYCDigJMgYHtudW1iZXJ9YCDigJMgTWlub3IgdmVyc2lvbiBudW1iZXIsIHN1Y2ggYXMgXCI5XCIuXG4gKiAtIGBkb3RgIOKAkyBge251bWJlcn1gIOKAkyBEb3QgdmVyc2lvbiBudW1iZXIsIHN1Y2ggYXMgXCIxOFwiLlxuICogLSBgY29kZU5hbWVgIOKAkyBge3N0cmluZ31gIOKAkyBDb2RlIG5hbWUgb2YgdGhlIHJlbGVhc2UsIHN1Y2ggYXMgXCJqaWdnbGluZy1hcm1mYXRcIi5cbiAqL1xudmFyIHZlcnNpb24gPSB7XG4gIC8vIFRoZXNlIHBsYWNlaG9sZGVyIHN0cmluZ3Mgd2lsbCBiZSByZXBsYWNlZCBieSBncnVudCdzIGBidWlsZGAgdGFzay5cbiAgLy8gVGhleSBuZWVkIHRvIGJlIGRvdWJsZS0gb3Igc2luZ2xlLXF1b3RlZC5cbiAgZnVsbDogJzEuNi45JyxcbiAgbWFqb3I6IDEsXG4gIG1pbm9yOiA2LFxuICBkb3Q6IDksXG4gIGNvZGVOYW1lOiAnZmllcnktYmFzaWxpc2snXG59O1xuXG5cbmZ1bmN0aW9uIHB1Ymxpc2hFeHRlcm5hbEFQSShhbmd1bGFyKSB7XG4gIGV4dGVuZChhbmd1bGFyLCB7XG4gICAgJ2Vycm9ySGFuZGxpbmdDb25maWcnOiBlcnJvckhhbmRsaW5nQ29uZmlnLFxuICAgICdib290c3RyYXAnOiBib290c3RyYXAsXG4gICAgJ2NvcHknOiBjb3B5LFxuICAgICdleHRlbmQnOiBleHRlbmQsXG4gICAgJ21lcmdlJzogbWVyZ2UsXG4gICAgJ2VxdWFscyc6IGVxdWFscyxcbiAgICAnZWxlbWVudCc6IGpxTGl0ZSxcbiAgICAnZm9yRWFjaCc6IGZvckVhY2gsXG4gICAgJ2luamVjdG9yJzogY3JlYXRlSW5qZWN0b3IsXG4gICAgJ25vb3AnOiBub29wLFxuICAgICdiaW5kJzogYmluZCxcbiAgICAndG9Kc29uJzogdG9Kc29uLFxuICAgICdmcm9tSnNvbic6IGZyb21Kc29uLFxuICAgICdpZGVudGl0eSc6IGlkZW50aXR5LFxuICAgICdpc1VuZGVmaW5lZCc6IGlzVW5kZWZpbmVkLFxuICAgICdpc0RlZmluZWQnOiBpc0RlZmluZWQsXG4gICAgJ2lzU3RyaW5nJzogaXNTdHJpbmcsXG4gICAgJ2lzRnVuY3Rpb24nOiBpc0Z1bmN0aW9uLFxuICAgICdpc09iamVjdCc6IGlzT2JqZWN0LFxuICAgICdpc051bWJlcic6IGlzTnVtYmVyLFxuICAgICdpc0VsZW1lbnQnOiBpc0VsZW1lbnQsXG4gICAgJ2lzQXJyYXknOiBpc0FycmF5LFxuICAgICd2ZXJzaW9uJzogdmVyc2lvbixcbiAgICAnaXNEYXRlJzogaXNEYXRlLFxuICAgICdsb3dlcmNhc2UnOiBsb3dlcmNhc2UsXG4gICAgJ3VwcGVyY2FzZSc6IHVwcGVyY2FzZSxcbiAgICAnY2FsbGJhY2tzJzogeyQkY291bnRlcjogMH0sXG4gICAgJ2dldFRlc3RhYmlsaXR5JzogZ2V0VGVzdGFiaWxpdHksXG4gICAgJ3JlbG9hZFdpdGhEZWJ1Z0luZm8nOiByZWxvYWRXaXRoRGVidWdJbmZvLFxuICAgICckJG1pbkVycic6IG1pbkVycixcbiAgICAnJCRjc3AnOiBjc3AsXG4gICAgJyQkZW5jb2RlVXJpU2VnbWVudCc6IGVuY29kZVVyaVNlZ21lbnQsXG4gICAgJyQkZW5jb2RlVXJpUXVlcnknOiBlbmNvZGVVcmlRdWVyeSxcbiAgICAnJCRzdHJpbmdpZnknOiBzdHJpbmdpZnlcbiAgfSk7XG5cbiAgYW5ndWxhck1vZHVsZSA9IHNldHVwTW9kdWxlTG9hZGVyKHdpbmRvdyk7XG5cbiAgYW5ndWxhck1vZHVsZSgnbmcnLCBbJ25nTG9jYWxlJ10sIFsnJHByb3ZpZGUnLFxuICAgIGZ1bmN0aW9uIG5nTW9kdWxlKCRwcm92aWRlKSB7XG4gICAgICAvLyAkJHNhbml0aXplVXJpUHJvdmlkZXIgbmVlZHMgdG8gYmUgYmVmb3JlICRjb21waWxlUHJvdmlkZXIgYXMgaXQgaXMgdXNlZCBieSBpdC5cbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKHtcbiAgICAgICAgJCRzYW5pdGl6ZVVyaTogJCRTYW5pdGl6ZVVyaVByb3ZpZGVyXG4gICAgICB9KTtcbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKCckY29tcGlsZScsICRDb21waWxlUHJvdmlkZXIpLlxuICAgICAgICBkaXJlY3RpdmUoe1xuICAgICAgICAgICAgYTogaHRtbEFuY2hvckRpcmVjdGl2ZSxcbiAgICAgICAgICAgIGlucHV0OiBpbnB1dERpcmVjdGl2ZSxcbiAgICAgICAgICAgIHRleHRhcmVhOiBpbnB1dERpcmVjdGl2ZSxcbiAgICAgICAgICAgIGZvcm06IGZvcm1EaXJlY3RpdmUsXG4gICAgICAgICAgICBzY3JpcHQ6IHNjcmlwdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIHNlbGVjdDogc2VsZWN0RGlyZWN0aXZlLFxuICAgICAgICAgICAgb3B0aW9uOiBvcHRpb25EaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0JpbmQ6IG5nQmluZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQmluZEh0bWw6IG5nQmluZEh0bWxEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0JpbmRUZW1wbGF0ZTogbmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0NsYXNzOiBuZ0NsYXNzRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDbGFzc0V2ZW46IG5nQ2xhc3NFdmVuRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDbGFzc09kZDogbmdDbGFzc09kZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2xvYWs6IG5nQ2xvYWtEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0NvbnRyb2xsZXI6IG5nQ29udHJvbGxlckRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nRm9ybTogbmdGb3JtRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdIaWRlOiBuZ0hpZGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0lmOiBuZ0lmRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdJbmNsdWRlOiBuZ0luY2x1ZGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0luaXQ6IG5nSW5pdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTm9uQmluZGFibGU6IG5nTm9uQmluZGFibGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1BsdXJhbGl6ZTogbmdQbHVyYWxpemVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1JlcGVhdDogbmdSZXBlYXREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1Nob3c6IG5nU2hvd0RpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nU3R5bGU6IG5nU3R5bGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N3aXRjaDogbmdTd2l0Y2hEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N3aXRjaFdoZW46IG5nU3dpdGNoV2hlbkRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nU3dpdGNoRGVmYXVsdDogbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdPcHRpb25zOiBuZ09wdGlvbnNEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1RyYW5zY2x1ZGU6IG5nVHJhbnNjbHVkZURpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTW9kZWw6IG5nTW9kZWxEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0xpc3Q6IG5nTGlzdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2hhbmdlOiBuZ0NoYW5nZURpcmVjdGl2ZSxcbiAgICAgICAgICAgIHBhdHRlcm46IHBhdHRlcm5EaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1BhdHRlcm46IHBhdHRlcm5EaXJlY3RpdmUsXG4gICAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1JlcXVpcmVkOiByZXF1aXJlZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG1pbmxlbmd0aDogbWlubGVuZ3RoRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdNaW5sZW5ndGg6IG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG1heGxlbmd0aDogbWF4bGVuZ3RoRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdNYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nVmFsdWU6IG5nVmFsdWVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ01vZGVsT3B0aW9uczogbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmVcbiAgICAgICAgfSkuXG4gICAgICAgIGRpcmVjdGl2ZSh7XG4gICAgICAgICAgbmdJbmNsdWRlOiBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZVxuICAgICAgICB9KS5cbiAgICAgICAgZGlyZWN0aXZlKG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzKS5cbiAgICAgICAgZGlyZWN0aXZlKG5nRXZlbnREaXJlY3RpdmVzKTtcbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKHtcbiAgICAgICAgJGFuY2hvclNjcm9sbDogJEFuY2hvclNjcm9sbFByb3ZpZGVyLFxuICAgICAgICAkYW5pbWF0ZTogJEFuaW1hdGVQcm92aWRlcixcbiAgICAgICAgJGFuaW1hdGVDc3M6ICRDb3JlQW5pbWF0ZUNzc1Byb3ZpZGVyLFxuICAgICAgICAkJGFuaW1hdGVKczogJCRDb3JlQW5pbWF0ZUpzUHJvdmlkZXIsXG4gICAgICAgICQkYW5pbWF0ZVF1ZXVlOiAkJENvcmVBbmltYXRlUXVldWVQcm92aWRlcixcbiAgICAgICAgJCRBbmltYXRlUnVubmVyOiAkJEFuaW1hdGVSdW5uZXJGYWN0b3J5UHJvdmlkZXIsXG4gICAgICAgICQkYW5pbWF0ZUFzeW5jUnVuOiAkJEFuaW1hdGVBc3luY1J1bkZhY3RvcnlQcm92aWRlcixcbiAgICAgICAgJGJyb3dzZXI6ICRCcm93c2VyUHJvdmlkZXIsXG4gICAgICAgICRjYWNoZUZhY3Rvcnk6ICRDYWNoZUZhY3RvcnlQcm92aWRlcixcbiAgICAgICAgJGNvbnRyb2xsZXI6ICRDb250cm9sbGVyUHJvdmlkZXIsXG4gICAgICAgICRkb2N1bWVudDogJERvY3VtZW50UHJvdmlkZXIsXG4gICAgICAgICQkaXNEb2N1bWVudEhpZGRlbjogJCRJc0RvY3VtZW50SGlkZGVuUHJvdmlkZXIsXG4gICAgICAgICRleGNlcHRpb25IYW5kbGVyOiAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyLFxuICAgICAgICAkZmlsdGVyOiAkRmlsdGVyUHJvdmlkZXIsXG4gICAgICAgICQkZm9yY2VSZWZsb3c6ICQkRm9yY2VSZWZsb3dQcm92aWRlcixcbiAgICAgICAgJGludGVycG9sYXRlOiAkSW50ZXJwb2xhdGVQcm92aWRlcixcbiAgICAgICAgJGludGVydmFsOiAkSW50ZXJ2YWxQcm92aWRlcixcbiAgICAgICAgJGh0dHA6ICRIdHRwUHJvdmlkZXIsXG4gICAgICAgICRodHRwUGFyYW1TZXJpYWxpemVyOiAkSHR0cFBhcmFtU2VyaWFsaXplclByb3ZpZGVyLFxuICAgICAgICAkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZTogJEh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VQcm92aWRlcixcbiAgICAgICAgJGh0dHBCYWNrZW5kOiAkSHR0cEJhY2tlbmRQcm92aWRlcixcbiAgICAgICAgJHhockZhY3Rvcnk6ICR4aHJGYWN0b3J5UHJvdmlkZXIsXG4gICAgICAgICRqc29ucENhbGxiYWNrczogJGpzb25wQ2FsbGJhY2tzUHJvdmlkZXIsXG4gICAgICAgICRsb2NhdGlvbjogJExvY2F0aW9uUHJvdmlkZXIsXG4gICAgICAgICRsb2c6ICRMb2dQcm92aWRlcixcbiAgICAgICAgJHBhcnNlOiAkUGFyc2VQcm92aWRlcixcbiAgICAgICAgJHJvb3RTY29wZTogJFJvb3RTY29wZVByb3ZpZGVyLFxuICAgICAgICAkcTogJFFQcm92aWRlcixcbiAgICAgICAgJCRxOiAkJFFQcm92aWRlcixcbiAgICAgICAgJHNjZTogJFNjZVByb3ZpZGVyLFxuICAgICAgICAkc2NlRGVsZWdhdGU6ICRTY2VEZWxlZ2F0ZVByb3ZpZGVyLFxuICAgICAgICAkc25pZmZlcjogJFNuaWZmZXJQcm92aWRlcixcbiAgICAgICAgJHRlbXBsYXRlQ2FjaGU6ICRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIsXG4gICAgICAgICR0ZW1wbGF0ZVJlcXVlc3Q6ICRUZW1wbGF0ZVJlcXVlc3RQcm92aWRlcixcbiAgICAgICAgJCR0ZXN0YWJpbGl0eTogJCRUZXN0YWJpbGl0eVByb3ZpZGVyLFxuICAgICAgICAkdGltZW91dDogJFRpbWVvdXRQcm92aWRlcixcbiAgICAgICAgJHdpbmRvdzogJFdpbmRvd1Byb3ZpZGVyLFxuICAgICAgICAkJHJBRjogJCRSQUZQcm92aWRlcixcbiAgICAgICAgJCRqcUxpdGU6ICQkanFMaXRlUHJvdmlkZXIsXG4gICAgICAgICQkTWFwOiAkJE1hcFByb3ZpZGVyLFxuICAgICAgICAkJGNvb2tpZVJlYWRlcjogJCRDb29raWVSZWFkZXJQcm92aWRlclxuICAgICAgfSk7XG4gICAgfVxuICBdKVxuICAuaW5mbyh7IGFuZ3VsYXJWZXJzaW9uOiAnMS42LjknIH0pO1xufVxuXG4vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqXG4gKiAgICAgQW55IGNvbW1pdHMgdG8gdGhpcyBmaWxlIHNob3VsZCBiZSByZXZpZXdlZCB3aXRoIHNlY3VyaXR5IGluIG1pbmQuICAqXG4gKiAgIENoYW5nZXMgdG8gdGhpcyBmaWxlIGNhbiBwb3RlbnRpYWxseSBjcmVhdGUgc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzLiAqXG4gKiAgICAgICAgICBBbiBhcHByb3ZhbCBmcm9tIDIgQ29yZSBtZW1iZXJzIHdpdGggaGlzdG9yeSBvZiBtb2RpZnlpbmcgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIGZpbGUgaXMgcmVxdWlyZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgRG9lcyB0aGUgY2hhbmdlIHNvbWVob3cgYWxsb3cgZm9yIGFyYml0cmFyeSBqYXZhc2NyaXB0IHRvIGJlIGV4ZWN1dGVkPyAqXG4gKiAgICBPciBhbGxvd3MgZm9yIHNvbWVvbmUgdG8gY2hhbmdlIHRoZSBwcm90b3R5cGUgb2YgYnVpbHQtaW4gb2JqZWN0cz8gICAqXG4gKiAgICAgT3IgZ2l2ZXMgdW5kZXNpcmVkIGFjY2VzcyB0byB2YXJpYWJsZXMgbGlrZXMgZG9jdW1lbnQgb3Igd2luZG93PyAgICAqXG4gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqL1xuXG4vKiBnbG9iYWxcbiAgSlFMaXRlUHJvdG90eXBlOiB0cnVlLFxuICBCT09MRUFOX0FUVFI6IHRydWUsXG4gIEFMSUFTRURfQVRUUjogdHJ1ZVxuKi9cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy9KUUxpdGVcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZWxlbWVudFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFdyYXBzIGEgcmF3IERPTSBlbGVtZW50IG9yIEhUTUwgc3RyaW5nIGFzIGEgW2pRdWVyeV0oaHR0cDovL2pxdWVyeS5jb20pIGVsZW1lbnQuXG4gKlxuICogSWYgalF1ZXJ5IGlzIGF2YWlsYWJsZSwgYGFuZ3VsYXIuZWxlbWVudGAgaXMgYW4gYWxpYXMgZm9yIHRoZVxuICogW2pRdWVyeV0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2pRdWVyeS8pIGZ1bmN0aW9uLiBJZiBqUXVlcnkgaXMgbm90IGF2YWlsYWJsZSwgYGFuZ3VsYXIuZWxlbWVudGBcbiAqIGRlbGVnYXRlcyB0byBBbmd1bGFySlMncyBidWlsdC1pbiBzdWJzZXQgb2YgalF1ZXJ5LCBjYWxsZWQgXCJqUXVlcnkgbGl0ZVwiIG9yICoqanFMaXRlKiouXG4gKlxuICoganFMaXRlIGlzIGEgdGlueSwgQVBJLWNvbXBhdGlibGUgc3Vic2V0IG9mIGpRdWVyeSB0aGF0IGFsbG93c1xuICogQW5ndWxhckpTIHRvIG1hbmlwdWxhdGUgdGhlIERPTSBpbiBhIGNyb3NzLWJyb3dzZXIgY29tcGF0aWJsZSB3YXkuIGpxTGl0ZSBpbXBsZW1lbnRzIG9ubHkgdGhlIG1vc3RcbiAqIGNvbW1vbmx5IG5lZWRlZCBmdW5jdGlvbmFsaXR5IHdpdGggdGhlIGdvYWwgb2YgaGF2aW5nIGEgdmVyeSBzbWFsbCBmb290cHJpbnQuXG4gKlxuICogVG8gdXNlIGBqUXVlcnlgLCBzaW1wbHkgZW5zdXJlIGl0IGlzIGxvYWRlZCBiZWZvcmUgdGhlIGBhbmd1bGFyLmpzYCBmaWxlLiBZb3UgY2FuIGFsc28gdXNlIHRoZVxuICoge0BsaW5rIG5nSnEgYG5nSnFgfSBkaXJlY3RpdmUgdG8gc3BlY2lmeSB0aGF0IGpxbGl0ZSBzaG91bGQgYmUgdXNlZCBvdmVyIGpRdWVyeSwgb3IgdG8gdXNlIGFcbiAqIHNwZWNpZmljIHZlcnNpb24gb2YgalF1ZXJ5IGlmIG11bHRpcGxlIHZlcnNpb25zIGV4aXN0IG9uIHRoZSBwYWdlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+KipOb3RlOioqIEFsbCBlbGVtZW50IHJlZmVyZW5jZXMgaW4gQW5ndWxhckpTIGFyZSBhbHdheXMgd3JhcHBlZCB3aXRoIGpRdWVyeSBvclxuICoganFMaXRlIChzdWNoIGFzIHRoZSBlbGVtZW50IGFyZ3VtZW50IGluIGEgZGlyZWN0aXZlJ3MgY29tcGlsZSAvIGxpbmsgZnVuY3Rpb24pLiBUaGV5IGFyZSBuZXZlciByYXcgRE9NIHJlZmVyZW5jZXMuPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj4qKk5vdGU6KiogS2VlcCBpbiBtaW5kIHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIG5vdCBmaW5kIGVsZW1lbnRzXG4gKiBieSB0YWcgbmFtZSAvIENTUyBzZWxlY3Rvci4gRm9yIGxvb2t1cHMgYnkgdGFnIG5hbWUsIHRyeSBpbnN0ZWFkIGBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoLi4uKWBcbiAqIG9yIGAkZG9jdW1lbnQuZmluZCgpYCwgb3IgdXNlIHRoZSBzdGFuZGFyZCBET00gQVBJcywgZS5nLiBgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgpYC48L2Rpdj5cbiAqXG4gKiAjIyBBbmd1bGFySlMncyBqcUxpdGVcbiAqIGpxTGl0ZSBwcm92aWRlcyBvbmx5IHRoZSBmb2xsb3dpbmcgalF1ZXJ5IG1ldGhvZHM6XG4gKlxuICogLSBbYGFkZENsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYWRkQ2xhc3MvKSAtIERvZXMgbm90IHN1cHBvcnQgYSBmdW5jdGlvbiBhcyBmaXJzdCBhcmd1bWVudFxuICogLSBbYGFmdGVyKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYWZ0ZXIvKVxuICogLSBbYGFwcGVuZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FwcGVuZC8pXG4gKiAtIFtgYXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2F0dHIvKSAtIERvZXMgbm90IHN1cHBvcnQgZnVuY3Rpb25zIGFzIHBhcmFtZXRlcnNcbiAqIC0gW2BiaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYmluZC8pIChfZGVwcmVjYXRlZF8sIHVzZSBbYG9uKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vb24vKSkgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMsIHNlbGVjdG9ycyBvciBldmVudERhdGFcbiAqIC0gW2BjaGlsZHJlbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NoaWxkcmVuLykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xuICogLSBbYGNsb25lKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vY2xvbmUvKVxuICogLSBbYGNvbnRlbnRzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vY29udGVudHMvKVxuICogLSBbYGNzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2Nzcy8pIC0gT25seSByZXRyaWV2ZXMgaW5saW5lLXN0eWxlcywgZG9lcyBub3QgY2FsbCBgZ2V0Q29tcHV0ZWRTdHlsZSgpYC5cbiAqICAgQXMgYSBzZXR0ZXIsIGRvZXMgbm90IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdzIG9yIGFwcGVuZCAncHgnLCBhbmQgYWxzbyBkb2VzIG5vdCBoYXZlIGF1dG9tYXRpYyBwcm9wZXJ0eSBwcmVmaXhpbmcuXG4gKiAtIFtgZGF0YSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2RhdGEvKVxuICogLSBbYGRldGFjaCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2RldGFjaC8pXG4gKiAtIFtgZW1wdHkoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lbXB0eS8pXG4gKiAtIFtgZXEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lcS8pXG4gKiAtIFtgZmluZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2ZpbmQvKSAtIExpbWl0ZWQgdG8gbG9va3VwcyBieSB0YWcgbmFtZVxuICogLSBbYGhhc0NsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vaGFzQ2xhc3MvKVxuICogLSBbYGh0bWwoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9odG1sLylcbiAqIC0gW2BuZXh0KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vbmV4dC8pIC0gRG9lcyBub3Qgc3VwcG9ydCBzZWxlY3RvcnNcbiAqIC0gW2BvbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29uLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMsIHNlbGVjdG9ycyBvciBldmVudERhdGFcbiAqIC0gW2BvZmYoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmYvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcywgc2VsZWN0b3JzIG9yIGV2ZW50IG9iamVjdCBhcyBwYXJhbWV0ZXJcbiAqIC0gW2BvbmUoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vbmUvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcyBvciBzZWxlY3RvcnNcbiAqIC0gW2BwYXJlbnQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wYXJlbnQvKSAtIERvZXMgbm90IHN1cHBvcnQgc2VsZWN0b3JzXG4gKiAtIFtgcHJlcGVuZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ByZXBlbmQvKVxuICogLSBbYHByb3AoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wcm9wLylcbiAqIC0gW2ByZWFkeSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlYWR5LykgKF9kZXByZWNhdGVkXywgdXNlIGBhbmd1bGFyLmVsZW1lbnQoY2FsbGJhY2spYCBpbnN0ZWFkIG9mIGBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGNhbGxiYWNrKWApXG4gKiAtIFtgcmVtb3ZlKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlLylcbiAqIC0gW2ByZW1vdmVBdHRyKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlQXR0ci8pIC0gRG9lcyBub3Qgc3VwcG9ydCBtdWx0aXBsZSBhdHRyaWJ1dGVzXG4gKiAtIFtgcmVtb3ZlQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmVDbGFzcy8pIC0gRG9lcyBub3Qgc3VwcG9ydCBhIGZ1bmN0aW9uIGFzIGZpcnN0IGFyZ3VtZW50XG4gKiAtIFtgcmVtb3ZlRGF0YSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZURhdGEvKVxuICogLSBbYHJlcGxhY2VXaXRoKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVwbGFjZVdpdGgvKVxuICogLSBbYHRleHQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90ZXh0LylcbiAqIC0gW2B0b2dnbGVDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3RvZ2dsZUNsYXNzLykgLSBEb2VzIG5vdCBzdXBwb3J0IGEgZnVuY3Rpb24gYXMgZmlyc3QgYXJndW1lbnRcbiAqIC0gW2B0cmlnZ2VySGFuZGxlcigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3RyaWdnZXJIYW5kbGVyLykgLSBQYXNzZXMgYSBkdW1teSBldmVudCBvYmplY3QgdG8gaGFuZGxlcnNcbiAqIC0gW2B1bmJpbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS91bmJpbmQvKSAoX2RlcHJlY2F0ZWRfLCB1c2UgW2BvZmYoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmYvKSkgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMgb3IgZXZlbnQgb2JqZWN0IGFzIHBhcmFtZXRlclxuICogLSBbYHZhbCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ZhbC8pXG4gKiAtIFtgd3JhcCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3dyYXAvKVxuICpcbiAqICMjIGpRdWVyeS9qcUxpdGUgRXh0cmFzXG4gKiBBbmd1bGFySlMgYWxzbyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgZXZlbnRzIHRvIGJvdGggalF1ZXJ5IGFuZCBqcUxpdGU6XG4gKlxuICogIyMjIEV2ZW50c1xuICogLSBgJGRlc3Ryb3lgIC0gQW5ndWxhckpTIGludGVyY2VwdHMgYWxsIGpxTGl0ZS9qUXVlcnkncyBET00gZGVzdHJ1Y3Rpb24gYXBpcyBhbmQgZmlyZXMgdGhpcyBldmVudFxuICogICAgb24gYWxsIERPTSBub2RlcyBiZWluZyByZW1vdmVkLiAgVGhpcyBjYW4gYmUgdXNlZCB0byBjbGVhbiB1cCBhbnkgM3JkIHBhcnR5IGJpbmRpbmdzIHRvIHRoZSBET01cbiAqICAgIGVsZW1lbnQgYmVmb3JlIGl0IGlzIHJlbW92ZWQuXG4gKlxuICogIyMjIE1ldGhvZHNcbiAqIC0gYGNvbnRyb2xsZXIobmFtZSlgIC0gcmV0cmlldmVzIHRoZSBjb250cm9sbGVyIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC4gQnkgZGVmYXVsdFxuICogICByZXRyaWV2ZXMgY29udHJvbGxlciBhc3NvY2lhdGVkIHdpdGggdGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZS4gSWYgYG5hbWVgIGlzIHByb3ZpZGVkIGFzXG4gKiAgIGNhbWVsQ2FzZSBkaXJlY3RpdmUgbmFtZSwgdGhlbiB0aGUgY29udHJvbGxlciBmb3IgdGhpcyBkaXJlY3RpdmUgd2lsbCBiZSByZXRyaWV2ZWQgKGUuZy5cbiAqICAgYCduZ01vZGVsJ2ApLlxuICogLSBgaW5qZWN0b3IoKWAgLSByZXRyaWV2ZXMgdGhlIGluamVjdG9yIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC5cbiAqIC0gYHNjb3BlKClgIC0gcmV0cmlldmVzIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0gb2YgdGhlIGN1cnJlbnRcbiAqICAgZWxlbWVudCBvciBpdHMgcGFyZW50LiBSZXF1aXJlcyB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEZWJ1ZyBEYXRhfSB0b1xuICogICBiZSBlbmFibGVkLlxuICogLSBgaXNvbGF0ZVNjb3BlKClgIC0gcmV0cmlldmVzIGFuIGlzb2xhdGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9IGlmIG9uZSBpcyBhdHRhY2hlZCBkaXJlY3RseSB0byB0aGVcbiAqICAgY3VycmVudCBlbGVtZW50LiBUaGlzIGdldHRlciBzaG91bGQgYmUgdXNlZCBvbmx5IG9uIGVsZW1lbnRzIHRoYXQgY29udGFpbiBhIGRpcmVjdGl2ZSB3aGljaCBzdGFydHMgYSBuZXcgaXNvbGF0ZVxuICogICBzY29wZS4gQ2FsbGluZyBgc2NvcGUoKWAgb24gdGhpcyBlbGVtZW50IGFsd2F5cyByZXR1cm5zIHRoZSBvcmlnaW5hbCBub24taXNvbGF0ZSBzY29wZS5cbiAqICAgUmVxdWlyZXMge0BsaW5rIGd1aWRlL3Byb2R1Y3Rpb24jZGlzYWJsaW5nLWRlYnVnLWRhdGEgRGVidWcgRGF0YX0gdG8gYmUgZW5hYmxlZC5cbiAqIC0gYGluaGVyaXRlZERhdGEoKWAgLSBzYW1lIGFzIGBkYXRhKClgLCBidXQgd2Fsa3MgdXAgdGhlIERPTSB1bnRpbCBhIHZhbHVlIGlzIGZvdW5kIG9yIHRoZSB0b3BcbiAqICAgcGFyZW50IGVsZW1lbnQgaXMgcmVhY2hlZC5cbiAqXG4gKiBAa25vd25Jc3N1ZSBZb3UgY2Fubm90IHNweSBvbiBgYW5ndWxhci5lbGVtZW50YCBpZiB5b3UgYXJlIHVzaW5nIEphc21pbmUgdmVyc2lvbiAxLnguIFNlZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTQyNTEgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RE9NRWxlbWVudH0gZWxlbWVudCBIVE1MIHN0cmluZyBvciBET01FbGVtZW50IHRvIGJlIHdyYXBwZWQgaW50byBqUXVlcnkuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBqUXVlcnkgb2JqZWN0LlxuICovXG5cbkpRTGl0ZS5leHBhbmRvID0gJ25nMzM5JztcblxudmFyIGpxQ2FjaGUgPSBKUUxpdGUuY2FjaGUgPSB7fSxcbiAgICBqcUlkID0gMTtcblxuLypcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBmdW5jdGlvbiAhISFcbiAqL1xuSlFMaXRlLl9kYXRhID0gZnVuY3Rpb24obm9kZSkge1xuICAvL2pRdWVyeSBhbHdheXMgcmV0dXJucyBhbiBvYmplY3Qgb24gY2FjaGUgbWlzc1xuICByZXR1cm4gdGhpcy5jYWNoZVtub2RlW3RoaXMuZXhwYW5kb11dIHx8IHt9O1xufTtcblxuZnVuY3Rpb24ganFOZXh0SWQoKSB7IHJldHVybiArK2pxSWQ7IH1cblxuXG52YXIgREFTSF9MT1dFUkNBU0VfUkVHRVhQID0gLy0oW2Etel0pL2c7XG52YXIgTVNfSEFDS19SRUdFWFAgPSAvXi1tcy0vO1xudmFyIE1PVVNFX0VWRU5UX01BUCA9IHsgbW91c2VsZWF2ZTogJ21vdXNlb3V0JywgbW91c2VlbnRlcjogJ21vdXNlb3ZlcicgfTtcbnZhciBqcUxpdGVNaW5FcnIgPSBtaW5FcnIoJ2pxTGl0ZScpO1xuXG4vKipcbiAqIENvbnZlcnRzIGtlYmFiLWNhc2UgdG8gY2FtZWxDYXNlLlxuICogVGhlcmUgaXMgYWxzbyBhIHNwZWNpYWwgY2FzZSBmb3IgdGhlIG1zIHByZWZpeCBzdGFydGluZyB3aXRoIGEgbG93ZXJjYXNlIGxldHRlci5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGNzc0tlYmFiVG9DYW1lbChuYW1lKSB7XG4gICAgcmV0dXJuIGtlYmFiVG9DYW1lbChuYW1lLnJlcGxhY2UoTVNfSEFDS19SRUdFWFAsICdtcy0nKSk7XG59XG5cbmZ1bmN0aW9uIGZuQ2FtZWxDYXNlUmVwbGFjZShhbGwsIGxldHRlcikge1xuICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ29udmVydHMga2ViYWItY2FzZSB0byBjYW1lbENhc2UuXG4gKiBAcGFyYW0gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxuICovXG5mdW5jdGlvbiBrZWJhYlRvQ2FtZWwobmFtZSkge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKERBU0hfTE9XRVJDQVNFX1JFR0VYUCwgZm5DYW1lbENhc2VSZXBsYWNlKTtcbn1cblxudmFyIFNJTkdMRV9UQUdfUkVHRVhQID0gL148KFtcXHctXSspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvO1xudmFyIEhUTUxfUkVHRVhQID0gLzx8JiM/XFx3KzsvO1xudmFyIFRBR19OQU1FX1JFR0VYUCA9IC88KFtcXHc6LV0rKS87XG52YXIgWEhUTUxfVEFHX1JFR0VYUCA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6LV0rKVtePl0qKVxcLz4vZ2k7XG5cbnZhciB3cmFwTWFwID0ge1xuICAnb3B0aW9uJzogWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J10sXG5cbiAgJ3RoZWFkJzogWzEsICc8dGFibGU+JywgJzwvdGFibGU+J10sXG4gICdjb2wnOiBbMiwgJzx0YWJsZT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcbiAgJ3RyJzogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gICd0ZCc6IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddLFxuICAnX2RlZmF1bHQnOiBbMCwgJycsICcnXVxufTtcblxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xud3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDtcbndyYXBNYXAudGggPSB3cmFwTWFwLnRkO1xuXG5cbmZ1bmN0aW9uIGpxTGl0ZUlzVGV4dE5vZGUoaHRtbCkge1xuICByZXR1cm4gIUhUTUxfUkVHRVhQLnRlc3QoaHRtbCk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUFjY2VwdHNEYXRhKG5vZGUpIHtcbiAgLy8gVGhlIHdpbmRvdyBvYmplY3QgY2FuIGFjY2VwdCBkYXRhIGJ1dCBoYXMgbm8gbm9kZVR5cGVcbiAgLy8gT3RoZXJ3aXNlIHdlIGFyZSBvbmx5IGludGVyZXN0ZWQgaW4gZWxlbWVudHMgKDEpIGFuZCBkb2N1bWVudHMgKDkpXG4gIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gIHJldHVybiBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQgfHwgIW5vZGVUeXBlIHx8IG5vZGVUeXBlID09PSBOT0RFX1RZUEVfRE9DVU1FTlQ7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUhhc0RhdGEobm9kZSkge1xuICBmb3IgKHZhciBrZXkgaW4ganFDYWNoZVtub2RlLm5nMzM5XSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSB7XG4gIHZhciB0bXAsIHRhZywgd3JhcCxcbiAgICAgIGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBub2RlcyA9IFtdLCBpO1xuXG4gIGlmIChqcUxpdGVJc1RleHROb2RlKGh0bWwpKSB7XG4gICAgLy8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG4gICAgbm9kZXMucHVzaChjb250ZXh0LmNyZWF0ZVRleHROb2RlKGh0bWwpKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcbiAgICB0bXAgPSBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZXh0LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICB0YWcgPSAoVEFHX05BTUVfUkVHRVhQLmV4ZWMoaHRtbCkgfHwgWycnLCAnJ10pWzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgd3JhcCA9IHdyYXBNYXBbdGFnXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuICAgIHRtcC5pbm5lckhUTUwgPSB3cmFwWzFdICsgaHRtbC5yZXBsYWNlKFhIVE1MX1RBR19SRUdFWFAsICc8JDE+PC8kMj4nKSArIHdyYXBbMl07XG5cbiAgICAvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcbiAgICBpID0gd3JhcFswXTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0bXAgPSB0bXAubGFzdENoaWxkO1xuICAgIH1cblxuICAgIG5vZGVzID0gY29uY2F0KG5vZGVzLCB0bXAuY2hpbGROb2Rlcyk7XG5cbiAgICB0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuICAgIHRtcC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuICBmcmFnbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICBmcmFnbWVudC5pbm5lckhUTUwgPSAnJzsgLy8gQ2xlYXIgaW5uZXIgSFRNTFxuICBmb3JFYWNoKG5vZGVzLCBmdW5jdGlvbihub2RlKSB7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIH0pO1xuXG4gIHJldHVybiBmcmFnbWVudDtcbn1cblxuZnVuY3Rpb24ganFMaXRlUGFyc2VIVE1MKGh0bWwsIGNvbnRleHQpIHtcbiAgY29udGV4dCA9IGNvbnRleHQgfHwgd2luZG93LmRvY3VtZW50O1xuICB2YXIgcGFyc2VkO1xuXG4gIGlmICgocGFyc2VkID0gU0lOR0xFX1RBR19SRUdFWFAuZXhlYyhodG1sKSkpIHtcbiAgICByZXR1cm4gW2NvbnRleHQuY3JlYXRlRWxlbWVudChwYXJzZWRbMV0pXTtcbiAgfVxuXG4gIGlmICgocGFyc2VkID0ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSkpIHtcbiAgICByZXR1cm4gcGFyc2VkLmNoaWxkTm9kZXM7XG4gIH1cblxuICByZXR1cm4gW107XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVdyYXBOb2RlKG5vZGUsIHdyYXBwZXIpIHtcbiAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcblxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBub2RlKTtcbiAgfVxuXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5cblxuLy8gSUU5LTExIGhhcyBubyBtZXRob2QgXCJjb250YWluc1wiIGluIFNWRyBlbGVtZW50IGFuZCBpbiBOb2RlLnByb3RvdHlwZS4gQnVnICMxMDI1OS5cbnZhciBqcUxpdGVDb250YWlucyA9IHdpbmRvdy5Ob2RlLnByb3RvdHlwZS5jb250YWlucyB8fCAvKiogQHRoaXMgKi8gZnVuY3Rpb24oYXJnKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gIHJldHVybiAhISh0aGlzLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGFyZykgJiAxNik7XG59O1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIEpRTGl0ZShlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSlFMaXRlKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICB2YXIgYXJnSXNTdHJpbmc7XG5cbiAgaWYgKGlzU3RyaW5nKGVsZW1lbnQpKSB7XG4gICAgZWxlbWVudCA9IHRyaW0oZWxlbWVudCk7XG4gICAgYXJnSXNTdHJpbmcgPSB0cnVlO1xuICB9XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBKUUxpdGUpKSB7XG4gICAgaWYgKGFyZ0lzU3RyaW5nICYmIGVsZW1lbnQuY2hhckF0KDApICE9PSAnPCcpIHtcbiAgICAgIHRocm93IGpxTGl0ZU1pbkVycignbm9zZWwnLCAnTG9va2luZyB1cCBlbGVtZW50cyB2aWEgc2VsZWN0b3JzIGlzIG5vdCBzdXBwb3J0ZWQgYnkganFMaXRlISBTZWU6IGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2FuZ3VsYXIuZWxlbWVudCcpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEpRTGl0ZShlbGVtZW50KTtcbiAgfVxuXG4gIGlmIChhcmdJc1N0cmluZykge1xuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGpxTGl0ZVBhcnNlSFRNTChlbGVtZW50KSk7XG4gIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihlbGVtZW50KSkge1xuICAgIGpxTGl0ZVJlYWR5KGVsZW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGVsZW1lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUNsb25lKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVEZWFsb2MoZWxlbWVudCwgb25seURlc2NlbmRhbnRzKSB7XG4gIGlmICghb25seURlc2NlbmRhbnRzICYmIGpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSBqcUxpdGUuY2xlYW5EYXRhKFtlbGVtZW50XSk7XG5cbiAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCkge1xuICAgIGpxTGl0ZS5jbGVhbkRhdGEoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZU9mZihlbGVtZW50LCB0eXBlLCBmbiwgdW5zdXBwb3J0ZWQpIHtcbiAgaWYgKGlzRGVmaW5lZCh1bnN1cHBvcnRlZCkpIHRocm93IGpxTGl0ZU1pbkVycignb2ZmYXJncycsICdqcUxpdGUjb2ZmKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBhcmd1bWVudCcpO1xuXG4gIHZhciBleHBhbmRvU3RvcmUgPSBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCk7XG4gIHZhciBldmVudHMgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmV2ZW50cztcbiAgdmFyIGhhbmRsZSA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuaGFuZGxlO1xuXG4gIGlmICghaGFuZGxlKSByZXR1cm47IC8vbm8gbGlzdGVuZXJzIHJlZ2lzdGVyZWRcblxuICBpZiAoIXR5cGUpIHtcbiAgICBmb3IgKHR5cGUgaW4gZXZlbnRzKSB7XG4gICAgICBpZiAodHlwZSAhPT0gJyRkZXN0cm95Jykge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgfVxuICB9IGVsc2Uge1xuXG4gICAgdmFyIHJlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJGbnMgPSBldmVudHNbdHlwZV07XG4gICAgICBpZiAoaXNEZWZpbmVkKGZuKSkge1xuICAgICAgICBhcnJheVJlbW92ZShsaXN0ZW5lckZucyB8fCBbXSwgZm4pO1xuICAgICAgfVxuICAgICAgaWYgKCEoaXNEZWZpbmVkKGZuKSAmJiBsaXN0ZW5lckZucyAmJiBsaXN0ZW5lckZucy5sZW5ndGggPiAwKSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlKTtcbiAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yRWFjaCh0eXBlLnNwbGl0KCcgJyksIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgIHJlbW92ZUhhbmRsZXIodHlwZSk7XG4gICAgICBpZiAoTU9VU0VfRVZFTlRfTUFQW3R5cGVdKSB7XG4gICAgICAgIHJlbW92ZUhhbmRsZXIoTU9VU0VfRVZFTlRfTUFQW3R5cGVdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmVEYXRhKGVsZW1lbnQsIG5hbWUpIHtcbiAgdmFyIGV4cGFuZG9JZCA9IGVsZW1lbnQubmczMzk7XG4gIHZhciBleHBhbmRvU3RvcmUgPSBleHBhbmRvSWQgJiYganFDYWNoZVtleHBhbmRvSWRdO1xuXG4gIGlmIChleHBhbmRvU3RvcmUpIHtcbiAgICBpZiAobmFtZSkge1xuICAgICAgZGVsZXRlIGV4cGFuZG9TdG9yZS5kYXRhW25hbWVdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChleHBhbmRvU3RvcmUuaGFuZGxlKSB7XG4gICAgICBpZiAoZXhwYW5kb1N0b3JlLmV2ZW50cy4kZGVzdHJveSkge1xuICAgICAgICBleHBhbmRvU3RvcmUuaGFuZGxlKHt9LCAnJGRlc3Ryb3knKTtcbiAgICAgIH1cbiAgICAgIGpxTGl0ZU9mZihlbGVtZW50KTtcbiAgICB9XG4gICAgZGVsZXRlIGpxQ2FjaGVbZXhwYW5kb0lkXTtcbiAgICBlbGVtZW50Lm5nMzM5ID0gdW5kZWZpbmVkOyAvLyBkb24ndCBkZWxldGUgRE9NIGV4cGFuZG9zLiBJRSBhbmQgQ2hyb21lIGRvbid0IGxpa2UgaXRcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCBjcmVhdGVJZk5lY2Vzc2FyeSkge1xuICB2YXIgZXhwYW5kb0lkID0gZWxlbWVudC5uZzMzOSxcbiAgICAgIGV4cGFuZG9TdG9yZSA9IGV4cGFuZG9JZCAmJiBqcUNhY2hlW2V4cGFuZG9JZF07XG5cbiAgaWYgKGNyZWF0ZUlmTmVjZXNzYXJ5ICYmICFleHBhbmRvU3RvcmUpIHtcbiAgICBlbGVtZW50Lm5nMzM5ID0gZXhwYW5kb0lkID0ganFOZXh0SWQoKTtcbiAgICBleHBhbmRvU3RvcmUgPSBqcUNhY2hlW2V4cGFuZG9JZF0gPSB7ZXZlbnRzOiB7fSwgZGF0YToge30sIGhhbmRsZTogdW5kZWZpbmVkfTtcbiAgfVxuXG4gIHJldHVybiBleHBhbmRvU3RvcmU7XG59XG5cblxuZnVuY3Rpb24ganFMaXRlRGF0YShlbGVtZW50LCBrZXksIHZhbHVlKSB7XG4gIGlmIChqcUxpdGVBY2NlcHRzRGF0YShlbGVtZW50KSkge1xuICAgIHZhciBwcm9wO1xuXG4gICAgdmFyIGlzU2ltcGxlU2V0dGVyID0gaXNEZWZpbmVkKHZhbHVlKTtcbiAgICB2YXIgaXNTaW1wbGVHZXR0ZXIgPSAhaXNTaW1wbGVTZXR0ZXIgJiYga2V5ICYmICFpc09iamVjdChrZXkpO1xuICAgIHZhciBtYXNzR2V0dGVyID0gIWtleTtcbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsICFpc1NpbXBsZUdldHRlcik7XG4gICAgdmFyIGRhdGEgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmRhdGE7XG5cbiAgICBpZiAoaXNTaW1wbGVTZXR0ZXIpIHsgLy8gZGF0YSgna2V5JywgdmFsdWUpXG4gICAgICBkYXRhW2tlYmFiVG9DYW1lbChrZXkpXSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobWFzc0dldHRlcikgeyAgLy8gZGF0YSgpXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzU2ltcGxlR2V0dGVyKSB7IC8vIGRhdGEoJ2tleScpXG4gICAgICAgICAgLy8gZG9uJ3QgZm9yY2UgY3JlYXRpb24gb2YgZXhwYW5kb1N0b3JlIGlmIGl0IGRvZXNuJ3QgZXhpc3QgeWV0XG4gICAgICAgICAgcmV0dXJuIGRhdGEgJiYgZGF0YVtrZWJhYlRvQ2FtZWwoa2V5KV07XG4gICAgICAgIH0gZWxzZSB7IC8vIG1hc3Mtc2V0dGVyOiBkYXRhKHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfSlcbiAgICAgICAgICBmb3IgKHByb3AgaW4ga2V5KSB7XG4gICAgICAgICAgICBkYXRhW2tlYmFiVG9DYW1lbChwcm9wKV0gPSBrZXlbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIGlmICghZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuICgoJyAnICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICcgJykucmVwbGFjZSgvW1xcblxcdF0vZywgJyAnKS5cbiAgICAgIGluZGV4T2YoJyAnICsgc2VsZWN0b3IgKyAnICcpID4gLTEpO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmVDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XG4gIGlmIChjc3NDbGFzc2VzICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XG4gICAgdmFyIGV4aXN0aW5nQ2xhc3NlcyA9ICgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xuICAgIHZhciBuZXdDbGFzc2VzID0gZXhpc3RpbmdDbGFzc2VzO1xuXG4gICAgZm9yRWFjaChjc3NDbGFzc2VzLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNzc0NsYXNzKSB7XG4gICAgICBjc3NDbGFzcyA9IHRyaW0oY3NzQ2xhc3MpO1xuICAgICAgbmV3Q2xhc3NlcyA9IG5ld0NsYXNzZXMucmVwbGFjZSgnICcgKyBjc3NDbGFzcyArICcgJywgJyAnKTtcbiAgICB9KTtcblxuICAgIGlmIChuZXdDbGFzc2VzICE9PSBleGlzdGluZ0NsYXNzZXMpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRyaW0obmV3Q2xhc3NlcykpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVBZGRDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XG4gIGlmIChjc3NDbGFzc2VzICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XG4gICAgdmFyIGV4aXN0aW5nQ2xhc3NlcyA9ICgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xuICAgIHZhciBuZXdDbGFzc2VzID0gZXhpc3RpbmdDbGFzc2VzO1xuXG4gICAgZm9yRWFjaChjc3NDbGFzc2VzLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNzc0NsYXNzKSB7XG4gICAgICBjc3NDbGFzcyA9IHRyaW0oY3NzQ2xhc3MpO1xuICAgICAgaWYgKG5ld0NsYXNzZXMuaW5kZXhPZignICcgKyBjc3NDbGFzcyArICcgJykgPT09IC0xKSB7XG4gICAgICAgIG5ld0NsYXNzZXMgKz0gY3NzQ2xhc3MgKyAnICc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAobmV3Q2xhc3NlcyAhPT0gZXhpc3RpbmdDbGFzc2VzKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB0cmltKG5ld0NsYXNzZXMpKTtcbiAgICB9XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBqcUxpdGVBZGROb2Rlcyhyb290LCBlbGVtZW50cykge1xuICAvLyBUSElTIENPREUgSVMgVkVSWSBIT1QuIERvbid0IG1ha2UgY2hhbmdlcyB3aXRob3V0IGJlbmNobWFya2luZy5cblxuICBpZiAoZWxlbWVudHMpIHtcblxuICAgIC8vIGlmIGEgTm9kZSAodGhlIG1vc3QgY29tbW9uIGNhc2UpXG4gICAgaWYgKGVsZW1lbnRzLm5vZGVUeXBlKSB7XG4gICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cbiAgICAgIC8vIGlmIGFuIEFycmF5IG9yIE5vZGVMaXN0IGFuZCBub3QgYSBXaW5kb3dcbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJyAmJiBlbGVtZW50cy53aW5kb3cgIT09IGVsZW1lbnRzKSB7XG4gICAgICAgIGlmIChsZW5ndGgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuZnVuY3Rpb24ganFMaXRlQ29udHJvbGxlcihlbGVtZW50LCBuYW1lKSB7XG4gIHJldHVybiBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQsICckJyArIChuYW1lIHx8ICduZ0NvbnRyb2xsZXInKSArICdDb250cm9sbGVyJyk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcbiAgLy8gaWYgZWxlbWVudCBpcyB0aGUgZG9jdW1lbnQgb2JqZWN0IHdvcmsgd2l0aCB0aGUgaHRtbCBlbGVtZW50IGluc3RlYWRcbiAgLy8gdGhpcyBtYWtlcyAkKGRvY3VtZW50KS5zY29wZSgpIHBvc3NpYmxlXG4gIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRE9DVU1FTlQpIHtcbiAgICBlbGVtZW50ID0gZWxlbWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cbiAgdmFyIG5hbWVzID0gaXNBcnJheShuYW1lKSA/IG5hbWUgOiBbbmFtZV07XG5cbiAgd2hpbGUgKGVsZW1lbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBuYW1lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlID0ganFMaXRlLmRhdGEoZWxlbWVudCwgbmFtZXNbaV0pKSkgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIElmIGRlYWxpbmcgd2l0aCBhIGRvY3VtZW50IGZyYWdtZW50IG5vZGUgd2l0aCBhIGhvc3QgZWxlbWVudCwgYW5kIG5vIHBhcmVudCwgdXNlIHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBhcyB0aGUgcGFyZW50LiBUaGlzIGVuYWJsZXMgZGlyZWN0aXZlcyB3aXRoaW4gYSBTaGFkb3cgRE9NIG9yIHBvbHlmaWxsZWQgU2hhZG93IERPTVxuICAgIC8vIHRvIGxvb2t1cCBwYXJlbnQgY29udHJvbGxlcnMuXG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UICYmIGVsZW1lbnQuaG9zdCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlRW1wdHkoZWxlbWVudCkge1xuICBqcUxpdGVEZWFsb2MoZWxlbWVudCwgdHJ1ZSk7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlKGVsZW1lbnQsIGtlZXBEYXRhKSB7XG4gIGlmICgha2VlcERhdGEpIGpxTGl0ZURlYWxvYyhlbGVtZW50KTtcbiAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZURvY3VtZW50TG9hZGVkKGFjdGlvbiwgd2luKSB7XG4gIHdpbiA9IHdpbiB8fCB3aW5kb3c7XG4gIGlmICh3aW4uZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgIC8vIEZvcmNlIHRoZSBhY3Rpb24gdG8gYmUgcnVuIGFzeW5jIGZvciBjb25zaXN0ZW50IGJlaGF2aW9yXG4gICAgLy8gZnJvbSB0aGUgYWN0aW9uJ3MgcG9pbnQgb2Ygdmlld1xuICAgIC8vIGkuZS4gaXQgd2lsbCBkZWZpbml0ZWx5IG5vdCBiZSBpbiBhICRhcHBseVxuICAgIHdpbi5zZXRUaW1lb3V0KGFjdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gTm8gbmVlZCB0byB1bmJpbmQgdGhpcyBoYW5kbGVyIGFzIGxvYWQgaXMgb25seSBldmVyIGNhbGxlZCBvbmNlXG4gICAganFMaXRlKHdpbikub24oJ2xvYWQnLCBhY3Rpb24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVJlYWR5KGZuKSB7XG4gIGZ1bmN0aW9uIHRyaWdnZXIoKSB7XG4gICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0cmlnZ2VyKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRyaWdnZXIpO1xuICAgIGZuKCk7XG4gIH1cblxuICAvLyBjaGVjayBpZiBkb2N1bWVudCBpcyBhbHJlYWR5IGxvYWRlZFxuICBpZiAod2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICB3aW5kb3cuc2V0VGltZW91dChmbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gV2UgY2FuIG5vdCB1c2UganFMaXRlIHNpbmNlIHdlIGFyZSBub3QgZG9uZSBsb2FkaW5nIGFuZCBqUXVlcnkgY291bGQgYmUgbG9hZGVkIGxhdGVyLlxuXG4gICAgLy8gV29ya3MgZm9yIG1vZGVybiBicm93c2VycyBhbmQgSUU5XG4gICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0cmlnZ2VyKTtcblxuICAgIC8vIEZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQgZm9yIG90aGVyc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgdHJpZ2dlcik7XG4gIH1cbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBGdW5jdGlvbnMgd2hpY2ggYXJlIGRlY2xhcmVkIGRpcmVjdGx5LlxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG52YXIgSlFMaXRlUHJvdG90eXBlID0gSlFMaXRlLnByb3RvdHlwZSA9IHtcbiAgcmVhZHk6IGpxTGl0ZVJlYWR5LFxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gW107XG4gICAgZm9yRWFjaCh0aGlzLCBmdW5jdGlvbihlKSB7IHZhbHVlLnB1c2goJycgKyBlKTt9KTtcbiAgICByZXR1cm4gJ1snICsgdmFsdWUuam9pbignLCAnKSArICddJztcbiAgfSxcblxuICBlcTogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiAoaW5kZXggPj0gMCkgPyBqcUxpdGUodGhpc1tpbmRleF0pIDoganFMaXRlKHRoaXNbdGhpcy5sZW5ndGggKyBpbmRleF0pO1xuICB9LFxuXG4gIGxlbmd0aDogMCxcbiAgcHVzaDogcHVzaCxcbiAgc29ydDogW10uc29ydCxcbiAgc3BsaWNlOiBbXS5zcGxpY2Vcbn07XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gRnVuY3Rpb25zIGl0ZXJhdGluZyBnZXR0ZXIvc2V0dGVycy5cbi8vIHRoZXNlIGZ1bmN0aW9ucyByZXR1cm4gc2VsZiBvbiBzZXR0ZXIgYW5kXG4vLyB2YWx1ZSBvbiBnZXQuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbnZhciBCT09MRUFOX0FUVFIgPSB7fTtcbmZvckVhY2goJ211bHRpcGxlLHNlbGVjdGVkLGNoZWNrZWQsZGlzYWJsZWQscmVhZE9ubHkscmVxdWlyZWQsb3Blbicuc3BsaXQoJywnKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgQk9PTEVBTl9BVFRSW2xvd2VyY2FzZSh2YWx1ZSldID0gdmFsdWU7XG59KTtcbnZhciBCT09MRUFOX0VMRU1FTlRTID0ge307XG5mb3JFYWNoKCdpbnB1dCxzZWxlY3Qsb3B0aW9uLHRleHRhcmVhLGJ1dHRvbixmb3JtLGRldGFpbHMnLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gIEJPT0xFQU5fRUxFTUVOVFNbdmFsdWVdID0gdHJ1ZTtcbn0pO1xudmFyIEFMSUFTRURfQVRUUiA9IHtcbiAgJ25nTWlubGVuZ3RoJzogJ21pbmxlbmd0aCcsXG4gICduZ01heGxlbmd0aCc6ICdtYXhsZW5ndGgnLFxuICAnbmdNaW4nOiAnbWluJyxcbiAgJ25nTWF4JzogJ21heCcsXG4gICduZ1BhdHRlcm4nOiAncGF0dGVybicsXG4gICduZ1N0ZXAnOiAnc3RlcCdcbn07XG5cbmZ1bmN0aW9uIGdldEJvb2xlYW5BdHRyTmFtZShlbGVtZW50LCBuYW1lKSB7XG4gIC8vIGNoZWNrIGRvbSBsYXN0IHNpbmNlIHdlIHdpbGwgbW9zdCBsaWtlbHkgZmFpbCBvbiBuYW1lXG4gIHZhciBib29sZWFuQXR0ciA9IEJPT0xFQU5fQVRUUltuYW1lLnRvTG93ZXJDYXNlKCldO1xuXG4gIC8vIGJvb2xlYW5BdHRyIGlzIGhlcmUgdHdpY2UgdG8gbWluaW1pemUgRE9NIGFjY2Vzc1xuICByZXR1cm4gYm9vbGVhbkF0dHIgJiYgQk9PTEVBTl9FTEVNRU5UU1tub2RlTmFtZV8oZWxlbWVudCldICYmIGJvb2xlYW5BdHRyO1xufVxuXG5mdW5jdGlvbiBnZXRBbGlhc2VkQXR0ck5hbWUobmFtZSkge1xuICByZXR1cm4gQUxJQVNFRF9BVFRSW25hbWVdO1xufVxuXG5mb3JFYWNoKHtcbiAgZGF0YToganFMaXRlRGF0YSxcbiAgcmVtb3ZlRGF0YToganFMaXRlUmVtb3ZlRGF0YSxcbiAgaGFzRGF0YToganFMaXRlSGFzRGF0YSxcbiAgY2xlYW5EYXRhOiBmdW5jdGlvbiBqcUxpdGVDbGVhbkRhdGEobm9kZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBub2Rlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBqcUxpdGVSZW1vdmVEYXRhKG5vZGVzW2ldKTtcbiAgICB9XG4gIH1cbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKSB7XG4gIEpRTGl0ZVtuYW1lXSA9IGZuO1xufSk7XG5cbmZvckVhY2goe1xuICBkYXRhOiBqcUxpdGVEYXRhLFxuICBpbmhlcml0ZWREYXRhOiBqcUxpdGVJbmhlcml0ZWREYXRhLFxuXG4gIHNjb3BlOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgLy8gQ2FuJ3QgdXNlIGpxTGl0ZURhdGEgaGVyZSBkaXJlY3RseSBzbyB3ZSBzdGF5IGNvbXBhdGlibGUgd2l0aCBqUXVlcnkhXG4gICAgcmV0dXJuIGpxTGl0ZS5kYXRhKGVsZW1lbnQsICckc2NvcGUnKSB8fCBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQucGFyZW50Tm9kZSB8fCBlbGVtZW50LCBbJyRpc29sYXRlU2NvcGUnLCAnJHNjb3BlJ10pO1xuICB9LFxuXG4gIGlzb2xhdGVTY29wZTogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIC8vIENhbid0IHVzZSBqcUxpdGVEYXRhIGhlcmUgZGlyZWN0bHkgc28gd2Ugc3RheSBjb21wYXRpYmxlIHdpdGggalF1ZXJ5IVxuICAgIHJldHVybiBqcUxpdGUuZGF0YShlbGVtZW50LCAnJGlzb2xhdGVTY29wZScpIHx8IGpxTGl0ZS5kYXRhKGVsZW1lbnQsICckaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZScpO1xuICB9LFxuXG4gIGNvbnRyb2xsZXI6IGpxTGl0ZUNvbnRyb2xsZXIsXG5cbiAgaW5qZWN0b3I6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCAnJGluamVjdG9yJyk7XG4gIH0sXG5cbiAgcmVtb3ZlQXR0cjogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSkge1xuICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9LFxuXG4gIGhhc0NsYXNzOiBqcUxpdGVIYXNDbGFzcyxcblxuICBjc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IGNzc0tlYmFiVG9DYW1lbChuYW1lKTtcblxuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICBlbGVtZW50LnN0eWxlW25hbWVdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbGVtZW50LnN0eWxlW25hbWVdO1xuICAgIH1cbiAgfSxcblxuICBhdHRyOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAgIHZhciByZXQ7XG4gICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcbiAgICBpZiAobm9kZVR5cGUgPT09IE5PREVfVFlQRV9URVhUIHx8IG5vZGVUeXBlID09PSBOT0RFX1RZUEVfQVRUUklCVVRFIHx8IG5vZGVUeXBlID09PSBOT0RFX1RZUEVfQ09NTUVOVCB8fFxuICAgICAgIWVsZW1lbnQuZ2V0QXR0cmlidXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxvd2VyY2FzZWROYW1lID0gbG93ZXJjYXNlKG5hbWUpO1xuICAgIHZhciBpc0Jvb2xlYW5BdHRyID0gQk9PTEVBTl9BVFRSW2xvd2VyY2FzZWROYW1lXTtcblxuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAvLyBzZXR0ZXJcblxuICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8ICh2YWx1ZSA9PT0gZmFsc2UgJiYgaXNCb29sZWFuQXR0cikpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCBpc0Jvb2xlYW5BdHRyID8gbG93ZXJjYXNlZE5hbWUgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGdldHRlclxuXG4gICAgICByZXQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTtcblxuICAgICAgaWYgKGlzQm9vbGVhbkF0dHIgJiYgcmV0ICE9PSBudWxsKSB7XG4gICAgICAgIHJldCA9IGxvd2VyY2FzZWROYW1lO1xuICAgICAgfVxuICAgICAgLy8gTm9ybWFsaXplIG5vbi1leGlzdGluZyBhdHRyaWJ1dGVzIHRvIHVuZGVmaW5lZCAoYXMgalF1ZXJ5KS5cbiAgICAgIHJldHVybiByZXQgPT09IG51bGwgPyB1bmRlZmluZWQgOiByZXQ7XG4gICAgfVxuICB9LFxuXG4gIHByb3A6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGVsZW1lbnRbbmFtZV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVsZW1lbnRbbmFtZV07XG4gICAgfVxuICB9LFxuXG4gIHRleHQ6IChmdW5jdGlvbigpIHtcbiAgICBnZXRUZXh0LiRkdiA9ICcnO1xuICAgIHJldHVybiBnZXRUZXh0O1xuXG4gICAgZnVuY3Rpb24gZ2V0VGV4dChlbGVtZW50LCB2YWx1ZSkge1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB2YXIgbm9kZVR5cGUgPSBlbGVtZW50Lm5vZGVUeXBlO1xuICAgICAgICByZXR1cm4gKG5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCB8fCBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX1RFWFQpID8gZWxlbWVudC50ZXh0Q29udGVudCA6ICcnO1xuICAgICAgfVxuICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHZhbHVlO1xuICAgIH1cbiAgfSkoKSxcblxuICB2YWw6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgaWYgKGVsZW1lbnQubXVsdGlwbGUgJiYgbm9kZU5hbWVfKGVsZW1lbnQpID09PSAnc2VsZWN0Jykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvckVhY2goZWxlbWVudC5vcHRpb25zLCBmdW5jdGlvbihvcHRpb24pIHtcbiAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChvcHRpb24udmFsdWUgfHwgb3B0aW9uLnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICB9LFxuXG4gIGh0bWw6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgIH1cbiAgICBqcUxpdGVEZWFsb2MoZWxlbWVudCwgdHJ1ZSk7XG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfSxcblxuICBlbXB0eToganFMaXRlRW1wdHlcbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKSB7XG4gIC8qKlxuICAgKiBQcm9wZXJ0aWVzOiB3cml0ZXMgcmV0dXJuIHNlbGVjdGlvbiwgcmVhZHMgcmV0dXJuIGZpcnN0IHZhbHVlXG4gICAqL1xuICBKUUxpdGUucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xuICAgIHZhciBpLCBrZXk7XG4gICAgdmFyIG5vZGVDb3VudCA9IHRoaXMubGVuZ3RoO1xuXG4gICAgLy8ganFMaXRlSGFzQ2xhc3MgaGFzIG9ubHkgdHdvIGFyZ3VtZW50cywgYnV0IGlzIGEgZ2V0dGVyLW9ubHkgZm4sIHNvIHdlIG5lZWQgdG8gc3BlY2lhbC1jYXNlIGl0XG4gICAgLy8gaW4gYSB3YXkgdGhhdCBzdXJ2aXZlcyBtaW5pZmljYXRpb24uXG4gICAgLy8ganFMaXRlRW1wdHkgdGFrZXMgbm8gYXJndW1lbnRzIGJ1dCBpcyBhIHNldHRlci5cbiAgICBpZiAoZm4gIT09IGpxTGl0ZUVtcHR5ICYmXG4gICAgICAgIChpc1VuZGVmaW5lZCgoZm4ubGVuZ3RoID09PSAyICYmIChmbiAhPT0ganFMaXRlSGFzQ2xhc3MgJiYgZm4gIT09IGpxTGl0ZUNvbnRyb2xsZXIpKSA/IGFyZzEgOiBhcmcyKSkpIHtcbiAgICAgIGlmIChpc09iamVjdChhcmcxKSkge1xuXG4gICAgICAgIC8vIHdlIGFyZSBhIHdyaXRlLCBidXQgdGhlIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSB0aGUga2V5L3ZhbHVlc1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpKyspIHtcbiAgICAgICAgICBpZiAoZm4gPT09IGpxTGl0ZURhdGEpIHtcbiAgICAgICAgICAgIC8vIGRhdGEoKSB0YWtlcyB0aGUgd2hvbGUgb2JqZWN0IGluIGpRdWVyeVxuICAgICAgICAgICAgZm4odGhpc1tpXSwgYXJnMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIGFyZzEpIHtcbiAgICAgICAgICAgICAgZm4odGhpc1tpXSwga2V5LCBhcmcxW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm4gc2VsZiBmb3IgY2hhaW5pbmdcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB3ZSBhcmUgYSByZWFkLCBzbyByZWFkIHRoZSBmaXJzdCBjaGlsZC5cbiAgICAgICAgLy8gVE9ETzogZG8gd2Ugc3RpbGwgbmVlZCB0aGlzP1xuICAgICAgICB2YXIgdmFsdWUgPSBmbi4kZHY7XG4gICAgICAgIC8vIE9ubHkgaWYgd2UgaGF2ZSAkZHYgZG8gd2UgaXRlcmF0ZSBvdmVyIGFsbCwgb3RoZXJ3aXNlIGl0IGlzIGp1c3QgdGhlIGZpcnN0IGVsZW1lbnQuXG4gICAgICAgIHZhciBqaiA9IChpc1VuZGVmaW5lZCh2YWx1ZSkpID8gTWF0aC5taW4obm9kZUNvdW50LCAxKSA6IG5vZGVDb3VudDtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgdmFyIG5vZGVWYWx1ZSA9IGZuKHRoaXNbal0sIGFyZzEsIGFyZzIpO1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgPyB2YWx1ZSArIG5vZGVWYWx1ZSA6IG5vZGVWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHdlIGFyZSBhIHdyaXRlLCBzbyBhcHBseSB0byBhbGwgY2hpbGRyZW5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlQ291bnQ7IGkrKykge1xuICAgICAgICBmbih0aGlzW2ldLCBhcmcxLCBhcmcyKTtcbiAgICAgIH1cbiAgICAgIC8vIHJldHVybiBzZWxmIGZvciBjaGFpbmluZ1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50SGFuZGxlcihlbGVtZW50LCBldmVudHMpIHtcbiAgdmFyIGV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50LCB0eXBlKSB7XG4gICAgLy8galF1ZXJ5IHNwZWNpZmljIGFwaVxuICAgIGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgfTtcblxuICAgIHZhciBldmVudEZucyA9IGV2ZW50c1t0eXBlIHx8IGV2ZW50LnR5cGVdO1xuICAgIHZhciBldmVudEZuc0xlbmd0aCA9IGV2ZW50Rm5zID8gZXZlbnRGbnMubGVuZ3RoIDogMDtcblxuICAgIGlmICghZXZlbnRGbnNMZW5ndGgpIHJldHVybjtcblxuICAgIGlmIChpc1VuZGVmaW5lZChldmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpKSB7XG4gICAgICB2YXIgb3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb247XG4gICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTtcblxuICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICBvcmlnaW5hbFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbi5jYWxsKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9PT0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8gU29tZSBldmVudHMgaGF2ZSBzcGVjaWFsIGhhbmRsZXJzIHRoYXQgd3JhcCB0aGUgcmVhbCBoYW5kbGVyXG4gICAgdmFyIGhhbmRsZXJXcmFwcGVyID0gZXZlbnRGbnMuc3BlY2lhbEhhbmRsZXJXcmFwcGVyIHx8IGRlZmF1bHRIYW5kbGVyV3JhcHBlcjtcblxuICAgIC8vIENvcHkgZXZlbnQgaGFuZGxlcnMgaW4gY2FzZSBldmVudCBoYW5kbGVycyBhcnJheSBpcyBtb2RpZmllZCBkdXJpbmcgZXhlY3V0aW9uLlxuICAgIGlmICgoZXZlbnRGbnNMZW5ndGggPiAxKSkge1xuICAgICAgZXZlbnRGbnMgPSBzaGFsbG93Q29weShldmVudEZucyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudEZuc0xlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgaGFuZGxlcldyYXBwZXIoZWxlbWVudCwgZXZlbnQsIGV2ZW50Rm5zW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gVE9ETzogdGhpcyBpcyBhIGhhY2sgZm9yIGFuZ3VsYXJNb2Nrcy9jbGVhckRhdGFDYWNoZSB0aGF0IG1ha2VzIGl0IHBvc3NpYmxlIHRvIGRlcmVnaXN0ZXIgYWxsXG4gIC8vICAgICAgIGV2ZW50cyBvbiBgZWxlbWVudGBcbiAgZXZlbnRIYW5kbGVyLmVsZW0gPSBlbGVtZW50O1xuICByZXR1cm4gZXZlbnRIYW5kbGVyO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0SGFuZGxlcldyYXBwZXIoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpIHtcbiAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2ZW50KTtcbn1cblxuZnVuY3Rpb24gc3BlY2lhbE1vdXNlSGFuZGxlcldyYXBwZXIodGFyZ2V0LCBldmVudCwgaGFuZGxlcikge1xuICAvLyBSZWZlciB0byBqUXVlcnkncyBpbXBsZW1lbnRhdGlvbiBvZiBtb3VzZWVudGVyICYgbW91c2VsZWF2ZVxuICAvLyBSZWFkIGFib3V0IG1vdXNlZW50ZXIgYW5kIG1vdXNlbGVhdmU6XG4gIC8vIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX21vdXNlLmh0bWwjbGluazhcbiAgdmFyIHJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0O1xuICAvLyBGb3IgbW91c2VudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuXG4gIC8vIE5COiBObyByZWxhdGVkVGFyZ2V0IGlmIHRoZSBtb3VzZSBsZWZ0L2VudGVyZWQgdGhlIGJyb3dzZXIgd2luZG93XG4gIGlmICghcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGFyZ2V0ICYmICFqcUxpdGVDb250YWlucy5jYWxsKHRhcmdldCwgcmVsYXRlZCkpKSB7XG4gICAgaGFuZGxlci5jYWxsKHRhcmdldCwgZXZlbnQpO1xuICB9XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gRnVuY3Rpb25zIGl0ZXJhdGluZyB0cmF2ZXJzYWwuXG4vLyBUaGVzZSBmdW5jdGlvbnMgY2hhaW4gcmVzdWx0cyBpbnRvIGEgc2luZ2xlXG4vLyBzZWxlY3Rvci5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZm9yRWFjaCh7XG4gIHJlbW92ZURhdGE6IGpxTGl0ZVJlbW92ZURhdGEsXG5cbiAgb246IGZ1bmN0aW9uIGpxTGl0ZU9uKGVsZW1lbnQsIHR5cGUsIGZuLCB1bnN1cHBvcnRlZCkge1xuICAgIGlmIChpc0RlZmluZWQodW5zdXBwb3J0ZWQpKSB0aHJvdyBqcUxpdGVNaW5FcnIoJ29uYXJncycsICdqcUxpdGUjb24oKSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBgc2VsZWN0b3JgIG9yIGBldmVudERhdGFgIHBhcmFtZXRlcnMnKTtcblxuICAgIC8vIERvIG5vdCBhZGQgZXZlbnQgaGFuZGxlcnMgdG8gbm9uLWVsZW1lbnRzIGJlY2F1c2UgdGhleSB3aWxsIG5vdCBiZSBjbGVhbmVkIHVwLlxuICAgIGlmICghanFMaXRlQWNjZXB0c0RhdGEoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsIHRydWUpO1xuICAgIHZhciBldmVudHMgPSBleHBhbmRvU3RvcmUuZXZlbnRzO1xuICAgIHZhciBoYW5kbGUgPSBleHBhbmRvU3RvcmUuaGFuZGxlO1xuXG4gICAgaWYgKCFoYW5kbGUpIHtcbiAgICAgIGhhbmRsZSA9IGV4cGFuZG9TdG9yZS5oYW5kbGUgPSBjcmVhdGVFdmVudEhhbmRsZXIoZWxlbWVudCwgZXZlbnRzKTtcbiAgICB9XG5cbiAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9zdHJpbmctaW5kZXhvZi12cy1zcGxpdFxuICAgIHZhciB0eXBlcyA9IHR5cGUuaW5kZXhPZignICcpID49IDAgPyB0eXBlLnNwbGl0KCcgJykgOiBbdHlwZV07XG4gICAgdmFyIGkgPSB0eXBlcy5sZW5ndGg7XG5cbiAgICB2YXIgYWRkSGFuZGxlciA9IGZ1bmN0aW9uKHR5cGUsIHNwZWNpYWxIYW5kbGVyV3JhcHBlciwgbm9FdmVudExpc3RlbmVyKSB7XG4gICAgICB2YXIgZXZlbnRGbnMgPSBldmVudHNbdHlwZV07XG5cbiAgICAgIGlmICghZXZlbnRGbnMpIHtcbiAgICAgICAgZXZlbnRGbnMgPSBldmVudHNbdHlwZV0gPSBbXTtcbiAgICAgICAgZXZlbnRGbnMuc3BlY2lhbEhhbmRsZXJXcmFwcGVyID0gc3BlY2lhbEhhbmRsZXJXcmFwcGVyO1xuICAgICAgICBpZiAodHlwZSAhPT0gJyRkZXN0cm95JyAmJiAhbm9FdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZXZlbnRGbnMucHVzaChmbik7XG4gICAgfTtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHR5cGUgPSB0eXBlc1tpXTtcbiAgICAgIGlmIChNT1VTRV9FVkVOVF9NQVBbdHlwZV0pIHtcbiAgICAgICAgYWRkSGFuZGxlcihNT1VTRV9FVkVOVF9NQVBbdHlwZV0sIHNwZWNpYWxNb3VzZUhhbmRsZXJXcmFwcGVyKTtcbiAgICAgICAgYWRkSGFuZGxlcih0eXBlLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWRkSGFuZGxlcih0eXBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgb2ZmOiBqcUxpdGVPZmYsXG5cbiAgb25lOiBmdW5jdGlvbihlbGVtZW50LCB0eXBlLCBmbikge1xuICAgIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XG5cbiAgICAvL2FkZCB0aGUgbGlzdGVuZXIgdHdpY2Ugc28gdGhhdCB3aGVuIGl0IGlzIGNhbGxlZFxuICAgIC8veW91IGNhbiByZW1vdmUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIGFuZCBzdGlsbCBiZVxuICAgIC8vYWJsZSB0byBjYWxsIGVsZW1lbnQub2ZmKGV2LCBmbikgbm9ybWFsbHlcbiAgICBlbGVtZW50Lm9uKHR5cGUsIGZ1bmN0aW9uIG9uRm4oKSB7XG4gICAgICBlbGVtZW50Lm9mZih0eXBlLCBmbik7XG4gICAgICBlbGVtZW50Lm9mZih0eXBlLCBvbkZuKTtcbiAgICB9KTtcbiAgICBlbGVtZW50Lm9uKHR5cGUsIGZuKTtcbiAgfSxcblxuICByZXBsYWNlV2l0aDogZnVuY3Rpb24oZWxlbWVudCwgcmVwbGFjZU5vZGUpIHtcbiAgICB2YXIgaW5kZXgsIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICBqcUxpdGVEZWFsb2MoZWxlbWVudCk7XG4gICAgZm9yRWFjaChuZXcgSlFMaXRlKHJlcGxhY2VOb2RlKSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgaW5kZXgubmV4dFNpYmxpbmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChub2RlLCBlbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGluZGV4ID0gbm9kZTtcbiAgICB9KTtcbiAgfSxcblxuICBjaGlsZHJlbjogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHZhciBjaGlsZHJlbiA9IFtdO1xuICAgIGZvckVhY2goZWxlbWVudC5jaGlsZE5vZGVzLCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcbiAgICAgICAgY2hpbGRyZW4ucHVzaChlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH0sXG5cbiAgY29udGVudHM6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jb250ZW50RG9jdW1lbnQgfHwgZWxlbWVudC5jaGlsZE5vZGVzIHx8IFtdO1xuICB9LFxuXG4gIGFwcGVuZDogZnVuY3Rpb24oZWxlbWVudCwgbm9kZSkge1xuICAgIHZhciBub2RlVHlwZSA9IGVsZW1lbnQubm9kZVR5cGU7XG4gICAgaWYgKG5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRUxFTUVOVCAmJiBub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UKSByZXR1cm47XG5cbiAgICBub2RlID0gbmV3IEpRTGl0ZShub2RlKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5vZGUubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdmFyIGNoaWxkID0gbm9kZVtpXTtcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfSxcblxuICBwcmVwZW5kOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7XG4gICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IE5PREVfVFlQRV9FTEVNRU5UKSB7XG4gICAgICB2YXIgaW5kZXggPSBlbGVtZW50LmZpcnN0Q2hpbGQ7XG4gICAgICBmb3JFYWNoKG5ldyBKUUxpdGUobm9kZSksIGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBpbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgd3JhcDogZnVuY3Rpb24oZWxlbWVudCwgd3JhcE5vZGUpIHtcbiAgICBqcUxpdGVXcmFwTm9kZShlbGVtZW50LCBqcUxpdGUod3JhcE5vZGUpLmVxKDApLmNsb25lKClbMF0pO1xuICB9LFxuXG4gIHJlbW92ZToganFMaXRlUmVtb3ZlLFxuXG4gIGRldGFjaDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGpxTGl0ZVJlbW92ZShlbGVtZW50LCB0cnVlKTtcbiAgfSxcblxuICBhZnRlcjogZnVuY3Rpb24oZWxlbWVudCwgbmV3RWxlbWVudCkge1xuICAgIHZhciBpbmRleCA9IGVsZW1lbnQsIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcblxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIG5ld0VsZW1lbnQgPSBuZXcgSlFMaXRlKG5ld0VsZW1lbnQpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBuZXdFbGVtZW50Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGUgPSBuZXdFbGVtZW50W2ldO1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIGluZGV4Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgaW5kZXggPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBhZGRDbGFzczoganFMaXRlQWRkQ2xhc3MsXG4gIHJlbW92ZUNsYXNzOiBqcUxpdGVSZW1vdmVDbGFzcyxcblxuICB0b2dnbGVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3IsIGNvbmRpdGlvbikge1xuICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgZm9yRWFjaChzZWxlY3Rvci5zcGxpdCgnICcpLCBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIGNsYXNzQ29uZGl0aW9uID0gY29uZGl0aW9uO1xuICAgICAgICBpZiAoaXNVbmRlZmluZWQoY2xhc3NDb25kaXRpb24pKSB7XG4gICAgICAgICAgY2xhc3NDb25kaXRpb24gPSAhanFMaXRlSGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAoY2xhc3NDb25kaXRpb24gPyBqcUxpdGVBZGRDbGFzcyA6IGpxTGl0ZVJlbW92ZUNsYXNzKShlbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHBhcmVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgcmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IE5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVCA/IHBhcmVudCA6IG51bGw7XG4gIH0sXG5cbiAgbmV4dDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZztcbiAgfSxcblxuICBmaW5kOiBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgIGlmIChlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3Rvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH0sXG5cbiAgY2xvbmU6IGpxTGl0ZUNsb25lLFxuXG4gIHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbihlbGVtZW50LCBldmVudCwgZXh0cmFQYXJhbWV0ZXJzKSB7XG5cbiAgICB2YXIgZHVtbXlFdmVudCwgZXZlbnRGbnNDb3B5LCBoYW5kbGVyQXJncztcbiAgICB2YXIgZXZlbnROYW1lID0gZXZlbnQudHlwZSB8fCBldmVudDtcbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQpO1xuICAgIHZhciBldmVudHMgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmV2ZW50cztcbiAgICB2YXIgZXZlbnRGbnMgPSBldmVudHMgJiYgZXZlbnRzW2V2ZW50TmFtZV07XG5cbiAgICBpZiAoZXZlbnRGbnMpIHtcbiAgICAgIC8vIENyZWF0ZSBhIGR1bW15IGV2ZW50IHRvIHBhc3MgdG8gdGhlIGhhbmRsZXJzXG4gICAgICBkdW1teUV2ZW50ID0ge1xuICAgICAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7IHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7IH0sXG4gICAgICAgIGlzRGVmYXVsdFByZXZlbnRlZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHRydWU7IH0sXG4gICAgICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7IHRoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTsgfSxcbiAgICAgICAgaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPT09IHRydWU7IH0sXG4gICAgICAgIHN0b3BQcm9wYWdhdGlvbjogbm9vcCxcbiAgICAgICAgdHlwZTogZXZlbnROYW1lLFxuICAgICAgICB0YXJnZXQ6IGVsZW1lbnRcbiAgICAgIH07XG5cbiAgICAgIC8vIElmIGEgY3VzdG9tIGV2ZW50IHdhcyBwcm92aWRlZCB0aGVuIGV4dGVuZCBvdXIgZHVtbXkgZXZlbnQgd2l0aCBpdFxuICAgICAgaWYgKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgZHVtbXlFdmVudCA9IGV4dGVuZChkdW1teUV2ZW50LCBldmVudCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvcHkgZXZlbnQgaGFuZGxlcnMgaW4gY2FzZSBldmVudCBoYW5kbGVycyBhcnJheSBpcyBtb2RpZmllZCBkdXJpbmcgZXhlY3V0aW9uLlxuICAgICAgZXZlbnRGbnNDb3B5ID0gc2hhbGxvd0NvcHkoZXZlbnRGbnMpO1xuICAgICAgaGFuZGxlckFyZ3MgPSBleHRyYVBhcmFtZXRlcnMgPyBbZHVtbXlFdmVudF0uY29uY2F0KGV4dHJhUGFyYW1ldGVycykgOiBbZHVtbXlFdmVudF07XG5cbiAgICAgIGZvckVhY2goZXZlbnRGbnNDb3B5LCBmdW5jdGlvbihmbikge1xuICAgICAgICBpZiAoIWR1bW15RXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xuICAgICAgICAgIGZuLmFwcGx5KGVsZW1lbnQsIGhhbmRsZXJBcmdzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59LCBmdW5jdGlvbihmbiwgbmFtZSkge1xuICAvKipcbiAgICogY2hhaW5pbmcgZnVuY3Rpb25zXG4gICAqL1xuICBKUUxpdGUucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oYXJnMSwgYXJnMiwgYXJnMykge1xuICAgIHZhciB2YWx1ZTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IGZuKHRoaXNbaV0sIGFyZzEsIGFyZzIsIGFyZzMpO1xuICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIC8vIGFueSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgdmFsdWUgbmVlZHMgdG8gYmUgd3JhcHBlZFxuICAgICAgICAgIHZhbHVlID0ganFMaXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAganFMaXRlQWRkTm9kZXModmFsdWUsIGZuKHRoaXNbaV0sIGFyZzEsIGFyZzIsIGFyZzMpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlzRGVmaW5lZCh2YWx1ZSkgPyB2YWx1ZSA6IHRoaXM7XG4gIH07XG59KTtcblxuLy8gYmluZCBsZWdhY3kgYmluZC91bmJpbmQgdG8gb24vb2ZmXG5KUUxpdGUucHJvdG90eXBlLmJpbmQgPSBKUUxpdGUucHJvdG90eXBlLm9uO1xuSlFMaXRlLnByb3RvdHlwZS51bmJpbmQgPSBKUUxpdGUucHJvdG90eXBlLm9mZjtcblxuXG4vLyBQcm92aWRlciBmb3IgcHJpdmF0ZSAkJGpxTGl0ZSBzZXJ2aWNlXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICQkanFMaXRlUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uICQkanFMaXRlKCkge1xuICAgIHJldHVybiBleHRlbmQoSlFMaXRlLCB7XG4gICAgICBoYXNDbGFzczogZnVuY3Rpb24obm9kZSwgY2xhc3Nlcykge1xuICAgICAgICBpZiAobm9kZS5hdHRyKSBub2RlID0gbm9kZVswXTtcbiAgICAgICAgcmV0dXJuIGpxTGl0ZUhhc0NsYXNzKG5vZGUsIGNsYXNzZXMpO1xuICAgICAgfSxcbiAgICAgIGFkZENsYXNzOiBmdW5jdGlvbihub2RlLCBjbGFzc2VzKSB7XG4gICAgICAgIGlmIChub2RlLmF0dHIpIG5vZGUgPSBub2RlWzBdO1xuICAgICAgICByZXR1cm4ganFMaXRlQWRkQ2xhc3Mobm9kZSwgY2xhc3Nlcyk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKG5vZGUsIGNsYXNzZXMpIHtcbiAgICAgICAgaWYgKG5vZGUuYXR0cikgbm9kZSA9IG5vZGVbMF07XG4gICAgICAgIHJldHVybiBqcUxpdGVSZW1vdmVDbGFzcyhub2RlLCBjbGFzc2VzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGhhc2ggb2YgYW4gJ29iaicuXG4gKiBIYXNoIG9mIGE6XG4gKiAgc3RyaW5nIGlzIHN0cmluZ1xuICogIG51bWJlciBpcyBudW1iZXIgYXMgc3RyaW5nXG4gKiAgb2JqZWN0IGlzIGVpdGhlciByZXN1bHQgb2YgY2FsbGluZyAkJGhhc2hLZXkgZnVuY3Rpb24gb24gdGhlIG9iamVjdCBvciB1bmlxdWVseSBnZW5lcmF0ZWQgaWQsXG4gKiAgICAgICAgIHRoYXQgaXMgYWxzbyBhc3NpZ25lZCB0byB0aGUgJCRoYXNoS2V5IHByb3BlcnR5IG9mIHRoZSBvYmplY3QuXG4gKlxuICogQHBhcmFtIG9ialxuICogQHJldHVybnMge3N0cmluZ30gaGFzaCBzdHJpbmcgc3VjaCB0aGF0IHRoZSBzYW1lIGlucHV0IHdpbGwgaGF2ZSB0aGUgc2FtZSBoYXNoIHN0cmluZy5cbiAqICAgICAgICAgVGhlIHJlc3VsdGluZyBzdHJpbmcga2V5IGlzIGluICd0eXBlOmhhc2hLZXknIGZvcm1hdC5cbiAqL1xuZnVuY3Rpb24gaGFzaEtleShvYmosIG5leHRVaWRGbikge1xuICB2YXIga2V5ID0gb2JqICYmIG9iai4kJGhhc2hLZXk7XG5cbiAgaWYgKGtleSkge1xuICAgIGlmICh0eXBlb2Yga2V5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBrZXkgPSBvYmouJCRoYXNoS2V5KCk7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH1cblxuICB2YXIgb2JqVHlwZSA9IHR5cGVvZiBvYmo7XG4gIGlmIChvYmpUeXBlID09PSAnZnVuY3Rpb24nIHx8IChvYmpUeXBlID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwpKSB7XG4gICAga2V5ID0gb2JqLiQkaGFzaEtleSA9IG9ialR5cGUgKyAnOicgKyAobmV4dFVpZEZuIHx8IG5leHRVaWQpKCk7XG4gIH0gZWxzZSB7XG4gICAga2V5ID0gb2JqVHlwZSArICc6JyArIG9iajtcbiAgfVxuXG4gIHJldHVybiBrZXk7XG59XG5cbi8vIEEgbWluaW1hbCBFUzIwMTUgTWFwIGltcGxlbWVudGF0aW9uLlxuLy8gU2hvdWxkIGJlIGJ1Zy9mZWF0dXJlIGVxdWl2YWxlbnQgdG8gdGhlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgb2Ygc3VwcG9ydGVkIGJyb3dzZXJzXG4vLyAoZm9yIHRoZSBmZWF0dXJlcyByZXF1aXJlZCBpbiBBbmd1bGFyKS5cbi8vIFNlZSBodHRwczovL2thbmdheC5naXRodWIuaW8vY29tcGF0LXRhYmxlL2VzNi8jdGVzdC1NYXBcbnZhciBuYW5LZXkgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuZnVuY3Rpb24gTmdNYXBTaGltKCkge1xuICB0aGlzLl9rZXlzID0gW107XG4gIHRoaXMuX3ZhbHVlcyA9IFtdO1xuICB0aGlzLl9sYXN0S2V5ID0gTmFOO1xuICB0aGlzLl9sYXN0SW5kZXggPSAtMTtcbn1cbk5nTWFwU2hpbS5wcm90b3R5cGUgPSB7XG4gIF9pZHg6IGZ1bmN0aW9uKGtleSkge1xuICAgIGlmIChrZXkgPT09IHRoaXMuX2xhc3RLZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9sYXN0SW5kZXg7XG4gICAgfVxuICAgIHRoaXMuX2xhc3RLZXkgPSBrZXk7XG4gICAgdGhpcy5fbGFzdEluZGV4ID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgcmV0dXJuIHRoaXMuX2xhc3RJbmRleDtcbiAgfSxcbiAgX3RyYW5zZm9ybUtleTogZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIGlzTnVtYmVyTmFOKGtleSkgPyBuYW5LZXkgOiBrZXk7XG4gIH0sXG4gIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAga2V5ID0gdGhpcy5fdHJhbnNmb3JtS2V5KGtleSk7XG4gICAgdmFyIGlkeCA9IHRoaXMuX2lkeChrZXkpO1xuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsdWVzW2lkeF07XG4gICAgfVxuICB9LFxuICBzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICBrZXkgPSB0aGlzLl90cmFuc2Zvcm1LZXkoa2V5KTtcbiAgICB2YXIgaWR4ID0gdGhpcy5faWR4KGtleSk7XG4gICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgIGlkeCA9IHRoaXMuX2xhc3RJbmRleCA9IHRoaXMuX2tleXMubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLl9rZXlzW2lkeF0gPSBrZXk7XG4gICAgdGhpcy5fdmFsdWVzW2lkeF0gPSB2YWx1ZTtcblxuICAgIC8vIFN1cHBvcnQ6IElFMTFcbiAgICAvLyBEbyBub3QgYHJldHVybiB0aGlzYCB0byBzaW11bGF0ZSB0aGUgcGFydGlhbCBJRTExIGltcGxlbWVudGF0aW9uXG4gIH0sXG4gIGRlbGV0ZTogZnVuY3Rpb24oa2V5KSB7XG4gICAga2V5ID0gdGhpcy5fdHJhbnNmb3JtS2V5KGtleSk7XG4gICAgdmFyIGlkeCA9IHRoaXMuX2lkeChrZXkpO1xuICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX2tleXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgdGhpcy5fdmFsdWVzLnNwbGljZShpZHgsIDEpO1xuICAgIHRoaXMuX2xhc3RLZXkgPSBOYU47XG4gICAgdGhpcy5fbGFzdEluZGV4ID0gLTE7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8vIEZvciBub3csIGFsd2F5cyB1c2UgYE5nTWFwU2hpbWAsIGV2ZW4gaWYgYHdpbmRvdy5NYXBgIGlzIGF2YWlsYWJsZS4gU29tZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zXG4vLyBhcmUgc3RpbGwgYnVnZ3kgKG9mdGVuIGluIHN1YnRsZSB3YXlzKSBhbmQgY2FuIGNhdXNlIGhhcmQtdG8tZGVidWcgZmFpbHVyZXMuIFdoZW4gbmF0aXZlIGBNYXBgXG4vLyBpbXBsZW1lbnRhdGlvbnMgZ2V0IG1vcmUgc3RhYmxlLCB3ZSBjYW4gcmVjb25zaWRlciBzd2l0Y2hpbmcgdG8gYHdpbmRvdy5NYXBgICh3aGVuIGF2YWlsYWJsZSkuXG52YXIgTmdNYXAgPSBOZ01hcFNoaW07XG5cbnZhciAkJE1hcFByb3ZpZGVyID0gWy8qKiBAdGhpcyAqL2Z1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBbZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIE5nTWFwO1xuICB9XTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG1vZHVsZSBuZ1xuICogQG5hbWUgYW5ndWxhci5pbmplY3RvclxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYW4gaW5qZWN0b3Igb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgZm9yIHJldHJpZXZpbmcgc2VydmljZXMgYXMgd2VsbCBhcyBmb3JcbiAqIGRlcGVuZGVuY3kgaW5qZWN0aW9uIChzZWUge0BsaW5rIGd1aWRlL2RpIGRlcGVuZGVuY3kgaW5qZWN0aW9ufSkuXG4gKlxuICogQHBhcmFtIHtBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gbW9kdWxlcyBBIGxpc3Qgb2YgbW9kdWxlIGZ1bmN0aW9ucyBvciB0aGVpciBhbGlhc2VzLiBTZWVcbiAqICAgICB7QGxpbmsgYW5ndWxhci5tb2R1bGV9LiBUaGUgYG5nYCBtb2R1bGUgbXVzdCBiZSBleHBsaWNpdGx5IGFkZGVkLlxuICogQHBhcmFtIHtib29sZWFuPX0gW3N0cmljdERpPWZhbHNlXSBXaGV0aGVyIHRoZSBpbmplY3RvciBzaG91bGQgYmUgaW4gc3RyaWN0IG1vZGUsIHdoaWNoXG4gKiAgICAgZGlzYWxsb3dzIGFyZ3VtZW50IG5hbWUgYW5ub3RhdGlvbiBpbmZlcmVuY2UuXG4gKiBAcmV0dXJucyB7aW5qZWN0b3J9IEluamVjdG9yIG9iamVjdC4gU2VlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxuICpcbiAqIEBleGFtcGxlXG4gKiBUeXBpY2FsIHVzYWdlXG4gKiBgYGBqc1xuICogICAvLyBjcmVhdGUgYW4gaW5qZWN0b3JcbiAqICAgdmFyICRpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoWyduZyddKTtcbiAqXG4gKiAgIC8vIHVzZSB0aGUgaW5qZWN0b3IgdG8ga2ljayBvZmYgeW91ciBhcHBsaWNhdGlvblxuICogICAvLyB1c2UgdGhlIHR5cGUgaW5mZXJlbmNlIHRvIGF1dG8gaW5qZWN0IGFyZ3VtZW50cywgb3IgdXNlIGltcGxpY2l0IGluamVjdGlvblxuICogICAkaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRyb290U2NvcGUsICRjb21waWxlLCAkZG9jdW1lbnQpIHtcbiAqICAgICAkY29tcGlsZSgkZG9jdW1lbnQpKCRyb290U2NvcGUpO1xuICogICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIFNvbWV0aW1lcyB5b3Ugd2FudCB0byBnZXQgYWNjZXNzIHRvIHRoZSBpbmplY3RvciBvZiBhIGN1cnJlbnRseSBydW5uaW5nIEFuZ3VsYXJKUyBhcHBcbiAqIGZyb20gb3V0c2lkZSBBbmd1bGFySlMuIFBlcmhhcHMsIHlvdSB3YW50IHRvIGluamVjdCBhbmQgY29tcGlsZSBzb21lIG1hcmt1cCBhZnRlciB0aGVcbiAqIGFwcGxpY2F0aW9uIGhhcyBiZWVuIGJvb3RzdHJhcHBlZC4gWW91IGNhbiBkbyB0aGlzIHVzaW5nIHRoZSBleHRyYSBgaW5qZWN0b3IoKWAgYWRkZWRcbiAqIHRvIEpRdWVyeS9qcUxpdGUgZWxlbWVudHMuIFNlZSB7QGxpbmsgYW5ndWxhci5lbGVtZW50fS5cbiAqXG4gKiAqVGhpcyBpcyBmYWlybHkgcmFyZSBidXQgY291bGQgYmUgdGhlIGNhc2UgaWYgYSB0aGlyZCBwYXJ0eSBsaWJyYXJ5IGlzIGluamVjdGluZyB0aGVcbiAqIG1hcmt1cC4qXG4gKlxuICogSW4gdGhlIGZvbGxvd2luZyBleGFtcGxlIGEgbmV3IGJsb2NrIG9mIEhUTUwgY29udGFpbmluZyBhIGBuZy1jb250cm9sbGVyYFxuICogZGlyZWN0aXZlIGlzIGFkZGVkIHRvIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50IGJvZHkgYnkgSlF1ZXJ5LiBXZSB0aGVuIGNvbXBpbGUgYW5kIGxpbmtcbiAqIGl0IGludG8gdGhlIGN1cnJlbnQgQW5ndWxhckpTIHNjb3BlLlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgJGRpdiA9ICQoJzxkaXYgbmctY29udHJvbGxlcj1cIk15Q3RybFwiPnt7Y29udGVudC5sYWJlbH19PC9kaXY+Jyk7XG4gKiAkKGRvY3VtZW50LmJvZHkpLmFwcGVuZCgkZGl2KTtcbiAqXG4gKiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmluamVjdG9yKCkuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gKiAgIHZhciBzY29wZSA9IGFuZ3VsYXIuZWxlbWVudCgkZGl2KS5zY29wZSgpO1xuICogICAkY29tcGlsZSgkZGl2KShzY29wZSk7XG4gKiB9KTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBhdXRvXG4gKiBAaW5zdGFsbGF0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBJbXBsaWNpdCBtb2R1bGUgd2hpY2ggZ2V0cyBhdXRvbWF0aWNhbGx5IGFkZGVkIHRvIGVhY2gge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uXG4gKi9cblxudmFyIEFSUk9XX0FSRyA9IC9eKFteKF0rPyk9Pi87XG52YXIgRk5fQVJHUyA9IC9eW14oXSpcXChcXHMqKFteKV0qKVxcKS9tO1xudmFyIEZOX0FSR19TUExJVCA9IC8sLztcbnZhciBGTl9BUkcgPSAvXlxccyooXz8pKFxcUys/KVxcMVxccyokLztcbnZhciBTVFJJUF9DT01NRU5UUyA9IC8oKFxcL1xcLy4qJCl8KFxcL1xcKltcXHNcXFNdKj9cXCpcXC8pKS9tZztcbnZhciAkaW5qZWN0b3JNaW5FcnIgPSBtaW5FcnIoJyRpbmplY3RvcicpO1xuXG5mdW5jdGlvbiBzdHJpbmdpZnlGbihmbikge1xuICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZm4pO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0QXJncyhmbikge1xuICB2YXIgZm5UZXh0ID0gc3RyaW5naWZ5Rm4oZm4pLnJlcGxhY2UoU1RSSVBfQ09NTUVOVFMsICcnKSxcbiAgICAgIGFyZ3MgPSBmblRleHQubWF0Y2goQVJST1dfQVJHKSB8fCBmblRleHQubWF0Y2goRk5fQVJHUyk7XG4gIHJldHVybiBhcmdzO1xufVxuXG5mdW5jdGlvbiBhbm9uRm4oZm4pIHtcbiAgLy8gRm9yIGFub255bW91cyBmdW5jdGlvbnMsIHNob3dpbmcgYXQgdGhlIHZlcnkgbGVhc3QgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBjYW4gaGVscCBpblxuICAvLyBkZWJ1Z2dpbmcuXG4gIHZhciBhcmdzID0gZXh0cmFjdEFyZ3MoZm4pO1xuICBpZiAoYXJncykge1xuICAgIHJldHVybiAnZnVuY3Rpb24oJyArIChhcmdzWzFdIHx8ICcnKS5yZXBsYWNlKC9bXFxzXFxyXFxuXSsvLCAnICcpICsgJyknO1xuICB9XG4gIHJldHVybiAnZm4nO1xufVxuXG5mdW5jdGlvbiBhbm5vdGF0ZShmbiwgc3RyaWN0RGksIG5hbWUpIHtcbiAgdmFyICRpbmplY3QsXG4gICAgICBhcmdEZWNsLFxuICAgICAgbGFzdDtcblxuICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKCEoJGluamVjdCA9IGZuLiRpbmplY3QpKSB7XG4gICAgICAkaW5qZWN0ID0gW107XG4gICAgICBpZiAoZm4ubGVuZ3RoKSB7XG4gICAgICAgIGlmIChzdHJpY3REaSkge1xuICAgICAgICAgIGlmICghaXNTdHJpbmcobmFtZSkgfHwgIW5hbWUpIHtcbiAgICAgICAgICAgIG5hbWUgPSBmbi5uYW1lIHx8IGFub25Gbihmbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycignc3RyaWN0ZGknLFxuICAgICAgICAgICAgJ3swfSBpcyBub3QgdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbiBhbmQgY2Fubm90IGJlIGludm9rZWQgaW4gc3RyaWN0IG1vZGUnLCBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBhcmdEZWNsID0gZXh0cmFjdEFyZ3MoZm4pO1xuICAgICAgICBmb3JFYWNoKGFyZ0RlY2xbMV0uc3BsaXQoRk5fQVJHX1NQTElUKSwgZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgYXJnLnJlcGxhY2UoRk5fQVJHLCBmdW5jdGlvbihhbGwsIHVuZGVyc2NvcmUsIG5hbWUpIHtcbiAgICAgICAgICAgICRpbmplY3QucHVzaChuYW1lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBmbi4kaW5qZWN0ID0gJGluamVjdDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNBcnJheShmbikpIHtcbiAgICBsYXN0ID0gZm4ubGVuZ3RoIC0gMTtcbiAgICBhc3NlcnRBcmdGbihmbltsYXN0XSwgJ2ZuJyk7XG4gICAgJGluamVjdCA9IGZuLnNsaWNlKDAsIGxhc3QpO1xuICB9IGVsc2Uge1xuICAgIGFzc2VydEFyZ0ZuKGZuLCAnZm4nLCB0cnVlKTtcbiAgfVxuICByZXR1cm4gJGluamVjdDtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRpbmplY3RvclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIGAkaW5qZWN0b3JgIGlzIHVzZWQgdG8gcmV0cmlldmUgb2JqZWN0IGluc3RhbmNlcyBhcyBkZWZpbmVkIGJ5XG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSBwcm92aWRlcn0sIGluc3RhbnRpYXRlIHR5cGVzLCBpbnZva2UgbWV0aG9kcyxcbiAqIGFuZCBsb2FkIG1vZHVsZXMuXG4gKlxuICogVGhlIGZvbGxvd2luZyBhbHdheXMgaG9sZHMgdHJ1ZTpcbiAqXG4gKiBgYGBqc1xuICogICB2YXIgJGluamVjdG9yID0gYW5ndWxhci5pbmplY3RvcigpO1xuICogICBleHBlY3QoJGluamVjdG9yLmdldCgnJGluamVjdG9yJykpLnRvQmUoJGluamVjdG9yKTtcbiAqICAgZXhwZWN0KCRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gKiAgICAgcmV0dXJuICRpbmplY3RvcjtcbiAqICAgfSkpLnRvQmUoJGluamVjdG9yKTtcbiAqIGBgYFxuICpcbiAqICMjIEluamVjdGlvbiBGdW5jdGlvbiBBbm5vdGF0aW9uXG4gKlxuICogSmF2YVNjcmlwdCBkb2VzIG5vdCBoYXZlIGFubm90YXRpb25zLCBhbmQgYW5ub3RhdGlvbnMgYXJlIG5lZWRlZCBmb3IgZGVwZW5kZW5jeSBpbmplY3Rpb24uIFRoZVxuICogZm9sbG93aW5nIGFyZSBhbGwgdmFsaWQgd2F5cyBvZiBhbm5vdGF0aW5nIGZ1bmN0aW9uIHdpdGggaW5qZWN0aW9uIGFyZ3VtZW50cyBhbmQgYXJlIGVxdWl2YWxlbnQuXG4gKlxuICogYGBganNcbiAqICAgLy8gaW5mZXJyZWQgKG9ubHkgd29ya3MgaWYgY29kZSBub3QgbWluaWZpZWQvb2JmdXNjYXRlZClcbiAqICAgJGluamVjdG9yLmludm9rZShmdW5jdGlvbihzZXJ2aWNlQSl7fSk7XG4gKlxuICogICAvLyBhbm5vdGF0ZWRcbiAqICAgZnVuY3Rpb24gZXhwbGljaXQoc2VydmljZUEpIHt9O1xuICogICBleHBsaWNpdC4kaW5qZWN0ID0gWydzZXJ2aWNlQSddO1xuICogICAkaW5qZWN0b3IuaW52b2tlKGV4cGxpY2l0KTtcbiAqXG4gKiAgIC8vIGlubGluZVxuICogICAkaW5qZWN0b3IuaW52b2tlKFsnc2VydmljZUEnLCBmdW5jdGlvbihzZXJ2aWNlQSl7fV0pO1xuICogYGBgXG4gKlxuICogIyMjIEluZmVyZW5jZVxuICpcbiAqIEluIEphdmFTY3JpcHQgY2FsbGluZyBgdG9TdHJpbmcoKWAgb24gYSBmdW5jdGlvbiByZXR1cm5zIHRoZSBmdW5jdGlvbiBkZWZpbml0aW9uLiBUaGUgZGVmaW5pdGlvblxuICogY2FuIHRoZW4gYmUgcGFyc2VkIGFuZCB0aGUgZnVuY3Rpb24gYXJndW1lbnRzIGNhbiBiZSBleHRyYWN0ZWQuIFRoaXMgbWV0aG9kIG9mIGRpc2NvdmVyaW5nXG4gKiBhbm5vdGF0aW9ucyBpcyBkaXNhbGxvd2VkIHdoZW4gdGhlIGluamVjdG9yIGlzIGluIHN0cmljdCBtb2RlLlxuICogKk5PVEU6KiBUaGlzIGRvZXMgbm90IHdvcmsgd2l0aCBtaW5pZmljYXRpb24sIGFuZCBvYmZ1c2NhdGlvbiB0b29scyBzaW5jZSB0aGVzZSB0b29scyBjaGFuZ2UgdGhlXG4gKiBhcmd1bWVudCBuYW1lcy5cbiAqXG4gKiAjIyMgYCRpbmplY3RgIEFubm90YXRpb25cbiAqIEJ5IGFkZGluZyBhbiBgJGluamVjdGAgcHJvcGVydHkgb250byBhIGZ1bmN0aW9uIHRoZSBpbmplY3Rpb24gcGFyYW1ldGVycyBjYW4gYmUgc3BlY2lmaWVkLlxuICpcbiAqICMjIyBJbmxpbmVcbiAqIEFzIGFuIGFycmF5IG9mIGluamVjdGlvbiBuYW1lcywgd2hlcmUgdGhlIGxhc3QgaXRlbSBpbiB0aGUgYXJyYXkgaXMgdGhlIGZ1bmN0aW9uIHRvIGNhbGwuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgcHJvcGVydHlcbiAqIEBuYW1lICRpbmplY3RvciNtb2R1bGVzXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQGRlc2NyaXB0aW9uXG4gKiBBIGhhc2ggY29udGFpbmluZyBhbGwgdGhlIG1vZHVsZXMgdGhhdCBoYXZlIGJlZW4gbG9hZGVkIGludG8gdGhlXG4gKiAkaW5qZWN0b3IuXG4gKlxuICogWW91IGNhbiB1c2UgdGhpcyBwcm9wZXJ0eSB0byBmaW5kIG91dCBpbmZvcm1hdGlvbiBhYm91dCBhIG1vZHVsZSB2aWEgdGhlXG4gKiB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjaW5mbyBgbXlNb2R1bGUuaW5mbyguLi4pYH0gbWV0aG9kLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqIGBgYFxuICogdmFyIGluZm8gPSAkaW5qZWN0b3IubW9kdWxlc1snbmdBbmltYXRlJ10uaW5mbygpO1xuICogYGBgXG4gKlxuICogKipEbyBub3QgdXNlIHRoaXMgcHJvcGVydHkgdG8gYXR0ZW1wdCB0byBtb2RpZnkgdGhlIG1vZHVsZXMgYWZ0ZXIgdGhlIGFwcGxpY2F0aW9uXG4gKiBoYXMgYmVlbiBib290c3RyYXBwZWQuKipcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2dldFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIGFuIGluc3RhbmNlIG9mIHRoZSBzZXJ2aWNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZSB0byByZXRyaWV2ZS5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gY2FsbGVyIEFuIG9wdGlvbmFsIHN0cmluZyB0byBwcm92aWRlIHRoZSBvcmlnaW4gb2YgdGhlIGZ1bmN0aW9uIGNhbGwgZm9yIGVycm9yIG1lc3NhZ2VzLlxuICogQHJldHVybiB7Kn0gVGhlIGluc3RhbmNlLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2ludm9rZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSW52b2tlIHRoZSBtZXRob2QgYW5kIHN1cHBseSB0aGUgbWV0aG9kIGFyZ3VtZW50cyBmcm9tIHRoZSBgJGluamVjdG9yYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBmbiBUaGUgaW5qZWN0YWJsZSBmdW5jdGlvbiB0byBpbnZva2UuIEZ1bmN0aW9uIHBhcmFtZXRlcnMgYXJlXG4gKiAgIGluamVjdGVkIGFjY29yZGluZyB0byB0aGUge0BsaW5rIGd1aWRlL2RpICRpbmplY3QgQW5ub3RhdGlvbn0gcnVsZXMuXG4gKiBAcGFyYW0ge09iamVjdD19IHNlbGYgVGhlIGB0aGlzYCBmb3IgdGhlIGludm9rZWQgbWV0aG9kLlxuICogQHBhcmFtIHtPYmplY3Q9fSBsb2NhbHMgT3B0aW9uYWwgb2JqZWN0LiBJZiBwcmVzZXQgdGhlbiBhbnkgYXJndW1lbnQgbmFtZXMgYXJlIHJlYWQgZnJvbSB0aGlzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgZmlyc3QsIGJlZm9yZSB0aGUgYCRpbmplY3RvcmAgaXMgY29uc3VsdGVkLlxuICogQHJldHVybnMgeyp9IHRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgaW52b2tlZCBgZm5gIGZ1bmN0aW9uLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2hhc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQWxsb3dzIHRoZSB1c2VyIHRvIHF1ZXJ5IGlmIHRoZSBwYXJ0aWN1bGFyIHNlcnZpY2UgZXhpc3RzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIGluamVjdG9yIGhhcyBnaXZlbiBzZXJ2aWNlLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2luc3RhbnRpYXRlXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBKUyB0eXBlLiBUaGUgbWV0aG9kIHRha2VzIGEgY29uc3RydWN0b3IgZnVuY3Rpb24sIGludm9rZXMgdGhlIG5ld1xuICogb3BlcmF0b3IsIGFuZCBzdXBwbGllcyBhbGwgb2YgdGhlIGFyZ3VtZW50cyB0byB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb24gYXMgc3BlY2lmaWVkIGJ5IHRoZVxuICogY29uc3RydWN0b3IgYW5ub3RhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBUeXBlIEFubm90YXRlZCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gbG9jYWxzIE9wdGlvbmFsIG9iamVjdC4gSWYgcHJlc2V0IHRoZW4gYW55IGFyZ3VtZW50IG5hbWVzIGFyZSByZWFkIGZyb20gdGhpc1xuICogb2JqZWN0IGZpcnN0LCBiZWZvcmUgdGhlIGAkaW5qZWN0b3JgIGlzIGNvbnN1bHRlZC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IG5ldyBpbnN0YW5jZSBvZiBgVHlwZWAuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaW5qZWN0b3IjYW5ub3RhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgYW4gYXJyYXkgb2Ygc2VydmljZSBuYW1lcyB3aGljaCB0aGUgZnVuY3Rpb24gaXMgcmVxdWVzdGluZyBmb3IgaW5qZWN0aW9uLiBUaGlzIEFQSSBpc1xuICogdXNlZCBieSB0aGUgaW5qZWN0b3IgdG8gZGV0ZXJtaW5lIHdoaWNoIHNlcnZpY2VzIG5lZWQgdG8gYmUgaW5qZWN0ZWQgaW50byB0aGUgZnVuY3Rpb24gd2hlbiB0aGVcbiAqIGZ1bmN0aW9uIGlzIGludm9rZWQuIFRoZXJlIGFyZSB0aHJlZSB3YXlzIGluIHdoaWNoIHRoZSBmdW5jdGlvbiBjYW4gYmUgYW5ub3RhdGVkIHdpdGggdGhlIG5lZWRlZFxuICogZGVwZW5kZW5jaWVzLlxuICpcbiAqICMjIyMgQXJndW1lbnQgbmFtZXNcbiAqXG4gKiBUaGUgc2ltcGxlc3QgZm9ybSBpcyB0byBleHRyYWN0IHRoZSBkZXBlbmRlbmNpZXMgZnJvbSB0aGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbi4gVGhpcyBpcyBkb25lXG4gKiBieSBjb252ZXJ0aW5nIHRoZSBmdW5jdGlvbiBpbnRvIGEgc3RyaW5nIHVzaW5nIGB0b1N0cmluZygpYCBtZXRob2QgYW5kIGV4dHJhY3RpbmcgdGhlIGFyZ3VtZW50XG4gKiBuYW1lcy5cbiAqIGBgYGpzXG4gKiAgIC8vIEdpdmVuXG4gKiAgIGZ1bmN0aW9uIE15Q29udHJvbGxlcigkc2NvcGUsICRyb3V0ZSkge1xuICogICAgIC8vIC4uLlxuICogICB9XG4gKlxuICogICAvLyBUaGVuXG4gKiAgIGV4cGVjdChpbmplY3Rvci5hbm5vdGF0ZShNeUNvbnRyb2xsZXIpKS50b0VxdWFsKFsnJHNjb3BlJywgJyRyb3V0ZSddKTtcbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gZGlzYWxsb3cgdGhpcyBtZXRob2QgYnkgdXNpbmcgc3RyaWN0IGluamVjdGlvbiBtb2RlLlxuICpcbiAqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHdvcmsgd2l0aCBjb2RlIG1pbmlmaWNhdGlvbiAvIG9iZnVzY2F0aW9uLiBGb3IgdGhpcyByZWFzb24gdGhlIGZvbGxvd2luZ1xuICogYW5ub3RhdGlvbiBzdHJhdGVnaWVzIGFyZSBzdXBwb3J0ZWQuXG4gKlxuICogIyMjIyBUaGUgYCRpbmplY3RgIHByb3BlcnR5XG4gKlxuICogSWYgYSBmdW5jdGlvbiBoYXMgYW4gYCRpbmplY3RgIHByb3BlcnR5IGFuZCBpdHMgdmFsdWUgaXMgYW4gYXJyYXkgb2Ygc3RyaW5ncywgdGhlbiB0aGUgc3RyaW5nc1xuICogcmVwcmVzZW50IG5hbWVzIG9mIHNlcnZpY2VzIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGZ1bmN0aW9uLlxuICogYGBganNcbiAqICAgLy8gR2l2ZW5cbiAqICAgdmFyIE15Q29udHJvbGxlciA9IGZ1bmN0aW9uKG9iZnVzY2F0ZWRTY29wZSwgb2JmdXNjYXRlZFJvdXRlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH1cbiAqICAgLy8gRGVmaW5lIGZ1bmN0aW9uIGRlcGVuZGVuY2llc1xuICogICBNeUNvbnRyb2xsZXJbJyRpbmplY3QnXSA9IFsnJHNjb3BlJywgJyRyb3V0ZSddO1xuICpcbiAqICAgLy8gVGhlblxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoTXlDb250cm9sbGVyKSkudG9FcXVhbChbJyRzY29wZScsICckcm91dGUnXSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFRoZSBhcnJheSBub3RhdGlvblxuICpcbiAqIEl0IGlzIG9mdGVuIGRlc2lyYWJsZSB0byBpbmxpbmUgSW5qZWN0ZWQgZnVuY3Rpb25zIGFuZCB0aGF0J3Mgd2hlbiBzZXR0aW5nIHRoZSBgJGluamVjdGAgcHJvcGVydHlcbiAqIGlzIHZlcnkgaW5jb252ZW5pZW50LiBJbiB0aGVzZSBzaXR1YXRpb25zIHVzaW5nIHRoZSBhcnJheSBub3RhdGlvbiB0byBzcGVjaWZ5IHRoZSBkZXBlbmRlbmNpZXMgaW5cbiAqIGEgd2F5IHRoYXQgc3Vydml2ZXMgbWluaWZpY2F0aW9uIGlzIGEgYmV0dGVyIGNob2ljZTpcbiAqXG4gKiBgYGBqc1xuICogICAvLyBXZSB3aXNoIHRvIHdyaXRlIHRoaXMgKG5vdCBtaW5pZmljYXRpb24gLyBvYmZ1c2NhdGlvbiBzYWZlKVxuICogICBpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oJGNvbXBpbGUsICRyb290U2NvcGUpIHtcbiAqICAgICAvLyAuLi5cbiAqICAgfSk7XG4gKlxuICogICAvLyBXZSBhcmUgZm9yY2VkIHRvIHdyaXRlIGJyZWFrIGlubGluaW5nXG4gKiAgIHZhciB0bXBGbiA9IGZ1bmN0aW9uKG9iZnVzY2F0ZWRDb21waWxlLCBvYmZ1c2NhdGVkUm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH07XG4gKiAgIHRtcEZuLiRpbmplY3QgPSBbJyRjb21waWxlJywgJyRyb290U2NvcGUnXTtcbiAqICAgaW5qZWN0b3IuaW52b2tlKHRtcEZuKTtcbiAqXG4gKiAgIC8vIFRvIGJldHRlciBzdXBwb3J0IGlubGluZSBmdW5jdGlvbiB0aGUgaW5saW5lIGFubm90YXRpb24gaXMgc3VwcG9ydGVkXG4gKiAgIGluamVjdG9yLmludm9rZShbJyRjb21waWxlJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbihvYmZDb21waWxlLCBvYmZSb290U2NvcGUpIHtcbiAqICAgICAvLyAuLi5cbiAqICAgfV0pO1xuICpcbiAqICAgLy8gVGhlcmVmb3JlXG4gKiAgIGV4cGVjdChpbmplY3Rvci5hbm5vdGF0ZShcbiAqICAgICAgWyckY29tcGlsZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24ob2JmdXNfJGNvbXBpbGUsIG9iZnVzXyRyb290U2NvcGUpIHt9XSlcbiAqICAgICkudG9FcXVhbChbJyRjb21waWxlJywgJyRyb290U2NvcGUnXSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBmbiBGdW5jdGlvbiBmb3Igd2hpY2ggZGVwZW5kZW50IHNlcnZpY2UgbmFtZXMgbmVlZCB0b1xuICogYmUgcmV0cmlldmVkIGFzIGRlc2NyaWJlZCBhYm92ZS5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbc3RyaWN0RGk9ZmFsc2VdIERpc2FsbG93IGFyZ3VtZW50IG5hbWUgYW5ub3RhdGlvbiBpbmZlcmVuY2UuXG4gKlxuICogQHJldHVybnMge0FycmF5LjxzdHJpbmc+fSBUaGUgbmFtZXMgb2YgdGhlIHNlcnZpY2VzIHdoaWNoIHRoZSBmdW5jdGlvbiByZXF1aXJlcy5cbiAqL1xuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaW5qZWN0b3IjbG9hZE5ld01vZHVsZXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiAqKlRoaXMgaXMgYSBkYW5nZXJvdXMgQVBJLCB3aGljaCB5b3UgdXNlIGF0IHlvdXIgb3duIHJpc2shKipcbiAqXG4gKiBBZGQgdGhlIHNwZWNpZmllZCBtb2R1bGVzIHRvIHRoZSBjdXJyZW50IGluamVjdG9yLlxuICpcbiAqIFRoaXMgbWV0aG9kIHdpbGwgYWRkIGVhY2ggb2YgdGhlIGluamVjdGFibGVzIHRvIHRoZSBpbmplY3RvciBhbmQgZXhlY3V0ZSBhbGwgb2YgdGhlIGNvbmZpZyBhbmQgcnVuXG4gKiBibG9ja3MgZm9yIGVhY2ggbW9kdWxlIHBhc3NlZCB0byB0aGUgbWV0aG9kLlxuICpcbiAqIElmIGEgbW9kdWxlIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIGludG8gdGhlIGluamVjdG9yIHRoZW4gaXQgd2lsbCBub3QgYmUgbG9hZGVkIGFnYWluLlxuICpcbiAqICogVGhlIGFwcGxpY2F0aW9uIGRldmVsb3BlciBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyB0aGUgY29kZSBjb250YWluaW5nIHRoZSBtb2R1bGVzOyBhbmQgZm9yXG4gKiBlbnN1cmluZyB0aGF0IGxhenkgc2NyaXB0cyBhcmUgbm90IGRvd25sb2FkZWQgYW5kIGV4ZWN1dGVkIG1vcmUgb2Z0ZW4gdGhhdCBkZXNpcmVkLlxuICogKiBQcmV2aW91c2x5IGNvbXBpbGVkIEhUTUwgd2lsbCBub3QgYmUgYWZmZWN0ZWQgYnkgbmV3bHkgbG9hZGVkIGRpcmVjdGl2ZXMsIGZpbHRlcnMgYW5kIGNvbXBvbmVudHMuXG4gKiAqIE1vZHVsZXMgY2Fubm90IGJlIHVubG9hZGVkLlxuICpcbiAqIFlvdSBjYW4gdXNlIHtAbGluayAkaW5qZWN0b3IjbW9kdWxlcyBgJGluamVjdG9yLm1vZHVsZXNgfSB0byBjaGVjayB3aGV0aGVyIGEgbW9kdWxlIGhhcyBiZWVuIGxvYWRlZFxuICogaW50byB0aGUgaW5qZWN0b3IsIHdoaWNoIG1heSBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBzY3JpcHQgaGFzIGJlZW4gZXhlY3V0ZWQgYWxyZWFkeS5cbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIGxvYWRpbmcgYSBidW5kbGUgb2YgbW9kdWxlcywgd2l0aCBhIHV0aWxpdHkgbWV0aG9kIGNhbGxlZCBgZ2V0U2NyaXB0YDpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBhcHAuZmFjdG9yeSgnbG9hZE1vZHVsZScsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICogICByZXR1cm4gZnVuY3Rpb24gbG9hZE1vZHVsZShtb2R1bGVOYW1lLCBidW5kbGVVcmwpIHtcbiAqICAgICByZXR1cm4gZ2V0U2NyaXB0KGJ1bmRsZVVybCkudGhlbihmdW5jdGlvbigpIHsgJGluamVjdG9yLmxvYWROZXdNb2R1bGVzKFttb2R1bGVOYW1lXSk7IH0pO1xuICogICB9O1xuICogfSlcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7QXJyYXk8U3RyaW5nfEZ1bmN0aW9ufEFycmF5Pj19IG1vZHMgYW4gYXJyYXkgb2YgbW9kdWxlcyB0byBsb2FkIGludG8gdGhlIGFwcGxpY2F0aW9uLlxuICogICAgIEVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgc2hvdWxkIGJlIHRoZSBuYW1lIG9mIGEgcHJlZGVmaW5lZCBtb2R1bGUgb3IgYSAoREkgYW5ub3RhdGVkKVxuICogICAgIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkIGJ5IHRoZSBpbmplY3RvciBhcyBhIGBjb25maWdgIGJsb2NrLlxuICogICAgIFNlZToge0BsaW5rIGFuZ3VsYXIubW9kdWxlIG1vZHVsZXN9XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkcHJvdmlkZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoZSB7QGxpbmsgYXV0by4kcHJvdmlkZSAkcHJvdmlkZX0gc2VydmljZSBoYXMgYSBudW1iZXIgb2YgbWV0aG9kcyBmb3IgcmVnaXN0ZXJpbmcgY29tcG9uZW50c1xuICogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIE1hbnkgb2YgdGhlc2UgZnVuY3Rpb25zIGFyZSBhbHNvIGV4cG9zZWQgb25cbiAqIHtAbGluayBhbmd1bGFyLk1vZHVsZX0uXG4gKlxuICogQW4gQW5ndWxhckpTICoqc2VydmljZSoqIGlzIGEgc2luZ2xldG9uIG9iamVjdCBjcmVhdGVkIGJ5IGEgKipzZXJ2aWNlIGZhY3RvcnkqKi4gIFRoZXNlICoqc2VydmljZVxuICogZmFjdG9yaWVzKiogYXJlIGZ1bmN0aW9ucyB3aGljaCwgaW4gdHVybiwgYXJlIGNyZWF0ZWQgYnkgYSAqKnNlcnZpY2UgcHJvdmlkZXIqKi5cbiAqIFRoZSAqKnNlcnZpY2UgcHJvdmlkZXJzKiogYXJlIGNvbnN0cnVjdG9yIGZ1bmN0aW9ucy4gV2hlbiBpbnN0YW50aWF0ZWQgdGhleSBtdXN0IGNvbnRhaW4gYVxuICogcHJvcGVydHkgY2FsbGVkIGAkZ2V0YCwgd2hpY2ggaG9sZHMgdGhlICoqc2VydmljZSBmYWN0b3J5KiogZnVuY3Rpb24uXG4gKlxuICogV2hlbiB5b3UgcmVxdWVzdCBhIHNlcnZpY2UsIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSBpcyByZXNwb25zaWJsZSBmb3IgZmluZGluZyB0aGVcbiAqIGNvcnJlY3QgKipzZXJ2aWNlIHByb3ZpZGVyKiosIGluc3RhbnRpYXRpbmcgaXQgYW5kIHRoZW4gY2FsbGluZyBpdHMgYCRnZXRgICoqc2VydmljZSBmYWN0b3J5KipcbiAqIGZ1bmN0aW9uIHRvIGdldCB0aGUgaW5zdGFuY2Ugb2YgdGhlICoqc2VydmljZSoqLlxuICpcbiAqIE9mdGVuIHNlcnZpY2VzIGhhdmUgbm8gY29uZmlndXJhdGlvbiBvcHRpb25zIGFuZCB0aGVyZSBpcyBubyBuZWVkIHRvIGFkZCBtZXRob2RzIHRvIHRoZSBzZXJ2aWNlXG4gKiBwcm92aWRlci4gIFRoZSBwcm92aWRlciB3aWxsIGJlIG5vIG1vcmUgdGhhbiBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHdpdGggYSBgJGdldGAgcHJvcGVydHkuIEZvclxuICogdGhlc2UgY2FzZXMgdGhlIHtAbGluayBhdXRvLiRwcm92aWRlICRwcm92aWRlfSBzZXJ2aWNlIGhhcyBhZGRpdGlvbmFsIGhlbHBlciBtZXRob2RzIHRvIHJlZ2lzdGVyXG4gKiBzZXJ2aWNlcyB3aXRob3V0IHNwZWNpZnlpbmcgYSBwcm92aWRlci5cbiAqXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3Byb3ZpZGVyIHByb3ZpZGVyKG5hbWUsIHByb3ZpZGVyKX0gLSByZWdpc3RlcnMgYSAqKnNlcnZpY2UgcHJvdmlkZXIqKiB3aXRoIHRoZVxuICogICAgIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9XG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2NvbnN0YW50IGNvbnN0YW50KG5hbWUsIG9iail9IC0gcmVnaXN0ZXJzIGEgdmFsdWUvb2JqZWN0IHRoYXQgY2FuIGJlIGFjY2Vzc2VkIGJ5XG4gKiAgICAgcHJvdmlkZXJzIGFuZCBzZXJ2aWNlcy5cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgdmFsdWUobmFtZSwgb2JqKX0gLSByZWdpc3RlcnMgYSB2YWx1ZS9vYmplY3QgdGhhdCBjYW4gb25seSBiZSBhY2Nlc3NlZCBieVxuICogICAgIHNlcnZpY2VzLCBub3QgcHJvdmlkZXJzLlxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5IGZhY3RvcnkobmFtZSwgZm4pfSAtIHJlZ2lzdGVycyBhIHNlcnZpY2UgKipmYWN0b3J5IGZ1bmN0aW9uKipcbiAqICAgICB0aGF0IHdpbGwgYmUgd3JhcHBlZCBpbiBhICoqc2VydmljZSBwcm92aWRlcioqIG9iamVjdCwgd2hvc2UgYCRnZXRgIHByb3BlcnR5IHdpbGwgY29udGFpbiB0aGVcbiAqICAgICBnaXZlbiBmYWN0b3J5IGZ1bmN0aW9uLlxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlIHNlcnZpY2UobmFtZSwgRm4pfSAtIHJlZ2lzdGVycyBhICoqY29uc3RydWN0b3IgZnVuY3Rpb24qKlxuICogICAgIHRoYXQgd2lsbCBiZSB3cmFwcGVkIGluIGEgKipzZXJ2aWNlIHByb3ZpZGVyKiogb2JqZWN0LCB3aG9zZSBgJGdldGAgcHJvcGVydHkgd2lsbCBpbnN0YW50aWF0ZVxuICogICAgICBhIG5ldyBvYmplY3QgdXNpbmcgdGhlIGdpdmVuIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNkZWNvcmF0b3IgZGVjb3JhdG9yKG5hbWUsIGRlY29yRm4pfSAtIHJlZ2lzdGVycyBhICoqZGVjb3JhdG9yIGZ1bmN0aW9uKiogdGhhdFxuICogICAgICB3aWxsIGJlIGFibGUgdG8gbW9kaWZ5IG9yIHJlcGxhY2UgdGhlIGltcGxlbWVudGF0aW9uIG9mIGFub3RoZXIgc2VydmljZS5cbiAqXG4gKiBTZWUgdGhlIGluZGl2aWR1YWwgbWV0aG9kcyBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhbmQgZXhhbXBsZXMuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNwcm92aWRlclxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVnaXN0ZXIgYSAqKnByb3ZpZGVyIGZ1bmN0aW9uKiogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIFByb3ZpZGVyIGZ1bmN0aW9uc1xuICogYXJlIGNvbnN0cnVjdG9yIGZ1bmN0aW9ucywgd2hvc2UgaW5zdGFuY2VzIGFyZSByZXNwb25zaWJsZSBmb3IgXCJwcm92aWRpbmdcIiBhIGZhY3RvcnkgZm9yIGFcbiAqIHNlcnZpY2UuXG4gKlxuICogU2VydmljZSBwcm92aWRlciBuYW1lcyBzdGFydCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRoZXkgcHJvdmlkZSBmb2xsb3dlZCBieSBgUHJvdmlkZXJgLlxuICogRm9yIGV4YW1wbGUsIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIGhhcyBhIHByb3ZpZGVyIGNhbGxlZFxuICoge0BsaW5rIG5nLiRsb2dQcm92aWRlciAkbG9nUHJvdmlkZXJ9LlxuICpcbiAqIFNlcnZpY2UgcHJvdmlkZXIgb2JqZWN0cyBjYW4gaGF2ZSBhZGRpdGlvbmFsIG1ldGhvZHMgd2hpY2ggYWxsb3cgY29uZmlndXJhdGlvbiBvZiB0aGUgcHJvdmlkZXJcbiAqIGFuZCBpdHMgc2VydmljZS4gSW1wb3J0YW50bHksIHlvdSBjYW4gY29uZmlndXJlIHdoYXQga2luZCBvZiBzZXJ2aWNlIGlzIGNyZWF0ZWQgYnkgdGhlIGAkZ2V0YFxuICogbWV0aG9kLCBvciBob3cgdGhhdCBzZXJ2aWNlIHdpbGwgYWN0LiBGb3IgZXhhbXBsZSwgdGhlIHtAbGluayBuZy4kbG9nUHJvdmlkZXIgJGxvZ1Byb3ZpZGVyfSBoYXMgYVxuICogbWV0aG9kIHtAbGluayBuZy4kbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkIGRlYnVnRW5hYmxlZH1cbiAqIHdoaWNoIGxldHMgeW91IHNwZWNpZnkgd2hldGhlciB0aGUge0BsaW5rIG5nLiRsb2cgJGxvZ30gc2VydmljZSB3aWxsIGxvZyBkZWJ1ZyBtZXNzYWdlcyB0byB0aGVcbiAqIGNvbnNvbGUgb3Igbm90LlxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGluamVjdCBvdGhlciBwcm92aWRlcnMgaW50byB0aGUgcHJvdmlkZXIgZnVuY3Rpb24sXG4gKiBidXQgdGhlIGluamVjdGVkIHByb3ZpZGVyIG11c3QgaGF2ZSBiZWVuIGRlZmluZWQgYmVmb3JlIHRoZSBvbmUgdGhhdCByZXF1aXJlcyBpdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuIE5PVEU6IHRoZSBwcm92aWRlciB3aWxsIGJlIGF2YWlsYWJsZSB1bmRlciBgbmFtZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnUHJvdmlkZXInYCBrZXkuXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oKSl9IHByb3ZpZGVyIElmIHRoZSBwcm92aWRlciBpczpcbiAqXG4gKiAgIC0gYE9iamVjdGA6IHRoZW4gaXQgc2hvdWxkIGhhdmUgYSBgJGdldGAgbWV0aG9kLiBUaGUgYCRnZXRgIG1ldGhvZCB3aWxsIGJlIGludm9rZWQgdXNpbmdcbiAqICAgICB7QGxpbmsgYXV0by4kaW5qZWN0b3IjaW52b2tlICRpbmplY3Rvci5pbnZva2UoKX0gd2hlbiBhbiBpbnN0YW5jZSBuZWVkcyB0byBiZSBjcmVhdGVkLlxuICogICAtIGBDb25zdHJ1Y3RvcmA6IGEgbmV3IGluc3RhbmNlIG9mIHRoZSBwcm92aWRlciB3aWxsIGJlIGNyZWF0ZWQgdXNpbmdcbiAqICAgICB7QGxpbmsgYXV0by4kaW5qZWN0b3IjaW5zdGFudGlhdGUgJGluamVjdG9yLmluc3RhbnRpYXRlKCl9LCB0aGVuIHRyZWF0ZWQgYXMgYG9iamVjdGAuXG4gKlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxuXG4gKiBAZXhhbXBsZVxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gY3JlYXRlIGEgc2ltcGxlIGV2ZW50IHRyYWNraW5nIHNlcnZpY2UgYW5kIHJlZ2lzdGVyIGl0IHVzaW5nXG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNwcm92aWRlciAkcHJvdmlkZS5wcm92aWRlcigpfS5cbiAqXG4gKiBgYGBqc1xuICogIC8vIERlZmluZSB0aGUgZXZlbnRUcmFja2VyIHByb3ZpZGVyXG4gKiAgZnVuY3Rpb24gRXZlbnRUcmFja2VyUHJvdmlkZXIoKSB7XG4gKiAgICB2YXIgdHJhY2tpbmdVcmwgPSAnL3RyYWNrJztcbiAqXG4gKiAgICAvLyBBIHByb3ZpZGVyIG1ldGhvZCBmb3IgY29uZmlndXJpbmcgd2hlcmUgdGhlIHRyYWNrZWQgZXZlbnRzIHNob3VsZCBiZWVuIHNhdmVkXG4gKiAgICB0aGlzLnNldFRyYWNraW5nVXJsID0gZnVuY3Rpb24odXJsKSB7XG4gKiAgICAgIHRyYWNraW5nVXJsID0gdXJsO1xuICogICAgfTtcbiAqXG4gKiAgICAvLyBUaGUgc2VydmljZSBmYWN0b3J5IGZ1bmN0aW9uXG4gKiAgICB0aGlzLiRnZXQgPSBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcbiAqICAgICAgdmFyIHRyYWNrZWRFdmVudHMgPSB7fTtcbiAqICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAvLyBDYWxsIHRoaXMgdG8gdHJhY2sgYW4gZXZlbnRcbiAqICAgICAgICBldmVudDogZnVuY3Rpb24oZXZlbnQpIHtcbiAqICAgICAgICAgIHZhciBjb3VudCA9IHRyYWNrZWRFdmVudHNbZXZlbnRdIHx8IDA7XG4gKiAgICAgICAgICBjb3VudCArPSAxO1xuICogICAgICAgICAgdHJhY2tlZEV2ZW50c1tldmVudF0gPSBjb3VudDtcbiAqICAgICAgICAgIHJldHVybiBjb3VudDtcbiAqICAgICAgICB9LFxuICogICAgICAgIC8vIENhbGwgdGhpcyB0byBzYXZlIHRoZSB0cmFja2VkIGV2ZW50cyB0byB0aGUgdHJhY2tpbmdVcmxcbiAqICAgICAgICBzYXZlOiBmdW5jdGlvbigpIHtcbiAqICAgICAgICAgICRodHRwLnBvc3QodHJhY2tpbmdVcmwsIHRyYWNrZWRFdmVudHMpO1xuICogICAgICAgIH1cbiAqICAgICAgfTtcbiAqICAgIH1dO1xuICogIH1cbiAqXG4gKiAgZGVzY3JpYmUoJ2V2ZW50VHJhY2tlcicsIGZ1bmN0aW9uKCkge1xuICogICAgdmFyIHBvc3RTcHk7XG4gKlxuICogICAgYmVmb3JlRWFjaChtb2R1bGUoZnVuY3Rpb24oJHByb3ZpZGUpIHtcbiAqICAgICAgLy8gUmVnaXN0ZXIgdGhlIGV2ZW50VHJhY2tlciBwcm92aWRlclxuICogICAgICAkcHJvdmlkZS5wcm92aWRlcignZXZlbnRUcmFja2VyJywgRXZlbnRUcmFja2VyUHJvdmlkZXIpO1xuICogICAgfSkpO1xuICpcbiAqICAgIGJlZm9yZUVhY2gobW9kdWxlKGZ1bmN0aW9uKGV2ZW50VHJhY2tlclByb3ZpZGVyKSB7XG4gKiAgICAgIC8vIENvbmZpZ3VyZSBldmVudFRyYWNrZXIgcHJvdmlkZXJcbiAqICAgICAgZXZlbnRUcmFja2VyUHJvdmlkZXIuc2V0VHJhY2tpbmdVcmwoJy9jdXN0b20tdHJhY2snKTtcbiAqICAgIH0pKTtcbiAqXG4gKiAgICBpdCgndHJhY2tzIGV2ZW50cycsIGluamVjdChmdW5jdGlvbihldmVudFRyYWNrZXIpIHtcbiAqICAgICAgZXhwZWN0KGV2ZW50VHJhY2tlci5ldmVudCgnbG9naW4nKSkudG9FcXVhbCgxKTtcbiAqICAgICAgZXhwZWN0KGV2ZW50VHJhY2tlci5ldmVudCgnbG9naW4nKSkudG9FcXVhbCgyKTtcbiAqICAgIH0pKTtcbiAqXG4gKiAgICBpdCgnc2F2ZXMgdG8gdGhlIHRyYWNraW5nIHVybCcsIGluamVjdChmdW5jdGlvbihldmVudFRyYWNrZXIsICRodHRwKSB7XG4gKiAgICAgIHBvc3RTcHkgPSBzcHlPbigkaHR0cCwgJ3Bvc3QnKTtcbiAqICAgICAgZXZlbnRUcmFja2VyLmV2ZW50KCdsb2dpbicpO1xuICogICAgICBldmVudFRyYWNrZXIuc2F2ZSgpO1xuICogICAgICBleHBlY3QocG9zdFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICogICAgICBleHBlY3QocG9zdFNweS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdKS5ub3QudG9FcXVhbCgnL3RyYWNrJyk7XG4gKiAgICAgIGV4cGVjdChwb3N0U3B5Lm1vc3RSZWNlbnRDYWxsLmFyZ3NbMF0pLnRvRXF1YWwoJy9jdXN0b20tdHJhY2snKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkubW9zdFJlY2VudENhbGwuYXJnc1sxXSkudG9FcXVhbCh7ICdsb2dpbic6IDEgfSk7XG4gKiAgICB9KSk7XG4gKiAgfSk7XG4gKiBgYGBcbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI2ZhY3RvcnlcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipzZXJ2aWNlIGZhY3RvcnkqKiwgd2hpY2ggd2lsbCBiZSBjYWxsZWQgdG8gcmV0dXJuIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxuICogVGhpcyBpcyBzaG9ydCBmb3IgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHdoZXJlIGl0cyBwcm92aWRlciBjb25zaXN0cyBvZiBvbmx5IGEgYCRnZXRgIHByb3BlcnR5LFxuICogd2hpY2ggaXMgdGhlIGdpdmVuIHNlcnZpY2UgZmFjdG9yeSBmdW5jdGlvbi5cbiAqIFlvdSBzaG91bGQgdXNlIHtAbGluayBhdXRvLiRwcm92aWRlI2ZhY3RvcnkgJHByb3ZpZGUuZmFjdG9yeShnZXRGbil9IGlmIHlvdSBkbyBub3QgbmVlZCB0b1xuICogY29uZmlndXJlIHlvdXIgc2VydmljZSBpbiBhIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb258QXJyYXkuPHN0cmluZ3xGdW5jdGlvbj59ICRnZXRGbiBUaGUgaW5qZWN0YWJsZSAkZ2V0Rm4gZm9yIHRoZSBpbnN0YW5jZSBjcmVhdGlvbi5cbiAqICAgICAgICAgICAgICAgICAgICAgIEludGVybmFsbHkgdGhpcyBpcyBhIHNob3J0IGhhbmQgZm9yIGAkcHJvdmlkZS5wcm92aWRlcihuYW1lLCB7JGdldDogJGdldEZufSlgLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgb2YgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlXG4gKiBgYGBqc1xuICogICAkcHJvdmlkZS5mYWN0b3J5KCdwaW5nJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gKiAgICAgcmV0dXJuIGZ1bmN0aW9uIHBpbmcoKSB7XG4gKiAgICAgICByZXR1cm4gJGh0dHAuc2VuZCgnL3BpbmcnKTtcbiAqICAgICB9O1xuICogICB9XSk7XG4gKiBgYGBcbiAqIFlvdSB3b3VsZCB0aGVuIGluamVjdCBhbmQgdXNlIHRoaXMgc2VydmljZSBsaWtlIHRoaXM6XG4gKiBgYGBqc1xuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XG4gKiAgICAgcGluZygpO1xuICogICB9XSk7XG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJHByb3ZpZGUjc2VydmljZVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVnaXN0ZXIgYSAqKnNlcnZpY2UgY29uc3RydWN0b3IqKiwgd2hpY2ggd2lsbCBiZSBpbnZva2VkIHdpdGggYG5ld2AgdG8gY3JlYXRlIHRoZSBzZXJ2aWNlXG4gKiBpbnN0YW5jZS5cbiAqIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHMgcHJvdmlkZXIncyBgJGdldGAgcHJvcGVydHkgaXMgYSBmYWN0b3J5XG4gKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gaW5zdGFuY2UgaW5zdGFudGlhdGVkIGJ5IHRoZSBpbmplY3RvciBmcm9tIHRoZSBzZXJ2aWNlIGNvbnN0cnVjdG9yXG4gKiBmdW5jdGlvbi5cbiAqXG4gKiBJbnRlcm5hbGx5IGl0IGxvb2tzIGEgYml0IGxpa2UgdGhpczpcbiAqXG4gKiBgYGBcbiAqIHtcbiAqICAgJGdldDogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuICRpbmplY3Rvci5pbnN0YW50aWF0ZShjb25zdHJ1Y3Rvcik7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfSBpZiB5b3UgZGVmaW5lIHlvdXIgc2VydmljZVxuICogYXMgYSB0eXBlL2NsYXNzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb258QXJyYXkuPHN0cmluZ3xGdW5jdGlvbj59IGNvbnN0cnVjdG9yIEFuIGluamVjdGFibGUgY2xhc3MgKGNvbnN0cnVjdG9yIGZ1bmN0aW9uKVxuICogICAgIHRoYXQgd2lsbCBiZSBpbnN0YW50aWF0ZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIHByb3ZpZGVyIGluc3RhbmNlXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgaXMgYW4gZXhhbXBsZSBvZiByZWdpc3RlcmluZyBhIHNlcnZpY2UgdXNpbmdcbiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2UgJHByb3ZpZGUuc2VydmljZShjbGFzcyl9LlxuICogYGBganNcbiAqICAgdmFyIFBpbmcgPSBmdW5jdGlvbigkaHR0cCkge1xuICogICAgIHRoaXMuJGh0dHAgPSAkaHR0cDtcbiAqICAgfTtcbiAqXG4gKiAgIFBpbmcuJGluamVjdCA9IFsnJGh0dHAnXTtcbiAqXG4gKiAgIFBpbmcucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4gdGhpcy4kaHR0cC5nZXQoJy9waW5nJyk7XG4gKiAgIH07XG4gKiAgICRwcm92aWRlLnNlcnZpY2UoJ3BpbmcnLCBQaW5nKTtcbiAqIGBgYFxuICogWW91IHdvdWxkIHRoZW4gaW5qZWN0IGFuZCB1c2UgdGhpcyBzZXJ2aWNlIGxpa2UgdGhpczpcbiAqIGBgYGpzXG4gKiAgIHNvbWVNb2R1bGUuY29udHJvbGxlcignQ3RybCcsIFsncGluZycsIGZ1bmN0aW9uKHBpbmcpIHtcbiAqICAgICBwaW5nLnNlbmQoKTtcbiAqICAgfV0pO1xuICogYGBgXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI3ZhbHVlXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqdmFsdWUgc2VydmljZSoqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LCBzdWNoIGFzIGEgc3RyaW5nLCBhXG4gKiBudW1iZXIsIGFuIGFycmF5LCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbi4gVGhpcyBpcyBzaG9ydCBmb3IgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHdoZXJlIGl0c1xuICogcHJvdmlkZXIncyBgJGdldGAgcHJvcGVydHkgaXMgYSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRzIGFuZCByZXR1cm5zIHRoZSAqKnZhbHVlXG4gKiBzZXJ2aWNlKiouIFRoYXQgYWxzbyBtZWFucyBpdCBpcyBub3QgcG9zc2libGUgdG8gaW5qZWN0IG90aGVyIHNlcnZpY2VzIGludG8gYSB2YWx1ZSBzZXJ2aWNlLlxuICpcbiAqIFZhbHVlIHNlcnZpY2VzIGFyZSBzaW1pbGFyIHRvIGNvbnN0YW50IHNlcnZpY2VzLCBleGNlcHQgdGhhdCB0aGV5IGNhbm5vdCBiZSBpbmplY3RlZCBpbnRvIGFcbiAqIG1vZHVsZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIChzZWUge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZ30pIGJ1dCB0aGV5IGNhbiBiZSBvdmVycmlkZGVuIGJ5XG4gKiBhbiBBbmd1bGFySlMge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yIGRlY29yYXRvcn0uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIHByb3ZpZGVyIGluc3RhbmNlXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgYXJlIHNvbWUgZXhhbXBsZXMgb2YgY3JlYXRpbmcgdmFsdWUgc2VydmljZXMuXG4gKiBgYGBqc1xuICogICAkcHJvdmlkZS52YWx1ZSgnQURNSU5fVVNFUicsICdhZG1pbicpO1xuICpcbiAqICAgJHByb3ZpZGUudmFsdWUoJ1JvbGVMb29rdXAnLCB7IGFkbWluOiAwLCB3cml0ZXI6IDEsIHJlYWRlcjogMiB9KTtcbiAqXG4gKiAgICRwcm92aWRlLnZhbHVlKCdoYWxmT2YnLCBmdW5jdGlvbih2YWx1ZSkge1xuICogICAgIHJldHVybiB2YWx1ZSAvIDI7XG4gKiAgIH0pO1xuICogYGBgXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI2NvbnN0YW50XG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqY29uc3RhbnQgc2VydmljZSoqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LCBzdWNoIGFzIGEgc3RyaW5nLFxuICogYSBudW1iZXIsIGFuIGFycmF5LCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbi4gTGlrZSB0aGUge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgdmFsdWV9LCBpdCBpcyBub3RcbiAqIHBvc3NpYmxlIHRvIGluamVjdCBvdGhlciBzZXJ2aWNlcyBpbnRvIGEgY29uc3RhbnQuXG4gKlxuICogQnV0IHVubGlrZSB7QGxpbmsgYXV0by4kcHJvdmlkZSN2YWx1ZSB2YWx1ZX0sIGEgY29uc3RhbnQgY2FuIGJlXG4gKiBpbmplY3RlZCBpbnRvIGEgbW9kdWxlIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb24gKHNlZSB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjY29uZmlnfSkgYW5kIGl0IGNhbm5vdFxuICogYmUgb3ZlcnJpZGRlbiBieSBhbiBBbmd1bGFySlMge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yIGRlY29yYXRvcn0uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvbnN0YW50LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgY29uc3RhbnQgdmFsdWUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIGluc3RhbmNlXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgYSBzb21lIGV4YW1wbGVzIG9mIGNyZWF0aW5nIGNvbnN0YW50czpcbiAqIGBgYGpzXG4gKiAgICRwcm92aWRlLmNvbnN0YW50KCdTSEFSRF9IRUlHSFQnLCAzMDYpO1xuICpcbiAqICAgJHByb3ZpZGUuY29uc3RhbnQoJ01ZX0NPTE9VUlMnLCBbJ3JlZCcsICdibHVlJywgJ2dyZXknXSk7XG4gKlxuICogICAkcHJvdmlkZS5jb25zdGFudCgnZG91YmxlJywgZnVuY3Rpb24odmFsdWUpIHtcbiAqICAgICByZXR1cm4gdmFsdWUgKiAyO1xuICogICB9KTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNkZWNvcmF0b3JcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipkZWNvcmF0b3IgZnVuY3Rpb24qKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gQSBkZWNvcmF0b3IgZnVuY3Rpb25cbiAqIGludGVyY2VwdHMgdGhlIGNyZWF0aW9uIG9mIGEgc2VydmljZSwgYWxsb3dpbmcgaXQgdG8gb3ZlcnJpZGUgb3IgbW9kaWZ5IHRoZSBiZWhhdmlvciBvZiB0aGVcbiAqIHNlcnZpY2UuIFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGRlY29yYXRvciBmdW5jdGlvbiBtYXkgYmUgdGhlIG9yaWdpbmFsIHNlcnZpY2UsIG9yIGEgbmV3IHNlcnZpY2VcbiAqIHRoYXQgcmVwbGFjZXMgKG9yIHdyYXBzIGFuZCBkZWxlZ2F0ZXMgdG8pIHRoZSBvcmlnaW5hbCBzZXJ2aWNlLlxuICpcbiAqIFlvdSBjYW4gZmluZCBvdXQgbW9yZSBhYm91dCB1c2luZyBkZWNvcmF0b3JzIGluIHRoZSB7QGxpbmsgZ3VpZGUvZGVjb3JhdG9yc30gZ3VpZGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gZGVjb3JhdGUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBkZWNvcmF0b3IgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgc2VydmljZSBuZWVkcyB0byBiZVxuICogICAgcHJvdmlkZWQgYW5kIHNob3VsZCByZXR1cm4gdGhlIGRlY29yYXRlZCBzZXJ2aWNlIGluc3RhbmNlLiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHVzaW5nXG4gKiAgICB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSBpbmplY3Rvci5pbnZva2V9IG1ldGhvZCBhbmQgaXMgdGhlcmVmb3JlIGZ1bGx5IGluamVjdGFibGUuXG4gKiAgICBMb2NhbCBpbmplY3Rpb24gYXJndW1lbnRzOlxuICpcbiAqICAgICogYCRkZWxlZ2F0ZWAgLSBUaGUgb3JpZ2luYWwgc2VydmljZSBpbnN0YW5jZSwgd2hpY2ggY2FuIGJlIHJlcGxhY2VkLCBtb25rZXkgcGF0Y2hlZCwgY29uZmlndXJlZCxcbiAqICAgICAgZGVjb3JhdGVkIG9yIGRlbGVnYXRlZCB0by5cbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSB3ZSBkZWNvcmF0ZSB0aGUge0BsaW5rIG5nLiRsb2cgJGxvZ30gc2VydmljZSB0byBjb252ZXJ0IHdhcm5pbmdzIHRvIGVycm9ycyBieSBpbnRlcmNlcHRpbmdcbiAqIGNhbGxzIHRvIHtAbGluayBuZy4kbG9nI2Vycm9yICRsb2cud2FybigpfS5cbiAqIGBgYGpzXG4gKiAgICRwcm92aWRlLmRlY29yYXRvcignJGxvZycsIFsnJGRlbGVnYXRlJywgZnVuY3Rpb24oJGRlbGVnYXRlKSB7XG4gKiAgICAgJGRlbGVnYXRlLndhcm4gPSAkZGVsZWdhdGUuZXJyb3I7XG4gKiAgICAgcmV0dXJuICRkZWxlZ2F0ZTtcbiAqICAgfV0pO1xuICogYGBgXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVJbmplY3Rvcihtb2R1bGVzVG9Mb2FkLCBzdHJpY3REaSkge1xuICBzdHJpY3REaSA9IChzdHJpY3REaSA9PT0gdHJ1ZSk7XG4gIHZhciBJTlNUQU5USUFUSU5HID0ge30sXG4gICAgICBwcm92aWRlclN1ZmZpeCA9ICdQcm92aWRlcicsXG4gICAgICBwYXRoID0gW10sXG4gICAgICBsb2FkZWRNb2R1bGVzID0gbmV3IE5nTWFwKCksXG4gICAgICBwcm92aWRlckNhY2hlID0ge1xuICAgICAgICAkcHJvdmlkZToge1xuICAgICAgICAgICAgcHJvdmlkZXI6IHN1cHBvcnRPYmplY3QocHJvdmlkZXIpLFxuICAgICAgICAgICAgZmFjdG9yeTogc3VwcG9ydE9iamVjdChmYWN0b3J5KSxcbiAgICAgICAgICAgIHNlcnZpY2U6IHN1cHBvcnRPYmplY3Qoc2VydmljZSksXG4gICAgICAgICAgICB2YWx1ZTogc3VwcG9ydE9iamVjdCh2YWx1ZSksXG4gICAgICAgICAgICBjb25zdGFudDogc3VwcG9ydE9iamVjdChjb25zdGFudCksXG4gICAgICAgICAgICBkZWNvcmF0b3I6IGRlY29yYXRvclxuICAgICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm92aWRlckluamVjdG9yID0gKHByb3ZpZGVyQ2FjaGUuJGluamVjdG9yID1cbiAgICAgICAgICBjcmVhdGVJbnRlcm5hbEluamVjdG9yKHByb3ZpZGVyQ2FjaGUsIGZ1bmN0aW9uKHNlcnZpY2VOYW1lLCBjYWxsZXIpIHtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKGNhbGxlcikpIHtcbiAgICAgICAgICAgICAgcGF0aC5wdXNoKGNhbGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3VucHInLCAnVW5rbm93biBwcm92aWRlcjogezB9JywgcGF0aC5qb2luKCcgPC0gJykpO1xuICAgICAgICAgIH0pKSxcbiAgICAgIGluc3RhbmNlQ2FjaGUgPSB7fSxcbiAgICAgIHByb3RvSW5zdGFuY2VJbmplY3RvciA9XG4gICAgICAgICAgY3JlYXRlSW50ZXJuYWxJbmplY3RvcihpbnN0YW5jZUNhY2hlLCBmdW5jdGlvbihzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XG4gICAgICAgICAgICB2YXIgcHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChzZXJ2aWNlTmFtZSArIHByb3ZpZGVyU3VmZml4LCBjYWxsZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyLiRnZXQsIHByb3ZpZGVyLCB1bmRlZmluZWQsIHNlcnZpY2VOYW1lKTtcbiAgICAgICAgICB9KSxcbiAgICAgIGluc3RhbmNlSW5qZWN0b3IgPSBwcm90b0luc3RhbmNlSW5qZWN0b3I7XG5cbiAgcHJvdmlkZXJDYWNoZVsnJGluamVjdG9yJyArIHByb3ZpZGVyU3VmZml4XSA9IHsgJGdldDogdmFsdWVGbihwcm90b0luc3RhbmNlSW5qZWN0b3IpIH07XG4gIGluc3RhbmNlSW5qZWN0b3IubW9kdWxlcyA9IHByb3ZpZGVySW5qZWN0b3IubW9kdWxlcyA9IGNyZWF0ZU1hcCgpO1xuICB2YXIgcnVuQmxvY2tzID0gbG9hZE1vZHVsZXMobW9kdWxlc1RvTG9hZCk7XG4gIGluc3RhbmNlSW5qZWN0b3IgPSBwcm90b0luc3RhbmNlSW5qZWN0b3IuZ2V0KCckaW5qZWN0b3InKTtcbiAgaW5zdGFuY2VJbmplY3Rvci5zdHJpY3REaSA9IHN0cmljdERpO1xuICBmb3JFYWNoKHJ1bkJsb2NrcywgZnVuY3Rpb24oZm4pIHsgaWYgKGZuKSBpbnN0YW5jZUluamVjdG9yLmludm9rZShmbik7IH0pO1xuXG4gIGluc3RhbmNlSW5qZWN0b3IubG9hZE5ld01vZHVsZXMgPSBmdW5jdGlvbihtb2RzKSB7XG4gICAgZm9yRWFjaChsb2FkTW9kdWxlcyhtb2RzKSwgZnVuY3Rpb24oZm4pIHsgaWYgKGZuKSBpbnN0YW5jZUluamVjdG9yLmludm9rZShmbik7IH0pO1xuICB9O1xuXG5cbiAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3I7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vICRwcm92aWRlclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBmdW5jdGlvbiBzdXBwb3J0T2JqZWN0KGRlbGVnYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChpc09iamVjdChrZXkpKSB7XG4gICAgICAgIGZvckVhY2goa2V5LCByZXZlcnNlUGFyYW1zKGRlbGVnYXRlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVsZWdhdGUoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3ZpZGVyKG5hbWUsIHByb3ZpZGVyXykge1xuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdzZXJ2aWNlJyk7XG4gICAgaWYgKGlzRnVuY3Rpb24ocHJvdmlkZXJfKSB8fCBpc0FycmF5KHByb3ZpZGVyXykpIHtcbiAgICAgIHByb3ZpZGVyXyA9IHByb3ZpZGVySW5qZWN0b3IuaW5zdGFudGlhdGUocHJvdmlkZXJfKTtcbiAgICB9XG4gICAgaWYgKCFwcm92aWRlcl8uJGdldCkge1xuICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdwZ2V0JywgJ1Byb3ZpZGVyIFxcJ3swfVxcJyBtdXN0IGRlZmluZSAkZ2V0IGZhY3RvcnkgbWV0aG9kLicsIG5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gKHByb3ZpZGVyQ2FjaGVbbmFtZSArIHByb3ZpZGVyU3VmZml4XSA9IHByb3ZpZGVyXyk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmZvcmNlUmV0dXJuVmFsdWUobmFtZSwgZmFjdG9yeSkge1xuICAgIHJldHVybiAvKiogQHRoaXMgKi8gZnVuY3Rpb24gZW5mb3JjZWRSZXR1cm5WYWx1ZSgpIHtcbiAgICAgIHZhciByZXN1bHQgPSBpbnN0YW5jZUluamVjdG9yLmludm9rZShmYWN0b3J5LCB0aGlzKTtcbiAgICAgIGlmIChpc1VuZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycigndW5kZWYnLCAnUHJvdmlkZXIgXFwnezB9XFwnIG11c3QgcmV0dXJuIGEgdmFsdWUgZnJvbSAkZ2V0IGZhY3RvcnkgbWV0aG9kLicsIG5hbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gZmFjdG9yeShuYW1lLCBmYWN0b3J5Rm4sIGVuZm9yY2UpIHtcbiAgICByZXR1cm4gcHJvdmlkZXIobmFtZSwge1xuICAgICAgJGdldDogZW5mb3JjZSAhPT0gZmFsc2UgPyBlbmZvcmNlUmV0dXJuVmFsdWUobmFtZSwgZmFjdG9yeUZuKSA6IGZhY3RvcnlGblxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VydmljZShuYW1lLCBjb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBmYWN0b3J5KG5hbWUsIFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgICByZXR1cm4gJGluamVjdG9yLmluc3RhbnRpYXRlKGNvbnN0cnVjdG9yKTtcbiAgICB9XSk7XG4gIH1cblxuICBmdW5jdGlvbiB2YWx1ZShuYW1lLCB2YWwpIHsgcmV0dXJuIGZhY3RvcnkobmFtZSwgdmFsdWVGbih2YWwpLCBmYWxzZSk7IH1cblxuICBmdW5jdGlvbiBjb25zdGFudChuYW1lLCB2YWx1ZSkge1xuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdjb25zdGFudCcpO1xuICAgIHByb3ZpZGVyQ2FjaGVbbmFtZV0gPSB2YWx1ZTtcbiAgICBpbnN0YW5jZUNhY2hlW25hbWVdID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBkZWNvcmF0b3Ioc2VydmljZU5hbWUsIGRlY29yRm4pIHtcbiAgICB2YXIgb3JpZ1Byb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoc2VydmljZU5hbWUgKyBwcm92aWRlclN1ZmZpeCksXG4gICAgICAgIG9yaWckZ2V0ID0gb3JpZ1Byb3ZpZGVyLiRnZXQ7XG5cbiAgICBvcmlnUHJvdmlkZXIuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9yaWdJbnN0YW5jZSA9IGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKG9yaWckZ2V0LCBvcmlnUHJvdmlkZXIpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGRlY29yRm4sIG51bGwsIHskZGVsZWdhdGU6IG9yaWdJbnN0YW5jZX0pO1xuICAgIH07XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gTW9kdWxlIExvYWRpbmdcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGZ1bmN0aW9uIGxvYWRNb2R1bGVzKG1vZHVsZXNUb0xvYWQpIHtcbiAgICBhc3NlcnRBcmcoaXNVbmRlZmluZWQobW9kdWxlc1RvTG9hZCkgfHwgaXNBcnJheShtb2R1bGVzVG9Mb2FkKSwgJ21vZHVsZXNUb0xvYWQnLCAnbm90IGFuIGFycmF5Jyk7XG4gICAgdmFyIHJ1bkJsb2NrcyA9IFtdLCBtb2R1bGVGbjtcbiAgICBmb3JFYWNoKG1vZHVsZXNUb0xvYWQsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgaWYgKGxvYWRlZE1vZHVsZXMuZ2V0KG1vZHVsZSkpIHJldHVybjtcbiAgICAgIGxvYWRlZE1vZHVsZXMuc2V0KG1vZHVsZSwgdHJ1ZSk7XG5cbiAgICAgIGZ1bmN0aW9uIHJ1bkludm9rZVF1ZXVlKHF1ZXVlKSB7XG4gICAgICAgIHZhciBpLCBpaTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBxdWV1ZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgdmFyIGludm9rZUFyZ3MgPSBxdWV1ZVtpXSxcbiAgICAgICAgICAgICAgcHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChpbnZva2VBcmdzWzBdKTtcblxuICAgICAgICAgIHByb3ZpZGVyW2ludm9rZUFyZ3NbMV1dLmFwcGx5KHByb3ZpZGVyLCBpbnZva2VBcmdzWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoaXNTdHJpbmcobW9kdWxlKSkge1xuICAgICAgICAgIG1vZHVsZUZuID0gYW5ndWxhck1vZHVsZShtb2R1bGUpO1xuICAgICAgICAgIGluc3RhbmNlSW5qZWN0b3IubW9kdWxlc1ttb2R1bGVdID0gbW9kdWxlRm47XG4gICAgICAgICAgcnVuQmxvY2tzID0gcnVuQmxvY2tzLmNvbmNhdChsb2FkTW9kdWxlcyhtb2R1bGVGbi5yZXF1aXJlcykpLmNvbmNhdChtb2R1bGVGbi5fcnVuQmxvY2tzKTtcbiAgICAgICAgICBydW5JbnZva2VRdWV1ZShtb2R1bGVGbi5faW52b2tlUXVldWUpO1xuICAgICAgICAgIHJ1bkludm9rZVF1ZXVlKG1vZHVsZUZuLl9jb25maWdCbG9ja3MpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24obW9kdWxlKSkge1xuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgICAgICBydW5CbG9ja3MucHVzaChwcm92aWRlckluamVjdG9yLmludm9rZShtb2R1bGUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhc3NlcnRBcmdGbihtb2R1bGUsICdtb2R1bGUnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgICAgbW9kdWxlID0gbW9kdWxlW21vZHVsZS5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5tZXNzYWdlICYmIGUuc3RhY2sgJiYgZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSkgPT09IC0xKSB7XG4gICAgICAgICAgLy8gU2FmYXJpICYgRkYncyBzdGFjayB0cmFjZXMgZG9uJ3QgY29udGFpbiBlcnJvci5tZXNzYWdlIGNvbnRlbnRcbiAgICAgICAgICAvLyB1bmxpa2UgdGhvc2Ugb2YgQ2hyb21lIGFuZCBJRVxuICAgICAgICAgIC8vIFNvIGlmIHN0YWNrIGRvZXNuJ3QgY29udGFpbiBtZXNzYWdlLCB3ZSBjcmVhdGUgYSBuZXcgc3RyaW5nIHRoYXQgY29udGFpbnMgYm90aC5cbiAgICAgICAgICAvLyBTaW5jZSBlcnJvci5zdGFjayBpcyByZWFkLW9ubHkgaW4gU2FmYXJpLCBJJ20gb3ZlcnJpZGluZyBlIGFuZCBub3QgZS5zdGFjayBoZXJlLlxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1leC1hc3NpZ25cbiAgICAgICAgICBlID0gZS5tZXNzYWdlICsgJ1xcbicgKyBlLnN0YWNrO1xuICAgICAgICB9XG4gICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycignbW9kdWxlcnInLCAnRmFpbGVkIHRvIGluc3RhbnRpYXRlIG1vZHVsZSB7MH0gZHVlIHRvOlxcbnsxfScsXG4gICAgICAgICAgICAgICAgICBtb2R1bGUsIGUuc3RhY2sgfHwgZS5tZXNzYWdlIHx8IGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBydW5CbG9ja3M7XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gaW50ZXJuYWwgSW5qZWN0b3JcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZnVuY3Rpb24gY3JlYXRlSW50ZXJuYWxJbmplY3RvcihjYWNoZSwgZmFjdG9yeSkge1xuXG4gICAgZnVuY3Rpb24gZ2V0U2VydmljZShzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XG4gICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoc2VydmljZU5hbWUpKSB7XG4gICAgICAgIGlmIChjYWNoZVtzZXJ2aWNlTmFtZV0gPT09IElOU1RBTlRJQVRJTkcpIHtcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2NkZXAnLCAnQ2lyY3VsYXIgZGVwZW5kZW5jeSBmb3VuZDogezB9JyxcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZU5hbWUgKyAnIDwtICcgKyBwYXRoLmpvaW4oJyA8LSAnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhY2hlW3NlcnZpY2VOYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcGF0aC51bnNoaWZ0KHNlcnZpY2VOYW1lKTtcbiAgICAgICAgICBjYWNoZVtzZXJ2aWNlTmFtZV0gPSBJTlNUQU5USUFUSU5HO1xuICAgICAgICAgIGNhY2hlW3NlcnZpY2VOYW1lXSA9IGZhY3Rvcnkoc2VydmljZU5hbWUsIGNhbGxlcik7XG4gICAgICAgICAgcmV0dXJuIGNhY2hlW3NlcnZpY2VOYW1lXTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGNhY2hlW3NlcnZpY2VOYW1lXSA9PT0gSU5TVEFOVElBVElORykge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW3NlcnZpY2VOYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHBhdGguc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gaW5qZWN0aW9uQXJncyhmbiwgbG9jYWxzLCBzZXJ2aWNlTmFtZSkge1xuICAgICAgdmFyIGFyZ3MgPSBbXSxcbiAgICAgICAgICAkaW5qZWN0ID0gY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZShmbiwgc3RyaWN0RGksIHNlcnZpY2VOYW1lKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9ICRpbmplY3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGtleSA9ICRpbmplY3RbaV07XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycignaXRrbicsXG4gICAgICAgICAgICAgICAgICAnSW5jb3JyZWN0IGluamVjdGlvbiB0b2tlbiEgRXhwZWN0ZWQgc2VydmljZSBuYW1lIGFzIHN0cmluZywgZ290IHswfScsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgYXJncy5wdXNoKGxvY2FscyAmJiBsb2NhbHMuaGFzT3duUHJvcGVydHkoa2V5KSA/IGxvY2Fsc1trZXldIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFNlcnZpY2Uoa2V5LCBzZXJ2aWNlTmFtZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNDbGFzcyhmdW5jKSB7XG4gICAgICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbiAgICAgIC8vIElFIDktMTEgZG8gbm90IHN1cHBvcnQgY2xhc3NlcyBhbmQgSUU5IGxlYWtzIHdpdGggdGhlIGNvZGUgYmVsb3cuXG4gICAgICBpZiAobXNpZSB8fCB0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gZnVuYy4kJG5nSXNDbGFzcztcbiAgICAgIGlmICghaXNCb29sZWFuKHJlc3VsdCkpIHtcbiAgICAgICAgLy8gU3VwcG9ydDogRWRnZSAxMi0xMyBvbmx5XG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9pc3N1ZXMvNjE1NjEzNS9cbiAgICAgICAgcmVzdWx0ID0gZnVuYy4kJG5nSXNDbGFzcyA9IC9eKD86Y2xhc3NcXGJ8Y29uc3RydWN0b3JcXCgpLy50ZXN0KHN0cmluZ2lmeUZuKGZ1bmMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52b2tlKGZuLCBzZWxmLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XG4gICAgICBpZiAodHlwZW9mIGxvY2FscyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VydmljZU5hbWUgPSBsb2NhbHM7XG4gICAgICAgIGxvY2FscyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmdzID0gaW5qZWN0aW9uQXJncyhmbiwgbG9jYWxzLCBzZXJ2aWNlTmFtZSk7XG4gICAgICBpZiAoaXNBcnJheShmbikpIHtcbiAgICAgICAgZm4gPSBmbltmbi5sZW5ndGggLSAxXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0NsYXNzKGZuKSkge1xuICAgICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyanMtaW52b2tlLWFwcGx5LXZzLXN3aXRjaFxuICAgICAgICAvLyAjNTM4OFxuICAgICAgICByZXR1cm4gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmdzLnVuc2hpZnQobnVsbCk7XG4gICAgICAgIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGZuLCBhcmdzKSkoKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGluc3RhbnRpYXRlKFR5cGUsIGxvY2Fscywgc2VydmljZU5hbWUpIHtcbiAgICAgIC8vIENoZWNrIGlmIFR5cGUgaXMgYW5ub3RhdGVkIGFuZCB1c2UganVzdCB0aGUgZ2l2ZW4gZnVuY3Rpb24gYXQgbi0xIGFzIHBhcmFtZXRlclxuICAgICAgLy8gZS5nLiBzb21lTW9kdWxlLmZhY3RvcnkoJ2dyZWV0ZXInLCBbJyR3aW5kb3cnLCBmdW5jdGlvbihyZW5hbWVkJHdpbmRvdykge31dKTtcbiAgICAgIHZhciBjdG9yID0gKGlzQXJyYXkoVHlwZSkgPyBUeXBlW1R5cGUubGVuZ3RoIC0gMV0gOiBUeXBlKTtcbiAgICAgIHZhciBhcmdzID0gaW5qZWN0aW9uQXJncyhUeXBlLCBsb2NhbHMsIHNlcnZpY2VOYW1lKTtcbiAgICAgIC8vIEVtcHR5IG9iamVjdCBhdCBwb3NpdGlvbiAwIGlzIGlnbm9yZWQgZm9yIGludm9jYXRpb24gd2l0aCBgbmV3YCwgYnV0IHJlcXVpcmVkLlxuICAgICAgYXJncy51bnNoaWZ0KG51bGwpO1xuICAgICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoY3RvciwgYXJncykpKCk7XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgaW52b2tlOiBpbnZva2UsXG4gICAgICBpbnN0YW50aWF0ZTogaW5zdGFudGlhdGUsXG4gICAgICBnZXQ6IGdldFNlcnZpY2UsXG4gICAgICBhbm5vdGF0ZTogY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSxcbiAgICAgIGhhczogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gcHJvdmlkZXJDYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lICsgcHJvdmlkZXJTdWZmaXgpIHx8IGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSA9IGFubm90YXRlO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuY2hvclNjcm9sbFByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIGAkYW5jaG9yU2Nyb2xsUHJvdmlkZXJgIHRvIGRpc2FibGUgYXV0b21hdGljIHNjcm9sbGluZyB3aGVuZXZlclxuICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGNoYW5nZXMuXG4gKi9cbmZ1bmN0aW9uICRBbmNob3JTY3JvbGxQcm92aWRlcigpIHtcblxuICB2YXIgYXV0b1Njcm9sbGluZ0VuYWJsZWQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZ1xuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnkgZGVmYXVsdCwge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwgJGFuY2hvclNjcm9sbCgpfSB3aWxsIGF1dG9tYXRpY2FsbHkgZGV0ZWN0IGNoYW5nZXMgdG9cbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGFuZCBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIG5ldyBoYXNoLjxiciAvPlxuICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZGlzYWJsZSBhdXRvbWF0aWMgc2Nyb2xsaW5nLlxuICAgKlxuICAgKiBJZiBhdXRvbWF0aWMgc2Nyb2xsaW5nIGlzIGRpc2FibGVkLCBvbmUgbXVzdCBleHBsaWNpdGx5IGNhbGxcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwgJGFuY2hvclNjcm9sbCgpfSBpbiBvcmRlciB0byBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgcmVsYXRlZCB0byB0aGVcbiAgICogY3VycmVudCBoYXNoLlxuICAgKi9cbiAgdGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIGF1dG9TY3JvbGxpbmdFbmFibGVkID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICRhbmNob3JTY3JvbGxcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICogQHJlcXVpcmVzICR3aW5kb3dcbiAgICogQHJlcXVpcmVzICRsb2NhdGlvblxuICAgKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogV2hlbiBjYWxsZWQsIGl0IHNjcm9sbHMgdG8gdGhlIGVsZW1lbnQgcmVsYXRlZCB0byB0aGUgc3BlY2lmaWVkIGBoYXNoYCBvciAoaWYgb21pdHRlZCkgdG8gdGhlXG4gICAqIGN1cnJlbnQgdmFsdWUgb2Yge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9LCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIHNwZWNpZmllZFxuICAgKiBpbiB0aGVcbiAgICogW0hUTUw1IHNwZWNdKGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2Jyb3dzZXJzLmh0bWwjYW4taW5kaWNhdGVkLXBhcnQtb2YtdGhlLWRvY3VtZW50KS5cbiAgICpcbiAgICogSXQgYWxzbyB3YXRjaGVzIHRoZSB7QGxpbmsgbmcuJGxvY2F0aW9uI2hhc2ggJGxvY2F0aW9uLmhhc2goKX0gYW5kIGF1dG9tYXRpY2FsbHkgc2Nyb2xscyB0b1xuICAgKiBtYXRjaCBhbnkgYW5jaG9yIHdoZW5ldmVyIGl0IGNoYW5nZXMuIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IGNhbGxpbmdcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZyAkYW5jaG9yU2Nyb2xsUHJvdmlkZXIuZGlzYWJsZUF1dG9TY3JvbGxpbmcoKX0uXG4gICAqXG4gICAqIEFkZGl0aW9uYWxseSwgeW91IGNhbiB1c2UgaXRzIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsI3lPZmZzZXQgeU9mZnNldH0gcHJvcGVydHkgdG8gc3BlY2lmeSBhXG4gICAqIHZlcnRpY2FsIHNjcm9sbC1vZmZzZXQgKGVpdGhlciBmaXhlZCBvciBkeW5hbWljKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBoYXNoIFRoZSBoYXNoIHNwZWNpZnlpbmcgdGhlIGVsZW1lbnQgdG8gc2Nyb2xsIHRvLiBJZiBvbWl0dGVkLCB0aGUgdmFsdWUgb2ZcbiAgICogICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZy4kbG9jYXRpb24jaGFzaCAkbG9jYXRpb24uaGFzaCgpfSB3aWxsIGJlIHVzZWQuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7KG51bWJlcnxmdW5jdGlvbnxqcUxpdGUpfSB5T2Zmc2V0XG4gICAqIElmIHNldCwgc3BlY2lmaWVzIGEgdmVydGljYWwgc2Nyb2xsLW9mZnNldC4gVGhpcyBpcyBvZnRlbiB1c2VmdWwgd2hlbiB0aGVyZSBhcmUgZml4ZWRcbiAgICogcG9zaXRpb25lZCBlbGVtZW50cyBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlLCBzdWNoIGFzIG5hdmJhcnMsIGhlYWRlcnMgZXRjLlxuICAgKlxuICAgKiBgeU9mZnNldGAgY2FuIGJlIHNwZWNpZmllZCBpbiB2YXJpb3VzIHdheXM6XG4gICAqIC0gKipudW1iZXIqKjogQSBmaXhlZCBudW1iZXIgb2YgcGl4ZWxzIHRvIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPjxiciAvPlxuICAgKiAtICoqZnVuY3Rpb24qKjogQSBnZXR0ZXIgZnVuY3Rpb24gY2FsbGVkIGV2ZXJ5dGltZSBgJGFuY2hvclNjcm9sbCgpYCBpcyBleGVjdXRlZC4gTXVzdCByZXR1cm5cbiAgICogICBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIG9mZnNldCAoaW4gcGl4ZWxzKS48YnIgLz48YnIgLz5cbiAgICogLSAqKmpxTGl0ZSoqOiBBIGpxTGl0ZS9qUXVlcnkgZWxlbWVudCB0byBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIHRoZSBvZmZzZXQuIFRoZSBkaXN0YW5jZSBmcm9tXG4gICAqICAgdGhlIHRvcCBvZiB0aGUgcGFnZSB0byB0aGUgZWxlbWVudCdzIGJvdHRvbSB3aWxsIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPlxuICAgKiAgICoqTm90ZSoqOiBUaGUgZWxlbWVudCB3aWxsIGJlIHRha2VuIGludG8gYWNjb3VudCBvbmx5IGFzIGxvbmcgYXMgaXRzIGBwb3NpdGlvbmAgaXMgc2V0IHRvXG4gICAqICAgYGZpeGVkYC4gVGhpcyBvcHRpb24gaXMgdXNlZnVsLCB3aGVuIGRlYWxpbmcgd2l0aCByZXNwb25zaXZlIG5hdmJhcnMvaGVhZGVycyB0aGF0IGFkanVzdFxuICAgKiAgIHRoZWlyIGhlaWdodCBhbmQvb3IgcG9zaXRpb25pbmcgYWNjb3JkaW5nIHRvIHRoZSB2aWV3cG9ydCdzIHNpemUuXG4gICAqXG4gICAqIDxiciAvPlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiBJbiBvcmRlciBmb3IgYHlPZmZzZXRgIHRvIHdvcmsgcHJvcGVybHksIHNjcm9sbGluZyBzaG91bGQgdGFrZSBwbGFjZSBvbiB0aGUgZG9jdW1lbnQncyByb290IGFuZFxuICAgKiBub3Qgc29tZSBjaGlsZCBlbGVtZW50LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgPGV4YW1wbGUgbW9kdWxlPVwiYW5jaG9yU2Nyb2xsRXhhbXBsZVwiIG5hbWU9XCJhbmNob3Itc2Nyb2xsXCI+XG4gICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxkaXYgaWQ9XCJzY3JvbGxBcmVhXCIgbmctY29udHJvbGxlcj1cIlNjcm9sbENvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGEgbmctY2xpY2s9XCJnb3RvQm90dG9tKClcIj5HbyB0byBib3R0b208L2E+XG4gICAgICAgICAgIDxhIGlkPVwiYm90dG9tXCI+PC9hPiBZb3UncmUgYXQgdGhlIGJvdHRvbSFcbiAgICAgICAgIDwvZGl2PlxuICAgICAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnYW5jaG9yU2Nyb2xsRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignU2Nyb2xsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJyxcbiAgICAgICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRsb2NhdGlvbiwgJGFuY2hvclNjcm9sbCkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmdvdG9Cb3R0b20gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBsb2NhdGlvbi5oYXNoIHRvIHRoZSBpZCBvZlxuICAgICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCB5b3Ugd2lzaCB0byBzY3JvbGwgdG8uXG4gICAgICAgICAgICAgICAgICRsb2NhdGlvbi5oYXNoKCdib3R0b20nKTtcblxuICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKVxuICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgICAgI3Njcm9sbEFyZWEge1xuICAgICAgICAgICBoZWlnaHQ6IDI4MHB4O1xuICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgIH1cblxuICAgICAgICAgI2JvdHRvbSB7XG4gICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICBtYXJnaW4tdG9wOiAyMDAwcHg7XG4gICAgICAgICB9XG4gICAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gICAqXG4gICAqIDxociAvPlxuICAgKiBUaGUgZXhhbXBsZSBiZWxvdyBpbGx1c3RyYXRlcyB0aGUgdXNlIG9mIGEgdmVydGljYWwgc2Nyb2xsLW9mZnNldCAoc3BlY2lmaWVkIGFzIGEgZml4ZWQgdmFsdWUpLlxuICAgKiBTZWUge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwjeU9mZnNldCAkYW5jaG9yU2Nyb2xsLnlPZmZzZXR9IGZvciBtb3JlIGRldGFpbHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgIDxleGFtcGxlIG1vZHVsZT1cImFuY2hvclNjcm9sbE9mZnNldEV4YW1wbGVcIiBuYW1lPVwiYW5jaG9yLXNjcm9sbC1vZmZzZXRcIj5cbiAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZpeGVkLWhlYWRlclwiIG5nLWNvbnRyb2xsZXI9XCJoZWFkZXJDdHJsXCI+XG4gICAgICAgICAgIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImdvdG9BbmNob3IoeClcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XG4gICAgICAgICAgICAgR28gdG8gYW5jaG9yIHt7eH19XG4gICAgICAgICAgIDwvYT5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGRpdiBpZD1cImFuY2hvcnt7eH19XCIgY2xhc3M9XCJhbmNob3JcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XG4gICAgICAgICAgIEFuY2hvciB7e3h9fSBvZiA1XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2FuY2hvclNjcm9sbE9mZnNldEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLnJ1bihbJyRhbmNob3JTY3JvbGwnLCBmdW5jdGlvbigkYW5jaG9yU2Nyb2xsKSB7XG4gICAgICAgICAgICAgJGFuY2hvclNjcm9sbC55T2Zmc2V0ID0gNTA7ICAgLy8gYWx3YXlzIHNjcm9sbCBieSA1MCBleHRyYSBwaXhlbHNcbiAgICAgICAgICAgfV0pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdoZWFkZXJDdHJsJywgWyckYW5jaG9yU2Nyb2xsJywgJyRsb2NhdGlvbicsICckc2NvcGUnLFxuICAgICAgICAgICAgIGZ1bmN0aW9uKCRhbmNob3JTY3JvbGwsICRsb2NhdGlvbiwgJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAkc2NvcGUuZ290b0FuY2hvciA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgdmFyIG5ld0hhc2ggPSAnYW5jaG9yJyArIHg7XG4gICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24uaGFzaCgpICE9PSBuZXdIYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSAkbG9jYXRpb24uaGFzaCB0byBgbmV3SGFzaGAgYW5kXG4gICAgICAgICAgICAgICAgICAgLy8gJGFuY2hvclNjcm9sbCB3aWxsIGF1dG9tYXRpY2FsbHkgc2Nyb2xsIHRvIGl0XG4gICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2FuY2hvcicgKyB4KTtcbiAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKSBleHBsaWNpdGx5LFxuICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlICRsb2NhdGlvbi5oYXNoIGhhc24ndCBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgXSk7XG4gICAgICAgPC9maWxlPlxuICAgICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAgIGJvZHkge1xuICAgICAgICAgICBwYWRkaW5nLXRvcDogNTBweDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmFuY2hvciB7XG4gICAgICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCBEYXJrT3JjaGlkO1xuICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDEwcHggMjAwcHggMTBweDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmZpeGVkLWhlYWRlciB7XG4gICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgaGVpZ2h0OiA1MHB4O1xuICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgIHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7XG4gICAgICAgICB9XG5cbiAgICAgICAgIC5maXhlZC1oZWFkZXIgPiBhIHtcbiAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICBtYXJnaW46IDVweCAxNXB4O1xuICAgICAgICAgfVxuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHdpbmRvdywgJGxvY2F0aW9uLCAkcm9vdFNjb3BlKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gJHdpbmRvdy5kb2N1bWVudDtcblxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZmlyc3QgYW5jaG9yIGZyb20gYSBOb2RlTGlzdFxuICAgIC8vICh1c2luZyBgQXJyYXkjc29tZSgpYCBpbnN0ZWFkIG9mIGBhbmd1bGFyI2ZvckVhY2goKWAgc2luY2UgaXQncyBtb3JlIHBlcmZvcm1hbnRcbiAgICAvLyAgYW5kIHdvcmtpbmcgaW4gYWxsIHN1cHBvcnRlZCBicm93c2Vycy4pXG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3RBbmNob3IobGlzdCkge1xuICAgICAgdmFyIHJlc3VsdCA9IG51bGw7XG4gICAgICBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGxpc3QsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ2EnKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZWxlbWVudDtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFlPZmZzZXQoKSB7XG5cbiAgICAgIHZhciBvZmZzZXQgPSBzY3JvbGwueU9mZnNldDtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ob2Zmc2V0KSkge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KG9mZnNldCkpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBvZmZzZXRbMF07XG4gICAgICAgIHZhciBzdHlsZSA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcbiAgICAgICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNOdW1iZXIob2Zmc2V0KSkge1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvKGVsZW0pIHtcbiAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgIGVsZW0uc2Nyb2xsSW50b1ZpZXcoKTtcblxuICAgICAgICB2YXIgb2Zmc2V0ID0gZ2V0WU9mZnNldCgpO1xuXG4gICAgICAgIGlmIChvZmZzZXQpIHtcbiAgICAgICAgICAvLyBgb2Zmc2V0YCBpcyB0aGUgbnVtYmVyIG9mIHBpeGVscyB3ZSBzaG91bGQgc2Nyb2xsIFVQIGluIG9yZGVyIHRvIGFsaWduIGBlbGVtYCBwcm9wZXJseS5cbiAgICAgICAgICAvLyBUaGlzIGlzIHRydWUgT05MWSBpZiB0aGUgY2FsbCB0byBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCBpbml0aWFsbHkgYWxpZ25zIGBlbGVtYCBhdCB0aGVcbiAgICAgICAgICAvLyB0b3Agb2YgdGhlIHZpZXdwb3J0LlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSUYgdGhlIG51bWJlciBvZiBwaXhlbHMgZnJvbSB0aGUgdG9wIG9mIGBlbGVtYCB0byB0aGUgZW5kIG9mIHRoZSBwYWdlJ3MgY29udGVudCBpcyBsZXNzXG4gICAgICAgICAgLy8gdGhhbiB0aGUgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCwgdGhlbiBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCB3aWxsIGFsaWduIHRoZSBgZWxlbWAgc29tZVxuICAgICAgICAgIC8vIHdheSBkb3duIHRoZSBwYWdlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhpcyBpcyBvZnRlbiB0aGUgY2FzZSBmb3IgZWxlbWVudHMgbmVhciB0aGUgYm90dG9tIG9mIHRoZSBwYWdlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSW4gc3VjaCBjYXNlcyB3ZSBkbyBub3QgbmVlZCB0byBzY3JvbGwgdGhlIHdob2xlIGBvZmZzZXRgIHVwLCBqdXN0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW5cbiAgICAgICAgICAvLyB0aGUgdG9wIG9mIHRoZSBlbGVtZW50IGFuZCB0aGUgb2Zmc2V0LCB3aGljaCBpcyBlbm91Z2ggdG8gYWxpZ24gdGhlIHRvcCBvZiBgZWxlbWAgYXQgdGhlXG4gICAgICAgICAgLy8gZGVzaXJlZCBwb3NpdGlvbi5cbiAgICAgICAgICB2YXIgZWxlbVRvcCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICR3aW5kb3cuc2Nyb2xsQnkoMCwgZWxlbVRvcCAtIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2Nyb2xsKGhhc2gpIHtcbiAgICAgIC8vIEFsbG93IG51bWVyaWMgaGFzaGVzXG4gICAgICBoYXNoID0gaXNTdHJpbmcoaGFzaCkgPyBoYXNoIDogaXNOdW1iZXIoaGFzaCkgPyBoYXNoLnRvU3RyaW5nKCkgOiAkbG9jYXRpb24uaGFzaCgpO1xuICAgICAgdmFyIGVsbTtcblxuICAgICAgLy8gZW1wdHkgaGFzaCwgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGlmICghaGFzaCkgc2Nyb2xsVG8obnVsbCk7XG5cbiAgICAgIC8vIGVsZW1lbnQgd2l0aCBnaXZlbiBpZFxuICAgICAgZWxzZSBpZiAoKGVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhhc2gpKSkgc2Nyb2xsVG8oZWxtKTtcblxuICAgICAgLy8gZmlyc3QgYW5jaG9yIHdpdGggZ2l2ZW4gbmFtZSA6LURcbiAgICAgIGVsc2UgaWYgKChlbG0gPSBnZXRGaXJzdEFuY2hvcihkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShoYXNoKSkpKSBzY3JvbGxUbyhlbG0pO1xuXG4gICAgICAvLyBubyBlbGVtZW50IGFuZCBoYXNoID09PSAndG9wJywgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGVsc2UgaWYgKGhhc2ggPT09ICd0b3AnKSBzY3JvbGxUbyhudWxsKTtcbiAgICB9XG5cbiAgICAvLyBkb2VzIG5vdCBzY3JvbGwgd2hlbiB1c2VyIGNsaWNrcyBvbiBhbmNob3IgbGluayB0aGF0IGlzIGN1cnJlbnRseSBvblxuICAgIC8vIChubyB1cmwgY2hhbmdlLCBubyAkbG9jYXRpb24uaGFzaCgpIGNoYW5nZSksIGJyb3dzZXIgbmF0aXZlIGRvZXMgc2Nyb2xsXG4gICAgaWYgKGF1dG9TY3JvbGxpbmdFbmFibGVkKSB7XG4gICAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiBhdXRvU2Nyb2xsV2F0Y2goKSB7cmV0dXJuICRsb2NhdGlvbi5oYXNoKCk7fSxcbiAgICAgICAgZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoQWN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgLy8gc2tpcCB0aGUgaW5pdGlhbCBzY3JvbGwgaWYgJGxvY2F0aW9uLmhhc2ggaXMgZW1wdHlcbiAgICAgICAgICBpZiAobmV3VmFsID09PSBvbGRWYWwgJiYgbmV3VmFsID09PSAnJykgcmV0dXJuO1xuXG4gICAgICAgICAganFMaXRlRG9jdW1lbnRMb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoc2Nyb2xsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjcm9sbDtcbiAgfV07XG59XG5cbnZhciAkYW5pbWF0ZU1pbkVyciA9IG1pbkVycignJGFuaW1hdGUnKTtcbnZhciBFTEVNRU5UX05PREUgPSAxO1xudmFyIE5HX0FOSU1BVEVfQ0xBU1NOQU1FID0gJ25nLWFuaW1hdGUnO1xuXG5mdW5jdGlvbiBtZXJnZUNsYXNzZXMoYSxiKSB7XG4gIGlmICghYSAmJiAhYikgcmV0dXJuICcnO1xuICBpZiAoIWEpIHJldHVybiBiO1xuICBpZiAoIWIpIHJldHVybiBhO1xuICBpZiAoaXNBcnJheShhKSkgYSA9IGEuam9pbignICcpO1xuICBpZiAoaXNBcnJheShiKSkgYiA9IGIuam9pbignICcpO1xuICByZXR1cm4gYSArICcgJyArIGI7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbG0gPSBlbGVtZW50W2ldO1xuICAgIGlmIChlbG0ubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgcmV0dXJuIGVsbTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3BsaXRDbGFzc2VzKGNsYXNzZXMpIHtcbiAgaWYgKGlzU3RyaW5nKGNsYXNzZXMpKSB7XG4gICAgY2xhc3NlcyA9IGNsYXNzZXMuc3BsaXQoJyAnKTtcbiAgfVxuXG4gIC8vIFVzZSBjcmVhdGVNYXAoKSB0byBwcmV2ZW50IGNsYXNzIGFzc3VtcHRpb25zIGludm9sdmluZyBwcm9wZXJ0eSBuYW1lcyBpblxuICAvLyBPYmplY3QucHJvdG90eXBlXG4gIHZhciBvYmogPSBjcmVhdGVNYXAoKTtcbiAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbihrbGFzcykge1xuICAgIC8vIHNvbWV0aW1lcyB0aGUgc3BsaXQgbGVhdmVzIGVtcHR5IHN0cmluZyB2YWx1ZXNcbiAgICAvLyBpbmNhc2UgZXh0cmEgc3BhY2VzIHdlcmUgYXBwbGllZCB0byB0aGUgb3B0aW9uc1xuICAgIGlmIChrbGFzcy5sZW5ndGgpIHtcbiAgICAgIG9ialtrbGFzc10gPSB0cnVlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbi8vIGlmIGFueSBvdGhlciB0eXBlIG9mIG9wdGlvbnMgdmFsdWUgYmVzaWRlcyBhbiBPYmplY3QgdmFsdWUgaXNcbi8vIHBhc3NlZCBpbnRvIHRoZSAkYW5pbWF0ZS5tZXRob2QoKSBhbmltYXRpb24gdGhlbiB0aGlzIGhlbHBlciBjb2RlXG4vLyB3aWxsIGJlIHJ1biB3aGljaCB3aWxsIGlnbm9yZSBpdC4gV2hpbGUgdGhpcyBwYXRjaCBpcyBub3QgdGhlXG4vLyBncmVhdGVzdCBzb2x1dGlvbiB0byB0aGlzLCBhIGxvdCBvZiBleGlzdGluZyBwbHVnaW5zIGRlcGVuZCBvblxuLy8gJGFuaW1hdGUgdG8gZWl0aGVyIGNhbGwgdGhlIGNhbGxiYWNrICg8IDEuMikgb3IgcmV0dXJuIGEgcHJvbWlzZVxuLy8gdGhhdCBjYW4gYmUgY2hhbmdlZC4gVGhpcyBoZWxwZXIgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IHRoZSBvcHRpb25zXG4vLyBhcmUgd2lwZWQgY2xlYW4gaW5jYXNlIGEgY2FsbGJhY2sgZnVuY3Rpb24gaXMgcHJvdmlkZWQuXG5mdW5jdGlvbiBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykge1xuICByZXR1cm4gaXNPYmplY3Qob3B0aW9ucylcbiAgICAgID8gb3B0aW9uc1xuICAgICAgOiB7fTtcbn1cblxudmFyICQkQ29yZUFuaW1hdGVKc1Byb3ZpZGVyID0gLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBub29wO1xufTtcblxuLy8gdGhpcyBpcyBwcmVmaXhlZCB3aXRoIENvcmUgc2luY2UgaXQgY29uZmxpY3RzIHdpdGhcbi8vIHRoZSBhbmltYXRlUXVldWVQcm92aWRlciBkZWZpbmVkIGluIG5nQW5pbWF0ZS9hbmltYXRlUXVldWUuanNcbnZhciAkJENvcmVBbmltYXRlUXVldWVQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdmFyIHBvc3REaWdlc3RRdWV1ZSA9IG5ldyBOZ01hcCgpO1xuICB2YXIgcG9zdERpZ2VzdEVsZW1lbnRzID0gW107XG5cbiAgdGhpcy4kZ2V0ID0gWyckJEFuaW1hdGVSdW5uZXInLCAnJHJvb3RTY29wZScsXG4gICAgICAgZnVuY3Rpb24oJCRBbmltYXRlUnVubmVyLCAgICRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZW5hYmxlZDogbm9vcCxcbiAgICAgIG9uOiBub29wLFxuICAgICAgb2ZmOiBub29wLFxuICAgICAgcGluOiBub29wLFxuXG4gICAgICBwdXNoOiBmdW5jdGlvbihlbGVtZW50LCBldmVudCwgb3B0aW9ucywgZG9tT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmIChkb21PcGVyYXRpb24pIHtcbiAgICAgICAgICBkb21PcGVyYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5mcm9tKSB7XG4gICAgICAgICAgZWxlbWVudC5jc3Mob3B0aW9ucy5mcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgICAgIGVsZW1lbnQuY3NzKG9wdGlvbnMudG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYWRkQ2xhc3MgfHwgb3B0aW9ucy5yZW1vdmVDbGFzcykge1xuICAgICAgICAgIGFkZFJlbW92ZUNsYXNzZXNQb3N0RGlnZXN0KGVsZW1lbnQsIG9wdGlvbnMuYWRkQ2xhc3MsIG9wdGlvbnMucmVtb3ZlQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJ1bm5lciA9IG5ldyAkJEFuaW1hdGVSdW5uZXIoKTtcblxuICAgICAgICAvLyBzaW5jZSB0aGVyZSBhcmUgbm8gYW5pbWF0aW9ucyB0byBydW4gdGhlIHJ1bm5lciBuZWVkcyB0byBiZVxuICAgICAgICAvLyBub3RpZmllZCB0aGF0IHRoZSBhbmltYXRpb24gY2FsbCBpcyBjb21wbGV0ZS5cbiAgICAgICAgcnVubmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIHJldHVybiBydW5uZXI7XG4gICAgICB9XG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gdXBkYXRlRGF0YShkYXRhLCBjbGFzc2VzLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIGlmIChjbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzZXMgPSBpc1N0cmluZyhjbGFzc2VzKSA/IGNsYXNzZXMuc3BsaXQoJyAnKSA6XG4gICAgICAgICAgICAgICAgICBpc0FycmF5KGNsYXNzZXMpID8gY2xhc3NlcyA6IFtdO1xuICAgICAgICBmb3JFYWNoKGNsYXNzZXMsIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGF0YVtjbGFzc05hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUNTU0NsYXNzQ2hhbmdlcygpIHtcbiAgICAgIGZvckVhY2gocG9zdERpZ2VzdEVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHZhciBkYXRhID0gcG9zdERpZ2VzdFF1ZXVlLmdldChlbGVtZW50KTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBzcGxpdENsYXNzZXMoZWxlbWVudC5hdHRyKCdjbGFzcycpKTtcbiAgICAgICAgICB2YXIgdG9BZGQgPSAnJztcbiAgICAgICAgICB2YXIgdG9SZW1vdmUgPSAnJztcbiAgICAgICAgICBmb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKHN0YXR1cywgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaGFzQ2xhc3MgPSAhIWV4aXN0aW5nW2NsYXNzTmFtZV07XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSBoYXNDbGFzcykge1xuICAgICAgICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdG9BZGQgKz0gKHRvQWRkLmxlbmd0aCA/ICcgJyA6ICcnKSArIGNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b1JlbW92ZSArPSAodG9SZW1vdmUubGVuZ3RoID8gJyAnIDogJycpICsgY2xhc3NOYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQsIGZ1bmN0aW9uKGVsbSkge1xuICAgICAgICAgICAgaWYgKHRvQWRkKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZUFkZENsYXNzKGVsbSwgdG9BZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZVJlbW92ZUNsYXNzKGVsbSwgdG9SZW1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZS5kZWxldGUoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcG9zdERpZ2VzdEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBhZGRSZW1vdmVDbGFzc2VzUG9zdERpZ2VzdChlbGVtZW50LCBhZGQsIHJlbW92ZSkge1xuICAgICAgdmFyIGRhdGEgPSBwb3N0RGlnZXN0UXVldWUuZ2V0KGVsZW1lbnQpIHx8IHt9O1xuXG4gICAgICB2YXIgY2xhc3Nlc0FkZGVkID0gdXBkYXRlRGF0YShkYXRhLCBhZGQsIHRydWUpO1xuICAgICAgdmFyIGNsYXNzZXNSZW1vdmVkID0gdXBkYXRlRGF0YShkYXRhLCByZW1vdmUsIGZhbHNlKTtcblxuICAgICAgaWYgKGNsYXNzZXNBZGRlZCB8fCBjbGFzc2VzUmVtb3ZlZCkge1xuXG4gICAgICAgIHBvc3REaWdlc3RRdWV1ZS5zZXQoZWxlbWVudCwgZGF0YSk7XG4gICAgICAgIHBvc3REaWdlc3RFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChwb3N0RGlnZXN0RWxlbWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kJHBvc3REaWdlc3QoaGFuZGxlQ1NTQ2xhc3NDaGFuZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuaW1hdGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiAkYW5pbWF0ZSB0aGF0IGRvZXNuJ3QgcGVyZm9ybSBhbnkgYW5pbWF0aW9ucywgaW5zdGVhZCBqdXN0XG4gKiBzeW5jaHJvbm91c2x5IHBlcmZvcm1zIERPTSB1cGRhdGVzIGFuZCByZXNvbHZlcyB0aGUgcmV0dXJuZWQgcnVubmVyIHByb21pc2UuXG4gKlxuICogSW4gb3JkZXIgdG8gZW5hYmxlIGFuaW1hdGlvbnMgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBoYXMgdG8gYmUgbG9hZGVkLlxuICpcbiAqIFRvIHNlZSB0aGUgZnVuY3Rpb25hbCBpbXBsZW1lbnRhdGlvbiBjaGVjayBvdXQgYHNyYy9uZ0FuaW1hdGUvYW5pbWF0ZS5qc2AuXG4gKi9cbnZhciAkQW5pbWF0ZVByb3ZpZGVyID0gWyckcHJvdmlkZScsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbigkcHJvdmlkZSkge1xuICB2YXIgcHJvdmlkZXIgPSB0aGlzO1xuICB2YXIgY2xhc3NOYW1lRmlsdGVyID0gbnVsbDtcbiAgdmFyIGN1c3RvbUZpbHRlciA9IG51bGw7XG5cbiAgdGhpcy4kJHJlZ2lzdGVyZWRBbmltYXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNyZWdpc3RlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXJzIGEgbmV3IGluamVjdGFibGUgYW5pbWF0aW9uIGZhY3RvcnkgZnVuY3Rpb24uIFRoZSBmYWN0b3J5IGZ1bmN0aW9uIHByb2R1Y2VzIHRoZVxuICAgKiBhbmltYXRpb24gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIGNhbGxiYWNrIGZ1bmN0aW9ucyBmb3IgZWFjaCBldmVudCB0aGF0IGlzIGV4cGVjdGVkIHRvIGJlXG4gICAqIGFuaW1hdGVkLlxuICAgKlxuICAgKiAgICogYGV2ZW50Rm5gOiBgZnVuY3Rpb24oZWxlbWVudCwgLi4uICwgZG9uZUZ1bmN0aW9uLCBvcHRpb25zKWBcbiAgICogICBUaGUgZWxlbWVudCB0byBhbmltYXRlLCB0aGUgYGRvbmVGdW5jdGlvbmAgYW5kIHRoZSBvcHRpb25zIGZlZCBpbnRvIHRoZSBhbmltYXRpb24uIERlcGVuZGluZ1xuICAgKiAgIG9uIHRoZSB0eXBlIG9mIGFuaW1hdGlvbiBhZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIGluamVjdGVkIGludG8gdGhlIGFuaW1hdGlvbiBmdW5jdGlvbi4gVGhlXG4gICAqICAgbGlzdCBiZWxvdyBleHBsYWlucyB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlcyBmb3IgdGhlIGRpZmZlcmVudCBhbmltYXRpb24gbWV0aG9kczpcbiAgICpcbiAgICogICAtIHNldENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBhZGRlZENsYXNzZXMsIHJlbW92ZWRDbGFzc2VzLCBkb25lRnVuY3Rpb24sIG9wdGlvbnMpXG4gICAqICAgLSBhZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgYWRkZWRDbGFzc2VzLCBkb25lRnVuY3Rpb24sIG9wdGlvbnMpXG4gICAqICAgLSByZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgcmVtb3ZlZENsYXNzZXMsIGRvbmVGdW5jdGlvbiwgb3B0aW9ucylcbiAgICogICAtIGVudGVyLCBsZWF2ZSwgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgZG9uZUZ1bmN0aW9uLCBvcHRpb25zKVxuICAgKiAgIC0gYW5pbWF0ZTogZnVuY3Rpb24oZWxlbWVudCwgZnJvbVN0eWxlcywgdG9TdHlsZXMsIGRvbmVGdW5jdGlvbiwgb3B0aW9ucylcbiAgICpcbiAgICogICBNYWtlIHN1cmUgdG8gdHJpZ2dlciB0aGUgYGRvbmVGdW5jdGlvbmAgb25jZSB0aGUgYW5pbWF0aW9uIGlzIGZ1bGx5IGNvbXBsZXRlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIHJldHVybiB7XG4gICAqICAgICAvL2VudGVyLCBsZWF2ZSwgbW92ZSBzaWduYXR1cmVcbiAgICogICAgIGV2ZW50Rm4gOiBmdW5jdGlvbihlbGVtZW50LCBkb25lLCBvcHRpb25zKSB7XG4gICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxuICAgKiAgICAgICAvL29uY2UgY29tcGxldGUsIHRoZW4gcnVuIGRvbmUoKVxuICAgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gZW5kRnVuY3Rpb24od2FzQ2FuY2VsbGVkKSB7XG4gICAqICAgICAgICAgLy9jb2RlIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uXG4gICAqICAgICAgIH1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYW5pbWF0aW9uICh0aGlzIGlzIHdoYXQgdGhlIGNsYXNzLWJhc2VkIENTUyB2YWx1ZSB3aWxsIGJlIGNvbXBhcmVkIHRvKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeSBUaGUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcmV0dXJuIHRoZSBhbmltYXRpb25cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuXG4gICAqL1xuICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgZmFjdG9yeSkge1xuICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApICE9PSAnLicpIHtcbiAgICAgIHRocm93ICRhbmltYXRlTWluRXJyKCdub3Rjc2VsJywgJ0V4cGVjdGluZyBjbGFzcyBzZWxlY3RvciBzdGFydGluZyB3aXRoIFxcJy5cXCcgZ290IFxcJ3swfVxcJy4nLCBuYW1lKTtcbiAgICB9XG5cbiAgICB2YXIga2V5ID0gbmFtZSArICctYW5pbWF0aW9uJztcbiAgICBwcm92aWRlci4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW25hbWUuc3Vic3RyKDEpXSA9IGtleTtcbiAgICAkcHJvdmlkZS5mYWN0b3J5KGtleSwgZmFjdG9yeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNjdXN0b21GaWx0ZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgYW5kL29yIHJldHVybnMgdGhlIGN1c3RvbSBmaWx0ZXIgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIFwiZmlsdGVyXCIgYW5pbWF0aW9ucywgaS5lLlxuICAgKiBkZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGlzIGFsbG93ZWQgb3Igbm90LiBXaGVuIG5vIGZpbHRlciBpcyBzcGVjaWZpZWQgKHRoZSBkZWZhdWx0KSwgbm9cbiAgICogYW5pbWF0aW9uIHdpbGwgYmUgYmxvY2tlZC4gU2V0dGluZyB0aGUgYGN1c3RvbUZpbHRlcmAgdmFsdWUgd2lsbCBvbmx5IGFsbG93IGFuaW1hdGlvbnMgZm9yXG4gICAqIHdoaWNoIHRoZSBmaWx0ZXIgZnVuY3Rpb24ncyByZXR1cm4gdmFsdWUgaXMgdHJ1dGh5LlxuICAgKlxuICAgKiBUaGlzIGFsbG93cyB0byBlYXNpbHkgY3JlYXRlIGFyYml0cmFyaWx5IGNvbXBsZXggcnVsZXMgZm9yIGZpbHRlcmluZyBhbmltYXRpb25zLCBzdWNoIGFzXG4gICAqIGFsbG93aW5nIHNwZWNpZmljIGV2ZW50cyBvbmx5LCBvciBlbmFibGluZyBhbmltYXRpb25zIG9uIHNwZWNpZmljIHN1YnRyZWVzIG9mIHRoZSBET00sIGV0Yy5cbiAgICogRmlsdGVyaW5nIGFuaW1hdGlvbnMgY2FuIGFsc28gYm9vc3QgcGVyZm9ybWFuY2UgZm9yIGxvdy1wb3dlcmVkIGRldmljZXMsIGFzIHdlbGwgYXNcbiAgICogYXBwbGljYXRpb25zIGNvbnRhaW5pbmcgYSBsb3Qgb2Ygc3RydWN0dXJhbCBvcGVyYXRpb25zLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICAgKiAgICoqQmVzdCBQcmFjdGljZToqKlxuICAgKiAgIEtlZXAgdGhlIGZpbHRlcmluZyBmdW5jdGlvbiBhcyBsZWFuIGFzIHBvc3NpYmxlLCBiZWNhdXNlIGl0IHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIERPTVxuICAgKiAgIGFjdGlvbiAoZS5nLiBpbnNlcnRpb24sIHJlbW92YWwsIGNsYXNzIGNoYW5nZSkgcGVyZm9ybWVkIGJ5IFwiYW5pbWF0aW9uLWF3YXJlXCIgZGlyZWN0aXZlcy5cbiAgICogICBTZWUge0BsaW5rIGd1aWRlL2FuaW1hdGlvbnMjd2hpY2gtZGlyZWN0aXZlcy1zdXBwb3J0LWFuaW1hdGlvbnMtIGhlcmV9IGZvciBhIGxpc3Qgb2YgYnVpbHQtaW5cbiAgICogICBkaXJlY3RpdmVzIHRoYXQgc3VwcG9ydCBhbmltYXRpb25zLlxuICAgKiAgIFBlcmZvcm1pbmcgY29tcHV0YXRpb25hbGx5IGV4cGVuc2l2ZSBvciB0aW1lLWNvbnN1bWluZyBvcGVyYXRpb25zIG9uIGVhY2ggY2FsbCBvZiB0aGVcbiAgICogICBmaWx0ZXJpbmcgZnVuY3Rpb24gY2FuIG1ha2UgeW91ciBhbmltYXRpb25zIHNsdWdnaXNoLlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogKipOb3RlOioqIElmIHByZXNlbnQsIGBjdXN0b21GaWx0ZXJgIHdpbGwgYmUgY2hlY2tlZCBiZWZvcmVcbiAgICoge0BsaW5rICRhbmltYXRlUHJvdmlkZXIjY2xhc3NOYW1lRmlsdGVyIGNsYXNzTmFtZUZpbHRlcn0uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBmaWx0ZXJGbiAtIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGZpbHRlciBhbGwgYW5pbWF0aW9ucy5cbiAgICogICBJZiBhIGZhbHN5IHZhbHVlIGlzIHJldHVybmVkLCBubyBhbmltYXRpb24gd2lsbCBiZSBwZXJmb3JtZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZFxuICAgKiAgIHdpdGggdGhlIGZvbGxvd2luZyBhcmd1bWVudHM6XG4gICAqICAgLSAqKm5vZGUqKiBge0RPTUVsZW1lbnR9YCAtIFRoZSBET00gZWxlbWVudCB0byBiZSBhbmltYXRlZC5cbiAgICogICAtICoqZXZlbnQqKiBge1N0cmluZ31gIC0gVGhlIG5hbWUgb2YgdGhlIGFuaW1hdGlvbiBldmVudCAoZS5nLiBgZW50ZXJgLCBgbGVhdmVgLCBgYWRkQ2xhc3NgXG4gICAqICAgICBldGMpLlxuICAgKiAgIC0gKipvcHRpb25zKiogYHtPYmplY3R9YCAtIEEgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB1c2VkIGZvciB0aGUgYW5pbWF0aW9uLlxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJlbnQgZmlsdGVyIGZ1bmN0aW9uIG9yIGBudWxsYCBpZiB0aGVyZSBpcyBub25lIHNldC5cbiAgICovXG4gIHRoaXMuY3VzdG9tRmlsdGVyID0gZnVuY3Rpb24oZmlsdGVyRm4pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY3VzdG9tRmlsdGVyID0gaXNGdW5jdGlvbihmaWx0ZXJGbikgPyBmaWx0ZXJGbiA6IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1c3RvbUZpbHRlcjtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI2NsYXNzTmFtZUZpbHRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyBhbmQvb3IgcmV0dXJucyB0aGUgQ1NTIGNsYXNzIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIGNoZWNrZWQgd2hlbiBwZXJmb3JtaW5nXG4gICAqIGFuIGFuaW1hdGlvbi4gVXBvbiBib290c3RyYXAgdGhlIGNsYXNzTmFtZUZpbHRlciB2YWx1ZSBpcyBub3Qgc2V0IGF0IGFsbCBhbmQgd2lsbFxuICAgKiB0aGVyZWZvcmUgZW5hYmxlICRhbmltYXRlIHRvIGF0dGVtcHQgdG8gcGVyZm9ybSBhbiBhbmltYXRpb24gb24gYW55IGVsZW1lbnQgdGhhdCBpcyB0cmlnZ2VyZWQuXG4gICAqIFdoZW4gc2V0dGluZyB0aGUgYGNsYXNzTmFtZUZpbHRlcmAgdmFsdWUsIGFuaW1hdGlvbnMgd2lsbCBvbmx5IGJlIHBlcmZvcm1lZCBvbiBlbGVtZW50c1xuICAgKiB0aGF0IHN1Y2Nlc3NmdWxseSBtYXRjaCB0aGUgZmlsdGVyIGV4cHJlc3Npb24uIFRoaXMgaW4gdHVybiBjYW4gYm9vc3QgcGVyZm9ybWFuY2VcbiAgICogZm9yIGxvdy1wb3dlcmVkIGRldmljZXMgYXMgd2VsbCBhcyBhcHBsaWNhdGlvbnMgY29udGFpbmluZyBhIGxvdCBvZiBzdHJ1Y3R1cmFsIG9wZXJhdGlvbnMuXG4gICAqXG4gICAqICoqTm90ZToqKiBJZiBwcmVzZW50LCBgY2xhc3NOYW1lRmlsdGVyYCB3aWxsIGJlIGNoZWNrZWQgYWZ0ZXJcbiAgICoge0BsaW5rICRhbmltYXRlUHJvdmlkZXIjY3VzdG9tRmlsdGVyIGN1c3RvbUZpbHRlcn0uIElmIGBjdXN0b21GaWx0ZXJgIGlzIHByZXNlbnQgYW5kIHJldHVybnNcbiAgICogZmFsc2UsIGBjbGFzc05hbWVGaWx0ZXJgIHdpbGwgbm90IGJlIGNoZWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gZXhwcmVzc2lvbiBUaGUgY2xhc3NOYW1lIGV4cHJlc3Npb24gd2hpY2ggd2lsbCBiZSBjaGVja2VkIGFnYWluc3QgYWxsIGFuaW1hdGlvbnNcbiAgICogQHJldHVybiB7UmVnRXhwfSBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIGV4cHJlc3Npb24gdmFsdWUuIElmIG51bGwgdGhlbiB0aGVyZSBpcyBubyBleHByZXNzaW9uIHZhbHVlXG4gICAqL1xuICB0aGlzLmNsYXNzTmFtZUZpbHRlciA9IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2xhc3NOYW1lRmlsdGVyID0gKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBSZWdFeHApID8gZXhwcmVzc2lvbiA6IG51bGw7XG4gICAgICBpZiAoY2xhc3NOYW1lRmlsdGVyKSB7XG4gICAgICAgIHZhciByZXNlcnZlZFJlZ2V4ID0gbmV3IFJlZ0V4cCgnWyhcXFxcc3xcXFxcLyldJyArIE5HX0FOSU1BVEVfQ0xBU1NOQU1FICsgJ1soXFxcXHN8XFxcXC8pXScpO1xuICAgICAgICBpZiAocmVzZXJ2ZWRSZWdleC50ZXN0KGNsYXNzTmFtZUZpbHRlci50b1N0cmluZygpKSkge1xuICAgICAgICAgIGNsYXNzTmFtZUZpbHRlciA9IG51bGw7XG4gICAgICAgICAgdGhyb3cgJGFuaW1hdGVNaW5FcnIoJ25vbmdjbHMnLCAnJGFuaW1hdGVQcm92aWRlci5jbGFzc05hbWVGaWx0ZXIocmVnZXgpIHByb2hpYml0cyBhY2NlcHRpbmcgYSByZWdleCB2YWx1ZSB3aGljaCBtYXRjaGVzL2NvbnRhaW5zIHRoZSBcInswfVwiIENTUyBjbGFzcy4nLCBOR19BTklNQVRFX0NMQVNTTkFNRSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNsYXNzTmFtZUZpbHRlcjtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyQkYW5pbWF0ZVF1ZXVlJywgZnVuY3Rpb24oJCRhbmltYXRlUXVldWUpIHtcbiAgICBmdW5jdGlvbiBkb21JbnNlcnQoZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50KSB7XG4gICAgICAvLyBpZiBmb3Igc29tZSByZWFzb24gdGhlIHByZXZpb3VzIGVsZW1lbnQgd2FzIHJlbW92ZWRcbiAgICAgIC8vIGZyb20gdGhlIGRvbSBzb21ldGltZSBiZWZvcmUgdGhpcyBjb2RlIHJ1bnMgdGhlbiBsZXQnc1xuICAgICAgLy8ganVzdCBzdGljayB0byB1c2luZyB0aGUgcGFyZW50IGVsZW1lbnQgYXMgdGhlIGFuY2hvclxuICAgICAgaWYgKGFmdGVyRWxlbWVudCkge1xuICAgICAgICB2YXIgYWZ0ZXJOb2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGFmdGVyRWxlbWVudCk7XG4gICAgICAgIGlmIChhZnRlck5vZGUgJiYgIWFmdGVyTm9kZS5wYXJlbnROb2RlICYmICFhZnRlck5vZGUucHJldmlvdXNFbGVtZW50U2libGluZykge1xuICAgICAgICAgIGFmdGVyRWxlbWVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhZnRlckVsZW1lbnQpIHtcbiAgICAgICAgYWZ0ZXJFbGVtZW50LmFmdGVyKGVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50RWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGFuaW1hdGVcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlICRhbmltYXRlIHNlcnZpY2UgZXhwb3NlcyBhIHNlcmllcyBvZiBET00gdXRpbGl0eSBtZXRob2RzIHRoYXQgcHJvdmlkZSBzdXBwb3J0XG4gICAgICogZm9yIGFuaW1hdGlvbiBob29rcy4gVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdGhlIGFwcGxpY2F0aW9uIG9mIERPTSBvcGVyYXRpb25zLCBob3dldmVyLFxuICAgICAqIHdoZW4gYW4gYW5pbWF0aW9uIGlzIGRldGVjdGVkIChhbmQgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZCksICRhbmltYXRlIHdpbGwgZG8gdGhlIGhlYXZ5IGxpZnRpbmdcbiAgICAgKiB0byBlbnN1cmUgdGhhdCBhbmltYXRpb24gcnVucyB3aXRoIHRoZSB0cmlnZ2VyZWQgRE9NIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgJGFuaW1hdGUgZG9lc24ndCB0cmlnZ2VyIGFueSBhbmltYXRpb25zLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBpc24ndFxuICAgICAqIGluY2x1ZGVkIGFuZCBvbmx5IHdoZW4gaXQgaXMgYWN0aXZlIHRoZW4gdGhlIGFuaW1hdGlvbiBob29rcyB0aGF0IGAkYW5pbWF0ZWAgdHJpZ2dlcnMgd2lsbCBiZVxuICAgICAqIGZ1bmN0aW9uYWwuIE9uY2UgYWN0aXZlIHRoZW4gYWxsIHN0cnVjdHVyYWwgYG5nLWAgZGlyZWN0aXZlcyB3aWxsIHRyaWdnZXIgYW5pbWF0aW9ucyBhcyB0aGV5IHBlcmZvcm1cbiAgICAgKiB0aGVpciBET00tcmVsYXRlZCBvcGVyYXRpb25zIChlbnRlciwgbGVhdmUgYW5kIG1vdmUpLiBPdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYG5nQ2xhc3NgLFxuICAgICAqIGBuZ1Nob3dgLCBgbmdIaWRlYCBhbmQgYG5nTWVzc2FnZXNgIGFsc28gcHJvdmlkZSBzdXBwb3J0IGZvciBhbmltYXRpb25zLlxuICAgICAqXG4gICAgICogSXQgaXMgcmVjb21tZW5kZWQgdGhhdCB0aGVgJGFuaW1hdGVgIHNlcnZpY2UgaXMgYWx3YXlzIHVzZWQgd2hlbiBleGVjdXRpbmcgRE9NLXJlbGF0ZWQgcHJvY2VkdXJlcyB3aXRoaW4gZGlyZWN0aXZlcy5cbiAgICAgKlxuICAgICAqIFRvIGxlYXJuIG1vcmUgYWJvdXQgZW5hYmxpbmcgYW5pbWF0aW9uIHN1cHBvcnQsIGNsaWNrIGhlcmUgdG8gdmlzaXQgdGhlXG4gICAgICoge0BsaW5rIG5nQW5pbWF0ZSBuZ0FuaW1hdGUgbW9kdWxlIHBhZ2V9LlxuICAgICAqL1xuICAgIHJldHVybiB7XG4gICAgICAvLyB3ZSBkb24ndCBjYWxsIGl0IGRpcmVjdGx5IHNpbmNlIG5vbi1leGlzdGFudCBhcmd1bWVudHMgbWF5XG4gICAgICAvLyBiZSBpbnRlcnByZXRlZCBhcyBudWxsIHdpdGhpbiB0aGUgc3ViIGVuYWJsZWQgZnVuY3Rpb25cblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjb25cbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gU2V0cyB1cCBhbiBldmVudCBsaXN0ZW5lciB0byBmaXJlIHdoZW5ldmVyIHRoZSBhbmltYXRpb24gZXZlbnQgKGVudGVyLCBsZWF2ZSwgbW92ZSwgZXRjLi4uKVxuICAgICAgICogICAgaGFzIGZpcmVkIG9uIHRoZSBnaXZlbiBlbGVtZW50IG9yIGFtb25nIGFueSBvZiBpdHMgY2hpbGRyZW4uIE9uY2UgdGhlIGxpc3RlbmVyIGlzIGZpcmVkLCB0aGUgcHJvdmlkZWQgY2FsbGJhY2tcbiAgICAgICAqICAgIGlzIGZpcmVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICRhbmltYXRlLm9uKCdlbnRlcicsIGNvbnRhaW5lcixcbiAgICAgICAqICAgIGZ1bmN0aW9uIGNhbGxiYWNrKGVsZW1lbnQsIHBoYXNlKSB7XG4gICAgICAgKiAgICAgIC8vIGNvb2wgd2UgZGV0ZWN0ZWQgYW4gZW50ZXIgYW5pbWF0aW9uIHdpdGhpbiB0aGUgY29udGFpbmVyXG4gICAgICAgKiAgICB9XG4gICAgICAgKiApO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IHRoZSBhbmltYXRpb24gZXZlbnQgdGhhdCB3aWxsIGJlIGNhcHR1cmVkIChlLmcuIGVudGVyLCBsZWF2ZSwgbW92ZSwgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzLCBldGMuLi4pXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciB0aGUgY29udGFpbmVyIGVsZW1lbnQgdGhhdCB3aWxsIGNhcHR1cmUgZWFjaCBvZiB0aGUgYW5pbWF0aW9uIGV2ZW50cyB0aGF0IGFyZSBmaXJlZCBvbiBpdHNlbGZcbiAgICAgICAqICAgICBhcyB3ZWxsIGFzIGFtb25nIGl0cyBjaGlsZHJlblxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIHRoZSBsaXN0ZW5lciBpcyB0cmlnZ2VyZWRcbiAgICAgICAqXG4gICAgICAgKiBUaGUgYXJndW1lbnRzIHByZXNlbnQgaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGFyZTpcbiAgICAgICAqICogYGVsZW1lbnRgIC0gVGhlIGNhcHR1cmVkIERPTSBlbGVtZW50IHRoYXQgdGhlIGFuaW1hdGlvbiB3YXMgZmlyZWQgb24uXG4gICAgICAgKiAqIGBwaGFzZWAgLSBUaGUgcGhhc2Ugb2YgdGhlIGFuaW1hdGlvbi4gVGhlIHR3byBwb3NzaWJsZSBwaGFzZXMgYXJlICoqc3RhcnQqKiAod2hlbiB0aGUgYW5pbWF0aW9uIHN0YXJ0cykgYW5kICoqY2xvc2UqKiAod2hlbiBpdCBlbmRzKS5cbiAgICAgICAqL1xuICAgICAgb246ICQkYW5pbWF0ZVF1ZXVlLm9uLFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNvZmZcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gRGVyZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgYmFzZWQgb24gdGhlIGV2ZW50IHdoaWNoIGhhcyBiZWVuIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgZWxlbWVudC4gVGhpcyBtZXRob2RcbiAgICAgICAqIGNhbiBiZSB1c2VkIGluIHRocmVlIGRpZmZlcmVudCB3YXlzIGRlcGVuZGluZyBvbiB0aGUgYXJndW1lbnRzOlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAvLyByZW1vdmUgYWxsIHRoZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgYGVudGVyYFxuICAgICAgICogJGFuaW1hdGUub2ZmKCdlbnRlcicpO1xuICAgICAgICpcbiAgICAgICAqIC8vIHJlbW92ZSBsaXN0ZW5lcnMgZm9yIGFsbCBhbmltYXRpb24gZXZlbnRzIGZyb20gdGhlIGNvbnRhaW5lciBlbGVtZW50XG4gICAgICAgKiAkYW5pbWF0ZS5vZmYoY29udGFpbmVyKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyByZW1vdmUgYWxsIHRoZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgYGVudGVyYCBvbiB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQgaXRzIGNoaWxkcmVuXG4gICAgICAgKiAkYW5pbWF0ZS5vZmYoJ2VudGVyJywgY29udGFpbmVyKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIHByb3ZpZGVkIGJ5IGBjYWxsYmFja2AgdGhhdCBpcyBzZXRcbiAgICAgICAqIC8vIHRvIGxpc3RlbiBmb3IgYGVudGVyYCBvbiB0aGUgZ2l2ZW4gYGNvbnRhaW5lcmAgYXMgd2VsbCBhcyBpdHMgY2hpbGRyZW5cbiAgICAgICAqICRhbmltYXRlLm9mZignZW50ZXInLCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfERPTUVsZW1lbnR9IGV2ZW50fGNvbnRhaW5lciB0aGUgYW5pbWF0aW9uIGV2ZW50IChlLmcuIGVudGVyLCBsZWF2ZSwgbW92ZSxcbiAgICAgICAqIGFkZENsYXNzLCByZW1vdmVDbGFzcywgZXRjLi4uKSwgb3IgdGhlIGNvbnRhaW5lciBlbGVtZW50LiBJZiBpdCBpcyB0aGUgZWxlbWVudCwgYWxsIG90aGVyXG4gICAgICAgKiBhcmd1bWVudHMgYXJlIGlnbm9yZWQuXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBjb250YWluZXIgdGhlIGNvbnRhaW5lciBlbGVtZW50IHRoZSBldmVudCBsaXN0ZW5lciB3YXMgcGxhY2VkIG9uXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2FzIHJlZ2lzdGVyZWQgYXMgdGhlIGxpc3RlbmVyXG4gICAgICAgKi9cbiAgICAgIG9mZjogJCRhbmltYXRlUXVldWUub2ZmLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3BpblxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBc3NvY2lhdGVzIHRoZSBwcm92aWRlZCBlbGVtZW50IHdpdGggYSBob3N0IHBhcmVudCBlbGVtZW50IHRvIGFsbG93IHRoZSBlbGVtZW50IHRvIGJlIGFuaW1hdGVkIGV2ZW4gaWYgaXQgZXhpc3RzXG4gICAgICAgKiAgICBvdXRzaWRlIG9mIHRoZSBET00gc3RydWN0dXJlIG9mIHRoZSBBbmd1bGFySlMgYXBwbGljYXRpb24uIEJ5IGRvaW5nIHNvLCBhbnkgYW5pbWF0aW9uIHRyaWdnZXJlZCB2aWEgYCRhbmltYXRlYCBjYW4gYmUgaXNzdWVkIG9uIHRoZVxuICAgICAgICogICAgZWxlbWVudCBkZXNwaXRlIGJlaW5nIG91dHNpZGUgdGhlIHJlYWxtIG9mIHRoZSBhcHBsaWNhdGlvbiBvciB3aXRoaW4gYW5vdGhlciBhcHBsaWNhdGlvbi4gU2F5IGZvciBleGFtcGxlIGlmIHRoZSBhcHBsaWNhdGlvblxuICAgICAgICogICAgd2FzIGJvb3RzdHJhcHBlZCBvbiBhbiBlbGVtZW50IHRoYXQgaXMgc29tZXdoZXJlIGluc2lkZSBvZiB0aGUgYDxib2R5PmAgdGFnLCBidXQgd2Ugd2FudGVkIHRvIGFsbG93IGZvciBhbiBlbGVtZW50IHRvIGJlIHNpdHVhdGVkXG4gICAgICAgKiAgICBhcyBhIGRpcmVjdCBjaGlsZCBvZiBgZG9jdW1lbnQuYm9keWAsIHRoZW4gdGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcGlubmluZyB0aGUgZWxlbWVudCB2aWEgYCRhbmltYXRlLnBpbihlbGVtZW50KWAuIEtlZXAgaW4gbWluZFxuICAgICAgICogICAgdGhhdCBjYWxsaW5nIGAkYW5pbWF0ZS5waW4oZWxlbWVudCwgcGFyZW50RWxlbWVudClgIHdpbGwgbm90IGFjdHVhbGx5IGluc2VydCBpbnRvIHRoZSBET00gYW55d2hlcmU7IGl0IHdpbGwganVzdCBjcmVhdGUgdGhlIGFzc29jaWF0aW9uLlxuICAgICAgICpcbiAgICAgICAqICAgIE5vdGUgdGhhdCB0aGlzIGZlYXR1cmUgaXMgb25seSBhY3RpdmUgd2hlbiB0aGUgYG5nQW5pbWF0ZWAgbW9kdWxlIGlzIHVzZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBleHRlcm5hbCBlbGVtZW50IHRoYXQgd2lsbCBiZSBwaW5uZWRcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50RWxlbWVudCB0aGUgaG9zdCBwYXJlbnQgZWxlbWVudCB0aGF0IHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBleHRlcm5hbCBlbGVtZW50XG4gICAgICAgKi9cbiAgICAgIHBpbjogJCRhbmltYXRlUXVldWUucGluLFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNlbmFibGVkXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIFVzZWQgdG8gZ2V0IGFuZCBzZXQgd2hldGhlciBhbmltYXRpb25zIGFyZSBlbmFibGVkIG9yIG5vdCBvbiB0aGUgZW50aXJlIGFwcGxpY2F0aW9uIG9yIG9uIGFuIGVsZW1lbnQgYW5kIGl0cyBjaGlsZHJlbi4gVGhpc1xuICAgICAgICogZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBpbiBmb3VyIHdheXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqIC8vIHJldHVybnMgdHJ1ZSBvciBmYWxzZVxuICAgICAgICogJGFuaW1hdGUuZW5hYmxlZCgpO1xuICAgICAgICpcbiAgICAgICAqIC8vIGNoYW5nZXMgdGhlIGVuYWJsZWQgc3RhdGUgZm9yIGFsbCBhbmltYXRpb25zXG4gICAgICAgKiAkYW5pbWF0ZS5lbmFibGVkKGZhbHNlKTtcbiAgICAgICAqICRhbmltYXRlLmVuYWJsZWQodHJ1ZSk7XG4gICAgICAgKlxuICAgICAgICogLy8gcmV0dXJucyB0cnVlIG9yIGZhbHNlIGlmIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQgZm9yIGFuIGVsZW1lbnRcbiAgICAgICAqICRhbmltYXRlLmVuYWJsZWQoZWxlbWVudCk7XG4gICAgICAgKlxuICAgICAgICogLy8gY2hhbmdlcyB0aGUgZW5hYmxlZCBzdGF0ZSBmb3IgYW4gZWxlbWVudCBhbmQgaXRzIGNoaWxkcmVuXG4gICAgICAgKiAkYW5pbWF0ZS5lbmFibGVkKGVsZW1lbnQsIHRydWUpO1xuICAgICAgICogJGFuaW1hdGUuZW5hYmxlZChlbGVtZW50LCBmYWxzZSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSBjb25zaWRlcmVkIGZvciBjaGVja2luZy9zZXR0aW5nIHRoZSBlbmFibGVkIHN0YXRlXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBlbmFibGVkIHdoZXRoZXIgb3Igbm90IHRoZSBhbmltYXRpb25zIHdpbGwgYmUgZW5hYmxlZCBmb3IgdGhlIGVsZW1lbnRcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCBhbmltYXRpb25zIGFyZSBlbmFibGVkXG4gICAgICAgKi9cbiAgICAgIGVuYWJsZWQ6ICQkYW5pbWF0ZVF1ZXVlLmVuYWJsZWQsXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjY2FuY2VsXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIENhbmNlbHMgdGhlIHByb3ZpZGVkIGFuaW1hdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge1Byb21pc2V9IGFuaW1hdGlvblByb21pc2UgVGhlIGFuaW1hdGlvbiBwcm9taXNlIHRoYXQgaXMgcmV0dXJuZWQgd2hlbiBhbiBhbmltYXRpb24gaXMgc3RhcnRlZC5cbiAgICAgICAqL1xuICAgICAgY2FuY2VsOiBmdW5jdGlvbihydW5uZXIpIHtcbiAgICAgICAgaWYgKHJ1bm5lci5lbmQpIHtcbiAgICAgICAgICBydW5uZXIuZW5kKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICpcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2VudGVyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIEluc2VydHMgdGhlIGVsZW1lbnQgaW50byB0aGUgRE9NIGVpdGhlciBhZnRlciB0aGUgYGFmdGVyYCBlbGVtZW50IChpZiBwcm92aWRlZCkgb3JcbiAgICAgICAqICAgYXMgdGhlIGZpcnN0IGNoaWxkIHdpdGhpbiB0aGUgYHBhcmVudGAgZWxlbWVudCBhbmQgdGhlbiB0cmlnZ2VycyBhbiBhbmltYXRpb24uXG4gICAgICAgKiAgIEEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgZHVyaW5nIHRoZSBuZXh0IGRpZ2VzdCBvbmNlIHRoZSBhbmltYXRpb25cbiAgICAgICAqICAgaGFzIGNvbXBsZXRlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET01cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudCBhc1xuICAgICAgICogICBhIGNoaWxkIChzbyBsb25nIGFzIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gYWZ0ZXIgdGhlIHNpYmxpbmcgZWxlbWVudCBhZnRlciB3aGljaCB0aGUgZWxlbWVudCB3aWxsIGJlIGFwcGVuZGVkXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxuICAgICAgICovXG4gICAgICBlbnRlcjogZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50LCBhZnRlciwgb3B0aW9ucykge1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQgJiYganFMaXRlKHBhcmVudCk7XG4gICAgICAgIGFmdGVyID0gYWZ0ZXIgJiYganFMaXRlKGFmdGVyKTtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50IHx8IGFmdGVyLnBhcmVudCgpO1xuICAgICAgICBkb21JbnNlcnQoZWxlbWVudCwgcGFyZW50LCBhZnRlcik7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdlbnRlcicsIHByZXBhcmVBbmltYXRlT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNtb3ZlXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIEluc2VydHMgKG1vdmVzKSB0aGUgZWxlbWVudCBpbnRvIGl0cyBuZXcgcG9zaXRpb24gaW4gdGhlIERPTSBlaXRoZXIgYWZ0ZXJcbiAgICAgICAqICAgdGhlIGBhZnRlcmAgZWxlbWVudCAoaWYgcHJvdmlkZWQpIG9yIGFzIHRoZSBmaXJzdCBjaGlsZCB3aXRoaW4gdGhlIGBwYXJlbnRgIGVsZW1lbnRcbiAgICAgICAqICAgYW5kIHRoZW4gdHJpZ2dlcnMgYW4gYW5pbWF0aW9uLiBBIHByb21pc2UgaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkXG4gICAgICAgKiAgIGR1cmluZyB0aGUgbmV4dCBkaWdlc3Qgb25jZSB0aGUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgYmUgbW92ZWQgaW50byB0aGUgbmV3IERPTSBwb3NpdGlvblxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBwYXJlbnQgdGhlIHBhcmVudCBlbGVtZW50IHdoaWNoIHdpbGwgYXBwZW5kIHRoZSBlbGVtZW50IGFzXG4gICAgICAgKiAgIGEgY2hpbGQgKHNvIGxvbmcgYXMgdGhlIGFmdGVyIGVsZW1lbnQgaXMgbm90IHByZXNlbnQpXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBhZnRlciB0aGUgc2libGluZyBlbGVtZW50IGFmdGVyIHdoaWNoIHRoZSBlbGVtZW50IHdpbGwgYmUgYXBwZW5kZWRcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgKi9cbiAgICAgIG1vdmU6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50ICYmIGpxTGl0ZShwYXJlbnQpO1xuICAgICAgICBhZnRlciA9IGFmdGVyICYmIGpxTGl0ZShhZnRlcik7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudCB8fCBhZnRlci5wYXJlbnQoKTtcbiAgICAgICAgZG9tSW5zZXJ0KGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnbW92ZScsIHByZXBhcmVBbmltYXRlT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2xlYXZlXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIFRyaWdnZXJzIGFuIGFuaW1hdGlvbiBhbmQgdGhlbiByZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIERPTS5cbiAgICAgICAqIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2UgaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGR1cmluZyB0aGUgbmV4dFxuICAgICAgICogZGlnZXN0IG9uY2UgdGhlIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgRE9NXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxuICAgICAgICovXG4gICAgICBsZWF2ZTogZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnbGVhdmUnLCBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNhZGRDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVHJpZ2dlcnMgYW4gYWRkQ2xhc3MgYW5pbWF0aW9uIHN1cnJvdW5kaW5nIHRoZSBhZGRpdGlvbiBvZiB0aGUgcHJvdmlkZWQgQ1NTIGNsYXNzKGVzKS4gVXBvblxuICAgICAgICogICBleGVjdXRpb24sIHRoZSBhZGRDbGFzcyBvcGVyYXRpb24gd2lsbCBvbmx5IGJlIGhhbmRsZWQgYWZ0ZXIgdGhlIG5leHQgZGlnZXN0IGFuZCBpdCB3aWxsIG5vdCB0cmlnZ2VyIGFuXG4gICAgICAgKiAgIGFuaW1hdGlvbiBpZiBlbGVtZW50IGFscmVhZHkgY29udGFpbnMgdGhlIENTUyBjbGFzcyBvciBpZiB0aGUgY2xhc3MgaXMgcmVtb3ZlZCBhdCBhIGxhdGVyIHN0ZXAuXG4gICAgICAgKiAgIE5vdGUgdGhhdCBjbGFzcy1iYXNlZCBhbmltYXRpb25zIGFyZSB0cmVhdGVkIGRpZmZlcmVudGx5IGNvbXBhcmVkIHRvIHN0cnVjdHVyYWwgYW5pbWF0aW9uc1xuICAgICAgICogICAobGlrZSBlbnRlciwgbW92ZSBhbmQgbGVhdmUpIHNpbmNlIHRoZSBDU1MgY2xhc3NlcyBtYXkgYmUgYWRkZWQvcmVtb3ZlZCBhdCBkaWZmZXJlbnQgcG9pbnRzXG4gICAgICAgKiAgIGRlcGVuZGluZyBpZiBDU1Mgb3IgSmF2YVNjcmlwdCBhbmltYXRpb25zIGFyZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB0aGUgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSBhZGRlZCAobXVsdGlwbGUgY2xhc3NlcyBhcmUgc2VwYXJhdGVkIHZpYSBzcGFjZXMpXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxuICAgICAgICovXG4gICAgICBhZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIG9wdGlvbnMuYWRkQ2xhc3MgPSBtZXJnZUNsYXNzZXMob3B0aW9ucy5hZGRjbGFzcywgY2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuICQkYW5pbWF0ZVF1ZXVlLnB1c2goZWxlbWVudCwgJ2FkZENsYXNzJywgb3B0aW9ucyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3JlbW92ZUNsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBUcmlnZ2VycyBhIHJlbW92ZUNsYXNzIGFuaW1hdGlvbiBzdXJyb3VuZGluZyB0aGUgcmVtb3ZhbCBvZiB0aGUgcHJvdmlkZWQgQ1NTIGNsYXNzKGVzKS4gVXBvblxuICAgICAgICogICBleGVjdXRpb24sIHRoZSByZW1vdmVDbGFzcyBvcGVyYXRpb24gd2lsbCBvbmx5IGJlIGhhbmRsZWQgYWZ0ZXIgdGhlIG5leHQgZGlnZXN0IGFuZCBpdCB3aWxsIG5vdCB0cmlnZ2VyIGFuXG4gICAgICAgKiAgIGFuaW1hdGlvbiBpZiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gdGhlIENTUyBjbGFzcyBvciBpZiB0aGUgY2xhc3MgaXMgYWRkZWQgYXQgYSBsYXRlciBzdGVwLlxuICAgICAgICogICBOb3RlIHRoYXQgY2xhc3MtYmFzZWQgYW5pbWF0aW9ucyBhcmUgdHJlYXRlZCBkaWZmZXJlbnRseSBjb21wYXJlZCB0byBzdHJ1Y3R1cmFsIGFuaW1hdGlvbnNcbiAgICAgICAqICAgKGxpa2UgZW50ZXIsIG1vdmUgYW5kIGxlYXZlKSBzaW5jZSB0aGUgQ1NTIGNsYXNzZXMgbWF5IGJlIGFkZGVkL3JlbW92ZWQgYXQgZGlmZmVyZW50IHBvaW50c1xuICAgICAgICogICBkZXBlbmRpbmcgaWYgQ1NTIG9yIEphdmFTY3JpcHQgYW5pbWF0aW9ucyBhcmUgdXNlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggdGhlIENTUyBjbGFzc2VzIHdpbGwgYmUgYXBwbGllZCB0b1xuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSB0aGUgQ1NTIGNsYXNzKGVzKSB0aGF0IHdpbGwgYmUgcmVtb3ZlZCAobXVsdGlwbGUgY2xhc3NlcyBhcmUgc2VwYXJhdGVkIHZpYSBzcGFjZXMpXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxuICAgICAgICovXG4gICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIG9wdGlvbnMucmVtb3ZlQ2xhc3MgPSBtZXJnZUNsYXNzZXMob3B0aW9ucy5yZW1vdmVDbGFzcywgY2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuICQkYW5pbWF0ZVF1ZXVlLnB1c2goZWxlbWVudCwgJ3JlbW92ZUNsYXNzJywgb3B0aW9ucyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3NldENsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBQZXJmb3JtcyBib3RoIHRoZSBhZGRpdGlvbiBhbmQgcmVtb3ZhbCBvZiBhIENTUyBjbGFzc2VzIG9uIGFuIGVsZW1lbnQgYW5kIChkdXJpbmcgdGhlIHByb2Nlc3MpXG4gICAgICAgKiAgICB0cmlnZ2VycyBhbiBhbmltYXRpb24gc3Vycm91bmRpbmcgdGhlIGNsYXNzIGFkZGl0aW9uL3JlbW92YWwuIE11Y2ggbGlrZSBgJGFuaW1hdGUuYWRkQ2xhc3NgIGFuZFxuICAgICAgICogICAgYCRhbmltYXRlLnJlbW92ZUNsYXNzYCwgYHNldENsYXNzYCB3aWxsIG9ubHkgZXZhbHVhdGUgdGhlIGNsYXNzZXMgYmVpbmcgYWRkZWQvcmVtb3ZlZCBvbmNlIGEgZGlnZXN0IGhhc1xuICAgICAgICogICAgcGFzc2VkLiBOb3RlIHRoYXQgY2xhc3MtYmFzZWQgYW5pbWF0aW9ucyBhcmUgdHJlYXRlZCBkaWZmZXJlbnRseSBjb21wYXJlZCB0byBzdHJ1Y3R1cmFsIGFuaW1hdGlvbnNcbiAgICAgICAqICAgIChsaWtlIGVudGVyLCBtb3ZlIGFuZCBsZWF2ZSkgc2luY2UgdGhlIENTUyBjbGFzc2VzIG1heSBiZSBhZGRlZC9yZW1vdmVkIGF0IGRpZmZlcmVudCBwb2ludHNcbiAgICAgICAqICAgIGRlcGVuZGluZyBpZiBDU1Mgb3IgSmF2YVNjcmlwdCBhbmltYXRpb25zIGFyZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB0aGUgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWRkIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSBhZGRlZCAobXVsdGlwbGUgY2xhc3NlcyBhcmUgc2VwYXJhdGVkIHZpYSBzcGFjZXMpXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVtb3ZlIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSByZW1vdmVkIChtdWx0aXBsZSBjbGFzc2VzIGFyZSBzZXBhcmF0ZWQgdmlhIHNwYWNlcylcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgKi9cbiAgICAgIHNldENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBhZGQsIHJlbW92ZSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gcHJlcGFyZUFuaW1hdGVPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBvcHRpb25zLmFkZENsYXNzID0gbWVyZ2VDbGFzc2VzKG9wdGlvbnMuYWRkQ2xhc3MsIGFkZCk7XG4gICAgICAgIG9wdGlvbnMucmVtb3ZlQ2xhc3MgPSBtZXJnZUNsYXNzZXMob3B0aW9ucy5yZW1vdmVDbGFzcywgcmVtb3ZlKTtcbiAgICAgICAgcmV0dXJuICQkYW5pbWF0ZVF1ZXVlLnB1c2goZWxlbWVudCwgJ3NldENsYXNzJywgb3B0aW9ucyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2FuaW1hdGVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFBlcmZvcm1zIGFuIGlubGluZSBhbmltYXRpb24gb24gdGhlIGVsZW1lbnQgd2hpY2ggYXBwbGllcyB0aGUgcHJvdmlkZWQgdG8gYW5kIGZyb20gQ1NTIHN0eWxlcyB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqIElmIGFueSBkZXRlY3RlZCBDU1MgdHJhbnNpdGlvbiwga2V5ZnJhbWUgb3IgSmF2YVNjcmlwdCBtYXRjaGVzIHRoZSBwcm92aWRlZCBjbGFzc05hbWUgdmFsdWUsIHRoZW4gdGhlIGFuaW1hdGlvbiB3aWxsIHRha2VcbiAgICAgICAqIG9uIHRoZSBwcm92aWRlZCBzdHlsZXMuIEZvciBleGFtcGxlLCBpZiBhIHRyYW5zaXRpb24gYW5pbWF0aW9uIGlzIHNldCBmb3IgdGhlIGdpdmVuIGNsYXNzTmFtZSwgdGhlbiB0aGUgcHJvdmlkZWQgYGZyb21gIGFuZFxuICAgICAgICogYHRvYCBzdHlsZXMgd2lsbCBiZSBhcHBsaWVkIGFsb25nc2lkZSB0aGUgZ2l2ZW4gdHJhbnNpdGlvbi4gSWYgdGhlIENTUyBzdHlsZSBwcm92aWRlZCBpbiBgZnJvbWAgZG9lcyBub3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmdcbiAgICAgICAqIHN0eWxlIGluIGB0b2AsIHRoZSBzdHlsZSBpbiBgZnJvbWAgaXMgYXBwbGllZCBpbW1lZGlhdGVseSwgYW5kIG5vIGFuaW1hdGlvbiBpcyBydW4uXG4gICAgICAgKiBJZiBhIEphdmFTY3JpcHQgYW5pbWF0aW9uIGlzIGRldGVjdGVkIHRoZW4gdGhlIHByb3ZpZGVkIHN0eWxlcyB3aWxsIGJlIGdpdmVuIGluIGFzIGZ1bmN0aW9uIHBhcmFtZXRlcnMgaW50byB0aGUgYGFuaW1hdGVgXG4gICAgICAgKiBtZXRob2QgKG9yIGFzIHBhcnQgb2YgdGhlIGBvcHRpb25zYCBwYXJhbWV0ZXIpOlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiBuZ01vZHVsZS5hbmltYXRpb24oJy5teS1pbmxpbmUtYW5pbWF0aW9uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgKiAgIHJldHVybiB7XG4gICAgICAgKiAgICAgYW5pbWF0ZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIGZyb20sIHRvLCBkb25lLCBvcHRpb25zKSB7XG4gICAgICAgKiAgICAgICAvL2FuaW1hdGlvblxuICAgICAgICogICAgICAgZG9uZSgpO1xuICAgICAgICogICAgIH1cbiAgICAgICAqICAgfVxuICAgICAgICogfSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggdGhlIENTUyBzdHlsZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge29iamVjdH0gZnJvbSB0aGUgZnJvbSAoc3RhcnRpbmcpIENTUyBzdHlsZXMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQgYW5kIGFjcm9zcyB0aGUgYW5pbWF0aW9uLlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IHRvIHRoZSB0byAoZGVzdGluYXRpb24pIENTUyBzdHlsZXMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQgYW5kIGFjcm9zcyB0aGUgYW5pbWF0aW9uLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmc9fSBjbGFzc05hbWUgYW4gb3B0aW9uYWwgQ1NTIGNsYXNzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbi4gSWZcbiAgICAgICAqICAgIHRoaXMgdmFsdWUgaXMgbGVmdCBhcyBlbXB0eSB0aGVuIGEgQ1NTIGNsYXNzIG9mIGBuZy1pbmxpbmUtYW5pbWF0ZWAgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICAgKE5vdGUgdGhhdCBpZiBubyBhbmltYXRpb24gaXMgZGV0ZWN0ZWQgdGhlbiB0aGlzIHZhbHVlIHdpbGwgbm90IGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuKVxuICAgICAgICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIGFuIG9wdGlvbmFsIGNvbGxlY3Rpb24gb2Ygb3B0aW9ucy9zdHlsZXMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiAgIFRoZSBvYmplY3QgY2FuIGhhdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAgICpcbiAgICAgICAqICAgLSAqKmFkZENsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIGFkZCB0byBlbGVtZW50XG4gICAgICAgKiAgIC0gKipmcm9tKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgdGhlIGJlZ2lubmluZyBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgdG9gXG4gICAgICAgKiAgIC0gKipyZW1vdmVDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byByZW1vdmUgZnJvbSBlbGVtZW50XG4gICAgICAgKiAgIC0gKip0byoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IGVuZCBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgZnJvbWBcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgYW5pbWF0ZTogZnVuY3Rpb24oZWxlbWVudCwgZnJvbSwgdG8sIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gcHJlcGFyZUFuaW1hdGVPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBvcHRpb25zLmZyb20gPSBvcHRpb25zLmZyb20gPyBleHRlbmQob3B0aW9ucy5mcm9tLCBmcm9tKSA6IGZyb207XG4gICAgICAgIG9wdGlvbnMudG8gICA9IG9wdGlvbnMudG8gICA/IGV4dGVuZChvcHRpb25zLnRvLCB0bykgICAgIDogdG87XG5cbiAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8ICduZy1pbmxpbmUtYW5pbWF0ZSc7XG4gICAgICAgIG9wdGlvbnMudGVtcENsYXNzZXMgPSBtZXJnZUNsYXNzZXMob3B0aW9ucy50ZW1wQ2xhc3NlcywgY2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuICQkYW5pbWF0ZVF1ZXVlLnB1c2goZWxlbWVudCwgJ2FuaW1hdGUnLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XTtcbn1dO1xuXG52YXIgJCRBbmltYXRlQXN5bmNSdW5GYWN0b3J5UHJvdmlkZXIgPSAvKiogQHRoaXMgKi8gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IFsnJCRyQUYnLCBmdW5jdGlvbigkJHJBRikge1xuICAgIHZhciB3YWl0UXVldWUgPSBbXTtcblxuICAgIGZ1bmN0aW9uIHdhaXRGb3JUaWNrKGZuKSB7XG4gICAgICB3YWl0UXVldWUucHVzaChmbik7XG4gICAgICBpZiAod2FpdFF1ZXVlLmxlbmd0aCA+IDEpIHJldHVybjtcbiAgICAgICQkckFGKGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdhaXRRdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHdhaXRRdWV1ZVtpXSgpO1xuICAgICAgICB9XG4gICAgICAgIHdhaXRRdWV1ZSA9IFtdO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgd2FpdEZvclRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHBhc3NlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBpZiAocGFzc2VkKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3YWl0Rm9yVGljayhjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcbiAgfV07XG59O1xuXG52YXIgJCRBbmltYXRlUnVubmVyRmFjdG9yeVByb3ZpZGVyID0gLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBbJyRxJywgJyRzbmlmZmVyJywgJyQkYW5pbWF0ZUFzeW5jUnVuJywgJyQkaXNEb2N1bWVudEhpZGRlbicsICckdGltZW91dCcsXG4gICAgICAgZnVuY3Rpb24oJHEsICAgJHNuaWZmZXIsICAgJCRhbmltYXRlQXN5bmNSdW4sICAgJCRpc0RvY3VtZW50SGlkZGVuLCAgICR0aW1lb3V0KSB7XG5cbiAgICB2YXIgSU5JVElBTF9TVEFURSA9IDA7XG4gICAgdmFyIERPTkVfUEVORElOR19TVEFURSA9IDE7XG4gICAgdmFyIERPTkVfQ09NUExFVEVfU1RBVEUgPSAyO1xuXG4gICAgQW5pbWF0ZVJ1bm5lci5jaGFpbiA9IGZ1bmN0aW9uKGNoYWluLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGluZGV4ID0gMDtcblxuICAgICAgbmV4dCgpO1xuICAgICAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSBjaGFpbi5sZW5ndGgpIHtcbiAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjaGFpbltpbmRleF0oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQW5pbWF0ZVJ1bm5lci5hbGwgPSBmdW5jdGlvbihydW5uZXJzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgIHZhciBzdGF0dXMgPSB0cnVlO1xuICAgICAgZm9yRWFjaChydW5uZXJzLCBmdW5jdGlvbihydW5uZXIpIHtcbiAgICAgICAgcnVubmVyLmRvbmUob25Qcm9ncmVzcyk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gb25Qcm9ncmVzcyhyZXNwb25zZSkge1xuICAgICAgICBzdGF0dXMgPSBzdGF0dXMgJiYgcmVzcG9uc2U7XG4gICAgICAgIGlmICgrK2NvdW50ID09PSBydW5uZXJzLmxlbmd0aCkge1xuICAgICAgICAgIGNhbGxiYWNrKHN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gQW5pbWF0ZVJ1bm5lcihob3N0KSB7XG4gICAgICB0aGlzLnNldEhvc3QoaG9zdCk7XG5cbiAgICAgIHZhciByYWZUaWNrID0gJCRhbmltYXRlQXN5bmNSdW4oKTtcbiAgICAgIHZhciB0aW1lb3V0VGljayA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICR0aW1lb3V0KGZuLCAwLCBmYWxzZSk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9kb25lQ2FsbGJhY2tzID0gW107XG4gICAgICB0aGlzLl90aWNrID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgaWYgKCQkaXNEb2N1bWVudEhpZGRlbigpKSB7XG4gICAgICAgICAgdGltZW91dFRpY2soZm4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhZlRpY2soZm4pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdGhpcy5fc3RhdGUgPSAwO1xuICAgIH1cblxuICAgIEFuaW1hdGVSdW5uZXIucHJvdG90eXBlID0ge1xuICAgICAgc2V0SG9zdDogZnVuY3Rpb24oaG9zdCkge1xuICAgICAgICB0aGlzLmhvc3QgPSBob3N0IHx8IHt9O1xuICAgICAgfSxcblxuICAgICAgZG9uZTogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSBET05FX0NPTVBMRVRFX1NUQVRFKSB7XG4gICAgICAgICAgZm4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9kb25lQ2FsbGJhY2tzLnB1c2goZm4pO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBwcm9ncmVzczogbm9vcCxcblxuICAgICAgZ2V0UHJvbWlzZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5wcm9taXNlKSB7XG4gICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgIHRoaXMucHJvbWlzZSA9ICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgc2VsZi5kb25lKGZ1bmN0aW9uKHN0YXR1cykge1xuICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICAgIH0sXG5cbiAgICAgIHRoZW46IGZ1bmN0aW9uKHJlc29sdmVIYW5kbGVyLCByZWplY3RIYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFByb21pc2UoKS50aGVuKHJlc29sdmVIYW5kbGVyLCByZWplY3RIYW5kbGVyKTtcbiAgICAgIH0sXG5cbiAgICAgICdjYXRjaCc6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpWydjYXRjaCddKGhhbmRsZXIpO1xuICAgICAgfSxcblxuICAgICAgJ2ZpbmFsbHknOiBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFByb21pc2UoKVsnZmluYWxseSddKGhhbmRsZXIpO1xuICAgICAgfSxcblxuICAgICAgcGF1c2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5ob3N0LnBhdXNlKSB7XG4gICAgICAgICAgdGhpcy5ob3N0LnBhdXNlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHJlc3VtZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3QucmVzdW1lKSB7XG4gICAgICAgICAgdGhpcy5ob3N0LnJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBlbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5ob3N0LmVuZCkge1xuICAgICAgICAgIHRoaXMuaG9zdC5lbmQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZXNvbHZlKHRydWUpO1xuICAgICAgfSxcblxuICAgICAgY2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9zdC5jYW5jZWwpIHtcbiAgICAgICAgICB0aGlzLmhvc3QuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9LFxuXG4gICAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgPT09IElOSVRJQUxfU1RBVEUpIHtcbiAgICAgICAgICBzZWxmLl9zdGF0ZSA9IERPTkVfUEVORElOR19TVEFURTtcbiAgICAgICAgICBzZWxmLl90aWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5fcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIF9yZXNvbHZlOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBpZiAodGhpcy5fc3RhdGUgIT09IERPTkVfQ09NUExFVEVfU1RBVEUpIHtcbiAgICAgICAgICBmb3JFYWNoKHRoaXMuX2RvbmVDYWxsYmFja3MsIGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBmbihyZXNwb25zZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fZG9uZUNhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgICAgICAgIHRoaXMuX3N0YXRlID0gRE9ORV9DT01QTEVURV9TVEFURTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gQW5pbWF0ZVJ1bm5lcjtcbiAgfV07XG59O1xuXG4vKiBleHBvcnRlZCAkQ29yZUFuaW1hdGVDc3NQcm92aWRlciAqL1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkYW5pbWF0ZUNzc1xuICogQGtpbmQgb2JqZWN0XG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBpcyB0aGUgY29yZSB2ZXJzaW9uIG9mIGAkYW5pbWF0ZUNzc2AuIEJ5IGRlZmF1bHQsIG9ubHkgd2hlbiB0aGUgYG5nQW5pbWF0ZWAgaXMgaW5jbHVkZWQsXG4gKiB0aGVuIHRoZSBgJGFuaW1hdGVDc3NgIHNlcnZpY2Ugd2lsbCBhY3R1YWxseSBwZXJmb3JtIGFuaW1hdGlvbnMuXG4gKlxuICogQ2xpY2sgaGVyZSB7QGxpbmsgbmdBbmltYXRlLiRhbmltYXRlQ3NzIHRvIHJlYWQgdGhlIGRvY3VtZW50YXRpb24gZm9yICRhbmltYXRlQ3NzfS5cbiAqL1xudmFyICRDb3JlQW5pbWF0ZUNzc1Byb3ZpZGVyID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IFsnJCRyQUYnLCAnJHEnLCAnJCRBbmltYXRlUnVubmVyJywgZnVuY3Rpb24oJCRyQUYsICRxLCAkJEFuaW1hdGVSdW5uZXIpIHtcblxuICAgIHJldHVybiBmdW5jdGlvbihlbGVtZW50LCBpbml0aWFsT3B0aW9ucykge1xuICAgICAgLy8gYWxsIG9mIHRoZSBhbmltYXRpb24gZnVuY3Rpb25zIHNob3VsZCBjcmVhdGVcbiAgICAgIC8vIGEgY29weSBvZiB0aGUgb3B0aW9ucyBkYXRhLCBob3dldmVyLCBpZiBhXG4gICAgICAvLyBwYXJlbnQgc2VydmljZSBoYXMgYWxyZWFkeSBjcmVhdGVkIGEgY29weSB0aGVuXG4gICAgICAvLyB3ZSBzaG91bGQgc3RpY2sgdG8gdXNpbmcgdGhhdFxuICAgICAgdmFyIG9wdGlvbnMgPSBpbml0aWFsT3B0aW9ucyB8fCB7fTtcbiAgICAgIGlmICghb3B0aW9ucy4kJHByZXBhcmVkKSB7XG4gICAgICAgIG9wdGlvbnMgPSBjb3B5KG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGVyZSBpcyBubyBwb2ludCBpbiBhcHBseWluZyB0aGUgc3R5bGVzIHNpbmNlXG4gICAgICAvLyB0aGVyZSBpcyBubyBhbmltYXRpb24gdGhhdCBnb2VzIG9uIGF0IGFsbCBpblxuICAgICAgLy8gdGhpcyB2ZXJzaW9uIG9mICRhbmltYXRlQ3NzLlxuICAgICAgaWYgKG9wdGlvbnMuY2xlYW51cFN0eWxlcykge1xuICAgICAgICBvcHRpb25zLmZyb20gPSBvcHRpb25zLnRvID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuZnJvbSkge1xuICAgICAgICBlbGVtZW50LmNzcyhvcHRpb25zLmZyb20pO1xuICAgICAgICBvcHRpb25zLmZyb20gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xvc2VkLCBydW5uZXIgPSBuZXcgJCRBbmltYXRlUnVubmVyKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGFydDogcnVuLFxuICAgICAgICBlbmQ6IHJ1blxuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gcnVuKCkge1xuICAgICAgICAkJHJBRihmdW5jdGlvbigpIHtcbiAgICAgICAgICBhcHBseUFuaW1hdGlvbkNvbnRlbnRzKCk7XG4gICAgICAgICAgaWYgKCFjbG9zZWQpIHtcbiAgICAgICAgICAgIHJ1bm5lci5jb21wbGV0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJ1bm5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYXBwbHlBbmltYXRpb25Db250ZW50cygpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWRkQ2xhc3MpIHtcbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKG9wdGlvbnMuYWRkQ2xhc3MpO1xuICAgICAgICAgIG9wdGlvbnMuYWRkQ2xhc3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnJlbW92ZUNsYXNzKSB7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhvcHRpb25zLnJlbW92ZUNsYXNzKTtcbiAgICAgICAgICBvcHRpb25zLnJlbW92ZUNsYXNzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgICAgIGVsZW1lbnQuY3NzKG9wdGlvbnMudG8pO1xuICAgICAgICAgIG9wdGlvbnMudG8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfV07XG59O1xuXG4vKiBnbG9iYWwgc3RyaXBIYXNoOiB0cnVlICovXG5cbi8qKlxuICogISBUaGlzIGlzIGEgcHJpdmF0ZSB1bmRvY3VtZW50ZWQgc2VydmljZSAhXG4gKlxuICogQG5hbWUgJGJyb3dzZXJcbiAqIEByZXF1aXJlcyAkbG9nXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgb2JqZWN0IGhhcyB0d28gZ29hbHM6XG4gKlxuICogLSBoaWRlIGFsbCB0aGUgZ2xvYmFsIHN0YXRlIGluIHRoZSBicm93c2VyIGNhdXNlZCBieSB0aGUgd2luZG93IG9iamVjdFxuICogLSBhYnN0cmFjdCBhd2F5IGFsbCB0aGUgYnJvd3NlciBzcGVjaWZpYyBmZWF0dXJlcyBhbmQgaW5jb25zaXN0ZW5jaWVzXG4gKlxuICogRm9yIHRlc3RzIHdlIHByb3ZpZGUge0BsaW5rIG5nTW9jay4kYnJvd3NlciBtb2NrIGltcGxlbWVudGF0aW9ufSBvZiB0aGUgYCRicm93c2VyYFxuICogc2VydmljZSwgd2hpY2ggY2FuIGJlIHVzZWQgZm9yIGNvbnZlbmllbnQgdGVzdGluZyBvZiB0aGUgYXBwbGljYXRpb24gd2l0aG91dCB0aGUgaW50ZXJhY3Rpb24gd2l0aFxuICogdGhlIHJlYWwgYnJvd3NlciBhcGlzLlxuICovXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSB3aW5kb3cgVGhlIGdsb2JhbCB3aW5kb3cgb2JqZWN0LlxuICogQHBhcmFtIHtvYmplY3R9IGRvY3VtZW50IGpRdWVyeSB3cmFwcGVkIGRvY3VtZW50LlxuICogQHBhcmFtIHtvYmplY3R9ICRsb2cgd2luZG93LmNvbnNvbGUgb3IgYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUgaW50ZXJmYWNlLlxuICogQHBhcmFtIHtvYmplY3R9ICRzbmlmZmVyICRzbmlmZmVyIHNlcnZpY2VcbiAqL1xuZnVuY3Rpb24gQnJvd3Nlcih3aW5kb3csIGRvY3VtZW50LCAkbG9nLCAkc25pZmZlcikge1xuICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbixcbiAgICAgIGhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeSxcbiAgICAgIHNldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCxcbiAgICAgIGNsZWFyVGltZW91dCA9IHdpbmRvdy5jbGVhclRpbWVvdXQsXG4gICAgICBwZW5kaW5nRGVmZXJJZHMgPSB7fTtcblxuICBzZWxmLmlzTW9jayA9IGZhbHNlO1xuXG4gIHZhciBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9IDA7XG4gIHZhciBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MgPSBbXTtcblxuICAvLyBUT0RPKHZvanRhKTogcmVtb3ZlIHRoaXMgdGVtcG9yYXJ5IGFwaVxuICBzZWxmLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QgPSBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdDtcbiAgc2VsZi4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50ID0gZnVuY3Rpb24oKSB7IG91dHN0YW5kaW5nUmVxdWVzdENvdW50Kys7IH07XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIHRoZSBgZm5gIGZ1bmN0aW9uKHN1cHBvcnRzIGN1cnJ5aW5nKSBhbmQgZGVjcmVtZW50cyB0aGUgYG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrc2BcbiAgICogY291bnRlci4gSWYgdGhlIGNvdW50ZXIgcmVhY2hlcyAwLCBhbGwgdGhlIGBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3NgIGFyZSBleGVjdXRlZC5cbiAgICovXG4gIGZ1bmN0aW9uIGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgIGZuLmFwcGx5KG51bGwsIHNsaWNlQXJncyhhcmd1bWVudHMsIDEpKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQtLTtcbiAgICAgIGlmIChvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9PT0gMCkge1xuICAgICAgICB3aGlsZSAob3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MucG9wKCkoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkbG9nLmVycm9yKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEhhc2godXJsKSB7XG4gICAgdmFyIGluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgICByZXR1cm4gaW5kZXggPT09IC0xID8gJycgOiB1cmwuc3Vic3RyKGluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBUT0RPKHZvanRhKTogcHJlZml4IHRoaXMgbWV0aG9kIHdpdGggJCQgP1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiBubyBvdXRzdGFuZGluZyByZXF1ZXN0XG4gICAqL1xuICBzZWxmLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmIChvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9PT0gMCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbiAgfTtcblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBVUkwgQVBJXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgdmFyIGNhY2hlZFN0YXRlLCBsYXN0SGlzdG9yeVN0YXRlLFxuICAgICAgbGFzdEJyb3dzZXJVcmwgPSBsb2NhdGlvbi5ocmVmLFxuICAgICAgYmFzZUVsZW1lbnQgPSBkb2N1bWVudC5maW5kKCdiYXNlJyksXG4gICAgICBwZW5kaW5nTG9jYXRpb24gPSBudWxsLFxuICAgICAgZ2V0Q3VycmVudFN0YXRlID0gISRzbmlmZmVyLmhpc3RvcnkgPyBub29wIDogZnVuY3Rpb24gZ2V0Q3VycmVudFN0YXRlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBoaXN0b3J5LnN0YXRlO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gTVNJRSBjYW4gcmVwb3J0ZWRseSB0aHJvdyB3aGVuIHRoZXJlIGlzIG5vIHN0YXRlIChVTkNPTkZJUk1FRCkuXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgY2FjaGVTdGF0ZSgpO1xuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciN1cmxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdFVFRFUjpcbiAgICogV2l0aG91dCBhbnkgYXJndW1lbnQsIHRoaXMgbWV0aG9kIGp1c3QgcmV0dXJucyBjdXJyZW50IHZhbHVlIG9mIGxvY2F0aW9uLmhyZWYuXG4gICAqXG4gICAqIFNFVFRFUjpcbiAgICogV2l0aCBhdCBsZWFzdCBvbmUgYXJndW1lbnQsIHRoaXMgbWV0aG9kIHNldHMgdXJsIHRvIG5ldyB2YWx1ZS5cbiAgICogSWYgaHRtbDUgaGlzdG9yeSBhcGkgc3VwcG9ydGVkLCBwdXNoU3RhdGUvcmVwbGFjZVN0YXRlIGlzIHVzZWQsIG90aGVyd2lzZVxuICAgKiBsb2NhdGlvbi5ocmVmL2xvY2F0aW9uLnJlcGxhY2UgaXMgdXNlZC5cbiAgICogUmV0dXJucyBpdHMgb3duIGluc3RhbmNlIHRvIGFsbG93IGNoYWluaW5nXG4gICAqXG4gICAqIE5PVEU6IHRoaXMgYXBpIGlzIGludGVuZGVkIGZvciB1c2Ugb25seSBieSB0aGUgJGxvY2F0aW9uIHNlcnZpY2UuIFBsZWFzZSB1c2UgdGhlXG4gICAqIHtAbGluayBuZy4kbG9jYXRpb24gJGxvY2F0aW9uIHNlcnZpY2V9IHRvIGNoYW5nZSB1cmwuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgTmV3IHVybCAod2hlbiB1c2VkIGFzIHNldHRlcilcbiAgICogQHBhcmFtIHtib29sZWFuPX0gcmVwbGFjZSBTaG91bGQgbmV3IHVybCByZXBsYWNlIGN1cnJlbnQgaGlzdG9yeSByZWNvcmQ/XG4gICAqIEBwYXJhbSB7b2JqZWN0PX0gc3RhdGUgb2JqZWN0IHRvIHVzZSB3aXRoIHB1c2hTdGF0ZS9yZXBsYWNlU3RhdGVcbiAgICovXG4gIHNlbGYudXJsID0gZnVuY3Rpb24odXJsLCByZXBsYWNlLCBzdGF0ZSkge1xuICAgIC8vIEluIG1vZGVybiBicm93c2VycyBgaGlzdG9yeS5zdGF0ZWAgaXMgYG51bGxgIGJ5IGRlZmF1bHQ7IHRyZWF0aW5nIGl0IHNlcGFyYXRlbHlcbiAgICAvLyBmcm9tIGB1bmRlZmluZWRgIHdvdWxkIGNhdXNlIGAkYnJvd3Nlci51cmwoJy9mb28nKWAgdG8gY2hhbmdlIGBoaXN0b3J5LnN0YXRlYFxuICAgIC8vIHRvIHVuZGVmaW5lZCB2aWEgYHB1c2hTdGF0ZWAuIEluc3RlYWQsIGxldCdzIGNoYW5nZSBgdW5kZWZpbmVkYCB0byBgbnVsbGAgaGVyZS5cbiAgICBpZiAoaXNVbmRlZmluZWQoc3RhdGUpKSB7XG4gICAgICBzdGF0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gQW5kcm9pZCBCcm93c2VyIEJGQ2FjaGUgY2F1c2VzIGxvY2F0aW9uLCBoaXN0b3J5IHJlZmVyZW5jZSB0byBiZWNvbWUgc3RhbGUuXG4gICAgaWYgKGxvY2F0aW9uICE9PSB3aW5kb3cubG9jYXRpb24pIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgIGlmIChoaXN0b3J5ICE9PSB3aW5kb3cuaGlzdG9yeSkgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuXG4gICAgLy8gc2V0dGVyXG4gICAgaWYgKHVybCkge1xuICAgICAgdmFyIHNhbWVTdGF0ZSA9IGxhc3RIaXN0b3J5U3RhdGUgPT09IHN0YXRlO1xuXG4gICAgICAvLyBEb24ndCBjaGFuZ2UgYW55dGhpbmcgaWYgcHJldmlvdXMgYW5kIGN1cnJlbnQgVVJMcyBhbmQgc3RhdGVzIG1hdGNoLiBUaGlzIGFsc28gcHJldmVudHNcbiAgICAgIC8vIElFPDEwIGZyb20gZ2V0dGluZyBpbnRvIHJlZGlyZWN0IGxvb3Agd2hlbiBpbiBMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCBtb2RlLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvY29tbWl0L2ZmYjI3MDFcbiAgICAgIGlmIChsYXN0QnJvd3NlclVybCA9PT0gdXJsICYmICghJHNuaWZmZXIuaGlzdG9yeSB8fCBzYW1lU3RhdGUpKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuICAgICAgdmFyIHNhbWVCYXNlID0gbGFzdEJyb3dzZXJVcmwgJiYgc3RyaXBIYXNoKGxhc3RCcm93c2VyVXJsKSA9PT0gc3RyaXBIYXNoKHVybCk7XG4gICAgICBsYXN0QnJvd3NlclVybCA9IHVybDtcbiAgICAgIGxhc3RIaXN0b3J5U3RhdGUgPSBzdGF0ZTtcbiAgICAgIC8vIERvbid0IHVzZSBoaXN0b3J5IEFQSSBpZiBvbmx5IHRoZSBoYXNoIGNoYW5nZWRcbiAgICAgIC8vIGR1ZSB0byBhIGJ1ZyBpbiBJRTEwL0lFMTEgd2hpY2ggbGVhZHNcbiAgICAgIC8vIHRvIG5vdCBmaXJpbmcgYSBgaGFzaGNoYW5nZWAgbm9yIGBwb3BzdGF0ZWAgZXZlbnRcbiAgICAgIC8vIGluIHNvbWUgY2FzZXMgKHNlZSAjOTE0MykuXG4gICAgICBpZiAoJHNuaWZmZXIuaGlzdG9yeSAmJiAoIXNhbWVCYXNlIHx8ICFzYW1lU3RhdGUpKSB7XG4gICAgICAgIGhpc3RvcnlbcmVwbGFjZSA/ICdyZXBsYWNlU3RhdGUnIDogJ3B1c2hTdGF0ZSddKHN0YXRlLCAnJywgdXJsKTtcbiAgICAgICAgY2FjaGVTdGF0ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFzYW1lQmFzZSkge1xuICAgICAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IHVybDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UodXJsKTtcbiAgICAgICAgfSBlbHNlIGlmICghc2FtZUJhc2UpIHtcbiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBnZXRIYXNoKHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvY2F0aW9uLmhyZWYgIT09IHVybCkge1xuICAgICAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IHVybDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBlbmRpbmdMb2NhdGlvbikge1xuICAgICAgICBwZW5kaW5nTG9jYXRpb24gPSB1cmw7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICAvLyBnZXR0ZXJcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gLSBwZW5kaW5nTG9jYXRpb24gaXMgbmVlZGVkIGFzIGJyb3dzZXJzIGRvbid0IGFsbG93IHRvIHJlYWQgb3V0XG4gICAgICAvLyAgIHRoZSBuZXcgbG9jYXRpb24uaHJlZiBpZiBhIHJlbG9hZCBoYXBwZW5lZCBvciBpZiB0aGVyZSBpcyBhIGJ1ZyBsaWtlIGluIGlPUyA5IChzZWVcbiAgICAgIC8vICAgaHR0cHM6Ly9vcGVucmFkYXIuYXBwc3BvdC5jb20vMjIxODYxMDkpLlxuICAgICAgLy8gLSB0aGUgcmVwbGFjZW1lbnQgaXMgYSB3b3JrYXJvdW5kIGZvciBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00MDcxNzJcbiAgICAgIHJldHVybiBwZW5kaW5nTG9jYXRpb24gfHwgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8lMjcvZywnXFwnJyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNzdGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgYSBnZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBoaXN0b3J5LnN0YXRlIG9yIG51bGwgaWYgaGlzdG9yeS5zdGF0ZSBpcyB1bmRlZmluZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IHN0YXRlXG4gICAqL1xuICBzZWxmLnN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGNhY2hlZFN0YXRlO1xuICB9O1xuXG4gIHZhciB1cmxDaGFuZ2VMaXN0ZW5lcnMgPSBbXSxcbiAgICAgIHVybENoYW5nZUluaXQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSgpIHtcbiAgICBwZW5kaW5nTG9jYXRpb24gPSBudWxsO1xuICAgIGZpcmVTdGF0ZU9yVXJsQ2hhbmdlKCk7XG4gIH1cblxuICAvLyBUaGlzIHZhcmlhYmxlIHNob3VsZCBiZSB1c2VkICpvbmx5KiBpbnNpZGUgdGhlIGNhY2hlU3RhdGUgZnVuY3Rpb24uXG4gIHZhciBsYXN0Q2FjaGVkU3RhdGUgPSBudWxsO1xuICBmdW5jdGlvbiBjYWNoZVN0YXRlKCkge1xuICAgIC8vIFRoaXMgc2hvdWxkIGJlIHRoZSBvbmx5IHBsYWNlIGluICRicm93c2VyIHdoZXJlIGBoaXN0b3J5LnN0YXRlYCBpcyByZWFkLlxuICAgIGNhY2hlZFN0YXRlID0gZ2V0Q3VycmVudFN0YXRlKCk7XG4gICAgY2FjaGVkU3RhdGUgPSBpc1VuZGVmaW5lZChjYWNoZWRTdGF0ZSkgPyBudWxsIDogY2FjaGVkU3RhdGU7XG5cbiAgICAvLyBQcmV2ZW50IGNhbGxiYWNrcyBmbyBmaXJlIHR3aWNlIGlmIGJvdGggaGFzaGNoYW5nZSAmIHBvcHN0YXRlIHdlcmUgZmlyZWQuXG4gICAgaWYgKGVxdWFscyhjYWNoZWRTdGF0ZSwgbGFzdENhY2hlZFN0YXRlKSkge1xuICAgICAgY2FjaGVkU3RhdGUgPSBsYXN0Q2FjaGVkU3RhdGU7XG4gICAgfVxuXG4gICAgbGFzdENhY2hlZFN0YXRlID0gY2FjaGVkU3RhdGU7XG4gICAgbGFzdEhpc3RvcnlTdGF0ZSA9IGNhY2hlZFN0YXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlyZVN0YXRlT3JVcmxDaGFuZ2UoKSB7XG4gICAgdmFyIHByZXZMYXN0SGlzdG9yeVN0YXRlID0gbGFzdEhpc3RvcnlTdGF0ZTtcbiAgICBjYWNoZVN0YXRlKCk7XG5cbiAgICBpZiAobGFzdEJyb3dzZXJVcmwgPT09IHNlbGYudXJsKCkgJiYgcHJldkxhc3RIaXN0b3J5U3RhdGUgPT09IGNhY2hlZFN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGFzdEJyb3dzZXJVcmwgPSBzZWxmLnVybCgpO1xuICAgIGxhc3RIaXN0b3J5U3RhdGUgPSBjYWNoZWRTdGF0ZTtcbiAgICBmb3JFYWNoKHVybENoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgIGxpc3RlbmVyKHNlbGYudXJsKCksIGNhY2hlZFN0YXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNvblVybENoYW5nZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXIgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCwgd2hlbiB1cmwgY2hhbmdlcy5cbiAgICpcbiAgICogSXQncyBvbmx5IGNhbGxlZCB3aGVuIHRoZSB1cmwgaXMgY2hhbmdlZCBmcm9tIG91dHNpZGUgb2YgQW5ndWxhckpTOlxuICAgKiAtIHVzZXIgdHlwZXMgZGlmZmVyZW50IHVybCBpbnRvIGFkZHJlc3MgYmFyXG4gICAqIC0gdXNlciBjbGlja3Mgb24gaGlzdG9yeSAoZm9yd2FyZC9iYWNrKSBidXR0b25cbiAgICogLSB1c2VyIGNsaWNrcyBvbiBhIGxpbmtcbiAgICpcbiAgICogSXQncyBub3QgY2FsbGVkIHdoZW4gdXJsIGlzIGNoYW5nZWQgYnkgJGJyb3dzZXIudXJsKCkgbWV0aG9kXG4gICAqXG4gICAqIFRoZSBsaXN0ZW5lciBnZXRzIGNhbGxlZCB3aXRoIG5ldyB1cmwgYXMgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBOT1RFOiB0aGlzIGFwaSBpcyBpbnRlbmRlZCBmb3IgdXNlIG9ubHkgYnkgdGhlICRsb2NhdGlvbiBzZXJ2aWNlLiBQbGVhc2UgdXNlIHRoZVxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbiBzZXJ2aWNlfSB0byBtb25pdG9yIHVybCBjaGFuZ2VzIGluIEFuZ3VsYXJKUyBhcHBzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHVybCBjaGFuZ2VzLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihzdHJpbmcpfSBSZXR1cm5zIHRoZSByZWdpc3RlcmVkIGxpc3RlbmVyIGZuIC0gaGFuZHkgaWYgdGhlIGZuIGlzIGFub255bW91cy5cbiAgICovXG4gIHNlbGYub25VcmxDaGFuZ2UgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIC8vIFRPRE8odm9qdGEpOiByZWZhY3RvciB0byB1c2Ugbm9kZSdzIHN5bnRheCBmb3IgZXZlbnRzXG4gICAgaWYgKCF1cmxDaGFuZ2VJbml0KSB7XG4gICAgICAvLyBXZSBsaXN0ZW4gb24gYm90aCAoaGFzaGNoYW5nZS9wb3BzdGF0ZSkgd2hlbiBhdmFpbGFibGUsIGFzIHNvbWUgYnJvd3NlcnMgZG9uJ3RcbiAgICAgIC8vIGZpcmUgcG9wc3RhdGUgd2hlbiB1c2VyIGNoYW5nZXMgdGhlIGFkZHJlc3MgYmFyIGFuZCBkb24ndCBmaXJlIGhhc2hjaGFuZ2Ugd2hlbiB1cmxcbiAgICAgIC8vIGNoYW5nZWQgYnkgcHVzaC9yZXBsYWNlU3RhdGVcblxuICAgICAgLy8gaHRtbDUgaGlzdG9yeSBhcGkgLSBwb3BzdGF0ZSBldmVudFxuICAgICAgaWYgKCRzbmlmZmVyLmhpc3RvcnkpIGpxTGl0ZSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGNhY2hlU3RhdGVBbmRGaXJlVXJsQ2hhbmdlKTtcbiAgICAgIC8vIGhhc2hjaGFuZ2UgZXZlbnRcbiAgICAgIGpxTGl0ZSh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UpO1xuXG4gICAgICB1cmxDaGFuZ2VJbml0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB1cmxDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIGNhbGxiYWNrO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBSZW1vdmUgcG9wc3RhdGUgYW5kIGhhc2hjaGFuZ2UgaGFuZGxlciBmcm9tIHdpbmRvdy5cbiAgICpcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5ICRyb290U2NvcGUuXG4gICAqL1xuICBzZWxmLiQkYXBwbGljYXRpb25EZXN0cm95ZWQgPSBmdW5jdGlvbigpIHtcbiAgICBqcUxpdGUod2luZG93KS5vZmYoJ2hhc2hjaGFuZ2UgcG9wc3RhdGUnLCBjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSB1cmwgaGFzIGNoYW5nZWQgb3V0c2lkZSBvZiBBbmd1bGFySlMuXG4gICAqIE5lZWRzIHRvIGJlIGV4cG9ydGVkIHRvIGJlIGFibGUgdG8gY2hlY2sgZm9yIGNoYW5nZXMgdGhhdCBoYXZlIGJlZW4gZG9uZSBpbiBzeW5jLFxuICAgKiBhcyBoYXNoY2hhbmdlL3BvcHN0YXRlIGV2ZW50cyBmaXJlIGluIGFzeW5jLlxuICAgKi9cbiAgc2VsZi4kJGNoZWNrVXJsQ2hhbmdlID0gZmlyZVN0YXRlT3JVcmxDaGFuZ2U7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gTWlzYyBBUElcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjYmFzZUhyZWZcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHVybnMgY3VycmVudCA8YmFzZSBocmVmPlxuICAgKiAoYWx3YXlzIHJlbGF0aXZlIC0gd2l0aG91dCBkb21haW4pXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjdXJyZW50IGJhc2UgaHJlZlxuICAgKi9cbiAgc2VsZi5iYXNlSHJlZiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBocmVmID0gYmFzZUVsZW1lbnQuYXR0cignaHJlZicpO1xuICAgIHJldHVybiBocmVmID8gaHJlZi5yZXBsYWNlKC9eKGh0dHBzPzopP1xcL1xcL1teL10qLywgJycpIDogJyc7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiwgd2hvJ3MgZXhlY3V0aW9uIHNob3VsZCBiZSBkZWZlcnJlZC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBbZGVsYXk9MF0gb2YgbWlsbGlzZWNvbmRzIHRvIGRlZmVyIHRoZSBmdW5jdGlvbiBleGVjdXRpb24uXG4gICAqIEByZXR1cm5zIHsqfSBEZWZlcklkIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSB0YXNrIHZpYSBgJGJyb3dzZXIuZGVmZXIuY2FuY2VsKClgLlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRXhlY3V0ZXMgYSBmbiBhc3luY2hyb25vdXNseSB2aWEgYHNldFRpbWVvdXQoZm4sIGRlbGF5KWAuXG4gICAqXG4gICAqIFVubGlrZSB3aGVuIGNhbGxpbmcgYHNldFRpbWVvdXRgIGRpcmVjdGx5LCBpbiB0ZXN0IHRoaXMgZnVuY3Rpb24gaXMgbW9ja2VkIGFuZCBpbnN0ZWFkIG9mIHVzaW5nXG4gICAqIGBzZXRUaW1lb3V0YCBpbiB0ZXN0cywgdGhlIGZucyBhcmUgcXVldWVkIGluIGFuIGFycmF5LCB3aGljaCBjYW4gYmUgcHJvZ3JhbW1hdGljYWxseSBmbHVzaGVkXG4gICAqIHZpYSBgJGJyb3dzZXIuZGVmZXIuZmx1c2goKWAuXG4gICAqXG4gICAqL1xuICBzZWxmLmRlZmVyID0gZnVuY3Rpb24oZm4sIGRlbGF5KSB7XG4gICAgdmFyIHRpbWVvdXRJZDtcbiAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCsrO1xuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBkZWxldGUgcGVuZGluZ0RlZmVySWRzW3RpbWVvdXRJZF07XG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbik7XG4gICAgfSwgZGVsYXkgfHwgMCk7XG4gICAgcGVuZGluZ0RlZmVySWRzW3RpbWVvdXRJZF0gPSB0cnVlO1xuICAgIHJldHVybiB0aW1lb3V0SWQ7XG4gIH07XG5cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjZGVmZXIuY2FuY2VsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYW5jZWxzIGEgZGVmZXJyZWQgdGFzayBpZGVudGlmaWVkIHdpdGggYGRlZmVySWRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRlZmVySWQgVG9rZW4gcmV0dXJuZWQgYnkgdGhlIGAkYnJvd3Nlci5kZWZlcmAgZnVuY3Rpb24uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdGFzayBoYXNuJ3QgZXhlY3V0ZWQgeWV0IGFuZCB3YXMgc3VjY2Vzc2Z1bGx5XG4gICAqICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZC5cbiAgICovXG4gIHNlbGYuZGVmZXIuY2FuY2VsID0gZnVuY3Rpb24oZGVmZXJJZCkge1xuICAgIGlmIChwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF0pIHtcbiAgICAgIGRlbGV0ZSBwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF07XG4gICAgICBjbGVhclRpbWVvdXQoZGVmZXJJZCk7XG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkQnJvd3NlclByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGxvZycsICckc25pZmZlcicsICckZG9jdW1lbnQnLFxuICAgICAgZnVuY3Rpb24oJHdpbmRvdywgJGxvZywgJHNuaWZmZXIsICRkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IEJyb3dzZXIoJHdpbmRvdywgJGRvY3VtZW50LCAkbG9nLCAkc25pZmZlcik7XG4gICAgICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGNhY2hlRmFjdG9yeVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZhY3RvcnkgdGhhdCBjb25zdHJ1Y3RzIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3RzIGFuZCBnaXZlcyBhY2Nlc3MgdG9cbiAqIHRoZW0uXG4gKlxuICogYGBganNcbiAqXG4gKiAgdmFyIGNhY2hlID0gJGNhY2hlRmFjdG9yeSgnY2FjaGVJZCcpO1xuICogIGV4cGVjdCgkY2FjaGVGYWN0b3J5LmdldCgnY2FjaGVJZCcpKS50b0JlKGNhY2hlKTtcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ25vU3VjaENhY2hlSWQnKSkubm90LnRvQmVEZWZpbmVkKCk7XG4gKlxuICogIGNhY2hlLnB1dChcImtleVwiLCBcInZhbHVlXCIpO1xuICogIGNhY2hlLnB1dChcImFub3RoZXIga2V5XCIsIFwiYW5vdGhlciB2YWx1ZVwiKTtcbiAqXG4gKiAgLy8gV2UndmUgc3BlY2lmaWVkIG5vIG9wdGlvbnMgb24gY3JlYXRpb25cbiAqICBleHBlY3QoY2FjaGUuaW5mbygpKS50b0VxdWFsKHtpZDogJ2NhY2hlSWQnLCBzaXplOiAyfSk7XG4gKlxuICogYGBgXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUlkIE5hbWUgb3IgaWQgb2YgdGhlIG5ld2x5IGNyZWF0ZWQgY2FjaGUuXG4gKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgT3B0aW9ucyBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGNhY2hlIGJlaGF2aW9yLiBQcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBge251bWJlcj19YCBgY2FwYWNpdHlgIOKAlCB0dXJucyB0aGUgY2FjaGUgaW50byBMUlUgY2FjaGUuXG4gKlxuICogQHJldHVybnMge29iamVjdH0gTmV3bHkgY3JlYXRlZCBjYWNoZSBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHNldCBvZiBtZXRob2RzOlxuICpcbiAqIC0gYHtvYmplY3R9YCBgaW5mbygpYCDigJQgUmV0dXJucyBpZCwgc2l6ZSwgYW5kIG9wdGlvbnMgb2YgY2FjaGUuXG4gKiAtIGB7eyp9fWAgYHB1dCh7c3RyaW5nfSBrZXksIHsqfSB2YWx1ZSlgIOKAlCBQdXRzIGEgbmV3IGtleS12YWx1ZSBwYWlyIGludG8gdGhlIGNhY2hlIGFuZCByZXR1cm5zXG4gKiAgIGl0LlxuICogLSBge3sqfX1gIGBnZXQoe3N0cmluZ30ga2V5KWAg4oCUIFJldHVybnMgY2FjaGVkIHZhbHVlIGZvciBga2V5YCBvciB1bmRlZmluZWQgZm9yIGNhY2hlIG1pc3MuXG4gKiAtIGB7dm9pZH1gIGByZW1vdmUoe3N0cmluZ30ga2V5KWAg4oCUIFJlbW92ZXMgYSBrZXktdmFsdWUgcGFpciBmcm9tIHRoZSBjYWNoZS5cbiAqIC0gYHt2b2lkfWAgYHJlbW92ZUFsbCgpYCDigJQgUmVtb3ZlcyBhbGwgY2FjaGVkIHZhbHVlcy5cbiAqIC0gYHt2b2lkfWAgYGRlc3Ryb3koKWAg4oCUIFJlbW92ZXMgcmVmZXJlbmNlcyB0byB0aGlzIGNhY2hlIGZyb20gJGNhY2hlRmFjdG9yeS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiY2FjaGVFeGFtcGxlQXBwXCIgbmFtZT1cImNhY2hlLWZhY3RvcnlcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJDYWNoZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlS2V5XCIgcGxhY2Vob2xkZXI9XCJLZXlcIj5cbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlVmFsdWVcIiBwbGFjZWhvbGRlcj1cIlZhbHVlXCI+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicHV0KG5ld0NhY2hlS2V5LCBuZXdDYWNoZVZhbHVlKVwiPkNhY2hlPC9idXR0b24+XG5cbiAgICAgICAgIDxwIG5nLWlmPVwia2V5cy5sZW5ndGhcIj5DYWNoZWQgVmFsdWVzPC9wPlxuICAgICAgICAgPGRpdiBuZy1yZXBlYXQ9XCJrZXkgaW4ga2V5c1wiPlxuICAgICAgICAgICA8c3BhbiBuZy1iaW5kPVwia2V5XCI+PC9zcGFuPlxuICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cbiAgICAgICAgICAgPGIgbmctYmluZD1cImNhY2hlLmdldChrZXkpXCI+PC9iPlxuICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgIDxwPkNhY2hlIEluZm88L3A+XG4gICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cIihrZXksIHZhbHVlKSBpbiBjYWNoZS5pbmZvKClcIj5cbiAgICAgICAgICAgPHNwYW4gbmctYmluZD1cImtleVwiPjwvc3Bhbj5cbiAgICAgICAgICAgPHNwYW4+OiA8L3NwYW4+XG4gICAgICAgICAgIDxiIG5nLWJpbmQ9XCJ2YWx1ZVwiPjwvYj5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY2FjaGVFeGFtcGxlQXBwJywgW10pLlxuICAgICAgICAgY29udHJvbGxlcignQ2FjaGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRzY29wZSwgJGNhY2hlRmFjdG9yeSkge1xuICAgICAgICAgICAkc2NvcGUua2V5cyA9IFtdO1xuICAgICAgICAgICAkc2NvcGUuY2FjaGUgPSAkY2FjaGVGYWN0b3J5KCdjYWNoZUlkJyk7XG4gICAgICAgICAgICRzY29wZS5wdXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLmNhY2hlLmdldChrZXkpKSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAkc2NvcGUuY2FjaGUucHV0KGtleSwgYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkgPyBudWxsIDogdmFsdWUpO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICBwIHtcbiAgICAgICAgIG1hcmdpbjogMTBweCAwIDNweDtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gJENhY2hlRmFjdG9yeVByb3ZpZGVyKCkge1xuXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYWNoZXMgPSB7fTtcblxuICAgIGZ1bmN0aW9uIGNhY2hlRmFjdG9yeShjYWNoZUlkLCBvcHRpb25zKSB7XG4gICAgICBpZiAoY2FjaGVJZCBpbiBjYWNoZXMpIHtcbiAgICAgICAgdGhyb3cgbWluRXJyKCckY2FjaGVGYWN0b3J5JykoJ2lpZCcsICdDYWNoZUlkIFxcJ3swfVxcJyBpcyBhbHJlYWR5IHRha2VuIScsIGNhY2hlSWQpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2l6ZSA9IDAsXG4gICAgICAgICAgc3RhdHMgPSBleHRlbmQoe30sIG9wdGlvbnMsIHtpZDogY2FjaGVJZH0pLFxuICAgICAgICAgIGRhdGEgPSBjcmVhdGVNYXAoKSxcbiAgICAgICAgICBjYXBhY2l0eSA9IChvcHRpb25zICYmIG9wdGlvbnMuY2FwYWNpdHkpIHx8IE51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgICAgbHJ1SGFzaCA9IGNyZWF0ZU1hcCgpLFxuICAgICAgICAgIGZyZXNoRW5kID0gbnVsbCxcbiAgICAgICAgICBzdGFsZUVuZCA9IG51bGw7XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHR5cGVcbiAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGVcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEEgY2FjaGUgb2JqZWN0IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIGRhdGEsIHByaW1hcmlseSB1c2VkIGJ5XG4gICAgICAgKiB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdCAkdGVtcGxhdGVSZXF1ZXN0fSBhbmQgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6c2NyaXB0IHNjcmlwdH1cbiAgICAgICAqIGRpcmVjdGl2ZSB0byBjYWNoZSB0ZW1wbGF0ZXMgYW5kIG90aGVyIGRhdGEuXG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICBhbmd1bGFyLm1vZHVsZSgnc3VwZXJDYWNoZScpXG4gICAgICAgKiAgICAuZmFjdG9yeSgnc3VwZXJDYWNoZScsIFsnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRjYWNoZUZhY3RvcnkpIHtcbiAgICAgICAqICAgICAgcmV0dXJuICRjYWNoZUZhY3RvcnkoJ3N1cGVyLWNhY2hlJyk7XG4gICAgICAgKiAgICB9XSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBFeGFtcGxlIHRlc3Q6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICBpdCgnc2hvdWxkIGJlaGF2ZSBsaWtlIGEgY2FjaGUnLCBpbmplY3QoZnVuY3Rpb24oc3VwZXJDYWNoZSkge1xuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2tleScsICd2YWx1ZScpO1xuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2Fub3RoZXIga2V5JywgJ2Fub3RoZXIgdmFsdWUnKTtcbiAgICAgICAqXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5pbmZvKCkpLnRvRXF1YWwoe1xuICAgICAgICogICAgICBpZDogJ3N1cGVyLWNhY2hlJyxcbiAgICAgICAqICAgICAgc2l6ZTogMlxuICAgICAgICogICAgfSk7XG4gICAgICAgKlxuICAgICAgICogICAgc3VwZXJDYWNoZS5yZW1vdmUoJ2Fub3RoZXIga2V5Jyk7XG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5nZXQoJ2Fub3RoZXIga2V5JykpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAqXG4gICAgICAgKiAgICBzdXBlckNhY2hlLnJlbW92ZUFsbCgpO1xuICAgICAgICogICAgZXhwZWN0KHN1cGVyQ2FjaGUuaW5mbygpKS50b0VxdWFsKHtcbiAgICAgICAqICAgICAgaWQ6ICdzdXBlci1jYWNoZScsXG4gICAgICAgKiAgICAgIHNpemU6IDBcbiAgICAgICAqICAgIH0pO1xuICAgICAgICogIH0pKTtcbiAgICAgICAqIGBgYFxuICAgICAgICovXG4gICAgICByZXR1cm4gKGNhY2hlc1tjYWNoZUlkXSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3B1dFxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogSW5zZXJ0cyBhIG5hbWVkIGVudHJ5IGludG8gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QgdG8gYmVcbiAgICAgICAgICogcmV0cmlldmVkIGxhdGVyLCBhbmQgaW5jcmVtZW50aW5nIHRoZSBzaXplIG9mIHRoZSBjYWNoZSBpZiB0aGUga2V5IHdhcyBub3QgYWxyZWFkeVxuICAgICAgICAgKiBwcmVzZW50IGluIHRoZSBjYWNoZS4gSWYgYmVoYXZpbmcgbGlrZSBhbiBMUlUgY2FjaGUsIGl0IHdpbGwgYWxzbyByZW1vdmUgc3RhbGVcbiAgICAgICAgICogZW50cmllcyBmcm9tIHRoZSBzZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEl0IHdpbGwgbm90IGluc2VydCB1bmRlZmluZWQgdmFsdWVzIGludG8gdGhlIGNhY2hlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgdW5kZXIgd2hpY2ggdGhlIGNhY2hlZCBkYXRhIGlzIHN0b3JlZC5cbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSB0aGUgdmFsdWUgdG8gc3RvcmUgYWxvbmdzaWRlIHRoZSBrZXkuIElmIGl0IGlzIHVuZGVmaW5lZCwgdGhlIGtleVxuICAgICAgICAgKiAgICB3aWxsIG5vdCBiZSBzdG9yZWQuXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgc3RvcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgcHV0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xuICAgICAgICAgIGlmIChjYXBhY2l0eSA8IE51bWJlci5NQVhfVkFMVUUpIHtcbiAgICAgICAgICAgIHZhciBscnVFbnRyeSA9IGxydUhhc2hba2V5XSB8fCAobHJ1SGFzaFtrZXldID0ge2tleToga2V5fSk7XG5cbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghKGtleSBpbiBkYXRhKSkgc2l6ZSsrO1xuICAgICAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuXG4gICAgICAgICAgaWYgKHNpemUgPiBjYXBhY2l0eSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3RhbGVFbmQua2V5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNnZXRcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJldHJpZXZlcyBuYW1lZCBkYXRhIHN0b3JlZCBpbiB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IG9mIHRoZSBkYXRhIHRvIGJlIHJldHJpZXZlZFxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHN0b3JlZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldO1xuXG4gICAgICAgICAgICBpZiAoIWxydUVudHJ5KSByZXR1cm47XG5cbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XG4gICAgICAgIH0sXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3JlbW92ZVxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogUmVtb3ZlcyBhbiBlbnRyeSBmcm9tIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGJlIHJlbW92ZWRcbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldO1xuXG4gICAgICAgICAgICBpZiAoIWxydUVudHJ5KSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmIChscnVFbnRyeSA9PT0gZnJlc2hFbmQpIGZyZXNoRW5kID0gbHJ1RW50cnkucDtcbiAgICAgICAgICAgIGlmIChscnVFbnRyeSA9PT0gc3RhbGVFbmQpIHN0YWxlRW5kID0gbHJ1RW50cnkubjtcbiAgICAgICAgICAgIGxpbmsobHJ1RW50cnkubixscnVFbnRyeS5wKTtcblxuICAgICAgICAgICAgZGVsZXRlIGxydUhhc2hba2V5XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIShrZXkgaW4gZGF0YSkpIHJldHVybjtcblxuICAgICAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgICAgICAgc2l6ZS0tO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNyZW1vdmVBbGxcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIENsZWFycyB0aGUgY2FjaGUgb2JqZWN0IG9mIGFueSBlbnRyaWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgcmVtb3ZlQWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBkYXRhID0gY3JlYXRlTWFwKCk7XG4gICAgICAgICAgc2l6ZSA9IDA7XG4gICAgICAgICAgbHJ1SGFzaCA9IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgIGZyZXNoRW5kID0gc3RhbGVFbmQgPSBudWxsO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNkZXN0cm95XG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBEZXN0cm95cyB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdCBlbnRpcmVseSxcbiAgICAgICAgICogcmVtb3ZpbmcgaXQgZnJvbSB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkgJGNhY2hlRmFjdG9yeX0gc2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgc3RhdHMgPSBudWxsO1xuICAgICAgICAgIGxydUhhc2ggPSBudWxsO1xuICAgICAgICAgIGRlbGV0ZSBjYWNoZXNbY2FjaGVJZF07XG4gICAgICAgIH0sXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI2luZm9cbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJldHJpZXZlIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBhIHBhcnRpY3VsYXIge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgICAqICAgPHVsPlxuICAgICAgICAgKiAgICAgPGxpPioqaWQqKjogdGhlIGlkIG9mIHRoZSBjYWNoZSBpbnN0YW5jZTwvbGk+XG4gICAgICAgICAqICAgICA8bGk+KipzaXplKio6IHRoZSBudW1iZXIgb2YgZW50cmllcyBrZXB0IGluIHRoZSBjYWNoZSBpbnN0YW5jZTwvbGk+XG4gICAgICAgICAqICAgICA8bGk+KiouLi4qKjogYW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCB3aGVuIGNyZWF0aW5nIHRoZVxuICAgICAgICAgKiAgICAgICBjYWNoZS48L2xpPlxuICAgICAgICAgKiAgIDwvdWw+XG4gICAgICAgICAqL1xuICAgICAgICBpbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBzdGF0cywge3NpemU6IHNpemV9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBtYWtlcyB0aGUgYGVudHJ5YCB0aGUgZnJlc2hFbmQgb2YgdGhlIExSVSBsaW5rZWQgbGlzdFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZWZyZXNoKGVudHJ5KSB7XG4gICAgICAgIGlmIChlbnRyeSAhPT0gZnJlc2hFbmQpIHtcbiAgICAgICAgICBpZiAoIXN0YWxlRW5kKSB7XG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5O1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhbGVFbmQgPT09IGVudHJ5KSB7XG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5Lm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGluayhlbnRyeS5uLCBlbnRyeS5wKTtcbiAgICAgICAgICBsaW5rKGVudHJ5LCBmcmVzaEVuZCk7XG4gICAgICAgICAgZnJlc2hFbmQgPSBlbnRyeTtcbiAgICAgICAgICBmcmVzaEVuZC5uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogYmlkaXJlY3Rpb25hbGx5IGxpbmtzIHR3byBlbnRyaWVzIG9mIHRoZSBMUlUgbGlua2VkIGxpc3RcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gbGluayhuZXh0RW50cnksIHByZXZFbnRyeSkge1xuICAgICAgICBpZiAobmV4dEVudHJ5ICE9PSBwcmV2RW50cnkpIHtcbiAgICAgICAgICBpZiAobmV4dEVudHJ5KSBuZXh0RW50cnkucCA9IHByZXZFbnRyeTsgLy9wIHN0YW5kcyBmb3IgcHJldmlvdXMsICdwcmV2JyBkaWRuJ3QgbWluaWZ5XG4gICAgICAgICAgaWYgKHByZXZFbnRyeSkgcHJldkVudHJ5Lm4gPSBuZXh0RW50cnk7IC8vbiBzdGFuZHMgZm9yIG5leHQsICduZXh0JyBkaWRuJ3QgbWluaWZ5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5I2luZm9cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdldCBpbmZvcm1hdGlvbiBhYm91dCBhbGwgdGhlIGNhY2hlcyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IC0ga2V5LXZhbHVlIG1hcCBvZiBgY2FjaGVJZGAgdG8gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGBjYWNoZSNpbmZvYFxuICAgKi9cbiAgICBjYWNoZUZhY3RvcnkuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGluZm8gPSB7fTtcbiAgICAgIGZvckVhY2goY2FjaGVzLCBmdW5jdGlvbihjYWNoZSwgY2FjaGVJZCkge1xuICAgICAgICBpbmZvW2NhY2hlSWRdID0gY2FjaGUuaW5mbygpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNhY2hlRmFjdG9yeSNnZXRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdldCBhY2Nlc3MgdG8gYSBjYWNoZSBvYmplY3QgYnkgdGhlIGBjYWNoZUlkYCB1c2VkIHdoZW4gaXQgd2FzIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUlkIE5hbWUgb3IgaWQgb2YgYSBjYWNoZSB0byBhY2Nlc3MuXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IENhY2hlIG9iamVjdCBpZGVudGlmaWVkIGJ5IHRoZSBjYWNoZUlkIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoIGNhY2hlLlxuICAgKi9cbiAgICBjYWNoZUZhY3RvcnkuZ2V0ID0gZnVuY3Rpb24oY2FjaGVJZCkge1xuICAgICAgcmV0dXJuIGNhY2hlc1tjYWNoZUlkXTtcbiAgICB9O1xuXG5cbiAgICByZXR1cm4gY2FjaGVGYWN0b3J5O1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkdGVtcGxhdGVDYWNoZVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIGAkdGVtcGxhdGVDYWNoZWAgaXMgYSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZSBvYmplY3R9IGNyZWF0ZWQgYnkgdGhlXG4gKiB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSAkY2FjaGVGYWN0b3J5fS5cbiAqXG4gKiBUaGUgZmlyc3QgdGltZSBhIHRlbXBsYXRlIGlzIHVzZWQsIGl0IGlzIGxvYWRlZCBpbiB0aGUgdGVtcGxhdGUgY2FjaGUgZm9yIHF1aWNrIHJldHJpZXZhbC4gWW91XG4gKiBjYW4gbG9hZCB0ZW1wbGF0ZXMgZGlyZWN0bHkgaW50byB0aGUgY2FjaGUgaW4gYSBgc2NyaXB0YCB0YWcsIGJ5IHVzaW5nIHtAbGluayAkdGVtcGxhdGVSZXF1ZXN0fSxcbiAqIG9yIGJ5IGNvbnN1bWluZyB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlIGRpcmVjdGx5LlxuICpcbiAqIEFkZGluZyB2aWEgdGhlIGBzY3JpcHRgIHRhZzpcbiAqXG4gKiBgYGBodG1sXG4gKiAgIDxzY3JpcHQgdHlwZT1cInRleHQvbmctdGVtcGxhdGVcIiBpZD1cInRlbXBsYXRlSWQuaHRtbFwiPlxuICogICAgIDxwPlRoaXMgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlPC9wPlxuICogICA8L3NjcmlwdD5cbiAqIGBgYFxuICpcbiAqICoqTm90ZToqKiB0aGUgYHNjcmlwdGAgdGFnIGNvbnRhaW5pbmcgdGhlIHRlbXBsYXRlIGRvZXMgbm90IG5lZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGBoZWFkYCBvZlxuICogdGhlIGRvY3VtZW50LCBidXQgaXQgbXVzdCBiZSBhIGRlc2NlbmRlbnQgb2YgdGhlIHtAbGluayBuZy4kcm9vdEVsZW1lbnQgJHJvb3RFbGVtZW50fSAoZS5nLlxuICogZWxlbWVudCB3aXRoIHtAbGluayBuZ0FwcH0gYXR0cmlidXRlKSwgb3RoZXJ3aXNlIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlIGlnbm9yZWQuXG4gKlxuICogQWRkaW5nIHZpYSB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgbXlBcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSk7XG4gKiBteUFwcC5ydW4oZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAqICAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0ZW1wbGF0ZUlkLmh0bWwnLCAnVGhpcyBpcyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGUnKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogVG8gcmV0cmlldmUgdGhlIHRlbXBsYXRlIGxhdGVyLCBzaW1wbHkgdXNlIGl0IGluIHlvdXIgY29tcG9uZW50OlxuICogYGBganNcbiAqIG15QXBwLmNvbXBvbmVudCgnbXlDb21wb25lbnQnLCB7XG4gKiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlSWQuaHRtbCdcbiAqIH0pO1xuICogYGBgXG4gKlxuICogb3IgZ2V0IGl0IHZpYSB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlOlxuICogYGBganNcbiAqICR0ZW1wbGF0ZUNhY2hlLmdldCgndGVtcGxhdGVJZC5odG1sJylcbiAqIGBgYFxuICpcbiAqL1xuZnVuY3Rpb24gJFRlbXBsYXRlQ2FjaGVQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckY2FjaGVGYWN0b3J5JywgZnVuY3Rpb24oJGNhY2hlRmFjdG9yeSkge1xuICAgIHJldHVybiAkY2FjaGVGYWN0b3J5KCd0ZW1wbGF0ZXMnKTtcbiAgfV07XG59XG5cbi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICpcbiAqICAgICBBbnkgY29tbWl0cyB0byB0aGlzIGZpbGUgc2hvdWxkIGJlIHJldmlld2VkIHdpdGggc2VjdXJpdHkgaW4gbWluZC4gICpcbiAqICAgQ2hhbmdlcyB0byB0aGlzIGZpbGUgY2FuIHBvdGVudGlhbGx5IGNyZWF0ZSBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMuICpcbiAqICAgICAgICAgIEFuIGFwcHJvdmFsIGZyb20gMiBDb3JlIG1lbWJlcnMgd2l0aCBoaXN0b3J5IG9mIG1vZGlmeWluZyAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgZmlsZSBpcyByZXF1aXJlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICBEb2VzIHRoZSBjaGFuZ2Ugc29tZWhvdyBhbGxvdyBmb3IgYXJiaXRyYXJ5IGphdmFzY3JpcHQgdG8gYmUgZXhlY3V0ZWQ/ICpcbiAqICAgIE9yIGFsbG93cyBmb3Igc29tZW9uZSB0byBjaGFuZ2UgdGhlIHByb3RvdHlwZSBvZiBidWlsdC1pbiBvYmplY3RzPyAgICpcbiAqICAgICBPciBnaXZlcyB1bmRlc2lyZWQgYWNjZXNzIHRvIHZhcmlhYmxlcyBsaWtlIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxuLyogISBWQVJJQUJMRS9GVU5DVElPTiBOQU1JTkcgQ09OVkVOVElPTlMgVEhBVCBBUFBMWSBUTyBUSElTIEZJTEUhXG4gKlxuICogRE9NLXJlbGF0ZWQgdmFyaWFibGVzOlxuICpcbiAqIC0gXCJub2RlXCIgLSBET00gTm9kZVxuICogLSBcImVsZW1lbnRcIiAtIERPTSBFbGVtZW50IG9yIE5vZGVcbiAqIC0gXCIkbm9kZVwiIG9yIFwiJGVsZW1lbnRcIiAtIGpxTGl0ZS13cmFwcGVkIG5vZGUgb3IgZWxlbWVudFxuICpcbiAqXG4gKiBDb21waWxlciByZWxhdGVkIHN0dWZmOlxuICpcbiAqIC0gXCJsaW5rRm5cIiAtIGxpbmtpbmcgZm4gb2YgYSBzaW5nbGUgZGlyZWN0aXZlXG4gKiAtIFwibm9kZUxpbmtGblwiIC0gZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGFsbCBsaW5raW5nIGZucyBmb3IgYSBwYXJ0aWN1bGFyIG5vZGVcbiAqIC0gXCJjaGlsZExpbmtGblwiIC0gIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhbGwgbGlua2luZyBmbnMgZm9yIGNoaWxkIG5vZGVzIG9mIGEgcGFydGljdWxhciBub2RlXG4gKiAtIFwiY29tcG9zaXRlTGlua0ZuXCIgLSBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYWxsIGxpbmtpbmcgZm5zIGZvciBhIGNvbXBpbGF0aW9uIHJvb3QgKG5vZGVMaXN0KVxuICovXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGNvbXBpbGVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb21waWxlcyBhbiBIVE1MIHN0cmluZyBvciBET00gaW50byBhIHRlbXBsYXRlIGFuZCBwcm9kdWNlcyBhIHRlbXBsYXRlIGZ1bmN0aW9uLCB3aGljaFxuICogY2FuIHRoZW4gYmUgdXNlZCB0byBsaW5rIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIGBzY29wZWB9IGFuZCB0aGUgdGVtcGxhdGUgdG9nZXRoZXIuXG4gKlxuICogVGhlIGNvbXBpbGF0aW9uIGlzIGEgcHJvY2VzcyBvZiB3YWxraW5nIHRoZSBET00gdHJlZSBhbmQgbWF0Y2hpbmcgRE9NIGVsZW1lbnRzIHRvXG4gKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGlzIGRvY3VtZW50IGlzIGFuIGluLWRlcHRoIHJlZmVyZW5jZSBvZiBhbGwgZGlyZWN0aXZlIG9wdGlvbnMuXG4gKiBGb3IgYSBnZW50bGUgaW50cm9kdWN0aW9uIHRvIGRpcmVjdGl2ZXMgd2l0aCBleGFtcGxlcyBvZiBjb21tb24gdXNlIGNhc2VzLFxuICogc2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZSBndWlkZX0uXG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBDb21wcmVoZW5zaXZlIERpcmVjdGl2ZSBBUElcbiAqXG4gKiBUaGVyZSBhcmUgbWFueSBkaWZmZXJlbnQgb3B0aW9ucyBmb3IgYSBkaXJlY3RpdmUuXG4gKlxuICogVGhlIGRpZmZlcmVuY2UgcmVzaWRlcyBpbiB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmYWN0b3J5IGZ1bmN0aW9uLlxuICogWW91IGNhbiBlaXRoZXIgcmV0dXJuIGEge0BsaW5rICRjb21waWxlI2RpcmVjdGl2ZS1kZWZpbml0aW9uLW9iamVjdCBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3QgKHNlZSBiZWxvdyl9XG4gKiB0aGF0IGRlZmluZXMgdGhlIGRpcmVjdGl2ZSBwcm9wZXJ0aWVzLCBvciBqdXN0IHRoZSBgcG9zdExpbmtgIGZ1bmN0aW9uIChhbGwgb3RoZXIgcHJvcGVydGllcyB3aWxsIGhhdmVcbiAqIHRoZSBkZWZhdWx0IHZhbHVlcykuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAqICoqQmVzdCBQcmFjdGljZToqKiBJdCdzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgXCJkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3RcIiBmb3JtLlxuICogPC9kaXY+XG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgZGlyZWN0aXZlIGRlY2xhcmVkIHdpdGggYSBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3Q6XG4gKlxuICogYGBganNcbiAqICAgdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoLi4uKTtcbiAqXG4gKiAgIG15TW9kdWxlLmRpcmVjdGl2ZSgnZGlyZWN0aXZlTmFtZScsIGZ1bmN0aW9uIGZhY3RvcnkoaW5qZWN0YWJsZXMpIHtcbiAqICAgICB2YXIgZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdCA9IHtcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcHJpb3JpdHktIHByaW9yaXR5fTogMCxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtdGVtcGxhdGUtIHRlbXBsYXRlfTogJzxkaXY+PC9kaXY+JywgLy8gb3IgLy8gZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykgeyAuLi4gfSxcbiAqICAgICAgIC8vIG9yXG4gKiAgICAgICAvLyB7QGxpbmsgJGNvbXBpbGUjLXRlbXBsYXRldXJsLSB0ZW1wbGF0ZVVybH06ICdkaXJlY3RpdmUuaHRtbCcsIC8vIG9yIC8vIGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHsgLi4uIH0sXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXRyYW5zY2x1ZGUtIHRyYW5zY2x1ZGV9OiBmYWxzZSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcmVzdHJpY3QtIHJlc3RyaWN0fTogJ0EnLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy10ZW1wbGF0ZW5hbWVzcGFjZS0gdGVtcGxhdGVOYW1lc3BhY2V9OiAnaHRtbCcsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXNjb3BlLSBzY29wZX06IGZhbHNlLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy1jb250cm9sbGVyLSBjb250cm9sbGVyfTogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkdHJhbnNjbHVkZSwgb3RoZXJJbmplY3RhYmxlcykgeyAuLi4gfSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtY29udHJvbGxlcmFzLSBjb250cm9sbGVyQXN9OiAnc3RyaW5nSWRlbnRpZmllcicsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLWJpbmR0b2NvbnRyb2xsZXItIGJpbmRUb0NvbnRyb2xsZXJ9OiBmYWxzZSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcmVxdWlyZS0gcmVxdWlyZX06ICdzaWJsaW5nRGlyZWN0aXZlTmFtZScsIC8vIG9yIC8vIFsnXnBhcmVudERpcmVjdGl2ZU5hbWUnLCAnP29wdGlvbmFsRGlyZWN0aXZlTmFtZScsICc/Xm9wdGlvbmFsUGFyZW50J10sXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLW11bHRpZWxlbWVudC0gbXVsdGlFbGVtZW50fTogZmFsc2UsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLWNvbXBpbGUtIGNvbXBpbGV9OiBmdW5jdGlvbiBjb21waWxlKHRFbGVtZW50LCB0QXR0cnMsIHRyYW5zY2x1ZGUpIHtcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICAge0BsaW5rICRjb21waWxlI3ByZS1saW5raW5nLWZ1bmN0aW9uIHByZX06IGZ1bmN0aW9uIHByZUxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH0sXG4gKiAgICAgICAgICAgIHtAbGluayAkY29tcGlsZSNwb3N0LWxpbmtpbmctZnVuY3Rpb24gcG9zdH06IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9XG4gKiAgICAgICAgIH1cbiAqICAgICAgICAgLy8gb3JcbiAqICAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XG4gKiAgICAgICB9LFxuICogICAgICAgLy8gb3JcbiAqICAgICAgIC8vIHtAbGluayAkY29tcGlsZSMtbGluay0gbGlua306IHtcbiAqICAgICAgIC8vICB7QGxpbmsgJGNvbXBpbGUjcHJlLWxpbmtpbmctZnVuY3Rpb24gcHJlfTogZnVuY3Rpb24gcHJlTGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfSxcbiAqICAgICAgIC8vICB7QGxpbmsgJGNvbXBpbGUjcG9zdC1saW5raW5nLWZ1bmN0aW9uIHBvc3R9OiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfVxuICogICAgICAgLy8gfVxuICogICAgICAgLy8gb3JcbiAqICAgICAgIC8vIHtAbGluayAkY29tcGlsZSMtbGluay0gbGlua306IGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XG4gKiAgICAgfTtcbiAqICAgICByZXR1cm4gZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdDtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipOb3RlOioqIEFueSB1bnNwZWNpZmllZCBvcHRpb25zIHdpbGwgdXNlIHRoZSBkZWZhdWx0IHZhbHVlLiBZb3UgY2FuIHNlZSB0aGUgZGVmYXVsdCB2YWx1ZXMgYmVsb3cuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGVyZWZvcmUgdGhlIGFib3ZlIGNhbiBiZSBzaW1wbGlmaWVkIGFzOlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKC4uLik7XG4gKlxuICogICBteU1vZHVsZS5kaXJlY3RpdmUoJ2RpcmVjdGl2ZU5hbWUnLCBmdW5jdGlvbiBmYWN0b3J5KGluamVjdGFibGVzKSB7XG4gKiAgICAgdmFyIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3QgPSB7XG4gKiAgICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycykgeyAuLi4gfVxuICogICAgIH07XG4gKiAgICAgcmV0dXJuIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3Q7XG4gKiAgICAgLy8gb3JcbiAqICAgICAvLyByZXR1cm4gZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHsgLi4uIH1cbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMgTGlmZS1jeWNsZSBob29rc1xuICogRGlyZWN0aXZlIGNvbnRyb2xsZXJzIGNhbiBwcm92aWRlIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyB0aGF0IGFyZSBjYWxsZWQgYnkgQW5ndWxhckpTIGF0IHBvaW50cyBpbiB0aGUgbGlmZS1jeWNsZSBvZiB0aGVcbiAqIGRpcmVjdGl2ZTpcbiAqICogYCRvbkluaXQoKWAgLSBDYWxsZWQgb24gZWFjaCBjb250cm9sbGVyIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnMgb24gYW4gZWxlbWVudCBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYW5kXG4gKiAgIGhhZCB0aGVpciBiaW5kaW5ncyBpbml0aWFsaXplZCAoYW5kIGJlZm9yZSB0aGUgcHJlICZhbXA7IHBvc3QgbGlua2luZyBmdW5jdGlvbnMgZm9yIHRoZSBkaXJlY3RpdmVzIG9uXG4gKiAgIHRoaXMgZWxlbWVudCkuIFRoaXMgaXMgYSBnb29kIHBsYWNlIHRvIHB1dCBpbml0aWFsaXphdGlvbiBjb2RlIGZvciB5b3VyIGNvbnRyb2xsZXIuXG4gKiAqIGAkb25DaGFuZ2VzKGNoYW5nZXNPYmopYCAtIENhbGxlZCB3aGVuZXZlciBvbmUtd2F5IChgPGApIG9yIGludGVycG9sYXRpb24gKGBAYCkgYmluZGluZ3MgYXJlIHVwZGF0ZWQuIFRoZVxuICogICBgY2hhbmdlc09iamAgaXMgYSBoYXNoIHdob3NlIGtleXMgYXJlIHRoZSBuYW1lcyBvZiB0aGUgYm91bmQgcHJvcGVydGllcyB0aGF0IGhhdmUgY2hhbmdlZCwgYW5kIHRoZSB2YWx1ZXMgYXJlIGFuXG4gKiAgIG9iamVjdCBvZiB0aGUgZm9ybSBgeyBjdXJyZW50VmFsdWUsIHByZXZpb3VzVmFsdWUsIGlzRmlyc3RDaGFuZ2UoKSB9YC4gVXNlIHRoaXMgaG9vayB0byB0cmlnZ2VyIHVwZGF0ZXMgd2l0aGluIGFcbiAqICAgY29tcG9uZW50IHN1Y2ggYXMgY2xvbmluZyB0aGUgYm91bmQgdmFsdWUgdG8gcHJldmVudCBhY2NpZGVudGFsIG11dGF0aW9uIG9mIHRoZSBvdXRlciB2YWx1ZS4gTm90ZSB0aGF0IHRoaXMgd2lsbFxuICogICBhbHNvIGJlIGNhbGxlZCB3aGVuIHlvdXIgYmluZGluZ3MgYXJlIGluaXRpYWxpemVkLlxuICogKiBgJGRvQ2hlY2soKWAgLSBDYWxsZWQgb24gZWFjaCB0dXJuIG9mIHRoZSBkaWdlc3QgY3ljbGUuIFByb3ZpZGVzIGFuIG9wcG9ydHVuaXR5IHRvIGRldGVjdCBhbmQgYWN0IG9uXG4gKiAgIGNoYW5nZXMuIEFueSBhY3Rpb25zIHRoYXQgeW91IHdpc2ggdG8gdGFrZSBpbiByZXNwb25zZSB0byB0aGUgY2hhbmdlcyB0aGF0IHlvdSBkZXRlY3QgbXVzdCBiZVxuICogICBpbnZva2VkIGZyb20gdGhpcyBob29rOyBpbXBsZW1lbnRpbmcgdGhpcyBoYXMgbm8gZWZmZWN0IG9uIHdoZW4gYCRvbkNoYW5nZXNgIGlzIGNhbGxlZC4gRm9yIGV4YW1wbGUsIHRoaXMgaG9va1xuICogICBjb3VsZCBiZSB1c2VmdWwgaWYgeW91IHdpc2ggdG8gcGVyZm9ybSBhIGRlZXAgZXF1YWxpdHkgY2hlY2ssIG9yIHRvIGNoZWNrIGEgRGF0ZSBvYmplY3QsIGNoYW5nZXMgdG8gd2hpY2ggd291bGQgbm90XG4gKiAgIGJlIGRldGVjdGVkIGJ5IEFuZ3VsYXJKUydzIGNoYW5nZSBkZXRlY3RvciBhbmQgdGh1cyBub3QgdHJpZ2dlciBgJG9uQ2hhbmdlc2AuIFRoaXMgaG9vayBpcyBpbnZva2VkIHdpdGggbm8gYXJndW1lbnRzO1xuICogICBpZiBkZXRlY3RpbmcgY2hhbmdlcywgeW91IG11c3Qgc3RvcmUgdGhlIHByZXZpb3VzIHZhbHVlKHMpIGZvciBjb21wYXJpc29uIHRvIHRoZSBjdXJyZW50IHZhbHVlcy5cbiAqICogYCRvbkRlc3Ryb3koKWAgLSBDYWxsZWQgb24gYSBjb250cm9sbGVyIHdoZW4gaXRzIGNvbnRhaW5pbmcgc2NvcGUgaXMgZGVzdHJveWVkLiBVc2UgdGhpcyBob29rIGZvciByZWxlYXNpbmdcbiAqICAgZXh0ZXJuYWwgcmVzb3VyY2VzLCB3YXRjaGVzIGFuZCBldmVudCBoYW5kbGVycy4gTm90ZSB0aGF0IGNvbXBvbmVudHMgaGF2ZSB0aGVpciBgJG9uRGVzdHJveSgpYCBob29rcyBjYWxsZWQgaW5cbiAqICAgdGhlIHNhbWUgb3JkZXIgYXMgdGhlIGAkc2NvcGUuJGJyb2FkY2FzdGAgZXZlbnRzIGFyZSB0cmlnZ2VyZWQsIHdoaWNoIGlzIHRvcCBkb3duLiBUaGlzIG1lYW5zIHRoYXQgcGFyZW50XG4gKiAgIGNvbXBvbmVudHMgd2lsbCBoYXZlIHRoZWlyIGAkb25EZXN0cm95KClgIGhvb2sgY2FsbGVkIGJlZm9yZSBjaGlsZCBjb21wb25lbnRzLlxuICogKiBgJHBvc3RMaW5rKClgIC0gQ2FsbGVkIGFmdGVyIHRoaXMgY29udHJvbGxlcidzIGVsZW1lbnQgYW5kIGl0cyBjaGlsZHJlbiBoYXZlIGJlZW4gbGlua2VkLiBTaW1pbGFyIHRvIHRoZSBwb3N0LWxpbmtcbiAqICAgZnVuY3Rpb24gdGhpcyBob29rIGNhbiBiZSB1c2VkIHRvIHNldCB1cCBET00gZXZlbnQgaGFuZGxlcnMgYW5kIGRvIGRpcmVjdCBET00gbWFuaXB1bGF0aW9uLlxuICogICBOb3RlIHRoYXQgY2hpbGQgZWxlbWVudHMgdGhhdCBjb250YWluIGB0ZW1wbGF0ZVVybGAgZGlyZWN0aXZlcyB3aWxsIG5vdCBoYXZlIGJlZW4gY29tcGlsZWQgYW5kIGxpbmtlZCBzaW5jZVxuICogICB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd24gY29tcGlsYXRpb24gYW5kIGxpbmtpbmcgaGFzIGJlZW5cbiAqICAgc3VzcGVuZGVkIHVudGlsIHRoYXQgb2NjdXJzLlxuICpcbiAqICMjIyMgQ29tcGFyaXNvbiB3aXRoIGxpZmUtY3ljbGUgaG9va3MgaW4gdGhlIG5ldyBBbmd1bGFyXG4gKiBUaGUgbmV3IEFuZ3VsYXIgYWxzbyB1c2VzIGxpZmUtY3ljbGUgaG9va3MgZm9yIGl0cyBjb21wb25lbnRzLiBXaGlsZSB0aGUgQW5ndWxhckpTIGxpZmUtY3ljbGUgaG9va3MgYXJlIHNpbWlsYXIgdGhlcmUgYXJlXG4gKiBzb21lIGRpZmZlcmVuY2VzIHRoYXQgeW91IHNob3VsZCBiZSBhd2FyZSBvZiwgZXNwZWNpYWxseSB3aGVuIGl0IGNvbWVzIHRvIG1vdmluZyB5b3VyIGNvZGUgZnJvbSBBbmd1bGFySlMgdG8gQW5ndWxhcjpcbiAqXG4gKiAqIEFuZ3VsYXJKUyBob29rcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGAsIHN1Y2ggYXMgYCRvbkluaXRgLiBBbmd1bGFyIGhvb2tzIGFyZSBwcmVmaXhlZCB3aXRoIGBuZ2AsIHN1Y2ggYXMgYG5nT25Jbml0YC5cbiAqICogQW5ndWxhckpTIGhvb2tzIGNhbiBiZSBkZWZpbmVkIG9uIHRoZSBjb250cm9sbGVyIHByb3RvdHlwZSBvciBhZGRlZCB0byB0aGUgY29udHJvbGxlciBpbnNpZGUgaXRzIGNvbnN0cnVjdG9yLlxuICogICBJbiBBbmd1bGFyIHlvdSBjYW4gb25seSBkZWZpbmUgaG9va3Mgb24gdGhlIHByb3RvdHlwZSBvZiB0aGUgQ29tcG9uZW50IGNsYXNzLlxuICogKiBEdWUgdG8gdGhlIGRpZmZlcmVuY2VzIGluIGNoYW5nZS1kZXRlY3Rpb24sIHlvdSBtYXkgZ2V0IG1hbnkgbW9yZSBjYWxscyB0byBgJGRvQ2hlY2tgIGluIEFuZ3VsYXJKUyB0aGFuIHlvdSB3b3VsZCB0b1xuICogICBgbmdEb0NoZWNrYCBpbiBBbmd1bGFyLlxuICogKiBDaGFuZ2VzIHRvIHRoZSBtb2RlbCBpbnNpZGUgYCRkb0NoZWNrYCB3aWxsIHRyaWdnZXIgbmV3IHR1cm5zIG9mIHRoZSBkaWdlc3QgbG9vcCwgd2hpY2ggd2lsbCBjYXVzZSB0aGUgY2hhbmdlcyB0byBiZVxuICogICBwcm9wYWdhdGVkIHRocm91Z2hvdXQgdGhlIGFwcGxpY2F0aW9uLlxuICogICBBbmd1bGFyIGRvZXMgbm90IGFsbG93IHRoZSBgbmdEb0NoZWNrYCBob29rIHRvIHRyaWdnZXIgYSBjaGFuZ2Ugb3V0c2lkZSBvZiB0aGUgY29tcG9uZW50LiBJdCB3aWxsIGVpdGhlciB0aHJvdyBhblxuICogICBlcnJvciBvciBkbyBub3RoaW5nIGRlcGVuZGluZyB1cG9uIHRoZSBzdGF0ZSBvZiBgZW5hYmxlUHJvZE1vZGUoKWAuXG4gKlxuICogIyMjIyBMaWZlLWN5Y2xlIGhvb2sgZXhhbXBsZXNcbiAqXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHlvdSBjYW4gY2hlY2sgZm9yIG11dGF0aW9ucyB0byBhIERhdGUgb2JqZWN0IGV2ZW4gdGhvdWdoIHRoZSBpZGVudGl0eSBvZiB0aGUgb2JqZWN0XG4gKiBoYXMgbm90IGNoYW5nZWQuXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cImRvQ2hlY2tEYXRlRXhhbXBsZVwiIG1vZHVsZT1cImRvLWNoZWNrLW1vZHVsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgYW5ndWxhci5tb2R1bGUoJ2RvLWNoZWNrLW1vZHVsZScsIFtdKVxuICogICAgICAgLmNvbXBvbmVudCgnYXBwJywge1xuICogICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAnTW9udGg6IDxpbnB1dCBuZy1tb2RlbD1cIiRjdHJsLm1vbnRoXCIgbmctY2hhbmdlPVwiJGN0cmwudXBkYXRlRGF0ZSgpXCI+JyArXG4gKiAgICAgICAgICAgJ0RhdGU6IHt7ICRjdHJsLmRhdGUgfX0nICtcbiAqICAgICAgICAgICAnPHRlc3QgZGF0ZT1cIiRjdHJsLmRhdGVcIj48L3Rlc3Q+JyxcbiAqICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgdGhpcy5kYXRlID0gbmV3IERhdGUoKTtcbiAqICAgICAgICAgICB0aGlzLm1vbnRoID0gdGhpcy5kYXRlLmdldE1vbnRoKCk7XG4gKiAgICAgICAgICAgdGhpcy51cGRhdGVEYXRlID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICB0aGlzLmRhdGUuc2V0TW9udGgodGhpcy5tb250aCk7XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSlcbiAqICAgICAgIC5jb21wb25lbnQoJ3Rlc3QnLCB7XG4gKiAgICAgICAgIGJpbmRpbmdzOiB7IGRhdGU6ICc8JyB9LFxuICogICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAnPHByZT57eyAkY3RybC5sb2cgfCBqc29uIH19PC9wcmU+JyxcbiAqICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWU7XG4gKiAgICAgICAgICAgdGhpcy5sb2cgPSBbXTtcbiAqICAgICAgICAgICB0aGlzLiRkb0NoZWNrID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy5kYXRlICYmIHRoaXMuZGF0ZS52YWx1ZU9mKCk7XG4gKiAgICAgICAgICAgICBpZiAocHJldmlvdXNWYWx1ZSAhPT0gY3VycmVudFZhbHVlKSB7XG4gKiAgICAgICAgICAgICAgIHRoaXMubG9nLnB1c2goJ2RvQ2hlY2s6IGRhdGUgbXV0YXRlZDogJyArIHRoaXMuZGF0ZSk7XG4gKiAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gKiAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8YXBwPjwvYXBwPlxuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogVGhpcyBleGFtcGxlIHNob3cgaG93IHlvdSBtaWdodCB1c2UgYCRkb0NoZWNrYCB0byB0cmlnZ2VyIGNoYW5nZXMgaW4geW91ciBjb21wb25lbnQncyBpbnB1dHMgZXZlbiBpZiB0aGVcbiAqIGFjdHVhbCBpZGVudGl0eSBvZiB0aGUgY29tcG9uZW50IGRvZXNuJ3QgY2hhbmdlLiAoQmUgYXdhcmUgdGhhdCBjbG9uaW5nIGFuZCBkZWVwIGVxdWFsaXR5IGNoZWNrcyBvbiBsYXJnZVxuICogYXJyYXlzIG9yIG9iamVjdHMgY2FuIGhhdmUgYSBuZWdhdGl2ZSBpbXBhY3Qgb24geW91ciBhcHBsaWNhdGlvbiBwZXJmb3JtYW5jZSlcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwiZG9DaGVja0FycmF5RXhhbXBsZVwiIG1vZHVsZT1cImRvLWNoZWNrLW1vZHVsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxkaXYgbmctaW5pdD1cIml0ZW1zID0gW11cIj5cbiAqICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJpdGVtcy5wdXNoKGl0ZW1zLmxlbmd0aClcIj5BZGQgSXRlbTwvYnV0dG9uPlxuICogICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIml0ZW1zID0gW11cIj5SZXNldCBJdGVtczwvYnV0dG9uPlxuICogICAgICAgPHByZT57eyBpdGVtcyB9fTwvcHJlPlxuICogICAgICAgPHRlc3QgaXRlbXM9XCJpdGVtc1wiPjwvdGVzdD5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgIGFuZ3VsYXIubW9kdWxlKCdkby1jaGVjay1tb2R1bGUnLCBbXSlcbiAqICAgICAgICAuY29tcG9uZW50KCd0ZXN0Jywge1xuICogICAgICAgICAgYmluZGluZ3M6IHsgaXRlbXM6ICc8JyB9LFxuICogICAgICAgICAgdGVtcGxhdGU6XG4gKiAgICAgICAgICAgICc8cHJlPnt7ICRjdHJsLmxvZyB8IGpzb24gfX08L3ByZT4nLFxuICogICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgIHRoaXMubG9nID0gW107XG4gKlxuICogICAgICAgICAgICB0aGlzLiRkb0NoZWNrID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNfcmVmICE9PSB0aGlzLml0ZW1zKSB7XG4gKiAgICAgICAgICAgICAgICB0aGlzLmxvZy5wdXNoKCdkb0NoZWNrOiBpdGVtcyBjaGFuZ2VkJyk7XG4gKiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zX3JlZiA9IHRoaXMuaXRlbXM7XG4gKiAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICAgIGlmICghYW5ndWxhci5lcXVhbHModGhpcy5pdGVtc19jbG9uZSwgdGhpcy5pdGVtcykpIHtcbiAqICAgICAgICAgICAgICAgIHRoaXMubG9nLnB1c2goJ2RvQ2hlY2s6IGl0ZW1zIG11dGF0ZWQnKTtcbiAqICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNfY2xvbmUgPSBhbmd1bGFyLmNvcHkodGhpcy5pdGVtcyk7XG4gKiAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICB9O1xuICogICAgICAgICAgfVxuICogICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqICMjIyBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3RcbiAqXG4gKiBUaGUgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0IHByb3ZpZGVzIGluc3RydWN0aW9ucyB0byB0aGUge0BsaW5rIG5nLiRjb21waWxlXG4gKiBjb21waWxlcn0uIFRoZSBhdHRyaWJ1dGVzIGFyZTpcbiAqXG4gKiAjIyMjIGBtdWx0aUVsZW1lbnRgXG4gKiBXaGVuIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIHRydWUgKGRlZmF1bHQgaXMgYGZhbHNlYCksIHRoZSBIVE1MIGNvbXBpbGVyIHdpbGwgY29sbGVjdCBET00gbm9kZXMgYmV0d2VlblxuICogbm9kZXMgd2l0aCB0aGUgYXR0cmlidXRlcyBgZGlyZWN0aXZlLW5hbWUtc3RhcnRgIGFuZCBgZGlyZWN0aXZlLW5hbWUtZW5kYCwgYW5kIGdyb3VwIHRoZW1cbiAqIHRvZ2V0aGVyIGFzIHRoZSBkaXJlY3RpdmUgZWxlbWVudHMuIEl0IGlzIHJlY29tbWVuZGVkIHRoYXQgdGhpcyBmZWF0dXJlIGJlIHVzZWQgb24gZGlyZWN0aXZlc1xuICogd2hpY2ggYXJlIG5vdCBzdHJpY3RseSBiZWhhdmlvcmFsIChzdWNoIGFzIHtAbGluayBuZ0NsaWNrfSksIGFuZCB3aGljaFxuICogZG8gbm90IG1hbmlwdWxhdGUgb3IgcmVwbGFjZSBjaGlsZCBub2RlcyAoc3VjaCBhcyB7QGxpbmsgbmdJbmNsdWRlfSkuXG4gKlxuICogIyMjIyBgcHJpb3JpdHlgXG4gKiBXaGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBkaXJlY3RpdmVzIGRlZmluZWQgb24gYSBzaW5nbGUgRE9NIGVsZW1lbnQsIHNvbWV0aW1lcyBpdFxuICogaXMgbmVjZXNzYXJ5IHRvIHNwZWNpZnkgdGhlIG9yZGVyIGluIHdoaWNoIHRoZSBkaXJlY3RpdmVzIGFyZSBhcHBsaWVkLiBUaGUgYHByaW9yaXR5YCBpcyB1c2VkXG4gKiB0byBzb3J0IHRoZSBkaXJlY3RpdmVzIGJlZm9yZSB0aGVpciBgY29tcGlsZWAgZnVuY3Rpb25zIGdldCBjYWxsZWQuIFByaW9yaXR5IGlzIGRlZmluZWQgYXMgYVxuICogbnVtYmVyLiBEaXJlY3RpdmVzIHdpdGggZ3JlYXRlciBudW1lcmljYWwgYHByaW9yaXR5YCBhcmUgY29tcGlsZWQgZmlyc3QuIFByZS1saW5rIGZ1bmN0aW9uc1xuICogYXJlIGFsc28gcnVuIGluIHByaW9yaXR5IG9yZGVyLCBidXQgcG9zdC1saW5rIGZ1bmN0aW9ucyBhcmUgcnVuIGluIHJldmVyc2Ugb3JkZXIuIFRoZSBvcmRlclxuICogb2YgZGlyZWN0aXZlcyB3aXRoIHRoZSBzYW1lIHByaW9yaXR5IGlzIHVuZGVmaW5lZC4gVGhlIGRlZmF1bHQgcHJpb3JpdHkgaXMgYDBgLlxuICpcbiAqICMjIyMgYHRlcm1pbmFsYFxuICogSWYgc2V0IHRvIHRydWUgdGhlbiB0aGUgY3VycmVudCBgcHJpb3JpdHlgIHdpbGwgYmUgdGhlIGxhc3Qgc2V0IG9mIGRpcmVjdGl2ZXNcbiAqIHdoaWNoIHdpbGwgZXhlY3V0ZSAoYW55IGRpcmVjdGl2ZXMgYXQgdGhlIGN1cnJlbnQgcHJpb3JpdHkgd2lsbCBzdGlsbCBleGVjdXRlXG4gKiBhcyB0aGUgb3JkZXIgb2YgZXhlY3V0aW9uIG9uIHNhbWUgYHByaW9yaXR5YCBpcyB1bmRlZmluZWQpLiBOb3RlIHRoYXQgZXhwcmVzc2lvbnNcbiAqIGFuZCBvdGhlciBkaXJlY3RpdmVzIHVzZWQgaW4gdGhlIGRpcmVjdGl2ZSdzIHRlbXBsYXRlIHdpbGwgYWxzbyBiZSBleGNsdWRlZCBmcm9tIGV4ZWN1dGlvbi5cbiAqXG4gKiAjIyMjIGBzY29wZWBcbiAqIFRoZSBzY29wZSBwcm9wZXJ0eSBjYW4gYmUgYGZhbHNlYCwgYHRydWVgLCBvciBhbiBvYmplY3Q6XG4gKlxuICogKiAqKmBmYWxzZWAgKGRlZmF1bHQpOioqIE5vIHNjb3BlIHdpbGwgYmUgY3JlYXRlZCBmb3IgdGhlIGRpcmVjdGl2ZS4gVGhlIGRpcmVjdGl2ZSB3aWxsIHVzZSBpdHNcbiAqIHBhcmVudCdzIHNjb3BlLlxuICpcbiAqICogKipgdHJ1ZWA6KiogQSBuZXcgY2hpbGQgc2NvcGUgdGhhdCBwcm90b3R5cGljYWxseSBpbmhlcml0cyBmcm9tIGl0cyBwYXJlbnQgd2lsbCBiZSBjcmVhdGVkIGZvclxuICogdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuIElmIG11bHRpcGxlIGRpcmVjdGl2ZXMgb24gdGhlIHNhbWUgZWxlbWVudCByZXF1ZXN0IGEgbmV3IHNjb3BlLFxuICogb25seSBvbmUgbmV3IHNjb3BlIGlzIGNyZWF0ZWQuXG4gKlxuICogKiAqKmB7Li4ufWAgKGFuIG9iamVjdCBoYXNoKToqKiBBIG5ldyBcImlzb2xhdGVcIiBzY29wZSBpcyBjcmVhdGVkIGZvciB0aGUgZGlyZWN0aXZlJ3MgdGVtcGxhdGUuXG4gKiBUaGUgJ2lzb2xhdGUnIHNjb3BlIGRpZmZlcnMgZnJvbSBub3JtYWwgc2NvcGUgaW4gdGhhdCBpdCBkb2VzIG5vdCBwcm90b3R5cGljYWxseVxuICogaW5oZXJpdCBmcm9tIGl0cyBwYXJlbnQgc2NvcGUuIFRoaXMgaXMgdXNlZnVsIHdoZW4gY3JlYXRpbmcgcmV1c2FibGUgY29tcG9uZW50cywgd2hpY2ggc2hvdWxkIG5vdFxuICogYWNjaWRlbnRhbGx5IHJlYWQgb3IgbW9kaWZ5IGRhdGEgaW4gdGhlIHBhcmVudCBzY29wZS4gTm90ZSB0aGF0IGFuIGlzb2xhdGUgc2NvcGVcbiAqIGRpcmVjdGl2ZSB3aXRob3V0IGEgYHRlbXBsYXRlYCBvciBgdGVtcGxhdGVVcmxgIHdpbGwgbm90IGFwcGx5IHRoZSBpc29sYXRlIHNjb3BlXG4gKiB0byBpdHMgY2hpbGRyZW4gZWxlbWVudHMuXG4gKlxuICogVGhlICdpc29sYXRlJyBzY29wZSBvYmplY3QgaGFzaCBkZWZpbmVzIGEgc2V0IG9mIGxvY2FsIHNjb3BlIHByb3BlcnRpZXMgZGVyaXZlZCBmcm9tIGF0dHJpYnV0ZXMgb24gdGhlXG4gKiBkaXJlY3RpdmUncyBlbGVtZW50LiBUaGVzZSBsb2NhbCBwcm9wZXJ0aWVzIGFyZSB1c2VmdWwgZm9yIGFsaWFzaW5nIHZhbHVlcyBmb3IgdGVtcGxhdGVzLiBUaGUga2V5cyBpblxuICogdGhlIG9iamVjdCBoYXNoIG1hcCB0byB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgb24gdGhlIGlzb2xhdGUgc2NvcGU7IHRoZSB2YWx1ZXMgZGVmaW5lIGhvdyB0aGUgcHJvcGVydHlcbiAqIGlzIGJvdW5kIHRvIHRoZSBwYXJlbnQgc2NvcGUsIHZpYSBtYXRjaGluZyBhdHRyaWJ1dGVzIG9uIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50OlxuICpcbiAqICogYEBgIG9yIGBAYXR0cmAgLSBiaW5kIGEgbG9jYWwgc2NvcGUgcHJvcGVydHkgdG8gdGhlIHZhbHVlIG9mIERPTSBhdHRyaWJ1dGUuIFRoZSByZXN1bHQgaXNcbiAqICAgYWx3YXlzIGEgc3RyaW5nIHNpbmNlIERPTSBhdHRyaWJ1dGVzIGFyZSBzdHJpbmdzLiBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGVcbiAqICAgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZS4gR2l2ZW4gYDxteS1jb21wb25lbnRcbiAqICAgbXktYXR0cj1cImhlbGxvIHt7bmFtZX19XCI+YCBhbmQgdGhlIGlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiBgc2NvcGU6IHsgbG9jYWxOYW1lOidAbXlBdHRyJyB9YCxcbiAqICAgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIHByb3BlcnR5IGBsb2NhbE5hbWVgIHdpbGwgcmVmbGVjdCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIGBoZWxsb1xuICogICB7e25hbWV9fWAuIEFzIHRoZSBgbmFtZWAgYXR0cmlidXRlIGNoYW5nZXMgc28gd2lsbCB0aGUgYGxvY2FsTmFtZWAgcHJvcGVydHkgb24gdGhlIGRpcmVjdGl2ZSdzXG4gKiAgIHNjb3BlLiBUaGUgYG5hbWVgIGlzIHJlYWQgZnJvbSB0aGUgcGFyZW50IHNjb3BlIChub3QgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlKS5cbiAqXG4gKiAqIGA9YCBvciBgPWF0dHJgIC0gc2V0IHVwIGEgYmlkaXJlY3Rpb25hbCBiaW5kaW5nIGJldHdlZW4gYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSBhbmQgYW4gZXhwcmVzc2lvblxuICogICBwYXNzZWQgdmlhIHRoZSBhdHRyaWJ1dGUgYGF0dHJgLiBUaGUgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQgaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS5cbiAqICAgSWYgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsXG4gKiAgIG5hbWUuIEdpdmVuIGA8bXktY29tcG9uZW50IG15LWF0dHI9XCJwYXJlbnRNb2RlbFwiPmAgYW5kIHRoZSBpc29sYXRlIHNjb3BlIGRlZmluaXRpb24gYHNjb3BlOiB7XG4gKiAgIGxvY2FsTW9kZWw6ICc9bXlBdHRyJyB9YCwgdGhlIHByb3BlcnR5IGBsb2NhbE1vZGVsYCBvbiB0aGUgZGlyZWN0aXZlJ3Mgc2NvcGUgd2lsbCByZWZsZWN0IHRoZVxuICogICB2YWx1ZSBvZiBgcGFyZW50TW9kZWxgIG9uIHRoZSBwYXJlbnQgc2NvcGUuIENoYW5nZXMgdG8gYHBhcmVudE1vZGVsYCB3aWxsIGJlIHJlZmxlY3RlZCBpblxuICogICBgbG9jYWxNb2RlbGAgYW5kIHZpY2UgdmVyc2EuIE9wdGlvbmFsIGF0dHJpYnV0ZXMgc2hvdWxkIGJlIG1hcmtlZCBhcyBzdWNoIHdpdGggYSBxdWVzdGlvbiBtYXJrOlxuICogICBgPT9gIG9yIGA9P2F0dHJgLiBJZiB0aGUgYmluZGluZyBleHByZXNzaW9uIGlzIG5vbi1hc3NpZ25hYmxlLCBvciBpZiB0aGUgYXR0cmlidXRlIGlzbid0XG4gKiAgIG9wdGlvbmFsIGFuZCBkb2Vzbid0IGV4aXN0LCBhbiBleGNlcHRpb24gKHtAbGluayBlcnJvci8kY29tcGlsZS9ub25hc3NpZ24gYCRjb21waWxlOm5vbmFzc2lnbmB9KVxuICogICB3aWxsIGJlIHRocm93biB1cG9uIGRpc2NvdmVyaW5nIGNoYW5nZXMgdG8gdGhlIGxvY2FsIHZhbHVlLCBzaW5jZSBpdCB3aWxsIGJlIGltcG9zc2libGUgdG8gc3luY1xuICogICB0aGVtIGJhY2sgdG8gdGhlIHBhcmVudCBzY29wZS4gQnkgZGVmYXVsdCwgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCBgJHdhdGNoYH1cbiAqICAgbWV0aG9kIGlzIHVzZWQgZm9yIHRyYWNraW5nIGNoYW5nZXMsIGFuZCB0aGUgZXF1YWxpdHkgY2hlY2sgaXMgYmFzZWQgb24gb2JqZWN0IGlkZW50aXR5LlxuICogICBIb3dldmVyLCBpZiBhbiBvYmplY3QgbGl0ZXJhbCBvciBhbiBhcnJheSBsaXRlcmFsIGlzIHBhc3NlZCBhcyB0aGUgYmluZGluZyBleHByZXNzaW9uLCB0aGVcbiAqICAgZXF1YWxpdHkgY2hlY2sgaXMgZG9uZSBieSB2YWx1ZSAodXNpbmcgdGhlIHtAbGluayBhbmd1bGFyLmVxdWFsc30gZnVuY3Rpb24pLiBJdCdzIGFsc28gcG9zc2libGVcbiAqICAgdG8gd2F0Y2ggdGhlIGV2YWx1YXRlZCB2YWx1ZSBzaGFsbG93bHkgd2l0aCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hDb2xsZWN0aW9uXG4gKiAgIGAkd2F0Y2hDb2xsZWN0aW9uYH06IHVzZSBgPSpgIG9yIGA9KmF0dHJgIChgPSo/YCBvciBgPSo/YXR0cmAgaWYgdGhlIGF0dHJpYnV0ZSBpcyBvcHRpb25hbCkuXG4gKlxuICAqICogYDxgIG9yIGA8YXR0cmAgLSBzZXQgdXAgYSBvbmUtd2F5IChvbmUtZGlyZWN0aW9uYWwpIGJpbmRpbmcgYmV0d2VlbiBhIGxvY2FsIHNjb3BlIHByb3BlcnR5IGFuZCBhblxuICogICBleHByZXNzaW9uIHBhc3NlZCB2aWEgdGhlIGF0dHJpYnV0ZSBgYXR0cmAuIFRoZSBleHByZXNzaW9uIGlzIGV2YWx1YXRlZCBpbiB0aGUgY29udGV4dCBvZiB0aGVcbiAqICAgcGFyZW50IHNjb3BlLiBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGVcbiAqICAgbG9jYWwgbmFtZS4gWW91IGNhbiBhbHNvIG1ha2UgdGhlIGJpbmRpbmcgb3B0aW9uYWwgYnkgYWRkaW5nIGA/YDogYDw/YCBvciBgPD9hdHRyYC5cbiAqXG4gKiAgIEZvciBleGFtcGxlLCBnaXZlbiBgPG15LWNvbXBvbmVudCBteS1hdHRyPVwicGFyZW50TW9kZWxcIj5gIGFuZCBkaXJlY3RpdmUgZGVmaW5pdGlvbiBvZlxuICogICBgc2NvcGU6IHsgbG9jYWxNb2RlbDonPG15QXR0cicgfWAsIHRoZW4gdGhlIGlzb2xhdGVkIHNjb3BlIHByb3BlcnR5IGBsb2NhbE1vZGVsYCB3aWxsIHJlZmxlY3QgdGhlXG4gKiAgIHZhbHVlIG9mIGBwYXJlbnRNb2RlbGAgb24gdGhlIHBhcmVudCBzY29wZS4gQW55IGNoYW5nZXMgdG8gYHBhcmVudE1vZGVsYCB3aWxsIGJlIHJlZmxlY3RlZFxuICogICBpbiBgbG9jYWxNb2RlbGAsIGJ1dCBjaGFuZ2VzIGluIGBsb2NhbE1vZGVsYCB3aWxsIG5vdCByZWZsZWN0IGluIGBwYXJlbnRNb2RlbGAuIFRoZXJlIGFyZSBob3dldmVyXG4gKiAgIHR3byBjYXZlYXRzOlxuICogICAgIDEuIG9uZS13YXkgYmluZGluZyBkb2VzIG5vdCBjb3B5IHRoZSB2YWx1ZSBmcm9tIHRoZSBwYXJlbnQgdG8gdGhlIGlzb2xhdGUgc2NvcGUsIGl0IHNpbXBseVxuICogICAgIHNldHMgdGhlIHNhbWUgdmFsdWUuIFRoYXQgbWVhbnMgaWYgeW91ciBib3VuZCB2YWx1ZSBpcyBhbiBvYmplY3QsIGNoYW5nZXMgdG8gaXRzIHByb3BlcnRpZXNcbiAqICAgICBpbiB0aGUgaXNvbGF0ZWQgc2NvcGUgd2lsbCBiZSByZWZsZWN0ZWQgaW4gdGhlIHBhcmVudCBzY29wZSAoYmVjYXVzZSBib3RoIHJlZmVyZW5jZSB0aGUgc2FtZSBvYmplY3QpLlxuICogICAgIDIuIG9uZS13YXkgYmluZGluZyB3YXRjaGVzIGNoYW5nZXMgdG8gdGhlICoqaWRlbnRpdHkqKiBvZiB0aGUgcGFyZW50IHZhbHVlLiBUaGF0IG1lYW5zIHRoZVxuICogICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCBgJHdhdGNoYH0gb24gdGhlIHBhcmVudCB2YWx1ZSBvbmx5IGZpcmVzIGlmIHRoZSByZWZlcmVuY2VcbiAqICAgICB0byB0aGUgdmFsdWUgaGFzIGNoYW5nZWQuIEluIG1vc3QgY2FzZXMsIHRoaXMgc2hvdWxkIG5vdCBiZSBvZiBjb25jZXJuLCBidXQgY2FuIGJlIGltcG9ydGFudFxuICogICAgIHRvIGtub3cgaWYgeW91IG9uZS13YXkgYmluZCB0byBhbiBvYmplY3QsIGFuZCB0aGVuIHJlcGxhY2UgdGhhdCBvYmplY3QgaW4gdGhlIGlzb2xhdGVkIHNjb3BlLlxuICogICAgIElmIHlvdSBub3cgY2hhbmdlIGEgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBpbiB5b3VyIHBhcmVudCBzY29wZSwgdGhlIGNoYW5nZSB3aWxsIG5vdCBiZVxuICogICAgIHByb3BhZ2F0ZWQgdG8gdGhlIGlzb2xhdGVkIHNjb3BlLCBiZWNhdXNlIHRoZSBpZGVudGl0eSBvZiB0aGUgb2JqZWN0IG9uIHRoZSBwYXJlbnQgc2NvcGVcbiAqICAgICBoYXMgbm90IGNoYW5nZWQuIEluc3RlYWQgeW91IG11c3QgYXNzaWduIGEgbmV3IG9iamVjdC5cbiAqXG4gKiAgIE9uZS13YXkgYmluZGluZyBpcyB1c2VmdWwgaWYgeW91IGRvIG5vdCBwbGFuIHRvIHByb3BhZ2F0ZSBjaGFuZ2VzIHRvIHlvdXIgaXNvbGF0ZWQgc2NvcGUgYmluZGluZ3NcbiAqICAgYmFjayB0byB0aGUgcGFyZW50LiBIb3dldmVyLCBpdCBkb2VzIG5vdCBtYWtlIHRoaXMgY29tcGxldGVseSBpbXBvc3NpYmxlLlxuICpcbiAqICogYCZgIG9yIGAmYXR0cmAgLSBwcm92aWRlcyBhIHdheSB0byBleGVjdXRlIGFuIGV4cHJlc3Npb24gaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS4gSWZcbiAqICAgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsIG5hbWUuXG4gKiAgIEdpdmVuIGA8bXktY29tcG9uZW50IG15LWF0dHI9XCJjb3VudCA9IGNvdW50ICsgdmFsdWVcIj5gIGFuZCB0aGUgaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uIGBzY29wZToge1xuICogICBsb2NhbEZuOicmbXlBdHRyJyB9YCwgdGhlIGlzb2xhdGUgc2NvcGUgcHJvcGVydHkgYGxvY2FsRm5gIHdpbGwgcG9pbnQgdG8gYSBmdW5jdGlvbiB3cmFwcGVyIGZvclxuICogICB0aGUgYGNvdW50ID0gY291bnQgKyB2YWx1ZWAgZXhwcmVzc2lvbi4gT2Z0ZW4gaXQncyBkZXNpcmFibGUgdG8gcGFzcyBkYXRhIGZyb20gdGhlIGlzb2xhdGVkIHNjb3BlXG4gKiAgIHZpYSBhbiBleHByZXNzaW9uIHRvIHRoZSBwYXJlbnQgc2NvcGUuIFRoaXMgY2FuIGJlIGRvbmUgYnkgcGFzc2luZyBhIG1hcCBvZiBsb2NhbCB2YXJpYWJsZSBuYW1lc1xuICogICBhbmQgdmFsdWVzIGludG8gdGhlIGV4cHJlc3Npb24gd3JhcHBlciBmbi4gRm9yIGV4YW1wbGUsIGlmIHRoZSBleHByZXNzaW9uIGlzIGBpbmNyZW1lbnQoYW1vdW50KWBcbiAqICAgdGhlbiB3ZSBjYW4gc3BlY2lmeSB0aGUgYW1vdW50IHZhbHVlIGJ5IGNhbGxpbmcgdGhlIGBsb2NhbEZuYCBhcyBgbG9jYWxGbih7YW1vdW50OiAyMn0pYC5cbiAqXG4gKiBJbiBnZW5lcmFsIGl0J3MgcG9zc2libGUgdG8gYXBwbHkgbW9yZSB0aGFuIG9uZSBkaXJlY3RpdmUgdG8gb25lIGVsZW1lbnQsIGJ1dCB0aGVyZSBtaWdodCBiZSBsaW1pdGF0aW9uc1xuICogZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIHNjb3BlIHJlcXVpcmVkIGJ5IHRoZSBkaXJlY3RpdmVzLiBUaGUgZm9sbG93aW5nIHBvaW50cyB3aWxsIGhlbHAgZXhwbGFpbiB0aGVzZSBsaW1pdGF0aW9ucy5cbiAqIEZvciBzaW1wbGljaXR5IG9ubHkgdHdvIGRpcmVjdGl2ZXMgYXJlIHRha2VuIGludG8gYWNjb3VudCwgYnV0IGl0IGlzIGFsc28gYXBwbGljYWJsZSBmb3Igc2V2ZXJhbCBkaXJlY3RpdmVzOlxuICpcbiAqICogKipubyBzY29wZSoqICsgKipubyBzY29wZSoqID0+IFR3byBkaXJlY3RpdmVzIHdoaWNoIGRvbid0IHJlcXVpcmUgdGhlaXIgb3duIHNjb3BlIHdpbGwgdXNlIHRoZWlyIHBhcmVudCdzIHNjb3BlXG4gKiAqICoqY2hpbGQgc2NvcGUqKiArICoqbm8gc2NvcGUqKiA9PiAgQm90aCBkaXJlY3RpdmVzIHdpbGwgc2hhcmUgb25lIHNpbmdsZSBjaGlsZCBzY29wZVxuICogKiAqKmNoaWxkIHNjb3BlKiogKyAqKmNoaWxkIHNjb3BlKiogPT4gIEJvdGggZGlyZWN0aXZlcyB3aWxsIHNoYXJlIG9uZSBzaW5nbGUgY2hpbGQgc2NvcGVcbiAqICogKippc29sYXRlZCBzY29wZSoqICsgKipubyBzY29wZSoqID0+ICBUaGUgaXNvbGF0ZWQgZGlyZWN0aXZlIHdpbGwgdXNlIGl0J3Mgb3duIGNyZWF0ZWQgaXNvbGF0ZWQgc2NvcGUuIFRoZSBvdGhlciBkaXJlY3RpdmUgd2lsbCB1c2VcbiAqIGl0cyBwYXJlbnQncyBzY29wZVxuICogKiAqKmlzb2xhdGVkIHNjb3BlKiogKyAqKmNoaWxkIHNjb3BlKiogPT4gICoqV29uJ3Qgd29yayEqKiBPbmx5IG9uZSBzY29wZSBjYW4gYmUgcmVsYXRlZCB0byBvbmUgZWxlbWVudC4gVGhlcmVmb3JlIHRoZXNlIGRpcmVjdGl2ZXMgY2Fubm90XG4gKiBiZSBhcHBsaWVkIHRvIHRoZSBzYW1lIGVsZW1lbnQuXG4gKiAqICoqaXNvbGF0ZWQgc2NvcGUqKiArICoqaXNvbGF0ZWQgc2NvcGUqKiAgPT4gICoqV29uJ3Qgd29yayEqKiBPbmx5IG9uZSBzY29wZSBjYW4gYmUgcmVsYXRlZCB0byBvbmUgZWxlbWVudC4gVGhlcmVmb3JlIHRoZXNlIGRpcmVjdGl2ZXNcbiAqIGNhbm5vdCBiZSBhcHBsaWVkIHRvIHRoZSBzYW1lIGVsZW1lbnQuXG4gKlxuICpcbiAqICMjIyMgYGJpbmRUb0NvbnRyb2xsZXJgXG4gKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgdG8gYmluZCBzY29wZSBwcm9wZXJ0aWVzIGRpcmVjdGx5IHRvIHRoZSBjb250cm9sbGVyLiBJdCBjYW4gYmUgZWl0aGVyXG4gKiBgdHJ1ZWAgb3IgYW4gb2JqZWN0IGhhc2ggd2l0aCB0aGUgc2FtZSBmb3JtYXQgYXMgdGhlIGBzY29wZWAgcHJvcGVydHkuXG4gKlxuICogV2hlbiBhbiBpc29sYXRlIHNjb3BlIGlzIHVzZWQgZm9yIGEgZGlyZWN0aXZlIChzZWUgYWJvdmUpLCBgYmluZFRvQ29udHJvbGxlcjogdHJ1ZWAgd2lsbFxuICogYWxsb3cgYSBjb21wb25lbnQgdG8gaGF2ZSBpdHMgcHJvcGVydGllcyBib3VuZCB0byB0aGUgY29udHJvbGxlciwgcmF0aGVyIHRoYW4gdG8gc2NvcGUuXG4gKlxuICogQWZ0ZXIgdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkLCB0aGUgaW5pdGlhbCB2YWx1ZXMgb2YgdGhlIGlzb2xhdGUgc2NvcGUgYmluZGluZ3Mgd2lsbCBiZSBib3VuZCB0byB0aGUgY29udHJvbGxlclxuICogcHJvcGVydGllcy4gWW91IGNhbiBhY2Nlc3MgdGhlc2UgYmluZGluZ3Mgb25jZSB0aGV5IGhhdmUgYmVlbiBpbml0aWFsaXplZCBieSBwcm92aWRpbmcgYSBjb250cm9sbGVyIG1ldGhvZCBjYWxsZWRcbiAqIGAkb25Jbml0YCwgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnMgb24gYW4gZWxlbWVudCBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYW5kIGhhZCB0aGVpciBiaW5kaW5nc1xuICogaW5pdGlhbGl6ZWQuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqRGVwcmVjYXRpb24gd2FybmluZzoqKiBpZiBgJGNvbXBpbGVQcm9jdmlkZXIucHJlQXNzaWduQmluZGluZ3NFbmFibGVkKHRydWUpYCB3YXMgY2FsbGVkLCBiaW5kaW5ncyBmb3Igbm9uLUVTNiBjbGFzc1xuICogY29udHJvbGxlcnMgYXJlIGJvdW5kIHRvIGB0aGlzYCBiZWZvcmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgaXMgY2FsbGVkIGJ1dCB0aGlzIHVzZSBpcyBub3cgZGVwcmVjYXRlZC4gUGxlYXNlXG4gKiBwbGFjZSBpbml0aWFsaXphdGlvbiBjb2RlIHRoYXQgcmVsaWVzIHVwb24gYmluZGluZ3MgaW5zaWRlIGEgYCRvbkluaXRgIG1ldGhvZCBvbiB0aGUgY29udHJvbGxlciwgaW5zdGVhZC5cbiAqIDwvZGl2PlxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gc2V0IGBiaW5kVG9Db250cm9sbGVyYCB0byBhbiBvYmplY3QgaGFzaCB3aXRoIHRoZSBzYW1lIGZvcm1hdCBhcyB0aGUgYHNjb3BlYCBwcm9wZXJ0eS5cbiAqIFRoaXMgd2lsbCBzZXQgdXAgdGhlIHNjb3BlIGJpbmRpbmdzIHRvIHRoZSBjb250cm9sbGVyIGRpcmVjdGx5LiBOb3RlIHRoYXQgYHNjb3BlYCBjYW4gc3RpbGwgYmUgdXNlZFxuICogdG8gZGVmaW5lIHdoaWNoIGtpbmQgb2Ygc2NvcGUgaXMgY3JlYXRlZC4gQnkgZGVmYXVsdCwgbm8gc2NvcGUgaXMgY3JlYXRlZC4gVXNlIGBzY29wZToge31gIHRvIGNyZWF0ZSBhbiBpc29sYXRlXG4gKiBzY29wZSAodXNlZnVsIGZvciBjb21wb25lbnQgZGlyZWN0aXZlcykuXG4gKlxuICogSWYgYm90aCBgYmluZFRvQ29udHJvbGxlcmAgYW5kIGBzY29wZWAgYXJlIGRlZmluZWQgYW5kIGhhdmUgb2JqZWN0IGhhc2hlcywgYGJpbmRUb0NvbnRyb2xsZXJgIG92ZXJyaWRlcyBgc2NvcGVgLlxuICpcbiAqXG4gKiAjIyMjIGBjb250cm9sbGVyYFxuICogQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gVGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGJlZm9yZSB0aGVcbiAqIHByZS1saW5raW5nIHBoYXNlIGFuZCBjYW4gYmUgYWNjZXNzZWQgYnkgb3RoZXIgZGlyZWN0aXZlcyAoc2VlXG4gKiBgcmVxdWlyZWAgYXR0cmlidXRlKS4gVGhpcyBhbGxvd3MgdGhlIGRpcmVjdGl2ZXMgdG8gY29tbXVuaWNhdGUgd2l0aCBlYWNoIG90aGVyIGFuZCBhdWdtZW50XG4gKiBlYWNoIG90aGVyJ3MgYmVoYXZpb3IuIFRoZSBjb250cm9sbGVyIGlzIGluamVjdGFibGUgKGFuZCBzdXBwb3J0cyBicmFja2V0IG5vdGF0aW9uKSB3aXRoIHRoZSBmb2xsb3dpbmcgbG9jYWxzOlxuICpcbiAqICogYCRzY29wZWAgLSBDdXJyZW50IHNjb3BlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudFxuICogKiBgJGVsZW1lbnRgIC0gQ3VycmVudCBlbGVtZW50XG4gKiAqIGAkYXR0cnNgIC0gQ3VycmVudCBhdHRyaWJ1dGVzIG9iamVjdCBmb3IgdGhlIGVsZW1lbnRcbiAqICogYCR0cmFuc2NsdWRlYCAtIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uIHByZS1ib3VuZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGU6XG4gKiAgIGBmdW5jdGlvbihbc2NvcGVdLCBjbG9uZUxpbmtpbmdGbiwgZnV0dXJlUGFyZW50RWxlbWVudCwgc2xvdE5hbWUpYDpcbiAqICAgICogYHNjb3BlYDogKG9wdGlvbmFsKSBvdmVycmlkZSB0aGUgc2NvcGUuXG4gKiAgICAqIGBjbG9uZUxpbmtpbmdGbmA6IChvcHRpb25hbCkgYXJndW1lbnQgdG8gY3JlYXRlIGNsb25lcyBvZiB0aGUgb3JpZ2luYWwgdHJhbnNjbHVkZWQgY29udGVudC5cbiAqICAgICogYGZ1dHVyZVBhcmVudEVsZW1lbnRgIChvcHRpb25hbCk6XG4gKiAgICAgICAgKiBkZWZpbmVzIHRoZSBwYXJlbnQgdG8gd2hpY2ggdGhlIGBjbG9uZUxpbmtpbmdGbmAgd2lsbCBhZGQgdGhlIGNsb25lZCBlbGVtZW50cy5cbiAqICAgICAgICAqIGRlZmF1bHQ6IGAkZWxlbWVudC5wYXJlbnQoKWAgcmVzcC4gYCRlbGVtZW50YCBmb3IgYHRyYW5zY2x1ZGU6J2VsZW1lbnQnYCByZXNwLiBgdHJhbnNjbHVkZTp0cnVlYC5cbiAqICAgICAgICAqIG9ubHkgbmVlZGVkIGZvciB0cmFuc2NsdWRlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gbm9uIGh0bWwgZWxlbWVudHMgKGUuZy4gU1ZHIGVsZW1lbnRzKVxuICogICAgICAgICAgYW5kIHdoZW4gdGhlIGBjbG9uZUxpbmtpbmdGbmAgaXMgcGFzc2VkLFxuICogICAgICAgICAgYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBjcmVhdGVkIGFuZCBjbG9uZWQgaW4gYSBzcGVjaWFsIHdheSB3aGVuIHRoZXkgYXJlIGRlZmluZWQgb3V0c2lkZSB0aGVpclxuICogICAgICAgICAgdXN1YWwgY29udGFpbmVycyAoZS5nLiBsaWtlIGA8c3ZnPmApLlxuICogICAgICAgICogU2VlIGFsc28gdGhlIGBkaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2VgIHByb3BlcnR5LlxuICogICAgKiBgc2xvdE5hbWVgOiAob3B0aW9uYWwpIHRoZSBuYW1lIG9mIHRoZSBzbG90IHRvIHRyYW5zY2x1ZGUuIElmIGZhbHN5IChlLmcuIGBudWxsYCwgYHVuZGVmaW5lZGAgb3IgYCcnYClcbiAqICAgICAgdGhlbiB0aGUgZGVmYXVsdCB0cmFuc2NsdXNpb24gaXMgcHJvdmlkZWQuXG4gKiAgICBUaGUgYCR0cmFuc2NsdWRlYCBmdW5jdGlvbiBhbHNvIGhhcyBhIG1ldGhvZCBvbiBpdCwgYCR0cmFuc2NsdWRlLmlzU2xvdEZpbGxlZChzbG90TmFtZSlgLCB3aGljaCByZXR1cm5zXG4gKiAgICBgdHJ1ZWAgaWYgdGhlIHNwZWNpZmllZCBzbG90IGNvbnRhaW5zIGNvbnRlbnQgKGkuZS4gb25lIG9yIG1vcmUgRE9NIG5vZGVzKS5cbiAqXG4gKiAjIyMjIGByZXF1aXJlYFxuICogUmVxdWlyZSBhbm90aGVyIGRpcmVjdGl2ZSBhbmQgaW5qZWN0IGl0cyBjb250cm9sbGVyIGFzIHRoZSBmb3VydGggYXJndW1lbnQgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZVxuICogYHJlcXVpcmVgIHByb3BlcnR5IGNhbiBiZSBhIHN0cmluZywgYW4gYXJyYXkgb3IgYW4gb2JqZWN0OlxuICogKiBhICoqc3RyaW5nKiogY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgZGlyZWN0aXZlIHRvIHBhc3MgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb25cbiAqICogYW4gKiphcnJheSoqIGNvbnRhaW5pbmcgdGhlIG5hbWVzIG9mIGRpcmVjdGl2ZXMgdG8gcGFzcyB0byB0aGUgbGlua2luZyBmdW5jdGlvbi4gVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGVcbiAqIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBiZSBhbiBhcnJheSBvZiBjb250cm9sbGVycyBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgbmFtZXMgaW4gdGhlIGByZXF1aXJlYCBwcm9wZXJ0eVxuICogKiBhbiAqKm9iamVjdCoqIHdob3NlIHByb3BlcnR5IHZhbHVlcyBhcmUgdGhlIG5hbWVzIG9mIHRoZSBkaXJlY3RpdmVzIHRvIHBhc3MgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZSBhcmd1bWVudFxuICogcGFzc2VkIHRvIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHdpbGwgYWxzbyBiZSBhbiBvYmplY3Qgd2l0aCBtYXRjaGluZyBrZXlzLCB3aG9zZSB2YWx1ZXMgd2lsbCBob2xkIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBjb250cm9sbGVycy5cbiAqXG4gKiBJZiB0aGUgYHJlcXVpcmVgIHByb3BlcnR5IGlzIGFuIG9iamVjdCBhbmQgYGJpbmRUb0NvbnRyb2xsZXJgIGlzIHRydXRoeSwgdGhlbiB0aGUgcmVxdWlyZWQgY29udHJvbGxlcnMgYXJlXG4gKiBib3VuZCB0byB0aGUgY29udHJvbGxlciB1c2luZyB0aGUga2V5cyBvZiB0aGUgYHJlcXVpcmVgIHByb3BlcnR5LiBUaGlzIGJpbmRpbmcgb2NjdXJzIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnNcbiAqIGhhdmUgYmVlbiBjb25zdHJ1Y3RlZCBidXQgYmVmb3JlIGAkb25Jbml0YCBpcyBjYWxsZWQuXG4gKiBJZiB0aGUgbmFtZSBvZiB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBpcyB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZSAodGhlIGtleSksIHRoZSBuYW1lIGNhbiBiZVxuICogb21pdHRlZC4gRm9yIGV4YW1wbGUsIGB7cGFyZW50RGlyOiAnXl4nfWAgaXMgZXF1aXZhbGVudCB0byBge3BhcmVudERpcjogJ15ecGFyZW50RGlyJ31gLlxuICogU2VlIHRoZSB7QGxpbmsgJGNvbXBpbGVQcm92aWRlciNjb21wb25lbnR9IGhlbHBlciBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdGhpcyBjYW4gYmUgdXNlZC5cbiAqIElmIG5vIHN1Y2ggcmVxdWlyZWQgZGlyZWN0aXZlKHMpIGNhbiBiZSBmb3VuZCwgb3IgaWYgdGhlIGRpcmVjdGl2ZSBkb2VzIG5vdCBoYXZlIGEgY29udHJvbGxlciwgdGhlbiBhbiBlcnJvciBpc1xuICogcmFpc2VkICh1bmxlc3Mgbm8gbGluayBmdW5jdGlvbiBpcyBzcGVjaWZpZWQgYW5kIHRoZSByZXF1aXJlZCBjb250cm9sbGVycyBhcmUgbm90IGJlaW5nIGJvdW5kIHRvIHRoZSBkaXJlY3RpdmVcbiAqIGNvbnRyb2xsZXIsIGluIHdoaWNoIGNhc2UgZXJyb3IgY2hlY2tpbmcgaXMgc2tpcHBlZCkuIFRoZSBuYW1lIGNhbiBiZSBwcmVmaXhlZCB3aXRoOlxuICpcbiAqICogKG5vIHByZWZpeCkgLSBMb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgb24gdGhlIGN1cnJlbnQgZWxlbWVudC4gVGhyb3cgYW4gZXJyb3IgaWYgbm90IGZvdW5kLlxuICogKiBgP2AgLSBBdHRlbXB0IHRvIGxvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBvciBwYXNzIGBudWxsYCB0byB0aGUgYGxpbmtgIGZuIGlmIG5vdCBmb3VuZC5cbiAqICogYF5gIC0gTG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCBhbmQgaXRzIHBhcmVudHMuIFRocm93IGFuIGVycm9yIGlmIG5vdCBmb3VuZC5cbiAqICogYF5eYCAtIExvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQncyBwYXJlbnRzLiBUaHJvdyBhbiBlcnJvciBpZiBub3QgZm91bmQuXG4gKiAqIGA/XmAgLSBBdHRlbXB0IHRvIGxvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQgYW5kIGl0cyBwYXJlbnRzIG9yIHBhc3NcbiAqICAgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxuICogKiBgP15eYCAtIEF0dGVtcHQgdG8gbG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCdzIHBhcmVudHMsIG9yIHBhc3NcbiAqICAgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxuICpcbiAqXG4gKiAjIyMjIGBjb250cm9sbGVyQXNgXG4gKiBJZGVudGlmaWVyIG5hbWUgZm9yIGEgcmVmZXJlbmNlIHRvIHRoZSBjb250cm9sbGVyIGluIHRoZSBkaXJlY3RpdmUncyBzY29wZS5cbiAqIFRoaXMgYWxsb3dzIHRoZSBjb250cm9sbGVyIHRvIGJlIHJlZmVyZW5jZWQgZnJvbSB0aGUgZGlyZWN0aXZlIHRlbXBsYXRlLiBUaGlzIGlzIGVzcGVjaWFsbHlcbiAqIHVzZWZ1bCB3aGVuIGEgZGlyZWN0aXZlIGlzIHVzZWQgYXMgY29tcG9uZW50LCBpLmUuIHdpdGggYW4gYGlzb2xhdGVgIHNjb3BlLiBJdCdzIGFsc28gcG9zc2libGVcbiAqIHRvIHVzZSBpdCBpbiBhIGRpcmVjdGl2ZSB3aXRob3V0IGFuIGBpc29sYXRlYCAvIGBuZXdgIHNjb3BlLCBidXQgeW91IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGVcbiAqIGBjb250cm9sbGVyQXNgIHJlZmVyZW5jZSBtaWdodCBvdmVyd3JpdGUgYSBwcm9wZXJ0eSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBwYXJlbnQgc2NvcGUuXG4gKlxuICpcbiAqICMjIyMgYHJlc3RyaWN0YFxuICogU3RyaW5nIG9mIHN1YnNldCBvZiBgRUFDTWAgd2hpY2ggcmVzdHJpY3RzIHRoZSBkaXJlY3RpdmUgdG8gYSBzcGVjaWZpYyBkaXJlY3RpdmVcbiAqIGRlY2xhcmF0aW9uIHN0eWxlLiBJZiBvbWl0dGVkLCB0aGUgZGVmYXVsdHMgKGVsZW1lbnRzIGFuZCBhdHRyaWJ1dGVzKSBhcmUgdXNlZC5cbiAqXG4gKiAqIGBFYCAtIEVsZW1lbnQgbmFtZSAoZGVmYXVsdCk6IGA8bXktZGlyZWN0aXZlPjwvbXktZGlyZWN0aXZlPmBcbiAqICogYEFgIC0gQXR0cmlidXRlIChkZWZhdWx0KTogYDxkaXYgbXktZGlyZWN0aXZlPVwiZXhwXCI+PC9kaXY+YFxuICogKiBgQ2AgLSBDbGFzczogYDxkaXYgY2xhc3M9XCJteS1kaXJlY3RpdmU6IGV4cDtcIj48L2Rpdj5gXG4gKiAqIGBNYCAtIENvbW1lbnQ6IGA8IS0tIGRpcmVjdGl2ZTogbXktZGlyZWN0aXZlIGV4cCAtLT5gXG4gKlxuICpcbiAqICMjIyMgYHRlbXBsYXRlTmFtZXNwYWNlYFxuICogU3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZG9jdW1lbnQgdHlwZSB1c2VkIGJ5IHRoZSBtYXJrdXAgaW4gdGhlIHRlbXBsYXRlLlxuICogQW5ndWxhckpTIG5lZWRzIHRoaXMgaW5mb3JtYXRpb24gYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBiZSBjcmVhdGVkIGFuZCBjbG9uZWRcbiAqIGluIGEgc3BlY2lhbCB3YXkgd2hlbiB0aGV5IGFyZSBkZWZpbmVkIG91dHNpZGUgdGhlaXIgdXN1YWwgY29udGFpbmVycyBsaWtlIGA8c3ZnPmAgYW5kIGA8bWF0aD5gLlxuICpcbiAqICogYGh0bWxgIC0gQWxsIHJvb3Qgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIGFyZSBIVE1MLiBSb290IG5vZGVzIG1heSBhbHNvIGJlXG4gKiAgIHRvcC1sZXZlbCBlbGVtZW50cyBzdWNoIGFzIGA8c3ZnPmAgb3IgYDxtYXRoPmAuXG4gKiAqIGBzdmdgIC0gVGhlIHJvb3Qgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIGFyZSBTVkcgZWxlbWVudHMgKGV4Y2x1ZGluZyBgPG1hdGg+YCkuXG4gKiAqIGBtYXRoYCAtIFRoZSByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgTWF0aE1MIGVsZW1lbnRzIChleGNsdWRpbmcgYDxzdmc+YCkuXG4gKlxuICogSWYgbm8gYHRlbXBsYXRlTmFtZXNwYWNlYCBpcyBzcGVjaWZpZWQsIHRoZW4gdGhlIG5hbWVzcGFjZSBpcyBjb25zaWRlcmVkIHRvIGJlIGBodG1sYC5cbiAqXG4gKiAjIyMjIGB0ZW1wbGF0ZWBcbiAqIEhUTUwgbWFya3VwIHRoYXQgbWF5OlxuICogKiBSZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCAoZGVmYXVsdCkuXG4gKiAqIFJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgaXRzZWxmIChpZiBgcmVwbGFjZWAgaXMgdHJ1ZSAtIERFUFJFQ0FURUQpLlxuICogKiBXcmFwIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCAoaWYgYHRyYW5zY2x1ZGVgIGlzIHRydWUpLlxuICpcbiAqIFZhbHVlIG1heSBiZTpcbiAqXG4gKiAqIEEgc3RyaW5nLiBGb3IgZXhhbXBsZSBgPGRpdiByZWQtb24taG92ZXI+e3tkZWxldGVfc3RyfX08L2Rpdj5gLlxuICogKiBBIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHR3byBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgXG4gKiAgIGZ1bmN0aW9uIGFwaSBiZWxvdykgYW5kIHJldHVybnMgYSBzdHJpbmcgdmFsdWUuXG4gKlxuICpcbiAqICMjIyMgYHRlbXBsYXRlVXJsYFxuICogVGhpcyBpcyBzaW1pbGFyIHRvIGB0ZW1wbGF0ZWAgYnV0IHRoZSB0ZW1wbGF0ZSBpcyBsb2FkZWQgZnJvbSB0aGUgc3BlY2lmaWVkIFVSTCwgYXN5bmNocm9ub3VzbHkuXG4gKlxuICogQmVjYXVzZSB0ZW1wbGF0ZSBsb2FkaW5nIGlzIGFzeW5jaHJvbm91cyB0aGUgY29tcGlsZXIgd2lsbCBzdXNwZW5kIGNvbXBpbGF0aW9uIG9mIGRpcmVjdGl2ZXMgb24gdGhhdCBlbGVtZW50XG4gKiBmb3IgbGF0ZXIgd2hlbiB0aGUgdGVtcGxhdGUgaGFzIGJlZW4gcmVzb2x2ZWQuICBJbiB0aGUgbWVhbnRpbWUgaXQgd2lsbCBjb250aW51ZSB0byBjb21waWxlIGFuZCBsaW5rXG4gKiBzaWJsaW5nIGFuZCBwYXJlbnQgZWxlbWVudHMgYXMgdGhvdWdoIHRoaXMgZWxlbWVudCBoYWQgbm90IGNvbnRhaW5lZCBhbnkgZGlyZWN0aXZlcy5cbiAqXG4gKiBUaGUgY29tcGlsZXIgZG9lcyBub3Qgc3VzcGVuZCB0aGUgZW50aXJlIGNvbXBpbGF0aW9uIHRvIHdhaXQgZm9yIHRlbXBsYXRlcyB0byBiZSBsb2FkZWQgYmVjYXVzZSB0aGlzXG4gKiB3b3VsZCByZXN1bHQgaW4gdGhlIHdob2xlIGFwcCBcInN0YWxsaW5nXCIgdW50aWwgYWxsIHRlbXBsYXRlcyBhcmUgbG9hZGVkIGFzeW5jaHJvbm91c2x5IC0gZXZlbiBpbiB0aGVcbiAqIGNhc2Ugd2hlbiBvbmx5IG9uZSBkZWVwbHkgbmVzdGVkIGRpcmVjdGl2ZSBoYXMgYHRlbXBsYXRlVXJsYC5cbiAqXG4gKiBUZW1wbGF0ZSBsb2FkaW5nIGlzIGFzeW5jaHJvbm91cyBldmVuIGlmIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiBwcmVsb2FkZWQgaW50byB0aGUge0BsaW5rICR0ZW1wbGF0ZUNhY2hlfVxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSBgdGVtcGxhdGVVcmxgIGFzIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgVVJMIG9yIGFzIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdHdvXG4gKiBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgIGZ1bmN0aW9uIGFwaSBiZWxvdykgYW5kIHJldHVybnNcbiAqIGEgc3RyaW5nIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgdXJsLiAgSW4gZWl0aGVyIGNhc2UsIHRoZSB0ZW1wbGF0ZSBVUkwgaXMgcGFzc2VkIHRocm91Z2gge0BsaW5rXG4gKiAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybCAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybH0uXG4gKlxuICpcbiAqICMjIyMgYHJlcGxhY2VgICgqREVQUkVDQVRFRCopXG4gKlxuICogYHJlcGxhY2VgIHdpbGwgYmUgcmVtb3ZlZCBpbiBuZXh0IG1ham9yIHJlbGVhc2UgLSBpLmUuIHYyLjApLlxuICpcbiAqIFNwZWNpZmllcyB3aGF0IHRoZSB0ZW1wbGF0ZSBzaG91bGQgcmVwbGFjZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqXG4gKiAqIGB0cnVlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuXG4gKiAqIGBmYWxzZWAgLSB0aGUgdGVtcGxhdGUgd2lsbCByZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cbiAqXG4gKiBUaGUgcmVwbGFjZW1lbnQgcHJvY2VzcyBtaWdyYXRlcyBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgLyBjbGFzc2VzIGZyb20gdGhlIG9sZCBlbGVtZW50IHRvIHRoZSBuZXdcbiAqIG9uZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI3RlbXBsYXRlLWV4cGFuZGluZy1kaXJlY3RpdmVcbiAqIERpcmVjdGl2ZXMgR3VpZGV9IGZvciBhbiBleGFtcGxlLlxuICpcbiAqIFRoZXJlIGFyZSB2ZXJ5IGZldyBzY2VuYXJpb3Mgd2hlcmUgZWxlbWVudCByZXBsYWNlbWVudCBpcyByZXF1aXJlZCBmb3IgdGhlIGFwcGxpY2F0aW9uIGZ1bmN0aW9uLFxuICogdGhlIG1haW4gb25lIGJlaW5nIHJldXNhYmxlIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIHVzZWQgd2l0aGluIFNWRyBjb250ZXh0c1xuICogKGJlY2F1c2UgU1ZHIGRvZXNuJ3Qgd29yayB3aXRoIGN1c3RvbSBlbGVtZW50cyBpbiB0aGUgRE9NIHRyZWUpLlxuICpcbiAqICMjIyMgYHRyYW5zY2x1ZGVgXG4gKiBFeHRyYWN0IHRoZSBjb250ZW50cyBvZiB0aGUgZWxlbWVudCB3aGVyZSB0aGUgZGlyZWN0aXZlIGFwcGVhcnMgYW5kIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBkaXJlY3RpdmUuXG4gKiBUaGUgY29udGVudHMgYXJlIGNvbXBpbGVkIGFuZCBwcm92aWRlZCB0byB0aGUgZGlyZWN0aXZlIGFzIGEgKip0cmFuc2NsdXNpb24gZnVuY3Rpb24qKi4gU2VlIHRoZVxuICoge0BsaW5rICRjb21waWxlI3RyYW5zY2x1c2lvbiBUcmFuc2NsdXNpb259IHNlY3Rpb24gYmVsb3cuXG4gKlxuICpcbiAqICMjIyMgYGNvbXBpbGVgXG4gKlxuICogYGBganNcbiAqICAgZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBkZWFscyB3aXRoIHRyYW5zZm9ybWluZyB0aGUgdGVtcGxhdGUgRE9NLiBTaW5jZSBtb3N0IGRpcmVjdGl2ZXMgZG8gbm90IGRvXG4gKiB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiwgaXQgaXMgbm90IHVzZWQgb2Z0ZW4uIFRoZSBjb21waWxlIGZ1bmN0aW9uIHRha2VzIHRoZSBmb2xsb3dpbmcgYXJndW1lbnRzOlxuICpcbiAqICAgKiBgdEVsZW1lbnRgIC0gdGVtcGxhdGUgZWxlbWVudCAtIFRoZSBlbGVtZW50IHdoZXJlIHRoZSBkaXJlY3RpdmUgaGFzIGJlZW4gZGVjbGFyZWQuIEl0IGlzXG4gKiAgICAgc2FmZSB0byBkbyB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiBvbiB0aGUgZWxlbWVudCBhbmQgY2hpbGQgZWxlbWVudHMgb25seS5cbiAqXG4gKiAgICogYHRBdHRyc2AgLSB0ZW1wbGF0ZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBjb21waWxlIGZ1bmN0aW9ucy5cbiAqXG4gKiAgICogYHRyYW5zY2x1ZGVgIC0gIFsqREVQUkVDQVRFRCohXSBBIHRyYW5zY2x1ZGUgbGlua2luZyBmdW5jdGlvbjogYGZ1bmN0aW9uKHNjb3BlLCBjbG9uZUxpbmtpbmdGbilgXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGUgdGVtcGxhdGUgaW5zdGFuY2UgYW5kIHRoZSBsaW5rIGluc3RhbmNlIG1heSBiZSBkaWZmZXJlbnQgb2JqZWN0cyBpZiB0aGUgdGVtcGxhdGUgaGFzXG4gKiBiZWVuIGNsb25lZC4gRm9yIHRoaXMgcmVhc29uIGl0IGlzICoqbm90Kiogc2FmZSB0byBkbyBhbnl0aGluZyBvdGhlciB0aGFuIERPTSB0cmFuc2Zvcm1hdGlvbnMgdGhhdFxuICogYXBwbHkgdG8gYWxsIGNsb25lZCBET00gbm9kZXMgd2l0aGluIHRoZSBjb21waWxlIGZ1bmN0aW9uLiBTcGVjaWZpY2FsbHksIERPTSBsaXN0ZW5lciByZWdpc3RyYXRpb25cbiAqIHNob3VsZCBiZSBkb25lIGluIGEgbGlua2luZyBmdW5jdGlvbiByYXRoZXIgdGhhbiBpbiBhIGNvbXBpbGUgZnVuY3Rpb24uXG4gKiA8L2Rpdj5cblxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBjYW5ub3QgaGFuZGxlIGRpcmVjdGl2ZXMgdGhhdCByZWN1cnNpdmVseSB1c2UgdGhlbXNlbHZlcyBpbiB0aGVpclxuICogb3duIHRlbXBsYXRlcyBvciBjb21waWxlIGZ1bmN0aW9ucy4gQ29tcGlsaW5nIHRoZXNlIGRpcmVjdGl2ZXMgcmVzdWx0cyBpbiBhbiBpbmZpbml0ZSBsb29wIGFuZFxuICogc3RhY2sgb3ZlcmZsb3cgZXJyb3JzLlxuICpcbiAqIFRoaXMgY2FuIGJlIGF2b2lkZWQgYnkgbWFudWFsbHkgdXNpbmcgJGNvbXBpbGUgaW4gdGhlIHBvc3RMaW5rIGZ1bmN0aW9uIHRvIGltcGVyYXRpdmVseSBjb21waWxlXG4gKiBhIGRpcmVjdGl2ZSdzIHRlbXBsYXRlIGluc3RlYWQgb2YgcmVseWluZyBvbiBhdXRvbWF0aWMgdGVtcGxhdGUgY29tcGlsYXRpb24gdmlhIGB0ZW1wbGF0ZWAgb3JcbiAqIGB0ZW1wbGF0ZVVybGAgZGVjbGFyYXRpb24gb3IgbWFudWFsIGNvbXBpbGF0aW9uIGluc2lkZSB0aGUgY29tcGlsZSBmdW5jdGlvbi5cbiAqIDwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqICoqTm90ZToqKiBUaGUgYHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBjb21waWxlIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQsIGFzIGl0XG4gKiAgIGUuZy4gZG9lcyBub3Qga25vdyBhYm91dCB0aGUgcmlnaHQgb3V0ZXIgc2NvcGUuIFBsZWFzZSB1c2UgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gdGhhdCBpcyBwYXNzZWRcbiAqICAgdG8gdGhlIGxpbmsgZnVuY3Rpb24gaW5zdGVhZC5cbiAqIDwvZGl2PlxuXG4gKiBBIGNvbXBpbGUgZnVuY3Rpb24gY2FuIGhhdmUgYSByZXR1cm4gdmFsdWUgd2hpY2ggY2FuIGJlIGVpdGhlciBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdC5cbiAqXG4gKiAqIHJldHVybmluZyBhIChwb3N0LWxpbmspIGZ1bmN0aW9uIC0gaXMgZXF1aXZhbGVudCB0byByZWdpc3RlcmluZyB0aGUgbGlua2luZyBmdW5jdGlvbiB2aWEgdGhlXG4gKiAgIGBsaW5rYCBwcm9wZXJ0eSBvZiB0aGUgY29uZmlnIG9iamVjdCB3aGVuIHRoZSBjb21waWxlIGZ1bmN0aW9uIGlzIGVtcHR5LlxuICpcbiAqICogcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGZ1bmN0aW9uKHMpIHJlZ2lzdGVyZWQgdmlhIGBwcmVgIGFuZCBgcG9zdGAgcHJvcGVydGllcyAtIGFsbG93cyB5b3UgdG9cbiAqICAgY29udHJvbCB3aGVuIGEgbGlua2luZyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS4gU2VlIGluZm8gYWJvdXRcbiAqICAgcHJlLWxpbmtpbmcgYW5kIHBvc3QtbGlua2luZyBmdW5jdGlvbnMgYmVsb3cuXG4gKlxuICpcbiAqICMjIyMgYGxpbmtgXG4gKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgb25seSBpZiB0aGUgYGNvbXBpbGVgIHByb3BlcnR5IGlzIG5vdCBkZWZpbmVkLlxuICpcbiAqIGBgYGpzXG4gKiAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIsIHRyYW5zY2x1ZGVGbikgeyAuLi4gfVxuICogYGBgXG4gKlxuICogVGhlIGxpbmsgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIHJlZ2lzdGVyaW5nIERPTSBsaXN0ZW5lcnMgYXMgd2VsbCBhcyB1cGRhdGluZyB0aGUgRE9NLiBJdCBpc1xuICogZXhlY3V0ZWQgYWZ0ZXIgdGhlIHRlbXBsYXRlIGhhcyBiZWVuIGNsb25lZC4gVGhpcyBpcyB3aGVyZSBtb3N0IG9mIHRoZSBkaXJlY3RpdmUgbG9naWMgd2lsbCBiZVxuICogcHV0LlxuICpcbiAqICAgKiBgc2NvcGVgIC0ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IC0gVGhlIHNjb3BlIHRvIGJlIHVzZWQgYnkgdGhlXG4gKiAgICAgZGlyZWN0aXZlIGZvciByZWdpc3RlcmluZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlc30uXG4gKlxuICogICAqIGBpRWxlbWVudGAgLSBpbnN0YW5jZSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgd2hlcmUgdGhlIGRpcmVjdGl2ZSBpcyB0byBiZSB1c2VkLiBJdCBpcyBzYWZlIHRvXG4gKiAgICAgbWFuaXB1bGF0ZSB0aGUgY2hpbGRyZW4gb2YgdGhlIGVsZW1lbnQgb25seSBpbiBgcG9zdExpbmtgIGZ1bmN0aW9uIHNpbmNlIHRoZSBjaGlsZHJlbiBoYXZlXG4gKiAgICAgYWxyZWFkeSBiZWVuIGxpbmtlZC5cbiAqXG4gKiAgICogYGlBdHRyc2AgLSBpbnN0YW5jZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBsaW5raW5nIGZ1bmN0aW9ucy5cbiAqXG4gKiAgICogYGNvbnRyb2xsZXJgIC0gdGhlIGRpcmVjdGl2ZSdzIHJlcXVpcmVkIGNvbnRyb2xsZXIgaW5zdGFuY2UocykgLSBJbnN0YW5jZXMgYXJlIHNoYXJlZFxuICogICAgIGFtb25nIGFsbCBkaXJlY3RpdmVzLCB3aGljaCBhbGxvd3MgdGhlIGRpcmVjdGl2ZXMgdG8gdXNlIHRoZSBjb250cm9sbGVycyBhcyBhIGNvbW11bmljYXRpb25cbiAqICAgICBjaGFubmVsLiBUaGUgZXhhY3QgdmFsdWUgZGVwZW5kcyBvbiB0aGUgZGlyZWN0aXZlJ3MgYHJlcXVpcmVgIHByb3BlcnR5OlxuICogICAgICAgKiBubyBjb250cm9sbGVyKHMpIHJlcXVpcmVkOiB0aGUgZGlyZWN0aXZlJ3Mgb3duIGNvbnRyb2xsZXIsIG9yIGB1bmRlZmluZWRgIGlmIGl0IGRvZXNuJ3QgaGF2ZSBvbmVcbiAqICAgICAgICogYHN0cmluZ2A6IHRoZSBjb250cm9sbGVyIGluc3RhbmNlXG4gKiAgICAgICAqIGBhcnJheWA6IGFycmF5IG9mIGNvbnRyb2xsZXIgaW5zdGFuY2VzXG4gKlxuICogICAgIElmIGEgcmVxdWlyZWQgY29udHJvbGxlciBjYW5ub3QgYmUgZm91bmQsIGFuZCBpdCBpcyBvcHRpb25hbCwgdGhlIGluc3RhbmNlIGlzIGBudWxsYCxcbiAqICAgICBvdGhlcndpc2UgdGhlIHtAbGluayBlcnJvcjokY29tcGlsZTpjdHJlcSBNaXNzaW5nIFJlcXVpcmVkIENvbnRyb2xsZXJ9IGVycm9yIGlzIHRocm93bi5cbiAqXG4gKiAgICAgTm90ZSB0aGF0IHlvdSBjYW4gYWxzbyByZXF1aXJlIHRoZSBkaXJlY3RpdmUncyBvd24gY29udHJvbGxlciAtIGl0IHdpbGwgYmUgbWFkZSBhdmFpbGFibGUgbGlrZVxuICogICAgIGFueSBvdGhlciBjb250cm9sbGVyLlxuICpcbiAqICAgKiBgdHJhbnNjbHVkZUZuYCAtIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uIHByZS1ib3VuZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiAgICAgVGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgYCR0cmFuc2NsdWRlYCBwYXJhbWV0ZXIgb2YgZGlyZWN0aXZlIGNvbnRyb2xsZXJzLFxuICogICAgIHNlZSB7QGxpbmsgbmcuJGNvbXBpbGUjLWNvbnRyb2xsZXItIHRoZSBjb250cm9sbGVyIHNlY3Rpb24gZm9yIGRldGFpbHN9LlxuICogICAgIGBmdW5jdGlvbihbc2NvcGVdLCBjbG9uZUxpbmtpbmdGbiwgZnV0dXJlUGFyZW50RWxlbWVudClgLlxuICpcbiAqICMjIyMgUHJlLWxpbmtpbmcgZnVuY3Rpb25cbiAqXG4gKiBFeGVjdXRlZCBiZWZvcmUgdGhlIGNoaWxkIGVsZW1lbnRzIGFyZSBsaW5rZWQuIE5vdCBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBzaW5jZSB0aGVcbiAqIGNvbXBpbGVyIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBmYWlsIHRvIGxvY2F0ZSB0aGUgY29ycmVjdCBlbGVtZW50cyBmb3IgbGlua2luZy5cbiAqXG4gKiAjIyMjIFBvc3QtbGlua2luZyBmdW5jdGlvblxuICpcbiAqIEV4ZWN1dGVkIGFmdGVyIHRoZSBjaGlsZCBlbGVtZW50cyBhcmUgbGlua2VkLlxuICpcbiAqIE5vdGUgdGhhdCBjaGlsZCBlbGVtZW50cyB0aGF0IGNvbnRhaW4gYHRlbXBsYXRlVXJsYCBkaXJlY3RpdmVzIHdpbGwgbm90IGhhdmUgYmVlbiBjb21waWxlZFxuICogYW5kIGxpbmtlZCBzaW5jZSB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd25cbiAqIGNvbXBpbGF0aW9uIGFuZCBsaW5raW5nIGhhcyBiZWVuIHN1c3BlbmRlZCB1bnRpbCB0aGF0IG9jY3Vycy5cbiAqXG4gKiBJdCBpcyBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBpbiB0aGUgcG9zdC1saW5raW5nIGZ1bmN0aW9uIG9uIGVsZW1lbnRzIHRoYXQgYXJlIG5vdCB3YWl0aW5nXG4gKiBmb3IgdGhlaXIgYXN5bmMgdGVtcGxhdGVzIHRvIGJlIHJlc29sdmVkLlxuICpcbiAqXG4gKiAjIyMgVHJhbnNjbHVzaW9uXG4gKlxuICogVHJhbnNjbHVzaW9uIGlzIHRoZSBwcm9jZXNzIG9mIGV4dHJhY3RpbmcgYSBjb2xsZWN0aW9uIG9mIERPTSBlbGVtZW50cyBmcm9tIG9uZSBwYXJ0IG9mIHRoZSBET00gYW5kXG4gKiBjb3B5aW5nIHRoZW0gdG8gYW5vdGhlciBwYXJ0IG9mIHRoZSBET00sIHdoaWxlIG1haW50YWluaW5nIHRoZWlyIGNvbm5lY3Rpb24gdG8gdGhlIG9yaWdpbmFsIEFuZ3VsYXJKU1xuICogc2NvcGUgZnJvbSB3aGVyZSB0aGV5IHdlcmUgdGFrZW4uXG4gKlxuICogVHJhbnNjbHVzaW9uIGlzIHVzZWQgKG9mdGVuIHdpdGgge0BsaW5rIG5nVHJhbnNjbHVkZX0pIHRvIGluc2VydCB0aGVcbiAqIG9yaWdpbmFsIGNvbnRlbnRzIG9mIGEgZGlyZWN0aXZlJ3MgZWxlbWVudCBpbnRvIGEgc3BlY2lmaWVkIHBsYWNlIGluIHRoZSB0ZW1wbGF0ZSBvZiB0aGUgZGlyZWN0aXZlLlxuICogVGhlIGJlbmVmaXQgb2YgdHJhbnNjbHVzaW9uLCBvdmVyIHNpbXBseSBtb3ZpbmcgdGhlIERPTSBlbGVtZW50cyBtYW51YWxseSwgaXMgdGhhdCB0aGUgdHJhbnNjbHVkZWRcbiAqIGNvbnRlbnQgaGFzIGFjY2VzcyB0byB0aGUgcHJvcGVydGllcyBvbiB0aGUgc2NvcGUgZnJvbSB3aGljaCBpdCB3YXMgdGFrZW4sIGV2ZW4gaWYgdGhlIGRpcmVjdGl2ZVxuICogaGFzIGlzb2xhdGVkIHNjb3BlLlxuICogU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI2NyZWF0aW5nLWEtZGlyZWN0aXZlLXRoYXQtd3JhcHMtb3RoZXItZWxlbWVudHMgRGlyZWN0aXZlcyBHdWlkZX0uXG4gKlxuICogVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgdGhlIHdpZGdldCB0byBoYXZlIHByaXZhdGUgc3RhdGUgZm9yIGl0cyB0ZW1wbGF0ZSwgd2hpbGUgdGhlIHRyYW5zY2x1ZGVkXG4gKiBjb250ZW50IGhhcyBhY2Nlc3MgdG8gaXRzIG9yaWdpbmF0aW5nIHNjb3BlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogV2hlbiB0ZXN0aW5nIGFuIGVsZW1lbnQgdHJhbnNjbHVkZSBkaXJlY3RpdmUgeW91IG11c3Qgbm90IHBsYWNlIHRoZSBkaXJlY3RpdmUgYXQgdGhlIHJvb3Qgb2YgdGhlXG4gKiBET00gZnJhZ21lbnQgdGhhdCBpcyBiZWluZyBjb21waWxlZC4gU2VlIHtAbGluayBndWlkZS91bml0LXRlc3RpbmcjdGVzdGluZy10cmFuc2NsdXNpb24tZGlyZWN0aXZlc1xuICogVGVzdGluZyBUcmFuc2NsdXNpb24gRGlyZWN0aXZlc30uXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUga2luZHMgb2YgdHJhbnNjbHVzaW9uIGRlcGVuZGluZyB1cG9uIHdoZXRoZXIgeW91IHdhbnQgdG8gdHJhbnNjbHVkZSBqdXN0IHRoZSBjb250ZW50cyBvZiB0aGVcbiAqIGRpcmVjdGl2ZSdzIGVsZW1lbnQsIHRoZSBlbnRpcmUgZWxlbWVudCBvciBtdWx0aXBsZSBwYXJ0cyBvZiB0aGUgZWxlbWVudCBjb250ZW50czpcbiAqXG4gKiAqIGB0cnVlYCAtIHRyYW5zY2x1ZGUgdGhlIGNvbnRlbnQgKGkuZS4gdGhlIGNoaWxkIG5vZGVzKSBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cbiAqICogYCdlbGVtZW50J2AgLSB0cmFuc2NsdWRlIHRoZSB3aG9sZSBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCBpbmNsdWRpbmcgYW55IGRpcmVjdGl2ZXMgb24gdGhpc1xuICogICBlbGVtZW50IHRoYXQgZGVmaW5lZCBhdCBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdGhpcyBkaXJlY3RpdmUuIFdoZW4gdXNlZCwgdGhlIGB0ZW1wbGF0ZWBcbiAqICAgcHJvcGVydHkgaXMgaWdub3JlZC5cbiAqICogKipgey4uLn1gIChhbiBvYmplY3QgaGFzaCk6KiogLSBtYXAgZWxlbWVudHMgb2YgdGhlIGNvbnRlbnQgb250byB0cmFuc2NsdXNpb24gXCJzbG90c1wiIGluIHRoZSB0ZW1wbGF0ZS5cbiAqXG4gKiAqKk11bHQtc2xvdCB0cmFuc2NsdXNpb24qKiBpcyBkZWNsYXJlZCBieSBwcm92aWRpbmcgYW4gb2JqZWN0IGZvciB0aGUgYHRyYW5zY2x1ZGVgIHByb3BlcnR5LlxuICpcbiAqIFRoaXMgb2JqZWN0IGlzIGEgbWFwIHdoZXJlIHRoZSBrZXlzIGFyZSB0aGUgbmFtZSBvZiB0aGUgc2xvdCB0byBmaWxsIGFuZCB0aGUgdmFsdWUgaXMgYW4gZWxlbWVudCBzZWxlY3RvclxuICogdXNlZCB0byBtYXRjaCB0aGUgSFRNTCB0byB0aGUgc2xvdC4gVGhlIGVsZW1lbnQgc2VsZWN0b3Igc2hvdWxkIGJlIGluIG5vcm1hbGl6ZWQgZm9ybSAoZS5nLiBgbXlFbGVtZW50YClcbiAqIGFuZCB3aWxsIG1hdGNoIHRoZSBzdGFuZGFyZCBlbGVtZW50IHZhcmlhbnRzIChlLmcuIGBteS1lbGVtZW50YCwgYG15OmVsZW1lbnRgLCBgZGF0YS1teS1lbGVtZW50YCwgZXRjKS5cbiAqXG4gKiBGb3IgZnVydGhlciBpbmZvcm1hdGlvbiBjaGVjayBvdXQgdGhlIGd1aWRlIG9uIHtAbGluayBndWlkZS9kaXJlY3RpdmUjbWF0Y2hpbmctZGlyZWN0aXZlcyBNYXRjaGluZyBEaXJlY3RpdmVzfVxuICpcbiAqIElmIHRoZSBlbGVtZW50IHNlbGVjdG9yIGlzIHByZWZpeGVkIHdpdGggYSBgP2AgdGhlbiB0aGF0IHNsb3QgaXMgb3B0aW9uYWwuXG4gKlxuICogRm9yIGV4YW1wbGUsIHRoZSB0cmFuc2NsdWRlIG9iamVjdCBgeyBzbG90QTogJz9teUN1c3RvbUVsZW1lbnQnIH1gIG1hcHMgYDxteS1jdXN0b20tZWxlbWVudD5gIGVsZW1lbnRzIHRvXG4gKiB0aGUgYHNsb3RBYCBzbG90LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgdmlhIHRoZSBgJHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIG9yIHZpYSB0aGUge0BsaW5rIG5nVHJhbnNjbHVkZX0gZGlyZWN0aXZlLlxuICpcbiAqIFNsb3RzIHRoYXQgYXJlIG5vdCBtYXJrZWQgYXMgb3B0aW9uYWwgKGA/YCkgd2lsbCB0cmlnZ2VyIGEgY29tcGlsZSB0aW1lIGVycm9yIGlmIHRoZXJlIGFyZSBubyBtYXRjaGluZyBlbGVtZW50c1xuICogaW4gdGhlIHRyYW5zY2x1ZGUgY29udGVudC4gSWYgeW91IHdpc2ggdG8ga25vdyBpZiBhbiBvcHRpb25hbCBzbG90IHdhcyBmaWxsZWQgd2l0aCBjb250ZW50LCB0aGVuIHlvdSBjYW4gY2FsbFxuICogYCR0cmFuc2NsdWRlLmlzU2xvdEZpbGxlZChzbG90TmFtZSlgIG9uIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIHBhc3NlZCB0byB0aGUgZGlyZWN0aXZlJ3MgbGluayBmdW5jdGlvbiBhbmRcbiAqIGluamVjdGFibGUgaW50byB0aGUgZGlyZWN0aXZlJ3MgY29udHJvbGxlci5cbiAqXG4gKlxuICogIyMjIyBUcmFuc2NsdXNpb24gRnVuY3Rpb25zXG4gKlxuICogV2hlbiBhIGRpcmVjdGl2ZSByZXF1ZXN0cyB0cmFuc2NsdXNpb24sIHRoZSBjb21waWxlciBleHRyYWN0cyBpdHMgY29udGVudHMgYW5kIHByb3ZpZGVzIGEgKip0cmFuc2NsdXNpb25cbiAqIGZ1bmN0aW9uKiogdG8gdGhlIGRpcmVjdGl2ZSdzIGBsaW5rYCBmdW5jdGlvbiBhbmQgYGNvbnRyb2xsZXJgLiBUaGlzIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiBpcyBhIHNwZWNpYWxcbiAqICoqbGlua2luZyBmdW5jdGlvbioqIHRoYXQgd2lsbCByZXR1cm4gdGhlIGNvbXBpbGVkIGNvbnRlbnRzIGxpbmtlZCB0byBhIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqIElmIHlvdSBhcmUganVzdCB1c2luZyB7QGxpbmsgbmdUcmFuc2NsdWRlfSB0aGVuIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgZnVuY3Rpb24sIHNpbmNlXG4gKiBuZ1RyYW5zY2x1ZGUgd2lsbCBkZWFsIHdpdGggaXQgZm9yIHVzLlxuICogPC9kaXY+XG4gKlxuICogSWYgeW91IHdhbnQgdG8gbWFudWFsbHkgY29udHJvbCB0aGUgaW5zZXJ0aW9uIGFuZCByZW1vdmFsIG9mIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50IGluIHlvdXIgZGlyZWN0aXZlXG4gKiB0aGVuIHlvdSBtdXN0IHVzZSB0aGlzIHRyYW5zY2x1ZGUgZnVuY3Rpb24uIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGl0IHJldHVybnMgYSBhIGpxTGl0ZS9KUXVlcnlcbiAqIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBjb21waWxlZCBET00sIHdoaWNoIGlzIGxpbmtlZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiB5b3UgY2FuIHBhc3MgaW4gYSAqKmNsb25lIGF0dGFjaCBmdW5jdGlvbioqLiBUaGlzIGZ1bmN0aW9uIGFjY2VwdHNcbiAqIHR3byBwYXJhbWV0ZXJzLCBgZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7IC4uLiB9YCwgd2hlcmUgdGhlIGBjbG9uZWAgaXMgYSBmcmVzaCBjb21waWxlZCBjb3B5IG9mIHlvdXIgdHJhbnNjbHVkZWRcbiAqIGNvbnRlbnQgYW5kIHRoZSBgc2NvcGVgIGlzIHRoZSBuZXdseSBjcmVhdGVkIHRyYW5zY2x1c2lvbiBzY29wZSwgd2hpY2ggdGhlIGNsb25lIHdpbGwgYmUgbGlua2VkIHRvLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKkJlc3QgUHJhY3RpY2UqKjogQWx3YXlzIHByb3ZpZGUgYSBgY2xvbmVGbmAgKGNsb25lIGF0dGFjaCBmdW5jdGlvbikgd2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1ZGUgZnVuY3Rpb25cbiAqIHNpbmNlIHlvdSB0aGVuIGdldCBhIGZyZXNoIGNsb25lIG9mIHRoZSBvcmlnaW5hbCBET00gYW5kIGFsc28gaGF2ZSBhY2Nlc3MgdG8gdGhlIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBJdCBpcyBub3JtYWwgcHJhY3RpY2UgdG8gYXR0YWNoIHlvdXIgdHJhbnNjbHVkZWQgY29udGVudCAoYGNsb25lYCkgdG8gdGhlIERPTSBpbnNpZGUgeW91ciAqKmNsb25lXG4gKiBhdHRhY2ggZnVuY3Rpb24qKjpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHRyYW5zY2x1ZGVkQ29udGVudCwgdHJhbnNjbHVzaW9uU2NvcGU7XG4gKlxuICogJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7XG4gKiAgIGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcbiAqICAgdHJhbnNjbHVkZWRDb250ZW50ID0gY2xvbmU7XG4gKiAgIHRyYW5zY2x1c2lvblNjb3BlID0gc2NvcGU7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIExhdGVyLCBpZiB5b3Ugd2FudCB0byByZW1vdmUgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgZnJvbSB5b3VyIERPTSB0aGVuIHlvdSBzaG91bGQgYWxzbyBkZXN0cm95IHRoZVxuICogYXNzb2NpYXRlZCB0cmFuc2NsdXNpb24gc2NvcGU6XG4gKlxuICogYGBganNcbiAqIHRyYW5zY2x1ZGVkQ29udGVudC5yZW1vdmUoKTtcbiAqIHRyYW5zY2x1c2lvblNjb3BlLiRkZXN0cm95KCk7XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipCZXN0IFByYWN0aWNlKio6IGlmIHlvdSBpbnRlbmQgdG8gYWRkIGFuZCByZW1vdmUgdHJhbnNjbHVkZWQgY29udGVudCBtYW51YWxseSBpbiB5b3VyIGRpcmVjdGl2ZVxuICogKGJ5IGNhbGxpbmcgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBET00gYW5kIGNhbGxpbmcgYGVsZW1lbnQucmVtb3ZlKClgIHRvIHJlbW92ZSBpdCksXG4gKiB0aGVuIHlvdSBhcmUgYWxzbyByZXNwb25zaWJsZSBmb3IgY2FsbGluZyBgJGRlc3Ryb3lgIG9uIHRoZSB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGUgYnVpbHQtaW4gRE9NIG1hbmlwdWxhdGlvbiBkaXJlY3RpdmVzLCBzdWNoIGFzIHtAbGluayBuZ0lmfSwge0BsaW5rIG5nU3dpdGNofSBhbmQge0BsaW5rIG5nUmVwZWF0fVxuICogYXV0b21hdGljYWxseSBkZXN0cm95IHRoZWlyIHRyYW5zY2x1ZGVkIGNsb25lcyBhcyBuZWNlc3Nhcnkgc28geW91IGRvIG5vdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgaWZcbiAqIHlvdSBhcmUgc2ltcGx5IHVzaW5nIHtAbGluayBuZ1RyYW5zY2x1ZGV9IHRvIGluamVjdCB0aGUgdHJhbnNjbHVzaW9uIGludG8geW91ciBkaXJlY3RpdmUuXG4gKlxuICpcbiAqICMjIyMgVHJhbnNjbHVzaW9uIFNjb3Blc1xuICpcbiAqIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGl0IHJldHVybnMgYSBET00gZnJhZ21lbnQgdGhhdCBpcyBwcmUtYm91bmQgdG8gYSAqKnRyYW5zY2x1c2lvblxuICogc2NvcGUqKi4gVGhpcyBzY29wZSBpcyBzcGVjaWFsLCBpbiB0aGF0IGl0IGlzIGEgY2hpbGQgb2YgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIChhbmQgc28gZ2V0cyBkZXN0cm95ZWRcbiAqIHdoZW4gdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIGdldHMgZGVzdHJveWVkKSBidXQgaXQgaW5oZXJpdHMgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHNjb3BlIGZyb20gd2hpY2ggaXRcbiAqIHdhcyB0YWtlbi5cbiAqXG4gKiBGb3IgZXhhbXBsZSBjb25zaWRlciBhIGRpcmVjdGl2ZSB0aGF0IHVzZXMgdHJhbnNjbHVzaW9uIGFuZCBpc29sYXRlZCBzY29wZS4gVGhlIERPTSBoaWVyYXJjaHkgbWlnaHQgbG9va1xuICogbGlrZSB0aGlzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgbmctYXBwPlxuICogICA8ZGl2IGlzb2xhdGU+XG4gKiAgICAgPGRpdiB0cmFuc2NsdXNpb24+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBUaGUgYCRwYXJlbnRgIHNjb3BlIGhpZXJhcmNoeSB3aWxsIGxvb2sgbGlrZSB0aGlzOlxuICpcbiAgIGBgYFxuICAgLSAkcm9vdFNjb3BlXG4gICAgIC0gaXNvbGF0ZVxuICAgICAgIC0gdHJhbnNjbHVzaW9uXG4gICBgYGBcbiAqXG4gKiBidXQgdGhlIHNjb3BlcyB3aWxsIGluaGVyaXQgcHJvdG90eXBpY2FsbHkgZnJvbSBkaWZmZXJlbnQgc2NvcGVzIHRvIHRoZWlyIGAkcGFyZW50YC5cbiAqXG4gICBgYGBcbiAgIC0gJHJvb3RTY29wZVxuICAgICAtIHRyYW5zY2x1c2lvblxuICAgLSBpc29sYXRlXG4gICBgYGBcbiAqXG4gKlxuICogIyMjIEF0dHJpYnV0ZXNcbiAqXG4gKiBUaGUge0BsaW5rIG5nLiRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIEF0dHJpYnV0ZXN9IG9iamVjdCAtIHBhc3NlZCBhcyBhIHBhcmFtZXRlciBpbiB0aGVcbiAqIGBsaW5rKClgIG9yIGBjb21waWxlKClgIGZ1bmN0aW9ucy4gSXQgaGFzIGEgdmFyaWV0eSBvZiB1c2VzLlxuICpcbiAqICogKkFjY2Vzc2luZyBub3JtYWxpemVkIGF0dHJpYnV0ZSBuYW1lczoqIERpcmVjdGl2ZXMgbGlrZSAnbmdCaW5kJyBjYW4gYmUgZXhwcmVzc2VkIGluIG1hbnkgd2F5czpcbiAqICAgJ25nOmJpbmQnLCBgZGF0YS1uZy1iaW5kYCwgb3IgJ3gtbmctYmluZCcuIFRoZSBhdHRyaWJ1dGVzIG9iamVjdCBhbGxvd3MgZm9yIG5vcm1hbGl6ZWQgYWNjZXNzXG4gKiAgIHRvIHRoZSBhdHRyaWJ1dGVzLlxuICpcbiAqICogKkRpcmVjdGl2ZSBpbnRlci1jb21tdW5pY2F0aW9uOiogQWxsIGRpcmVjdGl2ZXMgc2hhcmUgdGhlIHNhbWUgaW5zdGFuY2Ugb2YgdGhlIGF0dHJpYnV0ZXNcbiAqICAgb2JqZWN0IHdoaWNoIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byB1c2UgdGhlIGF0dHJpYnV0ZXMgb2JqZWN0IGFzIGludGVyIGRpcmVjdGl2ZVxuICogICBjb21tdW5pY2F0aW9uLlxuICpcbiAqICogKlN1cHBvcnRzIGludGVycG9sYXRpb246KiBJbnRlcnBvbGF0aW9uIGF0dHJpYnV0ZXMgYXJlIGFzc2lnbmVkIHRvIHRoZSBhdHRyaWJ1dGUgb2JqZWN0XG4gKiAgIGFsbG93aW5nIG90aGVyIGRpcmVjdGl2ZXMgdG8gcmVhZCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlLlxuICpcbiAqICogKk9ic2VydmluZyBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlczoqIFVzZSBgJG9ic2VydmVgIHRvIG9ic2VydmUgdGhlIHZhbHVlIGNoYW5nZXMgb2YgYXR0cmlidXRlc1xuICogICB0aGF0IGNvbnRhaW4gaW50ZXJwb2xhdGlvbiAoZS5nLiBgc3JjPVwie3tiYXJ9fVwiYCkuIE5vdCBvbmx5IGlzIHRoaXMgdmVyeSBlZmZpY2llbnQgYnV0IGl0J3MgYWxzb1xuICogICB0aGUgb25seSB3YXkgdG8gZWFzaWx5IGdldCB0aGUgYWN0dWFsIHZhbHVlIGJlY2F1c2UgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlIHRoZSBpbnRlcnBvbGF0aW9uXG4gKiAgIGhhc24ndCBiZWVuIGV2YWx1YXRlZCB5ZXQgYW5kIHNvIHRoZSB2YWx1ZSBpcyBhdCB0aGlzIHRpbWUgc2V0IHRvIGB1bmRlZmluZWRgLlxuICpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBsaW5raW5nRm4oc2NvcGUsIGVsbSwgYXR0cnMsIGN0cmwpIHtcbiAqICAgLy8gZ2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWVcbiAqICAgY29uc29sZS5sb2coYXR0cnMubmdNb2RlbCk7XG4gKlxuICogICAvLyBjaGFuZ2UgdGhlIGF0dHJpYnV0ZVxuICogICBhdHRycy4kc2V0KCduZ01vZGVsJywgJ25ldyB2YWx1ZScpO1xuICpcbiAqICAgLy8gb2JzZXJ2ZSBjaGFuZ2VzIHRvIGludGVycG9sYXRlZCBhdHRyaWJ1dGVcbiAqICAgYXR0cnMuJG9ic2VydmUoJ25nTW9kZWwnLCBmdW5jdGlvbih2YWx1ZSkge1xuICogICAgIGNvbnNvbGUubG9nKCduZ01vZGVsIGhhcyBjaGFuZ2VkIHZhbHVlIHRvICcgKyB2YWx1ZSk7XG4gKiAgIH0pO1xuICogfVxuICogYGBgXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGUqKjogVHlwaWNhbGx5IGRpcmVjdGl2ZXMgYXJlIHJlZ2lzdGVyZWQgd2l0aCBgbW9kdWxlLmRpcmVjdGl2ZWAuIFRoZSBleGFtcGxlIGJlbG93IGlzXG4gKiB0byBpbGx1c3RyYXRlIGhvdyBgJGNvbXBpbGVgIHdvcmtzLlxuICogPC9kaXY+XG4gKlxuIDxleGFtcGxlIG1vZHVsZT1cImNvbXBpbGVFeGFtcGxlXCIgbmFtZT1cImNvbXBpbGVcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgPHNjcmlwdD5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdjb21waWxlRXhhbXBsZScsIFtdLCBmdW5jdGlvbigkY29tcGlsZVByb3ZpZGVyKSB7XG4gICAgICAgIC8vIGNvbmZpZ3VyZSBuZXcgJ2NvbXBpbGUnIGRpcmVjdGl2ZSBieSBwYXNzaW5nIGEgZGlyZWN0aXZlXG4gICAgICAgIC8vIGZhY3RvcnkgZnVuY3Rpb24uIFRoZSBmYWN0b3J5IGZ1bmN0aW9uIGluamVjdHMgdGhlICckY29tcGlsZSdcbiAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoJ2NvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xuICAgICAgICAgIC8vIGRpcmVjdGl2ZSBmYWN0b3J5IGNyZWF0ZXMgYSBsaW5rIGZ1bmN0aW9uXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgICBmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAvLyB3YXRjaCB0aGUgJ2NvbXBpbGUnIGV4cHJlc3Npb24gZm9yIGNoYW5nZXNcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGV2YWwoYXR0cnMuY29tcGlsZSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgJ2NvbXBpbGUnIGV4cHJlc3Npb24gY2hhbmdlc1xuICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBpdCBpbnRvIHRoZSBjdXJyZW50IERPTVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbCh2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb21waWxlIHRoZSBuZXcgRE9NIGFuZCBsaW5rIGl0IHRvIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gc2NvcGUuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogd2Ugb25seSBjb21waWxlIC5jaGlsZE5vZGVzIHNvIHRoYXRcbiAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBnZXQgaW50byBpbmZpbml0ZSBsb29wIGNvbXBpbGluZyBvdXJzZWx2ZXNcbiAgICAgICAgICAgICAgICAkY29tcGlsZShlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignR3JlZXRlckNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUubmFtZSA9ICdBbmd1bGFySlMnO1xuICAgICAgICAkc2NvcGUuaHRtbCA9ICdIZWxsbyB7e25hbWV9fSc7XG4gICAgICB9XSk7XG4gICAgPC9zY3JpcHQ+XG4gICAgPGRpdiBuZy1jb250cm9sbGVyPVwiR3JlZXRlckNvbnRyb2xsZXJcIj5cbiAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5hbWVcIj4gPGJyLz5cbiAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cImh0bWxcIj48L3RleHRhcmVhPiA8YnIvPlxuICAgICAgPGRpdiBjb21waWxlPVwiaHRtbFwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICBpdCgnc2hvdWxkIGF1dG8gY29tcGlsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgIHZhciB0ZXh0YXJlYSA9ICQoJ3RleHRhcmVhJyk7XG4gICAgICAgdmFyIG91dHB1dCA9ICQoJ2Rpdltjb21waWxlXScpO1xuICAgICAgIC8vIFRoZSBpbml0aWFsIHN0YXRlIHJlYWRzICdIZWxsbyBBbmd1bGFySlMnLlxuICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBBbmd1bGFySlMnKTtcbiAgICAgICB0ZXh0YXJlYS5jbGVhcigpO1xuICAgICAgIHRleHRhcmVhLnNlbmRLZXlzKCd7e25hbWV9fSEnKTtcbiAgICAgICBleHBlY3Qob3V0cHV0LmdldFRleHQoKSkudG9CZSgnQW5ndWxhckpTIScpO1xuICAgICB9KTtcbiAgIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RE9NRWxlbWVudH0gZWxlbWVudCBFbGVtZW50IG9yIEhUTUwgc3RyaW5nIHRvIGNvbXBpbGUgaW50byBhIHRlbXBsYXRlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGUgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGRpcmVjdGl2ZXMgLSBERVBSRUNBVEVELlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqICoqTm90ZToqKiBQYXNzaW5nIGEgYHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIHRvIHRoZSAkY29tcGlsZSBmdW5jdGlvbiBpcyBkZXByZWNhdGVkLCBhcyBpdFxuICogICBlLmcuIHdpbGwgbm90IHVzZSB0aGUgcmlnaHQgb3V0ZXIgc2NvcGUuIFBsZWFzZSBwYXNzIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGFzIGFcbiAqICAgYHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuYCB0byB0aGUgbGluayBmdW5jdGlvbiBpbnN0ZWFkLlxuICogPC9kaXY+XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFByaW9yaXR5IG9ubHkgYXBwbHkgZGlyZWN0aXZlcyBsb3dlciB0aGFuIGdpdmVuIHByaW9yaXR5IChPbmx5IGVmZmVjdHMgdGhlXG4gKiAgICAgICAgICAgICAgICAgcm9vdCBlbGVtZW50KHMpLCBub3QgdGhlaXIgY2hpbGRyZW4pXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc2NvcGUsIGNsb25lQXR0YWNoRm49LCBvcHRpb25zPSl9IGEgbGluayBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIGJpbmQgdGVtcGxhdGVcbiAqIChhIERPTSBlbGVtZW50L3RyZWUpIHRvIGEgc2NvcGUuIFdoZXJlOlxuICpcbiAqICAqIGBzY29wZWAgLSBBIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIFNjb3BlfSB0byBiaW5kIHRvLlxuICogICogYGNsb25lQXR0YWNoRm5gIC0gSWYgYGNsb25lQXR0YWNoRm5gIGlzIHByb3ZpZGVkLCB0aGVuIHRoZSBsaW5rIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlXG4gKiAgYHRlbXBsYXRlYCBhbmQgY2FsbCB0aGUgYGNsb25lQXR0YWNoRm5gIGZ1bmN0aW9uIGFsbG93aW5nIHRoZSBjYWxsZXIgdG8gYXR0YWNoIHRoZVxuICogIGNsb25lZCBlbGVtZW50cyB0byB0aGUgRE9NIGRvY3VtZW50IGF0IHRoZSBhcHByb3ByaWF0ZSBwbGFjZS4gVGhlIGBjbG9uZUF0dGFjaEZuYCBpc1xuICogIGNhbGxlZCBhczogPGJyLz4gYGNsb25lQXR0YWNoRm4oY2xvbmVkRWxlbWVudCwgc2NvcGUpYCB3aGVyZTpcbiAqXG4gKiAgICAgICogYGNsb25lZEVsZW1lbnRgIC0gaXMgYSBjbG9uZSBvZiB0aGUgb3JpZ2luYWwgYGVsZW1lbnRgIHBhc3NlZCBpbnRvIHRoZSBjb21waWxlci5cbiAqICAgICAgKiBgc2NvcGVgIC0gaXMgdGhlIGN1cnJlbnQgc2NvcGUgd2l0aCB3aGljaCB0aGUgbGlua2luZyBmdW5jdGlvbiBpcyB3b3JraW5nIHdpdGguXG4gKlxuICogICogYG9wdGlvbnNgIC0gQW4gb3B0aW9uYWwgb2JqZWN0IGhhc2ggd2l0aCBsaW5raW5nIG9wdGlvbnMuIElmIGBvcHRpb25zYCBpcyBwcm92aWRlZCwgdGhlbiB0aGUgZm9sbG93aW5nXG4gKiAga2V5cyBtYXkgYmUgdXNlZCB0byBjb250cm9sIGxpbmtpbmcgYmVoYXZpb3I6XG4gKlxuICogICAgICAqIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgLSB0aGUgdHJhbnNjbHVkZSBmdW5jdGlvbiBtYWRlIGF2YWlsYWJsZSB0b1xuICogICAgICAgIGRpcmVjdGl2ZXM7IGlmIGdpdmVuLCBpdCB3aWxsIGJlIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBsaW5rIGZ1bmN0aW9ucyBvZlxuICogICAgICAgIGRpcmVjdGl2ZXMgZm91bmQgaW4gYGVsZW1lbnRgIGR1cmluZyBjb21waWxhdGlvbi5cbiAqICAgICAgKiBgdHJhbnNjbHVkZUNvbnRyb2xsZXJzYCAtIGFuIG9iamVjdCBoYXNoIHdpdGgga2V5cyB0aGF0IG1hcCBjb250cm9sbGVyIG5hbWVzXG4gKiAgICAgICAgdG8gYSBoYXNoIHdpdGggdGhlIGtleSBgaW5zdGFuY2VgLCB3aGljaCBtYXBzIHRvIHRoZSBjb250cm9sbGVyIGluc3RhbmNlO1xuICogICAgICAgIGlmIGdpdmVuLCBpdCB3aWxsIG1ha2UgdGhlIGNvbnRyb2xsZXJzIGF2YWlsYWJsZSB0byBkaXJlY3RpdmVzIG9uIHRoZSBjb21waWxlTm9kZTpcbiAqICAgICAgICBgYGBcbiAqICAgICAgICB7XG4gKiAgICAgICAgICBwYXJlbnQ6IHtcbiAqICAgICAgICAgICAgaW5zdGFuY2U6IHBhcmVudENvbnRyb2xsZXJJbnN0YW5jZVxuICogICAgICAgICAgfVxuICogICAgICAgIH1cbiAqICAgICAgICBgYGBcbiAqICAgICAgKiBgZnV0dXJlUGFyZW50RWxlbWVudGAgLSBkZWZpbmVzIHRoZSBwYXJlbnQgdG8gd2hpY2ggdGhlIGBjbG9uZUF0dGFjaEZuYCB3aWxsIGFkZFxuICogICAgICAgIHRoZSBjbG9uZWQgZWxlbWVudHM7IG9ubHkgbmVlZGVkIGZvciB0cmFuc2NsdWRlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gbm9uIGh0bWxcbiAqICAgICAgICBlbGVtZW50cyAoZS5nLiBTVkcgZWxlbWVudHMpLiBTZWUgYWxzbyB0aGUgZGlyZWN0aXZlLmNvbnRyb2xsZXIgcHJvcGVydHkuXG4gKlxuICogQ2FsbGluZyB0aGUgbGlua2luZyBmdW5jdGlvbiByZXR1cm5zIHRoZSBlbGVtZW50IG9mIHRoZSB0ZW1wbGF0ZS4gSXQgaXMgZWl0aGVyIHRoZSBvcmlnaW5hbFxuICogZWxlbWVudCBwYXNzZWQgaW4sIG9yIHRoZSBjbG9uZSBvZiB0aGUgZWxlbWVudCBpZiB0aGUgYGNsb25lQXR0YWNoRm5gIGlzIHByb3ZpZGVkLlxuICpcbiAqIEFmdGVyIGxpbmtpbmcgdGhlIHZpZXcgaXMgbm90IHVwZGF0ZWQgdW50aWwgYWZ0ZXIgYSBjYWxsIHRvICRkaWdlc3Qgd2hpY2ggdHlwaWNhbGx5IGlzIGRvbmUgYnlcbiAqIEFuZ3VsYXJKUyBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIElmIHlvdSBuZWVkIGFjY2VzcyB0byB0aGUgYm91bmQgdmlldywgdGhlcmUgYXJlIHR3byB3YXlzIHRvIGRvIGl0OlxuICpcbiAqIC0gSWYgeW91IGFyZSBub3QgYXNraW5nIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHRvIGNsb25lIHRoZSB0ZW1wbGF0ZSwgY3JlYXRlIHRoZSBET00gZWxlbWVudChzKVxuICogICBiZWZvcmUgeW91IHNlbmQgdGhlbSB0byB0aGUgY29tcGlsZXIgYW5kIGtlZXAgdGhpcyByZWZlcmVuY2UgYXJvdW5kLlxuICogICBgYGBqc1xuICogICAgIHZhciBlbGVtZW50ID0gJGNvbXBpbGUoJzxwPnt7dG90YWx9fTwvcD4nKShzY29wZSk7XG4gKiAgIGBgYFxuICpcbiAqIC0gaWYgb24gdGhlIG90aGVyIGhhbmQsIHlvdSBuZWVkIHRoZSBlbGVtZW50IHRvIGJlIGNsb25lZCwgdGhlIHZpZXcgcmVmZXJlbmNlIGZyb20gdGhlIG9yaWdpbmFsXG4gKiAgIGV4YW1wbGUgd291bGQgbm90IHBvaW50IHRvIHRoZSBjbG9uZSwgYnV0IHJhdGhlciB0byB0aGUgb3JpZ2luYWwgdGVtcGxhdGUgdGhhdCB3YXMgY2xvbmVkLiBJblxuICogICB0aGlzIGNhc2UsIHlvdSBjYW4gYWNjZXNzIHRoZSBjbG9uZSB2aWEgdGhlIGNsb25lQXR0YWNoRm46XG4gKiAgIGBgYGpzXG4gKiAgICAgdmFyIHRlbXBsYXRlRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCgnPHA+e3t0b3RhbH19PC9wPicpLFxuICogICAgICAgICBzY29wZSA9IC4uLi47XG4gKlxuICogICAgIHZhciBjbG9uZWRFbGVtZW50ID0gJGNvbXBpbGUodGVtcGxhdGVFbGVtZW50KShzY29wZSwgZnVuY3Rpb24oY2xvbmVkRWxlbWVudCwgc2NvcGUpIHtcbiAqICAgICAgIC8vYXR0YWNoIHRoZSBjbG9uZSB0byBET00gZG9jdW1lbnQgYXQgdGhlIHJpZ2h0IHBsYWNlXG4gKiAgICAgfSk7XG4gKlxuICogICAgIC8vbm93IHdlIGhhdmUgcmVmZXJlbmNlIHRvIHRoZSBjbG9uZWQgRE9NIHZpYSBgY2xvbmVkRWxlbWVudGBcbiAqICAgYGBgXG4gKlxuICpcbiAqIEZvciBpbmZvcm1hdGlvbiBvbiBob3cgdGhlIGNvbXBpbGVyIHdvcmtzLCBzZWUgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvY29tcGlsZXIgQW5ndWxhckpTIEhUTUwgQ29tcGlsZXJ9IHNlY3Rpb24gb2YgdGhlIERldmVsb3BlciBHdWlkZS5cbiAqXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqICMjIyBEb3VibGUgQ29tcGlsYXRpb25cbiAqXG4gICBEb3VibGUgY29tcGlsYXRpb24gb2NjdXJzIHdoZW4gYW4gYWxyZWFkeSBjb21waWxlZCBwYXJ0IG9mIHRoZSBET00gZ2V0c1xuICAgY29tcGlsZWQgYWdhaW4uIFRoaXMgaXMgYW4gdW5kZXNpcmVkIGVmZmVjdCBhbmQgY2FuIGxlYWQgdG8gbWlzYmVoYXZpbmcgZGlyZWN0aXZlcywgcGVyZm9ybWFuY2UgaXNzdWVzLFxuICAgYW5kIG1lbW9yeSBsZWFrcy4gUmVmZXIgdG8gdGhlIENvbXBpbGVyIEd1aWRlIHtAbGluayBndWlkZS9jb21waWxlciNkb3VibGUtY29tcGlsYXRpb24tYW5kLWhvdy10by1hdm9pZC1pdFxuICAgc2VjdGlvbiBvbiBkb3VibGUgY29tcGlsYXRpb259IGZvciBhbiBpbi1kZXB0aCBleHBsYW5hdGlvbiBhbmQgd2F5cyB0byBhdm9pZCBpdC5cbiAqXG4gKi9cblxudmFyICRjb21waWxlTWluRXJyID0gbWluRXJyKCckY29tcGlsZScpO1xuXG5mdW5jdGlvbiBVTklOSVRJQUxJWkVEX1ZBTFVFKCkge31cbnZhciBfVU5JTklUSUFMSVpFRF9WQUxVRSA9IG5ldyBVTklOSVRJQUxJWkVEX1ZBTFVFKCk7XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKi9cbiRDb21waWxlUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnLCAnJCRzYW5pdGl6ZVVyaVByb3ZpZGVyJ107XG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICRDb21waWxlUHJvdmlkZXIoJHByb3ZpZGUsICQkc2FuaXRpemVVcmlQcm92aWRlcikge1xuICB2YXIgaGFzRGlyZWN0aXZlcyA9IHt9LFxuICAgICAgU3VmZml4ID0gJ0RpcmVjdGl2ZScsXG4gICAgICBDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAgPSAvXlxccypkaXJlY3RpdmU6XFxzKihbXFx3LV0rKVxccysoLiopJC8sXG4gICAgICBDTEFTU19ESVJFQ1RJVkVfUkVHRVhQID0gLygoW1xcdy1dKykoPzo6KFteO10rKSk/Oz8pLyxcbiAgICAgIEFMTF9PUl9OT1RISU5HX0FUVFJTID0gbWFrZU1hcCgnbmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldCcpLFxuICAgICAgUkVRVUlSRV9QUkVGSVhfUkVHRVhQID0gL14oPzooXFxeXFxePyk/KFxcPyk/KFxcXlxcXj8pPyk/LztcblxuICAvLyBSZWY6IGh0dHA6Ly9kZXZlbG9wZXJzLndoYXR3Zy5vcmcvd2ViYXBwYXBpcy5odG1sI2V2ZW50LWhhbmRsZXItaWRsLWF0dHJpYnV0ZXNcbiAgLy8gVGhlIGFzc3VtcHRpb24gaXMgdGhhdCBmdXR1cmUgRE9NIGV2ZW50IGF0dHJpYnV0ZSBuYW1lcyB3aWxsIGJlZ2luIHdpdGhcbiAgLy8gJ29uJyBhbmQgYmUgY29tcG9zZWQgb2Ygb25seSBFbmdsaXNoIGxldHRlcnMuXG4gIHZhciBFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQID0gL14ob25bYS16XSt8Zm9ybWFjdGlvbikkLztcbiAgdmFyIGJpbmRpbmdDYWNoZSA9IGNyZWF0ZU1hcCgpO1xuXG4gIGZ1bmN0aW9uIHBhcnNlSXNvbGF0ZUJpbmRpbmdzKHNjb3BlLCBkaXJlY3RpdmVOYW1lLCBpc0NvbnRyb2xsZXIpIHtcbiAgICB2YXIgTE9DQUxfUkVHRVhQID0gL15cXHMqKFtAJjxdfD0oXFwqPykpKFxcPz8pXFxzKihbXFx3JF0qKVxccyokLztcblxuICAgIHZhciBiaW5kaW5ncyA9IGNyZWF0ZU1hcCgpO1xuXG4gICAgZm9yRWFjaChzY29wZSwgZnVuY3Rpb24oZGVmaW5pdGlvbiwgc2NvcGVOYW1lKSB7XG4gICAgICBpZiAoZGVmaW5pdGlvbiBpbiBiaW5kaW5nQ2FjaGUpIHtcbiAgICAgICAgYmluZGluZ3Nbc2NvcGVOYW1lXSA9IGJpbmRpbmdDYWNoZVtkZWZpbml0aW9uXTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG1hdGNoID0gZGVmaW5pdGlvbi5tYXRjaChMT0NBTF9SRUdFWFApO1xuXG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdpc2NwJyxcbiAgICAgICAgICAgICdJbnZhbGlkIHszfSBmb3IgZGlyZWN0aXZlIFxcJ3swfVxcJy4nICtcbiAgICAgICAgICAgICcgRGVmaW5pdGlvbjogey4uLiB7MX06IFxcJ3syfVxcJyAuLi59JyxcbiAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsIHNjb3BlTmFtZSwgZGVmaW5pdGlvbixcbiAgICAgICAgICAgIChpc0NvbnRyb2xsZXIgPyAnY29udHJvbGxlciBiaW5kaW5ncyBkZWZpbml0aW9uJyA6XG4gICAgICAgICAgICAnaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uJykpO1xuICAgICAgfVxuXG4gICAgICBiaW5kaW5nc1tzY29wZU5hbWVdID0ge1xuICAgICAgICBtb2RlOiBtYXRjaFsxXVswXSxcbiAgICAgICAgY29sbGVjdGlvbjogbWF0Y2hbMl0gPT09ICcqJyxcbiAgICAgICAgb3B0aW9uYWw6IG1hdGNoWzNdID09PSAnPycsXG4gICAgICAgIGF0dHJOYW1lOiBtYXRjaFs0XSB8fCBzY29wZU5hbWVcbiAgICAgIH07XG4gICAgICBpZiAobWF0Y2hbNF0pIHtcbiAgICAgICAgYmluZGluZ0NhY2hlW2RlZmluaXRpb25dID0gYmluZGluZ3Nbc2NvcGVOYW1lXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBiaW5kaW5ncztcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlRGlyZWN0aXZlQmluZGluZ3MoZGlyZWN0aXZlLCBkaXJlY3RpdmVOYW1lKSB7XG4gICAgdmFyIGJpbmRpbmdzID0ge1xuICAgICAgaXNvbGF0ZVNjb3BlOiBudWxsLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogbnVsbFxuICAgIH07XG4gICAgaWYgKGlzT2JqZWN0KGRpcmVjdGl2ZS5zY29wZSkpIHtcbiAgICAgIGlmIChkaXJlY3RpdmUuYmluZFRvQ29udHJvbGxlciA9PT0gdHJ1ZSkge1xuICAgICAgICBiaW5kaW5ncy5iaW5kVG9Db250cm9sbGVyID0gcGFyc2VJc29sYXRlQmluZGluZ3MoZGlyZWN0aXZlLnNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlTmFtZSwgdHJ1ZSk7XG4gICAgICAgIGJpbmRpbmdzLmlzb2xhdGVTY29wZSA9IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluZGluZ3MuaXNvbGF0ZVNjb3BlID0gcGFyc2VJc29sYXRlQmluZGluZ3MoZGlyZWN0aXZlLnNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc09iamVjdChkaXJlY3RpdmUuYmluZFRvQ29udHJvbGxlcikpIHtcbiAgICAgIGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXIgPVxuICAgICAgICAgIHBhcnNlSXNvbGF0ZUJpbmRpbmdzKGRpcmVjdGl2ZS5iaW5kVG9Db250cm9sbGVyLCBkaXJlY3RpdmVOYW1lLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXIgJiYgIWRpcmVjdGl2ZS5jb250cm9sbGVyKSB7XG4gICAgICAvLyBUaGVyZSBpcyBubyBjb250cm9sbGVyXG4gICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbm9jdHJsJyxcbiAgICAgICAgICAgICdDYW5ub3QgYmluZCB0byBjb250cm9sbGVyIHdpdGhvdXQgZGlyZWN0aXZlIFxcJ3swfVxcJ3MgY29udHJvbGxlci4nLFxuICAgICAgICAgICAgZGlyZWN0aXZlTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBiaW5kaW5ncztcbiAgfVxuXG4gIGZ1bmN0aW9uIGFzc2VydFZhbGlkRGlyZWN0aXZlTmFtZShuYW1lKSB7XG4gICAgdmFyIGxldHRlciA9IG5hbWUuY2hhckF0KDApO1xuICAgIGlmICghbGV0dGVyIHx8IGxldHRlciAhPT0gbG93ZXJjYXNlKGxldHRlcikpIHtcbiAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdiYWRkaXInLCAnRGlyZWN0aXZlL0NvbXBvbmVudCBuYW1lIFxcJ3swfVxcJyBpcyBpbnZhbGlkLiBUaGUgZmlyc3QgY2hhcmFjdGVyIG11c3QgYmUgYSBsb3dlcmNhc2UgbGV0dGVyJywgbmFtZSk7XG4gICAgfVxuICAgIGlmIChuYW1lICE9PSBuYW1lLnRyaW0oKSkge1xuICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2JhZGRpcicsXG4gICAgICAgICAgICAnRGlyZWN0aXZlL0NvbXBvbmVudCBuYW1lIFxcJ3swfVxcJyBpcyBpbnZhbGlkLiBUaGUgbmFtZSBzaG91bGQgbm90IGNvbnRhaW4gbGVhZGluZyBvciB0cmFpbGluZyB3aGl0ZXNwYWNlcycsXG4gICAgICAgICAgICBuYW1lKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXREaXJlY3RpdmVSZXF1aXJlKGRpcmVjdGl2ZSkge1xuICAgIHZhciByZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmUgfHwgKGRpcmVjdGl2ZS5jb250cm9sbGVyICYmIGRpcmVjdGl2ZS5uYW1lKTtcblxuICAgIGlmICghaXNBcnJheShyZXF1aXJlKSAmJiBpc09iamVjdChyZXF1aXJlKSkge1xuICAgICAgZm9yRWFjaChyZXF1aXJlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHZhciBtYXRjaCA9IHZhbHVlLm1hdGNoKFJFUVVJUkVfUFJFRklYX1JFR0VYUCk7XG4gICAgICAgIHZhciBuYW1lID0gdmFsdWUuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgIGlmICghbmFtZSkgcmVxdWlyZVtrZXldID0gbWF0Y2hbMF0gKyBrZXk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVxdWlyZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERpcmVjdGl2ZVJlc3RyaWN0KHJlc3RyaWN0LCBuYW1lKSB7XG4gICAgaWYgKHJlc3RyaWN0ICYmICEoaXNTdHJpbmcocmVzdHJpY3QpICYmIC9bRUFDTV0vLnRlc3QocmVzdHJpY3QpKSkge1xuICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2JhZHJlc3RyaWN0JyxcbiAgICAgICAgICAnUmVzdHJpY3QgcHJvcGVydHkgXFwnezB9XFwnIG9mIGRpcmVjdGl2ZSBcXCd7MX1cXCcgaXMgaW52YWxpZCcsXG4gICAgICAgICAgcmVzdHJpY3QsXG4gICAgICAgICAgbmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3RyaWN0IHx8ICdFQSc7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZVxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXIgYSBuZXcgZGlyZWN0aXZlIHdpdGggdGhlIGNvbXBpbGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgTmFtZSBvZiB0aGUgZGlyZWN0aXZlIGluIGNhbWVsLWNhc2UgKGkuZS4gPGNvZGU+bmdCaW5kPC9jb2RlPiB3aGljaFxuICAgKiAgICB3aWxsIG1hdGNoIGFzIDxjb2RlPm5nLWJpbmQ8L2NvZGU+KSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBkaXJlY3RpdmVzIHdoZXJlIHRoZSBrZXlzIGFyZSB0aGVcbiAgICogICAgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmYWN0b3JpZXMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258QXJyYXl9IGRpcmVjdGl2ZUZhY3RvcnkgQW4gaW5qZWN0YWJsZSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbi4gU2VlIHRoZVxuICAgKiAgICB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZSBndWlkZX0gYW5kIHRoZSB7QGxpbmsgJGNvbXBpbGUgY29tcGlsZSBBUEl9IGZvciBtb3JlIGluZm8uXG4gICAqIEByZXR1cm5zIHtuZy4kY29tcGlsZVByb3ZpZGVyfSBTZWxmIGZvciBjaGFpbmluZy5cbiAgICovXG4gIHRoaXMuZGlyZWN0aXZlID0gZnVuY3Rpb24gcmVnaXN0ZXJEaXJlY3RpdmUobmFtZSwgZGlyZWN0aXZlRmFjdG9yeSkge1xuICAgIGFzc2VydEFyZyhuYW1lLCAnbmFtZScpO1xuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdkaXJlY3RpdmUnKTtcbiAgICBpZiAoaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgIGFzc2VydFZhbGlkRGlyZWN0aXZlTmFtZShuYW1lKTtcbiAgICAgIGFzc2VydEFyZyhkaXJlY3RpdmVGYWN0b3J5LCAnZGlyZWN0aXZlRmFjdG9yeScpO1xuICAgICAgaWYgKCFoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGhhc0RpcmVjdGl2ZXNbbmFtZV0gPSBbXTtcbiAgICAgICAgJHByb3ZpZGUuZmFjdG9yeShuYW1lICsgU3VmZml4LCBbJyRpbmplY3RvcicsICckZXhjZXB0aW9uSGFuZGxlcicsXG4gICAgICAgICAgZnVuY3Rpb24oJGluamVjdG9yLCAkZXhjZXB0aW9uSGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvckVhY2goaGFzRGlyZWN0aXZlc1tuYW1lXSwgZnVuY3Rpb24oZGlyZWN0aXZlRmFjdG9yeSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aXZlID0gJGluamVjdG9yLmludm9rZShkaXJlY3RpdmVGYWN0b3J5KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihkaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUgPSB7IGNvbXBpbGU6IHZhbHVlRm4oZGlyZWN0aXZlKSB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWRpcmVjdGl2ZS5jb21waWxlICYmIGRpcmVjdGl2ZS5saW5rKSB7XG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUuY29tcGlsZSA9IHZhbHVlRm4oZGlyZWN0aXZlLmxpbmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucHJpb3JpdHkgPSBkaXJlY3RpdmUucHJpb3JpdHkgfHwgMDtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUubmFtZSA9IGRpcmVjdGl2ZS5uYW1lIHx8IG5hbWU7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLnJlcXVpcmUgPSBnZXREaXJlY3RpdmVSZXF1aXJlKGRpcmVjdGl2ZSk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLnJlc3RyaWN0ID0gZ2V0RGlyZWN0aXZlUmVzdHJpY3QoZGlyZWN0aXZlLnJlc3RyaWN0LCBuYW1lKTtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUuJCRtb2R1bGVOYW1lID0gZGlyZWN0aXZlRmFjdG9yeS4kJG1vZHVsZU5hbWU7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlcztcbiAgICAgICAgICB9XSk7XG4gICAgICB9XG4gICAgICBoYXNEaXJlY3RpdmVzW25hbWVdLnB1c2goZGlyZWN0aXZlRmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvckVhY2gobmFtZSwgcmV2ZXJzZVBhcmFtcyhyZWdpc3RlckRpcmVjdGl2ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2NvbXBvbmVudFxuICAgKiBAbW9kdWxlIG5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgaW4gY2FtZWxDYXNlIChpLmUuIGBteUNvbXBgIHdoaWNoIHdpbGwgbWF0Y2ggYDxteS1jb21wPmApLFxuICAgKiAgICBvciBhbiBvYmplY3QgbWFwIG9mIGNvbXBvbmVudHMgd2hlcmUgdGhlIGtleXMgYXJlIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIENvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdCAoYSBzaW1wbGlmaWVkXG4gICAqICAgIHtAbGluayBuZy4kY29tcGlsZSNkaXJlY3RpdmUtZGVmaW5pdGlvbi1vYmplY3QgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0fSksXG4gICAqICAgIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIChhbGwgb3B0aW9uYWwpOlxuICAgKlxuICAgKiAgICAtIGBjb250cm9sbGVyYCDigJMgYHsoc3RyaW5nfGZ1bmN0aW9uKCk9fWAg4oCTIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmVcbiAgICogICAgICBhc3NvY2lhdGVkIHdpdGggbmV3bHkgY3JlYXRlZCBzY29wZSBvciB0aGUgbmFtZSBvZiBhIHtAbGluayBuZy4kY29tcGlsZSMtY29udHJvbGxlci1cbiAgICogICAgICByZWdpc3RlcmVkIGNvbnRyb2xsZXJ9IGlmIHBhc3NlZCBhcyBhIHN0cmluZy4gQW4gZW1wdHkgYG5vb3BgIGZ1bmN0aW9uIGJ5IGRlZmF1bHQuXG4gICAqICAgIC0gYGNvbnRyb2xsZXJBc2Ag4oCTIGB7c3RyaW5nPX1gIOKAkyBpZGVudGlmaWVyIG5hbWUgZm9yIHRvIHJlZmVyZW5jZSB0aGUgY29udHJvbGxlciBpbiB0aGUgY29tcG9uZW50J3Mgc2NvcGUuXG4gICAqICAgICAgSWYgcHJlc2VudCwgdGhlIGNvbnRyb2xsZXIgd2lsbCBiZSBwdWJsaXNoZWQgdG8gc2NvcGUgdW5kZXIgdGhlIGBjb250cm9sbGVyQXNgIG5hbWUuXG4gICAqICAgICAgSWYgbm90IHByZXNlbnQsIHRoaXMgd2lsbCBkZWZhdWx0IHRvIGJlIGAkY3RybGAuXG4gICAqICAgIC0gYHRlbXBsYXRlYCDigJMgYHtzdHJpbmc9fGZ1bmN0aW9uKCk9fWAg4oCTIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0XG4gICAqICAgICAgcmV0dXJucyBhbiBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nIHdoaWNoIHNob3VsZCBiZSB1c2VkIGFzIHRoZSBjb250ZW50cyBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICogICAgICBFbXB0eSBzdHJpbmcgYnkgZGVmYXVsdC5cbiAgICpcbiAgICogICAgICBJZiBgdGVtcGxhdGVgIGlzIGEgZnVuY3Rpb24sIHRoZW4gaXQgaXMge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSBpbmplY3RlZH0gd2l0aFxuICAgKiAgICAgIHRoZSBmb2xsb3dpbmcgbG9jYWxzOlxuICAgKlxuICAgKiAgICAgIC0gYCRlbGVtZW50YCAtIEN1cnJlbnQgZWxlbWVudFxuICAgKiAgICAgIC0gYCRhdHRyc2AgLSBDdXJyZW50IGF0dHJpYnV0ZXMgb2JqZWN0IGZvciB0aGUgZWxlbWVudFxuICAgKlxuICAgKiAgICAtIGB0ZW1wbGF0ZVVybGAg4oCTIGB7c3RyaW5nPXxmdW5jdGlvbigpPX1gIOKAkyBwYXRoIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHBhdGggdG8gYW4gaHRtbFxuICAgKiAgICAgIHRlbXBsYXRlIHRoYXQgc2hvdWxkIGJlIHVzZWQgIGFzIHRoZSBjb250ZW50cyBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogICAgICBJZiBgdGVtcGxhdGVVcmxgIGlzIGEgZnVuY3Rpb24sIHRoZW4gaXQgaXMge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSBpbmplY3RlZH0gd2l0aFxuICAgKiAgICAgIHRoZSBmb2xsb3dpbmcgbG9jYWxzOlxuICAgKlxuICAgKiAgICAgIC0gYCRlbGVtZW50YCAtIEN1cnJlbnQgZWxlbWVudFxuICAgKiAgICAgIC0gYCRhdHRyc2AgLSBDdXJyZW50IGF0dHJpYnV0ZXMgb2JqZWN0IGZvciB0aGUgZWxlbWVudFxuICAgKlxuICAgKiAgICAtIGBiaW5kaW5nc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBkZWZpbmVzIGJpbmRpbmdzIGJldHdlZW4gRE9NIGF0dHJpYnV0ZXMgYW5kIGNvbXBvbmVudCBwcm9wZXJ0aWVzLlxuICAgKiAgICAgIENvbXBvbmVudCBwcm9wZXJ0aWVzIGFyZSBhbHdheXMgYm91bmQgdG8gdGhlIGNvbXBvbmVudCBjb250cm9sbGVyIGFuZCBub3QgdG8gdGhlIHNjb3BlLlxuICAgKiAgICAgIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGUjLWJpbmR0b2NvbnRyb2xsZXItIGBiaW5kVG9Db250cm9sbGVyYH0uXG4gICAqICAgIC0gYHRyYW5zY2x1ZGVgIOKAkyBge2Jvb2xlYW49fWAg4oCTIHdoZXRoZXIge0BsaW5rICRjb21waWxlI3RyYW5zY2x1c2lvbiBjb250ZW50IHRyYW5zY2x1c2lvbn0gaXMgZW5hYmxlZC5cbiAgICogICAgICBEaXNhYmxlZCBieSBkZWZhdWx0LlxuICAgKiAgICAtIGByZXF1aXJlYCAtIGB7T2JqZWN0PHN0cmluZywgc3RyaW5nPj19YCAtIHJlcXVpcmVzIHRoZSBjb250cm9sbGVycyBvZiBvdGhlciBkaXJlY3RpdmVzIGFuZCBiaW5kcyB0aGVtIHRvXG4gICAqICAgICAgdGhpcyBjb21wb25lbnQncyBjb250cm9sbGVyLiBUaGUgb2JqZWN0IGtleXMgc3BlY2lmeSB0aGUgcHJvcGVydHkgbmFtZXMgdW5kZXIgd2hpY2ggdGhlIHJlcXVpcmVkXG4gICAqICAgICAgY29udHJvbGxlcnMgKG9iamVjdCB2YWx1ZXMpIHdpbGwgYmUgYm91bmQuIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGUjLXJlcXVpcmUtIGByZXF1aXJlYH0uXG4gICAqICAgIC0gYCQuLi5gIOKAkyBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYXR0YWNoIHRvIHRoZSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbiBhbmQgdGhlIGNvbnRyb2xsZXJcbiAgICogICAgICBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gKFRoaXMgaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IHJvdXRlciB0byBhbm5vdGF0ZSlcbiAgICpcbiAgICogQHJldHVybnMge25nLiRjb21waWxlUHJvdmlkZXJ9IHRoZSBjb21waWxlIHByb3ZpZGVyIGl0c2VsZiwgZm9yIGNoYWluaW5nIG9mIGZ1bmN0aW9uIGNhbGxzLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXIgYSAqKmNvbXBvbmVudCBkZWZpbml0aW9uKiogd2l0aCB0aGUgY29tcGlsZXIuIFRoaXMgaXMgYSBzaG9ydGhhbmQgZm9yIHJlZ2lzdGVyaW5nIGEgc3BlY2lhbFxuICAgKiB0eXBlIG9mIGRpcmVjdGl2ZSwgd2hpY2ggcmVwcmVzZW50cyBhIHNlbGYtY29udGFpbmVkIFVJIGNvbXBvbmVudCBpbiB5b3VyIGFwcGxpY2F0aW9uLiBTdWNoIGNvbXBvbmVudHNcbiAgICogYXJlIGFsd2F5cyBpc29sYXRlZCAoaS5lLiBgc2NvcGU6IHt9YCkgYW5kIGFyZSBhbHdheXMgcmVzdHJpY3RlZCB0byBlbGVtZW50cyAoaS5lLiBgcmVzdHJpY3Q6ICdFJ2ApLlxuICAgKlxuICAgKiBDb21wb25lbnQgZGVmaW5pdGlvbnMgYXJlIHZlcnkgc2ltcGxlIGFuZCBkbyBub3QgcmVxdWlyZSBhcyBtdWNoIGNvbmZpZ3VyYXRpb24gYXMgZGVmaW5pbmcgZ2VuZXJhbFxuICAgKiBkaXJlY3RpdmVzLiBDb21wb25lbnQgZGVmaW5pdGlvbnMgdXN1YWxseSBjb25zaXN0IG9ubHkgb2YgYSB0ZW1wbGF0ZSBhbmQgYSBjb250cm9sbGVyIGJhY2tpbmcgaXQuXG4gICAqXG4gICAqIEluIG9yZGVyIHRvIG1ha2UgdGhlIGRlZmluaXRpb24gZWFzaWVyLCBjb21wb25lbnRzIGVuZm9yY2UgYmVzdCBwcmFjdGljZXMgbGlrZSB1c2Ugb2YgYGNvbnRyb2xsZXJBc2AsXG4gICAqIGBiaW5kVG9Db250cm9sbGVyYC4gVGhleSBhbHdheXMgaGF2ZSAqKmlzb2xhdGUgc2NvcGUqKiBhbmQgYXJlIHJlc3RyaWN0ZWQgdG8gZWxlbWVudHMuXG4gICAqXG4gICAqIEhlcmUgYXJlIGEgZmV3IGV4YW1wbGVzIG9mIGhvdyB5b3Ugd291bGQgdXN1YWxseSBkZWZpbmUgY29tcG9uZW50czpcbiAgICpcbiAgICogYGBganNcbiAgICogICB2YXIgbXlNb2QgPSBhbmd1bGFyLm1vZHVsZSguLi4pO1xuICAgKiAgIG15TW9kLmNvbXBvbmVudCgnbXlDb21wJywge1xuICAgKiAgICAgdGVtcGxhdGU6ICc8ZGl2Pk15IG5hbWUgaXMge3skY3RybC5uYW1lfX08L2Rpdj4nLFxuICAgKiAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gICAqICAgICAgIHRoaXMubmFtZSA9ICdzaGFoYXInO1xuICAgKiAgICAgfVxuICAgKiAgIH0pO1xuICAgKlxuICAgKiAgIG15TW9kLmNvbXBvbmVudCgnbXlDb21wJywge1xuICAgKiAgICAgdGVtcGxhdGU6ICc8ZGl2Pk15IG5hbWUgaXMge3skY3RybC5uYW1lfX08L2Rpdj4nLFxuICAgKiAgICAgYmluZGluZ3M6IHtuYW1lOiAnQCd9XG4gICAqICAgfSk7XG4gICAqXG4gICAqICAgbXlNb2QuY29tcG9uZW50KCdteUNvbXAnLCB7XG4gICAqICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL215LWNvbXAuaHRtbCcsXG4gICAqICAgICBjb250cm9sbGVyOiAnTXlDdHJsJyxcbiAgICogICAgIGNvbnRyb2xsZXJBczogJ2N0cmwnLFxuICAgKiAgICAgYmluZGluZ3M6IHtuYW1lOiAnQCd9XG4gICAqICAgfSk7XG4gICAqXG4gICAqIGBgYFxuICAgKiBGb3IgbW9yZSBleGFtcGxlcywgYW5kIGFuIGluLWRlcHRoIGd1aWRlLCBzZWUgdGhlIHtAbGluayBndWlkZS9jb21wb25lbnQgY29tcG9uZW50IGd1aWRlfS5cbiAgICpcbiAgICogPGJyIC8+XG4gICAqIFNlZSBhbHNvIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSAkY29tcGlsZVByb3ZpZGVyLmRpcmVjdGl2ZSgpfS5cbiAgICovXG4gIHRoaXMuY29tcG9uZW50ID0gZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgb3B0aW9ucykge1xuICAgIGlmICghaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgIGZvckVhY2gobmFtZSwgcmV2ZXJzZVBhcmFtcyhiaW5kKHRoaXMsIHJlZ2lzdGVyQ29tcG9uZW50KSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIGNvbnRyb2xsZXIgPSBvcHRpb25zLmNvbnRyb2xsZXIgfHwgZnVuY3Rpb24oKSB7fTtcblxuICAgIGZ1bmN0aW9uIGZhY3RvcnkoJGluamVjdG9yKSB7XG4gICAgICBmdW5jdGlvbiBtYWtlSW5qZWN0YWJsZShmbikge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikgfHwgaXNBcnJheShmbikpIHtcbiAgICAgICAgICByZXR1cm4gLyoqIEB0aGlzICovIGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHtcbiAgICAgICAgICAgIHJldHVybiAkaW5qZWN0b3IuaW52b2tlKGZuLCB0aGlzLCB7JGVsZW1lbnQ6IHRFbGVtZW50LCAkYXR0cnM6IHRBdHRyc30pO1xuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGZuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB0ZW1wbGF0ZSA9ICghb3B0aW9ucy50ZW1wbGF0ZSAmJiAhb3B0aW9ucy50ZW1wbGF0ZVVybCA/ICcnIDogb3B0aW9ucy50ZW1wbGF0ZSk7XG4gICAgICB2YXIgZGRvID0ge1xuICAgICAgICBjb250cm9sbGVyOiBjb250cm9sbGVyLFxuICAgICAgICBjb250cm9sbGVyQXM6IGlkZW50aWZpZXJGb3JDb250cm9sbGVyKG9wdGlvbnMuY29udHJvbGxlcikgfHwgb3B0aW9ucy5jb250cm9sbGVyQXMgfHwgJyRjdHJsJyxcbiAgICAgICAgdGVtcGxhdGU6IG1ha2VJbmplY3RhYmxlKHRlbXBsYXRlKSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IG1ha2VJbmplY3RhYmxlKG9wdGlvbnMudGVtcGxhdGVVcmwpLFxuICAgICAgICB0cmFuc2NsdWRlOiBvcHRpb25zLnRyYW5zY2x1ZGUsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjogb3B0aW9ucy5iaW5kaW5ncyB8fCB7fSxcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgcmVxdWlyZTogb3B0aW9ucy5yZXF1aXJlXG4gICAgICB9O1xuXG4gICAgICAvLyBDb3B5IGFubm90YXRpb25zIChzdGFydGluZyB3aXRoICQpIG92ZXIgdG8gdGhlIERET1xuICAgICAgZm9yRWFjaChvcHRpb25zLCBmdW5jdGlvbih2YWwsIGtleSkge1xuICAgICAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyQnKSBkZG9ba2V5XSA9IHZhbDtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGRvO1xuICAgIH1cblxuICAgIC8vIFRPRE8ocGV0ZSkgcmVtb3ZlIHRoZSBmb2xsb3dpbmcgYGZvckVhY2hgIGJlZm9yZSB3ZSByZWxlYXNlIDEuNi4wXG4gICAgLy8gVGhlIGNvbXBvbmVudC1yb3V0ZXJAMC4yLjAgbG9va3MgZm9yIHRoZSBhbm5vdGF0aW9ucyBvbiB0aGUgY29udHJvbGxlciBjb25zdHJ1Y3RvclxuICAgIC8vIE5vdGhpbmcgaW4gQW5ndWxhckpTIGxvb2tzIGZvciBhbm5vdGF0aW9ucyBvbiB0aGUgZmFjdG9yeSBmdW5jdGlvbiBidXQgd2UgY2FuJ3QgcmVtb3ZlXG4gICAgLy8gaXQgZnJvbSAxLjUueCB5ZXQuXG5cbiAgICAvLyBDb3B5IGFueSBhbm5vdGF0aW9uIHByb3BlcnRpZXMgKHN0YXJ0aW5nIHdpdGggJCkgb3ZlciB0byB0aGUgZmFjdG9yeSBhbmQgY29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbnNcbiAgICAvLyBUaGVzZSBjb3VsZCBiZSB1c2VkIGJ5IGxpYnJhcmllcyBzdWNoIGFzIHRoZSBuZXcgY29tcG9uZW50IHJvdXRlclxuICAgIGZvckVhY2gob3B0aW9ucywgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnJCcpIHtcbiAgICAgICAgZmFjdG9yeVtrZXldID0gdmFsO1xuICAgICAgICAvLyBEb24ndCB0cnkgdG8gY29weSBvdmVyIGFubm90YXRpb25zIHRvIG5hbWVkIGNvbnRyb2xsZXJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlcikpIGNvbnRyb2xsZXJba2V5XSA9IHZhbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZhY3RvcnkuJGluamVjdCA9IFsnJGluamVjdG9yJ107XG5cbiAgICByZXR1cm4gdGhpcy5kaXJlY3RpdmUobmFtZSwgZmFjdG9yeSk7XG4gIH07XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2FIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXG4gICAqIHVybHMgZHVyaW5nIGFbaHJlZl0gc2FuaXRpemF0aW9uLlxuICAgKlxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50aW5nIFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxuICAgKlxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGFbaHJlZl0gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xuICAgKiBhbiBhYnNvbHV0ZSB1cmwuIEFmdGVyd2FyZHMsIHRoZSB1cmwgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XG4gICAgICAkJHNhbml0aXplVXJpUHJvdmlkZXIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QocmVnZXhwKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KCk7XG4gICAgfVxuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxuICAgKlxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxuICAgKlxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGltZ1tzcmNdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdGBcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXG4gICAqIHRoZSBhYnNvbHV0ZSB1cmwgaXMgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCBzdHJpbmcgYW5kIG9ubHkgdGhlbiBpcyBpdCB3cml0dGVuIGludG8gdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxuICAgKiBAcmV0dXJucyB7UmVnRXhwfG5nLiRjb21waWxlUHJvdmlkZXJ9IEN1cnJlbnQgUmVnRXhwIGlmIGNhbGxlZCB3aXRob3V0IHZhbHVlIG9yIHNlbGYgZm9yXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cbiAgICovXG4gIHRoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XG4gICAgICAkJHNhbml0aXplVXJpUHJvdmlkZXIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KHJlZ2V4cCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICQkc2FuaXRpemVVcmlQcm92aWRlci5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgICRjb21waWxlUHJvdmlkZXIjZGVidWdJbmZvRW5hYmxlZFxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBlbmFibGVkIHVwZGF0ZSB0aGUgZGVidWdJbmZvRW5hYmxlZCBzdGF0ZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZVxuICAgKiBjdXJyZW50IGRlYnVnSW5mb0VuYWJsZWQgc3RhdGVcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICpcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENhbGwgdGhpcyBtZXRob2QgdG8gZW5hYmxlL2Rpc2FibGUgdmFyaW91cyBkZWJ1ZyBydW50aW1lIGluZm9ybWF0aW9uIGluIHRoZSBjb21waWxlciBzdWNoIGFzIGFkZGluZ1xuICAgKiBiaW5kaW5nIGluZm9ybWF0aW9uIGFuZCBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCBzY29wZSBvbiB0byBET00gZWxlbWVudHMuXG4gICAqIElmIGVuYWJsZWQsIHRoZSBjb21waWxlciB3aWxsIGFkZCB0aGUgZm9sbG93aW5nIHRvIERPTSBlbGVtZW50cyB0aGF0IGhhdmUgYmVlbiBib3VuZCB0byB0aGUgc2NvcGVcbiAgICogKiBgbmctYmluZGluZ2AgQ1NTIGNsYXNzXG4gICAqICogYG5nLXNjb3BlYCBhbmQgYG5nLWlzb2xhdGVkLXNjb3BlYCBDU1MgY2xhc3Nlc1xuICAgKiAqIGAkYmluZGluZ2AgZGF0YSBwcm9wZXJ0eSBjb250YWluaW5nIGFuIGFycmF5IG9mIHRoZSBiaW5kaW5nIGV4cHJlc3Npb25zXG4gICAqICogRGF0YSBwcm9wZXJ0aWVzIHVzZWQgYnkgdGhlIHtAbGluayBhbmd1bGFyLmVsZW1lbnQjbWV0aG9kcyBgc2NvcGUoKWAvYGlzb2xhdGVTY29wZSgpYCBtZXRob2RzfSB0byByZXR1cm5cbiAgICogICB0aGUgZWxlbWVudCdzIHNjb3BlLlxuICAgKiAqIFBsYWNlaG9sZGVyIGNvbW1lbnRzIHdpbGwgY29udGFpbiBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGRpcmVjdGl2ZSBhbmQgYmluZGluZyBjYXVzZWQgdGhlIHBsYWNlaG9sZGVyLlxuICAgKiAgIEUuZy4gYDwhLS0gbmdJZjogc2hvdWxkU2hvdygpIC0tPmAuXG4gICAqXG4gICAqIFlvdSBtYXkgd2FudCB0byBkaXNhYmxlIHRoaXMgaW4gcHJvZHVjdGlvbiBmb3IgYSBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBib29zdC4gU2VlXG4gICAqIHtAbGluayBndWlkZS9wcm9kdWN0aW9uI2Rpc2FibGluZy1kZWJ1Zy1kYXRhIERpc2FibGluZyBEZWJ1ZyBEYXRhfSBmb3IgbW9yZS5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgdHJ1ZS5cbiAgICovXG4gIHZhciBkZWJ1Z0luZm9FbmFibGVkID0gdHJ1ZTtcbiAgdGhpcy5kZWJ1Z0luZm9FbmFibGVkID0gZnVuY3Rpb24oZW5hYmxlZCkge1xuICAgIGlmIChpc0RlZmluZWQoZW5hYmxlZCkpIHtcbiAgICAgIGRlYnVnSW5mb0VuYWJsZWQgPSBlbmFibGVkO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBkZWJ1Z0luZm9FbmFibGVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICAkY29tcGlsZVByb3ZpZGVyI3ByZUFzc2lnbkJpbmRpbmdzRW5hYmxlZFxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBlbmFibGVkIHVwZGF0ZSB0aGUgcHJlQXNzaWduQmluZGluZ3NFbmFibGVkIHN0YXRlIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UganVzdCByZXR1cm4gdGhlXG4gICAqIGN1cnJlbnQgcHJlQXNzaWduQmluZGluZ3NFbmFibGVkIHN0YXRlXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYWxsIHRoaXMgbWV0aG9kIHRvIGVuYWJsZS9kaXNhYmxlIHdoZXRoZXIgZGlyZWN0aXZlIGNvbnRyb2xsZXJzIGFyZSBhc3NpZ25lZCBiaW5kaW5ncyBiZWZvcmVcbiAgICogY2FsbGluZyB0aGUgY29udHJvbGxlcidzIGNvbnN0cnVjdG9yLlxuICAgKiBJZiBlbmFibGVkICh0cnVlKSwgdGhlIGNvbXBpbGVyIGFzc2lnbnMgdGhlIHZhbHVlIG9mIGVhY2ggb2YgdGhlIGJpbmRpbmdzIHRvIHRoZVxuICAgKiBwcm9wZXJ0aWVzIG9mIHRoZSBjb250cm9sbGVyIG9iamVjdCBiZWZvcmUgdGhlIGNvbnN0cnVjdG9yIG9mIHRoaXMgb2JqZWN0IGlzIGNhbGxlZC5cbiAgICpcbiAgICogSWYgZGlzYWJsZWQgKGZhbHNlKSwgdGhlIGNvbXBpbGVyIGNhbGxzIHRoZSBjb25zdHJ1Y3RvciBmaXJzdCBiZWZvcmUgYXNzaWduaW5nIGJpbmRpbmdzLlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBmYWxzZS5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogc2luY2VWZXJzaW9uPVwiMS42LjBcIlxuICAgKiByZW1vdmVWZXJzaW9uPVwiMS43LjBcIlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBhbmQgdGhlIG9wdGlvbiB0byBhc3NpZ24gdGhlIGJpbmRpbmdzIGJlZm9yZSBjYWxsaW5nIHRoZSBjb250cm9sbGVyJ3MgY29uc3RydWN0b3JcbiAgICogd2lsbCBiZSByZW1vdmVkIGluIHYxLjcuMC5cbiAgICovXG4gIHZhciBwcmVBc3NpZ25CaW5kaW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgdGhpcy5wcmVBc3NpZ25CaW5kaW5nc0VuYWJsZWQgPSBmdW5jdGlvbihlbmFibGVkKSB7XG4gICAgaWYgKGlzRGVmaW5lZChlbmFibGVkKSkge1xuICAgICAgcHJlQXNzaWduQmluZGluZ3NFbmFibGVkID0gZW5hYmxlZDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gcHJlQXNzaWduQmluZGluZ3NFbmFibGVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICAkY29tcGlsZVByb3ZpZGVyI3N0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZFxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBlbmFibGVkIHVwZGF0ZSB0aGUgc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkIHN0YXRlIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UganVzdCByZXR1cm4gdGhlXG4gICAqIGN1cnJlbnQgc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkIHN0YXRlXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYWxsIHRoaXMgbWV0aG9kIHRvIGVuYWJsZS9kaXNhYmxlIHN0cmljdCBjb21wb25lbnQgYmluZGluZ3MgY2hlY2suIElmIGVuYWJsZWQsIHRoZSBjb21waWxlciB3aWxsIGVuZm9yY2UgdGhhdFxuICAgKiBmb3IgYWxsIGJpbmRpbmdzIG9mIGEgY29tcG9uZW50IHRoYXQgYXJlIG5vdCBzZXQgYXMgb3B0aW9uYWwgd2l0aCBgP2AsIGFuIGF0dHJpYnV0ZSBuZWVkcyB0byBiZSBwcm92aWRlZFxuICAgKiBvbiB0aGUgY29tcG9uZW50J3MgSFRNTCB0YWcuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGZhbHNlLlxuICAgKi9cbiAgdmFyIHN0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICB0aGlzLnN0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZCA9IGZ1bmN0aW9uKGVuYWJsZWQpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGVuYWJsZWQpKSB7XG4gICAgICBzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQgPSBlbmFibGVkO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQ7XG4gIH07XG5cbiAgdmFyIFRUTCA9IDEwO1xuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI29uQ2hhbmdlc1R0bFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogU2V0cyB0aGUgbnVtYmVyIG9mIHRpbWVzIGAkb25DaGFuZ2VzYCBob29rcyBjYW4gdHJpZ2dlciBuZXcgY2hhbmdlcyBiZWZvcmUgZ2l2aW5nIHVwIGFuZFxuICAgKiBhc3N1bWluZyB0aGF0IHRoZSBtb2RlbCBpcyB1bnN0YWJsZS5cbiAgICpcbiAgICogVGhlIGN1cnJlbnQgZGVmYXVsdCBpcyAxMCBpdGVyYXRpb25zLlxuICAgKlxuICAgKiBJbiBjb21wbGV4IGFwcGxpY2F0aW9ucyBpdCdzIHBvc3NpYmxlIHRoYXQgZGVwZW5kZW5jaWVzIGJldHdlZW4gYCRvbkNoYW5nZXNgIGhvb2tzIGFuZCBiaW5kaW5ncyB3aWxsIHJlc3VsdFxuICAgKiBpbiBzZXZlcmFsIGl0ZXJhdGlvbnMgb2YgY2FsbHMgdG8gdGhlc2UgaG9va3MuIEhvd2V2ZXIgaWYgYW4gYXBwbGljYXRpb24gbmVlZHMgbW9yZSB0aGFuIHRoZSBkZWZhdWx0IDEwXG4gICAqIGl0ZXJhdGlvbnMgdG8gc3RhYmlsaXplIHRoZW4geW91IHNob3VsZCBpbnZlc3RpZ2F0ZSB3aGF0IGlzIGNhdXNpbmcgdGhlIG1vZGVsIHRvIGNvbnRpbnVvdXNseSBjaGFuZ2UgZHVyaW5nXG4gICAqIHRoZSBgJG9uQ2hhbmdlc2AgaG9vayBleGVjdXRpb24uXG4gICAqXG4gICAqIEluY3JlYXNpbmcgdGhlIFRUTCBjb3VsZCBoYXZlIHBlcmZvcm1hbmNlIGltcGxpY2F0aW9ucywgc28geW91IHNob3VsZCBub3QgY2hhbmdlIGl0IHdpdGhvdXQgcHJvcGVyIGp1c3RpZmljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCBUaGUgbnVtYmVyIG9mIGAkb25DaGFuZ2VzYCBob29rIGl0ZXJhdGlvbnMuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ8b2JqZWN0fSB0aGUgY3VycmVudCBsaW1pdCAob3IgYHRoaXNgIGlmIGNhbGxlZCBhcyBhIHNldHRlciBmb3IgY2hhaW5pbmcpXG4gICAqL1xuICB0aGlzLm9uQ2hhbmdlc1R0bCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIFRUTCA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBUVEw7XG4gIH07XG5cbiAgdmFyIGNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZENvbmZpZyA9IHRydWU7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjY29tbWVudERpcmVjdGl2ZXNFbmFibGVkXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBJdCBpbmRpY2F0ZXMgdG8gdGhlIGNvbXBpbGVyXG4gICAqIHdoZXRoZXIgb3Igbm90IGRpcmVjdGl2ZXMgb24gY29tbWVudHMgc2hvdWxkIGJlIGNvbXBpbGVkLlxuICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAqXG4gICAqIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aXRoIGZhbHNlIGRpc2FibGVzIHRoZSBjb21waWxhdGlvbiBvZiBkaXJlY3RpdmVzXG4gICAqIG9uIGNvbW1lbnRzIGZvciB0aGUgd2hvbGUgYXBwbGljYXRpb24uXG4gICAqIFRoaXMgcmVzdWx0cyBpbiBhIGNvbXBpbGF0aW9uIHBlcmZvcm1hbmNlIGdhaW4sXG4gICAqIGFzIHRoZSBjb21waWxlciBkb2Vzbid0IGhhdmUgdG8gY2hlY2sgY29tbWVudHMgd2hlbiBsb29raW5nIGZvciBkaXJlY3RpdmVzLlxuICAgKiBUaGlzIHNob3VsZCBob3dldmVyIG9ubHkgYmUgdXNlZCBpZiB5b3UgYXJlIHN1cmUgdGhhdCBubyBjb21tZW50IGRpcmVjdGl2ZXMgYXJlIHVzZWQgaW5cbiAgICogdGhlIGFwcGxpY2F0aW9uIChpbmNsdWRpbmcgYW55IDNyZCBwYXJ0eSBkaXJlY3RpdmVzKS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIGBmYWxzZWAgaWYgdGhlIGNvbXBpbGVyIG1heSBpZ25vcmUgZGlyZWN0aXZlcyBvbiBjb21tZW50c1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxvYmplY3R9IHRoZSBjdXJyZW50IHZhbHVlIChvciBgdGhpc2AgaWYgY2FsbGVkIGFzIGEgc2V0dGVyIGZvciBjaGFpbmluZylcbiAgICovXG4gIHRoaXMuY29tbWVudERpcmVjdGl2ZXNFbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgY29tbWVudERpcmVjdGl2ZXNFbmFibGVkQ29uZmlnID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZENvbmZpZztcbiAgfTtcblxuXG4gIHZhciBjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkQ29uZmlnID0gdHJ1ZTtcbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBJdCBpbmRpY2F0ZXMgdG8gdGhlIGNvbXBpbGVyXG4gICAqIHdoZXRoZXIgb3Igbm90IGRpcmVjdGl2ZXMgb24gZWxlbWVudCBjbGFzc2VzIHNob3VsZCBiZSBjb21waWxlZC5cbiAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKlxuICAgKiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2l0aCBmYWxzZSBkaXNhYmxlcyB0aGUgY29tcGlsYXRpb24gb2YgZGlyZWN0aXZlc1xuICAgKiBvbiBlbGVtZW50IGNsYXNzZXMgZm9yIHRoZSB3aG9sZSBhcHBsaWNhdGlvbi5cbiAgICogVGhpcyByZXN1bHRzIGluIGEgY29tcGlsYXRpb24gcGVyZm9ybWFuY2UgZ2FpbixcbiAgICogYXMgdGhlIGNvbXBpbGVyIGRvZXNuJ3QgaGF2ZSB0byBjaGVjayBlbGVtZW50IGNsYXNzZXMgd2hlbiBsb29raW5nIGZvciBkaXJlY3RpdmVzLlxuICAgKiBUaGlzIHNob3VsZCBob3dldmVyIG9ubHkgYmUgdXNlZCBpZiB5b3UgYXJlIHN1cmUgdGhhdCBubyBjbGFzcyBkaXJlY3RpdmVzIGFyZSB1c2VkIGluXG4gICAqIHRoZSBhcHBsaWNhdGlvbiAoaW5jbHVkaW5nIGFueSAzcmQgcGFydHkgZGlyZWN0aXZlcykuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBgZmFsc2VgIGlmIHRoZSBjb21waWxlciBtYXkgaWdub3JlIGRpcmVjdGl2ZXMgb24gZWxlbWVudCBjbGFzc2VzXG4gICAqIEByZXR1cm5zIHtib29sZWFufG9iamVjdH0gdGhlIGN1cnJlbnQgdmFsdWUgKG9yIGB0aGlzYCBpZiBjYWxsZWQgYXMgYSBzZXR0ZXIgZm9yIGNoYWluaW5nKVxuICAgKi9cbiAgdGhpcy5jc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZyA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkQ29uZmlnO1xuICB9O1xuXG4gIHRoaXMuJGdldCA9IFtcbiAgICAgICAgICAgICckaW5qZWN0b3InLCAnJGludGVycG9sYXRlJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyR0ZW1wbGF0ZVJlcXVlc3QnLCAnJHBhcnNlJyxcbiAgICAgICAgICAgICckY29udHJvbGxlcicsICckcm9vdFNjb3BlJywgJyRzY2UnLCAnJGFuaW1hdGUnLCAnJCRzYW5pdGl6ZVVyaScsXG4gICAgZnVuY3Rpb24oJGluamVjdG9yLCAgICRpbnRlcnBvbGF0ZSwgICAkZXhjZXB0aW9uSGFuZGxlciwgICAkdGVtcGxhdGVSZXF1ZXN0LCAgICRwYXJzZSxcbiAgICAgICAgICAgICAkY29udHJvbGxlciwgICAkcm9vdFNjb3BlLCAgICRzY2UsICAgJGFuaW1hdGUsICAgJCRzYW5pdGl6ZVVyaSkge1xuXG4gICAgdmFyIFNJTVBMRV9BVFRSX05BTUUgPSAvXlxcdy87XG4gICAgdmFyIHNwZWNpYWxBdHRySG9sZGVyID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cbiAgICB2YXIgY29tbWVudERpcmVjdGl2ZXNFbmFibGVkID0gY29tbWVudERpcmVjdGl2ZXNFbmFibGVkQ29uZmlnO1xuICAgIHZhciBjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkID0gY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZztcblxuXG4gICAgdmFyIG9uQ2hhbmdlc1R0bCA9IFRUTDtcbiAgICAvLyBUaGUgb25DaGFuZ2VzIGhvb2tzIHNob3VsZCBhbGwgYmUgcnVuIHRvZ2V0aGVyIGluIGEgc2luZ2xlIGRpZ2VzdFxuICAgIC8vIFdoZW4gY2hhbmdlcyBvY2N1ciwgdGhlIGNhbGwgdG8gdHJpZ2dlciB0aGVpciBob29rcyB3aWxsIGJlIGFkZGVkIHRvIHRoaXMgcXVldWVcbiAgICB2YXIgb25DaGFuZ2VzUXVldWU7XG5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBhICQkcG9zdERpZ2VzdCB0byB0cmlnZ2VyIGFsbCB0aGUgb25DaGFuZ2VzIGhvb2tzIGluIGEgc2luZ2xlIGRpZ2VzdFxuICAgIGZ1bmN0aW9uIGZsdXNoT25DaGFuZ2VzUXVldWUoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoISgtLW9uQ2hhbmdlc1R0bCkpIHtcbiAgICAgICAgICAvLyBXZSBoYXZlIGhpdCB0aGUgVFRMIGxpbWl0IHNvIHJlc2V0IGV2ZXJ5dGhpbmdcbiAgICAgICAgICBvbkNoYW5nZXNRdWV1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignaW5mY2huZycsICd7MH0gJG9uQ2hhbmdlcygpIGl0ZXJhdGlvbnMgcmVhY2hlZC4gQWJvcnRpbmchXFxuJywgVFRMKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBtdXN0IHJ1biB0aGlzIGhvb2sgaW4gYW4gYXBwbHkgc2luY2UgdGhlICQkcG9zdERpZ2VzdCBydW5zIG91dHNpZGUgYXBwbHlcbiAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGVycm9ycyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG9uQ2hhbmdlc1F1ZXVlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIG9uQ2hhbmdlc1F1ZXVlW2ldKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGVycm9ycy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBSZXNldCB0aGUgcXVldWUgdG8gdHJpZ2dlciBhIG5ldyBzY2hlZHVsZSBuZXh0IHRpbWUgdGhlcmUgaXMgYSBjaGFuZ2VcbiAgICAgICAgICBvbkNoYW5nZXNRdWV1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBvbkNoYW5nZXNUdGwrKztcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIEF0dHJpYnV0ZXMoZWxlbWVudCwgYXR0cmlidXRlc1RvQ29weSkge1xuICAgICAgaWYgKGF0dHJpYnV0ZXNUb0NvcHkpIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzVG9Db3B5KTtcbiAgICAgICAgdmFyIGksIGwsIGtleTtcblxuICAgICAgICBmb3IgKGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIHRoaXNba2V5XSA9IGF0dHJpYnV0ZXNUb0NvcHlba2V5XTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kYXR0ciA9IHt9O1xuICAgICAgfVxuXG4gICAgICB0aGlzLiQkZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgQXR0cmlidXRlcy5wcm90b3R5cGUgPSB7XG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRub3JtYWxpemVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBDb252ZXJ0cyBhbiBhdHRyaWJ1dGUgbmFtZSAoZS5nLiBkYXNoL2NvbG9uL3VuZGVyc2NvcmUtZGVsaW1pdGVkIHN0cmluZywgb3B0aW9uYWxseSBwcmVmaXhlZCB3aXRoIGB4LWAgb3JcbiAgICAgICAqIGBkYXRhLWApIHRvIGl0cyBub3JtYWxpemVkLCBjYW1lbENhc2UgZm9ybS5cbiAgICAgICAqXG4gICAgICAgKiBBbHNvIHRoZXJlIGlzIHNwZWNpYWwgY2FzZSBmb3IgTW96IHByZWZpeCBzdGFydGluZyB3aXRoIHVwcGVyIGNhc2UgbGV0dGVyLlxuICAgICAgICpcbiAgICAgICAqIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uIGNoZWNrIG91dCB0aGUgZ3VpZGUgb24ge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSNtYXRjaGluZy1kaXJlY3RpdmVzIE1hdGNoaW5nIERpcmVjdGl2ZXN9XG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSB0byBub3JtYWxpemVcbiAgICAgICAqL1xuICAgICAgJG5vcm1hbGl6ZTogZGlyZWN0aXZlTm9ybWFsaXplLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGFkZENsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQWRkcyB0aGUgQ1NTIGNsYXNzIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgY2xhc3NWYWwgcGFyYW1ldGVyIHRvIHRoZSBlbGVtZW50LiBJZiBhbmltYXRpb25zXG4gICAgICAgKiBhcmUgZW5hYmxlZCB0aGVuIGFuIGFuaW1hdGlvbiB3aWxsIGJlIHRyaWdnZXJlZCBmb3IgdGhlIGNsYXNzIGFkZGl0aW9uLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1ZhbCBUaGUgY2xhc3NOYW1lIHZhbHVlIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudFxuICAgICAgICovXG4gICAgICAkYWRkQ2xhc3M6IGZ1bmN0aW9uKGNsYXNzVmFsKSB7XG4gICAgICAgIGlmIChjbGFzc1ZhbCAmJiBjbGFzc1ZhbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIGNsYXNzVmFsKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkcmVtb3ZlQ2xhc3NcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZW1vdmVzIHRoZSBDU1MgY2xhc3MgdmFsdWUgc3BlY2lmaWVkIGJ5IHRoZSBjbGFzc1ZhbCBwYXJhbWV0ZXIgZnJvbSB0aGUgZWxlbWVudC4gSWZcbiAgICAgICAqIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQgdGhlbiBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgZm9yIHRoZSBjbGFzcyByZW1vdmFsLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1ZhbCBUaGUgY2xhc3NOYW1lIHZhbHVlIHRoYXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcbiAgICAgICAqL1xuICAgICAgJHJlbW92ZUNsYXNzOiBmdW5jdGlvbihjbGFzc1ZhbCkge1xuICAgICAgICBpZiAoY2xhc3NWYWwgJiYgY2xhc3NWYWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBjbGFzc1ZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHVwZGF0ZUNsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQWRkcyBhbmQgcmVtb3ZlcyB0aGUgYXBwcm9wcmlhdGUgQ1NTIGNsYXNzIHZhbHVlcyB0byB0aGUgZWxlbWVudCBiYXNlZCBvbiB0aGUgZGlmZmVyZW5jZVxuICAgICAgICogYmV0d2VlbiB0aGUgbmV3IGFuZCBvbGQgQ1NTIGNsYXNzIHZhbHVlcyAoc3BlY2lmaWVkIGFzIG5ld0NsYXNzZXMgYW5kIG9sZENsYXNzZXMpLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdDbGFzc2VzIFRoZSBjdXJyZW50IENTUyBjbGFzc05hbWUgdmFsdWVcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvbGRDbGFzc2VzIFRoZSBmb3JtZXIgQ1NTIGNsYXNzTmFtZSB2YWx1ZVxuICAgICAgICovXG4gICAgICAkdXBkYXRlQ2xhc3M6IGZ1bmN0aW9uKG5ld0NsYXNzZXMsIG9sZENsYXNzZXMpIHtcbiAgICAgICAgdmFyIHRvQWRkID0gdG9rZW5EaWZmZXJlbmNlKG5ld0NsYXNzZXMsIG9sZENsYXNzZXMpO1xuICAgICAgICBpZiAodG9BZGQgJiYgdG9BZGQubGVuZ3RoKSB7XG4gICAgICAgICAgJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIHRvQWRkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b1JlbW92ZSA9IHRva2VuRGlmZmVyZW5jZShvbGRDbGFzc2VzLCBuZXdDbGFzc2VzKTtcbiAgICAgICAgaWYgKHRvUmVtb3ZlICYmIHRvUmVtb3ZlLmxlbmd0aCkge1xuICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCB0b1JlbW92ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IGEgbm9ybWFsaXplZCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgaW4gYSB3YXkgc3VjaCB0aGF0IGFsbCBkaXJlY3RpdmVzXG4gICAgICAgKiBjYW4gc2hhcmUgdGhlIGF0dHJpYnV0ZS4gVGhpcyBmdW5jdGlvbiBwcm9wZXJseSBoYW5kbGVzIGJvb2xlYW4gYXR0cmlidXRlcy5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgTm9ybWFsaXplZCBrZXkuIChpZSBuZ0F0dHJpYnV0ZSlcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfGJvb2xlYW59IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuIElmIGBudWxsYCBhdHRyaWJ1dGUgd2lsbCBiZSBkZWxldGVkLlxuICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gd3JpdGVBdHRyIElmIGZhbHNlLCBkb2VzIG5vdCB3cml0ZSB0aGUgdmFsdWUgdG8gRE9NIGVsZW1lbnQgYXR0cmlidXRlLlxuICAgICAgICogICAgIERlZmF1bHRzIHRvIHRydWUuXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZz19IGF0dHJOYW1lIE9wdGlvbmFsIG5vbmUgbm9ybWFsaXplZCBuYW1lLiBEZWZhdWx0cyB0byBrZXkuXG4gICAgICAgKi9cbiAgICAgICRzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIHdyaXRlQXR0ciwgYXR0ck5hbWUpIHtcbiAgICAgICAgLy8gVE9ETzogZGVjaWRlIHdoZXRoZXIgb3Igbm90IHRvIHRocm93IGFuIGVycm9yIGlmIFwiY2xhc3NcIlxuICAgICAgICAvL2lzIHNldCB0aHJvdWdoIHRoaXMgZnVuY3Rpb24gc2luY2UgaXQgbWF5IGNhdXNlICR1cGRhdGVDbGFzcyB0b1xuICAgICAgICAvL2JlY29tZSB1bnN0YWJsZS5cblxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuJCRlbGVtZW50WzBdLFxuICAgICAgICAgICAgYm9vbGVhbktleSA9IGdldEJvb2xlYW5BdHRyTmFtZShub2RlLCBrZXkpLFxuICAgICAgICAgICAgYWxpYXNlZEtleSA9IGdldEFsaWFzZWRBdHRyTmFtZShrZXkpLFxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBrZXksXG4gICAgICAgICAgICBub2RlTmFtZTtcblxuICAgICAgICBpZiAoYm9vbGVhbktleSkge1xuICAgICAgICAgIHRoaXMuJCRlbGVtZW50LnByb3Aoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgYXR0ck5hbWUgPSBib29sZWFuS2V5O1xuICAgICAgICB9IGVsc2UgaWYgKGFsaWFzZWRLZXkpIHtcbiAgICAgICAgICB0aGlzW2FsaWFzZWRLZXldID0gdmFsdWU7XG4gICAgICAgICAgb2JzZXJ2ZXIgPSBhbGlhc2VkS2V5O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG5cbiAgICAgICAgLy8gdHJhbnNsYXRlIG5vcm1hbGl6ZWQga2V5IHRvIGFjdHVhbCBrZXlcbiAgICAgICAgaWYgKGF0dHJOYW1lKSB7XG4gICAgICAgICAgdGhpcy4kYXR0cltrZXldID0gYXR0ck5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0ck5hbWUgPSB0aGlzLiRhdHRyW2tleV07XG4gICAgICAgICAgaWYgKCFhdHRyTmFtZSkge1xuICAgICAgICAgICAgdGhpcy4kYXR0cltrZXldID0gYXR0ck5hbWUgPSBzbmFrZV9jYXNlKGtleSwgJy0nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBub2RlTmFtZSA9IG5vZGVOYW1lXyh0aGlzLiQkZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKChub2RlTmFtZSA9PT0gJ2EnICYmIChrZXkgPT09ICdocmVmJyB8fCBrZXkgPT09ICd4bGlua0hyZWYnKSkgfHxcbiAgICAgICAgICAgIChub2RlTmFtZSA9PT0gJ2ltZycgJiYga2V5ID09PSAnc3JjJykpIHtcbiAgICAgICAgICAvLyBzYW5pdGl6ZSBhW2hyZWZdIGFuZCBpbWdbc3JjXSB2YWx1ZXNcbiAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZSA9ICQkc2FuaXRpemVVcmkodmFsdWUsIGtleSA9PT0gJ3NyYycpO1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGVOYW1lID09PSAnaW1nJyAmJiBrZXkgPT09ICdzcmNzZXQnICYmIGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAvLyBzYW5pdGl6ZSBpbWdbc3Jjc2V0XSB2YWx1ZXNcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG5cbiAgICAgICAgICAvLyBmaXJzdCBjaGVjayBpZiB0aGVyZSBhcmUgc3BhY2VzIGJlY2F1c2UgaXQncyBub3QgdGhlIHNhbWUgcGF0dGVyblxuICAgICAgICAgIHZhciB0cmltbWVkU3Jjc2V0ID0gdHJpbSh2YWx1ZSk7XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgKCAgIDk5OXggICAsfCAgIDk5OXcgICAsfCAgICx8LCAgIClcbiAgICAgICAgICB2YXIgc3JjUGF0dGVybiA9IC8oXFxzK1xcZCt4XFxzKix8XFxzK1xcZCt3XFxzKix8XFxzKyx8LFxccyspLztcbiAgICAgICAgICB2YXIgcGF0dGVybiA9IC9cXHMvLnRlc3QodHJpbW1lZFNyY3NldCkgPyBzcmNQYXR0ZXJuIDogLygsKS87XG5cbiAgICAgICAgICAvLyBzcGxpdCBzcmNzZXQgaW50byB0dXBsZSBvZiB1cmkgYW5kIGRlc2NyaXB0b3IgZXhjZXB0IGZvciB0aGUgbGFzdCBpdGVtXG4gICAgICAgICAgdmFyIHJhd1VyaXMgPSB0cmltbWVkU3Jjc2V0LnNwbGl0KHBhdHRlcm4pO1xuXG4gICAgICAgICAgLy8gZm9yIGVhY2ggdHVwbGVzXG4gICAgICAgICAgdmFyIG5iclVyaXNXaXRoMnBhcnRzID0gTWF0aC5mbG9vcihyYXdVcmlzLmxlbmd0aCAvIDIpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmJyVXJpc1dpdGgycGFydHM7IGkrKykge1xuICAgICAgICAgICAgdmFyIGlubmVySWR4ID0gaSAqIDI7XG4gICAgICAgICAgICAvLyBzYW5pdGl6ZSB0aGUgdXJpXG4gICAgICAgICAgICByZXN1bHQgKz0gJCRzYW5pdGl6ZVVyaSh0cmltKHJhd1VyaXNbaW5uZXJJZHhdKSwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyBhZGQgdGhlIGRlc2NyaXB0b3JcbiAgICAgICAgICAgIHJlc3VsdCArPSAoJyAnICsgdHJpbShyYXdVcmlzW2lubmVySWR4ICsgMV0pKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzcGxpdCB0aGUgbGFzdCBpdGVtIGludG8gdXJpIGFuZCBkZXNjcmlwdG9yXG4gICAgICAgICAgdmFyIGxhc3RUdXBsZSA9IHRyaW0ocmF3VXJpc1tpICogMl0pLnNwbGl0KC9cXHMvKTtcblxuICAgICAgICAgIC8vIHNhbml0aXplIHRoZSBsYXN0IHVyaVxuICAgICAgICAgIHJlc3VsdCArPSAkJHNhbml0aXplVXJpKHRyaW0obGFzdFR1cGxlWzBdKSwgdHJ1ZSk7XG5cbiAgICAgICAgICAvLyBhbmQgYWRkIHRoZSBsYXN0IGRlc2NyaXB0b3IgaWYgYW55XG4gICAgICAgICAgaWYgKGxhc3RUdXBsZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSAoJyAnICsgdHJpbShsYXN0VHVwbGVbMV0pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWUgPSByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod3JpdGVBdHRyICE9PSBmYWxzZSkge1xuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuJCRlbGVtZW50LnJlbW92ZUF0dHIoYXR0ck5hbWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoU0lNUExFX0FUVFJfTkFNRS50ZXN0KGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICB0aGlzLiQkZWxlbWVudC5hdHRyKGF0dHJOYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXRTcGVjaWFsQXR0cih0aGlzLiQkZWxlbWVudFswXSwgYXR0ck5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmaXJlIG9ic2VydmVyc1xuICAgICAgICB2YXIgJCRvYnNlcnZlcnMgPSB0aGlzLiQkb2JzZXJ2ZXJzO1xuICAgICAgICBpZiAoJCRvYnNlcnZlcnMpIHtcbiAgICAgICAgICBmb3JFYWNoKCQkb2JzZXJ2ZXJzW29ic2VydmVyXSwgZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZuKHZhbHVlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkb2JzZXJ2ZVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIE9ic2VydmVzIGFuIGludGVycG9sYXRlZCBhdHRyaWJ1dGUuXG4gICAgICAgKlxuICAgICAgICogVGhlIG9ic2VydmVyIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbmNlIGR1cmluZyB0aGUgbmV4dCBgJGRpZ2VzdGAgZm9sbG93aW5nXG4gICAgICAgKiBjb21waWxhdGlvbi4gVGhlIG9ic2VydmVyIGlzIHRoZW4gaW52b2tlZCB3aGVuZXZlciB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlXG4gICAgICAgKiBjaGFuZ2VzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgTm9ybWFsaXplZCBrZXkuIChpZSBuZ0F0dHJpYnV0ZSkgLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihpbnRlcnBvbGF0ZWRWYWx1ZSl9IGZuIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXJcbiAgICAgICAgICAgICAgICB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgY2hhbmdlcy5cbiAgICAgICAqICAgICAgICBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uI2hvdy10ZXh0LWFuZC1hdHRyaWJ1dGUtYmluZGluZ3Mtd29yayBJbnRlcnBvbGF0aW9uXG4gICAgICAgKiAgICAgICAgZ3VpZGV9IGZvciBtb3JlIGluZm8uXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIG9ic2VydmVyLlxuICAgICAgICovXG4gICAgICAkb2JzZXJ2ZTogZnVuY3Rpb24oa2V5LCBmbikge1xuICAgICAgICB2YXIgYXR0cnMgPSB0aGlzLFxuICAgICAgICAgICAgJCRvYnNlcnZlcnMgPSAoYXR0cnMuJCRvYnNlcnZlcnMgfHwgKGF0dHJzLiQkb2JzZXJ2ZXJzID0gY3JlYXRlTWFwKCkpKSxcbiAgICAgICAgICAgIGxpc3RlbmVycyA9ICgkJG9ic2VydmVyc1trZXldIHx8ICgkJG9ic2VydmVyc1trZXldID0gW10pKTtcblxuICAgICAgICBsaXN0ZW5lcnMucHVzaChmbik7XG4gICAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoIWxpc3RlbmVycy4kJGludGVyICYmIGF0dHJzLmhhc093blByb3BlcnR5KGtleSkgJiYgIWlzVW5kZWZpbmVkKGF0dHJzW2tleV0pKSB7XG4gICAgICAgICAgICAvLyBubyBvbmUgcmVnaXN0ZXJlZCBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiwgc28gbGV0cyBjYWxsIGl0IG1hbnVhbGx5XG4gICAgICAgICAgICBmbihhdHRyc1trZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBhcnJheVJlbW92ZShsaXN0ZW5lcnMsIGZuKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2V0U3BlY2lhbEF0dHIoZWxlbWVudCwgYXR0ck5hbWUsIHZhbHVlKSB7XG4gICAgICAvLyBBdHRyaWJ1dGVzIG5hbWVzIHRoYXQgZG8gbm90IHN0YXJ0IHdpdGggbGV0dGVycyAoc3VjaCBhcyBgKGNsaWNrKWApIGNhbm5vdCBiZSBzZXQgdXNpbmcgYHNldEF0dHJpYnV0ZWBcbiAgICAgIC8vIHNvIHdlIGhhdmUgdG8ganVtcCB0aHJvdWdoIHNvbWUgaG9vcHMgdG8gZ2V0IHN1Y2ggYW4gYXR0cmlidXRlXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMTMzMThcbiAgICAgIHNwZWNpYWxBdHRySG9sZGVyLmlubmVySFRNTCA9ICc8c3BhbiAnICsgYXR0ck5hbWUgKyAnPic7XG4gICAgICB2YXIgYXR0cmlidXRlcyA9IHNwZWNpYWxBdHRySG9sZGVyLmZpcnN0Q2hpbGQuYXR0cmlidXRlcztcbiAgICAgIHZhciBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzWzBdO1xuICAgICAgLy8gV2UgaGF2ZSB0byByZW1vdmUgdGhlIGF0dHJpYnV0ZSBmcm9tIGl0cyBjb250YWluZXIgZWxlbWVudCBiZWZvcmUgd2UgY2FuIGFkZCBpdCB0byB0aGUgZGVzdGluYXRpb24gZWxlbWVudFxuICAgICAgYXR0cmlidXRlcy5yZW1vdmVOYW1lZEl0ZW0oYXR0cmlidXRlLm5hbWUpO1xuICAgICAgYXR0cmlidXRlLnZhbHVlID0gdmFsdWU7XG4gICAgICBlbGVtZW50LmF0dHJpYnV0ZXMuc2V0TmFtZWRJdGVtKGF0dHJpYnV0ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2FmZUFkZENsYXNzKCRlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlnbm9yZSwgc2luY2UgaXQgbWVhbnMgdGhhdCB3ZSBhcmUgdHJ5aW5nIHRvIHNldCBjbGFzcyBvblxuICAgICAgICAvLyBTVkcgZWxlbWVudCwgd2hlcmUgY2xhc3MgbmFtZSBpcyByZWFkLW9ubHkuXG4gICAgICB9XG4gICAgfVxuXG5cbiAgICB2YXIgc3RhcnRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2woKSxcbiAgICAgICAgZW5kU3ltYm9sID0gJGludGVycG9sYXRlLmVuZFN5bWJvbCgpLFxuICAgICAgICBkZW5vcm1hbGl6ZVRlbXBsYXRlID0gKHN0YXJ0U3ltYm9sID09PSAne3snICYmIGVuZFN5bWJvbCAgPT09ICd9fScpXG4gICAgICAgICAgICA/IGlkZW50aXR5XG4gICAgICAgICAgICA6IGZ1bmN0aW9uIGRlbm9ybWFsaXplVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoL1xce1xcey9nLCBzdGFydFN5bWJvbCkucmVwbGFjZSgvfX0vZywgZW5kU3ltYm9sKTtcbiAgICAgICAgfSxcbiAgICAgICAgTkdfQVRUUl9CSU5ESU5HID0gL15uZ0F0dHJbQS1aXS87XG4gICAgdmFyIE1VTFRJX0VMRU1FTlRfRElSX1JFID0gL14oLispU3RhcnQkLztcblxuICAgIGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZEJpbmRpbmdJbmZvKCRlbGVtZW50LCBiaW5kaW5nKSB7XG4gICAgICB2YXIgYmluZGluZ3MgPSAkZWxlbWVudC5kYXRhKCckYmluZGluZycpIHx8IFtdO1xuXG4gICAgICBpZiAoaXNBcnJheShiaW5kaW5nKSkge1xuICAgICAgICBiaW5kaW5ncyA9IGJpbmRpbmdzLmNvbmNhdChiaW5kaW5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbmRpbmdzLnB1c2goYmluZGluZyk7XG4gICAgICB9XG5cbiAgICAgICRlbGVtZW50LmRhdGEoJyRiaW5kaW5nJywgYmluZGluZ3MpO1xuICAgIH0gOiBub29wO1xuXG4gICAgY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZEJpbmRpbmdDbGFzcygkZWxlbWVudCkge1xuICAgICAgc2FmZUFkZENsYXNzKCRlbGVtZW50LCAnbmctYmluZGluZycpO1xuICAgIH0gOiBub29wO1xuXG4gICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZFNjb3BlSW5mbygkZWxlbWVudCwgc2NvcGUsIGlzb2xhdGVkLCBub1RlbXBsYXRlKSB7XG4gICAgICB2YXIgZGF0YU5hbWUgPSBpc29sYXRlZCA/IChub1RlbXBsYXRlID8gJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyA6ICckaXNvbGF0ZVNjb3BlJykgOiAnJHNjb3BlJztcbiAgICAgICRlbGVtZW50LmRhdGEoZGF0YU5hbWUsIHNjb3BlKTtcbiAgICB9IDogbm9vcDtcblxuICAgIGNvbXBpbGUuJCRhZGRTY29wZUNsYXNzID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkU2NvcGVDbGFzcygkZWxlbWVudCwgaXNvbGF0ZWQpIHtcbiAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgaXNvbGF0ZWQgPyAnbmctaXNvbGF0ZS1zY29wZScgOiAnbmctc2NvcGUnKTtcbiAgICB9IDogbm9vcDtcblxuICAgIGNvbXBpbGUuJCRjcmVhdGVDb21tZW50ID0gZnVuY3Rpb24oZGlyZWN0aXZlTmFtZSwgY29tbWVudCkge1xuICAgICAgdmFyIGNvbnRlbnQgPSAnJztcbiAgICAgIGlmIChkZWJ1Z0luZm9FbmFibGVkKSB7XG4gICAgICAgIGNvbnRlbnQgPSAnICcgKyAoZGlyZWN0aXZlTmFtZSB8fCAnJykgKyAnOiAnO1xuICAgICAgICBpZiAoY29tbWVudCkgY29udGVudCArPSBjb21tZW50ICsgJyAnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbnRlbnQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gY29tcGlsZTtcblxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIGZ1bmN0aW9uIGNvbXBpbGUoJGNvbXBpbGVOb2RlcywgdHJhbnNjbHVkZUZuLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xuICAgICAgaWYgKCEoJGNvbXBpbGVOb2RlcyBpbnN0YW5jZW9mIGpxTGl0ZSkpIHtcbiAgICAgICAgLy8ganF1ZXJ5IGFsd2F5cyByZXdyYXBzLCB3aGVyZWFzIHdlIG5lZWQgdG8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIHNlbGVjdG9yIHNvIHRoYXQgd2UgY2FuXG4gICAgICAgIC8vIG1vZGlmeSBpdC5cbiAgICAgICAgJGNvbXBpbGVOb2RlcyA9IGpxTGl0ZSgkY29tcGlsZU5vZGVzKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb21wb3NpdGVMaW5rRm4gPVxuICAgICAgICAgICAgICBjb21waWxlTm9kZXMoJGNvbXBpbGVOb2RlcywgdHJhbnNjbHVkZUZuLCAkY29tcGlsZU5vZGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgcHJldmlvdXNDb21waWxlQ29udGV4dCk7XG4gICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcygkY29tcGlsZU5vZGVzKTtcbiAgICAgIHZhciBuYW1lc3BhY2UgPSBudWxsO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHB1YmxpY0xpbmtGbihzY29wZSwgY2xvbmVDb25uZWN0Rm4sIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCEkY29tcGlsZU5vZGVzKSB7XG4gICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ211bHRpbGluaycsICdUaGlzIGVsZW1lbnQgaGFzIGFscmVhZHkgYmVlbiBsaW5rZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0QXJnKHNjb3BlLCAnc2NvcGUnKTtcblxuICAgICAgICBpZiAocHJldmlvdXNDb21waWxlQ29udGV4dCAmJiBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5lZWRzTmV3U2NvcGUpIHtcbiAgICAgICAgICAvLyBBIHBhcmVudCBkaXJlY3RpdmUgZGlkIGEgcmVwbGFjZSBhbmQgYSBkaXJlY3RpdmUgb24gdGhpcyBlbGVtZW50IGFza2VkXG4gICAgICAgICAgLy8gZm9yIHRyYW5zY2x1c2lvbiwgd2hpY2ggY2F1c2VkIHVzIHRvIGxvc2UgYSBsYXllciBvZiBlbGVtZW50IG9uIHdoaWNoXG4gICAgICAgICAgLy8gd2UgY291bGQgaG9sZCB0aGUgbmV3IHRyYW5zY2x1c2lvbiBzY29wZSwgc28gd2Ugd2lsbCBjcmVhdGUgaXQgbWFudWFsbHlcbiAgICAgICAgICAvLyBoZXJlLlxuICAgICAgICAgIHNjb3BlID0gc2NvcGUuJHBhcmVudC4kbmV3KCk7XG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuID0gb3B0aW9ucy5wYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbixcbiAgICAgICAgICB0cmFuc2NsdWRlQ29udHJvbGxlcnMgPSBvcHRpb25zLnRyYW5zY2x1ZGVDb250cm9sbGVycyxcbiAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gb3B0aW9ucy5mdXR1cmVQYXJlbnRFbGVtZW50O1xuXG4gICAgICAgIC8vIFdoZW4gYHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuYCBpcyBwYXNzZWQsIGl0IGlzIGFcbiAgICAgICAgLy8gYGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlYCBmdW5jdGlvbiAoaXQgd2FzIHByZXZpb3VzbHkgcGFzc2VkXG4gICAgICAgIC8vIGFzIGB0cmFuc2NsdWRlYCB0byBkaXJlY3RpdmUubGluaykgc28gd2UgbXVzdCB1bndyYXAgaXQgdG8gZ2V0XG4gICAgICAgIC8vIGl0cyBgYm91bmRUcmFuc2NsdWRlRm5gXG4gICAgICAgIGlmIChwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiAmJiBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbi4kJGJvdW5kVHJhbnNjbHVkZSkge1xuICAgICAgICAgIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuID0gcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4uJCRib3VuZFRyYW5zY2x1ZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICAgIG5hbWVzcGFjZSA9IGRldGVjdE5hbWVzcGFjZUZvckNoaWxkRWxlbWVudHMoZnV0dXJlUGFyZW50RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyICRsaW5rTm9kZTtcbiAgICAgICAgaWYgKG5hbWVzcGFjZSAhPT0gJ2h0bWwnKSB7XG4gICAgICAgICAgLy8gV2hlbiB1c2luZyBhIGRpcmVjdGl2ZSB3aXRoIHJlcGxhY2U6dHJ1ZSBhbmQgdGVtcGxhdGVVcmwgdGhlICRjb21waWxlTm9kZXNcbiAgICAgICAgICAvLyAob3IgYSBjaGlsZCBlbGVtZW50IGluc2lkZSBvZiB0aGVtKVxuICAgICAgICAgIC8vIG1pZ2h0IGNoYW5nZSwgc28gd2UgbmVlZCB0byByZWNyZWF0ZSB0aGUgbmFtZXNwYWNlIGFkYXB0ZWQgY29tcGlsZU5vZGVzXG4gICAgICAgICAgLy8gZm9yIGNhbGwgdG8gdGhlIGxpbmsgZnVuY3Rpb24uXG4gICAgICAgICAgLy8gTm90ZTogVGhpcyB3aWxsIGFscmVhZHkgY2xvbmUgdGhlIG5vZGVzLi4uXG4gICAgICAgICAgJGxpbmtOb2RlID0ganFMaXRlKFxuICAgICAgICAgICAgd3JhcFRlbXBsYXRlKG5hbWVzcGFjZSwganFMaXRlKCc8ZGl2PicpLmFwcGVuZCgkY29tcGlsZU5vZGVzKS5odG1sKCkpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChjbG9uZUNvbm5lY3RGbikge1xuICAgICAgICAgIC8vIGltcG9ydGFudCEhOiB3ZSBtdXN0IGNhbGwgb3VyIGpxTGl0ZS5jbG9uZSgpIHNpbmNlIHRoZSBqUXVlcnkgb25lIGlzIHRyeWluZyB0byBiZSBzbWFydFxuICAgICAgICAgIC8vIGFuZCBzb21ldGltZXMgY2hhbmdlcyB0aGUgc3RydWN0dXJlIG9mIHRoZSBET00uXG4gICAgICAgICAgJGxpbmtOb2RlID0gSlFMaXRlUHJvdG90eXBlLmNsb25lLmNhbGwoJGNvbXBpbGVOb2Rlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGxpbmtOb2RlID0gJGNvbXBpbGVOb2RlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFuc2NsdWRlQ29udHJvbGxlcnMpIHtcbiAgICAgICAgICBmb3IgKHZhciBjb250cm9sbGVyTmFtZSBpbiB0cmFuc2NsdWRlQ29udHJvbGxlcnMpIHtcbiAgICAgICAgICAgICRsaW5rTm9kZS5kYXRhKCckJyArIGNvbnRyb2xsZXJOYW1lICsgJ0NvbnRyb2xsZXInLCB0cmFuc2NsdWRlQ29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdLmluc3RhbmNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVJbmZvKCRsaW5rTm9kZSwgc2NvcGUpO1xuXG4gICAgICAgIGlmIChjbG9uZUNvbm5lY3RGbikgY2xvbmVDb25uZWN0Rm4oJGxpbmtOb2RlLCBzY29wZSk7XG4gICAgICAgIGlmIChjb21wb3NpdGVMaW5rRm4pIGNvbXBvc2l0ZUxpbmtGbihzY29wZSwgJGxpbmtOb2RlLCAkbGlua05vZGUsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKTtcblxuICAgICAgICBpZiAoIWNsb25lQ29ubmVjdEZuKSB7XG4gICAgICAgICAgJGNvbXBpbGVOb2RlcyA9IGNvbXBvc2l0ZUxpbmtGbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICRsaW5rTm9kZTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGV0ZWN0TmFtZXNwYWNlRm9yQ2hpbGRFbGVtZW50cyhwYXJlbnRFbGVtZW50KSB7XG4gICAgICAvLyBUT0RPOiBNYWtlIHRoaXMgZGV0ZWN0IE1hdGhNTCBhcyB3ZWxsLi4uXG4gICAgICB2YXIgbm9kZSA9IHBhcmVudEVsZW1lbnQgJiYgcGFyZW50RWxlbWVudFswXTtcbiAgICAgIGlmICghbm9kZSkge1xuICAgICAgICByZXR1cm4gJ2h0bWwnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5vZGVOYW1lXyhub2RlKSAhPT0gJ2ZvcmVpZ25vYmplY3QnICYmIHRvU3RyaW5nLmNhbGwobm9kZSkubWF0Y2goL1NWRy8pID8gJ3N2ZycgOiAnaHRtbCc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGlsZSBmdW5jdGlvbiBtYXRjaGVzIGVhY2ggbm9kZSBpbiBub2RlTGlzdCBhZ2FpbnN0IHRoZSBkaXJlY3RpdmVzLiBPbmNlIGFsbCBkaXJlY3RpdmVzXG4gICAgICogZm9yIGEgcGFydGljdWxhciBub2RlIGFyZSBjb2xsZWN0ZWQgdGhlaXIgY29tcGlsZSBmdW5jdGlvbnMgYXJlIGV4ZWN1dGVkLiBUaGUgY29tcGlsZVxuICAgICAqIGZ1bmN0aW9ucyByZXR1cm4gdmFsdWVzIC0gdGhlIGxpbmtpbmcgZnVuY3Rpb25zIC0gYXJlIGNvbWJpbmVkIGludG8gYSBjb21wb3NpdGUgbGlua2luZ1xuICAgICAqIGZ1bmN0aW9uLCB3aGljaCBpcyB0aGUgYSBsaW5raW5nIGZ1bmN0aW9uIGZvciB0aGUgbm9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0IGFuIGFycmF5IG9mIG5vZGVzIG9yIE5vZGVMaXN0IHRvIGNvbXBpbGVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGFuZ3VsYXIuU2NvcGUsIGNsb25lQXR0YWNoRm49KX0gdHJhbnNjbHVkZUZuIEEgbGlua2luZyBmdW5jdGlvbiwgd2hlcmUgdGhlXG4gICAgICogICAgICAgIHNjb3BlIGFyZ3VtZW50IGlzIGF1dG8tZ2VuZXJhdGVkIHRvIHRoZSBuZXcgY2hpbGQgb2YgdGhlIHRyYW5zY2x1ZGVkIHBhcmVudCBzY29wZS5cbiAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSAkcm9vdEVsZW1lbnQgSWYgdGhlIG5vZGVMaXN0IGlzIHRoZSByb290IG9mIHRoZSBjb21waWxhdGlvbiB0cmVlIHRoZW5cbiAgICAgKiAgICAgICAgdGhlIHJvb3RFbGVtZW50IG11c3QgYmUgc2V0IHRoZSBqcUxpdGUgY29sbGVjdGlvbiBvZiB0aGUgY29tcGlsZSByb290LiBUaGlzIGlzXG4gICAgICogICAgICAgIG5lZWRlZCBzbyB0aGF0IHRoZSBqcUxpdGUgY29sbGVjdGlvbiBpdGVtcyBjYW4gYmUgcmVwbGFjZWQgd2l0aCB3aWRnZXRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbWF4UHJpb3JpdHkgTWF4IGRpcmVjdGl2ZSBwcmlvcml0eS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgY29tcG9zaXRlIGxpbmtpbmcgZnVuY3Rpb24gb2YgYWxsIG9mIHRoZSBtYXRjaGVkIGRpcmVjdGl2ZXMgb3IgbnVsbC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21waWxlTm9kZXMobm9kZUxpc3QsIHRyYW5zY2x1ZGVGbiwgJHJvb3RFbGVtZW50LCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIHZhciBsaW5rRm5zID0gW10sXG4gICAgICAgICAgLy8gYG5vZGVMaXN0YCBjYW4gYmUgZWl0aGVyIGFuIGVsZW1lbnQncyBgLmNoaWxkTm9kZXNgIChsaXZlIE5vZGVMaXN0KVxuICAgICAgICAgIC8vIG9yIGEganFMaXRlL2pRdWVyeSBjb2xsZWN0aW9uIG9yIGFuIGFycmF5XG4gICAgICAgICAgbm90TGl2ZUxpc3QgPSBpc0FycmF5KG5vZGVMaXN0KSB8fCAobm9kZUxpc3QgaW5zdGFuY2VvZiBqcUxpdGUpLFxuICAgICAgICAgIGF0dHJzLCBkaXJlY3RpdmVzLCBub2RlTGlua0ZuLCBjaGlsZE5vZGVzLCBjaGlsZExpbmtGbiwgbGlua0ZuRm91bmQsIG5vZGVMaW5rRm5Gb3VuZDtcblxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGF0dHJzID0gbmV3IEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICAvLyBTdXBwb3J0OiBJRSAxMSBvbmx5XG4gICAgICAgIC8vIFdvcmthcm91bmQgZm9yICMxMTc4MSBhbmQgIzE0OTI0XG4gICAgICAgIGlmIChtc2llID09PSAxMSkge1xuICAgICAgICAgIG1lcmdlQ29uc2VjdXRpdmVUZXh0Tm9kZXMobm9kZUxpc3QsIGksIG5vdExpdmVMaXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIG11c3QgYWx3YXlzIHJlZmVyIHRvIGBub2RlTGlzdFtpXWAgaGVyZWFmdGVyLFxuICAgICAgICAvLyBzaW5jZSB0aGUgbm9kZXMgY2FuIGJlIHJlcGxhY2VkIHVuZGVybmVhdGggdXMuXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhub2RlTGlzdFtpXSwgW10sIGF0dHJzLCBpID09PSAwID8gbWF4UHJpb3JpdHkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlRGlyZWN0aXZlKTtcblxuICAgICAgICBub2RlTGlua0ZuID0gKGRpcmVjdGl2ZXMubGVuZ3RoKVxuICAgICAgICAgICAgPyBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgbm9kZUxpc3RbaV0sIGF0dHJzLCB0cmFuc2NsdWRlRm4sICRyb290RWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCwgW10sIFtdLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KVxuICAgICAgICAgICAgOiBudWxsO1xuXG4gICAgICAgIGlmIChub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4uc2NvcGUpIHtcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcyhhdHRycy4kJGVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hpbGRMaW5rRm4gPSAobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIShjaGlsZE5vZGVzID0gbm9kZUxpc3RbaV0uY2hpbGROb2RlcykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAhY2hpbGROb2Rlcy5sZW5ndGgpXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogY29tcGlsZU5vZGVzKGNoaWxkTm9kZXMsXG4gICAgICAgICAgICAgICAgIG5vZGVMaW5rRm4gPyAoXG4gICAgICAgICAgICAgICAgICAobm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCB8fCAhbm9kZUxpbmtGbi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgICAmJiBub2RlTGlua0ZuLnRyYW5zY2x1ZGUpIDogdHJhbnNjbHVkZUZuKTtcblxuICAgICAgICBpZiAobm9kZUxpbmtGbiB8fCBjaGlsZExpbmtGbikge1xuICAgICAgICAgIGxpbmtGbnMucHVzaChpLCBub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG4gICAgICAgICAgbGlua0ZuRm91bmQgPSB0cnVlO1xuICAgICAgICAgIG5vZGVMaW5rRm5Gb3VuZCA9IG5vZGVMaW5rRm5Gb3VuZCB8fCBub2RlTGlua0ZuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy91c2UgdGhlIHByZXZpb3VzIGNvbnRleHQgb25seSBmb3IgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHZpcnR1YWwgZ3JvdXBcbiAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIHJldHVybiBhIGxpbmtpbmcgZnVuY3Rpb24gaWYgd2UgaGF2ZSBmb3VuZCBhbnl0aGluZywgbnVsbCBvdGhlcndpc2VcbiAgICAgIHJldHVybiBsaW5rRm5Gb3VuZCA/IGNvbXBvc2l0ZUxpbmtGbiA6IG51bGw7XG5cbiAgICAgIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbihzY29wZSwgbm9kZUxpc3QsICRyb290RWxlbWVudCwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgdmFyIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuLCBub2RlLCBjaGlsZFNjb3BlLCBpLCBpaSwgaWR4LCBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuO1xuICAgICAgICB2YXIgc3RhYmxlTm9kZUxpc3Q7XG5cblxuICAgICAgICBpZiAobm9kZUxpbmtGbkZvdW5kKSB7XG4gICAgICAgICAgLy8gY29weSBub2RlTGlzdCBzbyB0aGF0IGlmIGEgbm9kZUxpbmtGbiByZW1vdmVzIG9yIGFkZHMgYW4gZWxlbWVudCBhdCB0aGlzIERPTSBsZXZlbCBvdXJcbiAgICAgICAgICAvLyBvZmZzZXRzIGRvbid0IGdldCBzY3Jld2VkIHVwXG4gICAgICAgICAgdmFyIG5vZGVMaXN0TGVuZ3RoID0gbm9kZUxpc3QubGVuZ3RoO1xuICAgICAgICAgIHN0YWJsZU5vZGVMaXN0ID0gbmV3IEFycmF5KG5vZGVMaXN0TGVuZ3RoKTtcblxuICAgICAgICAgIC8vIGNyZWF0ZSBhIHNwYXJzZSBhcnJheSBieSBvbmx5IGNvcHlpbmcgdGhlIGVsZW1lbnRzIHdoaWNoIGhhdmUgYSBsaW5rRm5cbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlua0Zucy5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICAgICAgaWR4ID0gbGlua0Zuc1tpXTtcbiAgICAgICAgICAgIHN0YWJsZU5vZGVMaXN0W2lkeF0gPSBub2RlTGlzdFtpZHhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGFibGVOb2RlTGlzdCA9IG5vZGVMaXN0O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBsaW5rRm5zLmxlbmd0aDsgaSA8IGlpOykge1xuICAgICAgICAgIG5vZGUgPSBzdGFibGVOb2RlTGlzdFtsaW5rRm5zW2krK11dO1xuICAgICAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG4gICAgICAgICAgY2hpbGRMaW5rRm4gPSBsaW5rRm5zW2krK107XG5cbiAgICAgICAgICBpZiAobm9kZUxpbmtGbikge1xuICAgICAgICAgICAgaWYgKG5vZGVMaW5rRm4uc2NvcGUpIHtcbiAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IHNjb3BlLiRuZXcoKTtcbiAgICAgICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbyhqcUxpdGUobm9kZSksIGNoaWxkU2NvcGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IHNjb3BlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCkge1xuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oXG4gICAgICAgICAgICAgICAgICBzY29wZSwgbm9kZUxpbmtGbi50cmFuc2NsdWRlLCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50ICYmIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICghcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gJiYgdHJhbnNjbHVkZUZuKSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGVMaW5rRm4oY2hpbGRMaW5rRm4sIGNoaWxkU2NvcGUsIG5vZGUsICRyb290RWxlbWVudCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkTGlua0ZuKSB7XG4gICAgICAgICAgICBjaGlsZExpbmtGbihzY29wZSwgbm9kZS5jaGlsZE5vZGVzLCB1bmRlZmluZWQsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtZXJnZUNvbnNlY3V0aXZlVGV4dE5vZGVzKG5vZGVMaXN0LCBpZHgsIG5vdExpdmVMaXN0KSB7XG4gICAgICB2YXIgbm9kZSA9IG5vZGVMaXN0W2lkeF07XG4gICAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgdmFyIHNpYmxpbmc7XG5cbiAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfVEVYVCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHNpYmxpbmcgPSBwYXJlbnQgPyBub2RlLm5leHRTaWJsaW5nIDogbm9kZUxpc3RbaWR4ICsgMV07XG4gICAgICAgIGlmICghc2libGluZyB8fCBzaWJsaW5nLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfVEVYVCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5ub2RlVmFsdWUgPSBub2RlLm5vZGVWYWx1ZSArIHNpYmxpbmcubm9kZVZhbHVlO1xuXG4gICAgICAgIGlmIChzaWJsaW5nLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICBzaWJsaW5nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2libGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vdExpdmVMaXN0ICYmIHNpYmxpbmcgPT09IG5vZGVMaXN0W2lkeCArIDFdKSB7XG4gICAgICAgICAgbm9kZUxpc3Quc3BsaWNlKGlkeCArIDEsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIHRyYW5zY2x1ZGVGbiwgcHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgZnVuY3Rpb24gYm91bmRUcmFuc2NsdWRlRm4odHJhbnNjbHVkZWRTY29wZSwgY2xvbmVGbiwgY29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQsIGNvbnRhaW5pbmdTY29wZSkge1xuXG4gICAgICAgIGlmICghdHJhbnNjbHVkZWRTY29wZSkge1xuICAgICAgICAgIHRyYW5zY2x1ZGVkU2NvcGUgPSBzY29wZS4kbmV3KGZhbHNlLCBjb250YWluaW5nU2NvcGUpO1xuICAgICAgICAgIHRyYW5zY2x1ZGVkU2NvcGUuJCR0cmFuc2NsdWRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJhbnNjbHVkZUZuKHRyYW5zY2x1ZGVkU2NvcGUsIGNsb25lRm4sIHtcbiAgICAgICAgICBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjogcHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbixcbiAgICAgICAgICB0cmFuc2NsdWRlQ29udHJvbGxlcnM6IGNvbnRyb2xsZXJzLFxuICAgICAgICAgIGZ1dHVyZVBhcmVudEVsZW1lbnQ6IGZ1dHVyZVBhcmVudEVsZW1lbnRcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIG5lZWQgIHRvIGF0dGFjaCB0aGUgdHJhbnNjbHVzaW9uIHNsb3RzIG9udG8gdGhlIGBib3VuZFRyYW5zY2x1ZGVGbmBcbiAgICAgIC8vIHNvIHRoYXQgdGhleSBhcmUgYXZhaWxhYmxlIGluc2lkZSB0aGUgYGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlYCBmdW5jdGlvblxuICAgICAgdmFyIGJvdW5kU2xvdHMgPSBib3VuZFRyYW5zY2x1ZGVGbi4kJHNsb3RzID0gY3JlYXRlTWFwKCk7XG4gICAgICBmb3IgKHZhciBzbG90TmFtZSBpbiB0cmFuc2NsdWRlRm4uJCRzbG90cykge1xuICAgICAgICBpZiAodHJhbnNjbHVkZUZuLiQkc2xvdHNbc2xvdE5hbWVdKSB7XG4gICAgICAgICAgYm91bmRTbG90c1tzbG90TmFtZV0gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuLiQkc2xvdHNbc2xvdE5hbWVdLCBwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBib3VuZFNsb3RzW3Nsb3ROYW1lXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvb2tzIGZvciBkaXJlY3RpdmVzIG9uIHRoZSBnaXZlbiBub2RlIGFuZCBhZGRzIHRoZW0gdG8gdGhlIGRpcmVjdGl2ZSBjb2xsZWN0aW9uIHdoaWNoIGlzXG4gICAgICogc29ydGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5vZGUgTm9kZSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIGRpcmVjdGl2ZXMgQW4gYXJyYXkgdG8gd2hpY2ggdGhlIGRpcmVjdGl2ZXMgYXJlIGFkZGVkIHRvLiBUaGlzIGFycmF5IGlzIHNvcnRlZCBiZWZvcmVcbiAgICAgKiAgICAgICAgdGhlIGZ1bmN0aW9uIHJldHVybnMuXG4gICAgICogQHBhcmFtIGF0dHJzIFRoZSBzaGFyZWQgYXR0cnMgb2JqZWN0IHdoaWNoIGlzIHVzZWQgdG8gcG9wdWxhdGUgdGhlIG5vcm1hbGl6ZWQgYXR0cmlidXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1heFByaW9yaXR5IE1heCBkaXJlY3RpdmUgcHJpb3JpdHkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29sbGVjdERpcmVjdGl2ZXMobm9kZSwgZGlyZWN0aXZlcywgYXR0cnMsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpIHtcbiAgICAgIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGUsXG4gICAgICAgICAgYXR0cnNNYXAgPSBhdHRycy4kYXR0cixcbiAgICAgICAgICBtYXRjaCxcbiAgICAgICAgICBub2RlTmFtZSxcbiAgICAgICAgICBjbGFzc05hbWU7XG5cbiAgICAgIHN3aXRjaCAobm9kZVR5cGUpIHtcbiAgICAgICAgY2FzZSBOT0RFX1RZUEVfRUxFTUVOVDogLyogRWxlbWVudCAqL1xuXG4gICAgICAgICAgbm9kZU5hbWUgPSBub2RlTmFtZV8obm9kZSk7XG5cbiAgICAgICAgICAvLyB1c2UgdGhlIG5vZGUgbmFtZTogPGRpcmVjdGl2ZT5cbiAgICAgICAgICBhZGREaXJlY3RpdmUoZGlyZWN0aXZlcyxcbiAgICAgICAgICAgICAgZGlyZWN0aXZlTm9ybWFsaXplKG5vZGVOYW1lKSwgJ0UnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKTtcblxuICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgYXR0cmlidXRlc1xuICAgICAgICAgIGZvciAodmFyIGF0dHIsIG5hbWUsIG5OYW1lLCBuZ0F0dHJOYW1lLCB2YWx1ZSwgaXNOZ0F0dHIsIG5BdHRycyA9IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICAgICBqID0gMCwgamogPSBuQXR0cnMgJiYgbkF0dHJzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBhdHRyU3RhcnROYW1lID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgYXR0ckVuZE5hbWUgPSBmYWxzZTtcblxuICAgICAgICAgICAgYXR0ciA9IG5BdHRyc1tqXTtcbiAgICAgICAgICAgIG5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgICB2YWx1ZSA9IGF0dHIudmFsdWU7XG5cbiAgICAgICAgICAgIC8vIHN1cHBvcnQgbmdBdHRyIGF0dHJpYnV0ZSBiaW5kaW5nXG4gICAgICAgICAgICBuZ0F0dHJOYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG5hbWUpO1xuICAgICAgICAgICAgaXNOZ0F0dHIgPSBOR19BVFRSX0JJTkRJTkcudGVzdChuZ0F0dHJOYW1lKTtcbiAgICAgICAgICAgIGlmIChpc05nQXR0cikge1xuICAgICAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKFBSRUZJWF9SRUdFWFAsICcnKVxuICAgICAgICAgICAgICAgIC5zdWJzdHIoOCkucmVwbGFjZSgvXyguKS9nLCBmdW5jdGlvbihtYXRjaCwgbGV0dGVyKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBtdWx0aUVsZW1lbnRNYXRjaCA9IG5nQXR0ck5hbWUubWF0Y2goTVVMVElfRUxFTUVOVF9ESVJfUkUpO1xuICAgICAgICAgICAgaWYgKG11bHRpRWxlbWVudE1hdGNoICYmIGRpcmVjdGl2ZUlzTXVsdGlFbGVtZW50KG11bHRpRWxlbWVudE1hdGNoWzFdKSkge1xuICAgICAgICAgICAgICBhdHRyU3RhcnROYW1lID0gbmFtZTtcbiAgICAgICAgICAgICAgYXR0ckVuZE5hbWUgPSBuYW1lLnN1YnN0cigwLCBuYW1lLmxlbmd0aCAtIDUpICsgJ2VuZCc7XG4gICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigwLCBuYW1lLmxlbmd0aCAtIDYpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgYXR0cnNNYXBbbk5hbWVdID0gbmFtZTtcbiAgICAgICAgICAgIGlmIChpc05nQXR0ciB8fCAhYXR0cnMuaGFzT3duUHJvcGVydHkobk5hbWUpKSB7XG4gICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGdldEJvb2xlYW5BdHRyTmFtZShub2RlLCBuTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHRydWU7IC8vIHByZXNlbmNlIG1lYW5zIHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUobm9kZSwgZGlyZWN0aXZlcywgdmFsdWUsIG5OYW1lLCBpc05nQXR0cik7XG4gICAgICAgICAgICBhZGREaXJlY3RpdmUoZGlyZWN0aXZlcywgbk5hbWUsICdBJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgYXR0clN0YXJ0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ckVuZE5hbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBub2RlLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAnaGlkZGVuJykge1xuICAgICAgICAgICAgLy8gSGlkZGVuIGlucHV0IGVsZW1lbnRzIGNhbiBoYXZlIHN0cmFuZ2UgYmVoYXZpb3VyIHdoZW4gbmF2aWdhdGluZyBiYWNrIHRvIHRoZSBwYWdlXG4gICAgICAgICAgICAvLyBUaGlzIHRlbGxzIHRoZSBicm93c2VyIG5vdCB0byB0cnkgdG8gY2FjaGUgYW5kIHJlaW5zdGF0ZSBwcmV2aW91cyB2YWx1ZXNcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnLCAnb2ZmJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gdXNlIGNsYXNzIGFzIGRpcmVjdGl2ZVxuICAgICAgICAgIGlmICghY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZCkgYnJlYWs7XG4gICAgICAgICAgY2xhc3NOYW1lID0gbm9kZS5jbGFzc05hbWU7XG4gICAgICAgICAgaWYgKGlzT2JqZWN0KGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgLy8gTWF5YmUgU1ZHQW5pbWF0ZWRTdHJpbmdcbiAgICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLmFuaW1WYWw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1N0cmluZyhjbGFzc05hbWUpICYmIGNsYXNzTmFtZSAhPT0gJycpIHtcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSBDTEFTU19ESVJFQ1RJVkVfUkVHRVhQLmV4ZWMoY2xhc3NOYW1lKSkpIHtcbiAgICAgICAgICAgICAgbk5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobWF0Y2hbMl0pO1xuICAgICAgICAgICAgICBpZiAoYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnQycsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdHJpbShtYXRjaFszXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnN1YnN0cihtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE5PREVfVFlQRV9URVhUOiAvKiBUZXh0IE5vZGUgKi9cbiAgICAgICAgICBhZGRUZXh0SW50ZXJwb2xhdGVEaXJlY3RpdmUoZGlyZWN0aXZlcywgbm9kZS5ub2RlVmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE5PREVfVFlQRV9DT01NRU5UOiAvKiBDb21tZW50ICovXG4gICAgICAgICAgaWYgKCFjb21tZW50RGlyZWN0aXZlc0VuYWJsZWQpIGJyZWFrO1xuICAgICAgICAgIGNvbGxlY3RDb21tZW50RGlyZWN0aXZlcyhub2RlLCBkaXJlY3RpdmVzLCBhdHRycywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGRpcmVjdGl2ZXMuc29ydChieVByaW9yaXR5KTtcbiAgICAgIHJldHVybiBkaXJlY3RpdmVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbGxlY3RDb21tZW50RGlyZWN0aXZlcyhub2RlLCBkaXJlY3RpdmVzLCBhdHRycywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSkge1xuICAgICAgLy8gZnVuY3Rpb24gY3JlYXRlZCBiZWNhdXNlIG9mIHBlcmZvcm1hbmNlLCB0cnkvY2F0Y2ggZGlzYWJsZXNcbiAgICAgIC8vIHRoZSBvcHRpbWl6YXRpb24gb2YgdGhlIHdob2xlIGZ1bmN0aW9uICMxNDg0OFxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG1hdGNoID0gQ09NTUVOVF9ESVJFQ1RJVkVfUkVHRVhQLmV4ZWMobm9kZS5ub2RlVmFsdWUpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICB2YXIgbk5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobWF0Y2hbMV0pO1xuICAgICAgICAgIGlmIChhZGREaXJlY3RpdmUoZGlyZWN0aXZlcywgbk5hbWUsICdNJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSkpIHtcbiAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHRyaW0obWF0Y2hbMl0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyB0dXJucyBvdXQgdGhhdCB1bmRlciBzb21lIGNpcmN1bXN0YW5jZXMgSUU5IHRocm93cyBlcnJvcnMgd2hlbiBvbmUgYXR0ZW1wdHMgdG8gcmVhZFxuICAgICAgICAvLyBjb21tZW50J3Mgbm9kZSB2YWx1ZS5cbiAgICAgICAgLy8gSnVzdCBpZ25vcmUgaXQgYW5kIGNvbnRpbnVlLiAoQ2FuJ3Qgc2VlbSB0byByZXByb2R1Y2UgaW4gdGVzdCBjYXNlLilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIG5vZGUgd2l0aCBhIGRpcmVjdGl2ZS1zdGFydCBpdCBjb2xsZWN0cyBhbGwgb2YgdGhlIHNpYmxpbmdzIHVudGlsIGl0IGZpbmRzXG4gICAgICogZGlyZWN0aXZlLWVuZC5cbiAgICAgKiBAcGFyYW0gbm9kZVxuICAgICAqIEBwYXJhbSBhdHRyU3RhcnRcbiAgICAgKiBAcGFyYW0gYXR0ckVuZFxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdyb3VwU2Nhbihub2RlLCBhdHRyU3RhcnQsIGF0dHJFbmQpIHtcbiAgICAgIHZhciBub2RlcyA9IFtdO1xuICAgICAgdmFyIGRlcHRoID0gMDtcbiAgICAgIGlmIChhdHRyU3RhcnQgJiYgbm9kZS5oYXNBdHRyaWJ1dGUgJiYgbm9kZS5oYXNBdHRyaWJ1dGUoYXR0clN0YXJ0KSkge1xuICAgICAgICBkbyB7XG4gICAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndXRlcmRpcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ1VudGVybWluYXRlZCBhdHRyaWJ1dGUsIGZvdW5kIFxcJ3swfVxcJyBidXQgbm8gbWF0Y2hpbmcgXFwnezF9XFwnIGZvdW5kLicsXG4gICAgICAgICAgICAgICAgICAgICAgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5PREVfVFlQRV9FTEVNRU5UKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoYXR0clN0YXJ0KSkgZGVwdGgrKztcbiAgICAgICAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZShhdHRyRW5kKSkgZGVwdGgtLTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfSB3aGlsZSAoZGVwdGggPiAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBqcUxpdGUobm9kZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXBwZXIgZm9yIGxpbmtpbmcgZnVuY3Rpb24gd2hpY2ggY29udmVydHMgbm9ybWFsIGxpbmtpbmcgZnVuY3Rpb24gaW50byBhIGdyb3VwZWRcbiAgICAgKiBsaW5raW5nIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBsaW5rRm5cbiAgICAgKiBAcGFyYW0gYXR0clN0YXJ0XG4gICAgICogQHBhcmFtIGF0dHJFbmRcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ3JvdXBFbGVtZW50c0xpbmtGbldyYXBwZXIobGlua0ZuLCBhdHRyU3RhcnQsIGF0dHJFbmQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBncm91cGVkRWxlbWVudHNMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbikge1xuICAgICAgICBlbGVtZW50ID0gZ3JvdXBTY2FuKGVsZW1lbnRbMF0sIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgIHJldHVybiBsaW5rRm4oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiBnZW5lcmF0b3IgdGhhdCBpcyB1c2VkIHRvIHN1cHBvcnQgYm90aCBlYWdlciBhbmQgbGF6eSBjb21waWxhdGlvblxuICAgICAqIGxpbmtpbmcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGVhZ2VyXG4gICAgICogQHBhcmFtICRjb21waWxlTm9kZXNcbiAgICAgKiBAcGFyYW0gdHJhbnNjbHVkZUZuXG4gICAgICogQHBhcmFtIG1heFByaW9yaXR5XG4gICAgICogQHBhcmFtIGlnbm9yZURpcmVjdGl2ZVxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NvbXBpbGVDb250ZXh0XG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBpbGF0aW9uR2VuZXJhdG9yKGVhZ2VyLCAkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIHZhciBjb21waWxlZDtcblxuICAgICAgaWYgKGVhZ2VyKSB7XG4gICAgICAgIHJldHVybiBjb21waWxlKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgcHJldmlvdXNDb21waWxlQ29udGV4dCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gLyoqIEB0aGlzICovIGZ1bmN0aW9uIGxhenlDb21waWxhdGlvbigpIHtcbiAgICAgICAgaWYgKCFjb21waWxlZCkge1xuICAgICAgICAgIGNvbXBpbGVkID0gY29tcGlsZSgkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xuXG4gICAgICAgICAgLy8gTnVsbCBvdXQgYWxsIG9mIHRoZXNlIHJlZmVyZW5jZXMgaW4gb3JkZXIgdG8gbWFrZSB0aGVtIGVsaWdpYmxlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb25cbiAgICAgICAgICAvLyBzaW5jZSB0aGlzIGlzIGEgcG90ZW50aWFsbHkgbG9uZyBsaXZlZCBjbG9zdXJlXG4gICAgICAgICAgJGNvbXBpbGVOb2RlcyA9IHRyYW5zY2x1ZGVGbiA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21waWxlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPbmNlIHRoZSBkaXJlY3RpdmVzIGhhdmUgYmVlbiBjb2xsZWN0ZWQsIHRoZWlyIGNvbXBpbGUgZnVuY3Rpb25zIGFyZSBleGVjdXRlZC4gVGhpcyBtZXRob2RcbiAgICAgKiBpcyByZXNwb25zaWJsZSBmb3IgaW5saW5pbmcgZGlyZWN0aXZlIHRlbXBsYXRlcyBhcyB3ZWxsIGFzIHRlcm1pbmF0aW5nIHRoZSBhcHBsaWNhdGlvblxuICAgICAqIG9mIHRoZSBkaXJlY3RpdmVzIGlmIHRoZSB0ZXJtaW5hbCBkaXJlY3RpdmUgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXMgQXJyYXkgb2YgY29sbGVjdGVkIGRpcmVjdGl2ZXMgdG8gZXhlY3V0ZSB0aGVpciBjb21waWxlIGZ1bmN0aW9uLlxuICAgICAqICAgICAgICB0aGlzIG5lZWRzIHRvIGJlIHByZS1zb3J0ZWQgYnkgcHJpb3JpdHkgb3JkZXIuXG4gICAgICogQHBhcmFtIHtOb2RlfSBjb21waWxlTm9kZSBUaGUgcmF3IERPTSBub2RlIHRvIGFwcGx5IHRoZSBjb21waWxlIGZ1bmN0aW9ucyB0b1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wbGF0ZUF0dHJzIFRoZSBzaGFyZWQgYXR0cmlidXRlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGVGbiBBIGxpbmtpbmcgZnVuY3Rpb24sIHdoZXJlIHRoZVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZSBhcmd1bWVudCBpcyBhdXRvLWdlbmVyYXRlZCB0byB0aGUgbmV3XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIG9mIHRoZSB0cmFuc2NsdWRlZCBwYXJlbnQgc2NvcGUuXG4gICAgICogQHBhcmFtIHtKUUxpdGV9IGpxQ29sbGVjdGlvbiBJZiB3ZSBhcmUgd29ya2luZyBvbiB0aGUgcm9vdCBvZiB0aGUgY29tcGlsZSB0cmVlIHRoZW4gdGhpc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnQgaGFzIHRoZSByb290IGpxTGl0ZSBhcnJheSBzbyB0aGF0IHdlIGNhbiByZXBsYWNlIG5vZGVzXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbiBpdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSBBbiBvcHRpb25hbCBkaXJlY3RpdmUgdGhhdCB3aWxsIGJlIGlnbm9yZWQgd2hlblxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBpbGluZyB0aGUgdHJhbnNjbHVzaW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcHJlTGlua0Zuc1xuICAgICAqIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcG9zdExpbmtGbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJldmlvdXNDb21waWxlQ29udGV4dCBDb250ZXh0IHVzZWQgZm9yIHByZXZpb3VzIGNvbXBpbGF0aW9uIG9mIHRoZSBjdXJyZW50XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gbGlua0ZuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzLCB0cmFuc2NsdWRlRm4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpxQ29sbGVjdGlvbiwgb3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xuICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgfHwge307XG5cbiAgICAgIHZhciB0ZXJtaW5hbFByaW9yaXR5ID0gLU51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgICAgbmV3U2NvcGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5ld1Njb3BlRGlyZWN0aXZlLFxuICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5jb250cm9sbGVyRGlyZWN0aXZlcyxcbiAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxcbiAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQudGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQubm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSxcbiAgICAgICAgICBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlID0gZmFsc2UsXG4gICAgICAgICAgaGFzVGVtcGxhdGUgPSBmYWxzZSxcbiAgICAgICAgICBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUsXG4gICAgICAgICAgJGNvbXBpbGVOb2RlID0gdGVtcGxhdGVBdHRycy4kJGVsZW1lbnQgPSBqcUxpdGUoY29tcGlsZU5vZGUpLFxuICAgICAgICAgIGRpcmVjdGl2ZSxcbiAgICAgICAgICBkaXJlY3RpdmVOYW1lLFxuICAgICAgICAgICR0ZW1wbGF0ZSxcbiAgICAgICAgICByZXBsYWNlRGlyZWN0aXZlID0gb3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlLFxuICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gdHJhbnNjbHVkZUZuLFxuICAgICAgICAgIGxpbmtGbixcbiAgICAgICAgICBkaWRTY2FuRm9yTXVsdGlwbGVUcmFuc2NsdXNpb24gPSBmYWxzZSxcbiAgICAgICAgICBtaWdodEhhdmVNdWx0aXBsZVRyYW5zY2x1c2lvbkVycm9yID0gZmFsc2UsXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWU7XG5cbiAgICAgIC8vIGV4ZWN1dGVzIGFsbCBkaXJlY3RpdmVzIG9uIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBkaXJlY3RpdmUgPSBkaXJlY3RpdmVzW2ldO1xuICAgICAgICB2YXIgYXR0clN0YXJ0ID0gZGlyZWN0aXZlLiQkc3RhcnQ7XG4gICAgICAgIHZhciBhdHRyRW5kID0gZGlyZWN0aXZlLiQkZW5kO1xuXG4gICAgICAgIC8vIGNvbGxlY3QgbXVsdGlibG9jayBzZWN0aW9uc1xuICAgICAgICBpZiAoYXR0clN0YXJ0KSB7XG4gICAgICAgICAgJGNvbXBpbGVOb2RlID0gZ3JvdXBTY2FuKGNvbXBpbGVOb2RlLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICB9XG4gICAgICAgICR0ZW1wbGF0ZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGVybWluYWxQcmlvcml0eSA+IGRpcmVjdGl2ZS5wcmlvcml0eSkge1xuICAgICAgICAgIGJyZWFrOyAvLyBwcmV2ZW50IGZ1cnRoZXIgcHJvY2Vzc2luZyBvZiBkaXJlY3RpdmVzXG4gICAgICAgIH1cblxuICAgICAgICBkaXJlY3RpdmVWYWx1ZSA9IGRpcmVjdGl2ZS5zY29wZTtcblxuICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUpIHtcblxuICAgICAgICAgIC8vIHNraXAgdGhlIGNoZWNrIGZvciBkaXJlY3RpdmVzIHdpdGggYXN5bmMgdGVtcGxhdGVzLCB3ZSdsbCBjaGVjayB0aGUgZGVyaXZlZCBzeW5jXG4gICAgICAgICAgLy8gZGlyZWN0aXZlIHdoZW4gdGhlIHRlbXBsYXRlIGFycml2ZXNcbiAgICAgICAgICBpZiAoIWRpcmVjdGl2ZS50ZW1wbGF0ZVVybCkge1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KGRpcmVjdGl2ZVZhbHVlKSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyB0cnlpbmcgdG8gYWRkIGFuIGlzb2xhdGVkIHNjb3BlLlxuICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZXJlIGlzIG5vIHNjb3BlIG9mIGFueSBraW5kIGFscmVhZHlcbiAgICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSB8fCBuZXdTY29wZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyB0cnlpbmcgdG8gYWRkIGEgY2hpbGQgc2NvcGUuXG4gICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGhlcmUgaXMgbm8gaXNvbGF0ZWQgc2NvcGUgYWxyZWFkeVxuICAgICAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgnbmV3L2lzb2xhdGVkIHNjb3BlJywgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLCBkaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV3U2NvcGVEaXJlY3RpdmUgPSBuZXdTY29wZURpcmVjdGl2ZSB8fCBkaXJlY3RpdmU7XG4gICAgICAgIH1cblxuICAgICAgICBkaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlLm5hbWU7XG5cbiAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyIGEgY29uZGl0aW9uIHRoYXQgY2FuIHJlc3VsdCBpbiB0cmFuc2NsdXNpb24gb24gdGhlIGRpcmVjdGl2ZSxcbiAgICAgICAgLy8gdGhlbiBzY2FuIGFoZWFkIGluIHRoZSByZW1haW5pbmcgZGlyZWN0aXZlcyBmb3Igb3RoZXJzIHRoYXQgbWF5IGNhdXNlIGEgbXVsdGlwbGVcbiAgICAgICAgLy8gdHJhbnNjbHVzaW9uIGVycm9yIHRvIGJlIHRocm93biBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uIHByb2Nlc3MuICBJZiBhIG1hdGNoaW5nIGRpcmVjdGl2ZVxuICAgICAgICAvLyBpcyBmb3VuZCwgdGhlbiB3ZSBrbm93IHRoYXQgd2hlbiB3ZSBlbmNvdW50ZXIgYSB0cmFuc2NsdWRlZCBkaXJlY3RpdmUsIHdlIG5lZWQgdG8gZWFnZXJseVxuICAgICAgICAvLyBjb21waWxlIHRoZSBgdHJhbnNjbHVkZWAgZnVuY3Rpb24gcmF0aGVyIHRoYW4gZG9pbmcgaXQgbGF6aWx5IGluIG9yZGVyIHRvIHRocm93XG4gICAgICAgIC8vIGV4Y2VwdGlvbnMgYXQgdGhlIGNvcnJlY3QgdGltZVxuICAgICAgICBpZiAoIWRpZFNjYW5Gb3JNdWx0aXBsZVRyYW5zY2x1c2lvbiAmJiAoKGRpcmVjdGl2ZS5yZXBsYWNlICYmIChkaXJlY3RpdmUudGVtcGxhdGVVcmwgfHwgZGlyZWN0aXZlLnRlbXBsYXRlKSlcbiAgICAgICAgICAgIHx8IChkaXJlY3RpdmUudHJhbnNjbHVkZSAmJiAhZGlyZWN0aXZlLiQkdGxiKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FuZGlkYXRlRGlyZWN0aXZlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2Nhbm5pbmdJbmRleCA9IGkgKyAxOyAoY2FuZGlkYXRlRGlyZWN0aXZlID0gZGlyZWN0aXZlc1tzY2FubmluZ0luZGV4KytdKTspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjYW5kaWRhdGVEaXJlY3RpdmUudHJhbnNjbHVkZSAmJiAhY2FuZGlkYXRlRGlyZWN0aXZlLiQkdGxiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKGNhbmRpZGF0ZURpcmVjdGl2ZS5yZXBsYWNlICYmIChjYW5kaWRhdGVEaXJlY3RpdmUudGVtcGxhdGVVcmwgfHwgY2FuZGlkYXRlRGlyZWN0aXZlLnRlbXBsYXRlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pZ2h0SGF2ZU11bHRpcGxlVHJhbnNjbHVzaW9uRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkaWRTY2FuRm9yTXVsdGlwbGVUcmFuc2NsdXNpb24gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFkaXJlY3RpdmUudGVtcGxhdGVVcmwgJiYgZGlyZWN0aXZlLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlcyA9IGNvbnRyb2xsZXJEaXJlY3RpdmVzIHx8IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCdcXCcnICsgZGlyZWN0aXZlTmFtZSArICdcXCcgY29udHJvbGxlcicsXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXNbZGlyZWN0aXZlTmFtZV0gPSBkaXJlY3RpdmU7XG4gICAgICAgIH1cblxuICAgICAgICBkaXJlY3RpdmVWYWx1ZSA9IGRpcmVjdGl2ZS50cmFuc2NsdWRlO1xuXG4gICAgICAgIGlmIChkaXJlY3RpdmVWYWx1ZSkge1xuICAgICAgICAgIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIG5nSWYgYW5kIG5nUmVwZWF0IHNvIHRoYXQgd2UgZG9uJ3QgY29tcGxhaW4gYWJvdXQgZHVwbGljYXRlIHRyYW5zY2x1c2lvbi5cbiAgICAgICAgICAvLyBUaGlzIG9wdGlvbiBzaG91bGQgb25seSBiZSB1c2VkIGJ5IGRpcmVjdGl2ZXMgdGhhdCBrbm93IGhvdyB0byBzYWZlbHkgaGFuZGxlIGVsZW1lbnQgdHJhbnNjbHVzaW9uLFxuICAgICAgICAgIC8vIHdoZXJlIHRoZSB0cmFuc2NsdWRlZCBub2RlcyBhcmUgYWRkZWQgb3IgcmVwbGFjZWQgYWZ0ZXIgbGlua2luZy5cbiAgICAgICAgICBpZiAoIWRpcmVjdGl2ZS4kJHRsYikge1xuICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ3RyYW5zY2x1c2lvbicsIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZVZhbHVlID09PSAnZWxlbWVudCcpIHtcbiAgICAgICAgICAgIGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRlcm1pbmFsUHJpb3JpdHkgPSBkaXJlY3RpdmUucHJpb3JpdHk7XG4gICAgICAgICAgICAkdGVtcGxhdGUgPSAkY29tcGlsZU5vZGU7XG4gICAgICAgICAgICAkY29tcGlsZU5vZGUgPSB0ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudCA9XG4gICAgICAgICAgICAgICAganFMaXRlKGNvbXBpbGUuJCRjcmVhdGVDb21tZW50KGRpcmVjdGl2ZU5hbWUsIHRlbXBsYXRlQXR0cnNbZGlyZWN0aXZlTmFtZV0pKTtcbiAgICAgICAgICAgIGNvbXBpbGVOb2RlID0gJGNvbXBpbGVOb2RlWzBdO1xuICAgICAgICAgICAgcmVwbGFjZVdpdGgoanFDb2xsZWN0aW9uLCBzbGljZUFyZ3MoJHRlbXBsYXRlKSwgY29tcGlsZU5vZGUpO1xuXG4gICAgICAgICAgICAvLyBTdXBwb3J0OiBDaHJvbWUgPCA1MFxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTQwNDFcblxuICAgICAgICAgICAgLy8gSW4gdGhlIHZlcnNpb25zIG9mIFY4IHByaW9yIHRvIENocm9tZSA1MCwgdGhlIGRvY3VtZW50IGZyYWdtZW50IHRoYXQgaXMgY3JlYXRlZFxuICAgICAgICAgICAgLy8gaW4gdGhlIGByZXBsYWNlV2l0aGAgZnVuY3Rpb24gaXMgaW1wcm9wZXJseSBnYXJiYWdlIGNvbGxlY3RlZCBkZXNwaXRlIHN0aWxsXG4gICAgICAgICAgICAvLyBiZWluZyByZWZlcmVuY2VkIGJ5IHRoZSBgcGFyZW50Tm9kZWAgcHJvcGVydHkgb2YgYWxsIG9mIHRoZSBjaGlsZCBub2Rlcy4gIEJ5IGFkZGluZ1xuICAgICAgICAgICAgLy8gYSByZWZlcmVuY2UgdG8gdGhlIGZyYWdtZW50IHZpYSBhIGRpZmZlcmVudCBwcm9wZXJ0eSwgd2UgY2FuIGF2b2lkIHRoYXQgaW5jb3JyZWN0XG4gICAgICAgICAgICAvLyBiZWhhdmlvci5cbiAgICAgICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIGxpbmUgYWZ0ZXIgQ2hyb21lIDUwIGhhcyBiZWVuIHJlbGVhc2VkXG4gICAgICAgICAgICAkdGVtcGxhdGVbMF0uJCRwYXJlbnROb2RlID0gJHRlbXBsYXRlWzBdLnBhcmVudE5vZGU7XG5cbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gY29tcGlsYXRpb25HZW5lcmF0b3IobWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciwgJHRlbXBsYXRlLCB0cmFuc2NsdWRlRm4sIHRlcm1pbmFsUHJpb3JpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSAmJiByZXBsYWNlRGlyZWN0aXZlLm5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHBhc3MgaW46XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIGNvbnRyb2xsZXJEaXJlY3RpdmVzIC0gb3RoZXJ3aXNlIHdlJ2xsIGNyZWF0ZSBkdXBsaWNhdGVzIGNvbnRyb2xsZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSBvciB0ZW1wbGF0ZURpcmVjdGl2ZSAtIGNvbWJpbmluZyB0ZW1wbGF0ZXMgd2l0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlbGVtZW50IHRyYW5zY2x1c2lvbiBkb2Vzbid0IG1ha2Ugc2Vuc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCBvbmx5IG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgc28gdGhhdCB3ZSBwcmV2ZW50IHB1dHRpbmcgdHJhbnNjbHVzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0aGUgc2FtZSBlbGVtZW50IG1vcmUgdGhhbiBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTogbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIHZhciBzbG90cyA9IGNyZWF0ZU1hcCgpO1xuXG4gICAgICAgICAgICBpZiAoIWlzT2JqZWN0KGRpcmVjdGl2ZVZhbHVlKSkge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBqcUxpdGUoanFMaXRlQ2xvbmUoY29tcGlsZU5vZGUpKS5jb250ZW50cygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRyYW5zY2x1c2lvbiBzbG90cyxcbiAgICAgICAgICAgICAgLy8gY29sbGVjdCB0aGVtIHVwLCBjb21waWxlIHRoZW0gYW5kIHN0b3JlIHRoZWlyIHRyYW5zY2x1c2lvbiBmdW5jdGlvbnNcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gW107XG5cbiAgICAgICAgICAgICAgdmFyIHNsb3RNYXAgPSBjcmVhdGVNYXAoKTtcbiAgICAgICAgICAgICAgdmFyIGZpbGxlZFNsb3RzID0gY3JlYXRlTWFwKCk7XG5cbiAgICAgICAgICAgICAgLy8gUGFyc2UgdGhlIGVsZW1lbnQgc2VsZWN0b3JzXG4gICAgICAgICAgICAgIGZvckVhY2goZGlyZWN0aXZlVmFsdWUsIGZ1bmN0aW9uKGVsZW1lbnRTZWxlY3Rvciwgc2xvdE5hbWUpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBhbiBlbGVtZW50IHNlbGVjdG9yIHN0YXJ0cyB3aXRoIGEgPyB0aGVuIGl0IGlzIG9wdGlvbmFsXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbmFsID0gKGVsZW1lbnRTZWxlY3Rvci5jaGFyQXQoMCkgPT09ICc/Jyk7XG4gICAgICAgICAgICAgICAgZWxlbWVudFNlbGVjdG9yID0gb3B0aW9uYWwgPyBlbGVtZW50U2VsZWN0b3Iuc3Vic3RyaW5nKDEpIDogZWxlbWVudFNlbGVjdG9yO1xuXG4gICAgICAgICAgICAgICAgc2xvdE1hcFtlbGVtZW50U2VsZWN0b3JdID0gc2xvdE5hbWU7XG5cbiAgICAgICAgICAgICAgICAvLyBXZSBleHBsaWNpdGx5IGFzc2lnbiBgbnVsbGAgc2luY2UgdGhpcyBpbXBsaWVzIHRoYXQgYSBzbG90IHdhcyBkZWZpbmVkIGJ1dCBub3QgZmlsbGVkLlxuICAgICAgICAgICAgICAgIC8vIExhdGVyIHdoZW4gY2FsbGluZyBib3VuZFRyYW5zY2x1c2lvbiBmdW5jdGlvbnMgd2l0aCBhIHNsb3QgbmFtZSB3ZSBvbmx5IGVycm9yIGlmIHRoZVxuICAgICAgICAgICAgICAgIC8vIHNsb3QgaXMgYHVuZGVmaW5lZGBcbiAgICAgICAgICAgICAgICBzbG90c1tzbG90TmFtZV0gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsbGVkU2xvdHMgY29udGFpbnMgYHRydWVgIGZvciBhbGwgc2xvdHMgdGhhdCBhcmUgZWl0aGVyIG9wdGlvbmFsIG9yIGhhdmUgYmVlblxuICAgICAgICAgICAgICAgIC8vIGZpbGxlZC4gVGhpcyBpcyB1c2VkIHRvIGNoZWNrIHRoYXQgd2UgaGF2ZSBub3QgbWlzc2VkIGFueSByZXF1aXJlZCBzbG90c1xuICAgICAgICAgICAgICAgIGZpbGxlZFNsb3RzW3Nsb3ROYW1lXSA9IG9wdGlvbmFsO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyBBZGQgdGhlIG1hdGNoaW5nIGVsZW1lbnRzIGludG8gdGhlaXIgc2xvdFxuICAgICAgICAgICAgICBmb3JFYWNoKCRjb21waWxlTm9kZS5jb250ZW50cygpLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNsb3ROYW1lID0gc2xvdE1hcFtkaXJlY3RpdmVOb3JtYWxpemUobm9kZU5hbWVfKG5vZGUpKV07XG4gICAgICAgICAgICAgICAgaWYgKHNsb3ROYW1lKSB7XG4gICAgICAgICAgICAgICAgICBmaWxsZWRTbG90c1tzbG90TmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgc2xvdHNbc2xvdE5hbWVdID0gc2xvdHNbc2xvdE5hbWVdIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgc2xvdHNbc2xvdE5hbWVdLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHJlcXVpcmVkIHNsb3RzIHRoYXQgd2VyZSBub3QgZmlsbGVkXG4gICAgICAgICAgICAgIGZvckVhY2goZmlsbGVkU2xvdHMsIGZ1bmN0aW9uKGZpbGxlZCwgc2xvdE5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGxlZCkge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3JlcXNsb3QnLCAnUmVxdWlyZWQgdHJhbnNjbHVzaW9uIHNsb3QgYHswfWAgd2FzIG5vdCBmaWxsZWQuJywgc2xvdE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgc2xvdE5hbWUgaW4gc2xvdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2xvdHNbc2xvdE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAvLyBPbmx5IGRlZmluZSBhIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiBpZiB0aGUgc2xvdCB3YXMgZmlsbGVkXG4gICAgICAgICAgICAgICAgICBzbG90c1tzbG90TmFtZV0gPSBjb21waWxhdGlvbkdlbmVyYXRvcihtaWdodEhhdmVNdWx0aXBsZVRyYW5zY2x1c2lvbkVycm9yLCBzbG90c1tzbG90TmFtZV0sIHRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRjb21waWxlTm9kZS5lbXB0eSgpOyAvLyBjbGVhciBjb250ZW50c1xuICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4gPSBjb21waWxhdGlvbkdlbmVyYXRvcihtaWdodEhhdmVNdWx0aXBsZVRyYW5zY2x1c2lvbkVycm9yLCAkdGVtcGxhdGUsIHRyYW5zY2x1ZGVGbiwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgeyBuZWVkc05ld1Njb3BlOiBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUgfHwgZGlyZWN0aXZlLiQkbmV3U2NvcGV9KTtcbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuLiQkc2xvdHMgPSBzbG90cztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aXZlLnRlbXBsYXRlKSB7XG4gICAgICAgICAgaGFzVGVtcGxhdGUgPSB0cnVlO1xuICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsIHRlbXBsYXRlRGlyZWN0aXZlLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG5cbiAgICAgICAgICBkaXJlY3RpdmVWYWx1ZSA9IChpc0Z1bmN0aW9uKGRpcmVjdGl2ZS50ZW1wbGF0ZSkpXG4gICAgICAgICAgICAgID8gZGlyZWN0aXZlLnRlbXBsYXRlKCRjb21waWxlTm9kZSwgdGVtcGxhdGVBdHRycylcbiAgICAgICAgICAgICAgOiBkaXJlY3RpdmUudGVtcGxhdGU7XG5cbiAgICAgICAgICBkaXJlY3RpdmVWYWx1ZSA9IGRlbm9ybWFsaXplVGVtcGxhdGUoZGlyZWN0aXZlVmFsdWUpO1xuXG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZS5yZXBsYWNlKSB7XG4gICAgICAgICAgICByZXBsYWNlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuICAgICAgICAgICAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoZGlyZWN0aXZlVmFsdWUpKSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IFtdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gcmVtb3ZlQ29tbWVudHMod3JhcFRlbXBsYXRlKGRpcmVjdGl2ZS50ZW1wbGF0ZU5hbWVzcGFjZSwgdHJpbShkaXJlY3RpdmVWYWx1ZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBpbGVOb2RlID0gJHRlbXBsYXRlWzBdO1xuXG4gICAgICAgICAgICBpZiAoJHRlbXBsYXRlLmxlbmd0aCAhPT0gMSB8fCBjb21waWxlTm9kZS5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JyxcbiAgICAgICAgICAgICAgICAgICdUZW1wbGF0ZSBmb3IgZGlyZWN0aXZlIFxcJ3swfVxcJyBtdXN0IGhhdmUgZXhhY3RseSBvbmUgcm9vdCBlbGVtZW50LiB7MX0nLFxuICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlTmFtZSwgJycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXBsYWNlV2l0aChqcUNvbGxlY3Rpb24sICRjb21waWxlTm9kZSwgY29tcGlsZU5vZGUpO1xuXG4gICAgICAgICAgICB2YXIgbmV3VGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xuXG4gICAgICAgICAgICAvLyBjb21iaW5lIGRpcmVjdGl2ZXMgZnJvbSB0aGUgb3JpZ2luYWwgbm9kZSBhbmQgZnJvbSB0aGUgdGVtcGxhdGU6XG4gICAgICAgICAgICAvLyAtIHRha2UgdGhlIGFycmF5IG9mIGRpcmVjdGl2ZXMgZm9yIHRoaXMgZWxlbWVudFxuICAgICAgICAgICAgLy8gLSBzcGxpdCBpdCBpbnRvIHR3byBwYXJ0cywgdGhvc2UgdGhhdCBhbHJlYWR5IGFwcGxpZWQgKHByb2Nlc3NlZCkgYW5kIHRob3NlIHRoYXQgd2VyZW4ndCAodW5wcm9jZXNzZWQpXG4gICAgICAgICAgICAvLyAtIGNvbGxlY3QgZGlyZWN0aXZlcyBmcm9tIHRoZSB0ZW1wbGF0ZSBhbmQgc29ydCB0aGVtIGJ5IHByaW9yaXR5XG4gICAgICAgICAgICAvLyAtIGNvbWJpbmUgZGlyZWN0aXZlcyBhczogcHJvY2Vzc2VkICsgdGVtcGxhdGUgKyB1bnByb2Nlc3NlZFxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlRGlyZWN0aXZlcyA9IGNvbGxlY3REaXJlY3RpdmVzKGNvbXBpbGVOb2RlLCBbXSwgbmV3VGVtcGxhdGVBdHRycyk7XG4gICAgICAgICAgICB2YXIgdW5wcm9jZXNzZWREaXJlY3RpdmVzID0gZGlyZWN0aXZlcy5zcGxpY2UoaSArIDEsIGRpcmVjdGl2ZXMubGVuZ3RoIC0gKGkgKyAxKSk7XG5cbiAgICAgICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHwgbmV3U2NvcGVEaXJlY3RpdmUpIHtcbiAgICAgICAgICAgICAgLy8gVGhlIG9yaWdpbmFsIGRpcmVjdGl2ZSBjYXVzZWQgdGhlIGN1cnJlbnQgZWxlbWVudCB0byBiZSByZXBsYWNlZCBidXQgdGhpcyBlbGVtZW50XG4gICAgICAgICAgICAgIC8vIGFsc28gbmVlZHMgdG8gaGF2ZSBhIG5ldyBzY29wZSwgc28gd2UgbmVlZCB0byB0ZWxsIHRoZSB0ZW1wbGF0ZSBkaXJlY3RpdmVzXG4gICAgICAgICAgICAgIC8vIHRoYXQgdGhleSB3b3VsZCBuZWVkIHRvIGdldCB0aGVpciBzY29wZSBmcm9tIGZ1cnRoZXIgdXAsIGlmIHRoZXkgcmVxdWlyZSB0cmFuc2NsdXNpb25cbiAgICAgICAgICAgICAgbWFya0RpcmVjdGl2ZVNjb3BlKHRlbXBsYXRlRGlyZWN0aXZlcywgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLCBuZXdTY29wZURpcmVjdGl2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXJlY3RpdmVzID0gZGlyZWN0aXZlcy5jb25jYXQodGVtcGxhdGVEaXJlY3RpdmVzKS5jb25jYXQodW5wcm9jZXNzZWREaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRlbXBsYXRlQXR0cnMsIG5ld1RlbXBsYXRlQXR0cnMpO1xuXG4gICAgICAgICAgICBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuaHRtbChkaXJlY3RpdmVWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZW1wbGF0ZVVybCkge1xuICAgICAgICAgIGhhc1RlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgndGVtcGxhdGUnLCB0ZW1wbGF0ZURpcmVjdGl2ZSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuXG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZS5yZXBsYWNlKSB7XG4gICAgICAgICAgICByZXBsYWNlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1mdW5jLWFzc2lnblxuICAgICAgICAgIG5vZGVMaW5rRm4gPSBjb21waWxlVGVtcGxhdGVVcmwoZGlyZWN0aXZlcy5zcGxpY2UoaSwgZGlyZWN0aXZlcy5sZW5ndGggLSBpKSwgJGNvbXBpbGVOb2RlLFxuICAgICAgICAgICAgICB0ZW1wbGF0ZUF0dHJzLCBqcUNvbGxlY3Rpb24sIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgJiYgY2hpbGRUcmFuc2NsdWRlRm4sIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLCB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXM6IGNvbnRyb2xsZXJEaXJlY3RpdmVzLFxuICAgICAgICAgICAgICAgIG5ld1Njb3BlRGlyZWN0aXZlOiAobmV3U2NvcGVEaXJlY3RpdmUgIT09IGRpcmVjdGl2ZSkgJiYgbmV3U2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlOiBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmU6IHRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6IG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3RpdmUuY29tcGlsZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsaW5rRm4gPSBkaXJlY3RpdmUuY29tcGlsZSgkY29tcGlsZU5vZGUsIHRlbXBsYXRlQXR0cnMsIGNoaWxkVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gZGlyZWN0aXZlLiQkb3JpZ2luYWxEaXJlY3RpdmUgfHwgZGlyZWN0aXZlO1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlua0ZuKSkge1xuICAgICAgICAgICAgICBhZGRMaW5rRm5zKG51bGwsIGJpbmQoY29udGV4dCwgbGlua0ZuKSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlua0ZuKSB7XG4gICAgICAgICAgICAgIGFkZExpbmtGbnMoYmluZChjb250ZXh0LCBsaW5rRm4ucHJlKSwgYmluZChjb250ZXh0LCBsaW5rRm4ucG9zdCksIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSwgc3RhcnRpbmdUYWcoJGNvbXBpbGVOb2RlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZXJtaW5hbCkge1xuICAgICAgICAgIG5vZGVMaW5rRm4udGVybWluYWwgPSB0cnVlO1xuICAgICAgICAgIHRlcm1pbmFsUHJpb3JpdHkgPSBNYXRoLm1heCh0ZXJtaW5hbFByaW9yaXR5LCBkaXJlY3RpdmUucHJpb3JpdHkpO1xuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgbm9kZUxpbmtGbi5zY29wZSA9IG5ld1Njb3BlRGlyZWN0aXZlICYmIG5ld1Njb3BlRGlyZWN0aXZlLnNjb3BlID09PSB0cnVlO1xuICAgICAgbm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCA9IGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmU7XG4gICAgICBub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCA9IGhhc1RlbXBsYXRlO1xuICAgICAgbm9kZUxpbmtGbi50cmFuc2NsdWRlID0gY2hpbGRUcmFuc2NsdWRlRm47XG5cbiAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZTtcblxuICAgICAgLy8gbWlnaHQgYmUgbm9ybWFsIG9yIGRlbGF5ZWQgbm9kZUxpbmtGbiBkZXBlbmRpbmcgb24gaWYgdGVtcGxhdGVVcmwgaXMgcHJlc2VudFxuICAgICAgcmV0dXJuIG5vZGVMaW5rRm47XG5cbiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgIGZ1bmN0aW9uIGFkZExpbmtGbnMocHJlLCBwb3N0LCBhdHRyU3RhcnQsIGF0dHJFbmQpIHtcbiAgICAgICAgaWYgKHByZSkge1xuICAgICAgICAgIGlmIChhdHRyU3RhcnQpIHByZSA9IGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKHByZSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICBwcmUucmVxdWlyZSA9IGRpcmVjdGl2ZS5yZXF1aXJlO1xuICAgICAgICAgIHByZS5kaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTmFtZTtcbiAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID09PSBkaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlKSB7XG4gICAgICAgICAgICBwcmUgPSBjbG9uZUFuZEFubm90YXRlRm4ocHJlLCB7aXNvbGF0ZVNjb3BlOiB0cnVlfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHByZUxpbmtGbnMucHVzaChwcmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3N0KSB7XG4gICAgICAgICAgaWYgKGF0dHJTdGFydCkgcG9zdCA9IGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKHBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgICAgcG9zdC5yZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmU7XG4gICAgICAgICAgcG9zdC5kaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTmFtZTtcbiAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID09PSBkaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlKSB7XG4gICAgICAgICAgICBwb3N0ID0gY2xvbmVBbmRBbm5vdGF0ZUZuKHBvc3QsIHtpc29sYXRlU2NvcGU6IHRydWV9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcG9zdExpbmtGbnMucHVzaChwb3N0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBub2RlTGlua0ZuKGNoaWxkTGlua0ZuLCBzY29wZSwgbGlua05vZGUsICRyb290RWxlbWVudCwgYm91bmRUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgdmFyIGksIGlpLCBsaW5rRm4sIGlzb2xhdGVTY29wZSwgY29udHJvbGxlclNjb3BlLCBlbGVtZW50Q29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbiwgJGVsZW1lbnQsXG4gICAgICAgICAgICBhdHRycywgc2NvcGVCaW5kaW5nSW5mbztcblxuICAgICAgICBpZiAoY29tcGlsZU5vZGUgPT09IGxpbmtOb2RlKSB7XG4gICAgICAgICAgYXR0cnMgPSB0ZW1wbGF0ZUF0dHJzO1xuICAgICAgICAgICRlbGVtZW50ID0gdGVtcGxhdGVBdHRycy4kJGVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGVsZW1lbnQgPSBqcUxpdGUobGlua05vZGUpO1xuICAgICAgICAgIGF0dHJzID0gbmV3IEF0dHJpYnV0ZXMoJGVsZW1lbnQsIHRlbXBsYXRlQXR0cnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udHJvbGxlclNjb3BlID0gc2NvcGU7XG4gICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpIHtcbiAgICAgICAgICBpc29sYXRlU2NvcGUgPSBzY29wZS4kbmV3KHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld1Njb3BlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgY29udHJvbGxlclNjb3BlID0gc2NvcGUuJHBhcmVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChib3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgICAgIC8vIHRyYWNrIGBib3VuZFRyYW5zY2x1ZGVGbmAgc28gaXQgY2FuIGJlIHVud3JhcHBlZCBpZiBgdHJhbnNjbHVkZUZuYFxuICAgICAgICAgIC8vIGlzIGxhdGVyIHBhc3NlZCBhcyBgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm5gIHRvIGBwdWJsaWNMaW5rRm5gXG4gICAgICAgICAgdHJhbnNjbHVkZUZuID0gY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGU7XG4gICAgICAgICAgdHJhbnNjbHVkZUZuLiQkYm91bmRUcmFuc2NsdWRlID0gYm91bmRUcmFuc2NsdWRlRm47XG4gICAgICAgICAgLy8gZXhwb3NlIHRoZSBzbG90cyBvbiB0aGUgYCR0cmFuc2NsdWRlYCBmdW5jdGlvblxuICAgICAgICAgIHRyYW5zY2x1ZGVGbi5pc1Nsb3RGaWxsZWQgPSBmdW5jdGlvbihzbG90TmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhYm91bmRUcmFuc2NsdWRlRm4uJCRzbG90c1tzbG90TmFtZV07XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250cm9sbGVyRGlyZWN0aXZlcykge1xuICAgICAgICAgIGVsZW1lbnRDb250cm9sbGVycyA9IHNldHVwQ29udHJvbGxlcnMoJGVsZW1lbnQsIGF0dHJzLCB0cmFuc2NsdWRlRm4sIGNvbnRyb2xsZXJEaXJlY3RpdmVzLCBpc29sYXRlU2NvcGUsIHNjb3BlLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xuICAgICAgICAgIC8vIEluaXRpYWxpemUgaXNvbGF0ZSBzY29wZSBiaW5kaW5ncyBmb3IgbmV3IGlzb2xhdGUgc2NvcGUgZGlyZWN0aXZlLlxuICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oJGVsZW1lbnQsIGlzb2xhdGVTY29wZSwgdHJ1ZSwgISh0ZW1wbGF0ZURpcmVjdGl2ZSAmJiAodGVtcGxhdGVEaXJlY3RpdmUgPT09IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSB8fFxuICAgICAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLiQkb3JpZ2luYWxEaXJlY3RpdmUpKSk7XG4gICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoJGVsZW1lbnQsIHRydWUpO1xuICAgICAgICAgIGlzb2xhdGVTY29wZS4kJGlzb2xhdGVCaW5kaW5ncyA9XG4gICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncztcbiAgICAgICAgICBzY29wZUJpbmRpbmdJbmZvID0gaW5pdGlhbGl6ZURpcmVjdGl2ZUJpbmRpbmdzKHNjb3BlLCBhdHRycywgaXNvbGF0ZVNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzb2xhdGVTY29wZS4kJGlzb2xhdGVCaW5kaW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpO1xuICAgICAgICAgIGlmIChzY29wZUJpbmRpbmdJbmZvLnJlbW92ZVdhdGNoZXMpIHtcbiAgICAgICAgICAgIGlzb2xhdGVTY29wZS4kb24oJyRkZXN0cm95Jywgc2NvcGVCaW5kaW5nSW5mby5yZW1vdmVXYXRjaGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbml0aWFsaXplIGJpbmRUb0NvbnRyb2xsZXIgYmluZGluZ3NcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBlbGVtZW50Q29udHJvbGxlcnMpIHtcbiAgICAgICAgICB2YXIgY29udHJvbGxlckRpcmVjdGl2ZSA9IGNvbnRyb2xsZXJEaXJlY3RpdmVzW25hbWVdO1xuICAgICAgICAgIHZhciBjb250cm9sbGVyID0gZWxlbWVudENvbnRyb2xsZXJzW25hbWVdO1xuICAgICAgICAgIHZhciBiaW5kaW5ncyA9IGNvbnRyb2xsZXJEaXJlY3RpdmUuJCRiaW5kaW5ncy5iaW5kVG9Db250cm9sbGVyO1xuXG4gICAgICAgICAgaWYgKHByZUFzc2lnbkJpbmRpbmdzRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKGJpbmRpbmdzKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuYmluZGluZ0luZm8gPVxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVEaXJlY3RpdmVCaW5kaW5ncyhjb250cm9sbGVyU2NvcGUsIGF0dHJzLCBjb250cm9sbGVyLmluc3RhbmNlLCBiaW5kaW5ncywgY29udHJvbGxlckRpcmVjdGl2ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmJpbmRpbmdJbmZvID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyUmVzdWx0ID0gY29udHJvbGxlcigpO1xuICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXJSZXN1bHQgIT09IGNvbnRyb2xsZXIuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgLy8gSWYgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgaGFzIGEgcmV0dXJuIHZhbHVlLCBvdmVyd3JpdGUgdGhlIGluc3RhbmNlXG4gICAgICAgICAgICAgIC8vIGZyb20gc2V0dXBDb250cm9sbGVyc1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmluc3RhbmNlID0gY29udHJvbGxlclJlc3VsdDtcbiAgICAgICAgICAgICAgJGVsZW1lbnQuZGF0YSgnJCcgKyBjb250cm9sbGVyRGlyZWN0aXZlLm5hbWUgKyAnQ29udHJvbGxlcicsIGNvbnRyb2xsZXJSZXN1bHQpO1xuICAgICAgICAgICAgICBpZiAoY29udHJvbGxlci5iaW5kaW5nSW5mby5yZW1vdmVXYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5iaW5kaW5nSW5mby5yZW1vdmVXYXRjaGVzKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udHJvbGxlci5iaW5kaW5nSW5mbyA9XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZURpcmVjdGl2ZUJpbmRpbmdzKGNvbnRyb2xsZXJTY29wZSwgYXR0cnMsIGNvbnRyb2xsZXIuaW5zdGFuY2UsIGJpbmRpbmdzLCBjb250cm9sbGVyRGlyZWN0aXZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udHJvbGxlci5pbnN0YW5jZSA9IGNvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJyQnICsgY29udHJvbGxlckRpcmVjdGl2ZS5uYW1lICsgJ0NvbnRyb2xsZXInLCBjb250cm9sbGVyLmluc3RhbmNlKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYmluZGluZ0luZm8gPVxuICAgICAgICAgICAgICBpbml0aWFsaXplRGlyZWN0aXZlQmluZGluZ3MoY29udHJvbGxlclNjb3BlLCBhdHRycywgY29udHJvbGxlci5pbnN0YW5jZSwgYmluZGluZ3MsIGNvbnRyb2xsZXJEaXJlY3RpdmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJpbmQgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXJzIHRvIHRoZSBjb250cm9sbGVyLCBpZiBgcmVxdWlyZWAgaXMgYW4gb2JqZWN0IGFuZCBgYmluZFRvQ29udHJvbGxlcmAgaXMgdHJ1dGh5XG4gICAgICAgIGZvckVhY2goY29udHJvbGxlckRpcmVjdGl2ZXMsIGZ1bmN0aW9uKGNvbnRyb2xsZXJEaXJlY3RpdmUsIG5hbWUpIHtcbiAgICAgICAgICB2YXIgcmVxdWlyZSA9IGNvbnRyb2xsZXJEaXJlY3RpdmUucmVxdWlyZTtcbiAgICAgICAgICBpZiAoY29udHJvbGxlckRpcmVjdGl2ZS5iaW5kVG9Db250cm9sbGVyICYmICFpc0FycmF5KHJlcXVpcmUpICYmIGlzT2JqZWN0KHJlcXVpcmUpKSB7XG4gICAgICAgICAgICBleHRlbmQoZWxlbWVudENvbnRyb2xsZXJzW25hbWVdLmluc3RhbmNlLCBnZXRDb250cm9sbGVycyhuYW1lLCByZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIYW5kbGUgdGhlIGluaXQgYW5kIGRlc3Ryb3kgbGlmZWN5Y2xlIGhvb2tzIG9uIGFsbCBjb250cm9sbGVycyB0aGF0IGhhdmUgdGhlbVxuICAgICAgICBmb3JFYWNoKGVsZW1lbnRDb250cm9sbGVycywgZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSBjb250cm9sbGVyLmluc3RhbmNlO1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kb25DaGFuZ2VzKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlLiRvbkNoYW5nZXMoY29udHJvbGxlci5iaW5kaW5nSW5mby5pbml0aWFsQ2hhbmdlcyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJG9uSW5pdCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2spKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyU2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkgeyBjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2soKTsgfSk7XG4gICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLiRvbkRlc3Ryb3kpKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyU2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIGNhbGxPbkRlc3Ryb3lIb29rKCkge1xuICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJG9uRGVzdHJveSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQUkVMSU5LSU5HXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gcHJlTGlua0Zucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgbGlua0ZuID0gcHJlTGlua0Zuc1tpXTtcbiAgICAgICAgICBpbnZva2VMaW5rRm4obGlua0ZuLFxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXG4gICAgICAgICAgICAgICRlbGVtZW50LFxuICAgICAgICAgICAgICBhdHRycyxcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJFQ1VSU0lPTlxuICAgICAgICAvLyBXZSBvbmx5IHBhc3MgdGhlIGlzb2xhdGUgc2NvcGUsIGlmIHRoZSBpc29sYXRlIGRpcmVjdGl2ZSBoYXMgYSB0ZW1wbGF0ZSxcbiAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBjaGlsZCBlbGVtZW50cyBkbyBub3QgYmVsb25nIHRvIHRoZSBpc29sYXRlIGRpcmVjdGl2ZS5cbiAgICAgICAgdmFyIHNjb3BlVG9DaGlsZCA9IHNjb3BlO1xuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlICYmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUudGVtcGxhdGUgfHwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlVXJsID09PSBudWxsKSkge1xuICAgICAgICAgIHNjb3BlVG9DaGlsZCA9IGlzb2xhdGVTY29wZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRMaW5rRm4pIHtcbiAgICAgICAgICBjaGlsZExpbmtGbihzY29wZVRvQ2hpbGQsIGxpbmtOb2RlLmNoaWxkTm9kZXMsIHVuZGVmaW5lZCwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUE9TVExJTktJTkdcbiAgICAgICAgZm9yIChpID0gcG9zdExpbmtGbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICBsaW5rRm4gPSBwb3N0TGlua0Zuc1tpXTtcbiAgICAgICAgICBpbnZva2VMaW5rRm4obGlua0ZuLFxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXG4gICAgICAgICAgICAgICRlbGVtZW50LFxuICAgICAgICAgICAgICBhdHRycyxcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyaWdnZXIgJHBvc3RMaW5rIGxpZmVjeWNsZSBob29rc1xuICAgICAgICBmb3JFYWNoKGVsZW1lbnRDb250cm9sbGVycywgZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSBjb250cm9sbGVyLmluc3RhbmNlO1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kcG9zdExpbmspKSB7XG4gICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJHBvc3RMaW5rKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGluamVjdGVkIGFzIGAkdHJhbnNjbHVkZWAuXG4gICAgICAgIC8vIE5vdGU6IGFsbCBhcmd1bWVudHMgYXJlIG9wdGlvbmFsIVxuICAgICAgICBmdW5jdGlvbiBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZShzY29wZSwgY2xvbmVBdHRhY2hGbiwgZnV0dXJlUGFyZW50RWxlbWVudCwgc2xvdE5hbWUpIHtcbiAgICAgICAgICB2YXIgdHJhbnNjbHVkZUNvbnRyb2xsZXJzO1xuICAgICAgICAgIC8vIE5vIHNjb3BlIHBhc3NlZCBpbjpcbiAgICAgICAgICBpZiAoIWlzU2NvcGUoc2NvcGUpKSB7XG4gICAgICAgICAgICBzbG90TmFtZSA9IGZ1dHVyZVBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gY2xvbmVBdHRhY2hGbjtcbiAgICAgICAgICAgIGNsb25lQXR0YWNoRm4gPSBzY29wZTtcbiAgICAgICAgICAgIHNjb3BlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSkge1xuICAgICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzID0gZWxlbWVudENvbnRyb2xsZXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZ1dHVyZVBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZ1dHVyZVBhcmVudEVsZW1lbnQgPSBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA/ICRlbGVtZW50LnBhcmVudCgpIDogJGVsZW1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzbG90TmFtZSkge1xuICAgICAgICAgICAgLy8gc2xvdFRyYW5zY2x1ZGVGbiBjYW4gYmUgb25lIG9mIHRocmVlIHRoaW5nczpcbiAgICAgICAgICAgIC8vICAqIGEgdHJhbnNjbHVkZSBmdW5jdGlvbiAtIGEgZmlsbGVkIHNsb3RcbiAgICAgICAgICAgIC8vICAqIGBudWxsYCAtIGFuIG9wdGlvbmFsIHNsb3QgdGhhdCB3YXMgbm90IGZpbGxlZFxuICAgICAgICAgICAgLy8gICogYHVuZGVmaW5lZGAgLSBhIHNsb3QgdGhhdCB3YXMgbm90IGRlY2xhcmVkIChpLmUuIGludmFsaWQpXG4gICAgICAgICAgICB2YXIgc2xvdFRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuLiQkc2xvdHNbc2xvdE5hbWVdO1xuICAgICAgICAgICAgaWYgKHNsb3RUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNsb3RUcmFuc2NsdWRlRm4oc2NvcGUsIGNsb25lQXR0YWNoRm4sIHRyYW5zY2x1ZGVDb250cm9sbGVycywgZnV0dXJlUGFyZW50RWxlbWVudCwgc2NvcGVUb0NoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNVbmRlZmluZWQoc2xvdFRyYW5zY2x1ZGVGbikpIHtcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vc2xvdCcsXG4gICAgICAgICAgICAgICAnTm8gcGFyZW50IGRpcmVjdGl2ZSB0aGF0IHJlcXVpcmVzIGEgdHJhbnNjbHVzaW9uIHdpdGggc2xvdCBuYW1lIFwiezB9XCIuICcgK1xuICAgICAgICAgICAgICAgJ0VsZW1lbnQ6IHsxfScsXG4gICAgICAgICAgICAgICBzbG90TmFtZSwgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCB0cmFuc2NsdWRlQ29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQsIHNjb3BlVG9DaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSwgcmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycykge1xuICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICBpZiAoaXNTdHJpbmcocmVxdWlyZSkpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gcmVxdWlyZS5tYXRjaChSRVFVSVJFX1BSRUZJWF9SRUdFWFApO1xuICAgICAgICB2YXIgbmFtZSA9IHJlcXVpcmUuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgIHZhciBpbmhlcml0VHlwZSA9IG1hdGNoWzFdIHx8IG1hdGNoWzNdO1xuICAgICAgICB2YXIgb3B0aW9uYWwgPSBtYXRjaFsyXSA9PT0gJz8nO1xuXG4gICAgICAgIC8vSWYgb25seSBwYXJlbnRzIHRoZW4gc3RhcnQgYXQgdGhlIHBhcmVudCBlbGVtZW50XG4gICAgICAgIGlmIChpbmhlcml0VHlwZSA9PT0gJ15eJykge1xuICAgICAgICAgICRlbGVtZW50ID0gJGVsZW1lbnQucGFyZW50KCk7XG4gICAgICAgIC8vT3RoZXJ3aXNlIGF0dGVtcHQgZ2V0dGluZyB0aGUgY29udHJvbGxlciBmcm9tIGVsZW1lbnRDb250cm9sbGVycyBpbiBjYXNlXG4gICAgICAgIC8vdGhlIGVsZW1lbnQgaXMgdHJhbnNjbHVkZWQgKGFuZCBoYXMgbm8gZGF0YSkgYW5kIHRvIGF2b2lkIC5kYXRhIGlmIHBvc3NpYmxlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSBlbGVtZW50Q29udHJvbGxlcnMgJiYgZWxlbWVudENvbnRyb2xsZXJzW25hbWVdO1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgJiYgdmFsdWUuaW5zdGFuY2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgdmFyIGRhdGFOYW1lID0gJyQnICsgbmFtZSArICdDb250cm9sbGVyJztcbiAgICAgICAgICB2YWx1ZSA9IGluaGVyaXRUeXBlID8gJGVsZW1lbnQuaW5oZXJpdGVkRGF0YShkYXRhTmFtZSkgOiAkZWxlbWVudC5kYXRhKGRhdGFOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsdWUgJiYgIW9wdGlvbmFsKSB7XG4gICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2N0cmVxJyxcbiAgICAgICAgICAgICAgJ0NvbnRyb2xsZXIgXFwnezB9XFwnLCByZXF1aXJlZCBieSBkaXJlY3RpdmUgXFwnezF9XFwnLCBjYW5cXCd0IGJlIGZvdW5kIScsXG4gICAgICAgICAgICAgIG5hbWUsIGRpcmVjdGl2ZU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocmVxdWlyZSkpIHtcbiAgICAgICAgdmFsdWUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmVxdWlyZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgdmFsdWVbaV0gPSBnZXRDb250cm9sbGVycyhkaXJlY3RpdmVOYW1lLCByZXF1aXJlW2ldLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChyZXF1aXJlKSkge1xuICAgICAgICB2YWx1ZSA9IHt9O1xuICAgICAgICBmb3JFYWNoKHJlcXVpcmUsIGZ1bmN0aW9uKGNvbnRyb2xsZXIsIHByb3BlcnR5KSB7XG4gICAgICAgICAgdmFsdWVbcHJvcGVydHldID0gZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSwgY29udHJvbGxlciwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXR1cENvbnRyb2xsZXJzKCRlbGVtZW50LCBhdHRycywgdHJhbnNjbHVkZUZuLCBjb250cm9sbGVyRGlyZWN0aXZlcywgaXNvbGF0ZVNjb3BlLCBzY29wZSwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XG4gICAgICB2YXIgZWxlbWVudENvbnRyb2xsZXJzID0gY3JlYXRlTWFwKCk7XG4gICAgICBmb3IgKHZhciBjb250cm9sbGVyS2V5IGluIGNvbnRyb2xsZXJEaXJlY3RpdmVzKSB7XG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSBjb250cm9sbGVyRGlyZWN0aXZlc1tjb250cm9sbGVyS2V5XTtcbiAgICAgICAgdmFyIGxvY2FscyA9IHtcbiAgICAgICAgICAkc2NvcGU6IGRpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxuICAgICAgICAgICRlbGVtZW50OiAkZWxlbWVudCxcbiAgICAgICAgICAkYXR0cnM6IGF0dHJzLFxuICAgICAgICAgICR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlRm5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgY29udHJvbGxlciA9IGRpcmVjdGl2ZS5jb250cm9sbGVyO1xuICAgICAgICBpZiAoY29udHJvbGxlciA9PT0gJ0AnKSB7XG4gICAgICAgICAgY29udHJvbGxlciA9IGF0dHJzW2RpcmVjdGl2ZS5uYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSAkY29udHJvbGxlcihjb250cm9sbGVyLCBsb2NhbHMsIHRydWUsIGRpcmVjdGl2ZS5jb250cm9sbGVyQXMpO1xuXG4gICAgICAgIC8vIEZvciBkaXJlY3RpdmVzIHdpdGggZWxlbWVudCB0cmFuc2NsdXNpb24gdGhlIGVsZW1lbnQgaXMgYSBjb21tZW50LlxuICAgICAgICAvLyBJbiB0aGlzIGNhc2UgLmRhdGEgd2lsbCBub3QgYXR0YWNoIGFueSBkYXRhLlxuICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBzYXZlIHRoZSBjb250cm9sbGVycyBmb3IgdGhlIGVsZW1lbnQgaW4gYSBsb2NhbCBoYXNoIGFuZCBhdHRhY2ggdG8gLmRhdGFcbiAgICAgICAgLy8gbGF0ZXIsIG9uY2Ugd2UgaGF2ZSB0aGUgYWN0dWFsIGVsZW1lbnQuXG4gICAgICAgIGVsZW1lbnRDb250cm9sbGVyc1tkaXJlY3RpdmUubmFtZV0gPSBjb250cm9sbGVySW5zdGFuY2U7XG4gICAgICAgICRlbGVtZW50LmRhdGEoJyQnICsgZGlyZWN0aXZlLm5hbWUgKyAnQ29udHJvbGxlcicsIGNvbnRyb2xsZXJJbnN0YW5jZS5pbnN0YW5jZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZWxlbWVudENvbnRyb2xsZXJzO1xuICAgIH1cblxuICAgIC8vIERlcGVuZGluZyB1cG9uIHRoZSBjb250ZXh0IGluIHdoaWNoIGEgZGlyZWN0aXZlIGZpbmRzIGl0c2VsZiBpdCBtaWdodCBuZWVkIHRvIGhhdmUgYSBuZXcgaXNvbGF0ZWRcbiAgICAvLyBvciBjaGlsZCBzY29wZSBjcmVhdGVkLiBGb3IgaW5zdGFuY2U6XG4gICAgLy8gKiBpZiB0aGUgZGlyZWN0aXZlIGhhcyBiZWVuIHB1bGxlZCBpbnRvIGEgdGVtcGxhdGUgYmVjYXVzZSBhbm90aGVyIGRpcmVjdGl2ZSB3aXRoIGEgaGlnaGVyIHByaW9yaXR5XG4gICAgLy8gYXNrZWQgZm9yIGVsZW1lbnQgdHJhbnNjbHVzaW9uXG4gICAgLy8gKiBpZiB0aGUgZGlyZWN0aXZlIGl0c2VsZiBhc2tzIGZvciB0cmFuc2NsdXNpb24gYnV0IGl0IGlzIGF0IHRoZSByb290IG9mIGEgdGVtcGxhdGUgYW5kIHRoZSBvcmlnaW5hbFxuICAgIC8vIGVsZW1lbnQgd2FzIHJlcGxhY2VkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTI5MzZcbiAgICBmdW5jdGlvbiBtYXJrRGlyZWN0aXZlU2NvcGUoZGlyZWN0aXZlcywgaXNvbGF0ZVNjb3BlLCBuZXdTY29wZSkge1xuICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZGlyZWN0aXZlcy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgIGRpcmVjdGl2ZXNbal0gPSBpbmhlcml0KGRpcmVjdGl2ZXNbal0sIHskJGlzb2xhdGVTY29wZTogaXNvbGF0ZVNjb3BlLCAkJG5ld1Njb3BlOiBuZXdTY29wZX0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGxvb2tzIHVwIHRoZSBkaXJlY3RpdmUgYW5kIGRlY29yYXRlcyBpdCB3aXRoIGV4Y2VwdGlvbiBoYW5kbGluZyBhbmQgcHJvcGVyIHBhcmFtZXRlcnMuIFdlXG4gICAgICogY2FsbCB0aGlzIHRoZSBib3VuZERpcmVjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBUaGUgZGlyZWN0aXZlIG11c3QgYmUgZm91bmQgaW4gc3BlY2lmaWMgZm9ybWF0LlxuICAgICAqICAgU3RyaW5nIGNvbnRhaW5pbmcgYW55IG9mIHRoZXNlcyBjaGFyYWN0ZXJzOlxuICAgICAqXG4gICAgICogICAqIGBFYDogZWxlbWVudCBuYW1lXG4gICAgICogICAqIGBBJzogYXR0cmlidXRlXG4gICAgICogICAqIGBDYDogY2xhc3NcbiAgICAgKiAgICogYE1gOiBjb21tZW50XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgZGlyZWN0aXZlIHdhcyBhZGRlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGREaXJlY3RpdmUodERpcmVjdGl2ZXMsIG5hbWUsIGxvY2F0aW9uLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBzdGFydEF0dHJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRBdHRyTmFtZSkge1xuICAgICAgaWYgKG5hbWUgPT09IGlnbm9yZURpcmVjdGl2ZSkgcmV0dXJuIG51bGw7XG4gICAgICB2YXIgbWF0Y2ggPSBudWxsO1xuICAgICAgaWYgKGhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgZm9yICh2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcbiAgICAgICAgICAgIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgICAgICAgaWYgKChpc1VuZGVmaW5lZChtYXhQcmlvcml0eSkgfHwgbWF4UHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpICYmXG4gICAgICAgICAgICAgICBkaXJlY3RpdmUucmVzdHJpY3QuaW5kZXhPZihsb2NhdGlvbikgIT09IC0xKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRBdHRyTmFtZSkge1xuICAgICAgICAgICAgICBkaXJlY3RpdmUgPSBpbmhlcml0KGRpcmVjdGl2ZSwgeyQkc3RhcnQ6IHN0YXJ0QXR0ck5hbWUsICQkZW5kOiBlbmRBdHRyTmFtZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkaXJlY3RpdmUuJCRiaW5kaW5ncykge1xuICAgICAgICAgICAgICB2YXIgYmluZGluZ3MgPSBkaXJlY3RpdmUuJCRiaW5kaW5ncyA9XG4gICAgICAgICAgICAgICAgICBwYXJzZURpcmVjdGl2ZUJpbmRpbmdzKGRpcmVjdGl2ZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICBpZiAoaXNPYmplY3QoYmluZGluZ3MuaXNvbGF0ZVNjb3BlKSkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncyA9IGJpbmRpbmdzLmlzb2xhdGVTY29wZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdERpcmVjdGl2ZXMucHVzaChkaXJlY3RpdmUpO1xuICAgICAgICAgICAgbWF0Y2ggPSBkaXJlY3RpdmU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBsb29rcyB1cCB0aGUgZGlyZWN0aXZlIGFuZCByZXR1cm5zIHRydWUgaWYgaXQgaXMgYSBtdWx0aS1lbGVtZW50IGRpcmVjdGl2ZSxcbiAgICAgKiBhbmQgdGhlcmVmb3JlIHJlcXVpcmVzIERPTSBub2RlcyBiZXR3ZWVuIC1zdGFydCBhbmQgLWVuZCBtYXJrZXJzIHRvIGJlIGdyb3VwZWRcbiAgICAgKiB0b2dldGhlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgZGlyZWN0aXZlIHdhcyByZWdpc3RlcmVkIGFzIG11bHRpLWVsZW1lbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQobmFtZSkge1xuICAgICAgaWYgKGhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgZm9yICh2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcbiAgICAgICAgICAgIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZS5tdWx0aUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGVsZW1lbnQgaXMgcmVwbGFjZWQgd2l0aCBIVE1MIHRlbXBsYXRlIHRoZW4gdGhlIG5ldyBhdHRyaWJ1dGVzXG4gICAgICogb24gdGhlIHRlbXBsYXRlIG5lZWQgdG8gYmUgbWVyZ2VkIHdpdGggdGhlIGV4aXN0aW5nIGF0dHJpYnV0ZXMgaW4gdGhlIERPTS5cbiAgICAgKiBUaGUgZGVzaXJlZCBlZmZlY3QgaXMgdG8gaGF2ZSBib3RoIG9mIHRoZSBhdHRyaWJ1dGVzIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZHN0IGRlc3RpbmF0aW9uIGF0dHJpYnV0ZXMgKG9yaWdpbmFsIERPTSlcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gc3JjIHNvdXJjZSBhdHRyaWJ1dGVzIChmcm9tIHRoZSBkaXJlY3RpdmUgdGVtcGxhdGUpXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXMoZHN0LCBzcmMpIHtcbiAgICAgIHZhciBzcmNBdHRyID0gc3JjLiRhdHRyLFxuICAgICAgICAgIGRzdEF0dHIgPSBkc3QuJGF0dHI7XG5cbiAgICAgIC8vIHJlYXBwbHkgdGhlIG9sZCBhdHRyaWJ1dGVzIHRvIHRoZSBuZXcgZWxlbWVudFxuICAgICAgZm9yRWFjaChkc3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgIT09ICckJykge1xuICAgICAgICAgIGlmIChzcmNba2V5XSAmJiBzcmNba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdmFsdWUgKz0gKGtleSA9PT0gJ3N0eWxlJyA/ICc7JyA6ICcgJykgKyBzcmNba2V5XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gc3JjW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRzdC4kc2V0KGtleSwgdmFsdWUsIHRydWUsIHNyY0F0dHJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBjb3B5IHRoZSBuZXcgYXR0cmlidXRlcyBvbiB0aGUgb2xkIGF0dHJzIG9iamVjdFxuICAgICAgZm9yRWFjaChzcmMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBzZXQgdGhpcyBhdHRyaWJ1dGUgaW4gdGhlIGxvb3AgYWJvdmUuXG4gICAgICAgIC8vIGBkc3RgIHdpbGwgbmV2ZXIgY29udGFpbiBoYXNPd25Qcm9wZXJ0eSBhcyBET00gcGFyc2VyIHdvbid0IGxldCBpdC5cbiAgICAgICAgLy8gWW91IHdpbGwgZ2V0IGFuIFwiSW52YWxpZENoYXJhY3RlckVycm9yOiBET00gRXhjZXB0aW9uIDVcIiBlcnJvciBpZiB5b3VcbiAgICAgICAgLy8gaGF2ZSBhbiBhdHRyaWJ1dGUgbGlrZSBcImhhcy1vd24tcHJvcGVydHlcIiBvciBcImRhdGEtaGFzLW93bi1wcm9wZXJ0eVwiLCBldGMuXG4gICAgICAgIGlmICghZHN0Lmhhc093blByb3BlcnR5KGtleSkgJiYga2V5LmNoYXJBdCgwKSAhPT0gJyQnKSB7XG4gICAgICAgICAgZHN0W2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgIGlmIChrZXkgIT09ICdjbGFzcycgJiYga2V5ICE9PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICBkc3RBdHRyW2tleV0gPSBzcmNBdHRyW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLCAkY29tcGlsZU5vZGUsIHRBdHRycyxcbiAgICAgICAgJHJvb3RFbGVtZW50LCBjaGlsZFRyYW5zY2x1ZGVGbiwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIHZhciBsaW5rUXVldWUgPSBbXSxcbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbixcbiAgICAgICAgICBhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sXG4gICAgICAgICAgYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSA9ICRjb21waWxlTm9kZVswXSxcbiAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUgPSBkaXJlY3RpdmVzLnNoaWZ0KCksXG4gICAgICAgICAgZGVyaXZlZFN5bmNEaXJlY3RpdmUgPSBpbmhlcml0KG9yaWdBc3luY0RpcmVjdGl2ZSwge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IG51bGwsIHRyYW5zY2x1ZGU6IG51bGwsIHJlcGxhY2U6IG51bGwsICQkb3JpZ2luYWxEaXJlY3RpdmU6IG9yaWdBc3luY0RpcmVjdGl2ZVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHRlbXBsYXRlVXJsID0gKGlzRnVuY3Rpb24ob3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsKSlcbiAgICAgICAgICAgICAgPyBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwoJGNvbXBpbGVOb2RlLCB0QXR0cnMpXG4gICAgICAgICAgICAgIDogb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsLFxuICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlID0gb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlTmFtZXNwYWNlO1xuXG4gICAgICAkY29tcGlsZU5vZGUuZW1wdHkoKTtcblxuICAgICAgJHRlbXBsYXRlUmVxdWVzdCh0ZW1wbGF0ZVVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIHZhciBjb21waWxlTm9kZSwgdGVtcFRlbXBsYXRlQXR0cnMsICR0ZW1wbGF0ZSwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcblxuICAgICAgICAgIGNvbnRlbnQgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGNvbnRlbnQpO1xuXG4gICAgICAgICAgaWYgKG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKSB7XG4gICAgICAgICAgICBpZiAoanFMaXRlSXNUZXh0Tm9kZShjb250ZW50KSkge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IHJlbW92ZUNvbW1lbnRzKHdyYXBUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWVzcGFjZSwgdHJpbShjb250ZW50KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkdGVtcGxhdGVbMF07XG5cbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9PSAxIHx8IGNvbXBpbGVOb2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndHBscnQnLFxuICAgICAgICAgICAgICAgICAgJ1RlbXBsYXRlIGZvciBkaXJlY3RpdmUgXFwnezB9XFwnIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfScsXG4gICAgICAgICAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUubmFtZSwgdGVtcGxhdGVVcmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZW1wVGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xuICAgICAgICAgICAgcmVwbGFjZVdpdGgoJHJvb3RFbGVtZW50LCAkY29tcGlsZU5vZGUsIGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhjb21waWxlTm9kZSwgW10sIHRlbXBUZW1wbGF0ZUF0dHJzKTtcblxuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KG9yaWdBc3luY0RpcmVjdGl2ZS5zY29wZSkpIHtcbiAgICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIGRpcmVjdGl2ZSB0aGF0IGNhdXNlZCB0aGUgdGVtcGxhdGUgdG8gYmUgbG9hZGVkIGFzeW5jIHJlcXVpcmVkXG4gICAgICAgICAgICAgIC8vIGFuIGlzb2xhdGUgc2NvcGVcbiAgICAgICAgICAgICAgbWFya0RpcmVjdGl2ZVNjb3BlKHRlbXBsYXRlRGlyZWN0aXZlcywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXJlY3RpdmVzID0gdGVtcGxhdGVEaXJlY3RpdmVzLmNvbmNhdChkaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRBdHRycywgdGVtcFRlbXBsYXRlQXR0cnMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb21waWxlTm9kZSA9IGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGU7XG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuaHRtbChjb250ZW50KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkaXJlY3RpdmVzLnVuc2hpZnQoZGVyaXZlZFN5bmNEaXJlY3RpdmUpO1xuXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4gPSBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgY29tcGlsZU5vZGUsIHRBdHRycyxcbiAgICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4sICRjb21waWxlTm9kZSwgb3JpZ0FzeW5jRGlyZWN0aXZlLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucyxcbiAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCk7XG4gICAgICAgICAgZm9yRWFjaCgkcm9vdEVsZW1lbnQsIGZ1bmN0aW9uKG5vZGUsIGkpIHtcbiAgICAgICAgICAgIGlmIChub2RlID09PSBjb21waWxlTm9kZSkge1xuICAgICAgICAgICAgICAkcm9vdEVsZW1lbnRbaV0gPSAkY29tcGlsZU5vZGVbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuID0gY29tcGlsZU5vZGVzKCRjb21waWxlTm9kZVswXS5jaGlsZE5vZGVzLCBjaGlsZFRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgICB3aGlsZSAobGlua1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHNjb3BlID0gbGlua1F1ZXVlLnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGxpbmtSb290RWxlbWVudCA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGJvdW5kVHJhbnNjbHVkZUZuID0gbGlua1F1ZXVlLnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgbGlua05vZGUgPSAkY29tcGlsZU5vZGVbMF07XG5cbiAgICAgICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgY29udGludWU7XG5cbiAgICAgICAgICAgIGlmIChiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlICE9PSBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlKSB7XG4gICAgICAgICAgICAgIHZhciBvbGRDbGFzc2VzID0gYmVmb3JlVGVtcGxhdGVMaW5rTm9kZS5jbGFzc05hbWU7XG5cbiAgICAgICAgICAgICAgaWYgKCEocHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSAmJlxuICAgICAgICAgICAgICAgICAgb3JpZ0FzeW5jRGlyZWN0aXZlLnJlcGxhY2UpKSB7XG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNsb25lZCB0aGVyZWZvcmUgd2UgaGF2ZSB0byBjbG9uZSBhcyB3ZWxsLlxuICAgICAgICAgICAgICAgIGxpbmtOb2RlID0ganFMaXRlQ2xvbmUoY29tcGlsZU5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlcGxhY2VXaXRoKGxpbmtSb290RWxlbWVudCwganFMaXRlKGJlZm9yZVRlbXBsYXRlTGlua05vZGUpLCBsaW5rTm9kZSk7XG5cbiAgICAgICAgICAgICAgLy8gQ29weSBpbiBDU1MgY2xhc3NlcyBmcm9tIG9yaWdpbmFsIG5vZGVcbiAgICAgICAgICAgICAgc2FmZUFkZENsYXNzKGpxTGl0ZShsaW5rTm9kZSksIG9sZENsYXNzZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4oYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuLCBzY29wZSwgbGlua05vZGUsICRyb290RWxlbWVudCxcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmtRdWV1ZSA9IG51bGw7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgaWYgKGlzRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlbGF5ZWROb2RlTGlua0ZuKGlnbm9yZUNoaWxkTGlua0ZuLCBzY29wZSwgbm9kZSwgcm9vdEVsZW1lbnQsIGJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIHZhciBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gYm91bmRUcmFuc2NsdWRlRm47XG4gICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBpZiAobGlua1F1ZXVlKSB7XG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2goc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICByb290RWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sIHNjb3BlLCBub2RlLCByb290RWxlbWVudCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTb3J0aW5nIGZ1bmN0aW9uIGZvciBib3VuZCBkaXJlY3RpdmVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ5UHJpb3JpdHkoYSwgYikge1xuICAgICAgdmFyIGRpZmYgPSBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcbiAgICAgIGlmIChkaWZmICE9PSAwKSByZXR1cm4gZGlmZjtcbiAgICAgIGlmIChhLm5hbWUgIT09IGIubmFtZSkgcmV0dXJuIChhLm5hbWUgPCBiLm5hbWUpID8gLTEgOiAxO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFzc2VydE5vRHVwbGljYXRlKHdoYXQsIHByZXZpb3VzRGlyZWN0aXZlLCBkaXJlY3RpdmUsIGVsZW1lbnQpIHtcblxuICAgICAgZnVuY3Rpb24gd3JhcE1vZHVsZU5hbWVJZkRlZmluZWQobW9kdWxlTmFtZSkge1xuICAgICAgICByZXR1cm4gbW9kdWxlTmFtZSA/XG4gICAgICAgICAgKCcgKG1vZHVsZTogJyArIG1vZHVsZU5hbWUgKyAnKScpIDpcbiAgICAgICAgICAnJztcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZpb3VzRGlyZWN0aXZlKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtdWx0aWRpcicsICdNdWx0aXBsZSBkaXJlY3RpdmVzIFt7MH17MX0sIHsyfXszfV0gYXNraW5nIGZvciB7NH0gb246IHs1fScsXG4gICAgICAgICAgICBwcmV2aW91c0RpcmVjdGl2ZS5uYW1lLCB3cmFwTW9kdWxlTmFtZUlmRGVmaW5lZChwcmV2aW91c0RpcmVjdGl2ZS4kJG1vZHVsZU5hbWUpLFxuICAgICAgICAgICAgZGlyZWN0aXZlLm5hbWUsIHdyYXBNb2R1bGVOYW1lSWZEZWZpbmVkKGRpcmVjdGl2ZS4kJG1vZHVsZU5hbWUpLCB3aGF0LCBzdGFydGluZ1RhZyhlbGVtZW50KSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBhZGRUZXh0SW50ZXJwb2xhdGVEaXJlY3RpdmUoZGlyZWN0aXZlcywgdGV4dCkge1xuICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUodGV4dCwgdHJ1ZSk7XG4gICAgICBpZiAoaW50ZXJwb2xhdGVGbikge1xuICAgICAgICBkaXJlY3RpdmVzLnB1c2goe1xuICAgICAgICAgIHByaW9yaXR5OiAwLFxuICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZUNvbXBpbGVGbih0ZW1wbGF0ZU5vZGUpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZU5vZGVQYXJlbnQgPSB0ZW1wbGF0ZU5vZGUucGFyZW50KCksXG4gICAgICAgICAgICAgICAgaGFzQ29tcGlsZVBhcmVudCA9ICEhdGVtcGxhdGVOb2RlUGFyZW50Lmxlbmd0aDtcblxuICAgICAgICAgICAgLy8gV2hlbiB0cmFuc2NsdWRpbmcgYSB0ZW1wbGF0ZSB0aGF0IGhhcyBiaW5kaW5ncyBpbiB0aGUgcm9vdFxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgaGF2ZSBhIHBhcmVudCBhbmQgdGh1cyBuZWVkIHRvIGFkZCB0aGUgY2xhc3MgZHVyaW5nIGxpbmtpbmcgZm4uXG4gICAgICAgICAgICBpZiAoaGFzQ29tcGlsZVBhcmVudCkgY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0ZW1wbGF0ZU5vZGVQYXJlbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdGV4dEludGVycG9sYXRlTGlua0ZuKHNjb3BlLCBub2RlKSB7XG4gICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudCgpO1xuICAgICAgICAgICAgICBpZiAoIWhhc0NvbXBpbGVQYXJlbnQpIGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3MocGFyZW50KTtcbiAgICAgICAgICAgICAgY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKHBhcmVudCwgaW50ZXJwb2xhdGVGbi5leHByZXNzaW9ucyk7XG4gICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChpbnRlcnBvbGF0ZUZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICBub2RlWzBdLm5vZGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHdyYXBUZW1wbGF0ZSh0eXBlLCB0ZW1wbGF0ZSkge1xuICAgICAgdHlwZSA9IGxvd2VyY2FzZSh0eXBlIHx8ICdodG1sJyk7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3N2Zyc6XG4gICAgICBjYXNlICdtYXRoJzpcbiAgICAgICAgdmFyIHdyYXBwZXIgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gJzwnICsgdHlwZSArICc+JyArIHRlbXBsYXRlICsgJzwvJyArIHR5cGUgKyAnPic7XG4gICAgICAgIHJldHVybiB3cmFwcGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2RlcztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGdldFRydXN0ZWRDb250ZXh0KG5vZGUsIGF0dHJOb3JtYWxpemVkTmFtZSkge1xuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ3NyY2RvYycpIHtcbiAgICAgICAgcmV0dXJuICRzY2UuSFRNTDtcbiAgICAgIH1cbiAgICAgIHZhciB0YWcgPSBub2RlTmFtZV8obm9kZSk7XG4gICAgICAvLyBBbGwgdGFncyB3aXRoIHNyYyBhdHRyaWJ1dGVzIHJlcXVpcmUgYSBSRVNPVVJDRV9VUkwgdmFsdWUsIGV4Y2VwdCBmb3JcbiAgICAgIC8vIGltZyBhbmQgdmFyaW91cyBodG1sNSBtZWRpYSB0YWdzLlxuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ3NyYycgfHwgYXR0ck5vcm1hbGl6ZWROYW1lID09PSAnbmdTcmMnKSB7XG4gICAgICAgIGlmIChbJ2ltZycsICd2aWRlbycsICdhdWRpbycsICdzb3VyY2UnLCAndHJhY2snXS5pbmRleE9mKHRhZykgPT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuICRzY2UuUkVTT1VSQ0VfVVJMO1xuICAgICAgICB9XG4gICAgICAvLyBtYWN0aW9uW3hsaW5rOmhyZWZdIGNhbiBzb3VyY2UgU1ZHLiAgSXQncyBub3QgbGltaXRlZCB0byA8bWFjdGlvbj4uXG4gICAgICB9IGVsc2UgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ3hsaW5rSHJlZicgfHxcbiAgICAgICAgICAodGFnID09PSAnZm9ybScgJiYgYXR0ck5vcm1hbGl6ZWROYW1lID09PSAnYWN0aW9uJykgfHxcbiAgICAgICAgICAvLyBsaW5rcyBjYW4gYmUgc3R5bGVzaGVldHMgb3IgaW1wb3J0cywgd2hpY2ggY2FuIHJ1biBzY3JpcHQgaW4gdGhlIGN1cnJlbnQgb3JpZ2luXG4gICAgICAgICAgKHRhZyA9PT0gJ2xpbmsnICYmIGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ2hyZWYnKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiAkc2NlLlJFU09VUkNFX1VSTDtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZShub2RlLCBkaXJlY3RpdmVzLCB2YWx1ZSwgbmFtZSwgaXNOZ0F0dHIpIHtcbiAgICAgIHZhciB0cnVzdGVkQ29udGV4dCA9IGdldFRydXN0ZWRDb250ZXh0KG5vZGUsIG5hbWUpO1xuICAgICAgdmFyIG11c3RIYXZlRXhwcmVzc2lvbiA9ICFpc05nQXR0cjtcbiAgICAgIHZhciBhbGxPck5vdGhpbmcgPSBBTExfT1JfTk9USElOR19BVFRSU1tuYW1lXSB8fCBpc05nQXR0cjtcblxuICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUodmFsdWUsIG11c3RIYXZlRXhwcmVzc2lvbiwgdHJ1c3RlZENvbnRleHQsIGFsbE9yTm90aGluZyk7XG5cbiAgICAgIC8vIG5vIGludGVycG9sYXRpb24gZm91bmQgLT4gaWdub3JlXG4gICAgICBpZiAoIWludGVycG9sYXRlRm4pIHJldHVybjtcblxuICAgICAgaWYgKG5hbWUgPT09ICdtdWx0aXBsZScgJiYgbm9kZU5hbWVfKG5vZGUpID09PSAnc2VsZWN0Jykge1xuICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignc2VsbXVsdGknLFxuICAgICAgICAgICAgJ0JpbmRpbmcgdG8gdGhlIFxcJ211bHRpcGxlXFwnIGF0dHJpYnV0ZSBpcyBub3Qgc3VwcG9ydGVkLiBFbGVtZW50OiB7MH0nLFxuICAgICAgICAgICAgc3RhcnRpbmdUYWcobm9kZSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoRVZFTlRfSEFORExFUl9BVFRSX1JFR0VYUC50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdub2RvbWV2ZW50cycsXG4gICAgICAgICAgICAnSW50ZXJwb2xhdGlvbnMgZm9yIEhUTUwgRE9NIGV2ZW50IGF0dHJpYnV0ZXMgYXJlIGRpc2FsbG93ZWQuICBQbGVhc2UgdXNlIHRoZSAnICtcbiAgICAgICAgICAgICAgICAnbmctIHZlcnNpb25zIChzdWNoIGFzIG5nLWNsaWNrIGluc3RlYWQgb2Ygb25jbGljaykgaW5zdGVhZC4nKTtcbiAgICAgIH1cblxuICAgICAgZGlyZWN0aXZlcy5wdXNoKHtcbiAgICAgICAgcHJpb3JpdHk6IDEwMCxcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZVByZUxpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAgICAgICAgIHZhciAkJG9ic2VydmVycyA9IChhdHRyLiQkb2JzZXJ2ZXJzIHx8IChhdHRyLiQkb2JzZXJ2ZXJzID0gY3JlYXRlTWFwKCkpKTtcblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgaGFzIGNoYW5nZWQgc2luY2UgbGFzdCAkaW50ZXJwb2xhdGUoKWVkXG4gICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gYXR0cltuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGludGVycG9sYXRlIGFnYWluIHNpbmNlIHRoZSBhdHRyaWJ1dGUgdmFsdWUgaGFzIGJlZW4gdXBkYXRlZFxuICAgICAgICAgICAgICAgICAgLy8gKGUuZy4gYnkgYW5vdGhlciBkaXJlY3RpdmUncyBjb21waWxlIGZ1bmN0aW9uKVxuICAgICAgICAgICAgICAgICAgLy8gZW5zdXJlIHVuc2V0L2VtcHR5IHZhbHVlcyBtYWtlIGludGVycG9sYXRlRm4gZmFsc3lcbiAgICAgICAgICAgICAgICAgIGludGVycG9sYXRlRm4gPSBuZXdWYWx1ZSAmJiAkaW50ZXJwb2xhdGUobmV3VmFsdWUsIHRydWUsIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpO1xuICAgICAgICAgICAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBhdHRyaWJ1dGUgd2FzIHVwZGF0ZWQgc28gdGhhdCB0aGVyZSBpcyBubyBpbnRlcnBvbGF0aW9uIGdvaW5nIG9uIHdlIGRvbid0IHdhbnQgdG9cbiAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBhbnkgb2JzZXJ2ZXJzXG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcnBvbGF0ZUZuKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIGF0dHIgb2JqZWN0IHNvIHRoYXQgaXQncyByZWFkeSBpbiBjYXNlIHdlIG5lZWQgdGhlIHZhbHVlIGZvciBpc29sYXRlXG4gICAgICAgICAgICAgICAgLy8gc2NvcGUgaW5pdGlhbGl6YXRpb24sIG90aGVyd2lzZSB0aGUgdmFsdWUgd291bGQgbm90IGJlIGF2YWlsYWJsZSBmcm9tIGlzb2xhdGVcbiAgICAgICAgICAgICAgICAvLyBkaXJlY3RpdmUncyBsaW5raW5nIGZuIGR1cmluZyBsaW5raW5nIHBoYXNlXG4gICAgICAgICAgICAgICAgYXR0cltuYW1lXSA9IGludGVycG9sYXRlRm4oc2NvcGUpO1xuXG4gICAgICAgICAgICAgICAgKCQkb2JzZXJ2ZXJzW25hbWVdIHx8ICgkJG9ic2VydmVyc1tuYW1lXSA9IFtdKSkuJCRpbnRlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgKGF0dHIuJCRvYnNlcnZlcnMgJiYgYXR0ci4kJG9ic2VydmVyc1tuYW1lXS4kJHNjb3BlIHx8IHNjb3BlKS5cbiAgICAgICAgICAgICAgICAgICR3YXRjaChpbnRlcnBvbGF0ZUZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vc3BlY2lhbCBjYXNlIGZvciBjbGFzcyBhdHRyaWJ1dGUgYWRkaXRpb24gKyByZW1vdmFsXG4gICAgICAgICAgICAgICAgICAgIC8vc28gdGhhdCBjbGFzcyBjaGFuZ2VzIGNhbiB0YXAgaW50byB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vaG9va3MgcHJvdmlkZWQgYnkgdGhlICRhbmltYXRlIHNlcnZpY2UuIEJlIHN1cmUgdG9cbiAgICAgICAgICAgICAgICAgICAgLy9za2lwIGFuaW1hdGlvbnMgd2hlbiB0aGUgZmlyc3QgZGlnZXN0IG9jY3VycyAod2hlblxuICAgICAgICAgICAgICAgICAgICAvL2JvdGggdGhlIG5ldyBhbmQgdGhlIG9sZCB2YWx1ZXMgYXJlIHRoZSBzYW1lKSBzaW5jZVxuICAgICAgICAgICAgICAgICAgICAvL3RoZSBDU1MgY2xhc3NlcyBhcmUgdGhlIG5vbi1pbnRlcnBvbGF0ZWQgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGF0dHIuJHVwZGF0ZUNsYXNzKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGEgc3BlY2lhbCBqcUxpdGUucmVwbGFjZVdpdGgsIHdoaWNoIGNhbiByZXBsYWNlIGl0ZW1zIHdoaWNoXG4gICAgICogaGF2ZSBubyBwYXJlbnRzLCBwcm92aWRlZCB0aGF0IHRoZSBjb250YWluaW5nIGpxTGl0ZSBjb2xsZWN0aW9uIGlzIHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtKcUxpdGU9fSAkcm9vdEVsZW1lbnQgVGhlIHJvb3Qgb2YgdGhlIGNvbXBpbGUgdHJlZS4gVXNlZCBzbyB0aGF0IHdlIGNhbiByZXBsYWNlIG5vZGVzXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhlIHJvb3Qgb2YgdGhlIHRyZWUuXG4gICAgICogQHBhcmFtIHtKcUxpdGV9IGVsZW1lbnRzVG9SZW1vdmUgVGhlIGpxTGl0ZSBlbGVtZW50IHdoaWNoIHdlIGFyZSBnb2luZyB0byByZXBsYWNlLiBXZSBrZWVwXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHNoZWxsLCBidXQgcmVwbGFjZSBpdHMgRE9NIG5vZGUgcmVmZXJlbmNlLlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Tm9kZSBUaGUgbmV3IERPTSBub2RlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcGxhY2VXaXRoKCRyb290RWxlbWVudCwgZWxlbWVudHNUb1JlbW92ZSwgbmV3Tm9kZSkge1xuICAgICAgdmFyIGZpcnN0RWxlbWVudFRvUmVtb3ZlID0gZWxlbWVudHNUb1JlbW92ZVswXSxcbiAgICAgICAgICByZW1vdmVDb3VudCA9IGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoLFxuICAgICAgICAgIHBhcmVudCA9IGZpcnN0RWxlbWVudFRvUmVtb3ZlLnBhcmVudE5vZGUsXG4gICAgICAgICAgaSwgaWk7XG5cbiAgICAgIGlmICgkcm9vdEVsZW1lbnQpIHtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSAkcm9vdEVsZW1lbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGlmICgkcm9vdEVsZW1lbnRbaV0gPT09IGZpcnN0RWxlbWVudFRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAkcm9vdEVsZW1lbnRbaSsrXSA9IG5ld05vZGU7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gaSwgajIgPSBqICsgcmVtb3ZlQ291bnQgLSAxLFxuICAgICAgICAgICAgICAgICAgICAgamogPSAkcm9vdEVsZW1lbnQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICBqIDwgamo7IGorKywgajIrKykge1xuICAgICAgICAgICAgICBpZiAoajIgPCBqaikge1xuICAgICAgICAgICAgICAgICRyb290RWxlbWVudFtqXSA9ICRyb290RWxlbWVudFtqMl07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlICRyb290RWxlbWVudFtqXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHJvb3RFbGVtZW50Lmxlbmd0aCAtPSByZW1vdmVDb3VudCAtIDE7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSByZXBsYWNlZCBlbGVtZW50IGlzIGFsc28gdGhlIGpRdWVyeSAuY29udGV4dCB0aGVuIHJlcGxhY2UgaXRcbiAgICAgICAgICAgIC8vIC5jb250ZXh0IGlzIGEgZGVwcmVjYXRlZCBqUXVlcnkgYXBpLCBzbyB3ZSBzaG91bGQgc2V0IGl0IG9ubHkgd2hlbiBqUXVlcnkgc2V0IGl0XG4gICAgICAgICAgICAvLyBodHRwOi8vYXBpLmpxdWVyeS5jb20vY29udGV4dC9cbiAgICAgICAgICAgIGlmICgkcm9vdEVsZW1lbnQuY29udGV4dCA9PT0gZmlyc3RFbGVtZW50VG9SZW1vdmUpIHtcbiAgICAgICAgICAgICAgJHJvb3RFbGVtZW50LmNvbnRleHQgPSBuZXdOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdOb2RlLCBmaXJzdEVsZW1lbnRUb1JlbW92ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGVuZCBhbGwgdGhlIGBlbGVtZW50c1RvUmVtb3ZlYCB0byBhIGZyYWdtZW50LiBUaGlzIHdpbGwuLi5cbiAgICAgIC8vIC0gcmVtb3ZlIHRoZW0gZnJvbSB0aGUgRE9NXG4gICAgICAvLyAtIGFsbG93IHRoZW0gdG8gc3RpbGwgYmUgdHJhdmVyc2VkIHdpdGggLm5leHRTaWJsaW5nXG4gICAgICAvLyAtIGFsbG93IGEgc2luZ2xlIGZyYWdtZW50LnFTQSB0byBmZXRjaCBhbGwgZWxlbWVudHMgYmVpbmcgcmVtb3ZlZFxuICAgICAgdmFyIGZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCByZW1vdmVDb3VudDsgaSsrKSB7XG4gICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsZW1lbnRzVG9SZW1vdmVbaV0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoanFMaXRlLmhhc0RhdGEoZmlyc3RFbGVtZW50VG9SZW1vdmUpKSB7XG4gICAgICAgIC8vIENvcHkgb3ZlciB1c2VyIGRhdGEgKHRoYXQgaW5jbHVkZXMgQW5ndWxhckpTJ3MgJHNjb3BlIGV0Yy4pLiBEb24ndCBjb3B5IHByaXZhdGVcbiAgICAgICAgLy8gZGF0YSBoZXJlIGJlY2F1c2UgdGhlcmUncyBubyBwdWJsaWMgaW50ZXJmYWNlIGluIGpRdWVyeSB0byBkbyB0aGF0IGFuZCBjb3B5aW5nIG92ZXJcbiAgICAgICAgLy8gZXZlbnQgbGlzdGVuZXJzICh3aGljaCBpcyB0aGUgbWFpbiB1c2Ugb2YgcHJpdmF0ZSBkYXRhKSB3b3VsZG4ndCB3b3JrIGFueXdheS5cbiAgICAgICAganFMaXRlLmRhdGEobmV3Tm9kZSwganFMaXRlLmRhdGEoZmlyc3RFbGVtZW50VG9SZW1vdmUpKTtcblxuICAgICAgICAvLyBSZW1vdmUgJGRlc3Ryb3kgZXZlbnQgbGlzdGVuZXJzIGZyb20gYGZpcnN0RWxlbWVudFRvUmVtb3ZlYFxuICAgICAgICBqcUxpdGUoZmlyc3RFbGVtZW50VG9SZW1vdmUpLm9mZignJGRlc3Ryb3knKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW51cCBhbnkgZGF0YS9saXN0ZW5lcnMgb24gdGhlIGVsZW1lbnRzIGFuZCBjaGlsZHJlbi5cbiAgICAgIC8vIFRoaXMgaW5jbHVkZXMgaW52b2tpbmcgdGhlICRkZXN0cm95IGV2ZW50IG9uIGFueSBlbGVtZW50cyB3aXRoIGxpc3RlbmVycy5cbiAgICAgIGpxTGl0ZS5jbGVhbkRhdGEoZnJhZ21lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBqcUxpdGUgY29sbGVjdGlvbiB0byBvbmx5IGNvbnRhaW4gdGhlIGBuZXdOb2RlYFxuICAgICAgZm9yIChpID0gMTsgaSA8IHJlbW92ZUNvdW50OyBpKyspIHtcbiAgICAgICAgZGVsZXRlIGVsZW1lbnRzVG9SZW1vdmVbaV07XG4gICAgICB9XG4gICAgICBlbGVtZW50c1RvUmVtb3ZlWzBdID0gbmV3Tm9kZTtcbiAgICAgIGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoID0gMTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNsb25lQW5kQW5ub3RhdGVGbihmbiwgYW5ub3RhdGlvbikge1xuICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbigpIHsgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IH0sIGZuLCBhbm5vdGF0aW9uKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGludm9rZUxpbmtGbihsaW5rRm4sIHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpbmtGbihzY29wZSwgJGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSwgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmVOYW1lKSB7XG4gICAgICBpZiAoc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtaXNzaW5nYXR0cicsXG4gICAgICAgICAgJ0F0dHJpYnV0ZSBcXCd7MH1cXCcgb2YgXFwnezF9XFwnIGlzIG5vbi1vcHRpb25hbCBhbmQgbXVzdCBiZSBzZXQhJyxcbiAgICAgICAgICBhdHRyTmFtZSwgZGlyZWN0aXZlTmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0IHVwICR3YXRjaGVzIGZvciBpc29sYXRlIHNjb3BlIGFuZCBjb250cm9sbGVyIGJpbmRpbmdzLlxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVEaXJlY3RpdmVCaW5kaW5ncyhzY29wZSwgYXR0cnMsIGRlc3RpbmF0aW9uLCBiaW5kaW5ncywgZGlyZWN0aXZlKSB7XG4gICAgICB2YXIgcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uID0gW107XG4gICAgICB2YXIgaW5pdGlhbENoYW5nZXMgPSB7fTtcbiAgICAgIHZhciBjaGFuZ2VzO1xuXG4gICAgICBmb3JFYWNoKGJpbmRpbmdzLCBmdW5jdGlvbiBpbml0aWFsaXplQmluZGluZyhkZWZpbml0aW9uLCBzY29wZU5hbWUpIHtcbiAgICAgICAgdmFyIGF0dHJOYW1lID0gZGVmaW5pdGlvbi5hdHRyTmFtZSxcbiAgICAgICAgb3B0aW9uYWwgPSBkZWZpbml0aW9uLm9wdGlvbmFsLFxuICAgICAgICBtb2RlID0gZGVmaW5pdGlvbi5tb2RlLCAvLyBALCA9LCA8LCBvciAmXG4gICAgICAgIGxhc3RWYWx1ZSxcbiAgICAgICAgcGFyZW50R2V0LCBwYXJlbnRTZXQsIGNvbXBhcmUsIHJlbW92ZVdhdGNoO1xuXG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuXG4gICAgICAgICAgY2FzZSAnQCc6XG4gICAgICAgICAgICBpZiAoIW9wdGlvbmFsICYmICFoYXNPd25Qcm9wZXJ0eS5jYWxsKGF0dHJzLCBhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgc3RyaWN0QmluZGluZ3NDaGVjayhhdHRyTmFtZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gYXR0cnNbYXR0ck5hbWVdID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW1vdmVXYXRjaCA9IGF0dHJzLiRvYnNlcnZlKGF0dHJOYW1lLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcodmFsdWUpIHx8IGlzQm9vbGVhbih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSBkZXN0aW5hdGlvbltzY29wZU5hbWVdO1xuICAgICAgICAgICAgICAgIHJlY29yZENoYW5nZXMoc2NvcGVOYW1lLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhdHRycy4kJG9ic2VydmVyc1thdHRyTmFtZV0uJCRzY29wZSA9IHNjb3BlO1xuICAgICAgICAgICAgbGFzdFZhbHVlID0gYXR0cnNbYXR0ck5hbWVdO1xuICAgICAgICAgICAgaWYgKGlzU3RyaW5nKGxhc3RWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBoYXMgYmVlbiBwcm92aWRlZCB0aGVuIHdlIHRyaWdnZXIgYW4gaW50ZXJwb2xhdGlvbiB0byBlbnN1cmVcbiAgICAgICAgICAgICAgLy8gdGhlIHZhbHVlIGlzIHRoZXJlIGZvciB1c2UgaW4gdGhlIGxpbmsgZm5cbiAgICAgICAgICAgICAgZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9ICRpbnRlcnBvbGF0ZShsYXN0VmFsdWUpKHNjb3BlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNCb29sZWFuKGxhc3RWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgLy8gSWYgdGhlIGF0dHJpYnV0ZXMgaXMgb25lIG9mIHRoZSBCT09MRUFOX0FUVFIgdGhlbiBBbmd1bGFySlMgd2lsbCBoYXZlIGNvbnZlcnRlZFxuICAgICAgICAgICAgICAvLyB0aGUgdmFsdWUgdG8gYm9vbGVhbiByYXRoZXIgdGhhbiBhIHN0cmluZywgc28gd2Ugc3BlY2lhbCBjYXNlIHRoaXMgc2l0dWF0aW9uXG4gICAgICAgICAgICAgIGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBsYXN0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbml0aWFsQ2hhbmdlc1tzY29wZU5hbWVdID0gbmV3IFNpbXBsZUNoYW5nZShfVU5JTklUSUFMSVpFRF9WQUxVRSwgZGVzdGluYXRpb25bc2NvcGVOYW1lXSk7XG4gICAgICAgICAgICByZW1vdmVXYXRjaENvbGxlY3Rpb24ucHVzaChyZW1vdmVXYXRjaCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJz0nOlxuICAgICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKGF0dHJzLCBhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSBicmVhaztcbiAgICAgICAgICAgICAgc3RyaWN0QmluZGluZ3NDaGVjayhhdHRyTmFtZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9uYWwgJiYgIWF0dHJzW2F0dHJOYW1lXSkgYnJlYWs7XG5cbiAgICAgICAgICAgIHBhcmVudEdldCA9ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pO1xuICAgICAgICAgICAgaWYgKHBhcmVudEdldC5saXRlcmFsKSB7XG4gICAgICAgICAgICAgIGNvbXBhcmUgPSBlcXVhbHM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb21wYXJlID0gc2ltcGxlQ29tcGFyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudFNldCA9IHBhcmVudEdldC5hc3NpZ24gfHwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBjaGFuZ2UsIG9yIHdlIHdpbGwgdGhyb3cgdGhpcyBleGNlcHRpb24gb24gZXZlcnkgJGRpZ2VzdFxuICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gcGFyZW50R2V0KHNjb3BlKTtcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vbmFzc2lnbicsXG4gICAgICAgICAgICAgICAgICAnRXhwcmVzc2lvbiBcXCd7MH1cXCcgaW4gYXR0cmlidXRlIFxcJ3sxfVxcJyB1c2VkIHdpdGggZGlyZWN0aXZlIFxcJ3syfVxcJyBpcyBub24tYXNzaWduYWJsZSEnLFxuICAgICAgICAgICAgICAgICAgYXR0cnNbYXR0ck5hbWVdLCBhdHRyTmFtZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBwYXJlbnRHZXQoc2NvcGUpO1xuICAgICAgICAgICAgdmFyIHBhcmVudFZhbHVlV2F0Y2ggPSBmdW5jdGlvbiBwYXJlbnRWYWx1ZVdhdGNoKHBhcmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmICghY29tcGFyZShwYXJlbnRWYWx1ZSwgZGVzdGluYXRpb25bc2NvcGVOYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgb3V0IG9mIHN5bmMgYW5kIG5lZWQgdG8gY29weVxuICAgICAgICAgICAgICAgIGlmICghY29tcGFyZShwYXJlbnRWYWx1ZSwgbGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgLy8gcGFyZW50IGNoYW5nZWQgYW5kIGl0IGhhcyBwcmVjZWRlbmNlXG4gICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gcGFyZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwYXJlbnQgY2FuIGJlIGFzc2lnbmVkIHRoZW4gZG8gc29cbiAgICAgICAgICAgICAgICAgIHBhcmVudFNldChzY29wZSwgcGFyZW50VmFsdWUgPSBkZXN0aW5hdGlvbltzY29wZU5hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbGFzdFZhbHVlID0gcGFyZW50VmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiBsYXN0VmFsdWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcGFyZW50VmFsdWVXYXRjaC4kc3RhdGVmdWwgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uY29sbGVjdGlvbikge1xuICAgICAgICAgICAgICByZW1vdmVXYXRjaCA9IHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oYXR0cnNbYXR0ck5hbWVdLCBwYXJlbnRWYWx1ZVdhdGNoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gc2NvcGUuJHdhdGNoKCRwYXJzZShhdHRyc1thdHRyTmFtZV0sIHBhcmVudFZhbHVlV2F0Y2gpLCBudWxsLCBwYXJlbnRHZXQubGl0ZXJhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW1vdmVXYXRjaENvbGxlY3Rpb24ucHVzaChyZW1vdmVXYXRjaCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJzwnOlxuICAgICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKGF0dHJzLCBhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSBicmVhaztcbiAgICAgICAgICAgICAgc3RyaWN0QmluZGluZ3NDaGVjayhhdHRyTmFtZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9uYWwgJiYgIWF0dHJzW2F0dHJOYW1lXSkgYnJlYWs7XG5cbiAgICAgICAgICAgIHBhcmVudEdldCA9ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pO1xuICAgICAgICAgICAgdmFyIGRlZXBXYXRjaCA9IHBhcmVudEdldC5saXRlcmFsO1xuXG4gICAgICAgICAgICB2YXIgaW5pdGlhbFZhbHVlID0gZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XG4gICAgICAgICAgICBpbml0aWFsQ2hhbmdlc1tzY29wZU5hbWVdID0gbmV3IFNpbXBsZUNoYW5nZShfVU5JTklUSUFMSVpFRF9WQUxVRSwgZGVzdGluYXRpb25bc2NvcGVOYW1lXSk7XG5cbiAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gc2NvcGUuJHdhdGNoKHBhcmVudEdldCwgZnVuY3Rpb24gcGFyZW50VmFsdWVXYXRjaEFjdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSA9PT0gaW5pdGlhbFZhbHVlIHx8IChkZWVwV2F0Y2ggJiYgZXF1YWxzKG9sZFZhbHVlLCBpbml0aWFsVmFsdWUpKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZWNvcmRDaGFuZ2VzKHNjb3BlTmFtZSwgbmV3VmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgICAgZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfSwgZGVlcFdhdGNoKTtcblxuICAgICAgICAgICAgcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uLnB1c2gocmVtb3ZlV2F0Y2gpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICcmJzpcbiAgICAgICAgICAgIGlmICghb3B0aW9uYWwgJiYgIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb24ndCBhc3NpZ24gT2JqZWN0LnByb3RvdHlwZSBtZXRob2QgdG8gc2NvcGVcbiAgICAgICAgICAgIHBhcmVudEdldCA9IGF0dHJzLmhhc093blByb3BlcnR5KGF0dHJOYW1lKSA/ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pIDogbm9vcDtcblxuICAgICAgICAgICAgLy8gRG9uJ3QgYXNzaWduIG5vb3AgdG8gZGVzdGluYXRpb24gaWYgZXhwcmVzc2lvbiBpcyBub3QgdmFsaWRcbiAgICAgICAgICAgIGlmIChwYXJlbnRHZXQgPT09IG5vb3AgJiYgb3B0aW9uYWwpIGJyZWFrO1xuXG4gICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gZnVuY3Rpb24obG9jYWxzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwYXJlbnRHZXQoc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiByZWNvcmRDaGFuZ2VzKGtleSwgY3VycmVudFZhbHVlLCBwcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGRlc3RpbmF0aW9uLiRvbkNoYW5nZXMpICYmICFzaW1wbGVDb21wYXJlKGN1cnJlbnRWYWx1ZSwgcHJldmlvdXNWYWx1ZSkpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBhbHJlYWR5IHNjaGVkdWxlZCB0aGUgdG9wIGxldmVsIG9uQ2hhbmdlc1F1ZXVlIGhhbmRsZXIgdGhlbiBkbyBzbyBub3dcbiAgICAgICAgICBpZiAoIW9uQ2hhbmdlc1F1ZXVlKSB7XG4gICAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZmx1c2hPbkNoYW5nZXNRdWV1ZSk7XG4gICAgICAgICAgICBvbkNoYW5nZXNRdWV1ZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBhbHJlYWR5IHF1ZXVlZCBhIHRyaWdnZXIgb2Ygb25DaGFuZ2VzIGZvciB0aGlzIGNvbnRyb2xsZXIgdGhlbiBkbyBzbyBub3dcbiAgICAgICAgICBpZiAoIWNoYW5nZXMpIHtcbiAgICAgICAgICAgIGNoYW5nZXMgPSB7fTtcbiAgICAgICAgICAgIG9uQ2hhbmdlc1F1ZXVlLnB1c2godHJpZ2dlck9uQ2hhbmdlc0hvb2spO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZiB0aGUgaGFzIGJlZW4gYSBjaGFuZ2Ugb24gdGhpcyBwcm9wZXJ0eSBhbHJlYWR5IHRoZW4gd2UgbmVlZCB0byByZXVzZSB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICBpZiAoY2hhbmdlc1trZXldKSB7XG4gICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gY2hhbmdlc1trZXldLnByZXZpb3VzVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFN0b3JlIHRoaXMgY2hhbmdlXG4gICAgICAgICAgY2hhbmdlc1trZXldID0gbmV3IFNpbXBsZUNoYW5nZShwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJPbkNoYW5nZXNIb29rKCkge1xuICAgICAgICBkZXN0aW5hdGlvbi4kb25DaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICAvLyBOb3cgY2xlYXIgdGhlIGNoYW5nZXMgc28gdGhhdCB3ZSBzY2hlZHVsZSBvbkNoYW5nZXMgd2hlbiBtb3JlIGNoYW5nZXMgYXJyaXZlXG4gICAgICAgIGNoYW5nZXMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxDaGFuZ2VzOiBpbml0aWFsQ2hhbmdlcyxcbiAgICAgICAgcmVtb3ZlV2F0Y2hlczogcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uLmxlbmd0aCAmJiBmdW5jdGlvbiByZW1vdmVXYXRjaGVzKCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlbW92ZVdhdGNoQ29sbGVjdGlvbi5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICByZW1vdmVXYXRjaENvbGxlY3Rpb25baV0oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XTtcbn1cblxuZnVuY3Rpb24gU2ltcGxlQ2hhbmdlKHByZXZpb3VzLCBjdXJyZW50KSB7XG4gIHRoaXMucHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzO1xuICB0aGlzLmN1cnJlbnRWYWx1ZSA9IGN1cnJlbnQ7XG59XG5TaW1wbGVDaGFuZ2UucHJvdG90eXBlLmlzRmlyc3RDaGFuZ2UgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA9PT0gX1VOSU5JVElBTElaRURfVkFMVUU7IH07XG5cblxudmFyIFBSRUZJWF9SRUdFWFAgPSAvXigoPzp4fGRhdGEpWzpcXC1fXSkvaTtcbnZhciBTUEVDSUFMX0NIQVJTX1JFR0VYUCA9IC9bOlxcLV9dKyguKS9nO1xuXG4vKipcbiAqIENvbnZlcnRzIGFsbCBhY2NlcHRlZCBkaXJlY3RpdmVzIGZvcm1hdCBpbnRvIHByb3BlciBkaXJlY3RpdmUgbmFtZS5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoUFJFRklYX1JFR0VYUCwgJycpXG4gICAgLnJlcGxhY2UoU1BFQ0lBTF9DSEFSU19SRUdFWFAsIGZ1bmN0aW9uKF8sIGxldHRlciwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gb2Zmc2V0ID8gbGV0dGVyLnRvVXBwZXJDYXNlKCkgOiBsZXR0ZXI7XG4gICAgfSk7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNoYXJlZCBvYmplY3QgYmV0d2VlbiBkaXJlY3RpdmUgY29tcGlsZSAvIGxpbmtpbmcgZnVuY3Rpb25zIHdoaWNoIGNvbnRhaW5zIG5vcm1hbGl6ZWQgRE9NXG4gKiBlbGVtZW50IGF0dHJpYnV0ZXMuIFRoZSB2YWx1ZXMgcmVmbGVjdCBjdXJyZW50IGJpbmRpbmcgc3RhdGUgYHt7IH19YC4gVGhlIG5vcm1hbGl6YXRpb24gaXNcbiAqIG5lZWRlZCBzaW5jZSBhbGwgb2YgdGhlc2UgYXJlIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCBpbiBBbmd1bGFySlM6XG4gKlxuICogYGBgXG4gKiAgICA8c3BhbiBuZzpiaW5kPVwiYVwiIG5nLWJpbmQ9XCJhXCIgZGF0YS1uZy1iaW5kPVwiYVwiIHgtbmctYmluZD1cImFcIj5cbiAqIGBgYFxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3BlcnR5XG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYXR0clxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBtYXAgb2YgRE9NIGVsZW1lbnQgYXR0cmlidXRlIG5hbWVzIHRvIHRoZSBub3JtYWxpemVkIG5hbWUuIFRoaXMgaXNcbiAqIG5lZWRlZCB0byBkbyByZXZlcnNlIGxvb2t1cCBmcm9tIG5vcm1hbGl6ZWQgbmFtZSBiYWNrIHRvIGFjdHVhbCBuYW1lLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkc2V0XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU2V0IERPTSBlbGVtZW50IGF0dHJpYnV0ZSB2YWx1ZS5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTm9ybWFsaXplZCBlbGVtZW50IGF0dHJpYnV0ZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBtb2RpZnkuIFRoZSBuYW1lIGlzXG4gKiAgICAgICAgICByZXZlcnNlLXRyYW5zbGF0ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYXR0ciAkYXR0cn1cbiAqICAgICAgICAgIHByb3BlcnR5IHRvIHRoZSBvcmlnaW5hbCBuYW1lLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHNldCB0aGUgYXR0cmlidXRlIHRvLiBUaGUgdmFsdWUgY2FuIGJlIGFuIGludGVycG9sYXRlZCBzdHJpbmcuXG4gKi9cblxuXG5cbi8qKlxuICogQ2xvc3VyZSBjb21waWxlciB0eXBlIGluZm9ybWF0aW9uXG4gKi9cblxuZnVuY3Rpb24gbm9kZXNldExpbmtpbmdGbihcbiAgLyogYW5ndWxhci5TY29wZSAqLyBzY29wZSxcbiAgLyogTm9kZUxpc3QgKi8gbm9kZUxpc3QsXG4gIC8qIEVsZW1lbnQgKi8gcm9vdEVsZW1lbnQsXG4gIC8qIGZ1bmN0aW9uKEZ1bmN0aW9uKSAqLyBib3VuZFRyYW5zY2x1ZGVGblxuKSB7fVxuXG5mdW5jdGlvbiBkaXJlY3RpdmVMaW5raW5nRm4oXG4gIC8qIG5vZGVzZXRMaW5raW5nRm4gKi8gbm9kZXNldExpbmtpbmdGbixcbiAgLyogYW5ndWxhci5TY29wZSAqLyBzY29wZSxcbiAgLyogTm9kZSAqLyBub2RlLFxuICAvKiBFbGVtZW50ICovIHJvb3RFbGVtZW50LFxuICAvKiBmdW5jdGlvbihGdW5jdGlvbikgKi8gYm91bmRUcmFuc2NsdWRlRm5cbikge31cblxuZnVuY3Rpb24gdG9rZW5EaWZmZXJlbmNlKHN0cjEsIHN0cjIpIHtcbiAgdmFyIHZhbHVlcyA9ICcnLFxuICAgICAgdG9rZW5zMSA9IHN0cjEuc3BsaXQoL1xccysvKSxcbiAgICAgIHRva2VuczIgPSBzdHIyLnNwbGl0KC9cXHMrLyk7XG5cbiAgb3V0ZXI6XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zMS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0b2tlbiA9IHRva2VuczFbaV07XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0b2tlbnMyLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAodG9rZW4gPT09IHRva2VuczJbal0pIGNvbnRpbnVlIG91dGVyO1xuICAgIH1cbiAgICB2YWx1ZXMgKz0gKHZhbHVlcy5sZW5ndGggPiAwID8gJyAnIDogJycpICsgdG9rZW47XG4gIH1cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbWVudHMoanFOb2Rlcykge1xuICBqcU5vZGVzID0ganFMaXRlKGpxTm9kZXMpO1xuICB2YXIgaSA9IGpxTm9kZXMubGVuZ3RoO1xuXG4gIGlmIChpIDw9IDEpIHtcbiAgICByZXR1cm4ganFOb2RlcztcbiAgfVxuXG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgbm9kZSA9IGpxTm9kZXNbaV07XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UIHx8XG4gICAgICAgKG5vZGUubm9kZVR5cGUgPT09IE5PREVfVFlQRV9URVhUICYmIG5vZGUubm9kZVZhbHVlLnRyaW0oKSA9PT0gJycpKSB7XG4gICAgICAgICBzcGxpY2UuY2FsbChqcU5vZGVzLCBpLCAxKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGpxTm9kZXM7XG59XG5cbnZhciAkY29udHJvbGxlck1pbkVyciA9IG1pbkVycignJGNvbnRyb2xsZXInKTtcblxuXG52YXIgQ05UUkxfUkVHID0gL14oXFxTKykoXFxzK2FzXFxzKyhbXFx3JF0rKSk/JC87XG5mdW5jdGlvbiBpZGVudGlmaWVyRm9yQ29udHJvbGxlcihjb250cm9sbGVyLCBpZGVudCkge1xuICBpZiAoaWRlbnQgJiYgaXNTdHJpbmcoaWRlbnQpKSByZXR1cm4gaWRlbnQ7XG4gIGlmIChpc1N0cmluZyhjb250cm9sbGVyKSkge1xuICAgIHZhciBtYXRjaCA9IENOVFJMX1JFRy5leGVjKGNvbnRyb2xsZXIpO1xuICAgIGlmIChtYXRjaCkgcmV0dXJuIG1hdGNoWzNdO1xuICB9XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUge0BsaW5rIG5nLiRjb250cm9sbGVyICRjb250cm9sbGVyIHNlcnZpY2V9IGlzIHVzZWQgYnkgQW5ndWxhckpTIHRvIGNyZWF0ZSBuZXdcbiAqIGNvbnRyb2xsZXJzLlxuICpcbiAqIFRoaXMgcHJvdmlkZXIgYWxsb3dzIGNvbnRyb2xsZXIgcmVnaXN0cmF0aW9uIHZpYSB0aGVcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyIHJlZ2lzdGVyfSBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uICRDb250cm9sbGVyUHJvdmlkZXIoKSB7XG4gIHZhciBjb250cm9sbGVycyA9IHt9LFxuICAgICAgZ2xvYmFscyA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXIjaGFzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIENvbnRyb2xsZXIgbmFtZSB0byBjaGVjay5cbiAgICovXG4gIHRoaXMuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBjb250cm9sbGVycy5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBDb250cm9sbGVyIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgY29udHJvbGxlcnMgd2hlcmUgdGhlIGtleXMgYXJlXG4gICAqICAgIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbnN0cnVjdG9ycy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gY29uc3RydWN0b3IgQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmbiAob3B0aW9uYWxseSBkZWNvcmF0ZWQgd2l0aCBESVxuICAgKiAgICBhbm5vdGF0aW9ucyBpbiB0aGUgYXJyYXkgbm90YXRpb24pLlxuICAgKi9cbiAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWUsIGNvbnN0cnVjdG9yKSB7XG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ2NvbnRyb2xsZXInKTtcbiAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgIGV4dGVuZChjb250cm9sbGVycywgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRyb2xsZXJzW25hbWVdID0gY29uc3RydWN0b3I7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXIjYWxsb3dHbG9iYWxzXG4gICAqIEBkZXNjcmlwdGlvbiBJZiBjYWxsZWQsIGFsbG93cyBgJGNvbnRyb2xsZXJgIHRvIGZpbmQgY29udHJvbGxlciBjb25zdHJ1Y3RvcnMgb24gYHdpbmRvd2BcbiAgICpcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogc2luY2VWZXJzaW9uPVwidjEuMy4wXCJcbiAgICogcmVtb3ZlVmVyc2lvbj1cInYxLjcuMFwiXG4gICAqIFRoaXMgbWV0aG9kIG9mIGZpbmRpbmcgY29udHJvbGxlcnMgaGFzIGJlZW4gZGVwcmVjYXRlZC5cbiAgICovXG4gIHRoaXMuYWxsb3dHbG9iYWxzID0gZnVuY3Rpb24oKSB7XG4gICAgZ2xvYmFscyA9IHRydWU7XG4gIH07XG5cblxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckd2luZG93JywgZnVuY3Rpb24oJGluamVjdG9yLCAkd2luZG93KSB7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBuYW1lICRjb250cm9sbGVyXG4gICAgICogQHJlcXVpcmVzICRpbmplY3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IGNvbnN0cnVjdG9yIElmIGNhbGxlZCB3aXRoIGEgZnVuY3Rpb24gdGhlbiBpdCdzIGNvbnNpZGVyZWQgdG8gYmUgdGhlXG4gICAgICogICAgY29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gT3RoZXJ3aXNlIGl0J3MgY29uc2lkZXJlZCB0byBiZSBhIHN0cmluZyB3aGljaCBpcyB1c2VkXG4gICAgICogICAgdG8gcmV0cmlldmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgdXNpbmcgdGhlIGZvbGxvd2luZyBzdGVwczpcbiAgICAgKlxuICAgICAqICAgICogY2hlY2sgaWYgYSBjb250cm9sbGVyIHdpdGggZ2l2ZW4gbmFtZSBpcyByZWdpc3RlcmVkIHZpYSBgJGNvbnRyb2xsZXJQcm92aWRlcmBcbiAgICAgKiAgICAqIGNoZWNrIGlmIGV2YWx1YXRpbmcgdGhlIHN0cmluZyBvbiB0aGUgY3VycmVudCBzY29wZSByZXR1cm5zIGEgY29uc3RydWN0b3JcbiAgICAgKiAgICAqIGlmICRjb250cm9sbGVyUHJvdmlkZXIjYWxsb3dHbG9iYWxzLCBjaGVjayBgd2luZG93W2NvbnN0cnVjdG9yXWAgb24gdGhlIGdsb2JhbFxuICAgICAqICAgICAgYHdpbmRvd2Agb2JqZWN0IChkZXByZWNhdGVkLCBub3QgcmVjb21tZW5kZWQpXG4gICAgICpcbiAgICAgKiAgICBUaGUgc3RyaW5nIGNhbiB1c2UgdGhlIGBjb250cm9sbGVyIGFzIHByb3BlcnR5YCBzeW50YXgsIHdoZXJlIHRoZSBjb250cm9sbGVyIGluc3RhbmNlIGlzIHB1Ymxpc2hlZFxuICAgICAqICAgIGFzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgb24gdGhlIGBzY29wZWA7IHRoZSBgc2NvcGVgIG11c3QgYmUgaW5qZWN0ZWQgaW50byBgbG9jYWxzYCBwYXJhbSBmb3IgdGhpc1xuICAgICAqICAgIHRvIHdvcmsgY29ycmVjdGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxvY2FscyBJbmplY3Rpb24gbG9jYWxzIGZvciBDb250cm9sbGVyLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gSW5zdGFuY2Ugb2YgZ2l2ZW4gY29udHJvbGxlci5cbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIGAkY29udHJvbGxlcmAgc2VydmljZSBpcyByZXNwb25zaWJsZSBmb3IgaW5zdGFudGlhdGluZyBjb250cm9sbGVycy5cbiAgICAgKlxuICAgICAqIEl0J3MganVzdCBhIHNpbXBsZSBjYWxsIHRvIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LCBidXQgZXh0cmFjdGVkIGludG9cbiAgICAgKiBhIHNlcnZpY2UsIHNvIHRoYXQgb25lIGNhbiBvdmVycmlkZSB0aGlzIHNlcnZpY2Ugd2l0aCBbQkMgdmVyc2lvbl0oaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTY0OTc4OCkuXG4gICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uICRjb250cm9sbGVyKGV4cHJlc3Npb24sIGxvY2FscywgbGF0ZXIsIGlkZW50KSB7XG4gICAgICAvLyBQUklWQVRFIEFQSTpcbiAgICAgIC8vICAgcGFyYW0gYGxhdGVyYCAtLS0gaW5kaWNhdGVzIHRoYXQgdGhlIGNvbnRyb2xsZXIncyBjb25zdHJ1Y3RvciBpcyBpbnZva2VkIGF0IGEgbGF0ZXIgdGltZS5cbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgSWYgdHJ1ZSwgJGNvbnRyb2xsZXIgd2lsbCBhbGxvY2F0ZSB0aGUgb2JqZWN0IHdpdGggdGhlIGNvcnJlY3RcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcHJvdG90eXBlIGNoYWluLCBidXQgd2lsbCBub3QgaW52b2tlIHRoZSBjb250cm9sbGVyIHVudGlsIGEgcmV0dXJuZWRcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgaXMgaW52b2tlZC5cbiAgICAgIC8vICAgcGFyYW0gYGlkZW50YCAtLS0gQW4gb3B0aW9uYWwgbGFiZWwgd2hpY2ggb3ZlcnJpZGVzIHRoZSBsYWJlbCBwYXJzZWQgZnJvbSB0aGUgY29udHJvbGxlclxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uLCBpZiBhbnkuXG4gICAgICB2YXIgaW5zdGFuY2UsIG1hdGNoLCBjb25zdHJ1Y3RvciwgaWRlbnRpZmllcjtcbiAgICAgIGxhdGVyID0gbGF0ZXIgPT09IHRydWU7XG4gICAgICBpZiAoaWRlbnQgJiYgaXNTdHJpbmcoaWRlbnQpKSB7XG4gICAgICAgIGlkZW50aWZpZXIgPSBpZGVudDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3RyaW5nKGV4cHJlc3Npb24pKSB7XG4gICAgICAgIG1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaChDTlRSTF9SRUcpO1xuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgdGhyb3cgJGNvbnRyb2xsZXJNaW5FcnIoJ2N0cmxmbXQnLFxuICAgICAgICAgICAgJ0JhZGx5IGZvcm1lZCBjb250cm9sbGVyIHN0cmluZyBcXCd7MH1cXCcuICcgK1xuICAgICAgICAgICAgJ011c3QgbWF0Y2ggYF9fbmFtZV9fIGFzIF9faWRfX2Agb3IgYF9fbmFtZV9fYC4nLCBleHByZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdHJ1Y3RvciA9IG1hdGNoWzFdO1xuICAgICAgICBpZGVudGlmaWVyID0gaWRlbnRpZmllciB8fCBtYXRjaFszXTtcbiAgICAgICAgZXhwcmVzc2lvbiA9IGNvbnRyb2xsZXJzLmhhc093blByb3BlcnR5KGNvbnN0cnVjdG9yKVxuICAgICAgICAgICAgPyBjb250cm9sbGVyc1tjb25zdHJ1Y3Rvcl1cbiAgICAgICAgICAgIDogZ2V0dGVyKGxvY2Fscy4kc2NvcGUsIGNvbnN0cnVjdG9yLCB0cnVlKSB8fFxuICAgICAgICAgICAgICAgIChnbG9iYWxzID8gZ2V0dGVyKCR3aW5kb3csIGNvbnN0cnVjdG9yLCB0cnVlKSA6IHVuZGVmaW5lZCk7XG5cbiAgICAgICAgaWYgKCFleHByZXNzaW9uKSB7XG4gICAgICAgICAgdGhyb3cgJGNvbnRyb2xsZXJNaW5FcnIoJ2N0cmxyZWcnLFxuICAgICAgICAgICAgJ1RoZSBjb250cm9sbGVyIHdpdGggdGhlIG5hbWUgXFwnezB9XFwnIGlzIG5vdCByZWdpc3RlcmVkLicsIGNvbnN0cnVjdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzc2VydEFyZ0ZuKGV4cHJlc3Npb24sIGNvbnN0cnVjdG9yLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxhdGVyKSB7XG4gICAgICAgIC8vIEluc3RhbnRpYXRlIGNvbnRyb2xsZXIgbGF0ZXI6XG4gICAgICAgIC8vIFRoaXMgbWFjaGluZXJ5IGlzIHVzZWQgdG8gY3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBvYmplY3QgYmVmb3JlIGNhbGxpbmcgdGhlXG4gICAgICAgIC8vIGNvbnRyb2xsZXIncyBjb25zdHJ1Y3RvciBpdHNlbGYuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIHByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIGNvbnRyb2xsZXIgYmVmb3JlIHRoZSBjb25zdHJ1Y3RvciBpc1xuICAgICAgICAvLyBpbnZva2VkLiBQcmltYXJpbHksIHRoaXMgaXMgdXNlZCBmb3IgaXNvbGF0ZSBzY29wZSBiaW5kaW5ncyBpbiAkY29tcGlsZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhpcyBmZWF0dXJlIGlzIG5vdCBpbnRlbmRlZCBmb3IgdXNlIGJ5IGFwcGxpY2F0aW9ucywgYW5kIGlzIHRodXMgbm90IGRvY3VtZW50ZWRcbiAgICAgICAgLy8gcHVibGljbHkuXG4gICAgICAgIC8vIE9iamVjdCBjcmVhdGlvbjogaHR0cDovL2pzcGVyZi5jb20vY3JlYXRlLWNvbnN0cnVjdG9yLzJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXJQcm90b3R5cGUgPSAoaXNBcnJheShleHByZXNzaW9uKSA/XG4gICAgICAgICAgZXhwcmVzc2lvbltleHByZXNzaW9uLmxlbmd0aCAtIDFdIDogZXhwcmVzc2lvbikucHJvdG90eXBlO1xuICAgICAgICBpbnN0YW5jZSA9IE9iamVjdC5jcmVhdGUoY29udHJvbGxlclByb3RvdHlwZSB8fCBudWxsKTtcblxuICAgICAgICBpZiAoaWRlbnRpZmllcikge1xuICAgICAgICAgIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgY29uc3RydWN0b3IgfHwgZXhwcmVzc2lvbi5uYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJGNvbnRyb2xsZXJJbml0KCkge1xuICAgICAgICAgIHZhciByZXN1bHQgPSAkaW5qZWN0b3IuaW52b2tlKGV4cHJlc3Npb24sIGluc3RhbmNlLCBsb2NhbHMsIGNvbnN0cnVjdG9yKTtcbiAgICAgICAgICBpZiAocmVzdWx0ICE9PSBpbnN0YW5jZSAmJiAoaXNPYmplY3QocmVzdWx0KSB8fCBpc0Z1bmN0aW9uKHJlc3VsdCkpKSB7XG4gICAgICAgICAgICBpbnN0YW5jZSA9IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChpZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgIC8vIElmIHJlc3VsdCBjaGFuZ2VkLCByZS1hc3NpZ24gY29udHJvbGxlckFzIHZhbHVlIHRvIHNjb3BlLlxuICAgICAgICAgICAgICBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIGNvbnN0cnVjdG9yIHx8IGV4cHJlc3Npb24ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfSwge1xuICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZSxcbiAgICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpbnN0YW5jZSA9ICRpbmplY3Rvci5pbnN0YW50aWF0ZShleHByZXNzaW9uLCBsb2NhbHMsIGNvbnN0cnVjdG9yKTtcblxuICAgICAgaWYgKGlkZW50aWZpZXIpIHtcbiAgICAgICAgYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBjb25zdHJ1Y3RvciB8fCBleHByZXNzaW9uLm5hbWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgbmFtZSkge1xuICAgICAgaWYgKCEobG9jYWxzICYmIGlzT2JqZWN0KGxvY2Fscy4kc2NvcGUpKSkge1xuICAgICAgICB0aHJvdyBtaW5FcnIoJyRjb250cm9sbGVyJykoJ25vc2NwJyxcbiAgICAgICAgICAnQ2Fubm90IGV4cG9ydCBjb250cm9sbGVyIFxcJ3swfVxcJyBhcyBcXCd7MX1cXCchIE5vICRzY29wZSBvYmplY3QgcHJvdmlkZWQgdmlhIGBsb2NhbHNgLicsXG4gICAgICAgICAgbmFtZSwgaWRlbnRpZmllcik7XG4gICAgICB9XG5cbiAgICAgIGxvY2Fscy4kc2NvcGVbaWRlbnRpZmllcl0gPSBpbnN0YW5jZTtcbiAgICB9XG4gIH1dO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkZG9jdW1lbnRcbiAqIEByZXF1aXJlcyAkd2luZG93XG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSB7QGxpbmsgYW5ndWxhci5lbGVtZW50IGpRdWVyeSBvciBqcUxpdGV9IHdyYXBwZXIgZm9yIHRoZSBicm93c2VyJ3MgYHdpbmRvdy5kb2N1bWVudGAgb2JqZWN0LlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJkb2N1bWVudEV4YW1wbGVcIiBuYW1lPVwiZG9jdW1lbnRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPHA+JGRvY3VtZW50IHRpdGxlOiA8YiBuZy1iaW5kPVwidGl0bGVcIj48L2I+PC9wPlxuICAgICAgICAgPHA+d2luZG93LmRvY3VtZW50IHRpdGxlOiA8YiBuZy1iaW5kPVwid2luZG93VGl0bGVcIj48L2I+PC9wPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnZG9jdW1lbnRFeGFtcGxlJywgW10pXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkc2NvcGUsICRkb2N1bWVudCkge1xuICAgICAgICAgICAkc2NvcGUudGl0bGUgPSAkZG9jdW1lbnRbMF0udGl0bGU7XG4gICAgICAgICAgICRzY29wZS53aW5kb3dUaXRsZSA9IGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cuZG9jdW1lbnQpWzBdLnRpdGxlO1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uICREb2N1bWVudFByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICByZXR1cm4ganFMaXRlKHdpbmRvdy5kb2N1bWVudCk7XG4gIH1dO1xufVxuXG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEB0aGlzXG4gKiBMaXN0ZW5zIGZvciBkb2N1bWVudCB2aXNpYmlsaXR5IGNoYW5nZSBhbmQgbWFrZXMgdGhlIGN1cnJlbnQgc3RhdHVzIGFjY2Vzc2libGUuXG4gKi9cbmZ1bmN0aW9uICQkSXNEb2N1bWVudEhpZGRlblByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyRkb2N1bWVudCcsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJGRvY3VtZW50LCAkcm9vdFNjb3BlKSB7XG4gICAgdmFyIGRvYyA9ICRkb2N1bWVudFswXTtcbiAgICB2YXIgaGlkZGVuID0gZG9jICYmIGRvYy5oaWRkZW47XG5cbiAgICAkZG9jdW1lbnQub24oJ3Zpc2liaWxpdHljaGFuZ2UnLCBjaGFuZ2VMaXN0ZW5lcik7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICRkb2N1bWVudC5vZmYoJ3Zpc2liaWxpdHljaGFuZ2UnLCBjaGFuZ2VMaXN0ZW5lcik7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VMaXN0ZW5lcigpIHtcbiAgICAgIGhpZGRlbiA9IGRvYy5oaWRkZW47XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGhpZGRlbjtcbiAgICB9O1xuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJcbiAqIEByZXF1aXJlcyBuZy4kbG9nXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQW55IHVuY2F1Z2h0IGV4Y2VwdGlvbiBpbiBBbmd1bGFySlMgZXhwcmVzc2lvbnMgaXMgZGVsZWdhdGVkIHRvIHRoaXMgc2VydmljZS5cbiAqIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHNpbXBseSBkZWxlZ2F0ZXMgdG8gYCRsb2cuZXJyb3JgIHdoaWNoIGxvZ3MgaXQgaW50b1xuICogdGhlIGJyb3dzZXIgY29uc29sZS5cbiAqXG4gKiBJbiB1bml0IHRlc3RzLCBpZiBgYW5ndWxhci1tb2Nrcy5qc2AgaXMgbG9hZGVkLCB0aGlzIHNlcnZpY2UgaXMgb3ZlcnJpZGRlbiBieVxuICoge0BsaW5rIG5nTW9jay4kZXhjZXB0aW9uSGFuZGxlciBtb2NrICRleGNlcHRpb25IYW5kbGVyfSB3aGljaCBhaWRzIGluIHRlc3RpbmcuXG4gKlxuICogIyMgRXhhbXBsZTpcbiAqXG4gKiBUaGUgZXhhbXBsZSBiZWxvdyB3aWxsIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCBgJGV4Y2VwdGlvbkhhbmRsZXJgIGluIG9yZGVyIHRvIChhKSBsb2cgdW5jYXVnaHRcbiAqIGVycm9ycyB0byB0aGUgYmFja2VuZCBmb3IgbGF0ZXIgaW5zcGVjdGlvbiBieSB0aGUgZGV2ZWxvcGVycyBhbmQgKGIpIHRvIHVzZSBgJGxvZy53YXJuKClgIGluc3RlYWRcbiAqIG9mIGAkbG9nLmVycm9yKClgLlxuICpcbiAqIGBgYGpzXG4gKiAgIGFuZ3VsYXIuXG4gKiAgICAgbW9kdWxlKCdleGNlcHRpb25PdmVyd3JpdGUnLCBbXSkuXG4gKiAgICAgZmFjdG9yeSgnJGV4Y2VwdGlvbkhhbmRsZXInLCBbJyRsb2cnLCAnbG9nRXJyb3JzVG9CYWNrZW5kJywgZnVuY3Rpb24oJGxvZywgbG9nRXJyb3JzVG9CYWNrZW5kKSB7XG4gKiAgICAgICByZXR1cm4gZnVuY3Rpb24gbXlFeGNlcHRpb25IYW5kbGVyKGV4Y2VwdGlvbiwgY2F1c2UpIHtcbiAqICAgICAgICAgbG9nRXJyb3JzVG9CYWNrZW5kKGV4Y2VwdGlvbiwgY2F1c2UpO1xuICogICAgICAgICAkbG9nLndhcm4oZXhjZXB0aW9uLCBjYXVzZSk7XG4gKiAgICAgICB9O1xuICogICAgIH1dKTtcbiAqIGBgYFxuICpcbiAqIDxociAvPlxuICogTm90ZSwgdGhhdCBjb2RlIGV4ZWN1dGVkIGluIGV2ZW50LWxpc3RlbmVycyAoZXZlbiB0aG9zZSByZWdpc3RlcmVkIHVzaW5nIGpxTGl0ZSdzIGBvbmAvYGJpbmRgXG4gKiBtZXRob2RzKSBkb2VzIG5vdCBkZWxlZ2F0ZSBleGNlcHRpb25zIHRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9XG4gKiAodW5sZXNzIGV4ZWN1dGVkIGR1cmluZyBhIGRpZ2VzdCkuXG4gKlxuICogSWYgeW91IHdpc2gsIHlvdSBjYW4gbWFudWFsbHkgZGVsZWdhdGUgZXhjZXB0aW9ucywgZS5nLlxuICogYHRyeSB7IC4uLiB9IGNhdGNoKGUpIHsgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7IH1gXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXhjZXB0aW9uIEV4Y2VwdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIGVycm9yLlxuICogQHBhcmFtIHtzdHJpbmc9fSBjYXVzZSBPcHRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY29udGV4dCBpbiB3aGljaFxuICogICAgICAgdGhlIGVycm9yIHdhcyB0aHJvd24uXG4gKlxuICovXG5mdW5jdGlvbiAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyRsb2cnLCBmdW5jdGlvbigkbG9nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGV4Y2VwdGlvbiwgY2F1c2UpIHtcbiAgICAgICRsb2cuZXJyb3IuYXBwbHkoJGxvZywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XTtcbn1cblxudmFyICQkRm9yY2VSZWZsb3dQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckZG9jdW1lbnQnLCBmdW5jdGlvbigkZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZG9tTm9kZSkge1xuICAgICAgLy90aGUgbGluZSBiZWxvdyB3aWxsIGZvcmNlIHRoZSBicm93c2VyIHRvIHBlcmZvcm0gYSByZXBhaW50IHNvXG4gICAgICAvL3RoYXQgYWxsIHRoZSBhbmltYXRlZCBlbGVtZW50cyB3aXRoaW4gdGhlIGFuaW1hdGlvbiBmcmFtZSB3aWxsXG4gICAgICAvL2JlIHByb3Blcmx5IHVwZGF0ZWQgYW5kIGRyYXduIG9uIHNjcmVlbi4gVGhpcyBpcyByZXF1aXJlZCB0b1xuICAgICAgLy9lbnN1cmUgdGhhdCB0aGUgcHJlcGFyYXRpb24gYW5pbWF0aW9uIGlzIHByb3Blcmx5IGZsdXNoZWQgc28gdGhhdFxuICAgICAgLy90aGUgYWN0aXZlIHN0YXRlIHBpY2tzIHVwIGZyb20gdGhlcmUuIERPIE5PVCBSRU1PVkUgVEhJUyBMSU5FLlxuICAgICAgLy9ETyBOT1QgT1BUSU1JWkUgVEhJUyBMSU5FLiBUSEUgTUlOSUZJRVIgV0lMTCBSRU1PVkUgSVQgT1RIRVJXSVNFIFdISUNIXG4gICAgICAvL1dJTEwgUkVTVUxUIElOIEFOIFVOUFJFRElDVEFCTEUgQlVHIFRIQVQgSVMgVkVSWSBIQVJEIFRPIFRSQUNLIERPV04gQU5EXG4gICAgICAvL1dJTEwgVEFLRSBZRUFSUyBBV0FZIEZST00gWU9VUiBMSUZFLlxuICAgICAgaWYgKGRvbU5vZGUpIHtcbiAgICAgICAgaWYgKCFkb21Ob2RlLm5vZGVUeXBlICYmIGRvbU5vZGUgaW5zdGFuY2VvZiBqcUxpdGUpIHtcbiAgICAgICAgICBkb21Ob2RlID0gZG9tTm9kZVswXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9tTm9kZSA9ICRkb2N1bWVudFswXS5ib2R5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvbU5vZGUub2Zmc2V0V2lkdGggKyAxO1xuICAgIH07XG4gIH1dO1xufTtcblxudmFyIEFQUExJQ0FUSU9OX0pTT04gPSAnYXBwbGljYXRpb24vanNvbic7XG52YXIgQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04gPSB7J0NvbnRlbnQtVHlwZSc6IEFQUExJQ0FUSU9OX0pTT04gKyAnO2NoYXJzZXQ9dXRmLTgnfTtcbnZhciBKU09OX1NUQVJUID0gL15cXFt8Xlxceyg/IVxceykvO1xudmFyIEpTT05fRU5EUyA9IHtcbiAgJ1snOiAvXSQvLFxuICAneyc6IC99JC9cbn07XG52YXIgSlNPTl9QUk9URUNUSU9OX1BSRUZJWCA9IC9eXFwpXVxcfScsP1xcbi87XG52YXIgJGh0dHBNaW5FcnIgPSBtaW5FcnIoJyRodHRwJyk7XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZVZhbHVlKHYpIHtcbiAgaWYgKGlzT2JqZWN0KHYpKSB7XG4gICAgcmV0dXJuIGlzRGF0ZSh2KSA/IHYudG9JU09TdHJpbmcoKSA6IHRvSnNvbih2KTtcbiAgfVxuICByZXR1cm4gdjtcbn1cblxuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICRIdHRwUGFyYW1TZXJpYWxpemVyUHJvdmlkZXIoKSB7XG4gIC8qKlxuICAgKiBAbmdkb2Mgc2VydmljZVxuICAgKiBAbmFtZSAkaHR0cFBhcmFtU2VyaWFsaXplclxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmYXVsdCB7QGxpbmsgJGh0dHAgYCRodHRwYH0gcGFyYW1zIHNlcmlhbGl6ZXIgdGhhdCBjb252ZXJ0cyBvYmplY3RzIHRvIHN0cmluZ3NcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBmb2xsb3dpbmcgcnVsZXM6XG4gICAqXG4gICAqICogYHsnZm9vJzogJ2Jhcid9YCByZXN1bHRzIGluIGBmb289YmFyYFxuICAgKiAqIGB7J2Zvbyc6IERhdGUubm93KCl9YCByZXN1bHRzIGluIGBmb289MjAxNS0wNC0wMVQwOSUzQTUwJTNBNDkuMjYyWmAgKGB0b0lTT1N0cmluZygpYCBhbmQgZW5jb2RlZCByZXByZXNlbnRhdGlvbiBvZiBhIERhdGUgb2JqZWN0KVxuICAgKiAqIGB7J2Zvbyc6IFsnYmFyJywgJ2JheiddfWAgcmVzdWx0cyBpbiBgZm9vPWJhciZmb289YmF6YCAocmVwZWF0ZWQga2V5IGZvciBlYWNoIGFycmF5IGVsZW1lbnQpXG4gICAqICogYHsnZm9vJzogeydiYXInOidiYXonfX1gIHJlc3VsdHMgaW4gYGZvbz0lN0IlMjJiYXIlMjIlM0ElMjJiYXolMjIlN0RgIChzdHJpbmdpZmllZCBhbmQgZW5jb2RlZCByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QpXG4gICAqXG4gICAqIE5vdGUgdGhhdCBzZXJpYWxpemVyIHdpbGwgc29ydCB0aGUgcmVxdWVzdCBwYXJhbWV0ZXJzIGFscGhhYmV0aWNhbGx5LlxuICAgKiAqL1xuXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBuZ1BhcmFtU2VyaWFsaXplcihwYXJhbXMpIHtcbiAgICAgIGlmICghcGFyYW1zKSByZXR1cm4gJyc7XG4gICAgICB2YXIgcGFydHMgPSBbXTtcbiAgICAgIGZvckVhY2hTb3J0ZWQocGFyYW1zLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZCh2YWx1ZSkgfHwgaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybjtcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24odikge1xuICAgICAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXkpICArICc9JyArIGVuY29kZVVyaVF1ZXJ5KHNlcmlhbGl6ZVZhbHVlKHYpKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXkpICsgJz0nICsgZW5jb2RlVXJpUXVlcnkoc2VyaWFsaXplVmFsdWUodmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcGFydHMuam9pbignJicpO1xuICAgIH07XG4gIH07XG59XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJEh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VQcm92aWRlcigpIHtcbiAgLyoqXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBbHRlcm5hdGl2ZSB7QGxpbmsgJGh0dHAgYCRodHRwYH0gcGFyYW1zIHNlcmlhbGl6ZXIgdGhhdCBmb2xsb3dzXG4gICAqIGpRdWVyeSdzIFtgcGFyYW0oKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qcXVlcnkucGFyYW0vKSBtZXRob2QgbG9naWMuXG4gICAqIFRoZSBzZXJpYWxpemVyIHdpbGwgYWxzbyBzb3J0IHRoZSBwYXJhbXMgYWxwaGFiZXRpY2FsbHkuXG4gICAqXG4gICAqIFRvIHVzZSBpdCBmb3Igc2VyaWFsaXppbmcgYCRodHRwYCByZXF1ZXN0IHBhcmFtZXRlcnMsIHNldCBpdCBhcyB0aGUgYHBhcmFtU2VyaWFsaXplcmAgcHJvcGVydHk6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqICRodHRwKHtcbiAgICogICB1cmw6IG15VXJsLFxuICAgKiAgIG1ldGhvZDogJ0dFVCcsXG4gICAqICAgcGFyYW1zOiBteVBhcmFtcyxcbiAgICogICBwYXJhbVNlcmlhbGl6ZXI6ICckaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZSdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHNldCBpdCBhcyB0aGUgZGVmYXVsdCBgcGFyYW1TZXJpYWxpemVyYCBpbiB0aGVcbiAgICoge0BsaW5rICRodHRwUHJvdmlkZXIjZGVmYXVsdHMgYCRodHRwUHJvdmlkZXJgfS5cbiAgICpcbiAgICogQWRkaXRpb25hbGx5LCB5b3UgY2FuIGluamVjdCB0aGUgc2VyaWFsaXplciBhbmQgdXNlIGl0IGV4cGxpY2l0bHksIGZvciBleGFtcGxlIHRvIHNlcmlhbGl6ZVxuICAgKiBmb3JtIGRhdGEgZm9yIHN1Ym1pc3Npb246XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC5jb250cm9sbGVyKGZ1bmN0aW9uKCRodHRwLCAkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZSkge1xuICAgKiAgIC8vLi4uXG4gICAqXG4gICAqICAgJGh0dHAoe1xuICAgKiAgICAgdXJsOiBteVVybCxcbiAgICogICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgKiAgICAgZGF0YTogJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2UobXlEYXRhKSxcbiAgICogICAgIGhlYWRlcnM6IHtcbiAgICogICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogKi9cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGpRdWVyeUxpa2VQYXJhbVNlcmlhbGl6ZXIocGFyYW1zKSB7XG4gICAgICBpZiAoIXBhcmFtcykgcmV0dXJuICcnO1xuICAgICAgdmFyIHBhcnRzID0gW107XG4gICAgICBzZXJpYWxpemUocGFyYW1zLCAnJywgdHJ1ZSk7XG4gICAgICByZXR1cm4gcGFydHMuam9pbignJicpO1xuXG4gICAgICBmdW5jdGlvbiBzZXJpYWxpemUodG9TZXJpYWxpemUsIHByZWZpeCwgdG9wTGV2ZWwpIHtcbiAgICAgICAgaWYgKHRvU2VyaWFsaXplID09PSBudWxsIHx8IGlzVW5kZWZpbmVkKHRvU2VyaWFsaXplKSkgcmV0dXJuO1xuICAgICAgICBpZiAoaXNBcnJheSh0b1NlcmlhbGl6ZSkpIHtcbiAgICAgICAgICBmb3JFYWNoKHRvU2VyaWFsaXplLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHNlcmlhbGl6ZSh2YWx1ZSwgcHJlZml4ICsgJ1snICsgKGlzT2JqZWN0KHZhbHVlKSA/IGluZGV4IDogJycpICsgJ10nKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1NlcmlhbGl6ZSkgJiYgIWlzRGF0ZSh0b1NlcmlhbGl6ZSkpIHtcbiAgICAgICAgICBmb3JFYWNoU29ydGVkKHRvU2VyaWFsaXplLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBzZXJpYWxpemUodmFsdWUsIHByZWZpeCArXG4gICAgICAgICAgICAgICAgKHRvcExldmVsID8gJycgOiAnWycpICtcbiAgICAgICAgICAgICAgICBrZXkgK1xuICAgICAgICAgICAgICAgICh0b3BMZXZlbCA/ICcnIDogJ10nKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShwcmVmaXgpICsgJz0nICsgZW5jb2RlVXJpUXVlcnkoc2VyaWFsaXplVmFsdWUodG9TZXJpYWxpemUpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9O1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtKGRhdGEsIGhlYWRlcnMpIHtcbiAgaWYgKGlzU3RyaW5nKGRhdGEpKSB7XG4gICAgLy8gU3RyaXAganNvbiB2dWxuZXJhYmlsaXR5IHByb3RlY3Rpb24gcHJlZml4IGFuZCB0cmltIHdoaXRlc3BhY2VcbiAgICB2YXIgdGVtcERhdGEgPSBkYXRhLnJlcGxhY2UoSlNPTl9QUk9URUNUSU9OX1BSRUZJWCwgJycpLnRyaW0oKTtcblxuICAgIGlmICh0ZW1wRGF0YSkge1xuICAgICAgdmFyIGNvbnRlbnRUeXBlID0gaGVhZGVycygnQ29udGVudC1UeXBlJyk7XG4gICAgICB2YXIgaGFzSnNvbkNvbnRlbnRUeXBlID0gY29udGVudFR5cGUgJiYgKGNvbnRlbnRUeXBlLmluZGV4T2YoQVBQTElDQVRJT05fSlNPTikgPT09IDApO1xuXG4gICAgICBpZiAoaGFzSnNvbkNvbnRlbnRUeXBlIHx8IGlzSnNvbkxpa2UodGVtcERhdGEpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZGF0YSA9IGZyb21Kc29uKHRlbXBEYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmICghaGFzSnNvbkNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgJGh0dHBNaW5FcnIoJ2JhZGRhdGEnLCAnRGF0YSBtdXN0IGJlIGEgdmFsaWQgSlNPTiBvYmplY3QuIFJlY2VpdmVkOiBcInswfVwiLiAnICtcbiAgICAgICAgICAnUGFyc2UgZXJyb3I6IFwiezF9XCInLCBkYXRhLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBpc0pzb25MaWtlKHN0cikge1xuICAgIHZhciBqc29uU3RhcnQgPSBzdHIubWF0Y2goSlNPTl9TVEFSVCk7XG4gICAgcmV0dXJuIGpzb25TdGFydCAmJiBKU09OX0VORFNbanNvblN0YXJ0WzBdXS50ZXN0KHN0cik7XG59XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGtleSB2YWx1ZSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaGVhZGVycyBSYXcgaGVhZGVycyBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge09iamVjdH0gUGFyc2VkIGhlYWRlcnMgYXMga2V5IHZhbHVlIG9iamVjdFxuICovXG5mdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuICB2YXIgcGFyc2VkID0gY3JlYXRlTWFwKCksIGk7XG5cbiAgZnVuY3Rpb24gZmlsbEluUGFyc2VkKGtleSwgdmFsKSB7XG4gICAgaWYgKGtleSkge1xuICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNTdHJpbmcoaGVhZGVycykpIHtcbiAgICBmb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAgICBmaWxsSW5QYXJzZWQobG93ZXJjYXNlKHRyaW0obGluZS5zdWJzdHIoMCwgaSkpKSwgdHJpbShsaW5lLnN1YnN0cihpICsgMSkpKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChpc09iamVjdChoZWFkZXJzKSkge1xuICAgIGZvckVhY2goaGVhZGVycywgZnVuY3Rpb24oaGVhZGVyVmFsLCBoZWFkZXJLZXkpIHtcbiAgICAgIGZpbGxJblBhcnNlZChsb3dlcmNhc2UoaGVhZGVyS2V5KSwgdHJpbShoZWFkZXJWYWwpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBwYXJzZWQ7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gcGFyc2VkIGhlYWRlcnMuXG4gKlxuICogSGVhZGVycyBhcmUgbGF6eSBwYXJzZWQgd2hlbiBmaXJzdCByZXF1ZXN0ZWQuXG4gKiBAc2VlIHBhcnNlSGVhZGVyc1xuICpcbiAqIEBwYXJhbSB7KHN0cmluZ3xPYmplY3QpfSBoZWFkZXJzIEhlYWRlcnMgdG8gcHJvdmlkZSBhY2Nlc3MgdG8uXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc3RyaW5nPSl9IFJldHVybnMgYSBnZXR0ZXIgZnVuY3Rpb24gd2hpY2ggaWYgY2FsbGVkIHdpdGg6XG4gKlxuICogICAtIGlmIGNhbGxlZCB3aXRoIGFuIGFyZ3VtZW50IHJldHVybnMgYSBzaW5nbGUgaGVhZGVyIHZhbHVlIG9yIG51bGxcbiAqICAgLSBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgaGVhZGVycy5cbiAqL1xuZnVuY3Rpb24gaGVhZGVyc0dldHRlcihoZWFkZXJzKSB7XG4gIHZhciBoZWFkZXJzT2JqO1xuXG4gIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgaWYgKCFoZWFkZXJzT2JqKSBoZWFkZXJzT2JqID0gIHBhcnNlSGVhZGVycyhoZWFkZXJzKTtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICB2YXIgdmFsdWUgPSBoZWFkZXJzT2JqW2xvd2VyY2FzZShuYW1lKV07XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhlYWRlcnNPYmo7XG4gIH07XG59XG5cblxuLyoqXG4gKiBDaGFpbiBhbGwgZ2l2ZW4gZnVuY3Rpb25zXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGZvciBib3RoIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHRyYW5zZm9ybWluZ1xuICpcbiAqIEBwYXJhbSB7Kn0gZGF0YSBEYXRhIHRvIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nPSl9IGhlYWRlcnMgSFRUUCBoZWFkZXJzIGdldHRlciBmbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGF0dXMgSFRUUCBzdGF0dXMgY29kZSBvZiB0aGUgcmVzcG9uc2UuXG4gKiBAcGFyYW0geyhGdW5jdGlvbnxBcnJheS48RnVuY3Rpb24+KX0gZm5zIEZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIGZ1bmN0aW9ucy5cbiAqIEByZXR1cm5zIHsqfSBUcmFuc2Zvcm1lZCBkYXRhLlxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGRhdGEsIGhlYWRlcnMsIHN0YXR1cywgZm5zKSB7XG4gIGlmIChpc0Z1bmN0aW9uKGZucykpIHtcbiAgICByZXR1cm4gZm5zKGRhdGEsIGhlYWRlcnMsIHN0YXR1cyk7XG4gIH1cblxuICBmb3JFYWNoKGZucywgZnVuY3Rpb24oZm4pIHtcbiAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycywgc3RhdHVzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cblxuZnVuY3Rpb24gaXNTdWNjZXNzKHN0YXR1cykge1xuICByZXR1cm4gMjAwIDw9IHN0YXR1cyAmJiBzdGF0dXMgPCAzMDA7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRodHRwUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgYCRodHRwUHJvdmlkZXJgIHRvIGNoYW5nZSB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUge0BsaW5rIG5nLiRodHRwICRodHRwfSBzZXJ2aWNlLlxuICogKi9cbmZ1bmN0aW9uICRIdHRwUHJvdmlkZXIoKSB7XG4gIC8qKlxuICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciNkZWZhdWx0c1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogT2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMgZm9yIGFsbCB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IHJlcXVlc3RzLlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLmNhY2hlYCoqIC0ge2Jvb2xlYW58T2JqZWN0fSAtIEEgYm9vbGVhbiB2YWx1ZSBvciBvYmplY3QgY3JlYXRlZCB3aXRoXG4gICAqIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5IGAkY2FjaGVGYWN0b3J5YH0gdG8gZW5hYmxlIG9yIGRpc2FibGUgY2FjaGluZyBvZiBIVFRQIHJlc3BvbnNlc1xuICAgKiBieSBkZWZhdWx0LiBTZWUge0BsaW5rICRodHRwI2NhY2hpbmcgJGh0dHAgQ2FjaGluZ30gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMuaGVhZGVyc2AqKiAtIHtPYmplY3R9IC0gRGVmYXVsdCBoZWFkZXJzIGZvciBhbGwgJGh0dHAgcmVxdWVzdHMuXG4gICAqIFJlZmVyIHRvIHtAbGluayBuZy4kaHR0cCNzZXR0aW5nLWh0dHAtaGVhZGVycyAkaHR0cH0gZm9yIGRvY3VtZW50YXRpb24gb25cbiAgICogc2V0dGluZyBkZWZhdWx0IGhlYWRlcnMuXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMuY29tbW9uYCoqXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMucG9zdGAqKlxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnB1dGAqKlxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnBhdGNoYCoqXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMuanNvbnBDYWxsYmFja1BhcmFtYCoqIC0gYHtzdHJpbmd9YCAtIHRoZSBuYW1lIG9mIHRoZSBxdWVyeSBwYXJhbWV0ZXIgdGhhdCBwYXNzZXMgdGhlIG5hbWUgb2YgdGhlXG4gICAqIGNhbGxiYWNrIGluIGEgSlNPTlAgcmVxdWVzdC4gVGhlIHZhbHVlIG9mIHRoaXMgcGFyYW1ldGVyIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgZXhwcmVzc2lvbiBnZW5lcmF0ZWQgYnkgdGhlXG4gICAqIHtAbGluayAkanNvbnBDYWxsYmFja3N9IHNlcnZpY2UuIERlZmF1bHRzIHRvIGAnY2FsbGJhY2snYC5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy5wYXJhbVNlcmlhbGl6ZXJgKiogLSBge3N0cmluZ3xmdW5jdGlvbihPYmplY3Q8c3RyaW5nLHN0cmluZz4pOnN0cmluZ31gIC0gQSBmdW5jdGlvblxuICAgKiAgdXNlZCB0byB0aGUgcHJlcGFyZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgcmVxdWVzdCBwYXJhbWV0ZXJzIChzcGVjaWZpZWQgYXMgYW4gb2JqZWN0KS5cbiAgICogIElmIHNwZWNpZmllZCBhcyBzdHJpbmcsIGl0IGlzIGludGVycHJldGVkIGFzIGEgZnVuY3Rpb24gcmVnaXN0ZXJlZCB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cbiAgICogIERlZmF1bHRzIHRvIHtAbGluayBuZy4kaHR0cFBhcmFtU2VyaWFsaXplciAkaHR0cFBhcmFtU2VyaWFsaXplcn0uXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGAqKiAtXG4gICAqIGB7QXJyYXk8ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcik+fGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpfWAgLVxuICAgKiBBbiBhcnJheSBvZiBmdW5jdGlvbnMgKG9yIGEgc2luZ2xlIGZ1bmN0aW9uKSB3aGljaCBhcmUgYXBwbGllZCB0byB0aGUgcmVxdWVzdCBkYXRhLlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGlzIGFuIGFycmF5IHdpdGggb25lIHJlcXVlc3QgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb246XG4gICAqXG4gICAqICAgLSBJZiB0aGUgYGRhdGFgIHByb3BlcnR5IG9mIHRoZSByZXF1ZXN0IGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5zIGFuIG9iamVjdCwgc2VyaWFsaXplIGl0XG4gICAqICAgICBpbnRvIEpTT04gZm9ybWF0LlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCoqIC1cbiAgICogYHtBcnJheTxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpPnxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpfWAgLVxuICAgKiBBbiBhcnJheSBvZiBmdW5jdGlvbnMgKG9yIGEgc2luZ2xlIGZ1bmN0aW9uKSB3aGljaCBhcmUgYXBwbGllZCB0byB0aGUgcmVzcG9uc2UgZGF0YS4gQnkgZGVmYXVsdCxcbiAgICogdGhpcyBpcyBhbiBhcnJheSB3aGljaCBhcHBsaWVzIG9uZSByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiB0aGF0IGRvZXMgdHdvIHRoaW5nczpcbiAgICpcbiAgICogIC0gSWYgWFNSRiBwcmVmaXggaXMgZGV0ZWN0ZWQsIHN0cmlwIGl0XG4gICAqICAgIChzZWUge0BsaW5rIG5nLiRodHRwI3NlY3VyaXR5LWNvbnNpZGVyYXRpb25zIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zIGluIHRoZSAkaHR0cCBkb2NzfSkuXG4gICAqICAtIElmIHRoZSBgQ29udGVudC1UeXBlYCBpcyBgYXBwbGljYXRpb24vanNvbmAgb3IgdGhlIHJlc3BvbnNlIGxvb2tzIGxpa2UgSlNPTixcbiAgICogICAgZGVzZXJpYWxpemUgaXQgdXNpbmcgYSBKU09OIHBhcnNlci5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy54c3JmQ29va2llTmFtZWAqKiAtIHtzdHJpbmd9IC0gTmFtZSBvZiBjb29raWUgY29udGFpbmluZyB0aGUgWFNSRiB0b2tlbi5cbiAgICogRGVmYXVsdHMgdmFsdWUgaXMgYCdYU1JGLVRPS0VOJ2AuXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMueHNyZkhlYWRlck5hbWVgKiogLSB7c3RyaW5nfSAtIE5hbWUgb2YgSFRUUCBoZWFkZXIgdG8gcG9wdWxhdGUgd2l0aCB0aGVcbiAgICogWFNSRiB0b2tlbi4gRGVmYXVsdHMgdmFsdWUgaXMgYCdYLVhTUkYtVE9LRU4nYC5cbiAgICpcbiAgICoqL1xuICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xuICAgIC8vIHRyYW5zZm9ybSBpbmNvbWluZyByZXNwb25zZSBkYXRhXG4gICAgdHJhbnNmb3JtUmVzcG9uc2U6IFtkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtXSxcblxuICAgIC8vIHRyYW5zZm9ybSBvdXRnb2luZyByZXF1ZXN0IGRhdGFcbiAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24oZCkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0KGQpICYmICFpc0ZpbGUoZCkgJiYgIWlzQmxvYihkKSAmJiAhaXNGb3JtRGF0YShkKSA/IHRvSnNvbihkKSA6IGQ7XG4gICAgfV0sXG5cbiAgICAvLyBkZWZhdWx0IGhlYWRlcnNcbiAgICBoZWFkZXJzOiB7XG4gICAgICBjb21tb246IHtcbiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG4gICAgICB9LFxuICAgICAgcG9zdDogICBzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiksXG4gICAgICBwdXQ6ICAgIHNoYWxsb3dDb3B5KENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OKSxcbiAgICAgIHBhdGNoOiAgc2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pXG4gICAgfSxcblxuICAgIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gICAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gICAgcGFyYW1TZXJpYWxpemVyOiAnJGh0dHBQYXJhbVNlcmlhbGl6ZXInLFxuXG4gICAganNvbnBDYWxsYmFja1BhcmFtOiAnY2FsbGJhY2snXG4gIH07XG5cbiAgdmFyIHVzZUFwcGx5QXN5bmMgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciN1c2VBcHBseUFzeW5jXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBDb25maWd1cmUgJGh0dHAgc2VydmljZSB0byBjb21iaW5lIHByb2Nlc3Npbmcgb2YgbXVsdGlwbGUgaHR0cCByZXNwb25zZXMgcmVjZWl2ZWQgYXQgYXJvdW5kXG4gICAqIHRoZSBzYW1lIHRpbWUgdmlhIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseUFzeW5jICRyb290U2NvcGUuJGFwcGx5QXN5bmN9LiBUaGlzIGNhbiByZXN1bHQgaW5cbiAgICogc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnQgZm9yIGJpZ2dlciBhcHBsaWNhdGlvbnMgdGhhdCBtYWtlIG1hbnkgSFRUUCByZXF1ZXN0c1xuICAgKiBjb25jdXJyZW50bHkgKGNvbW1vbiBkdXJpbmcgYXBwbGljYXRpb24gYm9vdHN0cmFwKS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gZmFsc2UuIElmIG5vIHZhbHVlIGlzIHNwZWNpZmllZCwgcmV0dXJucyB0aGUgY3VycmVudCBjb25maWd1cmVkIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiB0cnVlLCB3aGVuIHJlcXVlc3RzIGFyZSBsb2FkZWQsIHRoZXkgd2lsbCBzY2hlZHVsZSBhIGRlZmVycmVkXG4gICAqICAgIFwiYXBwbHlcIiBvbiB0aGUgbmV4dCB0aWNrLCBnaXZpbmcgdGltZSBmb3Igc3Vic2VxdWVudCByZXF1ZXN0cyBpbiBhIHJvdWdobHkgfjEwbXMgd2luZG93XG4gICAqICAgIHRvIGxvYWQgYW5kIHNoYXJlIHRoZSBzYW1lIGRpZ2VzdCBjeWNsZS5cbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW58T2JqZWN0fSBJZiBhIHZhbHVlIGlzIHNwZWNpZmllZCwgcmV0dXJucyB0aGUgJGh0dHBQcm92aWRlciBmb3IgY2hhaW5pbmcuXG4gICAqICAgIG90aGVyd2lzZSwgcmV0dXJucyB0aGUgY3VycmVudCBjb25maWd1cmVkIHZhbHVlLlxuICAgKiovXG4gIHRoaXMudXNlQXBwbHlBc3luYyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHVzZUFwcGx5QXN5bmMgPSAhIXZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiB1c2VBcHBseUFzeW5jO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciNpbnRlcmNlcHRvcnNcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEFycmF5IGNvbnRhaW5pbmcgc2VydmljZSBmYWN0b3JpZXMgZm9yIGFsbCBzeW5jaHJvbm91cyBvciBhc3luY2hyb25vdXMge0BsaW5rIG5nLiRodHRwICRodHRwfVxuICAgKiBwcmUtcHJvY2Vzc2luZyBvZiByZXF1ZXN0IG9yIHBvc3Rwcm9jZXNzaW5nIG9mIHJlc3BvbnNlcy5cbiAgICpcbiAgICogVGhlc2Ugc2VydmljZSBmYWN0b3JpZXMgYXJlIG9yZGVyZWQgYnkgcmVxdWVzdCwgaS5lLiB0aGV5IGFyZSBhcHBsaWVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuICAgKiBhcnJheSwgb24gcmVxdWVzdCwgYnV0IHJldmVyc2Ugb3JkZXIsIG9uIHJlc3BvbnNlLlxuICAgKlxuICAgKiB7QGxpbmsgbmcuJGh0dHAjaW50ZXJjZXB0b3JzIEludGVyY2VwdG9ycyBkZXRhaWxlZCBpbmZvfVxuICAgKiovXG4gIHZhciBpbnRlcmNlcHRvckZhY3RvcmllcyA9IHRoaXMuaW50ZXJjZXB0b3JzID0gW107XG5cbiAgdGhpcy4kZ2V0ID0gWyckYnJvd3NlcicsICckaHR0cEJhY2tlbmQnLCAnJCRjb29raWVSZWFkZXInLCAnJGNhY2hlRmFjdG9yeScsICckcm9vdFNjb3BlJywgJyRxJywgJyRpbmplY3RvcicsICckc2NlJyxcbiAgICAgIGZ1bmN0aW9uKCRicm93c2VyLCAkaHR0cEJhY2tlbmQsICQkY29va2llUmVhZGVyLCAkY2FjaGVGYWN0b3J5LCAkcm9vdFNjb3BlLCAkcSwgJGluamVjdG9yLCAkc2NlKSB7XG5cbiAgICB2YXIgZGVmYXVsdENhY2hlID0gJGNhY2hlRmFjdG9yeSgnJGh0dHAnKTtcblxuICAgIC8qKlxuICAgICAqIE1ha2Ugc3VyZSB0aGF0IGRlZmF1bHQgcGFyYW0gc2VyaWFsaXplciBpcyBleHBvc2VkIGFzIGEgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBkZWZhdWx0cy5wYXJhbVNlcmlhbGl6ZXIgPSBpc1N0cmluZyhkZWZhdWx0cy5wYXJhbVNlcmlhbGl6ZXIpID9cbiAgICAgICRpbmplY3Rvci5nZXQoZGVmYXVsdHMucGFyYW1TZXJpYWxpemVyKSA6IGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplcjtcblxuICAgIC8qKlxuICAgICAqIEludGVyY2VwdG9ycyBzdG9yZWQgaW4gcmV2ZXJzZSBvcmRlci4gSW5uZXIgaW50ZXJjZXB0b3JzIGJlZm9yZSBvdXRlciBpbnRlcmNlcHRvcnMuXG4gICAgICogVGhlIHJldmVyc2FsIGlzIG5lZWRlZCBzbyB0aGF0IHdlIGNhbiBidWlsZCB1cCB0aGUgaW50ZXJjZXB0aW9uIGNoYWluIGFyb3VuZCB0aGVcbiAgICAgKiBzZXJ2ZXIgcmVxdWVzdC5cbiAgICAgKi9cbiAgICB2YXIgcmV2ZXJzZWRJbnRlcmNlcHRvcnMgPSBbXTtcblxuICAgIGZvckVhY2goaW50ZXJjZXB0b3JGYWN0b3JpZXMsIGZ1bmN0aW9uKGludGVyY2VwdG9yRmFjdG9yeSkge1xuICAgICAgcmV2ZXJzZWRJbnRlcmNlcHRvcnMudW5zaGlmdChpc1N0cmluZyhpbnRlcmNlcHRvckZhY3RvcnkpXG4gICAgICAgICAgPyAkaW5qZWN0b3IuZ2V0KGludGVyY2VwdG9yRmFjdG9yeSkgOiAkaW5qZWN0b3IuaW52b2tlKGludGVyY2VwdG9yRmFjdG9yeSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHNlcnZpY2VcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqIEBuYW1lICRodHRwXG4gICAgICogQHJlcXVpcmVzIG5nLiRodHRwQmFja2VuZFxuICAgICAqIEByZXF1aXJlcyAkY2FjaGVGYWN0b3J5XG4gICAgICogQHJlcXVpcmVzICRyb290U2NvcGVcbiAgICAgKiBAcmVxdWlyZXMgJHFcbiAgICAgKiBAcmVxdWlyZXMgJGluamVjdG9yXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBUaGUgYCRodHRwYCBzZXJ2aWNlIGlzIGEgY29yZSBBbmd1bGFySlMgc2VydmljZSB0aGF0IGZhY2lsaXRhdGVzIGNvbW11bmljYXRpb24gd2l0aCB0aGUgcmVtb3RlXG4gICAgICogSFRUUCBzZXJ2ZXJzIHZpYSB0aGUgYnJvd3NlcidzIFtYTUxIdHRwUmVxdWVzdF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4veG1saHR0cHJlcXVlc3QpXG4gICAgICogb2JqZWN0IG9yIHZpYSBbSlNPTlBdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSlNPTlApLlxuICAgICAqXG4gICAgICogRm9yIHVuaXQgdGVzdGluZyBhcHBsaWNhdGlvbnMgdGhhdCB1c2UgYCRodHRwYCBzZXJ2aWNlLCBzZWVcbiAgICAgKiB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCAkaHR0cEJhY2tlbmQgbW9ja30uXG4gICAgICpcbiAgICAgKiBGb3IgYSBoaWdoZXIgbGV2ZWwgb2YgYWJzdHJhY3Rpb24sIHBsZWFzZSBjaGVjayBvdXQgdGhlIHtAbGluayBuZ1Jlc291cmNlLiRyZXNvdXJjZVxuICAgICAqICRyZXNvdXJjZX0gc2VydmljZS5cbiAgICAgKlxuICAgICAqIFRoZSAkaHR0cCBBUEkgaXMgYmFzZWQgb24gdGhlIHtAbGluayBuZy4kcSBkZWZlcnJlZC9wcm9taXNlIEFQSXN9IGV4cG9zZWQgYnlcbiAgICAgKiB0aGUgJHEgc2VydmljZS4gV2hpbGUgZm9yIHNpbXBsZSB1c2FnZSBwYXR0ZXJucyB0aGlzIGRvZXNuJ3QgbWF0dGVyIG11Y2gsIGZvciBhZHZhbmNlZCB1c2FnZVxuICAgICAqIGl0IGlzIGltcG9ydGFudCB0byBmYW1pbGlhcml6ZSB5b3Vyc2VsZiB3aXRoIHRoZXNlIEFQSXMgYW5kIHRoZSBndWFyYW50ZWVzIHRoZXkgcHJvdmlkZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogIyMgR2VuZXJhbCB1c2FnZVxuICAgICAqIFRoZSBgJGh0dHBgIHNlcnZpY2UgaXMgYSBmdW5jdGlvbiB3aGljaCB0YWtlcyBhIHNpbmdsZSBhcmd1bWVudCDigJQgYSB7QGxpbmsgJGh0dHAjdXNhZ2UgY29uZmlndXJhdGlvbiBvYmplY3R9IOKAlFxuICAgICAqIHRoYXQgaXMgdXNlZCB0byBnZW5lcmF0ZSBhbiBIVFRQIHJlcXVlc3QgYW5kIHJldHVybnMgIGEge0BsaW5rIG5nLiRxIHByb21pc2V9LlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIC8vIFNpbXBsZSBHRVQgcmVxdWVzdCBleGFtcGxlOlxuICAgICAqICAgJGh0dHAoe1xuICAgICAqICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAqICAgICB1cmw6ICcvc29tZVVybCdcbiAgICAgKiAgIH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICogICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseVxuICAgICAqICAgICAgIC8vIHdoZW4gdGhlIHJlc3BvbnNlIGlzIGF2YWlsYWJsZVxuICAgICAqICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICogICAgICAgLy8gY2FsbGVkIGFzeW5jaHJvbm91c2x5IGlmIGFuIGVycm9yIG9jY3Vyc1xuICAgICAqICAgICAgIC8vIG9yIHNlcnZlciByZXR1cm5zIHJlc3BvbnNlIHdpdGggYW4gZXJyb3Igc3RhdHVzLlxuICAgICAqICAgICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZSByZXNwb25zZSBvYmplY3QgaGFzIHRoZXNlIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBUaGUgcmVzcG9uc2UgYm9keSB0cmFuc2Zvcm1lZCB3aXRoIHRoZSB0cmFuc2Zvcm1cbiAgICAgKiAgICAgZnVuY3Rpb25zLlxuICAgICAqICAgLSAqKnN0YXR1cyoqIOKAkyBge251bWJlcn1gIOKAkyBIVFRQIHN0YXR1cyBjb2RlIG9mIHRoZSByZXNwb25zZS5cbiAgICAgKiAgIC0gKipoZWFkZXJzKiog4oCTIGB7ZnVuY3Rpb24oW2hlYWRlck5hbWVdKX1gIOKAkyBIZWFkZXIgZ2V0dGVyIGZ1bmN0aW9uLlxuICAgICAqICAgLSAqKmNvbmZpZyoqIOKAkyBge09iamVjdH1gIOKAkyBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgdGhhdCB3YXMgdXNlZCB0byBnZW5lcmF0ZSB0aGUgcmVxdWVzdC5cbiAgICAgKiAgIC0gKipzdGF0dXNUZXh0Kiog4oCTIGB7c3RyaW5nfWAg4oCTIEhUVFAgc3RhdHVzIHRleHQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAqICAgLSAqKnhoclN0YXR1cyoqIOKAkyBge3N0cmluZ31gIOKAkyBTdGF0dXMgb2YgdGhlIFhNTEh0dHBSZXF1ZXN0IChgY29tcGxldGVgLCBgZXJyb3JgLCBgdGltZW91dGAgb3IgYGFib3J0YCkuXG4gICAgICpcbiAgICAgKiBBIHJlc3BvbnNlIHN0YXR1cyBjb2RlIGJldHdlZW4gMjAwIGFuZCAyOTkgaXMgY29uc2lkZXJlZCBhIHN1Y2Nlc3Mgc3RhdHVzIGFuZCB3aWxsIHJlc3VsdCBpblxuICAgICAqIHRoZSBzdWNjZXNzIGNhbGxiYWNrIGJlaW5nIGNhbGxlZC4gQW55IHJlc3BvbnNlIHN0YXR1cyBjb2RlIG91dHNpZGUgb2YgdGhhdCByYW5nZSBpc1xuICAgICAqIGNvbnNpZGVyZWQgYW4gZXJyb3Igc3RhdHVzIGFuZCB3aWxsIHJlc3VsdCBpbiB0aGUgZXJyb3IgY2FsbGJhY2sgYmVpbmcgY2FsbGVkLlxuICAgICAqIEFsc28sIHN0YXR1cyBjb2RlcyBsZXNzIHRoYW4gLTEgYXJlIG5vcm1hbGl6ZWQgdG8gemVyby4gLTEgdXN1YWxseSBtZWFucyB0aGUgcmVxdWVzdCB3YXNcbiAgICAgKiBhYm9ydGVkLCBlLmcuIHVzaW5nIGEgYGNvbmZpZy50aW1lb3V0YC5cbiAgICAgKiBOb3RlIHRoYXQgaWYgdGhlIHJlc3BvbnNlIGlzIGEgcmVkaXJlY3QsIFhNTEh0dHBSZXF1ZXN0IHdpbGwgdHJhbnNwYXJlbnRseSBmb2xsb3cgaXQsIG1lYW5pbmdcbiAgICAgKiB0aGF0IHRoZSBvdXRjb21lIChzdWNjZXNzIG9yIGVycm9yKSB3aWxsIGJlIGRldGVybWluZWQgYnkgdGhlIGZpbmFsIHJlc3BvbnNlIHN0YXR1cyBjb2RlLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyBTaG9ydGN1dCBtZXRob2RzXG4gICAgICpcbiAgICAgKiBTaG9ydGN1dCBtZXRob2RzIGFyZSBhbHNvIGF2YWlsYWJsZS4gQWxsIHNob3J0Y3V0IG1ldGhvZHMgcmVxdWlyZSBwYXNzaW5nIGluIHRoZSBVUkwsIGFuZFxuICAgICAqIHJlcXVlc3QgZGF0YSBtdXN0IGJlIHBhc3NlZCBpbiBmb3IgUE9TVC9QVVQgcmVxdWVzdHMuIEFuIG9wdGlvbmFsIGNvbmZpZyBjYW4gYmUgcGFzc2VkIGFzIHRoZVxuICAgICAqIGxhc3QgYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgJGh0dHAuZ2V0KCcvc29tZVVybCcsIGNvbmZpZykudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAqICAgJGh0dHAucG9zdCgnL3NvbWVVcmwnLCBkYXRhLCBjb25maWcpLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIENvbXBsZXRlIGxpc3Qgb2Ygc2hvcnRjdXQgbWV0aG9kczpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2dldCAkaHR0cC5nZXR9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjaGVhZCAkaHR0cC5oZWFkfVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI3Bvc3QgJGh0dHAucG9zdH1cbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNwdXQgJGh0dHAucHV0fVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2RlbGV0ZSAkaHR0cC5kZWxldGV9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjanNvbnAgJGh0dHAuanNvbnB9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjcGF0Y2ggJGh0dHAucGF0Y2h9XG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIFdyaXRpbmcgVW5pdCBUZXN0cyB0aGF0IHVzZSAkaHR0cFxuICAgICAqIFdoZW4gdW5pdCB0ZXN0aW5nICh1c2luZyB7QGxpbmsgbmdNb2NrIG5nTW9ja30pLCBpdCBpcyBuZWNlc3NhcnkgdG8gY2FsbFxuICAgICAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kI2ZsdXNoICRodHRwQmFja2VuZC5mbHVzaCgpfSB0byBmbHVzaCBlYWNoIHBlbmRpbmdcbiAgICAgKiByZXF1ZXN0IHVzaW5nIHRyYWluZWQgcmVzcG9uc2VzLlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogJGh0dHBCYWNrZW5kLmV4cGVjdEdFVCguLi4pO1xuICAgICAqICRodHRwLmdldCguLi4pO1xuICAgICAqICRodHRwQmFja2VuZC5mbHVzaCgpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMgU2V0dGluZyBIVFRQIEhlYWRlcnNcbiAgICAgKlxuICAgICAqIFRoZSAkaHR0cCBzZXJ2aWNlIHdpbGwgYXV0b21hdGljYWxseSBhZGQgY2VydGFpbiBIVFRQIGhlYWRlcnMgdG8gYWxsIHJlcXVlc3RzLiBUaGVzZSBkZWZhdWx0c1xuICAgICAqIGNhbiBiZSBmdWxseSBjb25maWd1cmVkIGJ5IGFjY2Vzc2luZyB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVyc2AgY29uZmlndXJhdGlvblxuICAgICAqIG9iamVjdCwgd2hpY2ggY3VycmVudGx5IGNvbnRhaW5zIHRoaXMgZGVmYXVsdCBjb25maWd1cmF0aW9uOlxuICAgICAqXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbmAgKGhlYWRlcnMgdGhhdCBhcmUgY29tbW9uIGZvciBhbGwgcmVxdWVzdHMpOlxuICAgICAqICAgLSA8Y29kZT5BY2NlcHQ6IGFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sIFxcKiYjNjUyNzk7LyYjNjUyNzk7XFwqPC9jb2RlPlxuICAgICAqIC0gYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0YDogKGhlYWRlciBkZWZhdWx0cyBmb3IgUE9TVCByZXF1ZXN0cylcbiAgICAgKiAgIC0gYENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbmBcbiAgICAgKiAtIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucHV0YCAoaGVhZGVyIGRlZmF1bHRzIGZvciBQVVQgcmVxdWVzdHMpXG4gICAgICogICAtIGBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25gXG4gICAgICpcbiAgICAgKiBUbyBhZGQgb3Igb3ZlcndyaXRlIHRoZXNlIGRlZmF1bHRzLCBzaW1wbHkgYWRkIG9yIHJlbW92ZSBhIHByb3BlcnR5IGZyb20gdGhlc2UgY29uZmlndXJhdGlvblxuICAgICAqIG9iamVjdHMuIFRvIGFkZCBoZWFkZXJzIGZvciBhbiBIVFRQIG1ldGhvZCBvdGhlciB0aGFuIFBPU1Qgb3IgUFVULCBzaW1wbHkgYWRkIGEgbmV3IG9iamVjdFxuICAgICAqIHdpdGggdGhlIGxvd2VyY2FzZWQgSFRUUCBtZXRob2QgbmFtZSBhcyB0aGUga2V5LCBlLmcuXG4gICAgICogYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7ICdNeS1IZWFkZXInIDogJ3ZhbHVlJyB9YC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0cyBjYW4gYWxzbyBiZSBzZXQgYXQgcnVudGltZSB2aWEgdGhlIGAkaHR0cC5kZWZhdWx0c2Agb2JqZWN0IGluIHRoZSBzYW1lXG4gICAgICogZmFzaGlvbi4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBtb2R1bGUucnVuKGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICogICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gJ0Jhc2ljIFltVmxjRHBpYjI5dyc7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJbiBhZGRpdGlvbiwgeW91IGNhbiBzdXBwbHkgYSBgaGVhZGVyc2AgcHJvcGVydHkgaW4gdGhlIGNvbmZpZyBvYmplY3QgcGFzc2VkIHdoZW5cbiAgICAgKiBjYWxsaW5nIGAkaHR0cChjb25maWcpYCwgd2hpY2ggb3ZlcnJpZGVzIHRoZSBkZWZhdWx0cyB3aXRob3V0IGNoYW5naW5nIHRoZW0gZ2xvYmFsbHkuXG4gICAgICpcbiAgICAgKiBUbyBleHBsaWNpdGx5IHJlbW92ZSBhIGhlYWRlciBhdXRvbWF0aWNhbGx5IGFkZGVkIHZpYSAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMgb24gYSBwZXIgcmVxdWVzdCBiYXNpcyxcbiAgICAgKiBVc2UgdGhlIGBoZWFkZXJzYCBwcm9wZXJ0eSwgc2V0dGluZyB0aGUgZGVzaXJlZCBoZWFkZXIgdG8gYHVuZGVmaW5lZGAuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB2YXIgcmVxID0ge1xuICAgICAqICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgKiAgdXJsOiAnaHR0cDovL2V4YW1wbGUuY29tJyxcbiAgICAgKiAgaGVhZGVyczoge1xuICAgICAqICAgICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWRcbiAgICAgKiAgfSxcbiAgICAgKiAgZGF0YTogeyB0ZXN0OiAndGVzdCcgfVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqICRodHRwKHJlcSkudGhlbihmdW5jdGlvbigpey4uLn0sIGZ1bmN0aW9uKCl7Li4ufSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyBUcmFuc2Zvcm1pbmcgUmVxdWVzdHMgYW5kIFJlc3BvbnNlc1xuICAgICAqXG4gICAgICogQm90aCByZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIGNhbiBiZSB0cmFuc2Zvcm1lZCB1c2luZyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnM6IGB0cmFuc2Zvcm1SZXF1ZXN0YFxuICAgICAqIGFuZCBgdHJhbnNmb3JtUmVzcG9uc2VgLiBUaGVzZSBwcm9wZXJ0aWVzIGNhbiBiZSBhIHNpbmdsZSBmdW5jdGlvbiB0aGF0IHJldHVybnNcbiAgICAgKiB0aGUgdHJhbnNmb3JtZWQgdmFsdWUgKGBmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpYCkgb3IgYW4gYXJyYXkgb2Ygc3VjaCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMsXG4gICAgICogd2hpY2ggYWxsb3dzIHlvdSB0byBgcHVzaGAgb3IgYHVuc2hpZnRgIGEgbmV3IHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIGludG8gdGhlIHRyYW5zZm9ybWF0aW9uIGNoYWluLlxuICAgICAqXG4gICAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICAgKiAqKk5vdGU6KiogQW5ndWxhckpTIGRvZXMgbm90IG1ha2UgYSBjb3B5IG9mIHRoZSBgZGF0YWAgcGFyYW1ldGVyIGJlZm9yZSBpdCBpcyBwYXNzZWQgaW50byB0aGUgYHRyYW5zZm9ybVJlcXVlc3RgIHBpcGVsaW5lLlxuICAgICAqIFRoYXQgbWVhbnMgY2hhbmdlcyB0byB0aGUgcHJvcGVydGllcyBvZiBgZGF0YWAgYXJlIG5vdCBsb2NhbCB0byB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChzaW5jZSBKYXZhc2NyaXB0IHBhc3NlcyBvYmplY3RzIGJ5IHJlZmVyZW5jZSkuXG4gICAgICogRm9yIGV4YW1wbGUsIHdoZW4gY2FsbGluZyBgJGh0dHAuZ2V0KHVybCwgJHNjb3BlLm15T2JqZWN0KWAsIG1vZGlmaWNhdGlvbnMgdG8gdGhlIG9iamVjdCdzIHByb3BlcnRpZXMgaW4gYSB0cmFuc2Zvcm1SZXF1ZXN0XG4gICAgICogZnVuY3Rpb24gd2lsbCBiZSByZWZsZWN0ZWQgb24gdGhlIHNjb3BlIGFuZCBpbiBhbnkgdGVtcGxhdGVzIHdoZXJlIHRoZSBvYmplY3QgaXMgZGF0YS1ib3VuZC5cbiAgICAgKiBUbyBwcmV2ZW50IHRoaXMsIHRyYW5zZm9ybSBmdW5jdGlvbnMgc2hvdWxkIGhhdmUgbm8gc2lkZS1lZmZlY3RzLlxuICAgICAqIElmIHlvdSBuZWVkIHRvIG1vZGlmeSBwcm9wZXJ0aWVzLCBpdCBpcyByZWNvbW1lbmRlZCB0byBtYWtlIGEgY29weSBvZiB0aGUgZGF0YSwgb3IgY3JlYXRlIG5ldyBvYmplY3QgdG8gcmV0dXJuLlxuICAgICAqIDwvZGl2PlxuICAgICAqXG4gICAgICogIyMjIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zXG4gICAgICpcbiAgICAgKiBUaGUgYCRodHRwUHJvdmlkZXJgIHByb3ZpZGVyIGFuZCBgJGh0dHBgIHNlcnZpY2UgZXhwb3NlIGBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCBhbmRcbiAgICAgKiBgZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMuIElmIGEgcmVxdWVzdCBkb2VzIG5vdCBwcm92aWRlIGl0cyBvd24gdHJhbnNmb3JtYXRpb25zXG4gICAgICogdGhlbiB0aGVzZSB3aWxsIGJlIGFwcGxpZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGF1Z21lbnQgb3IgcmVwbGFjZSB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgYnkgbW9kaWZ5aW5nIHRoZXNlIHByb3BlcnRpZXMgYnkgYWRkaW5nIHRvIG9yXG4gICAgICogcmVwbGFjaW5nIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEFuZ3VsYXJKUyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zOlxuICAgICAqXG4gICAgICogUmVxdWVzdCB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgIGFuZCBgJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGApIGlzXG4gICAgICogYW4gYXJyYXkgd2l0aCBvbmUgZnVuY3Rpb24gdGhhdCBkb2VzIHRoZSBmb2xsb3dpbmc6XG4gICAgICpcbiAgICAgKiAtIElmIHRoZSBgZGF0YWAgcHJvcGVydHkgb2YgdGhlIHJlcXVlc3QgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbnMgYW4gb2JqZWN0LCBzZXJpYWxpemUgaXRcbiAgICAgKiAgIGludG8gSlNPTiBmb3JtYXQuXG4gICAgICpcbiAgICAgKiBSZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCBhbmQgYCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCkgaXNcbiAgICAgKiBhbiBhcnJheSB3aXRoIG9uZSBmdW5jdGlvbiB0aGF0IGRvZXMgdGhlIGZvbGxvd2luZzpcbiAgICAgKlxuICAgICAqICAtIElmIFhTUkYgcHJlZml4IGlzIGRldGVjdGVkLCBzdHJpcCBpdCAoc2VlIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zIHNlY3Rpb24gYmVsb3cpLlxuICAgICAqICAtIElmIHRoZSBgQ29udGVudC1UeXBlYCBpcyBgYXBwbGljYXRpb24vanNvbmAgb3IgdGhlIHJlc3BvbnNlIGxvb2tzIGxpa2UgSlNPTixcbiAgICogICAgICBkZXNlcmlhbGl6ZSBpdCB1c2luZyBhIEpTT04gcGFyc2VyLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnMgUGVyIFJlcXVlc3RcbiAgICAgKlxuICAgICAqIElmIHlvdSB3aXNoIHRvIG92ZXJyaWRlIHRoZSByZXF1ZXN0L3Jlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucyBvbmx5IGZvciBhIHNpbmdsZSByZXF1ZXN0IHRoZW4gcHJvdmlkZVxuICAgICAqIGB0cmFuc2Zvcm1SZXF1ZXN0YCBhbmQvb3IgYHRyYW5zZm9ybVJlc3BvbnNlYCBwcm9wZXJ0aWVzIG9uIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBwYXNzZWRcbiAgICAgKiBpbnRvIGAkaHR0cGAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaWYgeW91IHByb3ZpZGUgdGhlc2UgcHJvcGVydGllcyBvbiB0aGUgY29uZmlnIG9iamVjdCB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgd2lsbCBiZVxuICAgICAqIG92ZXJ3cml0dGVuLiBJZiB5b3Ugd2lzaCB0byBhdWdtZW50IHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyB0aGVuIHlvdSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB5b3VyXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24gYXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgZm9sbG93aW5nIGNvZGUgZGVtb25zdHJhdGVzIGFkZGluZyBhIG5ldyByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbiB0byBiZSBydW4gYWZ0ZXIgdGhlIGRlZmF1bHQgcmVzcG9uc2VcbiAgICAgKiB0cmFuc2Zvcm1hdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZnVuY3Rpb24gYXBwZW5kVHJhbnNmb3JtKGRlZmF1bHRzLCB0cmFuc2Zvcm0pIHtcbiAgICAgKlxuICAgICAqICAgLy8gV2UgY2FuJ3QgZ3VhcmFudGVlIHRoYXQgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb24gaXMgYW4gYXJyYXlcbiAgICAgKiAgIGRlZmF1bHRzID0gYW5ndWxhci5pc0FycmF5KGRlZmF1bHRzKSA/IGRlZmF1bHRzIDogW2RlZmF1bHRzXTtcbiAgICAgKlxuICAgICAqICAgLy8gQXBwZW5kIHRoZSBuZXcgdHJhbnNmb3JtYXRpb24gdG8gdGhlIGRlZmF1bHRzXG4gICAgICogICByZXR1cm4gZGVmYXVsdHMuY29uY2F0KHRyYW5zZm9ybSk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogJGh0dHAoe1xuICAgICAqICAgdXJsOiAnLi4uJyxcbiAgICAgKiAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICogICB0cmFuc2Zvcm1SZXNwb25zZTogYXBwZW5kVHJhbnNmb3JtKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgICByZXR1cm4gZG9UcmFuc2Zvcm0odmFsdWUpO1xuICAgICAqICAgfSlcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqXG4gICAgICogIyMgQ2FjaGluZ1xuICAgICAqXG4gICAgICoge0BsaW5rIG5nLiRodHRwIGAkaHR0cGB9IHJlc3BvbnNlcyBhcmUgbm90IGNhY2hlZCBieSBkZWZhdWx0LiBUbyBlbmFibGUgY2FjaGluZywgeW91IG11c3RcbiAgICAgKiBzZXQgdGhlIGNvbmZpZy5jYWNoZSB2YWx1ZSBvciB0aGUgZGVmYXVsdCBjYWNoZSB2YWx1ZSB0byBUUlVFIG9yIHRvIGEgY2FjaGUgb2JqZWN0IChjcmVhdGVkXG4gICAgICogd2l0aCB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9KS4gSWYgZGVmaW5lZCwgdGhlIHZhbHVlIG9mIGNvbmZpZy5jYWNoZSB0YWtlc1xuICAgICAqIHByZWNlZGVuY2Ugb3ZlciB0aGUgZGVmYXVsdCBjYWNoZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEluIG9yZGVyIHRvOlxuICAgICAqICAgKiBjYWNoZSBhbGwgcmVzcG9uc2VzIC0gc2V0IHRoZSBkZWZhdWx0IGNhY2hlIHZhbHVlIHRvIFRSVUUgb3IgdG8gYSBjYWNoZSBvYmplY3RcbiAgICAgKiAgICogY2FjaGUgYSBzcGVjaWZpYyByZXNwb25zZSAtIHNldCBjb25maWcuY2FjaGUgdmFsdWUgdG8gVFJVRSBvciB0byBhIGNhY2hlIG9iamVjdFxuICAgICAqXG4gICAgICogSWYgY2FjaGluZyBpcyBlbmFibGVkLCBidXQgbmVpdGhlciB0aGUgZGVmYXVsdCBjYWNoZSBub3IgY29uZmlnLmNhY2hlIGFyZSBzZXQgdG8gYSBjYWNoZSBvYmplY3QsXG4gICAgICogdGhlbiB0aGUgZGVmYXVsdCBgJGNhY2hlRmFjdG9yeShcIiRodHRwXCIpYCBvYmplY3QgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGNhY2hlIHZhbHVlIGNhbiBiZSBzZXQgYnkgdXBkYXRpbmcgdGhlXG4gICAgICoge0BsaW5rIG5nLiRodHRwI2RlZmF1bHRzIGAkaHR0cC5kZWZhdWx0cy5jYWNoZWB9IHByb3BlcnR5IG9yIHRoZVxuICAgICAqIHtAbGluayAkaHR0cFByb3ZpZGVyI2RlZmF1bHRzIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmNhY2hlYH0gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBXaGVuIGNhY2hpbmcgaXMgZW5hYmxlZCwge0BsaW5rIG5nLiRodHRwIGAkaHR0cGB9IHN0b3JlcyB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHVzaW5nXG4gICAgICogdGhlIHJlbGV2YW50IGNhY2hlIG9iamVjdC4gVGhlIG5leHQgdGltZSB0aGUgc2FtZSByZXF1ZXN0IGlzIG1hZGUsIHRoZSByZXNwb25zZSBpcyByZXR1cm5lZFxuICAgICAqIGZyb20gdGhlIGNhY2hlIHdpdGhvdXQgc2VuZGluZyBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIFRha2Ugbm90ZSB0aGF0OlxuICAgICAqXG4gICAgICogICAqIE9ubHkgR0VUIGFuZCBKU09OUCByZXF1ZXN0cyBhcmUgY2FjaGVkLlxuICAgICAqICAgKiBUaGUgY2FjaGUga2V5IGlzIHRoZSByZXF1ZXN0IFVSTCBpbmNsdWRpbmcgc2VhcmNoIHBhcmFtZXRlcnM7IGhlYWRlcnMgYXJlIG5vdCBjb25zaWRlcmVkLlxuICAgICAqICAgKiBDYWNoZWQgcmVzcG9uc2VzIGFyZSByZXR1cm5lZCBhc3luY2hyb25vdXNseSwgaW4gdGhlIHNhbWUgd2F5IGFzIHJlc3BvbnNlcyBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogICAqIElmIG11bHRpcGxlIGlkZW50aWNhbCByZXF1ZXN0cyBhcmUgbWFkZSB1c2luZyB0aGUgc2FtZSBjYWNoZSwgd2hpY2ggaXMgbm90IHlldCBwb3B1bGF0ZWQsXG4gICAgICogICAgIG9uZSByZXF1ZXN0IHdpbGwgYmUgbWFkZSB0byB0aGUgc2VydmVyIGFuZCByZW1haW5pbmcgcmVxdWVzdHMgd2lsbCByZXR1cm4gdGhlIHNhbWUgcmVzcG9uc2UuXG4gICAgICogICAqIEEgY2FjaGUtY29udHJvbCBoZWFkZXIgb24gdGhlIHJlc3BvbnNlIGRvZXMgbm90IGFmZmVjdCBpZiBvciBob3cgcmVzcG9uc2VzIGFyZSBjYWNoZWQuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIEludGVyY2VwdG9yc1xuICAgICAqXG4gICAgICogQmVmb3JlIHlvdSBzdGFydCBjcmVhdGluZyBpbnRlcmNlcHRvcnMsIGJlIHN1cmUgdG8gdW5kZXJzdGFuZCB0aGVcbiAgICAgKiB7QGxpbmsgbmcuJHEgJHEgYW5kIGRlZmVycmVkL3Byb21pc2UgQVBJc30uXG4gICAgICpcbiAgICAgKiBGb3IgcHVycG9zZXMgb2YgZ2xvYmFsIGVycm9yIGhhbmRsaW5nLCBhdXRoZW50aWNhdGlvbiwgb3IgYW55IGtpbmQgb2Ygc3luY2hyb25vdXMgb3JcbiAgICAgKiBhc3luY2hyb25vdXMgcHJlLXByb2Nlc3Npbmcgb2YgcmVxdWVzdCBvciBwb3N0cHJvY2Vzc2luZyBvZiByZXNwb25zZXMsIGl0IGlzIGRlc2lyYWJsZSB0byBiZVxuICAgICAqIGFibGUgdG8gaW50ZXJjZXB0IHJlcXVlc3RzIGJlZm9yZSB0aGV5IGFyZSBoYW5kZWQgdG8gdGhlIHNlcnZlciBhbmRcbiAgICAgKiByZXNwb25zZXMgYmVmb3JlIHRoZXkgYXJlIGhhbmRlZCBvdmVyIHRvIHRoZSBhcHBsaWNhdGlvbiBjb2RlIHRoYXRcbiAgICAgKiBpbml0aWF0ZWQgdGhlc2UgcmVxdWVzdHMuIFRoZSBpbnRlcmNlcHRvcnMgbGV2ZXJhZ2UgdGhlIHtAbGluayBuZy4kcVxuICAgICAqIHByb21pc2UgQVBJc30gdG8gZnVsZmlsbCB0aGlzIG5lZWQgZm9yIGJvdGggc3luY2hyb25vdXMgYW5kIGFzeW5jaHJvbm91cyBwcmUtcHJvY2Vzc2luZy5cbiAgICAgKlxuICAgICAqIFRoZSBpbnRlcmNlcHRvcnMgYXJlIHNlcnZpY2UgZmFjdG9yaWVzIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYCRodHRwUHJvdmlkZXJgIGJ5XG4gICAgICogYWRkaW5nIHRoZW0gdG8gdGhlIGAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9yc2AgYXJyYXkuIFRoZSBmYWN0b3J5IGlzIGNhbGxlZCBhbmRcbiAgICAgKiBpbmplY3RlZCB3aXRoIGRlcGVuZGVuY2llcyAoaWYgc3BlY2lmaWVkKSBhbmQgcmV0dXJucyB0aGUgaW50ZXJjZXB0b3IuXG4gICAgICpcbiAgICAgKiBUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIGludGVyY2VwdG9ycyAoYW5kIHR3byBraW5kcyBvZiByZWplY3Rpb24gaW50ZXJjZXB0b3JzKTpcbiAgICAgKlxuICAgICAqICAgKiBgcmVxdWVzdGA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggYSBodHRwIHtAbGluayAkaHR0cCN1c2FnZSBjb25maWd9IG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgY29uZmlnYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYGNvbmZpZ2BcbiAgICAgKiAgICAgb2JqZWN0IGRpcmVjdGx5LCBvciBhIHByb21pc2UgY29udGFpbmluZyB0aGUgYGNvbmZpZ2Agb3IgYSBuZXcgYGNvbmZpZ2Agb2JqZWN0LlxuICAgICAqICAgKiBgcmVxdWVzdEVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICogICAqIGByZXNwb25zZWA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggaHR0cCBgcmVzcG9uc2VgIG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgcmVzcG9uc2VgIG9iamVjdCBvciBjcmVhdGUgYSBuZXcgb25lLiBUaGUgZnVuY3Rpb24gbmVlZHMgdG8gcmV0dXJuIHRoZSBgcmVzcG9uc2VgXG4gICAgICogICAgIG9iamVjdCBkaXJlY3RseSwgb3IgYXMgYSBwcm9taXNlIGNvbnRhaW5pbmcgdGhlIGByZXNwb25zZWAgb3IgYSBuZXcgYHJlc3BvbnNlYCBvYmplY3QuXG4gICAgICogICAqIGByZXNwb25zZUVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAvLyByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgYXMgYSBzZXJ2aWNlXG4gICAgICogICAkcHJvdmlkZS5mYWN0b3J5KCdteUh0dHBJbnRlcmNlcHRvcicsIGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcbiAgICAgKiAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIHN1Y2Nlc3NcbiAgICAgKiAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3JlcXVlc3RFcnJvcic6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIGVycm9yXG4gICAgICogICAgICAgICBpZiAoY2FuUmVjb3ZlcihyZWplY3Rpb24pKSB7XG4gICAgICogICAgICAgICAgIHJldHVybiByZXNwb25zZU9yTmV3UHJvbWlzZVxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKlxuICAgICAqXG4gICAgICogICAgICAgLy8gb3B0aW9uYWwgbWV0aG9kXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBzdWNjZXNzXG4gICAgICogICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3Jlc3BvbnNlRXJyb3InOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBlcnJvclxuICAgICAqICAgICAgICAgaWYgKGNhblJlY292ZXIocmVqZWN0aW9uKSkge1xuICAgICAqICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VPck5ld1Byb21pc2VcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKlxuICAgICAqICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnbXlIdHRwSW50ZXJjZXB0b3InKTtcbiAgICAgKlxuICAgICAqXG4gICAgICogICAvLyBhbHRlcm5hdGl2ZWx5LCByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgdmlhIGFuIGFub255bW91cyBmYWN0b3J5XG4gICAgICogICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICogICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZVxuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKiAgICAgICAncmVzcG9uc2UnOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zXG4gICAgICpcbiAgICAgKiBXaGVuIGRlc2lnbmluZyB3ZWIgYXBwbGljYXRpb25zLCBjb25zaWRlciBzZWN1cml0eSB0aHJlYXRzIGZyb206XG4gICAgICpcbiAgICAgKiAtIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcbiAgICAgKiAtIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KVxuICAgICAqXG4gICAgICogQm90aCBzZXJ2ZXIgYW5kIHRoZSBjbGllbnQgbXVzdCBjb29wZXJhdGUgaW4gb3JkZXIgdG8gZWxpbWluYXRlIHRoZXNlIHRocmVhdHMuIEFuZ3VsYXJKUyBjb21lc1xuICAgICAqIHByZS1jb25maWd1cmVkIHdpdGggc3RyYXRlZ2llcyB0aGF0IGFkZHJlc3MgdGhlc2UgaXNzdWVzLCBidXQgZm9yIHRoaXMgdG8gd29yayBiYWNrZW5kIHNlcnZlclxuICAgICAqIGNvb3BlcmF0aW9uIGlzIHJlcXVpcmVkLlxuICAgICAqXG4gICAgICogIyMjIEpTT04gVnVsbmVyYWJpbGl0eSBQcm90ZWN0aW9uXG4gICAgICpcbiAgICAgKiBBIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcbiAgICAgKiBhbGxvd3MgdGhpcmQgcGFydHkgd2Vic2l0ZSB0byB0dXJuIHlvdXIgSlNPTiByZXNvdXJjZSBVUkwgaW50b1xuICAgICAqIFtKU09OUF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OUCkgcmVxdWVzdCB1bmRlciBzb21lIGNvbmRpdGlvbnMuIFRvXG4gICAgICogY291bnRlciB0aGlzIHlvdXIgc2VydmVyIGNhbiBwcmVmaXggYWxsIEpTT04gcmVxdWVzdHMgd2l0aCBmb2xsb3dpbmcgc3RyaW5nIGBcIildfScsXFxuXCJgLlxuICAgICAqIEFuZ3VsYXJKUyB3aWxsIGF1dG9tYXRpY2FsbHkgc3RyaXAgdGhlIHByZWZpeCBiZWZvcmUgcHJvY2Vzc2luZyBpdCBhcyBKU09OLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUgaWYgeW91ciBzZXJ2ZXIgbmVlZHMgdG8gcmV0dXJuOlxuICAgICAqIGBgYGpzXG4gICAgICogWydvbmUnLCd0d28nXVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogd2hpY2ggaXMgdnVsbmVyYWJsZSB0byBhdHRhY2ssIHlvdXIgc2VydmVyIGNhbiByZXR1cm46XG4gICAgICogYGBganNcbiAgICAgKiApXX0nLFxuICAgICAqIFsnb25lJywndHdvJ11cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEFuZ3VsYXJKUyB3aWxsIHN0cmlwIHRoZSBwcmVmaXgsIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBKU09OLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgQ3Jvc3MgU2l0ZSBSZXF1ZXN0IEZvcmdlcnkgKFhTUkYpIFByb3RlY3Rpb25cbiAgICAgKlxuICAgICAqIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KSBpcyBhbiBhdHRhY2sgdGVjaG5pcXVlIGJ5XG4gICAgICogd2hpY2ggdGhlIGF0dGFja2VyIGNhbiB0cmljayBhbiBhdXRoZW50aWNhdGVkIHVzZXIgaW50byB1bmtub3dpbmdseSBleGVjdXRpbmcgYWN0aW9ucyBvbiB5b3VyXG4gICAgICogd2Vic2l0ZS4gQW5ndWxhckpTIHByb3ZpZGVzIGEgbWVjaGFuaXNtIHRvIGNvdW50ZXIgWFNSRi4gV2hlbiBwZXJmb3JtaW5nIFhIUiByZXF1ZXN0cywgdGhlXG4gICAgICogJGh0dHAgc2VydmljZSByZWFkcyBhIHRva2VuIGZyb20gYSBjb29raWUgKGJ5IGRlZmF1bHQsIGBYU1JGLVRPS0VOYCkgYW5kIHNldHMgaXQgYXMgYW4gSFRUUFxuICAgICAqIGhlYWRlciAoYFgtWFNSRi1UT0tFTmApLiBTaW5jZSBvbmx5IEphdmFTY3JpcHQgdGhhdCBydW5zIG9uIHlvdXIgZG9tYWluIGNvdWxkIHJlYWQgdGhlXG4gICAgICogY29va2llLCB5b3VyIHNlcnZlciBjYW4gYmUgYXNzdXJlZCB0aGF0IHRoZSBYSFIgY2FtZSBmcm9tIEphdmFTY3JpcHQgcnVubmluZyBvbiB5b3VyIGRvbWFpbi5cbiAgICAgKiBUaGUgaGVhZGVyIHdpbGwgbm90IGJlIHNldCBmb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzLlxuICAgICAqXG4gICAgICogVG8gdGFrZSBhZHZhbnRhZ2Ugb2YgdGhpcywgeW91ciBzZXJ2ZXIgbmVlZHMgdG8gc2V0IGEgdG9rZW4gaW4gYSBKYXZhU2NyaXB0IHJlYWRhYmxlIHNlc3Npb25cbiAgICAgKiBjb29raWUgY2FsbGVkIGBYU1JGLVRPS0VOYCBvbiB0aGUgZmlyc3QgSFRUUCBHRVQgcmVxdWVzdC4gT24gc3Vic2VxdWVudCBYSFIgcmVxdWVzdHMgdGhlXG4gICAgICogc2VydmVyIGNhbiB2ZXJpZnkgdGhhdCB0aGUgY29va2llIG1hdGNoZXMgYFgtWFNSRi1UT0tFTmAgSFRUUCBoZWFkZXIsIGFuZCB0aGVyZWZvcmUgYmUgc3VyZVxuICAgICAqIHRoYXQgb25seSBKYXZhU2NyaXB0IHJ1bm5pbmcgb24geW91ciBkb21haW4gY291bGQgaGF2ZSBzZW50IHRoZSByZXF1ZXN0LiBUaGUgdG9rZW4gbXVzdCBiZVxuICAgICAqIHVuaXF1ZSBmb3IgZWFjaCB1c2VyIGFuZCBtdXN0IGJlIHZlcmlmaWFibGUgYnkgdGhlIHNlcnZlciAodG8gcHJldmVudCB0aGUgSmF2YVNjcmlwdCBmcm9tXG4gICAgICogbWFraW5nIHVwIGl0cyBvd24gdG9rZW5zKS4gV2UgcmVjb21tZW5kIHRoYXQgdGhlIHRva2VuIGlzIGEgZGlnZXN0IG9mIHlvdXIgc2l0ZSdzXG4gICAgICogYXV0aGVudGljYXRpb24gY29va2llIHdpdGggYSBbc2FsdF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2FsdF8oY3J5cHRvZ3JhcGh5JiM0MTspXG4gICAgICogZm9yIGFkZGVkIHNlY3VyaXR5LlxuICAgICAqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGhlYWRlcnMgY2FuIGJlIHNwZWNpZmllZCB1c2luZyB0aGUgeHNyZkhlYWRlck5hbWUgYW5kIHhzcmZDb29raWVOYW1lXG4gICAgICogcHJvcGVydGllcyBvZiBlaXRoZXIgJGh0dHBQcm92aWRlci5kZWZhdWx0cyBhdCBjb25maWctdGltZSwgJGh0dHAuZGVmYXVsdHMgYXQgcnVuLXRpbWUsXG4gICAgICogb3IgdGhlIHBlci1yZXF1ZXN0IGNvbmZpZyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBJbiBvcmRlciB0byBwcmV2ZW50IGNvbGxpc2lvbnMgaW4gZW52aXJvbm1lbnRzIHdoZXJlIG11bHRpcGxlIEFuZ3VsYXJKUyBhcHBzIHNoYXJlIHRoZVxuICAgICAqIHNhbWUgZG9tYWluIG9yIHN1YmRvbWFpbiwgd2UgcmVjb21tZW5kIHRoYXQgZWFjaCBhcHBsaWNhdGlvbiB1c2VzIHVuaXF1ZSBjb29raWUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgT2JqZWN0IGRlc2NyaWJpbmcgdGhlIHJlcXVlc3QgdG8gYmUgbWFkZSBhbmQgaG93IGl0IHNob3VsZCBiZVxuICAgICAqICAgIHByb2Nlc3NlZC4gVGhlIG9iamVjdCBoYXMgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAgICAtICoqbWV0aG9kKiog4oCTIGB7c3RyaW5nfWAg4oCTIEhUVFAgbWV0aG9kIChlLmcuICdHRVQnLCAnUE9TVCcsIGV0YylcbiAgICAgKiAgICAtICoqdXJsKiog4oCTIGB7c3RyaW5nfFRydXN0ZWRPYmplY3R9YCDigJMgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZDtcbiAgICAgKiAgICAgIG9yIGFuIG9iamVjdCBjcmVhdGVkIGJ5IGEgY2FsbCB0byBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKWAuXG4gICAgICogICAgLSAqKnBhcmFtcyoqIOKAkyBge09iamVjdC48c3RyaW5nfE9iamVjdD59YCDigJMgTWFwIG9mIHN0cmluZ3Mgb3Igb2JqZWN0cyB3aGljaCB3aWxsIGJlIHNlcmlhbGl6ZWRcbiAgICAgKiAgICAgIHdpdGggdGhlIGBwYXJhbVNlcmlhbGl6ZXJgIGFuZCBhcHBlbmRlZCBhcyBHRVQgcGFyYW1ldGVycy5cbiAgICAgKiAgICAtICoqZGF0YSoqIOKAkyBge3N0cmluZ3xPYmplY3R9YCDigJMgRGF0YSB0byBiZSBzZW50IGFzIHRoZSByZXF1ZXN0IG1lc3NhZ2UgZGF0YS5cbiAgICAgKiAgICAtICoqaGVhZGVycyoqIOKAkyBge09iamVjdH1gIOKAkyBNYXAgb2Ygc3RyaW5ncyBvciBmdW5jdGlvbnMgd2hpY2ggcmV0dXJuIHN0cmluZ3MgcmVwcmVzZW50aW5nXG4gICAgICogICAgICBIVFRQIGhlYWRlcnMgdG8gc2VuZCB0byB0aGUgc2VydmVyLiBJZiB0aGUgcmV0dXJuIHZhbHVlIG9mIGEgZnVuY3Rpb24gaXMgbnVsbCwgdGhlXG4gICAgICogICAgICBoZWFkZXIgd2lsbCBub3QgYmUgc2VudC4gRnVuY3Rpb25zIGFjY2VwdCBhIGNvbmZpZyBvYmplY3QgYXMgYW4gYXJndW1lbnQuXG4gICAgICogICAgLSAqKmV2ZW50SGFuZGxlcnMqKiAtIGB7T2JqZWN0fWAgLSBFdmVudCBsaXN0ZW5lcnMgdG8gYmUgYm91bmQgdG8gdGhlIFhNTEh0dHBSZXF1ZXN0IG9iamVjdC5cbiAgICAgKiAgICAgIFRvIGJpbmQgZXZlbnRzIHRvIHRoZSBYTUxIdHRwUmVxdWVzdCB1cGxvYWQgb2JqZWN0LCB1c2UgYHVwbG9hZEV2ZW50SGFuZGxlcnNgLlxuICAgICAqICAgICAgVGhlIGhhbmRsZXIgd2lsbCBiZSBjYWxsZWQgaW4gdGhlIGNvbnRleHQgb2YgYSBgJGFwcGx5YCBibG9jay5cbiAgICAgKiAgICAtICoqdXBsb2FkRXZlbnRIYW5kbGVycyoqIC0gYHtPYmplY3R9YCAtIEV2ZW50IGxpc3RlbmVycyB0byBiZSBib3VuZCB0byB0aGUgWE1MSHR0cFJlcXVlc3QgdXBsb2FkXG4gICAgICogICAgICBvYmplY3QuIFRvIGJpbmQgZXZlbnRzIHRvIHRoZSBYTUxIdHRwUmVxdWVzdCBvYmplY3QsIHVzZSBgZXZlbnRIYW5kbGVyc2AuXG4gICAgICogICAgICBUaGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZCBpbiB0aGUgY29udGV4dCBvZiBhIGAkYXBwbHlgIGJsb2NrLlxuICAgICAqICAgIC0gKip4c3JmSGVhZGVyTmFtZSoqIOKAkyBge3N0cmluZ31gIOKAkyBOYW1lIG9mIEhUVFAgaGVhZGVyIHRvIHBvcHVsYXRlIHdpdGggdGhlIFhTUkYgdG9rZW4uXG4gICAgICogICAgLSAqKnhzcmZDb29raWVOYW1lKiog4oCTIGB7c3RyaW5nfWAg4oCTIE5hbWUgb2YgY29va2llIGNvbnRhaW5pbmcgdGhlIFhTUkYgdG9rZW4uXG4gICAgICogICAgLSAqKnRyYW5zZm9ybVJlcXVlc3QqKiDigJNcbiAgICAgKiAgICAgIGB7ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcil8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpPn1gIOKAk1xuICAgICAqICAgICAgdHJhbnNmb3JtIGZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIHN1Y2ggZnVuY3Rpb25zLiBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHRha2VzIHRoZSBodHRwXG4gICAgICogICAgICByZXF1ZXN0IGJvZHkgYW5kIGhlYWRlcnMgYW5kIHJldHVybnMgaXRzIHRyYW5zZm9ybWVkICh0eXBpY2FsbHkgc2VyaWFsaXplZCkgdmVyc2lvbi5cbiAgICAgKiAgICAgIFNlZSB7QGxpbmsgbmcuJGh0dHAjb3ZlcnJpZGluZy10aGUtZGVmYXVsdC10cmFuc2Zvcm1hdGlvbnMtcGVyLXJlcXVlc3RcbiAgICAgKiAgICAgIE92ZXJyaWRpbmcgdGhlIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zfVxuICAgICAqICAgIC0gKip0cmFuc2Zvcm1SZXNwb25zZSoqIOKAk1xuICAgICAqICAgICAgYHtmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpfEFycmF5LjxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpPn1gIOKAk1xuICAgICAqICAgICAgdHJhbnNmb3JtIGZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIHN1Y2ggZnVuY3Rpb25zLiBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHRha2VzIHRoZSBodHRwXG4gICAgICogICAgICByZXNwb25zZSBib2R5LCBoZWFkZXJzIGFuZCBzdGF0dXMgYW5kIHJldHVybnMgaXRzIHRyYW5zZm9ybWVkICh0eXBpY2FsbHkgZGVzZXJpYWxpemVkKSB2ZXJzaW9uLlxuICAgICAqICAgICAgU2VlIHtAbGluayBuZy4kaHR0cCNvdmVycmlkaW5nLXRoZS1kZWZhdWx0LXRyYW5zZm9ybWF0aW9ucy1wZXItcmVxdWVzdFxuICAgICAqICAgICAgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnN9XG4gICAgICogICAgLSAqKnBhcmFtU2VyaWFsaXplcioqIC0gYHtzdHJpbmd8ZnVuY3Rpb24oT2JqZWN0PHN0cmluZyxzdHJpbmc+KTpzdHJpbmd9YCAtIEEgZnVuY3Rpb24gdXNlZCB0b1xuICAgICAqICAgICAgcHJlcGFyZSB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHJlcXVlc3QgcGFyYW1ldGVycyAoc3BlY2lmaWVkIGFzIGFuIG9iamVjdCkuXG4gICAgICogICAgICBJZiBzcGVjaWZpZWQgYXMgc3RyaW5nLCBpdCBpcyBpbnRlcnByZXRlZCBhcyBmdW5jdGlvbiByZWdpc3RlcmVkIHdpdGggdGhlXG4gICAgICogICAgICB7QGxpbmsgJGluamVjdG9yICRpbmplY3Rvcn0sIHdoaWNoIG1lYW5zIHlvdSBjYW4gY3JlYXRlIHlvdXIgb3duIHNlcmlhbGl6ZXJcbiAgICAgKiAgICAgIGJ5IHJlZ2lzdGVyaW5nIGl0IGFzIGEge0BsaW5rIGF1dG8uJHByb3ZpZGUjc2VydmljZSBzZXJ2aWNlfS5cbiAgICAgKiAgICAgIFRoZSBkZWZhdWx0IHNlcmlhbGl6ZXIgaXMgdGhlIHtAbGluayAkaHR0cFBhcmFtU2VyaWFsaXplciAkaHR0cFBhcmFtU2VyaWFsaXplcn07XG4gICAgICogICAgICBhbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHVzZSB0aGUge0BsaW5rICRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlICRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlfVxuICAgICAqICAgIC0gKipjYWNoZSoqIOKAkyBge2Jvb2xlYW58T2JqZWN0fWAg4oCTIEEgYm9vbGVhbiB2YWx1ZSBvciBvYmplY3QgY3JlYXRlZCB3aXRoXG4gICAgICogICAgICB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9IHRvIGVuYWJsZSBvciBkaXNhYmxlIGNhY2hpbmcgb2YgdGhlIEhUVFAgcmVzcG9uc2UuXG4gICAgICogICAgICBTZWUge0BsaW5rICRodHRwI2NhY2hpbmcgJGh0dHAgQ2FjaGluZ30gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICogICAgLSAqKnRpbWVvdXQqKiDigJMgYHtudW1iZXJ8UHJvbWlzZX1gIOKAkyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcywgb3Ige0BsaW5rIG5nLiRxIHByb21pc2V9XG4gICAgICogICAgICB0aGF0IHNob3VsZCBhYm9ydCB0aGUgcmVxdWVzdCB3aGVuIHJlc29sdmVkLlxuICAgICAqICAgIC0gKip3aXRoQ3JlZGVudGlhbHMqKiAtIGB7Ym9vbGVhbn1gIC0gd2hldGhlciB0byBzZXQgdGhlIGB3aXRoQ3JlZGVudGlhbHNgIGZsYWcgb24gdGhlXG4gICAgICogICAgICBYSFIgb2JqZWN0LiBTZWUgW3JlcXVlc3RzIHdpdGggY3JlZGVudGlhbHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0hUVFAvQWNjZXNzX2NvbnRyb2xfQ09SUyNSZXF1ZXN0c193aXRoX2NyZWRlbnRpYWxzKVxuICAgICAqICAgICAgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICogICAgLSAqKnJlc3BvbnNlVHlwZSoqIC0gYHtzdHJpbmd9YCAtIHNlZVxuICAgICAqICAgICAgW1hNTEh0dHBSZXF1ZXN0LnJlc3BvbnNlVHlwZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1hNTEh0dHBSZXF1ZXN0I3htbGh0dHByZXF1ZXN0LXJlc3BvbnNldHlwZSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IFJldHVybnMgYSB7QGxpbmsgbmcuJHEgYFByb21pc2V9YCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgdG8gYSByZXNwb25zZSBvYmplY3RcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gdGhlIHJlcXVlc3Qgc3VjY2VlZHMgb3IgZmFpbHMuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE9iamVjdD59IHBlbmRpbmdSZXF1ZXN0cyBBcnJheSBvZiBjb25maWcgb2JqZWN0cyBmb3IgY3VycmVudGx5IHBlbmRpbmdcbiAgICAgKiAgIHJlcXVlc3RzLiBUaGlzIGlzIHByaW1hcmlseSBtZWFudCB0byBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG48ZXhhbXBsZSBtb2R1bGU9XCJodHRwRXhhbXBsZVwiIG5hbWU9XCJodHRwLXNlcnZpY2VcIj5cbjxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gIDxkaXYgbmctY29udHJvbGxlcj1cIkZldGNoQ29udHJvbGxlclwiPlxuICAgIDxzZWxlY3QgbmctbW9kZWw9XCJtZXRob2RcIiBhcmlhLWxhYmVsPVwiUmVxdWVzdCBtZXRob2RcIj5cbiAgICAgIDxvcHRpb24+R0VUPC9vcHRpb24+XG4gICAgICA8b3B0aW9uPkpTT05QPC9vcHRpb24+XG4gICAgPC9zZWxlY3Q+XG4gICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1cmxcIiBzaXplPVwiODBcIiBhcmlhLWxhYmVsPVwiVVJMXCIgLz5cbiAgICA8YnV0dG9uIGlkPVwiZmV0Y2hidG5cIiBuZy1jbGljaz1cImZldGNoKClcIj5mZXRjaDwvYnV0dG9uPjxicj5cbiAgICA8YnV0dG9uIGlkPVwic2FtcGxlZ2V0YnRuXCIgbmctY2xpY2s9XCJ1cGRhdGVNb2RlbCgnR0VUJywgJ2h0dHAtaGVsbG8uaHRtbCcpXCI+U2FtcGxlIEdFVDwvYnV0dG9uPlxuICAgIDxidXR0b24gaWQ9XCJzYW1wbGVqc29ucGJ0blwiXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsXG4gICAgICAgICAgICAgICAgICAgICdodHRwczovL2FuZ3VsYXJqcy5vcmcvZ3JlZXQucGhwP25hbWU9U3VwZXIlMjBIZXJvJylcIj5cbiAgICAgIFNhbXBsZSBKU09OUFxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b24gaWQ9XCJpbnZhbGlkanNvbnBidG5cIlxuICAgICAgbmctY2xpY2s9XCJ1cGRhdGVNb2RlbCgnSlNPTlAnLCAnaHR0cHM6Ly9hbmd1bGFyanMub3JnL2RvZXNudGV4aXN0JylcIj5cbiAgICAgICAgSW52YWxpZCBKU09OUFxuICAgICAgPC9idXR0b24+XG4gICAgPHByZT5odHRwIHN0YXR1cyBjb2RlOiB7e3N0YXR1c319PC9wcmU+XG4gICAgPHByZT5odHRwIHJlc3BvbnNlIGRhdGE6IHt7ZGF0YX19PC9wcmU+XG4gIDwvZGl2PlxuPC9maWxlPlxuPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICBhbmd1bGFyLm1vZHVsZSgnaHR0cEV4YW1wbGUnLCBbXSlcbiAgICAuY29uZmlnKFsnJHNjZURlbGVnYXRlUHJvdmlkZXInLCBmdW5jdGlvbigkc2NlRGVsZWdhdGVQcm92aWRlcikge1xuICAgICAgLy8gV2UgbXVzdCB3aGl0ZWxpc3QgdGhlIEpTT05QIGVuZHBvaW50IHRoYXQgd2UgYXJlIHVzaW5nIHRvIHNob3cgdGhhdCB3ZSB0cnVzdCBpdFxuICAgICAgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxXaGl0ZWxpc3QoW1xuICAgICAgICAnc2VsZicsXG4gICAgICAgICdodHRwczovL2FuZ3VsYXJqcy5vcmcvKionXG4gICAgICBdKTtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignRmV0Y2hDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnLFxuICAgICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgJHNjb3BlLm1ldGhvZCA9ICdHRVQnO1xuICAgICAgICAkc2NvcGUudXJsID0gJ2h0dHAtaGVsbG8uaHRtbCc7XG5cbiAgICAgICAgJHNjb3BlLmZldGNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmNvZGUgPSBudWxsO1xuICAgICAgICAgICRzY29wZS5yZXNwb25zZSA9IG51bGw7XG5cbiAgICAgICAgICAkaHR0cCh7bWV0aG9kOiAkc2NvcGUubWV0aG9kLCB1cmw6ICRzY29wZS51cmwsIGNhY2hlOiAkdGVtcGxhdGVDYWNoZX0pLlxuICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHJlc3BvbnNlLmRhdGEgfHwgJ1JlcXVlc3QgZmFpbGVkJztcbiAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbihtZXRob2QsIHVybCkge1xuICAgICAgICAgICRzY29wZS5tZXRob2QgPSBtZXRob2Q7XG4gICAgICAgICAgJHNjb3BlLnVybCA9IHVybDtcbiAgICAgICAgfTtcbiAgICAgIH1dKTtcbjwvZmlsZT5cbjxmaWxlIG5hbWU9XCJodHRwLWhlbGxvLmh0bWxcIj5cbiAgSGVsbG8sICRodHRwIVxuPC9maWxlPlxuPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICB2YXIgc3RhdHVzID0gZWxlbWVudChieS5iaW5kaW5nKCdzdGF0dXMnKSk7XG4gIHZhciBkYXRhID0gZWxlbWVudChieS5iaW5kaW5nKCdkYXRhJykpO1xuICB2YXIgZmV0Y2hCdG4gPSBlbGVtZW50KGJ5LmlkKCdmZXRjaGJ0bicpKTtcbiAgdmFyIHNhbXBsZUdldEJ0biA9IGVsZW1lbnQoYnkuaWQoJ3NhbXBsZWdldGJ0bicpKTtcbiAgdmFyIGludmFsaWRKc29ucEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2ludmFsaWRqc29ucGJ0bicpKTtcblxuICBpdCgnc2hvdWxkIG1ha2UgYW4geGhyIEdFVCByZXF1ZXN0JywgZnVuY3Rpb24oKSB7XG4gICAgc2FtcGxlR2V0QnRuLmNsaWNrKCk7XG4gICAgZmV0Y2hCdG4uY2xpY2soKTtcbiAgICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMjAwJyk7XG4gICAgZXhwZWN0KGRhdGEuZ2V0VGV4dCgpKS50b01hdGNoKC9IZWxsbywgXFwkaHR0cCEvKTtcbiAgfSk7XG5cbi8vIENvbW1lbnRlZCBvdXQgZHVlIHRvIGZsYWtlcy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzkxODVcbi8vIGl0KCdzaG91bGQgbWFrZSBhIEpTT05QIHJlcXVlc3QgdG8gYW5ndWxhcmpzLm9yZycsIGZ1bmN0aW9uKCkge1xuLy8gICB2YXIgc2FtcGxlSnNvbnBCdG4gPSBlbGVtZW50KGJ5LmlkKCdzYW1wbGVqc29ucGJ0bicpKTtcbi8vICAgc2FtcGxlSnNvbnBCdG4uY2xpY2soKTtcbi8vICAgZmV0Y2hCdG4uY2xpY2soKTtcbi8vICAgZXhwZWN0KHN0YXR1cy5nZXRUZXh0KCkpLnRvTWF0Y2goJzIwMCcpO1xuLy8gICBleHBlY3QoZGF0YS5nZXRUZXh0KCkpLnRvTWF0Y2goL1N1cGVyIEhlcm8hLyk7XG4vLyB9KTtcblxuICBpdCgnc2hvdWxkIG1ha2UgSlNPTlAgcmVxdWVzdCB0byBpbnZhbGlkIFVSTCBhbmQgaW52b2tlIHRoZSBlcnJvciBoYW5kbGVyJyxcbiAgICAgIGZ1bmN0aW9uKCkge1xuICAgIGludmFsaWRKc29ucEJ0bi5jbGljaygpO1xuICAgIGZldGNoQnRuLmNsaWNrKCk7XG4gICAgZXhwZWN0KHN0YXR1cy5nZXRUZXh0KCkpLnRvTWF0Y2goJzAnKTtcbiAgICBleHBlY3QoZGF0YS5nZXRUZXh0KCkpLnRvTWF0Y2goJ1JlcXVlc3QgZmFpbGVkJyk7XG4gIH0pO1xuPC9maWxlPlxuPC9leGFtcGxlPlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICRodHRwKHJlcXVlc3RDb25maWcpIHtcblxuICAgICAgaWYgKCFpc09iamVjdChyZXF1ZXN0Q29uZmlnKSkge1xuICAgICAgICB0aHJvdyBtaW5FcnIoJyRodHRwJykoJ2JhZHJlcScsICdIdHRwIHJlcXVlc3QgY29uZmlndXJhdGlvbiBtdXN0IGJlIGFuIG9iamVjdC4gIFJlY2VpdmVkOiB7MH0nLCByZXF1ZXN0Q29uZmlnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc1N0cmluZygkc2NlLnZhbHVlT2YocmVxdWVzdENvbmZpZy51cmwpKSkge1xuICAgICAgICB0aHJvdyBtaW5FcnIoJyRodHRwJykoJ2JhZHJlcScsICdIdHRwIHJlcXVlc3QgY29uZmlndXJhdGlvbiB1cmwgbXVzdCBiZSBhIHN0cmluZyBvciBhICRzY2UgdHJ1c3RlZCBvYmplY3QuICBSZWNlaXZlZDogezB9JywgcmVxdWVzdENvbmZpZy51cmwpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29uZmlnID0gZXh0ZW5kKHtcbiAgICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdCxcbiAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2U6IGRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgICBwYXJhbVNlcmlhbGl6ZXI6IGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplcixcbiAgICAgICAganNvbnBDYWxsYmFja1BhcmFtOiBkZWZhdWx0cy5qc29ucENhbGxiYWNrUGFyYW1cbiAgICAgIH0sIHJlcXVlc3RDb25maWcpO1xuXG4gICAgICBjb25maWcuaGVhZGVycyA9IG1lcmdlSGVhZGVycyhyZXF1ZXN0Q29uZmlnKTtcbiAgICAgIGNvbmZpZy5tZXRob2QgPSB1cHBlcmNhc2UoY29uZmlnLm1ldGhvZCk7XG4gICAgICBjb25maWcucGFyYW1TZXJpYWxpemVyID0gaXNTdHJpbmcoY29uZmlnLnBhcmFtU2VyaWFsaXplcikgP1xuICAgICAgICAgICRpbmplY3Rvci5nZXQoY29uZmlnLnBhcmFtU2VyaWFsaXplcikgOiBjb25maWcucGFyYW1TZXJpYWxpemVyO1xuXG4gICAgICAkYnJvd3Nlci4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50KCk7XG5cbiAgICAgIHZhciByZXF1ZXN0SW50ZXJjZXB0b3JzID0gW107XG4gICAgICB2YXIgcmVzcG9uc2VJbnRlcmNlcHRvcnMgPSBbXTtcbiAgICAgIHZhciBwcm9taXNlID0gJHEucmVzb2x2ZShjb25maWcpO1xuXG4gICAgICAvLyBhcHBseSBpbnRlcmNlcHRvcnNcbiAgICAgIGZvckVhY2gocmV2ZXJzZWRJbnRlcmNlcHRvcnMsIGZ1bmN0aW9uKGludGVyY2VwdG9yKSB7XG4gICAgICAgIGlmIChpbnRlcmNlcHRvci5yZXF1ZXN0IHx8IGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcikge1xuICAgICAgICAgIHJlcXVlc3RJbnRlcmNlcHRvcnMudW5zaGlmdChpbnRlcmNlcHRvci5yZXF1ZXN0LCBpbnRlcmNlcHRvci5yZXF1ZXN0RXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlcmNlcHRvci5yZXNwb25zZSB8fCBpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKSB7XG4gICAgICAgICAgcmVzcG9uc2VJbnRlcmNlcHRvcnMucHVzaChpbnRlcmNlcHRvci5yZXNwb25zZSwgaW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBwcm9taXNlID0gY2hhaW5JbnRlcmNlcHRvcnMocHJvbWlzZSwgcmVxdWVzdEludGVyY2VwdG9ycyk7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKHNlcnZlclJlcXVlc3QpO1xuICAgICAgcHJvbWlzZSA9IGNoYWluSW50ZXJjZXB0b3JzKHByb21pc2UsIHJlc3BvbnNlSW50ZXJjZXB0b3JzKTtcbiAgICAgIHByb21pc2UgPSBwcm9taXNlLmZpbmFsbHkoY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QpO1xuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcblxuXG4gICAgICBmdW5jdGlvbiBjaGFpbkludGVyY2VwdG9ycyhwcm9taXNlLCBpbnRlcmNlcHRvcnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW50ZXJjZXB0b3JzLmxlbmd0aDsgaSA8IGlpOykge1xuICAgICAgICAgIHZhciB0aGVuRm4gPSBpbnRlcmNlcHRvcnNbaSsrXTtcbiAgICAgICAgICB2YXIgcmVqZWN0Rm4gPSBpbnRlcmNlcHRvcnNbaSsrXTtcblxuICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4odGhlbkZuLCByZWplY3RGbik7XG4gICAgICAgIH1cblxuICAgICAgICBpbnRlcmNlcHRvcnMubGVuZ3RoID0gMDtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoKSB7XG4gICAgICAgICRicm93c2VyLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Qobm9vcCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGV4ZWN1dGVIZWFkZXJGbnMoaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgIHZhciBoZWFkZXJDb250ZW50LCBwcm9jZXNzZWRIZWFkZXJzID0ge307XG5cbiAgICAgICAgZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbihoZWFkZXJGbiwgaGVhZGVyKSB7XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGVhZGVyRm4pKSB7XG4gICAgICAgICAgICBoZWFkZXJDb250ZW50ID0gaGVhZGVyRm4oY29uZmlnKTtcbiAgICAgICAgICAgIGlmIChoZWFkZXJDb250ZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgcHJvY2Vzc2VkSGVhZGVyc1toZWFkZXJdID0gaGVhZGVyQ29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc2VkSGVhZGVyc1toZWFkZXJdID0gaGVhZGVyRm47XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvY2Vzc2VkSGVhZGVycztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWVyZ2VIZWFkZXJzKGNvbmZpZykge1xuICAgICAgICB2YXIgZGVmSGVhZGVycyA9IGRlZmF1bHRzLmhlYWRlcnMsXG4gICAgICAgICAgICByZXFIZWFkZXJzID0gZXh0ZW5kKHt9LCBjb25maWcuaGVhZGVycyksXG4gICAgICAgICAgICBkZWZIZWFkZXJOYW1lLCBsb3dlcmNhc2VEZWZIZWFkZXJOYW1lLCByZXFIZWFkZXJOYW1lO1xuXG4gICAgICAgIGRlZkhlYWRlcnMgPSBleHRlbmQoe30sIGRlZkhlYWRlcnMuY29tbW9uLCBkZWZIZWFkZXJzW2xvd2VyY2FzZShjb25maWcubWV0aG9kKV0pO1xuXG4gICAgICAgIC8vIHVzaW5nIGZvci1pbiBpbnN0ZWFkIG9mIGZvckVhY2ggdG8gYXZvaWQgdW5uZWNlc3NhcnkgaXRlcmF0aW9uIGFmdGVyIGhlYWRlciBoYXMgYmVlbiBmb3VuZFxuICAgICAgICBkZWZhdWx0SGVhZGVyc0l0ZXJhdGlvbjpcbiAgICAgICAgZm9yIChkZWZIZWFkZXJOYW1lIGluIGRlZkhlYWRlcnMpIHtcbiAgICAgICAgICBsb3dlcmNhc2VEZWZIZWFkZXJOYW1lID0gbG93ZXJjYXNlKGRlZkhlYWRlck5hbWUpO1xuXG4gICAgICAgICAgZm9yIChyZXFIZWFkZXJOYW1lIGluIHJlcUhlYWRlcnMpIHtcbiAgICAgICAgICAgIGlmIChsb3dlcmNhc2UocmVxSGVhZGVyTmFtZSkgPT09IGxvd2VyY2FzZURlZkhlYWRlck5hbWUpIHtcbiAgICAgICAgICAgICAgY29udGludWUgZGVmYXVsdEhlYWRlcnNJdGVyYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVxSGVhZGVyc1tkZWZIZWFkZXJOYW1lXSA9IGRlZkhlYWRlcnNbZGVmSGVhZGVyTmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBleGVjdXRlIGlmIGhlYWRlciB2YWx1ZSBpcyBhIGZ1bmN0aW9uIGZvciBtZXJnZWQgaGVhZGVyc1xuICAgICAgICByZXR1cm4gZXhlY3V0ZUhlYWRlckZucyhyZXFIZWFkZXJzLCBzaGFsbG93Q29weShjb25maWcpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2VydmVyUmVxdWVzdChjb25maWcpIHtcbiAgICAgICAgdmFyIGhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcbiAgICAgICAgdmFyIHJlcURhdGEgPSB0cmFuc2Zvcm1EYXRhKGNvbmZpZy5kYXRhLCBoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLCB1bmRlZmluZWQsIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0KTtcblxuICAgICAgICAvLyBzdHJpcCBjb250ZW50LXR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHJlcURhdGEpKSB7XG4gICAgICAgICAgZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbih2YWx1ZSwgaGVhZGVyKSB7XG4gICAgICAgICAgICBpZiAobG93ZXJjYXNlKGhlYWRlcikgPT09ICdjb250ZW50LXR5cGUnKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSBoZWFkZXJzW2hlYWRlcl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNVbmRlZmluZWQoY29uZmlnLndpdGhDcmVkZW50aWFscykgJiYgIWlzVW5kZWZpbmVkKGRlZmF1bHRzLndpdGhDcmVkZW50aWFscykpIHtcbiAgICAgICAgICBjb25maWcud2l0aENyZWRlbnRpYWxzID0gZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2VuZCByZXF1ZXN0XG4gICAgICAgIHJldHVybiBzZW5kUmVxKGNvbmZpZywgcmVxRGF0YSkudGhlbih0cmFuc2Zvcm1SZXNwb25zZSwgdHJhbnNmb3JtUmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICAvLyBtYWtlIGEgY29weSBzaW5jZSB0aGUgcmVzcG9uc2UgbXVzdCBiZSBjYWNoZWFibGVcbiAgICAgICAgdmFyIHJlc3AgPSBleHRlbmQoe30sIHJlc3BvbnNlKTtcbiAgICAgICAgcmVzcC5kYXRhID0gdHJhbnNmb3JtRGF0YShyZXNwb25zZS5kYXRhLCByZXNwb25zZS5oZWFkZXJzLCByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlKTtcbiAgICAgICAgcmV0dXJuIChpc1N1Y2Nlc3MocmVzcG9uc2Uuc3RhdHVzKSlcbiAgICAgICAgICA/IHJlc3BcbiAgICAgICAgICA6ICRxLnJlamVjdChyZXNwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkaHR0cC5wZW5kaW5nUmVxdWVzdHMgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNnZXRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBHRVRgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xUcnVzdGVkT2JqZWN0fSB1cmwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZDtcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgYSBjYWxsIHRvIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh1cmwpYC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy9zZXJ2aWNlLyRodHRwI3VzYWdlXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjZGVsZXRlXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgREVMRVRFYCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8VHJ1c3RlZE9iamVjdH0gdXJsIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyBiZWluZyByZXF1ZXN0ZWQ7XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGFuIG9iamVjdCBjcmVhdGVkIGJ5IGEgY2FsbCB0byBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKWAuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QuIFNlZSBodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcvc2VydmljZS8kaHR0cCN1c2FnZVxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2hlYWRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBIRUFEYCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8VHJ1c3RlZE9iamVjdH0gdXJsIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyBiZWluZyByZXF1ZXN0ZWQ7XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGFuIG9iamVjdCBjcmVhdGVkIGJ5IGEgY2FsbCB0byBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKWAuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QuIFNlZSBodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcvc2VydmljZS8kaHR0cCN1c2FnZVxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2pzb25wXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgSlNPTlBgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQsIHNpbmNlIEpTT05QIHJlcXVlc3RzIGFyZSBzZW5zaXRpdmUgYmVjYXVzZSB0aGUgcmVzcG9uc2UgaXMgZ2l2ZW4gZnVsbCBhY2Nlc3MgdG8gdGhlIGJyb3dzZXIsXG4gICAgICogdGhlIHVybCBtdXN0IGJlIGRlY2xhcmVkLCB2aWEge0BsaW5rICRzY2V9IGFzIGEgdHJ1c3RlZCByZXNvdXJjZSBVUkwuXG4gICAgICogWW91IGNhbiB0cnVzdCBhIFVSTCBieSBhZGRpbmcgaXQgdG8gdGhlIHdoaXRlbGlzdCB2aWFcbiAgICAgKiB7QGxpbmsgJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3QgIGAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdGB9IG9yXG4gICAgICogYnkgZXhwbGljaXRseSB0cnVzdGluZyB0aGUgVVJMIHZpYSB7QGxpbmsgJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmwgYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgfS5cbiAgICAgKlxuICAgICAqIFlvdSBzaG91bGQgYXZvaWQgZ2VuZXJhdGluZyB0aGUgVVJMIGZvciB0aGUgSlNPTlAgcmVxdWVzdCBmcm9tIHVzZXIgcHJvdmlkZWQgZGF0YS5cbiAgICAgKiBQcm92aWRlIGFkZGl0aW9uYWwgcXVlcnkgcGFyYW1ldGVycyB2aWEgYHBhcmFtc2AgcHJvcGVydHkgb2YgdGhlIGBjb25maWdgIHBhcmFtZXRlciwgcmF0aGVyIHRoYW5cbiAgICAgKiBtb2RpZnlpbmcgdGhlIFVSTCBpdHNlbGYuXG4gICAgICpcbiAgICAgKiBKU09OUCByZXF1ZXN0cyBtdXN0IHNwZWNpZnkgYSBjYWxsYmFjayB0byBiZSB1c2VkIGluIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIuIFRoaXMgY2FsbGJhY2tcbiAgICAgKiBpcyBwYXNzZWQgYXMgYSBxdWVyeSBwYXJhbWV0ZXIgaW4gdGhlIHJlcXVlc3QuIFlvdSBtdXN0IHNwZWNpZnkgdGhlIG5hbWUgb2YgdGhpcyBwYXJhbWV0ZXIgYnlcbiAgICAgKiBzZXR0aW5nIHRoZSBganNvbnBDYWxsYmFja1BhcmFtYCBwcm9wZXJ0eSBvbiB0aGUgcmVxdWVzdCBjb25maWcgb2JqZWN0LlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogJGh0dHAuanNvbnAoJ3NvbWUvdHJ1c3RlZC91cmwnLCB7anNvbnBDYWxsYmFja1BhcmFtOiAnY2FsbGJhY2snfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYWxzbyBzcGVjaWZ5IGEgZGVmYXVsdCBjYWxsYmFjayBwYXJhbWV0ZXIgbmFtZSBpbiBgJGh0dHAuZGVmYXVsdHMuanNvbnBDYWxsYmFja1BhcmFtYC5cbiAgICAgKiBJbml0aWFsbHkgdGhpcyBpcyBzZXQgdG8gYCdjYWxsYmFjaydgLlxuICAgICAqXG4gICAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiPlxuICAgICAqIFlvdSBjYW4gbm8gbG9uZ2VyIHVzZSB0aGUgYEpTT05fQ0FMTEJBQ0tgIHN0cmluZyBhcyBhIHBsYWNlaG9sZGVyIGZvciBzcGVjaWZ5aW5nIHdoZXJlIHRoZSBjYWxsYmFja1xuICAgICAqIHBhcmFtZXRlciB2YWx1ZSBzaG91bGQgZ28uXG4gICAgICogPC9kaXY+XG4gICAgICpcbiAgICAgKiBJZiB5b3Ugd291bGQgbGlrZSB0byBjdXN0b21pc2Ugd2hlcmUgYW5kIGhvdyB0aGUgY2FsbGJhY2tzIGFyZSBzdG9yZWQgdGhlbiB0cnkgb3ZlcnJpZGluZ1xuICAgICAqIG9yIGRlY29yYXRpbmcgdGhlIHtAbGluayAkanNvbnBDYWxsYmFja3N9IHNlcnZpY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xUcnVzdGVkT2JqZWN0fSB1cmwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZDtcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgYSBjYWxsIHRvIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh1cmwpYC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy9zZXJ2aWNlLyRodHRwI3VzYWdlXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICovXG4gICAgY3JlYXRlU2hvcnRNZXRob2RzKCdnZXQnLCAnZGVsZXRlJywgJ2hlYWQnLCAnanNvbnAnKTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNwb3N0XG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgUE9TVGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBkYXRhIFJlcXVlc3QgY29udGVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUgaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJGh0dHAjdXNhZ2VcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNwdXRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBQVVRgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBSZXF1ZXN0IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy9zZXJ2aWNlLyRodHRwI3VzYWdlXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICovXG5cbiAgICAgLyoqXG4gICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICogQG5hbWUgJGh0dHAjcGF0Y2hcbiAgICAgICpcbiAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBQQVRDSGAgcmVxdWVzdC5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcbiAgICAgICogQHBhcmFtIHsqfSBkYXRhIFJlcXVlc3QgY29udGVudFxuICAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy9zZXJ2aWNlLyRodHRwI3VzYWdlXG4gICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxuICAgICAgKi9cbiAgICBjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YSgncG9zdCcsICdwdXQnLCAncGF0Y2gnKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgICAqIEBuYW1lICRodHRwI2RlZmF1bHRzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBSdW50aW1lIGVxdWl2YWxlbnQgb2YgdGhlIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzYCBwcm9wZXJ0eS4gQWxsb3dzIGNvbmZpZ3VyYXRpb24gb2ZcbiAgICAgICAgICogZGVmYXVsdCBoZWFkZXJzLCB3aXRoQ3JlZGVudGlhbHMgYXMgd2VsbCBhcyByZXF1ZXN0IGFuZCByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNlZSBcIlNldHRpbmcgSFRUUCBIZWFkZXJzXCIgYW5kIFwiVHJhbnNmb3JtaW5nIFJlcXVlc3RzIGFuZCBSZXNwb25zZXNcIiBzZWN0aW9ucyBhYm92ZS5cbiAgICAgICAgICovXG4gICAgJGh0dHAuZGVmYXVsdHMgPSBkZWZhdWx0cztcblxuXG4gICAgcmV0dXJuICRodHRwO1xuXG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTaG9ydE1ldGhvZHMobmFtZXMpIHtcbiAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICRodHRwW25hbWVdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICAgICAgICByZXR1cm4gJGh0dHAoZXh0ZW5kKHt9LCBjb25maWcgfHwge30sIHtcbiAgICAgICAgICAgIG1ldGhvZDogbmFtZSxcbiAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YShuYW1lKSB7XG4gICAgICBmb3JFYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAkaHR0cFtuYW1lXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKGV4dGVuZCh7fSwgY29uZmlnIHx8IHt9LCB7XG4gICAgICAgICAgICBtZXRob2Q6IG5hbWUsXG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIE1ha2VzIHRoZSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogISEhIEFDQ0VTU0VTIENMT1NVUkUgVkFSUzpcbiAgICAgKiAkaHR0cEJhY2tlbmQsIGRlZmF1bHRzLCAkbG9nLCAkcm9vdFNjb3BlLCBkZWZhdWx0Q2FjaGUsICRodHRwLnBlbmRpbmdSZXF1ZXN0c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNlbmRSZXEoY29uZmlnLCByZXFEYXRhKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpLFxuICAgICAgICAgIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICAgIGNhY2hlLFxuICAgICAgICAgIGNhY2hlZFJlc3AsXG4gICAgICAgICAgcmVxSGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgIGlzSnNvbnAgPSBsb3dlcmNhc2UoY29uZmlnLm1ldGhvZCkgPT09ICdqc29ucCcsXG4gICAgICAgICAgdXJsID0gY29uZmlnLnVybDtcblxuICAgICAgaWYgKGlzSnNvbnApIHtcbiAgICAgICAgLy8gSlNPTlAgaXMgYSBwcmV0dHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB3aGVyZSB3ZSdyZSBhbGxvd2luZyBhIHNjcmlwdCB0byBoYXZlIGZ1bGwgYWNjZXNzIHRvXG4gICAgICAgIC8vIG91ciBET00gYW5kIEpTIHNwYWNlLiAgU28gd2UgcmVxdWlyZSB0aGF0IHRoZSBVUkwgc2F0aXNmaWVzIFNDRS5SRVNPVVJDRV9VUkwuXG4gICAgICAgIHVybCA9ICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHVybCk7XG4gICAgICB9IGVsc2UgaWYgKCFpc1N0cmluZyh1cmwpKSB7XG4gICAgICAgIC8vIElmIGl0IGlzIG5vdCBhIHN0cmluZyB0aGVuIHRoZSBVUkwgbXVzdCBiZSBhICRzY2UgdHJ1c3RlZCBvYmplY3RcbiAgICAgICAgdXJsID0gJHNjZS52YWx1ZU9mKHVybCk7XG4gICAgICB9XG5cbiAgICAgIHVybCA9IGJ1aWxkVXJsKHVybCwgY29uZmlnLnBhcmFtU2VyaWFsaXplcihjb25maWcucGFyYW1zKSk7XG5cbiAgICAgIGlmIChpc0pzb25wKSB7XG4gICAgICAgIC8vIENoZWNrIHRoZSB1cmwgYW5kIGFkZCB0aGUgSlNPTlAgY2FsbGJhY2sgcGxhY2Vob2xkZXJcbiAgICAgICAgdXJsID0gc2FuaXRpemVKc29ucENhbGxiYWNrUGFyYW0odXJsLCBjb25maWcuanNvbnBDYWxsYmFja1BhcmFtKTtcbiAgICAgIH1cblxuICAgICAgJGh0dHAucGVuZGluZ1JlcXVlc3RzLnB1c2goY29uZmlnKTtcbiAgICAgIHByb21pc2UudGhlbihyZW1vdmVQZW5kaW5nUmVxLCByZW1vdmVQZW5kaW5nUmVxKTtcblxuICAgICAgaWYgKChjb25maWcuY2FjaGUgfHwgZGVmYXVsdHMuY2FjaGUpICYmIGNvbmZpZy5jYWNoZSAhPT0gZmFsc2UgJiZcbiAgICAgICAgICAoY29uZmlnLm1ldGhvZCA9PT0gJ0dFVCcgfHwgY29uZmlnLm1ldGhvZCA9PT0gJ0pTT05QJykpIHtcbiAgICAgICAgY2FjaGUgPSBpc09iamVjdChjb25maWcuY2FjaGUpID8gY29uZmlnLmNhY2hlXG4gICAgICAgICAgICA6IGlzT2JqZWN0KC8qKiBAdHlwZSB7P30gKi8gKGRlZmF1bHRzKS5jYWNoZSlcbiAgICAgICAgICAgICAgPyAvKiogQHR5cGUgez99ICovIChkZWZhdWx0cykuY2FjaGVcbiAgICAgICAgICAgICAgOiBkZWZhdWx0Q2FjaGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICBjYWNoZWRSZXNwID0gY2FjaGUuZ2V0KHVybCk7XG4gICAgICAgIGlmIChpc0RlZmluZWQoY2FjaGVkUmVzcCkpIHtcbiAgICAgICAgICBpZiAoaXNQcm9taXNlTGlrZShjYWNoZWRSZXNwKSkge1xuICAgICAgICAgICAgLy8gY2FjaGVkIHJlcXVlc3QgaGFzIGFscmVhZHkgYmVlbiBzZW50LCBidXQgdGhlcmUgaXMgbm8gcmVzcG9uc2UgeWV0XG4gICAgICAgICAgICBjYWNoZWRSZXNwLnRoZW4ocmVzb2x2ZVByb21pc2VXaXRoUmVzdWx0LCByZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBzZXJ2aW5nIGZyb20gY2FjaGVcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGNhY2hlZFJlc3ApKSB7XG4gICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKGNhY2hlZFJlc3BbMV0sIGNhY2hlZFJlc3BbMF0sIHNoYWxsb3dDb3B5KGNhY2hlZFJlc3BbMl0pLCBjYWNoZWRSZXNwWzNdLCBjYWNoZWRSZXNwWzRdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKGNhY2hlZFJlc3AsIDIwMCwge30sICdPSycsICdjb21wbGV0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBwdXQgdGhlIHByb21pc2UgZm9yIHRoZSBub24tdHJhbnNmb3JtZWQgcmVzcG9uc2UgaW50byBjYWNoZSBhcyBhIHBsYWNlaG9sZGVyXG4gICAgICAgICAgY2FjaGUucHV0KHVybCwgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuXG4gICAgICAvLyBpZiB3ZSB3b24ndCBoYXZlIHRoZSByZXNwb25zZSBpbiBjYWNoZSwgc2V0IHRoZSB4c3JmIGhlYWRlcnMgYW5kXG4gICAgICAvLyBzZW5kIHRoZSByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kXG4gICAgICBpZiAoaXNVbmRlZmluZWQoY2FjaGVkUmVzcCkpIHtcbiAgICAgICAgdmFyIHhzcmZWYWx1ZSA9IHVybElzU2FtZU9yaWdpbihjb25maWcudXJsKVxuICAgICAgICAgICAgPyAkJGNvb2tpZVJlYWRlcigpW2NvbmZpZy54c3JmQ29va2llTmFtZSB8fCBkZWZhdWx0cy54c3JmQ29va2llTmFtZV1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgICAgcmVxSGVhZGVyc1soY29uZmlnLnhzcmZIZWFkZXJOYW1lIHx8IGRlZmF1bHRzLnhzcmZIZWFkZXJOYW1lKV0gPSB4c3JmVmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICAkaHR0cEJhY2tlbmQoY29uZmlnLm1ldGhvZCwgdXJsLCByZXFEYXRhLCBkb25lLCByZXFIZWFkZXJzLCBjb25maWcudGltZW91dCxcbiAgICAgICAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMsIGNvbmZpZy5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICBjcmVhdGVBcHBseUhhbmRsZXJzKGNvbmZpZy5ldmVudEhhbmRsZXJzKSxcbiAgICAgICAgICAgIGNyZWF0ZUFwcGx5SGFuZGxlcnMoY29uZmlnLnVwbG9hZEV2ZW50SGFuZGxlcnMpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21pc2U7XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFwcGx5SGFuZGxlcnMoZXZlbnRIYW5kbGVycykge1xuICAgICAgICBpZiAoZXZlbnRIYW5kbGVycykge1xuICAgICAgICAgIHZhciBhcHBseUhhbmRsZXJzID0ge307XG4gICAgICAgICAgZm9yRWFjaChldmVudEhhbmRsZXJzLCBmdW5jdGlvbihldmVudEhhbmRsZXIsIGtleSkge1xuICAgICAgICAgICAgYXBwbHlIYW5kbGVyc1trZXldID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgaWYgKHVzZUFwcGx5QXN5bmMpIHtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseUFzeW5jKGNhbGxFdmVudEhhbmRsZXIpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xuICAgICAgICAgICAgICAgIGNhbGxFdmVudEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShjYWxsRXZlbnRIYW5kbGVyKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGxFdmVudEhhbmRsZXIoKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRIYW5kbGVyKGV2ZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gYXBwbHlIYW5kbGVycztcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQ2FsbGJhY2sgcmVnaXN0ZXJlZCB0byAkaHR0cEJhY2tlbmQoKTpcbiAgICAgICAqICAtIGNhY2hlcyB0aGUgcmVzcG9uc2UgaWYgZGVzaXJlZFxuICAgICAgICogIC0gcmVzb2x2ZXMgdGhlIHJhdyAkaHR0cCBwcm9taXNlXG4gICAgICAgKiAgLSBjYWxscyAkYXBwbHlcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZG9uZShzdGF0dXMsIHJlc3BvbnNlLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0LCB4aHJTdGF0dXMpIHtcbiAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgaWYgKGlzU3VjY2VzcyhzdGF0dXMpKSB7XG4gICAgICAgICAgICBjYWNoZS5wdXQodXJsLCBbc3RhdHVzLCByZXNwb25zZSwgcGFyc2VIZWFkZXJzKGhlYWRlcnNTdHJpbmcpLCBzdGF0dXNUZXh0LCB4aHJTdGF0dXNdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHByb21pc2UgZnJvbSB0aGUgY2FjaGVcbiAgICAgICAgICAgIGNhY2hlLnJlbW92ZSh1cmwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVIdHRwUHJvbWlzZSgpIHtcbiAgICAgICAgICByZXNvbHZlUHJvbWlzZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0LCB4aHJTdGF0dXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZUFwcGx5QXN5bmMpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseUFzeW5jKHJlc29sdmVIdHRwUHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZUh0dHBQcm9taXNlKCk7XG4gICAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGFwcGx5KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuXG4gICAgICAvKipcbiAgICAgICAqIFJlc29sdmVzIHRoZSByYXcgJGh0dHAgcHJvbWlzZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycywgc3RhdHVzVGV4dCwgeGhyU3RhdHVzKSB7XG4gICAgICAgIC8vc3RhdHVzOiBIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlLCAwLCAtMSAoYWJvcnRlZCBieSB0aW1lb3V0IC8gcHJvbWlzZSlcbiAgICAgICAgc3RhdHVzID0gc3RhdHVzID49IC0xID8gc3RhdHVzIDogMDtcblxuICAgICAgICAoaXNTdWNjZXNzKHN0YXR1cykgPyBkZWZlcnJlZC5yZXNvbHZlIDogZGVmZXJyZWQucmVqZWN0KSh7XG4gICAgICAgICAgZGF0YTogcmVzcG9uc2UsXG4gICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgICAgaGVhZGVyczogaGVhZGVyc0dldHRlcihoZWFkZXJzKSxcbiAgICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiBzdGF0dXNUZXh0LFxuICAgICAgICAgIHhoclN0YXR1czogeGhyU3RhdHVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIHJlc29sdmVQcm9taXNlKHJlc3VsdC5kYXRhLCByZXN1bHQuc3RhdHVzLCBzaGFsbG93Q29weShyZXN1bHQuaGVhZGVycygpKSwgcmVzdWx0LnN0YXR1c1RleHQsIHJlc3VsdC54aHJTdGF0dXMpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZW1vdmVQZW5kaW5nUmVxKCkge1xuICAgICAgICB2YXIgaWR4ID0gJGh0dHAucGVuZGluZ1JlcXVlc3RzLmluZGV4T2YoY29uZmlnKTtcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpICRodHRwLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGJ1aWxkVXJsKHVybCwgc2VyaWFsaXplZFBhcmFtcykge1xuICAgICAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMubGVuZ3RoID4gMCkge1xuICAgICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpID09PSAtMSkgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgICAgIH1cbiAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2FuaXRpemVKc29ucENhbGxiYWNrUGFyYW0odXJsLCBjYktleSkge1xuICAgICAgdmFyIHBhcnRzID0gdXJsLnNwbGl0KCc/Jyk7XG4gICAgICBpZiAocGFydHMubGVuZ3RoID4gMikge1xuICAgICAgICAvLyBUaHJvdyBpZiB0aGUgdXJsIGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgYD9gIHF1ZXJ5IGluZGljYXRvclxuICAgICAgICB0aHJvdyAkaHR0cE1pbkVycignYmFkanNvbnAnLCAnSWxsZWdhbCB1c2UgbW9yZSB0aGFuIG9uZSBcIj9cIiwgaW4gdXJsLCBcInsxfVwiJywgdXJsKTtcbiAgICAgIH1cbiAgICAgIHZhciBwYXJhbXMgPSBwYXJzZUtleVZhbHVlKHBhcnRzWzFdKTtcbiAgICAgIGZvckVhY2gocGFyYW1zLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ0pTT05fQ0FMTEJBQ0snKSB7XG4gICAgICAgICAgLy8gVGhyb3cgaWYgdGhlIHVybCBhbHJlYWR5IGNvbnRhaW5zIGEgcmVmZXJlbmNlIHRvIEpTT05fQ0FMTEJBQ0tcbiAgICAgICAgICB0aHJvdyAkaHR0cE1pbkVycignYmFkanNvbnAnLCAnSWxsZWdhbCB1c2Ugb2YgSlNPTl9DQUxMQkFDSyBpbiB1cmwsIFwiezB9XCInLCB1cmwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXkgPT09IGNiS2V5KSB7XG4gICAgICAgICAgLy8gVGhyb3cgaWYgdGhlIGNhbGxiYWNrIHBhcmFtIHdhcyBhbHJlYWR5IHByb3ZpZGVkXG4gICAgICAgICAgdGhyb3cgJGh0dHBNaW5FcnIoJ2JhZGpzb25wJywgJ0lsbGVnYWwgdXNlIG9mIGNhbGxiYWNrIHBhcmFtLCBcInswfVwiLCBpbiB1cmwsIFwiezF9XCInLCBjYktleSwgdXJsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkZCBpbiB0aGUgSlNPTl9DQUxMQkFDSyBjYWxsYmFjayBwYXJhbSB2YWx1ZVxuICAgICAgdXJsICs9ICgodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEpID8gJz8nIDogJyYnKSArIGNiS2V5ICsgJz1KU09OX0NBTExCQUNLJztcblxuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG4gIH1dO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkeGhyRmFjdG9yeVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZhY3RvcnkgZnVuY3Rpb24gdXNlZCB0byBjcmVhdGUgWE1MSHR0cFJlcXVlc3Qgb2JqZWN0cy5cbiAqXG4gKiBSZXBsYWNlIG9yIGRlY29yYXRlIHRoaXMgc2VydmljZSB0byBjcmVhdGUgeW91ciBvd24gY3VzdG9tIFhNTEh0dHBSZXF1ZXN0IG9iamVjdHMuXG4gKlxuICogYGBgXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSlcbiAqIC5mYWN0b3J5KCckeGhyRmFjdG9yeScsIGZ1bmN0aW9uKCkge1xuICogICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlWGhyKG1ldGhvZCwgdXJsKSB7XG4gKiAgICAgcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3Qoe21velN5c3RlbTogdHJ1ZX0pO1xuICogICB9O1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIEhUVFAgbWV0aG9kIG9mIHRoZSByZXF1ZXN0IChHRVQsIFBPU1QsIFBVVCwgLi4pXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTCBvZiB0aGUgcmVxdWVzdC5cbiAqL1xuZnVuY3Rpb24gJHhockZhY3RvcnlQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZVhocigpIHtcbiAgICAgIHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGh0dHBCYWNrZW5kXG4gKiBAcmVxdWlyZXMgJGpzb25wQ2FsbGJhY2tzXG4gKiBAcmVxdWlyZXMgJGRvY3VtZW50XG4gKiBAcmVxdWlyZXMgJHhockZhY3RvcnlcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVFRQIGJhY2tlbmQgdXNlZCBieSB0aGUge0BsaW5rIG5nLiRodHRwIHNlcnZpY2V9IHRoYXQgZGVsZWdhdGVzIHRvXG4gKiBYTUxIdHRwUmVxdWVzdCBvYmplY3Qgb3IgSlNPTlAgYW5kIGRlYWxzIHdpdGggYnJvd3NlciBpbmNvbXBhdGliaWxpdGllcy5cbiAqXG4gKiBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gdXNlIHRoaXMgc2VydmljZSBkaXJlY3RseSwgaW5zdGVhZCB1c2UgdGhlIGhpZ2hlci1sZXZlbCBhYnN0cmFjdGlvbnM6XG4gKiB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IG9yIHtAbGluayBuZ1Jlc291cmNlLiRyZXNvdXJjZSAkcmVzb3VyY2V9LlxuICpcbiAqIER1cmluZyB0ZXN0aW5nIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgc3dhcHBlZCB3aXRoIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kIG1vY2tcbiAqICRodHRwQmFja2VuZH0gd2hpY2ggY2FuIGJlIHRyYWluZWQgd2l0aCByZXNwb25zZXMuXG4gKi9cbmZ1bmN0aW9uICRIdHRwQmFja2VuZFByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyRqc29ucENhbGxiYWNrcycsICckZG9jdW1lbnQnLCAnJHhockZhY3RvcnknLCBmdW5jdGlvbigkYnJvd3NlciwgJGpzb25wQ2FsbGJhY2tzLCAkZG9jdW1lbnQsICR4aHJGYWN0b3J5KSB7XG4gICAgcmV0dXJuIGNyZWF0ZUh0dHBCYWNrZW5kKCRicm93c2VyLCAkeGhyRmFjdG9yeSwgJGJyb3dzZXIuZGVmZXIsICRqc29ucENhbGxiYWNrcywgJGRvY3VtZW50WzBdKTtcbiAgfV07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUh0dHBCYWNrZW5kKCRicm93c2VyLCBjcmVhdGVYaHIsICRicm93c2VyRGVmZXIsIGNhbGxiYWNrcywgcmF3RG9jdW1lbnQpIHtcbiAgLy8gVE9ETyh2b2p0YSk6IGZpeCB0aGUgc2lnbmF0dXJlXG4gIHJldHVybiBmdW5jdGlvbihtZXRob2QsIHVybCwgcG9zdCwgY2FsbGJhY2ssIGhlYWRlcnMsIHRpbWVvdXQsIHdpdGhDcmVkZW50aWFscywgcmVzcG9uc2VUeXBlLCBldmVudEhhbmRsZXJzLCB1cGxvYWRFdmVudEhhbmRsZXJzKSB7XG4gICAgdXJsID0gdXJsIHx8ICRicm93c2VyLnVybCgpO1xuXG4gICAgaWYgKGxvd2VyY2FzZShtZXRob2QpID09PSAnanNvbnAnKSB7XG4gICAgICB2YXIgY2FsbGJhY2tQYXRoID0gY2FsbGJhY2tzLmNyZWF0ZUNhbGxiYWNrKHVybCk7XG4gICAgICB2YXIganNvbnBEb25lID0ganNvbnBSZXEodXJsLCBjYWxsYmFja1BhdGgsIGZ1bmN0aW9uKHN0YXR1cywgdGV4dCkge1xuICAgICAgICAvLyBqc29ucFJlcSBvbmx5IGV2ZXIgc2V0cyBzdGF0dXMgdG8gMjAwIChPSyksIDQwNCAoRVJST1IpIG9yIC0xIChXQUlUSU5HKVxuICAgICAgICB2YXIgcmVzcG9uc2UgPSAoc3RhdHVzID09PSAyMDApICYmIGNhbGxiYWNrcy5nZXRSZXNwb25zZShjYWxsYmFja1BhdGgpO1xuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIHN0YXR1cywgcmVzcG9uc2UsICcnLCB0ZXh0LCAnY29tcGxldGUnKTtcbiAgICAgICAgY2FsbGJhY2tzLnJlbW92ZUNhbGxiYWNrKGNhbGxiYWNrUGF0aCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuXG4gICAgICB2YXIgeGhyID0gY3JlYXRlWGhyKG1ldGhvZCwgdXJsKTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuICAgICAgZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiByZXF1ZXN0TG9hZGVkKCkge1xuICAgICAgICB2YXIgc3RhdHVzVGV4dCA9IHhoci5zdGF0dXNUZXh0IHx8ICcnO1xuXG4gICAgICAgIC8vIHJlc3BvbnNlVGV4dCBpcyB0aGUgb2xkLXNjaG9vbCB3YXkgb2YgcmV0cmlldmluZyByZXNwb25zZSAoc3VwcG9ydGVkIGJ5IElFOSlcbiAgICAgICAgLy8gcmVzcG9uc2UvcmVzcG9uc2VUeXBlIHByb3BlcnRpZXMgd2VyZSBpbnRyb2R1Y2VkIGluIFhIUiBMZXZlbDIgc3BlYyAoc3VwcG9ydGVkIGJ5IElFMTApXG4gICAgICAgIHZhciByZXNwb25zZSA9ICgncmVzcG9uc2UnIGluIHhocikgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBJRTkgYnVnIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xNDUwKVxuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXM7XG5cbiAgICAgICAgLy8gZml4IHN0YXR1cyBjb2RlIHdoZW4gaXQgaXMgMCAoMCBzdGF0dXMgaXMgdW5kb2N1bWVudGVkKS5cbiAgICAgICAgLy8gT2NjdXJzIHdoZW4gYWNjZXNzaW5nIGZpbGUgcmVzb3VyY2VzIG9yIG9uIEFuZHJvaWQgNC4xIHN0b2NrIGJyb3dzZXJcbiAgICAgICAgLy8gd2hpbGUgcmV0cmlldmluZyBmaWxlcyBmcm9tIGFwcGxpY2F0aW9uIGNhY2hlLlxuICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgc3RhdHVzID0gcmVzcG9uc2UgPyAyMDAgOiB1cmxSZXNvbHZlKHVybCkucHJvdG9jb2wgPT09ICdmaWxlJyA/IDQwNCA6IDA7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssXG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICByZXNwb25zZSxcbiAgICAgICAgICAgIHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxcbiAgICAgICAgICAgIHN0YXR1c1RleHQsXG4gICAgICAgICAgICAnY29tcGxldGUnKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZXF1ZXN0RXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVGhlIHJlc3BvbnNlIGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly94aHIuc3BlYy53aGF0d2cub3JnLyNyZXF1ZXN0LWVycm9yLXN0ZXBzIGFuZCBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1uZXR3b3JrLWVycm9yXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgLTEsIG51bGwsIG51bGwsICcnLCAnZXJyb3InKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZXF1ZXN0QWJvcnRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIC0xLCBudWxsLCBudWxsLCAnJywgJ2Fib3J0Jyk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgcmVxdWVzdFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVGhlIHJlc3BvbnNlIGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly94aHIuc3BlYy53aGF0d2cub3JnLyNyZXF1ZXN0LWVycm9yLXN0ZXBzIGFuZCBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1uZXR3b3JrLWVycm9yXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgLTEsIG51bGwsIG51bGwsICcnLCAndGltZW91dCcpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9uZXJyb3IgPSByZXF1ZXN0RXJyb3I7XG4gICAgICB4aHIub25hYm9ydCA9IHJlcXVlc3RBYm9ydGVkO1xuICAgICAgeGhyLm9udGltZW91dCA9IHJlcXVlc3RUaW1lb3V0O1xuXG4gICAgICBmb3JFYWNoKGV2ZW50SGFuZGxlcnMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBmb3JFYWNoKHVwbG9hZEV2ZW50SGFuZGxlcnMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh3aXRoQ3JlZGVudGlhbHMpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNwb25zZVR5cGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gV2ViS2l0IGFkZGVkIHN1cHBvcnQgZm9yIHRoZSBqc29uIHJlc3BvbnNlVHlwZSB2YWx1ZSBvbiAwOS8wMy8yMDEzXG4gICAgICAgICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTczNjQ4LiBWZXJzaW9ucyBvZiBTYWZhcmkgcHJpb3IgdG8gNyBhcmVcbiAgICAgICAgICAvLyBrbm93biB0byB0aHJvdyB3aGVuIHNldHRpbmcgdGhlIHZhbHVlIFwianNvblwiIGFzIHRoZSByZXNwb25zZSB0eXBlLiBPdGhlciBvbGRlclxuICAgICAgICAgIC8vIGJyb3dzZXJzIGltcGxlbWVudGluZyB0aGUgcmVzcG9uc2VUeXBlXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBUaGUganNvbiByZXNwb25zZSB0eXBlIGNhbiBiZSBpZ25vcmVkIGlmIG5vdCBzdXBwb3J0ZWQsIGJlY2F1c2UgSlNPTiBwYXlsb2FkcyBhcmVcbiAgICAgICAgICAvLyBwYXJzZWQgb24gdGhlIGNsaWVudC1zaWRlIHJlZ2FyZGxlc3MuXG4gICAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZChpc1VuZGVmaW5lZChwb3N0KSA/IG51bGwgOiBwb3N0KTtcbiAgICB9XG5cbiAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgIHZhciB0aW1lb3V0SWQgPSAkYnJvd3NlckRlZmVyKHRpbWVvdXRSZXF1ZXN0LCB0aW1lb3V0KTtcbiAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZUxpa2UodGltZW91dCkpIHtcbiAgICAgIHRpbWVvdXQudGhlbih0aW1lb3V0UmVxdWVzdCk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiB0aW1lb3V0UmVxdWVzdCgpIHtcbiAgICAgIGlmIChqc29ucERvbmUpIHtcbiAgICAgICAganNvbnBEb25lKCk7XG4gICAgICB9XG4gICAgICBpZiAoeGhyKSB7XG4gICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgc3RhdHVzLCByZXNwb25zZSwgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCwgeGhyU3RhdHVzKSB7XG4gICAgICAvLyBjYW5jZWwgdGltZW91dCBhbmQgc3Vic2VxdWVudCB0aW1lb3V0IHByb21pc2UgcmVzb2x1dGlvblxuICAgICAgaWYgKGlzRGVmaW5lZCh0aW1lb3V0SWQpKSB7XG4gICAgICAgICRicm93c2VyRGVmZXIuY2FuY2VsKHRpbWVvdXRJZCk7XG4gICAgICB9XG4gICAgICBqc29ucERvbmUgPSB4aHIgPSBudWxsO1xuXG4gICAgICBjYWxsYmFjayhzdGF0dXMsIHJlc3BvbnNlLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0LCB4aHJTdGF0dXMpO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBqc29ucFJlcSh1cmwsIGNhbGxiYWNrUGF0aCwgZG9uZSkge1xuICAgIHVybCA9IHVybC5yZXBsYWNlKCdKU09OX0NBTExCQUNLJywgY2FsbGJhY2tQYXRoKTtcbiAgICAvLyB3ZSBjYW4ndCB1c2UgalF1ZXJ5L2pxTGl0ZSBoZXJlIGJlY2F1c2UgalF1ZXJ5IGRvZXMgY3Jhenkgc3R1ZmYgd2l0aCBzY3JpcHQgZWxlbWVudHMsIGUuZy46XG4gICAgLy8gLSBmZXRjaGVzIGxvY2FsIHNjcmlwdHMgdmlhIFhIUiBhbmQgZXZhbHMgdGhlbVxuICAgIC8vIC0gYWRkcyBhbmQgaW1tZWRpYXRlbHkgcmVtb3ZlcyBzY3JpcHQgZWxlbWVudHMgZnJvbSB0aGUgZG9jdW1lbnRcbiAgICB2YXIgc2NyaXB0ID0gcmF3RG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JyksIGNhbGxiYWNrID0gbnVsbDtcbiAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgIHNjcmlwdC5zcmMgPSB1cmw7XG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcblxuICAgIGNhbGxiYWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHNjcmlwdC5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgY2FsbGJhY2spO1xuICAgICAgc2NyaXB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY2FsbGJhY2spO1xuICAgICAgcmF3RG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgIHZhciBzdGF0dXMgPSAtMTtcbiAgICAgIHZhciB0ZXh0ID0gJ3Vua25vd24nO1xuXG4gICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyAmJiAhY2FsbGJhY2tzLndhc0NhbGxlZChjYWxsYmFja1BhdGgpKSB7XG4gICAgICAgICAgZXZlbnQgPSB7IHR5cGU6ICdlcnJvcicgfTtcbiAgICAgICAgfVxuICAgICAgICB0ZXh0ID0gZXZlbnQudHlwZTtcbiAgICAgICAgc3RhdHVzID0gZXZlbnQudHlwZSA9PT0gJ2Vycm9yJyA/IDQwNCA6IDIwMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgZG9uZShzdGF0dXMsIHRleHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNhbGxiYWNrKTtcbiAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBjYWxsYmFjayk7XG4gICAgcmF3RG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIHJldHVybiBjYWxsYmFjaztcbiAgfVxufVxuXG52YXIgJGludGVycG9sYXRlTWluRXJyID0gYW5ndWxhci4kaW50ZXJwb2xhdGVNaW5FcnIgPSBtaW5FcnIoJyRpbnRlcnBvbGF0ZScpO1xuJGludGVycG9sYXRlTWluRXJyLnRocm93Tm9jb25jYXQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gIHRocm93ICRpbnRlcnBvbGF0ZU1pbkVycignbm9jb25jYXQnLFxuICAgICAgJ0Vycm9yIHdoaWxlIGludGVycG9sYXRpbmc6IHswfVxcblN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIGRpc2FsbG93cyAnICtcbiAgICAgICdpbnRlcnBvbGF0aW9ucyB0aGF0IGNvbmNhdGVuYXRlIG11bHRpcGxlIGV4cHJlc3Npb25zIHdoZW4gYSB0cnVzdGVkIHZhbHVlIGlzICcgK1xuICAgICAgJ3JlcXVpcmVkLiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UnLCB0ZXh0KTtcbn07XG5cbiRpbnRlcnBvbGF0ZU1pbkVyci5pbnRlcnIgPSBmdW5jdGlvbih0ZXh0LCBlcnIpIHtcbiAgcmV0dXJuICRpbnRlcnBvbGF0ZU1pbkVycignaW50ZXJyJywgJ0NhblxcJ3QgaW50ZXJwb2xhdGU6IHswfVxcbnsxfScsIHRleHQsIGVyci50b1N0cmluZygpKTtcbn07XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlclxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBVc2VkIGZvciBjb25maWd1cmluZyB0aGUgaW50ZXJwb2xhdGlvbiBtYXJrdXAuIERlZmF1bHRzIHRvIGB7e2AgYW5kIGB9fWAuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiPlxuICogVGhpcyBmZWF0dXJlIGlzIHNvbWV0aW1lcyB1c2VkIHRvIG1peCBkaWZmZXJlbnQgbWFya3VwIGxhbmd1YWdlcywgZS5nLiB0byB3cmFwIGFuIEFuZ3VsYXJKU1xuICogdGVtcGxhdGUgd2l0aGluIGEgUHl0aG9uIEppbmphIHRlbXBsYXRlIChvciBhbnkgb3RoZXIgdGVtcGxhdGUgbGFuZ3VhZ2UpLiBNaXhpbmcgdGVtcGxhdGluZ1xuICogbGFuZ3VhZ2VzIGlzICoqdmVyeSBkYW5nZXJvdXMqKi4gVGhlIGVtYmVkZGluZyB0ZW1wbGF0ZSBsYW5ndWFnZSB3aWxsIG5vdCBzYWZlbHkgZXNjYXBlIEFuZ3VsYXJKU1xuICogZXhwcmVzc2lvbnMsIHNvIGFueSB1c2VyLWNvbnRyb2xsZWQgdmFsdWVzIGluIHRoZSB0ZW1wbGF0ZSB3aWxsIGNhdXNlIENyb3NzIFNpdGUgU2NyaXB0aW5nIChYU1MpXG4gKiBzZWN1cml0eSBidWdzIVxuICogPC9kaXY+XG4gKlxuICogQGV4YW1wbGVcbjxleGFtcGxlIG5hbWU9XCJjdXN0b20taW50ZXJwb2xhdGlvbi1tYXJrdXBcIiBtb2R1bGU9XCJjdXN0b21JbnRlcnBvbGF0aW9uQXBwXCI+XG48ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuPHNjcmlwdD5cbiAgdmFyIGN1c3RvbUludGVycG9sYXRpb25BcHAgPSBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tSW50ZXJwb2xhdGlvbkFwcCcsIFtdKTtcblxuICBjdXN0b21JbnRlcnBvbGF0aW9uQXBwLmNvbmZpZyhmdW5jdGlvbigkaW50ZXJwb2xhdGVQcm92aWRlcikge1xuICAgICRpbnRlcnBvbGF0ZVByb3ZpZGVyLnN0YXJ0U3ltYm9sKCcvLycpO1xuICAgICRpbnRlcnBvbGF0ZVByb3ZpZGVyLmVuZFN5bWJvbCgnLy8nKTtcbiAgfSk7XG5cblxuICBjdXN0b21JbnRlcnBvbGF0aW9uQXBwLmNvbnRyb2xsZXIoJ0RlbW9Db250cm9sbGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmxhYmVsID0gXCJUaGlzIGJpbmRpbmcgaXMgYnJvdWdodCB5b3UgYnkgLy8gaW50ZXJwb2xhdGlvbiBzeW1ib2xzLlwiO1xuICB9KTtcbjwvc2NyaXB0PlxuPGRpdiBuZy1jb250cm9sbGVyPVwiRGVtb0NvbnRyb2xsZXIgYXMgZGVtb1wiPlxuICAgIC8vZGVtby5sYWJlbC8vXG48L2Rpdj5cbjwvZmlsZT5cbjxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgaXQoJ3Nob3VsZCBpbnRlcnBvbGF0ZSBiaW5kaW5nIHdpdGggY3VzdG9tIHN5bWJvbHMnLCBmdW5jdGlvbigpIHtcbiAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdkZW1vLmxhYmVsJykpLmdldFRleHQoKSkudG9CZSgnVGhpcyBiaW5kaW5nIGlzIGJyb3VnaHQgeW91IGJ5IC8vIGludGVycG9sYXRpb24gc3ltYm9scy4nKTtcbiAgfSk7XG48L2ZpbGU+XG48L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uICRJbnRlcnBvbGF0ZVByb3ZpZGVyKCkge1xuICB2YXIgc3RhcnRTeW1ib2wgPSAne3snO1xuICB2YXIgZW5kU3ltYm9sID0gJ319JztcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlciNzdGFydFN5bWJvbFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU3ltYm9sIHRvIGRlbm90ZSBzdGFydCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBge3tgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHZhbHVlIG5ldyB2YWx1ZSB0byBzZXQgdGhlIHN0YXJ0aW5nIHN5bWJvbCB0by5cbiAgICogQHJldHVybnMge3N0cmluZ3xzZWxmfSBSZXR1cm5zIHRoZSBzeW1ib2wgd2hlbiB1c2VkIGFzIGdldHRlciBhbmQgc2VsZiBpZiB1c2VkIGFzIHNldHRlci5cbiAgICovXG4gIHRoaXMuc3RhcnRTeW1ib2wgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgc3RhcnRTeW1ib2wgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3RhcnRTeW1ib2w7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRpbnRlcnBvbGF0ZVByb3ZpZGVyI2VuZFN5bWJvbFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU3ltYm9sIHRvIGRlbm90ZSB0aGUgZW5kIG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB9fWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdmFsdWUgbmV3IHZhbHVlIHRvIHNldCB0aGUgZW5kaW5nIHN5bWJvbCB0by5cbiAgICogQHJldHVybnMge3N0cmluZ3xzZWxmfSBSZXR1cm5zIHRoZSBzeW1ib2wgd2hlbiB1c2VkIGFzIGdldHRlciBhbmQgc2VsZiBpZiB1c2VkIGFzIHNldHRlci5cbiAgICovXG4gIHRoaXMuZW5kU3ltYm9sID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGVuZFN5bWJvbCA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbmRTeW1ib2w7XG4gICAgfVxuICB9O1xuXG5cbiAgdGhpcy4kZ2V0ID0gWyckcGFyc2UnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCAnJHNjZScsIGZ1bmN0aW9uKCRwYXJzZSwgJGV4Y2VwdGlvbkhhbmRsZXIsICRzY2UpIHtcbiAgICB2YXIgc3RhcnRTeW1ib2xMZW5ndGggPSBzdGFydFN5bWJvbC5sZW5ndGgsXG4gICAgICAgIGVuZFN5bWJvbExlbmd0aCA9IGVuZFN5bWJvbC5sZW5ndGgsXG4gICAgICAgIGVzY2FwZWRTdGFydFJlZ2V4cCA9IG5ldyBSZWdFeHAoc3RhcnRTeW1ib2wucmVwbGFjZSgvLi9nLCBlc2NhcGUpLCAnZycpLFxuICAgICAgICBlc2NhcGVkRW5kUmVnZXhwID0gbmV3IFJlZ0V4cChlbmRTeW1ib2wucmVwbGFjZSgvLi9nLCBlc2NhcGUpLCAnZycpO1xuXG4gICAgZnVuY3Rpb24gZXNjYXBlKGNoKSB7XG4gICAgICByZXR1cm4gJ1xcXFxcXFxcXFxcXCcgKyBjaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1bmVzY2FwZVRleHQodGV4dCkge1xuICAgICAgcmV0dXJuIHRleHQucmVwbGFjZShlc2NhcGVkU3RhcnRSZWdleHAsIHN0YXJ0U3ltYm9sKS5cbiAgICAgICAgcmVwbGFjZShlc2NhcGVkRW5kUmVnZXhwLCBlbmRTeW1ib2wpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IHRoaXMgaXMgdGhlIHNhbWUgYXMgdGhlIGNvbnN0YW50V2F0Y2hEZWxlZ2F0ZSBpbiBwYXJzZS5qc1xuICAgIGZ1bmN0aW9uIGNvbnN0YW50V2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBjb25zdGFudEludGVycCkge1xuICAgICAgdmFyIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24gY29uc3RhbnRJbnRlcnBvbGF0ZVdhdGNoKHNjb3BlKSB7XG4gICAgICAgIHVud2F0Y2goKTtcbiAgICAgICAgcmV0dXJuIGNvbnN0YW50SW50ZXJwKHNjb3BlKTtcbiAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSk7XG4gICAgICByZXR1cm4gdW53YXRjaDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBuYW1lICRpbnRlcnBvbGF0ZVxuICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAcmVxdWlyZXMgJHBhcnNlXG4gICAgICogQHJlcXVpcmVzICRzY2VcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogQ29tcGlsZXMgYSBzdHJpbmcgd2l0aCBtYXJrdXAgaW50byBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLiBUaGlzIHNlcnZpY2UgaXMgdXNlZCBieSB0aGVcbiAgICAgKiBIVE1MIHtAbGluayBuZy4kY29tcGlsZSAkY29tcGlsZX0gc2VydmljZSBmb3IgZGF0YSBiaW5kaW5nLiBTZWVcbiAgICAgKiB7QGxpbmsgbmcuJGludGVycG9sYXRlUHJvdmlkZXIgJGludGVycG9sYXRlUHJvdmlkZXJ9IGZvciBjb25maWd1cmluZyB0aGVcbiAgICAgKiBpbnRlcnBvbGF0aW9uIG1hcmt1cC5cbiAgICAgKlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIHZhciAkaW50ZXJwb2xhdGUgPSAuLi47IC8vIGluamVjdGVkXG4gICAgICogICB2YXIgZXhwID0gJGludGVycG9sYXRlKCdIZWxsbyB7e25hbWUgfCB1cHBlcmNhc2V9fSEnKTtcbiAgICAgKiAgIGV4cGVjdChleHAoe25hbWU6J0FuZ3VsYXJKUyd9KSkudG9FcXVhbCgnSGVsbG8gQU5HVUxBUiEnKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIGAkaW50ZXJwb2xhdGVgIHRha2VzIGFuIG9wdGlvbmFsIGZvdXJ0aCBhcmd1bWVudCwgYGFsbE9yTm90aGluZ2AuIElmIGBhbGxPck5vdGhpbmdgIGlzXG4gICAgICogYHRydWVgLCB0aGUgaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB3aWxsIHJldHVybiBgdW5kZWZpbmVkYCB1bmxlc3MgYWxsIGVtYmVkZGVkIGV4cHJlc3Npb25zXG4gICAgICogZXZhbHVhdGUgdG8gYSB2YWx1ZSBvdGhlciB0aGFuIGB1bmRlZmluZWRgLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIHZhciAkaW50ZXJwb2xhdGUgPSAuLi47IC8vIGluamVjdGVkXG4gICAgICogICB2YXIgY29udGV4dCA9IHtncmVldGluZzogJ0hlbGxvJywgbmFtZTogdW5kZWZpbmVkIH07XG4gICAgICpcbiAgICAgKiAgIC8vIGRlZmF1bHQgXCJmb3JnaXZpbmdcIiBtb2RlXG4gICAgICogICB2YXIgZXhwID0gJGludGVycG9sYXRlKCd7e2dyZWV0aW5nfX0ge3tuYW1lfX0hJyk7XG4gICAgICogICBleHBlY3QoZXhwKGNvbnRleHQpKS50b0VxdWFsKCdIZWxsbyAhJyk7XG4gICAgICpcbiAgICAgKiAgIC8vIFwiYWxsT3JOb3RoaW5nXCIgbW9kZVxuICAgICAqICAgZXhwID0gJGludGVycG9sYXRlKCd7e2dyZWV0aW5nfX0ge3tuYW1lfX0hJywgZmFsc2UsIG51bGwsIHRydWUpO1xuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAqICAgY29udGV4dC5uYW1lID0gJ0FuZ3VsYXJKUyc7XG4gICAgICogICBleHBlY3QoZXhwKGNvbnRleHQpKS50b0VxdWFsKCdIZWxsbyBBbmd1bGFySlMhJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBgYWxsT3JOb3RoaW5nYCBpcyB1c2VmdWwgZm9yIGludGVycG9sYXRpbmcgVVJMcy4gYG5nU3JjYCBhbmQgYG5nU3Jjc2V0YCB1c2UgdGhpcyBiZWhhdmlvci5cbiAgICAgKlxuICAgICAqICMjIyMgRXNjYXBlZCBJbnRlcnBvbGF0aW9uXG4gICAgICogJGludGVycG9sYXRlIHByb3ZpZGVzIGEgbWVjaGFuaXNtIGZvciBlc2NhcGluZyBpbnRlcnBvbGF0aW9uIG1hcmtlcnMuIFN0YXJ0IGFuZCBlbmQgbWFya2Vyc1xuICAgICAqIGNhbiBiZSBlc2NhcGVkIGJ5IHByZWNlZGluZyBlYWNoIG9mIHRoZWlyIGNoYXJhY3RlcnMgd2l0aCBhIFJFVkVSU0UgU09MSURVUyBVKzAwNUMgKGJhY2tzbGFzaCkuXG4gICAgICogSXQgd2lsbCBiZSByZW5kZXJlZCBhcyBhIHJlZ3VsYXIgc3RhcnQvZW5kIG1hcmtlciwgYW5kIHdpbGwgbm90IGJlIGludGVycHJldGVkIGFzIGFuIGV4cHJlc3Npb25cbiAgICAgKiBvciBiaW5kaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBlbmFibGVzIHdlYi1zZXJ2ZXJzIHRvIHByZXZlbnQgc2NyaXB0IGluamVjdGlvbiBhdHRhY2tzIGFuZCBkZWZhY2luZyBhdHRhY2tzLCB0byBzb21lXG4gICAgICogZGVncmVlLCB3aGlsZSBhbHNvIGVuYWJsaW5nIGNvZGUgZXhhbXBsZXMgdG8gd29yayB3aXRob3V0IHJlbHlpbmcgb24gdGhlXG4gICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ05vbkJpbmRhYmxlIG5nTm9uQmluZGFibGV9IGRpcmVjdGl2ZS5cbiAgICAgKlxuICAgICAqICoqRm9yIHNlY3VyaXR5IHB1cnBvc2VzLCBpdCBpcyBzdHJvbmdseSBlbmNvdXJhZ2VkIHRoYXQgd2ViIHNlcnZlcnMgZXNjYXBlIHVzZXItc3VwcGxpZWQgZGF0YSxcbiAgICAgKiByZXBsYWNpbmcgYW5nbGUgYnJhY2tldHMgKCZsdDssICZndDspIHdpdGggJmFtcDtsdDsgYW5kICZhbXA7Z3Q7IHJlc3BlY3RpdmVseSwgYW5kIHJlcGxhY2luZyBhbGxcbiAgICAgKiBpbnRlcnBvbGF0aW9uIHN0YXJ0L2VuZCBtYXJrZXJzIHdpdGggdGhlaXIgZXNjYXBlZCBjb3VudGVycGFydHMuKipcbiAgICAgKlxuICAgICAqIEVzY2FwZWQgaW50ZXJwb2xhdGlvbiBtYXJrZXJzIGFyZSBvbmx5IHJlcGxhY2VkIHdpdGggdGhlIGFjdHVhbCBpbnRlcnBvbGF0aW9uIG1hcmtlcnMgaW4gcmVuZGVyZWRcbiAgICAgKiBvdXRwdXQgd2hlbiB0aGUgJGludGVycG9sYXRlIHNlcnZpY2UgcHJvY2Vzc2VzIHRoZSB0ZXh0LiBTbywgZm9yIEhUTUwgZWxlbWVudHMgaW50ZXJwb2xhdGVkXG4gICAgICogYnkge0BsaW5rIG5nLiRjb21waWxlICRjb21waWxlfSwgb3Igb3RoZXJ3aXNlIGludGVycG9sYXRlZCB3aXRoIHRoZSBgbXVzdEhhdmVFeHByZXNzaW9uYCBwYXJhbWV0ZXJcbiAgICAgKiBzZXQgdG8gYHRydWVgLCB0aGUgaW50ZXJwb2xhdGVkIHRleHQgbXVzdCBjb250YWluIGFuIHVuZXNjYXBlZCBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24uIEFzIHN1Y2gsXG4gICAgICogdGhpcyBpcyB0eXBpY2FsbHkgdXNlZnVsIG9ubHkgd2hlbiB1c2VyLWRhdGEgaXMgdXNlZCBpbiByZW5kZXJpbmcgYSB0ZW1wbGF0ZSBmcm9tIHRoZSBzZXJ2ZXIsIG9yXG4gICAgICogd2hlbiBvdGhlcndpc2UgdW50cnVzdGVkIGRhdGEgaXMgdXNlZCBieSBhIGRpcmVjdGl2ZS5cbiAgICAgKlxuICAgICAqIDxleGFtcGxlIG5hbWU9XCJpbnRlcnBvbGF0aW9uXCI+XG4gICAgICogIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICogICAgPGRpdiBuZy1pbml0PVwidXNlcm5hbWU9J0EgdXNlcidcIj5cbiAgICAgKiAgICAgIDxwIG5nLWluaXQ9XCJhcHB0aXRsZT0nRXNjYXBpbmcgZGVtbydcIj57e2FwcHRpdGxlfX06IFxce1xceyB1c2VybmFtZSA9IFwiZGVmYWNlZCB2YWx1ZVwiOyBcXH1cXH1cbiAgICAgKiAgICAgICAgPC9wPlxuICAgICAqICAgICAgPHA+PHN0cm9uZz57e3VzZXJuYW1lfX08L3N0cm9uZz4gYXR0ZW1wdHMgdG8gaW5qZWN0IGNvZGUgd2hpY2ggd2lsbCBkZWZhY2UgdGhlXG4gICAgICogICAgICAgIGFwcGxpY2F0aW9uLCBidXQgZmFpbHMgdG8gYWNjb21wbGlzaCB0aGVpciB0YXNrLCBiZWNhdXNlIHRoZSBzZXJ2ZXIgaGFzIGNvcnJlY3RseVxuICAgICAqICAgICAgICBlc2NhcGVkIHRoZSBpbnRlcnBvbGF0aW9uIHN0YXJ0L2VuZCBtYXJrZXJzIHdpdGggUkVWRVJTRSBTT0xJRFVTIFUrMDA1QyAoYmFja3NsYXNoKVxuICAgICAqICAgICAgICBjaGFyYWN0ZXJzLjwvcD5cbiAgICAgKiAgICAgIDxwPkluc3RlYWQsIHRoZSByZXN1bHQgb2YgdGhlIGF0dGVtcHRlZCBzY3JpcHQgaW5qZWN0aW9uIGlzIHZpc2libGUsIGFuZCBjYW4gYmUgcmVtb3ZlZFxuICAgICAqICAgICAgICBmcm9tIHRoZSBkYXRhYmFzZSBieSBhbiBhZG1pbmlzdHJhdG9yLjwvcD5cbiAgICAgKiAgICA8L2Rpdj5cbiAgICAgKiAgPC9maWxlPlxuICAgICAqIDwvZXhhbXBsZT5cbiAgICAgKlxuICAgICAqIEBrbm93bklzc3VlXG4gICAgICogSXQgaXMgY3VycmVudGx5IG5vdCBwb3NzaWJsZSBmb3IgYW4gaW50ZXJwb2xhdGVkIGV4cHJlc3Npb24gdG8gY29udGFpbiB0aGUgaW50ZXJwb2xhdGlvbiBlbmRcbiAgICAgKiBzeW1ib2wuIEZvciBleGFtcGxlLCBge3sgJ319JyB9fWAgd2lsbCBiZSBpbmNvcnJlY3RseSBpbnRlcnByZXRlZCBhcyBge3sgJyB9fWAgKyBgJyB9fWAsIGkuZS5cbiAgICAgKiBhbiBpbnRlcnBvbGF0ZWQgZXhwcmVzc2lvbiBjb25zaXN0aW5nIG9mIGEgc2luZ2xlLXF1b3RlIChgJ2ApIGFuZCB0aGUgYCcgfX1gIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBrbm93bklzc3VlXG4gICAgICogQWxsIGRpcmVjdGl2ZXMgYW5kIGNvbXBvbmVudHMgbXVzdCB1c2UgdGhlIHN0YW5kYXJkIGB7e2AgYH19YCBpbnRlcnBvbGF0aW9uIHN5bWJvbHNcbiAgICAgKiBpbiB0aGVpciB0ZW1wbGF0ZXMuIElmIHlvdSBjaGFuZ2UgdGhlIGFwcGxpY2F0aW9uIGludGVycG9sYXRpb24gc3ltYm9scyB0aGUge0BsaW5rICRjb21waWxlfVxuICAgICAqIHNlcnZpY2Ugd2lsbCBhdHRlbXB0IHRvIGRlbm9ybWFsaXplIHRoZSBzdGFuZGFyZCBzeW1ib2xzIHRvIHRoZSBjdXN0b20gc3ltYm9scy5cbiAgICAgKiBUaGUgZGVub3JtYWxpemF0aW9uIHByb2Nlc3MgaXMgbm90IGNsZXZlciBlbm91Z2ggdG8ga25vdyBub3QgdG8gcmVwbGFjZSBpbnN0YW5jZXMgb2YgdGhlIHN0YW5kYXJkXG4gICAgICogc3ltYm9scyB3aGVyZSB0aGV5IHdvdWxkIG5vdCBub3JtYWxseSBiZSB0cmVhdGVkIGFzIGludGVycG9sYXRpb24gc3ltYm9scy4gRm9yIGV4YW1wbGUgaW4gdGhlIGZvbGxvd2luZ1xuICAgICAqIGNvZGUgc25pcHBldCB0aGUgY2xvc2luZyBicmFjZXMgb2YgdGhlIGxpdGVyYWwgb2JqZWN0IHdpbGwgZ2V0IGluY29ycmVjdGx5IGRlbm9ybWFsaXplZDpcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIDxkaXYgZGF0YS1jb250ZXh0PSd7XCJjb250ZXh0XCI6e1wiaWRcIjozLFwidHlwZVwiOlwicGFnZVwifX1cIj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZSB3b3JrYXJvdW5kIGlzIHRvIGVuc3VyZSB0aGF0IHN1Y2ggaW5zdGFuY2VzIGFyZSBzZXBhcmF0ZWQgYnkgd2hpdGVzcGFjZTpcbiAgICAgKiBgYGBcbiAgICAgKiA8ZGl2IGRhdGEtY29udGV4dD0ne1wiY29udGV4dFwiOntcImlkXCI6MyxcInR5cGVcIjpcInBhZ2VcIn0gfVwiPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvcHVsbC8xNDYxMCNpc3N1ZWNvbW1lbnQtMjE5NDAxMDk5IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHRleHQgd2l0aCBtYXJrdXAgdG8gaW50ZXJwb2xhdGUuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gbXVzdEhhdmVFeHByZXNzaW9uIGlmIHNldCB0byB0cnVlIHRoZW4gdGhlIGludGVycG9sYXRpb24gc3RyaW5nIG11c3QgaGF2ZVxuICAgICAqICAgIGVtYmVkZGVkIGV4cHJlc3Npb24gaW4gb3JkZXIgdG8gcmV0dXJuIGFuIGludGVycG9sYXRpb24gZnVuY3Rpb24uIFN0cmluZ3Mgd2l0aCBub1xuICAgICAqICAgIGVtYmVkZGVkIGV4cHJlc3Npb24gd2lsbCByZXR1cm4gbnVsbCBmb3IgdGhlIGludGVycG9sYXRpb24gZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSB0cnVzdGVkQ29udGV4dCB3aGVuIHByb3ZpZGVkLCB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gcGFzc2VzIHRoZSBpbnRlcnBvbGF0ZWRcbiAgICAgKiAgICByZXN1bHQgdGhyb3VnaCB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZChpbnRlcnBvbGF0ZWRSZXN1bHQsXG4gICAgICogICAgdHJ1c3RlZENvbnRleHQpfSBiZWZvcmUgcmV0dXJuaW5nIGl0LiAgUmVmZXIgdG8gdGhlIHtAbGluayBuZy4kc2NlICRzY2V9IHNlcnZpY2UgdGhhdFxuICAgICAqICAgIHByb3ZpZGVzIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIGZvciBkZXRhaWxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IGFsbE9yTm90aGluZyBpZiBgdHJ1ZWAsIHRoZW4gdGhlIHJldHVybmVkIGZ1bmN0aW9uIHJldHVybnMgdW5kZWZpbmVkXG4gICAgICogICAgdW5sZXNzIGFsbCBlbWJlZGRlZCBleHByZXNzaW9ucyBldmFsdWF0ZSB0byBhIHZhbHVlIG90aGVyIHRoYW4gYHVuZGVmaW5lZGAuXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQpfSBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uIHdoaWNoIGlzIHVzZWQgdG8gY29tcHV0ZSB0aGVcbiAgICAgKiAgICBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBUaGUgZnVuY3Rpb24gaGFzIHRoZXNlIHBhcmFtZXRlcnM6XG4gICAgICpcbiAgICAgKiAtIGBjb250ZXh0YDogZXZhbHVhdGlvbiBjb250ZXh0IGZvciBhbGwgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIGludGVycG9sYXRlZCB0ZXh0XG4gICAgICovXG4gICAgZnVuY3Rpb24gJGludGVycG9sYXRlKHRleHQsIG11c3RIYXZlRXhwcmVzc2lvbiwgdHJ1c3RlZENvbnRleHQsIGFsbE9yTm90aGluZykge1xuICAgICAgLy8gUHJvdmlkZSBhIHF1aWNrIGV4aXQgYW5kIHNpbXBsaWZpZWQgcmVzdWx0IGZ1bmN0aW9uIGZvciB0ZXh0IHdpdGggbm8gaW50ZXJwb2xhdGlvblxuICAgICAgaWYgKCF0ZXh0Lmxlbmd0aCB8fCB0ZXh0LmluZGV4T2Yoc3RhcnRTeW1ib2wpID09PSAtMSkge1xuICAgICAgICB2YXIgY29uc3RhbnRJbnRlcnA7XG4gICAgICAgIGlmICghbXVzdEhhdmVFeHByZXNzaW9uKSB7XG4gICAgICAgICAgdmFyIHVuZXNjYXBlZFRleHQgPSB1bmVzY2FwZVRleHQodGV4dCk7XG4gICAgICAgICAgY29uc3RhbnRJbnRlcnAgPSB2YWx1ZUZuKHVuZXNjYXBlZFRleHQpO1xuICAgICAgICAgIGNvbnN0YW50SW50ZXJwLmV4cCA9IHRleHQ7XG4gICAgICAgICAgY29uc3RhbnRJbnRlcnAuZXhwcmVzc2lvbnMgPSBbXTtcbiAgICAgICAgICBjb25zdGFudEludGVycC4kJHdhdGNoRGVsZWdhdGUgPSBjb25zdGFudFdhdGNoRGVsZWdhdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnN0YW50SW50ZXJwO1xuICAgICAgfVxuXG4gICAgICBhbGxPck5vdGhpbmcgPSAhIWFsbE9yTm90aGluZztcbiAgICAgIHZhciBzdGFydEluZGV4LFxuICAgICAgICAgIGVuZEluZGV4LFxuICAgICAgICAgIGluZGV4ID0gMCxcbiAgICAgICAgICBleHByZXNzaW9ucyA9IFtdLFxuICAgICAgICAgIHBhcnNlRm5zID0gW10sXG4gICAgICAgICAgdGV4dExlbmd0aCA9IHRleHQubGVuZ3RoLFxuICAgICAgICAgIGV4cCxcbiAgICAgICAgICBjb25jYXQgPSBbXSxcbiAgICAgICAgICBleHByZXNzaW9uUG9zaXRpb25zID0gW107XG5cbiAgICAgIHdoaWxlIChpbmRleCA8IHRleHRMZW5ndGgpIHtcbiAgICAgICAgaWYgKCgoc3RhcnRJbmRleCA9IHRleHQuaW5kZXhPZihzdGFydFN5bWJvbCwgaW5kZXgpKSAhPT0gLTEpICYmXG4gICAgICAgICAgICAgKChlbmRJbmRleCA9IHRleHQuaW5kZXhPZihlbmRTeW1ib2wsIHN0YXJ0SW5kZXggKyBzdGFydFN5bWJvbExlbmd0aCkpICE9PSAtMSkpIHtcbiAgICAgICAgICBpZiAoaW5kZXggIT09IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGNvbmNhdC5wdXNoKHVuZXNjYXBlVGV4dCh0ZXh0LnN1YnN0cmluZyhpbmRleCwgc3RhcnRJbmRleCkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZXhwID0gdGV4dC5zdWJzdHJpbmcoc3RhcnRJbmRleCArIHN0YXJ0U3ltYm9sTGVuZ3RoLCBlbmRJbmRleCk7XG4gICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChleHApO1xuICAgICAgICAgIHBhcnNlRm5zLnB1c2goJHBhcnNlKGV4cCwgcGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvcikpO1xuICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXggKyBlbmRTeW1ib2xMZW5ndGg7XG4gICAgICAgICAgZXhwcmVzc2lvblBvc2l0aW9ucy5wdXNoKGNvbmNhdC5sZW5ndGgpO1xuICAgICAgICAgIGNvbmNhdC5wdXNoKCcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB3ZSBkaWQgbm90IGZpbmQgYW4gaW50ZXJwb2xhdGlvbiwgc28gd2UgaGF2ZSB0byBhZGQgdGhlIHJlbWFpbmRlciB0byB0aGUgc2VwYXJhdG9ycyBhcnJheVxuICAgICAgICAgIGlmIChpbmRleCAhPT0gdGV4dExlbmd0aCkge1xuICAgICAgICAgICAgY29uY2F0LnB1c2godW5lc2NhcGVUZXh0KHRleHQuc3Vic3RyaW5nKGluZGV4KSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDb25jYXRlbmF0aW5nIGV4cHJlc3Npb25zIG1ha2VzIGl0IGhhcmQgdG8gcmVhc29uIGFib3V0IHdoZXRoZXIgc29tZSBjb21iaW5hdGlvbiBvZlxuICAgICAgLy8gY29uY2F0ZW5hdGVkIHZhbHVlcyBhcmUgdW5zYWZlIHRvIHVzZSBhbmQgY291bGQgZWFzaWx5IGxlYWQgdG8gWFNTLiAgQnkgcmVxdWlyaW5nIHRoYXQgYVxuICAgICAgLy8gc2luZ2xlIGV4cHJlc3Npb24gYmUgdXNlZCBmb3IgaWZyYW1lW3NyY10sIG9iamVjdFtzcmNdLCBldGMuLCB3ZSBlbnN1cmUgdGhhdCB0aGUgdmFsdWVcbiAgICAgIC8vIHRoYXQncyB1c2VkIGlzIGFzc2lnbmVkIG9yIGNvbnN0cnVjdGVkIGJ5IHNvbWUgSlMgY29kZSBzb21ld2hlcmUgdGhhdCBpcyBtb3JlIHRlc3RhYmxlIG9yXG4gICAgICAvLyBtYWtlIGl0IG9idmlvdXMgdGhhdCB5b3UgYm91bmQgdGhlIHZhbHVlIHRvIHNvbWUgdXNlciBjb250cm9sbGVkIHZhbHVlLiAgVGhpcyBoZWxwcyByZWR1Y2VcbiAgICAgIC8vIHRoZSBsb2FkIHdoZW4gYXVkaXRpbmcgZm9yIFhTUyBpc3N1ZXMuXG4gICAgICBpZiAodHJ1c3RlZENvbnRleHQgJiYgY29uY2F0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAkaW50ZXJwb2xhdGVNaW5FcnIudGhyb3dOb2NvbmNhdCh0ZXh0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFtdXN0SGF2ZUV4cHJlc3Npb24gfHwgZXhwcmVzc2lvbnMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjb21wdXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFsbE9yTm90aGluZyAmJiBpc1VuZGVmaW5lZCh2YWx1ZXNbaV0pKSByZXR1cm47XG4gICAgICAgICAgICBjb25jYXRbZXhwcmVzc2lvblBvc2l0aW9uc1tpXV0gPSB2YWx1ZXNbaV07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb25jYXQuam9pbignJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1c3RlZENvbnRleHQgP1xuICAgICAgICAgICAgJHNjZS5nZXRUcnVzdGVkKHRydXN0ZWRDb250ZXh0LCB2YWx1ZSkgOlxuICAgICAgICAgICAgJHNjZS52YWx1ZU9mKHZhbHVlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uIGludGVycG9sYXRpb25Gbihjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICB2YXIgaWkgPSBleHByZXNzaW9ucy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KGlpKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm9yICg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2ldID0gcGFyc2VGbnNbaV0oY29udGV4dCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gY29tcHV0ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKCRpbnRlcnBvbGF0ZU1pbkVyci5pbnRlcnIodGV4dCwgZXJyKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgLy8gYWxsIG9mIHRoZXNlIHByb3BlcnRpZXMgYXJlIHVuZG9jdW1lbnRlZCBmb3Igbm93XG4gICAgICAgICAgZXhwOiB0ZXh0LCAvL2p1c3QgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCByZWd1bGFyIHdhdGNoZXJzIGNyZWF0ZWQgdmlhICR3YXRjaFxuICAgICAgICAgIGV4cHJlc3Npb25zOiBleHByZXNzaW9ucyxcbiAgICAgICAgICAkJHdhdGNoRGVsZWdhdGU6IGZ1bmN0aW9uKHNjb3BlLCBsaXN0ZW5lcikge1xuICAgICAgICAgICAgdmFyIGxhc3RWYWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBzY29wZS4kd2F0Y2hHcm91cChwYXJzZUZucywgLyoqIEB0aGlzICovIGZ1bmN0aW9uIGludGVycG9sYXRlRm5XYXRjaGVyKHZhbHVlcywgb2xkVmFsdWVzKSB7XG4gICAgICAgICAgICAgIHZhciBjdXJyVmFsdWUgPSBjb21wdXRlKHZhbHVlcyk7XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgY3VyclZhbHVlLCB2YWx1ZXMgIT09IG9sZFZhbHVlcyA/IGxhc3RWYWx1ZSA6IGN1cnJWYWx1ZSwgc2NvcGUpO1xuICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBjdXJyVmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwYXJzZVN0cmluZ2lmeUludGVyY2VwdG9yKHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFsdWUgPSBnZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIGFsbE9yTm90aGluZyAmJiAhaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoJGludGVycG9sYXRlTWluRXJyLmludGVycih0ZXh0LCBlcnIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnBvbGF0ZSNzdGFydFN5bWJvbFxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIHN0YXJ0IG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB7e2AuXG4gICAgICpcbiAgICAgKiBVc2Uge0BsaW5rIG5nLiRpbnRlcnBvbGF0ZVByb3ZpZGVyI3N0YXJ0U3ltYm9sIGAkaW50ZXJwb2xhdGVQcm92aWRlci5zdGFydFN5bWJvbGB9IHRvIGNoYW5nZVxuICAgICAqIHRoZSBzeW1ib2wuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzdGFydCBzeW1ib2wuXG4gICAgICovXG4gICAgJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc3RhcnRTeW1ib2w7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnBvbGF0ZSNlbmRTeW1ib2xcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTeW1ib2wgdG8gZGVub3RlIHRoZSBlbmQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYH19YC5cbiAgICAgKlxuICAgICAqIFVzZSB7QGxpbmsgbmcuJGludGVycG9sYXRlUHJvdmlkZXIjZW5kU3ltYm9sIGAkaW50ZXJwb2xhdGVQcm92aWRlci5lbmRTeW1ib2xgfSB0byBjaGFuZ2VcbiAgICAgKiB0aGUgc3ltYm9sLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3N0cmluZ30gZW5kIHN5bWJvbC5cbiAgICAgKi9cbiAgICAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZW5kU3ltYm9sO1xuICAgIH07XG5cbiAgICByZXR1cm4gJGludGVycG9sYXRlO1xuICB9XTtcbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkSW50ZXJ2YWxQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyR3aW5kb3cnLCAnJHEnLCAnJCRxJywgJyRicm93c2VyJyxcbiAgICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAgICR3aW5kb3csICAgJHEsICAgJCRxLCAgICRicm93c2VyKSB7XG4gICAgdmFyIGludGVydmFscyA9IHt9O1xuXG5cbiAgICAgLyoqXG4gICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICAqIEBuYW1lICRpbnRlcnZhbFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogQW5ndWxhckpTJ3Mgd3JhcHBlciBmb3IgYHdpbmRvdy5zZXRJbnRlcnZhbGAuIFRoZSBgZm5gIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGV2ZXJ5IGBkZWxheWBcbiAgICAgICogbWlsbGlzZWNvbmRzLlxuICAgICAgKlxuICAgICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIHJlZ2lzdGVyaW5nIGFuIGludGVydmFsIGZ1bmN0aW9uIGlzIGEgcHJvbWlzZS4gVGhpcyBwcm9taXNlIHdpbGwgYmVcbiAgICAgICogbm90aWZpZWQgdXBvbiBlYWNoIHRpY2sgb2YgdGhlIGludGVydmFsLCBhbmQgd2lsbCBiZSByZXNvbHZlZCBhZnRlciBgY291bnRgIGl0ZXJhdGlvbnMsIG9yXG4gICAgICAqIHJ1biBpbmRlZmluaXRlbHkgaWYgYGNvdW50YCBpcyBub3QgZGVmaW5lZC4gVGhlIHZhbHVlIG9mIHRoZSBub3RpZmljYXRpb24gd2lsbCBiZSB0aGVcbiAgICAgICogbnVtYmVyIG9mIGl0ZXJhdGlvbnMgdGhhdCBoYXZlIHJ1bi5cbiAgICAgICogVG8gY2FuY2VsIGFuIGludGVydmFsLCBjYWxsIGAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpYC5cbiAgICAgICpcbiAgICAgICogSW4gdGVzdHMgeW91IGNhbiB1c2Uge0BsaW5rIG5nTW9jay4kaW50ZXJ2YWwjZmx1c2ggYCRpbnRlcnZhbC5mbHVzaChtaWxsaXMpYH0gdG9cbiAgICAgICogbW92ZSBmb3J3YXJkIGJ5IGBtaWxsaXNgIG1pbGxpc2Vjb25kcyBhbmQgdHJpZ2dlciBhbnkgZnVuY3Rpb25zIHNjaGVkdWxlZCB0byBydW4gaW4gdGhhdFxuICAgICAgKiB0aW1lLlxuICAgICAgKlxuICAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgICAgKiAqKk5vdGUqKjogSW50ZXJ2YWxzIGNyZWF0ZWQgYnkgdGhpcyBzZXJ2aWNlIG11c3QgYmUgZXhwbGljaXRseSBkZXN0cm95ZWQgd2hlbiB5b3UgYXJlIGZpbmlzaGVkXG4gICAgICAqIHdpdGggdGhlbS4gIEluIHBhcnRpY3VsYXIgdGhleSBhcmUgbm90IGF1dG9tYXRpY2FsbHkgZGVzdHJveWVkIHdoZW4gYSBjb250cm9sbGVyJ3Mgc2NvcGUgb3IgYVxuICAgICAgKiBkaXJlY3RpdmUncyBlbGVtZW50IGFyZSBkZXN0cm95ZWQuXG4gICAgICAqIFlvdSBzaG91bGQgdGFrZSB0aGlzIGludG8gY29uc2lkZXJhdGlvbiBhbmQgbWFrZSBzdXJlIHRvIGFsd2F5cyBjYW5jZWwgdGhlIGludGVydmFsIGF0IHRoZVxuICAgICAgKiBhcHByb3ByaWF0ZSBtb21lbnQuICBTZWUgdGhlIGV4YW1wbGUgYmVsb3cgZm9yIG1vcmUgZGV0YWlscyBvbiBob3cgYW5kIHdoZW4gdG8gZG8gdGhpcy5cbiAgICAgICogPC9kaXY+XG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgcmVwZWF0ZWRseS4gSWYgbm8gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICAgICogICBhcmUgcGFzc2VkIChzZWUgYmVsb3cpLCB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgaXRlcmF0aW9uIGNvdW50LlxuICAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXkgTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIGVhY2ggZnVuY3Rpb24gY2FsbC5cbiAgICAgICogQHBhcmFtIHtudW1iZXI9fSBbY291bnQ9MF0gTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdC4gSWYgbm90IHNldCwgb3IgMCwgd2lsbCByZXBlYXRcbiAgICAgICogICBpbmRlZmluaXRlbHkuXG4gICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IFtpbnZva2VBcHBseT10cnVlXSBJZiBzZXQgdG8gYGZhbHNlYCBza2lwcyBtb2RlbCBkaXJ0eSBjaGVja2luZywgb3RoZXJ3aXNlXG4gICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICAgICAgKiBAcGFyYW0gey4uLio9fSBQYXNzIGFkZGl0aW9uYWwgcGFyYW1ldGVycyB0byB0aGUgZXhlY3V0ZWQgZnVuY3Rpb24uXG4gICAgICAqIEByZXR1cm5zIHtwcm9taXNlfSBBIHByb21pc2Ugd2hpY2ggd2lsbCBiZSBub3RpZmllZCBvbiBlYWNoIGl0ZXJhdGlvbi4gSXQgd2lsbCByZXNvbHZlIG9uY2UgYWxsIGl0ZXJhdGlvbnMgb2YgdGhlIGludGVydmFsIGNvbXBsZXRlLlxuICAgICAgKlxuICAgICAgKiBAZXhhbXBsZVxuICAgICAgKiA8ZXhhbXBsZSBtb2R1bGU9XCJpbnRlcnZhbEV4YW1wbGVcIiBuYW1lPVwiaW50ZXJ2YWwtc2VydmljZVwiPlxuICAgICAgKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgKiAgIDxzY3JpcHQ+XG4gICAgICAqICAgICBhbmd1bGFyLm1vZHVsZSgnaW50ZXJ2YWxFeGFtcGxlJywgW10pXG4gICAgICAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsXG4gICAgICAqICAgICAgICAgZnVuY3Rpb24oJHNjb3BlLCAkaW50ZXJ2YWwpIHtcbiAgICAgICogICAgICAgICAgICRzY29wZS5mb3JtYXQgPSAnTS9kL3l5IGg6bW06c3MgYSc7XG4gICAgICAqICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9IDEwMDtcbiAgICAgICogICAgICAgICAgICRzY29wZS5ibG9vZF8yID0gMTIwO1xuICAgICAgKlxuICAgICAgKiAgICAgICAgICAgdmFyIHN0b3A7XG4gICAgICAqICAgICAgICAgICAkc2NvcGUuZmlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICogICAgICAgICAgICAgLy8gRG9uJ3Qgc3RhcnQgYSBuZXcgZmlnaHQgaWYgd2UgYXJlIGFscmVhZHkgZmlnaHRpbmdcbiAgICAgICogICAgICAgICAgICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZChzdG9wKSApIHJldHVybjtcbiAgICAgICpcbiAgICAgICogICAgICAgICAgICAgc3RvcCA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICogICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJsb29kXzEgPiAwICYmICRzY29wZS5ibG9vZF8yID4gMCkge1xuICAgICAgKiAgICAgICAgICAgICAgICAgJHNjb3BlLmJsb29kXzEgPSAkc2NvcGUuYmxvb2RfMSAtIDM7XG4gICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9ICRzY29wZS5ibG9vZF8yIC0gNDtcbiAgICAgICogICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgKiAgICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BGaWdodCgpO1xuICAgICAgKiAgICAgICAgICAgICAgIH1cbiAgICAgICogICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICogICAgICAgICAgIH07XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAqICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChzdG9wKSkge1xuICAgICAgKiAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcCk7XG4gICAgICAqICAgICAgICAgICAgICAgc3RvcCA9IHVuZGVmaW5lZDtcbiAgICAgICogICAgICAgICAgICAgfVxuICAgICAgKiAgICAgICAgICAgfTtcbiAgICAgICpcbiAgICAgICogICAgICAgICAgICRzY29wZS5yZXNldEZpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAqICAgICAgICAgICAgICRzY29wZS5ibG9vZF8xID0gMTAwO1xuICAgICAgKiAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9IDEyMDtcbiAgICAgICogICAgICAgICAgIH07XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgKiAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaW50ZXJ2YWwgaXMgZGVzdHJveWVkIHRvb1xuICAgICAgKiAgICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0KCk7XG4gICAgICAqICAgICAgICAgICB9KTtcbiAgICAgICogICAgICAgICB9XSlcbiAgICAgICogICAgICAgLy8gUmVnaXN0ZXIgdGhlICdteUN1cnJlbnRUaW1lJyBkaXJlY3RpdmUgZmFjdG9yeSBtZXRob2QuXG4gICAgICAqICAgICAgIC8vIFdlIGluamVjdCAkaW50ZXJ2YWwgYW5kIGRhdGVGaWx0ZXIgc2VydmljZSBzaW5jZSB0aGUgZmFjdG9yeSBtZXRob2QgaXMgREkuXG4gICAgICAqICAgICAgIC5kaXJlY3RpdmUoJ215Q3VycmVudFRpbWUnLCBbJyRpbnRlcnZhbCcsICdkYXRlRmlsdGVyJyxcbiAgICAgICogICAgICAgICBmdW5jdGlvbigkaW50ZXJ2YWwsIGRhdGVGaWx0ZXIpIHtcbiAgICAgICogICAgICAgICAgIC8vIHJldHVybiB0aGUgZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb24uIChjb21waWxlIGZ1bmN0aW9uIG5vdCBuZWVkZWQpXG4gICAgICAqICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAqICAgICAgICAgICAgIHZhciBmb3JtYXQsICAvLyBkYXRlIGZvcm1hdFxuICAgICAgKiAgICAgICAgICAgICAgICAgc3RvcFRpbWU7IC8vIHNvIHRoYXQgd2UgY2FuIGNhbmNlbCB0aGUgdGltZSB1cGRhdGVzXG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAgIC8vIHVzZWQgdG8gdXBkYXRlIHRoZSBVSVxuICAgICAgKiAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKCkge1xuICAgICAgKiAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dChkYXRlRmlsdGVyKG5ldyBEYXRlKCksIGZvcm1hdCkpO1xuICAgICAgKiAgICAgICAgICAgICB9XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAgIC8vIHdhdGNoIHRoZSBleHByZXNzaW9uLCBhbmQgdXBkYXRlIHRoZSBVSSBvbiBjaGFuZ2UuXG4gICAgICAqICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5teUN1cnJlbnRUaW1lLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgKiAgICAgICAgICAgICAgIGZvcm1hdCA9IHZhbHVlO1xuICAgICAgKiAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICAgICogICAgICAgICAgICAgfSk7XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAgIHN0b3BUaW1lID0gJGludGVydmFsKHVwZGF0ZVRpbWUsIDEwMDApO1xuICAgICAgKlxuICAgICAgKiAgICAgICAgICAgICAvLyBsaXN0ZW4gb24gRE9NIGRlc3Ryb3kgKHJlbW92YWwpIGV2ZW50LCBhbmQgY2FuY2VsIHRoZSBuZXh0IFVJIHVwZGF0ZVxuICAgICAgKiAgICAgICAgICAgICAvLyB0byBwcmV2ZW50IHVwZGF0aW5nIHRpbWUgYWZ0ZXIgdGhlIERPTSBlbGVtZW50IHdhcyByZW1vdmVkLlxuICAgICAgKiAgICAgICAgICAgICBlbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgKiAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcFRpbWUpO1xuICAgICAgKiAgICAgICAgICAgICB9KTtcbiAgICAgICogICAgICAgICAgIH1cbiAgICAgICogICAgICAgICB9XSk7XG4gICAgICAqICAgPC9zY3JpcHQ+XG4gICAgICAqXG4gICAgICAqICAgPGRpdj5cbiAgICAgICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAqICAgICAgIDxsYWJlbD5EYXRlIGZvcm1hdDogPGlucHV0IG5nLW1vZGVsPVwiZm9ybWF0XCI+PC9sYWJlbD4gPGhyLz5cbiAgICAgICogICAgICAgQ3VycmVudCB0aW1lIGlzOiA8c3BhbiBteS1jdXJyZW50LXRpbWU9XCJmb3JtYXRcIj48L3NwYW4+XG4gICAgICAqICAgICAgIDxoci8+XG4gICAgICAqICAgICAgIEJsb29kIDEgOiA8Zm9udCBjb2xvcj0ncmVkJz57e2Jsb29kXzF9fTwvZm9udD5cbiAgICAgICogICAgICAgQmxvb2QgMiA6IDxmb250IGNvbG9yPSdyZWQnPnt7Ymxvb2RfMn19PC9mb250PlxuICAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwiZmlnaHQoKVwiPkZpZ2h0PC9idXR0b24+XG4gICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJzdG9wRmlnaHQoKVwiPlN0b3BGaWdodDwvYnV0dG9uPlxuICAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwicmVzZXRGaWdodCgpXCI+cmVzZXRGaWdodDwvYnV0dG9uPlxuICAgICAgKiAgICAgPC9kaXY+XG4gICAgICAqICAgPC9kaXY+XG4gICAgICAqXG4gICAgICAqIDwvZmlsZT5cbiAgICAgICogPC9leGFtcGxlPlxuICAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnRlcnZhbChmbiwgZGVsYXksIGNvdW50LCBpbnZva2VBcHBseSkge1xuICAgICAgdmFyIGhhc1BhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0LFxuICAgICAgICAgIGFyZ3MgPSBoYXNQYXJhbXMgPyBzbGljZUFyZ3MoYXJndW1lbnRzLCA0KSA6IFtdLFxuICAgICAgICAgIHNldEludGVydmFsID0gJHdpbmRvdy5zZXRJbnRlcnZhbCxcbiAgICAgICAgICBjbGVhckludGVydmFsID0gJHdpbmRvdy5jbGVhckludGVydmFsLFxuICAgICAgICAgIGl0ZXJhdGlvbiA9IDAsXG4gICAgICAgICAgc2tpcEFwcGx5ID0gKGlzRGVmaW5lZChpbnZva2VBcHBseSkgJiYgIWludm9rZUFwcGx5KSxcbiAgICAgICAgICBkZWZlcnJlZCA9IChza2lwQXBwbHkgPyAkJHEgOiAkcSkuZGVmZXIoKSxcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgY291bnQgPSBpc0RlZmluZWQoY291bnQpID8gY291bnQgOiAwO1xuXG4gICAgICBwcm9taXNlLiQkaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgICAgIGlmIChza2lwQXBwbHkpIHtcbiAgICAgICAgICAkYnJvd3Nlci5kZWZlcihjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBkZWZlcnJlZC5ub3RpZnkoaXRlcmF0aW9uKyspO1xuXG4gICAgICAgIGlmIChjb3VudCA+IDAgJiYgaXRlcmF0aW9uID49IGNvdW50KSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpdGVyYXRpb24pO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwocHJvbWlzZS4kJGludGVydmFsSWQpO1xuICAgICAgICAgIGRlbGV0ZSBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XG5cbiAgICAgIH0sIGRlbGF5KTtcblxuICAgICAgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXSA9IGRlZmVycmVkO1xuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcblxuICAgICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgIGlmICghaGFzUGFyYW1zKSB7XG4gICAgICAgICAgZm4oaXRlcmF0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAqIEBuYW1lICRpbnRlcnZhbCNjYW5jZWxcbiAgICAgICpcbiAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge1Byb21pc2U9fSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZSBgJGludGVydmFsYCBmdW5jdGlvbi5cbiAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB0YXNrIHdhcyBzdWNjZXNzZnVsbHkgY2FuY2VsZWQuXG4gICAgICAqL1xuICAgIGludGVydmFsLmNhbmNlbCA9IGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgIGlmIChwcm9taXNlICYmIHByb21pc2UuJCRpbnRlcnZhbElkIGluIGludGVydmFscykge1xuICAgICAgICAvLyBJbnRlcnZhbCBjYW5jZWxzIHNob3VsZCBub3QgcmVwb3J0IGFzIHVuaGFuZGxlZCBwcm9taXNlLlxuICAgICAgICBtYXJrUUV4Y2VwdGlvbkhhbmRsZWQoaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXS5wcm9taXNlKTtcbiAgICAgICAgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXS5yZWplY3QoJ2NhbmNlbGVkJyk7XG4gICAgICAgICR3aW5kb3cuY2xlYXJJbnRlcnZhbChwcm9taXNlLiQkaW50ZXJ2YWxJZCk7XG4gICAgICAgIGRlbGV0ZSBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGludGVydmFsO1xuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIHNlcnZpY2UgaGFuZGxlcyB0aGUgbGlmZWN5Y2xlIG9mIGNhbGxiYWNrcyB0byBoYW5kbGUgSlNPTlAgcmVxdWVzdHMuXG4gKiBPdmVycmlkZSB0aGlzIHNlcnZpY2UgaWYgeW91IHdpc2ggdG8gY3VzdG9taXNlIHdoZXJlIHRoZSBjYWxsYmFja3MgYXJlIHN0b3JlZCBhbmRcbiAqIGhvdyB0aGV5IHZhcnkgY29tcGFyZWQgdG8gdGhlIHJlcXVlc3RlZCB1cmwuXG4gKi9cbnZhciAkanNvbnBDYWxsYmFja3NQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNhbGxiYWNrcyA9IGFuZ3VsYXIuY2FsbGJhY2tzO1xuICAgIHZhciBjYWxsYmFja01hcCA9IHt9O1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2tJZCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjYWxsYmFjay5kYXRhID0gZGF0YTtcbiAgICAgICAgY2FsbGJhY2suY2FsbGVkID0gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBjYWxsYmFjay5pZCA9IGNhbGxiYWNrSWQ7XG4gICAgICByZXR1cm4gY2FsbGJhY2s7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI2NyZWF0ZUNhbGxiYWNrXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIHRoZSB1cmwgb2YgdGhlIEpTT05QIHJlcXVlc3RcbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBjYWxsYmFjayBwYXRoIHRvIHNlbmQgdG8gdGhlIHNlcnZlciBhcyBwYXJ0IG9mIHRoZSBKU09OUCByZXF1ZXN0XG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGNyZWF0ZSBhIGNhbGxiYWNrIGFuZCBnZXQgaG9sZCBvZiB0aGUgcGF0aCB0byB0aGUgY2FsbGJhY2tcbiAgICAgICAqIHRvIHBhc3MgdG8gdGhlIHNlcnZlciwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNhbGwgdGhlIGNhbGxiYWNrIHdpdGggaXRzIHBheWxvYWQgaW4gdGhlIEpTT05QIHJlc3BvbnNlLlxuICAgICAgICovXG4gICAgICBjcmVhdGVDYWxsYmFjazogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBjYWxsYmFja0lkID0gJ18nICsgKGNhbGxiYWNrcy4kJGNvdW50ZXIrKykudG9TdHJpbmcoMzYpO1xuICAgICAgICB2YXIgY2FsbGJhY2tQYXRoID0gJ2FuZ3VsYXIuY2FsbGJhY2tzLicgKyBjYWxsYmFja0lkO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBjcmVhdGVDYWxsYmFjayhjYWxsYmFja0lkKTtcbiAgICAgICAgY2FsbGJhY2tNYXBbY2FsbGJhY2tQYXRoXSA9IGNhbGxiYWNrc1tjYWxsYmFja0lkXSA9IGNhbGxiYWNrO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tQYXRoO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI3dhc0NhbGxlZFxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrUGF0aCB0aGUgcGF0aCB0byB0aGUgY2FsbGJhY2sgdGhhdCB3YXMgc2VudCBpbiB0aGUgSlNPTlAgcmVxdWVzdFxuICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGNhbGxlZCwgYXMgYSByZXN1bHQgb2YgdGhlIEpTT05QIHJlc3BvbnNlXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGZpbmQgb3V0IHdoZXRoZXIgdGhlIEpTT05QIHJlc3BvbnNlIGFjdHVhbGx5IGNhbGxlZCB0aGVcbiAgICAgICAqIGNhbGxiYWNrIHRoYXQgd2FzIHBhc3NlZCBpbiB0aGUgcmVxdWVzdC5cbiAgICAgICAqL1xuICAgICAgd2FzQ2FsbGVkOiBmdW5jdGlvbihjYWxsYmFja1BhdGgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFwW2NhbGxiYWNrUGF0aF0uY2FsbGVkO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI2dldFJlc3BvbnNlXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbGJhY2tQYXRoIHRoZSBwYXRoIHRvIHRoZSBjYWxsYmFjayB0aGF0IHdhcyBzZW50IGluIHRoZSBKU09OUCByZXF1ZXN0XG4gICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIGRhdGEgcmVjZWl2ZWQgZnJvbSB0aGUgcmVzcG9uc2UgdmlhIHRoZSByZWdpc3RlcmVkIGNhbGxiYWNrXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGdldCBob2xkIG9mIHRoZSBkYXRhIHRoYXQgd2FzIHByb3ZpZGVkIHRvIHRoZSBjYWxsYmFja1xuICAgICAgICogaW4gdGhlIEpTT05QIHJlc3BvbnNlLlxuICAgICAgICovXG4gICAgICBnZXRSZXNwb25zZTogZnVuY3Rpb24oY2FsbGJhY2tQYXRoKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFja01hcFtjYWxsYmFja1BhdGhdLmRhdGE7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkanNvbnBDYWxsYmFja3MjcmVtb3ZlQ2FsbGJhY2tcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsYmFja1BhdGggdGhlIHBhdGggdG8gdGhlIGNhbGxiYWNrIHRoYXQgd2FzIHNlbnQgaW4gdGhlIEpTT05QIHJlcXVlc3RcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICoge0BsaW5rICRodHRwQmFja2VuZH0gY2FsbHMgdGhpcyBtZXRob2QgdG8gcmVtb3ZlIHRoZSBjYWxsYmFjayBhZnRlciB0aGUgSlNPTlAgcmVxdWVzdCBoYXNcbiAgICAgICAqIGNvbXBsZXRlZCBvciB0aW1lZC1vdXQuXG4gICAgICAgKi9cbiAgICAgIHJlbW92ZUNhbGxiYWNrOiBmdW5jdGlvbihjYWxsYmFja1BhdGgpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2tNYXBbY2FsbGJhY2tQYXRoXTtcbiAgICAgICAgZGVsZXRlIGNhbGxiYWNrc1tjYWxsYmFjay5pZF07XG4gICAgICAgIGRlbGV0ZSBjYWxsYmFja01hcFtjYWxsYmFja1BhdGhdO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbG9jYWxlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAkbG9jYWxlIHNlcnZpY2UgcHJvdmlkZXMgbG9jYWxpemF0aW9uIHJ1bGVzIGZvciB2YXJpb3VzIEFuZ3VsYXJKUyBjb21wb25lbnRzLiBBcyBvZiByaWdodCBub3cgdGhlXG4gKiBvbmx5IHB1YmxpYyBhcGkgaXM6XG4gKlxuICogKiBgaWRgIOKAkyBge3N0cmluZ31gIOKAkyBsb2NhbGUgaWQgZm9ybWF0dGVkIGFzIGBsYW5ndWFnZUlkLWNvdW50cnlJZGAgKGUuZy4gYGVuLXVzYClcbiAqL1xuXG52YXIgUEFUSF9NQVRDSCA9IC9eKFtePyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyxcbiAgICBERUZBVUxUX1BPUlRTID0geydodHRwJzogODAsICdodHRwcyc6IDQ0MywgJ2Z0cCc6IDIxfTtcbnZhciAkbG9jYXRpb25NaW5FcnIgPSBtaW5FcnIoJyRsb2NhdGlvbicpO1xuXG5cbi8qKlxuICogRW5jb2RlIHBhdGggdXNpbmcgZW5jb2RlVXJpU2VnbWVudCwgaWdub3JpbmcgZm9yd2FyZCBzbGFzaGVzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byBlbmNvZGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJyksXG4gICAgICBpID0gc2VnbWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICAvLyBkZWNvZGUgZm9yd2FyZCBzbGFzaGVzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIGRvdWJsZSBlbmNvZGVkXG4gICAgc2VnbWVudHNbaV0gPSBlbmNvZGVVcmlTZWdtZW50KHNlZ21lbnRzW2ldLnJlcGxhY2UoLyUyRi9nLCAnLycpKTtcbiAgfVxuXG4gIHJldHVybiBzZWdtZW50cy5qb2luKCcvJyk7XG59XG5cbmZ1bmN0aW9uIGRlY29kZVBhdGgocGF0aCwgaHRtbDVNb2RlKSB7XG4gIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy8nKSxcbiAgICAgIGkgPSBzZWdtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHNlZ21lbnRzW2ldID0gZGVjb2RlVVJJQ29tcG9uZW50KHNlZ21lbnRzW2ldKTtcbiAgICBpZiAoaHRtbDVNb2RlKSB7XG4gICAgICAvLyBlbmNvZGUgZm9yd2FyZCBzbGFzaGVzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIG1pc3Rha2VuIGZvciBwYXRoIHNlcGFyYXRvcnNcbiAgICAgIHNlZ21lbnRzW2ldID0gc2VnbWVudHNbaV0ucmVwbGFjZSgvXFwvL2csICclMkYnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2VnbWVudHMuam9pbignLycpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUFic29sdXRlVXJsKGFic29sdXRlVXJsLCBsb2NhdGlvbk9iaikge1xuICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZShhYnNvbHV0ZVVybCk7XG5cbiAgbG9jYXRpb25PYmouJCRwcm90b2NvbCA9IHBhcnNlZFVybC5wcm90b2NvbDtcbiAgbG9jYXRpb25PYmouJCRob3N0ID0gcGFyc2VkVXJsLmhvc3RuYW1lO1xuICBsb2NhdGlvbk9iai4kJHBvcnQgPSB0b0ludChwYXJzZWRVcmwucG9ydCkgfHwgREVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdIHx8IG51bGw7XG59XG5cbnZhciBET1VCTEVfU0xBU0hfUkVHRVggPSAvXlxccypbXFxcXC9dezIsfS87XG5mdW5jdGlvbiBwYXJzZUFwcFVybCh1cmwsIGxvY2F0aW9uT2JqLCBodG1sNU1vZGUpIHtcblxuICBpZiAoRE9VQkxFX1NMQVNIX1JFR0VYLnRlc3QodXJsKSkge1xuICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignYmFkcGF0aCcsICdJbnZhbGlkIHVybCBcInswfVwiLicsIHVybCk7XG4gIH1cblxuICB2YXIgcHJlZml4ZWQgPSAodXJsLmNoYXJBdCgwKSAhPT0gJy8nKTtcbiAgaWYgKHByZWZpeGVkKSB7XG4gICAgdXJsID0gJy8nICsgdXJsO1xuICB9XG4gIHZhciBtYXRjaCA9IHVybFJlc29sdmUodXJsKTtcbiAgdmFyIHBhdGggPSBwcmVmaXhlZCAmJiBtYXRjaC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyA/IG1hdGNoLnBhdGhuYW1lLnN1YnN0cmluZygxKSA6IG1hdGNoLnBhdGhuYW1lO1xuICBsb2NhdGlvbk9iai4kJHBhdGggPSBkZWNvZGVQYXRoKHBhdGgsIGh0bWw1TW9kZSk7XG4gIGxvY2F0aW9uT2JqLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShtYXRjaC5zZWFyY2gpO1xuICBsb2NhdGlvbk9iai4kJGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2guaGFzaCk7XG5cbiAgLy8gbWFrZSBzdXJlIHBhdGggc3RhcnRzIHdpdGggJy8nO1xuICBpZiAobG9jYXRpb25PYmouJCRwYXRoICYmIGxvY2F0aW9uT2JqLiQkcGF0aC5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgIGxvY2F0aW9uT2JqLiQkcGF0aCA9ICcvJyArIGxvY2F0aW9uT2JqLiQkcGF0aDtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdGFydHNXaXRoKHN0ciwgc2VhcmNoKSB7XG4gIHJldHVybiBzdHIuc2xpY2UoMCwgc2VhcmNoLmxlbmd0aCkgPT09IHNlYXJjaDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHJldHVybnMgdGV4dCBmcm9tIGB1cmxgIGFmdGVyIGBiYXNlYCBvciBgdW5kZWZpbmVkYCBpZiBpdCBkb2VzIG5vdCBiZWdpbiB3aXRoXG4gKiAgICAgICAgICAgICAgICAgICB0aGUgZXhwZWN0ZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBzdHJpcEJhc2VVcmwoYmFzZSwgdXJsKSB7XG4gIGlmIChzdGFydHNXaXRoKHVybCwgYmFzZSkpIHtcbiAgICByZXR1cm4gdXJsLnN1YnN0cihiYXNlLmxlbmd0aCk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHJpcEhhc2godXJsKSB7XG4gIHZhciBpbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gIHJldHVybiBpbmRleCA9PT0gLTEgPyB1cmwgOiB1cmwuc3Vic3RyKDAsIGluZGV4KTtcbn1cblxuZnVuY3Rpb24gdHJpbUVtcHR5SGFzaCh1cmwpIHtcbiAgcmV0dXJuIHVybC5yZXBsYWNlKC8oIy4rKXwjJC8sICckMScpO1xufVxuXG5cbmZ1bmN0aW9uIHN0cmlwRmlsZSh1cmwpIHtcbiAgcmV0dXJuIHVybC5zdWJzdHIoMCwgc3RyaXBIYXNoKHVybCkubGFzdEluZGV4T2YoJy8nKSArIDEpO1xufVxuXG4vKiByZXR1cm4gdGhlIHNlcnZlciBvbmx5IChzY2hlbWU6Ly9ob3N0OnBvcnQpICovXG5mdW5jdGlvbiBzZXJ2ZXJCYXNlKHVybCkge1xuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwuaW5kZXhPZignLycsIHVybC5pbmRleE9mKCcvLycpICsgMikpO1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IdG1sNVVybCByZXByZXNlbnRzIGEgVVJMXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gSFRNTDUgbW9kZSBpcyBlbmFibGVkIGFuZCBzdXBwb3J0ZWRcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZU5vRmlsZSBhcHBsaWNhdGlvbiBiYXNlIFVSTCBzdHJpcHBlZCBvZiBhbnkgZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlUHJlZml4IFVSTCBwYXRoIHByZWZpeFxuICovXG5mdW5jdGlvbiBMb2NhdGlvbkh0bWw1VXJsKGFwcEJhc2UsIGFwcEJhc2VOb0ZpbGUsIGJhc2VQcmVmaXgpIHtcbiAgdGhpcy4kJGh0bWw1ID0gdHJ1ZTtcbiAgYmFzZVByZWZpeCA9IGJhc2VQcmVmaXggfHwgJyc7XG4gIHBhcnNlQWJzb2x1dGVVcmwoYXBwQmFzZSwgdGhpcyk7XG5cblxuICAvKipcbiAgICogUGFyc2UgZ2l2ZW4gSFRNTDUgKHJlZ3VsYXIpIFVSTCBzdHJpbmcgaW50byBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSFRNTDUgVVJMXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgcGF0aFVybCA9IHN0cmlwQmFzZVVybChhcHBCYXNlTm9GaWxlLCB1cmwpO1xuICAgIGlmICghaXNTdHJpbmcocGF0aFVybCkpIHtcbiAgICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignaXB0aHByZngnLCAnSW52YWxpZCB1cmwgXCJ7MH1cIiwgbWlzc2luZyBwYXRoIHByZWZpeCBcInsxfVwiLicsIHVybCxcbiAgICAgICAgICBhcHBCYXNlTm9GaWxlKTtcbiAgICB9XG5cbiAgICBwYXJzZUFwcFVybChwYXRoVXJsLCB0aGlzLCB0cnVlKTtcblxuICAgIGlmICghdGhpcy4kJHBhdGgpIHtcbiAgICAgIHRoaXMuJCRwYXRoID0gJy8nO1xuICAgIH1cblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbXBvc2UgdXJsIGFuZCB1cGRhdGUgYGFic1VybGAgcHJvcGVydHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XG5cbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZU5vRmlsZSArIHRoaXMuJCR1cmwuc3Vic3RyKDEpOyAvLyBmaXJzdCBjaGFyIGlzIGFsd2F5cyAnLydcblxuICAgIHRoaXMuJCR1cmxVcGRhdGVkQnlMb2NhdGlvbiA9IHRydWU7XG4gIH07XG5cbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xuICAgIGlmIChyZWxIcmVmICYmIHJlbEhyZWZbMF0gPT09ICcjJykge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBsaW5rcyB0byBoYXNoIGZyYWdtZW50czpcbiAgICAgIC8vIGtlZXAgdGhlIG9sZCB1cmwgYW5kIG9ubHkgcmVwbGFjZSB0aGUgaGFzaCBmcmFnbWVudFxuICAgICAgdGhpcy5oYXNoKHJlbEhyZWYuc2xpY2UoMSkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBhcHBVcmwsIHByZXZBcHBVcmw7XG4gICAgdmFyIHJld3JpdHRlblVybDtcblxuXG4gICAgaWYgKGlzRGVmaW5lZChhcHBVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZSwgdXJsKSkpIHtcbiAgICAgIHByZXZBcHBVcmwgPSBhcHBVcmw7XG4gICAgICBpZiAoYmFzZVByZWZpeCAmJiBpc0RlZmluZWQoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGJhc2VQcmVmaXgsIGFwcFVybCkpKSB7XG4gICAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGUgKyAoc3RyaXBCYXNlVXJsKCcvJywgYXBwVXJsKSB8fCBhcHBVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZSArIHByZXZBcHBVcmw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0RlZmluZWQoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGFwcEJhc2VOb0ZpbGUsIHVybCkpKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlICsgYXBwVXJsO1xuICAgIH0gZWxzZSBpZiAoYXBwQmFzZU5vRmlsZSA9PT0gdXJsICsgJy8nKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xuICAgIH1cbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xuICB9O1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIFVSTFxuICogVGhpcyBvYmplY3QgaXMgZXhwb3NlZCBhcyAkbG9jYXRpb24gc2VydmljZSB3aGVuIGRldmVsb3BlciBkb2Vzbid0IG9wdCBpbnRvIGh0bWw1IG1vZGUuXG4gKiBJdCBhbHNvIHNlcnZlcyBhcyB0aGUgYmFzZSBjbGFzcyBmb3IgaHRtbDUgbW9kZSBmYWxsYmFjayBvbiBsZWdhY3kgYnJvd3NlcnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZSBhcHBsaWNhdGlvbiBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2VOb0ZpbGUgYXBwbGljYXRpb24gYmFzZSBVUkwgc3RyaXBwZWQgb2YgYW55IGZpbGVuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaFByZWZpeCBoYXNoYmFuZyBwcmVmaXhcbiAqL1xuZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ1VybChhcHBCYXNlLCBhcHBCYXNlTm9GaWxlLCBoYXNoUHJlZml4KSB7XG5cbiAgcGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLCB0aGlzKTtcblxuXG4gIC8qKlxuICAgKiBQYXJzZSBnaXZlbiBoYXNoYmFuZyBVUkwgaW50byBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSGFzaGJhbmcgVVJMXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgd2l0aG91dEJhc2VVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZSwgdXJsKSB8fCBzdHJpcEJhc2VVcmwoYXBwQmFzZU5vRmlsZSwgdXJsKTtcbiAgICB2YXIgd2l0aG91dEhhc2hVcmw7XG5cbiAgICBpZiAoIWlzVW5kZWZpbmVkKHdpdGhvdXRCYXNlVXJsKSAmJiB3aXRob3V0QmFzZVVybC5jaGFyQXQoMCkgPT09ICcjJykge1xuXG4gICAgICAvLyBUaGUgcmVzdCBvZiB0aGUgVVJMIHN0YXJ0cyB3aXRoIGEgaGFzaCBzbyB3ZSBoYXZlXG4gICAgICAvLyBnb3QgZWl0aGVyIGEgaGFzaGJhbmcgcGF0aCBvciBhIHBsYWluIGhhc2ggZnJhZ21lbnRcbiAgICAgIHdpdGhvdXRIYXNoVXJsID0gc3RyaXBCYXNlVXJsKGhhc2hQcmVmaXgsIHdpdGhvdXRCYXNlVXJsKTtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0SGFzaFVybCkpIHtcbiAgICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHByZWZpeCBzbyB3ZSBqdXN0IGhhdmUgYSBoYXNoIGZyYWdtZW50XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gd2l0aG91dEJhc2VVcmw7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHBhdGggbm9yIGhhc2ggZnJhZ21lbnQ6XG4gICAgICAvLyBJZiB3ZSBhcmUgaW4gSFRNTDUgbW9kZSB3ZSB1c2Ugd2hhdCBpcyBsZWZ0IGFzIHRoZSBwYXRoO1xuICAgICAgLy8gT3RoZXJ3aXNlIHdlIGlnbm9yZSB3aGF0IGlzIGxlZnRcbiAgICAgIGlmICh0aGlzLiQkaHRtbDUpIHtcbiAgICAgICAgd2l0aG91dEhhc2hVcmwgPSB3aXRob3V0QmFzZVVybDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gJyc7XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0QmFzZVVybCkpIHtcbiAgICAgICAgICBhcHBCYXNlID0gdXJsO1xuICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHRoaXMpLnJlcGxhY2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBhcnNlQXBwVXJsKHdpdGhvdXRIYXNoVXJsLCB0aGlzLCBmYWxzZSk7XG5cbiAgICB0aGlzLiQkcGF0aCA9IHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUodGhpcy4kJHBhdGgsIHdpdGhvdXRIYXNoVXJsLCBhcHBCYXNlKTtcblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG5cbiAgICAvKlxuICAgICAqIEluIFdpbmRvd3MsIG9uIGFuIGFuY2hvciBub2RlIG9uIGRvY3VtZW50cyBsb2FkZWQgZnJvbVxuICAgICAqIHRoZSBmaWxlc3lzdGVtLCB0aGUgYnJvd3NlciB3aWxsIHJldHVybiBhIHBhdGhuYW1lXG4gICAgICogcHJlZml4ZWQgd2l0aCB0aGUgZHJpdmUgbmFtZSAoJy9DOi9wYXRoJykgd2hlbiBhXG4gICAgICogcGF0aG5hbWUgd2l0aG91dCBhIGRyaXZlIGlzIHNldDpcbiAgICAgKiAgKiBhLnNldEF0dHJpYnV0ZSgnaHJlZicsICcvZm9vJylcbiAgICAgKiAgICogYS5wYXRobmFtZSA9PT0gJy9DOi9mb28nIC8vdHJ1ZVxuICAgICAqXG4gICAgICogSW5zaWRlIG9mIEFuZ3VsYXJKUywgd2UncmUgYWx3YXlzIHVzaW5nIHBhdGhuYW1lcyB0aGF0XG4gICAgICogZG8gbm90IGluY2x1ZGUgZHJpdmUgbmFtZXMgZm9yIHJvdXRpbmcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlV2luZG93c0RyaXZlTmFtZShwYXRoLCB1cmwsIGJhc2UpIHtcbiAgICAgIC8qXG4gICAgICBNYXRjaGVzIHBhdGhzIGZvciBmaWxlIHByb3RvY29sIG9uIHdpbmRvd3MsXG4gICAgICBzdWNoIGFzIC9DOi9mb28vYmFyLCBhbmQgY2FwdHVyZXMgb25seSAvZm9vL2Jhci5cbiAgICAgICovXG4gICAgICB2YXIgd2luZG93c0ZpbGVQYXRoRXhwID0gL15cXC9bQS1aXTooXFwvLiopLztcblxuICAgICAgdmFyIGZpcnN0UGF0aFNlZ21lbnRNYXRjaDtcblxuICAgICAgLy9HZXQgdGhlIHJlbGF0aXZlIHBhdGggZnJvbSB0aGUgaW5wdXQgVVJMLlxuICAgICAgaWYgKHN0YXJ0c1dpdGgodXJsLCBiYXNlKSkge1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShiYXNlLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBpbnB1dCBVUkwgaW50ZW50aW9uYWxseSBjb250YWlucyBhIGZpcnN0IHBhdGggc2VnbWVudCB0aGF0IGVuZHMgd2l0aCBhIGNvbG9uLlxuICAgICAgaWYgKHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHVybCkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICB9XG5cbiAgICAgIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA9IHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHBhdGgpO1xuICAgICAgcmV0dXJuIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA/IGZpcnN0UGF0aFNlZ21lbnRNYXRjaFsxXSA6IHBhdGg7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDb21wb3NlIGhhc2hiYW5nIFVSTCBhbmQgdXBkYXRlIGBhYnNVcmxgIHByb3BlcnR5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWFyY2ggPSB0b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLFxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xuXG4gICAgdGhpcy4kJHVybCA9IGVuY29kZVBhdGgodGhpcy4kJHBhdGgpICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIGhhc2g7XG4gICAgdGhpcy4kJGFic1VybCA9IGFwcEJhc2UgKyAodGhpcy4kJHVybCA/IGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsIDogJycpO1xuXG4gICAgdGhpcy4kJHVybFVwZGF0ZWRCeUxvY2F0aW9uID0gdHJ1ZTtcbiAgfTtcblxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XG4gICAgaWYgKHN0cmlwSGFzaChhcHBCYXNlKSA9PT0gc3RyaXBIYXNoKHVybCkpIHtcbiAgICAgIHRoaXMuJCRwYXJzZSh1cmwpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIExvY2F0aW9uSGFzaGJhbmdVcmwgcmVwcmVzZW50cyBVUkxcbiAqIFRoaXMgb2JqZWN0IGlzIGV4cG9zZWQgYXMgJGxvY2F0aW9uIHNlcnZpY2Ugd2hlbiBodG1sNSBoaXN0b3J5IGFwaSBpcyBlbmFibGVkIGJ1dCB0aGUgYnJvd3NlclxuICogZG9lcyBub3Qgc3VwcG9ydCBpdC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZU5vRmlsZSBhcHBsaWNhdGlvbiBiYXNlIFVSTCBzdHJpcHBlZCBvZiBhbnkgZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoUHJlZml4IGhhc2hiYW5nIHByZWZpeFxuICovXG5mdW5jdGlvbiBMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybChhcHBCYXNlLCBhcHBCYXNlTm9GaWxlLCBoYXNoUHJlZml4KSB7XG4gIHRoaXMuJCRodG1sNSA9IHRydWU7XG4gIExvY2F0aW9uSGFzaGJhbmdVcmwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XG4gICAgaWYgKHJlbEhyZWYgJiYgcmVsSHJlZlswXSA9PT0gJyMnKSB7XG4gICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIGxpbmtzIHRvIGhhc2ggZnJhZ21lbnRzOlxuICAgICAgLy8ga2VlcCB0aGUgb2xkIHVybCBhbmQgb25seSByZXBsYWNlIHRoZSBoYXNoIGZyYWdtZW50XG4gICAgICB0aGlzLmhhc2gocmVsSHJlZi5zbGljZSgxKSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgcmV3cml0dGVuVXJsO1xuICAgIHZhciBhcHBVcmw7XG5cbiAgICBpZiAoYXBwQmFzZSA9PT0gc3RyaXBIYXNoKHVybCkpIHtcbiAgICAgIHJld3JpdHRlblVybCA9IHVybDtcbiAgICB9IGVsc2UgaWYgKChhcHBVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZU5vRmlsZSwgdXJsKSkpIHtcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2UgKyBoYXNoUHJlZml4ICsgYXBwVXJsO1xuICAgIH0gZWxzZSBpZiAoYXBwQmFzZU5vRmlsZSA9PT0gdXJsICsgJy8nKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xuICAgIH1cbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xuICB9O1xuXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XG5cbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcbiAgICAvLyBpbmNsdWRlIGhhc2hQcmVmaXggaW4gJCRhYnNVcmwgd2hlbiAkJHVybCBpcyBlbXB0eSBzbyBJRTkgZG9lcyBub3QgcmVsb2FkIHBhZ2UgYmVjYXVzZSBvZiByZW1vdmFsIG9mICcjJ1xuICAgIHRoaXMuJCRhYnNVcmwgPSBhcHBCYXNlICsgaGFzaFByZWZpeCArIHRoaXMuJCR1cmw7XG5cbiAgICB0aGlzLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24gPSB0cnVlO1xuICB9O1xuXG59XG5cblxudmFyIGxvY2F0aW9uUHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBFbnN1cmUgYWJzb2x1dGUgVVJMIGlzIGluaXRpYWxpemVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRhYnNVcmw6JycsXG5cbiAgLyoqXG4gICAqIEFyZSB3ZSBpbiBodG1sNSBtb2RlP1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRodG1sNTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEhhcyBhbnkgY2hhbmdlIGJlZW4gcmVwbGFjaW5nP1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRyZXBsYWNlOiBmYWxzZSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jYWJzVXJsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cbiAgICpcbiAgICogUmV0dXJuIGZ1bGwgVVJMIHJlcHJlc2VudGF0aW9uIHdpdGggYWxsIHNlZ21lbnRzIGVuY29kZWQgYWNjb3JkaW5nIHRvIHJ1bGVzIHNwZWNpZmllZCBpblxuICAgKiBbUkZDIDM5ODZdKGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzM5ODYudHh0KS5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBhYnNVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG4gICAqIC8vID0+IFwiaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSBmdWxsIFVSTFxuICAgKi9cbiAgYWJzVXJsOiBsb2NhdGlvbkdldHRlcignJCRhYnNVcmwnKSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jdXJsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBVUkwgKGUuZy4gYC9wYXRoP2E9YiNoYXNoYCkgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2UgcGF0aCwgc2VhcmNoIGFuZCBoYXNoLCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBnaXZlbiBVUkwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cbiAgICogdmFyIHVybCA9ICRsb2NhdGlvbi51cmwoKTtcbiAgICogLy8gPT4gXCIvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB1cmwgTmV3IFVSTCB3aXRob3V0IGJhc2UgcHJlZml4IChlLmcuIGAvcGF0aD9hPWIjaGFzaGApXG4gICAqIEByZXR1cm4ge3N0cmluZ30gdXJsXG4gICAqL1xuICB1cmw6IGZ1bmN0aW9uKHVybCkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh1cmwpKSB7XG4gICAgICByZXR1cm4gdGhpcy4kJHVybDtcbiAgICB9XG5cbiAgICB2YXIgbWF0Y2ggPSBQQVRIX01BVENILmV4ZWModXJsKTtcbiAgICBpZiAobWF0Y2hbMV0gfHwgdXJsID09PSAnJykgdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFsxXSkpO1xuICAgIGlmIChtYXRjaFsyXSB8fCBtYXRjaFsxXSB8fCB1cmwgPT09ICcnKSB0aGlzLnNlYXJjaChtYXRjaFszXSB8fCAnJyk7XG4gICAgdGhpcy5oYXNoKG1hdGNoWzVdIHx8ICcnKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwcm90b2NvbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXG4gICAqXG4gICAqIFJldHVybiBwcm90b2NvbCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBwcm90b2NvbCA9ICRsb2NhdGlvbi5wcm90b2NvbCgpO1xuICAgKiAvLyA9PiBcImh0dHBcIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSBwcm90b2NvbCBvZiBjdXJyZW50IFVSTFxuICAgKi9cbiAgcHJvdG9jb2w6IGxvY2F0aW9uR2V0dGVyKCckJHByb3RvY29sJyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hvc3RcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxuICAgKlxuICAgKiBSZXR1cm4gaG9zdCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICogTm90ZTogY29tcGFyZWQgdG8gdGhlIG5vbi1Bbmd1bGFySlMgdmVyc2lvbiBgbG9jYXRpb24uaG9zdGAgd2hpY2ggcmV0dXJucyBgaG9zdG5hbWU6cG9ydGAsIHRoaXMgcmV0dXJucyB0aGUgYGhvc3RuYW1lYCBwb3J0aW9uIG9ubHkuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgaG9zdCA9ICRsb2NhdGlvbi5ob3N0KCk7XG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb21cIlxuICAgKlxuICAgKiAvLyBnaXZlbiBVUkwgaHR0cDovL3VzZXI6cGFzc3dvcmRAZXhhbXBsZS5jb206ODA4MC8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIGhvc3QgPSAkbG9jYXRpb24uaG9zdCgpO1xuICAgKiAvLyA9PiBcImV4YW1wbGUuY29tXCJcbiAgICogaG9zdCA9IGxvY2F0aW9uLmhvc3Q7XG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb206ODA4MFwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGhvc3Qgb2YgY3VycmVudCBVUkwuXG4gICAqL1xuICBob3N0OiBsb2NhdGlvbkdldHRlcignJCRob3N0JyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3BvcnRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxuICAgKlxuICAgKiBSZXR1cm4gcG9ydCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBwb3J0ID0gJGxvY2F0aW9uLnBvcnQoKTtcbiAgICogLy8gPT4gODBcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4ge051bWJlcn0gcG9ydFxuICAgKi9cbiAgcG9ydDogbG9jYXRpb25HZXR0ZXIoJyQkcG9ydCcpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwYXRoXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBwYXRoIG9mIGN1cnJlbnQgVVJMIHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cbiAgICpcbiAgICogQ2hhbmdlIHBhdGggd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICogTm90ZTogUGF0aCBzaG91bGQgYWx3YXlzIGJlZ2luIHdpdGggZm9yd2FyZCBzbGFzaCAoLyksIHRoaXMgbWV0aG9kIHdpbGwgYWRkIHRoZSBmb3J3YXJkIHNsYXNoXG4gICAqIGlmIGl0IGlzIG1pc3NpbmcuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgcGF0aCA9ICRsb2NhdGlvbi5wYXRoKCk7XG4gICAqIC8vID0+IFwiL3NvbWUvcGF0aFwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IHBhdGggTmV3IHBhdGhcbiAgICogQHJldHVybiB7KHN0cmluZ3xvYmplY3QpfSBwYXRoIGlmIGNhbGxlZCB3aXRoIG5vIHBhcmFtZXRlcnMsIG9yIGAkbG9jYXRpb25gIGlmIGNhbGxlZCB3aXRoIGEgcGFyYW1ldGVyXG4gICAqL1xuICBwYXRoOiBsb2NhdGlvbkdldHRlclNldHRlcignJCRwYXRoJywgZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBwYXRoICE9PSBudWxsID8gcGF0aC50b1N0cmluZygpIDogJyc7XG4gICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogJy8nICsgcGF0aDtcbiAgfSksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3NlYXJjaFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gc2VhcmNoIHBhcnQgKGFzIG9iamVjdCkgb2YgY3VycmVudCBVUkwgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2Ugc2VhcmNoIHBhcnQgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBzZWFyY2hPYmplY3QgPSAkbG9jYXRpb24uc2VhcmNoKCk7XG4gICAqIC8vID0+IHtmb286ICdiYXInLCBiYXo6ICd4b3hvJ31cbiAgICpcbiAgICogLy8gc2V0IGZvbyB0byAneWlwZWUnXG4gICAqICRsb2NhdGlvbi5zZWFyY2goJ2ZvbycsICd5aXBlZScpO1xuICAgKiAvLyAkbG9jYXRpb24uc2VhcmNoKCkgPT4ge2ZvbzogJ3lpcGVlJywgYmF6OiAneG94byd9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZz58T2JqZWN0LjxBcnJheS48c3RyaW5nPj59IHNlYXJjaCBOZXcgc2VhcmNoIHBhcmFtcyAtIHN0cmluZyBvclxuICAgKiBoYXNoIG9iamVjdC5cbiAgICpcbiAgICogV2hlbiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCB0aGUgbWV0aG9kIGFjdHMgYXMgYSBzZXR0ZXIsIHNldHRpbmcgdGhlIGBzZWFyY2hgIGNvbXBvbmVudFxuICAgKiBvZiBgJGxvY2F0aW9uYCB0byB0aGUgc3BlY2lmaWVkIHZhbHVlLlxuICAgKlxuICAgKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBoYXNoIG9iamVjdCBjb250YWluaW5nIGFuIGFycmF5IG9mIHZhbHVlcywgdGhlc2UgdmFsdWVzIHdpbGwgYmUgZW5jb2RlZFxuICAgKiBhcyBkdXBsaWNhdGUgc2VhcmNoIHBhcmFtZXRlcnMgaW4gdGhlIFVSTC5cbiAgICpcbiAgICogQHBhcmFtIHsoc3RyaW5nfE51bWJlcnxBcnJheTxzdHJpbmc+fGJvb2xlYW4pPX0gcGFyYW1WYWx1ZSBJZiBgc2VhcmNoYCBpcyBhIHN0cmluZyBvciBudW1iZXIsIHRoZW4gYHBhcmFtVmFsdWVgXG4gICAqIHdpbGwgb3ZlcnJpZGUgb25seSBhIHNpbmdsZSBzZWFyY2ggcHJvcGVydHkuXG4gICAqXG4gICAqIElmIGBwYXJhbVZhbHVlYCBpcyBhbiBhcnJheSwgaXQgd2lsbCBvdmVycmlkZSB0aGUgcHJvcGVydHkgb2YgdGhlIGBzZWFyY2hgIGNvbXBvbmVudCBvZlxuICAgKiBgJGxvY2F0aW9uYCBzcGVjaWZpZWQgdmlhIHRoZSBmaXJzdCBhcmd1bWVudC5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGBudWxsYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgZGVsZXRlZC5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGB0cnVlYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgYWRkZWQgd2l0aCBub1xuICAgKiB2YWx1ZSBub3IgdHJhaWxpbmcgZXF1YWwgc2lnbi5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBJZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyB0aGUgcGFyc2VkIGBzZWFyY2hgIG9iamVjdC4gSWYgY2FsbGVkIHdpdGhcbiAgICogb25lIG9yIG1vcmUgYXJndW1lbnRzIHJldHVybnMgYCRsb2NhdGlvbmAgb2JqZWN0IGl0c2VsZi5cbiAgICovXG4gIHNlYXJjaDogZnVuY3Rpb24oc2VhcmNoLCBwYXJhbVZhbHVlKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiB0aGlzLiQkc2VhcmNoO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBpZiAoaXNTdHJpbmcoc2VhcmNoKSB8fCBpc051bWJlcihzZWFyY2gpKSB7XG4gICAgICAgICAgc2VhcmNoID0gc2VhcmNoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgdGhpcy4kJHNlYXJjaCA9IHBhcnNlS2V5VmFsdWUoc2VhcmNoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChzZWFyY2gpKSB7XG4gICAgICAgICAgc2VhcmNoID0gY29weShzZWFyY2gsIHt9KTtcbiAgICAgICAgICAvLyByZW1vdmUgb2JqZWN0IHVuZGVmaW5lZCBvciBudWxsIHByb3BlcnRpZXNcbiAgICAgICAgICBmb3JFYWNoKHNlYXJjaCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIGRlbGV0ZSBzZWFyY2hba2V5XTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuJCRzZWFyY2ggPSBzZWFyY2g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdpc3JjaGFyZycsXG4gICAgICAgICAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgb2YgdGhlIGAkbG9jYXRpb24jc2VhcmNoKClgIGNhbGwgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocGFyYW1WYWx1ZSkgfHwgcGFyYW1WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLiQkc2VhcmNoW3NlYXJjaF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kJHNlYXJjaFtzZWFyY2hdID0gcGFyYW1WYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hhc2hcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cbiAgICpcbiAgICogUmV0dXJucyB0aGUgaGFzaCBmcmFnbWVudCB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBDaGFuZ2VzIHRoZSBoYXNoIGZyYWdtZW50IHdoZW4gY2FsbGVkIHdpdGggYSBwYXJhbWV0ZXIgYW5kIHJldHVybnMgYCRsb2NhdGlvbmAuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94byNoYXNoVmFsdWVcbiAgICogdmFyIGhhc2ggPSAkbG9jYXRpb24uaGFzaCgpO1xuICAgKiAvLyA9PiBcImhhc2hWYWx1ZVwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IGhhc2ggTmV3IGhhc2ggZnJhZ21lbnRcbiAgICogQHJldHVybiB7c3RyaW5nfSBoYXNoXG4gICAqL1xuICBoYXNoOiBsb2NhdGlvbkdldHRlclNldHRlcignJCRoYXNoJywgZnVuY3Rpb24oaGFzaCkge1xuICAgIHJldHVybiBoYXNoICE9PSBudWxsID8gaGFzaC50b1N0cmluZygpIDogJyc7XG4gIH0pLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNyZXBsYWNlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBJZiBjYWxsZWQsIGFsbCBjaGFuZ2VzIHRvICRsb2NhdGlvbiBkdXJpbmcgdGhlIGN1cnJlbnQgYCRkaWdlc3RgIHdpbGwgcmVwbGFjZSB0aGUgY3VycmVudCBoaXN0b3J5XG4gICAqIHJlY29yZCwgaW5zdGVhZCBvZiBhZGRpbmcgYSBuZXcgb25lLlxuICAgKi9cbiAgcmVwbGFjZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJHJlcGxhY2UgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5mb3JFYWNoKFtMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCwgTG9jYXRpb25IYXNoYmFuZ1VybCwgTG9jYXRpb25IdG1sNVVybF0sIGZ1bmN0aW9uKExvY2F0aW9uKSB7XG4gIExvY2F0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobG9jYXRpb25Qcm90b3R5cGUpO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNzdGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gdGhlIGhpc3Rvcnkgc3RhdGUgb2JqZWN0IHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cbiAgICpcbiAgICogQ2hhbmdlIHRoZSBoaXN0b3J5IHN0YXRlIG9iamVjdCB3aGVuIGNhbGxlZCB3aXRoIG9uZSBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICogVGhlIHN0YXRlIG9iamVjdCBpcyBsYXRlciBwYXNzZWQgdG8gYHB1c2hTdGF0ZWAgb3IgYHJlcGxhY2VTdGF0ZWAuXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgbWV0aG9kIGlzIHN1cHBvcnRlZCBvbmx5IGluIEhUTUw1IG1vZGUgYW5kIG9ubHkgaW4gYnJvd3NlcnMgc3VwcG9ydGluZ1xuICAgKiB0aGUgSFRNTDUgSGlzdG9yeSBBUEkgKGkuZS4gbWV0aG9kcyBgcHVzaFN0YXRlYCBhbmQgYHJlcGxhY2VTdGF0ZWApLiBJZiB5b3UgbmVlZCB0byBzdXBwb3J0XG4gICAqIG9sZGVyIGJyb3dzZXJzIChsaWtlIElFOSBvciBBbmRyb2lkIDwgNC4wKSwgZG9uJ3QgdXNlIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdD19IHN0YXRlIFN0YXRlIG9iamVjdCBmb3IgcHVzaFN0YXRlIG9yIHJlcGxhY2VTdGF0ZVxuICAgKiBAcmV0dXJuIHtvYmplY3R9IHN0YXRlXG4gICAqL1xuICBMb2NhdGlvbi5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuJCRzdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoTG9jYXRpb24gIT09IExvY2F0aW9uSHRtbDVVcmwgfHwgIXRoaXMuJCRodG1sNSkge1xuICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdub3N0YXRlJywgJ0hpc3RvcnkgQVBJIHN0YXRlIHN1cHBvcnQgaXMgYXZhaWxhYmxlIG9ubHkgJyArXG4gICAgICAgICdpbiBIVE1MNSBtb2RlIGFuZCBvbmx5IGluIGJyb3dzZXJzIHN1cHBvcnRpbmcgSFRNTDUgSGlzdG9yeSBBUEknKTtcbiAgICB9XG4gICAgLy8gVGhlIHVzZXIgbWlnaHQgbW9kaWZ5IGBzdGF0ZU9iamVjdGAgYWZ0ZXIgaW52b2tpbmcgYCRsb2NhdGlvbi5zdGF0ZShzdGF0ZU9iamVjdClgXG4gICAgLy8gYnV0IHdlJ3JlIGNoYW5naW5nIHRoZSAkJHN0YXRlIHJlZmVyZW5jZSB0byAkYnJvd3Nlci5zdGF0ZSgpIGR1cmluZyB0aGUgJGRpZ2VzdFxuICAgIC8vIHNvIHRoZSBtb2RpZmljYXRpb24gd2luZG93IGlzIG5hcnJvdy5cbiAgICB0aGlzLiQkc3RhdGUgPSBpc1VuZGVmaW5lZChzdGF0ZSkgPyBudWxsIDogc3RhdGU7XG4gICAgdGhpcy4kJHVybFVwZGF0ZWRCeUxvY2F0aW9uID0gdHJ1ZTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xufSk7XG5cblxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXIocHJvcGVydHkpIHtcbiAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpc1twcm9wZXJ0eV07XG4gIH07XG59XG5cblxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXJTZXR0ZXIocHJvcGVydHksIHByZXByb2Nlc3MpIHtcbiAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0aGlzW3Byb3BlcnR5XTtcbiAgICB9XG5cbiAgICB0aGlzW3Byb3BlcnR5XSA9IHByZXByb2Nlc3ModmFsdWUpO1xuICAgIHRoaXMuJCRjb21wb3NlKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbG9jYXRpb25cbiAqXG4gKiBAcmVxdWlyZXMgJHJvb3RFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgJGxvY2F0aW9uIHNlcnZpY2UgcGFyc2VzIHRoZSBVUkwgaW4gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIgKGJhc2VkIG9uIHRoZVxuICogW3dpbmRvdy5sb2NhdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vd2luZG93LmxvY2F0aW9uKSkgYW5kIG1ha2VzIHRoZSBVUkxcbiAqIGF2YWlsYWJsZSB0byB5b3VyIGFwcGxpY2F0aW9uLiBDaGFuZ2VzIHRvIHRoZSBVUkwgaW4gdGhlIGFkZHJlc3MgYmFyIGFyZSByZWZsZWN0ZWQgaW50b1xuICogJGxvY2F0aW9uIHNlcnZpY2UgYW5kIGNoYW5nZXMgdG8gJGxvY2F0aW9uIGFyZSByZWZsZWN0ZWQgaW50byB0aGUgYnJvd3NlciBhZGRyZXNzIGJhci5cbiAqXG4gKiAqKlRoZSAkbG9jYXRpb24gc2VydmljZToqKlxuICpcbiAqIC0gRXhwb3NlcyB0aGUgY3VycmVudCBVUkwgaW4gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIsIHNvIHlvdSBjYW5cbiAqICAgLSBXYXRjaCBhbmQgb2JzZXJ2ZSB0aGUgVVJMLlxuICogICAtIENoYW5nZSB0aGUgVVJMLlxuICogLSBTeW5jaHJvbml6ZXMgdGhlIFVSTCB3aXRoIHRoZSBicm93c2VyIHdoZW4gdGhlIHVzZXJcbiAqICAgLSBDaGFuZ2VzIHRoZSBhZGRyZXNzIGJhci5cbiAqICAgLSBDbGlja3MgdGhlIGJhY2sgb3IgZm9yd2FyZCBidXR0b24gKG9yIGNsaWNrcyBhIEhpc3RvcnkgbGluaykuXG4gKiAgIC0gQ2xpY2tzIG9uIGEgbGluay5cbiAqIC0gUmVwcmVzZW50cyB0aGUgVVJMIG9iamVjdCBhcyBhIHNldCBvZiBtZXRob2RzIChwcm90b2NvbCwgaG9zdCwgcG9ydCwgcGF0aCwgc2VhcmNoLCBoYXNoKS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiBEZXZlbG9wZXIgR3VpZGU6IFVzaW5nICRsb2NhdGlvbn1cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgdGhlIGAkbG9jYXRpb25Qcm92aWRlcmAgdG8gY29uZmlndXJlIGhvdyB0aGUgYXBwbGljYXRpb24gZGVlcCBsaW5raW5nIHBhdGhzIGFyZSBzdG9yZWQuXG4gKi9cbmZ1bmN0aW9uICRMb2NhdGlvblByb3ZpZGVyKCkge1xuICB2YXIgaGFzaFByZWZpeCA9ICchJyxcbiAgICAgIGh0bWw1TW9kZSA9IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIHJlcXVpcmVCYXNlOiB0cnVlLFxuICAgICAgICByZXdyaXRlTGlua3M6IHRydWVcbiAgICAgIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaGFzaFByZWZpeFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBwcmVmaXggaXMgYCchJ2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcHJlZml4IFByZWZpeCBmb3IgaGFzaCBwYXJ0IChjb250YWluaW5nIHBhdGggYW5kIHNlYXJjaClcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuaGFzaFByZWZpeCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIGlmIChpc0RlZmluZWQocHJlZml4KSkge1xuICAgICAgaGFzaFByZWZpeCA9IHByZWZpeDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaGFzaFByZWZpeDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaHRtbDVNb2RlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBAcGFyYW0geyhib29sZWFufE9iamVjdCk9fSBtb2RlIElmIGJvb2xlYW4sIHNldHMgYGh0bWw1TW9kZS5lbmFibGVkYCB0byB2YWx1ZS5cbiAgICogICBJZiBvYmplY3QsIHNldHMgYGVuYWJsZWRgLCBgcmVxdWlyZUJhc2VgIGFuZCBgcmV3cml0ZUxpbmtzYCB0byByZXNwZWN0aXZlIHZhbHVlcy4gU3VwcG9ydGVkXG4gICAqICAgcHJvcGVydGllczpcbiAgICogICAtICoqZW5hYmxlZCoqIOKAkyBge2Jvb2xlYW59YCDigJMgKGRlZmF1bHQ6IGZhbHNlKSBJZiB0cnVlLCB3aWxsIHJlbHkgb24gYGhpc3RvcnkucHVzaFN0YXRlYCB0b1xuICAgKiAgICAgY2hhbmdlIHVybHMgd2hlcmUgc3VwcG9ydGVkLiBXaWxsIGZhbGwgYmFjayB0byBoYXNoLXByZWZpeGVkIHBhdGhzIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG4gICAqICAgICBzdXBwb3J0IGBwdXNoU3RhdGVgLlxuICAgKiAgIC0gKipyZXF1aXJlQmFzZSoqIC0gYHtib29sZWFufWAgLSAoZGVmYXVsdDogYHRydWVgKSBXaGVuIGh0bWw1TW9kZSBpcyBlbmFibGVkLCBzcGVjaWZpZXNcbiAgICogICAgIHdoZXRoZXIgb3Igbm90IGEgPGJhc2U+IHRhZyBpcyByZXF1aXJlZCB0byBiZSBwcmVzZW50LiBJZiBgZW5hYmxlZGAgYW5kIGByZXF1aXJlQmFzZWAgYXJlXG4gICAqICAgICB0cnVlLCBhbmQgYSBiYXNlIHRhZyBpcyBub3QgcHJlc2VudCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24gd2hlbiBgJGxvY2F0aW9uYCBpcyBpbmplY3RlZC5cbiAgICogICAgIFNlZSB0aGUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiAkbG9jYXRpb24gZ3VpZGUgZm9yIG1vcmUgaW5mb3JtYXRpb259XG4gICAqICAgLSAqKnJld3JpdGVMaW5rcyoqIC0gYHtib29sZWFufHN0cmluZ31gIC0gKGRlZmF1bHQ6IGB0cnVlYCkgV2hlbiBodG1sNU1vZGUgaXMgZW5hYmxlZCxcbiAgICogICAgIGVuYWJsZXMvZGlzYWJsZXMgVVJMIHJld3JpdGluZyBmb3IgcmVsYXRpdmUgbGlua3MuIElmIHNldCB0byBhIHN0cmluZywgVVJMIHJld3JpdGluZyB3aWxsXG4gICAqICAgICBvbmx5IGhhcHBlbiBvbiBsaW5rcyB3aXRoIGFuIGF0dHJpYnV0ZSB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHN0cmluZy4gRm9yIGV4YW1wbGUsIGlmIHNldFxuICAgKiAgICAgdG8gYCdpbnRlcm5hbC1saW5rJ2AsIHRoZW4gdGhlIFVSTCB3aWxsIG9ubHkgYmUgcmV3cml0dGVuIGZvciBgPGEgaW50ZXJuYWwtbGluaz5gIGxpbmtzLlxuICAgKiAgICAgTm90ZSB0aGF0IFthdHRyaWJ1dGUgbmFtZSBub3JtYWxpemF0aW9uXShndWlkZS9kaXJlY3RpdmUjbm9ybWFsaXphdGlvbikgZG9lcyBub3QgYXBwbHlcbiAgICogICAgIGhlcmUsIHNvIGAnaW50ZXJuYWxMaW5rJ2Agd2lsbCAqKm5vdCoqIG1hdGNoIGAnaW50ZXJuYWwtbGluaydgLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBodG1sNU1vZGUgb2JqZWN0IGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqL1xuICB0aGlzLmh0bWw1TW9kZSA9IGZ1bmN0aW9uKG1vZGUpIHtcbiAgICBpZiAoaXNCb29sZWFuKG1vZGUpKSB7XG4gICAgICBodG1sNU1vZGUuZW5hYmxlZCA9IG1vZGU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG1vZGUpKSB7XG5cbiAgICAgIGlmIChpc0Jvb2xlYW4obW9kZS5lbmFibGVkKSkge1xuICAgICAgICBodG1sNU1vZGUuZW5hYmxlZCA9IG1vZGUuZW5hYmxlZDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQm9vbGVhbihtb2RlLnJlcXVpcmVCYXNlKSkge1xuICAgICAgICBodG1sNU1vZGUucmVxdWlyZUJhc2UgPSBtb2RlLnJlcXVpcmVCYXNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNCb29sZWFuKG1vZGUucmV3cml0ZUxpbmtzKSB8fCBpc1N0cmluZyhtb2RlLnJld3JpdGVMaW5rcykpIHtcbiAgICAgICAgaHRtbDVNb2RlLnJld3JpdGVMaW5rcyA9IG1vZGUucmV3cml0ZUxpbmtzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGh0bWw1TW9kZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBldmVudFxuICAgKiBAbmFtZSAkbG9jYXRpb24jJGxvY2F0aW9uQ2hhbmdlU3RhcnRcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnJvYWRjYXN0ZWQgYmVmb3JlIGEgVVJMIHdpbGwgY2hhbmdlLlxuICAgKlxuICAgKiBUaGlzIGNoYW5nZSBjYW4gYmUgcHJldmVudGVkIGJ5IGNhbGxpbmdcbiAgICogYHByZXZlbnREZWZhdWx0YCBtZXRob2Qgb2YgdGhlIGV2ZW50LiBTZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBmb3IgbW9yZVxuICAgKiBkZXRhaWxzIGFib3V0IGV2ZW50IG9iamVjdC4gVXBvbiBzdWNjZXNzZnVsIGNoYW5nZVxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc30gaXMgZmlyZWQuXG4gICAqXG4gICAqIFRoZSBgbmV3U3RhdGVgIGFuZCBgb2xkU3RhdGVgIHBhcmFtZXRlcnMgbWF5IGJlIGRlZmluZWQgb25seSBpbiBIVE1MNSBtb2RlIGFuZCB3aGVuXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZXdTdGF0ZSBOZXcgaGlzdG9yeSBzdGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZXZlbnRcbiAgICogQG5hbWUgJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnJvYWRjYXN0ZWQgYWZ0ZXIgYSBVUkwgd2FzIGNoYW5nZWQuXG4gICAqXG4gICAqIFRoZSBgbmV3U3RhdGVgIGFuZCBgb2xkU3RhdGVgIHBhcmFtZXRlcnMgbWF5IGJlIGRlZmluZWQgb25seSBpbiBIVE1MNSBtb2RlIGFuZCB3aGVuXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZXdTdGF0ZSBOZXcgaGlzdG9yeSBzdGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXG4gICAqL1xuXG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckc25pZmZlcicsICckcm9vdEVsZW1lbnQnLCAnJHdpbmRvdycsXG4gICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAkYnJvd3NlciwgJHNuaWZmZXIsICRyb290RWxlbWVudCwgJHdpbmRvdykge1xuICAgIHZhciAkbG9jYXRpb24sXG4gICAgICAgIExvY2F0aW9uTW9kZSxcbiAgICAgICAgYmFzZUhyZWYgPSAkYnJvd3Nlci5iYXNlSHJlZigpLCAvLyBpZiBiYXNlW2hyZWZdIGlzIHVuZGVmaW5lZCwgaXQgZGVmYXVsdHMgdG8gJydcbiAgICAgICAgaW5pdGlhbFVybCA9ICRicm93c2VyLnVybCgpLFxuICAgICAgICBhcHBCYXNlO1xuXG4gICAgaWYgKGh0bWw1TW9kZS5lbmFibGVkKSB7XG4gICAgICBpZiAoIWJhc2VIcmVmICYmIGh0bWw1TW9kZS5yZXF1aXJlQmFzZSkge1xuICAgICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ25vYmFzZScsXG4gICAgICAgICAgJyRsb2NhdGlvbiBpbiBIVE1MNSBtb2RlIHJlcXVpcmVzIGEgPGJhc2U+IHRhZyB0byBiZSBwcmVzZW50IScpO1xuICAgICAgfVxuICAgICAgYXBwQmFzZSA9IHNlcnZlckJhc2UoaW5pdGlhbFVybCkgKyAoYmFzZUhyZWYgfHwgJy8nKTtcbiAgICAgIExvY2F0aW9uTW9kZSA9ICRzbmlmZmVyLmhpc3RvcnkgPyBMb2NhdGlvbkh0bWw1VXJsIDogTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcEJhc2UgPSBzdHJpcEhhc2goaW5pdGlhbFVybCk7XG4gICAgICBMb2NhdGlvbk1vZGUgPSBMb2NhdGlvbkhhc2hiYW5nVXJsO1xuICAgIH1cbiAgICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcblxuICAgICRsb2NhdGlvbiA9IG5ldyBMb2NhdGlvbk1vZGUoYXBwQmFzZSwgYXBwQmFzZU5vRmlsZSwgJyMnICsgaGFzaFByZWZpeCk7XG4gICAgJGxvY2F0aW9uLiQkcGFyc2VMaW5rVXJsKGluaXRpYWxVcmwsIGluaXRpYWxVcmwpO1xuXG4gICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xuXG4gICAgdmFyIElHTk9SRV9VUklfUkVHRVhQID0gL15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtcblxuICAgIGZ1bmN0aW9uIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sodXJsLCByZXBsYWNlLCBzdGF0ZSkge1xuICAgICAgdmFyIG9sZFVybCA9ICRsb2NhdGlvbi51cmwoKTtcbiAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgJGJyb3dzZXIudXJsKHVybCwgcmVwbGFjZSwgc3RhdGUpO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSAkbG9jYXRpb24uc3RhdGUoKSByZXR1cm5zIHJlZmVyZW50aWFsbHkgaWRlbnRpY2FsIChub3QganVzdCBkZWVwbHkgZXF1YWwpXG4gICAgICAgIC8vIHN0YXRlIG9iamVjdDsgdGhpcyBtYWtlcyBwb3NzaWJsZSBxdWljayBjaGVja2luZyBpZiB0aGUgc3RhdGUgY2hhbmdlZCBpbiB0aGUgZGlnZXN0XG4gICAgICAgIC8vIGxvb3AuIENoZWNraW5nIGRlZXAgZXF1YWxpdHkgd291bGQgYmUgdG9vIGV4cGVuc2l2ZS5cbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBSZXN0b3JlIG9sZCB2YWx1ZXMgaWYgcHVzaFN0YXRlIGZhaWxzXG4gICAgICAgICRsb2NhdGlvbi51cmwob2xkVXJsKTtcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcblxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cblxuICAgICRyb290RWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIHJld3JpdGVMaW5rcyA9IGh0bWw1TW9kZS5yZXdyaXRlTGlua3M7XG4gICAgICAvLyBUT0RPKHZvanRhKTogcmV3cml0ZSBsaW5rIHdoZW4gb3BlbmluZyBpbiBuZXcgdGFiL3dpbmRvdyAoaW4gbGVnYWN5IGJyb3dzZXIpXG4gICAgICAvLyBjdXJyZW50bHkgd2Ugb3BlbiBuaWNlIHVybCBsaW5rIGFuZCByZWRpcmVjdCB0aGVuXG5cbiAgICAgIGlmICghcmV3cml0ZUxpbmtzIHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSB8fCBldmVudC53aGljaCA9PT0gMiB8fCBldmVudC5idXR0b24gPT09IDIpIHJldHVybjtcblxuICAgICAgdmFyIGVsbSA9IGpxTGl0ZShldmVudC50YXJnZXQpO1xuXG4gICAgICAvLyB0cmF2ZXJzZSB0aGUgRE9NIHVwIHRvIGZpbmQgZmlyc3QgQSB0YWdcbiAgICAgIHdoaWxlIChub2RlTmFtZV8oZWxtWzBdKSAhPT0gJ2EnKSB7XG4gICAgICAgIC8vIGlnbm9yZSByZXdyaXRpbmcgaWYgbm8gQSB0YWcgKHJlYWNoZWQgcm9vdCBlbGVtZW50LCBvciBubyBwYXJlbnQgLSByZW1vdmVkIGZyb20gZG9jdW1lbnQpXG4gICAgICAgIGlmIChlbG1bMF0gPT09ICRyb290RWxlbWVudFswXSB8fCAhKGVsbSA9IGVsbS5wYXJlbnQoKSlbMF0pIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3RyaW5nKHJld3JpdGVMaW5rcykgJiYgaXNVbmRlZmluZWQoZWxtLmF0dHIocmV3cml0ZUxpbmtzKSkpIHJldHVybjtcblxuICAgICAgdmFyIGFic0hyZWYgPSBlbG0ucHJvcCgnaHJlZicpO1xuICAgICAgLy8gZ2V0IHRoZSBhY3R1YWwgaHJlZiBhdHRyaWJ1dGUgLSBzZWVcbiAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kZDM0NzE0OCh2PXZzLjg1KS5hc3B4XG4gICAgICB2YXIgcmVsSHJlZiA9IGVsbS5hdHRyKCdocmVmJykgfHwgZWxtLmF0dHIoJ3hsaW5rOmhyZWYnKTtcblxuICAgICAgaWYgKGlzT2JqZWN0KGFic0hyZWYpICYmIGFic0hyZWYudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xuICAgICAgICAvLyBTVkdBbmltYXRlZFN0cmluZy5hbmltVmFsIHNob3VsZCBiZSBpZGVudGljYWwgdG8gU1ZHQW5pbWF0ZWRTdHJpbmcuYmFzZVZhbCwgdW5sZXNzIGR1cmluZ1xuICAgICAgICAvLyBhbiBhbmltYXRpb24uXG4gICAgICAgIGFic0hyZWYgPSB1cmxSZXNvbHZlKGFic0hyZWYuYW5pbVZhbCkuaHJlZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWdub3JlIHdoZW4gdXJsIGlzIHN0YXJ0ZWQgd2l0aCBqYXZhc2NyaXB0OiBvciBtYWlsdG86XG4gICAgICBpZiAoSUdOT1JFX1VSSV9SRUdFWFAudGVzdChhYnNIcmVmKSkgcmV0dXJuO1xuXG4gICAgICBpZiAoYWJzSHJlZiAmJiAhZWxtLmF0dHIoJ3RhcmdldCcpICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICBpZiAoJGxvY2F0aW9uLiQkcGFyc2VMaW5rVXJsKGFic0hyZWYsIHJlbEhyZWYpKSB7XG4gICAgICAgICAgLy8gV2UgZG8gYSBwcmV2ZW50RGVmYXVsdCBmb3IgYWxsIHVybHMgdGhhdCBhcmUgcGFydCBvZiB0aGUgQW5ndWxhckpTIGFwcGxpY2F0aW9uLFxuICAgICAgICAgIC8vIGluIGh0bWw1bW9kZSBhbmQgYWxzbyB3aXRob3V0LCBzbyB0aGF0IHdlIGFyZSBhYmxlIHRvIGFib3J0IG5hdmlnYXRpb24gd2l0aG91dFxuICAgICAgICAgIC8vIGdldHRpbmcgZG91YmxlIGVudHJpZXMgaW4gdGhlIGxvY2F0aW9uIGhpc3RvcnkuXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAvLyB1cGRhdGUgbG9jYXRpb24gbWFudWFsbHlcbiAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSAkYnJvd3Nlci51cmwoKSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgIC8vIGhhY2sgdG8gd29yayBhcm91bmQgRkY2IGJ1ZyA2ODQyMDggd2hlbiBzY2VuYXJpbyBydW5uZXIgY2xpY2tzIG9uIGxpbmtzXG4gICAgICAgICAgICAkd2luZG93LmFuZ3VsYXJbJ2ZmLTY4NDIwOC1wcmV2ZW50RGVmYXVsdCddID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgLy8gcmV3cml0ZSBoYXNoYmFuZyB1cmwgPD4gaHRtbDUgdXJsXG4gICAgaWYgKHRyaW1FbXB0eUhhc2goJGxvY2F0aW9uLmFic1VybCgpKSAhPT0gdHJpbUVtcHR5SGFzaChpbml0aWFsVXJsKSkge1xuICAgICAgJGJyb3dzZXIudXJsKCRsb2NhdGlvbi5hYnNVcmwoKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdmFyIGluaXRpYWxpemluZyA9IHRydWU7XG5cbiAgICAvLyB1cGRhdGUgJGxvY2F0aW9uIHdoZW4gJGJyb3dzZXIgdXJsIGNoYW5nZXNcbiAgICAkYnJvd3Nlci5vblVybENoYW5nZShmdW5jdGlvbihuZXdVcmwsIG5ld1N0YXRlKSB7XG5cbiAgICAgIGlmICghc3RhcnRzV2l0aChuZXdVcmwsIGFwcEJhc2VOb0ZpbGUpKSB7XG4gICAgICAgIC8vIElmIHdlIGFyZSBuYXZpZ2F0aW5nIG91dHNpZGUgb2YgdGhlIGFwcCB0aGVuIGZvcmNlIGEgcmVsb2FkXG4gICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VybDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvbGRVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG4gICAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xuICAgICAgICB2YXIgZGVmYXVsdFByZXZlbnRlZDtcbiAgICAgICAgbmV3VXJsID0gdHJpbUVtcHR5SGFzaChuZXdVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShuZXdVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQgPSAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLCBvbGRVcmwsXG4gICAgICAgICAgICBuZXdTdGF0ZSwgb2xkU3RhdGUpLmRlZmF1bHRQcmV2ZW50ZWQ7XG5cbiAgICAgICAgLy8gaWYgdGhlIGxvY2F0aW9uIHdhcyBjaGFuZ2VkIGJ5IGEgYCRsb2NhdGlvbkNoYW5nZVN0YXJ0YCBoYW5kbGVyIHRoZW4gc3RvcFxuICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXG4gICAgICAgIGlmICgkbG9jYXRpb24uYWJzVXJsKCkgIT09IG5ld1VybCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcbiAgICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG9sZFN0YXRlO1xuICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sob2xkVXJsLCBmYWxzZSwgb2xkU3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluaXRpYWxpemluZyA9IGZhbHNlO1xuICAgICAgICAgIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsLCBvbGRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgIH0pO1xuXG4gICAgLy8gdXBkYXRlIGJyb3dzZXJcbiAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAkbG9jYXRpb25XYXRjaCgpIHtcbiAgICAgIGlmIChpbml0aWFsaXppbmcgfHwgJGxvY2F0aW9uLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24pIHtcbiAgICAgICAgJGxvY2F0aW9uLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24gPSBmYWxzZTtcblxuICAgICAgICB2YXIgb2xkVXJsID0gdHJpbUVtcHR5SGFzaCgkYnJvd3Nlci51cmwoKSk7XG4gICAgICAgIHZhciBuZXdVcmwgPSB0cmltRW1wdHlIYXNoKCRsb2NhdGlvbi5hYnNVcmwoKSk7XG4gICAgICAgIHZhciBvbGRTdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XG4gICAgICAgIHZhciBjdXJyZW50UmVwbGFjZSA9ICRsb2NhdGlvbi4kJHJlcGxhY2U7XG4gICAgICAgIHZhciB1cmxPclN0YXRlQ2hhbmdlZCA9IG9sZFVybCAhPT0gbmV3VXJsIHx8XG4gICAgICAgICAgKCRsb2NhdGlvbi4kJGh0bWw1ICYmICRzbmlmZmVyLmhpc3RvcnkgJiYgb2xkU3RhdGUgIT09ICRsb2NhdGlvbi4kJHN0YXRlKTtcblxuICAgICAgICBpZiAoaW5pdGlhbGl6aW5nIHx8IHVybE9yU3RhdGVDaGFuZ2VkKSB7XG4gICAgICAgICAgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmV3VXJsID0gJGxvY2F0aW9uLmFic1VybCgpO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRQcmV2ZW50ZWQgPSAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLCBvbGRVcmwsXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKS5kZWZhdWx0UHJldmVudGVkO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGUgbG9jYXRpb24gd2FzIGNoYW5nZWQgYnkgYSBgJGxvY2F0aW9uQ2hhbmdlU3RhcnRgIGhhbmRsZXIgdGhlbiBzdG9wXG4gICAgICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXG4gICAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSBuZXdVcmwpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICh1cmxPclN0YXRlQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sobmV3VXJsLCBjdXJyZW50UmVwbGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0YXRlID09PSAkbG9jYXRpb24uJCRzdGF0ZSA/IG51bGwgOiAkbG9jYXRpb24uJCRzdGF0ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbG9jYXRpb24uJCRyZXBsYWNlID0gZmFsc2U7XG5cbiAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcmV0dXJuIGFueXRoaW5nIGJlY2F1c2UgJGV2YWxBc3luYyB3aWxsIG1ha2UgdGhlIGRpZ2VzdCBsb29wIGRpcnR5IHdoZW5cbiAgICAgIC8vIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gJGxvY2F0aW9uO1xuXG4gICAgZnVuY3Rpb24gYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCAkbG9jYXRpb24uYWJzVXJsKCksIG9sZFVybCxcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKTtcbiAgICB9XG59XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGxvZ1xuICogQHJlcXVpcmVzICR3aW5kb3dcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNpbXBsZSBzZXJ2aWNlIGZvciBsb2dnaW5nLiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHNhZmVseSB3cml0ZXMgdGhlIG1lc3NhZ2VcbiAqIGludG8gdGhlIGJyb3dzZXIncyBjb25zb2xlIChpZiBwcmVzZW50KS5cbiAqXG4gKiBUaGUgbWFpbiBwdXJwb3NlIG9mIHRoaXMgc2VydmljZSBpcyB0byBzaW1wbGlmeSBkZWJ1Z2dpbmcgYW5kIHRyb3VibGVzaG9vdGluZy5cbiAqXG4gKiBUbyByZXZlYWwgdGhlIGxvY2F0aW9uIG9mIHRoZSBjYWxscyB0byBgJGxvZ2AgaW4gdGhlIEphdmFTY3JpcHQgY29uc29sZSxcbiAqIHlvdSBjYW4gXCJibGFja2JveFwiIHRoZSBBbmd1bGFySlMgc291cmNlIGluIHlvdXIgYnJvd3NlcjpcbiAqXG4gKiBbTW96aWxsYSBkZXNjcmlwdGlvbiBvZiBibGFja2JveGluZ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9EZWJ1Z2dlci9Ib3dfdG8vQmxhY2tfYm94X2Ffc291cmNlKS5cbiAqIFtDaHJvbWUgZGVzY3JpcHRpb24gb2YgYmxhY2tib3hpbmddKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9ibGFja2JveGluZykuXG4gKlxuICogTm90ZTogTm90IGFsbCBicm93c2VycyBzdXBwb3J0IGJsYWNrYm94aW5nLlxuICpcbiAqIFRoZSBkZWZhdWx0IGlzIHRvIGxvZyBgZGVidWdgIG1lc3NhZ2VzLiBZb3UgY2FuIHVzZVxuICoge0BsaW5rIG5nLiRsb2dQcm92aWRlciBuZy4kbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkfSB0byBjaGFuZ2UgdGhpcy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibG9nRXhhbXBsZVwiIG5hbWU9XCJsb2ctc2VydmljZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2xvZ0V4YW1wbGUnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdMb2dDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvZycsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZykge1xuICAgICAgICAgICAkc2NvcGUuJGxvZyA9ICRsb2c7XG4gICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gJ0hlbGxvIFdvcmxkISc7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJMb2dDb250cm9sbGVyXCI+XG4gICAgICAgICA8cD5SZWxvYWQgdGhpcyBwYWdlIHdpdGggb3BlbiBjb25zb2xlLCBlbnRlciB0ZXh0IGFuZCBoaXQgdGhlIGxvZyBidXR0b24uLi48L3A+XG4gICAgICAgICA8bGFiZWw+TWVzc2FnZTpcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibWVzc2FnZVwiIC8+PC9sYWJlbD5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmxvZyhtZXNzYWdlKVwiPmxvZzwvYnV0dG9uPlxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cud2FybihtZXNzYWdlKVwiPndhcm48L2J1dHRvbj5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmluZm8obWVzc2FnZSlcIj5pbmZvPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5lcnJvcihtZXNzYWdlKVwiPmVycm9yPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5kZWJ1ZyhtZXNzYWdlKVwiPmRlYnVnPC9idXR0b24+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGxvZ1Byb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoZSBgJGxvZ1Byb3ZpZGVyYCB0byBjb25maWd1cmUgaG93IHRoZSBhcHBsaWNhdGlvbiBsb2dzIG1lc3NhZ2VzXG4gKi9cbmZ1bmN0aW9uICRMb2dQcm92aWRlcigpIHtcbiAgdmFyIGRlYnVnID0gdHJ1ZSxcbiAgICAgIHNlbGYgPSB0aGlzO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGZsYWcgZW5hYmxlIG9yIGRpc2FibGUgZGVidWcgbGV2ZWwgbWVzc2FnZXNcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuZGVidWdFbmFibGVkID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChpc0RlZmluZWQoZmxhZykpIHtcbiAgICAgIGRlYnVnID0gZmxhZztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcbiAgICAvLyBTdXBwb3J0OiBJRSA5LTExLCBFZGdlIDEyLTE0K1xuICAgIC8vIElFL0VkZ2UgZGlzcGxheSBlcnJvcnMgaW4gc3VjaCBhIHdheSB0aGF0IGl0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGNsaWNrIGluIDQgcGxhY2VzXG4gICAgLy8gdG8gc2VlIHRoZSBzdGFjayB0cmFjZS4gVGhlcmUgaXMgbm8gd2F5IHRvIGZlYXR1cmUtZGV0ZWN0IGl0IHNvIHRoZXJlJ3MgYSBjaGFuY2VcbiAgICAvLyBvZiB0aGUgdXNlciBhZ2VudCBzbmlmZmluZyB0byBnbyB3cm9uZyBidXQgc2luY2UgaXQncyBvbmx5IGFib3V0IGxvZ2dpbmcsIHRoaXMgc2hvdWxkbid0XG4gICAgLy8gYnJlYWsgYXBwcy4gT3RoZXIgYnJvd3NlcnMgZGlzcGxheSBlcnJvcnMgaW4gYSBzZW5zaWJsZSB3YXkgYW5kIHNvbWUgb2YgdGhlbSBtYXAgc3RhY2tcbiAgICAvLyB0cmFjZXMgYWxvbmcgc291cmNlIG1hcHMgaWYgYXZhaWxhYmxlIHNvIGl0IG1ha2VzIHNlbnNlIHRvIGxldCBicm93c2VycyBkaXNwbGF5IGl0XG4gICAgLy8gYXMgdGhleSB3YW50LlxuICAgIHZhciBmb3JtYXRTdGFja1RyYWNlID0gbXNpZSB8fCAvXFxiRWRnZVxcLy8udGVzdCgkd2luZG93Lm5hdmlnYXRvciAmJiAkd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNsb2dcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGEgbG9nIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgbG9nOiBjb25zb2xlTG9nKCdsb2cnKSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkbG9nI2luZm9cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGFuIGluZm9ybWF0aW9uIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgaW5mbzogY29uc29sZUxvZygnaW5mbycpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjd2FyblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogV3JpdGUgYSB3YXJuaW5nIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgd2FybjogY29uc29sZUxvZygnd2FybicpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjZXJyb3JcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGFuIGVycm9yIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgZXJyb3I6IGNvbnNvbGVMb2coJ2Vycm9yJyksXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNkZWJ1Z1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogV3JpdGUgYSBkZWJ1ZyBtZXNzYWdlXG4gICAgICAgKi9cbiAgICAgIGRlYnVnOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmbiA9IGNvbnNvbGVMb2coJ2RlYnVnJyk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSgpXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGZvcm1hdEVycm9yKGFyZykge1xuICAgICAgaWYgKGlzRXJyb3IoYXJnKSkge1xuICAgICAgICBpZiAoYXJnLnN0YWNrICYmIGZvcm1hdFN0YWNrVHJhY2UpIHtcbiAgICAgICAgICBhcmcgPSAoYXJnLm1lc3NhZ2UgJiYgYXJnLnN0YWNrLmluZGV4T2YoYXJnLm1lc3NhZ2UpID09PSAtMSlcbiAgICAgICAgICAgICAgPyAnRXJyb3I6ICcgKyBhcmcubWVzc2FnZSArICdcXG4nICsgYXJnLnN0YWNrXG4gICAgICAgICAgICAgIDogYXJnLnN0YWNrO1xuICAgICAgICB9IGVsc2UgaWYgKGFyZy5zb3VyY2VVUkwpIHtcbiAgICAgICAgICBhcmcgPSBhcmcubWVzc2FnZSArICdcXG4nICsgYXJnLnNvdXJjZVVSTCArICc6JyArIGFyZy5saW5lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnNvbGVMb2codHlwZSkge1xuICAgICAgdmFyIGNvbnNvbGUgPSAkd2luZG93LmNvbnNvbGUgfHwge30sXG4gICAgICAgICAgbG9nRm4gPSBjb25zb2xlW3R5cGVdIHx8IGNvbnNvbGUubG9nIHx8IG5vb3A7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgIGFyZ3MucHVzaChmb3JtYXRFcnJvcihhcmcpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFIDkgb25seVxuICAgICAgICAvLyBjb25zb2xlIG1ldGhvZHMgZG9uJ3QgaW5oZXJpdCBmcm9tIEZ1bmN0aW9uLnByb3RvdHlwZSBpbiBJRSA5IHNvIHdlIGNhbid0XG4gICAgICAgIC8vIGNhbGwgYGxvZ0ZuLmFwcGx5KGNvbnNvbGUsIGFyZ3MpYCBkaXJlY3RseS5cbiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGxvZ0ZuLCBjb25zb2xlLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuICB9XTtcbn1cblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxudmFyICRwYXJzZU1pbkVyciA9IG1pbkVycignJHBhcnNlJyk7XG5cbnZhciBvYmplY3RWYWx1ZU9mID0ge30uY29uc3RydWN0b3IucHJvdG90eXBlLnZhbHVlT2Y7XG5cbi8vIFNhbmRib3hpbmcgQW5ndWxhckpTIEV4cHJlc3Npb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEFuZ3VsYXJKUyBleHByZXNzaW9ucyBhcmUgbm8gbG9uZ2VyIHNhbmRib3hlZC4gU28gaXQgaXMgbm93IGV2ZW4gZWFzaWVyIHRvIGFjY2VzcyBhcmJpdHJhcnkgSlMgY29kZSBieVxuLy8gdmFyaW91cyBtZWFucyBzdWNoIGFzIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byBuYXRpdmUgSlMgZnVuY3Rpb25zIGxpa2UgdGhlIEZ1bmN0aW9uIGNvbnN0cnVjdG9yLlxuLy9cbi8vIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSBmb2xsb3dpbmcgQW5ndWxhckpTIGV4cHJlc3Npb246XG4vL1xuLy8gICB7fS50b1N0cmluZy5jb25zdHJ1Y3RvcignYWxlcnQoXCJldmlsIEpTIGNvZGVcIiknKVxuLy9cbi8vIEl0IGlzIGltcG9ydGFudCB0byByZWFsaXplIHRoYXQgaWYgeW91IGNyZWF0ZSBhbiBleHByZXNzaW9uIGZyb20gYSBzdHJpbmcgdGhhdCBjb250YWlucyB1c2VyIHByb3ZpZGVkXG4vLyBjb250ZW50IHRoZW4gaXQgaXMgcG9zc2libGUgdGhhdCB5b3VyIGFwcGxpY2F0aW9uIGNvbnRhaW5zIGEgc2VjdXJpdHkgdnVsbmVyYWJpbGl0eSB0byBhbiBYU1Mgc3R5bGUgYXR0YWNrLlxuLy9cbi8vIFNlZSBodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9ndWlkZS9zZWN1cml0eVxuXG5cbmZ1bmN0aW9uIGdldFN0cmluZ1ZhbHVlKG5hbWUpIHtcbiAgLy8gUHJvcGVydHkgbmFtZXMgbXVzdCBiZSBzdHJpbmdzLiBUaGlzIG1lYW5zIHRoYXQgbm9uLXN0cmluZyBvYmplY3RzIGNhbm5vdCBiZSB1c2VkXG4gIC8vIGFzIGtleXMgaW4gYW4gb2JqZWN0LiBBbnkgbm9uLXN0cmluZyBvYmplY3QsIGluY2x1ZGluZyBhIG51bWJlciwgaXMgdHlwZWNhc3RlZFxuICAvLyBpbnRvIGEgc3RyaW5nIHZpYSB0aGUgdG9TdHJpbmcgbWV0aG9kLlxuICAvLyAtLSBNRE4sIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9Qcm9wZXJ0eV9hY2Nlc3NvcnMjUHJvcGVydHlfbmFtZXNcbiAgLy9cbiAgLy8gU28sIHRvIGVuc3VyZSB0aGF0IHdlIGFyZSBjaGVja2luZyB0aGUgc2FtZSBgbmFtZWAgdGhhdCBKYXZhU2NyaXB0IHdvdWxkIHVzZSwgd2UgY2FzdCBpdFxuICAvLyB0byBhIHN0cmluZy4gSXQncyBub3QgYWx3YXlzIHBvc3NpYmxlLiBJZiBgbmFtZWAgaXMgYW4gb2JqZWN0IGFuZCBpdHMgYHRvU3RyaW5nYCBtZXRob2QgaXNcbiAgLy8gJ2Jyb2tlbicgKGRvZXNuJ3QgcmV0dXJuIGEgc3RyaW5nLCBpc24ndCBhIGZ1bmN0aW9uLCBldGMuKSwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd246XG4gIC8vXG4gIC8vIFR5cGVFcnJvcjogQ2Fubm90IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVxuICAvL1xuICAvLyBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgd2UgZG9uJ3QgY2F0Y2ggdGhpcyBlcnJvciBoZXJlIGFuZCBhbGxvdyBpdCB0byBwcm9wYWdhdGUgdXAgdGhlIGNhbGxcbiAgLy8gc3RhY2suIE5vdGUgdGhhdCB5b3UnbGwgZ2V0IHRoZSBzYW1lIGVycm9yIGluIEphdmFTY3JpcHQgaWYgeW91IHRyeSB0byBhY2Nlc3MgYSBwcm9wZXJ0eSB1c2luZ1xuICAvLyBzdWNoIGEgJ2Jyb2tlbicgb2JqZWN0IGFzIGEga2V5LlxuICByZXR1cm4gbmFtZSArICcnO1xufVxuXG5cbnZhciBPUEVSQVRPUlMgPSBjcmVhdGVNYXAoKTtcbmZvckVhY2goJysgLSAqIC8gJSA9PT0gIT09ID09ICE9IDwgPiA8PSA+PSAmJiB8fCAhID0gfCcuc3BsaXQoJyAnKSwgZnVuY3Rpb24ob3BlcmF0b3IpIHsgT1BFUkFUT1JTW29wZXJhdG9yXSA9IHRydWU7IH0pO1xudmFyIEVTQ0FQRSA9IHsnbic6J1xcbicsICdmJzonXFxmJywgJ3InOidcXHInLCAndCc6J1xcdCcsICd2JzonXFx2JywgJ1xcJyc6J1xcJycsICdcIic6J1wiJ307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgTGV4ZXIgPSBmdW5jdGlvbiBMZXhlcihvcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG59O1xuXG5MZXhlci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBMZXhlcixcblxuICBsZXg6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIHRoaXMudG9rZW5zID0gW107XG5cbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICBpZiAoY2ggPT09ICdcIicgfHwgY2ggPT09ICdcXCcnKSB7XG4gICAgICAgIHRoaXMucmVhZFN0cmluZyhjaCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNOdW1iZXIoY2gpIHx8IGNoID09PSAnLicgJiYgdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpIHtcbiAgICAgICAgdGhpcy5yZWFkTnVtYmVyKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNJZGVudGlmaWVyU3RhcnQodGhpcy5wZWVrTXVsdGljaGFyKCkpKSB7XG4gICAgICAgIHRoaXMucmVhZElkZW50KCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXMoY2gsICcoKXt9W10uLDs6PycpKSB7XG4gICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiBjaH0pO1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNXaGl0ZXNwYWNlKGNoKSkge1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2gyID0gY2ggKyB0aGlzLnBlZWsoKTtcbiAgICAgICAgdmFyIGNoMyA9IGNoMiArIHRoaXMucGVlaygyKTtcbiAgICAgICAgdmFyIG9wMSA9IE9QRVJBVE9SU1tjaF07XG4gICAgICAgIHZhciBvcDIgPSBPUEVSQVRPUlNbY2gyXTtcbiAgICAgICAgdmFyIG9wMyA9IE9QRVJBVE9SU1tjaDNdO1xuICAgICAgICBpZiAob3AxIHx8IG9wMiB8fCBvcDMpIHtcbiAgICAgICAgICB2YXIgdG9rZW4gPSBvcDMgPyBjaDMgOiAob3AyID8gY2gyIDogY2gpO1xuICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiB0b2tlbiwgb3BlcmF0b3I6IHRydWV9KTtcbiAgICAgICAgICB0aGlzLmluZGV4ICs9IHRva2VuLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ1VuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgJywgdGhpcy5pbmRleCwgdGhpcy5pbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRva2VucztcbiAgfSxcblxuICBpczogZnVuY3Rpb24oY2gsIGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihpKSB7XG4gICAgdmFyIG51bSA9IGkgfHwgMTtcbiAgICByZXR1cm4gKHRoaXMuaW5kZXggKyBudW0gPCB0aGlzLnRleHQubGVuZ3RoKSA/IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCArIG51bSkgOiBmYWxzZTtcbiAgfSxcblxuICBpc051bWJlcjogZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gKCcwJyA8PSBjaCAmJiBjaCA8PSAnOScpICYmIHR5cGVvZiBjaCA9PT0gJ3N0cmluZyc7XG4gIH0sXG5cbiAgaXNXaGl0ZXNwYWNlOiBmdW5jdGlvbihjaCkge1xuICAgIC8vIElFIHRyZWF0cyBub24tYnJlYWtpbmcgc3BhY2UgYXMgXFx1MDBBMFxuICAgIHJldHVybiAoY2ggPT09ICcgJyB8fCBjaCA9PT0gJ1xccicgfHwgY2ggPT09ICdcXHQnIHx8XG4gICAgICAgICAgICBjaCA9PT0gJ1xcbicgfHwgY2ggPT09ICdcXHYnIHx8IGNoID09PSAnXFx1MDBBMCcpO1xuICB9LFxuXG4gIGlzSWRlbnRpZmllclN0YXJ0OiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyU3RhcnQgP1xuICAgICAgICB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyU3RhcnQoY2gsIHRoaXMuY29kZVBvaW50QXQoY2gpKSA6XG4gICAgICAgIHRoaXMuaXNWYWxpZElkZW50aWZpZXJTdGFydChjaCk7XG4gIH0sXG5cbiAgaXNWYWxpZElkZW50aWZpZXJTdGFydDogZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gKCdhJyA8PSBjaCAmJiBjaCA8PSAneicgfHxcbiAgICAgICAgICAgICdBJyA8PSBjaCAmJiBjaCA8PSAnWicgfHxcbiAgICAgICAgICAgICdfJyA9PT0gY2ggfHwgY2ggPT09ICckJyk7XG4gIH0sXG5cbiAgaXNJZGVudGlmaWVyQ29udGludWU6IGZ1bmN0aW9uKGNoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZSA/XG4gICAgICAgIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZShjaCwgdGhpcy5jb2RlUG9pbnRBdChjaCkpIDpcbiAgICAgICAgdGhpcy5pc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlKGNoKTtcbiAgfSxcblxuICBpc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlOiBmdW5jdGlvbihjaCwgY3ApIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkSWRlbnRpZmllclN0YXJ0KGNoLCBjcCkgfHwgdGhpcy5pc051bWJlcihjaCk7XG4gIH0sXG5cbiAgY29kZVBvaW50QXQ6IGZ1bmN0aW9uKGNoKSB7XG4gICAgaWYgKGNoLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICByZXR1cm4gKGNoLmNoYXJDb2RlQXQoMCkgPDwgMTApICsgY2guY2hhckNvZGVBdCgxKSAtIDB4MzVGREMwMDtcbiAgfSxcblxuICBwZWVrTXVsdGljaGFyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2ggPSB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO1xuICAgIHZhciBwZWVrID0gdGhpcy5wZWVrKCk7XG4gICAgaWYgKCFwZWVrKSB7XG4gICAgICByZXR1cm4gY2g7XG4gICAgfVxuICAgIHZhciBjcDEgPSBjaC5jaGFyQ29kZUF0KDApO1xuICAgIHZhciBjcDIgPSBwZWVrLmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNwMSA+PSAweEQ4MDAgJiYgY3AxIDw9IDB4REJGRiAmJiBjcDIgPj0gMHhEQzAwICYmIGNwMiA8PSAweERGRkYpIHtcbiAgICAgIHJldHVybiBjaCArIHBlZWs7XG4gICAgfVxuICAgIHJldHVybiBjaDtcbiAgfSxcblxuICBpc0V4cE9wZXJhdG9yOiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnIHx8IHRoaXMuaXNOdW1iZXIoY2gpKTtcbiAgfSxcblxuICB0aHJvd0Vycm9yOiBmdW5jdGlvbihlcnJvciwgc3RhcnQsIGVuZCkge1xuICAgIGVuZCA9IGVuZCB8fCB0aGlzLmluZGV4O1xuICAgIHZhciBjb2xTdHIgPSAoaXNEZWZpbmVkKHN0YXJ0KVxuICAgICAgICAgICAgPyAncyAnICsgc3RhcnQgKyAgJy0nICsgdGhpcy5pbmRleCArICcgWycgKyB0aGlzLnRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpICsgJ10nXG4gICAgICAgICAgICA6ICcgJyArIGVuZCk7XG4gICAgdGhyb3cgJHBhcnNlTWluRXJyKCdsZXhlcnInLCAnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLFxuICAgICAgICBlcnJvciwgY29sU3RyLCB0aGlzLnRleHQpO1xuICB9LFxuXG4gIHJlYWROdW1iZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBudW1iZXIgPSAnJztcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgdmFyIGNoID0gbG93ZXJjYXNlKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO1xuICAgICAgaWYgKGNoID09PSAnLicgfHwgdGhpcy5pc051bWJlcihjaCkpIHtcbiAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBlZWtDaCA9IHRoaXMucGVlaygpO1xuICAgICAgICBpZiAoY2ggPT09ICdlJyAmJiB0aGlzLmlzRXhwT3BlcmF0b3IocGVla0NoKSkge1xuICAgICAgICAgIG51bWJlciArPSBjaDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRXhwT3BlcmF0b3IoY2gpICYmXG4gICAgICAgICAgICBwZWVrQ2ggJiYgdGhpcy5pc051bWJlcihwZWVrQ2gpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PT0gJ2UnKSB7XG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFeHBPcGVyYXRvcihjaCkgJiZcbiAgICAgICAgICAgICghcGVla0NoIHx8ICF0aGlzLmlzTnVtYmVyKHBlZWtDaCkpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PT0gJ2UnKSB7XG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJbnZhbGlkIGV4cG9uZW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50b2tlbnMucHVzaCh7XG4gICAgICBpbmRleDogc3RhcnQsXG4gICAgICB0ZXh0OiBudW1iZXIsXG4gICAgICBjb25zdGFudDogdHJ1ZSxcbiAgICAgIHZhbHVlOiBOdW1iZXIobnVtYmVyKVxuICAgIH0pO1xuICB9LFxuXG4gIHJlYWRJZGVudDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5pbmRleDtcbiAgICB0aGlzLmluZGV4ICs9IHRoaXMucGVla011bHRpY2hhcigpLmxlbmd0aDtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMucGVla011bHRpY2hhcigpO1xuICAgICAgaWYgKCF0aGlzLmlzSWRlbnRpZmllckNvbnRpbnVlKGNoKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXggKz0gY2gubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgIGluZGV4OiBzdGFydCxcbiAgICAgIHRleHQ6IHRoaXMudGV4dC5zbGljZShzdGFydCwgdGhpcy5pbmRleCksXG4gICAgICBpZGVudGlmaWVyOiB0cnVlXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVhZFN0cmluZzogZnVuY3Rpb24ocXVvdGUpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHRoaXMuaW5kZXgrKztcbiAgICB2YXIgc3RyaW5nID0gJyc7XG4gICAgdmFyIHJhd1N0cmluZyA9IHF1b3RlO1xuICAgIHZhciBlc2NhcGUgPSBmYWxzZTtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICByYXdTdHJpbmcgKz0gY2g7XG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIGlmIChjaCA9PT0gJ3UnKSB7XG4gICAgICAgICAgdmFyIGhleCA9IHRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCArIDEsIHRoaXMuaW5kZXggKyA1KTtcbiAgICAgICAgICBpZiAoIWhleC5tYXRjaCgvW1xcZGEtZl17NH0vaSkpIHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dFcnJvcignSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHUnICsgaGV4ICsgJ10nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5pbmRleCArPSA0O1xuICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGhleCwgMTYpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmVwID0gRVNDQVBFW2NoXTtcbiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcgKyAocmVwIHx8IGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICdcXFxcJykge1xuICAgICAgICBlc2NhcGUgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PT0gcXVvdGUpIHtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgICAgICBpbmRleDogc3RhcnQsXG4gICAgICAgICAgdGV4dDogcmF3U3RyaW5nLFxuICAgICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICAgIHZhbHVlOiBzdHJpbmdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmluZyArPSBjaDtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50aHJvd0Vycm9yKCdVbnRlcm1pbmF0ZWQgcXVvdGUnLCBzdGFydCk7XG4gIH1cbn07XG5cbnZhciBBU1QgPSBmdW5jdGlvbiBBU1QobGV4ZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5sZXhlciA9IGxleGVyO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuQVNULlByb2dyYW0gPSAnUHJvZ3JhbSc7XG5BU1QuRXhwcmVzc2lvblN0YXRlbWVudCA9ICdFeHByZXNzaW9uU3RhdGVtZW50JztcbkFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbiA9ICdBc3NpZ25tZW50RXhwcmVzc2lvbic7XG5BU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uID0gJ0NvbmRpdGlvbmFsRXhwcmVzc2lvbic7XG5BU1QuTG9naWNhbEV4cHJlc3Npb24gPSAnTG9naWNhbEV4cHJlc3Npb24nO1xuQVNULkJpbmFyeUV4cHJlc3Npb24gPSAnQmluYXJ5RXhwcmVzc2lvbic7XG5BU1QuVW5hcnlFeHByZXNzaW9uID0gJ1VuYXJ5RXhwcmVzc2lvbic7XG5BU1QuQ2FsbEV4cHJlc3Npb24gPSAnQ2FsbEV4cHJlc3Npb24nO1xuQVNULk1lbWJlckV4cHJlc3Npb24gPSAnTWVtYmVyRXhwcmVzc2lvbic7XG5BU1QuSWRlbnRpZmllciA9ICdJZGVudGlmaWVyJztcbkFTVC5MaXRlcmFsID0gJ0xpdGVyYWwnO1xuQVNULkFycmF5RXhwcmVzc2lvbiA9ICdBcnJheUV4cHJlc3Npb24nO1xuQVNULlByb3BlcnR5ID0gJ1Byb3BlcnR5JztcbkFTVC5PYmplY3RFeHByZXNzaW9uID0gJ09iamVjdEV4cHJlc3Npb24nO1xuQVNULlRoaXNFeHByZXNzaW9uID0gJ1RoaXNFeHByZXNzaW9uJztcbkFTVC5Mb2NhbHNFeHByZXNzaW9uID0gJ0xvY2Fsc0V4cHJlc3Npb24nO1xuXG4vLyBJbnRlcm5hbCB1c2Ugb25seVxuQVNULk5HVmFsdWVQYXJhbWV0ZXIgPSAnTkdWYWx1ZVBhcmFtZXRlcic7XG5cbkFTVC5wcm90b3R5cGUgPSB7XG4gIGFzdDogZnVuY3Rpb24odGV4dCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgdGhpcy50b2tlbnMgPSB0aGlzLmxleGVyLmxleCh0ZXh0KTtcblxuICAgIHZhciB2YWx1ZSA9IHRoaXMucHJvZ3JhbSgpO1xuXG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBhbiB1bmV4cGVjdGVkIHRva2VuJywgdGhpcy50b2tlbnNbMF0pO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICBwcm9ncmFtOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm9keSA9IFtdO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID4gMCAmJiAhdGhpcy5wZWVrKCd9JywgJyknLCAnOycsICddJykpXG4gICAgICAgIGJvZHkucHVzaCh0aGlzLmV4cHJlc3Npb25TdGF0ZW1lbnQoKSk7XG4gICAgICBpZiAoIXRoaXMuZXhwZWN0KCc7JykpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogQVNULlByb2dyYW0sIGJvZHk6IGJvZHl9O1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBleHByZXNzaW9uU3RhdGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyB0eXBlOiBBU1QuRXhwcmVzc2lvblN0YXRlbWVudCwgZXhwcmVzc2lvbjogdGhpcy5maWx0ZXJDaGFpbigpIH07XG4gIH0sXG5cbiAgZmlsdGVyQ2hhaW46IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZWZ0ID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgd2hpbGUgKHRoaXMuZXhwZWN0KCd8JykpIHtcbiAgICAgIGxlZnQgPSB0aGlzLmZpbHRlcihsZWZ0KTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgZXhwcmVzc2lvbjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaWdubWVudCgpO1xuICB9LFxuXG4gIGFzc2lnbm1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLnRlcm5hcnkoKTtcbiAgICBpZiAodGhpcy5leHBlY3QoJz0nKSkge1xuICAgICAgaWYgKCFpc0Fzc2lnbmFibGUocmVzdWx0KSkge1xuICAgICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2x2YWwnLCAnVHJ5aW5nIHRvIGFzc2lnbiBhIHZhbHVlIHRvIGEgbm9uIGwtdmFsdWUnKTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0geyB0eXBlOiBBU1QuQXNzaWdubWVudEV4cHJlc3Npb24sIGxlZnQ6IHJlc3VsdCwgcmlnaHQ6IHRoaXMuYXNzaWdubWVudCgpLCBvcGVyYXRvcjogJz0nfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcblxuICB0ZXJuYXJ5OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGVzdCA9IHRoaXMubG9naWNhbE9SKCk7XG4gICAgdmFyIGFsdGVybmF0ZTtcbiAgICB2YXIgY29uc2VxdWVudDtcbiAgICBpZiAodGhpcy5leHBlY3QoJz8nKSkge1xuICAgICAgYWx0ZXJuYXRlID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICBpZiAodGhpcy5jb25zdW1lKCc6JykpIHtcbiAgICAgICAgY29uc2VxdWVudCA9IHRoaXMuZXhwcmVzc2lvbigpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uLCB0ZXN0OiB0ZXN0LCBhbHRlcm5hdGU6IGFsdGVybmF0ZSwgY29uc2VxdWVudDogY29uc2VxdWVudH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZXN0O1xuICB9LFxuXG4gIGxvZ2ljYWxPUjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLmxvZ2ljYWxBTkQoKTtcbiAgICB3aGlsZSAodGhpcy5leHBlY3QoJ3x8JykpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5Mb2dpY2FsRXhwcmVzc2lvbiwgb3BlcmF0b3I6ICd8fCcsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLmxvZ2ljYWxBTkQoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBsb2dpY2FsQU5EOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuZXF1YWxpdHkoKTtcbiAgICB3aGlsZSAodGhpcy5leHBlY3QoJyYmJykpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5Mb2dpY2FsRXhwcmVzc2lvbiwgb3BlcmF0b3I6ICcmJicsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLmVxdWFsaXR5KCl9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBlcXVhbGl0eTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnJlbGF0aW9uYWwoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc9PScsJyE9JywnPT09JywnIT09JykpKSB7XG4gICAgICBsZWZ0ID0geyB0eXBlOiBBU1QuQmluYXJ5RXhwcmVzc2lvbiwgb3BlcmF0b3I6IHRva2VuLnRleHQsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLnJlbGF0aW9uYWwoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICByZWxhdGlvbmFsOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuYWRkaXRpdmUoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc8JywgJz4nLCAnPD0nLCAnPj0nKSkpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgbGVmdDogbGVmdCwgcmlnaHQ6IHRoaXMuYWRkaXRpdmUoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBhZGRpdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLm11bHRpcGxpY2F0aXZlKCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKycsJy0nKSkpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgbGVmdDogbGVmdCwgcmlnaHQ6IHRoaXMubXVsdGlwbGljYXRpdmUoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBtdWx0aXBsaWNhdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnVuYXJ5KCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKicsJy8nLCclJykpKSB7XG4gICAgICBsZWZ0ID0geyB0eXBlOiBBU1QuQmluYXJ5RXhwcmVzc2lvbiwgb3BlcmF0b3I6IHRva2VuLnRleHQsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLnVuYXJ5KCkgfTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgdW5hcnk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbjtcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJysnLCAnLScsICchJykpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBBU1QuVW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgcHJlZml4OiB0cnVlLCBhcmd1bWVudDogdGhpcy51bmFyeSgpIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnByaW1hcnkoKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJpbWFyeTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHByaW1hcnk7XG4gICAgaWYgKHRoaXMuZXhwZWN0KCcoJykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmZpbHRlckNoYWluKCk7XG4gICAgICB0aGlzLmNvbnN1bWUoJyknKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCdbJykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmFycmF5RGVjbGFyYXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCd7JykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLm9iamVjdCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxmUmVmZXJlbnRpYWwuaGFzT3duUHJvcGVydHkodGhpcy5wZWVrKCkudGV4dCkpIHtcbiAgICAgIHByaW1hcnkgPSBjb3B5KHRoaXMuc2VsZlJlZmVyZW50aWFsW3RoaXMuY29uc3VtZSgpLnRleHRdKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5saXRlcmFscy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnBlZWsoKS50ZXh0KSkge1xuICAgICAgcHJpbWFyeSA9IHsgdHlwZTogQVNULkxpdGVyYWwsIHZhbHVlOiB0aGlzLm9wdGlvbnMubGl0ZXJhbHNbdGhpcy5jb25zdW1lKCkudGV4dF19O1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuaWRlbnRpZmllcikge1xuICAgICAgcHJpbWFyeSA9IHRoaXMuaWRlbnRpZmllcigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuY29uc3RhbnQpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmNvbnN0YW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignbm90IGEgcHJpbWFyeSBleHByZXNzaW9uJywgdGhpcy5wZWVrKCkpO1xuICAgIH1cblxuICAgIHZhciBuZXh0O1xuICAgIHdoaWxlICgobmV4dCA9IHRoaXMuZXhwZWN0KCcoJywgJ1snLCAnLicpKSkge1xuICAgICAgaWYgKG5leHQudGV4dCA9PT0gJygnKSB7XG4gICAgICAgIHByaW1hcnkgPSB7dHlwZTogQVNULkNhbGxFeHByZXNzaW9uLCBjYWxsZWU6IHByaW1hcnksIGFyZ3VtZW50czogdGhpcy5wYXJzZUFyZ3VtZW50cygpIH07XG4gICAgICAgIHRoaXMuY29uc3VtZSgnKScpO1xuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICdbJykge1xuICAgICAgICBwcmltYXJ5ID0geyB0eXBlOiBBU1QuTWVtYmVyRXhwcmVzc2lvbiwgb2JqZWN0OiBwcmltYXJ5LCBwcm9wZXJ0eTogdGhpcy5leHByZXNzaW9uKCksIGNvbXB1dGVkOiB0cnVlIH07XG4gICAgICAgIHRoaXMuY29uc3VtZSgnXScpO1xuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICcuJykge1xuICAgICAgICBwcmltYXJ5ID0geyB0eXBlOiBBU1QuTWVtYmVyRXhwcmVzc2lvbiwgb2JqZWN0OiBwcmltYXJ5LCBwcm9wZXJ0eTogdGhpcy5pZGVudGlmaWVyKCksIGNvbXB1dGVkOiBmYWxzZSB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcmltYXJ5O1xuICB9LFxuXG4gIGZpbHRlcjogZnVuY3Rpb24oYmFzZUV4cHJlc3Npb24pIHtcbiAgICB2YXIgYXJncyA9IFtiYXNlRXhwcmVzc2lvbl07XG4gICAgdmFyIHJlc3VsdCA9IHt0eXBlOiBBU1QuQ2FsbEV4cHJlc3Npb24sIGNhbGxlZTogdGhpcy5pZGVudGlmaWVyKCksIGFyZ3VtZW50czogYXJncywgZmlsdGVyOiB0cnVlfTtcblxuICAgIHdoaWxlICh0aGlzLmV4cGVjdCgnOicpKSB7XG4gICAgICBhcmdzLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgcGFyc2VBcmd1bWVudHM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgaWYgKHRoaXMucGVla1Rva2VuKCkudGV4dCAhPT0gJyknKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGFyZ3MucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9LFxuXG4gIGlkZW50aWZpZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbiA9IHRoaXMuY29uc3VtZSgpO1xuICAgIGlmICghdG9rZW4uaWRlbnRpZmllcikge1xuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBub3QgYSB2YWxpZCBpZGVudGlmaWVyJywgdG9rZW4pO1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBBU1QuSWRlbnRpZmllciwgbmFtZTogdG9rZW4udGV4dCB9O1xuICB9LFxuXG4gIGNvbnN0YW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyBUT0RPIGNoZWNrIHRoYXQgaXQgaXMgYSBjb25zdGFudFxuICAgIHJldHVybiB7IHR5cGU6IEFTVC5MaXRlcmFsLCB2YWx1ZTogdGhpcy5jb25zdW1lKCkudmFsdWUgfTtcbiAgfSxcblxuICBhcnJheURlY2xhcmF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnXScpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRoaXMucGVlaygnXScpKSB7XG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnXScpO1xuXG4gICAgcmV0dXJuIHsgdHlwZTogQVNULkFycmF5RXhwcmVzc2lvbiwgZWxlbWVudHM6IGVsZW1lbnRzIH07XG4gIH0sXG5cbiAgb2JqZWN0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJvcGVydGllcyA9IFtdLCBwcm9wZXJ0eTtcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnfScpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRoaXMucGVlaygnfScpKSB7XG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHByb3BlcnR5ID0ge3R5cGU6IEFTVC5Qcm9wZXJ0eSwga2luZDogJ2luaXQnfTtcbiAgICAgICAgaWYgKHRoaXMucGVlaygpLmNvbnN0YW50KSB7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5jb25zdGFudCgpO1xuICAgICAgICAgIHByb3BlcnR5LmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCc6Jyk7XG4gICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBlZWsoKS5pZGVudGlmaWVyKSB7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5pZGVudGlmaWVyKCk7XG4gICAgICAgICAgcHJvcGVydHkuY29tcHV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAodGhpcy5wZWVrKCc6JykpIHtcbiAgICAgICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSBwcm9wZXJ0eS5rZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGVlaygnWycpKSB7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCdbJyk7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCddJyk7XG4gICAgICAgICAgcHJvcGVydHkuY29tcHV0ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xuICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdpbnZhbGlkIGtleScsIHRoaXMucGVlaygpKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnfScpO1xuXG4gICAgcmV0dXJuIHt0eXBlOiBBU1QuT2JqZWN0RXhwcmVzc2lvbiwgcHJvcGVydGllczogcHJvcGVydGllcyB9O1xuICB9LFxuXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKG1zZywgdG9rZW4pIHtcbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ3N5bnRheCcsXG4gICAgICAgICdTeW50YXggRXJyb3I6IFRva2VuIFxcJ3swfVxcJyB7MX0gYXQgY29sdW1uIHsyfSBvZiB0aGUgZXhwcmVzc2lvbiBbezN9XSBzdGFydGluZyBhdCBbezR9XS4nLFxuICAgICAgICAgIHRva2VuLnRleHQsIG1zZywgKHRva2VuLmluZGV4ICsgMSksIHRoaXMudGV4dCwgdGhpcy50ZXh0LnN1YnN0cmluZyh0b2tlbi5pbmRleCkpO1xuICB9LFxuXG4gIGNvbnN1bWU6IGZ1bmN0aW9uKGUxKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCd1ZW9lJywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsIHRoaXMudGV4dCk7XG4gICAgfVxuXG4gICAgdmFyIHRva2VuID0gdGhpcy5leHBlY3QoZTEpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFsnICsgZTEgKyAnXScsIHRoaXMucGVlaygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2VuO1xuICB9LFxuXG4gIHBlZWtUb2tlbjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCd1ZW9lJywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsIHRoaXMudGV4dCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRva2Vuc1swXTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihlMSwgZTIsIGUzLCBlNCkge1xuICAgIHJldHVybiB0aGlzLnBlZWtBaGVhZCgwLCBlMSwgZTIsIGUzLCBlNCk7XG4gIH0sXG5cbiAgcGVla0FoZWFkOiBmdW5jdGlvbihpLCBlMSwgZTIsIGUzLCBlNCkge1xuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggPiBpKSB7XG4gICAgICB2YXIgdG9rZW4gPSB0aGlzLnRva2Vuc1tpXTtcbiAgICAgIHZhciB0ID0gdG9rZW4udGV4dDtcbiAgICAgIGlmICh0ID09PSBlMSB8fCB0ID09PSBlMiB8fCB0ID09PSBlMyB8fCB0ID09PSBlNCB8fFxuICAgICAgICAgICghZTEgJiYgIWUyICYmICFlMyAmJiAhZTQpKSB7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIGV4cGVjdDogZnVuY3Rpb24oZTEsIGUyLCBlMywgZTQpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLnBlZWsoZTEsIGUyLCBlMywgZTQpO1xuICAgIGlmICh0b2tlbikge1xuICAgICAgdGhpcy50b2tlbnMuc2hpZnQoKTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIHNlbGZSZWZlcmVudGlhbDoge1xuICAgICd0aGlzJzoge3R5cGU6IEFTVC5UaGlzRXhwcmVzc2lvbiB9LFxuICAgICckbG9jYWxzJzoge3R5cGU6IEFTVC5Mb2NhbHNFeHByZXNzaW9uIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gaWZEZWZpbmVkKHYsIGQpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ICE9PSAndW5kZWZpbmVkJyA/IHYgOiBkO1xufVxuXG5mdW5jdGlvbiBwbHVzRm4obCwgcikge1xuICBpZiAodHlwZW9mIGwgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gcjtcbiAgaWYgKHR5cGVvZiByID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGw7XG4gIHJldHVybiBsICsgcjtcbn1cblxuZnVuY3Rpb24gaXNTdGF0ZWxlc3MoJGZpbHRlciwgZmlsdGVyTmFtZSkge1xuICB2YXIgZm4gPSAkZmlsdGVyKGZpbHRlck5hbWUpO1xuICByZXR1cm4gIWZuLiRzdGF0ZWZ1bDtcbn1cblxudmFyIFBVUklUWV9BQlNPTFVURSA9IDE7XG52YXIgUFVSSVRZX1JFTEFUSVZFID0gMjtcblxuLy8gRGV0ZWN0IG5vZGVzIHdoaWNoIGNvdWxkIGRlcGVuZCBvbiBub24tc2hhbGxvdyBzdGF0ZSBvZiBvYmplY3RzXG5mdW5jdGlvbiBpc1B1cmUobm9kZSwgcGFyZW50SXNQdXJlKSB7XG4gIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgLy8gQ29tcHV0ZWQgbWVtYmVycyBtaWdodCBpbnZva2UgYSBzdGF0ZWZ1bCB0b1N0cmluZygpXG4gICAgY2FzZSBBU1QuTWVtYmVyRXhwcmVzc2lvbjpcbiAgICAgIGlmIChub2RlLmNvbXB1dGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gVW5hcnkgYWx3YXlzIGNvbnZlcnQgdG8gcHJpbWF0aXZlXG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIFBVUklUWV9BQlNPTFVURTtcblxuICAgIC8vIFRoZSBiaW5hcnkgKyBvcGVyYXRvciBjYW4gaW52b2tlIGEgc3RhdGVmdWwgdG9TdHJpbmcoKS5cbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIG5vZGUub3BlcmF0b3IgIT09ICcrJyA/IFBVUklUWV9BQlNPTFVURSA6IGZhbHNlO1xuXG4gICAgLy8gRnVuY3Rpb25zIC8gZmlsdGVycyBwcm9iYWJseSByZWFkIHN0YXRlIGZyb20gd2l0aGluIG9iamVjdHNcbiAgICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiAodW5kZWZpbmVkID09PSBwYXJlbnRJc1B1cmUpID8gUFVSSVRZX1JFTEFUSVZFIDogcGFyZW50SXNQdXJlO1xufVxuXG5mdW5jdGlvbiBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdCwgJGZpbHRlciwgcGFyZW50SXNQdXJlKSB7XG4gIHZhciBhbGxDb25zdGFudHM7XG4gIHZhciBhcmdzVG9XYXRjaDtcbiAgdmFyIGlzU3RhdGVsZXNzRmlsdGVyO1xuXG4gIHZhciBhc3RJc1B1cmUgPSBhc3QuaXNQdXJlID0gaXNQdXJlKGFzdCwgcGFyZW50SXNQdXJlKTtcblxuICBzd2l0Y2ggKGFzdC50eXBlKSB7XG4gIGNhc2UgQVNULlByb2dyYW06XG4gICAgYWxsQ29uc3RhbnRzID0gdHJ1ZTtcbiAgICBmb3JFYWNoKGFzdC5ib2R5LCBmdW5jdGlvbihleHByKSB7XG4gICAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGV4cHIuZXhwcmVzc2lvbiwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmV4cHJlc3Npb24uY29uc3RhbnQ7XG4gICAgfSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYWxsQ29uc3RhbnRzO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5MaXRlcmFsOlxuICAgIGFzdC5jb25zdGFudCA9IHRydWU7XG4gICAgYXN0LnRvV2F0Y2ggPSBbXTtcbiAgICBicmVhaztcbiAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmFyZ3VtZW50LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC5hcmd1bWVudC5jb25zdGFudDtcbiAgICBhc3QudG9XYXRjaCA9IGFzdC5hcmd1bWVudC50b1dhdGNoO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmxlZnQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3QucmlnaHQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYXN0LmxlZnQuY29uc3RhbnQgJiYgYXN0LnJpZ2h0LmNvbnN0YW50O1xuICAgIGFzdC50b1dhdGNoID0gYXN0LmxlZnQudG9XYXRjaC5jb25jYXQoYXN0LnJpZ2h0LnRvV2F0Y2gpO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5Mb2dpY2FsRXhwcmVzc2lvbjpcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC5sZWZ0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LnJpZ2h0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC5sZWZ0LmNvbnN0YW50ICYmIGFzdC5yaWdodC5jb25zdGFudDtcbiAgICBhc3QudG9XYXRjaCA9IGFzdC5jb25zdGFudCA/IFtdIDogW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC50ZXN0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmFsdGVybmF0ZSwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC5jb25zZXF1ZW50LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC50ZXN0LmNvbnN0YW50ICYmIGFzdC5hbHRlcm5hdGUuY29uc3RhbnQgJiYgYXN0LmNvbnNlcXVlbnQuY29uc3RhbnQ7XG4gICAgYXN0LnRvV2F0Y2ggPSBhc3QuY29uc3RhbnQgPyBbXSA6IFthc3RdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5JZGVudGlmaWVyOlxuICAgIGFzdC5jb25zdGFudCA9IGZhbHNlO1xuICAgIGFzdC50b1dhdGNoID0gW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULk1lbWJlckV4cHJlc3Npb246XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3Qub2JqZWN0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGlmIChhc3QuY29tcHV0ZWQpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LnByb3BlcnR5LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIH1cbiAgICBhc3QuY29uc3RhbnQgPSBhc3Qub2JqZWN0LmNvbnN0YW50ICYmICghYXN0LmNvbXB1dGVkIHx8IGFzdC5wcm9wZXJ0eS5jb25zdGFudCk7XG4gICAgYXN0LnRvV2F0Y2ggPSBhc3QuY29uc3RhbnQgPyBbXSA6IFthc3RdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICBpc1N0YXRlbGVzc0ZpbHRlciA9IGFzdC5maWx0ZXIgPyBpc1N0YXRlbGVzcygkZmlsdGVyLCBhc3QuY2FsbGVlLm5hbWUpIDogZmFsc2U7XG4gICAgYWxsQ29uc3RhbnRzID0gaXNTdGF0ZWxlc3NGaWx0ZXI7XG4gICAgYXJnc1RvV2F0Y2ggPSBbXTtcbiAgICBmb3JFYWNoKGFzdC5hcmd1bWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoZXhwciwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmNvbnN0YW50O1xuICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgZXhwci50b1dhdGNoKTtcbiAgICB9KTtcbiAgICBhc3QuY29uc3RhbnQgPSBhbGxDb25zdGFudHM7XG4gICAgYXN0LnRvV2F0Y2ggPSBpc1N0YXRlbGVzc0ZpbHRlciA/IGFyZ3NUb1dhdGNoIDogW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkFzc2lnbm1lbnRFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmxlZnQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3QucmlnaHQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYXN0LmxlZnQuY29uc3RhbnQgJiYgYXN0LnJpZ2h0LmNvbnN0YW50O1xuICAgIGFzdC50b1dhdGNoID0gW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkFycmF5RXhwcmVzc2lvbjpcbiAgICBhbGxDb25zdGFudHMgPSB0cnVlO1xuICAgIGFyZ3NUb1dhdGNoID0gW107XG4gICAgZm9yRWFjaChhc3QuZWxlbWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoZXhwciwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmNvbnN0YW50O1xuICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgZXhwci50b1dhdGNoKTtcbiAgICB9KTtcbiAgICBhc3QuY29uc3RhbnQgPSBhbGxDb25zdGFudHM7XG4gICAgYXN0LnRvV2F0Y2ggPSBhcmdzVG9XYXRjaDtcbiAgICBicmVhaztcbiAgY2FzZSBBU1QuT2JqZWN0RXhwcmVzc2lvbjpcbiAgICBhbGxDb25zdGFudHMgPSB0cnVlO1xuICAgIGFyZ3NUb1dhdGNoID0gW107XG4gICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMocHJvcGVydHkudmFsdWUsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgICBhbGxDb25zdGFudHMgPSBhbGxDb25zdGFudHMgJiYgcHJvcGVydHkudmFsdWUuY29uc3RhbnQ7XG4gICAgICBhcmdzVG9XYXRjaC5wdXNoLmFwcGx5KGFyZ3NUb1dhdGNoLCBwcm9wZXJ0eS52YWx1ZS50b1dhdGNoKTtcbiAgICAgIGlmIChwcm9wZXJ0eS5jb21wdXRlZCkge1xuICAgICAgICAvL2B7W2tleV06IHZhbHVlfWAgaW1wbGljaXRseSBkb2VzIGBrZXkudG9TdHJpbmcoKWAgd2hpY2ggbWF5IGJlIG5vbi1wdXJlXG4gICAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMocHJvcGVydHkua2V5LCAkZmlsdGVyLCAvKnBhcmVudElzUHVyZT0qL2ZhbHNlKTtcbiAgICAgICAgYWxsQ29uc3RhbnRzID0gYWxsQ29uc3RhbnRzICYmIHByb3BlcnR5LmtleS5jb25zdGFudDtcbiAgICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgcHJvcGVydHkua2V5LnRvV2F0Y2gpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGFzdC5jb25zdGFudCA9IGFsbENvbnN0YW50cztcbiAgICBhc3QudG9XYXRjaCA9IGFyZ3NUb1dhdGNoO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5UaGlzRXhwcmVzc2lvbjpcbiAgICBhc3QuY29uc3RhbnQgPSBmYWxzZTtcbiAgICBhc3QudG9XYXRjaCA9IFtdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgIGFzdC5jb25zdGFudCA9IGZhbHNlO1xuICAgIGFzdC50b1dhdGNoID0gW107XG4gICAgYnJlYWs7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXRzKGJvZHkpIHtcbiAgaWYgKGJvZHkubGVuZ3RoICE9PSAxKSByZXR1cm47XG4gIHZhciBsYXN0RXhwcmVzc2lvbiA9IGJvZHlbMF0uZXhwcmVzc2lvbjtcbiAgdmFyIGNhbmRpZGF0ZSA9IGxhc3RFeHByZXNzaW9uLnRvV2F0Y2g7XG4gIGlmIChjYW5kaWRhdGUubGVuZ3RoICE9PSAxKSByZXR1cm4gY2FuZGlkYXRlO1xuICByZXR1cm4gY2FuZGlkYXRlWzBdICE9PSBsYXN0RXhwcmVzc2lvbiA/IGNhbmRpZGF0ZSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNBc3NpZ25hYmxlKGFzdCkge1xuICByZXR1cm4gYXN0LnR5cGUgPT09IEFTVC5JZGVudGlmaWVyIHx8IGFzdC50eXBlID09PSBBU1QuTWVtYmVyRXhwcmVzc2lvbjtcbn1cblxuZnVuY3Rpb24gYXNzaWduYWJsZUFTVChhc3QpIHtcbiAgaWYgKGFzdC5ib2R5Lmxlbmd0aCA9PT0gMSAmJiBpc0Fzc2lnbmFibGUoYXN0LmJvZHlbMF0uZXhwcmVzc2lvbikpIHtcbiAgICByZXR1cm4ge3R5cGU6IEFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbiwgbGVmdDogYXN0LmJvZHlbMF0uZXhwcmVzc2lvbiwgcmlnaHQ6IHt0eXBlOiBBU1QuTkdWYWx1ZVBhcmFtZXRlcn0sIG9wZXJhdG9yOiAnPSd9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzTGl0ZXJhbChhc3QpIHtcbiAgcmV0dXJuIGFzdC5ib2R5Lmxlbmd0aCA9PT0gMCB8fFxuICAgICAgYXN0LmJvZHkubGVuZ3RoID09PSAxICYmIChcbiAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSA9PT0gQVNULkxpdGVyYWwgfHxcbiAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSA9PT0gQVNULkFycmF5RXhwcmVzc2lvbiB8fFxuICAgICAgYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlID09PSBBU1QuT2JqZWN0RXhwcmVzc2lvbik7XG59XG5cbmZ1bmN0aW9uIGlzQ29uc3RhbnQoYXN0KSB7XG4gIHJldHVybiBhc3QuY29uc3RhbnQ7XG59XG5cbmZ1bmN0aW9uIEFTVENvbXBpbGVyKCRmaWx0ZXIpIHtcbiAgdGhpcy4kZmlsdGVyID0gJGZpbHRlcjtcbn1cblxuQVNUQ29tcGlsZXIucHJvdG90eXBlID0ge1xuICBjb21waWxlOiBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5leHRJZDogMCxcbiAgICAgIGZpbHRlcnM6IHt9LFxuICAgICAgZm46IHt2YXJzOiBbXSwgYm9keTogW10sIG93bjoge319LFxuICAgICAgYXNzaWduOiB7dmFyczogW10sIGJvZHk6IFtdLCBvd246IHt9fSxcbiAgICAgIGlucHV0czogW11cbiAgICB9O1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LCBzZWxmLiRmaWx0ZXIpO1xuICAgIHZhciBleHRyYSA9ICcnO1xuICAgIHZhciBhc3NpZ25hYmxlO1xuICAgIHRoaXMuc3RhZ2UgPSAnYXNzaWduJztcbiAgICBpZiAoKGFzc2lnbmFibGUgPSBhc3NpZ25hYmxlQVNUKGFzdCkpKSB7XG4gICAgICB0aGlzLnN0YXRlLmNvbXB1dGluZyA9ICdhc3NpZ24nO1xuICAgICAgdmFyIHJlc3VsdCA9IHRoaXMubmV4dElkKCk7XG4gICAgICB0aGlzLnJlY3Vyc2UoYXNzaWduYWJsZSwgcmVzdWx0KTtcbiAgICAgIHRoaXMucmV0dXJuXyhyZXN1bHQpO1xuICAgICAgZXh0cmEgPSAnZm4uYXNzaWduPScgKyB0aGlzLmdlbmVyYXRlRnVuY3Rpb24oJ2Fzc2lnbicsICdzLHYsbCcpO1xuICAgIH1cbiAgICB2YXIgdG9XYXRjaCA9IGdldElucHV0cyhhc3QuYm9keSk7XG4gICAgc2VsZi5zdGFnZSA9ICdpbnB1dHMnO1xuICAgIGZvckVhY2godG9XYXRjaCwgZnVuY3Rpb24od2F0Y2gsIGtleSkge1xuICAgICAgdmFyIGZuS2V5ID0gJ2ZuJyArIGtleTtcbiAgICAgIHNlbGYuc3RhdGVbZm5LZXldID0ge3ZhcnM6IFtdLCBib2R5OiBbXSwgb3duOiB7fX07XG4gICAgICBzZWxmLnN0YXRlLmNvbXB1dGluZyA9IGZuS2V5O1xuICAgICAgdmFyIGludG9JZCA9IHNlbGYubmV4dElkKCk7XG4gICAgICBzZWxmLnJlY3Vyc2Uod2F0Y2gsIGludG9JZCk7XG4gICAgICBzZWxmLnJldHVybl8oaW50b0lkKTtcbiAgICAgIHNlbGYuc3RhdGUuaW5wdXRzLnB1c2goe25hbWU6IGZuS2V5LCBpc1B1cmU6IHdhdGNoLmlzUHVyZX0pO1xuICAgICAgd2F0Y2gud2F0Y2hJZCA9IGtleTtcbiAgICB9KTtcbiAgICB0aGlzLnN0YXRlLmNvbXB1dGluZyA9ICdmbic7XG4gICAgdGhpcy5zdGFnZSA9ICdtYWluJztcbiAgICB0aGlzLnJlY3Vyc2UoYXN0KTtcbiAgICB2YXIgZm5TdHJpbmcgPVxuICAgICAgLy8gVGhlIGJ1aWxkIGFuZCBtaW5pZmljYXRpb24gc3RlcHMgcmVtb3ZlIHRoZSBzdHJpbmcgXCJ1c2Ugc3RyaWN0XCIgZnJvbSB0aGUgY29kZSwgYnV0IHRoaXMgaXMgZG9uZSB1c2luZyBhIHJlZ2V4LlxuICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgZm9yIHRoaXMgdW50aWwgd2UgZG8gYSBiZXR0ZXIgam9iIGF0IG9ubHkgcmVtb3ZpbmcgdGhlIHByZWZpeCBvbmx5IHdoZW4gd2Ugc2hvdWxkLlxuICAgICAgJ1wiJyArIHRoaXMuVVNFICsgJyAnICsgdGhpcy5TVFJJQ1QgKyAnXCI7XFxuJyArXG4gICAgICB0aGlzLmZpbHRlclByZWZpeCgpICtcbiAgICAgICd2YXIgZm49JyArIHRoaXMuZ2VuZXJhdGVGdW5jdGlvbignZm4nLCAncyxsLGEsaScpICtcbiAgICAgIGV4dHJhICtcbiAgICAgIHRoaXMud2F0Y2hGbnMoKSArXG4gICAgICAncmV0dXJuIGZuOyc7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgICB2YXIgZm4gPSAobmV3IEZ1bmN0aW9uKCckZmlsdGVyJyxcbiAgICAgICAgJ2dldFN0cmluZ1ZhbHVlJyxcbiAgICAgICAgJ2lmRGVmaW5lZCcsXG4gICAgICAgICdwbHVzJyxcbiAgICAgICAgZm5TdHJpbmcpKShcbiAgICAgICAgICB0aGlzLiRmaWx0ZXIsXG4gICAgICAgICAgZ2V0U3RyaW5nVmFsdWUsXG4gICAgICAgICAgaWZEZWZpbmVkLFxuICAgICAgICAgIHBsdXNGbik7XG4gICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhZ2UgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIFVTRTogJ3VzZScsXG5cbiAgU1RSSUNUOiAnc3RyaWN0JyxcblxuICB3YXRjaEZuczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpbnB1dHMgPSB0aGlzLnN0YXRlLmlucHV0cztcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yRWFjaChpbnB1dHMsIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICByZXN1bHQucHVzaCgndmFyICcgKyBpbnB1dC5uYW1lICsgJz0nICsgc2VsZi5nZW5lcmF0ZUZ1bmN0aW9uKGlucHV0Lm5hbWUsICdzJykpO1xuICAgICAgaWYgKGlucHV0LmlzUHVyZSkge1xuICAgICAgICByZXN1bHQucHVzaChpbnB1dC5uYW1lLCAnLmlzUHVyZT0nICsgSlNPTi5zdHJpbmdpZnkoaW5wdXQuaXNQdXJlKSArICc7Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGlucHV0cy5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKCdmbi5pbnB1dHM9WycgKyBpbnB1dHMubWFwKGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGkubmFtZTsgfSkuam9pbignLCcpICsgJ107Jyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuam9pbignJyk7XG4gIH0sXG5cbiAgZ2VuZXJhdGVGdW5jdGlvbjogZnVuY3Rpb24obmFtZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuICdmdW5jdGlvbignICsgcGFyYW1zICsgJyl7JyArXG4gICAgICAgIHRoaXMudmFyc1ByZWZpeChuYW1lKSArXG4gICAgICAgIHRoaXMuYm9keShuYW1lKSArXG4gICAgICAgICd9Oyc7XG4gIH0sXG5cbiAgZmlsdGVyUHJlZml4OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yRWFjaCh0aGlzLnN0YXRlLmZpbHRlcnMsIGZ1bmN0aW9uKGlkLCBmaWx0ZXIpIHtcbiAgICAgIHBhcnRzLnB1c2goaWQgKyAnPSRmaWx0ZXIoJyArIHNlbGYuZXNjYXBlKGZpbHRlcikgKyAnKScpO1xuICAgIH0pO1xuICAgIGlmIChwYXJ0cy5sZW5ndGgpIHJldHVybiAndmFyICcgKyBwYXJ0cy5qb2luKCcsJykgKyAnOyc7XG4gICAgcmV0dXJuICcnO1xuICB9LFxuXG4gIHZhcnNQcmVmaXg6IGZ1bmN0aW9uKHNlY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZVtzZWN0aW9uXS52YXJzLmxlbmd0aCA/ICd2YXIgJyArIHRoaXMuc3RhdGVbc2VjdGlvbl0udmFycy5qb2luKCcsJykgKyAnOycgOiAnJztcbiAgfSxcblxuICBib2R5OiBmdW5jdGlvbihzZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVbc2VjdGlvbl0uYm9keS5qb2luKCcnKTtcbiAgfSxcblxuICByZWN1cnNlOiBmdW5jdGlvbihhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKSB7XG4gICAgdmFyIGxlZnQsIHJpZ2h0LCBzZWxmID0gdGhpcywgYXJncywgZXhwcmVzc2lvbiwgY29tcHV0ZWQ7XG4gICAgcmVjdXJzaW9uRm4gPSByZWN1cnNpb25GbiB8fCBub29wO1xuICAgIGlmICghc2tpcFdhdGNoSWRDaGVjayAmJiBpc0RlZmluZWQoYXN0LndhdGNoSWQpKSB7XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHRoaXMuaWZfKCdpJyxcbiAgICAgICAgdGhpcy5sYXp5QXNzaWduKGludG9JZCwgdGhpcy5jb21wdXRlZE1lbWJlcignaScsIGFzdC53YXRjaElkKSksXG4gICAgICAgIHRoaXMubGF6eVJlY3Vyc2UoYXN0LCBpbnRvSWQsIG5hbWVJZCwgcmVjdXJzaW9uRm4sIGNyZWF0ZSwgdHJ1ZSlcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAoYXN0LnR5cGUpIHtcbiAgICBjYXNlIEFTVC5Qcm9ncmFtOlxuICAgICAgZm9yRWFjaChhc3QuYm9keSwgZnVuY3Rpb24oZXhwcmVzc2lvbiwgcG9zKSB7XG4gICAgICAgIHNlbGYucmVjdXJzZShleHByZXNzaW9uLmV4cHJlc3Npb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbihleHByKSB7IHJpZ2h0ID0gZXhwcjsgfSk7XG4gICAgICAgIGlmIChwb3MgIT09IGFzdC5ib2R5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBzZWxmLmN1cnJlbnQoKS5ib2R5LnB1c2gocmlnaHQsICc7Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5yZXR1cm5fKHJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5MaXRlcmFsOlxuICAgICAgZXhwcmVzc2lvbiA9IHRoaXMuZXNjYXBlKGFzdC52YWx1ZSk7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8IGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgdGhpcy5yZWN1cnNlKGFzdC5hcmd1bWVudCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGV4cHIpIHsgcmlnaHQgPSBleHByOyB9KTtcbiAgICAgIGV4cHJlc3Npb24gPSBhc3Qub3BlcmF0b3IgKyAnKCcgKyB0aGlzLmlmRGVmaW5lZChyaWdodCwgMCkgKyAnKSc7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oZXhwcmVzc2lvbik7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgdGhpcy5yZWN1cnNlKGFzdC5sZWZ0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikgeyBsZWZ0ID0gZXhwcjsgfSk7XG4gICAgICB0aGlzLnJlY3Vyc2UoYXN0LnJpZ2h0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikgeyByaWdodCA9IGV4cHI7IH0pO1xuICAgICAgaWYgKGFzdC5vcGVyYXRvciA9PT0gJysnKSB7XG4gICAgICAgIGV4cHJlc3Npb24gPSB0aGlzLnBsdXMobGVmdCwgcmlnaHQpO1xuICAgICAgfSBlbHNlIGlmIChhc3Qub3BlcmF0b3IgPT09ICctJykge1xuICAgICAgICBleHByZXNzaW9uID0gdGhpcy5pZkRlZmluZWQobGVmdCwgMCkgKyBhc3Qub3BlcmF0b3IgKyB0aGlzLmlmRGVmaW5lZChyaWdodCwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHByZXNzaW9uID0gJygnICsgbGVmdCArICcpJyArIGFzdC5vcGVyYXRvciArICcoJyArIHJpZ2h0ICsgJyknO1xuICAgICAgfVxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuTG9naWNhbEV4cHJlc3Npb246XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QubGVmdCwgaW50b0lkKTtcbiAgICAgIHNlbGYuaWZfKGFzdC5vcGVyYXRvciA9PT0gJyYmJyA/IGludG9JZCA6IHNlbGYubm90KGludG9JZCksIHNlbGYubGF6eVJlY3Vyc2UoYXN0LnJpZ2h0LCBpbnRvSWQpKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Db25kaXRpb25hbEV4cHJlc3Npb246XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QudGVzdCwgaW50b0lkKTtcbiAgICAgIHNlbGYuaWZfKGludG9JZCwgc2VsZi5sYXp5UmVjdXJzZShhc3QuYWx0ZXJuYXRlLCBpbnRvSWQpLCBzZWxmLmxhenlSZWN1cnNlKGFzdC5jb25zZXF1ZW50LCBpbnRvSWQpKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5JZGVudGlmaWVyOlxuICAgICAgaW50b0lkID0gaW50b0lkIHx8IHRoaXMubmV4dElkKCk7XG4gICAgICBpZiAobmFtZUlkKSB7XG4gICAgICAgIG5hbWVJZC5jb250ZXh0ID0gc2VsZi5zdGFnZSA9PT0gJ2lucHV0cycgPyAncycgOiB0aGlzLmFzc2lnbih0aGlzLm5leHRJZCgpLCB0aGlzLmdldEhhc093blByb3BlcnR5KCdsJywgYXN0Lm5hbWUpICsgJz9sOnMnKTtcbiAgICAgICAgbmFtZUlkLmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgIG5hbWVJZC5uYW1lID0gYXN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBzZWxmLmlmXyhzZWxmLnN0YWdlID09PSAnaW5wdXRzJyB8fCBzZWxmLm5vdChzZWxmLmdldEhhc093blByb3BlcnR5KCdsJywgYXN0Lm5hbWUpKSxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5pZl8oc2VsZi5zdGFnZSA9PT0gJ2lucHV0cycgfHwgJ3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuaWZfKFxuICAgICAgICAgICAgICAgIHNlbGYuaXNOdWxsKHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIoJ3MnLCBhc3QubmFtZSkpLFxuICAgICAgICAgICAgICAgIHNlbGYubGF6eUFzc2lnbihzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKCdzJywgYXN0Lm5hbWUpLCAne30nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIoJ3MnLCBhc3QubmFtZSkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBpbnRvSWQgJiYgc2VsZi5sYXp5QXNzaWduKGludG9JZCwgc2VsZi5ub25Db21wdXRlZE1lbWJlcignbCcsIGFzdC5uYW1lKSlcbiAgICAgICAgKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5NZW1iZXJFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IG5hbWVJZCAmJiAobmFtZUlkLmNvbnRleHQgPSB0aGlzLm5leHRJZCgpKSB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgaW50b0lkID0gaW50b0lkIHx8IHRoaXMubmV4dElkKCk7XG4gICAgICBzZWxmLnJlY3Vyc2UoYXN0Lm9iamVjdCwgbGVmdCwgdW5kZWZpbmVkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5pZl8oc2VsZi5ub3ROdWxsKGxlZnQpLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoYXN0LmNvbXB1dGVkKSB7XG4gICAgICAgICAgICByaWdodCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgICBzZWxmLnJlY3Vyc2UoYXN0LnByb3BlcnR5LCByaWdodCk7XG4gICAgICAgICAgICBzZWxmLmdldFN0cmluZ1ZhbHVlKHJpZ2h0KTtcbiAgICAgICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuaWZfKHNlbGYubm90KHNlbGYuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQpKSwgc2VsZi5sYXp5QXNzaWduKHNlbGYuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQpLCAne30nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHByZXNzaW9uID0gc2VsZi5jb21wdXRlZE1lbWJlcihsZWZ0LCByaWdodCk7XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgaWYgKG5hbWVJZCkge1xuICAgICAgICAgICAgICBuYW1lSWQuY29tcHV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBuYW1lSWQubmFtZSA9IHJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY3JlYXRlICYmIGNyZWF0ZSAhPT0gMSkge1xuICAgICAgICAgICAgICBzZWxmLmlmXyhzZWxmLmlzTnVsbChzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIGFzdC5wcm9wZXJ0eS5uYW1lKSksIHNlbGYubGF6eUFzc2lnbihzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIGFzdC5wcm9wZXJ0eS5uYW1lKSwgJ3t9JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIobGVmdCwgYXN0LnByb3BlcnR5Lm5hbWUpO1xuICAgICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgIGlmIChuYW1lSWQpIHtcbiAgICAgICAgICAgICAgbmFtZUlkLmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIG5hbWVJZC5uYW1lID0gYXN0LnByb3BlcnR5Lm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsICd1bmRlZmluZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICB9LCAhIWNyZWF0ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICAgIGludG9JZCA9IGludG9JZCB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgaWYgKGFzdC5maWx0ZXIpIHtcbiAgICAgICAgcmlnaHQgPSBzZWxmLmZpbHRlcihhc3QuY2FsbGVlLm5hbWUpO1xuICAgICAgICBhcmdzID0gW107XG4gICAgICAgIGZvckVhY2goYXN0LmFyZ3VtZW50cywgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICAgIHZhciBhcmd1bWVudCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgc2VsZi5yZWN1cnNlKGV4cHIsIGFyZ3VtZW50KTtcbiAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXhwcmVzc2lvbiA9IHJpZ2h0ICsgJygnICsgYXJncy5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgIHNlbGYuYXNzaWduKGludG9JZCwgZXhwcmVzc2lvbik7XG4gICAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByaWdodCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgIGxlZnQgPSB7fTtcbiAgICAgICAgYXJncyA9IFtdO1xuICAgICAgICBzZWxmLnJlY3Vyc2UoYXN0LmNhbGxlZSwgcmlnaHQsIGxlZnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuaWZfKHNlbGYubm90TnVsbChyaWdodCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yRWFjaChhc3QuYXJndW1lbnRzLCBmdW5jdGlvbihleHByKSB7XG4gICAgICAgICAgICAgIHNlbGYucmVjdXJzZShleHByLCBhc3QuY29uc3RhbnQgPyB1bmRlZmluZWQgOiBzZWxmLm5leHRJZCgpLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGFyZ3VtZW50KSB7XG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChsZWZ0Lm5hbWUpIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHNlbGYubWVtYmVyKGxlZnQuY29udGV4dCwgbGVmdC5uYW1lLCBsZWZ0LmNvbXB1dGVkKSArICcoJyArIGFyZ3Muam9pbignLCcpICsgJyknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHJpZ2h0ICsgJygnICsgYXJncy5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCAndW5kZWZpbmVkJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVjdXJzaW9uRm4oaW50b0lkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbjpcbiAgICAgIHJpZ2h0ID0gdGhpcy5uZXh0SWQoKTtcbiAgICAgIGxlZnQgPSB7fTtcbiAgICAgIHRoaXMucmVjdXJzZShhc3QubGVmdCwgdW5kZWZpbmVkLCBsZWZ0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5pZl8oc2VsZi5ub3ROdWxsKGxlZnQuY29udGV4dCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucmVjdXJzZShhc3QucmlnaHQsIHJpZ2h0KTtcbiAgICAgICAgICBleHByZXNzaW9uID0gc2VsZi5tZW1iZXIobGVmdC5jb250ZXh0LCBsZWZ0Lm5hbWUsIGxlZnQuY29tcHV0ZWQpICsgYXN0Lm9wZXJhdG9yICsgcmlnaHQ7XG4gICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgICAgICByZWN1cnNpb25GbihpbnRvSWQgfHwgZXhwcmVzc2lvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSwgMSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5BcnJheUV4cHJlc3Npb246XG4gICAgICBhcmdzID0gW107XG4gICAgICBmb3JFYWNoKGFzdC5lbGVtZW50cywgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICBzZWxmLnJlY3Vyc2UoZXhwciwgYXN0LmNvbnN0YW50ID8gdW5kZWZpbmVkIDogc2VsZi5uZXh0SWQoKSwgdW5kZWZpbmVkLCBmdW5jdGlvbihhcmd1bWVudCkge1xuICAgICAgICAgIGFyZ3MucHVzaChhcmd1bWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBleHByZXNzaW9uID0gJ1snICsgYXJncy5qb2luKCcsJykgKyAnXSc7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8IGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuT2JqZWN0RXhwcmVzc2lvbjpcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGNvbXB1dGVkID0gZmFsc2U7XG4gICAgICBmb3JFYWNoKGFzdC5wcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICBpZiAocHJvcGVydHkuY29tcHV0ZWQpIHtcbiAgICAgICAgICBjb21wdXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICAgIGludG9JZCA9IGludG9JZCB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgICB0aGlzLmFzc2lnbihpbnRvSWQsICd7fScpO1xuICAgICAgICBmb3JFYWNoKGFzdC5wcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICAgIGlmIChwcm9wZXJ0eS5jb21wdXRlZCkge1xuICAgICAgICAgICAgbGVmdCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgICBzZWxmLnJlY3Vyc2UocHJvcGVydHkua2V5LCBsZWZ0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGVmdCA9IHByb3BlcnR5LmtleS50eXBlID09PSBBU1QuSWRlbnRpZmllciA/XG4gICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LmtleS5uYW1lIDpcbiAgICAgICAgICAgICAgICAgICAgICAgKCcnICsgcHJvcGVydHkua2V5LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmlnaHQgPSBzZWxmLm5leHRJZCgpO1xuICAgICAgICAgIHNlbGYucmVjdXJzZShwcm9wZXJ0eS52YWx1ZSwgcmlnaHQpO1xuICAgICAgICAgIHNlbGYuYXNzaWduKHNlbGYubWVtYmVyKGludG9JZCwgbGVmdCwgcHJvcGVydHkuY29tcHV0ZWQpLCByaWdodCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgICBzZWxmLnJlY3Vyc2UocHJvcGVydHkudmFsdWUsIGFzdC5jb25zdGFudCA/IHVuZGVmaW5lZCA6IHNlbGYubmV4dElkKCksIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICAgICAgYXJncy5wdXNoKHNlbGYuZXNjYXBlKFxuICAgICAgICAgICAgICAgIHByb3BlcnR5LmtleS50eXBlID09PSBBU1QuSWRlbnRpZmllciA/IHByb3BlcnR5LmtleS5uYW1lIDpcbiAgICAgICAgICAgICAgICAgICgnJyArIHByb3BlcnR5LmtleS52YWx1ZSkpICtcbiAgICAgICAgICAgICAgICAnOicgKyBleHByKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGV4cHJlc3Npb24gPSAneycgKyBhcmdzLmpvaW4oJywnKSArICd9JztcbiAgICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCB8fCBleHByZXNzaW9uKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQVNULlRoaXNFeHByZXNzaW9uOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAncycpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICdzJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAnbCcpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICdsJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5OR1ZhbHVlUGFyYW1ldGVyOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAndicpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICd2Jyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH0sXG5cbiAgZ2V0SGFzT3duUHJvcGVydHk6IGZ1bmN0aW9uKGVsZW1lbnQsIHByb3BlcnR5KSB7XG4gICAgdmFyIGtleSA9IGVsZW1lbnQgKyAnLicgKyBwcm9wZXJ0eTtcbiAgICB2YXIgb3duID0gdGhpcy5jdXJyZW50KCkub3duO1xuICAgIGlmICghb3duLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIG93bltrZXldID0gdGhpcy5uZXh0SWQoZmFsc2UsIGVsZW1lbnQgKyAnJiYoJyArIHRoaXMuZXNjYXBlKHByb3BlcnR5KSArICcgaW4gJyArIGVsZW1lbnQgKyAnKScpO1xuICAgIH1cbiAgICByZXR1cm4gb3duW2tleV07XG4gIH0sXG5cbiAgYXNzaWduOiBmdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgICBpZiAoIWlkKSByZXR1cm47XG4gICAgdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKGlkLCAnPScsIHZhbHVlLCAnOycpO1xuICAgIHJldHVybiBpZDtcbiAgfSxcblxuICBmaWx0ZXI6IGZ1bmN0aW9uKGZpbHRlck5hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShmaWx0ZXJOYW1lKSkge1xuICAgICAgdGhpcy5zdGF0ZS5maWx0ZXJzW2ZpbHRlck5hbWVdID0gdGhpcy5uZXh0SWQodHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlLmZpbHRlcnNbZmlsdGVyTmFtZV07XG4gIH0sXG5cbiAgaWZEZWZpbmVkOiBmdW5jdGlvbihpZCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuICdpZkRlZmluZWQoJyArIGlkICsgJywnICsgdGhpcy5lc2NhcGUoZGVmYXVsdFZhbHVlKSArICcpJztcbiAgfSxcblxuICBwbHVzOiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiAncGx1cygnICsgbGVmdCArICcsJyArIHJpZ2h0ICsgJyknO1xuICB9LFxuXG4gIHJldHVybl86IGZ1bmN0aW9uKGlkKSB7XG4gICAgdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKCdyZXR1cm4gJywgaWQsICc7Jyk7XG4gIH0sXG5cbiAgaWZfOiBmdW5jdGlvbih0ZXN0LCBhbHRlcm5hdGUsIGNvbnNlcXVlbnQpIHtcbiAgICBpZiAodGVzdCA9PT0gdHJ1ZSkge1xuICAgICAgYWx0ZXJuYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBib2R5ID0gdGhpcy5jdXJyZW50KCkuYm9keTtcbiAgICAgIGJvZHkucHVzaCgnaWYoJywgdGVzdCwgJyl7Jyk7XG4gICAgICBhbHRlcm5hdGUoKTtcbiAgICAgIGJvZHkucHVzaCgnfScpO1xuICAgICAgaWYgKGNvbnNlcXVlbnQpIHtcbiAgICAgICAgYm9keS5wdXNoKCdlbHNleycpO1xuICAgICAgICBjb25zZXF1ZW50KCk7XG4gICAgICAgIGJvZHkucHVzaCgnfScpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBub3Q6IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHtcbiAgICByZXR1cm4gJyEoJyArIGV4cHJlc3Npb24gKyAnKSc7XG4gIH0sXG5cbiAgaXNOdWxsOiBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24gKyAnPT1udWxsJztcbiAgfSxcblxuICBub3ROdWxsOiBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24gKyAnIT1udWxsJztcbiAgfSxcblxuICBub25Db21wdXRlZE1lbWJlcjogZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcbiAgICB2YXIgU0FGRV9JREVOVElGSUVSID0gL15bJF9hLXpBLVpdWyRfYS16QS1aMC05XSokLztcbiAgICB2YXIgVU5TQUZFX0NIQVJBQ1RFUlMgPSAvW14kX2EtekEtWjAtOV0vZztcbiAgICBpZiAoU0FGRV9JREVOVElGSUVSLnRlc3QocmlnaHQpKSB7XG4gICAgICByZXR1cm4gbGVmdCArICcuJyArIHJpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbGVmdCAgKyAnW1wiJyArIHJpZ2h0LnJlcGxhY2UoVU5TQUZFX0NIQVJBQ1RFUlMsIHRoaXMuc3RyaW5nRXNjYXBlRm4pICsgJ1wiXSc7XG4gICAgfVxuICB9LFxuXG4gIGNvbXB1dGVkTWVtYmVyOiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiBsZWZ0ICsgJ1snICsgcmlnaHQgKyAnXSc7XG4gIH0sXG5cbiAgbWVtYmVyOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29tcHV0ZWQpIHtcbiAgICBpZiAoY29tcHV0ZWQpIHJldHVybiB0aGlzLmNvbXB1dGVkTWVtYmVyKGxlZnQsIHJpZ2h0KTtcbiAgICByZXR1cm4gdGhpcy5ub25Db21wdXRlZE1lbWJlcihsZWZ0LCByaWdodCk7XG4gIH0sXG5cbiAgZ2V0U3RyaW5nVmFsdWU6IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB0aGlzLmFzc2lnbihpdGVtLCAnZ2V0U3RyaW5nVmFsdWUoJyArIGl0ZW0gKyAnKScpO1xuICB9LFxuXG4gIGxhenlSZWN1cnNlOiBmdW5jdGlvbihhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKTtcbiAgICB9O1xuICB9LFxuXG4gIGxhenlBc3NpZ246IGZ1bmN0aW9uKGlkLCB2YWx1ZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmFzc2lnbihpZCwgdmFsdWUpO1xuICAgIH07XG4gIH0sXG5cbiAgc3RyaW5nRXNjYXBlUmVnZXg6IC9bXiBhLXpBLVowLTldL2csXG5cbiAgc3RyaW5nRXNjYXBlRm46IGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gJ1xcXFx1JyArICgnMDAwMCcgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG4gIH0sXG5cbiAgZXNjYXBlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHJldHVybiAnXFwnJyArIHZhbHVlLnJlcGxhY2UodGhpcy5zdHJpbmdFc2NhcGVSZWdleCwgdGhpcy5zdHJpbmdFc2NhcGVGbikgKyAnXFwnJztcbiAgICBpZiAoaXNOdW1iZXIodmFsdWUpKSByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICBpZiAodmFsdWUgPT09IHRydWUpIHJldHVybiAndHJ1ZSc7XG4gICAgaWYgKHZhbHVlID09PSBmYWxzZSkgcmV0dXJuICdmYWxzZSc7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gJ251bGwnO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG5cbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2VzYycsICdJTVBPU1NJQkxFJyk7XG4gIH0sXG5cbiAgbmV4dElkOiBmdW5jdGlvbihza2lwLCBpbml0KSB7XG4gICAgdmFyIGlkID0gJ3YnICsgKHRoaXMuc3RhdGUubmV4dElkKyspO1xuICAgIGlmICghc2tpcCkge1xuICAgICAgdGhpcy5jdXJyZW50KCkudmFycy5wdXNoKGlkICsgKGluaXQgPyAnPScgKyBpbml0IDogJycpKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xuICB9LFxuXG4gIGN1cnJlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMuc3RhdGUuY29tcHV0aW5nXTtcbiAgfVxufTtcblxuXG5mdW5jdGlvbiBBU1RJbnRlcnByZXRlcigkZmlsdGVyKSB7XG4gIHRoaXMuJGZpbHRlciA9ICRmaWx0ZXI7XG59XG5cbkFTVEludGVycHJldGVyLnByb3RvdHlwZSA9IHtcbiAgY29tcGlsZTogZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LCBzZWxmLiRmaWx0ZXIpO1xuICAgIHZhciBhc3NpZ25hYmxlO1xuICAgIHZhciBhc3NpZ247XG4gICAgaWYgKChhc3NpZ25hYmxlID0gYXNzaWduYWJsZUFTVChhc3QpKSkge1xuICAgICAgYXNzaWduID0gdGhpcy5yZWN1cnNlKGFzc2lnbmFibGUpO1xuICAgIH1cbiAgICB2YXIgdG9XYXRjaCA9IGdldElucHV0cyhhc3QuYm9keSk7XG4gICAgdmFyIGlucHV0cztcbiAgICBpZiAodG9XYXRjaCkge1xuICAgICAgaW5wdXRzID0gW107XG4gICAgICBmb3JFYWNoKHRvV2F0Y2gsIGZ1bmN0aW9uKHdhdGNoLCBrZXkpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gc2VsZi5yZWN1cnNlKHdhdGNoKTtcbiAgICAgICAgaW5wdXQuaXNQdXJlID0gd2F0Y2guaXNQdXJlO1xuICAgICAgICB3YXRjaC5pbnB1dCA9IGlucHV0O1xuICAgICAgICBpbnB1dHMucHVzaChpbnB1dCk7XG4gICAgICAgIHdhdGNoLndhdGNoSWQgPSBrZXk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdmFyIGV4cHJlc3Npb25zID0gW107XG4gICAgZm9yRWFjaChhc3QuYm9keSwgZnVuY3Rpb24oZXhwcmVzc2lvbikge1xuICAgICAgZXhwcmVzc2lvbnMucHVzaChzZWxmLnJlY3Vyc2UoZXhwcmVzc2lvbi5leHByZXNzaW9uKSk7XG4gICAgfSk7XG4gICAgdmFyIGZuID0gYXN0LmJvZHkubGVuZ3RoID09PSAwID8gbm9vcCA6XG4gICAgICAgICAgICAgYXN0LmJvZHkubGVuZ3RoID09PSAxID8gZXhwcmVzc2lvbnNbMF0gOlxuICAgICAgICAgICAgIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XG4gICAgICAgICAgICAgICBmb3JFYWNoKGV4cHJlc3Npb25zLCBmdW5jdGlvbihleHApIHtcbiAgICAgICAgICAgICAgICAgbGFzdFZhbHVlID0gZXhwKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICByZXR1cm4gbGFzdFZhbHVlO1xuICAgICAgICAgICAgIH07XG4gICAgaWYgKGFzc2lnbikge1xuICAgICAgZm4uYXNzaWduID0gZnVuY3Rpb24oc2NvcGUsIHZhbHVlLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuIGFzc2lnbihzY29wZSwgbG9jYWxzLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5wdXRzKSB7XG4gICAgICBmbi5pbnB1dHMgPSBpbnB1dHM7XG4gICAgfVxuICAgIHJldHVybiBmbjtcbiAgfSxcblxuICByZWN1cnNlOiBmdW5jdGlvbihhc3QsIGNvbnRleHQsIGNyZWF0ZSkge1xuICAgIHZhciBsZWZ0LCByaWdodCwgc2VsZiA9IHRoaXMsIGFyZ3M7XG4gICAgaWYgKGFzdC5pbnB1dCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5wdXRzKGFzdC5pbnB1dCwgYXN0LndhdGNoSWQpO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFzdC50eXBlKSB7XG4gICAgY2FzZSBBU1QuTGl0ZXJhbDpcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlKGFzdC52YWx1ZSwgY29udGV4dCk7XG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LmFyZ3VtZW50KTtcbiAgICAgIHJldHVybiB0aGlzWyd1bmFyeScgKyBhc3Qub3BlcmF0b3JdKHJpZ2h0LCBjb250ZXh0KTtcbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IHRoaXMucmVjdXJzZShhc3QubGVmdCk7XG4gICAgICByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucmlnaHQpO1xuICAgICAgcmV0dXJuIHRoaXNbJ2JpbmFyeScgKyBhc3Qub3BlcmF0b3JdKGxlZnQsIHJpZ2h0LCBjb250ZXh0KTtcbiAgICBjYXNlIEFTVC5Mb2dpY2FsRXhwcmVzc2lvbjpcbiAgICAgIGxlZnQgPSB0aGlzLnJlY3Vyc2UoYXN0LmxlZnQpO1xuICAgICAgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LnJpZ2h0KTtcbiAgICAgIHJldHVybiB0aGlzWydiaW5hcnknICsgYXN0Lm9wZXJhdG9yXShsZWZ0LCByaWdodCwgY29udGV4dCk7XG4gICAgY2FzZSBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIHRoaXNbJ3Rlcm5hcnk/OiddKFxuICAgICAgICB0aGlzLnJlY3Vyc2UoYXN0LnRlc3QpLFxuICAgICAgICB0aGlzLnJlY3Vyc2UoYXN0LmFsdGVybmF0ZSksXG4gICAgICAgIHRoaXMucmVjdXJzZShhc3QuY29uc2VxdWVudCksXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgY2FzZSBBU1QuSWRlbnRpZmllcjpcbiAgICAgIHJldHVybiBzZWxmLmlkZW50aWZpZXIoYXN0Lm5hbWUsIGNvbnRleHQsIGNyZWF0ZSk7XG4gICAgY2FzZSBBU1QuTWVtYmVyRXhwcmVzc2lvbjpcbiAgICAgIGxlZnQgPSB0aGlzLnJlY3Vyc2UoYXN0Lm9iamVjdCwgZmFsc2UsICEhY3JlYXRlKTtcbiAgICAgIGlmICghYXN0LmNvbXB1dGVkKSB7XG4gICAgICAgIHJpZ2h0ID0gYXN0LnByb3BlcnR5Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAoYXN0LmNvbXB1dGVkKSByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucHJvcGVydHkpO1xuICAgICAgcmV0dXJuIGFzdC5jb21wdXRlZCA/XG4gICAgICAgIHRoaXMuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQsIGNvbnRleHQsIGNyZWF0ZSkgOlxuICAgICAgICB0aGlzLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIHJpZ2h0LCBjb250ZXh0LCBjcmVhdGUpO1xuICAgIGNhc2UgQVNULkNhbGxFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QuYXJndW1lbnRzLCBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIGFyZ3MucHVzaChzZWxmLnJlY3Vyc2UoZXhwcikpO1xuICAgICAgfSk7XG4gICAgICBpZiAoYXN0LmZpbHRlcikgcmlnaHQgPSB0aGlzLiRmaWx0ZXIoYXN0LmNhbGxlZS5uYW1lKTtcbiAgICAgIGlmICghYXN0LmZpbHRlcikgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LmNhbGxlZSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gYXN0LmZpbHRlciA/XG4gICAgICAgIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2goYXJnc1tpXShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdmFsdWUgPSByaWdodC5hcHBseSh1bmRlZmluZWQsIHZhbHVlcywgaW5wdXRzKTtcbiAgICAgICAgICByZXR1cm4gY29udGV4dCA/IHtjb250ZXh0OiB1bmRlZmluZWQsIG5hbWU6IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgICB9IDpcbiAgICAgICAgZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICBpZiAocmhzLnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChhcmdzW2ldKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IHJocy52YWx1ZS5hcHBseShyaHMuY29udGV4dCwgdmFsdWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgICB9O1xuICAgIGNhc2UgQVNULkFzc2lnbm1lbnRFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IHRoaXMucmVjdXJzZShhc3QubGVmdCwgdHJ1ZSwgMSk7XG4gICAgICByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucmlnaHQpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgIHZhciBsaHMgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgdmFyIHJocyA9IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgbGhzLmNvbnRleHRbbGhzLm5hbWVdID0gcmhzO1xuICAgICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogcmhzfSA6IHJocztcbiAgICAgIH07XG4gICAgY2FzZSBBU1QuQXJyYXlFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QuZWxlbWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgYXJncy5wdXNoKHNlbGYucmVjdXJzZShleHByKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgdmFsdWUucHVzaChhcmdzW2ldKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgfTtcbiAgICBjYXNlIEFTVC5PYmplY3RFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgaWYgKHByb3BlcnR5LmNvbXB1dGVkKSB7XG4gICAgICAgICAgYXJncy5wdXNoKHtrZXk6IHNlbGYucmVjdXJzZShwcm9wZXJ0eS5rZXkpLFxuICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5yZWN1cnNlKHByb3BlcnR5LnZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFyZ3MucHVzaCh7a2V5OiBwcm9wZXJ0eS5rZXkudHlwZSA9PT0gQVNULklkZW50aWZpZXIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5rZXkubmFtZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICgnJyArIHByb3BlcnR5LmtleS52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICBjb21wdXRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5yZWN1cnNlKHByb3BlcnR5LnZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgaWYgKGFyZ3NbaV0uY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIHZhbHVlW2FyZ3NbaV0ua2V5KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKV0gPSBhcmdzW2ldLnZhbHVlKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWVbYXJnc1tpXS5rZXldID0gYXJnc1tpXS52YWx1ZShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiB2YWx1ZX0gOiB2YWx1ZTtcbiAgICAgIH07XG4gICAgY2FzZSBBU1QuVGhpc0V4cHJlc3Npb246XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHNjb3BlfSA6IHNjb3BlO1xuICAgICAgfTtcbiAgICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGxvY2Fsc30gOiBsb2NhbHM7XG4gICAgICB9O1xuICAgIGNhc2UgQVNULk5HVmFsdWVQYXJhbWV0ZXI6XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhc3NpZ259IDogYXNzaWduO1xuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgJ3VuYXJ5Kyc6IGZ1bmN0aW9uKGFyZ3VtZW50LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gYXJndW1lbnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgaWYgKGlzRGVmaW5lZChhcmcpKSB7XG4gICAgICAgIGFyZyA9ICthcmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ3VuYXJ5LSc6IGZ1bmN0aW9uKGFyZ3VtZW50LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gYXJndW1lbnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgaWYgKGlzRGVmaW5lZChhcmcpKSB7XG4gICAgICAgIGFyZyA9IC1hcmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSAtMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICd1bmFyeSEnOiBmdW5jdGlvbihhcmd1bWVudCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9ICFhcmd1bWVudChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Kyc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgbGhzID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIGFyZyA9IHBsdXNGbihsaHMsIHJocyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5LSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgbGhzID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIGFyZyA9IChpc0RlZmluZWQobGhzKSA/IGxocyA6IDApIC0gKGlzRGVmaW5lZChyaHMpID8gcmhzIDogMCk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Kic6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgKiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Lyc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgLyByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5JSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgJSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PT09JzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSA9PT0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSE9PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgIT09IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICdiaW5hcnk9PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPT0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSE9JzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSAhPSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PCc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPCByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Pic6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PD0nOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIDw9IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICdiaW5hcnk+PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPj0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSYmJzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSAmJiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5fHwnOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHx8IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICd0ZXJuYXJ5PzonOiBmdW5jdGlvbih0ZXN0LCBhbHRlcm5hdGUsIGNvbnNlcXVlbnQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSB0ZXN0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSA/IGFsdGVybmF0ZShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgOiBjb25zZXF1ZW50KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gIHZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbnRleHQgPyB7Y29udGV4dDogdW5kZWZpbmVkLCBuYW1lOiB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX0gOiB2YWx1ZTsgfTtcbiAgfSxcbiAgaWRlbnRpZmllcjogZnVuY3Rpb24obmFtZSwgY29udGV4dCwgY3JlYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYmFzZSA9IGxvY2FscyAmJiAobmFtZSBpbiBsb2NhbHMpID8gbG9jYWxzIDogc2NvcGU7XG4gICAgICBpZiAoY3JlYXRlICYmIGNyZWF0ZSAhPT0gMSAmJiBiYXNlICYmIGJhc2VbbmFtZV0gPT0gbnVsbCkge1xuICAgICAgICBiYXNlW25hbWVdID0ge307XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBiYXNlID8gYmFzZVtuYW1lXSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB7Y29udGV4dDogYmFzZSwgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICBjb21wdXRlZE1lbWJlcjogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQsIGNyZWF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGxocyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIHJocztcbiAgICAgIHZhciB2YWx1ZTtcbiAgICAgIGlmIChsaHMgIT0gbnVsbCkge1xuICAgICAgICByaHMgPSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgIHJocyA9IGdldFN0cmluZ1ZhbHVlKHJocyk7XG4gICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgaWYgKGxocyAmJiAhKGxoc1tyaHNdKSkge1xuICAgICAgICAgICAgbGhzW3Joc10gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSBsaHNbcmhzXTtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB7Y29udGV4dDogbGhzLCBuYW1lOiByaHMsIHZhbHVlOiB2YWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgbm9uQ29tcHV0ZWRNZW1iZXI6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0LCBjcmVhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBsaHMgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgIGlmIChsaHMgJiYgbGhzW3JpZ2h0XSA9PSBudWxsKSB7XG4gICAgICAgICAgbGhzW3JpZ2h0XSA9IHt9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBsaHMgIT0gbnVsbCA/IGxoc1tyaWdodF0gOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICByZXR1cm4ge2NvbnRleHQ6IGxocywgbmFtZTogcmlnaHQsIHZhbHVlOiB2YWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgaW5wdXRzOiBmdW5jdGlvbihpbnB1dCwgd2F0Y2hJZCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgdmFsdWUsIGxvY2FscywgaW5wdXRzKSB7XG4gICAgICBpZiAoaW5wdXRzKSByZXR1cm4gaW5wdXRzW3dhdGNoSWRdO1xuICAgICAgcmV0dXJuIGlucHV0KHNjb3BlLCB2YWx1ZSwgbG9jYWxzKTtcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBQYXJzZXIobGV4ZXIsICRmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5hc3QgPSBuZXcgQVNUKGxleGVyLCBvcHRpb25zKTtcbiAgdGhpcy5hc3RDb21waWxlciA9IG9wdGlvbnMuY3NwID8gbmV3IEFTVEludGVycHJldGVyKCRmaWx0ZXIpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEFTVENvbXBpbGVyKCRmaWx0ZXIpO1xufVxuXG5QYXJzZXIucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUGFyc2VyLFxuXG4gIHBhcnNlOiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgdmFyIGFzdCA9IHRoaXMuZ2V0QXN0KHRleHQpO1xuICAgIHZhciBmbiA9IHRoaXMuYXN0Q29tcGlsZXIuY29tcGlsZShhc3QuYXN0KTtcbiAgICBmbi5saXRlcmFsID0gaXNMaXRlcmFsKGFzdC5hc3QpO1xuICAgIGZuLmNvbnN0YW50ID0gaXNDb25zdGFudChhc3QuYXN0KTtcbiAgICBmbi5vbmVUaW1lID0gYXN0Lm9uZVRpbWU7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIGdldEFzdDogZnVuY3Rpb24oZXhwKSB7XG4gICAgdmFyIG9uZVRpbWUgPSBmYWxzZTtcbiAgICBleHAgPSBleHAudHJpbSgpO1xuXG4gICAgaWYgKGV4cC5jaGFyQXQoMCkgPT09ICc6JyAmJiBleHAuY2hhckF0KDEpID09PSAnOicpIHtcbiAgICAgIG9uZVRpbWUgPSB0cnVlO1xuICAgICAgZXhwID0gZXhwLnN1YnN0cmluZygyKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFzdDogdGhpcy5hc3QuYXN0KGV4cCksXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0VmFsdWVPZih2YWx1ZSkge1xuICByZXR1cm4gaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKSA/IHZhbHVlLnZhbHVlT2YoKSA6IG9iamVjdFZhbHVlT2YuY2FsbCh2YWx1ZSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRwYXJzZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBDb252ZXJ0cyBBbmd1bGFySlMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaW50byBhIGZ1bmN0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBnZXR0ZXIgPSAkcGFyc2UoJ3VzZXIubmFtZScpO1xuICogICB2YXIgc2V0dGVyID0gZ2V0dGVyLmFzc2lnbjtcbiAqICAgdmFyIGNvbnRleHQgPSB7dXNlcjp7bmFtZTonQW5ndWxhckpTJ319O1xuICogICB2YXIgbG9jYWxzID0ge3VzZXI6e25hbWU6J2xvY2FsJ319O1xuICpcbiAqICAgZXhwZWN0KGdldHRlcihjb250ZXh0KSkudG9FcXVhbCgnQW5ndWxhckpTJyk7XG4gKiAgIHNldHRlcihjb250ZXh0LCAnbmV3VmFsdWUnKTtcbiAqICAgZXhwZWN0KGNvbnRleHQudXNlci5uYW1lKS50b0VxdWFsKCduZXdWYWx1ZScpO1xuICogICBleHBlY3QoZ2V0dGVyKGNvbnRleHQsIGxvY2FscykpLnRvRXF1YWwoJ2xvY2FsJyk7XG4gKiBgYGBcbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gKlxuICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xuICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXG4gKiAgICAgIGBjb250ZXh0YC5cbiAqXG4gKiAgICBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gYWxzbyBoYXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogICAgICAqIGBsaXRlcmFsYCDigJMgYHtib29sZWFufWAg4oCTIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24ncyB0b3AtbGV2ZWwgbm9kZSBpcyBhIEphdmFTY3JpcHRcbiAqICAgICAgICBsaXRlcmFsLlxuICogICAgICAqIGBjb25zdGFudGAg4oCTIGB7Ym9vbGVhbn1gIOKAkyB3aGV0aGVyIHRoZSBleHByZXNzaW9uIGlzIG1hZGUgZW50aXJlbHkgb2YgSmF2YVNjcmlwdFxuICogICAgICAgIGNvbnN0YW50IGxpdGVyYWxzLlxuICogICAgICAqIGBhc3NpZ25gIOKAkyBgez9mdW5jdGlvbihjb250ZXh0LCB2YWx1ZSl9YCDigJMgaWYgdGhlIGV4cHJlc3Npb24gaXMgYXNzaWduYWJsZSwgdGhpcyB3aWxsIGJlXG4gKiAgICAgICAgc2V0IHRvIGEgZnVuY3Rpb24gdG8gY2hhbmdlIGl0cyB2YWx1ZSBvbiB0aGUgZ2l2ZW4gY29udGV4dC5cbiAqXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHBhcnNlUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgJHBhcnNlUHJvdmlkZXJgIGNhbiBiZSB1c2VkIGZvciBjb25maWd1cmluZyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUge0BsaW5rIG5nLiRwYXJzZSAkcGFyc2V9XG4gKiAgc2VydmljZS5cbiAqL1xuZnVuY3Rpb24gJFBhcnNlUHJvdmlkZXIoKSB7XG4gIHZhciBjYWNoZSA9IGNyZWF0ZU1hcCgpO1xuICB2YXIgbGl0ZXJhbHMgPSB7XG4gICAgJ3RydWUnOiB0cnVlLFxuICAgICdmYWxzZSc6IGZhbHNlLFxuICAgICdudWxsJzogbnVsbCxcbiAgICAndW5kZWZpbmVkJzogdW5kZWZpbmVkXG4gIH07XG4gIHZhciBpZGVudFN0YXJ0LCBpZGVudENvbnRpbnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRwYXJzZVByb3ZpZGVyI2FkZExpdGVyYWxcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIENvbmZpZ3VyZSAkcGFyc2Ugc2VydmljZSB0byBhZGQgbGl0ZXJhbCB2YWx1ZXMgdGhhdCB3aWxsIGJlIHByZXNlbnQgYXMgbGl0ZXJhbCBhdCBleHByZXNzaW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxpdGVyYWxOYW1lIFRva2VuIGZvciB0aGUgbGl0ZXJhbCB2YWx1ZS4gVGhlIGxpdGVyYWwgbmFtZSB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgbGl0ZXJhbCBuYW1lLlxuICAgKiBAcGFyYW0geyp9IGxpdGVyYWxWYWx1ZSBWYWx1ZSBmb3IgdGhpcyBsaXRlcmFsLiBBbGwgbGl0ZXJhbCB2YWx1ZXMgbXVzdCBiZSBwcmltaXRpdmVzIG9yIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiovXG4gIHRoaXMuYWRkTGl0ZXJhbCA9IGZ1bmN0aW9uKGxpdGVyYWxOYW1lLCBsaXRlcmFsVmFsdWUpIHtcbiAgICBsaXRlcmFsc1tsaXRlcmFsTmFtZV0gPSBsaXRlcmFsVmFsdWU7XG4gIH07XG5cbiAvKipcbiAgKiBAbmdkb2MgbWV0aG9kXG4gICogQG5hbWUgJHBhcnNlUHJvdmlkZXIjc2V0SWRlbnRpZmllckZuc1xuICAqXG4gICogQGRlc2NyaXB0aW9uXG4gICpcbiAgKiBBbGxvd3MgZGVmaW5pbmcgdGhlIHNldCBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIGFsbG93ZWQgaW4gQW5ndWxhckpTIGV4cHJlc3Npb25zLiBUaGUgZnVuY3Rpb25cbiAgKiBgaWRlbnRpZmllclN0YXJ0YCB3aWxsIGdldCBjYWxsZWQgdG8ga25vdyBpZiBhIGdpdmVuIGNoYXJhY3RlciBpcyBhIHZhbGlkIGNoYXJhY3RlciB0byBiZSB0aGVcbiAgKiBmaXJzdCBjaGFyYWN0ZXIgZm9yIGFuIGlkZW50aWZpZXIuIFRoZSBmdW5jdGlvbiBgaWRlbnRpZmllckNvbnRpbnVlYCB3aWxsIGdldCBjYWxsZWQgdG8ga25vdyBpZlxuICAqIGEgZ2l2ZW4gY2hhcmFjdGVyIGlzIGEgdmFsaWQgY2hhcmFjdGVyIHRvIGJlIGEgZm9sbG93LXVwIGlkZW50aWZpZXIgY2hhcmFjdGVyLiBUaGUgZnVuY3Rpb25zXG4gICogYGlkZW50aWZpZXJTdGFydGAgYW5kIGBpZGVudGlmaWVyQ29udGludWVgIHdpbGwgcmVjZWl2ZSBhcyBhcmd1bWVudHMgdGhlIHNpbmdsZSBjaGFyYWN0ZXIgdG8gYmVcbiAgKiBpZGVudGlmaWVyIGFuZCB0aGUgY2hhcmFjdGVyIGNvZGUgcG9pbnQuIFRoZXNlIGFyZ3VtZW50cyB3aWxsIGJlIGBzdHJpbmdgIGFuZCBgbnVtZXJpY2AuIEtlZXAgaW5cbiAgKiBtaW5kIHRoYXQgdGhlIGBzdHJpbmdgIHBhcmFtZXRlciBjYW4gYmUgdHdvIGNoYXJhY3RlcnMgbG9uZyBkZXBlbmRpbmcgb24gdGhlIGNoYXJhY3RlclxuICAqIHJlcHJlc2VudGF0aW9uLiBJdCBpcyBleHBlY3RlZCBmb3IgdGhlIGZ1bmN0aW9uIHRvIHJldHVybiBgdHJ1ZWAgb3IgYGZhbHNlYCwgd2hldGhlciB0aGF0XG4gICogY2hhcmFjdGVyIGlzIGFsbG93ZWQgb3Igbm90LlxuICAqXG4gICogU2luY2UgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBleHRlbnNpdmVseSwga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlc2UgZnVuY3Rpb25zIGZhc3QsXG4gICogYXMgdGhlIHBlcmZvcm1hbmNlIG9mIHRoZXNlIGZ1bmN0aW9ucyBoYXZlIGEgZGlyZWN0IGltcGFjdCBvbiB0aGUgZXhwcmVzc2lvbnMgcGFyc2luZyBzcGVlZC5cbiAgKlxuICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBpZGVudGlmaWVyU3RhcnQgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBkZWNpZGUgd2hldGhlciB0aGUgZ2l2ZW4gY2hhcmFjdGVyIGlzXG4gICogICBhIHZhbGlkIGlkZW50aWZpZXIgc3RhcnQgY2hhcmFjdGVyLlxuICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBpZGVudGlmaWVyQ29udGludWUgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBkZWNpZGUgd2hldGhlciB0aGUgZ2l2ZW4gY2hhcmFjdGVyIGlzXG4gICogICBhIHZhbGlkIGlkZW50aWZpZXIgY29udGludWUgY2hhcmFjdGVyLlxuICAqL1xuICB0aGlzLnNldElkZW50aWZpZXJGbnMgPSBmdW5jdGlvbihpZGVudGlmaWVyU3RhcnQsIGlkZW50aWZpZXJDb250aW51ZSkge1xuICAgIGlkZW50U3RhcnQgPSBpZGVudGlmaWVyU3RhcnQ7XG4gICAgaWRlbnRDb250aW51ZSA9IGlkZW50aWZpZXJDb250aW51ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyRmaWx0ZXInLCBmdW5jdGlvbigkZmlsdGVyKSB7XG4gICAgdmFyIG5vVW5zYWZlRXZhbCA9IGNzcCgpLm5vVW5zYWZlRXZhbDtcbiAgICB2YXIgJHBhcnNlT3B0aW9ucyA9IHtcbiAgICAgICAgICBjc3A6IG5vVW5zYWZlRXZhbCxcbiAgICAgICAgICBsaXRlcmFsczogY29weShsaXRlcmFscyksXG4gICAgICAgICAgaXNJZGVudGlmaWVyU3RhcnQ6IGlzRnVuY3Rpb24oaWRlbnRTdGFydCkgJiYgaWRlbnRTdGFydCxcbiAgICAgICAgICBpc0lkZW50aWZpZXJDb250aW51ZTogaXNGdW5jdGlvbihpZGVudENvbnRpbnVlKSAmJiBpZGVudENvbnRpbnVlXG4gICAgICAgIH07XG4gICAgJHBhcnNlLiQkZ2V0QXN0ID0gJCRnZXRBc3Q7XG4gICAgcmV0dXJuICRwYXJzZTtcblxuICAgIGZ1bmN0aW9uICRwYXJzZShleHAsIGludGVyY2VwdG9yRm4pIHtcbiAgICAgIHZhciBwYXJzZWRFeHByZXNzaW9uLCBjYWNoZUtleTtcblxuICAgICAgc3dpdGNoICh0eXBlb2YgZXhwKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgZXhwID0gZXhwLnRyaW0oKTtcbiAgICAgICAgICBjYWNoZUtleSA9IGV4cDtcblxuICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBjYWNoZVtjYWNoZUtleV07XG5cbiAgICAgICAgICBpZiAoIXBhcnNlZEV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIHZhciBsZXhlciA9IG5ldyBMZXhlcigkcGFyc2VPcHRpb25zKTtcbiAgICAgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKGxleGVyLCAkZmlsdGVyLCAkcGFyc2VPcHRpb25zKTtcbiAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBwYXJzZXIucGFyc2UoZXhwKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWRFeHByZXNzaW9uLmNvbnN0YW50KSB7XG4gICAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlID0gY29uc3RhbnRXYXRjaERlbGVnYXRlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRFeHByZXNzaW9uLm9uZVRpbWUpIHtcbiAgICAgICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBwYXJzZWRFeHByZXNzaW9uLmxpdGVyYWwgP1xuICAgICAgICAgICAgICAgICAgb25lVGltZUxpdGVyYWxXYXRjaERlbGVnYXRlIDogb25lVGltZVdhdGNoRGVsZWdhdGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlZEV4cHJlc3Npb24uaW5wdXRzKSB7XG4gICAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlID0gaW5wdXRzV2F0Y2hEZWxlZ2F0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhY2hlW2NhY2hlS2V5XSA9IHBhcnNlZEV4cHJlc3Npb247XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBhZGRJbnRlcmNlcHRvcihwYXJzZWRFeHByZXNzaW9uLCBpbnRlcmNlcHRvckZuKTtcblxuICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgcmV0dXJuIGFkZEludGVyY2VwdG9yKGV4cCwgaW50ZXJjZXB0b3JGbik7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gYWRkSW50ZXJjZXB0b3Iobm9vcCwgaW50ZXJjZXB0b3JGbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gJCRnZXRBc3QoZXhwKSB7XG4gICAgICB2YXIgbGV4ZXIgPSBuZXcgTGV4ZXIoJHBhcnNlT3B0aW9ucyk7XG4gICAgICB2YXIgcGFyc2VyID0gbmV3IFBhcnNlcihsZXhlciwgJGZpbHRlciwgJHBhcnNlT3B0aW9ucyk7XG4gICAgICByZXR1cm4gcGFyc2VyLmdldEFzdChleHApLmFzdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrKG5ld1ZhbHVlLCBvbGRWYWx1ZU9mVmFsdWUsIGNvbXBhcmVPYmplY3RJZGVudGl0eSkge1xuXG4gICAgICBpZiAobmV3VmFsdWUgPT0gbnVsbCB8fCBvbGRWYWx1ZU9mVmFsdWUgPT0gbnVsbCkgeyAvLyBudWxsL3VuZGVmaW5lZFxuICAgICAgICByZXR1cm4gbmV3VmFsdWUgPT09IG9sZFZhbHVlT2ZWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcpIHtcblxuICAgICAgICAvLyBhdHRlbXB0IHRvIGNvbnZlcnQgdGhlIHZhbHVlIHRvIGEgcHJpbWl0aXZlIHR5cGVcbiAgICAgICAgLy8gVE9ETyhkb2NzKTogYWRkIGEgbm90ZSB0byBkb2NzIHRoYXQgYnkgaW1wbGVtZW50aW5nIHZhbHVlT2YgZXZlbiBvYmplY3RzIGFuZCBhcnJheXMgY2FuXG4gICAgICAgIC8vICAgICAgICAgICAgIGJlIGNoZWFwbHkgZGlydHktY2hlY2tlZFxuICAgICAgICBuZXdWYWx1ZSA9IGdldFZhbHVlT2YobmV3VmFsdWUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdvYmplY3QnICYmICFjb21wYXJlT2JqZWN0SWRlbnRpdHkpIHtcbiAgICAgICAgICAvLyBvYmplY3RzL2FycmF5cyBhcmUgbm90IHN1cHBvcnRlZCAtIGRlZXAtd2F0Y2hpbmcgdGhlbSB3b3VsZCBiZSB0b28gZXhwZW5zaXZlXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmFsbC10aHJvdWdoIHRvIHRoZSBwcmltaXRpdmUgZXF1YWxpdHkgY2hlY2tcbiAgICAgIH1cblxuICAgICAgLy9QcmltaXRpdmUgb3IgTmFOXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgICByZXR1cm4gbmV3VmFsdWUgPT09IG9sZFZhbHVlT2ZWYWx1ZSB8fCAobmV3VmFsdWUgIT09IG5ld1ZhbHVlICYmIG9sZFZhbHVlT2ZWYWx1ZSAhPT0gb2xkVmFsdWVPZlZhbHVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnB1dHNXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24sIHByZXR0eVByaW50RXhwcmVzc2lvbikge1xuICAgICAgdmFyIGlucHV0RXhwcmVzc2lvbnMgPSBwYXJzZWRFeHByZXNzaW9uLmlucHV0cztcbiAgICAgIHZhciBsYXN0UmVzdWx0O1xuXG4gICAgICBpZiAoaW5wdXRFeHByZXNzaW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdmFyIG9sZElucHV0VmFsdWVPZiA9IGV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2s7IC8vIGluaXQgdG8gc29tZXRoaW5nIHVuaXF1ZSBzbyB0aGF0IGVxdWFscyBjaGVjayBmYWlsc1xuICAgICAgICBpbnB1dEV4cHJlc3Npb25zID0gaW5wdXRFeHByZXNzaW9uc1swXTtcbiAgICAgICAgcmV0dXJuIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBleHByZXNzaW9uSW5wdXRXYXRjaChzY29wZSkge1xuICAgICAgICAgIHZhciBuZXdJbnB1dFZhbHVlID0gaW5wdXRFeHByZXNzaW9ucyhzY29wZSk7XG4gICAgICAgICAgaWYgKCFleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrKG5ld0lucHV0VmFsdWUsIG9sZElucHV0VmFsdWVPZiwgaW5wdXRFeHByZXNzaW9ucy5pc1B1cmUpKSB7XG4gICAgICAgICAgICBsYXN0UmVzdWx0ID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFtuZXdJbnB1dFZhbHVlXSk7XG4gICAgICAgICAgICBvbGRJbnB1dFZhbHVlT2YgPSBuZXdJbnB1dFZhbHVlICYmIGdldFZhbHVlT2YobmV3SW5wdXRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgICB9LCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHByZXR0eVByaW50RXhwcmVzc2lvbik7XG4gICAgICB9XG5cbiAgICAgIHZhciBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXMgPSBbXTtcbiAgICAgIHZhciBvbGRJbnB1dFZhbHVlcyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXRFeHByZXNzaW9ucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIG9sZElucHV0VmFsdWVPZlZhbHVlc1tpXSA9IGV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2s7IC8vIGluaXQgdG8gc29tZXRoaW5nIHVuaXF1ZSBzbyB0aGF0IGVxdWFscyBjaGVjayBmYWlsc1xuICAgICAgICBvbGRJbnB1dFZhbHVlc1tpXSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzY29wZS4kd2F0Y2goZnVuY3Rpb24gZXhwcmVzc2lvbklucHV0c1dhdGNoKHNjb3BlKSB7XG4gICAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXRFeHByZXNzaW9ucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgdmFyIG5ld0lucHV0VmFsdWUgPSBpbnB1dEV4cHJlc3Npb25zW2ldKHNjb3BlKTtcbiAgICAgICAgICBpZiAoY2hhbmdlZCB8fCAoY2hhbmdlZCA9ICFleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrKG5ld0lucHV0VmFsdWUsIG9sZElucHV0VmFsdWVPZlZhbHVlc1tpXSwgaW5wdXRFeHByZXNzaW9uc1tpXS5pc1B1cmUpKSkge1xuICAgICAgICAgICAgb2xkSW5wdXRWYWx1ZXNbaV0gPSBuZXdJbnB1dFZhbHVlO1xuICAgICAgICAgICAgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldID0gbmV3SW5wdXRWYWx1ZSAmJiBnZXRWYWx1ZU9mKG5ld0lucHV0VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgbGFzdFJlc3VsdCA9IHBhcnNlZEV4cHJlc3Npb24oc2NvcGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvbGRJbnB1dFZhbHVlcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcHJldHR5UHJpbnRFeHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uLCBwcmV0dHlQcmludEV4cHJlc3Npb24pIHtcbiAgICAgIHZhciB1bndhdGNoLCBsYXN0VmFsdWU7XG4gICAgICBpZiAocGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMpIHtcbiAgICAgICAgdW53YXRjaCA9IGlucHV0c1dhdGNoRGVsZWdhdGUoc2NvcGUsIG9uZVRpbWVMaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24sIHByZXR0eVByaW50RXhwcmVzc2lvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bndhdGNoID0gc2NvcGUuJHdhdGNoKG9uZVRpbWVXYXRjaCwgb25lVGltZUxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW53YXRjaDtcblxuICAgICAgZnVuY3Rpb24gb25lVGltZVdhdGNoKHNjb3BlKSB7XG4gICAgICAgIHJldHVybiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uZVRpbWVMaXN0ZW5lcih2YWx1ZSwgb2xkLCBzY29wZSkge1xuICAgICAgICBsYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XG4gICAgICAgICAgbGlzdGVuZXIodmFsdWUsIG9sZCwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgICAgIHVud2F0Y2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uZVRpbWVMaXRlcmFsV2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uKSB7XG4gICAgICB2YXIgdW53YXRjaCwgbGFzdFZhbHVlO1xuICAgICAgdW53YXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiBvbmVUaW1lV2F0Y2goc2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb24oc2NvcGUpO1xuICAgICAgfSwgZnVuY3Rpb24gb25lVGltZUxpc3RlbmVyKHZhbHVlLCBvbGQsIHNjb3BlKSB7XG4gICAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcikpIHtcbiAgICAgICAgICBsaXN0ZW5lcih2YWx1ZSwgb2xkLCBzY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQWxsRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaXNBbGxEZWZpbmVkKGxhc3RWYWx1ZSkpIHVud2F0Y2goKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgb2JqZWN0RXF1YWxpdHkpO1xuXG4gICAgICByZXR1cm4gdW53YXRjaDtcblxuICAgICAgZnVuY3Rpb24gaXNBbGxEZWZpbmVkKHZhbHVlKSB7XG4gICAgICAgIHZhciBhbGxEZWZpbmVkID0gdHJ1ZTtcbiAgICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgaWYgKCFpc0RlZmluZWQodmFsKSkgYWxsRGVmaW5lZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbERlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29uc3RhbnRXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24pIHtcbiAgICAgIHZhciB1bndhdGNoID0gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGNvbnN0YW50V2F0Y2goc2NvcGUpIHtcbiAgICAgICAgdW53YXRjaCgpO1xuICAgICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XG4gICAgICB9LCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHkpO1xuICAgICAgcmV0dXJuIHVud2F0Y2g7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkSW50ZXJjZXB0b3IocGFyc2VkRXhwcmVzc2lvbiwgaW50ZXJjZXB0b3JGbikge1xuICAgICAgaWYgKCFpbnRlcmNlcHRvckZuKSByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbjtcbiAgICAgIHZhciB3YXRjaERlbGVnYXRlID0gcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGU7XG4gICAgICB2YXIgdXNlSW5wdXRzID0gZmFsc2U7XG5cbiAgICAgIHZhciByZWd1bGFyV2F0Y2ggPVxuICAgICAgICAgIHdhdGNoRGVsZWdhdGUgIT09IG9uZVRpbWVMaXRlcmFsV2F0Y2hEZWxlZ2F0ZSAmJlxuICAgICAgICAgIHdhdGNoRGVsZWdhdGUgIT09IG9uZVRpbWVXYXRjaERlbGVnYXRlO1xuXG4gICAgICB2YXIgZm4gPSByZWd1bGFyV2F0Y2ggPyBmdW5jdGlvbiByZWd1bGFySW50ZXJjZXB0ZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHVzZUlucHV0cyAmJiBpbnB1dHMgPyBpbnB1dHNbMF0gOiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgcmV0dXJuIGludGVyY2VwdG9yRm4odmFsdWUsIHNjb3BlLCBsb2NhbHMpO1xuICAgICAgfSA6IGZ1bmN0aW9uIG9uZVRpbWVJbnRlcmNlcHRlZEV4cHJlc3Npb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgIHZhciByZXN1bHQgPSBpbnRlcmNlcHRvckZuKHZhbHVlLCBzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgLy8gd2Ugb25seSByZXR1cm4gdGhlIGludGVyY2VwdG9yJ3MgcmVzdWx0IGlmIHRoZVxuICAgICAgICAvLyBpbml0aWFsIHZhbHVlIGlzIGRlZmluZWQgKGZvciBiaW5kLW9uY2UpXG4gICAgICAgIHJldHVybiBpc0RlZmluZWQodmFsdWUpID8gcmVzdWx0IDogdmFsdWU7XG4gICAgICB9O1xuXG4gICAgICAvLyBQcm9wYWdhdGUgJCR3YXRjaERlbGVnYXRlcyBvdGhlciB0aGVuIGlucHV0c1dhdGNoRGVsZWdhdGVcbiAgICAgIHVzZUlucHV0cyA9ICFwYXJzZWRFeHByZXNzaW9uLmlucHV0cztcbiAgICAgIGlmICh3YXRjaERlbGVnYXRlICYmIHdhdGNoRGVsZWdhdGUgIT09IGlucHV0c1dhdGNoRGVsZWdhdGUpIHtcbiAgICAgICAgZm4uJCR3YXRjaERlbGVnYXRlID0gd2F0Y2hEZWxlZ2F0ZTtcbiAgICAgICAgZm4uaW5wdXRzID0gcGFyc2VkRXhwcmVzc2lvbi5pbnB1dHM7XG4gICAgICB9IGVsc2UgaWYgKCFpbnRlcmNlcHRvckZuLiRzdGF0ZWZ1bCkge1xuICAgICAgICAvLyBUcmVhdCBpbnRlcmNlcHRvciBsaWtlIGZpbHRlcnMgLSBhc3N1bWUgbm9uLXN0YXRlZnVsIGJ5IGRlZmF1bHQgYW5kIHVzZSB0aGUgaW5wdXRzV2F0Y2hEZWxlZ2F0ZVxuICAgICAgICBmbi4kJHdhdGNoRGVsZWdhdGUgPSBpbnB1dHNXYXRjaERlbGVnYXRlO1xuICAgICAgICBmbi5pbnB1dHMgPSBwYXJzZWRFeHByZXNzaW9uLmlucHV0cyA/IHBhcnNlZEV4cHJlc3Npb24uaW5wdXRzIDogW3BhcnNlZEV4cHJlc3Npb25dO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm4uaW5wdXRzKSB7XG4gICAgICAgIGZuLmlucHV0cyA9IGZuLmlucHV0cy5tYXAoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGlzUHVyZSBmbGFnIG9mIGlucHV0cyB3aGVuIGl0IGlzIG5vdCBhYnNvbHV0ZSBiZWNhdXNlIHRoZXkgYXJlIG5vdyB3cmFwcGVkIGluIGFcbiAgICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgbm9uLXB1cmUgaW50ZXJjZXB0b3IgZnVuY3Rpb24uXG4gICAgICAgICAgICAgIGlmIChlLmlzUHVyZSA9PT0gUFVSSVRZX1JFTEFUSVZFKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcHVyaWZpZXIocykgeyByZXR1cm4gZShzKTsgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm47XG4gICAgfVxuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHFcbiAqIEByZXF1aXJlcyAkcm9vdFNjb3BlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNlcnZpY2UgdGhhdCBoZWxwcyB5b3UgcnVuIGZ1bmN0aW9ucyBhc3luY2hyb25vdXNseSwgYW5kIHVzZSB0aGVpciByZXR1cm4gdmFsdWVzIChvciBleGNlcHRpb25zKVxuICogd2hlbiB0aGV5IGFyZSBkb25lIHByb2Nlc3NpbmcuXG4gKlxuICogVGhpcyBpcyBhIFtQcm9taXNlcy9BK10oaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8pLWNvbXBsaWFudCBpbXBsZW1lbnRhdGlvbiBvZiBwcm9taXNlcy9kZWZlcnJlZFxuICogb2JqZWN0cyBpbnNwaXJlZCBieSBbS3JpcyBLb3dhbCdzIFFdKGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcSkuXG4gKlxuICogJHEgY2FuIGJlIHVzZWQgaW4gdHdvIGZhc2hpb25zIC0tLSBvbmUgd2hpY2ggaXMgbW9yZSBzaW1pbGFyIHRvIEtyaXMgS293YWwncyBRIG9yIGpRdWVyeSdzIERlZmVycmVkXG4gKiBpbXBsZW1lbnRhdGlvbnMsIGFuZCB0aGUgb3RoZXIgd2hpY2ggcmVzZW1ibGVzIEVTNiAoRVMyMDE1KSBwcm9taXNlcyB0byBzb21lIGRlZ3JlZS5cbiAqXG4gKiAjIyAkcSBjb25zdHJ1Y3RvclxuICpcbiAqIFRoZSBzdHJlYW1saW5lZCBFUzYgc3R5bGUgcHJvbWlzZSBpcyBlc3NlbnRpYWxseSBqdXN0IHVzaW5nICRxIGFzIGEgY29uc3RydWN0b3Igd2hpY2ggdGFrZXMgYSBgcmVzb2x2ZXJgXG4gKiBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQuIFRoaXMgaXMgc2ltaWxhciB0byB0aGUgbmF0aXZlIFByb21pc2UgaW1wbGVtZW50YXRpb24gZnJvbSBFUzYsXG4gKiBzZWUgW01ETl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZSkuXG4gKlxuICogV2hpbGUgdGhlIGNvbnN0cnVjdG9yLXN0eWxlIHVzZSBpcyBzdXBwb3J0ZWQsIG5vdCBhbGwgb2YgdGhlIHN1cHBvcnRpbmcgbWV0aG9kcyBmcm9tIEVTNiBwcm9taXNlcyBhcmVcbiAqIGF2YWlsYWJsZSB5ZXQuXG4gKlxuICogSXQgY2FuIGJlIHVzZWQgbGlrZSBzbzpcbiAqXG4gKiBgYGBqc1xuICogICAvLyBmb3IgdGhlIHB1cnBvc2Ugb2YgdGhpcyBleGFtcGxlIGxldCdzIGFzc3VtZSB0aGF0IHZhcmlhYmxlcyBgJHFgIGFuZCBgb2tUb0dyZWV0YFxuICogICAvLyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGxleGljYWwgc2NvcGUgKHRoZXkgY291bGQgaGF2ZSBiZWVuIGluamVjdGVkIG9yIHBhc3NlZCBpbikuXG4gKlxuICogICBmdW5jdGlvbiBhc3luY0dyZWV0KG5hbWUpIHtcbiAqICAgICAvLyBwZXJmb3JtIHNvbWUgYXN5bmNocm9ub3VzIG9wZXJhdGlvbiwgcmVzb2x2ZSBvciByZWplY3QgdGhlIHByb21pc2Ugd2hlbiBhcHByb3ByaWF0ZS5cbiAqICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gKiAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICogICAgICAgICBpZiAob2tUb0dyZWV0KG5hbWUpKSB7XG4gKiAgICAgICAgICAgcmVzb2x2ZSgnSGVsbG8sICcgKyBuYW1lICsgJyEnKTtcbiAqICAgICAgICAgfSBlbHNlIHtcbiAqICAgICAgICAgICByZWplY3QoJ0dyZWV0aW5nICcgKyBuYW1lICsgJyBpcyBub3QgYWxsb3dlZC4nKTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSwgMTAwMCk7XG4gKiAgICAgfSk7XG4gKiAgIH1cbiAqXG4gKiAgIHZhciBwcm9taXNlID0gYXN5bmNHcmVldCgnUm9iaW4gSG9vZCcpO1xuICogICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oZ3JlZXRpbmcpIHtcbiAqICAgICBhbGVydCgnU3VjY2VzczogJyArIGdyZWV0aW5nKTtcbiAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gKiAgICAgYWxlcnQoJ0ZhaWxlZDogJyArIHJlYXNvbik7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogTm90ZTogcHJvZ3Jlc3Mvbm90aWZ5IGNhbGxiYWNrcyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgdmlhIHRoZSBFUzYtc3R5bGUgaW50ZXJmYWNlLlxuICpcbiAqIE5vdGU6IHVubGlrZSBFUzYgYmVoYXZpb3IsIGFuIGV4Y2VwdGlvbiB0aHJvd24gaW4gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHdpbGwgTk9UIGltcGxpY2l0bHkgcmVqZWN0IHRoZSBwcm9taXNlLlxuICpcbiAqIEhvd2V2ZXIsIHRoZSBtb3JlIHRyYWRpdGlvbmFsIENvbW1vbkpTLXN0eWxlIHVzYWdlIGlzIHN0aWxsIGF2YWlsYWJsZSwgYW5kIGRvY3VtZW50ZWQgYmVsb3cuXG4gKlxuICogW1RoZSBDb21tb25KUyBQcm9taXNlIHByb3Bvc2FsXShodHRwOi8vd2lraS5jb21tb25qcy5vcmcvd2lraS9Qcm9taXNlcykgZGVzY3JpYmVzIGEgcHJvbWlzZSBhcyBhblxuICogaW50ZXJmYWNlIGZvciBpbnRlcmFjdGluZyB3aXRoIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHJlc3VsdCBvZiBhbiBhY3Rpb24gdGhhdCBpc1xuICogcGVyZm9ybWVkIGFzeW5jaHJvbm91c2x5LCBhbmQgbWF5IG9yIG1heSBub3QgYmUgZmluaXNoZWQgYXQgYW55IGdpdmVuIHBvaW50IGluIHRpbWUuXG4gKlxuICogRnJvbSB0aGUgcGVyc3BlY3RpdmUgb2YgZGVhbGluZyB3aXRoIGVycm9yIGhhbmRsaW5nLCBkZWZlcnJlZCBhbmQgcHJvbWlzZSBBUElzIGFyZSB0b1xuICogYXN5bmNocm9ub3VzIHByb2dyYW1taW5nIHdoYXQgYHRyeWAsIGBjYXRjaGAgYW5kIGB0aHJvd2Aga2V5d29yZHMgYXJlIHRvIHN5bmNocm9ub3VzIHByb2dyYW1taW5nLlxuICpcbiAqIGBgYGpzXG4gKiAgIC8vIGZvciB0aGUgcHVycG9zZSBvZiB0aGlzIGV4YW1wbGUgbGV0J3MgYXNzdW1lIHRoYXQgdmFyaWFibGVzIGAkcWAgYW5kIGBva1RvR3JlZXRgXG4gKiAgIC8vIGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgbGV4aWNhbCBzY29wZSAodGhleSBjb3VsZCBoYXZlIGJlZW4gaW5qZWN0ZWQgb3IgcGFzc2VkIGluKS5cbiAqXG4gKiAgIGZ1bmN0aW9uIGFzeW5jR3JlZXQobmFtZSkge1xuICogICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gKlxuICogICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gKiAgICAgICBkZWZlcnJlZC5ub3RpZnkoJ0Fib3V0IHRvIGdyZWV0ICcgKyBuYW1lICsgJy4nKTtcbiAqXG4gKiAgICAgICBpZiAob2tUb0dyZWV0KG5hbWUpKSB7XG4gKiAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0hlbGxvLCAnICsgbmFtZSArICchJyk7XG4gKiAgICAgICB9IGVsc2Uge1xuICogICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ0dyZWV0aW5nICcgKyBuYW1lICsgJyBpcyBub3QgYWxsb3dlZC4nKTtcbiAqICAgICAgIH1cbiAqICAgICB9LCAxMDAwKTtcbiAqXG4gKiAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gKiAgIH1cbiAqXG4gKiAgIHZhciBwcm9taXNlID0gYXN5bmNHcmVldCgnUm9iaW4gSG9vZCcpO1xuICogICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oZ3JlZXRpbmcpIHtcbiAqICAgICBhbGVydCgnU3VjY2VzczogJyArIGdyZWV0aW5nKTtcbiAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gKiAgICAgYWxlcnQoJ0ZhaWxlZDogJyArIHJlYXNvbik7XG4gKiAgIH0sIGZ1bmN0aW9uKHVwZGF0ZSkge1xuICogICAgIGFsZXJ0KCdHb3Qgbm90aWZpY2F0aW9uOiAnICsgdXBkYXRlKTtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBBdCBmaXJzdCBpdCBtaWdodCBub3QgYmUgb2J2aW91cyB3aHkgdGhpcyBleHRyYSBjb21wbGV4aXR5IGlzIHdvcnRoIHRoZSB0cm91YmxlLiBUaGUgcGF5b2ZmXG4gKiBjb21lcyBpbiB0aGUgd2F5IG9mIGd1YXJhbnRlZXMgdGhhdCBwcm9taXNlIGFuZCBkZWZlcnJlZCBBUElzIG1ha2UsIHNlZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC91bmNvbW1vbmpzL2Jsb2IvbWFzdGVyL3Byb21pc2VzL3NwZWNpZmljYXRpb24ubWQuXG4gKlxuICogQWRkaXRpb25hbGx5IHRoZSBwcm9taXNlIGFwaSBhbGxvd3MgZm9yIGNvbXBvc2l0aW9uIHRoYXQgaXMgdmVyeSBoYXJkIHRvIGRvIHdpdGggdGhlXG4gKiB0cmFkaXRpb25hbCBjYWxsYmFjayAoW0NQU10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db250aW51YXRpb24tcGFzc2luZ19zdHlsZSkpIGFwcHJvYWNoLlxuICogRm9yIG1vcmUgb24gdGhpcyBwbGVhc2Ugc2VlIHRoZSBbUSBkb2N1bWVudGF0aW9uXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EpIGVzcGVjaWFsbHkgdGhlXG4gKiBzZWN0aW9uIG9uIHNlcmlhbCBvciBwYXJhbGxlbCBqb2luaW5nIG9mIHByb21pc2VzLlxuICpcbiAqICMjIFRoZSBEZWZlcnJlZCBBUElcbiAqXG4gKiBBIG5ldyBpbnN0YW5jZSBvZiBkZWZlcnJlZCBpcyBjb25zdHJ1Y3RlZCBieSBjYWxsaW5nIGAkcS5kZWZlcigpYC5cbiAqXG4gKiBUaGUgcHVycG9zZSBvZiB0aGUgZGVmZXJyZWQgb2JqZWN0IGlzIHRvIGV4cG9zZSB0aGUgYXNzb2NpYXRlZCBQcm9taXNlIGluc3RhbmNlIGFzIHdlbGwgYXMgQVBJc1xuICogdGhhdCBjYW4gYmUgdXNlZCBmb3Igc2lnbmFsaW5nIHRoZSBzdWNjZXNzZnVsIG9yIHVuc3VjY2Vzc2Z1bCBjb21wbGV0aW9uLCBhcyB3ZWxsIGFzIHRoZSBzdGF0dXNcbiAqIG9mIHRoZSB0YXNrLlxuICpcbiAqICoqTWV0aG9kcyoqXG4gKlxuICogLSBgcmVzb2x2ZSh2YWx1ZSlgIOKAkyByZXNvbHZlcyB0aGUgZGVyaXZlZCBwcm9taXNlIHdpdGggdGhlIGB2YWx1ZWAuIElmIHRoZSB2YWx1ZSBpcyBhIHJlamVjdGlvblxuICogICBjb25zdHJ1Y3RlZCB2aWEgYCRxLnJlamVjdGAsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgaW5zdGVhZC5cbiAqIC0gYHJlamVjdChyZWFzb24pYCDigJMgcmVqZWN0cyB0aGUgZGVyaXZlZCBwcm9taXNlIHdpdGggdGhlIGByZWFzb25gLiBUaGlzIGlzIGVxdWl2YWxlbnQgdG9cbiAqICAgcmVzb2x2aW5nIGl0IHdpdGggYSByZWplY3Rpb24gY29uc3RydWN0ZWQgdmlhIGAkcS5yZWplY3RgLlxuICogLSBgbm90aWZ5KHZhbHVlKWAgLSBwcm92aWRlcyB1cGRhdGVzIG9uIHRoZSBzdGF0dXMgb2YgdGhlIHByb21pc2UncyBleGVjdXRpb24uIFRoaXMgbWF5IGJlIGNhbGxlZFxuICogICBtdWx0aXBsZSB0aW1lcyBiZWZvcmUgdGhlIHByb21pc2UgaXMgZWl0aGVyIHJlc29sdmVkIG9yIHJlamVjdGVkLlxuICpcbiAqICoqUHJvcGVydGllcyoqXG4gKlxuICogLSBwcm9taXNlIOKAkyBge1Byb21pc2V9YCDigJMgcHJvbWlzZSBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZGVmZXJyZWQuXG4gKlxuICpcbiAqICMjIFRoZSBQcm9taXNlIEFQSVxuICpcbiAqIEEgbmV3IHByb21pc2UgaW5zdGFuY2UgaXMgY3JlYXRlZCB3aGVuIGEgZGVmZXJyZWQgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgY2FuIGJlIHJldHJpZXZlZCBieVxuICogY2FsbGluZyBgZGVmZXJyZWQucHJvbWlzZWAuXG4gKlxuICogVGhlIHB1cnBvc2Ugb2YgdGhlIHByb21pc2Ugb2JqZWN0IGlzIHRvIGFsbG93IGZvciBpbnRlcmVzdGVkIHBhcnRpZXMgdG8gZ2V0IGFjY2VzcyB0byB0aGUgcmVzdWx0XG4gKiBvZiB0aGUgZGVmZXJyZWQgdGFzayB3aGVuIGl0IGNvbXBsZXRlcy5cbiAqXG4gKiAqKk1ldGhvZHMqKlxuICpcbiAqIC0gYHRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBbZXJyb3JDYWxsYmFja10sIFtub3RpZnlDYWxsYmFja10pYCDigJMgcmVnYXJkbGVzcyBvZiB3aGVuIHRoZSBwcm9taXNlIHdhcyBvclxuICogICB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkLCBgdGhlbmAgY2FsbHMgb25lIG9mIHRoZSBzdWNjZXNzIG9yIGVycm9yIGNhbGxiYWNrcyBhc3luY2hyb25vdXNseVxuICogICBhcyBzb29uIGFzIHRoZSByZXN1bHQgaXMgYXZhaWxhYmxlLiBUaGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudDogdGhlIHJlc3VsdFxuICogICBvciByZWplY3Rpb24gcmVhc29uLiBBZGRpdGlvbmFsbHksIHRoZSBub3RpZnkgY2FsbGJhY2sgbWF5IGJlIGNhbGxlZCB6ZXJvIG9yIG1vcmUgdGltZXMgdG9cbiAqICAgcHJvdmlkZSBhIHByb2dyZXNzIGluZGljYXRpb24sIGJlZm9yZSB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZCBvciByZWplY3RlZC5cbiAqXG4gKiAgIFRoaXMgbWV0aG9kICpyZXR1cm5zIGEgbmV3IHByb21pc2UqIHdoaWNoIGlzIHJlc29sdmVkIG9yIHJlamVjdGVkIHZpYSB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZVxuICogICBgc3VjY2Vzc0NhbGxiYWNrYCwgYGVycm9yQ2FsbGJhY2tgICh1bmxlc3MgdGhhdCB2YWx1ZSBpcyBhIHByb21pc2UsIGluIHdoaWNoIGNhc2UgaXQgaXMgcmVzb2x2ZWRcbiAqICAgd2l0aCB0aGUgdmFsdWUgd2hpY2ggaXMgcmVzb2x2ZWQgaW4gdGhhdCBwcm9taXNlIHVzaW5nXG4gKiAgIFtwcm9taXNlIGNoYWluaW5nXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy9lczYvcHJvbWlzZXMvI3RvYy1wcm9taXNlcy1xdWV1ZXMpKS5cbiAqICAgSXQgYWxzbyBub3RpZmllcyB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgYG5vdGlmeUNhbGxiYWNrYCBtZXRob2QuIFRoZSBwcm9taXNlIGNhbm5vdCBiZVxuICogICByZXNvbHZlZCBvciByZWplY3RlZCBmcm9tIHRoZSBub3RpZnlDYWxsYmFjayBtZXRob2QuIFRoZSBlcnJvckNhbGxiYWNrIGFuZCBub3RpZnlDYWxsYmFja1xuICogICBhcmd1bWVudHMgYXJlIG9wdGlvbmFsLlxuICpcbiAqIC0gYGNhdGNoKGVycm9yQ2FsbGJhY2spYCDigJMgc2hvcnRoYW5kIGZvciBgcHJvbWlzZS50aGVuKG51bGwsIGVycm9yQ2FsbGJhY2spYFxuICpcbiAqIC0gYGZpbmFsbHkoY2FsbGJhY2ssIG5vdGlmeUNhbGxiYWNrKWAg4oCTIGFsbG93cyB5b3UgdG8gb2JzZXJ2ZSBlaXRoZXIgdGhlIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBvZiBhIHByb21pc2UsXG4gKiAgIGJ1dCB0byBkbyBzbyB3aXRob3V0IG1vZGlmeWluZyB0aGUgZmluYWwgdmFsdWUuIFRoaXMgaXMgdXNlZnVsIHRvIHJlbGVhc2UgcmVzb3VyY2VzIG9yIGRvIHNvbWVcbiAqICAgY2xlYW4tdXAgdGhhdCBuZWVkcyB0byBiZSBkb25lIHdoZXRoZXIgdGhlIHByb21pc2Ugd2FzIHJlamVjdGVkIG9yIHJlc29sdmVkLiBTZWUgdGhlIFtmdWxsXG4gKiAgIHNwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS93aWtpL0FQSS1SZWZlcmVuY2UjcHJvbWlzZWZpbmFsbHljYWxsYmFjaykgZm9yXG4gKiAgIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogIyMgQ2hhaW5pbmcgcHJvbWlzZXNcbiAqXG4gKiBCZWNhdXNlIGNhbGxpbmcgdGhlIGB0aGVuYCBtZXRob2Qgb2YgYSBwcm9taXNlIHJldHVybnMgYSBuZXcgZGVyaXZlZCBwcm9taXNlLCBpdCBpcyBlYXNpbHlcbiAqIHBvc3NpYmxlIHRvIGNyZWF0ZSBhIGNoYWluIG9mIHByb21pc2VzOlxuICpcbiAqIGBgYGpzXG4gKiAgIHByb21pc2VCID0gcHJvbWlzZUEudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAqICAgICByZXR1cm4gcmVzdWx0ICsgMTtcbiAqICAgfSk7XG4gKlxuICogICAvLyBwcm9taXNlQiB3aWxsIGJlIHJlc29sdmVkIGltbWVkaWF0ZWx5IGFmdGVyIHByb21pc2VBIGlzIHJlc29sdmVkIGFuZCBpdHMgdmFsdWVcbiAqICAgLy8gd2lsbCBiZSB0aGUgcmVzdWx0IG9mIHByb21pc2VBIGluY3JlbWVudGVkIGJ5IDFcbiAqIGBgYFxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGNyZWF0ZSBjaGFpbnMgb2YgYW55IGxlbmd0aCBhbmQgc2luY2UgYSBwcm9taXNlIGNhbiBiZSByZXNvbHZlZCB3aXRoIGFub3RoZXJcbiAqIHByb21pc2UgKHdoaWNoIHdpbGwgZGVmZXIgaXRzIHJlc29sdXRpb24gZnVydGhlciksIGl0IGlzIHBvc3NpYmxlIHRvIHBhdXNlL2RlZmVyIHJlc29sdXRpb24gb2ZcbiAqIHRoZSBwcm9taXNlcyBhdCBhbnkgcG9pbnQgaW4gdGhlIGNoYWluLiBUaGlzIG1ha2VzIGl0IHBvc3NpYmxlIHRvIGltcGxlbWVudCBwb3dlcmZ1bCBBUElzIGxpa2VcbiAqICRodHRwJ3MgcmVzcG9uc2UgaW50ZXJjZXB0b3JzLlxuICpcbiAqXG4gKiAjIyBEaWZmZXJlbmNlcyBiZXR3ZWVuIEtyaXMgS293YWwncyBRIGFuZCAkcVxuICpcbiAqICBUaGVyZSBhcmUgdHdvIG1haW4gZGlmZmVyZW5jZXM6XG4gKlxuICogLSAkcSBpcyBpbnRlZ3JhdGVkIHdpdGggdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlfSBTY29wZSBtb2RlbCBvYnNlcnZhdGlvblxuICogICBtZWNoYW5pc20gaW4gQW5ndWxhckpTLCB3aGljaCBtZWFucyBmYXN0ZXIgcHJvcGFnYXRpb24gb2YgcmVzb2x1dGlvbiBvciByZWplY3Rpb24gaW50byB5b3VyXG4gKiAgIG1vZGVscyBhbmQgYXZvaWRpbmcgdW5uZWNlc3NhcnkgYnJvd3NlciByZXBhaW50cywgd2hpY2ggd291bGQgcmVzdWx0IGluIGZsaWNrZXJpbmcgVUkuXG4gKiAtIFEgaGFzIG1hbnkgbW9yZSBmZWF0dXJlcyB0aGFuICRxLCBidXQgdGhhdCBjb21lcyBhdCBhIGNvc3Qgb2YgYnl0ZXMuICRxIGlzIHRpbnksIGJ1dCBjb250YWluc1xuICogICBhbGwgdGhlIGltcG9ydGFudCBmdW5jdGlvbmFsaXR5IG5lZWRlZCBmb3IgY29tbW9uIGFzeW5jIHRhc2tzLlxuICpcbiAqICMjIFRlc3RpbmdcbiAqXG4gKiAgYGBganNcbiAqICAgIGl0KCdzaG91bGQgc2ltdWxhdGUgcHJvbWlzZScsIGluamVjdChmdW5jdGlvbigkcSwgJHJvb3RTY29wZSkge1xuICogICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICogICAgICB2YXIgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XG4gKiAgICAgIHZhciByZXNvbHZlZFZhbHVlO1xuICpcbiAqICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7IHJlc29sdmVkVmFsdWUgPSB2YWx1ZTsgfSk7XG4gKiAgICAgIGV4cGVjdChyZXNvbHZlZFZhbHVlKS50b0JlVW5kZWZpbmVkKCk7XG4gKlxuICogICAgICAvLyBTaW11bGF0ZSByZXNvbHZpbmcgb2YgcHJvbWlzZVxuICogICAgICBkZWZlcnJlZC5yZXNvbHZlKDEyMyk7XG4gKiAgICAgIC8vIE5vdGUgdGhhdCB0aGUgJ3RoZW4nIGZ1bmN0aW9uIGRvZXMgbm90IGdldCBjYWxsZWQgc3luY2hyb25vdXNseS5cbiAqICAgICAgLy8gVGhpcyBpcyBiZWNhdXNlIHdlIHdhbnQgdGhlIHByb21pc2UgQVBJIHRvIGFsd2F5cyBiZSBhc3luYywgd2hldGhlciBvciBub3RcbiAqICAgICAgLy8gaXQgZ290IGNhbGxlZCBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm91c2x5LlxuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xuICpcbiAqICAgICAgLy8gUHJvcGFnYXRlIHByb21pc2UgcmVzb2x1dGlvbiB0byAndGhlbicgZnVuY3Rpb25zIHVzaW5nICRhcHBseSgpLlxuICogICAgICAkcm9vdFNjb3BlLiRhcHBseSgpO1xuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9FcXVhbCgxMjMpO1xuICogICAgfSkpO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oZnVuY3Rpb24sIGZ1bmN0aW9uKX0gcmVzb2x2ZXIgRnVuY3Rpb24gd2hpY2ggaXMgcmVzcG9uc2libGUgZm9yIHJlc29sdmluZyBvclxuICogICByZWplY3RpbmcgdGhlIG5ld2x5IGNyZWF0ZWQgcHJvbWlzZS4gVGhlIGZpcnN0IHBhcmFtZXRlciBpcyBhIGZ1bmN0aW9uIHdoaWNoIHJlc29sdmVzIHRoZVxuICogICBwcm9taXNlLCB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyBhIGZ1bmN0aW9uIHdoaWNoIHJlamVjdHMgdGhlIHByb21pc2UuXG4gKlxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBuZXdseSBjcmVhdGVkIHByb21pc2UuXG4gKi9cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkcVByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICovXG5mdW5jdGlvbiAkUVByb3ZpZGVyKCkge1xuICB2YXIgZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgPSB0cnVlO1xuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkZXhjZXB0aW9uSGFuZGxlcikge1xuICAgIHJldHVybiBxRmFjdG9yeShmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGNhbGxiYWNrKTtcbiAgICB9LCAkZXhjZXB0aW9uSGFuZGxlciwgZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMpO1xuICB9XTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcVByb3ZpZGVyI2Vycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHdoZXRoZXIgdG8gZ2VuZXJhdGUgYW4gZXJyb3Igd2hlbiBhIHJlamVjdGVkIHByb21pc2UgaXMgbm90IGhhbmRsZWQuXG4gICAqIFRoaXMgZmVhdHVyZSBpcyBlbmFibGVkIGJ5IGRlZmF1bHQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHZhbHVlIFdoZXRoZXIgdG8gZ2VuZXJhdGUgYW4gZXJyb3Igd2hlbiBhIHJlamVjdGVkIHByb21pc2UgaXMgbm90IGhhbmRsZWQuXG4gICAqIEByZXR1cm5zIHtib29sZWFufG5nLiRxUHJvdmlkZXJ9IEN1cnJlbnQgdmFsdWUgd2hlbiBjYWxsZWQgd2l0aG91dCBhIG5ldyB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnM7XG4gICAgfVxuICB9O1xufVxuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICQkUVByb3ZpZGVyKCkge1xuICB2YXIgZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgPSB0cnVlO1xuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24oJGJyb3dzZXIsICRleGNlcHRpb25IYW5kbGVyKSB7XG4gICAgcmV0dXJuIHFGYWN0b3J5KGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAkYnJvd3Nlci5kZWZlcihjYWxsYmFjayk7XG4gICAgfSwgJGV4Y2VwdGlvbkhhbmRsZXIsIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKTtcbiAgfV07XG5cbiAgdGhpcy5lcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgcHJvbWlzZSBtYW5hZ2VyLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oZnVuY3Rpb24pfSBuZXh0VGljayBGdW5jdGlvbiBmb3IgZXhlY3V0aW5nIGZ1bmN0aW9ucyBpbiB0aGUgbmV4dCB0dXJuLlxuICogQHBhcmFtIHtmdW5jdGlvbiguLi4qKX0gZXhjZXB0aW9uSGFuZGxlciBGdW5jdGlvbiBpbnRvIHdoaWNoIHVuZXhwZWN0ZWQgZXhjZXB0aW9ucyBhcmUgcGFzc2VkIGZvclxuICogICAgIGRlYnVnZ2luZyBwdXJwb3Nlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zIFdoZXRoZXIgYW4gZXJyb3Igc2hvdWxkIGJlIGdlbmVyYXRlZCBvbiB1bmhhbmRsZWRcbiAqICAgICBwcm9taXNlcyByZWplY3Rpb25zLlxuICogQHJldHVybnMge29iamVjdH0gUHJvbWlzZSBtYW5hZ2VyLlxuICovXG5mdW5jdGlvbiBxRmFjdG9yeShuZXh0VGljaywgZXhjZXB0aW9uSGFuZGxlciwgZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMpIHtcbiAgdmFyICRxTWluRXJyID0gbWluRXJyKCckcScsIFR5cGVFcnJvcik7XG4gIHZhciBxdWV1ZVNpemUgPSAwO1xuICB2YXIgY2hlY2tRdWV1ZSA9IFtdO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nLiRxI2RlZmVyXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgYERlZmVycmVkYCBvYmplY3Qgd2hpY2ggcmVwcmVzZW50cyBhIHRhc2sgd2hpY2ggd2lsbCBmaW5pc2ggaW4gdGhlIGZ1dHVyZS5cbiAgICpcbiAgICogQHJldHVybnMge0RlZmVycmVkfSBSZXR1cm5zIGEgbmV3IGluc3RhbmNlIG9mIGRlZmVycmVkLlxuICAgKi9cbiAgZnVuY3Rpb24gZGVmZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBEZWZlcnJlZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gRGVmZXJyZWQoKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgpO1xuICAgIC8vTm9uIHByb3RvdHlwZSBtZXRob2RzIG5lY2Vzc2FyeSB0byBzdXBwb3J0IHVuYm91bmQgZXhlY3V0aW9uIDovXG4gICAgdGhpcy5yZXNvbHZlID0gZnVuY3Rpb24odmFsKSB7IHJlc29sdmVQcm9taXNlKHByb21pc2UsIHZhbCk7IH07XG4gICAgdGhpcy5yZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHsgcmVqZWN0UHJvbWlzZShwcm9taXNlLCByZWFzb24pOyB9O1xuICAgIHRoaXMubm90aWZ5ID0gZnVuY3Rpb24ocHJvZ3Jlc3MpIHsgbm90aWZ5UHJvbWlzZShwcm9taXNlLCBwcm9ncmVzcyk7IH07XG4gIH1cblxuXG4gIGZ1bmN0aW9uIFByb21pc2UoKSB7XG4gICAgdGhpcy4kJHN0YXRlID0geyBzdGF0dXM6IDAgfTtcbiAgfVxuXG4gIGV4dGVuZChQcm9taXNlLnByb3RvdHlwZSwge1xuICAgIHRoZW46IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9ncmVzc0JhY2spIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZChvbkZ1bGZpbGxlZCkgJiYgaXNVbmRlZmluZWQob25SZWplY3RlZCkgJiYgaXNVbmRlZmluZWQocHJvZ3Jlc3NCYWNrKSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSBuZXcgUHJvbWlzZSgpO1xuXG4gICAgICB0aGlzLiQkc3RhdGUucGVuZGluZyA9IHRoaXMuJCRzdGF0ZS5wZW5kaW5nIHx8IFtdO1xuICAgICAgdGhpcy4kJHN0YXRlLnBlbmRpbmcucHVzaChbcmVzdWx0LCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcHJvZ3Jlc3NCYWNrXSk7XG4gICAgICBpZiAodGhpcy4kJHN0YXRlLnN0YXR1cyA+IDApIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHRoaXMuJCRzdGF0ZSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgICdjYXRjaCc6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIGNhbGxiYWNrKTtcbiAgICB9LFxuXG4gICAgJ2ZpbmFsbHknOiBmdW5jdGlvbihjYWxsYmFjaywgcHJvZ3Jlc3NCYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDYWxsYmFjayh2YWx1ZSwgcmVzb2x2ZSwgY2FsbGJhY2spO1xuICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZUNhbGxiYWNrKGVycm9yLCByZWplY3QsIGNhbGxiYWNrKTtcbiAgICAgIH0sIHByb2dyZXNzQmFjayk7XG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBwcm9jZXNzUXVldWUoc3RhdGUpIHtcbiAgICB2YXIgZm4sIHByb21pc2UsIHBlbmRpbmc7XG5cbiAgICBwZW5kaW5nID0gc3RhdGUucGVuZGluZztcbiAgICBzdGF0ZS5wcm9jZXNzU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgc3RhdGUucGVuZGluZyA9IHVuZGVmaW5lZDtcbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcGVuZGluZy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIG1hcmtRU3RhdGVFeGNlcHRpb25IYW5kbGVkKHN0YXRlKTtcbiAgICAgICAgcHJvbWlzZSA9IHBlbmRpbmdbaV1bMF07XG4gICAgICAgIGZuID0gcGVuZGluZ1tpXVtzdGF0ZS5zdGF0dXNdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgZm4oc3RhdGUudmFsdWUpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLnN0YXR1cyA9PT0gMSkge1xuICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgc3RhdGUudmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3RQcm9taXNlKHByb21pc2UsIHN0YXRlLnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZWplY3RQcm9taXNlKHByb21pc2UsIGUpO1xuICAgICAgICAgIC8vIFRoaXMgZXJyb3IgaXMgZXhwbGljaXRseSBtYXJrZWQgZm9yIGJlaW5nIHBhc3NlZCB0byB0aGUgJGV4Y2VwdGlvbkhhbmRsZXJcbiAgICAgICAgICBpZiAoZSAmJiBlLiQkcGFzc1RvRXhjZXB0aW9uSGFuZGxlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgLS1xdWV1ZVNpemU7XG4gICAgICBpZiAoZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgJiYgcXVldWVTaXplID09PSAwKSB7XG4gICAgICAgIG5leHRUaWNrKHByb2Nlc3NDaGVja3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByb2Nlc3NDaGVja3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVubW9kaWZpZWQtbG9vcC1jb25kaXRpb25cbiAgICB3aGlsZSAoIXF1ZXVlU2l6ZSAmJiBjaGVja1F1ZXVlLmxlbmd0aCkge1xuICAgICAgdmFyIHRvQ2hlY2sgPSBjaGVja1F1ZXVlLnNoaWZ0KCk7XG4gICAgICBpZiAoIWlzU3RhdGVFeGNlcHRpb25IYW5kbGVkKHRvQ2hlY2spKSB7XG4gICAgICAgIG1hcmtRU3RhdGVFeGNlcHRpb25IYW5kbGVkKHRvQ2hlY2spO1xuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gJ1Bvc3NpYmx5IHVuaGFuZGxlZCByZWplY3Rpb246ICcgKyB0b0RlYnVnU3RyaW5nKHRvQ2hlY2sudmFsdWUpO1xuICAgICAgICBpZiAoaXNFcnJvcih0b0NoZWNrLnZhbHVlKSkge1xuICAgICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIodG9DaGVjay52YWx1ZSwgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBleGNlcHRpb25IYW5kbGVyKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2hlZHVsZVByb2Nlc3NRdWV1ZShzdGF0ZSkge1xuICAgIGlmIChlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyAmJiAhc3RhdGUucGVuZGluZyAmJiBzdGF0ZS5zdGF0dXMgPT09IDIgJiYgIWlzU3RhdGVFeGNlcHRpb25IYW5kbGVkKHN0YXRlKSkge1xuICAgICAgaWYgKHF1ZXVlU2l6ZSA9PT0gMCAmJiBjaGVja1F1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXh0VGljayhwcm9jZXNzQ2hlY2tzKTtcbiAgICAgIH1cbiAgICAgIGNoZWNrUXVldWUucHVzaChzdGF0ZSk7XG4gICAgfVxuICAgIGlmIChzdGF0ZS5wcm9jZXNzU2NoZWR1bGVkIHx8ICFzdGF0ZS5wZW5kaW5nKSByZXR1cm47XG4gICAgc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCA9IHRydWU7XG4gICAgKytxdWV1ZVNpemU7XG4gICAgbmV4dFRpY2soZnVuY3Rpb24oKSB7IHByb2Nlc3NRdWV1ZShzdGF0ZSk7IH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgdmFsKSB7XG4gICAgaWYgKHByb21pc2UuJCRzdGF0ZS5zdGF0dXMpIHJldHVybjtcbiAgICBpZiAodmFsID09PSBwcm9taXNlKSB7XG4gICAgICAkJHJlamVjdChwcm9taXNlLCAkcU1pbkVycihcbiAgICAgICAgJ3FjeWNsZScsXG4gICAgICAgICdFeHBlY3RlZCBwcm9taXNlIHRvIGJlIHJlc29sdmVkIHdpdGggdmFsdWUgb3RoZXIgdGhhbiBpdHNlbGYgXFwnezB9XFwnJyxcbiAgICAgICAgdmFsKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQkcmVzb2x2ZShwcm9taXNlLCB2YWwpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gJCRyZXNvbHZlKHByb21pc2UsIHZhbCkge1xuICAgIHZhciB0aGVuO1xuICAgIHZhciBkb25lID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChpc09iamVjdCh2YWwpIHx8IGlzRnVuY3Rpb24odmFsKSkgdGhlbiA9IHZhbC50aGVuO1xuICAgICAgaWYgKGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgcHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA9IC0xO1xuICAgICAgICB0aGVuLmNhbGwodmFsLCBkb1Jlc29sdmUsIGRvUmVqZWN0LCBkb05vdGlmeSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9taXNlLiQkc3RhdGUudmFsdWUgPSB2YWw7XG4gICAgICAgIHByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAxO1xuICAgICAgICBzY2hlZHVsZVByb2Nlc3NRdWV1ZShwcm9taXNlLiQkc3RhdGUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGRvUmVqZWN0KGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRvUmVzb2x2ZSh2YWwpIHtcbiAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICQkcmVzb2x2ZShwcm9taXNlLCB2YWwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkb1JlamVjdCh2YWwpIHtcbiAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICQkcmVqZWN0KHByb21pc2UsIHZhbCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRvTm90aWZ5KHByb2dyZXNzKSB7XG4gICAgICBub3RpZnlQcm9taXNlKHByb21pc2UsIHByb2dyZXNzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWplY3RQcm9taXNlKHByb21pc2UsIHJlYXNvbikge1xuICAgIGlmIChwcm9taXNlLiQkc3RhdGUuc3RhdHVzKSByZXR1cm47XG4gICAgJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uICQkcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICAgIHByb21pc2UuJCRzdGF0ZS52YWx1ZSA9IHJlYXNvbjtcbiAgICBwcm9taXNlLiQkc3RhdGUuc3RhdHVzID0gMjtcbiAgICBzY2hlZHVsZVByb2Nlc3NRdWV1ZShwcm9taXNlLiQkc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gbm90aWZ5UHJvbWlzZShwcm9taXNlLCBwcm9ncmVzcykge1xuICAgIHZhciBjYWxsYmFja3MgPSBwcm9taXNlLiQkc3RhdGUucGVuZGluZztcblxuICAgIGlmICgocHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA8PSAwKSAmJiBjYWxsYmFja3MgJiYgY2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgbmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjYWxsYmFjaywgcmVzdWx0O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrc1tpXVswXTtcbiAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrc1tpXVszXTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbm90aWZ5UHJvbWlzZShyZXN1bHQsIGlzRnVuY3Rpb24oY2FsbGJhY2spID8gY2FsbGJhY2socHJvZ3Jlc3MpIDogcHJvZ3Jlc3MpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSNyZWplY3RcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgYXMgcmVqZWN0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGByZWFzb25gLiBUaGlzIGFwaSBzaG91bGQgYmVcbiAgICogdXNlZCB0byBmb3J3YXJkIHJlamVjdGlvbiBpbiBhIGNoYWluIG9mIHByb21pc2VzLiBJZiB5b3UgYXJlIGRlYWxpbmcgd2l0aCB0aGUgbGFzdCBwcm9taXNlIGluXG4gICAqIGEgcHJvbWlzZSBjaGFpbiwgeW91IGRvbid0IG5lZWQgdG8gd29ycnkgYWJvdXQgaXQuXG4gICAqXG4gICAqIFdoZW4gY29tcGFyaW5nIGRlZmVycmVkcy9wcm9taXNlcyB0byB0aGUgZmFtaWxpYXIgYmVoYXZpb3Igb2YgdHJ5L2NhdGNoL3Rocm93LCB0aGluayBvZlxuICAgKiBgcmVqZWN0YCBhcyB0aGUgYHRocm93YCBrZXl3b3JkIGluIEphdmFTY3JpcHQuIFRoaXMgYWxzbyBtZWFucyB0aGF0IGlmIHlvdSBcImNhdGNoXCIgYW4gZXJyb3IgdmlhXG4gICAqIGEgcHJvbWlzZSBlcnJvciBjYWxsYmFjayBhbmQgeW91IHdhbnQgdG8gZm9yd2FyZCB0aGUgZXJyb3IgdG8gdGhlIHByb21pc2UgZGVyaXZlZCBmcm9tIHRoZVxuICAgKiBjdXJyZW50IHByb21pc2UsIHlvdSBoYXZlIHRvIFwicmV0aHJvd1wiIHRoZSBlcnJvciBieSByZXR1cm5pbmcgYSByZWplY3Rpb24gY29uc3RydWN0ZWQgdmlhXG4gICAqIGByZWplY3RgLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIHByb21pc2VCID0gcHJvbWlzZUEudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICogICAgIC8vIHN1Y2Nlc3M6IGRvIHNvbWV0aGluZyBhbmQgcmVzb2x2ZSBwcm9taXNlQlxuICAgKiAgICAgLy8gICAgICAgICAgd2l0aCB0aGUgb2xkIG9yIGEgbmV3IHJlc3VsdFxuICAgKiAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICogICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICogICAgIC8vIGVycm9yOiBoYW5kbGUgdGhlIGVycm9yIGlmIHBvc3NpYmxlIGFuZFxuICAgKiAgICAgLy8gICAgICAgIHJlc29sdmUgcHJvbWlzZUIgd2l0aCBuZXdQcm9taXNlT3JWYWx1ZSxcbiAgICogICAgIC8vICAgICAgICBvdGhlcndpc2UgZm9yd2FyZCB0aGUgcmVqZWN0aW9uIHRvIHByb21pc2VCXG4gICAqICAgICBpZiAoY2FuSGFuZGxlKHJlYXNvbikpIHtcbiAgICogICAgICAvLyBoYW5kbGUgdGhlIGVycm9yIGFuZCByZWNvdmVyXG4gICAqICAgICAgcmV0dXJuIG5ld1Byb21pc2VPclZhbHVlO1xuICAgKiAgICAgfVxuICAgKiAgICAgcmV0dXJuICRxLnJlamVjdChyZWFzb24pO1xuICAgKiAgIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHsqfSByZWFzb24gQ29uc3RhbnQsIG1lc3NhZ2UsIGV4Y2VwdGlvbiBvciBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSByZWplY3Rpb24gcmVhc29uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHByb21pc2UgdGhhdCB3YXMgYWxyZWFkeSByZXNvbHZlZCBhcyByZWplY3RlZCB3aXRoIHRoZSBgcmVhc29uYC5cbiAgICovXG4gIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFByb21pc2UoKTtcbiAgICByZWplY3RQcm9taXNlKHJlc3VsdCwgcmVhc29uKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2sodmFsdWUsIHJlc29sdmVyLCBjYWxsYmFjaykge1xuICAgIHZhciBjYWxsYmFja091dHB1dCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkgY2FsbGJhY2tPdXRwdXQgPSBjYWxsYmFjaygpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiByZWplY3QoZSk7XG4gICAgfVxuICAgIGlmIChpc1Byb21pc2VMaWtlKGNhbGxiYWNrT3V0cHV0KSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrT3V0cHV0LnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlcih2YWx1ZSk7XG4gICAgICB9LCByZWplY3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZXIodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxI3doZW5cbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFdyYXBzIGFuIG9iamVjdCB0aGF0IG1pZ2h0IGJlIGEgdmFsdWUgb3IgYSAoM3JkIHBhcnR5KSB0aGVuLWFibGUgcHJvbWlzZSBpbnRvIGEgJHEgcHJvbWlzZS5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiB5b3UgYXJlIGRlYWxpbmcgd2l0aCBhbiBvYmplY3QgdGhhdCBtaWdodCBvciBtaWdodCBub3QgYmUgYSBwcm9taXNlLCBvciBpZlxuICAgKiB0aGUgcHJvbWlzZSBjb21lcyBmcm9tIGEgc291cmNlIHRoYXQgY2FuJ3QgYmUgdHJ1c3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSBvciBhIHByb21pc2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IHN1Y2Nlc3NDYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gZXJyb3JDYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gcHJvZ3Jlc3NDYWxsYmFja1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHByb21pc2Ugb2YgdGhlIHBhc3NlZCB2YWx1ZSBvciBwcm9taXNlXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gd2hlbih2YWx1ZSwgY2FsbGJhY2ssIGVycmJhY2ssIHByb2dyZXNzQmFjaykge1xuICAgIHZhciByZXN1bHQgPSBuZXcgUHJvbWlzZSgpO1xuICAgIHJlc29sdmVQcm9taXNlKHJlc3VsdCwgdmFsdWUpO1xuICAgIHJldHVybiByZXN1bHQudGhlbihjYWxsYmFjaywgZXJyYmFjaywgcHJvZ3Jlc3NCYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxI3Jlc29sdmVcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEFsaWFzIG9mIHtAbGluayBuZy4kcSN3aGVuIHdoZW59IHRvIG1haW50YWluIG5hbWluZyBjb25zaXN0ZW5jeSB3aXRoIEVTNi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSBvciBhIHByb21pc2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IHN1Y2Nlc3NDYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gZXJyb3JDYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gcHJvZ3Jlc3NDYWxsYmFja1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHByb21pc2Ugb2YgdGhlIHBhc3NlZCB2YWx1ZSBvciBwcm9taXNlXG4gICAqL1xuICB2YXIgcmVzb2x2ZSA9IHdoZW47XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHEjYWxsXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDb21iaW5lcyBtdWx0aXBsZSBwcm9taXNlcyBpbnRvIGEgc2luZ2xlIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGFsbCBvZiB0aGUgaW5wdXRcbiAgICogcHJvbWlzZXMgYXJlIHJlc29sdmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LjxQcm9taXNlPnxPYmplY3QuPFByb21pc2U+fSBwcm9taXNlcyBBbiBhcnJheSBvciBoYXNoIG9mIHByb21pc2VzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHNpbmdsZSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIGFuIGFycmF5L2hhc2ggb2YgdmFsdWVzLFxuICAgKiAgIGVhY2ggdmFsdWUgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvbWlzZSBhdCB0aGUgc2FtZSBpbmRleC9rZXkgaW4gdGhlIGBwcm9taXNlc2AgYXJyYXkvaGFzaC5cbiAgICogICBJZiBhbnkgb2YgdGhlIHByb21pc2VzIGlzIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24sIHRoaXMgcmVzdWx0aW5nIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZFxuICAgKiAgIHdpdGggdGhlIHNhbWUgcmVqZWN0aW9uIHZhbHVlLlxuICAgKi9cblxuICBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFByb21pc2UoKSxcbiAgICAgICAgY291bnRlciA9IDAsXG4gICAgICAgIHJlc3VsdHMgPSBpc0FycmF5KHByb21pc2VzKSA/IFtdIDoge307XG5cbiAgICBmb3JFYWNoKHByb21pc2VzLCBmdW5jdGlvbihwcm9taXNlLCBrZXkpIHtcbiAgICAgIGNvdW50ZXIrKztcbiAgICAgIHdoZW4ocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXN1bHRzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKCEoLS1jb3VudGVyKSkgcmVzb2x2ZVByb21pc2UocmVzdWx0LCByZXN1bHRzKTtcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICByZWplY3RQcm9taXNlKHJlc3VsdCwgcmVhc29uKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaWYgKGNvdW50ZXIgPT09IDApIHtcbiAgICAgIHJlc29sdmVQcm9taXNlKHJlc3VsdCwgcmVzdWx0cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxI3JhY2VcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb3IgcmVqZWN0cyBhcyBzb29uIGFzIG9uZSBvZiB0aG9zZSBwcm9taXNlc1xuICAgKiByZXNvbHZlcyBvciByZWplY3RzLCB3aXRoIHRoZSB2YWx1ZSBvciByZWFzb24gZnJvbSB0aGF0IHByb21pc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXkuPFByb21pc2U+fE9iamVjdC48UHJvbWlzZT59IHByb21pc2VzIEFuIGFycmF5IG9yIGhhc2ggb2YgcHJvbWlzZXMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvciByZWplY3RzIGFzIHNvb24gYXMgb25lIG9mIHRoZSBgcHJvbWlzZXNgXG4gICAqIHJlc29sdmVzIG9yIHJlamVjdHMsIHdpdGggdGhlIHZhbHVlIG9yIHJlYXNvbiBmcm9tIHRoYXQgcHJvbWlzZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmFjZShwcm9taXNlcykge1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG5cbiAgICBmb3JFYWNoKHByb21pc2VzLCBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICB3aGVuKHByb21pc2UpLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgZnVuY3Rpb24gJFEocmVzb2x2ZXIpIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24ocmVzb2x2ZXIpKSB7XG4gICAgICB0aHJvdyAkcU1pbkVycignbm9yc2x2cicsICdFeHBlY3RlZCByZXNvbHZlckZuLCBnb3QgXFwnezB9XFwnJywgcmVzb2x2ZXIpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKTtcblxuICAgIGZ1bmN0aW9uIHJlc29sdmVGbih2YWx1ZSkge1xuICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgdmFsdWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlamVjdEZuKHJlYXNvbikge1xuICAgICAgcmVqZWN0UHJvbWlzZShwcm9taXNlLCByZWFzb24pO1xuICAgIH1cblxuICAgIHJlc29sdmVyKHJlc29sdmVGbiwgcmVqZWN0Rm4pO1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICAvLyBMZXQncyBtYWtlIHRoZSBpbnN0YW5jZW9mIG9wZXJhdG9yIHdvcmsgZm9yIHByb21pc2VzLCBzbyB0aGF0XG4gIC8vIGBuZXcgJHEoZm4pIGluc3RhbmNlb2YgJHFgIHdvdWxkIGV2YWx1YXRlIHRvIHRydWUuXG4gICRRLnByb3RvdHlwZSA9IFByb21pc2UucHJvdG90eXBlO1xuXG4gICRRLmRlZmVyID0gZGVmZXI7XG4gICRRLnJlamVjdCA9IHJlamVjdDtcbiAgJFEud2hlbiA9IHdoZW47XG4gICRRLnJlc29sdmUgPSByZXNvbHZlO1xuICAkUS5hbGwgPSBhbGw7XG4gICRRLnJhY2UgPSByYWNlO1xuXG4gIHJldHVybiAkUTtcbn1cblxuZnVuY3Rpb24gaXNTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQoc3RhdGUpIHtcbiAgcmV0dXJuICEhc3RhdGUucHVyO1xufVxuZnVuY3Rpb24gbWFya1FTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQoc3RhdGUpIHtcbiAgc3RhdGUucHVyID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG1hcmtRRXhjZXB0aW9uSGFuZGxlZChxKSB7XG4gIG1hcmtRU3RhdGVFeGNlcHRpb25IYW5kbGVkKHEuJCRzdGF0ZSk7XG59XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJCRSQUZQcm92aWRlcigpIHsgLy9yQUZcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyR0aW1lb3V0JywgZnVuY3Rpb24oJHdpbmRvdywgJHRpbWVvdXQpIHtcbiAgICB2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cbiAgICB2YXIgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSAkd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXG4gICAgdmFyIHJhZlN1cHBvcnRlZCA9ICEhcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgIHZhciByYWYgPSByYWZTdXBwb3J0ZWRcbiAgICAgID8gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICB2YXIgaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pO1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICA6IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgdmFyIHRpbWVyID0gJHRpbWVvdXQoZm4sIDE2LjY2LCBmYWxzZSk7IC8vIDEwMDAgLyA2MCA9IDE2LjY2NlxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgIHJhZi5zdXBwb3J0ZWQgPSByYWZTdXBwb3J0ZWQ7XG5cbiAgICByZXR1cm4gcmFmO1xuICB9XTtcbn1cblxuLyoqXG4gKiBERVNJR04gTk9URVNcbiAqXG4gKiBUaGUgZGVzaWduIGRlY2lzaW9ucyBiZWhpbmQgdGhlIHNjb3BlIGFyZSBoZWF2aWx5IGZhdm9yZWQgZm9yIHNwZWVkIGFuZCBtZW1vcnkgY29uc3VtcHRpb24uXG4gKlxuICogVGhlIHR5cGljYWwgdXNlIG9mIHNjb3BlIGlzIHRvIHdhdGNoIHRoZSBleHByZXNzaW9ucywgd2hpY2ggbW9zdCBvZiB0aGUgdGltZSByZXR1cm4gdGhlIHNhbWVcbiAqIHZhbHVlIGFzIGxhc3QgdGltZSBzbyB3ZSBvcHRpbWl6ZSB0aGUgb3BlcmF0aW9uLlxuICpcbiAqIENsb3N1cmVzIGNvbnN0cnVjdGlvbiBpcyBleHBlbnNpdmUgaW4gdGVybXMgb2Ygc3BlZWQgYXMgd2VsbCBhcyBtZW1vcnk6XG4gKiAgIC0gTm8gY2xvc3VyZXMsIGluc3RlYWQgdXNlIHByb3RvdHlwaWNhbCBpbmhlcml0YW5jZSBmb3IgQVBJXG4gKiAgIC0gSW50ZXJuYWwgc3RhdGUgbmVlZHMgdG8gYmUgc3RvcmVkIG9uIHNjb3BlIGRpcmVjdGx5LCB3aGljaCBtZWFucyB0aGF0IHByaXZhdGUgc3RhdGUgaXNcbiAqICAgICBleHBvc2VkIGFzICQkX19fXyBwcm9wZXJ0aWVzXG4gKlxuICogTG9vcCBvcGVyYXRpb25zIGFyZSBvcHRpbWl6ZWQgYnkgdXNpbmcgd2hpbGUoY291bnQtLSkgeyAuLi4gfVxuICogICAtIFRoaXMgbWVhbnMgdGhhdCBpbiBvcmRlciB0byBrZWVwIHRoZSBzYW1lIG9yZGVyIG9mIGV4ZWN1dGlvbiBhcyBhZGRpdGlvbiB3ZSBoYXZlIHRvIGFkZFxuICogICAgIGl0ZW1zIHRvIHRoZSBhcnJheSBhdCB0aGUgYmVnaW5uaW5nICh1bnNoaWZ0KSBpbnN0ZWFkIG9mIGF0IHRoZSBlbmQgKHB1c2gpXG4gKlxuICogQ2hpbGQgc2NvcGVzIGFyZSBjcmVhdGVkIGFuZCByZW1vdmVkIG9mdGVuXG4gKiAgIC0gVXNpbmcgYW4gYXJyYXkgd291bGQgYmUgc2xvdyBzaW5jZSBpbnNlcnRzIGluIHRoZSBtaWRkbGUgYXJlIGV4cGVuc2l2ZTsgc28gd2UgdXNlIGxpbmtlZCBsaXN0c1xuICpcbiAqIFRoZXJlIGFyZSBmZXdlciB3YXRjaGVzIHRoYW4gb2JzZXJ2ZXJzLiBUaGlzIGlzIHdoeSB5b3UgZG9uJ3Qgd2FudCB0aGUgb2JzZXJ2ZXIgdG8gYmUgaW1wbGVtZW50ZWRcbiAqIGluIHRoZSBzYW1lIHdheSBhcyB3YXRjaC4gV2F0Y2ggcmVxdWlyZXMgcmV0dXJuIG9mIHRoZSBpbml0aWFsaXphdGlvbiBmdW5jdGlvbiB3aGljaCBpcyBleHBlbnNpdmVcbiAqIHRvIGNvbnN0cnVjdC5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkcm9vdFNjb3BlUHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFByb3ZpZGVyIGZvciB0aGUgJHJvb3RTY29wZSBzZXJ2aWNlLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJHJvb3RTY29wZVByb3ZpZGVyI2RpZ2VzdFR0bFxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgbnVtYmVyIG9mIGAkZGlnZXN0YCBpdGVyYXRpb25zIHRoZSBzY29wZSBzaG91bGQgYXR0ZW1wdCB0byBleGVjdXRlIGJlZm9yZSBnaXZpbmcgdXAgYW5kXG4gKiBhc3N1bWluZyB0aGF0IHRoZSBtb2RlbCBpcyB1bnN0YWJsZS5cbiAqXG4gKiBUaGUgY3VycmVudCBkZWZhdWx0IGlzIDEwIGl0ZXJhdGlvbnMuXG4gKlxuICogSW4gY29tcGxleCBhcHBsaWNhdGlvbnMgaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBkZXBlbmRlbmNpZXMgYmV0d2VlbiBgJHdhdGNoYHMgd2lsbCByZXN1bHQgaW5cbiAqIHNldmVyYWwgZGlnZXN0IGl0ZXJhdGlvbnMuIEhvd2V2ZXIgaWYgYW4gYXBwbGljYXRpb24gbmVlZHMgbW9yZSB0aGFuIHRoZSBkZWZhdWx0IDEwIGRpZ2VzdFxuICogaXRlcmF0aW9ucyBmb3IgaXRzIG1vZGVsIHRvIHN0YWJpbGl6ZSB0aGVuIHlvdSBzaG91bGQgaW52ZXN0aWdhdGUgd2hhdCBpcyBjYXVzaW5nIHRoZSBtb2RlbCB0b1xuICogY29udGludW91c2x5IGNoYW5nZSBkdXJpbmcgdGhlIGRpZ2VzdC5cbiAqXG4gKiBJbmNyZWFzaW5nIHRoZSBUVEwgY291bGQgaGF2ZSBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMsIHNvIHlvdSBzaG91bGQgbm90IGNoYW5nZSBpdCB3aXRob3V0XG4gKiBwcm9wZXIganVzdGlmaWNhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbGltaXQgVGhlIG51bWJlciBvZiBkaWdlc3QgaXRlcmF0aW9ucy5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRyb290U2NvcGVcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogRXZlcnkgYXBwbGljYXRpb24gaGFzIGEgc2luZ2xlIHJvb3Qge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9LlxuICogQWxsIG90aGVyIHNjb3BlcyBhcmUgZGVzY2VuZGFudCBzY29wZXMgb2YgdGhlIHJvb3Qgc2NvcGUuIFNjb3BlcyBwcm92aWRlIHNlcGFyYXRpb25cbiAqIGJldHdlZW4gdGhlIG1vZGVsIGFuZCB0aGUgdmlldywgdmlhIGEgbWVjaGFuaXNtIGZvciB3YXRjaGluZyB0aGUgbW9kZWwgZm9yIGNoYW5nZXMuXG4gKiBUaGV5IGFsc28gcHJvdmlkZSBldmVudCBlbWlzc2lvbi9icm9hZGNhc3QgYW5kIHN1YnNjcmlwdGlvbiBmYWNpbGl0eS4gU2VlIHRoZVxuICoge0BsaW5rIGd1aWRlL3Njb3BlIGRldmVsb3BlciBndWlkZSBvbiBzY29wZXN9LlxuICovXG5mdW5jdGlvbiAkUm9vdFNjb3BlUHJvdmlkZXIoKSB7XG4gIHZhciBUVEwgPSAxMDtcbiAgdmFyICRyb290U2NvcGVNaW5FcnIgPSBtaW5FcnIoJyRyb290U2NvcGUnKTtcbiAgdmFyIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcbiAgdmFyIGFwcGx5QXN5bmNJZCA9IG51bGw7XG5cbiAgdGhpcy5kaWdlc3RUdGwgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBUVEwgPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIFRUTDtcbiAgfTtcblxuICBmdW5jdGlvbiBjcmVhdGVDaGlsZFNjb3BlQ2xhc3MocGFyZW50KSB7XG4gICAgZnVuY3Rpb24gQ2hpbGRTY29wZSgpIHtcbiAgICAgIHRoaXMuJCR3YXRjaGVycyA9IHRoaXMuJCRuZXh0U2libGluZyA9XG4gICAgICAgICAgdGhpcy4kJGNoaWxkSGVhZCA9IHRoaXMuJCRjaGlsZFRhaWwgPSBudWxsO1xuICAgICAgdGhpcy4kJGxpc3RlbmVycyA9IHt9O1xuICAgICAgdGhpcy4kJGxpc3RlbmVyQ291bnQgPSB7fTtcbiAgICAgIHRoaXMuJCR3YXRjaGVyc0NvdW50ID0gMDtcbiAgICAgIHRoaXMuJGlkID0gbmV4dFVpZCgpO1xuICAgICAgdGhpcy4kJENoaWxkU2NvcGUgPSBudWxsO1xuICAgIH1cbiAgICBDaGlsZFNjb3BlLnByb3RvdHlwZSA9IHBhcmVudDtcbiAgICByZXR1cm4gQ2hpbGRTY29wZTtcbiAgfVxuXG4gIHRoaXMuJGdldCA9IFsnJGV4Y2VwdGlvbkhhbmRsZXInLCAnJHBhcnNlJywgJyRicm93c2VyJyxcbiAgICAgIGZ1bmN0aW9uKCRleGNlcHRpb25IYW5kbGVyLCAkcGFyc2UsICRicm93c2VyKSB7XG5cbiAgICBmdW5jdGlvbiBkZXN0cm95Q2hpbGRTY29wZSgkZXZlbnQpIHtcbiAgICAgICAgJGV2ZW50LmN1cnJlbnRTY29wZS4kJGRlc3Ryb3llZCA9IHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW5VcFNjb3BlKCRzY29wZSkge1xuXG4gICAgICAvLyBTdXBwb3J0OiBJRSA5IG9ubHlcbiAgICAgIGlmIChtc2llID09PSA5KSB7XG4gICAgICAgIC8vIFRoZXJlIGlzIGEgbWVtb3J5IGxlYWsgaW4gSUU5IGlmIGFsbCBjaGlsZCBzY29wZXMgYXJlIG5vdCBkaXNjb25uZWN0ZWRcbiAgICAgICAgLy8gY29tcGxldGVseSB3aGVuIGEgc2NvcGUgaXMgZGVzdHJveWVkLiBTbyB0aGlzIGNvZGUgd2lsbCByZWN1cnNlIHVwIHRocm91Z2hcbiAgICAgICAgLy8gYWxsIHRoaXMgc2NvcGVzIGNoaWxkcmVuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFNlZSBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xMDcwNlxuICAgICAgICBpZiAoJHNjb3BlLiQkY2hpbGRIZWFkKSB7XG4gICAgICAgICAgY2xlYW5VcFNjb3BlKCRzY29wZS4kJGNoaWxkSGVhZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRzY29wZS4kJG5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgY2xlYW5VcFNjb3BlKCRzY29wZS4kJG5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29kZSBiZWxvdyB3b3JrcyBhcm91bmQgSUU5IGFuZCBWOCdzIG1lbW9yeSBsZWFrc1xuICAgICAgLy9cbiAgICAgIC8vIFNlZTpcbiAgICAgIC8vIC0gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIwNzMjYzI2XG4gICAgICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzY3OTQjaXNzdWVjb21tZW50LTM4NjQ4OTA5XG4gICAgICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzEzMTMjaXNzdWVjb21tZW50LTEwMzc4NDUxXG5cbiAgICAgICRzY29wZS4kcGFyZW50ID0gJHNjb3BlLiQkbmV4dFNpYmxpbmcgPSAkc2NvcGUuJCRwcmV2U2libGluZyA9ICRzY29wZS4kJGNoaWxkSGVhZCA9XG4gICAgICAgICAgJHNjb3BlLiQkY2hpbGRUYWlsID0gJHNjb3BlLiRyb290ID0gJHNjb3BlLiQkd2F0Y2hlcnMgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyB0eXBlXG4gICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQSByb290IHNjb3BlIGNhbiBiZSByZXRyaWV2ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlICRyb290U2NvcGV9IGtleSBmcm9tIHRoZVxuICAgICAqIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBDaGlsZCBzY29wZXMgYXJlIGNyZWF0ZWQgdXNpbmcgdGhlXG4gICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG5ldyAkbmV3KCl9IG1ldGhvZC4gKE1vc3Qgc2NvcGVzIGFyZSBjcmVhdGVkIGF1dG9tYXRpY2FsbHkgd2hlblxuICAgICAqIGNvbXBpbGVkIEhUTUwgdGVtcGxhdGUgaXMgZXhlY3V0ZWQuKSBTZWUgYWxzbyB0aGUge0BsaW5rIGd1aWRlL3Njb3BlIFNjb3BlcyBndWlkZX0gZm9yXG4gICAgICogYW4gaW4tZGVwdGggaW50cm9kdWN0aW9uIGFuZCB1c2FnZSBleGFtcGxlcy5cbiAgICAgKlxuICAgICAqXG4gICAgICogIyMgSW5oZXJpdGFuY2VcbiAgICAgKiBBIHNjb3BlIGNhbiBpbmhlcml0IGZyb20gYSBwYXJlbnQgc2NvcGUsIGFzIGluIHRoaXMgZXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAgICAgdmFyIHBhcmVudCA9ICRyb290U2NvcGU7XG4gICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuJG5ldygpO1xuXG4gICAgICAgICBwYXJlbnQuc2FsdXRhdGlvbiA9IFwiSGVsbG9cIjtcbiAgICAgICAgIGV4cGVjdChjaGlsZC5zYWx1dGF0aW9uKS50b0VxdWFsKCdIZWxsbycpO1xuXG4gICAgICAgICBjaGlsZC5zYWx1dGF0aW9uID0gXCJXZWxjb21lXCI7XG4gICAgICAgICBleHBlY3QoY2hpbGQuc2FsdXRhdGlvbikudG9FcXVhbCgnV2VsY29tZScpO1xuICAgICAgICAgZXhwZWN0KHBhcmVudC5zYWx1dGF0aW9uKS50b0VxdWFsKCdIZWxsbycpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogV2hlbiBpbnRlcmFjdGluZyB3aXRoIGBTY29wZWAgaW4gdGVzdHMsIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHMgYXJlIGF2YWlsYWJsZSBvbiB0aGVcbiAgICAgKiBpbnN0YW5jZXMgb2YgYFNjb3BlYCB0eXBlLiBTZWUge0BsaW5rIG5nTW9jay4kcm9vdFNjb3BlLlNjb3BlIG5nTW9jayBTY29wZX0gZm9yIGFkZGl0aW9uYWxcbiAgICAgKiBkZXRhaWxzLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbigpPj19IHByb3ZpZGVycyBNYXAgb2Ygc2VydmljZSBmYWN0b3J5IHdoaWNoIG5lZWQgdG8gYmVcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkIGZvciB0aGUgY3VycmVudCBzY29wZS4gRGVmYXVsdHMgdG8ge0BsaW5rIG5nfS5cbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCAqPj19IGluc3RhbmNlQ2FjaGUgUHJvdmlkZXMgcHJlLWluc3RhbnRpYXRlZCBzZXJ2aWNlcyB3aGljaCBzaG91bGRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZC9vdmVycmlkZSBzZXJ2aWNlcyBwcm92aWRlZCBieSBgcHJvdmlkZXJzYC4gVGhpcyBpcyBoYW5keVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiB1bml0LXRlc3RpbmcgYW5kIGhhdmluZyB0aGUgbmVlZCB0byBvdmVycmlkZSBhIGRlZmF1bHRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2UuXG4gICAgICogQHJldHVybnMge09iamVjdH0gTmV3bHkgY3JlYXRlZCBzY29wZS5cbiAgICAgKlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNjb3BlKCkge1xuICAgICAgdGhpcy4kaWQgPSBuZXh0VWlkKCk7XG4gICAgICB0aGlzLiQkcGhhc2UgPSB0aGlzLiRwYXJlbnQgPSB0aGlzLiQkd2F0Y2hlcnMgPVxuICAgICAgICAgICAgICAgICAgICAgdGhpcy4kJG5leHRTaWJsaW5nID0gdGhpcy4kJHByZXZTaWJsaW5nID1cbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuJCRjaGlsZEhlYWQgPSB0aGlzLiQkY2hpbGRUYWlsID0gbnVsbDtcbiAgICAgIHRoaXMuJHJvb3QgPSB0aGlzO1xuICAgICAgdGhpcy4kJGRlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgdGhpcy4kJGxpc3RlbmVycyA9IHt9O1xuICAgICAgdGhpcy4kJGxpc3RlbmVyQ291bnQgPSB7fTtcbiAgICAgIHRoaXMuJCR3YXRjaGVyc0NvdW50ID0gMDtcbiAgICAgIHRoaXMuJCRpc29sYXRlQmluZGluZ3MgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGlkXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBVbmlxdWUgc2NvcGUgSUQgKG1vbm90b25pY2FsbHkgaW5jcmVhc2luZykgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuXG4gICAgICovXG5cbiAgICAgLyoqXG4gICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRwYXJlbnRcbiAgICAgICpcbiAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAqIFJlZmVyZW5jZSB0byB0aGUgcGFyZW50IHNjb3BlLlxuICAgICAgKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHJvb3RcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJlZmVyZW5jZSB0byB0aGUgcm9vdCBzY29wZS5cbiAgICAgICAqL1xuXG4gICAgU2NvcGUucHJvdG90eXBlID0ge1xuICAgICAgY29uc3RydWN0b3I6IFNjb3BlLFxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRuZXdcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBDcmVhdGVzIGEgbmV3IGNoaWxkIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIHNjb3BlfS5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgcGFyZW50IHNjb3BlIHdpbGwgcHJvcGFnYXRlIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gZXZlbnQuXG4gICAgICAgKiBUaGUgc2NvcGUgY2FuIGJlIHJlbW92ZWQgZnJvbSB0aGUgc2NvcGUgaGllcmFyY2h5IHVzaW5nIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkZXN0cm95ICRkZXN0cm95KCl9LlxuICAgICAgICpcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkZXN0cm95ICRkZXN0cm95KCl9IG11c3QgYmUgY2FsbGVkIG9uIGEgc2NvcGUgd2hlbiBpdCBpc1xuICAgICAgICogZGVzaXJlZCBmb3IgdGhlIHNjb3BlIGFuZCBpdHMgY2hpbGQgc2NvcGVzIHRvIGJlIHBlcm1hbmVudGx5IGRldGFjaGVkIGZyb20gdGhlIHBhcmVudCBhbmRcbiAgICAgICAqIHRodXMgc3RvcCBwYXJ0aWNpcGF0aW5nIGluIG1vZGVsIGNoYW5nZSBkZXRlY3Rpb24gYW5kIGxpc3RlbmVyIG5vdGlmaWNhdGlvbiBieSBpbnZva2luZy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzb2xhdGUgSWYgdHJ1ZSwgdGhlbiB0aGUgc2NvcGUgZG9lcyBub3QgcHJvdG90eXBpY2FsbHkgaW5oZXJpdCBmcm9tIHRoZVxuICAgICAgICogICAgICAgICBwYXJlbnQgc2NvcGUuIFRoZSBzY29wZSBpcyBpc29sYXRlZCwgYXMgaXQgY2FuIG5vdCBzZWUgcGFyZW50IHNjb3BlIHByb3BlcnRpZXMuXG4gICAgICAgKiAgICAgICAgIFdoZW4gY3JlYXRpbmcgd2lkZ2V0cywgaXQgaXMgdXNlZnVsIGZvciB0aGUgd2lkZ2V0IHRvIG5vdCBhY2NpZGVudGFsbHkgcmVhZCBwYXJlbnRcbiAgICAgICAqICAgICAgICAgc3RhdGUuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtTY29wZX0gW3BhcmVudD10aGlzXSBUaGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgYFNjb3BlYH0gdGhhdCB3aWxsIGJlIHRoZSBgJHBhcmVudGBcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2YgdGhlIG5ld2x5IGNyZWF0ZWQgc2NvcGUuIERlZmF1bHRzIHRvIGB0aGlzYCBzY29wZSBpZiBub3QgcHJvdmlkZWQuXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgdXNlZCB3aGVuIGNyZWF0aW5nIGEgdHJhbnNjbHVkZSBzY29wZSB0byBjb3JyZWN0bHkgcGxhY2UgaXRcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhlIHNjb3BlIGhpZXJhcmNoeSB3aGlsZSBtYWludGFpbmluZyB0aGUgY29ycmVjdCBwcm90b3R5cGljYWxcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGFuY2UuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge09iamVjdH0gVGhlIG5ld2x5IGNyZWF0ZWQgY2hpbGQgc2NvcGUuXG4gICAgICAgKlxuICAgICAgICovXG4gICAgICAkbmV3OiBmdW5jdGlvbihpc29sYXRlLCBwYXJlbnQpIHtcbiAgICAgICAgdmFyIGNoaWxkO1xuXG4gICAgICAgIHBhcmVudCA9IHBhcmVudCB8fCB0aGlzO1xuXG4gICAgICAgIGlmIChpc29sYXRlKSB7XG4gICAgICAgICAgY2hpbGQgPSBuZXcgU2NvcGUoKTtcbiAgICAgICAgICBjaGlsZC4kcm9vdCA9IHRoaXMuJHJvb3Q7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT25seSBjcmVhdGUgYSBjaGlsZCBzY29wZSBjbGFzcyBpZiBzb21lYm9keSBhc2tzIGZvciBvbmUsXG4gICAgICAgICAgLy8gYnV0IGNhY2hlIGl0IHRvIGFsbG93IHRoZSBWTSB0byBvcHRpbWl6ZSBsb29rdXBzLlxuICAgICAgICAgIGlmICghdGhpcy4kJENoaWxkU2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMuJCRDaGlsZFNjb3BlID0gY3JlYXRlQ2hpbGRTY29wZUNsYXNzKHRoaXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGlsZCA9IG5ldyB0aGlzLiQkQ2hpbGRTY29wZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkLiRwYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIGNoaWxkLiQkcHJldlNpYmxpbmcgPSBwYXJlbnQuJCRjaGlsZFRhaWw7XG4gICAgICAgIGlmIChwYXJlbnQuJCRjaGlsZEhlYWQpIHtcbiAgICAgICAgICBwYXJlbnQuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZyA9IGNoaWxkO1xuICAgICAgICAgIHBhcmVudC4kJGNoaWxkVGFpbCA9IGNoaWxkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcmVudC4kJGNoaWxkSGVhZCA9IHBhcmVudC4kJGNoaWxkVGFpbCA9IGNoaWxkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB0aGUgbmV3IHNjb3BlIGlzIG5vdCBpc29sYXRlZCBvciB3ZSBpbmhlcml0IGZyb20gYHRoaXNgLCBhbmRcbiAgICAgICAgLy8gdGhlIHBhcmVudCBzY29wZSBpcyBkZXN0cm95ZWQsIHRoZSBwcm9wZXJ0eSBgJCRkZXN0cm95ZWRgIGlzIGluaGVyaXRlZFxuICAgICAgICAvLyBwcm90b3R5cGljYWxseS4gSW4gYWxsIG90aGVyIGNhc2VzLCB0aGlzIHByb3BlcnR5IG5lZWRzIHRvIGJlIHNldFxuICAgICAgICAvLyB3aGVuIHRoZSBwYXJlbnQgc2NvcGUgaXMgZGVzdHJveWVkLlxuICAgICAgICAvLyBUaGUgbGlzdGVuZXIgbmVlZHMgdG8gYmUgYWRkZWQgYWZ0ZXIgdGhlIHBhcmVudCBpcyBzZXRcbiAgICAgICAgaWYgKGlzb2xhdGUgfHwgcGFyZW50ICE9PSB0aGlzKSBjaGlsZC4kb24oJyRkZXN0cm95JywgZGVzdHJveUNoaWxkU2NvcGUpO1xuXG4gICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZWdpc3RlcnMgYSBgbGlzdGVuZXJgIGNhbGxiYWNrIHRvIGJlIGV4ZWN1dGVkIHdoZW5ldmVyIHRoZSBgd2F0Y2hFeHByZXNzaW9uYCBjaGFuZ2VzLlxuICAgICAgICpcbiAgICAgICAqIC0gVGhlIGB3YXRjaEV4cHJlc3Npb25gIGlzIGNhbGxlZCBvbiBldmVyeSBjYWxsIHRvIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3RcbiAgICAgICAqICAgJGRpZ2VzdCgpfSBhbmQgc2hvdWxkIHJldHVybiB0aGUgdmFsdWUgdGhhdCB3aWxsIGJlIHdhdGNoZWQuIChgd2F0Y2hFeHByZXNzaW9uYCBzaG91bGQgbm90IGNoYW5nZVxuICAgICAgICogICBpdHMgdmFsdWUgd2hlbiBleGVjdXRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIHRoZSBzYW1lIGlucHV0IGJlY2F1c2UgaXQgbWF5IGJlIGV4ZWN1dGVkIG11bHRpcGxlXG4gICAgICAgKiAgIHRpbWVzIGJ5IHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfS4gVGhhdCBpcywgYHdhdGNoRXhwcmVzc2lvbmAgc2hvdWxkIGJlXG4gICAgICAgKiAgIFtpZGVtcG90ZW50XShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lkZW1wb3RlbmNlKS4pXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCBvbmx5IHdoZW4gdGhlIHZhbHVlIGZyb20gdGhlIGN1cnJlbnQgYHdhdGNoRXhwcmVzc2lvbmAgYW5kIHRoZVxuICAgICAgICogICBwcmV2aW91cyBjYWxsIHRvIGB3YXRjaEV4cHJlc3Npb25gIGFyZSBub3QgZXF1YWwgKHdpdGggdGhlIGV4Y2VwdGlvbiBvZiB0aGUgaW5pdGlhbCBydW4sXG4gICAgICAgKiAgIHNlZSBiZWxvdykuIEluZXF1YWxpdHkgaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gcmVmZXJlbmNlIGluZXF1YWxpdHksXG4gICAgICAgKiAgIFtzdHJpY3QgY29tcGFyaXNvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL0NvbXBhcmlzb25fT3BlcmF0b3JzKVxuICAgICAgICogICAgdmlhIHRoZSBgIT09YCBKYXZhc2NyaXB0IG9wZXJhdG9yLCB1bmxlc3MgYG9iamVjdEVxdWFsaXR5ID09IHRydWVgXG4gICAgICAgKiAgIChzZWUgbmV4dCBwb2ludClcbiAgICAgICAqIC0gV2hlbiBgb2JqZWN0RXF1YWxpdHkgPT0gdHJ1ZWAsIGluZXF1YWxpdHkgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gIGlzIGRldGVybWluZWRcbiAgICAgICAqICAgYWNjb3JkaW5nIHRvIHRoZSB7QGxpbmsgYW5ndWxhci5lcXVhbHN9IGZ1bmN0aW9uLiBUbyBzYXZlIHRoZSB2YWx1ZSBvZiB0aGUgb2JqZWN0IGZvclxuICAgICAgICogICBsYXRlciBjb21wYXJpc29uLCB0aGUge0BsaW5rIGFuZ3VsYXIuY29weX0gZnVuY3Rpb24gaXMgdXNlZC4gVGhpcyB0aGVyZWZvcmUgbWVhbnMgdGhhdFxuICAgICAgICogICB3YXRjaGluZyBjb21wbGV4IG9iamVjdHMgd2lsbCBoYXZlIGFkdmVyc2UgbWVtb3J5IGFuZCBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMuXG4gICAgICAgKiAtIFRoaXMgc2hvdWxkIG5vdCBiZSB1c2VkIHRvIHdhdGNoIGZvciBjaGFuZ2VzIGluIG9iamVjdHMgdGhhdCBhcmVcbiAgICAgICAqICAgb3IgY29udGFpbiBbRmlsZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZpbGUpIG9iamVjdHMgZHVlIHRvIGxpbWl0YXRpb25zIHdpdGgge0BsaW5rIGFuZ3VsYXIuY29weSBgYW5ndWxhci5jb3B5YH0uXG4gICAgICAgKiAtIFRoZSB3YXRjaCBgbGlzdGVuZXJgIG1heSBjaGFuZ2UgdGhlIG1vZGVsLCB3aGljaCBtYXkgdHJpZ2dlciBvdGhlciBgbGlzdGVuZXJgcyB0byBmaXJlLlxuICAgICAgICogICBUaGlzIGlzIGFjaGlldmVkIGJ5IHJlcnVubmluZyB0aGUgd2F0Y2hlcnMgdW50aWwgbm8gY2hhbmdlcyBhcmUgZGV0ZWN0ZWQuIFRoZSByZXJ1blxuICAgICAgICogICBpdGVyYXRpb24gbGltaXQgaXMgMTAgdG8gcHJldmVudCBhbiBpbmZpbml0ZSBsb29wIGRlYWRsb2NrLlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBJZiB5b3Ugd2FudCB0byBiZSBub3RpZmllZCB3aGVuZXZlciB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGlzIGNhbGxlZCxcbiAgICAgICAqIHlvdSBjYW4gcmVnaXN0ZXIgYSBgd2F0Y2hFeHByZXNzaW9uYCBmdW5jdGlvbiB3aXRoIG5vIGBsaXN0ZW5lcmAuIChCZSBwcmVwYXJlZCBmb3JcbiAgICAgICAqIG11bHRpcGxlIGNhbGxzIHRvIHlvdXIgYHdhdGNoRXhwcmVzc2lvbmAgYmVjYXVzZSBpdCB3aWxsIGV4ZWN1dGUgbXVsdGlwbGUgdGltZXMgaW4gYVxuICAgICAgICogc2luZ2xlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUgaWYgYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQuKVxuICAgICAgICpcbiAgICAgICAqIEFmdGVyIGEgd2F0Y2hlciBpcyByZWdpc3RlcmVkIHdpdGggdGhlIHNjb3BlLCB0aGUgYGxpc3RlbmVyYCBmbiBpcyBjYWxsZWQgYXN5bmNocm9ub3VzbHlcbiAgICAgICAqICh2aWEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luYyAkZXZhbEFzeW5jfSkgdG8gaW5pdGlhbGl6ZSB0aGVcbiAgICAgICAqIHdhdGNoZXIuIEluIHJhcmUgY2FzZXMsIHRoaXMgaXMgdW5kZXNpcmFibGUgYmVjYXVzZSB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkIHdoZW4gdGhlIHJlc3VsdFxuICAgICAgICogb2YgYHdhdGNoRXhwcmVzc2lvbmAgZGlkbid0IGNoYW5nZS4gVG8gZGV0ZWN0IHRoaXMgc2NlbmFyaW8gd2l0aGluIHRoZSBgbGlzdGVuZXJgIGZuLCB5b3VcbiAgICAgICAqIGNhbiBjb21wYXJlIHRoZSBgbmV3VmFsYCBhbmQgYG9sZFZhbGAuIElmIHRoZXNlIHR3byB2YWx1ZXMgYXJlIGlkZW50aWNhbCAoYD09PWApIHRoZW4gdGhlXG4gICAgICAgKiBsaXN0ZW5lciB3YXMgY2FsbGVkIGR1ZSB0byBpbml0aWFsaXphdGlvbi5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICAvLyBsZXQncyBhc3N1bWUgdGhhdCBzY29wZSB3YXMgZGVwZW5kZW5jeSBpbmplY3RlZCBhcyB0aGUgJHJvb3RTY29wZVxuICAgICAgICAgICB2YXIgc2NvcGUgPSAkcm9vdFNjb3BlO1xuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcblxuXG5cbiAgICAgICAgICAgLy8gVXNpbmcgYSBmdW5jdGlvbiBhcyBhIHdhdGNoRXhwcmVzc2lvblxuICAgICAgICAgICB2YXIgZm9vZDtcbiAgICAgICAgICAgc2NvcGUuZm9vZENvdW50ZXIgPSAwO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaChcbiAgICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHZhbHVlIGJlaW5nIHdhdGNoZWQuIEl0IGlzIGNhbGxlZCBmb3IgZWFjaCB0dXJuIG9mIHRoZSAkZGlnZXN0IGxvb3BcbiAgICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIGZvb2Q7IH0sXG4gICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgY2hhbmdlIGxpc3RlbmVyLCBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgYWJvdmUgZnVuY3Rpb24gY2hhbmdlc1xuICAgICAgICAgICAgIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgaWYgKCBuZXdWYWx1ZSAhPT0gb2xkVmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgIC8vIE9ubHkgaW5jcmVtZW50IHRoZSBjb3VudGVyIGlmIHRoZSB2YWx1ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgIHNjb3BlLmZvb2RDb3VudGVyID0gc2NvcGUuZm9vZENvdW50ZXIgKyAxO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgKTtcbiAgICAgICAgICAgLy8gTm8gZGlnZXN0IGhhcyBiZWVuIHJ1biBzbyB0aGUgY291bnRlciB3aWxsIGJlIHplcm9cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmZvb2RDb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIC8vIFJ1biB0aGUgZGlnZXN0IGJ1dCBzaW5jZSBmb29kIGhhcyBub3QgY2hhbmdlZCBjb3VudCB3aWxsIHN0aWxsIGJlIHplcm9cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG5cbiAgICAgICAgICAgLy8gVXBkYXRlIGZvb2QgYW5kIHJ1biBkaWdlc3QuICBOb3cgdGhlIGNvdW50ZXIgd2lsbCBpbmNyZW1lbnRcbiAgICAgICAgICAgZm9vZCA9ICdjaGVlc2VidXJnZXInO1xuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgxKTtcblxuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhmdW5jdGlvbigpfHN0cmluZyl9IHdhdGNoRXhwcmVzc2lvbiBFeHByZXNzaW9uIHRoYXQgaXMgZXZhbHVhdGVkIG9uIGVhY2hcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEEgY2hhbmdlIGluIHRoZSByZXR1cm4gdmFsdWUgdHJpZ2dlcnNcbiAgICAgICAqICAgIGEgY2FsbCB0byB0aGUgYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBFdmFsdWF0ZWQgYXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn1cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGNhbGxlZCB3aXRoIGN1cnJlbnQgYHNjb3BlYCBhcyBhIHBhcmFtZXRlci5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwsIHNjb3BlKX0gbGlzdGVuZXIgQ2FsbGJhY2sgY2FsbGVkIHdoZW5ldmVyIHRoZSB2YWx1ZVxuICAgICAgICogICAgb2YgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBuZXdWYWxgIGNvbnRhaW5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uYFxuICAgICAgICogICAgLSBgb2xkVmFsYCBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gXG4gICAgICAgKiAgICAtIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbb2JqZWN0RXF1YWxpdHk9ZmFsc2VdIENvbXBhcmUgZm9yIG9iamVjdCBlcXVhbGl0eSB1c2luZyB7QGxpbmsgYW5ndWxhci5lcXVhbHN9IGluc3RlYWQgb2ZcbiAgICAgICAqICAgICBjb21wYXJpbmcgZm9yIHJlZmVyZW5jZSBlcXVhbGl0eS5cbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgKi9cbiAgICAgICR3YXRjaDogZnVuY3Rpb24od2F0Y2hFeHAsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcHJldHR5UHJpbnRFeHByZXNzaW9uKSB7XG4gICAgICAgIHZhciBnZXQgPSAkcGFyc2Uod2F0Y2hFeHApO1xuICAgICAgICB2YXIgZm4gPSBpc0Z1bmN0aW9uKGxpc3RlbmVyKSA/IGxpc3RlbmVyIDogbm9vcDtcblxuICAgICAgICBpZiAoZ2V0LiQkd2F0Y2hEZWxlZ2F0ZSkge1xuICAgICAgICAgIHJldHVybiBnZXQuJCR3YXRjaERlbGVnYXRlKHRoaXMsIGZuLCBvYmplY3RFcXVhbGl0eSwgZ2V0LCB3YXRjaEV4cCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcyxcbiAgICAgICAgICAgIGFycmF5ID0gc2NvcGUuJCR3YXRjaGVycyxcbiAgICAgICAgICAgIHdhdGNoZXIgPSB7XG4gICAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgICAgbGFzdDogaW5pdFdhdGNoVmFsLFxuICAgICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgICAgZXhwOiBwcmV0dHlQcmludEV4cHJlc3Npb24gfHwgd2F0Y2hFeHAsXG4gICAgICAgICAgICAgIGVxOiAhIW9iamVjdEVxdWFsaXR5XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcblxuICAgICAgICBpZiAoIWFycmF5KSB7XG4gICAgICAgICAgYXJyYXkgPSBzY29wZS4kJHdhdGNoZXJzID0gW107XG4gICAgICAgICAgYXJyYXkuJCRkaWdlc3RXYXRjaEluZGV4ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgdXNlIHVuc2hpZnQgc2luY2Ugd2UgdXNlIGEgd2hpbGUgbG9vcCBpbiAkZGlnZXN0IGZvciBzcGVlZC5cbiAgICAgICAgLy8gdGhlIHdoaWxlIGxvb3AgcmVhZHMgaW4gcmV2ZXJzZSBvcmRlci5cbiAgICAgICAgYXJyYXkudW5zaGlmdCh3YXRjaGVyKTtcbiAgICAgICAgYXJyYXkuJCRkaWdlc3RXYXRjaEluZGV4Kys7XG4gICAgICAgIGluY3JlbWVudFdhdGNoZXJzQ291bnQodGhpcywgMSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaCgpIHtcbiAgICAgICAgICB2YXIgaW5kZXggPSBhcnJheVJlbW92ZShhcnJheSwgd2F0Y2hlcik7XG4gICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGluY3JlbWVudFdhdGNoZXJzQ291bnQoc2NvcGUsIC0xKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGFycmF5LiQkZGlnZXN0V2F0Y2hJbmRleCkge1xuICAgICAgICAgICAgICBhcnJheS4kJGRpZ2VzdFdhdGNoSW5kZXgtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaEdyb3VwXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQSB2YXJpYW50IG9mIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX0gd2hlcmUgaXQgd2F0Y2hlcyBhbiBhcnJheSBvZiBgd2F0Y2hFeHByZXNzaW9uc2AuXG4gICAgICAgKiBJZiBhbnkgb25lIGV4cHJlc3Npb24gaW4gdGhlIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgYGxpc3RlbmVyYCBpcyBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBpdGVtcyBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGFyZSBvYnNlcnZlZCB2aWEgdGhlIHN0YW5kYXJkIGAkd2F0Y2hgIG9wZXJhdGlvbi4gVGhlaXIgcmV0dXJuXG4gICAgICAgKiAgIHZhbHVlcyBhcmUgZXhhbWluZWQgZm9yIGNoYW5nZXMgb24gZXZlcnkgY2FsbCB0byBgJGRpZ2VzdGAuXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnkgZXhwcmVzc2lvbiBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGNoYW5nZXMuXG4gICAgICAgKlxuICAgICAgICogYCR3YXRjaEdyb3VwYCBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiB3YXRjaGluZyBlYWNoIGV4cHJlc3Npb24gaW5kaXZpZHVhbGx5LCBhbmQgc2hvdWxkIGJlXG4gICAgICAgKiB1c2VkIHdoZW4gdGhlIGxpc3RlbmVyIGRvZXMgbm90IG5lZWQgdG8ga25vdyB3aGljaCBleHByZXNzaW9uIGhhcyBjaGFuZ2VkLlxuICAgICAgICogSWYgdGhlIGxpc3RlbmVyIG5lZWRzIHRvIGtub3cgd2hpY2ggZXhwcmVzc2lvbiBoYXMgY2hhbmdlZCxcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX0gb3JcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaENvbGxlY3Rpb24gJHdhdGNoQ29sbGVjdGlvbigpfSBzaG91bGQgYmUgdXNlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmd8RnVuY3Rpb24oc2NvcGUpPn0gd2F0Y2hFeHByZXNzaW9ucyBBcnJheSBvZiBleHByZXNzaW9ucyB0aGF0IHdpbGwgYmUgaW5kaXZpZHVhbGx5XG4gICAgICAgKiB3YXRjaGVkIHVzaW5nIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX1cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ld1ZhbHVlcywgb2xkVmFsdWVzLCBzY29wZSl9IGxpc3RlbmVyIENhbGxiYWNrIGNhbGxlZCB3aGVuZXZlciB0aGUgcmV0dXJuIHZhbHVlIG9mIGFueVxuICAgICAgICogICAgZXhwcmVzc2lvbiBpbiBgd2F0Y2hFeHByZXNzaW9uc2AgY2hhbmdlc1xuICAgICAgICogICAgVGhlIGBuZXdWYWx1ZXNgIGFycmF5IGNvbnRhaW5zIHRoZSBjdXJyZW50IHZhbHVlcyBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgLCB3aXRoIHRoZSBpbmRleGVzIG1hdGNoaW5nXG4gICAgICAgKiAgICB0aG9zZSBvZiBgd2F0Y2hFeHByZXNzaW9uYFxuICAgICAgICogICAgYW5kIHRoZSBgb2xkVmFsdWVzYCBhcnJheSBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AsIHdpdGggdGhlIGluZGV4ZXMgbWF0Y2hpbmdcbiAgICAgICAqICAgIHRob3NlIG9mIGB3YXRjaEV4cHJlc3Npb25gLlxuICAgICAgICpcbiAgICAgICAqICAgIE5vdGUgdGhhdCBgbmV3VmFsdWVzYCBhbmQgYG9sZFZhbHVlc2AgcmVmbGVjdCB0aGUgZGlmZmVyZW5jZXMgaW4gZWFjaCAqKmluZGl2aWR1YWwqKlxuICAgICAgICogICAgZXhwcmVzc2lvbiwgYW5kIG5vdCB0aGUgZGlmZmVyZW5jZSBvZiB0aGUgdmFsdWVzIGJldHdlZW4gZWFjaCBjYWxsIG9mIHRoZSBsaXN0ZW5lci5cbiAgICAgICAqICAgIFRoYXQgbWVhbnMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBgbmV3VmFsdWVzYCBhbmQgYG9sZFZhbHVlc2AgY2Fubm90IGJlIHVzZWQgdG8gZGV0ZXJtaW5lXG4gICAgICAgKiAgICB3aGljaCBleHByZXNzaW9uIGhhcyBjaGFuZ2VkIC8gcmVtYWluZWQgc3RhYmxlOlxuICAgICAgICpcbiAgICAgICAqICAgIGBgYGpzXG4gICAgICAgKlxuICAgICAgICogICAgJHNjb3BlLiR3YXRjaEdyb3VwKFsndjEnLCAndjInXSwgZnVuY3Rpb24obmV3VmFsdWVzLCBvbGRWYWx1ZXMpIHtcbiAgICAgICAqICAgICAgY29uc29sZS5sb2cobmV3VmFsdWVzLCBvbGRWYWx1ZXMpO1xuICAgICAgICogICAgfSk7XG4gICAgICAgKlxuICAgICAgICogICAgLy8gbmV3VmFsdWVzLCBvbGRWYWx1ZXMgaW5pdGlhbGx5XG4gICAgICAgKiAgICAvLyBbdW5kZWZpbmVkLCB1bmRlZmluZWRdLCBbdW5kZWZpbmVkLCB1bmRlZmluZWRdXG4gICAgICAgKlxuICAgICAgICogICAgJHNjb3BlLnYxID0gJ2EnO1xuICAgICAgICogICAgJHNjb3BlLnYyID0gJ2EnO1xuICAgICAgICpcbiAgICAgICAqICAgIC8vIFsnYScsICdhJ10sIFt1bmRlZmluZWQsIHVuZGVmaW5lZF1cbiAgICAgICAqXG4gICAgICAgKiAgICAkc2NvcGUudjIgPSAnYidcbiAgICAgICAqXG4gICAgICAgKiAgICAvLyB2MSBoYXNuJ3QgY2hhbmdlZCBzaW5jZSBpdCBiZWNhbWUgYCdhJ2AsIHRoZXJlZm9yZSBpdHMgb2xkVmFsdWUgaXMgc3RpbGwgYHVuZGVmaW5lZGBcbiAgICAgICAqICAgIC8vIFsnYScsICdiJ10sIFt1bmRlZmluZWQsICdhJ11cbiAgICAgICAqXG4gICAgICAgKiAgICBgYGBcbiAgICAgICAqXG4gICAgICAgKiAgICBUaGUgYHNjb3BlYCByZWZlcnMgdG8gdGhlIGN1cnJlbnQgc2NvcGUuXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgYWxsIGxpc3RlbmVycy5cbiAgICAgICAqL1xuICAgICAgJHdhdGNoR3JvdXA6IGZ1bmN0aW9uKHdhdGNoRXhwcmVzc2lvbnMsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBvbGRWYWx1ZXMgPSBuZXcgQXJyYXkod2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpO1xuICAgICAgICB2YXIgbmV3VmFsdWVzID0gbmV3IEFycmF5KHdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoKTtcbiAgICAgICAgdmFyIGRlcmVnaXN0ZXJGbnMgPSBbXTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgY2hhbmdlUmVhY3Rpb25TY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGZpcnN0UnVuID0gdHJ1ZTtcblxuICAgICAgICBpZiAoIXdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gTm8gZXhwcmVzc2lvbnMgbWVhbnMgd2UgY2FsbCB0aGUgbGlzdGVuZXIgQVNBUFxuICAgICAgICAgIHZhciBzaG91bGRDYWxsID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkQ2FsbCkgbGlzdGVuZXIobmV3VmFsdWVzLCBuZXdWYWx1ZXMsIHNlbGYpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyV2F0Y2hHcm91cCgpIHtcbiAgICAgICAgICAgIHNob3VsZENhbGwgPSBmYWxzZTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIHNpemUgb2Ygb25lXG4gICAgICAgICAgcmV0dXJuIHRoaXMuJHdhdGNoKHdhdGNoRXhwcmVzc2lvbnNbMF0sIGZ1bmN0aW9uIHdhdGNoR3JvdXBBY3Rpb24odmFsdWUsIG9sZFZhbHVlLCBzY29wZSkge1xuICAgICAgICAgICAgbmV3VmFsdWVzWzBdID0gdmFsdWU7XG4gICAgICAgICAgICBvbGRWYWx1ZXNbMF0gPSBvbGRWYWx1ZTtcbiAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgKHZhbHVlID09PSBvbGRWYWx1ZSkgPyBuZXdWYWx1ZXMgOiBvbGRWYWx1ZXMsIHNjb3BlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvckVhY2god2F0Y2hFeHByZXNzaW9ucywgZnVuY3Rpb24oZXhwciwgaSkge1xuICAgICAgICAgIHZhciB1bndhdGNoRm4gPSBzZWxmLiR3YXRjaChleHByLCBmdW5jdGlvbiB3YXRjaEdyb3VwU3ViQWN0aW9uKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgbmV3VmFsdWVzW2ldID0gdmFsdWU7XG4gICAgICAgICAgICBvbGRWYWx1ZXNbaV0gPSBvbGRWYWx1ZTtcbiAgICAgICAgICAgIGlmICghY2hhbmdlUmVhY3Rpb25TY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgY2hhbmdlUmVhY3Rpb25TY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBzZWxmLiRldmFsQXN5bmMod2F0Y2hHcm91cEFjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVyZWdpc3RlckZucy5wdXNoKHVud2F0Y2hGbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHdhdGNoR3JvdXBBY3Rpb24oKSB7XG4gICAgICAgICAgY2hhbmdlUmVhY3Rpb25TY2hlZHVsZWQgPSBmYWxzZTtcblxuICAgICAgICAgIGlmIChmaXJzdFJ1bikge1xuICAgICAgICAgICAgZmlyc3RSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgbmV3VmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWVzLCBvbGRWYWx1ZXMsIHNlbGYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyV2F0Y2hHcm91cCgpIHtcbiAgICAgICAgICB3aGlsZSAoZGVyZWdpc3RlckZucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlcmVnaXN0ZXJGbnMuc2hpZnQoKSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0sXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaENvbGxlY3Rpb25cbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBTaGFsbG93IHdhdGNoZXMgdGhlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0IGFuZCBmaXJlcyB3aGVuZXZlciBhbnkgb2YgdGhlIHByb3BlcnRpZXMgY2hhbmdlXG4gICAgICAgKiAoZm9yIGFycmF5cywgdGhpcyBpbXBsaWVzIHdhdGNoaW5nIHRoZSBhcnJheSBpdGVtczsgZm9yIG9iamVjdCBtYXBzLCB0aGlzIGltcGxpZXMgd2F0Y2hpbmdcbiAgICAgICAqIHRoZSBwcm9wZXJ0aWVzKS4gSWYgYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQsIHRoZSBgbGlzdGVuZXJgIGNhbGxiYWNrIGlzIGZpcmVkLlxuICAgICAgICpcbiAgICAgICAqIC0gVGhlIGBvYmpgIGNvbGxlY3Rpb24gaXMgb2JzZXJ2ZWQgdmlhIHN0YW5kYXJkICR3YXRjaCBvcGVyYXRpb24gYW5kIGlzIGV4YW1pbmVkIG9uIGV2ZXJ5XG4gICAgICAgKiAgIGNhbGwgdG8gJGRpZ2VzdCgpIHRvIHNlZSBpZiBhbnkgaXRlbXMgaGF2ZSBiZWVuIGFkZGVkLCByZW1vdmVkLCBvciBtb3ZlZC5cbiAgICAgICAqIC0gVGhlIGBsaXN0ZW5lcmAgaXMgY2FsbGVkIHdoZW5ldmVyIGFueXRoaW5nIHdpdGhpbiB0aGUgYG9iamAgaGFzIGNoYW5nZWQuIEV4YW1wbGVzIGluY2x1ZGVcbiAgICAgICAqICAgYWRkaW5nLCByZW1vdmluZywgYW5kIG1vdmluZyBpdGVtcyBiZWxvbmdpbmcgdG8gYW4gb2JqZWN0IG9yIGFycmF5LlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ2lnb3InLCAnbWF0aWFzJywgJ21pc2tvJywgJ2phbWVzJ107XG4gICAgICAgICAgJHNjb3BlLmRhdGFDb3VudCA9IDQ7XG5cbiAgICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignbmFtZXMnLCBmdW5jdGlvbihuZXdOYW1lcywgb2xkTmFtZXMpIHtcbiAgICAgICAgICAgICRzY29wZS5kYXRhQ291bnQgPSBuZXdOYW1lcy5sZW5ndGg7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBleHBlY3QoJHNjb3BlLmRhdGFDb3VudCkudG9FcXVhbCg0KTtcbiAgICAgICAgICAkc2NvcGUuJGRpZ2VzdCgpO1xuXG4gICAgICAgICAgLy9zdGlsbCBhdCA0IC4uLiBubyBjaGFuZ2VzXG4gICAgICAgICAgZXhwZWN0KCRzY29wZS5kYXRhQ291bnQpLnRvRXF1YWwoNCk7XG5cbiAgICAgICAgICAkc2NvcGUubmFtZXMucG9wKCk7XG4gICAgICAgICAgJHNjb3BlLiRkaWdlc3QoKTtcblxuICAgICAgICAgIC8vbm93IHRoZXJlJ3MgYmVlbiBhIGNoYW5nZVxuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDMpO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9uKHNjb3BlKX0gb2JqIEV2YWx1YXRlZCBhcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS4gVGhlXG4gICAgICAgKiAgICBleHByZXNzaW9uIHZhbHVlIHNob3VsZCBldmFsdWF0ZSB0byBhbiBvYmplY3Qgb3IgYW4gYXJyYXkgd2hpY2ggaXMgb2JzZXJ2ZWQgb24gZWFjaFxuICAgICAgICogICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0fSBjeWNsZS4gQW55IHNoYWxsb3cgY2hhbmdlIHdpdGhpbiB0aGVcbiAgICAgICAqICAgIGNvbGxlY3Rpb24gd2lsbCB0cmlnZ2VyIGEgY2FsbCB0byB0aGUgYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ld0NvbGxlY3Rpb24sIG9sZENvbGxlY3Rpb24sIHNjb3BlKX0gbGlzdGVuZXIgYSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWRcbiAgICAgICAqICAgIHdoZW4gYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQuXG4gICAgICAgKiAgICAtIFRoZSBgbmV3Q29sbGVjdGlvbmAgb2JqZWN0IGlzIHRoZSBuZXdseSBtb2RpZmllZCBkYXRhIG9idGFpbmVkIGZyb20gdGhlIGBvYmpgIGV4cHJlc3Npb25cbiAgICAgICAqICAgIC0gVGhlIGBvbGRDb2xsZWN0aW9uYCBvYmplY3QgaXMgYSBjb3B5IG9mIHRoZSBmb3JtZXIgY29sbGVjdGlvbiBkYXRhLlxuICAgICAgICogICAgICBEdWUgdG8gcGVyZm9ybWFuY2UgY29uc2lkZXJhdGlvbnMsIHRoZWBvbGRDb2xsZWN0aW9uYCB2YWx1ZSBpcyBjb21wdXRlZCBvbmx5IGlmIHRoZVxuICAgICAgICogICAgICBgbGlzdGVuZXJgIGZ1bmN0aW9uIGRlY2xhcmVzIHR3byBvciBtb3JlIGFyZ3VtZW50cy5cbiAgICAgICAqICAgIC0gVGhlIGBzY29wZWAgYXJndW1lbnQgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGUtcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIGxpc3RlbmVyLiBXaGVuIHRoZVxuICAgICAgICogICAgZGUtcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkLCB0aGUgaW50ZXJuYWwgd2F0Y2ggb3BlcmF0aW9uIGlzIHRlcm1pbmF0ZWQuXG4gICAgICAgKi9cbiAgICAgICR3YXRjaENvbGxlY3Rpb246IGZ1bmN0aW9uKG9iaiwgbGlzdGVuZXIpIHtcbiAgICAgICAgJHdhdGNoQ29sbGVjdGlvbkludGVyY2VwdG9yLiRzdGF0ZWZ1bCA9IHRydWU7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvLyB0aGUgY3VycmVudCB2YWx1ZSwgdXBkYXRlZCBvbiBlYWNoIGRpcnR5LWNoZWNrIHJ1blxuICAgICAgICB2YXIgbmV3VmFsdWU7XG4gICAgICAgIC8vIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBuZXdWYWx1ZSBmcm9tIHRoZSBsYXN0IGRpcnR5LWNoZWNrIHJ1bixcbiAgICAgICAgLy8gdXBkYXRlZCB0byBtYXRjaCBuZXdWYWx1ZSBkdXJpbmcgZGlydHktY2hlY2sgcnVuXG4gICAgICAgIHZhciBvbGRWYWx1ZTtcbiAgICAgICAgLy8gYSBzaGFsbG93IGNvcHkgb2YgdGhlIG5ld1ZhbHVlIGZyb20gd2hlbiB0aGUgbGFzdCBjaGFuZ2UgaGFwcGVuZWRcbiAgICAgICAgdmFyIHZlcnlPbGRWYWx1ZTtcbiAgICAgICAgLy8gb25seSB0cmFjayB2ZXJ5T2xkVmFsdWUgaWYgdGhlIGxpc3RlbmVyIGlzIGFza2luZyBmb3IgaXRcbiAgICAgICAgdmFyIHRyYWNrVmVyeU9sZFZhbHVlID0gKGxpc3RlbmVyLmxlbmd0aCA+IDEpO1xuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0ZWQgPSAwO1xuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0b3IgPSAkcGFyc2Uob2JqLCAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IpO1xuICAgICAgICB2YXIgaW50ZXJuYWxBcnJheSA9IFtdO1xuICAgICAgICB2YXIgaW50ZXJuYWxPYmplY3QgPSB7fTtcbiAgICAgICAgdmFyIGluaXRSdW4gPSB0cnVlO1xuICAgICAgICB2YXIgb2xkTGVuZ3RoID0gMDtcblxuICAgICAgICBmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IoX3ZhbHVlKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBfdmFsdWU7XG4gICAgICAgICAgdmFyIG5ld0xlbmd0aCwga2V5LCBib3RoTmFOLCBuZXdJdGVtLCBvbGRJdGVtO1xuXG4gICAgICAgICAgLy8gSWYgdGhlIG5ldyB2YWx1ZSBpcyB1bmRlZmluZWQsIHRoZW4gcmV0dXJuIHVuZGVmaW5lZCBhcyB0aGUgd2F0Y2ggbWF5IGJlIGEgb25lLXRpbWUgd2F0Y2hcbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQobmV3VmFsdWUpKSByZXR1cm47XG5cbiAgICAgICAgICBpZiAoIWlzT2JqZWN0KG5ld1ZhbHVlKSkgeyAvLyBpZiBwcmltaXRpdmVcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlMaWtlKG5ld1ZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBpbnRlcm5hbEFycmF5KSB7XG4gICAgICAgICAgICAgIC8vIHdlIGFyZSB0cmFuc2l0aW9uaW5nIGZyb20gc29tZXRoaW5nIHdoaWNoIHdhcyBub3QgYW4gYXJyYXkgaW50byBhcnJheS5cbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBpbnRlcm5hbEFycmF5O1xuICAgICAgICAgICAgICBvbGRMZW5ndGggPSBvbGRWYWx1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdMZW5ndGggPSBuZXdWYWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChvbGRMZW5ndGggIT09IG5ld0xlbmd0aCkge1xuICAgICAgICAgICAgICAvLyBpZiBsZW5ndGhzIGRvIG5vdCBtYXRjaCB3ZSBuZWVkIHRvIHRyaWdnZXIgY2hhbmdlIG5vdGlmaWNhdGlvblxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICBvbGRWYWx1ZS5sZW5ndGggPSBvbGRMZW5ndGggPSBuZXdMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjb3B5IHRoZSBpdGVtcyB0byBvbGRWYWx1ZSBhbmQgbG9vayBmb3IgY2hhbmdlcy5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgb2xkSXRlbSA9IG9sZFZhbHVlW2ldO1xuICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3VmFsdWVbaV07XG5cbiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcbiAgICAgICAgICAgICAgaWYgKCFib3RoTmFOICYmIChvbGRJdGVtICE9PSBuZXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICAgICAgb2xkVmFsdWVbaV0gPSBuZXdJdGVtO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gaW50ZXJuYWxPYmplY3QpIHtcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBvYmplY3QgaW50byBvYmplY3QuXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gaW50ZXJuYWxPYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgb2xkTGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvcHkgdGhlIGl0ZW1zIHRvIG9sZFZhbHVlIGFuZCBsb29rIGZvciBjaGFuZ2VzLlxuICAgICAgICAgICAgbmV3TGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgbmV3TGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IG5ld1ZhbHVlW2tleV07XG4gICAgICAgICAgICAgICAgb2xkSXRlbSA9IG9sZFZhbHVlW2tleV07XG5cbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcbiAgICAgICAgICAgICAgICAgIGlmICghYm90aE5hTiAmJiAob2xkSXRlbSAhPT0gbmV3SXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9sZExlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZExlbmd0aCA+IG5ld0xlbmd0aCkge1xuICAgICAgICAgICAgICAvLyB3ZSB1c2VkIHRvIGhhdmUgbW9yZSBrZXlzLCBuZWVkIHRvIGZpbmQgdGhlbSBhbmQgZGVzdHJveSB0aGVtLlxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgb2xkTGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgICBkZWxldGUgb2xkVmFsdWVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNoYW5nZURldGVjdGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gJHdhdGNoQ29sbGVjdGlvbkFjdGlvbigpIHtcbiAgICAgICAgICBpZiAoaW5pdFJ1bikge1xuICAgICAgICAgICAgaW5pdFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIG5ld1ZhbHVlLCBzZWxmKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIHZlcnlPbGRWYWx1ZSwgc2VsZik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWFrZSBhIGNvcHkgZm9yIHRoZSBuZXh0IHRpbWUgYSBjb2xsZWN0aW9uIGlzIGNoYW5nZWRcbiAgICAgICAgICBpZiAodHJhY2tWZXJ5T2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgIC8vcHJpbWl0aXZlXG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5TGlrZShuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3IEFycmF5KG5ld1ZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3VmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWVbaV0gPSBuZXdWYWx1ZVtpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gaWYgb2JqZWN0XG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlW2tleV0gPSBuZXdWYWx1ZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiR3YXRjaChjaGFuZ2VEZXRlY3RvciwgJHdhdGNoQ29sbGVjdGlvbkFjdGlvbik7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFByb2Nlc3NlcyBhbGwgb2YgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyc30gb2YgdGhlIGN1cnJlbnQgc2NvcGUgYW5kXG4gICAgICAgKiBpdHMgY2hpbGRyZW4uIEJlY2F1c2UgYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcn0ncyBsaXN0ZW5lciBjYW4gY2hhbmdlXG4gICAgICAgKiB0aGUgbW9kZWwsIHRoZSBgJGRpZ2VzdCgpYCBrZWVwcyBjYWxsaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcnN9XG4gICAgICAgKiB1bnRpbCBubyBtb3JlIGxpc3RlbmVycyBhcmUgZmlyaW5nLiBUaGlzIG1lYW5zIHRoYXQgaXQgaXMgcG9zc2libGUgdG8gZ2V0IGludG8gYW4gaW5maW5pdGVcbiAgICAgICAqIGxvb3AuIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBgJ01heGltdW0gaXRlcmF0aW9uIGxpbWl0IGV4Y2VlZGVkLidgIGlmIHRoZSBudW1iZXIgb2ZcbiAgICAgICAqIGl0ZXJhdGlvbnMgZXhjZWVkcyAxMC5cbiAgICAgICAqXG4gICAgICAgKiBVc3VhbGx5LCB5b3UgZG9uJ3QgY2FsbCBgJGRpZ2VzdCgpYCBkaXJlY3RseSBpblxuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NvbnRyb2xsZXIgY29udHJvbGxlcnN9IG9yIGluXG4gICAgICAgKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gICAgICAgKiBJbnN0ZWFkLCB5b3Ugc2hvdWxkIGNhbGwge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5ICRhcHBseSgpfSAodHlwaWNhbGx5IGZyb20gd2l0aGluXG4gICAgICAgKiBhIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmV9KSwgd2hpY2ggd2lsbCBmb3JjZSBhIGAkZGlnZXN0KClgLlxuICAgICAgICpcbiAgICAgICAqIElmIHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkIHdoZW5ldmVyIGAkZGlnZXN0KClgIGlzIGNhbGxlZCxcbiAgICAgICAqIHlvdSBjYW4gcmVnaXN0ZXIgYSBgd2F0Y2hFeHByZXNzaW9uYCBmdW5jdGlvbiB3aXRoXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9IHdpdGggbm8gYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiBJbiB1bml0IHRlc3RzLCB5b3UgbWF5IG5lZWQgdG8gY2FsbCBgJGRpZ2VzdCgpYCB0byBzaW11bGF0ZSB0aGUgc2NvcGUgbGlmZSBjeWNsZS5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAgICAgdmFyIHNjb3BlID0gLi4uO1xuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqL1xuICAgICAgJGRpZ2VzdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3YXRjaCwgdmFsdWUsIGxhc3QsIGZuLCBnZXQsXG4gICAgICAgICAgICB3YXRjaGVycyxcbiAgICAgICAgICAgIGRpcnR5LCB0dGwgPSBUVEwsXG4gICAgICAgICAgICBuZXh0LCBjdXJyZW50LCB0YXJnZXQgPSB0aGlzLFxuICAgICAgICAgICAgd2F0Y2hMb2cgPSBbXSxcbiAgICAgICAgICAgIGxvZ0lkeCwgYXN5bmNUYXNrO1xuXG4gICAgICAgIGJlZ2luUGhhc2UoJyRkaWdlc3QnKTtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNoYW5nZXMgdG8gYnJvd3NlciB1cmwgdGhhdCBoYXBwZW5lZCBpbiBzeW5jIGJlZm9yZSB0aGUgY2FsbCB0byAkZGlnZXN0XG4gICAgICAgICRicm93c2VyLiQkY2hlY2tVcmxDaGFuZ2UoKTtcblxuICAgICAgICBpZiAodGhpcyA9PT0gJHJvb3RTY29wZSAmJiBhcHBseUFzeW5jSWQgIT09IG51bGwpIHtcbiAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSByb290IHNjb3BlLCBhbmQgJGFwcGx5QXN5bmMgaGFzIHNjaGVkdWxlZCBhIGRlZmVycmVkICRhcHBseSgpLCB0aGVuXG4gICAgICAgICAgLy8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgJGFwcGx5IGFuZCBmbHVzaCB0aGUgcXVldWUgb2YgZXhwcmVzc2lvbnMgdG8gYmUgZXZhbHVhdGVkLlxuICAgICAgICAgICRicm93c2VyLmRlZmVyLmNhbmNlbChhcHBseUFzeW5jSWQpO1xuICAgICAgICAgIGZsdXNoQXBwbHlBc3luYygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuXG4gICAgICAgIGRvIHsgLy8gXCJ3aGlsZSBkaXJ0eVwiIGxvb3BcbiAgICAgICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgIGN1cnJlbnQgPSB0YXJnZXQ7XG5cbiAgICAgICAgICAvLyBJdCdzIHNhZmUgZm9yIGFzeW5jUXVldWVQb3NpdGlvbiB0byBiZSBhIGxvY2FsIHZhcmlhYmxlIGhlcmUgYmVjYXVzZSB0aGlzIGxvb3AgY2FuJ3RcbiAgICAgICAgICAvLyBiZSByZWVudGVyZWQgcmVjdXJzaXZlbHkuIENhbGxpbmcgJGRpZ2VzdCBmcm9tIGEgZnVuY3Rpb24gcGFzc2VkIHRvICRldmFsQXN5bmMgd291bGRcbiAgICAgICAgICAvLyBsZWFkIHRvIGEgJyRkaWdlc3QgYWxyZWFkeSBpbiBwcm9ncmVzcycgZXJyb3IuXG4gICAgICAgICAgZm9yICh2YXIgYXN5bmNRdWV1ZVBvc2l0aW9uID0gMDsgYXN5bmNRdWV1ZVBvc2l0aW9uIDwgYXN5bmNRdWV1ZS5sZW5ndGg7IGFzeW5jUXVldWVQb3NpdGlvbisrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhc3luY1Rhc2sgPSBhc3luY1F1ZXVlW2FzeW5jUXVldWVQb3NpdGlvbl07XG4gICAgICAgICAgICAgIGZuID0gYXN5bmNUYXNrLmZuO1xuICAgICAgICAgICAgICBmbihhc3luY1Rhc2suc2NvcGUsIGFzeW5jVGFzay5sb2NhbHMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXN5bmNRdWV1ZS5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgdHJhdmVyc2VTY29wZXNMb29wOlxuICAgICAgICAgIGRvIHsgLy8gXCJ0cmF2ZXJzZSB0aGUgc2NvcGVzXCIgbG9vcFxuICAgICAgICAgICAgaWYgKCh3YXRjaGVycyA9IGN1cnJlbnQuJCR3YXRjaGVycykpIHtcbiAgICAgICAgICAgICAgLy8gcHJvY2VzcyBvdXIgd2F0Y2hlc1xuICAgICAgICAgICAgICB3YXRjaGVycy4kJGRpZ2VzdFdhdGNoSW5kZXggPSB3YXRjaGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgIHdoaWxlICh3YXRjaGVycy4kJGRpZ2VzdFdhdGNoSW5kZXgtLSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB3YXRjaCA9IHdhdGNoZXJzW3dhdGNoZXJzLiQkZGlnZXN0V2F0Y2hJbmRleF07XG4gICAgICAgICAgICAgICAgICAvLyBNb3N0IGNvbW1vbiB3YXRjaGVzIGFyZSBvbiBwcmltaXRpdmVzLCBpbiB3aGljaCBjYXNlIHdlIGNhbiBzaG9ydFxuICAgICAgICAgICAgICAgICAgLy8gY2lyY3VpdCBpdCB3aXRoID09PSBvcGVyYXRvciwgb25seSB3aGVuID09PSBmYWlscyBkbyB3ZSB1c2UgLmVxdWFsc1xuICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldCA9IHdhdGNoLmdldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSA9IGdldChjdXJyZW50KSkgIT09IChsYXN0ID0gd2F0Y2gubGFzdCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2guZXFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGVxdWFscyh2YWx1ZSwgbGFzdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChpc051bWJlck5hTih2YWx1ZSkgJiYgaXNOdW1iZXJOYU4obGFzdCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICBsYXN0RGlydHlXYXRjaCA9IHdhdGNoO1xuICAgICAgICAgICAgICAgICAgICAgIHdhdGNoLmxhc3QgPSB3YXRjaC5lcSA/IGNvcHkodmFsdWUsIG51bGwpIDogdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgZm4gPSB3YXRjaC5mbjtcbiAgICAgICAgICAgICAgICAgICAgICBmbih2YWx1ZSwgKChsYXN0ID09PSBpbml0V2F0Y2hWYWwpID8gdmFsdWUgOiBsYXN0KSwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR0bCA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0lkeCA9IDQgLSB0dGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdhdGNoTG9nW2xvZ0lkeF0pIHdhdGNoTG9nW2xvZ0lkeF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoTG9nW2xvZ0lkeF0ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogaXNGdW5jdGlvbih3YXRjaC5leHApID8gJ2ZuOiAnICsgKHdhdGNoLmV4cC5uYW1lIHx8IHdhdGNoLmV4cC50b1N0cmluZygpKSA6IHdhdGNoLmV4cCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsOiBsYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2F0Y2ggPT09IGxhc3REaXJ0eVdhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1vc3QgcmVjZW50bHkgZGlydHkgd2F0Y2hlciBpcyBub3cgY2xlYW4sIHNob3J0IGNpcmN1aXQgc2luY2UgdGhlIHJlbWFpbmluZyB3YXRjaGVyc1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgYWxyZWFkeSBiZWVuIHRlc3RlZC5cbiAgICAgICAgICAgICAgICAgICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHRyYXZlcnNlU2NvcGVzTG9vcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJbnNhbml0eSBXYXJuaW5nOiBzY29wZSBkZXB0aC1maXJzdCB0cmF2ZXJzYWxcbiAgICAgICAgICAgIC8vIHllcywgdGhpcyBjb2RlIGlzIGEgYml0IGNyYXp5LCBidXQgaXQgd29ya3MgYW5kIHdlIGhhdmUgdGVzdHMgdG8gcHJvdmUgaXQhXG4gICAgICAgICAgICAvLyB0aGlzIHBpZWNlIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgdHJhdmVyc2FsIGluICRicm9hZGNhc3RcbiAgICAgICAgICAgIGlmICghKG5leHQgPSAoKGN1cnJlbnQuJCR3YXRjaGVyc0NvdW50ICYmIGN1cnJlbnQuJCRjaGlsZEhlYWQpIHx8XG4gICAgICAgICAgICAgICAgKGN1cnJlbnQgIT09IHRhcmdldCAmJiBjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSkpIHtcbiAgICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IHRhcmdldCAmJiAhKG5leHQgPSBjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gd2hpbGUgKChjdXJyZW50ID0gbmV4dCkpO1xuXG4gICAgICAgICAgLy8gYGJyZWFrIHRyYXZlcnNlU2NvcGVzTG9vcDtgIHRha2VzIHVzIHRvIGhlcmVcblxuICAgICAgICAgIGlmICgoZGlydHkgfHwgYXN5bmNRdWV1ZS5sZW5ndGgpICYmICEodHRsLS0pKSB7XG4gICAgICAgICAgICBjbGVhclBoYXNlKCk7XG4gICAgICAgICAgICB0aHJvdyAkcm9vdFNjb3BlTWluRXJyKCdpbmZkaWcnLFxuICAgICAgICAgICAgICAgICd7MH0gJGRpZ2VzdCgpIGl0ZXJhdGlvbnMgcmVhY2hlZC4gQWJvcnRpbmchXFxuJyArXG4gICAgICAgICAgICAgICAgJ1dhdGNoZXJzIGZpcmVkIGluIHRoZSBsYXN0IDUgaXRlcmF0aW9uczogezF9JyxcbiAgICAgICAgICAgICAgICBUVEwsIHdhdGNoTG9nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSB3aGlsZSAoZGlydHkgfHwgYXN5bmNRdWV1ZS5sZW5ndGgpO1xuXG4gICAgICAgIGNsZWFyUGhhc2UoKTtcblxuICAgICAgICAvLyBwb3N0RGlnZXN0UXVldWVQb3NpdGlvbiBpc24ndCBsb2NhbCBoZXJlIGJlY2F1c2UgdGhpcyBsb29wIGNhbiBiZSByZWVudGVyZWQgcmVjdXJzaXZlbHkuXG4gICAgICAgIHdoaWxlIChwb3N0RGlnZXN0UXVldWVQb3NpdGlvbiA8IHBvc3REaWdlc3RRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcG9zdERpZ2VzdFF1ZXVlW3Bvc3REaWdlc3RRdWV1ZVBvc2l0aW9uKytdKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBvc3REaWdlc3RRdWV1ZS5sZW5ndGggPSBwb3N0RGlnZXN0UXVldWVQb3NpdGlvbiA9IDA7XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNoYW5nZXMgdG8gYnJvd3NlciB1cmwgdGhhdCBoYXBwZW5lZCBkdXJpbmcgdGhlICRkaWdlc3RcbiAgICAgICAgLy8gKGZvciB3aGljaCBubyBldmVudCBpcyBmaXJlZDsgZS5nLiB2aWEgYGhpc3RvcnkucHVzaFN0YXRlKClgKVxuICAgICAgICAkYnJvd3Nlci4kJGNoZWNrVXJsQ2hhbmdlKCk7XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGV2ZW50XG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRkZXN0cm95XG4gICAgICAgKiBAZXZlbnRUeXBlIGJyb2FkY2FzdCBvbiBzY29wZSBiZWluZyBkZXN0cm95ZWRcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEJyb2FkY2FzdGVkIHdoZW4gYSBzY29wZSBhbmQgaXRzIGNoaWxkcmVuIGFyZSBiZWluZyBkZXN0cm95ZWQuXG4gICAgICAgKlxuICAgICAgICogTm90ZSB0aGF0LCBpbiBBbmd1bGFySlMsIHRoZXJlIGlzIGFsc28gYSBgJGRlc3Ryb3lgIGpRdWVyeSBldmVudCwgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgICAqIGNsZWFuIHVwIERPTSBiaW5kaW5ncyBiZWZvcmUgYW4gZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3lcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IHNjb3BlIChhbmQgYWxsIG9mIGl0cyBjaGlsZHJlbikgZnJvbSB0aGUgcGFyZW50IHNjb3BlLiBSZW1vdmFsIGltcGxpZXNcbiAgICAgICAqIHRoYXQgY2FsbHMgdG8ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IHdpbGwgbm8gbG9uZ2VyXG4gICAgICAgKiBwcm9wYWdhdGUgdG8gdGhlIGN1cnJlbnQgc2NvcGUgYW5kIGl0cyBjaGlsZHJlbi4gUmVtb3ZhbCBhbHNvIGltcGxpZXMgdGhhdCB0aGUgY3VycmVudFxuICAgICAgICogc2NvcGUgaXMgZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgYCRkZXN0cm95KClgIGlzIHVzdWFsbHkgdXNlZCBieSBkaXJlY3RpdmVzIHN1Y2ggYXNcbiAgICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9IGZvciBtYW5hZ2luZyB0aGVcbiAgICAgICAqIHVucm9sbGluZyBvZiB0aGUgbG9vcC5cbiAgICAgICAqXG4gICAgICAgKiBKdXN0IGJlZm9yZSBhIHNjb3BlIGlzIGRlc3Ryb3llZCwgYSBgJGRlc3Ryb3lgIGV2ZW50IGlzIGJyb2FkY2FzdGVkIG9uIHRoaXMgc2NvcGUuXG4gICAgICAgKiBBcHBsaWNhdGlvbiBjb2RlIGNhbiByZWdpc3RlciBhIGAkZGVzdHJveWAgZXZlbnQgaGFuZGxlciB0aGF0IHdpbGwgZ2l2ZSBpdCBhIGNoYW5jZSB0b1xuICAgICAgICogcGVyZm9ybSBhbnkgbmVjZXNzYXJ5IGNsZWFudXAuXG4gICAgICAgKlxuICAgICAgICogTm90ZSB0aGF0LCBpbiBBbmd1bGFySlMsIHRoZXJlIGlzIGFsc28gYSBgJGRlc3Ryb3lgIGpRdWVyeSBldmVudCwgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgICAqIGNsZWFuIHVwIERPTSBiaW5kaW5ncyBiZWZvcmUgYW4gZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAgICAgICAqL1xuICAgICAgJGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBXZSBjYW4ndCBkZXN0cm95IGEgc2NvcGUgdGhhdCBoYXMgYmVlbiBhbHJlYWR5IGRlc3Ryb3llZC5cbiAgICAgICAgaWYgKHRoaXMuJCRkZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcblxuICAgICAgICB0aGlzLiRicm9hZGNhc3QoJyRkZXN0cm95Jyk7XG4gICAgICAgIHRoaXMuJCRkZXN0cm95ZWQgPSB0cnVlO1xuXG4gICAgICAgIGlmICh0aGlzID09PSAkcm9vdFNjb3BlKSB7XG4gICAgICAgICAgLy9SZW1vdmUgaGFuZGxlcnMgYXR0YWNoZWQgdG8gd2luZG93IHdoZW4gJHJvb3RTY29wZSBpcyByZW1vdmVkXG4gICAgICAgICAgJGJyb3dzZXIuJCRhcHBsaWNhdGlvbkRlc3Ryb3llZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5jcmVtZW50V2F0Y2hlcnNDb3VudCh0aGlzLCAtdGhpcy4kJHdhdGNoZXJzQ291bnQpO1xuICAgICAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gdGhpcy4kJGxpc3RlbmVyQ291bnQpIHtcbiAgICAgICAgICBkZWNyZW1lbnRMaXN0ZW5lckNvdW50KHRoaXMsIHRoaXMuJCRsaXN0ZW5lckNvdW50W2V2ZW50TmFtZV0sIGV2ZW50TmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXZlciBhbGwgdGhlIHJlZmVyZW5jZXMgdG8gcGFyZW50IHNjb3BlcyAoYWZ0ZXIgdGhpcyBjbGVhbnVwLCB0aGUgY3VycmVudCBzY29wZSBzaG91bGRcbiAgICAgICAgLy8gbm90IGJlIHJldGFpbmVkIGJ5IGFueSBvZiBvdXIgcmVmZXJlbmNlcyBhbmQgc2hvdWxkIGJlIGVsaWdpYmxlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24pXG4gICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50LiQkY2hpbGRIZWFkID09PSB0aGlzKSBwYXJlbnQuJCRjaGlsZEhlYWQgPSB0aGlzLiQkbmV4dFNpYmxpbmc7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50LiQkY2hpbGRUYWlsID09PSB0aGlzKSBwYXJlbnQuJCRjaGlsZFRhaWwgPSB0aGlzLiQkcHJldlNpYmxpbmc7XG4gICAgICAgIGlmICh0aGlzLiQkcHJldlNpYmxpbmcpIHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nID0gdGhpcy4kJG5leHRTaWJsaW5nO1xuICAgICAgICBpZiAodGhpcy4kJG5leHRTaWJsaW5nKSB0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZztcblxuICAgICAgICAvLyBEaXNhYmxlIGxpc3RlbmVycywgd2F0Y2hlcnMgYW5kIGFwcGx5L2RpZ2VzdCBtZXRob2RzXG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSB0aGlzLiRkaWdlc3QgPSB0aGlzLiRhcHBseSA9IHRoaXMuJGV2YWxBc3luYyA9IHRoaXMuJGFwcGx5QXN5bmMgPSBub29wO1xuICAgICAgICB0aGlzLiRvbiA9IHRoaXMuJHdhdGNoID0gdGhpcy4kd2F0Y2hHcm91cCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9vcDsgfTtcbiAgICAgICAgdGhpcy4kJGxpc3RlbmVycyA9IHt9O1xuXG4gICAgICAgIC8vIERpc2Nvbm5lY3QgdGhlIG5leHQgc2libGluZyB0byBwcmV2ZW50IGBjbGVhblVwU2NvcGVgIGRlc3Ryb3lpbmcgdGhvc2UgdG9vXG4gICAgICAgIHRoaXMuJCRuZXh0U2libGluZyA9IG51bGw7XG4gICAgICAgIGNsZWFuVXBTY29wZSh0aGlzKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZXZhbFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEV4ZWN1dGVzIHRoZSBgZXhwcmVzc2lvbmAgb24gdGhlIGN1cnJlbnQgc2NvcGUgYW5kIHJldHVybnMgdGhlIHJlc3VsdC4gQW55IGV4Y2VwdGlvbnMgaW5cbiAgICAgICAqIHRoZSBleHByZXNzaW9uIGFyZSBwcm9wYWdhdGVkICh1bmNhdWdodCkuIFRoaXMgaXMgdXNlZnVsIHdoZW4gZXZhbHVhdGluZyBBbmd1bGFySlNcbiAgICAgICAqIGV4cHJlc3Npb25zLlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICB2YXIgc2NvcGUgPSBuZy4kcm9vdFNjb3BlLlNjb3BlKCk7XG4gICAgICAgICAgIHNjb3BlLmEgPSAxO1xuICAgICAgICAgICBzY29wZS5iID0gMjtcblxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuJGV2YWwoJ2ErYicpKS50b0VxdWFsKDMpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuJGV2YWwoZnVuY3Rpb24oc2NvcGUpeyByZXR1cm4gc2NvcGUuYSArIHNjb3BlLmI7IH0pKS50b0VxdWFsKDMpO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwcmVzc2lvbiBBbiBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluICB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGN1cnJlbnQgYHNjb3BlYCBwYXJhbWV0ZXIuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsob2JqZWN0KT19IGxvY2FscyBMb2NhbCB2YXJpYWJsZXMgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluIHNjb3BlLlxuICAgICAgICogQHJldHVybnMgeyp9IFRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyB0aGUgZXhwcmVzc2lvbi5cbiAgICAgICAqL1xuICAgICAgJGV2YWw6IGZ1bmN0aW9uKGV4cHIsIGxvY2Fscykge1xuICAgICAgICByZXR1cm4gJHBhcnNlKGV4cHIpKHRoaXMsIGxvY2Fscyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luY1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIG9uIHRoZSBjdXJyZW50IHNjb3BlIGF0IGEgbGF0ZXIgcG9pbnQgaW4gdGltZS5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgYCRldmFsQXN5bmNgIG1ha2VzIG5vIGd1YXJhbnRlZXMgYXMgdG8gd2hlbiB0aGUgYGV4cHJlc3Npb25gIHdpbGwgYmUgZXhlY3V0ZWQsIG9ubHlcbiAgICAgICAqIHRoYXQ6XG4gICAgICAgKlxuICAgICAgICogICAtIGl0IHdpbGwgZXhlY3V0ZSBhZnRlciB0aGUgZnVuY3Rpb24gdGhhdCBzY2hlZHVsZWQgdGhlIGV2YWx1YXRpb24gKHByZWZlcmFibHkgYmVmb3JlIERPTVxuICAgICAgICogICAgIHJlbmRlcmluZykuXG4gICAgICAgKiAgIC0gYXQgbGVhc3Qgb25lIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCBjeWNsZX0gd2lsbCBiZSBwZXJmb3JtZWQgYWZ0ZXJcbiAgICAgICAqICAgICBgZXhwcmVzc2lvbmAgZXhlY3V0aW9uLlxuICAgICAgICpcbiAgICAgICAqIEFueSBleGNlcHRpb25zIGZyb20gdGhlIGV4ZWN1dGlvbiBvZiB0aGUgZXhwcmVzc2lvbiBhcmUgZm9yd2FyZGVkIHRvIHRoZVxuICAgICAgICoge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxuICAgICAgICpcbiAgICAgICAqIF9fTm90ZTpfXyBpZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvdXRzaWRlIG9mIGEgYCRkaWdlc3RgIGN5Y2xlLCBhIG5ldyBgJGRpZ2VzdGAgY3ljbGVcbiAgICAgICAqIHdpbGwgYmUgc2NoZWR1bGVkLiBIb3dldmVyLCBpdCBpcyBlbmNvdXJhZ2VkIHRvIGFsd2F5cyBjYWxsIGNvZGUgdGhhdCBjaGFuZ2VzIHRoZSBtb2RlbFxuICAgICAgICogZnJvbSB3aXRoaW4gYW4gYCRhcHBseWAgY2FsbC4gVGhhdCBpbmNsdWRlcyBjb2RlIGV2YWx1YXRlZCB2aWEgYCRldmFsQXN5bmNgLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cHJlc3Npb24gQW4gQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICAgKlxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGN1cnJlbnQgYHNjb3BlYCBwYXJhbWV0ZXIuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsob2JqZWN0KT19IGxvY2FscyBMb2NhbCB2YXJpYWJsZXMgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluIHNjb3BlLlxuICAgICAgICovXG4gICAgICAkZXZhbEFzeW5jOiBmdW5jdGlvbihleHByLCBsb2NhbHMpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlIG91dHNpZGUgb2YgYW4gJGRpZ2VzdCBsb29wIGFuZCB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHdlIGFyZSBzY2hlZHVsaW5nIGFzeW5jXG4gICAgICAgIC8vIHRhc2sgYWxzbyBzY2hlZHVsZSBhc3luYyBhdXRvLWZsdXNoXG4gICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlICYmICFhc3luY1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGFzeW5jUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmNRdWV1ZS5wdXNoKHtzY29wZTogdGhpcywgZm46ICRwYXJzZShleHByKSwgbG9jYWxzOiBsb2NhbHN9KTtcbiAgICAgIH0sXG5cbiAgICAgICQkcG9zdERpZ2VzdDogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgcG9zdERpZ2VzdFF1ZXVlLnB1c2goZm4pO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRhcHBseVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIGAkYXBwbHkoKWAgaXMgdXNlZCB0byBleGVjdXRlIGFuIGV4cHJlc3Npb24gaW4gQW5ndWxhckpTIGZyb20gb3V0c2lkZSBvZiB0aGUgQW5ndWxhckpTXG4gICAgICAgKiBmcmFtZXdvcmsuIChGb3IgZXhhbXBsZSBmcm9tIGJyb3dzZXIgRE9NIGV2ZW50cywgc2V0VGltZW91dCwgWEhSIG9yIHRoaXJkIHBhcnR5IGxpYnJhcmllcykuXG4gICAgICAgKiBCZWNhdXNlIHdlIGFyZSBjYWxsaW5nIGludG8gdGhlIEFuZ3VsYXJKUyBmcmFtZXdvcmsgd2UgbmVlZCB0byBwZXJmb3JtIHByb3BlciBzY29wZSBsaWZlXG4gICAgICAgKiBjeWNsZSBvZiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgZXhjZXB0aW9uIGhhbmRsaW5nfSxcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgZXhlY3V0aW5nIHdhdGNoZXN9LlxuICAgICAgICpcbiAgICAgICAqICoqTGlmZSBjeWNsZTogUHNldWRvLUNvZGUgb2YgYCRhcHBseSgpYCoqXG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAgICAgZnVuY3Rpb24gJGFwcGx5KGV4cHIpIHtcbiAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgcmV0dXJuICRldmFsKGV4cHIpO1xuICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAkcm9vdC4kZGlnZXN0KCk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICB9XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogU2NvcGUncyBgJGFwcGx5KClgIG1ldGhvZCB0cmFuc2l0aW9ucyB0aHJvdWdoIHRoZSBmb2xsb3dpbmcgc3RhZ2VzOlxuICAgICAgICpcbiAgICAgICAqIDEuIFRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyBleGVjdXRlZCB1c2luZyB0aGVcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRldmFsICRldmFsKCl9IG1ldGhvZC5cbiAgICAgICAqIDIuIEFueSBleGNlcHRpb25zIGZyb20gdGhlIGV4ZWN1dGlvbiBvZiB0aGUgZXhwcmVzc2lvbiBhcmUgZm9yd2FyZGVkIHRvIHRoZVxuICAgICAgICogICAge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxuICAgICAgICogMy4gVGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaH0gbGlzdGVuZXJzIGFyZSBmaXJlZCBpbW1lZGlhdGVseSBhZnRlciB0aGVcbiAgICAgICAqICAgIGV4cHJlc3Npb24gd2FzIGV4ZWN1dGVkIHVzaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gbWV0aG9kLlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHAgQW4gQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICAgKlxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uLlxuICAgICAgICovXG4gICAgICAkYXBwbHk6IGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBiZWdpblBoYXNlKCckYXBwbHknKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGV2YWwoZXhwcik7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNsZWFyUGhhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5zYWZlLWZpbmFsbHlcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGFwcGx5QXN5bmNcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBTY2hlZHVsZSB0aGUgaW52b2NhdGlvbiBvZiAkYXBwbHkgdG8gb2NjdXIgYXQgYSBsYXRlciB0aW1lLiBUaGUgYWN0dWFsIHRpbWUgZGlmZmVyZW5jZVxuICAgICAgICogdmFyaWVzIGFjcm9zcyBicm93c2VycywgYnV0IGlzIHR5cGljYWxseSBhcm91bmQgfjEwIG1pbGxpc2Vjb25kcy5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHVwIG11bHRpcGxlIGV4cHJlc3Npb25zIHdoaWNoIG5lZWQgdG8gYmUgZXZhbHVhdGVkIGluIHRoZSBzYW1lXG4gICAgICAgKiBkaWdlc3QuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwIEFuIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAgICpcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IGV4ZWN1dGUgdXNpbmcgdGhlIHJ1bGVzIGFzIGRlZmluZWQgaW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0uXG4gICAgICAgKiAgICAtIGBmdW5jdGlvbihzY29wZSlgOiBleGVjdXRlIHRoZSBmdW5jdGlvbiB3aXRoIGN1cnJlbnQgYHNjb3BlYCBwYXJhbWV0ZXIuXG4gICAgICAgKi9cbiAgICAgICRhcHBseUFzeW5jOiBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgICAgIGlmIChleHByKSB7XG4gICAgICAgICAgYXBwbHlBc3luY1F1ZXVlLnB1c2goJGFwcGx5QXN5bmNFeHByZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBleHByID0gJHBhcnNlKGV4cHIpO1xuICAgICAgICBzY2hlZHVsZUFwcGx5QXN5bmMoKTtcblxuICAgICAgICBmdW5jdGlvbiAkYXBwbHlBc3luY0V4cHJlc3Npb24oKSB7XG4gICAgICAgICAgc2NvcGUuJGV2YWwoZXhwcik7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkb25cbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBMaXN0ZW5zIG9uIGV2ZW50cyBvZiBhIGdpdmVuIHR5cGUuIFNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZW1pdCAkZW1pdH0gZm9yXG4gICAgICAgKiBkaXNjdXNzaW9uIG9mIGV2ZW50IGxpZmUgY3ljbGUuXG4gICAgICAgKlxuICAgICAgICogVGhlIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIGZvcm1hdCBpczogYGZ1bmN0aW9uKGV2ZW50LCBhcmdzLi4uKWAuIFRoZSBgZXZlbnRgIG9iamVjdFxuICAgICAgICogcGFzc2VkIGludG8gdGhlIGxpc3RlbmVyIGhhcyB0aGUgZm9sbG93aW5nIGF0dHJpYnV0ZXM6XG4gICAgICAgKlxuICAgICAgICogICAtIGB0YXJnZXRTY29wZWAgLSBge1Njb3BlfWA6IHRoZSBzY29wZSBvbiB3aGljaCB0aGUgZXZlbnQgd2FzIGAkZW1pdGAtZWQgb3JcbiAgICAgICAqICAgICBgJGJyb2FkY2FzdGAtZWQuXG4gICAgICAgKiAgIC0gYGN1cnJlbnRTY29wZWAgLSBge1Njb3BlfWA6IHRoZSBzY29wZSB0aGF0IGlzIGN1cnJlbnRseSBoYW5kbGluZyB0aGUgZXZlbnQuIE9uY2UgdGhlXG4gICAgICAgKiAgICAgZXZlbnQgcHJvcGFnYXRlcyB0aHJvdWdoIHRoZSBzY29wZSBoaWVyYXJjaHksIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIG51bGwuXG4gICAgICAgKiAgIC0gYG5hbWVgIC0gYHtzdHJpbmd9YDogbmFtZSBvZiB0aGUgZXZlbnQuXG4gICAgICAgKiAgIC0gYHN0b3BQcm9wYWdhdGlvbmAgLSBge2Z1bmN0aW9uPX1gOiBjYWxsaW5nIGBzdG9wUHJvcGFnYXRpb25gIGZ1bmN0aW9uIHdpbGwgY2FuY2VsXG4gICAgICAgKiAgICAgZnVydGhlciBldmVudCBwcm9wYWdhdGlvbiAoYXZhaWxhYmxlIG9ubHkgZm9yIGV2ZW50cyB0aGF0IHdlcmUgYCRlbWl0YC1lZCkuXG4gICAgICAgKiAgIC0gYHByZXZlbnREZWZhdWx0YCAtIGB7ZnVuY3Rpb259YDogY2FsbGluZyBgcHJldmVudERlZmF1bHRgIHNldHMgYGRlZmF1bHRQcmV2ZW50ZWRgIGZsYWdcbiAgICAgICAqICAgICB0byB0cnVlLlxuICAgICAgICogICAtIGBkZWZhdWx0UHJldmVudGVkYCAtIGB7Ym9vbGVhbn1gOiB0cnVlIGlmIGBwcmV2ZW50RGVmYXVsdGAgd2FzIGNhbGxlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFdmVudCBuYW1lIHRvIGxpc3RlbiBvbi5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQsIC4uLmFyZ3MpfSBsaXN0ZW5lciBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGlzIGVtaXR0ZWQuXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICovXG4gICAgICAkb246IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBuYW1lZExpc3RlbmVycyA9IHRoaXMuJCRsaXN0ZW5lcnNbbmFtZV07XG4gICAgICAgIGlmICghbmFtZWRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICB0aGlzLiQkbGlzdGVuZXJzW25hbWVdID0gbmFtZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBuYW1lZExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblxuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXM7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpZiAoIWN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdKSB7XG4gICAgICAgICAgICBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdKys7XG4gICAgICAgIH0gd2hpbGUgKChjdXJyZW50ID0gY3VycmVudC4kcGFyZW50KSk7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGluZGV4T2ZMaXN0ZW5lciA9IG5hbWVkTGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICAgIGlmIChpbmRleE9mTGlzdGVuZXIgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBVc2UgZGVsZXRlIGluIHRoZSBob3BlIG9mIHRoZSBicm93c2VyIGRlYWxsb2NhdGluZyB0aGUgbWVtb3J5IGZvciB0aGUgYXJyYXkgZW50cnksXG4gICAgICAgICAgICAvLyB3aGlsZSBub3Qgc2hpZnRpbmcgdGhlIGFycmF5IGluZGV4ZXMgb2Ygb3RoZXIgbGlzdGVuZXJzLlxuICAgICAgICAgICAgLy8gU2VlIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzE2MTM1XG4gICAgICAgICAgICBkZWxldGUgbmFtZWRMaXN0ZW5lcnNbaW5kZXhPZkxpc3RlbmVyXTtcbiAgICAgICAgICAgIGRlY3JlbWVudExpc3RlbmVyQ291bnQoc2VsZiwgMSwgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSxcblxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGVtaXRcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGBuYW1lYCB1cHdhcmRzIHRocm91Z2ggdGhlIHNjb3BlIGhpZXJhcmNoeSBub3RpZnlpbmcgdGhlXG4gICAgICAgKiByZWdpc3RlcmVkIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0gbGlzdGVuZXJzLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBldmVudCBsaWZlIGN5Y2xlIHN0YXJ0cyBhdCB0aGUgc2NvcGUgb24gd2hpY2ggYCRlbWl0YCB3YXMgY2FsbGVkLiBBbGxcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IGxpc3RlbmluZyBmb3IgYG5hbWVgIGV2ZW50IG9uIHRoaXMgc2NvcGUgZ2V0XG4gICAgICAgKiBub3RpZmllZC4gQWZ0ZXJ3YXJkcywgdGhlIGV2ZW50IHRyYXZlcnNlcyB1cHdhcmRzIHRvd2FyZCB0aGUgcm9vdCBzY29wZSBhbmQgY2FsbHMgYWxsXG4gICAgICAgKiByZWdpc3RlcmVkIGxpc3RlbmVycyBhbG9uZyB0aGUgd2F5LiBUaGUgZXZlbnQgd2lsbCBzdG9wIHByb3BhZ2F0aW5nIGlmIG9uZSBvZiB0aGUgbGlzdGVuZXJzXG4gICAgICAgKiBjYW5jZWxzIGl0LlxuICAgICAgICpcbiAgICAgICAqIEFueSBleGNlcHRpb24gZW1pdHRlZCBmcm9tIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb24gbGlzdGVuZXJzfSB3aWxsIGJlIHBhc3NlZFxuICAgICAgICogb250byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEV2ZW50IG5hbWUgdG8gZW1pdC5cbiAgICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyBPcHRpb25hbCBvbmUgb3IgbW9yZSBhcmd1bWVudHMgd2hpY2ggd2lsbCBiZSBwYXNzZWQgb250byB0aGUgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgICogQHJldHVybiB7T2JqZWN0fSBFdmVudCBvYmplY3QgKHNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259KS5cbiAgICAgICAqL1xuICAgICAgJGVtaXQ6IGZ1bmN0aW9uKG5hbWUsIGFyZ3MpIHtcbiAgICAgICAgdmFyIGVtcHR5ID0gW10sXG4gICAgICAgICAgICBuYW1lZExpc3RlbmVycyxcbiAgICAgICAgICAgIHNjb3BlID0gdGhpcyxcbiAgICAgICAgICAgIHN0b3BQcm9wYWdhdGlvbiA9IGZhbHNlLFxuICAgICAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIHRhcmdldFNjb3BlOiBzY29wZSxcbiAgICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtzdG9wUHJvcGFnYXRpb24gPSB0cnVlO30sXG4gICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBldmVudC5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGVmYXVsdFByZXZlbnRlZDogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaXN0ZW5lckFyZ3MgPSBjb25jYXQoW2V2ZW50XSwgYXJndW1lbnRzLCAxKSxcbiAgICAgICAgICAgIGksIGxlbmd0aDtcblxuICAgICAgICBkbyB7XG4gICAgICAgICAgbmFtZWRMaXN0ZW5lcnMgPSBzY29wZS4kJGxpc3RlbmVyc1tuYW1lXSB8fCBlbXB0eTtcbiAgICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBzY29wZTtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBuYW1lZExpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAvLyBpZiBsaXN0ZW5lcnMgd2VyZSBkZXJlZ2lzdGVyZWQsIGRlZnJhZ21lbnQgdGhlIGFycmF5XG4gICAgICAgICAgICBpZiAoIW5hbWVkTGlzdGVuZXJzW2ldKSB7XG4gICAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvL2FsbG93IGFsbCBsaXN0ZW5lcnMgYXR0YWNoZWQgdG8gdGhlIGN1cnJlbnQgc2NvcGUgdG8gcnVuXG4gICAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzW2ldLmFwcGx5KG51bGwsIGxpc3RlbmVyQXJncyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvL2lmIGFueSBsaXN0ZW5lciBvbiB0aGUgY3VycmVudCBzY29wZSBzdG9wcyBwcm9wYWdhdGlvbiwgcHJldmVudCBidWJibGluZ1xuICAgICAgICAgIGlmIChzdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvL3RyYXZlcnNlIHVwd2FyZHNcbiAgICAgICAgICBzY29wZSA9IHNjb3BlLiRwYXJlbnQ7XG4gICAgICAgIH0gd2hpbGUgKHNjb3BlKTtcblxuICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBudWxsO1xuXG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICAgIH0sXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRicm9hZGNhc3RcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGBuYW1lYCBkb3dud2FyZHMgdG8gYWxsIGNoaWxkIHNjb3BlcyAoYW5kIHRoZWlyIGNoaWxkcmVuKSBub3RpZnlpbmcgdGhlXG4gICAgICAgKiByZWdpc3RlcmVkIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0gbGlzdGVuZXJzLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBldmVudCBsaWZlIGN5Y2xlIHN0YXJ0cyBhdCB0aGUgc2NvcGUgb24gd2hpY2ggYCRicm9hZGNhc3RgIHdhcyBjYWxsZWQuIEFsbFxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gbGlzdGVuaW5nIGZvciBgbmFtZWAgZXZlbnQgb24gdGhpcyBzY29wZSBnZXRcbiAgICAgICAqIG5vdGlmaWVkLiBBZnRlcndhcmRzLCB0aGUgZXZlbnQgcHJvcGFnYXRlcyB0byBhbGwgZGlyZWN0IGFuZCBpbmRpcmVjdCBzY29wZXMgb2YgdGhlIGN1cnJlbnRcbiAgICAgICAqIHNjb3BlIGFuZCBjYWxscyBhbGwgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMgYWxvbmcgdGhlIHdheS4gVGhlIGV2ZW50IGNhbm5vdCBiZSBjYW5jZWxlZC5cbiAgICAgICAqXG4gICAgICAgKiBBbnkgZXhjZXB0aW9uIGVtaXR0ZWQgZnJvbSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gd2lsbCBiZSBwYXNzZWRcbiAgICAgICAqIG9udG8gdGhlIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciAkZXhjZXB0aW9uSGFuZGxlcn0gc2VydmljZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFdmVudCBuYW1lIHRvIGJyb2FkY2FzdC5cbiAgICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyBPcHRpb25hbCBvbmUgb3IgbW9yZSBhcmd1bWVudHMgd2hpY2ggd2lsbCBiZSBwYXNzZWQgb250byB0aGUgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgICogQHJldHVybiB7T2JqZWN0fSBFdmVudCBvYmplY3QsIHNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259XG4gICAgICAgKi9cbiAgICAgICRicm9hZGNhc3Q6IGZ1bmN0aW9uKG5hbWUsIGFyZ3MpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMsXG4gICAgICAgICAgICBjdXJyZW50ID0gdGFyZ2V0LFxuICAgICAgICAgICAgbmV4dCA9IHRhcmdldCxcbiAgICAgICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICB0YXJnZXRTY29wZTogdGFyZ2V0LFxuICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQ6IGZhbHNlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGlmICghdGFyZ2V0LiQkbGlzdGVuZXJDb3VudFtuYW1lXSkgcmV0dXJuIGV2ZW50O1xuXG4gICAgICAgIHZhciBsaXN0ZW5lckFyZ3MgPSBjb25jYXQoW2V2ZW50XSwgYXJndW1lbnRzLCAxKSxcbiAgICAgICAgICAgIGxpc3RlbmVycywgaSwgbGVuZ3RoO1xuXG4gICAgICAgIC8vZG93biB3aGlsZSB5b3UgY2FuLCB0aGVuIHVwIGFuZCBuZXh0IHNpYmxpbmcgb3IgdXAgYW5kIG5leHQgc2libGluZyB1bnRpbCBiYWNrIGF0IHJvb3RcbiAgICAgICAgd2hpbGUgKChjdXJyZW50ID0gbmV4dCkpIHtcbiAgICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBjdXJyZW50O1xuICAgICAgICAgIGxpc3RlbmVycyA9IGN1cnJlbnQuJCRsaXN0ZW5lcnNbbmFtZV0gfHwgW107XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBpZiBsaXN0ZW5lcnMgd2VyZSBkZXJlZ2lzdGVyZWQsIGRlZnJhZ21lbnQgdGhlIGFycmF5XG4gICAgICAgICAgICBpZiAoIWxpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgIGxlbmd0aC0tO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KG51bGwsIGxpc3RlbmVyQXJncyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEluc2FuaXR5IFdhcm5pbmc6IHNjb3BlIGRlcHRoLWZpcnN0IHRyYXZlcnNhbFxuICAgICAgICAgIC8vIHllcywgdGhpcyBjb2RlIGlzIGEgYml0IGNyYXp5LCBidXQgaXQgd29ya3MgYW5kIHdlIGhhdmUgdGVzdHMgdG8gcHJvdmUgaXQhXG4gICAgICAgICAgLy8gdGhpcyBwaWVjZSBzaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIHRyYXZlcnNhbCBpbiAkZGlnZXN0XG4gICAgICAgICAgLy8gKHRob3VnaCBpdCBkaWZmZXJzIGR1ZSB0byBoYXZpbmcgdGhlIGV4dHJhIGNoZWNrIGZvciAkJGxpc3RlbmVyQ291bnQpXG4gICAgICAgICAgaWYgKCEobmV4dCA9ICgoY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gJiYgY3VycmVudC4kJGNoaWxkSGVhZCkgfHxcbiAgICAgICAgICAgICAgKGN1cnJlbnQgIT09IHRhcmdldCAmJiBjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSkpIHtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgIShuZXh0ID0gY3VycmVudC4kJG5leHRTaWJsaW5nKSkge1xuICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC4kcGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IG51bGw7XG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyICRyb290U2NvcGUgPSBuZXcgU2NvcGUoKTtcblxuICAgIC8vVGhlIGludGVybmFsIHF1ZXVlcy4gRXhwb3NlIHRoZW0gb24gdGhlICRyb290U2NvcGUgZm9yIGRlYnVnZ2luZy90ZXN0aW5nIHB1cnBvc2VzLlxuICAgIHZhciBhc3luY1F1ZXVlID0gJHJvb3RTY29wZS4kJGFzeW5jUXVldWUgPSBbXTtcbiAgICB2YXIgcG9zdERpZ2VzdFF1ZXVlID0gJHJvb3RTY29wZS4kJHBvc3REaWdlc3RRdWV1ZSA9IFtdO1xuICAgIHZhciBhcHBseUFzeW5jUXVldWUgPSAkcm9vdFNjb3BlLiQkYXBwbHlBc3luY1F1ZXVlID0gW107XG5cbiAgICB2YXIgcG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24gPSAwO1xuXG4gICAgcmV0dXJuICRyb290U2NvcGU7XG5cblxuICAgIGZ1bmN0aW9uIGJlZ2luUGhhc2UocGhhc2UpIHtcbiAgICAgIGlmICgkcm9vdFNjb3BlLiQkcGhhc2UpIHtcbiAgICAgICAgdGhyb3cgJHJvb3RTY29wZU1pbkVycignaW5wcm9nJywgJ3swfSBhbHJlYWR5IGluIHByb2dyZXNzJywgJHJvb3RTY29wZS4kJHBoYXNlKTtcbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kJHBoYXNlID0gcGhhc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJQaGFzZSgpIHtcbiAgICAgICRyb290U2NvcGUuJCRwaGFzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5jcmVtZW50V2F0Y2hlcnNDb3VudChjdXJyZW50LCBjb3VudCkge1xuICAgICAgZG8ge1xuICAgICAgICBjdXJyZW50LiQkd2F0Y2hlcnNDb3VudCArPSBjb3VudDtcbiAgICAgIH0gd2hpbGUgKChjdXJyZW50ID0gY3VycmVudC4kcGFyZW50KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVjcmVtZW50TGlzdGVuZXJDb3VudChjdXJyZW50LCBjb3VudCwgbmFtZSkge1xuICAgICAgZG8ge1xuICAgICAgICBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSAtPSBjb3VudDtcblxuICAgICAgICBpZiAoY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gPT09IDApIHtcbiAgICAgICAgICBkZWxldGUgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKChjdXJyZW50ID0gY3VycmVudC4kcGFyZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZnVuY3Rpb24gdXNlZCBhcyBhbiBpbml0aWFsIHZhbHVlIGZvciB3YXRjaGVycy5cbiAgICAgKiBiZWNhdXNlIGl0J3MgdW5pcXVlIHdlIGNhbiBlYXNpbHkgdGVsbCBpdCBhcGFydCBmcm9tIG90aGVyIHZhbHVlc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRXYXRjaFZhbCgpIHt9XG5cbiAgICBmdW5jdGlvbiBmbHVzaEFwcGx5QXN5bmMoKSB7XG4gICAgICB3aGlsZSAoYXBwbHlBc3luY1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGFwcGx5QXN5bmNRdWV1ZS5zaGlmdCgpKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXBwbHlBc3luY0lkID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUFwcGx5QXN5bmMoKSB7XG4gICAgICBpZiAoYXBwbHlBc3luY0lkID09PSBudWxsKSB7XG4gICAgICAgIGFwcGx5QXN5bmNJZCA9ICRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZsdXNoQXBwbHlBc3luYyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRyb290RWxlbWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIHJvb3QgZWxlbWVudCBvZiBBbmd1bGFySlMgYXBwbGljYXRpb24uIFRoaXMgaXMgZWl0aGVyIHRoZSBlbGVtZW50IHdoZXJlIHtAbGlua1xuICogbmcuZGlyZWN0aXZlOm5nQXBwIG5nQXBwfSB3YXMgZGVjbGFyZWQgb3IgdGhlIGVsZW1lbnQgcGFzc2VkIGludG9cbiAqIHtAbGluayBhbmd1bGFyLmJvb3RzdHJhcH0uIFRoZSBlbGVtZW50IHJlcHJlc2VudHMgdGhlIHJvb3QgZWxlbWVudCBvZiBhcHBsaWNhdGlvbi4gSXQgaXMgYWxzbyB0aGVcbiAqIGxvY2F0aW9uIHdoZXJlIHRoZSBhcHBsaWNhdGlvbidzIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9IHNlcnZpY2UgZ2V0c1xuICogcHVibGlzaGVkLCBhbmQgY2FuIGJlIHJldHJpZXZlZCB1c2luZyBgJHJvb3RFbGVtZW50LmluamVjdG9yKClgLlxuICovXG5cblxuLy8gdGhlIGltcGxlbWVudGF0aW9uIGlzIGluIGFuZ3VsYXIuYm9vdHN0cmFwXG5cbi8qKlxuICogQHRoaXNcbiAqIEBkZXNjcmlwdGlvblxuICogUHJpdmF0ZSBzZXJ2aWNlIHRvIHNhbml0aXplIHVyaXMgZm9yIGxpbmtzIGFuZCBpbWFnZXMuIFVzZWQgYnkgJGNvbXBpbGUgYW5kICRzYW5pdGl6ZS5cbiAqL1xuZnVuY3Rpb24gJCRTYW5pdGl6ZVVyaVByb3ZpZGVyKCkge1xuICB2YXIgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSAvXlxccyooaHR0cHM/fHM/ZnRwfG1haWx0b3x0ZWx8ZmlsZSk6LyxcbiAgICBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSAvXlxccyooKGh0dHBzP3xmdHB8ZmlsZXxibG9iKTp8ZGF0YTppbWFnZVxcLykvO1xuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIGZvciB3aGl0ZWxpc3Rpbmcgb2Ygc2FmZVxuICAgKiB1cmxzIGR1cmluZyBhW2hyZWZdIHNhbml0aXphdGlvbi5cbiAgICpcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cbiAgICpcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBhW2hyZWZdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0YFxuICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIElmIGEgbWF0Y2ggaXMgZm91bmQsIHRoZSBvcmlnaW5hbCB1cmwgaXMgd3JpdHRlbiBpbnRvIHRoZSBkb20uIE90aGVyd2lzZSxcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxuICAgKi9cbiAgdGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xuICAgICAgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSByZWdleHA7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0O1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXG4gICAqIHVybHMgZHVyaW5nIGltZ1tzcmNdIHNhbml0aXphdGlvbi5cbiAgICpcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cbiAgICpcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBpbWdbc3JjXSB2aWEgZGF0YS1iaW5kaW5nIGlzIGZpcnN0IG5vcm1hbGl6ZWQgYW5kIHR1cm5lZCBpbnRvXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xuICAgICAgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gcmVnZXhwO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHNhbml0aXplVXJpKHVyaSwgaXNJbWFnZSkge1xuICAgICAgdmFyIHJlZ2V4ID0gaXNJbWFnZSA/IGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA6IGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0O1xuICAgICAgdmFyIG5vcm1hbGl6ZWRWYWw7XG4gICAgICBub3JtYWxpemVkVmFsID0gdXJsUmVzb2x2ZSh1cmkgJiYgdXJpLnRyaW0oKSkuaHJlZjtcbiAgICAgIGlmIChub3JtYWxpemVkVmFsICE9PSAnJyAmJiAhbm9ybWFsaXplZFZhbC5tYXRjaChyZWdleCkpIHtcbiAgICAgICAgcmV0dXJuICd1bnNhZmU6JyArIG5vcm1hbGl6ZWRWYWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJpO1xuICAgIH07XG4gIH07XG59XG5cbi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICpcbiAqICAgICBBbnkgY29tbWl0cyB0byB0aGlzIGZpbGUgc2hvdWxkIGJlIHJldmlld2VkIHdpdGggc2VjdXJpdHkgaW4gbWluZC4gICpcbiAqICAgQ2hhbmdlcyB0byB0aGlzIGZpbGUgY2FuIHBvdGVudGlhbGx5IGNyZWF0ZSBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMuICpcbiAqICAgICAgICAgIEFuIGFwcHJvdmFsIGZyb20gMiBDb3JlIG1lbWJlcnMgd2l0aCBoaXN0b3J5IG9mIG1vZGlmeWluZyAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgZmlsZSBpcyByZXF1aXJlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICBEb2VzIHRoZSBjaGFuZ2Ugc29tZWhvdyBhbGxvdyBmb3IgYXJiaXRyYXJ5IGphdmFzY3JpcHQgdG8gYmUgZXhlY3V0ZWQ/ICpcbiAqICAgIE9yIGFsbG93cyBmb3Igc29tZW9uZSB0byBjaGFuZ2UgdGhlIHByb3RvdHlwZSBvZiBidWlsdC1pbiBvYmplY3RzPyAgICpcbiAqICAgICBPciBnaXZlcyB1bmRlc2lyZWQgYWNjZXNzIHRvIHZhcmlhYmxlcyBsaWtlcyBkb2N1bWVudCBvciB3aW5kb3c/ICAgICpcbiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovXG5cbi8qIGV4cG9ydGVkICRTY2VQcm92aWRlciwgJFNjZURlbGVnYXRlUHJvdmlkZXIgKi9cblxudmFyICRzY2VNaW5FcnIgPSBtaW5FcnIoJyRzY2UnKTtcblxudmFyIFNDRV9DT05URVhUUyA9IHtcbiAgLy8gSFRNTCBpcyB1c2VkIHdoZW4gdGhlcmUncyBIVE1MIHJlbmRlcmVkIChlLmcuIG5nLWJpbmQtaHRtbCwgaWZyYW1lIHNyY2RvYyBiaW5kaW5nKS5cbiAgSFRNTDogJ2h0bWwnLFxuXG4gIC8vIFN0eWxlIHN0YXRlbWVudHMgb3Igc3R5bGVzaGVldHMuIEN1cnJlbnRseSB1bnVzZWQgaW4gQW5ndWxhckpTLlxuICBDU1M6ICdjc3MnLFxuXG4gIC8vIEFuIFVSTCB1c2VkIGluIGEgY29udGV4dCB3aGVyZSBpdCBkb2VzIG5vdCByZWZlciB0byBhIHJlc291cmNlIHRoYXQgbG9hZHMgY29kZS4gQ3VycmVudGx5XG4gIC8vIHVudXNlZCBpbiBBbmd1bGFySlMuXG4gIFVSTDogJ3VybCcsXG5cbiAgLy8gUkVTT1VSQ0VfVVJMIGlzIGEgc3VidHlwZSBvZiBVUkwgdXNlZCB3aGVyZSB0aGUgcmVmZXJyZWQtdG8gcmVzb3VyY2UgY291bGQgYmUgaW50ZXJwcmV0ZWQgYXNcbiAgLy8gY29kZS4gKGUuZy4gbmctaW5jbHVkZSwgc2NyaXB0IHNyYyBiaW5kaW5nLCB0ZW1wbGF0ZVVybClcbiAgUkVTT1VSQ0VfVVJMOiAncmVzb3VyY2VVcmwnLFxuXG4gIC8vIFNjcmlwdC4gQ3VycmVudGx5IHVudXNlZCBpbiBBbmd1bGFySlMuXG4gIEpTOiAnanMnXG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvbGxvdy5cblxudmFyIFVOREVSU0NPUkVfTE9XRVJDQVNFX1JFR0VYUCA9IC9fKFthLXpdKS9nO1xuXG5mdW5jdGlvbiBzbmFrZVRvQ2FtZWwobmFtZSkge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKFVOREVSU0NPUkVfTE9XRVJDQVNFX1JFR0VYUCwgZm5DYW1lbENhc2VSZXBsYWNlKTtcbn1cblxuZnVuY3Rpb24gYWRqdXN0TWF0Y2hlcihtYXRjaGVyKSB7XG4gIGlmIChtYXRjaGVyID09PSAnc2VsZicpIHtcbiAgICByZXR1cm4gbWF0Y2hlcjtcbiAgfSBlbHNlIGlmIChpc1N0cmluZyhtYXRjaGVyKSkge1xuICAgIC8vIFN0cmluZ3MgbWF0Y2ggZXhhY3RseSBleGNlcHQgZm9yIDIgd2lsZGNhcmRzIC0gJyonIGFuZCAnKionLlxuICAgIC8vICcqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgZXhjZXB0IHRob3NlIGZyb20gdGhlIHNldCAnOi8uPyYnLlxuICAgIC8vICcqKicgbWF0Y2hlcyBhbnkgY2hhcmFjdGVyIChsaWtlIC4qIGluIGEgUmVnRXhwKS5cbiAgICAvLyBNb3JlIHRoYW4gMiAqJ3MgcmFpc2VzIGFuIGVycm9yIGFzIGl0J3MgaWxsIGRlZmluZWQuXG4gICAgaWYgKG1hdGNoZXIuaW5kZXhPZignKioqJykgPiAtMSkge1xuICAgICAgdGhyb3cgJHNjZU1pbkVycignaXdjYXJkJyxcbiAgICAgICAgICAnSWxsZWdhbCBzZXF1ZW5jZSAqKiogaW4gc3RyaW5nIG1hdGNoZXIuICBTdHJpbmc6IHswfScsIG1hdGNoZXIpO1xuICAgIH1cbiAgICBtYXRjaGVyID0gZXNjYXBlRm9yUmVnZXhwKG1hdGNoZXIpLlxuICAgICAgICAgICAgICAgICAgcmVwbGFjZSgvXFxcXFxcKlxcXFxcXCovZywgJy4qJykuXG4gICAgICAgICAgICAgICAgICByZXBsYWNlKC9cXFxcXFwqL2csICdbXjovLj8mO10qJyk7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgbWF0Y2hlciArICckJyk7XG4gIH0gZWxzZSBpZiAoaXNSZWdFeHAobWF0Y2hlcikpIHtcbiAgICAvLyBUaGUgb25seSBvdGhlciB0eXBlIG9mIG1hdGNoZXIgYWxsb3dlZCBpcyBhIFJlZ2V4cC5cbiAgICAvLyBNYXRjaCBlbnRpcmUgVVJMIC8gZGlzYWxsb3cgcGFydGlhbCBtYXRjaGVzLlxuICAgIC8vIEZsYWdzIGFyZSByZXNldCAoaS5lLiBubyBnbG9iYWwsIGlnbm9yZUNhc2Ugb3IgbXVsdGlsaW5lKVxuICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIG1hdGNoZXIuc291cmNlICsgJyQnKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyAkc2NlTWluRXJyKCdpbWF0Y2hlcicsXG4gICAgICAgICdNYXRjaGVycyBtYXkgb25seSBiZSBcInNlbGZcIiwgc3RyaW5nIHBhdHRlcm5zIG9yIFJlZ0V4cCBvYmplY3RzJyk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBhZGp1c3RNYXRjaGVycyhtYXRjaGVycykge1xuICB2YXIgYWRqdXN0ZWRNYXRjaGVycyA9IFtdO1xuICBpZiAoaXNEZWZpbmVkKG1hdGNoZXJzKSkge1xuICAgIGZvckVhY2gobWF0Y2hlcnMsIGZ1bmN0aW9uKG1hdGNoZXIpIHtcbiAgICAgIGFkanVzdGVkTWF0Y2hlcnMucHVzaChhZGp1c3RNYXRjaGVyKG1hdGNoZXIpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gYWRqdXN0ZWRNYXRjaGVycztcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkc2NlRGVsZWdhdGVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogYCRzY2VEZWxlZ2F0ZWAgaXMgYSBzZXJ2aWNlIHRoYXQgaXMgdXNlZCBieSB0aGUgYCRzY2VgIHNlcnZpY2UgdG8gcHJvdmlkZSB7QGxpbmsgbmcuJHNjZSBTdHJpY3RcbiAqIENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9IHNlcnZpY2VzIHRvIEFuZ3VsYXJKUy5cbiAqXG4gKiBGb3IgYW4gb3ZlcnZpZXcgb2YgdGhpcyBzZXJ2aWNlIGFuZCB0aGUgZnVuY3Rpb25uYWxpdHkgaXQgcHJvdmlkZXMgaW4gQW5ndWxhckpTLCBzZWUgdGhlIG1haW5cbiAqIHBhZ2UgZm9yIHtAbGluayBuZy4kc2NlIFNDRX0uIFRoZSBjdXJyZW50IHBhZ2UgaXMgdGFyZ2V0ZWQgZm9yIGRldmVsb3BlcnMgd2hvIG5lZWQgdG8gYWx0ZXIgaG93XG4gKiBTQ0Ugd29ya3MgaW4gdGhlaXIgYXBwbGljYXRpb24sIHdoaWNoIHNob3VsZG4ndCBiZSBuZWVkZWQgaW4gbW9zdCBjYXNlcy5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiBBbmd1bGFySlMgc3Ryb25nbHkgcmVsaWVzIG9uIGNvbnRleHR1YWwgZXNjYXBpbmcgZm9yIHRoZSBzZWN1cml0eSBvZiBiaW5kaW5nczogZGlzYWJsaW5nIG9yXG4gKiBtb2RpZnlpbmcgdGhpcyBtaWdodCBjYXVzZSBjcm9zcyBzaXRlIHNjcmlwdGluZyAoWFNTKSB2dWxuZXJhYmlsaXRpZXMuIEZvciBsaWJyYXJpZXMgb3duZXJzLFxuICogY2hhbmdlcyB0byB0aGlzIHNlcnZpY2Ugd2lsbCBhbHNvIGluZmx1ZW5jZSB1c2Vycywgc28gYmUgZXh0cmEgY2FyZWZ1bCBhbmQgZG9jdW1lbnQgeW91ciBjaGFuZ2VzLlxuICogPC9kaXY+XG4gKlxuICogVHlwaWNhbGx5LCB5b3Ugd291bGQgY29uZmlndXJlIG9yIG92ZXJyaWRlIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlICRzY2VEZWxlZ2F0ZX0gaW5zdGVhZCBvZlxuICogdGhlIGAkc2NlYCBzZXJ2aWNlIHRvIGN1c3RvbWl6ZSB0aGUgd2F5IFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIHdvcmtzIGluIEFuZ3VsYXJKUy4gIFRoaXMgaXNcbiAqIGJlY2F1c2UsIHdoaWxlIHRoZSBgJHNjZWAgcHJvdmlkZXMgbnVtZXJvdXMgc2hvcnRoYW5kIG1ldGhvZHMsIGV0Yy4sIHlvdSByZWFsbHkgb25seSBuZWVkIHRvXG4gKiBvdmVycmlkZSAzIGNvcmUgZnVuY3Rpb25zIChgdHJ1c3RBc2AsIGBnZXRUcnVzdGVkYCBhbmQgYHZhbHVlT2ZgKSB0byByZXBsYWNlIHRoZSB3YXkgdGhpbmdzXG4gKiB3b3JrIGJlY2F1c2UgYCRzY2VgIGRlbGVnYXRlcyB0byBgJHNjZURlbGVnYXRlYCBmb3IgdGhlc2Ugb3BlcmF0aW9ucy5cbiAqXG4gKiBSZWZlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIgJHNjZURlbGVnYXRlUHJvdmlkZXJ9IHRvIGNvbmZpZ3VyZSB0aGlzIHNlcnZpY2UuXG4gKlxuICogVGhlIGRlZmF1bHQgaW5zdGFuY2Ugb2YgYCRzY2VEZWxlZ2F0ZWAgc2hvdWxkIHdvcmsgb3V0IG9mIHRoZSBib3ggd2l0aCBsaXR0bGUgcGFpbi4gIFdoaWxlIHlvdVxuICogY2FuIG92ZXJyaWRlIGl0IGNvbXBsZXRlbHkgdG8gY2hhbmdlIHRoZSBiZWhhdmlvciBvZiBgJHNjZWAsIHRoZSBjb21tb24gY2FzZSB3b3VsZFxuICogaW52b2x2ZSBjb25maWd1cmluZyB0aGUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBpbnN0ZWFkIGJ5IHNldHRpbmdcbiAqIHlvdXIgb3duIHdoaXRlbGlzdHMgYW5kIGJsYWNrbGlzdHMgZm9yIHRydXN0aW5nIFVSTHMgdXNlZCBmb3IgbG9hZGluZyBBbmd1bGFySlMgcmVzb3VyY2VzIHN1Y2ggYXNcbiAqIHRlbXBsYXRlcy4gIFJlZmVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdFxuICogJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxXaGl0ZWxpc3R9IGFuZCB7QGxpbmtcbiAqIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0ICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsQmxhY2tsaXN0fVxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkc2NlRGVsZWdhdGVQcm92aWRlclxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyYCBwcm92aWRlciBhbGxvd3MgZGV2ZWxvcGVycyB0byBjb25maWd1cmUgdGhlIHtAbGluayBuZy4kc2NlRGVsZWdhdGVcbiAqICRzY2VEZWxlZ2F0ZSBzZXJ2aWNlfSwgdXNlZCBhcyBhIGRlbGVnYXRlIGZvciB7QGxpbmsgbmcuJHNjZSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0uXG4gKlxuICogVGhlIGAkc2NlRGVsZWdhdGVQcm92aWRlcmAgYWxsb3dzIG9uZSB0byBnZXQvc2V0IHRoZSB3aGl0ZWxpc3RzIGFuZCBibGFja2xpc3RzIHVzZWQgdG8gZW5zdXJlXG4gKiB0aGF0IHRoZSBVUkxzIHVzZWQgZm9yIHNvdXJjaW5nIEFuZ3VsYXJKUyB0ZW1wbGF0ZXMgYW5kIG90aGVyIHNjcmlwdC1ydW5uaW5nIFVSTHMgYXJlIHNhZmUgKGFsbFxuICogcGxhY2VzIHRoYXQgdXNlIHRoZSBgJHNjZS5SRVNPVVJDRV9VUkxgIGNvbnRleHQpLiBTZWVcbiAqIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdH1cbiAqIGFuZFxuICoge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0ICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsQmxhY2tsaXN0fSxcbiAqXG4gKiBGb3IgdGhlIGdlbmVyYWwgZGV0YWlscyBhYm91dCB0aGlzIHNlcnZpY2UgaW4gQW5ndWxhckpTLCByZWFkIHRoZSBtYWluIHBhZ2UgZm9yIHtAbGluayBuZy4kc2NlXG4gKiBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0uXG4gKlxuICogKipFeGFtcGxlKio6ICBDb25zaWRlciB0aGUgZm9sbG93aW5nIGNhc2UuIDxhIG5hbWU9XCJleGFtcGxlXCI+PC9hPlxuICpcbiAqIC0geW91ciBhcHAgaXMgaG9zdGVkIGF0IHVybCBgaHR0cDovL215YXBwLmV4YW1wbGUuY29tL2BcbiAqIC0gYnV0IHNvbWUgb2YgeW91ciB0ZW1wbGF0ZXMgYXJlIGhvc3RlZCBvbiBvdGhlciBkb21haW5zIHlvdSBjb250cm9sIHN1Y2ggYXNcbiAqICAgYGh0dHA6Ly9zcnYwMS5hc3NldHMuZXhhbXBsZS5jb20vYCwgYGh0dHA6Ly9zcnYwMi5hc3NldHMuZXhhbXBsZS5jb20vYCwgZXRjLlxuICogLSBhbmQgeW91IGhhdmUgYW4gb3BlbiByZWRpcmVjdCBhdCBgaHR0cDovL215YXBwLmV4YW1wbGUuY29tL2NsaWNrVGhydT8uLi5gLlxuICpcbiAqIEhlcmUgaXMgd2hhdCBhIHNlY3VyZSBjb25maWd1cmF0aW9uIGZvciB0aGlzIHNjZW5hcmlvIG1pZ2h0IGxvb2sgbGlrZTpcbiAqXG4gKiBgYGBcbiAqICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSkuY29uZmlnKGZ1bmN0aW9uKCRzY2VEZWxlZ2F0ZVByb3ZpZGVyKSB7XG4gKiAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdChbXG4gKiAgICAgIC8vIEFsbG93IHNhbWUgb3JpZ2luIHJlc291cmNlIGxvYWRzLlxuICogICAgICAnc2VsZicsXG4gKiAgICAgIC8vIEFsbG93IGxvYWRpbmcgZnJvbSBvdXIgYXNzZXRzIGRvbWFpbi4gIE5vdGljZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuICogYW5kICoqLlxuICogICAgICAnaHR0cDovL3NydiouYXNzZXRzLmV4YW1wbGUuY29tLyoqJ1xuICogICAgXSk7XG4gKlxuICogICAgLy8gVGhlIGJsYWNrbGlzdCBvdmVycmlkZXMgdGhlIHdoaXRlbGlzdCBzbyB0aGUgb3BlbiByZWRpcmVjdCBoZXJlIGlzIGJsb2NrZWQuXG4gKiAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybEJsYWNrbGlzdChbXG4gKiAgICAgICdodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vY2xpY2tUaHJ1KionXG4gKiAgICBdKTtcbiAqICB9KTtcbiAqIGBgYFxuICogTm90ZSB0aGF0IGFuIGVtcHR5IHdoaXRlbGlzdCB3aWxsIGJsb2NrIGV2ZXJ5IHJlc291cmNlIFVSTCBmcm9tIGJlaW5nIGxvYWRlZCwgYW5kIHdpbGwgcmVxdWlyZVxuICogeW91IHRvIG1hbnVhbGx5IG1hcmsgZWFjaCBvbmUgYXMgdHJ1c3RlZCB3aXRoIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybGAuIEhvd2V2ZXIsIHRlbXBsYXRlc1xuICogcmVxdWVzdGVkIGJ5IHtAbGluayBuZy4kdGVtcGxhdGVSZXF1ZXN0ICR0ZW1wbGF0ZVJlcXVlc3R9IHRoYXQgYXJlIHByZXNlbnQgaW5cbiAqIHtAbGluayBuZy4kdGVtcGxhdGVDYWNoZSAkdGVtcGxhdGVDYWNoZX0gd2lsbCBub3QgZ28gdGhyb3VnaCB0aGlzIGNoZWNrLiBJZiB5b3UgaGF2ZSBhIG1lY2hhbmlzbVxuICogdG8gcG9wdWxhdGUgeW91ciB0ZW1wbGF0ZXMgaW4gdGhhdCBjYWNoZSBhdCBjb25maWcgdGltZSwgdGhlbiBpdCBpcyBhIGdvb2QgaWRlYSB0byByZW1vdmUgJ3NlbGYnXG4gKiBmcm9tIHRoYXQgd2hpdGVsaXN0LiBUaGlzIGhlbHBzIHRvIG1pdGlnYXRlIHRoZSBzZWN1cml0eSBpbXBhY3Qgb2YgY2VydGFpbiB0eXBlcyBvZiBpc3N1ZXMsIGxpa2VcbiAqIGZvciBpbnN0YW5jZSBhdHRhY2tlci1jb250cm9sbGVkIGBuZy1pbmNsdWRlc2AuXG4gKi9cblxuZnVuY3Rpb24gJFNjZURlbGVnYXRlUHJvdmlkZXIoKSB7XG4gIHRoaXMuU0NFX0NPTlRFWFRTID0gU0NFX0NPTlRFWFRTO1xuXG4gIC8vIFJlc291cmNlIFVSTHMgY2FuIGFsc28gYmUgdHJ1c3RlZCBieSBwb2xpY3kuXG4gIHZhciByZXNvdXJjZVVybFdoaXRlbGlzdCA9IFsnc2VsZiddLFxuICAgICAgcmVzb3VyY2VVcmxCbGFja2xpc3QgPSBbXTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PX0gd2hpdGVsaXN0IFdoZW4gcHJvdmlkZWQsIHJlcGxhY2VzIHRoZSByZXNvdXJjZVVybFdoaXRlbGlzdCB3aXRoIHRoZSB2YWx1ZVxuICAgKiAgICAgcHJvdmlkZWQuICBUaGlzIG11c3QgYmUgYW4gYXJyYXkgb3IgbnVsbC4gIEEgc25hcHNob3Qgb2YgdGhpcyBhcnJheSBpcyB1c2VkIHNvIGZ1cnRoZXJcbiAgICogICAgIGNoYW5nZXMgdG8gdGhlIGFycmF5IGFyZSBpZ25vcmVkLlxuICAgKiAgICAgRm9sbG93IHtAbGluayBuZy4kc2NlI3Jlc291cmNlVXJsUGF0dGVybkl0ZW0gdGhpcyBsaW5rfSBmb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaXRlbXNcbiAgICogICAgIGFsbG93ZWQgaW4gdGhpcyBhcnJheS5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IFRoZSBjdXJyZW50bHkgc2V0IHdoaXRlbGlzdCBhcnJheS5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMvR2V0cyB0aGUgd2hpdGVsaXN0IG9mIHRydXN0ZWQgcmVzb3VyY2UgVVJMcy5cbiAgICpcbiAgICogVGhlICoqZGVmYXVsdCB2YWx1ZSoqIHdoZW4gbm8gd2hpdGVsaXN0IGhhcyBiZWVuIGV4cGxpY2l0bHkgc2V0IGlzIGBbJ3NlbGYnXWAgYWxsb3dpbmcgb25seVxuICAgKiBzYW1lIG9yaWdpbiByZXNvdXJjZSByZXF1ZXN0cy5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogKipOb3RlOioqIHRoZSBkZWZhdWx0IHdoaXRlbGlzdCBvZiAnc2VsZicgaXMgbm90IHJlY29tbWVuZGVkIGlmIHlvdXIgYXBwIHNoYXJlcyBpdHMgb3JpZ2luXG4gICAqIHdpdGggb3RoZXIgYXBwcyEgSXQgaXMgYSBnb29kIGlkZWEgdG8gbGltaXQgaXQgdG8gb25seSB5b3VyIGFwcGxpY2F0aW9uJ3MgZGlyZWN0b3J5LlxuICAgKiA8L2Rpdj5cbiAgICovXG4gIHRoaXMucmVzb3VyY2VVcmxXaGl0ZWxpc3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICByZXNvdXJjZVVybFdoaXRlbGlzdCA9IGFkanVzdE1hdGNoZXJzKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc291cmNlVXJsV2hpdGVsaXN0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk9fSBibGFja2xpc3QgV2hlbiBwcm92aWRlZCwgcmVwbGFjZXMgdGhlIHJlc291cmNlVXJsQmxhY2tsaXN0IHdpdGggdGhlIHZhbHVlXG4gICAqICAgICBwcm92aWRlZC4gIFRoaXMgbXVzdCBiZSBhbiBhcnJheSBvciBudWxsLiAgQSBzbmFwc2hvdCBvZiB0aGlzIGFycmF5IGlzIHVzZWQgc28gZnVydGhlclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuPC9wPjxwPlxuICAgKiAgICAgRm9sbG93IHtAbGluayBuZy4kc2NlI3Jlc291cmNlVXJsUGF0dGVybkl0ZW0gdGhpcyBsaW5rfSBmb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaXRlbXNcbiAgICogICAgIGFsbG93ZWQgaW4gdGhpcyBhcnJheS48L3A+PHA+XG4gICAqICAgICBUaGUgdHlwaWNhbCB1c2FnZSBmb3IgdGhlIGJsYWNrbGlzdCBpcyB0byAqKmJsb2NrXG4gICAqICAgICBbb3BlbiByZWRpcmVjdHNdKGh0dHA6Ly9jd2UubWl0cmUub3JnL2RhdGEvZGVmaW5pdGlvbnMvNjAxLmh0bWwpKiogc2VydmVkIGJ5IHlvdXIgZG9tYWluIGFzXG4gICAqICAgICB0aGVzZSB3b3VsZCBvdGhlcndpc2UgYmUgdHJ1c3RlZCBidXQgYWN0dWFsbHkgcmV0dXJuIGNvbnRlbnQgZnJvbSB0aGUgcmVkaXJlY3RlZCBkb21haW4uXG4gICAqICAgICA8L3A+PHA+XG4gICAqICAgICBGaW5hbGx5LCAqKnRoZSBibGFja2xpc3Qgb3ZlcnJpZGVzIHRoZSB3aGl0ZWxpc3QqKiBhbmQgaGFzIHRoZSBmaW5hbCBzYXkuXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fSBUaGUgY3VycmVudGx5IHNldCBibGFja2xpc3QgYXJyYXkuXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzL0dldHMgdGhlIGJsYWNrbGlzdCBvZiB0cnVzdGVkIHJlc291cmNlIFVSTHMuXG4gICAqXG4gICAqIFRoZSAqKmRlZmF1bHQgdmFsdWUqKiB3aGVuIG5vIHdoaXRlbGlzdCBoYXMgYmVlbiBleHBsaWNpdGx5IHNldCBpcyB0aGUgZW1wdHkgYXJyYXkgKGkuZS4gdGhlcmVcbiAgICogaXMgbm8gYmxhY2tsaXN0LilcbiAgICovXG5cbiAgdGhpcy5yZXNvdXJjZVVybEJsYWNrbGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJlc291cmNlVXJsQmxhY2tsaXN0ID0gYWRqdXN0TWF0Y2hlcnModmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb3VyY2VVcmxCbGFja2xpc3Q7XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcblxuICAgIHZhciBodG1sU2FuaXRpemVyID0gZnVuY3Rpb24gaHRtbFNhbml0aXplcihodG1sKSB7XG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCAnQXR0ZW1wdGluZyB0byB1c2UgYW4gdW5zYWZlIHZhbHVlIGluIGEgc2FmZSBjb250ZXh0LicpO1xuICAgIH07XG5cbiAgICBpZiAoJGluamVjdG9yLmhhcygnJHNhbml0aXplJykpIHtcbiAgICAgIGh0bWxTYW5pdGl6ZXIgPSAkaW5qZWN0b3IuZ2V0KCckc2FuaXRpemUnKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIG1hdGNoVXJsKG1hdGNoZXIsIHBhcnNlZFVybCkge1xuICAgICAgaWYgKG1hdGNoZXIgPT09ICdzZWxmJykge1xuICAgICAgICByZXR1cm4gdXJsSXNTYW1lT3JpZ2luKHBhcnNlZFVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZWZpbml0ZWx5IGEgcmVnZXguICBTZWUgYWRqdXN0TWF0Y2hlcnMoKVxuICAgICAgICByZXR1cm4gISFtYXRjaGVyLmV4ZWMocGFyc2VkVXJsLmhyZWYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kodXJsKSB7XG4gICAgICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZSh1cmwudG9TdHJpbmcoKSk7XG4gICAgICB2YXIgaSwgbiwgYWxsb3dlZCA9IGZhbHNlO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYXQgbGVhc3Qgb25lIGl0ZW0gZnJvbSB0aGUgd2hpdGVsaXN0IGFsbG93cyB0aGlzIHVybC5cbiAgICAgIGZvciAoaSA9IDAsIG4gPSByZXNvdXJjZVVybFdoaXRlbGlzdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgaWYgKG1hdGNoVXJsKHJlc291cmNlVXJsV2hpdGVsaXN0W2ldLCBwYXJzZWRVcmwpKSB7XG4gICAgICAgICAgYWxsb3dlZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhbGxvd2VkKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IG5vIGl0ZW0gZnJvbSB0aGUgYmxhY2tsaXN0IGJsb2NrZWQgdGhpcyB1cmwuXG4gICAgICAgIGZvciAoaSA9IDAsIG4gPSByZXNvdXJjZVVybEJsYWNrbGlzdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICBpZiAobWF0Y2hVcmwocmVzb3VyY2VVcmxCbGFja2xpc3RbaV0sIHBhcnNlZFVybCkpIHtcbiAgICAgICAgICAgIGFsbG93ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFsbG93ZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVIb2xkZXJUeXBlKEJhc2UpIHtcbiAgICAgIHZhciBob2xkZXJUeXBlID0gZnVuY3Rpb24gVHJ1c3RlZFZhbHVlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWUpIHtcbiAgICAgICAgdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0cnVzdGVkVmFsdWU7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgaWYgKEJhc2UpIHtcbiAgICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUgPSBuZXcgQmFzZSgpO1xuICAgICAgfVxuICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uIHNjZVZhbHVlT2YoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9O1xuICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiBzY2VUb1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBob2xkZXJUeXBlO1xuICAgIH1cblxuICAgIHZhciB0cnVzdGVkVmFsdWVIb2xkZXJCYXNlID0gZ2VuZXJhdGVIb2xkZXJUeXBlKCksXG4gICAgICAgIGJ5VHlwZSA9IHt9O1xuXG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5IVE1MXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLkNTU10gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5VUkxdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuSlNdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuUkVTT1VSQ0VfVVJMXSA9IGdlbmVyYXRlSG9sZGVyVHlwZShieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0pO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2VEZWxlZ2F0ZSN0cnVzdEFzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIGEgdHJ1c3RlZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGFyYW1ldGVyIGZvciB0aGUgc3BlY2lmaWVkIGNvbnRleHQuIFRoaXMgdHJ1c3RlZFxuICAgICAqIG9iamVjdCB3aWxsIGxhdGVyIG9uIGJlIHVzZWQgYXMtaXMsIHdpdGhvdXQgYW55IHNlY3VyaXR5IGNoZWNrLCBieSBiaW5kaW5ncyBvciBkaXJlY3RpdmVzXG4gICAgICogdGhhdCByZXF1aXJlIHRoaXMgc2VjdXJpdHkgY29udGV4dC5cbiAgICAgKiBGb3IgaW5zdGFuY2UsIG1hcmtpbmcgYSBzdHJpbmcgYXMgdHJ1c3RlZCBmb3IgdGhlIGAkc2NlLkhUTUxgIGNvbnRleHQgd2lsbCBlbnRpcmVseSBieXBhc3NcbiAgICAgKiB0aGUgcG90ZW50aWFsIGAkc2FuaXRpemVgIGNhbGwgaW4gY29ycmVzcG9uZGluZyBgJHNjZS5IVE1MYCBiaW5kaW5ncyBvciBkaXJlY3RpdmVzLCBzdWNoIGFzXG4gICAgICogYG5nLWJpbmQtaHRtbGAuIE5vdGUgdGhhdCBpbiBtb3N0IGNhc2VzIHlvdSB3b24ndCBuZWVkIHRvIGNhbGwgdGhpcyBmdW5jdGlvbjogaWYgeW91IGhhdmUgdGhlXG4gICAgICogc2FuaXRpemVyIGxvYWRlZCwgcGFzc2luZyB0aGUgdmFsdWUgaXRzZWxmIHdpbGwgcmVuZGVyIGFsbCB0aGUgSFRNTCB0aGF0IGRvZXMgbm90IHBvc2UgYVxuICAgICAqIHNlY3VyaXR5IHJpc2suXG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGdldFRydXN0ZWR9IGZvciB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgdGhvc2VcbiAgICAgKiB0cnVzdGVkIHZhbHVlcywgYW5kIHtAbGluayBuZy4kc2NlICRzY2V9IGZvciBnZW5lcmFsIGRvY3VtZW50YXRpb24gYWJvdXQgc3RyaWN0IGNvbnRleHR1YWxcbiAgICAgKiBlc2NhcGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgc2FmZSBmb3IgdXNlLCBlLmcuIGAkc2NlLlVSTGAsXG4gICAgICogICAgIGAkc2NlLlJFU09VUkNFX1VSTGAsIGAkc2NlLkhUTUxgLCBgJHNjZS5KU2Agb3IgYCRzY2UuQ1NTYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRoYXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHRydXN0ZWQgcmVwcmVzZW50YXRpb24gb2YgdmFsdWUsIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGdpdmVuIGNvbnRleHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJ1c3RBcyh0eXBlLCB0cnVzdGVkVmFsdWUpIHtcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IChieVR5cGUuaGFzT3duUHJvcGVydHkodHlwZSkgPyBieVR5cGVbdHlwZV0gOiBudWxsKTtcbiAgICAgIGlmICghQ29uc3RydWN0b3IpIHtcbiAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaWNvbnRleHQnLFxuICAgICAgICAgICAgJ0F0dGVtcHRlZCB0byB0cnVzdCBhIHZhbHVlIGluIGludmFsaWQgY29udGV4dC4gQ29udGV4dDogezB9OyBWYWx1ZTogezF9JyxcbiAgICAgICAgICAgIHR5cGUsIHRydXN0ZWRWYWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodHJ1c3RlZFZhbHVlID09PSBudWxsIHx8IGlzVW5kZWZpbmVkKHRydXN0ZWRWYWx1ZSkgfHwgdHJ1c3RlZFZhbHVlID09PSAnJykge1xuICAgICAgICByZXR1cm4gdHJ1c3RlZFZhbHVlO1xuICAgICAgfVxuICAgICAgLy8gQWxsIHRoZSBjdXJyZW50IGNvbnRleHRzIGluIFNDRV9DT05URVhUUyBoYXBwZW4gdG8gYmUgc3RyaW5ncy4gIEluIG9yZGVyIHRvIGF2b2lkIHRydXN0aW5nXG4gICAgICAvLyBtdXRhYmxlIG9iamVjdHMsIHdlIGVuc3VyZSBoZXJlIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbiBpcyBhY3R1YWxseSBhIHN0cmluZy5cbiAgICAgIGlmICh0eXBlb2YgdHJ1c3RlZFZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyAkc2NlTWluRXJyKCdpdHlwZScsXG4gICAgICAgICAgICAnQXR0ZW1wdGVkIHRvIHRydXN0IGEgbm9uLXN0cmluZyB2YWx1ZSBpbiBhIGNvbnRlbnQgcmVxdWlyaW5nIGEgc3RyaW5nOiBDb250ZXh0OiB7MH0nLFxuICAgICAgICAgICAgdHlwZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRydXN0ZWRWYWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2VEZWxlZ2F0ZSN2YWx1ZU9mXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBJZiB0aGUgcGFzc2VkIHBhcmFtZXRlciBoYWQgYmVlbiByZXR1cm5lZCBieSBhIHByaW9yIGNhbGwgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzXG4gICAgICogYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0sIHJldHVybnMgdGhlIHZhbHVlIHRoYXQgaGFkIGJlZW4gcGFzc2VkIHRvIHtAbGlua1xuICAgICAqIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LlxuICAgICAqXG4gICAgICogSWYgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgaXMgbm90IGEgdmFsdWUgdGhhdCBoYWQgYmVlbiByZXR1cm5lZCBieSB7QGxpbmtcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSwgaXQgbXVzdCBiZSByZXR1cm5lZCBhcy1pcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfVxuICAgICAqICAgICBjYWxsIG9yIGFueXRoaW5nIGVsc2UuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGB2YWx1ZWAgdGhhdCB3YXMgb3JpZ2luYWxseSBwcm92aWRlZCB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gaWYgYHZhbHVlYCBpcyB0aGUgcmVzdWx0IG9mIHN1Y2ggYSBjYWxsLiAgT3RoZXJ3aXNlLCByZXR1cm5zXG4gICAgICogICAgIGB2YWx1ZWAgdW5jaGFuZ2VkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHZhbHVlT2YobWF5YmVUcnVzdGVkKSB7XG4gICAgICBpZiAobWF5YmVUcnVzdGVkIGluc3RhbmNlb2YgdHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSkge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogVGFrZXMgYW55IGlucHV0LCBhbmQgZWl0aGVyIHJldHVybnMgYSB2YWx1ZSB0aGF0J3Mgc2FmZSB0byB1c2UgaW4gdGhlIHNwZWNpZmllZCBjb250ZXh0LCBvclxuICAgICAqIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICpcbiAgICAgKiBJbiBwcmFjdGljZSwgdGhlcmUgYXJlIHNldmVyYWwgY2FzZXMuIFdoZW4gZ2l2ZW4gYSBzdHJpbmcsIHRoaXMgZnVuY3Rpb24gcnVucyBjaGVja3NcbiAgICAgKiBhbmQgc2FuaXRpemF0aW9uIHRvIG1ha2UgaXQgc2FmZSB3aXRob3V0IHByaW9yIGFzc3VtcHRpb25zLiBXaGVuIGdpdmVuIHRoZSByZXN1bHQgb2YgYSB7QGxpbmtcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBjYWxsLCBpdCByZXR1cm5zIHRoZSBvcmlnaW5hbGx5IHN1cHBsaWVkXG4gICAgICogdmFsdWUgaWYgdGhhdCB2YWx1ZSdzIGNvbnRleHQgaXMgdmFsaWQgZm9yIHRoaXMgY2FsbCdzIGNvbnRleHQuIEZpbmFsbHksIHRoaXMgZnVuY3Rpb24gY2FuXG4gICAgICogYWxzbyB0aHJvdyB3aGVuIHRoZXJlIGlzIG5vIHdheSB0byB0dXJuIGBtYXliZVRydXN0ZWRgIGluIGEgc2FmZSB2YWx1ZSAoZS5nLiwgbm8gc2FuaXRpemF0aW9uXG4gICAgICogaXMgYXZhaWxhYmxlIG9yIHBvc3NpYmxlLilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgdG8gYmUgdXNlZCAoc3VjaCBhcyBgJHNjZS5IVE1MYCkuXG4gICAgICogQHBhcmFtIHsqfSBtYXliZVRydXN0ZWQgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqICAgICBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBjYWxsLCBvciBhbnl0aGluZyBlbHNlICh3aGljaCB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIHRydXN0ZWQuKVxuICAgICAqIEByZXR1cm4geyp9IEEgdmVyc2lvbiBvZiB0aGUgdmFsdWUgdGhhdCdzIHNhZmUgdG8gdXNlIGluIHRoZSBnaXZlbiBjb250ZXh0LCBvciB0aHJvd3MgYW5cbiAgICAgKiAgICAgZXhjZXB0aW9uIGlmIHRoaXMgaXMgaW1wb3NzaWJsZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRUcnVzdGVkKHR5cGUsIG1heWJlVHJ1c3RlZCkge1xuICAgICAgaWYgKG1heWJlVHJ1c3RlZCA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZChtYXliZVRydXN0ZWQpIHx8IG1heWJlVHJ1c3RlZCA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZDtcbiAgICAgIH1cbiAgICAgIHZhciBjb25zdHJ1Y3RvciA9IChieVR5cGUuaGFzT3duUHJvcGVydHkodHlwZSkgPyBieVR5cGVbdHlwZV0gOiBudWxsKTtcbiAgICAgIC8vIElmIG1heWJlVHJ1c3RlZCBpcyBhIHRydXN0ZWQgY2xhc3MgaW5zdGFuY2Ugb3Igc3ViY2xhc3MgaW5zdGFuY2UsIHRoZW4gdW53cmFwIGFuZCByZXR1cm5cbiAgICAgIC8vIGFzLWlzLlxuICAgICAgaWYgKGNvbnN0cnVjdG9yICYmIG1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtcbiAgICAgIH1cbiAgICAgIC8vIE90aGVyd2lzZSwgaWYgd2UgZ2V0IGhlcmUsIHRoZW4gd2UgbWF5IGVpdGhlciBtYWtlIGl0IHNhZmUsIG9yIHRocm93IGFuIGV4Y2VwdGlvbi4gVGhpc1xuICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgY29udGV4dDogc29tZSBhcmUgc2FuaXRpemF0aWJsZSAoSFRNTCksIHNvbWUgdXNlIHdoaXRlbGlzdHMgKFJFU09VUkNFX1VSTCksXG4gICAgICAvLyBzb21lIGFyZSBpbXBvc3NpYmxlIHRvIGRvIChKUykuIFRoaXMgc3RlcCBpc24ndCBpbXBsZW1lbnRlZCBmb3IgQ1NTIGFuZCBVUkwsIGFzIEFuZ3VsYXJKU1xuICAgICAgLy8gaGFzIG5vIGNvcnJlc3BvbmRpbmcgc2lua3MuXG4gICAgICBpZiAodHlwZSA9PT0gU0NFX0NPTlRFWFRTLlJFU09VUkNFX1VSTCkge1xuICAgICAgICAvLyBSRVNPVVJDRV9VUkwgdXNlcyBhIHdoaXRlbGlzdC5cbiAgICAgICAgaWYgKGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kobWF5YmVUcnVzdGVkKSkge1xuICAgICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaW5zZWN1cmwnLFxuICAgICAgICAgICAgICAnQmxvY2tlZCBsb2FkaW5nIHJlc291cmNlIGZyb20gdXJsIG5vdCBhbGxvd2VkIGJ5ICRzY2VEZWxlZ2F0ZSBwb2xpY3kuICBVUkw6IHswfScsXG4gICAgICAgICAgICAgIG1heWJlVHJ1c3RlZC50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuSFRNTCkge1xuICAgICAgICAvLyBodG1sU2FuaXRpemVyIHRocm93cyBpdHMgb3duIGVycm9yIHdoZW4gbm8gc2FuaXRpemVyIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgcmV0dXJuIGh0bWxTYW5pdGl6ZXIobWF5YmVUcnVzdGVkKTtcbiAgICAgIH1cbiAgICAgIC8vIERlZmF1bHQgZXJyb3Igd2hlbiB0aGUgJHNjZSBzZXJ2aWNlIGhhcyBubyB3YXkgdG8gbWFrZSB0aGUgaW5wdXQgc2FmZS5cbiAgICAgIHRocm93ICRzY2VNaW5FcnIoJ3Vuc2FmZScsICdBdHRlbXB0aW5nIHRvIHVzZSBhbiB1bnNhZmUgdmFsdWUgaW4gYSBzYWZlIGNvbnRleHQuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdHJ1c3RBczogdHJ1c3RBcyxcbiAgICAgICAgICAgICBnZXRUcnVzdGVkOiBnZXRUcnVzdGVkLFxuICAgICAgICAgICAgIHZhbHVlT2Y6IHZhbHVlT2YgfTtcbiAgfV07XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRzY2VQcm92aWRlclxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgJHNjZVByb3ZpZGVyIHByb3ZpZGVyIGFsbG93cyBkZXZlbG9wZXJzIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIG5nLiRzY2UgJHNjZX0gc2VydmljZS5cbiAqIC0gICBlbmFibGUvZGlzYWJsZSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKSBpbiBhIG1vZHVsZVxuICogLSAgIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHdpdGggYSBjdXN0b20gZGVsZWdhdGVcbiAqXG4gKiBSZWFkIG1vcmUgYWJvdXQge0BsaW5rIG5nLiRzY2UgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9LlxuICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRzY2VcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogYCRzY2VgIGlzIGEgc2VydmljZSB0aGF0IHByb3ZpZGVzIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIHNlcnZpY2VzIHRvIEFuZ3VsYXJKUy5cbiAqXG4gKiAjIyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZ1xuICpcbiAqIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpIGlzIGEgbW9kZSBpbiB3aGljaCBBbmd1bGFySlMgY29uc3RyYWlucyBiaW5kaW5ncyB0byBvbmx5IHJlbmRlclxuICogdHJ1c3RlZCB2YWx1ZXMuIEl0cyBnb2FsIGlzIHRvIGFzc2lzdCBpbiB3cml0aW5nIGNvZGUgaW4gYSB3YXkgdGhhdCAoYSkgaXMgc2VjdXJlIGJ5IGRlZmF1bHQsIGFuZFxuICogKGIpIG1ha2VzIGF1ZGl0aW5nIGZvciBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMgc3VjaCBhcyBYU1MsIGNsaWNramFja2luZywgZXRjLiBhIGxvdCBlYXNpZXIuXG4gKlxuICogIyMjIE92ZXJ2aWV3XG4gKlxuICogVG8gc3lzdGVtYXRpY2FsbHkgYmxvY2sgWFNTIHNlY3VyaXR5IGJ1Z3MsIEFuZ3VsYXJKUyB0cmVhdHMgYWxsIHZhbHVlcyBhcyB1bnRydXN0ZWQgYnkgZGVmYXVsdCBpblxuICogSFRNTCBvciBzZW5zaXRpdmUgVVJMIGJpbmRpbmdzLiBXaGVuIGJpbmRpbmcgdW50cnVzdGVkIHZhbHVlcywgQW5ndWxhckpTIHdpbGwgYXV0b21hdGljYWxseVxuICogcnVuIHNlY3VyaXR5IGNoZWNrcyBvbiB0aGVtIChzYW5pdGl6YXRpb25zLCB3aGl0ZWxpc3RzLCBkZXBlbmRpbmcgb24gY29udGV4dCksIG9yIHRocm93IHdoZW4gaXRcbiAqIGNhbm5vdCBndWFyYW50ZWUgdGhlIHNlY3VyaXR5IG9mIHRoZSByZXN1bHQuIFRoYXQgYmVoYXZpb3IgZGVwZW5kcyBzdHJvbmdseSBvbiBjb250ZXh0czogSFRNTFxuICogY2FuIGJlIHNhbml0aXplZCwgYnV0IHRlbXBsYXRlIFVSTHMgY2Fubm90LCBmb3IgaW5zdGFuY2UuXG4gKlxuICogVG8gaWxsdXN0cmF0ZSB0aGlzLCBjb25zaWRlciB0aGUgYG5nLWJpbmQtaHRtbGAgZGlyZWN0aXZlLiBJdCByZW5kZXJzIGl0cyB2YWx1ZSBkaXJlY3RseSBhcyBIVE1MOlxuICogd2UgY2FsbCB0aGF0IHRoZSAqY29udGV4dCouIFdoZW4gZ2l2ZW4gYW4gdW50cnVzdGVkIGlucHV0LCBBbmd1bGFySlMgd2lsbCBhdHRlbXB0IHRvIHNhbml0aXplIGl0XG4gKiBiZWZvcmUgcmVuZGVyaW5nIGlmIGEgc2FuaXRpemVyIGlzIGF2YWlsYWJsZSwgYW5kIHRocm93IG90aGVyd2lzZS4gVG8gYnlwYXNzIHNhbml0aXphdGlvbiBhbmRcbiAqIHJlbmRlciB0aGUgaW5wdXQgYXMtaXMsIHlvdSB3aWxsIG5lZWQgdG8gbWFyayBpdCBhcyB0cnVzdGVkIGZvciB0aGF0IGNvbnRleHQgYmVmb3JlIGF0dGVtcHRpbmdcbiAqIHRvIGJpbmQgaXQuXG4gKlxuICogQXMgb2YgdmVyc2lvbiAxLjIsIEFuZ3VsYXJKUyBzaGlwcyB3aXRoIFNDRSBlbmFibGVkIGJ5IGRlZmF1bHQuXG4gKlxuICogIyMjIEluIHByYWN0aWNlXG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgb2YgYSBiaW5kaW5nIGluIGEgcHJpdmlsZWdlZCBjb250ZXh0OlxuICpcbiAqIGBgYFxuICogPGlucHV0IG5nLW1vZGVsPVwidXNlckh0bWxcIiBhcmlhLWxhYmVsPVwiVXNlciBpbnB1dFwiPlxuICogPGRpdiBuZy1iaW5kLWh0bWw9XCJ1c2VySHRtbFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogTm90aWNlIHRoYXQgYG5nLWJpbmQtaHRtbGAgaXMgYm91bmQgdG8gYHVzZXJIdG1sYCBjb250cm9sbGVkIGJ5IHRoZSB1c2VyLiAgV2l0aCBTQ0VcbiAqIGRpc2FibGVkLCB0aGlzIGFwcGxpY2F0aW9uIGFsbG93cyB0aGUgdXNlciB0byByZW5kZXIgYXJiaXRyYXJ5IEhUTUwgaW50byB0aGUgRElWLCB3aGljaCB3b3VsZFxuICogYmUgYW4gWFNTIHNlY3VyaXR5IGJ1Zy4gSW4gYSBtb3JlIHJlYWxpc3RpYyBleGFtcGxlLCBvbmUgbWF5IGJlIHJlbmRlcmluZyB1c2VyIGNvbW1lbnRzLCBibG9nXG4gKiBhcnRpY2xlcywgZXRjLiB2aWEgYmluZGluZ3MuIChIVE1MIGlzIGp1c3Qgb25lIGV4YW1wbGUgb2YgYSBjb250ZXh0IHdoZXJlIHJlbmRlcmluZyB1c2VyXG4gKiBjb250cm9sbGVkIGlucHV0IGNyZWF0ZXMgc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzLilcbiAqXG4gKiBGb3IgdGhlIGNhc2Ugb2YgSFRNTCwgeW91IG1pZ2h0IHVzZSBhIGxpYnJhcnksIGVpdGhlciBvbiB0aGUgY2xpZW50IHNpZGUsIG9yIG9uIHRoZSBzZXJ2ZXIgc2lkZSxcbiAqIHRvIHNhbml0aXplIHVuc2FmZSBIVE1MIGJlZm9yZSBiaW5kaW5nIHRvIHRoZSB2YWx1ZSBhbmQgcmVuZGVyaW5nIGl0IGluIHRoZSBkb2N1bWVudC5cbiAqXG4gKiBIb3cgd291bGQgeW91IGVuc3VyZSB0aGF0IGV2ZXJ5IHBsYWNlIHRoYXQgdXNlZCB0aGVzZSB0eXBlcyBvZiBiaW5kaW5ncyB3YXMgYm91bmQgdG8gYSB2YWx1ZSB0aGF0XG4gKiB3YXMgc2FuaXRpemVkIGJ5IHlvdXIgbGlicmFyeSAob3IgcmV0dXJuZWQgYXMgc2FmZSBmb3IgcmVuZGVyaW5nIGJ5IHlvdXIgc2VydmVyPykgIEhvdyBjYW4geW91XG4gKiBlbnN1cmUgdGhhdCB5b3UgZGlkbid0IGFjY2lkZW50YWxseSBkZWxldGUgdGhlIGxpbmUgdGhhdCBzYW5pdGl6ZWQgdGhlIHZhbHVlLCBvciByZW5hbWVkIHNvbWVcbiAqIHByb3BlcnRpZXMvZmllbGRzIGFuZCBmb3Jnb3QgdG8gdXBkYXRlIHRoZSBiaW5kaW5nIHRvIHRoZSBzYW5pdGl6ZWQgdmFsdWU/XG4gKlxuICogVG8gYmUgc2VjdXJlIGJ5IGRlZmF1bHQsIEFuZ3VsYXJKUyBtYWtlcyBzdXJlIGJpbmRpbmdzIGdvIHRocm91Z2ggdGhhdCBzYW5pdGl6YXRpb24sIG9yXG4gKiBhbnkgc2ltaWxhciB2YWxpZGF0aW9uIHByb2Nlc3MsIHVubGVzcyB0aGVyZSdzIGEgZ29vZCByZWFzb24gdG8gdHJ1c3QgdGhlIGdpdmVuIHZhbHVlIGluIHRoaXNcbiAqIGNvbnRleHQuICBUaGF0IHRydXN0IGlzIGZvcm1hbGl6ZWQgd2l0aCBhIGZ1bmN0aW9uIGNhbGwuIFRoaXMgbWVhbnMgdGhhdCBhcyBhIGRldmVsb3BlciwgeW91XG4gKiBjYW4gYXNzdW1lIGFsbCB1bnRydXN0ZWQgYmluZGluZ3MgYXJlIHNhZmUuIFRoZW4sIHRvIGF1ZGl0IHlvdXIgY29kZSBmb3IgYmluZGluZyBzZWN1cml0eSBpc3N1ZXMsXG4gKiB5b3UganVzdCBuZWVkIHRvIGVuc3VyZSB0aGUgdmFsdWVzIHlvdSBtYXJrIGFzIHRydXN0ZWQgaW5kZWVkIGFyZSBzYWZlIC0gYmVjYXVzZSB0aGV5IHdlcmVcbiAqIHJlY2VpdmVkIGZyb20geW91ciBzZXJ2ZXIsIHNhbml0aXplZCBieSB5b3VyIGxpYnJhcnksIGV0Yy4gWW91IGNhbiBvcmdhbml6ZSB5b3VyIGNvZGViYXNlIHRvXG4gKiBoZWxwIHdpdGggdGhpcyAtIHBlcmhhcHMgYWxsb3dpbmcgb25seSB0aGUgZmlsZXMgaW4gYSBzcGVjaWZpYyBkaXJlY3RvcnkgdG8gZG8gdGhpcy5cbiAqIEVuc3VyaW5nIHRoYXQgdGhlIGludGVybmFsIEFQSSBleHBvc2VkIGJ5IHRoYXQgY29kZSBkb2Vzbid0IG1hcmt1cCBhcmJpdHJhcnkgdmFsdWVzIGFzIHNhZmUgdGhlblxuICogYmVjb21lcyBhIG1vcmUgbWFuYWdlYWJsZSB0YXNrLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIEFuZ3VsYXJKUycgU0NFIHNlcnZpY2UsIG9uZSB1c2VzIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfVxuICogKGFuZCBzaG9ydGhhbmQgbWV0aG9kcyBzdWNoIGFzIHtAbGluayBuZy4kc2NlI3RydXN0QXNIdG1sICRzY2UudHJ1c3RBc0h0bWx9LCBldGMuKSB0b1xuICogYnVpbGQgdGhlIHRydXN0ZWQgdmVyc2lvbnMgb2YgeW91ciB2YWx1ZXMuXG4gKlxuICogIyMjIEhvdyBkb2VzIGl0IHdvcms/XG4gKlxuICogSW4gcHJpdmlsZWdlZCBjb250ZXh0cywgZGlyZWN0aXZlcyBhbmQgY29kZSB3aWxsIGJpbmQgdG8gdGhlIHJlc3VsdCBvZiB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkXG4gKiAkc2NlLmdldFRydXN0ZWQoY29udGV4dCwgdmFsdWUpfSByYXRoZXIgdGhhbiB0byB0aGUgdmFsdWUgZGlyZWN0bHkuICBUaGluayBvZiB0aGlzIGZ1bmN0aW9uIGFzXG4gKiBhIHdheSB0byBlbmZvcmNlIHRoZSByZXF1aXJlZCBzZWN1cml0eSBjb250ZXh0IGluIHlvdXIgZGF0YSBzaW5rLiBEaXJlY3RpdmVzIHVzZSB7QGxpbmtcbiAqIG5nLiRzY2UjcGFyc2VBcyAkc2NlLnBhcnNlQXN9IHJhdGhlciB0aGFuIGAkcGFyc2VgIHRvIHdhdGNoIGF0dHJpYnV0ZSBiaW5kaW5ncywgd2hpY2ggcGVyZm9ybXNcbiAqIHRoZSB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZH0gYmVoaW5kIHRoZSBzY2VuZXMgb24gbm9uLWNvbnN0YW50IGxpdGVyYWxzLiBBbHNvLFxuICogd2hlbiBiaW5kaW5nIHdpdGhvdXQgZGlyZWN0aXZlcywgQW5ndWxhckpTIHdpbGwgdW5kZXJzdGFuZCB0aGUgY29udGV4dCBvZiB5b3VyIGJpbmRpbmdzXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEFzIGFuIGV4YW1wbGUsIHtAbGluayBuZy5kaXJlY3RpdmU6bmdCaW5kSHRtbCBuZ0JpbmRIdG1sfSB1c2VzIHtAbGlua1xuICogbmcuJHNjZSNwYXJzZUFzSHRtbCAkc2NlLnBhcnNlQXNIdG1sKGJpbmRpbmcgZXhwcmVzc2lvbil9LiAgSGVyZSdzIHRoZSBhY3R1YWwgY29kZSAoc2xpZ2h0bHlcbiAqIHNpbXBsaWZpZWQpOlxuICpcbiAqIGBgYFxuICogdmFyIG5nQmluZEh0bWxEaXJlY3RpdmUgPSBbJyRzY2UnLCBmdW5jdGlvbigkc2NlKSB7XG4gKiAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICogICAgIHNjb3BlLiR3YXRjaCgkc2NlLnBhcnNlQXNIdG1sKGF0dHIubmdCaW5kSHRtbCksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gKiAgICAgICBlbGVtZW50Lmh0bWwodmFsdWUgfHwgJycpO1xuICogICAgIH0pO1xuICogICB9O1xuICogfV07XG4gKiBgYGBcbiAqXG4gKiAjIyMgSW1wYWN0IG9uIGxvYWRpbmcgdGVtcGxhdGVzXG4gKlxuICogVGhpcyBhcHBsaWVzIGJvdGggdG8gdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbmNsdWRlIGBuZy1pbmNsdWRlYH0gZGlyZWN0aXZlIGFzIHdlbGwgYXNcbiAqIGB0ZW1wbGF0ZVVybGAncyBzcGVjaWZpZWQgYnkge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS5cbiAqXG4gKiBCeSBkZWZhdWx0LCBBbmd1bGFySlMgb25seSBsb2FkcyB0ZW1wbGF0ZXMgZnJvbSB0aGUgc2FtZSBkb21haW4gYW5kIHByb3RvY29sIGFzIHRoZSBhcHBsaWNhdGlvblxuICogZG9jdW1lbnQuICBUaGlzIGlzIGRvbmUgYnkgY2FsbGluZyB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmxcbiAqICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsfSBvbiB0aGUgdGVtcGxhdGUgVVJMLiAgVG8gbG9hZCB0ZW1wbGF0ZXMgZnJvbSBvdGhlciBkb21haW5zIGFuZC9vclxuICogcHJvdG9jb2xzLCB5b3UgbWF5IGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0XG4gKiB0aGVtfSBvciB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmwgd3JhcCBpdH0gaW50byBhIHRydXN0ZWQgdmFsdWUuXG4gKlxuICogKlBsZWFzZSBub3RlKjpcbiAqIFRoZSBicm93c2VyJ3NcbiAqIFtTYW1lIE9yaWdpbiBQb2xpY3ldKGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYnJvd3NlcnNlYy93aWtpL1BhcnQyI1NhbWUtb3JpZ2luX3BvbGljeV9mb3JfWE1MSHR0cFJlcXVlc3QpXG4gKiBhbmQgW0Nyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nIChDT1JTKV0oaHR0cDovL3d3dy53My5vcmcvVFIvY29ycy8pXG4gKiBwb2xpY3kgYXBwbHkgaW4gYWRkaXRpb24gdG8gdGhpcyBhbmQgbWF5IGZ1cnRoZXIgcmVzdHJpY3Qgd2hldGhlciB0aGUgdGVtcGxhdGUgaXMgc3VjY2Vzc2Z1bGx5XG4gKiBsb2FkZWQuICBUaGlzIG1lYW5zIHRoYXQgd2l0aG91dCB0aGUgcmlnaHQgQ09SUyBwb2xpY3ksIGxvYWRpbmcgdGVtcGxhdGVzIGZyb20gYSBkaWZmZXJlbnQgZG9tYWluXG4gKiB3b24ndCB3b3JrIG9uIGFsbCBicm93c2Vycy4gIEFsc28sIGxvYWRpbmcgdGVtcGxhdGVzIGZyb20gYGZpbGU6Ly9gIFVSTCBkb2VzIG5vdCB3b3JrIG9uIHNvbWVcbiAqIGJyb3dzZXJzLlxuICpcbiAqICMjIyBUaGlzIGZlZWxzIGxpa2UgdG9vIG11Y2ggb3ZlcmhlYWRcbiAqXG4gKiBJdCdzIGltcG9ydGFudCB0byByZW1lbWJlciB0aGF0IFNDRSBvbmx5IGFwcGxpZXMgdG8gaW50ZXJwb2xhdGlvbiBleHByZXNzaW9ucy5cbiAqXG4gKiBJZiB5b3VyIGV4cHJlc3Npb25zIGFyZSBjb25zdGFudCBsaXRlcmFscywgdGhleSdyZSBhdXRvbWF0aWNhbGx5IHRydXN0ZWQgYW5kIHlvdSBkb24ndCBuZWVkIHRvXG4gKiBjYWxsIGAkc2NlLnRydXN0QXNgIG9uIHRoZW0gKGUuZy5cbiAqIGA8ZGl2IG5nLWJpbmQtaHRtbD1cIic8Yj5pbXBsaWNpdGx5IHRydXN0ZWQ8L2I+J1wiPjwvZGl2PmApIGp1c3Qgd29ya3MuIFRoZSBgJHNjZURlbGVnYXRlYCB3aWxsXG4gKiBhbHNvIHVzZSB0aGUgYCRzYW5pdGl6ZWAgc2VydmljZSBpZiBpdCBpcyBhdmFpbGFibGUgd2hlbiBiaW5kaW5nIHVudHJ1c3RlZCB2YWx1ZXMgdG9cbiAqIGAkc2NlLkhUTUxgIGNvbnRleHQuIEFuZ3VsYXJKUyBwcm92aWRlcyBhbiBpbXBsZW1lbnRhdGlvbiBpbiBgYW5ndWxhci1zYW5pdGl6ZS5qc2AsIGFuZCBpZiB5b3VcbiAqIHdpc2ggdG8gdXNlIGl0LCB5b3Ugd2lsbCBhbHNvIG5lZWQgdG8gZGVwZW5kIG9uIHRoZSB7QGxpbmsgbmdTYW5pdGl6ZSBgbmdTYW5pdGl6ZWB9IG1vZHVsZSBpblxuICogeW91ciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBUaGUgaW5jbHVkZWQge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSAkc2NlRGVsZWdhdGV9IGNvbWVzIHdpdGggc2FuZSBkZWZhdWx0cyB0byBhbGxvdyB5b3UgdG8gbG9hZFxuICogdGVtcGxhdGVzIGluIGBuZy1pbmNsdWRlYCBmcm9tIHlvdXIgYXBwbGljYXRpb24ncyBkb21haW4gd2l0aG91dCBoYXZpbmcgdG8gZXZlbiBrbm93IGFib3V0IFNDRS5cbiAqIEl0IGJsb2NrcyBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgbG9hZGluZyB0ZW1wbGF0ZXMgb3ZlciBodHRwIGZyb20gYW4gaHR0cHNcbiAqIHNlcnZlZCBkb2N1bWVudC4gIFlvdSBjYW4gY2hhbmdlIHRoZXNlIGJ5IHNldHRpbmcgeW91ciBvd24gY3VzdG9tIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0c30gYW5kIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgYmxhY2tsaXN0c30gZm9yIG1hdGNoaW5nIHN1Y2ggVVJMcy5cbiAqXG4gKiBUaGlzIHNpZ25pZmljYW50bHkgcmVkdWNlcyB0aGUgb3ZlcmhlYWQuICBJdCBpcyBmYXIgZWFzaWVyIHRvIHBheSB0aGUgc21hbGwgb3ZlcmhlYWQgYW5kIGhhdmUgYW5cbiAqIGFwcGxpY2F0aW9uIHRoYXQncyBzZWN1cmUgYW5kIGNhbiBiZSBhdWRpdGVkIHRvIHZlcmlmeSB0aGF0IHdpdGggbXVjaCBtb3JlIGVhc2UgdGhhbiBib2x0aW5nXG4gKiBzZWN1cml0eSBvbnRvIGFuIGFwcGxpY2F0aW9uIGxhdGVyLlxuICpcbiAqIDxhIG5hbWU9XCJjb250ZXh0c1wiPjwvYT5cbiAqICMjIyBXaGF0IHRydXN0ZWQgY29udGV4dCB0eXBlcyBhcmUgc3VwcG9ydGVkP1xuICpcbiAqIHwgQ29udGV4dCAgICAgICAgICAgICB8IE5vdGVzICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgYCRzY2UuSFRNTGAgICAgICAgICB8IEZvciBIVE1MIHRoYXQncyBzYWZlIHRvIHNvdXJjZSBpbnRvIHRoZSBhcHBsaWNhdGlvbi4gIFRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQmluZEh0bWwgbmdCaW5kSHRtbH0gZGlyZWN0aXZlIHVzZXMgdGhpcyBjb250ZXh0IGZvciBiaW5kaW5ncy4gSWYgYW4gdW5zYWZlIHZhbHVlIGlzIGVuY291bnRlcmVkLCBhbmQgdGhlIHtAbGluayBuZ1Nhbml0aXplLiRzYW5pdGl6ZSAkc2FuaXRpemV9IHNlcnZpY2UgaXMgYXZhaWxhYmxlIChpbXBsZW1lbnRlZCBieSB0aGUge0BsaW5rIG5nU2FuaXRpemUgbmdTYW5pdGl6ZX0gbW9kdWxlKSB0aGlzIHdpbGwgc2FuaXRpemUgdGhlIHZhbHVlIGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IuIHxcbiAqIHwgYCRzY2UuQ1NTYCAgICAgICAgICB8IEZvciBDU1MgdGhhdCdzIHNhZmUgdG8gc291cmNlIGludG8gdGhlIGFwcGxpY2F0aW9uLiAgQ3VycmVudGx5LCBubyBiaW5kaW5ncyByZXF1aXJlIHRoaXMgY29udGV4dC4gRmVlbCBmcmVlIHRvIHVzZSBpdCBpbiB5b3VyIG93biBkaXJlY3RpdmVzLiB8XG4gKiB8IGAkc2NlLlVSTGAgICAgICAgICAgfCBGb3IgVVJMcyB0aGF0IGFyZSBzYWZlIHRvIGZvbGxvdyBhcyBsaW5rcy4gIEN1cnJlbnRseSB1bnVzZWQgKGA8YSBocmVmPWAsIGA8aW1nIHNyYz1gLCBhbmQgc29tZSBvdGhlcnMgc2FuaXRpemUgdGhlaXIgdXJscyBhbmQgZG9uJ3QgY29uc3RpdHV0ZSBhbiBTQ0UgY29udGV4dC4pIHxcbiAqIHwgYCRzY2UuUkVTT1VSQ0VfVVJMYCB8IEZvciBVUkxzIHRoYXQgYXJlIG5vdCBvbmx5IHNhZmUgdG8gZm9sbG93IGFzIGxpbmtzLCBidXQgd2hvc2UgY29udGVudHMgYXJlIGFsc28gc2FmZSB0byBpbmNsdWRlIGluIHlvdXIgYXBwbGljYXRpb24uICBFeGFtcGxlcyBpbmNsdWRlIGBuZy1pbmNsdWRlYCwgYHNyY2AgLyBgbmdTcmNgIGJpbmRpbmdzIGZvciB0YWdzIG90aGVyIHRoYW4gYElNR2AsIGBWSURFT2AsIGBBVURJT2AsIGBTT1VSQ0VgLCBhbmQgYFRSQUNLYCAoZS5nLiBgSUZSQU1FYCwgYE9CSkVDVGAsIGV0Yy4pICA8YnI+PGJyPk5vdGUgdGhhdCBgJHNjZS5SRVNPVVJDRV9VUkxgIG1ha2VzIGEgc3Ryb25nZXIgc3RhdGVtZW50IGFib3V0IHRoZSBVUkwgdGhhbiBgJHNjZS5VUkxgIGRvZXMgKGl0J3Mgbm90IGp1c3QgdGhlIFVSTCB0aGF0IG1hdHRlcnMsIGJ1dCBhbHNvIHdoYXQgaXMgYXQgdGhlIGVuZCBvZiBpdCksIGFuZCB0aGVyZWZvcmUgY29udGV4dHMgcmVxdWlyaW5nIHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5SRVNPVVJDRV9VUkxgIGNhbiBiZSB1c2VkIGFueXdoZXJlIHRoYXQgdmFsdWVzIHRydXN0ZWQgZm9yIGAkc2NlLlVSTGAgYXJlIHJlcXVpcmVkLiB8XG4gKiB8IGAkc2NlLkpTYCAgICAgICAgICAgfCBGb3IgSmF2YVNjcmlwdCB0aGF0IGlzIHNhZmUgdG8gZXhlY3V0ZSBpbiB5b3VyIGFwcGxpY2F0aW9uJ3MgY29udGV4dC4gIEN1cnJlbnRseSwgbm8gYmluZGluZ3MgcmVxdWlyZSB0aGlzIGNvbnRleHQuICBGZWVsIGZyZWUgdG8gdXNlIGl0IGluIHlvdXIgb3duIGRpcmVjdGl2ZXMuIHxcbiAqXG4gKlxuICogQmUgYXdhcmUgdGhhdCBgYVtocmVmXWAgYW5kIGBpbWdbc3JjXWAgYXV0b21hdGljYWxseSBzYW5pdGl6ZSB0aGVpciBVUkxzIGFuZCBkbyBub3QgcGFzcyB0aGVtXG4gKiB0aHJvdWdoIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkfS4gVGhlcmUncyBubyBDU1MtLCBVUkwtLCBvciBKUy1jb250ZXh0IGJpbmRpbmdzXG4gKiBpbiBBbmd1bGFySlMgY3VycmVudGx5LCBzbyB0aGVpciBjb3JyZXNwb25kaW5nIGAkc2NlLnRydXN0QXNgIGZ1bmN0aW9ucyBhcmVuJ3QgdXNlZnVsIHlldC4gVGhpc1xuICogbWlnaHQgZXZvbHZlLlxuICpcbiAqICMjIyBGb3JtYXQgb2YgaXRlbXMgaW4ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHJlc291cmNlVXJsV2hpdGVsaXN0fS97QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgQmxhY2tsaXN0fSA8YSBuYW1lPVwicmVzb3VyY2VVcmxQYXR0ZXJuSXRlbVwiPjwvYT5cbiAqXG4gKiAgRWFjaCBlbGVtZW50IGluIHRoZXNlIGFycmF5cyBtdXN0IGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nOlxuICpcbiAqICAtICoqJ3NlbGYnKipcbiAqICAgIC0gVGhlIHNwZWNpYWwgKipzdHJpbmcqKiwgYCdzZWxmJ2AsIGNhbiBiZSB1c2VkIHRvIG1hdGNoIGFnYWluc3QgYWxsIFVSTHMgb2YgdGhlICoqc2FtZVxuICogICAgICBkb21haW4qKiBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQgdXNpbmcgdGhlICoqc2FtZSBwcm90b2NvbCoqLlxuICogIC0gKipTdHJpbmcqKiAoZXhjZXB0IHRoZSBzcGVjaWFsIHZhbHVlIGAnc2VsZidgKVxuICogICAgLSBUaGUgc3RyaW5nIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgZnVsbCAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlXG4gKiAgICAgIGJlaW5nIHRlc3RlZCAoc3Vic3RyaW5nIG1hdGNoZXMgYXJlIG5vdCBnb29kIGVub3VnaC4pXG4gKiAgICAtIFRoZXJlIGFyZSBleGFjdGx5ICoqdHdvIHdpbGRjYXJkIHNlcXVlbmNlcyoqIC0gYCpgIGFuZCBgKipgLiAgQWxsIG90aGVyIGNoYXJhY3RlcnNcbiAqICAgICAgbWF0Y2ggdGhlbXNlbHZlcy5cbiAqICAgIC0gYCpgOiBtYXRjaGVzIHplcm8gb3IgbW9yZSBvY2N1cnJlbmNlcyBvZiBhbnkgY2hhcmFjdGVyIG90aGVyIHRoYW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgNlxuICogICAgICBjaGFyYWN0ZXJzOiAnYDpgJywgJ2AvYCcsICdgLmAnLCAnYD9gJywgJ2AmYCcgYW5kICdgO2AnLiAgSXQncyBhIHVzZWZ1bCB3aWxkY2FyZCBmb3IgdXNlXG4gKiAgICAgIGluIGEgd2hpdGVsaXN0LlxuICogICAgLSBgKipgOiBtYXRjaGVzIHplcm8gb3IgbW9yZSBvY2N1cnJlbmNlcyBvZiAqYW55KiBjaGFyYWN0ZXIuICBBcyBzdWNoLCBpdCdzIG5vdFxuICogICAgICBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIGEgc2NoZW1lLCBkb21haW4sIGV0Yy4gYXMgaXQgd291bGQgbWF0Y2ggdG9vIG11Y2guICAoZS5nLlxuICogICAgICBodHRwOi8vKiouZXhhbXBsZS5jb20vIHdvdWxkIG1hdGNoIGh0dHA6Ly9ldmlsLmNvbS8/aWdub3JlPS5leGFtcGxlLmNvbS8gYW5kIHRoYXQgbWlnaHRcbiAqICAgICAgbm90IGhhdmUgYmVlbiB0aGUgaW50ZW50aW9uLikgIEl0cyB1c2FnZSBhdCB0aGUgdmVyeSBlbmQgb2YgdGhlIHBhdGggaXMgb2suICAoZS5nLlxuICogICAgICBodHRwOi8vZm9vLmV4YW1wbGUuY29tL3RlbXBsYXRlcy8qKikuXG4gKiAgLSAqKlJlZ0V4cCoqICgqc2VlIGNhdmVhdCBiZWxvdyopXG4gKiAgICAtICpDYXZlYXQqOiAgV2hpbGUgcmVndWxhciBleHByZXNzaW9ucyBhcmUgcG93ZXJmdWwgYW5kIG9mZmVyIGdyZWF0IGZsZXhpYmlsaXR5LCAgdGhlaXIgc3ludGF4XG4gKiAgICAgIChhbmQgYWxsIHRoZSBpbmV2aXRhYmxlIGVzY2FwaW5nKSBtYWtlcyB0aGVtICpoYXJkZXIgdG8gbWFpbnRhaW4qLiAgSXQncyBlYXN5IHRvXG4gKiAgICAgIGFjY2lkZW50YWxseSBpbnRyb2R1Y2UgYSBidWcgd2hlbiBvbmUgdXBkYXRlcyBhIGNvbXBsZXggZXhwcmVzc2lvbiAoaW1obywgYWxsIHJlZ2V4ZXMgc2hvdWxkXG4gKiAgICAgIGhhdmUgZ29vZCB0ZXN0IGNvdmVyYWdlKS4gIEZvciBpbnN0YW5jZSwgdGhlIHVzZSBvZiBgLmAgaW4gdGhlIHJlZ2V4IGlzIGNvcnJlY3Qgb25seSBpbiBhXG4gKiAgICAgIHNtYWxsIG51bWJlciBvZiBjYXNlcy4gIEEgYC5gIGNoYXJhY3RlciBpbiB0aGUgcmVnZXggdXNlZCB3aGVuIG1hdGNoaW5nIHRoZSBzY2hlbWUgb3IgYVxuICogICAgICBzdWJkb21haW4gY291bGQgYmUgbWF0Y2hlZCBhZ2FpbnN0IGEgYDpgIG9yIGxpdGVyYWwgYC5gIHRoYXQgd2FzIGxpa2VseSBub3QgaW50ZW5kZWQuICAgSXRcbiAqICAgICAgaXMgaGlnaGx5IHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgc3RyaW5nIHBhdHRlcm5zIGFuZCBvbmx5IGZhbGwgYmFjayB0byByZWd1bGFyIGV4cHJlc3Npb25zXG4gKiAgICAgIGFzIGEgbGFzdCByZXNvcnQuXG4gKiAgICAtIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBSZWdFeHAgKGkuZS4gbm90IGEgc3RyaW5nLikgIEl0IGlzXG4gKiAgICAgIG1hdGNoZWQgYWdhaW5zdCB0aGUgKiplbnRpcmUqKiAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlIGJlaW5nIHRlc3RlZFxuICogICAgICAoZXZlbiB3aGVuIHRoZSBSZWdFeHAgZGlkIG5vdCBoYXZlIHRoZSBgXmAgYW5kIGAkYCBjb2Rlcy4pICBJbiBhZGRpdGlvbiwgYW55IGZsYWdzXG4gKiAgICAgIHByZXNlbnQgb24gdGhlIFJlZ0V4cCAoc3VjaCBhcyBtdWx0aWxpbmUsIGdsb2JhbCwgaWdub3JlQ2FzZSkgYXJlIGlnbm9yZWQuXG4gKiAgICAtIElmIHlvdSBhcmUgZ2VuZXJhdGluZyB5b3VyIEphdmFTY3JpcHQgZnJvbSBzb21lIG90aGVyIHRlbXBsYXRpbmcgZW5naW5lIChub3RcbiAqICAgICAgcmVjb21tZW5kZWQsIGUuZy4gaW4gaXNzdWUgWyM0MDA2XShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy80MDA2KSksXG4gKiAgICAgIHJlbWVtYmVyIHRvIGVzY2FwZSB5b3VyIHJlZ3VsYXIgZXhwcmVzc2lvbiAoYW5kIGJlIGF3YXJlIHRoYXQgeW91IG1pZ2h0IG5lZWQgbW9yZSB0aGFuXG4gKiAgICAgIG9uZSBsZXZlbCBvZiBlc2NhcGluZyBkZXBlbmRpbmcgb24geW91ciB0ZW1wbGF0aW5nIGVuZ2luZSBhbmQgdGhlIHdheSB5b3UgaW50ZXJwb2xhdGVkXG4gKiAgICAgIHRoZSB2YWx1ZS4pICBEbyBtYWtlIHVzZSBvZiB5b3VyIHBsYXRmb3JtJ3MgZXNjYXBpbmcgbWVjaGFuaXNtIGFzIGl0IG1pZ2h0IGJlIGdvb2RcbiAqICAgICAgZW5vdWdoIGJlZm9yZSBjb2RpbmcgeW91ciBvd24uICBFLmcuIFJ1YnkgaGFzXG4gKiAgICAgIFtSZWdleHAuZXNjYXBlKHN0cildKGh0dHA6Ly93d3cucnVieS1kb2Mub3JnL2NvcmUtMi4wLjAvUmVnZXhwLmh0bWwjbWV0aG9kLWMtZXNjYXBlKVxuICogICAgICBhbmQgUHl0aG9uIGhhcyBbcmUuZXNjYXBlXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvcmUuaHRtbCNyZS5lc2NhcGUpLlxuICogICAgICBKYXZhc2NyaXB0IGxhY2tzIGEgc2ltaWxhciBidWlsdCBpbiBmdW5jdGlvbiBmb3IgZXNjYXBpbmcuICBUYWtlIGEgbG9vayBhdCBHb29nbGVcbiAqICAgICAgQ2xvc3VyZSBsaWJyYXJ5J3MgW2dvb2cuc3RyaW5nLnJlZ0V4cEVzY2FwZShzKV0oXG4gKiAgICAgIGh0dHA6Ly9kb2NzLmNsb3N1cmUtbGlicmFyeS5nb29nbGVjb2RlLmNvbS9naXQvY2xvc3VyZV9nb29nX3N0cmluZ19zdHJpbmcuanMuc291cmNlLmh0bWwjbGluZTk2MikuXG4gKlxuICogUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBmb3IgYW4gZXhhbXBsZS5cbiAqXG4gKiAjIyMgU2hvdyBtZSBhbiBleGFtcGxlIHVzaW5nIFNDRS5cbiAqXG4gKiA8ZXhhbXBsZSBtb2R1bGU9XCJteVNjZUFwcFwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCIgbmFtZT1cInNjZS1zZXJ2aWNlXCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJBcHBDb250cm9sbGVyIGFzIG15Q3RybFwiPlxuICogICAgIDxpIG5nLWJpbmQtaHRtbD1cIm15Q3RybC5leHBsaWNpdGx5VHJ1c3RlZEh0bWxcIiBpZD1cImV4cGxpY2l0bHlUcnVzdGVkSHRtbFwiPjwvaT48YnI+PGJyPlxuICogICAgIDxiPlVzZXIgY29tbWVudHM8L2I+PGJyPlxuICogICAgIEJ5IGRlZmF1bHQsIEhUTUwgdGhhdCBpc24ndCBleHBsaWNpdGx5IHRydXN0ZWQgKGUuZy4gQWxpY2UncyBjb21tZW50KSBpcyBzYW5pdGl6ZWQgd2hlblxuICogICAgICRzYW5pdGl6ZSBpcyBhdmFpbGFibGUuICBJZiAkc2FuaXRpemUgaXNuJ3QgYXZhaWxhYmxlLCB0aGlzIHJlc3VsdHMgaW4gYW4gZXJyb3IgaW5zdGVhZCBvZiBhblxuICogICAgIGV4cGxvaXQuXG4gKiAgICAgPGRpdiBjbGFzcz1cIndlbGxcIj5cbiAqICAgICAgIDxkaXYgbmctcmVwZWF0PVwidXNlckNvbW1lbnQgaW4gbXlDdHJsLnVzZXJDb21tZW50c1wiPlxuICogICAgICAgICA8Yj57e3VzZXJDb21tZW50Lm5hbWV9fTwvYj46XG4gKiAgICAgICAgIDxzcGFuIG5nLWJpbmQtaHRtbD1cInVzZXJDb21tZW50Lmh0bWxDb21tZW50XCIgY2xhc3M9XCJodG1sQ29tbWVudFwiPjwvc3Bhbj5cbiAqICAgICAgICAgPGJyPlxuICogICAgICAgPC9kaXY+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9maWxlPlxuICpcbiAqIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAqICAgYW5ndWxhci5tb2R1bGUoJ215U2NlQXBwJywgWyduZ1Nhbml0aXplJ10pXG4gKiAgICAgLmNvbnRyb2xsZXIoJ0FwcENvbnRyb2xsZXInLCBbJyRodHRwJywgJyR0ZW1wbGF0ZUNhY2hlJywgJyRzY2UnLFxuICogICAgICAgZnVuY3Rpb24gQXBwQ29udHJvbGxlcigkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRzY2UpIHtcbiAqICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICogICAgICAgICAkaHR0cC5nZXQoJ3Rlc3RfZGF0YS5qc29uJywge2NhY2hlOiAkdGVtcGxhdGVDYWNoZX0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAqICAgICAgICAgICBzZWxmLnVzZXJDb21tZW50cyA9IHJlc3BvbnNlLmRhdGE7XG4gKiAgICAgICAgIH0pO1xuICogICAgICAgICBzZWxmLmV4cGxpY2l0bHlUcnVzdGVkSHRtbCA9ICRzY2UudHJ1c3RBc0h0bWwoXG4gKiAgICAgICAgICAgICAnPHNwYW4gb25tb3VzZW92ZXI9XCJ0aGlzLnRleHRDb250ZW50PSZxdW90O0V4cGxpY2l0bHkgdHJ1c3RlZCBIVE1MIGJ5cGFzc2VzICcgK1xuICogICAgICAgICAgICAgJ3Nhbml0aXphdGlvbi4mcXVvdDtcIj5Ib3ZlciBvdmVyIHRoaXMgdGV4dC48L3NwYW4+Jyk7XG4gKiAgICAgICB9XSk7XG4gKiA8L2ZpbGU+XG4gKlxuICogPGZpbGUgbmFtZT1cInRlc3RfZGF0YS5qc29uXCI+XG4gKiBbXG4gKiAgIHsgXCJuYW1lXCI6IFwiQWxpY2VcIixcbiAqICAgICBcImh0bWxDb21tZW50XCI6XG4gKiAgICAgICAgIFwiPHNwYW4gb25tb3VzZW92ZXI9J3RoaXMudGV4dENvbnRlbnQ9XFxcIlBXTjNEIVxcXCInPklzIDxpPmFueW9uZTwvaT4gcmVhZGluZyB0aGlzPzwvc3Bhbj5cIlxuICogICB9LFxuICogICB7IFwibmFtZVwiOiBcIkJvYlwiLFxuICogICAgIFwiaHRtbENvbW1lbnRcIjogXCI8aT5ZZXMhPC9pPiAgQW0gSSB0aGUgb25seSBvdGhlciBvbmU/XCJcbiAqICAgfVxuICogXVxuICogPC9maWxlPlxuICpcbiAqIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgZGVzY3JpYmUoJ1NDRSBkb2MgZGVtbycsIGZ1bmN0aW9uKCkge1xuICogICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdW50cnVzdGVkIHZhbHVlcycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnLmh0bWxDb21tZW50JykpLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdpbm5lckhUTUwnKSlcbiAqICAgICAgICAgICAudG9CZSgnPHNwYW4+SXMgPGk+YW55b25lPC9pPiByZWFkaW5nIHRoaXM/PC9zcGFuPicpO1xuICogICAgIH0pO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIE5PVCBzYW5pdGl6ZSBleHBsaWNpdGx5IHRydXN0ZWQgdmFsdWVzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZXhwbGljaXRseVRydXN0ZWRIdG1sJykpLmdldEF0dHJpYnV0ZSgnaW5uZXJIVE1MJykpLnRvQmUoXG4gKiAgICAgICAgICAgJzxzcGFuIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD0mcXVvdDtFeHBsaWNpdGx5IHRydXN0ZWQgSFRNTCBieXBhc3NlcyAnICtcbiAqICAgICAgICAgICAnc2FuaXRpemF0aW9uLiZxdW90O1wiPkhvdmVyIG92ZXIgdGhpcyB0ZXh0Ljwvc3Bhbj4nKTtcbiAqICAgICB9KTtcbiAqICAgfSk7XG4gKiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqXG4gKiAjIyBDYW4gSSBkaXNhYmxlIFNDRSBjb21wbGV0ZWx5P1xuICpcbiAqIFllcywgeW91IGNhbi4gIEhvd2V2ZXIsIHRoaXMgaXMgc3Ryb25nbHkgZGlzY291cmFnZWQuICBTQ0UgZ2l2ZXMgeW91IGEgbG90IG9mIHNlY3VyaXR5IGJlbmVmaXRzXG4gKiBmb3IgbGl0dGxlIGNvZGluZyBvdmVyaGVhZC4gIEl0IHdpbGwgYmUgbXVjaCBoYXJkZXIgdG8gdGFrZSBhbiBTQ0UgZGlzYWJsZWQgYXBwbGljYXRpb24gYW5kXG4gKiBlaXRoZXIgc2VjdXJlIGl0IG9uIHlvdXIgb3duIG9yIGVuYWJsZSBTQ0UgYXQgYSBsYXRlciBzdGFnZS4gIEl0IG1pZ2h0IG1ha2Ugc2Vuc2UgdG8gZGlzYWJsZSBTQ0VcbiAqIGZvciBjYXNlcyB3aGVyZSB5b3UgaGF2ZSBhIGxvdCBvZiBleGlzdGluZyBjb2RlIHRoYXQgd2FzIHdyaXR0ZW4gYmVmb3JlIFNDRSB3YXMgaW50cm9kdWNlZCBhbmRcbiAqIHlvdSdyZSBtaWdyYXRpbmcgdGhlbSBhIG1vZHVsZSBhdCBhIHRpbWUuIEFsc28gZG8gbm90ZSB0aGF0IHRoaXMgaXMgYW4gYXBwLXdpZGUgc2V0dGluZywgc28gaWZcbiAqIHlvdSBhcmUgd3JpdGluZyBhIGxpYnJhcnksIHlvdSB3aWxsIGNhdXNlIHNlY3VyaXR5IGJ1Z3MgYXBwbGljYXRpb25zIHVzaW5nIGl0LlxuICpcbiAqIFRoYXQgc2FpZCwgaGVyZSdzIGhvdyB5b3UgY2FuIGNvbXBsZXRlbHkgZGlzYWJsZSBTQ0U6XG4gKlxuICogYGBgXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHBXaXRoU2NlRGlzYWJsZWRteUFwcCcsIFtdKS5jb25maWcoZnVuY3Rpb24oJHNjZVByb3ZpZGVyKSB7XG4gKiAgIC8vIENvbXBsZXRlbHkgZGlzYWJsZSBTQ0UuICBGb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IVxuICogICAvLyBEbyBub3QgdXNlIGluIG5ldyBwcm9qZWN0cyBvciBsaWJyYXJpZXMuXG4gKiAgICRzY2VQcm92aWRlci5lbmFibGVkKGZhbHNlKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICovXG5cbmZ1bmN0aW9uICRTY2VQcm92aWRlcigpIHtcbiAgdmFyIGVuYWJsZWQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRzY2VQcm92aWRlciNlbmFibGVkXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHZhbHVlIElmIHByb3ZpZGVkLCB0aGVuIGVuYWJsZXMvZGlzYWJsZXMgU0NFIGFwcGxpY2F0aW9uLXdpZGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgU0NFIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEVuYWJsZXMvZGlzYWJsZXMgU0NFIGFuZCByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgKi9cbiAgdGhpcy5lbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgZW5hYmxlZCA9ICEhdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBlbmFibGVkO1xuICB9O1xuXG5cbiAgLyogRGVzaWduIG5vdGVzIG9uIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGZvciBTQ0UuXG4gICAqXG4gICAqIFRoZSBBUEkgY29udHJhY3QgZm9yIHRoZSBTQ0UgZGVsZWdhdGVcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBUaGUgU0NFIGRlbGVnYXRlIG9iamVjdCBtdXN0IHByb3ZpZGUgdGhlIGZvbGxvd2luZyAzIG1ldGhvZHM6XG4gICAqXG4gICAqIC0gdHJ1c3RBcyhjb250ZXh0RW51bSwgdmFsdWUpXG4gICAqICAgICBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHRlbGwgdGhlIFNDRSBzZXJ2aWNlIHRoYXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIE9LIHRvIHVzZSBpbiB0aGVcbiAgICogICAgIGNvbnRleHRzIHNwZWNpZmllZCBieSBjb250ZXh0RW51bS4gIEl0IG11c3QgcmV0dXJuIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgYWNjZXB0ZWQgYnlcbiAgICogICAgIGdldFRydXN0ZWQoKSBmb3IgYSBjb21wYXRpYmxlIGNvbnRleHRFbnVtIGFuZCByZXR1cm4gdGhpcyB2YWx1ZS5cbiAgICpcbiAgICogLSB2YWx1ZU9mKHZhbHVlKVxuICAgKiAgICAgRm9yIHZhbHVlcyB0aGF0IHdlcmUgbm90IHByb2R1Y2VkIGJ5IHRydXN0QXMoKSwgcmV0dXJuIHRoZW0gYXMgaXMuICBGb3IgdmFsdWVzIHRoYXQgd2VyZVxuICAgKiAgICAgcHJvZHVjZWQgYnkgdHJ1c3RBcygpLCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgaW5wdXQgdmFsdWUgdG8gdHJ1c3RBcy4gIEJhc2ljYWxseSwgaWZcbiAgICogICAgIHRydXN0QXMgaXMgd3JhcHBpbmcgdGhlIGdpdmVuIHZhbHVlcyBpbnRvIHNvbWUgdHlwZSwgdGhpcyBvcGVyYXRpb24gdW53cmFwcyBpdCB3aGVuIGdpdmVuXG4gICAqICAgICBzdWNoIGEgdmFsdWUuXG4gICAqXG4gICAqIC0gZ2V0VHJ1c3RlZChjb250ZXh0RW51bSwgdmFsdWUpXG4gICAqICAgICBUaGlzIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gdGhlIGEgdmFsdWUgdGhhdCBpcyBzYWZlIHRvIHVzZSBpbiB0aGUgY29udGV4dCBzcGVjaWZpZWQgYnlcbiAgICogICAgIGNvbnRleHRFbnVtIG9yIHRocm93IGFuZCBleGNlcHRpb24gb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBOT1RFOiBUaGlzIGNvbnRyYWN0IGRlbGliZXJhdGVseSBkb2VzIE5PVCBzdGF0ZSB0aGF0IHZhbHVlcyByZXR1cm5lZCBieSB0cnVzdEFzKCkgbXVzdCBiZVxuICAgKiBvcGFxdWUgb3Igd3JhcHBlZCBpbiBzb21lIGhvbGRlciBvYmplY3QuICBUaGF0IGhhcHBlbnMgdG8gYmUgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsLiAgRm9yXG4gICAqIGluc3RhbmNlLCBhbiBpbXBsZW1lbnRhdGlvbiBjb3VsZCBtYWludGFpbiBhIHJlZ2lzdHJ5IG9mIGFsbCB0cnVzdGVkIG9iamVjdHMgYnkgY29udGV4dC4gIEluXG4gICAqIHN1Y2ggYSBjYXNlLCB0cnVzdEFzKCkgd291bGQgcmV0dXJuIHRoZSBzYW1lIG9iamVjdCB0aGF0IHdhcyBwYXNzZWQgaW4uICBnZXRUcnVzdGVkKCkgd291bGRcbiAgICogcmV0dXJuIHRoZSBzYW1lIG9iamVjdCBwYXNzZWQgaW4gaWYgaXQgd2FzIGZvdW5kIGluIHRoZSByZWdpc3RyeSB1bmRlciBhIGNvbXBhdGlibGUgY29udGV4dCBvclxuICAgKiB0aHJvdyBhbiBleGNlcHRpb24gb3RoZXJ3aXNlLiAgQW4gaW1wbGVtZW50YXRpb24gbWlnaHQgb25seSB3cmFwIHZhbHVlcyBzb21lIG9mIHRoZSB0aW1lIGJhc2VkXG4gICAqIG9uIHNvbWUgY3JpdGVyaWEuICBnZXRUcnVzdGVkKCkgbWlnaHQgcmV0dXJuIGEgdmFsdWUgYW5kIG5vdCB0aHJvdyBhbiBleGNlcHRpb24gZm9yIHNwZWNpYWxcbiAgICogY29uc3RhbnRzIG9yIG9iamVjdHMgZXZlbiBpZiBub3Qgd3JhcHBlZC4gIEFsbCBzdWNoIGltcGxlbWVudGF0aW9ucyBmdWxmaWxsIHRoaXMgY29udHJhY3QuXG4gICAqXG4gICAqXG4gICAqIEEgbm90ZSBvbiB0aGUgaW5oZXJpdGFuY2UgbW9kZWwgZm9yIFNDRSBjb250ZXh0c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogSSd2ZSB1c2VkIGluaGVyaXRhbmNlIGFuZCBtYWRlIFJFU09VUkNFX1VSTCB3cmFwcGVkIHR5cGVzIGEgc3VidHlwZSBvZiBVUkwgd3JhcHBlZCB0eXBlcy4gIFRoaXNcbiAgICogaXMgcHVyZWx5IGFuIGltcGxlbWVudGF0aW9uIGRldGFpbHMuXG4gICAqXG4gICAqIFRoZSBjb250cmFjdCBpcyBzaW1wbHkgdGhpczpcbiAgICpcbiAgICogICAgIGdldFRydXN0ZWQoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKSBzdWNjZWVkaW5nIGltcGxpZXMgdGhhdCBnZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlcbiAgICogICAgIHdpbGwgYWxzbyBzdWNjZWVkLlxuICAgKlxuICAgKiBJbmhlcml0YW5jZSBoYXBwZW5zIHRvIGNhcHR1cmUgdGhpcyBpbiBhIG5hdHVyYWwgd2F5LiBJbiBzb21lIGZ1dHVyZSwgd2UgbWF5IG5vdCB1c2VcbiAgICogaW5oZXJpdGFuY2UgYW55bW9yZS4gVGhhdCBpcyBPSyBiZWNhdXNlIG5vIGNvZGUgb3V0c2lkZSBvZiBzY2UuanMgYW5kIHNjZVNwZWNzLmpzIHdvdWxkIG5lZWQgdG9cbiAgICogYmUgYXdhcmUgb2YgdGhpcyBkZXRhaWwuXG4gICAqL1xuXG4gIHRoaXMuJGdldCA9IFsnJHBhcnNlJywgJyRzY2VEZWxlZ2F0ZScsIGZ1bmN0aW9uKFxuICAgICAgICAgICAgICAgICRwYXJzZSwgICAkc2NlRGVsZWdhdGUpIHtcbiAgICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbiAgICAvLyBQcmVyZXE6IEVuc3VyZSB0aGF0IHdlJ3JlIG5vdCBydW5uaW5nIGluIElFPDExIHF1aXJrcyBtb2RlLiAgSW4gdGhhdCBtb2RlLCBJRSA8IDExIGFsbG93XG4gICAgLy8gdGhlIFwiZXhwcmVzc2lvbihqYXZhc2NyaXB0IGV4cHJlc3Npb24pXCIgc3ludGF4IHdoaWNoIGlzIGluc2VjdXJlLlxuICAgIGlmIChlbmFibGVkICYmIG1zaWUgPCA4KSB7XG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpZXF1aXJrcycsXG4gICAgICAgICdTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBkb2VzIG5vdCBzdXBwb3J0IEludGVybmV0IEV4cGxvcmVyIHZlcnNpb24gPCAxMSBpbiBxdWlya3MgJyArXG4gICAgICAgICdtb2RlLiAgWW91IGNhbiBmaXggdGhpcyBieSBhZGRpbmcgdGhlIHRleHQgPCFkb2N0eXBlIGh0bWw+IHRvIHRoZSB0b3Agb2YgeW91ciBIVE1MICcgK1xuICAgICAgICAnZG9jdW1lbnQuICBTZWUgaHR0cDovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcuJHNjZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKTtcbiAgICB9XG5cbiAgICB2YXIgc2NlID0gc2hhbGxvd0NvcHkoU0NFX0NPTlRFWFRTKTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2lzRW5hYmxlZFxuICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIFNDRSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuICBJZiB5b3Ugd2FudCB0byBzZXQgdGhlIHZhbHVlLCB5b3VcbiAgICAgKiAgICAgaGF2ZSB0byBkbyBpdCBhdCBtb2R1bGUgY29uZmlnIHRpbWUgb24ge0BsaW5rIG5nLiRzY2VQcm92aWRlciAkc2NlUHJvdmlkZXJ9LlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiBTQ0UgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBzY2UuaXNFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICB9O1xuICAgIHNjZS50cnVzdEFzID0gJHNjZURlbGVnYXRlLnRydXN0QXM7XG4gICAgc2NlLmdldFRydXN0ZWQgPSAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZDtcbiAgICBzY2UudmFsdWVPZiA9ICRzY2VEZWxlZ2F0ZS52YWx1ZU9mO1xuXG4gICAgaWYgKCFlbmFibGVkKSB7XG4gICAgICBzY2UudHJ1c3RBcyA9IHNjZS5nZXRUcnVzdGVkID0gZnVuY3Rpb24odHlwZSwgdmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuICAgICAgc2NlLnZhbHVlT2YgPSBpZGVudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBDb252ZXJ0cyBBbmd1bGFySlMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaW50byBhIGZ1bmN0aW9uLiAgVGhpcyBpcyBsaWtlIHtAbGlua1xuICAgICAqIG5nLiRwYXJzZSAkcGFyc2V9IGFuZCBpcyBpZGVudGljYWwgd2hlbiB0aGUgZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgY29uc3RhbnQuICBPdGhlcndpc2UsIGl0XG4gICAgICogd3JhcHMgdGhlIGV4cHJlc3Npb24gaW4gYSBjYWxsIHRvIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkKCp0eXBlKixcbiAgICAgKiAqcmVzdWx0Kil9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgU0NFIGNvbnRleHQgaW4gd2hpY2ggdGhpcyByZXN1bHQgd2lsbCBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cbiAgICBzY2UucGFyc2VBcyA9IGZ1bmN0aW9uIHNjZVBhcnNlQXModHlwZSwgZXhwcikge1xuICAgICAgdmFyIHBhcnNlZCA9ICRwYXJzZShleHByKTtcbiAgICAgIGlmIChwYXJzZWQubGl0ZXJhbCAmJiBwYXJzZWQuY29uc3RhbnQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcGFyc2UoZXhwciwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gc2NlLmdldFRydXN0ZWQodHlwZSwgdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogRGVsZWdhdGVzIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfS4gQXMgc3VjaCwgcmV0dXJucyBhXG4gICAgICogd3JhcHBlZCBvYmplY3QgdGhhdCByZXByZXNlbnRzIHlvdXIgdmFsdWUsIGFuZCB0aGUgdHJ1c3QgeW91IGhhdmUgaW4gaXRzIHNhZmV0eSBmb3IgdGhlIGdpdmVuXG4gICAgICogY29udGV4dC4gQW5ndWxhckpTIGNhbiB0aGVuIHVzZSB0aGF0IHZhbHVlIGFzLWlzIGluIGJpbmRpbmdzIG9mIHRoZSBzcGVjaWZpZWQgc2VjdXJlIGNvbnRleHQuXG4gICAgICogVGhpcyBpcyB1c2VkIGluIGJpbmRpbmdzIGZvciBgbmctYmluZC1odG1sYCwgYG5nLWluY2x1ZGVgLCBhbmQgbW9zdCBgc3JjYCBhdHRyaWJ1dGVcbiAgICAgKiBpbnRlcnBvbGF0aW9ucy4gU2VlIHtAbGluayBuZy4kc2NlICRzY2V9IGZvciBzdHJpY3QgY29udGV4dHVhbCBlc2NhcGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgc2FmZSBmb3IgdXNlLCBlLmcuIGAkc2NlLlVSTGAsXG4gICAgICogICAgIGAkc2NlLlJFU09VUkNFX1VSTGAsIGAkc2NlLkhUTUxgLCBgJHNjZS5KU2Agb3IgYCRzY2UuQ1NTYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRoYXQgdGhhdCBzaG91bGQgYmUgY29uc2lkZXJlZCB0cnVzdGVkLlxuICAgICAqIEByZXR1cm4geyp9IEEgd3JhcHBlZCB2ZXJzaW9uIG9mIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0cnVzdGVkIHZhcmlhbnQgb2YgeW91ciBgdmFsdWVgXG4gICAgICogICAgIGluIHRoZSBjb250ZXh0IHlvdSBzcGVjaWZpZWQuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzSHRtbFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNIdG1sKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5IVE1MLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFyayBhcyB0cnVzdGVkIGZvciBgJHNjZS5IVE1MYCBjb250ZXh0LlxuICAgICAqIEByZXR1cm4geyp9IEEgd3JhcHBlZCB2ZXJzaW9uIG9mIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0cnVzdGVkIHZhcmlhbnQgb2YgeW91ciBgdmFsdWVgXG4gICAgICogICAgIGluIGAkc2NlLkhUTUxgIGNvbnRleHQgKGxpa2UgYG5nLWJpbmQtaHRtbGApLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc0Nzc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNDc3ModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLkNTUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcmsgYXMgdHJ1c3RlZCBmb3IgYCRzY2UuQ1NTYCBjb250ZXh0LlxuICAgICAqIEByZXR1cm4geyp9IEEgd3JhcHBlZCB2ZXJzaW9uIG9mIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0cnVzdGVkIHZhcmlhbnRcbiAgICAgKiAgICAgb2YgeW91ciBgdmFsdWVgIGluIGAkc2NlLkNTU2AgY29udGV4dC4gVGhpcyBjb250ZXh0IGlzIGN1cnJlbnRseSB1bnVzZWQsIHNvIHRoZXJlIGFyZVxuICAgICAqICAgICBhbG1vc3Qgbm8gcmVhc29ucyB0byB1c2UgdGhpcyBmdW5jdGlvbiBzbyBmYXIuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc1VybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFyayBhcyB0cnVzdGVkIGZvciBgJHNjZS5VUkxgIGNvbnRleHQuXG4gICAgICogQHJldHVybiB7Kn0gQSB3cmFwcGVkIHZlcnNpb24gb2YgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHRydXN0ZWQgdmFyaWFudCBvZiB5b3VyIGB2YWx1ZWBcbiAgICAgKiAgICAgaW4gYCRzY2UuVVJMYCBjb250ZXh0LiBUaGF0IGNvbnRleHQgaXMgY3VycmVudGx5IHVudXNlZCwgc28gdGhlcmUgYXJlIGFsbW9zdCBubyByZWFzb25zXG4gICAgICogICAgIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHNvIGZhci5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNSZXNvdXJjZVVybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFyayBhcyB0cnVzdGVkIGZvciBgJHNjZS5SRVNPVVJDRV9VUkxgIGNvbnRleHQuXG4gICAgICogQHJldHVybiB7Kn0gQSB3cmFwcGVkIHZlcnNpb24gb2YgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHRydXN0ZWQgdmFyaWFudCBvZiB5b3VyIGB2YWx1ZWBcbiAgICAgKiAgICAgaW4gYCRzY2UuUkVTT1VSQ0VfVVJMYCBjb250ZXh0ICh0ZW1wbGF0ZSBVUkxzIGluIGBuZy1pbmNsdWRlYCwgbW9zdCBgc3JjYCBhdHRyaWJ1dGVcbiAgICAgKiAgICAgYmluZGluZ3MsIC4uLilcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNKc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNKcyh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuSlMsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBtYXJrIGFzIHRydXN0ZWQgZm9yIGAkc2NlLkpTYCBjb250ZXh0LlxuICAgICAqIEByZXR1cm4geyp9IEEgd3JhcHBlZCB2ZXJzaW9uIG9mIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0cnVzdGVkIHZhcmlhbnQgb2YgeW91ciBgdmFsdWVgXG4gICAgICogICAgIGluIGAkc2NlLkpTYCBjb250ZXh0LiBUaGF0IGNvbnRleHQgaXMgY3VycmVudGx5IHVudXNlZCwgc28gdGhlcmUgYXJlIGFsbW9zdCBubyByZWFzb25zIHRvXG4gICAgICogICAgIHVzZSB0aGlzIGZ1bmN0aW9uIHNvIGZhci5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIERlbGVnYXRlcyB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkYH0uICBBcyBzdWNoLFxuICAgICAqIHRha2VzIGFueSBpbnB1dCwgYW5kIGVpdGhlciByZXR1cm5zIGEgdmFsdWUgdGhhdCdzIHNhZmUgdG8gdXNlIGluIHRoZSBzcGVjaWZpZWQgY29udGV4dCxcbiAgICAgKiBvciB0aHJvd3MgYW4gZXhjZXB0aW9uLiBUaGlzIGZ1bmN0aW9uIGlzIGF3YXJlIG9mIHRydXN0ZWQgdmFsdWVzIGNyZWF0ZWQgYnkgdGhlIGB0cnVzdEFzYFxuICAgICAqIGZ1bmN0aW9uIGFuZCBpdHMgc2hvcnRoYW5kcywgYW5kIHdoZW4gY29udGV4dHMgYXJlIGFwcHJvcHJpYXRlLCByZXR1cm5zIHRoZSB1bndyYXBwZWQgdmFsdWVcbiAgICAgKiBhcy1pcy4gRmluYWxseSwgdGhpcyBmdW5jdGlvbiBjYW4gYWxzbyB0aHJvdyB3aGVuIHRoZXJlIGlzIG5vIHdheSB0byB0dXJuIGBtYXliZVRydXN0ZWRgIGluIGFcbiAgICAgKiBzYWZlIHZhbHVlIChlLmcuLCBubyBzYW5pdGl6YXRpb24gaXMgYXZhaWxhYmxlIG9yIHBvc3NpYmxlLilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgdG8gYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0geyp9IG1heWJlVHJ1c3RlZCBUaGUgcmVzdWx0IG9mIGEgcHJpb3Ige0BsaW5rIG5nLiRzY2UjdHJ1c3RBc1xuICAgICAqICAgICBgJHNjZS50cnVzdEFzYH0gY2FsbCwgb3IgYW55dGhpbmcgZWxzZSAod2hpY2ggd2lsbCBub3QgYmUgY29uc2lkZXJlZCB0cnVzdGVkLilcbiAgICAgKiBAcmV0dXJuIHsqfSBBIHZlcnNpb24gb2YgdGhlIHZhbHVlIHRoYXQncyBzYWZlIHRvIHVzZSBpbiB0aGUgZ2l2ZW4gY29udGV4dCwgb3IgdGhyb3dzIGFuXG4gICAgICogICAgIGV4Y2VwdGlvbiBpZiB0aGlzIGlzIGltcG9zc2libGUuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkSHRtbFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRIdG1sKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5IVE1MLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5IVE1MLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkQ3NzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZENzcyh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5DU1MsIHZhbHVlKWBcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkVXJsKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlLmdldFRydXN0ZWRgLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLlVSTCwgdmFsdWUpYFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZGAuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkSnNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkSnModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkpTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5KUywgdmFsdWUpYFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc0h0bWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzSHRtbChleHByZXNzaW9uIHN0cmluZylgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5IVE1MLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBBIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gICAgICpcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZVxuICAgICAqICAgICAgc3RyaW5ncyBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlc1xuICAgICAqICAgICAgaW4gYGNvbnRleHRgLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc0Nzc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNDc3ModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuQ1NTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBBIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gICAgICpcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZVxuICAgICAqICAgICAgc3RyaW5ncyBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlc1xuICAgICAqICAgICAgaW4gYGNvbnRleHRgLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1VybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBBIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gICAgICpcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZVxuICAgICAqICAgICAgc3RyaW5ncyBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlc1xuICAgICAqICAgICAgaW4gYGNvbnRleHRgLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1Jlc291cmNlVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc1Jlc291cmNlVXJsKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlQXMgYCRzY2UucGFyc2VBcygkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNKc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNKcyh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5KUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8vIFNob3J0aGFuZCBkZWxlZ2F0aW9ucy5cbiAgICB2YXIgcGFyc2UgPSBzY2UucGFyc2VBcyxcbiAgICAgICAgZ2V0VHJ1c3RlZCA9IHNjZS5nZXRUcnVzdGVkLFxuICAgICAgICB0cnVzdEFzID0gc2NlLnRydXN0QXM7XG5cbiAgICBmb3JFYWNoKFNDRV9DT05URVhUUywgZnVuY3Rpb24oZW51bVZhbHVlLCBuYW1lKSB7XG4gICAgICB2YXIgbE5hbWUgPSBsb3dlcmNhc2UobmFtZSk7XG4gICAgICBzY2Vbc25ha2VUb0NhbWVsKCdwYXJzZV9hc18nICsgbE5hbWUpXSA9IGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlKGVudW1WYWx1ZSwgZXhwcik7XG4gICAgICB9O1xuICAgICAgc2NlW3NuYWtlVG9DYW1lbCgnZ2V0X3RydXN0ZWRfJyArIGxOYW1lKV0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gZ2V0VHJ1c3RlZChlbnVtVmFsdWUsIHZhbHVlKTtcbiAgICAgIH07XG4gICAgICBzY2Vbc25ha2VUb0NhbWVsKCd0cnVzdF9hc18nICsgbE5hbWUpXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0cnVzdEFzKGVudW1WYWx1ZSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzY2U7XG4gIH1dO1xufVxuXG4vKiBleHBvcnRlZCAkU25pZmZlclByb3ZpZGVyICovXG5cbi8qKlxuICogISEhIFRoaXMgaXMgYW4gdW5kb2N1bWVudGVkIFwicHJpdmF0ZVwiIHNlcnZpY2UgISEhXG4gKlxuICogQG5hbWUgJHNuaWZmZXJcbiAqIEByZXF1aXJlcyAkd2luZG93XG4gKiBAcmVxdWlyZXMgJGRvY3VtZW50XG4gKiBAdGhpc1xuICpcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaGlzdG9yeSBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgaHRtbDUgaGlzdG9yeSBhcGkgP1xuICogQHByb3BlcnR5IHtib29sZWFufSB0cmFuc2l0aW9ucyBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgQ1NTIHRyYW5zaXRpb24gZXZlbnRzID9cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYW5pbWF0aW9ucyBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgQ1NTIGFuaW1hdGlvbiBldmVudHMgP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBpcyB2ZXJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiB0ZXN0aW5nIGJyb3dzZXIncyBmZWF0dXJlcy5cbiAqL1xuZnVuY3Rpb24gJFNuaWZmZXJQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRkb2N1bWVudCcsIGZ1bmN0aW9uKCR3aW5kb3csICRkb2N1bWVudCkge1xuICAgIHZhciBldmVudFN1cHBvcnQgPSB7fSxcbiAgICAgICAgLy8gQ2hyb21lIFBhY2thZ2VkIEFwcHMgYXJlIG5vdCBhbGxvd2VkIHRvIGFjY2VzcyBgaGlzdG9yeS5wdXNoU3RhdGVgLlxuICAgICAgICAvLyBJZiBub3Qgc2FuZGJveGVkLCB0aGV5IGNhbiBiZSBkZXRlY3RlZCBieSB0aGUgcHJlc2VuY2Ugb2YgYGNocm9tZS5hcHAucnVudGltZWBcbiAgICAgICAgLy8gKHNlZSBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2FwcHMvYXBpX2luZGV4KS4gSWYgc2FuZGJveGVkLCB0aGV5IGNhbiBiZSBkZXRlY3RlZCBieVxuICAgICAgICAvLyB0aGUgcHJlc2VuY2Ugb2YgYW4gZXh0ZW5zaW9uIHJ1bnRpbWUgSUQgYW5kIHRoZSBhYnNlbmNlIG9mIG90aGVyIENocm9tZSBydW50aW1lIEFQSXNcbiAgICAgICAgLy8gKHNlZSBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2FwcHMvbWFuaWZlc3Qvc2FuZGJveCkuXG4gICAgICAgIC8vIChOVy5qcyBhcHBzIGhhdmUgYWNjZXNzIHRvIENocm9tZSBBUElzLCBidXQgZG8gc3VwcG9ydCBgaGlzdG9yeWAuKVxuICAgICAgICBpc053ID0gJHdpbmRvdy5udyAmJiAkd2luZG93Lm53LnByb2Nlc3MsXG4gICAgICAgIGlzQ2hyb21lUGFja2FnZWRBcHAgPVxuICAgICAgICAgICAgIWlzTncgJiZcbiAgICAgICAgICAgICR3aW5kb3cuY2hyb21lICYmXG4gICAgICAgICAgICAoJHdpbmRvdy5jaHJvbWUuYXBwICYmICR3aW5kb3cuY2hyb21lLmFwcC5ydW50aW1lIHx8XG4gICAgICAgICAgICAgICAgISR3aW5kb3cuY2hyb21lLmFwcCAmJiAkd2luZG93LmNocm9tZS5ydW50aW1lICYmICR3aW5kb3cuY2hyb21lLnJ1bnRpbWUuaWQpLFxuICAgICAgICBoYXNIaXN0b3J5UHVzaFN0YXRlID0gIWlzQ2hyb21lUGFja2FnZWRBcHAgJiYgJHdpbmRvdy5oaXN0b3J5ICYmICR3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUsXG4gICAgICAgIGFuZHJvaWQgPVxuICAgICAgICAgIHRvSW50KCgvYW5kcm9pZCAoXFxkKykvLmV4ZWMobG93ZXJjYXNlKCgkd2luZG93Lm5hdmlnYXRvciB8fCB7fSkudXNlckFnZW50KSkgfHwgW10pWzFdKSxcbiAgICAgICAgYm94ZWUgPSAvQm94ZWUvaS50ZXN0KCgkd2luZG93Lm5hdmlnYXRvciB8fCB7fSkudXNlckFnZW50KSxcbiAgICAgICAgZG9jdW1lbnQgPSAkZG9jdW1lbnRbMF0gfHwge30sXG4gICAgICAgIGJvZHlTdHlsZSA9IGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5zdHlsZSxcbiAgICAgICAgdHJhbnNpdGlvbnMgPSBmYWxzZSxcbiAgICAgICAgYW5pbWF0aW9ucyA9IGZhbHNlO1xuXG4gICAgaWYgKGJvZHlTdHlsZSkge1xuICAgICAgLy8gU3VwcG9ydDogQW5kcm9pZCA8NSwgQmxhY2tiZXJyeSBCcm93c2VyIDEwLCBkZWZhdWx0IENocm9tZSBpbiBBbmRyb2lkIDQuNC54XG4gICAgICAvLyBNZW50aW9uZWQgYnJvd3NlcnMgbmVlZCBhIC13ZWJraXQtIHByZWZpeCBmb3IgdHJhbnNpdGlvbnMgJiBhbmltYXRpb25zLlxuICAgICAgdHJhbnNpdGlvbnMgPSAhISgndHJhbnNpdGlvbicgaW4gYm9keVN0eWxlIHx8ICd3ZWJraXRUcmFuc2l0aW9uJyBpbiBib2R5U3R5bGUpO1xuICAgICAgYW5pbWF0aW9ucyA9ICEhKCdhbmltYXRpb24nIGluIGJvZHlTdHlsZSB8fCAnd2Via2l0QW5pbWF0aW9uJyBpbiBib2R5U3R5bGUpO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIEFuZHJvaWQgaGFzIGhpc3RvcnkucHVzaFN0YXRlLCBidXQgaXQgZG9lcyBub3QgdXBkYXRlIGxvY2F0aW9uIGNvcnJlY3RseVxuICAgICAgLy8gc28gbGV0J3Mgbm90IHVzZSB0aGUgaGlzdG9yeSBBUEkgYXQgYWxsLlxuICAgICAgLy8gaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2FuZHJvaWQvaXNzdWVzL2RldGFpbD9pZD0xNzQ3MVxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTA0XG5cbiAgICAgIC8vIG9sZGVyIHdlYmtpdCBicm93c2VyICg1MzMuOSkgb24gQm94ZWUgYm94IGhhcyBleGFjdGx5IHRoZSBzYW1lIHByb2JsZW0gYXMgQW5kcm9pZCBoYXNcbiAgICAgIC8vIHNvIGxldCdzIG5vdCB1c2UgdGhlIGhpc3RvcnkgQVBJIGFsc29cbiAgICAgIC8vIFdlIGFyZSBwdXJwb3NlZnVsbHkgdXNpbmcgYCEoYW5kcm9pZCA8IDQpYCB0byBjb3ZlciB0aGUgY2FzZSB3aGVuIGBhbmRyb2lkYCBpcyB1bmRlZmluZWRcbiAgICAgIGhpc3Rvcnk6ICEhKGhhc0hpc3RvcnlQdXNoU3RhdGUgJiYgIShhbmRyb2lkIDwgNCkgJiYgIWJveGVlKSxcbiAgICAgIGhhc0V2ZW50OiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbiAgICAgICAgLy8gSUU5IGltcGxlbWVudHMgJ2lucHV0JyBldmVudCBpdCdzIHNvIGZ1YmFyZWQgdGhhdCB3ZSByYXRoZXIgcHJldGVuZCB0aGF0IGl0IGRvZXNuJ3QgaGF2ZVxuICAgICAgICAvLyBpdC4gSW4gcGFydGljdWxhciB0aGUgZXZlbnQgaXMgbm90IGZpcmVkIHdoZW4gYmFja3NwYWNlIG9yIGRlbGV0ZSBrZXkgYXJlIHByZXNzZWQgb3JcbiAgICAgICAgLy8gd2hlbiBjdXQgb3BlcmF0aW9uIGlzIHBlcmZvcm1lZC5cbiAgICAgICAgLy8gSUUxMCsgaW1wbGVtZW50cyAnaW5wdXQnIGV2ZW50IGJ1dCBpdCBlcnJvbmVvdXNseSBmaXJlcyB1bmRlciB2YXJpb3VzIHNpdHVhdGlvbnMsXG4gICAgICAgIC8vIGUuZy4gd2hlbiBwbGFjZWhvbGRlciBjaGFuZ2VzLCBvciBhIGZvcm0gaXMgZm9jdXNlZC5cbiAgICAgICAgaWYgKGV2ZW50ID09PSAnaW5wdXQnICYmIG1zaWUpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBpZiAoaXNVbmRlZmluZWQoZXZlbnRTdXBwb3J0W2V2ZW50XSkpIHtcbiAgICAgICAgICB2YXIgZGl2RWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgZXZlbnRTdXBwb3J0W2V2ZW50XSA9ICdvbicgKyBldmVudCBpbiBkaXZFbG07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXZlbnRTdXBwb3J0W2V2ZW50XTtcbiAgICAgIH0sXG4gICAgICBjc3A6IGNzcCgpLFxuICAgICAgdHJhbnNpdGlvbnM6IHRyYW5zaXRpb25zLFxuICAgICAgYW5pbWF0aW9uczogYW5pbWF0aW9ucyxcbiAgICAgIGFuZHJvaWQ6IGFuZHJvaWRcbiAgICB9O1xuICB9XTtcbn1cblxudmFyICR0ZW1wbGF0ZVJlcXVlc3RNaW5FcnIgPSBtaW5FcnIoJyRjb21waWxlJyk7XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2VkIHRvIGNvbmZpZ3VyZSB0aGUgb3B0aW9ucyBwYXNzZWQgdG8gdGhlIHtAbGluayAkaHR0cH0gc2VydmljZSB3aGVuIG1ha2luZyBhIHRlbXBsYXRlIHJlcXVlc3QuXG4gKlxuICogRm9yIGV4YW1wbGUsIGl0IGNhbiBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIHRoZSBcIkFjY2VwdFwiIGhlYWRlciB0aGF0IGlzIHNlbnQgdG8gdGhlIHNlcnZlciwgd2hlblxuICogcmVxdWVzdGluZyBhIHRlbXBsYXRlLlxuICovXG5mdW5jdGlvbiAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIoKSB7XG5cbiAgdmFyIGh0dHBPcHRpb25zO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICR0ZW1wbGF0ZVJlcXVlc3RQcm92aWRlciNodHRwT3B0aW9uc1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlIG9wdGlvbnMgdG8gYmUgcGFzc2VkIHRvIHRoZSB7QGxpbmsgJGh0dHB9IHNlcnZpY2Ugd2hlbiBtYWtpbmcgdGhlIHJlcXVlc3QuXG4gICAqIFlvdSBjYW4gdXNlIHRoaXMgdG8gb3ZlcnJpZGUgb3B0aW9ucyBzdWNoIGFzIHRoZSBcIkFjY2VwdFwiIGhlYWRlciBmb3IgdGVtcGxhdGUgcmVxdWVzdHMuXG4gICAqXG4gICAqIFRoZSB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdH0gd2lsbCBzZXQgdGhlIGBjYWNoZWAgYW5kIHRoZSBgdHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMgb2YgdGhlXG4gICAqIG9wdGlvbnMgaWYgbm90IG92ZXJyaWRkZW4gaGVyZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgZm9yIHRoZSB7QGxpbmsgJGh0dHB9IG9wdGlvbnMuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUge0BsaW5rICRodHRwfSBvcHRpb25zIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLmh0dHBPcHRpb25zID0gZnVuY3Rpb24odmFsKSB7XG4gICAgaWYgKHZhbCkge1xuICAgICAgaHR0cE9wdGlvbnMgPSB2YWw7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGh0dHBPcHRpb25zO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2Mgc2VydmljZVxuICAgKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGUgYCR0ZW1wbGF0ZVJlcXVlc3RgIHNlcnZpY2UgcnVucyBzZWN1cml0eSBjaGVja3MgdGhlbiBkb3dubG9hZHMgdGhlIHByb3ZpZGVkIHRlbXBsYXRlIHVzaW5nXG4gICAqIGAkaHR0cGAgYW5kLCB1cG9uIHN1Y2Nlc3MsIHN0b3JlcyB0aGUgY29udGVudHMgaW5zaWRlIG9mIGAkdGVtcGxhdGVDYWNoZWAuIElmIHRoZSBIVFRQIHJlcXVlc3RcbiAgICogZmFpbHMgb3IgdGhlIHJlc3BvbnNlIGRhdGEgb2YgdGhlIEhUVFAgcmVxdWVzdCBpcyBlbXB0eSwgYSBgJGNvbXBpbGVgIGVycm9yIHdpbGwgYmUgdGhyb3duICh0aGVcbiAgICogZXhjZXB0aW9uIGNhbiBiZSB0aHdhcnRlZCBieSBzZXR0aW5nIHRoZSAybmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiB0byB0cnVlKS4gTm90ZSB0aGF0IHRoZVxuICAgKiBjb250ZW50cyBvZiBgJHRlbXBsYXRlQ2FjaGVgIGFyZSB0cnVzdGVkLCBzbyB0aGUgY2FsbCB0byBgJHNjZS5nZXRUcnVzdGVkVXJsKHRwbClgIGlzIG9taXR0ZWRcbiAgICogd2hlbiBgdHBsYCBpcyBvZiB0eXBlIHN0cmluZyBhbmQgYCR0ZW1wbGF0ZUNhY2hlYCBoYXMgdGhlIG1hdGNoaW5nIGVudHJ5LlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXNzIGN1c3RvbSBvcHRpb25zIHRvIHRoZSBgJGh0dHBgIHNlcnZpY2UsIHN1Y2ggYXMgc2V0dGluZyB0aGUgQWNjZXB0IGhlYWRlciB5b3VcbiAgICogY2FuIGNvbmZpZ3VyZSB0aGlzIHZpYSB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyI2h0dHBPcHRpb25zfS5cbiAgICpcbiAgICogYCR0ZW1wbGF0ZVJlcXVlc3RgIGlzIHVzZWQgaW50ZXJuYWxseSBieSB7QGxpbmsgJGNvbXBpbGV9LCB7QGxpbmsgbmdSb3V0ZS4kcm91dGV9LCBhbmQgZGlyZWN0aXZlcyBzdWNoXG4gICAqIGFzIHtAbGluayBuZ0luY2x1ZGV9IHRvIGRvd25sb2FkIGFuZCBjYWNoZSB0ZW1wbGF0ZXMuXG4gICAqXG4gICAqIDNyZCBwYXJ0eSBtb2R1bGVzIHNob3VsZCB1c2UgYCR0ZW1wbGF0ZVJlcXVlc3RgIGlmIHRoZWlyIHNlcnZpY2VzIG9yIGRpcmVjdGl2ZXMgYXJlIGxvYWRpbmdcbiAgICogdGVtcGxhdGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xUcnVzdGVkUmVzb3VyY2VVcmx9IHRwbCBUaGUgSFRUUCByZXF1ZXN0IHRlbXBsYXRlIFVSTFxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpZ25vcmVSZXF1ZXN0RXJyb3IgV2hldGhlciBvciBub3QgdG8gaWdub3JlIHRoZSBleGNlcHRpb24gd2hlbiB0aGUgcmVxdWVzdCBmYWlscyBvciB0aGUgdGVtcGxhdGUgaXMgZW1wdHlcbiAgICpcbiAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIGZvciB0aGUgSFRUUCByZXNwb25zZSBkYXRhIG9mIHRoZSBnaXZlbiBVUkwuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0b3RhbFBlbmRpbmdSZXF1ZXN0cyB0b3RhbCBhbW91bnQgb2YgcGVuZGluZyB0ZW1wbGF0ZSByZXF1ZXN0cyBiZWluZyBkb3dubG9hZGVkLlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gWyckZXhjZXB0aW9uSGFuZGxlcicsICckdGVtcGxhdGVDYWNoZScsICckaHR0cCcsICckcScsICckc2NlJyxcbiAgICBmdW5jdGlvbigkZXhjZXB0aW9uSGFuZGxlciwgJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkcSwgJHNjZSkge1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0Rm4odHBsLCBpZ25vcmVSZXF1ZXN0RXJyb3IpIHtcbiAgICAgICAgaGFuZGxlUmVxdWVzdEZuLnRvdGFsUGVuZGluZ1JlcXVlc3RzKys7XG5cbiAgICAgICAgLy8gV2UgY29uc2lkZXIgdGhlIHRlbXBsYXRlIGNhY2hlIGhvbGRzIG9ubHkgdHJ1c3RlZCB0ZW1wbGF0ZXMsIHNvXG4gICAgICAgIC8vIHRoZXJlJ3Mgbm8gbmVlZCB0byBnbyB0aHJvdWdoIHdoaXRlbGlzdGluZyBhZ2FpbiBmb3Iga2V5cyB0aGF0IGFscmVhZHlcbiAgICAgICAgLy8gYXJlIGluY2x1ZGVkIGluIHRoZXJlLiBUaGlzIGFsc28gbWFrZXMgQW5ndWxhckpTIGFjY2VwdCBhbnkgc2NyaXB0XG4gICAgICAgIC8vIGRpcmVjdGl2ZSwgbm8gbWF0dGVyIGl0cyBuYW1lLiBIb3dldmVyLCB3ZSBzdGlsbCBuZWVkIHRvIHVud3JhcCB0cnVzdGVkXG4gICAgICAgIC8vIHR5cGVzLlxuICAgICAgICBpZiAoIWlzU3RyaW5nKHRwbCkgfHwgaXNVbmRlZmluZWQoJHRlbXBsYXRlQ2FjaGUuZ2V0KHRwbCkpKSB7XG4gICAgICAgICAgdHBsID0gJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodHBsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXNwb25zZSA9ICRodHRwLmRlZmF1bHRzICYmICRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO1xuXG4gICAgICAgIGlmIChpc0FycmF5KHRyYW5zZm9ybVJlc3BvbnNlKSkge1xuICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlID0gdHJhbnNmb3JtUmVzcG9uc2UuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZXIgIT09IGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNmb3JtUmVzcG9uc2UgPT09IGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm0pIHtcbiAgICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHRwbCwgZXh0ZW5kKHtcbiAgICAgICAgICAgIGNhY2hlOiAkdGVtcGxhdGVDYWNoZSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiB0cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICAgIH0sIGh0dHBPcHRpb25zKSlcbiAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCh0cGwsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSwgaGFuZGxlRXJyb3IpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlc3ApIHtcbiAgICAgICAgICBpZiAoIWlnbm9yZVJlcXVlc3RFcnJvcikge1xuICAgICAgICAgICAgcmVzcCA9ICR0ZW1wbGF0ZVJlcXVlc3RNaW5FcnIoJ3RwbG9hZCcsXG4gICAgICAgICAgICAgICAgJ0ZhaWxlZCB0byBsb2FkIHRlbXBsYXRlOiB7MH0gKEhUVFAgc3RhdHVzOiB7MX0gezJ9KScsXG4gICAgICAgICAgICAgICAgdHBsLCByZXNwLnN0YXR1cywgcmVzcC5zdGF0dXNUZXh0KTtcblxuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIocmVzcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBoYW5kbGVSZXF1ZXN0Rm4udG90YWxQZW5kaW5nUmVxdWVzdHMgPSAwO1xuXG4gICAgICByZXR1cm4gaGFuZGxlUmVxdWVzdEZuO1xuICAgIH1cbiAgXTtcbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJFRlc3RhYmlsaXR5UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckbG9jYXRpb24nLFxuICAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICAgJGJyb3dzZXIsICAgJGxvY2F0aW9uKSB7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSAkdGVzdGFiaWxpdHlcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFRoZSBwcml2YXRlICQkdGVzdGFiaWxpdHkgc2VydmljZSBwcm92aWRlcyBhIGNvbGxlY3Rpb24gb2YgbWV0aG9kcyBmb3IgdXNlIHdoZW4gZGVidWdnaW5nXG4gICAgICogb3IgYnkgYXV0b21hdGVkIHRlc3QgYW5kIGRlYnVnZ2luZyB0b29scy5cbiAgICAgKi9cbiAgICB2YXIgdGVzdGFiaWxpdHkgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZmluZEJpbmRpbmdzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgYXJlIGJvdW5kICh2aWEgbmctYmluZCBvciB7e319KVxuICAgICAqIHRvIGV4cHJlc3Npb25zIG1hdGNoaW5nIHRoZSBpbnB1dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCByb290IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFRoZSBiaW5kaW5nIGV4cHJlc3Npb24gdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRfZXhhY3RNYXRjaCBJZiB0cnVlLCBvbmx5IHJldHVybnMgZXhhY3QgbWF0Y2hlc1xuICAgICAqICAgICBmb3IgdGhlIGV4cHJlc3Npb24uIEZpbHRlcnMgYW5kIHdoaXRlc3BhY2UgYXJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgdGVzdGFiaWxpdHkuZmluZEJpbmRpbmdzID0gZnVuY3Rpb24oZWxlbWVudCwgZXhwcmVzc2lvbiwgb3B0X2V4YWN0TWF0Y2gpIHtcbiAgICAgIHZhciBiaW5kaW5ncyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmctYmluZGluZycpO1xuICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcbiAgICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uKGJpbmRpbmcpIHtcbiAgICAgICAgdmFyIGRhdGFCaW5kaW5nID0gYW5ndWxhci5lbGVtZW50KGJpbmRpbmcpLmRhdGEoJyRiaW5kaW5nJyk7XG4gICAgICAgIGlmIChkYXRhQmluZGluZykge1xuICAgICAgICAgIGZvckVhY2goZGF0YUJpbmRpbmcsIGZ1bmN0aW9uKGJpbmRpbmdOYW1lKSB7XG4gICAgICAgICAgICBpZiAob3B0X2V4YWN0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgUmVnRXhwKCcoXnxcXFxccyknICsgZXNjYXBlRm9yUmVnZXhwKGV4cHJlc3Npb24pICsgJyhcXFxcc3xcXFxcfHwkKScpO1xuICAgICAgICAgICAgICBpZiAobWF0Y2hlci50ZXN0KGJpbmRpbmdOYW1lKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChiaW5kaW5nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGJpbmRpbmdOYW1lLmluZGV4T2YoZXhwcmVzc2lvbikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGJpbmRpbmcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZmluZE1vZGVsc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBlbGVtZW50cyB0aGF0IGFyZSB0d28td2F5IGZvdW5kIHZpYSBuZy1tb2RlbCB0b1xuICAgICAqIGV4cHJlc3Npb25zIG1hdGNoaW5nIHRoZSBpbnB1dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCByb290IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFRoZSBtb2RlbCBleHByZXNzaW9uIHRvIG1hdGNoLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X2V4YWN0TWF0Y2ggSWYgdHJ1ZSwgb25seSByZXR1cm5zIGV4YWN0IG1hdGNoZXNcbiAgICAgKiAgICAgZm9yIHRoZSBleHByZXNzaW9uLlxuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LmZpbmRNb2RlbHMgPSBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBvcHRfZXhhY3RNYXRjaCkge1xuICAgICAgdmFyIHByZWZpeGVzID0gWyduZy0nLCAnZGF0YS1uZy0nLCAnbmdcXFxcOiddO1xuICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBwcmVmaXhlcy5sZW5ndGg7ICsrcCkge1xuICAgICAgICB2YXIgYXR0cmlidXRlRXF1YWxzID0gb3B0X2V4YWN0TWF0Y2ggPyAnPScgOiAnKj0nO1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSAnWycgKyBwcmVmaXhlc1twXSArICdtb2RlbCcgKyBhdHRyaWJ1dGVFcXVhbHMgKyAnXCInICsgZXhwcmVzc2lvbiArICdcIl0nO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZ2V0TG9jYXRpb25cbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IGZvciBnZXR0aW5nIHRoZSBsb2NhdGlvbiBpbiBhIGJyb3dzZXIgYWdub3N0aWMgd2F5LiBSZXR1cm5zXG4gICAgICogICAgIHRoZSBwYXRoLCBzZWFyY2gsIGFuZCBoYXNoLiAoZS5nLiAvcGF0aD9hPWIjaGFzaClcbiAgICAgKi9cbiAgICB0ZXN0YWJpbGl0eS5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRsb2NhdGlvbi51cmwoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNzZXRMb2NhdGlvblxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgZm9yIG5hdmlnYXRpbmcgdG8gYSBsb2NhdGlvbiB3aXRob3V0IGRvaW5nIGEgZnVsbCBwYWdlIHJlbG9hZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGxvY2F0aW9uIHVybCAocGF0aCwgc2VhcmNoIGFuZCBoYXNoLFxuICAgICAqICAgICBlLmcuIC9wYXRoP2E9YiNoYXNoKSB0byBnbyB0by5cbiAgICAgKi9cbiAgICB0ZXN0YWJpbGl0eS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgaWYgKHVybCAhPT0gJGxvY2F0aW9uLnVybCgpKSB7XG4gICAgICAgICRsb2NhdGlvbi51cmwodXJsKTtcbiAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjd2hlblN0YWJsZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gJHRpbWVvdXQgYW5kICRodHRwIHJlcXVlc3RzIGFyZSBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LndoZW5TdGFibGUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgJGJyb3dzZXIubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyhjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIHJldHVybiB0ZXN0YWJpbGl0eTtcbiAgfV07XG59XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJFRpbWVvdXRQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRicm93c2VyJywgJyRxJywgJyQkcScsICckZXhjZXB0aW9uSGFuZGxlcicsXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkYnJvd3NlciwgICAkcSwgICAkJHEsICAgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcblxuICAgIHZhciBkZWZlcnJlZHMgPSB7fTtcblxuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAgKiBAbmFtZSAkdGltZW91dFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogQW5ndWxhckpTJ3Mgd3JhcHBlciBmb3IgYHdpbmRvdy5zZXRUaW1lb3V0YC4gVGhlIGBmbmAgZnVuY3Rpb24gaXMgd3JhcHBlZCBpbnRvIGEgdHJ5L2NhdGNoXG4gICAgICAqIGJsb2NrIGFuZCBkZWxlZ2F0ZXMgYW55IGV4Y2VwdGlvbnMgdG9cbiAgICAgICoge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxuICAgICAgKlxuICAgICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIGNhbGxpbmcgYCR0aW1lb3V0YCBpcyBhIHByb21pc2UsIHdoaWNoIHdpbGwgYmUgcmVzb2x2ZWQgd2hlblxuICAgICAgKiB0aGUgZGVsYXkgaGFzIHBhc3NlZCBhbmQgdGhlIHRpbWVvdXQgZnVuY3Rpb24sIGlmIHByb3ZpZGVkLCBpcyBleGVjdXRlZC5cbiAgICAgICpcbiAgICAgICogVG8gY2FuY2VsIGEgdGltZW91dCByZXF1ZXN0LCBjYWxsIGAkdGltZW91dC5jYW5jZWwocHJvbWlzZSlgLlxuICAgICAgKlxuICAgICAgKiBJbiB0ZXN0cyB5b3UgY2FuIHVzZSB7QGxpbmsgbmdNb2NrLiR0aW1lb3V0IGAkdGltZW91dC5mbHVzaCgpYH0gdG9cbiAgICAgICogc3luY2hyb25vdXNseSBmbHVzaCB0aGUgcXVldWUgb2YgZGVmZXJyZWQgZnVuY3Rpb25zLlxuICAgICAgKlxuICAgICAgKiBJZiB5b3Ugb25seSB3YW50IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYWZ0ZXIgc29tZSBzcGVjaWZpZWQgZGVsYXlcbiAgICAgICogdGhlbiB5b3UgY2FuIGNhbGwgYCR0aW1lb3V0YCB3aXRob3V0IHRoZSBgZm5gIGZ1bmN0aW9uLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk9fSBmbiBBIGZ1bmN0aW9uLCB3aG9zZSBleGVjdXRpb24gc2hvdWxkIGJlIGRlbGF5ZWQuXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gW2RlbGF5PTBdIERlbGF5IGluIG1pbGxpc2Vjb25kcy5cbiAgICAgICogQHBhcmFtIHtib29sZWFuPX0gW2ludm9rZUFwcGx5PXRydWVdIElmIHNldCB0byBgZmFsc2VgIHNraXBzIG1vZGVsIGRpcnR5IGNoZWNraW5nLCBvdGhlcndpc2VcbiAgICAgICogICB3aWxsIGludm9rZSBgZm5gIHdpdGhpbiB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5ICRhcHBseX0gYmxvY2suXG4gICAgICAqIEBwYXJhbSB7Li4uKj19IFBhc3MgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHRoZSBleGVjdXRlZCBmdW5jdGlvbi5cbiAgICAgICogQHJldHVybnMge1Byb21pc2V9IFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdoZW4gdGhlIHRpbWVvdXQgaXMgcmVhY2hlZC4gVGhlIHByb21pc2VcbiAgICAgICogICB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgYGZuYCBmdW5jdGlvbi5cbiAgICAgICpcbiAgICAgICovXG4gICAgZnVuY3Rpb24gdGltZW91dChmbiwgZGVsYXksIGludm9rZUFwcGx5KSB7XG4gICAgICBpZiAoIWlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgIGludm9rZUFwcGx5ID0gZGVsYXk7XG4gICAgICAgIGRlbGF5ID0gZm47XG4gICAgICAgIGZuID0gbm9vcDtcbiAgICAgIH1cblxuICAgICAgdmFyIGFyZ3MgPSBzbGljZUFyZ3MoYXJndW1lbnRzLCAzKSxcbiAgICAgICAgICBza2lwQXBwbHkgPSAoaXNEZWZpbmVkKGludm9rZUFwcGx5KSAmJiAhaW52b2tlQXBwbHkpLFxuICAgICAgICAgIGRlZmVycmVkID0gKHNraXBBcHBseSA/ICQkcSA6ICRxKS5kZWZlcigpLFxuICAgICAgICAgIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICAgIHRpbWVvdXRJZDtcblxuICAgICAgdGltZW91dElkID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmbi5hcHBseShudWxsLCBhcmdzKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZSk7XG4gICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgZGVsZXRlIGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2tpcEFwcGx5KSAkcm9vdFNjb3BlLiRhcHBseSgpO1xuICAgICAgfSwgZGVsYXkpO1xuXG4gICAgICBwcm9taXNlLiQkdGltZW91dElkID0gdGltZW91dElkO1xuICAgICAgZGVmZXJyZWRzW3RpbWVvdXRJZF0gPSBkZWZlcnJlZDtcblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG5cbiAgICAgLyoqXG4gICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICogQG5hbWUgJHRpbWVvdXQjY2FuY2VsXG4gICAgICAqXG4gICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgKiBDYW5jZWxzIGEgdGFzayBhc3NvY2lhdGVkIHdpdGggdGhlIGBwcm9taXNlYC4gQXMgYSByZXN1bHQgb2YgdGhpcywgdGhlIHByb21pc2Ugd2lsbCBiZVxuICAgICAgKiByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge1Byb21pc2U9fSBwcm9taXNlIFByb21pc2UgcmV0dXJuZWQgYnkgdGhlIGAkdGltZW91dGAgZnVuY3Rpb24uXG4gICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdGFzayBoYXNuJ3QgZXhlY3V0ZWQgeWV0IGFuZCB3YXMgc3VjY2Vzc2Z1bGx5XG4gICAgICAqICAgY2FuY2VsZWQuXG4gICAgICAqL1xuICAgIHRpbWVvdXQuY2FuY2VsID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKHByb21pc2UgJiYgcHJvbWlzZS4kJHRpbWVvdXRJZCBpbiBkZWZlcnJlZHMpIHtcbiAgICAgICAgLy8gVGltZW91dCBjYW5jZWxzIHNob3VsZCBub3QgcmVwb3J0IGFuIHVuaGFuZGxlZCBwcm9taXNlLlxuICAgICAgICBtYXJrUUV4Y2VwdGlvbkhhbmRsZWQoZGVmZXJyZWRzW3Byb21pc2UuJCR0aW1lb3V0SWRdLnByb21pc2UpO1xuICAgICAgICBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF0ucmVqZWN0KCdjYW5jZWxlZCcpO1xuICAgICAgICBkZWxldGUgZGVmZXJyZWRzW3Byb21pc2UuJCR0aW1lb3V0SWRdO1xuICAgICAgICByZXR1cm4gJGJyb3dzZXIuZGVmZXIuY2FuY2VsKHByb21pc2UuJCR0aW1lb3V0SWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gdGltZW91dDtcbiAgfV07XG59XG5cbi8vIE5PVEU6ICBUaGUgdXNhZ2Ugb2Ygd2luZG93IGFuZCBkb2N1bWVudCBpbnN0ZWFkIG9mICR3aW5kb3cgYW5kICRkb2N1bWVudCBoZXJlIGlzXG4vLyBkZWxpYmVyYXRlLiAgVGhpcyBzZXJ2aWNlIGRlcGVuZHMgb24gdGhlIHNwZWNpZmljIGJlaGF2aW9yIG9mIGFuY2hvciBub2RlcyBjcmVhdGVkIGJ5IHRoZVxuLy8gYnJvd3NlciAocmVzb2x2aW5nIGFuZCBwYXJzaW5nIFVSTHMpIHRoYXQgaXMgdW5saWtlbHkgdG8gYmUgcHJvdmlkZWQgYnkgbW9jayBvYmplY3RzIGFuZFxuLy8gY2F1c2UgdXMgdG8gYnJlYWsgdGVzdHMuICBJbiBhZGRpdGlvbiwgd2hlbiB0aGUgYnJvd3NlciByZXNvbHZlcyBhIFVSTCBmb3IgWEhSLCBpdFxuLy8gZG9lc24ndCBrbm93IGFib3V0IG1vY2tlZCBsb2NhdGlvbnMgYW5kIHJlc29sdmVzIFVSTHMgdG8gdGhlIHJlYWwgZG9jdW1lbnQgLSB3aGljaCBpc1xuLy8gZXhhY3RseSB0aGUgYmVoYXZpb3IgbmVlZGVkIGhlcmUuICBUaGVyZSBpcyBsaXR0bGUgdmFsdWUgaXMgbW9ja2luZyB0aGVzZSBvdXQgZm9yIHRoaXNcbi8vIHNlcnZpY2UuXG52YXIgdXJsUGFyc2luZ05vZGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xudmFyIG9yaWdpblVybCA9IHVybFJlc29sdmUod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG5cbi8qKlxuICpcbiAqIEltcGxlbWVudGF0aW9uIE5vdGVzIGZvciBub24tSUUgYnJvd3NlcnNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEFzc2lnbmluZyBhIFVSTCB0byB0aGUgaHJlZiBwcm9wZXJ0eSBvZiBhbiBhbmNob3IgRE9NIG5vZGUsIGV2ZW4gb25lIGF0dGFjaGVkIHRvIHRoZSBET00sXG4gKiByZXN1bHRzIGJvdGggaW4gdGhlIG5vcm1hbGl6aW5nIGFuZCBwYXJzaW5nIG9mIHRoZSBVUkwuICBOb3JtYWxpemluZyBtZWFucyB0aGF0IGEgcmVsYXRpdmVcbiAqIFVSTCB3aWxsIGJlIHJlc29sdmVkIGludG8gYW4gYWJzb2x1dGUgVVJMIGluIHRoZSBjb250ZXh0IG9mIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudC5cbiAqIFBhcnNpbmcgbWVhbnMgdGhhdCB0aGUgYW5jaG9yIG5vZGUncyBob3N0LCBob3N0bmFtZSwgcHJvdG9jb2wsIHBvcnQsIHBhdGhuYW1lIGFuZCByZWxhdGVkXG4gKiBwcm9wZXJ0aWVzIGFyZSBhbGwgcG9wdWxhdGVkIHRvIHJlZmxlY3QgdGhlIG5vcm1hbGl6ZWQgVVJMLiAgVGhpcyBhcHByb2FjaCBoYXMgd2lkZVxuICogY29tcGF0aWJpbGl0eSAtIFNhZmFyaSAxKywgTW96aWxsYSAxKyBldGMuICBTZWVcbiAqIGh0dHA6Ly93d3cuYXB0YW5hLmNvbS9yZWZlcmVuY2UvaHRtbC9hcGkvSFRNTEFuY2hvckVsZW1lbnQuaHRtbFxuICpcbiAqIEltcGxlbWVudGF0aW9uIE5vdGVzIGZvciBJRVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBJRSA8PSAxMCBub3JtYWxpemVzIHRoZSBVUkwgd2hlbiBhc3NpZ25lZCB0byB0aGUgYW5jaG9yIG5vZGUgc2ltaWxhciB0byB0aGUgb3RoZXJcbiAqIGJyb3dzZXJzLiAgSG93ZXZlciwgdGhlIHBhcnNlZCBjb21wb25lbnRzIHdpbGwgbm90IGJlIHNldCBpZiB0aGUgVVJMIGFzc2lnbmVkIGRpZCBub3Qgc3BlY2lmeVxuICogdGhlbS4gIChlLmcuIGlmIHlvdSBhc3NpZ24gYS5ocmVmID0gXCJmb29cIiwgdGhlbiBhLnByb3RvY29sLCBhLmhvc3QsIGV0Yy4gd2lsbCBiZSBlbXB0eS4pICBXZVxuICogd29yayBhcm91bmQgdGhhdCBieSBwZXJmb3JtaW5nIHRoZSBwYXJzaW5nIGluIGEgMm5kIHN0ZXAgYnkgdGFraW5nIGEgcHJldmlvdXNseSBub3JtYWxpemVkXG4gKiBVUkwgKGUuZy4gYnkgYXNzaWduaW5nIHRvIGEuaHJlZikgYW5kIGFzc2lnbmluZyBpdCBhLmhyZWYgYWdhaW4uICBUaGlzIGNvcnJlY3RseSBwb3B1bGF0ZXMgdGhlXG4gKiBwcm9wZXJ0aWVzIHN1Y2ggYXMgcHJvdG9jb2wsIGhvc3RuYW1lLCBwb3J0LCBldGMuXG4gKlxuICogUmVmZXJlbmNlczpcbiAqICAgaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTEFuY2hvckVsZW1lbnRcbiAqICAgaHR0cDovL3d3dy5hcHRhbmEuY29tL3JlZmVyZW5jZS9odG1sL2FwaS9IVE1MQW5jaG9yRWxlbWVudC5odG1sXG4gKiAgIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICogICBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMjkwMlxuICogICBodHRwOi8vamFtZXMucGFkb2xzZXkuY29tL2phdmFzY3JpcHQvcGFyc2luZy11cmxzLXdpdGgtdGhlLWRvbS9cbiAqXG4gKiBAa2luZCBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZC5cbiAqIEBkZXNjcmlwdGlvbiBOb3JtYWxpemVzIGFuZCBwYXJzZXMgYSBVUkwuXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBSZXR1cm5zIHRoZSBub3JtYWxpemVkIFVSTCBhcyBhIGRpY3Rpb25hcnkuXG4gKlxuICogICB8IG1lbWJlciBuYW1lICAgfCBEZXNjcmlwdGlvbiAgICB8XG4gKiAgIHwtLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXxcbiAqICAgfCBocmVmICAgICAgICAgIHwgQSBub3JtYWxpemVkIHZlcnNpb24gb2YgdGhlIHByb3ZpZGVkIFVSTCBpZiBpdCB3YXMgbm90IGFuIGFic29sdXRlIFVSTCB8XG4gKiAgIHwgcHJvdG9jb2wgICAgICB8IFRoZSBwcm90b2NvbCBpbmNsdWRpbmcgdGhlIHRyYWlsaW5nIGNvbG9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8IGhvc3QgICAgICAgICAgfCBUaGUgaG9zdCBhbmQgcG9ydCAoaWYgdGhlIHBvcnQgaXMgbm9uLWRlZmF1bHQpIG9mIHRoZSBub3JtYWxpemVkVXJsICAgIHxcbiAqICAgfCBzZWFyY2ggICAgICAgIHwgVGhlIHNlYXJjaCBwYXJhbXMsIG1pbnVzIHRoZSBxdWVzdGlvbiBtYXJrICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgIHwgaGFzaCAgICAgICAgICB8IFRoZSBoYXNoIHN0cmluZywgbWludXMgdGhlIGhhc2ggc3ltYm9sXG4gKiAgIHwgaG9zdG5hbWUgICAgICB8IFRoZSBob3N0bmFtZVxuICogICB8IHBvcnQgICAgICAgICAgfCBUaGUgcG9ydCwgd2l0aG91dCBcIjpcIlxuICogICB8IHBhdGhuYW1lICAgICAgfCBUaGUgcGF0aG5hbWUsIGJlZ2lubmluZyB3aXRoIFwiL1wiXG4gKlxuICovXG5mdW5jdGlvbiB1cmxSZXNvbHZlKHVybCkge1xuICB2YXIgaHJlZiA9IHVybDtcblxuICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbiAgaWYgKG1zaWUpIHtcbiAgICAvLyBOb3JtYWxpemUgYmVmb3JlIHBhcnNlLiAgUmVmZXIgSW1wbGVtZW50YXRpb24gTm90ZXMgb24gd2h5IHRoaXMgaXNcbiAgICAvLyBkb25lIGluIHR3byBzdGVwcyBvbiBJRS5cbiAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgfVxuXG4gIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgcmV0dXJuIHtcbiAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG4gICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcbiAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKVxuICAgICAgPyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgOiAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICB9O1xufVxuXG4vKipcbiAqIFBhcnNlIGEgcmVxdWVzdCBVUkwgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoaXMgaXMgYSBzYW1lLW9yaWdpbiByZXF1ZXN0IGFzIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IHJlcXVlc3RVcmwgVGhlIHVybCBvZiB0aGUgcmVxdWVzdCBhcyBhIHN0cmluZyB0aGF0IHdpbGwgYmUgcmVzb2x2ZWRcbiAqIG9yIGEgcGFyc2VkIFVSTCBvYmplY3QuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcmVxdWVzdCBpcyBmb3IgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudC5cbiAqL1xuZnVuY3Rpb24gdXJsSXNTYW1lT3JpZ2luKHJlcXVlc3RVcmwpIHtcbiAgdmFyIHBhcnNlZCA9IChpc1N0cmluZyhyZXF1ZXN0VXJsKSkgPyB1cmxSZXNvbHZlKHJlcXVlc3RVcmwpIDogcmVxdWVzdFVybDtcbiAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVybC5wcm90b2NvbCAmJlxuICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VcmwuaG9zdCk7XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICR3aW5kb3dcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHJlZmVyZW5jZSB0byB0aGUgYnJvd3NlcidzIGB3aW5kb3dgIG9iamVjdC4gV2hpbGUgYHdpbmRvd2BcbiAqIGlzIGdsb2JhbGx5IGF2YWlsYWJsZSBpbiBKYXZhU2NyaXB0LCBpdCBjYXVzZXMgdGVzdGFiaWxpdHkgcHJvYmxlbXMsIGJlY2F1c2VcbiAqIGl0IGlzIGEgZ2xvYmFsIHZhcmlhYmxlLiBJbiBBbmd1bGFySlMgd2UgYWx3YXlzIHJlZmVyIHRvIGl0IHRocm91Z2ggdGhlXG4gKiBgJHdpbmRvd2Agc2VydmljZSwgc28gaXQgbWF5IGJlIG92ZXJyaWRkZW4sIHJlbW92ZWQgb3IgbW9ja2VkIGZvciB0ZXN0aW5nLlxuICpcbiAqIEV4cHJlc3Npb25zLCBsaWtlIHRoZSBvbmUgZGVmaW5lZCBmb3IgdGhlIGBuZ0NsaWNrYCBkaXJlY3RpdmUgaW4gdGhlIGV4YW1wbGVcbiAqIGJlbG93LCBhcmUgZXZhbHVhdGVkIHdpdGggcmVzcGVjdCB0byB0aGUgY3VycmVudCBzY29wZS4gIFRoZXJlZm9yZSwgdGhlcmUgaXNcbiAqIG5vIHJpc2sgb2YgaW5hZHZlcnRlbnRseSBjb2RpbmcgaW4gYSBkZXBlbmRlbmN5IG9uIGEgZ2xvYmFsIHZhbHVlIGluIHN1Y2ggYW5cbiAqIGV4cHJlc3Npb24uXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cIndpbmRvd0V4YW1wbGVcIiBuYW1lPVwid2luZG93LXNlcnZpY2VcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3dpbmRvd0V4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHdpbmRvdycsIGZ1bmN0aW9uKCRzY29wZSwgJHdpbmRvdykge1xuICAgICAgICAgICAgICRzY29wZS5ncmVldGluZyA9ICdIZWxsbywgV29ybGQhJztcbiAgICAgICAgICAgICAkc2NvcGUuZG9HcmVldGluZyA9IGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gICAgICAgICAgICAgICAkd2luZG93LmFsZXJ0KGdyZWV0aW5nKTtcbiAgICAgICAgICAgICB9O1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiZ3JlZXRpbmdcIiBhcmlhLWxhYmVsPVwiZ3JlZXRpbmdcIiAvPlxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImRvR3JlZXRpbmcoZ3JlZXRpbmcpXCI+QUxFUlQ8L2J1dHRvbj5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGRpc3BsYXkgdGhlIGdyZWV0aW5nIGluIHRoZSBpbnB1dCBib3gnLCBmdW5jdGlvbigpIHtcbiAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdncmVldGluZycpKS5zZW5kS2V5cygnSGVsbG8sIEUyRSBUZXN0cycpO1xuICAgICAgIC8vIElmIHdlIGNsaWNrIHRoZSBidXR0b24gaXQgd2lsbCBibG9jayB0aGUgdGVzdCBydW5uZXJcbiAgICAgICAvLyBlbGVtZW50KCc6YnV0dG9uJykuY2xpY2soKTtcbiAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uICRXaW5kb3dQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gdmFsdWVGbih3aW5kb3cpO1xufVxuXG4vKipcbiAqIEBuYW1lICQkY29va2llUmVhZGVyXG4gKiBAcmVxdWlyZXMgJGRvY3VtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIGlzIGEgcHJpdmF0ZSBzZXJ2aWNlIGZvciByZWFkaW5nIGNvb2tpZXMgdXNlZCBieSAkaHR0cCBhbmQgbmdDb29raWVzXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSBhIGtleS92YWx1ZSBtYXAgb2YgdGhlIGN1cnJlbnQgY29va2llc1xuICovXG5mdW5jdGlvbiAkJENvb2tpZVJlYWRlcigkZG9jdW1lbnQpIHtcbiAgdmFyIHJhd0RvY3VtZW50ID0gJGRvY3VtZW50WzBdIHx8IHt9O1xuICB2YXIgbGFzdENvb2tpZXMgPSB7fTtcbiAgdmFyIGxhc3RDb29raWVTdHJpbmcgPSAnJztcblxuICBmdW5jdGlvbiBzYWZlR2V0Q29va2llKHJhd0RvY3VtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiByYXdEb2N1bWVudC5jb29raWUgfHwgJyc7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNhZmVEZWNvZGVVUklDb21wb25lbnQoc3RyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoc3RyKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29va2llQXJyYXksIGNvb2tpZSwgaSwgaW5kZXgsIG5hbWU7XG4gICAgdmFyIGN1cnJlbnRDb29raWVTdHJpbmcgPSBzYWZlR2V0Q29va2llKHJhd0RvY3VtZW50KTtcblxuICAgIGlmIChjdXJyZW50Q29va2llU3RyaW5nICE9PSBsYXN0Q29va2llU3RyaW5nKSB7XG4gICAgICBsYXN0Q29va2llU3RyaW5nID0gY3VycmVudENvb2tpZVN0cmluZztcbiAgICAgIGNvb2tpZUFycmF5ID0gbGFzdENvb2tpZVN0cmluZy5zcGxpdCgnOyAnKTtcbiAgICAgIGxhc3RDb29raWVzID0ge307XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjb29raWVBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb29raWUgPSBjb29raWVBcnJheVtpXTtcbiAgICAgICAgaW5kZXggPSBjb29raWUuaW5kZXhPZignPScpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7IC8vaWdub3JlIG5hbWVsZXNzIGNvb2tpZXNcbiAgICAgICAgICBuYW1lID0gc2FmZURlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKDAsIGluZGV4KSk7XG4gICAgICAgICAgLy8gdGhlIGZpcnN0IHZhbHVlIHRoYXQgaXMgc2VlbiBmb3IgYSBjb29raWUgaXMgdGhlIG1vc3RcbiAgICAgICAgICAvLyBzcGVjaWZpYyBvbmUuICB2YWx1ZXMgZm9yIHRoZSBzYW1lIGNvb2tpZSBuYW1lIHRoYXRcbiAgICAgICAgICAvLyBmb2xsb3cgYXJlIGZvciBsZXNzIHNwZWNpZmljIHBhdGhzLlxuICAgICAgICAgIGlmIChpc1VuZGVmaW5lZChsYXN0Q29va2llc1tuYW1lXSkpIHtcbiAgICAgICAgICAgIGxhc3RDb29raWVzW25hbWVdID0gc2FmZURlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKGluZGV4ICsgMSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGFzdENvb2tpZXM7XG4gIH07XG59XG5cbiQkQ29va2llUmVhZGVyLiRpbmplY3QgPSBbJyRkb2N1bWVudCddO1xuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICQkQ29va2llUmVhZGVyUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9ICQkQ29va2llUmVhZGVyO1xufVxuXG4vKiBnbG9iYWwgY3VycmVuY3lGaWx0ZXI6IHRydWUsXG4gZGF0ZUZpbHRlcjogdHJ1ZSxcbiBmaWx0ZXJGaWx0ZXI6IHRydWUsXG4ganNvbkZpbHRlcjogdHJ1ZSxcbiBsaW1pdFRvRmlsdGVyOiB0cnVlLFxuIGxvd2VyY2FzZUZpbHRlcjogdHJ1ZSxcbiBudW1iZXJGaWx0ZXI6IHRydWUsXG4gb3JkZXJCeUZpbHRlcjogdHJ1ZSxcbiB1cHBlcmNhc2VGaWx0ZXI6IHRydWUsXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRmaWx0ZXJQcm92aWRlclxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogRmlsdGVycyBhcmUganVzdCBmdW5jdGlvbnMgd2hpY2ggdHJhbnNmb3JtIGlucHV0IHRvIGFuIG91dHB1dC4gSG93ZXZlciBmaWx0ZXJzIG5lZWQgdG8gYmVcbiAqIERlcGVuZGVuY3kgSW5qZWN0ZWQuIFRvIGFjaGlldmUgdGhpcyBhIGZpbHRlciBkZWZpbml0aW9uIGNvbnNpc3RzIG9mIGEgZmFjdG9yeSBmdW5jdGlvbiB3aGljaCBpc1xuICogYW5ub3RhdGVkIHdpdGggZGVwZW5kZW5jaWVzIGFuZCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgYSBmaWx0ZXIgZnVuY3Rpb24uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBGaWx0ZXIgbmFtZXMgbXVzdCBiZSB2YWxpZCBBbmd1bGFySlMge0BsaW5rIGV4cHJlc3Npb259IGlkZW50aWZpZXJzLCBzdWNoIGFzIGB1cHBlcmNhc2VgIG9yIGBvcmRlckJ5YC5cbiAqIE5hbWVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGh5cGhlbnMgYW5kIGRvdHMsIGFyZSBub3QgYWxsb3dlZC4gSWYgeW91IHdpc2ggdG8gbmFtZXNwYWNlXG4gKiB5b3VyIGZpbHRlcnMsIHRoZW4geW91IGNhbiB1c2UgY2FwaXRhbGl6YXRpb24gKGBteWFwcFN1YnNlY3Rpb25GaWx0ZXJ4YCkgb3IgdW5kZXJzY29yZXNcbiAqIChgbXlhcHBfc3Vic2VjdGlvbl9maWx0ZXJ4YCkuXG4gKiA8L2Rpdj5cbiAqXG4gKiBgYGBqc1xuICogICAvLyBGaWx0ZXIgcmVnaXN0cmF0aW9uXG4gKiAgIGZ1bmN0aW9uIE15TW9kdWxlKCRwcm92aWRlLCAkZmlsdGVyUHJvdmlkZXIpIHtcbiAqICAgICAvLyBjcmVhdGUgYSBzZXJ2aWNlIHRvIGRlbW9uc3RyYXRlIGluamVjdGlvbiAobm90IGFsd2F5cyBuZWVkZWQpXG4gKiAgICAgJHByb3ZpZGUudmFsdWUoJ2dyZWV0JywgZnVuY3Rpb24obmFtZSl7XG4gKiAgICAgICByZXR1cm4gJ0hlbGxvICcgKyBuYW1lICsgJyEnO1xuICogICAgIH0pO1xuICpcbiAqICAgICAvLyByZWdpc3RlciBhIGZpbHRlciBmYWN0b3J5IHdoaWNoIHVzZXMgdGhlXG4gKiAgICAgLy8gZ3JlZXQgc2VydmljZSB0byBkZW1vbnN0cmF0ZSBESS5cbiAqICAgICAkZmlsdGVyUHJvdmlkZXIucmVnaXN0ZXIoJ2dyZWV0JywgZnVuY3Rpb24oZ3JlZXQpe1xuICogICAgICAgLy8gcmV0dXJuIHRoZSBmaWx0ZXIgZnVuY3Rpb24gd2hpY2ggdXNlcyB0aGUgZ3JlZXQgc2VydmljZVxuICogICAgICAgLy8gdG8gZ2VuZXJhdGUgc2FsdXRhdGlvblxuICogICAgICAgcmV0dXJuIGZ1bmN0aW9uKHRleHQpIHtcbiAqICAgICAgICAgLy8gZmlsdGVycyBuZWVkIHRvIGJlIGZvcmdpdmluZyBzbyBjaGVjayBpbnB1dCB2YWxpZGl0eVxuICogICAgICAgICByZXR1cm4gdGV4dCAmJiBncmVldCh0ZXh0KSB8fCB0ZXh0O1xuICogICAgICAgfTtcbiAqICAgICB9KTtcbiAqICAgfVxuICogYGBgXG4gKlxuICogVGhlIGZpbHRlciBmdW5jdGlvbiBpcyByZWdpc3RlcmVkIHdpdGggdGhlIGAkaW5qZWN0b3JgIHVuZGVyIHRoZSBmaWx0ZXIgbmFtZSBzdWZmaXggd2l0aFxuICogYEZpbHRlcmAuXG4gKlxuICogYGBganNcbiAqICAgaXQoJ3Nob3VsZCBiZSB0aGUgc2FtZSBpbnN0YW5jZScsIGluamVjdChcbiAqICAgICBmdW5jdGlvbigkZmlsdGVyUHJvdmlkZXIpIHtcbiAqICAgICAgICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcigncmV2ZXJzZScsIGZ1bmN0aW9uKCl7XG4gKiAgICAgICAgIHJldHVybiAuLi47XG4gKiAgICAgICB9KTtcbiAqICAgICB9LFxuICogICAgIGZ1bmN0aW9uKCRmaWx0ZXIsIHJldmVyc2VGaWx0ZXIpIHtcbiAqICAgICAgIGV4cGVjdCgkZmlsdGVyKCdyZXZlcnNlJykpLnRvQmUocmV2ZXJzZUZpbHRlcik7XG4gKiAgICAgfSk7XG4gKiBgYGBcbiAqXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgaG93IEFuZ3VsYXJKUyBmaWx0ZXJzIHdvcmssIGFuZCBob3cgdG8gY3JlYXRlIHlvdXIgb3duIGZpbHRlcnMsIHNlZVxuICoge0BsaW5rIGd1aWRlL2ZpbHRlciBGaWx0ZXJzfSBpbiB0aGUgQW5ndWxhckpTIERldmVsb3BlciBHdWlkZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkZmlsdGVyXG4gKiBAa2luZCBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uXG4gKiBGaWx0ZXJzIGFyZSB1c2VkIGZvciBmb3JtYXR0aW5nIGRhdGEgZGlzcGxheWVkIHRvIHRoZSB1c2VyLlxuICpcbiAqIFRoZXkgY2FuIGJlIHVzZWQgaW4gdmlldyB0ZW1wbGF0ZXMsIGNvbnRyb2xsZXJzIG9yIHNlcnZpY2VzLiBBbmd1bGFySlMgY29tZXNcbiAqIHdpdGggYSBjb2xsZWN0aW9uIG9mIFtidWlsdC1pbiBmaWx0ZXJzXShhcGkvbmcvZmlsdGVyKSwgYnV0IGl0IGlzIGVhc3kgdG9cbiAqIGRlZmluZSB5b3VyIG93biBhcyB3ZWxsLlxuICpcbiAqIFRoZSBnZW5lcmFsIHN5bnRheCBpbiB0ZW1wbGF0ZXMgaXMgYXMgZm9sbG93czpcbiAqXG4gKiBgYGBodG1sXG4gKiB7eyBleHByZXNzaW9uIFt8IGZpbHRlcl9uYW1lWzpwYXJhbWV0ZXJfdmFsdWVdIC4uLiBdIH19XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBmaWx0ZXIgZnVuY3Rpb24gdG8gcmV0cmlldmVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aGUgZmlsdGVyIGZ1bmN0aW9uXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIiRmaWx0ZXJcIiBtb2R1bGU9XCJmaWx0ZXJFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkN0cmxcIj5cbiAgICAgICAgPGgzPnt7IG9yaWdpbmFsVGV4dCB9fTwvaDM+XG4gICAgICAgIDxoMz57eyBmaWx0ZXJlZFRleHQgfX08L2gzPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2ZpbHRlckV4YW1wbGUnLCBbXSlcbiAgICAgIC5jb250cm9sbGVyKCdNYWluQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGZpbHRlcikge1xuICAgICAgICAkc2NvcGUub3JpZ2luYWxUZXh0ID0gJ2hlbGxvJztcbiAgICAgICAgJHNjb3BlLmZpbHRlcmVkVGV4dCA9ICRmaWx0ZXIoJ3VwcGVyY2FzZScpKCRzY29wZS5vcmlnaW5hbFRleHQpO1xuICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAgKi9cbiRGaWx0ZXJQcm92aWRlci4kaW5qZWN0ID0gWyckcHJvdmlkZSddO1xuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkRmlsdGVyUHJvdmlkZXIoJHByb3ZpZGUpIHtcbiAgdmFyIHN1ZmZpeCA9ICdGaWx0ZXInO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRmaWx0ZXJQcm92aWRlciNyZWdpc3RlclxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgTmFtZSBvZiB0aGUgZmlsdGVyIGZ1bmN0aW9uLCBvciBhbiBvYmplY3QgbWFwIG9mIGZpbHRlcnMgd2hlcmVcbiAgICogICAgdGhlIGtleXMgYXJlIHRoZSBmaWx0ZXIgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmaWx0ZXIgZmFjdG9yaWVzLlxuICAgKlxuICAgKiAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAgICAqKk5vdGU6KiogRmlsdGVyIG5hbWVzIG11c3QgYmUgdmFsaWQgQW5ndWxhckpTIHtAbGluayBleHByZXNzaW9ufSBpZGVudGlmaWVycywgc3VjaCBhcyBgdXBwZXJjYXNlYCBvciBgb3JkZXJCeWAuXG4gICAqICAgIE5hbWVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGh5cGhlbnMgYW5kIGRvdHMsIGFyZSBub3QgYWxsb3dlZC4gSWYgeW91IHdpc2ggdG8gbmFtZXNwYWNlXG4gICAqICAgIHlvdXIgZmlsdGVycywgdGhlbiB5b3UgY2FuIHVzZSBjYXBpdGFsaXphdGlvbiAoYG15YXBwU3Vic2VjdGlvbkZpbHRlcnhgKSBvciB1bmRlcnNjb3Jlc1xuICAgKiAgICAoYG15YXBwX3N1YnNlY3Rpb25fZmlsdGVyeGApLlxuICAgKiAgICA8L2Rpdj5cbiAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3RvcnkgSWYgdGhlIGZpcnN0IGFyZ3VtZW50IHdhcyBhIHN0cmluZywgYSBmYWN0b3J5IGZ1bmN0aW9uIGZvciB0aGUgZmlsdGVyIHRvIGJlIHJlZ2lzdGVyZWQuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJlZ2lzdGVyZWQgZmlsdGVyIGluc3RhbmNlLCBvciBpZiBhIG1hcCBvZiBmaWx0ZXJzIHdhcyBwcm92aWRlZCB0aGVuIGEgbWFwXG4gICAqICAgIG9mIHRoZSByZWdpc3RlcmVkIGZpbHRlciBpbnN0YW5jZXMuXG4gICAqL1xuICBmdW5jdGlvbiByZWdpc3RlcihuYW1lLCBmYWN0b3J5KSB7XG4gICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICB2YXIgZmlsdGVycyA9IHt9O1xuICAgICAgZm9yRWFjaChuYW1lLCBmdW5jdGlvbihmaWx0ZXIsIGtleSkge1xuICAgICAgICBmaWx0ZXJzW2tleV0gPSByZWdpc3RlcihrZXksIGZpbHRlcik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmaWx0ZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJHByb3ZpZGUuZmFjdG9yeShuYW1lICsgc3VmZml4LCBmYWN0b3J5KTtcbiAgICB9XG4gIH1cbiAgdGhpcy5yZWdpc3RlciA9IHJlZ2lzdGVyO1xuXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiAkaW5qZWN0b3IuZ2V0KG5hbWUgKyBzdWZmaXgpO1xuICAgIH07XG4gIH1dO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKiBnbG9iYWxcbiAgICBjdXJyZW5jeUZpbHRlcjogZmFsc2UsXG4gICAgZGF0ZUZpbHRlcjogZmFsc2UsXG4gICAgZmlsdGVyRmlsdGVyOiBmYWxzZSxcbiAgICBqc29uRmlsdGVyOiBmYWxzZSxcbiAgICBsaW1pdFRvRmlsdGVyOiBmYWxzZSxcbiAgICBsb3dlcmNhc2VGaWx0ZXI6IGZhbHNlLFxuICAgIG51bWJlckZpbHRlcjogZmFsc2UsXG4gICAgb3JkZXJCeUZpbHRlcjogZmFsc2UsXG4gICAgdXBwZXJjYXNlRmlsdGVyOiBmYWxzZVxuICAqL1xuXG4gIHJlZ2lzdGVyKCdjdXJyZW5jeScsIGN1cnJlbmN5RmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ2RhdGUnLCBkYXRlRmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ2ZpbHRlcicsIGZpbHRlckZpbHRlcik7XG4gIHJlZ2lzdGVyKCdqc29uJywganNvbkZpbHRlcik7XG4gIHJlZ2lzdGVyKCdsaW1pdFRvJywgbGltaXRUb0ZpbHRlcik7XG4gIHJlZ2lzdGVyKCdsb3dlcmNhc2UnLCBsb3dlcmNhc2VGaWx0ZXIpO1xuICByZWdpc3RlcignbnVtYmVyJywgbnVtYmVyRmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ29yZGVyQnknLCBvcmRlckJ5RmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ3VwcGVyY2FzZScsIHVwcGVyY2FzZUZpbHRlcik7XG59XG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgZmlsdGVyXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU2VsZWN0cyBhIHN1YnNldCBvZiBpdGVtcyBmcm9tIGBhcnJheWAgYW5kIHJldHVybnMgaXQgYXMgYSBuZXcgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvdXJjZSBhcnJheS5cbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAgICoqTm90ZSoqOiBJZiB0aGUgYXJyYXkgY29udGFpbnMgb2JqZWN0cyB0aGF0IHJlZmVyZW5jZSB0aGVtc2VsdmVzLCBmaWx0ZXJpbmcgaXMgbm90IHBvc3NpYmxlLlxuICogPC9kaXY+XG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R8ZnVuY3Rpb24oKX0gZXhwcmVzc2lvbiBUaGUgcHJlZGljYXRlIHRvIGJlIHVzZWQgZm9yIHNlbGVjdGluZyBpdGVtcyBmcm9tXG4gKiAgIGBhcnJheWAuXG4gKlxuICogICBDYW4gYmUgb25lIG9mOlxuICpcbiAqICAgLSBgc3RyaW5nYDogVGhlIHN0cmluZyBpcyB1c2VkIGZvciBtYXRjaGluZyBhZ2FpbnN0IHRoZSBjb250ZW50cyBvZiB0aGUgYGFycmF5YC4gQWxsIHN0cmluZ3Mgb3JcbiAqICAgICBvYmplY3RzIHdpdGggc3RyaW5nIHByb3BlcnRpZXMgaW4gYGFycmF5YCB0aGF0IG1hdGNoIHRoaXMgc3RyaW5nIHdpbGwgYmUgcmV0dXJuZWQuIFRoaXMgYWxzb1xuICogICAgIGFwcGxpZXMgdG8gbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzLlxuICogICAgIFRoZSBwcmVkaWNhdGUgY2FuIGJlIG5lZ2F0ZWQgYnkgcHJlZml4aW5nIHRoZSBzdHJpbmcgd2l0aCBgIWAuXG4gKlxuICogICAtIGBPYmplY3RgOiBBIHBhdHRlcm4gb2JqZWN0IGNhbiBiZSB1c2VkIHRvIGZpbHRlciBzcGVjaWZpYyBwcm9wZXJ0aWVzIG9uIG9iamVjdHMgY29udGFpbmVkXG4gKiAgICAgYnkgYGFycmF5YC4gRm9yIGV4YW1wbGUgYHtuYW1lOlwiTVwiLCBwaG9uZTpcIjFcIn1gIHByZWRpY2F0ZSB3aWxsIHJldHVybiBhbiBhcnJheSBvZiBpdGVtc1xuICogICAgIHdoaWNoIGhhdmUgcHJvcGVydHkgYG5hbWVgIGNvbnRhaW5pbmcgXCJNXCIgYW5kIHByb3BlcnR5IGBwaG9uZWAgY29udGFpbmluZyBcIjFcIi4gQSBzcGVjaWFsXG4gKiAgICAgcHJvcGVydHkgbmFtZSAoYCRgIGJ5IGRlZmF1bHQpIGNhbiBiZSB1c2VkIChlLmcuIGFzIGluIGB7JDogXCJ0ZXh0XCJ9YCkgdG8gYWNjZXB0IGEgbWF0Y2hcbiAqICAgICBhZ2FpbnN0IGFueSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0IG9yIGl0cyBuZXN0ZWQgb2JqZWN0IHByb3BlcnRpZXMuIFRoYXQncyBlcXVpdmFsZW50IHRvIHRoZVxuICogICAgIHNpbXBsZSBzdWJzdHJpbmcgbWF0Y2ggd2l0aCBhIGBzdHJpbmdgIGFzIGRlc2NyaWJlZCBhYm92ZS4gVGhlIHNwZWNpYWwgcHJvcGVydHkgbmFtZSBjYW4gYmVcbiAqICAgICBvdmVyd3JpdHRlbiwgdXNpbmcgdGhlIGBhbnlQcm9wZXJ0eUtleWAgcGFyYW1ldGVyLlxuICogICAgIFRoZSBwcmVkaWNhdGUgY2FuIGJlIG5lZ2F0ZWQgYnkgcHJlZml4aW5nIHRoZSBzdHJpbmcgd2l0aCBgIWAuXG4gKiAgICAgRm9yIGV4YW1wbGUgYHtuYW1lOiBcIiFNXCJ9YCBwcmVkaWNhdGUgd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgaXRlbXMgd2hpY2ggaGF2ZSBwcm9wZXJ0eSBgbmFtZWBcbiAqICAgICBub3QgY29udGFpbmluZyBcIk1cIi5cbiAqXG4gKiAgICAgTm90ZSB0aGF0IGEgbmFtZWQgcHJvcGVydHkgd2lsbCBtYXRjaCBwcm9wZXJ0aWVzIG9uIHRoZSBzYW1lIGxldmVsIG9ubHksIHdoaWxlIHRoZSBzcGVjaWFsXG4gKiAgICAgYCRgIHByb3BlcnR5IHdpbGwgbWF0Y2ggcHJvcGVydGllcyBvbiB0aGUgc2FtZSBsZXZlbCBvciBkZWVwZXIuIEUuZy4gYW4gYXJyYXkgaXRlbSBsaWtlXG4gKiAgICAgYHtuYW1lOiB7Zmlyc3Q6ICdKb2huJywgbGFzdDogJ0RvZSd9fWAgd2lsbCAqKm5vdCoqIGJlIG1hdGNoZWQgYnkgYHtuYW1lOiAnSm9obid9YCwgYnV0XG4gKiAgICAgKip3aWxsKiogYmUgbWF0Y2hlZCBieSBgeyQ6ICdKb2huJ31gLlxuICpcbiAqICAgLSBgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBhcnJheSlgOiBBIHByZWRpY2F0ZSBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byB3cml0ZSBhcmJpdHJhcnkgZmlsdGVycy5cbiAqICAgICBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIGZvciBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5LCB3aXRoIHRoZSBlbGVtZW50LCBpdHMgaW5kZXgsIGFuZFxuICogICAgIHRoZSBlbnRpcmUgYXJyYXkgaXRzZWxmIGFzIGFyZ3VtZW50cy5cbiAqXG4gKiAgICAgVGhlIGZpbmFsIHJlc3VsdCBpcyBhbiBhcnJheSBvZiB0aG9zZSBlbGVtZW50cyB0aGF0IHRoZSBwcmVkaWNhdGUgcmV0dXJuZWQgdHJ1ZSBmb3IuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKXx0cnVlfGZhbHNlfSBbY29tcGFyYXRvcl0gQ29tcGFyYXRvciB3aGljaCBpcyB1c2VkIGluXG4gKiAgICAgZGV0ZXJtaW5pbmcgaWYgdmFsdWVzIHJldHJpZXZlZCB1c2luZyBgZXhwcmVzc2lvbmAgKHdoZW4gaXQgaXMgbm90IGEgZnVuY3Rpb24pIHNob3VsZCBiZVxuICogICAgIGNvbnNpZGVyZWQgYSBtYXRjaCBiYXNlZCBvbiB0aGUgZXhwZWN0ZWQgdmFsdWUgKGZyb20gdGhlIGZpbHRlciBleHByZXNzaW9uKSBhbmQgYWN0dWFsXG4gKiAgICAgdmFsdWUgKGZyb20gdGhlIG9iamVjdCBpbiB0aGUgYXJyYXkpLlxuICpcbiAqICAgQ2FuIGJlIG9uZSBvZjpcbiAqXG4gKiAgIC0gYGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpYDpcbiAqICAgICBUaGUgZnVuY3Rpb24gd2lsbCBiZSBnaXZlbiB0aGUgb2JqZWN0IHZhbHVlIGFuZCB0aGUgcHJlZGljYXRlIHZhbHVlIHRvIGNvbXBhcmUgYW5kXG4gKiAgICAgc2hvdWxkIHJldHVybiB0cnVlIGlmIGJvdGggdmFsdWVzIHNob3VsZCBiZSBjb25zaWRlcmVkIGVxdWFsLlxuICpcbiAqICAgLSBgdHJ1ZWA6IEEgc2hvcnRoYW5kIGZvciBgZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZCkgeyByZXR1cm4gYW5ndWxhci5lcXVhbHMoYWN0dWFsLCBleHBlY3RlZCl9YC5cbiAqICAgICBUaGlzIGlzIGVzc2VudGlhbGx5IHN0cmljdCBjb21wYXJpc29uIG9mIGV4cGVjdGVkIGFuZCBhY3R1YWwuXG4gKlxuICogICAtIGBmYWxzZWA6IEEgc2hvcnQgaGFuZCBmb3IgYSBmdW5jdGlvbiB3aGljaCB3aWxsIGxvb2sgZm9yIGEgc3Vic3RyaW5nIG1hdGNoIGluIGEgY2FzZVxuICogICAgIGluc2Vuc2l0aXZlIHdheS4gUHJpbWl0aXZlIHZhbHVlcyBhcmUgY29udmVydGVkIHRvIHN0cmluZ3MuIE9iamVjdHMgYXJlIG5vdCBjb21wYXJlZCBhZ2FpbnN0XG4gKiAgICAgcHJpbWl0aXZlcywgdW5sZXNzIHRoZXkgaGF2ZSBhIGN1c3RvbSBgdG9TdHJpbmdgIG1ldGhvZCAoZS5nLiBgRGF0ZWAgb2JqZWN0cykuXG4gKlxuICpcbiAqICAgRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW2FueVByb3BlcnR5S2V5XSBUaGUgc3BlY2lhbCBwcm9wZXJ0eSBuYW1lIHRoYXQgbWF0Y2hlcyBhZ2FpbnN0IGFueSBwcm9wZXJ0eS5cbiAqICAgICBCeSBkZWZhdWx0IGAkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cImZpbHRlci1maWx0ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWluaXQ9XCJmcmllbmRzID0gW3tuYW1lOidKb2huJywgcGhvbmU6JzU1NS0xMjc2J30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidNYXJ5JywgcGhvbmU6JzgwMC1CSUctTUFSWSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonTWlrZScsIHBob25lOic1NTUtNDMyMSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonQWRhbScsIHBob25lOic1NTUtNTY3OCd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonSnVsaWUnLCBwaG9uZTonNTU1LTg3NjUnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGlldHRlJywgcGhvbmU6JzU1NS01Njc4J31dXCI+PC9kaXY+XG5cbiAgICAgICA8bGFiZWw+U2VhcmNoOiA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2hUZXh0XCI+PC9sYWJlbD5cbiAgICAgICA8dGFibGUgaWQ9XCJzZWFyY2hUZXh0UmVzdWx0c1wiPlxuICAgICAgICAgPHRyPjx0aD5OYW1lPC90aD48dGg+UGhvbmU8L3RoPjwvdHI+XG4gICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBmaWx0ZXI6c2VhcmNoVGV4dFwiPlxuICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kLnBob25lfX08L3RkPlxuICAgICAgICAgPC90cj5cbiAgICAgICA8L3RhYmxlPlxuICAgICAgIDxocj5cbiAgICAgICA8bGFiZWw+QW55OiA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2guJFwiPjwvbGFiZWw+IDxicj5cbiAgICAgICA8bGFiZWw+TmFtZSBvbmx5IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaC5uYW1lXCI+PC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPlBob25lIG9ubHkgPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoLnBob25lXCI+PC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPkVxdWFsaXR5IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInN0cmljdFwiPjwvbGFiZWw+PGJyPlxuICAgICAgIDx0YWJsZSBpZD1cInNlYXJjaE9ialJlc3VsdHNcIj5cbiAgICAgICAgIDx0cj48dGg+TmFtZTwvdGg+PHRoPlBob25lPC90aD48L3RyPlxuICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZE9iaiBpbiBmcmllbmRzIHwgZmlsdGVyOnNlYXJjaDpzdHJpY3RcIj5cbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kT2JqLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZE9iai5waG9uZX19PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgPC90YWJsZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIGV4cGVjdEZyaWVuZE5hbWVzID0gZnVuY3Rpb24oZXhwZWN0ZWROYW1lcywga2V5KSB7XG4gICAgICAgICBlbGVtZW50LmFsbChieS5yZXBlYXRlcihrZXkgKyAnIGluIGZyaWVuZHMnKS5jb2x1bW4oa2V5ICsgJy5uYW1lJykpLnRoZW4oZnVuY3Rpb24oYXJyKSB7XG4gICAgICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uKHdkLCBpKSB7XG4gICAgICAgICAgICAgZXhwZWN0KHdkLmdldFRleHQoKSkudG9NYXRjaChleHBlY3RlZE5hbWVzW2ldKTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICB9KTtcbiAgICAgICB9O1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggYWNyb3NzIGFsbCBmaWVsZHMgd2hlbiBmaWx0ZXJpbmcgd2l0aCBhIHN0cmluZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNlYXJjaFRleHQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2hUZXh0JykpO1xuICAgICAgICAgc2VhcmNoVGV4dC5jbGVhcigpO1xuICAgICAgICAgc2VhcmNoVGV4dC5zZW5kS2V5cygnbScpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydNYXJ5JywgJ01pa2UnLCAnQWRhbSddLCAnZnJpZW5kJyk7XG5cbiAgICAgICAgIHNlYXJjaFRleHQuY2xlYXIoKTtcbiAgICAgICAgIHNlYXJjaFRleHQuc2VuZEtleXMoJzc2Jyk7XG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ0pvaG4nLCAnSnVsaWUnXSwgJ2ZyaWVuZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggaW4gc3BlY2lmaWMgZmllbGRzIHdoZW4gZmlsdGVyaW5nIHdpdGggYSBwcmVkaWNhdGUgb2JqZWN0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgc2VhcmNoQW55ID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoLiQnKSk7XG4gICAgICAgICBzZWFyY2hBbnkuY2xlYXIoKTtcbiAgICAgICAgIHNlYXJjaEFueS5zZW5kS2V5cygnaScpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydNYXJ5JywgJ01pa2UnLCAnSnVsaWUnLCAnSnVsaWV0dGUnXSwgJ2ZyaWVuZE9iaicpO1xuICAgICAgIH0pO1xuICAgICAgIGl0KCdzaG91bGQgdXNlIGEgZXF1YWwgY29tcGFyaXNvbiB3aGVuIGNvbXBhcmF0b3IgaXMgdHJ1ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNlYXJjaE5hbWUgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2gubmFtZScpKTtcbiAgICAgICAgIHZhciBzdHJpY3QgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzdHJpY3QnKSk7XG4gICAgICAgICBzZWFyY2hOYW1lLmNsZWFyKCk7XG4gICAgICAgICBzZWFyY2hOYW1lLnNlbmRLZXlzKCdKdWxpZScpO1xuICAgICAgICAgc3RyaWN0LmNsaWNrKCk7XG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ0p1bGllJ10sICdmcmllbmRPYmonKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbmZ1bmN0aW9uIGZpbHRlckZpbHRlcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBleHByZXNzaW9uLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSkge1xuICAgIGlmICghaXNBcnJheUxpa2UoYXJyYXkpKSB7XG4gICAgICBpZiAoYXJyYXkgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBtaW5FcnIoJ2ZpbHRlcicpKCdub3RhcnJheScsICdFeHBlY3RlZCBhcnJheSBidXQgcmVjZWl2ZWQ6IHswfScsIGFycmF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbnlQcm9wZXJ0eUtleSA9IGFueVByb3BlcnR5S2V5IHx8ICckJztcbiAgICB2YXIgZXhwcmVzc2lvblR5cGUgPSBnZXRUeXBlRm9yRmlsdGVyKGV4cHJlc3Npb24pO1xuICAgIHZhciBwcmVkaWNhdGVGbjtcbiAgICB2YXIgbWF0Y2hBZ2FpbnN0QW55UHJvcDtcblxuICAgIHN3aXRjaCAoZXhwcmVzc2lvblR5cGUpIHtcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgcHJlZGljYXRlRm4gPSBleHByZXNzaW9uO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgY2FzZSAnbnVsbCc6XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgbWF0Y2hBZ2FpbnN0QW55UHJvcCA9IHRydWU7XG4gICAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgIHByZWRpY2F0ZUZuID0gY3JlYXRlUHJlZGljYXRlRm4oZXhwcmVzc2lvbiwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIG1hdGNoQWdhaW5zdEFueVByb3ApO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGFycmF5LCBwcmVkaWNhdGVGbik7XG4gIH07XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGBmaWx0ZXJGaWx0ZXJgXG5mdW5jdGlvbiBjcmVhdGVQcmVkaWNhdGVGbihleHByZXNzaW9uLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgbWF0Y2hBZ2FpbnN0QW55UHJvcCkge1xuICB2YXIgc2hvdWxkTWF0Y2hQcmltaXRpdmVzID0gaXNPYmplY3QoZXhwcmVzc2lvbikgJiYgKGFueVByb3BlcnR5S2V5IGluIGV4cHJlc3Npb24pO1xuICB2YXIgcHJlZGljYXRlRm47XG5cbiAgaWYgKGNvbXBhcmF0b3IgPT09IHRydWUpIHtcbiAgICBjb21wYXJhdG9yID0gZXF1YWxzO1xuICB9IGVsc2UgaWYgKCFpc0Z1bmN0aW9uKGNvbXBhcmF0b3IpKSB7XG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZChhY3R1YWwpKSB7XG4gICAgICAgIC8vIE5vIHN1YnN0cmluZyBtYXRjaGluZyBhZ2FpbnN0IGB1bmRlZmluZWRgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICgoYWN0dWFsID09PSBudWxsKSB8fCAoZXhwZWN0ZWQgPT09IG51bGwpKSB7XG4gICAgICAgIC8vIE5vIHN1YnN0cmluZyBtYXRjaGluZyBhZ2FpbnN0IGBudWxsYDsgb25seSBtYXRjaCBhZ2FpbnN0IGBudWxsYFxuICAgICAgICByZXR1cm4gYWN0dWFsID09PSBleHBlY3RlZDtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdChleHBlY3RlZCkgfHwgKGlzT2JqZWN0KGFjdHVhbCkgJiYgIWhhc0N1c3RvbVRvU3RyaW5nKGFjdHVhbCkpKSB7XG4gICAgICAgIC8vIFNob3VsZCBub3QgY29tcGFyZSBwcmltaXRpdmVzIGFnYWluc3Qgb2JqZWN0cywgdW5sZXNzIHRoZXkgaGF2ZSBjdXN0b20gYHRvU3RyaW5nYCBtZXRob2RcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBhY3R1YWwgPSBsb3dlcmNhc2UoJycgKyBhY3R1YWwpO1xuICAgICAgZXhwZWN0ZWQgPSBsb3dlcmNhc2UoJycgKyBleHBlY3RlZCk7XG4gICAgICByZXR1cm4gYWN0dWFsLmluZGV4T2YoZXhwZWN0ZWQpICE9PSAtMTtcbiAgICB9O1xuICB9XG5cbiAgcHJlZGljYXRlRm4gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgaWYgKHNob3VsZE1hdGNoUHJpbWl0aXZlcyAmJiAhaXNPYmplY3QoaXRlbSkpIHtcbiAgICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHByZXNzaW9uW2FueVByb3BlcnR5S2V5XSwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZXBDb21wYXJlKGl0ZW0sIGV4cHJlc3Npb24sIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgfTtcblxuICByZXR1cm4gcHJlZGljYXRlRm47XG59XG5cbmZ1bmN0aW9uIGRlZXBDb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQsIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wLCBkb250TWF0Y2hXaG9sZU9iamVjdCkge1xuICB2YXIgYWN0dWFsVHlwZSA9IGdldFR5cGVGb3JGaWx0ZXIoYWN0dWFsKTtcbiAgdmFyIGV4cGVjdGVkVHlwZSA9IGdldFR5cGVGb3JGaWx0ZXIoZXhwZWN0ZWQpO1xuXG4gIGlmICgoZXhwZWN0ZWRUeXBlID09PSAnc3RyaW5nJykgJiYgKGV4cGVjdGVkLmNoYXJBdCgwKSA9PT0gJyEnKSkge1xuICAgIHJldHVybiAhZGVlcENvbXBhcmUoYWN0dWFsLCBleHBlY3RlZC5zdWJzdHJpbmcoMSksIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KGFjdHVhbCkpIHtcbiAgICAvLyBJbiBjYXNlIGBhY3R1YWxgIGlzIGFuIGFycmF5LCBjb25zaWRlciBpdCBhIG1hdGNoXG4gICAgLy8gaWYgQU5ZIG9mIGl0J3MgaXRlbXMgbWF0Y2hlcyBgZXhwZWN0ZWRgXG4gICAgcmV0dXJuIGFjdHVhbC5zb21lKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHBlY3RlZCwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIG1hdGNoQWdhaW5zdEFueVByb3ApO1xuICAgIH0pO1xuICB9XG5cbiAgc3dpdGNoIChhY3R1YWxUeXBlKSB7XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHZhciBrZXk7XG4gICAgICBpZiAobWF0Y2hBZ2FpbnN0QW55UHJvcCkge1xuICAgICAgICBmb3IgKGtleSBpbiBhY3R1YWwpIHtcbiAgICAgICAgICAvLyBVbmRlciBjZXJ0YWluLCByYXJlLCBjaXJjdW1zdGFuY2VzLCBrZXkgbWF5IG5vdCBiZSBhIHN0cmluZyBhbmQgYGNoYXJBdGAgd2lsbCBiZSB1bmRlZmluZWRcbiAgICAgICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzE1NjQ0XG4gICAgICAgICAgaWYgKGtleS5jaGFyQXQgJiYgKGtleS5jaGFyQXQoMCkgIT09ICckJykgJiZcbiAgICAgICAgICAgICAgZGVlcENvbXBhcmUoYWN0dWFsW2tleV0sIGV4cGVjdGVkLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9udE1hdGNoV2hvbGVPYmplY3QgPyBmYWxzZSA6IGRlZXBDb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQsIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZm9yIChrZXkgaW4gZXhwZWN0ZWQpIHtcbiAgICAgICAgICB2YXIgZXhwZWN0ZWRWYWwgPSBleHBlY3RlZFtrZXldO1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGV4cGVjdGVkVmFsKSB8fCBpc1VuZGVmaW5lZChleHBlY3RlZFZhbCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBtYXRjaEFueVByb3BlcnR5ID0ga2V5ID09PSBhbnlQcm9wZXJ0eUtleTtcbiAgICAgICAgICB2YXIgYWN0dWFsVmFsID0gbWF0Y2hBbnlQcm9wZXJ0eSA/IGFjdHVhbCA6IGFjdHVhbFtrZXldO1xuICAgICAgICAgIGlmICghZGVlcENvbXBhcmUoYWN0dWFsVmFsLCBleHBlY3RlZFZhbCwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIG1hdGNoQW55UHJvcGVydHksIG1hdGNoQW55UHJvcGVydHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoYWN0dWFsLCBleHBlY3RlZCk7XG4gICAgICB9XG4gICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY29tcGFyYXRvcihhY3R1YWwsIGV4cGVjdGVkKTtcbiAgfVxufVxuXG4vLyBVc2VkIGZvciBlYXNpbHkgZGlmZmVyZW50aWF0aW5nIGJldHdlZW4gYG51bGxgIGFuZCBhY3R1YWwgYG9iamVjdGBcbmZ1bmN0aW9uIGdldFR5cGVGb3JGaWx0ZXIodmFsKSB7XG4gIHJldHVybiAodmFsID09PSBudWxsKSA/ICdudWxsJyA6IHR5cGVvZiB2YWw7XG59XG5cbnZhciBNQVhfRElHSVRTID0gMjI7XG52YXIgREVDSU1BTF9TRVAgPSAnLic7XG52YXIgWkVST19DSEFSID0gJzAnO1xuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGN1cnJlbmN5XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRm9ybWF0cyBhIG51bWJlciBhcyBhIGN1cnJlbmN5IChpZSAkMSwyMzQuNTYpLiBXaGVuIG5vIGN1cnJlbmN5IHN5bWJvbCBpcyBwcm92aWRlZCwgZGVmYXVsdFxuICogc3ltYm9sIGZvciBjdXJyZW50IGxvY2FsZSBpcyB1c2VkLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgSW5wdXQgdG8gZmlsdGVyLlxuICogQHBhcmFtIHtzdHJpbmc9fSBzeW1ib2wgQ3VycmVuY3kgc3ltYm9sIG9yIGlkZW50aWZpZXIgdG8gYmUgZGlzcGxheWVkLlxuICogQHBhcmFtIHtudW1iZXI9fSBmcmFjdGlvblNpemUgTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRoZSBhbW91bnQgdG8sIGRlZmF1bHRzIHRvIGRlZmF1bHQgbWF4IGZyYWN0aW9uIHNpemUgZm9yIGN1cnJlbnQgbG9jYWxlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgbnVtYmVyLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiY3VycmVuY3lFeGFtcGxlXCIgbmFtZT1cImN1cnJlbmN5LWZpbHRlclwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnY3VycmVuY3lFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLmFtb3VudCA9IDEyMzQuNTY7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cImFtb3VudFwiIGFyaWEtbGFiZWw9XCJhbW91bnRcIj4gPGJyPlxuICAgICAgICAgZGVmYXVsdCBjdXJyZW5jeSBzeW1ib2wgKCQpOiA8c3BhbiBpZD1cImN1cnJlbmN5LWRlZmF1bHRcIj57e2Ftb3VudCB8IGN1cnJlbmN5fX08L3NwYW4+PGJyPlxuICAgICAgICAgY3VzdG9tIGN1cnJlbmN5IGlkZW50aWZpZXIgKFVTRCQpOiA8c3BhbiBpZD1cImN1cnJlbmN5LWN1c3RvbVwiPnt7YW1vdW50IHwgY3VycmVuY3k6XCJVU0QkXCJ9fTwvc3Bhbj48YnI+XG4gICAgICAgICBubyBmcmFjdGlvbnMgKDApOiA8c3BhbiBpZD1cImN1cnJlbmN5LW5vLWZyYWN0aW9uc1wiPnt7YW1vdW50IHwgY3VycmVuY3k6XCJVU0QkXCI6MH19PC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGluaXQgd2l0aCAxMjM0LjU2JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJyQxLDIzNC41NicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWN1c3RvbScpKS5nZXRUZXh0KCkpLnRvQmUoJ1VTRCQxLDIzNC41NicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LW5vLWZyYWN0aW9ucycpKS5nZXRUZXh0KCkpLnRvQmUoJ1VTRCQxLDIzNScpO1xuICAgICAgIH0pO1xuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ3NhZmFyaScpIHtcbiAgICAgICAgICAgLy8gU2FmYXJpIGRvZXMgbm90IHVuZGVyc3RhbmQgdGhlIG1pbnVzIGtleS4gU2VlXG4gICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzQ4MVxuICAgICAgICAgICByZXR1cm47XG4gICAgICAgICB9XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdhbW91bnQnKSkuY2xlYXIoKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2Ftb3VudCcpKS5zZW5kS2V5cygnLTEyMzQnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1kZWZhdWx0JykpLmdldFRleHQoKSkudG9CZSgnLSQxLDIzNC4wMCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWN1c3RvbScpKS5nZXRUZXh0KCkpLnRvQmUoJy1VU0QkMSwyMzQuMDAnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1uby1mcmFjdGlvbnMnKSkuZ2V0VGV4dCgpKS50b0JlKCctVVNEJDEsMjM0Jyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuY3VycmVuY3lGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xuZnVuY3Rpb24gY3VycmVuY3lGaWx0ZXIoJGxvY2FsZSkge1xuICB2YXIgZm9ybWF0cyA9ICRsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7XG4gIHJldHVybiBmdW5jdGlvbihhbW91bnQsIGN1cnJlbmN5U3ltYm9sLCBmcmFjdGlvblNpemUpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQoY3VycmVuY3lTeW1ib2wpKSB7XG4gICAgICBjdXJyZW5jeVN5bWJvbCA9IGZvcm1hdHMuQ1VSUkVOQ1lfU1lNO1xuICAgIH1cblxuICAgIGlmIChpc1VuZGVmaW5lZChmcmFjdGlvblNpemUpKSB7XG4gICAgICBmcmFjdGlvblNpemUgPSBmb3JtYXRzLlBBVFRFUk5TWzFdLm1heEZyYWM7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGN1cnJlbmN5IHN5bWJvbCBpcyBlbXB0eSwgdHJpbSB3aGl0ZXNwYWNlIGFyb3VuZCB0aGUgc3ltYm9sXG4gICAgdmFyIGN1cnJlbmN5U3ltYm9sUmUgPSAhY3VycmVuY3lTeW1ib2wgPyAvXFxzKlxcdTAwQTRcXHMqL2cgOiAvXFx1MDBBNC9nO1xuXG4gICAgLy8gaWYgbnVsbCBvciB1bmRlZmluZWQgcGFzcyBpdCB0aHJvdWdoXG4gICAgcmV0dXJuIChhbW91bnQgPT0gbnVsbClcbiAgICAgICAgPyBhbW91bnRcbiAgICAgICAgOiBmb3JtYXROdW1iZXIoYW1vdW50LCBmb3JtYXRzLlBBVFRFUk5TWzFdLCBmb3JtYXRzLkdST1VQX1NFUCwgZm9ybWF0cy5ERUNJTUFMX1NFUCwgZnJhY3Rpb25TaXplKS5cbiAgICAgICAgICAgIHJlcGxhY2UoY3VycmVuY3lTeW1ib2xSZSwgY3VycmVuY3lTeW1ib2wpO1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIG51bWJlclxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZvcm1hdHMgYSBudW1iZXIgYXMgdGV4dC5cbiAqXG4gKiBJZiB0aGUgaW5wdXQgaXMgbnVsbCBvciB1bmRlZmluZWQsIGl0IHdpbGwganVzdCBiZSByZXR1cm5lZC5cbiAqIElmIHRoZSBpbnB1dCBpcyBpbmZpbml0ZSAoSW5maW5pdHkgb3IgLUluZmluaXR5KSwgdGhlIEluZmluaXR5IHN5bWJvbCAn4oieJyBvciAnLeKInicgaXMgcmV0dXJuZWQsIHJlc3BlY3RpdmVseS5cbiAqIElmIHRoZSBpbnB1dCBpcyBub3QgYSBudW1iZXIgYW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkLlxuICpcbiAqXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IG51bWJlciBOdW1iZXIgdG8gZm9ybWF0LlxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyk9fSBmcmFjdGlvblNpemUgTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRoZSBudW1iZXIgdG8uXG4gKiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCB0aGVuIHRoZSBmcmFjdGlvbiBzaXplIGlzIGNvbXB1dGVkIGZyb20gdGhlIGN1cnJlbnQgbG9jYWxlJ3MgbnVtYmVyXG4gKiBmb3JtYXR0aW5nIHBhdHRlcm4uIEluIHRoZSBjYXNlIG9mIHRoZSBkZWZhdWx0IGxvY2FsZSwgaXQgd2lsbCBiZSAzLlxuICogQHJldHVybnMge3N0cmluZ30gTnVtYmVyIHJvdW5kZWQgdG8gYGZyYWN0aW9uU2l6ZWAgYXBwcm9wcmlhdGVseSBmb3JtYXR0ZWQgYmFzZWQgb24gdGhlIGN1cnJlbnRcbiAqICAgICAgICAgICAgICAgICAgIGxvY2FsZSAoZS5nLiwgaW4gdGhlIGVuX1VTIGxvY2FsZSBpdCB3aWxsIGhhdmUgXCIuXCIgYXMgdGhlIGRlY2ltYWwgc2VwYXJhdG9yIGFuZFxuICogICAgICAgICAgICAgICAgICAgaW5jbHVkZSBcIixcIiBncm91cCBzZXBhcmF0b3JzIGFmdGVyIGVhY2ggdGhpcmQgZGlnaXQpLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJudW1iZXJGaWx0ZXJFeGFtcGxlXCIgbmFtZT1cIm51bWJlci1maWx0ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ251bWJlckZpbHRlckV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUudmFsID0gMTIzNC41Njc4OTtcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8bGFiZWw+RW50ZXIgbnVtYmVyOiA8aW5wdXQgbmctbW9kZWw9J3ZhbCc+PC9sYWJlbD48YnI+XG4gICAgICAgICBEZWZhdWx0IGZvcm1hdHRpbmc6IDxzcGFuIGlkPSdudW1iZXItZGVmYXVsdCc+e3t2YWwgfCBudW1iZXJ9fTwvc3Bhbj48YnI+XG4gICAgICAgICBObyBmcmFjdGlvbnM6IDxzcGFuPnt7dmFsIHwgbnVtYmVyOjB9fTwvc3Bhbj48YnI+XG4gICAgICAgICBOZWdhdGl2ZSBudW1iZXI6IDxzcGFuPnt7LXZhbCB8IG51bWJlcjo0fX08L3NwYW4+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgZm9ybWF0IG51bWJlcnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzEsMjM0LjU2OCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndmFsIHwgbnVtYmVyOjAnKSkuZ2V0VGV4dCgpKS50b0JlKCcxLDIzNScpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnLXZhbCB8IG51bWJlcjo0JykpLmdldFRleHQoKSkudG9CZSgnLTEsMjM0LjU2NzknKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWwnKSkuY2xlYXIoKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbCcpKS5zZW5kS2V5cygnMzM3NC4zMzMnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzMsMzc0LjMzMycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndmFsIHwgbnVtYmVyOjAnKSkuZ2V0VGV4dCgpKS50b0JlKCczLDM3NCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnLXZhbCB8IG51bWJlcjo0JykpLmdldFRleHQoKSkudG9CZSgnLTMsMzc0LjMzMzAnKTtcbiAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbm51bWJlckZpbHRlci4kaW5qZWN0ID0gWyckbG9jYWxlJ107XG5mdW5jdGlvbiBudW1iZXJGaWx0ZXIoJGxvY2FsZSkge1xuICB2YXIgZm9ybWF0cyA9ICRsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7XG4gIHJldHVybiBmdW5jdGlvbihudW1iZXIsIGZyYWN0aW9uU2l6ZSkge1xuXG4gICAgLy8gaWYgbnVsbCBvciB1bmRlZmluZWQgcGFzcyBpdCB0aHJvdWdoXG4gICAgcmV0dXJuIChudW1iZXIgPT0gbnVsbClcbiAgICAgICAgPyBudW1iZXJcbiAgICAgICAgOiBmb3JtYXROdW1iZXIobnVtYmVyLCBmb3JtYXRzLlBBVFRFUk5TWzBdLCBmb3JtYXRzLkdST1VQX1NFUCwgZm9ybWF0cy5ERUNJTUFMX1NFUCxcbiAgICAgICAgICAgICAgICAgICAgICAgZnJhY3Rpb25TaXplKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIG51bWJlciAoYXMgYSBzdHJpbmcpIGludG8gdGhyZWUgY29tcG9uZW50cyB0aGF0IGNhbiBiZSB1c2VkXG4gKiBmb3IgZm9ybWF0dGluZyB0aGUgbnVtYmVyLlxuICpcbiAqIChTaWduaWZpY2FudCBiaXRzIG9mIHRoaXMgcGFyc2UgYWxnb3JpdGhtIGNhbWUgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTWlrZU1jbC9iaWcuanMvKVxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gbnVtU3RyIFRoZSBudW1iZXIgdG8gcGFyc2VcbiAqIEByZXR1cm4ge29iamVjdH0gQW4gb2JqZWN0IGRlc2NyaWJpbmcgdGhpcyBudW1iZXIsIGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyBrZXlzOlxuICogIC0gZCA6IGFuIGFycmF5IG9mIGRpZ2l0cyBjb250YWluaW5nIGxlYWRpbmcgemVyb3MgYXMgbmVjZXNzYXJ5XG4gKiAgLSBpIDogdGhlIG51bWJlciBvZiB0aGUgZGlnaXRzIGluIGBkYCB0aGF0IGFyZSB0byB0aGUgbGVmdCBvZiB0aGUgZGVjaW1hbCBwb2ludFxuICogIC0gZSA6IHRoZSBleHBvbmVudCBmb3IgbnVtYmVycyB0aGF0IHdvdWxkIG5lZWQgbW9yZSB0aGFuIGBNQVhfRElHSVRTYCBkaWdpdHMgaW4gYGRgXG4gKlxuICovXG5mdW5jdGlvbiBwYXJzZShudW1TdHIpIHtcbiAgdmFyIGV4cG9uZW50ID0gMCwgZGlnaXRzLCBudW1iZXJPZkludGVnZXJEaWdpdHM7XG4gIHZhciBpLCBqLCB6ZXJvcztcblxuICAvLyBEZWNpbWFsIHBvaW50P1xuICBpZiAoKG51bWJlck9mSW50ZWdlckRpZ2l0cyA9IG51bVN0ci5pbmRleE9mKERFQ0lNQUxfU0VQKSkgPiAtMSkge1xuICAgIG51bVN0ciA9IG51bVN0ci5yZXBsYWNlKERFQ0lNQUxfU0VQLCAnJyk7XG4gIH1cblxuICAvLyBFeHBvbmVudGlhbCBmb3JtP1xuICBpZiAoKGkgPSBudW1TdHIuc2VhcmNoKC9lL2kpKSA+IDApIHtcbiAgICAvLyBXb3JrIG91dCB0aGUgZXhwb25lbnQuXG4gICAgaWYgKG51bWJlck9mSW50ZWdlckRpZ2l0cyA8IDApIG51bWJlck9mSW50ZWdlckRpZ2l0cyA9IGk7XG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzICs9ICtudW1TdHIuc2xpY2UoaSArIDEpO1xuICAgIG51bVN0ciA9IG51bVN0ci5zdWJzdHJpbmcoMCwgaSk7XG4gIH0gZWxzZSBpZiAobnVtYmVyT2ZJbnRlZ2VyRGlnaXRzIDwgMCkge1xuICAgIC8vIFRoZXJlIHdhcyBubyBkZWNpbWFsIHBvaW50IG9yIGV4cG9uZW50IHNvIGl0IGlzIGFuIGludGVnZXIuXG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzID0gbnVtU3RyLmxlbmd0aDtcbiAgfVxuXG4gIC8vIENvdW50IHRoZSBudW1iZXIgb2YgbGVhZGluZyB6ZXJvcy5cbiAgZm9yIChpID0gMDsgbnVtU3RyLmNoYXJBdChpKSA9PT0gWkVST19DSEFSOyBpKyspIHsgLyogZW1wdHkgKi8gfVxuXG4gIGlmIChpID09PSAoemVyb3MgPSBudW1TdHIubGVuZ3RoKSkge1xuICAgIC8vIFRoZSBkaWdpdHMgYXJlIGFsbCB6ZXJvLlxuICAgIGRpZ2l0cyA9IFswXTtcbiAgICBudW1iZXJPZkludGVnZXJEaWdpdHMgPSAxO1xuICB9IGVsc2Uge1xuICAgIC8vIENvdW50IHRoZSBudW1iZXIgb2YgdHJhaWxpbmcgemVyb3NcbiAgICB6ZXJvcy0tO1xuICAgIHdoaWxlIChudW1TdHIuY2hhckF0KHplcm9zKSA9PT0gWkVST19DSEFSKSB6ZXJvcy0tO1xuXG4gICAgLy8gVHJhaWxpbmcgemVyb3MgYXJlIGluc2lnbmlmaWNhbnQgc28gaWdub3JlIHRoZW1cbiAgICBudW1iZXJPZkludGVnZXJEaWdpdHMgLT0gaTtcbiAgICBkaWdpdHMgPSBbXTtcbiAgICAvLyBDb252ZXJ0IHN0cmluZyB0byBhcnJheSBvZiBkaWdpdHMgd2l0aG91dCBsZWFkaW5nL3RyYWlsaW5nIHplcm9zLlxuICAgIGZvciAoaiA9IDA7IGkgPD0gemVyb3M7IGkrKywgaisrKSB7XG4gICAgICBkaWdpdHNbal0gPSArbnVtU3RyLmNoYXJBdChpKTtcbiAgICB9XG4gIH1cblxuICAvLyBJZiB0aGUgbnVtYmVyIG92ZXJmbG93cyB0aGUgbWF4aW11bSBhbGxvd2VkIGRpZ2l0cyB0aGVuIHVzZSBhbiBleHBvbmVudC5cbiAgaWYgKG51bWJlck9mSW50ZWdlckRpZ2l0cyA+IE1BWF9ESUdJVFMpIHtcbiAgICBkaWdpdHMgPSBkaWdpdHMuc3BsaWNlKDAsIE1BWF9ESUdJVFMgLSAxKTtcbiAgICBleHBvbmVudCA9IG51bWJlck9mSW50ZWdlckRpZ2l0cyAtIDE7XG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzID0gMTtcbiAgfVxuXG4gIHJldHVybiB7IGQ6IGRpZ2l0cywgZTogZXhwb25lbnQsIGk6IG51bWJlck9mSW50ZWdlckRpZ2l0cyB9O1xufVxuXG4vKipcbiAqIFJvdW5kIHRoZSBwYXJzZWQgbnVtYmVyIHRvIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzXG4gKiBUaGlzIGZ1bmN0aW9uIGNoYW5nZWQgdGhlIHBhcnNlZE51bWJlciBpbi1wbGFjZVxuICovXG5mdW5jdGlvbiByb3VuZE51bWJlcihwYXJzZWROdW1iZXIsIGZyYWN0aW9uU2l6ZSwgbWluRnJhYywgbWF4RnJhYykge1xuICAgIHZhciBkaWdpdHMgPSBwYXJzZWROdW1iZXIuZDtcbiAgICB2YXIgZnJhY3Rpb25MZW4gPSBkaWdpdHMubGVuZ3RoIC0gcGFyc2VkTnVtYmVyLmk7XG5cbiAgICAvLyBkZXRlcm1pbmUgZnJhY3Rpb25TaXplIGlmIGl0IGlzIG5vdCBzcGVjaWZpZWQ7IGArZnJhY3Rpb25TaXplYCBjb252ZXJ0cyBpdCB0byBhIG51bWJlclxuICAgIGZyYWN0aW9uU2l6ZSA9IChpc1VuZGVmaW5lZChmcmFjdGlvblNpemUpKSA/IE1hdGgubWluKE1hdGgubWF4KG1pbkZyYWMsIGZyYWN0aW9uTGVuKSwgbWF4RnJhYykgOiArZnJhY3Rpb25TaXplO1xuXG4gICAgLy8gVGhlIGluZGV4IG9mIHRoZSBkaWdpdCB0byB3aGVyZSByb3VuZGluZyBpcyB0byBvY2N1clxuICAgIHZhciByb3VuZEF0ID0gZnJhY3Rpb25TaXplICsgcGFyc2VkTnVtYmVyLmk7XG4gICAgdmFyIGRpZ2l0ID0gZGlnaXRzW3JvdW5kQXRdO1xuXG4gICAgaWYgKHJvdW5kQXQgPiAwKSB7XG4gICAgICAvLyBEcm9wIGZyYWN0aW9uYWwgZGlnaXRzIGJleW9uZCBgcm91bmRBdGBcbiAgICAgIGRpZ2l0cy5zcGxpY2UoTWF0aC5tYXgocGFyc2VkTnVtYmVyLmksIHJvdW5kQXQpKTtcblxuICAgICAgLy8gU2V0IG5vbi1mcmFjdGlvbmFsIGRpZ2l0cyBiZXlvbmQgYHJvdW5kQXRgIHRvIDBcbiAgICAgIGZvciAodmFyIGogPSByb3VuZEF0OyBqIDwgZGlnaXRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRpZ2l0c1tqXSA9IDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdlIHJvdW5kZWQgdG8gemVybyBzbyByZXNldCB0aGUgcGFyc2VkTnVtYmVyXG4gICAgICBmcmFjdGlvbkxlbiA9IE1hdGgubWF4KDAsIGZyYWN0aW9uTGVuKTtcbiAgICAgIHBhcnNlZE51bWJlci5pID0gMTtcbiAgICAgIGRpZ2l0cy5sZW5ndGggPSBNYXRoLm1heCgxLCByb3VuZEF0ID0gZnJhY3Rpb25TaXplICsgMSk7XG4gICAgICBkaWdpdHNbMF0gPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCByb3VuZEF0OyBpKyspIGRpZ2l0c1tpXSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGRpZ2l0ID49IDUpIHtcbiAgICAgIGlmIChyb3VuZEF0IC0gMSA8IDApIHtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPiByb3VuZEF0OyBrLS0pIHtcbiAgICAgICAgICBkaWdpdHMudW5zaGlmdCgwKTtcbiAgICAgICAgICBwYXJzZWROdW1iZXIuaSsrO1xuICAgICAgICB9XG4gICAgICAgIGRpZ2l0cy51bnNoaWZ0KDEpO1xuICAgICAgICBwYXJzZWROdW1iZXIuaSsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlnaXRzW3JvdW5kQXQgLSAxXSsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFBhZCBvdXQgd2l0aCB6ZXJvcyB0byBnZXQgdGhlIHJlcXVpcmVkIGZyYWN0aW9uIGxlbmd0aFxuICAgIGZvciAoOyBmcmFjdGlvbkxlbiA8IE1hdGgubWF4KDAsIGZyYWN0aW9uU2l6ZSk7IGZyYWN0aW9uTGVuKyspIGRpZ2l0cy5wdXNoKDApO1xuXG5cbiAgICAvLyBEbyBhbnkgY2FycnlpbmcsIGUuZy4gYSBkaWdpdCB3YXMgcm91bmRlZCB1cCB0byAxMFxuICAgIHZhciBjYXJyeSA9IGRpZ2l0cy5yZWR1Y2VSaWdodChmdW5jdGlvbihjYXJyeSwgZCwgaSwgZGlnaXRzKSB7XG4gICAgICBkID0gZCArIGNhcnJ5O1xuICAgICAgZGlnaXRzW2ldID0gZCAlIDEwO1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IoZCAvIDEwKTtcbiAgICB9LCAwKTtcbiAgICBpZiAoY2FycnkpIHtcbiAgICAgIGRpZ2l0cy51bnNoaWZ0KGNhcnJ5KTtcbiAgICAgIHBhcnNlZE51bWJlci5pKys7XG4gICAgfVxufVxuXG4vKipcbiAqIEZvcm1hdCBhIG51bWJlciBpbnRvIGEgc3RyaW5nXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAgICAgICBUaGUgbnVtYmVyIHRvIGZvcm1hdFxuICogQHBhcmFtICB7e1xuICogICAgICAgICAgIG1pbkZyYWMsIC8vIHRoZSBtaW5pbXVtIG51bWJlciBvZiBkaWdpdHMgcmVxdWlyZWQgaW4gdGhlIGZyYWN0aW9uIHBhcnQgb2YgdGhlIG51bWJlclxuICogICAgICAgICAgIG1heEZyYWMsIC8vIHRoZSBtYXhpbXVtIG51bWJlciBvZiBkaWdpdHMgcmVxdWlyZWQgaW4gdGhlIGZyYWN0aW9uIHBhcnQgb2YgdGhlIG51bWJlclxuICogICAgICAgICAgIGdTaXplLCAgIC8vIG51bWJlciBvZiBkaWdpdHMgaW4gZWFjaCBncm91cCBvZiBzZXBhcmF0ZWQgZGlnaXRzXG4gKiAgICAgICAgICAgbGdTaXplLCAgLy8gbnVtYmVyIG9mIGRpZ2l0cyBpbiB0aGUgbGFzdCBncm91cCBvZiBkaWdpdHMgYmVmb3JlIHRoZSBkZWNpbWFsIHNlcGFyYXRvclxuICogICAgICAgICAgIG5lZ1ByZSwgIC8vIHRoZSBzdHJpbmcgdG8gZ28gaW4gZnJvbnQgb2YgYSBuZWdhdGl2ZSBudW1iZXIgKGUuZy4gYC1gIG9yIGAoYCkpXG4gKiAgICAgICAgICAgcG9zUHJlLCAgLy8gdGhlIHN0cmluZyB0byBnbyBpbiBmcm9udCBvZiBhIHBvc2l0aXZlIG51bWJlclxuICogICAgICAgICAgIG5lZ1N1ZiwgIC8vIHRoZSBzdHJpbmcgdG8gZ28gYWZ0ZXIgYSBuZWdhdGl2ZSBudW1iZXIgKGUuZy4gYClgKVxuICogICAgICAgICAgIHBvc1N1ZiAgIC8vIHRoZSBzdHJpbmcgdG8gZ28gYWZ0ZXIgYSBwb3NpdGl2ZSBudW1iZXJcbiAqICAgICAgICAgfX0gcGF0dGVyblxuICogQHBhcmFtICB7c3RyaW5nfSBncm91cFNlcCAgICAgVGhlIHN0cmluZyB0byBzZXBhcmF0ZSBncm91cHMgb2YgbnVtYmVyIChlLmcuIGAsYClcbiAqIEBwYXJhbSAge3N0cmluZ30gZGVjaW1hbFNlcCAgIFRoZSBzdHJpbmcgdG8gYWN0IGFzIHRoZSBkZWNpbWFsIHNlcGFyYXRvciAoZS5nLiBgLmApXG4gKiBAcGFyYW0gIHtbdHlwZV19IGZyYWN0aW9uU2l6ZSBUaGUgc2l6ZSBvZiB0aGUgZnJhY3Rpb25hbCBwYXJ0IG9mIHRoZSBudW1iZXJcbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICAgIFRoZSBudW1iZXIgZm9ybWF0dGVkIGFzIGEgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW1iZXIsIHBhdHRlcm4sIGdyb3VwU2VwLCBkZWNpbWFsU2VwLCBmcmFjdGlvblNpemUpIHtcblxuICBpZiAoIShpc1N0cmluZyhudW1iZXIpIHx8IGlzTnVtYmVyKG51bWJlcikpIHx8IGlzTmFOKG51bWJlcikpIHJldHVybiAnJztcblxuICB2YXIgaXNJbmZpbml0eSA9ICFpc0Zpbml0ZShudW1iZXIpO1xuICB2YXIgaXNaZXJvID0gZmFsc2U7XG4gIHZhciBudW1TdHIgPSBNYXRoLmFicyhudW1iZXIpICsgJycsXG4gICAgICBmb3JtYXR0ZWRUZXh0ID0gJycsXG4gICAgICBwYXJzZWROdW1iZXI7XG5cbiAgaWYgKGlzSW5maW5pdHkpIHtcbiAgICBmb3JtYXR0ZWRUZXh0ID0gJ1xcdTIyMWUnO1xuICB9IGVsc2Uge1xuICAgIHBhcnNlZE51bWJlciA9IHBhcnNlKG51bVN0cik7XG5cbiAgICByb3VuZE51bWJlcihwYXJzZWROdW1iZXIsIGZyYWN0aW9uU2l6ZSwgcGF0dGVybi5taW5GcmFjLCBwYXR0ZXJuLm1heEZyYWMpO1xuXG4gICAgdmFyIGRpZ2l0cyA9IHBhcnNlZE51bWJlci5kO1xuICAgIHZhciBpbnRlZ2VyTGVuID0gcGFyc2VkTnVtYmVyLmk7XG4gICAgdmFyIGV4cG9uZW50ID0gcGFyc2VkTnVtYmVyLmU7XG4gICAgdmFyIGRlY2ltYWxzID0gW107XG4gICAgaXNaZXJvID0gZGlnaXRzLnJlZHVjZShmdW5jdGlvbihpc1plcm8sIGQpIHsgcmV0dXJuIGlzWmVybyAmJiAhZDsgfSwgdHJ1ZSk7XG5cbiAgICAvLyBwYWQgemVyb3MgZm9yIHNtYWxsIG51bWJlcnNcbiAgICB3aGlsZSAoaW50ZWdlckxlbiA8IDApIHtcbiAgICAgIGRpZ2l0cy51bnNoaWZ0KDApO1xuICAgICAgaW50ZWdlckxlbisrO1xuICAgIH1cblxuICAgIC8vIGV4dHJhY3QgZGVjaW1hbHMgZGlnaXRzXG4gICAgaWYgKGludGVnZXJMZW4gPiAwKSB7XG4gICAgICBkZWNpbWFscyA9IGRpZ2l0cy5zcGxpY2UoaW50ZWdlckxlbiwgZGlnaXRzLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlY2ltYWxzID0gZGlnaXRzO1xuICAgICAgZGlnaXRzID0gWzBdO1xuICAgIH1cblxuICAgIC8vIGZvcm1hdCB0aGUgaW50ZWdlciBkaWdpdHMgd2l0aCBncm91cGluZyBzZXBhcmF0b3JzXG4gICAgdmFyIGdyb3VwcyA9IFtdO1xuICAgIGlmIChkaWdpdHMubGVuZ3RoID49IHBhdHRlcm4ubGdTaXplKSB7XG4gICAgICBncm91cHMudW5zaGlmdChkaWdpdHMuc3BsaWNlKC1wYXR0ZXJuLmxnU2l6ZSwgZGlnaXRzLmxlbmd0aCkuam9pbignJykpO1xuICAgIH1cbiAgICB3aGlsZSAoZGlnaXRzLmxlbmd0aCA+IHBhdHRlcm4uZ1NpemUpIHtcbiAgICAgIGdyb3Vwcy51bnNoaWZ0KGRpZ2l0cy5zcGxpY2UoLXBhdHRlcm4uZ1NpemUsIGRpZ2l0cy5sZW5ndGgpLmpvaW4oJycpKTtcbiAgICB9XG4gICAgaWYgKGRpZ2l0cy5sZW5ndGgpIHtcbiAgICAgIGdyb3Vwcy51bnNoaWZ0KGRpZ2l0cy5qb2luKCcnKSk7XG4gICAgfVxuICAgIGZvcm1hdHRlZFRleHQgPSBncm91cHMuam9pbihncm91cFNlcCk7XG5cbiAgICAvLyBhcHBlbmQgdGhlIGRlY2ltYWwgZGlnaXRzXG4gICAgaWYgKGRlY2ltYWxzLmxlbmd0aCkge1xuICAgICAgZm9ybWF0dGVkVGV4dCArPSBkZWNpbWFsU2VwICsgZGVjaW1hbHMuam9pbignJyk7XG4gICAgfVxuXG4gICAgaWYgKGV4cG9uZW50KSB7XG4gICAgICBmb3JtYXR0ZWRUZXh0ICs9ICdlKycgKyBleHBvbmVudDtcbiAgICB9XG4gIH1cbiAgaWYgKG51bWJlciA8IDAgJiYgIWlzWmVybykge1xuICAgIHJldHVybiBwYXR0ZXJuLm5lZ1ByZSArIGZvcm1hdHRlZFRleHQgKyBwYXR0ZXJuLm5lZ1N1ZjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGF0dGVybi5wb3NQcmUgKyBmb3JtYXR0ZWRUZXh0ICsgcGF0dGVybi5wb3NTdWY7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFkTnVtYmVyKG51bSwgZGlnaXRzLCB0cmltLCBuZWdXcmFwKSB7XG4gIHZhciBuZWcgPSAnJztcbiAgaWYgKG51bSA8IDAgfHwgKG5lZ1dyYXAgJiYgbnVtIDw9IDApKSB7XG4gICAgaWYgKG5lZ1dyYXApIHtcbiAgICAgIG51bSA9IC1udW0gKyAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBudW0gPSAtbnVtO1xuICAgICAgbmVnID0gJy0nO1xuICAgIH1cbiAgfVxuICBudW0gPSAnJyArIG51bTtcbiAgd2hpbGUgKG51bS5sZW5ndGggPCBkaWdpdHMpIG51bSA9IFpFUk9fQ0hBUiArIG51bTtcbiAgaWYgKHRyaW0pIHtcbiAgICBudW0gPSBudW0uc3Vic3RyKG51bS5sZW5ndGggLSBkaWdpdHMpO1xuICB9XG4gIHJldHVybiBuZWcgKyBudW07XG59XG5cblxuZnVuY3Rpb24gZGF0ZUdldHRlcihuYW1lLCBzaXplLCBvZmZzZXQsIHRyaW0sIG5lZ1dyYXApIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG4gIHJldHVybiBmdW5jdGlvbihkYXRlKSB7XG4gICAgdmFyIHZhbHVlID0gZGF0ZVsnZ2V0JyArIG5hbWVdKCk7XG4gICAgaWYgKG9mZnNldCA+IDAgfHwgdmFsdWUgPiAtb2Zmc2V0KSB7XG4gICAgICB2YWx1ZSArPSBvZmZzZXQ7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gMCAmJiBvZmZzZXQgPT09IC0xMikgdmFsdWUgPSAxMjtcbiAgICByZXR1cm4gcGFkTnVtYmVyKHZhbHVlLCBzaXplLCB0cmltLCBuZWdXcmFwKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGF0ZVN0ckdldHRlcihuYW1lLCBzaG9ydEZvcm0sIHN0YW5kQWxvbmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUsIGZvcm1hdHMpIHtcbiAgICB2YXIgdmFsdWUgPSBkYXRlWydnZXQnICsgbmFtZV0oKTtcbiAgICB2YXIgcHJvcFByZWZpeCA9IChzdGFuZEFsb25lID8gJ1NUQU5EQUxPTkUnIDogJycpICsgKHNob3J0Rm9ybSA/ICdTSE9SVCcgOiAnJyk7XG4gICAgdmFyIGdldCA9IHVwcGVyY2FzZShwcm9wUHJlZml4ICsgbmFtZSk7XG5cbiAgICByZXR1cm4gZm9ybWF0c1tnZXRdW3ZhbHVlXTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGltZVpvbmVHZXR0ZXIoZGF0ZSwgZm9ybWF0cywgb2Zmc2V0KSB7XG4gIHZhciB6b25lID0gLTEgKiBvZmZzZXQ7XG4gIHZhciBwYWRkZWRab25lID0gKHpvbmUgPj0gMCkgPyAnKycgOiAnJztcblxuICBwYWRkZWRab25lICs9IHBhZE51bWJlcihNYXRoW3pvbmUgPiAwID8gJ2Zsb29yJyA6ICdjZWlsJ10oem9uZSAvIDYwKSwgMikgK1xuICAgICAgICAgICAgICAgIHBhZE51bWJlcihNYXRoLmFicyh6b25lICUgNjApLCAyKTtcblxuICByZXR1cm4gcGFkZGVkWm9uZTtcbn1cblxuZnVuY3Rpb24gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcih5ZWFyKSB7XG4gICAgLy8gMCA9IGluZGV4IG9mIEphbnVhcnlcbiAgICB2YXIgZGF5T2ZXZWVrT25GaXJzdCA9IChuZXcgRGF0ZSh5ZWFyLCAwLCAxKSkuZ2V0RGF5KCk7XG4gICAgLy8gNCA9IGluZGV4IG9mIFRodXJzZGF5ICgrMSB0byBhY2NvdW50IGZvciAxc3QgPSA1KVxuICAgIC8vIDExID0gaW5kZXggb2YgKm5leHQqIFRodXJzZGF5ICgrMSBhY2NvdW50IGZvciAxc3QgPSAxMilcbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgMCwgKChkYXlPZldlZWtPbkZpcnN0IDw9IDQpID8gNSA6IDEyKSAtIGRheU9mV2Vla09uRmlyc3QpO1xufVxuXG5mdW5jdGlvbiBnZXRUaHVyc2RheVRoaXNXZWVrKGRhdGV0aW1lKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGRhdGV0aW1lLmdldEZ1bGxZZWFyKCksIGRhdGV0aW1lLmdldE1vbnRoKCksXG4gICAgICAvLyA0ID0gaW5kZXggb2YgVGh1cnNkYXlcbiAgICAgIGRhdGV0aW1lLmdldERhdGUoKSArICg0IC0gZGF0ZXRpbWUuZ2V0RGF5KCkpKTtcbn1cblxuZnVuY3Rpb24gd2Vla0dldHRlcihzaXplKSB7XG4gICByZXR1cm4gZnVuY3Rpb24oZGF0ZSkge1xuICAgICAgdmFyIGZpcnN0VGh1cnMgPSBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSksXG4gICAgICAgICB0aGlzVGh1cnMgPSBnZXRUaHVyc2RheVRoaXNXZWVrKGRhdGUpO1xuXG4gICAgICB2YXIgZGlmZiA9ICt0aGlzVGh1cnMgLSArZmlyc3RUaHVycyxcbiAgICAgICAgIHJlc3VsdCA9IDEgKyBNYXRoLnJvdW5kKGRpZmYgLyA2LjA0OGU4KTsgLy8gNi4wNDhlOCBtcyBwZXIgd2Vla1xuXG4gICAgICByZXR1cm4gcGFkTnVtYmVyKHJlc3VsdCwgc2l6ZSk7XG4gICB9O1xufVxuXG5mdW5jdGlvbiBhbXBtR2V0dGVyKGRhdGUsIGZvcm1hdHMpIHtcbiAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKSA8IDEyID8gZm9ybWF0cy5BTVBNU1swXSA6IGZvcm1hdHMuQU1QTVNbMV07XG59XG5cbmZ1bmN0aW9uIGVyYUdldHRlcihkYXRlLCBmb3JtYXRzKSB7XG4gIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCkgPD0gMCA/IGZvcm1hdHMuRVJBU1swXSA6IGZvcm1hdHMuRVJBU1sxXTtcbn1cblxuZnVuY3Rpb24gbG9uZ0VyYUdldHRlcihkYXRlLCBmb3JtYXRzKSB7XG4gIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCkgPD0gMCA/IGZvcm1hdHMuRVJBTkFNRVNbMF0gOiBmb3JtYXRzLkVSQU5BTUVTWzFdO1xufVxuXG52YXIgREFURV9GT1JNQVRTID0ge1xuICB5eXl5OiBkYXRlR2V0dGVyKCdGdWxsWWVhcicsIDQsIDAsIGZhbHNlLCB0cnVlKSxcbiAgICB5eTogZGF0ZUdldHRlcignRnVsbFllYXInLCAyLCAwLCB0cnVlLCB0cnVlKSxcbiAgICAgeTogZGF0ZUdldHRlcignRnVsbFllYXInLCAxLCAwLCBmYWxzZSwgdHJ1ZSksXG4gIE1NTU06IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJyksXG4gICBNTU06IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJywgdHJ1ZSksXG4gICAgTU06IGRhdGVHZXR0ZXIoJ01vbnRoJywgMiwgMSksXG4gICAgIE06IGRhdGVHZXR0ZXIoJ01vbnRoJywgMSwgMSksXG4gIExMTEw6IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJywgZmFsc2UsIHRydWUpLFxuICAgIGRkOiBkYXRlR2V0dGVyKCdEYXRlJywgMiksXG4gICAgIGQ6IGRhdGVHZXR0ZXIoJ0RhdGUnLCAxKSxcbiAgICBISDogZGF0ZUdldHRlcignSG91cnMnLCAyKSxcbiAgICAgSDogZGF0ZUdldHRlcignSG91cnMnLCAxKSxcbiAgICBoaDogZGF0ZUdldHRlcignSG91cnMnLCAyLCAtMTIpLFxuICAgICBoOiBkYXRlR2V0dGVyKCdIb3VycycsIDEsIC0xMiksXG4gICAgbW06IGRhdGVHZXR0ZXIoJ01pbnV0ZXMnLCAyKSxcbiAgICAgbTogZGF0ZUdldHRlcignTWludXRlcycsIDEpLFxuICAgIHNzOiBkYXRlR2V0dGVyKCdTZWNvbmRzJywgMiksXG4gICAgIHM6IGRhdGVHZXR0ZXIoJ1NlY29uZHMnLCAxKSxcbiAgICAgLy8gd2hpbGUgSVNPIDg2MDEgcmVxdWlyZXMgZnJhY3Rpb25zIHRvIGJlIHByZWZpeGVkIHdpdGggYC5gIG9yIGAsYFxuICAgICAvLyB3ZSBjYW4gYmUganVzdCBzYWZlbHkgcmVseSBvbiB1c2luZyBgc3NzYCBzaW5jZSB3ZSBjdXJyZW50bHkgZG9uJ3Qgc3VwcG9ydCBzaW5nbGUgb3IgdHdvIGRpZ2l0IGZyYWN0aW9uc1xuICAgc3NzOiBkYXRlR2V0dGVyKCdNaWxsaXNlY29uZHMnLCAzKSxcbiAgRUVFRTogZGF0ZVN0ckdldHRlcignRGF5JyksXG4gICBFRUU6IGRhdGVTdHJHZXR0ZXIoJ0RheScsIHRydWUpLFxuICAgICBhOiBhbXBtR2V0dGVyLFxuICAgICBaOiB0aW1lWm9uZUdldHRlcixcbiAgICB3dzogd2Vla0dldHRlcigyKSxcbiAgICAgdzogd2Vla0dldHRlcigxKSxcbiAgICAgRzogZXJhR2V0dGVyLFxuICAgICBHRzogZXJhR2V0dGVyLFxuICAgICBHR0c6IGVyYUdldHRlcixcbiAgICAgR0dHRzogbG9uZ0VyYUdldHRlclxufTtcblxudmFyIERBVEVfRk9STUFUU19TUExJVCA9IC8oKD86W155TUxkSGhtc2FaRXdHJ10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8TCt8ZCt8SCt8aCt8bSt8cyt8YXxafEcrfHcrKSkoW1xcc1xcU10qKS8sXG4gICAgTlVNQkVSX1NUUklORyA9IC9eLT9cXGQrJC87XG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgZGF0ZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICAgRm9ybWF0cyBgZGF0ZWAgdG8gYSBzdHJpbmcgYmFzZWQgb24gdGhlIHJlcXVlc3RlZCBgZm9ybWF0YC5cbiAqXG4gKiAgIGBmb3JtYXRgIHN0cmluZyBjYW4gYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBlbGVtZW50czpcbiAqXG4gKiAgICogYCd5eXl5J2A6IDQgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciAoZS5nLiBBRCAxID0+IDAwMDEsIEFEIDIwMTAgPT4gMjAxMClcbiAqICAgKiBgJ3l5J2A6IDIgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciwgcGFkZGVkICgwMC05OSkuIChlLmcuIEFEIDIwMDEgPT4gMDEsIEFEIDIwMTAgPT4gMTApXG4gKiAgICogYCd5J2A6IDEgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciwgZS5nLiAoQUQgMSA9PiAxLCBBRCAxOTkgPT4gMTk5KVxuICogICAqIGAnTU1NTSdgOiBNb250aCBpbiB5ZWFyIChKYW51YXJ5LURlY2VtYmVyKVxuICogICAqIGAnTU1NJ2A6IE1vbnRoIGluIHllYXIgKEphbi1EZWMpXG4gKiAgICogYCdNTSdgOiBNb250aCBpbiB5ZWFyLCBwYWRkZWQgKDAxLTEyKVxuICogICAqIGAnTSdgOiBNb250aCBpbiB5ZWFyICgxLTEyKVxuICogICAqIGAnTExMTCdgOiBTdGFuZC1hbG9uZSBtb250aCBpbiB5ZWFyIChKYW51YXJ5LURlY2VtYmVyKVxuICogICAqIGAnZGQnYDogRGF5IGluIG1vbnRoLCBwYWRkZWQgKDAxLTMxKVxuICogICAqIGAnZCdgOiBEYXkgaW4gbW9udGggKDEtMzEpXG4gKiAgICogYCdFRUVFJ2A6IERheSBpbiBXZWVrLChTdW5kYXktU2F0dXJkYXkpXG4gKiAgICogYCdFRUUnYDogRGF5IGluIFdlZWssIChTdW4tU2F0KVxuICogICAqIGAnSEgnYDogSG91ciBpbiBkYXksIHBhZGRlZCAoMDAtMjMpXG4gKiAgICogYCdIJ2A6IEhvdXIgaW4gZGF5ICgwLTIzKVxuICogICAqIGAnaGgnYDogSG91ciBpbiBBTS9QTSwgcGFkZGVkICgwMS0xMilcbiAqICAgKiBgJ2gnYDogSG91ciBpbiBBTS9QTSwgKDEtMTIpXG4gKiAgICogYCdtbSdgOiBNaW51dGUgaW4gaG91ciwgcGFkZGVkICgwMC01OSlcbiAqICAgKiBgJ20nYDogTWludXRlIGluIGhvdXIgKDAtNTkpXG4gKiAgICogYCdzcydgOiBTZWNvbmQgaW4gbWludXRlLCBwYWRkZWQgKDAwLTU5KVxuICogICAqIGAncydgOiBTZWNvbmQgaW4gbWludXRlICgwLTU5KVxuICogICAqIGAnc3NzJ2A6IE1pbGxpc2Vjb25kIGluIHNlY29uZCwgcGFkZGVkICgwMDAtOTk5KVxuICogICAqIGAnYSdgOiBBTS9QTSBtYXJrZXJcbiAqICAgKiBgJ1onYDogNCBkaWdpdCAoK3NpZ24pIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0aW1lem9uZSBvZmZzZXQgKC0xMjAwLSsxMjAwKVxuICogICAqIGAnd3cnYDogV2VlayBvZiB5ZWFyLCBwYWRkZWQgKDAwLTUzKS4gV2VlayAwMSBpcyB0aGUgd2VlayB3aXRoIHRoZSBmaXJzdCBUaHVyc2RheSBvZiB0aGUgeWVhclxuICogICAqIGAndydgOiBXZWVrIG9mIHllYXIgKDAtNTMpLiBXZWVrIDEgaXMgdGhlIHdlZWsgd2l0aCB0aGUgZmlyc3QgVGh1cnNkYXkgb2YgdGhlIHllYXJcbiAqICAgKiBgJ0cnYCwgYCdHRydgLCBgJ0dHRydgOiBUaGUgYWJicmV2aWF0ZWQgZm9ybSBvZiB0aGUgZXJhIHN0cmluZyAoZS5nLiAnQUQnKVxuICogICAqIGAnR0dHRydgOiBUaGUgbG9uZyBmb3JtIG9mIHRoZSBlcmEgc3RyaW5nIChlLmcuICdBbm5vIERvbWluaScpXG4gKlxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGFsc28gYmUgb25lIG9mIHRoZSBmb2xsb3dpbmcgcHJlZGVmaW5lZFxuICogICB7QGxpbmsgZ3VpZGUvaTE4biBsb2NhbGl6YWJsZSBmb3JtYXRzfTpcbiAqXG4gKiAgICogYCdtZWRpdW0nYDogZXF1aXZhbGVudCB0byBgJ01NTSBkLCB5IGg6bW06c3MgYSdgIGZvciBlbl9VUyBsb2NhbGVcbiAqICAgICAoZS5nLiBTZXAgMywgMjAxMCAxMjowNTowOCBQTSlcbiAqICAgKiBgJ3Nob3J0J2A6IGVxdWl2YWxlbnQgdG8gYCdNL2QveXkgaDptbSBhJ2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gOS8zLzEwIDEyOjA1IFBNKVxuICogICAqIGAnZnVsbERhdGUnYDogZXF1aXZhbGVudCB0byBgJ0VFRUUsIE1NTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlXG4gKiAgICAgKGUuZy4gRnJpZGF5LCBTZXB0ZW1iZXIgMywgMjAxMClcbiAqICAgKiBgJ2xvbmdEYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU1NIGQsIHknYCBmb3IgZW5fVVMgIGxvY2FsZSAoZS5nLiBTZXB0ZW1iZXIgMywgMjAxMClcbiAqICAgKiBgJ21lZGl1bURhdGUnYDogZXF1aXZhbGVudCB0byBgJ01NTSBkLCB5J2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gU2VwIDMsIDIwMTApXG4gKiAgICogYCdzaG9ydERhdGUnYDogZXF1aXZhbGVudCB0byBgJ00vZC95eSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gOS8zLzEwKVxuICogICAqIGAnbWVkaXVtVGltZSdgOiBlcXVpdmFsZW50IHRvIGAnaDptbTpzcyBhJ2AgZm9yIGVuX1VTIGxvY2FsZSAoZS5nLiAxMjowNTowOCBQTSlcbiAqICAgKiBgJ3Nob3J0VGltZSdgOiBlcXVpdmFsZW50IHRvIGAnaDptbSBhJ2AgZm9yIGVuX1VTIGxvY2FsZSAoZS5nLiAxMjowNSBQTSlcbiAqXG4gKiAgIGBmb3JtYXRgIHN0cmluZyBjYW4gY29udGFpbiBsaXRlcmFsIHZhbHVlcy4gVGhlc2UgbmVlZCB0byBiZSBlc2NhcGVkIGJ5IHN1cnJvdW5kaW5nIHdpdGggc2luZ2xlIHF1b3RlcyAoZS5nLlxuICogICBgXCJoICdpbiB0aGUgbW9ybmluZydcImApLiBJbiBvcmRlciB0byBvdXRwdXQgYSBzaW5nbGUgcXVvdGUsIGVzY2FwZSBpdCAtIGkuZS4sIHR3byBzaW5nbGUgcXVvdGVzIGluIGEgc2VxdWVuY2VcbiAqICAgKGUuZy4gYFwiaCAnbycnY2xvY2snXCJgKS5cbiAqXG4gKiAgIEFueSBvdGhlciBjaGFyYWN0ZXJzIGluIHRoZSBgZm9ybWF0YCBzdHJpbmcgd2lsbCBiZSBvdXRwdXQgYXMtaXMuXG4gKlxuICogQHBhcmFtIHsoRGF0ZXxudW1iZXJ8c3RyaW5nKX0gZGF0ZSBEYXRlIHRvIGZvcm1hdCBlaXRoZXIgYXMgRGF0ZSBvYmplY3QsIG1pbGxpc2Vjb25kcyAoc3RyaW5nIG9yXG4gKiAgICBudW1iZXIpIG9yIHZhcmlvdXMgSVNPIDg2MDEgZGF0ZXRpbWUgc3RyaW5nIGZvcm1hdHMgKGUuZy4geXl5eS1NTS1kZFRISDptbTpzcy5zc3NaIGFuZCBpdHNcbiAqICAgIHNob3J0ZXIgdmVyc2lvbnMgbGlrZSB5eXl5LU1NLWRkVEhIOm1tWiwgeXl5eS1NTS1kZCBvciB5eXl5TU1kZFRISG1tc3NaKS4gSWYgbm8gdGltZXpvbmUgaXNcbiAqICAgIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGlucHV0LCB0aGUgdGltZSBpcyBjb25zaWRlcmVkIHRvIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gZm9ybWF0IEZvcm1hdHRpbmcgcnVsZXMgKHNlZSBEZXNjcmlwdGlvbikuIElmIG5vdCBzcGVjaWZpZWQsXG4gKiAgICBgbWVkaXVtRGF0ZWAgaXMgdXNlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gdGltZXpvbmUgVGltZXpvbmUgdG8gYmUgdXNlZCBmb3IgZm9ybWF0dGluZy4gSXQgdW5kZXJzdGFuZHMgVVRDL0dNVCBhbmQgdGhlXG4gKiAgICBjb250aW5lbnRhbCBVUyB0aW1lIHpvbmUgYWJicmV2aWF0aW9ucywgYnV0IGZvciBnZW5lcmFsIHVzZSwgdXNlIGEgdGltZSB6b25lIG9mZnNldCwgZm9yXG4gKiAgICBleGFtcGxlLCBgJyswNDMwJ2AgKDQgaG91cnMsIDMwIG1pbnV0ZXMgZWFzdCBvZiB0aGUgR3JlZW53aWNoIG1lcmlkaWFuKVxuICogICAgSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyIHdpbGwgYmUgdXNlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEZvcm1hdHRlZCBzdHJpbmcgb3IgdGhlIGlucHV0IGlmIGlucHV0IGlzIG5vdCByZWNvZ25pemVkIGFzIGRhdGUvbWlsbGlzLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwiZmlsdGVyLWRhdGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonbWVkaXVtJ319PC9zcGFuPjpcbiAgICAgICAgICAgPHNwYW4+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonbWVkaXVtJ319PC9zcGFuPjxicj5cbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ319PC9zcGFuPjpcbiAgICAgICAgICA8c3Bhbj57ezEyODgzMjM2MjMwMDYgfCBkYXRlOid5eXl5LU1NLWRkIEhIOm1tOnNzIFonfX08L3NwYW4+PGJyPlxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOidNTS9kZC95eXl5IEAgaDptbWEnfX08L3NwYW4+OlxuICAgICAgICAgIDxzcGFuPnt7JzEyODgzMjM2MjMwMDYnIHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ319PC9zcGFuPjxicj5cbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTpcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVwifX08L3NwYW4+OlxuICAgICAgICAgIDxzcGFuPnt7JzEyODgzMjM2MjMwMDYnIHwgZGF0ZTpcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVwifX08L3NwYW4+PGJyPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGZvcm1hdCBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiMTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSdcIikpLmdldFRleHQoKSkuXG4gICAgICAgICAgICB0b01hdGNoKC9PY3QgMlxcZCwgMjAxMCBcXGR7MSwyfTpcXGR7Mn06XFxkezJ9IChBTXxQTSkvKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCIxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ1wiKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgIHRvTWF0Y2goLzIwMTAtMTAtMlxcZCBcXGR7Mn06XFxkezJ9OlxcZHsyfSAoLXxcXCspP1xcZHs0fS8pO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIicxMjg4MzIzNjIzMDA2JyB8IGRhdGU6J01NL2RkL3l5eXkgQCBoOm1tYSdcIikpLmdldFRleHQoKSkuXG4gICAgICAgICAgICB0b01hdGNoKC8xMFxcLzJcXGRcXC8yMDEwIEAgXFxkezEsMn06XFxkezJ9KEFNfFBNKS8pO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIicxMjg4MzIzNjIzMDA2JyB8IGRhdGU6XFxcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVxcXCJcIikpLmdldFRleHQoKSkuXG4gICAgICAgICAgICB0b01hdGNoKC8xMFxcLzJcXGRcXC8yMDEwIGF0IFxcZHsxLDJ9OlxcZHsyfShBTXxQTSkvKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5kYXRlRmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcbmZ1bmN0aW9uIGRhdGVGaWx0ZXIoJGxvY2FsZSkge1xuXG5cbiAgdmFyIFJfSVNPODYwMV9TVFIgPSAvXihcXGR7NH0pLT8oXFxkXFxkKS0/KFxcZFxcZCkoPzpUKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlxcLihcXGQrKSk/KT8pPyhafChbKy1dKShcXGRcXGQpOj8oXFxkXFxkKSk/KT8kLztcbiAgICAgICAgICAgICAgICAgICAgIC8vIDEgICAgICAgIDIgICAgICAgMyAgICAgICAgIDQgICAgICAgICAgNSAgICAgICAgICA2ICAgICAgICAgIDcgICAgICAgICAgOCAgOSAgICAgMTAgICAgICAxMVxuICBmdW5jdGlvbiBqc29uU3RyaW5nVG9EYXRlKHN0cmluZykge1xuICAgIHZhciBtYXRjaDtcbiAgICBpZiAoKG1hdGNoID0gc3RyaW5nLm1hdGNoKFJfSVNPODYwMV9TVFIpKSkge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKSxcbiAgICAgICAgICB0ekhvdXIgPSAwLFxuICAgICAgICAgIHR6TWluICA9IDAsXG4gICAgICAgICAgZGF0ZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENGdWxsWWVhciA6IGRhdGUuc2V0RnVsbFllYXIsXG4gICAgICAgICAgdGltZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENIb3VycyA6IGRhdGUuc2V0SG91cnM7XG5cbiAgICAgIGlmIChtYXRjaFs5XSkge1xuICAgICAgICB0ekhvdXIgPSB0b0ludChtYXRjaFs5XSArIG1hdGNoWzEwXSk7XG4gICAgICAgIHR6TWluID0gdG9JbnQobWF0Y2hbOV0gKyBtYXRjaFsxMV0pO1xuICAgICAgfVxuICAgICAgZGF0ZVNldHRlci5jYWxsKGRhdGUsIHRvSW50KG1hdGNoWzFdKSwgdG9JbnQobWF0Y2hbMl0pIC0gMSwgdG9JbnQobWF0Y2hbM10pKTtcbiAgICAgIHZhciBoID0gdG9JbnQobWF0Y2hbNF0gfHwgMCkgLSB0ekhvdXI7XG4gICAgICB2YXIgbSA9IHRvSW50KG1hdGNoWzVdIHx8IDApIC0gdHpNaW47XG4gICAgICB2YXIgcyA9IHRvSW50KG1hdGNoWzZdIHx8IDApO1xuICAgICAgdmFyIG1zID0gTWF0aC5yb3VuZChwYXJzZUZsb2F0KCcwLicgKyAobWF0Y2hbN10gfHwgMCkpICogMTAwMCk7XG4gICAgICB0aW1lU2V0dGVyLmNhbGwoZGF0ZSwgaCwgbSwgcywgbXMpO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmc7XG4gIH1cblxuXG4gIHJldHVybiBmdW5jdGlvbihkYXRlLCBmb3JtYXQsIHRpbWV6b25lKSB7XG4gICAgdmFyIHRleHQgPSAnJyxcbiAgICAgICAgcGFydHMgPSBbXSxcbiAgICAgICAgZm4sIG1hdGNoO1xuXG4gICAgZm9ybWF0ID0gZm9ybWF0IHx8ICdtZWRpdW1EYXRlJztcbiAgICBmb3JtYXQgPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFNbZm9ybWF0XSB8fCBmb3JtYXQ7XG4gICAgaWYgKGlzU3RyaW5nKGRhdGUpKSB7XG4gICAgICBkYXRlID0gTlVNQkVSX1NUUklORy50ZXN0KGRhdGUpID8gdG9JbnQoZGF0ZSkgOiBqc29uU3RyaW5nVG9EYXRlKGRhdGUpO1xuICAgIH1cblxuICAgIGlmIChpc051bWJlcihkYXRlKSkge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICAgIH1cblxuICAgIGlmICghaXNEYXRlKGRhdGUpIHx8ICFpc0Zpbml0ZShkYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cblxuICAgIHdoaWxlIChmb3JtYXQpIHtcbiAgICAgIG1hdGNoID0gREFURV9GT1JNQVRTX1NQTElULmV4ZWMoZm9ybWF0KTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBwYXJ0cyA9IGNvbmNhdChwYXJ0cywgbWF0Y2gsIDEpO1xuICAgICAgICBmb3JtYXQgPSBwYXJ0cy5wb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRzLnB1c2goZm9ybWF0KTtcbiAgICAgICAgZm9ybWF0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZGF0ZVRpbWV6b25lT2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgIGlmICh0aW1lem9uZSkge1xuICAgICAgZGF0ZVRpbWV6b25lT2Zmc2V0ID0gdGltZXpvbmVUb09mZnNldCh0aW1lem9uZSwgZGF0ZVRpbWV6b25lT2Zmc2V0KTtcbiAgICAgIGRhdGUgPSBjb252ZXJ0VGltZXpvbmVUb0xvY2FsKGRhdGUsIHRpbWV6b25lLCB0cnVlKTtcbiAgICB9XG4gICAgZm9yRWFjaChwYXJ0cywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGZuID0gREFURV9GT1JNQVRTW3ZhbHVlXTtcbiAgICAgIHRleHQgKz0gZm4gPyBmbihkYXRlLCAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMsIGRhdGVUaW1lem9uZU9mZnNldClcbiAgICAgICAgICAgICAgICAgOiB2YWx1ZSA9PT0gJ1xcJ1xcJycgPyAnXFwnJyA6IHZhbHVlLnJlcGxhY2UoLyheJ3wnJCkvZywgJycpLnJlcGxhY2UoLycnL2csICdcXCcnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0ZXh0O1xuICB9O1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUganNvblxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICAgQWxsb3dzIHlvdSB0byBjb252ZXJ0IGEgSmF2YVNjcmlwdCBvYmplY3QgaW50byBKU09OIHN0cmluZy5cbiAqXG4gKiAgIFRoaXMgZmlsdGVyIGlzIG1vc3RseSB1c2VmdWwgZm9yIGRlYnVnZ2luZy4gV2hlbiB1c2luZyB0aGUgZG91YmxlIGN1cmx5IHt7dmFsdWV9fSBub3RhdGlvblxuICogICB0aGUgYmluZGluZyBpcyBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBKU09OLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IEFueSBKYXZhU2NyaXB0IG9iamVjdCAoaW5jbHVkaW5nIGFycmF5cyBhbmQgcHJpbWl0aXZlIHR5cGVzKSB0byBmaWx0ZXIuXG4gKiBAcGFyYW0ge251bWJlcj19IHNwYWNpbmcgVGhlIG51bWJlciBvZiBzcGFjZXMgdG8gdXNlIHBlciBpbmRlbnRhdGlvbiwgZGVmYXVsdHMgdG8gMi5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEpTT04gc3RyaW5nLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cImZpbHRlci1qc29uXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHByZSBpZD1cImRlZmF1bHQtc3BhY2luZ1wiPnt7IHsnbmFtZSc6J3ZhbHVlJ30gfCBqc29uIH19PC9wcmU+XG4gICAgICAgPHByZSBpZD1cImN1c3RvbS1zcGFjaW5nXCI+e3sgeyduYW1lJzondmFsdWUnfSB8IGpzb246NCB9fTwvcHJlPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGpzb25pZnkgZmlsdGVyZWQgb2JqZWN0cycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RlZmF1bHQtc3BhY2luZycpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL1xce1xcbiB7Mn1cIm5hbWVcIjogP1widmFsdWVcIlxcbn0vKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXN0b20tc3BhY2luZycpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL1xce1xcbiB7NH1cIm5hbWVcIjogP1widmFsdWVcIlxcbn0vKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICpcbiAqL1xuZnVuY3Rpb24ganNvbkZpbHRlcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgc3BhY2luZykge1xuICAgIGlmIChpc1VuZGVmaW5lZChzcGFjaW5nKSkge1xuICAgICAgICBzcGFjaW5nID0gMjtcbiAgICB9XG4gICAgcmV0dXJuIHRvSnNvbihvYmplY3QsIHNwYWNpbmcpO1xuICB9O1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgbG93ZXJjYXNlXG4gKiBAa2luZCBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0cyBzdHJpbmcgdG8gbG93ZXJjYXNlLlxuICpcbiAqIFNlZSB0aGUge0BsaW5rIG5nLnVwcGVyY2FzZSB1cHBlcmNhc2UgZmlsdGVyIGRvY3VtZW50YXRpb259IGZvciBhIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgZXhhbXBsZS5cbiAqXG4gKiBAc2VlIGFuZ3VsYXIubG93ZXJjYXNlXG4gKi9cbnZhciBsb3dlcmNhc2VGaWx0ZXIgPSB2YWx1ZUZuKGxvd2VyY2FzZSk7XG5cblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSB1cHBlcmNhc2VcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnRzIHN0cmluZyB0byB1cHBlcmNhc2UuXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwidXBwZXJjYXNlRmlsdGVyRXhhbXBsZVwiIG5hbWU9XCJmaWx0ZXItdXBwZXJjYXNlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd1cHBlcmNhc2VGaWx0ZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gJ1RoaXMgaXMgYSB0aXRsZSc7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPCEtLSBUaGlzIHRpdGxlIHNob3VsZCBiZSBmb3JtYXR0ZWQgbm9ybWFsbHkgLS0+XG4gICAgICAgICA8aDE+e3t0aXRsZX19PC9oMT5cbiAgICAgICAgIDwhLS0gVGhpcyB0aXRsZSBzaG91bGQgYmUgY2FwaXRhbGl6ZWQgLS0+XG4gICAgICAgICA8aDE+e3t0aXRsZSB8IHVwcGVyY2FzZX19PC9oMT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgdXBwZXJjYXNlRmlsdGVyID0gdmFsdWVGbih1cHBlcmNhc2UpO1xuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGxpbWl0VG9cbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGFycmF5IG9yIHN0cmluZyBjb250YWluaW5nIG9ubHkgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzLiBUaGUgZWxlbWVudHMgYXJlXG4gKiB0YWtlbiBmcm9tIGVpdGhlciB0aGUgYmVnaW5uaW5nIG9yIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBhcnJheSwgc3RyaW5nIG9yIG51bWJlciwgYXMgc3BlY2lmaWVkIGJ5XG4gKiB0aGUgdmFsdWUgYW5kIHNpZ24gKHBvc2l0aXZlIG9yIG5lZ2F0aXZlKSBvZiBgbGltaXRgLiBPdGhlciBhcnJheS1saWtlIG9iamVjdHMgYXJlIGFsc28gc3VwcG9ydGVkXG4gKiAoZS5nLiBhcnJheSBzdWJjbGFzc2VzLCBOb2RlTGlzdHMsIGpxTGl0ZS9qUXVlcnkgY29sbGVjdGlvbnMgZXRjKS4gSWYgYSBudW1iZXIgaXMgdXNlZCBhcyBpbnB1dCxcbiAqIGl0IGlzIGNvbnZlcnRlZCB0byBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fEFycmF5TGlrZXxzdHJpbmd8bnVtYmVyfSBpbnB1dCAtIEFycmF5L2FycmF5LWxpa2UsIHN0cmluZyBvciBudW1iZXIgdG8gYmUgbGltaXRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gbGltaXQgLSBUaGUgbGVuZ3RoIG9mIHRoZSByZXR1cm5lZCBhcnJheSBvciBzdHJpbmcuIElmIHRoZSBgbGltaXRgIG51bWJlclxuICogICAgIGlzIHBvc2l0aXZlLCBgbGltaXRgIG51bWJlciBvZiBpdGVtcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBhcnJheS9zdHJpbmcgYXJlIGNvcGllZC5cbiAqICAgICBJZiB0aGUgbnVtYmVyIGlzIG5lZ2F0aXZlLCBgbGltaXRgIG51bWJlciAgb2YgaXRlbXMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXkvc3RyaW5nXG4gKiAgICAgYXJlIGNvcGllZC4gVGhlIGBsaW1pdGAgd2lsbCBiZSB0cmltbWVkIGlmIGl0IGV4Y2VlZHMgYGFycmF5Lmxlbmd0aGAuIElmIGBsaW1pdGAgaXMgdW5kZWZpbmVkLFxuICogICAgIHRoZSBpbnB1dCB3aWxsIGJlIHJldHVybmVkIHVuY2hhbmdlZC5cbiAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpPX0gYmVnaW4gLSBJbmRleCBhdCB3aGljaCB0byBiZWdpbiBsaW1pdGF0aW9uLiBBcyBhIG5lZ2F0aXZlIGluZGV4LFxuICogICAgIGBiZWdpbmAgaW5kaWNhdGVzIGFuIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgYGlucHV0YC4gRGVmYXVsdHMgdG8gYDBgLlxuICogQHJldHVybnMge0FycmF5fHN0cmluZ30gQSBuZXcgc3ViLWFycmF5IG9yIHN1YnN0cmluZyBvZiBsZW5ndGggYGxpbWl0YCBvciBsZXNzIGlmIHRoZSBpbnB1dCBoYWRcbiAqICAgICBsZXNzIHRoYW4gYGxpbWl0YCBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibGltaXRUb0V4YW1wbGVcIiBuYW1lPVwibGltaXQtdG8tZmlsdGVyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdsaW1pdFRvRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5udW1iZXJzID0gWzEsMiwzLDQsNSw2LDcsOCw5XTtcbiAgICAgICAgICAgICAkc2NvcGUubGV0dGVycyA9IFwiYWJjZGVmZ2hpXCI7XG4gICAgICAgICAgICAgJHNjb3BlLmxvbmdOdW1iZXIgPSAyMzQ1NDMyMzQyO1xuICAgICAgICAgICAgICRzY29wZS5udW1MaW1pdCA9IDM7XG4gICAgICAgICAgICAgJHNjb3BlLmxldHRlckxpbWl0ID0gMztcbiAgICAgICAgICAgICAkc2NvcGUubG9uZ051bWJlckxpbWl0ID0gMztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBMaW1pdCB7e251bWJlcnN9fSB0bzpcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgc3RlcD1cIjFcIiBuZy1tb2RlbD1cIm51bUxpbWl0XCI+XG4gICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgPHA+T3V0cHV0IG51bWJlcnM6IHt7IG51bWJlcnMgfCBsaW1pdFRvOm51bUxpbWl0IH19PC9wPlxuICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgTGltaXQge3tsZXR0ZXJzfX0gdG86XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbmctbW9kZWw9XCJsZXR0ZXJMaW1pdFwiPlxuICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgIDxwPk91dHB1dCBsZXR0ZXJzOiB7eyBsZXR0ZXJzIHwgbGltaXRUbzpsZXR0ZXJMaW1pdCB9fTwvcD5cbiAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIExpbWl0IHt7bG9uZ051bWJlcn19IHRvOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBzdGVwPVwiMVwiIG5nLW1vZGVsPVwibG9uZ051bWJlckxpbWl0XCI+XG4gICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgPHA+T3V0cHV0IGxvbmcgbnVtYmVyOiB7eyBsb25nTnVtYmVyIHwgbGltaXRUbzpsb25nTnVtYmVyTGltaXQgfX08L3A+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBudW1MaW1pdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbnVtTGltaXQnKSk7XG4gICAgICAgdmFyIGxldHRlckxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsZXR0ZXJMaW1pdCcpKTtcbiAgICAgICB2YXIgbG9uZ051bWJlckxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsb25nTnVtYmVyTGltaXQnKSk7XG4gICAgICAgdmFyIGxpbWl0ZWROdW1iZXJzID0gZWxlbWVudChieS5iaW5kaW5nKCdudW1iZXJzIHwgbGltaXRUbzpudW1MaW1pdCcpKTtcbiAgICAgICB2YXIgbGltaXRlZExldHRlcnMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xldHRlcnMgfCBsaW1pdFRvOmxldHRlckxpbWl0JykpO1xuICAgICAgIHZhciBsaW1pdGVkTG9uZ051bWJlciA9IGVsZW1lbnQoYnkuYmluZGluZygnbG9uZ051bWJlciB8IGxpbWl0VG86bG9uZ051bWJlckxpbWl0JykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBsaW1pdCB0aGUgbnVtYmVyIGFycmF5IHRvIGZpcnN0IHRocmVlIGl0ZW1zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QobnVtTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcbiAgICAgICAgIGV4cGVjdChsZXR0ZXJMaW1pdElucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnMycpO1xuICAgICAgICAgZXhwZWN0KGxvbmdOdW1iZXJMaW1pdElucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnMycpO1xuICAgICAgICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFsxLDIsM10nKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTGV0dGVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsZXR0ZXJzOiBhYmMnKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTG9uZ051bWJlci5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsb25nIG51bWJlcjogMjM0Jyk7XG4gICAgICAgfSk7XG5cbiAgICAgICAvLyBUaGVyZSBpcyBhIGJ1ZyBpbiBzYWZhcmkgYW5kIHByb3RyYWN0b3IgdGhhdCBkb2Vzbid0IGxpa2UgdGhlIG1pbnVzIGtleVxuICAgICAgIC8vIGl0KCdzaG91bGQgdXBkYXRlIHRoZSBvdXRwdXQgd2hlbiAtMyBpcyBlbnRlcmVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgLy8gICBudW1MaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgLy8gICBudW1MaW1pdElucHV0LnNlbmRLZXlzKCctMycpO1xuICAgICAgIC8vICAgbGV0dGVyTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgIC8vICAgbGV0dGVyTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcbiAgICAgICAvLyAgIGxvbmdOdW1iZXJMaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgLy8gICBsb25nTnVtYmVyTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcbiAgICAgICAvLyAgIGV4cGVjdChsaW1pdGVkTnVtYmVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBudW1iZXJzOiBbNyw4LDldJyk7XG4gICAgICAgLy8gICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogZ2hpJyk7XG4gICAgICAgLy8gICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDM0MicpO1xuICAgICAgIC8vIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBub3QgZXhjZWVkIHRoZSBtYXhpbXVtIHNpemUgb2YgaW5wdXQgYXJyYXknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIG51bUxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgIG51bUxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xuICAgICAgICAgbGV0dGVyTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbGV0dGVyTGltaXRJbnB1dC5zZW5kS2V5cygnMTAwJyk7XG4gICAgICAgICBsb25nTnVtYmVyTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbG9uZ051bWJlckxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xuICAgICAgICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFsxLDIsMyw0LDUsNiw3LDgsOV0nKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTGV0dGVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsZXR0ZXJzOiBhYmNkZWZnaGknKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTG9uZ051bWJlci5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsb25nIG51bWJlcjogMjM0NTQzMjM0MicpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4qL1xuZnVuY3Rpb24gbGltaXRUb0ZpbHRlcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0LCBsaW1pdCwgYmVnaW4pIHtcbiAgICBpZiAoTWF0aC5hYnMoTnVtYmVyKGxpbWl0KSkgPT09IEluZmluaXR5KSB7XG4gICAgICBsaW1pdCA9IE51bWJlcihsaW1pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpbWl0ID0gdG9JbnQobGltaXQpO1xuICAgIH1cbiAgICBpZiAoaXNOdW1iZXJOYU4obGltaXQpKSByZXR1cm4gaW5wdXQ7XG5cbiAgICBpZiAoaXNOdW1iZXIoaW5wdXQpKSBpbnB1dCA9IGlucHV0LnRvU3RyaW5nKCk7XG4gICAgaWYgKCFpc0FycmF5TGlrZShpbnB1dCkpIHJldHVybiBpbnB1dDtcblxuICAgIGJlZ2luID0gKCFiZWdpbiB8fCBpc05hTihiZWdpbikpID8gMCA6IHRvSW50KGJlZ2luKTtcbiAgICBiZWdpbiA9IChiZWdpbiA8IDApID8gTWF0aC5tYXgoMCwgaW5wdXQubGVuZ3RoICsgYmVnaW4pIDogYmVnaW47XG5cbiAgICBpZiAobGltaXQgPj0gMCkge1xuICAgICAgcmV0dXJuIHNsaWNlRm4oaW5wdXQsIGJlZ2luLCBiZWdpbiArIGxpbWl0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGJlZ2luID09PSAwKSB7XG4gICAgICAgIHJldHVybiBzbGljZUZuKGlucHV0LCBsaW1pdCwgaW5wdXQubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzbGljZUZuKGlucHV0LCBNYXRoLm1heCgwLCBiZWdpbiArIGxpbWl0KSwgYmVnaW4pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc2xpY2VGbihpbnB1dCwgYmVnaW4sIGVuZCkge1xuICBpZiAoaXNTdHJpbmcoaW5wdXQpKSByZXR1cm4gaW5wdXQuc2xpY2UoYmVnaW4sIGVuZCk7XG5cbiAgcmV0dXJuIHNsaWNlLmNhbGwoaW5wdXQsIGJlZ2luLCBlbmQpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIG9yZGVyQnlcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGl0ZW1zIGZyb20gdGhlIHNwZWNpZmllZCBgY29sbGVjdGlvbmAsIG9yZGVyZWQgYnkgYSBgY29tcGFyYXRvcmBcbiAqIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSB2YWx1ZXMgY29tcHV0ZWQgdXNpbmcgdGhlIGBleHByZXNzaW9uYCBwcmVkaWNhdGUuXG4gKlxuICogRm9yIGV4YW1wbGUsIGBbe2lkOiAnZm9vJ30sIHtpZDogJ2Jhcid9XSB8IG9yZGVyQnk6J2lkJ2Agd291bGQgcmVzdWx0IGluXG4gKiBgW3tpZDogJ2Jhcid9LCB7aWQ6ICdmb28nfV1gLlxuICpcbiAqIFRoZSBgY29sbGVjdGlvbmAgY2FuIGJlIGFuIEFycmF5IG9yIGFycmF5LWxpa2Ugb2JqZWN0IChlLmcuIE5vZGVMaXN0LCBqUXVlcnkgb2JqZWN0LCBUeXBlZEFycmF5LFxuICogU3RyaW5nLCBldGMpLlxuICpcbiAqIFRoZSBgZXhwcmVzc2lvbmAgY2FuIGJlIGEgc2luZ2xlIHByZWRpY2F0ZSwgb3IgYSBsaXN0IG9mIHByZWRpY2F0ZXMgZWFjaCBzZXJ2aW5nIGFzIGEgdGllLWJyZWFrZXJcbiAqIGZvciB0aGUgcHJlY2VkaW5nIG9uZS4gVGhlIGBleHByZXNzaW9uYCBpcyBldmFsdWF0ZWQgYWdhaW5zdCBlYWNoIGl0ZW0gYW5kIHRoZSBvdXRwdXQgaXMgdXNlZFxuICogZm9yIGNvbXBhcmluZyB3aXRoIG90aGVyIGl0ZW1zLlxuICpcbiAqIFlvdSBjYW4gY2hhbmdlIHRoZSBzb3J0aW5nIG9yZGVyIGJ5IHNldHRpbmcgYHJldmVyc2VgIHRvIGB0cnVlYC4gQnkgZGVmYXVsdCwgaXRlbXMgYXJlIHNvcnRlZCBpblxuICogYXNjZW5kaW5nIG9yZGVyLlxuICpcbiAqIFRoZSBjb21wYXJpc29uIGlzIGRvbmUgdXNpbmcgdGhlIGBjb21wYXJhdG9yYCBmdW5jdGlvbi4gSWYgbm9uZSBpcyBzcGVjaWZpZWQsIGEgZGVmYXVsdCwgYnVpbHQtaW5cbiAqIGNvbXBhcmF0b3IgaXMgdXNlZCAoc2VlIGJlbG93IGZvciBkZXRhaWxzIC0gaW4gYSBudXRzaGVsbCwgaXQgY29tcGFyZXMgbnVtYmVycyBudW1lcmljYWxseSBhbmRcbiAqIHN0cmluZ3MgYWxwaGFiZXRpY2FsbHkpLlxuICpcbiAqICMjIyBVbmRlciB0aGUgaG9vZFxuICpcbiAqIE9yZGVyaW5nIHRoZSBzcGVjaWZpZWQgYGNvbGxlY3Rpb25gIGhhcHBlbnMgaW4gdHdvIHBoYXNlczpcbiAqXG4gKiAxLiBBbGwgaXRlbXMgYXJlIHBhc3NlZCB0aHJvdWdoIHRoZSBwcmVkaWNhdGUgKG9yIHByZWRpY2F0ZXMpLCBhbmQgdGhlIHJldHVybmVkIHZhbHVlcyBhcmUgc2F2ZWRcbiAqICAgIGFsb25nIHdpdGggdGhlaXIgdHlwZSAoYHN0cmluZ2AsIGBudW1iZXJgIGV0YykuIEZvciBleGFtcGxlLCBhbiBpdGVtIGB7bGFiZWw6ICdmb28nfWAsIHBhc3NlZFxuICogICAgdGhyb3VnaCBhIHByZWRpY2F0ZSB0aGF0IGV4dHJhY3RzIHRoZSB2YWx1ZSBvZiB0aGUgYGxhYmVsYCBwcm9wZXJ0eSwgd291bGQgYmUgdHJhbnNmb3JtZWQgdG86XG4gKiAgICBgYGBcbiAqICAgIHtcbiAqICAgICAgdmFsdWU6ICdmb28nLFxuICogICAgICB0eXBlOiAnc3RyaW5nJyxcbiAqICAgICAgaW5kZXg6IC4uLlxuICogICAgfVxuICogICAgYGBgXG4gKiAyLiBUaGUgY29tcGFyYXRvciBmdW5jdGlvbiBpcyB1c2VkIHRvIHNvcnQgdGhlIGl0ZW1zLCBiYXNlZCBvbiB0aGUgZGVyaXZlZCB2YWx1ZXMsIHR5cGVzIGFuZFxuICogICAgaW5kaWNlcy5cbiAqXG4gKiBJZiB5b3UgdXNlIGEgY3VzdG9tIGNvbXBhcmF0b3IsIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggcGFpcnMgb2Ygb2JqZWN0cyBvZiB0aGUgZm9ybVxuICogYHt2YWx1ZTogLi4uLCB0eXBlOiAnLi4uJywgaW5kZXg6IC4uLn1gIGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYDBgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVhbFxuICogKGFzIGZhciBhcyB0aGUgY29tcGFyYXRvciBpcyBjb25jZXJuZWQpLCBgLTFgIGlmIHRoZSAxc3Qgb25lIHNob3VsZCBiZSByYW5rZWQgaGlnaGVyIHRoYW4gdGhlXG4gKiBzZWNvbmQsIG9yIGAxYCBvdGhlcndpc2UuXG4gKlxuICogSW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgdGhlIHNvcnRpbmcgd2lsbCBiZSBkZXRlcm1pbmlzdGljIGFjcm9zcyBwbGF0Zm9ybXMsIGlmIG5vbmUgb2YgdGhlXG4gKiBzcGVjaWZpZWQgcHJlZGljYXRlcyBjYW4gZGlzdGluZ3Vpc2ggYmV0d2VlbiB0d28gaXRlbXMsIGBvcmRlckJ5YCB3aWxsIGF1dG9tYXRpY2FsbHkgaW50cm9kdWNlIGFcbiAqIGR1bW15IHByZWRpY2F0ZSB0aGF0IHJldHVybnMgdGhlIGl0ZW0ncyBpbmRleCBhcyBgdmFsdWVgLlxuICogKElmIHlvdSBhcmUgdXNpbmcgYSBjdXN0b20gY29tcGFyYXRvciwgbWFrZSBzdXJlIGl0IGNhbiBoYW5kbGUgdGhpcyBwcmVkaWNhdGUgYXMgd2VsbC4pXG4gKlxuICogSWYgYSBjdXN0b20gY29tcGFyYXRvciBzdGlsbCBjYW4ndCBkaXN0aW5ndWlzaCBiZXR3ZWVuIHR3byBpdGVtcywgdGhlbiB0aGV5IHdpbGwgYmUgc29ydGVkIGJhc2VkXG4gKiBvbiB0aGVpciBpbmRleCB1c2luZyB0aGUgYnVpbHQtaW4gY29tcGFyYXRvci5cbiAqXG4gKiBGaW5hbGx5LCBpbiBhbiBhdHRlbXB0IHRvIHNpbXBsaWZ5IHRoaW5ncywgaWYgYSBwcmVkaWNhdGUgcmV0dXJucyBhbiBvYmplY3QgYXMgdGhlIGV4dHJhY3RlZFxuICogdmFsdWUgZm9yIGFuIGl0ZW0sIGBvcmRlckJ5YCB3aWxsIHRyeSB0byBjb252ZXJ0IHRoYXQgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHZhbHVlLCBiZWZvcmUgcGFzc2luZ1xuICogaXQgdG8gdGhlIGNvbXBhcmF0b3IuIFRoZSBmb2xsb3dpbmcgcnVsZXMgZ292ZXJuIHRoZSBjb252ZXJzaW9uOlxuICpcbiAqIDEuIElmIHRoZSBvYmplY3QgaGFzIGEgYHZhbHVlT2YoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhIHByaW1pdGl2ZSwgaXRzIHJldHVybiB2YWx1ZSB3aWxsIGJlXG4gKiAgICB1c2VkIGluc3RlYWQuPGJyIC8+XG4gKiAgICAoSWYgdGhlIG9iamVjdCBoYXMgYSBgdmFsdWVPZigpYCBtZXRob2QgdGhhdCByZXR1cm5zIGFub3RoZXIgb2JqZWN0LCB0aGVuIHRoZSByZXR1cm5lZCBvYmplY3RcbiAqICAgIHdpbGwgYmUgdXNlZCBpbiBzdWJzZXF1ZW50IHN0ZXBzLilcbiAqIDIuIElmIHRoZSBvYmplY3QgaGFzIGEgY3VzdG9tIGB0b1N0cmluZygpYCBtZXRob2QgKGkuZS4gbm90IHRoZSBvbmUgaW5oZXJpdGVkIGZyb20gYE9iamVjdGApIHRoYXRcbiAqICAgIHJldHVybnMgYSBwcmltaXRpdmUsIGl0cyByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkIGluc3RlYWQuPGJyIC8+XG4gKiAgICAoSWYgdGhlIG9iamVjdCBoYXMgYSBgdG9TdHJpbmcoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhbm90aGVyIG9iamVjdCwgdGhlbiB0aGUgcmV0dXJuZWQgb2JqZWN0XG4gKiAgICB3aWxsIGJlIHVzZWQgaW4gc3Vic2VxdWVudCBzdGVwcy4pXG4gKiAzLiBObyBjb252ZXJzaW9uOyB0aGUgb2JqZWN0IGl0c2VsZiBpcyB1c2VkLlxuICpcbiAqICMjIyBUaGUgZGVmYXVsdCBjb21wYXJhdG9yXG4gKlxuICogVGhlIGRlZmF1bHQsIGJ1aWx0LWluIGNvbXBhcmF0b3Igc2hvdWxkIGJlIHN1ZmZpY2llbnQgZm9yIG1vc3QgdXNlY2FzZXMuIEluIHNob3J0LCBpdCBjb21wYXJlc1xuICogbnVtYmVycyBudW1lcmljYWxseSwgc3RyaW5ncyBhbHBoYWJldGljYWxseSAoYW5kIGNhc2UtaW5zZW5zaXRpdmVseSksIGZvciBvYmplY3RzIGZhbGxzIGJhY2sgdG9cbiAqIHVzaW5nIHRoZWlyIGluZGV4IGluIHRoZSBvcmlnaW5hbCBjb2xsZWN0aW9uLCBhbmQgc29ydHMgdmFsdWVzIG9mIGRpZmZlcmVudCB0eXBlcyBieSB0eXBlLlxuICpcbiAqIE1vcmUgc3BlY2lmaWNhbGx5LCBpdCBmb2xsb3dzIHRoZXNlIHN0ZXBzIHRvIGRldGVybWluZSB0aGUgcmVsYXRpdmUgb3JkZXIgb2YgaXRlbXM6XG4gKlxuICogMS4gSWYgdGhlIGNvbXBhcmVkIHZhbHVlcyBhcmUgb2YgZGlmZmVyZW50IHR5cGVzLCBjb21wYXJlIHRoZSB0eXBlcyB0aGVtc2VsdmVzIGFscGhhYmV0aWNhbGx5LlxuICogMi4gSWYgYm90aCB2YWx1ZXMgYXJlIG9mIHR5cGUgYHN0cmluZ2AsIGNvbXBhcmUgdGhlbSBhbHBoYWJldGljYWxseSBpbiBhIGNhc2UtIGFuZFxuICogICAgbG9jYWxlLWluc2Vuc2l0aXZlIHdheS5cbiAqIDMuIElmIGJvdGggdmFsdWVzIGFyZSBvYmplY3RzLCBjb21wYXJlIHRoZWlyIGluZGljZXMgaW5zdGVhZC5cbiAqIDQuIE90aGVyd2lzZSwgcmV0dXJuOlxuICogICAgLSAgYDBgLCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVhbCAoYnkgc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb24sIGkuZS4gdXNpbmcgYD09PWApLlxuICogICAgLSBgLTFgLCBpZiB0aGUgMXN0IHZhbHVlIGlzIFwibGVzcyB0aGFuXCIgdGhlIDJuZCB2YWx1ZSAoY29tcGFyZWQgdXNpbmcgdGhlIGA8YCBvcGVyYXRvcikuXG4gKiAgICAtICBgMWAsIG90aGVyd2lzZS5cbiAqXG4gKiAqKk5vdGU6KiogSWYgeW91IG5vdGljZSBudW1iZXJzIG5vdCBiZWluZyBzb3J0ZWQgYXMgZXhwZWN0ZWQsIG1ha2Ugc3VyZSB0aGV5IGFyZSBhY3R1YWxseSBiZWluZ1xuICogICAgICAgICAgIHNhdmVkIGFzIG51bWJlcnMgYW5kIG5vdCBzdHJpbmdzLlxuICogKipOb3RlOioqIEZvciB0aGUgcHVycG9zZSBvZiBzb3J0aW5nLCBgbnVsbGAgdmFsdWVzIGFyZSB0cmVhdGVkIGFzIHRoZSBzdHJpbmcgYCdudWxsJ2AgKGkuZS5cbiAqICAgICAgICAgICBgdHlwZTogJ3N0cmluZydgLCBgdmFsdWU6ICdudWxsJ2ApLiBUaGlzIG1heSBjYXVzZSB1bmV4cGVjdGVkIHNvcnQgb3JkZXIgcmVsYXRpdmUgdG9cbiAqICAgICAgICAgICBvdGhlciB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheXxBcnJheUxpa2V9IGNvbGxlY3Rpb24gLSBUaGUgY29sbGVjdGlvbiAoYXJyYXkgb3IgYXJyYXktbGlrZSBvYmplY3QpIHRvIHNvcnQuXG4gKiBAcGFyYW0geyhGdW5jdGlvbnxzdHJpbmd8QXJyYXkuPEZ1bmN0aW9ufHN0cmluZz4pPX0gZXhwcmVzc2lvbiAtIEEgcHJlZGljYXRlIChvciBsaXN0IG9mXG4gKiAgICBwcmVkaWNhdGVzKSB0byBiZSB1c2VkIGJ5IHRoZSBjb21wYXJhdG9yIHRvIGRldGVybWluZSB0aGUgb3JkZXIgb2YgZWxlbWVudHMuXG4gKlxuICogICAgQ2FuIGJlIG9uZSBvZjpcbiAqXG4gKiAgICAtIGBGdW5jdGlvbmA6IEEgZ2V0dGVyIGZ1bmN0aW9uLiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggZWFjaCBpdGVtIGFzIGFyZ3VtZW50IGFuZFxuICogICAgICB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCBmb3Igc29ydGluZy5cbiAqICAgIC0gYHN0cmluZ2A6IEFuIEFuZ3VsYXJKUyBleHByZXNzaW9uLiBUaGlzIGV4cHJlc3Npb24gd2lsbCBiZSBldmFsdWF0ZWQgYWdhaW5zdCBlYWNoIGl0ZW0gYW5kIHRoZVxuICogICAgICByZXN1bHQgd2lsbCBiZSB1c2VkIGZvciBzb3J0aW5nLiBGb3IgZXhhbXBsZSwgdXNlIGAnbGFiZWwnYCB0byBzb3J0IGJ5IGEgcHJvcGVydHkgY2FsbGVkXG4gKiAgICAgIGBsYWJlbGAgb3IgYCdsYWJlbC5zdWJzdHJpbmcoMCwgMyknYCB0byBzb3J0IGJ5IHRoZSBmaXJzdCAzIGNoYXJhY3RlcnMgb2YgdGhlIGBsYWJlbGBcbiAqICAgICAgcHJvcGVydHkuPGJyIC8+XG4gKiAgICAgIChUaGUgcmVzdWx0IG9mIGEgY29uc3RhbnQgZXhwcmVzc2lvbiBpcyBpbnRlcnByZXRlZCBhcyBhIHByb3BlcnR5IG5hbWUgdG8gYmUgdXNlZCBmb3JcbiAqICAgICAgY29tcGFyaXNvbi4gRm9yIGV4YW1wbGUsIHVzZSBgJ1wic3BlY2lhbCBuYW1lXCInYCAobm90ZSB0aGUgZXh0cmEgcGFpciBvZiBxdW90ZXMpIHRvIHNvcnQgYnkgYVxuICogICAgICBwcm9wZXJ0eSBjYWxsZWQgYHNwZWNpYWwgbmFtZWAuKTxiciAvPlxuICogICAgICBBbiBleHByZXNzaW9uIGNhbiBiZSBvcHRpb25hbGx5IHByZWZpeGVkIHdpdGggYCtgIG9yIGAtYCB0byBjb250cm9sIHRoZSBzb3J0aW5nIGRpcmVjdGlvbixcbiAqICAgICAgYXNjZW5kaW5nIG9yIGRlc2NlbmRpbmcuIEZvciBleGFtcGxlLCBgJytsYWJlbCdgIG9yIGAnLWxhYmVsJ2AuIElmIG5vIHByb3BlcnR5IGlzIHByb3ZpZGVkLFxuICogICAgICAoZS5nLiBgJysnYCBvciBgJy0nYCksIHRoZSBjb2xsZWN0aW9uIGVsZW1lbnQgaXRzZWxmIGlzIHVzZWQgaW4gY29tcGFyaXNvbnMuXG4gKiAgICAtIGBBcnJheWA6IEFuIGFycmF5IG9mIGZ1bmN0aW9uIGFuZC9vciBzdHJpbmcgcHJlZGljYXRlcy4gSWYgYSBwcmVkaWNhdGUgY2Fubm90IGRldGVybWluZSB0aGVcbiAqICAgICAgcmVsYXRpdmUgb3JkZXIgb2YgdHdvIGl0ZW1zLCB0aGUgbmV4dCBwcmVkaWNhdGUgaXMgdXNlZCBhcyBhIHRpZS1icmVha2VyLlxuICpcbiAqICoqTm90ZToqKiBJZiB0aGUgcHJlZGljYXRlIGlzIG1pc3Npbmcgb3IgZW1wdHkgdGhlbiBpdCBkZWZhdWx0cyB0byBgJysnYC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSByZXZlcnNlIC0gSWYgYHRydWVgLCByZXZlcnNlIHRoZSBzb3J0aW5nIG9yZGVyLlxuICogQHBhcmFtIHsoRnVuY3Rpb24pPX0gY29tcGFyYXRvciAtIFRoZSBjb21wYXJhdG9yIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSByZWxhdGl2ZSBvcmRlciBvZlxuICogICAgdmFsdWUgcGFpcnMuIElmIG9taXR0ZWQsIHRoZSBidWlsdC1pbiBjb21wYXJhdG9yIHdpbGwgYmUgdXNlZC5cbiAqXG4gKiBAcmV0dXJucyB7QXJyYXl9IC0gVGhlIHNvcnRlZCBhcnJheS5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBPcmRlcmluZyBhIHRhYmxlIHdpdGggYG5nUmVwZWF0YFxuICpcbiAqIFRoZSBleGFtcGxlIGJlbG93IGRlbW9uc3RyYXRlcyBhIHNpbXBsZSB7QGxpbmsgbmdSZXBlYXQgbmdSZXBlYXR9LCB3aGVyZSB0aGUgZGF0YSBpcyBzb3J0ZWQgYnlcbiAqIGFnZSBpbiBkZXNjZW5kaW5nIG9yZGVyIChleHByZXNzaW9uIGlzIHNldCB0byBgJy1hZ2UnYCkuIFRoZSBgY29tcGFyYXRvcmAgaXMgbm90IHNldCwgd2hpY2ggbWVhbnNcbiAqIGl0IGRlZmF1bHRzIHRvIHRoZSBidWlsdC1pbiBjb21wYXJhdG9yLlxuICpcbiAgIDxleGFtcGxlIG5hbWU9XCJvcmRlckJ5LXN0YXRpY1wiIG1vZHVsZT1cIm9yZGVyQnlFeGFtcGxlMVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICA8dGg+TmFtZTwvdGg+XG4gICAgICAgICAgICAgPHRoPlBob25lIE51bWJlcjwvdGg+XG4gICAgICAgICAgICAgPHRoPkFnZTwvdGg+XG4gICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IG9yZGVyQnk6Jy1hZ2UnXCI+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLnBob25lfX08L3RkPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5hZ2V9fTwvdGQ+XG4gICAgICAgICAgIDwvdHI+XG4gICAgICAgICA8L3RhYmxlPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnb3JkZXJCeUV4YW1wbGUxJywgW10pXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IFtcbiAgICAgICAgICAgICB7bmFtZTogJ0pvaG4nLCAgIHBob25lOiAnNTU1LTEyMTInLCAgYWdlOiAxMH0sXG4gICAgICAgICAgICAge25hbWU6ICdNYXJ5JywgICBwaG9uZTogJzU1NS05ODc2JywgIGFnZTogMTl9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWlrZScsICAgcGhvbmU6ICc1NTUtNDMyMScsICBhZ2U6IDIxfSxcbiAgICAgICAgICAgICB7bmFtZTogJ0FkYW0nLCAgIHBob25lOiAnNTU1LTU2NzgnLCAgYWdlOiAzNX0sXG4gICAgICAgICAgICAge25hbWU6ICdKdWxpZScsICBwaG9uZTogJzU1NS04NzY1JywgIGFnZTogMjl9XG4gICAgICAgICAgIF07XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIC5mcmllbmRzIHtcbiAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gICAgICAgfVxuXG4gICAgICAgLmZyaWVuZHMgdGgge1xuICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkO1xuICAgICAgIH1cbiAgICAgICAuZnJpZW5kcyB0ZCwgLmZyaWVuZHMgdGgge1xuICAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZDtcbiAgICAgICAgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgICAgIH1cbiAgICAgICAuZnJpZW5kcyB0ZDpmaXJzdC1jaGlsZCwgLmZyaWVuZHMgdGg6Zmlyc3QtY2hpbGQge1xuICAgICAgICAgYm9yZGVyLWxlZnQ6IG5vbmU7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAvLyBFbGVtZW50IGxvY2F0b3JzXG4gICAgICAgdmFyIG5hbWVzID0gZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoJ2ZyaWVuZHMnKS5jb2x1bW4oJ2ZyaWVuZC5uYW1lJykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgYnkgYWdlIGluIHJldmVyc2Ugb3JkZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoMCkuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnSnVsaWUnKTtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoMikuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDMpLmdldFRleHQoKSkudG9CZSgnTWFyeScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCg0KS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICogPGhyIC8+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBDaGFuZ2luZyBwYXJhbWV0ZXJzIGR5bmFtaWNhbGx5XG4gKlxuICogQWxsIHBhcmFtZXRlcnMgY2FuIGJlIGNoYW5nZWQgZHluYW1pY2FsbHkuIFRoZSBuZXh0IGV4YW1wbGUgc2hvd3MgaG93IHlvdSBjYW4gbWFrZSB0aGUgY29sdW1ucyBvZlxuICogYSB0YWJsZSBzb3J0YWJsZSwgYnkgYmluZGluZyB0aGUgYGV4cHJlc3Npb25gIGFuZCBgcmV2ZXJzZWAgcGFyYW1ldGVycyB0byBzY29wZSBwcm9wZXJ0aWVzLlxuICpcbiAgIDxleGFtcGxlIG5hbWU9XCJvcmRlckJ5LWR5bmFtaWNcIiBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZTJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPHByZT5Tb3J0IGJ5ID0ge3twcm9wZXJ0eU5hbWV9fTsgcmV2ZXJzZSA9IHt7cmV2ZXJzZX19PC9wcmU+XG4gICAgICAgICA8aHIvPlxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInByb3BlcnR5TmFtZSA9IG51bGw7IHJldmVyc2UgPSBmYWxzZVwiPlNldCB0byB1bnNvcnRlZDwvYnV0dG9uPlxuICAgICAgICAgPGhyLz5cbiAgICAgICAgIDx0YWJsZSBjbGFzcz1cImZyaWVuZHNcIj5cbiAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzb3J0QnkoJ25hbWUnKVwiPk5hbWU8L2J1dHRvbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic29ydG9yZGVyXCIgbmctc2hvdz1cInByb3BlcnR5TmFtZSA9PT0gJ25hbWUnXCIgbmctY2xhc3M9XCJ7cmV2ZXJzZTogcmV2ZXJzZX1cIj48L3NwYW4+XG4gICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCdwaG9uZScpXCI+UGhvbmUgTnVtYmVyPC9idXR0b24+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNvcnRvcmRlclwiIG5nLXNob3c9XCJwcm9wZXJ0eU5hbWUgPT09ICdwaG9uZSdcIiBuZy1jbGFzcz1cIntyZXZlcnNlOiByZXZlcnNlfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzb3J0QnkoJ2FnZScpXCI+QWdlPC9idXR0b24+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNvcnRvcmRlclwiIG5nLXNob3c9XCJwcm9wZXJ0eU5hbWUgPT09ICdhZ2UnXCIgbmctY2xhc3M9XCJ7cmV2ZXJzZTogcmV2ZXJzZX1cIj48L3NwYW4+XG4gICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgb3JkZXJCeTpwcm9wZXJ0eU5hbWU6cmV2ZXJzZVwiPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuYWdlfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlMicsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgdmFyIGZyaWVuZHMgPSBbXG4gICAgICAgICAgICAge25hbWU6ICdKb2huJywgICBwaG9uZTogJzU1NS0xMjEyJywgIGFnZTogMTB9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgcGhvbmU6ICc1NTUtOTg3NicsICBhZ2U6IDE5fSxcbiAgICAgICAgICAgICB7bmFtZTogJ01pa2UnLCAgIHBob25lOiAnNTU1LTQzMjEnLCAgYWdlOiAyMX0sXG4gICAgICAgICAgICAge25hbWU6ICdBZGFtJywgICBwaG9uZTogJzU1NS01Njc4JywgIGFnZTogMzV9LFxuICAgICAgICAgICAgIHtuYW1lOiAnSnVsaWUnLCAgcGhvbmU6ICc1NTUtODc2NScsICBhZ2U6IDI5fVxuICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICRzY29wZS5wcm9wZXJ0eU5hbWUgPSAnYWdlJztcbiAgICAgICAgICAgJHNjb3BlLnJldmVyc2UgPSB0cnVlO1xuICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IGZyaWVuZHM7XG5cbiAgICAgICAgICAgJHNjb3BlLnNvcnRCeSA9IGZ1bmN0aW9uKHByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgICRzY29wZS5yZXZlcnNlID0gKCRzY29wZS5wcm9wZXJ0eU5hbWUgPT09IHByb3BlcnR5TmFtZSkgPyAhJHNjb3BlLnJldmVyc2UgOiBmYWxzZTtcbiAgICAgICAgICAgICAkc2NvcGUucHJvcGVydHlOYW1lID0gcHJvcGVydHlOYW1lO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAuZnJpZW5kcyB7XG4gICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgIH1cblxuICAgICAgIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQsIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQ7XG4gICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQ6Zmlyc3QtY2hpbGQsIC5mcmllbmRzIHRoOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiBub25lO1xuICAgICAgIH1cblxuICAgICAgIC5zb3J0b3JkZXI6YWZ0ZXIge1xuICAgICAgICAgY29udGVudDogJ1xcMjViMic7ICAgLy8gQkxBQ0sgVVAtUE9JTlRJTkcgVFJJQU5HTEVcbiAgICAgICB9XG4gICAgICAgLnNvcnRvcmRlci5yZXZlcnNlOmFmdGVyIHtcbiAgICAgICAgIGNvbnRlbnQ6ICdcXDI1YmMnOyAgIC8vIEJMQUNLIERPV04tUE9JTlRJTkcgVFJJQU5HTEVcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIC8vIEVsZW1lbnQgbG9jYXRvcnNcbiAgICAgICB2YXIgdW5zb3J0QnV0dG9uID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgndW5zb3J0ZWQnKSk7XG4gICAgICAgdmFyIG5hbWVIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdOYW1lJykpO1xuICAgICAgIHZhciBwaG9uZUhlYWRlciA9IGVsZW1lbnQoYnkucGFydGlhbEJ1dHRvblRleHQoJ1Bob25lJykpO1xuICAgICAgIHZhciBhZ2VIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdBZ2UnKSk7XG4gICAgICAgdmFyIGZpcnN0TmFtZSA9IGVsZW1lbnQoYnkucmVwZWF0ZXIoJ2ZyaWVuZHMnKS5jb2x1bW4oJ2ZyaWVuZC5uYW1lJykucm93KDApKTtcbiAgICAgICB2YXIgbGFzdE5hbWUgPSBlbGVtZW50KGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpLnJvdyg0KSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHNvcnQgZnJpZW5kcyBieSBzb21lIHByb3BlcnR5LCB3aGVuIGNsaWNraW5nIG9uIHRoZSBjb2x1bW4gaGVhZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICBwaG9uZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ01hcnknKTtcblxuICAgICAgICAgbmFtZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ01pa2UnKTtcblxuICAgICAgICAgYWdlSGVhZGVyLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgaW4gcmV2ZXJzZSBvcmRlciwgd2hlbiBjbGlja2luZyBvbiB0aGUgc2FtZSBjb2x1bW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcblxuICAgICAgICAgYWdlSGVhZGVyLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCByZXN0b3JlIHRoZSBvcmlnaW5hbCBvcmRlciwgd2hlbiBjbGlja2luZyBcIlNldCB0byB1bnNvcnRlZFwiJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICB1bnNvcnRCdXR0b24uY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKdWxpZScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKiA8aHIgLz5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFVzaW5nIGBvcmRlckJ5YCBpbnNpZGUgYSBjb250cm9sbGVyXG4gKlxuICogSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBjYWxsIHRoZSBgb3JkZXJCeWAgZmlsdGVyIG1hbnVhbGx5LCBieSBpbmplY3RpbmcgYG9yZGVyQnlGaWx0ZXJgLCBhbmRcbiAqIGNhbGxpbmcgaXQgd2l0aCB0aGUgZGVzaXJlZCBwYXJhbWV0ZXJzLiAoQWx0ZXJuYXRpdmVseSwgeW91IGNvdWxkIGluamVjdCB0aGUgYCRmaWx0ZXJgIGZhY3RvcnlcbiAqIGFuZCByZXRyaWV2ZSB0aGUgYG9yZGVyQnlgIGZpbHRlciB3aXRoIGAkZmlsdGVyKCdvcmRlckJ5JylgLilcbiAqXG4gICA8ZXhhbXBsZSBuYW1lPVwib3JkZXJCeS1jYWxsLW1hbnVhbGx5XCIgbW9kdWxlPVwib3JkZXJCeUV4YW1wbGUzXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxwcmU+U29ydCBieSA9IHt7cHJvcGVydHlOYW1lfX07IHJldmVyc2UgPSB7e3JldmVyc2V9fTwvcHJlPlxuICAgICAgICAgPGhyLz5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzb3J0QnkobnVsbClcIj5TZXQgdG8gdW5zb3J0ZWQ8L2J1dHRvbj5cbiAgICAgICAgIDxoci8+XG4gICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCduYW1lJylcIj5OYW1lPC9idXR0b24+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNvcnRvcmRlclwiIG5nLXNob3c9XCJwcm9wZXJ0eU5hbWUgPT09ICduYW1lJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgncGhvbmUnKVwiPlBob25lIE51bWJlcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAncGhvbmUnXCIgbmctY2xhc3M9XCJ7cmV2ZXJzZTogcmV2ZXJzZX1cIj48L3NwYW4+XG4gICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCdhZ2UnKVwiPkFnZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAnYWdlJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kc1wiPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuYWdlfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlMycsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnb3JkZXJCeUZpbHRlcicsIGZ1bmN0aW9uKCRzY29wZSwgb3JkZXJCeSkge1xuICAgICAgICAgICB2YXIgZnJpZW5kcyA9IFtcbiAgICAgICAgICAgICB7bmFtZTogJ0pvaG4nLCAgIHBob25lOiAnNTU1LTEyMTInLCAgYWdlOiAxMH0sXG4gICAgICAgICAgICAge25hbWU6ICdNYXJ5JywgICBwaG9uZTogJzU1NS05ODc2JywgIGFnZTogMTl9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWlrZScsICAgcGhvbmU6ICc1NTUtNDMyMScsICBhZ2U6IDIxfSxcbiAgICAgICAgICAgICB7bmFtZTogJ0FkYW0nLCAgIHBob25lOiAnNTU1LTU2NzgnLCAgYWdlOiAzNX0sXG4gICAgICAgICAgICAge25hbWU6ICdKdWxpZScsICBwaG9uZTogJzU1NS04NzY1JywgIGFnZTogMjl9XG4gICAgICAgICAgIF07XG5cbiAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5TmFtZSA9ICdhZ2UnO1xuICAgICAgICAgICAkc2NvcGUucmV2ZXJzZSA9IHRydWU7XG4gICAgICAgICAgICRzY29wZS5mcmllbmRzID0gb3JkZXJCeShmcmllbmRzLCAkc2NvcGUucHJvcGVydHlOYW1lLCAkc2NvcGUucmV2ZXJzZSk7XG5cbiAgICAgICAgICAgJHNjb3BlLnNvcnRCeSA9IGZ1bmN0aW9uKHByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgICRzY29wZS5yZXZlcnNlID0gKHByb3BlcnR5TmFtZSAhPT0gbnVsbCAmJiAkc2NvcGUucHJvcGVydHlOYW1lID09PSBwcm9wZXJ0eU5hbWUpXG4gICAgICAgICAgICAgICAgID8gISRzY29wZS5yZXZlcnNlIDogZmFsc2U7XG4gICAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTtcbiAgICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IG9yZGVyQnkoZnJpZW5kcywgJHNjb3BlLnByb3BlcnR5TmFtZSwgJHNjb3BlLnJldmVyc2UpO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAuZnJpZW5kcyB7XG4gICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgIH1cblxuICAgICAgIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQsIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQ7XG4gICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQ6Zmlyc3QtY2hpbGQsIC5mcmllbmRzIHRoOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiBub25lO1xuICAgICAgIH1cblxuICAgICAgIC5zb3J0b3JkZXI6YWZ0ZXIge1xuICAgICAgICAgY29udGVudDogJ1xcMjViMic7ICAgLy8gQkxBQ0sgVVAtUE9JTlRJTkcgVFJJQU5HTEVcbiAgICAgICB9XG4gICAgICAgLnNvcnRvcmRlci5yZXZlcnNlOmFmdGVyIHtcbiAgICAgICAgIGNvbnRlbnQ6ICdcXDI1YmMnOyAgIC8vIEJMQUNLIERPV04tUE9JTlRJTkcgVFJJQU5HTEVcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIC8vIEVsZW1lbnQgbG9jYXRvcnNcbiAgICAgICB2YXIgdW5zb3J0QnV0dG9uID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgndW5zb3J0ZWQnKSk7XG4gICAgICAgdmFyIG5hbWVIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdOYW1lJykpO1xuICAgICAgIHZhciBwaG9uZUhlYWRlciA9IGVsZW1lbnQoYnkucGFydGlhbEJ1dHRvblRleHQoJ1Bob25lJykpO1xuICAgICAgIHZhciBhZ2VIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdBZ2UnKSk7XG4gICAgICAgdmFyIGZpcnN0TmFtZSA9IGVsZW1lbnQoYnkucmVwZWF0ZXIoJ2ZyaWVuZHMnKS5jb2x1bW4oJ2ZyaWVuZC5uYW1lJykucm93KDApKTtcbiAgICAgICB2YXIgbGFzdE5hbWUgPSBlbGVtZW50KGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpLnJvdyg0KSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHNvcnQgZnJpZW5kcyBieSBzb21lIHByb3BlcnR5LCB3aGVuIGNsaWNraW5nIG9uIHRoZSBjb2x1bW4gaGVhZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICBwaG9uZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ01hcnknKTtcblxuICAgICAgICAgbmFtZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ01pa2UnKTtcblxuICAgICAgICAgYWdlSGVhZGVyLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgaW4gcmV2ZXJzZSBvcmRlciwgd2hlbiBjbGlja2luZyBvbiB0aGUgc2FtZSBjb2x1bW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcblxuICAgICAgICAgYWdlSGVhZGVyLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCByZXN0b3JlIHRoZSBvcmlnaW5hbCBvcmRlciwgd2hlbiBjbGlja2luZyBcIlNldCB0byB1bnNvcnRlZFwiJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICB1bnNvcnRCdXR0b24uY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKdWxpZScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKiA8aHIgLz5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFVzaW5nIGEgY3VzdG9tIGNvbXBhcmF0b3JcbiAqXG4gKiBJZiB5b3UgaGF2ZSB2ZXJ5IHNwZWNpZmljIHJlcXVpcmVtZW50cyBhYm91dCB0aGUgd2F5IGl0ZW1zIGFyZSBzb3J0ZWQsIHlvdSBjYW4gcGFzcyB5b3VyIG93blxuICogY29tcGFyYXRvciBmdW5jdGlvbi4gRm9yIGV4YW1wbGUsIHlvdSBtaWdodCBuZWVkIHRvIGNvbXBhcmUgc29tZSBzdHJpbmdzIGluIGEgbG9jYWxlLXNlbnNpdGl2ZVxuICogd2F5LiAoV2hlbiBzcGVjaWZ5aW5nIGEgY3VzdG9tIGNvbXBhcmF0b3IsIHlvdSBhbHNvIG5lZWQgdG8gcGFzcyBhIHZhbHVlIGZvciB0aGUgYHJldmVyc2VgXG4gKiBhcmd1bWVudCAtIHBhc3NpbmcgYGZhbHNlYCByZXRhaW5zIHRoZSBkZWZhdWx0IHNvcnRpbmcgb3JkZXIsIGkuZS4gYXNjZW5kaW5nLilcbiAqXG4gICA8ZXhhbXBsZSBuYW1lPVwib3JkZXJCeS1jdXN0b20tY29tcGFyYXRvclwiIG1vZHVsZT1cIm9yZGVyQnlFeGFtcGxlNFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwiZnJpZW5kcy1jb250YWluZXIgY3VzdG9tLWNvbXBhcmF0b3JcIj5cbiAgICAgICAgICAgPGgzPkxvY2FsZS1zZW5zaXRpdmUgQ29tcGFyYXRvcjwvaDM+XG4gICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImZyaWVuZHNcIj5cbiAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICA8dGg+TmFtZTwvdGg+XG4gICAgICAgICAgICAgICA8dGg+RmF2b3JpdGUgTGV0dGVyPC90aD5cbiAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IG9yZGVyQnk6J2Zhdm9yaXRlTGV0dGVyJzpmYWxzZTpsb2NhbGVTZW5zaXRpdmVDb21wYXJhdG9yXCI+XG4gICAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5mYXZvcml0ZUxldHRlcn19PC90ZD5cbiAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwiZnJpZW5kcy1jb250YWluZXIgZGVmYXVsdC1jb21wYXJhdG9yXCI+XG4gICAgICAgICAgIDxoMz5EZWZhdWx0IENvbXBhcmF0b3I8L2gzPlxuICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgPHRoPk5hbWU8L3RoPlxuICAgICAgICAgICAgICAgPHRoPkZhdm9yaXRlIExldHRlcjwvdGg+XG4gICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBvcmRlckJ5OidmYXZvcml0ZUxldHRlcidcIj5cbiAgICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxuICAgICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmZhdm9yaXRlTGV0dGVyfX08L3RkPlxuICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlNCcsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBbXG4gICAgICAgICAgICAge25hbWU6ICdKb2huJywgICBmYXZvcml0ZUxldHRlcjogJ8OEJ30sXG4gICAgICAgICAgICAge25hbWU6ICdNYXJ5JywgICBmYXZvcml0ZUxldHRlcjogJ8OcJ30sXG4gICAgICAgICAgICAge25hbWU6ICdNaWtlJywgICBmYXZvcml0ZUxldHRlcjogJ8OWJ30sXG4gICAgICAgICAgICAge25hbWU6ICdBZGFtJywgICBmYXZvcml0ZUxldHRlcjogJ0gnfSxcbiAgICAgICAgICAgICB7bmFtZTogJ0p1bGllJywgIGZhdm9yaXRlTGV0dGVyOiAnWid9XG4gICAgICAgICAgIF07XG5cbiAgICAgICAgICAgJHNjb3BlLmxvY2FsZVNlbnNpdGl2ZUNvbXBhcmF0b3IgPSBmdW5jdGlvbih2MSwgdjIpIHtcbiAgICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBnZXQgc3RyaW5ncywganVzdCBjb21wYXJlIGJ5IGluZGV4XG4gICAgICAgICAgICAgaWYgKHYxLnR5cGUgIT09ICdzdHJpbmcnIHx8IHYyLnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gKHYxLmluZGV4IDwgdjIuaW5kZXgpID8gLTEgOiAxO1xuICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgIC8vIENvbXBhcmUgc3RyaW5ncyBhbHBoYWJldGljYWxseSwgdGFraW5nIGxvY2FsZSBpbnRvIGFjY291bnRcbiAgICAgICAgICAgICByZXR1cm4gdjEudmFsdWUubG9jYWxlQ29tcGFyZSh2Mi52YWx1ZSk7XG4gICAgICAgICAgIH07XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIC5mcmllbmRzLWNvbnRhaW5lciB7XG4gICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICBtYXJnaW46IDAgMzBweDtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB7XG4gICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgIH1cblxuICAgICAgIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQsIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQ7XG4gICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQ6Zmlyc3QtY2hpbGQsIC5mcmllbmRzIHRoOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiBub25lO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgLy8gRWxlbWVudCBsb2NhdG9yc1xuICAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50KGJ5LmNzcygnLmN1c3RvbS1jb21wYXJhdG9yJykpO1xuICAgICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lci5hbGwoYnkucmVwZWF0ZXIoJ2ZyaWVuZHMnKS5jb2x1bW4oJ2ZyaWVuZC5uYW1lJykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgYnkgZmF2b3JpdGUgbGV0dGVyIChpbiBjb3JyZWN0IGFscGhhYmV0aWNhbCBvcmRlciknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoMCkuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgyKS5nZXRUZXh0KCkpLnRvQmUoJ01pa2UnKTtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoMykuZ2V0VGV4dCgpKS50b0JlKCdNYXJ5Jyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDQpLmdldFRleHQoKSkudG9CZSgnSnVsaWUnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICpcbiAqL1xub3JkZXJCeUZpbHRlci4kaW5qZWN0ID0gWyckcGFyc2UnXTtcbmZ1bmN0aW9uIG9yZGVyQnlGaWx0ZXIoJHBhcnNlKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcnJheSwgc29ydFByZWRpY2F0ZSwgcmV2ZXJzZU9yZGVyLCBjb21wYXJlRm4pIHtcblxuICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gYXJyYXk7XG4gICAgaWYgKCFpc0FycmF5TGlrZShhcnJheSkpIHtcbiAgICAgIHRocm93IG1pbkVycignb3JkZXJCeScpKCdub3RhcnJheScsICdFeHBlY3RlZCBhcnJheSBidXQgcmVjZWl2ZWQ6IHswfScsIGFycmF5KTtcbiAgICB9XG5cbiAgICBpZiAoIWlzQXJyYXkoc29ydFByZWRpY2F0ZSkpIHsgc29ydFByZWRpY2F0ZSA9IFtzb3J0UHJlZGljYXRlXTsgfVxuICAgIGlmIChzb3J0UHJlZGljYXRlLmxlbmd0aCA9PT0gMCkgeyBzb3J0UHJlZGljYXRlID0gWycrJ107IH1cblxuICAgIHZhciBwcmVkaWNhdGVzID0gcHJvY2Vzc1ByZWRpY2F0ZXMoc29ydFByZWRpY2F0ZSk7XG5cbiAgICB2YXIgZGVzY2VuZGluZyA9IHJldmVyc2VPcmRlciA/IC0xIDogMTtcblxuICAgIC8vIERlZmluZSB0aGUgYGNvbXBhcmUoKWAgZnVuY3Rpb24uIFVzZSBhIGRlZmF1bHQgY29tcGFyYXRvciBpZiBub25lIGlzIHNwZWNpZmllZC5cbiAgICB2YXIgY29tcGFyZSA9IGlzRnVuY3Rpb24oY29tcGFyZUZuKSA/IGNvbXBhcmVGbiA6IGRlZmF1bHRDb21wYXJlO1xuXG4gICAgLy8gVGhlIG5leHQgdGhyZWUgbGluZXMgYXJlIGEgdmVyc2lvbiBvZiBhIFN3YXJ0emlhbiBUcmFuc2Zvcm0gaWRpb20gZnJvbSBQZXJsXG4gICAgLy8gKHNvbWV0aW1lcyBjYWxsZWQgdGhlIERlY29yYXRlLVNvcnQtVW5kZWNvcmF0ZSBpZGlvbSlcbiAgICAvLyBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2Nod2FydHppYW5fdHJhbnNmb3JtXG4gICAgdmFyIGNvbXBhcmVWYWx1ZXMgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYXJyYXksIGdldENvbXBhcmlzb25PYmplY3QpO1xuICAgIGNvbXBhcmVWYWx1ZXMuc29ydChkb0NvbXBhcmlzb24pO1xuICAgIGFycmF5ID0gY29tcGFyZVZhbHVlcy5tYXAoZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS52YWx1ZTsgfSk7XG5cbiAgICByZXR1cm4gYXJyYXk7XG5cbiAgICBmdW5jdGlvbiBnZXRDb21wYXJpc29uT2JqZWN0KHZhbHVlLCBpbmRleCkge1xuICAgICAgLy8gTk9URTogV2UgYXJlIGFkZGluZyBhbiBleHRyYSBgdGllQnJlYWtlcmAgdmFsdWUgYmFzZWQgb24gdGhlIGVsZW1lbnQncyBpbmRleC5cbiAgICAgIC8vIFRoaXMgd2lsbCBiZSB1c2VkIHRvIGtlZXAgdGhlIHNvcnQgc3RhYmxlIHdoZW4gbm9uZSBvZiB0aGUgaW5wdXQgcHJlZGljYXRlcyBjYW5cbiAgICAgIC8vIGRpc3Rpbmd1aXNoIGJldHdlZW4gdHdvIGVsZW1lbnRzLlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICB0aWVCcmVha2VyOiB7dmFsdWU6IGluZGV4LCB0eXBlOiAnbnVtYmVyJywgaW5kZXg6IGluZGV4fSxcbiAgICAgICAgcHJlZGljYXRlVmFsdWVzOiBwcmVkaWNhdGVzLm1hcChmdW5jdGlvbihwcmVkaWNhdGUpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0UHJlZGljYXRlVmFsdWUocHJlZGljYXRlLmdldCh2YWx1ZSksIGluZGV4KTtcbiAgICAgICAgfSlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZG9Db21wYXJpc29uKHYxLCB2Mikge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcHJlZGljYXRlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBjb21wYXJlKHYxLnByZWRpY2F0ZVZhbHVlc1tpXSwgdjIucHJlZGljYXRlVmFsdWVzW2ldKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQgKiBwcmVkaWNhdGVzW2ldLmRlc2NlbmRpbmcgKiBkZXNjZW5kaW5nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoY29tcGFyZSh2MS50aWVCcmVha2VyLCB2Mi50aWVCcmVha2VyKSB8fCBkZWZhdWx0Q29tcGFyZSh2MS50aWVCcmVha2VyLCB2Mi50aWVCcmVha2VyKSkgKiBkZXNjZW5kaW5nO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBwcm9jZXNzUHJlZGljYXRlcyhzb3J0UHJlZGljYXRlcykge1xuICAgIHJldHVybiBzb3J0UHJlZGljYXRlcy5tYXAoZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgICB2YXIgZGVzY2VuZGluZyA9IDEsIGdldCA9IGlkZW50aXR5O1xuXG4gICAgICBpZiAoaXNGdW5jdGlvbihwcmVkaWNhdGUpKSB7XG4gICAgICAgIGdldCA9IHByZWRpY2F0ZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcocHJlZGljYXRlKSkge1xuICAgICAgICBpZiAoKHByZWRpY2F0ZS5jaGFyQXQoMCkgPT09ICcrJyB8fCBwcmVkaWNhdGUuY2hhckF0KDApID09PSAnLScpKSB7XG4gICAgICAgICAgZGVzY2VuZGluZyA9IHByZWRpY2F0ZS5jaGFyQXQoMCkgPT09ICctJyA/IC0xIDogMTtcbiAgICAgICAgICBwcmVkaWNhdGUgPSBwcmVkaWNhdGUuc3Vic3RyaW5nKDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmVkaWNhdGUgIT09ICcnKSB7XG4gICAgICAgICAgZ2V0ID0gJHBhcnNlKHByZWRpY2F0ZSk7XG4gICAgICAgICAgaWYgKGdldC5jb25zdGFudCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGdldCgpO1xuICAgICAgICAgICAgZ2V0ID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlW2tleV07IH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ge2dldDogZ2V0LCBkZXNjZW5kaW5nOiBkZXNjZW5kaW5nfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgIGNhc2UgJ251bWJlcic6IC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOiAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvYmplY3RWYWx1ZSh2YWx1ZSkge1xuICAgIC8vIElmIGB2YWx1ZU9mYCBpcyBhIHZhbGlkIGZ1bmN0aW9uIHVzZSB0aGF0XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUudmFsdWVPZikpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudmFsdWVPZigpO1xuICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICAvLyBJZiBgdG9TdHJpbmdgIGlzIGEgdmFsaWQgZnVuY3Rpb24gYW5kIG5vdCB0aGUgb25lIGZyb20gYE9iamVjdC5wcm90b3R5cGVgIHVzZSB0aGF0XG4gICAgaWYgKGhhc0N1c3RvbVRvU3RyaW5nKHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFByZWRpY2F0ZVZhbHVlKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgdHlwZSA9ICdzdHJpbmcnO1xuICAgICAgdmFsdWUgPSAnbnVsbCc7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgdmFsdWUgPSBvYmplY3RWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7dmFsdWU6IHZhbHVlLCB0eXBlOiB0eXBlLCBpbmRleDogaW5kZXh9O1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdENvbXBhcmUodjEsIHYyKSB7XG4gICAgdmFyIHJlc3VsdCA9IDA7XG4gICAgdmFyIHR5cGUxID0gdjEudHlwZTtcbiAgICB2YXIgdHlwZTIgPSB2Mi50eXBlO1xuXG4gICAgaWYgKHR5cGUxID09PSB0eXBlMikge1xuICAgICAgdmFyIHZhbHVlMSA9IHYxLnZhbHVlO1xuICAgICAgdmFyIHZhbHVlMiA9IHYyLnZhbHVlO1xuXG4gICAgICBpZiAodHlwZTEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIENvbXBhcmUgc3RyaW5ncyBjYXNlLWluc2Vuc2l0aXZlbHlcbiAgICAgICAgdmFsdWUxID0gdmFsdWUxLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhbHVlMiA9IHZhbHVlMi50b0xvd2VyQ2FzZSgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlMSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gRm9yIGJhc2ljIG9iamVjdHMsIHVzZSB0aGUgcG9zaXRpb24gb2YgdGhlIG9iamVjdFxuICAgICAgICAvLyBpbiB0aGUgY29sbGVjdGlvbiBpbnN0ZWFkIG9mIHRoZSB2YWx1ZVxuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUxKSkgdmFsdWUxID0gdjEuaW5kZXg7XG4gICAgICAgIGlmIChpc09iamVjdCh2YWx1ZTIpKSB2YWx1ZTIgPSB2Mi5pbmRleDtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlMSAhPT0gdmFsdWUyKSB7XG4gICAgICAgIHJlc3VsdCA9IHZhbHVlMSA8IHZhbHVlMiA/IC0xIDogMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gdHlwZTEgPCB0eXBlMiA/IC0xIDogMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmZ1bmN0aW9uIG5nRGlyZWN0aXZlKGRpcmVjdGl2ZSkge1xuICBpZiAoaXNGdW5jdGlvbihkaXJlY3RpdmUpKSB7XG4gICAgZGlyZWN0aXZlID0ge1xuICAgICAgbGluazogZGlyZWN0aXZlXG4gICAgfTtcbiAgfVxuICBkaXJlY3RpdmUucmVzdHJpY3QgPSBkaXJlY3RpdmUucmVzdHJpY3QgfHwgJ0FDJztcbiAgcmV0dXJuIHZhbHVlRm4oZGlyZWN0aXZlKTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBhXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9kaWZpZXMgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIGh0bWwgYSB0YWcgc28gdGhhdCB0aGUgZGVmYXVsdCBhY3Rpb24gaXMgcHJldmVudGVkIHdoZW5cbiAqIHRoZSBocmVmIGF0dHJpYnV0ZSBpcyBlbXB0eS5cbiAqXG4gKiBGb3IgZHluYW1pY2FsbHkgY3JlYXRpbmcgYGhyZWZgIGF0dHJpYnV0ZXMgZm9yIGEgdGFncywgc2VlIHRoZSB7QGxpbmsgbmcubmdIcmVmIGBuZ0hyZWZgfSBkaXJlY3RpdmUuXG4gKi9cbnZhciBodG1sQW5jaG9yRGlyZWN0aXZlID0gdmFsdWVGbih7XG4gIHJlc3RyaWN0OiAnRScsXG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICBpZiAoIWF0dHIuaHJlZiAmJiAhYXR0ci54bGlua0hyZWYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAvLyBJZiB0aGUgbGlua2VkIGVsZW1lbnQgaXMgbm90IGFuIGFuY2hvciB0YWcgYW55bW9yZSwgZG8gbm90aGluZ1xuICAgICAgICBpZiAoZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnYScpIHJldHVybjtcblxuICAgICAgICAvLyBTVkdBRWxlbWVudCBkb2VzIG5vdCB1c2UgdGhlIGhyZWYgYXR0cmlidXRlLCBidXQgcmF0aGVyIHRoZSAneGxpbmtIcmVmJyBhdHRyaWJ1dGUuXG4gICAgICAgIHZhciBocmVmID0gdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSkgPT09ICdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXScgP1xuICAgICAgICAgICAgICAgICAgICd4bGluazpocmVmJyA6ICdocmVmJztcbiAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbm8gaHJlZiB1cmwsIHRoZW4gZG9uJ3QgbmF2aWdhdGUgYW55d2hlcmUuXG4gICAgICAgICAgaWYgKCFlbGVtZW50LmF0dHIoaHJlZikpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0hyZWZcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgOTlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzaW5nIEFuZ3VsYXJKUyBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGFuIGhyZWYgYXR0cmlidXRlIHdpbGxcbiAqIG1ha2UgdGhlIGxpbmsgZ28gdG8gdGhlIHdyb25nIFVSTCBpZiB0aGUgdXNlciBjbGlja3MgaXQgYmVmb3JlXG4gKiBBbmd1bGFySlMgaGFzIGEgY2hhbmNlIHRvIHJlcGxhY2UgdGhlIGB7e2hhc2h9fWAgbWFya3VwIHdpdGggaXRzXG4gKiB2YWx1ZS4gVW50aWwgQW5ndWxhckpTIHJlcGxhY2VzIHRoZSBtYXJrdXAgdGhlIGxpbmsgd2lsbCBiZSBicm9rZW5cbiAqIGFuZCB3aWxsIG1vc3QgbGlrZWx5IHJldHVybiBhIDQwNCBlcnJvci4gVGhlIGBuZ0hyZWZgIGRpcmVjdGl2ZVxuICogc29sdmVzIHRoaXMgcHJvYmxlbS5cbiAqXG4gKiBUaGUgd3Jvbmcgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGEgaHJlZj1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiPmxpbmsxPC9hPlxuICogYGBgXG4gKlxuICogVGhlIGNvcnJlY3Qgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGEgbmctaHJlZj1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiPmxpbmsxPC9hPlxuICogYGBgXG4gKlxuICogQGVsZW1lbnQgQVxuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdIcmVmIGFueSBzdHJpbmcgd2hpY2ggY2FuIGNvbnRhaW4gYHt7fX1gIG1hcmt1cC5cbiAqXG4gKiBAZXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIHZhcmlvdXMgY29tYmluYXRpb25zIG9mIGBocmVmYCwgYG5nLWhyZWZgIGFuZCBgbmctY2xpY2tgIGF0dHJpYnV0ZXNcbiAqIGluIGxpbmtzIGFuZCB0aGVpciBkaWZmZXJlbnQgYmVoYXZpb3JzOlxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1ocmVmXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ2YWx1ZVwiIC8+PGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0xXCIgaHJlZiBuZy1jbGljaz1cInZhbHVlID0gMVwiPmxpbmsgMTwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTJcIiBocmVmPVwiXCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDJcIj5saW5rIDI8L2E+IChsaW5rLCBkb24ndCByZWxvYWQpPGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0zXCIgbmctaHJlZj1cIi97eycxMjMnfX1cIj5saW5rIDM8L2E+IChsaW5rLCByZWxvYWQhKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstNFwiIGhyZWY9XCJcIiBuYW1lPVwieHhcIiBuZy1jbGljaz1cInZhbHVlID0gNFwiPmFuY2hvcjwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTVcIiBuYW1lPVwieHh4XCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDVcIj5hbmNob3I8L2E+IChubyBsaW5rKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstNlwiIG5nLWhyZWY9XCJ7e3ZhbHVlfX1cIj5saW5rPC9hPiAobGluaywgY2hhbmdlIGxvY2F0aW9uKVxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBocmVmIHdpdGhvdXQgdmFsdWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCcxJyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstMScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZSgnJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay0yJykpLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnMicpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTInKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYW5kIGNoYW5nZSB1cmwgd2hlbiBuZy1ocmVmIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvTWF0Y2goL1xcLzEyMyQvKTtcblxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstMycpKS5jbGljaygpO1xuXG4gICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgd2UgbmF2aWdhdGUgYXdheSBmcm9tIGFuIEFuZ3VsYXJKUyBwYWdlLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gdXNlIGJyb3dzZXIuZHJpdmVyIHRvIGdldCB0aGUgYmFzZSB3ZWJkcml2ZXIuXG5cbiAgICAgICAgICBicm93c2VyLndhaXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gYnJvd3Nlci5kcml2ZXIuZ2V0Q3VycmVudFVybCgpLnRoZW4oZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICAgIHJldHVybiB1cmwubWF0Y2goL1xcLzEyMyQvKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIDUwMDAsICdwYWdlIHNob3VsZCBuYXZpZ2F0ZSB0byAvMTIzJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nIGFuZCBuYW1lIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzQnKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay00JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKCcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gbm8gaHJlZiBidXQgbmFtZSBzcGVjaWZpZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTUnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCc1Jyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZShudWxsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBvbmx5IGNoYW5nZSB1cmwgd2hlbiBvbmx5IG5nLWhyZWYnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5jbGVhcigpO1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLnNlbmRLZXlzKCc2Jyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9NYXRjaCgvXFwvNiQvKTtcblxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5jbGljaygpO1xuXG4gICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgd2UgbmF2aWdhdGUgYXdheSBmcm9tIGFuIEFuZ3VsYXJKUyBwYWdlLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gdXNlIGJyb3dzZXIuZHJpdmVyIHRvIGdldCB0aGUgYmFzZSB3ZWJkcml2ZXIuXG4gICAgICAgICAgYnJvd3Nlci53YWl0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKC9cXC82JC8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC82Jyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU3JjXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDk5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2luZyBBbmd1bGFySlMgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhIGBzcmNgIGF0dHJpYnV0ZSBkb2Vzbid0XG4gKiB3b3JrIHJpZ2h0OiBUaGUgYnJvd3NlciB3aWxsIGZldGNoIGZyb20gdGhlIFVSTCB3aXRoIHRoZSBsaXRlcmFsXG4gKiB0ZXh0IGB7e2hhc2h9fWAgdW50aWwgQW5ndWxhckpTIHJlcGxhY2VzIHRoZSBleHByZXNzaW9uIGluc2lkZVxuICogYHt7aGFzaH19YC4gVGhlIGBuZ1NyY2AgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0uXG4gKlxuICogVGhlIGJ1Z2d5IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgc3JjPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCIgYWx0PVwiRGVzY3JpcHRpb25cIi8+XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29ycmVjdCB3YXkgdG8gd3JpdGUgaXQ6XG4gKiBgYGBodG1sXG4gKiA8aW1nIG5nLXNyYz1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiIGFsdD1cIkRlc2NyaXB0aW9uXCIgLz5cbiAqIGBgYFxuICpcbiAqIEBlbGVtZW50IElNR1xuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdTcmMgYW55IHN0cmluZyB3aGljaCBjYW4gY29udGFpbiBge3t9fWAgbWFya3VwLlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTcmNzZXRcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgOTlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzaW5nIEFuZ3VsYXJKUyBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGEgYHNyY3NldGAgYXR0cmlidXRlIGRvZXNuJ3RcbiAqIHdvcmsgcmlnaHQ6IFRoZSBicm93c2VyIHdpbGwgZmV0Y2ggZnJvbSB0aGUgVVJMIHdpdGggdGhlIGxpdGVyYWxcbiAqIHRleHQgYHt7aGFzaH19YCB1bnRpbCBBbmd1bGFySlMgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXG4gKiBge3toYXNofX1gLiBUaGUgYG5nU3Jjc2V0YCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbS5cbiAqXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGltZyBzcmNzZXQ9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX0gMnhcIiBhbHQ9XCJEZXNjcmlwdGlvblwiLz5cbiAqIGBgYFxuICpcbiAqIFRoZSBjb3JyZWN0IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgbmctc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIgYWx0PVwiRGVzY3JpcHRpb25cIiAvPlxuICogYGBgXG4gKlxuICogQGVsZW1lbnQgSU1HXG4gKiBAcGFyYW0ge3RlbXBsYXRlfSBuZ1NyY3NldCBhbnkgc3RyaW5nIHdoaWNoIGNhbiBjb250YWluIGB7e319YCBtYXJrdXAuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0Rpc2FibGVkXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgZGlyZWN0aXZlIHNldHMgdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50ICh0eXBpY2FsbHkgYSBmb3JtIGNvbnRyb2wsXG4gKiBlLmcuIGBpbnB1dGAsIGBidXR0b25gLCBgc2VsZWN0YCBldGMuKSBpZiB0aGVcbiAqIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGluc2lkZSBgbmdEaXNhYmxlZGAgZXZhbHVhdGVzIHRvIHRydXRoeS5cbiAqXG4gKiBBIHNwZWNpYWwgZGlyZWN0aXZlIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIGNhbm5vdCB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhlIGBkaXNhYmxlZGBcbiAqIGF0dHJpYnV0ZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9uIGd1aWRlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nLWRpc2FibGVkXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8bGFiZWw+Q2xpY2sgbWUgdG8gdG9nZ2xlOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCI+PC9sYWJlbD48YnIvPlxuICAgICAgICA8YnV0dG9uIG5nLW1vZGVsPVwiYnV0dG9uXCIgbmctZGlzYWJsZWQ9XCJjaGVja2VkXCI+QnV0dG9uPC9idXR0b24+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgdG9nZ2xlIGJ1dHRvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdEaXNhYmxlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2hlY2tlZFxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNldHMgdGhlIGBjaGVja2VkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdDaGVja2VkYCBpcyB0cnV0aHkuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgZGlyZWN0aXZlIHNob3VsZCBub3QgYmUgdXNlZCB0b2dldGhlciB3aXRoIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0sXG4gKiBhcyB0aGlzIGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IuXG4gKlxuICogQSBzcGVjaWFsIGRpcmVjdGl2ZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoZSBgY2hlY2tlZGBcbiAqIGF0dHJpYnV0ZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9uIGd1aWRlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNoZWNrZWRcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxsYWJlbD5DaGVjayBtZSB0byBjaGVjayBib3RoOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJsZWFkZXJcIj48L2xhYmVsPjxici8+XG4gICAgICAgIDxpbnB1dCBpZD1cImNoZWNrRm9sbG93ZXJcIiB0eXBlPVwiY2hlY2tib3hcIiBuZy1jaGVja2VkPVwibGVhZGVyXCIgYXJpYS1sYWJlbD1cIkZvbGxvd2VyIGlucHV0XCI+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgY2hlY2sgYm90aCBjaGVja0JveGVzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2NoZWNrRm9sbG93ZXInKSkuZ2V0QXR0cmlidXRlKCdjaGVja2VkJykpLnRvQmVGYWxzeSgpO1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2xlYWRlcicpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjaGVja0ZvbGxvd2VyJykpLmdldEF0dHJpYnV0ZSgnY2hlY2tlZCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqXG4gKiBAZWxlbWVudCBJTlBVVFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NoZWNrZWQgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcbiAqICAgICB0aGVuIHRoZSBgY2hlY2tlZGAgYXR0cmlidXRlIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nUmVhZG9ubHlcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYHJlYWRvbmx5YCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdSZWFkb25seWAgaXMgdHJ1dGh5LlxuICogTm90ZSB0aGF0IGByZWFkb25seWAgYXBwbGllcyBvbmx5IHRvIGBpbnB1dGAgZWxlbWVudHMgd2l0aCBzcGVjaWZpYyB0eXBlcy4gW1NlZSB0aGUgaW5wdXQgZG9jcyBvblxuICogTUROXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvaW5wdXQjYXR0ci1yZWFkb25seSkgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQSBzcGVjaWFsIGRpcmVjdGl2ZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoZSBgcmVhZG9ubHlgXG4gKiBhdHRyaWJ1dGUuIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbiBndWlkZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1yZWFkb25seVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGxhYmVsPkNoZWNrIG1lIHRvIG1ha2UgdGV4dCByZWFkb25seTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjwvbGFiZWw+PGJyLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctcmVhZG9ubHk9XCJjaGVja2VkXCIgdmFsdWU9XCJJJ20gQW5ndWxhckpTXCIgYXJpYS1sYWJlbD1cIlJlYWRvbmx5IGZpZWxkXCIgLz5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgcmVhZG9ubHkgYXR0cicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnW3R5cGU9XCJ0ZXh0XCJdJykpLmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnW3R5cGU9XCJ0ZXh0XCJdJykpLmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdSZWFkb25seSBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJyZWFkb25seVwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU2VsZWN0ZWRcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYHNlbGVjdGVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdTZWxlY3RlZGAgaXMgdHJ1dGh5LlxuICpcbiAqIEEgc3BlY2lhbCBkaXJlY3RpdmUgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgY2Fubm90IHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGUgYHNlbGVjdGVkYFxuICogYXR0cmlidXRlLiBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb24gZ3VpZGV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgKipOb3RlOioqIGBuZ1NlbGVjdGVkYCBkb2VzIG5vdCBpbnRlcmFjdCB3aXRoIHRoZSBgc2VsZWN0YCBhbmQgYG5nTW9kZWxgIGRpcmVjdGl2ZXMsIGl0IG9ubHlcbiAqICAgc2V0cyB0aGUgYHNlbGVjdGVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQuIElmIHlvdSBhcmUgdXNpbmcgYG5nTW9kZWxgIG9uIHRoZSBzZWxlY3QsIHlvdVxuICogICBzaG91bGQgbm90IHVzZSBgbmdTZWxlY3RlZGAgb24gdGhlIG9wdGlvbnMsIGFzIGBuZ01vZGVsYCB3aWxsIHNldCB0aGUgc2VsZWN0IHZhbHVlIGFuZFxuICogICBzZWxlY3RlZCBvcHRpb25zLlxuICogPC9kaXY+XG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmctc2VsZWN0ZWRcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxsYWJlbD5DaGVjayBtZSB0byBzZWxlY3Q6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCI+PC9sYWJlbD48YnIvPlxuICAgICAgICA8c2VsZWN0IGFyaWEtbGFiZWw9XCJuZ1NlbGVjdGVkIGRlbW9cIj5cbiAgICAgICAgICA8b3B0aW9uPkhlbGxvITwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gaWQ9XCJncmVldFwiIG5nLXNlbGVjdGVkPVwic2VsZWN0ZWRcIj5HcmVldGluZ3MhPC9vcHRpb24+XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIHNlbGVjdCBHcmVldGluZ3MhJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2dyZWV0JykpLmdldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc2VsZWN0ZWQnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZ3JlZXQnKSkuZ2V0QXR0cmlidXRlKCdzZWxlY3RlZCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqXG4gKiBAZWxlbWVudCBPUFRJT05cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTZWxlY3RlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJzZWxlY3RlZFwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ09wZW5cbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYG9wZW5gIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCwgaWYgdGhlIGV4cHJlc3Npb24gaW5zaWRlIGBuZ09wZW5gIGlzIHRydXRoeS5cbiAqXG4gKiBBIHNwZWNpYWwgZGlyZWN0aXZlIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIGNhbm5vdCB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhlIGBvcGVuYFxuICogYXR0cmlidXRlLiBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb24gZ3VpZGV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogIyMgQSBub3RlIGFib3V0IGJyb3dzZXIgY29tcGF0aWJpbGl0eVxuICpcbiAqIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IHRoZSBgZGV0YWlsc2AgZWxlbWVudCwgaXQgaXNcbiAqIHJlY29tbWVuZGVkIHRvIHVzZSB7QGxpbmsgbmcubmdTaG93fSBhbmQge0BsaW5rIG5nLm5nSGlkZX0gaW5zdGVhZC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZSBuYW1lPVwibmctb3BlblwiPlxuICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8bGFiZWw+VG9nZ2xlIGRldGFpbHM6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cIm9wZW5cIj48L2xhYmVsPjxici8+XG4gICAgICAgICA8ZGV0YWlscyBpZD1cImRldGFpbHNcIiBuZy1vcGVuPVwib3BlblwiPlxuICAgICAgICAgICAgPHN1bW1hcnk+TGlzdDwvc3VtbWFyeT5cbiAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgPGxpPkFwcGxlPC9saT5cbiAgICAgICAgICAgICAgPGxpPk9yYW5nZTwvbGk+XG4gICAgICAgICAgICAgIDxsaT5EdXJpYW48L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgIDwvZGV0YWlscz5cbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgb3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZGV0YWlscycpKS5nZXRBdHRyaWJ1dGUoJ29wZW4nKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ29wZW4nKSkuY2xpY2soKTtcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RldGFpbHMnKSkuZ2V0QXR0cmlidXRlKCdvcGVuJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgIH0pO1xuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICpcbiAqIEBlbGVtZW50IERFVEFJTFNcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdPcGVuIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcIm9wZW5cIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICovXG5cbnZhciBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyA9IHt9O1xuXG4vLyBib29sZWFuIGF0dHJzIGFyZSBldmFsdWF0ZWRcbmZvckVhY2goQk9PTEVBTl9BVFRSLCBmdW5jdGlvbihwcm9wTmFtZSwgYXR0ck5hbWUpIHtcbiAgLy8gYmluZGluZyB0byBtdWx0aXBsZSBpcyBub3Qgc3VwcG9ydGVkXG4gIGlmIChwcm9wTmFtZSA9PT0gJ211bHRpcGxlJykgcmV0dXJuO1xuXG4gIGZ1bmN0aW9uIGRlZmF1bHRMaW5rRm4oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICBzY29wZS4kd2F0Y2goYXR0cltub3JtYWxpemVkXSwgZnVuY3Rpb24gbmdCb29sZWFuQXR0cldhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICBhdHRyLiRzZXQoYXR0ck5hbWUsICEhdmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIG5vcm1hbGl6ZWQgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBhdHRyTmFtZSk7XG4gIHZhciBsaW5rRm4gPSBkZWZhdWx0TGlua0ZuO1xuXG4gIGlmIChwcm9wTmFtZSA9PT0gJ2NoZWNrZWQnKSB7XG4gICAgbGlua0ZuID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIC8vIGVuc3VyaW5nIG5nQ2hlY2tlZCBkb2Vzbid0IGludGVyZmVyZSB3aXRoIG5nTW9kZWwgd2hlbiBib3RoIGFyZSBzZXQgb24gdGhlIHNhbWUgaW5wdXRcbiAgICAgIGlmIChhdHRyLm5nTW9kZWwgIT09IGF0dHJbbm9ybWFsaXplZF0pIHtcbiAgICAgICAgZGVmYXVsdExpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cik7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBwcmlvcml0eTogMTAwLFxuICAgICAgbGluazogbGlua0ZuXG4gICAgfTtcbiAgfTtcbn0pO1xuXG4vLyBhbGlhc2VkIGlucHV0IGF0dHJzIGFyZSBldmFsdWF0ZWRcbmZvckVhY2goQUxJQVNFRF9BVFRSLCBmdW5jdGlvbihodG1sQXR0ciwgbmdBdHRyKSB7XG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25nQXR0cl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJpb3JpdHk6IDEwMCxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIC8vc3BlY2lhbCBjYXNlIG5nUGF0dGVybiB3aGVuIGEgbGl0ZXJhbCByZWd1bGFyIGV4cHJlc3Npb24gdmFsdWVcbiAgICAgICAgLy9pcyB1c2VkIGFzIHRoZSBleHByZXNzaW9uICh0aGlzIHdheSB3ZSBkb24ndCBoYXZlIHRvIHdhdGNoIGFueXRoaW5nKS5cbiAgICAgICAgaWYgKG5nQXR0ciA9PT0gJ25nUGF0dGVybicgJiYgYXR0ci5uZ1BhdHRlcm4uY2hhckF0KDApID09PSAnLycpIHtcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBhdHRyLm5nUGF0dGVybi5tYXRjaChSRUdFWF9TVFJJTkdfUkVHRVhQKTtcbiAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGF0dHIuJHNldCgnbmdQYXR0ZXJuJywgbmV3IFJlZ0V4cChtYXRjaFsxXSwgbWF0Y2hbMl0pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0cltuZ0F0dHJdLCBmdW5jdGlvbiBuZ0F0dHJBbGlhc1dhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgYXR0ci4kc2V0KG5nQXR0ciwgdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufSk7XG5cbi8vIG5nLXNyYywgbmctc3Jjc2V0LCBuZy1ocmVmIGFyZSBpbnRlcnBvbGF0ZWRcbmZvckVhY2goWydzcmMnLCAnc3Jjc2V0JywgJ2hyZWYnXSwgZnVuY3Rpb24oYXR0ck5hbWUpIHtcbiAgdmFyIG5vcm1hbGl6ZWQgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBhdHRyTmFtZSk7XG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByaW9yaXR5OiA5OSwgLy8gaXQgbmVlZHMgdG8gcnVuIGFmdGVyIHRoZSBhdHRyaWJ1dGVzIGFyZSBpbnRlcnBvbGF0ZWRcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IGF0dHJOYW1lLFxuICAgICAgICAgICAgbmFtZSA9IGF0dHJOYW1lO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ2hyZWYnICYmXG4gICAgICAgICAgICB0b1N0cmluZy5jYWxsKGVsZW1lbnQucHJvcCgnaHJlZicpKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xuICAgICAgICAgIG5hbWUgPSAneGxpbmtIcmVmJztcbiAgICAgICAgICBhdHRyLiRhdHRyW25hbWVdID0gJ3hsaW5rOmhyZWYnO1xuICAgICAgICAgIHByb3BOYW1lID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHIuJG9ic2VydmUobm9ybWFsaXplZCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoYXR0ck5hbWUgPT09ICdocmVmJykge1xuICAgICAgICAgICAgICBhdHRyLiRzZXQobmFtZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIHZhbHVlKTtcblxuICAgICAgICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seVxuICAgICAgICAgIC8vIE9uIElFLCBpZiBcIm5nOnNyY1wiIGRpcmVjdGl2ZSBkZWNsYXJhdGlvbiBpcyB1c2VkIGFuZCBcInNyY1wiIGF0dHJpYnV0ZSBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgLy8gdGhlbiBjYWxsaW5nIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCAnZm9vJykgZG9lc24ndCBkbyBhbnl0aGluZywgc28gd2UgbmVlZFxuICAgICAgICAgIC8vIHRvIHNldCB0aGUgcHJvcGVydHkgYXMgd2VsbCB0byBhY2hpZXZlIHRoZSBkZXNpcmVkIGVmZmVjdC5cbiAgICAgICAgICAvLyBXZSB1c2UgYXR0clthdHRyTmFtZV0gdmFsdWUgc2luY2UgJHNldCBjYW4gc2FuaXRpemUgdGhlIHVybC5cbiAgICAgICAgICBpZiAobXNpZSAmJiBwcm9wTmFtZSkgZWxlbWVudC5wcm9wKHByb3BOYW1lLCBhdHRyW25hbWVdKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn0pO1xuXG4vKiBnbG9iYWwgLW51bGxGb3JtQ3RybCwgLVBFTkRJTkdfQ0xBU1MsIC1TVUJNSVRURURfQ0xBU1NcbiAqL1xudmFyIG51bGxGb3JtQ3RybCA9IHtcbiAgJGFkZENvbnRyb2w6IG5vb3AsXG4gICQkcmVuYW1lQ29udHJvbDogbnVsbEZvcm1SZW5hbWVDb250cm9sLFxuICAkcmVtb3ZlQ29udHJvbDogbm9vcCxcbiAgJHNldFZhbGlkaXR5OiBub29wLFxuICAkc2V0RGlydHk6IG5vb3AsXG4gICRzZXRQcmlzdGluZTogbm9vcCxcbiAgJHNldFN1Ym1pdHRlZDogbm9vcFxufSxcblBFTkRJTkdfQ0xBU1MgPSAnbmctcGVuZGluZycsXG5TVUJNSVRURURfQ0xBU1MgPSAnbmctc3VibWl0dGVkJztcblxuZnVuY3Rpb24gbnVsbEZvcm1SZW5hbWVDb250cm9sKGNvbnRyb2wsIG5hbWUpIHtcbiAgY29udHJvbC4kbmFtZSA9IG5hbWU7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXJcbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGZvcm0geWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgZm9ybS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHZhbGlkIFRydWUgaWYgYWxsIG9mIHRoZSBjb250YWluaW5nIGZvcm1zIGFuZCBjb250cm9scyBhcmUgdmFsaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGNvbnRhaW5pbmcgY29udHJvbCBvciBmb3JtIGlzIGludmFsaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRzdWJtaXR0ZWQgVHJ1ZSBpZiB1c2VyIGhhcyBzdWJtaXR0ZWQgdGhlIGZvcm0gZXZlbiBpZiBpdHMgaW52YWxpZC5cbiAqXG4gKiBAcHJvcGVydHkge09iamVjdH0gJHBlbmRpbmcgQW4gb2JqZWN0IGhhc2gsIGNvbnRhaW5pbmcgcmVmZXJlbmNlcyB0byBjb250cm9scyBvciBmb3JtcyB3aXRoXG4gKiAgcGVuZGluZyB2YWxpZGF0b3JzLCB3aGVyZTpcbiAqXG4gKiAgLSBrZXlzIGFyZSB2YWxpZGF0aW9ucyB0b2tlbnMgKGVycm9yIG5hbWVzKS5cbiAqICAtIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGNvbnRyb2xzIG9yIGZvcm1zIHRoYXQgaGF2ZSBhIHBlbmRpbmcgdmFsaWRhdG9yIGZvciB0aGUgZ2l2ZW4gZXJyb3IgbmFtZS5cbiAqXG4gKiBTZWUge0BsaW5rIGZvcm0uRm9ybUNvbnRyb2xsZXIjJGVycm9yICRlcnJvcn0gZm9yIGEgbGlzdCBvZiBidWlsdC1pbiB2YWxpZGF0aW9uIHRva2Vucy5cbiAqXG4gKiBAcHJvcGVydHkge09iamVjdH0gJGVycm9yIEFuIG9iamVjdCBoYXNoLCBjb250YWluaW5nIHJlZmVyZW5jZXMgdG8gY29udHJvbHMgb3IgZm9ybXMgd2l0aCBmYWlsaW5nXG4gKiAgdmFsaWRhdG9ycywgd2hlcmU6XG4gKlxuICogIC0ga2V5cyBhcmUgdmFsaWRhdGlvbiB0b2tlbnMgKGVycm9yIG5hbWVzKSxcbiAqICAtIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGNvbnRyb2xzIG9yIGZvcm1zIHRoYXQgaGF2ZSBhIGZhaWxpbmcgdmFsaWRhdG9yIGZvciB0aGUgZ2l2ZW4gZXJyb3IgbmFtZS5cbiAqXG4gKiAgQnVpbHQtaW4gdmFsaWRhdGlvbiB0b2tlbnM6XG4gKiAgLSBgZW1haWxgXG4gKiAgLSBgbWF4YFxuICogIC0gYG1heGxlbmd0aGBcbiAqICAtIGBtaW5gXG4gKiAgLSBgbWlubGVuZ3RoYFxuICogIC0gYG51bWJlcmBcbiAqICAtIGBwYXR0ZXJuYFxuICogIC0gYHJlcXVpcmVkYFxuICogIC0gYHVybGBcbiAqICAtIGBkYXRlYFxuICogIC0gYGRhdGV0aW1lbG9jYWxgXG4gKiAgLSBgdGltZWBcbiAqICAtIGB3ZWVrYFxuICogIC0gYG1vbnRoYFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogYEZvcm1Db250cm9sbGVyYCBrZWVwcyB0cmFjayBvZiBhbGwgaXRzIGNvbnRyb2xzIGFuZCBuZXN0ZWQgZm9ybXMgYXMgd2VsbCBhcyB0aGUgc3RhdGUgb2YgdGhlbSxcbiAqIHN1Y2ggYXMgYmVpbmcgdmFsaWQvaW52YWxpZCBvciBkaXJ0eS9wcmlzdGluZS5cbiAqXG4gKiBFYWNoIHtAbGluayBuZy5kaXJlY3RpdmU6Zm9ybSBmb3JtfSBkaXJlY3RpdmUgY3JlYXRlcyBhbiBpbnN0YW5jZVxuICogb2YgYEZvcm1Db250cm9sbGVyYC5cbiAqXG4gKi9cbi8vYXNrcyBmb3IgJHNjb3BlIHRvIGZvb2wgdGhlIEJDIGNvbnRyb2xsZXIgbW9kdWxlXG5Gb3JtQ29udHJvbGxlci4kaW5qZWN0ID0gWyckZWxlbWVudCcsICckYXR0cnMnLCAnJHNjb3BlJywgJyRhbmltYXRlJywgJyRpbnRlcnBvbGF0ZSddO1xuZnVuY3Rpb24gRm9ybUNvbnRyb2xsZXIoJGVsZW1lbnQsICRhdHRycywgJHNjb3BlLCAkYW5pbWF0ZSwgJGludGVycG9sYXRlKSB7XG4gIHRoaXMuJCRjb250cm9scyA9IFtdO1xuXG4gIC8vIGluaXQgc3RhdGVcbiAgdGhpcy4kZXJyb3IgPSB7fTtcbiAgdGhpcy4kJHN1Y2Nlc3MgPSB7fTtcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDtcbiAgdGhpcy4kbmFtZSA9ICRpbnRlcnBvbGF0ZSgkYXR0cnMubmFtZSB8fCAkYXR0cnMubmdGb3JtIHx8ICcnKSgkc2NvcGUpO1xuICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xuICB0aGlzLiRwcmlzdGluZSA9IHRydWU7XG4gIHRoaXMuJHZhbGlkID0gdHJ1ZTtcbiAgdGhpcy4kaW52YWxpZCA9IGZhbHNlO1xuICB0aGlzLiRzdWJtaXR0ZWQgPSBmYWxzZTtcbiAgdGhpcy4kJHBhcmVudEZvcm0gPSBudWxsRm9ybUN0cmw7XG5cbiAgdGhpcy4kJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgdGhpcy4kJGFuaW1hdGUgPSAkYW5pbWF0ZTtcblxuICBzZXR1cFZhbGlkaXR5KHRoaXMpO1xufVxuXG5Gb3JtQ29udHJvbGxlci5wcm90b3R5cGUgPSB7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHJvbGxiYWNrVmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSb2xsYmFjayBhbGwgZm9ybSBjb250cm9scyBwZW5kaW5nIHVwZGF0ZXMgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gVGhpcyBtZXRob2QgaXMgdHlwaWNhbGx5IG5lZWRlZCBieSB0aGUgcmVzZXQgYnV0dG9uIG9mXG4gICAqIGEgZm9ybSB0aGF0IHVzZXMgYG5nLW1vZGVsLW9wdGlvbnNgIHRvIHBlbmQgdXBkYXRlcy5cbiAgICovXG4gICRyb2xsYmFja1ZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgZm9yRWFjaCh0aGlzLiQkY29udHJvbHMsIGZ1bmN0aW9uKGNvbnRyb2wpIHtcbiAgICAgIGNvbnRyb2wuJHJvbGxiYWNrVmlld1ZhbHVlKCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkY29tbWl0Vmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDb21taXQgYWxsIGZvcm0gY29udHJvbHMgcGVuZGluZyB1cGRhdGVzIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxuICAgKlxuICAgKiBVcGRhdGVzIG1heSBiZSBwZW5kaW5nIGJ5IGEgZGVib3VuY2VkIGV2ZW50IG9yIGJlY2F1c2UgdGhlIGlucHV0IGlzIHdhaXRpbmcgZm9yIGEgc29tZSBmdXR1cmVcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIFRoaXMgbWV0aG9kIGlzIHJhcmVseSBuZWVkZWQgYXMgYE5nTW9kZWxDb250cm9sbGVyYFxuICAgKiB1c3VhbGx5IGhhbmRsZXMgY2FsbGluZyB0aGlzIGluIHJlc3BvbnNlIHRvIGlucHV0IGV2ZW50cy5cbiAgICovXG4gICRjb21taXRWaWV3VmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIGZvckVhY2godGhpcy4kJGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgICBjb250cm9sLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRhZGRDb250cm9sXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250cm9sIGNvbnRyb2wgb2JqZWN0LCBlaXRoZXIgYSB7QGxpbmsgZm9ybS5Gb3JtQ29udHJvbGxlcn0gb3IgYW5cbiAgICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJ9XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZWdpc3RlciBhIGNvbnRyb2wgd2l0aCB0aGUgZm9ybS4gSW5wdXQgZWxlbWVudHMgdXNpbmcgbmdNb2RlbENvbnRyb2xsZXIgZG8gdGhpcyBhdXRvbWF0aWNhbGx5XG4gICAqIHdoZW4gdGhleSBhcmUgbGlua2VkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNvbnRyb2wgd2lsbCBub3QgYmUgcmVmbGVjdGVkIG9uIHRoZSBuZXcgcGFyZW50IGZvcm0uIFRoaXNcbiAgICogaXMgbm90IGFuIGlzc3VlIHdpdGggbm9ybWFsIHVzZSwgYXMgZnJlc2hseSBjb21waWxlZCBhbmQgbGlua2VkIGNvbnRyb2xzIGFyZSBpbiBhIGAkcHJpc3RpbmVgXG4gICAqIHN0YXRlLlxuICAgKlxuICAgKiBIb3dldmVyLCBpZiB0aGUgbWV0aG9kIGlzIHVzZWQgcHJvZ3JhbW1hdGljYWxseSwgZm9yIGV4YW1wbGUgYnkgYWRkaW5nIGR5bmFtaWNhbGx5IGNyZWF0ZWQgY29udHJvbHMsXG4gICAqIG9yIGNvbnRyb2xzIHRoYXQgaGF2ZSBiZWVuIHByZXZpb3VzbHkgcmVtb3ZlZCB3aXRob3V0IGRlc3Ryb3lpbmcgdGhlaXIgY29ycmVzcG9uZGluZyBET00gZWxlbWVudCxcbiAgICogaXQncyB0aGUgZGV2ZWxvcGVycyByZXNwb25zaWJpbGl0eSB0byBtYWtlIHN1cmUgdGhlIGN1cnJlbnQgc3RhdGUgcHJvcGFnYXRlcyB0byB0aGUgcGFyZW50IGZvcm0uXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiBhbiBpbnB1dCBjb250cm9sIGlzIGFkZGVkIHRoYXQgaXMgYWxyZWFkeSBgJGRpcnR5YCBhbmQgaGFzIGAkZXJyb3JgIHByb3BlcnRpZXMsXG4gICAqIGNhbGxpbmcgYCRzZXREaXJ0eSgpYCBhbmQgYCR2YWxpZGF0ZSgpYCBhZnRlcndhcmRzIHdpbGwgcHJvcGFnYXRlIHRoZSBzdGF0ZSB0byB0aGUgcGFyZW50IGZvcm0uXG4gICAqL1xuICAkYWRkQ29udHJvbDogZnVuY3Rpb24oY29udHJvbCkge1xuICAgIC8vIEJyZWFraW5nIGNoYW5nZSAtIGJlZm9yZSwgaW5wdXRzIHdob3NlIG5hbWUgd2FzIFwiaGFzT3duUHJvcGVydHlcIiB3ZXJlIHF1aWV0bHkgaWdub3JlZFxuICAgIC8vIGFuZCBub3QgYWRkZWQgdG8gdGhlIHNjb3BlLiAgTm93IHdlIHRocm93IGFuIGVycm9yLlxuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KGNvbnRyb2wuJG5hbWUsICdpbnB1dCcpO1xuICAgIHRoaXMuJCRjb250cm9scy5wdXNoKGNvbnRyb2wpO1xuXG4gICAgaWYgKGNvbnRyb2wuJG5hbWUpIHtcbiAgICAgIHRoaXNbY29udHJvbC4kbmFtZV0gPSBjb250cm9sO1xuICAgIH1cblxuICAgIGNvbnRyb2wuJCRwYXJlbnRGb3JtID0gdGhpcztcbiAgfSxcblxuICAvLyBQcml2YXRlIEFQSTogcmVuYW1lIGEgZm9ybSBjb250cm9sXG4gICQkcmVuYW1lQ29udHJvbDogZnVuY3Rpb24oY29udHJvbCwgbmV3TmFtZSkge1xuICAgIHZhciBvbGROYW1lID0gY29udHJvbC4kbmFtZTtcblxuICAgIGlmICh0aGlzW29sZE5hbWVdID09PSBjb250cm9sKSB7XG4gICAgICBkZWxldGUgdGhpc1tvbGROYW1lXTtcbiAgICB9XG4gICAgdGhpc1tuZXdOYW1lXSA9IGNvbnRyb2w7XG4gICAgY29udHJvbC4kbmFtZSA9IG5ld05hbWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkcmVtb3ZlQ29udHJvbFxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udHJvbCBjb250cm9sIG9iamVjdCwgZWl0aGVyIGEge0BsaW5rIGZvcm0uRm9ybUNvbnRyb2xsZXJ9IG9yIGFuXG4gICAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyfVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRGVyZWdpc3RlciBhIGNvbnRyb2wgZnJvbSB0aGUgZm9ybS5cbiAgICpcbiAgICogSW5wdXQgZWxlbWVudHMgdXNpbmcgbmdNb2RlbENvbnRyb2xsZXIgZG8gdGhpcyBhdXRvbWF0aWNhbGx5IHdoZW4gdGhleSBhcmUgZGVzdHJveWVkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgb25seSB0aGUgcmVtb3ZlZCBjb250cm9sJ3MgdmFsaWRhdGlvbiBzdGF0ZSAoYCRlcnJvcnNgZXRjLikgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlXG4gICAqIGZvcm0uIGAkZGlydHlgLCBgJHN1Ym1pdHRlZGAgc3RhdGVzIHdpbGwgbm90IGJlIGNoYW5nZWQsIGJlY2F1c2UgdGhlIGV4cGVjdGVkIGJlaGF2aW9yIGNhbiBiZVxuICAgKiBkaWZmZXJlbnQgZnJvbSBjYXNlIHRvIGNhc2UuIEZvciBleGFtcGxlLCByZW1vdmluZyB0aGUgb25seSBgJGRpcnR5YCBjb250cm9sIGZyb20gYSBmb3JtIG1heSBvclxuICAgKiBtYXkgbm90IG1lYW4gdGhhdCB0aGUgZm9ybSBpcyBzdGlsbCBgJGRpcnR5YC5cbiAgICovXG4gICRyZW1vdmVDb250cm9sOiBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgaWYgKGNvbnRyb2wuJG5hbWUgJiYgdGhpc1tjb250cm9sLiRuYW1lXSA9PT0gY29udHJvbCkge1xuICAgICAgZGVsZXRlIHRoaXNbY29udHJvbC4kbmFtZV07XG4gICAgfVxuICAgIGZvckVhY2godGhpcy4kcGVuZGluZywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgICAgIHRoaXMuJHNldFZhbGlkaXR5KG5hbWUsIG51bGwsIGNvbnRyb2wpO1xuICAgIH0sIHRoaXMpO1xuICAgIGZvckVhY2godGhpcy4kZXJyb3IsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgICB0aGlzLiRzZXRWYWxpZGl0eShuYW1lLCBudWxsLCBjb250cm9sKTtcbiAgICB9LCB0aGlzKTtcbiAgICBmb3JFYWNoKHRoaXMuJCRzdWNjZXNzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgICAgdGhpcy4kc2V0VmFsaWRpdHkobmFtZSwgbnVsbCwgY29udHJvbCk7XG4gICAgfSwgdGhpcyk7XG5cbiAgICBhcnJheVJlbW92ZSh0aGlzLiQkY29udHJvbHMsIGNvbnRyb2wpO1xuICAgIGNvbnRyb2wuJCRwYXJlbnRGb3JtID0gbnVsbEZvcm1DdHJsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldERpcnR5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGEgZGlydHkgc3RhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gYWRkIHRoZSAnbmctZGlydHknIGNsYXNzIGFuZCBzZXQgdGhlIGZvcm0gdG8gYSBkaXJ0eVxuICAgKiBzdGF0ZSAobmctZGlydHkgY2xhc3MpLiBUaGlzIG1ldGhvZCB3aWxsIGFsc28gcHJvcGFnYXRlIHRvIHBhcmVudCBmb3Jtcy5cbiAgICovXG4gICRzZXREaXJ0eTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xuICAgIHRoaXMuJGRpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLiRwcmlzdGluZSA9IGZhbHNlO1xuICAgIHRoaXMuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFByaXN0aW5lXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgc2V0cyB0aGUgZm9ybSdzIGAkcHJpc3RpbmVgIHN0YXRlIHRvIHRydWUsIHRoZSBgJGRpcnR5YCBzdGF0ZSB0byBmYWxzZSwgcmVtb3Zlc1xuICAgKiB0aGUgYG5nLWRpcnR5YCBjbGFzcyBhbmQgYWRkcyB0aGUgYG5nLXByaXN0aW5lYCBjbGFzcy4gQWRkaXRpb25hbGx5LCBpdCBzZXRzIHRoZSBgJHN1Ym1pdHRlZGBcbiAgICogc3RhdGUgdG8gZmFsc2UuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gYWxsIHRoZSBjb250cm9scyBjb250YWluZWQgaW4gdGhpcyBmb3JtLlxuICAgKlxuICAgKiBTZXR0aW5nIGEgZm9ybSBiYWNrIHRvIGEgcHJpc3RpbmUgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gd2Ugd2FudCB0byAncmV1c2UnIGEgZm9ybSBhZnRlclxuICAgKiBzYXZpbmcgb3IgcmVzZXR0aW5nIGl0LlxuICAgKi9cbiAgJHNldFByaXN0aW5lOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkYW5pbWF0ZS5zZXRDbGFzcyh0aGlzLiQkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MsIERJUlRZX0NMQVNTICsgJyAnICsgU1VCTUlUVEVEX0NMQVNTKTtcbiAgICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcbiAgICB0aGlzLiRzdWJtaXR0ZWQgPSBmYWxzZTtcbiAgICBmb3JFYWNoKHRoaXMuJCRjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgY29udHJvbC4kc2V0UHJpc3RpbmUoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRVbnRvdWNoZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gaXRzIHVudG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlICduZy10b3VjaGVkJyBjbGFzcyBhbmQgc2V0IHRoZSBmb3JtIGNvbnRyb2xzIHRvIHRoZWlyXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAobmctdW50b3VjaGVkIGNsYXNzKS5cbiAgICpcbiAgICogU2V0dGluZyBhIGZvcm0gY29udHJvbHMgYmFjayB0byB0aGVpciB1bnRvdWNoZWQgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gc2V0dGluZyB0aGUgZm9ybVxuICAgKiBiYWNrIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICovXG4gICRzZXRVbnRvdWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIGZvckVhY2godGhpcy4kJGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgICBjb250cm9sLiRzZXRVbnRvdWNoZWQoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRTdWJtaXR0ZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gaXRzIHN1Ym1pdHRlZCBzdGF0ZS5cbiAgICovXG4gICRzZXRTdWJtaXR0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJCRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCBTVUJNSVRURURfQ0xBU1MpO1xuICAgIHRoaXMuJHN1Ym1pdHRlZCA9IHRydWU7XG4gICAgdGhpcy4kJHBhcmVudEZvcm0uJHNldFN1Ym1pdHRlZCgpO1xuICB9XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFZhbGlkaXR5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDaGFuZ2UgdGhlIHZhbGlkaXR5IHN0YXRlIG9mIHRoZSBmb3JtLCBhbmQgbm90aWZ5IHRoZSBwYXJlbnQgZm9ybSAoaWYgYW55KS5cbiAqXG4gKiBBcHBsaWNhdGlvbiBkZXZlbG9wZXJzIHdpbGwgcmFyZWx5IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS4gSXQgaXMgdXNlZCBpbnRlcm5hbGx5LCBieVxuICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZhbGlkaXR5IE5nTW9kZWxDb250cm9sbGVyLiRzZXRWYWxpZGl0eSgpfSwgdG8gcHJvcGFnYXRlIGFcbiAqIGNvbnRyb2wncyB2YWxpZGl0eSBzdGF0ZSB0byB0aGUgcGFyZW50IGBGb3JtQ29udHJvbGxlcmAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbGlkYXRpb25FcnJvcktleSBOYW1lIG9mIHRoZSB2YWxpZGF0b3IuIFRoZSBgdmFsaWRhdGlvbkVycm9yS2V5YCB3aWxsIGJlXG4gKiAgICAgICAgYXNzaWduZWQgdG8gZWl0aGVyIGAkZXJyb3JbdmFsaWRhdGlvbkVycm9yS2V5XWAgb3IgYCRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV1gIChmb3JcbiAqICAgICAgICB1bmZ1bGZpbGxlZCBgJGFzeW5jVmFsaWRhdG9yc2ApLCBzbyB0aGF0IGl0IGlzIGF2YWlsYWJsZSBmb3IgZGF0YS1iaW5kaW5nLiBUaGVcbiAqICAgICAgICBgdmFsaWRhdGlvbkVycm9yS2V5YCBzaG91bGQgYmUgaW4gY2FtZWxDYXNlIGFuZCB3aWxsIGdldCBjb252ZXJ0ZWQgaW50byBkYXNoLWNhc2UgZm9yXG4gKiAgICAgICAgY2xhc3MgbmFtZS4gRXhhbXBsZTogYG15RXJyb3JgIHdpbGwgcmVzdWx0IGluIGBuZy12YWxpZC1teS1lcnJvcmAgYW5kXG4gKiAgICAgICAgYG5nLWludmFsaWQtbXktZXJyb3JgIGNsYXNzZXMgYW5kIGNhbiBiZSBib3VuZCB0byBhcyBge3sgc29tZUZvcm0uJGVycm9yLm15RXJyb3IgfX1gLlxuICogQHBhcmFtIHtib29sZWFufSBpc1ZhbGlkIFdoZXRoZXIgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdmFsaWQgKHRydWUpLCBpbnZhbGlkIChmYWxzZSksIHBlbmRpbmdcbiAqICAgICAgICAodW5kZWZpbmVkKSwgIG9yIHNraXBwZWQgKG51bGwpLiBQZW5kaW5nIGlzIHVzZWQgZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYC5cbiAqICAgICAgICBTa2lwcGVkIGlzIHVzZWQgYnkgQW5ndWxhckpTIHdoZW4gdmFsaWRhdG9ycyBkbyBub3QgcnVuIGJlY2F1c2Ugb2YgcGFyc2UgZXJyb3JzIGFuZCB3aGVuXG4gKiAgICAgICAgYCRhc3luY1ZhbGlkYXRvcnNgIGRvIG5vdCBydW4gYmVjYXVzZSBhbnkgb2YgdGhlIGAkdmFsaWRhdG9yc2AgZmFpbGVkLlxuICogQHBhcmFtIHtOZ01vZGVsQ29udHJvbGxlciB8IEZvcm1Db250cm9sbGVyfSBjb250cm9sbGVyIC0gVGhlIGNvbnRyb2xsZXIgd2hvc2UgdmFsaWRpdHkgc3RhdGUgaXNcbiAqICAgICAgICB0cmlnZ2VyaW5nIHRoZSBjaGFuZ2UuXG4gKi9cbmFkZFNldFZhbGlkaXR5TWV0aG9kKHtcbiAgY2xheno6IEZvcm1Db250cm9sbGVyLFxuICBzZXQ6IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGNvbnRyb2xsZXIpIHtcbiAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgaWYgKCFsaXN0KSB7XG4gICAgICBvYmplY3RbcHJvcGVydHldID0gW2NvbnRyb2xsZXJdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaW5kZXggPSBsaXN0LmluZGV4T2YoY29udHJvbGxlcik7XG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIGxpc3QucHVzaChjb250cm9sbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHVuc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBjb250cm9sbGVyKSB7XG4gICAgdmFyIGxpc3QgPSBvYmplY3RbcHJvcGVydHldO1xuICAgIGlmICghbGlzdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhcnJheVJlbW92ZShsaXN0LCBjb250cm9sbGVyKTtcbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdGb3JtXG4gKiBAcmVzdHJpY3QgRUFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBOZXN0YWJsZSBhbGlhcyBvZiB7QGxpbmsgbmcuZGlyZWN0aXZlOmZvcm0gYGZvcm1gfSBkaXJlY3RpdmUuIEhUTUxcbiAqIGRvZXMgbm90IGFsbG93IG5lc3Rpbmcgb2YgZm9ybSBlbGVtZW50cy4gSXQgaXMgdXNlZnVsIHRvIG5lc3QgZm9ybXMsIGZvciBleGFtcGxlIGlmIHRoZSB2YWxpZGl0eSBvZiBhXG4gKiBzdWItZ3JvdXAgb2YgY29udHJvbHMgbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZC5cbiAqXG4gKiBOb3RlOiB0aGUgcHVycG9zZSBvZiBgbmdGb3JtYCBpcyB0byBncm91cCBjb250cm9scyxcbiAqIGJ1dCBub3QgdG8gYmUgYSByZXBsYWNlbWVudCBmb3IgdGhlIGA8Zm9ybT5gIHRhZyB3aXRoIGFsbCBvZiBpdHMgY2FwYWJpbGl0aWVzXG4gKiAoZS5nLiBwb3N0aW5nIHRvIHRoZSBzZXJ2ZXIsIC4uLikuXG4gKlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0Zvcm18bmFtZSBOYW1lIG9mIHRoZSBmb3JtLiBJZiBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgd2lsbCBiZSBwdWJsaXNoZWQgaW50b1xuICogICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQgc2NvcGUsIHVuZGVyIHRoaXMgbmFtZS5cbiAqXG4gKi9cblxuIC8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgZm9ybVxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERpcmVjdGl2ZSB0aGF0IGluc3RhbnRpYXRlc1xuICoge0BsaW5rIGZvcm0uRm9ybUNvbnRyb2xsZXIgRm9ybUNvbnRyb2xsZXJ9LlxuICpcbiAqIElmIHRoZSBgbmFtZWAgYXR0cmlidXRlIGlzIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciBpcyBwdWJsaXNoZWQgb250byB0aGUgY3VycmVudCBzY29wZSB1bmRlclxuICogdGhpcyBuYW1lLlxuICpcbiAqICMjIEFsaWFzOiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nRm9ybSBgbmdGb3JtYH1cbiAqXG4gKiBJbiBBbmd1bGFySlMsIGZvcm1zIGNhbiBiZSBuZXN0ZWQuIFRoaXMgbWVhbnMgdGhhdCB0aGUgb3V0ZXIgZm9ybSBpcyB2YWxpZCB3aGVuIGFsbCBvZiB0aGUgY2hpbGRcbiAqIGZvcm1zIGFyZSB2YWxpZCBhcyB3ZWxsLiBIb3dldmVyLCBicm93c2VycyBkbyBub3QgYWxsb3cgbmVzdGluZyBvZiBgPGZvcm0+YCBlbGVtZW50cywgc29cbiAqIEFuZ3VsYXJKUyBwcm92aWRlcyB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0Zvcm0gYG5nRm9ybWB9IGRpcmVjdGl2ZSwgd2hpY2ggYmVoYXZlcyBpZGVudGljYWxseSB0b1xuICogYGZvcm1gIGJ1dCBjYW4gYmUgbmVzdGVkLiBOZXN0ZWQgZm9ybXMgY2FuIGJlIHVzZWZ1bCwgZm9yIGV4YW1wbGUsIGlmIHRoZSB2YWxpZGl0eSBvZiBhIHN1Yi1ncm91cFxuICogb2YgY29udHJvbHMgbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZC5cbiAqXG4gKiAjIyBDU1MgY2xhc3Nlc1xuICogIC0gYG5nLXZhbGlkYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgdmFsaWQuXG4gKiAgLSBgbmctaW52YWxpZGAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIGludmFsaWQuXG4gKiAgLSBgbmctcGVuZGluZ2AgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIHBlbmRpbmcuXG4gKiAgLSBgbmctcHJpc3RpbmVgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBwcmlzdGluZS5cbiAqICAtIGBuZy1kaXJ0eWAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIGRpcnR5LlxuICogIC0gYG5nLXN1Ym1pdHRlZGAgaXMgc2V0IGlmIHRoZSBmb3JtIHdhcyBzdWJtaXR0ZWQuXG4gKlxuICogS2VlcCBpbiBtaW5kIHRoYXQgbmdBbmltYXRlIGNhbiBkZXRlY3QgZWFjaCBvZiB0aGVzZSBjbGFzc2VzIHdoZW4gYWRkZWQgYW5kIHJlbW92ZWQuXG4gKlxuICpcbiAqICMjIFN1Ym1pdHRpbmcgYSBmb3JtIGFuZCBwcmV2ZW50aW5nIHRoZSBkZWZhdWx0IGFjdGlvblxuICpcbiAqIFNpbmNlIHRoZSByb2xlIG9mIGZvcm1zIGluIGNsaWVudC1zaWRlIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbnMgaXMgZGlmZmVyZW50IHRoYW4gaW4gY2xhc3NpY2FsXG4gKiByb3VuZHRyaXAgYXBwcywgaXQgaXMgZGVzaXJhYmxlIGZvciB0aGUgYnJvd3NlciBub3QgdG8gdHJhbnNsYXRlIHRoZSBmb3JtIHN1Ym1pc3Npb24gaW50byBhIGZ1bGxcbiAqIHBhZ2UgcmVsb2FkIHRoYXQgc2VuZHMgdGhlIGRhdGEgdG8gdGhlIHNlcnZlci4gSW5zdGVhZCBzb21lIGphdmFzY3JpcHQgbG9naWMgc2hvdWxkIGJlIHRyaWdnZXJlZFxuICogdG8gaGFuZGxlIHRoZSBmb3JtIHN1Ym1pc3Npb24gaW4gYW4gYXBwbGljYXRpb24tc3BlY2lmaWMgd2F5LlxuICpcbiAqIEZvciB0aGlzIHJlYXNvbiwgQW5ndWxhckpTIHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbiAoZm9ybSBzdWJtaXNzaW9uIHRvIHRoZSBzZXJ2ZXIpIHVubGVzcyB0aGVcbiAqIGA8Zm9ybT5gIGVsZW1lbnQgaGFzIGFuIGBhY3Rpb25gIGF0dHJpYnV0ZSBzcGVjaWZpZWQuXG4gKlxuICogWW91IGNhbiB1c2Ugb25lIG9mIHRoZSBmb2xsb3dpbmcgdHdvIHdheXMgdG8gc3BlY2lmeSB3aGF0IGphdmFzY3JpcHQgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlblxuICogYSBmb3JtIGlzIHN1Ym1pdHRlZDpcbiAqXG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgbmdTdWJtaXR9IGRpcmVjdGl2ZSBvbiB0aGUgZm9ybSBlbGVtZW50XG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSBkaXJlY3RpdmUgb24gdGhlIGZpcnN0XG4gICogIGJ1dHRvbiBvciBpbnB1dCBmaWVsZCBvZiB0eXBlIHN1Ym1pdCAoaW5wdXRbdHlwZT1zdWJtaXRdKVxuICpcbiAqIFRvIHByZXZlbnQgZG91YmxlIGV4ZWN1dGlvbiBvZiB0aGUgaGFuZGxlciwgdXNlIG9ubHkgb25lIG9mIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU3VibWl0IG5nU3VibWl0fVxuICogb3Ige0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9IGRpcmVjdGl2ZXMuXG4gKiBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIGZvbGxvd2luZyBmb3JtIHN1Ym1pc3Npb24gcnVsZXMgaW4gdGhlIEhUTUwgc3BlY2lmaWNhdGlvbjpcbiAqXG4gKiAtIElmIGEgZm9ybSBoYXMgb25seSBvbmUgaW5wdXQgZmllbGQgdGhlbiBoaXR0aW5nIGVudGVyIGluIHRoaXMgZmllbGQgdHJpZ2dlcnMgZm9ybSBzdWJtaXRcbiAqIChgbmdTdWJtaXRgKVxuICogLSBpZiBhIGZvcm0gaGFzIDIrIGlucHV0IGZpZWxkcyBhbmQgbm8gYnV0dG9ucyBvciBpbnB1dFt0eXBlPXN1Ym1pdF0gdGhlbiBoaXR0aW5nIGVudGVyXG4gKiBkb2Vzbid0IHRyaWdnZXIgc3VibWl0XG4gKiAtIGlmIGEgZm9ybSBoYXMgb25lIG9yIG1vcmUgaW5wdXQgZmllbGRzIGFuZCBvbmUgb3IgbW9yZSBidXR0b25zIG9yIGlucHV0W3R5cGU9c3VibWl0XSB0aGVuXG4gKiBoaXR0aW5nIGVudGVyIGluIGFueSBvZiB0aGUgaW5wdXQgZmllbGRzIHdpbGwgdHJpZ2dlciB0aGUgY2xpY2sgaGFuZGxlciBvbiB0aGUgKmZpcnN0KiBidXR0b24gb3JcbiAqIGlucHV0W3R5cGU9c3VibWl0XSAoYG5nQ2xpY2tgKSAqYW5kKiBhIHN1Ym1pdCBoYW5kbGVyIG9uIHRoZSBlbmNsb3NpbmcgZm9ybSAoYG5nU3VibWl0YClcbiAqXG4gKiBBbnkgcGVuZGluZyBgbmdNb2RlbE9wdGlvbnNgIGNoYW5nZXMgd2lsbCB0YWtlIHBsYWNlIGltbWVkaWF0ZWx5IHdoZW4gYW4gZW5jbG9zaW5nIGZvcm0gaXNcbiAqIHN1Ym1pdHRlZC4gTm90ZSB0aGF0IGBuZ0NsaWNrYCBldmVudHMgd2lsbCBvY2N1ciBiZWZvcmUgdGhlIG1vZGVsIGlzIHVwZGF0ZWQuIFVzZSBgbmdTdWJtaXRgXG4gKiB0byBoYXZlIGFjY2VzcyB0byB0aGUgdXBkYXRlZCBtb2RlbC5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogQW5pbWF0aW9ucyBpbiBuZ0Zvcm0gYXJlIHRyaWdnZXJlZCB3aGVuIGFueSBvZiB0aGUgYXNzb2NpYXRlZCBDU1MgY2xhc3NlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWQuXG4gKiBUaGVzZSBjbGFzc2VzIGFyZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLCBgLm5nLWludmFsaWRgIGFuZCBgLm5nLXZhbGlkYCBhcyB3ZWxsIGFzIGFueVxuICogb3RoZXIgdmFsaWRhdGlvbnMgdGhhdCBhcmUgcGVyZm9ybWVkIHdpdGhpbiB0aGUgZm9ybS4gQW5pbWF0aW9ucyBpbiBuZ0Zvcm0gYXJlIHNpbWlsYXIgdG8gaG93XG4gKiB0aGV5IHdvcmsgaW4gbmdDbGFzcyBhbmQgYW5pbWF0aW9ucyBjYW4gYmUgaG9va2VkIGludG8gdXNpbmcgQ1NTIHRyYW5zaXRpb25zLCBrZXlmcmFtZXMgYXMgd2VsbFxuICogYXMgSlMgYW5pbWF0aW9ucy5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgYSBzaW1wbGUgd2F5IHRvIHV0aWxpemUgQ1NTIHRyYW5zaXRpb25zIHRvIHN0eWxlIGEgZm9ybSBlbGVtZW50XG4gKiB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIGFzIGludmFsaWQgYWZ0ZXIgaXQgaGFzIGJlZW4gdmFsaWRhdGVkOlxuICpcbiAqIDxwcmU+XG4gKiAvL2JlIHN1cmUgdG8gaW5jbHVkZSBuZ0FuaW1hdGUgYXMgYSBtb2R1bGUgdG8gaG9vayBpbnRvIG1vcmVcbiAqIC8vYWR2YW5jZWQgYW5pbWF0aW9uc1xuICogLm15LWZvcm0ge1xuICogICB0cmFuc2l0aW9uOjAuNXMgbGluZWFyIGFsbDtcbiAqICAgYmFja2dyb3VuZDogd2hpdGU7XG4gKiB9XG4gKiAubXktZm9ybS5uZy1pbnZhbGlkIHtcbiAqICAgYmFja2dyb3VuZDogcmVkO1xuICogICBjb2xvcjp3aGl0ZTtcbiAqIH1cbiAqIDwvcHJlPlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nLWZvcm1cIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiIG1vZHVsZT1cImZvcm1FeGFtcGxlXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZm9ybUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0Zvcm1Db250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUudXNlclR5cGUgPSAnZ3Vlc3QnO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPHN0eWxlPlxuICAgICAgICAubXktZm9ybSB7XG4gICAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLm15LWZvcm0ubmctaW52YWxpZCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogcmVkO1xuICAgICAgICB9XG4gICAgICAgPC9zdHlsZT5cbiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkZvcm1Db250cm9sbGVyXCIgY2xhc3M9XCJteS1mb3JtXCI+XG4gICAgICAgICB1c2VyVHlwZTogPGlucHV0IG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwidXNlclR5cGVcIiByZXF1aXJlZD5cbiAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlJlcXVpcmVkITwvc3Bhbj48YnI+XG4gICAgICAgICA8Y29kZT51c2VyVHlwZSA9IHt7dXNlclR5cGV9fTwvY29kZT48YnI+XG4gICAgICAgICA8Y29kZT5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L2NvZGU+PGJyPlxuICAgICAgICAgPGNvZGU+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC9jb2RlPjxicj5cbiAgICAgICAgIDxjb2RlPm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvY29kZT48YnI+XG4gICAgICAgICA8Y29kZT5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvY29kZT48YnI+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHVzZXJUeXBlID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyVHlwZScpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2d1ZXN0Jyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB1c2VyVHlwZSA9IGVsZW1lbnQoYnkuYmluZGluZygndXNlclR5cGUnKSk7XG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgICAgIHZhciB1c2VySW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyVHlwZScpKTtcblxuICAgICAgICAgIHVzZXJJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJJbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0VxdWFsKCd1c2VyVHlwZSA9Jyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCBpbnRvXG4gKiAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZCBzY29wZSwgdW5kZXIgdGhpcyBuYW1lLlxuICovXG52YXIgZm9ybURpcmVjdGl2ZUZhY3RvcnkgPSBmdW5jdGlvbihpc05nRm9ybSkge1xuICByZXR1cm4gWyckdGltZW91dCcsICckcGFyc2UnLCBmdW5jdGlvbigkdGltZW91dCwgJHBhcnNlKSB7XG4gICAgdmFyIGZvcm1EaXJlY3RpdmUgPSB7XG4gICAgICBuYW1lOiAnZm9ybScsXG4gICAgICByZXN0cmljdDogaXNOZ0Zvcm0gPyAnRUFDJyA6ICdFJyxcbiAgICAgIHJlcXVpcmU6IFsnZm9ybScsICdeXj9mb3JtJ10sIC8vZmlyc3QgaXMgdGhlIGZvcm0ncyBvd24gY3RybCwgc2Vjb25kIGlzIGFuIG9wdGlvbmFsIHBhcmVudCBmb3JtXG4gICAgICBjb250cm9sbGVyOiBGb3JtQ29udHJvbGxlcixcbiAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nRm9ybUNvbXBpbGUoZm9ybUVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgLy8gU2V0dXAgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgY29udHJvbFxuICAgICAgICBmb3JtRWxlbWVudC5hZGRDbGFzcyhQUklTVElORV9DTEFTUykuYWRkQ2xhc3MoVkFMSURfQ0xBU1MpO1xuXG4gICAgICAgIHZhciBuYW1lQXR0ciA9IGF0dHIubmFtZSA/ICduYW1lJyA6IChpc05nRm9ybSAmJiBhdHRyLm5nRm9ybSA/ICduZ0Zvcm0nIDogZmFsc2UpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcHJlOiBmdW5jdGlvbiBuZ0Zvcm1QcmVMaW5rKHNjb3BlLCBmb3JtRWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gY3RybHNbMF07XG5cbiAgICAgICAgICAgIC8vIGlmIGBhY3Rpb25gIGF0dHIgaXMgbm90IHByZXNlbnQgb24gdGhlIGZvcm0sIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uIChzdWJtaXNzaW9uKVxuICAgICAgICAgICAgaWYgKCEoJ2FjdGlvbicgaW4gYXR0cikpIHtcbiAgICAgICAgICAgICAgLy8gd2UgY2FuJ3QgdXNlIGpxIGV2ZW50cyBiZWNhdXNlIGlmIGEgZm9ybSBpcyBkZXN0cm95ZWQgZHVyaW5nIHN1Ym1pc3Npb24gdGhlIGRlZmF1bHRcbiAgICAgICAgICAgICAgLy8gYWN0aW9uIGlzIG5vdCBwcmV2ZW50ZWQuIHNlZSAjMTIzOFxuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAvLyBJRSA5IGlzIG5vdCBhZmZlY3RlZCBiZWNhdXNlIGl0IGRvZXNuJ3QgZmlyZSBhIHN1Ym1pdCBldmVudCBhbmQgdHJ5IHRvIGRvIGEgZnVsbFxuICAgICAgICAgICAgICAvLyBwYWdlIHJlbG9hZCBpZiB0aGUgZm9ybSB3YXMgZGVzdHJveWVkIGJ5IHN1Ym1pc3Npb24gb2YgdGhlIGZvcm0gdmlhIGEgY2xpY2sgaGFuZGxlclxuICAgICAgICAgICAgICAvLyBvbiBhIGJ1dHRvbiBpbiB0aGUgZm9ybS4gTG9va3MgbGlrZSBhbiBJRTkgc3BlY2lmaWMgYnVnLlxuICAgICAgICAgICAgICB2YXIgaGFuZGxlRm9ybVN1Ym1pc3Npb24gPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0U3VibWl0dGVkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUZvcm1TdWJtaXNzaW9uKTtcblxuICAgICAgICAgICAgICAvLyB1bnJlZ2lzdGVyIHRoZSBwcmV2ZW50RGVmYXVsdCBsaXN0ZW5lciBzbyB0aGF0IHdlIGRvbid0IG5vdCBsZWFrIG1lbW9yeSBidXQgaW4gYVxuICAgICAgICAgICAgICAvLyB3YXkgdGhhdCB3aWxsIGFjaGlldmUgdGhlIHByZXZlbnRpb24gb2YgdGhlIGRlZmF1bHQgYWN0aW9uLlxuICAgICAgICAgICAgICBmb3JtRWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIGZvcm1FbGVtZW50WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUZvcm1TdWJtaXNzaW9uKTtcbiAgICAgICAgICAgICAgICB9LCAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcGFyZW50Rm9ybUN0cmwgPSBjdHJsc1sxXSB8fCBjb250cm9sbGVyLiQkcGFyZW50Rm9ybTtcbiAgICAgICAgICAgIHBhcmVudEZvcm1DdHJsLiRhZGRDb250cm9sKGNvbnRyb2xsZXIpO1xuXG4gICAgICAgICAgICB2YXIgc2V0dGVyID0gbmFtZUF0dHIgPyBnZXRTZXR0ZXIoY29udHJvbGxlci4kbmFtZSkgOiBub29wO1xuXG4gICAgICAgICAgICBpZiAobmFtZUF0dHIpIHtcbiAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgYXR0ci4kb2JzZXJ2ZShuYW1lQXR0ciwgZnVuY3Rpb24obmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlci4kbmFtZSA9PT0gbmV3VmFsdWUpIHJldHVybjtcbiAgICAgICAgICAgICAgICBzZXR0ZXIoc2NvcGUsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci4kJHBhcmVudEZvcm0uJCRyZW5hbWVDb250cm9sKGNvbnRyb2xsZXIsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICBzZXR0ZXIgPSBnZXRTZXR0ZXIoY29udHJvbGxlci4kbmFtZSk7XG4gICAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JtRWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci4kJHBhcmVudEZvcm0uJHJlbW92ZUNvbnRyb2woY29udHJvbGxlcik7XG4gICAgICAgICAgICAgIHNldHRlcihzY29wZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgZXh0ZW5kKGNvbnRyb2xsZXIsIG51bGxGb3JtQ3RybCk7IC8vc3RvcCBwcm9wYWdhdGluZyBjaGlsZCBkZXN0cnVjdGlvbiBoYW5kbGVycyB1cHdhcmRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBmb3JtRGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gZ2V0U2V0dGVyKGV4cHJlc3Npb24pIHtcbiAgICAgIGlmIChleHByZXNzaW9uID09PSAnJykge1xuICAgICAgICAvL2NyZWF0ZSBhbiBhc3NpZ25hYmxlIGV4cHJlc3Npb24sIHNvIGZvcm1zIHdpdGggYW4gZW1wdHkgbmFtZSBjYW4gYmUgcmVuYW1lZCBsYXRlclxuICAgICAgICByZXR1cm4gJHBhcnNlKCd0aGlzW1wiXCJdJykuYXNzaWduO1xuICAgICAgfVxuICAgICAgcmV0dXJuICRwYXJzZShleHByZXNzaW9uKS5hc3NpZ24gfHwgbm9vcDtcbiAgICB9XG4gIH1dO1xufTtcblxudmFyIGZvcm1EaXJlY3RpdmUgPSBmb3JtRGlyZWN0aXZlRmFjdG9yeSgpO1xudmFyIG5nRm9ybURpcmVjdGl2ZSA9IGZvcm1EaXJlY3RpdmVGYWN0b3J5KHRydWUpO1xuXG5cblxuLy8gaGVscGVyIG1ldGhvZHNcbmZ1bmN0aW9uIHNldHVwVmFsaWRpdHkoaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UuJCRjbGFzc0NhY2hlID0ge307XG4gIGluc3RhbmNlLiQkY2xhc3NDYWNoZVtJTlZBTElEX0NMQVNTXSA9ICEoaW5zdGFuY2UuJCRjbGFzc0NhY2hlW1ZBTElEX0NMQVNTXSA9IGluc3RhbmNlLiQkZWxlbWVudC5oYXNDbGFzcyhWQUxJRF9DTEFTUykpO1xufVxuZnVuY3Rpb24gYWRkU2V0VmFsaWRpdHlNZXRob2QoY29udGV4dCkge1xuICB2YXIgY2xhenogPSBjb250ZXh0LmNsYXp6LFxuICAgICAgc2V0ID0gY29udGV4dC5zZXQsXG4gICAgICB1bnNldCA9IGNvbnRleHQudW5zZXQ7XG5cbiAgY2xhenoucHJvdG90eXBlLiRzZXRWYWxpZGl0eSA9IGZ1bmN0aW9uKHZhbGlkYXRpb25FcnJvcktleSwgc3RhdGUsIGNvbnRyb2xsZXIpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQoc3RhdGUpKSB7XG4gICAgICBjcmVhdGVBbmRTZXQodGhpcywgJyRwZW5kaW5nJywgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5zZXRBbmRDbGVhbnVwKHRoaXMsICckcGVuZGluZycsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgfVxuICAgIGlmICghaXNCb29sZWFuKHN0YXRlKSkge1xuICAgICAgdW5zZXQodGhpcy4kZXJyb3IsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgICB1bnNldCh0aGlzLiQkc3VjY2VzcywgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgIHVuc2V0KHRoaXMuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgICBzZXQodGhpcy4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXQodGhpcy4kZXJyb3IsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgICAgIHVuc2V0KHRoaXMuJCRzdWNjZXNzLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy4kcGVuZGluZykge1xuICAgICAgY2FjaGVkVG9nZ2xlQ2xhc3ModGhpcywgUEVORElOR19DTEFTUywgdHJ1ZSk7XG4gICAgICB0aGlzLiR2YWxpZCA9IHRoaXMuJGludmFsaWQgPSB1bmRlZmluZWQ7XG4gICAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKHRoaXMsICcnLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FjaGVkVG9nZ2xlQ2xhc3ModGhpcywgUEVORElOR19DTEFTUywgZmFsc2UpO1xuICAgICAgdGhpcy4kdmFsaWQgPSBpc09iamVjdEVtcHR5KHRoaXMuJGVycm9yKTtcbiAgICAgIHRoaXMuJGludmFsaWQgPSAhdGhpcy4kdmFsaWQ7XG4gICAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKHRoaXMsICcnLCB0aGlzLiR2YWxpZCk7XG4gICAgfVxuXG4gICAgLy8gcmUtcmVhZCB0aGUgc3RhdGUgYXMgdGhlIHNldC91bnNldCBtZXRob2RzIGNvdWxkIGhhdmVcbiAgICAvLyBjb21iaW5lZCBzdGF0ZSBpbiB0aGlzLiRlcnJvclt2YWxpZGF0aW9uRXJyb3JdICh1c2VkIGZvciBmb3JtcyksXG4gICAgLy8gd2hlcmUgc2V0dGluZy91bnNldHRpbmcgb25seSBpbmNyZW1lbnRzL2RlY3JlbWVudHMgdGhlIHZhbHVlLFxuICAgIC8vIGFuZCBkb2VzIG5vdCByZXBsYWNlIGl0LlxuICAgIHZhciBjb21iaW5lZFN0YXRlO1xuICAgIGlmICh0aGlzLiRwZW5kaW5nICYmIHRoaXMuJHBlbmRpbmdbdmFsaWRhdGlvbkVycm9yS2V5XSkge1xuICAgICAgY29tYmluZWRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuJGVycm9yW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuJCRzdWNjZXNzW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb21iaW5lZFN0YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKHRoaXMsIHZhbGlkYXRpb25FcnJvcktleSwgY29tYmluZWRTdGF0ZSk7XG4gICAgdGhpcy4kJHBhcmVudEZvcm0uJHNldFZhbGlkaXR5KHZhbGlkYXRpb25FcnJvcktleSwgY29tYmluZWRTdGF0ZSwgdGhpcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlQW5kU2V0KGN0cmwsIG5hbWUsIHZhbHVlLCBjb250cm9sbGVyKSB7XG4gICAgaWYgKCFjdHJsW25hbWVdKSB7XG4gICAgICBjdHJsW25hbWVdID0ge307XG4gICAgfVxuICAgIHNldChjdHJsW25hbWVdLCB2YWx1ZSwgY29udHJvbGxlcik7XG4gIH1cblxuICBmdW5jdGlvbiB1bnNldEFuZENsZWFudXAoY3RybCwgbmFtZSwgdmFsdWUsIGNvbnRyb2xsZXIpIHtcbiAgICBpZiAoY3RybFtuYW1lXSkge1xuICAgICAgdW5zZXQoY3RybFtuYW1lXSwgdmFsdWUsIGNvbnRyb2xsZXIpO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3RFbXB0eShjdHJsW25hbWVdKSkge1xuICAgICAgY3RybFtuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYWNoZWRUb2dnbGVDbGFzcyhjdHJsLCBjbGFzc05hbWUsIHN3aXRjaFZhbHVlKSB7XG4gICAgaWYgKHN3aXRjaFZhbHVlICYmICFjdHJsLiQkY2xhc3NDYWNoZVtjbGFzc05hbWVdKSB7XG4gICAgICBjdHJsLiQkYW5pbWF0ZS5hZGRDbGFzcyhjdHJsLiQkZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgIGN0cmwuJCRjbGFzc0NhY2hlW2NsYXNzTmFtZV0gPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXN3aXRjaFZhbHVlICYmIGN0cmwuJCRjbGFzc0NhY2hlW2NsYXNzTmFtZV0pIHtcbiAgICAgIGN0cmwuJCRhbmltYXRlLnJlbW92ZUNsYXNzKGN0cmwuJCRlbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgY3RybC4kJGNsYXNzQ2FjaGVbY2xhc3NOYW1lXSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZVZhbGlkYXRpb25Dc3MoY3RybCwgdmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkKSB7XG4gICAgdmFsaWRhdGlvbkVycm9yS2V5ID0gdmFsaWRhdGlvbkVycm9yS2V5ID8gJy0nICsgc25ha2VfY2FzZSh2YWxpZGF0aW9uRXJyb3JLZXksICctJykgOiAnJztcblxuICAgIGNhY2hlZFRvZ2dsZUNsYXNzKGN0cmwsIFZBTElEX0NMQVNTICsgdmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkID09PSB0cnVlKTtcbiAgICBjYWNoZWRUb2dnbGVDbGFzcyhjdHJsLCBJTlZBTElEX0NMQVNTICsgdmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkID09PSBmYWxzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNPYmplY3RFbXB0eShvYmopIHtcbiAgaWYgKG9iaikge1xuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qIGdsb2JhbFxuICBWQUxJRF9DTEFTUzogZmFsc2UsXG4gIElOVkFMSURfQ0xBU1M6IGZhbHNlLFxuICBQUklTVElORV9DTEFTUzogZmFsc2UsXG4gIERJUlRZX0NMQVNTOiBmYWxzZSxcbiAgbmdNb2RlbE1pbkVycjogZmFsc2VcbiovXG5cbi8vIFJlZ2V4IGNvZGUgd2FzIGluaXRpYWxseSBvYnRhaW5lZCBmcm9tIFNPIHByaW9yIHRvIG1vZGlmaWNhdGlvbjogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzE0MzA3MC9qYXZhc2NyaXB0LXJlZ2V4LWlzby1kYXRldGltZSNhbnN3ZXItMzE0MzIzMVxudmFyIElTT19EQVRFX1JFR0VYUCA9IC9eXFxkezQsfS1bMDFdXFxkLVswLTNdXFxkVFswLTJdXFxkOlswLTVdXFxkOlswLTVdXFxkXFwuXFxkKyg/OlsrLV1bMC0yXVxcZDpbMC01XVxcZHxaKSQvO1xuLy8gU2VlIHZhbGlkIFVSTHMgaW4gUkZDMzk4NyAoaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4Nylcbi8vIE5vdGU6IFdlIGFyZSBiZWluZyBtb3JlIGxlbmllbnQsIGJlY2F1c2UgYnJvd3NlcnMgYXJlIHRvby5cbi8vICAgMS4gU2NoZW1lXG4vLyAgIDIuIFNsYXNoZXNcbi8vICAgMy4gVXNlcm5hbWVcbi8vICAgNC4gUGFzc3dvcmRcbi8vICAgNS4gSG9zdG5hbWVcbi8vICAgNi4gUG9ydFxuLy8gICA3LiBQYXRoXG4vLyAgIDguIFF1ZXJ5XG4vLyAgIDkuIEZyYWdtZW50XG4vLyAgICAgICAgICAgICAgICAgMTExMTExMTExMTExMTExMSAyMjIgICAzMzMzMzMgICAgNDQ0NDQgICAgICAgIDU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1ICAgICA2NjYgICAgIDc3Nzc3Nzc3ICAgICA4ODg4ODg4ICAgICA5OTlcbnZhciBVUkxfUkVHRVhQID0gL15bYS16XVthLXpcXGQuKy1dKjpcXC8qKD86W146QF0rKD86OlteQF0rKT9AKT8oPzpbXlxcczovPyNdK3xcXFtbYS1mXFxkOl0rXSkoPzo6XFxkKyk/KD86XFwvW14/I10qKT8oPzpcXD9bXiNdKik/KD86Iy4qKT8kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxudmFyIEVNQUlMX1JFR0VYUCA9IC9eKD89LnsxLDI1NH0kKSg/PS57MSw2NH1AKVstISMkJSYnKisvMC05PT9BLVpeX2BhLXp7fH1+XSsoXFwuWy0hIyQlJicqKy8wLTk9P0EtWl5fYGEtent8fX5dKykqQFtBLVphLXowLTldKFtBLVphLXowLTktXXswLDYxfVtBLVphLXowLTldKT8oXFwuW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dezAsNjF9W0EtWmEtejAtOV0pPykqJC87XG52YXIgTlVNQkVSX1JFR0VYUCA9IC9eXFxzKigtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKShbZUVdWystXT9cXGQrKT9cXHMqJC87XG52YXIgREFURV9SRUdFWFAgPSAvXihcXGR7NCx9KS0oXFxkezJ9KS0oXFxkezJ9KSQvO1xudmFyIERBVEVUSU1FTE9DQUxfUkVHRVhQID0gL14oXFxkezQsfSktKFxcZFxcZCktKFxcZFxcZClUKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC87XG52YXIgV0VFS19SRUdFWFAgPSAvXihcXGR7NCx9KS1XKFxcZFxcZCkkLztcbnZhciBNT05USF9SRUdFWFAgPSAvXihcXGR7NCx9KS0oXFxkXFxkKSQvO1xudmFyIFRJTUVfUkVHRVhQID0gL14oXFxkXFxkKTooXFxkXFxkKSg/OjooXFxkXFxkKShcXC5cXGR7MSwzfSk/KT8kLztcblxudmFyIFBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMgPSAna2V5ZG93biB3aGVlbCBtb3VzZWRvd24nO1xudmFyIFBBUlRJQUxfVkFMSURBVElPTl9UWVBFUyA9IGNyZWF0ZU1hcCgpO1xuZm9yRWFjaCgnZGF0ZSxkYXRldGltZS1sb2NhbCxtb250aCx0aW1lLHdlZWsnLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHR5cGUpIHtcbiAgUEFSVElBTF9WQUxJREFUSU9OX1RZUEVTW3R5cGVdID0gdHJ1ZTtcbn0pO1xuXG52YXIgaW5wdXRUeXBlID0ge1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbdGV4dF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN0YW5kYXJkIEhUTUwgdGV4dCBpbnB1dCB3aXRoIEFuZ3VsYXJKUyBkYXRhIGJpbmRpbmcsIGluaGVyaXRlZCBieSBtb3N0IG9mIHRoZSBgaW5wdXRgIGVsZW1lbnRzLlxuICAgKlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cFxuICAgKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gICAqICAgICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gICAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gICAqICAgIGFjY291bnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IFtuZ1RyaW09dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlIEFuZ3VsYXJKUyB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxuICAgKiAgICBUaGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkIGZvciBpbnB1dFt0eXBlPXBhc3N3b3JkXSBjb250cm9scywgd2hpY2ggd2lsbCBuZXZlciB0cmltIHRoZVxuICAgKiAgICBpbnB1dC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJ0ZXh0LWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInRleHRJbnB1dEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd0ZXh0SW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICAgICB0ZXh0OiAnZ3Vlc3QnLFxuICAgICAgICAgICAgICAgICB3b3JkOiAvXlxccypcXHcqXFxzKiQvXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICA8bGFiZWw+U2luZ2xlIHdvcmQ6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnRleHRcIlxuICAgICAgICAgICAgICAgICAgICBuZy1wYXR0ZXJuPVwiZXhhbXBsZS53b3JkXCIgcmVxdWlyZWQgbmctdHJpbT1cImZhbHNlXCI+XG4gICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnBhdHRlcm5cIj5cbiAgICAgICAgICAgICAgIFNpbmdsZSB3b3JkIG9ubHkhPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgPGNvZGU+dGV4dCA9IHt7ZXhhbXBsZS50ZXh0fX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgPGNvZGU+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxici8+XG4gICAgICAgICAgIDxjb2RlPm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvY29kZT48YnIvPlxuICAgICAgICAgICA8Y29kZT5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgPGNvZGU+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB0ZXh0ID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnRleHQnKSk7XG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2V4YW1wbGUudGV4dCcpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2d1ZXN0Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBtdWx0aSB3b3JkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2hlbGxvIHdvcmxkJyk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgPC9maWxlPlxuICAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ3RleHQnOiB0ZXh0SW5wdXRUeXBlLFxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIGlucHV0XG4gICAgICogQG5hbWUgaW5wdXRbZGF0ZV1cbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIElucHV0IHdpdGggZGF0ZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICAgKiB0aGUgSFRNTDUgZGF0ZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICAgKiBkYXRlIGZvcm1hdCAoeXl5eS1NTS1kZCksIGZvciBleGFtcGxlOiBgMjAwOS0wMS0wNmAuIFNpbmNlIG1hbnlcbiAgICAgKiBtb2Rlcm4gYnJvd3NlcnMgZG8gbm90IHlldCBzdXBwb3J0IHRoaXMgaW5wdXQgdHlwZSwgaXQgaXMgaW1wb3J0YW50IHRvIHByb3ZpZGUgY3VlcyB0byB1c2VycyBvbiB0aGVcbiAgICAgKiBleHBlY3RlZCBpbnB1dCBmb3JtYXQgdmlhIGEgcGxhY2Vob2xkZXIgb3IgbGFiZWwuXG4gICAgICpcbiAgICAgKiBUaGUgbW9kZWwgbXVzdCBhbHdheXMgYmUgYSBEYXRlIG9iamVjdCwgb3RoZXJ3aXNlIEFuZ3VsYXJKUyB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmUgYVxuICAgICAqICAgdmFsaWQgSVNPIGRhdGUgc3RyaW5nICh5eXl5LU1NLWRkKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAqICAgKGUuZy4gYG1pbj1cInt7bWluRGF0ZSB8IGRhdGU6J3l5eXktTU0tZGQnfX1cImApLiBOb3RlIHRoYXQgYG1pbmAgd2lsbCBhbHNvIGFkZCBuYXRpdmUgSFRNTDVcbiAgICAgKiAgIGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuIFRoaXMgbXVzdCBiZVxuICAgICAqICAgYSB2YWxpZCBJU08gZGF0ZSBzdHJpbmcgKHl5eXktTU0tZGQpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXMgYXR0cmlidXRlXG4gICAgICogICAoZS5nLiBgbWF4PVwie3ttYXhEYXRlIHwgZGF0ZToneXl5eS1NTS1kZCd9fVwiYCkuIE5vdGUgdGhhdCBgbWF4YCB3aWxsIGFsc28gYWRkIG5hdGl2ZSBIVE1MNVxuICAgICAqICAgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyBkYXRlIHN0cmluZ1xuICAgICAqICAgdGhlIGBuZ01pbmAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8uIE5vdGUgdGhhdCBpdCBkb2VzIG5vdCBzZXQgdGhlIGBtaW5gIGF0dHJpYnV0ZS5cbiAgICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gZGF0ZSBzdHJpbmdcbiAgICAgKiAgIHRoZSBgbmdNYXhgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWF4YCBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgPGV4YW1wbGUgbmFtZT1cImRhdGUtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiZGF0ZUlucHV0RXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2RhdGVJbnB1dEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZSgyMDEzLCA5LCAyMilcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XG4gICAgICAgICAgPGxhYmVsIGZvcj1cImV4YW1wbGVJbnB1dFwiPlBpY2sgYSBkYXRlIGluIDIwMTM6PC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGVcIiBpZD1cImV4YW1wbGVJbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwieXl5eS1NTS1kZFwiIG1pbj1cIjIwMTMtMDEtMDFcIiBtYXg9XCIyMDEzLTEyLTMxXCIgcmVxdWlyZWQgLz5cbiAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLmRhdGVcIj5cbiAgICAgICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFwifX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICA8L2Zvcm0+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRcIicpKTtcbiAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuXG4gICAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcbiAgICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXG4gICAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLTEwLTIyJyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNldElucHV0KCcyMDE1LTAxLTAxJyk7XG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gICAgICovXG4gICdkYXRlJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnZGF0ZScsIERBVEVfUkVHRVhQLFxuICAgICAgICAgY3JlYXRlRGF0ZVBhcnNlcihEQVRFX1JFR0VYUCwgWyd5eXl5JywgJ01NJywgJ2RkJ10pLFxuICAgICAgICAgJ3l5eXktTU0tZGQnKSxcblxuICAgLyoqXG4gICAgKiBAbmdkb2MgaW5wdXRcbiAgICAqIEBuYW1lIGlucHV0W2RhdGV0aW1lLWxvY2FsXVxuICAgICpcbiAgICAqIEBkZXNjcmlwdGlvblxuICAgICogSW5wdXQgd2l0aCBkYXRldGltZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICAqIHRoZSBIVE1MNSBkYXRlIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICAqIGxvY2FsIGRhdGV0aW1lIGZvcm1hdCAoeXl5eS1NTS1kZFRISDptbTpzcyksIGZvciBleGFtcGxlOiBgMjAxMC0xMi0yOFQxNDo1NzowMGAuXG4gICAgKlxuICAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICAqXG4gICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgKlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyBkYXRldGltZSBmb3JtYXQgKHl5eXktTU0tZGRUSEg6bW06c3MpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb25cbiAgICAqICAgaW5zaWRlIHRoaXMgYXR0cmlidXRlIChlLmcuIGBtaW49XCJ7e21pbkRhdGV0aW1lTG9jYWwgfCBkYXRlOid5eXl5LU1NLWRkVEhIOm1tOnNzJ319XCJgKS5cbiAgICAqICAgTm90ZSB0aGF0IGBtaW5gIHdpbGwgYWxzbyBhZGQgbmF0aXZlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC5cbiAgICAqICAgVGhpcyBtdXN0IGJlIGEgdmFsaWQgSVNPIGRhdGV0aW1lIGZvcm1hdCAoeXl5eS1NTS1kZFRISDptbTpzcykuIFlvdSBjYW4gYWxzbyB1c2UgaW50ZXJwb2xhdGlvblxuICAgICogICBpbnNpZGUgdGhpcyBhdHRyaWJ1dGUgKGUuZy4gYG1heD1cInt7bWF4RGF0ZXRpbWVMb2NhbCB8IGRhdGU6J3l5eXktTU0tZGRUSEg6bW06c3MnfX1cImApLlxuICAgICogICBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZCBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgICogQHBhcmFtIHsoZGF0ZXxzdHJpbmcpPX0gbmdNaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgdG8gdGhlIERhdGUgLyBJU08gZGF0ZXRpbWUgc3RyaW5nXG4gICAgKiAgIHRoZSBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSB0byB0aGUgRGF0ZSAvIElTTyBkYXRldGltZSBzdHJpbmdcbiAgICAqICAgdGhlIGBuZ01heGAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8uIE5vdGUgdGhhdCBpdCBkb2VzIG5vdCBzZXQgdGhlIGBtYXhgIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAgKlxuICAgICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwiZGF0ZXRpbWVsb2NhbC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJkYXRlRXhhbXBsZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8c2NyaXB0PlxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZGF0ZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XG4gICAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZSgyMDEwLCAxMSwgMjgsIDE0LCA1NylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfV0pO1xuICAgICAgPC9zY3JpcHQ+XG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XG4gICAgICAgIDxsYWJlbCBmb3I9XCJleGFtcGxlSW5wdXRcIj5QaWNrIGEgZGF0ZSBiZXR3ZWVuIGluIDIwMTM6PC9sYWJlbD5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRldGltZS1sb2NhbFwiIGlkPVwiZXhhbXBsZUlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnZhbHVlXCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwieXl5eS1NTS1kZFRISDptbTpzc1wiIG1pbj1cIjIwMDEtMDEtMDFUMDA6MDA6MDBcIiBtYXg9XCIyMDEzLTEyLTMxVDAwOjAwOjAwXCIgcmVxdWlyZWQgLz5cbiAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5kYXRldGltZWxvY2FsXCI+XG4gICAgICAgICAgICAgIE5vdCBhIHZhbGlkIGRhdGUhPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCJ9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRUSEg6bW06c3NcIicpKTtcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcblxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEwLTEyLTI4VDE0OjU3OjAwJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcyMDE1LTAxLTAxVDIzOjU5OjAwJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICAgICovXG4gICdkYXRldGltZS1sb2NhbCc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ2RhdGV0aW1lbG9jYWwnLCBEQVRFVElNRUxPQ0FMX1JFR0VYUCxcbiAgICAgIGNyZWF0ZURhdGVQYXJzZXIoREFURVRJTUVMT0NBTF9SRUdFWFAsIFsneXl5eScsICdNTScsICdkZCcsICdISCcsICdtbScsICdzcycsICdzc3MnXSksXG4gICAgICAneXl5eS1NTS1kZFRISDptbTpzcy5zc3MnKSxcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3RpbWVdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBJbnB1dCB3aXRoIHRpbWUgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XG4gICAqIHRoZSBIVE1MNSB0aW1lIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICogbG9jYWwgdGltZSBmb3JtYXQgKEhIOm1tOnNzKSwgZm9yIGV4YW1wbGU6IGAxNDo1NzowMGAuIE1vZGVsIG11c3QgYmUgYSBEYXRlIG9iamVjdC4gVGhpcyBiaW5kaW5nIHdpbGwgYWx3YXlzIG91dHB1dCBhXG4gICAqIERhdGUgb2JqZWN0IHRvIHRoZSBtb2RlbCBvZiBKYW51YXJ5IDEsIDE5NzAsIG9yIGxvY2FsIGRhdGUgYG5ldyBEYXRlKDE5NzAsIDAsIDEsIEhILCBtbSwgc3MpYC5cbiAgICpcbiAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogSW52YWxpZCBgRGF0ZWAgb2JqZWN0cyAoZGF0ZXMgd2hvc2UgYGdldFRpbWUoKWAgaXMgYE5hTmApIHdpbGwgYmUgcmVuZGVyZWQgYXMgYW4gZW1wdHkgc3RyaW5nLlxuICAgKlxuICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxuICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICogICBhdHRyaWJ1dGUgKGUuZy4gYG1pbj1cInt7bWluVGltZSB8IGRhdGU6J0hIOm1tOnNzJ319XCJgKS4gTm90ZSB0aGF0IGBtaW5gIHdpbGwgYWxzbyBhZGRcbiAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAqICAgVGhpcyBtdXN0IGJlIGEgdmFsaWQgSVNPIHRpbWUgZm9ybWF0IChISDptbTpzcykuIFlvdSBjYW4gYWxzbyB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhpc1xuICAgKiAgIGF0dHJpYnV0ZSAoZS5nLiBgbWF4PVwie3ttYXhUaW1lIHwgZGF0ZTonSEg6bW06c3MnfX1cImApLiBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZFxuICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB0aW1lIHN0cmluZyB0aGVcbiAgICogICBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB0aW1lIHN0cmluZyB0aGVcbiAgICogICBgbmdNYXhgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWF4YCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cInRpbWUtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwidGltZUV4YW1wbGVcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgIDxzY3JpcHQ+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgndGltZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZSgxOTcwLCAwLCAxLCAxNCwgNTcsIDApXG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgICA8L3NjcmlwdD5cbiAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgICA8bGFiZWwgZm9yPVwiZXhhbXBsZUlucHV0XCI+UGljayBhIHRpbWUgYmV0d2VlbiA4YW0gYW5kIDVwbTo8L2xhYmVsPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRpbWVcIiBpZD1cImV4YW1wbGVJbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkhIOm1tOnNzXCIgbWluPVwiMDg6MDA6MDBcIiBtYXg9XCIxNzowMDowMFwiIHJlcXVpcmVkIC8+XG4gICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudGltZVwiPlxuICAgICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwiSEg6bW06c3NcIn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgIDwvZm9ybT5cbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwiSEg6bW06c3NcIicpKTtcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcblxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcxNDo1NzowMCcpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcnKTtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnMjM6NTk6MDAnKTtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ3RpbWUnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCd0aW1lJywgVElNRV9SRUdFWFAsXG4gICAgICBjcmVhdGVEYXRlUGFyc2VyKFRJTUVfUkVHRVhQLCBbJ0hIJywgJ21tJywgJ3NzJywgJ3NzcyddKSxcbiAgICAgJ0hIOm1tOnNzLnNzcycpLFxuXG4gICAvKipcbiAgICAqIEBuZ2RvYyBpbnB1dFxuICAgICogQG5hbWUgaW5wdXRbd2Vla11cbiAgICAqXG4gICAgKiBAZGVzY3JpcHRpb25cbiAgICAqIElucHV0IHdpdGggd2Vlay1vZi10aGUteWVhciB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbiB0byBEYXRlLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxuICAgICogdGhlIEhUTUw1IHdlZWsgaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0aGUgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxuICAgICogd2VlayBmb3JtYXQgKHl5eXktVyMjKSwgZm9yIGV4YW1wbGU6IGAyMDEzLVcwMmAuXG4gICAgKlxuICAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICAqXG4gICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgKlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICAqICAgYXR0cmlidXRlIChlLmcuIGBtaW49XCJ7e21pbldlZWsgfCBkYXRlOid5eXl5LVd3dyd9fVwiYCkuIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkXG4gICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICAqICAgYXR0cmlidXRlIChlLmcuIGBtYXg9XCJ7e21heFdlZWsgfCBkYXRlOid5eXl5LVd3dyd9fVwiYCkuIE5vdGUgdGhhdCBgbWF4YCB3aWxsIGFsc28gYWRkXG4gICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gd2VlayBzdHJpbmdcbiAgICAqICAgdGhlIGBuZ01pbmAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8uIE5vdGUgdGhhdCBpdCBkb2VzIG5vdCBzZXQgdGhlIGBtaW5gIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgICogICB0aGUgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAqXG4gICAgKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJ3ZWVrLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIndlZWtFeGFtcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQ+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnd2Vla0V4YW1wbGUnLCBbXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZSgyMDEzLCAwLCAzKVxuICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcbiAgICAgIDwvc2NyaXB0PlxuICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgICA8bGFiZWw+UGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOlxuICAgICAgICAgIDxpbnB1dCBpZD1cImV4YW1wbGVJbnB1dFwiIHR5cGU9XCJ3ZWVrXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnZhbHVlXCJcbiAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJZWVlZLVcjI1wiIG1pbj1cIjIwMTItVzMyXCJcbiAgICAgICAgICAgICAgICAgbWF4PVwiMjAxMy1XNTJcIiByZXF1aXJlZCAvPlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLndlZWtcIj5cbiAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCJ9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCInKSk7XG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy1XMDEnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIwMTUtVzAxJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICAgICovXG4gICd3ZWVrJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnd2VlaycsIFdFRUtfUkVHRVhQLCB3ZWVrUGFyc2VyLCAneXl5eS1Xd3cnKSxcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W21vbnRoXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSW5wdXQgd2l0aCBtb250aCB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICogdGhlIEhUTUw1IG1vbnRoIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICogbW9udGggZm9ybWF0ICh5eXl5LU1NKSwgZm9yIGV4YW1wbGU6IGAyMDA5LTAxYC5cbiAgICpcbiAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogSW52YWxpZCBgRGF0ZWAgb2JqZWN0cyAoZGF0ZXMgd2hvc2UgYGdldFRpbWUoKWAgaXMgYE5hTmApIHdpbGwgYmUgcmVuZGVyZWQgYXMgYW4gZW1wdHkgc3RyaW5nLlxuICAgKiBJZiB0aGUgbW9kZWwgaXMgbm90IHNldCB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLCB0aGUgbmV4dCB2aWV3IHRvIG1vZGVsIHVwZGF0ZSB3aWxsIHNldCBpdFxuICAgKiB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLlxuICAgKlxuICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxuICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyBtb250aCBmb3JtYXQgKHl5eXktTU0pLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICogICBhdHRyaWJ1dGUgKGUuZy4gYG1pbj1cInt7bWluTW9udGggfCBkYXRlOid5eXl5LU1NJ319XCJgKS4gTm90ZSB0aGF0IGBtaW5gIHdpbGwgYWxzbyBhZGRcbiAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAqICAgVGhpcyBtdXN0IGJlIGEgdmFsaWQgSVNPIG1vbnRoIGZvcm1hdCAoeXl5eS1NTSkuIFlvdSBjYW4gYWxzbyB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhpc1xuICAgKiAgIGF0dHJpYnV0ZSAoZS5nLiBgbWF4PVwie3ttYXhNb250aCB8IGRhdGU6J3l5eXktTU0nfX1cImApLiBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZFxuICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgKiAgIHRoZSBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgKiAgIHRoZSBgbmdNYXhgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWF4YCBhdHRyaWJ1dGUuXG5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibW9udGgtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwibW9udGhFeGFtcGxlXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8c2NyaXB0PlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ21vbnRoRXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTMsIDksIDEpXG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgICA8L3NjcmlwdD5cbiAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgIDxsYWJlbCBmb3I9XCJleGFtcGxlSW5wdXRcIj5QaWNrIGEgbW9udGggaW4gMjAxMzo8L2xhYmVsPlxuICAgICAgIDxpbnB1dCBpZD1cImV4YW1wbGVJbnB1dFwiIHR5cGU9XCJtb250aFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NXCIgbWluPVwiMjAxMy0wMVwiIG1heD1cIjIwMTMtMTJcIiByZXF1aXJlZCAvPlxuICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5tb250aFwiPlxuICAgICAgICAgICAgTm90IGEgdmFsaWQgbW9udGghPC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTVwifX08L3R0Pjxici8+XG4gICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICA8L2Zvcm0+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU1cIicpKTtcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcblxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLTEwJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcyMDE1LTAxJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdtb250aCc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ21vbnRoJywgTU9OVEhfUkVHRVhQLFxuICAgICBjcmVhdGVEYXRlUGFyc2VyKE1PTlRIX1JFR0VYUCwgWyd5eXl5JywgJ01NJ10pLFxuICAgICAneXl5eS1NTScpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbbnVtYmVyXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIG51bWJlciB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gU2V0cyB0aGUgYG51bWJlcmAgdmFsaWRhdGlvblxuICAgKiBlcnJvciBpZiBub3QgYSB2YWxpZCBudW1iZXIuXG4gICAqXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBvZiB0eXBlIGBudW1iZXJgIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogQmUgYXdhcmUgdGhhdCBhIHN0cmluZyBjb250YWluaW5nIGEgbnVtYmVyIGlzIG5vdCBlbm91Z2guIFNlZSB0aGUge0BsaW5rIG5nTW9kZWw6bnVtZm10fVxuICAgKiBlcnJvciBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBhbiBleGFtcGxlIG9mIGhvdyB0byBjb252ZXJ0IHlvdXIgbW9kZWwgaWYgbmVjZXNzYXJ5LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogIyMgSXNzdWVzIHdpdGggSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uXG4gICAqXG4gICAqIEluIGJyb3dzZXJzIHRoYXQgZm9sbG93IHRoZVxuICAgKiBbSFRNTDUgc3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNudW1iZXItc3RhdGUtJTI4dHlwZT1udW1iZXIlMjkpLFxuICAgKiBgaW5wdXRbbnVtYmVyXWAgZG9lcyBub3Qgd29yayBhcyBleHBlY3RlZCB3aXRoIHtAbGluayBuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnMuYWxsb3dJbnZhbGlkYH0uXG4gICAqIElmIGEgbm9uLW51bWJlciBpcyBlbnRlcmVkIGluIHRoZSBpbnB1dCwgdGhlIGJyb3dzZXIgd2lsbCByZXBvcnQgdGhlIHZhbHVlIGFzIGFuIGVtcHR5IHN0cmluZyxcbiAgICogd2hpY2ggbWVhbnMgdGhlIHZpZXcgLyBtb2RlbCB2YWx1ZXMgaW4gYG5nTW9kZWxgIGFuZCBzdWJzZXF1ZW50bHkgdGhlIHNjb3BlIHZhbHVlXG4gICAqIHdpbGwgYWxzbyBiZSBhbiBlbXB0eSBzdHJpbmcuXG4gICAqXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cbiAgICogICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgKiAgICBDYW4gYmUgaW50ZXJwb2xhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nTWluIExpa2UgYG1pbmAsIHNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbmdNaW5gLFxuICAgKiAgICBidXQgZG9lcyBub3QgdHJpZ2dlciBIVE1MNSBuYXRpdmUgdmFsaWRhdGlvbi4gVGFrZXMgYW4gZXhwcmVzc2lvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ01heCBMaWtlIGBtYXhgLCBzZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG5nTWF4YCxcbiAgICogICAgYnV0IGRvZXMgbm90IHRyaWdnZXIgSFRNTDUgbmF0aXZlIHZhbGlkYXRpb24uIFRha2VzIGFuIGV4cHJlc3Npb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc3RlcCBTZXRzIHRoZSBgc3RlcGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgZG9lcyBub3QgZml0IHRoZSBgc3RlcGAgY29uc3RyYWludC5cbiAgICogICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1N0ZXAgTGlrZSBgc3RlcGAsIHNldHMgdGhlIGBzdGVwYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBkb2VzIG5vdCBmaXQgdGhlIGBuZ1N0ZXBgIGNvbnN0cmFpbnQsXG4gICAqICAgIGJ1dCBkb2VzIG5vdCB0cmlnZ2VyIEhUTUw1IG5hdGl2ZSB2YWxpZGF0aW9uLiBUYWtlcyBhbiBleHByZXNzaW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cFxuICAgKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gICAqICAgICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gICAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gICAqICAgIGFjY291bnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwibnVtYmVyLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIm51bWJlckV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICAgICB2YWx1ZTogMTJcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5OdW1iZXI6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCIgbWF4PVwiOTlcIiByZXF1aXJlZD5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5udW1iZXJcIj5cbiAgICAgICAgICAgICAgIE5vdCB2YWxpZCBudW1iZXIhPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZScpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG4gICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS52YWx1ZScpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcxMicpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnMTIzJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdudW1iZXInOiBudW1iZXJJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3VybF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRleHQgaW5wdXQgd2l0aCBVUkwgdmFsaWRhdGlvbi4gU2V0cyB0aGUgYHVybGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIGNvbnRlbnQgaXMgbm90IGFcbiAgICogdmFsaWQgVVJMLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAqKk5vdGU6KiogYGlucHV0W3VybF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSB1cmxzIHRoYXQgaXMgZGVyaXZlZCBmcm9tIHRoZSByZWdleFxuICAgKiB1c2VkIGluIENocm9taXVtLiBJZiB5b3UgbmVlZCBzdHJpY3RlciB2YWxpZGF0aW9uLCB5b3UgY2FuIHVzZSBgbmctcGF0dGVybmAgb3IgbW9kaWZ5XG4gICAqIHRoZSBidWlsdC1pbiB2YWxpZGF0b3JzIChzZWUgdGhlIHtAbGluayBndWlkZS9mb3JtcyBGb3JtcyBndWlkZX0pXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cFxuICAgKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gICAqICAgICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gICAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gICAqICAgIGFjY291bnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwidXJsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInVybEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd1cmxFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS51cmwgPSB7XG4gICAgICAgICAgICAgICAgIHRleHQ6ICdodHRwOi8vZ29vZ2xlLmNvbSdcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5VUkw6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ1cmxcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInVybC50ZXh0XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudXJsXCI+XG4gICAgICAgICAgICAgICBOb3QgdmFsaWQgdXJsITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3t1cmwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnVybCA9IHt7ISFteUZvcm0uJGVycm9yLnVybH19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VybC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1cmwudGV4dCcpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2h0dHA6Ly9nb29nbGUuY29tJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgdXJsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2JveCcpO1xuXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd1cmwnOiB1cmxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W2VtYWlsXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIGVtYWlsIHZhbGlkYXRpb24uIFNldHMgdGhlIGBlbWFpbGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgbm90IGEgdmFsaWQgZW1haWxcbiAgICogYWRkcmVzcy5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogKipOb3RlOioqIGBpbnB1dFtlbWFpbF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSBlbWFpbCBhZGRyZXNzZXMgdGhhdCBpcyBkZXJpdmVkIGZyb20gdGhlIHJlZ2V4XG4gICAqIHVzZWQgaW4gQ2hyb21pdW0uIElmIHlvdSBuZWVkIHN0cmljdGVyIHZhbGlkYXRpb24gKGUuZy4gcmVxdWlyaW5nIGEgdG9wLWxldmVsIGRvbWFpbiksIHlvdSBjYW5cbiAgICogdXNlIGBuZy1wYXR0ZXJuYCBvciBtb2RpZnkgdGhlIGJ1aWx0LWluIHZhbGlkYXRvcnMgKHNlZSB0aGUge0BsaW5rIGd1aWRlL2Zvcm1zIEZvcm1zIGd1aWRlfSlcbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICAgKiAgICBtaW5sZW5ndGguXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNYXhsZW5ndGggU2V0cyBgbWF4bGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbG9uZ2VyIHRoYW5cbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXG4gICAqICAgIGFueSBsZW5ndGguXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcGF0dGVybiBTaW1pbGFyIHRvIGBuZ1BhdHRlcm5gIGV4Y2VwdCB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgdGhlIGFjdHVhbCBzdHJpbmdcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgKiAgICBhcyBpbiB0aGUgbmdQYXR0ZXJuIGRpcmVjdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIG5nTW9kZWwge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSAkdmlld1ZhbHVlfVxuICAgKiAgICBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBSZWdFeHAgb2JqZWN0LCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwXG4gICAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gICAqICAgIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC48YnIgLz5cbiAgICogICAgKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAgICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAgICogICAgYWNjb3VudC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJlbWFpbC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJlbWFpbEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdlbWFpbEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsID0ge1xuICAgICAgICAgICAgICAgICB0ZXh0OiAnbWVAZXhhbXBsZS5jb20nXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgICAgPGxhYmVsPkVtYWlsOlxuICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJlbWFpbFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZW1haWwudGV4dFwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZW1haWxcIj5cbiAgICAgICAgICAgICAgICAgTm90IHZhbGlkIGVtYWlsITwvc3Bhbj5cbiAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICA8dHQ+dGV4dCA9IHt7ZW1haWwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5lbWFpbCA9IHt7ISFteUZvcm0uJGVycm9yLmVtYWlsfX08L3R0Pjxici8+XG4gICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB0ZXh0ID0gZWxlbWVudChieS5iaW5kaW5nKCdlbWFpbC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdlbWFpbC50ZXh0JykpO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignbWVAZXhhbXBsZS5jb20nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgZW1haWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygneHh4Jyk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgPC9maWxlPlxuICAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ2VtYWlsJzogZW1haWxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3JhZGlvXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSFRNTCByYWRpbyBidXR0b24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBgbmdNb2RlbGAgZXhwcmVzc2lvbiBzaG91bGQgYmUgc2V0IHdoZW4gc2VsZWN0ZWQuXG4gICAqICAgIE5vdGUgdGhhdCBgdmFsdWVgIG9ubHkgc3VwcG9ydHMgYHN0cmluZ2AgdmFsdWVzLCBpLmUuIHRoZSBzY29wZSBtb2RlbCBuZWVkcyB0byBiZSBhIHN0cmluZyxcbiAgICogICAgdG9vLiBVc2UgYG5nVmFsdWVgIGlmIHlvdSBuZWVkIGNvbXBsZXggbW9kZWxzIChgbnVtYmVyYCwgYG9iamVjdGAsIC4uLikuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nVmFsdWUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gd2hpY2ggYG5nTW9kZWxgIHdpbGwgYmUgYmUgc2V0IHdoZW4gdGhlIHJhZGlvXG4gICAqICAgIGlzIHNlbGVjdGVkLiBTaG91bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBgdmFsdWVgIGF0dHJpYnV0ZSBpZiB5b3UgbmVlZFxuICAgKiAgICBhIG5vbi1zdHJpbmcgYG5nTW9kZWxgIChgYm9vbGVhbmAsIGBhcnJheWAsIC4uLikuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwicmFkaW8taW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwicmFkaW9FeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgncmFkaW9FeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5jb2xvciA9IHtcbiAgICAgICAgICAgICAgICAgbmFtZTogJ2JsdWUnXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgJHNjb3BlLnNwZWNpYWxWYWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgXCJpZFwiOiBcIjEyMzQ1XCIsXG4gICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJncmVlblwiXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwiY29sb3IubmFtZVwiIHZhbHVlPVwicmVkXCI+XG4gICAgICAgICAgICAgUmVkXG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiBuZy12YWx1ZT1cInNwZWNpYWxWYWx1ZVwiPlxuICAgICAgICAgICAgIEdyZWVuXG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiB2YWx1ZT1cImJsdWVcIj5cbiAgICAgICAgICAgICBCbHVlXG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPHR0PmNvbG9yID0ge3tjb2xvci5uYW1lIHwganNvbn19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICBOb3RlIHRoYXQgYG5nLXZhbHVlPVwic3BlY2lhbFZhbHVlXCJgIHNldHMgcmFkaW8gaXRlbSdzIHZhbHVlIHRvIGJlIHRoZSB2YWx1ZSBvZiBgJHNjb3BlLnNwZWNpYWxWYWx1ZWAuXG4gICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHN0YXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRzID0gZWxlbWVudC5hbGwoYnkubW9kZWwoJ2NvbG9yLm5hbWUnKSk7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvbG9yLm5hbWUnKSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChjb2xvci5nZXRUZXh0KCkpLnRvQ29udGFpbignYmx1ZScpO1xuXG4gICAgICAgICAgICBpbnB1dHMuZ2V0KDApLmNsaWNrKCk7XG4gICAgICAgICAgICBleHBlY3QoY29sb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3JlZCcpO1xuXG4gICAgICAgICAgICBpbnB1dHMuZ2V0KDEpLmNsaWNrKCk7XG4gICAgICAgICAgICBleHBlY3QoY29sb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2dyZWVuJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdyYWRpbyc6IHJhZGlvSW5wdXRUeXBlLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbcmFuZ2VdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBOYXRpdmUgcmFuZ2UgaW5wdXQgd2l0aCB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi5cbiAgICpcbiAgICogVGhlIG1vZGVsIGZvciB0aGUgcmFuZ2UgaW5wdXQgbXVzdCBhbHdheXMgYmUgYSBgTnVtYmVyYC5cbiAgICpcbiAgICogSUU5IGFuZCBvdGhlciBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IHRoZSBgcmFuZ2VgIHR5cGUgZmFsbCBiYWNrXG4gICAqIHRvIGEgdGV4dCBpbnB1dCB3aXRob3V0IGFueSBkZWZhdWx0IHZhbHVlcyBmb3IgYG1pbmAsIGBtYXhgIGFuZCBgc3RlcGAuIE1vZGVsIGJpbmRpbmcsXG4gICAqIHZhbGlkYXRpb24gYW5kIG51bWJlciBwYXJzaW5nIGFyZSBuZXZlcnRoZWxlc3Mgc3VwcG9ydGVkLlxuICAgKlxuICAgKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgcmFuZ2UgKGxhdGVzdCBDaHJvbWUsIFNhZmFyaSwgRmlyZWZveCwgRWRnZSkgdHJlYXQgYGlucHV0W3JhbmdlXWBcbiAgICogaW4gYSB3YXkgdGhhdCBuZXZlciBhbGxvd3MgdGhlIGlucHV0IHRvIGhvbGQgYW4gaW52YWxpZCB2YWx1ZS4gVGhhdCBtZWFuczpcbiAgICogLSBhbnkgbm9uLW51bWVyaWNhbCB2YWx1ZSBpcyBzZXQgdG8gYChtYXggKyBtaW4pIC8gMmAuXG4gICAqIC0gYW55IG51bWVyaWNhbCB2YWx1ZSB0aGF0IGlzIGxlc3MgdGhhbiB0aGUgY3VycmVudCBtaW4gdmFsLCBvciBncmVhdGVyIHRoYW4gdGhlIGN1cnJlbnQgbWF4IHZhbFxuICAgKiBpcyBzZXQgdG8gdGhlIG1pbiAvIG1heCB2YWwgcmVzcGVjdGl2ZWx5LlxuICAgKiAtIGFkZGl0aW9uYWxseSwgdGhlIGN1cnJlbnQgYHN0ZXBgIGlzIHJlc3BlY3RlZCwgc28gdGhlIG5lYXJlc3QgdmFsdWUgdGhhdCBzYXRpc2ZpZXMgYSBzdGVwXG4gICAqIGlzIHVzZWQuXG4gICAqXG4gICAqIFNlZSB0aGUgW0hUTUwgU3BlYyBvbiBpbnB1dFt0eXBlPXJhbmdlXV0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjcmFuZ2Utc3RhdGUtKHR5cGU9cmFuZ2UpKVxuICAgKiBmb3IgbW9yZSBpbmZvLlxuICAgKlxuICAgKiBUaGlzIGhhcyB0aGUgZm9sbG93aW5nIGNvbnNlcXVlbmNlcyBmb3IgQW5ndWxhckpTOlxuICAgKlxuICAgKiBTaW5jZSB0aGUgZWxlbWVudCB2YWx1ZSBzaG91bGQgYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgbW9kZWwgdmFsdWUsIGEgcmFuZ2UgaW5wdXRcbiAgICogd2lsbCBzZXQgdGhlIGJvdW5kIG5nTW9kZWwgZXhwcmVzc2lvbiB0byB0aGUgdmFsdWUgdGhhdCB0aGUgYnJvd3NlciBoYXMgc2V0IGZvciB0aGVcbiAgICogaW5wdXQgZWxlbWVudC4gRm9yIGV4YW1wbGUsIGluIHRoZSBmb2xsb3dpbmcgaW5wdXQgYDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBuZy1tb2RlbD1cIm1vZGVsLnZhbHVlXCI+YCxcbiAgICogaWYgdGhlIGFwcGxpY2F0aW9uIHNldHMgYG1vZGVsLnZhbHVlID0gbnVsbGAsIHRoZSBicm93c2VyIHdpbGwgc2V0IHRoZSBpbnB1dCB0byBgJzUwJ2AuXG4gICAqIEFuZ3VsYXJKUyB3aWxsIHRoZW4gc2V0IHRoZSBtb2RlbCB0byBgNTBgLCB0byBwcmV2ZW50IGlucHV0IGFuZCBtb2RlbCB2YWx1ZSBiZWluZyBvdXQgb2Ygc3luYy5cbiAgICpcbiAgICogVGhhdCBtZWFucyB0aGUgbW9kZWwgZm9yIHJhbmdlIHdpbGwgaW1tZWRpYXRlbHkgYmUgc2V0IHRvIGA1MGAgYWZ0ZXIgYG5nTW9kZWxgIGhhcyBiZWVuXG4gICAqIGluaXRpYWxpemVkLiBJdCBhbHNvIG1lYW5zIGEgcmFuZ2UgaW5wdXQgY2FuIG5ldmVyIGhhdmUgdGhlIHJlcXVpcmVkIGVycm9yLlxuICAgKlxuICAgKiBUaGlzIGRvZXMgbm90IG9ubHkgYWZmZWN0IGNoYW5nZXMgdG8gdGhlIG1vZGVsIHZhbHVlLCBidXQgYWxzbyB0byB0aGUgdmFsdWVzIG9mIHRoZSBgbWluYCxcbiAgICogYG1heGAsIGFuZCBgc3RlcGAgYXR0cmlidXRlcy4gV2hlbiB0aGVzZSBjaGFuZ2UgaW4gYSB3YXkgdGhhdCB3aWxsIGNhdXNlIHRoZSBicm93c2VyIHRvIG1vZGlmeVxuICAgKiB0aGUgaW5wdXQgdmFsdWUsIEFuZ3VsYXJKUyB3aWxsIGFsc28gdXBkYXRlIHRoZSBtb2RlbCB2YWx1ZS5cbiAgICpcbiAgICogQXV0b21hdGljIHZhbHVlIGFkanVzdG1lbnQgYWxzbyBtZWFucyB0aGF0IGEgcmFuZ2UgaW5wdXQgZWxlbWVudCBjYW4gbmV2ZXIgaGF2ZSB0aGUgYHJlcXVpcmVkYCxcbiAgICogYG1pbmAsIG9yIGBtYXhgIGVycm9ycy5cbiAgICpcbiAgICogSG93ZXZlciwgYHN0ZXBgIGlzIGN1cnJlbnRseSBvbmx5IGZ1bGx5IGltcGxlbWVudGVkIGJ5IEZpcmVmb3guIE90aGVyIGJyb3dzZXJzIGhhdmUgcHJvYmxlbXNcbiAgICogd2hlbiB0aGUgc3RlcCB2YWx1ZSBjaGFuZ2VzIGR5bmFtaWNhbGx5IC0gdGhleSBkbyBub3QgYWRqdXN0IHRoZSBlbGVtZW50IHZhbHVlIGNvcnJlY3RseSwgYnV0XG4gICAqIGluc3RlYWQgbWF5IHNldCB0aGUgYHN0ZXBNaXNtYXRjaGAgZXJyb3IuIElmIHRoYXQncyB0aGUgY2FzZSwgdGhlIEFuZ3VsYXJKUyB3aWxsIHNldCB0aGUgYHN0ZXBgXG4gICAqIGVycm9yIG9uIHRoZSBpbnB1dCwgYW5kIHNldCB0aGUgbW9kZWwgdG8gYHVuZGVmaW5lZGAuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBgaW5wdXRbcmFuZ2VdYCBpcyBub3QgY29tcGF0aWJsZSB3aXRoYG5nTWF4YCwgYG5nTWluYCwgYW5kIGBuZ1N0ZXBgLCBiZWNhdXNlIHRoZXkgZG9cbiAgICogbm90IHNldCB0aGUgYG1pbmAgYW5kIGBtYXhgIGF0dHJpYnV0ZXMsIHdoaWNoIG1lYW5zIHRoYXQgdGhlIGJyb3dzZXIgd29uJ3QgYXV0b21hdGljYWxseSBhZGp1c3RcbiAgICogdGhlIGlucHV0IHZhbHVlIGJhc2VkIG9uIHRoZWlyIHZhbHVlcywgYW5kIHdpbGwgYWx3YXlzIGFzc3VtZSBtaW4gPSAwLCBtYXggPSAxMDAsIGFuZCBzdGVwID0gMS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9ICBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gdG8gZW5zdXJlIHRoYXQgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlclxuICAgKiAgICAgICAgICAgICAgICAgIHRoYW4gYG1pbmAuIENhbiBiZSBpbnRlcnBvbGF0ZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gdG8gZW5zdXJlIHRoYXQgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtYXhgLlxuICAgKiAgICAgICAgICAgICAgICAgIENhbiBiZSBpbnRlcnBvbGF0ZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc3RlcCBTZXRzIHRoZSBgc3RlcGAgdmFsaWRhdGlvbiB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgZW50ZXJlZCBtYXRjaGVzIHRoZSBgc3RlcGBcbiAgICogICAgICAgICAgICAgICAgICBDYW4gYmUgaW50ZXJwb2xhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIG5nTW9kZWwgdmFsdWUgY2hhbmdlcyBkdWVcbiAgICogICAgICAgICAgICAgICAgICB0byB1c2VyIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nQ2hlY2tlZCBJZiB0aGUgZXhwcmVzc2lvbiBpcyB0cnV0aHksIHRoZW4gdGhlIGBjaGVja2VkYCBhdHRyaWJ1dGUgd2lsbCBiZSBzZXQgb24gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuICoqTm90ZSoqIDogYG5nQ2hlY2tlZGAgc2hvdWxkIG5vdCBiZSB1c2VkIGFsb25nc2lkZSBgbmdNb2RlbGAuXG4gICAqICAgICAgICAgICAgICAgICAgICAgIENoZWNrb3V0IHtAbGluayBuZy5kaXJlY3RpdmU6bmdDaGVja2VkIG5nQ2hlY2tlZH0gZm9yIHVzYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgICAgPGV4YW1wbGUgbmFtZT1cInJhbmdlLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInJhbmdlRXhhbXBsZVwiPlxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgncmFuZ2VFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlID0gNzU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1pbiA9IDEwO1xuICAgICAgICAgICAgICAgICRzY29wZS5tYXggPSA5MDtcbiAgICAgICAgICAgICAgfV0pO1xuICAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cblxuICAgICAgICAgICAgTW9kZWwgYXMgcmFuZ2U6IDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBuYW1lPVwicmFuZ2VcIiBuZy1tb2RlbD1cInZhbHVlXCIgbWluPVwie3ttaW59fVwiICBtYXg9XCJ7e21heH19XCI+XG4gICAgICAgICAgICA8aHI+XG4gICAgICAgICAgICBNb2RlbCBhcyBudW1iZXI6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPjxicj5cbiAgICAgICAgICAgIE1pbjogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1pblwiPjxicj5cbiAgICAgICAgICAgIE1heDogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1heFwiPjxicj5cbiAgICAgICAgICAgIHZhbHVlID0gPGNvZGU+e3t2YWx1ZX19PC9jb2RlPjxici8+XG4gICAgICAgICAgICBteUZvcm0ucmFuZ2UuJHZhbGlkID0gPGNvZGU+e3tteUZvcm0ucmFuZ2UuJHZhbGlkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgIG15Rm9ybS5yYW5nZS4kZXJyb3IgPSA8Y29kZT57e215Rm9ybS5yYW5nZS4kZXJyb3J9fTwvY29kZT5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cblxuICAgKiAjIyBSYW5nZSBJbnB1dCB3aXRoIG5nTWluICYgbmdNYXggYXR0cmlidXRlc1xuXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwicmFuZ2UtaW5wdXQtZGlyZWN0aXZlLW5nXCIgbW9kdWxlPVwicmFuZ2VFeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdyYW5nZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmFsdWUgPSA3NTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWluID0gMTA7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1heCA9IDkwO1xuICAgICAgICAgICAgICB9XSk7XG4gICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICAgTW9kZWwgYXMgcmFuZ2U6IDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBuYW1lPVwicmFuZ2VcIiBuZy1tb2RlbD1cInZhbHVlXCIgbmctbWluPVwibWluXCIgbmctbWF4PVwibWF4XCI+XG4gICAgICAgICAgICA8aHI+XG4gICAgICAgICAgICBNb2RlbCBhcyBudW1iZXI6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPjxicj5cbiAgICAgICAgICAgIE1pbjogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1pblwiPjxicj5cbiAgICAgICAgICAgIE1heDogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1heFwiPjxicj5cbiAgICAgICAgICAgIHZhbHVlID0gPGNvZGU+e3t2YWx1ZX19PC9jb2RlPjxici8+XG4gICAgICAgICAgICBteUZvcm0ucmFuZ2UuJHZhbGlkID0gPGNvZGU+e3tteUZvcm0ucmFuZ2UuJHZhbGlkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgIG15Rm9ybS5yYW5nZS4kZXJyb3IgPSA8Y29kZT57e215Rm9ybS5yYW5nZS4kZXJyb3J9fTwvY29kZT5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cblxuICAgKi9cbiAgJ3JhbmdlJzogcmFuZ2VJbnB1dFR5cGUsXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBpbnB1dFxuICAgKiBAbmFtZSBpbnB1dFtjaGVja2JveF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEhUTUwgY2hlY2tib3guXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nVHJ1ZVZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgc2V0IHdoZW4gc2VsZWN0ZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nRmFsc2VWYWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIG5vdCBzZWxlY3RlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJjaGVja2JveC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJjaGVja2JveEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjaGVja2JveEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrYm94TW9kZWwgPSB7XG4gICAgICAgICAgICAgICAgdmFsdWUxIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTIgOiAnWUVTJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICA8bGFiZWw+VmFsdWUxOlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrYm94TW9kZWwudmFsdWUxXCI+XG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPGxhYmVsPlZhbHVlMjpcbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2JveE1vZGVsLnZhbHVlMlwiXG4gICAgICAgICAgICAgICAgICAgIG5nLXRydWUtdmFsdWU9XCInWUVTJ1wiIG5nLWZhbHNlLXZhbHVlPVwiJ05PJ1wiPlxuICAgICAgICAgICAgPC9sYWJlbD48YnIvPlxuICAgICAgICAgICA8dHQ+dmFsdWUxID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMX19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+dmFsdWUyID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMn19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2Ugc3RhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZTEgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NoZWNrYm94TW9kZWwudmFsdWUxJykpO1xuICAgICAgICAgICAgdmFyIHZhbHVlMiA9IGVsZW1lbnQoYnkuYmluZGluZygnY2hlY2tib3hNb2RlbC52YWx1ZTInKSk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTEuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1lFUycpO1xuXG4gICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2JveE1vZGVsLnZhbHVlMScpKS5jbGljaygpO1xuICAgICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tib3hNb2RlbC52YWx1ZTInKSkuY2xpY2soKTtcblxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMS5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ05PJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdjaGVja2JveCc6IGNoZWNrYm94SW5wdXRUeXBlLFxuXG4gICdoaWRkZW4nOiBub29wLFxuICAnYnV0dG9uJzogbm9vcCxcbiAgJ3N1Ym1pdCc6IG5vb3AsXG4gICdyZXNldCc6IG5vb3AsXG4gICdmaWxlJzogbm9vcFxufTtcblxuZnVuY3Rpb24gc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCkge1xuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgPyB2YWx1ZSA6IHZhbHVlLnRvU3RyaW5nKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0ZXh0SW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcbiAgc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCk7XG59XG5cbmZ1bmN0aW9uIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICB2YXIgdHlwZSA9IGxvd2VyY2FzZShlbGVtZW50WzBdLnR5cGUpO1xuXG4gIC8vIEluIGNvbXBvc2l0aW9uIG1vZGUsIHVzZXJzIGFyZSBzdGlsbCBpbnB1dHRpbmcgaW50ZXJtZWRpYXRlIHRleHQgYnVmZmVyLFxuICAvLyBob2xkIHRoZSBsaXN0ZW5lciB1bnRpbCBjb21wb3NpdGlvbiBpcyBkb25lLlxuICAvLyBNb3JlIGFib3V0IGNvbXBvc2l0aW9uIGV2ZW50czogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NvbXBvc2l0aW9uRXZlbnRcbiAgaWYgKCEkc25pZmZlci5hbmRyb2lkKSB7XG4gICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuXG4gICAgZWxlbWVudC5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGVsZW1lbnQub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdGltZW91dDtcblxuICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAkYnJvd3Nlci5kZWZlci5jYW5jZWwodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGNvbXBvc2luZykgcmV0dXJuO1xuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsKCksXG4gICAgICAgIGV2ZW50ID0gZXYgJiYgZXYudHlwZTtcblxuICAgIC8vIEJ5IGRlZmF1bHQgd2Ugd2lsbCB0cmltIHRoZSB2YWx1ZVxuICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgbmctdHJpbSBleGlzdHMgd2Ugd2lsbCBhdm9pZCB0cmltbWluZ1xuICAgIC8vIElmIGlucHV0IHR5cGUgaXMgJ3Bhc3N3b3JkJywgdGhlIHZhbHVlIGlzIG5ldmVyIHRyaW1tZWRcbiAgICBpZiAodHlwZSAhPT0gJ3Bhc3N3b3JkJyAmJiAoIWF0dHIubmdUcmltIHx8IGF0dHIubmdUcmltICE9PSAnZmFsc2UnKSkge1xuICAgICAgdmFsdWUgPSB0cmltKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBJZiBhIGNvbnRyb2wgaXMgc3VmZmVyaW5nIGZyb20gYmFkIGlucHV0IChkdWUgdG8gbmF0aXZlIHZhbGlkYXRvcnMpLCBicm93c2VycyBkaXNjYXJkIGl0c1xuICAgIC8vIHZhbHVlLCBzbyBpdCBtYXkgYmUgbmVjZXNzYXJ5IHRvIHJldmFsaWRhdGUgKGJ5IGNhbGxpbmcgJHNldFZpZXdWYWx1ZSBhZ2FpbikgZXZlbiBpZiB0aGVcbiAgICAvLyBjb250cm9sJ3MgdmFsdWUgaXMgdGhlIHNhbWUgZW1wdHkgdmFsdWUgdHdpY2UgaW4gYSByb3cuXG4gICAgaWYgKGN0cmwuJHZpZXdWYWx1ZSAhPT0gdmFsdWUgfHwgKHZhbHVlID09PSAnJyAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykpIHtcbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZSh2YWx1ZSwgZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvLyBpZiB0aGUgYnJvd3NlciBkb2VzIHN1cHBvcnQgXCJpbnB1dFwiIGV2ZW50LCB3ZSBhcmUgZmluZSAtIGV4Y2VwdCBvbiBJRTkgd2hpY2ggZG9lc24ndCBmaXJlIHRoZVxuICAvLyBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UsIGRlbGV0ZSBvciBjdXRcbiAgaWYgKCRzbmlmZmVyLmhhc0V2ZW50KCdpbnB1dCcpKSB7XG4gICAgZWxlbWVudC5vbignaW5wdXQnLCBsaXN0ZW5lcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRlZmVyTGlzdGVuZXIgPSBmdW5jdGlvbihldiwgaW5wdXQsIG9yaWdWYWx1ZSkge1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHRpbWVvdXQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWlucHV0IHx8IGlucHV0LnZhbHVlICE9PSBvcmlnVmFsdWUpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgLyoqIEB0aGlzICovIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZTtcblxuICAgICAgLy8gaWdub3JlXG4gICAgICAvLyAgICBjb21tYW5kICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgICAgICAgICAgIGFycm93c1xuICAgICAgaWYgKGtleSA9PT0gOTEgfHwgKDE1IDwga2V5ICYmIGtleSA8IDE5KSB8fCAoMzcgPD0ga2V5ICYmIGtleSA8PSA0MCkpIHJldHVybjtcblxuICAgICAgZGVmZXJMaXN0ZW5lcihldmVudCwgdGhpcywgdGhpcy52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBpZiB1c2VyIG1vZGlmaWVzIGlucHV0IHZhbHVlIHVzaW5nIGNvbnRleHQgbWVudSBpbiBJRSwgd2UgbmVlZCBcInBhc3RlXCIsIFwiY3V0XCIgYW5kIFwiZHJvcFwiIGV2ZW50cyB0byBjYXRjaCBpdFxuICAgIGlmICgkc25pZmZlci5oYXNFdmVudCgncGFzdGUnKSkge1xuICAgICAgZWxlbWVudC5vbigncGFzdGUgY3V0IGRyb3AnLCBkZWZlckxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB1c2VyIHBhc3RlIGludG8gaW5wdXQgdXNpbmcgbW91c2Ugb24gb2xkZXIgYnJvd3NlclxuICAvLyBvciBmb3JtIGF1dG9jb21wbGV0ZSBvbiBuZXdlciBicm93c2VyLCB3ZSBuZWVkIFwiY2hhbmdlXCIgZXZlbnQgdG8gY2F0Y2ggaXRcbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIC8vIFNvbWUgbmF0aXZlIGlucHV0IHR5cGVzIChkYXRlLWZhbWlseSkgaGF2ZSB0aGUgYWJpbGl0eSB0byBjaGFuZ2UgdmFsaWRpdHkgd2l0aG91dFxuICAvLyBmaXJpbmcgYW55IGlucHV0L2NoYW5nZSBldmVudHMuXG4gIC8vIEZvciB0aGVzZSBldmVudCB0eXBlcywgd2hlbiBuYXRpdmUgdmFsaWRhdG9ycyBhcmUgcHJlc2VudCBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIHR5cGUsXG4gIC8vIGNoZWNrIGZvciB2YWxpZGl0eSBjaGFuZ2VzIG9uIHZhcmlvdXMgRE9NIGV2ZW50cy5cbiAgaWYgKFBBUlRJQUxfVkFMSURBVElPTl9UWVBFU1t0eXBlXSAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyAmJiB0eXBlID09PSBhdHRyLnR5cGUpIHtcbiAgICBlbGVtZW50Lm9uKFBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbihldikge1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHZhciB2YWxpZGl0eSA9IHRoaXNbVkFMSURJVFlfU1RBVEVfUFJPUEVSVFldO1xuICAgICAgICB2YXIgb3JpZ0JhZElucHV0ID0gdmFsaWRpdHkuYmFkSW5wdXQ7XG4gICAgICAgIHZhciBvcmlnVHlwZU1pc21hdGNoID0gdmFsaWRpdHkudHlwZU1pc21hdGNoO1xuICAgICAgICB0aW1lb3V0ID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgaWYgKHZhbGlkaXR5LmJhZElucHV0ICE9PSBvcmlnQmFkSW5wdXQgfHwgdmFsaWRpdHkudHlwZU1pc21hdGNoICE9PSBvcmlnVHlwZU1pc21hdGNoKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihldik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFdvcmthcm91bmQgZm9yIEZpcmVmb3ggdmFsaWRhdGlvbiAjMTIxMDIuXG4gICAgdmFyIHZhbHVlID0gY3RybC4kaXNFbXB0eShjdHJsLiR2aWV3VmFsdWUpID8gJycgOiBjdHJsLiR2aWV3VmFsdWU7XG4gICAgaWYgKGVsZW1lbnQudmFsKCkgIT09IHZhbHVlKSB7XG4gICAgICBlbGVtZW50LnZhbCh2YWx1ZSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiB3ZWVrUGFyc2VyKGlzb1dlZWssIGV4aXN0aW5nRGF0ZSkge1xuICBpZiAoaXNEYXRlKGlzb1dlZWspKSB7XG4gICAgcmV0dXJuIGlzb1dlZWs7XG4gIH1cblxuICBpZiAoaXNTdHJpbmcoaXNvV2VlaykpIHtcbiAgICBXRUVLX1JFR0VYUC5sYXN0SW5kZXggPSAwO1xuICAgIHZhciBwYXJ0cyA9IFdFRUtfUkVHRVhQLmV4ZWMoaXNvV2Vlayk7XG4gICAgaWYgKHBhcnRzKSB7XG4gICAgICB2YXIgeWVhciA9ICtwYXJ0c1sxXSxcbiAgICAgICAgICB3ZWVrID0gK3BhcnRzWzJdLFxuICAgICAgICAgIGhvdXJzID0gMCxcbiAgICAgICAgICBtaW51dGVzID0gMCxcbiAgICAgICAgICBzZWNvbmRzID0gMCxcbiAgICAgICAgICBtaWxsaXNlY29uZHMgPSAwLFxuICAgICAgICAgIGZpcnN0VGh1cnMgPSBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKHllYXIpLFxuICAgICAgICAgIGFkZERheXMgPSAod2VlayAtIDEpICogNztcblxuICAgICAgaWYgKGV4aXN0aW5nRGF0ZSkge1xuICAgICAgICBob3VycyA9IGV4aXN0aW5nRGF0ZS5nZXRIb3VycygpO1xuICAgICAgICBtaW51dGVzID0gZXhpc3RpbmdEYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICAgIG1pbGxpc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsIGZpcnN0VGh1cnMuZ2V0RGF0ZSgpICsgYWRkRGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIE5hTjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihyZWdleHAsIG1hcHBpbmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlzbywgZGF0ZSkge1xuICAgIHZhciBwYXJ0cywgbWFwO1xuXG4gICAgaWYgKGlzRGF0ZShpc28pKSB7XG4gICAgICByZXR1cm4gaXNvO1xuICAgIH1cblxuICAgIGlmIChpc1N0cmluZyhpc28pKSB7XG4gICAgICAvLyBXaGVuIGEgZGF0ZSBpcyBKU09OJ2lmaWVkIHRvIHdyYXBzIGl0c2VsZiBpbnNpZGUgb2YgYW4gZXh0cmFcbiAgICAgIC8vIHNldCBvZiBkb3VibGUgcXVvdGVzLiBUaGlzIG1ha2VzIHRoZSBkYXRlIHBhcnNpbmcgY29kZSB1bmFibGVcbiAgICAgIC8vIHRvIG1hdGNoIHRoZSBkYXRlIHN0cmluZyBhbmQgcGFyc2UgaXQgYXMgYSBkYXRlLlxuICAgICAgaWYgKGlzby5jaGFyQXQoMCkgPT09ICdcIicgJiYgaXNvLmNoYXJBdChpc28ubGVuZ3RoIC0gMSkgPT09ICdcIicpIHtcbiAgICAgICAgaXNvID0gaXNvLnN1YnN0cmluZygxLCBpc28ubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoSVNPX0RBVEVfUkVHRVhQLnRlc3QoaXNvKSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoaXNvKTtcbiAgICAgIH1cbiAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSAwO1xuICAgICAgcGFydHMgPSByZWdleHAuZXhlYyhpc28pO1xuXG4gICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgcGFydHMuc2hpZnQoKTtcbiAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICBtYXAgPSB7XG4gICAgICAgICAgICB5eXl5OiBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICBNTTogZGF0ZS5nZXRNb250aCgpICsgMSxcbiAgICAgICAgICAgIGRkOiBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgICAgIEhIOiBkYXRlLmdldEhvdXJzKCksXG4gICAgICAgICAgICBtbTogZGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICAgICAgICBzczogZGF0ZS5nZXRTZWNvbmRzKCksXG4gICAgICAgICAgICBzc3M6IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMDAwXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXAgPSB7IHl5eXk6IDE5NzAsIE1NOiAxLCBkZDogMSwgSEg6IDAsIG1tOiAwLCBzczogMCwgc3NzOiAwIH07XG4gICAgICAgIH1cblxuICAgICAgICBmb3JFYWNoKHBhcnRzLCBmdW5jdGlvbihwYXJ0LCBpbmRleCkge1xuICAgICAgICAgIGlmIChpbmRleCA8IG1hcHBpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBtYXBbbWFwcGluZ1tpbmRleF1dID0gK3BhcnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG1hcC55eXl5LCBtYXAuTU0gLSAxLCBtYXAuZGQsIG1hcC5ISCwgbWFwLm1tLCBtYXAuc3MgfHwgMCwgbWFwLnNzcyAqIDEwMDAgfHwgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE5hTjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0ZUlucHV0VHlwZSh0eXBlLCByZWdleHAsIHBhcnNlRGF0ZSwgZm9ybWF0KSB7XG4gIHJldHVybiBmdW5jdGlvbiBkeW5hbWljRGF0ZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyLCAkZmlsdGVyKSB7XG4gICAgYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKTtcbiAgICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuICAgIHZhciB0aW1lem9uZSA9IGN0cmwgJiYgY3RybC4kb3B0aW9ucy5nZXRPcHRpb24oJ3RpbWV6b25lJyk7XG4gICAgdmFyIHByZXZpb3VzRGF0ZTtcblxuICAgIGN0cmwuJCRwYXJzZXJOYW1lID0gdHlwZTtcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChjdHJsLiRpc0VtcHR5KHZhbHVlKSkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAocmVnZXhwLnRlc3QodmFsdWUpKSB7XG4gICAgICAgIC8vIE5vdGU6IFdlIGNhbm5vdCByZWFkIGN0cmwuJG1vZGVsVmFsdWUsIGFzIHRoZXJlIG1pZ2h0IGJlIGEgZGlmZmVyZW50XG4gICAgICAgIC8vIHBhcnNlci9mb3JtYXR0ZXIgaW4gdGhlIHByb2Nlc3NpbmcgY2hhaW4gc28gdGhhdCB0aGUgbW9kZWxcbiAgICAgICAgLy8gY29udGFpbnMgc29tZSBkaWZmZXJlbnQgZGF0YSBmb3JtYXQhXG4gICAgICAgIHZhciBwYXJzZWREYXRlID0gcGFyc2VEYXRlKHZhbHVlLCBwcmV2aW91c0RhdGUpO1xuICAgICAgICBpZiAodGltZXpvbmUpIHtcbiAgICAgICAgICBwYXJzZWREYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChwYXJzZWREYXRlLCB0aW1lem9uZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZERhdGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0pO1xuXG4gICAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgJiYgIWlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmdNb2RlbE1pbkVycignZGF0ZWZtdCcsICdFeHBlY3RlZCBgezB9YCB0byBiZSBhIGRhdGUnLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNWYWxpZERhdGUodmFsdWUpKSB7XG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IHZhbHVlO1xuICAgICAgICBpZiAocHJldmlvdXNEYXRlICYmIHRpbWV6b25lKSB7XG4gICAgICAgICAgcHJldmlvdXNEYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChwcmV2aW91c0RhdGUsIHRpbWV6b25lLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJGZpbHRlcignZGF0ZScpKHZhbHVlLCBmb3JtYXQsIHRpbWV6b25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IG51bGw7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChpc0RlZmluZWQoYXR0ci5taW4pIHx8IGF0dHIubmdNaW4pIHtcbiAgICAgIHZhciBtaW5WYWw7XG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhaXNWYWxpZERhdGUodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1pblZhbCkgfHwgcGFyc2VEYXRlKHZhbHVlKSA+PSBtaW5WYWw7XG4gICAgICB9O1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWluJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIG1pblZhbCA9IHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKTtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChpc0RlZmluZWQoYXR0ci5tYXgpIHx8IGF0dHIubmdNYXgpIHtcbiAgICAgIHZhciBtYXhWYWw7XG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhaXNWYWxpZERhdGUodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgcGFyc2VEYXRlKHZhbHVlKSA8PSBtYXhWYWw7XG4gICAgICB9O1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIG1heFZhbCA9IHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKTtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVmFsaWREYXRlKHZhbHVlKSB7XG4gICAgICAvLyBJbnZhbGlkIERhdGU6IGdldFRpbWUoKSByZXR1cm5zIE5hTlxuICAgICAgcmV0dXJuIHZhbHVlICYmICEodmFsdWUuZ2V0VGltZSAmJiB2YWx1ZS5nZXRUaW1lKCkgIT09IHZhbHVlLmdldFRpbWUoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VPYnNlcnZlZERhdGVWYWx1ZSh2YWwpIHtcbiAgICAgIHJldHVybiBpc0RlZmluZWQodmFsKSAmJiAhaXNEYXRlKHZhbCkgPyBwYXJzZURhdGUodmFsKSB8fCB1bmRlZmluZWQgOiB2YWw7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgdmFyIG5vZGUgPSBlbGVtZW50WzBdO1xuICB2YXIgbmF0aXZlVmFsaWRhdGlvbiA9IGN0cmwuJCRoYXNOYXRpdmVWYWxpZGF0b3JzID0gaXNPYmplY3Qobm9kZS52YWxpZGl0eSk7XG4gIGlmIChuYXRpdmVWYWxpZGF0aW9uKSB7XG4gICAgY3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgdmFsaWRpdHkgPSBlbGVtZW50LnByb3AoVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkpIHx8IHt9O1xuICAgICAgcmV0dXJuIHZhbGlkaXR5LmJhZElucHV0IHx8IHZhbGlkaXR5LnR5cGVNaXNtYXRjaCA/IHVuZGVmaW5lZCA6IHZhbHVlO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIG51bWJlckZvcm1hdHRlclBhcnNlcihjdHJsKSB7XG4gIGN0cmwuJCRwYXJzZXJOYW1lID0gJ251bWJlcic7XG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChjdHJsLiRpc0VtcHR5KHZhbHVlKSkgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoTlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSkgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0pO1xuXG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICghY3RybC4kaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgIGlmICghaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5nTW9kZWxNaW5FcnIoJ251bWZtdCcsICdFeHBlY3RlZCBgezB9YCB0byBiZSBhIG51bWJlcicsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCkge1xuICBpZiAoaXNEZWZpbmVkKHZhbCkgJiYgIWlzTnVtYmVyKHZhbCkpIHtcbiAgICB2YWwgPSBwYXJzZUZsb2F0KHZhbCk7XG4gIH1cbiAgcmV0dXJuICFpc051bWJlck5hTih2YWwpID8gdmFsIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc051bWJlckludGVnZXIobnVtKSB7XG4gIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0NjM2NTM2L2hvdy10by1jaGVjay1pZi1hLXZhcmlhYmxlLWlzLWFuLWludGVnZXItaW4tamF2YXNjcmlwdCMxNDc5NDA2NlxuICAvLyAobWludXMgdGhlIGFzc3VtcHRpb24gdGhhdCBgbnVtYCBpcyBhIG51bWJlcilcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuICByZXR1cm4gKG51bSB8IDApID09PSBudW07XG59XG5cbmZ1bmN0aW9uIGNvdW50RGVjaW1hbHMobnVtKSB7XG4gIHZhciBudW1TdHJpbmcgPSBudW0udG9TdHJpbmcoKTtcbiAgdmFyIGRlY2ltYWxTeW1ib2xJbmRleCA9IG51bVN0cmluZy5pbmRleE9mKCcuJyk7XG5cbiAgaWYgKGRlY2ltYWxTeW1ib2xJbmRleCA9PT0gLTEpIHtcbiAgICBpZiAoLTEgPCBudW0gJiYgbnVtIDwgMSkge1xuICAgICAgLy8gSXQgbWF5IGJlIGluIHRoZSBleHBvbmVudGlhbCBub3RhdGlvbiBmb3JtYXQgKGAxZS1YYClcbiAgICAgIHZhciBtYXRjaCA9IC9lLShcXGQrKSQvLmV4ZWMobnVtU3RyaW5nKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIobWF0Y2hbMV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIG51bVN0cmluZy5sZW5ndGggLSBkZWNpbWFsU3ltYm9sSW5kZXggLSAxO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkRm9yU3RlcCh2aWV3VmFsdWUsIHN0ZXBCYXNlLCBzdGVwKSB7XG4gIC8vIEF0IHRoaXMgcG9pbnQgYHN0ZXBCYXNlYCBhbmQgYHN0ZXBgIGFyZSBleHBlY3RlZCB0byBiZSBub24tTmFOIHZhbHVlc1xuICAvLyBhbmQgYHZpZXdWYWx1ZWAgaXMgZXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBzdHJpbmdpZmllZCBudW1iZXIuXG4gIHZhciB2YWx1ZSA9IE51bWJlcih2aWV3VmFsdWUpO1xuXG4gIHZhciBpc05vbkludGVnZXJWYWx1ZSA9ICFpc051bWJlckludGVnZXIodmFsdWUpO1xuICB2YXIgaXNOb25JbnRlZ2VyU3RlcEJhc2UgPSAhaXNOdW1iZXJJbnRlZ2VyKHN0ZXBCYXNlKTtcbiAgdmFyIGlzTm9uSW50ZWdlclN0ZXAgPSAhaXNOdW1iZXJJbnRlZ2VyKHN0ZXApO1xuXG4gIC8vIER1ZSB0byBsaW1pdGF0aW9ucyBpbiBGbG9hdGluZyBQb2ludCBBcml0aG1ldGljIChlLmcuIGAwLjMgLSAwLjIgIT09IDAuMWAgb3JcbiAgLy8gYDAuNSAlIDAuMSAhPT0gMGApLCB3ZSBuZWVkIHRvIGNvbnZlcnQgYWxsIG51bWJlcnMgdG8gaW50ZWdlcnMuXG4gIGlmIChpc05vbkludGVnZXJWYWx1ZSB8fCBpc05vbkludGVnZXJTdGVwQmFzZSB8fCBpc05vbkludGVnZXJTdGVwKSB7XG4gICAgdmFyIHZhbHVlRGVjaW1hbHMgPSBpc05vbkludGVnZXJWYWx1ZSA/IGNvdW50RGVjaW1hbHModmFsdWUpIDogMDtcbiAgICB2YXIgc3RlcEJhc2VEZWNpbWFscyA9IGlzTm9uSW50ZWdlclN0ZXBCYXNlID8gY291bnREZWNpbWFscyhzdGVwQmFzZSkgOiAwO1xuICAgIHZhciBzdGVwRGVjaW1hbHMgPSBpc05vbkludGVnZXJTdGVwID8gY291bnREZWNpbWFscyhzdGVwKSA6IDA7XG5cbiAgICB2YXIgZGVjaW1hbENvdW50ID0gTWF0aC5tYXgodmFsdWVEZWNpbWFscywgc3RlcEJhc2VEZWNpbWFscywgc3RlcERlY2ltYWxzKTtcbiAgICB2YXIgbXVsdGlwbGllciA9IE1hdGgucG93KDEwLCBkZWNpbWFsQ291bnQpO1xuXG4gICAgdmFsdWUgPSB2YWx1ZSAqIG11bHRpcGxpZXI7XG4gICAgc3RlcEJhc2UgPSBzdGVwQmFzZSAqIG11bHRpcGxpZXI7XG4gICAgc3RlcCA9IHN0ZXAgKiBtdWx0aXBsaWVyO1xuXG4gICAgaWYgKGlzTm9uSW50ZWdlclZhbHVlKSB2YWx1ZSA9IE1hdGgucm91bmQodmFsdWUpO1xuICAgIGlmIChpc05vbkludGVnZXJTdGVwQmFzZSkgc3RlcEJhc2UgPSBNYXRoLnJvdW5kKHN0ZXBCYXNlKTtcbiAgICBpZiAoaXNOb25JbnRlZ2VyU3RlcCkgc3RlcCA9IE1hdGgucm91bmQoc3RlcCk7XG4gIH1cblxuICByZXR1cm4gKHZhbHVlIC0gc3RlcEJhc2UpICUgc3RlcCA9PT0gMDtcbn1cblxuZnVuY3Rpb24gbnVtYmVySW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKTtcbiAgbnVtYmVyRm9ybWF0dGVyUGFyc2VyKGN0cmwpO1xuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuXG4gIHZhciBtaW5WYWw7XG4gIHZhciBtYXhWYWw7XG5cbiAgaWYgKGlzRGVmaW5lZChhdHRyLm1pbikgfHwgYXR0ci5uZ01pbikge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWluID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHZhbHVlID49IG1pblZhbDtcbiAgICB9O1xuXG4gICAgYXR0ci4kb2JzZXJ2ZSgnbWluJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICBtaW5WYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChpc0RlZmluZWQoYXR0ci5tYXgpIHx8IGF0dHIubmdNYXgpIHtcbiAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgaXNVbmRlZmluZWQobWF4VmFsKSB8fCB2YWx1ZSA8PSBtYXhWYWw7XG4gICAgfTtcblxuICAgIGF0dHIuJG9ic2VydmUoJ21heCcsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgbWF4VmFsID0gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCk7XG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoaXNEZWZpbmVkKGF0dHIuc3RlcCkgfHwgYXR0ci5uZ1N0ZXApIHtcbiAgICB2YXIgc3RlcFZhbDtcbiAgICBjdHJsLiR2YWxpZGF0b3JzLnN0ZXAgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQoc3RlcFZhbCkgfHxcbiAgICAgICAgICAgICBpc1ZhbGlkRm9yU3RlcCh2aWV3VmFsdWUsIG1pblZhbCB8fCAwLCBzdGVwVmFsKTtcbiAgICB9O1xuXG4gICAgYXR0ci4kb2JzZXJ2ZSgnc3RlcCcsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgc3RlcFZhbCA9IHBhcnNlTnVtYmVyQXR0clZhbCh2YWwpO1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJhbmdlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKTtcbiAgbnVtYmVyRm9ybWF0dGVyUGFyc2VyKGN0cmwpO1xuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuXG4gIHZhciBzdXBwb3J0c1JhbmdlID0gY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMgJiYgZWxlbWVudFswXS50eXBlID09PSAncmFuZ2UnLFxuICAgICAgbWluVmFsID0gc3VwcG9ydHNSYW5nZSA/IDAgOiB1bmRlZmluZWQsXG4gICAgICBtYXhWYWwgPSBzdXBwb3J0c1JhbmdlID8gMTAwIDogdW5kZWZpbmVkLFxuICAgICAgc3RlcFZhbCA9IHN1cHBvcnRzUmFuZ2UgPyAxIDogdW5kZWZpbmVkLFxuICAgICAgdmFsaWRpdHkgPSBlbGVtZW50WzBdLnZhbGlkaXR5LFxuICAgICAgaGFzTWluQXR0ciA9IGlzRGVmaW5lZChhdHRyLm1pbiksXG4gICAgICBoYXNNYXhBdHRyID0gaXNEZWZpbmVkKGF0dHIubWF4KSxcbiAgICAgIGhhc1N0ZXBBdHRyID0gaXNEZWZpbmVkKGF0dHIuc3RlcCk7XG5cbiAgdmFyIG9yaWdpbmFsUmVuZGVyID0gY3RybC4kcmVuZGVyO1xuXG4gIGN0cmwuJHJlbmRlciA9IHN1cHBvcnRzUmFuZ2UgJiYgaXNEZWZpbmVkKHZhbGlkaXR5LnJhbmdlVW5kZXJmbG93KSAmJiBpc0RlZmluZWQodmFsaWRpdHkucmFuZ2VPdmVyZmxvdykgP1xuICAgIC8vQnJvd3NlcnMgdGhhdCBpbXBsZW1lbnQgcmFuZ2Ugd2lsbCBzZXQgdGhlc2UgdmFsdWVzIGF1dG9tYXRpY2FsbHksIGJ1dCByZWFkaW5nIHRoZSBhZGp1c3RlZCB2YWx1ZXMgYWZ0ZXJcbiAgICAvLyRyZW5kZXIgd291bGQgY2F1c2UgdGhlIG1pbiAvIG1heCB2YWxpZGF0b3JzIHRvIGJlIGFwcGxpZWQgd2l0aCB0aGUgd3JvbmcgdmFsdWVcbiAgICBmdW5jdGlvbiByYW5nZVJlbmRlcigpIHtcbiAgICAgIG9yaWdpbmFsUmVuZGVyKCk7XG4gICAgICBjdHJsLiRzZXRWaWV3VmFsdWUoZWxlbWVudC52YWwoKSk7XG4gICAgfSA6XG4gICAgb3JpZ2luYWxSZW5kZXI7XG5cbiAgaWYgKGhhc01pbkF0dHIpIHtcbiAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbiA9IHN1cHBvcnRzUmFuZ2UgP1xuICAgICAgLy8gU2luY2UgYWxsIGJyb3dzZXJzIHNldCB0aGUgaW5wdXQgdG8gYSB2YWxpZCB2YWx1ZSwgd2UgZG9uJ3QgbmVlZCB0byBjaGVjayB2YWxpZGl0eVxuICAgICAgZnVuY3Rpb24gbm9vcE1pblZhbGlkYXRvcigpIHsgcmV0dXJuIHRydWU7IH0gOlxuICAgICAgLy8gbm9uLXN1cHBvcnQgYnJvd3NlcnMgdmFsaWRhdGUgdGhlIG1pbiB2YWxcbiAgICAgIGZ1bmN0aW9uIG1pblZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHZpZXdWYWx1ZSA+PSBtaW5WYWw7XG4gICAgICB9O1xuXG4gICAgc2V0SW5pdGlhbFZhbHVlQW5kT2JzZXJ2ZXIoJ21pbicsIG1pbkNoYW5nZSk7XG4gIH1cblxuICBpZiAoaGFzTWF4QXR0cikge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWF4ID0gc3VwcG9ydHNSYW5nZSA/XG4gICAgICAvLyBTaW5jZSBhbGwgYnJvd3NlcnMgc2V0IHRoZSBpbnB1dCB0byBhIHZhbGlkIHZhbHVlLCB3ZSBkb24ndCBuZWVkIHRvIGNoZWNrIHZhbGlkaXR5XG4gICAgICBmdW5jdGlvbiBub29wTWF4VmFsaWRhdG9yKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG4gICAgICAvLyBub24tc3VwcG9ydCBicm93c2VycyB2YWxpZGF0ZSB0aGUgbWF4IHZhbFxuICAgICAgZnVuY3Rpb24gbWF4VmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgdmlld1ZhbHVlIDw9IG1heFZhbDtcbiAgICAgIH07XG5cbiAgICBzZXRJbml0aWFsVmFsdWVBbmRPYnNlcnZlcignbWF4JywgbWF4Q2hhbmdlKTtcbiAgfVxuXG4gIGlmIChoYXNTdGVwQXR0cikge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMuc3RlcCA9IHN1cHBvcnRzUmFuZ2UgP1xuICAgICAgZnVuY3Rpb24gbmF0aXZlU3RlcFZhbGlkYXRvcigpIHtcbiAgICAgICAgLy8gQ3VycmVudGx5LCBvbmx5IEZGIGltcGxlbWVudHMgdGhlIHNwZWMgb24gc3RlcCBjaGFuZ2UgY29ycmVjdGx5IChpLmUuIGFkanVzdGluZyB0aGVcbiAgICAgICAgLy8gaW5wdXQgZWxlbWVudCB2YWx1ZSB0byBhIHZhbGlkIHZhbHVlKS4gSXQncyBwb3NzaWJsZSB0aGF0IG90aGVyIGJyb3dzZXJzIHNldCB0aGUgc3RlcE1pc21hdGNoXG4gICAgICAgIC8vIHZhbGlkaXR5IGVycm9yIGluc3RlYWQsIHNvIHdlIGNhbiBhdCBsZWFzdCByZXBvcnQgYW4gZXJyb3IgaW4gdGhhdCBjYXNlLlxuICAgICAgICByZXR1cm4gIXZhbGlkaXR5LnN0ZXBNaXNtYXRjaDtcbiAgICAgIH0gOlxuICAgICAgLy8gbmdTdGVwIGRvZXNuJ3Qgc2V0IHRoZSBzZXRwIGF0dHIsIHNvIHRoZSBicm93c2VyIGRvZXNuJ3QgYWRqdXN0IHRoZSBpbnB1dCB2YWx1ZSBhcyBzZXR0aW5nIHN0ZXAgd291bGRcbiAgICAgIGZ1bmN0aW9uIHN0ZXBWYWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQoc3RlcFZhbCkgfHxcbiAgICAgICAgICAgICAgIGlzVmFsaWRGb3JTdGVwKHZpZXdWYWx1ZSwgbWluVmFsIHx8IDAsIHN0ZXBWYWwpO1xuICAgICAgfTtcblxuICAgIHNldEluaXRpYWxWYWx1ZUFuZE9ic2VydmVyKCdzdGVwJywgc3RlcENoYW5nZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRJbml0aWFsVmFsdWVBbmRPYnNlcnZlcihodG1sQXR0ck5hbWUsIGNoYW5nZUZuKSB7XG4gICAgLy8gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZXMgc2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgb25seSBhZnRlciBhIGRpZ2VzdCwgYnV0IHdlIG5lZWQgdGhlXG4gICAgLy8gYXR0cmlidXRlIHZhbHVlIHdoZW4gdGhlIGlucHV0IGlzIGZpcnN0IHJlbmRlcmVkLCBzbyB0aGF0IHRoZSBicm93c2VyIGNhbiBhZGp1c3QgdGhlXG4gICAgLy8gaW5wdXQgdmFsdWUgYmFzZWQgb24gdGhlIG1pbi9tYXggdmFsdWVcbiAgICBlbGVtZW50LmF0dHIoaHRtbEF0dHJOYW1lLCBhdHRyW2h0bWxBdHRyTmFtZV0pO1xuICAgIGF0dHIuJG9ic2VydmUoaHRtbEF0dHJOYW1lLCBjaGFuZ2VGbik7XG4gIH1cblxuICBmdW5jdGlvbiBtaW5DaGFuZ2UodmFsKSB7XG4gICAgbWluVmFsID0gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCk7XG4gICAgLy8gaWdub3JlIGNoYW5nZXMgYmVmb3JlIG1vZGVsIGlzIGluaXRpYWxpemVkXG4gICAgaWYgKGlzTnVtYmVyTmFOKGN0cmwuJG1vZGVsVmFsdWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnRzUmFuZ2UpIHtcbiAgICAgIHZhciBlbFZhbCA9IGVsZW1lbnQudmFsKCk7XG4gICAgICAvLyBJRTExIGRvZXNuJ3Qgc2V0IHRoZSBlbCB2YWwgY29ycmVjdGx5IGlmIHRoZSBtaW5WYWwgaXMgZ3JlYXRlciB0aGFuIHRoZSBlbGVtZW50IHZhbHVlXG4gICAgICBpZiAobWluVmFsID4gZWxWYWwpIHtcbiAgICAgICAgZWxWYWwgPSBtaW5WYWw7XG4gICAgICAgIGVsZW1lbnQudmFsKGVsVmFsKTtcbiAgICAgIH1cbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbFZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYXhDaGFuZ2UodmFsKSB7XG4gICAgbWF4VmFsID0gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCk7XG4gICAgLy8gaWdub3JlIGNoYW5nZXMgYmVmb3JlIG1vZGVsIGlzIGluaXRpYWxpemVkXG4gICAgaWYgKGlzTnVtYmVyTmFOKGN0cmwuJG1vZGVsVmFsdWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnRzUmFuZ2UpIHtcbiAgICAgIHZhciBlbFZhbCA9IGVsZW1lbnQudmFsKCk7XG4gICAgICAvLyBJRTExIGRvZXNuJ3Qgc2V0IHRoZSBlbCB2YWwgY29ycmVjdGx5IGlmIHRoZSBtYXhWYWwgaXMgbGVzcyB0aGFuIHRoZSBlbGVtZW50IHZhbHVlXG4gICAgICBpZiAobWF4VmFsIDwgZWxWYWwpIHtcbiAgICAgICAgZWxlbWVudC52YWwobWF4VmFsKTtcbiAgICAgICAgLy8gSUUxMSBhbmQgQ2hyb21lIGRvbid0IHNldCB0aGUgdmFsdWUgdG8gdGhlIG1pblZhbCB3aGVuIG1heCA8IG1pblxuICAgICAgICBlbFZhbCA9IG1heFZhbCA8IG1pblZhbCA/IG1pblZhbCA6IG1heFZhbDtcbiAgICAgIH1cbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbFZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGVwQ2hhbmdlKHZhbCkge1xuICAgIHN0ZXBWYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAvLyBpZ25vcmUgY2hhbmdlcyBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTb21lIGJyb3dzZXJzIGRvbid0IGFkanVzdCB0aGUgaW5wdXQgdmFsdWUgY29ycmVjdGx5LCBidXQgc2V0IHRoZSBzdGVwTWlzbWF0Y2ggZXJyb3JcbiAgICBpZiAoc3VwcG9ydHNSYW5nZSAmJiBjdHJsLiR2aWV3VmFsdWUgIT09IGVsZW1lbnQudmFsKCkpIHtcbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbGVtZW50LnZhbCgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1cmxJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICAvLyBOb3RlOiBubyBiYWRJbnB1dENoZWNrZXIgaGVyZSBieSBwdXJwb3NlIGFzIGB1cmxgIGlzIG9ubHkgYSB2YWxpZGF0aW9uXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xuXG4gIGN0cmwuJCRwYXJzZXJOYW1lID0gJ3VybCc7XG4gIGN0cmwuJHZhbGlkYXRvcnMudXJsID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IFVSTF9SRUdFWFAudGVzdCh2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGVtYWlsSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgLy8gTm90ZTogbm8gYmFkSW5wdXRDaGVja2VyIGhlcmUgYnkgcHVycG9zZSBhcyBgdXJsYCBpcyBvbmx5IGEgdmFsaWRhdGlvblxuICAvLyBpbiBicm93c2VycywgaS5lLiB3ZSBjYW4gYWx3YXlzIHJlYWQgb3V0IGlucHV0LnZhbHVlIGV2ZW4gaWYgaXQgaXMgbm90IHZhbGlkIVxuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcblxuICBjdHJsLiQkcGFyc2VyTmFtZSA9ICdlbWFpbCc7XG4gIGN0cmwuJHZhbGlkYXRvcnMuZW1haWwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgRU1BSUxfUkVHRVhQLnRlc3QodmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiByYWRpb0lucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xuICB2YXIgZG9UcmltID0gIWF0dHIubmdUcmltIHx8IHRyaW0oYXR0ci5uZ1RyaW0pICE9PSAnZmFsc2UnO1xuICAvLyBtYWtlIHRoZSBuYW1lIHVuaXF1ZSwgaWYgbm90IGRlZmluZWRcbiAgaWYgKGlzVW5kZWZpbmVkKGF0dHIubmFtZSkpIHtcbiAgICBlbGVtZW50LmF0dHIoJ25hbWUnLCBuZXh0VWlkKCkpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICB2YXIgdmFsdWU7XG4gICAgaWYgKGVsZW1lbnRbMF0uY2hlY2tlZCkge1xuICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgaWYgKGRvVHJpbSkge1xuICAgICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xuICAgICAgfVxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlLCBldiAmJiBldi50eXBlKTtcbiAgICB9XG4gIH07XG5cbiAgZWxlbWVudC5vbignY2xpY2snLCBsaXN0ZW5lcik7XG5cbiAgY3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICBpZiAoZG9UcmltKSB7XG4gICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xuICAgIH1cbiAgICBlbGVtZW50WzBdLmNoZWNrZWQgPSAodmFsdWUgPT09IGN0cmwuJHZpZXdWYWx1ZSk7XG4gIH07XG5cbiAgYXR0ci4kb2JzZXJ2ZSgndmFsdWUnLCBjdHJsLiRyZW5kZXIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNvbnN0YW50RXhwcigkcGFyc2UsIGNvbnRleHQsIG5hbWUsIGV4cHJlc3Npb24sIGZhbGxiYWNrKSB7XG4gIHZhciBwYXJzZUZuO1xuICBpZiAoaXNEZWZpbmVkKGV4cHJlc3Npb24pKSB7XG4gICAgcGFyc2VGbiA9ICRwYXJzZShleHByZXNzaW9uKTtcbiAgICBpZiAoIXBhcnNlRm4uY29uc3RhbnQpIHtcbiAgICAgIHRocm93IG5nTW9kZWxNaW5FcnIoJ2NvbnN0ZXhwcicsICdFeHBlY3RlZCBjb25zdGFudCBleHByZXNzaW9uIGZvciBgezB9YCwgYnV0IHNhdyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2B7MX1gLicsIG5hbWUsIGV4cHJlc3Npb24pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VGbihjb250ZXh0KTtcbiAgfVxuICByZXR1cm4gZmFsbGJhY2s7XG59XG5cbmZ1bmN0aW9uIGNoZWNrYm94SW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIsICRmaWx0ZXIsICRwYXJzZSkge1xuICB2YXIgdHJ1ZVZhbHVlID0gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBzY29wZSwgJ25nVHJ1ZVZhbHVlJywgYXR0ci5uZ1RydWVWYWx1ZSwgdHJ1ZSk7XG4gIHZhciBmYWxzZVZhbHVlID0gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBzY29wZSwgJ25nRmFsc2VWYWx1ZScsIGF0dHIubmdGYWxzZVZhbHVlLCBmYWxzZSk7XG5cbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICBjdHJsLiRzZXRWaWV3VmFsdWUoZWxlbWVudFswXS5jaGVja2VkLCBldiAmJiBldi50eXBlKTtcbiAgfTtcblxuICBlbGVtZW50Lm9uKCdjbGljaycsIGxpc3RlbmVyKTtcblxuICBjdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICBlbGVtZW50WzBdLmNoZWNrZWQgPSBjdHJsLiR2aWV3VmFsdWU7XG4gIH07XG5cbiAgLy8gT3ZlcnJpZGUgdGhlIHN0YW5kYXJkIGAkaXNFbXB0eWAgYmVjYXVzZSB0aGUgJHZpZXdWYWx1ZSBvZiBhbiBlbXB0eSBjaGVja2JveCBpcyBhbHdheXMgc2V0IHRvIGBmYWxzZWBcbiAgLy8gVGhpcyBpcyBiZWNhdXNlIG9mIHRoZSBwYXJzZXIgYmVsb3csIHdoaWNoIGNvbXBhcmVzIHRoZSBgJG1vZGVsVmFsdWVgIHdpdGggYHRydWVWYWx1ZWAgdG8gY29udmVydFxuICAvLyBpdCB0byBhIGJvb2xlYW4uXG4gIGN0cmwuJGlzRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gZmFsc2U7XG4gIH07XG5cbiAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVxdWFscyh2YWx1ZSwgdHJ1ZVZhbHVlKTtcbiAgfSk7XG5cbiAgY3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID8gdHJ1ZVZhbHVlIDogZmFsc2VWYWx1ZTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB0ZXh0YXJlYVxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhUTUwgdGV4dGFyZWEgZWxlbWVudCBjb250cm9sIHdpdGggQW5ndWxhckpTIGRhdGEtYmluZGluZy4gVGhlIGRhdGEtYmluZGluZyBhbmQgdmFsaWRhdGlvblxuICogcHJvcGVydGllcyBvZiB0aGlzIGVsZW1lbnQgYXJlIGV4YWN0bHkgdGhlIHNhbWUgYXMgdGhvc2Ugb2YgdGhlXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOmlucHV0IGlucHV0IGVsZW1lbnR9LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICogICAgbWlubGVuZ3RoLlxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxuICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mIGFueVxuICogICAgbGVuZ3RoLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIG5nTW9kZWwge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSAkdmlld1ZhbHVlfVxuICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QsIHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwXG4gKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICogICAgYG5ldyBSZWdFeHAoJ15hYmMkJylgLjxiciAvPlxuICogICAgKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gKiAgICBhY2NvdW50LlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFySlMgd2lsbCBub3QgYXV0b21hdGljYWxseSB0cmltIHRoZSBpbnB1dC5cbiAqXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqIFdoZW4gc3BlY2lmeWluZyB0aGUgYHBsYWNlaG9sZGVyYCBhdHRyaWJ1dGUgb2YgYDx0ZXh0YXJlYT5gLCBJbnRlcm5ldCBFeHBsb3JlciB3aWxsIHRlbXBvcmFyaWx5XG4gKiBpbnNlcnQgdGhlIHBsYWNlaG9sZGVyIHZhbHVlIGFzIHRoZSB0ZXh0YXJlYSdzIGNvbnRlbnQuIElmIHRoZSBwbGFjZWhvbGRlciB2YWx1ZSBjb250YWluc1xuICogaW50ZXJwb2xhdGlvbiAoYHt7IC4uLiB9fWApLCBhbiBlcnJvciB3aWxsIGJlIGxvZ2dlZCBpbiB0aGUgY29uc29sZSB3aGVuIEFuZ3VsYXJKUyB0cmllcyB0byB1cGRhdGVcbiAqIHRoZSB2YWx1ZSBvZiB0aGUgYnktdGhlbi1yZW1vdmVkIHRleHQgbm9kZS4gVGhpcyBkb2Vzbid0IGFmZmVjdCB0aGUgZnVuY3Rpb25hbGl0eSBvZiB0aGVcbiAqIHRleHRhcmVhLCBidXQgY2FuIGJlIHVuZGVzaXJhYmxlLlxuICpcbiAqIFlvdSBjYW4gd29yayBhcm91bmQgdGhpcyBJbnRlcm5ldCBFeHBsb3JlciBpc3N1ZSBieSB1c2luZyBgbmctYXR0ci1wbGFjZWhvbGRlcmAgaW5zdGVhZCBvZlxuICogYHBsYWNlaG9sZGVyYCBvbiB0ZXh0YXJlYXMsIHdoZW5ldmVyIHlvdSBuZWVkIGludGVycG9sYXRpb24gaW4gdGhlIHBsYWNlaG9sZGVyIHZhbHVlLiBZb3UgY2FuXG4gKiBmaW5kIG1vcmUgZGV0YWlscyBvbiBgbmdBdHRyYCBpbiB0aGVcbiAqIFtJbnRlcnBvbGF0aW9uXShndWlkZS9pbnRlcnBvbGF0aW9uIy1uZ2F0dHItZm9yLWJpbmRpbmctdG8tYXJiaXRyYXJ5LWF0dHJpYnV0ZXMpIHNlY3Rpb24gb2YgdGhlXG4gKiBEZXZlbG9wZXIgR3VpZGUuXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIGlucHV0XG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSFRNTCBpbnB1dCBlbGVtZW50IGNvbnRyb2wuIFdoZW4gdXNlZCB0b2dldGhlciB3aXRoIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0sIGl0IHByb3ZpZGVzIGRhdGEtYmluZGluZyxcbiAqIGlucHV0IHN0YXRlIGNvbnRyb2wsIGFuZCB2YWxpZGF0aW9uLlxuICogSW5wdXQgY29udHJvbCBmb2xsb3dzIEhUTUw1IGlucHV0IHR5cGVzIGFuZCBwb2x5ZmlsbHMgdGhlIEhUTUw1IHZhbGlkYXRpb24gYmVoYXZpb3IgZm9yIG9sZGVyIGJyb3dzZXJzLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogTm90IGV2ZXJ5IGZlYXR1cmUgb2ZmZXJlZCBpcyBhdmFpbGFibGUgZm9yIGFsbCBpbnB1dCB0eXBlcy5cbiAqIFNwZWNpZmljYWxseSwgZGF0YSBiaW5kaW5nIGFuZCBldmVudCBoYW5kbGluZyB2aWEgYG5nLW1vZGVsYCBpcyB1bnN1cHBvcnRlZCBmb3IgYGlucHV0W2ZpbGVdYC5cbiAqIDwvZGl2PlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICogQHBhcmFtIHtib29sZWFuPX0gbmdSZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGlmIHNldCB0byB0cnVlXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICogICAgbWlubGVuZ3RoLlxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxuICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mIGFueVxuICogICAgbGVuZ3RoLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIG5nTW9kZWwge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSAkdmlld1ZhbHVlfVxuICogICAgdmFsdWUgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QsIHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwXG4gKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICogICAgYG5ldyBSZWdFeHAoJ15hYmMkJylgLjxiciAvPlxuICogICAgKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gKiAgICBhY2NvdW50LlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFySlMgd2lsbCBub3QgYXV0b21hdGljYWxseSB0cmltIHRoZSBpbnB1dC5cbiAqICAgIFRoaXMgcGFyYW1ldGVyIGlzIGlnbm9yZWQgZm9yIGlucHV0W3R5cGU9cGFzc3dvcmRdIGNvbnRyb2xzLCB3aGljaCB3aWxsIG5ldmVyIHRyaW0gdGhlXG4gKiAgICBpbnB1dC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJpbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJpbnB1dEV4YW1wbGVcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnaW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAkc2NvcGUudXNlciA9IHtuYW1lOiAnZ3Vlc3QnLCBsYXN0OiAndmlzaXRvcid9O1xuICAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgVXNlciBuYW1lOlxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIiBuZy1tb2RlbD1cInVzZXIubmFtZVwiIHJlcXVpcmVkPlxuICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLnVzZXJOYW1lLiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgIExhc3QgbmFtZTpcbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImxhc3ROYW1lXCIgbmctbW9kZWw9XCJ1c2VyLmxhc3RcIlxuICAgICAgICAgICAgICBuZy1taW5sZW5ndGg9XCIzXCIgbmctbWF4bGVuZ3RoPVwiMTBcIj5cbiAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5sYXN0TmFtZS4kZXJyb3IubWlubGVuZ3RoXCI+XG4gICAgICAgICAgICAgICBUb28gc2hvcnQhPC9zcGFuPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmxhc3ROYW1lLiRlcnJvci5tYXhsZW5ndGhcIj5cbiAgICAgICAgICAgICAgIFRvbyBsb25nITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8L2Zvcm0+XG4gICAgICAgICA8aHI+XG4gICAgICAgICA8dHQ+dXNlciA9IHt7dXNlcn19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS51c2VyTmFtZS4kdmFsaWQgPSB7e215Rm9ybS51c2VyTmFtZS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0udXNlck5hbWUuJGVycm9yID0ge3tteUZvcm0udXNlck5hbWUuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLmxhc3ROYW1lLiR2YWxpZCA9IHt7bXlGb3JtLmxhc3ROYW1lLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS5sYXN0TmFtZS4kZXJyb3IgPSB7e215Rm9ybS5sYXN0TmFtZS4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5taW5sZW5ndGggPSB7eyEhbXlGb3JtLiRlcnJvci5taW5sZW5ndGh9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLm1heGxlbmd0aCA9IHt7ISFteUZvcm0uJGVycm9yLm1heGxlbmd0aH19PC90dD48YnIvPlxuICAgICAgIDwvZGl2PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICB2YXIgdXNlciA9IGVsZW1lbnQoYnkuZXhhY3RCaW5kaW5nKCd1c2VyJykpO1xuICAgICAgICB2YXIgdXNlck5hbWVWYWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLnVzZXJOYW1lLiR2YWxpZCcpKTtcbiAgICAgICAgdmFyIGxhc3ROYW1lVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5sYXN0TmFtZS4kdmFsaWQnKSk7XG4gICAgICAgIHZhciBsYXN0TmFtZUVycm9yID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0ubGFzdE5hbWUuJGVycm9yJykpO1xuICAgICAgICB2YXIgZm9ybVZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uJHZhbGlkJykpO1xuICAgICAgICB2YXIgdXNlck5hbWVJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubmFtZScpKTtcbiAgICAgICAgdmFyIHVzZXJMYXN0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLmxhc3QnKSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCIsXCJsYXN0XCI6XCJ2aXNpdG9yXCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KHVzZXJOYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eSB3aGVuIHJlcXVpcmVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdXNlck5hbWVJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJOYW1lSW5wdXQuc2VuZEtleXMoJycpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcImxhc3RcIjpcInZpc2l0b3JcIn0nKTtcbiAgICAgICAgICBleHBlY3QodXNlck5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIHZhbGlkIGlmIGVtcHR5IHdoZW4gbWluIGxlbmd0aCBpcyBzZXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIixcImxhc3RcIjpcIlwifScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbGVzcyB0aGFuIHJlcXVpcmVkIG1pbiBsZW5ndGgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5zZW5kS2V5cygneHgnKTtcblxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwifScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZUVycm9yLmdldFRleHQoKSkudG9Db250YWluKCdtaW5sZW5ndGgnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbG9uZ2VyIHRoYW4gbWF4IGxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCdzb21lIHJpZGljdWxvdXNseSBsb25nIG5hbWUnKTtcblxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwifScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZUVycm9yLmdldFRleHQoKSkudG9Db250YWluKCdtYXhsZW5ndGgnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cbnZhciBpbnB1dERpcmVjdGl2ZSA9IFsnJGJyb3dzZXInLCAnJHNuaWZmZXInLCAnJGZpbHRlcicsICckcGFyc2UnLFxuICAgIGZ1bmN0aW9uKCRicm93c2VyLCAkc25pZmZlciwgJGZpbHRlciwgJHBhcnNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiBbJz9uZ01vZGVsJ10sXG4gICAgbGluazoge1xuICAgICAgcHJlOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICAgICAgaWYgKGN0cmxzWzBdKSB7XG4gICAgICAgICAgKGlucHV0VHlwZVtsb3dlcmNhc2UoYXR0ci50eXBlKV0gfHwgaW5wdXRUeXBlLnRleHQpKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsc1swXSwgJHNuaWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRicm93c2VyLCAkZmlsdGVyLCAkcGFyc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufV07XG5cblxuXG52YXIgQ09OU1RBTlRfVkFMVUVfUkVHRVhQID0gL14odHJ1ZXxmYWxzZXxcXGQrKSQvO1xuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1ZhbHVlXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQmluZHMgdGhlIGdpdmVuIGV4cHJlc3Npb24gdG8gdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50LlxuICpcbiAqIEl0IGlzIG1haW5seSB1c2VkIG9uIHtAbGluayBpbnB1dFtyYWRpb10gYGlucHV0W3JhZGlvXWB9IGFuZCBvcHRpb24gZWxlbWVudHMsXG4gKiBzbyB0aGF0IHdoZW4gdGhlIGVsZW1lbnQgaXMgc2VsZWN0ZWQsIHRoZSB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9IG9mIHRoYXQgZWxlbWVudCAob3IgaXRzXG4gKiB7QGxpbmsgc2VsZWN0IGBzZWxlY3RgfSBwYXJlbnQgZWxlbWVudCkgaXMgc2V0IHRvIHRoZSBib3VuZCB2YWx1ZS4gSXQgaXMgZXNwZWNpYWxseSB1c2VmdWxcbiAqIGZvciBkeW5hbWljYWxseSBnZW5lcmF0ZWQgbGlzdHMgdXNpbmcge0BsaW5rIG5nUmVwZWF0IGBuZ1JlcGVhdGB9LCBhcyBzaG93biBiZWxvdy5cbiAqXG4gKiBJdCBjYW4gYWxzbyBiZSB1c2VkIHRvIGFjaGlldmUgb25lLXdheSBiaW5kaW5nIG9mIGEgZ2l2ZW4gZXhwcmVzc2lvbiB0byBhbiBpbnB1dCBlbGVtZW50XG4gKiBzdWNoIGFzIGFuIGBpbnB1dFt0ZXh0XWAgb3IgYSBgdGV4dGFyZWFgLCB3aGVuIHRoYXQgZWxlbWVudCBkb2VzIG5vdCB1c2UgbmdNb2RlbC5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdWYWx1ZSBBbmd1bGFySlMgZXhwcmVzc2lvbiwgd2hvc2UgdmFsdWUgd2lsbCBiZSBib3VuZCB0byB0aGUgYHZhbHVlYCBhdHRyaWJ1dGVcbiAqIGFuZCBgdmFsdWVgIHByb3BlcnR5IG9mIHRoZSBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nVmFsdWUtZGlyZWN0aXZlXCIgbW9kdWxlPVwidmFsdWVFeGFtcGxlXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3ZhbHVlRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydwaXp6YScsICd1bmljb3JucycsICdyb2JvdHMnXTtcbiAgICAgICAgICAgICAgJHNjb3BlLm15ID0geyBmYXZvcml0ZTogJ3VuaWNvcm5zJyB9O1xuICAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgICA8Zm9ybSBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICA8aDI+V2hpY2ggaXMgeW91ciBmYXZvcml0ZT88L2gyPlxuICAgICAgICAgICAgPGxhYmVsIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIiBmb3I9XCJ7e25hbWV9fVwiPlxuICAgICAgICAgICAgICB7e25hbWV9fVxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwibXkuZmF2b3JpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgbmctdmFsdWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgIGlkPVwie3tuYW1lfX1cIlxuICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImZhdm9yaXRlXCI+XG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDxkaXY+WW91IGNob3NlIHt7bXkuZmF2b3JpdGV9fTwvZGl2PlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIHZhciBmYXZvcml0ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnbXkuZmF2b3JpdGUnKSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGZhdm9yaXRlLmdldFRleHQoKSkudG9Db250YWluKCd1bmljb3JucycpO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoJ3Nob3VsZCBiaW5kIHRoZSB2YWx1ZXMgdG8gdGhlIGlucHV0cycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5Lm1vZGVsKCdteS5mYXZvcml0ZScpKS5nZXQoMCkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZmF2b3JpdGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3BpenphJyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nVmFsdWVEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgLyoqXG4gICAqICBpbnB1dHMgdXNlIHRoZSB2YWx1ZSBhdHRyaWJ1dGUgYXMgdGhlaXIgZGVmYXVsdCB2YWx1ZSBpZiB0aGUgdmFsdWUgcHJvcGVydHkgaXMgbm90IHNldC5cbiAgICogIE9uY2UgdGhlIHZhbHVlIHByb3BlcnR5IGhhcyBiZWVuIHNldCAoYnkgYWRkaW5nIGlucHV0KSwgaXQgd2lsbCBub3QgcmVhY3QgdG8gY2hhbmdlcyB0b1xuICAgKiAgdGhlIHZhbHVlIGF0dHJpYnV0ZSBhbnltb3JlLiBTZXR0aW5nIGJvdGggYXR0cmlidXRlIGFuZCBwcm9wZXJ0eSBmaXhlcyB0aGlzIGJlaGF2aW9yLCBhbmRcbiAgICogIG1ha2VzIGl0IHBvc3NpYmxlIHRvIHVzZSBuZ1ZhbHVlIGFzIGEgc29ydCBvZiBvbmUtd2F5IGJpbmQuXG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVFbGVtZW50VmFsdWUoZWxlbWVudCwgYXR0ciwgdmFsdWUpIHtcbiAgICAvLyBTdXBwb3J0OiBJRTkgb25seVxuICAgIC8vIEluIElFOSB2YWx1ZXMgYXJlIGNvbnZlcnRlZCB0byBzdHJpbmcgKGUuZy4gYGlucHV0LnZhbHVlID0gbnVsbGAgcmVzdWx0cyBpbiBgaW5wdXQudmFsdWUgPT09ICdudWxsJ2ApLlxuICAgIHZhciBwcm9wVmFsdWUgPSBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiAobXNpZSA9PT0gOSkgPyAnJyA6IG51bGw7XG4gICAgZWxlbWVudC5wcm9wKCd2YWx1ZScsIHByb3BWYWx1ZSk7XG4gICAgYXR0ci4kc2V0KCd2YWx1ZScsIHZhbHVlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBwcmlvcml0eTogMTAwLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKHRwbCwgdHBsQXR0cikge1xuICAgICAgaWYgKENPTlNUQU5UX1ZBTFVFX1JFR0VYUC50ZXN0KHRwbEF0dHIubmdWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nVmFsdWVDb25zdGFudExpbmsoc2NvcGUsIGVsbSwgYXR0cikge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IHNjb3BlLiRldmFsKGF0dHIubmdWYWx1ZSk7XG4gICAgICAgICAgdXBkYXRlRWxlbWVudFZhbHVlKGVsbSwgYXR0ciwgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nVmFsdWVMaW5rKHNjb3BlLCBlbG0sIGF0dHIpIHtcbiAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ1ZhbHVlLCBmdW5jdGlvbiB2YWx1ZVdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICB1cGRhdGVFbGVtZW50VmFsdWUoZWxtLCBhdHRyLCB2YWx1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0JpbmRcbiAqIEByZXN0cmljdCBBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0JpbmRgIGF0dHJpYnV0ZSB0ZWxscyBBbmd1bGFySlMgdG8gcmVwbGFjZSB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBzcGVjaWZpZWQgSFRNTCBlbGVtZW50XG4gKiB3aXRoIHRoZSB2YWx1ZSBvZiBhIGdpdmVuIGV4cHJlc3Npb24sIGFuZCB0byB1cGRhdGUgdGhlIHRleHQgY29udGVudCB3aGVuIHRoZSB2YWx1ZSBvZiB0aGF0XG4gKiBleHByZXNzaW9uIGNoYW5nZXMuXG4gKlxuICogVHlwaWNhbGx5LCB5b3UgZG9uJ3QgdXNlIGBuZ0JpbmRgIGRpcmVjdGx5LCBidXQgaW5zdGVhZCB5b3UgdXNlIHRoZSBkb3VibGUgY3VybHkgbWFya3VwIGxpa2VcbiAqIGB7eyBleHByZXNzaW9uIH19YCB3aGljaCBpcyBzaW1pbGFyIGJ1dCBsZXNzIHZlcmJvc2UuXG4gKlxuICogSXQgaXMgcHJlZmVyYWJsZSB0byB1c2UgYG5nQmluZGAgaW5zdGVhZCBvZiBge3sgZXhwcmVzc2lvbiB9fWAgaWYgYSB0ZW1wbGF0ZSBpcyBtb21lbnRhcmlseVxuICogZGlzcGxheWVkIGJ5IHRoZSBicm93c2VyIGluIGl0cyByYXcgc3RhdGUgYmVmb3JlIEFuZ3VsYXJKUyBjb21waWxlcyBpdC4gU2luY2UgYG5nQmluZGAgaXMgYW5cbiAqIGVsZW1lbnQgYXR0cmlidXRlLCBpdCBtYWtlcyB0aGUgYmluZGluZ3MgaW52aXNpYmxlIHRvIHRoZSB1c2VyIHdoaWxlIHRoZSBwYWdlIGlzIGxvYWRpbmcuXG4gKlxuICogQW4gYWx0ZXJuYXRpdmUgc29sdXRpb24gdG8gdGhpcyBwcm9ibGVtIHdvdWxkIGJlIHVzaW5nIHRoZVxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0Nsb2FrIG5nQ2xvYWt9IGRpcmVjdGl2ZS5cbiAqXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQmluZCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogRW50ZXIgYSBuYW1lIGluIHRoZSBMaXZlIFByZXZpZXcgdGV4dCBib3g7IHRoZSBncmVldGluZyBiZWxvdyB0aGUgdGV4dCBib3ggY2hhbmdlcyBpbnN0YW50bHkuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kRXhhbXBsZVwiIG5hbWU9XCJuZy1iaW5kXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJ1doaXJsZWQnO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxsYWJlbD5FbnRlciBuYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm5hbWVcIj48L2xhYmVsPjxicj5cbiAgICAgICAgIEhlbGxvIDxzcGFuIG5nLWJpbmQ9XCJuYW1lXCI+PC9zcGFuPiFcbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1iaW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgbmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZScpKTtcblxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbmFtZScpKS5nZXRUZXh0KCkpLnRvQmUoJ1doaXJsZWQnKTtcbiAgICAgICAgIG5hbWVJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbmFtZUlucHV0LnNlbmRLZXlzKCd3b3JsZCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbmFtZScpKS5nZXRUZXh0KCkpLnRvQmUoJ3dvcmxkJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQmluZERpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQUMnLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZENvbXBpbGUodGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0ZW1wbGF0ZUVsZW1lbnQpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBhdHRyLm5nQmluZCk7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0JpbmQsIGZ1bmN0aW9uIG5nQmluZFdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmluZFRlbXBsYXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQmluZFRlbXBsYXRlYCBkaXJlY3RpdmUgc3BlY2lmaWVzIHRoYXQgdGhlIGVsZW1lbnRcbiAqIHRleHQgY29udGVudCBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCB0aGUgaW50ZXJwb2xhdGlvbiBvZiB0aGUgdGVtcGxhdGVcbiAqIGluIHRoZSBgbmdCaW5kVGVtcGxhdGVgIGF0dHJpYnV0ZS5cbiAqIFVubGlrZSBgbmdCaW5kYCwgdGhlIGBuZ0JpbmRUZW1wbGF0ZWAgY2FuIGNvbnRhaW4gbXVsdGlwbGUgYHt7YCBgfX1gXG4gKiBleHByZXNzaW9ucy4gVGhpcyBkaXJlY3RpdmUgaXMgbmVlZGVkIHNpbmNlIHNvbWUgSFRNTCBlbGVtZW50c1xuICogKHN1Y2ggYXMgVElUTEUgYW5kIE9QVElPTikgY2Fubm90IGNvbnRhaW4gU1BBTiBlbGVtZW50cy5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ0JpbmRUZW1wbGF0ZSB0ZW1wbGF0ZSBvZiBmb3JtXG4gKiAgIDx0dD57ezwvdHQ+IDx0dD5leHByZXNzaW9uPC90dD4gPHR0Pn19PC90dD4gdG8gZXZhbC5cbiAqXG4gKiBAZXhhbXBsZVxuICogVHJ5IGl0IGhlcmU6IGVudGVyIHRleHQgaW4gdGV4dCBib3ggYW5kIHdhdGNoIHRoZSBncmVldGluZyBjaGFuZ2UuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kRXhhbXBsZVwiIG5hbWU9XCJuZy1iaW5kLXRlbXBsYXRlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5zYWx1dGF0aW9uID0gJ0hlbGxvJztcbiAgICAgICAgICAgICAkc2NvcGUubmFtZSA9ICdXb3JsZCc7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8bGFiZWw+U2FsdXRhdGlvbjogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzYWx1dGF0aW9uXCI+PC9sYWJlbD48YnI+XG4gICAgICAgIDxsYWJlbD5OYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm5hbWVcIj48L2xhYmVsPjxicj5cbiAgICAgICAgPHByZSBuZy1iaW5kLXRlbXBsYXRlPVwie3tzYWx1dGF0aW9ufX0ge3tuYW1lfX0hXCI+PC9wcmU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNhbHV0YXRpb25FbGVtID0gZWxlbWVudChieS5iaW5kaW5nKCdzYWx1dGF0aW9uJykpO1xuICAgICAgICAgdmFyIHNhbHV0YXRpb25JbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NhbHV0YXRpb24nKSk7XG4gICAgICAgICB2YXIgbmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZScpKTtcblxuICAgICAgICAgZXhwZWN0KHNhbHV0YXRpb25FbGVtLmdldFRleHQoKSkudG9CZSgnSGVsbG8gV29ybGQhJyk7XG5cbiAgICAgICAgIHNhbHV0YXRpb25JbnB1dC5jbGVhcigpO1xuICAgICAgICAgc2FsdXRhdGlvbklucHV0LnNlbmRLZXlzKCdHcmVldGluZ3MnKTtcbiAgICAgICAgIG5hbWVJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbmFtZUlucHV0LnNlbmRLZXlzKCd1c2VyJyk7XG5cbiAgICAgICAgIGV4cGVjdChzYWx1dGF0aW9uRWxlbS5nZXRUZXh0KCkpLnRvQmUoJ0dyZWV0aW5ncyB1c2VyIScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0JpbmRUZW1wbGF0ZURpcmVjdGl2ZSA9IFsnJGludGVycG9sYXRlJywgJyRjb21waWxlJywgZnVuY3Rpb24oJGludGVycG9sYXRlLCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZFRlbXBsYXRlQ29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRlbXBsYXRlRWxlbWVudCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdCaW5kVGVtcGxhdGVMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyLm5nQmluZFRlbXBsYXRlKSk7XG4gICAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0luZm8oZWxlbWVudCwgaW50ZXJwb2xhdGVGbi5leHByZXNzaW9ucyk7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICBhdHRyLiRvYnNlcnZlKCduZ0JpbmRUZW1wbGF0ZScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGlzVW5kZWZpbmVkKHZhbHVlKSA/ICcnIDogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmluZEh0bWxcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEV2YWx1YXRlcyB0aGUgZXhwcmVzc2lvbiBhbmQgaW5zZXJ0cyB0aGUgcmVzdWx0aW5nIEhUTUwgaW50byB0aGUgZWxlbWVudCBpbiBhIHNlY3VyZSB3YXkuIEJ5IGRlZmF1bHQsXG4gKiB0aGUgcmVzdWx0aW5nIEhUTUwgY29udGVudCB3aWxsIGJlIHNhbml0aXplZCB1c2luZyB0aGUge0BsaW5rIG5nU2FuaXRpemUuJHNhbml0aXplICRzYW5pdGl6ZX0gc2VydmljZS5cbiAqIFRvIHV0aWxpemUgdGhpcyBmdW5jdGlvbmFsaXR5LCBlbnN1cmUgdGhhdCBgJHNhbml0aXplYCBpcyBhdmFpbGFibGUsIGZvciBleGFtcGxlLCBieSBpbmNsdWRpbmcge0BsaW5rXG4gKiBuZ1Nhbml0aXplfSBpbiB5b3VyIG1vZHVsZSdzIGRlcGVuZGVuY2llcyAobm90IGluIGNvcmUgQW5ndWxhckpTKS4gSW4gb3JkZXIgdG8gdXNlIHtAbGluayBuZ1Nhbml0aXplfVxuICogaW4geW91ciBtb2R1bGUncyBkZXBlbmRlbmNpZXMsIHlvdSBuZWVkIHRvIGluY2x1ZGUgXCJhbmd1bGFyLXNhbml0aXplLmpzXCIgaW4geW91ciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBZb3UgbWF5IGFsc28gYnlwYXNzIHNhbml0aXphdGlvbiBmb3IgdmFsdWVzIHlvdSBrbm93IGFyZSBzYWZlLiBUbyBkbyBzbywgYmluZCB0b1xuICogYW4gZXhwbGljaXRseSB0cnVzdGVkIHZhbHVlIHZpYSB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzSHRtbCAkc2NlLnRydXN0QXNIdG1sfS4gIFNlZSB0aGUgZXhhbXBsZVxuICogdW5kZXIge0BsaW5rIG5nLiRzY2Ujc2hvdy1tZS1hbi1leGFtcGxlLXVzaW5nLXNjZS0gU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9LlxuICpcbiAqIE5vdGU6IElmIGEgYCRzYW5pdGl6ZWAgc2VydmljZSBpcyB1bmF2YWlsYWJsZSBhbmQgdGhlIGJvdW5kIHZhbHVlIGlzbid0IGV4cGxpY2l0bHkgdHJ1c3RlZCwgeW91XG4gKiB3aWxsIGhhdmUgYW4gZXhjZXB0aW9uIChpbnN0ZWFkIG9mIGFuIGV4cGxvaXQuKVxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0JpbmRIdG1sIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlLlxuICpcbiAqIEBleGFtcGxlXG5cbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRIdG1sRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCIgbmFtZT1cIm5nLWJpbmQtaHRtbFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIDxwIG5nLWJpbmQtaHRtbD1cIm15SFRNTFwiPjwvcD5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnYmluZEh0bWxFeGFtcGxlJywgWyduZ1Nhbml0aXplJ10pXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAkc2NvcGUubXlIVE1MID1cbiAgICAgICAgICAgICAgJ0kgYW0gYW4gPGNvZGU+SFRNTDwvY29kZT5zdHJpbmcgd2l0aCAnICtcbiAgICAgICAgICAgICAgJzxhIGhyZWY9XCIjXCI+bGlua3MhPC9hPiBhbmQgb3RoZXIgPGVtPnN0dWZmPC9lbT4nO1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZC1odG1sJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdteUhUTUwnKSkuZ2V0VGV4dCgpKS50b0JlKFxuICAgICAgICAgICAgICdJIGFtIGFuIEhUTUxzdHJpbmcgd2l0aCBsaW5rcyEgYW5kIG90aGVyIHN0dWZmJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQmluZEh0bWxEaXJlY3RpdmUgPSBbJyRzY2UnLCAnJHBhcnNlJywgJyRjb21waWxlJywgZnVuY3Rpb24oJHNjZSwgJHBhcnNlLCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kSHRtbENvbXBpbGUodEVsZW1lbnQsIHRBdHRycykge1xuICAgICAgdmFyIG5nQmluZEh0bWxHZXR0ZXIgPSAkcGFyc2UodEF0dHJzLm5nQmluZEh0bWwpO1xuICAgICAgdmFyIG5nQmluZEh0bWxXYXRjaCA9ICRwYXJzZSh0QXR0cnMubmdCaW5kSHRtbCwgZnVuY3Rpb24gc2NlVmFsdWVPZih2YWwpIHtcbiAgICAgICAgLy8gVW53cmFwIHRoZSB2YWx1ZSB0byBjb21wYXJlIHRoZSBhY3R1YWwgaW5uZXIgc2FmZSB2YWx1ZSwgbm90IHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgICAgICAgcmV0dXJuICRzY2UudmFsdWVPZih2YWwpO1xuICAgICAgfSk7XG4gICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0RWxlbWVudCk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0JpbmRIdG1sTGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKGVsZW1lbnQsIGF0dHIubmdCaW5kSHRtbCk7XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoKG5nQmluZEh0bWxXYXRjaCwgZnVuY3Rpb24gbmdCaW5kSHRtbFdhdGNoQWN0aW9uKCkge1xuICAgICAgICAgIC8vIFRoZSB3YXRjaGVkIHZhbHVlIGlzIHRoZSB1bndyYXBwZWQgdmFsdWUuIFRvIGF2b2lkIHJlLWVzY2FwaW5nLCB1c2UgdGhlIGRpcmVjdCBnZXR0ZXIuXG4gICAgICAgICAgdmFyIHZhbHVlID0gbmdCaW5kSHRtbEdldHRlcihzY29wZSk7XG4gICAgICAgICAgZWxlbWVudC5odG1sKCRzY2UuZ2V0VHJ1c3RlZEh0bWwodmFsdWUpIHx8ICcnKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2hhbmdlXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRXZhbHVhdGUgdGhlIGdpdmVuIGV4cHJlc3Npb24gd2hlbiB0aGUgdXNlciBjaGFuZ2VzIHRoZSBpbnB1dC5cbiAqIFRoZSBleHByZXNzaW9uIGlzIGV2YWx1YXRlZCBpbW1lZGlhdGVseSwgdW5saWtlIHRoZSBKYXZhU2NyaXB0IG9uY2hhbmdlIGV2ZW50XG4gKiB3aGljaCBvbmx5IHRyaWdnZXJzIGF0IHRoZSBlbmQgb2YgYSBjaGFuZ2UgKHVzdWFsbHksIHdoZW4gdGhlIHVzZXIgbGVhdmVzIHRoZVxuICogZm9ybSBlbGVtZW50IG9yIHByZXNzZXMgdGhlIHJldHVybiBrZXkpLlxuICpcbiAqIFRoZSBgbmdDaGFuZ2VgIGV4cHJlc3Npb24gaXMgb25seSBldmFsdWF0ZWQgd2hlbiBhIGNoYW5nZSBpbiB0aGUgaW5wdXQgdmFsdWUgY2F1c2VzXG4gKiBhIG5ldyB2YWx1ZSB0byBiZSBjb21taXR0ZWQgdG8gdGhlIG1vZGVsLlxuICpcbiAqIEl0IHdpbGwgbm90IGJlIGV2YWx1YXRlZDpcbiAqICogaWYgdGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIGAkcGFyc2Vyc2AgdHJhbnNmb3JtYXRpb24gcGlwZWxpbmUgaGFzIG5vdCBjaGFuZ2VkXG4gKiAqIGlmIHRoZSBpbnB1dCBoYXMgY29udGludWVkIHRvIGJlIGludmFsaWQgc2luY2UgdGhlIG1vZGVsIHdpbGwgc3RheSBgbnVsbGBcbiAqICogaWYgdGhlIG1vZGVsIGlzIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSBhbmQgbm90IGJ5IGEgY2hhbmdlIHRvIHRoZSBpbnB1dCB2YWx1ZVxuICpcbiAqXG4gKiBOb3RlLCB0aGlzIGRpcmVjdGl2ZSByZXF1aXJlcyBgbmdNb2RlbGAgdG8gYmUgcHJlc2VudC5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDaGFuZ2Uge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvbiBjaGFuZ2VcbiAqIGluIGlucHV0IHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDaGFuZ2UtZGlyZWN0aXZlXCIgbW9kdWxlPVwiY2hhbmdlRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxzY3JpcHQ+XG4gKiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY2hhbmdlRXhhbXBsZScsIFtdKVxuICogICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgICRzY29wZS5jb3VudGVyID0gMDtcbiAqICAgICAgICAgICAkc2NvcGUuY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICAkc2NvcGUuY291bnRlcisrO1xuICogICAgICAgICAgIH07XG4gKiAgICAgICAgIH1dKTtcbiAqICAgICA8L3NjcmlwdD5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY29uZmlybWVkXCIgbmctY2hhbmdlPVwiY2hhbmdlKClcIiBpZD1cIm5nLWNoYW5nZS1leGFtcGxlMVwiIC8+XG4gKiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjb25maXJtZWRcIiBpZD1cIm5nLWNoYW5nZS1leGFtcGxlMlwiIC8+XG4gKiAgICAgICA8bGFiZWwgZm9yPVwibmctY2hhbmdlLWV4YW1wbGUyXCI+Q29uZmlybWVkPC9sYWJlbD48YnIgLz5cbiAqICAgICAgIDx0dD5kZWJ1ZyA9IHt7Y29uZmlybWVkfX08L3R0Pjxici8+XG4gKiAgICAgICA8dHQ+Y291bnRlciA9IHt7Y291bnRlcn19PC90dD48YnIvPlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICB2YXIgY291bnRlciA9IGVsZW1lbnQoYnkuYmluZGluZygnY291bnRlcicpKTtcbiAqICAgICB2YXIgZGVidWcgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvbmZpcm1lZCcpKTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBldmFsdWF0ZSB0aGUgZXhwcmVzc2lvbiBpZiBjaGFuZ2luZyBmcm9tIHZpZXcnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9Db250YWluKCcwJyk7XG4gKlxuICogICAgICAgZWxlbWVudChieS5pZCgnbmctY2hhbmdlLWV4YW1wbGUxJykpLmNsaWNrKCk7XG4gKlxuICogICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzEnKTtcbiAqICAgICAgIGV4cGVjdChkZWJ1Zy5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICogICAgIH0pO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIG5vdCBldmFsdWF0ZSB0aGUgZXhwcmVzc2lvbiBpZiBjaGFuZ2luZyBmcm9tIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBlbGVtZW50KGJ5LmlkKCduZy1jaGFuZ2UtZXhhbXBsZTInKSkuY2xpY2soKTtcblxuICogICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzAnKTtcbiAqICAgICAgIGV4cGVjdChkZWJ1Zy5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0NoYW5nZURpcmVjdGl2ZSA9IHZhbHVlRm4oe1xuICByZXN0cmljdDogJ0EnLFxuICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKSB7XG4gICAgY3RybC4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCkge1xuICAgICAgc2NvcGUuJGV2YWwoYXR0ci5uZ0NoYW5nZSk7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKiBleHBvcnRlZFxuICBuZ0NsYXNzRGlyZWN0aXZlLFxuICBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxcbiAgbmdDbGFzc09kZERpcmVjdGl2ZVxuKi9cblxuZnVuY3Rpb24gY2xhc3NEaXJlY3RpdmUobmFtZSwgc2VsZWN0b3IpIHtcbiAgbmFtZSA9ICduZ0NsYXNzJyArIG5hbWU7XG4gIHZhciBpbmRleFdhdGNoRXhwcmVzc2lvbjtcblxuICByZXR1cm4gWyckcGFyc2UnLCBmdW5jdGlvbigkcGFyc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBQycsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IGF0dHJbbmFtZV0udHJpbSgpO1xuICAgICAgICB2YXIgaXNPbmVUaW1lID0gKGV4cHJlc3Npb24uY2hhckF0KDApID09PSAnOicpICYmIChleHByZXNzaW9uLmNoYXJBdCgxKSA9PT0gJzonKTtcblxuICAgICAgICB2YXIgd2F0Y2hJbnRlcmNlcHRvciA9IGlzT25lVGltZSA/IHRvRmxhdFZhbHVlIDogdG9DbGFzc1N0cmluZztcbiAgICAgICAgdmFyIHdhdGNoRXhwcmVzc2lvbiA9ICRwYXJzZShleHByZXNzaW9uLCB3YXRjaEludGVyY2VwdG9yKTtcbiAgICAgICAgdmFyIHdhdGNoQWN0aW9uID0gaXNPbmVUaW1lID8gbmdDbGFzc09uZVRpbWVXYXRjaEFjdGlvbiA6IG5nQ2xhc3NXYXRjaEFjdGlvbjtcblxuICAgICAgICB2YXIgY2xhc3NDb3VudHMgPSBlbGVtZW50LmRhdGEoJyRjbGFzc0NvdW50cycpO1xuICAgICAgICB2YXIgb2xkTW9kdWxvID0gdHJ1ZTtcbiAgICAgICAgdmFyIG9sZENsYXNzU3RyaW5nO1xuXG4gICAgICAgIGlmICghY2xhc3NDb3VudHMpIHtcbiAgICAgICAgICAvLyBVc2UgY3JlYXRlTWFwKCkgdG8gcHJldmVudCBjbGFzcyBhc3N1bXB0aW9ucyBpbnZvbHZpbmcgcHJvcGVydHlcbiAgICAgICAgICAvLyBuYW1lcyBpbiBPYmplY3QucHJvdG90eXBlXG4gICAgICAgICAgY2xhc3NDb3VudHMgPSBjcmVhdGVNYXAoKTtcbiAgICAgICAgICBlbGVtZW50LmRhdGEoJyRjbGFzc0NvdW50cycsIGNsYXNzQ291bnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuYW1lICE9PSAnbmdDbGFzcycpIHtcbiAgICAgICAgICBpZiAoIWluZGV4V2F0Y2hFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICBpbmRleFdhdGNoRXhwcmVzc2lvbiA9ICRwYXJzZSgnJGluZGV4JywgZnVuY3Rpb24gbW9kdWxvVHdvKCRpbmRleCkge1xuICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuICAgICAgICAgICAgICByZXR1cm4gJGluZGV4ICYgMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNjb3BlLiR3YXRjaChpbmRleFdhdGNoRXhwcmVzc2lvbiwgbmdDbGFzc0luZGV4V2F0Y2hBY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoKHdhdGNoRXhwcmVzc2lvbiwgd2F0Y2hBY3Rpb24sIGlzT25lVGltZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkQ2xhc3NlcyhjbGFzc1N0cmluZykge1xuICAgICAgICAgIGNsYXNzU3RyaW5nID0gZGlnZXN0Q2xhc3NDb3VudHMoc3BsaXQoY2xhc3NTdHJpbmcpLCAxKTtcbiAgICAgICAgICBhdHRyLiRhZGRDbGFzcyhjbGFzc1N0cmluZyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVDbGFzc2VzKGNsYXNzU3RyaW5nKSB7XG4gICAgICAgICAgY2xhc3NTdHJpbmcgPSBkaWdlc3RDbGFzc0NvdW50cyhzcGxpdChjbGFzc1N0cmluZyksIC0xKTtcbiAgICAgICAgICBhdHRyLiRyZW1vdmVDbGFzcyhjbGFzc1N0cmluZyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVDbGFzc2VzKG9sZENsYXNzU3RyaW5nLCBuZXdDbGFzc1N0cmluZykge1xuICAgICAgICAgIHZhciBvbGRDbGFzc0FycmF5ID0gc3BsaXQob2xkQ2xhc3NTdHJpbmcpO1xuICAgICAgICAgIHZhciBuZXdDbGFzc0FycmF5ID0gc3BsaXQobmV3Q2xhc3NTdHJpbmcpO1xuXG4gICAgICAgICAgdmFyIHRvUmVtb3ZlQXJyYXkgPSBhcnJheURpZmZlcmVuY2Uob2xkQ2xhc3NBcnJheSwgbmV3Q2xhc3NBcnJheSk7XG4gICAgICAgICAgdmFyIHRvQWRkQXJyYXkgPSBhcnJheURpZmZlcmVuY2UobmV3Q2xhc3NBcnJheSwgb2xkQ2xhc3NBcnJheSk7XG5cbiAgICAgICAgICB2YXIgdG9SZW1vdmVTdHJpbmcgPSBkaWdlc3RDbGFzc0NvdW50cyh0b1JlbW92ZUFycmF5LCAtMSk7XG4gICAgICAgICAgdmFyIHRvQWRkU3RyaW5nID0gZGlnZXN0Q2xhc3NDb3VudHModG9BZGRBcnJheSwgMSk7XG5cbiAgICAgICAgICBhdHRyLiRhZGRDbGFzcyh0b0FkZFN0cmluZyk7XG4gICAgICAgICAgYXR0ci4kcmVtb3ZlQ2xhc3ModG9SZW1vdmVTdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZGlnZXN0Q2xhc3NDb3VudHMoY2xhc3NBcnJheSwgY291bnQpIHtcbiAgICAgICAgICB2YXIgY2xhc3Nlc1RvVXBkYXRlID0gW107XG5cbiAgICAgICAgICBmb3JFYWNoKGNsYXNzQXJyYXksIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgaWYgKGNvdW50ID4gMCB8fCBjbGFzc0NvdW50c1tjbGFzc05hbWVdKSB7XG4gICAgICAgICAgICAgIGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gPSAoY2xhc3NDb3VudHNbY2xhc3NOYW1lXSB8fCAwKSArIGNvdW50O1xuICAgICAgICAgICAgICBpZiAoY2xhc3NDb3VudHNbY2xhc3NOYW1lXSA9PT0gKyhjb3VudCA+IDApKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlc1RvVXBkYXRlLnB1c2goY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIGNsYXNzZXNUb1VwZGF0ZS5qb2luKCcgJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBuZ0NsYXNzSW5kZXhXYXRjaEFjdGlvbihuZXdNb2R1bG8pIHtcbiAgICAgICAgICAvLyBUaGlzIHdhdGNoLWFjdGlvbiBzaG91bGQgcnVuIGJlZm9yZSB0aGUgYG5nQ2xhc3NbT25lVGltZV1XYXRjaEFjdGlvbigpYCwgdGh1cyBpdFxuICAgICAgICAgIC8vIGFkZHMvcmVtb3ZlcyBgb2xkQ2xhc3NTdHJpbmdgLiBJZiB0aGUgYG5nQ2xhc3NgIGV4cHJlc3Npb24gaGFzIGNoYW5nZWQgYXMgd2VsbCwgdGhlXG4gICAgICAgICAgLy8gYG5nQ2xhc3NbT25lVGltZV1XYXRjaEFjdGlvbigpYCB3aWxsIHVwZGF0ZSB0aGUgY2xhc3Nlcy5cbiAgICAgICAgICBpZiAobmV3TW9kdWxvID09PSBzZWxlY3Rvcikge1xuICAgICAgICAgICAgYWRkQ2xhc3NlcyhvbGRDbGFzc1N0cmluZyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzZXMob2xkQ2xhc3NTdHJpbmcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9sZE1vZHVsbyA9IG5ld01vZHVsbztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG5nQ2xhc3NPbmVUaW1lV2F0Y2hBY3Rpb24obmV3Q2xhc3NWYWx1ZSkge1xuICAgICAgICAgIHZhciBuZXdDbGFzc1N0cmluZyA9IHRvQ2xhc3NTdHJpbmcobmV3Q2xhc3NWYWx1ZSk7XG5cbiAgICAgICAgICBpZiAobmV3Q2xhc3NTdHJpbmcgIT09IG9sZENsYXNzU3RyaW5nKSB7XG4gICAgICAgICAgICBuZ0NsYXNzV2F0Y2hBY3Rpb24obmV3Q2xhc3NTdHJpbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG5nQ2xhc3NXYXRjaEFjdGlvbihuZXdDbGFzc1N0cmluZykge1xuICAgICAgICAgIGlmIChvbGRNb2R1bG8gPT09IHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB1cGRhdGVDbGFzc2VzKG9sZENsYXNzU3RyaW5nLCBuZXdDbGFzc1N0cmluZyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb2xkQ2xhc3NTdHJpbmcgPSBuZXdDbGFzc1N0cmluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1dO1xuXG4gIC8vIEhlbHBlcnNcbiAgZnVuY3Rpb24gYXJyYXlEaWZmZXJlbmNlKHRva2VuczEsIHRva2VuczIpIHtcbiAgICBpZiAoIXRva2VuczEgfHwgIXRva2VuczEubGVuZ3RoKSByZXR1cm4gW107XG4gICAgaWYgKCF0b2tlbnMyIHx8ICF0b2tlbnMyLmxlbmd0aCkgcmV0dXJuIHRva2VuczE7XG5cbiAgICB2YXIgdmFsdWVzID0gW107XG5cbiAgICBvdXRlcjpcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2VuczEubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0b2tlbiA9IHRva2VuczFbaV07XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRva2VuczIubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHRva2VuID09PSB0b2tlbnMyW2pdKSBjb250aW51ZSBvdXRlcjtcbiAgICAgIH1cbiAgICAgIHZhbHVlcy5wdXNoKHRva2VuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9XG5cbiAgZnVuY3Rpb24gc3BsaXQoY2xhc3NTdHJpbmcpIHtcbiAgICByZXR1cm4gY2xhc3NTdHJpbmcgJiYgY2xhc3NTdHJpbmcuc3BsaXQoJyAnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvQ2xhc3NTdHJpbmcoY2xhc3NWYWx1ZSkge1xuICAgIHZhciBjbGFzc1N0cmluZyA9IGNsYXNzVmFsdWU7XG5cbiAgICBpZiAoaXNBcnJheShjbGFzc1ZhbHVlKSkge1xuICAgICAgY2xhc3NTdHJpbmcgPSBjbGFzc1ZhbHVlLm1hcCh0b0NsYXNzU3RyaW5nKS5qb2luKCcgJyk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChjbGFzc1ZhbHVlKSkge1xuICAgICAgY2xhc3NTdHJpbmcgPSBPYmplY3Qua2V5cyhjbGFzc1ZhbHVlKS5cbiAgICAgICAgZmlsdGVyKGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gY2xhc3NWYWx1ZVtrZXldOyB9KS5cbiAgICAgICAgam9pbignICcpO1xuICAgIH1cblxuICAgIHJldHVybiBjbGFzc1N0cmluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvRmxhdFZhbHVlKGNsYXNzVmFsdWUpIHtcbiAgICB2YXIgZmxhdFZhbHVlID0gY2xhc3NWYWx1ZTtcblxuICAgIGlmIChpc0FycmF5KGNsYXNzVmFsdWUpKSB7XG4gICAgICBmbGF0VmFsdWUgPSBjbGFzc1ZhbHVlLm1hcCh0b0ZsYXRWYWx1ZSk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChjbGFzc1ZhbHVlKSkge1xuICAgICAgdmFyIGhhc1VuZGVmaW5lZCA9IGZhbHNlO1xuXG4gICAgICBmbGF0VmFsdWUgPSBPYmplY3Qua2V5cyhjbGFzc1ZhbHVlKS5maWx0ZXIoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGNsYXNzVmFsdWVba2V5XTtcblxuICAgICAgICBpZiAoIWhhc1VuZGVmaW5lZCAmJiBpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICBoYXNVbmRlZmluZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChoYXNVbmRlZmluZWQpIHtcbiAgICAgICAgLy8gUHJldmVudCB0aGUgYG9uZVRpbWVMaXRlcmFsV2F0Y2hJbnRlcmNlcHRvcmAgZnJvbSB1bnJlZ2lzdGVyaW5nXG4gICAgICAgIC8vIHRoZSB3YXRjaGVyLCBieSBpbmNsdWRpbmcgYXQgbGVhc3Qgb25lIGB1bmRlZmluZWRgIHZhbHVlLlxuICAgICAgICBmbGF0VmFsdWUucHVzaCh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmbGF0VmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsYXNzXG4gKiBAcmVzdHJpY3QgQUNcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0NsYXNzYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBkeW5hbWljYWxseSBzZXQgQ1NTIGNsYXNzZXMgb24gYW4gSFRNTCBlbGVtZW50IGJ5IGRhdGFiaW5kaW5nXG4gKiBhbiBleHByZXNzaW9uIHRoYXQgcmVwcmVzZW50cyBhbGwgY2xhc3NlcyB0byBiZSBhZGRlZC5cbiAqXG4gKiBUaGUgZGlyZWN0aXZlIG9wZXJhdGVzIGluIHRocmVlIGRpZmZlcmVudCB3YXlzLCBkZXBlbmRpbmcgb24gd2hpY2ggb2YgdGhyZWUgdHlwZXMgdGhlIGV4cHJlc3Npb25cbiAqIGV2YWx1YXRlcyB0bzpcbiAqXG4gKiAxLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZSBzdHJpbmcgc2hvdWxkIGJlIG9uZSBvciBtb3JlIHNwYWNlLWRlbGltaXRlZCBjbGFzc1xuICogbmFtZXMuXG4gKlxuICogMi4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGFuIG9iamVjdCwgdGhlbiBmb3IgZWFjaCBrZXktdmFsdWUgcGFpciBvZiB0aGVcbiAqIG9iamVjdCB3aXRoIGEgdHJ1dGh5IHZhbHVlIHRoZSBjb3JyZXNwb25kaW5nIGtleSBpcyB1c2VkIGFzIGEgY2xhc3MgbmFtZS5cbiAqXG4gKiAzLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYW4gYXJyYXksIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXkgc2hvdWxkIGVpdGhlciBiZSBhIHN0cmluZyBhcyBpblxuICogdHlwZSAxIG9yIGFuIG9iamVjdCBhcyBpbiB0eXBlIDIuIFRoaXMgbWVhbnMgdGhhdCB5b3UgY2FuIG1peCBzdHJpbmdzIGFuZCBvYmplY3RzIHRvZ2V0aGVyIGluIGFuIGFycmF5XG4gKiB0byBnaXZlIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciB3aGF0IENTUyBjbGFzc2VzIGFwcGVhci4gU2VlIHRoZSBjb2RlIGJlbG93IGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgd29uJ3QgYWRkIGR1cGxpY2F0ZSBjbGFzc2VzIGlmIGEgcGFydGljdWxhciBjbGFzcyB3YXMgYWxyZWFkeSBzZXQuXG4gKlxuICogV2hlbiB0aGUgZXhwcmVzc2lvbiBjaGFuZ2VzLCB0aGUgcHJldmlvdXNseSBhZGRlZCBjbGFzc2VzIGFyZSByZW1vdmVkIGFuZCBvbmx5IHRoZW4gYXJlIHRoZVxuICogbmV3IGNsYXNzZXMgYWRkZWQuXG4gKlxuICogQGtub3duSXNzdWVcbiAqIFlvdSBzaG91bGQgbm90IHVzZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9ufSBpbiB0aGUgdmFsdWUgb2YgdGhlIGBjbGFzc2BcbiAqIGF0dHJpYnV0ZSwgd2hlbiB1c2luZyB0aGUgYG5nQ2xhc3NgIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50LlxuICogU2VlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uI2tub3duLWlzc3VlcyBoZXJlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSAgICAgICB8IGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50ICAgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IHwganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCB8XG4gKlxuICogIyMjIG5nQ2xhc3MgYW5kIHByZS1leGlzdGluZyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnNcbiAgIFRoZSBuZ0NsYXNzIGRpcmVjdGl2ZSBzdGlsbCBzdXBwb3J0cyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnMgZXZlbiBpZiB0aGV5IGRvIG5vdCBmb2xsb3cgdGhlIG5nQW5pbWF0ZSBDU1MgbmFtaW5nIHN0cnVjdHVyZS5cbiAgIFVwb24gYW5pbWF0aW9uIG5nQW5pbWF0ZSB3aWxsIGFwcGx5IHN1cHBsZW1lbnRhcnkgQ1NTIGNsYXNzZXMgdG8gdHJhY2sgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgYW4gYW5pbWF0aW9uLCBidXQgdGhpcyB3aWxsIG5vdCBoaW5kZXJcbiAgIGFueSBwcmUtZXhpc3RpbmcgQ1NTIHRyYW5zaXRpb25zIGFscmVhZHkgb24gdGhlIGVsZW1lbnQuIFRvIGdldCBhbiBpZGVhIG9mIHdoYXQgaGFwcGVucyBkdXJpbmcgYSBjbGFzcy1iYXNlZCBhbmltYXRpb24sIGJlIHN1cmVcbiAgIHRvIHZpZXcgdGhlIHN0ZXAgYnkgc3RlcCBkZXRhaWxzIG9mIHtAbGluayAkYW5pbWF0ZSNhZGRDbGFzcyAkYW5pbWF0ZS5hZGRDbGFzc30gYW5kXG4gICB7QGxpbmsgJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgJGFuaW1hdGUucmVtb3ZlQ2xhc3N9LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLiBUaGUgcmVzdWx0XG4gKiAgIG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzXG4gKiAgIG5hbWVzLCBhbiBhcnJheSwgb3IgYSBtYXAgb2YgY2xhc3MgbmFtZXMgdG8gYm9vbGVhbiB2YWx1ZXMuIEluIHRoZSBjYXNlIG9mIGEgbWFwLCB0aGVcbiAqICAgbmFtZXMgb2YgdGhlIHByb3BlcnRpZXMgd2hvc2UgdmFsdWVzIGFyZSB0cnV0aHkgd2lsbCBiZSBhZGRlZCBhcyBjc3MgY2xhc3NlcyB0byB0aGVcbiAqICAgZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJhc2ljXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY2xhc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIntzdHJpa2U6IGRlbGV0ZWQsIGJvbGQ6IGltcG9ydGFudCwgJ2hhcy1lcnJvcic6IGVycm9yfVwiPk1hcCBTeW50YXggRXhhbXBsZTwvcD5cbiAgICAgICA8bGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiZGVsZXRlZFwiPlxuICAgICAgICAgIGRlbGV0ZWQgKGFwcGx5IFwic3RyaWtlXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImltcG9ydGFudFwiPlxuICAgICAgICAgIGltcG9ydGFudCAoYXBwbHkgXCJib2xkXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImVycm9yXCI+XG4gICAgICAgICAgZXJyb3IgKGFwcGx5IFwiaGFzLWVycm9yXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD5cbiAgICAgICA8aHI+XG4gICAgICAgPHAgbmctY2xhc3M9XCJzdHlsZVwiPlVzaW5nIFN0cmluZyBTeW50YXg8L3A+XG4gICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzdHlsZVwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCBzdHJpa2UgcmVkXCIgYXJpYS1sYWJlbD1cIlR5cGU6IGJvbGQgc3RyaWtlIHJlZFwiPlxuICAgICAgIDxocj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIltzdHlsZTEsIHN0eWxlMiwgc3R5bGUzXVwiPlVzaW5nIEFycmF5IFN5bnRheDwvcD5cbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTFcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTJcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZCAyXCI+PGJyPlxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlM1wiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiIGFyaWEtbGFiZWw9XCJUeXBlOiBib2xkLCBzdHJpa2Ugb3IgcmVkIDNcIj48YnI+XG4gICAgICAgPGhyPlxuICAgICAgIDxwIG5nLWNsYXNzPVwiW3N0eWxlNCwge29yYW5nZTogd2FybmluZ31dXCI+VXNpbmcgQXJyYXkgYW5kIE1hcCBTeW50YXg8L3A+XG4gICAgICAgPGlucHV0IG5nLW1vZGVsPVwic3R5bGU0XCIgcGxhY2Vob2xkZXI9XCJUeXBlOiBib2xkLCBzdHJpa2VcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlXCI+PGJyPlxuICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJ3YXJuaW5nXCI+IHdhcm5pbmcgKGFwcGx5IFwib3JhbmdlXCIgY2xhc3MpPC9sYWJlbD5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLnN0cmlrZSB7XG4gICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xuICAgICAgIH1cbiAgICAgICAuYm9sZCB7XG4gICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgIH1cbiAgICAgICAucmVkIHtcbiAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICB9XG4gICAgICAgLmhhcy1lcnJvciB7XG4gICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHllbGxvdztcbiAgICAgICB9XG4gICAgICAgLm9yYW5nZSB7XG4gICAgICAgICAgIGNvbG9yOiBvcmFuZ2U7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgcHMgPSBlbGVtZW50LmFsbChieS5jc3MoJ3AnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHRoZSBjbGFzcycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9ib2xkLyk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9oYXMtZXJyb3IvKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnaW1wb3J0YW50JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL2JvbGQvKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnZXJyb3InKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvaGFzLWVycm9yLyk7XG4gICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHN0cmluZyBleGFtcGxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZScpKS5jbGVhcigpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUnKSkuc2VuZEtleXMoJ3JlZCcpO1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ3JlZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ2FycmF5IGV4YW1wbGUgc2hvdWxkIGhhdmUgMyBjbGFzc2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMuZ2V0KDIpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTEnKSkuc2VuZEtleXMoJ2JvbGQnKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3N0eWxlMicpKS5zZW5kS2V5cygnc3RyaWtlJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTMnKSkuc2VuZEtleXMoJ3JlZCcpO1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgyKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ2JvbGQgc3RyaWtlIHJlZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ2FycmF5IHdpdGggbWFwIGV4YW1wbGUgc2hvdWxkIGhhdmUgMiBjbGFzc2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTQnKSkuc2VuZEtleXMoJ2JvbGQnKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3dhcm5pbmcnKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChwcy5sYXN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b0JlKCdib2xkIG9yYW5nZScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG5cbiAgIEBleGFtcGxlXG4gICAjIyMgQW5pbWF0aW9uc1xuXG4gICBUaGUgZXhhbXBsZSBiZWxvdyBkZW1vbnN0cmF0ZXMgaG93IHRvIHBlcmZvcm0gYW5pbWF0aW9ucyB1c2luZyBuZ0NsYXNzLlxuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctY2xhc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBpZD1cInNldGJ0blwiIHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInNldFwiIG5nLWNsaWNrPVwibXlWYXI9J215LWNsYXNzJ1wiPlxuICAgICAgPGlucHV0IGlkPVwiY2xlYXJidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJjbGVhclwiIG5nLWNsaWNrPVwibXlWYXI9JydcIj5cbiAgICAgIDxicj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiYmFzZS1jbGFzc1wiIG5nLWNsYXNzPVwibXlWYXJcIj5TYW1wbGUgVGV4dDwvc3Bhbj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmJhc2UtY2xhc3Mge1xuICAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xuICAgICAgIH1cblxuICAgICAgIC5iYXNlLWNsYXNzLm15LWNsYXNzIHtcbiAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICBmb250LXNpemU6M2VtO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcblxuICAgICAgICAgZWxlbWVudChieS5pZCgnc2V0YnRuJykpLmNsaWNrKCk7XG5cbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmJhc2UtY2xhc3MnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcblxuICAgICAgICAgZWxlbWVudChieS5pZCgnY2xlYXJidG4nKSkuY2xpY2soKTtcblxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdDbGFzc0RpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCcnLCB0cnVlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsYXNzT2RkXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxuICogY29uanVuY3Rpb24gd2l0aCBgbmdSZXBlYXRgIGFuZCB0YWtlIGVmZmVjdCBvbmx5IG9uIG9kZCAoZXZlbikgcm93cy5cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NsYXNzT2RkIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuIFRoZSByZXN1bHRcbiAqICAgb2YgdGhlIGV2YWx1YXRpb24gY2FuIGJlIGEgc3RyaW5nIHJlcHJlc2VudGluZyBzcGFjZSBkZWxpbWl0ZWQgY2xhc3MgbmFtZXMgb3IgYW4gYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1jbGFzcy1vZGRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPG9sIG5nLWluaXQ9XCJuYW1lcz1bJ0pvaG4nLCAnTWFyeScsICdDYXRlJywgJ1N1eiddXCI+XG4gICAgICAgICAgPGxpIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIj5cbiAgICAgICAgICAgPHNwYW4gbmctY2xhc3Mtb2RkPVwiJ29kZCdcIiBuZy1jbGFzcy1ldmVuPVwiJ2V2ZW4nXCI+XG4gICAgICAgICAgICAge3tuYW1lfX1cbiAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvb2w+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIC5vZGQge1xuICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICB9XG4gICAgICAgLmV2ZW4ge1xuICAgICAgICAgY29sb3I6IGJsdWU7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWNsYXNzLW9kZCBhbmQgbmctY2xhc3MtZXZlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMCkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXG4gICAgICAgICAgIHRvTWF0Y2goL29kZC8pO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMSkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXG4gICAgICAgICAgIHRvTWF0Y2goL2V2ZW4vKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdDbGFzc09kZERpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCdPZGQnLCAwKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsYXNzRXZlblxuICogQHJlc3RyaWN0IEFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQ2xhc3NPZGRgIGFuZCBgbmdDbGFzc0V2ZW5gIGRpcmVjdGl2ZXMgd29yayBleGFjdGx5IGFzXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xhc3MgbmdDbGFzc30sIGV4Y2VwdCB0aGV5IHdvcmsgaW5cbiAqIGNvbmp1bmN0aW9uIHdpdGggYG5nUmVwZWF0YCBhbmQgdGFrZSBlZmZlY3Qgb25seSBvbiBvZGQgKGV2ZW4pIHJvd3MuXG4gKlxuICogVGhpcyBkaXJlY3RpdmUgY2FuIGJlIGFwcGxpZWQgb25seSB3aXRoaW4gdGhlIHNjb3BlIG9mIGFuXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IG5nUmVwZWF0fS5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzc0V2ZW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlXG4gKiAgIHJlc3VsdCBvZiB0aGUgZXZhbHVhdGlvbiBjYW4gYmUgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHNwYWNlIGRlbGltaXRlZCBjbGFzcyBuYW1lcyBvciBhbiBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNsYXNzLWV2ZW5cIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPG9sIG5nLWluaXQ9XCJuYW1lcz1bJ0pvaG4nLCAnTWFyeScsICdDYXRlJywgJ1N1eiddXCI+XG4gICAgICAgICAgPGxpIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIj5cbiAgICAgICAgICAgPHNwYW4gbmctY2xhc3Mtb2RkPVwiJ29kZCdcIiBuZy1jbGFzcy1ldmVuPVwiJ2V2ZW4nXCI+XG4gICAgICAgICAgICAge3tuYW1lfX0gJm5ic3A7ICZuYnNwOyAmbmJzcDtcbiAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvb2w+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIC5vZGQge1xuICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICB9XG4gICAgICAgLmV2ZW4ge1xuICAgICAgICAgY29sb3I6IGJsdWU7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWNsYXNzLW9kZCBhbmQgbmctY2xhc3MtZXZlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMCkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXG4gICAgICAgICAgIHRvTWF0Y2goL29kZC8pO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMSkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXG4gICAgICAgICAgIHRvTWF0Y2goL2V2ZW4vKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdDbGFzc0V2ZW5EaXJlY3RpdmUgPSBjbGFzc0RpcmVjdGl2ZSgnRXZlbicsIDEpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2xvYWtcbiAqIEByZXN0cmljdCBBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0Nsb2FrYCBkaXJlY3RpdmUgaXMgdXNlZCB0byBwcmV2ZW50IHRoZSBBbmd1bGFySlMgaHRtbCB0ZW1wbGF0ZSBmcm9tIGJlaW5nIGJyaWVmbHlcbiAqIGRpc3BsYXllZCBieSB0aGUgYnJvd3NlciBpbiBpdHMgcmF3ICh1bmNvbXBpbGVkKSBmb3JtIHdoaWxlIHlvdXIgYXBwbGljYXRpb24gaXMgbG9hZGluZy4gVXNlIHRoaXNcbiAqIGRpcmVjdGl2ZSB0byBhdm9pZCB0aGUgdW5kZXNpcmFibGUgZmxpY2tlciBlZmZlY3QgY2F1c2VkIGJ5IHRoZSBodG1sIHRlbXBsYXRlIGRpc3BsYXkuXG4gKlxuICogVGhlIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCB0byB0aGUgYDxib2R5PmAgZWxlbWVudCwgYnV0IHRoZSBwcmVmZXJyZWQgdXNhZ2UgaXMgdG8gYXBwbHlcbiAqIG11bHRpcGxlIGBuZ0Nsb2FrYCBkaXJlY3RpdmVzIHRvIHNtYWxsIHBvcnRpb25zIG9mIHRoZSBwYWdlIHRvIHBlcm1pdCBwcm9ncmVzc2l2ZSByZW5kZXJpbmdcbiAqIG9mIHRoZSBicm93c2VyIHZpZXcuXG4gKlxuICogYG5nQ2xvYWtgIHdvcmtzIGluIGNvb3BlcmF0aW9uIHdpdGggdGhlIGZvbGxvd2luZyBjc3MgcnVsZSBlbWJlZGRlZCB3aXRoaW4gYGFuZ3VsYXIuanNgIGFuZFxuICogYGFuZ3VsYXIubWluLmpzYC5cbiAqIEZvciBDU1AgbW9kZSBwbGVhc2UgYWRkIGBhbmd1bGFyLWNzcC5jc3NgIHRvIHlvdXIgaHRtbCBmaWxlIChzZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NzcCBuZ0NzcH0pLlxuICpcbiAqIGBgYGNzc1xuICogW25nXFw6Y2xvYWtdLCBbbmctY2xvYWtdLCBbZGF0YS1uZy1jbG9ha10sIFt4LW5nLWNsb2FrXSwgLm5nLWNsb2FrLCAueC1uZy1jbG9hayB7XG4gKiAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFdoZW4gdGhpcyBjc3MgcnVsZSBpcyBsb2FkZWQgYnkgdGhlIGJyb3dzZXIsIGFsbCBodG1sIGVsZW1lbnRzIChpbmNsdWRpbmcgdGhlaXIgY2hpbGRyZW4pIHRoYXRcbiAqIGFyZSB0YWdnZWQgd2l0aCB0aGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZSBhcmUgaGlkZGVuLiBXaGVuIEFuZ3VsYXJKUyBlbmNvdW50ZXJzIHRoaXMgZGlyZWN0aXZlXG4gKiBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uIG9mIHRoZSB0ZW1wbGF0ZSBpdCBkZWxldGVzIHRoZSBgbmdDbG9ha2AgZWxlbWVudCBhdHRyaWJ1dGUsIG1ha2luZ1xuICogdGhlIGNvbXBpbGVkIGVsZW1lbnQgdmlzaWJsZS5cbiAqXG4gKiBGb3IgdGhlIGJlc3QgcmVzdWx0LCB0aGUgYGFuZ3VsYXIuanNgIHNjcmlwdCBtdXN0IGJlIGxvYWRlZCBpbiB0aGUgaGVhZCBzZWN0aW9uIG9mIHRoZSBodG1sXG4gKiBkb2N1bWVudDsgYWx0ZXJuYXRpdmVseSwgdGhlIGNzcyBydWxlIGFib3ZlIG11c3QgYmUgaW5jbHVkZWQgaW4gdGhlIGV4dGVybmFsIHN0eWxlc2hlZXQgb2YgdGhlXG4gKiBhcHBsaWNhdGlvbi5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNsb2FrXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxkaXYgaWQ9XCJ0ZW1wbGF0ZTFcIiBuZy1jbG9haz57eyAnaGVsbG8nIH19PC9kaXY+XG4gICAgICAgIDxkaXYgaWQ9XCJ0ZW1wbGF0ZTJcIiBjbGFzcz1cIm5nLWNsb2FrXCI+e3sgJ3dvcmxkJyB9fTwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIHJlbW92ZSB0aGUgdGVtcGxhdGUgZGlyZWN0aXZlIGFuZCBjc3MgY2xhc3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdCgkKCcjdGVtcGxhdGUxJykuZ2V0QXR0cmlidXRlKCduZy1jbG9haycpKS5cbiAgICAgICAgICAgdG9CZU51bGwoKTtcbiAgICAgICAgIGV4cGVjdCgkKCcjdGVtcGxhdGUyJykuZ2V0QXR0cmlidXRlKCduZy1jbG9haycpKS5cbiAgICAgICAgICAgdG9CZU51bGwoKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICpcbiAqL1xudmFyIG5nQ2xvYWtEaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICBhdHRyLiRzZXQoJ25nQ2xvYWsnLCB1bmRlZmluZWQpO1xuICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ25nLWNsb2FrJyk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ29udHJvbGxlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZSBhdHRhY2hlcyBhIGNvbnRyb2xsZXIgY2xhc3MgdG8gdGhlIHZpZXcuIFRoaXMgaXMgYSBrZXkgYXNwZWN0IG9mIGhvdyBhbmd1bGFyXG4gKiBzdXBwb3J0cyB0aGUgcHJpbmNpcGxlcyBiZWhpbmQgdGhlIE1vZGVsLVZpZXctQ29udHJvbGxlciBkZXNpZ24gcGF0dGVybi5cbiAqXG4gKiBNVkMgY29tcG9uZW50cyBpbiBhbmd1bGFyOlxuICpcbiAqICogTW9kZWwg4oCUIE1vZGVscyBhcmUgdGhlIHByb3BlcnRpZXMgb2YgYSBzY29wZTsgc2NvcGVzIGFyZSBhdHRhY2hlZCB0byB0aGUgRE9NIHdoZXJlIHNjb3BlIHByb3BlcnRpZXNcbiAqICAgYXJlIGFjY2Vzc2VkIHRocm91Z2ggYmluZGluZ3MuXG4gKiAqIFZpZXcg4oCUIFRoZSB0ZW1wbGF0ZSAoSFRNTCB3aXRoIGRhdGEgYmluZGluZ3MpIHRoYXQgaXMgcmVuZGVyZWQgaW50byB0aGUgVmlldy5cbiAqICogQ29udHJvbGxlciDigJQgVGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZSBzcGVjaWZpZXMgYSBDb250cm9sbGVyIGNsYXNzOyB0aGUgY2xhc3MgY29udGFpbnMgYnVzaW5lc3NcbiAqICAgbG9naWMgYmVoaW5kIHRoZSBhcHBsaWNhdGlvbiB0byBkZWNvcmF0ZSB0aGUgc2NvcGUgd2l0aCBmdW5jdGlvbnMgYW5kIHZhbHVlc1xuICpcbiAqIE5vdGUgdGhhdCB5b3UgY2FuIGFsc28gYXR0YWNoIGNvbnRyb2xsZXJzIHRvIHRoZSBET00gYnkgZGVjbGFyaW5nIGl0IGluIGEgcm91dGUgZGVmaW5pdGlvblxuICogdmlhIHRoZSB7QGxpbmsgbmdSb3V0ZS4kcm91dGUgJHJvdXRlfSBzZXJ2aWNlLiBBIGNvbW1vbiBtaXN0YWtlIGlzIHRvIGRlY2xhcmUgdGhlIGNvbnRyb2xsZXJcbiAqIGFnYWluIHVzaW5nIGBuZy1jb250cm9sbGVyYCBpbiB0aGUgdGVtcGxhdGUgaXRzZWxmLiAgVGhpcyB3aWxsIGNhdXNlIHRoZSBjb250cm9sbGVyIHRvIGJlIGF0dGFjaGVkXG4gKiBhbmQgZXhlY3V0ZWQgdHdpY2UuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSA1MDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDb250cm9sbGVyIE5hbWUgb2YgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiByZWdpc3RlcmVkIHdpdGggdGhlIGN1cnJlbnRcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyICRjb250cm9sbGVyUHJvdmlkZXJ9IG9yIGFuIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259XG4gKiB0aGF0IG9uIHRoZSBjdXJyZW50IHNjb3BlIGV2YWx1YXRlcyB0byBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICpcbiAqIFRoZSBjb250cm9sbGVyIGluc3RhbmNlIGNhbiBiZSBwdWJsaXNoZWQgaW50byBhIHNjb3BlIHByb3BlcnR5IGJ5IHNwZWNpZnlpbmdcbiAqIGBuZy1jb250cm9sbGVyPVwiYXMgcHJvcGVydHlOYW1lXCJgLlxuICpcbiAqIElmIHRoZSBjdXJyZW50IGAkY29udHJvbGxlclByb3ZpZGVyYCBpcyBjb25maWd1cmVkIHRvIHVzZSBnbG9iYWxzICh2aWFcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI2FsbG93R2xvYmFscyBgJGNvbnRyb2xsZXJQcm92aWRlci5hbGxvd0dsb2JhbHMoKWAgfSksIHRoaXMgbWF5XG4gKiBhbHNvIGJlIHRoZSBuYW1lIG9mIGEgZ2xvYmFsbHkgYWNjZXNzaWJsZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiAoZGVwcmVjYXRlZCwgbm90IHJlY29tbWVuZGVkKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBpcyBhIHNpbXBsZSBmb3JtIGZvciBlZGl0aW5nIHVzZXIgY29udGFjdCBpbmZvcm1hdGlvbi4gQWRkaW5nLCByZW1vdmluZywgY2xlYXJpbmcsIGFuZFxuICogZ3JlZXRpbmcgYXJlIG1ldGhvZHMgZGVjbGFyZWQgb24gdGhlIGNvbnRyb2xsZXIgKHNlZSBzb3VyY2UgdGFiKS4gVGhlc2UgbWV0aG9kcyBjYW5cbiAqIGVhc2lseSBiZSBjYWxsZWQgZnJvbSB0aGUgQW5ndWxhckpTIG1hcmt1cC4gQW55IGNoYW5nZXMgdG8gdGhlIGRhdGEgYXJlIGF1dG9tYXRpY2FsbHkgcmVmbGVjdGVkXG4gKiBpbiB0aGUgVmlldyB3aXRob3V0IHRoZSBuZWVkIGZvciBhIG1hbnVhbCB1cGRhdGUuXG4gKlxuICogVHdvIGRpZmZlcmVudCBkZWNsYXJhdGlvbiBzdHlsZXMgYXJlIGluY2x1ZGVkIGJlbG93OlxuICpcbiAqICogb25lIGJpbmRzIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgZGlyZWN0bHkgb250byB0aGUgY29udHJvbGxlciB1c2luZyBgdGhpc2A6XG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjEgYXMgc2V0dGluZ3NcImBcbiAqICogb25lIGluamVjdHMgYCRzY29wZWAgaW50byB0aGUgY29udHJvbGxlcjpcbiAqIGBuZy1jb250cm9sbGVyPVwiU2V0dGluZ3NDb250cm9sbGVyMlwiYFxuICpcbiAqIFRoZSBzZWNvbmQgb3B0aW9uIGlzIG1vcmUgY29tbW9uIGluIHRoZSBBbmd1bGFySlMgY29tbXVuaXR5LCBhbmQgaXMgZ2VuZXJhbGx5IHVzZWQgaW4gYm9pbGVycGxhdGVzXG4gKiBhbmQgaW4gdGhpcyBndWlkZS4gSG93ZXZlciwgdGhlcmUgYXJlIGFkdmFudGFnZXMgdG8gYmluZGluZyBwcm9wZXJ0aWVzIGRpcmVjdGx5IHRvIHRoZSBjb250cm9sbGVyXG4gKiBhbmQgYXZvaWRpbmcgc2NvcGUuXG4gKlxuICogKiBVc2luZyBgY29udHJvbGxlciBhc2AgbWFrZXMgaXQgb2J2aW91cyB3aGljaCBjb250cm9sbGVyIHlvdSBhcmUgYWNjZXNzaW5nIGluIHRoZSB0ZW1wbGF0ZSB3aGVuXG4gKiBtdWx0aXBsZSBjb250cm9sbGVycyBhcHBseSB0byBhbiBlbGVtZW50LlxuICogKiBJZiB5b3UgYXJlIHdyaXRpbmcgeW91ciBjb250cm9sbGVycyBhcyBjbGFzc2VzIHlvdSBoYXZlIGVhc2llciBhY2Nlc3MgdG8gdGhlIHByb3BlcnRpZXMgYW5kXG4gKiBtZXRob2RzLCB3aGljaCB3aWxsIGFwcGVhciBvbiB0aGUgc2NvcGUsIGZyb20gaW5zaWRlIHRoZSBjb250cm9sbGVyIGNvZGUuXG4gKiAqIFNpbmNlIHRoZXJlIGlzIGFsd2F5cyBhIGAuYCBpbiB0aGUgYmluZGluZ3MsIHlvdSBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IHByb3RvdHlwYWxcbiAqIGluaGVyaXRhbmNlIG1hc2tpbmcgcHJpbWl0aXZlcy5cbiAqXG4gKiBUaGlzIGV4YW1wbGUgZGVtb25zdHJhdGVzIHRoZSBgY29udHJvbGxlciBhc2Agc3ludGF4LlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0NvbnRyb2xsZXJBc1wiIG1vZHVsZT1cImNvbnRyb2xsZXJBc0V4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgIDxkaXYgaWQ9XCJjdHJsLWFzLWV4bXBsXCIgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjEgYXMgc2V0dGluZ3NcIj5cbiAqICAgICAgPGxhYmVsPk5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwic2V0dGluZ3MubmFtZVwiLz48L2xhYmVsPlxuICogICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic2V0dGluZ3MuZ3JlZXQoKVwiPmdyZWV0PC9idXR0b24+PGJyLz5cbiAqICAgICAgQ29udGFjdDpcbiAqICAgICAgPHVsPlxuICogICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzXCI+XG4gKiAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwiY29udGFjdC50eXBlXCIgYXJpYS1sYWJlbD1cIkNvbnRhY3QgbWV0aG9kXCIgaWQ9XCJzZWxlY3Rfe3skaW5kZXh9fVwiPlxuICogICAgICAgICAgICAgPG9wdGlvbj5waG9uZTwvb3B0aW9uPlxuICogICAgICAgICAgICAgPG9wdGlvbj5lbWFpbDwvb3B0aW9uPlxuICogICAgICAgICAgPC9zZWxlY3Q+XG4gKiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbnRhY3QudmFsdWVcIiBhcmlhLWxhYmVsbGVkYnk9XCJzZWxlY3Rfe3skaW5kZXh9fVwiIC8+XG4gKiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic2V0dGluZ3MuY2xlYXJDb250YWN0KGNvbnRhY3QpXCI+Y2xlYXI8L2J1dHRvbj5cbiAqICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzZXR0aW5ncy5yZW1vdmVDb250YWN0KGNvbnRhY3QpXCIgYXJpYS1sYWJlbD1cIlJlbW92ZVwiPlg8L2J1dHRvbj5cbiAqICAgICAgICA8L2xpPlxuICogICAgICAgIDxsaT48YnV0dG9uIG5nLWNsaWNrPVwic2V0dGluZ3MuYWRkQ29udGFjdCgpXCI+YWRkPC9idXR0b24+PC9saT5cbiAqICAgICA8L3VsPlxuICogICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2xsZXJBc0V4YW1wbGUnLCBbXSlcbiAqICAgICAgLmNvbnRyb2xsZXIoJ1NldHRpbmdzQ29udHJvbGxlcjEnLCBTZXR0aW5nc0NvbnRyb2xsZXIxKTtcbiAqXG4gKiAgICBmdW5jdGlvbiBTZXR0aW5nc0NvbnRyb2xsZXIxKCkge1xuICogICAgICB0aGlzLm5hbWUgPSAnSm9obiBTbWl0aCc7XG4gKiAgICAgIHRoaXMuY29udGFjdHMgPSBbXG4gKiAgICAgICAge3R5cGU6ICdwaG9uZScsIHZhbHVlOiAnNDA4IDU1NSAxMjEyJ30sXG4gKiAgICAgICAge3R5cGU6ICdlbWFpbCcsIHZhbHVlOiAnam9obi5zbWl0aEBleGFtcGxlLm9yZyd9XG4gKiAgICAgIF07XG4gKiAgICB9XG4gKlxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUuZ3JlZXQgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgYWxlcnQodGhpcy5uYW1lKTtcbiAqICAgIH07XG4gKlxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUuYWRkQ29udGFjdCA9IGZ1bmN0aW9uKCkge1xuICogICAgICB0aGlzLmNvbnRhY3RzLnB1c2goe3R5cGU6ICdlbWFpbCcsIHZhbHVlOiAneW91cm5hbWVAZXhhbXBsZS5vcmcnfSk7XG4gKiAgICB9O1xuICpcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLnJlbW92ZUNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0VG9SZW1vdmUpIHtcbiAqICAgICB2YXIgaW5kZXggPSB0aGlzLmNvbnRhY3RzLmluZGV4T2YoY29udGFjdFRvUmVtb3ZlKTtcbiAqICAgICAgdGhpcy5jb250YWN0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICogICAgfTtcbiAqXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5jbGVhckNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XG4gKiAgICAgIGNvbnRhY3QudHlwZSA9ICdwaG9uZSc7XG4gKiAgICAgIGNvbnRhY3QudmFsdWUgPSAnJztcbiAqICAgIH07XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgIGl0KCdzaG91bGQgY2hlY2sgY29udHJvbGxlciBhcycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgdmFyIGNvbnRhaW5lciA9IGVsZW1lbnQoYnkuaWQoJ2N0cmwtYXMtZXhtcGwnKSk7XG4gKiAgICAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5tb2RlbCgnc2V0dGluZ3MubmFtZScpKVxuICogICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJ0pvaG4gU21pdGgnKTtcbiAqXG4gKiAgICAgICB2YXIgZmlyc3RSZXBlYXQgPVxuICogICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzJykucm93KDApKTtcbiAqICAgICAgIHZhciBzZWNvbmRSZXBlYXQgPVxuICogICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzJykucm93KDEpKTtcbiAqXG4gKiAgICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAgLnRvQmUoJzQwOCA1NTUgMTIxMicpO1xuICpcbiAqICAgICAgIGV4cGVjdChzZWNvbmRSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAgLnRvQmUoJ2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnKTtcbiAqXG4gKiAgICAgICBmaXJzdFJlcGVhdC5lbGVtZW50KGJ5LmJ1dHRvblRleHQoJ2NsZWFyJykpLmNsaWNrKCk7XG4gKlxuICogICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCcnKTtcbiAqXG4gKiAgICAgICBjb250YWluZXIuZWxlbWVudChieS5idXR0b25UZXh0KCdhZGQnKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHMnKS5yb3coMikpXG4gKiAgICAgICAgICAgLmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSlcbiAqICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCd5b3VybmFtZUBleGFtcGxlLm9yZycpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgXCJhdHRhY2ggdG8gYCRzY29wZWBcIiBzdHlsZSBvZiBjb250cm9sbGVyLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0NvbnRyb2xsZXJcIiBtb2R1bGU9XCJjb250cm9sbGVyRXhhbXBsZVwiPlxuICogIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgIDxkaXYgaWQ9XCJjdHJsLWV4bXBsXCIgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcIj5cbiAqICAgICA8bGFiZWw+TmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJuYW1lXCIvPjwvbGFiZWw+XG4gKiAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImdyZWV0KClcIj5ncmVldDwvYnV0dG9uPjxici8+XG4gKiAgICAgQ29udGFjdDpcbiAqICAgICA8dWw+XG4gKiAgICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxuICogICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwiY29udGFjdC50eXBlXCIgaWQ9XCJzZWxlY3Rfe3skaW5kZXh9fVwiPlxuICogICAgICAgICAgICA8b3B0aW9uPnBob25lPC9vcHRpb24+XG4gKiAgICAgICAgICAgIDxvcHRpb24+ZW1haWw8L29wdGlvbj5cbiAqICAgICAgICAgPC9zZWxlY3Q+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29udGFjdC52YWx1ZVwiIGFyaWEtbGFiZWxsZWRieT1cInNlbGVjdF97eyRpbmRleH19XCIgLz5cbiAqICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNsZWFyQ29udGFjdChjb250YWN0KVwiPmNsZWFyPC9idXR0b24+XG4gKiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJyZW1vdmVDb250YWN0KGNvbnRhY3QpXCI+WDwvYnV0dG9uPlxuICogICAgICAgPC9saT5cbiAqICAgICAgIDxsaT5bIDxidXR0b24gbmctY2xpY2s9XCJhZGRDb250YWN0KClcIj5hZGQ8L2J1dHRvbj4gXTwvbGk+XG4gKiAgICA8L3VsPlxuICogICA8L2Rpdj5cbiAqICA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbGxlckV4YW1wbGUnLCBbXSlcbiAqICAgICAuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyMicsIFsnJHNjb3BlJywgU2V0dGluZ3NDb250cm9sbGVyMl0pO1xuICpcbiAqICAgZnVuY3Rpb24gU2V0dGluZ3NDb250cm9sbGVyMigkc2NvcGUpIHtcbiAqICAgICAkc2NvcGUubmFtZSA9ICdKb2huIFNtaXRoJztcbiAqICAgICAkc2NvcGUuY29udGFjdHMgPSBbXG4gKiAgICAgICB7dHlwZToncGhvbmUnLCB2YWx1ZTonNDA4IDU1NSAxMjEyJ30sXG4gKiAgICAgICB7dHlwZTonZW1haWwnLCB2YWx1ZTonam9obi5zbWl0aEBleGFtcGxlLm9yZyd9XG4gKiAgICAgXTtcbiAqXG4gKiAgICAgJHNjb3BlLmdyZWV0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICBhbGVydCgkc2NvcGUubmFtZSk7XG4gKiAgICAgfTtcbiAqXG4gKiAgICAgJHNjb3BlLmFkZENvbnRhY3QgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICRzY29wZS5jb250YWN0cy5wdXNoKHt0eXBlOidlbWFpbCcsIHZhbHVlOid5b3VybmFtZUBleGFtcGxlLm9yZyd9KTtcbiAqICAgICB9O1xuICpcbiAqICAgICAkc2NvcGUucmVtb3ZlQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3RUb1JlbW92ZSkge1xuICogICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLmNvbnRhY3RzLmluZGV4T2YoY29udGFjdFRvUmVtb3ZlKTtcbiAqICAgICAgICRzY29wZS5jb250YWN0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICogICAgIH07XG4gKlxuICogICAgICRzY29wZS5jbGVhckNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XG4gKiAgICAgICBjb250YWN0LnR5cGUgPSAncGhvbmUnO1xuICogICAgICAgY29udGFjdC52YWx1ZSA9ICcnO1xuICogICAgIH07XG4gKiAgIH1cbiAqICA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgaXQoJ3Nob3VsZCBjaGVjayBjb250cm9sbGVyJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50KGJ5LmlkKCdjdHJsLWV4bXBsJykpO1xuICpcbiAqICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5Lm1vZGVsKCduYW1lJykpXG4gKiAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCdKb2huIFNtaXRoJyk7XG4gKlxuICogICAgICB2YXIgZmlyc3RSZXBlYXQgPVxuICogICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gY29udGFjdHMnKS5yb3coMCkpO1xuICogICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cbiAqICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDEpKTtcbiAqXG4gKiAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgIC50b0JlKCc0MDggNTU1IDEyMTInKTtcbiAqICAgICAgZXhwZWN0KHNlY29uZFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgIC50b0JlKCdqb2huLnNtaXRoQGV4YW1wbGUub3JnJyk7XG4gKlxuICogICAgICBmaXJzdFJlcGVhdC5lbGVtZW50KGJ5LmJ1dHRvblRleHQoJ2NsZWFyJykpLmNsaWNrKCk7XG4gKlxuICogICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAudG9CZSgnJyk7XG4gKlxuICogICAgICBjb250YWluZXIuZWxlbWVudChieS5idXR0b25UZXh0KCdhZGQnKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBjb250YWN0cycpLnJvdygyKSlcbiAqICAgICAgICAgIC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpXG4gKiAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgLnRvQmUoJ3lvdXJuYW1lQGV4YW1wbGUub3JnJyk7XG4gKiAgICB9KTtcbiAqICA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cblxuICovXG52YXIgbmdDb250cm9sbGVyRGlyZWN0aXZlID0gW2Z1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgc2NvcGU6IHRydWUsXG4gICAgY29udHJvbGxlcjogJ0AnLFxuICAgIHByaW9yaXR5OiA1MDBcbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ3NwXG4gKlxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogQW5ndWxhckpTIGhhcyBzb21lIGZlYXR1cmVzIHRoYXQgY2FuIGNvbmZsaWN0IHdpdGggY2VydGFpbiByZXN0cmljdGlvbnMgdGhhdCBhcmUgYXBwbGllZCB3aGVuIHVzaW5nXG4gKiBbQ1NQIChDb250ZW50IFNlY3VyaXR5IFBvbGljeSldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL1NlY3VyaXR5L0NTUCkgcnVsZXMuXG4gKlxuICogSWYgeW91IGludGVuZCB0byBpbXBsZW1lbnQgQ1NQIHdpdGggdGhlc2UgcnVsZXMgdGhlbiB5b3UgbXVzdCB0ZWxsIEFuZ3VsYXJKUyBub3QgdG8gdXNlIHRoZXNlXG4gKiBmZWF0dXJlcy5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB3aGVuIGRldmVsb3BpbmcgdGhpbmdzIGxpa2UgR29vZ2xlIENocm9tZSBFeHRlbnNpb25zIG9yIFVuaXZlcnNhbCBXaW5kb3dzIEFwcHMuXG4gKlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZGVmYXVsdCBydWxlcyBpbiBDU1AgYWZmZWN0IEFuZ3VsYXJKUzpcbiAqXG4gKiAqIFRoZSB1c2Ugb2YgYGV2YWwoKWAsIGBGdW5jdGlvbihzdHJpbmcpYCBhbmQgc2ltaWxhciBmdW5jdGlvbnMgdG8gZHluYW1pY2FsbHkgY3JlYXRlIGFuZCBleGVjdXRlXG4gKiBjb2RlIGZyb20gc3RyaW5ncyBpcyBmb3JiaWRkZW4uIEFuZ3VsYXJKUyBtYWtlcyB1c2Ugb2YgdGhpcyBpbiB0aGUge0BsaW5rICRwYXJzZX0gc2VydmljZSB0b1xuICogcHJvdmlkZSBhIDMwJSBpbmNyZWFzZSBpbiB0aGUgc3BlZWQgb2YgZXZhbHVhdGluZyBBbmd1bGFySlMgZXhwcmVzc2lvbnMuIChUaGlzIENTUCBydWxlIGNhbiBiZVxuICogZGlzYWJsZWQgd2l0aCB0aGUgQ1NQIGtleXdvcmQgYHVuc2FmZS1ldmFsYCwgYnV0IGl0IGlzIGdlbmVyYWxseSBub3QgcmVjb21tZW5kZWQgYXMgaXQgd291bGRcbiAqIHdlYWtlbiB0aGUgcHJvdGVjdGlvbnMgb2ZmZXJlZCBieSBDU1AuKVxuICpcbiAqICogVGhlIHVzZSBvZiBpbmxpbmUgcmVzb3VyY2VzLCBzdWNoIGFzIGlubGluZSBgPHNjcmlwdD5gIGFuZCBgPHN0eWxlPmAgZWxlbWVudHMsIGFyZSBmb3JiaWRkZW4uXG4gKiBUaGlzIHByZXZlbnRzIGFwcHMgZnJvbSBpbmplY3RpbmcgY3VzdG9tIHN0eWxlcyBkaXJlY3RseSBpbnRvIHRoZSBkb2N1bWVudC4gQW5ndWxhckpTIG1ha2VzIHVzZSBvZlxuICogdGhpcyB0byBpbmNsdWRlIHNvbWUgQ1NTIHJ1bGVzIChlLmcuIHtAbGluayBuZ0Nsb2FrfSBhbmQge0BsaW5rIG5nSGlkZX0pLiBUbyBtYWtlIHRoZXNlXG4gKiBkaXJlY3RpdmVzIHdvcmsgd2hlbiBhIENTUCBydWxlIGlzIGJsb2NraW5nIGlubGluZSBzdHlsZXMsIHlvdSBtdXN0IGxpbmsgdG8gdGhlIGBhbmd1bGFyLWNzcC5jc3NgXG4gKiBpbiB5b3VyIEhUTUwgbWFudWFsbHkuIChUaGlzIENTUCBydWxlIGNhbiBiZSBkaXNhYmxlZCB3aXRoIHRoZSBDU1Aga2V5d29yZCBgdW5zYWZlLWlubGluZWAsIGJ1dFxuICogaXQgaXMgZ2VuZXJhbGx5IG5vdCByZWNvbW1lbmRlZCBhcyBpdCB3b3VsZCB3ZWFrZW4gdGhlIHByb3RlY3Rpb25zIG9mZmVyZWQgYnkgQ1NQLilcbiAqXG4gKiBJZiB5b3UgZG8gbm90IHByb3ZpZGUgYG5nQ3NwYCB0aGVuIEFuZ3VsYXJKUyB0cmllcyB0byBhdXRvZGV0ZWN0IGlmIENTUCBpcyBibG9ja2luZyBkeW5hbWljIGNvZGVcbiAqIGNyZWF0aW9uIGZyb20gc3RyaW5ncyAoZS5nLiwgYHVuc2FmZS1ldmFsYCBub3Qgc3BlY2lmaWVkIGluIENTUCBoZWFkZXIpIGFuZCBhdXRvbWF0aWNhbGx5XG4gKiBkZWFjdGl2YXRlcyB0aGlzIGZlYXR1cmUgaW4gdGhlIHtAbGluayAkcGFyc2V9IHNlcnZpY2UuIFRoaXMgYXV0b2RldGVjdGlvbiwgaG93ZXZlciwgdHJpZ2dlcnMgYVxuICogQ1NQIGVycm9yIHRvIGJlIGxvZ2dlZCBpbiB0aGUgY29uc29sZTpcbiAqXG4gKiBgYGBcbiAqIFJlZnVzZWQgdG8gZXZhbHVhdGUgYSBzdHJpbmcgYXMgSmF2YVNjcmlwdCBiZWNhdXNlICd1bnNhZmUtZXZhbCcgaXMgbm90IGFuIGFsbG93ZWQgc291cmNlIG9mXG4gKiBzY3JpcHQgaW4gdGhlIGZvbGxvd2luZyBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBkaXJlY3RpdmU6IFwiZGVmYXVsdC1zcmMgJ3NlbGYnXCIuIE5vdGUgdGhhdFxuICogJ3NjcmlwdC1zcmMnIHdhcyBub3QgZXhwbGljaXRseSBzZXQsIHNvICdkZWZhdWx0LXNyYycgaXMgdXNlZCBhcyBhIGZhbGxiYWNrLlxuICogYGBgXG4gKlxuICogVGhpcyBlcnJvciBpcyBoYXJtbGVzcyBidXQgYW5ub3lpbmcuIFRvIHByZXZlbnQgdGhlIGVycm9yIGZyb20gc2hvd2luZyB1cCwgcHV0IHRoZSBgbmdDc3BgXG4gKiBkaXJlY3RpdmUgb24gYW4gZWxlbWVudCBvZiB0aGUgSFRNTCBkb2N1bWVudCB0aGF0IGFwcGVhcnMgYmVmb3JlIHRoZSBgPHNjcmlwdD5gIHRhZyB0aGF0IGxvYWRzXG4gKiB0aGUgYGFuZ3VsYXIuanNgIGZpbGUuXG4gKlxuICogKk5vdGU6IFRoaXMgZGlyZWN0aXZlIGlzIG9ubHkgYXZhaWxhYmxlIGluIHRoZSBgbmctY3NwYCBhbmQgYGRhdGEtbmctY3NwYCBhdHRyaWJ1dGUgZm9ybS4qXG4gKlxuICogWW91IGNhbiBzcGVjaWZ5IHdoaWNoIG9mIHRoZSBDU1AgcmVsYXRlZCBBbmd1bGFySlMgZmVhdHVyZXMgc2hvdWxkIGJlIGRlYWN0aXZhdGVkIGJ5IHByb3ZpZGluZ1xuICogYSB2YWx1ZSBmb3IgdGhlIGBuZy1jc3BgIGF0dHJpYnV0ZS4gVGhlIG9wdGlvbnMgYXJlIGFzIGZvbGxvd3M6XG4gKlxuICogKiBuby1pbmxpbmUtc3R5bGU6IHRoaXMgc3RvcHMgQW5ndWxhckpTIGZyb20gaW5qZWN0aW5nIENTUyBzdHlsZXMgaW50byB0aGUgRE9NXG4gKlxuICogKiBuby11bnNhZmUtZXZhbDogdGhpcyBzdG9wcyBBbmd1bGFySlMgZnJvbSBvcHRpbWl6aW5nICRwYXJzZSB3aXRoIHVuc2FmZSBldmFsIG9mIHN0cmluZ3NcbiAqXG4gKiBZb3UgY2FuIHVzZSB0aGVzZSB2YWx1ZXMgaW4gdGhlIGZvbGxvd2luZyBjb21iaW5hdGlvbnM6XG4gKlxuICpcbiAqICogTm8gZGVjbGFyYXRpb24gbWVhbnMgdGhhdCBBbmd1bGFySlMgd2lsbCBhc3N1bWUgdGhhdCB5b3UgY2FuIGRvIGlubGluZSBzdHlsZXMsIGJ1dCBpdCB3aWxsIGRvXG4gKiBhIHJ1bnRpbWUgY2hlY2sgZm9yIHVuc2FmZS1ldmFsLiBFLmcuIGA8Ym9keT5gLiBUaGlzIGlzIGJhY2t3YXJkbHkgY29tcGF0aWJsZSB3aXRoIHByZXZpb3VzXG4gKiB2ZXJzaW9ucyBvZiBBbmd1bGFySlMuXG4gKlxuICogKiBBIHNpbXBsZSBgbmctY3NwYCAob3IgYGRhdGEtbmctY3NwYCkgYXR0cmlidXRlIHdpbGwgdGVsbCBBbmd1bGFySlMgdG8gZGVhY3RpdmF0ZSBib3RoIGlubGluZVxuICogc3R5bGVzIGFuZCB1bnNhZmUgZXZhbC4gRS5nLiBgPGJvZHkgbmctY3NwPmAuIFRoaXMgaXMgYmFja3dhcmRseSBjb21wYXRpYmxlIHdpdGggcHJldmlvdXNcbiAqIHZlcnNpb25zIG9mIEFuZ3VsYXJKUy5cbiAqXG4gKiAqIFNwZWNpZnlpbmcgb25seSBgbm8tdW5zYWZlLWV2YWxgIHRlbGxzIEFuZ3VsYXJKUyB0aGF0IHdlIG11c3Qgbm90IHVzZSBldmFsLCBidXQgdGhhdCB3ZSBjYW5cbiAqIGluamVjdCBpbmxpbmUgc3R5bGVzLiBFLmcuIGA8Ym9keSBuZy1jc3A9XCJuby11bnNhZmUtZXZhbFwiPmAuXG4gKlxuICogKiBTcGVjaWZ5aW5nIG9ubHkgYG5vLWlubGluZS1zdHlsZWAgdGVsbHMgQW5ndWxhckpTIHRoYXQgd2UgbXVzdCBub3QgaW5qZWN0IHN0eWxlcywgYnV0IHRoYXQgd2UgY2FuXG4gKiBydW4gZXZhbCAtIG5vIGF1dG9tYXRpYyBjaGVjayBmb3IgdW5zYWZlIGV2YWwgd2lsbCBvY2N1ci4gRS5nLiBgPGJvZHkgbmctY3NwPVwibm8taW5saW5lLXN0eWxlXCI+YFxuICpcbiAqICogU3BlY2lmeWluZyBib3RoIGBuby11bnNhZmUtZXZhbGAgYW5kIGBuby1pbmxpbmUtc3R5bGVgIHRlbGxzIEFuZ3VsYXJKUyB0aGF0IHdlIG11c3Qgbm90IGluamVjdFxuICogc3R5bGVzIG5vciB1c2UgZXZhbCwgd2hpY2ggaXMgdGhlIHNhbWUgYXMgYW4gZW1wdHk6IG5nLWNzcC5cbiAqIEUuZy5gPGJvZHkgbmctY3NwPVwibm8taW5saW5lLXN0eWxlO25vLXVuc2FmZS1ldmFsXCI+YFxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byBhcHBseSB0aGUgYG5nQ3NwYCBkaXJlY3RpdmUgdG8gdGhlIGBodG1sYCB0YWcuXG4gICBgYGBodG1sXG4gICAgIDwhZG9jdHlwZSBodG1sPlxuICAgICA8aHRtbCBuZy1hcHAgbmctY3NwPlxuICAgICAuLi5cbiAgICAgLi4uXG4gICAgIDwvaHRtbD5cbiAgIGBgYFxuXG4gIDwhLS0gTm90ZTogdGhlIGAuY3NwYCBzdWZmaXggaW4gdGhlIGV4YW1wbGUgbmFtZSB0cmlnZ2VycyBDU1AgbW9kZSBpbiBvdXIgaHR0cCBzZXJ2ZXIhIC0tPlxuICA8ZXhhbXBsZSBuYW1lPVwiZXhhbXBsZS5jc3BcIiBtb2R1bGU9XCJjc3BFeGFtcGxlXCIgbmctY3NwPVwidHJ1ZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJNYWluQ29udHJvbGxlciBhcyBjdHJsXCI+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImN0cmwuaW5jKClcIiBpZD1cImluY1wiPkluY3JlbWVudDwvYnV0dG9uPlxuICAgICAgICAgIDxzcGFuIGlkPVwiY291bnRlclwiPlxuICAgICAgICAgICAge3tjdHJsLmNvdW50ZXJ9fVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY3RybC5ldmlsKClcIiBpZD1cImV2aWxcIj5FdmlsPC9idXR0b24+XG4gICAgICAgICAgPHNwYW4gaWQ9XCJldmlsRXJyb3JcIj5cbiAgICAgICAgICAgIHt7Y3RybC5ldmlsRXJyb3J9fVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjc3BFeGFtcGxlJywgW10pXG4gICAgICAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBmdW5jdGlvbiBNYWluQ29udHJvbGxlcigpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnRlciA9IDA7XG4gICAgICAgICAgICB0aGlzLmluYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIrKztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmV2aWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBldmFsKCcxKzInKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1ldmFsXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2aWxFcnJvciA9IGUubWVzc2FnZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIHV0aWwsIHdlYmRyaXZlcjtcblxuICAgICAgdmFyIGluY0J0biA9IGVsZW1lbnQoYnkuaWQoJ2luYycpKTtcbiAgICAgIHZhciBjb3VudGVyID0gZWxlbWVudChieS5pZCgnY291bnRlcicpKTtcbiAgICAgIHZhciBldmlsQnRuID0gZWxlbWVudChieS5pZCgnZXZpbCcpKTtcbiAgICAgIHZhciBldmlsRXJyb3IgPSBlbGVtZW50KGJ5LmlkKCdldmlsRXJyb3InKSk7XG5cbiAgICAgIGZ1bmN0aW9uIGdldEFuZENsZWFyU2V2ZXJlRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gYnJvd3Nlci5tYW5hZ2UoKS5sb2dzKCkuZ2V0KCdicm93c2VyJykudGhlbihmdW5jdGlvbihicm93c2VyTG9nKSB7XG4gICAgICAgICAgcmV0dXJuIGJyb3dzZXJMb2cuZmlsdGVyKGZ1bmN0aW9uKGxvZ0VudHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nRW50cnkubGV2ZWwudmFsdWUgPiB3ZWJkcml2ZXIubG9nZ2luZy5MZXZlbC5XQVJOSU5HLnZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFcnJvcnMoKSB7XG4gICAgICAgIGdldEFuZENsZWFyU2V2ZXJlRXJyb3JzKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGV4cGVjdE5vRXJyb3JzKCkge1xuICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpLnRoZW4oZnVuY3Rpb24oZmlsdGVyZWRMb2cpIHtcbiAgICAgICAgICBleHBlY3QoZmlsdGVyZWRMb2cubGVuZ3RoKS50b0VxdWFsKDApO1xuICAgICAgICAgIGlmIChmaWx0ZXJlZExvZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdicm93c2VyIGNvbnNvbGUgZXJyb3JzOiAnICsgdXRpbC5pbnNwZWN0KGZpbHRlcmVkTG9nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZXhwZWN0RXJyb3IocmVnZXgpIHtcbiAgICAgICAgZ2V0QW5kQ2xlYXJTZXZlcmVFcnJvcnMoKS50aGVuKGZ1bmN0aW9uKGZpbHRlcmVkTG9nKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgZmlsdGVyZWRMb2cuZm9yRWFjaChmdW5jdGlvbihsb2cpIHtcbiAgICAgICAgICAgIGlmIChsb2cubWVzc2FnZS5tYXRjaChyZWdleCkpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXhwZWN0ZWQgYW4gZXJyb3IgdGhhdCBtYXRjaGVzICcgKyByZWdleCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbiAgICAgICAgd2ViZHJpdmVyID0gcmVxdWlyZSgnc2VsZW5pdW0td2ViZHJpdmVyJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRm9yIG5vdywgd2Ugb25seSB0ZXN0IG9uIENocm9tZSxcbiAgICAgIC8vIGFzIFNhZmFyaSBkb2VzIG5vdCBsb2FkIHRoZSBwYWdlIHdpdGggUHJvdHJhY3RvcidzIGluamVjdGVkIHNjcmlwdHMsXG4gICAgICAvLyBhbmQgRmlyZWZveCB3ZWJkcml2ZXIgYWx3YXlzIGRpc2FibGVzIGNvbnRlbnQgc2VjdXJpdHkgcG9saWN5ICgjNjM1OClcbiAgICAgIGlmIChicm93c2VyLnBhcmFtcy5icm93c2VyICE9PSAnY2hyb21lJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHJlcG9ydCBlcnJvcnMgd2hlbiB0aGUgcGFnZSBpcyBsb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gY2xlYXIgZXJyb3JzIHNvIHdlIGFyZSBub3QgZGVwZW5kZW50IG9uIHByZXZpb3VzIHRlc3RzXG4gICAgICAgIGNsZWFyRXJyb3JzKCk7XG4gICAgICAgIC8vIE5lZWQgdG8gcmVsb2FkIHRoZSBwYWdlIGFzIHRoZSBwYWdlIGlzIGFscmVhZHkgbG9hZGVkIHdoZW5cbiAgICAgICAgLy8gd2UgY29tZSBoZXJlXG4gICAgICAgIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgIGJyb3dzZXIuZ2V0KHVybCk7XG4gICAgICAgIH0pO1xuICAgICAgICBleHBlY3ROb0Vycm9ycygpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZXZhbHVhdGUgZXhwcmVzc2lvbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCcwJyk7XG4gICAgICAgIGluY0J0bi5jbGljaygpO1xuICAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvRXF1YWwoJzEnKTtcbiAgICAgICAgZXhwZWN0Tm9FcnJvcnMoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRocm93IGFuZCByZXBvcnQgYW4gZXJyb3Igd2hlbiB1c2luZyBcImV2YWxcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBldmlsQnRuLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChldmlsRXJyb3IuZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IFNlY3VyaXR5IFBvbGljeS8pO1xuICAgICAgICBleHBlY3RFcnJvcigvQ29udGVudCBTZWN1cml0eSBQb2xpY3kvKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICAqL1xuXG4vLyBgbmdDc3BgIGlzIG5vdCBpbXBsZW1lbnRlZCBhcyBhIHByb3BlciBkaXJlY3RpdmUgYW55IG1vcmUsIGJlY2F1c2Ugd2UgbmVlZCBpdCBiZSBwcm9jZXNzZWQgd2hpbGVcbi8vIHdlIGJvb3RzdHJhcCB0aGUgYXBwIChiZWZvcmUgYCRwYXJzZWAgaXMgaW5zdGFudGlhdGVkKS4gRm9yIHRoaXMgcmVhc29uLCB3ZSBqdXN0IGhhdmUgdGhlIGBjc3AoKWBcbi8vIGZuIHRoYXQgbG9va3MgZm9yIHRoZSBgbmctY3NwYCBhdHRyaWJ1dGUgYW55d2hlcmUgaW4gdGhlIGN1cnJlbnQgZG9jLlxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2xpY2tcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgbmdDbGljayBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciB3aGVuXG4gKiBhbiBlbGVtZW50IGlzIGNsaWNrZWQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NsaWNrIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGNsaWNrLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNsaWNrXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnRcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPHNwYW4+XG4gICAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgIDwvc3Bhbj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnY291bnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKCcwJyk7XG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdjb3VudCcpKS5nZXRUZXh0KCkpLnRvTWF0Y2goJzEnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG4vKlxuICogQSBjb2xsZWN0aW9uIG9mIGRpcmVjdGl2ZXMgdGhhdCBhbGxvd3MgY3JlYXRpb24gb2YgY3VzdG9tIGV2ZW50IGhhbmRsZXJzIHRoYXQgYXJlIGRlZmluZWQgYXNcbiAqIEFuZ3VsYXJKUyBleHByZXNzaW9ucyBhbmQgYXJlIGNvbXBpbGVkIGFuZCBleGVjdXRlZCB3aXRoaW4gdGhlIGN1cnJlbnQgc2NvcGUuXG4gKi9cbnZhciBuZ0V2ZW50RGlyZWN0aXZlcyA9IHt9O1xuXG4vLyBGb3IgZXZlbnRzIHRoYXQgbWlnaHQgZmlyZSBzeW5jaHJvbm91c2x5IGR1cmluZyBET00gbWFuaXB1bGF0aW9uXG4vLyB3ZSBuZWVkIHRvIGV4ZWN1dGUgdGhlaXIgZXZlbnQgaGFuZGxlcnMgYXN5bmNocm9ub3VzbHkgdXNpbmcgJGV2YWxBc3luYyxcbi8vIHNvIHRoYXQgdGhleSBhcmUgbm90IGV4ZWN1dGVkIGluIGFuIGluY29uc2lzdGVudCBzdGF0ZS5cbnZhciBmb3JjZUFzeW5jRXZlbnRzID0ge1xuICAnYmx1cic6IHRydWUsXG4gICdmb2N1cyc6IHRydWVcbn07XG5mb3JFYWNoKFxuICAnY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZScuc3BsaXQoJyAnKSxcbiAgZnVuY3Rpb24oZXZlbnROYW1lKSB7XG4gICAgdmFyIGRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBldmVudE5hbWUpO1xuICAgIG5nRXZlbnREaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdID0gWyckcGFyc2UnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRwYXJzZSwgJHJvb3RTY29wZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24oJGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgICAvLyBOT1RFOlxuICAgICAgICAgIC8vIFdlIGV4cG9zZSB0aGUgcG93ZXJmdWwgYCRldmVudGAgb2JqZWN0IG9uIHRoZSBzY29wZSB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byB0aGUgV2luZG93LFxuICAgICAgICAgIC8vIGV0Yy4gVGhpcyBpcyBPSywgYmVjYXVzZSBleHByZXNzaW9ucyBhcmUgbm90IHNhbmRib3hlZCBhbnkgbW9yZSAoYW5kIHRoZSBleHByZXNzaW9uXG4gICAgICAgICAgLy8gc2FuZGJveCB3YXMgbmV2ZXIgbWVhbnQgdG8gYmUgYSBzZWN1cml0eSBmZWF0dXJlIGFueXdheSkuXG4gICAgICAgICAgdmFyIGZuID0gJHBhcnNlKGF0dHJbZGlyZWN0aXZlTmFtZV0pO1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0V2ZW50SGFuZGxlcihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5vbihldmVudE5hbWUsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGZuKHNjb3BlLCB7JGV2ZW50OiBldmVudH0pO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBpZiAoZm9yY2VBc3luY0V2ZW50c1tldmVudE5hbWVdICYmICRyb290U2NvcGUuJCRwaGFzZSkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMoY2FsbGJhY2spO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShjYWxsYmFjayk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfV07XG4gIH1cbik7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdEYmxjbGlja1xuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdEYmxjbGlja2AgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gYSBkYmxjbGljayBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nRGJsY2xpY2sge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogYSBkYmxjbGljay4gKFRoZSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgKVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctZGJsY2xpY2tcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctZGJsY2xpY2s9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAob24gZG91YmxlIGNsaWNrKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZWRvd25cbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgbmdNb3VzZWRvd24gZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2Vkb3duIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWRvd24ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2Vkb3duLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLW1vdXNlZG93blwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZWRvd249XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAob24gbW91c2UgZG93bilcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2V1cFxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNldXAgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNldXAge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2V1cC4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZXVwXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNldXA9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAob24gbW91c2UgdXApXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZW92ZXJcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZW92ZXIgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlb3ZlciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBtb3VzZW92ZXIuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctbW91c2VvdmVyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNlb3Zlcj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGlzIG92ZXIpXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNlZW50ZXJcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZWVudGVyIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWVudGVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNlZW50ZXIuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctbW91c2VlbnRlclwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZWVudGVyPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgZW50ZXJzKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZWxlYXZlXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VsZWF2ZSBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VsZWF2ZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBtb3VzZWxlYXZlLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLW1vdXNlbGVhdmVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2VsZWF2ZT1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGxlYXZlcylcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2Vtb3ZlXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2Vtb3ZlIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZW1vdmUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2Vtb3ZlLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLW1vdXNlbW92ZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZW1vdmU9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAod2hlbiBtb3VzZSBtb3ZlcylcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nS2V5ZG93blxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleWRvd24gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0tleWRvd24ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICoga2V5ZG93bi4gKEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGAgYW5kIGNhbiBiZSBpbnRlcnJvZ2F0ZWQgZm9yIGtleUNvZGUsIGFsdEtleSwgZXRjLilcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWtleWRvd25cIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBuZy1rZXlkb3duPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAga2V5IGRvd24gY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nS2V5dXBcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBrZXl1cCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nS2V5dXAge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICoga2V5dXAuIChFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1rZXl1cFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxwPlR5cGluZyBpbiB0aGUgaW5wdXQgYm94IGJlbG93IHVwZGF0ZXMgdGhlIGtleSBjb3VudDwvcD5cbiAgICAgICA8aW5wdXQgbmcta2V5dXA9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+IGtleSB1cCBjb3VudDoge3tjb3VudH19XG5cbiAgICAgICA8cD5UeXBpbmcgaW4gdGhlIGlucHV0IGJveCBiZWxvdyB1cGRhdGVzIHRoZSBrZXljb2RlPC9wPlxuICAgICAgIDxpbnB1dCBuZy1rZXl1cD1cImV2ZW50PSRldmVudFwiPlxuICAgICAgIDxwPmV2ZW50IGtleUNvZGU6IHt7IGV2ZW50LmtleUNvZGUgfX08L3A+XG4gICAgICAgPHA+ZXZlbnQgYWx0S2V5OiB7eyBldmVudC5hbHRLZXkgfX08L3A+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdLZXlwcmVzc1xuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5cHJlc3MgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0tleXByZXNzIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGtleXByZXNzLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfVxuICogYW5kIGNhbiBiZSBpbnRlcnJvZ2F0ZWQgZm9yIGtleUNvZGUsIGFsdEtleSwgZXRjLilcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWtleXByZXNzXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmcta2V5cHJlc3M9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICBrZXkgcHJlc3MgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU3VibWl0XG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgZm9ybVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVuYWJsZXMgYmluZGluZyBBbmd1bGFySlMgZXhwcmVzc2lvbnMgdG8gb25zdWJtaXQgZXZlbnRzLlxuICpcbiAqIEFkZGl0aW9uYWxseSBpdCBwcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gKHdoaWNoIGZvciBmb3JtIG1lYW5zIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlXG4gKiBzZXJ2ZXIgYW5kIHJlbG9hZGluZyB0aGUgY3VycmVudCBwYWdlKSwgYnV0IG9ubHkgaWYgdGhlIGZvcm0gZG9lcyBub3QgY29udGFpbiBgYWN0aW9uYCxcbiAqIGBkYXRhLWFjdGlvbmAsIG9yIGB4LWFjdGlvbmAgYXR0cmlidXRlcy5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipXYXJuaW5nOioqIEJlIGNhcmVmdWwgbm90IHRvIGNhdXNlIFwiZG91YmxlLXN1Ym1pc3Npb25cIiBieSB1c2luZyBib3RoIHRoZSBgbmdDbGlja2AgYW5kXG4gKiBgbmdTdWJtaXRgIGhhbmRsZXJzIHRvZ2V0aGVyLiBTZWUgdGhlXG4gKiB7QGxpbmsgZm9ybSNzdWJtaXR0aW5nLWEtZm9ybS1hbmQtcHJldmVudGluZy10aGUtZGVmYXVsdC1hY3Rpb24gYGZvcm1gIGRpcmVjdGl2ZSBkb2N1bWVudGF0aW9ufVxuICogZm9yIGEgZGV0YWlsZWQgZGlzY3Vzc2lvbiBvZiB3aGVuIGBuZ1N1Ym1pdGAgbWF5IGJlIHRyaWdnZXJlZC5cbiAqIDwvZGl2PlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTdWJtaXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC5cbiAqICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJzdWJtaXRFeGFtcGxlXCIgbmFtZT1cIm5nLXN1Ym1pdFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPHNjcmlwdD5cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3N1Ym1pdEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBbXTtcbiAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJ2hlbGxvJztcbiAgICAgICAgICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCRzY29wZS50ZXh0KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QucHVzaCh0aGlzLnRleHQpO1xuICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJyc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfV0pO1xuICAgICAgPC9zY3JpcHQ+XG4gICAgICA8Zm9ybSBuZy1zdWJtaXQ9XCJzdWJtaXQoKVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICBFbnRlciB0ZXh0IGFuZCBoaXQgZW50ZXI6XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidGV4dFwiIG5hbWU9XCJ0ZXh0XCIgLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiBpZD1cInN1Ym1pdFwiIHZhbHVlPVwiU3VibWl0XCIgLz5cbiAgICAgICAgPHByZT5saXN0PXt7bGlzdH19PC9wcmU+XG4gICAgICA8L2Zvcm0+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctc3VibWl0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9CZSgnbGlzdD1bXScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJyNzdWJtaXQnKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2hlbGxvJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndGV4dCcpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJycpO1xuICAgICAgIH0pO1xuICAgICAgIGl0KCdzaG91bGQgaWdub3JlIGVtcHR5IHN0cmluZ3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0PVtdJyk7XG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3N1Ym1pdCcpKS5jbGljaygpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJyNzdWJtaXQnKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2hlbGxvJyk7XG4gICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0ZvY3VzXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGZvY3VzIGV2ZW50LlxuICpcbiAqIE5vdGU6IEFzIHRoZSBgZm9jdXNgIGV2ZW50IGlzIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBjYWxsaW5nIGBpbnB1dC5mb2N1cygpYFxuICogQW5ndWxhckpTIGV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIHVzaW5nIGBzY29wZS4kZXZhbEFzeW5jYCBpZiB0aGUgZXZlbnQgaXMgZmlyZWRcbiAqIGR1cmluZyBhbiBgJGFwcGx5YCB0byBlbnN1cmUgYSBjb25zaXN0ZW50IHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdGb2N1cyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBmb2N1cy4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAqIFNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja31cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmx1clxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBibHVyIGV2ZW50LlxuICpcbiAqIEEgW2JsdXIgZXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0V2ZW50cy9ibHVyKSBmaXJlcyB3aGVuXG4gKiBhbiBlbGVtZW50IGhhcyBsb3N0IGZvY3VzLlxuICpcbiAqIE5vdGU6IEFzIHRoZSBgYmx1cmAgZXZlbnQgaXMgZXhlY3V0ZWQgc3luY2hyb25vdXNseSBhbHNvIGR1cmluZyBET00gbWFuaXB1bGF0aW9uc1xuICogKGUuZy4gcmVtb3ZpbmcgYSBmb2N1c3NlZCBpbnB1dCksXG4gKiBBbmd1bGFySlMgZXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gdXNpbmcgYHNjb3BlLiRldmFsQXN5bmNgIGlmIHRoZSBldmVudCBpcyBmaXJlZFxuICogZHVyaW5nIGFuIGAkYXBwbHlgIHRvIGVuc3VyZSBhIGNvbnNpc3RlbnQgc3RhdGUuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0JsdXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogYmx1ci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAqIFNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja31cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ29weVxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBjb3B5IGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDb3B5IHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGNvcHkuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY29weVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLWNvcHk9XCJjb3BpZWQ9dHJ1ZVwiIG5nLWluaXQ9XCJjb3BpZWQ9ZmFsc2U7IHZhbHVlPSdjb3B5IG1lJ1wiIG5nLW1vZGVsPVwidmFsdWVcIj5cbiAgICAgIGNvcGllZDoge3tjb3BpZWR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0N1dFxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBjdXQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0N1dCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjdXQuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY3V0XCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmctY3V0PVwiY3V0PXRydWVcIiBuZy1pbml0PVwiY3V0PWZhbHNlOyB2YWx1ZT0nY3V0IG1lJ1wiIG5nLW1vZGVsPVwidmFsdWVcIj5cbiAgICAgIGN1dDoge3tjdXR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1Bhc3RlXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIHBhc3RlIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdQYXN0ZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBwYXN0ZS4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1wYXN0ZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLXBhc3RlPVwicGFzdGU9dHJ1ZVwiIG5nLWluaXQ9XCJwYXN0ZT1mYWxzZVwiIHBsYWNlaG9sZGVyPSdwYXN0ZSBoZXJlJz5cbiAgICAgIHBhc3RlZDoge3twYXN0ZX19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSWZcbiAqIEByZXN0cmljdCBBXG4gKiBAbXVsdGlFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nSWZgIGRpcmVjdGl2ZSByZW1vdmVzIG9yIHJlY3JlYXRlcyBhIHBvcnRpb24gb2YgdGhlIERPTSB0cmVlIGJhc2VkIG9uIGFuXG4gKiB7ZXhwcmVzc2lvbn0uIElmIHRoZSBleHByZXNzaW9uIGFzc2lnbmVkIHRvIGBuZ0lmYCBldmFsdWF0ZXMgdG8gYSBmYWxzZVxuICogdmFsdWUgdGhlbiB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSwgb3RoZXJ3aXNlIGEgY2xvbmUgb2YgdGhlXG4gKiBlbGVtZW50IGlzIHJlaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxuICpcbiAqIGBuZ0lmYCBkaWZmZXJzIGZyb20gYG5nU2hvd2AgYW5kIGBuZ0hpZGVgIGluIHRoYXQgYG5nSWZgIGNvbXBsZXRlbHkgcmVtb3ZlcyBhbmQgcmVjcmVhdGVzIHRoZVxuICogZWxlbWVudCBpbiB0aGUgRE9NIHJhdGhlciB0aGFuIGNoYW5naW5nIGl0cyB2aXNpYmlsaXR5IHZpYSB0aGUgYGRpc3BsYXlgIGNzcyBwcm9wZXJ0eS4gIEEgY29tbW9uXG4gKiBjYXNlIHdoZW4gdGhpcyBkaWZmZXJlbmNlIGlzIHNpZ25pZmljYW50IGlzIHdoZW4gdXNpbmcgY3NzIHNlbGVjdG9ycyB0aGF0IHJlbHkgb24gYW4gZWxlbWVudCdzXG4gKiBwb3NpdGlvbiB3aXRoaW4gdGhlIERPTSwgc3VjaCBhcyB0aGUgYDpmaXJzdC1jaGlsZGAgb3IgYDpsYXN0LWNoaWxkYCBwc2V1ZG8tY2xhc3Nlcy5cbiAqXG4gKiBOb3RlIHRoYXQgd2hlbiBhbiBlbGVtZW50IGlzIHJlbW92ZWQgdXNpbmcgYG5nSWZgIGl0cyBzY29wZSBpcyBkZXN0cm95ZWQgYW5kIGEgbmV3IHNjb3BlXG4gKiBpcyBjcmVhdGVkIHdoZW4gdGhlIGVsZW1lbnQgaXMgcmVzdG9yZWQuICBUaGUgc2NvcGUgY3JlYXRlZCB3aXRoaW4gYG5nSWZgIGluaGVyaXRzIGZyb21cbiAqIGl0cyBwYXJlbnQgc2NvcGUgdXNpbmdcbiAqIFtwcm90b3R5cGFsIGluaGVyaXRhbmNlXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3dpa2kvVW5kZXJzdGFuZGluZy1TY29wZXMjamF2YXNjcmlwdC1wcm90b3R5cGFsLWluaGVyaXRhbmNlKS5cbiAqIEFuIGltcG9ydGFudCBpbXBsaWNhdGlvbiBvZiB0aGlzIGlzIGlmIGBuZ01vZGVsYCBpcyB1c2VkIHdpdGhpbiBgbmdJZmAgdG8gYmluZCB0b1xuICogYSBqYXZhc2NyaXB0IHByaW1pdGl2ZSBkZWZpbmVkIGluIHRoZSBwYXJlbnQgc2NvcGUuIEluIHRoaXMgY2FzZSBhbnkgbW9kaWZpY2F0aW9ucyBtYWRlIHRvIHRoZVxuICogdmFyaWFibGUgd2l0aGluIHRoZSBjaGlsZCBzY29wZSB3aWxsIG92ZXJyaWRlIChoaWRlKSB0aGUgdmFsdWUgaW4gdGhlIHBhcmVudCBzY29wZS5cbiAqXG4gKiBBbHNvLCBgbmdJZmAgcmVjcmVhdGVzIGVsZW1lbnRzIHVzaW5nIHRoZWlyIGNvbXBpbGVkIHN0YXRlLiBBbiBleGFtcGxlIG9mIHRoaXMgYmVoYXZpb3JcbiAqIGlzIGlmIGFuIGVsZW1lbnQncyBjbGFzcyBhdHRyaWJ1dGUgaXMgZGlyZWN0bHkgbW9kaWZpZWQgYWZ0ZXIgaXQncyBjb21waWxlZCwgdXNpbmcgc29tZXRoaW5nIGxpa2VcbiAqIGpRdWVyeSdzIGAuYWRkQ2xhc3MoKWAgbWV0aG9kLCBhbmQgdGhlIGVsZW1lbnQgaXMgbGF0ZXIgcmVtb3ZlZC4gV2hlbiBgbmdJZmAgcmVjcmVhdGVzIHRoZSBlbGVtZW50XG4gKiB0aGUgYWRkZWQgY2xhc3Mgd2lsbCBiZSBsb3N0IGJlY2F1c2UgdGhlIG9yaWdpbmFsIGNvbXBpbGVkIHN0YXRlIGlzIHVzZWQgdG8gcmVnZW5lcmF0ZSB0aGUgZWxlbWVudC5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHlvdSBjYW4gcHJvdmlkZSBhbmltYXRpb25zIHZpYSB0aGUgYG5nQW5pbWF0ZWAgbW9kdWxlIHRvIGFuaW1hdGUgdGhlIGBlbnRlcmBcbiAqIGFuZCBgbGVhdmVgIGVmZmVjdHMuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2VudGVyIGVudGVyfSAgfCBqdXN0IGFmdGVyIHRoZSBgbmdJZmAgY29udGVudHMgY2hhbmdlIGFuZCBhIG5ldyBET00gZWxlbWVudCBpcyBjcmVhdGVkIGFuZCBpbmplY3RlZCBpbnRvIHRoZSBgbmdJZmAgY29udGFpbmVyIHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2xlYXZlIGxlYXZlfSAgfCBqdXN0IGJlZm9yZSB0aGUgYG5nSWZgIGNvbnRlbnRzIGFyZSByZW1vdmVkIGZyb20gdGhlIERPTSB8XG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSA2MDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdJZiBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgZmFsc3kgdGhlblxuICogICAgIHRoZSBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NIHRyZWUuIElmIGl0IGlzIHRydXRoeSBhIGNvcHkgb2YgdGhlIGNvbXBpbGVkXG4gKiAgICAgZWxlbWVudCBpcyBhZGRlZCB0byB0aGUgRE9NIHRyZWUuXG4gKlxuICogQGV4YW1wbGVcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLWlmXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxsYWJlbD5DbGljayBtZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIG5nLWluaXQ9XCJjaGVja2VkPXRydWVcIiAvPjwvbGFiZWw+PGJyLz5cbiAgICAgIFNob3cgd2hlbiBjaGVja2VkOlxuICAgICAgPHNwYW4gbmctaWY9XCJjaGVja2VkXCIgY2xhc3M9XCJhbmltYXRlLWlmXCI+XG4gICAgICAgIFRoaXMgaXMgcmVtb3ZlZCB3aGVuIHRoZSBjaGVja2JveCBpcyB1bmNoZWNrZWQuXG4gICAgICA8L3NwYW4+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLmFuaW1hdGUtaWYge1xuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLCAuYW5pbWF0ZS1pZi5uZy1sZWF2ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtaWYubmctZW50ZXIsXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xuICAgICAgICBvcGFjaXR5OjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLWlmLm5nLWxlYXZlLFxuICAgICAgLmFuaW1hdGUtaWYubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgb3BhY2l0eToxO1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG52YXIgbmdJZkRpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkYW5pbWF0ZSwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICBtdWx0aUVsZW1lbnQ6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxuICAgIHByaW9yaXR5OiA2MDAsXG4gICAgdGVybWluYWw6IHRydWUsXG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAkJHRsYjogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcbiAgICAgICAgdmFyIGJsb2NrLCBjaGlsZFNjb3BlLCBwcmV2aW91c0VsZW1lbnRzO1xuICAgICAgICAkc2NvcGUuJHdhdGNoKCRhdHRyLm5nSWYsIGZ1bmN0aW9uIG5nSWZXYXRjaEFjdGlvbih2YWx1ZSkge1xuXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIWNoaWxkU2NvcGUpIHtcbiAgICAgICAgICAgICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUsIG5ld1Njb3BlKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IG5ld1Njb3BlO1xuICAgICAgICAgICAgICAgIGNsb25lW2Nsb25lLmxlbmd0aCsrXSA9ICRjb21waWxlLiQkY3JlYXRlQ29tbWVudCgnZW5kIG5nSWYnLCAkYXR0ci5uZ0lmKTtcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBvbmx5IG5lZWQgdGhlIGZpcnN0L2xhc3Qgbm9kZSBvZiB0aGUgY2xvbmVkIG5vZGVzLlxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHdlIG5lZWQgdG8ga2VlcCB0aGUgcmVmZXJlbmNlIHRvIHRoZSBqcWxpdGUgd3JhcHBlciBhcyBpdCBtaWdodCBiZSBjaGFuZ2VkIGxhdGVyXG4gICAgICAgICAgICAgICAgLy8gYnkgYSBkaXJlY3RpdmUgd2l0aCB0ZW1wbGF0ZVVybCB3aGVuIGl0cyB0ZW1wbGF0ZSBhcnJpdmVzLlxuICAgICAgICAgICAgICAgIGJsb2NrID0ge1xuICAgICAgICAgICAgICAgICAgY2xvbmU6IGNsb25lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgJGVsZW1lbnQucGFyZW50KCksICRlbGVtZW50KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0VsZW1lbnRzKSB7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoaWxkU2NvcGUpIHtcbiAgICAgICAgICAgICAgY2hpbGRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChibG9jaykge1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzID0gZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSk7XG4gICAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKHByZXZpb3VzRWxlbWVudHMpLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlKSBwcmV2aW91c0VsZW1lbnRzID0gbnVsbDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJsb2NrID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSW5jbHVkZVxuICogQHJlc3RyaWN0IEVDQVxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgLTQwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRmV0Y2hlcywgY29tcGlsZXMgYW5kIGluY2x1ZGVzIGFuIGV4dGVybmFsIEhUTUwgZnJhZ21lbnQuXG4gKlxuICogQnkgZGVmYXVsdCwgdGhlIHRlbXBsYXRlIFVSTCBpcyByZXN0cmljdGVkIHRvIHRoZSBzYW1lIGRvbWFpbiBhbmQgcHJvdG9jb2wgYXMgdGhlXG4gKiBhcHBsaWNhdGlvbiBkb2N1bWVudC4gVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rICRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXG4gKiAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybH0gb24gaXQuIFRvIGxvYWQgdGVtcGxhdGVzIGZyb20gb3RoZXIgZG9tYWlucyBvciBwcm90b2NvbHNcbiAqIHlvdSBtYXkgZWl0aGVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCB3aGl0ZWxpc3QgdGhlbX0gb3JcbiAqIHtAbGluayAkc2NlI3RydXN0QXNSZXNvdXJjZVVybCB3cmFwIHRoZW19IGFzIHRydXN0ZWQgdmFsdWVzLiBSZWZlciB0byBBbmd1bGFySlMncyB7QGxpbmtcbiAqIG5nLiRzY2UgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmd9LlxuICpcbiAqIEluIGFkZGl0aW9uLCB0aGUgYnJvd3NlcidzXG4gKiBbU2FtZSBPcmlnaW4gUG9saWN5XShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Jyb3dzZXJzZWMvd2lraS9QYXJ0MiNTYW1lLW9yaWdpbl9wb2xpY3lfZm9yX1hNTEh0dHBSZXF1ZXN0KVxuICogYW5kIFtDcm9zcy1PcmlnaW4gUmVzb3VyY2UgU2hhcmluZyAoQ09SUyldKGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvKVxuICogcG9saWN5IG1heSBmdXJ0aGVyIHJlc3RyaWN0IHdoZXRoZXIgdGhlIHRlbXBsYXRlIGlzIHN1Y2Nlc3NmdWxseSBsb2FkZWQuXG4gKiBGb3IgZXhhbXBsZSwgYG5nSW5jbHVkZWAgd29uJ3Qgd29yayBmb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzIG9uIGFsbCBicm93c2VycyBhbmQgZm9yIGBmaWxlOi8vYFxuICogYWNjZXNzIG9uIHNvbWUgYnJvd3NlcnMuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjZW50ZXIgZW50ZXJ9ICB8IHdoZW4gdGhlIGV4cHJlc3Npb24gY2hhbmdlcywgb24gdGhlIG5ldyBpbmNsdWRlIHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2xlYXZlIGxlYXZlfSAgfCB3aGVuIHRoZSBleHByZXNzaW9uIGNoYW5nZXMsIG9uIHRoZSBvbGQgaW5jbHVkZSB8XG4gKlxuICogVGhlIGVudGVyIGFuZCBsZWF2ZSBhbmltYXRpb24gb2NjdXIgY29uY3VycmVudGx5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ0luY2x1ZGV8c3JjIEFuZ3VsYXJKUyBleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gVVJMLiBJZiB0aGUgc291cmNlIGlzIGEgc3RyaW5nIGNvbnN0YW50LFxuICogICAgICAgICAgICAgICAgIG1ha2Ugc3VyZSB5b3Ugd3JhcCBpdCBpbiAqKnNpbmdsZSoqIHF1b3RlcywgZS5nLiBgc3JjPVwiJ215UGFydGlhbFRlbXBsYXRlLmh0bWwnXCJgLlxuICogQHBhcmFtIHtzdHJpbmc9fSBvbmxvYWQgRXhwcmVzc2lvbiB0byBldmFsdWF0ZSB3aGVuIGEgbmV3IHBhcnRpYWwgaXMgbG9hZGVkLlxuICogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogICAgICAgICAgICAgICAgICAqKk5vdGU6KiogV2hlbiB1c2luZyBvbmxvYWQgb24gU1ZHIGVsZW1lbnRzIGluIElFMTEsIHRoZSBicm93c2VyIHdpbGwgdHJ5IHRvIGNhbGxcbiAqICAgICAgICAgICAgICAgICAgYSBmdW5jdGlvbiB3aXRoIHRoZSBuYW1lIG9uIHRoZSB3aW5kb3cgZWxlbWVudCwgd2hpY2ggd2lsbCB1c3VhbGx5IHRocm93IGFcbiAqICAgICAgICAgICAgICAgICAgXCJmdW5jdGlvbiBpcyB1bmRlZmluZWRcIiBlcnJvci4gVG8gZml4IHRoaXMsIHlvdSBjYW4gaW5zdGVhZCB1c2UgYGRhdGEtb25sb2FkYCBvciBhXG4gKiAgICAgICAgICAgICAgICAgIGRpZmZlcmVudCBmb3JtIHRoYXQge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSNub3JtYWxpemF0aW9uIG1hdGNoZXN9IGBvbmxvYWRgLlxuICogICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gYXV0b3Njcm9sbCBXaGV0aGVyIGBuZ0luY2x1ZGVgIHNob3VsZCBjYWxsIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsXG4gKiAgICAgICAgICAgICAgICAgICRhbmNob3JTY3JvbGx9IHRvIHNjcm9sbCB0aGUgdmlld3BvcnQgYWZ0ZXIgdGhlIGNvbnRlbnQgaXMgbG9hZGVkLlxuICpcbiAqICAgICAgICAgICAgICAgICAgLSBJZiB0aGUgYXR0cmlidXRlIGlzIG5vdCBzZXQsIGRpc2FibGUgc2Nyb2xsaW5nLlxuICogICAgICAgICAgICAgICAgICAtIElmIHRoZSBhdHRyaWJ1dGUgaXMgc2V0IHdpdGhvdXQgdmFsdWUsIGVuYWJsZSBzY3JvbGxpbmcuXG4gKiAgICAgICAgICAgICAgICAgIC0gT3RoZXJ3aXNlIGVuYWJsZSBzY3JvbGxpbmcgb25seSBpZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1dGh5IHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cImluY2x1ZGVFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLWluY2x1ZGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJ0ZW1wbGF0ZVwiIG5nLW9wdGlvbnM9XCJ0Lm5hbWUgZm9yIHQgaW4gdGVtcGxhdGVzXCI+XG4gICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj4oYmxhbmspPC9vcHRpb24+XG4gICAgICAgPC9zZWxlY3Q+XG4gICAgICAgdXJsIG9mIHRoZSB0ZW1wbGF0ZTogPGNvZGU+e3t0ZW1wbGF0ZS51cmx9fTwvY29kZT5cbiAgICAgICA8aHIvPlxuICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNsaWRlLWFuaW1hdGVcIiBuZy1pbmNsdWRlPVwidGVtcGxhdGUudXJsXCI+PC9kaXY+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnaW5jbHVkZUV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKVxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS50ZW1wbGF0ZXMgPVxuICAgICAgICAgICAgW3sgbmFtZTogJ3RlbXBsYXRlMS5odG1sJywgdXJsOiAndGVtcGxhdGUxLmh0bWwnfSxcbiAgICAgICAgICAgICB7IG5hbWU6ICd0ZW1wbGF0ZTIuaHRtbCcsIHVybDogJ3RlbXBsYXRlMi5odG1sJ31dO1xuICAgICAgICAgICRzY29wZS50ZW1wbGF0ZSA9ICRzY29wZS50ZW1wbGF0ZXNbMF07XG4gICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJ0ZW1wbGF0ZTEuaHRtbFwiPlxuICAgICAgQ29udGVudCBvZiB0ZW1wbGF0ZTEuaHRtbFxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUyLmh0bWxcIj5cbiAgICAgIENvbnRlbnQgb2YgdGVtcGxhdGUyLmh0bWxcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuc2xpZGUtYW5pbWF0ZS1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgaGVpZ2h0OjQwcHg7XG4gICAgICAgIG92ZXJmbG93OmhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLnNsaWRlLWFuaW1hdGUge1xuICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWVudGVyLCAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcblxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgdG9wOjA7XG4gICAgICAgIGxlZnQ6MDtcbiAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgYm90dG9tOjA7XG4gICAgICAgIGRpc3BsYXk6YmxvY2s7XG4gICAgICAgIHBhZGRpbmc6MTBweDtcbiAgICAgIH1cblxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctZW50ZXIge1xuICAgICAgICB0b3A6LTUwcHg7XG4gICAgICB9XG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xuICAgICAgICB0b3A6MDtcbiAgICAgIH1cblxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctbGVhdmUge1xuICAgICAgICB0b3A6MDtcbiAgICAgIH1cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSB7XG4gICAgICAgIHRvcDo1MHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdGVtcGxhdGVTZWxlY3QgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0ZW1wbGF0ZScpKTtcbiAgICAgIHZhciBpbmNsdWRlRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCdbbmctaW5jbHVkZV0nKSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZTEuaHRtbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IG9mIHRlbXBsYXRlMS5odG1sLyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBsb2FkIHRlbXBsYXRlMi5odG1sJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChicm93c2VyLnBhcmFtcy5icm93c2VyID09PSAnZmlyZWZveCcpIHtcbiAgICAgICAgICAvLyBGaXJlZm94IGNhbid0IGhhbmRsZSB1c2luZyBzZWxlY3RzXG4gICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzQ4MFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5jbGljaygpO1xuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDIpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChpbmNsdWRlRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL0NvbnRlbnQgb2YgdGVtcGxhdGUyLmh0bWwvKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNoYW5nZSB0byBibGFuaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgICAgLy8gRmlyZWZveCBjYW4ndCBoYW5kbGUgdXNpbmcgc2VsZWN0c1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5jbGljaygpO1xuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDApLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChpbmNsdWRlRWxlbS5pc1ByZXNlbnQoKSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGV2ZW50XG4gKiBAbmFtZSBuZ0luY2x1ZGUjJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIHNjb3BlIG5nSW5jbHVkZSB3YXMgZGVjbGFyZWQgaW5cbiAqIEBkZXNjcmlwdGlvblxuICogRW1pdHRlZCBldmVyeSB0aW1lIHRoZSBuZ0luY2x1ZGUgY29udGVudCBpcyByZXF1ZXN0ZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZXZlbnRcbiAqIEBuYW1lIG5nSW5jbHVkZSMkaW5jbHVkZUNvbnRlbnRMb2FkZWRcbiAqIEBldmVudFR5cGUgZW1pdCBvbiB0aGUgY3VycmVudCBuZ0luY2x1ZGUgc2NvcGVcbiAqIEBkZXNjcmlwdGlvblxuICogRW1pdHRlZCBldmVyeSB0aW1lIHRoZSBuZ0luY2x1ZGUgY29udGVudCBpcyByZWxvYWRlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXG4gKiBAcGFyYW0ge1N0cmluZ30gc3JjIFVSTCBvZiBjb250ZW50IHRvIGxvYWQuXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBldmVudFxuICogQG5hbWUgbmdJbmNsdWRlIyRpbmNsdWRlQ29udGVudEVycm9yXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIHNjb3BlIG5nSW5jbHVkZSB3YXMgZGVjbGFyZWQgaW5cbiAqIEBkZXNjcmlwdGlvblxuICogRW1pdHRlZCB3aGVuIGEgdGVtcGxhdGUgSFRUUCByZXF1ZXN0IHlpZWxkcyBhbiBlcnJvbmVvdXMgcmVzcG9uc2UgKHN0YXR1cyA8IDIwMCB8fCBzdGF0dXMgPiAyOTkpXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxuICovXG52YXIgbmdJbmNsdWRlRGlyZWN0aXZlID0gWyckdGVtcGxhdGVSZXF1ZXN0JywgJyRhbmNob3JTY3JvbGwnLCAnJGFuaW1hdGUnLFxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oJHRlbXBsYXRlUmVxdWVzdCwgICAkYW5jaG9yU2Nyb2xsLCAgICRhbmltYXRlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQ0EnLFxuICAgIHByaW9yaXR5OiA0MDAsXG4gICAgdGVybWluYWw6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxuICAgIGNvbnRyb2xsZXI6IGFuZ3VsYXIubm9vcCxcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XG4gICAgICB2YXIgc3JjRXhwID0gYXR0ci5uZ0luY2x1ZGUgfHwgYXR0ci5zcmMsXG4gICAgICAgICAgb25sb2FkRXhwID0gYXR0ci5vbmxvYWQgfHwgJycsXG4gICAgICAgICAgYXV0b1Njcm9sbEV4cCA9IGF0dHIuYXV0b3Njcm9sbDtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG4gICAgICAgIHZhciBjaGFuZ2VDb3VudGVyID0gMCxcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZSxcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCxcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50O1xuXG4gICAgICAgIHZhciBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHByZXZpb3VzRWxlbWVudCkge1xuICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRTY29wZSkge1xuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRkZXN0cm95KCk7XG4gICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGN1cnJlbnRFbGVtZW50KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPT0gZmFsc2UpIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IGN1cnJlbnRFbGVtZW50O1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzY29wZS4kd2F0Y2goc3JjRXhwLCBmdW5jdGlvbiBuZ0luY2x1ZGVXYXRjaEFjdGlvbihzcmMpIHtcbiAgICAgICAgICB2YXIgYWZ0ZXJBbmltYXRpb24gPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9PSBmYWxzZSAmJiBpc0RlZmluZWQoYXV0b1Njcm9sbEV4cCkgJiZcbiAgICAgICAgICAgICAgKCFhdXRvU2Nyb2xsRXhwIHx8IHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKSkge1xuICAgICAgICAgICAgICAgICRhbmNob3JTY3JvbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHZhciB0aGlzQ2hhbmdlSWQgPSArK2NoYW5nZUNvdW50ZXI7XG5cbiAgICAgICAgICBpZiAoc3JjKSB7XG4gICAgICAgICAgICAvL3NldCB0aGUgMm5kIHBhcmFtIHRvIHRydWUgdG8gaWdub3JlIHRoZSB0ZW1wbGF0ZSByZXF1ZXN0IGVycm9yIHNvIHRoYXQgdGhlIGlubmVyXG4gICAgICAgICAgICAvL2NvbnRlbnRzIGFuZCBzY29wZSBjYW4gYmUgY2xlYW5lZCB1cC5cbiAgICAgICAgICAgICR0ZW1wbGF0ZVJlcXVlc3Qoc3JjLCB0cnVlKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzQ2hhbmdlSWQgIT09IGNoYW5nZUNvdW50ZXIpIHJldHVybjtcbiAgICAgICAgICAgICAgdmFyIG5ld1Njb3BlID0gc2NvcGUuJG5ldygpO1xuICAgICAgICAgICAgICBjdHJsLnRlbXBsYXRlID0gcmVzcG9uc2U7XG5cbiAgICAgICAgICAgICAgLy8gTm90ZTogVGhpcyB3aWxsIGFsc28gbGluayBhbGwgY2hpbGRyZW4gb2YgbmctaW5jbHVkZSB0aGF0IHdlcmUgY29udGFpbmVkIGluIHRoZSBvcmlnaW5hbFxuICAgICAgICAgICAgICAvLyBodG1sLiBJZiB0aGF0IGNvbnRlbnQgY29udGFpbnMgY29udHJvbGxlcnMsIC4uLiB0aGV5IGNvdWxkIHBvbGx1dGUvY2hhbmdlIHRoZSBzY29wZS5cbiAgICAgICAgICAgICAgLy8gSG93ZXZlciwgdXNpbmcgbmctaW5jbHVkZSBvbiBhbiBlbGVtZW50IHdpdGggYWRkaXRpb25hbCBjb250ZW50IGRvZXMgbm90IG1ha2Ugc2Vuc2UuLi5cbiAgICAgICAgICAgICAgLy8gTm90ZTogV2UgY2FuJ3QgcmVtb3ZlIHRoZW0gaW4gdGhlIGNsb25lQXR0Y2hGbiBvZiAkdHJhbnNjbHVkZSBhcyB0aGF0XG4gICAgICAgICAgICAgIC8vIGZ1bmN0aW9uIGlzIGNhbGxlZCBiZWZvcmUgbGlua2luZyB0aGUgY29udGVudCwgd2hpY2ggd291bGQgYXBwbHkgY2hpbGRcbiAgICAgICAgICAgICAgLy8gZGlyZWN0aXZlcyB0byBub24gZXhpc3RpbmcgZWxlbWVudHMuXG4gICAgICAgICAgICAgIHZhciBjbG9uZSA9ICR0cmFuc2NsdWRlKG5ld1Njb3BlLCBmdW5jdGlvbihjbG9uZSkge1xuICAgICAgICAgICAgICAgIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgbnVsbCwgJGVsZW1lbnQpLmRvbmUoYWZ0ZXJBbmltYXRpb24pO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBuZXdTY29wZTtcbiAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjbG9uZTtcblxuICAgICAgICAgICAgICBjdXJyZW50U2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudExvYWRlZCcsIHNyYyk7XG4gICAgICAgICAgICAgIHNjb3BlLiRldmFsKG9ubG9hZEV4cCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKHNjb3BlLiQkZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgaWYgKHRoaXNDaGFuZ2VJZCA9PT0gY2hhbmdlQ291bnRlcikge1xuICAgICAgICAgICAgICAgIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50RXJyb3InLCBzcmMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWQnLCBzcmMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICBjdHJsLnRlbXBsYXRlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuLy8gVGhpcyBkaXJlY3RpdmUgaXMgY2FsbGVkIGR1cmluZyB0aGUgJHRyYW5zY2x1ZGUgY2FsbCBvZiB0aGUgZmlyc3QgYG5nSW5jbHVkZWAgZGlyZWN0aXZlLlxuLy8gSXQgd2lsbCByZXBsYWNlIGFuZCBjb21waWxlIHRoZSBjb250ZW50IG9mIHRoZSBlbGVtZW50IHdpdGggdGhlIGxvYWRlZCB0ZW1wbGF0ZS5cbi8vIFdlIG5lZWQgdGhpcyBkaXJlY3RpdmUgc28gdGhhdCB0aGUgZWxlbWVudCBjb250ZW50IGlzIGFscmVhZHkgZmlsbGVkIHdoZW5cbi8vIHRoZSBsaW5rIGZ1bmN0aW9uIG9mIGFub3RoZXIgZGlyZWN0aXZlIG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgbmdJbmNsdWRlXG4vLyBpcyBjYWxsZWQuXG52YXIgbmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmUgPSBbJyRjb21waWxlJyxcbiAgZnVuY3Rpb24oJGNvbXBpbGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFQ0EnLFxuICAgICAgcHJpb3JpdHk6IC00MDAsXG4gICAgICByZXF1aXJlOiAnbmdJbmNsdWRlJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwpIHtcbiAgICAgICAgaWYgKHRvU3RyaW5nLmNhbGwoJGVsZW1lbnRbMF0pLm1hdGNoKC9TVkcvKSkge1xuICAgICAgICAgIC8vIFdlYktpdDogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNTY5OCAtLS0gU1ZHIGVsZW1lbnRzIGRvIG5vdFxuICAgICAgICAgIC8vIHN1cHBvcnQgaW5uZXJIVE1MLCBzbyBkZXRlY3QgdGhpcyBoZXJlIGFuZCB0cnkgdG8gZ2VuZXJhdGUgdGhlIGNvbnRlbnRzXG4gICAgICAgICAgLy8gc3BlY2lhbGx5LlxuICAgICAgICAgICRlbGVtZW50LmVtcHR5KCk7XG4gICAgICAgICAgJGNvbXBpbGUoanFMaXRlQnVpbGRGcmFnbWVudChjdHJsLnRlbXBsYXRlLCB3aW5kb3cuZG9jdW1lbnQpLmNoaWxkTm9kZXMpKHNjb3BlLFxuICAgICAgICAgICAgICBmdW5jdGlvbiBuYW1lc3BhY2VBZGFwdGVkQ2xvbmUoY2xvbmUpIHtcbiAgICAgICAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgICAgfSwge2Z1dHVyZVBhcmVudEVsZW1lbnQ6ICRlbGVtZW50fSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJGVsZW1lbnQuaHRtbChjdHJsLnRlbXBsYXRlKTtcbiAgICAgICAgJGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSkoc2NvcGUpO1xuICAgICAgfVxuICAgIH07XG4gIH1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSW5pdFxuICogQHJlc3RyaWN0IEFDXG4gKiBAcHJpb3JpdHkgNDUwXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSW5pdCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0luaXRgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIGV2YWx1YXRlIGFuIGV4cHJlc3Npb24gaW4gdGhlXG4gKiBjdXJyZW50IHNjb3BlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSBhYnVzZWQgdG8gYWRkIHVubmVjZXNzYXJ5IGFtb3VudHMgb2YgbG9naWMgaW50byB5b3VyIHRlbXBsYXRlcy5cbiAqIFRoZXJlIGFyZSBvbmx5IGEgZmV3IGFwcHJvcHJpYXRlIHVzZXMgb2YgYG5nSW5pdGA6XG4gKiA8dWw+XG4gKiAgIDxsaT5hbGlhc2luZyBzcGVjaWFsIHByb3BlcnRpZXMgb2Yge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBgbmdSZXBlYXRgfSxcbiAqICAgICBhcyBzZWVuIGluIHRoZSBkZW1vIGJlbG93LjwvbGk+XG4gKiAgIDxsaT5pbml0aWFsaXppbmcgZGF0YSBkdXJpbmcgZGV2ZWxvcG1lbnQsIG9yIGZvciBleGFtcGxlcywgYXMgc2VlbiB0aHJvdWdob3V0IHRoZXNlIGRvY3MuPC9saT5cbiAqICAgPGxpPmluamVjdGluZyBkYXRhIHZpYSBzZXJ2ZXIgc2lkZSBzY3JpcHRpbmcuPC9saT5cbiAqIDwvdWw+XG4gKlxuICogQmVzaWRlcyB0aGVzZSBmZXcgY2FzZXMsIHlvdSBzaG91bGQgdXNlIHtAbGluayBndWlkZS9jb21wb25lbnQgQ29tcG9uZW50c30gb3JcbiAqIHtAbGluayBndWlkZS9jb250cm9sbGVyIENvbnRyb2xsZXJzfSByYXRoZXIgdGhhbiBgbmdJbml0YCB0byBpbml0aWFsaXplIHZhbHVlcyBvbiBhIHNjb3BlLlxuICogPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZSoqOiBJZiB5b3UgaGF2ZSBhc3NpZ25tZW50IGluIGBuZ0luaXRgIGFsb25nIHdpdGggYSB7QGxpbmsgbmcuJGZpbHRlciBgZmlsdGVyYH0sIG1ha2VcbiAqIHN1cmUgeW91IGhhdmUgcGFyZW50aGVzZXMgdG8gZW5zdXJlIGNvcnJlY3Qgb3BlcmF0b3IgcHJlY2VkZW5jZTpcbiAqIDxwcmUgY2xhc3M9XCJwcmV0dHlwcmludFwiPlxuICogYDxkaXYgbmctaW5pdD1cInRlc3QxID0gKCRpbmRleCB8IHRvU3RyaW5nKVwiPjwvZGl2PmBcbiAqIDwvcHJlPlxuICogPC9kaXY+XG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImluaXRFeGFtcGxlXCIgbmFtZT1cIm5nLWluaXRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgIDxzY3JpcHQ+XG4gICAgIGFuZ3VsYXIubW9kdWxlKCdpbml0RXhhbXBsZScsIFtdKVxuICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAkc2NvcGUubGlzdCA9IFtbJ2EnLCAnYiddLCBbJ2MnLCAnZCddXTtcbiAgICAgICB9XSk7XG4gICA8L3NjcmlwdD5cbiAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgIDxkaXYgbmctcmVwZWF0PVwiaW5uZXJMaXN0IGluIGxpc3RcIiBuZy1pbml0PVwib3V0ZXJJbmRleCA9ICRpbmRleFwiPlxuICAgICAgIDxkaXYgbmctcmVwZWF0PVwidmFsdWUgaW4gaW5uZXJMaXN0XCIgbmctaW5pdD1cImlubmVySW5kZXggPSAkaW5kZXhcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImV4YW1wbGUtaW5pdFwiPmxpc3RbIHt7b3V0ZXJJbmRleH19IF1bIHt7aW5uZXJJbmRleH19IF0gPSB7e3ZhbHVlfX07PC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2Rpdj5cbiAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGFsaWFzIGluZGV4IHBvc2l0aW9ucycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIGVsZW1lbnRzID0gZWxlbWVudC5hbGwoYnkuY3NzKCcuZXhhbXBsZS1pbml0JykpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnRzLmdldCgwKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3RbIDAgXVsgMCBdID0gYTsnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMSkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAwIF1bIDEgXSA9IGI7Jyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDIpLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMSBdWyAwIF0gPSBjOycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnRzLmdldCgzKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3RbIDEgXVsgMSBdID0gZDsnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdJbml0RGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xuICBwcmlvcml0eTogNDUwLFxuICBjb21waWxlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJlOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgc2NvcGUuJGV2YWwoYXR0cnMubmdJbml0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0xpc3RcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0xpc3Qgb3B0aW9uYWwgZGVsaW1pdGVyIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gc3BsaXQgdGhlIHZhbHVlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGV4dCBpbnB1dCB0aGF0IGNvbnZlcnRzIGJldHdlZW4gYSBkZWxpbWl0ZWQgc3RyaW5nIGFuZCBhbiBhcnJheSBvZiBzdHJpbmdzLiBUaGUgZGVmYXVsdFxuICogZGVsaW1pdGVyIGlzIGEgY29tbWEgZm9sbG93ZWQgYnkgYSBzcGFjZSAtIGVxdWl2YWxlbnQgdG8gYG5nLWxpc3Q9XCIsIFwiYC4gWW91IGNhbiBzcGVjaWZ5IGEgY3VzdG9tXG4gKiBkZWxpbWl0ZXIgYXMgdGhlIHZhbHVlIG9mIHRoZSBgbmdMaXN0YCBhdHRyaWJ1dGUgLSBmb3IgZXhhbXBsZSwgYG5nLWxpc3Q9XCIgfCBcImAuXG4gKlxuICogVGhlIGJlaGF2aW91ciBvZiB0aGUgZGlyZWN0aXZlIGlzIGFmZmVjdGVkIGJ5IHRoZSB1c2Ugb2YgdGhlIGBuZ1RyaW1gIGF0dHJpYnV0ZS5cbiAqICogSWYgYG5nVHJpbWAgaXMgc2V0IHRvIGBcImZhbHNlXCJgIHRoZW4gd2hpdGVzcGFjZSBhcm91bmQgYm90aCB0aGUgc2VwYXJhdG9yIGFuZCBlYWNoXG4gKiAgIGxpc3QgaXRlbSBpcyByZXNwZWN0ZWQuIFRoaXMgaW1wbGllcyB0aGF0IHRoZSB1c2VyIG9mIHRoZSBkaXJlY3RpdmUgaXMgcmVzcG9uc2libGUgZm9yXG4gKiAgIGRlYWxpbmcgd2l0aCB3aGl0ZXNwYWNlIGJ1dCBhbHNvIGFsbG93cyB5b3UgdG8gdXNlIHdoaXRlc3BhY2UgYXMgYSBkZWxpbWl0ZXIsIHN1Y2ggYXMgYVxuICogICB0YWIgb3IgbmV3bGluZSBjaGFyYWN0ZXIuXG4gKiAqIE90aGVyd2lzZSB3aGl0ZXNwYWNlIGFyb3VuZCB0aGUgZGVsaW1pdGVyIGlzIGlnbm9yZWQgd2hlbiBzcGxpdHRpbmcgKGFsdGhvdWdoIGl0IGlzIHJlc3BlY3RlZFxuICogICB3aGVuIGpvaW5pbmcgdGhlIGxpc3QgaXRlbXMgYmFjayB0b2dldGhlcikgYW5kIHdoaXRlc3BhY2UgYXJvdW5kIGVhY2ggbGlzdCBpdGVtIGlzIHN0cmlwcGVkXG4gKiAgIGJlZm9yZSBpdCBpcyBhZGRlZCB0byB0aGUgbW9kZWwuXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBWYWxpZGF0aW9uXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nTGlzdC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJsaXN0RXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgIGFuZ3VsYXIubW9kdWxlKCdsaXN0RXhhbXBsZScsIFtdKVxuICogICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ21vcnBoZXVzJywgJ25lbycsICd0cmluaXR5J107XG4gKiAgICAgICAgfV0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgIDxsYWJlbD5MaXN0OiA8aW5wdXQgbmFtZT1cIm5hbWVzSW5wdXRcIiBuZy1tb2RlbD1cIm5hbWVzXCIgbmctbGlzdCByZXF1aXJlZD48L2xhYmVsPlxuICogICAgICA8c3BhbiByb2xlPVwiYWxlcnRcIj5cbiAqICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5uYW1lc0lucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICogICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAqICAgICAgPC9zcGFuPlxuICogICAgICA8YnI+XG4gKiAgICAgIDx0dD5uYW1lcyA9IHt7bmFtZXN9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS5uYW1lc0lucHV0LiR2YWxpZCA9IHt7bXlGb3JtLm5hbWVzSW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5uYW1lc0lucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICogICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICogICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gKiAgICAgPC9mb3JtPlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICB2YXIgbGlzdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZXMnKSk7XG4gKiAgICAgdmFyIG5hbWVzID0gZWxlbWVudChieS5leGFjdEJpbmRpbmcoJ25hbWVzJykpO1xuICogICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLm5hbWVzSW5wdXQuJHZhbGlkJykpO1xuICogICAgIHZhciBlcnJvciA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmVycm9yJykpO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGV4cGVjdChuYW1lcy5nZXRUZXh0KCkpLnRvQ29udGFpbignW1wibW9ycGhldXNcIixcIm5lb1wiLFwidHJpbml0eVwiXScpO1xuICogICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gKiAgICAgICBleHBlY3QoZXJyb3IuZ2V0Q3NzVmFsdWUoJ2Rpc3BsYXknKSkudG9CZSgnbm9uZScpO1xuICogICAgIH0pO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGxpc3RJbnB1dC5jbGVhcigpO1xuICogICAgICAgbGlzdElucHV0LnNlbmRLZXlzKCcnKTtcbiAqXG4gKiAgICAgICBleHBlY3QobmFtZXMuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xuICogICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICogICAgICAgZXhwZWN0KGVycm9yLmdldENzc1ZhbHVlKCdkaXNwbGF5JykpLm5vdC50b0JlKCdub25lJyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIFNwbGl0dGluZyBvbiBuZXdsaW5lXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nTGlzdC1kaXJlY3RpdmUtbmV3bGluZXNcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cImxpc3RcIiBuZy1saXN0PVwiJiMxMDtcIiBuZy10cmltPVwiZmFsc2VcIj48L3RleHRhcmVhPlxuICogICAgPHByZT57eyBsaXN0IHwganNvbiB9fTwvcHJlPlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICBpdChcInNob3VsZCBzcGxpdCB0aGUgdGV4dCBieSBuZXdsaW5lc1wiLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIHZhciBsaXN0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsaXN0JykpO1xuICogICAgICAgdmFyIG91dHB1dCA9IGVsZW1lbnQoYnkuYmluZGluZygnbGlzdCB8IGpzb24nKSk7XG4gKiAgICAgICBsaXN0SW5wdXQuc2VuZEtleXMoJ2FiY1xcbmRlZlxcbmdoaScpO1xuICogICAgICAgZXhwZWN0KG91dHB1dC5nZXRUZXh0KCkpLnRvQ29udGFpbignW1xcbiAgXCJhYmNcIixcXG4gIFwiZGVmXCIsXFxuICBcImdoaVwiXFxuXScpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICovXG52YXIgbmdMaXN0RGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBwcmlvcml0eTogMTAwLFxuICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xuICAgICAgdmFyIG5nTGlzdCA9IGF0dHIubmdMaXN0IHx8ICcsICc7XG4gICAgICB2YXIgdHJpbVZhbHVlcyA9IGF0dHIubmdUcmltICE9PSAnZmFsc2UnO1xuICAgICAgdmFyIHNlcGFyYXRvciA9IHRyaW1WYWx1ZXMgPyB0cmltKG5nTGlzdCkgOiBuZ0xpc3Q7XG5cbiAgICAgIHZhciBwYXJzZSA9IGZ1bmN0aW9uKHZpZXdWYWx1ZSkge1xuICAgICAgICAvLyBJZiB0aGUgdmlld1ZhbHVlIGlzIGludmFsaWQgKHNheSByZXF1aXJlZCBidXQgZW1wdHkpIGl0IHdpbGwgYmUgYHVuZGVmaW5lZGBcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZpZXdWYWx1ZSkpIHJldHVybjtcblxuICAgICAgICB2YXIgbGlzdCA9IFtdO1xuXG4gICAgICAgIGlmICh2aWV3VmFsdWUpIHtcbiAgICAgICAgICBmb3JFYWNoKHZpZXdWYWx1ZS5zcGxpdChzZXBhcmF0b3IpLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSBsaXN0LnB1c2godHJpbVZhbHVlcyA/IHRyaW0odmFsdWUpIDogdmFsdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICB9O1xuXG4gICAgICBjdHJsLiRwYXJzZXJzLnB1c2gocGFyc2UpO1xuICAgICAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZS5qb2luKG5nTGlzdCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE92ZXJyaWRlIHRoZSBzdGFuZGFyZCAkaXNFbXB0eSBiZWNhdXNlIGFuIGVtcHR5IGFycmF5IG1lYW5zIHRoZSBpbnB1dCBpcyBlbXB0eS5cbiAgICAgIGN0cmwuJGlzRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIXZhbHVlIHx8ICF2YWx1ZS5sZW5ndGg7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBWQUxJRF9DTEFTUzogdHJ1ZSxcbiAgSU5WQUxJRF9DTEFTUzogdHJ1ZSxcbiAgUFJJU1RJTkVfQ0xBU1M6IHRydWUsXG4gIERJUlRZX0NMQVNTOiB0cnVlLFxuICBVTlRPVUNIRURfQ0xBU1M6IHRydWUsXG4gIFRPVUNIRURfQ0xBU1M6IHRydWUsXG4gIFBFTkRJTkdfQ0xBU1M6IHRydWUsXG4gIGFkZFNldFZhbGlkaXR5TWV0aG9kOiB0cnVlLFxuICBzZXR1cFZhbGlkaXR5OiB0cnVlLFxuICBkZWZhdWx0TW9kZWxPcHRpb25zOiBmYWxzZVxuKi9cblxuXG52YXIgVkFMSURfQ0xBU1MgPSAnbmctdmFsaWQnLFxuICAgIElOVkFMSURfQ0xBU1MgPSAnbmctaW52YWxpZCcsXG4gICAgUFJJU1RJTkVfQ0xBU1MgPSAnbmctcHJpc3RpbmUnLFxuICAgIERJUlRZX0NMQVNTID0gJ25nLWRpcnR5JyxcbiAgICBVTlRPVUNIRURfQ0xBU1MgPSAnbmctdW50b3VjaGVkJyxcbiAgICBUT1VDSEVEX0NMQVNTID0gJ25nLXRvdWNoZWQnLFxuICAgIEVNUFRZX0NMQVNTID0gJ25nLWVtcHR5JyxcbiAgICBOT1RfRU1QVFlfQ0xBU1MgPSAnbmctbm90LWVtcHR5JztcblxudmFyIG5nTW9kZWxNaW5FcnIgPSBtaW5FcnIoJ25nTW9kZWwnKTtcblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlclxuICogQHByb3BlcnR5IHsqfSAkdmlld1ZhbHVlIFRoZSBhY3R1YWwgdmFsdWUgZnJvbSB0aGUgY29udHJvbCdzIHZpZXcuIEZvciBgaW5wdXRgIGVsZW1lbnRzLCB0aGlzIGlzIGFcbiAqIFN0cmluZy4gU2VlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWaWV3VmFsdWV9IGZvciBpbmZvcm1hdGlvbiBhYm91dCB3aGVuIHRoZSAkdmlld1ZhbHVlXG4gKiBpcyBzZXQuXG4gKlxuICogQHByb3BlcnR5IHsqfSAkbW9kZWxWYWx1ZSBUaGUgdmFsdWUgaW4gdGhlIG1vZGVsIHRoYXQgdGhlIGNvbnRyb2wgaXMgYm91bmQgdG8uXG4gKlxuICogQHByb3BlcnR5IHtBcnJheS48RnVuY3Rpb24+fSAkcGFyc2VycyBBcnJheSBvZiBmdW5jdGlvbnMgdG8gZXhlY3V0ZSwgYXMgYSBwaXBlbGluZSwgd2hlbmV2ZXJcbiAqICB0aGUgY29udHJvbCB1cGRhdGVzIHRoZSBuZ01vZGVsQ29udHJvbGxlciB3aXRoIGEgbmV3IHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWVcbiAgICBgJHZpZXdWYWx1ZWB9IGZyb20gdGhlIERPTSwgdXN1YWxseSB2aWEgdXNlciBpbnB1dC5cbiAgICBTZWUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZpZXdWYWx1ZSBgJHNldFZpZXdWYWx1ZSgpYH0gZm9yIGEgZGV0YWlsZWQgbGlmZWN5Y2xlIGV4cGxhbmF0aW9uLlxuICAgIE5vdGUgdGhhdCB0aGUgYCRwYXJzZXJzYCBhcmUgbm90IGNhbGxlZCB3aGVuIHRoZSBib3VuZCBuZ01vZGVsIGV4cHJlc3Npb24gY2hhbmdlcyBwcm9ncmFtbWF0aWNhbGx5LlxuXG4gIFRoZSBmdW5jdGlvbnMgYXJlIGNhbGxlZCBpbiBhcnJheSBvcmRlciwgZWFjaCBwYXNzaW5nXG4gICAgaXRzIHJldHVybiB2YWx1ZSB0aHJvdWdoIHRvIHRoZSBuZXh0LiBUaGUgbGFzdCByZXR1cm4gdmFsdWUgaXMgZm9yd2FyZGVkIHRvIHRoZVxuICAgIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGAkdmFsaWRhdG9yc2B9IGNvbGxlY3Rpb24uXG5cbiAgUGFyc2VycyBhcmUgdXNlZCB0byBzYW5pdGl6ZSAvIGNvbnZlcnQgdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWVcbiAgICBgJHZpZXdWYWx1ZWB9LlxuXG4gIFJldHVybmluZyBgdW5kZWZpbmVkYCBmcm9tIGEgcGFyc2VyIG1lYW5zIGEgcGFyc2UgZXJyb3Igb2NjdXJyZWQuIEluIHRoYXQgY2FzZSxcbiAgICBubyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgJHZhbGlkYXRvcnNgfSB3aWxsIHJ1biBhbmQgdGhlIGBuZ01vZGVsYFxuICAgIHdpbGwgYmUgc2V0IHRvIGB1bmRlZmluZWRgIHVubGVzcyB7QGxpbmsgbmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zLmFsbG93SW52YWxpZGB9XG4gICAgaXMgc2V0IHRvIGB0cnVlYC4gVGhlIHBhcnNlIGVycm9yIGlzIHN0b3JlZCBpbiBgbmdNb2RlbC4kZXJyb3IucGFyc2VgLlxuXG4gIFRoaXMgc2ltcGxlIGV4YW1wbGUgc2hvd3MgYSBwYXJzZXIgdGhhdCB3b3VsZCBjb252ZXJ0IHRleHQgaW5wdXQgdmFsdWUgdG8gbG93ZXJjYXNlOlxuICogYGBganNcbiAqIGZ1bmN0aW9uIHBhcnNlKHZhbHVlKSB7XG4gKiAgIGlmICh2YWx1ZSkge1xuICogICAgIHJldHVybiB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICogICB9XG4gKiB9XG4gKiBuZ01vZGVsQ29udHJvbGxlci4kcGFyc2Vycy5wdXNoKHBhcnNlKTtcbiAqIGBgYFxuXG4gKlxuICogQHByb3BlcnR5IHtBcnJheS48RnVuY3Rpb24+fSAkZm9ybWF0dGVycyBBcnJheSBvZiBmdW5jdGlvbnMgdG8gZXhlY3V0ZSwgYXMgYSBwaXBlbGluZSwgd2hlbmV2ZXJcbiAgICB0aGUgYm91bmQgbmdNb2RlbCBleHByZXNzaW9uIGNoYW5nZXMgcHJvZ3JhbW1hdGljYWxseS4gVGhlIGAkZm9ybWF0dGVyc2AgYXJlIG5vdCBjYWxsZWQgd2hlbiB0aGVcbiAgICB2YWx1ZSBvZiB0aGUgY29udHJvbCBpcyBjaGFuZ2VkIGJ5IHVzZXIgaW50ZXJhY3Rpb24uXG5cbiAgRm9ybWF0dGVycyBhcmUgdXNlZCB0byBmb3JtYXQgLyBjb252ZXJ0IHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkbW9kZWxWYWx1ZVxuICAgIGAkbW9kZWxWYWx1ZWB9IGZvciBkaXNwbGF5IGluIHRoZSBjb250cm9sLlxuXG4gIFRoZSBmdW5jdGlvbnMgYXJlIGNhbGxlZCBpbiByZXZlcnNlIGFycmF5IG9yZGVyLCBlYWNoIHBhc3NpbmcgdGhlIHZhbHVlIHRocm91Z2ggdG8gdGhlXG4gICAgbmV4dC4gVGhlIGxhc3QgcmV0dXJuIHZhbHVlIGlzIHVzZWQgYXMgdGhlIGFjdHVhbCBET00gdmFsdWUuXG5cbiAgVGhpcyBzaW1wbGUgZXhhbXBsZSBzaG93cyBhIGZvcm1hdHRlciB0aGF0IHdvdWxkIGNvbnZlcnQgdGhlIG1vZGVsIHZhbHVlIHRvIHVwcGVyY2FzZTpcblxuICogYGBganNcbiAqIGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSkge1xuICogICBpZiAodmFsdWUpIHtcbiAqICAgICByZXR1cm4gdmFsdWUudG9VcHBlckNhc2UoKTtcbiAqICAgfVxuICogfVxuICogbmdNb2RlbC4kZm9ybWF0dGVycy5wdXNoKGZvcm1hdCk7XG4gKiBgYGBcbiAqXG4gKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj59ICR2YWxpZGF0b3JzIEEgY29sbGVjdGlvbiBvZiB2YWxpZGF0b3JzIHRoYXQgYXJlIGFwcGxpZWRcbiAqICAgICAgd2hlbmV2ZXIgdGhlIG1vZGVsIHZhbHVlIGNoYW5nZXMuIFRoZSBrZXkgdmFsdWUgd2l0aGluIHRoZSBvYmplY3QgcmVmZXJzIHRvIHRoZSBuYW1lIG9mIHRoZVxuICogICAgICB2YWxpZGF0b3Igd2hpbGUgdGhlIGZ1bmN0aW9uIHJlZmVycyB0byB0aGUgdmFsaWRhdGlvbiBvcGVyYXRpb24uIFRoZSB2YWxpZGF0aW9uIG9wZXJhdGlvbiBpc1xuICogICAgICBwcm92aWRlZCB3aXRoIHRoZSBtb2RlbCB2YWx1ZSBhcyBhbiBhcmd1bWVudCBhbmQgbXVzdCByZXR1cm4gYSB0cnVlIG9yIGZhbHNlIHZhbHVlIGRlcGVuZGluZ1xuICogICAgICBvbiB0aGUgcmVzcG9uc2Ugb2YgdGhhdCB2YWxpZGF0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiBuZ01vZGVsLiR2YWxpZGF0b3JzLnZhbGlkQ2hhcmFjdGVycyA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICogICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAqICAgcmV0dXJuIC9bMC05XSsvLnRlc3QodmFsdWUpICYmXG4gKiAgICAgICAgICAvW2Etel0rLy50ZXN0KHZhbHVlKSAmJlxuICogICAgICAgICAgL1tBLVpdKy8udGVzdCh2YWx1ZSkgJiZcbiAqICAgICAgICAgIC9cXFcrLy50ZXN0KHZhbHVlKTtcbiAqIH07XG4gKiBgYGBcbiAqXG4gKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj59ICRhc3luY1ZhbGlkYXRvcnMgQSBjb2xsZWN0aW9uIG9mIHZhbGlkYXRpb25zIHRoYXQgYXJlIGV4cGVjdGVkIHRvXG4gKiAgICAgIHBlcmZvcm0gYW4gYXN5bmNocm9ub3VzIHZhbGlkYXRpb24gKGUuZy4gYSBIVFRQIHJlcXVlc3QpLiBUaGUgdmFsaWRhdGlvbiBmdW5jdGlvbiB0aGF0IGlzIHByb3ZpZGVkXG4gKiAgICAgIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhIHByb21pc2Ugd2hlbiBpdCBpcyBydW4gZHVyaW5nIHRoZSBtb2RlbCB2YWxpZGF0aW9uIHByb2Nlc3MuIE9uY2UgdGhlIHByb21pc2VcbiAqICAgICAgaXMgZGVsaXZlcmVkIHRoZW4gdGhlIHZhbGlkYXRpb24gc3RhdHVzIHdpbGwgYmUgc2V0IHRvIHRydWUgd2hlbiBmdWxmaWxsZWQgYW5kIGZhbHNlIHdoZW4gcmVqZWN0ZWQuXG4gKiAgICAgIFdoZW4gdGhlIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JzIGFyZSB0cmlnZ2VyZWQsIGVhY2ggb2YgdGhlIHZhbGlkYXRvcnMgd2lsbCBydW4gaW4gcGFyYWxsZWwgYW5kIHRoZSBtb2RlbFxuICogICAgICB2YWx1ZSB3aWxsIG9ubHkgYmUgdXBkYXRlZCBvbmNlIGFsbCB2YWxpZGF0b3JzIGhhdmUgYmVlbiBmdWxmaWxsZWQuIEFzIGxvbmcgYXMgYW4gYXN5bmNocm9ub3VzIHZhbGlkYXRvclxuICogICAgICBpcyB1bmZ1bGZpbGxlZCwgaXRzIGtleSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBjb250cm9sbGVycyBgJHBlbmRpbmdgIHByb3BlcnR5LiBBbHNvLCBhbGwgYXN5bmNocm9ub3VzIHZhbGlkYXRvcnNcbiAqICAgICAgd2lsbCBvbmx5IHJ1biBvbmNlIGFsbCBzeW5jaHJvbm91cyB2YWxpZGF0b3JzIGhhdmUgcGFzc2VkLlxuICpcbiAqIFBsZWFzZSBub3RlIHRoYXQgaWYgJGh0dHAgaXMgdXNlZCB0aGVuIGl0IGlzIGltcG9ydGFudCB0aGF0IHRoZSBzZXJ2ZXIgcmV0dXJucyBhIHN1Y2Nlc3MgSFRUUCByZXNwb25zZSBjb2RlXG4gKiBpbiBvcmRlciB0byBmdWxmaWxsIHRoZSB2YWxpZGF0aW9uIGFuZCBhIHN0YXR1cyBsZXZlbCBvZiBgNHh4YCBpbiBvcmRlciB0byByZWplY3QgdGhlIHZhbGlkYXRpb24uXG4gKlxuICogYGBganNcbiAqIG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9ycy51bmlxdWVVc2VybmFtZSA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICogICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAqXG4gKiAgIC8vIExvb2t1cCB1c2VyIGJ5IHVzZXJuYW1lXG4gKiAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvJyArIHZhbHVlKS5cbiAqICAgICAgdGhlbihmdW5jdGlvbiByZXNvbHZlZCgpIHtcbiAqICAgICAgICAvL3VzZXJuYW1lIGV4aXN0cywgdGhpcyBtZWFucyB2YWxpZGF0aW9uIGZhaWxzXG4gKiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnZXhpc3RzJyk7XG4gKiAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdGVkKCkge1xuICogICAgICAgIC8vdXNlcm5hbWUgZG9lcyBub3QgZXhpc3QsIHRoZXJlZm9yZSB0aGlzIHZhbGlkYXRpb24gcGFzc2VzXG4gKiAgICAgICAgcmV0dXJuIHRydWU7XG4gKiAgICAgIH0pO1xuICogfTtcbiAqIGBgYFxuICpcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJHZpZXdDaGFuZ2VMaXN0ZW5lcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUgd2hlbmV2ZXJcbiAqICAgICBhIGNoYW5nZSB0byB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlIGAkdmlld1ZhbHVlYH0gaGFzIGNhdXNlZCBhIGNoYW5nZVxuICogICAgIHRvIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRtb2RlbFZhbHVlIGAkbW9kZWxWYWx1ZWB9LlxuICogICAgIEl0IGlzIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgYW5kIGl0cyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAqICAgICBUaGlzIGNhbiBiZSB1c2VkIGluIHBsYWNlIG9mIGFkZGl0aW9uYWwgJHdhdGNoZXMgYWdhaW5zdCB0aGUgbW9kZWwgdmFsdWUuXG4gKlxuICogQHByb3BlcnR5IHtPYmplY3R9ICRlcnJvciBBbiBvYmplY3QgaGFzaCB3aXRoIGFsbCBmYWlsaW5nIHZhbGlkYXRvciBpZHMgYXMga2V5cy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkcGVuZGluZyBBbiBvYmplY3QgaGFzaCB3aXRoIGFsbCBwZW5kaW5nIHZhbGlkYXRvciBpZHMgYXMga2V5cy5cbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR1bnRvdWNoZWQgVHJ1ZSBpZiBjb250cm9sIGhhcyBub3QgbG9zdCBmb2N1cyB5ZXQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR0b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbG9zdCBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHByaXN0aW5lIFRydWUgaWYgdXNlciBoYXMgbm90IGludGVyYWN0ZWQgd2l0aCB0aGUgY29udHJvbCB5ZXQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRkaXJ0eSBUcnVlIGlmIHVzZXIgaGFzIGFscmVhZHkgaW50ZXJhY3RlZCB3aXRoIHRoZSBjb250cm9sLlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdmFsaWQgVHJ1ZSBpZiB0aGVyZSBpcyBubyBlcnJvci5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJGludmFsaWQgVHJ1ZSBpZiBhdCBsZWFzdCBvbmUgZXJyb3Igb24gdGhlIGNvbnRyb2wuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gJG5hbWUgVGhlIG5hbWUgYXR0cmlidXRlIG9mIHRoZSBjb250cm9sLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIGBOZ01vZGVsQ29udHJvbGxlcmAgcHJvdmlkZXMgQVBJIGZvciB0aGUge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSBkaXJlY3RpdmUuXG4gKiBUaGUgY29udHJvbGxlciBjb250YWlucyBzZXJ2aWNlcyBmb3IgZGF0YS1iaW5kaW5nLCB2YWxpZGF0aW9uLCBDU1MgdXBkYXRlcywgYW5kIHZhbHVlIGZvcm1hdHRpbmdcbiAqIGFuZCBwYXJzaW5nLiBJdCBwdXJwb3NlZnVsbHkgZG9lcyBub3QgY29udGFpbiBhbnkgbG9naWMgd2hpY2ggZGVhbHMgd2l0aCBET00gcmVuZGVyaW5nIG9yXG4gKiBsaXN0ZW5pbmcgdG8gRE9NIGV2ZW50cy5cbiAqIFN1Y2ggRE9NIHJlbGF0ZWQgbG9naWMgc2hvdWxkIGJlIHByb3ZpZGVkIGJ5IG90aGVyIGRpcmVjdGl2ZXMgd2hpY2ggbWFrZSB1c2Ugb2ZcbiAqIGBOZ01vZGVsQ29udHJvbGxlcmAgZm9yIGRhdGEtYmluZGluZyB0byBjb250cm9sIGVsZW1lbnRzLlxuICogQW5ndWxhckpTIHByb3ZpZGVzIHRoaXMgRE9NIGxvZ2ljIGZvciBtb3N0IHtAbGluayBpbnB1dCBgaW5wdXRgfSBlbGVtZW50cy5cbiAqIEF0IHRoZSBlbmQgb2YgdGhpcyBwYWdlIHlvdSBjYW4gZmluZCBhIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyI2N1c3RvbS1jb250cm9sLWV4YW1wbGVcbiAqIGN1c3RvbSBjb250cm9sIGV4YW1wbGV9IHRoYXQgdXNlcyBgbmdNb2RlbENvbnRyb2xsZXJgIHRvIGJpbmQgdG8gYGNvbnRlbnRlZGl0YWJsZWAgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBDdXN0b20gQ29udHJvbCBFeGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHRvIHVzZSBgTmdNb2RlbENvbnRyb2xsZXJgIHdpdGggYSBjdXN0b20gY29udHJvbCB0byBhY2hpZXZlXG4gKiBkYXRhLWJpbmRpbmcuIE5vdGljZSBob3cgZGlmZmVyZW50IGRpcmVjdGl2ZXMgKGBjb250ZW50ZWRpdGFibGVgLCBgbmctbW9kZWxgLCBhbmQgYHJlcXVpcmVkYClcbiAqIGNvbGxhYm9yYXRlIHRvZ2V0aGVyIHRvIGFjaGlldmUgdGhlIGRlc2lyZWQgcmVzdWx0LlxuICpcbiAqIGBjb250ZW50ZWRpdGFibGVgIGlzIGFuIEhUTUw1IGF0dHJpYnV0ZSwgd2hpY2ggdGVsbHMgdGhlIGJyb3dzZXIgdG8gbGV0IHRoZSBlbGVtZW50XG4gKiBjb250ZW50cyBiZSBlZGl0ZWQgaW4gcGxhY2UgYnkgdGhlIHVzZXIuXG4gKlxuICogV2UgYXJlIHVzaW5nIHRoZSB7QGxpbmsgbmcuc2VydmljZTokc2NlICRzY2V9IHNlcnZpY2UgaGVyZSBhbmQgaW5jbHVkZSB0aGUge0BsaW5rIG5nU2FuaXRpemUgJHNhbml0aXplfVxuICogbW9kdWxlIHRvIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIFwiYmFkXCIgY29udGVudCBsaWtlIGlubGluZSBldmVudCBsaXN0ZW5lciAoZS5nLiBgPHNwYW4gb25jbGljaz1cIi4uLlwiPmApLlxuICogSG93ZXZlciwgYXMgd2UgYXJlIHVzaW5nIGAkc2NlYCB0aGUgbW9kZWwgY2FuIHN0aWxsIGRlY2lkZSB0byBwcm92aWRlIHVuc2FmZSBjb250ZW50IGlmIGl0IG1hcmtzXG4gKiB0aGF0IGNvbnRlbnQgdXNpbmcgdGhlIGAkc2NlYCBzZXJ2aWNlLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJOZ01vZGVsQ29udHJvbGxlclwiIG1vZHVsZT1cImN1c3RvbUNvbnRyb2xcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxuICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgIFtjb250ZW50ZWRpdGFibGVdIHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICBtaW4taGVpZ2h0OiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAubmctaW52YWxpZCB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJlZDtcbiAgICAgIH1cblxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tQ29udHJvbCcsIFsnbmdTYW5pdGl6ZSddKS5cbiAgICAgICAgZGlyZWN0aXZlKCdjb250ZW50ZWRpdGFibGUnLCBbJyRzY2UnLCBmdW5jdGlvbigkc2NlKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsIC8vIG9ubHkgYWN0aXZhdGUgb24gZWxlbWVudCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsIC8vIGdldCBhIGhvbGQgb2YgTmdNb2RlbENvbnRyb2xsZXJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgICBpZiAoIW5nTW9kZWwpIHJldHVybjsgLy8gZG8gbm90aGluZyBpZiBubyBuZy1tb2RlbFxuXG4gICAgICAgICAgICAgIC8vIFNwZWNpZnkgaG93IFVJIHNob3VsZCBiZSB1cGRhdGVkXG4gICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbCgkc2NlLmdldFRydXN0ZWRIdG1sKG5nTW9kZWwuJHZpZXdWYWx1ZSB8fCAnJykpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgY2hhbmdlIGV2ZW50cyB0byBlbmFibGUgYmluZGluZ1xuICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdibHVyIGtleXVwIGNoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMocmVhZCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZWFkKCk7IC8vIGluaXRpYWxpemVcblxuICAgICAgICAgICAgICAvLyBXcml0ZSBkYXRhIHRvIHRoZSBtb2RlbFxuICAgICAgICAgICAgICBmdW5jdGlvbiByZWFkKCkge1xuICAgICAgICAgICAgICAgIHZhciBodG1sID0gZWxlbWVudC5odG1sKCk7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB3ZSBjbGVhciB0aGUgY29udGVudCBlZGl0YWJsZSB0aGUgYnJvd3NlciBsZWF2ZXMgYSA8YnI+IGJlaGluZFxuICAgICAgICAgICAgICAgIC8vIElmIHN0cmlwLWJyIGF0dHJpYnV0ZSBpcyBwcm92aWRlZCB0aGVuIHdlIHN0cmlwIHRoaXMgb3V0XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJzLnN0cmlwQnIgJiYgaHRtbCA9PT0gJzxicj4nKSB7XG4gICAgICAgICAgICAgICAgICBodG1sID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShodG1sKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAgICAgICA8ZGl2IGNvbnRlbnRlZGl0YWJsZVxuICAgICAgICAgICAgbmFtZT1cIm15V2lkZ2V0XCIgbmctbW9kZWw9XCJ1c2VyQ29udGVudFwiXG4gICAgICAgICAgICBzdHJpcC1icj1cInRydWVcIlxuICAgICAgICAgICAgcmVxdWlyZWQ+Q2hhbmdlIG1lITwvZGl2PlxuICAgICAgICA8c3BhbiBuZy1zaG93PVwibXlGb3JtLm15V2lkZ2V0LiRlcnJvci5yZXF1aXJlZFwiPlJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICA8aHI+XG4gICAgICAgPHRleHRhcmVhIG5nLW1vZGVsPVwidXNlckNvbnRlbnRcIiBhcmlhLWxhYmVsPVwiRHluYW1pYyB0ZXh0YXJlYVwiPjwvdGV4dGFyZWE+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICBpdCgnc2hvdWxkIGRhdGEtYmluZCBhbmQgYmVjb21lIGludmFsaWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChicm93c2VyLnBhcmFtcy5icm93c2VyID09PSAnc2FmYXJpJyB8fCBicm93c2VyLnBhcmFtcy5icm93c2VyID09PSAnZmlyZWZveCcpIHtcbiAgICAgICAgLy8gU2FmYXJpRHJpdmVyIGNhbid0IGhhbmRsZSBjb250ZW50ZWRpdGFibGVcbiAgICAgICAgLy8gYW5kIEZpcmVmb3ggZHJpdmVyIGNhbid0IGNsZWFyIGNvbnRlbnRlZGl0YWJsZXMgdmVyeSB3ZWxsXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBjb250ZW50RWRpdGFibGUgPSBlbGVtZW50KGJ5LmNzcygnW2NvbnRlbnRlZGl0YWJsZV0nKSk7XG4gICAgICB2YXIgY29udGVudCA9ICdDaGFuZ2UgbWUhJztcblxuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRUZXh0KCkpLnRvRXF1YWwoY29udGVudCk7XG5cbiAgICAgIGNvbnRlbnRFZGl0YWJsZS5jbGVhcigpO1xuICAgICAgY29udGVudEVkaXRhYmxlLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkJBQ0tfU1BBQ0UpO1xuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRUZXh0KCkpLnRvRXF1YWwoJycpO1xuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL25nLWludmFsaWQtcmVxdWlyZWQvKTtcbiAgICB9KTtcbiAgICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqL1xuTmdNb2RlbENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyRhdHRycycsICckZWxlbWVudCcsICckcGFyc2UnLCAnJGFuaW1hdGUnLCAnJHRpbWVvdXQnLCAnJHEnLCAnJGludGVycG9sYXRlJ107XG5mdW5jdGlvbiBOZ01vZGVsQ29udHJvbGxlcigkc2NvcGUsICRleGNlcHRpb25IYW5kbGVyLCAkYXR0ciwgJGVsZW1lbnQsICRwYXJzZSwgJGFuaW1hdGUsICR0aW1lb3V0LCAkcSwgJGludGVycG9sYXRlKSB7XG4gIHRoaXMuJHZpZXdWYWx1ZSA9IE51bWJlci5OYU47XG4gIHRoaXMuJG1vZGVsVmFsdWUgPSBOdW1iZXIuTmFOO1xuICB0aGlzLiQkcmF3TW9kZWxWYWx1ZSA9IHVuZGVmaW5lZDsgLy8gc3RvcmVzIHRoZSBwYXJzZWQgbW9kZWxWYWx1ZSAvIG1vZGVsIHNldCBmcm9tIHNjb3BlIHJlZ2FyZGxlc3Mgb2YgdmFsaWRpdHkuXG4gIHRoaXMuJHZhbGlkYXRvcnMgPSB7fTtcbiAgdGhpcy4kYXN5bmNWYWxpZGF0b3JzID0ge307XG4gIHRoaXMuJHBhcnNlcnMgPSBbXTtcbiAgdGhpcy4kZm9ybWF0dGVycyA9IFtdO1xuICB0aGlzLiR2aWV3Q2hhbmdlTGlzdGVuZXJzID0gW107XG4gIHRoaXMuJHVudG91Y2hlZCA9IHRydWU7XG4gIHRoaXMuJHRvdWNoZWQgPSBmYWxzZTtcbiAgdGhpcy4kcHJpc3RpbmUgPSB0cnVlO1xuICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xuICB0aGlzLiR2YWxpZCA9IHRydWU7XG4gIHRoaXMuJGludmFsaWQgPSBmYWxzZTtcbiAgdGhpcy4kZXJyb3IgPSB7fTsgLy8ga2VlcCBpbnZhbGlkIGtleXMgaGVyZVxuICB0aGlzLiQkc3VjY2VzcyA9IHt9OyAvLyBrZWVwIHZhbGlkIGtleXMgaGVyZVxuICB0aGlzLiRwZW5kaW5nID0gdW5kZWZpbmVkOyAvLyBrZWVwIHBlbmRpbmcga2V5cyBoZXJlXG4gIHRoaXMuJG5hbWUgPSAkaW50ZXJwb2xhdGUoJGF0dHIubmFtZSB8fCAnJywgZmFsc2UpKCRzY29wZSk7XG4gIHRoaXMuJCRwYXJlbnRGb3JtID0gbnVsbEZvcm1DdHJsO1xuICB0aGlzLiRvcHRpb25zID0gZGVmYXVsdE1vZGVsT3B0aW9ucztcbiAgdGhpcy4kJHVwZGF0ZUV2ZW50cyA9ICcnO1xuICAvLyBBdHRhY2ggdGhlIGNvcnJlY3QgY29udGV4dCB0byB0aGUgZXZlbnQgaGFuZGxlciBmdW5jdGlvbiBmb3IgdXBkYXRlT25cbiAgdGhpcy4kJHVwZGF0ZUV2ZW50SGFuZGxlciA9IHRoaXMuJCR1cGRhdGVFdmVudEhhbmRsZXIuYmluZCh0aGlzKTtcblxuICB0aGlzLiQkcGFyc2VkTmdNb2RlbCA9ICRwYXJzZSgkYXR0ci5uZ01vZGVsKTtcbiAgdGhpcy4kJHBhcnNlZE5nTW9kZWxBc3NpZ24gPSB0aGlzLiQkcGFyc2VkTmdNb2RlbC5hc3NpZ247XG4gIHRoaXMuJCRuZ01vZGVsR2V0ID0gdGhpcy4kJHBhcnNlZE5nTW9kZWw7XG4gIHRoaXMuJCRuZ01vZGVsU2V0ID0gdGhpcy4kJHBhcnNlZE5nTW9kZWxBc3NpZ247XG4gIHRoaXMuJCRwZW5kaW5nRGVib3VuY2UgPSBudWxsO1xuICB0aGlzLiQkcGFyc2VyVmFsaWQgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQgPSAwO1xuXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzE1ODMzXG4gIC8vIFByZXZlbnQgYCQkc2NvcGVgIGZyb20gYmVpbmcgaXRlcmF0ZWQgb3ZlciBieSBgY29weWAgd2hlbiBOZ01vZGVsQ29udHJvbGxlciBpcyBkZWVwIHdhdGNoZWRcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICckJHNjb3BlJywge3ZhbHVlOiAkc2NvcGV9KTtcbiAgdGhpcy4kJGF0dHIgPSAkYXR0cjtcbiAgdGhpcy4kJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgdGhpcy4kJGFuaW1hdGUgPSAkYW5pbWF0ZTtcbiAgdGhpcy4kJHRpbWVvdXQgPSAkdGltZW91dDtcbiAgdGhpcy4kJHBhcnNlID0gJHBhcnNlO1xuICB0aGlzLiQkcSA9ICRxO1xuICB0aGlzLiQkZXhjZXB0aW9uSGFuZGxlciA9ICRleGNlcHRpb25IYW5kbGVyO1xuXG4gIHNldHVwVmFsaWRpdHkodGhpcyk7XG4gIHNldHVwTW9kZWxXYXRjaGVyKHRoaXMpO1xufVxuXG5OZ01vZGVsQ29udHJvbGxlci5wcm90b3R5cGUgPSB7XG4gICQkaW5pdEdldHRlclNldHRlcnM6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLiRvcHRpb25zLmdldE9wdGlvbignZ2V0dGVyU2V0dGVyJykpIHtcbiAgICAgIHZhciBpbnZva2VNb2RlbEdldHRlciA9IHRoaXMuJCRwYXJzZSh0aGlzLiQkYXR0ci5uZ01vZGVsICsgJygpJyksXG4gICAgICAgICAgaW52b2tlTW9kZWxTZXR0ZXIgPSB0aGlzLiQkcGFyc2UodGhpcy4kJGF0dHIubmdNb2RlbCArICcoJCQkcCknKTtcblxuICAgICAgdGhpcy4kJG5nTW9kZWxHZXQgPSBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgdmFyIG1vZGVsVmFsdWUgPSB0aGlzLiQkcGFyc2VkTmdNb2RlbCgkc2NvcGUpO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihtb2RlbFZhbHVlKSkge1xuICAgICAgICAgIG1vZGVsVmFsdWUgPSBpbnZva2VNb2RlbEdldHRlcigkc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb2RlbFZhbHVlO1xuICAgICAgfTtcbiAgICAgIHRoaXMuJCRuZ01vZGVsU2V0ID0gZnVuY3Rpb24oJHNjb3BlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLiQkcGFyc2VkTmdNb2RlbCgkc2NvcGUpKSkge1xuICAgICAgICAgIGludm9rZU1vZGVsU2V0dGVyKCRzY29wZSwgeyQkJHA6IG5ld1ZhbHVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kJHBhcnNlZE5nTW9kZWxBc3NpZ24oJHNjb3BlLCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICghdGhpcy4kJHBhcnNlZE5nTW9kZWwuYXNzaWduKSB7XG4gICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdub25hc3NpZ24nLCAnRXhwcmVzc2lvbiBcXCd7MH1cXCcgaXMgbm9uLWFzc2lnbmFibGUuIEVsZW1lbnQ6IHsxfScsXG4gICAgICAgICAgdGhpcy4kJGF0dHIubmdNb2RlbCwgc3RhcnRpbmdUYWcodGhpcy4kJGVsZW1lbnQpKTtcbiAgICB9XG4gIH0sXG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyZW5kZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHVwZGF0ZWQuIEl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIHVzZXIgb2YgdGhlIG5nLW1vZGVsXG4gICAqIGRpcmVjdGl2ZSB3aWxsIGltcGxlbWVudCB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogVGhlIGAkcmVuZGVyKClgIG1ldGhvZCBpcyBpbnZva2VkIGluIHRoZSBmb2xsb3dpbmcgc2l0dWF0aW9uczpcbiAgICpcbiAgICogKiBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIGlzIGNhbGxlZC4gIElmIHdlIGFyZSByb2xsaW5nIGJhY2sgdGhlIHZpZXcgdmFsdWUgdG8gdGhlIGxhc3RcbiAgICogICBjb21taXR0ZWQgdmFsdWUgdGhlbiBgJHJlbmRlcigpYCBpcyBjYWxsZWQgdG8gdXBkYXRlIHRoZSBpbnB1dCBjb250cm9sLlxuICAgKiAqIFRoZSB2YWx1ZSByZWZlcmVuY2VkIGJ5IGBuZy1tb2RlbGAgaXMgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5IGFuZCBib3RoIHRoZSBgJG1vZGVsVmFsdWVgIGFuZFxuICAgKiAgIHRoZSBgJHZpZXdWYWx1ZWAgYXJlIGRpZmZlcmVudCBmcm9tIGxhc3QgdGltZS5cbiAgICpcbiAgICogU2luY2UgYG5nLW1vZGVsYCBkb2VzIG5vdCBkbyBhIGRlZXAgd2F0Y2gsIGAkcmVuZGVyKClgIGlzIG9ubHkgaW52b2tlZCBpZiB0aGUgdmFsdWVzIG9mXG4gICAqIGAkbW9kZWxWYWx1ZWAgYW5kIGAkdmlld1ZhbHVlYCBhcmUgYWN0dWFsbHkgZGlmZmVyZW50IGZyb20gdGhlaXIgcHJldmlvdXMgdmFsdWVzLiBJZiBgJG1vZGVsVmFsdWVgXG4gICAqIG9yIGAkdmlld1ZhbHVlYCBhcmUgb2JqZWN0cyAocmF0aGVyIHRoYW4gYSBzdHJpbmcgb3IgbnVtYmVyKSB0aGVuIGAkcmVuZGVyKClgIHdpbGwgbm90IGJlXG4gICAqIGludm9rZWQgaWYgeW91IG9ubHkgY2hhbmdlIGEgcHJvcGVydHkgb24gdGhlIG9iamVjdHMuXG4gICAqL1xuICAkcmVuZGVyOiBub29wLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGlzRW1wdHlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gd2UgbmVlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHZhbHVlIG9mIGFuIGlucHV0IGlzIGVtcHR5LlxuICAgKlxuICAgKiBGb3IgaW5zdGFuY2UsIHRoZSByZXF1aXJlZCBkaXJlY3RpdmUgZG9lcyB0aGlzIHRvIHdvcmsgb3V0IGlmIHRoZSBpbnB1dCBoYXMgZGF0YSBvciBub3QuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGAkaXNFbXB0eWAgZnVuY3Rpb24gY2hlY2tzIHdoZXRoZXIgdGhlIHZhbHVlIGlzIGB1bmRlZmluZWRgLCBgJydgLCBgbnVsbGAgb3IgYE5hTmAuXG4gICAqXG4gICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBmb3IgaW5wdXQgZGlyZWN0aXZlcyB3aG9zZSBjb25jZXB0IG9mIGJlaW5nIGVtcHR5IGlzIGRpZmZlcmVudCBmcm9tIHRoZVxuICAgKiBkZWZhdWx0LiBUaGUgYGNoZWNrYm94SW5wdXRUeXBlYCBkaXJlY3RpdmUgZG9lcyB0aGlzIGJlY2F1c2UgaW4gaXRzIGNhc2UgYSB2YWx1ZSBvZiBgZmFsc2VgXG4gICAqIGltcGxpZXMgZW1wdHkuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBpbnB1dCB0byBjaGVjayBmb3IgZW1wdGluZXNzLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIFwiZW1wdHlcIi5cbiAgICovXG4gICRpc0VtcHR5OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpIHx8IHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWU7XG4gIH0sXG5cbiAgJCR1cGRhdGVFbXB0eUNsYXNzZXM6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuJGlzRW1wdHkodmFsdWUpKSB7XG4gICAgICB0aGlzLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgTk9UX0VNUFRZX0NMQVNTKTtcbiAgICAgIHRoaXMuJCRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCBFTVBUWV9DTEFTUyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJCRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBFTVBUWV9DTEFTUyk7XG4gICAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgTk9UX0VNUFRZX0NMQVNTKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0UHJpc3RpbmVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGNvbnRyb2wgdG8gaXRzIHByaXN0aW5lIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLWRpcnR5YCBjbGFzcyBhbmQgc2V0IHRoZSBjb250cm9sIHRvIGl0cyBwcmlzdGluZVxuICAgKiBzdGF0ZSAoYG5nLXByaXN0aW5lYCBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSBwcmlzdGluZSB3aGVuIHRoZSBjb250cm9sXG4gICAqIGhhcyBub3QgYmVlbiBjaGFuZ2VkIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZC5cbiAgICovXG4gICRzZXRQcmlzdGluZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLiRwcmlzdGluZSA9IHRydWU7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldERpcnR5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyBkaXJ0eSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy1wcmlzdGluZWAgY2xhc3MgYW5kIHNldCB0aGUgY29udHJvbCB0byBpdHMgZGlydHlcbiAgICogc3RhdGUgKGBuZy1kaXJ0eWAgY2xhc3MpLiBBIG1vZGVsIGlzIGNvbnNpZGVyZWQgdG8gYmUgZGlydHkgd2hlbiB0aGUgY29udHJvbCBoYXMgYmVlbiBjaGFuZ2VkXG4gICAqIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZC5cbiAgICovXG4gICRzZXREaXJ0eTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZGlydHkgPSB0cnVlO1xuICAgIHRoaXMuJHByaXN0aW5lID0gZmFsc2U7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xuICAgIHRoaXMuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFVudG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdW50b3VjaGVkIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLXRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAoYG5nLXVudG91Y2hlZGAgY2xhc3MpLiBVcG9uIGNvbXBpbGF0aW9uLCBhIG1vZGVsIGlzIHNldCBhcyB1bnRvdWNoZWRcbiAgICogYnkgZGVmYXVsdCwgaG93ZXZlciB0aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHJlc3RvcmUgdGhhdCBzdGF0ZSBpZiB0aGUgbW9kZWwgaGFzXG4gICAqIGFscmVhZHkgYmVlbiB0b3VjaGVkIGJ5IHRoZSB1c2VyLlxuICAgKi9cbiAgJHNldFVudG91Y2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kdG91Y2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuJHVudG91Y2hlZCA9IHRydWU7XG4gICAgdGhpcy4kJGFuaW1hdGUuc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsIFVOVE9VQ0hFRF9DTEFTUywgVE9VQ0hFRF9DTEFTUyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy11bnRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXG4gICAqIHRvdWNoZWQgc3RhdGUgKGBuZy10b3VjaGVkYCBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSB0b3VjaGVkIHdoZW4gdGhlIHVzZXIgaGFzXG4gICAqIGZpcnN0IGZvY3VzZWQgdGhlIGNvbnRyb2wgZWxlbWVudCBhbmQgdGhlbiBzaGlmdGVkIGZvY3VzIGF3YXkgZnJvbSB0aGUgY29udHJvbCAoYmx1ciBldmVudCkuXG4gICAqL1xuICAkc2V0VG91Y2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kdG91Y2hlZCA9IHRydWU7XG4gICAgdGhpcy4kdW50b3VjaGVkID0gZmFsc2U7XG4gICAgdGhpcy4kJGFuaW1hdGUuc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsIFRPVUNIRURfQ0xBU1MsIFVOVE9VQ0hFRF9DTEFTUyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENhbmNlbCBhbiB1cGRhdGUgYW5kIHJlc2V0IHRoZSBpbnB1dCBlbGVtZW50J3MgdmFsdWUgdG8gcHJldmVudCBhbiB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAsXG4gICAqIHdoaWNoIG1heSBiZSBjYXVzZWQgYnkgYSBwZW5kaW5nIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBzb21lXG4gICAqIGZ1dHVyZSBldmVudC5cbiAgICpcbiAgICogSWYgeW91IGhhdmUgYW4gaW5wdXQgdGhhdCB1c2VzIGBuZy1tb2RlbC1vcHRpb25zYCB0byBzZXQgdXAgZGVib3VuY2VkIHVwZGF0ZXMgb3IgdXBkYXRlcyB0aGF0XG4gICAqIGRlcGVuZCBvbiBzcGVjaWFsIGV2ZW50cyBzdWNoIGFzIGBibHVyYCwgdGhlcmUgY2FuIGJlIGEgcGVyaW9kIHdoZW4gdGhlIGAkdmlld1ZhbHVlYCBpcyBvdXQgb2ZcbiAgICogc3luYyB3aXRoIHRoZSBuZ01vZGVsJ3MgYCRtb2RlbFZhbHVlYC5cbiAgICpcbiAgICogSW4gdGhpcyBjYXNlLCB5b3UgY2FuIHVzZSBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIHRvIG1hbnVhbGx5IGNhbmNlbCB0aGUgZGVib3VuY2VkIC8gZnV0dXJlIHVwZGF0ZVxuICAgKiBhbmQgcmVzZXQgdGhlIGlucHV0IHRvIHRoZSBsYXN0IGNvbW1pdHRlZCB2aWV3IHZhbHVlLlxuICAgKlxuICAgKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRoYXQgeW91IHJ1biBpbnRvIGRpZmZpY3VsdGllcyBpZiB5b3UgdHJ5IHRvIHVwZGF0ZSB0aGUgbmdNb2RlbCdzIGAkbW9kZWxWYWx1ZWBcbiAgICogcHJvZ3JhbW1hdGljYWxseSBiZWZvcmUgdGhlc2UgZGVib3VuY2VkL2Z1dHVyZSBldmVudHMgaGF2ZSByZXNvbHZlZC9vY2N1cnJlZCwgYmVjYXVzZSBBbmd1bGFySlMnc1xuICAgKiBkaXJ0eSBjaGVja2luZyBtZWNoYW5pc20gaXMgbm90IGFibGUgdG8gdGVsbCB3aGV0aGVyIHRoZSBtb2RlbCBoYXMgYWN0dWFsbHkgY2hhbmdlZCBvciBub3QuXG4gICAqXG4gICAqIFRoZSBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBwcm9ncmFtbWF0aWNhbGx5IGNoYW5naW5nIHRoZSBtb2RlbCBvZiBhblxuICAgKiBpbnB1dCB3aGljaCBtYXkgaGF2ZSBzdWNoIGV2ZW50cyBwZW5kaW5nLiBUaGlzIGlzIGltcG9ydGFudCBpbiBvcmRlciB0byBtYWtlIHN1cmUgdGhhdCB0aGVcbiAgICogaW5wdXQgZmllbGQgd2lsbCBiZSB1cGRhdGVkIHdpdGggdGhlIG5ldyBtb2RlbCB2YWx1ZSBhbmQgYW55IHBlbmRpbmcgb3BlcmF0aW9ucyBhcmUgY2FuY2VsbGVkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiA8ZXhhbXBsZSBuYW1lPVwibmctbW9kZWwtY2FuY2VsLXVwZGF0ZVwiIG1vZHVsZT1cImNhbmNlbC11cGRhdGUtZXhhbXBsZVwiPlxuICAgKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAgICogICAgIGFuZ3VsYXIubW9kdWxlKCdjYW5jZWwtdXBkYXRlLWV4YW1wbGUnLCBbXSlcbiAgICpcbiAgICogICAgIC5jb250cm9sbGVyKCdDYW5jZWxVcGRhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICogICAgICAgJHNjb3BlLm1vZGVsID0ge3ZhbHVlMTogJycsIHZhbHVlMjogJyd9O1xuICAgKlxuICAgKiAgICAgICAkc2NvcGUuc2V0RW1wdHkgPSBmdW5jdGlvbihlLCB2YWx1ZSwgcm9sbGJhY2spIHtcbiAgICogICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgKiAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgKiAgICAgICAgICAgaWYgKHJvbGxiYWNrKSB7XG4gICAqICAgICAgICAgICAgICRzY29wZS5teUZvcm1bdmFsdWVdLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xuICAgKiAgICAgICAgICAgfVxuICAgKiAgICAgICAgICAgJHNjb3BlLm1vZGVsW3ZhbHVlXSA9ICcnO1xuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfTtcbiAgICogICAgIH1dKTtcbiAgICogICA8L2ZpbGU+XG4gICAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkNhbmNlbFVwZGF0ZUNvbnRyb2xsZXJcIj5cbiAgICogICAgICAgPHA+Qm90aCBvZiB0aGVzZSBpbnB1dHMgYXJlIG9ubHkgdXBkYXRlZCBpZiB0aGV5IGFyZSBibHVycmVkLiBIaXR0aW5nIGVzY2FwZSBzaG91bGRcbiAgICogICAgICAgZW1wdHkgdGhlbS4gRm9sbG93IHRoZXNlIHN0ZXBzIGFuZCBvYnNlcnZlIHRoZSBkaWZmZXJlbmNlOjwvcD5cbiAgICogICAgICAgPG9sPlxuICAgKiAgICAgICAgIDxsaT5UeXBlIHNvbWV0aGluZyBpbiB0aGUgaW5wdXQuIFlvdSB3aWxsIHNlZSB0aGF0IHRoZSBtb2RlbCBpcyBub3QgeWV0IHVwZGF0ZWQ8L2xpPlxuICAgKiAgICAgICAgIDxsaT5QcmVzcyB0aGUgRXNjYXBlIGtleS5cbiAgICogICAgICAgICAgIDxvbD5cbiAgICogICAgICAgICAgICAgPGxpPiBJbiB0aGUgZmlyc3QgZXhhbXBsZSwgbm90aGluZyBoYXBwZW5zLCBiZWNhdXNlIHRoZSBtb2RlbCBpcyBhbHJlYWR5ICcnLCBhbmQgbm9cbiAgICogICAgICAgICAgICAgdXBkYXRlIGlzIGRldGVjdGVkLiBJZiB5b3UgYmx1ciB0aGUgaW5wdXQsIHRoZSBtb2RlbCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCB2aWV3LlxuICAgKiAgICAgICAgICAgICA8L2xpPlxuICAgKiAgICAgICAgICAgICA8bGk+IEluIHRoZSBzZWNvbmQgZXhhbXBsZSwgdGhlIHBlbmRpbmcgdXBkYXRlIGlzIGNhbmNlbGxlZCwgYW5kIHRoZSBpbnB1dCBpcyBzZXQgYmFja1xuICAgKiAgICAgICAgICAgICB0byB0aGUgbGFzdCBjb21taXR0ZWQgdmlldyB2YWx1ZSAoJycpLiBCbHVycmluZyB0aGUgaW5wdXQgZG9lcyBub3RoaW5nLlxuICAgKiAgICAgICAgICAgICA8L2xpPlxuICAgKiAgICAgICAgICAgPC9vbD5cbiAgICogICAgICAgICA8L2xpPlxuICAgKiAgICAgICA8L29sPlxuICAgKlxuICAgKiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJyB9XCI+XG4gICAqICAgICAgICAgPGRpdj5cbiAgICogICAgICAgICAgIDxwIGlkPVwiaW5wdXREZXNjcmlwdGlvbjFcIj5XaXRob3V0ICRyb2xsYmFja1ZpZXdWYWx1ZSgpOjwvcD5cbiAgICogICAgICAgICAgIDxpbnB1dCBuYW1lPVwidmFsdWUxXCIgYXJpYS1kZXNjcmliZWRieT1cImlucHV0RGVzY3JpcHRpb24xXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZTFcIlxuICAgKiAgICAgICAgICAgICAgICAgIG5nLWtleWRvd249XCJzZXRFbXB0eSgkZXZlbnQsICd2YWx1ZTEnKVwiPlxuICAgKiAgICAgICAgICAgdmFsdWUxOiBcInt7IG1vZGVsLnZhbHVlMSB9fVwiXG4gICAqICAgICAgICAgPC9kaXY+XG4gICAqXG4gICAqICAgICAgICAgPGRpdj5cbiAgICogICAgICAgICAgIDxwIGlkPVwiaW5wdXREZXNjcmlwdGlvbjJcIj5XaXRoICRyb2xsYmFja1ZpZXdWYWx1ZSgpOjwvcD5cbiAgICogICAgICAgICAgIDxpbnB1dCBuYW1lPVwidmFsdWUyXCIgYXJpYS1kZXNjcmliZWRieT1cImlucHV0RGVzY3JpcHRpb24yXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZTJcIlxuICAgKiAgICAgICAgICAgICAgICAgIG5nLWtleWRvd249XCJzZXRFbXB0eSgkZXZlbnQsICd2YWx1ZTInLCB0cnVlKVwiPlxuICAgKiAgICAgICAgICAgdmFsdWUyOiBcInt7IG1vZGVsLnZhbHVlMiB9fVwiXG4gICAqICAgICAgICAgPC9kaXY+XG4gICAqICAgICAgIDwvZm9ybT5cbiAgICogICAgIDwvZGl2PlxuICAgKiAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgICAgZGl2IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpdjpudGgtY2hpbGQoMSkge1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMzBweDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgPC9maWxlPlxuICAgKiA8L2V4YW1wbGU+XG4gICAqL1xuICAkcm9sbGJhY2tWaWV3VmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcbiAgICB0aGlzLiR2aWV3VmFsdWUgPSB0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtcbiAgICB0aGlzLiRyZW5kZXIoKTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUnVucyBlYWNoIG9mIHRoZSByZWdpc3RlcmVkIHZhbGlkYXRvcnMgKGZpcnN0IHN5bmNocm9ub3VzIHZhbGlkYXRvcnMgYW5kIHRoZW5cbiAgICogYXN5bmNocm9ub3VzIHZhbGlkYXRvcnMpLlxuICAgKiBJZiB0aGUgdmFsaWRpdHkgY2hhbmdlcyB0byBpbnZhbGlkLCB0aGUgbW9kZWwgd2lsbCBiZSBzZXQgdG8gYHVuZGVmaW5lZGAsXG4gICAqIHVubGVzcyB7QGxpbmsgbmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zLmFsbG93SW52YWxpZGB9IGlzIGB0cnVlYC5cbiAgICogSWYgdGhlIHZhbGlkaXR5IGNoYW5nZXMgdG8gdmFsaWQsIGl0IHdpbGwgc2V0IHRoZSBtb2RlbCB0byB0aGUgbGFzdCBhdmFpbGFibGUgdmFsaWRcbiAgICogYCRtb2RlbFZhbHVlYCwgaS5lLiBlaXRoZXIgdGhlIGxhc3QgcGFyc2VkIHZhbHVlIG9yIHRoZSBsYXN0IHZhbHVlIHNldCBmcm9tIHRoZSBzY29wZS5cbiAgICovXG4gICR2YWxpZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gaWdub3JlICR2YWxpZGF0ZSBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4odGhpcy4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmlld1ZhbHVlID0gdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7XG4gICAgLy8gTm90ZTogd2UgdXNlIHRoZSAkJHJhd01vZGVsVmFsdWUgYXMgJG1vZGVsVmFsdWUgbWlnaHQgaGF2ZSBiZWVuXG4gICAgLy8gc2V0IHRvIHVuZGVmaW5lZCBkdXJpbmcgYSB2aWV3IC0+IG1vZGVsIHVwZGF0ZSB0aGF0IGZvdW5kIHZhbGlkYXRpb25cbiAgICAvLyBlcnJvcnMuIFdlIGNhbid0IHBhcnNlIHRoZSB2aWV3IGhlcmUsIHNpbmNlIHRoYXQgY291bGQgY2hhbmdlXG4gICAgLy8gdGhlIG1vZGVsIGFsdGhvdWdoIG5laXRoZXIgdmlld1ZhbHVlIG5vciB0aGUgbW9kZWwgb24gdGhlIHNjb3BlIGNoYW5nZWRcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IHRoaXMuJCRyYXdNb2RlbFZhbHVlO1xuXG4gICAgdmFyIHByZXZWYWxpZCA9IHRoaXMuJHZhbGlkO1xuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IHRoaXMuJG1vZGVsVmFsdWU7XG5cbiAgICB2YXIgYWxsb3dJbnZhbGlkID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ2FsbG93SW52YWxpZCcpO1xuXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuJCRydW5WYWxpZGF0b3JzKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgZnVuY3Rpb24oYWxsVmFsaWQpIHtcbiAgICAgIC8vIElmIHRoZXJlIHdhcyBubyBjaGFuZ2UgaW4gdmFsaWRpdHksIGRvbid0IHVwZGF0ZSB0aGUgbW9kZWxcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgY2hhbmdpbmcgYW4gaW52YWxpZCBtb2RlbFZhbHVlIHRvIHVuZGVmaW5lZFxuICAgICAgaWYgKCFhbGxvd0ludmFsaWQgJiYgcHJldlZhbGlkICE9PSBhbGxWYWxpZCkge1xuICAgICAgICAvLyBOb3RlOiBEb24ndCBjaGVjayB0aGlzLiR2YWxpZCBoZXJlLCBhcyB3ZSBjb3VsZCBoYXZlXG4gICAgICAgIC8vIGV4dGVybmFsIHZhbGlkYXRvcnMgKGUuZy4gY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyKSxcbiAgICAgICAgLy8gdGhhdCBqdXN0IGNhbGwgJHNldFZhbGlkaXR5IGFuZCBuZWVkIHRoZSBtb2RlbCB2YWx1ZVxuICAgICAgICAvLyB0byBjYWxjdWxhdGUgdGhlaXIgdmFsaWRpdHkuXG4gICAgICAgIHRoYXQuJG1vZGVsVmFsdWUgPSBhbGxWYWxpZCA/IG1vZGVsVmFsdWUgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoYXQuJG1vZGVsVmFsdWUgIT09IHByZXZNb2RlbFZhbHVlKSB7XG4gICAgICAgICAgdGhhdC4kJHdyaXRlTW9kZWxUb1Njb3BlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAkJHJ1blZhbGlkYXRvcnM6IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgZG9uZUNhbGxiYWNrKSB7XG4gICAgdGhpcy4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQrKztcbiAgICB2YXIgbG9jYWxWYWxpZGF0aW9uUnVuSWQgPSB0aGlzLiQkY3VycmVudFZhbGlkYXRpb25SdW5JZDtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAvLyBjaGVjayBwYXJzZXIgZXJyb3JcbiAgICBpZiAoIXByb2Nlc3NQYXJzZUVycm9ycygpKSB7XG4gICAgICB2YWxpZGF0aW9uRG9uZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcHJvY2Vzc1N5bmNWYWxpZGF0b3JzKCkpIHtcbiAgICAgIHZhbGlkYXRpb25Eb25lKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJvY2Vzc0FzeW5jVmFsaWRhdG9ycygpO1xuXG4gICAgZnVuY3Rpb24gcHJvY2Vzc1BhcnNlRXJyb3JzKCkge1xuICAgICAgdmFyIGVycm9yS2V5ID0gdGhhdC4kJHBhcnNlck5hbWUgfHwgJ3BhcnNlJztcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh0aGF0LiQkcGFyc2VyVmFsaWQpKSB7XG4gICAgICAgIHNldFZhbGlkaXR5KGVycm9yS2V5LCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhhdC4kJHBhcnNlclZhbGlkKSB7XG4gICAgICAgICAgZm9yRWFjaCh0aGF0LiR2YWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XG4gICAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3JFYWNoKHRoYXQuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odiwgbmFtZSkge1xuICAgICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgbnVsbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHRoZSBwYXJzZSBlcnJvciBsYXN0LCB0byBwcmV2ZW50IHVuc2V0dGluZyBpdCwgc2hvdWxkIGEgJHZhbGlkYXRvcnMga2V5ID09IHBhcnNlck5hbWVcbiAgICAgICAgc2V0VmFsaWRpdHkoZXJyb3JLZXksIHRoYXQuJCRwYXJzZXJWYWxpZCk7XG4gICAgICAgIHJldHVybiB0aGF0LiQkcGFyc2VyVmFsaWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzU3luY1ZhbGlkYXRvcnMoKSB7XG4gICAgICB2YXIgc3luY1ZhbGlkYXRvcnNWYWxpZCA9IHRydWU7XG4gICAgICBmb3JFYWNoKHRoYXQuJHZhbGlkYXRvcnMsIGZ1bmN0aW9uKHZhbGlkYXRvciwgbmFtZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gQm9vbGVhbih2YWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSk7XG4gICAgICAgIHN5bmNWYWxpZGF0b3JzVmFsaWQgPSBzeW5jVmFsaWRhdG9yc1ZhbGlkICYmIHJlc3VsdDtcbiAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFzeW5jVmFsaWRhdG9yc1ZhbGlkKSB7XG4gICAgICAgIGZvckVhY2godGhhdC4kYXN5bmNWYWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgbnVsbCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzQXN5bmNWYWxpZGF0b3JzKCkge1xuICAgICAgdmFyIHZhbGlkYXRvclByb21pc2VzID0gW107XG4gICAgICB2YXIgYWxsVmFsaWQgPSB0cnVlO1xuICAgICAgZm9yRWFjaCh0aGF0LiRhc3luY1ZhbGlkYXRvcnMsIGZ1bmN0aW9uKHZhbGlkYXRvciwgbmFtZSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpO1xuICAgICAgICBpZiAoIWlzUHJvbWlzZUxpa2UocHJvbWlzZSkpIHtcbiAgICAgICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdub3Byb21pc2UnLFxuICAgICAgICAgICAgJ0V4cGVjdGVkIGFzeW5jaHJvbm91cyB2YWxpZGF0b3IgdG8gcmV0dXJuIGEgcHJvbWlzZSBidXQgZ290IFxcJ3swfVxcJyBpbnN0ZWFkLicsIHByb21pc2UpO1xuICAgICAgICB9XG4gICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIHVuZGVmaW5lZCk7XG4gICAgICAgIHZhbGlkYXRvclByb21pc2VzLnB1c2gocHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIHRydWUpO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBhbGxWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIGZhbHNlKTtcbiAgICAgICAgfSkpO1xuICAgICAgfSk7XG4gICAgICBpZiAoIXZhbGlkYXRvclByb21pc2VzLmxlbmd0aCkge1xuICAgICAgICB2YWxpZGF0aW9uRG9uZSh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoYXQuJCRxLmFsbCh2YWxpZGF0b3JQcm9taXNlcykudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YWxpZGF0aW9uRG9uZShhbGxWYWxpZCk7XG4gICAgICAgIH0sIG5vb3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFZhbGlkaXR5KG5hbWUsIGlzVmFsaWQpIHtcbiAgICAgIGlmIChsb2NhbFZhbGlkYXRpb25SdW5JZCA9PT0gdGhhdC4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQpIHtcbiAgICAgICAgdGhhdC4kc2V0VmFsaWRpdHkobmFtZSwgaXNWYWxpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsaWRhdGlvbkRvbmUoYWxsVmFsaWQpIHtcbiAgICAgIGlmIChsb2NhbFZhbGlkYXRpb25SdW5JZCA9PT0gdGhhdC4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQpIHtcblxuICAgICAgICBkb25lQ2FsbGJhY2soYWxsVmFsaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRjb21taXRWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENvbW1pdCBhIHBlbmRpbmcgdXBkYXRlIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxuICAgKlxuICAgKiBVcGRhdGVzIG1heSBiZSBwZW5kaW5nIGJ5IGEgZGVib3VuY2VkIGV2ZW50IG9yIGJlY2F1c2UgdGhlIGlucHV0IGlzIHdhaXRpbmcgZm9yIGEgc29tZSBmdXR1cmVcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIHRoaXMgbWV0aG9kIGlzIHJhcmVseSBuZWVkZWQgYXMgYE5nTW9kZWxDb250cm9sbGVyYFxuICAgKiB1c3VhbGx5IGhhbmRsZXMgY2FsbGluZyB0aGlzIGluIHJlc3BvbnNlIHRvIGlucHV0IGV2ZW50cy5cbiAgICovXG4gICRjb21taXRWaWV3VmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2aWV3VmFsdWUgPSB0aGlzLiR2aWV3VmFsdWU7XG5cbiAgICB0aGlzLiQkdGltZW91dC5jYW5jZWwodGhpcy4kJHBlbmRpbmdEZWJvdW5jZSk7XG5cbiAgICAvLyBJZiB0aGUgdmlldyB2YWx1ZSBoYXMgbm90IGNoYW5nZWQgdGhlbiB3ZSBzaG91bGQganVzdCBleGl0LCBleGNlcHQgaW4gdGhlIGNhc2Ugd2hlcmUgdGhlcmUgaXNcbiAgICAvLyBhIG5hdGl2ZSB2YWxpZGF0b3Igb24gdGhlIGVsZW1lbnQuIEluIHRoaXMgY2FzZSB0aGUgdmFsaWRhdGlvbiBzdGF0ZSBtYXkgaGF2ZSBjaGFuZ2VkIGV2ZW4gdGhvdWdoXG4gICAgLy8gdGhlIHZpZXdWYWx1ZSBoYXMgc3RheWVkIGVtcHR5LlxuICAgIGlmICh0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSA9PT0gdmlld1ZhbHVlICYmICh2aWV3VmFsdWUgIT09ICcnIHx8ICF0aGlzLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4kJHVwZGF0ZUVtcHR5Q2xhc3Nlcyh2aWV3VmFsdWUpO1xuICAgIHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID0gdmlld1ZhbHVlO1xuXG4gICAgLy8gY2hhbmdlIHRvIGRpcnR5XG4gICAgaWYgKHRoaXMuJHByaXN0aW5lKSB7XG4gICAgICB0aGlzLiRzZXREaXJ0eSgpO1xuICAgIH1cbiAgICB0aGlzLiQkcGFyc2VBbmRWYWxpZGF0ZSgpO1xuICB9LFxuXG4gICQkcGFyc2VBbmRWYWxpZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXdWYWx1ZSA9IHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlO1xuICAgIHZhciBtb2RlbFZhbHVlID0gdmlld1ZhbHVlO1xuICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgIHRoaXMuJCRwYXJzZXJWYWxpZCA9IGlzVW5kZWZpbmVkKG1vZGVsVmFsdWUpID8gdW5kZWZpbmVkIDogdHJ1ZTtcblxuICAgIGlmICh0aGlzLiQkcGFyc2VyVmFsaWQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kcGFyc2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb2RlbFZhbHVlID0gdGhpcy4kcGFyc2Vyc1tpXShtb2RlbFZhbHVlKTtcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKG1vZGVsVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy4kJHBhcnNlclZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzTnVtYmVyTmFOKHRoaXMuJG1vZGVsVmFsdWUpKSB7XG4gICAgICAvLyB0aGlzLiRtb2RlbFZhbHVlIGhhcyBub3QgYmVlbiB0b3VjaGVkIHlldC4uLlxuICAgICAgdGhpcy4kbW9kZWxWYWx1ZSA9IHRoaXMuJCRuZ01vZGVsR2V0KHRoaXMuJCRzY29wZSk7XG4gICAgfVxuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IHRoaXMuJG1vZGVsVmFsdWU7XG4gICAgdmFyIGFsbG93SW52YWxpZCA9IHRoaXMuJG9wdGlvbnMuZ2V0T3B0aW9uKCdhbGxvd0ludmFsaWQnKTtcbiAgICB0aGlzLiQkcmF3TW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XG5cbiAgICBpZiAoYWxsb3dJbnZhbGlkKSB7XG4gICAgICB0aGlzLiRtb2RlbFZhbHVlID0gbW9kZWxWYWx1ZTtcbiAgICAgIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCk7XG4gICAgfVxuXG4gICAgLy8gUGFzcyB0aGUgJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlIGhlcmUsIGJlY2F1c2UgdGhlIGNhY2hlZCB2aWV3VmFsdWUgbWlnaHQgYmUgb3V0IG9mIGRhdGUuXG4gICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIGUuZy4gJHNldFZpZXdWYWx1ZSBpcyBjYWxsZWQgZnJvbSBpbnNpZGUgYSBwYXJzZXJcbiAgICB0aGlzLiQkcnVuVmFsaWRhdG9ycyhtb2RlbFZhbHVlLCB0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSwgZnVuY3Rpb24oYWxsVmFsaWQpIHtcbiAgICAgIGlmICghYWxsb3dJbnZhbGlkKSB7XG4gICAgICAgIC8vIE5vdGU6IERvbid0IGNoZWNrIHRoaXMuJHZhbGlkIGhlcmUsIGFzIHdlIGNvdWxkIGhhdmVcbiAgICAgICAgLy8gZXh0ZXJuYWwgdmFsaWRhdG9ycyAoZS5nLiBjYWxjdWxhdGVkIG9uIHRoZSBzZXJ2ZXIpLFxuICAgICAgICAvLyB0aGF0IGp1c3QgY2FsbCAkc2V0VmFsaWRpdHkgYW5kIG5lZWQgdGhlIG1vZGVsIHZhbHVlXG4gICAgICAgIC8vIHRvIGNhbGN1bGF0ZSB0aGVpciB2YWxpZGl0eS5cbiAgICAgICAgdGhhdC4kbW9kZWxWYWx1ZSA9IGFsbFZhbGlkID8gbW9kZWxWYWx1ZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgd3JpdGVUb01vZGVsSWZOZWVkZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCkge1xuICAgICAgaWYgKHRoYXQuJG1vZGVsVmFsdWUgIT09IHByZXZNb2RlbFZhbHVlKSB7XG4gICAgICAgIHRoYXQuJCR3cml0ZU1vZGVsVG9TY29wZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAkJHdyaXRlTW9kZWxUb1Njb3BlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkbmdNb2RlbFNldCh0aGlzLiQkc2NvcGUsIHRoaXMuJG1vZGVsVmFsdWUpO1xuICAgIGZvckVhY2godGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgICAgICAgdGhpcy4kJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0Vmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBVcGRhdGUgdGhlIHZpZXcgdmFsdWUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhIGNvbnRyb2wgd2FudHMgdG8gY2hhbmdlIHRoZSB2aWV3IHZhbHVlOyB0eXBpY2FsbHksXG4gICAqIHRoaXMgaXMgZG9uZSBmcm9tIHdpdGhpbiBhIERPTSBldmVudCBoYW5kbGVyLiBGb3IgZXhhbXBsZSwgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXR9XG4gICAqIGRpcmVjdGl2ZSBjYWxscyBpdCB3aGVuIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgY2hhbmdlcyBhbmQge0BsaW5rIG5nLmRpcmVjdGl2ZTpzZWxlY3Qgc2VsZWN0fVxuICAgKiBjYWxscyBpdCB3aGVuIGFuIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAgICpcbiAgICogV2hlbiBgJHNldFZpZXdWYWx1ZWAgaXMgY2FsbGVkLCB0aGUgbmV3IGB2YWx1ZWAgd2lsbCBiZSBzdGFnZWQgZm9yIGNvbW1pdHRpbmcgdGhyb3VnaCB0aGUgYCRwYXJzZXJzYFxuICAgKiBhbmQgYCR2YWxpZGF0b3JzYCBwaXBlbGluZXMuIElmIHRoZXJlIGFyZSBubyBzcGVjaWFsIHtAbGluayBuZ01vZGVsT3B0aW9uc30gc3BlY2lmaWVkIHRoZW4gdGhlIHN0YWdlZFxuICAgKiB2YWx1ZSBpcyBzZW50IGRpcmVjdGx5IGZvciBwcm9jZXNzaW5nIHRocm91Z2ggdGhlIGAkcGFyc2Vyc2AgcGlwZWxpbmUuIEFmdGVyIHRoaXMsIHRoZSBgJHZhbGlkYXRvcnNgIGFuZFxuICAgKiBgJGFzeW5jVmFsaWRhdG9yc2AgYXJlIGNhbGxlZCBhbmQgdGhlIHZhbHVlIGlzIGFwcGxpZWQgdG8gYCRtb2RlbFZhbHVlYC5cbiAgICogRmluYWxseSwgdGhlIHZhbHVlIGlzIHNldCB0byB0aGUgKipleHByZXNzaW9uKiogc3BlY2lmaWVkIGluIHRoZSBgbmctbW9kZWxgIGF0dHJpYnV0ZSBhbmRcbiAgICogYWxsIHRoZSByZWdpc3RlcmVkIGNoYW5nZSBsaXN0ZW5lcnMsIGluIHRoZSBgJHZpZXdDaGFuZ2VMaXN0ZW5lcnNgIGxpc3QgYXJlIGNhbGxlZC5cbiAgICpcbiAgICogSW4gY2FzZSB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30gZGlyZWN0aXZlIGlzIHVzZWQgd2l0aCBgdXBkYXRlT25gXG4gICAqIGFuZCB0aGUgYGRlZmF1bHRgIHRyaWdnZXIgaXMgbm90IGxpc3RlZCwgYWxsIHRob3NlIGFjdGlvbnMgd2lsbCByZW1haW4gcGVuZGluZyB1bnRpbCBvbmUgb2YgdGhlXG4gICAqIGB1cGRhdGVPbmAgZXZlbnRzIGlzIHRyaWdnZXJlZCBvbiB0aGUgRE9NIGVsZW1lbnQuXG4gICAqIEFsbCB0aGVzZSBhY3Rpb25zIHdpbGwgYmUgZGVib3VuY2VkIGlmIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfVxuICAgKiBkaXJlY3RpdmUgaXMgdXNlZCB3aXRoIGEgY3VzdG9tIGRlYm91bmNlIGZvciB0aGlzIHBhcnRpY3VsYXIgZXZlbnQuXG4gICAqIE5vdGUgdGhhdCBhIGAkZGlnZXN0YCBpcyBvbmx5IHRyaWdnZXJlZCBvbmNlIHRoZSBgdXBkYXRlT25gIGV2ZW50cyBhcmUgZmlyZWQsIG9yIGlmIGBkZWJvdW5jZWBcbiAgICogaXMgc3BlY2lmaWVkLCBvbmNlIHRoZSB0aW1lciBydW5zIG91dC5cbiAgICpcbiAgICogV2hlbiB1c2VkIHdpdGggc3RhbmRhcmQgaW5wdXRzLCB0aGUgdmlldyB2YWx1ZSB3aWxsIGFsd2F5cyBiZSBhIHN0cmluZyAod2hpY2ggaXMgaW4gc29tZSBjYXNlc1xuICAgKiBwYXJzZWQgaW50byBhbm90aGVyIHR5cGUsIHN1Y2ggYXMgYSBgRGF0ZWAgb2JqZWN0IGZvciBgaW5wdXRbZGF0ZV1gLilcbiAgICogSG93ZXZlciwgY3VzdG9tIGNvbnRyb2xzIG1pZ2h0IGFsc28gcGFzcyBvYmplY3RzIHRvIHRoaXMgbWV0aG9kLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBtYWtlXG4gICAqIGEgY29weSBvZiB0aGUgb2JqZWN0IGJlZm9yZSBwYXNzaW5nIGl0IHRvIGAkc2V0Vmlld1ZhbHVlYC4gVGhpcyBpcyBiZWNhdXNlIGBuZ01vZGVsYCBkb2VzIG5vdFxuICAgKiBwZXJmb3JtIGEgZGVlcCB3YXRjaCBvZiBvYmplY3RzLCBpdCBvbmx5IGxvb2tzIGZvciBhIGNoYW5nZSBvZiBpZGVudGl0eS4gSWYgeW91IG9ubHkgY2hhbmdlXG4gICAqIHRoZSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0IHRoZW4gbmdNb2RlbCB3aWxsIG5vdCByZWFsaXplIHRoYXQgdGhlIG9iamVjdCBoYXMgY2hhbmdlZCBhbmRcbiAgICogd2lsbCBub3QgaW52b2tlIHRoZSBgJHBhcnNlcnNgIGFuZCBgJHZhbGlkYXRvcnNgIHBpcGVsaW5lcy4gRm9yIHRoaXMgcmVhc29uLCB5b3Ugc2hvdWxkXG4gICAqIG5vdCBjaGFuZ2UgcHJvcGVydGllcyBvZiB0aGUgY29weSBvbmNlIGl0IGhhcyBiZWVuIHBhc3NlZCB0byBgJHNldFZpZXdWYWx1ZWAuXG4gICAqIE90aGVyd2lzZSB5b3UgbWF5IGNhdXNlIHRoZSBtb2RlbCB2YWx1ZSBvbiB0aGUgc2NvcGUgdG8gY2hhbmdlIGluY29ycmVjdGx5LlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICAgKiBJbiBhbnkgY2FzZSwgdGhlIHZhbHVlIHBhc3NlZCB0byB0aGUgbWV0aG9kIHNob3VsZCBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCB2YWx1ZVxuICAgKiBvZiB0aGUgY29udHJvbC4gRm9yIGV4YW1wbGUsIGlmIHlvdSBhcmUgY2FsbGluZyBgJHNldFZpZXdWYWx1ZWAgZm9yIGFuIGlucHV0IGVsZW1lbnQsXG4gICAqIHlvdSBzaG91bGQgcGFzcyB0aGUgaW5wdXQgRE9NIHZhbHVlLiBPdGhlcndpc2UsIHRoZSBjb250cm9sIGFuZCB0aGUgc2NvcGUgbW9kZWwgYmVjb21lXG4gICAqIG91dCBvZiBzeW5jLiBJdCdzIGFsc28gaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBgJHNldFZpZXdWYWx1ZWAgZG9lcyBub3QgY2FsbCBgJHJlbmRlcmAgb3IgY2hhbmdlXG4gICAqIHRoZSBjb250cm9sJ3MgRE9NIHZhbHVlIGluIGFueSB3YXkuIElmIHdlIHdhbnQgdG8gY2hhbmdlIHRoZSBjb250cm9sJ3MgRE9NIHZhbHVlXG4gICAqIHByb2dyYW1tYXRpY2FsbHksIHdlIHNob3VsZCB1cGRhdGUgdGhlIGBuZ01vZGVsYCBzY29wZSBleHByZXNzaW9uLiBJdHMgbmV3IHZhbHVlIHdpbGwgYmVcbiAgICogcGlja2VkIHVwIGJ5IHRoZSBtb2RlbCBjb250cm9sbGVyLCB3aGljaCB3aWxsIHJ1biBpdCB0aHJvdWdoIHRoZSBgJGZvcm1hdHRlcnNgLCBgJHJlbmRlcmAgaXRcbiAgICogdG8gdXBkYXRlIHRoZSBET00sIGFuZCBmaW5hbGx5IGNhbGwgYCR2YWxpZGF0ZWAgb24gaXQuXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIHZhbHVlIGZyb20gdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmlnZ2VyIEV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoZSB1cGRhdGUuXG4gICAqL1xuICAkc2V0Vmlld1ZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgdHJpZ2dlcikge1xuICAgIHRoaXMuJHZpZXdWYWx1ZSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLiRvcHRpb25zLmdldE9wdGlvbigndXBkYXRlT25EZWZhdWx0JykpIHtcbiAgICAgIHRoaXMuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCh0cmlnZ2VyKTtcbiAgICB9XG4gIH0sXG5cbiAgJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdDogZnVuY3Rpb24odHJpZ2dlcikge1xuICAgIHZhciBkZWJvdW5jZURlbGF5ID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ2RlYm91bmNlJyk7XG5cbiAgICBpZiAoaXNOdW1iZXIoZGVib3VuY2VEZWxheVt0cmlnZ2VyXSkpIHtcbiAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZURlbGF5W3RyaWdnZXJdO1xuICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoZGVib3VuY2VEZWxheVsnZGVmYXVsdCddKSkge1xuICAgICAgZGVib3VuY2VEZWxheSA9IGRlYm91bmNlRGVsYXlbJ2RlZmF1bHQnXTtcbiAgICB9XG5cbiAgICB0aGlzLiQkdGltZW91dC5jYW5jZWwodGhpcy4kJHBlbmRpbmdEZWJvdW5jZSk7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIGlmIChkZWJvdW5jZURlbGF5ID4gMCkgeyAvLyB0aGlzIGZhaWxzIGlmIGRlYm91bmNlRGVsYXkgaXMgYW4gb2JqZWN0XG4gICAgICB0aGlzLiQkcGVuZGluZ0RlYm91bmNlID0gdGhpcy4kJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgfSwgZGVib3VuY2VEZWxheSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLiQkc2NvcGUuJHJvb3QuJCRwaGFzZSkge1xuICAgICAgdGhpcy4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJCRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJG92ZXJyaWRlTW9kZWxPcHRpb25zXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBPdmVycmlkZSB0aGUgY3VycmVudCBtb2RlbCBvcHRpb25zIHNldHRpbmdzIHByb2dyYW1tYXRpY2FsbHkuXG4gICAqXG4gICAqIFRoZSBwcmV2aW91cyBgTW9kZWxPcHRpb25zYCB2YWx1ZSB3aWxsIG5vdCBiZSBtb2RpZmllZC4gSW5zdGVhZCwgYVxuICAgKiBuZXcgYE1vZGVsT3B0aW9uc2Agb2JqZWN0IHdpbGwgaW5oZXJpdCBmcm9tIHRoZSBwcmV2aW91cyBvbmUgb3ZlcnJpZGluZ1xuICAgKiBvciBpbmhlcml0aW5nIHNldHRpbmdzIHRoYXQgYXJlIGRlZmluZWQgaW4gdGhlIGdpdmVuIHBhcmFtZXRlci5cbiAgICpcbiAgICogU2VlIHtAbGluayBuZ01vZGVsT3B0aW9uc30gZm9yIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgb3B0aW9ucyBjYW4gYmUgc3BlY2lmaWVkXG4gICAqIGFuZCBob3cgbW9kZWwgb3B0aW9uIGluaGVyaXRhbmNlIHdvcmtzLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAqKk5vdGU6KiogdGhpcyBmdW5jdGlvbiBvbmx5IGFmZmVjdHMgdGhlIG9wdGlvbnMgc2V0IG9uIHRoZSBgbmdNb2RlbENvbnRyb2xsZXJgLFxuICAgKiBhbmQgbm90IHRoZSBvcHRpb25zIG9uIHRoZSB7QGxpbmsgbmdNb2RlbE9wdGlvbnN9IGRpcmVjdGl2ZSBmcm9tIHdoaWNoIHRoZXkgbWlnaHQgaGF2ZSBiZWVuXG4gICAqIG9idGFpbmVkIGluaXRpYWxseS5cbiAgICogPC9kaXY+XG4gICAqXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAgICogKipOb3RlOioqIGl0IGlzIG5vdCBwb3NzaWJsZSB0byBvdmVycmlkZSB0aGUgYGdldHRlclNldHRlcmAgb3B0aW9uLlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgYSBoYXNoIG9mIHNldHRpbmdzIHRvIG92ZXJyaWRlIHRoZSBwcmV2aW91cyBvcHRpb25zXG4gICAqXG4gICAqL1xuICAkb3ZlcnJpZGVNb2RlbE9wdGlvbnM6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB0aGlzLiRvcHRpb25zID0gdGhpcy4kb3B0aW9ucy5jcmVhdGVDaGlsZChvcHRpb25zKTtcbiAgICB0aGlzLiQkc2V0VXBkYXRlT25FdmVudHMoKTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKlxuICAgKiBAbmFtZSAgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcHJvY2Vzc01vZGVsVmFsdWVcblxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogUnVucyB0aGUgbW9kZWwgLT4gdmlldyBwaXBlbGluZSBvbiB0aGUgY3VycmVudFxuICAgKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkbW9kZWxWYWx1ZSAkbW9kZWxWYWx1ZX0uXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIGJ5IHRoaXMgbWV0aG9kOlxuICAgKlxuICAgKiAtIHRoZSBgJG1vZGVsVmFsdWVgIGlzIHJ1biB0aHJvdWdoIHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkZm9ybWF0dGVycyAkZm9ybWF0dGVyc31cbiAgICogYW5kIHRoZSByZXN1bHQgaXMgc2V0IHRvIHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gICAqIC0gdGhlIGBuZy1lbXB0eWAgb3IgYG5nLW5vdC1lbXB0eWAgY2xhc3MgaXMgc2V0IG9uIHRoZSBlbGVtZW50XG4gICAqIC0gaWYgdGhlIGAkdmlld1ZhbHVlYCBoYXMgY2hhbmdlZDpcbiAgICogICAtIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyZW5kZXIgJHJlbmRlcn0gaXMgY2FsbGVkIG9uIHRoZSBjb250cm9sXG4gICAqICAgLSB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgJHZhbGlkYXRvcnN9IGFyZSBydW4gYW5kXG4gICAqICAgdGhlIHZhbGlkYXRpb24gc3RhdHVzIGlzIHNldC5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IG5nTW9kZWwgaW50ZXJuYWxseSB3aGVuIHRoZSBib3VuZCBzY29wZSB2YWx1ZSBjaGFuZ2VzLlxuICAgKiBBcHBsaWNhdGlvbiBkZXZlbG9wZXJzIHVzdWFsbHkgZG8gbm90IGhhdmUgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uIHRoZW1zZWx2ZXMuXG4gICAqXG4gICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgd2hlbiB0aGUgYCR2aWV3VmFsdWVgIG9yIHRoZSByZW5kZXJlZCBET00gdmFsdWUgYXJlIG5vdCBjb3JyZWN0bHlcbiAgICogZm9ybWF0dGVkIGFuZCB0aGUgYCRtb2RlbFZhbHVlYCBtdXN0IGJlIHJ1biB0aHJvdWdoIHRoZSBgJGZvcm1hdHRlcnNgIGFnYWluLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBDb25zaWRlciBhIHRleHQgaW5wdXQgd2l0aCBhbiBhdXRvY29tcGxldGUgbGlzdCAoZm9yIGZydWl0KSwgd2hlcmUgdGhlIGl0ZW1zIGFyZVxuICAgKiBvYmplY3RzIHdpdGggYSBuYW1lIGFuZCBhbiBpZC5cbiAgICogQSB1c2VyIGVudGVycyBgYXBgIGFuZCB0aGVuIHNlbGVjdHMgYEFwcmljb3RgIGZyb20gdGhlIGxpc3QuXG4gICAqIEJhc2VkIG9uIHRoaXMsIHRoZSBhdXRvY29tcGxldGUgd2lkZ2V0IHdpbGwgY2FsbCBgJHNldFZpZXdWYWx1ZSh7bmFtZTogJ0Fwcmljb3QnLCBpZDogNDQzfSlgLFxuICAgKiBidXQgdGhlIHJlbmRlcmVkIHZhbHVlIHdpbGwgc3RpbGwgYmUgYGFwYC5cbiAgICogVGhlIHdpZGdldCBjYW4gdGhlbiBjYWxsIGBjdHJsLiRwcm9jZXNzTW9kZWxWYWx1ZSgpYCB0byBydW4gdGhlIG1vZGVsIC0+IHZpZXdcbiAgICogcGlwZWxpbmUgYWdhaW4sIHdoaWNoIGZvcm1hdHMgdGhlIG9iamVjdCB0byB0aGUgc3RyaW5nIGBBcHJpY290YCxcbiAgICogdGhlbiB1cGRhdGVzIHRoZSBgJHZpZXdWYWx1ZWAsIGFuZCBmaW5hbGx5IHJlbmRlcnMgaXQgaW4gdGhlIERPTS5cbiAgICpcbiAgICogPGV4YW1wbGUgbW9kdWxlPVwiaW5wdXRFeGFtcGxlXCIgbmFtZT1cIm5nLW1vZGVsLXByb2Nlc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cImlucHV0Q29udHJvbGxlclwiIHN0eWxlPVwiZGlzcGxheTogZmxleDtcIj5cbiAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1yaWdodDogMzBweDtcIj5cbiAgICAgICAgICBTZWFyY2ggRnJ1aXQ6XG4gICAgICAgICAgPGJhc2ljLWF1dG9jb21wbGV0ZSBpdGVtcz1cIml0ZW1zXCIgb24tc2VsZWN0PVwic2VsZWN0ZWRGcnVpdCA9IGl0ZW1cIj48L2Jhc2ljLWF1dG9jb21wbGV0ZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgTW9kZWw6PGJyPlxuICAgICAgICAgIDxwcmU+e3tzZWxlY3RlZEZydWl0IHwganNvbn19PC9wcmU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2lucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignaW5wdXRDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLml0ZW1zID0gW1xuICAgICAgICAgICAge25hbWU6ICdBcHJpY290JywgaWQ6IDQ0M30sXG4gICAgICAgICAgICB7bmFtZTogJ0NsZW1lbnRpbmUnLCBpZDogOTcyfSxcbiAgICAgICAgICAgIHtuYW1lOiAnRHVyaWFuJywgaWQ6IDE2OX0sXG4gICAgICAgICAgICB7bmFtZTogJ0phY2tmcnVpdCcsIGlkOiA5ODJ9LFxuICAgICAgICAgICAge25hbWU6ICdTdHJhd2JlcnJ5JywgaWQ6IDg2M31cbiAgICAgICAgICBdO1xuICAgICAgICB9KVxuICAgICAgICAuY29tcG9uZW50KCdiYXNpY0F1dG9jb21wbGV0ZScsIHtcbiAgICAgICAgICBiaW5kaW5nczoge1xuICAgICAgICAgICAgaXRlbXM6ICc8JyxcbiAgICAgICAgICAgIG9uU2VsZWN0OiAnJidcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0b2NvbXBsZXRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRlbGVtZW50LCAkc2NvcGUpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBuZ01vZGVsO1xuXG4gICAgICAgICAgICB0aGF0LiRwb3N0TGluayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBuZ01vZGVsID0gJGVsZW1lbnQuZmluZCgnaW5wdXQnKS5jb250cm9sbGVyKCduZ01vZGVsJyk7XG5cbiAgICAgICAgICAgICAgbmdNb2RlbC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5uYW1lKSB8fCB2YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Lml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodGhhdC5pdGVtc1tpXS5uYW1lID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHRoYXQuaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGF0LnNlbGVjdEl0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShpdGVtKTtcbiAgICAgICAgICAgICAgbmdNb2RlbC4kcHJvY2Vzc01vZGVsVmFsdWUoKTtcbiAgICAgICAgICAgICAgdGhhdC5vblNlbGVjdCh7aXRlbTogaXRlbX0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJhdXRvY29tcGxldGUuaHRtbFwiPlxuICAgICAgIDxkaXY+XG4gICAgICAgICA8aW5wdXQgdHlwZT1cInNlYXJjaFwiIG5nLW1vZGVsPVwiJGN0cmwuc2VhcmNoVGVybVwiIC8+XG4gICAgICAgICA8dWw+XG4gICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJpdGVtIGluICRjdHJsLml0ZW1zIHwgZmlsdGVyOiRjdHJsLnNlYXJjaFRlcm1cIj5cbiAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGN0cmwuc2VsZWN0SXRlbShpdGVtKVwiPnt7IGl0ZW0ubmFtZSB9fTwvYnV0dG9uPlxuICAgICAgICAgICA8L2xpPlxuICAgICAgICAgPC91bD5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgKiA8L2V4YW1wbGU+XG4gICAqXG4gICAqL1xuICAkcHJvY2Vzc01vZGVsVmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2aWV3VmFsdWUgPSB0aGlzLiQkZm9ybWF0KCk7XG5cbiAgICBpZiAodGhpcy4kdmlld1ZhbHVlICE9PSB2aWV3VmFsdWUpIHtcbiAgICAgIHRoaXMuJCR1cGRhdGVFbXB0eUNsYXNzZXModmlld1ZhbHVlKTtcbiAgICAgIHRoaXMuJHZpZXdWYWx1ZSA9IHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID0gdmlld1ZhbHVlO1xuICAgICAgdGhpcy4kcmVuZGVyKCk7XG4gICAgICAvLyBJdCBpcyBwb3NzaWJsZSB0aGF0IG1vZGVsIGFuZCB2aWV3IHZhbHVlIGhhdmUgYmVlbiB1cGRhdGVkIGR1cmluZyByZW5kZXJcbiAgICAgIHRoaXMuJCRydW5WYWxpZGF0b3JzKHRoaXMuJG1vZGVsVmFsdWUsIHRoaXMuJHZpZXdWYWx1ZSwgbm9vcCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgaW50ZXJuYWxseSB0byBydW4gdGhlICRmb3JtYXR0ZXJzIG9uIHRoZSAkbW9kZWxWYWx1ZVxuICAgKi9cbiAgJCRmb3JtYXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmb3JtYXR0ZXJzID0gdGhpcy4kZm9ybWF0dGVycyxcbiAgICAgICAgaWR4ID0gZm9ybWF0dGVycy5sZW5ndGg7XG5cbiAgICB2YXIgdmlld1ZhbHVlID0gdGhpcy4kbW9kZWxWYWx1ZTtcbiAgICB3aGlsZSAoaWR4LS0pIHtcbiAgICAgIHZpZXdWYWx1ZSA9IGZvcm1hdHRlcnNbaWR4XSh2aWV3VmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2aWV3VmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBpbnRlcm5hbGx5IHdoZW4gdGhlIGJvdW5kIHNjb3BlIHZhbHVlIGNoYW5nZXMuXG4gICAqL1xuICAkJHNldE1vZGVsVmFsdWU6IGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcbiAgICB0aGlzLiRtb2RlbFZhbHVlID0gdGhpcy4kJHJhd01vZGVsVmFsdWUgPSBtb2RlbFZhbHVlO1xuICAgIHRoaXMuJCRwYXJzZXJWYWxpZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLiRwcm9jZXNzTW9kZWxWYWx1ZSgpO1xuICB9LFxuXG4gICQkc2V0VXBkYXRlT25FdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLiQkdXBkYXRlRXZlbnRzKSB7XG4gICAgICB0aGlzLiQkZWxlbWVudC5vZmYodGhpcy4kJHVwZGF0ZUV2ZW50cywgdGhpcy4kJHVwZGF0ZUV2ZW50SGFuZGxlcik7XG4gICAgfVxuXG4gICAgdGhpcy4kJHVwZGF0ZUV2ZW50cyA9IHRoaXMuJG9wdGlvbnMuZ2V0T3B0aW9uKCd1cGRhdGVPbicpO1xuICAgIGlmICh0aGlzLiQkdXBkYXRlRXZlbnRzKSB7XG4gICAgICB0aGlzLiQkZWxlbWVudC5vbih0aGlzLiQkdXBkYXRlRXZlbnRzLCB0aGlzLiQkdXBkYXRlRXZlbnRIYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgJCR1cGRhdGVFdmVudEhhbmRsZXI6IGZ1bmN0aW9uKGV2KSB7XG4gICAgdGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KGV2ICYmIGV2LnR5cGUpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBzZXR1cE1vZGVsV2F0Y2hlcihjdHJsKSB7XG4gIC8vIG1vZGVsIC0+IHZhbHVlXG4gIC8vIE5vdGU6IHdlIGNhbm5vdCB1c2UgYSBub3JtYWwgc2NvcGUuJHdhdGNoIGFzIHdlIHdhbnQgdG8gZGV0ZWN0IHRoZSBmb2xsb3dpbmc6XG4gIC8vIDEuIHNjb3BlIHZhbHVlIGlzICdhJ1xuICAvLyAyLiB1c2VyIGVudGVycyAnYidcbiAgLy8gMy4gbmctY2hhbmdlIGtpY2tzIGluIGFuZCByZXZlcnRzIHNjb3BlIHZhbHVlIHRvICdhJ1xuICAvLyAgICAtPiBzY29wZSB2YWx1ZSBkaWQgbm90IGNoYW5nZSBzaW5jZSB0aGUgbGFzdCBkaWdlc3QgYXNcbiAgLy8gICAgICAgbmctY2hhbmdlIGV4ZWN1dGVzIGluIGFwcGx5IHBoYXNlXG4gIC8vIDQuIHZpZXcgc2hvdWxkIGJlIGNoYW5nZWQgYmFjayB0byAnYSdcbiAgY3RybC4kJHNjb3BlLiR3YXRjaChmdW5jdGlvbiBuZ01vZGVsV2F0Y2goc2NvcGUpIHtcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IGN0cmwuJCRuZ01vZGVsR2V0KHNjb3BlKTtcblxuICAgIC8vIGlmIHNjb3BlIG1vZGVsIHZhbHVlIGFuZCBuZ01vZGVsIHZhbHVlIGFyZSBvdXQgb2Ygc3luY1xuICAgIC8vIFRoaXMgY2Fubm90IGJlIG1vdmVkIHRvIHRoZSBhY3Rpb24gZnVuY3Rpb24sIGJlY2F1c2UgaXQgd291bGQgbm90IGNhdGNoIHRoZVxuICAgIC8vIGNhc2Ugd2hlcmUgdGhlIG1vZGVsIGlzIGNoYW5nZWQgaW4gdGhlIG5nQ2hhbmdlIGZ1bmN0aW9uIG9yIHRoZSBtb2RlbCBzZXR0ZXJcbiAgICBpZiAobW9kZWxWYWx1ZSAhPT0gY3RybC4kbW9kZWxWYWx1ZSAmJlxuICAgICAgLy8gY2hlY2tzIGZvciBOYU4gaXMgbmVlZGVkIHRvIGFsbG93IHNldHRpbmcgdGhlIG1vZGVsIHRvIE5hTiB3aGVuIHRoZXJlJ3MgYW4gYXN5bmNWYWxpZGF0b3JcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICAgIChjdHJsLiRtb2RlbFZhbHVlID09PSBjdHJsLiRtb2RlbFZhbHVlIHx8IG1vZGVsVmFsdWUgPT09IG1vZGVsVmFsdWUpXG4gICAgKSB7XG4gICAgICBjdHJsLiQkc2V0TW9kZWxWYWx1ZShtb2RlbFZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbW9kZWxWYWx1ZTtcbiAgfSk7XG59XG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VmFsaWRpdHlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENoYW5nZSB0aGUgdmFsaWRpdHkgc3RhdGUsIGFuZCBub3RpZnkgdGhlIGZvcm0uXG4gKlxuICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB3aXRoaW4gJHBhcnNlcnMvJGZvcm1hdHRlcnMgb3IgYSBjdXN0b20gdmFsaWRhdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAqIEhvd2V2ZXIsIGluIG1vc3QgY2FzZXMgaXQgc2hvdWxkIGJlIHN1ZmZpY2llbnQgdG8gdXNlIHRoZSBgbmdNb2RlbC4kdmFsaWRhdG9yc2AgYW5kXG4gKiBgbmdNb2RlbC4kYXN5bmNWYWxpZGF0b3JzYCBjb2xsZWN0aW9ucyB3aGljaCB3aWxsIGNhbGwgYCRzZXRWYWxpZGl0eWAgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsaWRhdGlvbkVycm9yS2V5IE5hbWUgb2YgdGhlIHZhbGlkYXRvci4gVGhlIGB2YWxpZGF0aW9uRXJyb3JLZXlgIHdpbGwgYmUgYXNzaWduZWRcbiAqICAgICAgICB0byBlaXRoZXIgYCRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldYCBvciBgJHBlbmRpbmdbdmFsaWRhdGlvbkVycm9yS2V5XWBcbiAqICAgICAgICAoZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYCksIHNvIHRoYXQgaXQgaXMgYXZhaWxhYmxlIGZvciBkYXRhLWJpbmRpbmcuXG4gKiAgICAgICAgVGhlIGB2YWxpZGF0aW9uRXJyb3JLZXlgIHNob3VsZCBiZSBpbiBjYW1lbENhc2UgYW5kIHdpbGwgZ2V0IGNvbnZlcnRlZCBpbnRvIGRhc2gtY2FzZVxuICogICAgICAgIGZvciBjbGFzcyBuYW1lLiBFeGFtcGxlOiBgbXlFcnJvcmAgd2lsbCByZXN1bHQgaW4gYG5nLXZhbGlkLW15LWVycm9yYCBhbmQgYG5nLWludmFsaWQtbXktZXJyb3JgXG4gKiAgICAgICAgY2xhc3NlcyBhbmQgY2FuIGJlIGJvdW5kIHRvIGFzIGB7eyBzb21lRm9ybS5zb21lQ29udHJvbC4kZXJyb3IubXlFcnJvciB9fWAuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmFsaWQgV2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBpcyB2YWxpZCAodHJ1ZSksIGludmFsaWQgKGZhbHNlKSwgcGVuZGluZyAodW5kZWZpbmVkKSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBvciBza2lwcGVkIChudWxsKS4gUGVuZGluZyBpcyB1c2VkIGZvciB1bmZ1bGZpbGxlZCBgJGFzeW5jVmFsaWRhdG9yc2AuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgU2tpcHBlZCBpcyB1c2VkIGJ5IEFuZ3VsYXJKUyB3aGVuIHZhbGlkYXRvcnMgZG8gbm90IHJ1biBiZWNhdXNlIG9mIHBhcnNlIGVycm9ycyBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIGAkYXN5bmNWYWxpZGF0b3JzYCBkbyBub3QgcnVuIGJlY2F1c2UgYW55IG9mIHRoZSBgJHZhbGlkYXRvcnNgIGZhaWxlZC5cbiAqL1xuYWRkU2V0VmFsaWRpdHlNZXRob2Qoe1xuICBjbGF6ejogTmdNb2RlbENvbnRyb2xsZXIsXG4gIHNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIG9iamVjdFtwcm9wZXJ0eV0gPSB0cnVlO1xuICB9LFxuICB1bnNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICB9XG59KTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW9kZWxcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vZGVsIGFzc2lnbmFibGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gYmluZCB0by5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdNb2RlbGAgZGlyZWN0aXZlIGJpbmRzIGFuIGBpbnB1dGAsYHNlbGVjdGAsIGB0ZXh0YXJlYWAgKG9yIGN1c3RvbSBmb3JtIGNvbnRyb2wpIHRvIGFcbiAqIHByb3BlcnR5IG9uIHRoZSBzY29wZSB1c2luZyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciBOZ01vZGVsQ29udHJvbGxlcn0sXG4gKiB3aGljaCBpcyBjcmVhdGVkIGFuZCBleHBvc2VkIGJ5IHRoaXMgZGlyZWN0aXZlLlxuICpcbiAqIGBuZ01vZGVsYCBpcyByZXNwb25zaWJsZSBmb3I6XG4gKlxuICogLSBCaW5kaW5nIHRoZSB2aWV3IGludG8gdGhlIG1vZGVsLCB3aGljaCBvdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYGlucHV0YCwgYHRleHRhcmVhYCBvciBgc2VsZWN0YFxuICogICByZXF1aXJlLlxuICogLSBQcm92aWRpbmcgdmFsaWRhdGlvbiBiZWhhdmlvciAoaS5lLiByZXF1aXJlZCwgbnVtYmVyLCBlbWFpbCwgdXJsKS5cbiAqIC0gS2VlcGluZyB0aGUgc3RhdGUgb2YgdGhlIGNvbnRyb2wgKHZhbGlkL2ludmFsaWQsIGRpcnR5L3ByaXN0aW5lLCB0b3VjaGVkL3VudG91Y2hlZCwgdmFsaWRhdGlvbiBlcnJvcnMpLlxuICogLSBTZXR0aW5nIHJlbGF0ZWQgY3NzIGNsYXNzZXMgb24gdGhlIGVsZW1lbnQgKGBuZy12YWxpZGAsIGBuZy1pbnZhbGlkYCwgYG5nLWRpcnR5YCwgYG5nLXByaXN0aW5lYCwgYG5nLXRvdWNoZWRgLFxuICogICBgbmctdW50b3VjaGVkYCwgYG5nLWVtcHR5YCwgYG5nLW5vdC1lbXB0eWApIGluY2x1ZGluZyBhbmltYXRpb25zLlxuICogLSBSZWdpc3RlcmluZyB0aGUgY29udHJvbCB3aXRoIGl0cyBwYXJlbnQge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGZvcm19LlxuICpcbiAqIE5vdGU6IGBuZ01vZGVsYCB3aWxsIHRyeSB0byBiaW5kIHRvIHRoZSBwcm9wZXJ0eSBnaXZlbiBieSBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uIG9uIHRoZVxuICogY3VycmVudCBzY29wZS4gSWYgdGhlIHByb3BlcnR5IGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBvbiB0aGlzIHNjb3BlLCBpdCB3aWxsIGJlIGNyZWF0ZWRcbiAqIGltcGxpY2l0bHkgYW5kIGFkZGVkIHRvIHRoZSBzY29wZS5cbiAqXG4gKiBGb3IgYmVzdCBwcmFjdGljZXMgb24gdXNpbmcgYG5nTW9kZWxgLCBzZWU6XG4gKlxuICogIC0gW1VuZGVyc3RhbmRpbmcgU2NvcGVzXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3dpa2kvVW5kZXJzdGFuZGluZy1TY29wZXMpXG4gKlxuICogRm9yIGJhc2ljIGV4YW1wbGVzLCBob3cgdG8gdXNlIGBuZ01vZGVsYCwgc2VlOlxuICpcbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXR9XG4gKiAgICAtIHtAbGluayBpbnB1dFt0ZXh0XSB0ZXh0fVxuICogICAgLSB7QGxpbmsgaW5wdXRbY2hlY2tib3hdIGNoZWNrYm94fVxuICogICAgLSB7QGxpbmsgaW5wdXRbcmFkaW9dIHJhZGlvfVxuICogICAgLSB7QGxpbmsgaW5wdXRbbnVtYmVyXSBudW1iZXJ9XG4gKiAgICAtIHtAbGluayBpbnB1dFtlbWFpbF0gZW1haWx9XG4gKiAgICAtIHtAbGluayBpbnB1dFt1cmxdIHVybH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W2RhdGVdIGRhdGV9XG4gKiAgICAtIHtAbGluayBpbnB1dFtkYXRldGltZS1sb2NhbF0gZGF0ZXRpbWUtbG9jYWx9XG4gKiAgICAtIHtAbGluayBpbnB1dFt0aW1lXSB0aW1lfVxuICogICAgLSB7QGxpbmsgaW5wdXRbbW9udGhdIG1vbnRofVxuICogICAgLSB7QGxpbmsgaW5wdXRbd2Vla10gd2Vla31cbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6c2VsZWN0IHNlbGVjdH1cbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6dGV4dGFyZWEgdGV4dGFyZWF9XG4gKlxuICogIyMgQ29tcGxleCBNb2RlbHMgKG9iamVjdHMgb3IgY29sbGVjdGlvbnMpXG4gKlxuICogQnkgZGVmYXVsdCwgYG5nTW9kZWxgIHdhdGNoZXMgdGhlIG1vZGVsIGJ5IHJlZmVyZW5jZSwgbm90IHZhbHVlLiBUaGlzIGlzIGltcG9ydGFudCB0byBrbm93IHdoZW5cbiAqIGJpbmRpbmcgaW5wdXRzIHRvIG1vZGVscyB0aGF0IGFyZSBvYmplY3RzIChlLmcuIGBEYXRlYCkgb3IgY29sbGVjdGlvbnMgKGUuZy4gYXJyYXlzKS4gSWYgb25seSBwcm9wZXJ0aWVzIG9mIHRoZVxuICogb2JqZWN0IG9yIGNvbGxlY3Rpb24gY2hhbmdlLCBgbmdNb2RlbGAgd2lsbCBub3QgYmUgbm90aWZpZWQgYW5kIHNvIHRoZSBpbnB1dCB3aWxsIG5vdCBiZSAgcmUtcmVuZGVyZWQuXG4gKlxuICogVGhlIG1vZGVsIG11c3QgYmUgYXNzaWduZWQgYW4gZW50aXJlbHkgbmV3IG9iamVjdCBvciBjb2xsZWN0aW9uIGJlZm9yZSBhIHJlLXJlbmRlcmluZyB3aWxsIG9jY3VyLlxuICpcbiAqIFNvbWUgZGlyZWN0aXZlcyBoYXZlIG9wdGlvbnMgdGhhdCB3aWxsIGNhdXNlIHRoZW0gdG8gdXNlIGEgY3VzdG9tIGAkd2F0Y2hDb2xsZWN0aW9uYCBvbiB0aGUgbW9kZWwgZXhwcmVzc2lvblxuICogLSBmb3IgZXhhbXBsZSwgYG5nT3B0aW9uc2Agd2lsbCBkbyBzbyB3aGVuIGEgYHRyYWNrIGJ5YCBjbGF1c2UgaXMgaW5jbHVkZWQgaW4gdGhlIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvbiBvclxuICogaWYgdGhlIHNlbGVjdCBpcyBnaXZlbiB0aGUgYG11bHRpcGxlYCBhdHRyaWJ1dGUuXG4gKlxuICogVGhlIGAkd2F0Y2hDb2xsZWN0aW9uKClgIG1ldGhvZCBvbmx5IGRvZXMgYSBzaGFsbG93IGNvbXBhcmlzb24sIG1lYW5pbmcgdGhhdCBjaGFuZ2luZyBwcm9wZXJ0aWVzIGRlZXBlciB0aGFuIHRoZVxuICogZmlyc3QgbGV2ZWwgb2YgdGhlIG9iamVjdCAob3Igb25seSBjaGFuZ2luZyB0aGUgcHJvcGVydGllcyBvZiBhbiBpdGVtIGluIHRoZSBjb2xsZWN0aW9uIGlmIGl0J3MgYW4gYXJyYXkpIHdpbGwgc3RpbGxcbiAqIG5vdCB0cmlnZ2VyIGEgcmUtcmVuZGVyaW5nIG9mIHRoZSBtb2RlbC5cbiAqXG4gKiAjIyBDU1MgY2xhc3Nlc1xuICogVGhlIGZvbGxvd2luZyBDU1MgY2xhc3NlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWQgb24gdGhlIGFzc29jaWF0ZWQgaW5wdXQvc2VsZWN0L3RleHRhcmVhIGVsZW1lbnRcbiAqIGRlcGVuZGluZyBvbiB0aGUgdmFsaWRpdHkgb2YgdGhlIG1vZGVsLlxuICpcbiAqICAtIGBuZy12YWxpZGA6IHRoZSBtb2RlbCBpcyB2YWxpZFxuICogIC0gYG5nLWludmFsaWRgOiB0aGUgbW9kZWwgaXMgaW52YWxpZFxuICogIC0gYG5nLXZhbGlkLVtrZXldYDogZm9yIGVhY2ggdmFsaWQga2V5IGFkZGVkIGJ5IGAkc2V0VmFsaWRpdHlgXG4gKiAgLSBgbmctaW52YWxpZC1ba2V5XWA6IGZvciBlYWNoIGludmFsaWQga2V5IGFkZGVkIGJ5IGAkc2V0VmFsaWRpdHlgXG4gKiAgLSBgbmctcHJpc3RpbmVgOiB0aGUgY29udHJvbCBoYXNuJ3QgYmVlbiBpbnRlcmFjdGVkIHdpdGggeWV0XG4gKiAgLSBgbmctZGlydHlgOiB0aGUgY29udHJvbCBoYXMgYmVlbiBpbnRlcmFjdGVkIHdpdGhcbiAqICAtIGBuZy10b3VjaGVkYDogdGhlIGNvbnRyb2wgaGFzIGJlZW4gYmx1cnJlZFxuICogIC0gYG5nLXVudG91Y2hlZGA6IHRoZSBjb250cm9sIGhhc24ndCBiZWVuIGJsdXJyZWRcbiAqICAtIGBuZy1wZW5kaW5nYDogYW55IGAkYXN5bmNWYWxpZGF0b3JzYCBhcmUgdW5mdWxmaWxsZWRcbiAqICAtIGBuZy1lbXB0eWA6IHRoZSB2aWV3IGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZSBvciB0aGUgdmFsdWUgaXMgZGVlbWVkIFwiZW1wdHlcIiwgYXMgZGVmaW5lZFxuICogICAgIGJ5IHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkaXNFbXB0eX0gbWV0aG9kXG4gKiAgLSBgbmctbm90LWVtcHR5YDogdGhlIHZpZXcgY29udGFpbnMgYSBub24tZW1wdHkgdmFsdWVcbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCBuZ0FuaW1hdGUgY2FuIGRldGVjdCBlYWNoIG9mIHRoZXNlIGNsYXNzZXMgd2hlbiBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogQW5pbWF0aW9ucyB3aXRoaW4gbW9kZWxzIGFyZSB0cmlnZ2VyZWQgd2hlbiBhbnkgb2YgdGhlIGFzc29jaWF0ZWQgQ1NTIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkXG4gKiBvbiB0aGUgaW5wdXQgZWxlbWVudCB3aGljaCBpcyBhdHRhY2hlZCB0byB0aGUgbW9kZWwuIFRoZXNlIGNsYXNzZXMgaW5jbHVkZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLFxuICogYC5uZy1pbnZhbGlkYCBhbmQgYC5uZy12YWxpZGAgYXMgd2VsbCBhcyBhbnkgb3RoZXIgdmFsaWRhdGlvbnMgdGhhdCBhcmUgcGVyZm9ybWVkIG9uIHRoZSBtb2RlbCBpdHNlbGYuXG4gKiBUaGUgYW5pbWF0aW9ucyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2l0aGluIG5nTW9kZWwgYXJlIHNpbWlsYXIgdG8gaG93IHRoZXkgd29yayBpbiBuZ0NsYXNzIGFuZFxuICogYW5pbWF0aW9ucyBjYW4gYmUgaG9va2VkIGludG8gdXNpbmcgQ1NTIHRyYW5zaXRpb25zLCBrZXlmcmFtZXMgYXMgd2VsbCBhcyBKUyBhbmltYXRpb25zLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBhIHNpbXBsZSB3YXkgdG8gdXRpbGl6ZSBDU1MgdHJhbnNpdGlvbnMgdG8gc3R5bGUgYW4gaW5wdXQgZWxlbWVudFxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcbiAqXG4gKiA8cHJlPlxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXG4gKiAvL2FkdmFuY2VkIGFuaW1hdGlvbnNcbiAqIC5teS1pbnB1dCB7XG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xuICogICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAqIH1cbiAqIC5teS1pbnB1dC5uZy1pbnZhbGlkIHtcbiAqICAgYmFja2dyb3VuZDogcmVkO1xuICogICBjb2xvcjp3aGl0ZTtcbiAqIH1cbiAqIDwvcHJlPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQmFzaWMgVXNhZ2VcbiAqIDxleGFtcGxlIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIGZpeEJhc2U9XCJ0cnVlXCIgbW9kdWxlPVwiaW5wdXRFeGFtcGxlXCIgbmFtZT1cIm5nLW1vZGVsXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2lucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUudmFsID0gJzEnO1xuICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8c3R5bGU+XG4gICAgICAgICAubXktaW5wdXQge1xuICAgICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICB9XG4gICAgICAgICAubXktaW5wdXQubmctaW52YWxpZCB7XG4gICAgICAgICAgIGNvbG9yOndoaXRlO1xuICAgICAgICAgICBiYWNrZ3JvdW5kOiByZWQ7XG4gICAgICAgICB9XG4gICAgICAgPC9zdHlsZT5cbiAgICAgICA8cCBpZD1cImlucHV0RGVzY3JpcHRpb25cIj5cbiAgICAgICAgVXBkYXRlIGlucHV0IHRvIHNlZSB0cmFuc2l0aW9ucyB3aGVuIHZhbGlkL2ludmFsaWQuXG4gICAgICAgIEludGVnZXIgaXMgYSB2YWxpZCB2YWx1ZS5cbiAgICAgICA8L3A+XG4gICAgICAgPGZvcm0gbmFtZT1cInRlc3RGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ2YWxcIiBuZy1wYXR0ZXJuPVwiL15cXGQrJC9cIiBuYW1lPVwiYW5pbVwiIGNsYXNzPVwibXktaW5wdXRcIlxuICAgICAgICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9XCJpbnB1dERlc2NyaXB0aW9uXCIgLz5cbiAgICAgICA8L2Zvcm0+XG4gICAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJpbmRpbmcgdG8gYSBnZXR0ZXIvc2V0dGVyXG4gKlxuICogU29tZXRpbWVzIGl0J3MgaGVscGZ1bCB0byBiaW5kIGBuZ01vZGVsYCB0byBhIGdldHRlci9zZXR0ZXIgZnVuY3Rpb24uICBBIGdldHRlci9zZXR0ZXIgaXMgYVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1vZGVsIHdoZW4gY2FsbGVkIHdpdGggemVybyBhcmd1bWVudHMsIGFuZCBzZXRzXG4gKiB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBtb2RlbCB3aGVuIGNhbGxlZCB3aXRoIGFuIGFyZ3VtZW50LiBJdCdzIHNvbWV0aW1lcyB1c2VmdWwgdG8gdXNlIHRoaXNcbiAqIGZvciBtb2RlbHMgdGhhdCBoYXZlIGFuIGludGVybmFsIHJlcHJlc2VudGF0aW9uIHRoYXQncyBkaWZmZXJlbnQgZnJvbSB3aGF0IHRoZSBtb2RlbCBleHBvc2VzXG4gKiB0byB0aGUgdmlldy5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICogKipCZXN0IFByYWN0aWNlOioqIEl0J3MgYmVzdCB0byBrZWVwIGdldHRlcnMgZmFzdCBiZWNhdXNlIEFuZ3VsYXJKUyBpcyBsaWtlbHkgdG8gY2FsbCB0aGVtIG1vcmVcbiAqIGZyZXF1ZW50bHkgdGhhbiBvdGhlciBwYXJ0cyBvZiB5b3VyIGNvZGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBZb3UgdXNlIHRoaXMgYmVoYXZpb3IgYnkgYWRkaW5nIGBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiYCB0byBhbiBlbGVtZW50IHRoYXRcbiAqIGhhcyBgbmctbW9kZWxgIGF0dGFjaGVkIHRvIGl0LiBZb3UgY2FuIGFsc28gYWRkIGBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiYCB0b1xuICogYSBgPGZvcm0+YCwgd2hpY2ggd2lsbCBlbmFibGUgdGhpcyBiZWhhdmlvciBmb3IgYWxsIGA8aW5wdXQ+YHMgd2l0aGluIGl0LiBTZWVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zYH0gZm9yIG1vcmUuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYG5nTW9kZWxgIHdpdGggYSBnZXR0ZXIvc2V0dGVyOlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbC1nZXR0ZXItc2V0dGVyXCIgbW9kdWxlPVwiZ2V0dGVyU2V0dGVyRXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAgICAgICAgICAgPGxhYmVsPk5hbWU6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiIC8+XG4gICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICA8L2Zvcm0+XG4gICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWUoKVwiPjwvc3Bhbj48L3ByZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2dldHRlclNldHRlckV4YW1wbGUnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgIHZhciBfbmFtZSA9ICdCcmlhbic7XG4gICAgICAgICAgICRzY29wZS51c2VyID0ge1xuICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uKG5ld05hbWUpIHtcbiAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IG5ld05hbWUgY2FuIGJlIHVuZGVmaW5lZCBmb3IgdHdvIHJlYXNvbnM6XG4gICAgICAgICAgICAgIC8vIDEuIEJlY2F1c2UgaXQgaXMgY2FsbGVkIGFzIGEgZ2V0dGVyIGFuZCB0aHVzIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50c1xuICAgICAgICAgICAgICAvLyAyLiBCZWNhdXNlIHRoZSBwcm9wZXJ0eSBzaG91bGQgYWN0dWFsbHkgYmUgc2V0IHRvIHVuZGVmaW5lZC4gVGhpcyBoYXBwZW5zIGUuZy4gaWYgdGhlXG4gICAgICAgICAgICAgIC8vICAgIGlucHV0IGlzIGludmFsaWRcbiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoX25hbWUgPSBuZXdOYW1lKSA6IF9uYW1lO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgbmdNb2RlbERpcmVjdGl2ZSA9IFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRyb290U2NvcGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6IFsnbmdNb2RlbCcsICdeP2Zvcm0nLCAnXj9uZ01vZGVsT3B0aW9ucyddLFxuICAgIGNvbnRyb2xsZXI6IE5nTW9kZWxDb250cm9sbGVyLFxuICAgIC8vIFByZWxpbmsgbmVlZHMgdG8gcnVuIGJlZm9yZSBhbnkgaW5wdXQgZGlyZWN0aXZlXG4gICAgLy8gc28gdGhhdCB3ZSBjYW4gc2V0IHRoZSBOZ01vZGVsT3B0aW9ucyBpbiBOZ01vZGVsQ29udHJvbGxlclxuICAgIC8vIGJlZm9yZSBhbnlvbmUgZWxzZSB1c2VzIGl0LlxuICAgIHByaW9yaXR5OiAxLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nTW9kZWxDb21waWxlKGVsZW1lbnQpIHtcbiAgICAgIC8vIFNldHVwIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbnRyb2xcbiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoUFJJU1RJTkVfQ0xBU1MpLmFkZENsYXNzKFVOVE9VQ0hFRF9DTEFTUykuYWRkQ2xhc3MoVkFMSURfQ0xBU1MpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcmU6IGZ1bmN0aW9uIG5nTW9kZWxQcmVMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXSxcbiAgICAgICAgICAgICAgZm9ybUN0cmwgPSBjdHJsc1sxXSB8fCBtb2RlbEN0cmwuJCRwYXJlbnRGb3JtLFxuICAgICAgICAgICAgICBvcHRpb25zQ3RybCA9IGN0cmxzWzJdO1xuXG4gICAgICAgICAgaWYgKG9wdGlvbnNDdHJsKSB7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJG9wdGlvbnMgPSBvcHRpb25zQ3RybC4kb3B0aW9ucztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtb2RlbEN0cmwuJCRpbml0R2V0dGVyU2V0dGVycygpO1xuXG4gICAgICAgICAgLy8gbm90aWZ5IG90aGVycywgZXNwZWNpYWxseSBwYXJlbnQgZm9ybXNcbiAgICAgICAgICBmb3JtQ3RybC4kYWRkQ29udHJvbChtb2RlbEN0cmwpO1xuXG4gICAgICAgICAgYXR0ci4kb2JzZXJ2ZSgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBpZiAobW9kZWxDdHJsLiRuYW1lICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICBtb2RlbEN0cmwuJCRwYXJlbnRGb3JtLiQkcmVuYW1lQ29udHJvbChtb2RlbEN0cmwsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kJHBhcmVudEZvcm0uJHJlbW92ZUNvbnRyb2wobW9kZWxDdHJsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zdDogZnVuY3Rpb24gbmdNb2RlbFBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAgICAgICAgICBtb2RlbEN0cmwuJCRzZXRVcGRhdGVPbkV2ZW50cygpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gc2V0VG91Y2hlZCgpIHtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kc2V0VG91Y2hlZCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsZW1lbnQub24oJ2JsdXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChtb2RlbEN0cmwuJHRvdWNoZWQpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xuICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKHNldFRvdWNoZWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KHNldFRvdWNoZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKiBleHBvcnRlZCBkZWZhdWx0TW9kZWxPcHRpb25zICovXG52YXIgZGVmYXVsdE1vZGVsT3B0aW9ucztcbnZhciBERUZBVUxUX1JFR0VYUCA9IC8oXFxzK3xeKWRlZmF1bHQoXFxzK3wkKS87XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIE1vZGVsT3B0aW9uc1xuICogQGRlc2NyaXB0aW9uXG4gKiBBIGNvbnRhaW5lciBmb3IgdGhlIG9wdGlvbnMgc2V0IGJ5IHRoZSB7QGxpbmsgbmdNb2RlbE9wdGlvbnN9IGRpcmVjdGl2ZVxuICovXG5mdW5jdGlvbiBNb2RlbE9wdGlvbnMob3B0aW9ucykge1xuICB0aGlzLiQkb3B0aW9ucyA9IG9wdGlvbnM7XG59XG5cbk1vZGVsT3B0aW9ucy5wcm90b3R5cGUgPSB7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgTW9kZWxPcHRpb25zI2dldE9wdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgb3B0aW9uIHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgb2YgdGhlIG9wdGlvblxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIG9wdGlvblxuICAgKi9cbiAgZ2V0T3B0aW9uOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuJCRvcHRpb25zW25hbWVdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIE1vZGVsT3B0aW9ucyNjcmVhdGVDaGlsZFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBhIGhhc2ggb2Ygb3B0aW9ucyBmb3IgdGhlIG5ldyBjaGlsZCB0aGF0IHdpbGwgb3ZlcnJpZGUgdGhlIHBhcmVudCdzIG9wdGlvbnNcbiAgICogQHJldHVybiB7TW9kZWxPcHRpb25zfSBhIG5ldyBgTW9kZWxPcHRpb25zYCBvYmplY3QgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICovXG4gIGNyZWF0ZUNoaWxkOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdmFyIGluaGVyaXRBbGwgPSBmYWxzZTtcblxuICAgIC8vIG1ha2UgYSBzaGFsbG93IGNvcHlcbiAgICBvcHRpb25zID0gZXh0ZW5kKHt9LCBvcHRpb25zKTtcblxuICAgIC8vIEluaGVyaXQgb3B0aW9ucyBmcm9tIHRoZSBwYXJlbnQgaWYgc3BlY2lmaWVkIGJ5IHRoZSB2YWx1ZSBgXCIkaW5oZXJpdFwiYFxuICAgIGZvckVhY2gob3B0aW9ucywgLyogQHRoaXMgKi8gZnVuY3Rpb24ob3B0aW9uLCBrZXkpIHtcbiAgICAgIGlmIChvcHRpb24gPT09ICckaW5oZXJpdCcpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJyonKSB7XG4gICAgICAgICAgaW5oZXJpdEFsbCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9uc1trZXldID0gdGhpcy4kJG9wdGlvbnNba2V5XTtcbiAgICAgICAgICAvLyBgdXBkYXRlT25gIGlzIHNwZWNpYWwgc28gd2UgbXVzdCBhbHNvIGluaGVyaXQgdGhlIGB1cGRhdGVPbkRlZmF1bHRgIG9wdGlvblxuICAgICAgICAgIGlmIChrZXkgPT09ICd1cGRhdGVPbicpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gdGhpcy4kJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3VwZGF0ZU9uJykge1xuICAgICAgICAgIC8vIElmIHRoZSBgdXBkYXRlT25gIHByb3BlcnR5IGNvbnRhaW5zIHRoZSBgZGVmYXVsdGAgZXZlbnQgdGhlbiB3ZSBoYXZlIHRvIHJlbW92ZVxuICAgICAgICAgIC8vIGl0IGZyb20gdGhlIGV2ZW50IGxpc3QgYW5kIHNldCB0aGUgYHVwZGF0ZU9uRGVmYXVsdGAgZmxhZy5cbiAgICAgICAgICBvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgICAgIG9wdGlvbnNba2V5XSA9IHRyaW0ob3B0aW9uLnJlcGxhY2UoREVGQVVMVF9SRUdFWFAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuICcgJztcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcblxuICAgIGlmIChpbmhlcml0QWxsKSB7XG4gICAgICAvLyBXZSBoYXZlIGEgcHJvcGVydHkgb2YgdGhlIGZvcm06IGBcIipcIjogXCIkaW5oZXJpdFwiYFxuICAgICAgZGVsZXRlIG9wdGlvbnNbJyonXTtcbiAgICAgIGRlZmF1bHRzKG9wdGlvbnMsIHRoaXMuJCRvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLyBGaW5hbGx5IGFkZCBpbiBhbnkgbWlzc2luZyBkZWZhdWx0c1xuICAgIGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRNb2RlbE9wdGlvbnMuJCRvcHRpb25zKTtcblxuICAgIHJldHVybiBuZXcgTW9kZWxPcHRpb25zKG9wdGlvbnMpO1xuICB9XG59O1xuXG5cbmRlZmF1bHRNb2RlbE9wdGlvbnMgPSBuZXcgTW9kZWxPcHRpb25zKHtcbiAgdXBkYXRlT246ICcnLFxuICB1cGRhdGVPbkRlZmF1bHQ6IHRydWUsXG4gIGRlYm91bmNlOiAwLFxuICBnZXR0ZXJTZXR0ZXI6IGZhbHNlLFxuICBhbGxvd0ludmFsaWQ6IGZhbHNlLFxuICB0aW1lem9uZTogbnVsbFxufSk7XG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vZGVsT3B0aW9uc1xuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBtb2RpZnkgdGhlIGJlaGF2aW91ciBvZiB7QGxpbmsgbmdNb2RlbH0gZGlyZWN0aXZlcyB3aXRoaW4geW91clxuICogYXBwbGljYXRpb24uIFlvdSBjYW4gc3BlY2lmeSBhbiBgbmdNb2RlbE9wdGlvbnNgIGRpcmVjdGl2ZSBvbiBhbnkgZWxlbWVudC4gQWxsIHtAbGluayBuZ01vZGVsfVxuICogZGlyZWN0aXZlcyB3aWxsIHVzZSB0aGUgb3B0aW9ucyBvZiB0aGVpciBuZWFyZXN0IGBuZ01vZGVsT3B0aW9uc2AgYW5jZXN0b3IuXG4gKlxuICogVGhlIGBuZ01vZGVsT3B0aW9uc2Agc2V0dGluZ3MgYXJlIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgZGlyZWN0aXZlIGFzXG4gKiBhbiBBbmd1bGFySlMgZXhwcmVzc2lvbi4gVGhpcyBleHByZXNzaW9uIHNob3VsZCBldmFsdWF0ZSB0byBhbiBvYmplY3QsIHdob3NlIHByb3BlcnRpZXMgY29udGFpblxuICogdGhlIHNldHRpbmdzLiBGb3IgZXhhbXBsZTogYDxkaXYgbmctbW9kZWwtb3B0aW9ucz1cInsgZGVib3VuY2U6IDEwMCB9XCJgLlxuICpcbiAqICMjIEluaGVyaXRpbmcgT3B0aW9uc1xuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSB0aGF0IGFuIGBuZ01vZGVsT3B0aW9uc2Agc2V0dGluZyBzaG91bGQgYmUgaW5oZXJpdGVkIGZyb20gYSBwYXJlbnQgYG5nTW9kZWxPcHRpb25zYFxuICogZGlyZWN0aXZlIGJ5IGdpdmluZyBpdCB0aGUgdmFsdWUgb2YgYFwiJGluaGVyaXRcImAuXG4gKiBUaGVuIGl0IHdpbGwgaW5oZXJpdCB0aGF0IHNldHRpbmcgZnJvbSB0aGUgZmlyc3QgYG5nTW9kZWxPcHRpb25zYCBkaXJlY3RpdmUgZm91bmQgYnkgdHJhdmVyc2luZyB1cCB0aGVcbiAqIERPTSB0cmVlLiBJZiB0aGVyZSBpcyBubyBhbmNlc3RvciBlbGVtZW50IGNvbnRhaW5pbmcgYW4gYG5nTW9kZWxPcHRpb25zYCBkaXJlY3RpdmUgdGhlbiBkZWZhdWx0IHNldHRpbmdzXG4gKiB3aWxsIGJlIHVzZWQuXG4gKlxuICogRm9yIGV4YW1wbGUgZ2l2ZW4gdGhlIGZvbGxvd2luZyBmcmFnbWVudCBvZiBIVE1MXG4gKlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgbmctbW9kZWwtb3B0aW9ucz1cInsgYWxsb3dJbnZhbGlkOiB0cnVlLCBkZWJvdW5jZTogMjAwIH1cIj5cbiAqICAgPGZvcm0gbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJywgYWxsb3dJbnZhbGlkOiAnJGluaGVyaXQnIH1cIj5cbiAqICAgICA8aW5wdXQgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdkZWZhdWx0JywgYWxsb3dJbnZhbGlkOiAnJGluaGVyaXQnIH1cIiAvPlxuICogICA8L2Zvcm0+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIHRoZSBgaW5wdXRgIGVsZW1lbnQgd2lsbCBoYXZlIHRoZSBmb2xsb3dpbmcgc2V0dGluZ3NcbiAqXG4gKiBgYGBqc1xuICogeyBhbGxvd0ludmFsaWQ6IHRydWUsIHVwZGF0ZU9uOiAnZGVmYXVsdCcsIGRlYm91bmNlOiAwIH1cbiAqIGBgYFxuICpcbiAqIE5vdGljZSB0aGF0IHRoZSBgZGVib3VuY2VgIHNldHRpbmcgd2FzIG5vdCBpbmhlcml0ZWQgYW5kIHVzZWQgdGhlIGRlZmF1bHQgdmFsdWUgaW5zdGVhZC5cbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgdGhhdCBhbGwgdW5kZWZpbmVkIHNldHRpbmdzIGFyZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBmcm9tIGFuIGFuY2VzdG9yIGJ5XG4gKiBpbmNsdWRpbmcgYSBwcm9wZXJ0eSB3aXRoIGtleSBvZiBgXCIqXCJgIGFuZCB2YWx1ZSBvZiBgXCIkaW5oZXJpdFwiYC5cbiAqXG4gKiBGb3IgZXhhbXBsZSBnaXZlbiB0aGUgZm9sbG93aW5nIGZyYWdtZW50IG9mIEhUTUxcbiAqXG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1tb2RlbC1vcHRpb25zPVwieyBhbGxvd0ludmFsaWQ6IHRydWUsIGRlYm91bmNlOiAyMDAgfVwiPlxuICogICA8Zm9ybSBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2JsdXInLCBcIipcIjogJyRpbmhlcml0JyB9XCI+XG4gKiAgICAgPGlucHV0IG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnZGVmYXVsdCcsIFwiKlwiOiAnJGluaGVyaXQnIH1cIiAvPlxuICogICA8L2Zvcm0+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIHRoZSBgaW5wdXRgIGVsZW1lbnQgd2lsbCBoYXZlIHRoZSBmb2xsb3dpbmcgc2V0dGluZ3NcbiAqXG4gKiBgYGBqc1xuICogeyBhbGxvd0ludmFsaWQ6IHRydWUsIHVwZGF0ZU9uOiAnZGVmYXVsdCcsIGRlYm91bmNlOiAyMDAgfVxuICogYGBgXG4gKlxuICogTm90aWNlIHRoYXQgdGhlIGBkZWJvdW5jZWAgc2V0dGluZyBub3cgaW5oZXJpdHMgdGhlIHZhbHVlIGZyb20gdGhlIG91dGVyIGA8ZGl2PmAgZWxlbWVudC5cbiAqXG4gKiBJZiB5b3UgYXJlIGNyZWF0aW5nIGEgcmV1c2FibGUgY29tcG9uZW50IHRoZW4geW91IHNob3VsZCBiZSBjYXJlZnVsIHdoZW4gdXNpbmcgYFwiKlwiOiBcIiRpbmhlcml0XCJgXG4gKiBzaW5jZSB5b3UgbWF5IGluYWR2ZXJ0ZW50bHkgaW5oZXJpdCBhIHNldHRpbmcgaW4gdGhlIGZ1dHVyZSB0aGF0IGNoYW5nZXMgdGhlIGJlaGF2aW9yIG9mIHlvdXIgY29tcG9uZW50LlxuICpcbiAqXG4gKiAjIyBUcmlnZ2VyaW5nIGFuZCBkZWJvdW5jaW5nIG1vZGVsIHVwZGF0ZXNcbiAqXG4gKiBUaGUgYHVwZGF0ZU9uYCBhbmQgYGRlYm91bmNlYCBwcm9wZXJ0aWVzIGFsbG93IHlvdSB0byBzcGVjaWZ5IGEgY3VzdG9tIGxpc3Qgb2YgZXZlbnRzIHRoYXQgd2lsbFxuICogdHJpZ2dlciBhIG1vZGVsIHVwZGF0ZSBhbmQvb3IgYSBkZWJvdW5jaW5nIGRlbGF5IHNvIHRoYXQgdGhlIGFjdHVhbCB1cGRhdGUgb25seSB0YWtlcyBwbGFjZSB3aGVuXG4gKiBhIHRpbWVyIGV4cGlyZXM7IHRoaXMgdGltZXIgd2lsbCBiZSByZXNldCBhZnRlciBhbm90aGVyIGNoYW5nZSB0YWtlcyBwbGFjZS5cbiAqXG4gKiBHaXZlbiB0aGUgbmF0dXJlIG9mIGBuZ01vZGVsT3B0aW9uc2AsIHRoZSB2YWx1ZSBkaXNwbGF5ZWQgaW5zaWRlIGlucHV0IGZpZWxkcyBpbiB0aGUgdmlldyBtaWdodFxuICogYmUgZGlmZmVyZW50IGZyb20gdGhlIHZhbHVlIGluIHRoZSBhY3R1YWwgbW9kZWwuIFRoaXMgbWVhbnMgdGhhdCBpZiB5b3UgdXBkYXRlIHRoZSBtb2RlbCB5b3VcbiAqIHNob3VsZCBhbHNvIGludm9rZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWV9IG9uIHRoZSByZWxldmFudCBpbnB1dCBmaWVsZCBpblxuICogb3JkZXIgdG8gbWFrZSBzdXJlIGl0IGlzIHN5bmNocm9uaXplZCB3aXRoIHRoZSBtb2RlbCBhbmQgdGhhdCBhbnkgZGVib3VuY2VkIGFjdGlvbiBpcyBjYW5jZWxlZC5cbiAqXG4gKiBUaGUgZWFzaWVzdCB3YXkgdG8gcmVmZXJlbmNlIHRoZSBjb250cm9sJ3Mge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHJvbGxiYWNrVmlld1ZhbHVlfVxuICogbWV0aG9kIGlzIGJ5IG1ha2luZyBzdXJlIHRoZSBpbnB1dCBpcyBwbGFjZWQgaW5zaWRlIGEgZm9ybSB0aGF0IGhhcyBhIGBuYW1lYCBhdHRyaWJ1dGUuIFRoaXMgaXNcbiAqIGltcG9ydGFudCBiZWNhdXNlIGBmb3JtYCBjb250cm9sbGVycyBhcmUgcHVibGlzaGVkIHRvIHRoZSByZWxhdGVkIHNjb3BlIHVuZGVyIHRoZSBuYW1lIGluIHRoZWlyXG4gKiBgbmFtZWAgYXR0cmlidXRlLlxuICpcbiAqIEFueSBwZW5kaW5nIGNoYW5nZXMgd2lsbCB0YWtlIHBsYWNlIGltbWVkaWF0ZWx5IHdoZW4gYW4gZW5jbG9zaW5nIGZvcm0gaXMgc3VibWl0dGVkIHZpYSB0aGVcbiAqIGBzdWJtaXRgIGV2ZW50LiBOb3RlIHRoYXQgYG5nQ2xpY2tgIGV2ZW50cyB3aWxsIG9jY3VyIGJlZm9yZSB0aGUgbW9kZWwgaXMgdXBkYXRlZC4gVXNlIGBuZ1N1Ym1pdGBcbiAqIHRvIGhhdmUgYWNjZXNzIHRvIHRoZSB1cGRhdGVkIG1vZGVsLlxuICpcbiAqICMjIyBPdmVycmlkaW5nIGltbWVkaWF0ZSB1cGRhdGVzXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBvdmVycmlkZSBpbW1lZGlhdGUgdXBkYXRlcy4gQ2hhbmdlcyBvbiB0aGUgaW5wdXRzIHdpdGhpbiB0aGVcbiAqIGZvcm0gd2lsbCB1cGRhdGUgdGhlIG1vZGVsIG9ubHkgd2hlbiB0aGUgY29udHJvbCBsb3NlcyBmb2N1cyAoYmx1ciBldmVudCkuIElmIGBlc2NhcGVgIGtleSBpc1xuICogcHJlc3NlZCB3aGlsZSB0aGUgaW5wdXQgZmllbGQgaXMgZm9jdXNlZCwgdGhlIHZhbHVlIGlzIHJlc2V0IHRvIHRoZSB2YWx1ZSBpbiB0aGUgY3VycmVudCBtb2RlbC5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbE9wdGlvbnMtZGlyZWN0aXZlLWJsdXJcIiBtb2R1bGU9XCJvcHRpb25zRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAqICAgICAgICAgPGxhYmVsPlxuICogICAgICAgICAgIE5hbWU6XG4gKiAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCJcbiAqICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxuICogICAgICAgICAgICAgICAgICBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2JsdXInIH1cIlxuICogICAgICAgICAgICAgICAgICBuZy1rZXl1cD1cImNhbmNlbCgkZXZlbnQpXCIgLz5cbiAqICAgICAgICAgPC9sYWJlbD48YnIgLz5cbiAqICAgICAgICAgPGxhYmVsPlxuICogICAgICAgICAgIE90aGVyIGRhdGE6XG4gKiAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyLmRhdGFcIiAvPlxuICogICAgICAgICA8L2xhYmVsPjxiciAvPlxuICogICAgICAgPC9mb3JtPlxuICogICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lXCI+PC9zcGFuPjwvcHJlPlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgICBhbmd1bGFyLm1vZHVsZSgnb3B0aW9uc0V4YW1wbGUnLCBbXSlcbiAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICRzY29wZS51c2VyID0geyBuYW1lOiAnc2F5JywgZGF0YTogJycgfTtcbiAqXG4gKiAgICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbihlKSB7XG4gKiAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcbiAqICAgICAgICAgICAgICRzY29wZS51c2VyRm9ybS51c2VyTmFtZS4kcm9sbGJhY2tWaWV3VmFsdWUoKTtcbiAqICAgICAgICAgICB9XG4gKiAgICAgICAgIH07XG4gKiAgICAgICB9XSk7XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygndXNlci5uYW1lJykpO1xuICogICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubmFtZScpKTtcbiAqICAgICB2YXIgb3RoZXIgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLmRhdGEnKSk7XG4gKlxuICogICAgIGl0KCdzaG91bGQgYWxsb3cgY3VzdG9tIGV2ZW50cycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgaW5wdXQuc2VuZEtleXMoJyBoZWxsbycpO1xuICogICAgICAgaW5wdXQuY2xpY2soKTtcbiAqICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3NheScpO1xuICogICAgICAgb3RoZXIuY2xpY2soKTtcbiAqICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3NheSBoZWxsbycpO1xuICogICAgIH0pO1xuICpcbiAqICAgICBpdCgnc2hvdWxkICRyb2xsYmFja1ZpZXdWYWx1ZSB3aGVuIG1vZGVsIGNoYW5nZXMnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGlucHV0LnNlbmRLZXlzKCcgaGVsbG8nKTtcbiAqICAgICAgIGV4cGVjdChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJ3NheSBoZWxsbycpO1xuICogICAgICAgaW5wdXQuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuRVNDQVBFKTtcbiAqICAgICAgIGV4cGVjdChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJ3NheScpO1xuICogICAgICAgb3RoZXIuY2xpY2soKTtcbiAqICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3NheScpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogIyMjIERlYm91bmNpbmcgdXBkYXRlc1xuICpcbiAqIFRoZSBuZXh0IGV4YW1wbGUgc2hvd3MgaG93IHRvIGRlYm91bmNlIG1vZGVsIGNoYW5nZXMuIE1vZGVsIHdpbGwgYmUgdXBkYXRlZCBvbmx5IDEgc2VjIGFmdGVyIGxhc3QgY2hhbmdlLlxuICogSWYgdGhlIGBDbGVhcmAgYnV0dG9uIGlzIHByZXNzZWQsIGFueSBkZWJvdW5jZWQgYWN0aW9uIGlzIGNhbmNlbGVkIGFuZCB0aGUgdmFsdWUgYmVjb21lcyBlbXB0eS5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbE9wdGlvbnMtZGlyZWN0aXZlLWRlYm91bmNlXCIgbW9kdWxlPVwib3B0aW9uc0V4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XG4gKiAgICAgICAgIE5hbWU6XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXG4gKiAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXG4gKiAgICAgICAgICAgICAgICBuZy1tb2RlbC1vcHRpb25zPVwieyBkZWJvdW5jZTogMTAwMCB9XCIgLz5cbiAqICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInVzZXJGb3JtLnVzZXJOYW1lLiRyb2xsYmFja1ZpZXdWYWx1ZSgpOyB1c2VyLm5hbWU9JydcIj5DbGVhcjwvYnV0dG9uPjxiciAvPlxuICogICAgICAgPC9mb3JtPlxuICogICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lXCI+PC9zcGFuPjwvcHJlPlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgICBhbmd1bGFyLm1vZHVsZSgnb3B0aW9uc0V4YW1wbGUnLCBbXSlcbiAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICRzY29wZS51c2VyID0geyBuYW1lOiAnc2F5JyB9O1xuICogICAgICAgfV0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqICMjIE1vZGVsIHVwZGF0ZXMgYW5kIHZhbGlkYXRpb25cbiAqXG4gKiBUaGUgZGVmYXVsdCBiZWhhdmlvdXIgaW4gYG5nTW9kZWxgIGlzIHRoYXQgdGhlIG1vZGVsIHZhbHVlIGlzIHNldCB0byBgdW5kZWZpbmVkYCB3aGVuIHRoZVxuICogdmFsaWRhdGlvbiBkZXRlcm1pbmVzIHRoYXQgdGhlIHZhbHVlIGlzIGludmFsaWQuIEJ5IHNldHRpbmcgdGhlIGBhbGxvd0ludmFsaWRgIHByb3BlcnR5IHRvIHRydWUsXG4gKiB0aGUgbW9kZWwgd2lsbCBzdGlsbCBiZSB1cGRhdGVkIGV2ZW4gaWYgdGhlIHZhbHVlIGlzIGludmFsaWQuXG4gKlxuICpcbiAqICMjIENvbm5lY3RpbmcgdG8gdGhlIHNjb3BlXG4gKlxuICogQnkgc2V0dGluZyB0aGUgYGdldHRlclNldHRlcmAgcHJvcGVydHkgdG8gdHJ1ZSB5b3UgYXJlIHRlbGxpbmcgbmdNb2RlbCB0aGF0IHRoZSBgbmdNb2RlbGAgZXhwcmVzc2lvblxuICogb24gdGhlIHNjb3BlIHJlZmVycyB0byBhIFwiZ2V0dGVyL3NldHRlclwiIGZ1bmN0aW9uIHJhdGhlciB0aGFuIHRoZSB2YWx1ZSBpdHNlbGYuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBiaW5kIHRvIGdldHRlci9zZXR0ZXJzOlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZ2V0dGVyLXNldHRlclwiIG1vZHVsZT1cImdldHRlclNldHRlckV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XG4gKiAgICAgICAgIDxsYWJlbD5cbiAqICAgICAgICAgICBOYW1lOlxuICogICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcbiAqICAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cIiAvPlxuICogICAgICAgICA8L2xhYmVsPlxuICogICAgICAgPC9mb3JtPlxuICogICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lKClcIj48L3NwYW4+PC9wcmU+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdnZXR0ZXJTZXR0ZXJFeGFtcGxlJywgW10pXG4gKiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICB2YXIgX25hbWUgPSAnQnJpYW4nO1xuICogICAgICAgICAkc2NvcGUudXNlciA9IHtcbiAqICAgICAgICAgICBuYW1lOiBmdW5jdGlvbihuZXdOYW1lKSB7XG4gKiAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5pc0RlZmluZWQobmV3TmFtZSkgPyAoX25hbWUgPSBuZXdOYW1lKSA6IF9uYW1lO1xuICogICAgICAgICAgIH1cbiAqICAgICAgICAgfTtcbiAqICAgICAgIH1dKTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqXG4gKiAjIyBTcGVjaWZ5aW5nIHRpbWV6b25lc1xuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSB0aGUgdGltZXpvbmUgdGhhdCBkYXRlL3RpbWUgaW5wdXQgZGlyZWN0aXZlcyBleHBlY3QgYnkgcHJvdmlkaW5nIGl0cyBuYW1lIGluIHRoZVxuICogYHRpbWV6b25lYCBwcm9wZXJ0eS5cbiAqXG4gKlxuICogIyMgUHJvZ3JhbW1hdGljYWxseSBjaGFuZ2luZyBvcHRpb25zXG4gKlxuICogVGhlIGBuZ01vZGVsT3B0aW9uc2AgZXhwcmVzc2lvbiBpcyBvbmx5IGV2YWx1YXRlZCBvbmNlIHdoZW4gdGhlIGRpcmVjdGl2ZSBpcyBsaW5rZWQ7IGl0IGlzIG5vdFxuICogd2F0Y2hlZCBmb3IgY2hhbmdlcy4gSG93ZXZlciwgaXQgaXMgcG9zc2libGUgdG8gb3ZlcnJpZGUgdGhlIG9wdGlvbnMgb24gYSBzaW5nbGVcbiAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyfSBpbnN0YW5jZSB3aXRoXG4gKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkb3ZlcnJpZGVNb2RlbE9wdGlvbnMgYE5nTW9kZWxDb250cm9sbGVyIyRvdmVycmlkZU1vZGVsT3B0aW9ucygpYH0uXG4gKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBuZ01vZGVsT3B0aW9ucyBvcHRpb25zIHRvIGFwcGx5IHRvIHtAbGluayBuZ01vZGVsfSBkaXJlY3RpdmVzIG9uIHRoaXMgZWxlbWVudCBhbmRcbiAqICAgYW5kIGl0cyBkZXNjZW5kZW50cy4gVmFsaWQga2V5cyBhcmU6XG4gKiAgIC0gYHVwZGF0ZU9uYDogc3RyaW5nIHNwZWNpZnlpbmcgd2hpY2ggZXZlbnQgc2hvdWxkIHRoZSBpbnB1dCBiZSBib3VuZCB0by4gWW91IGNhbiBzZXQgc2V2ZXJhbFxuICogICAgIGV2ZW50cyB1c2luZyBhbiBzcGFjZSBkZWxpbWl0ZWQgbGlzdC4gVGhlcmUgaXMgYSBzcGVjaWFsIGV2ZW50IGNhbGxlZCBgZGVmYXVsdGAgdGhhdFxuICogICAgIG1hdGNoZXMgdGhlIGRlZmF1bHQgZXZlbnRzIGJlbG9uZ2luZyB0byB0aGUgY29udHJvbC4gVGhlc2UgYXJlIHRoZSBldmVudHMgdGhhdCBhcmUgYm91bmQgdG9cbiAqICAgICB0aGUgY29udHJvbCwgYW5kIHdoZW4gZmlyZWQsIHVwZGF0ZSB0aGUgYCR2aWV3VmFsdWVgIHZpYSBgJHNldFZpZXdWYWx1ZWAuXG4gKlxuICogICAgIGBuZ01vZGVsT3B0aW9uc2AgY29uc2lkZXJzIGV2ZXJ5IGV2ZW50IHRoYXQgaXMgbm90IGxpc3RlZCBpbiBgdXBkYXRlT25gIGEgXCJkZWZhdWx0XCIgZXZlbnQsXG4gKiAgICAgc2luY2UgZGlmZmVyZW50IGNvbnRyb2wgdHlwZXMgdXNlIGRpZmZlcmVudCBkZWZhdWx0IGV2ZW50cy5cbiAqXG4gKiAgICAgU2VlIGFsc28gdGhlIHNlY3Rpb24ge0BsaW5rIG5nTW9kZWxPcHRpb25zI3RyaWdnZXJpbmctYW5kLWRlYm91bmNpbmctbW9kZWwtdXBkYXRlc1xuICogICAgIFRyaWdnZXJpbmcgYW5kIGRlYm91bmNpbmcgbW9kZWwgdXBkYXRlc30uXG4gKlxuICogICAtIGBkZWJvdW5jZWA6IGludGVnZXIgdmFsdWUgd2hpY2ggY29udGFpbnMgdGhlIGRlYm91bmNlIG1vZGVsIHVwZGF0ZSB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuIEFcbiAqICAgICB2YWx1ZSBvZiAwIHRyaWdnZXJzIGFuIGltbWVkaWF0ZSB1cGRhdGUuIElmIGFuIG9iamVjdCBpcyBzdXBwbGllZCBpbnN0ZWFkLCB5b3UgY2FuIHNwZWNpZnkgYVxuICogICAgIGN1c3RvbSB2YWx1ZSBmb3IgZWFjaCBldmVudC4gRm9yIGV4YW1wbGU6XG4gKiAgICAgYGBgXG4gKiAgICAgbmctbW9kZWwtb3B0aW9ucz1cIntcbiAqICAgICAgIHVwZGF0ZU9uOiAnZGVmYXVsdCBibHVyIGNsaWNrJyxcbiAqICAgICAgIGRlYm91bmNlOiB7ICdkZWZhdWx0JzogNTAwLCAnYmx1cic6IDAgfVxuICogICAgIH1cIlxuICogICAgIGBgYFxuICpcbiAqICAgICBcImRlZmF1bHRcIiBhbHNvIGFwcGxpZXMgdG8gYWxsIGV2ZW50cyB0aGF0IGFyZSBsaXN0ZWQgaW4gYHVwZGF0ZU9uYCBidXQgYXJlIG5vdFxuICogICAgIGxpc3RlZCBpbiBgZGVib3VuY2VgLCBpLmUuIFwiY2xpY2tcIiB3b3VsZCBhbHNvIGJlIGRlYm91bmNlZCBieSA1MDAgbWlsbGlzZWNvbmRzLlxuICpcbiAqICAgLSBgYWxsb3dJbnZhbGlkYDogYm9vbGVhbiB2YWx1ZSB3aGljaCBpbmRpY2F0ZXMgdGhhdCB0aGUgbW9kZWwgY2FuIGJlIHNldCB3aXRoIHZhbHVlcyB0aGF0IGRpZFxuICogICAgIG5vdCB2YWxpZGF0ZSBjb3JyZWN0bHkgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiBzZXR0aW5nIHRoZSBtb2RlbCB0byB1bmRlZmluZWQuXG4gKiAgIC0gYGdldHRlclNldHRlcmA6IGJvb2xlYW4gdmFsdWUgd2hpY2ggZGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0byB0cmVhdCBmdW5jdGlvbnMgYm91bmQgdG9cbiAqICAgICBgbmdNb2RlbGAgYXMgZ2V0dGVycy9zZXR0ZXJzLlxuICogICAtIGB0aW1lem9uZWA6IERlZmluZXMgdGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBmb3JcbiAqICAgICBgPGlucHV0IHR5cGU9XCJkYXRlXCIgLz5gLCBgPGlucHV0IHR5cGU9XCJ0aW1lXCIgLz5gLCAuLi4gLiBJdCB1bmRlcnN0YW5kcyBVVEMvR01UIGFuZCB0aGVcbiAqICAgICBjb250aW5lbnRhbCBVUyB0aW1lIHpvbmUgYWJicmV2aWF0aW9ucywgYnV0IGZvciBnZW5lcmFsIHVzZSwgdXNlIGEgdGltZSB6b25lIG9mZnNldCwgZm9yXG4gKiAgICAgZXhhbXBsZSwgYCcrMDQzMCdgICg0IGhvdXJzLCAzMCBtaW51dGVzIGVhc3Qgb2YgdGhlIEdyZWVud2ljaCBtZXJpZGlhbilcbiAqICAgICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIgd2lsbCBiZSB1c2VkLlxuICpcbiAqL1xudmFyIG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gIE5nTW9kZWxPcHRpb25zQ29udHJvbGxlci4kaW5qZWN0ID0gWyckYXR0cnMnLCAnJHNjb3BlJ107XG4gIGZ1bmN0aW9uIE5nTW9kZWxPcHRpb25zQ29udHJvbGxlcigkYXR0cnMsICRzY29wZSkge1xuICAgIHRoaXMuJCRhdHRycyA9ICRhdHRycztcbiAgICB0aGlzLiQkc2NvcGUgPSAkc2NvcGU7XG4gIH1cbiAgTmdNb2RlbE9wdGlvbnNDb250cm9sbGVyLnByb3RvdHlwZSA9IHtcbiAgICAkb25Jbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJlbnRPcHRpb25zID0gdGhpcy5wYXJlbnRDdHJsID8gdGhpcy5wYXJlbnRDdHJsLiRvcHRpb25zIDogZGVmYXVsdE1vZGVsT3B0aW9ucztcbiAgICAgIHZhciBtb2RlbE9wdGlvbnNEZWZpbml0aW9uID0gdGhpcy4kJHNjb3BlLiRldmFsKHRoaXMuJCRhdHRycy5uZ01vZGVsT3B0aW9ucyk7XG5cbiAgICAgIHRoaXMuJG9wdGlvbnMgPSBwYXJlbnRPcHRpb25zLmNyZWF0ZUNoaWxkKG1vZGVsT3B0aW9uc0RlZmluaXRpb24pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgLy8gbmdNb2RlbE9wdGlvbnMgbmVlZHMgdG8gcnVuIGJlZm9yZSBuZ01vZGVsIGFuZCBpbnB1dCBkaXJlY3RpdmVzXG4gICAgcHJpb3JpdHk6IDEwLFxuICAgIHJlcXVpcmU6IHtwYXJlbnRDdHJsOiAnP15ebmdNb2RlbE9wdGlvbnMnfSxcbiAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgIGNvbnRyb2xsZXI6IE5nTW9kZWxPcHRpb25zQ29udHJvbGxlclxuICB9O1xufTtcblxuXG4vLyBzaGFsbG93IGNvcHkgb3ZlciB2YWx1ZXMgZnJvbSBgc3JjYCB0aGF0IGFyZSBub3QgYWxyZWFkeSBzcGVjaWZpZWQgb24gYGRzdGBcbmZ1bmN0aW9uIGRlZmF1bHRzKGRzdCwgc3JjKSB7XG4gIGZvckVhY2goc3JjLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgaWYgKCFpc0RlZmluZWQoZHN0W2tleV0pKSB7XG4gICAgICBkc3Rba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdOb25CaW5kYWJsZVxuICogQHJlc3RyaWN0IEFDXG4gKiBAcHJpb3JpdHkgMTAwMFxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nTm9uQmluZGFibGVgIGRpcmVjdGl2ZSB0ZWxscyBBbmd1bGFySlMgbm90IHRvIGNvbXBpbGUgb3IgYmluZCB0aGUgY29udGVudHMgb2YgdGhlIGN1cnJlbnRcbiAqIERPTSBlbGVtZW50LCBpbmNsdWRpbmcgZGlyZWN0aXZlcyBvbiB0aGUgZWxlbWVudCBpdHNlbGYgdGhhdCBoYXZlIGEgbG93ZXIgcHJpb3JpdHkgdGhhblxuICogYG5nTm9uQmluZGFibGVgLiBUaGlzIGlzIHVzZWZ1bCBpZiB0aGUgZWxlbWVudCBjb250YWlucyB3aGF0IGFwcGVhcnMgdG8gYmUgQW5ndWxhckpTIGRpcmVjdGl2ZXNcbiAqIGFuZCBiaW5kaW5ncyBidXQgd2hpY2ggc2hvdWxkIGJlIGlnbm9yZWQgYnkgQW5ndWxhckpTLiBUaGlzIGNvdWxkIGJlIHRoZSBjYXNlIGlmIHlvdSBoYXZlIGEgc2l0ZVxuICogdGhhdCBkaXNwbGF5cyBzbmlwcGV0cyBvZiBjb2RlLCBmb3IgaW5zdGFuY2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIEluIHRoaXMgZXhhbXBsZSB0aGVyZSBhcmUgdHdvIGxvY2F0aW9ucyB3aGVyZSBhIHNpbXBsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmcgKGB7e319YCkgaXMgcHJlc2VudCxcbiAqIGJ1dCB0aGUgb25lIHdyYXBwZWQgaW4gYG5nTm9uQmluZGFibGVgIGlzIGxlZnQgYWxvbmUuXG4gKlxuICA8ZXhhbXBsZSBuYW1lPVwibmctbm9uLWJpbmRhYmxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXY+Tm9ybWFsOiB7ezEgKyAyfX08L2Rpdj5cbiAgICAgIDxkaXYgbmctbm9uLWJpbmRhYmxlPklnbm9yZWQ6IHt7MSArIDJ9fTwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgIGl0KCdzaG91bGQgY2hlY2sgbmctbm9uLWJpbmRhYmxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnMSArIDInKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzMnKTtcbiAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCdkaXYnKSkubGFzdCgpLmdldFRleHQoKSkudG9NYXRjaCgvMSBcXCsgMi8pO1xuICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nTm9uQmluZGFibGVEaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7IHRlcm1pbmFsOiB0cnVlLCBwcmlvcml0eTogMTAwMCB9KTtcblxuLyogZXhwb3J0ZWQgbmdPcHRpb25zRGlyZWN0aXZlICovXG5cbi8qIGdsb2JhbCBqcUxpdGVSZW1vdmUgKi9cblxudmFyIG5nT3B0aW9uc01pbkVyciA9IG1pbkVycignbmdPcHRpb25zJyk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdPcHRpb25zXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoZSBgbmdPcHRpb25zYCBhdHRyaWJ1dGUgY2FuIGJlIHVzZWQgdG8gZHluYW1pY2FsbHkgZ2VuZXJhdGUgYSBsaXN0IG9mIGA8b3B0aW9uPmBcbiAqIGVsZW1lbnRzIGZvciB0aGUgYDxzZWxlY3Q+YCBlbGVtZW50IHVzaW5nIHRoZSBhcnJheSBvciBvYmplY3Qgb2J0YWluZWQgYnkgZXZhbHVhdGluZyB0aGVcbiAqIGBuZ09wdGlvbnNgIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvbi5cbiAqXG4gKiBJbiBtYW55IGNhc2VzLCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IG5nUmVwZWF0fSBjYW4gYmUgdXNlZCBvbiBgPG9wdGlvbj5gIGVsZW1lbnRzIGluc3RlYWQgb2ZcbiAqIGBuZ09wdGlvbnNgIHRvIGFjaGlldmUgYSBzaW1pbGFyIHJlc3VsdC4gSG93ZXZlciwgYG5nT3B0aW9uc2AgcHJvdmlkZXMgc29tZSBiZW5lZml0czpcbiAqIC0gbW9yZSBmbGV4aWJpbGl0eSBpbiBob3cgdGhlIGA8c2VsZWN0PmAncyBtb2RlbCBpcyBhc3NpZ25lZCB2aWEgdGhlIGBzZWxlY3RgICoqYGFzYCoqIHBhcnQgb2YgdGhlXG4gKiBjb21wcmVoZW5zaW9uIGV4cHJlc3Npb25cbiAqIC0gcmVkdWNlZCBtZW1vcnkgY29uc3VtcHRpb24gYnkgbm90IGNyZWF0aW5nIGEgbmV3IHNjb3BlIGZvciBlYWNoIHJlcGVhdGVkIGluc3RhbmNlXG4gKiAtIGluY3JlYXNlZCByZW5kZXIgc3BlZWQgYnkgY3JlYXRpbmcgdGhlIG9wdGlvbnMgaW4gYSBkb2N1bWVudEZyYWdtZW50IGluc3RlYWQgb2YgaW5kaXZpZHVhbGx5XG4gKlxuICogV2hlbiBhbiBpdGVtIGluIHRoZSBgPHNlbGVjdD5gIG1lbnUgaXMgc2VsZWN0ZWQsIHRoZSBhcnJheSBlbGVtZW50IG9yIG9iamVjdCBwcm9wZXJ0eVxuICogcmVwcmVzZW50ZWQgYnkgdGhlIHNlbGVjdGVkIG9wdGlvbiB3aWxsIGJlIGJvdW5kIHRvIHRoZSBtb2RlbCBpZGVudGlmaWVkIGJ5IHRoZSBgbmdNb2RlbGBcbiAqIGRpcmVjdGl2ZS5cbiAqXG4gKiBPcHRpb25hbGx5LCBhIHNpbmdsZSBoYXJkLWNvZGVkIGA8b3B0aW9uPmAgZWxlbWVudCwgd2l0aCB0aGUgdmFsdWUgc2V0IHRvIGFuIGVtcHR5IHN0cmluZywgY2FuXG4gKiBiZSBuZXN0ZWQgaW50byB0aGUgYDxzZWxlY3Q+YCBlbGVtZW50LiBUaGlzIGVsZW1lbnQgd2lsbCB0aGVuIHJlcHJlc2VudCB0aGUgYG51bGxgIG9yIFwibm90IHNlbGVjdGVkXCJcbiAqIG9wdGlvbi4gU2VlIGV4YW1wbGUgYmVsb3cgZm9yIGRlbW9uc3RyYXRpb24uXG4gKlxuICogIyMgQ29tcGxleCBNb2RlbHMgKG9iamVjdHMgb3IgY29sbGVjdGlvbnMpXG4gKlxuICogQnkgZGVmYXVsdCwgYG5nTW9kZWxgIHdhdGNoZXMgdGhlIG1vZGVsIGJ5IHJlZmVyZW5jZSwgbm90IHZhbHVlLiBUaGlzIGlzIGltcG9ydGFudCB0byBrbm93IHdoZW5cbiAqIGJpbmRpbmcgdGhlIHNlbGVjdCB0byBhIG1vZGVsIHRoYXQgaXMgYW4gb2JqZWN0IG9yIGEgY29sbGVjdGlvbi5cbiAqXG4gKiBPbmUgaXNzdWUgb2NjdXJzIGlmIHlvdSB3YW50IHRvIHByZXNlbGVjdCBhbiBvcHRpb24uIEZvciBleGFtcGxlLCBpZiB5b3Ugc2V0XG4gKiB0aGUgbW9kZWwgdG8gYW4gb2JqZWN0IHRoYXQgaXMgZXF1YWwgdG8gYW4gb2JqZWN0IGluIHlvdXIgY29sbGVjdGlvbiwgYG5nT3B0aW9uc2Agd29uJ3QgYmUgYWJsZSB0byBzZXQgdGhlIHNlbGVjdGlvbixcbiAqIGJlY2F1c2UgdGhlIG9iamVjdHMgYXJlIG5vdCBpZGVudGljYWwuIFNvIGJ5IGRlZmF1bHQsIHlvdSBzaG91bGQgYWx3YXlzIHJlZmVyZW5jZSB0aGUgaXRlbSBpbiB5b3VyIGNvbGxlY3Rpb25cbiAqIGZvciBwcmVzZWxlY3Rpb25zLCBlLmcuOiBgJHNjb3BlLnNlbGVjdGVkID0gJHNjb3BlLmNvbGxlY3Rpb25bM11gLlxuICpcbiAqIEFub3RoZXIgc29sdXRpb24gaXMgdG8gdXNlIGEgYHRyYWNrIGJ5YCBjbGF1c2UsIGJlY2F1c2UgdGhlbiBgbmdPcHRpb25zYCB3aWxsIHRyYWNrIHRoZSBpZGVudGl0eVxuICogb2YgdGhlIGl0ZW0gbm90IGJ5IHJlZmVyZW5jZSwgYnV0IGJ5IHRoZSByZXN1bHQgb2YgdGhlIGB0cmFjayBieWAgZXhwcmVzc2lvbi4gRm9yIGV4YW1wbGUsIGlmIHlvdXJcbiAqIGNvbGxlY3Rpb24gaXRlbXMgaGF2ZSBhbiBpZCBwcm9wZXJ0eSwgeW91IHdvdWxkIGB0cmFjayBieSBpdGVtLmlkYC5cbiAqXG4gKiBBIGRpZmZlcmVudCBpc3N1ZSB3aXRoIG9iamVjdHMgb3IgY29sbGVjdGlvbnMgaXMgdGhhdCBuZ01vZGVsIHdvbid0IGRldGVjdCBpZiBhbiBvYmplY3QgcHJvcGVydHkgb3JcbiAqIGEgY29sbGVjdGlvbiBpdGVtIGNoYW5nZXMuIEZvciB0aGF0IHJlYXNvbiwgYG5nT3B0aW9uc2AgYWRkaXRpb25hbGx5IHdhdGNoZXMgdGhlIG1vZGVsIHVzaW5nXG4gKiBgJHdhdGNoQ29sbGVjdGlvbmAsIHdoZW4gdGhlIGV4cHJlc3Npb24gY29udGFpbnMgYSBgdHJhY2sgYnlgIGNsYXVzZSBvciB0aGUgdGhlIHNlbGVjdCBoYXMgdGhlIGBtdWx0aXBsZWAgYXR0cmlidXRlLlxuICogVGhpcyBhbGxvd3MgbmdPcHRpb25zIHRvIHRyaWdnZXIgYSByZS1yZW5kZXJpbmcgb2YgdGhlIG9wdGlvbnMgZXZlbiBpZiB0aGUgYWN0dWFsIG9iamVjdC9jb2xsZWN0aW9uXG4gKiBoYXMgbm90IGNoYW5nZWQgaWRlbnRpdHksIGJ1dCBvbmx5IGEgcHJvcGVydHkgb24gdGhlIG9iamVjdCBvciBhbiBpdGVtIGluIHRoZSBjb2xsZWN0aW9uIGNoYW5nZXMuXG4gKlxuICogTm90ZSB0aGF0IGAkd2F0Y2hDb2xsZWN0aW9uYCBkb2VzIGEgc2hhbGxvdyBjb21wYXJpc29uIG9mIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBvYmplY3QgKG9yIHRoZSBpdGVtcyBpbiB0aGUgY29sbGVjdGlvblxuICogaWYgdGhlIG1vZGVsIGlzIGFuIGFycmF5KS4gVGhpcyBtZWFucyB0aGF0IGNoYW5naW5nIGEgcHJvcGVydHkgZGVlcGVyIHRoYW4gdGhlIGZpcnN0IGxldmVsIGluc2lkZSB0aGVcbiAqIG9iamVjdC9jb2xsZWN0aW9uIHdpbGwgbm90IHRyaWdnZXIgYSByZS1yZW5kZXJpbmcuXG4gKlxuICogIyMgYHNlbGVjdGAgKipgYXNgKipcbiAqXG4gKiBVc2luZyBgc2VsZWN0YCAqKmBhc2AqKiB3aWxsIGJpbmQgdGhlIHJlc3VsdCBvZiB0aGUgYHNlbGVjdGAgZXhwcmVzc2lvbiB0byB0aGUgbW9kZWwsIGJ1dFxuICogdGhlIHZhbHVlIG9mIHRoZSBgPHNlbGVjdD5gIGFuZCBgPG9wdGlvbj5gIGh0bWwgZWxlbWVudHMgd2lsbCBiZSBlaXRoZXIgdGhlIGluZGV4IChmb3IgYXJyYXkgZGF0YSBzb3VyY2VzKVxuICogb3IgcHJvcGVydHkgbmFtZSAoZm9yIG9iamVjdCBkYXRhIHNvdXJjZXMpIG9mIHRoZSB2YWx1ZSB3aXRoaW4gdGhlIGNvbGxlY3Rpb24uIElmIGEgKipgdHJhY2sgYnlgKiogZXhwcmVzc2lvblxuICogaXMgdXNlZCwgdGhlIHJlc3VsdCBvZiB0aGF0IGV4cHJlc3Npb24gd2lsbCBiZSBzZXQgYXMgdGhlIHZhbHVlIG9mIHRoZSBgb3B0aW9uYCBhbmQgYHNlbGVjdGAgZWxlbWVudHMuXG4gKlxuICpcbiAqICMjIyBgc2VsZWN0YCAqKmBhc2AqKiBhbmQgKipgdHJhY2sgYnlgKipcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogQmUgY2FyZWZ1bCB3aGVuIHVzaW5nIGBzZWxlY3RgICoqYGFzYCoqIGFuZCAqKmB0cmFjayBieWAqKiBpbiB0aGUgc2FtZSBleHByZXNzaW9uLlxuICogPC9kaXY+XG4gKlxuICogR2l2ZW4gdGhpcyBhcnJheSBvZiBpdGVtcyBvbiB0aGUgJHNjb3BlOlxuICpcbiAqIGBgYGpzXG4gKiAkc2NvcGUuaXRlbXMgPSBbe1xuICogICBpZDogMSxcbiAqICAgbGFiZWw6ICdhTGFiZWwnLFxuICogICBzdWJJdGVtOiB7IG5hbWU6ICdhU3ViSXRlbScgfVxuICogfSwge1xuICogICBpZDogMixcbiAqICAgbGFiZWw6ICdiTGFiZWwnLFxuICogICBzdWJJdGVtOiB7IG5hbWU6ICdiU3ViSXRlbScgfVxuICogfV07XG4gKiBgYGBcbiAqXG4gKiBUaGlzIHdpbGwgd29yazpcbiAqXG4gKiBgYGBodG1sXG4gKiA8c2VsZWN0IG5nLW9wdGlvbnM9XCJpdGVtIGFzIGl0ZW0ubGFiZWwgZm9yIGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgaXRlbS5pZFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRcIj48L3NlbGVjdD5cbiAqIGBgYFxuICogYGBganNcbiAqICRzY29wZS5zZWxlY3RlZCA9ICRzY29wZS5pdGVtc1swXTtcbiAqIGBgYFxuICpcbiAqIGJ1dCB0aGlzIHdpbGwgbm90IHdvcms6XG4gKlxuICogYGBgaHRtbFxuICogPHNlbGVjdCBuZy1vcHRpb25zPVwiaXRlbS5zdWJJdGVtIGFzIGl0ZW0ubGFiZWwgZm9yIGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgaXRlbS5pZFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRcIj48L3NlbGVjdD5cbiAqIGBgYFxuICogYGBganNcbiAqICRzY29wZS5zZWxlY3RlZCA9ICRzY29wZS5pdGVtc1swXS5zdWJJdGVtO1xuICogYGBgXG4gKlxuICogSW4gYm90aCBleGFtcGxlcywgdGhlICoqYHRyYWNrIGJ5YCoqIGV4cHJlc3Npb24gaXMgYXBwbGllZCBzdWNjZXNzZnVsbHkgdG8gZWFjaCBgaXRlbWAgaW4gdGhlXG4gKiBgaXRlbXNgIGFycmF5LiBCZWNhdXNlIHRoZSBzZWxlY3RlZCBvcHRpb24gaGFzIGJlZW4gc2V0IHByb2dyYW1tYXRpY2FsbHkgaW4gdGhlIGNvbnRyb2xsZXIsIHRoZVxuICogKipgdHJhY2sgYnlgKiogZXhwcmVzc2lvbiBpcyBhbHNvIGFwcGxpZWQgdG8gdGhlIGBuZ01vZGVsYCB2YWx1ZS4gSW4gdGhlIGZpcnN0IGV4YW1wbGUsIHRoZVxuICogYG5nTW9kZWxgIHZhbHVlIGlzIGBpdGVtc1swXWAgYW5kIHRoZSAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBgaXRlbXNbMF0uaWRgIHdpdGhcbiAqIG5vIGlzc3VlLiBJbiB0aGUgc2Vjb25kIGV4YW1wbGUsIHRoZSBgbmdNb2RlbGAgdmFsdWUgaXMgYGl0ZW1zWzBdLnN1Ykl0ZW1gIGFuZCB0aGUgKipgdHJhY2sgYnlgKipcbiAqIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGBpdGVtc1swXS5zdWJJdGVtLmlkYCAod2hpY2ggaXMgdW5kZWZpbmVkKS4gQXMgYSByZXN1bHQsIHRoZSBtb2RlbCB2YWx1ZVxuICogaXMgbm90IG1hdGNoZWQgYWdhaW5zdCBhbnkgYDxvcHRpb24+YCBhbmQgdGhlIGA8c2VsZWN0PmAgYXBwZWFycyBhcyBoYXZpbmcgbm8gc2VsZWN0ZWQgdmFsdWUuXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICogQHBhcmFtIHtjb21wcmVoZW5zaW9uX2V4cHJlc3Npb259IG5nT3B0aW9ucyBpbiBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtczpcbiAqXG4gKiAgICogZm9yIGFycmF5IGRhdGEgc291cmNlczpcbiAqICAgICAqIGBsYWJlbGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXG4gKiAgICAgKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxuICogICAgICogYGxhYmVsYCAqKmBkaXNhYmxlIHdoZW5gKiogYGRpc2FibGVgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWBcbiAqICAgICAqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgICoqYHRyYWNrIGJ5YCoqIGB0cmFja2V4cHJgXG4gKiAgICAgKiBgbGFiZWxgICoqYGRpc2FibGUgd2hlbmAqKiBgZGlzYWJsZWAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YCAqKmB0cmFjayBieWAqKiBgdHJhY2tleHByYFxuICogICAgICogYGxhYmVsYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgIHwgb3JkZXJCeTpgb3JkZXJleHByYCAqKmB0cmFjayBieWAqKiBgdHJhY2tleHByYFxuICogICAgICAgIChmb3IgaW5jbHVkaW5nIGEgZmlsdGVyIHdpdGggYHRyYWNrIGJ5YClcbiAqICAgKiBmb3Igb2JqZWN0IGRhdGEgc291cmNlczpcbiAqICAgICAqIGBsYWJlbGAgKipgZm9yIChgKipga2V5YCAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXG4gKiAgICAgKiBgc2VsZWN0YCAqKmBhc2AqKiBgbGFiZWxgICoqYGZvciAoYCoqYGtleWAgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICogICAgICogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgICoqYGZvciAoYCoqYGtleWAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXG4gKiAgICAgKiBgbGFiZWxgICoqYGRpc2FibGUgd2hlbmAqKiBgZGlzYWJsZWAgKipgZm9yIChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYFxuICogICAgICAgICAqKmBmb3JgIGAoYCoqYGtleWAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXG4gKiAgICAgKiBgc2VsZWN0YCAqKmBhc2AqKiBgbGFiZWxgICoqYGRpc2FibGUgd2hlbmAqKiBgZGlzYWJsZWBcbiAqICAgICAgICAgKipgZm9yYCBgKGAqKmBrZXlgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICpcbiAqIFdoZXJlOlxuICpcbiAqICAgKiBgYXJyYXlgIC8gYG9iamVjdGA6IGFuIGV4cHJlc3Npb24gd2hpY2ggZXZhbHVhdGVzIHRvIGFuIGFycmF5IC8gb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqICAgKiBgdmFsdWVgOiBsb2NhbCB2YXJpYWJsZSB3aGljaCB3aWxsIHJlZmVyIHRvIGVhY2ggaXRlbSBpbiB0aGUgYGFycmF5YCBvciBlYWNoIHByb3BlcnR5IHZhbHVlXG4gKiAgICAgIG9mIGBvYmplY3RgIGR1cmluZyBpdGVyYXRpb24uXG4gKiAgICogYGtleWA6IGxvY2FsIHZhcmlhYmxlIHdoaWNoIHdpbGwgcmVmZXIgdG8gYSBwcm9wZXJ0eSBuYW1lIGluIGBvYmplY3RgIGR1cmluZyBpdGVyYXRpb24uXG4gKiAgICogYGxhYmVsYDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSB0aGUgbGFiZWwgZm9yIGA8b3B0aW9uPmAgZWxlbWVudC4gVGhlXG4gKiAgICAgYGV4cHJlc3Npb25gIHdpbGwgbW9zdCBsaWtlbHkgcmVmZXIgdG8gdGhlIGB2YWx1ZWAgdmFyaWFibGUgKGUuZy4gYHZhbHVlLnByb3BlcnR5TmFtZWApLlxuICogICAqIGBzZWxlY3RgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIGJvdW5kIHRvIHRoZSBtb2RlbCBvZiB0aGUgcGFyZW50IGA8c2VsZWN0PmBcbiAqICAgICAgZWxlbWVudC4gSWYgbm90IHNwZWNpZmllZCwgYHNlbGVjdGAgZXhwcmVzc2lvbiB3aWxsIGRlZmF1bHQgdG8gYHZhbHVlYC5cbiAqICAgKiBgZ3JvdXBgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIHVzZWQgdG8gZ3JvdXAgb3B0aW9ucyB1c2luZyB0aGUgYDxvcHRncm91cD5gXG4gKiAgICAgIERPTSBlbGVtZW50LlxuICogICAqIGBkaXNhYmxlYDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSB1c2VkIHRvIGRpc2FibGUgdGhlIHJlbmRlcmVkIGA8b3B0aW9uPmBcbiAqICAgICAgZWxlbWVudC4gUmV0dXJuIGB0cnVlYCB0byBkaXNhYmxlLlxuICogICAqIGB0cmFja2V4cHJgOiBVc2VkIHdoZW4gd29ya2luZyB3aXRoIGFuIGFycmF5IG9mIG9iamVjdHMuIFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmVcbiAqICAgICAgdXNlZCB0byBpZGVudGlmeSB0aGUgb2JqZWN0cyBpbiB0aGUgYXJyYXkuIFRoZSBgdHJhY2tleHByYCB3aWxsIG1vc3QgbGlrZWx5IHJlZmVyIHRvIHRoZVxuICogICAgIGB2YWx1ZWAgdmFyaWFibGUgKGUuZy4gYHZhbHVlLnByb3BlcnR5TmFtZWApLiBXaXRoIHRoaXMgdGhlIHNlbGVjdGlvbiBpcyBwcmVzZXJ2ZWRcbiAqICAgICAgZXZlbiB3aGVuIHRoZSBvcHRpb25zIGFyZSByZWNyZWF0ZWQgKGUuZy4gcmVsb2FkZWQgZnJvbSB0aGUgc2VydmVyKS5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgVGhlIGNvbnRyb2wgaXMgY29uc2lkZXJlZCB2YWxpZCBvbmx5IGlmIHZhbHVlIGlzIGVudGVyZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdBdHRyU2l6ZSBzZXRzIHRoZSBzaXplIG9mIHRoZSBzZWxlY3QgZWxlbWVudCBkeW5hbWljYWxseS4gVXNlcyB0aGVcbiAqIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIy1uZ2F0dHItZm9yLWJpbmRpbmctdG8tYXJiaXRyYXJ5LWF0dHJpYnV0ZXMgbmdBdHRyfSBkaXJlY3RpdmUuXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBtb2R1bGU9XCJzZWxlY3RFeGFtcGxlXCIgbmFtZT1cInNlbGVjdFwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3NlbGVjdEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLmNvbG9ycyA9IFtcbiAgICAgICAgICAgICAge25hbWU6J2JsYWNrJywgc2hhZGU6J2RhcmsnfSxcbiAgICAgICAgICAgICAge25hbWU6J3doaXRlJywgc2hhZGU6J2xpZ2h0Jywgbm90QW5PcHRpb246IHRydWV9LFxuICAgICAgICAgICAgICB7bmFtZToncmVkJywgc2hhZGU6J2RhcmsnfSxcbiAgICAgICAgICAgICAge25hbWU6J2JsdWUnLCBzaGFkZTonZGFyaycsIG5vdEFuT3B0aW9uOiB0cnVlfSxcbiAgICAgICAgICAgICAge25hbWU6J3llbGxvdycsIHNoYWRlOidsaWdodCcsIG5vdEFuT3B0aW9uOiBmYWxzZX1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAkc2NvcGUubXlDb2xvciA9ICRzY29wZS5jb2xvcnNbMl07IC8vIHJlZFxuICAgICAgICAgIH1dKTtcbiAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgPHVsPlxuICAgICAgICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbG9yIGluIGNvbG9yc1wiPlxuICAgICAgICAgICAgICA8bGFiZWw+TmFtZTogPGlucHV0IG5nLW1vZGVsPVwiY29sb3IubmFtZVwiPjwvbGFiZWw+XG4gICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjb2xvci5ub3RBbk9wdGlvblwiPiBEaXNhYmxlZD88L2xhYmVsPlxuICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY29sb3JzLnNwbGljZSgkaW5kZXgsIDEpXCIgYXJpYS1sYWJlbD1cIlJlbW92ZVwiPlg8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjb2xvcnMucHVzaCh7fSlcIj5hZGQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgICA8aHIvPlxuICAgICAgICAgIDxsYWJlbD5Db2xvciAobnVsbCBub3QgYWxsb3dlZCk6XG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGZvciBjb2xvciBpbiBjb2xvcnNcIj48L3NlbGVjdD5cbiAgICAgICAgICA8L2xhYmVsPjxici8+XG4gICAgICAgICAgPGxhYmVsPkNvbG9yIChudWxsIGFsbG93ZWQpOlxuICAgICAgICAgIDxzcGFuICBjbGFzcz1cIm51bGxhYmxlXCI+XG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGZvciBjb2xvciBpbiBjb2xvcnNcIj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPi0tIGNob29zZSBjb2xvciAtLTwvb3B0aW9uPlxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPC9zcGFuPjwvbGFiZWw+PGJyLz5cblxuICAgICAgICAgIDxsYWJlbD5Db2xvciBncm91cGVkIGJ5IHNoYWRlOlxuICAgICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm15Q29sb3JcIiBuZy1vcHRpb25zPVwiY29sb3IubmFtZSBncm91cCBieSBjb2xvci5zaGFkZSBmb3IgY29sb3IgaW4gY29sb3JzXCI+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA8L2xhYmVsPjxici8+XG5cbiAgICAgICAgICA8bGFiZWw+Q29sb3IgZ3JvdXBlZCBieSBzaGFkZSwgd2l0aCBzb21lIGRpc2FibGVkOlxuICAgICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm15Q29sb3JcIlxuICAgICAgICAgICAgICAgICAgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZ3JvdXAgYnkgY29sb3Iuc2hhZGUgZGlzYWJsZSB3aGVuIGNvbG9yLm5vdEFuT3B0aW9uIGZvciBjb2xvciBpbiBjb2xvcnNcIj5cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgIDwvbGFiZWw+PGJyLz5cblxuXG5cbiAgICAgICAgICBTZWxlY3QgPGJ1dHRvbiBuZy1jbGljaz1cIm15Q29sb3IgPSB7IG5hbWU6J25vdCBpbiBsaXN0Jywgc2hhZGU6ICdvdGhlcicgfVwiPmJvZ3VzPC9idXR0b24+LlxuICAgICAgICAgIDxici8+XG4gICAgICAgICAgPGhyLz5cbiAgICAgICAgICBDdXJyZW50bHkgc2VsZWN0ZWQ6IHt7IHtzZWxlY3RlZF9jb2xvcjpteUNvbG9yfSB9fVxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJib3JkZXI6c29saWQgMXB4IGJsYWNrOyBoZWlnaHQ6MjBweFwiXG4gICAgICAgICAgICAgICBuZy1zdHlsZT1cInsnYmFja2dyb3VuZC1jb2xvcic6bXlDb2xvci5uYW1lfVwiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctb3B0aW9ucycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdyZWQnKTtcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkubW9kZWwoJ215Q29sb3InKSkuZmlyc3QoKS5jbGljaygpO1xuICAgICAgICAgICBlbGVtZW50LmFsbChieS5jc3MoJ3NlbGVjdFtuZy1tb2RlbD1cIm15Q29sb3JcIl0gb3B0aW9uJykpLmZpcnN0KCkuY2xpY2soKTtcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygne3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9JykpLmdldFRleHQoKSkudG9NYXRjaCgnYmxhY2snKTtcbiAgICAgICAgICAgZWxlbWVudChieS5jc3MoJy5udWxsYWJsZSBzZWxlY3RbbmctbW9kZWw9XCJteUNvbG9yXCJdJykpLmNsaWNrKCk7XG4gICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5LmNzcygnLm51bGxhYmxlIHNlbGVjdFtuZy1tb2RlbD1cIm15Q29sb3JcIl0gb3B0aW9uJykpLmZpcnN0KCkuY2xpY2soKTtcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygne3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9JykpLmdldFRleHQoKSkudG9NYXRjaCgnbnVsbCcpO1xuICAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbi8vICAgICAgICAgICAgICAgICAgICAgLy8wMDAwMTExMTExMTExMTAwMDAwMDAwMDAwMjIyMjIyMjIyMjAwMDAwMDAwMDAwMDAwMDAwMDAwMDMzMzMzMzMzMzMwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwNDQ0NDQ0NDQ0NDQwMDAwMDAwMDAwMDAwNTU1NTU1NTU1NTU1NTAwMDAwMDAwMDY2NjY2NjY2NjY2NjYwMDAwMDAwNzc3Nzc3Nzc3Nzc3NzAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODgwMDAwMDAwMDAwMDAwMDAwMDAwOTk5OTk5OTk5OVxudmFyIE5HX09QVElPTlNfUkVHRVhQID0gL15cXHMqKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK2dyb3VwXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK2Rpc2FibGVcXHMrd2hlblxccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFskXFx3XVskXFx3XSopfCg/OlxcKFxccyooWyRcXHddWyRcXHddKilcXHMqLFxccyooWyRcXHddWyRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/JC87XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAxOiB2YWx1ZSBleHByZXNzaW9uICh2YWx1ZUZuKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMjogbGFiZWwgZXhwcmVzc2lvbiAoZGlzcGxheUZuKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMzogZ3JvdXAgYnkgZXhwcmVzc2lvbiAoZ3JvdXBCeUZuKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gNDogZGlzYWJsZSB3aGVuIGV4cHJlc3Npb24gKGRpc2FibGVXaGVuRm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA1OiBhcnJheSBpdGVtIHZhcmlhYmxlIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDY6IG9iamVjdCBpdGVtIGtleSB2YXJpYWJsZSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA3OiBvYmplY3QgaXRlbSB2YWx1ZSB2YXJpYWJsZSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA4OiBjb2xsZWN0aW9uIGV4cHJlc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDk6IHRyYWNrIGJ5IGV4cHJlc3Npb25cbi8qIGVzbGludC1lbmFibGUgKi9cblxuXG52YXIgbmdPcHRpb25zRGlyZWN0aXZlID0gWyckY29tcGlsZScsICckZG9jdW1lbnQnLCAnJHBhcnNlJywgZnVuY3Rpb24oJGNvbXBpbGUsICRkb2N1bWVudCwgJHBhcnNlKSB7XG5cbiAgZnVuY3Rpb24gcGFyc2VPcHRpb25zRXhwcmVzc2lvbihvcHRpb25zRXhwLCBzZWxlY3RFbGVtZW50LCBzY29wZSkge1xuXG4gICAgdmFyIG1hdGNoID0gb3B0aW9uc0V4cC5tYXRjaChOR19PUFRJT05TX1JFR0VYUCk7XG4gICAgaWYgKCEobWF0Y2gpKSB7XG4gICAgICB0aHJvdyBuZ09wdGlvbnNNaW5FcnIoJ2lleHAnLFxuICAgICAgICAnRXhwZWN0ZWQgZXhwcmVzc2lvbiBpbiBmb3JtIG9mICcgK1xuICAgICAgICAnXFwnX3NlbGVjdF8gKGFzIF9sYWJlbF8pPyBmb3IgKF9rZXlfLCk/X3ZhbHVlXyBpbiBfY29sbGVjdGlvbl9cXCcnICtcbiAgICAgICAgJyBidXQgZ290IFxcJ3swfVxcJy4gRWxlbWVudDogezF9JyxcbiAgICAgICAgb3B0aW9uc0V4cCwgc3RhcnRpbmdUYWcoc2VsZWN0RWxlbWVudCkpO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgdGhlIHBhcnRzIGZyb20gdGhlIG5nT3B0aW9ucyBleHByZXNzaW9uXG5cbiAgICAvLyBUaGUgdmFyaWFibGUgbmFtZSBmb3IgdGhlIHZhbHVlIG9mIHRoZSBpdGVtIGluIHRoZSBjb2xsZWN0aW9uXG4gICAgdmFyIHZhbHVlTmFtZSA9IG1hdGNoWzVdIHx8IG1hdGNoWzddO1xuICAgIC8vIFRoZSB2YXJpYWJsZSBuYW1lIGZvciB0aGUga2V5IG9mIHRoZSBpdGVtIGluIHRoZSBjb2xsZWN0aW9uXG4gICAgdmFyIGtleU5hbWUgPSBtYXRjaFs2XTtcblxuICAgIC8vIEFuIGV4cHJlc3Npb24gdGhhdCBnZW5lcmF0ZXMgdGhlIHZpZXdWYWx1ZSBmb3IgYW4gb3B0aW9uIGlmIHRoZXJlIGlzIGEgbGFiZWwgZXhwcmVzc2lvblxuICAgIHZhciBzZWxlY3RBcyA9IC8gYXMgLy50ZXN0KG1hdGNoWzBdKSAmJiBtYXRjaFsxXTtcbiAgICAvLyBBbiBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCB0byB0cmFjayB0aGUgaWQgb2YgZWFjaCBvYmplY3QgaW4gdGhlIG9wdGlvbnMgY29sbGVjdGlvblxuICAgIHZhciB0cmFja0J5ID0gbWF0Y2hbOV07XG4gICAgLy8gQW4gZXhwcmVzc2lvbiB0aGF0IGdlbmVyYXRlcyB0aGUgdmlld1ZhbHVlIGZvciBhbiBvcHRpb24gaWYgdGhlcmUgaXMgbm8gbGFiZWwgZXhwcmVzc2lvblxuICAgIHZhciB2YWx1ZUZuID0gJHBhcnNlKG1hdGNoWzJdID8gbWF0Y2hbMV0gOiB2YWx1ZU5hbWUpO1xuICAgIHZhciBzZWxlY3RBc0ZuID0gc2VsZWN0QXMgJiYgJHBhcnNlKHNlbGVjdEFzKTtcbiAgICB2YXIgdmlld1ZhbHVlRm4gPSBzZWxlY3RBc0ZuIHx8IHZhbHVlRm47XG4gICAgdmFyIHRyYWNrQnlGbiA9IHRyYWNrQnkgJiYgJHBhcnNlKHRyYWNrQnkpO1xuXG4gICAgLy8gR2V0IHRoZSB2YWx1ZSBieSB3aGljaCB3ZSBhcmUgZ29pbmcgdG8gdHJhY2sgdGhlIG9wdGlvblxuICAgIC8vIGlmIHdlIGhhdmUgYSB0cmFja0ZuIHRoZW4gdXNlIHRoYXQgKHBhc3Npbmcgc2NvcGUgYW5kIGxvY2FscylcbiAgICAvLyBvdGhlcndpc2UganVzdCBoYXNoIHRoZSBnaXZlbiB2aWV3VmFsdWVcbiAgICB2YXIgZ2V0VHJhY2tCeVZhbHVlRm4gPSB0cmFja0J5ID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlLCBsb2NhbHMpIHsgcmV0dXJuIHRyYWNrQnlGbihzY29wZSwgbG9jYWxzKTsgfSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRIYXNoT2ZWYWx1ZSh2YWx1ZSkgeyByZXR1cm4gaGFzaEtleSh2YWx1ZSk7IH07XG4gICAgdmFyIGdldFRyYWNrQnlWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgIHJldHVybiBnZXRUcmFja0J5VmFsdWVGbih2YWx1ZSwgZ2V0TG9jYWxzKHZhbHVlLCBrZXkpKTtcbiAgICB9O1xuXG4gICAgdmFyIGRpc3BsYXlGbiA9ICRwYXJzZShtYXRjaFsyXSB8fCBtYXRjaFsxXSk7XG4gICAgdmFyIGdyb3VwQnlGbiA9ICRwYXJzZShtYXRjaFszXSB8fCAnJyk7XG4gICAgdmFyIGRpc2FibGVXaGVuRm4gPSAkcGFyc2UobWF0Y2hbNF0gfHwgJycpO1xuICAgIHZhciB2YWx1ZXNGbiA9ICRwYXJzZShtYXRjaFs4XSk7XG5cbiAgICB2YXIgbG9jYWxzID0ge307XG4gICAgdmFyIGdldExvY2FscyA9IGtleU5hbWUgPyBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICBsb2NhbHNba2V5TmFtZV0gPSBrZXk7XG4gICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIGxvY2FscztcbiAgICB9IDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gdmFsdWU7XG4gICAgICByZXR1cm4gbG9jYWxzO1xuICAgIH07XG5cblxuICAgIGZ1bmN0aW9uIE9wdGlvbihzZWxlY3RWYWx1ZSwgdmlld1ZhbHVlLCBsYWJlbCwgZ3JvdXAsIGRpc2FibGVkKSB7XG4gICAgICB0aGlzLnNlbGVjdFZhbHVlID0gc2VsZWN0VmFsdWU7XG4gICAgICB0aGlzLnZpZXdWYWx1ZSA9IHZpZXdWYWx1ZTtcbiAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcbiAgICAgIHRoaXMuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRPcHRpb25WYWx1ZXNLZXlzKG9wdGlvblZhbHVlcykge1xuICAgICAgdmFyIG9wdGlvblZhbHVlc0tleXM7XG5cbiAgICAgIGlmICgha2V5TmFtZSAmJiBpc0FycmF5TGlrZShvcHRpb25WYWx1ZXMpKSB7XG4gICAgICAgIG9wdGlvblZhbHVlc0tleXMgPSBvcHRpb25WYWx1ZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiBvYmplY3QsIGV4dHJhY3Qga2V5cywgaW4gZW51bWVyYXRpb24gb3JkZXIsIHVuc29ydGVkXG4gICAgICAgIG9wdGlvblZhbHVlc0tleXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaXRlbUtleSBpbiBvcHRpb25WYWx1ZXMpIHtcbiAgICAgICAgICBpZiAob3B0aW9uVmFsdWVzLmhhc093blByb3BlcnR5KGl0ZW1LZXkpICYmIGl0ZW1LZXkuY2hhckF0KDApICE9PSAnJCcpIHtcbiAgICAgICAgICAgIG9wdGlvblZhbHVlc0tleXMucHVzaChpdGVtS2V5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvcHRpb25WYWx1ZXNLZXlzO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0cmFja0J5OiB0cmFja0J5LFxuICAgICAgZ2V0VHJhY2tCeVZhbHVlOiBnZXRUcmFja0J5VmFsdWUsXG4gICAgICBnZXRXYXRjaGFibGVzOiAkcGFyc2UodmFsdWVzRm4sIGZ1bmN0aW9uKG9wdGlvblZhbHVlcykge1xuICAgICAgICAvLyBDcmVhdGUgYSBjb2xsZWN0aW9uIG9mIHRoaW5ncyB0aGF0IHdlIHdvdWxkIGxpa2UgdG8gd2F0Y2ggKHdhdGNoZWRBcnJheSlcbiAgICAgICAgLy8gc28gdGhhdCB0aGV5IGNhbiBhbGwgYmUgd2F0Y2hlZCB1c2luZyBhIHNpbmdsZSAkd2F0Y2hDb2xsZWN0aW9uXG4gICAgICAgIC8vIHRoYXQgb25seSBydW5zIHRoZSBoYW5kbGVyIG9uY2UgaWYgYW55dGhpbmcgY2hhbmdlc1xuICAgICAgICB2YXIgd2F0Y2hlZEFycmF5ID0gW107XG4gICAgICAgIG9wdGlvblZhbHVlcyA9IG9wdGlvblZhbHVlcyB8fCBbXTtcblxuICAgICAgICB2YXIgb3B0aW9uVmFsdWVzS2V5cyA9IGdldE9wdGlvblZhbHVlc0tleXMob3B0aW9uVmFsdWVzKTtcbiAgICAgICAgdmFyIG9wdGlvblZhbHVlc0xlbmd0aCA9IG9wdGlvblZhbHVlc0tleXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uVmFsdWVzTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgdmFyIGtleSA9IChvcHRpb25WYWx1ZXMgPT09IG9wdGlvblZhbHVlc0tleXMpID8gaW5kZXggOiBvcHRpb25WYWx1ZXNLZXlzW2luZGV4XTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBvcHRpb25WYWx1ZXNba2V5XTtcblxuICAgICAgICAgIHZhciBsb2NhbHMgPSBnZXRMb2NhbHModmFsdWUsIGtleSk7XG4gICAgICAgICAgdmFyIHNlbGVjdFZhbHVlID0gZ2V0VHJhY2tCeVZhbHVlRm4odmFsdWUsIGxvY2Fscyk7XG4gICAgICAgICAgd2F0Y2hlZEFycmF5LnB1c2goc2VsZWN0VmFsdWUpO1xuXG4gICAgICAgICAgLy8gT25seSBuZWVkIHRvIHdhdGNoIHRoZSBkaXNwbGF5Rm4gaWYgdGhlcmUgaXMgYSBzcGVjaWZpYyBsYWJlbCBleHByZXNzaW9uXG4gICAgICAgICAgaWYgKG1hdGNoWzJdIHx8IG1hdGNoWzFdKSB7XG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBkaXNwbGF5Rm4oc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICB3YXRjaGVkQXJyYXkucHVzaChsYWJlbCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gT25seSBuZWVkIHRvIHdhdGNoIHRoZSBkaXNhYmxlV2hlbkZuIGlmIHRoZXJlIGlzIGEgc3BlY2lmaWMgZGlzYWJsZSBleHByZXNzaW9uXG4gICAgICAgICAgaWYgKG1hdGNoWzRdKSB7XG4gICAgICAgICAgICB2YXIgZGlzYWJsZVdoZW4gPSBkaXNhYmxlV2hlbkZuKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgICAgd2F0Y2hlZEFycmF5LnB1c2goZGlzYWJsZVdoZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2F0Y2hlZEFycmF5O1xuICAgICAgfSksXG5cbiAgICAgIGdldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBvcHRpb25JdGVtcyA9IFtdO1xuICAgICAgICB2YXIgc2VsZWN0VmFsdWVNYXAgPSB7fTtcblxuICAgICAgICAvLyBUaGUgb3B0aW9uIHZhbHVlcyB3ZXJlIGFscmVhZHkgY29tcHV0ZWQgaW4gdGhlIGBnZXRXYXRjaGFibGVzYCBmbixcbiAgICAgICAgLy8gd2hpY2ggbXVzdCBoYXZlIGJlZW4gY2FsbGVkIHRvIHRyaWdnZXIgYGdldE9wdGlvbnNgXG4gICAgICAgIHZhciBvcHRpb25WYWx1ZXMgPSB2YWx1ZXNGbihzY29wZSkgfHwgW107XG4gICAgICAgIHZhciBvcHRpb25WYWx1ZXNLZXlzID0gZ2V0T3B0aW9uVmFsdWVzS2V5cyhvcHRpb25WYWx1ZXMpO1xuICAgICAgICB2YXIgb3B0aW9uVmFsdWVzTGVuZ3RoID0gb3B0aW9uVmFsdWVzS2V5cy5sZW5ndGg7XG5cbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvblZhbHVlc0xlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIHZhciBrZXkgPSAob3B0aW9uVmFsdWVzID09PSBvcHRpb25WYWx1ZXNLZXlzKSA/IGluZGV4IDogb3B0aW9uVmFsdWVzS2V5c1tpbmRleF07XG4gICAgICAgICAgdmFyIHZhbHVlID0gb3B0aW9uVmFsdWVzW2tleV07XG4gICAgICAgICAgdmFyIGxvY2FscyA9IGdldExvY2Fscyh2YWx1ZSwga2V5KTtcbiAgICAgICAgICB2YXIgdmlld1ZhbHVlID0gdmlld1ZhbHVlRm4oc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgdmFyIHNlbGVjdFZhbHVlID0gZ2V0VHJhY2tCeVZhbHVlRm4odmlld1ZhbHVlLCBsb2NhbHMpO1xuICAgICAgICAgIHZhciBsYWJlbCA9IGRpc3BsYXlGbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICB2YXIgZ3JvdXAgPSBncm91cEJ5Rm4oc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgdmFyIGRpc2FibGVkID0gZGlzYWJsZVdoZW5GbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICB2YXIgb3B0aW9uSXRlbSA9IG5ldyBPcHRpb24oc2VsZWN0VmFsdWUsIHZpZXdWYWx1ZSwgbGFiZWwsIGdyb3VwLCBkaXNhYmxlZCk7XG5cbiAgICAgICAgICBvcHRpb25JdGVtcy5wdXNoKG9wdGlvbkl0ZW0pO1xuICAgICAgICAgIHNlbGVjdFZhbHVlTWFwW3NlbGVjdFZhbHVlXSA9IG9wdGlvbkl0ZW07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGl0ZW1zOiBvcHRpb25JdGVtcyxcbiAgICAgICAgICBzZWxlY3RWYWx1ZU1hcDogc2VsZWN0VmFsdWVNYXAsXG4gICAgICAgICAgZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RWYWx1ZU1hcFtnZXRUcmFja0J5VmFsdWUodmFsdWUpXTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldFZpZXdWYWx1ZUZyb21PcHRpb246IGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHZpZXdWYWx1ZSBjb3VsZCBiZSBhbiBvYmplY3QgdGhhdCBtYXkgYmUgbXV0YXRlZCBieSB0aGUgYXBwbGljYXRpb24sXG4gICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIG1ha2UgYSBjb3B5IGFuZCBub3QgcmV0dXJuIHRoZSByZWZlcmVuY2UgdG8gdGhlIHZhbHVlIG9uIHRoZSBvcHRpb24uXG4gICAgICAgICAgICByZXR1cm4gdHJhY2tCeSA/IGNvcHkob3B0aW9uLnZpZXdWYWx1ZSkgOiBvcHRpb24udmlld1ZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cblxuICAvLyBTdXBwb3J0OiBJRSA5IG9ubHlcbiAgLy8gV2UgY2FuJ3QganVzdCBqcUxpdGUoJzxvcHRpb24+Jykgc2luY2UganFMaXRlIGlzIG5vdCBzbWFydCBlbm91Z2hcbiAgLy8gdG8gY3JlYXRlIGl0IGluIDxzZWxlY3Q+IGFuZCBJRSBiYXJmcyBvdGhlcndpc2UuXG4gIHZhciBvcHRpb25UZW1wbGF0ZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSxcbiAgICAgIG9wdEdyb3VwVGVtcGxhdGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0Z3JvdXAnKTtcblxuICAgIGZ1bmN0aW9uIG5nT3B0aW9uc1Bvc3RMaW5rKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBhdHRyLCBjdHJscykge1xuXG4gICAgICB2YXIgc2VsZWN0Q3RybCA9IGN0cmxzWzBdO1xuICAgICAgdmFyIG5nTW9kZWxDdHJsID0gY3RybHNbMV07XG4gICAgICB2YXIgbXVsdGlwbGUgPSBhdHRyLm11bHRpcGxlO1xuXG4gICAgICAvLyBUaGUgZW1wdHlPcHRpb24gYWxsb3dzIHRoZSBhcHBsaWNhdGlvbiBkZXZlbG9wZXIgdG8gcHJvdmlkZSB0aGVpciBvd24gY3VzdG9tIFwiZW1wdHlcIlxuICAgICAgLy8gb3B0aW9uIHdoZW4gdGhlIHZpZXdWYWx1ZSBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgdGhlIG9wdGlvbiB2YWx1ZXMuXG4gICAgICBmb3IgKHZhciBpID0gMCwgY2hpbGRyZW4gPSBzZWxlY3RFbGVtZW50LmNoaWxkcmVuKCksIGlpID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBpZiAoY2hpbGRyZW5baV0udmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgc2VsZWN0Q3RybC5oYXNFbXB0eU9wdGlvbiA9IHRydWU7XG4gICAgICAgICAgc2VsZWN0Q3RybC5lbXB0eU9wdGlvbiA9IGNoaWxkcmVuLmVxKGkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBlbXB0eSBvcHRpb24gd2lsbCBiZSBjb21waWxlZCBhbmQgcmVuZGVyZWQgYmVmb3JlIHdlIGZpcnN0IGdlbmVyYXRlIHRoZSBvcHRpb25zXG4gICAgICBzZWxlY3RFbGVtZW50LmVtcHR5KCk7XG5cbiAgICAgIHZhciBwcm92aWRlZEVtcHR5T3B0aW9uID0gISFzZWxlY3RDdHJsLmVtcHR5T3B0aW9uO1xuXG4gICAgICB2YXIgdW5rbm93bk9wdGlvbiA9IGpxTGl0ZShvcHRpb25UZW1wbGF0ZS5jbG9uZU5vZGUoZmFsc2UpKTtcbiAgICAgIHVua25vd25PcHRpb24udmFsKCc/Jyk7XG5cbiAgICAgIHZhciBvcHRpb25zO1xuICAgICAgdmFyIG5nT3B0aW9ucyA9IHBhcnNlT3B0aW9uc0V4cHJlc3Npb24oYXR0ci5uZ09wdGlvbnMsIHNlbGVjdEVsZW1lbnQsIHNjb3BlKTtcbiAgICAgIC8vIFRoaXMgc3RvcmVzIHRoZSBuZXdseSBjcmVhdGVkIG9wdGlvbnMgYmVmb3JlIHRoZXkgYXJlIGFwcGVuZGVkIHRvIHRoZSBzZWxlY3QuXG4gICAgICAvLyBTaW5jZSB0aGUgY29udGVudHMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZnJhZ21lbnQgd2hlbiBpdCBpcyBhcHBlbmRlZCxcbiAgICAgIC8vIHdlIG9ubHkgbmVlZCB0byBjcmVhdGUgaXQgb25jZS5cbiAgICAgIHZhciBsaXN0RnJhZ21lbnQgPSAkZG9jdW1lbnRbMF0uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICAvLyBPdmVyd3JpdGUgdGhlIGltcGxlbWVudGF0aW9uLiBuZ09wdGlvbnMgZG9lc24ndCB1c2UgaGFzaGVzXG4gICAgICBzZWxlY3RDdHJsLmdlbmVyYXRlVW5rbm93bk9wdGlvblZhbHVlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHJldHVybiAnPyc7XG4gICAgICB9O1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGNvbnRyb2xsZXIgbWV0aG9kcyBmb3IgbXVsdGlwbGUgc2VsZWN0YWJsZSBvcHRpb25zXG4gICAgICBpZiAoIW11bHRpcGxlKSB7XG5cbiAgICAgICAgc2VsZWN0Q3RybC53cml0ZVZhbHVlID0gZnVuY3Rpb24gd3JpdGVOZ09wdGlvbnNWYWx1ZSh2YWx1ZSkge1xuICAgICAgICAgIC8vIFRoZSBvcHRpb25zIG1pZ2h0IG5vdCBiZSBkZWZpbmVkIHlldCB3aGVuIG5nTW9kZWwgdHJpZXMgdG8gcmVuZGVyXG4gICAgICAgICAgaWYgKCFvcHRpb25zKSByZXR1cm47XG5cbiAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb24gPSBzZWxlY3RFbGVtZW50WzBdLm9wdGlvbnNbc2VsZWN0RWxlbWVudFswXS5zZWxlY3RlZEluZGV4XTtcbiAgICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9ucy5nZXRPcHRpb25Gcm9tVmlld1ZhbHVlKHZhbHVlKTtcblxuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIHNlbGVjdGVkIGF0dHJpYnV0ZSBmcm9tIHRoZSBwcmV2aW91c2x5IHNlbGVjdGVkIG9wdGlvblxuICAgICAgICAgIC8vIE90aGVyd2lzZSwgc2NyZWVuIHJlYWRlcnMgbWlnaHQgZ2V0IGNvbmZ1c2VkXG4gICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uKSBzZWxlY3RlZE9wdGlvbi5yZW1vdmVBdHRyaWJ1dGUoJ3NlbGVjdGVkJyk7XG5cbiAgICAgICAgICBpZiAob3B0aW9uKSB7XG4gICAgICAgICAgICAvLyBEb24ndCB1cGRhdGUgdGhlIG9wdGlvbiB3aGVuIGl0IGlzIGFscmVhZHkgc2VsZWN0ZWQuXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgdGhlIGJyb3dzZXIgd2lsbCBzZWxlY3QgdGhlIGZpcnN0IG9wdGlvbiBieSBkZWZhdWx0LiBJbiB0aGF0IGNhc2UsXG4gICAgICAgICAgICAvLyBtb3N0IHByb3BlcnRpZXMgYXJlIHNldCBhdXRvbWF0aWNhbGx5IC0gZXhjZXB0IHRoZSBgc2VsZWN0ZWRgIGF0dHJpYnV0ZSwgd2hpY2ggd2VcbiAgICAgICAgICAgIC8vIHNldCBhbHdheXNcblxuICAgICAgICAgICAgaWYgKHNlbGVjdEVsZW1lbnRbMF0udmFsdWUgIT09IG9wdGlvbi5zZWxlY3RWYWx1ZSkge1xuICAgICAgICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZVVua25vd25PcHRpb24oKTtcblxuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50WzBdLnZhbHVlID0gb3B0aW9uLnNlbGVjdFZhbHVlO1xuICAgICAgICAgICAgICBvcHRpb24uZWxlbWVudC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9wdGlvbi5lbGVtZW50LnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0Q3RybC5zZWxlY3RVbmtub3duT3JFbXB0eU9wdGlvbih2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGVjdEN0cmwucmVhZFZhbHVlID0gZnVuY3Rpb24gcmVhZE5nT3B0aW9uc1ZhbHVlKCkge1xuXG4gICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9uID0gb3B0aW9ucy5zZWxlY3RWYWx1ZU1hcFtzZWxlY3RFbGVtZW50LnZhbCgpXTtcblxuICAgICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbiAmJiAhc2VsZWN0ZWRPcHRpb24uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHNlbGVjdEN0cmwudW5zZWxlY3RFbXB0eU9wdGlvbigpO1xuICAgICAgICAgICAgc2VsZWN0Q3RybC5yZW1vdmVVbmtub3duT3B0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRWaWV3VmFsdWVGcm9tT3B0aW9uKHNlbGVjdGVkT3B0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIGB0cmFjayBieWAgdGhlbiB3ZSBtdXN0IHdhdGNoIHRoZSB0cmFja2VkIHZhbHVlIG9uIHRoZSBtb2RlbFxuICAgICAgICAvLyBzaW5jZSBuZ01vZGVsIG9ubHkgd2F0Y2hlcyBmb3Igb2JqZWN0IGlkZW50aXR5IGNoYW5nZVxuICAgICAgICAvLyBGSVhNRTogV2hlbiBhIHVzZXIgc2VsZWN0cyBhbiBvcHRpb24sIHRoaXMgd2F0Y2ggd2lsbCBmaXJlIG5lZWRsZXNzbHlcbiAgICAgICAgaWYgKG5nT3B0aW9ucy50cmFja0J5KSB7XG4gICAgICAgICAgc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiBuZ09wdGlvbnMuZ2V0VHJhY2tCeVZhbHVlKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpOyB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7IG5nTW9kZWxDdHJsLiRyZW5kZXIoKTsgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBzZWxlY3RDdHJsLndyaXRlVmFsdWUgPSBmdW5jdGlvbiB3cml0ZU5nT3B0aW9uc011bHRpcGxlKHZhbHVlcykge1xuICAgICAgICAgIC8vIFRoZSBvcHRpb25zIG1pZ2h0IG5vdCBiZSBkZWZpbmVkIHlldCB3aGVuIG5nTW9kZWwgdHJpZXMgdG8gcmVuZGVyXG4gICAgICAgICAgaWYgKCFvcHRpb25zKSByZXR1cm47XG5cbiAgICAgICAgICAvLyBPbmx5IHNldCBgPG9wdGlvbj4uc2VsZWN0ZWRgIGlmIG5lY2Vzc2FyeSwgaW4gb3JkZXIgdG8gcHJldmVudCBzb21lIGJyb3dzZXJzIGZyb21cbiAgICAgICAgICAvLyBzY3JvbGxpbmcgdG8gYDxvcHRpb24+YCBlbGVtZW50cyB0aGF0IGFyZSBvdXRzaWRlIHRoZSBgPHNlbGVjdD5gIGVsZW1lbnQncyB2aWV3cG9ydC5cbiAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb25zID0gdmFsdWVzICYmIHZhbHVlcy5tYXAoZ2V0QW5kVXBkYXRlU2VsZWN0ZWRPcHRpb24pIHx8IFtdO1xuXG4gICAgICAgICAgb3B0aW9ucy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5lbGVtZW50LnNlbGVjdGVkICYmICFpbmNsdWRlcyhzZWxlY3RlZE9wdGlvbnMsIG9wdGlvbikpIHtcbiAgICAgICAgICAgICAgb3B0aW9uLmVsZW1lbnQuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHNlbGVjdEN0cmwucmVhZFZhbHVlID0gZnVuY3Rpb24gcmVhZE5nT3B0aW9uc011bHRpcGxlKCkge1xuICAgICAgICAgIHZhciBzZWxlY3RlZFZhbHVlcyA9IHNlbGVjdEVsZW1lbnQudmFsKCkgfHwgW10sXG4gICAgICAgICAgICAgIHNlbGVjdGlvbnMgPSBbXTtcblxuICAgICAgICAgIGZvckVhY2goc2VsZWN0ZWRWYWx1ZXMsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9ucy5zZWxlY3RWYWx1ZU1hcFt2YWx1ZV07XG4gICAgICAgICAgICBpZiAob3B0aW9uICYmICFvcHRpb24uZGlzYWJsZWQpIHNlbGVjdGlvbnMucHVzaChvcHRpb25zLmdldFZpZXdWYWx1ZUZyb21PcHRpb24ob3B0aW9uKSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZWN0aW9ucztcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgYHRyYWNrIGJ5YCB0aGVuIHdlIG11c3Qgd2F0Y2ggdGhlc2UgdHJhY2tlZCB2YWx1ZXMgb24gdGhlIG1vZGVsXG4gICAgICAgIC8vIHNpbmNlIG5nTW9kZWwgb25seSB3YXRjaGVzIGZvciBvYmplY3QgaWRlbnRpdHkgY2hhbmdlXG4gICAgICAgIGlmIChuZ09wdGlvbnMudHJhY2tCeSkge1xuXG4gICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlLm1hcChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZ09wdGlvbnMuZ2V0VHJhY2tCeVZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvdmlkZWRFbXB0eU9wdGlvbikge1xuXG4gICAgICAgIC8vIGNvbXBpbGUgdGhlIGVsZW1lbnQgc2luY2UgdGhlcmUgbWlnaHQgYmUgYmluZGluZ3MgaW4gaXRcbiAgICAgICAgJGNvbXBpbGUoc2VsZWN0Q3RybC5lbXB0eU9wdGlvbikoc2NvcGUpO1xuXG4gICAgICAgIHNlbGVjdEVsZW1lbnQucHJlcGVuZChzZWxlY3RDdHJsLmVtcHR5T3B0aW9uKTtcblxuICAgICAgICBpZiAoc2VsZWN0Q3RybC5lbXB0eU9wdGlvblswXS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0NPTU1FTlQpIHtcbiAgICAgICAgICAvLyBUaGlzIG1lYW5zIHRoZSBlbXB0eSBvcHRpb24gaGFzIGN1cnJlbnRseSBubyBhY3R1YWwgRE9NIG5vZGUsIHByb2JhYmx5IGJlY2F1c2VcbiAgICAgICAgICAvLyBpdCBoYXMgYmVlbiBtb2RpZmllZCBieSBhIHRyYW5zY2x1c2lvbiBkaXJlY3RpdmUuXG4gICAgICAgICAgc2VsZWN0Q3RybC5oYXNFbXB0eU9wdGlvbiA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gUmVkZWZpbmUgdGhlIHJlZ2lzdGVyT3B0aW9uIGZ1bmN0aW9uLCB3aGljaCB3aWxsIGNhdGNoXG4gICAgICAgICAgLy8gb3B0aW9ucyB0aGF0IGFyZSBhZGRlZCBieSBuZ0lmIGV0Yy4gKHJlbmRlcmluZyBvZiB0aGUgbm9kZSBpcyBhc3luYyBiZWNhdXNlIG9mXG4gICAgICAgICAgLy8gbGF6eSB0cmFuc2NsdXNpb24pXG4gICAgICAgICAgc2VsZWN0Q3RybC5yZWdpc3Rlck9wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvblNjb3BlLCBvcHRpb25FbCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbkVsLnZhbCgpID09PSAnJykge1xuICAgICAgICAgICAgICBzZWxlY3RDdHJsLmhhc0VtcHR5T3B0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5lbXB0eU9wdGlvbiA9IG9wdGlvbkVsO1xuICAgICAgICAgICAgICBzZWxlY3RDdHJsLmVtcHR5T3B0aW9uLnJlbW92ZUNsYXNzKCduZy1zY29wZScpO1xuICAgICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIG5ldyBlbXB0eSBvcHRpb24gaXMgc2VsZWN0ZWQgaWYgcHJldmlvdXNseSBubyBvcHRpb24gd2FzIHNlbGVjdGVkXG4gICAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcblxuICAgICAgICAgICAgICBvcHRpb25FbC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmVlZHNSZXJlbmRlciA9IHNlbGVjdEN0cmwuJGlzRW1wdHlPcHRpb25TZWxlY3RlZCgpO1xuXG4gICAgICAgICAgICAgICAgc2VsZWN0Q3RybC5oYXNFbXB0eU9wdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHNlbGVjdEN0cmwuZW1wdHlPcHRpb24gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAobmVlZHNSZXJlbmRlcikgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmVtb3ZlIHRoZSBjbGFzcywgd2hpY2ggaXMgYWRkZWQgYXV0b21hdGljYWxseSBiZWNhdXNlIHdlIHJlY29tcGlsZSB0aGUgZWxlbWVudCBhbmQgaXRcbiAgICAgICAgICAvLyBiZWNvbWVzIHRoZSBjb21waWxhdGlvbiByb290XG4gICAgICAgICAgc2VsZWN0Q3RybC5lbXB0eU9wdGlvbi5yZW1vdmVDbGFzcygnbmctc2NvcGUnKTtcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIC8vIFdlIHdpbGwgcmUtcmVuZGVyIHRoZSBvcHRpb24gZWxlbWVudHMgaWYgdGhlIG9wdGlvbiB2YWx1ZXMgb3IgbGFiZWxzIGNoYW5nZVxuICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihuZ09wdGlvbnMuZ2V0V2F0Y2hhYmxlcywgdXBkYXRlT3B0aW9ucyk7XG5cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgICBmdW5jdGlvbiBhZGRPcHRpb25FbGVtZW50KG9wdGlvbiwgcGFyZW50KSB7XG4gICAgICAgIHZhciBvcHRpb25FbGVtZW50ID0gb3B0aW9uVGVtcGxhdGUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICB1cGRhdGVPcHRpb25FbGVtZW50KG9wdGlvbiwgb3B0aW9uRWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGdldEFuZFVwZGF0ZVNlbGVjdGVkT3B0aW9uKHZpZXdWYWx1ZSkge1xuICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9ucy5nZXRPcHRpb25Gcm9tVmlld1ZhbHVlKHZpZXdWYWx1ZSk7XG4gICAgICAgIHZhciBlbGVtZW50ID0gb3B0aW9uICYmIG9wdGlvbi5lbGVtZW50O1xuXG4gICAgICAgIGlmIChlbGVtZW50ICYmICFlbGVtZW50LnNlbGVjdGVkKSBlbGVtZW50LnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICByZXR1cm4gb3B0aW9uO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpb25FbGVtZW50KG9wdGlvbiwgZWxlbWVudCkge1xuICAgICAgICBvcHRpb24uZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBvcHRpb24uZGlzYWJsZWQ7XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFIDExIG9ubHksIEVkZ2UgMTItMTMgb25seVxuICAgICAgICAvLyBOT1RFOiBUaGUgbGFiZWwgbXVzdCBiZSBzZXQgYmVmb3JlIHRoZSB2YWx1ZSwgb3RoZXJ3aXNlIElFIDExICYgRWRnZSBjcmVhdGUgdW5yZXNwb25zaXZlXG4gICAgICAgIC8vIHNlbGVjdHMgaW4gY2VydGFpbiBjaXJjdW1zdGFuY2VzIHdoZW4gbXVsdGlwbGUgc2VsZWN0cyBhcmUgbmV4dCB0byBlYWNoIG90aGVyIGFuZCBkaXNwbGF5XG4gICAgICAgIC8vIHRoZSBvcHRpb24gbGlzdCBpbiBsaXN0Ym94IHN0eWxlLCBpLmUuIHRoZSBzZWxlY3QgaXMgW211bHRpcGxlXSwgb3Igc3BlY2lmaWVzIGEgW3NpemVdLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTEzMTQgZm9yIG1vcmUgaW5mby5cbiAgICAgICAgLy8gVGhpcyBpcyB1bmZvcnR1bmF0ZWx5IHVudGVzdGFibGUgd2l0aCB1bml0IC8gZTJlIHRlc3RzXG4gICAgICAgIGlmIChvcHRpb24ubGFiZWwgIT09IGVsZW1lbnQubGFiZWwpIHtcbiAgICAgICAgICBlbGVtZW50LmxhYmVsID0gb3B0aW9uLmxhYmVsO1xuICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBvcHRpb24ubGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC52YWx1ZSA9IG9wdGlvbi5zZWxlY3RWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlT3B0aW9ucygpIHtcbiAgICAgICAgdmFyIHByZXZpb3VzVmFsdWUgPSBvcHRpb25zICYmIHNlbGVjdEN0cmwucmVhZFZhbHVlKCk7XG5cbiAgICAgICAgLy8gV2UgbXVzdCByZW1vdmUgYWxsIGN1cnJlbnQgb3B0aW9ucywgYnV0IGNhbm5vdCBzaW1wbHkgc2V0IGlubmVySFRNTCA9IG51bGxcbiAgICAgICAgLy8gc2luY2UgdGhlIHByb3ZpZGVkRW1wdHlPcHRpb24gbWlnaHQgaGF2ZSBhbiBuZ0lmIG9uIGl0IHRoYXQgaW5zZXJ0cyBjb21tZW50cyB3aGljaCB3ZVxuICAgICAgICAvLyBtdXN0IHByZXNlcnZlLlxuICAgICAgICAvLyBJbnN0ZWFkLCBpdGVyYXRlIG92ZXIgdGhlIGN1cnJlbnQgb3B0aW9uIGVsZW1lbnRzIGFuZCByZW1vdmUgdGhlbSBvciB0aGVpciBvcHRncm91cFxuICAgICAgICAvLyBwYXJlbnRzXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gb3B0aW9ucy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IG9wdGlvbnMuaXRlbXNbaV07XG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbi5ncm91cCkpIHtcbiAgICAgICAgICAgICAganFMaXRlUmVtb3ZlKG9wdGlvbi5lbGVtZW50LnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAganFMaXRlUmVtb3ZlKG9wdGlvbi5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zID0gbmdPcHRpb25zLmdldE9wdGlvbnMoKTtcblxuICAgICAgICB2YXIgZ3JvdXBFbGVtZW50TWFwID0ge307XG5cbiAgICAgICAgb3B0aW9ucy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIGFkZE9wdGlvbihvcHRpb24pIHtcbiAgICAgICAgICB2YXIgZ3JvdXBFbGVtZW50O1xuXG4gICAgICAgICAgaWYgKGlzRGVmaW5lZChvcHRpb24uZ3JvdXApKSB7XG5cbiAgICAgICAgICAgIC8vIFRoaXMgb3B0aW9uIGlzIHRvIGxpdmUgaW4gYSBncm91cFxuICAgICAgICAgICAgLy8gU2VlIGlmIHdlIGhhdmUgYWxyZWFkeSBjcmVhdGVkIHRoaXMgZ3JvdXBcbiAgICAgICAgICAgIGdyb3VwRWxlbWVudCA9IGdyb3VwRWxlbWVudE1hcFtvcHRpb24uZ3JvdXBdO1xuXG4gICAgICAgICAgICBpZiAoIWdyb3VwRWxlbWVudCkge1xuXG4gICAgICAgICAgICAgIGdyb3VwRWxlbWVudCA9IG9wdEdyb3VwVGVtcGxhdGUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgICAgICAgbGlzdEZyYWdtZW50LmFwcGVuZENoaWxkKGdyb3VwRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBsYWJlbCBvbiB0aGUgZ3JvdXAgZWxlbWVudFxuICAgICAgICAgICAgICAvLyBcIm51bGxcIiBpcyBzcGVjaWFsIGNhc2VkIGJlY2F1c2Ugb2YgU2FmYXJpXG4gICAgICAgICAgICAgIGdyb3VwRWxlbWVudC5sYWJlbCA9IG9wdGlvbi5ncm91cCA9PT0gbnVsbCA/ICdudWxsJyA6IG9wdGlvbi5ncm91cDtcblxuICAgICAgICAgICAgICAvLyBTdG9yZSBpdCBmb3IgdXNlIGxhdGVyXG4gICAgICAgICAgICAgIGdyb3VwRWxlbWVudE1hcFtvcHRpb24uZ3JvdXBdID0gZ3JvdXBFbGVtZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZGRPcHRpb25FbGVtZW50KG9wdGlvbiwgZ3JvdXBFbGVtZW50KTtcblxuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIC8vIFRoaXMgb3B0aW9uIGlzIG5vdCBpbiBhIGdyb3VwXG4gICAgICAgICAgICBhZGRPcHRpb25FbGVtZW50KG9wdGlvbiwgbGlzdEZyYWdtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNlbGVjdEVsZW1lbnRbMF0uYXBwZW5kQ2hpbGQobGlzdEZyYWdtZW50KTtcblxuICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZCBkdWUgdG8gdGhlIHVwZGF0ZSB0byB0aGUgb3B0aW9uc1xuICAgICAgICBpZiAoIW5nTW9kZWxDdHJsLiRpc0VtcHR5KHByZXZpb3VzVmFsdWUpKSB7XG4gICAgICAgICAgdmFyIG5leHRWYWx1ZSA9IHNlbGVjdEN0cmwucmVhZFZhbHVlKCk7XG4gICAgICAgICAgdmFyIGlzTm90UHJpbWl0aXZlID0gbmdPcHRpb25zLnRyYWNrQnkgfHwgbXVsdGlwbGU7XG4gICAgICAgICAgaWYgKGlzTm90UHJpbWl0aXZlID8gIWVxdWFscyhwcmV2aW91c1ZhbHVlLCBuZXh0VmFsdWUpIDogcHJldmlvdXNWYWx1ZSAhPT0gbmV4dFZhbHVlKSB7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKG5leHRWYWx1ZSk7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgdGVybWluYWw6IHRydWUsXG4gICAgcmVxdWlyZTogWydzZWxlY3QnLCAnbmdNb2RlbCddLFxuICAgIGxpbms6IHtcbiAgICAgIHByZTogZnVuY3Rpb24gbmdPcHRpb25zUHJlTGluayhzY29wZSwgc2VsZWN0RWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICAgICAgLy8gRGVhY3RpdmF0ZSB0aGUgU2VsZWN0Q29udHJvbGxlci5yZWdpc3RlciBtZXRob2QgdG8gcHJldmVudFxuICAgICAgICAvLyBvcHRpb24gZGlyZWN0aXZlcyBmcm9tIGFjY2lkZW50YWxseSByZWdpc3RlcmluZyB0aGVtc2VsdmVzXG4gICAgICAgIC8vIChhbmQgdW53YW50ZWQgJGRlc3Ryb3kgaGFuZGxlcnMgZXRjLilcbiAgICAgICAgY3RybHNbMF0ucmVnaXN0ZXJPcHRpb24gPSBub29wO1xuICAgICAgfSxcbiAgICAgIHBvc3Q6IG5nT3B0aW9uc1Bvc3RMaW5rXG4gICAgfVxuICB9O1xufV07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdQbHVyYWxpemVcbiAqIEByZXN0cmljdCBFQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogYG5nUGx1cmFsaXplYCBpcyBhIGRpcmVjdGl2ZSB0aGF0IGRpc3BsYXlzIG1lc3NhZ2VzIGFjY29yZGluZyB0byBlbi1VUyBsb2NhbGl6YXRpb24gcnVsZXMuXG4gKiBUaGVzZSBydWxlcyBhcmUgYnVuZGxlZCB3aXRoIGFuZ3VsYXIuanMsIGJ1dCBjYW4gYmUgb3ZlcnJpZGRlblxuICogKHNlZSB7QGxpbmsgZ3VpZGUvaTE4biBBbmd1bGFySlMgaTE4bn0gZGV2IGd1aWRlKS4gWW91IGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZSBkaXJlY3RpdmVcbiAqIGJ5IHNwZWNpZnlpbmcgdGhlIG1hcHBpbmdzIGJldHdlZW5cbiAqIFtwbHVyYWwgY2F0ZWdvcmllc10oaHR0cDovL3VuaWNvZGUub3JnL3JlcG9zL2NsZHItdG1wL3RydW5rL2RpZmYvc3VwcGxlbWVudGFsL2xhbmd1YWdlX3BsdXJhbF9ydWxlcy5odG1sKVxuICogYW5kIHRoZSBzdHJpbmdzIHRvIGJlIGRpc3BsYXllZC5cbiAqXG4gKiAjIyBQbHVyYWwgY2F0ZWdvcmllcyBhbmQgZXhwbGljaXQgbnVtYmVyIHJ1bGVzXG4gKiBUaGVyZSBhcmUgdHdvXG4gKiBbcGx1cmFsIGNhdGVnb3JpZXNdKGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcy9jbGRyLXRtcC90cnVuay9kaWZmL3N1cHBsZW1lbnRhbC9sYW5ndWFnZV9wbHVyYWxfcnVsZXMuaHRtbClcbiAqIGluIEFuZ3VsYXJKUydzIGRlZmF1bHQgZW4tVVMgbG9jYWxlOiBcIm9uZVwiIGFuZCBcIm90aGVyXCIuXG4gKlxuICogV2hpbGUgYSBwbHVyYWwgY2F0ZWdvcnkgbWF5IG1hdGNoIG1hbnkgbnVtYmVycyAoZm9yIGV4YW1wbGUsIGluIGVuLVVTIGxvY2FsZSwgXCJvdGhlclwiIGNhbiBtYXRjaFxuICogYW55IG51bWJlciB0aGF0IGlzIG5vdCAxKSwgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUgY2FuIG9ubHkgbWF0Y2ggb25lIG51bWJlci4gRm9yIGV4YW1wbGUsIHRoZVxuICogZXhwbGljaXQgbnVtYmVyIHJ1bGUgZm9yIFwiM1wiIG1hdGNoZXMgdGhlIG51bWJlciAzLiBUaGVyZSBhcmUgZXhhbXBsZXMgb2YgcGx1cmFsIGNhdGVnb3JpZXNcbiAqIGFuZCBleHBsaWNpdCBudW1iZXIgcnVsZXMgdGhyb3VnaG91dCB0aGUgcmVzdCBvZiB0aGlzIGRvY3VtZW50YXRpb24uXG4gKlxuICogIyMgQ29uZmlndXJpbmcgbmdQbHVyYWxpemVcbiAqIFlvdSBjb25maWd1cmUgbmdQbHVyYWxpemUgYnkgcHJvdmlkaW5nIDIgYXR0cmlidXRlczogYGNvdW50YCBhbmQgYHdoZW5gLlxuICogWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gb3B0aW9uYWwgYXR0cmlidXRlLCBgb2Zmc2V0YC5cbiAqXG4gKiBUaGUgdmFsdWUgb2YgdGhlIGBjb3VudGAgYXR0cmlidXRlIGNhbiBiZSBlaXRoZXIgYSBzdHJpbmcgb3IgYW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb25cbiAqIEFuZ3VsYXJKUyBleHByZXNzaW9ufTsgdGhlc2UgYXJlIGV2YWx1YXRlZCBvbiB0aGUgY3VycmVudCBzY29wZSBmb3IgaXRzIGJvdW5kIHZhbHVlLlxuICpcbiAqIFRoZSBgd2hlbmAgYXR0cmlidXRlIHNwZWNpZmllcyB0aGUgbWFwcGluZ3MgYmV0d2VlbiBwbHVyYWwgY2F0ZWdvcmllcyBhbmQgdGhlIGFjdHVhbFxuICogc3RyaW5nIHRvIGJlIGRpc3BsYXllZC4gVGhlIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgc2hvdWxkIGJlIGEgSlNPTiBvYmplY3QuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBjb25maWd1cmUgbmdQbHVyYWxpemU6XG4gKlxuICogYGBgaHRtbFxuICogPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCJcbiAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICcxIHBlcnNvbiBpcyB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne30gcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XG4gKiA8L25nLXBsdXJhbGl6ZT5cbiAqYGBgXG4gKlxuICogSW4gdGhlIGV4YW1wbGUsIGBcIjA6IE5vYm9keSBpcyB2aWV3aW5nLlwiYCBpcyBhbiBleHBsaWNpdCBudW1iZXIgcnVsZS4gSWYgeW91IGRpZCBub3RcbiAqIHNwZWNpZnkgdGhpcyBydWxlLCAwIHdvdWxkIGJlIG1hdGNoZWQgdG8gdGhlIFwib3RoZXJcIiBjYXRlZ29yeSBhbmQgXCIwIHBlb3BsZSBhcmUgdmlld2luZ1wiXG4gKiB3b3VsZCBiZSBzaG93biBpbnN0ZWFkIG9mIFwiTm9ib2R5IGlzIHZpZXdpbmdcIi4gWW91IGNhbiBzcGVjaWZ5IGFuIGV4cGxpY2l0IG51bWJlciBydWxlIGZvclxuICogb3RoZXIgbnVtYmVycywgZm9yIGV4YW1wbGUgMTIsIHNvIHRoYXQgaW5zdGVhZCBvZiBzaG93aW5nIFwiMTIgcGVvcGxlIGFyZSB2aWV3aW5nXCIsIHlvdSBjYW5cbiAqIHNob3cgXCJhIGRvemVuIHBlb3BsZSBhcmUgdmlld2luZ1wiLlxuICpcbiAqIFlvdSBjYW4gdXNlIGEgc2V0IG9mIGNsb3NlZCBicmFjZXMgKGB7fWApIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHRoZSBudW1iZXIgdGhhdCB5b3Ugd2FudCBzdWJzdGl0dXRlZFxuICogaW50byBwbHVyYWxpemVkIHN0cmluZ3MuIEluIHRoZSBwcmV2aW91cyBleGFtcGxlLCBBbmd1bGFySlMgd2lsbCByZXBsYWNlIGB7fWAgd2l0aFxuICogPHNwYW4gbmctbm9uLWJpbmRhYmxlPmB7e3BlcnNvbkNvdW50fX1gPC9zcGFuPi4gVGhlIGNsb3NlZCBicmFjZXMgYHt9YCBpcyBhIHBsYWNlaG9sZGVyXG4gKiBmb3IgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7bnVtYmVyRXhwcmVzc2lvbn19PC9zcGFuPi5cbiAqXG4gKiBJZiBubyBydWxlIGlzIGRlZmluZWQgZm9yIGEgY2F0ZWdvcnksIHRoZW4gYW4gZW1wdHkgc3RyaW5nIGlzIGRpc3BsYXllZCBhbmQgYSB3YXJuaW5nIGlzIGdlbmVyYXRlZC5cbiAqIE5vdGUgdGhhdCBzb21lIGxvY2FsZXMgZGVmaW5lIG1vcmUgY2F0ZWdvcmllcyB0aGFuIGBvbmVgIGFuZCBgb3RoZXJgLiBGb3IgZXhhbXBsZSwgZnItZnIgZGVmaW5lcyBgZmV3YCBhbmQgYG1hbnlgLlxuICpcbiAqICMjIENvbmZpZ3VyaW5nIG5nUGx1cmFsaXplIHdpdGggb2Zmc2V0XG4gKiBUaGUgYG9mZnNldGAgYXR0cmlidXRlIGFsbG93cyBmdXJ0aGVyIGN1c3RvbWl6YXRpb24gb2YgcGx1cmFsaXplZCB0ZXh0LCB3aGljaCBjYW4gcmVzdWx0IGluXG4gKiBhIGJldHRlciB1c2VyIGV4cGVyaWVuY2UuIEZvciBleGFtcGxlLCBpbnN0ZWFkIG9mIHRoZSBtZXNzYWdlIFwiNCBwZW9wbGUgYXJlIHZpZXdpbmcgdGhpcyBkb2N1bWVudFwiLFxuICogeW91IG1pZ2h0IGRpc3BsYXkgXCJKb2huLCBLYXRlIGFuZCAyIG90aGVycyBhcmUgdmlld2luZyB0aGlzIGRvY3VtZW50XCIuXG4gKiBUaGUgb2Zmc2V0IGF0dHJpYnV0ZSBhbGxvd3MgeW91IHRvIG9mZnNldCBhIG51bWJlciBieSBhbnkgZGVzaXJlZCB2YWx1ZS5cbiAqIExldCdzIHRha2UgYSBsb29rIGF0IGFuIGV4YW1wbGU6XG4gKlxuICogYGBgaHRtbFxuICogPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCIgb2Zmc2V0PTJcbiAqICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJzEnOiAne3twZXJzb24xfX0gaXMgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJzInOiAne3twZXJzb24xfX0gYW5kIHt7cGVyc29uMn19IGFyZSB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQge30gb3RoZXIgcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XG4gKiA8L25nLXBsdXJhbGl6ZT5cbiAqIGBgYFxuICpcbiAqIE5vdGljZSB0aGF0IHdlIGFyZSBzdGlsbCB1c2luZyB0d28gcGx1cmFsIGNhdGVnb3JpZXMob25lLCBvdGhlciksIGJ1dCB3ZSBhZGRlZFxuICogdGhyZWUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIDAsIDEgYW5kIDIuXG4gKiBXaGVuIG9uZSBwZXJzb24sIHBlcmhhcHMgSm9obiwgdmlld3MgdGhlIGRvY3VtZW50LCBcIkpvaG4gaXMgdmlld2luZ1wiIHdpbGwgYmUgc2hvd24uXG4gKiBXaGVuIHRocmVlIHBlb3BsZSB2aWV3IHRoZSBkb2N1bWVudCwgbm8gZXhwbGljaXQgbnVtYmVyIHJ1bGUgaXMgZm91bmQsIHNvXG4gKiBhbiBvZmZzZXQgb2YgMiBpcyB0YWtlbiBvZmYgMywgYW5kIEFuZ3VsYXJKUyB1c2VzIDEgdG8gZGVjaWRlIHRoZSBwbHVyYWwgY2F0ZWdvcnkuXG4gKiBJbiB0aGlzIGNhc2UsIHBsdXJhbCBjYXRlZ29yeSAnb25lJyBpcyBtYXRjaGVkIGFuZCBcIkpvaG4sIE1hcnkgYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmdcIlxuICogaXMgc2hvd24uXG4gKlxuICogTm90ZSB0aGF0IHdoZW4geW91IHNwZWNpZnkgb2Zmc2V0cywgeW91IG11c3QgcHJvdmlkZSBleHBsaWNpdCBudW1iZXIgcnVsZXMgZm9yXG4gKiBudW1iZXJzIGZyb20gMCB1cCB0byBhbmQgaW5jbHVkaW5nIHRoZSBvZmZzZXQuIElmIHlvdSB1c2UgYW4gb2Zmc2V0IG9mIDMsIGZvciBleGFtcGxlLFxuICogeW91IG11c3QgcHJvdmlkZSBleHBsaWNpdCBudW1iZXIgcnVsZXMgZm9yIDAsIDEsIDIgYW5kIDMuIFlvdSBtdXN0IGFsc28gcHJvdmlkZSBwbHVyYWwgc3RyaW5ncyBmb3JcbiAqIHBsdXJhbCBjYXRlZ29yaWVzIFwib25lXCIgYW5kIFwib3RoZXJcIi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xleHByZXNzaW9ufSBjb3VudCBUaGUgdmFyaWFibGUgdG8gYmUgYm91bmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZ30gd2hlbiBUaGUgbWFwcGluZyBiZXR3ZWVuIHBsdXJhbCBjYXRlZ29yeSB0byBpdHMgY29ycmVzcG9uZGluZyBzdHJpbmdzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvZmZzZXQgT2Zmc2V0IHRvIGRlZHVjdCBmcm9tIHRoZSB0b3RhbCBudW1iZXIuXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBtb2R1bGU9XCJwbHVyYWxpemVFeGFtcGxlXCIgbmFtZT1cIm5nLXBsdXJhbGl6ZVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgncGx1cmFsaXplRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLnBlcnNvbjEgPSAnSWdvcic7XG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb24yID0gJ01pc2tvJztcbiAgICAgICAgICAgICAgJHNjb3BlLnBlcnNvbkNvdW50ID0gMTtcbiAgICAgICAgICAgIH1dKTtcbiAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgPGxhYmVsPlBlcnNvbiAxOjxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwicGVyc29uMVwiIHZhbHVlPVwiSWdvclwiIC8+PC9sYWJlbD48YnIvPlxuICAgICAgICAgIDxsYWJlbD5QZXJzb24gMjo8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInBlcnNvbjJcIiB2YWx1ZT1cIk1pc2tvXCIgLz48L2xhYmVsPjxici8+XG4gICAgICAgICAgPGxhYmVsPk51bWJlciBvZiBQZW9wbGU6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb25Db3VudFwiIHZhbHVlPVwiMVwiIC8+PC9sYWJlbD48YnIvPlxuXG4gICAgICAgICAgPCEtLS0gRXhhbXBsZSB3aXRoIHNpbXBsZSBwbHVyYWxpemF0aW9uIHJ1bGVzIGZvciBlbiBsb2NhbGUgLS0tPlxuICAgICAgICAgIFdpdGhvdXQgT2Zmc2V0OlxuICAgICAgICAgIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICcxIHBlcnNvbiBpcyB2aWV3aW5nLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t9IHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxuICAgICAgICAgIDwvbmctcGx1cmFsaXplPjxicj5cblxuICAgICAgICAgIDwhLS0tIEV4YW1wbGUgd2l0aCBvZmZzZXQgLS0tPlxuICAgICAgICAgIFdpdGggT2Zmc2V0KDIpOlxuICAgICAgICAgIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiIG9mZnNldD0yXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEnOiAne3twZXJzb24xfX0gaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcyJzogJ3t7cGVyc29uMX19IGFuZCB7e3BlcnNvbjJ9fSBhcmUgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQge30gb3RoZXIgcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XG4gICAgICAgICAgPC9uZy1wbHVyYWxpemU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIHNob3cgY29ycmVjdCBwbHVyYWxpemVkIHN0cmluZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB3aXRob3V0T2Zmc2V0ID0gZWxlbWVudC5hbGwoYnkuY3NzKCduZy1wbHVyYWxpemUnKSkuZ2V0KDApO1xuICAgICAgICAgIHZhciB3aXRoT2Zmc2V0ID0gZWxlbWVudC5hbGwoYnkuY3NzKCduZy1wbHVyYWxpemUnKSkuZ2V0KDEpO1xuICAgICAgICAgIHZhciBjb3VudElucHV0ID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uQ291bnQnKSk7XG5cbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzEgcGVyc29uIGlzIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yIGlzIHZpZXdpbmcuJyk7XG5cbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnMCcpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdOb2JvZHkgaXMgdmlld2luZy4nKTtcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ05vYm9keSBpcyB2aWV3aW5nLicpO1xuXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzInKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnMiBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yIGFuZCBNaXNrbyBhcmUgdmlld2luZy4nKTtcblxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCczJyk7XG5cbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzMgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciwgTWlza28gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyk7XG5cbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnNCcpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCc0IHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IsIE1pc2tvIGFuZCAyIG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KCdzaG91bGQgc2hvdyBkYXRhLWJvdW5kIG5hbWVzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHdpdGhPZmZzZXQgPSBlbGVtZW50LmFsbChieS5jc3MoJ25nLXBsdXJhbGl6ZScpKS5nZXQoMSk7XG4gICAgICAgICAgdmFyIHBlcnNvbkNvdW50ID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uQ291bnQnKSk7XG4gICAgICAgICAgdmFyIHBlcnNvbjEgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb24xJykpO1xuICAgICAgICAgIHZhciBwZXJzb24yID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uMicpKTtcbiAgICAgICAgICBwZXJzb25Db3VudC5jbGVhcigpO1xuICAgICAgICAgIHBlcnNvbkNvdW50LnNlbmRLZXlzKCc0Jyk7XG4gICAgICAgICAgcGVyc29uMS5jbGVhcigpO1xuICAgICAgICAgIHBlcnNvbjEuc2VuZEtleXMoJ0RpJyk7XG4gICAgICAgICAgcGVyc29uMi5jbGVhcigpO1xuICAgICAgICAgIHBlcnNvbjIuc2VuZEtleXMoJ1ZvanRhJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdEaSwgVm9qdGEgYW5kIDIgb3RoZXIgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1BsdXJhbGl6ZURpcmVjdGl2ZSA9IFsnJGxvY2FsZScsICckaW50ZXJwb2xhdGUnLCAnJGxvZycsIGZ1bmN0aW9uKCRsb2NhbGUsICRpbnRlcnBvbGF0ZSwgJGxvZykge1xuICB2YXIgQlJBQ0UgPSAve30vZyxcbiAgICAgIElTX1dIRU4gPSAvXndoZW4oTWludXMpPyguKykkLztcblxuICByZXR1cm4ge1xuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICB2YXIgbnVtYmVyRXhwID0gYXR0ci5jb3VudCxcbiAgICAgICAgICB3aGVuRXhwID0gYXR0ci4kYXR0ci53aGVuICYmIGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyLndoZW4pLCAvLyB3ZSBoYXZlIHt7fX0gaW4gYXR0cnNcbiAgICAgICAgICBvZmZzZXQgPSBhdHRyLm9mZnNldCB8fCAwLFxuICAgICAgICAgIHdoZW5zID0gc2NvcGUuJGV2YWwod2hlbkV4cCkgfHwge30sXG4gICAgICAgICAgd2hlbnNFeHBGbnMgPSB7fSxcbiAgICAgICAgICBzdGFydFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLFxuICAgICAgICAgIGVuZFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKSxcbiAgICAgICAgICBicmFjZVJlcGxhY2VtZW50ID0gc3RhcnRTeW1ib2wgKyBudW1iZXJFeHAgKyAnLScgKyBvZmZzZXQgKyBlbmRTeW1ib2wsXG4gICAgICAgICAgd2F0Y2hSZW1vdmVyID0gYW5ndWxhci5ub29wLFxuICAgICAgICAgIGxhc3RDb3VudDtcblxuICAgICAgZm9yRWFjaChhdHRyLCBmdW5jdGlvbihleHByZXNzaW9uLCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIHZhciB0bXBNYXRjaCA9IElTX1dIRU4uZXhlYyhhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgaWYgKHRtcE1hdGNoKSB7XG4gICAgICAgICAgdmFyIHdoZW5LZXkgPSAodG1wTWF0Y2hbMV0gPyAnLScgOiAnJykgKyBsb3dlcmNhc2UodG1wTWF0Y2hbMl0pO1xuICAgICAgICAgIHdoZW5zW3doZW5LZXldID0gZWxlbWVudC5hdHRyKGF0dHIuJGF0dHJbYXR0cmlidXRlTmFtZV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGZvckVhY2god2hlbnMsIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGtleSkge1xuICAgICAgICB3aGVuc0V4cEZuc1trZXldID0gJGludGVycG9sYXRlKGV4cHJlc3Npb24ucmVwbGFjZShCUkFDRSwgYnJhY2VSZXBsYWNlbWVudCkpO1xuXG4gICAgICB9KTtcblxuICAgICAgc2NvcGUuJHdhdGNoKG51bWJlckV4cCwgZnVuY3Rpb24gbmdQbHVyYWxpemVXYXRjaEFjdGlvbihuZXdWYWwpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gcGFyc2VGbG9hdChuZXdWYWwpO1xuICAgICAgICB2YXIgY291bnRJc05hTiA9IGlzTnVtYmVyTmFOKGNvdW50KTtcblxuICAgICAgICBpZiAoIWNvdW50SXNOYU4gJiYgIShjb3VudCBpbiB3aGVucykpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleHBsaWNpdCBudW1iZXIgcnVsZSBzdWNoIGFzIDEsIDIsIDMuLi4gaXMgZGVmaW5lZCwganVzdCB1c2UgaXQuXG4gICAgICAgICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBpdCBhZ2FpbnN0IHBsdXJhbGl6YXRpb24gcnVsZXMgaW4gJGxvY2FsZSBzZXJ2aWNlLlxuICAgICAgICAgIGNvdW50ID0gJGxvY2FsZS5wbHVyYWxDYXQoY291bnQgLSBvZmZzZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgYm90aCBgY291bnRgIGFuZCBgbGFzdENvdW50YCBhcmUgTmFOLCB3ZSBkb24ndCBuZWVkIHRvIHJlLXJlZ2lzdGVyIGEgd2F0Y2guXG4gICAgICAgIC8vIEluIEpTIGBOYU4gIT09IE5hTmAsIHNvIHdlIGhhdmUgdG8gZXhwbGljaXRseSBjaGVjay5cbiAgICAgICAgaWYgKChjb3VudCAhPT0gbGFzdENvdW50KSAmJiAhKGNvdW50SXNOYU4gJiYgaXNOdW1iZXJOYU4obGFzdENvdW50KSkpIHtcbiAgICAgICAgICB3YXRjaFJlbW92ZXIoKTtcbiAgICAgICAgICB2YXIgd2hlbkV4cEZuID0gd2hlbnNFeHBGbnNbY291bnRdO1xuICAgICAgICAgIGlmIChpc1VuZGVmaW5lZCh3aGVuRXhwRm4pKSB7XG4gICAgICAgICAgICBpZiAobmV3VmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgJGxvZy5kZWJ1ZygnbmdQbHVyYWxpemU6IG5vIHJ1bGUgZGVmaW5lZCBmb3IgXFwnJyArIGNvdW50ICsgJ1xcJyBpbiAnICsgd2hlbkV4cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3YXRjaFJlbW92ZXIgPSBub29wO1xuICAgICAgICAgICAgdXBkYXRlRWxlbWVudFRleHQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2F0Y2hSZW1vdmVyID0gc2NvcGUuJHdhdGNoKHdoZW5FeHBGbiwgdXBkYXRlRWxlbWVudFRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsYXN0Q291bnQgPSBjb3VudDtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnRUZXh0KG5ld1RleHQpIHtcbiAgICAgICAgZWxlbWVudC50ZXh0KG5ld1RleHQgfHwgJycpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1dO1xuXG4vKiBleHBvcnRlZCBuZ1JlcGVhdERpcmVjdGl2ZSAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nUmVwZWF0XG4gKiBAbXVsdGlFbGVtZW50XG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ1JlcGVhdGAgZGlyZWN0aXZlIGluc3RhbnRpYXRlcyBhIHRlbXBsYXRlIG9uY2UgcGVyIGl0ZW0gZnJvbSBhIGNvbGxlY3Rpb24uIEVhY2ggdGVtcGxhdGVcbiAqIGluc3RhbmNlIGdldHMgaXRzIG93biBzY29wZSwgd2hlcmUgdGhlIGdpdmVuIGxvb3AgdmFyaWFibGUgaXMgc2V0IHRvIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gaXRlbSxcbiAqIGFuZCBgJGluZGV4YCBpcyBzZXQgdG8gdGhlIGl0ZW0gaW5kZXggb3Iga2V5LlxuICpcbiAqIFNwZWNpYWwgcHJvcGVydGllcyBhcmUgZXhwb3NlZCBvbiB0aGUgbG9jYWwgc2NvcGUgb2YgZWFjaCB0ZW1wbGF0ZSBpbnN0YW5jZSwgaW5jbHVkaW5nOlxuICpcbiAqIHwgVmFyaWFibGUgIHwgVHlwZSAgICAgICAgICAgIHwgRGV0YWlscyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgYCRpbmRleGAgIHwge0B0eXBlIG51bWJlcn0gIHwgaXRlcmF0b3Igb2Zmc2V0IG9mIHRoZSByZXBlYXRlZCBlbGVtZW50ICgwLi5sZW5ndGgtMSkgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYCRmaXJzdGAgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCBpcyBmaXJzdCBpbiB0aGUgaXRlcmF0b3IuICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYCRtaWRkbGVgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCBpcyBiZXR3ZWVuIHRoZSBmaXJzdCBhbmQgbGFzdCBpbiB0aGUgaXRlcmF0b3IuIHxcbiAqIHwgYCRsYXN0YCAgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCBpcyBsYXN0IGluIHRoZSBpdGVyYXRvci4gICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYCRldmVuYCAgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgaXRlcmF0b3IgcG9zaXRpb24gYCRpbmRleGAgaXMgZXZlbiAob3RoZXJ3aXNlIGZhbHNlKS4gICAgICAgICAgIHxcbiAqIHwgYCRvZGRgICAgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgaXRlcmF0b3IgcG9zaXRpb24gYCRpbmRleGAgaXMgb2RkIChvdGhlcndpc2UgZmFsc2UpLiAgICAgICAgICAgIHxcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogICBDcmVhdGluZyBhbGlhc2VzIGZvciB0aGVzZSBwcm9wZXJ0aWVzIGlzIHBvc3NpYmxlIHdpdGgge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0luaXQgYG5nSW5pdGB9LlxuICogICBUaGlzIG1heSBiZSB1c2VmdWwgd2hlbiwgZm9yIGluc3RhbmNlLCBuZXN0aW5nIG5nUmVwZWF0cy5cbiAqIDwvZGl2PlxuICpcbiAqXG4gKiAjIyBJdGVyYXRpbmcgb3ZlciBvYmplY3QgcHJvcGVydGllc1xuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGdldCBgbmdSZXBlYXRgIHRvIGl0ZXJhdGUgb3ZlciB0aGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QgdXNpbmcgdGhlIGZvbGxvd2luZ1xuICogc3ludGF4OlxuICpcbiAqIGBgYGpzXG4gKiA8ZGl2IG5nLXJlcGVhdD1cIihrZXksIHZhbHVlKSBpbiBteU9ialwiPiAuLi4gPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBIb3dldmVyLCB0aGVyZSBhcmUgYSBmZXcgbGltaXRhdGlvbnMgY29tcGFyZWQgdG8gYXJyYXkgaXRlcmF0aW9uOlxuICpcbiAqIC0gVGhlIEphdmFTY3JpcHQgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCBkZWZpbmUgdGhlIG9yZGVyIG9mIGtleXNcbiAqICAgcmV0dXJuZWQgZm9yIGFuIG9iamVjdCwgc28gQW5ndWxhckpTIHJlbGllcyBvbiB0aGUgb3JkZXIgcmV0dXJuZWQgYnkgdGhlIGJyb3dzZXJcbiAqICAgd2hlbiBydW5uaW5nIGBmb3Iga2V5IGluIG15T2JqYC4gQnJvd3NlcnMgZ2VuZXJhbGx5IGZvbGxvdyB0aGUgc3RyYXRlZ3kgb2YgcHJvdmlkaW5nXG4gKiAgIGtleXMgaW4gdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBkZWZpbmVkLCBhbHRob3VnaCB0aGVyZSBhcmUgZXhjZXB0aW9ucyB3aGVuIGtleXMgYXJlIGRlbGV0ZWRcbiAqICAgYW5kIHJlaW5zdGF0ZWQuIFNlZSB0aGVcbiAqICAgW01ETiBwYWdlIG9uIGBkZWxldGVgIGZvciBtb3JlIGluZm9dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9kZWxldGUjQ3Jvc3MtYnJvd3Nlcl9ub3RlcykuXG4gKlxuICogLSBgbmdSZXBlYXRgIHdpbGwgc2lsZW50bHkgKmlnbm9yZSogb2JqZWN0IGtleXMgc3RhcnRpbmcgd2l0aCBgJGAsIGJlY2F1c2VcbiAqICAgaXQncyBhIHByZWZpeCB1c2VkIGJ5IEFuZ3VsYXJKUyBmb3IgcHVibGljIChgJGApIGFuZCBwcml2YXRlIChgJCRgKSBwcm9wZXJ0aWVzLlxuICpcbiAqIC0gVGhlIGJ1aWx0LWluIGZpbHRlcnMge0BsaW5rIG5nLm9yZGVyQnkgb3JkZXJCeX0gYW5kIHtAbGluayBuZy5maWx0ZXIgZmlsdGVyfSBkbyBub3Qgd29yayB3aXRoXG4gKiAgIG9iamVjdHMsIGFuZCB3aWxsIHRocm93IGFuIGVycm9yIGlmIHVzZWQgd2l0aCBvbmUuXG4gKlxuICogSWYgeW91IGFyZSBoaXR0aW5nIGFueSBvZiB0aGVzZSBsaW1pdGF0aW9ucywgdGhlIHJlY29tbWVuZGVkIHdvcmthcm91bmQgaXMgdG8gY29udmVydCB5b3VyIG9iamVjdCBpbnRvIGFuIGFycmF5XG4gKiB0aGF0IGlzIHNvcnRlZCBpbnRvIHRoZSBvcmRlciB0aGF0IHlvdSBwcmVmZXIgYmVmb3JlIHByb3ZpZGluZyBpdCB0byBgbmdSZXBlYXRgLiBZb3UgY291bGRcbiAqIGRvIHRoaXMgd2l0aCBhIGZpbHRlciBzdWNoIGFzIFt0b0FycmF5RmlsdGVyXShodHRwOi8vbmdtb2R1bGVzLm9yZy9tb2R1bGVzL2FuZ3VsYXItdG9BcnJheUZpbHRlcilcbiAqIG9yIGltcGxlbWVudCBhIGAkd2F0Y2hgIG9uIHRoZSBvYmplY3QgeW91cnNlbGYuXG4gKlxuICpcbiAqICMjIFRyYWNraW5nIGFuZCBEdXBsaWNhdGVzXG4gKlxuICogYG5nUmVwZWF0YCB1c2VzIHtAbGluayAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaENvbGxlY3Rpb24gJHdhdGNoQ29sbGVjdGlvbn0gdG8gZGV0ZWN0IGNoYW5nZXMgaW5cbiAqIHRoZSBjb2xsZWN0aW9uLiBXaGVuIGEgY2hhbmdlIGhhcHBlbnMsIGBuZ1JlcGVhdGAgdGhlbiBtYWtlcyB0aGUgY29ycmVzcG9uZGluZyBjaGFuZ2VzIHRvIHRoZSBET006XG4gKlxuICogKiBXaGVuIGFuIGl0ZW0gaXMgYWRkZWQsIGEgbmV3IGluc3RhbmNlIG9mIHRoZSB0ZW1wbGF0ZSBpcyBhZGRlZCB0byB0aGUgRE9NLlxuICogKiBXaGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCwgaXRzIHRlbXBsYXRlIGluc3RhbmNlIGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICogKiBXaGVuIGl0ZW1zIGFyZSByZW9yZGVyZWQsIHRoZWlyIHJlc3BlY3RpdmUgdGVtcGxhdGVzIGFyZSByZW9yZGVyZWQgaW4gdGhlIERPTS5cbiAqXG4gKiBUbyBtaW5pbWl6ZSBjcmVhdGlvbiBvZiBET00gZWxlbWVudHMsIGBuZ1JlcGVhdGAgdXNlcyBhIGZ1bmN0aW9uXG4gKiB0byBcImtlZXAgdHJhY2tcIiBvZiBhbGwgaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb24gYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgRE9NIGVsZW1lbnRzLlxuICogRm9yIGV4YW1wbGUsIGlmIGFuIGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb24sIGBuZ1JlcGVhdGAgd2lsbCBrbm93IHRoYXQgYWxsIG90aGVyIGl0ZW1zXG4gKiBhbHJlYWR5IGhhdmUgRE9NIGVsZW1lbnRzLCBhbmQgd2lsbCBub3QgcmUtcmVuZGVyIHRoZW0uXG4gKlxuICogQWxsIGRpZmZlcmVudCB0eXBlcyBvZiB0cmFja2luZyBmdW5jdGlvbnMsIHRoZWlyIHN5bnRheCwgYW5kIGFuZCB0aGVpciBzdXBwb3J0IGZvciBkdXBsaWNhdGVcbiAqIGl0ZW1zIGluIGNvbGxlY3Rpb25zIGNhbiBiZSBmb3VuZCBpbiB0aGVcbiAqIHtAbGluayBuZ1JlcGVhdCNuZ1JlcGVhdC1hcmd1bWVudHMgbmdSZXBlYXQgZXhwcmVzc2lvbiBkZXNjcmlwdGlvbn0uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAqICoqQmVzdCBQcmFjdGljZToqKiBJZiB5b3UgYXJlIHdvcmtpbmcgd2l0aCBvYmplY3RzIHRoYXQgaGF2ZSBhIHVuaXF1ZSBpZGVudGlmaWVyIHByb3BlcnR5LCB5b3VcbiAqIHNob3VsZCB0cmFjayBieSB0aGlzIGlkZW50aWZpZXIgaW5zdGVhZCBvZiB0aGUgb2JqZWN0IGluc3RhbmNlLFxuICogZS5nLiBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSBpdGVtLmlkYC5cbiAqIFNob3VsZCB5b3UgcmVsb2FkIHlvdXIgZGF0YSBsYXRlciwgYG5nUmVwZWF0YCB3aWxsIG5vdCBoYXZlIHRvIHJlYnVpbGQgdGhlIERPTSBlbGVtZW50cyBmb3IgaXRlbXNcbiAqIGl0IGhhcyBhbHJlYWR5IHJlbmRlcmVkLCBldmVuIGlmIHRoZSBKYXZhU2NyaXB0IG9iamVjdHMgaW4gdGhlIGNvbGxlY3Rpb24gaGF2ZSBiZWVuIHN1YnN0aXR1dGVkXG4gKiBmb3IgbmV3IG9uZXMuIEZvciBsYXJnZSBjb2xsZWN0aW9ucywgdGhpcyBzaWduaWZpY2FudGx5IGltcHJvdmVzIHJlbmRlcmluZyBwZXJmb3JtYW5jZS5cbiAqIDwvZGl2PlxuICpcbiAqICMjIyBFZmZlY3RzIG9mIERPTSBFbGVtZW50IHJlLXVzZVxuICpcbiAqIFdoZW4gRE9NIGVsZW1lbnRzIGFyZSByZS11c2VkLCBuZ1JlcGVhdCB1cGRhdGVzIHRoZSBzY29wZSBmb3IgdGhlIGVsZW1lbnQsIHdoaWNoIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgdXBkYXRlIGFueSBhY3RpdmUgYmluZGluZ3Mgb24gdGhlIHRlbXBsYXRlLiBIb3dldmVyLCBvdGhlclxuICogZnVuY3Rpb25hbGl0eSB3aWxsIG5vdCBiZSB1cGRhdGVkLCBiZWNhdXNlIHRoZSBlbGVtZW50IGlzIG5vdCByZS1jcmVhdGVkOlxuICpcbiAqIC0gRGlyZWN0aXZlcyBhcmUgbm90IHJlLWNvbXBpbGVkXG4gKiAtIHtAbGluayBndWlkZS9leHByZXNzaW9uI29uZS10aW1lLWJpbmRpbmcgb25lLXRpbWUgZXhwcmVzc2lvbnN9IG9uIHRoZSByZXBlYXRlZCB0ZW1wbGF0ZSBhcmUgbm90XG4gKiB1cGRhdGVkIGlmIHRoZXkgaGF2ZSBzdGFiaWxpemVkLlxuICpcbiAqIFRoZSBhYm92ZSBhZmZlY3RzIGFsbCBraW5kcyBvZiBlbGVtZW50IHJlLXVzZSBkdWUgdG8gdHJhY2tpbmcsIGJ1dCBtYXkgYmUgZXNwZWNpYWxseSB2aXNpYmxlXG4gKiB3aGVuIHRyYWNraW5nIGJ5IGAkaW5kZXhgIGR1ZSB0byB0aGUgd2F5IG5nUmVwZWF0IHJlLXVzZXMgZWxlbWVudHMuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIHRoZSBlZmZlY3RzIG9mIGRpZmZlcmVudCBhY3Rpb25zIHdpdGggdHJhY2tpbmc6XG5cbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdSZXBlYXRcIiBuYW1lPVwibmdSZXBlYXQtdHJhY2tpbmdcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnbmdSZXBlYXQnLCBbJ25nQW5pbWF0ZSddKS5jb250cm9sbGVyKCdyZXBlYXRDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgIHZhciBmcmllbmRzID0gW1xuICAgICAgICAgIHtuYW1lOidKb2huJywgYWdlOjI1fSxcbiAgICAgICAgICB7bmFtZTonTWFyeScsIGFnZTo0MH0sXG4gICAgICAgICAge25hbWU6J1BldGVyJywgYWdlOjg1fVxuICAgICAgICBdO1xuXG4gICAgICAgICRzY29wZS5yZW1vdmVGaXJzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5mcmllbmRzLnNoaWZ0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnVwZGF0ZUFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5mcmllbmRzLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgIGVsLmFnZSA9IGVsLmFnZSArIDU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuZnJpZW5kcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBhbmd1bGFyLmNvcHkoZnJpZW5kcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cInJlcGVhdENvbnRyb2xsZXJcIj5cbiAgICAgICAgPG9sPlxuICAgICAgICAgIDxsaT5XaGVuIHlvdSBjbGljayBcIlVwZGF0ZSBBZ2VcIiwgb25seSB0aGUgZmlyc3QgbGlzdCB1cGRhdGVzIHRoZSBhZ2UsIGJlY2F1c2UgYWxsIG90aGVycyBoYXZlXG4gICAgICAgICAgYSBvbmUtdGltZSBiaW5kaW5nIG9uIHRoZSBhZ2UgcHJvcGVydHkuIElmIHlvdSB0aGVuIGNsaWNrIFwiQ29weVwiLCB0aGUgY3VycmVudCBmcmllbmQgbGlzdFxuICAgICAgICAgIGlzIGNvcGllZCwgYW5kIG5vdyB0aGUgc2Vjb25kIGxpc3QgdXBkYXRlcyB0aGUgYWdlLCBiZWNhdXNlIHRoZSBpZGVudGl0eSBvZiB0aGUgY29sbGVjdGlvbiBpdGVtc1xuICAgICAgICAgIGhhcyBjaGFuZ2VkIGFuZCB0aGUgbGlzdCBtdXN0IGJlIHJlLXJlbmRlcmVkLiBUaGUgM3JkIGFuZCA0dGggbGlzdCBzdGF5IHRoZSBzYW1lLCBiZWNhdXNlIGFsbCB0aGVcbiAgICAgICAgICBpdGVtcyBhcmUgYWxyZWFkeSBrbm93biBhY2NvcmRpbmcgdG8gdGhlaXIgdHJhY2tpbmcgZnVuY3Rpb25zLlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPGxpPldoZW4geW91IGNsaWNrIFwiUmVtb3ZlIEZpcnN0XCIsIHRoZSA0dGggbGlzdCBoYXMgdGhlIHdyb25nIGFnZSBvbiBib3RoIHJlbWFpbmluZyBpdGVtcy4gVGhpcyBpc1xuICAgICAgICAgIGR1ZSB0byB0cmFja2luZyBieSAkaW5kZXg6IHdoZW4gdGhlIGZpcnN0IGNvbGxlY3Rpb24gaXRlbSBpcyByZW1vdmVkLCBuZ1JlcGVhdCByZXVzZXMgdGhlIGZpcnN0XG4gICAgICAgICAgRE9NIGVsZW1lbnQgZm9yIHRoZSBuZXcgZmlyc3QgY29sbGVjdGlvbiBpdGVtLCBhbmQgc28gb24uIFNpbmNlIHRoZSBhZ2UgcHJvcGVydHkgaXMgb25lLXRpbWVcbiAgICAgICAgICBib3VuZCwgdGhlIHZhbHVlIHJlbWFpbnMgZnJvbSB0aGUgY29sbGVjdGlvbiBpdGVtIHdoaWNoIHdhcyBwcmV2aW91c2x5IGF0IHRoaXMgaW5kZXguXG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC9vbD5cblxuICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicmVtb3ZlRmlyc3QoKVwiPlJlbW92ZSBGaXJzdDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwidXBkYXRlQWdlKClcIj5VcGRhdGUgQWdlPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjb3B5KClcIj5Db3B5PC9idXR0b24+XG4gICAgICAgIDxicj48YnV0dG9uIG5nLWNsaWNrPVwicmVzZXQoKVwiPlJlc2V0IExpc3Q8L2J1dHRvbj5cbiAgICAgICAgPGJyPlxuICAgICAgICA8Y29kZT50cmFjayBieSAkaWQoZnJpZW5kKTwvY29kZT4gKGRlZmF1bHQpOlxuICAgICAgICA8dWwgY2xhc3M9XCJleGFtcGxlLWFuaW1hdGUtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kc1wiPlxuICAgICAgICAgICAge3tmcmllbmQubmFtZX19IGlzIHt7ZnJpZW5kLmFnZX19IHllYXJzIG9sZC5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgICA8Y29kZT50cmFjayBieSAkaWQoZnJpZW5kKTwvY29kZT4gKGRlZmF1bHQpLCB3aXRoIGFnZSBvbmUtdGltZSBiaW5kaW5nOlxuICAgICAgICA8dWwgY2xhc3M9XCJleGFtcGxlLWFuaW1hdGUtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kc1wiPlxuICAgICAgICAgICAge3tmcmllbmQubmFtZX19IGlzIHt7OjpmcmllbmQuYWdlfX0geWVhcnMgb2xkLlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIDxjb2RlPnRyYWNrIGJ5IGZyaWVuZC5uYW1lPC9jb2RlPiwgd2l0aCBhZ2Ugb25lLXRpbWUgYmluZGluZzpcbiAgICAgICAgPHVsIGNsYXNzPVwiZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgdHJhY2sgYnkgZnJpZW5kLm5hbWVcIj5cbiAgICAgICAgICAgIHt7ZnJpZW5kLm5hbWV9fSAgaXMge3s6OmZyaWVuZC5hZ2V9fSB5ZWFycyBvbGQuXG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGNvZGU+dHJhY2sgYnkgJGluZGV4PC9jb2RlPiwgd2l0aCBhZ2Ugb25lLXRpbWUgYmluZGluZzpcbiAgICAgICAgPHVsIGNsYXNzPVwiZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgdHJhY2sgYnkgJGluZGV4XCI+XG4gICAgICAgICAgICB7e2ZyaWVuZC5uYW1lfX0gaXMge3s6OmZyaWVuZC5hZ2V9fSB5ZWFycyBvbGQuXG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5leGFtcGxlLWFuaW1hdGUtY29udGFpbmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgbGlzdC1zdHlsZTpub25lO1xuICAgICAgICBtYXJnaW46MDtcbiAgICAgICAgcGFkZGluZzowIDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdCB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OjMwcHg7XG4gICAgICAgIGxpc3Qtc3R5bGU6bm9uZTtcbiAgICAgICAgYm94LXNpemluZzpib3JkZXItYm94O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlcixcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUubmctbGVhdmUtYWN0aXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIge1xuICAgICAgICBvcGFjaXR5OjA7XG4gICAgICAgIG1heC1oZWlnaHQ6MDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUubmctbW92ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgb3BhY2l0eToxO1xuICAgICAgICBtYXgtaGVpZ2h0OjMwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG5cbiAqXG4gKiAjIyBTcGVjaWFsIHJlcGVhdCBzdGFydCBhbmQgZW5kIHBvaW50c1xuICogVG8gcmVwZWF0IGEgc2VyaWVzIG9mIGVsZW1lbnRzIGluc3RlYWQgb2YganVzdCBvbmUgcGFyZW50IGVsZW1lbnQsIG5nUmVwZWF0IChhcyB3ZWxsIGFzIG90aGVyIG5nIGRpcmVjdGl2ZXMpIHN1cHBvcnRzIGV4dGVuZGluZ1xuICogdGhlIHJhbmdlIG9mIHRoZSByZXBlYXRlciBieSBkZWZpbmluZyBleHBsaWNpdCBzdGFydCBhbmQgZW5kIHBvaW50cyBieSB1c2luZyAqKm5nLXJlcGVhdC1zdGFydCoqIGFuZCAqKm5nLXJlcGVhdC1lbmQqKiByZXNwZWN0aXZlbHkuXG4gKiBUaGUgKipuZy1yZXBlYXQtc3RhcnQqKiBkaXJlY3RpdmUgd29ya3MgdGhlIHNhbWUgYXMgKipuZy1yZXBlYXQqKiwgYnV0IHdpbGwgcmVwZWF0IGFsbCB0aGUgSFRNTCBjb2RlIChpbmNsdWRpbmcgdGhlIHRhZyBpdCdzIGRlZmluZWQgb24pXG4gKiB1cCB0byBhbmQgaW5jbHVkaW5nIHRoZSBlbmRpbmcgSFRNTCB0YWcgd2hlcmUgKipuZy1yZXBlYXQtZW5kKiogaXMgcGxhY2VkLlxuICpcbiAqIFRoZSBleGFtcGxlIGJlbG93IG1ha2VzIHVzZSBvZiB0aGlzIGZlYXR1cmU6XG4gKiBgYGBodG1sXG4gKiAgIDxoZWFkZXIgbmctcmVwZWF0LXN0YXJ0PVwiaXRlbSBpbiBpdGVtc1wiPlxuICogICAgIEhlYWRlciB7eyBpdGVtIH19XG4gKiAgIDwvaGVhZGVyPlxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxuICogICAgIEJvZHkge3sgaXRlbSB9fVxuICogICA8L2Rpdj5cbiAqICAgPGZvb3RlciBuZy1yZXBlYXQtZW5kPlxuICogICAgIEZvb3RlciB7eyBpdGVtIH19XG4gKiAgIDwvZm9vdGVyPlxuICogYGBgXG4gKlxuICogQW5kIHdpdGggYW4gaW5wdXQgb2Yge0B0eXBlIFsnQScsJ0InXX0gZm9yIHRoZSBpdGVtcyB2YXJpYWJsZSBpbiB0aGUgZXhhbXBsZSBhYm92ZSwgdGhlIG91dHB1dCB3aWxsIGV2YWx1YXRlIHRvOlxuICogYGBgaHRtbFxuICogICA8aGVhZGVyPlxuICogICAgIEhlYWRlciBBXG4gKiAgIDwvaGVhZGVyPlxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxuICogICAgIEJvZHkgQVxuICogICA8L2Rpdj5cbiAqICAgPGZvb3Rlcj5cbiAqICAgICBGb290ZXIgQVxuICogICA8L2Zvb3Rlcj5cbiAqICAgPGhlYWRlcj5cbiAqICAgICBIZWFkZXIgQlxuICogICA8L2hlYWRlcj5cbiAqICAgPGRpdiBjbGFzcz1cImJvZHlcIj5cbiAqICAgICBCb2R5IEJcbiAqICAgPC9kaXY+XG4gKiAgIDxmb290ZXI+XG4gKiAgICAgRm9vdGVyIEJcbiAqICAgPC9mb290ZXI+XG4gKiBgYGBcbiAqXG4gKiBUaGUgY3VzdG9tIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIGZvciBuZ1JlcGVhdCBhbHNvIHN1cHBvcnQgYWxsIG90aGVyIEhUTUwgZGlyZWN0aXZlIHN5bnRheCBmbGF2b3JzIHByb3ZpZGVkIGluIEFuZ3VsYXJKUyAoc3VjaFxuICogYXMgKipkYXRhLW5nLXJlcGVhdC1zdGFydCoqLCAqKngtbmctcmVwZWF0LXN0YXJ0KiogYW5kICoqbmc6cmVwZWF0LXN0YXJ0KiopLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2VudGVyIGVudGVyfSB8IHdoZW4gYSBuZXcgaXRlbSBpcyBhZGRlZCB0byB0aGUgbGlzdCBvciB3aGVuIGFuIGl0ZW0gaXMgcmV2ZWFsZWQgYWZ0ZXIgYSBmaWx0ZXIgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjbGVhdmUgbGVhdmV9IHwgd2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSB0aGUgbGlzdCBvciB3aGVuIGFuIGl0ZW0gaXMgZmlsdGVyZWQgb3V0IHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI21vdmUgbW92ZSB9IHwgd2hlbiBhbiBhZGphY2VudCBpdGVtIGlzIGZpbHRlcmVkIG91dCBjYXVzaW5nIGEgcmVvcmRlciBvciB3aGVuIHRoZSBpdGVtIGNvbnRlbnRzIGFyZSByZW9yZGVyZWQgfFxuICpcbiAqIFNlZSB0aGUgZXhhbXBsZSBiZWxvdyBmb3IgZGVmaW5pbmcgQ1NTIGFuaW1hdGlvbnMgd2l0aCBuZ1JlcGVhdC5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBzY29wZVxuICogQHByaW9yaXR5IDEwMDBcbiAqIEBwYXJhbSB7cmVwZWF0X2V4cHJlc3Npb259IG5nUmVwZWF0IFRoZSBleHByZXNzaW9uIGluZGljYXRpbmcgaG93IHRvIGVudW1lcmF0ZSBhIGNvbGxlY3Rpb24uIFRoZXNlXG4gKiAgIGZvcm1hdHMgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQ6XG4gKlxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uYCDigJMgd2hlcmUgdmFyaWFibGUgaXMgdGhlIHVzZXIgZGVmaW5lZCBsb29wIHZhcmlhYmxlIGFuZCBgZXhwcmVzc2lvbmBcbiAqICAgICBpcyBhIHNjb3BlIGV4cHJlc3Npb24gZ2l2aW5nIHRoZSBjb2xsZWN0aW9uIHRvIGVudW1lcmF0ZS5cbiAqXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBhbGJ1bSBpbiBhcnRpc3QuYWxidW1zYC5cbiAqXG4gKiAgICogYChrZXksIHZhbHVlKSBpbiBleHByZXNzaW9uYCDigJMgd2hlcmUgYGtleWAgYW5kIGB2YWx1ZWAgY2FuIGJlIGFueSB1c2VyIGRlZmluZWQgaWRlbnRpZmllcnMsXG4gKiAgICAgYW5kIGBleHByZXNzaW9uYCBpcyB0aGUgc2NvcGUgZXhwcmVzc2lvbiBnaXZpbmcgdGhlIGNvbGxlY3Rpb24gdG8gZW51bWVyYXRlLlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYChuYW1lLCBhZ2UpIGluIHsnYWRhbSc6MTAsICdhbWFsaWUnOjEyfWAuXG4gKlxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uIHRyYWNrIGJ5IHRyYWNraW5nX2V4cHJlc3Npb25gIOKAkyBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCB0cmFja2luZyBleHByZXNzaW9uXG4gKiAgICAgd2hpY2ggY2FuIGJlIHVzZWQgdG8gYXNzb2NpYXRlIHRoZSBvYmplY3RzIGluIHRoZSBjb2xsZWN0aW9uIHdpdGggdGhlIERPTSBlbGVtZW50cy4gSWYgbm8gdHJhY2tpbmcgZXhwcmVzc2lvblxuICogICAgIGlzIHNwZWNpZmllZCwgbmctcmVwZWF0IGFzc29jaWF0ZXMgZWxlbWVudHMgYnkgaWRlbnRpdHkuIEl0IGlzIGFuIGVycm9yIHRvIGhhdmVcbiAqICAgICBtb3JlIHRoYW4gb25lIHRyYWNraW5nIGV4cHJlc3Npb24gdmFsdWUgcmVzb2x2ZSB0byB0aGUgc2FtZSBrZXkuIChUaGlzIHdvdWxkIG1lYW4gdGhhdCB0d28gZGlzdGluY3Qgb2JqZWN0cyBhcmVcbiAqICAgICBtYXBwZWQgdG8gdGhlIHNhbWUgRE9NIGVsZW1lbnQsIHdoaWNoIGlzIG5vdCBwb3NzaWJsZS4pXG4gKlxuICogICAgICpEZWZhdWx0IHRyYWNraW5nOiAkaWQoKSo6IGBpdGVtIGluIGl0ZW1zYCBpcyBlcXVpdmFsZW50IHRvIGBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5ICRpZChpdGVtKWAuXG4gKiAgICAgVGhpcyBpbXBsaWVzIHRoYXQgdGhlIERPTSBlbGVtZW50cyB3aWxsIGJlIGFzc29jaWF0ZWQgYnkgaXRlbSBpZGVudGl0eSBpbiB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiAgICAgVGhlIGJ1aWx0LWluIGAkaWQoKWAgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYXNzaWduIGEgdW5pcXVlXG4gKiAgICAgYCQkaGFzaEtleWAgcHJvcGVydHkgdG8gZWFjaCBpdGVtIGluIHRoZSBjb2xsZWN0aW9uLiBUaGlzIHByb3BlcnR5IGlzIHRoZW4gdXNlZCBhcyBhIGtleSB0byBhc3NvY2lhdGVkIERPTSBlbGVtZW50c1xuICogICAgIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgaXRlbSBpbiB0aGUgY29sbGVjdGlvbiBieSBpZGVudGl0eS4gTW92aW5nIHRoZSBzYW1lIG9iamVjdCB3b3VsZCBtb3ZlXG4gKiAgICAgdGhlIERPTSBlbGVtZW50IGluIHRoZSBzYW1lIHdheSBpbiB0aGUgRE9NLlxuICogICAgIE5vdGUgdGhhdCB0aGUgZGVmYXVsdCBpZCBmdW5jdGlvbiBkb2VzIG5vdCBzdXBwb3J0IGR1cGxpY2F0ZSBwcmltaXRpdmUgdmFsdWVzIChgbnVtYmVyYCwgYHN0cmluZ2ApLFxuICogICAgIGJ1dCBzdXBwb3J0cyBkdXBsaWN0YWUgbm9uLXByaW1pdGl2ZSB2YWx1ZXMgKGBvYmplY3RgKSB0aGF0IGFyZSAqZXF1YWwqIGluIHNoYXBlLlxuICpcbiAqICAgICAqQ3VzdG9tIEV4cHJlc3Npb24qOiBJdCBpcyBwb3NzaWJsZSB0byB1c2UgYW55IEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGNvbXB1dGUgdGhlIHRyYWNraW5nXG4gKiAgICAgaWQsIGZvciBleGFtcGxlIHdpdGggYSBmdW5jdGlvbiwgb3IgdXNpbmcgYSBwcm9wZXJ0eSBvbiB0aGUgY29sbGVjdGlvbiBpdGVtcy5cbiAqICAgICBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSBpdGVtLmlkYCBpcyBhIHR5cGljYWwgcGF0dGVybiB3aGVuIHRoZSBpdGVtcyBoYXZlIGEgdW5pcXVlIGlkZW50aWZpZXIsXG4gKiAgICAgZS5nLiBkYXRhYmFzZSBpZC4gSW4gdGhpcyBjYXNlIHRoZSBvYmplY3QgaWRlbnRpdHkgZG9lcyBub3QgbWF0dGVyLiBUd28gb2JqZWN0cyBhcmUgY29uc2lkZXJlZFxuICogICAgIGVxdWl2YWxlbnQgYXMgbG9uZyBhcyB0aGVpciBgaWRgIHByb3BlcnR5IGlzIHNhbWUuXG4gKiAgICAgVHJhY2tpbmcgYnkgdW5pcXVlIGlkZW50aWZpZXIgaXMgdGhlIG1vc3QgcGVyZm9ybWFudCB3YXkgYW5kIHNob3VsZCBiZSB1c2VkIHdoZW5ldmVyIHBvc3NpYmxlLlxuICpcbiAqICAgICAqJGluZGV4KjogVGhpcyBzcGVjaWFsIHByb3BlcnR5IHRyYWNrcyB0aGUgY29sbGVjdGlvbiBpdGVtcyBieSB0aGVpciBpbmRleCwgYW5kXG4gKiAgICAgcmUtdXNlcyB0aGUgRE9NIGVsZW1lbnRzIHRoYXQgbWF0Y2ggdGhhdCBpbmRleCwgZS5nLiBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSAkaW5kZXhgLiBUaGlzIGNhblxuICogICAgIGJlIHVzZWQgZm9yIGEgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnQgaWYgbm8gdW5pcXVlIGlkZW50ZmllciBpcyBhdmFpbGFibGUgYW5kIHRoZSBpZGVudGl0eSBvZlxuICogICAgIHRoZSBjb2xsZWN0aW9uIGl0ZW1zIGNhbm5vdCBiZSBlYXNpbHkgY29tcHV0ZWQuIEl0IGFsc28gYWxsb3dzIGR1cGxpY2F0ZXMuXG4gKlxuICogICAgIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAgICAgICA8c3Ryb25nPk5vdGU6PC9zdHJvbmc+IFJlLXVzaW5nIERPTSBlbGVtZW50cyBjYW4gaGF2ZSB1bmZvcmVzZWVuIGVmZmVjdHMuIFJlYWQgdGhlXG4gKiAgICAgICB7QGxpbmsgbmdSZXBlYXQjdHJhY2tpbmctYW5kLWR1cGxpY2F0ZXMgc2VjdGlvbiBvbiB0cmFja2luZyBhbmQgZHVwbGljYXRlc30gZm9yXG4gKiAgICAgICBtb3JlIGluZm8uXG4gKiAgICAgPC9kaXY+XG4gKlxuICogICAgIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAgICAgICA8c3Ryb25nPk5vdGU6PC9zdHJvbmc+IHRoZSBgdHJhY2sgYnlgIGV4cHJlc3Npb24gbXVzdCBjb21lIGxhc3QgLSBhZnRlciBhbnkgZmlsdGVycywgYW5kIHRoZSBhbGlhcyBleHByZXNzaW9uOlxuICogICAgICAgYGl0ZW0gaW4gaXRlbXMgfCBmaWx0ZXI6c2VhcmNoVGV4dCBhcyByZXN1bHRzICB0cmFjayBieSBpdGVtLmlkYFxuICogICAgIDwvZGl2PlxuICpcbiAqICAgKiBgdmFyaWFibGUgaW4gZXhwcmVzc2lvbiBhcyBhbGlhc19leHByZXNzaW9uYCDigJMgWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gb3B0aW9uYWwgYWxpYXMgZXhwcmVzc2lvbiB3aGljaCB3aWxsIHRoZW4gc3RvcmUgdGhlXG4gKiAgICAgaW50ZXJtZWRpYXRlIHJlc3VsdHMgb2YgdGhlIHJlcGVhdGVyIGFmdGVyIHRoZSBmaWx0ZXJzIGhhdmUgYmVlbiBhcHBsaWVkLiBUeXBpY2FsbHkgdGhpcyBpcyB1c2VkIHRvIHJlbmRlciBhIHNwZWNpYWwgbWVzc2FnZVxuICogICAgIHdoZW4gYSBmaWx0ZXIgaXMgYWN0aXZlIG9uIHRoZSByZXBlYXRlciwgYnV0IHRoZSBmaWx0ZXJlZCByZXN1bHQgc2V0IGlzIGVtcHR5LlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgfCBmaWx0ZXI6eCBhcyByZXN1bHRzYCB3aWxsIHN0b3JlIHRoZSBmcmFnbWVudCBvZiB0aGUgcmVwZWF0ZWQgaXRlbXMgYXMgYHJlc3VsdHNgLCBidXQgb25seSBhZnRlclxuICogICAgIHRoZSBpdGVtcyBoYXZlIGJlZW4gcHJvY2Vzc2VkIHRocm91Z2ggdGhlIGZpbHRlci5cbiAqXG4gKiAgICAgUGxlYXNlIG5vdGUgdGhhdCBgYXMgW3ZhcmlhYmxlIG5hbWVdIGlzIG5vdCBhbiBvcGVyYXRvciBidXQgcmF0aGVyIGEgcGFydCBvZiBuZ1JlcGVhdFxuICogICAgIG1pY3JvLXN5bnRheCBzbyBpdCBjYW4gYmUgdXNlZCBvbmx5IGFmdGVyIGFsbCBmaWx0ZXJzIChhbmQgbm90IGFzIG9wZXJhdG9yLCBpbnNpZGUgYW4gZXhwcmVzc2lvbikuXG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB8IGZpbHRlciA6IHggfCBvcmRlckJ5IDogb3JkZXIgfCBsaW1pdFRvIDogbGltaXQgYXMgcmVzdWx0cyB0cmFjayBieSBpdGVtLmlkYCAuXG4gKlxuICogQGV4YW1wbGVcbiAqIFRoaXMgZXhhbXBsZSB1c2VzIGBuZ1JlcGVhdGAgdG8gZGlzcGxheSBhIGxpc3Qgb2YgcGVvcGxlLiBBIGZpbHRlciBpcyB1c2VkIHRvIHJlc3RyaWN0IHRoZSBkaXNwbGF5ZWRcbiAqIHJlc3VsdHMgYnkgbmFtZSBvciBieSBhZ2UuIE5ldyAoZW50ZXJpbmcpIGFuZCByZW1vdmVkIChsZWF2aW5nKSBpdGVtcyBhcmUgYW5pbWF0ZWQuXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nUmVwZWF0XCIgbmFtZT1cIm5nUmVwZWF0XCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cInJlcGVhdENvbnRyb2xsZXJcIj5cbiAgICAgICAgSSBoYXZlIHt7ZnJpZW5kcy5sZW5ndGh9fSBmcmllbmRzLiBUaGV5IGFyZTpcbiAgICAgICAgPGlucHV0IHR5cGU9XCJzZWFyY2hcIiBuZy1tb2RlbD1cInFcIiBwbGFjZWhvbGRlcj1cImZpbHRlciBmcmllbmRzLi4uXCIgYXJpYS1sYWJlbD1cImZpbHRlciBmcmllbmRzXCIgLz5cbiAgICAgICAgPHVsIGNsYXNzPVwiZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBmaWx0ZXI6cSBhcyByZXN1bHRzIHRyYWNrIGJ5IGZyaWVuZC5uYW1lXCI+XG4gICAgICAgICAgICBbe3skaW5kZXggKyAxfX1dIHt7ZnJpZW5kLm5hbWV9fSB3aG8gaXMge3tmcmllbmQuYWdlfX0geWVhcnMgb2xkLlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1pZj1cInJlc3VsdHMubGVuZ3RoID09PSAwXCI+XG4gICAgICAgICAgICA8c3Ryb25nPk5vIHJlc3VsdHMgZm91bmQuLi48L3N0cm9uZz5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ1JlcGVhdCcsIFsnbmdBbmltYXRlJ10pLmNvbnRyb2xsZXIoJ3JlcGVhdENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBbXG4gICAgICAgICAge25hbWU6J0pvaG4nLCBhZ2U6MjUsIGdlbmRlcjonYm95J30sXG4gICAgICAgICAge25hbWU6J0plc3NpZScsIGFnZTozMCwgZ2VuZGVyOidnaXJsJ30sXG4gICAgICAgICAge25hbWU6J0pvaGFubmEnLCBhZ2U6MjgsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICAgIHtuYW1lOidKb3knLCBhZ2U6MTUsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICAgIHtuYW1lOidNYXJ5JywgYWdlOjI4LCBnZW5kZXI6J2dpcmwnfSxcbiAgICAgICAgICB7bmFtZTonUGV0ZXInLCBhZ2U6OTUsIGdlbmRlcjonYm95J30sXG4gICAgICAgICAge25hbWU6J1NlYmFzdGlhbicsIGFnZTo1MCwgZ2VuZGVyOidib3knfSxcbiAgICAgICAgICB7bmFtZTonRXJpa2EnLCBhZ2U6MjcsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICAgIHtuYW1lOidQYXRyaWNrJywgYWdlOjQwLCBnZW5kZXI6J2JveSd9LFxuICAgICAgICAgIHtuYW1lOidTYW1hbnRoYScsIGFnZTo2MCwgZ2VuZGVyOidnaXJsJ31cbiAgICAgICAgXTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5leGFtcGxlLWFuaW1hdGUtY29udGFpbmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgbGlzdC1zdHlsZTpub25lO1xuICAgICAgICBtYXJnaW46MDtcbiAgICAgICAgcGFkZGluZzowIDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdCB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OjMwcHg7XG4gICAgICAgIGxpc3Qtc3R5bGU6bm9uZTtcbiAgICAgICAgYm94LXNpemluZzpib3JkZXItYm94O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlcixcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUubmctbGVhdmUtYWN0aXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIge1xuICAgICAgICBvcGFjaXR5OjA7XG4gICAgICAgIG1heC1oZWlnaHQ6MDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUubmctbW92ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgb3BhY2l0eToxO1xuICAgICAgICBtYXgtaGVpZ2h0OjMwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciBmcmllbmRzID0gZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoJ2ZyaWVuZCBpbiBmcmllbmRzJykpO1xuXG4gICAgICBpdCgnc2hvdWxkIHJlbmRlciBpbml0aWFsIGRhdGEgc2V0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMTApO1xuICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMV0gSm9obiB3aG8gaXMgMjUgeWVhcnMgb2xkLicpO1xuICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMl0gSmVzc2llIHdobyBpcyAzMCB5ZWFycyBvbGQuJyk7XG4gICAgICAgIGV4cGVjdChmcmllbmRzLmxhc3QoKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1sxMF0gU2FtYW50aGEgd2hvIGlzIDYwIHllYXJzIG9sZC4nKTtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnZnJpZW5kcy5sZW5ndGgnKSkuZ2V0VGV4dCgpKVxuICAgICAgICAgICAgLnRvTWF0Y2goXCJJIGhhdmUgMTAgZnJpZW5kcy4gVGhleSBhcmU6XCIpO1xuICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSByZXBlYXRlciB3aGVuIGZpbHRlciBwcmVkaWNhdGUgY2hhbmdlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZyaWVuZHMuY291bnQoKSkudG9CZSgxMCk7XG5cbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3EnKSkuc2VuZEtleXMoJ21hJyk7XG5cbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMik7XG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMV0gTWFyeSB3aG8gaXMgMjggeWVhcnMgb2xkLicpO1xuICAgICAgICAgZXhwZWN0KGZyaWVuZHMubGFzdCgpLmdldFRleHQoKSkudG9FcXVhbCgnWzJdIFNhbWFudGhhIHdobyBpcyA2MCB5ZWFycyBvbGQuJyk7XG4gICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdSZXBlYXREaXJlY3RpdmUgPSBbJyRwYXJzZScsICckYW5pbWF0ZScsICckY29tcGlsZScsIGZ1bmN0aW9uKCRwYXJzZSwgJGFuaW1hdGUsICRjb21waWxlKSB7XG4gIHZhciBOR19SRU1PVkVEID0gJyQkTkdfUkVNT1ZFRCc7XG4gIHZhciBuZ1JlcGVhdE1pbkVyciA9IG1pbkVycignbmdSZXBlYXQnKTtcblxuICB2YXIgdXBkYXRlU2NvcGUgPSBmdW5jdGlvbihzY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgYXJyYXlMZW5ndGgpIHtcbiAgICAvLyBUT0RPKHBlcmYpOiBnZW5lcmF0ZSBzZXR0ZXJzIHRvIHNoYXZlIG9mZiB+NDBtcyBvciAxLTEuNSVcbiAgICBzY29wZVt2YWx1ZUlkZW50aWZpZXJdID0gdmFsdWU7XG4gICAgaWYgKGtleUlkZW50aWZpZXIpIHNjb3BlW2tleUlkZW50aWZpZXJdID0ga2V5O1xuICAgIHNjb3BlLiRpbmRleCA9IGluZGV4O1xuICAgIHNjb3BlLiRmaXJzdCA9IChpbmRleCA9PT0gMCk7XG4gICAgc2NvcGUuJGxhc3QgPSAoaW5kZXggPT09IChhcnJheUxlbmd0aCAtIDEpKTtcbiAgICBzY29wZS4kbWlkZGxlID0gIShzY29wZS4kZmlyc3QgfHwgc2NvcGUuJGxhc3QpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgc2NvcGUuJG9kZCA9ICEoc2NvcGUuJGV2ZW4gPSAoaW5kZXggJiAxKSA9PT0gMCk7XG4gIH07XG5cbiAgdmFyIGdldEJsb2NrU3RhcnQgPSBmdW5jdGlvbihibG9jaykge1xuICAgIHJldHVybiBibG9jay5jbG9uZVswXTtcbiAgfTtcblxuICB2YXIgZ2V0QmxvY2tFbmQgPSBmdW5jdGlvbihibG9jaykge1xuICAgIHJldHVybiBibG9jay5jbG9uZVtibG9jay5jbG9uZS5sZW5ndGggLSAxXTtcbiAgfTtcblxuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBtdWx0aUVsZW1lbnQ6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxuICAgIHByaW9yaXR5OiAxMDAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICQkdGxiOiB0cnVlLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nUmVwZWF0Q29tcGlsZSgkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgIHZhciBleHByZXNzaW9uID0gJGF0dHIubmdSZXBlYXQ7XG4gICAgICB2YXIgbmdSZXBlYXRFbmRDb21tZW50ID0gJGNvbXBpbGUuJCRjcmVhdGVDb21tZW50KCdlbmQgbmdSZXBlYXQnLCBleHByZXNzaW9uKTtcblxuICAgICAgdmFyIG1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaCgvXlxccyooW1xcc1xcU10rPylcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzKiQvKTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignaWV4cCcsICdFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgXFwnX2l0ZW1fIGluIF9jb2xsZWN0aW9uX1sgdHJhY2sgYnkgX2lkX11cXCcgYnV0IGdvdCBcXCd7MH1cXCcuJyxcbiAgICAgICAgICAgIGV4cHJlc3Npb24pO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGhzID0gbWF0Y2hbMV07XG4gICAgICB2YXIgcmhzID0gbWF0Y2hbMl07XG4gICAgICB2YXIgYWxpYXNBcyA9IG1hdGNoWzNdO1xuICAgICAgdmFyIHRyYWNrQnlFeHAgPSBtYXRjaFs0XTtcblxuICAgICAgbWF0Y2ggPSBsaHMubWF0Y2goL14oPzooXFxzKlskXFx3XSspfFxcKFxccyooWyRcXHddKylcXHMqLFxccyooWyRcXHddKylcXHMqXFwpKSQvKTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignaWlkZXhwJywgJ1xcJ19pdGVtX1xcJyBpbiBcXCdfaXRlbV8gaW4gX2NvbGxlY3Rpb25fXFwnIHNob3VsZCBiZSBhbiBpZGVudGlmaWVyIG9yIFxcJyhfa2V5XywgX3ZhbHVlXylcXCcgZXhwcmVzc2lvbiwgYnV0IGdvdCBcXCd7MH1cXCcuJyxcbiAgICAgICAgICAgIGxocyk7XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWVJZGVudGlmaWVyID0gbWF0Y2hbM10gfHwgbWF0Y2hbMV07XG4gICAgICB2YXIga2V5SWRlbnRpZmllciA9IG1hdGNoWzJdO1xuXG4gICAgICBpZiAoYWxpYXNBcyAmJiAoIS9eWyRhLXpBLVpfXVskYS16QS1aMC05X10qJC8udGVzdChhbGlhc0FzKSB8fFxuICAgICAgICAgIC9eKG51bGx8dW5kZWZpbmVkfHRoaXN8XFwkaW5kZXh8XFwkZmlyc3R8XFwkbWlkZGxlfFxcJGxhc3R8XFwkZXZlbnxcXCRvZGR8XFwkcGFyZW50fFxcJHJvb3R8XFwkaWQpJC8udGVzdChhbGlhc0FzKSkpIHtcbiAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2JhZGlkZW50JywgJ2FsaWFzIFxcJ3swfVxcJyBpcyBpbnZhbGlkIC0tLSBtdXN0IGJlIGEgdmFsaWQgSlMgaWRlbnRpZmllciB3aGljaCBpcyBub3QgYSByZXNlcnZlZCBuYW1lLicsXG4gICAgICAgICAgYWxpYXNBcyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0cmFja0J5RXhwR2V0dGVyLCB0cmFja0J5SWRFeHBGbiwgdHJhY2tCeUlkQXJyYXlGbiwgdHJhY2tCeUlkT2JqRm47XG4gICAgICB2YXIgaGFzaEZuTG9jYWxzID0geyRpZDogaGFzaEtleX07XG5cbiAgICAgIGlmICh0cmFja0J5RXhwKSB7XG4gICAgICAgIHRyYWNrQnlFeHBHZXR0ZXIgPSAkcGFyc2UodHJhY2tCeUV4cCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFja0J5SWRBcnJheUZuID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBoYXNoS2V5KHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHJhY2tCeUlkT2JqRm4gPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdSZXBlYXRMaW5rKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuXG4gICAgICAgIGlmICh0cmFja0J5RXhwR2V0dGVyKSB7XG4gICAgICAgICAgdHJhY2tCeUlkRXhwRm4gPSBmdW5jdGlvbihrZXksIHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgLy8gYXNzaWduIGtleSwgdmFsdWUsIGFuZCAkaW5kZXggdG8gdGhlIGxvY2FscyBzbyB0aGF0IHRoZXkgY2FuIGJlIHVzZWQgaW4gaGFzaCBmdW5jdGlvbnNcbiAgICAgICAgICAgIGlmIChrZXlJZGVudGlmaWVyKSBoYXNoRm5Mb2NhbHNba2V5SWRlbnRpZmllcl0gPSBrZXk7XG4gICAgICAgICAgICBoYXNoRm5Mb2NhbHNbdmFsdWVJZGVudGlmaWVyXSA9IHZhbHVlO1xuICAgICAgICAgICAgaGFzaEZuTG9jYWxzLiRpbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNrQnlFeHBHZXR0ZXIoJHNjb3BlLCBoYXNoRm5Mb2NhbHMpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdG9yZSBhIGxpc3Qgb2YgZWxlbWVudHMgZnJvbSBwcmV2aW91cyBydW4uIFRoaXMgaXMgYSBoYXNoIHdoZXJlIGtleSBpcyB0aGUgaXRlbSBmcm9tIHRoZVxuICAgICAgICAvLyBpdGVyYXRvciwgYW5kIHRoZSB2YWx1ZSBpcyBvYmplY3RzIHdpdGggZm9sbG93aW5nIHByb3BlcnRpZXMuXG4gICAgICAgIC8vICAgLSBzY29wZTogYm91bmQgc2NvcGVcbiAgICAgICAgLy8gICAtIGNsb25lOiBwcmV2aW91cyBlbGVtZW50LlxuICAgICAgICAvLyAgIC0gaW5kZXg6IHBvc2l0aW9uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdlIGFyZSB1c2luZyBuby1wcm90byBvYmplY3Qgc28gdGhhdCB3ZSBkb24ndCBuZWVkIHRvIGd1YXJkIGFnYWluc3QgaW5oZXJpdGVkIHByb3BzIHZpYVxuICAgICAgICAvLyBoYXNPd25Qcm9wZXJ0eS5cbiAgICAgICAgdmFyIGxhc3RCbG9ja01hcCA9IGNyZWF0ZU1hcCgpO1xuXG4gICAgICAgIC8vd2F0Y2ggcHJvcHNcbiAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24ocmhzLCBmdW5jdGlvbiBuZ1JlcGVhdEFjdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgdmFyIGluZGV4LCBsZW5ndGgsXG4gICAgICAgICAgICAgIHByZXZpb3VzTm9kZSA9ICRlbGVtZW50WzBdLCAgICAgLy8gbm9kZSB0aGF0IGNsb25lZCBub2RlcyBzaG91bGQgYmUgaW5zZXJ0ZWQgYWZ0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplZCB0byB0aGUgY29tbWVudCBub2RlIGFuY2hvclxuICAgICAgICAgICAgICBuZXh0Tm9kZSxcbiAgICAgICAgICAgICAgLy8gU2FtZSBhcyBsYXN0QmxvY2tNYXAgYnV0IGl0IGhhcyB0aGUgY3VycmVudCBzdGF0ZS4gSXQgd2lsbCBiZWNvbWUgdGhlXG4gICAgICAgICAgICAgIC8vIGxhc3RCbG9ja01hcCBvbiB0aGUgbmV4dCBpdGVyYXRpb24uXG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcCA9IGNyZWF0ZU1hcCgpLFxuICAgICAgICAgICAgICBjb2xsZWN0aW9uTGVuZ3RoLFxuICAgICAgICAgICAgICBrZXksIHZhbHVlLCAvLyBrZXkvdmFsdWUgb2YgaXRlcmF0aW9uXG4gICAgICAgICAgICAgIHRyYWNrQnlJZCxcbiAgICAgICAgICAgICAgdHJhY2tCeUlkRm4sXG4gICAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzLFxuICAgICAgICAgICAgICBibG9jaywgICAgICAgLy8gbGFzdCBvYmplY3QgaW5mb3JtYXRpb24ge3Njb3BlLCBlbGVtZW50LCBpZH1cbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXIsXG4gICAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmU7XG5cbiAgICAgICAgICBpZiAoYWxpYXNBcykge1xuICAgICAgICAgICAgJHNjb3BlW2FsaWFzQXNdID0gY29sbGVjdGlvbjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNBcnJheUxpa2UoY29sbGVjdGlvbikpIHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzID0gY29sbGVjdGlvbjtcbiAgICAgICAgICAgIHRyYWNrQnlJZEZuID0gdHJhY2tCeUlkRXhwRm4gfHwgdHJhY2tCeUlkQXJyYXlGbjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJhY2tCeUlkRm4gPSB0cmFja0J5SWRFeHBGbiB8fCB0cmFja0J5SWRPYmpGbjtcbiAgICAgICAgICAgIC8vIGlmIG9iamVjdCwgZXh0cmFjdCBrZXlzLCBpbiBlbnVtZXJhdGlvbiBvcmRlciwgdW5zb3J0ZWRcbiAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtS2V5IGluIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29sbGVjdGlvbiwgaXRlbUtleSkgJiYgaXRlbUtleS5jaGFyQXQoMCkgIT09ICckJykge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzLnB1c2goaXRlbUtleSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb2xsZWN0aW9uTGVuZ3RoID0gY29sbGVjdGlvbktleXMubGVuZ3RoO1xuICAgICAgICAgIG5leHRCbG9ja09yZGVyID0gbmV3IEFycmF5KGNvbGxlY3Rpb25MZW5ndGgpO1xuXG4gICAgICAgICAgLy8gbG9jYXRlIGV4aXN0aW5nIGl0ZW1zXG4gICAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgY29sbGVjdGlvbkxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAga2V5ID0gKGNvbGxlY3Rpb24gPT09IGNvbGxlY3Rpb25LZXlzKSA/IGluZGV4IDogY29sbGVjdGlvbktleXNbaW5kZXhdO1xuICAgICAgICAgICAgdmFsdWUgPSBjb2xsZWN0aW9uW2tleV07XG4gICAgICAgICAgICB0cmFja0J5SWQgPSB0cmFja0J5SWRGbihrZXksIHZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICBpZiAobGFzdEJsb2NrTWFwW3RyYWNrQnlJZF0pIHtcbiAgICAgICAgICAgICAgLy8gZm91bmQgcHJldmlvdXNseSBzZWVuIGJsb2NrXG4gICAgICAgICAgICAgIGJsb2NrID0gbGFzdEJsb2NrTWFwW3RyYWNrQnlJZF07XG4gICAgICAgICAgICAgIGRlbGV0ZSBsYXN0QmxvY2tNYXBbdHJhY2tCeUlkXTtcbiAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwW3RyYWNrQnlJZF0gPSBibG9jaztcbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXJbaW5kZXhdID0gYmxvY2s7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5leHRCbG9ja01hcFt0cmFja0J5SWRdKSB7XG4gICAgICAgICAgICAgIC8vIGlmIGNvbGxpc2lvbiBkZXRlY3RlZC4gcmVzdG9yZSBsYXN0QmxvY2tNYXAgYW5kIHRocm93IGFuIGVycm9yXG4gICAgICAgICAgICAgIGZvckVhY2gobmV4dEJsb2NrT3JkZXIsIGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrICYmIGJsb2NrLnNjb3BlKSBsYXN0QmxvY2tNYXBbYmxvY2suaWRdID0gYmxvY2s7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignZHVwZXMnLFxuICAgICAgICAgICAgICAgICAgJ0R1cGxpY2F0ZXMgaW4gYSByZXBlYXRlciBhcmUgbm90IGFsbG93ZWQuIFVzZSBcXCd0cmFjayBieVxcJyBleHByZXNzaW9uIHRvIHNwZWNpZnkgdW5pcXVlIGtleXMuIFJlcGVhdGVyOiB7MH0sIER1cGxpY2F0ZSBrZXk6IHsxfSwgRHVwbGljYXRlIHZhbHVlOiB7Mn0nLFxuICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiwgdHJhY2tCeUlkLCB2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBuZXcgbmV2ZXIgYmVmb3JlIHNlZW4gYmxvY2tcbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXJbaW5kZXhdID0ge2lkOiB0cmFja0J5SWQsIHNjb3BlOiB1bmRlZmluZWQsIGNsb25lOiB1bmRlZmluZWR9O1xuICAgICAgICAgICAgICBuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmVtb3ZlIGxlZnRvdmVyIGl0ZW1zXG4gICAgICAgICAgZm9yICh2YXIgYmxvY2tLZXkgaW4gbGFzdEJsb2NrTWFwKSB7XG4gICAgICAgICAgICBibG9jayA9IGxhc3RCbG9ja01hcFtibG9ja0tleV07XG4gICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlID0gZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSk7XG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShlbGVtZW50c1RvUmVtb3ZlKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1RvUmVtb3ZlWzBdLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIGVsZW1lbnQgd2FzIG5vdCByZW1vdmVkIHlldCBiZWNhdXNlIG9mIHBlbmRpbmcgYW5pbWF0aW9uLCBtYXJrIGl0IGFzIGRlbGV0ZWRcbiAgICAgICAgICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gaWdub3JlIGl0IGxhdGVyXG4gICAgICAgICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlW2luZGV4XVtOR19SRU1PVkVEXSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJsb2NrLnNjb3BlLiRkZXN0cm95KCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gd2UgYXJlIG5vdCB1c2luZyBmb3JFYWNoIGZvciBwZXJmIHJlYXNvbnMgKHRyeWluZyB0byBhdm9pZCAjY2FsbClcbiAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBjb2xsZWN0aW9uTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBrZXkgPSAoY29sbGVjdGlvbiA9PT0gY29sbGVjdGlvbktleXMpID8gaW5kZXggOiBjb2xsZWN0aW9uS2V5c1tpbmRleF07XG4gICAgICAgICAgICB2YWx1ZSA9IGNvbGxlY3Rpb25ba2V5XTtcbiAgICAgICAgICAgIGJsb2NrID0gbmV4dEJsb2NrT3JkZXJbaW5kZXhdO1xuXG4gICAgICAgICAgICBpZiAoYmxvY2suc2NvcGUpIHtcbiAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhbHJlYWR5IHNlZW4gdGhpcyBvYmplY3QsIHRoZW4gd2UgbmVlZCB0byByZXVzZSB0aGVcbiAgICAgICAgICAgICAgLy8gYXNzb2NpYXRlZCBzY29wZS9lbGVtZW50XG5cbiAgICAgICAgICAgICAgbmV4dE5vZGUgPSBwcmV2aW91c05vZGU7XG5cbiAgICAgICAgICAgICAgLy8gc2tpcCBub2RlcyB0aGF0IGFyZSBhbHJlYWR5IHBlbmRpbmcgcmVtb3ZhbCB2aWEgbGVhdmUgYW5pbWF0aW9uXG4gICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICB9IHdoaWxlIChuZXh0Tm9kZSAmJiBuZXh0Tm9kZVtOR19SRU1PVkVEXSk7XG5cbiAgICAgICAgICAgICAgaWYgKGdldEJsb2NrU3RhcnQoYmxvY2spICE9PSBuZXh0Tm9kZSkge1xuICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGl0ZW0gd2hpY2ggZ290IG1vdmVkXG4gICAgICAgICAgICAgICAgJGFuaW1hdGUubW92ZShnZXRCbG9ja05vZGVzKGJsb2NrLmNsb25lKSwgbnVsbCwgcHJldmlvdXNOb2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSBnZXRCbG9ja0VuZChibG9jayk7XG4gICAgICAgICAgICAgIHVwZGF0ZVNjb3BlKGJsb2NrLnNjb3BlLCBpbmRleCwgdmFsdWVJZGVudGlmaWVyLCB2YWx1ZSwga2V5SWRlbnRpZmllciwga2V5LCBjb2xsZWN0aW9uTGVuZ3RoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIG5ldyBpdGVtIHdoaWNoIHdlIGRvbid0IGtub3cgYWJvdXRcbiAgICAgICAgICAgICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24gbmdSZXBlYXRUcmFuc2NsdWRlKGNsb25lLCBzY29wZSkge1xuICAgICAgICAgICAgICAgIGJsb2NrLnNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgICAgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvbmUtdnMtY3JlYXRlY29tbWVudFxuICAgICAgICAgICAgICAgIHZhciBlbmROb2RlID0gbmdSZXBlYXRFbmRDb21tZW50LmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgY2xvbmVbY2xvbmUubGVuZ3RoKytdID0gZW5kTm9kZTtcblxuICAgICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNsb25lLCBudWxsLCBwcmV2aW91c05vZGUpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzTm9kZSA9IGVuZE5vZGU7XG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2Ugb25seSBuZWVkIHRoZSBmaXJzdC9sYXN0IG5vZGUgb2YgdGhlIGNsb25lZCBub2Rlcy5cbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB3ZSBuZWVkIHRvIGtlZXAgdGhlIHJlZmVyZW5jZSB0byB0aGUganFsaXRlIHdyYXBwZXIgYXMgaXQgbWlnaHQgYmUgY2hhbmdlZCBsYXRlclxuICAgICAgICAgICAgICAgIC8vIGJ5IGEgZGlyZWN0aXZlIHdpdGggdGVtcGxhdGVVcmwgd2hlbiBpdHMgdGVtcGxhdGUgYXJyaXZlcy5cbiAgICAgICAgICAgICAgICBibG9jay5jbG9uZSA9IGNsb25lO1xuICAgICAgICAgICAgICAgIG5leHRCbG9ja01hcFtibG9jay5pZF0gPSBibG9jaztcbiAgICAgICAgICAgICAgICB1cGRhdGVTY29wZShibG9jay5zY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgY29sbGVjdGlvbkxlbmd0aCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBsYXN0QmxvY2tNYXAgPSBuZXh0QmxvY2tNYXA7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxudmFyIE5HX0hJREVfQ0xBU1MgPSAnbmctaGlkZSc7XG52YXIgTkdfSElERV9JTl9QUk9HUkVTU19DTEFTUyA9ICduZy1oaWRlLWFuaW1hdGUnO1xuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1Nob3dcbiAqIEBtdWx0aUVsZW1lbnRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdTaG93YCBkaXJlY3RpdmUgc2hvd3Mgb3IgaGlkZXMgdGhlIGdpdmVuIEhUTUwgZWxlbWVudCBiYXNlZCBvbiB0aGUgZXhwcmVzc2lvbiBwcm92aWRlZCB0b1xuICogdGhlIGBuZ1Nob3dgIGF0dHJpYnV0ZS5cbiAqXG4gKiBUaGUgZWxlbWVudCBpcyBzaG93biBvciBoaWRkZW4gYnkgcmVtb3Zpbmcgb3IgYWRkaW5nIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBvbnRvIHRoZSBlbGVtZW50LlxuICogVGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIHByZWRlZmluZWQgaW4gQW5ndWxhckpTIGFuZCBzZXRzIHRoZSBkaXNwbGF5IHN0eWxlIHRvIG5vbmUgKHVzaW5nIGFuXG4gKiBgIWltcG9ydGFudGAgZmxhZykuIEZvciBDU1AgbW9kZSBwbGVhc2UgYWRkIGBhbmd1bGFyLWNzcC5jc3NgIHRvIHlvdXIgSFRNTCBmaWxlIChzZWVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgdHJ1dGh5IChlbGVtZW50IGlzIHZpc2libGUpIC0tPlxuICogPGRpdiBuZy1zaG93PVwibXlWYWx1ZVwiPjwvZGl2PlxuICpcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyBmYWxzeSAoZWxlbWVudCBpcyBoaWRkZW4pIC0tPlxuICogPGRpdiBuZy1zaG93PVwibXlWYWx1ZVwiIGNsYXNzPVwibmctaGlkZVwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogV2hlbiB0aGUgYG5nU2hvd2AgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBmYWxzeSB2YWx1ZSB0aGVuIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyBhZGRlZFxuICogdG8gdGhlIGNsYXNzIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gdHJ1dGh5LCB0aGUgYC5uZy1oaWRlYFxuICogQ1NTIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCBjYXVzaW5nIHRoZSBlbGVtZW50IG5vdCB0byBhcHBlYXIgaGlkZGVuLlxuICpcbiAqICMjIFdoeSBpcyBgIWltcG9ydGFudGAgdXNlZD9cbiAqXG4gKiBZb3UgbWF5IGJlIHdvbmRlcmluZyB3aHkgYCFpbXBvcnRhbnRgIGlzIHVzZWQgZm9yIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcy4gVGhpcyBpcyBiZWNhdXNlIHRoZVxuICogYC5uZy1oaWRlYCBzZWxlY3RvciBjYW4gYmUgZWFzaWx5IG92ZXJyaWRkZW4gYnkgaGVhdmllciBzZWxlY3RvcnMuIEZvciBleGFtcGxlLCBzb21ldGhpbmcgYXNcbiAqIHNpbXBsZSBhcyBjaGFuZ2luZyB0aGUgZGlzcGxheSBzdHlsZSBvbiBhIEhUTUwgbGlzdCBpdGVtIHdvdWxkIG1ha2UgaGlkZGVuIGVsZW1lbnRzIGFwcGVhclxuICogdmlzaWJsZS4gVGhpcyBhbHNvIGJlY29tZXMgYSBiaWdnZXIgaXNzdWUgd2hlbiBkZWFsaW5nIHdpdGggQ1NTIGZyYW1ld29ya3MuXG4gKlxuICogQnkgdXNpbmcgYCFpbXBvcnRhbnRgLCB0aGUgc2hvdyBhbmQgaGlkZSBiZWhhdmlvciB3aWxsIHdvcmsgYXMgZXhwZWN0ZWQgZGVzcGl0ZSBhbnkgY2xhc2ggYmV0d2VlblxuICogQ1NTIHNlbGVjdG9yIHNwZWNpZmljaXR5ICh3aGVuIGAhaW1wb3J0YW50YCBpc24ndCB1c2VkIHdpdGggYW55IGNvbmZsaWN0aW5nIHN0eWxlcykuIElmIGFcbiAqIGRldmVsb3BlciBjaG9vc2VzIHRvIG92ZXJyaWRlIHRoZSBzdHlsaW5nIHRvIGNoYW5nZSBob3cgdG8gaGlkZSBhbiBlbGVtZW50IHRoZW4gaXQgaXMganVzdCBhXG4gKiBtYXR0ZXIgb2YgdXNpbmcgYCFpbXBvcnRhbnRgIGluIHRoZWlyIG93biBDU1MgY29kZS5cbiAqXG4gKiAjIyMgT3ZlcnJpZGluZyBgLm5nLWhpZGVgXG4gKlxuICogQnkgZGVmYXVsdCwgdGhlIGAubmctaGlkZWAgY2xhc3Mgd2lsbCBzdHlsZSB0aGUgZWxlbWVudCB3aXRoIGBkaXNwbGF5OiBub25lICFpbXBvcnRhbnRgLiBJZiB5b3VcbiAqIHdpc2ggdG8gY2hhbmdlIHRoZSBoaWRlIGJlaGF2aW9yIHdpdGggYG5nU2hvd2AvYG5nSGlkZWAsIHlvdSBjYW4gc2ltcGx5IG92ZXJ3cml0ZSB0aGUgc3R5bGVzIGZvclxuICogdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBOb3RlIHRoYXQgdGhlIHNlbGVjdG9yIHRoYXQgbmVlZHMgdG8gYmUgdXNlZCBpcyBhY3R1YWxseVxuICogYC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKWAgdG8gY29wZSB3aXRoIGV4dHJhIGFuaW1hdGlvbiBjbGFzc2VzIHRoYXQgY2FuIGJlIGFkZGVkLlxuICpcbiAqIGBgYGNzc1xuICogLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpIHtcbiAqICAgLyYjNDI7IFRoZXNlIGFyZSBqdXN0IGFsdGVybmF0aXZlIHdheXMgb2YgaGlkaW5nIGFuIGVsZW1lbnQgJiM0MjsvXG4gKiAgIGRpc3BsYXk6IGJsb2NrIWltcG9ydGFudDtcbiAqICAgcG9zaXRpb246IGFic29sdXRlO1xuICogICB0b3A6IC05OTk5cHg7XG4gKiAgIGxlZnQ6IC05OTk5cHg7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBCeSBkZWZhdWx0IHlvdSBkb24ndCBuZWVkIHRvIG92ZXJyaWRlIGFueXRoaW5nIGluIENTUyBhbmQgdGhlIGFuaW1hdGlvbnMgd2lsbCB3b3JrIGFyb3VuZCB0aGVcbiAqIGRpc3BsYXkgc3R5bGUuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgJGFuaW1hdGUjYWRkQ2xhc3MgYWRkQ2xhc3N9IGAubmctaGlkZWAgICAgICAgfCBBZnRlciB0aGUgYG5nU2hvd2AgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBub24gdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSB0aGUgY29udGVudHMgYXJlIHNldCB0byBoaWRkZW4uIHxcbiAqIHwge0BsaW5rICRhbmltYXRlI3JlbW92ZUNsYXNzIHJlbW92ZUNsYXNzfSBgLm5nLWhpZGVgIHwgQWZ0ZXIgdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSBjb250ZW50cyBhcmUgc2V0IHRvIHZpc2libGUuICAgICAgICB8XG4gKlxuICogQW5pbWF0aW9ucyBpbiBgbmdTaG93YC9gbmdIaWRlYCB3b3JrIHdpdGggdGhlIHNob3cgYW5kIGhpZGUgZXZlbnRzIHRoYXQgYXJlIHRyaWdnZXJlZCB3aGVuIHRoZVxuICogZGlyZWN0aXZlIGV4cHJlc3Npb24gaXMgdHJ1ZSBhbmQgZmFsc2UuIFRoaXMgc3lzdGVtIHdvcmtzIGxpa2UgdGhlIGFuaW1hdGlvbiBzeXN0ZW0gcHJlc2VudCB3aXRoXG4gKiBgbmdDbGFzc2AgZXhjZXB0IHRoYXQgeW91IG11c3QgYWxzbyBpbmNsdWRlIHRoZSBgIWltcG9ydGFudGAgZmxhZyB0byBvdmVycmlkZSB0aGUgZGlzcGxheVxuICogcHJvcGVydHkgc28gdGhhdCB0aGUgZWxlbWVudHMgYXJlIG5vdCBhY3R1YWxseSBoaWRkZW4gZHVyaW5nIHRoZSBhbmltYXRpb24uXG4gKlxuICogYGBgY3NzXG4gKiAvJiM0MjsgQSB3b3JraW5nIGV4YW1wbGUgY2FuIGJlIGZvdW5kIGF0IHRoZSBib3R0b20gb2YgdGhpcyBwYWdlLiAmIzQyOy9cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLCAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7XG4gKiAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGxpbmVhcjtcbiAqIH1cbiAqXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUubmctaGlkZS1yZW1vdmUtYWN0aXZlIHsgLi4uIH1cbiAqIGBgYFxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0LCBhcyBvZiBBbmd1bGFySlMgdmVyc2lvbiAxLjMsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hhbmdlIHRoZSBkaXNwbGF5IHByb3BlcnR5XG4gKiB0byBibG9jayBkdXJpbmcgYW5pbWF0aW9uIHN0YXRlcyAtIG5nQW5pbWF0ZSB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBzdHlsZSB0b2dnbGluZyBmb3IgeW91LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1Nob3cgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeS9mYWxzeSB0aGVuIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCBpcyBzaG93bi9oaWRkZW4gcmVzcGVjdGl2ZWx5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBBIHNpbXBsZSBleGFtcGxlLCBhbmltYXRpbmcgdGhlIGVsZW1lbnQncyBvcGFjaXR5OlxuICpcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLXNob3ctc2ltcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIFNob3c6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIG5nU2hvd1wiPjxiciAvPlxuICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgYW5pbWF0ZS1zaG93LWhpZGVcIiBuZy1zaG93PVwiY2hlY2tlZFwiPlxuICAgICAgICBJIHNob3cgdXAgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuYW5pbWF0ZS1zaG93LWhpZGUubmctaGlkZSB7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlLWFkZCxcbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlLXJlbW92ZSB7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCBsaW5lYXIgMC41cztcbiAgICAgIH1cblxuICAgICAgLmNoZWNrLWVsZW1lbnQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZ1Nob3cnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoZWNrYm94ID0gZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKTtcbiAgICAgICAgdmFyIGNoZWNrRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCcuY2hlY2stZWxlbWVudCcpKTtcblxuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICBjaGVja2JveC5jbGljaygpO1xuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqXG4gKiA8aHIgLz5cbiAqIEBleGFtcGxlXG4gKiBBIG1vcmUgY29tcGxleCBleGFtcGxlLCBmZWF0dXJpbmcgZGlmZmVyZW50IHNob3cvaGlkZSBhbmltYXRpb25zOlxuICpcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLXNob3ctY29tcGxleFwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICBTaG93OiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCIgYXJpYS1sYWJlbD1cIlRvZ2dsZSBuZ1Nob3dcIj48YnIgLz5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGZ1bmt5LXNob3ctaGlkZVwiIG5nLXNob3c9XCJjaGVja2VkXCI+XG4gICAgICAgIEkgc2hvdyB1cCB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIGJvZHkge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBwZXJzcGVjdGl2ZTogMTAwMHB4O1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtYWRkIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVaKDApO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVaKC0xMzVkZWcpO1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVZKDkwZGVnKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVkoMCk7XG4gICAgICB9XG5cbiAgICAgIC5jaGVjay1lbGVtZW50IHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmdTaG93JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGVja2JveCA9IGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSk7XG4gICAgICAgIHZhciBjaGVja0VsZW0gPSBlbGVtZW50KGJ5LmNzcygnLmNoZWNrLWVsZW1lbnQnKSk7XG5cbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgY2hlY2tib3guY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1Nob3dEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdTaG93LCBmdW5jdGlvbiBuZ1Nob3dXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICAvLyB3ZSdyZSBhZGRpbmcgYSB0ZW1wb3JhcnksIGFuaW1hdGlvbi1zcGVjaWZpYyBjbGFzcyBmb3IgbmctaGlkZSBzaW5jZSB0aGlzIHdheVxuICAgICAgICAvLyB3ZSBjYW4gY29udHJvbCB3aGVuIHRoZSBlbGVtZW50IGlzIGFjdHVhbGx5IGRpc3BsYXllZCBvbiBzY3JlZW4gd2l0aG91dCBoYXZpbmdcbiAgICAgICAgLy8gdG8gaGF2ZSBhIGdsb2JhbC9ncmVlZHkgQ1NTIHNlbGVjdG9yIHRoYXQgYnJlYWtzIHdoZW4gb3RoZXIgYW5pbWF0aW9ucyBhcmUgcnVuLlxuICAgICAgICAvLyBSZWFkOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy85MTAzI2lzc3VlY29tbWVudC01ODMzNTg0NVxuICAgICAgICAkYW5pbWF0ZVt2YWx1ZSA/ICdyZW1vdmVDbGFzcycgOiAnYWRkQ2xhc3MnXShlbGVtZW50LCBOR19ISURFX0NMQVNTLCB7XG4gICAgICAgICAgdGVtcENsYXNzZXM6IE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1NcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSGlkZVxuICogQG11bHRpRWxlbWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0hpZGVgIGRpcmVjdGl2ZSBzaG93cyBvciBoaWRlcyB0aGUgZ2l2ZW4gSFRNTCBlbGVtZW50IGJhc2VkIG9uIHRoZSBleHByZXNzaW9uIHByb3ZpZGVkIHRvXG4gKiB0aGUgYG5nSGlkZWAgYXR0cmlidXRlLlxuICpcbiAqIFRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiBieSByZW1vdmluZyBvciBhZGRpbmcgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIG9udG8gdGhlIGVsZW1lbnQuXG4gKiBUaGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcHJlZGVmaW5lZCBpbiBBbmd1bGFySlMgYW5kIHNldHMgdGhlIGRpc3BsYXkgc3R5bGUgdG8gbm9uZSAodXNpbmcgYW5cbiAqIGAhaW1wb3J0YW50YCBmbGFnKS4gRm9yIENTUCBtb2RlIHBsZWFzZSBhZGQgYGFuZ3VsYXItY3NwLmNzc2AgdG8geW91ciBIVE1MIGZpbGUgKHNlZVxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NzcCBuZ0NzcH0pLlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyB0cnV0aHkgKGVsZW1lbnQgaXMgaGlkZGVuKSAtLT5cbiAqIDxkaXYgbmctaGlkZT1cIm15VmFsdWVcIiBjbGFzcz1cIm5nLWhpZGVcIj48L2Rpdj5cbiAqXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgZmFsc3kgKGVsZW1lbnQgaXMgdmlzaWJsZSkgLS0+XG4gKiA8ZGl2IG5nLWhpZGU9XCJteVZhbHVlXCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoZSBgbmdIaWRlYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSB0aGVuIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyBhZGRlZFxuICogdG8gdGhlIGNsYXNzIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gZmFsc3ksIHRoZSBgLm5nLWhpZGVgXG4gKiBDU1MgY2xhc3MgaXMgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50IGNhdXNpbmcgdGhlIGVsZW1lbnQgbm90IHRvIGFwcGVhciBoaWRkZW4uXG4gKlxuICogIyMgV2h5IGlzIGAhaW1wb3J0YW50YCB1c2VkP1xuICpcbiAqIFlvdSBtYXkgYmUgd29uZGVyaW5nIHdoeSBgIWltcG9ydGFudGAgaXMgdXNlZCBmb3IgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBUaGlzIGlzIGJlY2F1c2UgdGhlXG4gKiBgLm5nLWhpZGVgIHNlbGVjdG9yIGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiBieSBoZWF2aWVyIHNlbGVjdG9ycy4gRm9yIGV4YW1wbGUsIHNvbWV0aGluZyBhc1xuICogc2ltcGxlIGFzIGNoYW5naW5nIHRoZSBkaXNwbGF5IHN0eWxlIG9uIGEgSFRNTCBsaXN0IGl0ZW0gd291bGQgbWFrZSBoaWRkZW4gZWxlbWVudHMgYXBwZWFyXG4gKiB2aXNpYmxlLiBUaGlzIGFsc28gYmVjb21lcyBhIGJpZ2dlciBpc3N1ZSB3aGVuIGRlYWxpbmcgd2l0aCBDU1MgZnJhbWV3b3Jrcy5cbiAqXG4gKiBCeSB1c2luZyBgIWltcG9ydGFudGAsIHRoZSBzaG93IGFuZCBoaWRlIGJlaGF2aW9yIHdpbGwgd29yayBhcyBleHBlY3RlZCBkZXNwaXRlIGFueSBjbGFzaCBiZXR3ZWVuXG4gKiBDU1Mgc2VsZWN0b3Igc3BlY2lmaWNpdHkgKHdoZW4gYCFpbXBvcnRhbnRgIGlzbid0IHVzZWQgd2l0aCBhbnkgY29uZmxpY3Rpbmcgc3R5bGVzKS4gSWYgYVxuICogZGV2ZWxvcGVyIGNob29zZXMgdG8gb3ZlcnJpZGUgdGhlIHN0eWxpbmcgdG8gY2hhbmdlIGhvdyB0byBoaWRlIGFuIGVsZW1lbnQgdGhlbiBpdCBpcyBqdXN0IGFcbiAqIG1hdHRlciBvZiB1c2luZyBgIWltcG9ydGFudGAgaW4gdGhlaXIgb3duIENTUyBjb2RlLlxuICpcbiAqICMjIyBPdmVycmlkaW5nIGAubmctaGlkZWBcbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGUgYC5uZy1oaWRlYCBjbGFzcyB3aWxsIHN0eWxlIHRoZSBlbGVtZW50IHdpdGggYGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudGAuIElmIHlvdVxuICogd2lzaCB0byBjaGFuZ2UgdGhlIGhpZGUgYmVoYXZpb3Igd2l0aCBgbmdTaG93YC9gbmdIaWRlYCwgeW91IGNhbiBzaW1wbHkgb3ZlcndyaXRlIHRoZSBzdHlsZXMgZm9yXG4gKiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MuIE5vdGUgdGhhdCB0aGUgc2VsZWN0b3IgdGhhdCBuZWVkcyB0byBiZSB1c2VkIGlzIGFjdHVhbGx5XG4gKiBgLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpYCB0byBjb3BlIHdpdGggZXh0cmEgYW5pbWF0aW9uIGNsYXNzZXMgdGhhdCBjYW4gYmUgYWRkZWQuXG4gKlxuICogYGBgY3NzXG4gKiAubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSkge1xuICogICAvJiM0MjsgVGhlc2UgYXJlIGp1c3QgYWx0ZXJuYXRpdmUgd2F5cyBvZiBoaWRpbmcgYW4gZWxlbWVudCAmIzQyOy9cbiAqICAgZGlzcGxheTogYmxvY2shaW1wb3J0YW50O1xuICogICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gKiAgIHRvcDogLTk5OTlweDtcbiAqICAgbGVmdDogLTk5OTlweDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEJ5IGRlZmF1bHQgeW91IGRvbid0IG5lZWQgdG8gb3ZlcnJpZGUgaW4gQ1NTIGFueXRoaW5nIGFuZCB0aGUgYW5pbWF0aW9ucyB3aWxsIHdvcmsgYXJvdW5kIHRoZVxuICogZGlzcGxheSBzdHlsZS5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogfCBBbmltYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayAkYW5pbWF0ZSNhZGRDbGFzcyBhZGRDbGFzc30gYC5uZy1oaWRlYCAgICAgICB8IEFmdGVyIHRoZSBgbmdIaWRlYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gaGlkZGVuLiAgfFxuICogfCB7QGxpbmsgJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IGAubmctaGlkZWAgfCBBZnRlciB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBub24gdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSBjb250ZW50cyBhcmUgc2V0IHRvIHZpc2libGUuIHxcbiAqXG4gKiBBbmltYXRpb25zIGluIGBuZ1Nob3dgL2BuZ0hpZGVgIHdvcmsgd2l0aCB0aGUgc2hvdyBhbmQgaGlkZSBldmVudHMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdoZW4gdGhlXG4gKiBkaXJlY3RpdmUgZXhwcmVzc2lvbiBpcyB0cnVlIGFuZCBmYWxzZS4gVGhpcyBzeXN0ZW0gd29ya3MgbGlrZSB0aGUgYW5pbWF0aW9uIHN5c3RlbSBwcmVzZW50IHdpdGhcbiAqIGBuZ0NsYXNzYCBleGNlcHQgdGhhdCB5b3UgbXVzdCBhbHNvIGluY2x1ZGUgdGhlIGAhaW1wb3J0YW50YCBmbGFnIHRvIG92ZXJyaWRlIHRoZSBkaXNwbGF5XG4gKiBwcm9wZXJ0eSBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgbm90IGFjdHVhbGx5IGhpZGRlbiBkdXJpbmcgdGhlIGFuaW1hdGlvbi5cbiAqXG4gKiBgYGBjc3NcbiAqIC8mIzQyOyBBIHdvcmtpbmcgZXhhbXBsZSBjYW4gYmUgZm91bmQgYXQgdGhlIGJvdHRvbSBvZiB0aGlzIHBhZ2UuICYjNDI7L1xuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQsIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHtcbiAqICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgbGluZWFyO1xuICogfVxuICpcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLm5nLWhpZGUtYWRkLWFjdGl2ZSB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUgeyAuLi4gfVxuICogYGBgXG4gKlxuICogS2VlcCBpbiBtaW5kIHRoYXQsIGFzIG9mIEFuZ3VsYXJKUyB2ZXJzaW9uIDEuMywgdGhlcmUgaXMgbm8gbmVlZCB0byBjaGFuZ2UgdGhlIGRpc3BsYXkgcHJvcGVydHlcbiAqIHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzIC0gbmdBbmltYXRlIHdpbGwgYXV0b21hdGljYWxseSBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGZvciB5b3UuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSGlkZSBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5L2ZhbHN5IHRoZW4gdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50IGlzIGhpZGRlbi9zaG93biByZXNwZWN0aXZlbHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIEEgc2ltcGxlIGV4YW1wbGUsIGFuaW1hdGluZyB0aGUgZWxlbWVudCdzIG9wYWNpdHk6XG4gKlxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctaGlkZS1zaW1wbGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgSGlkZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIGFyaWEtbGFiZWw9XCJUb2dnbGUgbmdIaWRlXCI+PGJyIC8+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLXNob3ctaGlkZVwiIG5nLWhpZGU9XCJjaGVja2VkXCI+XG4gICAgICAgIEkgaGlkZSB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlIHtcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtc2hvdy1oaWRlLm5nLWhpZGUtYWRkLFxuICAgICAgLmFuaW1hdGUtc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlIHtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIGxpbmVhciAwLjVzO1xuICAgICAgfVxuXG4gICAgICAuY2hlY2stZWxlbWVudCB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nSGlkZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2tib3ggPSBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpO1xuICAgICAgICB2YXIgY2hlY2tFbGVtID0gZWxlbWVudChieS5jc3MoJy5jaGVjay1lbGVtZW50JykpO1xuXG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgY2hlY2tib3guY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICpcbiAqIDxociAvPlxuICogQGV4YW1wbGVcbiAqIEEgbW9yZSBjb21wbGV4IGV4YW1wbGUsIGZlYXR1cmluZyBkaWZmZXJlbnQgc2hvdy9oaWRlIGFuaW1hdGlvbnM6XG4gKlxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctaGlkZS1jb21wbGV4XCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIEhpZGU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIG5nSGlkZVwiPjxiciAvPlxuICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgZnVua3ktc2hvdy1oaWRlXCIgbmctaGlkZT1cImNoZWNrZWRcIj5cbiAgICAgICAgSSBoaWRlIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgYm9keSB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHBlcnNwZWN0aXZlOiAxMDAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1hZGQge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVooMCk7XG4gICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlLWluLW91dDtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVooLTEzNWRlZyk7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1yZW1vdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVkoOTBkZWcpO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlO1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWSgwKTtcbiAgICAgIH1cblxuICAgICAgLmNoZWNrLWVsZW1lbnQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZ0hpZGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoZWNrYm94ID0gZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKTtcbiAgICAgICAgdmFyIGNoZWNrRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCcuY2hlY2stZWxlbWVudCcpKTtcblxuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGNoZWNrYm94LmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nSGlkZURpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCBmdW5jdGlvbigkYW5pbWF0ZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0hpZGUsIGZ1bmN0aW9uIG5nSGlkZVdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIFRoZSBjb21tZW50IGluc2lkZSBvZiB0aGUgbmdTaG93RGlyZWN0aXZlIGV4cGxhaW5zIHdoeSB3ZSBhZGQgYW5kXG4gICAgICAgIC8vIHJlbW92ZSBhIHRlbXBvcmFyeSBjbGFzcyBmb3IgdGhlIHNob3cvaGlkZSBhbmltYXRpb25cbiAgICAgICAgJGFuaW1hdGVbdmFsdWUgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oZWxlbWVudCxOR19ISURFX0NMQVNTLCB7XG4gICAgICAgICAgdGVtcENsYXNzZXM6IE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1NcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N0eWxlXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdTdHlsZWAgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc2V0IENTUyBzdHlsZSBvbiBhbiBIVE1MIGVsZW1lbnQgY29uZGl0aW9uYWxseS5cbiAqXG4gKiBAa25vd25Jc3N1ZVxuICogWW91IHNob3VsZCBub3QgdXNlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb259IGluIHRoZSB2YWx1ZSBvZiB0aGUgYHN0eWxlYFxuICogYXR0cmlidXRlLCB3aGVuIHVzaW5nIHRoZSBgbmdTdHlsZWAgZGlyZWN0aXZlIG9uIHRoZSBzYW1lIGVsZW1lbnQuXG4gKiBTZWUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24ja25vd24taXNzdWVzIGhlcmV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU3R5bGVcbiAqXG4gKiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB3aGljaCBldmFscyB0byBhblxuICogb2JqZWN0IHdob3NlIGtleXMgYXJlIENTUyBzdHlsZSBuYW1lcyBhbmQgdmFsdWVzIGFyZSBjb3JyZXNwb25kaW5nIHZhbHVlcyBmb3IgdGhvc2UgQ1NTXG4gKiBrZXlzLlxuICpcbiAqIFNpbmNlIHNvbWUgQ1NTIHN0eWxlIG5hbWVzIGFyZSBub3QgdmFsaWQga2V5cyBmb3IgYW4gb2JqZWN0LCB0aGV5IG11c3QgYmUgcXVvdGVkLlxuICogU2VlIHRoZSAnYmFja2dyb3VuZC1jb2xvcicgc3R5bGUgaW4gdGhlIGV4YW1wbGUgYmVsb3cuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1zdHlsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwic2V0IGNvbG9yXCIgbmctY2xpY2s9XCJteVN0eWxlPXtjb2xvcjoncmVkJ31cIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInNldCBiYWNrZ3JvdW5kXCIgbmctY2xpY2s9XCJteVN0eWxlPXsnYmFja2dyb3VuZC1jb2xvcic6J2JsdWUnfVwiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiY2xlYXJcIiBuZy1jbGljaz1cIm15U3R5bGU9e31cIj5cbiAgICAgICAgPGJyLz5cbiAgICAgICAgPHNwYW4gbmctc3R5bGU9XCJteVN0eWxlXCI+U2FtcGxlIFRleHQ8L3NwYW4+XG4gICAgICAgIDxwcmU+bXlTdHlsZT17e215U3R5bGV9fTwvcHJlPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICBzcGFuIHtcbiAgICAgICAgIGNvbG9yOiBibGFjaztcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBjb2xvclNwYW4gPSBlbGVtZW50KGJ5LmNzcygnc3BhbicpKTtcblxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctc3R5bGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMCwgMCwgMCwgMSknKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCdpbnB1dFt2YWx1ZT1cXCdzZXQgY29sb3JcXCddJykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoY29sb3JTcGFuLmdldENzc1ZhbHVlKCdjb2xvcicpKS50b0JlKCdyZ2JhKDI1NSwgMCwgMCwgMSknKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCdpbnB1dFt2YWx1ZT1jbGVhcl0nKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMCwgMCwgMCwgMSknKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdTdHlsZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gIHNjb3BlLiR3YXRjaChhdHRyLm5nU3R5bGUsIGZ1bmN0aW9uIG5nU3R5bGVXYXRjaEFjdGlvbihuZXdTdHlsZXMsIG9sZFN0eWxlcykge1xuICAgIGlmIChvbGRTdHlsZXMgJiYgKG5ld1N0eWxlcyAhPT0gb2xkU3R5bGVzKSkge1xuICAgICAgZm9yRWFjaChvbGRTdHlsZXMsIGZ1bmN0aW9uKHZhbCwgc3R5bGUpIHsgZWxlbWVudC5jc3Moc3R5bGUsICcnKTt9KTtcbiAgICB9XG4gICAgaWYgKG5ld1N0eWxlcykgZWxlbWVudC5jc3MobmV3U3R5bGVzKTtcbiAgfSwgdHJ1ZSk7XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N3aXRjaFxuICogQHJlc3RyaWN0IEVBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nU3dpdGNoYCBkaXJlY3RpdmUgaXMgdXNlZCB0byBjb25kaXRpb25hbGx5IHN3YXAgRE9NIHN0cnVjdHVyZSBvbiB5b3VyIHRlbXBsYXRlIGJhc2VkIG9uIGEgc2NvcGUgZXhwcmVzc2lvbi5cbiAqIEVsZW1lbnRzIHdpdGhpbiBgbmdTd2l0Y2hgIGJ1dCB3aXRob3V0IGBuZ1N3aXRjaFdoZW5gIG9yIGBuZ1N3aXRjaERlZmF1bHRgIGRpcmVjdGl2ZXMgd2lsbCBiZSBwcmVzZXJ2ZWQgYXQgdGhlIGxvY2F0aW9uXG4gKiBhcyBzcGVjaWZpZWQgaW4gdGhlIHRlbXBsYXRlLlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgaXRzZWxmIHdvcmtzIHNpbWlsYXIgdG8gbmdJbmNsdWRlLCBob3dldmVyLCBpbnN0ZWFkIG9mIGRvd25sb2FkaW5nIHRlbXBsYXRlIGNvZGUgKG9yIGxvYWRpbmcgaXRcbiAqIGZyb20gdGhlIHRlbXBsYXRlIGNhY2hlKSwgYG5nU3dpdGNoYCBzaW1wbHkgY2hvb3NlcyBvbmUgb2YgdGhlIG5lc3RlZCBlbGVtZW50cyBhbmQgbWFrZXMgaXQgdmlzaWJsZSBiYXNlZCBvbiB3aGljaCBlbGVtZW50XG4gKiBtYXRjaGVzIHRoZSB2YWx1ZSBvYnRhaW5lZCBmcm9tIHRoZSBldmFsdWF0ZWQgZXhwcmVzc2lvbi4gSW4gb3RoZXIgd29yZHMsIHlvdSBkZWZpbmUgYSBjb250YWluZXIgZWxlbWVudFxuICogKHdoZXJlIHlvdSBwbGFjZSB0aGUgZGlyZWN0aXZlKSwgcGxhY2UgYW4gZXhwcmVzc2lvbiBvbiB0aGUgKipgb249XCIuLi5cImAgYXR0cmlidXRlKipcbiAqIChvciB0aGUgKipgbmctc3dpdGNoPVwiLi4uXCJgIGF0dHJpYnV0ZSoqKSwgZGVmaW5lIGFueSBpbm5lciBlbGVtZW50cyBpbnNpZGUgb2YgdGhlIGRpcmVjdGl2ZSBhbmQgcGxhY2VcbiAqIGEgd2hlbiBhdHRyaWJ1dGUgcGVyIGVsZW1lbnQuIFRoZSB3aGVuIGF0dHJpYnV0ZSBpcyB1c2VkIHRvIGluZm9ybSBuZ1N3aXRjaCB3aGljaCBlbGVtZW50IHRvIGRpc3BsYXkgd2hlbiB0aGUgb25cbiAqIGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkLiBJZiBhIG1hdGNoaW5nIGV4cHJlc3Npb24gaXMgbm90IGZvdW5kIHZpYSBhIHdoZW4gYXR0cmlidXRlIHRoZW4gYW4gZWxlbWVudCB3aXRoIHRoZSBkZWZhdWx0XG4gKiBhdHRyaWJ1dGUgaXMgZGlzcGxheWVkLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiBCZSBhd2FyZSB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QgY2Fubm90IGJlIGV4cHJlc3Npb25zLiBUaGV5IGFyZSBpbnRlcnByZXRlZFxuICogYXMgbGl0ZXJhbCBzdHJpbmcgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QuXG4gKiBGb3IgZXhhbXBsZSwgKipgbmctc3dpdGNoLXdoZW49XCJzb21lVmFsXCJgKiogd2lsbCBtYXRjaCBhZ2FpbnN0IHRoZSBzdHJpbmcgYFwic29tZVZhbFwiYCBub3QgYWdhaW5zdCB0aGVcbiAqIHZhbHVlIG9mIHRoZSBleHByZXNzaW9uIGAkc2NvcGUuc29tZVZhbGAuXG4gKiA8L2Rpdj5cblxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjZW50ZXIgZW50ZXJ9ICB8IGFmdGVyIHRoZSBuZ1N3aXRjaCBjb250ZW50cyBjaGFuZ2UgYW5kIHRoZSBtYXRjaGVkIGNoaWxkIGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSB0aGUgY29udGFpbmVyIHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2xlYXZlIGxlYXZlfSAgfCBhZnRlciB0aGUgbmdTd2l0Y2ggY29udGVudHMgY2hhbmdlIGFuZCBqdXN0IGJlZm9yZSB0aGUgZm9ybWVyIGNvbnRlbnRzIGFyZSByZW1vdmVkIGZyb20gdGhlIERPTSB8XG4gKlxuICogQHVzYWdlXG4gKlxuICogYGBgXG4gKiA8QU5ZIG5nLXN3aXRjaD1cImV4cHJlc3Npb25cIj5cbiAqICAgPEFOWSBuZy1zd2l0Y2gtd2hlbj1cIm1hdGNoVmFsdWUxXCI+Li4uPC9BTlk+XG4gKiAgIDxBTlkgbmctc3dpdGNoLXdoZW49XCJtYXRjaFZhbHVlMlwiPi4uLjwvQU5ZPlxuICogICA8QU5ZIG5nLXN3aXRjaC1kZWZhdWx0Pi4uLjwvQU5ZPlxuICogPC9BTlk+XG4gKiBgYGBcbiAqXG4gKlxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgMTIwMFxuICogQHBhcmFtIHsqfSBuZ1N3aXRjaHxvbiBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QgPGNvZGU+bmctc3dpdGNoLXdoZW48L2NvZGU+LlxuICogT24gY2hpbGQgZWxlbWVudHMgYWRkOlxuICpcbiAqICogYG5nU3dpdGNoV2hlbmA6IHRoZSBjYXNlIHN0YXRlbWVudCB0byBtYXRjaCBhZ2FpbnN0LiBJZiBtYXRjaCB0aGVuIHRoaXNcbiAqICAgY2FzZSB3aWxsIGJlIGRpc3BsYXllZC4gSWYgdGhlIHNhbWUgbWF0Y2ggYXBwZWFycyBtdWx0aXBsZSB0aW1lcywgYWxsIHRoZVxuICogICBlbGVtZW50cyB3aWxsIGJlIGRpc3BsYXllZC4gSXQgaXMgcG9zc2libGUgdG8gYXNzb2NpYXRlIG11bHRpcGxlIHZhbHVlcyB0b1xuICogICB0aGUgc2FtZSBgbmdTd2l0Y2hXaGVuYCBieSBkZWZpbmluZyB0aGUgb3B0aW9uYWwgYXR0cmlidXRlXG4gKiAgIGBuZ1N3aXRjaFdoZW5TZXBhcmF0b3JgLiBUaGUgc2VwYXJhdG9yIHdpbGwgYmUgdXNlZCB0byBzcGxpdCB0aGUgdmFsdWUgb2ZcbiAqICAgdGhlIGBuZ1N3aXRjaFdoZW5gIGF0dHJpYnV0ZSBpbnRvIG11bHRpcGxlIHRva2VucywgYW5kIHRoZSBlbGVtZW50IHdpbGwgc2hvd1xuICogICBpZiBhbnkgb2YgdGhlIGBuZ1N3aXRjaGAgZXZhbHVhdGVzIHRvIGFueSBvZiB0aGVzZSB0b2tlbnMuXG4gKiAqIGBuZ1N3aXRjaERlZmF1bHRgOiB0aGUgZGVmYXVsdCBjYXNlIHdoZW4gbm8gb3RoZXIgY2FzZSBtYXRjaC4gSWYgdGhlcmVcbiAqICAgYXJlIG11bHRpcGxlIGRlZmF1bHQgY2FzZXMsIGFsbCBvZiB0aGVtIHdpbGwgYmUgZGlzcGxheWVkIHdoZW4gbm8gb3RoZXJcbiAqICAgY2FzZSBtYXRjaC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAgPGV4YW1wbGUgbW9kdWxlPVwic3dpdGNoRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1zd2l0Y2hcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cInNlbGVjdGlvblwiIG5nLW9wdGlvbnM9XCJpdGVtIGZvciBpdGVtIGluIGl0ZW1zXCI+XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgICA8Y29kZT5zZWxlY3Rpb249e3tzZWxlY3Rpb259fTwvY29kZT5cbiAgICAgICAgPGhyLz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoLWNvbnRhaW5lclwiXG4gICAgICAgICAgbmctc3dpdGNoIG9uPVwic2VsZWN0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtd2hlbj1cInNldHRpbmdzfG9wdGlvbnNcIiBuZy1zd2l0Y2gtd2hlbi1zZXBhcmF0b3I9XCJ8XCI+U2V0dGluZ3MgRGl2PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtd2hlbj1cImhvbWVcIj5Ib21lIFNwYW48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaFwiIG5nLXN3aXRjaC1kZWZhdWx0PmRlZmF1bHQ8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ3N3aXRjaEV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKVxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5pdGVtcyA9IFsnc2V0dGluZ3MnLCAnaG9tZScsICdvcHRpb25zJywgJ290aGVyJ107XG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGlvbiA9ICRzY29wZS5pdGVtc1swXTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgaGVpZ2h0OjQwcHg7XG4gICAgICAgIG92ZXJmbG93OmhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtc3dpdGNoIHtcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctYW5pbWF0ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcblxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgdG9wOjA7XG4gICAgICAgIGxlZnQ6MDtcbiAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgYm90dG9tOjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIge1xuICAgICAgICB0b3A6LTUwcHg7XG4gICAgICB9XG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctbGVhdmUsXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciBzd2l0Y2hFbGVtID0gZWxlbWVudChieS5jc3MoJ1tuZy1zd2l0Y2hdJykpO1xuICAgICAgdmFyIHNlbGVjdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlbGVjdGlvbicpKTtcblxuICAgICAgaXQoJ3Nob3VsZCBzdGFydCBpbiBzZXR0aW5ncycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGNoYW5nZSB0byBob21lJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDEpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvSG9tZSBTcGFuLyk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHRvIHNldHRpbmdzIHZpYSBcIm9wdGlvbnNcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIHNlbGVjdCBkZWZhdWx0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDMpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvZGVmYXVsdC8pO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1N3aXRjaERpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkYW5pbWF0ZSwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiAnbmdTd2l0Y2gnLFxuXG4gICAgLy8gYXNrcyBmb3IgJHNjb3BlIHRvIGZvb2wgdGhlIEJDIGNvbnRyb2xsZXIgbW9kdWxlXG4gICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbiBOZ1N3aXRjaENvbnRyb2xsZXIoKSB7XG4gICAgIHRoaXMuY2FzZXMgPSB7fTtcbiAgICB9XSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgbmdTd2l0Y2hDb250cm9sbGVyKSB7XG4gICAgICB2YXIgd2F0Y2hFeHByID0gYXR0ci5uZ1N3aXRjaCB8fCBhdHRyLm9uLFxuICAgICAgICAgIHNlbGVjdGVkVHJhbnNjbHVkZXMgPSBbXSxcbiAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzID0gW10sXG4gICAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMgPSBbXSxcbiAgICAgICAgICBzZWxlY3RlZFNjb3BlcyA9IFtdO1xuXG4gICAgICB2YXIgc3BsaWNlRmFjdG9yeSA9IGZ1bmN0aW9uKGFycmF5LCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9PSBmYWxzZSkgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgc2NvcGUuJHdhdGNoKHdhdGNoRXhwciwgZnVuY3Rpb24gbmdTd2l0Y2hXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgaSwgaWk7XG5cbiAgICAgICAgLy8gU3RhcnQgd2l0aCB0aGUgbGFzdCwgaW4gY2FzZSB0aGUgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIHRoZSBsb29wXG4gICAgICAgIHdoaWxlIChwcmV2aW91c0xlYXZlQW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAkYW5pbWF0ZS5jYW5jZWwocHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMucG9wKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBzZWxlY3RlZFNjb3Blcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkID0gZ2V0QmxvY2tOb2RlcyhzZWxlY3RlZEVsZW1lbnRzW2ldLmNsb25lKTtcbiAgICAgICAgICBzZWxlY3RlZFNjb3Blc1tpXS4kZGVzdHJveSgpO1xuICAgICAgICAgIHZhciBydW5uZXIgPSBwcmV2aW91c0xlYXZlQW5pbWF0aW9uc1tpXSA9ICRhbmltYXRlLmxlYXZlKHNlbGVjdGVkKTtcbiAgICAgICAgICBydW5uZXIuZG9uZShzcGxpY2VGYWN0b3J5KHByZXZpb3VzTGVhdmVBbmltYXRpb25zLCBpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIHNlbGVjdGVkU2NvcGVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgaWYgKChzZWxlY3RlZFRyYW5zY2x1ZGVzID0gbmdTd2l0Y2hDb250cm9sbGVyLmNhc2VzWychJyArIHZhbHVlXSB8fCBuZ1N3aXRjaENvbnRyb2xsZXIuY2FzZXNbJz8nXSkpIHtcbiAgICAgICAgICBmb3JFYWNoKHNlbGVjdGVkVHJhbnNjbHVkZXMsIGZ1bmN0aW9uKHNlbGVjdGVkVHJhbnNjbHVkZSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRUcmFuc2NsdWRlLnRyYW5zY2x1ZGUoZnVuY3Rpb24oY2FzZUVsZW1lbnQsIHNlbGVjdGVkU2NvcGUpIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTY29wZXMucHVzaChzZWxlY3RlZFNjb3BlKTtcbiAgICAgICAgICAgICAgdmFyIGFuY2hvciA9IHNlbGVjdGVkVHJhbnNjbHVkZS5lbGVtZW50O1xuICAgICAgICAgICAgICBjYXNlRWxlbWVudFtjYXNlRWxlbWVudC5sZW5ndGgrK10gPSAkY29tcGlsZS4kJGNyZWF0ZUNvbW1lbnQoJ2VuZCBuZ1N3aXRjaFdoZW4nKTtcbiAgICAgICAgICAgICAgdmFyIGJsb2NrID0geyBjbG9uZTogY2FzZUVsZW1lbnQgfTtcblxuICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLnB1c2goYmxvY2spO1xuICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjYXNlRWxlbWVudCwgYW5jaG9yLnBhcmVudCgpLCBhbmNob3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dO1xuXG52YXIgbmdTd2l0Y2hXaGVuRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xuICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gIHByaW9yaXR5OiAxMjAwLFxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcbiAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG5cbiAgICB2YXIgY2FzZXMgPSBhdHRycy5uZ1N3aXRjaFdoZW4uc3BsaXQoYXR0cnMubmdTd2l0Y2hXaGVuU2VwYXJhdG9yKS5zb3J0KCkuZmlsdGVyKFxuICAgICAgLy8gRmlsdGVyIGR1cGxpY2F0ZSBjYXNlc1xuICAgICAgZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7IHJldHVybiBhcnJheVtpbmRleCAtIDFdICE9PSBlbGVtZW50OyB9XG4gICAgKTtcblxuICAgIGZvckVhY2goY2FzZXMsIGZ1bmN0aW9uKHdoZW5DYXNlKSB7XG4gICAgICBjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXSA9IChjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXSB8fCBbXSk7XG4gICAgICBjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXS5wdXNoKHsgdHJhbnNjbHVkZTogJHRyYW5zY2x1ZGUsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG52YXIgbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xuICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gIHByaW9yaXR5OiAxMjAwLFxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcbiAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcbiAgICBjdHJsLmNhc2VzWyc/J10gPSAoY3RybC5jYXNlc1snPyddIHx8IFtdKTtcbiAgICBjdHJsLmNhc2VzWyc/J10ucHVzaCh7IHRyYW5zY2x1ZGU6ICR0cmFuc2NsdWRlLCBlbGVtZW50OiBlbGVtZW50IH0pO1xuICAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdUcmFuc2NsdWRlXG4gKiBAcmVzdHJpY3QgRUFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXJlY3RpdmUgdGhhdCBtYXJrcyB0aGUgaW5zZXJ0aW9uIHBvaW50IGZvciB0aGUgdHJhbnNjbHVkZWQgRE9NIG9mIHRoZSBuZWFyZXN0IHBhcmVudCBkaXJlY3RpdmUgdGhhdCB1c2VzIHRyYW5zY2x1c2lvbi5cbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgdGhhdCB5b3Ugd2FudCB0byBpbnNlcnQgYSBuYW1lZCB0cmFuc2NsdXNpb24gc2xvdCwgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBzbG90LCBieSBwcm92aWRpbmcgdGhlIHNsb3QgbmFtZVxuICogYXMgdGhlIHZhbHVlIG9mIHRoZSBgbmctdHJhbnNjbHVkZWAgb3IgYG5nLXRyYW5zY2x1ZGUtc2xvdGAgYXR0cmlidXRlLlxuICpcbiAqIElmIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50IGlzIG5vdCBlbXB0eSAoaS5lLiBjb250YWlucyBvbmUgb3IgbW9yZSBET00gbm9kZXMsIGluY2x1ZGluZyB3aGl0ZXNwYWNlIHRleHQgbm9kZXMpLCBhbnkgZXhpc3RpbmdcbiAqIGNvbnRlbnQgb2YgdGhpcyBlbGVtZW50IHdpbGwgYmUgcmVtb3ZlZCBiZWZvcmUgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgaW5zZXJ0ZWQuXG4gKiBJZiB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBpcyBlbXB0eSAob3Igb25seSB3aGl0ZXNwYWNlKSwgdGhlIGV4aXN0aW5nIGNvbnRlbnQgaXMgbGVmdCBpbnRhY3QuIFRoaXMgbGV0cyB5b3UgcHJvdmlkZSBmYWxsYmFja1xuICogY29udGVudCBpbiB0aGUgY2FzZSB0aGF0IG5vIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgcHJvdmlkZWQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nVHJhbnNjbHVkZXxuZ1RyYW5zY2x1ZGVTbG90IHRoZSBuYW1lIG9mIHRoZSBzbG90IHRvIGluc2VydCBhdCB0aGlzIHBvaW50LiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCwgaXMgZW1wdHlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBpdHMgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0aGVuIHRoZSBkZWZhdWx0IHNsb3QgaXMgdXNlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJhc2ljIHRyYW5zY2x1c2lvblxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyBiYXNpYyB0cmFuc2NsdXNpb24gb2YgY29udGVudCBpbnRvIGEgY29tcG9uZW50IGRpcmVjdGl2ZS5cbiAqIDxleGFtcGxlIG5hbWU9XCJzaW1wbGVUcmFuc2NsdWRlRXhhbXBsZVwiIG1vZHVsZT1cInRyYW5zY2x1ZGVFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCd0cmFuc2NsdWRlRXhhbXBsZScsIFtdKVxuICogICAgICAgIC5kaXJlY3RpdmUoJ3BhbmUnLCBmdW5jdGlvbigpe1xuICogICAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICogICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAqICAgICAgICAgICAgIHNjb3BlOiB7IHRpdGxlOidAJyB9LFxuICogICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IGdyYXlcIj57e3RpdGxlfX08L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICc8bmctdHJhbnNjbHVkZT48L25nLXRyYW5zY2x1ZGU+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcbiAqICAgICAgICAgICB9O1xuICogICAgICAgfSlcbiAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICRzY29wZS50aXRsZSA9ICdMb3JlbSBJcHN1bSc7XG4gKiAgICAgICAgICRzY29wZS50ZXh0ID0gJ05lcXVlIHBvcnJvIHF1aXNxdWFtIGVzdCBxdWkgZG9sb3JlbSBpcHN1bSBxdWlhIGRvbG9yLi4uJztcbiAqICAgICAgIH1dKTtcbiAqICAgICA8L3NjcmlwdD5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGlucHV0IG5nLW1vZGVsPVwidGl0bGVcIiBhcmlhLWxhYmVsPVwidGl0bGVcIj4gPGJyLz5cbiAqICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInRleHRcIiBhcmlhLWxhYmVsPVwidGV4dFwiPjwvdGV4dGFyZWE+IDxici8+XG4gKiAgICAgICA8cGFuZSB0aXRsZT1cInt7dGl0bGV9fVwiPjxzcGFuPnt7dGV4dH19PC9zcGFuPjwvcGFuZT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgIGl0KCdzaG91bGQgaGF2ZSB0cmFuc2NsdWRlZCcsIGZ1bmN0aW9uKCkge1xuICogICAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0aXRsZScpKTtcbiAqICAgICAgICB0aXRsZUVsZW1lbnQuY2xlYXIoKTtcbiAqICAgICAgICB0aXRsZUVsZW1lbnQuc2VuZEtleXMoJ1RJVExFJyk7XG4gKiAgICAgICAgdmFyIHRleHRFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGV4dCcpKTtcbiAqICAgICAgICB0ZXh0RWxlbWVudC5jbGVhcigpO1xuICogICAgICAgIHRleHRFbGVtZW50LnNlbmRLZXlzKCdURVhUJyk7XG4gKiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndGl0bGUnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdUSVRMRScpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3RleHQnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdURVhUJyk7XG4gKiAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBUcmFuc2NsdWRlIGZhbGxiYWNrIGNvbnRlbnRcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gdXNlIGBOZ1RyYW5zY2x1ZGVgIHdpdGggZmFsbGJhY2sgY29udGVudCwgdGhhdFxuICogaXMgZGlzcGxheWVkIGlmIG5vIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgcHJvdmlkZWQuXG4gKlxuICogPGV4YW1wbGUgbW9kdWxlPVwidHJhbnNjbHVkZUZhbGxiYWNrQ29udGVudEV4YW1wbGVcIiBuYW1lPVwibmctdHJhbnNjbHVkZVwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxzY3JpcHQ+XG4gKiBhbmd1bGFyLm1vZHVsZSgndHJhbnNjbHVkZUZhbGxiYWNrQ29udGVudEV4YW1wbGUnLCBbXSlcbiAqIC5kaXJlY3RpdmUoJ215QnV0dG9uJywgZnVuY3Rpb24oKXtcbiAqICAgICAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gKiAgICAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gKiAgICAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICogICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxidXR0b24gc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8bmctdHJhbnNjbHVkZT4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGIgc3R5bGU9XCJjb2xvcjogcmVkO1wiPkJ1dHRvbjE8L2I+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L25nLXRyYW5zY2x1ZGU+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAnPC9idXR0b24+J1xuICogICAgICAgICAgICAgfTtcbiAqICAgICAgICAgfSk7XG4gKiA8L3NjcmlwdD5cbiAqIDwhLS0gZmFsbGJhY2sgYnV0dG9uIGNvbnRlbnQgLS0+XG4gKiA8bXktYnV0dG9uIGlkPVwiZmFsbGJhY2tcIj48L215LWJ1dHRvbj5cbiAqIDwhLS0gbW9kaWZpZWQgYnV0dG9uIGNvbnRlbnQgLS0+XG4gKiA8bXktYnV0dG9uIGlkPVwibW9kaWZpZWRcIj5cbiAqICAgPGkgc3R5bGU9XCJjb2xvcjogZ3JlZW47XCI+QnV0dG9uMjwvaT5cbiAqIDwvbXktYnV0dG9uPlxuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogaXQoJ3Nob3VsZCBoYXZlIGRpZmZlcmVudCB0cmFuc2NsdWRlIGVsZW1lbnQgY29udGVudCcsIGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2ZhbGxiYWNrJykpLmdldFRleHQoKSkudG9CZSgnQnV0dG9uMScpO1xuICogICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ21vZGlmaWVkJykpLmdldFRleHQoKSkudG9CZSgnQnV0dG9uMicpO1xuICogICAgICAgIH0pO1xuICogPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgTXVsdGktc2xvdCB0cmFuc2NsdXNpb25cbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdXNpbmcgbXVsdGktc2xvdCB0cmFuc2NsdXNpb24gaW4gYSBjb21wb25lbnQgZGlyZWN0aXZlLlxuICogPGV4YW1wbGUgbmFtZT1cIm11bHRpU2xvdFRyYW5zY2x1ZGVFeGFtcGxlXCIgbW9kdWxlPVwibXVsdGlTbG90VHJhbnNjbHVkZUV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgIDxzdHlsZT5cbiAqICAgICAgLnRpdGxlLCAuZm9vdGVyIHtcbiAqICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBncmF5XG4gKiAgICAgIH1cbiAqICAgIDwvc3R5bGU+XG4gKiAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICA8aW5wdXQgbmctbW9kZWw9XCJ0aXRsZVwiIGFyaWEtbGFiZWw9XCJ0aXRsZVwiPiA8YnIvPlxuICogICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJ0ZXh0XCIgYXJpYS1sYWJlbD1cInRleHRcIj48L3RleHRhcmVhPiA8YnIvPlxuICogICAgICA8cGFuZT5cbiAqICAgICAgICA8cGFuZS10aXRsZT48YSBuZy1ocmVmPVwie3tsaW5rfX1cIj57e3RpdGxlfX08L2E+PC9wYW5lLXRpdGxlPlxuICogICAgICAgIDxwYW5lLWJvZHk+PHA+e3t0ZXh0fX08L3A+PC9wYW5lLWJvZHk+XG4gKiAgICAgIDwvcGFuZT5cbiAqICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgIGFuZ3VsYXIubW9kdWxlKCdtdWx0aVNsb3RUcmFuc2NsdWRlRXhhbXBsZScsIFtdKVxuICogICAgIC5kaXJlY3RpdmUoJ3BhbmUnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAqICAgICAgICAgIHRyYW5zY2x1ZGU6IHtcbiAqICAgICAgICAgICAgJ3RpdGxlJzogJz9wYW5lVGl0bGUnLFxuICogICAgICAgICAgICAnYm9keSc6ICdwYW5lQm9keScsXG4gKiAgICAgICAgICAgICdmb290ZXInOiAnP3BhbmVGb290ZXInXG4gKiAgICAgICAgICB9LFxuICogICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRpdGxlXCIgbmctdHJhbnNjbHVkZT1cInRpdGxlXCI+RmFsbGJhY2sgVGl0bGU8L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IG5nLXRyYW5zY2x1ZGU9XCJib2R5XCI+PC9kaXY+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3RlclwiIG5nLXRyYW5zY2x1ZGU9XCJmb290ZXJcIj5GYWxsYmFjayBGb290ZXI8L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAnPC9kaXY+J1xuICogICAgICAgIH07XG4gKiAgICB9KVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLnRpdGxlID0gJ0xvcmVtIElwc3VtJztcbiAqICAgICAgJHNjb3BlLmxpbmsgPSAnaHR0cHM6Ly9nb29nbGUuY29tJztcbiAqICAgICAgJHNjb3BlLnRleHQgPSAnTmVxdWUgcG9ycm8gcXVpc3F1YW0gZXN0IHF1aSBkb2xvcmVtIGlwc3VtIHF1aWEgZG9sb3IuLi4nO1xuICogICAgfV0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICAgaXQoJ3Nob3VsZCBoYXZlIHRyYW5zY2x1ZGVkIHRoZSB0aXRsZSBhbmQgdGhlIGJvZHknLCBmdW5jdGlvbigpIHtcbiAqICAgICAgICB2YXIgdGl0bGVFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGl0bGUnKSk7XG4gKiAgICAgICAgdGl0bGVFbGVtZW50LmNsZWFyKCk7XG4gKiAgICAgICAgdGl0bGVFbGVtZW50LnNlbmRLZXlzKCdUSVRMRScpO1xuICogICAgICAgIHZhciB0ZXh0RWxlbWVudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSk7XG4gKiAgICAgICAgdGV4dEVsZW1lbnQuY2xlYXIoKTtcbiAqICAgICAgICB0ZXh0RWxlbWVudC5zZW5kS2V5cygnVEVYVCcpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLnRpdGxlJykpLmdldFRleHQoKSkudG9FcXVhbCgnVElUTEUnKTtcbiAqICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd0ZXh0JykpLmdldFRleHQoKSkudG9FcXVhbCgnVEVYVCcpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmZvb3RlcicpKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ0ZhbGxiYWNrIEZvb3RlcicpO1xuICogICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgbmdUcmFuc2NsdWRlTWluRXJyID0gbWluRXJyKCduZ1RyYW5zY2x1ZGUnKTtcbnZhciBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSBbJyRjb21waWxlJywgZnVuY3Rpb24oJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBQycsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdUcmFuc2NsdWRlQ29tcGlsZSh0RWxlbWVudCkge1xuXG4gICAgICAvLyBSZW1vdmUgYW5kIGNhY2hlIGFueSBvcmlnaW5hbCBjb250ZW50IHRvIGFjdCBhcyBhIGZhbGxiYWNrXG4gICAgICB2YXIgZmFsbGJhY2tMaW5rRm4gPSAkY29tcGlsZSh0RWxlbWVudC5jb250ZW50cygpKTtcbiAgICAgIHRFbGVtZW50LmVtcHR5KCk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1RyYW5zY2x1ZGVQb3N0TGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIGNvbnRyb2xsZXIsICR0cmFuc2NsdWRlKSB7XG5cbiAgICAgICAgaWYgKCEkdHJhbnNjbHVkZSkge1xuICAgICAgICAgIHRocm93IG5nVHJhbnNjbHVkZU1pbkVycignb3JwaGFuJyxcbiAgICAgICAgICAnSWxsZWdhbCB1c2Ugb2YgbmdUcmFuc2NsdWRlIGRpcmVjdGl2ZSBpbiB0aGUgdGVtcGxhdGUhICcgK1xuICAgICAgICAgICdObyBwYXJlbnQgZGlyZWN0aXZlIHRoYXQgcmVxdWlyZXMgYSB0cmFuc2NsdXNpb24gZm91bmQuICcgK1xuICAgICAgICAgICdFbGVtZW50OiB7MH0nLFxuICAgICAgICAgIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgaXMgb2YgdGhlIGZvcm06IGBuZy10cmFuc2NsdWRlPVwibmctdHJhbnNjbHVkZVwiYCB0aGVuIHRyZWF0IGl0IGxpa2UgdGhlIGRlZmF1bHRcbiAgICAgICAgaWYgKCRhdHRycy5uZ1RyYW5zY2x1ZGUgPT09ICRhdHRycy4kYXR0ci5uZ1RyYW5zY2x1ZGUpIHtcbiAgICAgICAgICAkYXR0cnMubmdUcmFuc2NsdWRlID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNsb3ROYW1lID0gJGF0dHJzLm5nVHJhbnNjbHVkZSB8fCAkYXR0cnMubmdUcmFuc2NsdWRlU2xvdDtcblxuICAgICAgICAvLyBJZiB0aGUgc2xvdCBpcyByZXF1aXJlZCBhbmQgbm8gdHJhbnNjbHVzaW9uIGNvbnRlbnQgaXMgcHJvdmlkZWQgdGhlbiB0aGlzIGNhbGwgd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgICAgICAkdHJhbnNjbHVkZShuZ1RyYW5zY2x1ZGVDbG9uZUF0dGFjaEZuLCBudWxsLCBzbG90TmFtZSk7XG5cbiAgICAgICAgLy8gSWYgdGhlIHNsb3QgaXMgb3B0aW9uYWwgYW5kIG5vIHRyYW5zY2x1c2lvbiBjb250ZW50IGlzIHByb3ZpZGVkIHRoZW4gdXNlIHRoZSBmYWxsYmFjayBjb250ZW50XG4gICAgICAgIGlmIChzbG90TmFtZSAmJiAhJHRyYW5zY2x1ZGUuaXNTbG90RmlsbGVkKHNsb3ROYW1lKSkge1xuICAgICAgICAgIHVzZUZhbGxiYWNrQ29udGVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbmdUcmFuc2NsdWRlQ2xvbmVBdHRhY2hGbihjbG9uZSwgdHJhbnNjbHVkZWRTY29wZSkge1xuICAgICAgICAgIGlmIChjbG9uZS5sZW5ndGggJiYgbm90V2hpdGVzcGFjZShjbG9uZSkpIHtcbiAgICAgICAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVzZUZhbGxiYWNrQ29udGVudCgpO1xuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm90aGluZyBsaW5rZWQgYWdhaW5zdCB0aGUgdHJhbnNjbHVkZWQgc2NvcGUgc2luY2Ugbm8gY29udGVudCB3YXMgYXZhaWxhYmxlLFxuICAgICAgICAgICAgLy8gc28gaXQgc2hvdWxkIGJlIHNhZmUgdG8gY2xlYW4gdXAgdGhlIGdlbmVyYXRlZCBzY29wZS5cbiAgICAgICAgICAgIHRyYW5zY2x1ZGVkU2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1c2VGYWxsYmFja0NvbnRlbnQoKSB7XG4gICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyB0aGUgZmFsbGJhY2sgY29udGVudCByYXRoZXIgdGhhbiB0aGUgdHJhbnNjbHVkZWQgY29udGVudCxcbiAgICAgICAgICAvLyB3ZSBsaW5rIGFnYWluc3QgdGhlIHNjb3BlIG9mIHRoaXMgZGlyZWN0aXZlIHJhdGhlciB0aGFuIHRoZSB0cmFuc2NsdWRlZCBzY29wZVxuICAgICAgICAgIGZhbGxiYWNrTGlua0ZuKCRzY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBub3RXaGl0ZXNwYWNlKG5vZGVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbm9kZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfVEVYVCB8fCBub2RlLm5vZGVWYWx1ZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHNjcmlwdFxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIExvYWQgdGhlIGNvbnRlbnQgb2YgYSBgPHNjcmlwdD5gIGVsZW1lbnQgaW50byB7QGxpbmsgbmcuJHRlbXBsYXRlQ2FjaGUgYCR0ZW1wbGF0ZUNhY2hlYH0sIHNvIHRoYXQgdGhlXG4gKiB0ZW1wbGF0ZSBjYW4gYmUgdXNlZCBieSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmdJbmNsdWRlYH0sXG4gKiB7QGxpbmsgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3IGBuZ1ZpZXdgfSwgb3Ige0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS4gVGhlIHR5cGUgb2YgdGhlXG4gKiBgPHNjcmlwdD5gIGVsZW1lbnQgbXVzdCBiZSBzcGVjaWZpZWQgYXMgYHRleHQvbmctdGVtcGxhdGVgLCBhbmQgYSBjYWNoZSBuYW1lIGZvciB0aGUgdGVtcGxhdGUgbXVzdCBiZVxuICogYXNzaWduZWQgdGhyb3VnaCB0aGUgZWxlbWVudCdzIGBpZGAsIHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgYXMgYSBkaXJlY3RpdmUncyBgdGVtcGxhdGVVcmxgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIE11c3QgYmUgc2V0IHRvIGAndGV4dC9uZy10ZW1wbGF0ZSdgLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENhY2hlIG5hbWUgb2YgdGhlIHRlbXBsYXRlLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlICBuYW1lPVwic2NyaXB0LXRhZ1wiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L25nLXRlbXBsYXRlXCIgaWQ9XCIvdHBsLmh0bWxcIj5cbiAgICAgICAgQ29udGVudCBvZiB0aGUgdGVtcGxhdGUuXG4gICAgICA8L3NjcmlwdD5cblxuICAgICAgPGEgbmctY2xpY2s9XCJjdXJyZW50VHBsPScvdHBsLmh0bWwnXCIgaWQ9XCJ0cGwtbGlua1wiPkxvYWQgaW5saW5lZCB0ZW1wbGF0ZTwvYT5cbiAgICAgIDxkaXYgaWQ9XCJ0cGwtY29udGVudFwiIG5nLWluY2x1ZGUgc3JjPVwiY3VycmVudFRwbFwiPjwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUgZGVmaW5lZCBpbnNpZGUgc2NyaXB0IHRhZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3RwbC1saW5rJykpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI3RwbC1jb250ZW50JykpLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0aGUgdGVtcGxhdGUvKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG52YXIgc2NyaXB0RGlyZWN0aXZlID0gWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XG4gICAgICBpZiAoYXR0ci50eXBlID09PSAndGV4dC9uZy10ZW1wbGF0ZScpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlVXJsID0gYXR0ci5pZCxcbiAgICAgICAgICAgIHRleHQgPSBlbGVtZW50WzBdLnRleHQ7XG5cbiAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlVXJsLCB0ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxuLyogZXhwb3J0ZWQgc2VsZWN0RGlyZWN0aXZlLCBvcHRpb25EaXJlY3RpdmUgKi9cblxudmFyIG5vb3BOZ01vZGVsQ29udHJvbGxlciA9IHsgJHNldFZpZXdWYWx1ZTogbm9vcCwgJHJlbmRlcjogbm9vcCB9O1xuXG5mdW5jdGlvbiBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhvcHRpb25FbCwgdmFsdWUpIHtcbiAgb3B0aW9uRWwucHJvcCgnc2VsZWN0ZWQnLCB2YWx1ZSk7XG4gIC8qKlxuICAgKiBXaGVuIHVuc2VsZWN0aW5nIGFuIG9wdGlvbiwgc2V0dGluZyB0aGUgcHJvcGVydHkgdG8gbnVsbCAvIGZhbHNlIHNob3VsZCBiZSBlbm91Z2hcbiAgICogSG93ZXZlciwgc2NyZWVucmVhZGVycyBtaWdodCByZWFjdCB0byB0aGUgc2VsZWN0ZWQgYXR0cmlidXRlIGluc3RlYWQsIHNlZVxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNDQxOVxuICAgKiBOb3RlOiBcInNlbGVjdGVkXCIgaXMgYSBib29sZWFuIGF0dHIgYW5kIHdpbGwgYmUgcmVtb3ZlZCB3aGVuIHRoZSBcInZhbHVlXCIgYXJnIGluIGF0dHIoKSBpcyBmYWxzZVxuICAgKiBvciBudWxsXG4gICAqL1xuICBvcHRpb25FbC5hdHRyKCdzZWxlY3RlZCcsIHZhbHVlKTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgY29udHJvbGxlciBmb3IgdGhlIHtAbGluayBuZy5zZWxlY3Qgc2VsZWN0fSBkaXJlY3RpdmUuIFRoZSBjb250cm9sbGVyIGV4cG9zZXNcbiAqIGEgZmV3IHV0aWxpdHkgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIHRvIGF1Z21lbnQgdGhlIGJlaGF2aW9yIG9mIGEgcmVndWxhciBvciBhblxuICoge0BsaW5rIG5nLm5nT3B0aW9ucyBuZ09wdGlvbnN9IHNlbGVjdCBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgU2V0IGEgY3VzdG9tIGVycm9yIHdoZW4gdGhlIHVua25vd24gb3B0aW9uIGlzIHNlbGVjdGVkXG4gKlxuICogVGhpcyBleGFtcGxlIHNldHMgYSBjdXN0b20gZXJyb3IgXCJ1bmtub3duVmFsdWVcIiBvbiB0aGUgbmdNb2RlbENvbnRyb2xsZXJcbiAqIHdoZW4gdGhlIHNlbGVjdCBlbGVtZW50J3MgdW5rbm93biBvcHRpb24gaXMgc2VsZWN0ZWQsIGkuZS4gd2hlbiB0aGUgbW9kZWwgaXMgc2V0IHRvIGEgdmFsdWVcbiAqIHRoYXQgaXMgbm90IG1hdGNoZWQgYnkgYW55IG9wdGlvbi5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXVua25vd24tdmFsdWUtZXJyb3JcIiBtb2R1bGU9XCJzdGF0aWNTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cInRlc3RTZWxlY3RcIj4gU2luZ2xlIHNlbGVjdDogPC9sYWJlbD48YnI+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwidGVzdFNlbGVjdFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRcIiB1bmtub3duLXZhbHVlLWVycm9yPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+PGJyPlxuICogICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1pZj1cIm15Rm9ybS50ZXN0U2VsZWN0LiRlcnJvci51bmtub3duVmFsdWVcIj5cbiAqICAgICAgIEVycm9yOiBUaGUgY3VycmVudCBtb2RlbCBkb2Vzbid0IG1hdGNoIGFueSBvcHRpb248L3NwYW4+PGJyPlxuICpcbiAqICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZm9yY2VVbmtub3duT3B0aW9uKClcIj5Gb3JjZSB1bmtub3duIG9wdGlvbjwvYnV0dG9uPjxicj5cbiAqICAgPC9mb3JtPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ3N0YXRpY1NlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLnNlbGVjdGVkID0gbnVsbDtcbiAqXG4gKiAgICAgICRzY29wZS5mb3JjZVVua25vd25PcHRpb24gPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAkc2NvcGUuc2VsZWN0ZWQgPSAnbm9uc2Vuc2UnO1xuICogICAgICB9O1xuICogICB9XSlcbiAqICAgLmRpcmVjdGl2ZSgndW5rbm93blZhbHVlRXJyb3InLCBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ3NlbGVjdCddLFxuICogICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICogICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAqICAgICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1sxXTtcbiAqXG4gKiAgICAgICAgIG5nTW9kZWxDdHJsLiR2YWxpZGF0b3JzLnVua25vd25WYWx1ZSA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICogICAgICAgICAgIGlmIChzZWxlY3RDdHJsLiRpc1Vua25vd25PcHRpb25TZWxlY3RlZCgpKSB7XG4gKiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gKiAgICAgICAgICAgfVxuICpcbiAqICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAqICAgICAgICAgfTtcbiAqICAgICAgIH1cbiAqXG4gKiAgICAgfTtcbiAqICAgfSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTZXQgdGhlIFwicmVxdWlyZWRcIiBlcnJvciB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGUgXCJyZXF1aXJlZFwiIGVycm9yIG9uIHRoZSBuZ01vZGVsQ29udHJvbGxlciBpcyBvbmx5IHNldCBvbiBhIHJlcXVpcmVkIHNlbGVjdFxuICogd2hlbiB0aGUgZW1wdHkgb3B0aW9uIGlzIHNlbGVjdGVkLiBUaGlzIGV4YW1wbGUgYWRkcyBhIGN1c3RvbSBkaXJlY3RpdmUgdGhhdCBhbHNvIHNldHMgdGhlXG4gKiBlcnJvciB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXVua25vd24tdmFsdWUtcmVxdWlyZWRcIiBtb2R1bGU9XCJzdGF0aWNTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cInRlc3RTZWxlY3RcIj4gU2VsZWN0OiA8L2xhYmVsPjxicj5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJ0ZXN0U2VsZWN0XCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiIHJlcXVpcmVkIHVua25vd24tdmFsdWUtcmVxdWlyZWQ+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTFcIj5PcHRpb24gMTwvb3B0aW9uPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0yXCI+T3B0aW9uIDI8L29wdGlvbj5cbiAqICAgICA8L3NlbGVjdD48YnI+XG4gKiAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLWlmPVwibXlGb3JtLnRlc3RTZWxlY3QuJGVycm9yLnJlcXVpcmVkXCI+RXJyb3I6IFBsZWFzZSBzZWxlY3QgYSB2YWx1ZTwvc3Bhbj48YnI+XG4gKlxuICogICAgIDxidXR0b24gbmctY2xpY2s9XCJmb3JjZVVua25vd25PcHRpb24oKVwiPkZvcmNlIHVua25vd24gb3B0aW9uPC9idXR0b24+PGJyPlxuICogICA8L2Zvcm0+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnc3RhdGljU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuc2VsZWN0ZWQgPSBudWxsO1xuICpcbiAqICAgICAgJHNjb3BlLmZvcmNlVW5rbm93bk9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICRzY29wZS5zZWxlY3RlZCA9ICdub25zZW5zZSc7XG4gKiAgICAgIH07XG4gKiAgIH1dKVxuICogICAuZGlyZWN0aXZlKCd1bmtub3duVmFsdWVSZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiB7XG4gKiAgICAgICBwcmlvcml0eTogMSwgLy8gVGhpcyBkaXJlY3RpdmUgbXVzdCBydW4gYWZ0ZXIgdGhlIHJlcXVpcmVkIGRpcmVjdGl2ZSBoYXMgYWRkZWQgaXRzIHZhbGlkYXRvclxuICogICAgICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ3NlbGVjdCddLFxuICogICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICogICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAqICAgICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1sxXTtcbiAqXG4gKiAgICAgICAgIHZhciBvcmlnaW5hbFJlcXVpcmVkVmFsaWRhdG9yID0gbmdNb2RlbEN0cmwuJHZhbGlkYXRvcnMucmVxdWlyZWQ7XG4gKlxuICogICAgICAgICBuZ01vZGVsQ3RybC4kdmFsaWRhdG9ycy5yZXF1aXJlZCA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgIGlmIChhdHRycy5yZXF1aXJlZCAmJiBzZWxlY3RDdHJsLiRpc1Vua25vd25PcHRpb25TZWxlY3RlZCgpKSB7XG4gKiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gKiAgICAgICAgICAgfVxuICpcbiAqICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxSZXF1aXJlZFZhbGlkYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICogICAgICAgICB9O1xuICogICAgICAgfVxuICogICAgIH07XG4gKiAgIH0pO1xuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogIGl0KCdzaG91bGQgc2hvdyB0aGUgZXJyb3IgbWVzc2FnZSB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICB2YXIgZXJyb3IgPSBlbGVtZW50KGJ5LmNsYXNzTmFtZSgnZXJyb3InKSk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5nZXRUZXh0KCkpLnRvQmUoJ0Vycm9yOiBQbGVhc2Ugc2VsZWN0IGEgdmFsdWUnKTtcblxuICAgICAgZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dCgnb3B0aW9uJywgJ09wdGlvbiAxJykpLmNsaWNrKCk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5pc1ByZXNlbnQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIGVsZW1lbnQoYnkudGFnTmFtZSgnYnV0dG9uJykpLmNsaWNrKCk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5nZXRUZXh0KCkpLnRvQmUoJ0Vycm9yOiBQbGVhc2Ugc2VsZWN0IGEgdmFsdWUnKTtcbiAgICB9KTtcbiAqIDwvZmlsZT5cbiAqPC9leGFtcGxlPlxuICpcbiAqXG4gKi9cbnZhciBTZWxlY3RDb250cm9sbGVyID1cbiAgICAgICAgWyckZWxlbWVudCcsICckc2NvcGUnLCAvKiogQHRoaXMgKi8gZnVuY3Rpb24oJGVsZW1lbnQsICRzY29wZSkge1xuXG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIG9wdGlvbnNNYXAgPSBuZXcgTmdNYXAoKTtcblxuICBzZWxmLnNlbGVjdFZhbHVlTWFwID0ge307IC8vIEtleXMgYXJlIHRoZSBoYXNoZWQgdmFsdWVzLCB2YWx1ZXMgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXG4gIC8vIElmIHRoZSBuZ01vZGVsIGRvZXNuJ3QgZ2V0IHByb3ZpZGVkIHRoZW4gcHJvdmlkZSBhIGR1bW15IG5vb3AgdmVyc2lvbiB0byBwcmV2ZW50IGVycm9yc1xuICBzZWxmLm5nTW9kZWxDdHJsID0gbm9vcE5nTW9kZWxDb250cm9sbGVyO1xuICBzZWxmLm11bHRpcGxlID0gZmFsc2U7XG5cbiAgLy8gVGhlIFwidW5rbm93blwiIG9wdGlvbiBpcyBvbmUgdGhhdCBpcyBwcmVwZW5kZWQgdG8gdGhlIGxpc3QgaWYgdGhlIHZpZXdWYWx1ZVxuICAvLyBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgdGhlIG9wdGlvbnMuIFdoZW4gaXQgaXMgcmVuZGVyZWQgdGhlIHZhbHVlIG9mIHRoZSB1bmtub3duXG4gIC8vIG9wdGlvbiBpcyAnPyBYWFggPycgd2hlcmUgWFhYIGlzIHRoZSBoYXNoS2V5IG9mIHRoZSB2YWx1ZSB0aGF0IGlzIG5vdCBrbm93bi5cbiAgLy9cbiAgLy8gU3VwcG9ydDogSUUgOSBvbmx5XG4gIC8vIFdlIGNhbid0IGp1c3QganFMaXRlKCc8b3B0aW9uPicpIHNpbmNlIGpxTGl0ZSBpcyBub3Qgc21hcnQgZW5vdWdoXG4gIC8vIHRvIGNyZWF0ZSBpdCBpbiA8c2VsZWN0PiBhbmQgSUUgYmFyZnMgb3RoZXJ3aXNlLlxuICBzZWxmLnVua25vd25PcHRpb24gPSBqcUxpdGUod2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKTtcblxuICAvLyBUaGUgZW1wdHkgb3B0aW9uIGlzIGFuIG9wdGlvbiB3aXRoIHRoZSB2YWx1ZSAnJyB0aGF0IHRoZSBhcHBsaWNhdGlvbiBkZXZlbG9wZXIgY2FuXG4gIC8vIHByb3ZpZGUgaW5zaWRlIHRoZSBzZWxlY3QuIEl0IGlzIGFsd2F5cyBzZWxlY3RhYmxlIGFuZCBpbmRpY2F0ZXMgdGhhdCBhIFwibnVsbFwiIHNlbGVjdGlvbiBoYXNcbiAgLy8gYmVlbiBtYWRlIGJ5IHRoZSB1c2VyLlxuICAvLyBJZiB0aGUgc2VsZWN0IGhhcyBhbiBlbXB0eSBvcHRpb24sIGFuZCB0aGUgbW9kZWwgb2YgdGhlIHNlbGVjdCBpcyBzZXQgdG8gXCJ1bmRlZmluZWRcIiBvciBcIm51bGxcIixcbiAgLy8gdGhlIGVtcHR5IG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAgLy8gSWYgdGhlIG1vZGVsIGlzIHNldCB0byBhIGRpZmZlcmVudCB1bm1hdGNoZWQgdmFsdWUsIHRoZSB1bmtub3duIG9wdGlvbiBpcyByZW5kZXJlZCBhbmRcbiAgLy8gc2VsZWN0ZWQsIGkuZSBib3RoIGFyZSBwcmVzZW50LCBiZWNhdXNlIGEgXCJudWxsXCIgc2VsZWN0aW9uIGFuZCBhbiB1bmtub3duIHZhbHVlIGFyZSBkaWZmZXJlbnQuXG4gIHNlbGYuaGFzRW1wdHlPcHRpb24gPSBmYWxzZTtcbiAgc2VsZi5lbXB0eU9wdGlvbiA9IHVuZGVmaW5lZDtcblxuICBzZWxmLnJlbmRlclVua25vd25PcHRpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgdW5rbm93blZhbCA9IHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUodmFsKTtcbiAgICBzZWxmLnVua25vd25PcHRpb24udmFsKHVua25vd25WYWwpO1xuICAgICRlbGVtZW50LnByZXBlbmQoc2VsZi51bmtub3duT3B0aW9uKTtcbiAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhzZWxmLnVua25vd25PcHRpb24sIHRydWUpO1xuICAgICRlbGVtZW50LnZhbCh1bmtub3duVmFsKTtcbiAgfTtcblxuICBzZWxmLnVwZGF0ZVVua25vd25PcHRpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgdW5rbm93blZhbCA9IHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUodmFsKTtcbiAgICBzZWxmLnVua25vd25PcHRpb24udmFsKHVua25vd25WYWwpO1xuICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKHNlbGYudW5rbm93bk9wdGlvbiwgdHJ1ZSk7XG4gICAgJGVsZW1lbnQudmFsKHVua25vd25WYWwpO1xuICB9O1xuXG4gIHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICByZXR1cm4gJz8gJyArIGhhc2hLZXkodmFsKSArICcgPyc7XG4gIH07XG5cbiAgc2VsZi5yZW1vdmVVbmtub3duT3B0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNlbGYudW5rbm93bk9wdGlvbi5wYXJlbnQoKSkgc2VsZi51bmtub3duT3B0aW9uLnJlbW92ZSgpO1xuICB9O1xuXG4gIHNlbGYuc2VsZWN0RW1wdHlPcHRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2VsZi5lbXB0eU9wdGlvbikge1xuICAgICAgJGVsZW1lbnQudmFsKCcnKTtcbiAgICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKHNlbGYuZW1wdHlPcHRpb24sIHRydWUpO1xuICAgIH1cbiAgfTtcblxuICBzZWxmLnVuc2VsZWN0RW1wdHlPcHRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2VsZi5oYXNFbXB0eU9wdGlvbikge1xuICAgICAgc2V0T3B0aW9uU2VsZWN0ZWRTdGF0dXMoc2VsZi5lbXB0eU9wdGlvbiwgZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgIC8vIGRpc2FibGUgdW5rbm93biBvcHRpb24gc28gdGhhdCB3ZSBkb24ndCBkbyB3b3JrIHdoZW4gdGhlIHdob2xlIHNlbGVjdCBpcyBiZWluZyBkZXN0cm95ZWRcbiAgICBzZWxmLnJlbmRlclVua25vd25PcHRpb24gPSBub29wO1xuICB9KTtcblxuICAvLyBSZWFkIHRoZSB2YWx1ZSBvZiB0aGUgc2VsZWN0IGNvbnRyb2wsIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGNoYW5nZXMgZGVwZW5kaW5nXG4gIC8vIHVwb24gd2hldGhlciB0aGUgc2VsZWN0IGNhbiBoYXZlIG11bHRpcGxlIHZhbHVlcyBhbmQgd2hldGhlciBuZ09wdGlvbnMgaXMgYXQgd29yay5cbiAgc2VsZi5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkU2luZ2xlVmFsdWUoKSB7XG4gICAgdmFyIHZhbCA9ICRlbGVtZW50LnZhbCgpO1xuICAgIC8vIG5nVmFsdWUgYWRkZWQgb3B0aW9uIHZhbHVlcyBhcmUgc3RvcmVkIGluIHRoZSBzZWxlY3RWYWx1ZU1hcCwgbm9ybWFsIGludGVycG9sYXRpb25zIGFyZSBub3RcbiAgICB2YXIgcmVhbFZhbCA9IHZhbCBpbiBzZWxmLnNlbGVjdFZhbHVlTWFwID8gc2VsZi5zZWxlY3RWYWx1ZU1hcFt2YWxdIDogdmFsO1xuXG4gICAgaWYgKHNlbGYuaGFzT3B0aW9uKHJlYWxWYWwpKSB7XG4gICAgICByZXR1cm4gcmVhbFZhbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuXG4gIC8vIFdyaXRlIHRoZSB2YWx1ZSB0byB0aGUgc2VsZWN0IGNvbnRyb2wsIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGNoYW5nZXMgZGVwZW5kaW5nXG4gIC8vIHVwb24gd2hldGhlciB0aGUgc2VsZWN0IGNhbiBoYXZlIG11bHRpcGxlIHZhbHVlcyBhbmQgd2hldGhlciBuZ09wdGlvbnMgaXMgYXQgd29yay5cbiAgc2VsZi53cml0ZVZhbHVlID0gZnVuY3Rpb24gd3JpdGVTaW5nbGVWYWx1ZSh2YWx1ZSkge1xuICAgIC8vIE1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIHNlbGVjdGVkIGF0dHJpYnV0ZSBmcm9tIHRoZSBwcmV2aW91c2x5IHNlbGVjdGVkIG9wdGlvblxuICAgIC8vIE90aGVyd2lzZSwgc2NyZWVuIHJlYWRlcnMgbWlnaHQgZ2V0IGNvbmZ1c2VkXG4gICAgdmFyIGN1cnJlbnRseVNlbGVjdGVkT3B0aW9uID0gJGVsZW1lbnRbMF0ub3B0aW9uc1skZWxlbWVudFswXS5zZWxlY3RlZEluZGV4XTtcbiAgICBpZiAoY3VycmVudGx5U2VsZWN0ZWRPcHRpb24pIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKGpxTGl0ZShjdXJyZW50bHlTZWxlY3RlZE9wdGlvbiksIGZhbHNlKTtcblxuICAgIGlmIChzZWxmLmhhc09wdGlvbih2YWx1ZSkpIHtcbiAgICAgIHNlbGYucmVtb3ZlVW5rbm93bk9wdGlvbigpO1xuXG4gICAgICB2YXIgaGFzaGVkVmFsID0gaGFzaEtleSh2YWx1ZSk7XG4gICAgICAkZWxlbWVudC52YWwoaGFzaGVkVmFsIGluIHNlbGYuc2VsZWN0VmFsdWVNYXAgPyBoYXNoZWRWYWwgOiB2YWx1ZSk7XG5cbiAgICAgIC8vIFNldCBzZWxlY3RlZCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IG9uIHNlbGVjdGVkIG9wdGlvbiBmb3Igc2NyZWVuIHJlYWRlcnNcbiAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9ICRlbGVtZW50WzBdLm9wdGlvbnNbJGVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleF07XG4gICAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhqcUxpdGUoc2VsZWN0ZWRPcHRpb24pLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5zZWxlY3RVbmtub3duT3JFbXB0eU9wdGlvbih2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG5cbiAgLy8gVGVsbCB0aGUgc2VsZWN0IGNvbnRyb2wgdGhhdCBhbiBvcHRpb24sIHdpdGggdGhlIGdpdmVuIHZhbHVlLCBoYXMgYmVlbiBhZGRlZFxuICBzZWxmLmFkZE9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgLy8gU2tpcCBjb21tZW50IG5vZGVzLCBhcyB0aGV5IG9ubHkgcG9sbHV0ZSB0aGUgYG9wdGlvbnNNYXBgXG4gICAgaWYgKGVsZW1lbnRbMF0ubm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UKSByZXR1cm47XG5cbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgJ1wib3B0aW9uIHZhbHVlXCInKTtcbiAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICBzZWxmLmhhc0VtcHR5T3B0aW9uID0gdHJ1ZTtcbiAgICAgIHNlbGYuZW1wdHlPcHRpb24gPSBlbGVtZW50O1xuICAgIH1cbiAgICB2YXIgY291bnQgPSBvcHRpb25zTWFwLmdldCh2YWx1ZSkgfHwgMDtcbiAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgY291bnQgKyAxKTtcbiAgICAvLyBPbmx5IHJlbmRlciBhdCB0aGUgZW5kIG9mIGEgZGlnZXN0LiBUaGlzIGltcHJvdmVzIHJlbmRlciBwZXJmb3JtYW5jZSB3aGVuIG1hbnkgb3B0aW9uc1xuICAgIC8vIGFyZSBhZGRlZCBkdXJpbmcgYSBkaWdlc3QgYW5kIGVuc3VyZXMgYWxsIHJlbGV2YW50IG9wdGlvbnMgYXJlIGNvcnJlY3RseSBtYXJrZWQgYXMgc2VsZWN0ZWRcbiAgICBzY2hlZHVsZVJlbmRlcigpO1xuICB9O1xuXG4gIC8vIFRlbGwgdGhlIHNlbGVjdCBjb250cm9sIHRoYXQgYW4gb3B0aW9uLCB3aXRoIHRoZSBnaXZlbiB2YWx1ZSwgaGFzIGJlZW4gcmVtb3ZlZFxuICBzZWxmLnJlbW92ZU9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGNvdW50ID0gb3B0aW9uc01hcC5nZXQodmFsdWUpO1xuICAgIGlmIChjb3VudCkge1xuICAgICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICAgIG9wdGlvbnNNYXAuZGVsZXRlKHZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgIHNlbGYuaGFzRW1wdHlPcHRpb24gPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLmVtcHR5T3B0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgY291bnQgLSAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQ2hlY2sgd2hldGhlciB0aGUgc2VsZWN0IGNvbnRyb2wgaGFzIGFuIG9wdGlvbiBtYXRjaGluZyB0aGUgZ2l2ZW4gdmFsdWVcbiAgc2VsZi5oYXNPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiAhIW9wdGlvbnNNYXAuZ2V0KHZhbHVlKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBzZWxlY3QuU2VsZWN0Q29udHJvbGxlciMkaGFzRW1wdHlPcHRpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzZWxlY3QgZWxlbWVudCBjdXJyZW50bHkgaGFzIGFuIGVtcHR5IG9wdGlvblxuICAgKiBlbGVtZW50LCBpLmUuIGFuIG9wdGlvbiB0aGF0IHNpZ25pZmllcyB0aGF0IHRoZSBzZWxlY3QgaXMgZW1wdHkgLyB0aGUgc2VsZWN0aW9uIGlzIG51bGwuXG4gICAqXG4gICAqL1xuICBzZWxmLiRoYXNFbXB0eU9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmhhc0VtcHR5T3B0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyIyRpc1Vua25vd25PcHRpb25TZWxlY3RlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNlbGVjdCBlbGVtZW50J3MgdW5rbm93biBvcHRpb24gaXMgc2VsZWN0ZWQuIFRoZSB1bmtub3duIG9wdGlvbiBpcyBhZGRlZFxuICAgKiBhbmQgYXV0b21hdGljYWxseSBzZWxlY3RlZCB3aGVuZXZlciB0aGUgc2VsZWN0IG1vZGVsIGRvZXNuJ3QgbWF0Y2ggYW55IG9wdGlvbi5cbiAgICpcbiAgICovXG4gIHNlbGYuJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gUHJlc2VuY2Ugb2YgdGhlIHVua25vd24gb3B0aW9uIG1lYW5zIGl0IGlzIHNlbGVjdGVkXG4gICAgcmV0dXJuICRlbGVtZW50WzBdLm9wdGlvbnNbMF0gPT09IHNlbGYudW5rbm93bk9wdGlvblswXTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBzZWxlY3QuU2VsZWN0Q29udHJvbGxlciMkaXNFbXB0eU9wdGlvblNlbGVjdGVkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2VsZWN0IGVsZW1lbnQgaGFzIGFuIGVtcHR5IG9wdGlvbiBhbmQgdGhpcyBlbXB0eSBvcHRpb24gaXMgY3VycmVudGx5XG4gICAqIHNlbGVjdGVkLiBSZXR1cm5zIGBmYWxzZWAgaWYgdGhlIHNlbGVjdCBlbGVtZW50IGhhcyBubyBlbXB0eSBvcHRpb24gb3IgaXQgaXMgbm90IHNlbGVjdGVkLlxuICAgKlxuICAgKi9cbiAgc2VsZi4kaXNFbXB0eU9wdGlvblNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuaGFzRW1wdHlPcHRpb24gJiYgJGVsZW1lbnRbMF0ub3B0aW9uc1skZWxlbWVudFswXS5zZWxlY3RlZEluZGV4XSA9PT0gc2VsZi5lbXB0eU9wdGlvblswXTtcbiAgfTtcblxuICBzZWxmLnNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiBzZWxmLmVtcHR5T3B0aW9uKSB7XG4gICAgICBzZWxmLnJlbW92ZVVua25vd25PcHRpb24oKTtcbiAgICAgIHNlbGYuc2VsZWN0RW1wdHlPcHRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHNlbGYudW5rbm93bk9wdGlvbi5wYXJlbnQoKS5sZW5ndGgpIHtcbiAgICAgIHNlbGYudXBkYXRlVW5rbm93bk9wdGlvbih2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYucmVuZGVyVW5rbm93bk9wdGlvbih2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciByZW5kZXJTY2hlZHVsZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gc2NoZWR1bGVSZW5kZXIoKSB7XG4gICAgaWYgKHJlbmRlclNjaGVkdWxlZCkgcmV0dXJuO1xuICAgIHJlbmRlclNjaGVkdWxlZCA9IHRydWU7XG4gICAgJHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcbiAgICAgIHJlbmRlclNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdXBkYXRlU2NoZWR1bGVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIHNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlKHJlbmRlckFmdGVyKSB7XG4gICAgaWYgKHVwZGF0ZVNjaGVkdWxlZCkgcmV0dXJuO1xuXG4gICAgdXBkYXRlU2NoZWR1bGVkID0gdHJ1ZTtcblxuICAgICRzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoJHNjb3BlLiQkZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAgIHVwZGF0ZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHNlbGYucmVhZFZhbHVlKCkpO1xuICAgICAgaWYgKHJlbmRlckFmdGVyKSBzZWxmLm5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgc2VsZi5yZWdpc3Rlck9wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvblNjb3BlLCBvcHRpb25FbGVtZW50LCBvcHRpb25BdHRycywgaW50ZXJwb2xhdGVWYWx1ZUZuLCBpbnRlcnBvbGF0ZVRleHRGbikge1xuXG4gICAgaWYgKG9wdGlvbkF0dHJzLiRhdHRyLm5nVmFsdWUpIHtcbiAgICAgIC8vIFRoZSB2YWx1ZSBhdHRyaWJ1dGUgaXMgc2V0IGJ5IG5nVmFsdWVcbiAgICAgIHZhciBvbGRWYWwsIGhhc2hlZFZhbCA9IE5hTjtcbiAgICAgIG9wdGlvbkF0dHJzLiRvYnNlcnZlKCd2YWx1ZScsIGZ1bmN0aW9uIHZhbHVlQXR0cmlidXRlT2JzZXJ2ZUFjdGlvbihuZXdWYWwpIHtcblxuICAgICAgICB2YXIgcmVtb3ZhbDtcbiAgICAgICAgdmFyIHByZXZpb3VzbHlTZWxlY3RlZCA9IG9wdGlvbkVsZW1lbnQucHJvcCgnc2VsZWN0ZWQnKTtcblxuICAgICAgICBpZiAoaXNEZWZpbmVkKGhhc2hlZFZhbCkpIHtcbiAgICAgICAgICBzZWxmLnJlbW92ZU9wdGlvbihvbGRWYWwpO1xuICAgICAgICAgIGRlbGV0ZSBzZWxmLnNlbGVjdFZhbHVlTWFwW2hhc2hlZFZhbF07XG4gICAgICAgICAgcmVtb3ZhbCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBoYXNoZWRWYWwgPSBoYXNoS2V5KG5ld1ZhbCk7XG4gICAgICAgIG9sZFZhbCA9IG5ld1ZhbDtcbiAgICAgICAgc2VsZi5zZWxlY3RWYWx1ZU1hcFtoYXNoZWRWYWxdID0gbmV3VmFsO1xuICAgICAgICBzZWxmLmFkZE9wdGlvbihuZXdWYWwsIG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAvLyBTZXQgdGhlIGF0dHJpYnV0ZSBkaXJlY3RseSBpbnN0ZWFkIG9mIHVzaW5nIG9wdGlvbkF0dHJzLiRzZXQgLSB0aGlzIHN0b3BzIHRoZSBvYnNlcnZlclxuICAgICAgICAvLyBmcm9tIGZpcmluZyBhIHNlY29uZCB0aW1lLiBPdGhlciAkb2JzZXJ2ZXJzIG9uIHZhbHVlIHdpbGwgYWxzbyBnZXQgdGhlIHJlc3VsdCBvZiB0aGVcbiAgICAgICAgLy8gbmdWYWx1ZSBleHByZXNzaW9uLCBub3QgdGhlIGhhc2hlZCB2YWx1ZVxuICAgICAgICBvcHRpb25FbGVtZW50LmF0dHIoJ3ZhbHVlJywgaGFzaGVkVmFsKTtcblxuICAgICAgICBpZiAocmVtb3ZhbCAmJiBwcmV2aW91c2x5U2VsZWN0ZWQpIHtcbiAgICAgICAgICBzY2hlZHVsZVZpZXdWYWx1ZVVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGVWYWx1ZUZuKSB7XG4gICAgICAvLyBUaGUgdmFsdWUgYXR0cmlidXRlIGlzIGludGVycG9sYXRlZFxuICAgICAgb3B0aW9uQXR0cnMuJG9ic2VydmUoJ3ZhbHVlJywgZnVuY3Rpb24gdmFsdWVBdHRyaWJ1dGVPYnNlcnZlQWN0aW9uKG5ld1ZhbCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBpcyBvdmVyd3JpdHRlbiBpbiBuZ09wdGlvbnMgYW5kIGhhcyBzaWRlLWVmZmVjdHMhXG4gICAgICAgIHNlbGYucmVhZFZhbHVlKCk7XG5cbiAgICAgICAgdmFyIHJlbW92YWw7XG4gICAgICAgIHZhciBwcmV2aW91c2x5U2VsZWN0ZWQgPSBvcHRpb25FbGVtZW50LnByb3AoJ3NlbGVjdGVkJyk7XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChvbGRWYWwpKSB7XG4gICAgICAgICAgc2VsZi5yZW1vdmVPcHRpb24ob2xkVmFsKTtcbiAgICAgICAgICByZW1vdmFsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvbGRWYWwgPSBuZXdWYWw7XG4gICAgICAgIHNlbGYuYWRkT3B0aW9uKG5ld1ZhbCwgb3B0aW9uRWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHJlbW92YWwgJiYgcHJldmlvdXNseVNlbGVjdGVkKSB7XG4gICAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZVRleHRGbikge1xuICAgICAgLy8gVGhlIHRleHQgY29udGVudCBpcyBpbnRlcnBvbGF0ZWRcbiAgICAgIG9wdGlvblNjb3BlLiR3YXRjaChpbnRlcnBvbGF0ZVRleHRGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVXYXRjaEFjdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICBvcHRpb25BdHRycy4kc2V0KCd2YWx1ZScsIG5ld1ZhbCk7XG4gICAgICAgIHZhciBwcmV2aW91c2x5U2VsZWN0ZWQgPSBvcHRpb25FbGVtZW50LnByb3AoJ3NlbGVjdGVkJyk7XG4gICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlT3B0aW9uKG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hZGRPcHRpb24obmV3VmFsLCBvcHRpb25FbGVtZW50KTtcblxuICAgICAgICBpZiAob2xkVmFsICYmIHByZXZpb3VzbHlTZWxlY3RlZCkge1xuICAgICAgICAgIHNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgdmFsdWUgYXR0cmlidXRlIGlzIHN0YXRpY1xuICAgICAgc2VsZi5hZGRPcHRpb24ob3B0aW9uQXR0cnMudmFsdWUsIG9wdGlvbkVsZW1lbnQpO1xuICAgIH1cblxuXG4gICAgb3B0aW9uQXR0cnMuJG9ic2VydmUoJ2Rpc2FibGVkJywgZnVuY3Rpb24obmV3VmFsKSB7XG5cbiAgICAgIC8vIFNpbmNlIG1vZGVsIHVwZGF0ZXMgd2lsbCBhbHNvIHNlbGVjdCBkaXNhYmxlZCBvcHRpb25zIChsaWtlIG5nT3B0aW9ucyksXG4gICAgICAvLyB3ZSBvbmx5IGhhdmUgdG8gaGFuZGxlIG9wdGlvbnMgYmVjb21pbmcgZGlzYWJsZWQsIG5vdCBlbmFibGVkXG5cbiAgICAgIGlmIChuZXdWYWwgPT09ICd0cnVlJyB8fCBuZXdWYWwgJiYgb3B0aW9uRWxlbWVudC5wcm9wKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIGlmIChzZWxmLm11bHRpcGxlKSB7XG4gICAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xuICAgICAgICAgIHNlbGYubmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBvcHRpb25FbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IHNlbGYucmVhZFZhbHVlKCk7XG4gICAgICB2YXIgcmVtb3ZlVmFsdWUgPSBvcHRpb25BdHRycy52YWx1ZTtcblxuICAgICAgc2VsZi5yZW1vdmVPcHRpb24ocmVtb3ZlVmFsdWUpO1xuICAgICAgc2NoZWR1bGVSZW5kZXIoKTtcblxuICAgICAgaWYgKHNlbGYubXVsdGlwbGUgJiYgY3VycmVudFZhbHVlICYmIGN1cnJlbnRWYWx1ZS5pbmRleE9mKHJlbW92ZVZhbHVlKSAhPT0gLTEgfHxcbiAgICAgICAgICBjdXJyZW50VmFsdWUgPT09IHJlbW92ZVZhbHVlXG4gICAgICApIHtcbiAgICAgICAgLy8gV2hlbiBtdWx0aXBsZSAoc2VsZWN0ZWQpIG9wdGlvbnMgYXJlIGRlc3Ryb3llZCBhdCB0aGUgc2FtZSB0aW1lLCB3ZSBkb24ndCB3YW50XG4gICAgICAgIC8vIHRvIHJ1biBhIG1vZGVsIHVwZGF0ZSBmb3IgZWFjaCBvZiB0aGVtLiBJbnN0ZWFkLCBydW4gYSBzaW5nbGUgdXBkYXRlIGluIHRoZSAkJHBvc3REaWdlc3RcbiAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBzZWxlY3RcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVE1MIGBzZWxlY3RgIGVsZW1lbnQgd2l0aCBBbmd1bGFySlMgZGF0YS1iaW5kaW5nLlxuICpcbiAqIFRoZSBgc2VsZWN0YCBkaXJlY3RpdmUgaXMgdXNlZCB0b2dldGhlciB3aXRoIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0gdG8gcHJvdmlkZSBkYXRhLWJpbmRpbmdcbiAqIGJldHdlZW4gdGhlIHNjb3BlIGFuZCB0aGUgYDxzZWxlY3Q+YCBjb250cm9sIChpbmNsdWRpbmcgc2V0dGluZyBkZWZhdWx0IHZhbHVlcykuXG4gKiBJdCBhbHNvIGhhbmRsZXMgZHluYW1pYyBgPG9wdGlvbj5gIGVsZW1lbnRzLCB3aGljaCBjYW4gYmUgYWRkZWQgdXNpbmcgdGhlIHtAbGluayBuZ1JlcGVhdCBgbmdSZXBlYXR9YCBvclxuICoge0BsaW5rIG5nT3B0aW9ucyBgbmdPcHRpb25zYH0gZGlyZWN0aXZlcy5cbiAqXG4gKiBXaGVuIGFuIGl0ZW0gaW4gdGhlIGA8c2VsZWN0PmAgbWVudSBpcyBzZWxlY3RlZCwgdGhlIHZhbHVlIG9mIHRoZSBzZWxlY3RlZCBvcHRpb24gd2lsbCBiZSBib3VuZFxuICogdG8gdGhlIG1vZGVsIGlkZW50aWZpZWQgYnkgdGhlIGBuZ01vZGVsYCBkaXJlY3RpdmUuIFdpdGggc3RhdGljIG9yIHJlcGVhdGVkIG9wdGlvbnMsIHRoaXMgaXNcbiAqIHRoZSBjb250ZW50IG9mIHRoZSBgdmFsdWVgIGF0dHJpYnV0ZSBvciB0aGUgdGV4dENvbnRlbnQgb2YgdGhlIGA8b3B0aW9uPmAsIGlmIHRoZSB2YWx1ZSBhdHRyaWJ1dGUgaXMgbWlzc2luZy5cbiAqIFZhbHVlIGFuZCB0ZXh0Q29udGVudCBjYW4gYmUgaW50ZXJwb2xhdGVkLlxuICpcbiAqIFRoZSB7QGxpbmsgc2VsZWN0LlNlbGVjdENvbnRyb2xsZXIgc2VsZWN0IGNvbnRyb2xsZXJ9IGV4cG9zZXMgdXRpbGl0eSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZFxuICogdG8gbWFuaXB1bGF0ZSB0aGUgc2VsZWN0J3MgYmVoYXZpb3IuXG4gKlxuICogIyMgTWF0Y2hpbmcgbW9kZWwgYW5kIG9wdGlvbiB2YWx1ZXNcbiAqXG4gKiBJbiBnZW5lcmFsLCB0aGUgbWF0Y2ggYmV0d2VlbiB0aGUgbW9kZWwgYW5kIGFuIG9wdGlvbiBpcyBldmFsdWF0ZWQgYnkgc3RyaWN0bHkgY29tcGFyaW5nIHRoZSBtb2RlbFxuICogdmFsdWUgYWdhaW5zdCB0aGUgdmFsdWUgb2YgdGhlIGF2YWlsYWJsZSBvcHRpb25zLlxuICpcbiAqIElmIHlvdSBhcmUgc2V0dGluZyB0aGUgb3B0aW9uIHZhbHVlIHdpdGggdGhlIG9wdGlvbidzIGB2YWx1ZWAgYXR0cmlidXRlLCBvciB0ZXh0Q29udGVudCwgdGhlXG4gKiB2YWx1ZSB3aWxsIGFsd2F5cyBiZSBhIGBzdHJpbmdgIHdoaWNoIG1lYW5zIHRoYXQgdGhlIG1vZGVsIHZhbHVlIG11c3QgYWxzbyBiZSBhIHN0cmluZy5cbiAqIE90aGVyd2lzZSB0aGUgYHNlbGVjdGAgZGlyZWN0aXZlIGNhbm5vdCBtYXRjaCB0aGVtIGNvcnJlY3RseS5cbiAqXG4gKiBUbyBiaW5kIHRoZSBtb2RlbCB0byBhIG5vbi1zdHJpbmcgdmFsdWUsIHlvdSBjYW4gdXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHN0cmF0ZWdpZXM6XG4gKiAtIHRoZSB7QGxpbmsgbmcubmdPcHRpb25zIGBuZ09wdGlvbnNgfSBkaXJlY3RpdmVcbiAqICAgKHtAbGluayBuZy5zZWxlY3QjdXNpbmctc2VsZWN0LXdpdGgtbmdvcHRpb25zLWFuZC1zZXR0aW5nLWEtZGVmYXVsdC12YWx1ZX0pXG4gKiAtIHRoZSB7QGxpbmsgbmcubmdWYWx1ZSBgbmdWYWx1ZWB9IGRpcmVjdGl2ZSwgd2hpY2ggYWxsb3dzIGFyYml0cmFyeSBleHByZXNzaW9ucyB0byBiZVxuICogICBvcHRpb24gdmFsdWVzICh7QGxpbmsgbmcuc2VsZWN0I3VzaW5nLW5ndmFsdWUtdG8tYmluZC10aGUtbW9kZWwtdG8tYW4tYXJyYXktb2Ytb2JqZWN0cyBFeGFtcGxlfSlcbiAqIC0gbW9kZWwgJHBhcnNlcnMgLyAkZm9ybWF0dGVycyB0byBjb252ZXJ0IHRoZSBzdHJpbmcgdmFsdWVcbiAqICAgKHtAbGluayBuZy5zZWxlY3QjYmluZGluZy1zZWxlY3QtdG8tYS1ub24tc3RyaW5nLXZhbHVlLXZpYS1uZ21vZGVsLXBhcnNpbmctZm9ybWF0dGluZyBFeGFtcGxlfSlcbiAqXG4gKiBJZiB0aGUgdmlld1ZhbHVlIG9mIGBuZ01vZGVsYCBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgdGhlIG9wdGlvbnMsIHRoZW4gdGhlIGNvbnRyb2xcbiAqIHdpbGwgYXV0b21hdGljYWxseSBhZGQgYW4gXCJ1bmtub3duXCIgb3B0aW9uLCB3aGljaCBpdCB0aGVuIHJlbW92ZXMgd2hlbiB0aGUgbWlzbWF0Y2ggaXMgcmVzb2x2ZWQuXG4gKlxuICogT3B0aW9uYWxseSwgYSBzaW5nbGUgaGFyZC1jb2RlZCBgPG9wdGlvbj5gIGVsZW1lbnQsIHdpdGggdGhlIHZhbHVlIHNldCB0byBhbiBlbXB0eSBzdHJpbmcsIGNhblxuICogYmUgbmVzdGVkIGludG8gdGhlIGA8c2VsZWN0PmAgZWxlbWVudC4gVGhpcyBlbGVtZW50IHdpbGwgdGhlbiByZXByZXNlbnQgdGhlIGBudWxsYCBvciBcIm5vdCBzZWxlY3RlZFwiXG4gKiBvcHRpb24uIFNlZSBleGFtcGxlIGJlbG93IGZvciBkZW1vbnN0cmF0aW9uLlxuICpcbiAqICMjIENob29zaW5nIGJldHdlZW4gYG5nUmVwZWF0YCBhbmQgYG5nT3B0aW9uc2BcbiAqXG4gKiBJbiBtYW55IGNhc2VzLCBgbmdSZXBlYXRgIGNhbiBiZSB1c2VkIG9uIGA8b3B0aW9uPmAgZWxlbWVudHMgaW5zdGVhZCBvZiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nT3B0aW9uc1xuICogbmdPcHRpb25zfSB0byBhY2hpZXZlIGEgc2ltaWxhciByZXN1bHQuIEhvd2V2ZXIsIGBuZ09wdGlvbnNgIHByb3ZpZGVzIHNvbWUgYmVuZWZpdHM6XG4gKiAtIG1vcmUgZmxleGliaWxpdHkgaW4gaG93IHRoZSBgPHNlbGVjdD5gJ3MgbW9kZWwgaXMgYXNzaWduZWQgdmlhIHRoZSBgc2VsZWN0YCAqKmBhc2AqKiBwYXJ0IG9mIHRoZVxuICogY29tcHJlaGVuc2lvbiBleHByZXNzaW9uXG4gKiAtIHJlZHVjZWQgbWVtb3J5IGNvbnN1bXB0aW9uIGJ5IG5vdCBjcmVhdGluZyBhIG5ldyBzY29wZSBmb3IgZWFjaCByZXBlYXRlZCBpbnN0YW5jZVxuICogLSBpbmNyZWFzZWQgcmVuZGVyIHNwZWVkIGJ5IGNyZWF0aW5nIHRoZSBvcHRpb25zIGluIGEgZG9jdW1lbnRGcmFnbWVudCBpbnN0ZWFkIG9mIGluZGl2aWR1YWxseVxuICpcbiAqIFNwZWNpZmljYWxseSwgc2VsZWN0IHdpdGggcmVwZWF0ZWQgb3B0aW9ucyBzbG93cyBkb3duIHNpZ25pZmljYW50bHkgc3RhcnRpbmcgYXQgMjAwMCBvcHRpb25zIGluXG4gKiBDaHJvbWUgYW5kIEludGVybmV0IEV4cGxvcmVyIC8gRWRnZS5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG11bHRpcGxlIEFsbG93cyBtdWx0aXBsZSBvcHRpb25zIHRvIGJlIHNlbGVjdGVkLiBUaGUgc2VsZWN0ZWQgdmFsdWVzIHdpbGwgYmVcbiAqICAgICBib3VuZCB0byB0aGUgbW9kZWwgYXMgYW4gYXJyYXkuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyByZXF1aXJlZCBhdHRyaWJ1dGUgYW5kIHJlcXVpcmVkIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICogdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgbmdSZXF1aXJlZCBpbnN0ZWFkIG9mIHJlcXVpcmVkXG4gKiB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgcmVxdWlyZWQgYXR0cmlidXRlLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIHNlbGVjdGVkIG9wdGlvbihzKSBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBzZWxlY3QgZWxlbWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdPcHRpb25zIHNldHMgdGhlIG9wdGlvbnMgdGhhdCB0aGUgc2VsZWN0IGlzIHBvcHVsYXRlZCB3aXRoIGFuZCBkZWZpbmVzIHdoYXQgaXNcbiAqIHNldCBvbiB0aGUgbW9kZWwgb24gc2VsZWN0aW9uLiBTZWUge0BsaW5rIG5nT3B0aW9ucyBgbmdPcHRpb25zYH0uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQXR0clNpemUgc2V0cyB0aGUgc2l6ZSBvZiB0aGUgc2VsZWN0IGVsZW1lbnQgZHluYW1pY2FsbHkuIFVzZXMgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiMtbmdhdHRyLWZvci1iaW5kaW5nLXRvLWFyYml0cmFyeS1hdHRyaWJ1dGVzIG5nQXR0cn0gZGlyZWN0aXZlLlxuICpcbiAqXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqIEluIEZpcmVmb3gsIHRoZSBzZWxlY3QgbW9kZWwgaXMgb25seSB1cGRhdGVkIHdoZW4gdGhlIHNlbGVjdCBlbGVtZW50IGlzIGJsdXJyZWQuIEZvciBleGFtcGxlLFxuICogd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBvcHRpb25zIHdpdGggdGhlIGtleWJvYXJkLCB0aGUgc2VsZWN0IG1vZGVsIGlzIG9ubHkgc2V0IHRvIHRoZVxuICogY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbiB3aGVuIHRoZSBzZWxlY3QgaXMgYmx1cnJlZCwgZS5nIHZpYSB0YWIga2V5IG9yIGNsaWNraW5nIHRoZSBtb3VzZVxuICogb3V0c2lkZSB0aGUgc2VsZWN0LlxuICpcbiAqIFRoaXMgaXMgZHVlIHRvIGFuIGFtYmlndWl0eSBpbiB0aGUgc2VsZWN0IGVsZW1lbnQgc3BlY2lmaWNhdGlvbi4gU2VlIHRoZVxuICogW2lzc3VlIG9uIHRoZSBGaXJlZm94IGJ1ZyB0cmFja2VyXShodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMjYzNzkpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiwgYW5kIHRoaXNcbiAqIFtHaXRodWIgY29tbWVudCBmb3IgYSB3b3JrYXJvdW5kXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy85MTM0I2lzc3VlY29tbWVudC0xMzA4MDA0ODgpXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTaW1wbGUgYHNlbGVjdGAgZWxlbWVudHMgd2l0aCBzdGF0aWMgb3B0aW9uc1xuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJzdGF0aWMtc2VsZWN0XCIgbW9kdWxlPVwic3RhdGljU2VsZWN0XCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiPlxuICogICAgIDxsYWJlbCBmb3I9XCJzaW5nbGVTZWxlY3RcIj4gU2luZ2xlIHNlbGVjdDogPC9sYWJlbD48YnI+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwic2luZ2xlU2VsZWN0XCIgbmctbW9kZWw9XCJkYXRhLnNpbmdsZVNlbGVjdFwiPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+PGJyPlxuICpcbiAqICAgICA8bGFiZWwgZm9yPVwic2luZ2xlU2VsZWN0XCI+IFNpbmdsZSBzZWxlY3Qgd2l0aCBcIm5vdCBzZWxlY3RlZFwiIG9wdGlvbiBhbmQgZHluYW1pYyBvcHRpb24gdmFsdWVzOiA8L2xhYmVsPjxicj5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJzaW5nbGVTZWxlY3RcIiBpZD1cInNpbmdsZVNlbGVjdFwiIG5nLW1vZGVsPVwiZGF0YS5zaW5nbGVTZWxlY3RcIj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj4tLS1QbGVhc2Ugc2VsZWN0LS0tPC9vcHRpb24+IDwhLS0gbm90IHNlbGVjdGVkIC8gYmxhbmsgb3B0aW9uIC0tPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cInt7ZGF0YS5vcHRpb24xfX1cIj5PcHRpb24gMTwvb3B0aW9uPiA8IS0tIGludGVycG9sYXRpb24gLS0+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTJcIj5PcHRpb24gMjwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0Pjxicj5cbiAqICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZm9yY2VVbmtub3duT3B0aW9uKClcIj5Gb3JjZSB1bmtub3duIG9wdGlvbjwvYnV0dG9uPjxicj5cbiAqICAgICA8dHQ+c2luZ2xlU2VsZWN0ID0ge3tkYXRhLnNpbmdsZVNlbGVjdH19PC90dD5cbiAqXG4gKiAgICAgPGhyPlxuICogICAgIDxsYWJlbCBmb3I9XCJtdWx0aXBsZVNlbGVjdFwiPiBNdWx0aXBsZSBzZWxlY3Q6IDwvbGFiZWw+PGJyPlxuICogICAgIDxzZWxlY3QgbmFtZT1cIm11bHRpcGxlU2VsZWN0XCIgaWQ9XCJtdWx0aXBsZVNlbGVjdFwiIG5nLW1vZGVsPVwiZGF0YS5tdWx0aXBsZVNlbGVjdFwiIG11bHRpcGxlPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTNcIj5PcHRpb24gMzwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0Pjxicj5cbiAqICAgICA8dHQ+bXVsdGlwbGVTZWxlY3QgPSB7e2RhdGEubXVsdGlwbGVTZWxlY3R9fTwvdHQ+PGJyLz5cbiAqICAgPC9mb3JtPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ3N0YXRpY1NlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLmRhdGEgPSB7XG4gKiAgICAgICBzaW5nbGVTZWxlY3Q6IG51bGwsXG4gKiAgICAgICBtdWx0aXBsZVNlbGVjdDogW10sXG4gKiAgICAgICBvcHRpb24xOiAnb3B0aW9uLTEnXG4gKiAgICAgIH07XG4gKlxuICogICAgICAkc2NvcGUuZm9yY2VVbmtub3duT3B0aW9uID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgJHNjb3BlLmRhdGEuc2luZ2xlU2VsZWN0ID0gJ25vbnNlbnNlJztcbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgbmdSZXBlYXRgIHRvIGdlbmVyYXRlIGBzZWxlY3RgIG9wdGlvbnNcbiAqIDxleGFtcGxlIG5hbWU9XCJzZWxlY3QtbmdyZXBlYXRcIiBtb2R1bGU9XCJuZ3JlcGVhdFNlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwicmVwZWF0U2VsZWN0XCI+IFJlcGVhdCBzZWxlY3Q6IDwvbGFiZWw+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwicmVwZWF0U2VsZWN0XCIgaWQ9XCJyZXBlYXRTZWxlY3RcIiBuZy1tb2RlbD1cImRhdGEubW9kZWxcIj5cbiAqICAgICAgIDxvcHRpb24gbmctcmVwZWF0PVwib3B0aW9uIGluIGRhdGEuYXZhaWxhYmxlT3B0aW9uc1wiIHZhbHVlPVwie3tvcHRpb24uaWR9fVwiPnt7b3B0aW9uLm5hbWV9fTwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0PlxuICogICA8L2Zvcm0+XG4gKiAgIDxocj5cbiAqICAgPHR0Pm1vZGVsID0ge3tkYXRhLm1vZGVsfX08L3R0Pjxici8+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnbmdyZXBlYXRTZWxlY3QnLCBbXSlcbiAqICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICRzY29wZS5kYXRhID0ge1xuICogICAgICAgbW9kZWw6IG51bGwsXG4gKiAgICAgICBhdmFpbGFibGVPcHRpb25zOiBbXG4gKiAgICAgICAgIHtpZDogJzEnLCBuYW1lOiAnT3B0aW9uIEEnfSxcbiAqICAgICAgICAge2lkOiAnMicsIG5hbWU6ICdPcHRpb24gQid9LFxuICogICAgICAgICB7aWQ6ICczJywgbmFtZTogJ09wdGlvbiBDJ31cbiAqICAgICAgIF1cbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgbmdWYWx1ZWAgdG8gYmluZCB0aGUgbW9kZWwgdG8gYW4gYXJyYXkgb2Ygb2JqZWN0c1xuICogPGV4YW1wbGUgbmFtZT1cInNlbGVjdC1uZ3ZhbHVlXCIgbW9kdWxlPVwibmd2YWx1ZVNlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwibmd2YWx1ZXNlbGVjdFwiPiBuZ3ZhbHVlIHNlbGVjdDogPC9sYWJlbD5cbiAqICAgICA8c2VsZWN0IHNpemU9XCI2XCIgbmFtZT1cIm5ndmFsdWVzZWxlY3RcIiBuZy1tb2RlbD1cImRhdGEubW9kZWxcIiBtdWx0aXBsZT5cbiAqICAgICAgIDxvcHRpb24gbmctcmVwZWF0PVwib3B0aW9uIGluIGRhdGEuYXZhaWxhYmxlT3B0aW9uc1wiIG5nLXZhbHVlPVwib3B0aW9uLnZhbHVlXCI+e3tvcHRpb24ubmFtZX19PC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+XG4gKiAgIDwvZm9ybT5cbiAqICAgPGhyPlxuICogICA8cHJlPm1vZGVsID0ge3tkYXRhLm1vZGVsIHwganNvbn19PC9wcmU+PGJyLz5cbiAqIDwvZGl2PlxuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogIGFuZ3VsYXIubW9kdWxlKCduZ3ZhbHVlU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuZGF0YSA9IHtcbiAqICAgICAgIG1vZGVsOiBudWxsLFxuICogICAgICAgYXZhaWxhYmxlT3B0aW9uczogW1xuICAgICAgICAgICB7dmFsdWU6ICdteVN0cmluZycsIG5hbWU6ICdzdHJpbmcnfSxcbiAgICAgICAgICAge3ZhbHVlOiAxLCBuYW1lOiAnaW50ZWdlcid9LFxuICAgICAgICAgICB7dmFsdWU6IHRydWUsIG5hbWU6ICdib29sZWFuJ30sXG4gICAgICAgICAgIHt2YWx1ZTogbnVsbCwgbmFtZTogJ251bGwnfSxcbiAgICAgICAgICAge3ZhbHVlOiB7cHJvcDogJ3ZhbHVlJ30sIG5hbWU6ICdvYmplY3QnfSxcbiAgICAgICAgICAge3ZhbHVlOiBbJ2EnXSwgbmFtZTogJ2FycmF5J31cbiAqICAgICAgIF1cbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgc2VsZWN0YCB3aXRoIGBuZ09wdGlvbnNgIGFuZCBzZXR0aW5nIGEgZGVmYXVsdCB2YWx1ZVxuICogU2VlIHRoZSB7QGxpbmsgbmdPcHRpb25zIG5nT3B0aW9ucyBkb2N1bWVudGF0aW9ufSBmb3IgbW9yZSBgbmdPcHRpb25zYCB1c2FnZSBleGFtcGxlcy5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXdpdGgtZGVmYXVsdC12YWx1ZXNcIiBtb2R1bGU9XCJkZWZhdWx0VmFsdWVTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cIm15U2VsZWN0XCI+TWFrZSBhIGNob2ljZTo8L2xhYmVsPlxuICogICAgIDxzZWxlY3QgbmFtZT1cIm15U2VsZWN0XCIgaWQ9XCJteVNlbGVjdFwiXG4gKiAgICAgICBuZy1vcHRpb25zPVwib3B0aW9uLm5hbWUgZm9yIG9wdGlvbiBpbiBkYXRhLmF2YWlsYWJsZU9wdGlvbnMgdHJhY2sgYnkgb3B0aW9uLmlkXCJcbiAqICAgICAgIG5nLW1vZGVsPVwiZGF0YS5zZWxlY3RlZE9wdGlvblwiPjwvc2VsZWN0PlxuICogICA8L2Zvcm0+XG4gKiAgIDxocj5cbiAqICAgPHR0Pm9wdGlvbiA9IHt7ZGF0YS5zZWxlY3RlZE9wdGlvbn19PC90dD48YnIvPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ2RlZmF1bHRWYWx1ZVNlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLmRhdGEgPSB7XG4gKiAgICAgICBhdmFpbGFibGVPcHRpb25zOiBbXG4gKiAgICAgICAgIHtpZDogJzEnLCBuYW1lOiAnT3B0aW9uIEEnfSxcbiAqICAgICAgICAge2lkOiAnMicsIG5hbWU6ICdPcHRpb24gQid9LFxuICogICAgICAgICB7aWQ6ICczJywgbmFtZTogJ09wdGlvbiBDJ31cbiAqICAgICAgIF0sXG4gKiAgICAgICBzZWxlY3RlZE9wdGlvbjoge2lkOiAnMycsIG5hbWU6ICdPcHRpb24gQyd9IC8vVGhpcyBzZXRzIHRoZSBkZWZhdWx0IHZhbHVlIG9mIHRoZSBzZWxlY3QgaW4gdGhlIHVpXG4gKiAgICAgICB9O1xuICogICB9XSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJpbmRpbmcgYHNlbGVjdGAgdG8gYSBub24tc3RyaW5nIHZhbHVlIHZpYSBgbmdNb2RlbGAgcGFyc2luZyAvIGZvcm1hdHRpbmdcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXdpdGgtbm9uLXN0cmluZy1vcHRpb25zXCIgbW9kdWxlPVwibm9uU3RyaW5nU2VsZWN0XCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm1vZGVsLmlkXCIgY29udmVydC10by1udW1iZXI+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwiMFwiPlplcm88L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+T25lPC9vcHRpb24+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwiMlwiPlR3bzwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0PlxuICogICAgIHt7IG1vZGVsIH19XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdub25TdHJpbmdTZWxlY3QnLCBbXSlcbiAqICAgICAgIC5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuICogICAgICAgICAkcm9vdFNjb3BlLm1vZGVsID0geyBpZDogMiB9O1xuICogICAgICAgfSlcbiAqICAgICAgIC5kaXJlY3RpdmUoJ2NvbnZlcnRUb051bWJlcicsIGZ1bmN0aW9uKCkge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAqICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAqICAgICAgICAgICAgIG5nTW9kZWwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWwpIHtcbiAqICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApO1xuICogICAgICAgICAgICAgfSk7XG4gKiAgICAgICAgICAgICBuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsKSB7XG4gKiAgICAgICAgICAgICAgIHJldHVybiAnJyArIHZhbDtcbiAqICAgICAgICAgICAgIH0pO1xuICogICAgICAgICAgIH1cbiAqICAgICAgICAgfTtcbiAqICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCdtb2RlbC5pZCcpKS4kKCdvcHRpb246Y2hlY2tlZCcpLmdldFRleHQoKSkudG9FcXVhbCgnVHdvJyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKi9cbnZhciBzZWxlY3REaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogWydzZWxlY3QnLCAnP25nTW9kZWwnXSxcbiAgICBjb250cm9sbGVyOiBTZWxlY3RDb250cm9sbGVyLFxuICAgIHByaW9yaXR5OiAxLFxuICAgIGxpbms6IHtcbiAgICAgIHByZTogc2VsZWN0UHJlTGluayxcbiAgICAgIHBvc3Q6IHNlbGVjdFBvc3RMaW5rXG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHNlbGVjdFByZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG5cbiAgICAgIHZhciBzZWxlY3RDdHJsID0gY3RybHNbMF07XG4gICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcblxuICAgICAgLy8gaWYgbmdNb2RlbCBpcyBub3QgZGVmaW5lZCwgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBidXQgc2V0IHRoZSByZWdpc3Rlck9wdGlvblxuICAgICAgLy8gZnVuY3Rpb24gdG8gbm9vcCwgc28gb3B0aW9ucyBkb24ndCBnZXQgYWRkZWQgaW50ZXJuYWxseVxuICAgICAgaWYgKCFuZ01vZGVsQ3RybCkge1xuICAgICAgICBzZWxlY3RDdHJsLnJlZ2lzdGVyT3B0aW9uID0gbm9vcDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG5cbiAgICAgIHNlbGVjdEN0cmwubmdNb2RlbEN0cmwgPSBuZ01vZGVsQ3RybDtcblxuICAgICAgLy8gV2hlbiB0aGUgc2VsZWN0ZWQgaXRlbShzKSBjaGFuZ2VzIHdlIGRlbGVnYXRlIGdldHRpbmcgdGhlIHZhbHVlIG9mIHRoZSBzZWxlY3QgY29udHJvbFxuICAgICAgLy8gdG8gdGhlIGByZWFkVmFsdWVgIG1ldGhvZCwgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaWYgdGhlIHNlbGVjdCBjYW4gaGF2ZSBtdWx0aXBsZVxuICAgICAgLy8gc2VsZWN0ZWQgdmFsdWVzIG9yIGlmIHRoZSBvcHRpb25zIGFyZSBiZWluZyBnZW5lcmF0ZWQgYnkgYG5nT3B0aW9uc2BcbiAgICAgIGVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZVVua25vd25PcHRpb24oKTtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoc2VsZWN0Q3RybC5yZWFkVmFsdWUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIElmIHRoZSBzZWxlY3QgYWxsb3dzIG11bHRpcGxlIHZhbHVlcyB0aGVuIHdlIG5lZWQgdG8gbW9kaWZ5IGhvdyB3ZSByZWFkIGFuZCB3cml0ZVxuICAgICAgLy8gdmFsdWVzIGZyb20gYW5kIHRvIHRoZSBjb250cm9sOyBhbHNvIHdoYXQgaXQgbWVhbnMgZm9yIHRoZSB2YWx1ZSB0byBiZSBlbXB0eSBhbmRcbiAgICAgIC8vIHdlIGhhdmUgdG8gYWRkIGFuIGV4dHJhIHdhdGNoIHNpbmNlIG5nTW9kZWwgZG9lc24ndCB3b3JrIHdlbGwgd2l0aCBhcnJheXMgLSBpdFxuICAgICAgLy8gZG9lc24ndCB0cmlnZ2VyIHJlbmRlcmluZyBpZiBvbmx5IGFuIGl0ZW0gaW4gdGhlIGFycmF5IGNoYW5nZXMuXG4gICAgICBpZiAoYXR0ci5tdWx0aXBsZSkge1xuICAgICAgICBzZWxlY3RDdHJsLm11bHRpcGxlID0gdHJ1ZTtcblxuICAgICAgICAvLyBSZWFkIHZhbHVlIG5vdyBuZWVkcyB0byBjaGVjayBlYWNoIG9wdGlvbiB0byBzZWUgaWYgaXQgaXMgc2VsZWN0ZWRcbiAgICAgICAgc2VsZWN0Q3RybC5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkTXVsdGlwbGVWYWx1ZSgpIHtcbiAgICAgICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQuZmluZCgnb3B0aW9uJyksIGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCAmJiAhb3B0aW9uLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgIHZhciB2YWwgPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICAgIGFycmF5LnB1c2godmFsIGluIHNlbGVjdEN0cmwuc2VsZWN0VmFsdWVNYXAgPyBzZWxlY3RDdHJsLnNlbGVjdFZhbHVlTWFwW3ZhbF0gOiB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBXcml0ZSB2YWx1ZSBub3cgbmVlZHMgdG8gc2V0IHRoZSBzZWxlY3RlZCBwcm9wZXJ0eSBvZiBlYWNoIG1hdGNoaW5nIG9wdGlvblxuICAgICAgICBzZWxlY3RDdHJsLndyaXRlVmFsdWUgPSBmdW5jdGlvbiB3cml0ZU11bHRpcGxlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQuZmluZCgnb3B0aW9uJyksIGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgdmFyIHNob3VsZEJlU2VsZWN0ZWQgPSAhIXZhbHVlICYmIChpbmNsdWRlcyh2YWx1ZSwgb3B0aW9uLnZhbHVlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlcyh2YWx1ZSwgc2VsZWN0Q3RybC5zZWxlY3RWYWx1ZU1hcFtvcHRpb24udmFsdWVdKSk7XG4gICAgICAgICAgICB2YXIgY3VycmVudGx5U2VsZWN0ZWQgPSBvcHRpb24uc2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seSwgRWRnZSAxMi0xNStcbiAgICAgICAgICAgIC8vIEluIElFIGFuZCBFZGdlIGFkZGluZyBvcHRpb25zIHRvIHRoZSBzZWxlY3Rpb24gdmlhIHNoaWZ0K2NsaWNrL1VQL0RPV05cbiAgICAgICAgICAgIC8vIHdpbGwgZGUtc2VsZWN0IGFscmVhZHkgc2VsZWN0ZWQgb3B0aW9ucyBpZiBcInNlbGVjdGVkXCIgb24gdGhvc2Ugb3B0aW9ucyB3YXMgc2V0XG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25jZSAoaS5lLiB3aGVuIHRoZSBvcHRpb25zIHdlcmUgYWxyZWFkeSBzZWxlY3RlZClcbiAgICAgICAgICAgIC8vIFNvIHdlIG9ubHkgbW9kaWZ5IHRoZSBzZWxlY3RlZCBwcm9wZXJ0eSBpZiBuZWNlc3NhcnkuXG4gICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGJlaGF2aW9yIGNhbm5vdCBiZSByZXBsaWNhdGVkIHZpYSB1bml0IHRlc3RzIGJlY2F1c2UgaXQgb25seSBzaG93cyBpbiB0aGVcbiAgICAgICAgICAgIC8vIGFjdHVhbCB1c2VyIGludGVyZmFjZS5cbiAgICAgICAgICAgIGlmIChzaG91bGRCZVNlbGVjdGVkICE9PSBjdXJyZW50bHlTZWxlY3RlZCkge1xuICAgICAgICAgICAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhqcUxpdGUob3B0aW9uKSwgc2hvdWxkQmVTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyB3ZSBoYXZlIHRvIGRvIGl0IG9uIGVhY2ggd2F0Y2ggc2luY2UgbmdNb2RlbCB3YXRjaGVzIHJlZmVyZW5jZSwgYnV0XG4gICAgICAgIC8vIHdlIG5lZWQgdG8gd29yayBvZiBhbiBhcnJheSwgc28gd2UgbmVlZCB0byBzZWUgaWYgYW55dGhpbmcgd2FzIGluc2VydGVkL3JlbW92ZWRcbiAgICAgICAgdmFyIGxhc3RWaWV3LCBsYXN0Vmlld1JlZiA9IE5hTjtcbiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIHNlbGVjdE11bHRpcGxlV2F0Y2goKSB7XG4gICAgICAgICAgaWYgKGxhc3RWaWV3UmVmID09PSBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlICYmICFlcXVhbHMobGFzdFZpZXcsIG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpKSB7XG4gICAgICAgICAgICBsYXN0VmlldyA9IHNoYWxsb3dDb3B5KG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsYXN0Vmlld1JlZiA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIElmIHdlIGFyZSBhIG11bHRpcGxlIHNlbGVjdCB0aGVuIHZhbHVlIGlzIG5vdyBhIGNvbGxlY3Rpb25cbiAgICAgICAgLy8gc28gdGhlIG1lYW5pbmcgb2YgJGlzRW1wdHkgY2hhbmdlc1xuICAgICAgICBuZ01vZGVsQ3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPT09IDA7XG4gICAgICAgIH07XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RQb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICAvLyBpZiBuZ01vZGVsIGlzIG5vdCBkZWZpbmVkLCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nXG4gICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcbiAgICAgIGlmICghbmdNb2RlbEN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1swXTtcblxuICAgICAgLy8gV2UgZGVsZWdhdGUgcmVuZGVyaW5nIHRvIHRoZSBgd3JpdGVWYWx1ZWAgbWV0aG9kLCB3aGljaCBjYW4gYmUgY2hhbmdlZFxuICAgICAgLy8gaWYgdGhlIHNlbGVjdCBjYW4gaGF2ZSBtdWx0aXBsZSBzZWxlY3RlZCB2YWx1ZXMgb3IgaWYgdGhlIG9wdGlvbnMgYXJlIGJlaW5nXG4gICAgICAvLyBnZW5lcmF0ZWQgYnkgYG5nT3B0aW9uc2AuXG4gICAgICAvLyBUaGlzIG11c3QgYmUgZG9uZSBpbiB0aGUgcG9zdExpbmsgZm4gdG8gcHJldmVudCAkcmVuZGVyIHRvIGJlIGNhbGxlZCBiZWZvcmVcbiAgICAgIC8vIGFsbCBub2RlcyBoYXZlIGJlZW4gbGlua2VkIGNvcnJlY3RseS5cbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZWN0Q3RybC53cml0ZVZhbHVlKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgfTtcbiAgICB9XG59O1xuXG5cbi8vIFRoZSBvcHRpb24gZGlyZWN0aXZlIGlzIHB1cmVseSBkZXNpZ25lZCB0byBjb21tdW5pY2F0ZSB0aGUgZXhpc3RlbmNlIChvciBsYWNrIG9mKVxuLy8gb2YgZHluYW1pY2FsbHkgY3JlYXRlZCAoYW5kIGRlc3Ryb3llZCkgb3B0aW9uIGVsZW1lbnRzIHRvIHRoZWlyIGNvbnRhaW5pbmcgc2VsZWN0XG4vLyBkaXJlY3RpdmUgdmlhIGl0cyBjb250cm9sbGVyLlxudmFyIG9wdGlvbkRpcmVjdGl2ZSA9IFsnJGludGVycG9sYXRlJywgZnVuY3Rpb24oJGludGVycG9sYXRlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICBwcmlvcml0eTogMTAwLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIHZhciBpbnRlcnBvbGF0ZVZhbHVlRm4sIGludGVycG9sYXRlVGV4dEZuO1xuXG4gICAgICBpZiAoaXNEZWZpbmVkKGF0dHIubmdWYWx1ZSkpIHtcbiAgICAgICAgLy8gV2lsbCBiZSBoYW5kbGVkIGJ5IHJlZ2lzdGVyT3B0aW9uXG4gICAgICB9IGVsc2UgaWYgKGlzRGVmaW5lZChhdHRyLnZhbHVlKSkge1xuICAgICAgICAvLyBJZiB0aGUgdmFsdWUgYXR0cmlidXRlIGlzIGRlZmluZWQsIGNoZWNrIGlmIGl0IGNvbnRhaW5zIGFuIGludGVycG9sYXRpb25cbiAgICAgICAgaW50ZXJwb2xhdGVWYWx1ZUZuID0gJGludGVycG9sYXRlKGF0dHIudmFsdWUsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGF0dHJpYnV0ZSBpcyBub3QgZGVmaW5lZCB0aGVuIHdlIGZhbGwgYmFjayB0byB0aGVcbiAgICAgICAgLy8gdGV4dCBjb250ZW50IG9mIHRoZSBvcHRpb24gZWxlbWVudCwgd2hpY2ggbWF5IGJlIGludGVycG9sYXRlZFxuICAgICAgICBpbnRlcnBvbGF0ZVRleHRGbiA9ICRpbnRlcnBvbGF0ZShlbGVtZW50LnRleHQoKSwgdHJ1ZSk7XG4gICAgICAgIGlmICghaW50ZXJwb2xhdGVUZXh0Rm4pIHtcbiAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgZWxlbWVudC50ZXh0KCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAvLyBUaGlzIGlzIGFuIG9wdGltaXphdGlvbiBvdmVyIHVzaW5nIF5eIHNpbmNlIHdlIGRvbid0IHdhbnQgdG8gaGF2ZSB0byBzZWFyY2hcbiAgICAgICAgLy8gYWxsIHRoZSB3YXkgdG8gdGhlIHJvb3Qgb2YgdGhlIERPTSBmb3IgZXZlcnkgc2luZ2xlIG9wdGlvbiBlbGVtZW50XG4gICAgICAgIHZhciBzZWxlY3RDdHJsTmFtZSA9ICckc2VsZWN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICBwYXJlbnQgPSBlbGVtZW50LnBhcmVudCgpLFxuICAgICAgICAgICAgc2VsZWN0Q3RybCA9IHBhcmVudC5kYXRhKHNlbGVjdEN0cmxOYW1lKSB8fFxuICAgICAgICAgICAgICBwYXJlbnQucGFyZW50KCkuZGF0YShzZWxlY3RDdHJsTmFtZSk7IC8vIGluIGNhc2Ugd2UgYXJlIGluIG9wdGdyb3VwXG5cbiAgICAgICAgaWYgKHNlbGVjdEN0cmwpIHtcbiAgICAgICAgICBzZWxlY3RDdHJsLnJlZ2lzdGVyT3B0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBpbnRlcnBvbGF0ZVZhbHVlRm4sIGludGVycG9sYXRlVGV4dEZuKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1JlcXVpcmVkXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdSZXF1aXJlZCBBbmd1bGFySlMgZXhwcmVzc2lvbi4gSWYgaXQgZXZhbHVhdGVzIHRvIGB0cnVlYCwgaXQgc2V0cyB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgcmVxdWlyZWRgIGF0dHJpYnV0ZSB0byB0aGUgZWxlbWVudCBhbmQgYWRkcyB0aGUgYHJlcXVpcmVkYFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBuZ1JlcXVpcmVkIGFkZHMgdGhlIHJlcXVpcmVkIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfSB0byB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LlxuICogSXQgaXMgbW9zdCBvZnRlbiB1c2VkIGZvciB7QGxpbmsgaW5wdXQgYGlucHV0YH0gYW5kIHtAbGluayBzZWxlY3QgYHNlbGVjdGB9IGNvbnRyb2xzLCBidXQgY2FuIGFsc28gYmVcbiAqIGFwcGxpZWQgdG8gY3VzdG9tIGNvbnRyb2xzLlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgc2V0cyB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgaWYgdGhlIEFuZ3VsYXJKUyBleHByZXNzaW9uIGluc2lkZVxuICogYG5nUmVxdWlyZWRgIGV2YWx1YXRlcyB0byB0cnVlLiBBIHNwZWNpYWwgZGlyZWN0aXZlIGZvciBzZXR0aW5nIGByZXF1aXJlZGAgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2VcbiAqIGNhbm5vdCB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgYHJlcXVpcmVkYC4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9uIGd1aWRlfVxuICogZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBUaGUgdmFsaWRhdG9yIHdpbGwgc2V0IHRoZSBgcmVxdWlyZWRgIGVycm9yIGtleSB0byB0cnVlIGlmIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBpcyBzZXQgYW5kXG4gKiBjYWxsaW5nIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRpc0VtcHR5IGBOZ01vZGVsQ29udHJvbGxlci4kaXNFbXB0eWB9IHdpdGggdGhlXG4gKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlIGBuZ01vZGVsLiR2aWV3VmFsdWVgfSByZXR1cm5zIGB0cnVlYC4gRm9yIGV4YW1wbGUsIHRoZVxuICogYCRpc0VtcHR5KClgIGltcGxlbWVudGF0aW9uIGZvciBgaW5wdXRbdGV4dF1gIGNoZWNrcyB0aGUgbGVuZ3RoIG9mIHRoZSBgJHZpZXdWYWx1ZWAuIFdoZW4gZGV2ZWxvcGluZ1xuICogY3VzdG9tIGNvbnRyb2xzLCBgJGlzRW1wdHkoKWAgY2FuIGJlIG92ZXJ3cml0dGVuIHRvIGFjY291bnQgZm9yIGEgJHZpZXdWYWx1ZSB0aGF0IGlzIG5vdCBzdHJpbmctYmFzZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ1JlcXVpcmVkRGlyZWN0aXZlXCIgbW9kdWxlPVwibmdSZXF1aXJlZEV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ25nUmVxdWlyZWRFeGFtcGxlJywgW10pXG4gKiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICAgJHNjb3BlLnJlcXVpcmVkID0gdHJ1ZTtcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwicmVxdWlyZWRcIj5Ub2dnbGUgcmVxdWlyZWQ6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInJlcXVpcmVkXCIgaWQ9XCJyZXF1aXJlZFwiIC8+XG4gKiAgICAgICAgIDxicj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cImlucHV0XCI+VGhpcyBpbnB1dCBtdXN0IGJlIGZpbGxlZCBpZiBgcmVxdWlyZWRgIGlzIHRydWU6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctcmVxdWlyZWQ9XCJyZXF1aXJlZFwiIC8+PGJyPlxuICogICAgICAgICA8aHI+XG4gKiAgICAgICAgIHJlcXVpcmVkIGVycm9yIHNldD8gPSA8Y29kZT57e2Zvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkfX08L2NvZGU+PGJyPlxuICogICAgICAgICBtb2RlbCA9IDxjb2RlPnt7bW9kZWx9fTwvY29kZT5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIHJlcXVpcmVkID0gZWxlbWVudChieS5iaW5kaW5nKCdmb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZCcpKTtcbiAgICAgICB2YXIgbW9kZWwgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ21vZGVsJykpO1xuICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkuaWQoJ2lucHV0JykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzZXQgdGhlIHJlcXVpcmVkIGVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocmVxdWlyZWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcblxuICAgICAgICAgaW5wdXQuc2VuZEtleXMoJzEyMycpO1xuICAgICAgICAgZXhwZWN0KHJlcXVpcmVkLmdldFRleHQoKSkubm90LnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9Db250YWluKCcxMjMnKTtcbiAgICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgcmVxdWlyZWREaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG4gICAgICBhdHRyLnJlcXVpcmVkID0gdHJ1ZTsgLy8gZm9yY2UgdHJ1dGh5IGluIGNhc2Ugd2UgYXJlIG9uIG5vbiBpbnB1dCBlbGVtZW50XG5cbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMucmVxdWlyZWQgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICFhdHRyLnJlcXVpcmVkIHx8ICFjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSk7XG4gICAgICB9O1xuXG4gICAgICBhdHRyLiRvYnNlcnZlKCdyZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1BhdHRlcm5cbiAqIEByZXN0cmljdCBBXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufFJlZ0V4cH0gbmdQYXR0ZXJuIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRoYXQgbXVzdCBldmFsdWF0ZSB0byBhIGBSZWdFeHBgIG9yIGEgYFN0cmluZ2BcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzYWJsZSBpbnRvIGEgYFJlZ0V4cGAsIG9yIGEgYFJlZ0V4cGAgbGl0ZXJhbC4gU2VlIGFib3ZlIGZvclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBuZ1BhdHRlcm4gYWRkcyB0aGUgcGF0dGVybiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgdmFsaWRhdG9yYH0gdG8ge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfS5cbiAqIEl0IGlzIG1vc3Qgb2Z0ZW4gdXNlZCBmb3IgdGV4dC1iYXNlZCB7QGxpbmsgaW5wdXQgYGlucHV0YH0gY29udHJvbHMsIGJ1dCBjYW4gYWxzbyBiZSBhcHBsaWVkIHRvIGN1c3RvbSB0ZXh0LWJhc2VkIGNvbnRyb2xzLlxuICpcbiAqIFRoZSB2YWxpZGF0b3Igc2V0cyB0aGUgYHBhdHRlcm5gIGVycm9yIGtleSBpZiB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSBgbmdNb2RlbC4kdmlld1ZhbHVlYH1cbiAqIGRvZXMgbm90IG1hdGNoIGEgUmVnRXhwIHdoaWNoIGlzIG9idGFpbmVkIGZyb20gdGhlIGBuZ1BhdHRlcm5gIGF0dHJpYnV0ZSB2YWx1ZTpcbiAqIC0gdGhlIHZhbHVlIGlzIGFuIEFuZ3VsYXJKUyBleHByZXNzaW9uOlxuICogICAtIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QsIHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICogICAtIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cCBhZnRlciB3cmFwcGluZyBpdFxuICogICAgIGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC5cbiAqIC0gSWYgdGhlIHZhbHVlIGlzIGEgUmVnRXhwIGxpdGVyYWwsIGUuZy4gYG5nUGF0dGVybj1cIi9eXFxkKyQvXCJgLCBpdCBpcyB1c2VkIGRpcmVjdGx5LlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICogc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAqIGFjY291bnQuXG4gKiA8L2Rpdj5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipOb3RlOioqIFRoaXMgZGlyZWN0aXZlIGlzIGFsc28gYWRkZWQgd2hlbiB0aGUgcGxhaW4gYHBhdHRlcm5gIGF0dHJpYnV0ZSBpcyB1c2VkLCB3aXRoIHR3b1xuICogZGlmZmVyZW5jZXM6XG4gKiA8b2w+XG4gKiAgIDxsaT5cbiAqICAgICBgbmdQYXR0ZXJuYCBkb2VzIG5vdCBzZXQgdGhlIGBwYXR0ZXJuYCBhdHRyaWJ1dGUgYW5kIHRoZXJlZm9yZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24gaXNcbiAqICAgICBub3QgYXZhaWxhYmxlLlxuICogICA8L2xpPlxuICogICA8bGk+XG4gKiAgICAgVGhlIGBuZ1BhdHRlcm5gIGF0dHJpYnV0ZSBtdXN0IGJlIGFuIGV4cHJlc3Npb24sIHdoaWxlIHRoZSBgcGF0dGVybmAgdmFsdWUgbXVzdCBiZVxuICogICAgIGludGVycG9sYXRlZC5cbiAqICAgPC9saT5cbiAqIDwvb2w+XG4gKiA8L2Rpdj5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nUGF0dGVybkRpcmVjdGl2ZVwiIG1vZHVsZT1cIm5nUGF0dGVybkV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ25nUGF0dGVybkV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUucmVnZXggPSAnXFxcXGQrJztcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwicmVnZXhcIj5TZXQgYSBwYXR0ZXJuIChyZWdleCBzdHJpbmcpOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInJlZ2V4XCIgaWQ9XCJyZWdleFwiIC8+XG4gKiAgICAgICAgIDxicj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cImlucHV0XCI+VGhpcyBpbnB1dCBpcyByZXN0cmljdGVkIGJ5IHRoZSBjdXJyZW50IHBhdHRlcm46IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctcGF0dGVybj1cInJlZ2V4XCIgLz48YnI+XG4gKiAgICAgICAgIDxocj5cbiAqICAgICAgICAgaW5wdXQgdmFsaWQ/ID0gPGNvZGU+e3tmb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAqICAgICAgICAgbW9kZWwgPSA8Y29kZT57e21vZGVsfX08L2NvZGU+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygnbW9kZWwnKSk7XG4gICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5pZCgnaW5wdXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRoZSBpbnB1dCB3aXRoIHRoZSBkZWZhdWx0IHBhdHRlcm4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGlucHV0LnNlbmRLZXlzKCdhYWEnKTtcbiAgICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLm5vdC50b0NvbnRhaW4oJ2FhYScpO1xuXG4gICAgICAgICBpbnB1dC5jbGVhcigpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcxMjMnKTtcbiAgICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9Db250YWluKCcxMjMnKTtcbiAgICAgICAgIH0pO1xuICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBwYXR0ZXJuRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHIsIGN0cmwpIHtcbiAgICAgIGlmICghY3RybCkgcmV0dXJuO1xuXG4gICAgICB2YXIgcmVnZXhwLCBwYXR0ZXJuRXhwID0gYXR0ci5uZ1BhdHRlcm4gfHwgYXR0ci5wYXR0ZXJuO1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgncGF0dGVybicsIGZ1bmN0aW9uKHJlZ2V4KSB7XG4gICAgICAgIGlmIChpc1N0cmluZyhyZWdleCkgJiYgcmVnZXgubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXicgKyByZWdleCArICckJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVnZXggJiYgIXJlZ2V4LnRlc3QpIHtcbiAgICAgICAgICB0aHJvdyBtaW5FcnIoJ25nUGF0dGVybicpKCdub3JlZ2V4cCcsXG4gICAgICAgICAgICAnRXhwZWN0ZWQgezB9IHRvIGJlIGEgUmVnRXhwIGJ1dCB3YXMgezF9LiBFbGVtZW50OiB7Mn0nLCBwYXR0ZXJuRXhwLFxuICAgICAgICAgICAgcmVnZXgsIHN0YXJ0aW5nVGFnKGVsbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnZXhwID0gcmVnZXggfHwgdW5kZWZpbmVkO1xuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMucGF0dGVybiA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICAvLyBIVE1MNSBwYXR0ZXJuIGNvbnN0cmFpbnQgdmFsaWRhdGVzIHRoZSBpbnB1dCB2YWx1ZSwgc28gd2UgdmFsaWRhdGUgdGhlIHZpZXdWYWx1ZVxuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8IGlzVW5kZWZpbmVkKHJlZ2V4cCkgfHwgcmVnZXhwLnRlc3Qodmlld1ZhbHVlKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01heGxlbmd0aFxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTWF4bGVuZ3RoIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRoYXQgbXVzdCBldmFsdWF0ZSB0byBhIGBOdW1iZXJgIG9yIGBTdHJpbmdgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNhYmxlIGludG8gYSBgTnVtYmVyYC4gVXNlZCBhcyB2YWx1ZSBmb3IgdGhlIGBtYXhsZW5ndGhgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIHZhbGlkYXRvcn0uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogbmdNYXhsZW5ndGggYWRkcyB0aGUgbWF4bGVuZ3RoIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfSB0byB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LlxuICogSXQgaXMgbW9zdCBvZnRlbiB1c2VkIGZvciB0ZXh0LWJhc2VkIHtAbGluayBpbnB1dCBgaW5wdXRgfSBjb250cm9scywgYnV0IGNhbiBhbHNvIGJlIGFwcGxpZWQgdG8gY3VzdG9tIHRleHQtYmFzZWQgY29udHJvbHMuXG4gKlxuICogVGhlIHZhbGlkYXRvciBzZXRzIHRoZSBgbWF4bGVuZ3RoYCBlcnJvciBrZXkgaWYgdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgYG5nTW9kZWwuJHZpZXdWYWx1ZWB9XG4gKiBpcyBsb25nZXIgdGhhbiB0aGUgaW50ZWdlciBvYnRhaW5lZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGVcbiAqIGBuZ01heGxlbmd0aGAgYXR0cmlidXRlIHZhbHVlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKk5vdGU6KiogVGhpcyBkaXJlY3RpdmUgaXMgYWxzbyBhZGRlZCB3aGVuIHRoZSBwbGFpbiBgbWF4bGVuZ3RoYCBhdHRyaWJ1dGUgaXMgdXNlZCwgd2l0aCB0d29cbiAqIGRpZmZlcmVuY2VzOlxuICogPG9sPlxuICogICA8bGk+XG4gKiAgICAgYG5nTWF4bGVuZ3RoYCBkb2VzIG5vdCBzZXQgdGhlIGBtYXhsZW5ndGhgIGF0dHJpYnV0ZSBhbmQgdGhlcmVmb3JlIEhUTUw1IGNvbnN0cmFpbnRcbiAqICAgICB2YWxpZGF0aW9uIGlzIG5vdCBhdmFpbGFibGUuXG4gKiAgIDwvbGk+XG4gKiAgIDxsaT5cbiAqICAgICBUaGUgYG5nTWF4bGVuZ3RoYCBhdHRyaWJ1dGUgbXVzdCBiZSBhbiBleHByZXNzaW9uLCB3aGlsZSB0aGUgYG1heGxlbmd0aGAgdmFsdWUgbXVzdCBiZVxuICogICAgIGludGVycG9sYXRlZC5cbiAqICAgPC9saT5cbiAqIDwvb2w+XG4gKiA8L2Rpdj5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nTWF4bGVuZ3RoRGlyZWN0aXZlXCIgbW9kdWxlPVwibmdNYXhsZW5ndGhFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ01heGxlbmd0aEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUubWF4bGVuZ3RoID0gNTtcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwibWF4bGVuZ3RoXCI+U2V0IGEgbWF4bGVuZ3RoOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwibWF4bGVuZ3RoXCIgaWQ9XCJtYXhsZW5ndGhcIiAvPlxuICogICAgICAgICA8YnI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJpbnB1dFwiPlRoaXMgaW5wdXQgaXMgcmVzdHJpY3RlZCBieSB0aGUgY3VycmVudCBtYXhsZW5ndGg6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbWF4bGVuZ3RoPVwibWF4bGVuZ3RoXCIgLz48YnI+XG4gKiAgICAgICAgIDxocj5cbiAqICAgICAgICAgaW5wdXQgdmFsaWQ/ID0gPGNvZGU+e3tmb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAqICAgICAgICAgbW9kZWwgPSA8Y29kZT57e21vZGVsfX08L2NvZGU+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygnbW9kZWwnKSk7XG4gICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5pZCgnaW5wdXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRoZSBpbnB1dCB3aXRoIHRoZSBkZWZhdWx0IG1heGxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2FiY2RlZicpO1xuICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkubm90LnRvQ29udGFpbignYWJjZGVmJyk7XG5cbiAgICAgICAgIGlucHV0LmNsZWFyKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2FiY2RlJyk7XG4gICAgICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvQ29udGFpbignYWJjZGUnKTtcbiAgICAgICAgIH0pO1xuICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBtYXhsZW5ndGhEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG5cbiAgICAgIHZhciBtYXhsZW5ndGggPSAtMTtcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21heGxlbmd0aCcsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBpbnRWYWwgPSB0b0ludCh2YWx1ZSk7XG4gICAgICAgIG1heGxlbmd0aCA9IGlzTnVtYmVyTmFOKGludFZhbCkgPyAtMSA6IGludFZhbDtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgICAgY3RybC4kdmFsaWRhdG9ycy5tYXhsZW5ndGggPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIChtYXhsZW5ndGggPCAwKSB8fCBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgKHZpZXdWYWx1ZS5sZW5ndGggPD0gbWF4bGVuZ3RoKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01pbmxlbmd0aFxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTWlubGVuZ3RoIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRoYXQgbXVzdCBldmFsdWF0ZSB0byBhIGBOdW1iZXJgIG9yIGBTdHJpbmdgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNhYmxlIGludG8gYSBgTnVtYmVyYC4gVXNlZCBhcyB2YWx1ZSBmb3IgdGhlIGBtaW5sZW5ndGhgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIHZhbGlkYXRvcn0uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogbmdNaW5sZW5ndGggYWRkcyB0aGUgbWlubGVuZ3RoIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfSB0byB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LlxuICogSXQgaXMgbW9zdCBvZnRlbiB1c2VkIGZvciB0ZXh0LWJhc2VkIHtAbGluayBpbnB1dCBgaW5wdXRgfSBjb250cm9scywgYnV0IGNhbiBhbHNvIGJlIGFwcGxpZWQgdG8gY3VzdG9tIHRleHQtYmFzZWQgY29udHJvbHMuXG4gKlxuICogVGhlIHZhbGlkYXRvciBzZXRzIHRoZSBgbWlubGVuZ3RoYCBlcnJvciBrZXkgaWYgdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgYG5nTW9kZWwuJHZpZXdWYWx1ZWB9XG4gKiBpcyBzaG9ydGVyIHRoYW4gdGhlIGludGVnZXIgb2J0YWluZWQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlXG4gKiBgbmdNaW5sZW5ndGhgIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipOb3RlOioqIFRoaXMgZGlyZWN0aXZlIGlzIGFsc28gYWRkZWQgd2hlbiB0aGUgcGxhaW4gYG1pbmxlbmd0aGAgYXR0cmlidXRlIGlzIHVzZWQsIHdpdGggdHdvXG4gKiBkaWZmZXJlbmNlczpcbiAqIDxvbD5cbiAqICAgPGxpPlxuICogICAgIGBuZ01pbmxlbmd0aGAgZG9lcyBub3Qgc2V0IHRoZSBgbWlubGVuZ3RoYCBhdHRyaWJ1dGUgYW5kIHRoZXJlZm9yZSBIVE1MNSBjb25zdHJhaW50XG4gKiAgICAgdmFsaWRhdGlvbiBpcyBub3QgYXZhaWxhYmxlLlxuICogICA8L2xpPlxuICogICA8bGk+XG4gKiAgICAgVGhlIGBuZ01pbmxlbmd0aGAgdmFsdWUgbXVzdCBiZSBhbiBleHByZXNzaW9uLCB3aGlsZSB0aGUgYG1pbmxlbmd0aGAgdmFsdWUgbXVzdCBiZVxuICogICAgIGludGVycG9sYXRlZC5cbiAqICAgPC9saT5cbiAqIDwvb2w+XG4gKiA8L2Rpdj5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nTWlubGVuZ3RoRGlyZWN0aXZlXCIgbW9kdWxlPVwibmdNaW5sZW5ndGhFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ01pbmxlbmd0aEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUubWlubGVuZ3RoID0gMztcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwibWlubGVuZ3RoXCI+U2V0IGEgbWlubGVuZ3RoOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwibWlubGVuZ3RoXCIgaWQ9XCJtaW5sZW5ndGhcIiAvPlxuICogICAgICAgICA8YnI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJpbnB1dFwiPlRoaXMgaW5wdXQgaXMgcmVzdHJpY3RlZCBieSB0aGUgY3VycmVudCBtaW5sZW5ndGg6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbWlubGVuZ3RoPVwibWlubGVuZ3RoXCIgLz48YnI+XG4gKiAgICAgICAgIDxocj5cbiAqICAgICAgICAgaW5wdXQgdmFsaWQ/ID0gPGNvZGU+e3tmb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAqICAgICAgICAgbW9kZWwgPSA8Y29kZT57e21vZGVsfX08L2NvZGU+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygnbW9kZWwnKSk7XG4gICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5pZCgnaW5wdXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRoZSBpbnB1dCB3aXRoIHRoZSBkZWZhdWx0IG1pbmxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2FiJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS5ub3QudG9Db250YWluKCdhYicpO1xuXG4gICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWJjJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2FiYycpO1xuICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBtaW5sZW5ndGhEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG5cbiAgICAgIHZhciBtaW5sZW5ndGggPSAwO1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWlubGVuZ3RoJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgbWlubGVuZ3RoID0gdG9JbnQodmFsdWUpIHx8IDA7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMubWlubGVuZ3RoID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgdmlld1ZhbHVlLmxlbmd0aCA+PSBtaW5sZW5ndGg7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5cbmlmICh3aW5kb3cuYW5ndWxhci5ib290c3RyYXApIHtcbiAgLy8gQW5ndWxhckpTIGlzIGFscmVhZHkgbG9hZGVkLCBzbyB3ZSBjYW4gcmV0dXJuIGhlcmUuLi5cbiAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XG4gICAgY29uc29sZS5sb2coJ1dBUk5JTkc6IFRyaWVkIHRvIGxvYWQgQW5ndWxhckpTIG1vcmUgdGhhbiBvbmNlLicpO1xuICB9XG4gIHJldHVybjtcbn1cblxuLy8gdHJ5IHRvIGJpbmQgdG8ganF1ZXJ5IG5vdyBzbyB0aGF0IG9uZSBjYW4gd3JpdGUganFMaXRlKGZuKVxuLy8gYnV0IHdlIHdpbGwgcmViaW5kIG9uIGJvb3RzdHJhcCBhZ2Fpbi5cbmJpbmRKUXVlcnkoKTtcblxucHVibGlzaEV4dGVybmFsQVBJKGFuZ3VsYXIpO1xuXG5hbmd1bGFyLm1vZHVsZShcIm5nTG9jYWxlXCIsIFtdLCBbXCIkcHJvdmlkZVwiLCBmdW5jdGlvbigkcHJvdmlkZSkge1xudmFyIFBMVVJBTF9DQVRFR09SWSA9IHtaRVJPOiBcInplcm9cIiwgT05FOiBcIm9uZVwiLCBUV086IFwidHdvXCIsIEZFVzogXCJmZXdcIiwgTUFOWTogXCJtYW55XCIsIE9USEVSOiBcIm90aGVyXCJ9O1xuZnVuY3Rpb24gZ2V0RGVjaW1hbHMobikge1xuICBuID0gbiArICcnO1xuICB2YXIgaSA9IG4uaW5kZXhPZignLicpO1xuICByZXR1cm4gKGkgPT0gLTEpID8gMCA6IG4ubGVuZ3RoIC0gaSAtIDE7XG59XG5cbmZ1bmN0aW9uIGdldFZGKG4sIG9wdF9wcmVjaXNpb24pIHtcbiAgdmFyIHYgPSBvcHRfcHJlY2lzaW9uO1xuXG4gIGlmICh1bmRlZmluZWQgPT09IHYpIHtcbiAgICB2ID0gTWF0aC5taW4oZ2V0RGVjaW1hbHMobiksIDMpO1xuICB9XG5cbiAgdmFyIGJhc2UgPSBNYXRoLnBvdygxMCwgdik7XG4gIHZhciBmID0gKChuICogYmFzZSkgfCAwKSAlIGJhc2U7XG4gIHJldHVybiB7djogdiwgZjogZn07XG59XG5cbiRwcm92aWRlLnZhbHVlKFwiJGxvY2FsZVwiLCB7XG4gIFwiREFURVRJTUVfRk9STUFUU1wiOiB7XG4gICAgXCJBTVBNU1wiOiBbXG4gICAgICBcIkFNXCIsXG4gICAgICBcIlBNXCJcbiAgICBdLFxuICAgIFwiREFZXCI6IFtcbiAgICAgIFwiU3VuZGF5XCIsXG4gICAgICBcIk1vbmRheVwiLFxuICAgICAgXCJUdWVzZGF5XCIsXG4gICAgICBcIldlZG5lc2RheVwiLFxuICAgICAgXCJUaHVyc2RheVwiLFxuICAgICAgXCJGcmlkYXlcIixcbiAgICAgIFwiU2F0dXJkYXlcIlxuICAgIF0sXG4gICAgXCJFUkFOQU1FU1wiOiBbXG4gICAgICBcIkJlZm9yZSBDaHJpc3RcIixcbiAgICAgIFwiQW5ubyBEb21pbmlcIlxuICAgIF0sXG4gICAgXCJFUkFTXCI6IFtcbiAgICAgIFwiQkNcIixcbiAgICAgIFwiQURcIlxuICAgIF0sXG4gICAgXCJGSVJTVERBWU9GV0VFS1wiOiA2LFxuICAgIFwiTU9OVEhcIjogW1xuICAgICAgXCJKYW51YXJ5XCIsXG4gICAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgICBcIk1hcmNoXCIsXG4gICAgICBcIkFwcmlsXCIsXG4gICAgICBcIk1heVwiLFxuICAgICAgXCJKdW5lXCIsXG4gICAgICBcIkp1bHlcIixcbiAgICAgIFwiQXVndXN0XCIsXG4gICAgICBcIlNlcHRlbWJlclwiLFxuICAgICAgXCJPY3RvYmVyXCIsXG4gICAgICBcIk5vdmVtYmVyXCIsXG4gICAgICBcIkRlY2VtYmVyXCJcbiAgICBdLFxuICAgIFwiU0hPUlREQVlcIjogW1xuICAgICAgXCJTdW5cIixcbiAgICAgIFwiTW9uXCIsXG4gICAgICBcIlR1ZVwiLFxuICAgICAgXCJXZWRcIixcbiAgICAgIFwiVGh1XCIsXG4gICAgICBcIkZyaVwiLFxuICAgICAgXCJTYXRcIlxuICAgIF0sXG4gICAgXCJTSE9SVE1PTlRIXCI6IFtcbiAgICAgIFwiSmFuXCIsXG4gICAgICBcIkZlYlwiLFxuICAgICAgXCJNYXJcIixcbiAgICAgIFwiQXByXCIsXG4gICAgICBcIk1heVwiLFxuICAgICAgXCJKdW5cIixcbiAgICAgIFwiSnVsXCIsXG4gICAgICBcIkF1Z1wiLFxuICAgICAgXCJTZXBcIixcbiAgICAgIFwiT2N0XCIsXG4gICAgICBcIk5vdlwiLFxuICAgICAgXCJEZWNcIlxuICAgIF0sXG4gICAgXCJTVEFOREFMT05FTU9OVEhcIjogW1xuICAgICAgXCJKYW51YXJ5XCIsXG4gICAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgICBcIk1hcmNoXCIsXG4gICAgICBcIkFwcmlsXCIsXG4gICAgICBcIk1heVwiLFxuICAgICAgXCJKdW5lXCIsXG4gICAgICBcIkp1bHlcIixcbiAgICAgIFwiQXVndXN0XCIsXG4gICAgICBcIlNlcHRlbWJlclwiLFxuICAgICAgXCJPY3RvYmVyXCIsXG4gICAgICBcIk5vdmVtYmVyXCIsXG4gICAgICBcIkRlY2VtYmVyXCJcbiAgICBdLFxuICAgIFwiV0VFS0VORFJBTkdFXCI6IFtcbiAgICAgIDUsXG4gICAgICA2XG4gICAgXSxcbiAgICBcImZ1bGxEYXRlXCI6IFwiRUVFRSwgTU1NTSBkLCB5XCIsXG4gICAgXCJsb25nRGF0ZVwiOiBcIk1NTU0gZCwgeVwiLFxuICAgIFwibWVkaXVtXCI6IFwiTU1NIGQsIHkgaDptbTpzcyBhXCIsXG4gICAgXCJtZWRpdW1EYXRlXCI6IFwiTU1NIGQsIHlcIixcbiAgICBcIm1lZGl1bVRpbWVcIjogXCJoOm1tOnNzIGFcIixcbiAgICBcInNob3J0XCI6IFwiTS9kL3l5IGg6bW0gYVwiLFxuICAgIFwic2hvcnREYXRlXCI6IFwiTS9kL3l5XCIsXG4gICAgXCJzaG9ydFRpbWVcIjogXCJoOm1tIGFcIlxuICB9LFxuICBcIk5VTUJFUl9GT1JNQVRTXCI6IHtcbiAgICBcIkNVUlJFTkNZX1NZTVwiOiBcIiRcIixcbiAgICBcIkRFQ0lNQUxfU0VQXCI6IFwiLlwiLFxuICAgIFwiR1JPVVBfU0VQXCI6IFwiLFwiLFxuICAgIFwiUEFUVEVSTlNcIjogW1xuICAgICAge1xuICAgICAgICBcImdTaXplXCI6IDMsXG4gICAgICAgIFwibGdTaXplXCI6IDMsXG4gICAgICAgIFwibWF4RnJhY1wiOiAzLFxuICAgICAgICBcIm1pbkZyYWNcIjogMCxcbiAgICAgICAgXCJtaW5JbnRcIjogMSxcbiAgICAgICAgXCJuZWdQcmVcIjogXCItXCIsXG4gICAgICAgIFwibmVnU3VmXCI6IFwiXCIsXG4gICAgICAgIFwicG9zUHJlXCI6IFwiXCIsXG4gICAgICAgIFwicG9zU3VmXCI6IFwiXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwiZ1NpemVcIjogMyxcbiAgICAgICAgXCJsZ1NpemVcIjogMyxcbiAgICAgICAgXCJtYXhGcmFjXCI6IDIsXG4gICAgICAgIFwibWluRnJhY1wiOiAyLFxuICAgICAgICBcIm1pbkludFwiOiAxLFxuICAgICAgICBcIm5lZ1ByZVwiOiBcIi1cXHUwMGE0XCIsXG4gICAgICAgIFwibmVnU3VmXCI6IFwiXCIsXG4gICAgICAgIFwicG9zUHJlXCI6IFwiXFx1MDBhNFwiLFxuICAgICAgICBcInBvc1N1ZlwiOiBcIlwiXG4gICAgICB9XG4gICAgXVxuICB9LFxuICBcImlkXCI6IFwiZW4tdXNcIixcbiAgXCJsb2NhbGVJRFwiOiBcImVuX1VTXCIsXG4gIFwicGx1cmFsQ2F0XCI6IGZ1bmN0aW9uKG4sIG9wdF9wcmVjaXNpb24pIHsgIHZhciBpID0gbiB8IDA7ICB2YXIgdmYgPSBnZXRWRihuLCBvcHRfcHJlY2lzaW9uKTsgIGlmIChpID09IDEgJiYgdmYudiA9PSAwKSB7ICAgIHJldHVybiBQTFVSQUxfQ0FURUdPUlkuT05FOyAgfSAgcmV0dXJuIFBMVVJBTF9DQVRFR09SWS5PVEhFUjt9XG59KTtcbn1dKTtcblxuICBqcUxpdGUoZnVuY3Rpb24oKSB7XG4gICAgYW5ndWxhckluaXQod2luZG93LmRvY3VtZW50LCBib290c3RyYXApO1xuICB9KTtcblxufSkod2luZG93KTtcblxuIXdpbmRvdy5hbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSAmJiB3aW5kb3cuYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmhlYWQpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5AY2hhcnNldCBcIlVURi04XCI7W25nXFxcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSl7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fW5nXFxcXDpmb3Jte2Rpc3BsYXk6YmxvY2s7fS5uZy1hbmltYXRlLXNoaW17dmlzaWJpbGl0eTpoaWRkZW47fS5uZy1hbmNob3J7cG9zaXRpb246YWJzb2x1dGU7fTwvc3R5bGU+Jyk7IiwiLyoqXG4gKiBTdGF0ZS1iYXNlZCByb3V0aW5nIGZvciBBbmd1bGFySlMgMS54XG4gKiBUaGlzIGJ1bmRsZSByZXF1aXJlcyB0aGUgdWktcm91dGVyLWNvcmUuanMgYnVuZGxlIGZyb20gdGhlIEB1aXJvdXRlci9jb3JlIHBhY2thZ2UuXG4gKiBAdmVyc2lvbiB2MS4wLjE5XG4gKiBAbGluayBodHRwczovL3VpLXJvdXRlci5naXRodWIuaW9cbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlLCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnYW5ndWxhcicpLCByZXF1aXJlKCdAdWlyb3V0ZXIvY29yZScpKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cycsICdhbmd1bGFyJywgJ0B1aXJvdXRlci9jb3JlJ10sIGZhY3RvcnkpIDpcbiAgICAoZmFjdG9yeSgoZ2xvYmFsWydAdWlyb3V0ZXIvYW5ndWxhcmpzJ10gPSB7fSksZ2xvYmFsLmFuZ3VsYXIsZ2xvYmFsWydAdWlyb3V0ZXIvY29yZSddKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cyxuZ19mcm9tX2ltcG9ydCxjb3JlKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBuZ19mcm9tX2dsb2JhbCA9IGFuZ3VsYXI7XG4gICAgdmFyIG5nID0gbmdfZnJvbV9pbXBvcnQgJiYgbmdfZnJvbV9pbXBvcnQubW9kdWxlID8gbmdfZnJvbV9pbXBvcnQgOiBuZ19mcm9tX2dsb2JhbDtcblxuICAgIGZ1bmN0aW9uIGdldE5nMVZpZXdDb25maWdGYWN0b3J5KCkge1xuICAgICAgICB2YXIgdGVtcGxhdGVGYWN0b3J5ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCB2aWV3KSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZUZhY3RvcnkgPSB0ZW1wbGF0ZUZhY3RvcnkgfHwgY29yZS5zZXJ2aWNlcy4kaW5qZWN0b3IuZ2V0KCckdGVtcGxhdGVGYWN0b3J5Jyk7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBOZzFWaWV3Q29uZmlnKHBhdGgsIHZpZXcsIHRlbXBsYXRlRmFjdG9yeSldO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgaGFzQW55S2V5ID0gZnVuY3Rpb24gKGtleXMsIG9iaikgeyByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiBhY2MgfHwgY29yZS5pc0RlZmluZWQob2JqW2tleV0pOyB9LCBmYWxzZSk7IH07XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIFtbU3RhdGVCdWlsZGVyLmJ1aWxkZXJdXSBmdW5jdGlvbiBmb3IgYW5ndWxhcjEgYHZpZXdzYC5cbiAgICAgKlxuICAgICAqIFdoZW4gdGhlIFtbU3RhdGVCdWlsZGVyXV0gYnVpbGRzIGEgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCBmcm9tIGEgcmF3IFtbU3RhdGVEZWNsYXJhdGlvbl1dLCB0aGlzIGJ1aWxkZXJcbiAgICAgKiBoYW5kbGVzIHRoZSBgdmlld3NgIHByb3BlcnR5IHdpdGggbG9naWMgc3BlY2lmaWMgdG8gQHVpcm91dGVyL2FuZ3VsYXJqcyAobmcxKS5cbiAgICAgKlxuICAgICAqIElmIG5vIGB2aWV3czoge31gIHByb3BlcnR5IGV4aXN0cyBvbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoZW4gaXQgY3JlYXRlcyB0aGUgYHZpZXdzYCBvYmplY3RcbiAgICAgKiBhbmQgYXBwbGllcyB0aGUgc3RhdGUtbGV2ZWwgY29uZmlndXJhdGlvbiB0byBhIHZpZXcgbmFtZWQgYCRkZWZhdWx0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBuZzFWaWV3c0J1aWxkZXIoc3RhdGUpIHtcbiAgICAgICAgLy8gRG8gbm90IHByb2Nlc3Mgcm9vdCBzdGF0ZVxuICAgICAgICBpZiAoIXN0YXRlLnBhcmVudClcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgdmFyIHRwbEtleXMgPSBbJ3RlbXBsYXRlUHJvdmlkZXInLCAndGVtcGxhdGVVcmwnLCAndGVtcGxhdGUnLCAnbm90aWZ5JywgJ2FzeW5jJ10sIGN0cmxLZXlzID0gWydjb250cm9sbGVyJywgJ2NvbnRyb2xsZXJQcm92aWRlcicsICdjb250cm9sbGVyQXMnLCAncmVzb2x2ZUFzJ10sIGNvbXBLZXlzID0gWydjb21wb25lbnQnLCAnYmluZGluZ3MnLCAnY29tcG9uZW50UHJvdmlkZXInXSwgbm9uQ29tcEtleXMgPSB0cGxLZXlzLmNvbmNhdChjdHJsS2V5cyksIGFsbFZpZXdLZXlzID0gY29tcEtleXMuY29uY2F0KG5vbkNvbXBLZXlzKTtcbiAgICAgICAgLy8gRG8gbm90IGFsbG93IGEgc3RhdGUgdG8gaGF2ZSBib3RoIHN0YXRlLWxldmVsIHByb3BzIGFuZCBhbHNvIGEgYHZpZXdzOiB7fWAgcHJvcGVydHkuXG4gICAgICAgIC8vIEEgc3RhdGUgd2l0aG91dCBhIGB2aWV3czoge31gIHByb3BlcnR5IGNhbiBkZWNsYXJlIHByb3BlcnRpZXMgZm9yIHRoZSBgJGRlZmF1bHRgIHZpZXcgYXMgcHJvcGVydGllcyBvZiB0aGUgc3RhdGUuXG4gICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBgJGRlZmF1bHRgIGFwcHJvYWNoIHNob3VsZCBub3QgYmUgbWl4ZWQgd2l0aCBhIHNlcGFyYXRlIGB2aWV3czogYCBibG9jay5cbiAgICAgICAgaWYgKGNvcmUuaXNEZWZpbmVkKHN0YXRlLnZpZXdzKSAmJiBoYXNBbnlLZXkoYWxsVmlld0tleXMsIHN0YXRlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3RhdGUgJ1wiICsgc3RhdGUubmFtZSArIFwiJyBoYXMgYSAndmlld3MnIG9iamVjdC4gXCIgK1xuICAgICAgICAgICAgICAgIFwiSXQgY2Fubm90IGFsc28gaGF2ZSBcXFwidmlldyBwcm9wZXJ0aWVzXFxcIiBhdCB0aGUgc3RhdGUgbGV2ZWwuICBcIiArXG4gICAgICAgICAgICAgICAgXCJNb3ZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBpbnRvIGEgdmlldyAoaW4gdGhlICd2aWV3cycgb2JqZWN0KTogXCIgK1xuICAgICAgICAgICAgICAgIChcIiBcIiArIGFsbFZpZXdLZXlzLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBjb3JlLmlzRGVmaW5lZChzdGF0ZVtrZXldKTsgfSkuam9pbignLCAnKSkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2aWV3cyA9IHt9LCB2aWV3c09iamVjdCA9IHN0YXRlLnZpZXdzIHx8IHsgJGRlZmF1bHQ6IGNvcmUucGljayhzdGF0ZSwgYWxsVmlld0tleXMpIH07XG4gICAgICAgIGNvcmUuZm9yRWFjaCh2aWV3c09iamVjdCwgZnVuY3Rpb24gKGNvbmZpZywgbmFtZSkge1xuICAgICAgICAgICAgLy8gQWNjb3VudCBmb3Igdmlld3M6IHsgXCJcIjogeyB0ZW1wbGF0ZS4uLiB9IH1cbiAgICAgICAgICAgIG5hbWUgPSBuYW1lIHx8ICckZGVmYXVsdCc7XG4gICAgICAgICAgICAvLyBBY2NvdW50IGZvciB2aWV3czogeyBoZWFkZXI6IFwiaGVhZGVyQ29tcG9uZW50XCIgfVxuICAgICAgICAgICAgaWYgKGNvcmUuaXNTdHJpbmcoY29uZmlnKSlcbiAgICAgICAgICAgICAgICBjb25maWcgPSB7IGNvbXBvbmVudDogY29uZmlnIH07XG4gICAgICAgICAgICAvLyBNYWtlIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBjb25maWcgb2JqZWN0XG4gICAgICAgICAgICBjb25maWcgPSBjb3JlLmV4dGVuZCh7fSwgY29uZmlnKTtcbiAgICAgICAgICAgIC8vIERvIG5vdCBhbGxvdyBhIHZpZXcgdG8gbWl4IHByb3BzIGZvciBjb21wb25lbnQtc3R5bGUgdmlldyB3aXRoIHByb3BzIGZvciB0ZW1wbGF0ZS9jb250cm9sbGVyLXN0eWxlIHZpZXdcbiAgICAgICAgICAgIGlmIChoYXNBbnlLZXkoY29tcEtleXMsIGNvbmZpZykgJiYgaGFzQW55S2V5KG5vbkNvbXBLZXlzLCBjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNvbWJpbmU6IFwiICsgY29tcEtleXMuam9pbignfCcpICsgXCIgd2l0aDogXCIgKyBub25Db21wS2V5cy5qb2luKCd8JykgKyBcIiBpbiBzdGF0ZXZpZXc6ICdcIiArIG5hbWUgKyBcIkBcIiArIHN0YXRlLm5hbWUgKyBcIidcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25maWcucmVzb2x2ZUFzID0gY29uZmlnLnJlc29sdmVBcyB8fCAnJHJlc29sdmUnO1xuICAgICAgICAgICAgY29uZmlnLiR0eXBlID0gJ25nMSc7XG4gICAgICAgICAgICBjb25maWcuJGNvbnRleHQgPSBzdGF0ZTtcbiAgICAgICAgICAgIGNvbmZpZy4kbmFtZSA9IG5hbWU7XG4gICAgICAgICAgICB2YXIgbm9ybWFsaXplZCA9IGNvcmUuVmlld1NlcnZpY2Uubm9ybWFsaXplVUlWaWV3VGFyZ2V0KGNvbmZpZy4kY29udGV4dCwgY29uZmlnLiRuYW1lKTtcbiAgICAgICAgICAgIGNvbmZpZy4kdWlWaWV3TmFtZSA9IG5vcm1hbGl6ZWQudWlWaWV3TmFtZTtcbiAgICAgICAgICAgIGNvbmZpZy4kdWlWaWV3Q29udGV4dEFuY2hvciA9IG5vcm1hbGl6ZWQudWlWaWV3Q29udGV4dEFuY2hvcjtcbiAgICAgICAgICAgIHZpZXdzW25hbWVdID0gY29uZmlnO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZpZXdzO1xuICAgIH1cbiAgICB2YXIgaWQgPSAwO1xuICAgIHZhciBOZzFWaWV3Q29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBOZzFWaWV3Q29uZmlnKHBhdGgsIHZpZXdEZWNsLCBmYWN0b3J5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgICAgIHRoaXMudmlld0RlY2wgPSB2aWV3RGVjbDtcbiAgICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgICAgICAgICB0aGlzLiRpZCA9IGlkKys7XG4gICAgICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICh1aVZpZXcsIGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgID8gX3RoaXMuZmFjdG9yeS5tYWtlQ29tcG9uZW50VGVtcGxhdGUodWlWaWV3LCBjb250ZXh0LCBfdGhpcy5jb21wb25lbnQsIF90aGlzLnZpZXdEZWNsLmJpbmRpbmdzKVxuICAgICAgICAgICAgICAgICAgICA6IF90aGlzLnRlbXBsYXRlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBOZzFWaWV3Q29uZmlnLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkcSA9IGNvcmUuc2VydmljZXMuJHE7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBjb3JlLlJlc29sdmVDb250ZXh0KHRoaXMucGF0aCk7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXRoLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBub2RlKSB7IHJldHVybiBjb3JlLmV4dGVuZChhY2MsIG5vZGUucGFyYW1WYWx1ZXMpOyB9LCB7fSk7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICRxLndoZW4odGhpcy5mYWN0b3J5LmZyb21Db25maWcodGhpcy52aWV3RGVjbCwgcGFyYW1zLCBjb250ZXh0KSksXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJHEud2hlbih0aGlzLmdldENvbnRyb2xsZXIoY29udGV4dCkpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiAkcS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBjb3JlLnRyYWNlLnRyYWNlVmlld1NlcnZpY2VFdmVudCgnTG9hZGVkJywgX3RoaXMpO1xuICAgICAgICAgICAgICAgIF90aGlzLmNvbnRyb2xsZXIgPSByZXN1bHRzLmNvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgY29yZS5leHRlbmQoX3RoaXMsIHJlc3VsdHMudGVtcGxhdGUpOyAvLyBFaXRoZXIgeyB0ZW1wbGF0ZTogXCJ0cGxcIiB9IG9yIHsgY29tcG9uZW50OiBcImNtcE5hbWVcIiB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBjb250cm9sbGVyIGZvciBhIHZpZXcgY29uZmlndXJhdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufFByb21pc2UuPEZ1bmN0aW9uPn0gUmV0dXJucyBhIGNvbnRyb2xsZXIsIG9yIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgY29udHJvbGxlci5cbiAgICAgICAgICovXG4gICAgICAgIE5nMVZpZXdDb25maWcucHJvdG90eXBlLmdldENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcy52aWV3RGVjbC5jb250cm9sbGVyUHJvdmlkZXI7XG4gICAgICAgICAgICBpZiAoIWNvcmUuaXNJbmplY3RhYmxlKHByb3ZpZGVyKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3RGVjbC5jb250cm9sbGVyO1xuICAgICAgICAgICAgdmFyIGRlcHMgPSBjb3JlLnNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShwcm92aWRlcik7XG4gICAgICAgICAgICB2YXIgcHJvdmlkZXJGbiA9IGNvcmUuaXNBcnJheShwcm92aWRlcikgPyBjb3JlLnRhaWwocHJvdmlkZXIpIDogcHJvdmlkZXI7XG4gICAgICAgICAgICB2YXIgcmVzb2x2YWJsZSA9IG5ldyBjb3JlLlJlc29sdmFibGUoJycsIHByb3ZpZGVyRm4sIGRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0KGNvbnRleHQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTmcxVmlld0NvbmZpZztcbiAgICB9KCkpO1xuXG4gICAgLyoqIEBtb2R1bGUgdmlldyAqL1xuICAgIC8qKlxuICAgICAqIFNlcnZpY2Ugd2hpY2ggbWFuYWdlcyBsb2FkaW5nIG9mIHRlbXBsYXRlcyBmcm9tIGEgVmlld0NvbmZpZy5cbiAgICAgKi9cbiAgICB2YXIgVGVtcGxhdGVGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBUZW1wbGF0ZUZhY3RvcnkoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fdXNlSHR0cCA9IG5nLnZlcnNpb24ubWlub3IgPCAzO1xuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy4kZ2V0ID0gW1xuICAgICAgICAgICAgICAgICckaHR0cCcsXG4gICAgICAgICAgICAgICAgJyR0ZW1wbGF0ZUNhY2hlJyxcbiAgICAgICAgICAgICAgICAnJGluamVjdG9yJyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoJGh0dHAsICR0ZW1wbGF0ZUNhY2hlLCAkaW5qZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHRlbXBsYXRlUmVxdWVzdCA9ICRpbmplY3Rvci5oYXMgJiYgJGluamVjdG9yLmhhcygnJHRlbXBsYXRlUmVxdWVzdCcpICYmICRpbmplY3Rvci5nZXQoJyR0ZW1wbGF0ZVJlcXVlc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGh0dHAgPSAkaHR0cDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHRlbXBsYXRlQ2FjaGUgPSAkdGVtcGxhdGVDYWNoZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUudXNlSHR0cFNlcnZpY2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3VzZUh0dHAgPSB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSB0ZW1wbGF0ZSBmcm9tIGEgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBjb25maWcgQ29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHdoaWNoIHRvIGxvYWQgYSB0ZW1wbGF0ZS5cbiAgICAgICAgICogVGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGFyZSBzZWFyY2ggaW4gdGhlIHNwZWNpZmllZCBvcmRlciwgYW5kIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgICogdGhhdCBpcyBkZWZpbmVkIGlzIHVzZWQgdG8gY3JlYXRlIHRoZSB0ZW1wbGF0ZTpcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHBhcmFtcyAgUGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAgICAgICAgICogQHBhcmFtIGNvbnRleHQgVGhlIHJlc29sdmUgY29udGV4dCBhc3NvY2lhdGVkIHdpdGggdGhlIHRlbXBsYXRlJ3Mgdmlld1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd8b2JqZWN0fSAgVGhlIHRlbXBsYXRlIGh0bWwgYXMgYSBzdHJpbmcsIG9yIGEgcHJvbWlzZSBmb3JcbiAgICAgICAgICogdGhhdCBzdHJpbmcsb3IgYG51bGxgIGlmIG5vIHRlbXBsYXRlIGlzIGNvbmZpZ3VyZWQuXG4gICAgICAgICAqL1xuICAgICAgICBUZW1wbGF0ZUZhY3RvcnkucHJvdG90eXBlLmZyb21Db25maWcgPSBmdW5jdGlvbiAoY29uZmlnLCBwYXJhbXMsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VGVtcGxhdGUgPSAnPHVpLXZpZXc+PC91aS12aWV3Pic7XG4gICAgICAgICAgICB2YXIgYXNUZW1wbGF0ZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIGNvcmUuc2VydmljZXMuJHEud2hlbihyZXN1bHQpLnRoZW4oZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gKHsgdGVtcGxhdGU6IHN0ciB9KTsgfSk7IH07XG4gICAgICAgICAgICB2YXIgYXNDb21wb25lbnQgPSBmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiBjb3JlLnNlcnZpY2VzLiRxLndoZW4ocmVzdWx0KS50aGVuKGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuICh7IGNvbXBvbmVudDogc3RyIH0pOyB9KTsgfTtcbiAgICAgICAgICAgIHJldHVybiBjb3JlLmlzRGVmaW5lZChjb25maWcudGVtcGxhdGUpXG4gICAgICAgICAgICAgICAgPyBhc1RlbXBsYXRlKHRoaXMuZnJvbVN0cmluZyhjb25maWcudGVtcGxhdGUsIHBhcmFtcykpXG4gICAgICAgICAgICAgICAgOiBjb3JlLmlzRGVmaW5lZChjb25maWcudGVtcGxhdGVVcmwpXG4gICAgICAgICAgICAgICAgICAgID8gYXNUZW1wbGF0ZSh0aGlzLmZyb21VcmwoY29uZmlnLnRlbXBsYXRlVXJsLCBwYXJhbXMpKVxuICAgICAgICAgICAgICAgICAgICA6IGNvcmUuaXNEZWZpbmVkKGNvbmZpZy50ZW1wbGF0ZVByb3ZpZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBhc1RlbXBsYXRlKHRoaXMuZnJvbVByb3ZpZGVyKGNvbmZpZy50ZW1wbGF0ZVByb3ZpZGVyLCBwYXJhbXMsIGNvbnRleHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb3JlLmlzRGVmaW5lZChjb25maWcuY29tcG9uZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXNDb21wb25lbnQoY29uZmlnLmNvbXBvbmVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvcmUuaXNEZWZpbmVkKGNvbmZpZy5jb21wb25lbnRQcm92aWRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhc0NvbXBvbmVudCh0aGlzLmZyb21Db21wb25lbnRQcm92aWRlcihjb25maWcuY29tcG9uZW50UHJvdmlkZXIsIHBhcmFtcywgY29udGV4dCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYXNUZW1wbGF0ZShkZWZhdWx0VGVtcGxhdGUpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGZyb20gYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiByZXR1cm5pbmcgYSBzdHJpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB0ZW1wbGF0ZSBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nLlxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zIFBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgdGVtcGxhdGUgZnVuY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ3xvYmplY3R9IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2UgZm9yIHRoYXRcbiAgICAgICAgICogc3RyaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3JlLmlzRnVuY3Rpb24odGVtcGxhdGUpID8gdGVtcGxhdGUocGFyYW1zKSA6IHRlbXBsYXRlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZHMgYSB0ZW1wbGF0ZSBmcm9tIHRoZSBhIFVSTCB2aWEgYCRodHRwYCBhbmQgYCR0ZW1wbGF0ZUNhY2hlYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8RnVuY3Rpb259IHVybCB1cmwgb2YgdGhlIHRlbXBsYXRlIHRvIGxvYWQsIG9yIGEgZnVuY3Rpb25cbiAgICAgICAgICogdGhhdCByZXR1cm5zIGEgdXJsLlxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIFBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgdXJsIGZ1bmN0aW9uLlxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd8UHJvbWlzZS48c3RyaW5nPn0gVGhlIHRlbXBsYXRlIGh0bWwgYXMgYSBzdHJpbmcsIG9yIGEgcHJvbWlzZVxuICAgICAgICAgKiBmb3IgdGhhdCBzdHJpbmcuXG4gICAgICAgICAqL1xuICAgICAgICBUZW1wbGF0ZUZhY3RvcnkucHJvdG90eXBlLmZyb21VcmwgPSBmdW5jdGlvbiAodXJsLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChjb3JlLmlzRnVuY3Rpb24odXJsKSlcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwocGFyYW1zKTtcbiAgICAgICAgICAgIGlmICh1cmwgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLl91c2VIdHRwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHBcbiAgICAgICAgICAgICAgICAgICAgLmdldCh1cmwsIHsgY2FjaGU6IHRoaXMuJHRlbXBsYXRlQ2FjaGUsIGhlYWRlcnM6IHsgQWNjZXB0OiAndGV4dC9odG1sJyB9IH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLiR0ZW1wbGF0ZVJlcXVlc3QodXJsKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSB0ZW1wbGF0ZSBieSBpbnZva2luZyBhbiBpbmplY3RhYmxlIHByb3ZpZGVyIGZ1bmN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcHJvdmlkZXIgRnVuY3Rpb24gdG8gaW52b2tlIHZpYSBgbG9jYWxzYFxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbmplY3RGbiBhIGZ1bmN0aW9uIHVzZWQgdG8gaW52b2tlIHRoZSB0ZW1wbGF0ZSBwcm92aWRlclxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd8UHJvbWlzZS48c3RyaW5nPn0gVGhlIHRlbXBsYXRlIGh0bWwgYXMgYSBzdHJpbmcsIG9yIGEgcHJvbWlzZVxuICAgICAgICAgKiBmb3IgdGhhdCBzdHJpbmcuXG4gICAgICAgICAqL1xuICAgICAgICBUZW1wbGF0ZUZhY3RvcnkucHJvdG90eXBlLmZyb21Qcm92aWRlciA9IGZ1bmN0aW9uIChwcm92aWRlciwgcGFyYW1zLCBjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgZGVwcyA9IGNvcmUuc2VydmljZXMuJGluamVjdG9yLmFubm90YXRlKHByb3ZpZGVyKTtcbiAgICAgICAgICAgIHZhciBwcm92aWRlckZuID0gY29yZS5pc0FycmF5KHByb3ZpZGVyKSA/IGNvcmUudGFpbChwcm92aWRlcikgOiBwcm92aWRlcjtcbiAgICAgICAgICAgIHZhciByZXNvbHZhYmxlID0gbmV3IGNvcmUuUmVzb2x2YWJsZSgnJywgcHJvdmlkZXJGbiwgZGVwcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQoY29udGV4dCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgY29tcG9uZW50J3MgdGVtcGxhdGUgYnkgaW52b2tpbmcgYW4gaW5qZWN0YWJsZSBwcm92aWRlciBmdW5jdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHByb3ZpZGVyIEZ1bmN0aW9uIHRvIGludm9rZSB2aWEgYGxvY2Fsc2BcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW5qZWN0Rm4gYSBmdW5jdGlvbiB1c2VkIHRvIGludm9rZSB0aGUgdGVtcGxhdGUgcHJvdmlkZXJcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZzogXCI8Y29tcG9uZW50LW5hbWUgaW5wdXQxPSc6OiRyZXNvbHZlLmZvbyc+PC9jb21wb25lbnQtbmFtZT5cIi5cbiAgICAgICAgICovXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUuZnJvbUNvbXBvbmVudFByb3ZpZGVyID0gZnVuY3Rpb24gKHByb3ZpZGVyLCBwYXJhbXMsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciBkZXBzID0gY29yZS5zZXJ2aWNlcy4kaW5qZWN0b3IuYW5ub3RhdGUocHJvdmlkZXIpO1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyRm4gPSBjb3JlLmlzQXJyYXkocHJvdmlkZXIpID8gY29yZS50YWlsKHByb3ZpZGVyKSA6IHByb3ZpZGVyO1xuICAgICAgICAgICAgdmFyIHJlc29sdmFibGUgPSBuZXcgY29yZS5SZXNvbHZhYmxlKCcnLCBwcm92aWRlckZuLCBkZXBzKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldChjb250ZXh0KTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSB0ZW1wbGF0ZSBmcm9tIGEgY29tcG9uZW50J3MgbmFtZVxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGltcGxlbWVudHMgcm91dGUtdG8tY29tcG9uZW50LlxuICAgICAgICAgKiBJdCB3b3JrcyBieSByZXRyaWV2aW5nIHRoZSBjb21wb25lbnQgKGRpcmVjdGl2ZSkgbWV0YWRhdGEgZnJvbSB0aGUgaW5qZWN0b3IuXG4gICAgICAgICAqIEl0IGFuYWx5c2VzIHRoZSBjb21wb25lbnQncyBiaW5kaW5ncywgdGhlbiBjb25zdHJ1Y3RzIGEgdGVtcGxhdGUgdGhhdCBpbnN0YW50aWF0ZXMgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICogVGhlIHRlbXBsYXRlIHdpcmVzIGlucHV0IGFuZCBvdXRwdXQgYmluZGluZ3MgdG8gcmVzb2x2ZXMgb3IgZnJvbSB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHVpVmlldyB7b2JqZWN0fSBUaGUgcGFyZW50IHVpLXZpZXcgKGZvciBiaW5kaW5nIG91dHB1dHMgdG8gY2FsbGJhY2tzKVxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dCBUaGUgUmVzb2x2ZUNvbnRleHQgKGZvciBiaW5kaW5nIG91dHB1dHMgdG8gY2FsbGJhY2tzIHJldHVybmVkIGZyb20gcmVzb2x2ZXMpXG4gICAgICAgICAqIEBwYXJhbSBjb21wb25lbnQge3N0cmluZ30gQ29tcG9uZW50J3MgbmFtZSBpbiBjYW1lbCBjYXNlLlxuICAgICAgICAgKiBAcGFyYW0gYmluZGluZ3MgQW4gb2JqZWN0IGRlZmluaW5nIHRoZSBjb21wb25lbnQncyBiaW5kaW5nczoge2ZvbzogJzwnfVxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZW1wbGF0ZSBhcyBhIHN0cmluZzogXCI8Y29tcG9uZW50LW5hbWUgaW5wdXQxPSc6OiRyZXNvbHZlLmZvbyc+PC9jb21wb25lbnQtbmFtZT5cIi5cbiAgICAgICAgICovXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUubWFrZUNvbXBvbmVudFRlbXBsYXRlID0gZnVuY3Rpb24gKHVpVmlldywgY29udGV4dCwgY29tcG9uZW50LCBiaW5kaW5ncykge1xuICAgICAgICAgICAgYmluZGluZ3MgPSBiaW5kaW5ncyB8fCB7fTtcbiAgICAgICAgICAgIC8vIEJpbmQgb25jZSBwcmVmaXhcbiAgICAgICAgICAgIHZhciBwcmVmaXggPSBuZy52ZXJzaW9uLm1pbm9yID49IDMgPyAnOjonIDogJyc7XG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRvIGtlYm9iIG5hbWUuIEFkZCB4LSBwcmVmaXggaWYgdGhlIHN0cmluZyBzdGFydHMgd2l0aCBgeC1gIG9yIGBkYXRhLWBcbiAgICAgICAgICAgIHZhciBrZWJvYiA9IGZ1bmN0aW9uIChjYW1lbENhc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIga2Vib2JlZCA9IGNvcmUua2Vib2JTdHJpbmcoY2FtZWxDYXNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gL14oeHxkYXRhKS0vLmV4ZWMoa2Vib2JlZCkgPyBcIngtXCIgKyBrZWJvYmVkIDoga2Vib2JlZDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlVHBsID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBpbnB1dC5uYW1lLCB0eXBlID0gaW5wdXQudHlwZTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0ck5hbWUgPSBrZWJvYihuYW1lKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdWktdmlldyBoYXMgYW4gYXR0cmlidXRlIHdoaWNoIG1hdGNoZXMgYSBiaW5kaW5nIG9uIHRoZSByb3V0ZWQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgLy8gdGhlbiBwYXNzIHRoYXQgYXR0cmlidXRlIHRocm91Z2ggdG8gdGhlIHJvdXRlZCBjb21wb25lbnQgdGVtcGxhdGUuXG4gICAgICAgICAgICAgICAgLy8gUHJlZmVyIHVpLXZpZXcgd2lyZWQgbWFwcGluZ3MgdG8gcmVzb2x2ZSBkYXRhLCB1bmxlc3MgdGhlIHJlc29sdmUgd2FzIGV4cGxpY2l0bHkgYm91bmQgdXNpbmcgYGJpbmRpbmdzOmBcbiAgICAgICAgICAgICAgICBpZiAodWlWaWV3LmF0dHIoYXR0ck5hbWUpICYmICFiaW5kaW5nc1tuYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJOYW1lICsgXCI9J1wiICsgdWlWaWV3LmF0dHIoYXR0ck5hbWUpICsgXCInXCI7XG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdmVOYW1lID0gYmluZGluZ3NbbmFtZV0gfHwgbmFtZTtcbiAgICAgICAgICAgICAgICAvLyBQcmUtZXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gZm9yIFwiQFwiIGJpbmRpbmdzIGJ5IGVuY2xvc2luZyBpbiB7eyB9fVxuICAgICAgICAgICAgICAgIC8vIHNvbWUtYXR0cj1cInt7IDo6JHJlc29sdmUuc29tZVJlc29sdmVOYW1lIH19XCJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0AnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0ck5hbWUgKyBcIj0ne3tcIiArIHByZWZpeCArIFwiJHJlc29sdmUuXCIgKyByZXNvbHZlTmFtZSArIFwifX0nXCI7XG4gICAgICAgICAgICAgICAgLy8gV2lyZSBcIiZcIiBjYWxsYmFja3MgdG8gcmVzb2x2ZXMgdGhhdCByZXR1cm4gYSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgcmVzdWx0IG9mIHRoZSByZXNvbHZlIChzaG91bGQgYmUgYSBmdW5jdGlvbikgYW5kIGFubm90YXRlIGl0IHRvIGdldCBpdHMgYXJndW1lbnRzLlxuICAgICAgICAgICAgICAgIC8vIHNvbWUtYXR0cj1cIiRyZXNvbHZlLnNvbWVSZXNvbHZlUmVzdWx0TmFtZShmb28sIGJhcilcIlxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnJicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IGNvbnRleHQuZ2V0UmVzb2x2YWJsZShyZXNvbHZlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHJlcyAmJiByZXMuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSAoZm4gJiYgY29yZS5zZXJ2aWNlcy4kaW5qZWN0b3IuYW5ub3RhdGUoZm4pKSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3VudCBmb3IgYXJyYXkgc3R5bGUgaW5qZWN0aW9uLCBpLmUuLCBbJ2ZvbycsIGZ1bmN0aW9uKGZvbykge31dXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJheUlkeFN0ciA9IGNvcmUuaXNBcnJheShmbikgPyBcIltcIiArIChmbi5sZW5ndGggLSAxKSArIFwiXVwiIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRyTmFtZSArIFwiPSckcmVzb2x2ZS5cIiArIHJlc29sdmVOYW1lICsgYXJyYXlJZHhTdHIgKyBcIihcIiArIGFyZ3Muam9pbignLCcpICsgXCIpJ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzb21lLWF0dHI9XCI6OiRyZXNvbHZlLnNvbWVSZXNvbHZlTmFtZVwiXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJOYW1lICsgXCI9J1wiICsgcHJlZml4ICsgXCIkcmVzb2x2ZS5cIiArIHJlc29sdmVOYW1lICsgXCInXCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGF0dHJzID0gZ2V0Q29tcG9uZW50QmluZGluZ3MoY29tcG9uZW50KVxuICAgICAgICAgICAgICAgIC5tYXAoYXR0cmlidXRlVHBsKVxuICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XG4gICAgICAgICAgICB2YXIga2Vib2JOYW1lID0ga2Vib2IoY29tcG9uZW50KTtcbiAgICAgICAgICAgIHJldHVybiBcIjxcIiArIGtlYm9iTmFtZSArIFwiIFwiICsgYXR0cnMgKyBcIj48L1wiICsga2Vib2JOYW1lICsgXCI+XCI7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUZW1wbGF0ZUZhY3Rvcnk7XG4gICAgfSgpKTtcbiAgICAvLyBHZXRzIGFsbCB0aGUgZGlyZWN0aXZlKHMpJyBpbnB1dHMgKCdAJywgJz0nLCBhbmQgJzwnKSBhbmQgb3V0cHV0cyAoJyYnKVxuICAgIGZ1bmN0aW9uIGdldENvbXBvbmVudEJpbmRpbmdzKG5hbWUpIHtcbiAgICAgICAgdmFyIGNtcERlZnMgPSBjb3JlLnNlcnZpY2VzLiRpbmplY3Rvci5nZXQobmFtZSArICdEaXJlY3RpdmUnKTsgLy8gY291bGQgYmUgbXVsdGlwbGVcbiAgICAgICAgaWYgKCFjbXBEZWZzIHx8ICFjbXBEZWZzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBmaW5kIGNvbXBvbmVudCBuYW1lZCAnXCIgKyBuYW1lICsgXCInXCIpO1xuICAgICAgICByZXR1cm4gY21wRGVmcy5tYXAoZ2V0QmluZGluZ3MpLnJlZHVjZShjb3JlLnVubmVzdFIsIFtdKTtcbiAgICB9XG4gICAgLy8gR2l2ZW4gYSBkaXJlY3RpdmUgZGVmaW5pdGlvbiwgZmluZCBpdHMgb2JqZWN0IGlucHV0IGF0dHJpYnV0ZXNcbiAgICAvLyBVc2UgZGlmZmVyZW50IHByb3BlcnRpZXMsIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBkaXJlY3RpdmUgKGNvbXBvbmVudCwgYmluZFRvQ29udHJvbGxlciwgbm9ybWFsKVxuICAgIHZhciBnZXRCaW5kaW5ncyA9IGZ1bmN0aW9uIChkZWYpIHtcbiAgICAgICAgaWYgKGNvcmUuaXNPYmplY3QoZGVmLmJpbmRUb0NvbnRyb2xsZXIpKVxuICAgICAgICAgICAgcmV0dXJuIHNjb3BlQmluZGluZ3MoZGVmLmJpbmRUb0NvbnRyb2xsZXIpO1xuICAgICAgICByZXR1cm4gc2NvcGVCaW5kaW5ncyhkZWYuc2NvcGUpO1xuICAgIH07XG4gICAgLy8gZm9yIG5nIDEuMiBzdHlsZSwgcHJvY2VzcyB0aGUgc2NvcGU6IHsgaW5wdXQ6IFwiPWZvb1wiIH1cbiAgICAvLyBmb3IgbmcgMS4zIHRocm91Z2ggbmcgMS41LCBwcm9jZXNzIHRoZSBjb21wb25lbnQncyBiaW5kVG9Db250cm9sbGVyOiB7IGlucHV0OiBcIj1mb29cIiB9IG9iamVjdFxuICAgIHZhciBzY29wZUJpbmRpbmdzID0gZnVuY3Rpb24gKGJpbmRpbmdzT2JqKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhiaW5kaW5nc09iaiB8fCB7fSlcbiAgICAgICAgICAgIC8vIFsgJ2lucHV0JywgWyAnPWZvbycsICc9JywgJ2ZvbycgXSBdXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIFtrZXksIC9eKFs9PEAmXSlbP10/KC4qKS8uZXhlYyhiaW5kaW5nc09ialtrZXldKV07IH0pXG4gICAgICAgICAgICAvLyBza2lwIG1hbGZvcm1lZCB2YWx1ZXNcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHR1cGxlKSB7IHJldHVybiBjb3JlLmlzRGVmaW5lZCh0dXBsZSkgJiYgY29yZS5pc0FycmF5KHR1cGxlWzFdKTsgfSlcbiAgICAgICAgICAgIC8vIHsgbmFtZTogKCdmb28nIHx8ICdpbnB1dCcpLCB0eXBlOiAnPScgfVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodHVwbGUpIHsgcmV0dXJuICh7IG5hbWU6IHR1cGxlWzFdWzJdIHx8IHR1cGxlWzBdLCB0eXBlOiB0dXBsZVsxXVsxXSB9KTsgfSk7XG4gICAgfTtcblxuICAgIC8qKiBAbW9kdWxlIG5nMSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbiAgICAvKipcbiAgICAgKiBUaGUgQW5ndWxhciAxIGBTdGF0ZVByb3ZpZGVyYFxuICAgICAqXG4gICAgICogVGhlIGAkc3RhdGVQcm92aWRlcmAgd29ya3Mgc2ltaWxhciB0byBBbmd1bGFyJ3MgdjEgcm91dGVyLCBidXQgaXQgZm9jdXNlcyBwdXJlbHlcbiAgICAgKiBvbiBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEEgc3RhdGUgY29ycmVzcG9uZHMgdG8gYSBcInBsYWNlXCIgaW4gdGhlIGFwcGxpY2F0aW9uIGluIHRlcm1zIG9mIHRoZSBvdmVyYWxsIFVJIGFuZFxuICAgICAqIG5hdmlnYXRpb24uIEEgc3RhdGUgZGVzY3JpYmVzICh2aWEgdGhlIGNvbnRyb2xsZXIgLyB0ZW1wbGF0ZSAvIHZpZXcgcHJvcGVydGllcykgd2hhdFxuICAgICAqIHRoZSBVSSBsb29rcyBsaWtlIGFuZCBkb2VzIGF0IHRoYXQgcGxhY2UuXG4gICAgICpcbiAgICAgKiBTdGF0ZXMgb2Z0ZW4gaGF2ZSB0aGluZ3MgaW4gY29tbW9uLCBhbmQgdGhlIHByaW1hcnkgd2F5IG9mIGZhY3RvcmluZyBvdXQgdGhlc2VcbiAgICAgKiBjb21tb25hbGl0aWVzIGluIHRoaXMgbW9kZWwgaXMgdmlhIHRoZSBzdGF0ZSBoaWVyYXJjaHksIGkuZS4gcGFyZW50L2NoaWxkIHN0YXRlcyBha2FcbiAgICAgKiBuZXN0ZWQgc3RhdGVzLlxuICAgICAqXG4gICAgICogVGhlIGAkc3RhdGVQcm92aWRlcmAgcHJvdmlkZXMgaW50ZXJmYWNlcyB0byBkZWNsYXJlIHRoZXNlIHN0YXRlcyBmb3IgeW91ciBhcHAuXG4gICAgICovXG4gICAgdmFyIFN0YXRlUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFN0YXRlUHJvdmlkZXIoc3RhdGVSZWdpc3RyeSwgc3RhdGVTZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlUmVnaXN0cnkgPSBzdGF0ZVJlZ2lzdHJ5O1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVNlcnZpY2UgPSBzdGF0ZVNlcnZpY2U7XG4gICAgICAgICAgICBjb3JlLmNyZWF0ZVByb3h5RnVuY3Rpb25zKGNvcmUudmFsKFN0YXRlUHJvdmlkZXIucHJvdG90eXBlKSwgdGhpcywgY29yZS52YWwodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvcmF0ZXMgc3RhdGVzIHdoZW4gdGhleSBhcmUgcmVnaXN0ZXJlZFxuICAgICAgICAgKlxuICAgICAgICAgKiBBbGxvd3MgeW91IHRvIGV4dGVuZCAoY2FyZWZ1bGx5KSBvciBvdmVycmlkZSAoYXQgeW91ciBvd24gcGVyaWwpIHRoZVxuICAgICAgICAgKiBgc3RhdGVCdWlsZGVyYCBvYmplY3QgdXNlZCBpbnRlcm5hbGx5IGJ5IFtbU3RhdGVSZWdpc3RyeV1dLlxuICAgICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGFkZCBjdXN0b20gZnVuY3Rpb25hbGl0eSB0byB1aS1yb3V0ZXIsXG4gICAgICAgICAqIGZvciBleGFtcGxlIGluZmVycmluZyB0ZW1wbGF0ZVVybCBiYXNlZCBvbiB0aGUgc3RhdGUgbmFtZS5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiBwYXNzaW5nIG9ubHkgYSBuYW1lLCBpdCByZXR1cm5zIHRoZSBjdXJyZW50IChvcmlnaW5hbCBvciBkZWNvcmF0ZWQpIGJ1aWxkZXJcbiAgICAgICAgICogZnVuY3Rpb24gdGhhdCBtYXRjaGVzIGBuYW1lYC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGJ1aWxkZXIgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIGRlY29yYXRlZCBhcmUgbGlzdGVkIGJlbG93LiBUaG91Z2ggbm90IGFsbFxuICAgICAgICAgKiBuZWNlc3NhcmlseSBoYXZlIGEgZ29vZCB1c2UgY2FzZSBmb3IgZGVjb3JhdGlvbiwgdGhhdCBpcyB1cCB0byB5b3UgdG8gZGVjaWRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJbiBhZGRpdGlvbiwgdXNlcnMgY2FuIGF0dGFjaCBjdXN0b20gZGVjb3JhdG9ycywgd2hpY2ggd2lsbCBnZW5lcmF0ZSBuZXdcbiAgICAgICAgICogcHJvcGVydGllcyB3aXRoaW4gdGhlIHN0YXRlJ3MgaW50ZXJuYWwgZGVmaW5pdGlvbi4gVGhlcmUgaXMgY3VycmVudGx5IG5vIGNsZWFyXG4gICAgICAgICAqIHVzZS1jYXNlIGZvciB0aGlzIGJleW9uZCBhY2Nlc3NpbmcgaW50ZXJuYWwgc3RhdGVzIChpLmUuICRzdGF0ZS4kY3VycmVudCksXG4gICAgICAgICAqIGhvd2V2ZXIsIGV4cGVjdCB0aGlzIHRvIGJlY29tZSBpbmNyZWFzaW5nbHkgcmVsZXZhbnQgYXMgd2UgaW50cm9kdWNlIGFkZGl0aW9uYWxcbiAgICAgICAgICogbWV0YS1wcm9ncmFtbWluZyBmZWF0dXJlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogKipXYXJuaW5nKio6IERlY29yYXRvcnMgc2hvdWxkIG5vdCBiZSBpbnRlcmRlcGVuZGVudCBiZWNhdXNlIHRoZSBvcmRlciBvZlxuICAgICAgICAgKiBleGVjdXRpb24gb2YgdGhlIGJ1aWxkZXIgZnVuY3Rpb25zIGluIG5vbi1kZXRlcm1pbmlzdGljLiBCdWlsZGVyIGZ1bmN0aW9uc1xuICAgICAgICAgKiBzaG91bGQgb25seSBiZSBkZXBlbmRlbnQgb24gdGhlIHN0YXRlIGRlZmluaXRpb24gb2JqZWN0IGFuZCBzdXBlciBmdW5jdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICpcbiAgICAgICAgICogRXhpc3RpbmcgYnVpbGRlciBmdW5jdGlvbnMgYW5kIGN1cnJlbnQgcmV0dXJuIHZhbHVlczpcbiAgICAgICAgICpcbiAgICAgICAgICogLSAqKnBhcmVudCoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIHRoZSBwYXJlbnQgc3RhdGUgb2JqZWN0LlxuICAgICAgICAgKiAtICoqZGF0YSoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIHN0YXRlIGRhdGEsIGluY2x1ZGluZyBhbnkgaW5oZXJpdGVkIGRhdGEgdGhhdCBpcyBub3RcbiAgICAgICAgICogICBvdmVycmlkZGVuIGJ5IG93biB2YWx1ZXMgKGlmIGFueSkuXG4gICAgICAgICAqIC0gKip1cmwqKiBge29iamVjdH1gIC0gcmV0dXJucyBhIHtAbGluayB1aS5yb3V0ZXIudXRpbC50eXBlOlVybE1hdGNoZXIgVXJsTWF0Y2hlcn1cbiAgICAgICAgICogICBvciBgbnVsbGAuXG4gICAgICAgICAqIC0gKipuYXZpZ2FibGUqKiBge29iamVjdH1gIC0gcmV0dXJucyBjbG9zZXN0IGFuY2VzdG9yIHN0YXRlIHRoYXQgaGFzIGEgVVJMIChha2EgaXNcbiAgICAgICAgICogICBuYXZpZ2FibGUpLlxuICAgICAgICAgKiAtICoqcGFyYW1zKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGUgcGFyYW1zIHRoYXQgYXJlIGVuc3VyZWQgdG9cbiAgICAgICAgICogICBiZSBhIHN1cGVyLXNldCBvZiBwYXJlbnQncyBwYXJhbXMuXG4gICAgICAgICAqIC0gKip2aWV3cyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGEgdmlld3Mgb2JqZWN0IHdoZXJlIGVhY2gga2V5IGlzIGFuIGFic29sdXRlIHZpZXdcbiAgICAgICAgICogICBuYW1lIChpLmUuIFwidmlld05hbWVAc3RhdGVOYW1lXCIpIGFuZCBlYWNoIHZhbHVlIGlzIHRoZSBjb25maWcgb2JqZWN0XG4gICAgICAgICAqICAgKHRlbXBsYXRlLCBjb250cm9sbGVyKSBmb3IgdGhlIHZpZXcuIEV2ZW4gd2hlbiB5b3UgZG9uJ3QgdXNlIHRoZSB2aWV3cyBvYmplY3RcbiAgICAgICAgICogICBleHBsaWNpdGx5IG9uIGEgc3RhdGUgY29uZmlnLCBvbmUgaXMgc3RpbGwgY3JlYXRlZCBmb3IgeW91IGludGVybmFsbHkuXG4gICAgICAgICAqICAgU28gYnkgZGVjb3JhdGluZyB0aGlzIGJ1aWxkZXIgZnVuY3Rpb24geW91IGhhdmUgYWNjZXNzIHRvIGRlY29yYXRpbmcgdGVtcGxhdGVcbiAgICAgICAgICogICBhbmQgY29udHJvbGxlciBwcm9wZXJ0aWVzLlxuICAgICAgICAgKiAtICoqb3duUGFyYW1zKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gYXJyYXkgb2YgcGFyYW1zIHRoYXQgYmVsb25nIHRvIHRoZSBzdGF0ZSxcbiAgICAgICAgICogICBub3QgaW5jbHVkaW5nIGFueSBwYXJhbXMgZGVmaW5lZCBieSBhbmNlc3RvciBzdGF0ZXMuXG4gICAgICAgICAqIC0gKipwYXRoKiogYHtzdHJpbmd9YCAtIHJldHVybnMgdGhlIGZ1bGwgcGF0aCBmcm9tIHRoZSByb290IGRvd24gdG8gdGhpcyBzdGF0ZS5cbiAgICAgICAgICogICBOZWVkZWQgZm9yIHN0YXRlIGFjdGl2YXRpb24uXG4gICAgICAgICAqIC0gKippbmNsdWRlcyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGluY2x1ZGVzIGV2ZXJ5IHN0YXRlIHRoYXRcbiAgICAgICAgICogICB3b3VsZCBwYXNzIGEgYCRzdGF0ZS5pbmNsdWRlcygpYCB0ZXN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICAgICAqIE92ZXJyaWRlIHRoZSBpbnRlcm5hbCAndmlld3MnIGJ1aWxkZXIgd2l0aCBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIHN0YXRlXG4gICAgICAgICAqIGRlZmluaXRpb24sIGFuZCBhIHJlZmVyZW5jZSB0byB0aGUgaW50ZXJuYWwgZnVuY3Rpb24gYmVpbmcgb3ZlcnJpZGRlbjpcbiAgICAgICAgICogYGBganNcbiAgICAgICAgICogJHN0YXRlUHJvdmlkZXIuZGVjb3JhdG9yKCd2aWV3cycsIGZ1bmN0aW9uIChzdGF0ZSwgcGFyZW50KSB7XG4gICAgICAgICAqICAgbGV0IHJlc3VsdCA9IHt9LFxuICAgICAgICAgKiAgICAgICB2aWV3cyA9IHBhcmVudChzdGF0ZSk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgYW5ndWxhci5mb3JFYWNoKHZpZXdzLCBmdW5jdGlvbiAoY29uZmlnLCBuYW1lKSB7XG4gICAgICAgICAqICAgICBsZXQgYXV0b05hbWUgPSAoc3RhdGUubmFtZSArICcuJyArIG5hbWUpLnJlcGxhY2UoJy4nLCAnLycpO1xuICAgICAgICAgKiAgICAgY29uZmlnLnRlbXBsYXRlVXJsID0gY29uZmlnLnRlbXBsYXRlVXJsIHx8ICcvcGFydGlhbHMvJyArIGF1dG9OYW1lICsgJy5odG1sJztcbiAgICAgICAgICogICAgIHJlc3VsdFtuYW1lXSA9IGNvbmZpZztcbiAgICAgICAgICogICB9KTtcbiAgICAgICAgICogICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICpcbiAgICAgICAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgICAqICAgdmlld3M6IHtcbiAgICAgICAgICogICAgICdjb250YWN0Lmxpc3QnOiB7IGNvbnRyb2xsZXI6ICdMaXN0Q29udHJvbGxlcicgfSxcbiAgICAgICAgICogICAgICdjb250YWN0Lml0ZW0nOiB7IGNvbnRyb2xsZXI6ICdJdGVtQ29udHJvbGxlcicgfVxuICAgICAgICAgKiAgIH1cbiAgICAgICAgICogfSk7XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKlxuICAgICAgICAgKlxuICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgKiAvLyBBdXRvLXBvcHVsYXRlcyBsaXN0IGFuZCBpdGVtIHZpZXdzIHdpdGggL3BhcnRpYWxzL2hvbWUvY29udGFjdC9saXN0Lmh0bWwsXG4gICAgICAgICAqIC8vIGFuZCAvcGFydGlhbHMvaG9tZS9jb250YWN0L2l0ZW0uaHRtbCwgcmVzcGVjdGl2ZWx5LlxuICAgICAgICAgKiAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICogYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBidWlsZGVyIGZ1bmN0aW9uIHRvIGRlY29yYXRlLlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZnVuYyBBIGZ1bmN0aW9uIHRoYXQgaXMgcmVzcG9uc2libGUgZm9yIGRlY29yYXRpbmcgdGhlIG9yaWdpbmFsXG4gICAgICAgICAqIGJ1aWxkZXIgZnVuY3Rpb24uIFRoZSBmdW5jdGlvbiByZWNlaXZlcyB0d28gcGFyYW1ldGVyczpcbiAgICAgICAgICpcbiAgICAgICAgICogICAtIGB7b2JqZWN0fWAgLSBzdGF0ZSAtIFRoZSBzdGF0ZSBjb25maWcgb2JqZWN0LlxuICAgICAgICAgKiAgIC0gYHtvYmplY3R9YCAtIHN1cGVyIC0gVGhlIG9yaWdpbmFsIGJ1aWxkZXIgZnVuY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdH0gJHN0YXRlUHJvdmlkZXIgLSAkc3RhdGVQcm92aWRlciBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgU3RhdGVQcm92aWRlci5wcm90b3R5cGUuZGVjb3JhdG9yID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKG5hbWUsIGZ1bmMpIHx8IHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFN0YXRlUHJvdmlkZXIucHJvdG90eXBlLnN0YXRlID0gZnVuY3Rpb24gKG5hbWUsIGRlZmluaXRpb24pIHtcbiAgICAgICAgICAgIGlmIChjb3JlLmlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbiA9IG5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZVJlZ2lzdHJ5LnJlZ2lzdGVyKGRlZmluaXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlcnMgYW4gaW52YWxpZCBzdGF0ZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0byBbW1N0YXRlU2VydmljZS5vbkludmFsaWRdXSBmb3IgbmcxLlxuICAgICAgICAgKi9cbiAgICAgICAgU3RhdGVQcm92aWRlci5wcm90b3R5cGUub25JbnZhbGlkID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVNlcnZpY2Uub25JbnZhbGlkKGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN0YXRlUHJvdmlkZXI7XG4gICAgfSgpKTtcblxuICAgIC8qKiBAbW9kdWxlIG5nMSAqLyAvKiogKi9cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGEgW1tTdGF0ZUJ1aWxkZXIuYnVpbGRlcl1dIGZ1bmN0aW9uIGZvciBhbmd1bGFyMSBgb25FbnRlcmAsIGBvbkV4aXRgLFxuICAgICAqIGBvblJldGFpbmAgY2FsbGJhY2sgaG9va3Mgb24gYSBbW05nMVN0YXRlRGVjbGFyYXRpb25dXS5cbiAgICAgKlxuICAgICAqIFdoZW4gdGhlIFtbU3RhdGVCdWlsZGVyXV0gYnVpbGRzIGEgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCBmcm9tIGEgcmF3IFtbU3RhdGVEZWNsYXJhdGlvbl1dLCB0aGlzIGJ1aWxkZXJcbiAgICAgKiBlbnN1cmVzIHRoYXQgdGhvc2UgaG9va3MgYXJlIGluamVjdGFibGUgZm9yIEB1aXJvdXRlci9hbmd1bGFyanMgKG5nMSkuXG4gICAgICovXG4gICAgdmFyIGdldFN0YXRlSG9va0J1aWxkZXIgPSBmdW5jdGlvbiAoaG9va05hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlSG9va0J1aWxkZXIoc3RhdGVPYmplY3QsIHBhcmVudEZuKSB7XG4gICAgICAgICAgICB2YXIgaG9vayA9IHN0YXRlT2JqZWN0W2hvb2tOYW1lXTtcbiAgICAgICAgICAgIHZhciBwYXRobmFtZSA9IGhvb2tOYW1lID09PSAnb25FeGl0JyA/ICdmcm9tJyA6ICd0byc7XG4gICAgICAgICAgICBmdW5jdGlvbiBkZWNvcmF0ZWROZzFIb29rKHRyYW5zLCBzdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXNvbHZlQ29udGV4dCA9IG5ldyBjb3JlLlJlc29sdmVDb250ZXh0KHRyYW5zLnRyZWVDaGFuZ2VzKHBhdGhuYW1lKSk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YkNvbnRleHQgPSByZXNvbHZlQ29udGV4dC5zdWJDb250ZXh0KHN0YXRlLiQkc3RhdGUoKSk7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FscyA9IGNvcmUuZXh0ZW5kKGdldExvY2FscyhzdWJDb250ZXh0KSwgeyAkc3RhdGUkOiBzdGF0ZSwgJHRyYW5zaXRpb24kOiB0cmFucyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29yZS5zZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKGhvb2ssIHRoaXMsIGxvY2Fscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaG9vayA/IGRlY29yYXRlZE5nMUhvb2sgOiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqIEBtb2R1bGUgbmcxXG4gICAgICovIC8qKiAqL1xuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgVUktUm91dGVyIExvY2F0aW9uU2VydmljZXMgYW5kIExvY2F0aW9uQ29uZmlnIHVzaW5nIEFuZ3VsYXIgMSdzICRsb2NhdGlvbiBzZXJ2aWNlXG4gICAgICovXG4gICAgdmFyIE5nMUxvY2F0aW9uU2VydmljZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE5nMUxvY2F0aW9uU2VydmljZXMoJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIC8vIC5vbkNoYW5nZSgpIHJlZ2lzdHJ5XG4gICAgICAgICAgICB0aGlzLl91cmxMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuJGxvY2F0aW9uUHJvdmlkZXIgPSAkbG9jYXRpb25Qcm92aWRlcjtcbiAgICAgICAgICAgIHZhciBfbHAgPSBjb3JlLnZhbCgkbG9jYXRpb25Qcm92aWRlcik7XG4gICAgICAgICAgICBjb3JlLmNyZWF0ZVByb3h5RnVuY3Rpb25zKF9scCwgdGhpcywgX2xwLCBbJ2hhc2hQcmVmaXgnXSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFwcGx5cyBuZzEtc3BlY2lmaWMgcGF0aCBwYXJhbWV0ZXIgZW5jb2RpbmdcbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIEFuZ3VsYXIgMSBgJGxvY2F0aW9uYCBzZXJ2aWNlIGlzIGEgYml0IHdlaXJkLlxuICAgICAgICAgKiBJdCBkb2Vzbid0IGFsbG93IHNsYXNoZXMgdG8gYmUgZW5jb2RlZC9kZWNvZGVkIGJpLWRpcmVjdGlvbmFsbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNlZSB0aGUgd3JpdGV1cCBhdCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXIvaXNzdWVzLzI1OThcbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBjb2RlIHBhdGNoZXMgdGhlIGBwYXRoYCBwYXJhbWV0ZXIgdHlwZSBzbyBpdCBlbmNvZGVkL2RlY29kZXMgc2xhc2hlcyBhcyB+MkZcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJvdXRlclxuICAgICAgICAgKi9cbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5tb25rZXlQYXRjaFBhdGhQYXJhbWV0ZXJUeXBlID0gZnVuY3Rpb24gKHJvdXRlcikge1xuICAgICAgICAgICAgdmFyIHBhdGhUeXBlID0gcm91dGVyLnVybE1hdGNoZXJGYWN0b3J5LnR5cGUoJ3BhdGgnKTtcbiAgICAgICAgICAgIHBhdGhUeXBlLmVuY29kZSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHggIT0gbnVsbCA/IHgudG9TdHJpbmcoKS5yZXBsYWNlKC8ofnxcXC8pL2csIGZ1bmN0aW9uIChtKSB7IHJldHVybiAoeyAnfic6ICd+ficsICcvJzogJ34yRicgfVttXSk7IH0pIDogeDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwYXRoVHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4ICE9IG51bGwgPyB4LnRvU3RyaW5nKCkucmVwbGFjZSgvKH5+fH4yRikvZywgZnVuY3Rpb24gKG0pIHsgcmV0dXJuICh7ICd+fic6ICd+JywgJ34yRic6ICcvJyB9W21dKTsgfSkgOiB4O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLl91cmxMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gY29yZS5yZW1vdmVGcm9tKF90aGlzLl91cmxMaXN0ZW5lcnMpKGNhbGxiYWNrKTsgfTtcbiAgICAgICAgfTtcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUuaHRtbDVNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGh0bWw1TW9kZSA9IHRoaXMuJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKCk7XG4gICAgICAgICAgICBodG1sNU1vZGUgPSBjb3JlLmlzT2JqZWN0KGh0bWw1TW9kZSkgPyBodG1sNU1vZGUuZW5hYmxlZCA6IGh0bWw1TW9kZTtcbiAgICAgICAgICAgIHJldHVybiBodG1sNU1vZGUgJiYgdGhpcy4kc25pZmZlci5oaXN0b3J5O1xuICAgICAgICB9O1xuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS5iYXNlSHJlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYXNlSHJlZiB8fCAodGhpcy5fYmFzZUhyZWYgPSB0aGlzLiRicm93c2VyLmJhc2VIcmVmKCkgfHwgdGhpcy4kd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUudXJsID0gZnVuY3Rpb24gKG5ld1VybCwgcmVwbGFjZSwgc3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChyZXBsYWNlID09PSB2b2lkIDApIHsgcmVwbGFjZSA9IGZhbHNlOyB9XG4gICAgICAgICAgICBpZiAoY29yZS5pc0RlZmluZWQobmV3VXJsKSlcbiAgICAgICAgICAgICAgICB0aGlzLiRsb2NhdGlvbi51cmwobmV3VXJsKTtcbiAgICAgICAgICAgIGlmIChyZXBsYWNlKVxuICAgICAgICAgICAgICAgIHRoaXMuJGxvY2F0aW9uLnJlcGxhY2UoKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSlcbiAgICAgICAgICAgICAgICB0aGlzLiRsb2NhdGlvbi5zdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kbG9jYXRpb24udXJsKCk7XG4gICAgICAgIH07XG4gICAgICAgIE5nMUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLl9ydW50aW1lU2VydmljZXMgPSBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkc25pZmZlciwgJGJyb3dzZXIsICR3aW5kb3cpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLiRsb2NhdGlvbiA9ICRsb2NhdGlvbjtcbiAgICAgICAgICAgIHRoaXMuJHNuaWZmZXIgPSAkc25pZmZlcjtcbiAgICAgICAgICAgIHRoaXMuJGJyb3dzZXIgPSAkYnJvd3NlcjtcbiAgICAgICAgICAgIHRoaXMuJHdpbmRvdyA9ICR3aW5kb3c7XG4gICAgICAgICAgICAvLyBCaW5kICRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgdG8gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGluIExvY2F0aW9uU2VydmljZS5vbkNoYW5nZVxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoZXZ0KSB7IHJldHVybiBfdGhpcy5fdXJsTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbihldnQpOyB9KTsgfSk7XG4gICAgICAgICAgICB2YXIgX2xvYyA9IGNvcmUudmFsKCRsb2NhdGlvbik7XG4gICAgICAgICAgICAvLyBCaW5kIHRoZXNlIExvY2F0aW9uU2VydmljZSBmdW5jdGlvbnMgdG8gJGxvY2F0aW9uXG4gICAgICAgICAgICBjb3JlLmNyZWF0ZVByb3h5RnVuY3Rpb25zKF9sb2MsIHRoaXMsIF9sb2MsIFsncmVwbGFjZScsICdwYXRoJywgJ3NlYXJjaCcsICdoYXNoJ10pO1xuICAgICAgICAgICAgLy8gQmluZCB0aGVzZSBMb2NhdGlvbkNvbmZpZyBmdW5jdGlvbnMgdG8gJGxvY2F0aW9uXG4gICAgICAgICAgICBjb3JlLmNyZWF0ZVByb3h5RnVuY3Rpb25zKF9sb2MsIHRoaXMsIF9sb2MsIFsncG9ydCcsICdwcm90b2NvbCcsICdob3N0J10pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTmcxTG9jYXRpb25TZXJ2aWNlcztcbiAgICB9KCkpO1xuXG4gICAgLyoqIEBtb2R1bGUgdXJsICovIC8qKiAqL1xuICAgIC8qKlxuICAgICAqIE1hbmFnZXMgcnVsZXMgZm9yIGNsaWVudC1zaWRlIFVSTFxuICAgICAqXG4gICAgICogIyMjIERlcHJlY2F0aW9uIHdhcm5pbmc6XG4gICAgICogVGhpcyBjbGFzcyBpcyBub3cgY29uc2lkZXJlZCB0byBiZSBhbiBpbnRlcm5hbCBBUElcbiAgICAgKiBVc2UgdGhlIFtbVXJsU2VydmljZV1dIGluc3RlYWQuXG4gICAgICogRm9yIGNvbmZpZ3VyaW5nIFVSTCBydWxlcywgdXNlIHRoZSBbW1VybFJ1bGVzQXBpXV0gd2hpY2ggY2FuIGJlIGZvdW5kIGFzIFtbVXJsU2VydmljZS5ydWxlc11dLlxuICAgICAqXG4gICAgICogVGhpcyBjbGFzcyBtYW5hZ2VzIHRoZSByb3V0ZXIgcnVsZXMgZm9yIHdoYXQgdG8gZG8gd2hlbiB0aGUgVVJMIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUaGlzIHByb3ZpZGVyIHJlbWFpbnMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICB2YXIgVXJsUm91dGVyUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIGZ1bmN0aW9uIFVybFJvdXRlclByb3ZpZGVyKHJvdXRlcikge1xuICAgICAgICAgICAgdGhpcy5fcm91dGVyID0gcm91dGVyO1xuICAgICAgICAgICAgdGhpcy5fdXJsUm91dGVyID0gcm91dGVyLnVybFJvdXRlcjtcbiAgICAgICAgfVxuICAgICAgICBVcmxSb3V0ZXJQcm92aWRlci5pbmplY3RhYmxlSGFuZGxlciA9IGZ1bmN0aW9uIChyb3V0ZXIsIGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIGNvcmUuc2VydmljZXMuJGluamVjdG9yLmludm9rZShoYW5kbGVyLCBudWxsLCB7ICRtYXRjaDogbWF0Y2gsICRzdGF0ZVBhcmFtczogcm91dGVyLmdsb2JhbHMucGFyYW1zIH0pOyB9O1xuICAgICAgICB9O1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICBVcmxSb3V0ZXJQcm92aWRlci5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1cmxSb3V0ZXIgPSB0aGlzLl91cmxSb3V0ZXI7XG4gICAgICAgICAgICB1cmxSb3V0ZXIudXBkYXRlKHRydWUpO1xuICAgICAgICAgICAgaWYgKCF1cmxSb3V0ZXIuaW50ZXJjZXB0RGVmZXJyZWQpXG4gICAgICAgICAgICAgICAgdXJsUm91dGVyLmxpc3RlbigpO1xuICAgICAgICAgICAgcmV0dXJuIHVybFJvdXRlcjtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVycyBhIHVybCBoYW5kbGVyIGZ1bmN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBSZWdpc3RlcnMgYSBsb3cgbGV2ZWwgdXJsIGhhbmRsZXIgKGEgYHJ1bGVgKS5cbiAgICAgICAgICogQSBydWxlIGRldGVjdHMgc3BlY2lmaWMgVVJMIHBhdHRlcm5zIGFuZCByZXR1cm5zIGEgcmVkaXJlY3QsIG9yIHBlcmZvcm1zIHNvbWUgYWN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJZiBhIHJ1bGUgcmV0dXJucyBhIHN0cmluZywgdGhlIFVSTCBpcyByZXBsYWNlZCB3aXRoIHRoZSBzdHJpbmcsIGFuZCBhbGwgcnVsZXMgYXJlIGZpcmVkIGFnYWluLlxuICAgICAgICAgKlxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICAgICAqIGBgYGpzXG4gICAgICAgICAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXIucm91dGVyJ10pO1xuICAgICAgICAgKlxuICAgICAgICAgKiBhcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICogICAvLyBIZXJlJ3MgYW4gZXhhbXBsZSBvZiBob3cgeW91IG1pZ2h0IGFsbG93IGNhc2UgaW5zZW5zaXRpdmUgdXJsc1xuICAgICAgICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci5ydWxlKGZ1bmN0aW9uICgkaW5qZWN0b3IsICRsb2NhdGlvbikge1xuICAgICAgICAgKiAgICAgdmFyIHBhdGggPSAkbG9jYXRpb24ucGF0aCgpLFxuICAgICAgICAgKiAgICAgICAgIG5vcm1hbGl6ZWQgPSBwYXRoLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgICBpZiAocGF0aCAhPT0gbm9ybWFsaXplZCkge1xuICAgICAgICAgKiAgICAgICByZXR1cm4gbm9ybWFsaXplZDtcbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICogICB9KTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcnVsZUZuXG4gICAgICAgICAqIEhhbmRsZXIgZnVuY3Rpb24gdGhhdCB0YWtlcyBgJGluamVjdG9yYCBhbmQgYCRsb2NhdGlvbmAgc2VydmljZXMgYXMgYXJndW1lbnRzLlxuICAgICAgICAgKiBZb3UgY2FuIHVzZSB0aGVtIHRvIGRldGVjdCBhIHVybCBhbmQgcmV0dXJuIGEgZGlmZmVyZW50IHVybCBhcyBhIHN0cmluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBbW1VybFJvdXRlclByb3ZpZGVyXV0gKGB0aGlzYClcbiAgICAgICAgICovXG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS5ydWxlID0gZnVuY3Rpb24gKHJ1bGVGbikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICghY29yZS5pc0Z1bmN0aW9uKHJ1bGVGbikpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3J1bGUnIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ1bGVGbihjb3JlLnNlcnZpY2VzLiRpbmplY3RvciwgX3RoaXMuX3JvdXRlci5sb2NhdGlvblNlcnZpY2UpOyB9O1xuICAgICAgICAgICAgdmFyIHJ1bGUgPSBuZXcgY29yZS5CYXNlVXJsUnVsZShtYXRjaCwgY29yZS5pZGVudGl0eSk7XG4gICAgICAgICAgICB0aGlzLl91cmxSb3V0ZXIucnVsZShydWxlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyB0aGUgcGF0aCBvciBiZWhhdmlvciB0byB1c2Ugd2hlbiBubyB1cmwgY2FuIGJlIG1hdGNoZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgICAgICogYGBganNcbiAgICAgICAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlci5yb3V0ZXInXSk7XG4gICAgICAgICAqXG4gICAgICAgICAqIGFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICAgICAgKiAgIC8vIGlmIHRoZSBwYXRoIGRvZXNuJ3QgbWF0Y2ggYW55IG9mIHRoZSB1cmxzIHlvdSBjb25maWd1cmVkXG4gICAgICAgICAqICAgLy8gb3RoZXJ3aXNlIHdpbGwgdGFrZSBjYXJlIG9mIHJvdXRpbmcgdGhlIHVzZXIgdG8gdGhlXG4gICAgICAgICAqICAgLy8gc3BlY2lmaWVkIHVybFxuICAgICAgICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9pbmRleCcpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgIC8vIEV4YW1wbGUgb2YgdXNpbmcgZnVuY3Rpb24gcnVsZSBhcyBwYXJhbVxuICAgICAgICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoZnVuY3Rpb24gKCRpbmplY3RvciwgJGxvY2F0aW9uKSB7XG4gICAgICAgICAqICAgICByZXR1cm4gJy9hL3ZhbGlkL3VybCc7XG4gICAgICAgICAqICAgfSk7XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKiBgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJ1bGVcbiAgICAgICAgICogVGhlIHVybCBwYXRoIHlvdSB3YW50IHRvIHJlZGlyZWN0IHRvIG9yIGEgZnVuY3Rpb24gcnVsZSB0aGF0IHJldHVybnMgdGhlIHVybCBwYXRoIG9yIHBlcmZvcm1zIGEgYCRzdGF0ZS5nbygpYC5cbiAgICAgICAgICogVGhlIGZ1bmN0aW9uIHZlcnNpb24gaXMgcGFzc2VkIHR3byBwYXJhbXM6IGAkaW5qZWN0b3JgIGFuZCBgJGxvY2F0aW9uYCBzZXJ2aWNlcywgYW5kIHNob3VsZCByZXR1cm4gYSB1cmwgc3RyaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IGAkdXJsUm91dGVyUHJvdmlkZXJgIC0gYCR1cmxSb3V0ZXJQcm92aWRlcmAgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS5vdGhlcndpc2UgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB1cmxSb3V0ZXIgPSB0aGlzLl91cmxSb3V0ZXI7XG4gICAgICAgICAgICBpZiAoY29yZS5pc1N0cmluZyhydWxlKSkge1xuICAgICAgICAgICAgICAgIHVybFJvdXRlci5vdGhlcndpc2UocnVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb3JlLmlzRnVuY3Rpb24ocnVsZSkpIHtcbiAgICAgICAgICAgICAgICB1cmxSb3V0ZXIub3RoZXJ3aXNlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ1bGUoY29yZS5zZXJ2aWNlcy4kaW5qZWN0b3IsIF90aGlzLl9yb3V0ZXIubG9jYXRpb25TZXJ2aWNlKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIncnVsZScgbXVzdCBiZSBhIHN0cmluZyBvciBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgaGFuZGxlciBmb3IgYSBnaXZlbiB1cmwgbWF0Y2hpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHRoZSBoYW5kbGVyIGlzIGEgc3RyaW5nLCBpdCBpc1xuICAgICAgICAgKiB0cmVhdGVkIGFzIGEgcmVkaXJlY3QsIGFuZCBpcyBpbnRlcnBvbGF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzeW50YXggb2YgbWF0Y2hcbiAgICAgICAgICogKGkuZS4gbGlrZSBgU3RyaW5nLnJlcGxhY2UoKWAgZm9yIGBSZWdFeHBgLCBvciBsaWtlIGEgYFVybE1hdGNoZXJgIHBhdHRlcm4gb3RoZXJ3aXNlKS5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgdGhlIGhhbmRsZXIgaXMgYSBmdW5jdGlvbiwgaXQgaXMgaW5qZWN0YWJsZS5cbiAgICAgICAgICogSXQgZ2V0cyBpbnZva2VkIGlmIGAkbG9jYXRpb25gIG1hdGNoZXMuXG4gICAgICAgICAqIFlvdSBoYXZlIHRoZSBvcHRpb24gb2YgaW5qZWN0IHRoZSBtYXRjaCBvYmplY3QgYXMgYCRtYXRjaGAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBoYW5kbGVyIGNhbiByZXR1cm5cbiAgICAgICAgICpcbiAgICAgICAgICogLSAqKmZhbHN5KiogdG8gaW5kaWNhdGUgdGhhdCB0aGUgcnVsZSBkaWRuJ3QgbWF0Y2ggYWZ0ZXIgYWxsLCB0aGVuIGAkdXJsUm91dGVyYFxuICAgICAgICAgKiAgIHdpbGwgY29udGludWUgdHJ5aW5nIHRvIGZpbmQgYW5vdGhlciBvbmUgdGhhdCBtYXRjaGVzLlxuICAgICAgICAgKiAtICoqc3RyaW5nKiogd2hpY2ggaXMgdHJlYXRlZCBhcyBhIHJlZGlyZWN0IGFuZCBwYXNzZWQgdG8gYCRsb2NhdGlvbi51cmwoKWBcbiAgICAgICAgICogLSAqKnZvaWQqKiBvciBhbnkgKip0cnV0aHkqKiB2YWx1ZSB0ZWxscyBgJHVybFJvdXRlcmAgdGhhdCB0aGUgdXJsIHdhcyBoYW5kbGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICAgICAqIGBgYGpzXG4gICAgICAgICAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXIucm91dGVyJ10pO1xuICAgICAgICAgKlxuICAgICAgICAgKiBhcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICogICAkdXJsUm91dGVyUHJvdmlkZXIud2hlbigkc3RhdGUudXJsLCBmdW5jdGlvbiAoJG1hdGNoLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICogICAgIGlmICgkc3RhdGUuJGN1cnJlbnQubmF2aWdhYmxlICE9PSBzdGF0ZSB8fFxuICAgICAgICAgKiAgICAgICAgICFlcXVhbEZvcktleXMoJG1hdGNoLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICogICAgICAkc3RhdGUudHJhbnNpdGlvblRvKHN0YXRlLCAkbWF0Y2gsIGZhbHNlKTtcbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICogICB9KTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gd2hhdCBBIHBhdHRlcm4gc3RyaW5nIHRvIG1hdGNoLCBjb21waWxlZCBhcyBhIFtbVXJsTWF0Y2hlcl1dLlxuICAgICAgICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgcGF0aCAob3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcGF0aCkgdGhhdCB5b3Ugd2FudCB0byByZWRpcmVjdCB5b3VyIHVzZXIgdG8uXG4gICAgICAgICAqIEBwYXJhbSBydWxlQ2FsbGJhY2sgW29wdGlvbmFsXSBBIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgdGhlIGBydWxlYCByZWdpc3RlcmVkIHdpdGggW1tVcmxNYXRjaGVyLnJ1bGVdXVxuICAgICAgICAgKlxuICAgICAgICAgKiBOb3RlOiB0aGUgaGFuZGxlciBtYXkgYWxzbyBpbnZva2UgYXJiaXRyYXJ5IGNvZGUsIHN1Y2ggYXMgYCRzdGF0ZS5nbygpYFxuICAgICAgICAgKi9cbiAgICAgICAgVXJsUm91dGVyUHJvdmlkZXIucHJvdG90eXBlLndoZW4gPSBmdW5jdGlvbiAod2hhdCwgaGFuZGxlcikge1xuICAgICAgICAgICAgaWYgKGNvcmUuaXNBcnJheShoYW5kbGVyKSB8fCBjb3JlLmlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gVXJsUm91dGVyUHJvdmlkZXIuaW5qZWN0YWJsZUhhbmRsZXIodGhpcy5fcm91dGVyLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3VybFJvdXRlci53aGVuKHdoYXQsIGhhbmRsZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyBtb25pdG9yaW5nIG9mIHRoZSBVUkwuXG4gICAgICAgICAqXG4gICAgICAgICAqIENhbGwgdGhpcyBtZXRob2QgYmVmb3JlIFVJLVJvdXRlciBoYXMgYm9vdHN0cmFwcGVkLlxuICAgICAgICAgKiBJdCB3aWxsIHN0b3AgVUktUm91dGVyIGZyb20gcGVyZm9ybWluZyB0aGUgaW5pdGlhbCB1cmwgc3luYy5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHRvIHBlcmZvcm0gc29tZSBhc3luY2hyb25vdXMgaW5pdGlhbGl6YXRpb24gYmVmb3JlIHRoZSByb3V0ZXIgc3RhcnRzLlxuICAgICAgICAgKiBPbmNlIHRoZSBpbml0aWFsaXphdGlvbiBpcyBjb21wbGV0ZSwgY2FsbCBbW2xpc3Rlbl1dIHRvIHRlbGwgVUktUm91dGVyIHRvIHN0YXJ0IHdhdGNoaW5nIGFuZCBzeW5jaHJvbml6aW5nIHRoZSBVUkwuXG4gICAgICAgICAqXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgICAgICogYGBganNcbiAgICAgICAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICAgICAgICpcbiAgICAgICAgICogYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICAqICAgLy8gUHJldmVudCAkdXJsUm91dGVyIGZyb20gYXV0b21hdGljYWxseSBpbnRlcmNlcHRpbmcgVVJMIGNoYW5nZXM7XG4gICAgICAgICAqICAgJHVybFJvdXRlclByb3ZpZGVyLmRlZmVySW50ZXJjZXB0KCk7XG4gICAgICAgICAqIH0pXG4gICAgICAgICAqXG4gICAgICAgICAqIGFwcC5ydW4oZnVuY3Rpb24gKE15U2VydmljZSwgJHVybFJvdXRlciwgJGh0dHApIHtcbiAgICAgICAgICogICAkaHR0cC5nZXQoXCIvc3R1ZmZcIikudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAqICAgICBNeVNlcnZpY2UuZG9TdHVmZihyZXNwLmRhdGEpO1xuICAgICAgICAgKiAgICAgJHVybFJvdXRlci5saXN0ZW4oKTtcbiAgICAgICAgICogICAgICR1cmxSb3V0ZXIuc3luYygpO1xuICAgICAgICAgKiAgIH0pO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICogYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBkZWZlciBJbmRpY2F0ZXMgd2hldGhlciB0byBkZWZlciBsb2NhdGlvbiBjaGFuZ2UgaW50ZXJjZXB0aW9uLlxuICAgICAgICAgKiAgICAgICAgUGFzc2luZyBubyBwYXJhbWV0ZXIgaXMgZXF1aXZhbGVudCB0byBgdHJ1ZWAuXG4gICAgICAgICAqL1xuICAgICAgICBVcmxSb3V0ZXJQcm92aWRlci5wcm90b3R5cGUuZGVmZXJJbnRlcmNlcHQgPSBmdW5jdGlvbiAoZGVmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3VybFJvdXRlci5kZWZlckludGVyY2VwdChkZWZlcik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBVcmxSb3V0ZXJQcm92aWRlcjtcbiAgICB9KCkpO1xuXG4gICAgLyoqXG4gICAgICogIyBBbmd1bGFyIDEgdHlwZXNcbiAgICAgKlxuICAgICAqIFVJLVJvdXRlciBjb3JlIHByb3ZpZGVzIHZhcmlvdXMgVHlwZXNjcmlwdCB0eXBlcyB3aGljaCB5b3UgY2FuIHVzZSBmb3IgY29kZSBjb21wbGV0aW9uIGFuZCB2YWxpZGF0aW5nIHBhcmFtZXRlciB2YWx1ZXMsIGV0Yy5cbiAgICAgKiBUaGUgY3VzdG9taXphdGlvbnMgdG8gdGhlIGNvcmUgdHlwZXMgZm9yIEFuZ3VsYXIgVUktUm91dGVyIGFyZSBkb2N1bWVudGVkIGhlcmUuXG4gICAgICpcbiAgICAgKiBUaGUgb3B0aW9uYWwgW1skcmVzb2x2ZV1dIHNlcnZpY2UgaXMgYWxzbyBkb2N1bWVudGVkIGhlcmUuXG4gICAgICpcbiAgICAgKiBAbW9kdWxlIG5nMVxuICAgICAqIEBwcmVmZXJyZWRcbiAgICAgKi9cbiAgICBuZy5tb2R1bGUoJ3VpLnJvdXRlci5hbmd1bGFyMScsIFtdKTtcbiAgICB2YXIgbW9kX2luaXQgPSBuZy5tb2R1bGUoJ3VpLnJvdXRlci5pbml0JywgWyduZyddKTtcbiAgICB2YXIgbW9kX3V0aWwgPSBuZy5tb2R1bGUoJ3VpLnJvdXRlci51dGlsJywgWyd1aS5yb3V0ZXIuaW5pdCddKTtcbiAgICB2YXIgbW9kX3J0ciA9IG5nLm1vZHVsZSgndWkucm91dGVyLnJvdXRlcicsIFsndWkucm91dGVyLnV0aWwnXSk7XG4gICAgdmFyIG1vZF9zdGF0ZSA9IG5nLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJywgWyd1aS5yb3V0ZXIucm91dGVyJywgJ3VpLnJvdXRlci51dGlsJywgJ3VpLnJvdXRlci5hbmd1bGFyMSddKTtcbiAgICB2YXIgbW9kX21haW4gPSBuZy5tb2R1bGUoJ3VpLnJvdXRlcicsIFsndWkucm91dGVyLmluaXQnLCAndWkucm91dGVyLnN0YXRlJywgJ3VpLnJvdXRlci5hbmd1bGFyMSddKTtcbiAgICB2YXIgbW9kX2NtcHQgPSBuZy5tb2R1bGUoJ3VpLnJvdXRlci5jb21wYXQnLCBbJ3VpLnJvdXRlciddKTsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuICAgIHZhciByb3V0ZXIgPSBudWxsO1xuICAgICR1aVJvdXRlclByb3ZpZGVyLiRpbmplY3QgPSBbJyRsb2NhdGlvblByb3ZpZGVyJ107XG4gICAgLyoqIFRoaXMgYW5ndWxhciAxIHByb3ZpZGVyIGluc3RhbnRpYXRlcyBhIFJvdXRlciBhbmQgZXhwb3NlcyBpdHMgc2VydmljZXMgdmlhIHRoZSBhbmd1bGFyIGluamVjdG9yICovXG4gICAgZnVuY3Rpb24gJHVpUm91dGVyUHJvdmlkZXIoJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBSb3V0ZXIgd2hlbiB0aGUgJHVpUm91dGVyUHJvdmlkZXIgaXMgaW5pdGlhbGl6ZWRcbiAgICAgICAgcm91dGVyID0gdGhpcy5yb3V0ZXIgPSBuZXcgY29yZS5VSVJvdXRlcigpO1xuICAgICAgICByb3V0ZXIuc3RhdGVQcm92aWRlciA9IG5ldyBTdGF0ZVByb3ZpZGVyKHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCByb3V0ZXIuc3RhdGVTZXJ2aWNlKTtcbiAgICAgICAgLy8gQXBwbHkgbmcxIHNwZWNpZmljIFN0YXRlQnVpbGRlciBjb2RlIGZvciBgdmlld3NgLCBgcmVzb2x2ZWAsIGFuZCBgb25FeGl0L1JldGFpbi9FbnRlcmAgcHJvcGVydGllc1xuICAgICAgICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoJ3ZpZXdzJywgbmcxVmlld3NCdWlsZGVyKTtcbiAgICAgICAgcm91dGVyLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKCdvbkV4aXQnLCBnZXRTdGF0ZUhvb2tCdWlsZGVyKCdvbkV4aXQnKSk7XG4gICAgICAgIHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcignb25SZXRhaW4nLCBnZXRTdGF0ZUhvb2tCdWlsZGVyKCdvblJldGFpbicpKTtcbiAgICAgICAgcm91dGVyLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKCdvbkVudGVyJywgZ2V0U3RhdGVIb29rQnVpbGRlcignb25FbnRlcicpKTtcbiAgICAgICAgcm91dGVyLnZpZXdTZXJ2aWNlLl9wbHVnaW5hcGkuX3ZpZXdDb25maWdGYWN0b3J5KCduZzEnLCBnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSgpKTtcbiAgICAgICAgdmFyIG5nMUxvY2F0aW9uU2VydmljZSA9IChyb3V0ZXIubG9jYXRpb25TZXJ2aWNlID0gcm91dGVyLmxvY2F0aW9uQ29uZmlnID0gbmV3IE5nMUxvY2F0aW9uU2VydmljZXMoJGxvY2F0aW9uUHJvdmlkZXIpKTtcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5tb25rZXlQYXRjaFBhdGhQYXJhbWV0ZXJUeXBlKHJvdXRlcik7XG4gICAgICAgIC8vIGJhY2t3YXJkcyBjb21wYXQ6IGFsc28gZXhwb3NlIHJvdXRlciBpbnN0YW5jZSBhcyAkdWlSb3V0ZXJQcm92aWRlci5yb3V0ZXJcbiAgICAgICAgcm91dGVyWydyb3V0ZXInXSA9IHJvdXRlcjtcbiAgICAgICAgcm91dGVyWyckZ2V0J10gPSAkZ2V0O1xuICAgICAgICAkZ2V0LiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICckYnJvd3NlcicsICckd2luZG93JywgJyRzbmlmZmVyJywgJyRyb290U2NvcGUnLCAnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnXTtcbiAgICAgICAgZnVuY3Rpb24gJGdldCgkbG9jYXRpb24sICRicm93c2VyLCAkd2luZG93LCAkc25pZmZlciwgJHJvb3RTY29wZSwgJGh0dHAsICR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICBuZzFMb2NhdGlvblNlcnZpY2UuX3J1bnRpbWVTZXJ2aWNlcygkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzbmlmZmVyLCAkYnJvd3NlciwgJHdpbmRvdyk7XG4gICAgICAgICAgICBkZWxldGUgcm91dGVyWydyb3V0ZXInXTtcbiAgICAgICAgICAgIGRlbGV0ZSByb3V0ZXJbJyRnZXQnXTtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvdXRlcjtcbiAgICB9XG4gICAgdmFyIGdldFByb3ZpZGVyRm9yID0gZnVuY3Rpb24gKHNlcnZpY2VOYW1lKSB7IHJldHVybiBbXG4gICAgICAgICckdWlSb3V0ZXJQcm92aWRlcicsXG4gICAgICAgIGZ1bmN0aW9uICgkdXJwKSB7XG4gICAgICAgICAgICB2YXIgc2VydmljZSA9ICR1cnAucm91dGVyW3NlcnZpY2VOYW1lXTtcbiAgICAgICAgICAgIHNlcnZpY2VbJyRnZXQnXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlcnZpY2U7IH07XG4gICAgICAgICAgICByZXR1cm4gc2VydmljZTtcbiAgICAgICAgfSxcbiAgICBdOyB9O1xuICAgIC8vIFRoaXMgZWZmZWN0aXZlbHkgY2FsbHMgJGdldCgpIG9uIGAkdWlSb3V0ZXJQcm92aWRlcmAgdG8gdHJpZ2dlciBpbml0ICh3aGVuIG5nIGVudGVycyBydW50aW1lKVxuICAgIHJ1bkJsb2NrLiRpbmplY3QgPSBbJyRpbmplY3RvcicsICckcScsICckdWlSb3V0ZXInXTtcbiAgICBmdW5jdGlvbiBydW5CbG9jaygkaW5qZWN0b3IsICRxLCAkdWlSb3V0ZXIpIHtcbiAgICAgICAgY29yZS5zZXJ2aWNlcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gICAgICAgIGNvcmUuc2VydmljZXMuJHEgPSAkcTtcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvdWktcm91dGVyL2lzc3Vlcy8zNjc4XG4gICAgICAgIGlmICghJGluamVjdG9yLmhhc093blByb3BlcnR5KCdzdHJpY3REaScpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24gKGNoZWNrU3RyaWN0RGkpIHsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkaW5qZWN0b3Iuc3RyaWN0RGkgPSAhIS9zdHJpY3QgbW9kZS8uZXhlYyhlcnJvciAmJiBlcnJvci50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgJGluamVjdG9yIGlzIG5vdyBhdmFpbGFibGUuXG4gICAgICAgIC8vIEZpbmQgYW55IHJlc29sdmFibGVzIHRoYXQgaGFkIGRlcGVuZGVuY3kgYW5ub3RhdGlvbiBkZWZlcnJlZFxuICAgICAgICAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeVxuICAgICAgICAgICAgLmdldCgpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LiQkc3RhdGUoKS5yZXNvbHZhYmxlczsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UoY29yZS51bm5lc3RSLCBbXSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZGVwcyA9PT0gJ2RlZmVycmVkJzsgfSlcbiAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7IHJldHVybiAocmVzb2x2YWJsZS5kZXBzID0gJGluamVjdG9yLmFubm90YXRlKHJlc29sdmFibGUucmVzb2x2ZUZuLCAkaW5qZWN0b3Iuc3RyaWN0RGkpKTsgfSk7XG4gICAgfVxuICAgIC8vICR1cmxSb3V0ZXIgc2VydmljZSBhbmQgJHVybFJvdXRlclByb3ZpZGVyXG4gICAgdmFyIGdldFVybFJvdXRlclByb3ZpZGVyID0gZnVuY3Rpb24gKHVpUm91dGVyKSB7IHJldHVybiAodWlSb3V0ZXIudXJsUm91dGVyUHJvdmlkZXIgPSBuZXcgVXJsUm91dGVyUHJvdmlkZXIodWlSb3V0ZXIpKTsgfTtcbiAgICAvLyAkc3RhdGUgc2VydmljZSBhbmQgJHN0YXRlUHJvdmlkZXJcbiAgICAvLyAkdXJsUm91dGVyIHNlcnZpY2UgYW5kICR1cmxSb3V0ZXJQcm92aWRlclxuICAgIHZhciBnZXRTdGF0ZVByb3ZpZGVyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gY29yZS5leHRlbmQocm91dGVyLnN0YXRlUHJvdmlkZXIsIHsgJGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZTsgfSB9KTsgfTtcbiAgICB3YXRjaERpZ2VzdHMuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuICAgIGZ1bmN0aW9uIHdhdGNoRGlnZXN0cygkcm9vdFNjb3BlKSB7XG4gICAgICAgICRyb290U2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvcmUudHJhY2UuYXBwcm94aW1hdGVEaWdlc3RzKys7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtb2RfaW5pdC5wcm92aWRlcignJHVpUm91dGVyJywgJHVpUm91dGVyUHJvdmlkZXIpO1xuICAgIG1vZF9ydHIucHJvdmlkZXIoJyR1cmxSb3V0ZXInLCBbJyR1aVJvdXRlclByb3ZpZGVyJywgZ2V0VXJsUm91dGVyUHJvdmlkZXJdKTtcbiAgICBtb2RfdXRpbC5wcm92aWRlcignJHVybFNlcnZpY2UnLCBnZXRQcm92aWRlckZvcigndXJsU2VydmljZScpKTtcbiAgICBtb2RfdXRpbC5wcm92aWRlcignJHVybE1hdGNoZXJGYWN0b3J5JywgWyckdWlSb3V0ZXJQcm92aWRlcicsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci51cmxNYXRjaGVyRmFjdG9yeTsgfV0pO1xuICAgIG1vZF91dGlsLnByb3ZpZGVyKCckdGVtcGxhdGVGYWN0b3J5JywgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFRlbXBsYXRlRmFjdG9yeSgpOyB9KTtcbiAgICBtb2Rfc3RhdGUucHJvdmlkZXIoJyRzdGF0ZVJlZ2lzdHJ5JywgZ2V0UHJvdmlkZXJGb3IoJ3N0YXRlUmVnaXN0cnknKSk7XG4gICAgbW9kX3N0YXRlLnByb3ZpZGVyKCckdWlSb3V0ZXJHbG9iYWxzJywgZ2V0UHJvdmlkZXJGb3IoJ2dsb2JhbHMnKSk7XG4gICAgbW9kX3N0YXRlLnByb3ZpZGVyKCckdHJhbnNpdGlvbnMnLCBnZXRQcm92aWRlckZvcigndHJhbnNpdGlvblNlcnZpY2UnKSk7XG4gICAgbW9kX3N0YXRlLnByb3ZpZGVyKCckc3RhdGUnLCBbJyR1aVJvdXRlclByb3ZpZGVyJywgZ2V0U3RhdGVQcm92aWRlcl0pO1xuICAgIG1vZF9zdGF0ZS5mYWN0b3J5KCckc3RhdGVQYXJhbXMnLCBbJyR1aVJvdXRlcicsIGZ1bmN0aW9uICgkdWlSb3V0ZXIpIHsgcmV0dXJuICR1aVJvdXRlci5nbG9iYWxzLnBhcmFtczsgfV0pO1xuICAgIG1vZF9tYWluLmZhY3RvcnkoJyR2aWV3JywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLnZpZXdTZXJ2aWNlOyB9KTtcbiAgICBtb2RfbWFpbi5zZXJ2aWNlKCckdHJhY2UnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjb3JlLnRyYWNlOyB9KTtcbiAgICBtb2RfbWFpbi5ydW4od2F0Y2hEaWdlc3RzKTtcbiAgICBtb2RfdXRpbC5ydW4oWyckdXJsTWF0Y2hlckZhY3RvcnknLCBmdW5jdGlvbiAoJHVybE1hdGNoZXJGYWN0b3J5KSB7IH1dKTtcbiAgICBtb2Rfc3RhdGUucnVuKFsnJHN0YXRlJywgZnVuY3Rpb24gKCRzdGF0ZSkgeyB9XSk7XG4gICAgbW9kX3J0ci5ydW4oWyckdXJsUm91dGVyJywgZnVuY3Rpb24gKCR1cmxSb3V0ZXIpIHsgfV0pO1xuICAgIG1vZF9pbml0LnJ1bihydW5CbG9jayk7XG4gICAgLyoqIEBoaWRkZW4gVE9ETzogZmluZCBhIHBsYWNlIHRvIG1vdmUgdGhpcyAqL1xuICAgIHZhciBnZXRMb2NhbHMgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHZhciB0b2tlbnMgPSBjdHguZ2V0VG9rZW5zKCkuZmlsdGVyKGNvcmUuaXNTdHJpbmcpO1xuICAgICAgICB2YXIgdHVwbGVzID0gdG9rZW5zLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgcmVzb2x2YWJsZSA9IGN0eC5nZXRSZXNvbHZhYmxlKGtleSk7XG4gICAgICAgICAgICB2YXIgd2FpdFBvbGljeSA9IGN0eC5nZXRQb2xpY3kocmVzb2x2YWJsZSkuYXN5bmM7XG4gICAgICAgICAgICByZXR1cm4gW2tleSwgd2FpdFBvbGljeSA9PT0gJ05PV0FJVCcgPyByZXNvbHZhYmxlLnByb21pc2UgOiByZXNvbHZhYmxlLmRhdGFdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHR1cGxlcy5yZWR1Y2UoY29yZS5hcHBseVBhaXJzLCB7fSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IChvciBwZW5kaW5nKSBTdGF0ZSBQYXJhbWV0ZXJzXG4gICAgICpcbiAgICAgKiBBbiBpbmplY3RhYmxlIGdsb2JhbCAqKlNlcnZpY2UgT2JqZWN0Kiogd2hpY2ggaG9sZHMgdGhlIHN0YXRlIHBhcmFtZXRlcnMgZm9yIHRoZSBsYXRlc3QgKipTVUNDRVNTRlVMKiogdHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIFRoZSB2YWx1ZXMgYXJlIG5vdCB1cGRhdGVkIHVudGlsICphZnRlciogYSBgVHJhbnNpdGlvbmAgc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlcy5cbiAgICAgKlxuICAgICAqICoqQWxzbzoqKiBhbiBpbmplY3RhYmxlICoqUGVyLVRyYW5zaXRpb24gT2JqZWN0Kiogb2JqZWN0IHdoaWNoIGhvbGRzIHRoZSBwZW5kaW5nIHN0YXRlIHBhcmFtZXRlcnMgZm9yIHRoZSBwZW5kaW5nIGBUcmFuc2l0aW9uYCBjdXJyZW50bHkgcnVubmluZy5cbiAgICAgKlxuICAgICAqICMjIyBEZXByZWNhdGlvbiB3YXJuaW5nOlxuICAgICAqXG4gICAgICogVGhlIHZhbHVlIGluamVjdGVkIGZvciBgJHN0YXRlUGFyYW1zYCBpcyBkaWZmZXJlbnQgZGVwZW5kaW5nIG9uIHdoZXJlIGl0IGlzIGluamVjdGVkLlxuICAgICAqXG4gICAgICogLSBXaGVuIGluamVjdGVkIGludG8gYW4gYW5ndWxhciBzZXJ2aWNlLCB0aGUgb2JqZWN0IGluamVjdGVkIGlzIHRoZSBnbG9iYWwgKipTZXJ2aWNlIE9iamVjdCoqIHdpdGggdGhlIHBhcmFtZXRlciB2YWx1ZXMgZm9yIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCBgVHJhbnNpdGlvbmAuXG4gICAgICogLSBXaGVuIGluamVjdGVkIGludG8gdHJhbnNpdGlvbiBob29rcywgcmVzb2x2ZXMsIG9yIHZpZXcgY29udHJvbGxlcnMsIHRoZSBvYmplY3QgaXMgdGhlICoqUGVyLVRyYW5zaXRpb24gT2JqZWN0Kiogd2l0aCB0aGUgcGFyYW1ldGVyIHZhbHVlcyBmb3IgdGhlIHJ1bm5pbmcgYFRyYW5zaXRpb25gLlxuICAgICAqXG4gICAgICogQmVjYXVzZSBvZiB0aGVzZSBjb25mdXNpbmcgZGV0YWlscywgdGhpcyBzZXJ2aWNlIGlzIGRlcHJlY2F0ZWQuXG4gICAgICpcbiAgICAgKiAjIyMgSW5zdGVhZCBvZiB1c2luZyB0aGUgZ2xvYmFsIGAkc3RhdGVQYXJhbXNgIHNlcnZpY2Ugb2JqZWN0LFxuICAgICAqIGluamVjdCBbWyR1aVJvdXRlckdsb2JhbHNdXSBhbmQgdXNlIFtbVUlSb3V0ZXJHbG9iYWxzLnBhcmFtc11dXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIE15U2VydmljZS4kaW5qZWN0ID0gWyckdWlSb3V0ZXJHbG9iYWxzJ107XG4gICAgICogZnVuY3Rpb24gTXlTZXJ2aWNlKCR1aVJvdXRlckdsb2JhbHMpIHtcbiAgICAgKiAgIHJldHVybiB7XG4gICAgICogICAgIHBhcmFtVmFsdWVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICogICAgICAgcmV0dXJuICR1aVJvdXRlckdsb2JhbHMucGFyYW1zO1xuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIEluc3RlYWQgb2YgdXNpbmcgdGhlIHBlci10cmFuc2l0aW9uIGAkc3RhdGVQYXJhbXNgIG9iamVjdCxcbiAgICAgKiBpbmplY3QgdGhlIGN1cnJlbnQgYFRyYW5zaXRpb25gIChhcyBbWyR0cmFuc2l0aW9uJF1dKSBhbmQgdXNlIFtbVHJhbnNpdGlvbi5wYXJhbXNdXVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBNeUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHRyYW5zaXRpb24kJ107XG4gICAgICogZnVuY3Rpb24gTXlDb250cm9sbGVyKCR0cmFuc2l0aW9uJCkge1xuICAgICAqICAgdmFyIHVzZXJuYW1lID0gJHRyYW5zaXRpb24kLnBhcmFtcygpLnVzZXJuYW1lO1xuICAgICAqICAgLy8gLi4gZG8gc29tZXRoaW5nIHdpdGggdXNlcm5hbWVcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAtLS1cbiAgICAgKlxuICAgICAqIFRoaXMgb2JqZWN0IGNhbiBiZSBpbmplY3RlZCBpbnRvIG90aGVyIHNlcnZpY2VzLlxuICAgICAqXG4gICAgICogIyMjIyBEZXByZWNhdGVkIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBTb21lU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckc3RhdGVQYXJhbXMnXTtcbiAgICAgKiBmdW5jdGlvbiBTb21lU2VydmljZSgkaHR0cCwgJHN0YXRlUGFyYW1zKSB7XG4gICAgICogICByZXR1cm4ge1xuICAgICAqICAgICBnZXRVc2VyOiBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyAkc3RhdGVQYXJhbXMudXNlcm5hbWUpO1xuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKiBhbmd1bGFyLnNlcnZpY2UoJ1NvbWVTZXJ2aWNlJywgU29tZVNlcnZpY2UpO1xuICAgICAqIGBgYFxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiAjIEFuZ3VsYXIgMSBEaXJlY3RpdmVzXG4gICAgICpcbiAgICAgKiBUaGVzZSBhcmUgdGhlIGRpcmVjdGl2ZXMgaW5jbHVkZWQgaW4gVUktUm91dGVyIGZvciBBbmd1bGFyIDEuXG4gICAgICogVGhlc2UgZGlyZWN0aXZlcyBhcmUgdXNlZCBpbiB0ZW1wbGF0ZXMgdG8gY3JlYXRlIHZpZXdwb3J0cyBhbmQgbGluay9uYXZpZ2F0ZSB0byBzdGF0ZXMuXG4gICAgICpcbiAgICAgKiBAbmcxYXBpXG4gICAgICogQHByZWZlcnJlZFxuICAgICAqIEBtb2R1bGUgZGlyZWN0aXZlc1xuICAgICAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uIHBhcnNlU3RhdGVSZWYocmVmKSB7XG4gICAgICAgIHZhciBwYXJzZWQ7XG4gICAgICAgIHZhciBwYXJhbXNPbmx5ID0gcmVmLm1hdGNoKC9eXFxzKih7W159XSp9KVxccyokLyk7XG4gICAgICAgIGlmIChwYXJhbXNPbmx5KVxuICAgICAgICAgICAgcmVmID0gJygnICsgcGFyYW1zT25seVsxXSArICcpJztcbiAgICAgICAgcGFyc2VkID0gcmVmLnJlcGxhY2UoL1xcbi9nLCAnICcpLm1hdGNoKC9eXFxzKihbXihdKj8pXFxzKihcXCgoLiopXFwpKT9cXHMqJC8pO1xuICAgICAgICBpZiAoIXBhcnNlZCB8fCBwYXJzZWQubGVuZ3RoICE9PSA0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0ZSByZWYgJ1wiICsgcmVmICsgXCInXCIpO1xuICAgICAgICByZXR1cm4geyBzdGF0ZTogcGFyc2VkWzFdIHx8IG51bGwsIHBhcmFtRXhwcjogcGFyc2VkWzNdIHx8IG51bGwgfTtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBzdGF0ZUNvbnRleHQoZWwpIHtcbiAgICAgICAgdmFyICR1aVZpZXcgPSBlbC5wYXJlbnQoKS5pbmhlcml0ZWREYXRhKCckdWlWaWV3Jyk7XG4gICAgICAgIHZhciBwYXRoID0gY29yZS5wYXJzZSgnJGNmZy5wYXRoJykoJHVpVmlldyk7XG4gICAgICAgIHJldHVybiBwYXRoID8gY29yZS50YWlsKHBhdGgpLnN0YXRlLm5hbWUgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gcHJvY2Vzc2VkRGVmKCRzdGF0ZSwgJGVsZW1lbnQsIGRlZikge1xuICAgICAgICB2YXIgdWlTdGF0ZSA9IGRlZi51aVN0YXRlIHx8ICRzdGF0ZS5jdXJyZW50Lm5hbWU7XG4gICAgICAgIHZhciB1aVN0YXRlT3B0cyA9IGNvcmUuZXh0ZW5kKGRlZmF1bHRPcHRzKCRlbGVtZW50LCAkc3RhdGUpLCBkZWYudWlTdGF0ZU9wdHMgfHwge30pO1xuICAgICAgICB2YXIgaHJlZiA9ICRzdGF0ZS5ocmVmKHVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zLCB1aVN0YXRlT3B0cyk7XG4gICAgICAgIHJldHVybiB7IHVpU3RhdGU6IHVpU3RhdGUsIHVpU3RhdGVQYXJhbXM6IGRlZi51aVN0YXRlUGFyYW1zLCB1aVN0YXRlT3B0czogdWlTdGF0ZU9wdHMsIGhyZWY6IGhyZWYgfTtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBnZXRUeXBlSW5mbyhlbCkge1xuICAgICAgICAvLyBTVkdBRWxlbWVudCBkb2VzIG5vdCB1c2UgdGhlIGhyZWYgYXR0cmlidXRlLCBidXQgcmF0aGVyIHRoZSAneGxpbmtIcmVmJyBhdHRyaWJ1dGUuXG4gICAgICAgIHZhciBpc1N2ZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbC5wcm9wKCdocmVmJykpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nO1xuICAgICAgICB2YXIgaXNGb3JtID0gZWxbMF0ubm9kZU5hbWUgPT09ICdGT1JNJztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF0dHI6IGlzRm9ybSA/ICdhY3Rpb24nIDogaXNTdmcgPyAneGxpbms6aHJlZicgOiAnaHJlZicsXG4gICAgICAgICAgICBpc0FuY2hvcjogZWwucHJvcCgndGFnTmFtZScpLnRvVXBwZXJDYXNlKCkgPT09ICdBJyxcbiAgICAgICAgICAgIGNsaWNrYWJsZTogIWlzRm9ybSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBjbGlja0hvb2soZWwsICRzdGF0ZSwgJHRpbWVvdXQsIHR5cGUsIGdldERlZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBidXR0b24gPSBlLndoaWNoIHx8IGUuYnV0dG9uLCB0YXJnZXQgPSBnZXREZWYoKTtcbiAgICAgICAgICAgIGlmICghKGJ1dHRvbiA+IDEgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCBlLnNoaWZ0S2V5IHx8IGVsLmF0dHIoJ3RhcmdldCcpKSkge1xuICAgICAgICAgICAgICAgIC8vIEhBQ0s6IFRoaXMgaXMgdG8gYWxsb3cgbmctY2xpY2tzIHRvIGJlIHByb2Nlc3NlZCBiZWZvcmUgdGhlIHRyYW5zaXRpb24gaXMgaW5pdGlhdGVkOlxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uXzEgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWwuYXR0cignZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKHRhcmdldC51aVN0YXRlLCB0YXJnZXQudWlTdGF0ZVBhcmFtcywgdGFyZ2V0LnVpU3RhdGVPcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgc3RhdGUgaGFzIG5vIFVSTCwgaWdub3JlIG9uZSBwcmV2ZW50RGVmYXVsdCBmcm9tIHRoZSA8YT4gZGlyZWN0aXZlLlxuICAgICAgICAgICAgICAgIHZhciBpZ25vcmVQcmV2ZW50RGVmYXVsdENvdW50XzEgPSB0eXBlLmlzQW5jaG9yICYmICF0YXJnZXQuaHJlZiA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZ25vcmVQcmV2ZW50RGVmYXVsdENvdW50XzEtLSA8PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRyYW5zaXRpb25fMSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBkZWZhdWx0T3B0cyhlbCwgJHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWxhdGl2ZTogc3RhdGVDb250ZXh0KGVsKSB8fCAkc3RhdGUuJGN1cnJlbnQsXG4gICAgICAgICAgICBpbmhlcml0OiB0cnVlLFxuICAgICAgICAgICAgc291cmNlOiAnc3JlZicsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gYmluZEV2ZW50cyhlbGVtZW50LCBzY29wZSwgaG9va0ZuLCB1aVN0YXRlT3B0cykge1xuICAgICAgICB2YXIgZXZlbnRzO1xuICAgICAgICBpZiAodWlTdGF0ZU9wdHMpIHtcbiAgICAgICAgICAgIGV2ZW50cyA9IHVpU3RhdGVPcHRzLmV2ZW50cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvcmUuaXNBcnJheShldmVudHMpKSB7XG4gICAgICAgICAgICBldmVudHMgPSBbJ2NsaWNrJ107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9uID0gZWxlbWVudC5vbiA/ICdvbicgOiAnYmluZCc7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZXZlbnRzXzEgPSBldmVudHM7IF9pIDwgZXZlbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IGV2ZW50c18xW19pXTtcbiAgICAgICAgICAgIGVsZW1lbnRbb25dKGV2ZW50XzEsIGhvb2tGbik7XG4gICAgICAgIH1cbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvZmYgPSBlbGVtZW50Lm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGV2ZW50c18yID0gZXZlbnRzOyBfaSA8IGV2ZW50c18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBldmVudF8yID0gZXZlbnRzXzJbX2ldO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRbb2ZmXShldmVudF8yLCBob29rRm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYHVpLXNyZWZgOiBBIGRpcmVjdGl2ZSBmb3IgbGlua2luZyB0byBhIHN0YXRlXG4gICAgICpcbiAgICAgKiBBIGRpcmVjdGl2ZSB3aGljaCBsaW5rcyB0byBhIHN0YXRlIChhbmQgb3B0aW9uYWxseSwgcGFyYW1ldGVycykuXG4gICAgICogV2hlbiBjbGlja2VkLCB0aGlzIGRpcmVjdGl2ZSBhY3RpdmF0ZXMgdGhlIGxpbmtlZCBzdGF0ZSB3aXRoIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgICAqXG4gICAgICogIyMjIExpbmtlZCBTdGF0ZVxuICAgICAqIFRoZSBhdHRyaWJ1dGUgdmFsdWUgb2YgdGhlIGB1aS1zcmVmYCBpcyB0aGUgbmFtZSBvZiB0aGUgc3RhdGUgdG8gbGluayB0by5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBUaGlzIHdpbGwgYWN0aXZhdGUgdGhlIGBob21lYCBzdGF0ZSB3aGVuIHRoZSBsaW5rIGlzIGNsaWNrZWQuXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIHVpLXNyZWY9XCJob21lXCI+SG9tZTwvYT5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyBSZWxhdGl2ZSBMaW5rc1xuICAgICAqIFlvdSBjYW4gYWxzbyB1c2UgcmVsYXRpdmUgc3RhdGUgcGF0aHMgd2l0aGluIGB1aS1zcmVmYCwganVzdCBsaWtlIGEgcmVsYXRpdmUgcGF0aCBwYXNzZWQgdG8gYCRzdGF0ZS5nbygpYCAoW1tTdGF0ZVNlcnZpY2UuZ29dXSkuXG4gICAgICogWW91IGp1c3QgbmVlZCB0byBiZSBhd2FyZSB0aGF0IHRoZSBwYXRoIGlzIHJlbGF0aXZlIHRvIHRoZSBzdGF0ZSB0aGF0ICpjcmVhdGVkKiB0aGUgbGluay5cbiAgICAgKiBUaGlzIGFsbG93cyBhIHN0YXRlIHRvIGNyZWF0ZSBhIHJlbGF0aXZlIGB1aS1zcmVmYCB3aGljaCBhbHdheXMgdGFyZ2V0cyB0aGUgc2FtZSBkZXN0aW5hdGlvbi5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBCb3RoIHRoZXNlIGxpbmtzIGFyZSByZWxhdGl2ZSB0byB0aGUgcGFyZW50IHN0YXRlLCBldmVuIHdoZW4gYSBjaGlsZCBzdGF0ZSBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8YSB1aS1zcmVmPVwiLmNoaWxkMVwiPmNoaWxkIDEgc3RhdGU8L2E+XG4gICAgICogPGEgdWktc3JlZj1cIi5jaGlsZDJcIj5jaGlsZCAyIHN0YXRlPC9hPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhpcyBsaW5rIGFjdGl2YXRlcyB0aGUgcGFyZW50IHN0YXRlLlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8YSB1aS1zcmVmPVwiXlwiPlJldHVybjwvYT5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyBocmVmc1xuICAgICAqIElmIHRoZSBsaW5rZWQgc3RhdGUgaGFzIGEgVVJMLCB0aGUgZGlyZWN0aXZlIHdpbGwgYXV0b21hdGljYWxseSBnZW5lcmF0ZSBhbmRcbiAgICAgKiB1cGRhdGUgdGhlIGBocmVmYCBhdHRyaWJ1dGUgKHVzaW5nIHRoZSBbW1N0YXRlU2VydmljZS5ocmVmXV0gIG1ldGhvZCkuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogQXNzdW1pbmcgdGhlIGB1c2Vyc2Agc3RhdGUgaGFzIGEgdXJsIG9mIGAvdXNlcnMvYFxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8YSB1aS1zcmVmPVwidXNlcnNcIiBocmVmPVwiL3VzZXJzL1wiPlVzZXJzPC9hPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIFBhcmFtZXRlciBWYWx1ZXNcbiAgICAgKiBJbiBhZGRpdGlvbiB0byB0aGUgc3RhdGUgbmFtZSwgYSBgdWktc3JlZmAgY2FuIGluY2x1ZGUgcGFyYW1ldGVyIHZhbHVlcyB3aGljaCBhcmUgYXBwbGllZCB3aGVuIGFjdGl2YXRpbmcgdGhlIHN0YXRlLlxuICAgICAqIFBhcmFtIHZhbHVlcyBjYW4gYmUgcHJvdmlkZWQgaW4gdGhlIGB1aS1zcmVmYCB2YWx1ZSBhZnRlciB0aGUgc3RhdGUgbmFtZSwgZW5jbG9zZWQgYnkgcGFyZW50aGVzZXMuXG4gICAgICogVGhlIGNvbnRlbnQgaW5zaWRlIHRoZSBwYXJlbnRoZXNlcyBpcyBhbiBleHByZXNzaW9uLCBldmFsdWF0ZWQgdG8gdGhlIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogVGhpcyBleGFtcGxlIHJlbmRlcnMgYSBsaXN0IG9mIGxpbmtzIHRvIHVzZXJzLlxuICAgICAqIFRoZSBzdGF0ZSdzIGB1c2VySWRgIHBhcmFtZXRlciB2YWx1ZSBjb21lcyBmcm9tIGVhY2ggdXNlcidzIGB1c2VyLmlkYCBwcm9wZXJ0eS5cbiAgICAgKiBgYGBodG1sXG4gICAgICogPGxpIG5nLXJlcGVhdD1cInVzZXIgaW4gdXNlcnNcIj5cbiAgICAgKiAgIDxhIHVpLXNyZWY9XCJ1c2Vycy5kZXRhaWwoeyB1c2VySWQ6IHVzZXIuaWQgfSlcIj57eyB1c2VyLmRpc3BsYXlOYW1lIH19PC9hPlxuICAgICAqIDwvbGk+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBOb3RlOlxuICAgICAqIFRoZSBwYXJhbWV0ZXIgdmFsdWVzIGV4cHJlc3Npb24gaXMgYCR3YXRjaGBlZCBmb3IgdXBkYXRlcy5cbiAgICAgKlxuICAgICAqICMjIyBUcmFuc2l0aW9uIE9wdGlvbnNcbiAgICAgKiBZb3UgY2FuIHNwZWNpZnkgW1tUcmFuc2l0aW9uT3B0aW9uc11dIHRvIHBhc3MgdG8gW1tTdGF0ZVNlcnZpY2UuZ29dXSBieSB1c2luZyB0aGUgYHVpLXNyZWYtb3B0c2AgYXR0cmlidXRlLlxuICAgICAqIE9wdGlvbnMgYXJlIHJlc3RyaWN0ZWQgdG8gYGxvY2F0aW9uYCwgYGluaGVyaXRgLCBhbmQgYHJlbG9hZGAuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIHVpLXNyZWY9XCJob21lXCIgdWktc3JlZi1vcHRzPVwieyByZWxvYWQ6IHRydWUgfVwiPkhvbWU8L2E+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgT3RoZXIgRE9NIEV2ZW50c1xuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIGN1c3RvbWl6ZSB3aGljaCBET00gZXZlbnRzIHRvIHJlc3BvbmQgdG8gKGluc3RlYWQgb2YgYGNsaWNrYCkgYnlcbiAgICAgKiBwcm92aWRpbmcgYW4gYGV2ZW50c2AgYXJyYXkgaW4gdGhlIGB1aS1zcmVmLW9wdHNgIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdWktc3JlZj1cImNvbnRhY3RzXCIgdWktc3JlZi1vcHRzPVwieyBldmVudHM6IFsnY2hhbmdlJywgJ2JsdXInXSB9XCI+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgSGlnaGxpZ2h0aW5nIHRoZSBhY3RpdmUgbGlua1xuICAgICAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggW1t1aVNyZWZBY3RpdmVdXSB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rLlxuICAgICAqXG4gICAgICogIyMjIEV4YW1wbGVzXG4gICAgICogSWYgeW91IGhhdmUgdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZTpcbiAgICAgKlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8YSB1aS1zcmVmPVwiaG9tZVwiPkhvbWU8L2E+XG4gICAgICogPGEgdWktc3JlZj1cImFib3V0XCI+QWJvdXQ8L2E+XG4gICAgICogPGEgdWktc3JlZj1cIntwYWdlOiAyfVwiPk5leHQgcGFnZTwvYT5cbiAgICAgKlxuICAgICAqIDx1bD5cbiAgICAgKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAgICAgKiAgICAgICAgIDxhIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPnt7IGNvbnRhY3QubmFtZSB9fTwvYT5cbiAgICAgKiAgICAgPC9saT5cbiAgICAgKiA8L3VsPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhlbiAoYXNzdW1pbmcgdGhlIGN1cnJlbnQgc3RhdGUgaXMgYGNvbnRhY3RzYCkgdGhlIHJlbmRlcmVkIGh0bWwgaW5jbHVkaW5nIGhyZWZzIHdvdWxkIGJlOlxuICAgICAqXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIGhyZWY9XCIjL2hvbWVcIiB1aS1zcmVmPVwiaG9tZVwiPkhvbWU8L2E+XG4gICAgICogPGEgaHJlZj1cIiMvYWJvdXRcIiB1aS1zcmVmPVwiYWJvdXRcIj5BYm91dDwvYT5cbiAgICAgKiA8YSBocmVmPVwiIy9jb250YWN0cz9wYWdlPTJcIiB1aS1zcmVmPVwie3BhZ2U6IDJ9XCI+TmV4dCBwYWdlPC9hPlxuICAgICAqXG4gICAgICogPHVsPlxuICAgICAqICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxuICAgICAqICAgICAgICAgPGEgaHJlZj1cIiMvY29udGFjdHMvMVwiIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPkpvZTwvYT5cbiAgICAgKiAgICAgPC9saT5cbiAgICAgKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAgICAgKiAgICAgICAgIDxhIGhyZWY9XCIjL2NvbnRhY3RzLzJcIiB1aS1zcmVmPVwiY29udGFjdHMuZGV0YWlsKHsgaWQ6IGNvbnRhY3QuaWQgfSlcIj5BbGljZTwvYT5cbiAgICAgKiAgICAgPC9saT5cbiAgICAgKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAgICAgKiAgICAgICAgIDxhIGhyZWY9XCIjL2NvbnRhY3RzLzNcIiB1aS1zcmVmPVwiY29udGFjdHMuZGV0YWlsKHsgaWQ6IGNvbnRhY3QuaWQgfSlcIj5Cb2I8L2E+XG4gICAgICogICAgIDwvbGk+XG4gICAgICogPC91bD5cbiAgICAgKlxuICAgICAqIDxhIGhyZWY9XCIjL2hvbWVcIiB1aS1zcmVmPVwiaG9tZVwiIHVpLXNyZWYtb3B0cz1cIntyZWxvYWQ6IHRydWV9XCI+SG9tZTwvYT5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyBOb3Rlc1xuICAgICAqXG4gICAgICogLSBZb3UgY2FuIHVzZSBgdWktc3JlZmAgdG8gY2hhbmdlICoqb25seSB0aGUgcGFyYW1ldGVyIHZhbHVlcyoqIGJ5IG9taXR0aW5nIHRoZSBzdGF0ZSBuYW1lIGFuZCBwYXJlbnRoZXNlcy5cbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogU2V0cyB0aGUgYGxhbmdgIHBhcmFtZXRlciB0byBgZW5gIGFuZCByZW1haW5zIG9uIHRoZSBzYW1lIHN0YXRlLlxuICAgICAqXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxhIHVpLXNyZWY9XCJ7IGxhbmc6ICdlbicgfVwiPkVuZ2xpc2g8L2E+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAtIEEgbWlkZGxlLWNsaWNrLCByaWdodC1jbGljaywgb3IgY3RybC1jbGljayBpcyBoYW5kbGVkIChuYXRpdmVseSkgYnkgdGhlIGJyb3dzZXIgdG8gb3BlbiB0aGUgaHJlZiBpbiBhIG5ldyB3aW5kb3csIGZvciBleGFtcGxlLlxuICAgICAqXG4gICAgICogLSBVbmxpa2UgdGhlIHBhcmFtZXRlciB2YWx1ZXMgZXhwcmVzc2lvbiwgdGhlIHN0YXRlIG5hbWUgaXMgbm90IGAkd2F0Y2hgZWQgKGZvciBwZXJmb3JtYW5jZSByZWFzb25zKS5cbiAgICAgKiBJZiB5b3UgbmVlZCB0byBkeW5hbWljYWxseSB1cGRhdGUgdGhlIHN0YXRlIGJlaW5nIGxpbmtlZCB0bywgdXNlIHRoZSBmdWxseSBkeW5hbWljIFtbdWlTdGF0ZV1dIGRpcmVjdGl2ZS5cbiAgICAgKi9cbiAgICB2YXIgdWlTcmVmRGlyZWN0aXZlO1xuICAgIHVpU3JlZkRpcmVjdGl2ZSA9IFtcbiAgICAgICAgJyR1aVJvdXRlcicsXG4gICAgICAgICckdGltZW91dCcsXG4gICAgICAgIGZ1bmN0aW9uICRTdGF0ZVJlZkRpcmVjdGl2ZSgkdWlSb3V0ZXIsICR0aW1lb3V0KSB7XG4gICAgICAgICAgICB2YXIgJHN0YXRlID0gJHVpUm91dGVyLnN0YXRlU2VydmljZTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgICAgICByZXF1aXJlOiBbJz9edWlTcmVmQWN0aXZlJywgJz9edWlTcmVmQWN0aXZlRXEnXSxcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCB1aVNyZWZBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBnZXRUeXBlSW5mbyhlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IHVpU3JlZkFjdGl2ZVsxXSB8fCB1aVNyZWZBY3RpdmVbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB1bmxpbmtJbmZvRm4gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaG9va0ZuO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmF3RGVmID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBnZXREZWYgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBwcm9jZXNzZWREZWYoJHN0YXRlLCBlbGVtZW50LCByYXdEZWYpOyB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVmID0gcGFyc2VTdGF0ZVJlZihhdHRycy51aVNyZWYpO1xuICAgICAgICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZSA9IHJlZi5zdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgcmF3RGVmLnVpU3RhdGVPcHRzID0gYXR0cnMudWlTcmVmT3B0cyA/IHNjb3BlLiRldmFsKGF0dHJzLnVpU3JlZk9wdHMpIDoge307XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWYgPSBnZXREZWYoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmxpbmtJbmZvRm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5saW5rSW5mb0ZuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubGlua0luZm9GbiA9IGFjdGl2ZS4kJGFkZFN0YXRlSW5mbyhkZWYudWlTdGF0ZSwgZGVmLnVpU3RhdGVQYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZi5ocmVmICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMuJHNldCh0eXBlLmF0dHIsIGRlZi5ocmVmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVmLnBhcmFtRXhwcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKHJlZi5wYXJhbUV4cHIsIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZVBhcmFtcyA9IGNvcmUuZXh0ZW5kKHt9LCB2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZVBhcmFtcyA9IGNvcmUuZXh0ZW5kKHt9LCBzY29wZS4kZXZhbChyZWYucGFyYW1FeHByKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQodXBkYXRlKSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdWlSb3V0ZXIudHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0eXBlLmNsaWNrYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaG9va0ZuID0gY2xpY2tIb29rKGVsZW1lbnQsICRzdGF0ZSwgJHRpbWVvdXQsIHR5cGUsIGdldERlZik7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRFdmVudHMoZWxlbWVudCwgc2NvcGUsIGhvb2tGbiwgcmF3RGVmLnVpU3RhdGVPcHRzKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICBdO1xuICAgIC8qKlxuICAgICAqIGB1aS1zdGF0ZWA6IEEgZnVsbHkgZHluYW1pYyBkaXJlY3RpdmUgZm9yIGxpbmtpbmcgdG8gYSBzdGF0ZVxuICAgICAqXG4gICAgICogQSBkaXJlY3RpdmUgd2hpY2ggbGlua3MgdG8gYSBzdGF0ZSAoYW5kIG9wdGlvbmFsbHksIHBhcmFtZXRlcnMpLlxuICAgICAqIFdoZW4gY2xpY2tlZCwgdGhpcyBkaXJlY3RpdmUgYWN0aXZhdGVzIHRoZSBsaW5rZWQgc3RhdGUgd2l0aCB0aGUgc3VwcGxpZWQgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICAgKlxuICAgICAqICoqVGhpcyBkaXJlY3RpdmUgaXMgdmVyeSBzaW1pbGFyIHRvIFtbdWlTcmVmXV0sIGJ1dCBpdCBgJG9ic2VydmVgcyBhbmQgYCR3YXRjaGBlcy9ldmFsdWF0ZXMgYWxsIGl0cyBpbnB1dHMuKipcbiAgICAgKlxuICAgICAqIEEgZGlyZWN0aXZlIHdoaWNoIGxpbmtzIHRvIGEgc3RhdGUgKGFuZCBvcHRpb25hbGx5LCBwYXJhbWV0ZXJzKS5cbiAgICAgKiBXaGVuIGNsaWNrZWQsIHRoaXMgZGlyZWN0aXZlIGFjdGl2YXRlcyB0aGUgbGlua2VkIHN0YXRlIHdpdGggdGhlIHN1cHBsaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiAjIyMgTGlua2VkIFN0YXRlXG4gICAgICogVGhlIGF0dHJpYnV0ZSB2YWx1ZSBvZiBgdWktc3RhdGVgIGlzIGFuIGV4cHJlc3Npb24gd2hpY2ggaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIHRoZSBzdGF0ZSB0byBsaW5rIHRvLlxuICAgICAqICoqVGhpcyBpcyBpbiBjb250cmFzdCB3aXRoIGB1aS1zcmVmYCwgd2hpY2ggdGFrZXMgYSBzdGF0ZSBuYW1lIGFzIGEgc3RyaW5nIGxpdGVyYWwuKipcbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBDcmVhdGUgYSBsaXN0IG9mIGxpbmtzLlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8bGkgbmctcmVwZWF0PVwibGluayBpbiBuYXZsaW5rc1wiPlxuICAgICAqICAgPGEgdWktc3RhdGU9XCJsaW5rLnN0YXRlXCI+e3sgbGluay5kaXNwbGF5TmFtZSB9fTwvYT5cbiAgICAgKiA8L2xpPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIFJlbGF0aXZlIExpbmtzXG4gICAgICogSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgcmVsYXRpdmUgcGF0aCwgaXQgaXMgcHJvY2Vzc2VkIGxpa2UgW1t1aVNyZWZdXS5cbiAgICAgKiBZb3UganVzdCBuZWVkIHRvIGJlIGF3YXJlIHRoYXQgdGhlIHBhdGggaXMgcmVsYXRpdmUgdG8gdGhlIHN0YXRlIHRoYXQgKmNyZWF0ZWQqIHRoZSBsaW5rLlxuICAgICAqIFRoaXMgYWxsb3dzIGEgc3RhdGUgdG8gY3JlYXRlIHJlbGF0aXZlIGB1aS1zdGF0ZWAgd2hpY2ggYWx3YXlzIHRhcmdldHMgdGhlIHNhbWUgZGVzdGluYXRpb24uXG4gICAgICpcbiAgICAgKiAjIyMgaHJlZnNcbiAgICAgKiBJZiB0aGUgbGlua2VkIHN0YXRlIGhhcyBhIFVSTCwgdGhlIGRpcmVjdGl2ZSB3aWxsIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgYW5kXG4gICAgICogdXBkYXRlIHRoZSBgaHJlZmAgYXR0cmlidXRlICh1c2luZyB0aGUgW1tTdGF0ZVNlcnZpY2UuaHJlZl1dICBtZXRob2QpLlxuICAgICAqXG4gICAgICogIyMjIFBhcmFtZXRlciBWYWx1ZXNcbiAgICAgKiBJbiBhZGRpdGlvbiB0byB0aGUgc3RhdGUgbmFtZSBleHByZXNzaW9uLCBhIGB1aS1zdGF0ZWAgY2FuIGluY2x1ZGUgcGFyYW1ldGVyIHZhbHVlcyB3aGljaCBhcmUgYXBwbGllZCB3aGVuIGFjdGl2YXRpbmcgdGhlIHN0YXRlLlxuICAgICAqIFBhcmFtIHZhbHVlcyBzaG91bGQgYmUgcHJvdmlkZWQgdXNpbmcgdGhlIGB1aS1zdGF0ZS1wYXJhbXNgIGF0dHJpYnV0ZS5cbiAgICAgKiBUaGUgYHVpLXN0YXRlLXBhcmFtc2AgYXR0cmlidXRlIHZhbHVlIGlzIGAkd2F0Y2hgZWQgYW5kIGV2YWx1YXRlZCBhcyBhbiBleHByZXNzaW9uLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIFRoaXMgZXhhbXBsZSByZW5kZXJzIGEgbGlzdCBvZiBsaW5rcyB3aXRoIHBhcmFtIHZhbHVlcy5cbiAgICAgKiBUaGUgc3RhdGUncyBgdXNlcklkYCBwYXJhbWV0ZXIgdmFsdWUgY29tZXMgZnJvbSBlYWNoIHVzZXIncyBgdXNlci5pZGAgcHJvcGVydHkuXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxsaSBuZy1yZXBlYXQ9XCJsaW5rIGluIG5hdmxpbmtzXCI+XG4gICAgICogICA8YSB1aS1zdGF0ZT1cImxpbmsuc3RhdGVcIiB1aS1zdGF0ZS1wYXJhbXM9XCJsaW5rLnBhcmFtc1wiPnt7IGxpbmsuZGlzcGxheU5hbWUgfX08L2E+XG4gICAgICogPC9saT5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyBUcmFuc2l0aW9uIE9wdGlvbnNcbiAgICAgKiBZb3UgY2FuIHNwZWNpZnkgW1tUcmFuc2l0aW9uT3B0aW9uc11dIHRvIHBhc3MgdG8gW1tTdGF0ZVNlcnZpY2UuZ29dXSBieSB1c2luZyB0aGUgYHVpLXN0YXRlLW9wdHNgIGF0dHJpYnV0ZS5cbiAgICAgKiBPcHRpb25zIGFyZSByZXN0cmljdGVkIHRvIGBsb2NhdGlvbmAsIGBpbmhlcml0YCwgYW5kIGByZWxvYWRgLlxuICAgICAqIFRoZSB2YWx1ZSBvZiB0aGUgYHVpLXN0YXRlLW9wdHNgIGlzIGAkd2F0Y2hgZWQgYW5kIGV2YWx1YXRlZCBhcyBhbiBleHByZXNzaW9uLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8YSB1aS1zdGF0ZT1cInJldHVybnRvLnN0YXRlXCIgdWktc3RhdGUtb3B0cz1cInsgcmVsb2FkOiB0cnVlIH1cIj5Ib21lPC9hPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIE90aGVyIERPTSBFdmVudHNcbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYWxzbyBjdXN0b21pemUgd2hpY2ggRE9NIGV2ZW50cyB0byByZXNwb25kIHRvIChpbnN0ZWFkIG9mIGBjbGlja2ApIGJ5XG4gICAgICogcHJvdmlkaW5nIGFuIGBldmVudHNgIGFycmF5IGluIHRoZSBgdWktc3RhdGUtb3B0c2AgYXR0cmlidXRlLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8aW5wdXQgdHlwZT1cInRleHRcIiB1aS1zdGF0ZT1cImNvbnRhY3RzXCIgdWktc3RhdGUtb3B0cz1cInsgZXZlbnRzOiBbJ2NoYW5nZScsICdibHVyJ10gfVwiPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIEhpZ2hsaWdodGluZyB0aGUgYWN0aXZlIGxpbmtcbiAgICAgKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIFtbdWlTcmVmQWN0aXZlXV0gdG8gaGlnaGxpZ2h0IHRoZSBhY3RpdmUgbGluay5cbiAgICAgKlxuICAgICAqICMjIyBOb3Rlc1xuICAgICAqXG4gICAgICogLSBZb3UgY2FuIHVzZSBgdWktcGFyYW1zYCB0byBjaGFuZ2UgKipvbmx5IHRoZSBwYXJhbWV0ZXIgdmFsdWVzKiogYnkgb21pdHRpbmcgdGhlIHN0YXRlIG5hbWUgYW5kIHN1cHBseWluZyBvbmx5IGB1aS1zdGF0ZS1wYXJhbXNgLlxuICAgICAqICAgSG93ZXZlciwgaXQgbWlnaHQgYmUgc2ltcGxlciB0byB1c2UgW1t1aVNyZWZdXSBwYXJhbWV0ZXItb25seSBsaW5rcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBTZXRzIHRoZSBgbGFuZ2AgcGFyYW1ldGVyIHRvIGBlbmAgYW5kIHJlbWFpbnMgb24gdGhlIHNhbWUgc3RhdGUuXG4gICAgICpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGEgdWktc3RhdGU9XCJcIiB1aS1zdGF0ZS1wYXJhbXM9XCJ7IGxhbmc6ICdlbicgfVwiPkVuZ2xpc2g8L2E+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAtIEEgbWlkZGxlLWNsaWNrLCByaWdodC1jbGljaywgb3IgY3RybC1jbGljayBpcyBoYW5kbGVkIChuYXRpdmVseSkgYnkgdGhlIGJyb3dzZXIgdG8gb3BlbiB0aGUgaHJlZiBpbiBhIG5ldyB3aW5kb3csIGZvciBleGFtcGxlLlxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHZhciB1aVN0YXRlRGlyZWN0aXZlO1xuICAgIHVpU3RhdGVEaXJlY3RpdmUgPSBbXG4gICAgICAgICckdWlSb3V0ZXInLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICBmdW5jdGlvbiAkU3RhdGVSZWZEeW5hbWljRGlyZWN0aXZlKCR1aVJvdXRlciwgJHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHZhciAkc3RhdGUgPSAkdWlSb3V0ZXIuc3RhdGVTZXJ2aWNlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgICAgIHJlcXVpcmU6IFsnP151aVNyZWZBY3RpdmUnLCAnP151aVNyZWZBY3RpdmVFcSddLFxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIHVpU3JlZkFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGdldFR5cGVJbmZvKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlID0gdWlTcmVmQWN0aXZlWzFdIHx8IHVpU3JlZkFjdGl2ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVubGlua0luZm9GbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBob29rRm47XG4gICAgICAgICAgICAgICAgICAgIHZhciByYXdEZWYgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdldERlZiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb2Nlc3NlZERlZigkc3RhdGUsIGVsZW1lbnQsIHJhd0RlZik7IH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dEF0dHJzID0gWyd1aVN0YXRlJywgJ3VpU3RhdGVQYXJhbXMnLCAndWlTdGF0ZU9wdHMnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdhdGNoRGVyZWdGbnMgPSBpbnB1dEF0dHJzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBhdHRyKSB7IHJldHVybiAoKGFjY1thdHRyXSA9IGNvcmUubm9vcCksIGFjYyk7IH0sIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZiA9IGdldERlZigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVubGlua0luZm9GbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmxpbmtJbmZvRm4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5saW5rSW5mb0ZuID0gYWN0aXZlLiQkYWRkU3RhdGVJbmZvKGRlZi51aVN0YXRlLCBkZWYudWlTdGF0ZVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmhyZWYgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRycy4kc2V0KHR5cGUuYXR0ciwgZGVmLmhyZWYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0QXR0cnMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd0RlZltmaWVsZF0gPSBhdHRyc1tmaWVsZF0gPyBzY29wZS4kZXZhbChhdHRyc1tmaWVsZF0pIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKGZpZWxkLCBmdW5jdGlvbiAoZXhwcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoRGVyZWdGbnNbZmllbGRdKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hEZXJlZ0Zuc1tmaWVsZF0gPSBzY29wZS4kd2F0Y2goZXhwciwgZnVuY3Rpb24gKG5ld3ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdEZWZbZmllbGRdID0gbmV3dmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQodXBkYXRlKSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdWlSb3V0ZXIudHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0eXBlLmNsaWNrYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaG9va0ZuID0gY2xpY2tIb29rKGVsZW1lbnQsICRzdGF0ZSwgJHRpbWVvdXQsIHR5cGUsIGdldERlZik7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRFdmVudHMoZWxlbWVudCwgc2NvcGUsIGhvb2tGbiwgcmF3RGVmLnVpU3RhdGVPcHRzKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICBdO1xuICAgIC8qKlxuICAgICAqIGB1aS1zcmVmLWFjdGl2ZWAgYW5kIGB1aS1zcmVmLWFjdGl2ZS1lcWA6IEEgZGlyZWN0aXZlIHRoYXQgYWRkcyBhIENTUyBjbGFzcyB3aGVuIGEgYHVpLXNyZWZgIGlzIGFjdGl2ZVxuICAgICAqXG4gICAgICogQSBkaXJlY3RpdmUgd29ya2luZyBhbG9uZ3NpZGUgW1t1aVNyZWZdXSBhbmQgW1t1aVN0YXRlXV0gdG8gYWRkIGNsYXNzZXMgdG8gYW4gZWxlbWVudCB3aGVuIHRoZVxuICAgICAqIHJlbGF0ZWQgZGlyZWN0aXZlJ3Mgc3RhdGUgaXMgYWN0aXZlIChhbmQgcmVtb3ZlIHRoZW0gd2hlbiBpdCBpcyBpbmFjdGl2ZSkuXG4gICAgICpcbiAgICAgKiBUaGUgcHJpbWFyeSB1c2UtY2FzZSBpcyB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rIGluIG5hdmlnYXRpb24gbWVudXMsXG4gICAgICogZGlzdGluZ3Vpc2hpbmcgaXQgZnJvbSB0aGUgaW5hY3RpdmUgbWVudSBpdGVtcy5cbiAgICAgKlxuICAgICAqICMjIyBMaW5raW5nIHRvIGEgYHVpLXNyZWZgIG9yIGB1aS1zdGF0ZWBcbiAgICAgKiBgdWktc3JlZi1hY3RpdmVgIGNhbiBsaXZlIG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgYHVpLXNyZWZgL2B1aS1zdGF0ZWAsIG9yIGl0IGNhbiBiZSBvbiBhIHBhcmVudCBlbGVtZW50LlxuICAgICAqIElmIGEgYHVpLXNyZWYtYWN0aXZlYCBpcyBhIHBhcmVudCB0byBtb3JlIHRoYW4gb25lIGB1aS1zcmVmYC9gdWktc3RhdGVgLCBpdCB3aWxsIGFwcGx5IHRoZSBDU1MgY2xhc3Mgd2hlbiAqKmFueSBvZiB0aGUgbGlua3MgYXJlIGFjdGl2ZSoqLlxuICAgICAqXG4gICAgICogIyMjIE1hdGNoaW5nXG4gICAgICpcbiAgICAgKiBUaGUgYHVpLXNyZWYtYWN0aXZlYCBkaXJlY3RpdmUgYXBwbGllcyB0aGUgQ1NTIGNsYXNzIHdoZW4gdGhlIGB1aS1zcmVmYC9gdWktc3RhdGVgJ3MgdGFyZ2V0IHN0YXRlICoqb3IgYW55IGNoaWxkIHN0YXRlIGlzIGFjdGl2ZSoqLlxuICAgICAqIFRoaXMgaXMgYSBcImZ1enp5IG1hdGNoXCIgd2hpY2ggdXNlcyBbW1N0YXRlU2VydmljZS5pbmNsdWRlc11dLlxuICAgICAqXG4gICAgICogVGhlIGB1aS1zcmVmLWFjdGl2ZS1lcWAgZGlyZWN0aXZlIGFwcGxpZXMgdGhlIENTUyBjbGFzcyB3aGVuIHRoZSBgdWktc3JlZmAvYHVpLXN0YXRlYCdzIHRhcmdldCBzdGF0ZSBpcyBkaXJlY3RseSBhY3RpdmUgKG5vdCB3aGVuIGNoaWxkIHN0YXRlcyBhcmUgYWN0aXZlKS5cbiAgICAgKiBUaGlzIGlzIGFuIFwiZXhhY3QgbWF0Y2hcIiB3aGljaCB1c2VzIFtbU3RhdGVTZXJ2aWNlLmlzXV0uXG4gICAgICpcbiAgICAgKiAjIyMgUGFyYW1ldGVyIHZhbHVlc1xuICAgICAqIElmIHRoZSBgdWktc3JlZmAvYHVpLXN0YXRlYCBpbmNsdWRlcyBwYXJhbWV0ZXIgdmFsdWVzLCB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzIG11c3QgbWF0Y2ggdGhlIGxpbmsncyB2YWx1ZXMgZm9yIHRoZSBsaW5rIHRvIGJlIGhpZ2hsaWdodGVkLlxuICAgICAqIFRoaXMgYWxsb3dzIGEgbGlzdCBvZiBsaW5rcyB0byB0aGUgc2FtZSBzdGF0ZSB3aXRoIGRpZmZlcmVudCBwYXJhbWV0ZXJzIHRvIGJlIHJlbmRlcmVkLCBhbmQgdGhlIGNvcnJlY3Qgb25lIGhpZ2hsaWdodGVkLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8bGkgbmctcmVwZWF0PVwidXNlciBpbiB1c2Vyc1wiIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCI+XG4gICAgICogICA8YSB1aS1zcmVmPVwidXNlci5kZXRhaWxzKHsgdXNlcklkOiB1c2VyLmlkIH0pXCI+e3sgdXNlci5sYXN0TmFtZSB9fTwvYT5cbiAgICAgKiA8L2xpPlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIEV4YW1wbGVzXG4gICAgICpcbiAgICAgKiBHaXZlbiB0aGUgZm9sbG93aW5nIHRlbXBsYXRlOlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPHVsPlxuICAgICAqICAgPGxpIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCIgY2xhc3M9XCJpdGVtXCI+XG4gICAgICogICAgIDxhIGhyZWYgdWktc3JlZj1cImFwcC51c2VyKHt1c2VyOiAnYmlsYm9iYWdnaW5zJ30pXCI+QGJpbGJvYmFnZ2luczwvYT5cbiAgICAgKiAgIDwvbGk+XG4gICAgICogPC91bD5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFdoZW4gdGhlIGFwcCBzdGF0ZSBpcyBgYXBwLnVzZXJgIChvciBhbnkgY2hpbGQgc3RhdGUpLFxuICAgICAqIGFuZCBjb250YWlucyB0aGUgc3RhdGUgcGFyYW1ldGVyIFwidXNlclwiIHdpdGggdmFsdWUgXCJiaWxib2JhZ2dpbnNcIixcbiAgICAgKiB0aGUgcmVzdWx0aW5nIEhUTUwgd2lsbCBhcHBlYXIgYXMgKG5vdGUgdGhlICdhY3RpdmUnIGNsYXNzKTpcbiAgICAgKlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8dWw+XG4gICAgICogICA8bGkgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiBjbGFzcz1cIml0ZW0gYWN0aXZlXCI+XG4gICAgICogICAgIDxhIHVpLXNyZWY9XCJhcHAudXNlcih7dXNlcjogJ2JpbGJvYmFnZ2lucyd9KVwiIGhyZWY9XCIvdXNlcnMvYmlsYm9iYWdnaW5zXCI+QGJpbGJvYmFnZ2luczwvYT5cbiAgICAgKiAgIDwvbGk+XG4gICAgICogPC91bD5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyBHbG9iIG1vZGVcbiAgICAgKlxuICAgICAqIEl0IGlzIHBvc3NpYmxlIHRvIHBhc3MgYHVpLXNyZWYtYWN0aXZlYCBhbiBleHByZXNzaW9uIHRoYXQgZXZhbHVhdGVzIHRvIGFuIG9iamVjdC5cbiAgICAgKiBUaGUgb2JqZWN0cyBrZXlzIHJlcHJlc2VudCBhY3RpdmUgY2xhc3MgbmFtZXMgYW5kIHZhbHVlcyByZXByZXNlbnQgdGhlIHJlc3BlY3RpdmUgc3RhdGUgbmFtZXMvZ2xvYnMuXG4gICAgICogYHVpLXNyZWYtYWN0aXZlYCB3aWxsIG1hdGNoIGlmIHRoZSBjdXJyZW50IGFjdGl2ZSBzdGF0ZSAqKmluY2x1ZGVzKiogYW55IG9mXG4gICAgICogdGhlIHNwZWNpZmllZCBzdGF0ZSBuYW1lcy9nbG9icywgZXZlbiB0aGUgYWJzdHJhY3Qgb25lcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBHaXZlbiB0aGUgZm9sbG93aW5nIHRlbXBsYXRlLCB3aXRoIFwiYWRtaW5cIiBiZWluZyBhbiBhYnN0cmFjdCBzdGF0ZTpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGRpdiB1aS1zcmVmLWFjdGl2ZT1cInsnYWN0aXZlJzogJ2FkbWluLioqJ31cIj5cbiAgICAgKiAgIDxhIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCIgdWktc3JlZj1cImFkbWluLnJvbGVzXCI+Um9sZXM8L2E+XG4gICAgICogPC9kaXY+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBBcnJheXMgYXJlIGFsc28gc3VwcG9ydGVkIGFzIHZhbHVlcyBpbiB0aGUgYG5nQ2xhc3NgLWxpa2UgaW50ZXJmYWNlLlxuICAgICAqIFRoaXMgYWxsb3dzIG11bHRpcGxlIHN0YXRlcyB0byBhZGQgYGFjdGl2ZWAgY2xhc3MuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogR2l2ZW4gdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZSwgd2l0aCBcImFkbWluLnJvbGVzXCIgYmVpbmcgdGhlIGN1cnJlbnQgc3RhdGUsIHRoZSBjbGFzcyB3aWxsIGJlIGFkZGVkIHRvbzpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGRpdiB1aS1zcmVmLWFjdGl2ZT1cInsnYWN0aXZlJzogWydvd25lci4qKicsICdhZG1pbi4qKiddfVwiPlxuICAgICAqICAgPGEgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiB1aS1zcmVmPVwiYWRtaW4ucm9sZXNcIj5Sb2xlczwvYT5cbiAgICAgKiA8L2Rpdj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFdoZW4gdGhlIGN1cnJlbnQgc3RhdGUgaXMgXCJhZG1pbi5yb2xlc1wiIHRoZSBcImFjdGl2ZVwiIGNsYXNzIHdpbGwgYmUgYXBwbGllZCB0byBib3RoIHRoZSBgPGRpdj5gIGFuZCBgPGE+YCBlbGVtZW50cy5cbiAgICAgKiBJdCBpcyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IHRoZSBzdGF0ZSBuYW1lcy9nbG9icyBwYXNzZWQgdG8gYHVpLXNyZWYtYWN0aXZlYCBvdmVycmlkZSBhbnkgc3RhdGUgcHJvdmlkZWQgYnkgYSBsaW5rZWQgYHVpLXNyZWZgLlxuICAgICAqXG4gICAgICogIyMjIE5vdGVzOlxuICAgICAqXG4gICAgICogLSBUaGUgY2xhc3MgbmFtZSBpcyBpbnRlcnBvbGF0ZWQgKipvbmNlKiogZHVyaW5nIHRoZSBkaXJlY3RpdmVzIGxpbmsgdGltZSAoYW55IGZ1cnRoZXIgY2hhbmdlcyB0byB0aGVcbiAgICAgKiBpbnRlcnBvbGF0ZWQgdmFsdWUgYXJlIGlnbm9yZWQpLlxuICAgICAqXG4gICAgICogLSBNdWx0aXBsZSBjbGFzc2VzIG1heSBiZSBzcGVjaWZpZWQgaW4gYSBzcGFjZS1zZXBhcmF0ZWQgZm9ybWF0OiBgdWktc3JlZi1hY3RpdmU9J2NsYXNzMSBjbGFzczIgY2xhc3MzJ2BcbiAgICAgKi9cbiAgICB2YXIgdWlTcmVmQWN0aXZlRGlyZWN0aXZlO1xuICAgIHVpU3JlZkFjdGl2ZURpcmVjdGl2ZSA9IFtcbiAgICAgICAgJyRzdGF0ZScsXG4gICAgICAgICckc3RhdGVQYXJhbXMnLFxuICAgICAgICAnJGludGVycG9sYXRlJyxcbiAgICAgICAgJyR1aVJvdXRlcicsXG4gICAgICAgIGZ1bmN0aW9uICRTdGF0ZVJlZkFjdGl2ZURpcmVjdGl2ZSgkc3RhdGUsICRzdGF0ZVBhcmFtcywgJGludGVycG9sYXRlLCAkdWlSb3V0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBbXG4gICAgICAgICAgICAgICAgICAgICckc2NvcGUnLFxuICAgICAgICAgICAgICAgICAgICAnJGVsZW1lbnQnLFxuICAgICAgICAgICAgICAgICAgICAnJGF0dHJzJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVxQ2xhc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWlTcmVmQWN0aXZlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgcHJvYmFibHkgaXNuJ3QgbXVjaCBwb2ludCBpbiAkb2JzZXJ2aW5nIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVpU3JlZkFjdGl2ZSBhbmQgdWlTcmVmQWN0aXZlRXEgc2hhcmUgdGhlIHNhbWUgZGlyZWN0aXZlIG9iamVjdCB3aXRoIHNvbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNsaWdodCBkaWZmZXJlbmNlIGluIGxvZ2ljIHJvdXRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVxQ2xhc3MgPSAkaW50ZXJwb2xhdGUoJGF0dHJzLnVpU3JlZkFjdGl2ZUVxIHx8ICcnLCBmYWxzZSkoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlTcmVmQWN0aXZlID0gJHNjb3BlLiRldmFsKCRhdHRycy51aVNyZWZBY3RpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nLiB1aVNyZWZBY3RpdmUgaXMgbm90IGEgdmFsaWQgZXhwcmVzc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gdXNpbmcgJGludGVycG9sYXRlIGJlbG93XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB1aVNyZWZBY3RpdmUgPSB1aVNyZWZBY3RpdmUgfHwgJGludGVycG9sYXRlKCRhdHRycy51aVNyZWZBY3RpdmUgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGVzRnJvbURlZmluaXRpb25PYmplY3QodWlTcmVmQWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IHVpU3JlZiB0byBjb21tdW5pY2F0ZSB3aXRoIHVpU3JlZkFjdGl2ZVtFcXVhbHNdXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiQkYWRkU3RhdGVJbmZvID0gZnVuY3Rpb24gKG5ld1N0YXRlLCBuZXdQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhbHJlYWR5IGdvdCBhbiBleHBsaWNpdCBzdGF0ZSBwcm92aWRlZCBieSB1aS1zcmVmLWFjdGl2ZSwgc28gd2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaGFkb3cgdGhlIG9uZSB0aGF0IGNvbWVzIGZyb20gdWktc3JlZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3JlLmlzT2JqZWN0KHVpU3JlZkFjdGl2ZSkgJiYgc3RhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVyZWdpc3RlciA9IGFkZFN0YXRlKG5ld1N0YXRlLCBuZXdQYXJhbXMsIHVpU3JlZkFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlcmVnaXN0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQWZ0ZXJUcmFuc2l0aW9uKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMucHJvbWlzZS50aGVuKHVwZGF0ZSwgY29yZS5ub29wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95Jywgc2V0dXBFdmVudExpc3RlbmVycygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdWlSb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWZ0ZXJUcmFuc2l0aW9uKCR1aVJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVyZWdpc3RlclN0YXRlc0NoYW5nZWRMaXN0ZW5lciA9ICR1aVJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZChoYW5kbGVTdGF0ZXNDaGFuZ2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVyZWdpc3Rlck9uU3RhcnRMaXN0ZW5lciA9ICR1aVJvdXRlci50cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCB1cGRhdGVBZnRlclRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXJlZ2lzdGVyU3RhdGVDaGFuZ2VTdWNjZXNzTGlzdGVuZXIgPSAkc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgdXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gY2xlYW5VcCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyZWdpc3RlclN0YXRlc0NoYW5nZWRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdGVyT25TdGFydExpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcmVnaXN0ZXJTdGF0ZUNoYW5nZVN1Y2Nlc3NMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVTdGF0ZXNDaGFuZ2VkKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0YXRlc0Zyb21EZWZpbml0aW9uT2JqZWN0KHVpU3JlZkFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdChzdGF0ZXNEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcmUuaXNPYmplY3Qoc3RhdGVzRGVmaW5pdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUuZm9yRWFjaChzdGF0ZXNEZWZpbml0aW9uLCBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIGFjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gYWJzdHJhY3QgYWRkaW5nIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZFN0YXRlRm9yQ2xhc3MgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIGFjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZiA9IHBhcnNlU3RhdGVSZWYoc3RhdGVPck5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFN0YXRlKHJlZi5zdGF0ZSwgJHNjb3BlLiRldmFsKHJlZi5wYXJhbUV4cHIpLCBhY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcmUuaXNTdHJpbmcoc3RhdGVPck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhdGUgaXMgc3RyaW5nLCBqdXN0IGFkZCBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTdGF0ZUZvckNsYXNzKHN0YXRlT3JOYW1lLCBhY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb3JlLmlzQXJyYXkoc3RhdGVPck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhdGUgaXMgYW4gYXJyYXksIGl0ZXJhdGUgb3ZlciBpdCBhbmQgYWRkIGVhY2ggYXJyYXkgaXRlbSBpbmRpdmlkdWFsbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5mb3JFYWNoKHN0YXRlT3JOYW1lLCBmdW5jdGlvbiAoc3RhdGVPck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkU3RhdGVGb3JDbGFzcyhzdGF0ZU9yTmFtZSwgYWN0aXZlQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBhZGRTdGF0ZShzdGF0ZU5hbWUsIHN0YXRlUGFyYW1zLCBhY3RpdmVDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9ICRzdGF0ZS5nZXQoc3RhdGVOYW1lLCBzdGF0ZUNvbnRleHQoJGVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGVJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUgfHwgeyBuYW1lOiBzdGF0ZU5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBzdGF0ZVBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3M6IGFjdGl2ZUNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzLnB1c2goc3RhdGVJbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlU3RhdGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUucmVtb3ZlRnJvbShzdGF0ZXMpKHN0YXRlSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSByb3V0ZSBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGxpdENsYXNzZXMgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBzdHIuc3BsaXQoL1xccy8pLmZpbHRlcihjb3JlLmlkZW50aXR5KTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0Q2xhc3NlcyA9IGZ1bmN0aW9uIChzdGF0ZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlTGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5hY3RpdmVDbGFzczsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoc3BsaXRDbGFzc2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlZHVjZShjb3JlLnVubmVzdFIsIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGxDbGFzc2VzID0gZ2V0Q2xhc3NlcyhzdGF0ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc3BsaXRDbGFzc2VzKGFjdGl2ZUVxQ2xhc3MpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVkdWNlKGNvcmUudW5pcVIsIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnV6enlDbGFzc2VzID0gZ2V0Q2xhc3NlcyhzdGF0ZXMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiAkc3RhdGUuaW5jbHVkZXMoeC5zdGF0ZS5uYW1lLCB4LnBhcmFtcyk7IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhhY3RseU1hdGNoZXNBbnkgPSAhIXN0YXRlcy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICRzdGF0ZS5pcyh4LnN0YXRlLm5hbWUsIHgucGFyYW1zKTsgfSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGFjdENsYXNzZXMgPSBleGFjdGx5TWF0Y2hlc0FueSA/IHNwbGl0Q2xhc3NlcyhhY3RpdmVFcUNsYXNzKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRDbGFzc2VzID0gZnV6enlDbGFzc2VzLmNvbmNhdChleGFjdENsYXNzZXMpLnJlZHVjZShjb3JlLnVuaXFSLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZUNsYXNzZXMgPSBhbGxDbGFzc2VzLmZpbHRlcihmdW5jdGlvbiAoY2xzKSB7IHJldHVybiAhY29yZS5pbkFycmF5KGFkZENsYXNzZXMsIGNscyk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbGFzc05hbWUpIHsgcmV0dXJuICRlbGVtZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkgeyByZXR1cm4gJGVsZW1lbnQucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICBdO1xuICAgIG5nXG4gICAgICAgIC5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3VpU3JlZicsIHVpU3JlZkRpcmVjdGl2ZSlcbiAgICAgICAgLmRpcmVjdGl2ZSgndWlTcmVmQWN0aXZlJywgdWlTcmVmQWN0aXZlRGlyZWN0aXZlKVxuICAgICAgICAuZGlyZWN0aXZlKCd1aVNyZWZBY3RpdmVFcScsIHVpU3JlZkFjdGl2ZURpcmVjdGl2ZSlcbiAgICAgICAgLmRpcmVjdGl2ZSgndWlTdGF0ZScsIHVpU3RhdGVEaXJlY3RpdmUpO1xuXG4gICAgLyoqIEBtb2R1bGUgbmcxICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuICAgIC8qKlxuICAgICAqIGBpc1N0YXRlYCBGaWx0ZXI6IHRydXRoeSBpZiB0aGUgY3VycmVudCBzdGF0ZSBpcyB0aGUgcGFyYW1ldGVyXG4gICAgICpcbiAgICAgKiBUcmFuc2xhdGVzIHRvIFtbU3RhdGVTZXJ2aWNlLmlzXV0gYCRzdGF0ZS5pcyhcInN0YXRlTmFtZVwiKWAuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBgaHRtbFxuICAgICAqIDxkaXYgbmctaWY9XCInc3RhdGVOYW1lJyB8IGlzU3RhdGVcIj5zaG93IGlmIHN0YXRlIGlzICdzdGF0ZU5hbWUnPC9kaXY+XG4gICAgICogYGBgXG4gICAgICovXG4gICAgJElzU3RhdGVGaWx0ZXIuJGluamVjdCA9IFsnJHN0YXRlJ107XG4gICAgZnVuY3Rpb24gJElzU3RhdGVGaWx0ZXIoJHN0YXRlKSB7XG4gICAgICAgIHZhciBpc0ZpbHRlciA9IGZ1bmN0aW9uIChzdGF0ZSwgcGFyYW1zLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gJHN0YXRlLmlzKHN0YXRlLCBwYXJhbXMsIG9wdGlvbnMpO1xuICAgICAgICB9O1xuICAgICAgICBpc0ZpbHRlci4kc3RhdGVmdWwgPSB0cnVlO1xuICAgICAgICByZXR1cm4gaXNGaWx0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGBpbmNsdWRlZEJ5U3RhdGVgIEZpbHRlcjogdHJ1dGh5IGlmIHRoZSBjdXJyZW50IHN0YXRlIGluY2x1ZGVzIHRoZSBwYXJhbWV0ZXJcbiAgICAgKlxuICAgICAqIFRyYW5zbGF0ZXMgdG8gW1tTdGF0ZVNlcnZpY2UuaW5jbHVkZXNdXWAgJHN0YXRlLmlzKFwiZnVsbE9yUGFydGlhbFN0YXRlTmFtZVwiKWAuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBgaHRtbFxuICAgICAqIDxkaXYgbmctaWY9XCInZnVsbE9yUGFydGlhbFN0YXRlTmFtZScgfCBpbmNsdWRlZEJ5U3RhdGVcIj5zaG93IGlmIHN0YXRlIGluY2x1ZGVzICdmdWxsT3JQYXJ0aWFsU3RhdGVOYW1lJzwvZGl2PlxuICAgICAqIGBgYFxuICAgICAqL1xuICAgICRJbmNsdWRlZEJ5U3RhdGVGaWx0ZXIuJGluamVjdCA9IFsnJHN0YXRlJ107XG4gICAgZnVuY3Rpb24gJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcigkc3RhdGUpIHtcbiAgICAgICAgdmFyIGluY2x1ZGVzRmlsdGVyID0gZnVuY3Rpb24gKHN0YXRlLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiAkc3RhdGUuaW5jbHVkZXMoc3RhdGUsIHBhcmFtcywgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIGluY2x1ZGVzRmlsdGVyLiRzdGF0ZWZ1bCA9IHRydWU7XG4gICAgICAgIHJldHVybiBpbmNsdWRlc0ZpbHRlcjtcbiAgICB9XG4gICAgbmdcbiAgICAgICAgLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJylcbiAgICAgICAgLmZpbHRlcignaXNTdGF0ZScsICRJc1N0YXRlRmlsdGVyKVxuICAgICAgICAuZmlsdGVyKCdpbmNsdWRlZEJ5U3RhdGUnLCAkSW5jbHVkZWRCeVN0YXRlRmlsdGVyKTtcblxuICAgIC8qKlxuICAgICAqIEBuZzFhcGlcbiAgICAgKiBAbW9kdWxlIGRpcmVjdGl2ZXNcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBgdWktdmlld2A6IEEgdmlld3BvcnQgZGlyZWN0aXZlIHdoaWNoIGlzIGZpbGxlZCBpbiBieSBhIHZpZXcgZnJvbSB0aGUgYWN0aXZlIHN0YXRlLlxuICAgICAqXG4gICAgICogIyMjIEF0dHJpYnV0ZXNcbiAgICAgKlxuICAgICAqIC0gYG5hbWVgOiAoT3B0aW9uYWwpIEEgdmlldyBuYW1lLlxuICAgICAqICAgVGhlIG5hbWUgc2hvdWxkIGJlIHVuaXF1ZSBhbW9uZ3N0IHRoZSBvdGhlciB2aWV3cyBpbiB0aGUgc2FtZSBzdGF0ZS5cbiAgICAgKiAgIFlvdSBjYW4gaGF2ZSB2aWV3cyBvZiB0aGUgc2FtZSBuYW1lIHRoYXQgbGl2ZSBpbiBkaWZmZXJlbnQgc3RhdGVzLlxuICAgICAqICAgVGhlIHVpLXZpZXcgY2FuIGJlIHRhcmdldGVkIGluIGEgVmlldyB1c2luZyB0aGUgbmFtZSAoW1tOZzFTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0pLlxuICAgICAqXG4gICAgICogLSBgYXV0b3Njcm9sbGA6IGFuIGV4cHJlc3Npb24uIFdoZW4gaXQgZXZhbHVhdGVzIHRvIHRydWUsIHRoZSBgdWktdmlld2Agd2lsbCBiZSBzY3JvbGxlZCBpbnRvIHZpZXcgd2hlbiBpdCBpcyBhY3RpdmF0ZWQuXG4gICAgICogICBVc2VzIFtbJHVpVmlld1Njcm9sbF1dIHRvIGRvIHRoZSBzY3JvbGxpbmcuXG4gICAgICpcbiAgICAgKiAtIGBvbmxvYWRgOiBFeHByZXNzaW9uIHRvIGV2YWx1YXRlIHdoZW5ldmVyIHRoZSB2aWV3IHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogQSB2aWV3IGNhbiBiZSB1bm5hbWVkIG9yIG5hbWVkLlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8IS0tIFVubmFtZWQgLS0+XG4gICAgICogPGRpdiB1aS12aWV3PjwvZGl2PlxuICAgICAqXG4gICAgICogPCEtLSBOYW1lZCAtLT5cbiAgICAgKiA8ZGl2IHVpLXZpZXc9XCJ2aWV3TmFtZVwiPjwvZGl2PlxuICAgICAqXG4gICAgICogPCEtLSBOYW1lZCAoZGlmZmVyZW50IHN0eWxlKSAtLT5cbiAgICAgKiA8dWktdmlldyBuYW1lPVwidmlld05hbWVcIj48L3VpLXZpZXc+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgaGF2ZSBvbmUgdW5uYW1lZCB2aWV3IHdpdGhpbiBhbnkgdGVtcGxhdGUgKG9yIHJvb3QgaHRtbCkuIElmIHlvdSBhcmUgb25seSB1c2luZyBhXG4gICAgICogc2luZ2xlIHZpZXcgYW5kIGl0IGlzIHVubmFtZWQgdGhlbiB5b3UgY2FuIHBvcHVsYXRlIGl0IGxpa2Ugc286XG4gICAgICpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGRpdiB1aS12aWV3PjwvZGl2PlxuICAgICAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaG9tZVwiLCB7XG4gICAgICogICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGUgYWJvdmUgaXMgYSBjb252ZW5pZW50IHNob3J0Y3V0IGVxdWl2YWxlbnQgdG8gc3BlY2lmeWluZyB5b3VyIHZpZXcgZXhwbGljaXRseSB3aXRoIHRoZVxuICAgICAqIFtbTmcxU3RhdGVEZWNsYXJhdGlvbi52aWV3c11dIGNvbmZpZyBwcm9wZXJ0eSwgYnkgbmFtZSwgaW4gdGhpcyBjYXNlIGFuIGVtcHR5IG5hbWU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaG9tZVwiLCB7XG4gICAgICogICB2aWV3czoge1xuICAgICAqICAgICBcIlwiOiB7XG4gICAgICogICAgICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBCdXQgdHlwaWNhbGx5IHlvdSdsbCBvbmx5IHVzZSB0aGUgdmlld3MgcHJvcGVydHkgaWYgeW91IG5hbWUgeW91ciB2aWV3IG9yIGhhdmUgbW9yZSB0aGFuIG9uZSB2aWV3XG4gICAgICogaW4gdGhlIHNhbWUgdGVtcGxhdGUuIFRoZXJlJ3Mgbm90IHJlYWxseSBhIGNvbXBlbGxpbmcgcmVhc29uIHRvIG5hbWUgYSB2aWV3IGlmIGl0cyB0aGUgb25seSBvbmUsXG4gICAgICogYnV0IHlvdSBjb3VsZCBpZiB5b3Ugd2FudGVkLCBsaWtlIHNvOlxuICAgICAqXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxkaXYgdWktdmlldz1cIm1haW5cIj48L2Rpdj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAgICAgKiAgIHZpZXdzOiB7XG4gICAgICogICAgIFwibWFpblwiOiB7XG4gICAgICogICAgICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBSZWFsbHkgdGhvdWdoLCB5b3UnbGwgdXNlIHZpZXdzIHRvIHNldCB1cCBtdWx0aXBsZSB2aWV3czpcbiAgICAgKlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8ZGl2IHVpLXZpZXc+PC9kaXY+XG4gICAgICogPGRpdiB1aS12aWV3PVwiY2hhcnRcIj48L2Rpdj5cbiAgICAgKiA8ZGl2IHVpLXZpZXc9XCJkYXRhXCI+PC9kaXY+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaG9tZVwiLCB7XG4gICAgICogICB2aWV3czoge1xuICAgICAqICAgICBcIlwiOiB7XG4gICAgICogICAgICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcbiAgICAgKiAgICAgfSxcbiAgICAgKiAgICAgXCJjaGFydFwiOiB7XG4gICAgICogICAgICAgdGVtcGxhdGU6IFwiPGNoYXJ0X3RoaW5nLz5cIlxuICAgICAqICAgICB9LFxuICAgICAqICAgICBcImRhdGFcIjoge1xuICAgICAqICAgICAgIHRlbXBsYXRlOiBcIjxkYXRhX3RoaW5nLz5cIlxuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZXMgZm9yIGBhdXRvc2Nyb2xsYDpcbiAgICAgKiBgYGBodG1sXG4gICAgICogPCEtLSBJZiBhdXRvc2Nyb2xsIHByZXNlbnQgd2l0aCBubyBleHByZXNzaW9uLFxuICAgICAqICAgICAgdGhlbiBzY3JvbGwgdWktdmlldyBpbnRvIHZpZXcgLS0+XG4gICAgICogPHVpLXZpZXcgYXV0b3Njcm9sbC8+XG4gICAgICpcbiAgICAgKiA8IS0tIElmIGF1dG9zY3JvbGwgcHJlc2VudCB3aXRoIHZhbGlkIGV4cHJlc3Npb24sXG4gICAgICogICAgICB0aGVuIHNjcm9sbCB1aS12aWV3IGludG8gdmlldyBpZiBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlIC0tPlxuICAgICAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J3RydWUnLz5cbiAgICAgKiA8dWktdmlldyBhdXRvc2Nyb2xsPSdmYWxzZScvPlxuICAgICAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J3Njb3BlVmFyaWFibGUnLz5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFJlc29sdmUgZGF0YTpcbiAgICAgKlxuICAgICAqIFRoZSByZXNvbHZlZCBkYXRhIGZyb20gdGhlIHN0YXRlJ3MgYHJlc29sdmVgIGJsb2NrIGlzIHBsYWNlZCBvbiB0aGUgc2NvcGUgYXMgYCRyZXNvbHZlYCAodGhpc1xuICAgICAqIGNhbiBiZSBjdXN0b21pemVkIHVzaW5nIFtbTmcxVmlld0RlY2xhcmF0aW9uLnJlc29sdmVBc11dKS4gIFRoaXMgY2FuIGJlIHRoZW4gYWNjZXNzZWQgZnJvbSB0aGUgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2hlbiBgY29udHJvbGxlckFzYCBpcyBiZWluZyB1c2VkLCBgJHJlc29sdmVgIGlzIHNldCBvbiB0aGUgY29udHJvbGxlciBpbnN0YW5jZSAqYWZ0ZXIqIHRoZVxuICAgICAqIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkLiAgVGhlIGAkb25Jbml0KClgIGhvb2sgY2FuIGJlIHVzZWQgdG8gcGVyZm9ybSBpbml0aWFsaXphdGlvbiBjb2RlIHdoaWNoXG4gICAgICogZGVwZW5kcyBvbiBgJHJlc29sdmVgIGRhdGEuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcbiAgICAgKiAgIHRlbXBsYXRlOiAnPG15LWNvbXBvbmVudCB1c2VyPVwiJHJlc29sdmUudXNlclwiPjwvbXktY29tcG9uZW50PicsXG4gICAgICogICByZXNvbHZlOiB7XG4gICAgICogICAgIHVzZXI6IGZ1bmN0aW9uKFVzZXJTZXJ2aWNlKSB7IHJldHVybiBVc2VyU2VydmljZS5mZXRjaFVzZXIoKTsgfVxuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHZhciB1aVZpZXc7XG4gICAgdWlWaWV3ID0gW1xuICAgICAgICAnJHZpZXcnLFxuICAgICAgICAnJGFuaW1hdGUnLFxuICAgICAgICAnJHVpVmlld1Njcm9sbCcsXG4gICAgICAgICckaW50ZXJwb2xhdGUnLFxuICAgICAgICAnJHEnLFxuICAgICAgICBmdW5jdGlvbiAkVmlld0RpcmVjdGl2ZSgkdmlldywgJGFuaW1hdGUsICR1aVZpZXdTY3JvbGwsICRpbnRlcnBvbGF0ZSwgJHEpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFJlbmRlcmVyKGF0dHJzLCBzY29wZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAoZWxlbWVudCwgdGFyZ2V0LCBjYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5nLnZlcnNpb24ubWlub3IgPiAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoZWxlbWVudCwgbnVsbCwgdGFyZ2V0KS50aGVuKGNiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGVsZW1lbnQsIG51bGwsIHRhcmdldCwgY2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsZWF2ZTogZnVuY3Rpb24gKGVsZW1lbnQsIGNiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmcudmVyc2lvbi5taW5vciA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShlbGVtZW50KS50aGVuKGNiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnQsIGNiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gY29uZmlnc0VxdWFsKGNvbmZpZzEsIGNvbmZpZzIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnMSA9PT0gY29uZmlnMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByb290RGF0YSA9IHtcbiAgICAgICAgICAgICAgICAkY2ZnOiB7IHZpZXdEZWNsOiB7ICRjb250ZXh0OiAkdmlldy5fcGx1Z2luYXBpLl9yb290Vmlld0NvbnRleHQoKSB9IH0sXG4gICAgICAgICAgICAgICAgJHVpVmlldzoge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VDQScsXG4gICAgICAgICAgICAgICAgdGVybWluYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDQwMCxcbiAgICAgICAgICAgICAgICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gICAgICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRFbGVtZW50LCB0QXR0cnMsICR0cmFuc2NsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsICRlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ubG9hZEV4cCA9IGF0dHJzWydvbmxvYWQnXSB8fCAnJywgYXV0b1Njcm9sbEV4cCA9IGF0dHJzWydhdXRvc2Nyb2xsJ10sIHJlbmRlcmVyID0gZ2V0UmVuZGVyZXIoYXR0cnMsIHNjb3BlKSwgaW5oZXJpdGVkID0gJGVsZW1lbnQuaW5oZXJpdGVkRGF0YSgnJHVpVmlldycpIHx8IHJvb3REYXRhLCBuYW1lID0gJGludGVycG9sYXRlKGF0dHJzWyd1aVZpZXcnXSB8fCBhdHRyc1snbmFtZSddIHx8ICcnKShzY29wZSkgfHwgJyRkZWZhdWx0JztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c0VsLCBjdXJyZW50RWwsIGN1cnJlbnRTY29wZSwgdmlld0NvbmZpZywgdW5yZWdpc3RlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVVSVZpZXcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHR5cGU6ICduZzEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkaXJlY3RpdmUuY291bnQrKyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZxbjogaW5oZXJpdGVkLiR1aVZpZXcuZnFuID8gaW5oZXJpdGVkLiR1aVZpZXcuZnFuICsgJy4nICsgbmFtZSA6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ1VwZGF0ZWQ6IGNvbmZpZ1VwZGF0ZWRDYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgY3JlYXRpb25Db250ZXh0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHVpLXZpZXcgXCJ0YWdcIiB3YXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbVBhcmVudFRhZ0NvbmZpZyA9IGNvcmUucGFyc2UoJyRjZmcudmlld0RlY2wuJGNvbnRleHQnKShpbmhlcml0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbGxvdyA8dWktdmlldyBuYW1lPVwiZm9vXCI+PHVpLXZpZXcgbmFtZT1cImJhclwiPjwvdWktdmlldz48L3VpLXZpZXc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXIvaXNzdWVzLzMzNTVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyb21QYXJlbnRUYWcgPSBjb3JlLnBhcnNlKCckdWlWaWV3LmNyZWF0aW9uQ29udGV4dCcpKGluaGVyaXRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmcm9tUGFyZW50VGFnQ29uZmlnIHx8IGZyb21QYXJlbnRUYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JlLnRyYWNlLnRyYWNlVUlWaWV3RXZlbnQoJ0xpbmtpbmcnLCBhY3RpdmVVSVZpZXcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29uZmlnVXBkYXRlZENhbGxiYWNrKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcgJiYgIShjb25maWcgaW5zdGFuY2VvZiBOZzFWaWV3Q29uZmlnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWdzRXF1YWwodmlld0NvbmZpZywgY29uZmlnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUudHJhY2UudHJhY2VVSVZpZXdDb25maWdVcGRhdGVkKGFjdGl2ZVVJVmlldywgY29uZmlnICYmIGNvbmZpZy52aWV3RGVjbCAmJiBjb25maWcudmlld0RlY2wuJGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdDb25maWcgPSBjb25maWc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmlldyhjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuZGF0YSgnJHVpVmlldycsIHsgJHVpVmlldzogYWN0aXZlVUlWaWV3IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmlldygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5yZWdpc3RlciA9ICR2aWV3LnJlZ2lzdGVyVUlWaWV3KGFjdGl2ZVVJVmlldyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUudHJhY2UudHJhY2VVSVZpZXdFdmVudCgnRGVzdHJveWluZy9VbnJlZ2lzdGVyaW5nJywgYWN0aXZlVUlWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFudXBMYXN0VmlldygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlLnRyYWNlLnRyYWNlVUlWaWV3RXZlbnQoJ1JlbW92aW5nIChwcmV2aW91cykgZWwnLCBwcmV2aW91c0VsLmRhdGEoJyR1aVZpZXcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNjb3BlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUudHJhY2UudHJhY2VVSVZpZXdFdmVudCgnRGVzdHJveWluZyBzY29wZScsIGFjdGl2ZVVJVmlldyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdmlld0RhdGFfMSA9IGN1cnJlbnRFbC5kYXRhKCckdWlWaWV3QW5pbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlLnRyYWNlLnRyYWNlVUlWaWV3RXZlbnQoJ0FuaW1hdGUgb3V0JywgX3ZpZXdEYXRhXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5sZWF2ZShjdXJyZW50RWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92aWV3RGF0YV8xLiQkYW5pbUxlYXZlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNFbCA9IGN1cnJlbnRFbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVWaWV3KGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTY29wZSA9IHNjb3BlLiRuZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbUVudGVyID0gJHEuZGVmZXIoKSwgYW5pbUxlYXZlID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHVpVmlld0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjZmc6IGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHVpVmlldzogYWN0aXZlVUlWaWV3LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR1aVZpZXdBbmltID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYW5pbUVudGVyOiBhbmltRW50ZXIucHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1MZWF2ZTogYW5pbUxlYXZlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkYW5pbUxlYXZlOiBhbmltTGVhdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbmdkb2MgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbmFtZSB1aS5yb3V0ZXIuc3RhdGUuZGlyZWN0aXZlOnVpLXZpZXcjJHZpZXdDb250ZW50TG9hZGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudE9mIHVpLnJvdXRlci5zdGF0ZS5kaXJlY3RpdmU6dWktdmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudFR5cGUgZW1pdHMgb24gdWktdmlldyBkaXJlY3RpdmUgc2NvcGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEZpcmVkIG9uY2UgdGhlIHZpZXcgKipiZWdpbnMgbG9hZGluZyoqLCAqYmVmb3JlKiB0aGUgRE9NIGlzIHJlbmRlcmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmlld05hbWUgTmFtZSBvZiB0aGUgdmlldy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50TG9hZGluZycsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZWQgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lLmRhdGEoJyR1aVZpZXdBbmltJywgJHVpVmlld0FuaW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZS5kYXRhKCckdWlWaWV3JywgJHVpVmlld0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5lbnRlcihjbG9uZSwgJGVsZW1lbnQsIGZ1bmN0aW9uIG9uVUlWaWV3RW50ZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltRW50ZXIucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTY29wZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NvcGUuJGVtaXQoJyR2aWV3Q29udGVudEFuaW1hdGlvbkVuZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvcmUuaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApICYmICFhdXRvU2Nyb2xsRXhwKSB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR1aVZpZXdTY3JvbGwoY2xvbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW51cExhc3RWaWV3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsID0gY2xvbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZSA9IG5ld1Njb3BlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBuZ2RvYyBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBuYW1lIHVpLnJvdXRlci5zdGF0ZS5kaXJlY3RpdmU6dWktdmlldyMkdmlld0NvbnRlbnRMb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXZlbnRPZiB1aS5yb3V0ZXIuc3RhdGUuZGlyZWN0aXZlOnVpLXZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXZlbnRUeXBlIGVtaXRzIG9uIHVpLXZpZXcgZGlyZWN0aXZlIHNjb3BlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogRmlyZWQgb25jZSB0aGUgdmlldyBpcyAqKmxvYWRlZCoqLCAqYWZ0ZXIqIHRoZSBET00gaXMgcmVuZGVyZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgRXZlbnQgb2JqZWN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50TG9hZGVkJywgY29uZmlnIHx8IHZpZXdDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZXZhbChvbmxvYWRFeHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgICAgICAgfSxcbiAgICBdO1xuICAgICRWaWV3RGlyZWN0aXZlRmlsbC4kaW5qZWN0ID0gWyckY29tcGlsZScsICckY29udHJvbGxlcicsICckdHJhbnNpdGlvbnMnLCAnJHZpZXcnLCAnJHEnLCAnJHRpbWVvdXQnXTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uICRWaWV3RGlyZWN0aXZlRmlsbCgkY29tcGlsZSwgJGNvbnRyb2xsZXIsICR0cmFuc2l0aW9ucywgJHZpZXcsICRxLCAkdGltZW91dCkge1xuICAgICAgICB2YXIgZ2V0Q29udHJvbGxlckFzID0gY29yZS5wYXJzZSgndmlld0RlY2wuY29udHJvbGxlckFzJyk7XG4gICAgICAgIHZhciBnZXRSZXNvbHZlQXMgPSBjb3JlLnBhcnNlKCd2aWV3RGVjbC5yZXNvbHZlQXMnKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICAgICAgICAgIHByaW9yaXR5OiAtNDAwLFxuICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGluaXRpYWwgPSB0RWxlbWVudC5odG1sKCk7XG4gICAgICAgICAgICAgICAgdEVsZW1lbnQuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCAkZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRlbGVtZW50LmRhdGEoJyR1aVZpZXcnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5odG1sKGluaXRpYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSkoc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZmcgPSBkYXRhLiRjZmcgfHwgeyB2aWV3RGVjbDoge30sIGdldFRlbXBsYXRlOiBjb3JlLm5vb3AgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc29sdmVDdHggPSBjZmcucGF0aCAmJiBuZXcgY29yZS5SZXNvbHZlQ29udGV4dChjZmcucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50Lmh0bWwoY2ZnLmdldFRlbXBsYXRlKCRlbGVtZW50LCByZXNvbHZlQ3R4KSB8fCBpbml0aWFsKTtcbiAgICAgICAgICAgICAgICAgICAgY29yZS50cmFjZS50cmFjZVVJVmlld0ZpbGwoZGF0YS4kdWlWaWV3LCAkZWxlbWVudC5odG1sKCkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9ICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJvbGxlciA9IGNmZy5jb250cm9sbGVyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJvbGxlckFzID0gZ2V0Q29udHJvbGxlckFzKGNmZyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlQXMgPSBnZXRSZXNvbHZlQXMoY2ZnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FscyA9IHJlc29sdmVDdHggJiYgZ2V0TG9jYWxzKHJlc29sdmVDdHgpO1xuICAgICAgICAgICAgICAgICAgICBzY29wZVtyZXNvbHZlQXNdID0gbG9jYWxzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJJbnN0YW5jZSA9ICgkY29udHJvbGxlcihjb250cm9sbGVyLCBjb3JlLmV4dGVuZCh7fSwgbG9jYWxzLCB7ICRzY29wZTogc2NvcGUsICRlbGVtZW50OiAkZWxlbWVudCB9KSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXJBcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlW2NvbnRyb2xsZXJBc10gPSBjb250cm9sbGVySW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVbY29udHJvbGxlckFzXVtyZXNvbHZlQXNdID0gbG9jYWxzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogVXNlICR2aWV3IHNlcnZpY2UgYXMgYSBjZW50cmFsIHBvaW50IGZvciByZWdpc3RlcmluZyBjb21wb25lbnQtbGV2ZWwgaG9va3NcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZW4sIHdoZW4gYSBjb21wb25lbnQgaXMgY3JlYXRlZCwgdGVsbCB0aGUgJHZpZXcgc2VydmljZSwgc28gaXQgY2FuIGludm9rZSBob29rc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHZpZXcuY29tcG9uZW50TG9hZGVkKGNvbnRyb2xsZXJJbnN0YW5jZSwgeyAkc2NvcGU6IHNjb3BlLCAkZWxlbWVudDogJGVsZW1lbnQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzY29wZS4kb24oJyRkZXN0cm95JywgKCkgPT4gJHZpZXcuY29tcG9uZW50VW5sb2FkZWQoY29udHJvbGxlckluc3RhbmNlLCB7ICRzY29wZTogc2NvcGUsICRlbGVtZW50OiAkZWxlbWVudCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKCckbmdDb250cm9sbGVyQ29udHJvbGxlcicsIGNvbnRyb2xsZXJJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5jaGlsZHJlbigpLmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJywgY29udHJvbGxlckluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcygkcSwgJHRyYW5zaXRpb25zLCBjb250cm9sbGVySW5zdGFuY2UsIHNjb3BlLCBjZmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBjb21wb25lbnQgdG8gYXBwZWFyIGluIHRoZSBET01cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcmUuaXNTdHJpbmcoY2ZnLmNvbXBvbmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZWJvYk5hbWUgPSBjb3JlLmtlYm9iU3RyaW5nKGNmZy5jb21wb25lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZ1JlZ2V4cF8xID0gbmV3IFJlZ0V4cChcIl4oeC18ZGF0YS0pP1wiICsga2Vib2JOYW1lICsgXCIkXCIsICdpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0Q29tcG9uZW50Q29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aXZlRWwgPSBbXS5zbGljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2FsbCgkZWxlbWVudFswXS5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsICYmIGVsLnRhZ05hbWUgJiYgdGFnUmVnZXhwXzEuZXhlYyhlbC50YWdOYW1lKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZUVsICYmIG5nLmVsZW1lbnQoZGlyZWN0aXZlRWwpLmRhdGEoXCIkXCIgKyBjZmcuY29tcG9uZW50ICsgXCJDb250cm9sbGVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXJlZ2lzdGVyV2F0Y2hfMSA9IHNjb3BlLiR3YXRjaChnZXRDb21wb25lbnRDb250cm9sbGVyLCBmdW5jdGlvbiAoY3RybEluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHJsSW5zdGFuY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckNvbnRyb2xsZXJDYWxsYmFja3MoJHEsICR0cmFuc2l0aW9ucywgY3RybEluc3RhbmNlLCBzY29wZSwgY2ZnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdGVyV2F0Y2hfMSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGluayhzY29wZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgdmFyIGhhc0NvbXBvbmVudEltcGwgPSB0eXBlb2YgbmcubW9kdWxlKCd1aS5yb3V0ZXInKVsnY29tcG9uZW50J10gPT09ICdmdW5jdGlvbic7XG4gICAgLyoqIEBoaWRkZW4gaW5jcmVtZW50aW5nIGlkICovXG4gICAgdmFyIF91aUNhbkV4aXRJZCA9IDA7XG4gICAgLyoqIEBoaWRkZW4gVE9ETzogbW92ZSB0aGVzZSBjYWxsYmFja3MgdG8gJHZpZXcgYW5kL29yIGAvaG9va3MvY29tcG9uZW50cy50c2Agb3Igc29tZXRoaW5nICovXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzKCRxLCAkdHJhbnNpdGlvbnMsIGNvbnRyb2xsZXJJbnN0YW5jZSwgJHNjb3BlLCBjZmcpIHtcbiAgICAgICAgLy8gQ2FsbCAkb25Jbml0KCkgQVNBUFxuICAgICAgICBpZiAoY29yZS5pc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KSAmJiAhKGNmZy52aWV3RGVjbC5jb21wb25lbnQgJiYgaGFzQ29tcG9uZW50SW1wbCkpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGNvcmUudGFpbChjZmcucGF0aCkuc3RhdGUuc2VsZjtcbiAgICAgICAgdmFyIGhvb2tPcHRpb25zID0geyBiaW5kOiBjb250cm9sbGVySW5zdGFuY2UgfTtcbiAgICAgICAgLy8gQWRkIGNvbXBvbmVudC1sZXZlbCBob29rIGZvciBvblVpUGFyYW1zQ2hhbmdlZFxuICAgICAgICBpZiAoY29yZS5pc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS51aU9uUGFyYW1zQ2hhbmdlZCkpIHtcbiAgICAgICAgICAgIHZhciByZXNvbHZlQ29udGV4dCA9IG5ldyBjb3JlLlJlc29sdmVDb250ZXh0KGNmZy5wYXRoKTtcbiAgICAgICAgICAgIHZhciB2aWV3Q3JlYXRpb25UcmFuc18xID0gcmVzb2x2ZUNvbnRleHQuZ2V0UmVzb2x2YWJsZSgnJHRyYW5zaXRpb24kJykuZGF0YTtcbiAgICAgICAgICAgIC8vIEZpcmUgY2FsbGJhY2sgb24gYW55IHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxuICAgICAgICAgICAgdmFyIHBhcmFtc1VwZGF0ZWQgPSBmdW5jdGlvbiAoJHRyYW5zaXRpb24kKSB7XG4gICAgICAgICAgICAgICAgLy8gRXhpdCBlYXJseSBpZiB0aGUgJHRyYW5zaXRpb24kIGlzIHRoZSBzYW1lIGFzIHRoZSB2aWV3IHdhcyBjcmVhdGVkIHdpdGhpbi5cbiAgICAgICAgICAgICAgICAvLyBFeGl0IGVhcmx5IGlmIHRoZSAkdHJhbnNpdGlvbiQgd2lsbCBleGl0IHRoZSBzdGF0ZSB0aGUgdmlldyBpcyBmb3IuXG4gICAgICAgICAgICAgICAgaWYgKCR0cmFuc2l0aW9uJCA9PT0gdmlld0NyZWF0aW9uVHJhbnNfMSB8fCAkdHJhbnNpdGlvbiQuZXhpdGluZygpLmluZGV4T2Yodmlld1N0YXRlKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgdG9QYXJhbXMgPSAkdHJhbnNpdGlvbiQucGFyYW1zKCd0bycpO1xuICAgICAgICAgICAgICAgIHZhciBmcm9tUGFyYW1zID0gJHRyYW5zaXRpb24kLnBhcmFtcygnZnJvbScpO1xuICAgICAgICAgICAgICAgIHZhciBnZXROb2RlU2NoZW1hID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUucGFyYW1TY2hlbWE7IH07XG4gICAgICAgICAgICAgICAgdmFyIHRvU2NoZW1hID0gJHRyYW5zaXRpb24kXG4gICAgICAgICAgICAgICAgICAgIC50cmVlQ2hhbmdlcygndG8nKVxuICAgICAgICAgICAgICAgICAgICAubWFwKGdldE5vZGVTY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoY29yZS51bm5lc3RSLCBbXSk7XG4gICAgICAgICAgICAgICAgdmFyIGZyb21TY2hlbWEgPSAkdHJhbnNpdGlvbiRcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVDaGFuZ2VzKCdmcm9tJylcbiAgICAgICAgICAgICAgICAgICAgLm1hcChnZXROb2RlU2NoZW1hKVxuICAgICAgICAgICAgICAgICAgICAucmVkdWNlKGNvcmUudW5uZXN0UiwgW10pO1xuICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRvIHBhcmFtcyB0aGF0IGhhdmUgZGlmZmVyZW50IHZhbHVlcyB0aGFuIHRoZSBmcm9tIHBhcmFtc1xuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VkVG9QYXJhbXMgPSB0b1NjaGVtYS5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBmcm9tU2NoZW1hLmluZGV4T2YocGFyYW0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWR4ID09PSAtMSB8fCAhZnJvbVNjaGVtYVtpZHhdLnR5cGUuZXF1YWxzKHRvUGFyYW1zW3BhcmFtLmlkXSwgZnJvbVBhcmFtc1twYXJhbS5pZF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgdHJpZ2dlciBjYWxsYmFjayBpZiBhIHRvIHBhcmFtIGhhcyBjaGFuZ2VkIG9yIGlzIG5ld1xuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VkVG9QYXJhbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VkS2V5c18xID0gY2hhbmdlZFRvUGFyYW1zLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbHRlciB0aGUgcGFyYW1zIHRvIG9ubHkgY2hhbmdlZC9uZXcgdG8gcGFyYW1zLiAgYCR0cmFuc2l0aW9uJC5wYXJhbXMoKWAgbWF5IGJlIHVzZWQgdG8gZ2V0IGFsbCBwYXJhbXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZXMgPSBjb3JlLmZpbHRlcih0b1BhcmFtcywgZnVuY3Rpb24gKHZhbCwga2V5KSB7IHJldHVybiBjaGFuZ2VkS2V5c18xLmluZGV4T2Yoa2V5KSAhPT0gLTE7IH0pO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UudWlPblBhcmFtc0NoYW5nZWQobmV3VmFsdWVzLCAkdHJhbnNpdGlvbiQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3Moe30sIHBhcmFtc1VwZGF0ZWQsIGhvb2tPcHRpb25zKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIGNvbXBvbmVudC1sZXZlbCBob29rIGZvciB1aUNhbkV4aXRcbiAgICAgICAgaWYgKGNvcmUuaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UudWlDYW5FeGl0KSkge1xuICAgICAgICAgICAgdmFyIGlkXzEgPSBfdWlDYW5FeGl0SWQrKztcbiAgICAgICAgICAgIHZhciBjYWNoZVByb3BfMSA9ICdfdWlDYW5FeGl0SWRzJztcbiAgICAgICAgICAgIC8vIFJldHVybnMgdHJ1ZSBpZiBhIHJlZGlyZWN0IHRyYW5zaXRpb24gYWxyZWFkeSBhbnN3ZXJlZCB0cnV0aHlcbiAgICAgICAgICAgIHZhciBwcmV2VHJ1dGh5QW5zd2VyXzEgPSBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0cmFucyAmJiAoKHRyYW5zW2NhY2hlUHJvcF8xXSAmJiB0cmFuc1tjYWNoZVByb3BfMV1baWRfMV0gPT09IHRydWUpIHx8IHByZXZUcnV0aHlBbnN3ZXJfMSh0cmFucy5yZWRpcmVjdGVkRnJvbSgpKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSWYgYSB1c2VyIGFuc3dlcmVkIHllcywgYnV0IHRoZSB0cmFuc2l0aW9uIHdhcyBsYXRlciByZWRpcmVjdGVkLCBkb24ndCBhbHNvIGFzayBmb3IgdGhlIG5ldyByZWRpcmVjdCB0cmFuc2l0aW9uXG4gICAgICAgICAgICB2YXIgd3JhcHBlZEhvb2sgPSBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB2YXIgaWRzID0gKHRyYW5zW2NhY2hlUHJvcF8xXSA9IHRyYW5zW2NhY2hlUHJvcF8xXSB8fCB7fSk7XG4gICAgICAgICAgICAgICAgaWYgKCFwcmV2VHJ1dGh5QW5zd2VyXzEodHJhbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UgPSAkcS53aGVuKGNvbnRyb2xsZXJJbnN0YW5jZS51aUNhbkV4aXQodHJhbnMpKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIChpZHNbaWRfMV0gPSB2YWwgIT09IGZhbHNlKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjcml0ZXJpYSA9IHsgZXhpdGluZzogdmlld1N0YXRlLm5hbWUgfTtcbiAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgJHRyYW5zaXRpb25zLm9uQmVmb3JlKGNyaXRlcmlhLCB3cmFwcGVkSG9vaywgaG9va09wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZy5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpLmRpcmVjdGl2ZSgndWlWaWV3JywgdWlWaWV3KTtcbiAgICBuZy5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpLmRpcmVjdGl2ZSgndWlWaWV3JywgJFZpZXdEaXJlY3RpdmVGaWxsKTtcblxuICAgIC8qKiBAbW9kdWxlIG5nMSAqLyAvKiogKi9cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uICRWaWV3U2Nyb2xsUHJvdmlkZXIoKSB7XG4gICAgICAgIHZhciB1c2VBbmNob3JTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51c2VBbmNob3JTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1c2VBbmNob3JTY3JvbGwgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLiRnZXQgPSBbXG4gICAgICAgICAgICAnJGFuY2hvclNjcm9sbCcsXG4gICAgICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCRhbmNob3JTY3JvbGwsICR0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHVzZUFuY2hvclNjcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGFuY2hvclNjcm9sbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnRbMF0uc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgIH1cbiAgICBuZy5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpLnByb3ZpZGVyKCckdWlWaWV3U2Nyb2xsJywgJFZpZXdTY3JvbGxQcm92aWRlcik7XG5cbiAgICAvKipcbiAgICAgKiBNYWluIGVudHJ5IHBvaW50IGZvciBhbmd1bGFyIDEueCBidWlsZFxuICAgICAqIEBtb2R1bGUgbmcxXG4gICAgICovIC8qKiAqL1xuICAgIHZhciBpbmRleCA9ICd1aS5yb3V0ZXInO1xuXG4gICAgT2JqZWN0LmtleXMoY29yZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IGV4cG9ydHNba2V5XSA9IGNvcmVba2V5XTsgfSk7XG4gICAgZXhwb3J0cy5jb3JlID0gY29yZTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBpbmRleDtcbiAgICBleHBvcnRzLndhdGNoRGlnZXN0cyA9IHdhdGNoRGlnZXN0cztcbiAgICBleHBvcnRzLmdldExvY2FscyA9IGdldExvY2FscztcbiAgICBleHBvcnRzLmdldE5nMVZpZXdDb25maWdGYWN0b3J5ID0gZ2V0TmcxVmlld0NvbmZpZ0ZhY3Rvcnk7XG4gICAgZXhwb3J0cy5uZzFWaWV3c0J1aWxkZXIgPSBuZzFWaWV3c0J1aWxkZXI7XG4gICAgZXhwb3J0cy5OZzFWaWV3Q29uZmlnID0gTmcxVmlld0NvbmZpZztcbiAgICBleHBvcnRzLlN0YXRlUHJvdmlkZXIgPSBTdGF0ZVByb3ZpZGVyO1xuICAgIGV4cG9ydHMuVXJsUm91dGVyUHJvdmlkZXIgPSBVcmxSb3V0ZXJQcm92aWRlcjtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11aS1yb3V0ZXItYW5ndWxhcmpzLmpzLm1hcFxuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsIGV2YWwpKFwidGhpc1wiKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsImltcG9ydCBhcGkgZnJvbSAnLi4vYXBpL2FwaSdcblxubGV0IHNjb3BlO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZUNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcigkc2NvcGUsJGh0dHApIHtcbiAgICAnbmdJbmplY3QnO1xuICAgIHNjb3BlPSRzY29wZTtcbiAgICBzY29wZS5tZXNzYWdlPSRzY29wZS5uYW1lO1xuICAgIHRoaXMuaHR0cCA9ICRodHRwO1xuICB9O1xuICBnZXRNZXNzYWdlKCkge1xuICAgIGxldCBwYXJhbSA9IHtcbiAgICAgIHhuYW1lOiAnZG9kb2wnXG4gICAgfVxuICAgIGFwaS5uZ1Bvc3QodGhpcy5odHRwLCd3YWxsZXR3LmV4bWFzdGVyYmFuaz8nLCBwYXJhbSwocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgIGlmKHJlc3BvbnNlLlNUQVRVUyA9PT0nT0snKXtcbiAgICAgICAgc2NvcGUubGlzdEJhbms9cmVzcG9uc2UuTElTVF9CQU5LO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5jb25zdCBzZXJ2ZXIgPSAnaHR0cHM6Ly93d3cuZXhhY3QuY28uaWQvU0UvJ1xuLy9jb25zdCBzZXJ2ZXIgPSAnaHR0cDovLzE5Mi4xNjguMC4xMTM6ODA4NC9TRS8nXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIG5nUG9zdCgkaHR0cCwgc2VydmljZSwgZGF0YSwgcmVzdWx0KSB7XG4gICAgICAgIGxldCBjb25maWcgPSB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICRodHRwLnBvc3Qoc2VydmVyICsgc2VydmljZSwgZGF0YSwgY29uZmlnKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgcmVzdWx0KHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIuc3RhdHVzKVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHN0YXRpYyBhc3luYyBuZ0dldCgkaHR0cCwgc2VydmljZSwgZGF0YSwgcmVzdWx0KSB7XG4gICAgICAgIGxldCBjb25maWcgPSB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICRodHRwLmdldChzZXJ2ZXIgKyBzZXJ2aWNlLCBkYXRhLCBjb25maWcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICByZXN1bHQocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5zdGF0dXMpXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgc3RhdGljIGFzeW5jIG5nUHV0KCRodHRwLCBzZXJ2aWNlLCBkYXRhLCByZXN1bHQpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJGh0dHAucHV0KHNlcnZlciArIHNlcnZpY2UsIGRhdGEsIGNvbmZpZykudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIHJlc3VsdChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLnN0YXR1cylcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBzdGF0aWMgYXN5bmMgbmdEZWxldGUoJGh0dHAsIHNlcnZpY2UsIGRhdGEsIHJlc3VsdCkge1xuICAgICAgICBsZXQgY29uZmlnID0ge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkaHR0cC5wdXQoc2VydmVyICsgc2VydmljZSwgZGF0YSwgY29uZmlnKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgcmVzdWx0KHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIuc3RhdHVzKVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vSlFVRVJZIEFQSVxuICAgIHN0YXRpYyBhc3luYyBkb1Bvc3Qoc2VydmljZSwgZGF0YSwgcmVzdWx0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgaHR0cFNlcnZlciA9IHNlcnZlciArIHNlcnZpY2U7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkLnBvc3QoaHR0cFNlcnZlciwgZGF0YSwgZnVuY3Rpb24gKHJlc3BvbnNlLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0KEpTT04ucGFyc2UocmVzcG9uc2UpKTtcbiAgICAgICAgICAgICAgICB9KS5kb25lKChyZXNwb25lLCBzdGF0dXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9KS5mYWlsKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgfSkuYWx3YXlzKChkb25lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0IERvbmUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHN0YXRpYyBhc3luYyBkb0dldChzZXJ2aWNlLCBkYXRhLCByZXN1bHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBodHRwU2VydmVyID0gc2VydmVyICsgc2VydmljZTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQuZ2V0KGh0dHBTZXJ2ZXIsIGRhdGEsIGZ1bmN0aW9uIChyZXNwb25zZSwgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdChKU09OLnBhcnNlKHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgfSkuZG9uZSgocmVzcG9uZSwgc3RhdHVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfSkuZmFpbCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pLmFsd2F5cygoZG9uZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVxdWVzdCBEb25lJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbn1cbiIsIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2My4zLjFcbiAqIGh0dHBzOi8vanF1ZXJ5LmNvbS9cbiAqXG4gKiBJbmNsdWRlcyBTaXp6bGUuanNcbiAqIGh0dHBzOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE4LTAxLTIwVDE3OjI0WlxuICovXG4oIGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vIEZvciBDb21tb25KUyBhbmQgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgd2hlcmUgYSBwcm9wZXIgYHdpbmRvd2Bcblx0XHQvLyBpcyBwcmVzZW50LCBleGVjdXRlIHRoZSBmYWN0b3J5IGFuZCBnZXQgalF1ZXJ5LlxuXHRcdC8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaGF2ZSBhIGB3aW5kb3dgIHdpdGggYSBgZG9jdW1lbnRgXG5cdFx0Ly8gKHN1Y2ggYXMgTm9kZS5qcyksIGV4cG9zZSBhIGZhY3RvcnkgYXMgbW9kdWxlLmV4cG9ydHMuXG5cdFx0Ly8gVGhpcyBhY2NlbnR1YXRlcyB0aGUgbmVlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgcmVhbCBgd2luZG93YC5cblx0XHQvLyBlLmcuIHZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpKHdpbmRvdyk7XG5cdFx0Ly8gU2VlIHRpY2tldCAjMTQ1NDkgZm9yIG1vcmUgaW5mby5cblx0XHRtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/XG5cdFx0XHRmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6XG5cdFx0XHRmdW5jdGlvbiggdyApIHtcblx0XHRcdFx0aWYgKCAhdy5kb2N1bWVudCApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhY3RvcnkoIHcgKTtcblx0XHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0ZmFjdG9yeSggZ2xvYmFsICk7XG5cdH1cblxuLy8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXRcbn0gKSggdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkge1xuXG4vLyBFZGdlIDw9IDEyIC0gMTMrLCBGaXJlZm94IDw9MTggLSA0NSssIElFIDEwIC0gMTEsIFNhZmFyaSA1LjEgLSA5KywgaU9TIDYgLSA5LjFcbi8vIHRocm93IGV4Y2VwdGlvbnMgd2hlbiBub24tc3RyaWN0IGNvZGUgKGUuZy4sIEFTUC5ORVQgNC41KSBhY2Nlc3NlcyBzdHJpY3QgbW9kZVxuLy8gYXJndW1lbnRzLmNhbGxlZS5jYWxsZXIgKHRyYWMtMTMzMzUpLiBCdXQgYXMgb2YgalF1ZXJ5IDMuMCAoMjAxNiksIHN0cmljdCBtb2RlIHNob3VsZCBiZSBjb21tb25cbi8vIGVub3VnaCB0aGF0IGFsbCBzdWNoIGF0dGVtcHRzIGFyZSBndWFyZGVkIGluIGEgdHJ5IGJsb2NrLlxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBhcnIgPSBbXTtcblxudmFyIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50O1xuXG52YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbnZhciBzbGljZSA9IGFyci5zbGljZTtcblxudmFyIGNvbmNhdCA9IGFyci5jb25jYXQ7XG5cbnZhciBwdXNoID0gYXJyLnB1c2g7XG5cbnZhciBpbmRleE9mID0gYXJyLmluZGV4T2Y7XG5cbnZhciBjbGFzczJ0eXBlID0ge307XG5cbnZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7XG5cbnZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgZm5Ub1N0cmluZyA9IGhhc093bi50b1N0cmluZztcblxudmFyIE9iamVjdEZ1bmN0aW9uU3RyaW5nID0gZm5Ub1N0cmluZy5jYWxsKCBPYmplY3QgKTtcblxudmFyIHN1cHBvcnQgPSB7fTtcblxudmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiBpc0Z1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgIC8vIFN1cHBvcnQ6IENocm9tZSA8PTU3LCBGaXJlZm94IDw9NTJcbiAgICAgIC8vIEluIHNvbWUgYnJvd3NlcnMsIHR5cGVvZiByZXR1cm5zIFwiZnVuY3Rpb25cIiBmb3IgSFRNTCA8b2JqZWN0PiBlbGVtZW50c1xuICAgICAgLy8gKGkuZS4sIGB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvYmplY3RcIiApID09PSBcImZ1bmN0aW9uXCJgKS5cbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gY2xhc3NpZnkgKmFueSogRE9NIG5vZGUgYXMgYSBmdW5jdGlvbi5cbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIG9iai5ub2RlVHlwZSAhPT0gXCJudW1iZXJcIjtcbiAgfTtcblxuXG52YXIgaXNXaW5kb3cgPSBmdW5jdGlvbiBpc1dpbmRvdyggb2JqICkge1xuXHRcdHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG5cdH07XG5cblxuXG5cblx0dmFyIHByZXNlcnZlZFNjcmlwdEF0dHJpYnV0ZXMgPSB7XG5cdFx0dHlwZTogdHJ1ZSxcblx0XHRzcmM6IHRydWUsXG5cdFx0bm9Nb2R1bGU6IHRydWVcblx0fTtcblxuXHRmdW5jdGlvbiBET01FdmFsKCBjb2RlLCBkb2MsIG5vZGUgKSB7XG5cdFx0ZG9jID0gZG9jIHx8IGRvY3VtZW50O1xuXG5cdFx0dmFyIGksXG5cdFx0XHRzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJzY3JpcHRcIiApO1xuXG5cdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdGlmICggbm9kZSApIHtcblx0XHRcdGZvciAoIGkgaW4gcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyApIHtcblx0XHRcdFx0aWYgKCBub2RlWyBpIF0gKSB7XG5cdFx0XHRcdFx0c2NyaXB0WyBpIF0gPSBub2RlWyBpIF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZG9jLmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdCApLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApO1xuXHR9XG5cblxuZnVuY3Rpb24gdG9UeXBlKCBvYmogKSB7XG5cdGlmICggb2JqID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIG9iaiArIFwiXCI7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9Mi4zIG9ubHkgKGZ1bmN0aW9uaXNoIFJlZ0V4cClcblx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cblx0XHRjbGFzczJ0eXBlWyB0b1N0cmluZy5jYWxsKCBvYmogKSBdIHx8IFwib2JqZWN0XCIgOlxuXHRcdHR5cGVvZiBvYmo7XG59XG4vKiBnbG9iYWwgU3ltYm9sICovXG4vLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuZXNsaW50cmMuanNvbiB3b3VsZCBjcmVhdGUgYSBkYW5nZXIgb2YgdXNpbmcgdGhlIGdsb2JhbFxuLy8gdW5ndWFyZGVkIGluIGFub3RoZXIgcGxhY2UsIGl0IHNlZW1zIHNhZmVyIHRvIGRlZmluZSBnbG9iYWwgb25seSBmb3IgdGhpcyBtb2R1bGVcblxuXG5cbnZhclxuXHR2ZXJzaW9uID0gXCIzLjMuMVwiLFxuXG5cdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblxuXHRcdC8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJ1xuXHRcdC8vIE5lZWQgaW5pdCBpZiBqUXVlcnkgaXMgY2FsbGVkIChqdXN0IGFsbG93IGVycm9yIHRvIGJlIHRocm93biBpZiBub3QgaW5jbHVkZWQpXG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHlcblx0Ly8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQXG5cdHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nO1xuXG5qUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0ge1xuXG5cdC8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWRcblx0anF1ZXJ5OiB2ZXJzaW9uLFxuXG5cdGNvbnN0cnVjdG9yOiBqUXVlcnksXG5cblx0Ly8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwXG5cdGxlbmd0aDogMCxcblxuXHR0b0FycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1Jcblx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0Z2V0OiBmdW5jdGlvbiggbnVtICkge1xuXG5cdFx0Ly8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheVxuXHRcdGlmICggbnVtID09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXRcblx0XHRyZXR1cm4gbnVtIDwgMCA/IHRoaXNbIG51bSArIHRoaXMubGVuZ3RoIF0gOiB0aGlzWyBudW0gXTtcblx0fSxcblxuXHQvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG5cdC8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KVxuXHRwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblxuXHRcdC8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0XG5cdFx0dmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApO1xuXG5cdFx0Ly8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSlcblx0XHRyZXQucHJldk9iamVjdCA9IHRoaXM7XG5cblx0XHQvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldFxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0Ly8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC5cblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2sgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTtcblx0XHR9ICkgKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzWyBqIF0gXSA6IFtdICk7XG5cdH0sXG5cblx0ZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKTtcblx0fSxcblxuXHQvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdC8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLlxuXHRwdXNoOiBwdXNoLFxuXHRzb3J0OiBhcnIuc29ydCxcblx0c3BsaWNlOiBhcnIuc3BsaWNlXG59O1xuXG5qUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhaXNGdW5jdGlvbiggdGFyZ2V0ICkgKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHQvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcblx0aWYgKCBpID09PSBsZW5ndGggKSB7XG5cdFx0dGFyZ2V0ID0gdGhpcztcblx0XHRpLS07XG5cdH1cblxuXHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblxuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoICggb3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdICkgIT0gbnVsbCApIHtcblxuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRzcmMgPSB0YXJnZXRbIG5hbWUgXTtcblx0XHRcdFx0Y29weSA9IG9wdGlvbnNbIG5hbWUgXTtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdGlmICggdGFyZ2V0ID09PSBjb3B5ICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvcHkgKSB8fFxuXHRcdFx0XHRcdCggY29weUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KCBjb3B5ICkgKSApICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSApIHtcblx0XHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBBcnJheS5pc0FycmF5KCBzcmMgKSA/IHNyYyA6IFtdO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBzcmMgKSA/IHNyYyA6IHt9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTtcblxuXHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGNvcHk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZVxuXHRleHBhbmRvOiBcImpRdWVyeVwiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXG5cdC8vIEFzc3VtZSBqUXVlcnkgaXMgcmVhZHkgd2l0aG91dCB0aGUgcmVhZHkgbW9kdWxlXG5cdGlzUmVhZHk6IHRydWUsXG5cblx0ZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCBtc2cgKTtcblx0fSxcblxuXHRub29wOiBmdW5jdGlvbigpIHt9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIHByb3RvLCBDdG9yO1xuXG5cdFx0Ly8gRGV0ZWN0IG9idmlvdXMgbmVnYXRpdmVzXG5cdFx0Ly8gVXNlIHRvU3RyaW5nIGluc3RlYWQgb2YgalF1ZXJ5LnR5cGUgdG8gY2F0Y2ggaG9zdCBvYmplY3RzXG5cdFx0aWYgKCAhb2JqIHx8IHRvU3RyaW5nLmNhbGwoIG9iaiApICE9PSBcIltvYmplY3QgT2JqZWN0XVwiICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHByb3RvID0gZ2V0UHJvdG8oIG9iaiApO1xuXG5cdFx0Ly8gT2JqZWN0cyB3aXRoIG5vIHByb3RvdHlwZSAoZS5nLiwgYE9iamVjdC5jcmVhdGUoIG51bGwgKWApIGFyZSBwbGFpblxuXHRcdGlmICggIXByb3RvICkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gT2JqZWN0cyB3aXRoIHByb3RvdHlwZSBhcmUgcGxhaW4gaWZmIHRoZXkgd2VyZSBjb25zdHJ1Y3RlZCBieSBhIGdsb2JhbCBPYmplY3QgZnVuY3Rpb25cblx0XHRDdG9yID0gaGFzT3duLmNhbGwoIHByb3RvLCBcImNvbnN0cnVjdG9yXCIgKSAmJiBwcm90by5jb25zdHJ1Y3Rvcjtcblx0XHRyZXR1cm4gdHlwZW9mIEN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBmblRvU3RyaW5nLmNhbGwoIEN0b3IgKSA9PT0gT2JqZWN0RnVuY3Rpb25TdHJpbmc7XG5cdH0sXG5cblx0aXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblxuXHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5cdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lc2xpbnQvZXNsaW50L2lzc3Vlcy82MTI1XG5cdFx0dmFyIG5hbWU7XG5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0Ly8gRXZhbHVhdGVzIGEgc2NyaXB0IGluIGEgZ2xvYmFsIGNvbnRleHRcblx0Z2xvYmFsRXZhbDogZnVuY3Rpb24oIGNvZGUgKSB7XG5cdFx0RE9NRXZhbCggY29kZSApO1xuXHR9LFxuXG5cdGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrICkge1xuXHRcdHZhciBsZW5ndGgsIGkgPSAwO1xuXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7XG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBvYmo7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5XG5cdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdHJldHVybiB0ZXh0ID09IG51bGwgP1xuXHRcdFx0XCJcIiA6XG5cdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0fSxcblxuXHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHtcblx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuXHRcdGlmICggYXJyICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXlMaWtlKCBPYmplY3QoIGFyciApICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggcmV0LFxuXHRcdFx0XHRcdHR5cGVvZiBhcnIgPT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdFsgYXJyIF0gOiBhcnJcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guY2FsbCggcmV0LCBhcnIgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdGluQXJyYXk6IGZ1bmN0aW9uKCBlbGVtLCBhcnIsIGkgKSB7XG5cdFx0cmV0dXJuIGFyciA9PSBudWxsID8gLTEgOiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdG1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHtcblx0XHR2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsXG5cdFx0XHRqID0gMCxcblx0XHRcdGkgPSBmaXJzdC5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdGZpcnN0WyBpKysgXSA9IHNlY29uZFsgaiBdO1xuXHRcdH1cblxuXHRcdGZpcnN0Lmxlbmd0aCA9IGk7XG5cblx0XHRyZXR1cm4gZmlyc3Q7XG5cdH0sXG5cblx0Z3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkge1xuXHRcdHZhciBjYWxsYmFja0ludmVyc2UsXG5cdFx0XHRtYXRjaGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcblx0XHRcdGNhbGxiYWNrRXhwZWN0ID0gIWludmVydDtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCBvbmx5IHNhdmluZyB0aGUgaXRlbXNcblx0XHQvLyB0aGF0IHBhc3MgdGhlIHZhbGlkYXRvciBmdW5jdGlvblxuXHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0Y2FsbGJhY2tJbnZlcnNlID0gIWNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpICk7XG5cdFx0XHRpZiAoIGNhbGxiYWNrSW52ZXJzZSAhPT0gY2FsbGJhY2tFeHBlY3QgKSB7XG5cdFx0XHRcdG1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVzO1xuXHR9LFxuXG5cdC8vIGFyZyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHtcblx0XHR2YXIgbGVuZ3RoLCB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0cmV0ID0gW107XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgdHJhbnNsYXRpbmcgZWFjaCBvZiB0aGUgaXRlbXMgdG8gdGhlaXIgbmV3IHZhbHVlc1xuXHRcdGlmICggaXNBcnJheUxpa2UoIGVsZW1zICkgKSB7XG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGg7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKCBpIGluIGVsZW1zICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0cmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApO1xuXHR9LFxuXG5cdC8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0c1xuXHRndWlkOiAxLFxuXG5cdC8vIGpRdWVyeS5zdXBwb3J0IGlzIG5vdCB1c2VkIGluIENvcmUgYnV0IG90aGVyIHByb2plY3RzIGF0dGFjaCB0aGVpclxuXHQvLyBwcm9wZXJ0aWVzIHRvIGl0IHNvIGl0IG5lZWRzIHRvIGV4aXN0LlxuXHRzdXBwb3J0OiBzdXBwb3J0XG59ICk7XG5cbmlmICggdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRqUXVlcnkuZm5bIFN5bWJvbC5pdGVyYXRvciBdID0gYXJyWyBTeW1ib2wuaXRlcmF0b3IgXTtcbn1cblxuLy8gUG9wdWxhdGUgdGhlIGNsYXNzMnR5cGUgbWFwXG5qUXVlcnkuZWFjaCggXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbFwiLnNwbGl0KCBcIiBcIiApLFxuZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xufSApO1xuXG5mdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkge1xuXG5cdC8vIFN1cHBvcnQ6IHJlYWwgaU9TIDguMiBvbmx5IChub3QgcmVwcm9kdWNpYmxlIGluIHNpbXVsYXRvcilcblx0Ly8gYGluYCBjaGVjayB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0yMTQ1KVxuXHQvLyBoYXNPd24gaXNuJ3QgdXNlZCBoZXJlIGR1ZSB0byBmYWxzZSBuZWdhdGl2ZXNcblx0Ly8gcmVnYXJkaW5nIE5vZGVsaXN0IGxlbmd0aCBpbiBJRVxuXHR2YXIgbGVuZ3RoID0gISFvYmogJiYgXCJsZW5ndGhcIiBpbiBvYmogJiYgb2JqLmxlbmd0aCxcblx0XHR0eXBlID0gdG9UeXBlKCBvYmogKTtcblxuXHRpZiAoIGlzRnVuY3Rpb24oIG9iaiApIHx8IGlzV2luZG93KCBvYmogKSApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRyZXR1cm4gdHlwZSA9PT0gXCJhcnJheVwiIHx8IGxlbmd0aCA9PT0gMCB8fFxuXHRcdHR5cGVvZiBsZW5ndGggPT09IFwibnVtYmVyXCIgJiYgbGVuZ3RoID4gMCAmJiAoIGxlbmd0aCAtIDEgKSBpbiBvYmo7XG59XG52YXIgU2l6emxlID1cbi8qIVxuICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjIuMy4zXG4gKiBodHRwczovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxNi0wOC0wOFxuICovXG4oZnVuY3Rpb24oIHdpbmRvdyApIHtcblxudmFyIGksXG5cdHN1cHBvcnQsXG5cdEV4cHIsXG5cdGdldFRleHQsXG5cdGlzWE1MLFxuXHR0b2tlbml6ZSxcblx0Y29tcGlsZSxcblx0c2VsZWN0LFxuXHRvdXRlcm1vc3RDb250ZXh0LFxuXHRzb3J0SW5wdXQsXG5cdGhhc0R1cGxpY2F0ZSxcblxuXHQvLyBMb2NhbCBkb2N1bWVudCB2YXJzXG5cdHNldERvY3VtZW50LFxuXHRkb2N1bWVudCxcblx0ZG9jRWxlbSxcblx0ZG9jdW1lbnRJc0hUTUwsXG5cdHJidWdneVFTQSxcblx0cmJ1Z2d5TWF0Y2hlcyxcblx0bWF0Y2hlcyxcblx0Y29udGFpbnMsXG5cblx0Ly8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuXHRleHBhbmRvID0gXCJzaXp6bGVcIiArIDEgKiBuZXcgRGF0ZSgpLFxuXHRwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsXG5cdGRpcnJ1bnMgPSAwLFxuXHRkb25lID0gMCxcblx0Y2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRjb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0c29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIDA7XG5cdH0sXG5cblx0Ly8gSW5zdGFuY2UgbWV0aG9kc1xuXHRoYXNPd24gPSAoe30pLmhhc093blByb3BlcnR5LFxuXHRhcnIgPSBbXSxcblx0cG9wID0gYXJyLnBvcCxcblx0cHVzaF9uYXRpdmUgPSBhcnIucHVzaCxcblx0cHVzaCA9IGFyci5wdXNoLFxuXHRzbGljZSA9IGFyci5zbGljZSxcblx0Ly8gVXNlIGEgc3RyaXBwZWQtZG93biBpbmRleE9mIGFzIGl0J3MgZmFzdGVyIHRoYW4gbmF0aXZlXG5cdC8vIGh0dHBzOi8vanNwZXJmLmNvbS90aG9yLWluZGV4b2YtdnMtZm9yLzVcblx0aW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdGxlbiA9IGxpc3QubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0aWYgKCBsaXN0W2ldID09PSBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXG5cdGJvb2xlYW5zID0gXCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLFxuXG5cdC8vIFJlZ3VsYXIgZXhwcmVzc2lvbnNcblxuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZVxuXHR3aGl0ZXNwYWNlID0gXCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLFxuXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllclxuXHRpZGVudGlmaWVyID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXDAtXFxcXHhhMF0pK1wiLFxuXG5cdC8vIEF0dHJpYnV0ZSBzZWxlY3RvcnM6IGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHRhdHRyaWJ1dGVzID0gXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIE9wZXJhdG9yIChjYXB0dXJlIDIpXG5cdFx0XCIqKFsqXiR8IX5dPz0pXCIgKyB3aGl0ZXNwYWNlICtcblx0XHQvLyBcIkF0dHJpYnV0ZSB2YWx1ZXMgbXVzdCBiZSBDU1MgaWRlbnRpZmllcnMgW2NhcHR1cmUgNV0gb3Igc3RyaW5ncyBbY2FwdHVyZSAzIG9yIGNhcHR1cmUgNF1cIlxuXHRcdFwiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIgKyBpZGVudGlmaWVyICsgXCIpKXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcIipcXFxcXVwiLFxuXG5cdHBzZXVkb3MgPSBcIjooXCIgKyBpZGVudGlmaWVyICsgXCIpKD86XFxcXCgoXCIgK1xuXHRcdC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG5cdFx0Ly8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG5cdFx0XCIoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXxcIiArXG5cdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXHRcdC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcblx0XHRcIi4qXCIgK1xuXHRcdFwiKVxcXFwpfClcIixcblxuXHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRydHJpbSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIiArIHdoaXRlc3BhY2UgKyBcIiskXCIsIFwiZ1wiICksXG5cblx0cmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdHJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKihbPit+XXxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXG5cdHJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCBcIj1cIiArIHdoaXRlc3BhY2UgKyBcIiooW15cXFxcXSdcXFwiXSo/KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcIkNMQVNTXCI6IG5ldyBSZWdFeHAoIFwiXlxcXFwuKFwiICsgaWRlbnRpZmllciArIFwiKVwiICksXG5cdFx0XCJUQUdcIjogbmV3IFJlZ0V4cCggXCJeKFwiICsgaWRlbnRpZmllciArIFwifFsqXSlcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdC8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGBcblx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblxuXHQvLyBDU1MgZXNjYXBlc1xuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyNFxuXHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdGVzY2FwZWQgOlxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gQ1NTIHN0cmluZy9pZGVudGlmaWVyIHNlcmlhbGl6YXRpb25cblx0Ly8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLyNjb21tb24tc2VyaWFsaXppbmctaWRpb21zXG5cdHJjc3Nlc2NhcGUgPSAvKFtcXDAtXFx4MWZcXHg3Zl18Xi0/XFxkKXxeLSR8W15cXDAtXFx4MWZcXHg3Zi1cXHVGRkZGXFx3LV0vZyxcblx0ZmNzc2VzY2FwZSA9IGZ1bmN0aW9uKCBjaCwgYXNDb2RlUG9pbnQgKSB7XG5cdFx0aWYgKCBhc0NvZGVQb2ludCApIHtcblxuXHRcdFx0Ly8gVSswMDAwIE5VTEwgYmVjb21lcyBVK0ZGRkQgUkVQTEFDRU1FTlQgQ0hBUkFDVEVSXG5cdFx0XHRpZiAoIGNoID09PSBcIlxcMFwiICkge1xuXHRcdFx0XHRyZXR1cm4gXCJcXHVGRkZEXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnRyb2wgY2hhcmFjdGVycyBhbmQgKGRlcGVuZGVudCB1cG9uIHBvc2l0aW9uKSBudW1iZXJzIGdldCBlc2NhcGVkIGFzIGNvZGUgcG9pbnRzXG5cdFx0XHRyZXR1cm4gY2guc2xpY2UoIDAsIC0xICkgKyBcIlxcXFxcIiArIGNoLmNoYXJDb2RlQXQoIGNoLmxlbmd0aCAtIDEgKS50b1N0cmluZyggMTYgKSArIFwiIFwiO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyIHBvdGVudGlhbGx5LXNwZWNpYWwgQVNDSUkgY2hhcmFjdGVycyBnZXQgYmFja3NsYXNoLWVzY2FwZWRcblx0XHRyZXR1cm4gXCJcXFxcXCIgKyBjaDtcblx0fSxcblxuXHQvLyBVc2VkIGZvciBpZnJhbWVzXG5cdC8vIFNlZSBzZXREb2N1bWVudCgpXG5cdC8vIFJlbW92aW5nIHRoZSBmdW5jdGlvbiB3cmFwcGVyIGNhdXNlcyBhIFwiUGVybWlzc2lvbiBEZW5pZWRcIlxuXHQvLyBlcnJvciBpbiBJRVxuXHR1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0c2V0RG9jdW1lbnQoKTtcblx0fSxcblxuXHRkaXNhYmxlZEFuY2VzdG9yID0gYWRkQ29tYmluYXRvcihcblx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSB0cnVlICYmIChcImZvcm1cIiBpbiBlbGVtIHx8IFwibGFiZWxcIiBpbiBlbGVtKTtcblx0XHR9LFxuXHRcdHsgZGlyOiBcInBhcmVudE5vZGVcIiwgbmV4dDogXCJsZWdlbmRcIiB9XG5cdCk7XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcblx0XHR9IDpcblxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0dmFyIGogPSB0YXJnZXQubGVuZ3RoLFxuXHRcdFx0XHRpID0gMDtcblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG0sIGksIGVsZW0sIG5pZCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsXG5cdFx0bmV3Q29udGV4dCA9IGNvbnRleHQgJiYgY29udGV4dC5vd25lckRvY3VtZW50LFxuXG5cdFx0Ly8gbm9kZVR5cGUgZGVmYXVsdHMgdG8gOSwgc2luY2UgY29udGV4dCBkZWZhdWx0cyB0byBkb2N1bWVudFxuXHRcdG5vZGVUeXBlID0gY29udGV4dCA/IGNvbnRleHQubm9kZVR5cGUgOiA5O1xuXG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG5cdC8vIFJldHVybiBlYXJseSBmcm9tIGNhbGxzIHdpdGggaW52YWxpZCBzZWxlY3RvciBvciBjb250ZXh0XG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0Ly8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50c1xuXHRpZiAoICFzZWVkICkge1xuXG5cdFx0aWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHtcblx0XHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdFx0fVxuXHRcdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdFx0Ly8gSWYgdGhlIHNlbGVjdG9yIGlzIHN1ZmZpY2llbnRseSBzaW1wbGUsIHRyeSB1c2luZyBhIFwiZ2V0KkJ5KlwiIERPTSBtZXRob2Rcblx0XHRcdC8vIChleGNlcHRpbmcgRG9jdW1lbnRGcmFnbWVudCBjb250ZXh0LCB3aGVyZSB0aGUgbWV0aG9kcyBkb24ndCBleGlzdClcblx0XHRcdGlmICggbm9kZVR5cGUgIT09IDExICYmIChtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSkgKSB7XG5cblx0XHRcdFx0Ly8gSUQgc2VsZWN0b3Jcblx0XHRcdFx0aWYgKCAobSA9IG1hdGNoWzFdKSApIHtcblxuXHRcdFx0XHRcdC8vIERvY3VtZW50IGNvbnRleHRcblx0XHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdFx0Ly8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnNcblx0XHRcdFx0XHRcdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0XHRpZiAoIGVsZW0uaWQgPT09IG0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRWxlbWVudCBjb250ZXh0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHQvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG5cdFx0XHRcdFx0XHRpZiAoIG5ld0NvbnRleHQgJiYgKGVsZW0gPSBuZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICYmXG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiZcblx0XHRcdFx0XHRcdFx0ZWxlbS5pZCA9PT0gbSApIHtcblxuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFR5cGUgc2VsZWN0b3Jcblx0XHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHRcdC8vIENsYXNzIHNlbGVjdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoIChtID0gbWF0Y2hbM10pICYmIHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJlxuXHRcdFx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVGFrZSBhZHZhbnRhZ2Ugb2YgcXVlcnlTZWxlY3RvckFsbFxuXHRcdFx0aWYgKCBzdXBwb3J0LnFzYSAmJlxuXHRcdFx0XHQhY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdICYmXG5cdFx0XHRcdCghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7XG5cblx0XHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dDtcblx0XHRcdFx0XHRuZXdTZWxlY3RvciA9IHNlbGVjdG9yO1xuXG5cdFx0XHRcdC8vIHFTQSBsb29rcyBvdXRzaWRlIEVsZW1lbnQgY29udGV4dCwgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudFxuXHRcdFx0XHQvLyBUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhpcyB3b3JrYXJvdW5kIHRlY2huaXF1ZVxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PThcblx0XHRcdFx0Ly8gRXhjbHVkZSBvYmplY3QgZWxlbWVudHNcblx0XHRcdFx0fSBlbHNlIGlmICggY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHRcdFx0Ly8gQ2FwdHVyZSB0aGUgY29udGV4dCBJRCwgc2V0dGluZyBpdCBmaXJzdCBpZiBuZWNlc3Nhcnlcblx0XHRcdFx0XHRpZiAoIChuaWQgPSBjb250ZXh0LmdldEF0dHJpYnV0ZSggXCJpZFwiICkpICkge1xuXHRcdFx0XHRcdFx0bmlkID0gbmlkLnJlcGxhY2UoIHJjc3Nlc2NhcGUsIGZjc3Nlc2NhcGUgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgKG5pZCA9IGV4cGFuZG8pICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gUHJlZml4IGV2ZXJ5IHNlbGVjdG9yIGluIHRoZSBsaXN0XG5cdFx0XHRcdFx0Z3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0XHRcdFx0aSA9IGdyb3Vwcy5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRncm91cHNbaV0gPSBcIiNcIiArIG5pZCArIFwiIFwiICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oIFwiLFwiICk7XG5cblx0XHRcdFx0XHQvLyBFeHBhbmQgY29udGV4dCBmb3Igc2libGluZyBzZWxlY3RvcnNcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHxcblx0XHRcdFx0XHRcdGNvbnRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLFxuXHRcdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9IGNhdGNoICggcXNhRXJyb3IgKSB7XG5cdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdGlmICggbmlkID09PSBleHBhbmRvICkge1xuXHRcdFx0XHRcdFx0XHRjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWxsIG90aGVyc1xuXHRyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcbiAqXHRwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuICpcdGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG5cdHZhciBrZXlzID0gW107XG5cblx0ZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG5cdFx0Ly8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1Nylcblx0XHRpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG5cdFx0XHQvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcblx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07XG5cdFx0fVxuXHRcdHJldHVybiAoY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSk7XG5cdH1cblx0cmV0dXJuIGNhY2hlO1xufVxuXG4vKipcbiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFya1xuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuXHRmblsgZXhwYW5kbyBdID0gdHJ1ZTtcblx0cmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZWxlbWVudCBhbmQgcmV0dXJucyBhIGJvb2xlYW4gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBlbCApO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9IGZpbmFsbHkge1xuXHRcdC8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdFxuXHRcdGlmICggZWwucGFyZW50Tm9kZSApIHtcblx0XHRcdGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGVsICk7XG5cdFx0fVxuXHRcdC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG5cdFx0ZWwgPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7XG5cdHZhciBhcnIgPSBhdHRycy5zcGxpdChcInxcIiksXG5cdFx0aSA9IGFyci5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0RXhwci5hdHRySGFuZGxlWyBhcnJbaV0gXSA9IGhhbmRsZXI7XG5cdH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYlxuICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG4gKi9cbmZ1bmN0aW9uIHNpYmxpbmdDaGVjayggYSwgYiApIHtcblx0dmFyIGN1ciA9IGIgJiYgYSxcblx0XHRkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0YS5zb3VyY2VJbmRleCAtIGIuc291cmNlSW5kZXg7XG5cblx0Ly8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzXG5cdGlmICggZGlmZiApIHtcblx0XHRyZXR1cm4gZGlmZjtcblx0fVxuXG5cdC8vIENoZWNrIGlmIGIgZm9sbG93cyBhXG5cdGlmICggY3VyICkge1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7XG5cdFx0XHRpZiAoIGN1ciA9PT0gYiApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhID8gMSA6IC0xO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gKG5hbWUgPT09IFwiaW5wdXRcIiB8fCBuYW1lID09PSBcImJ1dHRvblwiKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciA6ZW5hYmxlZC86ZGlzYWJsZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGlzYWJsZWQgdHJ1ZSBmb3IgOmRpc2FibGVkOyBmYWxzZSBmb3IgOmVuYWJsZWRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIGRpc2FibGVkICkge1xuXG5cdC8vIEtub3duIDpkaXNhYmxlZCBmYWxzZSBwb3NpdGl2ZXM6IGZpZWxkc2V0W2Rpc2FibGVkXSA+IGxlZ2VuZDpudGgtb2YtdHlwZShuKzIpIDpjYW4tZGlzYWJsZVxuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBPbmx5IGNlcnRhaW4gZWxlbWVudHMgY2FuIG1hdGNoIDplbmFibGVkIG9yIDpkaXNhYmxlZFxuXHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NjcmlwdGluZy5odG1sI3NlbGVjdG9yLWVuYWJsZWRcblx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zY3JpcHRpbmcuaHRtbCNzZWxlY3Rvci1kaXNhYmxlZFxuXHRcdGlmICggXCJmb3JtXCIgaW4gZWxlbSApIHtcblxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGluaGVyaXRlZCBkaXNhYmxlZG5lc3Mgb24gcmVsZXZhbnQgbm9uLWRpc2FibGVkIGVsZW1lbnRzOlxuXHRcdFx0Ly8gKiBsaXN0ZWQgZm9ybS1hc3NvY2lhdGVkIGVsZW1lbnRzIGluIGEgZGlzYWJsZWQgZmllbGRzZXRcblx0XHRcdC8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjYXRlZ29yeS1saXN0ZWRcblx0XHRcdC8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjb25jZXB0LWZlLWRpc2FibGVkXG5cdFx0XHQvLyAqIG9wdGlvbiBlbGVtZW50cyBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHQvLyAgIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY29uY2VwdC1vcHRpb24tZGlzYWJsZWRcblx0XHRcdC8vIEFsbCBzdWNoIGVsZW1lbnRzIGhhdmUgYSBcImZvcm1cIiBwcm9wZXJ0eS5cblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICYmIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdC8vIE9wdGlvbiBlbGVtZW50cyBkZWZlciB0byBhIHBhcmVudCBvcHRncm91cCBpZiBwcmVzZW50XG5cdFx0XHRcdGlmICggXCJsYWJlbFwiIGluIGVsZW0gKSB7XG5cdFx0XHRcdFx0aWYgKCBcImxhYmVsXCIgaW4gZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0ucGFyZW50Tm9kZS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA2IC0gMTFcblx0XHRcdFx0Ly8gVXNlIHRoZSBpc0Rpc2FibGVkIHNob3J0Y3V0IHByb3BlcnR5IHRvIGNoZWNrIGZvciBkaXNhYmxlZCBmaWVsZHNldCBhbmNlc3RvcnNcblx0XHRcdFx0cmV0dXJuIGVsZW0uaXNEaXNhYmxlZCA9PT0gZGlzYWJsZWQgfHxcblxuXHRcdFx0XHRcdC8vIFdoZXJlIHRoZXJlIGlzIG5vIGlzRGlzYWJsZWQsIGNoZWNrIG1hbnVhbGx5XG5cdFx0XHRcdFx0LyoganNoaW50IC1XMDE4ICovXG5cdFx0XHRcdFx0ZWxlbS5pc0Rpc2FibGVkICE9PSAhZGlzYWJsZWQgJiZcblx0XHRcdFx0XHRcdGRpc2FibGVkQW5jZXN0b3IoIGVsZW0gKSA9PT0gZGlzYWJsZWQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblxuXHRcdC8vIFRyeSB0byB3aW5ub3cgb3V0IGVsZW1lbnRzIHRoYXQgY2FuJ3QgYmUgZGlzYWJsZWQgYmVmb3JlIHRydXN0aW5nIHRoZSBkaXNhYmxlZCBwcm9wZXJ0eS5cblx0XHQvLyBTb21lIHZpY3RpbXMgZ2V0IGNhdWdodCBpbiBvdXIgbmV0IChsYWJlbCwgbGVnZW5kLCBtZW51LCB0cmFjayksIGJ1dCBpdCBzaG91bGRuJ3Rcblx0XHQvLyBldmVuIGV4aXN0IG9uIHRoZW0sIGxldCBhbG9uZSBoYXZlIGEgYm9vbGVhbiB2YWx1ZS5cblx0XHR9IGVsc2UgaWYgKCBcImxhYmVsXCIgaW4gZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblx0XHR9XG5cblx0XHQvLyBSZW1haW5pbmcgZWxlbWVudHMgYXJlIG5laXRoZXIgOmVuYWJsZWQgbm9yIDpkaXNhYmxlZFxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuXHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgc3ViV2luZG93LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBSZXR1cm4gZWFybHkgaWYgZG9jIGlzIGludmFsaWQgb3IgYWxyZWFkeSBzZWxlY3RlZFxuXHRpZiAoIGRvYyA9PT0gZG9jdW1lbnQgfHwgZG9jLm5vZGVUeXBlICE9PSA5IHx8ICFkb2MuZG9jdW1lbnRFbGVtZW50ICkge1xuXHRcdHJldHVybiBkb2N1bWVudDtcblx0fVxuXG5cdC8vIFVwZGF0ZSBnbG9iYWwgdmFyaWFibGVzXG5cdGRvY3VtZW50ID0gZG9jO1xuXHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jdW1lbnQgKTtcblxuXHQvLyBTdXBwb3J0OiBJRSA5LTExLCBFZGdlXG5cdC8vIEFjY2Vzc2luZyBpZnJhbWUgZG9jdW1lbnRzIGFmdGVyIHVubG9hZCB0aHJvd3MgXCJwZXJtaXNzaW9uIGRlbmllZFwiIGVycm9ycyAoalF1ZXJ5ICMxMzkzNilcblx0aWYgKCBwcmVmZXJyZWREb2MgIT09IGRvY3VtZW50ICYmXG5cdFx0KHN1YldpbmRvdyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3KSAmJiBzdWJXaW5kb3cudG9wICE9PSBzdWJXaW5kb3cgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSAxMSwgRWRnZVxuXHRcdGlmICggc3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMCBvbmx5XG5cdFx0fSBlbHNlIGlmICggc3ViV2luZG93LmF0dGFjaEV2ZW50ICkge1xuXHRcdFx0c3ViV2luZG93LmF0dGFjaEV2ZW50KCBcIm9udW5sb2FkXCIsIHVubG9hZEhhbmRsZXIgKTtcblx0XHR9XG5cdH1cblxuXHQvKiBBdHRyaWJ1dGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBTdXBwb3J0OiBJRTw4XG5cdC8vIFZlcmlmeSB0aGF0IGdldEF0dHJpYnV0ZSByZWFsbHkgcmV0dXJucyBhdHRyaWJ1dGVzIGFuZCBub3QgcHJvcGVydGllc1xuXHQvLyAoZXhjZXB0aW5nIElFOCBib29sZWFucylcblx0c3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRlbC5jbGFzc05hbWUgPSBcImlcIjtcblx0XHRyZXR1cm4gIWVsLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKTtcblx0fSk7XG5cblx0LyogZ2V0RWxlbWVudChzKUJ5KlxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpIHJldHVybnMgb25seSBlbGVtZW50c1xuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID0gYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRlbC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlQ29tbWVudChcIlwiKSApO1xuXHRcdHJldHVybiAhZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aDtcblx0fSk7XG5cblx0Ly8gU3VwcG9ydDogSUU8OVxuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbW1hdGljYWxseS1zZXQgbmFtZXMsXG5cdC8vIHNvIHVzZSBhIHJvdW5kYWJvdXQgZ2V0RWxlbWVudHNCeU5hbWUgdGVzdFxuXHRzdXBwb3J0LmdldEJ5SWQgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGVsICkuaWQgPSBleHBhbmRvO1xuXHRcdHJldHVybiAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBJRCBmaWx0ZXIgYW5kIGZpbmRcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maWx0ZXJbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcdEV4cHIuZmluZFtcIklEXCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0dmFyIGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXHRcdFx0XHRyZXR1cm4gZWxlbSA/IFsgZWxlbSBdIDogW107XG5cdFx0XHR9XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gIGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiZcblx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0cmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgNiAtIDcgb25seVxuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRFeHByLmZpbmRbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCwgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRcdHZhciBub2RlLCBpLCBlbGVtcyxcblx0XHRcdFx0XHRlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0gKSB7XG5cblx0XHRcdFx0XHQvLyBWZXJpZnkgdGhlIGlkIGF0dHJpYnV0ZVxuXHRcdFx0XHRcdG5vZGUgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0XHRpZiAoIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gaWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gWyBlbGVtIF07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRmFsbCBiYWNrIG9uIGdldEVsZW1lbnRzQnlOYW1lXG5cdFx0XHRcdFx0ZWxlbXMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlOYW1lKCBpZCApO1xuXHRcdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtc1tpKytdKSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0XHRcdGlmICggbm9kZSAmJiBub2RlLnZhbHVlID09PSBpZCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFsgZWxlbSBdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0Ly8gVGFnXG5cdEV4cHIuZmluZFtcIlRBR1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgP1xuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgZG9uJ3QgaGF2ZSBnRUJUTlxuXHRcdFx0fSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyApO1xuXHRcdFx0fVxuXHRcdH0gOlxuXG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHR0bXAgPSBbXSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdC8vIEJ5IGhhcHB5IGNvaW5jaWRlbmNlLCBhIChicm9rZW4pIGdFQlROIGFwcGVhcnMgb24gRG9jdW1lbnRGcmFnbWVudCBub2RlcyB0b29cblx0XHRcdFx0cmVzdWx0cyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzXG5cdFx0XHRpZiAoIHRhZyA9PT0gXCIqXCIgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdHRtcC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRtcDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH07XG5cblx0Ly8gQ2xhc3Ncblx0RXhwci5maW5kW1wiQ0xBU1NcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgZnVuY3Rpb24oIGNsYXNzTmFtZSwgY29udGV4dCApIHtcblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBjbGFzc05hbWUgKTtcblx0XHR9XG5cdH07XG5cblx0LyogUVNBL21hdGNoZXNTZWxlY3RvclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gUVNBIGFuZCBtYXRjaGVzU2VsZWN0b3Igc3VwcG9ydFxuXG5cdC8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpXG5cdHJidWdneU1hdGNoZXMgPSBbXTtcblxuXHQvLyBxU2EoOmZvY3VzKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoQ2hyb21lIDIxKVxuXHQvLyBXZSBhbGxvdyB0aGlzIGJlY2F1c2Ugb2YgYSBidWcgaW4gSUU4LzkgdGhhdCB0aHJvd3MgYW4gZXJyb3Jcblx0Ly8gd2hlbmV2ZXIgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIGlzIGFjY2Vzc2VkIG9uIGFuIGlmcmFtZVxuXHQvLyBTbywgd2UgYWxsb3cgOmZvY3VzIHRvIHBhc3MgdGhyb3VnaCBRU0EgYWxsIHRoZSB0aW1lIHRvIGF2b2lkIHRoZSBJRSBlcnJvclxuXHQvLyBTZWUgaHR0cHM6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzc4XG5cdHJidWdneVFTQSA9IFtdO1xuXG5cdGlmICggKHN1cHBvcnQucXNhID0gcm5hdGl2ZS50ZXN0KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsICkpICkge1xuXHRcdC8vIEJ1aWxkIFFTQSByZWdleFxuXHRcdC8vIFJlZ2V4IHN0cmF0ZWd5IGFkb3B0ZWQgZnJvbSBEaWVnbyBQZXJpbmlcblx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTlcblx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGVsICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxyXFxcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9oaDQ2NTM4OC5hc3B4I2F0dHJpYnV0ZV9zZWN0aW9uXG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKig/OnZhbHVlfFwiICsgYm9vbGVhbnMgKyBcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWU8MjksIEFuZHJvaWQ8NC40LCBTYWZhcmk8Ny4wKywgaU9TPDcuMCssIFBoYW50b21KUzwxLjkuOCtcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiOmNoZWNrZWRcIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4KywgaU9TIDgrXG5cdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2ODUxXG5cdFx0XHQvLyBJbi1wYWdlIGBzZWxlY3RvciNpZCBzaWJsaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcImEjXCIgKyBleHBhbmRvICsgXCIrKlwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIi4jLitbK35dXCIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRcdGVsLmlubmVySFRNTCA9IFwiPGEgaHJlZj0nJyBkaXNhYmxlZD0nZGlzYWJsZWQnPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PlwiO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBXaW5kb3dzIDggTmF0aXZlIEFwcHNcblx0XHRcdC8vIFRoZSB0eXBlIGFuZCBuYW1lIGF0dHJpYnV0ZXMgYXJlIHJlc3RyaWN0ZWQgZHVyaW5nIC5pbm5lckhUTUwgYXNzaWdubWVudFxuXHRcdFx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJoaWRkZW5cIiApO1xuXHRcdFx0ZWwuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwibmFtZVwiICsgd2hpdGVzcGFjZSArIFwiKlsqXiR8IX5dPz1cIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGRiAzLjUgLSA6ZW5hYmxlZC86ZGlzYWJsZWQgYW5kIGhpZGRlbiBlbGVtZW50cyAoaGlkZGVuIGVsZW1lbnRzIGFyZSBzdGlsbCBlbmFibGVkKVxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCAhPT0gMiApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdFx0XHQvLyBJRSdzIDpkaXNhYmxlZCBzZWxlY3RvciBkb2VzIG5vdCBwaWNrIHVwIHRoZSBjaGlsZHJlbiBvZiBkaXNhYmxlZCBmaWVsZHNldHNcblx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGVsICkuZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiOmRpc2FibGVkXCIpLmxlbmd0aCAhPT0gMiApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0ZWwucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIik7XG5cdFx0XHRyYnVnZ3lRU0EucHVzaChcIiwuKjpcIik7XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLm1hdGNoZXMgfHxcblx0XHRkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7XG5cblx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIGl0J3MgcG9zc2libGUgdG8gZG8gbWF0Y2hlc1NlbGVjdG9yXG5cdFx0XHQvLyBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIChJRSA5KVxuXHRcdFx0c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZWwsIFwiKlwiICk7XG5cblx0XHRcdC8vIFRoaXMgc2hvdWxkIGZhaWwgd2l0aCBhbiBleGNlcHRpb25cblx0XHRcdC8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWRcblx0XHRcdG1hdGNoZXMuY2FsbCggZWwsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG5cdFx0fSk7XG5cdH1cblxuXHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKFwifFwiKSApO1xuXHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXG5cdC8qIENvbnRhaW5zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0aGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApO1xuXG5cdC8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlclxuXHQvLyBQdXJwb3NlZnVsbHkgc2VsZi1leGNsdXNpdmVcblx0Ly8gQXMgaW4sIGFuIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiBpdHNlbGZcblx0Y29udGFpbnMgPSBoYXNDb21wYXJlIHx8IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb250YWlucyApID9cblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdHZhciBhZG93biA9IGEubm9kZVR5cGUgPT09IDkgPyBhLmRvY3VtZW50RWxlbWVudCA6IGEsXG5cdFx0XHRcdGJ1cCA9IGIgJiYgYi5wYXJlbnROb2RlO1xuXHRcdFx0cmV0dXJuIGEgPT09IGJ1cCB8fCAhISggYnVwICYmIGJ1cC5ub2RlVHlwZSA9PT0gMSAmJiAoXG5cdFx0XHRcdGFkb3duLmNvbnRhaW5zID9cblx0XHRcdFx0XHRhZG93bi5jb250YWlucyggYnVwICkgOlxuXHRcdFx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gJiYgYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYnVwICkgJiAxNlxuXHRcdFx0KSk7XG5cdFx0fSA6XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHRpZiAoIGIgKSB7XG5cdFx0XHRcdHdoaWxlICggKGIgPSBiLnBhcmVudE5vZGUpICkge1xuXHRcdFx0XHRcdGlmICggYiA9PT0gYSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblx0LyogU29ydGluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gRG9jdW1lbnQgb3JkZXIgc29ydGluZ1xuXHRzb3J0T3JkZXIgPSBoYXNDb21wYXJlID9cblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cblx0XHQvLyBGbGFnIGZvciBkdXBsaWNhdGUgcmVtb3ZhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHQvLyBTb3J0IG9uIG1ldGhvZCBleGlzdGVuY2UgaWYgb25seSBvbmUgaW5wdXQgaGFzIGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uXG5cdFx0dmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO1xuXHRcdGlmICggY29tcGFyZSApIHtcblx0XHRcdHJldHVybiBjb21wYXJlO1xuXHRcdH1cblxuXHRcdC8vIENhbGN1bGF0ZSBwb3NpdGlvbiBpZiBib3RoIGlucHV0cyBiZWxvbmcgdG8gdGhlIHNhbWUgZG9jdW1lbnRcblx0XHRjb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgP1xuXHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYiApIDpcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHdlIGtub3cgdGhleSBhcmUgZGlzY29ubmVjdGVkXG5cdFx0XHQxO1xuXG5cdFx0Ly8gRGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0aWYgKCBjb21wYXJlICYgMSB8fFxuXHRcdFx0KCFzdXBwb3J0LnNvcnREZXRhY2hlZCAmJiBiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBhICkgPT09IGNvbXBhcmUpICkge1xuXG5cdFx0XHQvLyBDaG9vc2UgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBpcyByZWxhdGVkIHRvIG91ciBwcmVmZXJyZWQgZG9jdW1lbnRcblx0XHRcdGlmICggYSA9PT0gZG9jdW1lbnQgfHwgYS5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBhKSApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBiID09PSBkb2N1bWVudCB8fCBiLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGIpICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHR9IDpcblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0Ly8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdXAgPSBhLnBhcmVudE5vZGUsXG5cdFx0XHRidXAgPSBiLnBhcmVudE5vZGUsXG5cdFx0XHRhcCA9IFsgYSBdLFxuXHRcdFx0YnAgPSBbIGIgXTtcblxuXHRcdC8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkXG5cdFx0aWYgKCAhYXVwIHx8ICFidXAgKSB7XG5cdFx0XHRyZXR1cm4gYSA9PT0gZG9jdW1lbnQgPyAtMSA6XG5cdFx0XHRcdGIgPT09IGRvY3VtZW50ID8gMSA6XG5cdFx0XHRcdGF1cCA/IC0xIDpcblx0XHRcdFx0YnVwID8gMSA6XG5cdFx0XHRcdHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblxuXHRcdC8vIElmIHRoZSBub2RlcyBhcmUgc2libGluZ3MsIHdlIGNhbiBkbyBhIHF1aWNrIGNoZWNrXG5cdFx0fSBlbHNlIGlmICggYXVwID09PSBidXAgKSB7XG5cdFx0XHRyZXR1cm4gc2libGluZ0NoZWNrKCBhLCBiICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlIHdlIG5lZWQgZnVsbCBsaXN0cyBvZiB0aGVpciBhbmNlc3RvcnMgZm9yIGNvbXBhcmlzb25cblx0XHRjdXIgPSBhO1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcblx0XHRcdGFwLnVuc2hpZnQoIGN1ciApO1xuXHRcdH1cblx0XHRjdXIgPSBiO1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcblx0XHRcdGJwLnVuc2hpZnQoIGN1ciApO1xuXHRcdH1cblxuXHRcdC8vIFdhbGsgZG93biB0aGUgdHJlZSBsb29raW5nIGZvciBhIGRpc2NyZXBhbmN5XG5cdFx0d2hpbGUgKCBhcFtpXSA9PT0gYnBbaV0gKSB7XG5cdFx0XHRpKys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGkgP1xuXHRcdFx0Ly8gRG8gYSBzaWJsaW5nIGNoZWNrIGlmIHRoZSBub2RlcyBoYXZlIGEgY29tbW9uIGFuY2VzdG9yXG5cdFx0XHRzaWJsaW5nQ2hlY2soIGFwW2ldLCBicFtpXSApIDpcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIG5vZGVzIGluIG91ciBkb2N1bWVudCBzb3J0IGZpcnN0XG5cdFx0XHRhcFtpXSA9PT0gcHJlZmVycmVkRG9jID8gLTEgOlxuXHRcdFx0YnBbaV0gPT09IHByZWZlcnJlZERvYyA/IDEgOlxuXHRcdFx0MDtcblx0fTtcblxuXHRyZXR1cm4gZG9jdW1lbnQ7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcblx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0Ly8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG5cdGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0IWNvbXBpbGVyQ2FjaGVbIGV4cHIgKyBcIiBcIiBdICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIGZyYWdtZW50IGluIElFIDlcblx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cdH1cblxuXHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xufTtcblxuU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVzY2FwZSA9IGZ1bmN0aW9uKCBzZWwgKSB7XG5cdHJldHVybiAoc2VsICsgXCJcIikucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7XG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0Ly8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1Mylcblx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0bWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0MiB3aGF0IChjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0NSBzaWduIG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQ4IHkgb2YgeS1jb21wb25lbnRcblx0XHRcdCovXG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0bWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcblx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cblx0XHRcdGlmICggbWF0Y2hFeHByW1wiQ0hJTERcIl0udGVzdCggbWF0Y2hbMF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRtYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCI7XG5cblx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiZcblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHQvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIiApO1xuXHRcdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRmYWxzZTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBub2RlSW5kZXgsIHN0YXJ0LFxuXHRcdFx0XHRcdFx0ZGlyID0gc2ltcGxlICE9PSBmb3J3YXJkID8gXCJuZXh0U2libGluZ1wiIDogXCJwcmV2aW91c1NpYmxpbmdcIixcblx0XHRcdFx0XHRcdHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSxcblx0XHRcdFx0XHRcdG5hbWUgPSBvZlR5cGUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0dXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGUsXG5cdFx0XHRcdFx0XHRkaWZmID0gZmFsc2U7XG5cblx0XHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHRcdFx0aWYgKCBzaW1wbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggZGlyICkge1xuXHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSBub2RlWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cblx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4XG5cblx0XHRcdFx0XHRcdFx0Ly8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheVxuXHRcdFx0XHRcdFx0XHRub2RlID0gcGFyZW50O1xuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdGNhY2hlID0gdW5pcXVlQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4ICYmIGNhY2hlWyAyIF07XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdO1xuXG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBzZWVraW5nIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgcHJldmlvdXNseS1jYWNoZWQgZWxlbWVudCBpbmRleCBpZiBhdmFpbGFibGVcblx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRcdG5vZGVJbmRleCA9IGNhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbIDEgXTtcblx0XHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4O1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8geG1sIDpudGgtY2hpbGQoLi4uKVxuXHRcdFx0XHRcdFx0XHQvLyBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pXG5cdFx0XHRcdFx0XHRcdGlmICggZGlmZiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVUeXBlID09PSAxICkgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0KytkaWZmICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENhY2hlIHRoZSBpbmRleCBvZiBlYWNoIGVuY291bnRlcmVkIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSW5jb3Jwb3JhdGUgdGhlIG9mZnNldCwgdGhlbiBjaGVjayBhZ2FpbnN0IGN5Y2xlIHNpemVcblx0XHRcdFx0XHRcdGRpZmYgLT0gbGFzdDtcblx0XHRcdFx0XHRcdHJldHVybiBkaWZmID09PSBmaXJzdCB8fCAoIGRpZmYgJSBmaXJzdCA9PT0gMCAmJiBkaWZmIC8gZmlyc3QgPj0gMCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIHBzZXVkbywgYXJndW1lbnQgKSB7XG5cdFx0XHQvLyBwc2V1ZG8tY2xhc3MgbmFtZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmVcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jcHNldWRvLWNsYXNzZXNcblx0XHRcdC8vIFByaW9yaXRpemUgYnkgY2FzZSBzZW5zaXRpdml0eSBpbiBjYXNlIGN1c3RvbSBwc2V1ZG9zIGFyZSBhZGRlZCB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzXG5cdFx0XHQvLyBSZW1lbWJlciB0aGF0IHNldEZpbHRlcnMgaW5oZXJpdHMgZnJvbSBwc2V1ZG9zXG5cdFx0XHR2YXIgYXJncyxcblx0XHRcdFx0Zm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiICsgcHNldWRvICk7XG5cblx0XHRcdC8vIFRoZSB1c2VyIG1heSB1c2UgY3JlYXRlUHNldWRvIHRvIGluZGljYXRlIHRoYXRcblx0XHRcdC8vIGFyZ3VtZW50cyBhcmUgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgZmlsdGVyIGZ1bmN0aW9uXG5cdFx0XHQvLyBqdXN0IGFzIFNpenpsZSBkb2VzXG5cdFx0XHRpZiAoIGZuWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHJldHVybiBmbiggYXJndW1lbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQnV0IG1haW50YWluIHN1cHBvcnQgZm9yIG9sZCBzaWduYXR1cmVzXG5cdFx0XHRpZiAoIGZuLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHRcdGFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCBcIlwiLCBhcmd1bWVudCBdO1xuXHRcdFx0XHRyZXR1cm4gRXhwci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KCBwc2V1ZG8udG9Mb3dlckNhc2UoKSApID9cblx0XHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7XG5cdFx0XHRcdFx0XHR2YXIgaWR4LFxuXHRcdFx0XHRcdFx0XHRtYXRjaGVkID0gZm4oIHNlZWQsIGFyZ3VtZW50ICksXG5cdFx0XHRcdFx0XHRcdGkgPSBtYXRjaGVkLmxlbmd0aDtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZHggPSBpbmRleE9mKCBzZWVkLCBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHRcdHNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZuKCBlbGVtLCAwLCBhcmdzICk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZuO1xuXHRcdH1cblx0fSxcblxuXHRwc2V1ZG9zOiB7XG5cdFx0Ly8gUG90ZW50aWFsbHkgY29tcGxleCBwc2V1ZG9zXG5cdFx0XCJub3RcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdC8vIFRyaW0gdGhlIHNlbGVjdG9yIHBhc3NlZCB0byBjb21waWxlXG5cdFx0XHQvLyB0byBhdm9pZCB0cmVhdGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZ1xuXHRcdFx0Ly8gc3BhY2VzIGFzIGNvbWJpbmF0b3JzXG5cdFx0XHR2YXIgaW5wdXQgPSBbXSxcblx0XHRcdFx0cmVzdWx0cyA9IFtdLFxuXHRcdFx0XHRtYXRjaGVyID0gY29tcGlsZSggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApICk7XG5cblx0XHRcdHJldHVybiBtYXRjaGVyWyBleHBhbmRvIF0gP1xuXHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0XHRcdHVubWF0Y2hlZCA9IG1hdGNoZXIoIHNlZWQsIG51bGwsIHhtbCwgW10gKSxcblx0XHRcdFx0XHRcdGkgPSBzZWVkLmxlbmd0aDtcblxuXHRcdFx0XHRcdC8vIE1hdGNoIGVsZW1lbnRzIHVubWF0Y2hlZCBieSBgbWF0Y2hlcmBcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRzZWVkW2ldID0gIShtYXRjaGVzW2ldID0gZWxlbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBlbGVtO1xuXHRcdFx0XHRcdG1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTtcblx0XHRcdFx0XHQvLyBEb24ndCBrZWVwIHRoZSBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0XHRcdGlucHV0WzBdID0gbnVsbDtcblx0XHRcdFx0XHRyZXR1cm4gIXJlc3VsdHMucG9wKCk7XG5cdFx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImhhc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJjb250YWluc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGVsZW0uaW5uZXJUZXh0IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdC8vIFwiV2hldGhlciBhbiBlbGVtZW50IGlzIHJlcHJlc2VudGVkIGJ5IGEgOmxhbmcoKSBzZWxlY3RvclxuXHRcdC8vIGlzIGJhc2VkIHNvbGVseSBvbiB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlXG5cdFx0Ly8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQyxcblx0XHQvLyBvciBiZWdpbm5pbmcgd2l0aCB0aGUgaWRlbnRpZmllciBDIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IFwiLVwiLlxuXHRcdC8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LlxuXHRcdC8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuXCJcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2xhbmctcHNldWRvXG5cdFx0XCJsYW5nXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7XG5cdFx0XHQvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXG5cdFx0XHRpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgXCJcIikgKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIiArIGxhbmcgKTtcblx0XHRcdH1cblx0XHRcdGxhbmcgPSBsYW5nLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIGVsZW1MYW5nO1xuXHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0aWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRcdFx0XHRlbGVtLmxhbmcgOlxuXHRcdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKSB8fCBlbGVtLmdldEF0dHJpYnV0ZShcImxhbmdcIikpICkge1xuXG5cdFx0XHRcdFx0XHRlbGVtTGFuZyA9IGVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArIFwiLVwiICkgPT09IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IHdoaWxlICggKGVsZW0gPSBlbGVtLnBhcmVudE5vZGUpICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdC8vIE1pc2NlbGxhbmVvdXNcblx0XHRcInRhcmdldFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuXHRcdFx0cmV0dXJuIGhhc2ggJiYgaGFzaC5zbGljZSggMSApID09PSBlbGVtLmlkO1xuXHRcdH0sXG5cblx0XHRcInJvb3RcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jRWxlbTtcblx0XHR9LFxuXG5cdFx0XCJmb2N1c1wiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7XG5cdFx0fSxcblxuXHRcdC8vIEJvb2xlYW4gcHJvcGVydGllc1xuXHRcdFwiZW5hYmxlZFwiOiBjcmVhdGVEaXNhYmxlZFBzZXVkbyggZmFsc2UgKSxcblx0XHRcImRpc2FibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCB0cnVlICksXG5cblx0XHRcImNoZWNrZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gKG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gXCJvcHRpb25cIiAmJiAhIWVsZW0uc2VsZWN0ZWQpO1xuXHRcdH0sXG5cblx0XHRcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gQWNjZXNzaW5nIHRoaXMgcHJvcGVydHkgbWFrZXMgc2VsZWN0ZWQtYnktZGVmYXVsdFxuXHRcdFx0Ly8gb3B0aW9ucyBpbiBTYWZhcmkgd29yayBwcm9wZXJseVxuXHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZWxlbS5zZWxlY3RlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0Ly8gQ29udGVudHNcblx0XHRcImVtcHR5XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG9cblx0XHRcdC8vIDplbXB0eSBpcyBuZWdhdGVkIGJ5IGVsZW1lbnQgKDEpIG9yIGNvbnRlbnQgbm9kZXMgKHRleHQ6IDM7IGNkYXRhOiA0OyBlbnRpdHkgcmVmOiA1KSxcblx0XHRcdC8vICAgYnV0IG5vdCBieSBvdGhlcnMgKGNvbW1lbnQ6IDg7IHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb246IDc7IGV0Yy4pXG5cdFx0XHQvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cblx0XHRcInBhcmVudFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAhRXhwci5wc2V1ZG9zW1wiZW1wdHlcIl0oIGVsZW0gKTtcblx0XHR9LFxuXG5cdFx0Ly8gRWxlbWVudC9pbnB1dCB0eXBlc1xuXHRcdFwiaGVhZGVyXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdH0sXG5cblx0XHRcImlucHV0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHJpbnB1dHMudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdH0sXG5cblx0XHRcImJ1dHRvblwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IFwiYnV0dG9uXCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIjtcblx0XHR9LFxuXG5cdFx0XCJ0ZXh0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGF0dHI7XG5cdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgJiZcblx0XHRcdFx0ZWxlbS50eXBlID09PSBcInRleHRcIiAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFPDhcblx0XHRcdFx0Ly8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sIFwic2VhcmNoXCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCJcblx0XHRcdFx0KCAoYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkgPT0gbnVsbCB8fCBhdHRyLnRvTG93ZXJDYXNlKCkgPT09IFwidGV4dFwiICk7XG5cdFx0fSxcblxuXHRcdC8vIFBvc2l0aW9uLWluLWNvbGxlY3Rpb25cblx0XHRcImZpcnN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gWyAwIF07XG5cdFx0fSksXG5cblx0XHRcImxhc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gWyBsZW5ndGggLSAxIF07XG5cdFx0fSksXG5cblx0XHRcImVxXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTtcblx0XHR9KSxcblxuXHRcdFwiZXZlblwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwib2RkXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAxO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJsdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7IC0taSA+PSAwOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImd0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgKytpIDwgbGVuZ3RoOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSlcblx0fVxufTtcblxuRXhwci5wc2V1ZG9zW1wibnRoXCJdID0gRXhwci5wc2V1ZG9zW1wiZXFcIl07XG5cbi8vIEFkZCBidXR0b24vaW5wdXQgdHlwZSBwc2V1ZG9zXG5mb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApO1xufVxuZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTtcbn1cblxuLy8gRWFzeSBBUEkgZm9yIGNyZWF0aW5nIG5ldyBzZXRGaWx0ZXJzXG5mdW5jdGlvbiBzZXRGaWx0ZXJzKCkge31cbnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuRXhwci5zZXRGaWx0ZXJzID0gbmV3IHNldEZpbHRlcnMoKTtcblxudG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHtcblx0dmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsXG5cdFx0c29GYXIsIGdyb3VwcywgcHJlRmlsdGVycyxcblx0XHRjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cblx0aWYgKCBjYWNoZWQgKSB7XG5cdFx0cmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTtcblx0fVxuXG5cdHNvRmFyID0gc2VsZWN0b3I7XG5cdGdyb3VwcyA9IFtdO1xuXHRwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7XG5cblx0d2hpbGUgKCBzb0ZhciApIHtcblxuXHRcdC8vIENvbW1hIGFuZCBmaXJzdCBydW5cblx0XHRpZiAoICFtYXRjaGVkIHx8IChtYXRjaCA9IHJjb21tYS5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdGlmICggbWF0Y2ggKSB7XG5cdFx0XHRcdC8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkXG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoWzBdLmxlbmd0aCApIHx8IHNvRmFyO1xuXHRcdFx0fVxuXHRcdFx0Z3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTtcblx0XHR9XG5cblx0XHRtYXRjaGVkID0gZmFsc2U7XG5cblx0XHQvLyBDb21iaW5hdG9yc1xuXHRcdGlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHQvLyBDYXN0IGRlc2NlbmRhbnQgY29tYmluYXRvcnMgdG8gc3BhY2Vcblx0XHRcdFx0dHlwZTogbWF0Y2hbMF0ucmVwbGFjZSggcnRyaW0sIFwiIFwiIClcblx0XHRcdH0pO1xuXHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGaWx0ZXJzXG5cdFx0Zm9yICggdHlwZSBpbiBFeHByLmZpbHRlciApIHtcblx0XHRcdGlmICggKG1hdGNoID0gbWF0Y2hFeHByWyB0eXBlIF0uZXhlYyggc29GYXIgKSkgJiYgKCFwcmVGaWx0ZXJzWyB0eXBlIF0gfHxcblx0XHRcdFx0KG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7XG5cdFx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRtYXRjaGVzOiBtYXRjaFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoICFtYXRjaGVkICkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGludmFsaWQgZXhjZXNzXG5cdC8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZ1xuXHQvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yIG9yIHJldHVybiB0b2tlbnNcblx0cmV0dXJuIHBhcnNlT25seSA/XG5cdFx0c29GYXIubGVuZ3RoIDpcblx0XHRzb0ZhciA/XG5cdFx0XHRTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOlxuXHRcdFx0Ly8gQ2FjaGUgdGhlIHRva2Vuc1xuXHRcdFx0dG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7XG59O1xuXG5mdW5jdGlvbiB0b1NlbGVjdG9yKCB0b2tlbnMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdHNlbGVjdG9yID0gXCJcIjtcblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0c2VsZWN0b3IgKz0gdG9rZW5zW2ldLnZhbHVlO1xuXHR9XG5cdHJldHVybiBzZWxlY3Rvcjtcbn1cblxuZnVuY3Rpb24gYWRkQ29tYmluYXRvciggbWF0Y2hlciwgY29tYmluYXRvciwgYmFzZSApIHtcblx0dmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLFxuXHRcdHNraXAgPSBjb21iaW5hdG9yLm5leHQsXG5cdFx0a2V5ID0gc2tpcCB8fCBkaXIsXG5cdFx0Y2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYga2V5ID09PSBcInBhcmVudE5vZGVcIixcblx0XHRkb25lTmFtZSA9IGRvbmUrKztcblxuXHRyZXR1cm4gY29tYmluYXRvci5maXJzdCA/XG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gOlxuXG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBhbGwgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRzXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsXG5cdFx0XHRcdG5ld0NhY2hlID0gWyBkaXJydW5zLCBkb25lTmFtZSBdO1xuXG5cdFx0XHQvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdIHx8IChvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdGlmICggc2tpcCAmJiBza2lwID09PSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW0gPSBlbGVtWyBkaXIgXSB8fCBlbGVtO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICggKG9sZENhY2hlID0gdW5pcXVlQ2FjaGVbIGtleSBdKSAmJlxuXHRcdFx0XHRcdFx0XHRvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsga2V5IF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ID09PSBkb2N1bWVudCB8fCBjb250ZXh0IHx8IG91dGVybW9zdDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHNcblx0XHRcdC8vIFN1cHBvcnQ6IElFPDksIFNhZmFyaVxuXHRcdFx0Ly8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6IFwibGVuZ3RoXCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkXG5cdFx0XHRmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggYnlFbGVtZW50ICYmIGVsZW0gKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0aWYgKCAhY29udGV4dCAmJiBlbGVtLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0XHRcdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0XHRcdFx0XHRcdHhtbCA9ICFkb2N1bWVudElzSFRNTDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCB8fCBkb2N1bWVudCwgeG1sKSApIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnNcblx0XHRcdFx0aWYgKCBieVNldCApIHtcblx0XHRcdFx0XHQvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzXG5cdFx0XHRcdFx0aWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlZENvdW50LS07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTGVuZ3RoZW4gdGhlIGFycmF5IGZvciBldmVyeSBlbGVtZW50LCBtYXRjaGVkIG9yIG5vdFxuXHRcdFx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0XHRcdHVubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIGBpYCBpcyBub3cgdGhlIGNvdW50IG9mIGVsZW1lbnRzIHZpc2l0ZWQgYWJvdmUsIGFuZCBhZGRpbmcgaXQgdG8gYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIG1ha2VzIHRoZSBsYXR0ZXIgbm9ubmVnYXRpdmUuXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBOT1RFOiBUaGlzIGNhbiBiZSBza2lwcGVkIGlmIHRoZXJlIGFyZSBubyB1bm1hdGNoZWQgZWxlbWVudHMgKGkuZS4sIGBtYXRjaGVkQ291bnRgXG5cdFx0XHQvLyBlcXVhbHMgYGlgKSwgdW5sZXNzIHdlIGRpZG4ndCB2aXNpdCBfYW55XyBlbGVtZW50cyBpbiB0aGUgYWJvdmUgbG9vcCBiZWNhdXNlIHdlIGhhdmVcblx0XHRcdC8vIG5vIGVsZW1lbnQgbWF0Y2hlcnMgYW5kIG5vIHNlZWQuXG5cdFx0XHQvLyBJbmNyZW1lbnRpbmcgYW4gaW5pdGlhbGx5LXN0cmluZyBcIjBcIiBgaWAgYWxsb3dzIGBpYCB0byByZW1haW4gYSBzdHJpbmcgb25seSBpbiB0aGF0XG5cdFx0XHQvLyBjYXNlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIFwiMDBcIiBgbWF0Y2hlZENvdW50YCB0aGF0IGRpZmZlcnMgZnJvbSBgaWAgYnV0IGlzIGFsc29cblx0XHRcdC8vIG51bWVyaWNhbGx5IHplcm8uXG5cdFx0XHRpZiAoIGJ5U2V0ICYmIGkgIT09IG1hdGNoZWRDb3VudCApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdC8vIFJlaW50ZWdyYXRlIGVsZW1lbnQgbWF0Y2hlcyB0byBlbGltaW5hdGUgdGhlIG5lZWQgZm9yIHNvcnRpbmdcblx0XHRcdFx0XHRpZiAoIG1hdGNoZWRDb3VudCA+IDAgKSB7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCAhKHVubWF0Y2hlZFtpXSB8fCBzZXRNYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0XHRzZXRNYXRjaGVkW2ldID0gcG9wLmNhbGwoIHJlc3VsdHMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzXG5cdFx0XHRcdFx0c2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzXG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNldE1hdGNoZWQgKTtcblxuXHRcdFx0XHQvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmdcblx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmXG5cdFx0XHRcdFx0KCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7XG5cblx0XHRcdFx0XHRTaXp6bGUudW5pcXVlU29ydCggcmVzdWx0cyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVyc1xuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHVubWF0Y2hlZDtcblx0XHR9O1xuXG5cdHJldHVybiBieVNldCA/XG5cdFx0bWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6XG5cdFx0c3VwZXJNYXRjaGVyO1xufVxuXG5jb21waWxlID0gU2l6emxlLmNvbXBpbGUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIG1hdGNoIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkge1xuXHR2YXIgaSxcblx0XHRzZXRNYXRjaGVycyA9IFtdLFxuXHRcdGVsZW1lbnRNYXRjaGVycyA9IFtdLFxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoICFjYWNoZWQgKSB7XG5cdFx0Ly8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50XG5cdFx0aWYgKCAhbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaCA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdH1cblx0XHRpID0gbWF0Y2gubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0Y2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoW2ldICk7XG5cdFx0XHRpZiAoIGNhY2hlZFsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRzZXRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWNoZSB0aGUgY29tcGlsZWQgZnVuY3Rpb25cblx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlKCBzZWxlY3RvciwgbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgKTtcblxuXHRcdC8vIFNhdmUgc2VsZWN0b3IgYW5kIHRva2VuaXphdGlvblxuXHRcdGNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHR9XG5cdHJldHVybiBjYWNoZWQ7XG59O1xuXG4vKipcbiAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkXG4gKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0XG4gKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c11cbiAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0XG4gKi9cbnNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLFxuXHRcdGNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgc2VsZWN0b3IsXG5cdFx0bWF0Y2ggPSAhc2VlZCAmJiB0b2tlbml6ZSggKHNlbGVjdG9yID0gY29tcGlsZWQuc2VsZWN0b3IgfHwgc2VsZWN0b3IpICk7XG5cblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cblx0Ly8gVHJ5IHRvIG1pbmltaXplIG9wZXJhdGlvbnMgaWYgdGhlcmUgaXMgb25seSBvbmUgc2VsZWN0b3IgaW4gdGhlIGxpc3QgYW5kIG5vIHNlZWRcblx0Ly8gKHRoZSBsYXR0ZXIgb2Ygd2hpY2ggZ3VhcmFudGVlcyB1cyBjb250ZXh0KVxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFJlZHVjZSBjb250ZXh0IGlmIHRoZSBsZWFkaW5nIGNvbXBvdW5kIHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0Y29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJiBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkge1xuXG5cdFx0XHRjb250ZXh0ID0gKCBFeHByLmZpbmRbXCJJRFwiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07XG5cdFx0XHRpZiAoICFjb250ZXh0ICkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0Ly8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuXHRcdFx0fSBlbHNlIGlmICggY29tcGlsZWQgKSB7XG5cdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcblx0XHRpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRva2VuID0gdG9rZW5zW2ldO1xuXG5cdFx0XHQvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yXG5cdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuXHRcdFx0XHQvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnNcblx0XHRcdFx0aWYgKCAoc2VlZCA9IGZpbmQoXG5cdFx0XHRcdFx0dG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuXHRcdFx0XHRcdHJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0XHRcdFx0KSkgKSB7XG5cblx0XHRcdFx0XHQvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcblx0XHRcdFx0XHR0b2tlbnMuc3BsaWNlKCBpLCAxICk7XG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcblx0XHRcdFx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG5cdC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcblx0KCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKFxuXHRcdHNlZWQsXG5cdFx0Y29udGV4dCxcblx0XHQhZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmVzdWx0cyxcblx0XHQhY29udGV4dCB8fCByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdCk7XG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gT25lLXRpbWUgYXNzaWdubWVudHNcblxuLy8gU29ydCBzdGFiaWxpdHlcbnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lIDE0LTM1K1xuLy8gQWx3YXlzIGFzc3VtZSBkdXBsaWNhdGVzIGlmIHRoZXkgYXJlbid0IHBhc3NlZCB0byB0aGUgY29tcGFyaXNvbiBmdW5jdGlvblxuc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7XG5cbi8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudFxuc2V0RG9jdW1lbnQoKTtcblxuLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNylcbi8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKlxuc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGVsLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4XG5pZiAoICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JyMnPjwvYT5cIjtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIgO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxpbnB1dC8+XCI7XG5cdGVsLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSA9PSBudWxsO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgdmFsO1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xuXHRcdH1cblx0fSk7XG59XG5cbnJldHVybiBTaXp6bGU7XG5cbn0pKCB3aW5kb3cgKTtcblxuXG5cbmpRdWVyeS5maW5kID0gU2l6emxlO1xualF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzO1xuXG4vLyBEZXByZWNhdGVkXG5qUXVlcnkuZXhwclsgXCI6XCIgXSA9IGpRdWVyeS5leHByLnBzZXVkb3M7XG5qUXVlcnkudW5pcXVlU29ydCA9IGpRdWVyeS51bmlxdWUgPSBTaXp6bGUudW5pcXVlU29ydDtcbmpRdWVyeS50ZXh0ID0gU2l6emxlLmdldFRleHQ7XG5qUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5qUXVlcnkuY29udGFpbnMgPSBTaXp6bGUuY29udGFpbnM7XG5qUXVlcnkuZXNjYXBlU2VsZWN0b3IgPSBTaXp6bGUuZXNjYXBlO1xuXG5cblxuXG52YXIgZGlyID0gZnVuY3Rpb24oIGVsZW0sIGRpciwgdW50aWwgKSB7XG5cdHZhciBtYXRjaGVkID0gW10sXG5cdFx0dHJ1bmNhdGUgPSB1bnRpbCAhPT0gdW5kZWZpbmVkO1xuXG5cdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkge1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXRjaGVkO1xufTtcblxuXG52YXIgc2libGluZ3MgPSBmdW5jdGlvbiggbiwgZWxlbSApIHtcblx0dmFyIG1hdGNoZWQgPSBbXTtcblxuXHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdGlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkge1xuXHRcdFx0bWF0Y2hlZC5wdXNoKCBuICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG5cblxuZnVuY3Rpb24gbm9kZU5hbWUoIGVsZW0sIG5hbWUgKSB7XG5cbiAgcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cbn07XG52YXIgcnNpbmdsZVRhZyA9ICggL148KFthLXpdW15cXC9cXDA+OlxceDIwXFx0XFxyXFxuXFxmXSopW1xceDIwXFx0XFxyXFxuXFxmXSpcXC8/Pig/OjxcXC9cXDE+fCkkL2kgKTtcblxuXG5cbi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90XG5mdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcblx0aWYgKCBpc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdHJldHVybiAhIXF1YWxpZmllci5jYWxsKCBlbGVtLCBpLCBlbGVtICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBTaW5nbGUgZWxlbWVudFxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gQXJyYXlsaWtlIG9mIGVsZW1lbnRzIChqUXVlcnksIGFyZ3VtZW50cywgQXJyYXkpXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGluZGV4T2YuY2FsbCggcXVhbGlmaWVyLCBlbGVtICkgPiAtMSApICE9PSBub3Q7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gRmlsdGVyZWQgZGlyZWN0bHkgZm9yIGJvdGggc2ltcGxlIGFuZCBjb21wbGV4IHNlbGVjdG9yc1xuXHRyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7XG59XG5cbmpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHtcblx0dmFyIGVsZW0gPSBlbGVtc1sgMCBdO1xuXG5cdGlmICggbm90ICkge1xuXHRcdGV4cHIgPSBcIjpub3QoXCIgKyBleHByICsgXCIpXCI7XG5cdH1cblxuXHRpZiAoIGVsZW1zLmxlbmd0aCA9PT0gMSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdHJldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW107XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlcyggZXhwciwgalF1ZXJ5LmdyZXAoIGVsZW1zLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMTtcblx0fSApICk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgaSwgcmV0LFxuXHRcdFx0bGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRzZWxmID0gdGhpcztcblxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggc2VsZlsgaSBdLCB0aGlzICkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gKSApO1xuXHRcdH1cblxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBbXSApO1xuXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbGVuID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCByZXQgKSA6IHJldDtcblx0fSxcblx0ZmlsdGVyOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSApICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSApICk7XG5cdH0sXG5cdGlzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuICEhd2lubm93KFxuXHRcdFx0dGhpcyxcblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIHBvc2l0aW9uYWwvcmVsYXRpdmUgc2VsZWN0b3IsIGNoZWNrIG1lbWJlcnNoaXAgaW4gdGhlIHJldHVybmVkIHNldFxuXHRcdFx0Ly8gc28gJChcInA6Zmlyc3RcIikuaXMoXCJwOmxhc3RcIikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvIFwicFwiLlxuXHRcdFx0dHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICYmIHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3IgKSA6XG5cdFx0XHRcdHNlbGVjdG9yIHx8IFtdLFxuXHRcdFx0ZmFsc2Vcblx0XHQpLmxlbmd0aDtcblx0fVxufSApO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHQvLyBTaG9ydGN1dCBzaW1wbGUgI2lkIGNhc2UgZm9yIHNwZWVkXG5cdHJxdWlja0V4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0rKSkkLyxcblxuXHRpbml0ID0galF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJvb3QgKSB7XG5cdFx0dmFyIG1hdGNoLCBlbGVtO1xuXG5cdFx0Ly8gSEFORExFOiAkKFwiXCIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpXG5cdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHQvLyBNZXRob2QgaW5pdCgpIGFjY2VwdHMgYW4gYWx0ZXJuYXRlIHJvb3RqUXVlcnlcblx0XHQvLyBzbyBtaWdyYXRlIGNhbiBzdXBwb3J0IGpRdWVyeS5zdWIgKGdoLTIxMDEpXG5cdFx0cm9vdCA9IHJvb3QgfHwgcm9vdGpRdWVyeTtcblxuXHRcdC8vIEhhbmRsZSBIVE1MIHN0cmluZ3Ncblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGlmICggc2VsZWN0b3JbIDAgXSA9PT0gXCI8XCIgJiZcblx0XHRcdFx0c2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiZcblx0XHRcdFx0c2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cblx0XHRcdFx0Ly8gQXNzdW1lIHRoYXQgc3RyaW5ncyB0aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCA8PiBhcmUgSFRNTCBhbmQgc2tpcCB0aGUgcmVnZXggY2hlY2tcblx0XHRcdFx0bWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYXRjaCBodG1sIG9yIG1ha2Ugc3VyZSBubyBjb250ZXh0IGlzIHNwZWNpZmllZCBmb3IgI2lkXG5cdFx0XHRpZiAoIG1hdGNoICYmICggbWF0Y2hbIDEgXSB8fCAhY29udGV4dCApICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWyAxIF0gKSB7XG5cdFx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZXh0WyAwIF0gOiBjb250ZXh0O1xuXG5cdFx0XHRcdFx0Ly8gT3B0aW9uIHRvIHJ1biBzY3JpcHRzIGlzIHRydWUgZm9yIGJhY2stY29tcGF0XG5cdFx0XHRcdFx0Ly8gSW50ZW50aW9uYWxseSBsZXQgdGhlIGVycm9yIGJlIHRocm93biBpZiBwYXJzZUhUTUwgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoXG5cdFx0XHRcdFx0XHRtYXRjaFsgMSBdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWyAxIF0gKSAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29udGV4dCApICkge1xuXHRcdFx0XHRcdFx0Zm9yICggbWF0Y2ggaW4gY29udGV4dCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBQcm9wZXJ0aWVzIG9mIGNvbnRleHQgYXJlIGNhbGxlZCBhcyBtZXRob2RzIGlmIHBvc3NpYmxlXG5cdFx0XHRcdFx0XHRcdGlmICggaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTtcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKCNpZClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWyAyIF0gKTtcblxuXHRcdFx0XHRcdGlmICggZWxlbSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSW5qZWN0IHRoZSBlbGVtZW50IGRpcmVjdGx5IGludG8gdGhlIGpRdWVyeSBvYmplY3Rcblx0XHRcdFx0XHRcdHRoaXNbIDAgXSA9IGVsZW07XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cblx0XHRcdC8vIEhBTkRMRTogJChleHByLCAkKC4uLikpXG5cdFx0XHR9IGVsc2UgaWYgKCAhY29udGV4dCB8fCBjb250ZXh0LmpxdWVyeSApIHtcblx0XHRcdFx0cmV0dXJuICggY29udGV4dCB8fCByb290ICkuZmluZCggc2VsZWN0b3IgKTtcblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpXG5cdFx0XHQvLyAod2hpY2ggaXMganVzdCBlcXVpdmFsZW50IHRvOiAkKGNvbnRleHQpLmZpbmQoZXhwcilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdC8vIEhBTkRMRTogJChET01FbGVtZW50KVxuXHRcdH0gZWxzZSBpZiAoIHNlbGVjdG9yLm5vZGVUeXBlICkge1xuXHRcdFx0dGhpc1sgMCBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBpc0Z1bmN0aW9uKCBzZWxlY3RvciApICkge1xuXHRcdFx0cmV0dXJuIHJvb3QucmVhZHkgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHJvb3QucmVhZHkoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIEV4ZWN1dGUgaW1tZWRpYXRlbHkgaWYgcmVhZHkgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0c2VsZWN0b3IoIGpRdWVyeSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cblx0Ly8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXRcblx0Z3VhcmFudGVlZFVuaXF1ZSA9IHtcblx0XHRjaGlsZHJlbjogdHJ1ZSxcblx0XHRjb250ZW50czogdHJ1ZSxcblx0XHRuZXh0OiB0cnVlLFxuXHRcdHByZXY6IHRydWVcblx0fTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRoYXM6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0dmFyIHRhcmdldHMgPSBqUXVlcnkoIHRhcmdldCwgdGhpcyApLFxuXHRcdFx0bCA9IHRhcmdldHMubGVuZ3RoO1xuXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbIGkgXSApICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGNsb3Nlc3Q6IGZ1bmN0aW9uKCBzZWxlY3RvcnMsIGNvbnRleHQgKSB7XG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0bWF0Y2hlZCA9IFtdLFxuXHRcdFx0dGFyZ2V0cyA9IHR5cGVvZiBzZWxlY3RvcnMgIT09IFwic3RyaW5nXCIgJiYgalF1ZXJ5KCBzZWxlY3RvcnMgKTtcblxuXHRcdC8vIFBvc2l0aW9uYWwgc2VsZWN0b3JzIG5ldmVyIG1hdGNoLCBzaW5jZSB0aGVyZSdzIG5vIF9zZWxlY3Rpb25fIGNvbnRleHRcblx0XHRpZiAoICFybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9ycyApICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmb3IgKCBjdXIgPSB0aGlzWyBpIF07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzXG5cdFx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHRhcmdldHMgP1xuXHRcdFx0XHRcdFx0dGFyZ2V0cy5pbmRleCggY3VyICkgPiAtMSA6XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdFx0Y3VyLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggY3VyLCBzZWxlY3RvcnMgKSApICkge1xuXG5cdFx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApIDogbWF0Y2hlZCApO1xuXHR9LFxuXG5cdC8vIERldGVybWluZSB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCB3aXRoaW4gdGhlIHNldFxuXHRpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBObyBhcmd1bWVudCwgcmV0dXJuIGluZGV4IGluIHBhcmVudFxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLnBhcmVudE5vZGUgKSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTE7XG5cdFx0fVxuXG5cdFx0Ly8gSW5kZXggaW4gc2VsZWN0b3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggalF1ZXJ5KCBlbGVtICksIHRoaXNbIDAgXSApO1xuXHRcdH1cblxuXHRcdC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuXHRcdHJldHVybiBpbmRleE9mLmNhbGwoIHRoaXMsXG5cblx0XHRcdC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuXHRcdFx0ZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtXG5cdFx0KTtcblx0fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soXG5cdFx0XHRqUXVlcnkudW5pcXVlU29ydChcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLmdldCgpLCBqUXVlcnkoIHNlbGVjdG9yLCBjb250ZXh0ICkgKVxuXHRcdFx0KVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXG5cdFx0KTtcblx0fVxufSApO1xuXG5mdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHtcblx0d2hpbGUgKCAoIGN1ciA9IGN1clsgZGlyIF0gKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCgge1xuXHRwYXJlbnQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0cmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDtcblx0fSxcblx0cGFyZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG5cdH0sXG5cdG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTtcblx0fSxcblx0Y2hpbGRyZW46IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5ncyggZWxlbS5maXJzdENoaWxkICk7XG5cdH0sXG5cdGNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgaWYgKCBub2RlTmFtZSggZWxlbSwgXCJpZnJhbWVcIiApICkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHksIGlPUyA3IG9ubHksIEFuZHJvaWQgQnJvd3NlciA8PTQuMyBvbmx5XG4gICAgICAgIC8vIFRyZWF0IHRoZSB0ZW1wbGF0ZSBlbGVtZW50IGFzIGEgcmVndWxhciBvbmUgaW4gYnJvd3NlcnMgdGhhdFxuICAgICAgICAvLyBkb24ndCBzdXBwb3J0IGl0LlxuICAgICAgICBpZiAoIG5vZGVOYW1lKCBlbGVtLCBcInRlbXBsYXRlXCIgKSApIHtcbiAgICAgICAgICAgIGVsZW0gPSBlbGVtLmNvbnRlbnQgfHwgZWxlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXG5cdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRlc1xuXHRcdFx0aWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkge1xuXHRcdFx0XHRqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0gKTtcbnZhciBybm90aHRtbHdoaXRlID0gKCAvW15cXHgyMFxcdFxcclxcblxcZl0rL2cgKTtcblxuXG5cbi8vIENvbnZlcnQgU3RyaW5nLWZvcm1hdHRlZCBvcHRpb25zIGludG8gT2JqZWN0LWZvcm1hdHRlZCBvbmVzXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0ge307XG5cdGpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW10sIGZ1bmN0aW9uKCBfLCBmbGFnICkge1xuXHRcdG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcblx0fSApO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSA6XG5cdFx0alF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTtcblxuXHR2YXIgLy8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZ1xuXHRcdGZpcmluZyxcblxuXHRcdC8vIExhc3QgZmlyZSB2YWx1ZSBmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzXG5cdFx0bWVtb3J5LFxuXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblxuXHRcdC8vIEZsYWcgdG8gcHJldmVudCBmaXJpbmdcblx0XHRsb2NrZWQsXG5cblx0XHQvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdFxuXHRcdGxpc3QgPSBbXSxcblxuXHRcdC8vIFF1ZXVlIG9mIGV4ZWN1dGlvbiBkYXRhIGZvciByZXBlYXRhYmxlIGxpc3RzXG5cdFx0cXVldWUgPSBbXSxcblxuXHRcdC8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IGFkZC9yZW1vdmUgYXMgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4ID0gLTEsXG5cblx0XHQvLyBGaXJlIGNhbGxiYWNrc1xuXHRcdGZpcmUgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5mb3JjZSBzaW5nbGUtZmlyaW5nXG5cdFx0XHRsb2NrZWQgPSBsb2NrZWQgfHwgb3B0aW9ucy5vbmNlO1xuXG5cdFx0XHQvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucyxcblx0XHRcdC8vIHJlc3BlY3RpbmcgZmlyaW5nSW5kZXggb3ZlcnJpZGVzIGFuZCBydW50aW1lIGNoYW5nZXNcblx0XHRcdGZpcmVkID0gZmlyaW5nID0gdHJ1ZTtcblx0XHRcdGZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkge1xuXHRcdFx0XHRtZW1vcnkgPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0XHR3aGlsZSAoICsrZmlyaW5nSW5kZXggPCBsaXN0Lmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdC8vIFJ1biBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGVhcmx5IHRlcm1pbmF0aW9uXG5cdFx0XHRcdFx0aWYgKCBsaXN0WyBmaXJpbmdJbmRleCBdLmFwcGx5KCBtZW1vcnlbIDAgXSwgbWVtb3J5WyAxIF0gKSA9PT0gZmFsc2UgJiZcblx0XHRcdFx0XHRcdG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEp1bXAgdG8gZW5kIGFuZCBmb3JnZXQgdGhlIGRhdGEgc28gLmFkZCBkb2Vzbid0IHJlLWZpcmVcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0XHRtZW1vcnkgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdFxuXHRcdFx0aWYgKCAhb3B0aW9ucy5tZW1vcnkgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRmaXJpbmcgPSBmYWxzZTtcblxuXHRcdFx0Ly8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2Rcblx0XHRcdGlmICggbG9ja2VkICkge1xuXG5cdFx0XHRcdC8vIEtlZXAgYW4gZW1wdHkgbGlzdCBpZiB3ZSBoYXZlIGRhdGEgZm9yIGZ1dHVyZSBhZGQgY2FsbHNcblx0XHRcdFx0aWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgdGhpcyBvYmplY3QgaXMgc3BlbnRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaXN0ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cblx0XHRcdC8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3Rcblx0XHRcdGFkZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgbWVtb3J5IGZyb20gYSBwYXN0IHJ1biwgd2Ugc2hvdWxkIGZpcmUgYWZ0ZXIgYWRkaW5nXG5cdFx0XHRcdFx0aWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0cXVldWUucHVzaCggbWVtb3J5ICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0KCBmdW5jdGlvbiBhZGQoIGFyZ3MgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGlzdC5wdXNoKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIHRvVHlwZSggYXJnICkgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBJbnNwZWN0IHJlY3Vyc2l2ZWx5XG5cdFx0XHRcdFx0XHRcdFx0YWRkKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdH0gKSggYXJndW1lbnRzICk7XG5cblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhIGNhbGxiYWNrIGZyb20gdGhlIGxpc3Rcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0dmFyIGluZGV4O1xuXHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0bGlzdC5zcGxpY2UoIGluZGV4LCAxICk7XG5cblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBmaXJpbmcgaW5kZXhlc1xuXHRcdFx0XHRcdFx0aWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHtcblx0XHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXgtLTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDaGVjayBpZiBhIGdpdmVuIGNhbGxiYWNrIGlzIGluIHRoZSBsaXN0LlxuXHRcdFx0Ly8gSWYgbm8gYXJndW1lbnQgaXMgZ2l2ZW4sIHJldHVybiB3aGV0aGVyIG9yIG5vdCBsaXN0IGhhcyBjYWxsYmFja3MgYXR0YWNoZWQuXG5cdFx0XHRoYXM6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0cmV0dXJuIGZuID9cblx0XHRcdFx0XHRqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDpcblx0XHRcdFx0XHRsaXN0Lmxlbmd0aCA+IDA7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBEaXNhYmxlIC5maXJlIGFuZCAuYWRkXG5cdFx0XHQvLyBBYm9ydCBhbnkgY3VycmVudC9wZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdC8vIENsZWFyIGFsbCBjYWxsYmFja3MgYW5kIHZhbHVlc1xuXHRcdFx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxvY2tlZCA9IHF1ZXVlID0gW107XG5cdFx0XHRcdGxpc3QgPSBtZW1vcnkgPSBcIlwiO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhbGlzdDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmVcblx0XHRcdC8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpXG5cdFx0XHQvLyBBYm9ydCBhbnkgcGVuZGluZyBleGVjdXRpb25zXG5cdFx0XHRsb2NrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0aWYgKCAhbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhbG9ja2VkO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2FsbCBhbGwgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGNvbnRleHQgYW5kIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZVdpdGg6IGZ1bmN0aW9uKCBjb250ZXh0LCBhcmdzICkge1xuXHRcdFx0XHRpZiAoICFsb2NrZWQgKSB7XG5cdFx0XHRcdFx0YXJncyA9IGFyZ3MgfHwgW107XG5cdFx0XHRcdFx0YXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0aWYgKCAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzXG5cdFx0XHRmaXJlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5maXJlV2l0aCggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmZ1bmN0aW9uIElkZW50aXR5KCB2ICkge1xuXHRyZXR1cm4gdjtcbn1cbmZ1bmN0aW9uIFRocm93ZXIoIGV4ICkge1xuXHR0aHJvdyBleDtcbn1cblxuZnVuY3Rpb24gYWRvcHRWYWx1ZSggdmFsdWUsIHJlc29sdmUsIHJlamVjdCwgbm9WYWx1ZSApIHtcblx0dmFyIG1ldGhvZDtcblxuXHR0cnkge1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIHByb21pc2UgYXNwZWN0IGZpcnN0IHRvIHByaXZpbGVnZSBzeW5jaHJvbm91cyBiZWhhdmlvclxuXHRcdGlmICggdmFsdWUgJiYgaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS5wcm9taXNlICkgKSApIHtcblx0XHRcdG1ldGhvZC5jYWxsKCB2YWx1ZSApLmRvbmUoIHJlc29sdmUgKS5mYWlsKCByZWplY3QgKTtcblxuXHRcdC8vIE90aGVyIHRoZW5hYmxlc1xuXHRcdH0gZWxzZSBpZiAoIHZhbHVlICYmIGlzRnVuY3Rpb24oICggbWV0aG9kID0gdmFsdWUudGhlbiApICkgKSB7XG5cdFx0XHRtZXRob2QuY2FsbCggdmFsdWUsIHJlc29sdmUsIHJlamVjdCApO1xuXG5cdFx0Ly8gT3RoZXIgbm9uLXRoZW5hYmxlc1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIENvbnRyb2wgYHJlc29sdmVgIGFyZ3VtZW50cyBieSBsZXR0aW5nIEFycmF5I3NsaWNlIGNhc3QgYm9vbGVhbiBgbm9WYWx1ZWAgdG8gaW50ZWdlcjpcblx0XHRcdC8vICogZmFsc2U6IFsgdmFsdWUgXS5zbGljZSggMCApID0+IHJlc29sdmUoIHZhbHVlIClcblx0XHRcdC8vICogdHJ1ZTogWyB2YWx1ZSBdLnNsaWNlKCAxICkgPT4gcmVzb2x2ZSgpXG5cdFx0XHRyZXNvbHZlLmFwcGx5KCB1bmRlZmluZWQsIFsgdmFsdWUgXS5zbGljZSggbm9WYWx1ZSApICk7XG5cdFx0fVxuXG5cdC8vIEZvciBQcm9taXNlcy9BKywgY29udmVydCBleGNlcHRpb25zIGludG8gcmVqZWN0aW9uc1xuXHQvLyBTaW5jZSBqUXVlcnkud2hlbiBkb2Vzbid0IHVud3JhcCB0aGVuYWJsZXMsIHdlIGNhbiBza2lwIHRoZSBleHRyYSBjaGVja3MgYXBwZWFyaW5nIGluXG5cdC8vIERlZmVycmVkI3RoZW4gdG8gY29uZGl0aW9uYWxseSBzdXBwcmVzcyByZWplY3Rpb24uXG5cdH0gY2F0Y2ggKCB2YWx1ZSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIG9ubHlcblx0XHQvLyBTdHJpY3QgbW9kZSBmdW5jdGlvbnMgaW52b2tlZCB3aXRob3V0IC5jYWxsLy5hcHBseSBnZXQgZ2xvYmFsLW9iamVjdCBjb250ZXh0XG5cdFx0cmVqZWN0LmFwcGx5KCB1bmRlZmluZWQsIFsgdmFsdWUgXSApO1xuXHR9XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHREZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7XG5cdFx0dmFyIHR1cGxlcyA9IFtcblxuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgY2FsbGJhY2tzLFxuXHRcdFx0XHQvLyAuLi4gLnRoZW4gaGFuZGxlcnMsIGFyZ3VtZW50IGluZGV4LCBbZmluYWwgc3RhdGVdXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm1lbW9yeVwiICksXG5cdFx0XHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJtZW1vcnlcIiApLCAyIF0sXG5cdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XHRcdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgMCwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAxLCBcInJlamVjdGVkXCIgXVxuXHRcdFx0XSxcblx0XHRcdHN0YXRlID0gXCJwZW5kaW5nXCIsXG5cdFx0XHRwcm9taXNlID0ge1xuXHRcdFx0XHRzdGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhbHdheXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLmRvbmUoIGFyZ3VtZW50cyApLmZhaWwoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImNhdGNoXCI6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS50aGVuKCBudWxsLCBmbiApO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0cGlwZTogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gTWFwIHR1cGxlcyAocHJvZ3Jlc3MsIGRvbmUsIGZhaWwpIHRvIGFyZ3VtZW50cyAoZG9uZSwgZmFpbCwgcHJvZ3Jlc3MpXG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGlzRnVuY3Rpb24oIGZuc1sgdHVwbGVbIDQgXSBdICkgJiYgZm5zWyB0dXBsZVsgNCBdIF07XG5cblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQucHJvZ3Jlc3MoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIubm90aWZ5IH0pXG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkLmRvbmUoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIucmVzb2x2ZSB9KVxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZC5mYWlsKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlamVjdCB9KVxuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDEgXSBdKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0dXJuZWQgPSBmbiAmJiBmbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCByZXR1cm5lZCAmJiBpc0Z1bmN0aW9uKCByZXR1cm5lZC5wcm9taXNlICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZC5wcm9taXNlKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXJbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50c1xuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzICkge1xuXHRcdFx0XHRcdHZhciBtYXhEZXB0aCA9IDA7XG5cdFx0XHRcdFx0ZnVuY3Rpb24gcmVzb2x2ZSggZGVwdGgsIGRlZmVycmVkLCBoYW5kbGVyLCBzcGVjaWFsICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0YXJncyA9IGFyZ3VtZW50cyxcblx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0dXJuZWQsIHRoZW47XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy4zXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01OVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWdub3JlIGRvdWJsZS1yZXNvbHV0aW9uIGF0dGVtcHRzXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoIDwgbWF4RGVwdGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQgPSBoYW5kbGVyLmFwcGx5KCB0aGF0LCBhcmdzICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjFcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTQ4XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHJldHVybmVkID09PSBkZWZlcnJlZC5wcm9taXNlKCkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoIFwiVGhlbmFibGUgc2VsZi1yZXNvbHV0aW9uXCIgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbnMgMi4zLjMuMSwgMy41XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01NFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNzVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJldHJpZXZlIGB0aGVuYCBvbmx5IG9uY2Vcblx0XHRcdFx0XHRcdFx0XHRcdHRoZW4gPSByZXR1cm5lZCAmJlxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNjRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBjaGVjayBvYmplY3RzIGFuZCBmdW5jdGlvbnMgZm9yIHRoZW5hYmlsaXR5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCggdHlwZW9mIHJldHVybmVkID09PSBcIm9iamVjdFwiIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZW9mIHJldHVybmVkID09PSBcImZ1bmN0aW9uXCIgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZC50aGVuO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgYSByZXR1cm5lZCB0aGVuYWJsZVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCB0aGVuICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3BlY2lhbCBwcm9jZXNzb3JzIChub3RpZnkpIGp1c3Qgd2FpdCBmb3IgcmVzb2x1dGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhlbi5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gTm9ybWFsIHByb2Nlc3NvcnMgKHJlc29sdmUpIGFsc28gaG9vayBpbnRvIHByb2dyZXNzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgZGlzcmVnYXJkIG9sZGVyIHJlc29sdXRpb24gdmFsdWVzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWF4RGVwdGgrKztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoZW4uY2FsbChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwgc3BlY2lhbCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBUaHJvd2VyLCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhbGwgb3RoZXIgcmV0dXJuZWQgdmFsdWVzXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgc3Vic3RpdHV0ZSBoYW5kbGVycyBwYXNzIG9uIGNvbnRleHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gSWRlbnRpdHkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhhdCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcmdzID0gWyByZXR1cm5lZCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUHJvY2VzcyB0aGUgdmFsdWUocylcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmYXVsdCBwcm9jZXNzIGlzIHJlc29sdmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0KCBzcGVjaWFsIHx8IGRlZmVycmVkLnJlc29sdmVXaXRoICkoIHRoYXQsIGFyZ3MgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBub3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgY2F0Y2ggYW5kIHJlamVjdCBleGNlcHRpb25zXG5cdFx0XHRcdFx0XHRcdFx0cHJvY2VzcyA9IHNwZWNpYWwgP1xuXHRcdFx0XHRcdFx0XHRcdFx0bWlnaHRUaHJvdyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKCBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuNC4xXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNjFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgcG9zdC1yZXNvbHV0aW9uIGV4Y2VwdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoICsgMSA+PSBtYXhEZXB0aCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBzdWJzdGl0dXRlIGhhbmRsZXJzIHBhc3Mgb24gY29udGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGhhbmRsZXIgIT09IFRocm93ZXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoYXQgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBbIGUgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuMVxuXHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01N1xuXHRcdFx0XHRcdFx0XHQvLyBSZS1yZXNvbHZlIHByb21pc2VzIGltbWVkaWF0ZWx5IHRvIGRvZGdlIGZhbHNlIHJlamVjdGlvbiBmcm9tXG5cdFx0XHRcdFx0XHRcdC8vIHN1YnNlcXVlbnQgZXJyb3JzXG5cdFx0XHRcdFx0XHRcdGlmICggZGVwdGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0cHJvY2VzcygpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ2FsbCBhbiBvcHRpb25hbCBob29rIHRvIHJlY29yZCB0aGUgc3RhY2ssIGluIGNhc2Ugb2YgZXhjZXB0aW9uXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2luY2UgaXQncyBvdGhlcndpc2UgbG9zdCB3aGVuIGV4ZWN1dGlvbiBnb2VzIGFzeW5jXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cHJvY2Vzcy5zdGFja1RyYWNlID0galF1ZXJ5LkRlZmVycmVkLmdldFN0YWNrSG9vaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggcHJvY2VzcyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblxuXHRcdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRpc0Z1bmN0aW9uKCBvblByb2dyZXNzICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25Qcm9ncmVzcyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRJZGVudGl0eSxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlci5ub3RpZnlXaXRoXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDEgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uRnVsZmlsbGVkICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25GdWxmaWxsZWQgOlxuXHRcdFx0XHRcdFx0XHRcdFx0SWRlbnRpdHlcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAyIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRpc0Z1bmN0aW9uKCBvblJlamVjdGVkICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25SZWplY3RlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRUaHJvd2VyXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kc1xuXHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblx0XHRcdHZhciBsaXN0ID0gdHVwbGVbIDIgXSxcblx0XHRcdFx0c3RhdGVTdHJpbmcgPSB0dXBsZVsgNSBdO1xuXG5cdFx0XHQvLyBwcm9taXNlLnByb2dyZXNzID0gbGlzdC5hZGRcblx0XHRcdC8vIHByb21pc2UuZG9uZSA9IGxpc3QuYWRkXG5cdFx0XHQvLyBwcm9taXNlLmZhaWwgPSBsaXN0LmFkZFxuXHRcdFx0cHJvbWlzZVsgdHVwbGVbIDEgXSBdID0gbGlzdC5hZGQ7XG5cblx0XHRcdC8vIEhhbmRsZSBzdGF0ZVxuXHRcdFx0aWYgKCBzdGF0ZVN0cmluZyApIHtcblx0XHRcdFx0bGlzdC5hZGQoXG5cdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZXNvbHZlZFwiIChpLmUuLCBmdWxmaWxsZWQpXG5cdFx0XHRcdFx0XHQvLyBzdGF0ZSA9IFwicmVqZWN0ZWRcIlxuXHRcdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHQvLyBmdWxmaWxsZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHR0dXBsZXNbIDMgLSBpIF1bIDIgXS5kaXNhYmxlLFxuXG5cdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuZGlzYWJsZVxuXHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5kaXNhYmxlXG5cdFx0XHRcdFx0dHVwbGVzWyAzIC0gaSBdWyAzIF0uZGlzYWJsZSxcblxuXHRcdFx0XHRcdC8vIHByb2dyZXNzX2NhbGxiYWNrcy5sb2NrXG5cdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDIgXS5sb2NrLFxuXG5cdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMubG9ja1xuXHRcdFx0XHRcdHR1cGxlc1sgMCBdWyAzIF0ubG9ja1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5maXJlXG5cdFx0XHQvLyBmdWxmaWxsZWRfaGFuZGxlcnMuZmlyZVxuXHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuZmlyZVxuXHRcdFx0bGlzdC5hZGQoIHR1cGxlWyAzIF0uZmlyZSApO1xuXG5cdFx0XHQvLyBkZWZlcnJlZC5ub3RpZnkgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQubm90aWZ5V2l0aCguLi4pIH1cblx0XHRcdC8vIGRlZmVycmVkLnJlc29sdmUgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQucmVzb2x2ZVdpdGgoLi4uKSB9XG5cdFx0XHQvLyBkZWZlcnJlZC5yZWplY3QgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQucmVqZWN0V2l0aCguLi4pIH1cblx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHVuZGVmaW5lZCA6IHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH07XG5cblx0XHRcdC8vIGRlZmVycmVkLm5vdGlmeVdpdGggPSBsaXN0LmZpcmVXaXRoXG5cdFx0XHQvLyBkZWZlcnJlZC5yZXNvbHZlV2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdC8vIGRlZmVycmVkLnJlamVjdFdpdGggPSBsaXN0LmZpcmVXaXRoXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0gPSBsaXN0LmZpcmVXaXRoO1xuXHRcdH0gKTtcblxuXHRcdC8vIE1ha2UgdGhlIGRlZmVycmVkIGEgcHJvbWlzZVxuXHRcdHByb21pc2UucHJvbWlzZSggZGVmZXJyZWQgKTtcblxuXHRcdC8vIENhbGwgZ2l2ZW4gZnVuYyBpZiBhbnlcblx0XHRpZiAoIGZ1bmMgKSB7XG5cdFx0XHRmdW5jLmNhbGwoIGRlZmVycmVkLCBkZWZlcnJlZCApO1xuXHRcdH1cblxuXHRcdC8vIEFsbCBkb25lIVxuXHRcdHJldHVybiBkZWZlcnJlZDtcblx0fSxcblxuXHQvLyBEZWZlcnJlZCBoZWxwZXJcblx0d2hlbjogZnVuY3Rpb24oIHNpbmdsZVZhbHVlICkge1xuXHRcdHZhclxuXG5cdFx0XHQvLyBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXNcblx0XHRcdHJlbWFpbmluZyA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cblx0XHRcdC8vIGNvdW50IG9mIHVucHJvY2Vzc2VkIGFyZ3VtZW50c1xuXHRcdFx0aSA9IHJlbWFpbmluZyxcblxuXHRcdFx0Ly8gc3Vib3JkaW5hdGUgZnVsZmlsbG1lbnQgZGF0YVxuXHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gQXJyYXkoIGkgKSxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblxuXHRcdFx0Ly8gdGhlIG1hc3RlciBEZWZlcnJlZFxuXHRcdFx0bWFzdGVyID0galF1ZXJ5LkRlZmVycmVkKCksXG5cblx0XHRcdC8vIHN1Ym9yZGluYXRlIGNhbGxiYWNrIGZhY3Rvcnlcblx0XHRcdHVwZGF0ZUZ1bmMgPSBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXNvbHZlQ29udGV4dHNbIGkgXSA9IHRoaXM7XG5cdFx0XHRcdFx0cmVzb2x2ZVZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdGlmICggISggLS1yZW1haW5pbmcgKSApIHtcblx0XHRcdFx0XHRcdG1hc3Rlci5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblxuXHRcdC8vIFNpbmdsZS0gYW5kIGVtcHR5IGFyZ3VtZW50cyBhcmUgYWRvcHRlZCBsaWtlIFByb21pc2UucmVzb2x2ZVxuXHRcdGlmICggcmVtYWluaW5nIDw9IDEgKSB7XG5cdFx0XHRhZG9wdFZhbHVlKCBzaW5nbGVWYWx1ZSwgbWFzdGVyLmRvbmUoIHVwZGF0ZUZ1bmMoIGkgKSApLnJlc29sdmUsIG1hc3Rlci5yZWplY3QsXG5cdFx0XHRcdCFyZW1haW5pbmcgKTtcblxuXHRcdFx0Ly8gVXNlIC50aGVuKCkgdG8gdW53cmFwIHNlY29uZGFyeSB0aGVuYWJsZXMgKGNmLiBnaC0zMDAwKVxuXHRcdFx0aWYgKCBtYXN0ZXIuc3RhdGUoKSA9PT0gXCJwZW5kaW5nXCIgfHxcblx0XHRcdFx0aXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdICYmIHJlc29sdmVWYWx1ZXNbIGkgXS50aGVuICkgKSB7XG5cblx0XHRcdFx0cmV0dXJuIG1hc3Rlci50aGVuKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gTXVsdGlwbGUgYXJndW1lbnRzIGFyZSBhZ2dyZWdhdGVkIGxpa2UgUHJvbWlzZS5hbGwgYXJyYXkgZWxlbWVudHNcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdGFkb3B0VmFsdWUoIHJlc29sdmVWYWx1ZXNbIGkgXSwgdXBkYXRlRnVuYyggaSApLCBtYXN0ZXIucmVqZWN0ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hc3Rlci5wcm9taXNlKCk7XG5cdH1cbn0gKTtcblxuXG4vLyBUaGVzZSB1c3VhbGx5IGluZGljYXRlIGEgcHJvZ3JhbW1lciBtaXN0YWtlIGR1cmluZyBkZXZlbG9wbWVudCxcbi8vIHdhcm4gYWJvdXQgdGhlbSBBU0FQIHJhdGhlciB0aGFuIHN3YWxsb3dpbmcgdGhlbSBieSBkZWZhdWx0LlxudmFyIHJlcnJvck5hbWVzID0gL14oRXZhbHxJbnRlcm5hbHxSYW5nZXxSZWZlcmVuY2V8U3ludGF4fFR5cGV8VVJJKUVycm9yJC87XG5cbmpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rID0gZnVuY3Rpb24oIGVycm9yLCBzdGFjayApIHtcblxuXHQvLyBTdXBwb3J0OiBJRSA4IC0gOSBvbmx5XG5cdC8vIENvbnNvbGUgZXhpc3RzIHdoZW4gZGV2IHRvb2xzIGFyZSBvcGVuLCB3aGljaCBjYW4gaGFwcGVuIGF0IGFueSB0aW1lXG5cdGlmICggd2luZG93LmNvbnNvbGUgJiYgd2luZG93LmNvbnNvbGUud2FybiAmJiBlcnJvciAmJiByZXJyb3JOYW1lcy50ZXN0KCBlcnJvci5uYW1lICkgKSB7XG5cdFx0d2luZG93LmNvbnNvbGUud2FybiggXCJqUXVlcnkuRGVmZXJyZWQgZXhjZXB0aW9uOiBcIiArIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrLCBzdGFjayApO1xuXHR9XG59O1xuXG5cblxuXG5qUXVlcnkucmVhZHlFeGNlcHRpb24gPSBmdW5jdGlvbiggZXJyb3IgKSB7XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHR0aHJvdyBlcnJvcjtcblx0fSApO1xufTtcblxuXG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cbmpRdWVyeS5mbi5yZWFkeSA9IGZ1bmN0aW9uKCBmbiApIHtcblxuXHRyZWFkeUxpc3Rcblx0XHQudGhlbiggZm4gKVxuXG5cdFx0Ly8gV3JhcCBqUXVlcnkucmVhZHlFeGNlcHRpb24gaW4gYSBmdW5jdGlvbiBzbyB0aGF0IHRoZSBsb29rdXBcblx0XHQvLyBoYXBwZW5zIGF0IHRoZSB0aW1lIG9mIGVycm9yIGhhbmRsaW5nIGluc3RlYWQgb2YgY2FsbGJhY2tcblx0XHQvLyByZWdpc3RyYXRpb24uXG5cdFx0LmNhdGNoKCBmdW5jdGlvbiggZXJyb3IgKSB7XG5cdFx0XHRqUXVlcnkucmVhZHlFeGNlcHRpb24oIGVycm9yICk7XG5cdFx0fSApO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdGlzUmVhZHk6IGZhbHNlLFxuXG5cdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0Ly8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcblx0cmVhZHlXYWl0OiAxLFxuXG5cdC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0cmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG5cdFx0Ly8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuXHRcdGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuXHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0aWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuXHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkucmVhZHkudGhlbiA9IHJlYWR5TGlzdC50aGVuO1xuXG4vLyBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZFxuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkICk7XG5cdGpRdWVyeS5yZWFkeSgpO1xufVxuXG4vLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZFxuLy8gYWZ0ZXIgdGhlIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMCBvbmx5XG4vLyBPbGRlciBJRSBzb21ldGltZXMgc2lnbmFscyBcImludGVyYWN0aXZlXCIgdG9vIHNvb25cbmlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIHx8XG5cdCggZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIgJiYgIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCApICkge1xuXG5cdC8vIEhhbmRsZSBpdCBhc3luY2hyb25vdXNseSB0byBhbGxvdyBzY3JpcHRzIHRoZSBvcHBvcnR1bml0eSB0byBkZWxheSByZWFkeVxuXHR3aW5kb3cuc2V0VGltZW91dCggalF1ZXJ5LnJlYWR5ICk7XG5cbn0gZWxzZSB7XG5cblx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cblx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQgKTtcbn1cblxuXG5cblxuLy8gTXVsdGlmdW5jdGlvbmFsIG1ldGhvZCB0byBnZXQgYW5kIHNldCB2YWx1ZXMgb2YgYSBjb2xsZWN0aW9uXG4vLyBUaGUgdmFsdWUvcyBjYW4gb3B0aW9uYWxseSBiZSBleGVjdXRlZCBpZiBpdCdzIGEgZnVuY3Rpb25cbnZhciBhY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXG5cdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0aWYgKCB0b1R5cGUoIGtleSApID09PSBcIm9iamVjdFwiICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cdFx0Zm9yICggaSBpbiBrZXkgKSB7XG5cdFx0XHRhY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5WyBpIF0sIHRydWUsIGVtcHR5R2V0LCByYXcgKTtcblx0XHR9XG5cblx0Ly8gU2V0cyBvbmUgdmFsdWVcblx0fSBlbHNlIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXG5cdFx0aWYgKCAhaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJhdyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKCBidWxrICkge1xuXG5cdFx0XHQvLyBCdWxrIG9wZXJhdGlvbnMgcnVuIGFnYWluc3QgdGhlIGVudGlyZSBzZXRcblx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0Zm4gPSBudWxsO1xuXG5cdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbihcblx0XHRcdFx0XHRlbGVtc1sgaSBdLCBrZXksIHJhdyA/XG5cdFx0XHRcdFx0dmFsdWUgOlxuXHRcdFx0XHRcdHZhbHVlLmNhbGwoIGVsZW1zWyBpIF0sIGksIGZuKCBlbGVtc1sgaSBdLCBrZXkgKSApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBjaGFpbmFibGUgKSB7XG5cdFx0cmV0dXJuIGVsZW1zO1xuXHR9XG5cblx0Ly8gR2V0c1xuXHRpZiAoIGJ1bGsgKSB7XG5cdFx0cmV0dXJuIGZuLmNhbGwoIGVsZW1zICk7XG5cdH1cblxuXHRyZXR1cm4gbGVuID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xudmFyIHJtc1ByZWZpeCA9IC9eLW1zLS8sXG5cdHJkYXNoQWxwaGEgPSAvLShbYS16XSkvZztcblxuLy8gVXNlZCBieSBjYW1lbENhc2UgYXMgY2FsbGJhY2sgdG8gcmVwbGFjZSgpXG5mdW5jdGlvbiBmY2FtZWxDYXNlKCBhbGwsIGxldHRlciApIHtcblx0cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDE1XG4vLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpXG5mdW5jdGlvbiBjYW1lbENhc2UoIHN0cmluZyApIHtcblx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG59XG52YXIgYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKCBvd25lciApIHtcblxuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0cmV0dXJuIG93bmVyLm5vZGVUeXBlID09PSAxIHx8IG93bmVyLm5vZGVUeXBlID09PSA5IHx8ICEoICtvd25lci5ub2RlVHlwZSApO1xufTtcblxuXG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0dGhpcy5leHBhbmRvID0galF1ZXJ5LmV4cGFuZG8gKyBEYXRhLnVpZCsrO1xufVxuXG5EYXRhLnVpZCA9IDE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXG5cdGNhY2hlOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGVcblx0XHR2YXIgdmFsdWUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF2YWx1ZSApIHtcblx0XHRcdHZhbHVlID0ge307XG5cblx0XHRcdC8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLFxuXHRcdFx0Ly8gYnV0IHdlIHNob3VsZCBub3QsIHNlZSAjODMzNS5cblx0XHRcdC8vIEFsd2F5cyByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LlxuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBvd25lciApICkge1xuXG5cdFx0XHRcdC8vIElmIGl0IGlzIGEgbm9kZSB1bmxpa2VseSB0byBiZSBzdHJpbmdpZnktZWQgb3IgbG9vcGVkIG92ZXJcblx0XHRcdFx0Ly8gdXNlIHBsYWluIGFzc2lnbm1lbnRcblx0XHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB2YWx1ZTtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2Ugc2VjdXJlIGl0IGluIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHlcblx0XHRcdFx0Ly8gY29uZmlndXJhYmxlIG11c3QgYmUgdHJ1ZSB0byBhbGxvdyB0aGUgcHJvcGVydHkgdG8gYmVcblx0XHRcdFx0Ly8gZGVsZXRlZCB3aGVuIGRhdGEgaXMgcmVtb3ZlZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb3duZXIsIHRoaXMuZXhwYW5kbywge1xuXHRcdFx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGUoIG93bmVyICk7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRjYWNoZVsgY2FtZWxDYXNlKCBkYXRhICkgXSA9IHZhbHVlO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCB7IHByb3BlcnRpZXMgfSBdIGFyZ3Ncblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBDb3B5IHRoZSBwcm9wZXJ0aWVzIG9uZS1ieS1vbmUgdG8gdGhlIGNhY2hlIG9iamVjdFxuXHRcdFx0Zm9yICggcHJvcCBpbiBkYXRhICkge1xuXHRcdFx0XHRjYWNoZVsgY2FtZWxDYXNlKCBwcm9wICkgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9LFxuXHRnZXQ6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHR0aGlzLmNhY2hlKCBvd25lciApIDpcblxuXHRcdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdICYmIG93bmVyWyB0aGlzLmV4cGFuZG8gXVsgY2FtZWxDYXNlKCBrZXkgKSBdO1xuXHR9LFxuXHRhY2Nlc3M6IGZ1bmN0aW9uKCBvd25lciwga2V5LCB2YWx1ZSApIHtcblxuXHRcdC8vIEluIGNhc2VzIHdoZXJlIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWRcblx0XHQvLyAgIDIuIEEgc3RyaW5nIGtleSB3YXMgc3BlY2lmaWVkLCBidXQgbm8gdmFsdWUgcHJvdmlkZWRcblx0XHQvL1xuXHRcdC8vIFRha2UgdGhlIFwicmVhZFwiIHBhdGggYW5kIGFsbG93IHRoZSBnZXQgbWV0aG9kIHRvIGRldGVybWluZVxuXHRcdC8vIHdoaWNoIHZhbHVlIHRvIHJldHVybiwgcmVzcGVjdGl2ZWx5IGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gVGhlIGVudGlyZSBjYWNoZSBvYmplY3Rcblx0XHQvLyAgIDIuIFRoZSBkYXRhIHN0b3JlZCBhdCB0aGUga2V5XG5cdFx0Ly9cblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdCggKCBrZXkgJiYgdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiApICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSApIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0KCBvd25lciwga2V5ICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2hlbiB0aGUga2V5IGlzIG5vdCBhIHN0cmluZywgb3IgYm90aCBhIGtleSBhbmQgdmFsdWVcblx0XHQvLyBhcmUgc3BlY2lmaWVkLCBzZXQgb3IgZXh0ZW5kIChleGlzdGluZyBvYmplY3RzKSB3aXRoIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gQW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcblx0XHQvLyAgIDIuIEEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vXG5cdFx0dGhpcy5zZXQoIG93bmVyLCBrZXksIHZhbHVlICk7XG5cblx0XHQvLyBTaW5jZSB0aGUgXCJzZXRcIiBwYXRoIGNhbiBoYXZlIHR3byBwb3NzaWJsZSBlbnRyeSBwb2ludHNcblx0XHQvLyByZXR1cm4gdGhlIGV4cGVjdGVkIGRhdGEgYmFzZWQgb24gd2hpY2ggcGF0aCB3YXMgdGFrZW5bKl1cblx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoga2V5O1xuXHR9LFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHZhciBpLFxuXHRcdFx0Y2FjaGUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHRpZiAoIGNhY2hlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSgga2V5ICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYga2V5IGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0Ly8gV2UgYWx3YXlzIHNldCBjYW1lbENhc2Uga2V5cywgc28gcmVtb3ZlIHRoYXQuXG5cdFx0XHRcdGtleSA9IGtleS5tYXAoIGNhbWVsQ2FzZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0a2V5ID0gY2FtZWxDYXNlKCBrZXkgKTtcblxuXHRcdFx0XHQvLyBJZiBhIGtleSB3aXRoIHRoZSBzcGFjZXMgZXhpc3RzLCB1c2UgaXQuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdGtleSA9IGtleSBpbiBjYWNoZSA/XG5cdFx0XHRcdFx0WyBrZXkgXSA6XG5cdFx0XHRcdFx0KCBrZXkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpID0ga2V5Lmxlbmd0aDtcblxuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5WyBpIF0gXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgdGhlIGV4cGFuZG8gaWYgdGhlcmUncyBubyBtb3JlIGRhdGFcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApICkge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1XG5cdFx0XHQvLyBXZWJraXQgJiBCbGluayBwZXJmb3JtYW5jZSBzdWZmZXJzIHdoZW4gZGVsZXRpbmcgcHJvcGVydGllc1xuXHRcdFx0Ly8gZnJvbSBET00gbm9kZXMsIHNvIHNldCB0byB1bmRlZmluZWQgaW5zdGVhZFxuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Mzc4NjA3IChidWcgcmVzdHJpY3RlZClcblx0XHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlbGV0ZSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRoYXNEYXRhOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0dmFyIGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdHJldHVybiBjYWNoZSAhPT0gdW5kZWZpbmVkICYmICFqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKTtcblx0fVxufTtcbnZhciBkYXRhUHJpdiA9IG5ldyBEYXRhKCk7XG5cbnZhciBkYXRhVXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvW0EtWl0vZztcblxuZnVuY3Rpb24gZ2V0RGF0YSggZGF0YSApIHtcblx0aWYgKCBkYXRhID09PSBcInRydWVcIiApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGlmICggZGF0YSA9PT0gXCJmYWxzZVwiICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggZGF0YSA9PT0gXCJudWxsXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZ1xuXHRpZiAoIGRhdGEgPT09ICtkYXRhICsgXCJcIiApIHtcblx0XHRyZXR1cm4gK2RhdGE7XG5cdH1cblxuXHRpZiAoIHJicmFjZS50ZXN0KCBkYXRhICkgKSB7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKTtcblx0fVxuXG5cdHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJCZcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGdldERhdGEoIGRhdGEgKTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge31cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyXG5cdFx0XHRkYXRhVXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKTtcblx0fSxcblxuXHRkYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YVVzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YVByaXYgbWV0aG9kcywgdGhlc2UgY2FuIGJlIGRlcHJlY2F0ZWQuXG5cdF9kYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0X3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZGF0YTogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGRhdGEsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0YXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlcztcblxuXHRcdC8vIEdldHMgYWxsIHZhbHVlc1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHRoaXMubGVuZ3RoICkge1xuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtICk7XG5cblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFkYXRhUHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBUaGUgYXR0cnMgZWxlbWVudHMgY2FuIGJlIG51bGwgKCMxNDg5NClcblx0XHRcdFx0XHRcdGlmICggYXR0cnNbIGkgXSApIHtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IGF0dHJzWyBpIF0ubmFtZTtcblx0XHRcdFx0XHRcdFx0aWYgKCBuYW1lLmluZGV4T2YoIFwiZGF0YS1cIiApID09PSAwICkge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWUgPSBjYW1lbENhc2UoIG5hbWUuc2xpY2UoIDUgKSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblx0XHR9XG5cblx0XHQvLyBTZXRzIG11bHRpcGxlIHZhbHVlc1xuXHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhVXNlci5zZXQoIHRoaXMsIGtleSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHQvLyBUaGUga2V5IHdpbGwgYWx3YXlzIGJlIGNhbWVsQ2FzZWQgaW4gRGF0YVxuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIFwiZGlzY292ZXJcIiB0aGUgZGF0YSBpblxuXHRcdFx0XHQvLyBIVE1MNSBjdXN0b20gZGF0YS0qIGF0dHJzXG5cdFx0XHRcdGRhdGEgPSBkYXRhQXR0ciggZWxlbSwga2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV2UgdHJpZWQgcmVhbGx5IGhhcmQsIGJ1dCB0aGUgZGF0YSBkb2Vzbid0IGV4aXN0LlxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCB0aGUgZGF0YS4uLlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBXZSBhbHdheXMgc3RvcmUgdGhlIGNhbWVsQ2FzZWQga2V5XG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSwgbnVsbCwgdHJ1ZSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhVXNlci5yZW1vdmUoIHRoaXMsIGtleSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBxdWV1ZTtcblxuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHR5cGUgPSAoIHR5cGUgfHwgXCJmeFwiICkgKyBcInF1ZXVlXCI7XG5cdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmdldCggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHQvLyBTcGVlZCB1cCBkZXF1ZXVlIGJ5IGdldHRpbmcgb3V0IHF1aWNrbHkgaWYgdGhpcyBpcyBqdXN0IGEgbG9va3VwXG5cdFx0XHRpZiAoIGRhdGEgKSB7XG5cdFx0XHRcdGlmICggIXF1ZXVlIHx8IEFycmF5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSApICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cXVldWUucHVzaCggZGF0YSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcXVldWUgfHwgW107XG5cdFx0fVxuXHR9LFxuXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLFxuXHRcdFx0c3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCksXG5cdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLFxuXHRcdFx0bmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApO1xuXHRcdFx0fTtcblxuXHRcdC8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWxcblx0XHRpZiAoIGZuID09PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdHN0YXJ0TGVuZ3RoLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblxuXHRcdFx0Ly8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuXHRcdFx0Ly8gYXV0b21hdGljYWxseSBkZXF1ZXVlZFxuXHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgKSB7XG5cdFx0XHRcdHF1ZXVlLnVuc2hpZnQoIFwiaW5wcm9ncmVzc1wiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb25cblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0Zm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcblx0XHR9XG5cblx0XHRpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gTm90IHB1YmxpYyAtIGdlbmVyYXRlIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybiB0aGUgY3VycmVudCBvbmVcblx0X3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBrZXksIHtcblx0XHRcdGVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKS5hZGQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArIFwicXVldWVcIiwga2V5IF0gKTtcblx0XHRcdH0gKVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgc2V0dGVyID0gMjtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRkYXRhID0gdHlwZTtcblx0XHRcdHR5cGUgPSBcImZ4XCI7XG5cdFx0XHRzZXR0ZXItLTtcblx0XHR9XG5cblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCBzZXR0ZXIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWyAwIF0sIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMgOlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbIDAgXSAhPT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHR9LFxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSApO1xuXHR9LFxuXHRjbGVhclF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdH0sXG5cblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhUHJpdi5nZXQoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuXHRcdFx0aWYgKCB0bXAgJiYgdG1wLmVtcHR5ICkge1xuXHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHR0bXAuZW1wdHkuYWRkKCByZXNvbHZlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJlc29sdmUoKTtcblx0XHRyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7XG5cdH1cbn0gKTtcbnZhciBwbnVtID0gKCAvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLyApLnNvdXJjZTtcblxudmFyIHJjc3NOdW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBwbnVtICsgXCIpKFthLXolXSopJFwiLCBcImlcIiApO1xuXG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuV2l0aGluVHJlZSA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblxuXHRcdC8vIGlzSGlkZGVuV2l0aGluVHJlZSBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uO1xuXHRcdC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuXHRcdGVsZW0gPSBlbCB8fCBlbGVtO1xuXG5cdFx0Ly8gSW5saW5lIHN0eWxlIHRydW1wcyBhbGxcblx0XHRyZXR1cm4gZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fFxuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmXG5cblx0XHRcdC8vIE90aGVyd2lzZSwgY2hlY2sgY29tcHV0ZWQgc3R5bGVcblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MyAtIDQ1XG5cdFx0XHQvLyBEaXNjb25uZWN0ZWQgZWxlbWVudHMgY2FuIGhhdmUgY29tcHV0ZWQgZGlzcGxheTogbm9uZSwgc28gZmlyc3QgY29uZmlybSB0aGF0IGVsZW0gaXNcblx0XHRcdC8vIGluIHRoZSBkb2N1bWVudC5cblx0XHRcdGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgJiZcblxuXHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSA9PT0gXCJub25lXCI7XG5cdH07XG5cbnZhciBzd2FwID0gZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrLCBhcmdzICkge1xuXHR2YXIgcmV0LCBuYW1lLFxuXHRcdG9sZCA9IHt9O1xuXG5cdC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0b2xkWyBuYW1lIF0gPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb3B0aW9uc1sgbmFtZSBdO1xuXHR9XG5cblx0cmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTtcblxuXHQvLyBSZXZlcnQgdGhlIG9sZCB2YWx1ZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9sZFsgbmFtZSBdO1xuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG5cblxuXG5cbmZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7XG5cdHZhciBhZGp1c3RlZCwgc2NhbGUsXG5cdFx0bWF4SXRlcmF0aW9ucyA9IDIwLFxuXHRcdGN1cnJlbnRWYWx1ZSA9IHR3ZWVuID9cblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uY3VyKCk7XG5cdFx0XHR9IDpcblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgcHJvcCwgXCJcIiApO1xuXHRcdFx0fSxcblx0XHRpbml0aWFsID0gY3VycmVudFZhbHVlKCksXG5cdFx0dW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXG5cdFx0Ly8gU3RhcnRpbmcgdmFsdWUgY29tcHV0YXRpb24gaXMgcmVxdWlyZWQgZm9yIHBvdGVudGlhbCB1bml0IG1pc21hdGNoZXNcblx0XHRpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICtpbml0aWFsICkgJiZcblx0XHRcdHJjc3NOdW0uZXhlYyggalF1ZXJ5LmNzcyggZWxlbSwgcHJvcCApICk7XG5cblx0aWYgKCBpbml0aWFsSW5Vbml0ICYmIGluaXRpYWxJblVuaXRbIDMgXSAhPT0gdW5pdCApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD01NFxuXHRcdC8vIEhhbHZlIHRoZSBpdGVyYXRpb24gdGFyZ2V0IHZhbHVlIHRvIHByZXZlbnQgaW50ZXJmZXJlbmNlIGZyb20gQ1NTIHVwcGVyIGJvdW5kcyAoZ2gtMjE0NClcblx0XHRpbml0aWFsID0gaW5pdGlhbCAvIDI7XG5cblx0XHQvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzXG5cdFx0dW5pdCA9IHVuaXQgfHwgaW5pdGlhbEluVW5pdFsgMyBdO1xuXG5cdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRpbml0aWFsSW5Vbml0ID0gK2luaXRpYWwgfHwgMTtcblxuXHRcdHdoaWxlICggbWF4SXRlcmF0aW9ucy0tICkge1xuXG5cdFx0XHQvLyBFdmFsdWF0ZSBhbmQgdXBkYXRlIG91ciBiZXN0IGd1ZXNzIChkb3VibGluZyBndWVzc2VzIHRoYXQgemVybyBvdXQpLlxuXHRcdFx0Ly8gRmluaXNoIGlmIHRoZSBzY2FsZSBlcXVhbHMgb3IgY3Jvc3NlcyAxIChtYWtpbmcgdGhlIG9sZCpuZXcgcHJvZHVjdCBub24tcG9zaXRpdmUpLlxuXHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBpbml0aWFsSW5Vbml0ICsgdW5pdCApO1xuXHRcdFx0aWYgKCAoIDEgLSBzY2FsZSApICogKCAxIC0gKCBzY2FsZSA9IGN1cnJlbnRWYWx1ZSgpIC8gaW5pdGlhbCB8fCAwLjUgKSApIDw9IDAgKSB7XG5cdFx0XHRcdG1heEl0ZXJhdGlvbnMgPSAwO1xuXHRcdFx0fVxuXHRcdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgLyBzY2FsZTtcblxuXHRcdH1cblxuXHRcdGluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0ICogMjtcblx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0dmFsdWVQYXJ0cyA9IHZhbHVlUGFydHMgfHwgW107XG5cdH1cblxuXHRpZiAoIHZhbHVlUGFydHMgKSB7XG5cdFx0aW5pdGlhbEluVW5pdCA9ICtpbml0aWFsSW5Vbml0IHx8ICtpbml0aWFsIHx8IDA7XG5cblx0XHQvLyBBcHBseSByZWxhdGl2ZSBvZmZzZXQgKCs9Ly09KSBpZiBzcGVjaWZpZWRcblx0XHRhZGp1c3RlZCA9IHZhbHVlUGFydHNbIDEgXSA/XG5cdFx0XHRpbml0aWFsSW5Vbml0ICsgKCB2YWx1ZVBhcnRzWyAxIF0gKyAxICkgKiB2YWx1ZVBhcnRzWyAyIF0gOlxuXHRcdFx0K3ZhbHVlUGFydHNbIDIgXTtcblx0XHRpZiAoIHR3ZWVuICkge1xuXHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHR0d2Vlbi5zdGFydCA9IGluaXRpYWxJblVuaXQ7XG5cdFx0XHR0d2Vlbi5lbmQgPSBhZGp1c3RlZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGFkanVzdGVkO1xufVxuXG5cbnZhciBkZWZhdWx0RGlzcGxheU1hcCA9IHt9O1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApIHtcblx0dmFyIHRlbXAsXG5cdFx0ZG9jID0gZWxlbS5vd25lckRvY3VtZW50LFxuXHRcdG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZSxcblx0XHRkaXNwbGF5ID0gZGVmYXVsdERpc3BsYXlNYXBbIG5vZGVOYW1lIF07XG5cblx0aWYgKCBkaXNwbGF5ICkge1xuXHRcdHJldHVybiBkaXNwbGF5O1xuXHR9XG5cblx0dGVtcCA9IGRvYy5ib2R5LmFwcGVuZENoaWxkKCBkb2MuY3JlYXRlRWxlbWVudCggbm9kZU5hbWUgKSApO1xuXHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggdGVtcCwgXCJkaXNwbGF5XCIgKTtcblxuXHR0ZW1wLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHRlbXAgKTtcblxuXHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdGRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdH1cblx0ZGVmYXVsdERpc3BsYXlNYXBbIG5vZGVOYW1lIF0gPSBkaXNwbGF5O1xuXG5cdHJldHVybiBkaXNwbGF5O1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLFxuXHRcdHZhbHVlcyA9IFtdLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cblx0Ly8gRGV0ZXJtaW5lIG5ldyBkaXNwbGF5IHZhbHVlIGZvciBlbGVtZW50cyB0aGF0IG5lZWQgdG8gY2hhbmdlXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0ZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdO1xuXHRcdGlmICggIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblxuXHRcdFx0Ly8gU2luY2Ugd2UgZm9yY2UgdmlzaWJpbGl0eSB1cG9uIGNhc2NhZGUtaGlkZGVuIGVsZW1lbnRzLCBhbiBpbW1lZGlhdGUgKGFuZCBzbG93KVxuXHRcdFx0Ly8gY2hlY2sgaXMgcmVxdWlyZWQgaW4gdGhpcyBmaXJzdCBsb29wIHVubGVzcyB3ZSBoYXZlIGEgbm9uZW1wdHkgZGlzcGxheSB2YWx1ZSAoZWl0aGVyXG5cdFx0XHQvLyBpbmxpbmUgb3IgYWJvdXQtdG8tYmUtcmVzdG9yZWQpXG5cdFx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZGlzcGxheVwiICkgfHwgbnVsbDtcblx0XHRcdFx0aWYgKCAhdmFsdWVzWyBpbmRleCBdICkge1xuXHRcdFx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuV2l0aGluVHJlZSggZWxlbSApICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBcIm5vbmVcIjtcblxuXHRcdFx0XHQvLyBSZW1lbWJlciB3aGF0IHdlJ3JlIG92ZXJ3cml0aW5nXG5cdFx0XHRcdGRhdGFQcml2LnNldCggZWxlbSwgXCJkaXNwbGF5XCIsIGRpc3BsYXkgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBTZXQgdGhlIGRpc3BsYXkgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3AgdG8gYXZvaWQgY29uc3RhbnQgcmVmbG93XG5cdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0aWYgKCB2YWx1ZXNbIGluZGV4IF0gIT0gbnVsbCApIHtcblx0XHRcdGVsZW1lbnRzWyBpbmRleCBdLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZXNbIGluZGV4IF07XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRzO1xufVxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcywgdHJ1ZSApO1xuXHR9LFxuXHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTtcblx0fSxcblx0dG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW5XaXRoaW5UcmVlKCB0aGlzICkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmhpZGUoKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cbn0gKTtcbnZhciByY2hlY2thYmxlVHlwZSA9ICggL14oPzpjaGVja2JveHxyYWRpbykkL2kgKTtcblxudmFyIHJ0YWdOYW1lID0gKCAvPChbYS16XVteXFwvXFwwPlxceDIwXFx0XFxyXFxuXFxmXSspL2kgKTtcblxudmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8Xm1vZHVsZSR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pICk7XG5cblxuXG4vLyBXZSBoYXZlIHRvIGNsb3NlIHRoZXNlIHRhZ3MgdG8gc3VwcG9ydCBYSFRNTCAoIzEzMjAwKVxudmFyIHdyYXBNYXAgPSB7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0b3B0aW9uOiBbIDEsIFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLCBcIjwvc2VsZWN0PlwiIF0sXG5cblx0Ly8gWEhUTUwgcGFyc2VycyBkbyBub3QgbWFnaWNhbGx5IGluc2VydCBlbGVtZW50cyBpbiB0aGVcblx0Ly8gc2FtZSB3YXkgdGhhdCB0YWcgc291cCBwYXJzZXJzIGRvLiBTbyB3ZSBjYW5ub3Qgc2hvcnRlblxuXHQvLyB0aGlzIGJ5IG9taXR0aW5nIDx0Ym9keT4gb3Igb3RoZXIgcmVxdWlyZWQgZWxlbWVudHMuXG5cdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0Y29sOiBbIDIsIFwiPHRhYmxlPjxjb2xncm91cD5cIiwgXCI8L2NvbGdyb3VwPjwvdGFibGU+XCIgXSxcblx0dHI6IFsgMiwgXCI8dGFibGU+PHRib2R5PlwiLCBcIjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0X2RlZmF1bHQ6IFsgMCwgXCJcIiwgXCJcIiBdXG59O1xuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xuXG53cmFwTWFwLnRib2R5ID0gd3JhcE1hcC50Zm9vdCA9IHdyYXBNYXAuY29sZ3JvdXAgPSB3cmFwTWFwLmNhcHRpb24gPSB3cmFwTWFwLnRoZWFkO1xud3JhcE1hcC50aCA9IHdyYXBNYXAudGQ7XG5cblxuZnVuY3Rpb24gZ2V0QWxsKCBjb250ZXh0LCB0YWcgKSB7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHQvLyBVc2UgdHlwZW9mIHRvIGF2b2lkIHplcm8tYXJndW1lbnQgbWV0aG9kIGludm9jYXRpb24gb24gaG9zdCBvYmplY3RzICgjMTUxNTEpXG5cdHZhciByZXQ7XG5cblx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRyZXQgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKTtcblxuXHR9IGVsc2UgaWYgKCB0eXBlb2YgY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdHJldCA9IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8IFwiKlwiICk7XG5cblx0fSBlbHNlIHtcblx0XHRyZXQgPSBbXTtcblx0fVxuXG5cdGlmICggdGFnID09PSB1bmRlZmluZWQgfHwgdGFnICYmIG5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICk7XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufVxuXG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YVByaXYuc2V0KFxuXHRcdFx0ZWxlbXNbIGkgXSxcblx0XHRcdFwiZ2xvYmFsRXZhbFwiLFxuXHRcdFx0IXJlZkVsZW1lbnRzIHx8IGRhdGFQcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuXG52YXIgcmh0bWwgPSAvPHwmIz9cXHcrOy87XG5cbmZ1bmN0aW9uIGJ1aWxkRnJhZ21lbnQoIGVsZW1zLCBjb250ZXh0LCBzY3JpcHRzLCBzZWxlY3Rpb24sIGlnbm9yZWQgKSB7XG5cdHZhciBlbGVtLCB0bXAsIHRhZywgd3JhcCwgY29udGFpbnMsIGosXG5cdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRub2RlcyA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGVsZW0gPSBlbGVtc1sgaSBdO1xuXG5cdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdC8vIEFkZCBub2RlcyBkaXJlY3RseVxuXHRcdFx0aWYgKCB0b1R5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7XG5cblx0XHRcdC8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZVxuXHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0bm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggZWxlbSApICk7XG5cblx0XHRcdC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG1wID0gdG1wIHx8IGZyYWdtZW50LmFwcGVuZENoaWxkKCBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApO1xuXG5cdFx0XHRcdC8vIERlc2VyaWFsaXplIGEgc3RhbmRhcmQgcmVwcmVzZW50YXRpb25cblx0XHRcdFx0dGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHR0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgalF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIGVsZW0gKSArIHdyYXBbIDIgXTtcblxuXHRcdFx0XHQvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcblx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdFx0dG1wID0gdG1wLmxhc3RDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIHRtcC5jaGlsZE5vZGVzICk7XG5cblx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0dG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdFx0XHQvLyBFbnN1cmUgdGhlIGNyZWF0ZWQgbm9kZXMgYXJlIG9ycGhhbmVkICgjMTIzOTIpXG5cdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuXHRmcmFnbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG5cblx0aSA9IDA7XG5cdHdoaWxlICggKCBlbGVtID0gbm9kZXNbIGkrKyBdICkgKSB7XG5cblx0XHQvLyBTa2lwIGVsZW1lbnRzIGFscmVhZHkgaW4gdGhlIGNvbnRleHQgY29sbGVjdGlvbiAodHJhYy00MDg3KVxuXHRcdGlmICggc2VsZWN0aW9uICYmIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBzZWxlY3Rpb24gKSA+IC0xICkge1xuXHRcdFx0aWYgKCBpZ25vcmVkICkge1xuXHRcdFx0XHRpZ25vcmVkLnB1c2goIGVsZW0gKTtcblx0XHRcdH1cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdC8vIEFwcGVuZCB0byBmcmFnbWVudFxuXHRcdHRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgXCJzY3JpcHRcIiApO1xuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGlmICggY29udGFpbnMgKSB7XG5cdFx0XHRzZXRHbG9iYWxFdmFsKCB0bXAgKTtcblx0XHR9XG5cblx0XHQvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG5cdFx0aWYgKCBzY3JpcHRzICkge1xuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRtcFsgaisrIF0gKSApIHtcblx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgXCJcIiApICkge1xuXHRcdFx0XHRcdHNjcmlwdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZyYWdtZW50O1xufVxuXG5cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRkaXYgPSBmcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICksXG5cdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5XG5cdC8vIENoZWNrIHN0YXRlIGxvc3QgaWYgdGhlIG5hbWUgaXMgc2V0ICgjMTEyMTcpXG5cdC8vIFN1cHBvcnQ6IFdpbmRvd3MgV2ViIEFwcHMgKFdXQSlcblx0Ly8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpXG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwicmFkaW9cIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwiY2hlY2tlZFwiLCBcImNoZWNrZWRcIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcInRcIiApO1xuXG5cdGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4xIG9ubHlcblx0Ly8gT2xkZXIgV2ViS2l0IGRvZXNuJ3QgY2xvbmUgY2hlY2tlZCBzdGF0ZSBjb3JyZWN0bHkgaW4gZnJhZ21lbnRzXG5cdHN1cHBvcnQuY2hlY2tDbG9uZSA9IGRpdi5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0gKSgpO1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuXG5cbnZhclxuXHRya2V5RXZlbnQgPSAvXmtleS8sXG5cdHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFxuXHRydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KS87XG5cbmZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuLy8gU2VlICMxMzM5MyBmb3IgbW9yZSBpbmZvXG5mdW5jdGlvbiBzYWZlQWN0aXZlRWxlbWVudCgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0fSBjYXRjaCAoIGVyciApIHsgfVxufVxuXG5mdW5jdGlvbiBvbiggZWxlbSwgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lICkge1xuXHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdC8vIFR5cGVzIGNhbiBiZSBhIG1hcCBvZiB0eXBlcy9oYW5kbGVyc1xuXHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vICggdHlwZXMtT2JqZWN0LCBzZWxlY3RvciwgZGF0YSApXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdGRhdGEgPSBkYXRhIHx8IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRvbiggZWxlbSwgdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXG5cdGlmICggZGF0YSA9PSBudWxsICYmIGZuID09IG51bGwgKSB7XG5cblx0XHQvLyAoIHR5cGVzLCBmbiApXG5cdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdH0gZWxzZSBpZiAoIGZuID09IG51bGwgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMsIHNlbGVjdG9yLCBmbiApXG5cdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vICggdHlwZXMsIGRhdGEsIGZuIClcblx0XHRcdGZuID0gZGF0YTtcblx0XHRcdGRhdGEgPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHR9IGVsc2UgaWYgKCAhZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW07XG5cdH1cblxuXHRpZiAoIG9uZSA9PT0gMSApIHtcblx0XHRvcmlnRm4gPSBmbjtcblx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRqUXVlcnkoKS5vZmYoIGV2ZW50ICk7XG5cdFx0XHRyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9O1xuXG5cdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRmbi5ndWlkID0gb3JpZ0ZuLmd1aWQgfHwgKCBvcmlnRm4uZ3VpZCA9IGpRdWVyeS5ndWlkKysgKTtcblx0fVxuXHRyZXR1cm4gZWxlbS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCB0eXBlcywgZm4sIGRhdGEsIHNlbGVjdG9yICk7XG5cdH0gKTtcbn1cblxuLypcbiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cbiAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuXG4gKi9cbmpRdWVyeS5ldmVudCA9IHtcblxuXHRnbG9iYWw6IHt9LFxuXG5cdGFkZDogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBkYXRhLCBzZWxlY3RvciApIHtcblxuXHRcdHZhciBoYW5kbGVPYmpJbiwgZXZlbnRIYW5kbGUsIHRtcCxcblx0XHRcdGV2ZW50cywgdCwgaGFuZGxlT2JqLFxuXHRcdFx0c3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLFxuXHRcdFx0ZWxlbURhdGEgPSBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdC8vIERvbid0IGF0dGFjaCBldmVudHMgdG8gbm9EYXRhIG9yIHRleHQvY29tbWVudCBub2RlcyAoYnV0IGFsbG93IHBsYWluIG9iamVjdHMpXG5cdFx0aWYgKCAhZWxlbURhdGEgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGFuIG9iamVjdCBvZiBjdXN0b20gZGF0YSBpbiBsaWV1IG9mIHRoZSBoYW5kbGVyXG5cdFx0aWYgKCBoYW5kbGVyLmhhbmRsZXIgKSB7XG5cdFx0XHRoYW5kbGVPYmpJbiA9IGhhbmRsZXI7XG5cdFx0XHRoYW5kbGVyID0gaGFuZGxlT2JqSW4uaGFuZGxlcjtcblx0XHRcdHNlbGVjdG9yID0gaGFuZGxlT2JqSW4uc2VsZWN0b3I7XG5cdFx0fVxuXG5cdFx0Ly8gRW5zdXJlIHRoYXQgaW52YWxpZCBzZWxlY3RvcnMgdGhyb3cgZXhjZXB0aW9ucyBhdCBhdHRhY2ggdGltZVxuXHRcdC8vIEV2YWx1YXRlIGFnYWluc3QgZG9jdW1lbnRFbGVtZW50IGluIGNhc2UgZWxlbSBpcyBhIG5vbi1lbGVtZW50IG5vZGUgKGUuZy4sIGRvY3VtZW50KVxuXHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGRvY3VtZW50RWxlbWVudCwgc2VsZWN0b3IgKTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0ZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG5cdFx0fVxuXHRcdGlmICggISggZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgKSApIHtcblx0XHRcdGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgP1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZWxlbSwgYXJndW1lbnRzICkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2Vcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVGhlcmUgKm11c3QqIGJlIGEgdHlwZSwgbm8gYXR0YWNoaW5nIG5hbWVzcGFjZS1vbmx5IGhhbmRsZXJzXG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgZXZlbnQgY2hhbmdlcyBpdHMgdHlwZSwgdXNlIHRoZSBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgY2hhbmdlZCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gSWYgc2VsZWN0b3IgZGVmaW5lZCwgZGV0ZXJtaW5lIHNwZWNpYWwgZXZlbnQgYXBpIHR5cGUsIG90aGVyd2lzZSBnaXZlbiB0eXBlXG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cblx0XHRcdC8vIFVwZGF0ZSBzcGVjaWFsIGJhc2VkIG9uIG5ld2x5IHJlc2V0IHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBoYW5kbGVPYmogaXMgcGFzc2VkIHRvIGFsbCBldmVudCBoYW5kbGVyc1xuXHRcdFx0aGFuZGxlT2JqID0galF1ZXJ5LmV4dGVuZCgge1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKVxuXHRcdFx0fSwgaGFuZGxlT2JqSW4gKTtcblxuXHRcdFx0Ly8gSW5pdCB0aGUgZXZlbnQgaGFuZGxlciBxdWV1ZSBpZiB3ZSdyZSB0aGUgZmlyc3Rcblx0XHRcdGlmICggISggaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSApICkge1xuXHRcdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdID0gW107XG5cdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQgPSAwO1xuXG5cdFx0XHRcdC8vIE9ubHkgdXNlIGFkZEV2ZW50TGlzdGVuZXIgaWYgdGhlIHNwZWNpYWwgZXZlbnRzIGhhbmRsZXIgcmV0dXJucyBmYWxzZVxuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnNldHVwIHx8XG5cdFx0XHRcdFx0c3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdGlmICggZWxlbS5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBldmVudEhhbmRsZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNwZWNpYWwuYWRkICkge1xuXHRcdFx0XHRzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblxuXHRcdFx0XHRpZiAoICFoYW5kbGVPYmouaGFuZGxlci5ndWlkICkge1xuXHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyLmd1aWQgPSBoYW5kbGVyLmd1aWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHRvIHRoZSBlbGVtZW50J3MgaGFuZGxlciBsaXN0LCBkZWxlZ2F0ZXMgaW4gZnJvbnRcblx0XHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLCAwLCBoYW5kbGVPYmogKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhhbmRsZXJzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBLZWVwIHRyYWNrIG9mIHdoaWNoIGV2ZW50cyBoYXZlIGV2ZXIgYmVlbiB1c2VkLCBmb3IgZXZlbnQgb3B0aW1pemF0aW9uXG5cdFx0XHRqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlO1xuXHRcdH1cblxuXHR9LFxuXG5cdC8vIERldGFjaCBhbiBldmVudCBvciBzZXQgb2YgZXZlbnRzIGZyb20gYW4gZWxlbWVudFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgc2VsZWN0b3IsIG1hcHBlZFR5cGVzICkge1xuXG5cdFx0dmFyIGosIG9yaWdDb3VudCwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdGlmICggIWVsZW1EYXRhIHx8ICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE9uY2UgZm9yIGVhY2ggdHlwZS5uYW1lc3BhY2UgaW4gdHlwZXM7IHR5cGUgbWF5IGJlIG9taXR0ZWRcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVW5iaW5kIGFsbCBldmVudHMgKG9uIHRoaXMgbmFtZXNwYWNlLCBpZiBwcm92aWRlZCkgZm9yIHRoZSBlbGVtZW50XG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICsgdHlwZXNbIHQgXSwgaGFuZGxlciwgc2VsZWN0b3IsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdO1xuXHRcdFx0dG1wID0gdG1wWyAyIF0gJiZcblx0XHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fFxuXHRcdFx0XHRcdFx0c2VsZWN0b3IgPT09IFwiKipcIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHtcblx0XHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGosIDEgKTtcblxuXHRcdFx0XHRcdGlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIHNwZWNpYWwucmVtb3ZlICkge1xuXHRcdFx0XHRcdFx0c3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBnZW5lcmljIGV2ZW50IGhhbmRsZXIgaWYgd2UgcmVtb3ZlZCBzb21ldGhpbmcgYW5kIG5vIG1vcmUgaGFuZGxlcnMgZXhpc3Rcblx0XHRcdC8vIChhdm9pZHMgcG90ZW50aWFsIGZvciBlbmRsZXNzIHJlY3Vyc2lvbiBkdXJpbmcgcmVtb3ZhbCBvZiBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzKVxuXHRcdFx0aWYgKCBvcmlnQ291bnQgJiYgIWhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0aWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fFxuXHRcdFx0XHRcdHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBlbGVtRGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlbGV0ZSBldmVudHNbIHR5cGUgXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgZGF0YSBhbmQgdGhlIGV4cGFuZG8gaWYgaXQncyBubyBsb25nZXIgdXNlZFxuXHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkge1xuXHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImhhbmRsZSBldmVudHNcIiApO1xuXHRcdH1cblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIG5hdGl2ZUV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0dmFyIGV2ZW50ID0galF1ZXJ5LmV2ZW50LmZpeCggbmF0aXZlRXZlbnQgKTtcblxuXHRcdHZhciBpLCBqLCByZXQsIG1hdGNoZWQsIGhhbmRsZU9iaiwgaGFuZGxlclF1ZXVlLFxuXHRcdFx0YXJncyA9IG5ldyBBcnJheSggYXJndW1lbnRzLmxlbmd0aCApLFxuXHRcdFx0aGFuZGxlcnMgPSAoIGRhdGFQcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWyAwIF0gPSBldmVudDtcblxuXHRcdGZvciAoIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0YXJnc1sgaSBdID0gYXJndW1lbnRzWyBpIF07XG5cdFx0fVxuXG5cdFx0ZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBoYW5kbGVyc1xuXHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuXHRcdC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoIG1hdGNoZWQgPSBoYW5kbGVyUXVldWVbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRldmVudC5jdXJyZW50VGFyZ2V0ID0gbWF0Y2hlZC5lbGVtO1xuXG5cdFx0XHRqID0gMDtcblx0XHRcdHdoaWxlICggKCBoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSApICYmXG5cdFx0XHRcdCFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXG5cdFx0XHRcdC8vIFRyaWdnZXJlZCBldmVudCBtdXN0IGVpdGhlciAxKSBoYXZlIG5vIG5hbWVzcGFjZSwgb3IgMikgaGF2ZSBuYW1lc3BhY2Uocylcblx0XHRcdFx0Ly8gYSBzdWJzZXQgb3IgZXF1YWwgdG8gdGhvc2UgaW4gdGhlIGJvdW5kIGV2ZW50IChib3RoIGNhbiBoYXZlIG5vIG5hbWVzcGFjZSkuXG5cdFx0XHRcdGlmICggIWV2ZW50LnJuYW1lc3BhY2UgfHwgZXZlbnQucm5hbWVzcGFjZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyBoYW5kbGVPYmoub3JpZ1R5cGUgXSB8fCB7fSApLmhhbmRsZSB8fFxuXHRcdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIgKS5hcHBseSggbWF0Y2hlZC5lbGVtLCBhcmdzICk7XG5cblx0XHRcdFx0XHRpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoIGV2ZW50LnJlc3VsdCA9IHJldCApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbCB0aGUgcG9zdERpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZVxuXHRcdGlmICggc3BlY2lhbC5wb3N0RGlzcGF0Y2ggKSB7XG5cdFx0XHRzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0aGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7XG5cdFx0dmFyIGksIGhhbmRsZU9iaiwgc2VsLCBtYXRjaGVkSGFuZGxlcnMsIG1hdGNoZWRTZWxlY3RvcnMsXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdGlmICggZGVsZWdhdGVDb3VudCAmJlxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTlcblx0XHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICh0cmFjLTEzMTgwKVxuXHRcdFx0Y3VyLm5vZGVUeXBlICYmXG5cblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MlxuXHRcdFx0Ly8gU3VwcHJlc3Mgc3BlYy12aW9sYXRpbmcgY2xpY2tzIGluZGljYXRpbmcgYSBub24tcHJpbWFyeSBwb2ludGVyIGJ1dHRvbiAodHJhYy0zODYxKVxuXHRcdFx0Ly8gaHR0cHM6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnQtdHlwZS1jbGlja1xuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTEgb25seVxuXHRcdFx0Ly8gLi4uYnV0IG5vdCBhcnJvdyBrZXkgXCJjbGlja3NcIiBvZiByYWRpbyBpbnB1dHMsIHdoaWNoIGNhbiBoYXZlIGBidXR0b25gIC0xIChnaC0yMzQzKVxuXHRcdFx0ISggZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiICYmIGV2ZW50LmJ1dHRvbiA+PSAxICkgKSB7XG5cblx0XHRcdGZvciAoIDsgY3VyICE9PSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkge1xuXG5cdFx0XHRcdC8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KVxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPT09IDEgJiYgISggZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiICYmIGN1ci5kaXNhYmxlZCA9PT0gdHJ1ZSApICkge1xuXHRcdFx0XHRcdG1hdGNoZWRIYW5kbGVycyA9IFtdO1xuXHRcdFx0XHRcdG1hdGNoZWRTZWxlY3RvcnMgPSB7fTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID4gLTEgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkSGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggbWF0Y2hlZEhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZWRIYW5kbGVycyB9ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVyc1xuXHRcdGN1ciA9IHRoaXM7XG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50IDwgaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogaGFuZGxlcnMuc2xpY2UoIGRlbGVnYXRlQ291bnQgKSB9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhhbmRsZXJRdWV1ZTtcblx0fSxcblxuXHRhZGRQcm9wOiBmdW5jdGlvbiggbmFtZSwgaG9vayApIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIGpRdWVyeS5FdmVudC5wcm90b3R5cGUsIG5hbWUsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cblx0XHRcdGdldDogaXNGdW5jdGlvbiggaG9vayApID9cblx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBob29rKCB0aGlzLm9yaWdpbmFsRXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gOlxuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFsgbmFtZSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblxuXHRcdFx0c2V0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcywgbmFtZSwge1xuXHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGZpeDogZnVuY3Rpb24oIG9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0cmV0dXJuIG9yaWdpbmFsRXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0b3JpZ2luYWxFdmVudCA6XG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCBvcmlnaW5hbEV2ZW50ICk7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblxuXHRcdFx0Ly8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZFxuXHRcdFx0bm9CdWJibGU6IHRydWVcblx0XHR9LFxuXHRcdGZvY3VzOiB7XG5cblx0XHRcdC8vIEZpcmUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcyAhPT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmZvY3VzICkge1xuXHRcdFx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNpblwiXG5cdFx0fSxcblx0XHRibHVyOiB7XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuYmx1ciApIHtcblx0XHRcdFx0XHR0aGlzLmJsdXIoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNvdXRcIlxuXHRcdH0sXG5cdFx0Y2xpY2s6IHtcblxuXHRcdFx0Ly8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgbm9kZU5hbWUoIHRoaXMsIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHRoaXMuY2xpY2soKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBkb24ndCBmaXJlIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rc1xuXHRcdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0cmV0dXJuIG5vZGVOYW1lKCBldmVudC50YXJnZXQsIFwiYVwiICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdGJlZm9yZXVubG9hZDoge1xuXHRcdFx0cG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCAyMCtcblx0XHRcdFx0Ly8gRmlyZWZveCBkb2Vzbid0IGFsZXJ0IGlmIHRoZSByZXR1cm5WYWx1ZSBmaWVsZCBpcyBub3Qgc2V0LlxuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZSA9IGV2ZW50LnJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblxuXHQvLyBUaGlzIFwiaWZcIiBpcyBuZWVkZWQgZm9yIHBsYWluIG9iamVjdHNcblx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUgKTtcblx0fVxufTtcblxualF1ZXJ5LkV2ZW50ID0gZnVuY3Rpb24oIHNyYywgcHJvcHMgKSB7XG5cblx0Ly8gQWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IHRoZSAnbmV3JyBrZXl3b3JkXG5cdGlmICggISggdGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCApICkge1xuXHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBFdmVudCBvYmplY3Rcblx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0dGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjO1xuXHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXG5cdFx0Ly8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcblx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdHNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9Mi4zIG9ubHlcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdFx0Ly8gQ3JlYXRlIHRhcmdldCBwcm9wZXJ0aWVzXG5cdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDw9NiAtIDcgb25seVxuXHRcdC8vIFRhcmdldCBzaG91bGQgbm90IGJlIGEgdGV4dCBub2RlICgjNTA0LCAjMTMxNDMpXG5cdFx0dGhpcy50YXJnZXQgPSAoIHNyYy50YXJnZXQgJiYgc3JjLnRhcmdldC5ub2RlVHlwZSA9PT0gMyApID9cblx0XHRcdHNyYy50YXJnZXQucGFyZW50Tm9kZSA6XG5cdFx0XHRzcmMudGFyZ2V0O1xuXG5cdFx0dGhpcy5jdXJyZW50VGFyZ2V0ID0gc3JjLmN1cnJlbnRUYXJnZXQ7XG5cdFx0dGhpcy5yZWxhdGVkVGFyZ2V0ID0gc3JjLnJlbGF0ZWRUYXJnZXQ7XG5cblx0Ly8gRXZlbnQgdHlwZVxuXHR9IGVsc2Uge1xuXHRcdHRoaXMudHlwZSA9IHNyYztcblx0fVxuXG5cdC8vIFB1dCBleHBsaWNpdGx5IHByb3ZpZGVkIHByb3BlcnRpZXMgb250byB0aGUgZXZlbnQgb2JqZWN0XG5cdGlmICggcHJvcHMgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdGhpcywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIENyZWF0ZSBhIHRpbWVzdGFtcCBpZiBpbmNvbWluZyBldmVudCBkb2Vzbid0IGhhdmUgb25lXG5cdHRoaXMudGltZVN0YW1wID0gc3JjICYmIHNyYy50aW1lU3RhbXAgfHwgRGF0ZS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAwMzAzMzEvZWNtYS1zY3JpcHQtYmluZGluZy5odG1sXG5qUXVlcnkuRXZlbnQucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LkV2ZW50LFxuXHRpc0RlZmF1bHRQcmV2ZW50ZWQ6IHJldHVybkZhbHNlLFxuXHRpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cdGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNTaW11bGF0ZWQ6IGZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXHRzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdH1cblxuXHRcdHRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH1cbn07XG5cbi8vIEluY2x1ZGVzIGFsbCBjb21tb24gZXZlbnQgcHJvcHMgaW5jbHVkaW5nIEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50IHNwZWNpZmljIHByb3BzXG5qUXVlcnkuZWFjaCgge1xuXHRhbHRLZXk6IHRydWUsXG5cdGJ1YmJsZXM6IHRydWUsXG5cdGNhbmNlbGFibGU6IHRydWUsXG5cdGNoYW5nZWRUb3VjaGVzOiB0cnVlLFxuXHRjdHJsS2V5OiB0cnVlLFxuXHRkZXRhaWw6IHRydWUsXG5cdGV2ZW50UGhhc2U6IHRydWUsXG5cdG1ldGFLZXk6IHRydWUsXG5cdHBhZ2VYOiB0cnVlLFxuXHRwYWdlWTogdHJ1ZSxcblx0c2hpZnRLZXk6IHRydWUsXG5cdHZpZXc6IHRydWUsXG5cdFwiY2hhclwiOiB0cnVlLFxuXHRjaGFyQ29kZTogdHJ1ZSxcblx0a2V5OiB0cnVlLFxuXHRrZXlDb2RlOiB0cnVlLFxuXHRidXR0b246IHRydWUsXG5cdGJ1dHRvbnM6IHRydWUsXG5cdGNsaWVudFg6IHRydWUsXG5cdGNsaWVudFk6IHRydWUsXG5cdG9mZnNldFg6IHRydWUsXG5cdG9mZnNldFk6IHRydWUsXG5cdHBvaW50ZXJJZDogdHJ1ZSxcblx0cG9pbnRlclR5cGU6IHRydWUsXG5cdHNjcmVlblg6IHRydWUsXG5cdHNjcmVlblk6IHRydWUsXG5cdHRhcmdldFRvdWNoZXM6IHRydWUsXG5cdHRvRWxlbWVudDogdHJ1ZSxcblx0dG91Y2hlczogdHJ1ZSxcblxuXHR3aGljaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBidXR0b24gPSBldmVudC5idXR0b247XG5cblx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRpZiAoIGV2ZW50LndoaWNoID09IG51bGwgJiYgcmtleUV2ZW50LnRlc3QoIGV2ZW50LnR5cGUgKSApIHtcblx0XHRcdHJldHVybiBldmVudC5jaGFyQ29kZSAhPSBudWxsID8gZXZlbnQuY2hhckNvZGUgOiBldmVudC5rZXlDb2RlO1xuXHRcdH1cblxuXHRcdC8vIEFkZCB3aGljaCBmb3IgY2xpY2s6IDEgPT09IGxlZnQ7IDIgPT09IG1pZGRsZTsgMyA9PT0gcmlnaHRcblx0XHRpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCAmJiBybW91c2VFdmVudC50ZXN0KCBldmVudC50eXBlICkgKSB7XG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDEgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDIgKSB7XG5cdFx0XHRcdHJldHVybiAzO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDQgKSB7XG5cdFx0XHRcdHJldHVybiAyO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQud2hpY2g7XG5cdH1cbn0sIGpRdWVyeS5ldmVudC5hZGRQcm9wICk7XG5cbi8vIENyZWF0ZSBtb3VzZWVudGVyL2xlYXZlIGV2ZW50cyB1c2luZyBtb3VzZW92ZXIvb3V0IGFuZCBldmVudC10aW1lIGNoZWNrc1xuLy8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS5cbi8vIERvIHRoZSBzYW1lIGZvciBwb2ludGVyZW50ZXIvcG9pbnRlcmxlYXZlIGFuZCBwb2ludGVyb3Zlci9wb2ludGVyb3V0XG4vL1xuLy8gU3VwcG9ydDogU2FmYXJpIDcgb25seVxuLy8gU2FmYXJpIHNlbmRzIG1vdXNlZW50ZXIgdG9vIG9mdGVuOyBzZWU6XG4vLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NzAyNThcbi8vIGZvciB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGJ1ZyAoaXQgZXhpc3RlZCBpbiBvbGRlciBDaHJvbWUgdmVyc2lvbnMgYXMgd2VsbCkuXG5qUXVlcnkuZWFjaCgge1xuXHRtb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLFxuXHRtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCIsXG5cdHBvaW50ZXJlbnRlcjogXCJwb2ludGVyb3ZlclwiLFxuXHRwb2ludGVybGVhdmU6IFwicG9pbnRlcm91dFwiXG59LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgb3JpZyBdID0ge1xuXHRcdGRlbGVnYXRlVHlwZTogZml4LFxuXHRcdGJpbmRUeXBlOiBmaXgsXG5cblx0XHRoYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciByZXQsXG5cdFx0XHRcdHRhcmdldCA9IHRoaXMsXG5cdFx0XHRcdHJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0LFxuXHRcdFx0XHRoYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7XG5cblx0XHRcdC8vIEZvciBtb3VzZWVudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuXG5cdFx0XHQvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuXHRcdFx0aWYgKCAhcmVsYXRlZCB8fCAoIHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSApICkge1xuXHRcdFx0XHRldmVudC50eXBlID0gaGFuZGxlT2JqLm9yaWdUeXBlO1xuXHRcdFx0XHRyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBmaXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblx0fTtcbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIDEgKTtcblx0fSxcblx0b2ZmOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBmbiApIHtcblx0XHR2YXIgaGFuZGxlT2JqLCB0eXBlO1xuXHRcdGlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkge1xuXG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID9cblx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUgKyBcIi5cIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOlxuXHRcdFx0XHRcdGhhbmRsZU9iai5vcmlnVHlwZSxcblx0XHRcdFx0aGFuZGxlT2JqLnNlbGVjdG9yLFxuXHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlclxuXHRcdFx0KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzIFssIGZuXSApXG5cdFx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdFx0Zm4gPSByZXR1cm5GYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cblxudmFyXG5cblx0LyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuXG5cdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZXNsaW50L2VzbGludC9pc3N1ZXMvMzIyOVxuXHRyeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbYS16XVteXFwvXFwwPlxceDIwXFx0XFxyXFxuXFxmXSopW14+XSopXFwvPi9naSxcblxuXHQvKiBlc2xpbnQtZW5hYmxlICovXG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMCAtIDExLCBFZGdlIDEyIC0gMTMgb25seVxuXHQvLyBJbiBJRS9FZGdlIHVzaW5nIHJlZ2V4IGdyb3VwcyBoZXJlIGNhdXNlcyBzZXZlcmUgc2xvd2Rvd25zLlxuXHQvLyBTZWUgaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy8xNzM2NTEyL1xuXHRybm9Jbm5lcmh0bWwgPSAvPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxcblxuXHQvLyBjaGVja2VkPVwiY2hlY2tlZFwiIG9yIGNoZWNrZWRcblx0cmNoZWNrZWQgPSAvY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLFxuXHRyY2xlYW5TY3JpcHQgPSAvXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2c7XG5cbi8vIFByZWZlciBhIHRib2R5IG92ZXIgaXRzIHBhcmVudCB0YWJsZSBmb3IgY29udGFpbmluZyBuZXcgcm93c1xuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRpZiAoIG5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdG5vZGVOYW1lKCBjb250ZW50Lm5vZGVUeXBlICE9PSAxMSA/IGNvbnRlbnQgOiBjb250ZW50LmZpcnN0Q2hpbGQsIFwidHJcIiApICkge1xuXG5cdFx0cmV0dXJuIGpRdWVyeSggZWxlbSApLmNoaWxkcmVuKCBcInRib2R5XCIgKVsgMCBdIHx8IGVsZW07XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKCBlbGVtLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSAhPT0gbnVsbCApICsgXCIvXCIgKyBlbGVtLnR5cGU7XG5cdHJldHVybiBlbGVtO1xufVxuZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHtcblx0aWYgKCAoIGVsZW0udHlwZSB8fCBcIlwiICkuc2xpY2UoIDAsIDUgKSA9PT0gXCJ0cnVlL1wiICkge1xuXHRcdGVsZW0udHlwZSA9IGVsZW0udHlwZS5zbGljZSggNSApO1xuXHR9IGVsc2Uge1xuXHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBcInR5cGVcIiApO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBpLCBsLCB0eXBlLCBwZGF0YU9sZCwgcGRhdGFDdXIsIHVkYXRhT2xkLCB1ZGF0YUN1ciwgZXZlbnRzO1xuXG5cdGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyAxLiBDb3B5IHByaXZhdGUgZGF0YTogZXZlbnRzLCBoYW5kbGVycywgZXRjLlxuXHRpZiAoIGRhdGFQcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YVByaXYuYWNjZXNzKCBzcmMgKTtcblx0XHRwZGF0YUN1ciA9IGRhdGFQcml2LnNldCggZGVzdCwgcGRhdGFPbGQgKTtcblx0XHRldmVudHMgPSBwZGF0YU9sZC5ldmVudHM7XG5cblx0XHRpZiAoIGV2ZW50cyApIHtcblx0XHRcdGRlbGV0ZSBwZGF0YUN1ci5oYW5kbGU7XG5cdFx0XHRwZGF0YUN1ci5ldmVudHMgPSB7fTtcblxuXHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIDIuIENvcHkgdXNlciBkYXRhXG5cdGlmICggZGF0YVVzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhVXNlci5hY2Nlc3MoIHNyYyApO1xuXHRcdHVkYXRhQ3VyID0galF1ZXJ5LmV4dGVuZCgge30sIHVkYXRhT2xkICk7XG5cblx0XHRkYXRhVXNlci5zZXQoIGRlc3QsIHVkYXRhQ3VyICk7XG5cdH1cbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxuZnVuY3Rpb24gZG9tTWFuaXAoIGNvbGxlY3Rpb24sIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICkge1xuXG5cdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHR2YXIgZnJhZ21lbnQsIGZpcnN0LCBzY3JpcHRzLCBoYXNTY3JpcHRzLCBub2RlLCBkb2MsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuXHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0dmFsdWUgPSBhcmdzWyAwIF0sXG5cdFx0dmFsdWVJc0Z1bmN0aW9uID0gaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHQvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXRcblx0aWYgKCB2YWx1ZUlzRnVuY3Rpb24gfHxcblx0XHRcdCggbCA+IDEgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdHJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdHZhciBzZWxmID0gY29sbGVjdGlvbi5lcSggaW5kZXggKTtcblx0XHRcdGlmICggdmFsdWVJc0Z1bmN0aW9uICkge1xuXHRcdFx0XHRhcmdzWyAwIF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTtcblx0XHRcdH1cblx0XHRcdGRvbU1hbmlwKCBzZWxmLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApO1xuXHRcdH0gKTtcblx0fVxuXG5cdGlmICggbCApIHtcblx0XHRmcmFnbWVudCA9IGJ1aWxkRnJhZ21lbnQoIGFyZ3MsIGNvbGxlY3Rpb25bIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgY29sbGVjdGlvbiwgaWdub3JlZCApO1xuXHRcdGZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdGlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7XG5cdFx0XHRmcmFnbWVudCA9IGZpcnN0O1xuXHRcdH1cblxuXHRcdC8vIFJlcXVpcmUgZWl0aGVyIG5ldyBjb250ZW50IG9yIGFuIGludGVyZXN0IGluIGlnbm9yZWQgZWxlbWVudHMgdG8gaW52b2tlIHRoZSBjYWxsYmFja1xuXHRcdGlmICggZmlyc3QgfHwgaWdub3JlZCApIHtcblx0XHRcdHNjcmlwdHMgPSBqUXVlcnkubWFwKCBnZXRBbGwoIGZyYWdtZW50LCBcInNjcmlwdFwiICksIGRpc2FibGVTY3JpcHQgKTtcblx0XHRcdGhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDtcblxuXHRcdFx0Ly8gVXNlIHRoZSBvcmlnaW5hbCBmcmFnbWVudCBmb3IgdGhlIGxhc3QgaXRlbVxuXHRcdFx0Ly8gaW5zdGVhZCBvZiB0aGUgZmlyc3QgYmVjYXVzZSBpdCBjYW4gZW5kIHVwXG5cdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRub2RlID0gZnJhZ21lbnQ7XG5cblx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRub2RlID0galF1ZXJ5LmNsb25lKCBub2RlLCB0cnVlLCB0cnVlICk7XG5cblx0XHRcdFx0XHQvLyBLZWVwIHJlZmVyZW5jZXMgdG8gY2xvbmVkIHNjcmlwdHMgZm9yIGxhdGVyIHJlc3RvcmF0aW9uXG5cdFx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjYWxsYmFjay5jYWxsKCBjb2xsZWN0aW9uWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRcdC8vIFJlZW5hYmxlIHNjcmlwdHNcblx0XHRcdFx0alF1ZXJ5Lm1hcCggc2NyaXB0cywgcmVzdG9yZVNjcmlwdCApO1xuXG5cdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IHNjcmlwdHNbIGkgXTtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdCFkYXRhUHJpdi5hY2Nlc3MoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiZcblx0XHRcdFx0XHRcdGpRdWVyeS5jb250YWlucyggZG9jLCBub2RlICkgKSB7XG5cblx0XHRcdFx0XHRcdGlmICggbm9kZS5zcmMgJiYgKCBub2RlLnR5cGUgfHwgXCJcIiApLnRvTG93ZXJDYXNlKCkgICE9PSBcIm1vZHVsZVwiICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5Ll9ldmFsVXJsICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0RE9NRXZhbCggbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKCByY2xlYW5TY3JpcHQsIFwiXCIgKSwgZG9jLCBub2RlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNvbGxlY3Rpb247XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSggZWxlbSwgc2VsZWN0b3IsIGtlZXBEYXRhICkge1xuXHR2YXIgbm9kZSxcblx0XHRub2RlcyA9IHNlbGVjdG9yID8galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIGVsZW0gKSA6IGVsZW0sXG5cdFx0aSA9IDA7XG5cblx0Zm9yICggOyAoIG5vZGUgPSBub2Rlc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdGlmICggIWtlZXBEYXRhICYmIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIG5vZGUgKSApO1xuXHRcdH1cblxuXHRcdGlmICggbm9kZS5wYXJlbnROb2RlICkge1xuXHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIG5vZGUub3duZXJEb2N1bWVudCwgbm9kZSApICkge1xuXHRcdFx0XHRzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0fVxuXHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0cmV0dXJuIGh0bWwucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICk7XG5cdH0sXG5cblx0Y2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHR2YXIgaSwgbCwgc3JjRWxlbWVudHMsIGRlc3RFbGVtZW50cyxcblx0XHRcdGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSxcblx0XHRcdGluUGFnZSA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cblx0XHQvLyBGaXggSUUgY2xvbmluZyBpc3N1ZXNcblx0XHRpZiAoICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICYmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmXG5cdFx0XHRcdCFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwczovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRjbGVhbkRhdGE6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblx0XHR2YXIgZGF0YSwgZWxlbSwgdHlwZSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT09IHVuZGVmaW5lZDsgaSsrICkge1xuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cdFx0XHRcdGlmICggKCBkYXRhID0gZWxlbVsgZGF0YVByaXYuZXhwYW5kbyBdICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdGZvciAoIHR5cGUgaW4gZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbFsgdHlwZSBdICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgc2hvcnRjdXQgdG8gYXZvaWQgalF1ZXJ5LmV2ZW50LnJlbW92ZSdzIG92ZXJoZWFkXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9MzUgLSA0NStcblx0XHRcdFx0XHQvLyBBc3NpZ24gdW5kZWZpbmVkIGluc3RlYWQgb2YgdXNpbmcgZGVsZXRlLCBzZWUgRGF0YSNyZW1vdmVcblx0XHRcdFx0XHRlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCBlbGVtWyBkYXRhVXNlci5leHBhbmRvIF0gKSB7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGRldGFjaDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTtcblx0fSxcblxuXHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMubmV4dFNpYmxpbmcgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG1lbW9yeSBsZWFrc1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblxuXHRcdFx0XHQvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2Rlc1xuXHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdGRhdGFBbmRFdmVudHMgPSBkYXRhQW5kRXZlbnRzID09IG51bGwgPyBmYWxzZSA6IGRhdGFBbmRFdmVudHM7XG5cdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoICggZSApIHt9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmFwcGVuZCggdmFsdWUgKTtcblx0XHRcdH1cblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9LFxuXG5cdHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaWdub3JlZCA9IFtdO1xuXG5cdFx0Ly8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggbm9uLWlnbm9yZWQgY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcblxuXHRcdFx0aWYgKCBqUXVlcnkuaW5BcnJheSggdGhpcywgaWdub3JlZCApIDwgMCApIHtcblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uXG5cdFx0fSwgaWdub3JlZCApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCB7XG5cdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuXHRpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG5cdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxufSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgZWxlbXMsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdGxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcblx0XHRcdGVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKCB0cnVlICk7XG5cdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0Ly8gLmdldCgpIGJlY2F1c2UgcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0cHVzaC5hcHBseSggcmV0LCBlbGVtcy5nZXQoKSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7XG5cdH07XG59ICk7XG52YXIgcm51bW5vbnB4ID0gbmV3IFJlZ0V4cCggXCJeKFwiICsgcG51bSArIFwiKSg/IXB4KVthLXolXSskXCIsIFwiaVwiICk7XG5cbnZhciBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seSwgRmlyZWZveCA8PTMwICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHR2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztcblxuXHRcdGlmICggIXZpZXcgfHwgIXZpZXcub3BlbmVyICkge1xuXHRcdFx0dmlldyA9IHdpbmRvdztcblx0XHR9XG5cblx0XHRyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG5cdH07XG5cbnZhciByYm94U3R5bGUgPSBuZXcgUmVnRXhwKCBjc3NFeHBhbmQuam9pbiggXCJ8XCIgKSwgXCJpXCIgKTtcblxuXG5cbiggZnVuY3Rpb24oKSB7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkge1xuXG5cdFx0Ly8gVGhpcyBpcyBhIHNpbmdsZXRvbiwgd2UgbmVlZCB0byBleGVjdXRlIGl0IG9ubHkgb25jZVxuXHRcdGlmICggIWRpdiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O1wiICtcblx0XHRcdFwibWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowXCI7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XCJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7XCIgK1xuXHRcdFx0XCJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O1wiICtcblx0XHRcdFwid2lkdGg6NjAlO3RvcDoxJVwiO1xuXHRcdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICkuYXBwZW5kQ2hpbGQoIGRpdiApO1xuXG5cdFx0dmFyIGRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiApO1xuXHRcdHBpeGVsUG9zaXRpb25WYWwgPSBkaXZTdHlsZS50b3AgIT09IFwiMSVcIjtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gNDRcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnRWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdlN0eWxlLm1hcmdpbkxlZnQgKSA9PT0gMTI7XG5cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5LCBTYWZhcmkgPD05LjEgLSAxMC4xLCBpT1MgPD03LjAgLSA5LjNcblx0XHQvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3Rcblx0XHRkaXYuc3R5bGUucmlnaHQgPSBcIjYwJVwiO1xuXHRcdHBpeGVsQm94U3R5bGVzVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS5yaWdodCApID09PSAzNjtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdFx0Ly8gRGV0ZWN0IG1pc3JlcG9ydGluZyBvZiBjb250ZW50IGRpbWVuc2lvbnMgZm9yIGJveC1zaXppbmc6Ym9yZGVyLWJveCBlbGVtZW50c1xuXHRcdGJveFNpemluZ1JlbGlhYmxlVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS53aWR0aCApID09PSAzNjtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgb25seVxuXHRcdC8vIERldGVjdCBvdmVyZmxvdzpzY3JvbGwgc2NyZXdpbmVzcyAoZ2gtMzY5OSlcblx0XHRkaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0c2Nyb2xsYm94U2l6ZVZhbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gMzYgfHwgXCJhYnNvbHV0ZVwiO1xuXG5cdFx0ZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdC8vIE51bGxpZnkgdGhlIGRpdiBzbyBpdCB3b3VsZG4ndCBiZSBzdG9yZWQgaW4gdGhlIG1lbW9yeSBhbmRcblx0XHQvLyBpdCB3aWxsIGFsc28gYmUgYSBzaWduIHRoYXQgY2hlY2tzIGFscmVhZHkgcGVyZm9ybWVkXG5cdFx0ZGl2ID0gbnVsbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHJvdW5kUGl4ZWxNZWFzdXJlcyggbWVhc3VyZSApIHtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZCggcGFyc2VGbG9hdCggbWVhc3VyZSApICk7XG5cdH1cblxuXHR2YXIgcGl4ZWxQb3NpdGlvblZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsIHNjcm9sbGJveFNpemVWYWwsIHBpeGVsQm94U3R5bGVzVmFsLFxuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdFZhbCxcblx0XHRjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG5cdFx0ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuXG5cdC8vIEZpbmlzaCBlYXJseSBpbiBsaW1pdGVkIChub24tYnJvd3NlcikgZW52aXJvbm1lbnRzXG5cdGlmICggIWRpdi5zdHlsZSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdC8vIFN0eWxlIG9mIGNsb25lZCBlbGVtZW50IGFmZmVjdHMgc291cmNlIGVsZW1lbnQgY2xvbmVkICgjODkwOClcblx0ZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJjb250ZW50LWJveFwiO1xuXHRkaXYuY2xvbmVOb2RlKCB0cnVlICkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcIlwiO1xuXHRzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSA9IGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9PT0gXCJjb250ZW50LWJveFwiO1xuXG5cdGpRdWVyeS5leHRlbmQoIHN1cHBvcnQsIHtcblx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdH0sXG5cdFx0cGl4ZWxCb3hTdHlsZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBwaXhlbEJveFN0eWxlc1ZhbDtcblx0XHR9LFxuXHRcdHBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBwaXhlbFBvc2l0aW9uVmFsO1xuXHRcdH0sXG5cdFx0cmVsaWFibGVNYXJnaW5MZWZ0OiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsO1xuXHRcdH0sXG5cdFx0c2Nyb2xsYm94U2l6ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHNjcm9sbGJveFNpemVWYWw7XG5cdFx0fVxuXHR9ICk7XG59ICkoKTtcblxuXG5mdW5jdGlvbiBjdXJDU1MoIGVsZW0sIG5hbWUsIGNvbXB1dGVkICkge1xuXHR2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LFxuXG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA1MStcblx0XHQvLyBSZXRyaWV2aW5nIHN0eWxlIGJlZm9yZSBjb21wdXRlZCBzb21laG93XG5cdFx0Ly8gZml4ZXMgYW4gaXNzdWUgd2l0aCBnZXR0aW5nIHdyb25nIHZhbHVlc1xuXHRcdC8vIG9uIGRldGFjaGVkIGVsZW1lbnRzXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBuZWVkZWQgZm9yOlxuXHQvLyAgIC5jc3MoJ2ZpbHRlcicpIChJRSA5IG9ubHksICMxMjUzNylcblx0Ly8gICAuY3NzKCctLWN1c3RvbVByb3BlcnR5KSAoIzMxNDQpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cblx0XHRpZiAoIHJldCA9PT0gXCJcIiAmJiAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHtcblx0XHRcdHJldCA9IGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSApO1xuXHRcdH1cblxuXHRcdC8vIEEgdHJpYnV0ZSB0byB0aGUgXCJhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzXCJcblx0XHQvLyBBbmRyb2lkIEJyb3dzZXIgcmV0dXJucyBwZXJjZW50YWdlIGZvciBzb21lIHZhbHVlcyxcblx0XHQvLyBidXQgd2lkdGggc2VlbXMgdG8gYmUgcmVsaWFibHkgcGl4ZWxzLlxuXHRcdC8vIFRoaXMgaXMgYWdhaW5zdCB0aGUgQ1NTT00gZHJhZnQgc3BlYzpcblx0XHQvLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3Jlc29sdmVkLXZhbHVlc1xuXHRcdGlmICggIXN1cHBvcnQucGl4ZWxCb3hTdHlsZXMoKSAmJiBybnVtbm9ucHgudGVzdCggcmV0ICkgJiYgcmJveFN0eWxlLnRlc3QoIG5hbWUgKSApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0d2lkdGggPSBzdHlsZS53aWR0aDtcblx0XHRcdG1pbldpZHRoID0gc3R5bGUubWluV2lkdGg7XG5cdFx0XHRtYXhXaWR0aCA9IHN0eWxlLm1heFdpZHRoO1xuXG5cdFx0XHQvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7XG5cdFx0XHRyZXQgPSBjb21wdXRlZC53aWR0aDtcblxuXHRcdFx0Ly8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXHRcdFx0c3R5bGUud2lkdGggPSB3aWR0aDtcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7XG5cdFx0XHRzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXQgIT09IHVuZGVmaW5lZCA/XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdFx0Ly8gSUUgcmV0dXJucyB6SW5kZXggdmFsdWUgYXMgYW4gaW50ZWdlci5cblx0XHRyZXQgKyBcIlwiIDpcblx0XHRyZXQ7XG59XG5cblxuZnVuY3Rpb24gYWRkR2V0SG9va0lmKCBjb25kaXRpb25GbiwgaG9va0ZuICkge1xuXG5cdC8vIERlZmluZSB0aGUgaG9vaywgd2UnbGwgY2hlY2sgb24gdGhlIGZpcnN0IHJ1biBpZiBpdCdzIHJlYWxseSBuZWVkZWQuXG5cdHJldHVybiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggY29uZGl0aW9uRm4oKSApIHtcblxuXHRcdFx0XHQvLyBIb29rIG5vdCBuZWVkZWQgKG9yIGl0J3Mgbm90IHBvc3NpYmxlIHRvIHVzZSBpdCBkdWVcblx0XHRcdFx0Ly8gdG8gbWlzc2luZyBkZXBlbmRlbmN5KSwgcmVtb3ZlIGl0LlxuXHRcdFx0XHRkZWxldGUgdGhpcy5nZXQ7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSG9vayBuZWVkZWQ7IHJlZGVmaW5lIGl0IHNvIHRoYXQgdGhlIHN1cHBvcnQgdGVzdCBpcyBub3QgZXhlY3V0ZWQgYWdhaW4uXG5cdFx0XHRyZXR1cm4gKCB0aGlzLmdldCA9IGhvb2tGbiApLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9XG5cdH07XG59XG5cblxudmFyXG5cblx0Ly8gU3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZVxuXHQvLyBleGNlcHQgXCJ0YWJsZVwiLCBcInRhYmxlLWNlbGxcIiwgb3IgXCJ0YWJsZS1jYXB0aW9uXCJcblx0Ly8gU2VlIGhlcmUgZm9yIGRpc3BsYXkgdmFsdWVzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5XG5cdHJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxcblx0cmN1c3RvbVByb3AgPSAvXi0tLyxcblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH0sXG5cblx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiTW96XCIsIFwibXNcIiBdLFxuXHRlbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLnN0eWxlO1xuXG4vLyBSZXR1cm4gYSBjc3MgcHJvcGVydHkgbWFwcGVkIHRvIGEgcG90ZW50aWFsbHkgdmVuZG9yIHByZWZpeGVkIHByb3BlcnR5XG5mdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHtcblxuXHQvLyBTaG9ydGN1dCBmb3IgbmFtZXMgdGhhdCBhcmUgbm90IHZlbmRvciBwcmVmaXhlZFxuXHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWyAwIF0udG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoIDEgKSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0fVxufVxuXG4vLyBSZXR1cm4gYSBwcm9wZXJ0eSBtYXBwZWQgYWxvbmcgd2hhdCBqUXVlcnkuY3NzUHJvcHMgc3VnZ2VzdHMgb3IgdG9cbi8vIGEgdmVuZG9yIHByZWZpeGVkIHByb3BlcnR5LlxuZnVuY3Rpb24gZmluYWxQcm9wTmFtZSggbmFtZSApIHtcblx0dmFyIHJldCA9IGpRdWVyeS5jc3NQcm9wc1sgbmFtZSBdO1xuXHRpZiAoICFyZXQgKSB7XG5cdFx0cmV0ID0galF1ZXJ5LmNzc1Byb3BzWyBuYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHx8IG5hbWU7XG5cdH1cblx0cmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApIHtcblxuXHQvLyBBbnkgcmVsYXRpdmUgKCsvLSkgdmFsdWVzIGhhdmUgYWxyZWFkeSBiZWVuXG5cdC8vIG5vcm1hbGl6ZWQgYXQgdGhpcyBwb2ludFxuXHR2YXIgbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKTtcblx0cmV0dXJuIG1hdGNoZXMgP1xuXG5cdFx0Ly8gR3VhcmQgYWdhaW5zdCB1bmRlZmluZWQgXCJzdWJ0cmFjdFwiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3Ncblx0XHRNYXRoLm1heCggMCwgbWF0Y2hlc1sgMiBdIC0gKCBzdWJ0cmFjdCB8fCAwICkgKSArICggbWF0Y2hlc1sgMyBdIHx8IFwicHhcIiApIDpcblx0XHR2YWx1ZTtcbn1cblxuZnVuY3Rpb24gYm94TW9kZWxBZGp1c3RtZW50KCBlbGVtLCBkaW1lbnNpb24sIGJveCwgaXNCb3JkZXJCb3gsIHN0eWxlcywgY29tcHV0ZWRWYWwgKSB7XG5cdHZhciBpID0gZGltZW5zaW9uID09PSBcIndpZHRoXCIgPyAxIDogMCxcblx0XHRleHRyYSA9IDAsXG5cdFx0ZGVsdGEgPSAwO1xuXG5cdC8vIEFkanVzdG1lbnQgbWF5IG5vdCBiZSBuZWNlc3Nhcnlcblx0aWYgKCBib3ggPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSApIHtcblx0XHRyZXR1cm4gMDtcblx0fVxuXG5cdGZvciAoIDsgaSA8IDQ7IGkgKz0gMiApIHtcblxuXHRcdC8vIEJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpblxuXHRcdGlmICggYm94ID09PSBcIm1hcmdpblwiICkge1xuXHRcdFx0ZGVsdGEgKz0galF1ZXJ5LmNzcyggZWxlbSwgYm94ICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdC8vIElmIHdlIGdldCBoZXJlIHdpdGggYSBjb250ZW50LWJveCwgd2UncmUgc2Vla2luZyBcInBhZGRpbmdcIiBvciBcImJvcmRlclwiIG9yIFwibWFyZ2luXCJcblx0XHRpZiAoICFpc0JvcmRlckJveCApIHtcblxuXHRcdFx0Ly8gQWRkIHBhZGRpbmdcblx0XHRcdGRlbHRhICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBGb3IgXCJib3JkZXJcIiBvciBcIm1hcmdpblwiLCBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGJveCAhPT0gXCJwYWRkaW5nXCIgKSB7XG5cdFx0XHRcdGRlbHRhICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cblx0XHRcdC8vIEJ1dCBzdGlsbCBrZWVwIHRyYWNrIG9mIGl0IG90aGVyd2lzZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZXh0cmEgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdC8vIElmIHdlIGdldCBoZXJlIHdpdGggYSBib3JkZXItYm94IChjb250ZW50ICsgcGFkZGluZyArIGJvcmRlciksIHdlJ3JlIHNlZWtpbmcgXCJjb250ZW50XCIgb3Jcblx0XHQvLyBcInBhZGRpbmdcIiBvciBcIm1hcmdpblwiXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gRm9yIFwiY29udGVudFwiLCBzdWJ0cmFjdCBwYWRkaW5nXG5cdFx0XHRpZiAoIGJveCA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdGRlbHRhIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3IgXCJjb250ZW50XCIgb3IgXCJwYWRkaW5nXCIsIHN1YnRyYWN0IGJvcmRlclxuXHRcdFx0aWYgKCBib3ggIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdGRlbHRhIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWNjb3VudCBmb3IgcG9zaXRpdmUgY29udGVudC1ib3ggc2Nyb2xsIGd1dHRlciB3aGVuIHJlcXVlc3RlZCBieSBwcm92aWRpbmcgY29tcHV0ZWRWYWxcblx0aWYgKCAhaXNCb3JkZXJCb3ggJiYgY29tcHV0ZWRWYWwgPj0gMCApIHtcblxuXHRcdC8vIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBpcyBhIHJvdW5kZWQgc3VtIG9mIGNvbnRlbnQsIHBhZGRpbmcsIHNjcm9sbCBndXR0ZXIsIGFuZCBib3JkZXJcblx0XHQvLyBBc3N1bWluZyBpbnRlZ2VyIHNjcm9sbCBndXR0ZXIsIHN1YnRyYWN0IHRoZSByZXN0IGFuZCByb3VuZCBkb3duXG5cdFx0ZGVsdGEgKz0gTWF0aC5tYXgoIDAsIE1hdGguY2VpbChcblx0XHRcdGVsZW1bIFwib2Zmc2V0XCIgKyBkaW1lbnNpb25bIDAgXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKCAxICkgXSAtXG5cdFx0XHRjb21wdXRlZFZhbCAtXG5cdFx0XHRkZWx0YSAtXG5cdFx0XHRleHRyYSAtXG5cdFx0XHQwLjVcblx0XHQpICk7XG5cdH1cblxuXHRyZXR1cm4gZGVsdGE7XG59XG5cbmZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIGRpbWVuc2lvbiwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBjb21wdXRlZCBzdHlsZVxuXHR2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksXG5cdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBkaW1lbnNpb24sIHN0eWxlcyApLFxuXHRcdGlzQm9yZGVyQm94ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3g7XG5cblx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTU0XG5cdC8vIFJldHVybiBhIGNvbmZvdW5kaW5nIG5vbi1waXhlbCB2YWx1ZSBvciBmZWlnbiBpZ25vcmFuY2UsIGFzIGFwcHJvcHJpYXRlLlxuXHRpZiAoIHJudW1ub25weC50ZXN0KCB2YWwgKSApIHtcblx0XHRpZiAoICFleHRyYSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXHRcdHZhbCA9IFwiYXV0b1wiO1xuXHR9XG5cblx0Ly8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcblx0Ly8gZm9yIGdldENvbXB1dGVkU3R5bGUgc2lsZW50bHkgZmFsbHMgYmFjayB0byB0aGUgcmVsaWFibGUgZWxlbS5zdHlsZVxuXHR2YWx1ZUlzQm9yZGVyQm94ID0gdmFsdWVJc0JvcmRlckJveCAmJlxuXHRcdCggc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IHZhbCA9PT0gZWxlbS5zdHlsZVsgZGltZW5zaW9uIF0gKTtcblxuXHQvLyBGYWxsIGJhY2sgdG8gb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IHdoZW4gdmFsdWUgaXMgXCJhdXRvXCJcblx0Ly8gVGhpcyBoYXBwZW5zIGZvciBpbmxpbmUgZWxlbWVudHMgd2l0aCBubyBleHBsaWNpdCBzZXR0aW5nIChnaC0zNTcxKVxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4xIC0gNC4zIG9ubHlcblx0Ly8gQWxzbyB1c2Ugb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IGZvciBtaXNyZXBvcnRlZCBpbmxpbmUgZGltZW5zaW9ucyAoZ2gtMzYwMilcblx0aWYgKCB2YWwgPT09IFwiYXV0b1wiIHx8XG5cdFx0IXBhcnNlRmxvYXQoIHZhbCApICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiaW5saW5lXCIgKSB7XG5cblx0XHR2YWwgPSBlbGVtWyBcIm9mZnNldFwiICsgZGltZW5zaW9uWyAwIF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSggMSApIF07XG5cblx0XHQvLyBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgcHJvdmlkZSBib3JkZXItYm94IHZhbHVlc1xuXHRcdHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlO1xuXHR9XG5cblx0Ly8gTm9ybWFsaXplIFwiXCIgYW5kIGF1dG9cblx0dmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDtcblxuXHQvLyBBZGp1c3QgZm9yIHRoZSBlbGVtZW50J3MgYm94IG1vZGVsXG5cdHJldHVybiAoIHZhbCArXG5cdFx0Ym94TW9kZWxBZGp1c3RtZW50KFxuXHRcdFx0ZWxlbSxcblx0XHRcdGRpbWVuc2lvbixcblx0XHRcdGV4dHJhIHx8ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSxcblx0XHRcdHZhbHVlSXNCb3JkZXJCb3gsXG5cdFx0XHRzdHlsZXMsXG5cblx0XHRcdC8vIFByb3ZpZGUgdGhlIGN1cnJlbnQgY29tcHV0ZWQgc2l6ZSB0byByZXF1ZXN0IHNjcm9sbCBndXR0ZXIgY2FsY3VsYXRpb24gKGdoLTM1ODkpXG5cdFx0XHR2YWxcblx0XHQpXG5cdCkgKyBcInB4XCI7XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnRcIjogdHJ1ZSxcblx0XHRcImNvbHVtbkNvdW50XCI6IHRydWUsXG5cdFx0XCJmaWxsT3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwiZmxleEdyb3dcIjogdHJ1ZSxcblx0XHRcImZsZXhTaHJpbmtcIjogdHJ1ZSxcblx0XHRcImZvbnRXZWlnaHRcIjogdHJ1ZSxcblx0XHRcImxpbmVIZWlnaHRcIjogdHJ1ZSxcblx0XHRcIm9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcIm9yZGVyXCI6IHRydWUsXG5cdFx0XCJvcnBoYW5zXCI6IHRydWUsXG5cdFx0XCJ3aWRvd3NcIjogdHJ1ZSxcblx0XHRcInpJbmRleFwiOiB0cnVlLFxuXHRcdFwiem9vbVwiOiB0cnVlXG5cdH0sXG5cblx0Ly8gQWRkIGluIHByb3BlcnRpZXMgd2hvc2UgbmFtZXMgeW91IHdpc2ggdG8gZml4IGJlZm9yZVxuXHQvLyBzZXR0aW5nIG9yIGdldHRpbmcgdGhlIHZhbHVlXG5cdGNzc1Byb3BzOiB7fSxcblxuXHQvLyBHZXQgYW5kIHNldCB0aGUgc3R5bGUgcHJvcGVydHkgb24gYSBET00gTm9kZVxuXHRzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHtcblxuXHRcdC8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdGlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuXHRcdHZhciByZXQsIHR5cGUsIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBjYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdGlzQ3VzdG9tUHJvcCA9IHJjdXN0b21Qcm9wLnRlc3QoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZS4gV2UgZG9uJ3Rcblx0XHQvLyB3YW50IHRvIHF1ZXJ5IHRoZSB2YWx1ZSBpZiBpdCBpcyBhIENTUyBjdXN0b20gcHJvcGVydHlcblx0XHQvLyBzaW5jZSB0aGV5IGFyZSB1c2VyLWRlZmluZWQuXG5cdFx0aWYgKCAhaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0bmFtZSA9IGZpbmFsUHJvcE5hbWUoIG9yaWdOYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0cyBob29rIGZvciB0aGUgcHJlZml4ZWQgdmVyc2lvbiwgdGhlbiB1bnByZWZpeGVkIHZlcnNpb25cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIHNldHRpbmcgYSB2YWx1ZVxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cblx0XHRcdC8vIENvbnZlcnQgXCIrPVwiIG9yIFwiLT1cIiB0byByZWxhdGl2ZSBudW1iZXJzICgjNzM0NSlcblx0XHRcdGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiAmJiAoIHJldCA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmIHJldFsgMSBdICkge1xuXHRcdFx0XHR2YWx1ZSA9IGFkanVzdENTUyggZWxlbSwgbmFtZSwgcmV0ICk7XG5cblx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdHR5cGUgPSBcIm51bWJlclwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQgKCM3MTE2KVxuXHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIG51bWJlciB3YXMgcGFzc2VkIGluLCBhZGQgdGhlIHVuaXQgKGV4Y2VwdCBmb3IgY2VydGFpbiBDU1MgcHJvcGVydGllcylcblx0XHRcdGlmICggdHlwZSA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0dmFsdWUgKz0gcmV0ICYmIHJldFsgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgb3JpZ05hbWUgXSA/IFwiXCIgOiBcInB4XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gYmFja2dyb3VuZC0qIHByb3BzIGFmZmVjdCBvcmlnaW5hbCBjbG9uZSdzIHZhbHVlc1xuXHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0aWYgKCAhaG9va3MgfHwgISggXCJzZXRcIiBpbiBob29rcyApIHx8XG5cdFx0XHRcdCggdmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRpZiAoIGlzQ3VzdG9tUHJvcCApIHtcblx0XHRcdFx0XHRzdHlsZS5zZXRQcm9wZXJ0eSggbmFtZSwgdmFsdWUgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBub24tY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBmYWxzZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3Rcblx0XHRcdHJldHVybiBzdHlsZVsgbmFtZSBdO1xuXHRcdH1cblx0fSxcblxuXHRjc3M6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBleHRyYSwgc3R5bGVzICkge1xuXHRcdHZhciB2YWwsIG51bSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGNhbWVsQ2FzZSggbmFtZSApLFxuXHRcdFx0aXNDdXN0b21Qcm9wID0gcmN1c3RvbVByb3AudGVzdCggbmFtZSApO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lLiBXZSBkb24ndFxuXHRcdC8vIHdhbnQgdG8gbW9kaWZ5IHRoZSB2YWx1ZSBpZiBpdCBpcyBhIENTUyBjdXN0b20gcHJvcGVydHlcblx0XHQvLyBzaW5jZSB0aGV5IGFyZSB1c2VyLWRlZmluZWQuXG5cdFx0aWYgKCAhaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0bmFtZSA9IGZpbmFsUHJvcE5hbWUoIG9yaWdOYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gVHJ5IHByZWZpeGVkIG5hbWUgZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgbmFtZVxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlLCBpZiBhIHdheSB0byBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGV4aXN0cywgdXNlIHRoYXRcblx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IFwibm9ybWFsXCIgdG8gY29tcHV0ZWQgdmFsdWVcblx0XHRpZiAoIHZhbCA9PT0gXCJub3JtYWxcIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHtcblx0XHRcdHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIE1ha2UgbnVtZXJpYyBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpY1xuXHRcdGlmICggZXh0cmEgPT09IFwiXCIgfHwgZXh0cmEgKSB7XG5cdFx0XHRudW0gPSBwYXJzZUZsb2F0KCB2YWwgKTtcblx0XHRcdHJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBpc0Zpbml0ZSggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiBdLCBmdW5jdGlvbiggaSwgZGltZW5zaW9uICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIGRpbWVuc2lvbiBdID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0Ly8gQ2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtXG5cdFx0XHRcdC8vIGJ1dCBpdCBtdXN0IGhhdmUgYSBjdXJyZW50IGRpc3BsYXkgc3R5bGUgdGhhdCB3b3VsZCBiZW5lZml0XG5cdFx0XHRcdHJldHVybiByZGlzcGxheXN3YXAudGVzdCggalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApICYmXG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCtcblx0XHRcdFx0XHQvLyBUYWJsZSBjb2x1bW5zIGluIFNhZmFyaSBoYXZlIG5vbi16ZXJvIG9mZnNldFdpZHRoICYgemVyb1xuXHRcdFx0XHRcdC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIHVubGVzcyBkaXNwbGF5IGlzIGNoYW5nZWQuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdFx0XHRcdFx0Ly8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYSBkaXNjb25uZWN0ZWQgbm9kZVxuXHRcdFx0XHRcdC8vIGluIElFIHRocm93cyBhbiBlcnJvci5cblx0XHRcdFx0XHQoICFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoIHx8ICFlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICkgP1xuXHRcdFx0XHRcdFx0c3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBkaW1lbnNpb24sIGV4dHJhICk7XG5cdFx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgZGltZW5zaW9uLCBleHRyYSApO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSB7XG5cdFx0XHR2YXIgbWF0Y2hlcyxcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksXG5cdFx0XHRcdGlzQm9yZGVyQm94ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0c3VidHJhY3QgPSBleHRyYSAmJiBib3hNb2RlbEFkanVzdG1lbnQoXG5cdFx0XHRcdFx0ZWxlbSxcblx0XHRcdFx0XHRkaW1lbnNpb24sXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0aXNCb3JkZXJCb3gsXG5cdFx0XHRcdFx0c3R5bGVzXG5cdFx0XHRcdCk7XG5cblx0XHRcdC8vIEFjY291bnQgZm9yIHVucmVsaWFibGUgYm9yZGVyLWJveCBkaW1lbnNpb25zIGJ5IGNvbXBhcmluZyBvZmZzZXQqIHRvIGNvbXB1dGVkIGFuZFxuXHRcdFx0Ly8gZmFraW5nIGEgY29udGVudC1ib3ggdG8gZ2V0IGJvcmRlciBhbmQgcGFkZGluZyAoZ2gtMzY5OSlcblx0XHRcdGlmICggaXNCb3JkZXJCb3ggJiYgc3VwcG9ydC5zY3JvbGxib3hTaXplKCkgPT09IHN0eWxlcy5wb3NpdGlvbiApIHtcblx0XHRcdFx0c3VidHJhY3QgLT0gTWF0aC5jZWlsKFxuXHRcdFx0XHRcdGVsZW1bIFwib2Zmc2V0XCIgKyBkaW1lbnNpb25bIDAgXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKCAxICkgXSAtXG5cdFx0XHRcdFx0cGFyc2VGbG9hdCggc3R5bGVzWyBkaW1lbnNpb24gXSApIC1cblx0XHRcdFx0XHRib3hNb2RlbEFkanVzdG1lbnQoIGVsZW0sIGRpbWVuc2lvbiwgXCJib3JkZXJcIiwgZmFsc2UsIHN0eWxlcyApIC1cblx0XHRcdFx0XHQwLjVcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCB0byBwaXhlbHMgaWYgdmFsdWUgYWRqdXN0bWVudCBpcyBuZWVkZWRcblx0XHRcdGlmICggc3VidHJhY3QgJiYgKCBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiZcblx0XHRcdFx0KCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgIT09IFwicHhcIiApIHtcblxuXHRcdFx0XHRlbGVtLnN0eWxlWyBkaW1lbnNpb24gXSA9IHZhbHVlO1xuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5jc3MoIGVsZW0sIGRpbWVuc2lvbiApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApO1xuXHRcdH1cblx0fTtcbn0gKTtcblxualF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LFxuXHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdHJldHVybiAoIHBhcnNlRmxvYXQoIGN1ckNTUyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIgKSApIHx8XG5cdFx0XHRcdGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtXG5cdFx0XHRcdFx0c3dhcCggZWxlbSwgeyBtYXJnaW5MZWZ0OiAwIH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcblx0XHRcdFx0XHR9IClcblx0XHRcdFx0KSArIFwicHhcIjtcblx0XHR9XG5cdH1cbik7XG5cbi8vIFRoZXNlIGhvb2tzIGFyZSB1c2VkIGJ5IGFuaW1hdGUgdG8gZXhwYW5kIHByb3BlcnRpZXNcbmpRdWVyeS5lYWNoKCB7XG5cdG1hcmdpbjogXCJcIixcblx0cGFkZGluZzogXCJcIixcblx0Ym9yZGVyOiBcIldpZHRoXCJcbn0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHtcblx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0ZXhwYW5kZWQgPSB7fSxcblxuXHRcdFx0XHQvLyBBc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcblx0XHRcdFx0cGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdCggXCIgXCIgKSA6IFsgdmFsdWUgXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgNDsgaSsrICkge1xuXHRcdFx0XHRleHBhbmRlZFsgcHJlZml4ICsgY3NzRXhwYW5kWyBpIF0gKyBzdWZmaXggXSA9XG5cdFx0XHRcdFx0cGFydHNbIGkgXSB8fCBwYXJ0c1sgaSAtIDIgXSB8fCBwYXJ0c1sgMCBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXhwYW5kZWQ7XG5cdFx0fVxuXHR9O1xuXG5cdGlmICggcHJlZml4ICE9PSBcIm1hcmdpblwiICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRjc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgc3R5bGVzLCBsZW4sXG5cdFx0XHRcdG1hcCA9IHt9LFxuXHRcdFx0XHRpID0gMDtcblxuXHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCBuYW1lICkgKSB7XG5cdFx0XHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0XHRsZW4gPSBuYW1lLmxlbmd0aDtcblxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRtYXBbIG5hbWVbIGkgXSBdID0galF1ZXJ5LmNzcyggZWxlbSwgbmFtZVsgaSBdLCBmYWxzZSwgc3R5bGVzICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbWFwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSwgdmFsdWUgKSA6XG5cdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTtcblx0XHR9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fVxufSApO1xuXG5cbmZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHtcblx0cmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTtcbn1cbmpRdWVyeS5Ud2VlbiA9IFR3ZWVuO1xuXG5Ud2Vlbi5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBUd2Vlbixcblx0aW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkge1xuXHRcdHRoaXMuZWxlbSA9IGVsZW07XG5cdFx0dGhpcy5wcm9wID0gcHJvcDtcblx0XHR0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0O1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0Ly8gVXNlIGEgcHJvcGVydHkgb24gdGhlIGVsZW1lbnQgZGlyZWN0bHkgd2hlbiBpdCBpcyBub3QgYSBET00gZWxlbWVudCxcblx0XHRcdC8vIG9yIHdoZW4gdGhlcmUgaXMgbm8gbWF0Y2hpbmcgc3R5bGUgcHJvcGVydHkgdGhhdCBleGlzdHMuXG5cdFx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgIT09IDEgfHxcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdICE9IG51bGwgJiYgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07XG5cdFx0XHR9XG5cblx0XHRcdC8vIFBhc3NpbmcgYW4gZW1wdHkgc3RyaW5nIGFzIGEgM3JkIHBhcmFtZXRlciB0byAuY3NzIHdpbGwgYXV0b21hdGljYWxseVxuXHRcdFx0Ly8gYXR0ZW1wdCBhIHBhcnNlRmxvYXQgYW5kIGZhbGxiYWNrIHRvIGEgc3RyaW5nIGlmIHRoZSBwYXJzZSBmYWlscy5cblx0XHRcdC8vIFNpbXBsZSB2YWx1ZXMgc3VjaCBhcyBcIjEwcHhcIiBhcmUgcGFyc2VkIHRvIEZsb2F0O1xuXHRcdFx0Ly8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyBcInJvdGF0ZSgxcmFkKVwiIGFyZSByZXR1cm5lZCBhcy1pcy5cblx0XHRcdHJlc3VsdCA9IGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIFwiXCIgKTtcblxuXHRcdFx0Ly8gRW1wdHkgc3RyaW5ncywgbnVsbCwgdW5kZWZpbmVkIGFuZCBcImF1dG9cIiBhcmUgY29udmVydGVkIHRvIDAuXG5cdFx0XHRyZXR1cm4gIXJlc3VsdCB8fCByZXN1bHQgPT09IFwiYXV0b1wiID8gMCA6IHJlc3VsdDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8XG5cdFx0XHRcdFx0alF1ZXJ5LmNzc0hvb2tzWyB0d2Vlbi5wcm9wIF0gKSApIHtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCB0d2Vlbi5ub3cgKyB0d2Vlbi51bml0ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuLy8gUGFuaWMgYmFzZWQgYXBwcm9hY2ggdG8gc2V0dGluZyB0aGluZ3Mgb24gZGlzY29ubmVjdGVkIG5vZGVzXG5Ud2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wID0gVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7XG5cdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZWFzaW5nID0ge1xuXHRsaW5lYXI6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiBwO1xuXHR9LFxuXHRzd2luZzogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIDAuNSAtIE1hdGguY29zKCBwICogTWF0aC5QSSApIC8gMjtcblx0fSxcblx0X2RlZmF1bHQ6IFwic3dpbmdcIlxufTtcblxualF1ZXJ5LmZ4ID0gVHdlZW4ucHJvdG90eXBlLmluaXQ7XG5cbi8vIEJhY2sgY29tcGF0IDwxLjggZXh0ZW5zaW9uIHBvaW50XG5qUXVlcnkuZnguc3RlcCA9IHt9O1xuXG5cblxuXG52YXJcblx0ZnhOb3csIGluUHJvZ3Jlc3MsXG5cdHJmeHR5cGVzID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFxuXHRycnVuID0gL3F1ZXVlSG9va3MkLztcblxuZnVuY3Rpb24gc2NoZWR1bGUoKSB7XG5cdGlmICggaW5Qcm9ncmVzcyApIHtcblx0XHRpZiAoIGRvY3VtZW50LmhpZGRlbiA9PT0gZmFsc2UgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSApIHtcblx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHNjaGVkdWxlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBzY2hlZHVsZSwgalF1ZXJ5LmZ4LmludGVydmFsICk7XG5cdFx0fVxuXG5cdFx0alF1ZXJ5LmZ4LnRpY2soKTtcblx0fVxufVxuXG4vLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5XG5mdW5jdGlvbiBjcmVhdGVGeE5vdygpIHtcblx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9ICk7XG5cdHJldHVybiAoIGZ4Tm93ID0gRGF0ZS5ub3coKSApO1xufVxuXG4vLyBHZW5lcmF0ZSBwYXJhbWV0ZXJzIHRvIGNyZWF0ZSBhIHN0YW5kYXJkIGFuaW1hdGlvblxuZnVuY3Rpb24gZ2VuRngoIHR5cGUsIGluY2x1ZGVXaWR0aCApIHtcblx0dmFyIHdoaWNoLFxuXHRcdGkgPSAwLFxuXHRcdGF0dHJzID0geyBoZWlnaHQ6IHR5cGUgfTtcblxuXHQvLyBJZiB3ZSBpbmNsdWRlIHdpZHRoLCBzdGVwIHZhbHVlIGlzIDEgdG8gZG8gYWxsIGNzc0V4cGFuZCB2YWx1ZXMsXG5cdC8vIG90aGVyd2lzZSBzdGVwIHZhbHVlIGlzIDIgdG8gc2tpcCBvdmVyIExlZnQgYW5kIFJpZ2h0XG5cdGluY2x1ZGVXaWR0aCA9IGluY2x1ZGVXaWR0aCA/IDEgOiAwO1xuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgLSBpbmNsdWRlV2lkdGggKSB7XG5cdFx0d2hpY2ggPSBjc3NFeHBhbmRbIGkgXTtcblx0XHRhdHRyc1sgXCJtYXJnaW5cIiArIHdoaWNoIF0gPSBhdHRyc1sgXCJwYWRkaW5nXCIgKyB3aGljaCBdID0gdHlwZTtcblx0fVxuXG5cdGlmICggaW5jbHVkZVdpZHRoICkge1xuXHRcdGF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7XG5cdH1cblxuXHRyZXR1cm4gYXR0cnM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKCB2YWx1ZSwgcHJvcCwgYW5pbWF0aW9uICkge1xuXHR2YXIgdHdlZW4sXG5cdFx0Y29sbGVjdGlvbiA9ICggQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW10gKS5jb25jYXQoIEFuaW1hdGlvbi50d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICggdHdlZW4gPSBjb2xsZWN0aW9uWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgcHJvcCwgdmFsdWUgKSApICkge1xuXG5cdFx0XHQvLyBXZSdyZSBkb25lIHdpdGggdGhpcyBwcm9wZXJ0eVxuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHtcblx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIGhvb2tzLCBvbGRmaXJlLCBwcm9wVHdlZW4sIHJlc3RvcmVEaXNwbGF5LCBkaXNwbGF5LFxuXHRcdGlzQm94ID0gXCJ3aWR0aFwiIGluIHByb3BzIHx8IFwiaGVpZ2h0XCIgaW4gcHJvcHMsXG5cdFx0YW5pbSA9IHRoaXMsXG5cdFx0b3JpZyA9IHt9LFxuXHRcdHN0eWxlID0gZWxlbS5zdHlsZSxcblx0XHRoaWRkZW4gPSBlbGVtLm5vZGVUeXBlICYmIGlzSGlkZGVuV2l0aGluVHJlZSggZWxlbSApLFxuXHRcdGRhdGFTaG93ID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cblx0Ly8gUXVldWUtc2tpcHBpbmcgYW5pbWF0aW9ucyBoaWphY2sgdGhlIGZ4IGhvb2tzXG5cdGlmICggIW9wdHMucXVldWUgKSB7XG5cdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIFwiZnhcIiApO1xuXHRcdGlmICggaG9va3MudW5xdWV1ZWQgPT0gbnVsbCApIHtcblx0XHRcdGhvb2tzLnVucXVldWVkID0gMDtcblx0XHRcdG9sZGZpcmUgPSBob29rcy5lbXB0eS5maXJlO1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICFob29rcy51bnF1ZXVlZCApIHtcblx0XHRcdFx0XHRvbGRmaXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHRcdGhvb2tzLnVucXVldWVkKys7XG5cblx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIEVuc3VyZSB0aGUgY29tcGxldGUgaGFuZGxlciBpcyBjYWxsZWQgYmVmb3JlIHRoaXMgY29tcGxldGVzXG5cdFx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGhvb2tzLnVucXVldWVkLS07XG5cdFx0XHRcdGlmICggIWpRdWVyeS5xdWV1ZSggZWxlbSwgXCJmeFwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIERldGVjdCBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLnRlc3QoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIFByZXRlbmQgdG8gYmUgaGlkZGVuIGlmIHRoaXMgaXMgYSBcInNob3dcIiBhbmRcblx0XHRcdFx0Ly8gdGhlcmUgaXMgc3RpbGwgZGF0YSBmcm9tIGEgc3RvcHBlZCBzaG93L2hpZGVcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gXCJzaG93XCIgJiYgZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdGhpZGRlbiA9IHRydWU7XG5cblx0XHRcdFx0Ly8gSWdub3JlIGFsbCBvdGhlciBuby1vcCBzaG93L2hpZGUgZGF0YVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXHRcdH1cblx0fVxuXG5cdC8vIEJhaWwgb3V0IGlmIHRoaXMgaXMgYSBuby1vcCBsaWtlIC5oaWRlKCkuaGlkZSgpXG5cdHByb3BUd2VlbiA9ICFqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcHMgKTtcblx0aWYgKCAhcHJvcFR3ZWVuICYmIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gUmVzdHJpY3QgXCJvdmVyZmxvd1wiIGFuZCBcImRpc3BsYXlcIiBzdHlsZXMgZHVyaW5nIGJveCBhbmltYXRpb25zXG5cdGlmICggaXNCb3ggJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExLCBFZGdlIDEyIC0gMTVcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFIGRvZXMgbm90IGluZmVyIHRoZSBzaG9ydGhhbmRcblx0XHQvLyBmcm9tIGlkZW50aWNhbGx5LXZhbHVlZCBvdmVyZmxvd1ggYW5kIG92ZXJmbG93WSBhbmQgRWRnZSBqdXN0IG1pcnJvcnNcblx0XHQvLyB0aGUgb3ZlcmZsb3dYIHZhbHVlIHRoZXJlLlxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gSWRlbnRpZnkgYSBkaXNwbGF5IHR5cGUsIHByZWZlcnJpbmcgb2xkIHNob3cvaGlkZSBkYXRhIG92ZXIgdGhlIENTUyBjYXNjYWRlXG5cdFx0cmVzdG9yZURpc3BsYXkgPSBkYXRhU2hvdyAmJiBkYXRhU2hvdy5kaXNwbGF5O1xuXHRcdGlmICggcmVzdG9yZURpc3BsYXkgPT0gbnVsbCApIHtcblx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXHRcdH1cblx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0aWYgKCByZXN0b3JlRGlzcGxheSApIHtcblx0XHRcdFx0ZGlzcGxheSA9IHJlc3RvcmVEaXNwbGF5O1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBHZXQgbm9uZW1wdHkgdmFsdWUocykgYnkgdGVtcG9yYXJpbHkgZm9yY2luZyB2aXNpYmlsaXR5XG5cdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSwgdHJ1ZSApO1xuXHRcdFx0XHRyZXN0b3JlRGlzcGxheSA9IGVsZW0uc3R5bGUuZGlzcGxheSB8fCByZXN0b3JlRGlzcGxheTtcblx0XHRcdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFuaW1hdGUgaW5saW5lIGVsZW1lbnRzIGFzIGlubGluZS1ibG9ja1xuXHRcdGlmICggZGlzcGxheSA9PT0gXCJpbmxpbmVcIiB8fCBkaXNwbGF5ID09PSBcImlubGluZS1ibG9ja1wiICYmIHJlc3RvcmVEaXNwbGF5ICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZmxvYXRcIiApID09PSBcIm5vbmVcIiApIHtcblxuXHRcdFx0XHQvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlIGF0IHRoZSBlbmQgb2YgcHVyZSBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRcdFx0XHRpZiAoICFwcm9wVHdlZW4gKSB7XG5cdFx0XHRcdFx0YW5pbS5kb25lKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHN0eWxlLmRpc3BsYXkgPSByZXN0b3JlRGlzcGxheTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0aWYgKCByZXN0b3JlRGlzcGxheSA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0ZGlzcGxheSA9IHN0eWxlLmRpc3BsYXk7XG5cdFx0XHRcdFx0XHRyZXN0b3JlRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID8gXCJcIiA6IGRpc3BsYXk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmICggb3B0cy5vdmVyZmxvdyApIHtcblx0XHRzdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG5cdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gSW1wbGVtZW50IHNob3cvaGlkZSBhbmltYXRpb25zXG5cdHByb3BUd2VlbiA9IGZhbHNlO1xuXHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cblx0XHQvLyBHZW5lcmFsIHNob3cvaGlkZSBzZXR1cCBmb3IgdGhpcyBlbGVtZW50IGFuaW1hdGlvblxuXHRcdGlmICggIXByb3BUd2VlbiApIHtcblx0XHRcdGlmICggZGF0YVNob3cgKSB7XG5cdFx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSBkYXRhU2hvdy5oaWRkZW47XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRhdGFTaG93ID0gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBcImZ4c2hvd1wiLCB7IGRpc3BsYXk6IHJlc3RvcmVEaXNwbGF5IH0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RvcmUgaGlkZGVuL3Zpc2libGUgZm9yIHRvZ2dsZSBzbyBgLnN0b3AoKS50b2dnbGUoKWAgXCJyZXZlcnNlc1wiXG5cdFx0XHRpZiAoIHRvZ2dsZSApIHtcblx0XHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2hvdyBlbGVtZW50cyBiZWZvcmUgYW5pbWF0aW5nIHRoZW1cblx0XHRcdGlmICggaGlkZGVuICkge1xuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0sIHRydWUgKTtcblx0XHRcdH1cblxuXHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tbG9vcC1mdW5jICovXG5cblx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8qIGVzbGludC1lbmFibGUgbm8tbG9vcC1mdW5jICovXG5cblx0XHRcdFx0Ly8gVGhlIGZpbmFsIHN0ZXAgb2YgYSBcImhpZGVcIiBhbmltYXRpb24gaXMgYWN0dWFsbHkgaGlkaW5nIHRoZSBlbGVtZW50XG5cdFx0XHRcdGlmICggIWhpZGRlbiApIHtcblx0XHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFwiZnhzaG93XCIgKTtcblx0XHRcdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHQvLyBQZXItcHJvcGVydHkgc2V0dXBcblx0XHRwcm9wVHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblx0XHRpZiAoICEoIHByb3AgaW4gZGF0YVNob3cgKSApIHtcblx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSBwcm9wVHdlZW4uc3RhcnQ7XG5cdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0cHJvcFR3ZWVuLmVuZCA9IHByb3BUd2Vlbi5zdGFydDtcblx0XHRcdFx0cHJvcFR3ZWVuLnN0YXJ0ID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG5cdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cblx0Ly8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG5cdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdG5hbWUgPSBjYW1lbENhc2UoIGluZGV4ICk7XG5cdFx0ZWFzaW5nID0gc3BlY2lhbEVhc2luZ1sgbmFtZSBdO1xuXHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF07XG5cdFx0aWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0ZWFzaW5nID0gdmFsdWVbIDEgXTtcblx0XHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggIT09IG5hbWUgKSB7XG5cdFx0XHRwcm9wc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRkZWxldGUgcHJvcHNbIGluZGV4IF07XG5cdFx0fVxuXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcblx0XHRpZiAoIGhvb2tzICYmIFwiZXhwYW5kXCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWx1ZSA9IGhvb2tzLmV4cGFuZCggdmFsdWUgKTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXG5cdFx0XHQvLyBOb3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29uJ3Qgb3ZlcndyaXRlIGV4aXN0aW5nIGtleXMuXG5cdFx0XHQvLyBSZXVzaW5nICdpbmRleCcgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG5cdFx0XHRmb3IgKCBpbmRleCBpbiB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhKCBpbmRleCBpbiBwcm9wcyApICkge1xuXHRcdFx0XHRcdHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG5cdFx0XHRcdFx0c3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzcGVjaWFsRWFzaW5nWyBuYW1lIF0gPSBlYXNpbmc7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIEFuaW1hdGlvbiggZWxlbSwgcHJvcGVydGllcywgb3B0aW9ucyApIHtcblx0dmFyIHJlc3VsdCxcblx0XHRzdG9wcGVkLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBBbmltYXRpb24ucHJlZmlsdGVycy5sZW5ndGgsXG5cdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBEb24ndCBtYXRjaCBlbGVtIGluIHRoZSA6YW5pbWF0ZWQgc2VsZWN0b3Jcblx0XHRcdGRlbGV0ZSB0aWNrLmVsZW07XG5cdFx0fSApLFxuXHRcdHRpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdFx0cmVtYWluaW5nID0gTWF0aC5tYXgoIDAsIGFuaW1hdGlvbi5zdGFydFRpbWUgKyBhbmltYXRpb24uZHVyYXRpb24gLSBjdXJyZW50VGltZSApLFxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zIG9ubHlcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdICk7XG5cblx0XHRcdC8vIElmIHRoZXJlJ3MgbW9yZSB0byBkbywgeWllbGRcblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiB0aGlzIHdhcyBhbiBlbXB0eSBhbmltYXRpb24sIHN5bnRoZXNpemUgYSBmaW5hbCBwcm9ncmVzcyBub3RpZmljYXRpb25cblx0XHRcdGlmICggIWxlbmd0aCApIHtcblx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIDEsIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXNvbHZlIHRoZSBhbmltYXRpb24gYW5kIHJlcG9ydCBpdHMgY29uY2x1c2lvblxuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXHRcdGFuaW1hdGlvbiA9IGRlZmVycmVkLnByb21pc2UoIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRwcm9wczogalF1ZXJ5LmV4dGVuZCgge30sIHByb3BlcnRpZXMgKSxcblx0XHRcdG9wdHM6IGpRdWVyeS5leHRlbmQoIHRydWUsIHtcblx0XHRcdFx0c3BlY2lhbEVhc2luZzoge30sXG5cdFx0XHRcdGVhc2luZzogalF1ZXJ5LmVhc2luZy5fZGVmYXVsdFxuXHRcdFx0fSwgb3B0aW9ucyApLFxuXHRcdFx0b3JpZ2luYWxQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuXHRcdFx0b3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLFxuXHRcdFx0c3RhcnRUaW1lOiBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuXHRcdFx0ZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG5cdFx0XHR0d2VlbnM6IFtdLFxuXHRcdFx0Y3JlYXRlVHdlZW46IGZ1bmN0aW9uKCBwcm9wLCBlbmQgKSB7XG5cdFx0XHRcdHZhciB0d2VlbiA9IGpRdWVyeS5Ud2VlbiggZWxlbSwgYW5pbWF0aW9uLm9wdHMsIHByb3AsIGVuZCxcblx0XHRcdFx0XHRcdGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmdbIHByb3AgXSB8fCBhbmltYXRpb24ub3B0cy5lYXNpbmcgKTtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVucy5wdXNoKCB0d2VlbiApO1xuXHRcdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0XHR9LFxuXHRcdFx0c3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7XG5cdFx0XHRcdHZhciBpbmRleCA9IDAsXG5cblx0XHRcdFx0XHQvLyBJZiB3ZSBhcmUgZ29pbmcgdG8gdGhlIGVuZCwgd2Ugd2FudCB0byBydW4gYWxsIHRoZSB0d2VlbnNcblx0XHRcdFx0XHQvLyBvdGhlcndpc2Ugd2Ugc2tpcCB0aGlzIHBhcnRcblx0XHRcdFx0XHRsZW5ndGggPSBnb3RvRW5kID8gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGggOiAwO1xuXHRcdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0c3RvcHBlZCA9IHRydWU7XG5cdFx0XHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgMSwgMCBdICk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0fSApLFxuXHRcdHByb3BzID0gYW5pbWF0aW9uLnByb3BzO1xuXG5cdHByb3BGaWx0ZXIoIHByb3BzLCBhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nICk7XG5cblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRyZXN1bHQgPSBBbmltYXRpb24ucHJlZmlsdGVyc1sgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIGVsZW0sIHByb3BzLCBhbmltYXRpb24ub3B0cyApO1xuXHRcdGlmICggcmVzdWx0ICkge1xuXHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCByZXN1bHQuc3RvcCApICkge1xuXHRcdFx0XHRqUXVlcnkuX3F1ZXVlSG9va3MoIGFuaW1hdGlvbi5lbGVtLCBhbmltYXRpb24ub3B0cy5xdWV1ZSApLnN0b3AgPVxuXHRcdFx0XHRcdHJlc3VsdC5zdG9wLmJpbmQoIHJlc3VsdCApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdH1cblxuXHRqUXVlcnkubWFwKCBwcm9wcywgY3JlYXRlVHdlZW4sIGFuaW1hdGlvbiApO1xuXG5cdGlmICggaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHtcblx0XHRhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTtcblx0fVxuXG5cdC8vIEF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdGFuaW1hdGlvblxuXHRcdC5wcm9ncmVzcyggYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MgKVxuXHRcdC5kb25lKCBhbmltYXRpb24ub3B0cy5kb25lLCBhbmltYXRpb24ub3B0cy5jb21wbGV0ZSApXG5cdFx0LmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKVxuXHRcdC5hbHdheXMoIGFuaW1hdGlvbi5vcHRzLmFsd2F5cyApO1xuXG5cdGpRdWVyeS5meC50aW1lcihcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aWNrLCB7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0YW5pbTogYW5pbWF0aW9uLFxuXHRcdFx0cXVldWU6IGFuaW1hdGlvbi5vcHRzLnF1ZXVlXG5cdFx0fSApXG5cdCk7XG5cblx0cmV0dXJuIGFuaW1hdGlvbjtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXJzOiB7XG5cdFx0XCIqXCI6IFsgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuXHRcdFx0dmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKTtcblx0XHRcdGFkanVzdENTUyggdHdlZW4uZWxlbSwgcHJvcCwgcmNzc051bS5leGVjKCB2YWx1ZSApLCB0d2VlbiApO1xuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH0gXVxuXHR9LFxuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuXHRcdFx0Y2FsbGJhY2sgPSBwcm9wcztcblx0XHRcdHByb3BzID0gWyBcIipcIiBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwcm9wcyA9IHByb3BzLm1hdGNoKCBybm90aHRtbHdoaXRlICk7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0cHJvcCA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0QW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gPSBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXTtcblx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9LFxuXG5cdHByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLFxuXG5cdHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuXHRcdGlmICggcHJlcGVuZCApIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcblx0dmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuXHRcdGNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8XG5cdFx0XHRpc0Z1bmN0aW9uKCBzcGVlZCApICYmIHNwZWVkLFxuXHRcdGR1cmF0aW9uOiBzcGVlZCxcblx0XHRlYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdC8vIEdvIHRvIHRoZSBlbmQgc3RhdGUgaWYgZnggYXJlIG9mZlxuXHRpZiAoIGpRdWVyeS5meC5vZmYgKSB7XG5cdFx0b3B0LmR1cmF0aW9uID0gMDtcblxuXHR9IGVsc2Uge1xuXHRcdGlmICggdHlwZW9mIG9wdC5kdXJhdGlvbiAhPT0gXCJudW1iZXJcIiApIHtcblx0XHRcdGlmICggb3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgKSB7XG5cdFx0XHRcdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5zcGVlZHNbIG9wdC5kdXJhdGlvbiBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvcHQuZHVyYXRpb24gPSBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIE5vcm1hbGl6ZSBvcHQucXVldWUgLSB0cnVlL3VuZGVmaW5lZC9udWxsIC0+IFwiZnhcIlxuXHRpZiAoIG9wdC5xdWV1ZSA9PSBudWxsIHx8IG9wdC5xdWV1ZSA9PT0gdHJ1ZSApIHtcblx0XHRvcHQucXVldWUgPSBcImZ4XCI7XG5cdH1cblxuXHQvLyBRdWV1ZWluZ1xuXHRvcHQub2xkID0gb3B0LmNvbXBsZXRlO1xuXG5cdG9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGZhZGVUbzogZnVuY3Rpb24oIHNwZWVkLCB0bywgZWFzaW5nLCBjYWxsYmFjayApIHtcblxuXHRcdC8vIFNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMFxuXHRcdHJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW5XaXRoaW5UcmVlICkuY3NzKCBcIm9wYWNpdHlcIiwgMCApLnNob3coKVxuXG5cdFx0XHQvLyBBbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcblx0XHRcdC5lbmQoKS5hbmltYXRlKCB7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBPcGVyYXRlIG9uIGEgY29weSBvZiBwcm9wIHNvIHBlci1wcm9wZXJ0eSBlYXNpbmcgd29uJ3QgYmUgbG9zdFxuXHRcdFx0XHR2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cblx0XHRcdFx0Ly8gRW1wdHkgYW5pbWF0aW9ucywgb3IgZmluaXNoaW5nIHJlc29sdmVzIGltbWVkaWF0ZWx5XG5cdFx0XHRcdGlmICggZW1wdHkgfHwgZGF0YVByaXYuZ2V0KCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG5cdFx0XHRcdFx0YW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjtcblxuXHRcdHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cblx0XHRcdHRoaXMuZWFjaCggZG9BbmltYXRpb24gKSA6XG5cdFx0XHR0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7XG5cdH0sXG5cdHN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkge1xuXHRcdHZhciBzdG9wUXVldWUgPSBmdW5jdGlvbiggaG9va3MgKSB7XG5cdFx0XHR2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdHN0b3AoIGdvdG9FbmQgKTtcblx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuXHRcdFx0Y2xlYXJRdWV1ZSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGNsZWFyUXVldWUgJiYgdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBkZXF1ZXVlID0gdHJ1ZSxcblx0XHRcdFx0aW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArIFwicXVldWVIb29rc1wiLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICk7XG5cblx0XHRcdGlmICggaW5kZXggKSB7XG5cdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG5cdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGluZGV4IGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7XG5cdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJlxuXHRcdFx0XHRcdCggdHlwZSA9PSBudWxsIHx8IHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApICkge1xuXG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuXHRcdFx0XHRcdGRlcXVldWUgPSBmYWxzZTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWQuXG5cdFx0XHQvLyBUaW1lcnMgY3VycmVudGx5IHdpbGwgY2FsbCB0aGVpciBjb21wbGV0ZSBjYWxsYmFja3MsIHdoaWNoXG5cdFx0XHQvLyB3aWxsIGRlcXVldWUgYnV0IG9ubHkgaWYgdGhleSB3ZXJlIGdvdG9FbmQuXG5cdFx0XHRpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXHRmaW5pc2g6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdGlmICggdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICksXG5cdFx0XHRcdHF1ZXVlID0gZGF0YVsgdHlwZSArIFwicXVldWVcIiBdLFxuXHRcdFx0XHRob29rcyA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlSG9va3NcIiBdLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRsZW5ndGggPSBxdWV1ZSA/IHF1ZXVlLmxlbmd0aCA6IDA7XG5cblx0XHRcdC8vIEVuYWJsZSBmaW5pc2hpbmcgZmxhZyBvbiBwcml2YXRlIGRhdGFcblx0XHRcdGRhdGEuZmluaXNoID0gdHJ1ZTtcblxuXHRcdFx0Ly8gRW1wdHkgdGhlIHF1ZXVlIGZpcnN0XG5cdFx0XHRqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7XG5cblx0XHRcdGlmICggaG9va3MgJiYgaG9va3Muc3RvcCApIHtcblx0XHRcdFx0aG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmIHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYW5pbWF0aW9ucyBpbiB0aGUgb2xkIHF1ZXVlIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0aWYgKCBxdWV1ZVsgaW5kZXggXSAmJiBxdWV1ZVsgaW5kZXggXS5maW5pc2ggKSB7XG5cdFx0XHRcdFx0cXVldWVbIGluZGV4IF0uZmluaXNoLmNhbGwoIHRoaXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUdXJuIG9mZiBmaW5pc2hpbmcgZmxhZ1xuXHRcdFx0ZGVsZXRlIGRhdGEuZmluaXNoO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdHZhciBjc3NGbiA9IGpRdWVyeS5mblsgbmFtZSBdO1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gc3BlZWQgPT0gbnVsbCB8fCB0eXBlb2Ygc3BlZWQgPT09IFwiYm9vbGVhblwiID9cblx0XHRcdGNzc0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSA6XG5cdFx0XHR0aGlzLmFuaW1hdGUoIGdlbkZ4KCBuYW1lLCB0cnVlICksIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59ICk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKCB7XG5cdHNsaWRlRG93bjogZ2VuRngoIFwic2hvd1wiICksXG5cdHNsaWRlVXA6IGdlbkZ4KCBcImhpZGVcIiApLFxuXHRzbGlkZVRvZ2dsZTogZ2VuRngoIFwidG9nZ2xlXCIgKSxcblx0ZmFkZUluOiB7IG9wYWNpdHk6IFwic2hvd1wiIH0sXG5cdGZhZGVPdXQ6IHsgb3BhY2l0eTogXCJoaWRlXCIgfSxcblx0ZmFkZVRvZ2dsZTogeyBvcGFjaXR5OiBcInRvZ2dsZVwiIH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS50aW1lcnMgPSBbXTtcbmpRdWVyeS5meC50aWNrID0gZnVuY3Rpb24oKSB7XG5cdHZhciB0aW1lcixcblx0XHRpID0gMCxcblx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzO1xuXG5cdGZ4Tm93ID0gRGF0ZS5ub3coKTtcblxuXHRmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7XG5cdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblxuXHRcdC8vIFJ1biB0aGUgdGltZXIgYW5kIHNhZmVseSByZW1vdmUgaXQgd2hlbiBkb25lIChhbGxvd2luZyBmb3IgZXh0ZXJuYWwgcmVtb3ZhbClcblx0XHRpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcblx0XHRcdHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0b3AoKTtcblx0fVxuXHRmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0alF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuXHRqUXVlcnkuZnguc3RhcnQoKTtcbn07XG5cbmpRdWVyeS5meC5pbnRlcnZhbCA9IDEzO1xualF1ZXJ5LmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cdGlmICggaW5Qcm9ncmVzcyApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpblByb2dyZXNzID0gdHJ1ZTtcblx0c2NoZWR1bGUoKTtcbn07XG5cbmpRdWVyeS5meC5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdGluUHJvZ3Jlc3MgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcblx0c2xvdzogNjAwLFxuXHRmYXN0OiAyMDAsXG5cblx0Ly8gRGVmYXVsdCBzcGVlZFxuXHRfZGVmYXVsdDogNDAwXG59O1xuXG5cbi8vIEJhc2VkIG9mZiBvZiB0aGUgcGx1Z2luIGJ5IENsaW50IEhlbGZlcnMsIHdpdGggcGVybWlzc2lvbi5cbi8vIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDEwMDMyNDAxNDc0Ny9odHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvXG5qUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcblx0dGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcblx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG5cdFx0dmFyIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCggbmV4dCwgdGltZSApO1xuXHRcdGhvb2tzLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXQgKTtcblx0XHR9O1xuXHR9ICk7XG59O1xuXG5cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApLFxuXHRcdHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic2VsZWN0XCIgKSxcblx0XHRvcHQgPSBzZWxlY3QuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwib3B0aW9uXCIgKSApO1xuXG5cdGlucHV0LnR5cGUgPSBcImNoZWNrYm94XCI7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMyBvbmx5XG5cdC8vIERlZmF1bHQgdmFsdWUgZm9yIGEgY2hlY2tib3ggc2hvdWxkIGJlIFwib25cIlxuXHRzdXBwb3J0LmNoZWNrT24gPSBpbnB1dC52YWx1ZSAhPT0gXCJcIjtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gTXVzdCBhY2Nlc3Mgc2VsZWN0ZWRJbmRleCB0byBtYWtlIGRlZmF1bHQgb3B0aW9ucyBzZWxlY3Rcblx0c3VwcG9ydC5vcHRTZWxlY3RlZCA9IG9wdC5zZWxlY3RlZDtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gQW4gaW5wdXQgbG9zZXMgaXRzIHZhbHVlIGFmdGVyIGJlY29taW5nIGEgcmFkaW9cblx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblx0aW5wdXQudmFsdWUgPSBcInRcIjtcblx0aW5wdXQudHlwZSA9IFwicmFkaW9cIjtcblx0c3VwcG9ydC5yYWRpb1ZhbHVlID0gaW5wdXQudmFsdWUgPT09IFwidFwiO1xufSApKCk7XG5cblxudmFyIGJvb2xIb29rLFxuXHRhdHRySGFuZGxlID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRhdHRyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgalF1ZXJ5LmF0dHIsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXG5cdHJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBuYW1lICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHRhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBEb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuXHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5wcm9wKCBlbGVtLCBuYW1lLCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdC8vIEF0dHJpYnV0ZSBob29rcyBhcmUgZGV0ZXJtaW5lZCBieSB0aGUgbG93ZXJjYXNlIHZlcnNpb25cblx0XHQvLyBHcmFiIG5lY2Vzc2FyeSBob29rIGlmIG9uZSBpcyBkZWZpbmVkXG5cdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUudG9Mb3dlckNhc2UoKSBdIHx8XG5cdFx0XHRcdCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgPyBib29sSG9vayA6IHVuZGVmaW5lZCApO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggdmFsdWUgPT09IG51bGwgKSB7XG5cdFx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdCggcmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApICkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIHZhbHVlICsgXCJcIiApO1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblxuXHRcdHJldCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdC8vIE5vbi1leGlzdGVudCBhdHRyaWJ1dGVzIHJldHVybiBudWxsLCB3ZSBub3JtYWxpemUgdG8gdW5kZWZpbmVkXG5cdFx0cmV0dXJuIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xuXHR9LFxuXG5cdGF0dHJIb29rczoge1xuXHRcdHR5cGU6IHtcblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICFzdXBwb3J0LnJhZGlvVmFsdWUgJiYgdmFsdWUgPT09IFwicmFkaW9cIiAmJlxuXHRcdFx0XHRcdG5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR2YXIgdmFsID0gZWxlbS52YWx1ZTtcblx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIHZhbHVlICk7XG5cdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnZhbHVlID0gdmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdHZhciBuYW1lLFxuXHRcdFx0aSA9IDAsXG5cblx0XHRcdC8vIEF0dHJpYnV0ZSBuYW1lcyBjYW4gY29udGFpbiBub24tSFRNTCB3aGl0ZXNwYWNlIGNoYXJhY3RlcnNcblx0XHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2F0dHJpYnV0ZXMtMlxuXHRcdFx0YXR0ck5hbWVzID0gdmFsdWUgJiYgdmFsdWUubWF0Y2goIHJub3RodG1sd2hpdGUgKTtcblxuXHRcdGlmICggYXR0ck5hbWVzICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHR3aGlsZSAoICggbmFtZSA9IGF0dHJOYW1lc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlc1xuYm9vbEhvb2sgPSB7XG5cdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkge1xuXHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcblxualF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXFx3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgZ2V0dGVyID0gYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7XG5cblx0YXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciByZXQsIGhhbmRsZSxcblx0XHRcdGxvd2VyY2FzZU5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRpZiAoICFpc1hNTCApIHtcblxuXHRcdFx0Ly8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcCBieSB0ZW1wb3JhcmlseSByZW1vdmluZyB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlIGdldHRlclxuXHRcdFx0aGFuZGxlID0gYXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdO1xuXHRcdFx0YXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdID0gcmV0O1xuXHRcdFx0cmV0ID0gZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApICE9IG51bGwgP1xuXHRcdFx0XHRsb3dlcmNhc2VOYW1lIDpcblx0XHRcdFx0bnVsbDtcblx0XHRcdGF0dHJIYW5kbGVbIGxvd2VyY2FzZU5hbWUgXSA9IGhhbmRsZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcbn0gKTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkucHJvcCwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlUHJvcDogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIEZpeCBuYW1lIGFuZCBhdHRhY2ggaG9va3Ncblx0XHRcdG5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKCBlbGVtWyBuYW1lIF0gPSB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblxuXHRcdHJldHVybiBlbGVtWyBuYW1lIF07XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdFx0XHQvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGVcblx0XHRcdFx0Ly8gY29ycmVjdCB2YWx1ZSB3aGVuIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0XG5cdFx0XHRcdC8vIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE0MTExNjIzMzM0Ny9odHRwOi8vZmx1aWRwcm9qZWN0Lm9yZy9ibG9nLzIwMDgvMDEvMDkvZ2V0dGluZy1zZXR0aW5nLWFuZC1yZW1vdmluZy10YWJpbmRleC12YWx1ZXMtd2l0aC1qYXZhc2NyaXB0L1xuXHRcdFx0XHQvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKVxuXHRcdFx0XHR2YXIgdGFiaW5kZXggPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInRhYmluZGV4XCIgKTtcblxuXHRcdFx0XHRpZiAoIHRhYmluZGV4ICkge1xuXHRcdFx0XHRcdHJldHVybiBwYXJzZUludCggdGFiaW5kZXgsIDEwICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0cmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHxcblx0XHRcdFx0XHRyY2xpY2thYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSAmJlxuXHRcdFx0XHRcdGVsZW0uaHJlZlxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0cHJvcEZpeDoge1xuXHRcdFwiZm9yXCI6IFwiaHRtbEZvclwiLFxuXHRcdFwiY2xhc3NcIjogXCJjbGFzc05hbWVcIlxuXHR9XG59ICk7XG5cbi8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuLy8gQWNjZXNzaW5nIHRoZSBzZWxlY3RlZEluZGV4IHByb3BlcnR5XG4vLyBmb3JjZXMgdGhlIGJyb3dzZXIgdG8gcmVzcGVjdCBzZXR0aW5nIHNlbGVjdGVkXG4vLyBvbiB0aGUgb3B0aW9uXG4vLyBUaGUgZ2V0dGVyIGVuc3VyZXMgYSBkZWZhdWx0IG9wdGlvbiBpcyBzZWxlY3RlZFxuLy8gd2hlbiBpbiBhbiBvcHRncm91cFxuLy8gZXNsaW50IHJ1bGUgXCJuby11bnVzZWQtZXhwcmVzc2lvbnNcIiBpcyBkaXNhYmxlZCBmb3IgdGhpcyBjb2RlXG4vLyBzaW5jZSBpdCBjb25zaWRlcnMgc3VjaCBhY2Nlc3Npb25zIG5vb3BcbmlmICggIXN1cHBvcnQub3B0U2VsZWN0ZWQgKSB7XG5cdGpRdWVyeS5wcm9wSG9va3Muc2VsZWN0ZWQgPSB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0LyogZXNsaW50IG5vLXVudXNlZC1leHByZXNzaW9uczogXCJvZmZcIiAqL1xuXG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdC8qIGVzbGludCBuby11bnVzZWQtZXhwcmVzc2lvbnM6IFwib2ZmXCIgKi9cblxuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICkge1xuXHRcdFx0XHRwYXJlbnQuc2VsZWN0ZWRJbmRleDtcblxuXHRcdFx0XHRpZiAoIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKCBbXG5cdFwidGFiSW5kZXhcIixcblx0XCJyZWFkT25seVwiLFxuXHRcIm1heExlbmd0aFwiLFxuXHRcImNlbGxTcGFjaW5nXCIsXG5cdFwiY2VsbFBhZGRpbmdcIixcblx0XCJyb3dTcGFuXCIsXG5cdFwiY29sU3BhblwiLFxuXHRcInVzZU1hcFwiLFxuXHRcImZyYW1lQm9yZGVyXCIsXG5cdFwiY29udGVudEVkaXRhYmxlXCJcbl0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkucHJvcEZpeFsgdGhpcy50b0xvd2VyQ2FzZSgpIF0gPSB0aGlzO1xufSApO1xuXG5cblxuXG5cdC8vIFN0cmlwIGFuZCBjb2xsYXBzZSB3aGl0ZXNwYWNlIGFjY29yZGluZyB0byBIVE1MIHNwZWNcblx0Ly8gaHR0cHM6Ly9pbmZyYS5zcGVjLndoYXR3Zy5vcmcvI3N0cmlwLWFuZC1jb2xsYXBzZS1hc2NpaS13aGl0ZXNwYWNlXG5cdGZ1bmN0aW9uIHN0cmlwQW5kQ29sbGFwc2UoIHZhbHVlICkge1xuXHRcdHZhciB0b2tlbnMgPSB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdO1xuXHRcdHJldHVybiB0b2tlbnMuam9pbiggXCIgXCIgKTtcblx0fVxuXG5cbmZ1bmN0aW9uIGdldENsYXNzKCBlbGVtICkge1xuXHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiApIHx8IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZXNUb0FycmF5KCB2YWx1ZSApIHtcblx0aWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gdmFsdWUubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXTtcblx0fVxuXHRyZXR1cm4gW107XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRpID0gMDtcblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5hZGRDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0Y2xhc3NlcyA9IGNsYXNzZXNUb0FycmF5KCB2YWx1ZSApO1xuXG5cdFx0aWYgKCBjbGFzc2VzLmxlbmd0aCApIHtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0Y3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApO1xuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBjdXJWYWx1ZSApICsgXCIgXCIgKTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBzdHJpcEFuZENvbGxhcHNlKCBjdXIgKTtcblx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiwgZmluYWxWYWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkucmVtb3ZlQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hdHRyKCBcImNsYXNzXCIsIFwiXCIgKTtcblx0XHR9XG5cblx0XHRjbGFzc2VzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIGNsYXNzZXMubGVuZ3RoICkge1xuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cblx0XHRcdFx0Ly8gVGhpcyBleHByZXNzaW9uIGlzIGhlcmUgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSBhZGRDbGFzcylcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIFwiIFwiICsgc3RyaXBBbmRDb2xsYXBzZSggY3VyVmFsdWUgKSArIFwiIFwiICk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPiAtMSApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBzdHJpcEFuZENvbGxhcHNlKCBjdXIgKTtcblx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiwgZmluYWxWYWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkge1xuXHRcdHZhciB0eXBlID0gdHlwZW9mIHZhbHVlLFxuXHRcdFx0aXNWYWxpZFZhbHVlID0gdHlwZSA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KCB2YWx1ZSApO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGVWYWwgPT09IFwiYm9vbGVhblwiICYmIGlzVmFsaWRWYWx1ZSApIHtcblx0XHRcdHJldHVybiBzdGF0ZVZhbCA/IHRoaXMuYWRkQ2xhc3MoIHZhbHVlICkgOiB0aGlzLnJlbW92ZUNsYXNzKCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS50b2dnbGVDbGFzcyhcblx0XHRcdFx0XHR2YWx1ZS5jYWxsKCB0aGlzLCBpLCBnZXRDbGFzcyggdGhpcyApLCBzdGF0ZVZhbCApLFxuXHRcdFx0XHRcdHN0YXRlVmFsXG5cdFx0XHRcdCk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY2xhc3NOYW1lLCBpLCBzZWxmLCBjbGFzc05hbWVzO1xuXG5cdFx0XHRpZiAoIGlzVmFsaWRWYWx1ZSApIHtcblxuXHRcdFx0XHQvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuXHRcdFx0XHRpID0gMDtcblx0XHRcdFx0c2VsZiA9IGpRdWVyeSggdGhpcyApO1xuXHRcdFx0XHRjbGFzc05hbWVzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRcdFx0d2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdFx0Y2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTtcblx0XHRcdFx0aWYgKCBjbGFzc05hbWUgKSB7XG5cblx0XHRcdFx0XHQvLyBTdG9yZSBjbGFzc05hbWUgaWYgc2V0XG5cdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgY2xhc3NOYW1lICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxuXHRcdFx0XHQvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxuXHRcdFx0XHQvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxuXHRcdFx0XHQvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG5cdFx0XHRcdGlmICggdGhpcy5zZXRBdHRyaWJ1dGUgKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIixcblx0XHRcdFx0XHRcdGNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0XHRcdFx0XCJcIiA6XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiICkgfHwgXCJcIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0aGFzQ2xhc3M6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgY2xhc3NOYW1lLCBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRjbGFzc05hbWUgPSBcIiBcIiArIHNlbGVjdG9yICsgXCIgXCI7XG5cdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBnZXRDbGFzcyggZWxlbSApICkgKyBcIiBcIiApLmluZGV4T2YoIGNsYXNzTmFtZSApID4gLTEgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59ICk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHZhbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBob29rcywgcmV0LCB2YWx1ZUlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8XG5cdFx0XHRcdFx0alF1ZXJ5LnZhbEhvb2tzWyBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0XHRpZiAoIGhvb2tzICYmXG5cdFx0XHRcdFx0XCJnZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSApICE9PSB1bmRlZmluZWRcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldCA9IGVsZW0udmFsdWU7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRpZiAoIHR5cGVvZiByZXQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJldC5yZXBsYWNlKCBycmV0dXJuLCBcIlwiICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBIYW5kbGUgY2FzZXMgd2hlcmUgdmFsdWUgaXMgbnVsbC91bmRlZiBvciBudW1iZXJcblx0XHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID8gXCJcIiA6IHJldDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhbHVlSXNGdW5jdGlvbiA9IGlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdHZhciB2YWw7XG5cblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHZhbHVlSXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggQXJyYXkuaXNBcnJheSggdmFsICkgKSB7XG5cdFx0XHRcdHZhbCA9IGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIjtcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoIFwic2V0XCIgaW4gaG9va3MgKSB8fCBob29rcy5zZXQoIHRoaXMsIHZhbCwgXCJ2YWx1ZVwiICkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dGhpcy52YWx1ZSA9IHZhbDtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHR2YWxIb29rczoge1xuXHRcdG9wdGlvbjoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0XHR2YXIgdmFsID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ2YWx1ZVwiICk7XG5cdFx0XHRcdHJldHVybiB2YWwgIT0gbnVsbCA/XG5cdFx0XHRcdFx0dmFsIDpcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9MTAgLSAxMSBvbmx5XG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdC8vIFN0cmlwIGFuZCBjb2xsYXBzZSB3aGl0ZXNwYWNlXG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLXdoaXRlc3BhY2Vcblx0XHRcdFx0XHRzdHJpcEFuZENvbGxhcHNlKCBqUXVlcnkudGV4dCggZWxlbSApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLCBpLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIixcblx0XHRcdFx0XHR2YWx1ZXMgPSBvbmUgPyBudWxsIDogW10sXG5cdFx0XHRcdFx0bWF4ID0gb25lID8gaW5kZXggKyAxIDogb3B0aW9ucy5sZW5ndGg7XG5cblx0XHRcdFx0aWYgKCBpbmRleCA8IDAgKSB7XG5cdFx0XHRcdFx0aSA9IG1heDtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGkgPSBvbmUgPyBpbmRleCA6IDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5cdFx0XHRcdFx0Ly8gSUU4LTkgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpXG5cdFx0XHRcdFx0aWYgKCAoIG9wdGlvbi5zZWxlY3RlZCB8fCBpID09PSBpbmRleCApICYmXG5cblx0XHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuXHRcdFx0XHRcdFx0XHQhb3B0aW9uLmRpc2FibGVkICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8XG5cdFx0XHRcdFx0XHRcdFx0IW5vZGVOYW1lKCBvcHRpb24ucGFyZW50Tm9kZSwgXCJvcHRncm91cFwiICkgKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gR2V0IHRoZSBzcGVjaWZpYyB2YWx1ZSBmb3IgdGhlIG9wdGlvblxuXHRcdFx0XHRcdFx0dmFsdWUgPSBqUXVlcnkoIG9wdGlvbiApLnZhbCgpO1xuXG5cdFx0XHRcdFx0XHQvLyBXZSBkb24ndCBuZWVkIGFuIGFycmF5IGZvciBvbmUgc2VsZWN0c1xuXHRcdFx0XHRcdFx0aWYgKCBvbmUgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gTXVsdGktU2VsZWN0cyByZXR1cm4gYW4gYXJyYXlcblx0XHRcdFx0XHRcdHZhbHVlcy5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIG9wdGlvblNldCwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0dmFsdWVzID0galF1ZXJ5Lm1ha2VBcnJheSggdmFsdWUgKSxcblx0XHRcdFx0XHRpID0gb3B0aW9ucy5sZW5ndGg7XG5cblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXG5cdFx0XHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblxuXHRcdFx0XHRcdGlmICggb3B0aW9uLnNlbGVjdGVkID1cblx0XHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID4gLTFcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdG9wdGlvblNldCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXRcblx0XHRcdFx0aWYgKCAhb3B0aW9uU2V0ICkge1xuXHRcdFx0XHRcdGVsZW0uc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaCggWyBcInJhZGlvXCIsIFwiY2hlY2tib3hcIiBdLCBmdW5jdGlvbigpIHtcblx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0gPSB7XG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoIGVsZW0gKS52YWwoKSwgdmFsdWUgKSA+IC0xICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7XG5cdFx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBudWxsID8gXCJvblwiIDogZWxlbS52YWx1ZTtcblx0XHR9O1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIFJldHVybiBqUXVlcnkgZm9yIGF0dHJpYnV0ZXMtb25seSBpbmNsdXNpb25cblxuXG5zdXBwb3J0LmZvY3VzaW4gPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG52YXIgcmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sXG5cdHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrID0gZnVuY3Rpb24oIGUgKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0fTtcblxualF1ZXJ5LmV4dGVuZCggalF1ZXJ5LmV2ZW50LCB7XG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50LCBkYXRhLCBlbGVtLCBvbmx5SGFuZGxlcnMgKSB7XG5cblx0XHR2YXIgaSwgY3VyLCB0bXAsIGJ1YmJsZVR5cGUsIG9udHlwZSwgaGFuZGxlLCBzcGVjaWFsLCBsYXN0RWxlbWVudCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdCggXCIuXCIgKSA6IFtdO1xuXG5cdFx0Y3VyID0gbGFzdEVsZW1lbnQgPSB0bXAgPSBlbGVtID0gZWxlbSB8fCBkb2N1bWVudDtcblxuXHRcdC8vIERvbid0IGRvIGV2ZW50cyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gZm9jdXMvYmx1ciBtb3JwaHMgdG8gZm9jdXNpbi9vdXQ7IGVuc3VyZSB3ZSdyZSBub3QgZmlyaW5nIHRoZW0gcmlnaHQgbm93XG5cdFx0aWYgKCByZm9jdXNNb3JwaC50ZXN0KCB0eXBlICsgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZS5pbmRleE9mKCBcIi5cIiApID4gLTEgKSB7XG5cblx0XHRcdC8vIE5hbWVzcGFjZWQgdHJpZ2dlcjsgY3JlYXRlIGEgcmVnZXhwIHRvIG1hdGNoIGV2ZW50IHR5cGUgaW4gaGFuZGxlKClcblx0XHRcdG5hbWVzcGFjZXMgPSB0eXBlLnNwbGl0KCBcIi5cIiApO1xuXHRcdFx0dHlwZSA9IG5hbWVzcGFjZXMuc2hpZnQoKTtcblx0XHRcdG5hbWVzcGFjZXMuc29ydCgpO1xuXHRcdH1cblx0XHRvbnR5cGUgPSB0eXBlLmluZGV4T2YoIFwiOlwiICkgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKTtcblx0XHRldmVudC5ybmFtZXNwYWNlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oIFwiXFxcXC4oPzouKlxcXFwufClcIiApICsgXCIoXFxcXC58JClcIiApIDpcblx0XHRcdG51bGw7XG5cblx0XHQvLyBDbGVhbiB1cCB0aGUgZXZlbnQgaW4gY2FzZSBpdCBpcyBiZWluZyByZXVzZWRcblx0XHRldmVudC5yZXN1bHQgPSB1bmRlZmluZWQ7XG5cdFx0aWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZWxlbTtcblx0XHR9XG5cblx0XHQvLyBDbG9uZSBhbnkgaW5jb21pbmcgZGF0YSBhbmQgcHJlcGVuZCB0aGUgZXZlbnQsIGNyZWF0aW5nIHRoZSBoYW5kbGVyIGFyZyBsaXN0XG5cdFx0ZGF0YSA9IGRhdGEgPT0gbnVsbCA/XG5cdFx0XHRbIGV2ZW50IF0gOlxuXHRcdFx0alF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7XG5cblx0XHQvLyBBbGxvdyBzcGVjaWFsIGV2ZW50cyB0byBkcmF3IG91dHNpZGUgdGhlIGxpbmVzXG5cdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmIHNwZWNpYWwudHJpZ2dlciAmJiBzcGVjaWFsLnRyaWdnZXIuYXBwbHkoIGVsZW0sIGRhdGEgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpXG5cdFx0Ly8gQnViYmxlIHVwIHRvIGRvY3VtZW50LCB0aGVuIHRvIHdpbmRvdzsgd2F0Y2ggZm9yIGEgZ2xvYmFsIG93bmVyRG9jdW1lbnQgdmFyICgjOTcyNClcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdGJ1YmJsZVR5cGUgPSBzcGVjaWFsLmRlbGVnYXRlVHlwZSB8fCB0eXBlO1xuXHRcdFx0aWYgKCAhcmZvY3VzTW9ycGgudGVzdCggYnViYmxlVHlwZSArIHR5cGUgKSApIHtcblx0XHRcdFx0Y3VyID0gY3VyLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKCA7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0dG1wID0gY3VyO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPbmx5IGFkZCB3aW5kb3cgaWYgd2UgZ290IHRvIGRvY3VtZW50IChlLmcuLCBub3QgcGxhaW4gb2JqIG9yIGRldGFjaGVkIERPTSlcblx0XHRcdGlmICggdG1wID09PSAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCApICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKCBjdXIgPSBldmVudFBhdGhbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRsYXN0RWxlbWVudCA9IGN1cjtcblx0XHRcdGV2ZW50LnR5cGUgPSBpID4gMSA/XG5cdFx0XHRcdGJ1YmJsZVR5cGUgOlxuXHRcdFx0XHRzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7XG5cblx0XHRcdC8vIGpRdWVyeSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSAoIGRhdGFQcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmXG5cdFx0XHRcdGRhdGFQcml2LmdldCggY3VyLCBcImhhbmRsZVwiICk7XG5cdFx0XHRpZiAoIGhhbmRsZSApIHtcblx0XHRcdFx0aGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTmF0aXZlIGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9IG9udHlwZSAmJiBjdXJbIG9udHlwZSBdO1xuXHRcdFx0aWYgKCBoYW5kbGUgJiYgaGFuZGxlLmFwcGx5ICYmIGFjY2VwdERhdGEoIGN1ciApICkge1xuXHRcdFx0XHRldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRldmVudC50eXBlID0gdHlwZTtcblxuXHRcdC8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3dcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXG5cdFx0XHRpZiAoICggIXNwZWNpYWwuX2RlZmF1bHQgfHxcblx0XHRcdFx0c3BlY2lhbC5fZGVmYXVsdC5hcHBseSggZXZlbnRQYXRoLnBvcCgpLCBkYXRhICkgPT09IGZhbHNlICkgJiZcblx0XHRcdFx0YWNjZXB0RGF0YSggZWxlbSApICkge1xuXG5cdFx0XHRcdC8vIENhbGwgYSBuYXRpdmUgRE9NIG1ldGhvZCBvbiB0aGUgdGFyZ2V0IHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0aWYgKCBvbnR5cGUgJiYgaXNGdW5jdGlvbiggZWxlbVsgdHlwZSBdICkgJiYgIWlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyBEb24ndCByZS10cmlnZ2VyIGFuIG9uRk9PIGV2ZW50IHdoZW4gd2UgY2FsbCBpdHMgRk9PKCkgbWV0aG9kXG5cdFx0XHRcdFx0dG1wID0gZWxlbVsgb250eXBlIF07XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZVxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuXG5cdFx0XHRcdFx0aWYgKCBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0XHRcdFx0bGFzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRlbGVtWyB0eXBlIF0oKTtcblxuXHRcdFx0XHRcdGlmICggZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdFx0XHRcdGxhc3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSB0bXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHQvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmVcblx0Ly8gVXNlZCBvbmx5IGZvciBgZm9jdXMoaW4gfCBvdXQpYCBldmVudHNcblx0c2ltdWxhdGU6IGZ1bmN0aW9uKCB0eXBlLCBlbGVtLCBldmVudCApIHtcblx0XHR2YXIgZSA9IGpRdWVyeS5leHRlbmQoXG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCksXG5cdFx0XHRldmVudCxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0aXNTaW11bGF0ZWQ6IHRydWVcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIGUsIG51bGwsIGVsZW0gKTtcblx0fVxuXG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCB0aGlzICk7XG5cdFx0fSApO1xuXHR9LFxuXHR0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIGVsZW0gPSB0aGlzWyAwIF07XG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cblxuLy8gU3VwcG9ydDogRmlyZWZveCA8PTQ0XG4vLyBGaXJlZm94IGRvZXNuJ3QgaGF2ZSBmb2N1cyhpbiB8IG91dCkgZXZlbnRzXG4vLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY4Nzc4N1xuLy9cbi8vIFN1cHBvcnQ6IENocm9tZSA8PTQ4IC0gNDksIFNhZmFyaSA8PTkuMCAtIDkuMVxuLy8gZm9jdXMoaW4gfCBvdXQpIGV2ZW50cyBmaXJlIGFmdGVyIGZvY3VzICYgYmx1ciBldmVudHMsXG4vLyB3aGljaCBpcyBzcGVjIHZpb2xhdGlvbiAtIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLWZvY3VzZXZlbnQtZXZlbnQtb3JkZXJcbi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ5ODU3XG5pZiAoICFzdXBwb3J0LmZvY3VzaW4gKSB7XG5cdGpRdWVyeS5lYWNoKCB7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cblx0XHQvLyBBdHRhY2ggYSBzaW5nbGUgY2FwdHVyaW5nIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50IHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dFxuXHRcdHZhciBoYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSApO1xuXHRcdH07XG5cblx0XHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZml4IF0gPSB7XG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsICggYXR0YWNoZXMgfHwgMCApICsgMSApO1xuXHRcdFx0fSxcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApIC0gMTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsIGF0dGFjaGVzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9ICk7XG59XG52YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG5cbnZhciBub25jZSA9IERhdGUubm93KCk7XG5cbnZhciBycXVlcnkgPSAoIC9cXD8vICk7XG5cblxuXG4vLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nXG5qUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0dmFyIHhtbDtcblx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdC8vIElFIHRocm93cyBvbiBwYXJzZUZyb21TdHJpbmcgd2l0aCBpbnZhbGlkIGlucHV0LlxuXHR0cnkge1xuXHRcdHhtbCA9ICggbmV3IHdpbmRvdy5ET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIEFycmF5LmlzQXJyYXkoIG9iaiApICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIGFycmF5IGl0ZW0uXG5cdFx0alF1ZXJ5LmVhY2goIG9iaiwgZnVuY3Rpb24oIGksIHYgKSB7XG5cdFx0XHRpZiAoIHRyYWRpdGlvbmFsIHx8IHJicmFja2V0LnRlc3QoIHByZWZpeCApICkge1xuXG5cdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBJdGVtIGlzIG5vbi1zY2FsYXIgKGFycmF5IG9yIG9iamVjdCksIGVuY29kZSBpdHMgbnVtZXJpYyBpbmRleC5cblx0XHRcdFx0YnVpbGRQYXJhbXMoXG5cdFx0XHRcdFx0cHJlZml4ICsgXCJbXCIgKyAoIHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT0gbnVsbCA/IGkgOiBcIlwiICkgKyBcIl1cIixcblx0XHRcdFx0XHR2LFxuXHRcdFx0XHRcdHRyYWRpdGlvbmFsLFxuXHRcdFx0XHRcdGFkZFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgdG9UeXBlKCBvYmogKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS5cblx0XHRhZGQoIHByZWZpeCwgb2JqICk7XG5cdH1cbn1cblxuLy8gU2VyaWFsaXplIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMgb3IgYSBzZXQgb2Zcbi8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZ1xualF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24oIGEsIHRyYWRpdGlvbmFsICkge1xuXHR2YXIgcHJlZml4LFxuXHRcdHMgPSBbXSxcblx0XHRhZGQgPSBmdW5jdGlvbigga2V5LCB2YWx1ZU9yRnVuY3Rpb24gKSB7XG5cblx0XHRcdC8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgdXNlIGl0cyByZXR1cm4gdmFsdWVcblx0XHRcdHZhciB2YWx1ZSA9IGlzRnVuY3Rpb24oIHZhbHVlT3JGdW5jdGlvbiApID9cblx0XHRcdFx0dmFsdWVPckZ1bmN0aW9uKCkgOlxuXHRcdFx0XHR2YWx1ZU9yRnVuY3Rpb247XG5cblx0XHRcdHNbIHMubGVuZ3RoIF0gPSBlbmNvZGVVUklDb21wb25lbnQoIGtleSApICsgXCI9XCIgK1xuXHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKTtcblx0XHR9O1xuXG5cdC8vIElmIGFuIGFycmF5IHdhcyBwYXNzZWQgaW4sIGFzc3VtZSB0aGF0IGl0IGlzIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMuXG5cdGlmICggQXJyYXkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSB0aGUgZm9ybSBlbGVtZW50c1xuXHRcdGpRdWVyeS5lYWNoKCBhLCBmdW5jdGlvbigpIHtcblx0XHRcdGFkZCggdGhpcy5uYW1lLCB0aGlzLnZhbHVlICk7XG5cdFx0fSApO1xuXG5cdH0gZWxzZSB7XG5cblx0XHQvLyBJZiB0cmFkaXRpb25hbCwgZW5jb2RlIHRoZSBcIm9sZFwiIHdheSAodGhlIHdheSAxLjMuMiBvciBvbGRlclxuXHRcdC8vIGRpZCBpdCksIG90aGVyd2lzZSBlbmNvZGUgcGFyYW1zIHJlY3Vyc2l2ZWx5LlxuXHRcdGZvciAoIHByZWZpeCBpbiBhICkge1xuXHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCwgYVsgcHJlZml4IF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIHJlc3VsdGluZyBzZXJpYWxpemF0aW9uXG5cdHJldHVybiBzLmpvaW4oIFwiJlwiICk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5wYXJhbSggdGhpcy5zZXJpYWxpemVBcnJheSgpICk7XG5cdH0sXG5cdHNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBDYW4gYWRkIHByb3BIb29rIGZvciBcImVsZW1lbnRzXCIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzXG5cdFx0XHR2YXIgZWxlbWVudHMgPSBqUXVlcnkucHJvcCggdGhpcywgXCJlbGVtZW50c1wiICk7XG5cdFx0XHRyZXR1cm4gZWxlbWVudHMgPyBqUXVlcnkubWFrZUFycmF5KCBlbGVtZW50cyApIDogdGhpcztcblx0XHR9IClcblx0XHQuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0eXBlID0gdGhpcy50eXBlO1xuXG5cdFx0XHQvLyBVc2UgLmlzKCBcIjpkaXNhYmxlZFwiICkgc28gdGhhdCBmaWVsZHNldFtkaXNhYmxlZF0gd29ya3Ncblx0XHRcdHJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCBcIjpkaXNhYmxlZFwiICkgJiZcblx0XHRcdFx0cnN1Ym1pdHRhYmxlLnRlc3QoIHRoaXMubm9kZU5hbWUgKSAmJiAhcnN1Ym1pdHRlclR5cGVzLnRlc3QoIHR5cGUgKSAmJlxuXHRcdFx0XHQoIHRoaXMuY2hlY2tlZCB8fCAhcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7XG5cdFx0fSApXG5cdFx0Lm1hcCggZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuXHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9ICkuZ2V0KCk7XG5cdH1cbn0gKTtcblxuXG52YXJcblx0cjIwID0gLyUyMC9nLFxuXHRyaGFzaCA9IC8jLiokLyxcblx0cmFudGlDYWNoZSA9IC8oWz8mXSlfPVteJl0qLyxcblx0cmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL21nLFxuXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXG5cdC8qIFByZWZpbHRlcnNcblx0ICogMSkgVGhleSBhcmUgdXNlZnVsIHRvIGludHJvZHVjZSBjdXN0b20gZGF0YVR5cGVzIChzZWUgYWpheC9qc29ucC5qcyBmb3IgYW4gZXhhbXBsZSlcblx0ICogMikgVGhlc2UgYXJlIGNhbGxlZDpcblx0ICogICAgLSBCRUZPUkUgYXNraW5nIGZvciBhIHRyYW5zcG9ydFxuXHQgKiAgICAtIEFGVEVSIHBhcmFtIHNlcmlhbGl6YXRpb24gKHMuZGF0YSBpcyBhIHN0cmluZyBpZiBzLnByb2Nlc3NEYXRhIGlzIHRydWUpXG5cdCAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0ICogNCkgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHQgKiA1KSBleGVjdXRpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBjb250aW51ZSBkb3duIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0cHJlZmlsdGVycyA9IHt9LFxuXG5cdC8qIFRyYW5zcG9ydHMgYmluZGluZ3Ncblx0ICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiAyKSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0dHJhbnNwb3J0cyA9IHt9LFxuXG5cdC8vIEF2b2lkIGNvbW1lbnQtcHJvbG9nIGNoYXIgc2VxdWVuY2UgKCMxMDA5OCk7IG11c3QgYXBwZWFzZSBsaW50IGFuZCBldmFkZSBjb21wcmVzc2lvblxuXHRhbGxUeXBlcyA9IFwiKi9cIi5jb25jYXQoIFwiKlwiICksXG5cblx0Ly8gQW5jaG9yIHRhZyBmb3IgcGFyc2luZyB0aGUgZG9jdW1lbnQgb3JpZ2luXG5cdG9yaWdpbkFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdG9yaWdpbkFuY2hvci5ocmVmID0gbG9jYXRpb24uaHJlZjtcblxuLy8gQmFzZSBcImNvbnN0cnVjdG9yXCIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydFxuZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cblx0Ly8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byBcIipcIlxuXHRyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblxuXHRcdGlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG5cdFx0XHRkYXRhVHlwZUV4cHJlc3Npb24gPSBcIipcIjtcblx0XHR9XG5cblx0XHR2YXIgZGF0YVR5cGUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIGZ1bmMgKSApIHtcblxuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoIGRhdGFUeXBlID0gZGF0YVR5cGVzWyBpKysgXSApICkge1xuXG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbIDAgXSA9PT0gXCIrXCIgKSB7XG5cdFx0XHRcdFx0ZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkudW5zaGlmdCggZnVuYyApO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBhcHBlbmRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXG5cdFx0XHRcdG9wdGlvbnMuZGF0YVR5cGVzLnVuc2hpZnQoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0aW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCBzZWVraW5nVHJhbnNwb3J0ICkge1xuXHRcdFx0XHRyZXR1cm4gISggc2VsZWN0ZWQgPSBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoIGRlZXAgPSB7fSApICkgKVsga2V5IF0gPSBzcmNbIGtleSBdO1xuXHRcdH1cblx0fVxuXHRpZiAoIGRlZXAgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdHJ1ZSwgdGFyZ2V0LCBkZWVwICk7XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0O1xufVxuXG4vKiBIYW5kbGVzIHJlc3BvbnNlcyB0byBhbiBhamF4IHJlcXVlc3Q6XG4gKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKVxuICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7XG5cblx0dmFyIGN0LCB0eXBlLCBmaW5hbERhdGFUeXBlLCBmaXJzdERhdGFUeXBlLFxuXHRcdGNvbnRlbnRzID0gcy5jb250ZW50cyxcblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblxuXHQvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2Vzc1xuXHR3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcblx0XHRkYXRhVHlwZXMuc2hpZnQoKTtcblx0XHRpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayBpZiB3ZSdyZSBkZWFsaW5nIHdpdGggYSBrbm93biBjb250ZW50LXR5cGVcblx0aWYgKCBjdCApIHtcblx0XHRmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkge1xuXHRcdFx0aWYgKCBjb250ZW50c1sgdHlwZSBdICYmIGNvbnRlbnRzWyB0eXBlIF0udGVzdCggY3QgKSApIHtcblx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlXG5cdGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuXHRcdGZpbmFsRGF0YVR5cGUgPSBkYXRhVHlwZXNbIDAgXTtcblx0fSBlbHNlIHtcblxuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWyAwIF0gXSApIHtcblx0XHRcdFx0ZmluYWxEYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhZmlyc3REYXRhVHlwZSApIHtcblx0XHRcdFx0Zmlyc3REYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gT3IganVzdCB1c2UgZmlyc3Qgb25lXG5cdFx0ZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTtcblx0fVxuXG5cdC8vIElmIHdlIGZvdW5kIGEgZGF0YVR5cGVcblx0Ly8gV2UgYWRkIHRoZSBkYXRhVHlwZSB0byB0aGUgbGlzdCBpZiBuZWVkZWRcblx0Ly8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuXHRpZiAoIGZpbmFsRGF0YVR5cGUgKSB7XG5cdFx0aWYgKCBmaW5hbERhdGFUeXBlICE9PSBkYXRhVHlwZXNbIDAgXSApIHtcblx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7XG5cdFx0fVxuXHRcdHJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTtcblx0fVxufVxuXG4vKiBDaGFpbiBjb252ZXJzaW9ucyBnaXZlbiB0aGUgcmVxdWVzdCBhbmQgdGhlIG9yaWdpbmFsIHJlc3BvbnNlXG4gKiBBbHNvIHNldHMgdGhlIHJlc3BvbnNlWFhYIGZpZWxkcyBvbiB0aGUganFYSFIgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICkge1xuXHR2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldixcblx0XHRjb252ZXJ0ZXJzID0ge30sXG5cblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHRcdC8vIFRoZXJlJ3Mgb25seSB3b3JrIHRvIGRvIGlmIGN1cnJlbnQgZGF0YVR5cGUgaXMgbm9uLWF1dG9cblx0XHRcdGlmICggY3VycmVudCA9PT0gXCIqXCIgKSB7XG5cblx0XHRcdFx0Y3VycmVudCA9IHByZXY7XG5cblx0XHRcdC8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnRcblx0XHRcdH0gZWxzZSBpZiAoIHByZXYgIT09IFwiKlwiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU2VlayBhIGRpcmVjdCBjb252ZXJ0ZXJcblx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIGN1cnJlbnQgXSB8fCBjb252ZXJ0ZXJzWyBcIiogXCIgKyBjdXJyZW50IF07XG5cblx0XHRcdFx0Ly8gSWYgbm9uZSBmb3VuZCwgc2VlayBhIHBhaXJcblx0XHRcdFx0aWYgKCAhY29udiApIHtcblx0XHRcdFx0XHRmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnRcblx0XHRcdFx0XHRcdHRtcCA9IGNvbnYyLnNwbGl0KCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0aWYgKCB0bXBbIDEgXSA9PT0gY3VycmVudCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBJZiBwcmV2IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYWNjZXB0ZWQgaW5wdXRcblx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIHRtcFsgMCBdIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRjb252ZXJ0ZXJzWyBcIiogXCIgKyB0bXBbIDAgXSBdO1xuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBjb252ID09PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggY29udmVydGVyc1sgY29udjIgXSAhPT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQgPSB0bXBbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKVxuXHRcdFx0XHRpZiAoIGNvbnYgIT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHQvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtXG5cdFx0XHRcdFx0aWYgKCBjb252ICYmIHMudGhyb3dzICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZTogXCJwYXJzZXJlcnJvclwiLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBjb252ID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgcHJldiArIFwiIHRvIFwiICsgY3VycmVudFxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHN0YXRlOiBcInN1Y2Nlc3NcIiwgZGF0YTogcmVzcG9uc2UgfTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIENvdW50ZXIgZm9yIGhvbGRpbmcgdGhlIG51bWJlciBvZiBhY3RpdmUgcXVlcmllc1xuXHRhY3RpdmU6IDAsXG5cblx0Ly8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdFxuXHRsYXN0TW9kaWZpZWQ6IHt9LFxuXHRldGFnOiB7fSxcblxuXHRhamF4U2V0dGluZ3M6IHtcblx0XHR1cmw6IGxvY2F0aW9uLmhyZWYsXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBsb2NhdGlvbi5wcm90b2NvbCApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblxuXHRcdC8qXG5cdFx0dGltZW91dDogMCxcblx0XHRkYXRhOiBudWxsLFxuXHRcdGRhdGFUeXBlOiBudWxsLFxuXHRcdHVzZXJuYW1lOiBudWxsLFxuXHRcdHBhc3N3b3JkOiBudWxsLFxuXHRcdGNhY2hlOiBudWxsLFxuXHRcdHRocm93czogZmFsc2UsXG5cdFx0dHJhZGl0aW9uYWw6IGZhbHNlLFxuXHRcdGhlYWRlcnM6IHt9LFxuXHRcdCovXG5cblx0XHRhY2NlcHRzOiB7XG5cdFx0XHRcIipcIjogYWxsVHlwZXMsXG5cdFx0XHR0ZXh0OiBcInRleHQvcGxhaW5cIixcblx0XHRcdGh0bWw6IFwidGV4dC9odG1sXCIsXG5cdFx0XHR4bWw6IFwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLFxuXHRcdFx0anNvbjogXCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIlxuXHRcdH0sXG5cblx0XHRjb250ZW50czoge1xuXHRcdFx0eG1sOiAvXFxieG1sXFxiLyxcblx0XHRcdGh0bWw6IC9cXGJodG1sLyxcblx0XHRcdGpzb246IC9cXGJqc29uXFxiL1xuXHRcdH0sXG5cblx0XHRyZXNwb25zZUZpZWxkczoge1xuXHRcdFx0eG1sOiBcInJlc3BvbnNlWE1MXCIsXG5cdFx0XHR0ZXh0OiBcInJlc3BvbnNlVGV4dFwiLFxuXHRcdFx0anNvbjogXCJyZXNwb25zZUpTT05cIlxuXHRcdH0sXG5cblx0XHQvLyBEYXRhIGNvbnZlcnRlcnNcblx0XHQvLyBLZXlzIHNlcGFyYXRlIHNvdXJjZSAob3IgY2F0Y2hhbGwgXCIqXCIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG5cdFx0Y29udmVydGVyczoge1xuXG5cdFx0XHQvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHRcblx0XHRcdFwiKiB0ZXh0XCI6IFN0cmluZyxcblxuXHRcdFx0Ly8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pXG5cdFx0XHRcInRleHQgaHRtbFwiOiB0cnVlLFxuXG5cdFx0XHQvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uXG5cdFx0XHRcInRleHQganNvblwiOiBKU09OLnBhcnNlLFxuXG5cdFx0XHQvLyBQYXJzZSB0ZXh0IGFzIHhtbFxuXHRcdFx0XCJ0ZXh0IHhtbFwiOiBqUXVlcnkucGFyc2VYTUxcblx0XHR9LFxuXG5cdFx0Ly8gRm9yIG9wdGlvbnMgdGhhdCBzaG91bGRuJ3QgYmUgZGVlcCBleHRlbmRlZDpcblx0XHQvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmXG5cdFx0Ly8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmVcblx0XHQvLyBkZWVwIGV4dGVuZGVkIChzZWUgYWpheEV4dGVuZClcblx0XHRmbGF0T3B0aW9uczoge1xuXHRcdFx0dXJsOiB0cnVlLFxuXHRcdFx0Y29udGV4dDogdHJ1ZVxuXHRcdH1cblx0fSxcblxuXHQvLyBDcmVhdGVzIGEgZnVsbCBmbGVkZ2VkIHNldHRpbmdzIG9iamVjdCBpbnRvIHRhcmdldFxuXHQvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuXG5cdC8vIElmIHRhcmdldCBpcyBvbWl0dGVkLCB3cml0ZXMgaW50byBhamF4U2V0dGluZ3MuXG5cdGFqYXhTZXR1cDogZnVuY3Rpb24oIHRhcmdldCwgc2V0dGluZ3MgKSB7XG5cdFx0cmV0dXJuIHNldHRpbmdzID9cblxuXHRcdFx0Ly8gQnVpbGRpbmcgYSBzZXR0aW5ncyBvYmplY3Rcblx0XHRcdGFqYXhFeHRlbmQoIGFqYXhFeHRlbmQoIHRhcmdldCwgalF1ZXJ5LmFqYXhTZXR0aW5ncyApLCBzZXR0aW5ncyApIDpcblxuXHRcdFx0Ly8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5nc1xuXHRcdFx0YWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7XG5cdH0sXG5cblx0YWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksXG5cdGFqYXhUcmFuc3BvcnQ6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cyApLFxuXG5cdC8vIE1haW4gbWV0aG9kXG5cdGFqYXg6IGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZVxuXHRcdGlmICggdHlwZW9mIHVybCA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdG9wdGlvbnMgPSB1cmw7XG5cdFx0XHR1cmwgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gRm9yY2Ugb3B0aW9ucyB0byBiZSBhbiBvYmplY3Rcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRcdHZhciB0cmFuc3BvcnQsXG5cblx0XHRcdC8vIFVSTCB3aXRob3V0IGFudGktY2FjaGUgcGFyYW1cblx0XHRcdGNhY2hlVVJMLFxuXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cblx0XHRcdC8vIHRpbWVvdXQgaGFuZGxlXG5cdFx0XHR0aW1lb3V0VGltZXIsXG5cblx0XHRcdC8vIFVybCBjbGVhbnVwIHZhclxuXHRcdFx0dXJsQW5jaG9yLFxuXG5cdFx0XHQvLyBSZXF1ZXN0IHN0YXRlIChiZWNvbWVzIGZhbHNlIHVwb24gc2VuZCBhbmQgdHJ1ZSB1cG9uIGNvbXBsZXRpb24pXG5cdFx0XHRjb21wbGV0ZWQsXG5cblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cblx0XHRcdC8vIExvb3AgdmFyaWFibGVcblx0XHRcdGksXG5cblx0XHRcdC8vIHVuY2FjaGVkIHBhcnQgb2YgdGhlIHVybFxuXHRcdFx0dW5jYWNoZWQsXG5cblx0XHRcdC8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3Rcblx0XHRcdHMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLFxuXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cblx0XHRcdC8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb25cblx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJlxuXHRcdFx0XHQoIGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZSB8fCBjYWxsYmFja0NvbnRleHQuanF1ZXJ5ICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggY2FsbGJhY2tDb250ZXh0ICkgOlxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudCxcblxuXHRcdFx0Ly8gRGVmZXJyZWRzXG5cdFx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblxuXHRcdFx0Ly8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSlcblx0XHRcdHJlcXVlc3RIZWFkZXJzID0ge30sXG5cdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sXG5cblx0XHRcdC8vIERlZmF1bHQgYWJvcnQgbWVzc2FnZVxuXHRcdFx0c3RyQWJvcnQgPSBcImNhbmNlbGVkXCIsXG5cblx0XHRcdC8vIEZha2UgeGhyXG5cdFx0XHRqcVhIUiA9IHtcblx0XHRcdFx0cmVhZHlTdGF0ZTogMCxcblxuXHRcdFx0XHQvLyBCdWlsZHMgaGVhZGVycyBoYXNodGFibGUgaWYgbmVlZGVkXG5cdFx0XHRcdGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdFx0XHRcdHZhciBtYXRjaDtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0XHRcdGlmICggIXJlc3BvbnNlSGVhZGVycyApIHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzID0ge307XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKCBtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbXBsZXRlZCA/IHJlc3BvbnNlSGVhZGVyc1N0cmluZyA6IG51bGw7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FjaGVzIHRoZSBoZWFkZXJcblx0XHRcdFx0c2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRuYW1lID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gPVxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSB8fCBuYW1lO1xuXHRcdFx0XHRcdFx0cmVxdWVzdEhlYWRlcnNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlclxuXHRcdFx0XHRvdmVycmlkZU1pbWVUeXBlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2tzIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzXG5cdFx0XHRcdFx0XHRcdGZvciAoIGNvZGUgaW4gbWFwICkge1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApO1xuXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgbG9jYXRpb24uaHJlZiApICsgXCJcIiApXG5cdFx0XHQucmVwbGFjZSggcnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiApO1xuXG5cdFx0Ly8gQWxpYXMgbWV0aG9kIG9wdGlvbiB0byB0eXBlIGFzIHBlciB0aWNrZXQgIzEyMDA0XG5cdFx0cy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTtcblxuXHRcdC8vIEV4dHJhY3QgZGF0YVR5cGVzIGxpc3Rcblx0XHRzLmRhdGFUeXBlcyA9ICggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblxuXHRcdC8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB0aGUgb3JpZ2luIGRvZXNuJ3QgbWF0Y2ggdGhlIGN1cnJlbnQgb3JpZ2luLlxuXHRcdGlmICggcy5jcm9zc0RvbWFpbiA9PSBudWxsICkge1xuXHRcdFx0dXJsQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IC0gMTEsIEVkZ2UgMTIgLSAxNVxuXHRcdFx0Ly8gSUUgdGhyb3dzIGV4Y2VwdGlvbiBvbiBhY2Nlc3NpbmcgdGhlIGhyZWYgcHJvcGVydHkgaWYgdXJsIGlzIG1hbGZvcm1lZCxcblx0XHRcdC8vIGUuZy4gaHR0cDovL2V4YW1wbGUuY29tOjgweC9cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHVybEFuY2hvci5ocmVmID0gcy51cmw7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IC0gMTEgb25seVxuXHRcdFx0XHQvLyBBbmNob3IncyBob3N0IHByb3BlcnR5IGlzbid0IGNvcnJlY3RseSBzZXQgd2hlbiBzLnVybCBpcyByZWxhdGl2ZVxuXHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHVybEFuY2hvci5ocmVmO1xuXHRcdFx0XHRzLmNyb3NzRG9tYWluID0gb3JpZ2luQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgb3JpZ2luQW5jaG9yLmhvc3QgIT09XG5cdFx0XHRcdFx0dXJsQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgdXJsQW5jaG9yLmhvc3Q7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciBwYXJzaW5nIHRoZSBVUkwsIGFzc3VtZSBpdCBpcyBjcm9zc0RvbWFpbixcblx0XHRcdFx0Ly8gaXQgY2FuIGJlIHJlamVjdGVkIGJ5IHRoZSB0cmFuc3BvcnQgaWYgaXQgaXMgaW52YWxpZFxuXHRcdFx0XHRzLmNyb3NzRG9tYWluID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0fVxuXG5cdFx0Ly8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG9cblx0XHQvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KVxuXHRcdGZpcmVHbG9iYWxzID0galF1ZXJ5LmV2ZW50ICYmIHMuZ2xvYmFsO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0c1xuXHRcdGlmICggZmlyZUdsb2JhbHMgJiYgalF1ZXJ5LmFjdGl2ZSsrID09PSAwICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0YXJ0XCIgKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHQvLyBSZW1vdmUgaGFzaCB0byBzaW1wbGlmeSB1cmwgbWFuaXB1bGF0aW9uXG5cdFx0Y2FjaGVVUkwgPSBzLnVybC5yZXBsYWNlKCByaGFzaCwgXCJcIiApO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBoYXNoIHNvIHdlIGNhbiBwdXQgaXQgYmFja1xuXHRcdFx0dW5jYWNoZWQgPSBzLnVybC5zbGljZSggY2FjaGVVUkwubGVuZ3RoICk7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlIGFuZCBzaG91bGQgYmUgcHJvY2Vzc2VkLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICYmICggcy5wcm9jZXNzRGF0YSB8fCB0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICkgKSB7XG5cdFx0XHRcdGNhY2hlVVJMICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmRhdGE7XG5cblx0XHRcdFx0Ly8gIzk2ODI6IHJlbW92ZSBkYXRhIHNvIHRoYXQgaXQncyBub3QgdXNlZCBpbiBhbiBldmVudHVhbCByZXRyeVxuXHRcdFx0XHRkZWxldGUgcy5kYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgb3IgdXBkYXRlIGFudGktY2FjaGUgcGFyYW0gaWYgbmVlZGVkXG5cdFx0XHRpZiAoIHMuY2FjaGUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9IGNhY2hlVVJMLnJlcGxhY2UoIHJhbnRpQ2FjaGUsIFwiJDFcIiApO1xuXHRcdFx0XHR1bmNhY2hlZCA9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyAoIG5vbmNlKysgKSArIHVuY2FjaGVkO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQdXQgaGFzaCBhbmQgYW50aS1jYWNoZSBvbiB0aGUgVVJMIHRoYXQgd2lsbCBiZSByZXF1ZXN0ZWQgKGdoLTE3MzIpXG5cdFx0XHRzLnVybCA9IGNhY2hlVVJMICsgdW5jYWNoZWQ7XG5cblx0XHQvLyBDaGFuZ2UgJyUyMCcgdG8gJysnIGlmIHRoaXMgaXMgZW5jb2RlZCBmb3JtIGJvZHkgY29udGVudCAoZ2gtMjY1OClcblx0XHR9IGVsc2UgaWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJlxuXHRcdFx0KCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKS5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgKSB7XG5cdFx0XHRzLmRhdGEgPSBzLmRhdGEucmVwbGFjZSggcjIwLCBcIitcIiApO1xuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSA/XG5cdFx0XHRcdHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdICtcblx0XHRcdFx0XHQoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJlxuXHRcdFx0KCBzLmJlZm9yZVNlbmQuY2FsbCggY2FsbGJhY2tDb250ZXh0LCBqcVhIUiwgcyApID09PSBmYWxzZSB8fCBjb21wbGV0ZWQgKSApIHtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuXG5cdFx0XHRyZXR1cm4ganFYSFIuYWJvcnQoKTtcblx0XHR9XG5cblx0XHQvLyBBYm9ydGluZyBpcyBubyBsb25nZXIgYSBjYW5jZWxsYXRpb25cblx0XHRzdHJBYm9ydCA9IFwiYWJvcnRcIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tzIG9uIGRlZmVycmVkc1xuXHRcdGNvbXBsZXRlRGVmZXJyZWQuYWRkKCBzLmNvbXBsZXRlICk7XG5cdFx0anFYSFIuZG9uZSggcy5zdWNjZXNzICk7XG5cdFx0anFYSFIuZmFpbCggcy5lcnJvciApO1xuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYWpheFNlbmQsIHN0b3AgdGhlcmVcblx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0anFYSFIuYWJvcnQoIFwidGltZW91dFwiICk7XG5cdFx0XHRcdH0sIHMudGltZW91dCApO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBSZXRocm93IHBvc3QtY29tcGxldGlvbiBleGNlcHRpb25zXG5cdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBQcm9wYWdhdGUgb3RoZXJzIGFzIHJlc3VsdHNcblx0XHRcdFx0ZG9uZSggLTEsIGUgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsYmFjayBmb3Igd2hlbiBldmVyeXRoaW5nIGlzIGRvbmVcblx0XHRmdW5jdGlvbiBkb25lKCBzdGF0dXMsIG5hdGl2ZVN0YXR1c1RleHQsIHJlc3BvbnNlcywgaGVhZGVycyApIHtcblx0XHRcdHZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsXG5cdFx0XHRcdHN0YXR1c1RleHQgPSBuYXRpdmVTdGF0dXNUZXh0O1xuXG5cdFx0XHQvLyBJZ25vcmUgcmVwZWF0IGludm9jYXRpb25zXG5cdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb21wbGV0ZWQgPSB0cnVlO1xuXG5cdFx0XHQvLyBDbGVhciB0aW1lb3V0IGlmIGl0IGV4aXN0c1xuXHRcdFx0aWYgKCB0aW1lb3V0VGltZXIgKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvblxuXHRcdFx0Ly8gKG5vIG1hdHRlciBob3cgbG9uZyB0aGUganFYSFIgb2JqZWN0IHdpbGwgYmUgdXNlZClcblx0XHRcdHRyYW5zcG9ydCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0Ly8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nID0gaGVhZGVycyB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTZXQgcmVhZHlTdGF0ZVxuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDtcblxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHN1Y2Nlc3NmdWxcblx0XHRcdGlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXG5cdFx0XHQvLyBHZXQgcmVzcG9uc2UgZGF0YVxuXHRcdFx0aWYgKCByZXNwb25zZXMgKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpXG5cdFx0XHRyZXNwb25zZSA9IGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApO1xuXG5cdFx0XHQvLyBJZiBzdWNjZXNzZnVsLCBoYW5kbGUgdHlwZSBjaGFpbmluZ1xuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cblx0XHRcdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRcdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJMYXN0LU1vZGlmaWVkXCIgKTtcblx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcImV0YWdcIiApO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBFeHRyYWN0IGVycm9yIGZyb20gc3RhdHVzVGV4dCBhbmQgbm9ybWFsaXplIGZvciBub24tYWJvcnRzXG5cdFx0XHRcdGVycm9yID0gc3RhdHVzVGV4dDtcblx0XHRcdFx0aWYgKCBzdGF0dXMgfHwgIXN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwiZXJyb3JcIjtcblx0XHRcdFx0XHRpZiAoIHN0YXR1cyA8IDAgKSB7XG5cdFx0XHRcdFx0XHRzdGF0dXMgPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgZGF0YSBmb3IgdGhlIGZha2UgeGhyIG9iamVjdFxuXHRcdFx0anFYSFIuc3RhdHVzID0gc3RhdHVzO1xuXHRcdFx0anFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyBcIlwiO1xuXG5cdFx0XHQvLyBTdWNjZXNzL0Vycm9yXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBzdWNjZXNzLCBzdGF0dXNUZXh0LCBqcVhIUiBdICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdGpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTtcblx0XHRcdHN0YXR1c0NvZGUgPSB1bmRlZmluZWQ7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBpc1N1Y2Nlc3MgPyBcImFqYXhTdWNjZXNzXCIgOiBcImFqYXhFcnJvclwiLFxuXHRcdFx0XHRcdFsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbXBsZXRlXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4Q29tcGxldGVcIiwgWyBqcVhIUiwgcyBdICk7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyXG5cdFx0XHRcdGlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0b3BcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwiZ2V0XCIsIFwicG9zdFwiIF0sIGZ1bmN0aW9uKCBpLCBtZXRob2QgKSB7XG5cdGpRdWVyeVsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjaywgdHlwZSApIHtcblxuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBjYWxsYmFjaztcblx0XHRcdGNhbGxiYWNrID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHVybCBjYW4gYmUgYW4gb3B0aW9ucyBvYmplY3QgKHdoaWNoIHRoZW4gbXVzdCBoYXZlIC51cmwpXG5cdFx0cmV0dXJuIGpRdWVyeS5hamF4KCBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSwgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHVybCApICYmIHVybCApICk7XG5cdH07XG59ICk7XG5cblxualF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCApIHtcblx0cmV0dXJuIGpRdWVyeS5hamF4KCB7XG5cdFx0dXJsOiB1cmwsXG5cblx0XHQvLyBNYWtlIHRoaXMgZXhwbGljaXQsIHNpbmNlIHVzZXIgY2FuIG92ZXJyaWRlIHRoaXMgdGhyb3VnaCBhamF4U2V0dXAgKCMxMTI2NClcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdGNhY2hlOiB0cnVlLFxuXHRcdGFzeW5jOiBmYWxzZSxcblx0XHRnbG9iYWw6IGZhbHNlLFxuXHRcdFwidGhyb3dzXCI6IHRydWVcblx0fSApO1xufTtcblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCB0aGlzWyAwIF0gKSB7XG5cdFx0XHRpZiAoIGlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdFx0aHRtbCA9IGh0bWwuY2FsbCggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kXG5cdFx0XHR3cmFwID0galF1ZXJ5KCBodG1sLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCApLmVxKCAwICkuY2xvbmUoIHRydWUgKTtcblxuXHRcdFx0aWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0d3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHR3cmFwLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gdGhpcztcblxuXHRcdFx0XHR3aGlsZSAoIGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZWxlbTtcblx0XHRcdH0gKS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKCB0aGlzLCBpICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksXG5cdFx0XHRcdGNvbnRlbnRzID0gc2VsZi5jb250ZW50cygpO1xuXG5cdFx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCApIHtcblx0XHRcdFx0Y29udGVudHMud3JhcEFsbCggaHRtbCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLmFwcGVuZCggaHRtbCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHR3cmFwOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHR2YXIgaHRtbElzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKCBodG1sICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGh0bWxJc0Z1bmN0aW9uID8gaHRtbC5jYWxsKCB0aGlzLCBpICkgOiBodG1sICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdHVud3JhcDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHRoaXMucGFyZW50KCBzZWxlY3RvciApLm5vdCggXCJib2R5XCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcblx0XHR9ICk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuZXhwci5wc2V1ZG9zLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZSggZWxlbSApO1xufTtcbmpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gISEoIGVsZW0ub2Zmc2V0V2lkdGggfHwgZWxlbS5vZmZzZXRIZWlnaHQgfHwgZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApO1xufTtcblxuXG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuXHR9IGNhdGNoICggZSApIHt9XG59O1xuXG52YXIgeGhyU3VjY2Vzc1N0YXR1cyA9IHtcblxuXHRcdC8vIEZpbGUgcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgY29kZSAwLCBhc3N1bWUgMjAwXG5cdFx0MDogMjAwLFxuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHQvLyAjMTQ1MDogc29tZXRpbWVzIElFIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDRcblx0XHQxMjIzOiAyMDRcblx0fSxcblx0eGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTtcblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0dmFyIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrO1xuXG5cdC8vIENyb3NzIGRvbWFpbiBvbmx5IGFsbG93ZWQgaWYgc3VwcG9ydGVkIHRocm91Z2ggWE1MSHR0cFJlcXVlc3Rcblx0aWYgKCBzdXBwb3J0LmNvcnMgfHwgeGhyU3VwcG9ydGVkICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggaGVhZGVycywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHZhciBpLFxuXHRcdFx0XHRcdHhociA9IG9wdGlvbnMueGhyKCk7XG5cblx0XHRcdFx0eGhyLm9wZW4oXG5cdFx0XHRcdFx0b3B0aW9ucy50eXBlLFxuXHRcdFx0XHRcdG9wdGlvbnMudXJsLFxuXHRcdFx0XHRcdG9wdGlvbnMuYXN5bmMsXG5cdFx0XHRcdFx0b3B0aW9ucy51c2VybmFtZSxcblx0XHRcdFx0XHRvcHRpb25zLnBhc3N3b3JkXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdGZvciAoIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0XHR4aHJbIGkgXSA9IG9wdGlvbnMueGhyRmllbGRzWyBpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7XG5cdFx0XHRcdFx0eGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFgtUmVxdWVzdGVkLVdpdGggaGVhZGVyXG5cdFx0XHRcdC8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmVcblx0XHRcdFx0Ly8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS5cblx0XHRcdFx0Ly8gKGl0IGNhbiBhbHdheXMgYmUgc2V0IG9uIGEgcGVyLXJlcXVlc3QgYmFzaXMgb3IgZXZlbiB1c2luZyBhamF4U2V0dXApXG5cdFx0XHRcdC8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLlxuXHRcdFx0XHRpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXQgaGVhZGVyc1xuXHRcdFx0XHRmb3IgKCBpIGluIGhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IGVycm9yQ2FsbGJhY2sgPSB4aHIub25sb2FkID1cblx0XHRcdFx0XHRcdFx0XHR4aHIub25lcnJvciA9IHhoci5vbmFib3J0ID0geGhyLm9udGltZW91dCA9XG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiYWJvcnRcIiApIHtcblx0XHRcdFx0XHRcdFx0XHR4aHIuYWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gXCJlcnJvclwiICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHRcdFx0XHQvLyBPbiBhIG1hbnVhbCBuYXRpdmUgYWJvcnQsIElFOSB0aHJvd3Ncblx0XHRcdFx0XHRcdFx0XHQvLyBlcnJvcnMgb24gYW55IHByb3BlcnR5IGFjY2VzcyB0aGF0IGlzIG5vdCByZWFkeVN0YXRlXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlb2YgeGhyLnN0YXR1cyAhPT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCAwLCBcImVycm9yXCIgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmlsZTogcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgMDsgc2VlICM4NjA1LCAjMTQyMDdcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHRcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyU3VjY2Vzc1N0YXR1c1sgeGhyLnN0YXR1cyBdIHx8IHhoci5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dCxcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElFOSBoYXMgbm8gWEhSMiBidXQgdGhyb3dzIG9uIGJpbmFyeSAodHJhYy0xMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBYSFIyIG5vbi10ZXh0LCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgaXQgKGdoLTI0OTgpXG5cdFx0XHRcdFx0XHRcdFx0XHQoIHhoci5yZXNwb25zZVR5cGUgfHwgXCJ0ZXh0XCIgKSAhPT0gXCJ0ZXh0XCIgIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgYmluYXJ5OiB4aHIucmVzcG9uc2UgfSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgdGV4dDogeGhyLnJlc3BvbnNlVGV4dCB9LFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0ZXJyb3JDYWxsYmFjayA9IHhoci5vbmVycm9yID0geGhyLm9udGltZW91dCA9IGNhbGxiYWNrKCBcImVycm9yXCIgKTtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA5IG9ubHlcblx0XHRcdFx0Ly8gVXNlIG9ucmVhZHlzdGF0ZWNoYW5nZSB0byByZXBsYWNlIG9uYWJvcnRcblx0XHRcdFx0Ly8gdG8gaGFuZGxlIHVuY2F1Z2h0IGFib3J0c1xuXHRcdFx0XHRpZiAoIHhoci5vbmFib3J0ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0eGhyLm9uYWJvcnQgPSBlcnJvckNhbGxiYWNrO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgcmVhZHlTdGF0ZSBiZWZvcmUgdGltZW91dCBhcyBpdCBjaGFuZ2VzXG5cdFx0XHRcdFx0XHRpZiAoIHhoci5yZWFkeVN0YXRlID09PSA0ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFsbG93IG9uZXJyb3IgdG8gYmUgY2FsbGVkIGZpcnN0LFxuXHRcdFx0XHRcdFx0XHQvLyBidXQgdGhhdCB3aWxsIG5vdCBoYW5kbGUgYSBuYXRpdmUgYWJvcnRcblx0XHRcdFx0XHRcdFx0Ly8gQWxzbywgc2F2ZSBlcnJvckNhbGxiYWNrIHRvIGEgdmFyaWFibGVcblx0XHRcdFx0XHRcdFx0Ly8gYXMgeGhyLm9uZXJyb3IgY2Fubm90IGJlIGFjY2Vzc2VkXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3JDYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDcmVhdGUgdGhlIGFib3J0IGNhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2soIFwiYWJvcnRcIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cblx0XHRcdFx0XHQvLyBEbyBzZW5kIHRoZSByZXF1ZXN0ICh0aGlzIG1heSByYWlzZSBhbiBleGNlcHRpb24pXG5cdFx0XHRcdFx0eGhyLnNlbmQoIG9wdGlvbnMuaGFzQ29udGVudCAmJiBvcHRpb25zLmRhdGEgfHwgbnVsbCApO1xuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHRcdC8vICMxNDY4MzogT25seSByZXRocm93IGlmIHRoaXMgaGFzbid0IGJlZW4gbm90aWZpZWQgYXMgYW4gZXJyb3IgeWV0XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gUHJldmVudCBhdXRvLWV4ZWN1dGlvbiBvZiBzY3JpcHRzIHdoZW4gbm8gZXhwbGljaXQgZGF0YVR5cGUgd2FzIHByb3ZpZGVkIChTZWUgZ2gtMjQzMilcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBmdW5jdGlvbiggcyApIHtcblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMuY29udGVudHMuc2NyaXB0ID0gZmFsc2U7XG5cdH1cbn0gKTtcblxuLy8gSW5zdGFsbCBzY3JpcHQgZGF0YVR5cGVcbmpRdWVyeS5hamF4U2V0dXAoIHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIFwiICtcblx0XHRcdFwiYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJcblx0fSxcblx0Y29udGVudHM6IHtcblx0XHRzY3JpcHQ6IC9cXGIoPzpqYXZhfGVjbWEpc2NyaXB0XFxiL1xuXHR9LFxuXHRjb252ZXJ0ZXJzOiB7XG5cdFx0XCJ0ZXh0IHNjcmlwdFwiOiBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7XG5cdFx0XHRyZXR1cm4gdGV4dDtcblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0gKTtcblxuLy8gQmluZCBzY3JpcHQgdGFnIGhhY2sgdHJhbnNwb3J0XG5qUXVlcnkuYWpheFRyYW5zcG9ydCggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KCBcIjxzY3JpcHQ+XCIgKS5wcm9wKCB7XG5cdFx0XHRcdFx0Y2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LFxuXHRcdFx0XHRcdHNyYzogcy51cmxcblx0XHRcdFx0fSApLm9uKFxuXHRcdFx0XHRcdFwibG9hZCBlcnJvclwiLFxuXHRcdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIGV2dCApIHtcblx0XHRcdFx0XHRcdHNjcmlwdC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrID0gbnVsbDtcblx0XHRcdFx0XHRcdGlmICggZXZ0ICkge1xuXHRcdFx0XHRcdFx0XHRjb21wbGV0ZSggZXZ0LnR5cGUgPT09IFwiZXJyb3JcIiA/IDQwNCA6IDIwMCwgZXZ0LnR5cGUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gVXNlIG5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIHRvIGF2b2lkIG91ciBkb21NYW5pcCBBSkFYIHRyaWNrZXJ5XG5cdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdFsgMCBdICk7XG5cdFx0XHR9LFxuXHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG59ICk7XG5cblxuXG5cbnZhciBvbGRDYWxsYmFja3MgPSBbXSxcblx0cmpzb25wID0gLyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztcblxuLy8gRGVmYXVsdCBqc29ucCBzZXR0aW5nc1xualF1ZXJ5LmFqYXhTZXR1cCgge1xuXHRqc29ucDogXCJjYWxsYmFja1wiLFxuXHRqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArIFwiX1wiICsgKCBub25jZSsrICkgKTtcblx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRyZXR1cm4gY2FsbGJhY2s7XG5cdH1cbn0gKTtcblxuLy8gRGV0ZWN0LCBub3JtYWxpemUgb3B0aW9ucyBhbmQgaW5zdGFsbCBjYWxsYmFja3MgZm9yIGpzb25wIHJlcXVlc3RzXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJqc29uIGpzb25wXCIsIGZ1bmN0aW9uKCBzLCBvcmlnaW5hbFNldHRpbmdzLCBqcVhIUiApIHtcblxuXHR2YXIgY2FsbGJhY2tOYW1lLCBvdmVyd3JpdHRlbiwgcmVzcG9uc2VDb250YWluZXIsXG5cdFx0anNvblByb3AgPSBzLmpzb25wICE9PSBmYWxzZSAmJiAoIHJqc29ucC50ZXN0KCBzLnVybCApID9cblx0XHRcdFwidXJsXCIgOlxuXHRcdFx0dHlwZW9mIHMuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQoIHMuY29udGVudFR5cGUgfHwgXCJcIiApXG5cdFx0XHRcdFx0LmluZGV4T2YoIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgKSA9PT0gMCAmJlxuXHRcdFx0XHRyanNvbnAudGVzdCggcy5kYXRhICkgJiYgXCJkYXRhXCJcblx0XHQpO1xuXG5cdC8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyBcImpzb25wXCIgb3Igd2UgaGF2ZSBhIHBhcmFtZXRlciB0byBzZXRcblx0aWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSBcImpzb25wXCIgKSB7XG5cblx0XHQvLyBHZXQgY2FsbGJhY2sgbmFtZSwgcmVtZW1iZXJpbmcgcHJlZXhpc3RpbmcgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGl0XG5cdFx0Y2FsbGJhY2tOYW1lID0gcy5qc29ucENhbGxiYWNrID0gaXNGdW5jdGlvbiggcy5qc29ucENhbGxiYWNrICkgP1xuXHRcdFx0cy5qc29ucENhbGxiYWNrKCkgOlxuXHRcdFx0cy5qc29ucENhbGxiYWNrO1xuXG5cdFx0Ly8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YVxuXHRcdGlmICgganNvblByb3AgKSB7XG5cdFx0XHRzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsIFwiJDFcIiArIGNhbGxiYWNrTmFtZSApO1xuXHRcdH0gZWxzZSBpZiAoIHMuanNvbnAgIT09IGZhbHNlICkge1xuXHRcdFx0cy51cmwgKz0gKCBycXVlcnkudGVzdCggcy51cmwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuanNvbnAgKyBcIj1cIiArIGNhbGxiYWNrTmFtZTtcblx0XHR9XG5cblx0XHQvLyBVc2UgZGF0YSBjb252ZXJ0ZXIgdG8gcmV0cmlldmUganNvbiBhZnRlciBzY3JpcHQgZXhlY3V0aW9uXG5cdFx0cy5jb252ZXJ0ZXJzWyBcInNjcmlwdCBqc29uXCIgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIEZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBJZiBwcmV2aW91cyB2YWx1ZSBkaWRuJ3QgZXhpc3QgLSByZW1vdmUgaXRcblx0XHRcdGlmICggb3ZlcndyaXR0ZW4gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0alF1ZXJ5KCB3aW5kb3cgKS5yZW1vdmVQcm9wKCBjYWxsYmFja05hbWUgKTtcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWVcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2F2ZSBiYWNrIGFzIGZyZWVcblx0XHRcdGlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7XG5cblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgcmUtdXNpbmcgdGhlIG9wdGlvbnMgZG9lc24ndCBzY3JldyB0aGluZ3MgYXJvdW5kXG5cdFx0XHRcdHMuanNvbnBDYWxsYmFjayA9IG9yaWdpbmFsU2V0dGluZ3MuanNvbnBDYWxsYmFjaztcblxuXHRcdFx0XHQvLyBTYXZlIHRoZSBjYWxsYmFjayBuYW1lIGZvciBmdXR1cmUgdXNlXG5cdFx0XHRcdG9sZENhbGxiYWNrcy5wdXNoKCBjYWxsYmFja05hbWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FsbCBpZiBpdCB3YXMgYSBmdW5jdGlvbiBhbmQgd2UgaGF2ZSBhIHJlc3BvbnNlXG5cdFx0XHRpZiAoIHJlc3BvbnNlQ29udGFpbmVyICYmIGlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSApO1xuXG5cdFx0Ly8gRGVsZWdhdGUgdG8gc2NyaXB0XG5cdFx0cmV0dXJuIFwic2NyaXB0XCI7XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gU3VwcG9ydDogU2FmYXJpIDggb25seVxuLy8gSW4gU2FmYXJpIDggZG9jdW1lbnRzIGNyZWF0ZWQgdmlhIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudFxuLy8gY29sbGFwc2Ugc2libGluZyBmb3JtczogdGhlIHNlY29uZCBvbmUgYmVjb21lcyBhIGNoaWxkIG9mIHRoZSBmaXJzdCBvbmUuXG4vLyBCZWNhdXNlIG9mIHRoYXQsIHRoaXMgc2VjdXJpdHkgbWVhc3VyZSBoYXMgdG8gYmUgZGlzYWJsZWQgaW4gU2FmYXJpIDguXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM3MzM3XG5zdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCA9ICggZnVuY3Rpb24oKSB7XG5cdHZhciBib2R5ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCBcIlwiICkuYm9keTtcblx0Ym9keS5pbm5lckhUTUwgPSBcIjxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+XCI7XG5cdHJldHVybiBib2R5LmNoaWxkTm9kZXMubGVuZ3RoID09PSAyO1xufSApKCk7XG5cblxuLy8gQXJndW1lbnQgXCJkYXRhXCIgc2hvdWxkIGJlIHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsXG4vLyBkZWZhdWx0cyB0byBkb2N1bWVudFxuLy8ga2VlcFNjcmlwdHMgKG9wdGlvbmFsKTogSWYgdHJ1ZSwgd2lsbCBpbmNsdWRlIHNjcmlwdHMgcGFzc2VkIGluIHRoZSBodG1sIHN0cmluZ1xualF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHtcblx0aWYgKCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0a2VlcFNjcmlwdHMgPSBjb250ZXh0O1xuXHRcdGNvbnRleHQgPSBmYWxzZTtcblx0fVxuXG5cdHZhciBiYXNlLCBwYXJzZWQsIHNjcmlwdHM7XG5cblx0aWYgKCAhY29udGV4dCApIHtcblxuXHRcdC8vIFN0b3Agc2NyaXB0cyBvciBpbmxpbmUgZXZlbnQgaGFuZGxlcnMgZnJvbSBiZWluZyBleGVjdXRlZCBpbW1lZGlhdGVseVxuXHRcdC8vIGJ5IHVzaW5nIGRvY3VtZW50LmltcGxlbWVudGF0aW9uXG5cdFx0aWYgKCBzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCApIHtcblx0XHRcdGNvbnRleHQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIFwiXCIgKTtcblxuXHRcdFx0Ly8gU2V0IHRoZSBiYXNlIGhyZWYgZm9yIHRoZSBjcmVhdGVkIGRvY3VtZW50XG5cdFx0XHQvLyBzbyBhbnkgcGFyc2VkIGVsZW1lbnRzIHdpdGggVVJMc1xuXHRcdFx0Ly8gYXJlIGJhc2VkIG9uIHRoZSBkb2N1bWVudCdzIFVSTCAoZ2gtMjk2NSlcblx0XHRcdGJhc2UgPSBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiYmFzZVwiICk7XG5cdFx0XHRiYXNlLmhyZWYgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmO1xuXHRcdFx0Y29udGV4dC5oZWFkLmFwcGVuZENoaWxkKCBiYXNlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnRleHQgPSBkb2N1bWVudDtcblx0XHR9XG5cdH1cblxuXHRwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKTtcblx0c2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTtcblxuXHQvLyBTaW5nbGUgdGFnXG5cdGlmICggcGFyc2VkICkge1xuXHRcdHJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWyAxIF0gKSBdO1xuXHR9XG5cblx0cGFyc2VkID0gYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLyoqXG4gKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlXG4gKi9cbmpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZiggXCIgXCIgKTtcblxuXHRpZiAoIG9mZiA+IC0xICkge1xuXHRcdHNlbGVjdG9yID0gc3RyaXBBbmRDb2xsYXBzZSggdXJsLnNsaWNlKCBvZmYgKSApO1xuXHRcdHVybCA9IHVybC5zbGljZSggMCwgb2ZmICk7XG5cdH1cblxuXHQvLyBJZiBpdCdzIGEgZnVuY3Rpb25cblx0aWYgKCBpc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrXG5cdFx0Y2FsbGJhY2sgPSBwYXJhbXM7XG5cdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXG5cdC8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmdcblx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0dHlwZSA9IFwiUE9TVFwiO1xuXHR9XG5cblx0Ly8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3Rcblx0aWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG5cdFx0alF1ZXJ5LmFqYXgoIHtcblx0XHRcdHVybDogdXJsLFxuXG5cdFx0XHQvLyBJZiBcInR5cGVcIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gXCJHRVRcIiBtZXRob2Qgd2lsbCBiZSB1c2VkLlxuXHRcdFx0Ly8gTWFrZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGV4cGxpY2l0IHNpbmNlXG5cdFx0XHQvLyB1c2VyIGNhbiBvdmVycmlkZSBpdCB0aHJvdWdoIGFqYXhTZXR1cCBtZXRob2Rcblx0XHRcdHR5cGU6IHR5cGUgfHwgXCJHRVRcIixcblx0XHRcdGRhdGFUeXBlOiBcImh0bWxcIixcblx0XHRcdGRhdGE6IHBhcmFtc1xuXHRcdH0gKS5kb25lKCBmdW5jdGlvbiggcmVzcG9uc2VUZXh0ICkge1xuXG5cdFx0XHQvLyBTYXZlIHJlc3BvbnNlIGZvciB1c2UgaW4gY29tcGxldGUgY2FsbGJhY2tcblx0XHRcdHJlc3BvbnNlID0gYXJndW1lbnRzO1xuXG5cdFx0XHRzZWxmLmh0bWwoIHNlbGVjdG9yID9cblxuXHRcdFx0XHQvLyBJZiBhIHNlbGVjdG9yIHdhcyBzcGVjaWZpZWQsIGxvY2F0ZSB0aGUgcmlnaHQgZWxlbWVudHMgaW4gYSBkdW1teSBkaXZcblx0XHRcdFx0Ly8gRXhjbHVkZSBzY3JpcHRzIHRvIGF2b2lkIElFICdQZXJtaXNzaW9uIERlbmllZCcgZXJyb3JzXG5cdFx0XHRcdGpRdWVyeSggXCI8ZGl2PlwiICkuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG5cdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXG5cdFx0Ly8gSWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImRhdGFcIiwgXCJzdGF0dXNcIiwgXCJqcVhIUlwiXG5cdFx0Ly8gYnV0IHRoZXkgYXJlIGlnbm9yZWQgYmVjYXVzZSByZXNwb25zZSB3YXMgc2V0IGFib3ZlLlxuXHRcdC8vIElmIGl0IGZhaWxzLCB0aGlzIGZ1bmN0aW9uIGdldHMgXCJqcVhIUlwiLCBcInN0YXR1c1wiLCBcImVycm9yXCJcblx0XHR9ICkuYWx3YXlzKCBjYWxsYmFjayAmJiBmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHtcblx0XHRcdHNlbGYuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGlzLCByZXNwb25zZSB8fCBbIGpxWEhSLnJlc3BvbnNlVGV4dCwgc3RhdHVzLCBqcVhIUiBdICk7XG5cdFx0XHR9ICk7XG5cdFx0fSApO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5cblxuXG4vLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xualF1ZXJ5LmVhY2goIFtcblx0XCJhamF4U3RhcnRcIixcblx0XCJhamF4U3RvcFwiLFxuXHRcImFqYXhDb21wbGV0ZVwiLFxuXHRcImFqYXhFcnJvclwiLFxuXHRcImFqYXhTdWNjZXNzXCIsXG5cdFwiYWpheFNlbmRcIlxuXSwgZnVuY3Rpb24oIGksIHR5cGUgKSB7XG5cdGpRdWVyeS5mblsgdHlwZSBdID0gZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlLCBmbiApO1xuXHR9O1xufSApO1xuXG5cblxuXG5qUXVlcnkuZXhwci5wc2V1ZG9zLmFuaW1hdGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiBqUXVlcnkuZ3JlcCggalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiBlbGVtID09PSBmbi5lbGVtO1xuXHR9ICkubGVuZ3RoO1xufTtcblxuXG5cblxualF1ZXJ5Lm9mZnNldCA9IHtcblx0c2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcblx0XHR2YXIgY3VyUG9zaXRpb24sIGN1ckxlZnQsIGN1ckNTU1RvcCwgY3VyVG9wLCBjdXJPZmZzZXQsIGN1ckNTU0xlZnQsIGNhbGN1bGF0ZVBvc2l0aW9uLFxuXHRcdFx0cG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSxcblx0XHRcdGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcblx0XHRcdHByb3BzID0ge307XG5cblx0XHQvLyBTZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG5cdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdGVsZW0uc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0fVxuXG5cdFx0Y3VyT2Zmc2V0ID0gY3VyRWxlbS5vZmZzZXQoKTtcblx0XHRjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG5cdFx0Y3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwibGVmdFwiICk7XG5cdFx0Y2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApICYmXG5cdFx0XHQoIGN1ckNTU1RvcCArIGN1ckNTU0xlZnQgKS5pbmRleE9mKCBcImF1dG9cIiApID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7XG5cblx0XHRcdC8vIFVzZSBqUXVlcnkuZXh0ZW5kIGhlcmUgdG8gYWxsb3cgbW9kaWZpY2F0aW9uIG9mIGNvb3JkaW5hdGVzIGFyZ3VtZW50IChnaC0xODQ4KVxuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgalF1ZXJ5LmV4dGVuZCgge30sIGN1ck9mZnNldCApICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0Ly8gb2Zmc2V0KCkgcmVsYXRlcyBhbiBlbGVtZW50J3MgYm9yZGVyIGJveCB0byB0aGUgZG9jdW1lbnQgb3JpZ2luXG5cdG9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBQcmVzZXJ2ZSBjaGFpbmluZyBmb3Igc2V0dGVyXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIG9wdGlvbnMgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHRoaXMgOlxuXHRcdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRcdGpRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KCB0aGlzLCBvcHRpb25zLCBpICk7XG5cdFx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHR2YXIgcmVjdCwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXTtcblxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHplcm9zIGZvciBkaXNjb25uZWN0ZWQgYW5kIGhpZGRlbiAoZGlzcGxheTogbm9uZSkgZWxlbWVudHMgKGdoLTIzMTApXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdFx0Ly8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYVxuXHRcdC8vIGRpc2Nvbm5lY3RlZCBub2RlIGluIElFIHRocm93cyBhbiBlcnJvclxuXHRcdGlmICggIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XHR9XG5cblx0XHQvLyBHZXQgZG9jdW1lbnQtcmVsYXRpdmUgcG9zaXRpb24gYnkgYWRkaW5nIHZpZXdwb3J0IHNjcm9sbCB0byB2aWV3cG9ydC1yZWxhdGl2ZSBnQkNSXG5cdFx0cmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0d2luID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IHJlY3QudG9wICsgd2luLnBhZ2VZT2Zmc2V0LFxuXHRcdFx0bGVmdDogcmVjdC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0XG5cdFx0fTtcblx0fSxcblxuXHQvLyBwb3NpdGlvbigpIHJlbGF0ZXMgYW4gZWxlbWVudCdzIG1hcmdpbiBib3ggdG8gaXRzIG9mZnNldCBwYXJlbnQncyBwYWRkaW5nIGJveFxuXHQvLyBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSBiZWhhdmlvciBvZiBDU1MgYWJzb2x1dGUgcG9zaXRpb25pbmdcblx0cG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsIGRvYyxcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXG5cdFx0Ly8gcG9zaXRpb246Zml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHRoZSB2aWV3cG9ydCwgd2hpY2ggaXRzZWxmIGFsd2F5cyBoYXMgemVybyBvZmZzZXRcblx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApID09PSBcImZpeGVkXCIgKSB7XG5cblx0XHRcdC8vIEFzc3VtZSBwb3NpdGlvbjpmaXhlZCBpbXBsaWVzIGF2YWlsYWJpbGl0eSBvZiBnZXRCb3VuZGluZ0NsaWVudFJlY3Rcblx0XHRcdG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblxuXHRcdFx0Ly8gQWNjb3VudCBmb3IgdGhlICpyZWFsKiBvZmZzZXQgcGFyZW50LCB3aGljaCBjYW4gYmUgdGhlIGRvY3VtZW50IG9yIGl0cyByb290IGVsZW1lbnRcblx0XHRcdC8vIHdoZW4gYSBzdGF0aWNhbGx5IHBvc2l0aW9uZWQgZWxlbWVudCBpcyBpZGVudGlmaWVkXG5cdFx0XHRkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cdFx0XHRvZmZzZXRQYXJlbnQgPSBlbGVtLm9mZnNldFBhcmVudCB8fCBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiZcblx0XHRcdFx0KCBvZmZzZXRQYXJlbnQgPT09IGRvYy5ib2R5IHx8IG9mZnNldFBhcmVudCA9PT0gZG9jLmRvY3VtZW50RWxlbWVudCApICYmXG5cdFx0XHRcdGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSB7XG5cblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIG9mZnNldFBhcmVudCAmJiBvZmZzZXRQYXJlbnQgIT09IGVsZW0gJiYgb2Zmc2V0UGFyZW50Lm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIEluY29ycG9yYXRlIGJvcmRlcnMgaW50byBpdHMgb2Zmc2V0LCBzaW5jZSB0aGV5IGFyZSBvdXRzaWRlIGl0cyBjb250ZW50IG9yaWdpblxuXHRcdFx0XHRwYXJlbnRPZmZzZXQgPSBqUXVlcnkoIG9mZnNldFBhcmVudCApLm9mZnNldCgpO1xuXHRcdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJib3JkZXJUb3BXaWR0aFwiLCB0cnVlICk7XG5cdFx0XHRcdHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJib3JkZXJMZWZ0V2lkdGhcIiwgdHJ1ZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFN1YnRyYWN0IHBhcmVudCBvZmZzZXRzIGFuZCBlbGVtZW50IG1hcmdpbnNcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luVG9wXCIsIHRydWUgKSxcblx0XHRcdGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnQgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiwgdHJ1ZSApXG5cdFx0fTtcblx0fSxcblxuXHQvLyBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBkb2N1bWVudEVsZW1lbnQgaW4gdGhlIGZvbGxvd2luZyBjYXNlczpcblx0Ly8gMSkgRm9yIHRoZSBlbGVtZW50IGluc2lkZSB0aGUgaWZyYW1lIHdpdGhvdXQgb2Zmc2V0UGFyZW50LCB0aGlzIG1ldGhvZCB3aWxsIHJldHVyblxuXHQvLyAgICBkb2N1bWVudEVsZW1lbnQgb2YgdGhlIHBhcmVudCB3aW5kb3dcblx0Ly8gMikgRm9yIHRoZSBoaWRkZW4gb3IgZGV0YWNoZWQgZWxlbWVudFxuXHQvLyAzKSBGb3IgYm9keSBvciBodG1sIGVsZW1lbnQsIGkuZS4gaW4gY2FzZSBvZiB0aGUgaHRtbCBub2RlIC0gaXQgd2lsbCByZXR1cm4gaXRzZWxmXG5cdC8vXG5cdC8vIGJ1dCB0aG9zZSBleGNlcHRpb25zIHdlcmUgbmV2ZXIgcHJlc2VudGVkIGFzIGEgcmVhbCBsaWZlIHVzZS1jYXNlc1xuXHQvLyBhbmQgbWlnaHQgYmUgY29uc2lkZXJlZCBhcyBtb3JlIHByZWZlcmFibGUgcmVzdWx0cy5cblx0Ly9cblx0Ly8gVGhpcyBsb2dpYywgaG93ZXZlciwgaXMgbm90IGd1YXJhbnRlZWQgYW5kIGNhbiBjaGFuZ2UgYXQgYW55IHBvaW50IGluIHRoZSBmdXR1cmVcblx0b2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50O1xuXG5cdFx0XHR3aGlsZSAoIG9mZnNldFBhcmVudCAmJiBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwicG9zaXRpb25cIiApID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50RWxlbWVudDtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXG5cdFx0XHQvLyBDb2FsZXNjZSBkb2N1bWVudHMgYW5kIHdpbmRvd3Ncblx0XHRcdHZhciB3aW47XG5cdFx0XHRpZiAoIGlzV2luZG93KCBlbGVtICkgKSB7XG5cdFx0XHRcdHdpbiA9IGVsZW07XG5cdFx0XHR9IGVsc2UgaWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR3aW4gPSBlbGVtLmRlZmF1bHRWaWV3O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luLnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbi5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9O1xufSApO1xuXG4vLyBTdXBwb3J0OiBTYWZhcmkgPD03IC0gOS4xLCBDaHJvbWUgPD0zNyAtIDQ5XG4vLyBBZGQgdGhlIHRvcC9sZWZ0IGNzc0hvb2tzIHVzaW5nIGpRdWVyeS5mbi5wb3NpdGlvblxuLy8gV2Via2l0IGJ1ZzogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTI5MDg0XG4vLyBCbGluayBidWc6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU4OTM0N1xuLy8gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHBlcmNlbnQgd2hlbiBzcGVjaWZpZWQgZm9yIHRvcC9sZWZ0L2JvdHRvbS9yaWdodDtcbi8vIHJhdGhlciB0aGFuIG1ha2UgdGhlIGNzcyBtb2R1bGUgZGVwZW5kIG9uIHRoZSBvZmZzZXQgbW9kdWxlLCBqdXN0IGNoZWNrIGZvciBpdCBoZXJlXG5qUXVlcnkuZWFjaCggWyBcInRvcFwiLCBcImxlZnRcIiBdLCBmdW5jdGlvbiggaSwgcHJvcCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcm9wIF0gPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucGl4ZWxQb3NpdGlvbixcblx0XHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0XHRjb21wdXRlZCA9IGN1ckNTUyggZWxlbSwgcHJvcCApO1xuXG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSApO1xuXG5cbi8vIENyZWF0ZSBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aCwgb3V0ZXJIZWlnaHQgYW5kIG91dGVyV2lkdGggbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgSGVpZ2h0OiBcImhlaWdodFwiLCBXaWR0aDogXCJ3aWR0aFwiIH0sIGZ1bmN0aW9uKCBuYW1lLCB0eXBlICkge1xuXHRqUXVlcnkuZWFjaCggeyBwYWRkaW5nOiBcImlubmVyXCIgKyBuYW1lLCBjb250ZW50OiB0eXBlLCBcIlwiOiBcIm91dGVyXCIgKyBuYW1lIH0sXG5cdFx0ZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cblx0XHQvLyBNYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGhcblx0XHRqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHtcblx0XHRcdHZhciBjaGFpbmFibGUgPSBhcmd1bWVudHMubGVuZ3RoICYmICggZGVmYXVsdEV4dHJhIHx8IHR5cGVvZiBtYXJnaW4gIT09IFwiYm9vbGVhblwiICksXG5cdFx0XHRcdGV4dHJhID0gZGVmYXVsdEV4dHJhIHx8ICggbWFyZ2luID09PSB0cnVlIHx8IHZhbHVlID09PSB0cnVlID8gXCJtYXJnaW5cIiA6IFwiYm9yZGVyXCIgKTtcblxuXHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgZG9jO1xuXG5cdFx0XHRcdGlmICggaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vICQoIHdpbmRvdyApLm91dGVyV2lkdGgvSGVpZ2h0IHJldHVybiB3L2ggaW5jbHVkaW5nIHNjcm9sbGJhcnMgKGdoLTE3MjkpXG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmNOYW1lLmluZGV4T2YoIFwib3V0ZXJcIiApID09PSAwID9cblx0XHRcdFx0XHRcdGVsZW1bIFwiaW5uZXJcIiArIG5hbWUgXSA6XG5cdFx0XHRcdFx0XHRlbGVtLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsgXCJjbGllbnRcIiArIG5hbWUgXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBkb2N1bWVudCB3aWR0aCBvciBoZWlnaHRcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdGRvYyA9IGVsZW0uZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0XHRcdFx0Ly8gRWl0aGVyIHNjcm9sbFtXaWR0aC9IZWlnaHRdIG9yIG9mZnNldFtXaWR0aC9IZWlnaHRdIG9yIGNsaWVudFtXaWR0aC9IZWlnaHRdLFxuXHRcdFx0XHRcdC8vIHdoaWNoZXZlciBpcyBncmVhdGVzdFxuXHRcdFx0XHRcdHJldHVybiBNYXRoLm1heChcblx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJzY3JvbGxcIiArIG5hbWUgXSwgZG9jWyBcInNjcm9sbFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcIm9mZnNldFwiICsgbmFtZSBdLCBkb2NbIFwib2Zmc2V0XCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRkb2NbIFwiY2xpZW50XCIgKyBuYW1lIF1cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSApO1xuXHRcdH07XG5cdH0gKTtcbn0gKTtcblxuXG5qUXVlcnkuZWFjaCggKCBcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudVwiICkuc3BsaXQoIFwiIFwiICksXG5cdGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG5cdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG5cdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHR9O1xufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGhvdmVyOiBmdW5jdGlvbiggZm5PdmVyLCBmbk91dCApIHtcblx0XHRyZXR1cm4gdGhpcy5tb3VzZWVudGVyKCBmbk92ZXIgKS5tb3VzZWxlYXZlKCBmbk91dCB8fCBmbk92ZXIgKTtcblx0fVxufSApO1xuXG5cblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblxuXHRcdC8vICggbmFtZXNwYWNlICkgb3IgKCBzZWxlY3RvciwgdHlwZXMgWywgZm5dIClcblx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/XG5cdFx0XHR0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDpcblx0XHRcdHRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbiApO1xuXHR9XG59ICk7XG5cbi8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueVxuLy8gYXJndW1lbnRzLlxuLy8galF1ZXJ5LnByb3h5IGlzIGRlcHJlY2F0ZWQgdG8gcHJvbW90ZSBzdGFuZGFyZHMgKHNwZWNpZmljYWxseSBGdW5jdGlvbiNiaW5kKVxuLy8gSG93ZXZlciwgaXQgaXMgbm90IHNsYXRlZCBmb3IgcmVtb3ZhbCBhbnkgdGltZSBzb29uXG5qUXVlcnkucHJveHkgPSBmdW5jdGlvbiggZm4sIGNvbnRleHQgKSB7XG5cdHZhciB0bXAsIGFyZ3MsIHByb3h5O1xuXG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0dG1wID0gZm5bIGNvbnRleHQgXTtcblx0XHRjb250ZXh0ID0gZm47XG5cdFx0Zm4gPSB0bXA7XG5cdH1cblxuXHQvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuXHQvLyB0aGlzIHRocm93cyBhIFR5cGVFcnJvciwgYnV0IHdlIHdpbGwganVzdCByZXR1cm4gdW5kZWZpbmVkLlxuXHRpZiAoICFpc0Z1bmN0aW9uKCBmbiApICkge1xuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblxuXHQvLyBTaW11bGF0ZWQgYmluZFxuXHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAyICk7XG5cdHByb3h5ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGZuLmFwcGx5KCBjb250ZXh0IHx8IHRoaXMsIGFyZ3MuY29uY2F0KCBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSApICk7XG5cdH07XG5cblx0Ly8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkXG5cdHByb3h5Lmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCBqUXVlcnkuZ3VpZCsrO1xuXG5cdHJldHVybiBwcm94eTtcbn07XG5cbmpRdWVyeS5ob2xkUmVhZHkgPSBmdW5jdGlvbiggaG9sZCApIHtcblx0aWYgKCBob2xkICkge1xuXHRcdGpRdWVyeS5yZWFkeVdhaXQrKztcblx0fSBlbHNlIHtcblx0XHRqUXVlcnkucmVhZHkoIHRydWUgKTtcblx0fVxufTtcbmpRdWVyeS5pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmpRdWVyeS5wYXJzZUpTT04gPSBKU09OLnBhcnNlO1xualF1ZXJ5Lm5vZGVOYW1lID0gbm9kZU5hbWU7XG5qUXVlcnkuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5qUXVlcnkuaXNXaW5kb3cgPSBpc1dpbmRvdztcbmpRdWVyeS5jYW1lbENhc2UgPSBjYW1lbENhc2U7XG5qUXVlcnkudHlwZSA9IHRvVHlwZTtcblxualF1ZXJ5Lm5vdyA9IERhdGUubm93O1xuXG5qUXVlcnkuaXNOdW1lcmljID0gZnVuY3Rpb24oIG9iaiApIHtcblxuXHQvLyBBcyBvZiBqUXVlcnkgMy4wLCBpc051bWVyaWMgaXMgbGltaXRlZCB0b1xuXHQvLyBzdHJpbmdzIGFuZCBudW1iZXJzIChwcmltaXRpdmVzIG9yIG9iamVjdHMpXG5cdC8vIHRoYXQgY2FuIGJlIGNvZXJjZWQgdG8gZmluaXRlIG51bWJlcnMgKGdoLTI2NjIpXG5cdHZhciB0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApO1xuXHRyZXR1cm4gKCB0eXBlID09PSBcIm51bWJlclwiIHx8IHR5cGUgPT09IFwic3RyaW5nXCIgKSAmJlxuXG5cdFx0Ly8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKFwiXCIpXG5cdFx0Ly8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuXHRcdC8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTlxuXHRcdCFpc05hTiggb2JqIC0gcGFyc2VGbG9hdCggb2JqICkgKTtcbn07XG5cblxuXG5cbi8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdFxuLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4vLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG4vLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2Vcbi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXG4vLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblx0ZGVmaW5lKCBcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fSApO1xufVxuXG5cblxuXG52YXJcblxuXHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0X2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksXG5cblx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XyQgPSB3aW5kb3cuJDtcblxualF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0aWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy4kID0gXyQ7XG5cdH1cblxuXHRpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeTtcbn07XG5cbi8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG4vLyAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpXG4vLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpXG5pZiAoICFub0dsb2JhbCApIHtcblx0d2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0galF1ZXJ5O1xufVxuXG5cblxuXG5yZXR1cm4galF1ZXJ5O1xufSApO1xuIiwidmFyIF9QUk9GSUxFO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZUN0cmx7XG4gICAgY29uc3RydWN0b3IoJHNjb3BlKXtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgICAgICRzY29wZS5hY2NvdW50TmFtZT1cIkRvZG9sXCI7XG4gICAgfTtcblxuICAgIHN0YXRpYyBpbml0KCl7XG4gICAgICAgIF9QUk9GSUxFPSdET09EOycgXG4gICAgICAgIHJldHVybiBfUFJPRklMRTtcbiAgICB9XG4gICAgXG59IiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgeyBleHRlbmQsIHNpbGVudFJlamVjdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXMgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbnZhciBSZWplY3RUeXBlO1xuKGZ1bmN0aW9uIChSZWplY3RUeXBlKSB7XG4gICAgLyoqXG4gICAgICogQSBuZXcgdHJhbnNpdGlvbiBzdXBlcnNlZGVkIHRoaXMgb25lLlxuICAgICAqXG4gICAgICogV2hpbGUgdGhpcyB0cmFuc2l0aW9uIHdhcyBydW5uaW5nLCBhIG5ldyB0cmFuc2l0aW9uIHN0YXJ0ZWQuXG4gICAgICogVGhpcyB0cmFuc2l0aW9uIGlzIGNhbmNlbGxlZCBiZWNhdXNlIGl0IHdhcyBzdXBlcnNlZGVkIGJ5IG5ldyB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIlNVUEVSU0VERURcIl0gPSAyXSA9IFwiU1VQRVJTRURFRFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2l0aW9uIHdhcyBhYm9ydGVkXG4gICAgICpcbiAgICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgYWJvcnRlZCBieSBhIGhvb2sgd2hpY2ggcmV0dXJuZWQgYGZhbHNlYFxuICAgICAqL1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIkFCT1JURURcIl0gPSAzXSA9IFwiQUJPUlRFRFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2l0aW9uIHdhcyBpbnZhbGlkXG4gICAgICpcbiAgICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgbmV2ZXIgc3RhcnRlZCBiZWNhdXNlIGl0IHdhcyBpbnZhbGlkXG4gICAgICovXG4gICAgUmVqZWN0VHlwZVtSZWplY3RUeXBlW1wiSU5WQUxJRFwiXSA9IDRdID0gXCJJTlZBTElEXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zaXRpb24gd2FzIGlnbm9yZWRcbiAgICAgKlxuICAgICAqIFRoZSB0cmFuc2l0aW9uIHdhcyBpZ25vcmVkIGJlY2F1c2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QuXG4gICAgICpcbiAgICAgKiBFaXRoZXI6XG4gICAgICpcbiAgICAgKiAtIFRoZSB0cmFuc2l0aW9uIGlzIHRhcmdldGluZyB0aGUgY3VycmVudCBzdGF0ZSBhbmQgcGFyYW1ldGVyIHZhbHVlc1xuICAgICAqIC0gVGhlIHRyYW5zaXRpb24gaXMgdGFyZ2V0aW5nIHRoZSBzYW1lIHN0YXRlIGFuZCBwYXJhbWV0ZXIgdmFsdWVzIGFzIHRoZSBjdXJyZW50bHkgcnVubmluZyB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIklHTk9SRURcIl0gPSA1XSA9IFwiSUdOT1JFRFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2l0aW9uIGVycm9yZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIGdlbmVyYWxseSBtZWFucyBhIGhvb2sgdGhyZXcgYW4gZXJyb3Igb3IgcmV0dXJuZWQgYSByZWplY3RlZCBwcm9taXNlXG4gICAgICovXG4gICAgUmVqZWN0VHlwZVtSZWplY3RUeXBlW1wiRVJST1JcIl0gPSA2XSA9IFwiRVJST1JcIjtcbn0pKFJlamVjdFR5cGUgfHwgKFJlamVjdFR5cGUgPSB7fSkpO1xuZXhwb3J0IHsgUmVqZWN0VHlwZSB9O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBpZCA9IDA7XG52YXIgUmVqZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlamVjdGlvbih0eXBlLCBtZXNzYWdlLCBkZXRhaWwpIHtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy4kaWQgPSBpZCsrO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLmRldGFpbCA9IGRldGFpbDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqIGlzIGEgcmVqZWN0ZWQgcHJvbWlzZSBjcmVhdGVkIGZyb20gdGhlIGBhc1Byb21pc2VgIGZhY3RvcnkgKi9cbiAgICBSZWplY3Rpb24uaXNSZWplY3Rpb25Qcm9taXNlID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gJ2Z1bmN0aW9uJyAmJiBpcyhSZWplY3Rpb24pKG9iai5fdHJhbnNpdGlvblJlamVjdGlvbik7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gdHJhbnNpdGlvbiBzdXBlcnNlZGVkICovXG4gICAgUmVqZWN0aW9uLnN1cGVyc2VkZWQgPSBmdW5jdGlvbiAoZGV0YWlsLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIHN1cGVyc2VkZWQgYnkgYSBkaWZmZXJlbnQgdHJhbnNpdGlvbic7XG4gICAgICAgIHZhciByZWplY3Rpb24gPSBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuU1VQRVJTRURFRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWRpcmVjdGVkKSB7XG4gICAgICAgICAgICByZWplY3Rpb24ucmVkaXJlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlamVjdGlvbjtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byByZWRpcmVjdGVkIHRyYW5zaXRpb24gKi9cbiAgICBSZWplY3Rpb24ucmVkaXJlY3RlZCA9IGZ1bmN0aW9uIChkZXRhaWwpIHtcbiAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5zdXBlcnNlZGVkKGRldGFpbCwgeyByZWRpcmVjdGVkOiB0cnVlIH0pO1xuICAgIH07XG4gICAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGludmFsaWQgdHJhbnNpdGlvbiAqL1xuICAgIFJlamVjdGlvbi5pbnZhbGlkID0gZnVuY3Rpb24gKGRldGFpbCkge1xuICAgICAgICB2YXIgbWVzc2FnZSA9ICdUaGlzIHRyYW5zaXRpb24gaXMgaW52YWxpZCc7XG4gICAgICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuSU5WQUxJRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byBpZ25vcmVkIHRyYW5zaXRpb24gKi9cbiAgICBSZWplY3Rpb24uaWdub3JlZCA9IGZ1bmN0aW9uIChkZXRhaWwpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnVGhlIHRyYW5zaXRpb24gd2FzIGlnbm9yZWQnO1xuICAgICAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLklHTk9SRUQsIG1lc3NhZ2UsIGRldGFpbCk7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gYWJvcnRlZCB0cmFuc2l0aW9uICovXG4gICAgUmVqZWN0aW9uLmFib3J0ZWQgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIGFib3J0ZWQnO1xuICAgICAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLkFCT1JURUQsIG1lc3NhZ2UsIGRldGFpbCk7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gYWJvcnRlZCB0cmFuc2l0aW9uICovXG4gICAgUmVqZWN0aW9uLmVycm9yZWQgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGVycm9yZWQnO1xuICAgICAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLkVSUk9SLCBtZXNzYWdlLCBkZXRhaWwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFJlamVjdGlvblxuICAgICAqXG4gICAgICogTm9ybWFsaXplcyBhIHZhbHVlIGFzIGEgUmVqZWN0aW9uLlxuICAgICAqIElmIHRoZSB2YWx1ZSBpcyBhbHJlYWR5IGEgUmVqZWN0aW9uLCByZXR1cm5zIGl0LlxuICAgICAqIE90aGVyd2lzZSwgd3JhcHMgYW5kIHJldHVybnMgdGhlIHZhbHVlIGFzIGEgUmVqZWN0aW9uIChSZWplY3Rpb24gdHlwZTogRVJST1IpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYGRldGFpbGAgaWYgaXQgaXMgYWxyZWFkeSBhIGBSZWplY3Rpb25gLCBlbHNlIHJldHVybnMgYW4gRVJST1IgUmVqZWN0aW9uLlxuICAgICAqL1xuICAgIFJlamVjdGlvbi5ub3JtYWxpemUgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XG4gICAgICAgIHJldHVybiBpcyhSZWplY3Rpb24pKGRldGFpbCkgPyBkZXRhaWwgOiBSZWplY3Rpb24uZXJyb3JlZChkZXRhaWwpO1xuICAgIH07XG4gICAgUmVqZWN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRldGFpbFN0cmluZyA9IGZ1bmN0aW9uIChkKSB7IHJldHVybiAoZCAmJiBkLnRvU3RyaW5nICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nID8gZC50b1N0cmluZygpIDogc3RyaW5naWZ5KGQpKTsgfTtcbiAgICAgICAgdmFyIGRldGFpbCA9IGRldGFpbFN0cmluZyh0aGlzLmRldGFpbCk7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsICRpZCA9IF9hLiRpZCwgdHlwZSA9IF9hLnR5cGUsIG1lc3NhZ2UgPSBfYS5tZXNzYWdlO1xuICAgICAgICByZXR1cm4gXCJUcmFuc2l0aW9uIFJlamVjdGlvbigkaWQ6IFwiICsgJGlkICsgXCIgdHlwZTogXCIgKyB0eXBlICsgXCIsIG1lc3NhZ2U6IFwiICsgbWVzc2FnZSArIFwiLCBkZXRhaWw6IFwiICsgZGV0YWlsICsgXCIpXCI7XG4gICAgfTtcbiAgICBSZWplY3Rpb24ucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGV4dGVuZChzaWxlbnRSZWplY3Rpb24odGhpcyksIHsgX3RyYW5zaXRpb25SZWplY3Rpb246IHRoaXMgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVqZWN0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFJlamVjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVqZWN0RmFjdG9yeS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIGNvcmVcbiAqL1xuLyoqXG4gKiBNYXRjaGVzIHN0YXRlIG5hbWVzIHVzaW5nIGdsb2ItbGlrZSBwYXR0ZXJuIHN0cmluZ3MuXG4gKlxuICogR2xvYnMgY2FuIGJlIHVzZWQgaW4gc3BlY2lmaWMgQVBJcyBpbmNsdWRpbmc6XG4gKlxuICogLSBbW1N0YXRlU2VydmljZS5pc11dXG4gKiAtIFtbU3RhdGVTZXJ2aWNlLmluY2x1ZGVzXV1cbiAqIC0gVGhlIGZpcnN0IGFyZ3VtZW50IHRvIEhvb2sgUmVnaXN0cmF0aW9uIGZ1bmN0aW9ucyBsaWtlIFtbVHJhbnNpdGlvblNlcnZpY2Uub25TdGFydF1dXG4gKiAgICAtIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBhbmQgW1tIb29rTWF0Y2hDcml0ZXJpb25dXVxuICpcbiAqIEEgYEdsb2JgIHN0cmluZyBpcyBhIHBhdHRlcm4gd2hpY2ggbWF0Y2hlcyBzdGF0ZSBuYW1lcy5cbiAqIE5lc3RlZCBzdGF0ZSBuYW1lcyBhcmUgc3BsaXQgaW50byBzZWdtZW50cyAoc2VwYXJhdGVkIGJ5IGEgZG90KSB3aGVuIHByb2Nlc3NpbmcuXG4gKiBUaGUgc3RhdGUgbmFtZWQgYGZvby5iYXIuYmF6YCBpcyBzcGxpdCBpbnRvIHRocmVlIHNlZ21lbnRzIFsnZm9vJywgJ2JhcicsICdiYXonXVxuICpcbiAqIEdsb2JzIHdvcmsgYWNjb3JkaW5nIHRvIHRoZSBmb2xsb3dpbmcgcnVsZXM6XG4gKlxuICogIyMjIEV4YWN0IG1hdGNoOlxuICpcbiAqIFRoZSBnbG9iIGAnQS5CJ2AgbWF0Y2hlcyB0aGUgc3RhdGUgbmFtZWQgZXhhY3RseSBgJ0EuQidgLlxuICpcbiAqIHwgR2xvYiAgICAgICAgfE1hdGNoZXMgc3RhdGVzIG5hbWVkfERvZXMgbm90IG1hdGNoIHN0YXRlIG5hbWVkfFxuICogfDotLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IGAnQSdgICAgICAgIHwgYCdBJ2AgICAgICAgICAgICAgICB8IGAnQidgICwgYCdBLkMnYCAgICAgIHxcbiAqIHwgYCdBLkInYCAgICAgfCBgJ0EuQidgICAgICAgICAgICAgIHwgYCdBJ2AgLCBgJ0EuQi5DJ2AgICAgfFxuICogfCBgJ2ZvbydgICAgICB8IGAnZm9vJ2AgICAgICAgICAgICAgfCBgJ0ZPTydgICwgYCdmb28uYmFyJ2B8XG4gKlxuICogIyMjIFNpbmdsZSBzdGFyIChgKmApXG4gKlxuICogQSBzaW5nbGUgc3RhciAoYCpgKSBpcyBhIHdpbGRjYXJkIHRoYXQgbWF0Y2hlcyBleGFjdGx5IG9uZSBzZWdtZW50LlxuICpcbiAqIHwgR2xvYiAgICAgICAgfE1hdGNoZXMgc3RhdGVzIG5hbWVkICB8RG9lcyBub3QgbWF0Y2ggc3RhdGUgbmFtZWQgfFxuICogfDotLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IGAnKidgICAgICAgIHwgYCdBJ2AgLCBgJ1onYCAgICAgICAgfCBgJ0EuQidgICwgYCdaLlkuWCdgICAgICAgIHxcbiAqIHwgYCdBLionYCAgICAgfCBgJ0EuQidgICwgYCdBLkMnYCAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgICAgICAgfFxuICogfCBgJ0EuKi4qJ2AgICB8IGAnQS5CLkMnYCAsIGAnQS5YLlknYHwgYCdBJ2AsIGAnQS5CJ2AgLCBgJ1ouWS5YJ2B8XG4gKlxuICogIyMjIERvdWJsZSBzdGFyIChgKipgKVxuICpcbiAqIEEgZG91YmxlIHN0YXIgKGAnKionYCkgaXMgYSB3aWxkY2FyZCB0aGF0IG1hdGNoZXMgKnplcm8gb3IgbW9yZSBzZWdtZW50cypcbiAqXG4gKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxEb2VzIG5vdCBtYXRjaCBzdGF0ZSBuYW1lZCAgICAgICAgIHxcbiAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJyoqJ2AgICAgICB8IGAnQSdgICwgYCdBLkInYCwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgICB8IChtYXRjaGVzIGFsbCBzdGF0ZXMpICAgICAgICAgICAgICB8XG4gKiB8IGAnQS4qKidgICAgIHwgYCdBJ2AgLCBgJ0EuQidgICwgYCdBLkMuWCdgICAgICAgICAgICAgICAgICAgIHwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYCcqKi5YJ2AgICAgfCBgJ1gnYCAsIGAnQS5YJ2AgLCBgJ1ouWS5YJ2AgICAgICAgICAgICAgICAgICAgfCBgJ0EnYCAsIGAnQS5sb2dpbi5aJ2AgICAgICAgICAgICAgfFxuICogfCBgJ0EuKiouWCdgICB8IGAnQS5YJ2AgLCBgJ0EuQi5YJ2AgLCBgJ0EuQi5DLlgnYCAgICAgICAgICAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgICAgICAgICAgICAgICB8XG4gKlxuICovXG52YXIgR2xvYiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHbG9iKHRleHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5nbG9iID0gdGV4dC5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgcmVnZXhwU3RyaW5nID0gdGhpcy50ZXh0XG4gICAgICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc2VnKSB7XG4gICAgICAgICAgICBpZiAoc2VnID09PSAnKionKVxuICAgICAgICAgICAgICAgIHJldHVybiAnKD86fCg/OlxcXFwuW14uXSopKiknO1xuICAgICAgICAgICAgaWYgKHNlZyA9PT0gJyonKVxuICAgICAgICAgICAgICAgIHJldHVybiAnXFxcXC5bXi5dKic7XG4gICAgICAgICAgICByZXR1cm4gJ1xcXFwuJyArIHNlZztcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgICAgdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKCdeJyArIHJlZ2V4cFN0cmluZyArICckJyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBoYXMgZ2xvYi1saWtlIGNoYXJhY3RlcnMgaW4gaXQgKi9cbiAgICBHbG9iLmlzID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgcmV0dXJuICEhL1shLCpdKy8uZXhlYyh0ZXh0KTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgZ2xvYiBmcm9tIHRoZSBzdHJpbmcsIG9yIG51bGwgaWYgdGhlIHN0cmluZyBpc24ndCBHbG9iLWxpa2UgKi9cbiAgICBHbG9iLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICByZXR1cm4gR2xvYi5pcyh0ZXh0KSA/IG5ldyBHbG9iKHRleHQpIDogbnVsbDtcbiAgICB9O1xuICAgIEdsb2IucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdleHAudGVzdCgnLicgKyBuYW1lKTtcbiAgICB9O1xuICAgIHJldHVybiBHbG9iO1xufSgpKTtcbmV4cG9ydCB7IEdsb2IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2IuanMubWFwIiwiLyoqIEBtb2R1bGUgY29tbW9uICovXG5pbXBvcnQgeyBwdXNoVG8gfSBmcm9tICcuL2NvbW1vbic7XG52YXIgUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVldWUoX2l0ZW1zLCBfbGltaXQpIHtcbiAgICAgICAgaWYgKF9pdGVtcyA9PT0gdm9pZCAwKSB7IF9pdGVtcyA9IFtdOyB9XG4gICAgICAgIGlmIChfbGltaXQgPT09IHZvaWQgMCkgeyBfbGltaXQgPSBudWxsOyB9XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gX2l0ZW1zO1xuICAgICAgICB0aGlzLl9saW1pdCA9IF9saW1pdDtcbiAgICAgICAgdGhpcy5fZXZpY3RMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5vbkV2aWN0ID0gcHVzaFRvKHRoaXMuX2V2aWN0TGlzdGVuZXJzKTtcbiAgICB9XG4gICAgUXVldWUucHJvdG90eXBlLmVucXVldWUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgaWYgKHRoaXMuX2xpbWl0ICYmIGl0ZW1zLmxlbmd0aCA+IHRoaXMuX2xpbWl0KVxuICAgICAgICAgICAgdGhpcy5ldmljdCgpO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5ldmljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9pdGVtcy5zaGlmdCgpO1xuICAgICAgICB0aGlzLl9ldmljdExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4oaXRlbSk7IH0pO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zaXplKCkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMuc3BsaWNlKDAsIDEpWzBdO1xuICAgIH07XG4gICAgUXVldWUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2l0ZW1zO1xuICAgICAgICB0aGlzLl9pdGVtcyA9IFtdO1xuICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoO1xuICAgIH07XG4gICAgUXVldWUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBpZHggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xuICAgICAgICByZXR1cm4gaWR4ID4gLTEgJiYgdGhpcy5faXRlbXMuc3BsaWNlKGlkeCwgMSlbMF07XG4gICAgfTtcbiAgICBRdWV1ZS5wcm90b3R5cGUucGVla1RhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGggLSAxXTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5wZWVrSGVhZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSgpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zWzBdO1xuICAgIH07XG4gICAgcmV0dXJuIFF1ZXVlO1xufSgpKTtcbmV4cG9ydCB7IFF1ZXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWV1ZS5qcy5tYXAiLCIvKipcbiAqIEZ1bmN0aW9ucyB0aGF0IG1hbmlwdWxhdGUgc3RyaW5nc1xuICpcbiAqIEFsdGhvdWdoIHRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIHRoZXkgYXJlIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgbm90aWNlLlxuICpcbiAqIEBtb2R1bGUgY29tbW9uX3N0cmluZ3NcbiAqLyAvKiogKi9cbmltcG9ydCB7IGlzQXJyYXksIGlzRnVuY3Rpb24sIGlzSW5qZWN0YWJsZSwgaXNOdWxsLCBpc09iamVjdCwgaXNQcm9taXNlLCBpc1N0cmluZywgaXNVbmRlZmluZWQgfSBmcm9tICcuL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUmVqZWN0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9yZWplY3RGYWN0b3J5JztcbmltcG9ydCB7IGlkZW50aXR5LCBwdXNoUiwgdGFpbCB9IGZyb20gJy4vY29tbW9uJztcbmltcG9ydCB7IHBhdHRlcm4sIHZhbCB9IGZyb20gJy4vaG9mJztcbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyBzaG9ydGVuZWQgdG8gYSBtYXhpbXVtIGxlbmd0aFxuICpcbiAqIElmIHRoZSBzdHJpbmcgaXMgYWxyZWFkeSBsZXNzIHRoYW4gdGhlIGBtYXhgIGxlbmd0aCwgcmV0dXJuIHRoZSBzdHJpbmcuXG4gKiBFbHNlIHJldHVybiB0aGUgc3RyaW5nLCBzaG9ydGVuZWQgdG8gYG1heCAtIDNgIGFuZCBhcHBlbmQgdGhyZWUgZG90cyAoXCIuLi5cIikuXG4gKlxuICogQHBhcmFtIG1heCB0aGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIHN0cmluZyB0byByZXR1cm5cbiAqIEBwYXJhbSBzdHIgdGhlIGlucHV0IHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWF4TGVuZ3RoKG1heCwgc3RyKSB7XG4gICAgaWYgKHN0ci5sZW5ndGggPD0gbWF4KVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIG1heCAtIDMpICsgJy4uLic7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcsIHdpdGggc3BhY2VzIGFkZGVkIHRvIHRoZSBlbmQsIHVwIHRvIGEgZGVzaXJlZCBzdHIgbGVuZ3RoXG4gKlxuICogSWYgdGhlIHN0cmluZyBpcyBhbHJlYWR5IGxvbmdlciB0aGFuIHRoZSBkZXNpcmVkIGxlbmd0aCwgcmV0dXJuIHRoZSBzdHJpbmcuXG4gKiBFbHNlIHJldHVybnMgdGhlIHN0cmluZywgd2l0aCBleHRyYSBzcGFjZXMgb24gdGhlIGVuZCwgc3VjaCB0aGF0IGl0IHJlYWNoZXMgYGxlbmd0aGAgY2hhcmFjdGVycy5cbiAqXG4gKiBAcGFyYW0gbGVuZ3RoIHRoZSBkZXNpcmVkIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHRvIHJldHVyblxuICogQHBhcmFtIHN0ciB0aGUgaW5wdXQgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYWRTdHJpbmcobGVuZ3RoLCBzdHIpIHtcbiAgICB3aGlsZSAoc3RyLmxlbmd0aCA8IGxlbmd0aClcbiAgICAgICAgc3RyICs9ICcgJztcbiAgICByZXR1cm4gc3RyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGtlYm9iU3RyaW5nKGNhbWVsQ2FzZSkge1xuICAgIHJldHVybiBjYW1lbENhc2VcbiAgICAgICAgLnJlcGxhY2UoL14oW0EtWl0pLywgZnVuY3Rpb24gKCQxKSB7IHJldHVybiAkMS50b0xvd2VyQ2FzZSgpOyB9KSAvLyByZXBsYWNlIGZpcnN0IGNoYXJcbiAgICAgICAgLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24gKCQxKSB7IHJldHVybiAnLScgKyAkMS50b0xvd2VyQ2FzZSgpOyB9KTsgLy8gcmVwbGFjZSByZXN0XG59XG5leHBvcnQgZnVuY3Rpb24gZnVuY3Rpb25Ub1N0cmluZyhmbikge1xuICAgIHZhciBmblN0ciA9IGZuVG9TdHJpbmcoZm4pO1xuICAgIHZhciBuYW1lZEZ1bmN0aW9uTWF0Y2ggPSBmblN0ci5tYXRjaCgvXihmdW5jdGlvbiBbXiBdK1xcKFteKV0qXFwpKS8pO1xuICAgIHZhciB0b1N0ciA9IG5hbWVkRnVuY3Rpb25NYXRjaCA/IG5hbWVkRnVuY3Rpb25NYXRjaFsxXSA6IGZuU3RyO1xuICAgIHZhciBmbk5hbWUgPSBmblsnbmFtZSddIHx8ICcnO1xuICAgIGlmIChmbk5hbWUgJiYgdG9TdHIubWF0Y2goL2Z1bmN0aW9uIFxcKC8pKSB7XG4gICAgICAgIHJldHVybiAnZnVuY3Rpb24gJyArIGZuTmFtZSArIHRvU3RyLnN1YnN0cig5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRvU3RyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZuVG9TdHJpbmcoZm4pIHtcbiAgICB2YXIgX2ZuID0gaXNBcnJheShmbikgPyBmbi5zbGljZSgtMSlbMF0gOiBmbjtcbiAgICByZXR1cm4gKF9mbiAmJiBfZm4udG9TdHJpbmcoKSkgfHwgJ3VuZGVmaW5lZCc7XG59XG52YXIgaXNSZWplY3Rpb24gPSBSZWplY3Rpb24uaXNSZWplY3Rpb25Qcm9taXNlO1xudmFyIGhhc1RvU3RyaW5nID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBpc09iamVjdChvYmopICYmICFpc0FycmF5KG9iaikgJiYgb2JqLmNvbnN0cnVjdG9yICE9PSBPYmplY3QgJiYgaXNGdW5jdGlvbihvYmoudG9TdHJpbmcpO1xufTtcbnZhciBzdHJpbmdpZnlQYXR0ZXJuID0gcGF0dGVybihbXG4gICAgW2lzVW5kZWZpbmVkLCB2YWwoJ3VuZGVmaW5lZCcpXSxcbiAgICBbaXNOdWxsLCB2YWwoJ251bGwnKV0sXG4gICAgW2lzUHJvbWlzZSwgdmFsKCdbUHJvbWlzZV0nKV0sXG4gICAgW2lzUmVqZWN0aW9uLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5fdHJhbnNpdGlvblJlamVjdGlvbi50b1N0cmluZygpOyB9XSxcbiAgICBbaGFzVG9TdHJpbmcsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRvU3RyaW5nKCk7IH1dLFxuICAgIFtpc0luamVjdGFibGUsIGZ1bmN0aW9uVG9TdHJpbmddLFxuICAgIFt2YWwodHJ1ZSksIGlkZW50aXR5XSxcbl0pO1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeShvKSB7XG4gICAgdmFyIHNlZW4gPSBbXTtcbiAgICBmdW5jdGlvbiBmb3JtYXQodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKHNlZW4uaW5kZXhPZih2YWx1ZSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiAnW2NpcmN1bGFyIHJlZl0nO1xuICAgICAgICAgICAgc2Vlbi5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyaW5naWZ5UGF0dGVybih2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc1VuZGVmaW5lZChvKSkge1xuICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBJRSAmIEVkZ2UgU3BlYyBpbmNvbXBhdGliaWxpdHkgd2hlcmUgcmVwbGFjZXIgZnVuY3Rpb24gd291bGQgbm90IGJlIGNhbGxlZCB3aGVuIEpTT04uc3RyaW5naWZ5XG4gICAgICAgIC8vIGlzIGdpdmVuIGB1bmRlZmluZWRgIGFzIHZhbHVlLiBUbyB3b3JrIGFyb3VuZCB0aGF0LCB3ZSBzaW1wbHkgZGV0ZWN0IGB1bmRlZmluZWRgIGFuZCBiYWlsIG91dCBlYXJseSBieVxuICAgICAgICAvLyBtYW51YWxseSBzdHJpbmdpZnlpbmcgaXQuXG4gICAgICAgIHJldHVybiBmb3JtYXQobyk7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgeyByZXR1cm4gZm9ybWF0KHZhbHVlKTsgfSkucmVwbGFjZSgvXFxcXFwiL2csICdcIicpO1xufVxuLyoqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHNwbGl0cyBhIHN0cmluZyBvbiBhIGNoYXJhY3RlciBvciBzdWJzdHJpbmcgKi9cbmV4cG9ydCB2YXIgYmVmb3JlQWZ0ZXJTdWJzdHIgPSBmdW5jdGlvbiAoY2hhcikgeyByZXR1cm4gZnVuY3Rpb24gKHN0cikge1xuICAgIGlmICghc3RyKVxuICAgICAgICByZXR1cm4gWycnLCAnJ107XG4gICAgdmFyIGlkeCA9IHN0ci5pbmRleE9mKGNoYXIpO1xuICAgIGlmIChpZHggPT09IC0xKVxuICAgICAgICByZXR1cm4gW3N0ciwgJyddO1xuICAgIHJldHVybiBbc3RyLnN1YnN0cigwLCBpZHgpLCBzdHIuc3Vic3RyKGlkeCArIDEpXTtcbn07IH07XG5leHBvcnQgdmFyIGhvc3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oPzpbYS16XSs6KT8vL1teL10rLycpO1xuZXhwb3J0IHZhciBzdHJpcExhc3RQYXRoRWxlbWVudCA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXC9bXi9dKiQvLCAnJyk7IH07XG5leHBvcnQgdmFyIHNwbGl0SGFzaCA9IGJlZm9yZUFmdGVyU3Vic3RyKCcjJyk7XG5leHBvcnQgdmFyIHNwbGl0UXVlcnkgPSBiZWZvcmVBZnRlclN1YnN0cignPycpO1xuZXhwb3J0IHZhciBzcGxpdEVxdWFsID0gYmVmb3JlQWZ0ZXJTdWJzdHIoJz0nKTtcbmV4cG9ydCB2YXIgdHJpbUhhc2hWYWwgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiAoc3RyID8gc3RyLnJlcGxhY2UoL14jLywgJycpIDogJycpOyB9O1xuLyoqXG4gKiBTcGxpdHMgb24gYSBkZWxpbWl0ZXIsIGJ1dCByZXR1cm5zIHRoZSBkZWxpbWl0ZXJzIGluIHRoZSBhcnJheVxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiB2YXIgc3BsaXRPblNsYXNoZXMgPSBzcGxpdE9uRGVsaW0oJy8nKTtcbiAqIHNwbGl0T25TbGFzaGVzKFwiL2Zvb1wiKTsgLy8gW1wiL1wiLCBcImZvb1wiXVxuICogc3BsaXRPblNsYXNoZXMoXCIvZm9vL1wiKTsgLy8gW1wiL1wiLCBcImZvb1wiLCBcIi9cIl1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRPbkRlbGltKGRlbGltKSB7XG4gICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgnKCcgKyBkZWxpbSArICcpJywgJ2cnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyLnNwbGl0KHJlKS5maWx0ZXIoaWRlbnRpdHkpOyB9O1xufVxuLyoqXG4gKiBSZWR1Y2UgZm4gdGhhdCBqb2lucyBuZWlnaGJvcmluZyBzdHJpbmdzXG4gKlxuICogR2l2ZW4gYW4gYXJyYXkgb2Ygc3RyaW5ncywgcmV0dXJucyBhIG5ldyBhcnJheVxuICogd2hlcmUgYWxsIG5laWdoYm9yaW5nIHN0cmluZ3MgaGF2ZSBiZWVuIGpvaW5lZC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogbGV0IGFyciA9IFtcImZvb1wiLCBcImJhclwiLCAxLCBcImJhelwiLCBcIlwiLCBcInF1eFwiIF07XG4gKiBhcnIucmVkdWNlKGpvaW5OZWlnaGJvcnNSLCBbXSkgLy8gW1wiZm9vYmFyXCIsIDEsIFwiYmF6cXV4XCIgXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBqb2luTmVpZ2hib3JzUihhY2MsIHgpIHtcbiAgICBpZiAoaXNTdHJpbmcodGFpbChhY2MpKSAmJiBpc1N0cmluZyh4KSlcbiAgICAgICAgcmV0dXJuIGFjYy5zbGljZSgwLCAtMSkuY29uY2F0KHRhaWwoYWNjKSArIHgpO1xuICAgIHJldHVybiBwdXNoUihhY2MsIHgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5ncy5qcy5tYXAiLCIvKipcbiAqICMgVHJhbnNpdGlvbiB0cmFjaW5nIChkZWJ1ZylcbiAqXG4gKiBFbmFibGUgdHJhbnNpdGlvbiB0cmFjaW5nIHRvIHByaW50IHRyYW5zaXRpb24gaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUsXG4gKiBpbiBvcmRlciB0byBoZWxwIGRlYnVnIHlvdXIgYXBwbGljYXRpb24uXG4gKiBUcmFjaW5nIGxvZ3MgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBUcmFuc2l0aW9uIHRvIHlvdXIgY29uc29sZS5cbiAqXG4gKiBUbyBlbmFibGUgdHJhY2luZywgaW1wb3J0IHRoZSBbW1RyYWNlXV0gc2luZ2xldG9uIGFuZCBlbmFibGUgb25lIG9yIG1vcmUgY2F0ZWdvcmllcy5cbiAqXG4gKiAjIyMgRVM2XG4gKiBgYGBqc1xuICogaW1wb3J0IHt0cmFjZX0gZnJvbSBcIkB1aXJvdXRlci9jb3JlXCI7XG4gKiB0cmFjZS5lbmFibGUoMSwgNSk7IC8vIFRSQU5TSVRJT04gYW5kIFZJRVdDT05GSUdcbiAqIGBgYFxuICpcbiAqICMjIyBDSlNcbiAqIGBgYGpzXG4gKiBsZXQgdHJhY2UgPSByZXF1aXJlKFwiQHVpcm91dGVyL2NvcmVcIikudHJhY2U7XG4gKiB0cmFjZS5lbmFibGUoXCJUUkFOU0lUSU9OXCIsIFwiVklFV0NPTkZJR1wiKTtcbiAqIGBgYFxuICpcbiAqICMjIyBHbG9iYWxzXG4gKiBgYGBqc1xuICogbGV0IHRyYWNlID0gd2luZG93W1wiQHVpcm91dGVyL2NvcmVcIl0udHJhY2U7XG4gKiB0cmFjZS5lbmFibGUoKTsgLy8gVHJhY2UgZXZlcnl0aGluZyAodmVyeSB2ZXJib3NlKVxuICogYGBgXG4gKlxuICogIyMjIEFuZ3VsYXIgMTpcbiAqIGBgYGpzXG4gKiBhcHAucnVuKCR0cmFjZSA9PiAkdHJhY2UuZW5hYmxlKCkpO1xuICogYGBgXG4gKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdHJhY2VcbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tY29uc29sZSAqL1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IGlzRnVuY3Rpb24sIGlzTnVtYmVyIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5LCBmdW5jdGlvblRvU3RyaW5nLCBtYXhMZW5ndGgsIHBhZFN0cmluZyB9IGZyb20gJy4vc3RyaW5ncyc7XG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gdWlWaWV3U3RyaW5nKHVpdmlldykge1xuICAgIGlmICghdWl2aWV3KVxuICAgICAgICByZXR1cm4gJ3VpLXZpZXcgKGRlZnVuY3QpJztcbiAgICB2YXIgc3RhdGUgPSB1aXZpZXcuY3JlYXRpb25Db250ZXh0ID8gdWl2aWV3LmNyZWF0aW9uQ29udGV4dC5uYW1lIHx8ICcocm9vdCknIDogJyhub25lKSc7XG4gICAgcmV0dXJuIFwiW3VpLXZpZXcjXCIgKyB1aXZpZXcuaWQgKyBcIiBcIiArIHVpdmlldy4kdHlwZSArIFwiOlwiICsgdWl2aWV3LmZxbiArIFwiIChcIiArIHVpdmlldy5uYW1lICsgXCJAXCIgKyBzdGF0ZSArIFwiKV1cIjtcbn1cbi8qKiBAaGlkZGVuICovXG52YXIgdmlld0NvbmZpZ1N0cmluZyA9IGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7XG4gICAgdmFyIHZpZXcgPSB2aWV3Q29uZmlnLnZpZXdEZWNsO1xuICAgIHZhciBzdGF0ZSA9IHZpZXcuJGNvbnRleHQubmFtZSB8fCAnKHJvb3QpJztcbiAgICByZXR1cm4gXCJbVmlldyNcIiArIHZpZXdDb25maWcuJGlkICsgXCIgZnJvbSAnXCIgKyBzdGF0ZSArIFwiJyBzdGF0ZV06IHRhcmdldCB1aS12aWV3OiAnXCIgKyB2aWV3LiR1aVZpZXdOYW1lICsgXCJAXCIgKyB2aWV3LiR1aVZpZXdDb250ZXh0QW5jaG9yICsgXCInXCI7XG59O1xuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZWRDYXQoaW5wdXQpIHtcbiAgICByZXR1cm4gaXNOdW1iZXIoaW5wdXQpID8gQ2F0ZWdvcnlbaW5wdXRdIDogQ2F0ZWdvcnlbQ2F0ZWdvcnlbaW5wdXRdXTtcbn1cbi8qKiBAaGlkZGVuICovXG52YXIgY29uc29sZUxvZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5sb2csIGNvbnNvbGUpO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBjb25zb2xldGFibGUgPSBpc0Z1bmN0aW9uKGNvbnNvbGUudGFibGUpID8gY29uc29sZS50YWJsZS5iaW5kKGNvbnNvbGUpIDogY29uc29sZUxvZy5iaW5kKGNvbnNvbGUpO1xuLyoqXG4gKiBUcmFjZSBjYXRlZ29yaWVzIEVudW1cbiAqXG4gKiBFbmFibGUgb3IgZGlzYWJsZSBhIGNhdGVnb3J5IHVzaW5nIFtbVHJhY2UuZW5hYmxlXV0gb3IgW1tUcmFjZS5kaXNhYmxlXV1cbiAqXG4gKiBgdHJhY2UuZW5hYmxlKENhdGVnb3J5LlRSQU5TSVRJT04pYFxuICpcbiAqIFRoZXNlIGNhbiBhbHNvIGJlIHByb3ZpZGVkIHVzaW5nIGEgbWF0Y2hpbmcgc3RyaW5nLCBvciBwb3NpdGlvbiBvcmRpbmFsXG4gKlxuICogYHRyYWNlLmVuYWJsZShcIlRSQU5TSVRJT05cIilgXG4gKlxuICogYHRyYWNlLmVuYWJsZSgxKWBcbiAqL1xudmFyIENhdGVnb3J5O1xuKGZ1bmN0aW9uIChDYXRlZ29yeSkge1xuICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiUkVTT0xWRVwiXSA9IDBdID0gXCJSRVNPTFZFXCI7XG4gICAgQ2F0ZWdvcnlbQ2F0ZWdvcnlbXCJUUkFOU0lUSU9OXCJdID0gMV0gPSBcIlRSQU5TSVRJT05cIjtcbiAgICBDYXRlZ29yeVtDYXRlZ29yeVtcIkhPT0tcIl0gPSAyXSA9IFwiSE9PS1wiO1xuICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiVUlWSUVXXCJdID0gM10gPSBcIlVJVklFV1wiO1xuICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiVklFV0NPTkZJR1wiXSA9IDRdID0gXCJWSUVXQ09ORklHXCI7XG59KShDYXRlZ29yeSB8fCAoQ2F0ZWdvcnkgPSB7fSkpO1xuZXhwb3J0IHsgQ2F0ZWdvcnkgfTtcbi8qKiBAaGlkZGVuICovXG52YXIgX3RpZCA9IHBhcnNlKCckaWQnKTtcbi8qKiBAaGlkZGVuICovXG52YXIgX3JpZCA9IHBhcnNlKCdyb3V0ZXIuJGlkJyk7XG4vKiogQGhpZGRlbiAqL1xudmFyIHRyYW5zTGJsID0gZnVuY3Rpb24gKHRyYW5zKSB7IHJldHVybiBcIlRyYW5zaXRpb24gI1wiICsgX3RpZCh0cmFucykgKyBcIi1cIiArIF9yaWQodHJhbnMpOyB9O1xuLyoqXG4gKiBQcmludHMgVUktUm91dGVyIFRyYW5zaXRpb24gdHJhY2UgaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUuXG4gKi9cbnZhciBUcmFjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uIFRyYWNlKCkge1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9lbmFibGVkID0ge307XG4gICAgICAgIHRoaXMuYXBwcm94aW1hdGVEaWdlc3RzID0gMDtcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFjZS5wcm90b3R5cGUuX3NldCA9IGZ1bmN0aW9uIChlbmFibGVkLCBjYXRlZ29yaWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghY2F0ZWdvcmllcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBPYmplY3Qua2V5cyhDYXRlZ29yeSlcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrKSB7IHJldHVybiBwYXJzZUludChrLCAxMCk7IH0pXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaykgeyByZXR1cm4gIWlzTmFOKGspOyB9KVxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gQ2F0ZWdvcnlba2V5XTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0ZWdvcmllcy5tYXAobm9ybWFsaXplZENhdCkuZm9yRWFjaChmdW5jdGlvbiAoY2F0ZWdvcnkpIHsgcmV0dXJuIChfdGhpcy5fZW5hYmxlZFtjYXRlZ29yeV0gPSBlbmFibGVkKTsgfSk7XG4gICAgfTtcbiAgICBUcmFjZS5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2F0ZWdvcmllcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgY2F0ZWdvcmllc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldCh0cnVlLCBjYXRlZ29yaWVzKTtcbiAgICB9O1xuICAgIFRyYWNlLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2F0ZWdvcmllcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgY2F0ZWdvcmllc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldChmYWxzZSwgY2F0ZWdvcmllcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGVuYWJsZWQgc3RhdGV1cyBvZiBhIFtbQ2F0ZWdvcnldXVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0cmFjZS5lbmFibGVkKFwiVklFV0NPTkZJR1wiKTsgLy8gdHJ1ZSBvciBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybnMgYm9vbGVhbiB0cnVlIGlmIHRoZSBjYXRlZ29yeSBpcyBlbmFibGVkXG4gICAgICovXG4gICAgVHJhY2UucHJvdG90eXBlLmVuYWJsZWQgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZW5hYmxlZFtub3JtYWxpemVkQ2F0KGNhdGVnb3J5KV07XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVRyYW5zaXRpb25TdGFydCA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5UUkFOU0lUSU9OKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6IFN0YXJ0ZWQgIC0+IFwiICsgc3RyaW5naWZ5KHRyYW5zKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVRyYW5zaXRpb25JZ25vcmVkID0gZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlRSQU5TSVRJT04pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogSWdub3JlZCAgPD4gXCIgKyBzdHJpbmdpZnkodHJhbnMpKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlSG9va0ludm9jYXRpb24gPSBmdW5jdGlvbiAoc3RlcCwgdHJhbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuSE9PSykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBldmVudCA9IHBhcnNlKCd0cmFjZURhdGEuaG9va1R5cGUnKShvcHRpb25zKSB8fCAnaW50ZXJuYWwnLCBjb250ZXh0ID0gcGFyc2UoJ3RyYWNlRGF0YS5jb250ZXh0LnN0YXRlLm5hbWUnKShvcHRpb25zKSB8fCBwYXJzZSgndHJhY2VEYXRhLmNvbnRleHQnKShvcHRpb25zKSB8fCAndW5rbm93bicsIG5hbWUgPSBmdW5jdGlvblRvU3RyaW5nKHN0ZXAucmVnaXN0ZXJlZEhvb2suY2FsbGJhY2spO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogICBIb29rIC0+IFwiICsgZXZlbnQgKyBcIiBjb250ZXh0OiBcIiArIGNvbnRleHQgKyBcIiwgXCIgKyBtYXhMZW5ndGgoMjAwLCBuYW1lKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZUhvb2tSZXN1bHQgPSBmdW5jdGlvbiAoaG9va1Jlc3VsdCwgdHJhbnMsIHRyYW5zaXRpb25PcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LkhPT0spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogICA8LSBIb29rIHJldHVybmVkOiBcIiArIG1heExlbmd0aCgyMDAsIHN0cmluZ2lmeShob29rUmVzdWx0KSkpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VSZXNvbHZlUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCB3aGVuLCB0cmFucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5SRVNPTFZFKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6ICAgICAgICAgUmVzb2x2aW5nIFwiICsgcGF0aCArIFwiIChcIiArIHdoZW4gKyBcIilcIik7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVJlc29sdmFibGVSZXNvbHZlZCA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlLCB0cmFucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5SRVNPTFZFKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6ICAgICAgICAgICAgICAgPC0gUmVzb2x2ZWQgIFwiICsgcmVzb2x2YWJsZSArIFwiIHRvOiBcIiArIG1heExlbmd0aCgyMDAsIHN0cmluZ2lmeShyZXNvbHZhYmxlLmRhdGEpKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZUVycm9yID0gZnVuY3Rpb24gKHJlYXNvbiwgdHJhbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiA8LSBSZWplY3RlZCBcIiArIHN0cmluZ2lmeSh0cmFucykgKyBcIiwgcmVhc29uOiBcIiArIHJlYXNvbik7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVN1Y2Nlc3MgPSBmdW5jdGlvbiAoZmluYWxTdGF0ZSwgdHJhbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiA8LSBTdWNjZXNzICBcIiArIHN0cmluZ2lmeSh0cmFucykgKyBcIiwgZmluYWwgc3RhdGU6IFwiICsgZmluYWxTdGF0ZS5uYW1lKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVUlWaWV3RXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQsIHZpZXdEYXRhLCBleHRyYSkge1xuICAgICAgICBpZiAoZXh0cmEgPT09IHZvaWQgMCkgeyBleHRyYSA9ICcnOyB9XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlVJVklFVykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKFwidWktdmlldzogXCIgKyBwYWRTdHJpbmcoMzAsIGV2ZW50KSArIFwiIFwiICsgdWlWaWV3U3RyaW5nKHZpZXdEYXRhKSArIGV4dHJhKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZCA9IGZ1bmN0aW9uICh2aWV3RGF0YSwgY29udGV4dCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5VSVZJRVcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnRyYWNlVUlWaWV3RXZlbnQoJ1VwZGF0aW5nJywgdmlld0RhdGEsIFwiIHdpdGggVmlld0NvbmZpZyBmcm9tIGNvbnRleHQ9J1wiICsgY29udGV4dCArIFwiJ1wiKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVUlWaWV3RmlsbCA9IGZ1bmN0aW9uICh2aWV3RGF0YSwgaHRtbCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5VSVZJRVcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnRyYWNlVUlWaWV3RXZlbnQoJ0ZpbGwnLCB2aWV3RGF0YSwgXCIgd2l0aDogXCIgKyBtYXhMZW5ndGgoMjAwLCBodG1sKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVZpZXdTeW5jID0gZnVuY3Rpb24gKHBhaXJzKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlZJRVdDT05GSUcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgdWl2aGVhZGVyID0gJ3VpdmlldyBjb21wb25lbnQgZnFuJztcbiAgICAgICAgdmFyIGNmZ2hlYWRlciA9ICd2aWV3IGNvbmZpZyBzdGF0ZSAodmlldyBuYW1lKSc7XG4gICAgICAgIHZhciBtYXBwaW5nID0gcGFpcnNcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdWlWaWV3ID0gX2EudWlWaWV3LCB2aWV3Q29uZmlnID0gX2Eudmlld0NvbmZpZztcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHZhciB1aXYgPSB1aVZpZXcgJiYgdWlWaWV3LmZxbjtcbiAgICAgICAgICAgIHZhciBjZmcgPSB2aWV3Q29uZmlnICYmIHZpZXdDb25maWcudmlld0RlY2wuJGNvbnRleHQubmFtZSArIFwiOiAoXCIgKyB2aWV3Q29uZmlnLnZpZXdEZWNsLiRuYW1lICsgXCIpXCI7XG4gICAgICAgICAgICByZXR1cm4gX2IgPSB7fSwgX2JbdWl2aGVhZGVyXSA9IHVpdiwgX2JbY2ZnaGVhZGVyXSA9IGNmZywgX2I7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gKGFbdWl2aGVhZGVyXSB8fCAnJykubG9jYWxlQ29tcGFyZShiW3VpdmhlYWRlcl0gfHwgJycpOyB9KTtcbiAgICAgICAgY29uc29sZXRhYmxlKG1hcHBpbmcpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50LCB2aWV3Q29uZmlnKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlZJRVdDT05GSUcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlZJRVdDT05GSUc6IFwiICsgZXZlbnQgKyBcIiBcIiArIHZpZXdDb25maWdTdHJpbmcodmlld0NvbmZpZykpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50ID0gZnVuY3Rpb24gKGV2ZW50LCB2aWV3RGF0YSkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5WSUVXQ09ORklHKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2coXCJWSUVXQ09ORklHOiBcIiArIGV2ZW50ICsgXCIgXCIgKyB1aVZpZXdTdHJpbmcodmlld0RhdGEpKTtcbiAgICB9O1xuICAgIHJldHVybiBUcmFjZTtcbn0oKSk7XG5leHBvcnQgeyBUcmFjZSB9O1xuLyoqXG4gKiBUaGUgW1tUcmFjZV1dIHNpbmdsZXRvblxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge3RyYWNlfSBmcm9tIFwiQHVpcm91dGVyL2NvcmVcIjtcbiAqIHRyYWNlLmVuYWJsZSgxLCA1KTtcbiAqIGBgYFxuICovXG52YXIgdHJhY2UgPSBuZXcgVHJhY2UoKTtcbmV4cG9ydCB7IHRyYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHBhcmFtc1xuICovXG4vKiogKi9cbmltcG9ydCB7IGV4dGVuZCwgZmlsdGVyLCBtYXAgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzQXJyYXksIGlzRGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbi8qKlxuICogQW4gaW50ZXJuYWwgY2xhc3Mgd2hpY2ggaW1wbGVtZW50cyBbW1BhcmFtVHlwZURlZmluaXRpb25dXS5cbiAqXG4gKiBBIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGlzIGEgcGxhaW4gamF2YXNjcmlwdCBvYmplY3QgdXNlZCB0byByZWdpc3RlciBjdXN0b20gcGFyYW1ldGVyIHR5cGVzLlxuICogV2hlbiBhIHBhcmFtIHR5cGUgZGVmaW5pdGlvbiBpcyByZWdpc3RlcmVkLCBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGNyZWF0ZWQgaW50ZXJuYWxseS5cbiAqXG4gKiBUaGlzIGNsYXNzIGhhcyBuYWl2ZSBpbXBsZW1lbnRhdGlvbnMgZm9yIGFsbCB0aGUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gbWV0aG9kcy5cbiAqXG4gKiBVc2VkIGJ5IFtbVXJsTWF0Y2hlcl1dIHdoZW4gbWF0Y2hpbmcgb3IgZm9ybWF0dGluZyBVUkxzLCBvciBjb21wYXJpbmcgYW5kIHZhbGlkYXRpbmcgcGFyYW1ldGVyIHZhbHVlcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogdmFyIHBhcmFtVHlwZURlZiA9IHtcbiAqICAgZGVjb2RlOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApOyB9LFxuICogICBlbmNvZGU6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsICYmIHZhbC50b1N0cmluZygpOyB9LFxuICogICBlcXVhbHM6IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIHRoaXMuaXMoYSkgJiYgYSA9PT0gYjsgfSxcbiAqICAgaXM6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gYW5ndWxhci5pc051bWJlcih2YWwpICYmIGlzRmluaXRlKHZhbCkgJiYgdmFsICUgMSA9PT0gMDsgfSxcbiAqICAgcGF0dGVybjogL1xcZCsvXG4gKiB9XG4gKlxuICogdmFyIHBhcmFtVHlwZSA9IG5ldyBQYXJhbVR5cGUocGFyYW1UeXBlRGVmKTtcbiAqIGBgYFxuICogQGludGVybmFsYXBpXG4gKi9cbnZhciBQYXJhbVR5cGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRlZiAgQSBjb25maWd1cmF0aW9uIG9iamVjdCB3aGljaCBjb250YWlucyB0aGUgY3VzdG9tIHR5cGUgZGVmaW5pdGlvbi4gIFRoZSBvYmplY3Qnc1xuICAgICAqICAgICAgICBwcm9wZXJ0aWVzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgbWV0aG9kcyBhbmQvb3IgcGF0dGVybiBpbiBgUGFyYW1UeXBlYCdzIHB1YmxpYyBpbnRlcmZhY2UuXG4gICAgICogQHJldHVybnMgYSBuZXcgUGFyYW1UeXBlIG9iamVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBhcmFtVHlwZShkZWYpIHtcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgICAgIHRoaXMucGF0dGVybiA9IC8uKi87XG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgICAgICB0aGlzLmluaGVyaXQgPSB0cnVlO1xuICAgICAgICBleHRlbmQodGhpcywgZGVmKTtcbiAgICB9XG4gICAgLy8gY29uc2lkZXIgdGhlc2UgZm91ciBtZXRob2RzIHRvIGJlIFwiYWJzdHJhY3QgbWV0aG9kc1wiIHRoYXQgc2hvdWxkIGJlIG92ZXJyaWRkZW5cbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBQYXJhbVR5cGUucHJvdG90eXBlLmlzID0gZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFBhcmFtVHlwZS5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBQYXJhbVR5cGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzXG4gICAgICAgIHJldHVybiBhID09IGI7XG4gICAgfTtcbiAgICBQYXJhbVR5cGUucHJvdG90eXBlLiRzdWJQYXR0ZXJuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3ViID0gdGhpcy5wYXR0ZXJuLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBzdWIuc3Vic3RyKDEsIHN1Yi5sZW5ndGggLSAyKTtcbiAgICB9O1xuICAgIFBhcmFtVHlwZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIntQYXJhbVR5cGU6XCIgKyB0aGlzLm5hbWUgKyBcIn1cIjtcbiAgICB9O1xuICAgIC8qKiBHaXZlbiBhbiBlbmNvZGVkIHN0cmluZywgb3IgYSBkZWNvZGVkIG9iamVjdCwgcmV0dXJucyBhIGRlY29kZWQgb2JqZWN0ICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS4kbm9ybWFsaXplID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pcyh2YWwpID8gdmFsIDogdGhpcy5kZWNvZGUodmFsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdyYXBzIGFuIGV4aXN0aW5nIGN1c3RvbSBQYXJhbVR5cGUgYXMgYW4gYXJyYXkgb2YgUGFyYW1UeXBlLCBkZXBlbmRpbmcgb24gJ21vZGUnLlxuICAgICAqIGUuZy46XG4gICAgICogLSB1cmxtYXRjaGVyIHBhdHRlcm4gXCIvcGF0aD97cXVlcnlQYXJhbVtdOmludH1cIlxuICAgICAqIC0gdXJsOiBcIi9wYXRoP3F1ZXJ5UGFyYW09MSZxdWVyeVBhcmFtPTJcbiAgICAgKiAtICRzdGF0ZVBhcmFtcy5xdWVyeVBhcmFtIHdpbGwgYmUgWzEsIDJdXG4gICAgICogaWYgYG1vZGVgIGlzIFwiYXV0b1wiLCB0aGVuXG4gICAgICogLSB1cmw6IFwiL3BhdGg/cXVlcnlQYXJhbT0xIHdpbGwgY3JlYXRlICRzdGF0ZVBhcmFtcy5xdWVyeVBhcmFtOiAxXG4gICAgICogLSB1cmw6IFwiL3BhdGg/cXVlcnlQYXJhbT0xJnF1ZXJ5UGFyYW09MiB3aWxsIGNyZWF0ZSAkc3RhdGVQYXJhbXMucXVlcnlQYXJhbTogWzEsIDJdXG4gICAgICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS4kYXNBcnJheSA9IGZ1bmN0aW9uIChtb2RlLCBpc1NlYXJjaCkge1xuICAgICAgICBpZiAoIW1vZGUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgaWYgKG1vZGUgPT09ICdhdXRvJyAmJiAhaXNTZWFyY2gpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInYXV0bycgYXJyYXkgbW9kZSBpcyBmb3IgcXVlcnkgcGFyYW1ldGVycyBvbmx5XCIpO1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5VHlwZSh0aGlzLCBtb2RlKTtcbiAgICB9O1xuICAgIHJldHVybiBQYXJhbVR5cGU7XG59KCkpO1xuZXhwb3J0IHsgUGFyYW1UeXBlIH07XG4vKipcbiAqIFdyYXBzIHVwIGEgYFBhcmFtVHlwZWAgb2JqZWN0IHRvIGhhbmRsZSBhcnJheSB2YWx1ZXMuXG4gKiBAaW50ZXJuYWxhcGlcbiAqL1xuZnVuY3Rpb24gQXJyYXlUeXBlKHR5cGUsIG1vZGUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIC8vIFdyYXAgbm9uLWFycmF5IHZhbHVlIGFzIGFycmF5XG4gICAgZnVuY3Rpb24gYXJyYXlXcmFwKHZhbCkge1xuICAgICAgICByZXR1cm4gaXNBcnJheSh2YWwpID8gdmFsIDogaXNEZWZpbmVkKHZhbCkgPyBbdmFsXSA6IFtdO1xuICAgIH1cbiAgICAvLyBVbndyYXAgYXJyYXkgdmFsdWUgZm9yIFwiYXV0b1wiIG1vZGUuIFJldHVybiB1bmRlZmluZWQgZm9yIGVtcHR5IGFycmF5LlxuICAgIGZ1bmN0aW9uIGFycmF5VW53cmFwKHZhbCkge1xuICAgICAgICBzd2l0Y2ggKHZhbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBtb2RlID09PSAnYXV0bycgPyB2YWxbMF0gOiB2YWw7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gV3JhcHMgdHlwZSAoLmlzLy5lbmNvZGUvLmRlY29kZSkgZnVuY3Rpb25zIHRvIG9wZXJhdGUgb24gZWFjaCB2YWx1ZSBvZiBhbiBhcnJheVxuICAgIGZ1bmN0aW9uIGFycmF5SGFuZGxlcihjYWxsYmFjaywgYWxsVHJ1dGh5TW9kZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheSh2YWwpICYmIHZhbC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgIHZhciBhcnIgPSBhcnJheVdyYXAodmFsKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBtYXAoYXJyLCBjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gYWxsVHJ1dGh5TW9kZSA9PT0gdHJ1ZSA/IGZpbHRlcihyZXN1bHQsIGZ1bmN0aW9uICh4KSB7IHJldHVybiAheDsgfSkubGVuZ3RoID09PSAwIDogYXJyYXlVbndyYXAocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gV3JhcHMgdHlwZSAoLmVxdWFscykgZnVuY3Rpb25zIHRvIG9wZXJhdGUgb24gZWFjaCB2YWx1ZSBvZiBhbiBhcnJheVxuICAgIGZ1bmN0aW9uIGFycmF5RXF1YWxzSGFuZGxlcihjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsMSwgdmFsMikge1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBhcnJheVdyYXAodmFsMSksIHJpZ2h0ID0gYXJyYXlXcmFwKHZhbDIpO1xuICAgICAgICAgICAgaWYgKGxlZnQubGVuZ3RoICE9PSByaWdodC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZWZ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFjayhsZWZ0W2ldLCByaWdodFtpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBbJ2VuY29kZScsICdkZWNvZGUnLCAnZXF1YWxzJywgJyRub3JtYWxpemUnXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBwYXJhbVR5cGVGbiA9IHR5cGVbbmFtZV0uYmluZCh0eXBlKTtcbiAgICAgICAgdmFyIHdyYXBwZXJGbiA9IG5hbWUgPT09ICdlcXVhbHMnID8gYXJyYXlFcXVhbHNIYW5kbGVyIDogYXJyYXlIYW5kbGVyO1xuICAgICAgICBfdGhpc1tuYW1lXSA9IHdyYXBwZXJGbihwYXJhbVR5cGVGbik7XG4gICAgfSk7XG4gICAgZXh0ZW5kKHRoaXMsIHtcbiAgICAgICAgZHluYW1pYzogdHlwZS5keW5hbWljLFxuICAgICAgICBuYW1lOiB0eXBlLm5hbWUsXG4gICAgICAgIHBhdHRlcm46IHR5cGUucGF0dGVybixcbiAgICAgICAgaW5oZXJpdDogdHlwZS5pbmhlcml0LFxuICAgICAgICByYXc6IHR5cGUucmF3LFxuICAgICAgICBpczogYXJyYXlIYW5kbGVyKHR5cGUuaXMuYmluZCh0eXBlKSwgdHJ1ZSksXG4gICAgICAgICRhcnJheU1vZGU6IG1vZGUsXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJhbVR5cGUuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgZmlsdGVyLCBtYXAsIGFsbFRydWVSIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBwcm9wIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc0luamVjdGFibGUsIGlzRGVmaW5lZCwgaXNTdHJpbmcsIGlzQXJyYXksIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmltcG9ydCB7IFBhcmFtVHlwZSB9IGZyb20gJy4vcGFyYW1UeXBlJztcbi8qKiBAaGlkZGVuICovXG52YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8qKiBAaGlkZGVuICovXG52YXIgaXNTaG9ydGhhbmQgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgcmV0dXJuIFsndmFsdWUnLCAndHlwZScsICdzcXVhc2gnLCAnYXJyYXknLCAnZHluYW1pYyddLmZpbHRlcihoYXNPd24uYmluZChjZmcgfHwge30pKS5sZW5ndGggPT09IDA7XG59O1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIERlZlR5cGU7XG4oZnVuY3Rpb24gKERlZlR5cGUpIHtcbiAgICBEZWZUeXBlW0RlZlR5cGVbXCJQQVRIXCJdID0gMF0gPSBcIlBBVEhcIjtcbiAgICBEZWZUeXBlW0RlZlR5cGVbXCJTRUFSQ0hcIl0gPSAxXSA9IFwiU0VBUkNIXCI7XG4gICAgRGVmVHlwZVtEZWZUeXBlW1wiQ09ORklHXCJdID0gMl0gPSBcIkNPTkZJR1wiO1xufSkoRGVmVHlwZSB8fCAoRGVmVHlwZSA9IHt9KSk7XG5leHBvcnQgeyBEZWZUeXBlIH07XG5mdW5jdGlvbiBnZXRQYXJhbURlY2xhcmF0aW9uKHBhcmFtTmFtZSwgbG9jYXRpb24sIHN0YXRlKSB7XG4gICAgdmFyIG5vUmVsb2FkT25TZWFyY2ggPSAoc3RhdGUucmVsb2FkT25TZWFyY2ggPT09IGZhbHNlICYmIGxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSCkgfHwgdW5kZWZpbmVkO1xuICAgIHZhciBkeW5hbWljID0gW3N0YXRlLmR5bmFtaWMsIG5vUmVsb2FkT25TZWFyY2hdLmZpbmQoaXNEZWZpbmVkKTtcbiAgICB2YXIgZGVmYXVsdENvbmZpZyA9IGlzRGVmaW5lZChkeW5hbWljKSA/IHsgZHluYW1pYzogZHluYW1pYyB9IDoge307XG4gICAgdmFyIHBhcmFtQ29uZmlnID0gdW53cmFwU2hvcnRoYW5kKHN0YXRlICYmIHN0YXRlLnBhcmFtcyAmJiBzdGF0ZS5wYXJhbXNbcGFyYW1OYW1lXSk7XG4gICAgcmV0dXJuIGV4dGVuZChkZWZhdWx0Q29uZmlnLCBwYXJhbUNvbmZpZyk7XG59XG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gdW53cmFwU2hvcnRoYW5kKGNmZykge1xuICAgIGNmZyA9IGlzU2hvcnRoYW5kKGNmZykgPyB7IHZhbHVlOiBjZmcgfSA6IGNmZztcbiAgICBnZXRTdGF0aWNEZWZhdWx0VmFsdWVbJ19fY2FjaGVhYmxlJ10gPSB0cnVlO1xuICAgIGZ1bmN0aW9uIGdldFN0YXRpY0RlZmF1bHRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIGNmZy52YWx1ZTtcbiAgICB9XG4gICAgdmFyICQkZm4gPSBpc0luamVjdGFibGUoY2ZnLnZhbHVlKSA/IGNmZy52YWx1ZSA6IGdldFN0YXRpY0RlZmF1bHRWYWx1ZTtcbiAgICByZXR1cm4gZXh0ZW5kKGNmZywgeyAkJGZuOiAkJGZuIH0pO1xufVxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGdldFR5cGUoY2ZnLCB1cmxUeXBlLCBsb2NhdGlvbiwgaWQsIHBhcmFtVHlwZXMpIHtcbiAgICBpZiAoY2ZnLnR5cGUgJiYgdXJsVHlwZSAmJiB1cmxUeXBlLm5hbWUgIT09ICdzdHJpbmcnKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbSAnXCIgKyBpZCArIFwiJyBoYXMgdHdvIHR5cGUgY29uZmlndXJhdGlvbnMuXCIpO1xuICAgIGlmIChjZmcudHlwZSAmJiB1cmxUeXBlICYmIHVybFR5cGUubmFtZSA9PT0gJ3N0cmluZycgJiYgcGFyYW1UeXBlcy50eXBlKGNmZy50eXBlKSlcbiAgICAgICAgcmV0dXJuIHBhcmFtVHlwZXMudHlwZShjZmcudHlwZSk7XG4gICAgaWYgKHVybFR5cGUpXG4gICAgICAgIHJldHVybiB1cmxUeXBlO1xuICAgIGlmICghY2ZnLnR5cGUpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBsb2NhdGlvbiA9PT0gRGVmVHlwZS5DT05GSUdcbiAgICAgICAgICAgID8gJ2FueSdcbiAgICAgICAgICAgIDogbG9jYXRpb24gPT09IERlZlR5cGUuUEFUSFxuICAgICAgICAgICAgICAgID8gJ3BhdGgnXG4gICAgICAgICAgICAgICAgOiBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0hcbiAgICAgICAgICAgICAgICAgICAgPyAncXVlcnknXG4gICAgICAgICAgICAgICAgICAgIDogJ3N0cmluZyc7XG4gICAgICAgIHJldHVybiBwYXJhbVR5cGVzLnR5cGUodHlwZSk7XG4gICAgfVxuICAgIHJldHVybiBjZmcudHlwZSBpbnN0YW5jZW9mIFBhcmFtVHlwZSA/IGNmZy50eXBlIDogcGFyYW1UeXBlcy50eXBlKGNmZy50eXBlKTtcbn1cbi8qKlxuICogQGludGVybmFsYXBpXG4gKiByZXR1cm5zIGZhbHNlLCB0cnVlLCBvciB0aGUgc3F1YXNoIHZhbHVlIHRvIGluZGljYXRlIHRoZSBcImRlZmF1bHQgcGFyYW1ldGVyIHVybCBzcXVhc2ggcG9saWN5XCIuXG4gKi9cbmZ1bmN0aW9uIGdldFNxdWFzaFBvbGljeShjb25maWcsIGlzT3B0aW9uYWwsIGRlZmF1bHRQb2xpY3kpIHtcbiAgICB2YXIgc3F1YXNoID0gY29uZmlnLnNxdWFzaDtcbiAgICBpZiAoIWlzT3B0aW9uYWwgfHwgc3F1YXNoID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghaXNEZWZpbmVkKHNxdWFzaCkgfHwgc3F1YXNoID09IG51bGwpXG4gICAgICAgIHJldHVybiBkZWZhdWx0UG9saWN5O1xuICAgIGlmIChzcXVhc2ggPT09IHRydWUgfHwgaXNTdHJpbmcoc3F1YXNoKSlcbiAgICAgICAgcmV0dXJuIHNxdWFzaDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNxdWFzaCBwb2xpY3k6ICdcIiArIHNxdWFzaCArIFwiJy4gVmFsaWQgcG9saWNpZXM6IGZhbHNlLCB0cnVlLCBvciBhcmJpdHJhcnkgc3RyaW5nXCIpO1xufVxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZnVuY3Rpb24gZ2V0UmVwbGFjZShjb25maWcsIGFycmF5TW9kZSwgaXNPcHRpb25hbCwgc3F1YXNoKSB7XG4gICAgdmFyIGRlZmF1bHRQb2xpY3kgPSBbXG4gICAgICAgIHsgZnJvbTogJycsIHRvOiBpc09wdGlvbmFsIHx8IGFycmF5TW9kZSA/IHVuZGVmaW5lZCA6ICcnIH0sXG4gICAgICAgIHsgZnJvbTogbnVsbCwgdG86IGlzT3B0aW9uYWwgfHwgYXJyYXlNb2RlID8gdW5kZWZpbmVkIDogJycgfSxcbiAgICBdO1xuICAgIHZhciByZXBsYWNlID0gaXNBcnJheShjb25maWcucmVwbGFjZSkgPyBjb25maWcucmVwbGFjZSA6IFtdO1xuICAgIGlmIChpc1N0cmluZyhzcXVhc2gpKVxuICAgICAgICByZXBsYWNlLnB1c2goeyBmcm9tOiBzcXVhc2gsIHRvOiB1bmRlZmluZWQgfSk7XG4gICAgdmFyIGNvbmZpZ3VyZWRLZXlzID0gbWFwKHJlcGxhY2UsIHByb3AoJ2Zyb20nKSk7XG4gICAgcmV0dXJuIGZpbHRlcihkZWZhdWx0UG9saWN5LCBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gY29uZmlndXJlZEtleXMuaW5kZXhPZihpdGVtLmZyb20pID09PSAtMTsgfSkuY29uY2F0KHJlcGxhY2UpO1xufVxuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFBhcmFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhcmFtKGlkLCB0eXBlLCBsb2NhdGlvbiwgdXJsTWF0Y2hlckZhY3RvcnksIHN0YXRlKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBnZXRQYXJhbURlY2xhcmF0aW9uKGlkLCBsb2NhdGlvbiwgc3RhdGUpO1xuICAgICAgICB0eXBlID0gZ2V0VHlwZShjb25maWcsIHR5cGUsIGxvY2F0aW9uLCBpZCwgdXJsTWF0Y2hlckZhY3RvcnkucGFyYW1UeXBlcyk7XG4gICAgICAgIHZhciBhcnJheU1vZGUgPSBnZXRBcnJheU1vZGUoKTtcbiAgICAgICAgdHlwZSA9IGFycmF5TW9kZSA/IHR5cGUuJGFzQXJyYXkoYXJyYXlNb2RlLCBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0gpIDogdHlwZTtcbiAgICAgICAgdmFyIGlzT3B0aW9uYWwgPSBjb25maWcudmFsdWUgIT09IHVuZGVmaW5lZCB8fCBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0g7XG4gICAgICAgIHZhciBkeW5hbWljID0gaXNEZWZpbmVkKGNvbmZpZy5keW5hbWljKSA/ICEhY29uZmlnLmR5bmFtaWMgOiAhIXR5cGUuZHluYW1pYztcbiAgICAgICAgdmFyIHJhdyA9IGlzRGVmaW5lZChjb25maWcucmF3KSA/ICEhY29uZmlnLnJhdyA6ICEhdHlwZS5yYXc7XG4gICAgICAgIHZhciBzcXVhc2ggPSBnZXRTcXVhc2hQb2xpY3koY29uZmlnLCBpc09wdGlvbmFsLCB1cmxNYXRjaGVyRmFjdG9yeS5kZWZhdWx0U3F1YXNoUG9saWN5KCkpO1xuICAgICAgICB2YXIgcmVwbGFjZSA9IGdldFJlcGxhY2UoY29uZmlnLCBhcnJheU1vZGUsIGlzT3B0aW9uYWwsIHNxdWFzaCk7XG4gICAgICAgIHZhciBpbmhlcml0ID0gaXNEZWZpbmVkKGNvbmZpZy5pbmhlcml0KSA/ICEhY29uZmlnLmluaGVyaXQgOiAhIXR5cGUuaW5oZXJpdDtcbiAgICAgICAgLy8gYXJyYXkgY29uZmlnOiBwYXJhbSBuYW1lIChwYXJhbVtdKSBvdmVycmlkZXMgZGVmYXVsdCBzZXR0aW5ncy4gIGV4cGxpY2l0IGNvbmZpZyBvdmVycmlkZXMgcGFyYW0gbmFtZS5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QXJyYXlNb2RlKCkge1xuICAgICAgICAgICAgdmFyIGFycmF5RGVmYXVsdHMgPSB7IGFycmF5OiBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0ggPyAnYXV0bycgOiBmYWxzZSB9O1xuICAgICAgICAgICAgdmFyIGFycmF5UGFyYW1Ob21lbmNsYXR1cmUgPSBpZC5tYXRjaCgvXFxbXFxdJC8pID8geyBhcnJheTogdHJ1ZSB9IDoge307XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKGFycmF5RGVmYXVsdHMsIGFycmF5UGFyYW1Ob21lbmNsYXR1cmUsIGNvbmZpZykuYXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgZXh0ZW5kKHRoaXMsIHsgaWQ6IGlkLCB0eXBlOiB0eXBlLCBsb2NhdGlvbjogbG9jYXRpb24sIGlzT3B0aW9uYWw6IGlzT3B0aW9uYWwsIGR5bmFtaWM6IGR5bmFtaWMsIHJhdzogcmF3LCBzcXVhc2g6IHNxdWFzaCwgcmVwbGFjZTogcmVwbGFjZSwgaW5oZXJpdDogaW5oZXJpdCwgYXJyYXk6IGFycmF5TW9kZSwgY29uZmlnOiBjb25maWcgfSk7XG4gICAgfVxuICAgIFBhcmFtLnZhbHVlcyA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0ge307IH1cbiAgICAgICAgdmFyIHBhcmFtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcGFyYW1zXzEgPSBwYXJhbXM7IF9pIDwgcGFyYW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNfMVtfaV07XG4gICAgICAgICAgICBwYXJhbVZhbHVlc1twYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZXNbcGFyYW0uaWRdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1WYWx1ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5kcyBbW1BhcmFtXV0gb2JqZWN0cyB3aGljaCBoYXZlIGRpZmZlcmVudCBwYXJhbSB2YWx1ZXNcbiAgICAgKlxuICAgICAqIEZpbHRlcnMgYSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIHRvIG9ubHkgdGhvc2Ugd2hvc2UgcGFyYW1ldGVyIHZhbHVlcyBkaWZmZXIgaW4gdHdvIHBhcmFtIHZhbHVlIG9iamVjdHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJhbXM6IFRoZSBsaXN0IG9mIFBhcmFtIG9iamVjdHMgdG8gZmlsdGVyXG4gICAgICogQHBhcmFtIHZhbHVlczE6IFRoZSBmaXJzdCBzZXQgb2YgcGFyYW1ldGVyIHZhbHVlc1xuICAgICAqIEBwYXJhbSB2YWx1ZXMyOiB0aGUgc2Vjb25kIHNldCBvZiBwYXJhbWV0ZXIgdmFsdWVzXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbnkgUGFyYW0gb2JqZWN0cyB3aG9zZSB2YWx1ZXMgd2VyZSBkaWZmZXJlbnQgYmV0d2VlbiB2YWx1ZXMxIGFuZCB2YWx1ZXMyXG4gICAgICovXG4gICAgUGFyYW0uY2hhbmdlZCA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlczEsIHZhbHVlczIpIHtcbiAgICAgICAgaWYgKHZhbHVlczEgPT09IHZvaWQgMCkgeyB2YWx1ZXMxID0ge307IH1cbiAgICAgICAgaWYgKHZhbHVlczIgPT09IHZvaWQgMCkgeyB2YWx1ZXMyID0ge307IH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhcGFyYW0udHlwZS5lcXVhbHModmFsdWVzMVtwYXJhbS5pZF0sIHZhbHVlczJbcGFyYW0uaWRdKTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdHdvIHBhcmFtIHZhbHVlIG9iamVjdHMgYXJlIGVxdWFsIChmb3IgYSBzZXQgb2YgW1tQYXJhbV1dIG9iamVjdHMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyYW1zIFRoZSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIHRvIGNoZWNrXG4gICAgICogQHBhcmFtIHZhbHVlczEgVGhlIGZpcnN0IHNldCBvZiBwYXJhbSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gdmFsdWVzMiBUaGUgc2Vjb25kIHNldCBvZiBwYXJhbSB2YWx1ZXNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHBhcmFtIHZhbHVlcyBpbiB2YWx1ZXMxIGFuZCB2YWx1ZXMyIGFyZSBlcXVhbFxuICAgICAqL1xuICAgIFBhcmFtLmVxdWFscyA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlczEsIHZhbHVlczIpIHtcbiAgICAgICAgaWYgKHZhbHVlczEgPT09IHZvaWQgMCkgeyB2YWx1ZXMxID0ge307IH1cbiAgICAgICAgaWYgKHZhbHVlczIgPT09IHZvaWQgMCkgeyB2YWx1ZXMyID0ge307IH1cbiAgICAgICAgcmV0dXJuIFBhcmFtLmNoYW5nZWQocGFyYW1zLCB2YWx1ZXMxLCB2YWx1ZXMyKS5sZW5ndGggPT09IDA7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGEgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXJlIHZhbGlkLCBhY2NvcmRpbmcgdG8gdGhlIFBhcmFtIGRlZmluaXRpb25zICovXG4gICAgUGFyYW0udmFsaWRhdGVzID0gZnVuY3Rpb24gKHBhcmFtcywgdmFsdWVzKSB7XG4gICAgICAgIGlmICh2YWx1ZXMgPT09IHZvaWQgMCkgeyB2YWx1ZXMgPSB7fTsgfVxuICAgICAgICByZXR1cm4gcGFyYW1zLm1hcChmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtLnZhbGlkYXRlcyh2YWx1ZXNbcGFyYW0uaWRdKTsgfSkucmVkdWNlKGFsbFRydWVSLCB0cnVlKTtcbiAgICB9O1xuICAgIFBhcmFtLnByb3RvdHlwZS5pc0RlZmF1bHRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09wdGlvbmFsICYmIHRoaXMudHlwZS5lcXVhbHModGhpcy52YWx1ZSgpLCB2YWx1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBbSW50ZXJuYWxdIEdldHMgdGhlIGRlY29kZWQgcmVwcmVzZW50YXRpb24gb2YgYSB2YWx1ZSBpZiB0aGUgdmFsdWUgaXMgZGVmaW5lZCwgb3RoZXJ3aXNlLCByZXR1cm5zIHRoZVxuICAgICAqIGRlZmF1bHQgdmFsdWUsIHdoaWNoIG1heSBiZSB0aGUgcmVzdWx0IG9mIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgUGFyYW0ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBbSW50ZXJuYWxdIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHBhcmFtZXRlciwgd2hpY2ggbWF5IGJlIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZ2V0RGVmYXVsdFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLl9kZWZhdWx0VmFsdWVDYWNoZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2RlZmF1bHRWYWx1ZUNhY2hlLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIGlmICghc2VydmljZXMuJGluamVjdG9yKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5qZWN0YWJsZSBmdW5jdGlvbnMgY2Fubm90IGJlIGNhbGxlZCBhdCBjb25maWd1cmF0aW9uIHRpbWUnKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKF90aGlzLmNvbmZpZy4kJGZuKTtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IG51bGwgJiYgZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQgJiYgIV90aGlzLnR5cGUuaXMoZGVmYXVsdFZhbHVlKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZWZhdWx0IHZhbHVlIChcIiArIGRlZmF1bHRWYWx1ZSArIFwiKSBmb3IgcGFyYW1ldGVyICdcIiArIF90aGlzLmlkICsgXCInIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBQYXJhbVR5cGUgKFwiICsgX3RoaXMudHlwZS5uYW1lICsgXCIpXCIpO1xuICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy4kJGZuWydfX2NhY2hlYWJsZSddKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2RlZmF1bHRWYWx1ZUNhY2hlID0geyBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlcGxhY2VTcGVjaWFsVmFsdWVzID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnJlcGxhY2U7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR1cGxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0dXBsZS5mcm9tID09PSB2YWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0dXBsZS50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH07XG4gICAgICAgIHZhbHVlID0gcmVwbGFjZVNwZWNpYWxWYWx1ZXModmFsdWUpO1xuICAgICAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpID8gZ2V0RGVmYXVsdFZhbHVlKCkgOiB0aGlzLnR5cGUuJG5vcm1hbGl6ZSh2YWx1ZSk7XG4gICAgfTtcbiAgICBQYXJhbS5wcm90b3R5cGUuaXNTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSDtcbiAgICB9O1xuICAgIFBhcmFtLnByb3RvdHlwZS52YWxpZGF0ZXMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gVGhlcmUgd2FzIG5vIHBhcmFtZXRlciB2YWx1ZSwgYnV0IHRoZSBwYXJhbSBpcyBvcHRpb25hbFxuICAgICAgICBpZiAoKGlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gbnVsbCkgJiYgdGhpcy5pc09wdGlvbmFsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIFRoZSB2YWx1ZSB3YXMgbm90IG9mIHRoZSBjb3JyZWN0IFBhcmFtVHlwZSwgYW5kIGNvdWxkIG5vdCBiZSBkZWNvZGVkIHRvIHRoZSBjb3JyZWN0IFBhcmFtVHlwZVxuICAgICAgICB2YXIgbm9ybWFsaXplZCA9IHRoaXMudHlwZS4kbm9ybWFsaXplKHZhbHVlKTtcbiAgICAgICAgaWYgKCF0aGlzLnR5cGUuaXMobm9ybWFsaXplZCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIFRoZSB2YWx1ZSB3YXMgb2YgdGhlIGNvcnJlY3QgdHlwZSwgYnV0IHdoZW4gZW5jb2RlZCwgZGlkIG5vdCBtYXRjaCB0aGUgUGFyYW1UeXBlJ3MgcmVnZXhwXG4gICAgICAgIHZhciBlbmNvZGVkID0gdGhpcy50eXBlLmVuY29kZShub3JtYWxpemVkKTtcbiAgICAgICAgcmV0dXJuICEoaXNTdHJpbmcoZW5jb2RlZCkgJiYgIXRoaXMudHlwZS5wYXR0ZXJuLmV4ZWMoZW5jb2RlZCkpO1xuICAgIH07XG4gICAgUGFyYW0ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJ7UGFyYW06XCIgKyB0aGlzLmlkICsgXCIgXCIgKyB0aGlzLnR5cGUgKyBcIiBzcXVhc2g6ICdcIiArIHRoaXMuc3F1YXNoICsgXCInIG9wdGlvbmFsOiBcIiArIHRoaXMuaXNPcHRpb25hbCArIFwifVwiO1xuICAgIH07XG4gICAgcmV0dXJuIFBhcmFtO1xufSgpKTtcbmV4cG9ydCB7IFBhcmFtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJhbS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHBhcmFtc1xuICovXG4vKiogKi9cbmltcG9ydCB7IGZyb21Kc29uLCB0b0pzb24sIGlkZW50aXR5LCBlcXVhbHMsIGluaGVyaXQsIG1hcCwgZXh0ZW5kLCBwaWNrIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc0RlZmluZWQsIGlzTnVsbE9yVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgaXMgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBQYXJhbVR5cGUgfSBmcm9tICcuL3BhcmFtVHlwZSc7XG4vKipcbiAqIEEgcmVnaXN0cnkgZm9yIHBhcmFtZXRlciB0eXBlcy5cbiAqXG4gKiBUaGlzIHJlZ2lzdHJ5IG1hbmFnZXMgdGhlIGJ1aWx0LWluIChhbmQgY3VzdG9tKSBwYXJhbWV0ZXIgdHlwZXMuXG4gKlxuICogVGhlIGJ1aWx0LWluIHBhcmFtZXRlciB0eXBlcyBhcmU6XG4gKlxuICogLSBbW3N0cmluZ11dXG4gKiAtIFtbcGF0aF1dXG4gKiAtIFtbcXVlcnldXVxuICogLSBbW2hhc2hdXVxuICogLSBbW2ludF1dXG4gKiAtIFtbYm9vbF1dXG4gKiAtIFtbZGF0ZV1dXG4gKiAtIFtbanNvbl1dXG4gKiAtIFtbYW55XV1cbiAqL1xudmFyIFBhcmFtVHlwZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIGZ1bmN0aW9uIFBhcmFtVHlwZXMoKSB7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuZW5xdWV1ZSA9IHRydWU7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMudHlwZVF1ZXVlID0gW107XG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0VHlwZXMgPSBwaWNrKFBhcmFtVHlwZXMucHJvdG90eXBlLCBbXG4gICAgICAgICAgICAnaGFzaCcsXG4gICAgICAgICAgICAnc3RyaW5nJyxcbiAgICAgICAgICAgICdxdWVyeScsXG4gICAgICAgICAgICAncGF0aCcsXG4gICAgICAgICAgICAnaW50JyxcbiAgICAgICAgICAgICdib29sJyxcbiAgICAgICAgICAgICdkYXRlJyxcbiAgICAgICAgICAgICdqc29uJyxcbiAgICAgICAgICAgICdhbnknLFxuICAgICAgICBdKTtcbiAgICAgICAgLy8gUmVnaXN0ZXIgZGVmYXVsdCB0eXBlcy4gU3RvcmUgdGhlbSBpbiB0aGUgcHJvdG90eXBlIG9mIHRoaXMudHlwZXMuXG4gICAgICAgIHZhciBtYWtlVHlwZSA9IGZ1bmN0aW9uIChkZWZpbml0aW9uLCBuYW1lKSB7IHJldHVybiBuZXcgUGFyYW1UeXBlKGV4dGVuZCh7IG5hbWU6IG5hbWUgfSwgZGVmaW5pdGlvbikpOyB9O1xuICAgICAgICB0aGlzLnR5cGVzID0gaW5oZXJpdChtYXAodGhpcy5kZWZhdWx0VHlwZXMsIG1ha2VUeXBlKSwge30pO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgUGFyYW1UeXBlcy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50eXBlcyA9IHt9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgcGFyYW1ldGVyIHR5cGVcbiAgICAgKlxuICAgICAqIEVuZCB1c2VycyBzaG91bGQgY2FsbCBbW1VybE1hdGNoZXJGYWN0b3J5LnR5cGVdXSwgd2hpY2ggZGVsZWdhdGVzIHRvIHRoaXMgbWV0aG9kLlxuICAgICAqL1xuICAgIFBhcmFtVHlwZXMucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKSB7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKGRlZmluaXRpb24pKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZXNbbmFtZV07XG4gICAgICAgIGlmICh0aGlzLnR5cGVzLmhhc093blByb3BlcnR5KG5hbWUpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQSB0eXBlIG5hbWVkICdcIiArIG5hbWUgKyBcIicgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkLlwiKTtcbiAgICAgICAgdGhpcy50eXBlc1tuYW1lXSA9IG5ldyBQYXJhbVR5cGUoZXh0ZW5kKHsgbmFtZTogbmFtZSB9LCBkZWZpbml0aW9uKSk7XG4gICAgICAgIGlmIChkZWZpbml0aW9uRm4pIHtcbiAgICAgICAgICAgIHRoaXMudHlwZVF1ZXVlLnB1c2goeyBuYW1lOiBuYW1lLCBkZWY6IGRlZmluaXRpb25GbiB9KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbnF1ZXVlKVxuICAgICAgICAgICAgICAgIHRoaXMuX2ZsdXNoVHlwZVF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgUGFyYW1UeXBlcy5wcm90b3R5cGUuX2ZsdXNoVHlwZVF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGhpcy50eXBlUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMudHlwZVF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAodHlwZS5wYXR0ZXJuKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBjYW5ub3Qgb3ZlcnJpZGUgYSB0eXBlJ3MgLnBhdHRlcm4gYXQgcnVudGltZS5cIik7XG4gICAgICAgICAgICBleHRlbmQodGhpcy50eXBlc1t0eXBlLm5hbWVdLCBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKHR5cGUuZGVmKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQYXJhbVR5cGVzO1xufSgpKTtcbmV4cG9ydCB7IFBhcmFtVHlwZXMgfTtcbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBpbml0RGVmYXVsdFR5cGVzKCkge1xuICAgIHZhciBtYWtlRGVmYXVsdFR5cGUgPSBmdW5jdGlvbiAoZGVmKSB7XG4gICAgICAgIHZhciB2YWxUb1N0cmluZyA9IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuICh2YWwgIT0gbnVsbCA/IHZhbC50b1N0cmluZygpIDogdmFsKTsgfTtcbiAgICAgICAgdmFyIGRlZmF1bHRUeXBlQmFzZSA9IHtcbiAgICAgICAgICAgIGVuY29kZTogdmFsVG9TdHJpbmcsXG4gICAgICAgICAgICBkZWNvZGU6IHZhbFRvU3RyaW5nLFxuICAgICAgICAgICAgaXM6IGlzKFN0cmluZyksXG4gICAgICAgICAgICBwYXR0ZXJuOiAvLiovLFxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnRyaXBsZS1lcXVhbHNcbiAgICAgICAgICAgIGVxdWFsczogZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgPT0gYjsgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgZGVmYXVsdFR5cGVCYXNlLCBkZWYpO1xuICAgIH07XG4gICAgLy8gRGVmYXVsdCBQYXJhbWV0ZXIgVHlwZSBEZWZpbml0aW9uc1xuICAgIGV4dGVuZChQYXJhbVR5cGVzLnByb3RvdHlwZSwge1xuICAgICAgICBzdHJpbmc6IG1ha2VEZWZhdWx0VHlwZSh7fSksXG4gICAgICAgIHBhdGg6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBwYXR0ZXJuOiAvW14vXSovLFxuICAgICAgICB9KSxcbiAgICAgICAgcXVlcnk6IG1ha2VEZWZhdWx0VHlwZSh7fSksXG4gICAgICAgIGhhc2g6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBpbmhlcml0OiBmYWxzZSxcbiAgICAgICAgfSksXG4gICAgICAgIGludDogbWFrZURlZmF1bHRUeXBlKHtcbiAgICAgICAgICAgIGRlY29kZTogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gcGFyc2VJbnQodmFsLCAxMCk7IH0sXG4gICAgICAgICAgICBpczogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQodmFsKSAmJiB0aGlzLmRlY29kZSh2YWwudG9TdHJpbmcoKSkgPT09IHZhbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXR0ZXJuOiAvLT9cXGQrLyxcbiAgICAgICAgfSksXG4gICAgICAgIGJvb2w6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuICh2YWwgJiYgMSkgfHwgMDsgfSxcbiAgICAgICAgICAgIGRlY29kZTogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gcGFyc2VJbnQodmFsLCAxMCkgIT09IDA7IH0sXG4gICAgICAgICAgICBpczogaXMoQm9vbGVhbiksXG4gICAgICAgICAgICBwYXR0ZXJuOiAvMHwxLyxcbiAgICAgICAgfSksXG4gICAgICAgIGRhdGU6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuaXModmFsKVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IFt2YWwuZ2V0RnVsbFllYXIoKSwgKCcwJyArICh2YWwuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMiksICgnMCcgKyB2YWwuZ2V0RGF0ZSgpKS5zbGljZSgtMildLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pcyh2YWwpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IHRoaXMuY2FwdHVyZS5leGVjKHZhbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gbmV3IERhdGUobWF0Y2hbMV0sIG1hdGNoWzJdIC0gMSwgbWF0Y2hbM10pIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB2YWwgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTih2YWwudmFsdWVPZigpKTsgfSxcbiAgICAgICAgICAgIGVxdWFsczogZnVuY3Rpb24gKGwsIHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWydnZXRGdWxsWWVhcicsICdnZXRNb250aCcsICdnZXREYXRlJ10ucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGZuKSB7IHJldHVybiBhY2MgJiYgbFtmbl0oKSA9PT0gcltmbl0oKTsgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0dGVybjogL1swLTldezR9LSg/OjBbMS05XXwxWzAtMl0pLSg/OjBbMS05XXxbMS0yXVswLTldfDNbMC0xXSkvLFxuICAgICAgICAgICAgY2FwdHVyZTogLyhbMC05XXs0fSktKDBbMS05XXwxWzAtMl0pLSgwWzEtOV18WzEtMl1bMC05XXwzWzAtMV0pLyxcbiAgICAgICAgfSksXG4gICAgICAgIGpzb246IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBlbmNvZGU6IHRvSnNvbixcbiAgICAgICAgICAgIGRlY29kZTogZnJvbUpzb24sXG4gICAgICAgICAgICBpczogaXMoT2JqZWN0KSxcbiAgICAgICAgICAgIGVxdWFsczogZXF1YWxzLFxuICAgICAgICAgICAgcGF0dGVybjogL1teL10qLyxcbiAgICAgICAgfSksXG4gICAgICAgIC8vIGRvZXMgbm90IGVuY29kZS9kZWNvZGVcbiAgICAgICAgYW55OiBtYWtlRGVmYXVsdFR5cGUoe1xuICAgICAgICAgICAgZW5jb2RlOiBpZGVudGl0eSxcbiAgICAgICAgICAgIGRlY29kZTogaWRlbnRpdHksXG4gICAgICAgICAgICBpczogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgIGVxdWFsczogZXF1YWxzLFxuICAgICAgICB9KSxcbiAgICB9KTtcbn1cbmluaXREZWZhdWx0VHlwZXMoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcmFtVHlwZXMuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBleHRlbmQsIGFuY2VzdG9ycyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFN0YXRlUGFyYW1zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRlUGFyYW1zKHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHsgcGFyYW1zID0ge307IH1cbiAgICAgICAgZXh0ZW5kKHRoaXMsIHBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1lcmdlcyBhIHNldCBvZiBwYXJhbWV0ZXJzIHdpdGggYWxsIHBhcmFtZXRlcnMgaW5oZXJpdGVkIGJldHdlZW4gdGhlIGNvbW1vbiBwYXJlbnRzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgc3RhdGUgYW5kIGEgZ2l2ZW4gZGVzdGluYXRpb24gc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbmV3UGFyYW1zIFRoZSBzZXQgb2YgcGFyYW1ldGVycyB3aGljaCB3aWxsIGJlIGNvbXBvc2l0ZWQgd2l0aCBpbmhlcml0ZWQgcGFyYW1zLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkY3VycmVudCBJbnRlcm5hbCBkZWZpbml0aW9uIG9mIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9ICR0byBJbnRlcm5hbCBkZWZpbml0aW9uIG9mIG9iamVjdCByZXByZXNlbnRpbmcgc3RhdGUgdG8gdHJhbnNpdGlvbiB0by5cbiAgICAgKi9cbiAgICBTdGF0ZVBhcmFtcy5wcm90b3R5cGUuJGluaGVyaXQgPSBmdW5jdGlvbiAobmV3UGFyYW1zLCAkY3VycmVudCwgJHRvKSB7XG4gICAgICAgIHZhciBwYXJlbnRQYXJhbXM7XG4gICAgICAgIHZhciBwYXJlbnRzID0gYW5jZXN0b3JzKCRjdXJyZW50LCAkdG8pLCBpbmhlcml0ZWQgPSB7fSwgaW5oZXJpdExpc3QgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBwYXJlbnRzKSB7XG4gICAgICAgICAgICBpZiAoIXBhcmVudHNbaV0gfHwgIXBhcmVudHNbaV0ucGFyYW1zKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcGFyZW50UGFyYW1zID0gT2JqZWN0LmtleXMocGFyZW50c1tpXS5wYXJhbXMpO1xuICAgICAgICAgICAgaWYgKCFwYXJlbnRQYXJhbXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBwYXJlbnRQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5oZXJpdExpc3QuaW5kZXhPZihwYXJlbnRQYXJhbXNbal0pID49IDApXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGluaGVyaXRMaXN0LnB1c2gocGFyZW50UGFyYW1zW2pdKTtcbiAgICAgICAgICAgICAgICBpbmhlcml0ZWRbcGFyZW50UGFyYW1zW2pdXSA9IHRoaXNbcGFyZW50UGFyYW1zW2pdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBpbmhlcml0ZWQsIG5ld1BhcmFtcyk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGVQYXJhbXM7XG59KCkpO1xuZXhwb3J0IHsgU3RhdGVQYXJhbXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlUGFyYW1zLmpzLm1hcCIsIi8qKiBAbW9kdWxlIHBhdGggKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBleHRlbmQsIGFwcGx5UGFpcnMsIGZpbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHByb3BFcSB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqXG4gKiBBIG5vZGUgaW4gYSBbW1RyZWVDaGFuZ2VzXV0gcGF0aFxuICpcbiAqIEZvciBhIFtbVHJlZUNoYW5nZXNdXSBwYXRoLCB0aGlzIGNsYXNzIGhvbGRzIHRoZSBzdGF0ZWZ1bCBpbmZvcm1hdGlvbiBmb3IgYSBzaW5nbGUgbm9kZSBpbiB0aGUgcGF0aC5cbiAqIEVhY2ggUGF0aE5vZGUgY29ycmVzcG9uZHMgdG8gYSBzdGF0ZSBiZWluZyBlbnRlcmVkLCBleGl0ZWQsIG9yIHJldGFpbmVkLlxuICogVGhlIHN0YXRlZnVsIGluZm9ybWF0aW9uIGluY2x1ZGVzIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHJlc29sdmUgZGF0YS5cbiAqL1xudmFyIFBhdGhOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhdGhOb2RlKHN0YXRlT3JOb2RlKSB7XG4gICAgICAgIGlmIChzdGF0ZU9yTm9kZSBpbnN0YW5jZW9mIFBhdGhOb2RlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN0YXRlT3JOb2RlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IG5vZGUuc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnBhcmFtU2NoZW1hID0gbm9kZS5wYXJhbVNjaGVtYS5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IGV4dGVuZCh7fSwgbm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy52aWV3cyA9IG5vZGUudmlld3MgJiYgbm9kZS52aWV3cy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RhdGVPck5vZGU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnBhcmFtU2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZhYmxlcyA9IHN0YXRlLnJlc29sdmFibGVzLm1hcChmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMuY2xvbmUoKTsgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUGF0aE5vZGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKHRoaXMpO1xuICAgIH07XG4gICAgLyoqIFNldHMgW1twYXJhbVZhbHVlc11dIGZvciB0aGUgbm9kZSwgZnJvbSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCBoYXNoICovXG4gICAgUGF0aE5vZGUucHJvdG90eXBlLmFwcGx5UmF3UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICB2YXIgZ2V0UGFyYW1WYWwgPSBmdW5jdGlvbiAocGFyYW1EZWYpIHsgcmV0dXJuIFtwYXJhbURlZi5pZCwgcGFyYW1EZWYudmFsdWUocGFyYW1zW3BhcmFtRGVmLmlkXSldOyB9O1xuICAgICAgICB0aGlzLnBhcmFtVmFsdWVzID0gdGhpcy5wYXJhbVNjaGVtYS5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHBEZWYpIHsgcmV0dXJuIGFwcGx5UGFpcnMobWVtbywgZ2V0UGFyYW1WYWwocERlZikpOyB9LCB7fSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqIEdldHMgYSBzcGVjaWZpYyBbW1BhcmFtXV0gbWV0YWRhdGEgdGhhdCBiZWxvbmdzIHRvIHRoZSBub2RlICovXG4gICAgUGF0aE5vZGUucHJvdG90eXBlLnBhcmFtZXRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBmaW5kKHRoaXMucGFyYW1TY2hlbWEsIHByb3BFcSgnaWQnLCBuYW1lKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzdGF0ZSBhbmQgcGFyYW1ldGVyIHZhbHVlcyBmb3IgYW5vdGhlciBQYXRoTm9kZSBhcmVcbiAgICAgKiBlcXVhbCB0byB0aGUgc3RhdGUgYW5kIHBhcmFtIHZhbHVlcyBmb3IgdGhpcyBQYXRoTm9kZVxuICAgICAqL1xuICAgIFBhdGhOb2RlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobm9kZSwgcGFyYW1zRm4pIHtcbiAgICAgICAgdmFyIGRpZmYgPSB0aGlzLmRpZmYobm9kZSwgcGFyYW1zRm4pO1xuICAgICAgICByZXR1cm4gZGlmZiAmJiBkaWZmLmxlbmd0aCA9PT0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmRzIFBhcmFtcyB3aXRoIGRpZmZlcmVudCBwYXJhbWV0ZXIgdmFsdWVzIG9uIGFub3RoZXIgUGF0aE5vZGUuXG4gICAgICpcbiAgICAgKiBHaXZlbiBhbm90aGVyIG5vZGUgKG9mIHRoZSBzYW1lIHN0YXRlKSwgZmluZHMgdGhlIHBhcmFtZXRlciB2YWx1ZXMgd2hpY2ggZGlmZmVyLlxuICAgICAqIFJldHVybnMgdGhlIFtbUGFyYW1dXSAoc2NoZW1hIG9iamVjdHMpIHdob3NlIHBhcmFtZXRlciB2YWx1ZXMgZGlmZmVyLlxuICAgICAqXG4gICAgICogR2l2ZW4gYW5vdGhlciBub2RlIGZvciBhIGRpZmZlcmVudCBzdGF0ZSwgcmV0dXJucyBgZmFsc2VgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBjb21wYXJlIHRvXG4gICAgICogQHBhcmFtIHBhcmFtc0ZuIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHdoaWNoIHBhcmFtZXRlcnMgc2hvdWxkIGJlIGNvbXBhcmVkLlxuICAgICAqIEByZXR1cm5zIFRoZSBbW1BhcmFtXV1zIHdoaWNoIGRpZmZlciwgb3IgbnVsbCBpZiB0aGUgdHdvIG5vZGVzIGFyZSBmb3IgZGlmZmVyZW50IHN0YXRlc1xuICAgICAqL1xuICAgIFBhdGhOb2RlLnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24gKG5vZGUsIHBhcmFtc0ZuKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBub2RlLnN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgcGFyYW1zID0gcGFyYW1zRm4gPyBwYXJhbXNGbih0aGlzKSA6IHRoaXMucGFyYW1TY2hlbWE7XG4gICAgICAgIHJldHVybiBQYXJhbS5jaGFuZ2VkKHBhcmFtcywgdGhpcy5wYXJhbVZhbHVlcywgbm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIFBhdGhOb2RlXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIGluc3RhbmNlIG1ldGhvZCBgbm9kZS5jbG9uZSgpYFxuICAgICAqL1xuICAgIFBhdGhOb2RlLmNsb25lID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuY2xvbmUoKTsgfTtcbiAgICByZXR1cm4gUGF0aE5vZGU7XG59KCkpO1xuZXhwb3J0IHsgUGF0aE5vZGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhdGhOb2RlLmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgc3RhdGVcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi4vY29tbW9uJztcbi8qKlxuICogRW5jYXBzdWxhdGUgdGhlIHRhcmdldCAoZGVzdGluYXRpb24pIHN0YXRlL3BhcmFtcy9vcHRpb25zIG9mIGEgW1tUcmFuc2l0aW9uXV0uXG4gKlxuICogVGhpcyBjbGFzcyBpcyBmcmVxdWVudGx5IHVzZWQgdG8gcmVkaXJlY3QgYSB0cmFuc2l0aW9uIHRvIGEgbmV3IGRlc3RpbmF0aW9uLlxuICpcbiAqIFNlZTpcbiAqXG4gKiAtIFtbSG9va1Jlc3VsdF1dXG4gKiAtIFtbVHJhbnNpdGlvbkhvb2tGbl1dXG4gKiAtIFtbVHJhbnNpdGlvblNlcnZpY2Uub25TdGFydF1dXG4gKlxuICogVG8gY3JlYXRlIGEgYFRhcmdldFN0YXRlYCwgdXNlIFtbU3RhdGVTZXJ2aWNlLnRhcmdldF1dLlxuICpcbiAqIC0tLVxuICpcbiAqIFRoaXMgY2xhc3Mgd3JhcHM6XG4gKlxuICogMSkgYW4gaWRlbnRpZmllciBmb3IgYSBzdGF0ZVxuICogMikgYSBzZXQgb2YgcGFyYW1ldGVyc1xuICogMykgYW5kIHRyYW5zaXRpb24gb3B0aW9uc1xuICogNCkgdGhlIHJlZ2lzdGVyZWQgc3RhdGUgb2JqZWN0ICh0aGUgW1tTdGF0ZURlY2xhcmF0aW9uXV0pXG4gKlxuICogTWFueSBVSS1Sb3V0ZXIgQVBJcyBzdWNoIGFzIFtbU3RhdGVTZXJ2aWNlLmdvXV0gdGFrZSBhIFtbU3RhdGVPck5hbWVdXSBhcmd1bWVudCB3aGljaCBjYW5cbiAqIGVpdGhlciBiZSBhICpzdGF0ZSBvYmplY3QqIChhIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9yIFtbU3RhdGVPYmplY3RdXSkgb3IgYSAqc3RhdGUgbmFtZSogKGEgc3RyaW5nKS5cbiAqIFRoZSBgVGFyZ2V0U3RhdGVgIGNsYXNzIG5vcm1hbGl6ZXMgdGhvc2Ugb3B0aW9ucy5cbiAqXG4gKiBBIGBUYXJnZXRTdGF0ZWAgbWF5IGJlIHZhbGlkICh0aGUgc3RhdGUgYmVpbmcgdGFyZ2V0ZWQgZXhpc3RzIGluIHRoZSByZWdpc3RyeSlcbiAqIG9yIGludmFsaWQgKHRoZSBzdGF0ZSBiZWluZyB0YXJnZXRlZCBpcyBub3QgcmVnaXN0ZXJlZCkuXG4gKi9cbnZhciBUYXJnZXRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgVGFyZ2V0U3RhdGUgY29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIE5vdGU6IERvIG5vdCBjb25zdHJ1Y3QgYSBgVGFyZ2V0U3RhdGVgIG1hbnVhbGx5LlxuICAgICAqIFRvIGNyZWF0ZSBhIGBUYXJnZXRTdGF0ZWAsIHVzZSB0aGUgW1tTdGF0ZVNlcnZpY2UudGFyZ2V0XV0gZmFjdG9yeSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX3N0YXRlUmVnaXN0cnkgVGhlIFN0YXRlUmVnaXN0cnkgdG8gdXNlIHRvIGxvb2sgdXAgdGhlIF9kZWZpbml0aW9uXG4gICAgICogQHBhcmFtIF9pZGVudGlmaWVyIEFuIGlkZW50aWZpZXIgZm9yIGEgc3RhdGUuXG4gICAgICogICAgRWl0aGVyIGEgZnVsbHktcXVhbGlmaWVkIHN0YXRlIG5hbWUsIG9yIHRoZSBvYmplY3QgdXNlZCB0byBkZWZpbmUgdGhlIHN0YXRlLlxuICAgICAqIEBwYXJhbSBfcGFyYW1zIFBhcmFtZXRlcnMgZm9yIHRoZSB0YXJnZXQgc3RhdGVcbiAgICAgKiBAcGFyYW0gX29wdGlvbnMgVHJhbnNpdGlvbiBvcHRpb25zLlxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGFyZ2V0U3RhdGUoX3N0YXRlUmVnaXN0cnksIF9pZGVudGlmaWVyLCBfcGFyYW1zLCBfb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9zdGF0ZVJlZ2lzdHJ5ID0gX3N0YXRlUmVnaXN0cnk7XG4gICAgICAgIHRoaXMuX2lkZW50aWZpZXIgPSBfaWRlbnRpZmllcjtcbiAgICAgICAgdGhpcy5faWRlbnRpZmllciA9IF9pZGVudGlmaWVyO1xuICAgICAgICB0aGlzLl9wYXJhbXMgPSBleHRlbmQoe30sIF9wYXJhbXMgfHwge30pO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHt9LCBfb3B0aW9ucyB8fCB7fSk7XG4gICAgICAgIHRoaXMuX2RlZmluaXRpb24gPSBfc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoX2lkZW50aWZpZXIsIHRoaXMuX29wdGlvbnMucmVsYXRpdmUpO1xuICAgIH1cbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIHN0YXRlIHRoaXMgb2JqZWN0IHRhcmdldHMgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUubmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24ubmFtZSkgfHwgdGhpcy5faWRlbnRpZmllcjtcbiAgICB9O1xuICAgIC8qKiBUaGUgaWRlbnRpZmllciB1c2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBUYXJnZXRTdGF0ZSAqL1xuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5pZGVudGlmaWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWRlbnRpZmllcjtcbiAgICB9O1xuICAgIC8qKiBUaGUgdGFyZ2V0IHBhcmFtZXRlciB2YWx1ZXMgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUucGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyYW1zO1xuICAgIH07XG4gICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvYmplY3QgKGlmIGl0IHdhcyBmb3VuZCkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuJHN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmaW5pdGlvbjtcbiAgICB9O1xuICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgZGVjbGFyYXRpb24gKGlmIGl0IHdhcyBmb3VuZCkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24uc2VsZjtcbiAgICB9O1xuICAgIC8qKiBUaGUgdGFyZ2V0IG9wdGlvbnMgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfTtcbiAgICAvKiogVHJ1ZSBpZiB0aGUgdGFyZ2V0IHN0YXRlIHdhcyBmb3VuZCAqL1xuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5leGlzdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24uc2VsZik7XG4gICAgfTtcbiAgICAvKiogVHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIHZhbGlkICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZXJyb3IoKTtcbiAgICB9O1xuICAgIC8qKiBJZiB0aGUgb2JqZWN0IGlzIGludmFsaWQsIHJldHVybnMgdGhlIHJlYXNvbiB3aHkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBiYXNlID0gdGhpcy5vcHRpb25zKCkucmVsYXRpdmU7XG4gICAgICAgIGlmICghdGhpcy5fZGVmaW5pdGlvbiAmJiAhIWJhc2UpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZU5hbWUgPSBiYXNlLm5hbWUgPyBiYXNlLm5hbWUgOiBiYXNlO1xuICAgICAgICAgICAgcmV0dXJuIFwiQ291bGQgbm90IHJlc29sdmUgJ1wiICsgdGhpcy5uYW1lKCkgKyBcIicgZnJvbSBzdGF0ZSAnXCIgKyBzdGF0ZU5hbWUgKyBcIidcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24pXG4gICAgICAgICAgICByZXR1cm4gXCJObyBzdWNoIHN0YXRlICdcIiArIHRoaXMubmFtZSgpICsgXCInXCI7XG4gICAgICAgIGlmICghdGhpcy5fZGVmaW5pdGlvbi5zZWxmKVxuICAgICAgICAgICAgcmV0dXJuIFwiU3RhdGUgJ1wiICsgdGhpcy5uYW1lKCkgKyBcIicgaGFzIGFuIGludmFsaWQgZGVmaW5pdGlvblwiO1xuICAgIH07XG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCInXCIgKyB0aGlzLm5hbWUoKSArIFwiJ1wiICsgc3RyaW5naWZ5KHRoaXMucGFyYW1zKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyBUYXJnZXRTdGF0ZSB3aGljaCB0YXJnZXRzIGEgZGlmZmVyZW50IHN0YXRlLlxuICAgICAqIFRoZSBuZXcgVGFyZ2V0U3RhdGUgaGFzIHRoZSBzYW1lIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHRyYW5zaXRpb24gb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZSBUaGUgbmV3IHN0YXRlIHRoYXQgc2hvdWxkIGJlIHRhcmdldGVkXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKHRoaXMuX3N0YXRlUmVnaXN0cnksIHN0YXRlLCB0aGlzLl9wYXJhbXMsIHRoaXMuX29wdGlvbnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyBUYXJnZXRTdGF0ZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyB0aGUgbmV3IHBhcmFtZXRlciB2YWx1ZXMgdG8gdXNlXG4gICAgICogQHBhcmFtIHJlcGxhY2UgV2hlbiBmYWxzZSAoZGVmYXVsdCkgdGhlIG5ldyBwYXJhbWV0ZXIgdmFsdWVzIHdpbGwgYmUgbWVyZ2VkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWVzLlxuICAgICAqICAgICAgICAgICAgICAgIFdoZW4gdHJ1ZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2YWx1ZXMuXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhQYXJhbXMgPSBmdW5jdGlvbiAocGFyYW1zLCByZXBsYWNlKSB7XG4gICAgICAgIGlmIChyZXBsYWNlID09PSB2b2lkIDApIHsgcmVwbGFjZSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSByZXBsYWNlID8gcGFyYW1zIDogZXh0ZW5kKHt9LCB0aGlzLl9wYXJhbXMsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgbmV3UGFyYW1zLCB0aGlzLl9vcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgVGFyZ2V0U3RhdGUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgVHJhbnNpdGlvbiBPcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG5ldyBvcHRpb25zIHRvIHVzZVxuICAgICAqIEBwYXJhbSByZXBsYWNlIFdoZW4gZmFsc2UgKGRlZmF1bHQpIHRoZSBuZXcgb3B0aW9ucyB3aWxsIGJlIG1lcmdlZCB3aXRoIHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAgICogICAgICAgICAgICAgICAgV2hlbiB0cnVlIHRoZSBvcHRpb25zIHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMsIHJlcGxhY2UpIHtcbiAgICAgICAgaWYgKHJlcGxhY2UgPT09IHZvaWQgMCkgeyByZXBsYWNlID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIG5ld09wdHMgPSByZXBsYWNlID8gb3B0aW9ucyA6IGV4dGVuZCh7fSwgdGhpcy5fb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgdGhpcy5fcGFyYW1zLCBuZXdPcHRzKTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBoYXMgYSBzdGF0ZSBwcm9wZXJ0eSB0aGF0IG1pZ2h0IGJlIGEgc3RhdGUgb3Igc3RhdGUgbmFtZSAqL1xuICAgIFRhcmdldFN0YXRlLmlzRGVmID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5zdGF0ZSAmJiAoaXNTdHJpbmcob2JqLnN0YXRlKSB8fCBpc1N0cmluZyhvYmouc3RhdGUubmFtZSkpOyB9O1xuICAgIHJldHVybiBUYXJnZXRTdGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBUYXJnZXRTdGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFyZ2V0U3RhdGUuanMubWFwIiwiLyoqIEBtb2R1bGUgcGF0aCAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgZmluZCwgcGljaywgb21pdCwgdGFpbCwgbWVyZ2VSLCB2YWx1ZXMsIHVubmVzdFIsIGluQXJyYXksIGFycmF5VHVwbGVzLCB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBUYXJnZXRTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3RhcmdldFN0YXRlJztcbmltcG9ydCB7IFBhdGhOb2RlIH0gZnJvbSAnLi9wYXRoTm9kZSc7XG4vKipcbiAqIFRoaXMgY2xhc3MgY29udGFpbnMgZnVuY3Rpb25zIHdoaWNoIGNvbnZlcnQgVGFyZ2V0U3RhdGVzLCBOb2RlcyBhbmQgcGF0aHMgZnJvbSBvbmUgdHlwZSB0byBhbm90aGVyLlxuICovXG52YXIgUGF0aFV0aWxzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhdGhVdGlscygpIHtcbiAgICB9XG4gICAgLyoqIEdpdmVuIGEgUGF0aE5vZGVbXSwgY3JlYXRlIGFuIFRhcmdldFN0YXRlICovXG4gICAgUGF0aFV0aWxzLm1ha2VUYXJnZXRTdGF0ZSA9IGZ1bmN0aW9uIChyZWdpc3RyeSwgcGF0aCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0YWlsKHBhdGgpLnN0YXRlO1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKHJlZ2lzdHJ5LCBzdGF0ZSwgcGF0aC5tYXAocHJvcCgncGFyYW1WYWx1ZXMnKSkucmVkdWNlKG1lcmdlUiwge30pLCB7fSk7XG4gICAgfTtcbiAgICBQYXRoVXRpbHMuYnVpbGRQYXRoID0gZnVuY3Rpb24gKHRhcmdldFN0YXRlKSB7XG4gICAgICAgIHZhciB0b1BhcmFtcyA9IHRhcmdldFN0YXRlLnBhcmFtcygpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0U3RhdGUuJHN0YXRlKCkucGF0aC5tYXAoZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBuZXcgUGF0aE5vZGUoc3RhdGUpLmFwcGx5UmF3UGFyYW1zKHRvUGFyYW1zKTsgfSk7XG4gICAgfTtcbiAgICAvKiogR2l2ZW4gYSBmcm9tUGF0aDogUGF0aE5vZGVbXSBhbmQgYSBUYXJnZXRTdGF0ZSwgYnVpbGRzIGEgdG9QYXRoOiBQYXRoTm9kZVtdICovXG4gICAgUGF0aFV0aWxzLmJ1aWxkVG9QYXRoID0gZnVuY3Rpb24gKGZyb21QYXRoLCB0YXJnZXRTdGF0ZSkge1xuICAgICAgICB2YXIgdG9QYXRoID0gUGF0aFV0aWxzLmJ1aWxkUGF0aCh0YXJnZXRTdGF0ZSk7XG4gICAgICAgIGlmICh0YXJnZXRTdGF0ZS5vcHRpb25zKCkuaW5oZXJpdCkge1xuICAgICAgICAgICAgcmV0dXJuIFBhdGhVdGlscy5pbmhlcml0UGFyYW1zKGZyb21QYXRoLCB0b1BhdGgsIE9iamVjdC5rZXlzKHRhcmdldFN0YXRlLnBhcmFtcygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvUGF0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgVmlld0NvbmZpZyBvYmplY3RzIGFuZCBhZGRzIHRvIG5vZGVzLlxuICAgICAqXG4gICAgICogT24gZWFjaCBbW1BhdGhOb2RlXV0sIGNyZWF0ZXMgVmlld0NvbmZpZyBvYmplY3RzIGZyb20gdGhlIHZpZXdzOiBwcm9wZXJ0eSBvZiB0aGUgbm9kZSdzIHN0YXRlXG4gICAgICovXG4gICAgUGF0aFV0aWxzLmFwcGx5Vmlld0NvbmZpZ3MgPSBmdW5jdGlvbiAoJHZpZXcsIHBhdGgsIHN0YXRlcykge1xuICAgICAgICAvLyBPbmx5IGFwcGx5IHRoZSB2aWV3Q29uZmlncyB0byB0aGUgbm9kZXMgZm9yIHRoZSBnaXZlbiBzdGF0ZXNcbiAgICAgICAgcGF0aC5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIGluQXJyYXkoc3RhdGVzLCBub2RlLnN0YXRlKTsgfSkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgdmFyIHZpZXdEZWNscyA9IHZhbHVlcyhub2RlLnN0YXRlLnZpZXdzIHx8IHt9KTtcbiAgICAgICAgICAgIHZhciBzdWJQYXRoID0gUGF0aFV0aWxzLnN1YlBhdGgocGF0aCwgZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4gPT09IG5vZGU7IH0pO1xuICAgICAgICAgICAgdmFyIHZpZXdDb25maWdzID0gdmlld0RlY2xzLm1hcChmdW5jdGlvbiAodmlldykgeyByZXR1cm4gJHZpZXcuY3JlYXRlVmlld0NvbmZpZyhzdWJQYXRoLCB2aWV3KTsgfSk7XG4gICAgICAgICAgICBub2RlLnZpZXdzID0gdmlld0NvbmZpZ3MucmVkdWNlKHVubmVzdFIsIFtdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGZyb21QYXRoIGFuZCBhIHRvUGF0aCwgcmV0dXJucyBhIG5ldyB0byBwYXRoIHdoaWNoIGluaGVyaXRzIHBhcmFtZXRlcnMgZnJvbSB0aGUgZnJvbVBhdGhcbiAgICAgKlxuICAgICAqIEZvciBhIHBhcmFtZXRlciBpbiBhIG5vZGUgdG8gYmUgaW5oZXJpdGVkIGZyb20gdGhlIGZyb20gcGF0aDpcbiAgICAgKiAtIFRoZSB0b1BhdGgncyBub2RlIG11c3QgaGF2ZSBhIG1hdGNoaW5nIG5vZGUgaW4gdGhlIGZyb21QYXRoIChieSBzdGF0ZSkuXG4gICAgICogLSBUaGUgcGFyYW1ldGVyIG5hbWUgbXVzdCBub3QgYmUgZm91bmQgaW4gdGhlIHRvS2V5cyBwYXJhbWV0ZXIgYXJyYXkuXG4gICAgICpcbiAgICAgKiBOb3RlOiB0aGUga2V5cyBwcm92aWRlZCBpbiB0b0tleXMgYXJlIGludGVuZGVkIHRvIGJlIHRob3NlIHBhcmFtIGtleXMgZXhwbGljaXRseSBzcGVjaWZpZWQgYnkgc29tZVxuICAgICAqIGNhbGxlciwgZm9yIGluc3RhbmNlLCAkc3RhdGUudHJhbnNpdGlvblRvKC4uLiwgdG9QYXJhbXMpLiAgSWYgYSBrZXkgd2FzIGZvdW5kIGluIHRvUGFyYW1zLFxuICAgICAqIGl0IGlzIG5vdCBpbmhlcml0ZWQgZnJvbSB0aGUgZnJvbVBhdGguXG4gICAgICovXG4gICAgUGF0aFV0aWxzLmluaGVyaXRQYXJhbXMgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRvUGF0aCwgdG9LZXlzKSB7XG4gICAgICAgIGlmICh0b0tleXMgPT09IHZvaWQgMCkgeyB0b0tleXMgPSBbXTsgfVxuICAgICAgICBmdW5jdGlvbiBub2RlUGFyYW1WYWxzKHBhdGgsIHN0YXRlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IGZpbmQocGF0aCwgcHJvcEVxKCdzdGF0ZScsIHN0YXRlKSk7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBub2RlICYmIG5vZGUucGFyYW1WYWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub0luaGVyaXQgPSBmcm9tUGF0aFxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5wYXJhbVNjaGVtYTsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gIXBhcmFtLmluaGVyaXQ7IH0pXG4gICAgICAgICAgICAubWFwKHByb3AoJ2lkJykpO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2l2ZW4gYW4gW1tQYXRoTm9kZV1dIFwidG9Ob2RlXCIsIHJldHVybiBhIG5ldyBbW1BhdGhOb2RlXV0gd2l0aCBwYXJhbSB2YWx1ZXMgaW5oZXJpdGVkIGZyb20gdGhlXG4gICAgICAgICAqIG1hdGNoaW5nIG5vZGUgaW4gZnJvbVBhdGguICBPbmx5IGluaGVyaXQga2V5cyB0aGF0IGFyZW4ndCBmb3VuZCBpbiBcInRvS2V5c1wiIGZyb20gdGhlIG5vZGUgaW4gXCJmcm9tUGF0aFwiXCJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VJbmhlcml0ZWRQYXJhbXNOb2RlKHRvTm9kZSkge1xuICAgICAgICAgICAgLy8gQWxsIHBhcmFtIHZhbHVlcyBmb3IgdGhlIG5vZGUgKG1heSBpbmNsdWRlIGRlZmF1bHQga2V5L3ZhbHMsIHdoZW4ga2V5IHdhcyBub3QgZm91bmQgaW4gdG9QYXJhbXMpXG4gICAgICAgICAgICB2YXIgdG9QYXJhbVZhbHMgPSBleHRlbmQoe30sIHRvTm9kZSAmJiB0b05vZGUucGFyYW1WYWx1ZXMpO1xuICAgICAgICAgICAgLy8gbGltaXRlZCB0byBvbmx5IHRob3NlIGtleXMgZm91bmQgaW4gdG9QYXJhbXNcbiAgICAgICAgICAgIHZhciBpbmNvbWluZ1BhcmFtVmFscyA9IHBpY2sodG9QYXJhbVZhbHMsIHRvS2V5cyk7XG4gICAgICAgICAgICB0b1BhcmFtVmFscyA9IG9taXQodG9QYXJhbVZhbHMsIHRvS2V5cyk7XG4gICAgICAgICAgICB2YXIgZnJvbVBhcmFtVmFscyA9IG9taXQobm9kZVBhcmFtVmFscyhmcm9tUGF0aCwgdG9Ob2RlLnN0YXRlKSB8fCB7fSwgbm9Jbmhlcml0KTtcbiAgICAgICAgICAgIC8vIGV4dGVuZCB0b1BhcmFtVmFscyB3aXRoIGFueSBmcm9tUGFyYW1WYWxzLCB0aGVuIG92ZXJyaWRlIGFueSBvZiB0aG9zZSB0aG9zZSB3aXRoIGluY29taW5nUGFyYW1WYWxzXG4gICAgICAgICAgICB2YXIgb3duUGFyYW1WYWxzID0gZXh0ZW5kKHRvUGFyYW1WYWxzLCBmcm9tUGFyYW1WYWxzLCBpbmNvbWluZ1BhcmFtVmFscyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKHRvTm9kZS5zdGF0ZSkuYXBwbHlSYXdQYXJhbXMob3duUGFyYW1WYWxzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgcGFyYW0ga2V5cyBzcGVjaWZpZWQgYnkgdGhlIGluY29taW5nIHRvUGFyYW1zXG4gICAgICAgIHJldHVybiB0b1BhdGgubWFwKG1ha2VJbmhlcml0ZWRQYXJhbXNOb2RlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSB0cmVlIGNoYW5nZXMgKGVudGVyaW5nLCBleGl0aW5nKSBiZXR3ZWVuIGEgZnJvbVBhdGggYW5kIHRvUGF0aC5cbiAgICAgKi9cbiAgICBQYXRoVXRpbHMudHJlZUNoYW5nZXMgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRvUGF0aCwgcmVsb2FkU3RhdGUpIHtcbiAgICAgICAgdmFyIG1heCA9IE1hdGgubWluKGZyb21QYXRoLmxlbmd0aCwgdG9QYXRoLmxlbmd0aCk7XG4gICAgICAgIHZhciBrZWVwID0gMDtcbiAgICAgICAgdmFyIG5vZGVzTWF0Y2ggPSBmdW5jdGlvbiAobm9kZTEsIG5vZGUyKSB7IHJldHVybiBub2RlMS5lcXVhbHMobm9kZTIsIFBhdGhVdGlscy5ub25EeW5hbWljUGFyYW1zKTsgfTtcbiAgICAgICAgd2hpbGUgKGtlZXAgPCBtYXggJiYgZnJvbVBhdGhba2VlcF0uc3RhdGUgIT09IHJlbG9hZFN0YXRlICYmIG5vZGVzTWF0Y2goZnJvbVBhdGhba2VlcF0sIHRvUGF0aFtrZWVwXSkpIHtcbiAgICAgICAgICAgIGtlZXArKztcbiAgICAgICAgfVxuICAgICAgICAvKiogR2l2ZW4gYSByZXRhaW5lZCBub2RlLCByZXR1cm4gYSBuZXcgbm9kZSB3aGljaCB1c2VzIHRoZSB0byBub2RlJ3MgcGFyYW0gdmFsdWVzICovXG4gICAgICAgIGZ1bmN0aW9uIGFwcGx5VG9QYXJhbXMocmV0YWluZWROb2RlLCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBjbG9uZWQgPSByZXRhaW5lZE5vZGUuY2xvbmUoKTtcbiAgICAgICAgICAgIGNsb25lZC5wYXJhbVZhbHVlcyA9IHRvUGF0aFtpZHhdLnBhcmFtVmFsdWVzO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZnJvbSwgcmV0YWluZWQsIGV4aXRpbmcsIGVudGVyaW5nLCB0bztcbiAgICAgICAgZnJvbSA9IGZyb21QYXRoO1xuICAgICAgICByZXRhaW5lZCA9IGZyb20uc2xpY2UoMCwga2VlcCk7XG4gICAgICAgIGV4aXRpbmcgPSBmcm9tLnNsaWNlKGtlZXApO1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcmV0YWluZWQgcGF0aCAod2l0aCBzaGFsbG93IGNvcGllcyBvZiBub2Rlcykgd2hpY2ggaGF2ZSB0aGUgcGFyYW1zIG9mIHRoZSB0b1BhdGggbWFwcGVkXG4gICAgICAgIHZhciByZXRhaW5lZFdpdGhUb1BhcmFtcyA9IHJldGFpbmVkLm1hcChhcHBseVRvUGFyYW1zKTtcbiAgICAgICAgZW50ZXJpbmcgPSB0b1BhdGguc2xpY2Uoa2VlcCk7XG4gICAgICAgIHRvID0gcmV0YWluZWRXaXRoVG9QYXJhbXMuY29uY2F0KGVudGVyaW5nKTtcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogZnJvbSwgdG86IHRvLCByZXRhaW5lZDogcmV0YWluZWQsIHJldGFpbmVkV2l0aFRvUGFyYW1zOiByZXRhaW5lZFdpdGhUb1BhcmFtcywgZXhpdGluZzogZXhpdGluZywgZW50ZXJpbmc6IGVudGVyaW5nIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHBhdGggd2hpY2ggaXM6IHRoZSBzdWJwYXRoIG9mIHRoZSBmaXJzdCBwYXRoIHdoaWNoIG1hdGNoZXMgdGhlIHNlY29uZCBwYXRoLlxuICAgICAqXG4gICAgICogVGhlIG5ldyBwYXRoIHN0YXJ0cyBmcm9tIHJvb3QgYW5kIGNvbnRhaW5zIGFueSBub2RlcyB0aGF0IG1hdGNoIHRoZSBub2RlcyBpbiB0aGUgc2Vjb25kIHBhdGguXG4gICAgICogSXQgc3RvcHMgYmVmb3JlIHRoZSBmaXJzdCBub24tbWF0Y2hpbmcgbm9kZS5cbiAgICAgKlxuICAgICAqIE5vZGVzIGFyZSBjb21wYXJlZCB1c2luZyB0aGVpciBzdGF0ZSBwcm9wZXJ0eSBhbmQgdGhlaXIgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICAgKiBJZiBhIGBwYXJhbXNGbmAgaXMgcHJvdmlkZWQsIG9ubHkgdGhlIFtbUGFyYW1dXSByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24gd2lsbCBiZSBjb25zaWRlcmVkIHdoZW4gY29tcGFyaW5nIG5vZGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhBIHRoZSBmaXJzdCBwYXRoXG4gICAgICogQHBhcmFtIHBhdGhCIHRoZSBzZWNvbmQgcGF0aFxuICAgICAqIEBwYXJhbSBwYXJhbXNGbiBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHBhcmFtZXRlcnMgdG8gY29uc2lkZXIgd2hlbiBjb21wYXJpbmdcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIFBhdGhOb2RlcyBmcm9tIHRoZSBmaXJzdCBwYXRoIHdoaWNoIG1hdGNoIHRoZSBub2RlcyBpbiB0aGUgc2Vjb25kIHBhdGhcbiAgICAgKi9cbiAgICBQYXRoVXRpbHMubWF0Y2hpbmcgPSBmdW5jdGlvbiAocGF0aEEsIHBhdGhCLCBwYXJhbXNGbikge1xuICAgICAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgICAgICB2YXIgdHVwbGVzID0gYXJyYXlUdXBsZXMocGF0aEEsIHBhdGhCKTtcbiAgICAgICAgcmV0dXJuIHR1cGxlcy5yZWR1Y2UoZnVuY3Rpb24gKG1hdGNoaW5nLCBfYSkge1xuICAgICAgICAgICAgdmFyIG5vZGVBID0gX2FbMF0sIG5vZGVCID0gX2FbMV07XG4gICAgICAgICAgICBkb25lID0gZG9uZSB8fCAhbm9kZUEuZXF1YWxzKG5vZGVCLCBwYXJhbXNGbik7XG4gICAgICAgICAgICByZXR1cm4gZG9uZSA/IG1hdGNoaW5nIDogbWF0Y2hpbmcuY29uY2F0KG5vZGVBKTtcbiAgICAgICAgfSwgW10pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHR3byBwYXRocyBhcmUgaWRlbnRpY2FsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhBXG4gICAgICogQHBhcmFtIHBhdGhCXG4gICAgICogQHBhcmFtIHBhcmFtc0ZuIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgcGFyYW1ldGVycyB0byBjb25zaWRlciB3aGVuIGNvbXBhcmluZ1xuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHRoZSBzdGF0ZXMgYW5kIHBhcmFtZXRlciB2YWx1ZXMgZm9yIGJvdGggcGF0aHMgYXJlIGlkZW50aWNhbFxuICAgICAqL1xuICAgIFBhdGhVdGlscy5lcXVhbHMgPSBmdW5jdGlvbiAocGF0aEEsIHBhdGhCLCBwYXJhbXNGbikge1xuICAgICAgICByZXR1cm4gcGF0aEEubGVuZ3RoID09PSBwYXRoQi5sZW5ndGggJiYgUGF0aFV0aWxzLm1hdGNoaW5nKHBhdGhBLCBwYXRoQiwgcGFyYW1zRm4pLmxlbmd0aCA9PT0gcGF0aEEubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgc3VicGF0aCBvZiBhIHBhdGgsIHdoaWNoIHN0b3BzIGF0IHRoZSBmaXJzdCBtYXRjaGluZyBub2RlXG4gICAgICpcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBub2RlcywgcmV0dXJucyBhIHN1YnNldCBvZiB0aGUgYXJyYXkgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3Qgbm9kZSxcbiAgICAgKiBzdG9wcGluZyB3aGVuIHRoZSBmaXJzdCBub2RlIG1hdGNoZXMgdGhlIHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIGEgcGF0aCBvZiBbW1BhdGhOb2RlXV1zXG4gICAgICogQHBhcmFtIHByZWRpY2F0ZSBhIFtbUHJlZGljYXRlXV0gZm4gdGhhdCBtYXRjaGVzIFtbUGF0aE5vZGVdXXNcbiAgICAgKiBAcmV0dXJucyBhIHN1YnBhdGggdXAgdG8gdGhlIG1hdGNoaW5nIG5vZGUsIG9yIHVuZGVmaW5lZCBpZiBubyBtYXRjaCBpcyBmb3VuZFxuICAgICAqL1xuICAgIFBhdGhVdGlscy5zdWJQYXRoID0gZnVuY3Rpb24gKHBhdGgsIHByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgbm9kZSA9IGZpbmQocGF0aCwgcHJlZGljYXRlKTtcbiAgICAgICAgdmFyIGVsZW1lbnRJZHggPSBwYXRoLmluZGV4T2Yobm9kZSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50SWR4ID09PSAtMSA/IHVuZGVmaW5lZCA6IHBhdGguc2xpY2UoMCwgZWxlbWVudElkeCArIDEpO1xuICAgIH07XG4gICAgUGF0aFV0aWxzLm5vbkR5bmFtaWNQYXJhbXMgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5zdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogZmFsc2UgfSkuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gIXBhcmFtLmR5bmFtaWM7IH0pO1xuICAgIH07XG4gICAgLyoqIEdldHMgdGhlIHJhdyBwYXJhbWV0ZXIgdmFsdWVzIGZyb20gYSBwYXRoICovXG4gICAgUGF0aFV0aWxzLnBhcmFtVmFsdWVzID0gZnVuY3Rpb24gKHBhdGgpIHsgcmV0dXJuIHBhdGgucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5vZGUpIHsgcmV0dXJuIGV4dGVuZChhY2MsIG5vZGUucGFyYW1WYWx1ZXMpOyB9LCB7fSk7IH07XG4gICAgcmV0dXJuIFBhdGhVdGlscztcbn0oKSk7XG5leHBvcnQgeyBQYXRoVXRpbHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhdGhVdGlscy5qcy5tYXAiLCIvKiogQGludGVybmFsYXBpICovXG5leHBvcnQgdmFyIHJlc29sdmVQb2xpY2llcyA9IHtcbiAgICB3aGVuOiB7XG4gICAgICAgIExBWlk6ICdMQVpZJyxcbiAgICAgICAgRUFHRVI6ICdFQUdFUicsXG4gICAgfSxcbiAgICBhc3luYzoge1xuICAgICAgICBXQUlUOiAnV0FJVCcsXG4gICAgICAgIE5PV0FJVDogJ05PV0FJVCcsXG4gICAgICAgIFJYV0FJVDogJ1JYV0FJVCcsXG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmZhY2UuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSByZXNvbHZlXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBleHRlbmQsIGlkZW50aXR5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgdHJhY2UgfSBmcm9tICcuLi9jb21tb24vdHJhY2UnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiwgaXNPYmplY3QgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBpc051bGxPclVuZGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbi8vIFRPRE86IGV4cGxpY2l0bHkgbWFrZSB0aGlzIHVzZXIgY29uZmlndXJhYmxlXG5leHBvcnQgdmFyIGRlZmF1bHRSZXNvbHZlUG9saWN5ID0ge1xuICAgIHdoZW46ICdMQVpZJyxcbiAgICBhc3luYzogJ1dBSVQnLFxufTtcbi8qKlxuICogVGhlIGJhc2ljIGJ1aWxkaW5nIGJsb2NrIGZvciB0aGUgcmVzb2x2ZSBzeXN0ZW0uXG4gKlxuICogUmVzb2x2YWJsZXMgZW5jYXBzdWxhdGUgYSBzdGF0ZSdzIHJlc29sdmUncyByZXNvbHZlRm4sIHRoZSByZXNvbHZlRm4ncyBkZWNsYXJlZCBkZXBlbmRlbmNpZXMsIHRoZSB3cmFwcGVkICgucHJvbWlzZSksXG4gKiBhbmQgdGhlIHVud3JhcHBlZC13aGVuLWNvbXBsZXRlICguZGF0YSkgcmVzdWx0IG9mIHRoZSByZXNvbHZlRm4uXG4gKlxuICogUmVzb2x2YWJsZS5nZXQoKSBlaXRoZXIgcmV0cmlldmVzIHRoZSBSZXNvbHZhYmxlJ3MgZXhpc3RpbmcgcHJvbWlzZSwgb3IgZWxzZSBpbnZva2VzIHJlc29sdmUoKSAod2hpY2ggaW52b2tlcyB0aGVcbiAqIHJlc29sdmVGbikgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBwcm9taXNlLlxuICpcbiAqIFJlc29sdmFibGUuZ2V0KCkgYW5kIFJlc29sdmFibGUucmVzb2x2ZSgpIGJvdGggZXhlY3V0ZSB3aXRoaW4gYSBjb250ZXh0IHBhdGgsIHdoaWNoIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3RcbiAqIHBhcmFtZXRlciB0byB0aG9zZSBmbnMuXG4gKi9cbnZhciBSZXNvbHZhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc29sdmFibGUoYXJnMSwgcmVzb2x2ZUZuLCBkZXBzLCBwb2xpY3ksIGRhdGEpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChhcmcxIGluc3RhbmNlb2YgUmVzb2x2YWJsZSkge1xuICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGFyZzEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24ocmVzb2x2ZUZuKSkge1xuICAgICAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGFyZzEpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbmV3IFJlc29sdmFibGUoKTogdG9rZW4gYXJndW1lbnQgaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgICAgIGlmICghaXNGdW5jdGlvbihyZXNvbHZlRm4pKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbmV3IFJlc29sdmFibGUoKTogcmVzb2x2ZUZuIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICAgICAgdGhpcy50b2tlbiA9IGFyZzE7XG4gICAgICAgICAgICB0aGlzLnBvbGljeSA9IHBvbGljeTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZUZuID0gcmVzb2x2ZUZuO1xuICAgICAgICAgICAgdGhpcy5kZXBzID0gZGVwcyB8fCBbXTtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gZGF0YSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5yZXNvbHZlZCA/IHNlcnZpY2VzLiRxLndoZW4odGhpcy5kYXRhKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc09iamVjdChhcmcxKSAmJiBhcmcxLnRva2VuICYmIChhcmcxLmhhc093blByb3BlcnR5KCdyZXNvbHZlRm4nKSB8fCBhcmcxLmhhc093blByb3BlcnR5KCdkYXRhJykpKSB7XG4gICAgICAgICAgICB2YXIgbGl0ZXJhbCA9IGFyZzE7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUobGl0ZXJhbC50b2tlbiwgbGl0ZXJhbC5yZXNvbHZlRm4sIGxpdGVyYWwuZGVwcywgbGl0ZXJhbC5wb2xpY3ksIGxpdGVyYWwuZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUuZ2V0UG9saWN5ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciB0aGlzUG9saWN5ID0gdGhpcy5wb2xpY3kgfHwge307XG4gICAgICAgIHZhciBzdGF0ZVBvbGljeSA9IChzdGF0ZSAmJiBzdGF0ZS5yZXNvbHZlUG9saWN5KSB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdoZW46IHRoaXNQb2xpY3kud2hlbiB8fCBzdGF0ZVBvbGljeS53aGVuIHx8IGRlZmF1bHRSZXNvbHZlUG9saWN5LndoZW4sXG4gICAgICAgICAgICBhc3luYzogdGhpc1BvbGljeS5hc3luYyB8fCBzdGF0ZVBvbGljeS5hc3luYyB8fCBkZWZhdWx0UmVzb2x2ZVBvbGljeS5hc3luYyxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91c2x5IHJlc29sdmUgdGhpcyBSZXNvbHZhYmxlJ3MgZGF0YVxuICAgICAqXG4gICAgICogR2l2ZW4gYSBSZXNvbHZlQ29udGV4dCB0aGF0IHRoaXMgUmVzb2x2YWJsZSBpcyBmb3VuZCBpbjpcbiAgICAgKiBXYWl0IGZvciB0aGlzIFJlc29sdmFibGUncyBkZXBlbmRlbmNpZXMsIHRoZW4gaW52b2tlIHRoaXMgUmVzb2x2YWJsZSdzIGZ1bmN0aW9uXG4gICAgICogYW5kIHVwZGF0ZSB0aGUgUmVzb2x2YWJsZSdzIHN0YXRlXG4gICAgICovXG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uIChyZXNvbHZlQ29udGV4dCwgdHJhbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyICRxID0gc2VydmljZXMuJHE7XG4gICAgICAgIC8vIEdldHMgYWxsIGRlcGVuZGVuY2llcyBmcm9tIFJlc29sdmVDb250ZXh0IGFuZCB3YWl0IGZvciB0aGVtIHRvIGJlIHJlc29sdmVkXG4gICAgICAgIHZhciBnZXRSZXNvbHZhYmxlRGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLmFsbChyZXNvbHZlQ29udGV4dC5nZXREZXBlbmRlbmNpZXMoX3RoaXMpLm1hcChmdW5jdGlvbiAocmVzb2x2YWJsZSkgeyByZXR1cm4gcmVzb2x2YWJsZS5nZXQocmVzb2x2ZUNvbnRleHQsIHRyYW5zKTsgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBJbnZva2VzIHRoZSByZXNvbHZlIGZ1bmN0aW9uIHBhc3NpbmcgdGhlIHJlc29sdmVkIGRlcGVuZGVuY2llcyBhcyBhcmd1bWVudHNcbiAgICAgICAgdmFyIGludm9rZVJlc29sdmVGbiA9IGZ1bmN0aW9uIChyZXNvbHZlZERlcHMpIHsgcmV0dXJuIF90aGlzLnJlc29sdmVGbi5hcHBseShudWxsLCByZXNvbHZlZERlcHMpOyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9yIFJYV0FJVCBwb2xpY3k6XG4gICAgICAgICAqXG4gICAgICAgICAqIEdpdmVuIGFuIG9ic2VydmFibGUgcmV0dXJuZWQgZnJvbSBhIHJlc29sdmUgZnVuY3Rpb246XG4gICAgICAgICAqIC0gZW5hYmxlcyAuY2FjaGUoKSBtb2RlICh0aGlzIGFsbG93cyBtdWx0aWNhc3Qgc3Vic2NyaWJlcnMpXG4gICAgICAgICAqIC0gdGhlbiBjYWxscyB0b1Byb21pc2UoKSAodGhpcyB0cmlnZ2VycyBzdWJzY3JpYmUoKSBhbmQgdGh1cyBmZXRjaGVzKVxuICAgICAgICAgKiAtIFdhaXRzIGZvciB0aGUgcHJvbWlzZSwgdGhlbiByZXR1cm4gdGhlIGNhY2hlZCBvYnNlcnZhYmxlIChub3QgdGhlIGZpcnN0IGVtaXR0ZWQgdmFsdWUpLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHdhaXRGb3JSeCA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlJCkge1xuICAgICAgICAgICAgdmFyIGNhY2hlZCA9IG9ic2VydmFibGUkLmNhY2hlKDEpO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFxuICAgICAgICAgICAgICAgIC50YWtlKDEpXG4gICAgICAgICAgICAgICAgLnRvUHJvbWlzZSgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY2FjaGVkOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gSWYgdGhlIHJlc29sdmUgcG9saWN5IGlzIFJYV0FJVCwgd2FpdCBmb3IgdGhlIG9ic2VydmFibGUgdG8gZW1pdCBzb21ldGhpbmcuIG90aGVyd2lzZSBwYXNzIHRocm91Z2guXG4gICAgICAgIHZhciBub2RlID0gcmVzb2x2ZUNvbnRleHQuZmluZE5vZGUodGhpcyk7XG4gICAgICAgIHZhciBzdGF0ZSA9IG5vZGUgJiYgbm9kZS5zdGF0ZTtcbiAgICAgICAgdmFyIG1heWJlV2FpdEZvclJ4ID0gdGhpcy5nZXRQb2xpY3koc3RhdGUpLmFzeW5jID09PSAnUlhXQUlUJyA/IHdhaXRGb3JSeCA6IGlkZW50aXR5O1xuICAgICAgICAvLyBBZnRlciB0aGUgZmluYWwgdmFsdWUgaGFzIGJlZW4gcmVzb2x2ZWQsIHVwZGF0ZSB0aGUgc3RhdGUgb2YgdGhlIFJlc29sdmFibGVcbiAgICAgICAgdmFyIGFwcGx5UmVzb2x2ZWRWYWx1ZSA9IGZ1bmN0aW9uIChyZXNvbHZlZFZhbHVlKSB7XG4gICAgICAgICAgICBfdGhpcy5kYXRhID0gcmVzb2x2ZWRWYWx1ZTtcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmVGbiA9IG51bGw7XG4gICAgICAgICAgICB0cmFjZS50cmFjZVJlc29sdmFibGVSZXNvbHZlZChfdGhpcywgdHJhbnMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFNldHMgdGhlIHByb21pc2UgcHJvcGVydHkgZmlyc3QsIHRoZW4gZ2V0c1Jlc29sdmFibGVEZXBlbmRlbmNpZXMgaW4gdGhlIGNvbnRleHQgb2YgdGhlIHByb21pc2UgY2hhaW4uIEFsd2F5cyB3YWl0cyBvbmUgdGljay5cbiAgICAgICAgcmV0dXJuICh0aGlzLnByb21pc2UgPSAkcVxuICAgICAgICAgICAgLndoZW4oKVxuICAgICAgICAgICAgLnRoZW4oZ2V0UmVzb2x2YWJsZURlcGVuZGVuY2llcylcbiAgICAgICAgICAgIC50aGVuKGludm9rZVJlc29sdmVGbilcbiAgICAgICAgICAgIC50aGVuKG1heWJlV2FpdEZvclJ4KVxuICAgICAgICAgICAgLnRoZW4oYXBwbHlSZXNvbHZlZFZhbHVlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIGEgcHJvbWlzZSBmb3IgdGhpcyBSZXNvbHZhYmxlJ3MgZGF0YS5cbiAgICAgKlxuICAgICAqIEZldGNoZXMgdGhlIGRhdGEgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICAgICAqIFJldHVybnMgdGhlIGV4aXN0aW5nIHByb21pc2UgaWYgaXQgaGFzIGFscmVhZHkgYmVlbiBmZXRjaGVkIG9uY2UuXG4gICAgICovXG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHJlc29sdmVDb250ZXh0LCB0cmFucykge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlIHx8IHRoaXMucmVzb2x2ZShyZXNvbHZlQ29udGV4dCwgdHJhbnMpO1xuICAgIH07XG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlJlc29sdmFibGUodG9rZW46IFwiICsgc3RyaW5naWZ5KHRoaXMudG9rZW4pICsgXCIsIHJlcXVpcmVzOiBbXCIgKyB0aGlzLmRlcHMubWFwKHN0cmluZ2lmeSkgKyBcIl0pXCI7XG4gICAgfTtcbiAgICBSZXNvbHZhYmxlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHRoaXMpO1xuICAgIH07XG4gICAgUmVzb2x2YWJsZS5mcm9tRGF0YSA9IGZ1bmN0aW9uICh0b2tlbiwgZGF0YSkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRhdGE7IH0sIG51bGwsIG51bGwsIGRhdGEpOyB9O1xuICAgIHJldHVybiBSZXNvbHZhYmxlO1xufSgpKTtcbmV4cG9ydCB7IFJlc29sdmFibGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc29sdmFibGUuanMubWFwIiwiLyoqIEBtb2R1bGUgcmVzb2x2ZSAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBmaW5kLCB0YWlsLCB1bmlxUiwgdW5uZXN0UiwgaW5BcnJheSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcEVxLCBub3QgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyByZXNvbHZlUG9saWNpZXMgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi9yZXNvbHZhYmxlJztcbmltcG9ydCB7IFBhdGhVdGlscyB9IGZyb20gJy4uL3BhdGgvcGF0aFV0aWxzJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uJztcbnZhciB3aGVucyA9IHJlc29sdmVQb2xpY2llcy53aGVuO1xudmFyIEFMTF9XSEVOUyA9IFt3aGVucy5FQUdFUiwgd2hlbnMuTEFaWV07XG52YXIgRUFHRVJfV0hFTlMgPSBbd2hlbnMuRUFHRVJdO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWluZmVycmFibGUtdHlwZXNcbmV4cG9ydCB2YXIgTkFUSVZFX0lOSkVDVE9SX1RPS0VOID0gJ05hdGl2ZSBJbmplY3Rvcic7XG4vKipcbiAqIEVuY2Fwc3VsYXRlcyBEZXBlbmRlbmN5IEluamVjdGlvbiBmb3IgYSBwYXRoIG9mIG5vZGVzXG4gKlxuICogVUktUm91dGVyIHN0YXRlcyBhcmUgb3JnYW5pemVkIGFzIGEgdHJlZS5cbiAqIEEgbmVzdGVkIHN0YXRlIGhhcyBhIHBhdGggb2YgYW5jZXN0b3JzIHRvIHRoZSByb290IG9mIHRoZSB0cmVlLlxuICogV2hlbiBhIHN0YXRlIGlzIGJlaW5nIGFjdGl2YXRlZCwgZWFjaCBlbGVtZW50IGluIHRoZSBwYXRoIGlzIHdyYXBwZWQgYXMgYSBbW1BhdGhOb2RlXV0uXG4gKiBBIGBQYXRoTm9kZWAgaXMgYSBzdGF0ZWZ1bCBvYmplY3QgdGhhdCBob2xkcyB0aGluZ3MgbGlrZSBwYXJhbWV0ZXJzIGFuZCByZXNvbHZhYmxlcyBmb3IgdGhlIHN0YXRlIGJlaW5nIGFjdGl2YXRlZC5cbiAqXG4gKiBUaGUgUmVzb2x2ZUNvbnRleHQgY2xvc2VzIG92ZXIgdGhlIFtbUGF0aE5vZGVdXXMsIGFuZCBwcm92aWRlcyBESSBmb3IgdGhlIGxhc3Qgbm9kZSBpbiB0aGUgcGF0aC5cbiAqL1xudmFyIFJlc29sdmVDb250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc29sdmVDb250ZXh0KF9wYXRoKSB7XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICB9XG4gICAgLyoqIEdldHMgYWxsIHRoZSB0b2tlbnMgZm91bmQgaW4gdGhlIHJlc29sdmUgY29udGV4dCwgZGUtZHVwbGljYXRlZCAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5nZXRUb2tlbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXRoLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBub2RlKSB7IHJldHVybiBhY2MuY29uY2F0KG5vZGUucmVzb2x2YWJsZXMubWFwKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnRva2VuOyB9KSk7IH0sIFtdKS5yZWR1Y2UodW5pcVIsIFtdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFJlc29sdmFibGUgdGhhdCBtYXRjaGVzIHRoZSB0b2tlblxuICAgICAqXG4gICAgICogR2V0cyB0aGUgbGFzdCBSZXNvbHZhYmxlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW4gaW4gdGhpcyBjb250ZXh0LCBvciB1bmRlZmluZWQuXG4gICAgICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIFJlc29sdmVDb250ZXh0XG4gICAgICovXG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmdldFJlc29sdmFibGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIG1hdGNoaW5nID0gdGhpcy5fcGF0aFxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5yZXNvbHZhYmxlczsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnRva2VuID09PSB0b2tlbjsgfSk7XG4gICAgICAgIHJldHVybiB0YWlsKG1hdGNoaW5nKTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIHRoZSBbW1Jlc29sdmVQb2xpY3ldXSBmb3IgdGhlIGdpdmVuIFtbUmVzb2x2YWJsZV1dICovXG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmdldFBvbGljeSA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5maW5kTm9kZShyZXNvbHZhYmxlKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0UG9saWN5KG5vZGUuc3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFJlc29sdmVDb250ZXh0IHRoYXQgaW5jbHVkZXMgYSBwb3J0aW9uIG9mIHRoaXMgb25lXG4gICAgICpcbiAgICAgKiBHaXZlbiBhIHN0YXRlLCB0aGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IFJlc29sdmVDb250ZXh0IGZyb20gdGhpcyBvbmUuXG4gICAgICogVGhlIG5ldyBjb250ZXh0IHN0YXJ0cyBhdCB0aGUgZmlyc3Qgbm9kZSAocm9vdCkgYW5kIHN0b3BzIGF0IHRoZSBub2RlIGZvciB0aGUgYHN0YXRlYCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiAjIyMjIFdoeVxuICAgICAqXG4gICAgICogV2hlbiBhIHRyYW5zaXRpb24gaXMgY3JlYXRlZCwgdGhlIG5vZGVzIGluIHRoZSBcIlRvIFBhdGhcIiBhcmUgaW5qZWN0ZWQgZnJvbSBhIFJlc29sdmVDb250ZXh0LlxuICAgICAqIEEgUmVzb2x2ZUNvbnRleHQgY2xvc2VzIG92ZXIgYSBwYXRoIG9mIFtbUGF0aE5vZGVdXXMgYW5kIHByb2Nlc3NlcyB0aGUgcmVzb2x2YWJsZXMuXG4gICAgICogVGhlIFwiVG8gU3RhdGVcIiBjYW4gaW5qZWN0IHZhbHVlcyBmcm9tIGl0cyBvd24gcmVzb2x2YWJsZXMsIGFzIHdlbGwgYXMgdGhvc2UgZnJvbSBhbGwgaXRzIGFuY2VzdG9yIHN0YXRlJ3MgKG5vZGUncykuXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBuYXJyb3dlciBjb250ZXh0IHdoZW4gaW5qZWN0aW5nIGFuY2VzdG9yIG5vZGVzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgbGV0IEFCQ0QgPSBuZXcgUmVzb2x2ZUNvbnRleHQoW0EsIEIsIEMsIERdKTtgXG4gICAgICpcbiAgICAgKiBHaXZlbiBhIHBhdGggYFtBLCBCLCBDLCBEXWAsIHdoZXJlIGBBYCwgYEJgLCBgQ2AgYW5kIGBEYCBhcmUgbm9kZXMgZm9yIHN0YXRlcyBgYWAsIGBiYCwgYGNgLCBgZGA6XG4gICAgICogV2hlbiBpbmplY3RpbmcgYERgLCBgRGAgc2hvdWxkIGhhdmUgYWNjZXNzIHRvIGFsbCByZXNvbHZhYmxlcyBmcm9tIGBBYCwgYEJgLCBgQ2AsIGBEYC5cbiAgICAgKiBIb3dldmVyLCBgQmAgc2hvdWxkIG9ubHkgYmUgYWJsZSB0byBhY2Nlc3MgcmVzb2x2YWJsZXMgZnJvbSBgQWAsIGBCYC5cbiAgICAgKlxuICAgICAqIFdoZW4gcmVzb2x2aW5nIGZvciB0aGUgYEJgIG5vZGUsIGZpcnN0IHRha2UgdGhlIGZ1bGwgXCJUbyBQYXRoXCIgQ29udGV4dCBgW0EsQixDLERdYCBhbmQgbGltaXQgdG8gdGhlIHN1YnBhdGggYFtBLEJdYC5cbiAgICAgKiBgbGV0IEFCID0gQUJDRC5zdWJjb250ZXh0KGEpYFxuICAgICAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5zdWJDb250ZXh0ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQoUGF0aFV0aWxzLnN1YlBhdGgodGhpcy5fcGF0aCwgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuc3RhdGUgPT09IHN0YXRlOyB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIFJlc29sdmFibGVzIHRvIHRoZSBub2RlIHRoYXQgbWF0Y2hlcyB0aGUgc3RhdGVcbiAgICAgKlxuICAgICAqIFRoaXMgYWRkcyBhIFtbUmVzb2x2YWJsZV1dIChnZW5lcmFsbHkgb25lIGNyZWF0ZWQgb24gdGhlIGZseTsgbm90IGRlY2xhcmVkIG9uIGEgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSBibG9jaykuXG4gICAgICogVGhlIHJlc29sdmFibGUgaXMgYWRkZWQgdG8gdGhlIG5vZGUgbWF0Y2hpbmcgdGhlIGBzdGF0ZWAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogVGhlc2UgbmV3IHJlc29sdmFibGVzIGFyZSBub3QgYXV0b21hdGljYWxseSBmZXRjaGVkLlxuICAgICAqIFRoZSBjYWxsaW5nIGNvZGUgc2hvdWxkIGVpdGhlciBmZXRjaCB0aGVtLCBmZXRjaCBzb21ldGhpbmcgdGhhdCBkZXBlbmRzIG9uIHRoZW0sXG4gICAgICogb3IgcmVseSBvbiBbW3Jlc29sdmVQYXRoXV0gYmVpbmcgY2FsbGVkIHdoZW4gc29tZSBzdGF0ZSBpcyBiZWluZyBlbnRlcmVkLlxuICAgICAqXG4gICAgICogTm90ZTogZWFjaCByZXNvbHZhYmxlJ3MgW1tSZXNvbHZlUG9saWN5XV0gaXMgbWVyZ2VkIHdpdGggdGhlIHN0YXRlJ3MgcG9saWN5LCBhbmQgdGhlIGdsb2JhbCBkZWZhdWx0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ld1Jlc29sdmFibGVzIHRoZSBuZXcgUmVzb2x2YWJsZXNcbiAgICAgKiBAcGFyYW0gc3RhdGUgVXNlZCB0byBmaW5kIHRoZSBub2RlIHRvIHB1dCB0aGUgcmVzb2x2YWJsZSBvblxuICAgICAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5hZGRSZXNvbHZhYmxlcyA9IGZ1bmN0aW9uIChuZXdSZXNvbHZhYmxlcywgc3RhdGUpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBmaW5kKHRoaXMuX3BhdGgsIHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgICAgICB2YXIga2V5cyA9IG5ld1Jlc29sdmFibGVzLm1hcChmdW5jdGlvbiAocikgeyByZXR1cm4gci50b2tlbjsgfSk7XG4gICAgICAgIG5vZGUucmVzb2x2YWJsZXMgPSBub2RlLnJlc29sdmFibGVzLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4ga2V5cy5pbmRleE9mKHIudG9rZW4pID09PSAtMTsgfSkuY29uY2F0KG5ld1Jlc29sdmFibGVzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiByZXNvbHZlZCBwYXRoIEVsZW1lbnQgcHJvbWlzZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB3aGVuXG4gICAgICogQHBhcmFtIHRyYW5zXG4gICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pnxhbnl9XG4gICAgICovXG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLnJlc29sdmVQYXRoID0gZnVuY3Rpb24gKHdoZW4sIHRyYW5zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh3aGVuID09PSB2b2lkIDApIHsgd2hlbiA9ICdMQVpZJzsgfVxuICAgICAgICAvLyBUaGlzIG9wdGlvbiBkZXRlcm1pbmVzIHdoaWNoICd3aGVuJyBwb2xpY3kgUmVzb2x2YWJsZXMgd2UgYXJlIGFib3V0IHRvIGZldGNoLlxuICAgICAgICB2YXIgd2hlbk9wdGlvbiA9IGluQXJyYXkoQUxMX1dIRU5TLCB3aGVuKSA/IHdoZW4gOiAnTEFaWSc7XG4gICAgICAgIC8vIElmIHRoZSBjYWxsZXIgc3BlY2lmaWVkIEVBR0VSLCBvbmx5IHRoZSBFQUdFUiBSZXNvbHZhYmxlcyBhcmUgZmV0Y2hlZC5cbiAgICAgICAgLy8gaWYgdGhlIGNhbGxlciBzcGVjaWZpZWQgTEFaWSwgYm90aCBFQUdFUiBhbmQgTEFaWSBSZXNvbHZhYmxlcyBhcmUgZmV0Y2hlZC5gXG4gICAgICAgIHZhciBtYXRjaGVkV2hlbnMgPSB3aGVuT3B0aW9uID09PSByZXNvbHZlUG9saWNpZXMud2hlbi5FQUdFUiA/IEVBR0VSX1dIRU5TIDogQUxMX1dIRU5TO1xuICAgICAgICAvLyBnZXQgdGhlIHN1YnBhdGggdG8gdGhlIHN0YXRlIGFyZ3VtZW50LCBpZiBwcm92aWRlZFxuICAgICAgICB0cmFjZS50cmFjZVJlc29sdmVQYXRoKHRoaXMuX3BhdGgsIHdoZW4sIHRyYW5zKTtcbiAgICAgICAgdmFyIG1hdGNoZXNQb2xpY3kgPSBmdW5jdGlvbiAoYWNjZXB0ZWRWYWxzLCB3aGVuT3JBc3luYykgeyByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbkFycmF5KGFjY2VwdGVkVmFscywgX3RoaXMuZ2V0UG9saWN5KHJlc29sdmFibGUpW3doZW5PckFzeW5jXSk7XG4gICAgICAgIH07IH07XG4gICAgICAgIC8vIFRyaWdnZXIgYWxsIHRoZSAobWF0Y2hpbmcpIFJlc29sdmFibGVzIGluIHRoZSBwYXRoXG4gICAgICAgIC8vIFJlZHVjZSBhbGwgdGhlIFwiV0FJVFwiIFJlc29sdmFibGVzIGludG8gYW4gYXJyYXlcbiAgICAgICAgdmFyIHByb21pc2VzID0gdGhpcy5fcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbm9kZSkge1xuICAgICAgICAgICAgdmFyIG5vZGVSZXNvbHZhYmxlcyA9IG5vZGUucmVzb2x2YWJsZXMuZmlsdGVyKG1hdGNoZXNQb2xpY3kobWF0Y2hlZFdoZW5zLCAnd2hlbicpKTtcbiAgICAgICAgICAgIHZhciBub3dhaXQgPSBub2RlUmVzb2x2YWJsZXMuZmlsdGVyKG1hdGNoZXNQb2xpY3koWydOT1dBSVQnXSwgJ2FzeW5jJykpO1xuICAgICAgICAgICAgdmFyIHdhaXQgPSBub2RlUmVzb2x2YWJsZXMuZmlsdGVyKG5vdChtYXRjaGVzUG9saWN5KFsnTk9XQUlUJ10sICdhc3luYycpKSk7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIG1hdGNoaW5nIFJlc29sdmFibGVzLCBzdGFydCB0aGVpciBhc3luYyBmZXRjaCBwcm9jZXNzLlxuICAgICAgICAgICAgdmFyIHN1YkNvbnRleHQgPSBfdGhpcy5zdWJDb250ZXh0KG5vZGUuc3RhdGUpO1xuICAgICAgICAgICAgdmFyIGdldFJlc3VsdCA9IGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJcbiAgICAgICAgICAgICAgICAgICAgLmdldChzdWJDb250ZXh0LCB0cmFucylcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIGEgdHVwbGUgdGhhdCBpbmNsdWRlcyB0aGUgUmVzb2x2YWJsZSdzIHRva2VuXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gKHsgdG9rZW46IHIudG9rZW4sIHZhbHVlOiB2YWx1ZSB9KTsgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbm93YWl0LmZvckVhY2goZ2V0UmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybiBhY2MuY29uY2F0KHdhaXQubWFwKGdldFJlc3VsdCkpO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIC8vIFdhaXQgZm9yIGFsbCB0aGUgXCJXQUlUXCIgcmVzb2x2YWJsZXNcbiAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLmFsbChwcm9taXNlcyk7XG4gICAgfTtcbiAgICBSZXNvbHZlQ29udGV4dC5wcm90b3R5cGUuaW5qZWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmplY3RvciB8fCAodGhpcy5faW5qZWN0b3IgPSBuZXcgVUlJbmplY3RvckltcGwodGhpcykpO1xuICAgIH07XG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmZpbmROb2RlID0gZnVuY3Rpb24gKHJlc29sdmFibGUpIHtcbiAgICAgICAgcmV0dXJuIGZpbmQodGhpcy5fcGF0aCwgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIGluQXJyYXkobm9kZS5yZXNvbHZhYmxlcywgcmVzb2x2YWJsZSk7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXN5bmMgZGVwZW5kZW5jaWVzIG9mIGEgUmVzb2x2YWJsZVxuICAgICAqXG4gICAgICogR2l2ZW4gYSBSZXNvbHZhYmxlLCByZXR1cm5zIGl0cyBkZXBlbmRlbmNpZXMgYXMgYSBSZXNvbHZhYmxlW11cbiAgICAgKi9cbiAgICBSZXNvbHZlQ29udGV4dC5wcm90b3R5cGUuZ2V0RGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKHJlc29sdmFibGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmZpbmROb2RlKHJlc29sdmFibGUpO1xuICAgICAgICAvLyBGaW5kIHdoaWNoIG90aGVyIHJlc29sdmFibGVzIGFyZSBcInZpc2libGVcIiB0byB0aGUgYHJlc29sdmFibGVgIGFyZ3VtZW50XG4gICAgICAgIC8vIHN1YnBhdGggc3RvcHBpbmcgYXQgcmVzb2x2YWJsZSdzIG5vZGUsIG9yIHRoZSB3aG9sZSBwYXRoIChpZiB0aGUgcmVzb2x2YWJsZSBpc24ndCBpbiB0aGUgcGF0aClcbiAgICAgICAgdmFyIHN1YlBhdGggPSBQYXRoVXRpbHMuc3ViUGF0aCh0aGlzLl9wYXRoLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA9PT0gbm9kZTsgfSkgfHwgdGhpcy5fcGF0aDtcbiAgICAgICAgdmFyIGF2YWlsYWJsZVJlc29sdmFibGVzID0gc3ViUGF0aFxuICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBfbm9kZSkgeyByZXR1cm4gYWNjLmNvbmNhdChfbm9kZS5yZXNvbHZhYmxlcyk7IH0sIFtdKSAvLyBhbGwgb2Ygc3VicGF0aCdzIHJlc29sdmFibGVzXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcyAhPT0gcmVzb2x2YWJsZTsgfSk7IC8vIGZpbHRlciBvdXQgdGhlIGByZXNvbHZhYmxlYCBhcmd1bWVudFxuICAgICAgICB2YXIgZ2V0RGVwZW5kZW5jeSA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIG1hdGNoaW5nID0gYXZhaWxhYmxlUmVzb2x2YWJsZXMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnRva2VuID09PSB0b2tlbjsgfSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hpbmcubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0YWlsKG1hdGNoaW5nKTtcbiAgICAgICAgICAgIHZhciBmcm9tSW5qZWN0b3IgPSBfdGhpcy5pbmplY3RvcigpLmdldE5hdGl2ZSh0b2tlbik7XG4gICAgICAgICAgICBpZiAoaXNVbmRlZmluZWQoZnJvbUluamVjdG9yKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgRGVwZW5kZW5jeSBJbmplY3Rpb24gdG9rZW46ICcgKyBzdHJpbmdpZnkodG9rZW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2YWJsZSh0b2tlbiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZnJvbUluamVjdG9yOyB9LCBbXSwgZnJvbUluamVjdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZGVwcy5tYXAoZ2V0RGVwZW5kZW5jeSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVzb2x2ZUNvbnRleHQ7XG59KCkpO1xuZXhwb3J0IHsgUmVzb2x2ZUNvbnRleHQgfTtcbnZhciBVSUluamVjdG9ySW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVSUluamVjdG9ySW1wbChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMubmF0aXZlID0gdGhpcy5nZXQoTkFUSVZFX0lOSkVDVE9SX1RPS0VOKSB8fCBzZXJ2aWNlcy4kaW5qZWN0b3I7XG4gICAgfVxuICAgIFVJSW5qZWN0b3JJbXBsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIHJlc29sdmFibGUgPSB0aGlzLmNvbnRleHQuZ2V0UmVzb2x2YWJsZSh0b2tlbik7XG4gICAgICAgIGlmIChyZXNvbHZhYmxlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZXh0LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYyA9PT0gJ05PV0FJVCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQodGhpcy5jb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzb2x2YWJsZS5yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzb2x2YWJsZSBhc3luYyAuZ2V0KCkgbm90IGNvbXBsZXRlOicgKyBzdHJpbmdpZnkocmVzb2x2YWJsZS50b2tlbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXROYXRpdmUodG9rZW4pO1xuICAgIH07XG4gICAgVUlJbmplY3RvckltcGwucHJvdG90eXBlLmdldEFzeW5jID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHZhciByZXNvbHZhYmxlID0gdGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodG9rZW4pO1xuICAgICAgICBpZiAocmVzb2x2YWJsZSlcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldCh0aGlzLmNvbnRleHQpO1xuICAgICAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbih0aGlzLm5hdGl2ZS5nZXQodG9rZW4pKTtcbiAgICB9O1xuICAgIFVJSW5qZWN0b3JJbXBsLnByb3RvdHlwZS5nZXROYXRpdmUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlICYmIHRoaXMubmF0aXZlLmdldCh0b2tlbik7XG4gICAgfTtcbiAgICByZXR1cm4gVUlJbmplY3RvckltcGw7XG59KCkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb2x2ZUNvbnRleHQuanMubWFwIiwiLyoqIEBtb2R1bGUgc3RhdGUgKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgYXBwbHlQYWlycywgZXh0ZW5kLCBpZGVudGl0eSwgaW5oZXJpdCwgbWFwT2JqLCBub29wLCBvbWl0LCB0YWlsLCB2YWx1ZXMgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzQXJyYXksIGlzRGVmaW5lZCwgaXNGdW5jdGlvbiwgaXNTdHJpbmcgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICcuLi9jb21tb24vc3RyaW5ncyc7XG5pbXBvcnQgeyBpcywgcGF0dGVybiwgcGlwZSwgcHJvcCwgdmFsIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG52YXIgcGFyc2VVcmwgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgaWYgKCFpc1N0cmluZyh1cmwpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHJvb3QgPSB1cmwuY2hhckF0KDApID09PSAnXic7XG4gICAgcmV0dXJuIHsgdmFsOiByb290ID8gdXJsLnN1YnN0cmluZygxKSA6IHVybCwgcm9vdDogcm9vdCB9O1xufTtcbmZ1bmN0aW9uIG5hbWVCdWlsZGVyKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLm5hbWU7XG59XG5mdW5jdGlvbiBzZWxmQnVpbGRlcihzdGF0ZSkge1xuICAgIHN0YXRlLnNlbGYuJCRzdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0YXRlOyB9O1xuICAgIHJldHVybiBzdGF0ZS5zZWxmO1xufVxuZnVuY3Rpb24gZGF0YUJ1aWxkZXIoc3RhdGUpIHtcbiAgICBpZiAoc3RhdGUucGFyZW50ICYmIHN0YXRlLnBhcmVudC5kYXRhKSB7XG4gICAgICAgIHN0YXRlLmRhdGEgPSBzdGF0ZS5zZWxmLmRhdGEgPSBpbmhlcml0KHN0YXRlLnBhcmVudC5kYXRhLCBzdGF0ZS5kYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlLmRhdGE7XG59XG52YXIgZ2V0VXJsQnVpbGRlciA9IGZ1bmN0aW9uICgkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciwgcm9vdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiB1cmxCdWlsZGVyKHN0YXRlT2JqZWN0KSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHN0YXRlT2JqZWN0LnNlbGY7XG4gICAgICAgIC8vIEZvciBmdXR1cmUgc3RhdGVzLCBpLmUuLCBzdGF0ZXMgd2hvc2UgbmFtZSBlbmRzIHdpdGggYC4qKmAsXG4gICAgICAgIC8vIG1hdGNoIGFueXRoaW5nIHRoYXQgc3RhcnRzIHdpdGggdGhlIHVybCBwcmVmaXhcbiAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLnVybCAmJiBzdGF0ZS5uYW1lICYmIHN0YXRlLm5hbWUubWF0Y2goL1xcLlxcKlxcKiQvKSkge1xuICAgICAgICAgICAgc3RhdGUudXJsICs9ICd7cmVtYWluZGVyOmFueX0nOyAvLyBtYXRjaCBhbnkgcGF0aCAoLiopXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmVudCA9IHN0YXRlT2JqZWN0LnBhcmVudDtcbiAgICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlVXJsKHN0YXRlLnVybCk7XG4gICAgICAgIHZhciB1cmwgPSAhcGFyc2VkID8gc3RhdGUudXJsIDogJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuY29tcGlsZShwYXJzZWQudmFsLCB7IHN0YXRlOiBzdGF0ZSB9KTtcbiAgICAgICAgaWYgKCF1cmwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCEkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5pc01hdGNoZXIodXJsKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdXJsICdcIiArIHVybCArIFwiJyBpbiBzdGF0ZSAnXCIgKyBzdGF0ZU9iamVjdCArIFwiJ1wiKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZCAmJiBwYXJzZWQucm9vdCA/IHVybCA6ICgocGFyZW50ICYmIHBhcmVudC5uYXZpZ2FibGUpIHx8IHJvb3QoKSkudXJsLmFwcGVuZCh1cmwpO1xuICAgIH07XG59O1xudmFyIGdldE5hdmlnYWJsZUJ1aWxkZXIgPSBmdW5jdGlvbiAoaXNSb290KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5hdmlnYWJsZUJ1aWxkZXIoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuICFpc1Jvb3Qoc3RhdGUpICYmIHN0YXRlLnVybCA/IHN0YXRlIDogc3RhdGUucGFyZW50ID8gc3RhdGUucGFyZW50Lm5hdmlnYWJsZSA6IG51bGw7XG4gICAgfTtcbn07XG52YXIgZ2V0UGFyYW1zQnVpbGRlciA9IGZ1bmN0aW9uIChwYXJhbUZhY3RvcnkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcGFyYW1zQnVpbGRlcihzdGF0ZSkge1xuICAgICAgICB2YXIgbWFrZUNvbmZpZ1BhcmFtID0gZnVuY3Rpb24gKGNvbmZpZywgaWQpIHsgcmV0dXJuIHBhcmFtRmFjdG9yeS5mcm9tQ29uZmlnKGlkLCBudWxsLCBzdGF0ZS5zZWxmKTsgfTtcbiAgICAgICAgdmFyIHVybFBhcmFtcyA9IChzdGF0ZS51cmwgJiYgc3RhdGUudXJsLnBhcmFtZXRlcnMoeyBpbmhlcml0OiBmYWxzZSB9KSkgfHwgW107XG4gICAgICAgIHZhciBub25VcmxQYXJhbXMgPSB2YWx1ZXMobWFwT2JqKG9taXQoc3RhdGUucGFyYW1zIHx8IHt9LCB1cmxQYXJhbXMubWFwKHByb3AoJ2lkJykpKSwgbWFrZUNvbmZpZ1BhcmFtKSk7XG4gICAgICAgIHJldHVybiB1cmxQYXJhbXNcbiAgICAgICAgICAgIC5jb25jYXQobm9uVXJsUGFyYW1zKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocCkgeyByZXR1cm4gW3AuaWQsIHBdOyB9KVxuICAgICAgICAgICAgLnJlZHVjZShhcHBseVBhaXJzLCB7fSk7XG4gICAgfTtcbn07XG5mdW5jdGlvbiBwYXRoQnVpbGRlcihzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5wYXJlbnQgPyBzdGF0ZS5wYXJlbnQucGF0aC5jb25jYXQoc3RhdGUpIDogLypyb290Ki8gW3N0YXRlXTtcbn1cbmZ1bmN0aW9uIGluY2x1ZGVzQnVpbGRlcihzdGF0ZSkge1xuICAgIHZhciBpbmNsdWRlcyA9IHN0YXRlLnBhcmVudCA/IGV4dGVuZCh7fSwgc3RhdGUucGFyZW50LmluY2x1ZGVzKSA6IHt9O1xuICAgIGluY2x1ZGVzW3N0YXRlLm5hbWVdID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5jbHVkZXM7XG59XG4vKipcbiAqIFRoaXMgaXMgYSBbW1N0YXRlQnVpbGRlci5idWlsZGVyXV0gZnVuY3Rpb24gZm9yIHRoZSBgcmVzb2x2ZTpgIGJsb2NrIG9uIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0uXG4gKlxuICogV2hlbiB0aGUgW1tTdGF0ZUJ1aWxkZXJdXSBidWlsZHMgYSBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0IGZyb20gYSByYXcgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoaXMgYnVpbGRlclxuICogdmFsaWRhdGVzIHRoZSBgcmVzb2x2ZWAgcHJvcGVydHkgYW5kIGNvbnZlcnRzIGl0IHRvIGEgW1tSZXNvbHZhYmxlXV0gYXJyYXkuXG4gKlxuICogcmVzb2x2ZTogaW5wdXQgdmFsdWUgY2FuIGJlOlxuICpcbiAqIHtcbiAqICAgLy8gYW5hbHl6ZWQgYnV0IG5vdCBpbmplY3RlZFxuICogICBteUZvb1Jlc29sdmU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gXCJteUZvb0RhdGFcIjsgfSxcbiAqXG4gKiAgIC8vIGZ1bmN0aW9uLnRvU3RyaW5nKCkgcGFyc2VkLCBcIkRlcGVuZGVuY3lOYW1lXCIgZGVwIGFzIHN0cmluZyAobm90IG1pbi1zYWZlKVxuICogICBteUJhclJlc29sdmU6IGZ1bmN0aW9uKERlcGVuZGVuY3lOYW1lKSB7IHJldHVybiBEZXBlbmRlbmN5TmFtZS5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sXG4gKlxuICogICAvLyBBcnJheSBzcGxpdDsgXCJEZXBlbmRlbmN5TmFtZVwiIGRlcCBhcyBzdHJpbmdcbiAqICAgbXlCYXpSZXNvbHZlOiBbIFwiRGVwZW5kZW5jeU5hbWVcIiwgZnVuY3Rpb24oZGVwKSB7IHJldHVybiBkZXAuZmV0Y2hTb21ldGhpbmdBc1Byb21pc2UoKSB9LFxuICpcbiAqICAgLy8gQXJyYXkgc3BsaXQ7IERlcGVuZGVuY3lUeXBlIGRlcCBhcyB0b2tlbiAoY29tcGFyZWQgdXNpbmcgPT09KVxuICogICBteVF1eFJlc29sdmU6IFsgRGVwZW5kZW5jeVR5cGUsIGZ1bmN0aW9uKGRlcCkgeyByZXR1cm4gZGVwLmZldGNoU29tZXRpbmdBc1Byb21pc2UoKSB9LFxuICpcbiAqICAgLy8gdmFsLiRpbmplY3QgdXNlZCBhcyBkZXBzXG4gKiAgIC8vIHdoZXJlOlxuICogICAvLyAgICAgY29yZ2VSZXNvbHZlLiRpbmplY3QgPSBbXCJEZXBlbmRlbmN5TmFtZVwiXTtcbiAqICAgLy8gICAgIGZ1bmN0aW9uIGNvcmdlUmVzb2x2ZShkZXApIHsgZGVwLmZldGNoU29tZXRpbmdBc1Byb21pc2UoKSB9XG4gKiAgIC8vIHRoZW4gXCJEZXBlbmRlbmN5TmFtZVwiIGRlcCBhcyBzdHJpbmdcbiAqICAgbXlDb3JnZVJlc29sdmU6IGNvcmdlUmVzb2x2ZSxcbiAqXG4gKiAgLy8gaW5qZWN0IHNlcnZpY2UgYnkgbmFtZVxuICogIC8vIFdoZW4gYSBzdHJpbmcgaXMgZm91bmQsIGRlc3VnYXIgY3JlYXRpbmcgYSByZXNvbHZlIHRoYXQgaW5qZWN0cyB0aGUgbmFtZWQgc2VydmljZVxuICogICBteUdyYXVsdFJlc29sdmU6IFwiU29tZVNlcnZpY2VcIlxuICogfVxuICpcbiAqIG9yOlxuICpcbiAqIFtcbiAqICAgbmV3IFJlc29sdmFibGUoXCJteUZvb1Jlc29sdmVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBcIm15Rm9vRGF0YVwiIH0pLFxuICogICBuZXcgUmVzb2x2YWJsZShcIm15QmFyUmVzb2x2ZVwiLCBmdW5jdGlvbihkZXApIHsgcmV0dXJuIGRlcC5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sIFsgXCJEZXBlbmRlbmN5TmFtZVwiIF0pLFxuICogICB7IHByb3ZpZGU6IFwibXlCYXpSZXNvbHZlXCIsIHVzZUZhY3Rvcnk6IGZ1bmN0aW9uKGRlcCkgeyBkZXAuZmV0Y2hTb21ldGhpbmdBc1Byb21pc2UoKSB9LCBkZXBzOiBbIFwiRGVwZW5kZW5jeU5hbWVcIiBdIH1cbiAqIF1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmFibGVzQnVpbGRlcihzdGF0ZSkge1xuICAgIC8qKiBjb252ZXJ0IHJlc29sdmU6IHt9IGFuZCByZXNvbHZlUG9saWN5OiB7fSBvYmplY3RzIHRvIGFuIGFycmF5IG9mIHR1cGxlcyAqL1xuICAgIHZhciBvYmplY3RzMlR1cGxlcyA9IGZ1bmN0aW9uIChyZXNvbHZlT2JqLCByZXNvbHZlUG9saWNpZXMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHJlc29sdmVPYmogfHwge30pLm1hcChmdW5jdGlvbiAodG9rZW4pIHsgcmV0dXJuICh7XG4gICAgICAgICAgICB0b2tlbjogdG9rZW4sXG4gICAgICAgICAgICB2YWw6IHJlc29sdmVPYmpbdG9rZW5dLFxuICAgICAgICAgICAgZGVwczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcG9saWN5OiByZXNvbHZlUG9saWNpZXNbdG9rZW5dLFxuICAgICAgICB9KTsgfSk7XG4gICAgfTtcbiAgICAvKiogZmV0Y2ggREkgYW5ub3RhdGlvbnMgZnJvbSBhIGZ1bmN0aW9uIG9yIG5nMS1zdHlsZSBhcnJheSAqL1xuICAgIHZhciBhbm5vdGF0ZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB2YXIgJGluamVjdG9yID0gc2VydmljZXMuJGluamVjdG9yO1xuICAgICAgICAvLyBuZzEgZG9lc24ndCBoYXZlIGFuICRpbmplY3RvciB1bnRpbCBydW50aW1lLlxuICAgICAgICAvLyBJZiB0aGUgJGluamVjdG9yIGRvZXNuJ3QgZXhpc3QsIHVzZSBcImRlZmVycmVkXCIgbGl0ZXJhbCBhcyBhXG4gICAgICAgIC8vIG1hcmtlciBpbmRpY2F0aW5nIHRoZXkgc2hvdWxkIGJlIGFubm90YXRlZCB3aGVuIHJ1bnRpbWUgc3RhcnRzXG4gICAgICAgIHJldHVybiBmblsnJGluamVjdCddIHx8ICgkaW5qZWN0b3IgJiYgJGluamVjdG9yLmFubm90YXRlKGZuLCAkaW5qZWN0b3Iuc3RyaWN0RGkpKSB8fCAnZGVmZXJyZWQnO1xuICAgIH07XG4gICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBoYXMgYm90aCBgdG9rZW5gIGFuZCBgcmVzb2x2ZUZuYCwgYW5kIGlzIHByb2JhYmx5IGEgW1tSZXNvbHZlTGl0ZXJhbF1dICovXG4gICAgdmFyIGlzUmVzb2x2ZUxpdGVyYWwgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiAhIShvYmoudG9rZW4gJiYgb2JqLnJlc29sdmVGbik7IH07XG4gICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBsb29rcyBsaWtlIGEgcHJvdmlkZSBsaXRlcmFsLCBvciBhIG5nMiBQcm92aWRlciAqL1xuICAgIHZhciBpc0xpa2VOZzJQcm92aWRlciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICEhKChvYmoucHJvdmlkZSB8fCBvYmoudG9rZW4pICYmIChvYmoudXNlVmFsdWUgfHwgb2JqLnVzZUZhY3RvcnkgfHwgb2JqLnVzZUV4aXN0aW5nIHx8IG9iai51c2VDbGFzcykpO1xuICAgIH07XG4gICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBsb29rcyBsaWtlIGEgdHVwbGUgZnJvbSBvYmoyVHVwbGVzICovXG4gICAgdmFyIGlzVHVwbGVGcm9tT2JqID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gISEob2JqICYmIG9iai52YWwgJiYgKGlzU3RyaW5nKG9iai52YWwpIHx8IGlzQXJyYXkob2JqLnZhbCkgfHwgaXNGdW5jdGlvbihvYmoudmFsKSkpO1xuICAgIH07XG4gICAgLyoqIGV4dHJhY3RzIHRoZSB0b2tlbiBmcm9tIGEgUHJvdmlkZXIgb3IgcHJvdmlkZSBsaXRlcmFsICovXG4gICAgdmFyIGdldFRva2VuID0gZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAucHJvdmlkZSB8fCBwLnRva2VuOyB9O1xuICAgIC8vIHByZXR0aWVyLWlnbm9yZTogR2l2ZW4gYSBsaXRlcmFsIHJlc29sdmUgb3IgcHJvdmlkZXIgb2JqZWN0LCByZXR1cm5zIGEgUmVzb2x2YWJsZVxuICAgIHZhciBsaXRlcmFsMlJlc29sdmFibGUgPSBwYXR0ZXJuKFtcbiAgICAgICAgW3Byb3AoJ3Jlc29sdmVGbicpLCBmdW5jdGlvbiAocCkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIHAucmVzb2x2ZUZuLCBwLmRlcHMsIHAucG9saWN5KTsgfV0sXG4gICAgICAgIFtwcm9wKCd1c2VGYWN0b3J5JyksIGZ1bmN0aW9uIChwKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgcC51c2VGYWN0b3J5LCBwLmRlcHMgfHwgcC5kZXBlbmRlbmNpZXMsIHAucG9saWN5KTsgfV0sXG4gICAgICAgIFtwcm9wKCd1c2VDbGFzcycpLCBmdW5jdGlvbiAocCkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBwLnVzZUNsYXNzKCk7IH0sIFtdLCBwLnBvbGljeSk7IH1dLFxuICAgICAgICBbcHJvcCgndXNlVmFsdWUnKSwgZnVuY3Rpb24gKHApIHsgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKGdldFRva2VuKHApLCBmdW5jdGlvbiAoKSB7IHJldHVybiBwLnVzZVZhbHVlOyB9LCBbXSwgcC5wb2xpY3ksIHAudXNlVmFsdWUpOyB9XSxcbiAgICAgICAgW3Byb3AoJ3VzZUV4aXN0aW5nJyksIGZ1bmN0aW9uIChwKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgaWRlbnRpdHksIFtwLnVzZUV4aXN0aW5nXSwgcC5wb2xpY3kpOyB9XSxcbiAgICBdKTtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICB2YXIgdHVwbGUyUmVzb2x2YWJsZSA9IHBhdHRlcm4oW1xuICAgICAgICBbcGlwZShwcm9wKCd2YWwnKSwgaXNTdHJpbmcpLCBmdW5jdGlvbiAodHVwbGUpIHsgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCBpZGVudGl0eSwgW3R1cGxlLnZhbF0sIHR1cGxlLnBvbGljeSk7IH1dLFxuICAgICAgICBbcGlwZShwcm9wKCd2YWwnKSwgaXNBcnJheSksIGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUodHVwbGUudG9rZW4sIHRhaWwodHVwbGUudmFsKSwgdHVwbGUudmFsLnNsaWNlKDAsIC0xKSwgdHVwbGUucG9saWN5KTsgfV0sXG4gICAgICAgIFtwaXBlKHByb3AoJ3ZhbCcpLCBpc0Z1bmN0aW9uKSwgZnVuY3Rpb24gKHR1cGxlKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZSh0dXBsZS50b2tlbiwgdHVwbGUudmFsLCBhbm5vdGF0ZSh0dXBsZS52YWwpLCB0dXBsZS5wb2xpY3kpOyB9XSxcbiAgICBdKTtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICB2YXIgaXRlbTJSZXNvbHZhYmxlID0gcGF0dGVybihbXG4gICAgICAgIFtpcyhSZXNvbHZhYmxlKSwgZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHI7IH1dLFxuICAgICAgICBbaXNSZXNvbHZlTGl0ZXJhbCwgbGl0ZXJhbDJSZXNvbHZhYmxlXSxcbiAgICAgICAgW2lzTGlrZU5nMlByb3ZpZGVyLCBsaXRlcmFsMlJlc29sdmFibGVdLFxuICAgICAgICBbaXNUdXBsZUZyb21PYmosIHR1cGxlMlJlc29sdmFibGVdLFxuICAgICAgICBbdmFsKHRydWUpLCBmdW5jdGlvbiAob2JqKSB7IHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNvbHZlIHZhbHVlOiAnICsgc3RyaW5naWZ5KG9iaikpOyB9LF0sXG4gICAgXSk7XG4gICAgLy8gSWYgcmVzb2x2ZUJsb2NrIGlzIGFscmVhZHkgYW4gYXJyYXksIHVzZSBpdCBhcy1pcy5cbiAgICAvLyBPdGhlcndpc2UsIGFzc3VtZSBpdCdzIGFuIG9iamVjdCBhbmQgY29udmVydCB0byBhbiBBcnJheSBvZiB0dXBsZXNcbiAgICB2YXIgZGVjbCA9IHN0YXRlLnJlc29sdmU7XG4gICAgdmFyIGl0ZW1zID0gaXNBcnJheShkZWNsKSA/IGRlY2wgOiBvYmplY3RzMlR1cGxlcyhkZWNsLCBzdGF0ZS5yZXNvbHZlUG9saWN5IHx8IHt9KTtcbiAgICByZXR1cm4gaXRlbXMubWFwKGl0ZW0yUmVzb2x2YWJsZSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbGFwaSBBIGludGVybmFsIGdsb2JhbCBzZXJ2aWNlXG4gKlxuICogU3RhdGVCdWlsZGVyIGlzIGEgZmFjdG9yeSBmb3IgdGhlIGludGVybmFsIFtbU3RhdGVPYmplY3RdXSBvYmplY3RzLlxuICpcbiAqIFdoZW4geW91IHJlZ2lzdGVyIGEgc3RhdGUgd2l0aCB0aGUgW1tTdGF0ZVJlZ2lzdHJ5XV0sIHlvdSByZWdpc3RlciBhIHBsYWluIG9sZCBqYXZhc2NyaXB0IG9iamVjdCB3aGljaFxuICogY29uZm9ybXMgdG8gdGhlIFtbU3RhdGVEZWNsYXJhdGlvbl1dIGludGVyZmFjZS4gIFRoaXMgZmFjdG9yeSB0YWtlcyB0aGF0IG9iamVjdCBhbmQgYnVpbGRzIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0LCB3aGljaCBoYXMgYW4gQVBJIGFuZCBpcyB1c2VkIGludGVybmFsbHkuXG4gKlxuICogQ3VzdG9tIHByb3BlcnRpZXMgb3IgQVBJIG1heSBiZSBhZGRlZCB0byB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCBieSByZWdpc3RlcmluZyBhIGRlY29yYXRvciBmdW5jdGlvblxuICogdXNpbmcgdGhlIFtbYnVpbGRlcl1dIG1ldGhvZC5cbiAqL1xudmFyIFN0YXRlQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0ZUJ1aWxkZXIobWF0Y2hlciwgdXJsTWF0Y2hlckZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hlcjtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgcm9vdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hdGNoZXIuZmluZCgnJyk7IH07XG4gICAgICAgIHZhciBpc1Jvb3QgPSBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLm5hbWUgPT09ICcnOyB9O1xuICAgICAgICBmdW5jdGlvbiBwYXJlbnRCdWlsZGVyKHN0YXRlKSB7XG4gICAgICAgICAgICBpZiAoaXNSb290KHN0YXRlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLmZpbmQoc2VsZi5wYXJlbnROYW1lKHN0YXRlKSkgfHwgcm9vdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVpbGRlcnMgPSB7XG4gICAgICAgICAgICBuYW1lOiBbbmFtZUJ1aWxkZXJdLFxuICAgICAgICAgICAgc2VsZjogW3NlbGZCdWlsZGVyXSxcbiAgICAgICAgICAgIHBhcmVudDogW3BhcmVudEJ1aWxkZXJdLFxuICAgICAgICAgICAgZGF0YTogW2RhdGFCdWlsZGVyXSxcbiAgICAgICAgICAgIC8vIEJ1aWxkIGEgVVJMTWF0Y2hlciBpZiBuZWNlc3NhcnksIGVpdGhlciB2aWEgYSByZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkxcbiAgICAgICAgICAgIHVybDogW2dldFVybEJ1aWxkZXIodXJsTWF0Y2hlckZhY3RvcnksIHJvb3QpXSxcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGNsb3Nlc3QgYW5jZXN0b3Igc3RhdGUgdGhhdCBoYXMgYSBVUkwgKGkuZS4gaXMgbmF2aWdhYmxlKVxuICAgICAgICAgICAgbmF2aWdhYmxlOiBbZ2V0TmF2aWdhYmxlQnVpbGRlcihpc1Jvb3QpXSxcbiAgICAgICAgICAgIHBhcmFtczogW2dldFBhcmFtc0J1aWxkZXIodXJsTWF0Y2hlckZhY3RvcnkucGFyYW1GYWN0b3J5KV0sXG4gICAgICAgICAgICAvLyBFYWNoIGZyYW1ld29yay1zcGVjaWZpYyB1aS1yb3V0ZXIgaW1wbGVtZW50YXRpb24gc2hvdWxkIGRlZmluZSBpdHMgb3duIGB2aWV3c2AgYnVpbGRlclxuICAgICAgICAgICAgLy8gZS5nLiwgc3JjL25nMS9zdGF0ZWJ1aWxkZXJzL3ZpZXdzLnRzXG4gICAgICAgICAgICB2aWV3czogW10sXG4gICAgICAgICAgICAvLyBLZWVwIGEgZnVsbCBwYXRoIGZyb20gdGhlIHJvb3QgZG93biB0byB0aGlzIHN0YXRlIGFzIHRoaXMgaXMgbmVlZGVkIGZvciBzdGF0ZSBhY3RpdmF0aW9uLlxuICAgICAgICAgICAgcGF0aDogW3BhdGhCdWlsZGVyXSxcbiAgICAgICAgICAgIC8vIFNwZWVkIHVwICRzdGF0ZS5pbmNsdWRlcygpIGFzIGl0J3MgdXNlZCBhIGxvdFxuICAgICAgICAgICAgaW5jbHVkZXM6IFtpbmNsdWRlc0J1aWxkZXJdLFxuICAgICAgICAgICAgcmVzb2x2YWJsZXM6IFtyZXNvbHZhYmxlc0J1aWxkZXJdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBbW0J1aWxkZXJGdW5jdGlvbl1dIGZvciBhIHNwZWNpZmljIFtbU3RhdGVPYmplY3RdXSBwcm9wZXJ0eSAoZS5nLiwgYHBhcmVudGAsIGB1cmxgLCBvciBgcGF0aGApLlxuICAgICAqIE1vcmUgdGhhbiBvbmUgQnVpbGRlckZ1bmN0aW9uIGNhbiBiZSByZWdpc3RlcmVkIGZvciBhIGdpdmVuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogVGhlIEJ1aWxkZXJGdW5jdGlvbihzKSB3aWxsIGJlIHVzZWQgdG8gZGVmaW5lIHRoZSBwcm9wZXJ0eSBvbiBhbnkgc3Vic2VxdWVudGx5IGJ1aWx0IFtbU3RhdGVPYmplY3RdXSBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIFN0YXRlIHByb3BlcnR5IGJlaW5nIHJlZ2lzdGVyZWQgZm9yLlxuICAgICAqIEBwYXJhbSBmbiBUaGUgQnVpbGRlckZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBidWlsZCB0aGUgU3RhdGUgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBCdWlsZGVyRnVuY3Rpb25cbiAgICAgKi9cbiAgICBTdGF0ZUJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkZXIgPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcbiAgICAgICAgdmFyIGJ1aWxkZXJzID0gdGhpcy5idWlsZGVycztcbiAgICAgICAgdmFyIGFycmF5ID0gYnVpbGRlcnNbbmFtZV0gfHwgW107XG4gICAgICAgIC8vIEJhY2t3YXJkcyBjb21wYXQ6IGlmIG9ubHkgb25lIGJ1aWxkZXIgZXhpc3RzLCByZXR1cm4gaXQsIGVsc2UgcmV0dXJuIHdob2xlIGFyYXJ5LlxuICAgICAgICBpZiAoaXNTdHJpbmcobmFtZSkgJiYgIWlzRGVmaW5lZChmbikpXG4gICAgICAgICAgICByZXR1cm4gYXJyYXkubGVuZ3RoID4gMSA/IGFycmF5IDogYXJyYXlbMF07XG4gICAgICAgIGlmICghaXNTdHJpbmcobmFtZSkgfHwgIWlzRnVuY3Rpb24oZm4pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBidWlsZGVyc1tuYW1lXSA9IGFycmF5O1xuICAgICAgICBidWlsZGVyc1tuYW1lXS5wdXNoKGZuKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJ1aWxkZXJzW25hbWVdLnNwbGljZShidWlsZGVyc1tuYW1lXS5pbmRleE9mKGZuLCAxKSkgJiYgbnVsbDsgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhbGwgb2YgdGhlIHByb3BlcnRpZXMgb24gYW4gZXNzZW50aWFsbHkgYmxhbmsgU3RhdGUgb2JqZWN0LCByZXR1cm5pbmcgYSBTdGF0ZSBvYmplY3Qgd2hpY2ggaGFzIGFsbCBpdHNcbiAgICAgKiBwcm9wZXJ0aWVzIGFuZCBBUEkgYnVpbHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGUgYW4gdW5pbml0aWFsaXplZCBTdGF0ZSBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB0aGUgYnVpbHQgU3RhdGUgb2JqZWN0XG4gICAgICovXG4gICAgU3RhdGVCdWlsZGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBtYXRjaGVyID0gX2EubWF0Y2hlciwgYnVpbGRlcnMgPSBfYS5idWlsZGVycztcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50TmFtZShzdGF0ZSk7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgIW1hdGNoZXIuZmluZChwYXJlbnQsIHVuZGVmaW5lZCwgZmFsc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYnVpbGRlcnMpIHtcbiAgICAgICAgICAgIGlmICghYnVpbGRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHZhciBjaGFpbiA9IGJ1aWxkZXJzW2tleV0ucmVkdWNlKGZ1bmN0aW9uIChwYXJlbnRGbiwgc3RlcCkgeyByZXR1cm4gZnVuY3Rpb24gKF9zdGF0ZSkgeyByZXR1cm4gc3RlcChfc3RhdGUsIHBhcmVudEZuKTsgfTsgfSwgbm9vcCk7XG4gICAgICAgICAgICBzdGF0ZVtrZXldID0gY2hhaW4oc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9O1xuICAgIFN0YXRlQnVpbGRlci5wcm90b3R5cGUucGFyZW50TmFtZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAvLyBuYW1lID0gJ2Zvby5iYXIuYmF6LioqJ1xuICAgICAgICB2YXIgbmFtZSA9IHN0YXRlLm5hbWUgfHwgJyc7XG4gICAgICAgIC8vIHNlZ21lbnRzID0gWydmb28nLCAnYmFyJywgJ2JheicsICcuKionXVxuICAgICAgICB2YXIgc2VnbWVudHMgPSBuYW1lLnNwbGl0KCcuJyk7XG4gICAgICAgIC8vIHNlZ21lbnRzID0gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICAgIHZhciBsYXN0U2VnbWVudCA9IHNlZ21lbnRzLnBvcCgpO1xuICAgICAgICAvLyBzZWdtZW50cyA9IFsnZm9vJywgJ2JhciddIChpZ25vcmUgLioqIHNlZ21lbnQgZm9yIGZ1dHVyZSBzdGF0ZXMpXG4gICAgICAgIGlmIChsYXN0U2VnbWVudCA9PT0gJyoqJylcbiAgICAgICAgICAgIHNlZ21lbnRzLnBvcCgpO1xuICAgICAgICBpZiAoc2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3RhdGVzIHRoYXQgc3BlY2lmeSB0aGUgJ3BhcmVudDonIHByb3BlcnR5IHNob3VsZCBub3QgaGF2ZSBhICcuJyBpbiB0aGVpciBuYW1lIChcIiArIG5hbWUgKyBcIilcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAnZm9vLmJhcidcbiAgICAgICAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKCcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdGF0ZS5wYXJlbnQpXG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIHJldHVybiBpc1N0cmluZyhzdGF0ZS5wYXJlbnQpID8gc3RhdGUucGFyZW50IDogc3RhdGUucGFyZW50Lm5hbWU7XG4gICAgfTtcbiAgICBTdGF0ZUJ1aWxkZXIucHJvdG90eXBlLm5hbWUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBzdGF0ZS5uYW1lO1xuICAgICAgICBpZiAobmFtZS5pbmRleE9mKCcuJykgIT09IC0xIHx8ICFzdGF0ZS5wYXJlbnQpXG4gICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgdmFyIHBhcmVudE5hbWUgPSBpc1N0cmluZyhzdGF0ZS5wYXJlbnQpID8gc3RhdGUucGFyZW50IDogc3RhdGUucGFyZW50Lm5hbWU7XG4gICAgICAgIHJldHVybiBwYXJlbnROYW1lID8gcGFyZW50TmFtZSArICcuJyArIG5hbWUgOiBuYW1lO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRlQnVpbGRlcjtcbn0oKSk7XG5leHBvcnQgeyBTdGF0ZUJ1aWxkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlQnVpbGRlci5qcy5tYXAiLCJ2YXIgVHJhbnNpdGlvbkhvb2tQaGFzZTtcbihmdW5jdGlvbiAoVHJhbnNpdGlvbkhvb2tQaGFzZSkge1xuICAgIFRyYW5zaXRpb25Ib29rUGhhc2VbVHJhbnNpdGlvbkhvb2tQaGFzZVtcIkNSRUFURVwiXSA9IDBdID0gXCJDUkVBVEVcIjtcbiAgICBUcmFuc2l0aW9uSG9va1BoYXNlW1RyYW5zaXRpb25Ib29rUGhhc2VbXCJCRUZPUkVcIl0gPSAxXSA9IFwiQkVGT1JFXCI7XG4gICAgVHJhbnNpdGlvbkhvb2tQaGFzZVtUcmFuc2l0aW9uSG9va1BoYXNlW1wiUlVOXCJdID0gMl0gPSBcIlJVTlwiO1xuICAgIFRyYW5zaXRpb25Ib29rUGhhc2VbVHJhbnNpdGlvbkhvb2tQaGFzZVtcIlNVQ0NFU1NcIl0gPSAzXSA9IFwiU1VDQ0VTU1wiO1xuICAgIFRyYW5zaXRpb25Ib29rUGhhc2VbVHJhbnNpdGlvbkhvb2tQaGFzZVtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XG59KShUcmFuc2l0aW9uSG9va1BoYXNlIHx8IChUcmFuc2l0aW9uSG9va1BoYXNlID0ge30pKTtcbnZhciBUcmFuc2l0aW9uSG9va1Njb3BlO1xuKGZ1bmN0aW9uIChUcmFuc2l0aW9uSG9va1Njb3BlKSB7XG4gICAgVHJhbnNpdGlvbkhvb2tTY29wZVtUcmFuc2l0aW9uSG9va1Njb3BlW1wiVFJBTlNJVElPTlwiXSA9IDBdID0gXCJUUkFOU0lUSU9OXCI7XG4gICAgVHJhbnNpdGlvbkhvb2tTY29wZVtUcmFuc2l0aW9uSG9va1Njb3BlW1wiU1RBVEVcIl0gPSAxXSA9IFwiU1RBVEVcIjtcbn0pKFRyYW5zaXRpb25Ib29rU2NvcGUgfHwgKFRyYW5zaXRpb25Ib29rU2NvcGUgPSB7fSkpO1xuZXhwb3J0IHsgVHJhbnNpdGlvbkhvb2tQaGFzZSwgVHJhbnNpdGlvbkhvb2tTY29wZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJmYWNlLmpzLm1hcCIsImltcG9ydCB7IGRlZmF1bHRzLCB2YWx1ZXMsIGZpbmQsIGluaGVyaXQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHByb3BFcSB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgR2xvYiB9IGZyb20gJy4uL2NvbW1vbi9nbG9iJztcbmltcG9ydCB7IGlzT2JqZWN0LCBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuLyoqXG4gKiBJbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhIFVJLVJvdXRlciBzdGF0ZS5cbiAqXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgY3JlYXRlZCB3aGVuIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1N0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiBBIHJlZ2lzdGVyZWQgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgYXVnbWVudGVkIHdpdGggYSBnZXR0ZXIgKFtbU3RhdGVEZWNsYXJhdGlvbi4kJHN0YXRlXV0pIHdoaWNoIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAqXG4gKiBUaGlzIGNsYXNzIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIFtbU3RhdGVEZWNsYXJhdGlvbl1dLlxuICogRWFjaCBvZiBpdHMgb3duIHByb3BlcnRpZXMgKGkuZS4sIGBoYXNPd25Qcm9wZXJ0eWApIGFyZSBidWlsdCB1c2luZyBidWlsZGVycyBmcm9tIHRoZSBbW1N0YXRlQnVpbGRlcl1dLlxuICovXG52YXIgU3RhdGVPYmplY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBkZXByZWNhdGVkIHVzZSBTdGF0ZS5jcmVhdGUoKSAqL1xuICAgIGZ1bmN0aW9uIFN0YXRlT2JqZWN0KGNvbmZpZykge1xuICAgICAgICByZXR1cm4gU3RhdGVPYmplY3QuY3JlYXRlKGNvbmZpZyB8fCB7fSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHN0YXRlIG9iamVjdCB0byBwdXQgdGhlIHByaXZhdGUvaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbnRvLlxuICAgICAqIFRoZSBvYmplY3QncyBwcm90b3R5cGUgY2hhaW4gbG9va3MgbGlrZTpcbiAgICAgKiAoSW50ZXJuYWwgU3RhdGUgT2JqZWN0KSAtPiAoQ29weSBvZiBTdGF0ZS5wcm90b3R5cGUpIC0+IChTdGF0ZSBEZWNsYXJhdGlvbiBvYmplY3QpIC0+IChTdGF0ZSBEZWNsYXJhdGlvbidzIHByb3RvdHlwZS4uLilcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZURlY2wgdGhlIHVzZXItc3VwcGxpZWQgU3RhdGUgRGVjbGFyYXRpb25cbiAgICAgKiBAcmV0dXJucyB7U3RhdGVPYmplY3R9IGFuIGludGVybmFsIFN0YXRlIG9iamVjdFxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChzdGF0ZURlY2wpIHtcbiAgICAgICAgc3RhdGVEZWNsID0gU3RhdGVPYmplY3QuaXNTdGF0ZUNsYXNzKHN0YXRlRGVjbCkgPyBuZXcgc3RhdGVEZWNsKCkgOiBzdGF0ZURlY2w7XG4gICAgICAgIHZhciBzdGF0ZSA9IGluaGVyaXQoaW5oZXJpdChzdGF0ZURlY2wsIFN0YXRlT2JqZWN0LnByb3RvdHlwZSkpO1xuICAgICAgICBzdGF0ZURlY2wuJCRzdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0YXRlOyB9O1xuICAgICAgICBzdGF0ZS5zZWxmID0gc3RhdGVEZWNsO1xuICAgICAgICBzdGF0ZS5fX3N0YXRlT2JqZWN0Q2FjaGUgPSB7XG4gICAgICAgICAgICBuYW1lR2xvYjogR2xvYi5mcm9tU3RyaW5nKHN0YXRlLm5hbWUpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhcmFtZXRlciBpcyB0aGUgc2FtZSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIENvbXBhcmVzIHRoZSBpZGVudGl0eSBvZiB0aGUgc3RhdGUgYWdhaW5zdCB0aGUgcGFzc2VkIHZhbHVlLCB3aGljaCBpcyBlaXRoZXIgYW4gb2JqZWN0XG4gICAgICogcmVmZXJlbmNlIHRvIHRoZSBhY3R1YWwgYFN0YXRlYCBpbnN0YW5jZSwgdGhlIG9yaWdpbmFsIGRlZmluaXRpb24gb2JqZWN0IHBhc3NlZCB0b1xuICAgICAqIGAkc3RhdGVQcm92aWRlci5zdGF0ZSgpYCwgb3IgdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlZiBDYW4gYmUgb25lIG9mIChhKSBhIGBTdGF0ZWAgaW5zdGFuY2UsIChiKSBhbiBvYmplY3QgdGhhdCB3YXMgcGFzc2VkXG4gICAgICogICAgICAgIGludG8gYCRzdGF0ZVByb3ZpZGVyLnN0YXRlKClgLCAoYykgdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1lIG9mIGEgc3RhdGUgYXMgYSBzdHJpbmcuXG4gICAgICogQHJldHVybnMgUmV0dXJucyBgdHJ1ZWAgaWYgYHJlZmAgbWF0Y2hlcyB0aGUgY3VycmVudCBgU3RhdGVgIGluc3RhbmNlLlxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHJlZiB8fCB0aGlzLnNlbGYgPT09IHJlZiB8fCB0aGlzLmZxbigpID09PSByZWY7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCB0aGlzIGRvZXMgbm90IHByb3Blcmx5IGhhbmRsZSBkb3Qgbm90YXRpb25cbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgZG90LXNlcGFyYXRlZCBuYW1lIG9mIHRoZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBTdGF0ZU9iamVjdC5wcm90b3R5cGUuZnFuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyZW50IHx8ICEodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICAgIHZhciBuYW1lID0gdGhpcy5wYXJlbnQuZnFuKCk7XG4gICAgICAgIHJldHVybiBuYW1lID8gbmFtZSArICcuJyArIHRoaXMubmFtZSA6IHRoaXMubmFtZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJvb3Qgbm9kZSBvZiB0aGlzIHN0YXRlJ3MgdHJlZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByb290IG9mIHRoaXMgc3RhdGUncyB0cmVlLlxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5yb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnJvb3QoKSkgfHwgdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXRlJ3MgYFBhcmFtYCBvYmplY3RzXG4gICAgICpcbiAgICAgKiBHZXRzIHRoZSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIG93bmVkIGJ5IHRoZSBzdGF0ZS5cbiAgICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIGluY2x1ZGVzIHRoZSBhbmNlc3RvciBzdGF0ZXMnIFtbUGFyYW1dXSBvYmplY3RzLlxuICAgICAqIElmIGBvcHRzLm1hdGNoaW5nS2V5c2AgZXhpc3RzLCByZXR1cm5zIG9ubHkgYFBhcmFtYHMgd2hvc2UgYGlkYCBpcyBhIGtleSBvbiB0aGUgYG1hdGNoaW5nS2V5c2Agb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0cyBvcHRpb25zXG4gICAgICovXG4gICAgU3RhdGVPYmplY3QucHJvdG90eXBlLnBhcmFtZXRlcnMgPSBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICBvcHRzID0gZGVmYXVsdHMob3B0cywgeyBpbmhlcml0OiB0cnVlLCBtYXRjaGluZ0tleXM6IG51bGwgfSk7XG4gICAgICAgIHZhciBpbmhlcml0ZWQgPSAob3B0cy5pbmhlcml0ICYmIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnBhcmFtZXRlcnMoKSkgfHwgW107XG4gICAgICAgIHJldHVybiBpbmhlcml0ZWRcbiAgICAgICAgICAgIC5jb25jYXQodmFsdWVzKHRoaXMucGFyYW1zKSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhb3B0cy5tYXRjaGluZ0tleXMgfHwgb3B0cy5tYXRjaGluZ0tleXMuaGFzT3duUHJvcGVydHkocGFyYW0uaWQpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzaW5nbGUgW1tQYXJhbV1dIHRoYXQgaXMgb3duZWQgYnkgdGhlIHN0YXRlXG4gICAgICpcbiAgICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIHNlYXJjaGVzIHRoZSBhbmNlc3RvciBzdGF0ZXNgIFtbUGFyYW1dXXMuXG4gICAgICogQHBhcmFtIGlkIHRoZSBuYW1lIG9mIHRoZSBbW1BhcmFtXV0gdG8gcmV0dXJuXG4gICAgICogQHBhcmFtIG9wdHMgb3B0aW9uc1xuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5wYXJhbWV0ZXIgPSBmdW5jdGlvbiAoaWQsIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICAgICAgcmV0dXJuICgodGhpcy51cmwgJiYgdGhpcy51cmwucGFyYW1ldGVyKGlkLCBvcHRzKSkgfHxcbiAgICAgICAgICAgIGZpbmQodmFsdWVzKHRoaXMucGFyYW1zKSwgcHJvcEVxKCdpZCcsIGlkKSkgfHxcbiAgICAgICAgICAgIChvcHRzLmluaGVyaXQgJiYgdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQucGFyYW1ldGVyKGlkKSkpO1xuICAgIH07XG4gICAgU3RhdGVPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcW4oKTtcbiAgICB9O1xuICAgIC8qKiBQcmVkaWNhdGUgd2hpY2ggcmV0dXJucyB0cnVlIGlmIHRoZSBvYmplY3QgaXMgYW4gY2xhc3Mgd2l0aCBAU3RhdGUoKSBkZWNvcmF0b3IgKi9cbiAgICBTdGF0ZU9iamVjdC5pc1N0YXRlQ2xhc3MgPSBmdW5jdGlvbiAoc3RhdGVEZWNsKSB7XG4gICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKHN0YXRlRGVjbCkgJiYgc3RhdGVEZWNsWydfX3VpUm91dGVyU3RhdGUnXSA9PT0gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKiBQcmVkaWNhdGUgd2hpY2ggcmV0dXJucyB0cnVlIGlmIHRoZSBvYmplY3QgaXMgYW4gaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCAqL1xuICAgIFN0YXRlT2JqZWN0LmlzU3RhdGUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBpc09iamVjdChvYmpbJ19fc3RhdGVPYmplY3RDYWNoZSddKTsgfTtcbiAgICByZXR1cm4gU3RhdGVPYmplY3Q7XG59KCkpO1xuZXhwb3J0IHsgU3RhdGVPYmplY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlT2JqZWN0LmpzLm1hcCIsIi8qKiBAbW9kdWxlIHN0YXRlICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyB2YWx1ZXMgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbnZhciBTdGF0ZU1hdGNoZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGVNYXRjaGVyKF9zdGF0ZXMpIHtcbiAgICAgICAgdGhpcy5fc3RhdGVzID0gX3N0YXRlcztcbiAgICB9XG4gICAgU3RhdGVNYXRjaGVyLnByb3RvdHlwZS5pc1JlbGF0aXZlID0gZnVuY3Rpb24gKHN0YXRlTmFtZSkge1xuICAgICAgICBzdGF0ZU5hbWUgPSBzdGF0ZU5hbWUgfHwgJyc7XG4gICAgICAgIHJldHVybiBzdGF0ZU5hbWUuaW5kZXhPZignLicpID09PSAwIHx8IHN0YXRlTmFtZS5pbmRleE9mKCdeJykgPT09IDA7XG4gICAgfTtcbiAgICBTdGF0ZU1hdGNoZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIGJhc2UsIG1hdGNoR2xvYikge1xuICAgICAgICBpZiAobWF0Y2hHbG9iID09PSB2b2lkIDApIHsgbWF0Y2hHbG9iID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoIXN0YXRlT3JOYW1lICYmIHN0YXRlT3JOYW1lICE9PSAnJylcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBpc1N0ciA9IGlzU3RyaW5nKHN0YXRlT3JOYW1lKTtcbiAgICAgICAgdmFyIG5hbWUgPSBpc1N0ciA/IHN0YXRlT3JOYW1lIDogc3RhdGVPck5hbWUubmFtZTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWxhdGl2ZShuYW1lKSlcbiAgICAgICAgICAgIG5hbWUgPSB0aGlzLnJlc29sdmVQYXRoKG5hbWUsIGJhc2UpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZXNbbmFtZV07XG4gICAgICAgIGlmIChzdGF0ZSAmJiAoaXNTdHIgfHwgKCFpc1N0ciAmJiAoc3RhdGUgPT09IHN0YXRlT3JOYW1lIHx8IHN0YXRlLnNlbGYgPT09IHN0YXRlT3JOYW1lKSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTdHIgJiYgbWF0Y2hHbG9iKSB7XG4gICAgICAgICAgICB2YXIgX3N0YXRlcyA9IHZhbHVlcyh0aGlzLl9zdGF0ZXMpO1xuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBfc3RhdGVzLmZpbHRlcihmdW5jdGlvbiAoX3N0YXRlKSB7IHJldHVybiBfc3RhdGUuX19zdGF0ZU9iamVjdENhY2hlLm5hbWVHbG9iICYmIF9zdGF0ZS5fX3N0YXRlT2JqZWN0Q2FjaGUubmFtZUdsb2IubWF0Y2hlcyhuYW1lKTsgfSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0YXRlTWF0Y2hlci5maW5kOiBGb3VuZCBtdWx0aXBsZSBtYXRjaGVzIGZvciBcIiArIG5hbWUgKyBcIiB1c2luZyBnbG9iOiBcIiwgbWF0Y2hlcy5tYXAoZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC5uYW1lOyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlc1swXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgU3RhdGVNYXRjaGVyLnByb3RvdHlwZS5yZXNvbHZlUGF0aCA9IGZ1bmN0aW9uIChuYW1lLCBiYXNlKSB7XG4gICAgICAgIGlmICghYmFzZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJlZmVyZW5jZSBwb2ludCBnaXZlbiBmb3IgcGF0aCAnXCIgKyBuYW1lICsgXCInXCIpO1xuICAgICAgICB2YXIgYmFzZVN0YXRlID0gdGhpcy5maW5kKGJhc2UpO1xuICAgICAgICB2YXIgc3BsaXROYW1lID0gbmFtZS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgcGF0aExlbmd0aCA9IHNwbGl0TmFtZS5sZW5ndGg7XG4gICAgICAgIHZhciBpID0gMCwgY3VycmVudCA9IGJhc2VTdGF0ZTtcbiAgICAgICAgZm9yICg7IGkgPCBwYXRoTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzcGxpdE5hbWVbaV0gPT09ICcnICYmIGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gYmFzZVN0YXRlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwbGl0TmFtZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50LnBhcmVudClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGF0aCAnXCIgKyBuYW1lICsgXCInIG5vdCB2YWxpZCBmb3Igc3RhdGUgJ1wiICsgYmFzZVN0YXRlLm5hbWUgKyBcIidcIik7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbE5hbWUgPSBzcGxpdE5hbWUuc2xpY2UoaSkuam9pbignLicpO1xuICAgICAgICByZXR1cm4gY3VycmVudC5uYW1lICsgKGN1cnJlbnQubmFtZSAmJiByZWxOYW1lID8gJy4nIDogJycpICsgcmVsTmFtZTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZU1hdGNoZXI7XG59KCkpO1xuZXhwb3J0IHsgU3RhdGVNYXRjaGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGF0ZU1hdGNoZXIuanMubWFwIiwiLyoqIEBtb2R1bGUgc3RhdGUgKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBpbkFycmF5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBwcm9wIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG4vKiogQGludGVybmFsYXBpICovXG52YXIgU3RhdGVRdWV1ZU1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGVRdWV1ZU1hbmFnZXIoJHJlZ2lzdHJ5LCAkdXJsUm91dGVyLCBzdGF0ZXMsIGJ1aWxkZXIsIGxpc3RlbmVycykge1xuICAgICAgICB0aGlzLiRyZWdpc3RyeSA9ICRyZWdpc3RyeTtcbiAgICAgICAgdGhpcy4kdXJsUm91dGVyID0gJHVybFJvdXRlcjtcbiAgICAgICAgdGhpcy5zdGF0ZXMgPSBzdGF0ZXM7XG4gICAgICAgIHRoaXMuYnVpbGRlciA9IGJ1aWxkZXI7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIHRoaXMubWF0Y2hlciA9ICRyZWdpc3RyeS5tYXRjaGVyO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgU3RhdGVRdWV1ZU1hbmFnZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICB9O1xuICAgIFN0YXRlUXVldWVNYW5hZ2VyLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChzdGF0ZURlY2wpIHtcbiAgICAgICAgdmFyIHF1ZXVlID0gdGhpcy5xdWV1ZTtcbiAgICAgICAgdmFyIHN0YXRlID0gU3RhdGVPYmplY3QuY3JlYXRlKHN0YXRlRGVjbCk7XG4gICAgICAgIHZhciBuYW1lID0gc3RhdGUubmFtZTtcbiAgICAgICAgaWYgKCFpc1N0cmluZyhuYW1lKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3RhdGUgbXVzdCBoYXZlIGEgdmFsaWQgbmFtZScpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZXMuaGFzT3duUHJvcGVydHkobmFtZSkgfHwgaW5BcnJheShxdWV1ZS5tYXAocHJvcCgnbmFtZScpKSwgbmFtZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIgKyBuYW1lICsgXCInIGlzIGFscmVhZHkgZGVmaW5lZFwiKTtcbiAgICAgICAgcXVldWUucHVzaChzdGF0ZSk7XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH07XG4gICAgU3RhdGVRdWV1ZU1hbmFnZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBxdWV1ZSA9IF9hLnF1ZXVlLCBzdGF0ZXMgPSBfYS5zdGF0ZXMsIGJ1aWxkZXIgPSBfYS5idWlsZGVyO1xuICAgICAgICB2YXIgcmVnaXN0ZXJlZCA9IFtdLCAvLyBzdGF0ZXMgdGhhdCBnb3QgcmVnaXN0ZXJlZFxuICAgICAgICBvcnBoYW5zID0gW10sIC8vIHN0YXRlcyB0aGF0IGRvbid0IHlldCBoYXZlIGEgcGFyZW50IHJlZ2lzdGVyZWRcbiAgICAgICAgcHJldmlvdXNRdWV1ZUxlbmd0aCA9IHt9OyAvLyBrZWVwIHRyYWNrIG9mIGhvdyBsb25nIHRoZSBxdWV1ZSB3aGVuIGFuIG9ycGhhbiB3YXMgZmlyc3QgZW5jb3VudGVyZWRcbiAgICAgICAgdmFyIGdldFN0YXRlID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIF90aGlzLnN0YXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBfdGhpcy5zdGF0ZXNbbmFtZV07IH07XG4gICAgICAgIHZhciBub3RpZnlMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocmVnaXN0ZXJlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIGxpc3RlbmVyKCdyZWdpc3RlcmVkJywgcmVnaXN0ZXJlZC5tYXAoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuc2VsZjsgfSkpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICB2YXIgbmFtZV8xID0gc3RhdGUubmFtZTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBidWlsZGVyLmJ1aWxkKHN0YXRlKTtcbiAgICAgICAgICAgIHZhciBvcnBoYW5JZHggPSBvcnBoYW5zLmluZGV4T2Yoc3RhdGUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1N0YXRlID0gZ2V0U3RhdGUobmFtZV8xKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdTdGF0ZSAmJiBleGlzdGluZ1N0YXRlLm5hbWUgPT09IG5hbWVfMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIgKyBuYW1lXzEgKyBcIicgaXMgYWxyZWFkeSBkZWZpbmVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdGdXR1cmVTdGF0ZSA9IGdldFN0YXRlKG5hbWVfMSArICcuKionKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdGdXR1cmVTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZnV0dXJlIHN0YXRlIG9mIHRoZSBzYW1lIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVnaXN0cnkuZGVyZWdpc3RlcihleGlzdGluZ0Z1dHVyZVN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGVzW25hbWVfMV0gPSBzdGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaFJvdXRlKHN0YXRlKTtcbiAgICAgICAgICAgICAgICBpZiAob3JwaGFuSWR4ID49IDApXG4gICAgICAgICAgICAgICAgICAgIG9ycGhhbnMuc3BsaWNlKG9ycGhhbklkeCwgMSk7XG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJlZC5wdXNoKHN0YXRlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmV2ID0gcHJldmlvdXNRdWV1ZUxlbmd0aFtuYW1lXzFdO1xuICAgICAgICAgICAgcHJldmlvdXNRdWV1ZUxlbmd0aFtuYW1lXzFdID0gcXVldWUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKG9ycGhhbklkeCA+PSAwICYmIHByZXYgPT09IHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgdHdvIGNvbnNlY3V0aXZlIGl0ZXJhdGlvbnMgd2hlcmUgbm8gYWRkaXRpb25hbCBzdGF0ZXMgd2VyZSBkZXF1ZXVlZCBzdWNjZXNzZnVsbHkuXG4gICAgICAgICAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVnaXN0ZXIgb3JwaGFuZWQgc3RhdGUgJyR7bmFtZX0nYCk7XG4gICAgICAgICAgICAgICAgcXVldWUucHVzaChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9ycGhhbklkeCA8IDApIHtcbiAgICAgICAgICAgICAgICBvcnBoYW5zLnB1c2goc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUucHVzaChzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgICAgIHJldHVybiBzdGF0ZXM7XG4gICAgfTtcbiAgICBTdGF0ZVF1ZXVlTWFuYWdlci5wcm90b3R5cGUuYXR0YWNoUm91dGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlLmFic3RyYWN0IHx8ICFzdGF0ZS51cmwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuJHVybFJvdXRlci5ydWxlKHRoaXMuJHVybFJvdXRlci51cmxSdWxlRmFjdG9yeS5jcmVhdGUoc3RhdGUpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZVF1ZXVlTWFuYWdlcjtcbn0oKSk7XG5leHBvcnQgeyBTdGF0ZVF1ZXVlTWFuYWdlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVRdWV1ZU1hbmFnZXIuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBzdGF0ZVxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgU3RhdGVNYXRjaGVyIH0gZnJvbSAnLi9zdGF0ZU1hdGNoZXInO1xuaW1wb3J0IHsgU3RhdGVCdWlsZGVyIH0gZnJvbSAnLi9zdGF0ZUJ1aWxkZXInO1xuaW1wb3J0IHsgU3RhdGVRdWV1ZU1hbmFnZXIgfSBmcm9tICcuL3N0YXRlUXVldWVNYW5hZ2VyJztcbmltcG9ydCB7IHJlbW92ZUZyb20gfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHByb3BFcSB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xudmFyIFN0YXRlUmVnaXN0cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIGZ1bmN0aW9uIFN0YXRlUmVnaXN0cnkoX3JvdXRlcikge1xuICAgICAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xuICAgICAgICB0aGlzLnN0YXRlcyA9IHt9O1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLm1hdGNoZXIgPSBuZXcgU3RhdGVNYXRjaGVyKHRoaXMuc3RhdGVzKTtcbiAgICAgICAgdGhpcy5idWlsZGVyID0gbmV3IFN0YXRlQnVpbGRlcih0aGlzLm1hdGNoZXIsIF9yb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkpO1xuICAgICAgICB0aGlzLnN0YXRlUXVldWUgPSBuZXcgU3RhdGVRdWV1ZU1hbmFnZXIodGhpcywgX3JvdXRlci51cmxSb3V0ZXIsIHRoaXMuc3RhdGVzLCB0aGlzLmJ1aWxkZXIsIHRoaXMubGlzdGVuZXJzKTtcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJSb290KCk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5fcmVnaXN0ZXJSb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcm9vdFN0YXRlRGVmID0ge1xuICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICB1cmw6ICdeJyxcbiAgICAgICAgICAgIHZpZXdzOiBudWxsLFxuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgJyMnOiB7IHZhbHVlOiBudWxsLCB0eXBlOiAnaGFzaCcsIGR5bmFtaWM6IHRydWUgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIF9yb290ID0gKHRoaXMuX3Jvb3QgPSB0aGlzLnN0YXRlUXVldWUucmVnaXN0ZXIocm9vdFN0YXRlRGVmKSk7XG4gICAgICAgIF9yb290Lm5hdmlnYWJsZSA9IG51bGw7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgU3RhdGVSZWdpc3RyeS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zdGF0ZVF1ZXVlLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXQoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gX3RoaXMuZ2V0KHN0YXRlKSAmJiBfdGhpcy5kZXJlZ2lzdGVyKHN0YXRlKTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gZm9yIGEgU3RhdGUgUmVnaXN0cnkgZXZlbnRzXG4gICAgICpcbiAgICAgKiBBZGRzIGEgY2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIHdoZW4gc3RhdGVzIGFyZSByZWdpc3RlcmVkIG9yIGRlcmVnaXN0ZXJlZCB3aXRoIHRoZSBTdGF0ZVJlZ2lzdHJ5LlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IGFsbFN0YXRlcyA9IHJlZ2lzdHJ5LmdldCgpO1xuICAgICAqXG4gICAgICogLy8gTGF0ZXIsIGludm9rZSBkZXJlZ2lzdGVyRm4oKSB0byByZW1vdmUgdGhlIGxpc3RlbmVyXG4gICAgICogbGV0IGRlcmVnaXN0ZXJGbiA9IHJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZCgoZXZlbnQsIHN0YXRlcykgPT4ge1xuICAgICAqICAgc3dpdGNoKGV2ZW50KSB7XG4gICAgICogICAgIGNhc2U6ICdyZWdpc3RlcmVkJzpcbiAgICAgKiAgICAgICBzdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiBhbGxTdGF0ZXMucHVzaChzdGF0ZSkpO1xuICAgICAqICAgICAgIGJyZWFrO1xuICAgICAqICAgICBjYXNlOiAnZGVyZWdpc3RlcmVkJzpcbiAgICAgKiAgICAgICBzdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiB7XG4gICAgICogICAgICAgICBsZXQgaWR4ID0gYWxsU3RhdGVzLmluZGV4T2Yoc3RhdGUpO1xuICAgICAqICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIGFsbFN0YXRlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgKiAgICAgICB9KTtcbiAgICAgKiAgICAgICBicmVhaztcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBhIGNhbGxiYWNrIGZ1bmN0aW9uIGludm9rZWQgd2hlbiB0aGUgcmVnaXN0ZXJlZCBzdGF0ZXMgY2hhbmdlcy5cbiAgICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzLCBgZXZlbnRgIGFuZCBgc3RhdGVgLlxuICAgICAqICAgICAgICBTZWUgW1tTdGF0ZVJlZ2lzdHJ5TGlzdGVuZXJdXVxuICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGRlcmVnaXN0ZXJzIHRoZSBsaXN0ZW5lclxuICAgICAqL1xuICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLm9uU3RhdGVzQ2hhbmdlZCA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJMaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHJlbW92ZUZyb20odGhpcy5saXN0ZW5lcnMpKGxpc3RlbmVyKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW1wbGljaXQgcm9vdCBzdGF0ZVxuICAgICAqXG4gICAgICogR2V0cyB0aGUgcm9vdCBvZiB0aGUgc3RhdGUgdHJlZS5cbiAgICAgKiBUaGUgcm9vdCBzdGF0ZSBpcyBpbXBsaWNpdGx5IGNyZWF0ZWQgYnkgVUktUm91dGVyLlxuICAgICAqIE5vdGU6IHRoaXMgcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIHJlcHJlc2VudGF0aW9uLCBub3QgYSBbW1N0YXRlRGVjbGFyYXRpb25dXVxuICAgICAqXG4gICAgICogQHJldHVybiB0aGUgcm9vdCBbW1N0YXRlT2JqZWN0XV1cbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5yb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcm9vdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSBzdGF0ZSB0byB0aGUgcmVnaXN0cnlcbiAgICAgKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9yIHF1ZXVlcyBpdCBmb3IgcmVnaXN0cmF0aW9uLlxuICAgICAqXG4gICAgICogTm90ZTogYSBzdGF0ZSB3aWxsIGJlIHF1ZXVlZCBpZiB0aGUgc3RhdGUncyBwYXJlbnQgaXNuJ3QgeWV0IHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGVEZWZpbml0aW9uIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBzdGF0ZSB0byByZWdpc3Rlci5cbiAgICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAgICAgKiAgICAgICAgICBJZiB0aGUgc3RhdGUgd2FzIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkLCB0aGVuIHRoZSBvYmplY3QgaXMgZnVsbHkgYnVpbHQgKFNlZTogW1tTdGF0ZUJ1aWxkZXJdXSkuXG4gICAgICogICAgICAgICAgSWYgdGhlIHN0YXRlIHdhcyBvbmx5IHF1ZXVlZCwgdGhlbiB0aGUgb2JqZWN0IGlzIG5vdCBmdWxseSBidWlsdC5cbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChzdGF0ZURlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVRdWV1ZS5yZWdpc3RlcihzdGF0ZURlZmluaXRpb24pO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5fZGVyZWdpc3RlclRyZWUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFsbCA9IHRoaXMuZ2V0KCkubWFwKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLiQkc3RhdGUoKTsgfSk7XG4gICAgICAgIHZhciBnZXRDaGlsZHJlbiA9IGZ1bmN0aW9uIChzdGF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBfY2hpbGRyZW4gPSBhbGwuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzdGF0ZXMuaW5kZXhPZihzLnBhcmVudCkgIT09IC0xOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfY2hpbGRyZW4ubGVuZ3RoID09PSAwID8gX2NoaWxkcmVuIDogX2NoaWxkcmVuLmNvbmNhdChnZXRDaGlsZHJlbihfY2hpbGRyZW4pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gZ2V0Q2hpbGRyZW4oW3N0YXRlXSk7XG4gICAgICAgIHZhciBkZXJlZ2lzdGVyZWQgPSBbc3RhdGVdLmNvbmNhdChjaGlsZHJlbikucmV2ZXJzZSgpO1xuICAgICAgICBkZXJlZ2lzdGVyZWQuZm9yRWFjaChmdW5jdGlvbiAoX3N0YXRlKSB7XG4gICAgICAgICAgICB2YXIgJHVyID0gX3RoaXMuX3JvdXRlci51cmxSb3V0ZXI7XG4gICAgICAgICAgICAvLyBSZW1vdmUgVVJMIHJ1bGVcbiAgICAgICAgICAgICR1clxuICAgICAgICAgICAgICAgIC5ydWxlcygpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihwcm9wRXEoJ3N0YXRlJywgX3N0YXRlKSlcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgkdXIucmVtb3ZlUnVsZS5iaW5kKCR1cikpO1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHN0YXRlIGZyb20gcmVnaXN0cnlcbiAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5zdGF0ZXNbX3N0YXRlLm5hbWVdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlcmVnaXN0ZXJlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBzdGF0ZSBmcm9tIHRoZSByZWdpc3RyeVxuICAgICAqXG4gICAgICogVGhpcyByZW1vdmVzIGEgc3RhdGUgZnJvbSB0aGUgcmVnaXN0cnkuXG4gICAgICogSWYgdGhlIHN0YXRlIGhhcyBjaGlsZHJlbiwgdGhleSBhcmUgYXJlIGFsc28gcmVtb3ZlZCBmcm9tIHRoZSByZWdpc3RyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSB0aGUgc3RhdGUncyBuYW1lIG9yIG9iamVjdCByZXByZXNlbnRhdGlvblxuICAgICAqIEByZXR1cm5zIHtTdGF0ZU9iamVjdFtdfSBhIGxpc3Qgb2YgcmVtb3ZlZCBzdGF0ZXNcbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lKSB7XG4gICAgICAgIHZhciBfc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmICghX3N0YXRlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgZGVyZWdpc3RlciBzdGF0ZTsgbm90IGZvdW5kOiBcIiArIHN0YXRlT3JOYW1lKTtcbiAgICAgICAgdmFyIGRlcmVnaXN0ZXJlZFN0YXRlcyA9IHRoaXMuX2RlcmVnaXN0ZXJUcmVlKF9zdGF0ZS4kJHN0YXRlKCkpO1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gbGlzdGVuZXIoJ2RlcmVnaXN0ZXJlZCcsIGRlcmVnaXN0ZXJlZFN0YXRlcy5tYXAoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuc2VsZjsgfSkpOyB9KTtcbiAgICAgICAgcmV0dXJuIGRlcmVnaXN0ZXJlZFN0YXRlcztcbiAgICB9O1xuICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgYmFzZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0YXRlcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBfdGhpcy5zdGF0ZXNbbmFtZV0uc2VsZjsgfSk7XG4gICAgICAgIHZhciBmb3VuZCA9IHRoaXMubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBiYXNlKTtcbiAgICAgICAgcmV0dXJuIChmb3VuZCAmJiBmb3VuZC5zZWxmKSB8fCBudWxsO1xuICAgIH07XG4gICAgU3RhdGVSZWdpc3RyeS5wcm90b3R5cGUuZGVjb3JhdG9yID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRlci5idWlsZGVyKG5hbWUsIGZ1bmMpO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRlUmVnaXN0cnk7XG59KCkpO1xuZXhwb3J0IHsgU3RhdGVSZWdpc3RyeSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVSZWdpc3RyeS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9va1BoYXNlIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZGVmYXVsdHMsIG5vb3AsIHNpbGVudFJlamVjdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgZm5Ub1N0cmluZywgbWF4TGVuZ3RoIH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgaXMsIHBhcnNlIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4uL2NvbW1vbi90cmFjZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgUmVqZWN0aW9uIH0gZnJvbSAnLi9yZWplY3RGYWN0b3J5JztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvdGFyZ2V0U3RhdGUnO1xudmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIGN1cnJlbnQ6IG5vb3AsXG4gICAgdHJhbnNpdGlvbjogbnVsbCxcbiAgICB0cmFjZURhdGE6IHt9LFxuICAgIGJpbmQ6IG51bGwsXG59O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBUcmFuc2l0aW9uSG9vayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUcmFuc2l0aW9uSG9vayh0cmFuc2l0aW9uLCBzdGF0ZUNvbnRleHQsIHJlZ2lzdGVyZWRIb29rLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgICAgIHRoaXMuc3RhdGVDb250ZXh0ID0gc3RhdGVDb250ZXh0O1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRIb29rID0gcmVnaXN0ZXJlZEhvb2s7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuaXNTdXBlcnNlZGVkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMudHlwZS5ob29rUGhhc2UgPT09IFRyYW5zaXRpb25Ib29rUGhhc2UuUlVOICYmICFfdGhpcy5vcHRpb25zLnRyYW5zaXRpb24uaXNBY3RpdmUoKTsgfTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpO1xuICAgICAgICB0aGlzLnR5cGUgPSByZWdpc3RlcmVkSG9vay5ldmVudFR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYWlucyB0b2dldGhlciBhbiBhcnJheSBvZiBUcmFuc2l0aW9uSG9va3MuXG4gICAgICpcbiAgICAgKiBHaXZlbiBhIGxpc3Qgb2YgW1tUcmFuc2l0aW9uSG9va11dIG9iamVjdHMsIGNoYWlucyB0aGVtIHRvZ2V0aGVyLlxuICAgICAqIEVhY2ggaG9vayBpcyBpbnZva2VkIGFmdGVyIHRoZSBwcmV2aW91cyBvbmUgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIGhvb2tzOiBUcmFuc2l0aW9uSG9va1tdID0gZ2V0SG9va3MoKTtcbiAgICAgKiBsZXQgcHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gVHJhbnNpdGlvbkhvb2suY2hhaW4oaG9va3MpO1xuICAgICAqXG4gICAgICogcHJvbWlzZS50aGVuKGhhbmRsZVN1Y2Nlc3MsIGhhbmRsZUVycm9yKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBob29rcyB0aGUgbGlzdCBvZiBob29rcyB0byBjaGFpbiB0b2dldGhlclxuICAgICAqIEBwYXJhbSB3YWl0Rm9yIGlmIHByb3ZpZGVkLCB0aGUgY2hhaW4gaXMgYC50aGVuKClgJ2VkIG9mZiB0aGlzIHByb21pc2VcbiAgICAgKiBAcmV0dXJucyBhIGBQcm9taXNlYCBmb3Igc2VxdWVudGlhbGx5IGludm9raW5nIHRoZSBob29rcyAoaW4gb3JkZXIpXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2suY2hhaW4gPSBmdW5jdGlvbiAoaG9va3MsIHdhaXRGb3IpIHtcbiAgICAgICAgLy8gQ2hhaW4gdGhlIG5leHQgaG9vayBvZmYgdGhlIHByZXZpb3VzXG4gICAgICAgIHZhciBjcmVhdGVIb29rQ2hhaW5SID0gZnVuY3Rpb24gKHByZXYsIG5leHRIb29rKSB7IHJldHVybiBwcmV2LnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV4dEhvb2suaW52b2tlSG9vaygpOyB9KTsgfTtcbiAgICAgICAgcmV0dXJuIGhvb2tzLnJlZHVjZShjcmVhdGVIb29rQ2hhaW5SLCB3YWl0Rm9yIHx8IHNlcnZpY2VzLiRxLndoZW4oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnZva2VzIGFsbCB0aGUgcHJvdmlkZWQgVHJhbnNpdGlvbkhvb2tzLCBpbiBvcmRlci5cbiAgICAgKiBFYWNoIGhvb2sncyByZXR1cm4gdmFsdWUgaXMgY2hlY2tlZC5cbiAgICAgKiBJZiBhbnkgaG9vayByZXR1cm5zIGEgcHJvbWlzZSwgdGhlbiB0aGUgcmVzdCBvZiB0aGUgaG9va3MgYXJlIGNoYWluZWQgb2ZmIHRoYXQgcHJvbWlzZSwgYW5kIHRoZSBwcm9taXNlIGlzIHJldHVybmVkLlxuICAgICAqIElmIG5vIGhvb2sgcmV0dXJucyBhIHByb21pc2UsIHRoZW4gYWxsIGhvb2tzIGFyZSBwcm9jZXNzZWQgc3luY2hyb25vdXNseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBob29rcyB0aGUgbGlzdCBvZiBUcmFuc2l0aW9uSG9va3MgdG8gaW52b2tlXG4gICAgICogQHBhcmFtIGRvbmVDYWxsYmFjayBhIGNhbGxiYWNrIHRoYXQgaXMgaW52b2tlZCBhZnRlciBhbGwgdGhlIGhvb2tzIGhhdmUgc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZFxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgYXN5bmMgcmVzdWx0LCBvciB0aGUgcmVzdWx0IG9mIHRoZSBjYWxsYmFja1xuICAgICAqL1xuICAgIFRyYW5zaXRpb25Ib29rLmludm9rZUhvb2tzID0gZnVuY3Rpb24gKGhvb2tzLCBkb25lQ2FsbGJhY2spIHtcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgaG9va3MubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgdmFyIGhvb2tSZXN1bHQgPSBob29rc1tpZHhdLmludm9rZUhvb2soKTtcbiAgICAgICAgICAgIGlmIChpc1Byb21pc2UoaG9va1Jlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nSG9va3MgPSBob29rcy5zbGljZShpZHggKyAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJhbnNpdGlvbkhvb2suY2hhaW4ocmVtYWluaW5nSG9va3MsIGhvb2tSZXN1bHQpLnRoZW4oZG9uZUNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9uZUNhbGxiYWNrKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSdW4gYWxsIFRyYW5zaXRpb25Ib29rcywgaWdub3JpbmcgdGhlaXIgcmV0dXJuIHZhbHVlLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb25Ib29rLnJ1bkFsbEhvb2tzID0gZnVuY3Rpb24gKGhvb2tzKSB7XG4gICAgICAgIGhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIGhvb2suaW52b2tlSG9vaygpOyB9KTtcbiAgICB9O1xuICAgIFRyYW5zaXRpb25Ib29rLnByb3RvdHlwZS5sb2dFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVNlcnZpY2UuZGVmYXVsdEVycm9ySGFuZGxlcigpKGVycik7XG4gICAgfTtcbiAgICBUcmFuc2l0aW9uSG9vay5wcm90b3R5cGUuaW52b2tlSG9vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGhvb2sgPSB0aGlzLnJlZ2lzdGVyZWRIb29rO1xuICAgICAgICBpZiAoaG9vay5fZGVyZWdpc3RlcmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgbm90Q3VycmVudCA9IHRoaXMuZ2V0Tm90Q3VycmVudFJlamVjdGlvbigpO1xuICAgICAgICBpZiAobm90Q3VycmVudClcbiAgICAgICAgICAgIHJldHVybiBub3RDdXJyZW50O1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdHJhY2UudHJhY2VIb29rSW52b2NhdGlvbih0aGlzLCB0aGlzLnRyYW5zaXRpb24sIG9wdGlvbnMpO1xuICAgICAgICB2YXIgaW52b2tlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBob29rLmNhbGxiYWNrLmNhbGwob3B0aW9ucy5iaW5kLCBfdGhpcy50cmFuc2l0aW9uLCBfdGhpcy5zdGF0ZUNvbnRleHQpOyB9O1xuICAgICAgICB2YXIgbm9ybWFsaXplRXJyID0gZnVuY3Rpb24gKGVycikgeyByZXR1cm4gUmVqZWN0aW9uLm5vcm1hbGl6ZShlcnIpLnRvUHJvbWlzZSgpOyB9O1xuICAgICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBob29rLmV2ZW50VHlwZS5nZXRFcnJvckhhbmRsZXIoX3RoaXMpKGVycik7IH07XG4gICAgICAgIHZhciBoYW5kbGVSZXN1bHQgPSBmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiBob29rLmV2ZW50VHlwZS5nZXRSZXN1bHRIYW5kbGVyKF90aGlzKShyZXN1bHQpOyB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGludm9rZUNhbGxiYWNrKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMudHlwZS5zeW5jaHJvbm91cyAmJiBpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuY2F0Y2gobm9ybWFsaXplRXJyKS50aGVuKGhhbmRsZVJlc3VsdCwgaGFuZGxlRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIElmIGNhbGxiYWNrIHRocm93cyAoc3luY2hyb25vdXNseSlcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihSZWplY3Rpb24ubm9ybWFsaXplKGVycikpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKGhvb2suaW52b2tlTGltaXQgJiYgKytob29rLmludm9rZUNvdW50ID49IGhvb2suaW52b2tlTGltaXQpIHtcbiAgICAgICAgICAgICAgICBob29rLmRlcmVnaXN0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaGFuZGxlcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGEgVHJhbnNpdGlvbiBIb29rLlxuICAgICAqXG4gICAgICogQSBob29rIGNhbiByZXR1cm4gZmFsc2UgKGNhbmNlbCksIGEgVGFyZ2V0U3RhdGUgKHJlZGlyZWN0KSxcbiAgICAgKiBvciBhIHByb21pc2UgKHdoaWNoIG1heSBsYXRlciByZXNvbHZlIHRvIGZhbHNlIG9yIGEgcmVkaXJlY3QpXG4gICAgICpcbiAgICAgKiBUaGlzIGFsc28gaGFuZGxlcyBcInRyYW5zaXRpb24gc3VwZXJzZWRlZFwiIC0tIHdoZW4gYSBuZXcgdHJhbnNpdGlvblxuICAgICAqIHdhcyBzdGFydGVkIHdoaWxlIHRoZSBob29rIHdhcyBzdGlsbCBydW5uaW5nXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLmhhbmRsZUhvb2tSZXN1bHQgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBub3RDdXJyZW50ID0gdGhpcy5nZXROb3RDdXJyZW50UmVqZWN0aW9uKCk7XG4gICAgICAgIGlmIChub3RDdXJyZW50KVxuICAgICAgICAgICAgcmV0dXJuIG5vdEN1cnJlbnQ7XG4gICAgICAgIC8vIEhvb2sgcmV0dXJuZWQgYSBwcm9taXNlXG4gICAgICAgIGlmIChpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHByb21pc2UsIHRoZW4gcmVwcm9jZXNzIHdpdGggdGhlIHJlc3VsdGluZyB2YWx1ZVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUhvb2tSZXN1bHQodmFsKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2UudHJhY2VIb29rUmVzdWx0KHJlc3VsdCwgdGhpcy50cmFuc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAvLyBIb29rIHJldHVybmVkIGZhbHNlXG4gICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAvLyBBYm9ydCB0aGlzIFRyYW5zaXRpb25cbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uYWJvcnRlZCgnSG9vayBhYm9ydGVkIHRyYW5zaXRpb24nKS50b1Byb21pc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNUYXJnZXRTdGF0ZSA9IGlzKFRhcmdldFN0YXRlKTtcbiAgICAgICAgLy8gaG9vayByZXR1cm5lZCBhIFRhcmdldFN0YXRlXG4gICAgICAgIGlmIChpc1RhcmdldFN0YXRlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIC8vIEhhbHQgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbiBhbmQgcmVkaXJlY3QgKGEgbmV3IFRyYW5zaXRpb24pIHRvIHRoZSBUYXJnZXRTdGF0ZS5cbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24ucmVkaXJlY3RlZChyZXN1bHQpLnRvUHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBSZWplY3Rpb24gcHJvbWlzZSBpZiB0aGUgdHJhbnNpdGlvbiBpcyBubyBsb25nZXIgY3VycmVudCBkdWVcbiAgICAgKiB0byBhIHN0b3BwZWQgcm91dGVyIChkaXNwb3NlZCksIG9yIGEgbmV3IHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWQgYW5kIHN1cGVyc2VkZWQgdGhpcyBvbmUuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLmdldE5vdEN1cnJlbnRSZWplY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnRyYW5zaXRpb24ucm91dGVyO1xuICAgICAgICAvLyBUaGUgcm91dGVyIGlzIHN0b3BwZWRcbiAgICAgICAgaWYgKHJvdXRlci5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uYWJvcnRlZChcIlVJUm91dGVyIGluc3RhbmNlICNcIiArIHJvdXRlci4kaWQgKyBcIiBoYXMgYmVlbiBzdG9wcGVkIChkaXNwb3NlZClcIikudG9Qcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbi5fYWJvcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5hYm9ydGVkKCkudG9Qcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyB0cmFuc2l0aW9uIGlzIG5vIGxvbmdlciBjdXJyZW50LlxuICAgICAgICAvLyBBbm90aGVyIHRyYW5zaXRpb24gc3RhcnRlZCB3aGlsZSB0aGlzIGhvb2sgd2FzIHN0aWxsIHJ1bm5pbmcuXG4gICAgICAgIGlmICh0aGlzLmlzU3VwZXJzZWRlZCgpKSB7XG4gICAgICAgICAgICAvLyBBYm9ydCB0aGlzIHRyYW5zaXRpb25cbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uc3VwZXJzZWRlZCh0aGlzLm9wdGlvbnMuY3VycmVudCgpKS50b1Byb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBvcHRpb25zID0gX2Eub3B0aW9ucywgcmVnaXN0ZXJlZEhvb2sgPSBfYS5yZWdpc3RlcmVkSG9vaztcbiAgICAgICAgdmFyIGV2ZW50ID0gcGFyc2UoJ3RyYWNlRGF0YS5ob29rVHlwZScpKG9wdGlvbnMpIHx8ICdpbnRlcm5hbCcsIGNvbnRleHQgPSBwYXJzZSgndHJhY2VEYXRhLmNvbnRleHQuc3RhdGUubmFtZScpKG9wdGlvbnMpIHx8IHBhcnNlKCd0cmFjZURhdGEuY29udGV4dCcpKG9wdGlvbnMpIHx8ICd1bmtub3duJywgbmFtZSA9IGZuVG9TdHJpbmcocmVnaXN0ZXJlZEhvb2suY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gZXZlbnQgKyBcIiBjb250ZXh0OiBcIiArIGNvbnRleHQgKyBcIiwgXCIgKyBtYXhMZW5ndGgoMjAwLCBuYW1lKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZXNlIEdldFJlc3VsdEhhbmRsZXIocykgYXJlIHVzZWQgYnkgW1tpbnZva2VIb29rXV0gYmVsb3dcbiAgICAgKiBFYWNoIEhvb2tUeXBlIGNob29zZXMgYSBHZXRSZXN1bHRIYW5kbGVyIChTZWU6IFtbVHJhbnNpdGlvblNlcnZpY2UuX2RlZmluZUNvcmVFdmVudHNdXSlcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxUID0gZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIGhvb2suaGFuZGxlSG9va1Jlc3VsdChyZXN1bHQpO1xuICAgIH07IH07XG4gICAgLyoqXG4gICAgICogSWYgdGhlIHJlc3VsdCBpcyBhIHByb21pc2UgcmVqZWN0aW9uLCBsb2cgaXQuXG4gICAgICogT3RoZXJ3aXNlLCBpZ25vcmUgdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uSG9vay5MT0dfUkVKRUNURURfUkVTVUxUID0gZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgcmVzdWx0LmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIGhvb2subG9nRXJyb3IoUmVqZWN0aW9uLm5vcm1hbGl6ZShlcnIpKTsgfSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTsgfTtcbiAgICAvKipcbiAgICAgKiBUaGVzZSBHZXRFcnJvckhhbmRsZXIocykgYXJlIHVzZWQgYnkgW1tpbnZva2VIb29rXV0gYmVsb3dcbiAgICAgKiBFYWNoIEhvb2tUeXBlIGNob29zZXMgYSBHZXRFcnJvckhhbmRsZXIgKFNlZTogW1tUcmFuc2l0aW9uU2VydmljZS5fZGVmaW5lQ29yZUV2ZW50c11dKVxuICAgICAqL1xuICAgIFRyYW5zaXRpb25Ib29rLkxPR19FUlJPUiA9IGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIGhvb2subG9nRXJyb3IoZXJyb3IpOyB9OyB9O1xuICAgIFRyYW5zaXRpb25Ib29rLlJFSkVDVF9FUlJPUiA9IGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIHNpbGVudFJlamVjdGlvbihlcnJvcik7IH07IH07XG4gICAgVHJhbnNpdGlvbkhvb2suVEhST1dfRVJST1IgPSBmdW5jdGlvbiAoaG9vaykgeyByZXR1cm4gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH07IH07XG4gICAgcmV0dXJuIFRyYW5zaXRpb25Ib29rO1xufSgpKTtcbmV4cG9ydCB7IFRyYW5zaXRpb25Ib29rIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2l0aW9uSG9vay5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCBHbG9iLCBleHRlbmQsIHJlbW92ZUZyb20sIHRhaWwsIHZhbHVlcywgaWRlbnRpdHksIG1hcE9iaiB9IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyAvLyBoYXMgb3IgaXMgdXNpbmdcblRyYW5zaXRpb25Ib29rU2NvcGUsIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiBzdGF0ZSBtYXRjaGVzIHRoZSBtYXRjaENyaXRlcmlhXG4gKlxuICogQGhpZGRlblxuICpcbiAqIEBwYXJhbSBzdGF0ZSBhIFN0YXRlIE9iamVjdCB0byB0ZXN0IGFnYWluc3RcbiAqIEBwYXJhbSBjcml0ZXJpb25cbiAqIC0gSWYgYSBzdHJpbmcsIG1hdGNoU3RhdGUgdXNlcyB0aGUgc3RyaW5nIGFzIGEgZ2xvYi1tYXRjaGVyIGFnYWluc3QgdGhlIHN0YXRlIG5hbWVcbiAqIC0gSWYgYW4gYXJyYXkgKG9mIHN0cmluZ3MpLCBtYXRjaFN0YXRlIHVzZXMgZWFjaCBzdHJpbmcgaW4gdGhlIGFycmF5IGFzIGEgZ2xvYi1tYXRjaGVycyBhZ2FpbnN0IHRoZSBzdGF0ZSBuYW1lXG4gKiAgIGFuZCByZXR1cm5zIGEgcG9zaXRpdmUgbWF0Y2ggaWYgYW55IG9mIHRoZSBnbG9icyBtYXRjaC5cbiAqIC0gSWYgYSBmdW5jdGlvbiwgbWF0Y2hTdGF0ZSBjYWxscyB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgc3RhdGUgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZnVuY3Rpb24ncyByZXN1bHQgaXMgdHJ1dGh5LlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaFN0YXRlKHN0YXRlLCBjcml0ZXJpb24pIHtcbiAgICB2YXIgdG9NYXRjaCA9IGlzU3RyaW5nKGNyaXRlcmlvbikgPyBbY3JpdGVyaW9uXSA6IGNyaXRlcmlvbjtcbiAgICBmdW5jdGlvbiBtYXRjaEdsb2JzKF9zdGF0ZSkge1xuICAgICAgICB2YXIgZ2xvYlN0cmluZ3MgPSB0b01hdGNoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdsb2JTdHJpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYiA9IG5ldyBHbG9iKGdsb2JTdHJpbmdzW2ldKTtcbiAgICAgICAgICAgIGlmICgoZ2xvYiAmJiBnbG9iLm1hdGNoZXMoX3N0YXRlLm5hbWUpKSB8fCAoIWdsb2IgJiYgZ2xvYlN0cmluZ3NbaV0gPT09IF9zdGF0ZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIG1hdGNoRm4gPSAoaXNGdW5jdGlvbih0b01hdGNoKSA/IHRvTWF0Y2ggOiBtYXRjaEdsb2JzKTtcbiAgICByZXR1cm4gISFtYXRjaEZuKHN0YXRlKTtcbn1cbi8qKlxuICogQGludGVybmFsYXBpXG4gKiBUaGUgcmVnaXN0cmF0aW9uIGRhdGEgZm9yIGEgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tcbiAqL1xudmFyIFJlZ2lzdGVyZWRIb29rID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlZ2lzdGVyZWRIb29rKHRyYW5TdmMsIGV2ZW50VHlwZSwgY2FsbGJhY2ssIG1hdGNoQ3JpdGVyaWEsIHJlbW92ZUhvb2tGcm9tUmVnaXN0cnksIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdGhpcy50cmFuU3ZjID0gdHJhblN2YztcbiAgICAgICAgdGhpcy5ldmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5tYXRjaENyaXRlcmlhID0gbWF0Y2hDcml0ZXJpYTtcbiAgICAgICAgdGhpcy5yZW1vdmVIb29rRnJvbVJlZ2lzdHJ5ID0gcmVtb3ZlSG9va0Zyb21SZWdpc3RyeTtcbiAgICAgICAgdGhpcy5pbnZva2VDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX2RlcmVnaXN0ZXJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gb3B0aW9ucy5wcmlvcml0eSB8fCAwO1xuICAgICAgICB0aGlzLmJpbmQgPSBvcHRpb25zLmJpbmQgfHwgbnVsbDtcbiAgICAgICAgdGhpcy5pbnZva2VMaW1pdCA9IG9wdGlvbnMuaW52b2tlTGltaXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1hdGNoaW5nIFtbUGF0aE5vZGVdXXNcbiAgICAgKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIFtbUGF0aE5vZGVdXXMsIGFuZCBhIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0sIHJldHVybnMgYW4gYXJyYXkgY29udGFpbmluZ1xuICAgICAqIHRoZSBbW1BhdGhOb2RlXV1zIHRoYXQgdGhlIGNyaXRlcmlhIG1hdGNoZXMsIG9yIGBudWxsYCBpZiB0aGVyZSB3ZXJlIG5vIG1hdGNoaW5nIG5vZGVzLlxuICAgICAqXG4gICAgICogUmV0dXJuaW5nIGBudWxsYCBpcyBzaWduaWZpY2FudCB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuIHRoZSBkZWZhdWx0XG4gICAgICogXCJtYXRjaC1hbGwgY3JpdGVyaW9uIHZhbHVlXCIgb2YgYHRydWVgIGNvbXBhcmVkIHRvIGEgYCgpID0+IHRydWVgIGZ1bmN0aW9uLFxuICAgICAqIHdoZW4gdGhlIG5vZGVzIGlzIGFuIGVtcHR5IGFycmF5LlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c2VmdWwgdG8gYWxsb3cgYSB0cmFuc2l0aW9uIG1hdGNoIGNyaXRlcmlhIG9mIGBlbnRlcmluZzogdHJ1ZWBcbiAgICAgKiB0byBzdGlsbCBtYXRjaCBhIHRyYW5zaXRpb24sIGV2ZW4gd2hlbiBgZW50ZXJpbmcgPT09IFtdYC4gIENvbnRyYXN0IHRoYXRcbiAgICAgKiB3aXRoIGBlbnRlcmluZzogKHN0YXRlKSA9PiB0cnVlYCB3aGljaCBvbmx5IG1hdGNoZXMgd2hlbiBhIHN0YXRlIGlzIGFjdHVhbGx5XG4gICAgICogYmVpbmcgZW50ZXJlZC5cbiAgICAgKi9cbiAgICBSZWdpc3RlcmVkSG9vay5wcm90b3R5cGUuX21hdGNoaW5nTm9kZXMgPSBmdW5jdGlvbiAobm9kZXMsIGNyaXRlcmlvbikge1xuICAgICAgICBpZiAoY3JpdGVyaW9uID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgICAgICB2YXIgbWF0Y2hpbmcgPSBub2Rlcy5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG1hdGNoU3RhdGUobm9kZS5zdGF0ZSwgY3JpdGVyaW9uKTsgfSk7XG4gICAgICAgIHJldHVybiBtYXRjaGluZy5sZW5ndGggPyBtYXRjaGluZyA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IG1hdGNoIGNyaXRlcmlhIChhbGwgYHRydWVgKVxuICAgICAqXG4gICAgICogUmV0dXJucyBhbiBvYmplY3Qgd2hpY2ggaGFzIGFsbCB0aGUgY3JpdGVyaWEgbWF0Y2ggcGF0aHMgYXMga2V5cyBhbmQgYHRydWVgIGFzIHZhbHVlcywgaS5lLjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgdG86IHRydWUsXG4gICAgICogICBmcm9tOiB0cnVlLFxuICAgICAqICAgZW50ZXJpbmc6IHRydWUsXG4gICAgICogICBleGl0aW5nOiB0cnVlLFxuICAgICAqICAgcmV0YWluZWQ6IHRydWUsXG4gICAgICogfVxuICAgICAqL1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5fZ2V0RGVmYXVsdE1hdGNoQ3JpdGVyaWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXBPYmoodGhpcy50cmFuU3ZjLl9wbHVnaW5hcGkuX2dldFBhdGhUeXBlcygpLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgbWF0Y2hpbmcgbm9kZXMgYXMgW1tJTWF0Y2hpbmdOb2Rlc11dXG4gICAgICpcbiAgICAgKiBDcmVhdGUgYSBJTWF0Y2hpbmdOb2RlcyBvYmplY3QgZnJvbSB0aGUgVHJhbnNpdGlvbkhvb2tUeXBlcyB0aGF0IGlzIHJvdWdobHkgZXF1aXZhbGVudCB0bzpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IG1hdGNoZXM6IElNYXRjaGluZ05vZGVzID0ge1xuICAgICAqICAgdG86ICAgICAgIF9tYXRjaGluZ05vZGVzKFt0YWlsKHRyZWVDaGFuZ2VzLnRvKV0sICAgbWMudG8pLFxuICAgICAqICAgZnJvbTogICAgIF9tYXRjaGluZ05vZGVzKFt0YWlsKHRyZWVDaGFuZ2VzLmZyb20pXSwgbWMuZnJvbSksXG4gICAgICogICBleGl0aW5nOiAgX21hdGNoaW5nTm9kZXModHJlZUNoYW5nZXMuZXhpdGluZywgICAgICBtYy5leGl0aW5nKSxcbiAgICAgKiAgIHJldGFpbmVkOiBfbWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcy5yZXRhaW5lZCwgICAgIG1jLnJldGFpbmVkKSxcbiAgICAgKiAgIGVudGVyaW5nOiBfbWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcy5lbnRlcmluZywgICAgIG1jLmVudGVyaW5nKSxcbiAgICAgKiB9O1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5fZ2V0TWF0Y2hpbmdOb2RlcyA9IGZ1bmN0aW9uICh0cmVlQ2hhbmdlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY3JpdGVyaWEgPSBleHRlbmQodGhpcy5fZ2V0RGVmYXVsdE1hdGNoQ3JpdGVyaWEoKSwgdGhpcy5tYXRjaENyaXRlcmlhKTtcbiAgICAgICAgdmFyIHBhdGhzID0gdmFsdWVzKHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSk7XG4gICAgICAgIHJldHVybiBwYXRocy5yZWR1Y2UoZnVuY3Rpb24gKG1uLCBwYXRodHlwZSkge1xuICAgICAgICAgICAgLy8gU1RBVEUgc2NvcGUgY3JpdGVyaWEgbWF0Y2hlcyBhZ2FpbnN0IGV2ZXJ5IG5vZGUgaW4gdGhlIHBhdGguXG4gICAgICAgICAgICAvLyBUUkFOU0lUSU9OIHNjb3BlIGNyaXRlcmlhIG1hdGNoZXMgYWdhaW5zdCBvbmx5IHRoZSBsYXN0IG5vZGUgaW4gdGhlIHBhdGhcbiAgICAgICAgICAgIHZhciBpc1N0YXRlSG9vayA9IHBhdGh0eXBlLnNjb3BlID09PSBUcmFuc2l0aW9uSG9va1Njb3BlLlNUQVRFO1xuICAgICAgICAgICAgdmFyIHBhdGggPSB0cmVlQ2hhbmdlc1twYXRodHlwZS5uYW1lXSB8fCBbXTtcbiAgICAgICAgICAgIHZhciBub2RlcyA9IGlzU3RhdGVIb29rID8gcGF0aCA6IFt0YWlsKHBhdGgpXTtcbiAgICAgICAgICAgIG1uW3BhdGh0eXBlLm5hbWVdID0gX3RoaXMuX21hdGNoaW5nTm9kZXMobm9kZXMsIGNyaXRlcmlhW3BhdGh0eXBlLm5hbWVdKTtcbiAgICAgICAgICAgIHJldHVybiBtbjtcbiAgICAgICAgfSwge30pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGhvb2sncyBbW21hdGNoQ3JpdGVyaWFdXSBtYXRjaCB0aGUgZ2l2ZW4gW1tUcmVlQ2hhbmdlc11dXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbiBJTWF0Y2hpbmdOb2RlcyBvYmplY3QsIG9yIG51bGwuIElmIGFuIElNYXRjaGluZ05vZGVzIG9iamVjdCBpcyByZXR1cm5lZCwgaXRzIHZhbHVlc1xuICAgICAqIGFyZSB0aGUgbWF0Y2hpbmcgW1tQYXRoTm9kZV1dcyBmb3IgZWFjaCBbW0hvb2tNYXRjaENyaXRlcmlvbl1dICh0bywgZnJvbSwgZXhpdGluZywgcmV0YWluZWQsIGVudGVyaW5nKVxuICAgICAqL1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKHRyZWVDaGFuZ2VzKSB7XG4gICAgICAgIHZhciBtYXRjaGVzID0gdGhpcy5fZ2V0TWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcyk7XG4gICAgICAgIC8vIENoZWNrIGlmIGFsbCB0aGUgY3JpdGVyaWEgbWF0Y2hlZCB0aGUgVHJlZUNoYW5nZXMgb2JqZWN0XG4gICAgICAgIHZhciBhbGxNYXRjaGVkID0gdmFsdWVzKG1hdGNoZXMpLmV2ZXJ5KGlkZW50aXR5KTtcbiAgICAgICAgcmV0dXJuIGFsbE1hdGNoZWQgPyBtYXRjaGVzIDogbnVsbDtcbiAgICB9O1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbW92ZUhvb2tGcm9tUmVnaXN0cnkodGhpcyk7XG4gICAgICAgIHRoaXMuX2RlcmVnaXN0ZXJlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gUmVnaXN0ZXJlZEhvb2s7XG59KCkpO1xuZXhwb3J0IHsgUmVnaXN0ZXJlZEhvb2sgfTtcbi8qKiBAaGlkZGVuIFJldHVybiBhIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBvZiB0aGUgcmVxdWVzdGVkIHR5cGUuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUV2ZW50KHJlZ2lzdHJ5LCB0cmFuc2l0aW9uU2VydmljZSwgZXZlbnRUeXBlKSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBvYmplY3Qgd2hpY2ggaG9sZHMgdGhlIHJlZ2lzdGVyZWQgdHJhbnNpdGlvbiBob29rcy5cbiAgICB2YXIgX3JlZ2lzdGVyZWRIb29rcyA9IChyZWdpc3RyeS5fcmVnaXN0ZXJlZEhvb2tzID0gcmVnaXN0cnkuX3JlZ2lzdGVyZWRIb29rcyB8fCB7fSk7XG4gICAgdmFyIGhvb2tzID0gKF9yZWdpc3RlcmVkSG9va3NbZXZlbnRUeXBlLm5hbWVdID0gW10pO1xuICAgIHZhciByZW1vdmVIb29rRm4gPSByZW1vdmVGcm9tKGhvb2tzKTtcbiAgICAvLyBDcmVhdGUgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb24gb24gdGhlIElIb29rUmVnaXN0cnkgZm9yIHRoZSBldmVudFxuICAgIHJlZ2lzdHJ5W2V2ZW50VHlwZS5uYW1lXSA9IGhvb2tSZWdpc3RyYXRpb25GbjtcbiAgICBmdW5jdGlvbiBob29rUmVnaXN0cmF0aW9uRm4obWF0Y2hPYmplY3QsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciByZWdpc3RlcmVkSG9vayA9IG5ldyBSZWdpc3RlcmVkSG9vayh0cmFuc2l0aW9uU2VydmljZSwgZXZlbnRUeXBlLCBjYWxsYmFjaywgbWF0Y2hPYmplY3QsIHJlbW92ZUhvb2tGbiwgb3B0aW9ucyk7XG4gICAgICAgIGhvb2tzLnB1c2gocmVnaXN0ZXJlZEhvb2spO1xuICAgICAgICByZXR1cm4gcmVnaXN0ZXJlZEhvb2suZGVyZWdpc3Rlci5iaW5kKHJlZ2lzdGVyZWRIb29rKTtcbiAgICB9XG4gICAgcmV0dXJuIGhvb2tSZWdpc3RyYXRpb25Gbjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvb2tSZWdpc3RyeS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgYXNzZXJ0UHJlZGljYXRlLCB1bm5lc3RSLCBpZGVudGl0eSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFRyYW5zaXRpb25Ib29rUGhhc2UsIFRyYW5zaXRpb25Ib29rU2NvcGUsIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2sgfSBmcm9tICcuL3RyYW5zaXRpb25Ib29rJztcbi8qKlxuICogVGhpcyBjbGFzcyByZXR1cm5zIGFwcGxpY2FibGUgVHJhbnNpdGlvbkhvb2tzIGZvciBhIHNwZWNpZmljIFRyYW5zaXRpb24gaW5zdGFuY2UuXG4gKlxuICogSG9va3MgKFtbUmVnaXN0ZXJlZEhvb2tdXSkgbWF5IGJlIHJlZ2lzdGVyZWQgZ2xvYmFsbHksIGUuZy4sICR0cmFuc2l0aW9ucy5vbkVudGVyKC4uLiksIG9yIGxvY2FsbHksIGUuZy5cbiAqIG15VHJhbnNpdGlvbi5vbkVudGVyKC4uLikuICBUaGUgSG9va0J1aWxkZXIgZmluZHMgbWF0Y2hpbmcgUmVnaXN0ZXJlZEhvb2tzICh3aGVyZSB0aGUgbWF0Y2ggY3JpdGVyaWEgaXNcbiAqIGRldGVybWluZWQgYnkgdGhlIHR5cGUgb2YgaG9vaylcbiAqXG4gKiBUaGUgSG9va0J1aWxkZXIgYWxzbyBjb252ZXJ0cyBSZWdpc3RlcmVkSG9va3Mgb2JqZWN0cyB0byBUcmFuc2l0aW9uSG9vayBvYmplY3RzLCB3aGljaCBhcmUgdXNlZCB0byBydW4gYSBUcmFuc2l0aW9uLlxuICpcbiAqIFRoZSBIb29rQnVpbGRlciBjb25zdHJ1Y3RvciBpcyBnaXZlbiB0aGUgJHRyYW5zaXRpb25zIHNlcnZpY2UgYW5kIGEgVHJhbnNpdGlvbiBpbnN0YW5jZS4gIFRodXMsIGEgSG9va0J1aWxkZXJcbiAqIGluc3RhbmNlIG1heSBvbmx5IGJlIHVzZWQgZm9yIG9uZSBzcGVjaWZpYyBUcmFuc2l0aW9uIG9iamVjdC4gKHNpZGUgbm90ZTogdGhlIF90cmVlQ2hhbmdlcyBhY2Nlc3NvciBpcyBwcml2YXRlXG4gKiBpbiB0aGUgVHJhbnNpdGlvbiBjbGFzcywgc28gd2UgbXVzdCBhbHNvIHByb3ZpZGUgdGhlIFRyYW5zaXRpb24ncyBfdHJlZUNoYW5nZXMpXG4gKlxuICovXG52YXIgSG9va0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSG9va0J1aWxkZXIodHJhbnNpdGlvbikge1xuICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuICAgIH1cbiAgICBIb29rQnVpbGRlci5wcm90b3R5cGUuYnVpbGRIb29rc0ZvclBoYXNlID0gZnVuY3Rpb24gKHBoYXNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciAkdHJhbnNpdGlvbnMgPSB0aGlzLnRyYW5zaXRpb24ucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xuICAgICAgICByZXR1cm4gJHRyYW5zaXRpb25zLl9wbHVnaW5hcGlcbiAgICAgICAgICAgIC5fZ2V0RXZlbnRzKHBoYXNlKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gX3RoaXMuYnVpbGRIb29rcyh0eXBlKTsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAuZmlsdGVyKGlkZW50aXR5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgbmV3bHkgYnVpbHQgVHJhbnNpdGlvbkhvb2sgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIC0gRmluZHMgYWxsIFJlZ2lzdGVyZWRIb29rcyByZWdpc3RlcmVkIGZvciB0aGUgZ2l2ZW4gYGhvb2tUeXBlYCB3aGljaCBtYXRjaGVkIHRoZSB0cmFuc2l0aW9uJ3MgW1tUcmVlQ2hhbmdlc11dLlxuICAgICAqIC0gRmluZHMgW1tQYXRoTm9kZV1dIChvciBgUGF0aE5vZGVbXWApIHRvIHVzZSBhcyB0aGUgVHJhbnNpdGlvbkhvb2sgY29udGV4dChzKVxuICAgICAqIC0gRm9yIGVhY2ggb2YgdGhlIFtbUGF0aE5vZGVdXXMsIGNyZWF0ZXMgYSBUcmFuc2l0aW9uSG9va1xuICAgICAqXG4gICAgICogQHBhcmFtIGhvb2tUeXBlIHRoZSB0eXBlIG9mIHRoZSBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbiwgZS5nLiwgJ29uRW50ZXInLCAnb25GaW5pc2gnLlxuICAgICAqL1xuICAgIEhvb2tCdWlsZGVyLnByb3RvdHlwZS5idWlsZEhvb2tzID0gZnVuY3Rpb24gKGhvb2tUeXBlKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcy50cmFuc2l0aW9uO1xuICAgICAgICB2YXIgdHJlZUNoYW5nZXMgPSB0cmFuc2l0aW9uLnRyZWVDaGFuZ2VzKCk7XG4gICAgICAgIC8vIEZpbmQgYWxsIHRoZSBtYXRjaGluZyByZWdpc3RlcmVkIGhvb2tzIGZvciBhIGdpdmVuIGhvb2sgdHlwZVxuICAgICAgICB2YXIgbWF0Y2hpbmdIb29rcyA9IHRoaXMuZ2V0TWF0Y2hpbmdIb29rcyhob29rVHlwZSwgdHJlZUNoYW5nZXMpO1xuICAgICAgICBpZiAoIW1hdGNoaW5nSG9va3MpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHZhciBiYXNlSG9va09wdGlvbnMgPSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLFxuICAgICAgICAgICAgY3VycmVudDogdHJhbnNpdGlvbi5vcHRpb25zKCkuY3VycmVudCxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG1ha2VUcmFuc2l0aW9uSG9va3MgPSBmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICAgICAgLy8gRmV0Y2ggdGhlIE5vZGVzIHRoYXQgY2F1c2VkIHRoaXMgaG9vayB0byBtYXRjaC5cbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gaG9vay5tYXRjaGVzKHRyZWVDaGFuZ2VzKTtcbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgUGF0aE5vZGVbXSB0aGF0IHdpbGwgYmUgdXNlZCBhcyBUcmFuc2l0aW9uSG9vayBjb250ZXh0IG9iamVjdHNcbiAgICAgICAgICAgIHZhciBtYXRjaGluZ05vZGVzID0gbWF0Y2hlc1tob29rVHlwZS5jcml0ZXJpYU1hdGNoUGF0aC5uYW1lXTtcbiAgICAgICAgICAgIC8vIFJldHVybiBhbiBhcnJheSBvZiBIb29rVHVwbGVzXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hpbmdOb2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX29wdGlvbnMgPSBleHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICBiaW5kOiBob29rLmJpbmQsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlRGF0YTogeyBob29rVHlwZTogaG9va1R5cGUubmFtZSwgY29udGV4dDogbm9kZSB9LFxuICAgICAgICAgICAgICAgIH0sIGJhc2VIb29rT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gaG9va1R5cGUuY3JpdGVyaWFNYXRjaFBhdGguc2NvcGUgPT09IFRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUgPyBub2RlLnN0YXRlLnNlbGYgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uSG9vayA9IG5ldyBUcmFuc2l0aW9uSG9vayh0cmFuc2l0aW9uLCBzdGF0ZSwgaG9vaywgX29wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGhvb2s6IGhvb2ssIG5vZGU6IG5vZGUsIHRyYW5zaXRpb25Ib29rOiB0cmFuc2l0aW9uSG9vayB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBtYXRjaGluZ0hvb2tzXG4gICAgICAgICAgICAubWFwKG1ha2VUcmFuc2l0aW9uSG9va3MpXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLnNvcnQodHVwbGVTb3J0KGhvb2tUeXBlLnJldmVyc2VTb3J0KSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHR1cGxlKSB7IHJldHVybiB0dXBsZS50cmFuc2l0aW9uSG9vazsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5kcyBhbGwgUmVnaXN0ZXJlZEhvb2tzIGZyb206XG4gICAgICogLSBUaGUgVHJhbnNpdGlvbiBvYmplY3QgaW5zdGFuY2UgaG9vayByZWdpc3RyeVxuICAgICAqIC0gVGhlIFRyYW5zaXRpb25TZXJ2aWNlICgkdHJhbnNpdGlvbnMpIGdsb2JhbCBob29rIHJlZ2lzdHJ5XG4gICAgICpcbiAgICAgKiB3aGljaCBtYXRjaGVkOlxuICAgICAqIC0gdGhlIGV2ZW50VHlwZVxuICAgICAqIC0gdGhlIG1hdGNoQ3JpdGVyaWEgKHRvLCBmcm9tLCBleGl0aW5nLCByZXRhaW5lZCwgZW50ZXJpbmcpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiBtYXRjaGVkIFtbUmVnaXN0ZXJlZEhvb2tdXXNcbiAgICAgKi9cbiAgICBIb29rQnVpbGRlci5wcm90b3R5cGUuZ2V0TWF0Y2hpbmdIb29rcyA9IGZ1bmN0aW9uIChob29rVHlwZSwgdHJlZUNoYW5nZXMpIHtcbiAgICAgICAgdmFyIGlzQ3JlYXRlID0gaG9va1R5cGUuaG9va1BoYXNlID09PSBUcmFuc2l0aW9uSG9va1BoYXNlLkNSRUFURTtcbiAgICAgICAgLy8gSW5zdGFuY2UgYW5kIEdsb2JhbCBob29rIHJlZ2lzdHJpZXNcbiAgICAgICAgdmFyICR0cmFuc2l0aW9ucyA9IHRoaXMudHJhbnNpdGlvbi5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2U7XG4gICAgICAgIHZhciByZWdpc3RyaWVzID0gaXNDcmVhdGUgPyBbJHRyYW5zaXRpb25zXSA6IFt0aGlzLnRyYW5zaXRpb24sICR0cmFuc2l0aW9uc107XG4gICAgICAgIHJldHVybiByZWdpc3RyaWVzXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZWcpIHsgcmV0dXJuIHJlZy5nZXRIb29rcyhob29rVHlwZS5uYW1lKTsgfSkgLy8gR2V0IG5hbWVkIGhvb2tzIGZyb20gcmVnaXN0cmllc1xuICAgICAgICAgICAgLmZpbHRlcihhc3NlcnRQcmVkaWNhdGUoaXNBcnJheSwgXCJicm9rZW4gZXZlbnQgbmFtZWQ6IFwiICsgaG9va1R5cGUubmFtZSkpIC8vIFNhbml0eSBjaGVja1xuICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSkgLy8gVW4tbmVzdCBSZWdpc3RlcmVkSG9va1tdW10gdG8gUmVnaXN0ZXJlZEhvb2tbXSBhcnJheVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaG9vaykgeyByZXR1cm4gaG9vay5tYXRjaGVzKHRyZWVDaGFuZ2VzKTsgfSk7IC8vIE9ubHkgdGhvc2Ugc2F0aXNmeWluZyBtYXRjaENyaXRlcmlhXG4gICAgfTtcbiAgICByZXR1cm4gSG9va0J1aWxkZXI7XG59KCkpO1xuZXhwb3J0IHsgSG9va0J1aWxkZXIgfTtcbi8qKlxuICogQSBmYWN0b3J5IGZvciBhIHNvcnQgZnVuY3Rpb24gZm9yIEhvb2tUdXBsZXMuXG4gKlxuICogVGhlIHNvcnQgZnVuY3Rpb24gZmlyc3QgY29tcGFyZXMgdGhlIFBhdGhOb2RlIGRlcHRoIChob3cgZGVlcCBpbiB0aGUgc3RhdGUgdHJlZSBhIG5vZGUgaXMpLCB0aGVuIGNvbXBhcmVzXG4gKiB0aGUgRXZlbnRIb29rIHByaW9yaXR5LlxuICpcbiAqIEBwYXJhbSByZXZlcnNlRGVwdGhTb3J0IGEgYm9vbGVhbiwgd2hlbiB0cnVlLCByZXZlcnNlcyB0aGUgc29ydCBvcmRlciBmb3IgdGhlIG5vZGUgZGVwdGhcbiAqIEByZXR1cm5zIGEgdHVwbGUgc29ydCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiB0dXBsZVNvcnQocmV2ZXJzZURlcHRoU29ydCkge1xuICAgIGlmIChyZXZlcnNlRGVwdGhTb3J0ID09PSB2b2lkIDApIHsgcmV2ZXJzZURlcHRoU29ydCA9IGZhbHNlOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVEZXB0aFRoZW5Qcmlvcml0eShsLCByKSB7XG4gICAgICAgIHZhciBmYWN0b3IgPSByZXZlcnNlRGVwdGhTb3J0ID8gLTEgOiAxO1xuICAgICAgICB2YXIgZGVwdGhEZWx0YSA9IChsLm5vZGUuc3RhdGUucGF0aC5sZW5ndGggLSByLm5vZGUuc3RhdGUucGF0aC5sZW5ndGgpICogZmFjdG9yO1xuICAgICAgICByZXR1cm4gZGVwdGhEZWx0YSAhPT0gMCA/IGRlcHRoRGVsdGEgOiByLmhvb2sucHJpb3JpdHkgLSBsLmhvb2sucHJpb3JpdHk7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvb2tCdWlsZGVyLmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdHJhbnNpdGlvblxuICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICcuLi9jb21tb24vc3RyaW5ncyc7XG5pbXBvcnQgeyBtYXAsIGZpbmQsIGV4dGVuZCwgbWVyZ2VSLCB0YWlsLCBvbWl0LCBhcnJheVR1cGxlcywgdW5uZXN0UiwgaWRlbnRpdHksIGFueVRydWVSIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc09iamVjdCwgaXNVbmRlZmluZWQgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBwcm9wLCBwcm9wRXEsIHZhbCwgbm90LCBpcyB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2tQaGFzZSwgfSBmcm9tICcuL2ludGVyZmFjZSc7IC8vIGhhcyBvciBpcyB1c2luZ1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2sgfSBmcm9tICcuL3RyYW5zaXRpb25Ib29rJztcbmltcG9ydCB7IG1hdGNoU3RhdGUsIG1ha2VFdmVudCB9IGZyb20gJy4vaG9va1JlZ2lzdHJ5JztcbmltcG9ydCB7IEhvb2tCdWlsZGVyIH0gZnJvbSAnLi9ob29rQnVpbGRlcic7XG5pbXBvcnQgeyBQYXRoVXRpbHMgfSBmcm9tICcuLi9wYXRoL3BhdGhVdGlscyc7XG5pbXBvcnQgeyBQYXJhbSB9IGZyb20gJy4uL3BhcmFtcy9wYXJhbSc7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcbmltcG9ydCB7IFJlc29sdmVDb250ZXh0IH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZlQ29udGV4dCc7XG5pbXBvcnQgeyBSZWplY3Rpb24gfSBmcm9tICcuL3JlamVjdEZhY3RvcnknO1xuaW1wb3J0IHsgZmxhdHRlblIsIHVuaXFSIH0gZnJvbSAnLi4vY29tbW9uJztcbi8qKiBAaGlkZGVuICovXG52YXIgc3RhdGVTZWxmID0gcHJvcCgnc2VsZicpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgdHJhbnNpdGlvbiBiZXR3ZWVuIHR3byBzdGF0ZXMuXG4gKlxuICogV2hlbiBuYXZpZ2F0aW5nIHRvIGEgc3RhdGUsIHdlIGFyZSB0cmFuc2l0aW9uaW5nICoqZnJvbSoqIHRoZSBjdXJyZW50IHN0YXRlICoqdG8qKiB0aGUgbmV3IHN0YXRlLlxuICpcbiAqIFRoaXMgb2JqZWN0IGNvbnRhaW5zIGFsbCBjb250ZXh0dWFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSB0by9mcm9tIHN0YXRlcywgcGFyYW1ldGVycywgcmVzb2x2ZXMuXG4gKiBJdCBoYXMgaW5mb3JtYXRpb24gYWJvdXQgYWxsIHN0YXRlcyBiZWluZyBlbnRlcmVkIGFuZCBleGl0ZWQgYXMgYSByZXN1bHQgb2YgdGhlIHRyYW5zaXRpb24uXG4gKi9cbnZhciBUcmFuc2l0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNpdGlvbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgdGFyZ2V0IHN0YXRlIGlzIG5vdCB2YWxpZCwgYW4gZXJyb3IgaXMgdGhyb3duLlxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZnJvbVBhdGggVGhlIHBhdGggb2YgW1tQYXRoTm9kZV1dcyBmcm9tIHdoaWNoIHRoZSB0cmFuc2l0aW9uIGlzIGxlYXZpbmcuICBUaGUgbGFzdCBub2RlIGluIHRoZSBgZnJvbVBhdGhgXG4gICAgICogICAgICAgIGVuY2Fwc3VsYXRlcyB0aGUgXCJmcm9tIHN0YXRlXCIuXG4gICAgICogQHBhcmFtIHRhcmdldFN0YXRlIFRoZSB0YXJnZXQgc3RhdGUgYW5kIHBhcmFtZXRlcnMgYmVpbmcgdHJhbnNpdGlvbmVkIHRvIChhbHNvLCB0aGUgdHJhbnNpdGlvbiBvcHRpb25zKVxuICAgICAqIEBwYXJhbSByb3V0ZXIgVGhlIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyYW5zaXRpb24oZnJvbVBhdGgsIHRhcmdldFN0YXRlLCByb3V0ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fZGVmZXJyZWQgPSBzZXJ2aWNlcy4kcS5kZWZlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBwcm9taXNlIGlzIHJlc29sdmVkIG9yIHJlamVjdGVkIGJhc2VkIG9uIHRoZSBvdXRjb21lIG9mIHRoZSBUcmFuc2l0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuIHRoZSB0cmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkXG4gICAgICAgICAqIFdoZW4gdGhlIHRyYW5zaXRpb24gaXMgdW5zdWNjZXNzZnVsLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIHRoZSBbW1JlamVjdGlvbl1dIG9yIGphdmFzY3JpcHQgZXJyb3JcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMuX2RlZmVycmVkLnByb21pc2U7XG4gICAgICAgIC8qKiBAaGlkZGVuIEhvbGRzIHRoZSBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbnMgc3VjaCBhcyB0aG9zZSBwYXNzZWQgdG8gVHJhbnNpdGlvbi5vblN0YXJ0KCkgKi9cbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJlZEhvb2tzID0ge307XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuX2hvb2tCdWlsZGVyID0gbmV3IEhvb2tCdWlsZGVyKHRoaXMpO1xuICAgICAgICAvKiogQ2hlY2tzIGlmIHRoaXMgdHJhbnNpdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlL3J1bm5pbmcuICovXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uID09PSBfdGhpczsgfTtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuX3RhcmdldFN0YXRlID0gdGFyZ2V0U3RhdGU7XG4gICAgICAgIGlmICghdGFyZ2V0U3RhdGUudmFsaWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRhcmdldFN0YXRlLmVycm9yKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGN1cnJlbnQoKSBpcyBhc3N1bWVkIHRvIGNvbWUgZnJvbSB0YXJnZXRTdGF0ZS5vcHRpb25zLCBidXQgcHJvdmlkZSBhIG5haXZlIGltcGxlbWVudGF0aW9uIG90aGVyd2lzZS5cbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IGV4dGVuZCh7IGN1cnJlbnQ6IHZhbCh0aGlzKSB9LCB0YXJnZXRTdGF0ZS5vcHRpb25zKCkpO1xuICAgICAgICB0aGlzLiRpZCA9IHJvdXRlci50cmFuc2l0aW9uU2VydmljZS5fdHJhbnNpdGlvbkNvdW50Kys7XG4gICAgICAgIHZhciB0b1BhdGggPSBQYXRoVXRpbHMuYnVpbGRUb1BhdGgoZnJvbVBhdGgsIHRhcmdldFN0YXRlKTtcbiAgICAgICAgdGhpcy5fdHJlZUNoYW5nZXMgPSBQYXRoVXRpbHMudHJlZUNoYW5nZXMoZnJvbVBhdGgsIHRvUGF0aCwgdGhpcy5fb3B0aW9ucy5yZWxvYWRTdGF0ZSk7XG4gICAgICAgIHRoaXMuY3JlYXRlVHJhbnNpdGlvbkhvb2tSZWdGbnMoKTtcbiAgICAgICAgdmFyIG9uQ3JlYXRlSG9va3MgPSB0aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UoVHJhbnNpdGlvbkhvb2tQaGFzZS5DUkVBVEUpO1xuICAgICAgICBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhvbkNyZWF0ZUhvb2tzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9KTtcbiAgICAgICAgdGhpcy5hcHBseVZpZXdDb25maWdzKHJvdXRlcik7XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25CZWZvcmUgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uU3RhcnQgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRXhpdCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25SZXRhaW4gPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRW50ZXIgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRmluaXNoID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vblN1Y2Nlc3MgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuXG4gICAgICogQ3JlYXRlcyB0aGUgdHJhbnNpdGlvbi1sZXZlbCBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbnNcbiAgICAgKiAod2hpY2ggY2FuIHRoZW4gYmUgdXNlZCB0byByZWdpc3RlciBob29rcylcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5jcmVhdGVUcmFuc2l0aW9uSG9va1JlZ0ZucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuX3BsdWdpbmFwaVxuICAgICAgICAgICAgLl9nZXRFdmVudHMoKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gdHlwZS5ob29rUGhhc2UgIT09IFRyYW5zaXRpb25Ib29rUGhhc2UuQ1JFQVRFOyB9KVxuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIG1ha2VFdmVudChfdGhpcywgX3RoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLCB0eXBlKTsgfSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZ2V0SG9va3MgPSBmdW5jdGlvbiAoaG9va05hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lzdGVyZWRIb29rc1tob29rTmFtZV07XG4gICAgfTtcbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5hcHBseVZpZXdDb25maWdzID0gZnVuY3Rpb24gKHJvdXRlcikge1xuICAgICAgICB2YXIgZW50ZXJpbmdTdGF0ZXMgPSB0aGlzLl90cmVlQ2hhbmdlcy5lbnRlcmluZy5tYXAoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuc3RhdGU7IH0pO1xuICAgICAgICBQYXRoVXRpbHMuYXBwbHlWaWV3Q29uZmlncyhyb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuJHZpZXcsIHRoaXMuX3RyZWVDaGFuZ2VzLnRvLCBlbnRlcmluZ1N0YXRlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRoZSBpbnRlcm5hbCBmcm9tIFtTdGF0ZV0gb2JqZWN0XG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuJGZyb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20pLnN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgdG8gW1N0YXRlXSBvYmplY3RcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS4kdG8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLnRvKS5zdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFwiZnJvbSBzdGF0ZVwiXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbWluZyAqZnJvbSouXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIChcImZyb20gc3RhdGVcIikuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZnJvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZyb20oKS5zZWxmO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgXCJ0byBzdGF0ZVwiXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGdvaW5nICp0byouXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIHRhcmdldCBzdGF0ZSAoXCJ0byBzdGF0ZVwiKS5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHRvKCkuc2VsZjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFRhcmdldCBTdGF0ZVxuICAgICAqXG4gICAgICogQSB0cmFuc2l0aW9uJ3MgW1tUYXJnZXRTdGF0ZV1dIGVuY2Fwc3VsYXRlcyB0aGUgW1t0b11dIHN0YXRlLCB0aGUgW1twYXJhbXNdXSwgYW5kIHRoZSBbW29wdGlvbnNdXSBhcyBhIHNpbmdsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgW1tUYXJnZXRTdGF0ZV1dIG9mIHRoaXMgVHJhbnNpdGlvblxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnRhcmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0U3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdHdvIHRyYW5zaXRpb25zIGFyZSBlcXVpdmFsZW50LlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbiAoY29tcGFyZSkge1xuICAgICAgICBpZiAoY29tcGFyZSBpbnN0YW5jZW9mIFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IEFsc28gY29tcGFyZSBwYXJhbWV0ZXJzXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pcyh7IHRvOiBjb21wYXJlLiR0bygpLm5hbWUsIGZyb206IGNvbXBhcmUuJGZyb20oKS5uYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhKChjb21wYXJlLnRvICYmICFtYXRjaFN0YXRlKHRoaXMuJHRvKCksIGNvbXBhcmUudG8pKSB8fFxuICAgICAgICAgICAgKGNvbXBhcmUuZnJvbSAmJiAhbWF0Y2hTdGF0ZSh0aGlzLiRmcm9tKCksIGNvbXBhcmUuZnJvbSkpKTtcbiAgICB9O1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnBhcmFtcyA9IGZ1bmN0aW9uIChwYXRobmFtZSkge1xuICAgICAgICBpZiAocGF0aG5hbWUgPT09IHZvaWQgMCkgeyBwYXRobmFtZSA9ICd0byc7IH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUodGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdLm1hcChwcm9wKCdwYXJhbVZhbHVlcycpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpO1xuICAgIH07XG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucGFyYW1zQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyb21QYXJhbXMgPSB0aGlzLnBhcmFtcygnZnJvbScpO1xuICAgICAgICB2YXIgdG9QYXJhbXMgPSB0aGlzLnBhcmFtcygndG8nKTtcbiAgICAgICAgLy8gQWxsIHRoZSBwYXJhbWV0ZXJzIGRlY2xhcmVkIG9uIGJvdGggdGhlIFwidG9cIiBhbmQgXCJmcm9tXCIgcGF0aHNcbiAgICAgICAgdmFyIGFsbFBhcmFtRGVzY3JpcHRvcnMgPSBbXVxuICAgICAgICAgICAgLmNvbmNhdCh0aGlzLl90cmVlQ2hhbmdlcy50bylcbiAgICAgICAgICAgIC5jb25jYXQodGhpcy5fdHJlZUNoYW5nZXMuZnJvbSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHBhdGhOb2RlKSB7IHJldHVybiBwYXRoTm9kZS5wYXJhbVNjaGVtYTsgfSlcbiAgICAgICAgICAgIC5yZWR1Y2UoZmxhdHRlblIsIFtdKVxuICAgICAgICAgICAgLnJlZHVjZSh1bmlxUiwgW10pO1xuICAgICAgICB2YXIgY2hhbmdlZFBhcmFtRGVzY3JpcHRvcnMgPSBQYXJhbS5jaGFuZ2VkKGFsbFBhcmFtRGVzY3JpcHRvcnMsIGZyb21QYXJhbXMsIHRvUGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIGNoYW5nZWRQYXJhbURlc2NyaXB0b3JzLnJlZHVjZShmdW5jdGlvbiAoY2hhbmdlZFZhbHVlcywgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgY2hhbmdlZFZhbHVlc1tkZXNjcmlwdG9yLmlkXSA9IHRvUGFyYW1zW2Rlc2NyaXB0b3IuaWRdO1xuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWRWYWx1ZXM7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBbW1VJSW5qZWN0b3JdXSBEZXBlbmRlbmN5IEluamVjdG9yXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgRGVwZW5kZW5jeSBJbmplY3RvciBmb3IgdGhlIFRyYW5zaXRpb24ncyB0YXJnZXQgc3RhdGUgKHRvIHN0YXRlKS5cbiAgICAgKiBUaGUgaW5qZWN0b3IgcHJvdmlkZXMgcmVzb2x2ZSB2YWx1ZXMgd2hpY2ggdGhlIHRhcmdldCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxuICAgICAqXG4gICAgICogVGhlIGBVSUluamVjdG9yYCBjYW4gYWxzbyBwcm92aWRlIHZhbHVlcyBmcm9tIHRoZSBuYXRpdmUgcm9vdC9nbG9iYWwgaW5qZWN0b3IgKG5nMS9uZzIpLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLm9uRW50ZXIoeyBlbnRlcmluZzogJ215U3RhdGUnIH0sIHRyYW5zID0+IHtcbiAgICAgKiAgIHZhciBteVJlc29sdmVWYWx1ZSA9IHRyYW5zLmluamVjdG9yKCkuZ2V0KCdteVJlc29sdmUnKTtcbiAgICAgKiAgIC8vIEluamVjdCBhIGdsb2JhbCBzZXJ2aWNlIGZyb20gdGhlIGdsb2JhbC9uYXRpdmUgaW5qZWN0b3IgKGlmIGl0IGV4aXN0cylcbiAgICAgKiAgIHZhciBNeVNlcnZpY2UgPSB0cmFucy5pbmplY3RvcigpLmdldCgnTXlTZXJ2aWNlJyk7XG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEluIHNvbWUgY2FzZXMgKHN1Y2ggYXMgYG9uQmVmb3JlYCksIHlvdSBtYXkgbmVlZCBhY2Nlc3MgdG8gc29tZSByZXNvbHZlIGRhdGEgYnV0IGl0IGhhcyBub3QgeWV0IGJlZW4gZmV0Y2hlZC5cbiAgICAgKiBZb3UgY2FuIHVzZSBbW1VJSW5qZWN0b3IuZ2V0QXN5bmNdXSB0byBnZXQgYSBwcm9taXNlIGZvciB0aGUgZGF0YS5cbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiAub25CZWZvcmUoe30sIHRyYW5zID0+IHtcbiAgICAgKiAgIHJldHVybiB0cmFucy5pbmplY3RvcigpLmdldEFzeW5jKCdteVJlc29sdmUnKS50aGVuKG15UmVzb2x2ZVZhbHVlID0+XG4gICAgICogICAgIHJldHVybiBteVJlc29sdmVWYWx1ZSAhPT0gJ0FCT1JUJztcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSWYgYSBgc3RhdGVgIGlzIHByb3ZpZGVkLCB0aGUgaW5qZWN0b3IgdGhhdCBpcyByZXR1cm5lZCB3aWxsIGJlIGxpbWl0ZWQgdG8gcmVzb2x2ZSB2YWx1ZXMgdGhhdCB0aGUgcHJvdmlkZWQgc3RhdGUgaGFzIGFjY2VzcyB0by5cbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgaWYgYm90aCBhIHBhcmVudCBzdGF0ZSBgZm9vYCBhbmQgYSBjaGlsZCBzdGF0ZSBgZm9vLmJhcmAgaGF2ZSBib3RoIGRlZmluZWQgYSByZXNvbHZlIHN1Y2ggYXMgYGRhdGFgLlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIC5vbkVudGVyKHsgdG86ICdmb28uYmFyJyB9LCB0cmFucyA9PiB7XG4gICAgICogICAvLyByZXR1cm5zIHJlc3VsdCBvZiBgZm9vYCBzdGF0ZSdzIGBteVJlc29sdmVgIHJlc29sdmVcbiAgICAgKiAgIC8vIGV2ZW4gdGhvdWdoIGBmb28uYmFyYCBhbHNvIGhhcyBhIGBteVJlc29sdmVgIHJlc29sdmVcbiAgICAgKiAgIHZhciBmb29EYXRhID0gdHJhbnMuaW5qZWN0b3IoJ2ZvbycpLmdldCgnbXlSZXNvbHZlJyk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJZiB5b3UgbmVlZCByZXNvbHZlIGRhdGEgZnJvbSB0aGUgZXhpdGluZyBzdGF0ZXMsIHBhc3MgYCdmcm9tJ2AgYXMgYHBhdGhOYW1lYC5cbiAgICAgKiBUaGUgcmVzb2x2ZSBkYXRhIGZyb20gdGhlIGBmcm9tYCBwYXRoIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLm9uRXhpdCh7IGV4aXRpbmc6ICdmb28uYmFyJyB9LCB0cmFucyA9PiB7XG4gICAgICogICAvLyBHZXRzIHRoZSByZXNvbHZlIHZhbHVlIG9mIGBteVJlc29sdmVgIGZyb20gdGhlIHN0YXRlIGJlaW5nIGV4aXRlZFxuICAgICAqICAgdmFyIGZvb0RhdGEgPSB0cmFucy5pbmplY3RvcihudWxsLCAnZnJvbScpLmdldCgnbXlSZXNvbHZlJyk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZSBMaW1pdHMgdGhlIHJlc29sdmVzIHByb3ZpZGVkIHRvIG9ubHkgdGhlIHJlc29sdmVzIHRoZSBwcm92aWRlZCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxuICAgICAqIEBwYXJhbSBwYXRoTmFtZSBEZWZhdWx0OiBgJ3RvJ2A6IENob29zZXMgdGhlIHBhdGggZm9yIHdoaWNoIHRvIGNyZWF0ZSB0aGUgaW5qZWN0b3IuIFVzZSB0aGlzIHRvIGFjY2VzcyByZXNvbHZlcyBmb3IgYGV4aXRpbmdgIHN0YXRlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgW1tVSUluamVjdG9yXV1cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5pbmplY3RvciA9IGZ1bmN0aW9uIChzdGF0ZSwgcGF0aE5hbWUpIHtcbiAgICAgICAgaWYgKHBhdGhOYW1lID09PSB2b2lkIDApIHsgcGF0aE5hbWUgPSAndG8nOyB9XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aE5hbWVdO1xuICAgICAgICBpZiAoc3RhdGUpXG4gICAgICAgICAgICBwYXRoID0gUGF0aFV0aWxzLnN1YlBhdGgocGF0aCwgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuc3RhdGUgPT09IHN0YXRlIHx8IG5vZGUuc3RhdGUubmFtZSA9PT0gc3RhdGU7IH0pO1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KHBhdGgpLmluamVjdG9yKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBhdmFpbGFibGUgcmVzb2x2ZSB0b2tlbnMgKGtleXMpXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIFtbaW5qZWN0b3JdXSB0byBpbnNwZWN0IHRoZSByZXNvbHZlIHZhbHVlc1xuICAgICAqIGF2YWlsYWJsZSB0byB0aGUgVHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgcmV0dXJucyBhbGwgdGhlIHRva2VucyBkZWZpbmVkIG9uIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0gYmxvY2tzLCBmb3IgdGhlIHN0YXRlc1xuICAgICAqIGluIHRoZSBUcmFuc2l0aW9uJ3MgW1tUcmVlQ2hhbmdlcy50b11dIHBhdGguXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogVGhpcyBleGFtcGxlIGxvZ3MgYWxsIHJlc29sdmUgdmFsdWVzXG4gICAgICogYGBganNcbiAgICAgKiBsZXQgdG9rZW5zID0gdHJhbnMuZ2V0UmVzb2x2ZVRva2VucygpO1xuICAgICAqIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IGNvbnNvbGUubG9nKHRva2VuICsgXCIgPSBcIiArIHRyYW5zLmluamVjdG9yKCkuZ2V0KHRva2VuKSkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIFRoaXMgZXhhbXBsZSBjcmVhdGVzIHByb21pc2VzIGZvciBlYWNoIHJlc29sdmUgdmFsdWUuXG4gICAgICogVGhpcyB0cmlnZ2VycyBmZXRjaGVzIG9mIHJlc29sdmVzIChpZiBhbnkgaGF2ZSBub3QgeWV0IGJlZW4gZmV0Y2hlZCkuXG4gICAgICogV2hlbiBhbGwgcHJvbWlzZXMgaGF2ZSBhbGwgc2V0dGxlZCwgaXQgbG9ncyB0aGUgcmVzb2x2ZSB2YWx1ZXMuXG4gICAgICogYGBganNcbiAgICAgKiBsZXQgdG9rZW5zID0gdHJhbnMuZ2V0UmVzb2x2ZVRva2VucygpO1xuICAgICAqIGxldCBwcm9taXNlID0gdG9rZW5zLm1hcCh0b2tlbiA9PiB0cmFucy5pbmplY3RvcigpLmdldEFzeW5jKHRva2VuKSk7XG4gICAgICogUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4odmFsdWVzID0+IGNvbnNvbGUubG9nKFwiUmVzb2x2ZWQgdmFsdWVzOiBcIiArIHZhbHVlcykpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogTm90ZTogQW5ndWxhciAxIHVzZXJzIHdob3VsZCB1c2UgYCRxLmFsbCgpYFxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhuYW1lIHJlc29sdmUgY29udGV4dCdzIHBhdGggbmFtZSAoZS5nLiwgYHRvYCBvciBgZnJvbWApXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiByZXNvbHZlIHRva2VucyAoa2V5cylcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5nZXRSZXNvbHZlVG9rZW5zID0gZnVuY3Rpb24gKHBhdGhuYW1lKSB7XG4gICAgICAgIGlmIChwYXRobmFtZSA9PT0gdm9pZCAwKSB7IHBhdGhuYW1lID0gJ3RvJzsgfVxuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhuYW1lXSkuZ2V0VG9rZW5zKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEeW5hbWljYWxseSBhZGRzIGEgbmV3IFtbUmVzb2x2YWJsZV1dIChpLmUuLCBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dKSB0byB0aGlzIHRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBBbGxvd3MgYSB0cmFuc2l0aW9uIGhvb2sgdG8gZHluYW1pY2FsbHkgYWRkIGEgUmVzb2x2YWJsZSB0byB0aGlzIFRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBVc2UgdGhlIFtbVHJhbnNpdGlvbi5pbmplY3Rvcl1dIHRvIHJldHJpZXZlIHRoZSByZXNvbHZlZCBkYXRhIGluIHN1YnNlcXVlbnQgaG9va3MgKFtbVUlJbmplY3Rvci5nZXRdXSkuXG4gICAgICpcbiAgICAgKiBJZiBhIGBzdGF0ZWAgYXJndW1lbnQgaXMgcHJvdmlkZWQsIHRoZSBSZXNvbHZhYmxlIGlzIHByb2Nlc3NlZCB3aGVuIHRoYXQgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAgICAgKiBJZiBubyBgc3RhdGVgIGlzIHByb3ZpZGVkIHRoZW4gdGhlIHJvb3Qgc3RhdGUgaXMgdXNlZC5cbiAgICAgKiBJZiB0aGUgZ2l2ZW4gYHN0YXRlYCBoYXMgYWxyZWFkeSBiZWVuIGVudGVyZWQsIHRoZSBSZXNvbHZhYmxlIGlzIHByb2Nlc3NlZCB3aGVuIGFueSBjaGlsZCBzdGF0ZSBpcyBlbnRlcmVkLlxuICAgICAqIElmIG5vIGNoaWxkIHN0YXRlcyB3aWxsIGJlIGVudGVyZWQsIHRoZSBSZXNvbHZhYmxlIGlzIHByb2Nlc3NlZCBkdXJpbmcgdGhlIGBvbkZpbmlzaGAgcGhhc2Ugb2YgdGhlIFRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYHN0YXRlYCBhcmd1bWVudCBhbHNvIHNjb3BlcyB0aGUgcmVzb2x2ZWQgZGF0YS5cbiAgICAgKiBUaGUgcmVzb2x2ZWQgZGF0YSBpcyBhdmFpbGFibGUgZnJvbSB0aGUgaW5qZWN0b3IgZm9yIHRoYXQgYHN0YXRlYCBhbmQgYW55IGNoaWxkcmVuIHN0YXRlcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCB0cmFuc2l0aW9uID0+IHtcbiAgICAgKiAgIHRyYW5zaXRpb24uYWRkUmVzb2x2YWJsZSh7XG4gICAgICogICAgIHRva2VuOiAnbXlSZXNvbHZlJyxcbiAgICAgKiAgICAgZGVwczogWydNeVNlcnZpY2UnXSxcbiAgICAgKiAgICAgcmVzb2x2ZUZuOiBteVNlcnZpY2UgPT4gbXlTZXJ2aWNlLmdldERhdGEoKVxuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzb2x2YWJsZSBhIFtbUmVzb2x2YWJsZUxpdGVyYWxdXSBvYmplY3QgKG9yIGEgW1tSZXNvbHZhYmxlXV0pXG4gICAgICogQHBhcmFtIHN0YXRlIHRoZSBzdGF0ZSBpbiB0aGUgXCJ0byBwYXRoXCIgd2hpY2ggc2hvdWxkIHJlY2VpdmUgdGhlIG5ldyByZXNvbHZlIChvdGhlcndpc2UsIHRoZSByb290IHN0YXRlKVxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmFkZFJlc29sdmFibGUgPSBmdW5jdGlvbiAocmVzb2x2YWJsZSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlID09PSB2b2lkIDApIHsgc3RhdGUgPSAnJzsgfVxuICAgICAgICByZXNvbHZhYmxlID0gaXMoUmVzb2x2YWJsZSkocmVzb2x2YWJsZSkgPyByZXNvbHZhYmxlIDogbmV3IFJlc29sdmFibGUocmVzb2x2YWJsZSk7XG4gICAgICAgIHZhciBzdGF0ZU5hbWUgPSB0eXBlb2Ygc3RhdGUgPT09ICdzdHJpbmcnID8gc3RhdGUgOiBzdGF0ZS5uYW1lO1xuICAgICAgICB2YXIgdG9wYXRoID0gdGhpcy5fdHJlZUNoYW5nZXMudG87XG4gICAgICAgIHZhciB0YXJnZXROb2RlID0gZmluZCh0b3BhdGgsIGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnN0YXRlLm5hbWUgPT09IHN0YXRlTmFtZTsgfSk7XG4gICAgICAgIHZhciByZXNvbHZlQ29udGV4dCA9IG5ldyBSZXNvbHZlQ29udGV4dCh0b3BhdGgpO1xuICAgICAgICByZXNvbHZlQ29udGV4dC5hZGRSZXNvbHZhYmxlcyhbcmVzb2x2YWJsZV0sIHRhcmdldE5vZGUuc3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdHJhbnNpdGlvbiBmcm9tIHdoaWNoIHRoaXMgdHJhbnNpdGlvbiB3YXMgcmVkaXJlY3RlZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBjdXJyZW50IHRyYW5zaXRpb24gaXMgYSByZWRpcmVjdCwgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgdHJhbnNpdGlvbiB0aGF0IHdhcyByZWRpcmVjdGVkLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IHRyYW5zaXRpb25BID0gJHN0YXRlLmdvKCdBJykudHJhbnNpdGlvblxuICAgICAqIHRyYW5zaXRpb25BLm9uU3RhcnQoe30sICgpID0+ICRzdGF0ZS50YXJnZXQoJ0InKSk7XG4gICAgICogJHRyYW5zaXRpb25zLm9uU3VjY2Vzcyh7IHRvOiAnQicgfSwgKHRyYW5zKSA9PiB7XG4gICAgICogICB0cmFucy50bygpLm5hbWUgPT09ICdCJzsgLy8gdHJ1ZVxuICAgICAqICAgdHJhbnMucmVkaXJlY3RlZEZyb20oKSA9PT0gdHJhbnNpdGlvbkE7IC8vIHRydWVcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwcmV2aW91cyBUcmFuc2l0aW9uLCBvciBudWxsIGlmIHRoaXMgVHJhbnNpdGlvbiBpcyBub3QgdGhlIHJlc3VsdCBvZiBhIHJlZGlyZWN0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucmVkaXJlY3RlZEZyb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zLnJlZGlyZWN0ZWRGcm9tIHx8IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIGluIGEgcmVkaXJlY3QgY2hhaW5cbiAgICAgKlxuICAgICAqIEEgdHJhbnNpdGlvbiBtaWdodCBiZWxvbmcgdG8gYSBsb25nIGNoYWluIG9mIG11bHRpcGxlIHJlZGlyZWN0cy5cbiAgICAgKiBUaGlzIG1ldGhvZCB3YWxrcyB0aGUgW1tyZWRpcmVjdGVkRnJvbV1dIGNoYWluIGJhY2sgdG8gdGhlIG9yaWdpbmFsIChmaXJzdCkgdHJhbnNpdGlvbiBpbiB0aGUgY2hhaW4uXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiAvLyBzdGF0ZXNcbiAgICAgKiByZWdpc3RyeS5yZWdpc3Rlcih7IG5hbWU6ICdBJywgcmVkaXJlY3RUbzogJ0InIH0pO1xuICAgICAqIHJlZ2lzdHJ5LnJlZ2lzdGVyKHsgbmFtZTogJ0InLCByZWRpcmVjdFRvOiAnQycgfSk7XG4gICAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnQycsIHJlZGlyZWN0VG86ICdEJyB9KTtcbiAgICAgKiByZWdpc3RyeS5yZWdpc3Rlcih7IG5hbWU6ICdEJyB9KTtcbiAgICAgKlxuICAgICAqIGxldCB0cmFuc2l0aW9uQSA9ICRzdGF0ZS5nbygnQScpLnRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3MoeyB0bzogJ0QnIH0sICh0cmFucykgPT4ge1xuICAgICAqICAgdHJhbnMudG8oKS5uYW1lID09PSAnRCc7IC8vIHRydWVcbiAgICAgKiAgIHRyYW5zLnJlZGlyZWN0ZWRGcm9tKCkudG8oKS5uYW1lID09PSAnQyc7IC8vIHRydWVcbiAgICAgKiAgIHRyYW5zLm9yaWdpbmFsVHJhbnNpdGlvbigpID09PSB0cmFuc2l0aW9uQTsgLy8gdHJ1ZVxuICAgICAqICAgdHJhbnMub3JpZ2luYWxUcmFuc2l0aW9uKCkudG8oKS5uYW1lID09PSAnQSc7IC8vIHRydWVcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBvcmlnaW5hbCBUcmFuc2l0aW9uIHRoYXQgc3RhcnRlZCBhIHJlZGlyZWN0IGNoYWluXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub3JpZ2luYWxUcmFuc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmYgPSB0aGlzLnJlZGlyZWN0ZWRGcm9tKCk7XG4gICAgICAgIHJldHVybiAocmYgJiYgcmYub3JpZ2luYWxUcmFuc2l0aW9uKCkpIHx8IHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRyYW5zaXRpb24gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybnMgdGhlIG9wdGlvbnMgZm9yIHRoaXMgVHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXRlcyBiZWluZyBlbnRlcmVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgd2lsbCBiZSBlbnRlcmVkIGR1cmluZyB0aGlzIHRyYW5zaXRpb24uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZW50ZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXAodGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmcsIHByb3AoJ3N0YXRlJykpLm1hcChzdGF0ZVNlbGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhdGVzIGJlaW5nIGV4aXRlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIHN0YXRlcyB0aGF0IHdpbGwgYmUgZXhpdGVkIGR1cmluZyB0aGlzIHRyYW5zaXRpb24uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZXhpdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG1hcCh0aGlzLl90cmVlQ2hhbmdlcy5leGl0aW5nLCBwcm9wKCdzdGF0ZScpKVxuICAgICAgICAgICAgLm1hcChzdGF0ZVNlbGYpXG4gICAgICAgICAgICAucmV2ZXJzZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhdGVzIGJlaW5nIHJldGFpbmVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgYXJlIGFscmVhZHkgZW50ZXJlZCBmcm9tIGEgcHJldmlvdXMgVHJhbnNpdGlvbiwgdGhhdCB3aWxsIG5vdCBiZVxuICAgICAqICAgIGV4aXRlZCBkdXJpbmcgdGhpcyBUcmFuc2l0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucmV0YWluZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXAodGhpcy5fdHJlZUNoYW5nZXMucmV0YWluZWQsIHByb3AoJ3N0YXRlJykpLm1hcChzdGF0ZVNlbGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBbW1ZpZXdDb25maWddXXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgVHJhbnNpdGlvblxuICAgICAqXG4gICAgICogRWFjaCBzdGF0ZSBjYW4gZGVmaW5lIG9uZSBvciBtb3JlIHZpZXdzICh0ZW1wbGF0ZS9jb250cm9sbGVyKSwgd2hpY2ggYXJlIGVuY2Fwc3VsYXRlZCBhcyBgVmlld0NvbmZpZ2Agb2JqZWN0cy5cbiAgICAgKiBUaGlzIG1ldGhvZCBmZXRjaGVzIHRoZSBgVmlld0NvbmZpZ3NgIGZvciBhIGdpdmVuIHBhdGggaW4gdGhlIFRyYW5zaXRpb24gKGUuZy4sIFwidG9cIiBvciBcImVudGVyaW5nXCIpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhuYW1lIHRoZSBuYW1lIG9mIHRoZSBwYXRoIHRvIGZldGNoIHZpZXdzIGZvcjpcbiAgICAgKiAgIChgJ3RvJ2AsIGAnZnJvbSdgLCBgJ2VudGVyaW5nJ2AsIGAnZXhpdGluZydgLCBgJ3JldGFpbmVkJ2ApXG4gICAgICogQHBhcmFtIHN0YXRlIElmIHByb3ZpZGVkLCBvbmx5IHJldHVybnMgdGhlIGBWaWV3Q29uZmlnYHMgZm9yIGEgc2luZ2xlIHN0YXRlIGluIHRoZSBwYXRoXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIGxpc3Qgb2YgVmlld0NvbmZpZyBvYmplY3RzIGZvciB0aGUgZ2l2ZW4gcGF0aC5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS52aWV3cyA9IGZ1bmN0aW9uIChwYXRobmFtZSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKHBhdGhuYW1lID09PSB2b2lkIDApIHsgcGF0aG5hbWUgPSAnZW50ZXJpbmcnOyB9XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdO1xuICAgICAgICBwYXRoID0gIXN0YXRlID8gcGF0aCA6IHBhdGguZmlsdGVyKHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgICAgICByZXR1cm4gcGF0aFxuICAgICAgICAgICAgLm1hcChwcm9wKCd2aWV3cycpKVxuICAgICAgICAgICAgLmZpbHRlcihpZGVudGl0eSlcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pO1xuICAgIH07XG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudHJlZUNoYW5nZXMgPSBmdW5jdGlvbiAocGF0aG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhuYW1lID8gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdIDogdGhpcy5fdHJlZUNoYW5nZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRyYW5zaXRpb24gdGhhdCBpcyBhIHJlZGlyZWN0aW9uIG9mIHRoZSBjdXJyZW50IG9uZS5cbiAgICAgKlxuICAgICAqIFRoaXMgdHJhbnNpdGlvbiBjYW4gYmUgcmV0dXJuZWQgZnJvbSBhIFtbVHJhbnNpdGlvblNlcnZpY2VdXSBob29rIHRvXG4gICAgICogcmVkaXJlY3QgYSB0cmFuc2l0aW9uIHRvIGEgbmV3IHN0YXRlIGFuZC9vciBzZXQgb2YgcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIG5ldyBbW1RyYW5zaXRpb25dXSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkge1xuICAgICAgICB2YXIgcmVkaXJlY3RzID0gMSwgdHJhbnMgPSB0aGlzO1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uZGl0aW9uYWwtYXNzaWdubWVudFxuICAgICAgICB3aGlsZSAoKHRyYW5zID0gdHJhbnMucmVkaXJlY3RlZEZyb20oKSkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCsrcmVkaXJlY3RzID4gMjApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIG1hbnkgY29uc2VjdXRpdmUgVHJhbnNpdGlvbiByZWRpcmVjdHMgKDIwKylcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlZGlyZWN0T3B0cyA9IHsgcmVkaXJlY3RlZEZyb206IHRoaXMsIHNvdXJjZTogJ3JlZGlyZWN0JyB9O1xuICAgICAgICAvLyBJZiB0aGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgY2F1c2VkIGJ5IFVSTCBzeW5jLCB0aGVuIHVzZSB7IGxvY2F0aW9uOiAncmVwbGFjZScgfVxuICAgICAgICAvLyBvbiB0aGUgbmV3IHRyYW5zaXRpb24gKHVubGVzcyB0aGUgdGFyZ2V0IHN0YXRlIGV4cGxpY2l0bHkgc3BlY2lmaWVzIGxvY2F0aW9uOiBmYWxzZSkuXG4gICAgICAgIC8vIFRoaXMgY2F1c2VzIHRoZSBvcmlnaW5hbCB1cmwgdG8gYmUgcmVwbGFjZWQgd2l0aCB0aGUgdXJsIGZvciB0aGUgcmVkaXJlY3QgdGFyZ2V0XG4gICAgICAgIC8vIHNvIHRoZSBvcmlnaW5hbCB1cmwgZGlzYXBwZWFycyBmcm9tIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMoKS5zb3VyY2UgPT09ICd1cmwnICYmIHRhcmdldFN0YXRlLm9wdGlvbnMoKS5sb2NhdGlvbiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJlZGlyZWN0T3B0cy5sb2NhdGlvbiA9ICdyZXBsYWNlJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3T3B0aW9ucyA9IGV4dGVuZCh7fSwgdGhpcy5vcHRpb25zKCksIHRhcmdldFN0YXRlLm9wdGlvbnMoKSwgcmVkaXJlY3RPcHRzKTtcbiAgICAgICAgdGFyZ2V0U3RhdGUgPSB0YXJnZXRTdGF0ZS53aXRoT3B0aW9ucyhuZXdPcHRpb25zLCB0cnVlKTtcbiAgICAgICAgdmFyIG5ld1RyYW5zaXRpb24gPSB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUodGhpcy5fdHJlZUNoYW5nZXMuZnJvbSwgdGFyZ2V0U3RhdGUpO1xuICAgICAgICB2YXIgb3JpZ2luYWxFbnRlcmluZ05vZGVzID0gdGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmc7XG4gICAgICAgIHZhciByZWRpcmVjdEVudGVyaW5nTm9kZXMgPSBuZXdUcmFuc2l0aW9uLl90cmVlQ2hhbmdlcy5lbnRlcmluZztcbiAgICAgICAgLy8gLS0tIFJlLXVzZSByZXNvbHZlIGRhdGEgZnJvbSBvcmlnaW5hbCB0cmFuc2l0aW9uIC0tLVxuICAgICAgICAvLyBXaGVuIHJlZGlyZWN0aW5nIGZyb20gYSBwYXJlbnQgc3RhdGUgdG8gYSBjaGlsZCBzdGF0ZSB3aGVyZSB0aGUgcGFyZW50IHBhcmFtZXRlciB2YWx1ZXMgaGF2ZW4ndCBjaGFuZ2VkXG4gICAgICAgIC8vIChiZWNhdXNlIG9mIHRoZSByZWRpcmVjdCksIHRoZSByZXNvbHZlcyBmZXRjaGVkIGJ5IHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIGFyZSBzdGlsbCB2YWxpZCBpbiB0aGVcbiAgICAgICAgLy8gcmVkaXJlY3RlZCB0cmFuc2l0aW9uLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGFsbG93cyB5b3UgdG8gZGVmaW5lIGEgcmVkaXJlY3Qgb24gYSBwYXJlbnQgc3RhdGUgd2hpY2ggZGVwZW5kcyBvbiBhbiBhc3luYyByZXNvbHZlIHZhbHVlLlxuICAgICAgICAvLyBZb3UgY2FuIHdhaXQgZm9yIHRoZSByZXNvbHZlLCB0aGVuIHJlZGlyZWN0IHRvIGEgY2hpbGQgc3RhdGUgYmFzZWQgb24gdGhlIHJlc3VsdC5cbiAgICAgICAgLy8gVGhlIHJlZGlyZWN0ZWQgdHJhbnNpdGlvbiBkb2VzIG5vdCBoYXZlIHRvIHJlLWZldGNoIHRoZSByZXNvbHZlLlxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdmFyIG5vZGVJc1JlbG9hZGluZyA9IGZ1bmN0aW9uIChyZWxvYWRTdGF0ZSkgeyByZXR1cm4gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiByZWxvYWRTdGF0ZSAmJiBub2RlLnN0YXRlLmluY2x1ZGVzW3JlbG9hZFN0YXRlLm5hbWVdO1xuICAgICAgICB9OyB9O1xuICAgICAgICAvLyBGaW5kIGFueSBcImVudGVyaW5nXCIgbm9kZXMgaW4gdGhlIHJlZGlyZWN0IHBhdGggdGhhdCBtYXRjaCB0aGUgb3JpZ2luYWwgcGF0aCBhbmQgYXJlbid0IGJlaW5nIHJlbG9hZGVkXG4gICAgICAgIHZhciBtYXRjaGluZ0VudGVyaW5nTm9kZXMgPSBQYXRoVXRpbHMubWF0Y2hpbmcocmVkaXJlY3RFbnRlcmluZ05vZGVzLCBvcmlnaW5hbEVudGVyaW5nTm9kZXMsIFBhdGhVdGlscy5ub25EeW5hbWljUGFyYW1zKS5maWx0ZXIobm90KG5vZGVJc1JlbG9hZGluZyh0YXJnZXRTdGF0ZS5vcHRpb25zKCkucmVsb2FkU3RhdGUpKSk7XG4gICAgICAgIC8vIFVzZSB0aGUgZXhpc3RpbmcgKHBvc3NpYmx5IHByZS1yZXNvbHZlZCkgcmVzb2x2YWJsZXMgZm9yIHRoZSBtYXRjaGluZyBlbnRlcmluZyBub2Rlcy5cbiAgICAgICAgbWF0Y2hpbmdFbnRlcmluZ05vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUsIGlkeCkge1xuICAgICAgICAgICAgbm9kZS5yZXNvbHZhYmxlcyA9IG9yaWdpbmFsRW50ZXJpbmdOb2Rlc1tpZHhdLnJlc29sdmFibGVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ld1RyYW5zaXRpb247XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiBJZiBhIHRyYW5zaXRpb24gZG9lc24ndCBleGl0L2VudGVyIGFueSBzdGF0ZXMsIHJldHVybnMgYW55IFtbUGFyYW1dXSB3aG9zZSB2YWx1ZSBjaGFuZ2VkICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuX2NoYW5nZWRQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YyA9IHRoaXMuX3RyZWVDaGFuZ2VzO1xuICAgICAgICAvKiogUmV0dXJuIHVuZGVmaW5lZCBpZiBpdCdzIG5vdCBhIFwiZHluYW1pY1wiIHRyYW5zaXRpb24sIGZvciB0aGUgZm9sbG93aW5nIHJlYXNvbnMgKi9cbiAgICAgICAgLy8gSWYgdXNlciBleHBsaWNpdGx5IHdhbnRzIGEgcmVsb2FkXG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zLnJlbG9hZClcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIElmIGFueSBzdGF0ZXMgYXJlIGV4aXRpbmcgb3IgZW50ZXJpbmdcbiAgICAgICAgaWYgKHRjLmV4aXRpbmcubGVuZ3RoIHx8IHRjLmVudGVyaW5nLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIElmIHRvL2Zyb20gcGF0aCBsZW5ndGhzIGRpZmZlclxuICAgICAgICBpZiAodGMudG8ubGVuZ3RoICE9PSB0Yy5mcm9tLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIElmIHRoZSB0by9mcm9tIHBhdGhzIGFyZSBkaWZmZXJlbnRcbiAgICAgICAgdmFyIHBhdGhzRGlmZmVyID0gYXJyYXlUdXBsZXModGMudG8sIHRjLmZyb20pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gdHVwbGVbMF0uc3RhdGUgIT09IHR1cGxlWzFdLnN0YXRlOyB9KVxuICAgICAgICAgICAgLnJlZHVjZShhbnlUcnVlUiwgZmFsc2UpO1xuICAgICAgICBpZiAocGF0aHNEaWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAvLyBGaW5kIGFueSBwYXJhbWV0ZXIgdmFsdWVzIHRoYXQgZGlmZmVyXG4gICAgICAgIHZhciBub2RlU2NoZW1hcyA9IHRjLnRvLm1hcChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5wYXJhbVNjaGVtYTsgfSk7XG4gICAgICAgIHZhciBfYSA9IFt0Yy50bywgdGMuZnJvbV0ubWFwKGZ1bmN0aW9uIChwYXRoKSB7IHJldHVybiBwYXRoLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5wYXJhbVZhbHVlczsgfSk7IH0pLCB0b1ZhbHVlcyA9IF9hWzBdLCBmcm9tVmFsdWVzID0gX2FbMV07XG4gICAgICAgIHZhciB0dXBsZXMgPSBhcnJheVR1cGxlcyhub2RlU2NoZW1hcywgdG9WYWx1ZXMsIGZyb21WYWx1ZXMpO1xuICAgICAgICByZXR1cm4gdHVwbGVzLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzY2hlbWEgPSBfYVswXSwgdG9WYWxzID0gX2FbMV0sIGZyb21WYWxzID0gX2FbMl07XG4gICAgICAgICAgICByZXR1cm4gUGFyYW0uY2hhbmdlZChzY2hlbWEsIHRvVmFscywgZnJvbVZhbHMpO1xuICAgICAgICB9KS5yZWR1Y2UodW5uZXN0UiwgW10pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0cmFuc2l0aW9uIGlzIGR5bmFtaWMuXG4gICAgICpcbiAgICAgKiBBIHRyYW5zaXRpb24gaXMgZHluYW1pYyBpZiBubyBzdGF0ZXMgYXJlIGVudGVyZWQgbm9yIGV4aXRlZCwgYnV0IGF0IGxlYXN0IG9uZSBkeW5hbWljIHBhcmFtZXRlciBoYXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIFRyYW5zaXRpb24gaXMgZHluYW1pY1xuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmR5bmFtaWMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjaGFuZ2VzID0gdGhpcy5fY2hhbmdlZFBhcmFtcygpO1xuICAgICAgICByZXR1cm4gIWNoYW5nZXMgPyBmYWxzZSA6IGNoYW5nZXMubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmR5bmFtaWM7IH0pLnJlZHVjZShhbnlUcnVlUiwgZmFsc2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0cmFuc2l0aW9uIGlzIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiBBIHRyYW5zaXRpb24gaXMgaWdub3JlZCBpZiBubyBzdGF0ZXMgYXJlIGVudGVyZWQgbm9yIGV4aXRlZCwgYW5kIG5vIHBhcmFtZXRlciB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyBpZ25vcmVkLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmlnbm9yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2lnbm9yZWRSZWFzb24oKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuX2lnbm9yZWRSZWFzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwZW5kaW5nID0gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uO1xuICAgICAgICB2YXIgcmVsb2FkU3RhdGUgPSB0aGlzLl9vcHRpb25zLnJlbG9hZFN0YXRlO1xuICAgICAgICB2YXIgc2FtZSA9IGZ1bmN0aW9uIChwYXRoQSwgcGF0aEIpIHtcbiAgICAgICAgICAgIGlmIChwYXRoQS5sZW5ndGggIT09IHBhdGhCLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB2YXIgbWF0Y2hpbmcgPSBQYXRoVXRpbHMubWF0Y2hpbmcocGF0aEEsIHBhdGhCKTtcbiAgICAgICAgICAgIHJldHVybiBwYXRoQS5sZW5ndGggPT09IG1hdGNoaW5nLmZpbHRlcihmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gIXJlbG9hZFN0YXRlIHx8ICFub2RlLnN0YXRlLmluY2x1ZGVzW3JlbG9hZFN0YXRlLm5hbWVdOyB9KS5sZW5ndGg7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBuZXdUQyA9IHRoaXMudHJlZUNoYW5nZXMoKTtcbiAgICAgICAgdmFyIHBlbmRUQyA9IHBlbmRpbmcgJiYgcGVuZGluZy50cmVlQ2hhbmdlcygpO1xuICAgICAgICBpZiAocGVuZFRDICYmIHNhbWUocGVuZFRDLnRvLCBuZXdUQy50bykgJiYgc2FtZShwZW5kVEMuZXhpdGluZywgbmV3VEMuZXhpdGluZykpXG4gICAgICAgICAgICByZXR1cm4gJ1NhbWVBc1BlbmRpbmcnO1xuICAgICAgICBpZiAobmV3VEMuZXhpdGluZy5sZW5ndGggPT09IDAgJiYgbmV3VEMuZW50ZXJpbmcubGVuZ3RoID09PSAwICYmIHNhbWUobmV3VEMuZnJvbSwgbmV3VEMudG8pKVxuICAgICAgICAgICAgcmV0dXJuICdTYW1lQXNDdXJyZW50JztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIHRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGdlbmVyYWxseSBjYWxsZWQgZnJvbSB0aGUgW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvblRvXV1cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBwcm9taXNlIGZvciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBydW5BbGxIb29rcyA9IFRyYW5zaXRpb25Ib29rLnJ1bkFsbEhvb2tzO1xuICAgICAgICAvLyBHZXRzIHRyYW5zaXRpb24gaG9va3MgYXJyYXkgZm9yIHRoZSBnaXZlbiBwaGFzZVxuICAgICAgICB2YXIgZ2V0SG9va3NGb3IgPSBmdW5jdGlvbiAocGhhc2UpIHsgcmV0dXJuIF90aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UocGhhc2UpOyB9O1xuICAgICAgICAvLyBXaGVuIHRoZSBjaGFpbiBpcyBjb21wbGV0ZSwgdGhlbiByZXNvbHZlIG9yIHJlamVjdCB0aGUgZGVmZXJyZWRcbiAgICAgICAgdmFyIHRyYW5zaXRpb25TdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJhY2UudHJhY2VTdWNjZXNzKF90aGlzLiR0bygpLCBfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5zdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLl9kZWZlcnJlZC5yZXNvbHZlKF90aGlzLnRvKCkpO1xuICAgICAgICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5TVUNDRVNTKSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0cmFuc2l0aW9uRXJyb3IgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICB0cmFjZS50cmFjZUVycm9yKHJlYXNvbiwgX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMuc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuX2RlZmVycmVkLnJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgX3RoaXMuX2Vycm9yID0gcmVhc29uO1xuICAgICAgICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5FUlJPUikpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcnVuVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFdhaXQgdG8gYnVpbGQgdGhlIFJVTiBob29rIGNoYWluIHVudGlsIHRoZSBCRUZPUkUgaG9va3MgYXJlIGRvbmVcbiAgICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIGEgQkVGT1JFIGhvb2sgdG8gZHluYW1pY2FsbHkgYWRkIGFkZGl0aW9uYWwgUlVOIGhvb2tzIHZpYSB0aGUgVHJhbnNpdGlvbiBvYmplY3QuXG4gICAgICAgICAgICB2YXIgYWxsUnVuSG9va3MgPSBnZXRIb29rc0ZvcihUcmFuc2l0aW9uSG9va1BoYXNlLlJVTik7XG4gICAgICAgICAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4odW5kZWZpbmVkKTsgfTtcbiAgICAgICAgICAgIHJldHVybiBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhhbGxSdW5Ib29rcywgZG9uZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYmFscyA9IF90aGlzLnJvdXRlci5nbG9iYWxzO1xuICAgICAgICAgICAgZ2xvYmFscy5sYXN0U3RhcnRlZFRyYW5zaXRpb25JZCA9IF90aGlzLiRpZDtcbiAgICAgICAgICAgIGdsb2JhbHMudHJhbnNpdGlvbiA9IF90aGlzO1xuICAgICAgICAgICAgZ2xvYmFscy50cmFuc2l0aW9uSGlzdG9yeS5lbnF1ZXVlKF90aGlzKTtcbiAgICAgICAgICAgIHRyYWNlLnRyYWNlVHJhbnNpdGlvblN0YXJ0KF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhbGxCZWZvcmVIb29rcyA9IGdldEhvb2tzRm9yKFRyYW5zaXRpb25Ib29rUGhhc2UuQkVGT1JFKTtcbiAgICAgICAgVHJhbnNpdGlvbkhvb2suaW52b2tlSG9va3MoYWxsQmVmb3JlSG9va3MsIHN0YXJ0VHJhbnNpdGlvbilcbiAgICAgICAgICAgIC50aGVuKHJ1blRyYW5zaXRpb24pXG4gICAgICAgICAgICAudGhlbih0cmFuc2l0aW9uU3VjY2VzcywgdHJhbnNpdGlvbkVycm9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgVHJhbnNpdGlvbiBpcyB2YWxpZFxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyB2YWxpZFxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZXJyb3IoKSB8fCB0aGlzLnN1Y2Nlc3MgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFib3J0cyB0aGlzIHRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqIEltcGVyYXRpdmUgQVBJIHRvIGFib3J0IGEgVHJhbnNpdGlvbi5cbiAgICAgKiBUaGlzIG9ubHkgYXBwbGllcyB0byBUcmFuc2l0aW9ucyB0aGF0IGFyZSBub3QgeWV0IGNvbXBsZXRlLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBEbyBub3Qgc2V0IGZsYWcgaWYgdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBjb21wbGV0ZVxuICAgICAgICBpZiAoaXNVbmRlZmluZWQodGhpcy5zdWNjZXNzKSkge1xuICAgICAgICAgICAgdGhpcy5fYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBUcmFuc2l0aW9uIGVycm9yIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIElmIHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQgKGFuZCBjb3VsZCBub3QgYmUgcnVuKSwgcmV0dXJucyB0aGUgcmVhc29uIHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQuXG4gICAgICogSWYgdGhlIHRyYW5zaXRpb24gd2FzIHZhbGlkIGFuZCByYW4sIGJ1dCB3YXMgbm90IHN1Y2Nlc3NmdWwsIHJldHVybnMgdGhlIHJlYXNvbiB0aGUgdHJhbnNpdGlvbiBmYWlsZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIHRyYW5zaXRpb24gcmVqZWN0aW9uIGV4cGxhaW5pbmcgd2h5IHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQsIG9yIHRoZSByZWFzb24gdGhlIHRyYW5zaXRpb24gZmFpbGVkLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLiR0bygpO1xuICAgICAgICBpZiAoc3RhdGUuc2VsZi5hYnN0cmFjdCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5pbnZhbGlkKFwiQ2Fubm90IHRyYW5zaXRpb24gdG8gYWJzdHJhY3Qgc3RhdGUgJ1wiICsgc3RhdGUubmFtZSArIFwiJ1wiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyYW1EZWZzID0gc3RhdGUucGFyYW1ldGVycygpO1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5wYXJhbXMoKTtcbiAgICAgICAgdmFyIGludmFsaWRQYXJhbXMgPSBwYXJhbURlZnMuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gIXBhcmFtLnZhbGlkYXRlcyh2YWx1ZXNbcGFyYW0uaWRdKTsgfSk7XG4gICAgICAgIGlmIChpbnZhbGlkUGFyYW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGludmFsaWRWYWx1ZXMgPSBpbnZhbGlkUGFyYW1zLm1hcChmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIFwiW1wiICsgcGFyYW0uaWQgKyBcIjpcIiArIHN0cmluZ2lmeSh2YWx1ZXNbcGFyYW0uaWRdKSArIFwiXVwiOyB9KS5qb2luKCcsICcpO1xuICAgICAgICAgICAgdmFyIGRldGFpbCA9IFwiVGhlIGZvbGxvd2luZyBwYXJhbWV0ZXIgdmFsdWVzIGFyZSBub3QgdmFsaWQgZm9yIHN0YXRlICdcIiArIHN0YXRlLm5hbWUgKyBcIic6IFwiICsgaW52YWxpZFZhbHVlcztcbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uaW52YWxpZChkZXRhaWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN1Y2Nlc3MgPT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBUcmFuc2l0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcm9tU3RhdGVPck5hbWUgPSB0aGlzLmZyb20oKTtcbiAgICAgICAgdmFyIHRvU3RhdGVPck5hbWUgPSB0aGlzLnRvKCk7XG4gICAgICAgIHZhciBhdm9pZEVtcHR5SGFzaCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXNbJyMnXSAhPT0gbnVsbCAmJiBwYXJhbXNbJyMnXSAhPT0gdW5kZWZpbmVkID8gcGFyYW1zIDogb21pdChwYXJhbXMsIFsnIyddKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gKFgpIG1lYW5zIHRoZSB0byBzdGF0ZSBpcyBpbnZhbGlkLlxuICAgICAgICB2YXIgaWQgPSB0aGlzLiRpZCwgZnJvbSA9IGlzT2JqZWN0KGZyb21TdGF0ZU9yTmFtZSkgPyBmcm9tU3RhdGVPck5hbWUubmFtZSA6IGZyb21TdGF0ZU9yTmFtZSwgZnJvbVBhcmFtcyA9IHN0cmluZ2lmeShhdm9pZEVtcHR5SGFzaCh0aGlzLl90cmVlQ2hhbmdlcy5mcm9tLm1hcChwcm9wKCdwYXJhbVZhbHVlcycpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpKSwgdG9WYWxpZCA9IHRoaXMudmFsaWQoKSA/ICcnIDogJyhYKSAnLCB0byA9IGlzT2JqZWN0KHRvU3RhdGVPck5hbWUpID8gdG9TdGF0ZU9yTmFtZS5uYW1lIDogdG9TdGF0ZU9yTmFtZSwgdG9QYXJhbXMgPSBzdHJpbmdpZnkoYXZvaWRFbXB0eUhhc2godGhpcy5wYXJhbXMoKSkpO1xuICAgICAgICByZXR1cm4gXCJUcmFuc2l0aW9uI1wiICsgaWQgKyBcIiggJ1wiICsgZnJvbSArIFwiJ1wiICsgZnJvbVBhcmFtcyArIFwiIC0+IFwiICsgdG9WYWxpZCArIFwiJ1wiICsgdG8gKyBcIidcIiArIHRvUGFyYW1zICsgXCIgKVwiO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFuc2l0aW9uLmRpVG9rZW4gPSBUcmFuc2l0aW9uO1xuICAgIHJldHVybiBUcmFuc2l0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFRyYW5zaXRpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zaXRpb24uanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB1cmxcbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBtYXAsIGluaGVyaXQsIGlkZW50aXR5LCB1bm5lc3QsIHRhaWwsIGZpbmQsIGFsbFRydWVSLCB1bm5lc3RSLCBhcnJheVR1cGxlcyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc0FycmF5LCBpc1N0cmluZywgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUGFyYW0sIERlZlR5cGUgfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgam9pbk5laWdoYm9yc1IsIHNwbGl0T25EZWxpbSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IGRlZmF1bHRzIH0gZnJvbSAnLi4vY29tbW9uJztcbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBxdW90ZVJlZ0V4cChzdHIsIHBhcmFtKSB7XG4gICAgdmFyIHN1cnJvdW5kUGF0dGVybiA9IFsnJywgJyddLCByZXN1bHQgPSBzdHIucmVwbGFjZSgvW1xcXFxcXFtcXF1cXF4kKis/LigpfHt9XS9nLCAnXFxcXCQmJyk7XG4gICAgaWYgKCFwYXJhbSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBzd2l0Y2ggKHBhcmFtLnNxdWFzaCkge1xuICAgICAgICBjYXNlIGZhbHNlOlxuICAgICAgICAgICAgc3Vycm91bmRQYXR0ZXJuID0gWycoJywgJyknICsgKHBhcmFtLmlzT3B0aW9uYWwgPyAnPycgOiAnJyldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgICAgICAgICAgc3Vycm91bmRQYXR0ZXJuID0gWycoPzovKCcsICcpfC8pPyddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBzdXJyb3VuZFBhdHRlcm4gPSBbXCIoXCIgKyBwYXJhbS5zcXVhc2ggKyBcInxcIiwgJyk/J107XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdCArIHN1cnJvdW5kUGF0dGVyblswXSArIHBhcmFtLnR5cGUucGF0dGVybi5zb3VyY2UgKyBzdXJyb3VuZFBhdHRlcm5bMV07XG59XG4vKiogQGhpZGRlbiAqL1xudmFyIG1lbW9pemVUbyA9IGZ1bmN0aW9uIChvYmosIF9wcm9wLCBmbikgeyByZXR1cm4gKG9ialtfcHJvcF0gPSBvYmpbX3Byb3BdIHx8IGZuKCkpOyB9O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBzcGxpdE9uU2xhc2ggPSBzcGxpdE9uRGVsaW0oJy8nKTtcbnZhciBkZWZhdWx0Q29uZmlnID0ge1xuICAgIHN0YXRlOiB7IHBhcmFtczoge30gfSxcbiAgICBzdHJpY3Q6IHRydWUsXG4gICAgY2FzZUluc2Vuc2l0aXZlOiB0cnVlLFxufTtcbi8qKlxuICogTWF0Y2hlcyBVUkxzIGFnYWluc3QgcGF0dGVybnMuXG4gKlxuICogTWF0Y2hlcyBVUkxzIGFnYWluc3QgcGF0dGVybnMgYW5kIGV4dHJhY3RzIG5hbWVkIHBhcmFtZXRlcnMgZnJvbSB0aGUgcGF0aCBvciB0aGUgc2VhcmNoXG4gKiBwYXJ0IG9mIHRoZSBVUkwuXG4gKlxuICogQSBVUkwgcGF0dGVybiBjb25zaXN0cyBvZiBhIHBhdGggcGF0dGVybiwgb3B0aW9uYWxseSBmb2xsb3dlZCBieSAnPycgYW5kIGEgbGlzdCBvZiBzZWFyY2ggKHF1ZXJ5KVxuICogcGFyYW1ldGVycy4gTXVsdGlwbGUgc2VhcmNoIHBhcmFtZXRlciBuYW1lcyBhcmUgc2VwYXJhdGVkIGJ5ICcmJy4gU2VhcmNoIHBhcmFtZXRlcnNcbiAqIGRvIG5vdCBpbmZsdWVuY2Ugd2hldGhlciBvciBub3QgYSBVUkwgaXMgbWF0Y2hlZCwgYnV0IHRoZWlyIHZhbHVlcyBhcmUgcGFzc2VkIHRocm91Z2ggaW50b1xuICogdGhlIG1hdGNoZWQgcGFyYW1ldGVycyByZXR1cm5lZCBieSBbW1VybE1hdGNoZXIuZXhlY11dLlxuICpcbiAqIC0gKlBhdGggcGFyYW1ldGVycyogYXJlIGRlZmluZWQgdXNpbmcgY3VybHkgYnJhY2UgcGxhY2Vob2xkZXJzIChgL3NvbWVwYXRoL3twYXJhbX1gKVxuICogb3IgY29sb24gcGxhY2Vob2xkZXJzIChgL3NvbWVQYXRoLzpwYXJhbWApLlxuICpcbiAqIC0gKkEgcGFyYW1ldGVyIFJlZ0V4cCogbWF5IGJlIGRlZmluZWQgZm9yIGEgcGFyYW0gYWZ0ZXIgYSBjb2xvblxuICogKGAvc29tZVBhdGgve3BhcmFtOlthLXpBLVowLTldK31gKSBpbiBhIGN1cmx5IGJyYWNlIHBsYWNlaG9sZGVyLlxuICogVGhlIHJlZ2V4cCBtdXN0IG1hdGNoIGZvciB0aGUgdXJsIHRvIGJlIG1hdGNoZWQuXG4gKiBTaG91bGQgdGhlIHJlZ2V4cCBpdHNlbGYgY29udGFpbiBjdXJseSBicmFjZXMsIHRoZXkgbXVzdCBiZSBpbiBtYXRjaGVkIHBhaXJzIG9yIGVzY2FwZWQgd2l0aCBhIGJhY2tzbGFzaC5cbiAqXG4gKiBOb3RlOiBhIFJlZ0V4cCBwYXJhbWV0ZXIgd2lsbCBlbmNvZGUgaXRzIHZhbHVlIHVzaW5nIGVpdGhlciBbW1BhcmFtVHlwZXMucGF0aF1dIG9yIFtbUGFyYW1UeXBlcy5xdWVyeV1dLlxuICpcbiAqIC0gKkN1c3RvbSBwYXJhbWV0ZXIgdHlwZXMqIG1heSBhbHNvIGJlIHNwZWNpZmllZCBhZnRlciBhIGNvbG9uIChgL3NvbWVQYXRoL3twYXJhbTppbnR9YCkgaW4gY3VybHkgYnJhY2UgcGFyYW1ldGVycy5cbiAqICAgU2VlIFtbVXJsTWF0Y2hlckZhY3RvcnkudHlwZV1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIC0gKkNhdGNoLWFsbCBwYXJhbWV0ZXJzKiBhcmUgZGVmaW5lZCB1c2luZyBhbiBhc3RlcmlzayBwbGFjZWhvbGRlciAoYC9zb21lcGF0aC8qY2F0Y2hhbGxwYXJhbWApLlxuICogICBBIGNhdGNoLWFsbCAqIHBhcmFtZXRlciB2YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIHJlbWFpbmRlciBvZiB0aGUgVVJMLlxuICpcbiAqIC0tLVxuICpcbiAqIFBhcmFtZXRlciBuYW1lcyBtYXkgY29udGFpbiBvbmx5IHdvcmQgY2hhcmFjdGVycyAobGF0aW4gbGV0dGVycywgZGlnaXRzLCBhbmQgdW5kZXJzY29yZSkgYW5kXG4gKiBtdXN0IGJlIHVuaXF1ZSB3aXRoaW4gdGhlIHBhdHRlcm4gKGFjcm9zcyBib3RoIHBhdGggYW5kIHNlYXJjaCBwYXJhbWV0ZXJzKS5cbiAqIEEgcGF0aCBwYXJhbWV0ZXIgbWF0Y2hlcyBhbnkgbnVtYmVyIG9mIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiAnLycuIEZvciBjYXRjaC1hbGxcbiAqIHBsYWNlaG9sZGVycyB0aGUgcGF0aCBwYXJhbWV0ZXIgbWF0Y2hlcyBhbnkgbnVtYmVyIG9mIGNoYXJhY3RlcnMuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogKiBgJy9oZWxsby8nYCAtIE1hdGNoZXMgb25seSBpZiB0aGUgcGF0aCBpcyBleGFjdGx5ICcvaGVsbG8vJy4gVGhlcmUgaXMgbm8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yXG4gKiAgIHRyYWlsaW5nIHNsYXNoZXMsIGFuZCBwYXR0ZXJucyBoYXZlIHRvIG1hdGNoIHRoZSBlbnRpcmUgcGF0aCwgbm90IGp1c3QgYSBwcmVmaXguXG4gKiAqIGAnL3VzZXIvOmlkJ2AgLSBNYXRjaGVzICcvdXNlci9ib2InIG9yICcvdXNlci8xMjM0ISEhJyBvciBldmVuICcvdXNlci8nIGJ1dCBub3QgJy91c2VyJyBvclxuICogICAnL3VzZXIvYm9iL2RldGFpbHMnLiBUaGUgc2Vjb25kIHBhdGggc2VnbWVudCB3aWxsIGJlIGNhcHR1cmVkIGFzIHRoZSBwYXJhbWV0ZXIgJ2lkJy5cbiAqICogYCcvdXNlci97aWR9J2AgLSBTYW1lIGFzIHRoZSBwcmV2aW91cyBleGFtcGxlLCBidXQgdXNpbmcgY3VybHkgYnJhY2Ugc3ludGF4LlxuICogKiBgJy91c2VyL3tpZDpbXi9dKn0nYCAtIFNhbWUgYXMgdGhlIHByZXZpb3VzIGV4YW1wbGUuXG4gKiAqIGAnL3VzZXIve2lkOlswLTlhLWZBLUZdezEsOH19J2AgLSBTaW1pbGFyIHRvIHRoZSBwcmV2aW91cyBleGFtcGxlLCBidXQgb25seSBtYXRjaGVzIGlmIHRoZSBpZFxuICogICBwYXJhbWV0ZXIgY29uc2lzdHMgb2YgMSB0byA4IGhleCBkaWdpdHMuXG4gKiAqIGAnL2ZpbGVzL3twYXRoOi4qfSdgIC0gTWF0Y2hlcyBhbnkgVVJMIHN0YXJ0aW5nIHdpdGggJy9maWxlcy8nIGFuZCBjYXB0dXJlcyB0aGUgcmVzdCBvZiB0aGVcbiAqICAgcGF0aCBpbnRvIHRoZSBwYXJhbWV0ZXIgJ3BhdGgnLlxuICogKiBgJy9maWxlcy8qcGF0aCdgIC0gZGl0dG8uXG4gKiAqIGAnL2NhbGVuZGFyL3tzdGFydDpkYXRlfSdgIC0gTWF0Y2hlcyBcIi9jYWxlbmRhci8yMDE0LTExLTEyXCIgKGJlY2F1c2UgdGhlIHBhdHRlcm4gZGVmaW5lZFxuICogICBpbiB0aGUgYnVpbHQtaW4gIGBkYXRlYCBQYXJhbVR5cGUgbWF0Y2hlcyBgMjAxNC0xMS0xMmApIGFuZCBwcm92aWRlcyBhIERhdGUgb2JqZWN0IGluICRzdGF0ZVBhcmFtcy5zdGFydFxuICpcbiAqL1xudmFyIFVybE1hdGNoZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHBhdHRlcm4gVGhlIHBhdHRlcm4gdG8gY29tcGlsZSBpbnRvIGEgbWF0Y2hlci5cbiAgICAgKiBAcGFyYW0gcGFyYW1UeXBlcyBUaGUgW1tQYXJhbVR5cGVzXV0gcmVnaXN0cnlcbiAgICAgKiBAcGFyYW0gcGFyYW1GYWN0b3J5IEEgW1tQYXJhbUZhY3RvcnldXSBvYmplY3RcbiAgICAgKiBAcGFyYW0gY29uZmlnICBBIFtbVXJsTWF0Y2hlckNvbXBpbGVDb25maWddXSBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFVybE1hdGNoZXIocGF0dGVybiwgcGFyYW1UeXBlcywgcGFyYW1GYWN0b3J5LCBjb25maWcpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fY2FjaGUgPSB7IHBhdGg6IFt0aGlzXSB9O1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9wYXJhbXMgPSBbXTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fc2VnbWVudHMgPSBbXTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fY29tcGlsZWQgPSBbXTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWcgPSBkZWZhdWx0cyhjb25maWcsIGRlZmF1bHRDb25maWcpO1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgICAgICAvLyBGaW5kIGFsbCBwbGFjZWhvbGRlcnMgYW5kIGNyZWF0ZSBhIGNvbXBpbGVkIHBhdHRlcm4sIHVzaW5nIGVpdGhlciBjbGFzc2ljIG9yIGN1cmx5IHN5bnRheDpcbiAgICAgICAgLy8gICAnKicgbmFtZVxuICAgICAgICAvLyAgICc6JyBuYW1lXG4gICAgICAgIC8vICAgJ3snIG5hbWUgJ30nXG4gICAgICAgIC8vICAgJ3snIG5hbWUgJzonIHJlZ2V4cCAnfSdcbiAgICAgICAgLy8gVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBzb21ld2hhdCBjb21wbGljYXRlZCBkdWUgdG8gdGhlIG5lZWQgdG8gYWxsb3cgY3VybHkgYnJhY2VzXG4gICAgICAgIC8vIGluc2lkZSB0aGUgcmVndWxhciBleHByZXNzaW9uLiBUaGUgcGxhY2Vob2xkZXIgcmVnZXhwIGJyZWFrcyBkb3duIGFzIGZvbGxvd3M6XG4gICAgICAgIC8vICAgIChbOipdKShbXFx3XFxbXFxdXSspICAgICAgICAgICAgICAtIGNsYXNzaWMgcGxhY2Vob2xkZXIgKCQxIC8gJDIpIChzZWFyY2ggdmVyc2lvbiBoYXMgLSBmb3Igc25ha2UtY2FzZSlcbiAgICAgICAgLy8gICAgXFx7KFtcXHdcXFtcXF1dKykoPzpcXDpcXHMqKCAuLi4gKSk/XFx9ICAtIGN1cmx5IGJyYWNlIHBsYWNlaG9sZGVyICgkMykgd2l0aCBvcHRpb25hbCByZWdleHAvdHlwZSAuLi4gKCQ0KSAoc2VhcmNoIHZlcnNpb24gaGFzIC0gZm9yIHNuYWtlLWNhc2VcbiAgICAgICAgLy8gICAgKD86IC4uLiB8IC4uLiB8IC4uLiApKyAgICAgICAgIC0gdGhlIHJlZ2V4cCBjb25zaXN0cyBvZiBhbnkgbnVtYmVyIG9mIGF0b21zLCBhbiBhdG9tIGJlaW5nIGVpdGhlclxuICAgICAgICAvLyAgICBbXnt9XFxcXF0rICAgICAgICAgICAgICAgICAgICAgICAtIGFueXRoaW5nIG90aGVyIHRoYW4gY3VybHkgYnJhY2VzIG9yIGJhY2tzbGFzaFxuICAgICAgICAvLyAgICBcXFxcLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIGEgYmFja3NsYXNoIGVzY2FwZVxuICAgICAgICAvLyAgICBcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0gICAgICAgICAgLSBhIG1hdGNoZWQgc2V0IG9mIGN1cmx5IGJyYWNlcyBjb250YWluaW5nIG90aGVyIGF0b21zXG4gICAgICAgIHZhciBwbGFjZWhvbGRlciA9IC8oWzoqXSkoW1xcd1xcW1xcXV0rKXxcXHsoW1xcd1xcW1xcXV0rKSg/OlxcOlxccyooKD86W157fVxcXFxdK3xcXFxcLnxcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0pKykpP1xcfS9nO1xuICAgICAgICB2YXIgc2VhcmNoUGxhY2Vob2xkZXIgPSAvKFs6XT8pKFtcXHdcXFtcXF0uLV0rKXxcXHsoW1xcd1xcW1xcXS4tXSspKD86XFw6XFxzKigoPzpbXnt9XFxcXF0rfFxcXFwufFxceyg/Oltee31cXFxcXSt8XFxcXC4pKlxcfSkrKSk/XFx9L2c7XG4gICAgICAgIHZhciBwYXR0ZXJucyA9IFtdO1xuICAgICAgICB2YXIgbGFzdCA9IDA7XG4gICAgICAgIHZhciBtYXRjaEFycmF5O1xuICAgICAgICB2YXIgY2hlY2tQYXJhbUVycm9ycyA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgaWYgKCFVcmxNYXRjaGVyLm5hbWVWYWxpZGF0b3IudGVzdChpZCkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbWV0ZXIgbmFtZSAnXCIgKyBpZCArIFwiJyBpbiBwYXR0ZXJuICdcIiArIHBhdHRlcm4gKyBcIidcIik7XG4gICAgICAgICAgICBpZiAoZmluZChfdGhpcy5fcGFyYW1zLCBwcm9wRXEoJ2lkJywgaWQpKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEdXBsaWNhdGUgcGFyYW1ldGVyIG5hbWUgJ1wiICsgaWQgKyBcIicgaW4gcGF0dGVybiAnXCIgKyBwYXR0ZXJuICsgXCInXCIpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBTcGxpdCBpbnRvIHN0YXRpYyBzZWdtZW50cyBzZXBhcmF0ZWQgYnkgcGF0aCBwYXJhbWV0ZXIgcGxhY2Vob2xkZXJzLlxuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGlzIGFsd2F5cyAxIG1vcmUgdGhhbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMuXG4gICAgICAgIHZhciBtYXRjaERldGFpbHMgPSBmdW5jdGlvbiAobSwgaXNTZWFyY2gpIHtcbiAgICAgICAgICAgIC8vIElFWzc4XSByZXR1cm5zICcnIGZvciB1bm1hdGNoZWQgZ3JvdXBzIGluc3RlYWQgb2YgbnVsbFxuICAgICAgICAgICAgdmFyIGlkID0gbVsyXSB8fCBtWzNdO1xuICAgICAgICAgICAgdmFyIHJlZ2V4cCA9IGlzU2VhcmNoID8gbVs0XSA6IG1bNF0gfHwgKG1bMV0gPT09ICcqJyA/ICdbXFxcXHNcXFxcU10qJyA6IG51bGwpO1xuICAgICAgICAgICAgdmFyIG1ha2VSZWdleHBUeXBlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmhlcml0KHBhcmFtVHlwZXMudHlwZShpc1NlYXJjaCA/ICdxdWVyeScgOiAncGF0aCcpLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IG5ldyBSZWdFeHAoc3RyLCBfdGhpcy5jb25maWcuY2FzZUluc2Vuc2l0aXZlID8gJ2knIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICByZWdleHA6IHJlZ2V4cCxcbiAgICAgICAgICAgICAgICBzZWdtZW50OiBwYXR0ZXJuLnN1YnN0cmluZyhsYXN0LCBtLmluZGV4KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAhcmVnZXhwID8gbnVsbCA6IHBhcmFtVHlwZXMudHlwZShyZWdleHApIHx8IG1ha2VSZWdleHBUeXBlKHJlZ2V4cCksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZGV0YWlscztcbiAgICAgICAgdmFyIHNlZ21lbnQ7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XG4gICAgICAgIHdoaWxlICgobWF0Y2hBcnJheSA9IHBsYWNlaG9sZGVyLmV4ZWMocGF0dGVybikpKSB7XG4gICAgICAgICAgICBkZXRhaWxzID0gbWF0Y2hEZXRhaWxzKG1hdGNoQXJyYXksIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChkZXRhaWxzLnNlZ21lbnQuaW5kZXhPZignPycpID49IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIHdlJ3JlIGludG8gdGhlIHNlYXJjaCBwYXJ0XG4gICAgICAgICAgICBjaGVja1BhcmFtRXJyb3JzKGRldGFpbHMuaWQpO1xuICAgICAgICAgICAgdGhpcy5fcGFyYW1zLnB1c2gocGFyYW1GYWN0b3J5LmZyb21QYXRoKGRldGFpbHMuaWQsIGRldGFpbHMudHlwZSwgY29uZmlnLnN0YXRlKSk7XG4gICAgICAgICAgICB0aGlzLl9zZWdtZW50cy5wdXNoKGRldGFpbHMuc2VnbWVudCk7XG4gICAgICAgICAgICBwYXR0ZXJucy5wdXNoKFtkZXRhaWxzLnNlZ21lbnQsIHRhaWwodGhpcy5fcGFyYW1zKV0pO1xuICAgICAgICAgICAgbGFzdCA9IHBsYWNlaG9sZGVyLmxhc3RJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBzZWdtZW50ID0gcGF0dGVybi5zdWJzdHJpbmcobGFzdCk7XG4gICAgICAgIC8vIEZpbmQgYW55IHNlYXJjaCBwYXJhbWV0ZXIgbmFtZXMgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIGxhc3Qgc2VnbWVudFxuICAgICAgICB2YXIgaSA9IHNlZ21lbnQuaW5kZXhPZignPycpO1xuICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgc2VhcmNoID0gc2VnbWVudC5zdWJzdHJpbmcoaSk7XG4gICAgICAgICAgICBzZWdtZW50ID0gc2VnbWVudC5zdWJzdHJpbmcoMCwgaSk7XG4gICAgICAgICAgICBpZiAoc2VhcmNoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsYXN0ID0gMDtcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uZGl0aW9uYWwtYXNzaWdubWVudFxuICAgICAgICAgICAgICAgIHdoaWxlICgobWF0Y2hBcnJheSA9IHNlYXJjaFBsYWNlaG9sZGVyLmV4ZWMoc2VhcmNoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscyA9IG1hdGNoRGV0YWlscyhtYXRjaEFycmF5LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tQYXJhbUVycm9ycyhkZXRhaWxzLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyYW1zLnB1c2gocGFyYW1GYWN0b3J5LmZyb21TZWFyY2goZGV0YWlscy5pZCwgZGV0YWlscy50eXBlLCBjb25maWcuc3RhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdCA9IHBsYWNlaG9sZGVyLmxhc3RJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgPyZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2VnbWVudHMucHVzaChzZWdtZW50KTtcbiAgICAgICAgdGhpcy5fY29tcGlsZWQgPSBwYXR0ZXJucy5tYXAoZnVuY3Rpb24gKF9wYXR0ZXJuKSB7IHJldHVybiBxdW90ZVJlZ0V4cC5hcHBseShudWxsLCBfcGF0dGVybik7IH0pLmNvbmNhdChxdW90ZVJlZ0V4cChzZWdtZW50KSk7XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVXJsTWF0Y2hlci5lbmNvZGVEYXNoZXMgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIC8vIFJlcGxhY2UgZGFzaGVzIHdpdGggZW5jb2RlZCBcIlxcLVwiXG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC8tL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIlNUMlXCIgKyBjXG4gICAgICAgICAgICAgICAgLmNoYXJDb2RlQXQoMClcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gR2l2ZW4gYSBtYXRjaGVyLCByZXR1cm4gYW4gYXJyYXkgd2l0aCB0aGUgbWF0Y2hlcidzIHBhdGggc2VnbWVudHMgYW5kIHBhdGggcGFyYW1zLCBpbiBvcmRlciAqL1xuICAgIFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zID0gZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgICAgdmFyIHN0YXRpY1NlZ21lbnRzID0gbWF0Y2hlci5fc2VnbWVudHM7XG4gICAgICAgIHZhciBwYXRoUGFyYW1zID0gbWF0Y2hlci5fcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcC5sb2NhdGlvbiA9PT0gRGVmVHlwZS5QQVRIOyB9KTtcbiAgICAgICAgcmV0dXJuIGFycmF5VHVwbGVzKHN0YXRpY1NlZ21lbnRzLCBwYXRoUGFyYW1zLmNvbmNhdCh1bmRlZmluZWQpKVxuICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggIT09ICcnICYmIGlzRGVmaW5lZCh4KTsgfSk7XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiBHaXZlbiBhIG1hdGNoZXIsIHJldHVybiBhbiBhcnJheSB3aXRoIHRoZSBtYXRjaGVyJ3MgcXVlcnkgcGFyYW1zICovXG4gICAgVXJsTWF0Y2hlci5xdWVyeVBhcmFtcyA9IGZ1bmN0aW9uIChtYXRjaGVyKSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVyLl9wYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLmxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSDsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb21wYXJlIHR3byBVcmxNYXRjaGVyc1xuICAgICAqXG4gICAgICogVGhpcyBjb21wYXJpc29uIGZ1bmN0aW9uIGNvbnZlcnRzIGEgVXJsTWF0Y2hlciBpbnRvIHN0YXRpYyBhbmQgZHluYW1pYyBwYXRoIHNlZ21lbnRzLlxuICAgICAqIEVhY2ggc3RhdGljIHBhdGggc2VnbWVudCBpcyBhIHN0YXRpYyBzdHJpbmcgYmV0d2VlbiBhIHBhdGggc2VwYXJhdG9yIChzbGFzaCBjaGFyYWN0ZXIpLlxuICAgICAqIEVhY2ggZHluYW1pYyBzZWdtZW50IGlzIGEgcGF0aCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBUaGUgY29tcGFyaXNvbiBmdW5jdGlvbiBzb3J0cyBzdGF0aWMgc2VnbWVudHMgYmVmb3JlIGR5bmFtaWMgb25lcy5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLmNvbXBhcmUgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAvKipcbiAgICAgICAgICogVHVybiBhIFVybE1hdGNoZXIgYW5kIGFsbCBpdHMgcGFyZW50IG1hdGNoZXJzIGludG8gYW4gYXJyYXlcbiAgICAgICAgICogb2Ygc2xhc2ggbGl0ZXJhbHMgJy8nLCBzdHJpbmcgbGl0ZXJhbHMsIGFuZCBQYXJhbSBvYmplY3RzXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgZXhhbXBsZSBtYXRjaGVyIG1hdGNoZXMgc3RyaW5ncyBsaWtlIFwiL2Zvby86cGFyYW0vdGFpbFwiOlxuICAgICAgICAgKiB2YXIgbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb29cIikuYXBwZW5kKCR1bWYuY29tcGlsZShcIi86cGFyYW1cIikpLmFwcGVuZCgkdW1mLmNvbXBpbGUoXCIvXCIpKS5hcHBlbmQoJHVtZi5jb21waWxlKFwidGFpbFwiKSk7XG4gICAgICAgICAqIHZhciByZXN1bHQgPSBzZWdtZW50cyhtYXRjaGVyKTsgLy8gWyAnLycsICdmb28nLCAnLycsIFBhcmFtLCAnLycsICd0YWlsJyBdXG4gICAgICAgICAqXG4gICAgICAgICAqIENhY2hlcyB0aGUgcmVzdWx0IGFzIGBtYXRjaGVyLl9jYWNoZS5zZWdtZW50c2BcbiAgICAgICAgICovXG4gICAgICAgIHZhciBzZWdtZW50cyA9IGZ1bmN0aW9uIChtYXRjaGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKG1hdGNoZXIuX2NhY2hlLnNlZ21lbnRzID1cbiAgICAgICAgICAgICAgICBtYXRjaGVyLl9jYWNoZS5zZWdtZW50cyB8fFxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVyLl9jYWNoZS5wYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZWR1Y2Uoam9pbk5laWdoYm9yc1IsIFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gKGlzU3RyaW5nKHgpID8gc3BsaXRPblNsYXNoKHgpIDogeCk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBzb3J0IHdlaWdodCBmb3IgZWFjaCBzZWdtZW50IG9mIGEgVXJsTWF0Y2hlclxuICAgICAgICAgKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIHJlc3VsdCBhcyBgbWF0Y2hlci5fY2FjaGUud2VpZ2h0c2BcbiAgICAgICAgICovXG4gICAgICAgIHZhciB3ZWlnaHRzID0gZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAobWF0Y2hlci5fY2FjaGUud2VpZ2h0cyA9XG4gICAgICAgICAgICAgICAgbWF0Y2hlci5fY2FjaGUud2VpZ2h0cyB8fFxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50cyhtYXRjaGVyKS5tYXAoZnVuY3Rpb24gKHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvcnQgc2xhc2hlcyBmaXJzdCwgdGhlbiBzdGF0aWMgc3RyaW5ncywgdGhlIFBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ21lbnQgPT09ICcvJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1N0cmluZyhzZWdtZW50KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgUGFyYW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhZHMgc2hvcnRlciBhcnJheSBpbi1wbGFjZSAobXV0YXRlcylcbiAgICAgICAgICovXG4gICAgICAgIHZhciBwYWRBcnJheXMgPSBmdW5jdGlvbiAobCwgciwgcGFkVmFsKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gTWF0aC5tYXgobC5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgICAgIHdoaWxlIChsLmxlbmd0aCA8IGxlbilcbiAgICAgICAgICAgICAgICBsLnB1c2gocGFkVmFsKTtcbiAgICAgICAgICAgIHdoaWxlIChyLmxlbmd0aCA8IGxlbilcbiAgICAgICAgICAgICAgICByLnB1c2gocGFkVmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHdlaWdodHNBID0gd2VpZ2h0cyhhKSwgd2VpZ2h0c0IgPSB3ZWlnaHRzKGIpO1xuICAgICAgICBwYWRBcnJheXMod2VpZ2h0c0EsIHdlaWdodHNCLCAwKTtcbiAgICAgICAgdmFyIF9wYWlycyA9IGFycmF5VHVwbGVzKHdlaWdodHNBLCB3ZWlnaHRzQik7XG4gICAgICAgIHZhciBjbXAsIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBfcGFpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNtcCA9IF9wYWlyc1tpXVswXSAtIF9wYWlyc1tpXVsxXTtcbiAgICAgICAgICAgIGlmIChjbXAgIT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNtcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgY29uY2F0ZW5hdGVkIFVybE1hdGNoZXJcbiAgICAgKlxuICAgICAqIEJ1aWxkcyBhIG5ldyBVcmxNYXRjaGVyIGJ5IGFwcGVuZGluZyBhbm90aGVyIFVybE1hdGNoZXIgdG8gdGhpcyBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXJsIEEgYFVybE1hdGNoZXJgIGluc3RhbmNlIHRvIGFwcGVuZCBhcyBhIGNoaWxkIG9mIHRoZSBjdXJyZW50IGBVcmxNYXRjaGVyYC5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuLnB1c2godXJsKTtcbiAgICAgICAgdXJsLl9jYWNoZSA9IHtcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuX2NhY2hlLnBhdGguY29uY2F0KHVybCksXG4gICAgICAgICAgICBwYXJlbnQ6IHRoaXMsXG4gICAgICAgICAgICBwYXR0ZXJuOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5pc1Jvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5wYXRoWzBdID09PSB0aGlzO1xuICAgIH07XG4gICAgLyoqIFJldHVybnMgdGhlIGlucHV0IHBhdHRlcm4gc3RyaW5nICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdHRlcm47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0cyB0aGUgc3BlY2lmaWVkIHVybC9wYXRoIGFnYWluc3QgdGhpcyBtYXRjaGVyLlxuICAgICAqXG4gICAgICogVGVzdHMgaWYgdGhlIGdpdmVuIHVybCBtYXRjaGVzIHRoaXMgbWF0Y2hlcidzIHBhdHRlcm4sIGFuZCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjYXB0dXJlZFxuICAgICAqIHBhcmFtZXRlciB2YWx1ZXMuICBSZXR1cm5zIG51bGwgaWYgdGhlIHBhdGggZG9lcyBub3QgbWF0Y2guXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuZWQgb2JqZWN0IGNvbnRhaW5zIHRoZSB2YWx1ZXNcbiAgICAgKiBvZiBhbnkgc2VhcmNoIHBhcmFtZXRlcnMgdGhhdCBhcmUgbWVudGlvbmVkIGluIHRoZSBwYXR0ZXJuLCBidXQgdGhlaXIgdmFsdWUgbWF5IGJlIG51bGwgaWZcbiAgICAgKiB0aGV5IGFyZSBub3QgcHJlc2VudCBpbiBgc2VhcmNoYC4gVGhpcyBtZWFucyB0aGF0IHNlYXJjaCBwYXJhbWV0ZXJzIGFyZSBhbHdheXMgdHJlYXRlZFxuICAgICAqIGFzIG9wdGlvbmFsLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbmV3IFVybE1hdGNoZXIoJy91c2VyL3tpZH0/cSZyJykuZXhlYygnL3VzZXIvYm9iJywge1xuICAgICAqICAgeDogJzEnLCBxOiAnaGVsbG8nXG4gICAgICogfSk7XG4gICAgICogLy8gcmV0dXJucyB7IGlkOiAnYm9iJywgcTogJ2hlbGxvJywgcjogbnVsbCB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAgICBUaGUgVVJMIHBhdGggdG8gbWF0Y2gsIGUuZy4gYCRsb2NhdGlvbi5wYXRoKClgLlxuICAgICAqIEBwYXJhbSBzZWFyY2ggIFVSTCBzZWFyY2ggcGFyYW1ldGVycywgZS5nLiBgJGxvY2F0aW9uLnNlYXJjaCgpYC5cbiAgICAgKiBAcGFyYW0gaGFzaCAgICBVUkwgaGFzaCBlLmcuIGAkbG9jYXRpb24uaGFzaCgpYC5cbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNhcHR1cmVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAgICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUuZXhlYyA9IGZ1bmN0aW9uIChwYXRoLCBzZWFyY2gsIGhhc2gsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHNlYXJjaCA9PT0gdm9pZCAwKSB7IHNlYXJjaCA9IHt9OyB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciBtYXRjaCA9IG1lbW9pemVUbyh0aGlzLl9jYWNoZSwgJ3BhdHRlcm4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChbXG4gICAgICAgICAgICAgICAgJ14nLFxuICAgICAgICAgICAgICAgIHVubmVzdChfdGhpcy5fY2FjaGUucGF0aC5tYXAocHJvcCgnX2NvbXBpbGVkJykpKS5qb2luKCcnKSxcbiAgICAgICAgICAgICAgICBfdGhpcy5jb25maWcuc3RyaWN0ID09PSBmYWxzZSA/ICcvPycgOiAnJyxcbiAgICAgICAgICAgICAgICAnJCcsXG4gICAgICAgICAgICBdLmpvaW4oJycpLCBfdGhpcy5jb25maWcuY2FzZUluc2Vuc2l0aXZlID8gJ2knIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfSkuZXhlYyhwYXRoKTtcbiAgICAgICAgaWYgKCFtYXRjaClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAvLyBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgeyBpc29sYXRlOiBmYWxzZSB9KTtcbiAgICAgICAgdmFyIGFsbFBhcmFtcyA9IHRoaXMucGFyYW1ldGVycygpLCBwYXRoUGFyYW1zID0gYWxsUGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuICFwYXJhbS5pc1NlYXJjaCgpOyB9KSwgc2VhcmNoUGFyYW1zID0gYWxsUGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtLmlzU2VhcmNoKCk7IH0pLCBuUGF0aFNlZ21lbnRzID0gdGhpcy5fY2FjaGUucGF0aC5tYXAoZnVuY3Rpb24gKHVybG0pIHsgcmV0dXJuIHVybG0uX3NlZ21lbnRzLmxlbmd0aCAtIDE7IH0pLnJlZHVjZShmdW5jdGlvbiAoYSwgeCkgeyByZXR1cm4gYSArIHg7IH0pLCB2YWx1ZXMgPSB7fTtcbiAgICAgICAgaWYgKG5QYXRoU2VnbWVudHMgIT09IG1hdGNoLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmJhbGFuY2VkIGNhcHR1cmUgZ3JvdXAgaW4gcm91dGUgJ1wiICsgdGhpcy5wYXR0ZXJuICsgXCInXCIpO1xuICAgICAgICBmdW5jdGlvbiBkZWNvZGVQYXRoQXJyYXkocGFyYW1WYWwpIHtcbiAgICAgICAgICAgIHZhciByZXZlcnNlU3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHJcbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCcnKVxuICAgICAgICAgICAgICAgICAgICAucmV2ZXJzZSgpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdW5xdW90ZURhc2hlcyA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXFxcLS9nLCAnLScpOyB9O1xuICAgICAgICAgICAgdmFyIHNwbGl0ID0gcmV2ZXJzZVN0cmluZyhwYXJhbVZhbCkuc3BsaXQoLy0oPyFcXFxcKS8pO1xuICAgICAgICAgICAgdmFyIGFsbFJldmVyc2VkID0gbWFwKHNwbGl0LCByZXZlcnNlU3RyaW5nKTtcbiAgICAgICAgICAgIHJldHVybiBtYXAoYWxsUmV2ZXJzZWQsIHVucXVvdGVEYXNoZXMpLnJldmVyc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5QYXRoU2VnbWVudHM7IGkrKykge1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gcGF0aFBhcmFtc1tpXTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG1hdGNoW2kgKyAxXTtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBwYXJhbSB2YWx1ZSBtYXRjaGVzIGEgcHJlLXJlcGxhY2UgcGFpciwgcmVwbGFjZSB0aGUgdmFsdWUgYmVmb3JlIGRlY29kaW5nLlxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJhbS5yZXBsYWNlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtLnJlcGxhY2Vbal0uZnJvbSA9PT0gdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyYW0ucmVwbGFjZVtqXS50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiBwYXJhbS5hcnJheSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRlY29kZVBhdGhBcnJheSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmFtLnR5cGUuZGVjb2RlKHZhbHVlKTtcbiAgICAgICAgICAgIHZhbHVlc1twYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VhcmNoUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBzZWFyY2hbcGFyYW0uaWRdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJhbS5yZXBsYWNlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtLnJlcGxhY2Vbal0uZnJvbSA9PT0gdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyYW0ucmVwbGFjZVtqXS50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyYW0udHlwZS5kZWNvZGUodmFsdWUpO1xuICAgICAgICAgICAgdmFsdWVzW3BhcmFtLmlkXSA9IHBhcmFtLnZhbHVlKHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChoYXNoKVxuICAgICAgICAgICAgdmFsdWVzWycjJ10gPSBoYXNoO1xuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFJldHVybnMgYWxsIHRoZSBbW1BhcmFtXV0gb2JqZWN0cyBvZiBhbGwgcGF0aCBhbmQgc2VhcmNoIHBhcmFtZXRlcnMgb2YgdGhpcyBwYXR0ZXJuIGluIG9yZGVyIG9mIGFwcGVhcmFuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7QXJyYXkuPFBhcmFtPn0gIEFuIGFycmF5IG9mIFtbUGFyYW1dXSBvYmplY3RzLiBNdXN0IGJlIHRyZWF0ZWQgYXMgcmVhZC1vbmx5LiBJZiB0aGVcbiAgICAgKiAgICBwYXR0ZXJuIGhhcyBubyBwYXJhbWV0ZXJzLCBhbiBlbXB0eSBhcnJheSBpcyByZXR1cm5lZC5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5wYXJhbWV0ZXJzID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICAgICAgaWYgKG9wdHMuaW5oZXJpdCA9PT0gZmFsc2UpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFyYW1zO1xuICAgICAgICByZXR1cm4gdW5uZXN0KHRoaXMuX2NhY2hlLnBhdGgubWFwKGZ1bmN0aW9uIChtYXRjaGVyKSB7IHJldHVybiBtYXRjaGVyLl9wYXJhbXM7IH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIHBhcmFtZXRlciBmcm9tIHRoaXMgVXJsTWF0Y2hlciBieSBpZFxuICAgICAqXG4gICAgICogQHBhcmFtIGlkXG4gICAgICogQHBhcmFtIG9wdHNcbiAgICAgKiBAcmV0dXJucyB7VHxQYXJhbXxhbnl8Ym9vbGVhbnxVcmxNYXRjaGVyfG51bGx9XG4gICAgICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUucGFyYW1ldGVyID0gZnVuY3Rpb24gKGlkLCBvcHRzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChvcHRzID09PSB2b2lkIDApIHsgb3B0cyA9IHt9OyB9XG4gICAgICAgIHZhciBmaW5kUGFyYW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMuX3BhcmFtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtLmlkID09PSBpZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5fY2FjaGUucGFyZW50O1xuICAgICAgICByZXR1cm4gZmluZFBhcmFtKCkgfHwgKG9wdHMuaW5oZXJpdCAhPT0gZmFsc2UgJiYgcGFyZW50ICYmIHBhcmVudC5wYXJhbWV0ZXIoaWQsIG9wdHMpKSB8fCBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHRoZSBpbnB1dCBwYXJhbWV0ZXIgdmFsdWVzIGFnYWluc3QgdGhpcyBVcmxNYXRjaGVyXG4gICAgICpcbiAgICAgKiBDaGVja3MgYW4gb2JqZWN0IGhhc2ggb2YgcGFyYW1ldGVycyB0byB2YWxpZGF0ZSB0aGVpciBjb3JyZWN0bmVzcyBhY2NvcmRpbmcgdG8gdGhlIHBhcmFtZXRlclxuICAgICAqIHR5cGVzIG9mIHRoaXMgYFVybE1hdGNoZXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyBUaGUgb2JqZWN0IGhhc2ggb2YgcGFyYW1ldGVycyB0byB2YWxpZGF0ZS5cbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGB0cnVlYCBpZiBgcGFyYW1zYCB2YWxpZGF0ZXMsIG90aGVyd2lzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIFVybE1hdGNoZXIucHJvdG90eXBlLnZhbGlkYXRlcyA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgdmFyIHZhbGlkUGFyYW1WYWwgPSBmdW5jdGlvbiAocGFyYW0sIHZhbCkgeyByZXR1cm4gIXBhcmFtIHx8IHBhcmFtLnZhbGlkYXRlcyh2YWwpOyB9O1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgICAgIC8vIEknbSBub3Qgc3VyZSB3aHkgdGhpcyBjaGVja3Mgb25seSB0aGUgcGFyYW0ga2V5cyBwYXNzZWQgaW4sIGFuZCBub3QgYWxsIHRoZSBwYXJhbXMga25vd24gdG8gdGhlIG1hdGNoZXJcbiAgICAgICAgdmFyIHBhcmFtU2NoZW1hID0gdGhpcy5wYXJhbWV0ZXJzKCkuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbURlZikgeyByZXR1cm4gcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtRGVmLmlkKTsgfSk7XG4gICAgICAgIHJldHVybiBwYXJhbVNjaGVtYS5tYXAoZnVuY3Rpb24gKHBhcmFtRGVmKSB7IHJldHVybiB2YWxpZFBhcmFtVmFsKHBhcmFtRGVmLCBwYXJhbXNbcGFyYW1EZWYuaWRdKTsgfSkucmVkdWNlKGFsbFRydWVSLCB0cnVlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXMsIGNyZWF0ZXMgYSBVUkwgZnJvbSB0aGlzIFVybE1hdGNoZXIuXG4gICAgICpcbiAgICAgKiBDcmVhdGVzIGEgVVJMIHRoYXQgbWF0Y2hlcyB0aGlzIHBhdHRlcm4gYnkgc3Vic3RpdHV0aW5nIHRoZSBzcGVjaWZpZWQgdmFsdWVzXG4gICAgICogZm9yIHRoZSBwYXRoIGFuZCBzZWFyY2ggcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIG5ldyBVcmxNYXRjaGVyKCcvdXNlci97aWR9P3EnKS5mb3JtYXQoeyBpZDonYm9iJywgcToneWVzJyB9KTtcbiAgICAgKiAvLyByZXR1cm5zICcvdXNlci9ib2I/cT15ZXMnXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWVzICB0aGUgdmFsdWVzIHRvIHN1YnN0aXR1dGUgZm9yIHRoZSBwYXJhbWV0ZXJzIGluIHRoaXMgcGF0dGVybi5cbiAgICAgKiBAcmV0dXJucyB0aGUgZm9ybWF0dGVkIFVSTCAocGF0aCBhbmQgb3B0aW9uYWxseSBzZWFyY2ggcGFydCkuXG4gICAgICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0ge307IH1cbiAgICAgICAgLy8gQnVpbGQgdGhlIGZ1bGwgcGF0aCBvZiBVcmxNYXRjaGVycyAoaW5jbHVkaW5nIGFsbCBwYXJlbnQgVXJsTWF0Y2hlcnMpXG4gICAgICAgIHZhciB1cmxNYXRjaGVycyA9IHRoaXMuX2NhY2hlLnBhdGg7XG4gICAgICAgIC8vIEV4dHJhY3QgYWxsIHRoZSBzdGF0aWMgc2VnbWVudHMgYW5kIFBhcmFtcyAocHJvY2Vzc2VkIGFzIFBhcmFtRGV0YWlscylcbiAgICAgICAgLy8gaW50byBhbiBvcmRlcmVkIGFycmF5XG4gICAgICAgIHZhciBwYXRoU2VnbWVudHNBbmRQYXJhbXMgPSB1cmxNYXRjaGVyc1xuICAgICAgICAgICAgLm1hcChVcmxNYXRjaGVyLnBhdGhTZWdtZW50c0FuZFBhcmFtcylcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiAoaXNTdHJpbmcoeCkgPyB4IDogZ2V0RGV0YWlscyh4KSk7IH0pO1xuICAgICAgICAvLyBFeHRyYWN0IHRoZSBxdWVyeSBwYXJhbXMgaW50byBhIHNlcGFyYXRlIGFycmF5XG4gICAgICAgIHZhciBxdWVyeVBhcmFtcyA9IHVybE1hdGNoZXJzXG4gICAgICAgICAgICAubWFwKFVybE1hdGNoZXIucXVlcnlQYXJhbXMpXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLm1hcChnZXREZXRhaWxzKTtcbiAgICAgICAgdmFyIGlzSW52YWxpZCA9IGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gcGFyYW0uaXNWYWxpZCA9PT0gZmFsc2U7IH07XG4gICAgICAgIGlmIChwYXRoU2VnbWVudHNBbmRQYXJhbXMuY29uY2F0KHF1ZXJ5UGFyYW1zKS5maWx0ZXIoaXNJbnZhbGlkKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHaXZlbiBhIFBhcmFtLCBhcHBsaWVzIHRoZSBwYXJhbWV0ZXIgdmFsdWUsIHRoZW4gcmV0dXJucyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBpdFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0RGV0YWlscyhwYXJhbSkge1xuICAgICAgICAgICAgLy8gTm9ybWFsaXplIHRvIHR5cGVkIHZhbHVlXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJhbS52YWx1ZSh2YWx1ZXNbcGFyYW0uaWRdKTtcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gcGFyYW0udmFsaWRhdGVzKHZhbHVlKTtcbiAgICAgICAgICAgIHZhciBpc0RlZmF1bHRWYWx1ZSA9IHBhcmFtLmlzRGVmYXVsdFZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIHNxdWFzaCBtb2RlIGZvciB0aGUgcGFyYW1ldGVyXG4gICAgICAgICAgICB2YXIgc3F1YXNoID0gaXNEZWZhdWx0VmFsdWUgPyBwYXJhbS5zcXVhc2ggOiBmYWxzZTtcbiAgICAgICAgICAgIC8vIEFsbG93IHRoZSBQYXJhbWV0ZXIncyBUeXBlIHRvIGVuY29kZSB0aGUgdmFsdWVcbiAgICAgICAgICAgIHZhciBlbmNvZGVkID0gcGFyYW0udHlwZS5lbmNvZGUodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHsgcGFyYW06IHBhcmFtLCB2YWx1ZTogdmFsdWUsIGlzVmFsaWQ6IGlzVmFsaWQsIGlzRGVmYXVsdFZhbHVlOiBpc0RlZmF1bHRWYWx1ZSwgc3F1YXNoOiBzcXVhc2gsIGVuY29kZWQ6IGVuY29kZWQgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBCdWlsZCB1cCB0aGUgcGF0aC1wb3J0aW9uIGZyb20gdGhlIGxpc3Qgb2Ygc3RhdGljIHNlZ21lbnRzIGFuZCBwYXJhbWV0ZXJzXG4gICAgICAgIHZhciBwYXRoU3RyaW5nID0gcGF0aFNlZ21lbnRzQW5kUGFyYW1zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCB4KSB7XG4gICAgICAgICAgICAvLyBUaGUgZWxlbWVudCBpcyBhIHN0YXRpYyBzZWdtZW50IChhIHJhdyBzdHJpbmcpOyBqdXN0IGFwcGVuZCBpdFxuICAgICAgICAgICAgaWYgKGlzU3RyaW5nKHgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MgKyB4O1xuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBpdCdzIGEgUGFyYW1EZXRhaWxzLlxuICAgICAgICAgICAgdmFyIHNxdWFzaCA9IHguc3F1YXNoLCBlbmNvZGVkID0geC5lbmNvZGVkLCBwYXJhbSA9IHgucGFyYW07XG4gICAgICAgICAgICAvLyBJZiBzcXVhc2ggaXMgPT09IHRydWUsIHRyeSB0byByZW1vdmUgYSBzbGFzaCBmcm9tIHRoZSBwYXRoXG4gICAgICAgICAgICBpZiAoc3F1YXNoID09PSB0cnVlKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MubWF0Y2goL1xcLyQvKSA/IGFjYy5zbGljZSgwLCAtMSkgOiBhY2M7XG4gICAgICAgICAgICAvLyBJZiBzcXVhc2ggaXMgYSBzdHJpbmcsIHVzZSB0aGUgc3RyaW5nIGZvciB0aGUgcGFyYW0gdmFsdWVcbiAgICAgICAgICAgIGlmIChpc1N0cmluZyhzcXVhc2gpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MgKyBzcXVhc2g7XG4gICAgICAgICAgICBpZiAoc3F1YXNoICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjOyAvLyA/XG4gICAgICAgICAgICBpZiAoZW5jb2RlZCA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAvLyBJZiB0aGlzIHBhcmFtZXRlciB2YWx1ZSBpcyBhbiBhcnJheSwgZW5jb2RlIHRoZSB2YWx1ZSB1c2luZyBlbmNvZGVEYXNoZXNcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGVuY29kZWQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MgKyBtYXAoZW5jb2RlZCwgVXJsTWF0Y2hlci5lbmNvZGVEYXNoZXMpLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBwYXJhbWV0ZXIgdHlwZSBpcyBcInJhd1wiLCB0aGVuIGRvIG5vdCBlbmNvZGVVUklDb21wb25lbnRcbiAgICAgICAgICAgIGlmIChwYXJhbS5yYXcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYyArIGVuY29kZWQ7XG4gICAgICAgICAgICAvLyBFbmNvZGUgdGhlIHZhbHVlXG4gICAgICAgICAgICByZXR1cm4gYWNjICsgZW5jb2RlVVJJQ29tcG9uZW50KGVuY29kZWQpO1xuICAgICAgICB9LCAnJyk7XG4gICAgICAgIC8vIEJ1aWxkIHRoZSBxdWVyeSBzdHJpbmcgYnkgYXBwbHlpbmcgcGFyYW1ldGVyIHZhbHVlcyAoYXJyYXkgb3IgcmVndWxhcilcbiAgICAgICAgLy8gdGhlbiBtYXBwaW5nIHRvIGtleT12YWx1ZSwgdGhlbiBmbGF0dGVuaW5nIGFuZCBqb2luaW5nIHVzaW5nIFwiJlwiXG4gICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHF1ZXJ5UGFyYW1zXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChwYXJhbURldGFpbHMpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IHBhcmFtRGV0YWlscy5wYXJhbSwgc3F1YXNoID0gcGFyYW1EZXRhaWxzLnNxdWFzaCwgZW5jb2RlZCA9IHBhcmFtRGV0YWlscy5lbmNvZGVkLCBpc0RlZmF1bHRWYWx1ZSA9IHBhcmFtRGV0YWlscy5pc0RlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIGlmIChlbmNvZGVkID09IG51bGwgfHwgKGlzRGVmYXVsdFZhbHVlICYmIHNxdWFzaCAhPT0gZmFsc2UpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICghaXNBcnJheShlbmNvZGVkKSlcbiAgICAgICAgICAgICAgICBlbmNvZGVkID0gW2VuY29kZWRdO1xuICAgICAgICAgICAgaWYgKGVuY29kZWQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICghcGFyYW0ucmF3KVxuICAgICAgICAgICAgICAgIGVuY29kZWQgPSBtYXAoZW5jb2RlZCwgZW5jb2RlVVJJQ29tcG9uZW50KTtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVkLm1hcChmdW5jdGlvbiAodmFsKSB7IHJldHVybiBwYXJhbS5pZCArIFwiPVwiICsgdmFsOyB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoaWRlbnRpdHkpXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLmpvaW4oJyYnKTtcbiAgICAgICAgLy8gQ29uY2F0IHRoZSBwYXRoc3RyaW5nIHdpdGggdGhlIHF1ZXJ5U3RyaW5nIChpZiBleGlzdHMpIGFuZCB0aGUgaGFzaFN0cmluZyAoaWYgZXhpc3RzKVxuICAgICAgICByZXR1cm4gcGF0aFN0cmluZyArIChxdWVyeVN0cmluZyA/IFwiP1wiICsgcXVlcnlTdHJpbmcgOiAnJykgKyAodmFsdWVzWycjJ10gPyAnIycgKyB2YWx1ZXNbJyMnXSA6ICcnKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVXJsTWF0Y2hlci5uYW1lVmFsaWRhdG9yID0gL15cXHcrKFstLl0rXFx3KykqKD86XFxbXFxdKT8kLztcbiAgICByZXR1cm4gVXJsTWF0Y2hlcjtcbn0oKSk7XG5leHBvcnQgeyBVcmxNYXRjaGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmxNYXRjaGVyLmpzLm1hcCIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBmb3JFYWNoLCBleHRlbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzT2JqZWN0LCBpc0RlZmluZWQsIGlzRnVuY3Rpb24sIGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVXJsTWF0Y2hlciB9IGZyb20gJy4vdXJsTWF0Y2hlcic7XG5pbXBvcnQgeyBQYXJhbSwgRGVmVHlwZSB9IGZyb20gJy4uL3BhcmFtcy9wYXJhbSc7XG5pbXBvcnQgeyBQYXJhbVR5cGVzIH0gZnJvbSAnLi4vcGFyYW1zL3BhcmFtVHlwZXMnO1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFBhcmFtRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQYXJhbUZhY3RvcnkodW1mKSB7XG4gICAgICAgIHRoaXMudW1mID0gdW1mO1xuICAgIH1cbiAgICBQYXJhbUZhY3RvcnkucHJvdG90eXBlLmZyb21Db25maWcgPSBmdW5jdGlvbiAoaWQsIHR5cGUsIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyYW0oaWQsIHR5cGUsIERlZlR5cGUuQ09ORklHLCB0aGlzLnVtZiwgc3RhdGUpO1xuICAgIH07XG4gICAgUGFyYW1GYWN0b3J5LnByb3RvdHlwZS5mcm9tUGF0aCA9IGZ1bmN0aW9uIChpZCwgdHlwZSwgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJhbShpZCwgdHlwZSwgRGVmVHlwZS5QQVRILCB0aGlzLnVtZiwgc3RhdGUpO1xuICAgIH07XG4gICAgUGFyYW1GYWN0b3J5LnByb3RvdHlwZS5mcm9tU2VhcmNoID0gZnVuY3Rpb24gKGlkLCB0eXBlLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFBhcmFtKGlkLCB0eXBlLCBEZWZUeXBlLlNFQVJDSCwgdGhpcy51bWYsIHN0YXRlKTtcbiAgICB9O1xuICAgIHJldHVybiBQYXJhbUZhY3Rvcnk7XG59KCkpO1xuZXhwb3J0IHsgUGFyYW1GYWN0b3J5IH07XG4vKipcbiAqIEZhY3RvcnkgZm9yIFtbVXJsTWF0Y2hlcl1dIGluc3RhbmNlcy5cbiAqXG4gKiBUaGUgZmFjdG9yeSBpcyBhdmFpbGFibGUgdG8gbmcxIHNlcnZpY2VzIGFzXG4gKiBgJHVybE1hdGNoZXJGYWN0b3J5YCBvciBuZzEgcHJvdmlkZXJzIGFzIGAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcmAuXG4gKi9cbnZhciBVcmxNYXRjaGVyRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVcmxNYXRjaGVyRmFjdG9yeSgpIHtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5wYXJhbVR5cGVzID0gbmV3IFBhcmFtVHlwZXMoKTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5faXNDYXNlSW5zZW5zaXRpdmUgPSBmYWxzZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5faXNTdHJpY3RNb2RlID0gdHJ1ZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGVmYXVsdFNxdWFzaFBvbGljeSA9IGZhbHNlO1xuICAgICAgICAvKiogQGludGVybmFsYXBpIENyZWF0ZXMgYSBuZXcgW1tQYXJhbV1dIGZvciBhIGdpdmVuIGxvY2F0aW9uIChEZWZUeXBlKSAqL1xuICAgICAgICB0aGlzLnBhcmFtRmFjdG9yeSA9IG5ldyBQYXJhbUZhY3RvcnkodGhpcyk7XG4gICAgICAgIGV4dGVuZCh0aGlzLCB7IFVybE1hdGNoZXI6IFVybE1hdGNoZXIsIFBhcmFtOiBQYXJhbSB9KTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmNhc2VJbnNlbnNpdGl2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5faXNDYXNlSW5zZW5zaXRpdmUpO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLnN0cmljdE1vZGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9pc1N0cmljdE1vZGUgPSBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiB0aGlzLl9pc1N0cmljdE1vZGUpO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmRlZmF1bHRTcXVhc2hQb2xpY3kgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUgIT09IHRydWUgJiYgdmFsdWUgIT09IGZhbHNlICYmICFpc1N0cmluZyh2YWx1ZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNxdWFzaCBwb2xpY3k6IFwiICsgdmFsdWUgKyBcIi4gVmFsaWQgcG9saWNpZXM6IGZhbHNlLCB0cnVlLCBhcmJpdHJhcnktc3RyaW5nXCIpO1xuICAgICAgICByZXR1cm4gKHRoaXMuX2RlZmF1bHRTcXVhc2hQb2xpY3kgPSBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiB0aGlzLl9kZWZhdWx0U3F1YXNoUG9saWN5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBbW1VybE1hdGNoZXJdXSBmb3IgdGhlIHNwZWNpZmllZCBwYXR0ZXJuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdHRlcm4gIFRoZSBVUkwgcGF0dGVybi5cbiAgICAgKiBAcGFyYW0gY29uZmlnICBUaGUgY29uZmlnIG9iamVjdCBoYXNoLlxuICAgICAqIEByZXR1cm5zIFRoZSBVcmxNYXRjaGVyLlxuICAgICAqL1xuICAgIFVybE1hdGNoZXJGYWN0b3J5LnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24gKHBhdHRlcm4sIGNvbmZpZykge1xuICAgICAgICAvLyBiYWNrd2FyZC1jb21wYXRpYmxlIHN1cHBvcnQgZm9yIGNvbmZpZy5wYXJhbXMgLT4gY29uZmlnLnN0YXRlLnBhcmFtc1xuICAgICAgICB2YXIgcGFyYW1zID0gY29uZmlnICYmICFjb25maWcuc3RhdGUgJiYgY29uZmlnLnBhcmFtcztcbiAgICAgICAgY29uZmlnID0gcGFyYW1zID8gX19hc3NpZ24oeyBzdGF0ZTogeyBwYXJhbXM6IHBhcmFtcyB9IH0sIGNvbmZpZykgOiBjb25maWc7XG4gICAgICAgIHZhciBnbG9iYWxDb25maWcgPSB7IHN0cmljdDogdGhpcy5faXNTdHJpY3RNb2RlLCBjYXNlSW5zZW5zaXRpdmU6IHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlIH07XG4gICAgICAgIHJldHVybiBuZXcgVXJsTWF0Y2hlcihwYXR0ZXJuLCB0aGlzLnBhcmFtVHlwZXMsIHRoaXMucGFyYW1GYWN0b3J5LCBleHRlbmQoZ2xvYmFsQ29uZmlnLCBjb25maWcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIG9iamVjdCBpcyBhIFtbVXJsTWF0Y2hlcl1dLCBvciBmYWxzZSBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2JqZWN0ICBUaGUgb2JqZWN0IHRvIHBlcmZvcm0gdGhlIHR5cGUgY2hlY2sgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBtYXRjaGVzIHRoZSBgVXJsTWF0Y2hlcmAgaW50ZXJmYWNlLCBieVxuICAgICAqICAgICAgICAgIGltcGxlbWVudGluZyBhbGwgdGhlIHNhbWUgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyRmFjdG9yeS5wcm90b3R5cGUuaXNNYXRjaGVyID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAvLyBUT0RPOiB0eXBlb2Y/XG4gICAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICAgIGZvckVhY2goVXJsTWF0Y2hlci5wcm90b3R5cGUsIGZ1bmN0aW9uICh2YWwsIG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbCkpXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmIChpc0RlZmluZWQob2JqZWN0W25hbWVdKSAmJiBpc0Z1bmN0aW9uKG9iamVjdFtuYW1lXSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJlZ2lzdGVycyBhIGN1c3RvbSBbW1BhcmFtVHlwZV1dIG9iamVjdFxuICAgICAqXG4gICAgICogQSBbW1BhcmFtVHlwZV1dIGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIFVSTHMgd2l0aCB0eXBlZCBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgIFRoZSB0eXBlIG5hbWUuXG4gICAgICogQHBhcmFtIGRlZmluaXRpb24gVGhlIHR5cGUgZGVmaW5pdGlvbi4gU2VlIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGZvciBpbmZvcm1hdGlvbiBvbiB0aGUgdmFsdWVzIGFjY2VwdGVkLlxuICAgICAqIEBwYXJhbSBkZWZpbml0aW9uRm4gQSBmdW5jdGlvbiB0aGF0IGlzIGluamVjdGVkIGJlZm9yZSB0aGUgYXBwIHJ1bnRpbWUgc3RhcnRzLlxuICAgICAqICAgICAgICBUaGUgcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIGEgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0uXG4gICAgICogICAgICAgIFRoZSByZXN1bHQgaXMgbWVyZ2VkIGludG8gdGhlIGV4aXN0aW5nIGBkZWZpbml0aW9uYC5cbiAgICAgKiAgICAgICAgU2VlIFtbUGFyYW1UeXBlXV0gZm9yIGluZm9ybWF0aW9uIG9uIHRoZSB2YWx1ZXMgYWNjZXB0ZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyAtIGlmIGEgdHlwZSB3YXMgcmVnaXN0ZXJlZDogdGhlIFtbVXJsTWF0Y2hlckZhY3RvcnldXVxuICAgICAqICAgLSBpZiBvbmx5IHRoZSBgbmFtZWAgcGFyYW1ldGVyIHdhcyBzcGVjaWZpZWQ6IHRoZSBjdXJyZW50bHkgcmVnaXN0ZXJlZCBbW1BhcmFtVHlwZV1dIG9iamVjdCwgb3IgdW5kZWZpbmVkXG4gICAgICpcbiAgICAgKiBOb3RlOiBSZWdpc3RlciBjdXN0b20gdHlwZXMgKmJlZm9yZSB1c2luZyB0aGVtKiBpbiBhIHN0YXRlIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBTZWUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gZm9yIGV4YW1wbGVzXG4gICAgICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKSB7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy5wYXJhbVR5cGVzLnR5cGUobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKTtcbiAgICAgICAgcmV0dXJuICFpc0RlZmluZWQoZGVmaW5pdGlvbikgPyB0eXBlIDogdGhpcztcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5lbnF1ZXVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5fZmx1c2hUeXBlUXVldWUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5kaXNwb3NlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gVXJsTWF0Y2hlckZhY3Rvcnk7XG59KCkpO1xuZXhwb3J0IHsgVXJsTWF0Y2hlckZhY3RvcnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybE1hdGNoZXJGYWN0b3J5LmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi8gLyoqICovXG5pbXBvcnQgeyBVcmxNYXRjaGVyIH0gZnJvbSAnLi91cmxNYXRjaGVyJztcbmltcG9ydCB7IGlzU3RyaW5nLCBpc0RlZmluZWQsIGlzRnVuY3Rpb24gfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBpZGVudGl0eSwgZXh0ZW5kIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpcywgcGF0dGVybiB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG4vKipcbiAqIENyZWF0ZXMgYSBbW1VybFJ1bGVdXVxuICpcbiAqIENyZWF0ZXMgYSBbW1VybFJ1bGVdXSBmcm9tIGE6XG4gKlxuICogLSBgc3RyaW5nYFxuICogLSBbW1VybE1hdGNoZXJdXVxuICogLSBgUmVnRXhwYFxuICogLSBbW1N0YXRlT2JqZWN0XV1cbiAqIEBpbnRlcm5hbGFwaVxuICovXG52YXIgVXJsUnVsZUZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVXJsUnVsZUZhY3Rvcnkocm91dGVyKSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgIH1cbiAgICBVcmxSdWxlRmFjdG9yeS5wcm90b3R5cGUuY29tcGlsZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLnVybE1hdGNoZXJGYWN0b3J5LmNvbXBpbGUoc3RyKTtcbiAgICB9O1xuICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAod2hhdCwgaGFuZGxlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgaXNTdGF0ZSA9IFN0YXRlT2JqZWN0LmlzU3RhdGU7XG4gICAgICAgIHZhciBtYWtlUnVsZSA9IHBhdHRlcm4oW1xuICAgICAgICAgICAgW2lzU3RyaW5nLCBmdW5jdGlvbiAoX3doYXQpIHsgcmV0dXJuIG1ha2VSdWxlKF90aGlzLmNvbXBpbGUoX3doYXQpKTsgfV0sXG4gICAgICAgICAgICBbaXMoVXJsTWF0Y2hlciksIGZ1bmN0aW9uIChfd2hhdCkgeyByZXR1cm4gX3RoaXMuZnJvbVVybE1hdGNoZXIoX3doYXQsIGhhbmRsZXIpOyB9XSxcbiAgICAgICAgICAgIFtpc1N0YXRlLCBmdW5jdGlvbiAoX3doYXQpIHsgcmV0dXJuIF90aGlzLmZyb21TdGF0ZShfd2hhdCwgX3RoaXMucm91dGVyKTsgfV0sXG4gICAgICAgICAgICBbaXMoUmVnRXhwKSwgZnVuY3Rpb24gKF93aGF0KSB7IHJldHVybiBfdGhpcy5mcm9tUmVnRXhwKF93aGF0LCBoYW5kbGVyKTsgfV0sXG4gICAgICAgICAgICBbaXNGdW5jdGlvbiwgZnVuY3Rpb24gKF93aGF0KSB7IHJldHVybiBuZXcgQmFzZVVybFJ1bGUoX3doYXQsIGhhbmRsZXIpOyB9XSxcbiAgICAgICAgXSk7XG4gICAgICAgIHZhciBydWxlID0gbWFrZVJ1bGUod2hhdCk7XG4gICAgICAgIGlmICghcnVsZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgJ3doYXQnIGluIHdoZW4oKVwiKTtcbiAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIFVybFJ1bGUgd2hpY2ggbWF0Y2hlcyBiYXNlZCBvbiBhIFVybE1hdGNoZXJcbiAgICAgKlxuICAgICAqIFRoZSBgaGFuZGxlcmAgbWF5IGJlIGVpdGhlciBhIGBzdHJpbmdgLCBhIFtbVXJsUnVsZUhhbmRsZXJGbl1dIG9yIGFub3RoZXIgW1tVcmxNYXRjaGVyXV1cbiAgICAgKlxuICAgICAqICMjIEhhbmRsZXIgYXMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogSWYgYGhhbmRsZXJgIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGg6XG4gICAgICpcbiAgICAgKiAtIG1hdGNoZWQgcGFyYW1ldGVyIHZhbHVlcyAoW1tSYXdQYXJhbXNdXSBmcm9tIFtbVXJsTWF0Y2hlci5leGVjXV0pXG4gICAgICogLSB1cmw6IHRoZSBjdXJyZW50IFVybCAoW1tVcmxQYXJ0c11dKVxuICAgICAqIC0gcm91dGVyOiB0aGUgcm91dGVyIG9iamVjdCAoW1tVSVJvdXRlcl1dKVxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIHVybE1hdGNoZXIgPSAkdW1mLmNvbXBpbGUoXCIvZm9vLzpmb29JZC86YmFySWRcIik7XG4gICAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21VcmxNYXRjaGVyKHVybE1hdGNoZXIsIG1hdGNoID0+IFwiL2hvbWUvXCIgKyBtYXRjaC5mb29JZCArIFwiL1wiICsgbWF0Y2guYmFySWQpO1xuICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvMTIzLzQ1NidcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIEhhbmRsZXIgYXMgVXJsTWF0Y2hlclxuICAgICAqXG4gICAgICogSWYgYGhhbmRsZXJgIGlzIGEgVXJsTWF0Y2hlciwgdGhlIGhhbmRsZXIgbWF0Y2hlciBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgbmV3IHVybC5cbiAgICAgKiBUaGUgYGhhbmRsZXJgIFVybE1hdGNoZXIgaXMgZm9ybWF0dGVkIHVzaW5nIHRoZSBtYXRjaGVkIHBhcmFtIGZyb20gdGhlIGZpcnN0IG1hdGNoZXIuXG4gICAgICogVGhlIHVybCBpcyByZXBsYWNlZCB3aXRoIHRoZSByZXN1bHQuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiB2YXIgdXJsTWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb28vOmZvb0lkLzpiYXJJZFwiKTtcbiAgICAgKiB2YXIgaGFuZGxlciA9ICR1bWYuY29tcGlsZShcIi9ob21lLzpmb29JZC86YmFySWRcIik7XG4gICAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21VcmxNYXRjaGVyKHVybE1hdGNoZXIsIGhhbmRsZXIpO1xuICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvMTIzLzQ1NidcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBVcmxSdWxlRmFjdG9yeS5wcm90b3R5cGUuZnJvbVVybE1hdGNoZXIgPSBmdW5jdGlvbiAodXJsTWF0Y2hlciwgaGFuZGxlcikge1xuICAgICAgICB2YXIgX2hhbmRsZXIgPSBoYW5kbGVyO1xuICAgICAgICBpZiAoaXNTdHJpbmcoaGFuZGxlcikpXG4gICAgICAgICAgICBoYW5kbGVyID0gdGhpcy5yb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZShoYW5kbGVyKTtcbiAgICAgICAgaWYgKGlzKFVybE1hdGNoZXIpKGhhbmRsZXIpKVxuICAgICAgICAgICAgX2hhbmRsZXIgPSBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIGhhbmRsZXIuZm9ybWF0KG1hdGNoKTsgfTtcbiAgICAgICAgZnVuY3Rpb24gbWF0Y2hVcmxQYXJhbXRlcnModXJsKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdXJsTWF0Y2hlci5leGVjKHVybC5wYXRoLCB1cmwuc2VhcmNoLCB1cmwuaGFzaCk7XG4gICAgICAgICAgICByZXR1cm4gdXJsTWF0Y2hlci52YWxpZGF0ZXMocGFyYW1zKSAmJiBwYXJhbXM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJpb3JpdGl6ZSBVUkxzLCBsb3dlc3QgdG8gaGlnaGVzdDpcbiAgICAgICAgLy8gLSBTb21lIG9wdGlvbmFsIFVSTCBwYXJhbWV0ZXJzLCBidXQgbm9uZSBtYXRjaGVkXG4gICAgICAgIC8vIC0gTm8gb3B0aW9uYWwgcGFyYW1ldGVycyBpbiBVUkxcbiAgICAgICAgLy8gLSBTb21lIG9wdGlvbmFsIHBhcmFtZXRlcnMsIHNvbWUgbWF0Y2hlZFxuICAgICAgICAvLyAtIFNvbWUgb3B0aW9uYWwgcGFyYW1ldGVycywgYWxsIG1hdGNoZWRcbiAgICAgICAgZnVuY3Rpb24gbWF0Y2hQcmlvcml0eShwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25hbCA9IHVybE1hdGNoZXIucGFyYW1ldGVycygpLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtLmlzT3B0aW9uYWw7IH0pO1xuICAgICAgICAgICAgaWYgKCFvcHRpb25hbC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuMDAwMDAxO1xuICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSBvcHRpb25hbC5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiBwYXJhbXNbcGFyYW0uaWRdOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVkLmxlbmd0aCAvIG9wdGlvbmFsLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGV0YWlscyA9IHsgdXJsTWF0Y2hlcjogdXJsTWF0Y2hlciwgbWF0Y2hQcmlvcml0eTogbWF0Y2hQcmlvcml0eSwgdHlwZTogJ1VSTE1BVENIRVInIH07XG4gICAgICAgIHJldHVybiBleHRlbmQobmV3IEJhc2VVcmxSdWxlKG1hdGNoVXJsUGFyYW10ZXJzLCBfaGFuZGxlciksIGRldGFpbHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBVcmxSdWxlIHdoaWNoIG1hdGNoZXMgYSBzdGF0ZSBieSBpdHMgdXJsXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVN0YXRlKCRzdGF0ZS5nZXQoJ2ZvbycpLCByb3V0ZXIpO1xuICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpO1xuICAgICAqIC8vIFN0YXJ0cyBhIHRyYW5zaXRpb24gdG8gJ2Zvbycgd2l0aCBwYXJhbXM6IHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIHJvdXRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlcyBtYXRjaCBieSB0cmFuc2l0aW9uaW5nIHRvIG1hdGNoZWQgc3RhdGVcbiAgICAgICAgICpcbiAgICAgICAgICogRmlyc3QgY2hlY2tzIGlmIHRoZSByb3V0ZXIgc2hvdWxkIHN0YXJ0IGEgbmV3IHRyYW5zaXRpb24uXG4gICAgICAgICAqIEEgbmV3IHRyYW5zaXRpb24gaXMgbm90IHJlcXVpcmVkIGlmIHRoZSBjdXJyZW50IHN0YXRlJ3MgVVJMXG4gICAgICAgICAqIGFuZCB0aGUgbmV3IFVSTCBhcmUgYWxyZWFkeSBpZGVudGljYWxcbiAgICAgICAgICovXG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgICAgICB2YXIgJHN0YXRlID0gcm91dGVyLnN0YXRlU2VydmljZTtcbiAgICAgICAgICAgIHZhciBnbG9iYWxzID0gcm91dGVyLmdsb2JhbHM7XG4gICAgICAgICAgICBpZiAoJHN0YXRlLmhyZWYoc3RhdGUsIG1hdGNoKSAhPT0gJHN0YXRlLmhyZWYoZ2xvYmFscy5jdXJyZW50LCBnbG9iYWxzLnBhcmFtcykpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUudHJhbnNpdGlvblRvKHN0YXRlLCBtYXRjaCwgeyBpbmhlcml0OiB0cnVlLCBzb3VyY2U6ICd1cmwnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgZGV0YWlscyA9IHsgc3RhdGU6IHN0YXRlLCB0eXBlOiAnU1RBVEUnIH07XG4gICAgICAgIHJldHVybiBleHRlbmQodGhpcy5mcm9tVXJsTWF0Y2hlcihzdGF0ZS51cmwsIGhhbmRsZXIpLCBkZXRhaWxzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgVXJsUnVsZSB3aGljaCBtYXRjaGVzIGJhc2VkIG9uIGEgcmVndWxhciBleHByZXNzaW9uXG4gICAgICpcbiAgICAgKiBUaGUgYGhhbmRsZXJgIG1heSBiZSBlaXRoZXIgYSBbW1VybFJ1bGVIYW5kbGVyRm5dXSBvciBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqICMjIEhhbmRsZXIgYXMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogSWYgYGhhbmRsZXJgIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGg6XG4gICAgICpcbiAgICAgKiAtIHJlZ2V4cCBtYXRjaCBhcnJheSAoZnJvbSBgcmVnZXhwYClcbiAgICAgKiAtIHVybDogdGhlIGN1cnJlbnQgVXJsIChbW1VybFBhcnRzXV0pXG4gICAgICogLSByb3V0ZXI6IHRoZSByb3V0ZXIgb2JqZWN0IChbW1VJUm91dGVyXV0pXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVJlZ0V4cCgvXlxcL2Zvb1xcLyhiYXJ8YmF6KSQvLCBtYXRjaCA9PiBcIi9ob21lL1wiICsgbWF0Y2hbMV0pXG4gICAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby9iYXInKTsgLy8gcmVzdWx0cyBpbiBbICcvZm9vL2JhcicsICdiYXInIF1cbiAgICAgKiB2YXIgcmVzdWx0ID0gcnVsZS5oYW5kbGVyKG1hdGNoKTsgLy8gJy9ob21lL2JhcidcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIEhhbmRsZXIgYXMgc3RyaW5nXG4gICAgICpcbiAgICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBzdHJpbmcsIHRoZSB1cmwgaXMgKnJlcGxhY2VkIGJ5IHRoZSBzdHJpbmcqIHdoZW4gdGhlIFJ1bGUgaXMgaW52b2tlZC5cbiAgICAgKiBUaGUgc3RyaW5nIGlzIGZpcnN0IGludGVycG9sYXRlZCB1c2luZyBgc3RyaW5nLnJlcGxhY2UoKWAgc3R5bGUgcGF0dGVybi5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tUmVnRXhwKC9eXFwvZm9vXFwvKGJhcnxiYXopJC8sIFwiL2hvbWUvJDFcIilcbiAgICAgKiB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKCcvZm9vL2JhcicpOyAvLyByZXN1bHRzIGluIFsgJy9mb28vYmFyJywgJ2JhcicgXVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvYmFyJ1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tUmVnRXhwID0gZnVuY3Rpb24gKHJlZ2V4cCwgaGFuZGxlcikge1xuICAgICAgICBpZiAocmVnZXhwLmdsb2JhbCB8fCByZWdleHAuc3RpY2t5KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSdWxlIFJlZ0V4cCBtdXN0IG5vdCBiZSBnbG9iYWwgb3Igc3RpY2t5Jyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBoYW5kbGVyIGlzIGEgc3RyaW5nLCB0aGUgdXJsIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIHN0cmluZy5cbiAgICAgICAgICogSWYgdGhlIHN0cmluZyBoYXMgYW55IFN0cmluZy5yZXBsYWNlKCkgc3R5bGUgdmFyaWFibGVzIGluIGl0IChsaWtlIGAkMmApLFxuICAgICAgICAgKiB0aGV5IHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIGNhcHR1cmVzIGZyb20gW1ttYXRjaF1dXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmVkaXJlY3RVcmxUbyA9IGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgLy8gSW50ZXJwb2xhdGVzIG1hdGNoZWQgdmFsdWVzIGludG8gJDEgJDIsIGV0YyB1c2luZyBhIFN0cmluZy5yZXBsYWNlKCktc3R5bGUgcGF0dGVyblxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIucmVwbGFjZSgvXFwkKFxcJHxcXGR7MSwyfSkvLCBmdW5jdGlvbiAobSwgd2hhdCkgeyByZXR1cm4gbWF0Y2hbd2hhdCA9PT0gJyQnID8gMCA6IE51bWJlcih3aGF0KV07IH0pO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgX2hhbmRsZXIgPSBpc1N0cmluZyhoYW5kbGVyKSA/IHJlZGlyZWN0VXJsVG8gOiBoYW5kbGVyO1xuICAgICAgICB2YXIgbWF0Y2hQYXJhbXNGcm9tUmVnZXhwID0gZnVuY3Rpb24gKHVybCkgeyByZXR1cm4gcmVnZXhwLmV4ZWModXJsLnBhdGgpOyB9O1xuICAgICAgICB2YXIgZGV0YWlscyA9IHsgcmVnZXhwOiByZWdleHAsIHR5cGU6ICdSRUdFWFAnIH07XG4gICAgICAgIHJldHVybiBleHRlbmQobmV3IEJhc2VVcmxSdWxlKG1hdGNoUGFyYW1zRnJvbVJlZ2V4cCwgX2hhbmRsZXIpLCBkZXRhaWxzKTtcbiAgICB9O1xuICAgIFVybFJ1bGVGYWN0b3J5LmlzVXJsUnVsZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBbJ3R5cGUnLCAnbWF0Y2gnLCAnaGFuZGxlciddLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGlzRGVmaW5lZChvYmpba2V5XSk7IH0pOyB9O1xuICAgIHJldHVybiBVcmxSdWxlRmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBVcmxSdWxlRmFjdG9yeSB9O1xuLyoqXG4gKiBBIGJhc2UgcnVsZSB3aGljaCBjYWxscyBgbWF0Y2hgXG4gKlxuICogVGhlIHZhbHVlIGZyb20gdGhlIGBtYXRjaGAgZnVuY3Rpb24gaXMgcGFzc2VkIHRocm91Z2ggdG8gdGhlIGBoYW5kbGVyYC5cbiAqIEBpbnRlcm5hbGFwaVxuICovXG52YXIgQmFzZVVybFJ1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmFzZVVybFJ1bGUobWF0Y2gsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5tYXRjaCA9IG1hdGNoO1xuICAgICAgICB0aGlzLnR5cGUgPSAnUkFXJztcbiAgICAgICAgdGhpcy5tYXRjaFByaW9yaXR5ID0gZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiAwIC0gX3RoaXMuJGlkOyB9O1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyIHx8IGlkZW50aXR5O1xuICAgIH1cbiAgICByZXR1cm4gQmFzZVVybFJ1bGU7XG59KCkpO1xuZXhwb3J0IHsgQmFzZVVybFJ1bGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybFJ1bGUuanMubWFwIiwiLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgY3JlYXRlUHJveHlGdW5jdGlvbnMsIGV4dGVuZCwgcmVtb3ZlRnJvbSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc0Z1bmN0aW9uLCBpc1N0cmluZyB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuL3VybE1hdGNoZXInO1xuaW1wb3J0IHsgaXMsIHBhdHRlcm4sIHZhbCB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgVXJsUnVsZUZhY3RvcnkgfSBmcm9tICcuL3VybFJ1bGUnO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS90YXJnZXRTdGF0ZSc7XG5pbXBvcnQgeyBzdHJpcExhc3RQYXRoRWxlbWVudCB9IGZyb20gJy4uL2NvbW1vbic7XG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gYXBwZW5kQmFzZVBhdGgodXJsLCBpc0h0bWw1LCBhYnNvbHV0ZSwgYmFzZUhyZWYpIHtcbiAgICBpZiAoYmFzZUhyZWYgPT09ICcvJylcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICBpZiAoaXNIdG1sNSlcbiAgICAgICAgcmV0dXJuIHN0cmlwTGFzdFBhdGhFbGVtZW50KGJhc2VIcmVmKSArIHVybDtcbiAgICBpZiAoYWJzb2x1dGUpXG4gICAgICAgIHJldHVybiBiYXNlSHJlZi5zbGljZSgxKSArIHVybDtcbiAgICByZXR1cm4gdXJsO1xufVxuLyoqIEBoaWRkZW4gKi9cbnZhciBwcmlvcml0eVNvcnQgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gKGIucHJpb3JpdHkgfHwgMCkgLSAoYS5wcmlvcml0eSB8fCAwKTsgfTtcbi8qKiBAaGlkZGVuICovXG52YXIgdHlwZVNvcnQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHZhciB3ZWlnaHRzID0geyBTVEFURTogNCwgVVJMTUFUQ0hFUjogNCwgUkVHRVhQOiAzLCBSQVc6IDIsIE9USEVSOiAxIH07XG4gICAgcmV0dXJuICh3ZWlnaHRzW2EudHlwZV0gfHwgMCkgLSAod2VpZ2h0c1tiLnR5cGVdIHx8IDApO1xufTtcbi8qKiBAaGlkZGVuICovXG52YXIgdXJsTWF0Y2hlclNvcnQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiAhYS51cmxNYXRjaGVyIHx8ICFiLnVybE1hdGNoZXIgPyAwIDogVXJsTWF0Y2hlci5jb21wYXJlKGEudXJsTWF0Y2hlciwgYi51cmxNYXRjaGVyKTtcbn07XG4vKiogQGhpZGRlbiAqL1xudmFyIGlkU29ydCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgLy8gSWRlbnRpY2FsbHkgc29ydGVkIFNUQVRFIGFuZCBVUkxNQVRDSEVSIGJlc3QgcnVsZSB3aWxsIGJlIGNob3NlbiBieSBgbWF0Y2hQcmlvcml0eWAgYWZ0ZXIgZWFjaCBydWxlIG1hdGNoZXMgdGhlIFVSTFxuICAgIHZhciB1c2VNYXRjaFByaW9yaXR5ID0geyBTVEFURTogdHJ1ZSwgVVJMTUFUQ0hFUjogdHJ1ZSB9O1xuICAgIHZhciBlcXVhbCA9IHVzZU1hdGNoUHJpb3JpdHlbYS50eXBlXSAmJiB1c2VNYXRjaFByaW9yaXR5W2IudHlwZV07XG4gICAgcmV0dXJuIGVxdWFsID8gMCA6IChhLiRpZCB8fCAwKSAtIChiLiRpZCB8fCAwKTtcbn07XG4vKipcbiAqIERlZmF1bHQgcnVsZSBwcmlvcml0eSBzb3J0aW5nIGZ1bmN0aW9uLlxuICpcbiAqIFNvcnRzIHJ1bGVzIGJ5OlxuICpcbiAqIC0gRXhwbGljaXQgcHJpb3JpdHkgKHNldCBydWxlIHByaW9yaXR5IHVzaW5nIFtbVXJsUnVsZXNBcGkud2hlbl1dKVxuICogLSBSdWxlIHR5cGUgKFNUQVRFOiA0LCBVUkxNQVRDSEVSOiA0LCBSRUdFWFA6IDMsIFJBVzogMiwgT1RIRVI6IDEpXG4gKiAtIGBVcmxNYXRjaGVyYCBzcGVjaWZpY2l0eSAoW1tVcmxNYXRjaGVyLmNvbXBhcmVdXSk6IHdvcmtzIGZvciBTVEFURSBhbmQgVVJMTUFUQ0hFUiB0eXBlcyB0byBwaWNrIHRoZSBtb3N0IHNwZWNpZmljIHJ1bGUuXG4gKiAtIFJ1bGUgcmVnaXN0cmF0aW9uIG9yZGVyIChmb3IgcnVsZSB0eXBlcyBvdGhlciB0aGFuIFNUQVRFIGFuZCBVUkxNQVRDSEVSKVxuICogICAtIEVxdWFsbHkgc29ydGVkIFN0YXRlIGFuZCBVcmxNYXRjaGVyIHJ1bGVzIHdpbGwgZWFjaCBtYXRjaCB0aGUgVVJMLlxuICogICAgIFRoZW4sIHRoZSAqYmVzdCogbWF0Y2ggaXMgY2hvc2VuIGJhc2VkIG9uIGhvdyBtYW55IHBhcmFtZXRlciB2YWx1ZXMgd2VyZSBtYXRjaGVkLlxuICpcbiAqIEBjb3JlYXBpXG4gKi9cbnZhciBkZWZhdWx0UnVsZVNvcnRGbjtcbmRlZmF1bHRSdWxlU29ydEZuID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICB2YXIgY21wID0gcHJpb3JpdHlTb3J0KGEsIGIpO1xuICAgIGlmIChjbXAgIT09IDApXG4gICAgICAgIHJldHVybiBjbXA7XG4gICAgY21wID0gdHlwZVNvcnQoYSwgYik7XG4gICAgaWYgKGNtcCAhPT0gMClcbiAgICAgICAgcmV0dXJuIGNtcDtcbiAgICBjbXAgPSB1cmxNYXRjaGVyU29ydChhLCBiKTtcbiAgICBpZiAoY21wICE9PSAwKVxuICAgICAgICByZXR1cm4gY21wO1xuICAgIHJldHVybiBpZFNvcnQoYSwgYik7XG59O1xuLyoqXG4gKiBVcGRhdGVzIFVSTCBhbmQgcmVzcG9uZHMgdG8gVVJMIGNoYW5nZXNcbiAqXG4gKiAjIyMgRGVwcmVjYXRpb24gd2FybmluZzpcbiAqIFRoaXMgY2xhc3MgaXMgbm93IGNvbnNpZGVyZWQgdG8gYmUgYW4gaW50ZXJuYWwgQVBJXG4gKiBVc2UgdGhlIFtbVXJsU2VydmljZV1dIGluc3RlYWQuXG4gKiBGb3IgY29uZmlndXJpbmcgVVJMIHJ1bGVzLCB1c2UgdGhlIFtbVXJsUnVsZXNBcGldXSB3aGljaCBjYW4gYmUgZm91bmQgYXMgW1tVcmxTZXJ2aWNlLnJ1bGVzXV0uXG4gKlxuICogVGhpcyBjbGFzcyB1cGRhdGVzIHRoZSBVUkwgd2hlbiB0aGUgc3RhdGUgY2hhbmdlcy5cbiAqIEl0IGFsc28gcmVzcG9uZHMgdG8gY2hhbmdlcyBpbiB0aGUgVVJMLlxuICovXG52YXIgVXJsUm91dGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gVXJsUm91dGVyKHJvdXRlcikge1xuICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLl9zb3J0Rm4gPSBkZWZhdWx0UnVsZVNvcnRGbjtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fcnVsZXMgPSBbXTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5pbnRlcmNlcHREZWZlcnJlZCA9IGZhbHNlO1xuICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLl9pZCA9IDA7XG4gICAgICAgIC8qKiBAaGlkZGVuICovIHRoaXMuX3NvcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMudXJsUnVsZUZhY3RvcnkgPSBuZXcgVXJsUnVsZUZhY3Rvcnkocm91dGVyKTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModmFsKFVybFJvdXRlci5wcm90b3R5cGUpLCB0aGlzLCB2YWwodGhpcykpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxpc3RlbihmYWxzZSk7XG4gICAgICAgIHRoaXMuX3J1bGVzID0gW107XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9vdGhlcndpc2VGbjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIChjb21wYXJlRm4pIHtcbiAgICAgICAgdGhpcy5fcnVsZXMgPSB0aGlzLnN0YWJsZVNvcnQodGhpcy5fcnVsZXMsICh0aGlzLl9zb3J0Rm4gPSBjb21wYXJlRm4gfHwgdGhpcy5fc29ydEZuKSk7XG4gICAgICAgIHRoaXMuX3NvcnRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLmVuc3VyZVNvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fc29ydGVkIHx8IHRoaXMuc29ydCgpO1xuICAgIH07XG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5zdGFibGVTb3J0ID0gZnVuY3Rpb24gKGFyciwgY29tcGFyZUZuKSB7XG4gICAgICAgIHZhciBhcnJPZldyYXBwZXIgPSBhcnIubWFwKGZ1bmN0aW9uIChlbGVtLCBpZHgpIHsgcmV0dXJuICh7IGVsZW06IGVsZW0sIGlkeDogaWR4IH0pOyB9KTtcbiAgICAgICAgYXJyT2ZXcmFwcGVyLnNvcnQoZnVuY3Rpb24gKHdyYXBwZXJBLCB3cmFwcGVyQikge1xuICAgICAgICAgICAgdmFyIGNtcERpZmYgPSBjb21wYXJlRm4od3JhcHBlckEuZWxlbSwgd3JhcHBlckIuZWxlbSk7XG4gICAgICAgICAgICByZXR1cm4gY21wRGlmZiA9PT0gMCA/IHdyYXBwZXJBLmlkeCAtIHdyYXBwZXJCLmlkeCA6IGNtcERpZmY7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXJyT2ZXcmFwcGVyLm1hcChmdW5jdGlvbiAod3JhcHBlcikgeyByZXR1cm4gd3JhcHBlci5lbGVtOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgVVJMLCBjaGVjayBhbGwgcnVsZXMgYW5kIHJldHVybiB0aGUgYmVzdCBbW01hdGNoUmVzdWx0XV1cbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICogQHJldHVybnMge01hdGNoUmVzdWx0fVxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZW5zdXJlU29ydGVkKCk7XG4gICAgICAgIHVybCA9IGV4dGVuZCh7IHBhdGg6ICcnLCBzZWFyY2g6IHt9LCBoYXNoOiAnJyB9LCB1cmwpO1xuICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVzKCk7XG4gICAgICAgIGlmICh0aGlzLl9vdGhlcndpc2VGbilcbiAgICAgICAgICAgIHJ1bGVzLnB1c2godGhpcy5fb3RoZXJ3aXNlRm4pO1xuICAgICAgICAvLyBDaGVja3MgYSBzaW5nbGUgcnVsZS4gUmV0dXJucyB7IHJ1bGU6IHJ1bGUsIG1hdGNoOiBtYXRjaCwgd2VpZ2h0OiB3ZWlnaHQgfSBpZiBpdCBtYXRjaGVkLCBvciB1bmRlZmluZWRcbiAgICAgICAgdmFyIGNoZWNrUnVsZSA9IGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKHVybCwgX3RoaXMuX3JvdXRlcik7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2ggJiYgeyBtYXRjaDogbWF0Y2gsIHJ1bGU6IHJ1bGUsIHdlaWdodDogcnVsZS5tYXRjaFByaW9yaXR5KG1hdGNoKSB9O1xuICAgICAgICB9O1xuICAgICAgICAvLyBUaGUgcnVsZXMgYXJlIHByZS1zb3J0ZWQuXG4gICAgICAgIC8vIC0gRmluZCB0aGUgZmlyc3QgbWF0Y2hpbmcgcnVsZS5cbiAgICAgICAgLy8gLSBGaW5kIGFueSBvdGhlciBtYXRjaGluZyBydWxlIHRoYXQgc29ydGVkICpleGFjdGx5IHRoZSBzYW1lKiwgYWNjb3JkaW5nIHRvIGAuc29ydCgpYC5cbiAgICAgICAgLy8gLSBDaG9vc2UgdGhlIHJ1bGUgd2l0aCB0aGUgaGlnaGVzdCBtYXRjaCB3ZWlnaHQuXG4gICAgICAgIHZhciBiZXN0O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBTdG9wIHdoZW4gdGhlcmUgaXMgYSAnYmVzdCcgcnVsZSBhbmQgdGhlIG5leHQgcnVsZSBzb3J0cyBkaWZmZXJlbnRseSB0aGFuIGl0LlxuICAgICAgICAgICAgaWYgKGJlc3QgJiYgdGhpcy5fc29ydEZuKHJ1bGVzW2ldLCBiZXN0LnJ1bGUpICE9PSAwKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBjaGVja1J1bGUocnVsZXNbaV0pO1xuICAgICAgICAgICAgLy8gUGljayB0aGUgYmVzdCBNYXRjaFJlc3VsdFxuICAgICAgICAgICAgYmVzdCA9ICFiZXN0IHx8IChjdXJyZW50ICYmIGN1cnJlbnQud2VpZ2h0ID4gYmVzdC53ZWlnaHQpID8gY3VycmVudCA6IGJlc3Q7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJlc3Q7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGlmIChldnQgJiYgZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLl9yb3V0ZXIsICR1cmwgPSByb3V0ZXIudXJsU2VydmljZSwgJHN0YXRlID0gcm91dGVyLnN0YXRlU2VydmljZTtcbiAgICAgICAgdmFyIHVybCA9IHtcbiAgICAgICAgICAgIHBhdGg6ICR1cmwucGF0aCgpLFxuICAgICAgICAgICAgc2VhcmNoOiAkdXJsLnNlYXJjaCgpLFxuICAgICAgICAgICAgaGFzaDogJHVybC5oYXNoKCksXG4gICAgICAgIH07XG4gICAgICAgIHZhciBiZXN0ID0gdGhpcy5tYXRjaCh1cmwpO1xuICAgICAgICB2YXIgYXBwbHlSZXN1bHQgPSBwYXR0ZXJuKFtcbiAgICAgICAgICAgIFtpc1N0cmluZywgZnVuY3Rpb24gKG5ld3VybCkgeyByZXR1cm4gJHVybC51cmwobmV3dXJsLCB0cnVlKTsgfV0sXG4gICAgICAgICAgICBbVGFyZ2V0U3RhdGUuaXNEZWYsIGZ1bmN0aW9uIChkZWYpIHsgcmV0dXJuICRzdGF0ZS5nbyhkZWYuc3RhdGUsIGRlZi5wYXJhbXMsIGRlZi5vcHRpb25zKTsgfV0sXG4gICAgICAgICAgICBbaXMoVGFyZ2V0U3RhdGUpLCBmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiAkc3RhdGUuZ28odGFyZ2V0LnN0YXRlKCksIHRhcmdldC5wYXJhbXMoKSwgdGFyZ2V0Lm9wdGlvbnMoKSk7IH1dLFxuICAgICAgICBdKTtcbiAgICAgICAgYXBwbHlSZXN1bHQoYmVzdCAmJiBiZXN0LnJ1bGUuaGFuZGxlcihiZXN0Lm1hdGNoLCB1cmwsIHJvdXRlcikpO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAoZW5hYmxlZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoZW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0b3BGbiAmJiB0aGlzLl9zdG9wRm4oKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9zdG9wRm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX3N0b3BGbiA9IHRoaXMuX3N0b3BGbiB8fCB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS5vbkNoYW5nZShmdW5jdGlvbiAoZXZ0KSB7IHJldHVybiBfdGhpcy5zeW5jKGV2dCk7IH0pKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJLlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJlYWQpIHtcbiAgICAgICAgdmFyICR1cmwgPSB0aGlzLl9yb3V0ZXIubG9jYXRpb25TZXJ2aWNlO1xuICAgICAgICBpZiAocmVhZCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9ICR1cmwudXJsKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCR1cmwudXJsKCkgPT09IHRoaXMubG9jYXRpb24pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICR1cmwudXJsKHRoaXMubG9jYXRpb24sIHRydWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJLlxuICAgICAqXG4gICAgICogUHVzaGVzIGEgbmV3IGxvY2F0aW9uIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKiBAcGFyYW0gdXJsTWF0Y2hlclxuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlcGxhY2UgPSBvcHRpb25zICYmICEhb3B0aW9ucy5yZXBsYWNlO1xuICAgICAgICB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS51cmwodXJsTWF0Y2hlci5mb3JtYXQocGFyYW1zIHx8IHt9KSwgcmVwbGFjZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYW5kIHJldHVybnMgYSBVUkwgd2l0aCBpbnRlcnBvbGF0ZWQgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9hYm91dC86cGVyc29uXCIpO1xuICAgICAqIHBhcmFtcyA9IHsgcGVyc29uOiBcImJvYlwiIH07XG4gICAgICogJGJvYiA9ICR1cmxSb3V0ZXIuaHJlZihtYXRjaGVyLCBwYXJhbXMpO1xuICAgICAqIC8vICRib2IgPT0gXCIvYWJvdXQvYm9iXCI7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXJsTWF0Y2hlciBUaGUgW1tVcmxNYXRjaGVyXV0gb2JqZWN0IHdoaWNoIGlzIHVzZWQgYXMgdGhlIHRlbXBsYXRlIG9mIHRoZSBVUkwgdG8gZ2VuZXJhdGUuXG4gICAgICogQHBhcmFtIHBhcmFtcyBBbiBvYmplY3Qgb2YgcGFyYW1ldGVyIHZhbHVlcyB0byBmaWxsIHRoZSBtYXRjaGVyJ3MgcmVxdWlyZWQgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgYXJlOlxuICAgICAqXG4gICAgICogLSAqKmBhYnNvbHV0ZWAqKiAtIHtib29sZWFuPWZhbHNlfSwgIElmIHRydWUgd2lsbCBnZW5lcmF0ZSBhbiBhYnNvbHV0ZSB1cmwsIGUuZy4gXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL2Z1bGx1cmxcIi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJldHVybnMgdGhlIGZ1bGx5IGNvbXBpbGVkIFVSTCwgb3IgYG51bGxgIGlmIGBwYXJhbXNgIGZhaWwgdmFsaWRhdGlvbiBhZ2FpbnN0IGB1cmxNYXRjaGVyYFxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUuaHJlZiA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHVybCA9IHVybE1hdGNoZXIuZm9ybWF0KHBhcmFtcyk7XG4gICAgICAgIGlmICh1cmwgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGFic29sdXRlOiBmYWxzZSB9O1xuICAgICAgICB2YXIgY2ZnID0gdGhpcy5fcm91dGVyLnVybFNlcnZpY2UuY29uZmlnO1xuICAgICAgICB2YXIgaXNIdG1sNSA9IGNmZy5odG1sNU1vZGUoKTtcbiAgICAgICAgaWYgKCFpc0h0bWw1ICYmIHVybCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdXJsID0gJyMnICsgY2ZnLmhhc2hQcmVmaXgoKSArIHVybDtcbiAgICAgICAgfVxuICAgICAgICB1cmwgPSBhcHBlbmRCYXNlUGF0aCh1cmwsIGlzSHRtbDUsIG9wdGlvbnMuYWJzb2x1dGUsIGNmZy5iYXNlSHJlZigpKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLmFic29sdXRlIHx8ICF1cmwpIHtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNsYXNoID0gIWlzSHRtbDUgJiYgdXJsID8gJy8nIDogJyc7XG4gICAgICAgIHZhciBjZmdQb3J0ID0gY2ZnLnBvcnQoKTtcbiAgICAgICAgdmFyIHBvcnQgPSAoY2ZnUG9ydCA9PT0gODAgfHwgY2ZnUG9ydCA9PT0gNDQzID8gJycgOiAnOicgKyBjZmdQb3J0KTtcbiAgICAgICAgcmV0dXJuIFtjZmcucHJvdG9jb2woKSwgJzovLycsIGNmZy5ob3N0KCksIHBvcnQsIHNsYXNoLCB1cmxdLmpvaW4oJycpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFudWFsbHkgYWRkcyBhIFVSTCBSdWxlLlxuICAgICAqXG4gICAgICogVXN1YWxseSwgYSB1cmwgcnVsZSBpcyBhZGRlZCB1c2luZyBbW1N0YXRlRGVjbGFyYXRpb24udXJsXV0gb3IgW1t3aGVuXV0uXG4gICAgICogVGhpcyBhcGkgY2FuIGJlIHVzZWQgZGlyZWN0bHkgZm9yIG1vcmUgY29udHJvbCAodG8gcmVnaXN0ZXIgYSBbW0Jhc2VVcmxSdWxlXV0sIGZvciBleGFtcGxlKS5cbiAgICAgKiBSdWxlcyBjYW4gYmUgY3JlYXRlZCB1c2luZyBbW1VybFJvdXRlci51cmxSdWxlRmFjdG9yeV1dLCBvciBjcmVhdGUgbWFudWFsbHkgYXMgc2ltcGxlIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBBIHJ1bGUgc2hvdWxkIGhhdmUgYSBgbWF0Y2hgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdHJ1dGh5IGlmIHRoZSBydWxlIG1hdGNoZWQuXG4gICAgICogSXQgc2hvdWxkIGFsc28gaGF2ZSBhIGBoYW5kbGVyYCBmdW5jdGlvbiB3aGljaCBpcyBpbnZva2VkIGlmIHRoZSBydWxlIGlzIHRoZSBiZXN0IG1hdGNoLlxuICAgICAqXG4gICAgICogQHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgZGVyZWdpc3RlcnMgdGhlIHJ1bGVcbiAgICAgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnJ1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIVVybFJ1bGVGYWN0b3J5LmlzVXJsUnVsZShydWxlKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBydWxlJyk7XG4gICAgICAgIHJ1bGUuJGlkID0gdGhpcy5faWQrKztcbiAgICAgICAgcnVsZS5wcmlvcml0eSA9IHJ1bGUucHJpb3JpdHkgfHwgMDtcbiAgICAgICAgdGhpcy5fcnVsZXMucHVzaChydWxlKTtcbiAgICAgICAgdGhpcy5fc29ydGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZW1vdmVSdWxlKHJ1bGUpOyB9O1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5yZW1vdmVSdWxlID0gZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgcmVtb3ZlRnJvbSh0aGlzLl9ydWxlcywgcnVsZSk7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnJ1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVuc3VyZVNvcnRlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcnVsZXMuc2xpY2UoKTtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUub3RoZXJ3aXNlID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIGhhbmRsZXJGbiA9IGdldEhhbmRsZXJGbihoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5fb3RoZXJ3aXNlRm4gPSB0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZSh2YWwodHJ1ZSksIGhhbmRsZXJGbik7XG4gICAgICAgIHRoaXMuX3NvcnRlZCA9IGZhbHNlO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5pbml0aWFsID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIGhhbmRsZXJGbiA9IGdldEhhbmRsZXJGbihoYW5kbGVyKTtcbiAgICAgICAgdmFyIG1hdGNoRm4gPSBmdW5jdGlvbiAodXJsUGFydHMsIHJvdXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb25IaXN0b3J5LnNpemUoKSA9PT0gMCAmJiAhIS9eXFwvPyQvLmV4ZWModXJsUGFydHMucGF0aCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucnVsZSh0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZShtYXRjaEZuLCBoYW5kbGVyRm4pKTtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUud2hlbiA9IGZ1bmN0aW9uIChtYXRjaGVyLCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBydWxlID0gdGhpcy51cmxSdWxlRmFjdG9yeS5jcmVhdGUobWF0Y2hlciwgaGFuZGxlcik7XG4gICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9ucyAmJiBvcHRpb25zLnByaW9yaXR5KSlcbiAgICAgICAgICAgIHJ1bGUucHJpb3JpdHkgPSBvcHRpb25zLnByaW9yaXR5O1xuICAgICAgICB0aGlzLnJ1bGUocnVsZSk7XG4gICAgICAgIHJldHVybiBydWxlO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5kZWZlckludGVyY2VwdCA9IGZ1bmN0aW9uIChkZWZlcikge1xuICAgICAgICBpZiAoZGVmZXIgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGRlZmVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHREZWZlcnJlZCA9IGRlZmVyO1xuICAgIH07XG4gICAgcmV0dXJuIFVybFJvdXRlcjtcbn0oKSk7XG5leHBvcnQgeyBVcmxSb3V0ZXIgfTtcbmZ1bmN0aW9uIGdldEhhbmRsZXJGbihoYW5kbGVyKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGhhbmRsZXIpICYmICFpc1N0cmluZyhoYW5kbGVyKSAmJiAhaXMoVGFyZ2V0U3RhdGUpKGhhbmRsZXIpICYmICFUYXJnZXRTdGF0ZS5pc0RlZihoYW5kbGVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInaGFuZGxlcicgbXVzdCBiZSBhIHN0cmluZywgZnVuY3Rpb24sIFRhcmdldFN0YXRlLCBvciBoYXZlIGEgc3RhdGU6ICduZXd0YXJnZXQnIHByb3BlcnR5XCIpO1xuICAgIH1cbiAgICByZXR1cm4gaXNGdW5jdGlvbihoYW5kbGVyKSA/IGhhbmRsZXIgOiB2YWwoaGFuZGxlcik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmxSb3V0ZXIuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB2aWV3XG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBlcXVhbHMsIGFwcGx5UGFpcnMsIHJlbW92ZUZyb20sIGluQXJyYXksIGZpbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGN1cnJ5LCBwcm9wIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNBcnJheSB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbi8qKlxuICogVGhlIFZpZXcgc2VydmljZVxuICpcbiAqIFRoaXMgc2VydmljZSBwYWlycyBleGlzdGluZyBgdWktdmlld2AgY29tcG9uZW50cyAod2hpY2ggbGl2ZSBpbiB0aGUgRE9NKVxuICogd2l0aCB2aWV3IGNvbmZpZ3MgKGZyb20gdGhlIHN0YXRlIGRlY2xhcmF0aW9uIG9iamVjdHM6IFtbU3RhdGVEZWNsYXJhdGlvbi52aWV3c11dKS5cbiAqXG4gKiAtIEFmdGVyIGEgc3VjY2Vzc2Z1bCBUcmFuc2l0aW9uLCB0aGUgdmlld3MgZnJvbSB0aGUgbmV3bHkgZW50ZXJlZCBzdGF0ZXMgYXJlIGFjdGl2YXRlZCB2aWEgW1thY3RpdmF0ZVZpZXdDb25maWddXS5cbiAqICAgVGhlIHZpZXdzIGZyb20gZXhpdGVkIHN0YXRlcyBhcmUgZGVhY3RpdmF0ZWQgdmlhIFtbZGVhY3RpdmF0ZVZpZXdDb25maWddXS5cbiAqICAgKFNlZTogdGhlIFtbcmVnaXN0ZXJBY3RpdmF0ZVZpZXdzXV0gVHJhbnNpdGlvbiBIb29rKVxuICpcbiAqIC0gQXMgYHVpLXZpZXdgIGNvbXBvbmVudHMgcG9wIGluIGFuZCBvdXQgb2YgZXhpc3RlbmNlLCB0aGV5IHJlZ2lzdGVyIHRoZW1zZWx2ZXMgdXNpbmcgW1tyZWdpc3RlclVJVmlld11dLlxuICpcbiAqIC0gV2hlbiB0aGUgW1tzeW5jXV0gZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgcmVnaXN0ZXJlZCBgdWktdmlld2AocykgKFtbQWN0aXZlVUlWaWV3XV0pXG4gKiBhcmUgY29uZmlndXJlZCB3aXRoIHRoZSBtYXRjaGluZyBbW1ZpZXdDb25maWddXShzKVxuICpcbiAqL1xudmFyIFZpZXdTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZpZXdTZXJ2aWNlKHJvdXRlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy5fdWlWaWV3cyA9IFtdO1xuICAgICAgICB0aGlzLl92aWV3Q29uZmlncyA9IFtdO1xuICAgICAgICB0aGlzLl92aWV3Q29uZmlnRmFjdG9yaWVzID0ge307XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLl9wbHVnaW5hcGkgPSB7XG4gICAgICAgICAgICBfcm9vdFZpZXdDb250ZXh0OiB0aGlzLl9yb290Vmlld0NvbnRleHQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIF92aWV3Q29uZmlnRmFjdG9yeTogdGhpcy5fdmlld0NvbmZpZ0ZhY3RvcnkuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIF9yZWdpc3RlcmVkVUlWaWV3OiBmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIGZpbmQoX3RoaXMuX3VpVmlld3MsIGZ1bmN0aW9uICh2aWV3KSB7IHJldHVybiBfdGhpcy5yb3V0ZXIuJGlkICsgXCIuXCIgKyB2aWV3LmlkID09PSBpZDsgfSk7IH0sXG4gICAgICAgICAgICBfcmVnaXN0ZXJlZFVJVmlld3M6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl91aVZpZXdzOyB9LFxuICAgICAgICAgICAgX2FjdGl2ZVZpZXdDb25maWdzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fdmlld0NvbmZpZ3M7IH0sXG4gICAgICAgICAgICBfb25TeW5jOiBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiByZW1vdmVGcm9tKF90aGlzLl9saXN0ZW5lcnMsIGxpc3RlbmVyKTsgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZXMgYSB2aWV3J3MgbmFtZSBmcm9tIGEgc3RhdGUudmlld3MgY29uZmlndXJhdGlvbiBibG9jay5cbiAgICAgKlxuICAgICAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgYnkgYSBmcmFtZXdvcmsgaW1wbGVtZW50YXRpb24gdG8gY2FsY3VsYXRlIHRoZSB2YWx1ZXMgZm9yXG4gICAgICogW1tfVmlld0RlY2xhcmF0aW9uLiR1aVZpZXdOYW1lXV0gYW5kIFtbX1ZpZXdEZWNsYXJhdGlvbi4kdWlWaWV3Q29udGV4dEFuY2hvcl1dLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRleHQgdGhlIGNvbnRleHQgb2JqZWN0IChzdGF0ZSBkZWNsYXJhdGlvbikgdGhhdCB0aGUgdmlldyBiZWxvbmdzIHRvXG4gICAgICogQHBhcmFtIHJhd1ZpZXdOYW1lIHRoZSBuYW1lIG9mIHRoZSB2aWV3LCBhcyBkZWNsYXJlZCBpbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRoZSBub3JtYWxpemVkIHVpVmlld05hbWUgYW5kIHVpVmlld0NvbnRleHRBbmNob3IgdGhhdCB0aGUgdmlldyB0YXJnZXRzXG4gICAgICovXG4gICAgVmlld1NlcnZpY2Uubm9ybWFsaXplVUlWaWV3VGFyZ2V0ID0gZnVuY3Rpb24gKGNvbnRleHQsIHJhd1ZpZXdOYW1lKSB7XG4gICAgICAgIGlmIChyYXdWaWV3TmFtZSA9PT0gdm9pZCAwKSB7IHJhd1ZpZXdOYW1lID0gJyc7IH1cbiAgICAgICAgLy8gVE9ETzogVmFsaWRhdGUgaW5jb21pbmcgdmlldyBuYW1lIHdpdGggYSByZWdleHAgdG8gYWxsb3c6XG4gICAgICAgIC8vIGV4OiBcInZpZXcubmFtZUBmb28uYmFyXCIgLCBcIl4uXi52aWV3Lm5hbWVcIiAsIFwidmlldy5uYW1lQF4uXlwiICwgXCJcIiAsXG4gICAgICAgIC8vIFwiQFwiICwgXCIkZGVmYXVsdEBeXCIgLCBcIiEkZGVmYXVsdC4kZGVmYXVsdFwiICwgXCIhZm9vLmJhclwiXG4gICAgICAgIHZhciB2aWV3QXRDb250ZXh0ID0gcmF3Vmlld05hbWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgdmFyIHVpVmlld05hbWUgPSB2aWV3QXRDb250ZXh0WzBdIHx8ICckZGVmYXVsdCc7IC8vIGRlZmF1bHQgdG8gdW5uYW1lZCB2aWV3XG4gICAgICAgIHZhciB1aVZpZXdDb250ZXh0QW5jaG9yID0gaXNTdHJpbmcodmlld0F0Q29udGV4dFsxXSkgPyB2aWV3QXRDb250ZXh0WzFdIDogJ14nOyAvLyBkZWZhdWx0IHRvIHBhcmVudCBjb250ZXh0XG4gICAgICAgIC8vIEhhbmRsZSByZWxhdGl2ZSB2aWV3LW5hbWUgc3VnYXIgc3ludGF4LlxuICAgICAgICAvLyBNYXRjaGVzIHJhd1ZpZXdOYW1lIFwiXi5eLl4uZm9vLmJhclwiIGludG8gYXJyYXk6IFtcIl4uXi5eLmZvby5iYXJcIiwgXCJeLl4uXlwiLCBcImZvby5iYXJcIl0sXG4gICAgICAgIHZhciByZWxhdGl2ZVZpZXdOYW1lU3VnYXIgPSAvXihcXF4oPzpcXC5cXF4pKilcXC4oLiokKS8uZXhlYyh1aVZpZXdOYW1lKTtcbiAgICAgICAgaWYgKHJlbGF0aXZlVmlld05hbWVTdWdhcikge1xuICAgICAgICAgICAgLy8gQ2xvYmJlcnMgZXhpc3RpbmcgY29udGV4dEFuY2hvciAocmF3Vmlld05hbWUgdmFsaWRhdGlvbiB3aWxsIGZpeCB0aGlzKVxuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IHJlbGF0aXZlVmlld05hbWVTdWdhclsxXTsgLy8gc2V0IGFuY2hvciB0byBcIl4uXi5eXCJcbiAgICAgICAgICAgIHVpVmlld05hbWUgPSByZWxhdGl2ZVZpZXdOYW1lU3VnYXJbMl07IC8vIHNldCB2aWV3LW5hbWUgdG8gXCJmb28uYmFyXCJcbiAgICAgICAgfVxuICAgICAgICBpZiAodWlWaWV3TmFtZS5jaGFyQXQoMCkgPT09ICchJykge1xuICAgICAgICAgICAgdWlWaWV3TmFtZSA9IHVpVmlld05hbWUuc3Vic3RyKDEpO1xuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9ICcnOyAvLyB0YXJnZXQgYWJzb2x1dGVseSBmcm9tIHJvb3RcbiAgICAgICAgfVxuICAgICAgICAvLyBoYW5kbGUgcGFyZW50IHJlbGF0aXZlIHRhcmdldGluZyBcIl4uXi5eXCJcbiAgICAgICAgdmFyIHJlbGF0aXZlTWF0Y2ggPSAvXihcXF4oPzpcXC5cXF4pKikkLztcbiAgICAgICAgaWYgKHJlbGF0aXZlTWF0Y2guZXhlYyh1aVZpZXdDb250ZXh0QW5jaG9yKSkge1xuICAgICAgICAgICAgdmFyIGFuY2hvclN0YXRlID0gdWlWaWV3Q29udGV4dEFuY2hvci5zcGxpdCgnLicpLnJlZHVjZShmdW5jdGlvbiAoYW5jaG9yLCB4KSB7IHJldHVybiBhbmNob3IucGFyZW50OyB9LCBjb250ZXh0KTtcbiAgICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3IgPSBhbmNob3JTdGF0ZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVpVmlld0NvbnRleHRBbmNob3IgPT09ICcuJykge1xuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IGNvbnRleHQubmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB1aVZpZXdOYW1lOiB1aVZpZXdOYW1lLCB1aVZpZXdDb250ZXh0QW5jaG9yOiB1aVZpZXdDb250ZXh0QW5jaG9yIH07XG4gICAgfTtcbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuX3Jvb3RWaWV3Q29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fcm9vdENvbnRleHQgPSBjb250ZXh0IHx8IHRoaXMuX3Jvb3RDb250ZXh0KTtcbiAgICB9O1xuICAgIFZpZXdTZXJ2aWNlLnByb3RvdHlwZS5fdmlld0NvbmZpZ0ZhY3RvcnkgPSBmdW5jdGlvbiAodmlld1R5cGUsIGZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5fdmlld0NvbmZpZ0ZhY3Rvcmllc1t2aWV3VHlwZV0gPSBmYWN0b3J5O1xuICAgIH07XG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmNyZWF0ZVZpZXdDb25maWcgPSBmdW5jdGlvbiAocGF0aCwgZGVjbCkge1xuICAgICAgICB2YXIgY2ZnRmFjdG9yeSA9IHRoaXMuX3ZpZXdDb25maWdGYWN0b3JpZXNbZGVjbC4kdHlwZV07XG4gICAgICAgIGlmICghY2ZnRmFjdG9yeSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmlld1NlcnZpY2U6IE5vIHZpZXcgY29uZmlnIGZhY3RvcnkgcmVnaXN0ZXJlZCBmb3IgdHlwZSAnICsgZGVjbC4kdHlwZSk7XG4gICAgICAgIHZhciBjZmdzID0gY2ZnRmFjdG9yeShwYXRoLCBkZWNsKTtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkoY2ZncykgPyBjZmdzIDogW2NmZ3NdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGVhY3RpdmF0ZXMgYSBWaWV3Q29uZmlnLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkZWFjdGl2YXRlcyBhIGBWaWV3Q29uZmlnYC5cbiAgICAgKiBBZnRlciBjYWxsaW5nIFtbc3luY11dLCBpdCB3aWxsIHVuLXBhaXIgZnJvbSBhbnkgYHVpLXZpZXdgIHdpdGggd2hpY2ggaXQgaXMgY3VycmVudGx5IHBhaXJlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2aWV3Q29uZmlnIFRoZSBWaWV3Q29uZmlnIHZpZXcgdG8gZGVyZWdpc3Rlci5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuZGVhY3RpdmF0ZVZpZXdDb25maWcgPSBmdW5jdGlvbiAodmlld0NvbmZpZykge1xuICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoJzwtIFJlbW92aW5nJywgdmlld0NvbmZpZyk7XG4gICAgICAgIHJlbW92ZUZyb20odGhpcy5fdmlld0NvbmZpZ3MsIHZpZXdDb25maWcpO1xuICAgIH07XG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmFjdGl2YXRlVmlld0NvbmZpZyA9IGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VFdmVudCgnLT4gUmVnaXN0ZXJpbmcnLCB2aWV3Q29uZmlnKTtcbiAgICAgICAgdGhpcy5fdmlld0NvbmZpZ3MucHVzaCh2aWV3Q29uZmlnKTtcbiAgICB9O1xuICAgIFZpZXdTZXJ2aWNlLnByb3RvdHlwZS5zeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdWlWaWV3c0J5RnFuID0gdGhpcy5fdWlWaWV3cy5tYXAoZnVuY3Rpb24gKHVpdikgeyByZXR1cm4gW3Vpdi5mcW4sIHVpdl07IH0pLnJlZHVjZShhcHBseVBhaXJzLCB7fSk7XG4gICAgICAgIC8vIFJldHVybiBhIHdlaWdodGVkIGRlcHRoIHZhbHVlIGZvciBhIHVpVmlldy5cbiAgICAgICAgLy8gVGhlIGRlcHRoIGlzIHRoZSBuZXN0aW5nIGRlcHRoIG9mIHVpLXZpZXdzIChiYXNlZCBvbiBGUU47IHRpbWVzIDEwLDAwMClcbiAgICAgICAgLy8gcGx1cyB0aGUgZGVwdGggb2YgdGhlIHN0YXRlIHRoYXQgaXMgcG9wdWxhdGluZyB0aGUgdWlWaWV3XG4gICAgICAgIGZ1bmN0aW9uIHVpVmlld0RlcHRoKHVpVmlldykge1xuICAgICAgICAgICAgdmFyIHN0YXRlRGVwdGggPSBmdW5jdGlvbiAoY29udGV4dCkgeyByZXR1cm4gKGNvbnRleHQgJiYgY29udGV4dC5wYXJlbnQgPyBzdGF0ZURlcHRoKGNvbnRleHQucGFyZW50KSArIDEgOiAxKTsgfTtcbiAgICAgICAgICAgIHJldHVybiB1aVZpZXcuZnFuLnNwbGl0KCcuJykubGVuZ3RoICogMTAwMDAgKyBzdGF0ZURlcHRoKHVpVmlldy5jcmVhdGlvbkNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiB0aGUgVmlld0NvbmZpZydzIGNvbnRleHQncyBkZXB0aCBpbiB0aGUgY29udGV4dCB0cmVlLlxuICAgICAgICBmdW5jdGlvbiB2aWV3Q29uZmlnRGVwdGgoY29uZmlnKSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbmZpZy52aWV3RGVjbC4kY29udGV4dCwgY291bnQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKCsrY291bnQgJiYgY29udGV4dC5wYXJlbnQpXG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQucGFyZW50O1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIEdpdmVuIGEgZGVwdGggZnVuY3Rpb24sIHJldHVybnMgYSBjb21wYXJlIGZ1bmN0aW9uIHdoaWNoIGNhbiByZXR1cm4gZWl0aGVyIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nIG9yZGVyXG4gICAgICAgIHZhciBkZXB0aENvbXBhcmUgPSBjdXJyeShmdW5jdGlvbiAoZGVwdGhGbiwgcG9zTmVnLCBsZWZ0LCByaWdodCkgeyByZXR1cm4gcG9zTmVnICogKGRlcHRoRm4obGVmdCkgLSBkZXB0aEZuKHJpZ2h0KSk7IH0pO1xuICAgICAgICB2YXIgbWF0Y2hpbmdDb25maWdQYWlyID0gZnVuY3Rpb24gKHVpVmlldykge1xuICAgICAgICAgICAgdmFyIG1hdGNoaW5nQ29uZmlncyA9IF90aGlzLl92aWV3Q29uZmlncy5maWx0ZXIoVmlld1NlcnZpY2UubWF0Y2hlcyh1aVZpZXdzQnlGcW4sIHVpVmlldykpO1xuICAgICAgICAgICAgaWYgKG1hdGNoaW5nQ29uZmlncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBPSy4gIENoaWxkIHN0YXRlcyBjYW4gdGFyZ2V0IGEgdWktdmlldyB0aGF0IHRoZSBwYXJlbnQgc3RhdGUgYWxzbyB0YXJnZXRzICh0aGUgY2hpbGQgd2lucylcbiAgICAgICAgICAgICAgICAvLyBTb3J0IGJ5IGRlcHRoIGFuZCByZXR1cm4gdGhlIG1hdGNoIGZyb20gdGhlIGRlZXBlc3QgY2hpbGRcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgTXVsdGlwbGUgbWF0Y2hpbmcgdmlldyBjb25maWdzIGZvciAke3VpVmlldy5mcW59YCwgbWF0Y2hpbmdDb25maWdzKTtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0NvbmZpZ3Muc29ydChkZXB0aENvbXBhcmUodmlld0NvbmZpZ0RlcHRoLCAtMSkpOyAvLyBkZXNjZW5kaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB1aVZpZXc6IHVpVmlldywgdmlld0NvbmZpZzogbWF0Y2hpbmdDb25maWdzWzBdIH07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjb25maWd1cmVVSVZpZXcgPSBmdW5jdGlvbiAodHVwbGUpIHtcbiAgICAgICAgICAgIC8vIElmIGEgcGFyZW50IHVpLXZpZXcgaXMgcmVjb25maWd1cmVkLCBpdCBjb3VsZCBkZXN0cm95IGNoaWxkIHVpLXZpZXdzLlxuICAgICAgICAgICAgLy8gQmVmb3JlIGNvbmZpZ3VyaW5nIGEgY2hpbGQgdWktdmlldywgbWFrZSBzdXJlIGl0J3Mgc3RpbGwgaW4gdGhlIGFjdGl2ZSB1aVZpZXdzIGFycmF5LlxuICAgICAgICAgICAgaWYgKF90aGlzLl91aVZpZXdzLmluZGV4T2YodHVwbGUudWlWaWV3KSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgdHVwbGUudWlWaWV3LmNvbmZpZ1VwZGF0ZWQodHVwbGUudmlld0NvbmZpZyk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFNvcnQgdmlld3MgYnkgRlFOIGFuZCBzdGF0ZSBkZXB0aC4gUHJvY2VzcyB1aXZpZXdzIG5lYXJlc3QgdGhlIHJvb3QgZmlyc3QuXG4gICAgICAgIHZhciB1aVZpZXdUdXBsZXMgPSB0aGlzLl91aVZpZXdzLnNvcnQoZGVwdGhDb21wYXJlKHVpVmlld0RlcHRoLCAxKSkubWFwKG1hdGNoaW5nQ29uZmlnUGFpcik7XG4gICAgICAgIHZhciBtYXRjaGVkVmlld0NvbmZpZ3MgPSB1aVZpZXdUdXBsZXMubWFwKGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gdHVwbGUudmlld0NvbmZpZzsgfSk7XG4gICAgICAgIHZhciB1bm1hdGNoZWRDb25maWdUdXBsZXMgPSB0aGlzLl92aWV3Q29uZmlnc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoY29uZmlnKSB7IHJldHVybiAhaW5BcnJheShtYXRjaGVkVmlld0NvbmZpZ3MsIGNvbmZpZyk7IH0pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7IHJldHVybiAoeyB1aVZpZXc6IHVuZGVmaW5lZCwgdmlld0NvbmZpZzogdmlld0NvbmZpZyB9KTsgfSk7XG4gICAgICAgIHVpVmlld1R1cGxlcy5mb3JFYWNoKGNvbmZpZ3VyZVVJVmlldyk7XG4gICAgICAgIHZhciBhbGxUdXBsZXMgPSB1aVZpZXdUdXBsZXMuY29uY2F0KHVubWF0Y2hlZENvbmZpZ1R1cGxlcyk7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyByZXR1cm4gY2IoYWxsVHVwbGVzKTsgfSk7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1N5bmMoYWxsVHVwbGVzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGB1aS12aWV3YCBjb21wb25lbnRcbiAgICAgKlxuICAgICAqIFdoZW4gYSBgdWktdmlld2AgY29tcG9uZW50IGlzIGNyZWF0ZWQsIGl0IHVzZXMgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgaXRzZWxmLlxuICAgICAqIEFmdGVyIHJlZ2lzdHJhdGlvbiB0aGUgW1tzeW5jXV0gbWV0aG9kIGlzIHVzZWQgdG8gZW5zdXJlIGFsbCBgdWktdmlld2AgYXJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgcHJvcGVyIFtbVmlld0NvbmZpZ11dLlxuICAgICAqXG4gICAgICogTm90ZTogdGhlIGB1aS12aWV3YCBjb21wb25lbnQgdXNlcyB0aGUgYFZpZXdDb25maWdgIHRvIGRldGVybWluZSB3aGF0IHZpZXcgc2hvdWxkIGJlIGxvYWRlZCBpbnNpZGUgdGhlIGB1aS12aWV3YCxcbiAgICAgKiBhbmQgd2hhdCB0aGUgdmlldydzIHN0YXRlIGNvbnRleHQgaXMuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGVyZSBpcyBubyBjb3JyZXNwb25kaW5nIGBkZXJlZ2lzdGVyVUlWaWV3YC5cbiAgICAgKiAgICAgICBBIGB1aS12aWV3YCBzaG91bGQgaGFuZyBvbiB0byB0aGUgcmV0dXJuIHZhbHVlIG9mIGByZWdpc3RlclVJVmlld2AgYW5kIGludm9rZSBpdCB0byBkZXJlZ2lzdGVyIGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1aVZpZXcgVGhlIG1ldGFkYXRhIGZvciBhIFVJVmlld1xuICAgICAqIEByZXR1cm4gYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gdXNlZCB3aGVuIHRoZSB2aWV3IGlzIGRlc3Ryb3llZC5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXJVSVZpZXcgPSBmdW5jdGlvbiAodWlWaWV3KSB7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudCgnLT4gUmVnaXN0ZXJpbmcnLCB1aVZpZXcpO1xuICAgICAgICB2YXIgdWlWaWV3cyA9IHRoaXMuX3VpVmlld3M7XG4gICAgICAgIHZhciBmcW5BbmRUeXBlTWF0Y2hlcyA9IGZ1bmN0aW9uICh1aXYpIHsgcmV0dXJuIHVpdi5mcW4gPT09IHVpVmlldy5mcW4gJiYgdWl2LiR0eXBlID09PSB1aVZpZXcuJHR5cGU7IH07XG4gICAgICAgIGlmICh1aVZpZXdzLmZpbHRlcihmcW5BbmRUeXBlTWF0Y2hlcykubGVuZ3RoKVxuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCchISEhIGR1cGxpY2F0ZSB1aVZpZXcgbmFtZWQ6JywgdWlWaWV3KTtcbiAgICAgICAgdWlWaWV3cy5wdXNoKHVpVmlldyk7XG4gICAgICAgIHRoaXMuc3luYygpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IHVpVmlld3MuaW5kZXhPZih1aVZpZXcpO1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoJ1RyaWVkIHJlbW92aW5nIG5vbi1yZWdpc3RlcmVkIHVpVmlldycsIHVpVmlldyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCc8LSBEZXJlZ2lzdGVyaW5nJywgdWlWaWV3KTtcbiAgICAgICAgICAgIHJlbW92ZUZyb20odWlWaWV3cykodWlWaWV3KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygdmlld3MgY3VycmVudGx5IGF2YWlsYWJsZSBvbiB0aGUgcGFnZSwgYnkgZnVsbHktcXVhbGlmaWVkIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBmdWxseS1xdWFsaWZpZWQgdmlldyBuYW1lcy5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdWlWaWV3cy5tYXAocHJvcCgnZnFuJykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiB2aWV3cyBvbiB0aGUgcGFnZSBjb250YWluaW5nIGxvYWRlZCBjb250ZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgZnVsbHktcXVhbGlmaWVkIHZpZXcgbmFtZXMuXG4gICAgICovXG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VpVmlld3MuZmlsdGVyKHByb3AoJyRjb25maWcnKSkubWFwKHByb3AoJ25hbWUnKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIHVpLXZpZXcgYW5kIGEgVmlld0NvbmZpZywgZGV0ZXJtaW5lcyBpZiB0aGV5IFwibWF0Y2hcIi5cbiAgICAgKlxuICAgICAqIEEgdWktdmlldyBoYXMgYSBmdWxseSBxdWFsaWZpZWQgbmFtZSAoZnFuKSBhbmQgYSBjb250ZXh0IG9iamVjdC4gIFRoZSBmcW4gaXMgYnVpbHQgZnJvbSBpdHMgb3ZlcmFsbCBsb2NhdGlvbiBpblxuICAgICAqIHRoZSBET00sIGRlc2NyaWJpbmcgaXRzIG5lc3RpbmcgcmVsYXRpb25zaGlwIHRvIGFueSBwYXJlbnQgdWktdmlldyB0YWdzIGl0IGlzIG5lc3RlZCBpbnNpZGUgb2YuXG4gICAgICpcbiAgICAgKiBBIFZpZXdDb25maWcgaGFzIGEgdGFyZ2V0IHVpLXZpZXcgbmFtZSBhbmQgYSBjb250ZXh0IGFuY2hvci4gIFRoZSB1aS12aWV3IG5hbWUgY2FuIGJlIGEgc2ltcGxlIG5hbWUsIG9yXG4gICAgICogY2FuIGJlIGEgc2VnbWVudGVkIHVpLXZpZXcgcGF0aCwgZGVzY3JpYmluZyBhIHBvcnRpb24gb2YgYSB1aS12aWV3IGZxbi5cbiAgICAgKlxuICAgICAqIEluIG9yZGVyIGZvciBhIHVpLXZpZXcgdG8gbWF0Y2ggVmlld0NvbmZpZywgdWktdmlldydzICR0eXBlIG11c3QgbWF0Y2ggdGhlIFZpZXdDb25maWcncyAkdHlwZVxuICAgICAqXG4gICAgICogSWYgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgdWktdmlldyBuYW1lIGlzIGEgc2ltcGxlIG5hbWUgKG5vIGRvdHMpLCB0aGVuIGEgdWktdmlldyBtYXRjaGVzIGlmOlxuICAgICAqIC0gdGhlIHVpLXZpZXcncyBuYW1lIG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZVxuICAgICAqIC0gdGhlIHVpLXZpZXcncyBjb250ZXh0IG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyBhbmNob3JcbiAgICAgKlxuICAgICAqIElmIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IHVpLXZpZXcgbmFtZSBpcyBhIHNlZ21lbnRlZCBuYW1lICh3aXRoIGRvdHMpLCB0aGVuIGEgdWktdmlldyBtYXRjaGVzIGlmOlxuICAgICAqIC0gVGhlcmUgZXhpc3RzIGEgcGFyZW50IHVpLXZpZXcgd2hlcmU6XG4gICAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIG1hdGNoZXMgdGhlIGZpcnN0IHNlZ21lbnQgKGluZGV4IDApIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICAgKiAgICAtIHRoZSBwYXJlbnQgdWktdmlldydzIGNvbnRleHQgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvclxuICAgICAqIC0gQW5kIHRoZSByZW1haW5pbmcgc2VnbWVudHMgKGluZGV4IDEuLm4pIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWUgbWF0Y2ggdGhlIHRhaWwgb2YgdGhlIHVpLXZpZXcncyBmcW5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBET006XG4gICAgICogPHVpLXZpZXc+ICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSByb290IGNvbnRleHQgKG5hbWU6IFwiXCIpIC0tPlxuICAgICAqICAgPHVpLXZpZXcgbmFtZT1cImZvb1wiPiAgICAgICAgICAgICAgICA8IS0tIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQgbmFtZWQ6IFwiQVwiICAgICAgLS0+XG4gICAgICogICAgIDx1aS12aWV3PiAgICAgICAgICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSBjb250ZXh0IG5hbWVkOiBcIkEuQlwiICAgIC0tPlxuICAgICAqICAgICAgIDx1aS12aWV3IG5hbWU9XCJiYXJcIj4gICAgICAgICAgICA8IS0tIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQgbmFtZWQ6IFwiQS5CLkNcIiAgLS0+XG4gICAgICogICAgICAgPC91aS12aWV3PlxuICAgICAqICAgICA8L3VpLXZpZXc+XG4gICAgICogICA8L3VpLXZpZXc+XG4gICAgICogPC91aS12aWV3PlxuICAgICAqXG4gICAgICogdWlWaWV3czogW1xuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdFwiLCAgICAgICAgICAgICAgICAgIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIlwiIH0gfSxcbiAgICAgKiAgeyBmcW46IFwiJGRlZmF1bHQuZm9vXCIsICAgICAgICAgICAgICBjcmVhdGlvbkNvbnRleHQ6IHsgbmFtZTogXCJBXCIgfSB9LFxuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHRcIiwgICAgIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIkEuQlwiIH0gfVxuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIsIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIkEuQi5DXCIgfSB9XG4gICAgICogXVxuICAgICAqXG4gICAgICogVGhlc2UgZm91ciB2aWV3IGNvbmZpZ3MgYWxsIG1hdGNoIHRoZSB1aS12aWV3IHdpdGggdGhlIGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCI6XG4gICAgICpcbiAgICAgKiAtIFZpZXdDb25maWcxOiB7IHVpVmlld05hbWU6IFwiYmFyXCIsICAgICAgICAgICAgICAgICAgICAgICB1aVZpZXdDb250ZXh0QW5jaG9yOiBcIkEuQi5DXCIgfVxuICAgICAqIC0gVmlld0NvbmZpZzI6IHsgdWlWaWV3TmFtZTogXCIkZGVmYXVsdC5iYXJcIiwgICAgICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQS5CXCIgfVxuICAgICAqIC0gVmlld0NvbmZpZzM6IHsgdWlWaWV3TmFtZTogXCJmb28uJGRlZmF1bHQuYmFyXCIsICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQVwiIH1cbiAgICAgKiAtIFZpZXdDb25maWc0OiB7IHVpVmlld05hbWU6IFwiJGRlZmF1bHQuZm9vLiRkZWZhdWx0LmJhclwiLCB1aVZpZXdDb250ZXh0QW5jaG9yOiBcIlwiIH1cbiAgICAgKlxuICAgICAqIFVzaW5nIFZpZXdDb25maWczIGFzIGFuIGV4YW1wbGUsIGl0IG1hdGNoZXMgdGhlIHVpLXZpZXcgd2l0aCBmcW4gXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIgYmVjYXVzZTpcbiAgICAgKiAtIFRoZSBWaWV3Q29uZmlnJ3Mgc2VnbWVudGVkIHRhcmdldCBuYW1lIGlzOiBbIFwiZm9vXCIsIFwiJGRlZmF1bHRcIiwgXCJiYXJcIiBdXG4gICAgICogLSBUaGVyZSBleGlzdHMgYSBwYXJlbnQgdWktdmlldyAod2hpY2ggaGFzIGZxbjogXCIkZGVmYXVsdC5mb29cIikgd2hlcmU6XG4gICAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIFwiZm9vXCIgbWF0Y2hlcyB0aGUgZmlyc3Qgc2VnbWVudCBcImZvb1wiIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICAgKiAgICAtIHRoZSBwYXJlbnQgdWktdmlldydzIGNvbnRleHQgXCJBXCIgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvciBjb250ZXh0IFwiQVwiXG4gICAgICogLSBBbmQgdGhlIHJlbWFpbmluZyBzZWdtZW50cyBbIFwiJGRlZmF1bHRcIiwgXCJiYXJcIiBdLmpvaW4oXCIuXCJfIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWUgbWF0Y2hcbiAgICAgKiAgIHRoZSB0YWlsIG9mIHRoZSB1aS12aWV3J3MgZnFuIFwiZGVmYXVsdC5iYXJcIlxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICovXG4gICAgVmlld1NlcnZpY2UubWF0Y2hlcyA9IGZ1bmN0aW9uICh1aVZpZXdzQnlGcW4sIHVpVmlldykgeyByZXR1cm4gZnVuY3Rpb24gKHZpZXdDb25maWcpIHtcbiAgICAgICAgLy8gRG9uJ3Qgc3VwcGx5IGFuIG5nMSB1aS12aWV3IHdpdGggYW4gbmcyIFZpZXdDb25maWcsIGV0Y1xuICAgICAgICBpZiAodWlWaWV3LiR0eXBlICE9PSB2aWV3Q29uZmlnLnZpZXdEZWNsLiR0eXBlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBTcGxpdCBuYW1lcyBhcGFydCBmcm9tIGJvdGggdmlld0NvbmZpZyBhbmQgdWlWaWV3IGludG8gc2VnbWVudHNcbiAgICAgICAgdmFyIHZjID0gdmlld0NvbmZpZy52aWV3RGVjbDtcbiAgICAgICAgdmFyIHZjU2VnbWVudHMgPSB2Yy4kdWlWaWV3TmFtZS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgdWl2U2VnbWVudHMgPSB1aVZpZXcuZnFuLnNwbGl0KCcuJyk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YWlscyBvZiB0aGUgc2VnbWVudCBhcnJheXMgbWF0Y2guIGV4LCB0aGVzZSBhcnJheXMnIHRhaWxzIG1hdGNoOlxuICAgICAgICAvLyB2YzogW1wiZm9vXCIsIFwiYmFyXCJdLCB1aXYgZnFuOiBbXCIkZGVmYXVsdFwiLCBcImZvb1wiLCBcImJhclwiXVxuICAgICAgICBpZiAoIWVxdWFscyh2Y1NlZ21lbnRzLCB1aXZTZWdtZW50cy5zbGljZSgwIC0gdmNTZWdtZW50cy5sZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gTm93IGNoZWNrIGlmIHRoZSBmcW4gZW5kaW5nIGF0IHRoZSBmaXJzdCBzZWdtZW50IG9mIHRoZSB2aWV3Q29uZmlnIG1hdGNoZXMgdGhlIGNvbnRleHQ6XG4gICAgICAgIC8vIFtcIiRkZWZhdWx0XCIsIFwiZm9vXCJdLmpvaW4oXCIuXCIpID09IFwiJGRlZmF1bHQuZm9vXCIsIGRvZXMgdGhlIHVpLXZpZXcgJGRlZmF1bHQuZm9vIGNvbnRleHQgbWF0Y2g/XG4gICAgICAgIHZhciBuZWdPZmZzZXQgPSAxIC0gdmNTZWdtZW50cy5sZW5ndGggfHwgdW5kZWZpbmVkO1xuICAgICAgICB2YXIgZnFuVG9GaXJzdFNlZ21lbnQgPSB1aXZTZWdtZW50cy5zbGljZSgwLCBuZWdPZmZzZXQpLmpvaW4oJy4nKTtcbiAgICAgICAgdmFyIHVpVmlld0NvbnRleHQgPSB1aVZpZXdzQnlGcW5bZnFuVG9GaXJzdFNlZ21lbnRdLmNyZWF0aW9uQ29udGV4dDtcbiAgICAgICAgcmV0dXJuIHZjLiR1aVZpZXdDb250ZXh0QW5jaG9yID09PSAodWlWaWV3Q29udGV4dCAmJiB1aVZpZXdDb250ZXh0Lm5hbWUpO1xuICAgIH07IH07XG4gICAgcmV0dXJuIFZpZXdTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFZpZXdTZXJ2aWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12aWV3LmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgY29yZVxuICovIC8qKiAqL1xuaW1wb3J0IHsgU3RhdGVQYXJhbXMgfSBmcm9tICcuL3BhcmFtcy9zdGF0ZVBhcmFtcyc7XG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gJy4vY29tbW9uL3F1ZXVlJztcbi8qKlxuICogR2xvYmFsIHJvdXRlciBzdGF0ZVxuICpcbiAqIFRoaXMgaXMgd2hlcmUgd2UgaG9sZCB0aGUgZ2xvYmFsIG11dGFibGUgc3RhdGUgc3VjaCBhcyBjdXJyZW50IHN0YXRlLCBjdXJyZW50XG4gKiBwYXJhbXMsIGN1cnJlbnQgdHJhbnNpdGlvbiwgZXRjLlxuICovXG52YXIgVUlSb3V0ZXJHbG9iYWxzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFVJUm91dGVyR2xvYmFscygpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlc1xuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgcGFyYW1ldGVyIHZhbHVlcyBmcm9tIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhcmFtcyA9IG5ldyBTdGF0ZVBhcmFtcygpO1xuICAgICAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgICAgIHRoaXMubGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQgPSAtMTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25IaXN0b3J5ID0gbmV3IFF1ZXVlKFtdLCAxKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucyA9IG5ldyBRdWV1ZShbXSwgMSk7XG4gICAgfVxuICAgIFVJUm91dGVyR2xvYmFscy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uSGlzdG9yeS5jbGVhcigpO1xuICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5jbGVhcigpO1xuICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFVJUm91dGVyR2xvYmFscztcbn0oKSk7XG5leHBvcnQgeyBVSVJvdXRlckdsb2JhbHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2JhbHMuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB1cmxcbiAqLyAvKiogKi9cbmltcG9ydCB7IG5vdEltcGxlbWVudGVkIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBub29wLCBjcmVhdGVQcm94eUZ1bmN0aW9ucyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBtYWtlU3R1YiA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkgeyByZXR1cm4gKChhY2Nba2V5XSA9IG5vdEltcGxlbWVudGVkKGtleSkpLCBhY2MpOyB9LCB7IGRpc3Bvc2U6IG5vb3AgfSk7XG59O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBsb2NhdGlvblNlcnZpY2VzRm5zID0gWyd1cmwnLCAncGF0aCcsICdzZWFyY2gnLCAnaGFzaCcsICdvbkNoYW5nZSddO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBsb2NhdGlvbkNvbmZpZ0ZucyA9IFsncG9ydCcsICdwcm90b2NvbCcsICdob3N0JywgJ2Jhc2VIcmVmJywgJ2h0bWw1TW9kZScsICdoYXNoUHJlZml4J107XG4vKiogQGhpZGRlbiAqL1xudmFyIHVtZkZucyA9IFsndHlwZScsICdjYXNlSW5zZW5zaXRpdmUnLCAnc3RyaWN0TW9kZScsICdkZWZhdWx0U3F1YXNoUG9saWN5J107XG4vKiogQGhpZGRlbiAqL1xudmFyIHJ1bGVzRm5zID0gWydzb3J0JywgJ3doZW4nLCAnaW5pdGlhbCcsICdvdGhlcndpc2UnLCAncnVsZXMnLCAncnVsZScsICdyZW1vdmVSdWxlJ107XG4vKiogQGhpZGRlbiAqL1xudmFyIHN5bmNGbnMgPSBbJ2RlZmVySW50ZXJjZXB0JywgJ2xpc3RlbicsICdzeW5jJywgJ21hdGNoJ107XG4vKipcbiAqIEFQSSBmb3IgVVJMIG1hbmFnZW1lbnRcbiAqL1xudmFyIFVybFNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBVcmxTZXJ2aWNlKHJvdXRlciwgbGF0ZUJpbmQpIHtcbiAgICAgICAgaWYgKGxhdGVCaW5kID09PSB2b2lkIDApIHsgbGF0ZUJpbmQgPSB0cnVlOyB9XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLnJ1bGVzID0ge307XG4gICAgICAgIHRoaXMuY29uZmlnID0ge307XG4gICAgICAgIC8vIHByb3h5IGZ1bmN0aW9uIGNhbGxzIGZyb20gVXJsU2VydmljZSB0byB0aGUgTG9jYXRpb25TZXJ2aWNlL0xvY2F0aW9uQ29uZmlnXG4gICAgICAgIHZhciBsb2NhdGlvblNlcnZpY2VzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLmxvY2F0aW9uU2VydmljZTsgfTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnMobG9jYXRpb25TZXJ2aWNlcywgdGhpcywgbG9jYXRpb25TZXJ2aWNlcywgbG9jYXRpb25TZXJ2aWNlc0ZucywgbGF0ZUJpbmQpO1xuICAgICAgICB2YXIgbG9jYXRpb25Db25maWcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXIubG9jYXRpb25Db25maWc7IH07XG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKGxvY2F0aW9uQ29uZmlnLCB0aGlzLmNvbmZpZywgbG9jYXRpb25Db25maWcsIGxvY2F0aW9uQ29uZmlnRm5zLCBsYXRlQmluZCk7XG4gICAgICAgIHZhciB1bWYgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXIudXJsTWF0Y2hlckZhY3Rvcnk7IH07XG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHVtZiwgdGhpcy5jb25maWcsIHVtZiwgdW1mRm5zKTtcbiAgICAgICAgdmFyIHVybFJvdXRlciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci51cmxSb3V0ZXI7IH07XG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHVybFJvdXRlciwgdGhpcy5ydWxlcywgdXJsUm91dGVyLCBydWxlc0Zucyk7XG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHVybFJvdXRlciwgdGhpcywgdXJsUm91dGVyLCBzeW5jRm5zKTtcbiAgICB9XG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUudXJsID0gZnVuY3Rpb24gKG5ld3VybCwgcmVwbGFjZSwgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUucGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5oYXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IFVSTCBwYXJ0c1xuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgY3VycmVudCBVUkwgY29tcG9uZW50cyBhcyBhIFtbVXJsUGFydHNdXSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgY3VycmVudCB1cmwgcGFydHNcbiAgICAgKi9cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5wYXJ0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHsgcGF0aDogdGhpcy5wYXRoKCksIHNlYXJjaDogdGhpcy5zZWFyY2goKSwgaGFzaDogdGhpcy5oYXNoKCkgfTtcbiAgICB9O1xuICAgIFVybFNlcnZpY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUuZGVmZXJJbnRlcmNlcHQgPSBmdW5jdGlvbiAoZGVmZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAodXJsUGFydHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBVcmxTZXJ2aWNlLmxvY2F0aW9uU2VydmljZVN0dWIgPSBtYWtlU3R1Yihsb2NhdGlvblNlcnZpY2VzRm5zKTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFVybFNlcnZpY2UubG9jYXRpb25Db25maWdTdHViID0gbWFrZVN0dWIobG9jYXRpb25Db25maWdGbnMpO1xuICAgIHJldHVybiBVcmxTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFVybFNlcnZpY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybFNlcnZpY2UuanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBjb3JlXG4gKi8gLyoqICovXG5pbXBvcnQgeyBVcmxNYXRjaGVyRmFjdG9yeSB9IGZyb20gJy4vdXJsL3VybE1hdGNoZXJGYWN0b3J5JztcbmltcG9ydCB7IFVybFJvdXRlciB9IGZyb20gJy4vdXJsL3VybFJvdXRlcic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4vdHJhbnNpdGlvbi90cmFuc2l0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBWaWV3U2VydmljZSB9IGZyb20gJy4vdmlldy92aWV3JztcbmltcG9ydCB7IFN0YXRlUmVnaXN0cnkgfSBmcm9tICcuL3N0YXRlL3N0YXRlUmVnaXN0cnknO1xuaW1wb3J0IHsgU3RhdGVTZXJ2aWNlIH0gZnJvbSAnLi9zdGF0ZS9zdGF0ZVNlcnZpY2UnO1xuaW1wb3J0IHsgVUlSb3V0ZXJHbG9iYWxzIH0gZnJvbSAnLi9nbG9iYWxzJztcbmltcG9ydCB7IHZhbHVlcywgcmVtb3ZlRnJvbSB9IGZyb20gJy4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBVcmxTZXJ2aWNlIH0gZnJvbSAnLi91cmwvdXJsU2VydmljZSc7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4vY29tbW9uL3RyYWNlJztcbi8qKiBAaGlkZGVuICovXG52YXIgX3JvdXRlckluc3RhbmNlID0gMDtcbi8qKlxuICogVGhlIG1hc3RlciBjbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGFuIGluc3RhbmNlIG9mIFVJLVJvdXRlci5cbiAqXG4gKiBVSS1Sb3V0ZXIgKGZvciBlYWNoIHNwZWNpZmljIGZyYW1ld29yaykgd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBkdXJpbmcgYm9vdHN0cmFwLlxuICogVGhpcyBjbGFzcyBpbnN0YW50aWF0ZXMgYW5kIHdpcmVzIHRoZSBVSS1Sb3V0ZXIgc2VydmljZXMgdG9nZXRoZXIuXG4gKlxuICogQWZ0ZXIgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFVJUm91dGVyIGNsYXNzIGlzIGNyZWF0ZWQsIGl0IHNob3VsZCBiZSBjb25maWd1cmVkIGZvciB5b3VyIGFwcC5cbiAqIEZvciBpbnN0YW5jZSwgYXBwIHN0YXRlcyBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1VJUm91dGVyLnN0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiAtLS1cbiAqXG4gKiBOb3JtYWxseSB0aGUgZnJhbWV3b3JrIGNvZGUgd2lsbCBib290c3RyYXAgVUktUm91dGVyLlxuICogSWYgeW91IGFyZSBib290c3RyYXBwaW5nIFVJUm91dGVyIG1hbnVhbGx5LCB0ZWxsIGl0IHRvIG1vbml0b3IgdGhlIFVSTCBieSBjYWxsaW5nXG4gKiBbW1VybFNlcnZpY2UubGlzdGVuXV0gdGhlbiBbW1VybFNlcnZpY2Uuc3luY11dLlxuICovXG52YXIgVUlSb3V0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgVUlSb3V0ZXJgIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIGxvY2F0aW9uU2VydmljZSBhIFtbTG9jYXRpb25TZXJ2aWNlc11dIGltcGxlbWVudGF0aW9uXG4gICAgICogQHBhcmFtIGxvY2F0aW9uQ29uZmlnIGEgW1tMb2NhdGlvbkNvbmZpZ11dIGltcGxlbWVudGF0aW9uXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICovXG4gICAgZnVuY3Rpb24gVUlSb3V0ZXIobG9jYXRpb25TZXJ2aWNlLCBsb2NhdGlvbkNvbmZpZykge1xuICAgICAgICBpZiAobG9jYXRpb25TZXJ2aWNlID09PSB2b2lkIDApIHsgbG9jYXRpb25TZXJ2aWNlID0gVXJsU2VydmljZS5sb2NhdGlvblNlcnZpY2VTdHViOyB9XG4gICAgICAgIGlmIChsb2NhdGlvbkNvbmZpZyA9PT0gdm9pZCAwKSB7IGxvY2F0aW9uQ29uZmlnID0gVXJsU2VydmljZS5sb2NhdGlvbkNvbmZpZ1N0dWI7IH1cbiAgICAgICAgdGhpcy5sb2NhdGlvblNlcnZpY2UgPSBsb2NhdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubG9jYXRpb25Db25maWcgPSBsb2NhdGlvbkNvbmZpZztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy4kaWQgPSBfcm91dGVySW5zdGFuY2UrKztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGlzcG9zYWJsZXMgPSBbXTtcbiAgICAgICAgLyoqIFByb3ZpZGVzIHRyYWNlIGluZm9ybWF0aW9uIHRvIHRoZSBjb25zb2xlICovXG4gICAgICAgIHRoaXMudHJhY2UgPSB0cmFjZTtcbiAgICAgICAgLyoqIFByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gdWktdmlldyBzeW5jaHJvbml6YXRpb24gKi9cbiAgICAgICAgdGhpcy52aWV3U2VydmljZSA9IG5ldyBWaWV3U2VydmljZSh0aGlzKTtcbiAgICAgICAgLyoqIEdsb2JhbCByb3V0ZXIgc3RhdGUgKi9cbiAgICAgICAgdGhpcy5nbG9iYWxzID0gbmV3IFVJUm91dGVyR2xvYmFscygpO1xuICAgICAgICAvKiogUHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byBUcmFuc2l0aW9ucyAqL1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25TZXJ2aWNlID0gbmV3IFRyYW5zaXRpb25TZXJ2aWNlKHRoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVwcmVjYXRlZCBmb3IgcHVibGljIHVzZS4gVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWQuXG4gICAgICAgICAqIEBkZXByZWNhdGVkIFVzZSBbW3VybFNlcnZpY2VdXSBpbnN0ZWFkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVybE1hdGNoZXJGYWN0b3J5ID0gbmV3IFVybE1hdGNoZXJGYWN0b3J5KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXByZWNhdGVkIGZvciBwdWJsaWMgdXNlLiBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZC5cbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXJsUm91dGVyID0gbmV3IFVybFJvdXRlcih0aGlzKTtcbiAgICAgICAgLyoqIFByb3ZpZGVzIGEgcmVnaXN0cnkgZm9yIHN0YXRlcywgYW5kIHJlbGF0ZWQgcmVnaXN0cmF0aW9uIHNlcnZpY2VzICovXG4gICAgICAgIHRoaXMuc3RhdGVSZWdpc3RyeSA9IG5ldyBTdGF0ZVJlZ2lzdHJ5KHRoaXMpO1xuICAgICAgICAvKiogUHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byBzdGF0ZXMgKi9cbiAgICAgICAgdGhpcy5zdGF0ZVNlcnZpY2UgPSBuZXcgU3RhdGVTZXJ2aWNlKHRoaXMpO1xuICAgICAgICAvKiogUHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byB0aGUgVVJMICovXG4gICAgICAgIHRoaXMudXJsU2VydmljZSA9IG5ldyBVcmxTZXJ2aWNlKHRoaXMpO1xuICAgICAgICAvKiogQGhpZGRlbiBwbHVnaW4gaW5zdGFuY2VzIGFyZSByZWdpc3RlcmVkIGhlcmUgKi9cbiAgICAgICAgdGhpcy5fcGx1Z2lucyA9IHt9O1xuICAgICAgICB0aGlzLnZpZXdTZXJ2aWNlLl9wbHVnaW5hcGkuX3Jvb3RWaWV3Q29udGV4dCh0aGlzLnN0YXRlUmVnaXN0cnkucm9vdCgpKTtcbiAgICAgICAgdGhpcy5nbG9iYWxzLiRjdXJyZW50ID0gdGhpcy5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKTtcbiAgICAgICAgdGhpcy5nbG9iYWxzLmN1cnJlbnQgPSB0aGlzLmdsb2JhbHMuJGN1cnJlbnQuc2VsZjtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMuZ2xvYmFscyk7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZSh0aGlzLnN0YXRlU2VydmljZSk7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZSh0aGlzLnN0YXRlUmVnaXN0cnkpO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy50cmFuc2l0aW9uU2VydmljZSk7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZSh0aGlzLnVybFJvdXRlcik7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZShsb2NhdGlvblNlcnZpY2UpO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGUobG9jYXRpb25Db25maWcpO1xuICAgIH1cbiAgICAvKiogUmVnaXN0ZXJzIGFuIG9iamVjdCB0byBiZSBub3RpZmllZCB3aGVuIHRoZSByb3V0ZXIgaXMgZGlzcG9zZWQgKi9cbiAgICBVSVJvdXRlci5wcm90b3R5cGUuZGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlKSB7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZGlzcG9zYWJsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGlzIHJvdXRlciBpbnN0YW5jZVxuICAgICAqXG4gICAgICogV2hlbiBjYWxsZWQsIGNsZWFycyByZXNvdXJjZXMgcmV0YWluZWQgYnkgdGhlIHJvdXRlciBieSBjYWxsaW5nIGBkaXNwb3NlKHRoaXMpYCBvbiBhbGxcbiAgICAgKiByZWdpc3RlcmVkIFtbZGlzcG9zYWJsZV1dIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBPciwgaWYgYSBgZGlzcG9zYWJsZWAgb2JqZWN0IGlzIHByb3ZpZGVkLCBjYWxscyBgZGlzcG9zZSh0aGlzKWAgb24gdGhhdCBvYmplY3Qgb25seS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkaXNwb3NhYmxlIChvcHRpb25hbCkgdGhlIGRpc3Bvc2FibGUgdG8gZGlzcG9zZVxuICAgICAqL1xuICAgIFVJUm91dGVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKGRpc3Bvc2FibGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGRpc3Bvc2FibGUgJiYgaXNGdW5jdGlvbihkaXNwb3NhYmxlLmRpc3Bvc2UpKSB7XG4gICAgICAgICAgICBkaXNwb3NhYmxlLmRpc3Bvc2UodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMuc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHR5cGVvZiBkLmRpc3Bvc2UgPT09ICdmdW5jdGlvbicgJiYgZC5kaXNwb3NlKF90aGlzKTtcbiAgICAgICAgICAgICAgICByZW1vdmVGcm9tKF90aGlzLl9kaXNwb3NhYmxlcywgZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkgeyB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHBsdWdpbiB0byBVSS1Sb3V0ZXJcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGFkZHMgYSBVSS1Sb3V0ZXIgUGx1Z2luLlxuICAgICAqIEEgcGx1Z2luIGNhbiBlbmhhbmNlIG9yIGNoYW5nZSBVSS1Sb3V0ZXIgYmVoYXZpb3IgdXNpbmcgYW55IHB1YmxpYyBBUEkuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQgeyBNeUNvb2xQbHVnaW4gfSBmcm9tIFwidWktcm91dGVyLWNvb2wtcGx1Z2luXCI7XG4gICAgICpcbiAgICAgKiB2YXIgcGx1Z2luID0gcm91dGVyLmFkZFBsdWdpbihNeUNvb2xQbHVnaW4pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIFBsdWdpbiBhdXRob3JpbmdcbiAgICAgKlxuICAgICAqIEEgcGx1Z2luIGlzIHNpbXBseSBhIGNsYXNzIChvciBjb25zdHJ1Y3RvciBmdW5jdGlvbikgd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZSBhbmQgKG9wdGlvbmFsbHkpIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhlIHBsdWdpbiBjYW4gaW1wbGVtZW50IGl0cyBmdW5jdGlvbmFsaXR5IHVzaW5nIGFueSBvZiB0aGUgcHVibGljIEFQSXMgb2YgW1tVSVJvdXRlcl1dLlxuICAgICAqIEZvciBleGFtcGxlLCBpdCBtYXkgY29uZmlndXJlIHJvdXRlciBvcHRpb25zIG9yIGFkZCBhIFRyYW5zaXRpb24gSG9vay5cbiAgICAgKlxuICAgICAqIFRoZSBwbHVnaW4gY2FuIHRoZW4gYmUgcHVibGlzaGVkIGFzIGEgc2VwYXJhdGUgbW9kdWxlLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogZXhwb3J0IGNsYXNzIE15QXV0aFBsdWdpbiBpbXBsZW1lbnRzIFVJUm91dGVyUGx1Z2luIHtcbiAgICAgKiAgIGNvbnN0cnVjdG9yKHJvdXRlcjogVUlSb3V0ZXIsIG9wdGlvbnM6IGFueSkge1xuICAgICAqICAgICB0aGlzLm5hbWUgPSBcIk15QXV0aFBsdWdpblwiO1xuICAgICAqICAgICBsZXQgJHRyYW5zaXRpb25zID0gcm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xuICAgICAqICAgICBsZXQgJHN0YXRlID0gcm91dGVyLnN0YXRlU2VydmljZTtcbiAgICAgKlxuICAgICAqICAgICBsZXQgYXV0aENyaXRlcmlhID0ge1xuICAgICAqICAgICAgIHRvOiAoc3RhdGUpID0+IHN0YXRlLmRhdGEgJiYgc3RhdGUuZGF0YS5yZXF1aXJlc0F1dGhcbiAgICAgKiAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICBmdW5jdGlvbiBhdXRoSG9vayh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKSB7XG4gICAgICogICAgICAgbGV0IGF1dGhTZXJ2aWNlID0gdHJhbnNpdGlvbi5pbmplY3RvcigpLmdldCgnQXV0aFNlcnZpY2UnKTtcbiAgICAgKiAgICAgICBpZiAoIWF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICogICAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldCgnbG9naW4nKTtcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH1cbiAgICAgKlxuICAgICAqICAgICAkdHJhbnNpdGlvbnMub25TdGFydChhdXRoQ3JpdGVyaWEsIGF1dGhIb29rKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGx1Z2luIG9uZSBvZjpcbiAgICAgKiAgICAgICAgLSBhIHBsdWdpbiBjbGFzcyB3aGljaCBpbXBsZW1lbnRzIFtbVUlSb3V0ZXJQbHVnaW5dXVxuICAgICAqICAgICAgICAtIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIGEgW1tVSVJvdXRlclBsdWdpbl1dIHdoaWNoIGFjY2VwdHMgYSBbW1VJUm91dGVyXV0gaW5zdGFuY2VcbiAgICAgKiAgICAgICAgLSBhIGZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZSBhbmQgcmV0dXJucyBhIFtbVUlSb3V0ZXJQbHVnaW5dXSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnMgdG8gcGFzcyB0byB0aGUgcGx1Z2luIGNsYXNzL2ZhY3RvcnlcbiAgICAgKiBAcmV0dXJucyB0aGUgcmVnaXN0ZXJlZCBwbHVnaW4gaW5zdGFuY2VcbiAgICAgKi9cbiAgICBVSVJvdXRlci5wcm90b3R5cGUucGx1Z2luID0gZnVuY3Rpb24gKHBsdWdpbiwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB2YXIgcGx1Z2luSW5zdGFuY2UgPSBuZXcgcGx1Z2luKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIXBsdWdpbkluc3RhbmNlLm5hbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHByb3BlcnR5IGBuYW1lYCBtaXNzaW5nIG9uIHBsdWdpbjogJyArIHBsdWdpbkluc3RhbmNlKTtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChwbHVnaW5JbnN0YW5jZSk7XG4gICAgICAgIHJldHVybiAodGhpcy5fcGx1Z2luc1twbHVnaW5JbnN0YW5jZS5uYW1lXSA9IHBsdWdpbkluc3RhbmNlKTtcbiAgICB9O1xuICAgIFVJUm91dGVyLnByb3RvdHlwZS5nZXRQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luTmFtZSkge1xuICAgICAgICByZXR1cm4gcGx1Z2luTmFtZSA/IHRoaXMuX3BsdWdpbnNbcGx1Z2luTmFtZV0gOiB2YWx1ZXModGhpcy5fcGx1Z2lucyk7XG4gICAgfTtcbiAgICByZXR1cm4gVUlSb3V0ZXI7XG59KCkpO1xuZXhwb3J0IHsgVUlSb3V0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlci5qcy5tYXAiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4uL3Jlc29sdmUnO1xuaW1wb3J0IHsgaW5BcnJheSwgdW5pcVIsIHVubmVzdFIsIHZhbHVlcyB9IGZyb20gJy4uL2NvbW1vbic7XG5mdW5jdGlvbiBhZGRDb3JlUmVzb2x2YWJsZXModHJhbnMpIHtcbiAgICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoVUlSb3V0ZXIsIHRyYW5zLnJvdXRlciksICcnKTtcbiAgICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoVHJhbnNpdGlvbiwgdHJhbnMpLCAnJyk7XG4gICAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKCckdHJhbnNpdGlvbiQnLCB0cmFucyksICcnKTtcbiAgICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoJyRzdGF0ZVBhcmFtcycsIHRyYW5zLnBhcmFtcygpKSwgJycpO1xuICAgIHRyYW5zLmVudGVyaW5nKCkuZm9yRWFjaChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKCckc3RhdGUkJywgc3RhdGUpLCBzdGF0ZSk7XG4gICAgfSk7XG59XG5leHBvcnQgdmFyIHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uQ3JlYXRlKHt9LCBhZGRDb3JlUmVzb2x2YWJsZXMpO1xufTtcbnZhciBUUkFOU0lUSU9OX1RPS0VOUyA9IFsnJHRyYW5zaXRpb24kJywgVHJhbnNpdGlvbl07XG52YXIgaXNUcmFuc2l0aW9uID0gaW5BcnJheShUUkFOU0lUSU9OX1RPS0VOUyk7XG4vLyBSZWZlcmVuY2VzIHRvIFRyYW5zaXRpb24gaW4gdGhlIHRyZWVDaGFuZ2VzIHBhdGhub2RlcyBtYWtlcyBhbGxcbi8vIHByZXZpb3VzIFRyYW5zaXRpb25zIHJlYWNoYWJsZSBpbiBtZW1vcnksIGNhdXNpbmcgYSBtZW1vcnkgbGVha1xuLy8gVGhpcyBmdW5jdGlvbiByZW1vdmVzIHJlc29sdmVzIGZvciAnJHRyYW5zaXRpb24kJyBhbmQgYFRyYW5zaXRpb25gIGZyb20gdGhlIHRyZWVDaGFuZ2VzLlxuLy8gRG8gbm90IHVzZSB0aGlzIG9uIGN1cnJlbnQgdHJhbnNpdGlvbnMsIG9ubHkgb24gb2xkIG9uZXMuXG5leHBvcnQgdmFyIHRyZWVDaGFuZ2VzQ2xlYW51cCA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgIHZhciBub2RlcyA9IHZhbHVlcyh0cmFucy50cmVlQ2hhbmdlcygpKVxuICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAucmVkdWNlKHVuaXFSLCBbXSk7XG4gICAgLy8gSWYgdGhlIHJlc29sdmFibGUgaXMgYSBUcmFuc2l0aW9uLCByZXR1cm4gYSBuZXcgcmVzb2x2YWJsZSB3aXRoIG51bGwgZGF0YVxuICAgIHZhciByZXBsYWNlVHJhbnNpdGlvbldpdGhOdWxsID0gZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNpdGlvbihyLnRva2VuKSA/IFJlc29sdmFibGUuZnJvbURhdGEoci50b2tlbiwgbnVsbCkgOiByO1xuICAgIH07XG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBub2RlLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5tYXAocmVwbGFjZVRyYW5zaXRpb25XaXRoTnVsbCk7XG4gICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29yZVJlc29sdmFibGVzLmpzLm1hcCIsIi8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzRnVuY3Rpb24gfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS90YXJnZXRTdGF0ZSc7XG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCByZWRpcmVjdHMgdG8gYSBkaWZmZXJlbnQgc3RhdGUgb3IgcGFyYW1zXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7IHRvOiAoc3RhdGUpID0+ICEhc3RhdGUucmVkaXJlY3RUbyB9LCByZWRpcmVjdEhvb2spO2BcbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlZGlyZWN0VG9dXVxuICovXG52YXIgcmVkaXJlY3RUb0hvb2sgPSBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICB2YXIgcmVkaXJlY3QgPSB0cmFucy50bygpLnJlZGlyZWN0VG87XG4gICAgaWYgKCFyZWRpcmVjdClcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciAkc3RhdGUgPSB0cmFucy5yb3V0ZXIuc3RhdGVTZXJ2aWNlO1xuICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgaWYgKCFyZXN1bHQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBUYXJnZXRTdGF0ZSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGlmIChpc1N0cmluZyhyZXN1bHQpKVxuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQocmVzdWx0LCB0cmFucy5wYXJhbXMoKSwgdHJhbnMub3B0aW9ucygpKTtcbiAgICAgICAgaWYgKHJlc3VsdFsnc3RhdGUnXSB8fCByZXN1bHRbJ3BhcmFtcyddKVxuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQocmVzdWx0WydzdGF0ZSddIHx8IHRyYW5zLnRvKCksIHJlc3VsdFsncGFyYW1zJ10gfHwgdHJhbnMucGFyYW1zKCksIHRyYW5zLm9wdGlvbnMoKSk7XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uKHJlZGlyZWN0KSkge1xuICAgICAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbihyZWRpcmVjdCh0cmFucykpLnRoZW4oaGFuZGxlUmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRsZVJlc3VsdChyZWRpcmVjdCk7XG59O1xuZXhwb3J0IHZhciByZWdpc3RlclJlZGlyZWN0VG9Ib29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoeyB0bzogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLnJlZGlyZWN0VG87IH0gfSwgcmVkaXJlY3RUb0hvb2spO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZGlyZWN0VG8uanMubWFwIiwiLyoqXG4gKiBBIGZhY3Rvcnkgd2hpY2ggY3JlYXRlcyBhbiBvbkVudGVyLCBvbkV4aXQgb3Igb25SZXRhaW4gdHJhbnNpdGlvbiBob29rIGZ1bmN0aW9uXG4gKlxuICogVGhlIHJldHVybmVkIGZ1bmN0aW9uIGludm9rZXMgdGhlIChmb3IgaW5zdGFuY2UpIHN0YXRlLm9uRW50ZXIgaG9vayB3aGVuIHRoZVxuICogc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKGhvb2tOYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0cmFuc2l0aW9uLCBzdGF0ZSkge1xuICAgICAgICB2YXIgX3N0YXRlID0gc3RhdGUuJCRzdGF0ZSgpO1xuICAgICAgICB2YXIgaG9va0ZuID0gX3N0YXRlW2hvb2tOYW1lXTtcbiAgICAgICAgcmV0dXJuIGhvb2tGbih0cmFuc2l0aW9uLCBzdGF0ZSk7XG4gICAgfTtcbn1cbi8qKlxuICogVGhlIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0gZm9yIG9uRXhpdFxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIGlzIGJlaW5nIGV4aXRlZCwgdGhlIHN0YXRlJ3MgLm9uRXhpdCBmdW5jdGlvbiBpcyBpbnZva2VkLlxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uRXhpdCh7IGV4aXRpbmc6IChzdGF0ZSkgPT4gISFzdGF0ZS5vbkV4aXQgfSwgb25FeGl0SG9vayk7YFxuICpcbiAqIFNlZTogW1tJSG9va1JlZ2lzdHJ5Lm9uRXhpdF1dXG4gKi9cbnZhciBvbkV4aXRIb29rID0gbWFrZUVudGVyRXhpdFJldGFpbkhvb2soJ29uRXhpdCcpO1xuZXhwb3J0IHZhciByZWdpc3Rlck9uRXhpdEhvb2sgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25FeGl0KHsgZXhpdGluZzogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLm9uRXhpdDsgfSB9LCBvbkV4aXRIb29rKTtcbn07XG4vKipcbiAqIFRoZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciBvblJldGFpblxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIHdhcyBhbHJlYWR5IGVudGVyZWQsIGFuZCBpcyBub3QgYmVpbmcgZXhpdGVkIG9yIHJlLWVudGVyZWQsIHRoZSBzdGF0ZSdzIC5vblJldGFpbiBmdW5jdGlvbiBpcyBpbnZva2VkLlxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uUmV0YWluKHsgcmV0YWluZWQ6IChzdGF0ZSkgPT4gISFzdGF0ZS5vblJldGFpbiB9LCBvblJldGFpbkhvb2spO2BcbiAqXG4gKiBTZWU6IFtbSUhvb2tSZWdpc3RyeS5vblJldGFpbl1dXG4gKi9cbnZhciBvblJldGFpbkhvb2sgPSBtYWtlRW50ZXJFeGl0UmV0YWluSG9vaygnb25SZXRhaW4nKTtcbmV4cG9ydCB2YXIgcmVnaXN0ZXJPblJldGFpbkhvb2sgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25SZXRhaW4oeyByZXRhaW5lZDogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLm9uUmV0YWluOyB9IH0sIG9uUmV0YWluSG9vayk7XG59O1xuLyoqXG4gKiBUaGUgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXSBmb3Igb25FbnRlclxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIGlzIGJlaW5nIGVudGVyZWQsIHRoZSBzdGF0ZSdzIC5vbkVudGVyIGZ1bmN0aW9uIGlzIGludm9rZWQuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiAoc3RhdGUpID0+ICEhc3RhdGUub25FbnRlciB9LCBvbkVudGVySG9vayk7YFxuICpcbiAqIFNlZTogW1tJSG9va1JlZ2lzdHJ5Lm9uRW50ZXJdXVxuICovXG52YXIgb25FbnRlckhvb2sgPSBtYWtlRW50ZXJFeGl0UmV0YWluSG9vaygnb25FbnRlcicpO1xuZXhwb3J0IHZhciByZWdpc3Rlck9uRW50ZXJIb29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uRW50ZXIoeyBlbnRlcmluZzogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLm9uRW50ZXI7IH0gfSwgb25FbnRlckhvb2spO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9uRW50ZXJFeGl0UmV0YWluLmpzLm1hcCIsIi8qKiBAbW9kdWxlIGhvb2tzICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IFJlc29sdmVDb250ZXh0IH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZlQ29udGV4dCc7XG5pbXBvcnQgeyB2YWwgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmV4cG9ydCB2YXIgUkVTT0xWRV9IT09LX1BSSU9SSVRZID0gMTAwMDtcbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgRUFHRVIgUmVzb2x2YWJsZXMgaW4gdGhlIFRvIFBhdGhcbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCBlYWdlclJlc29sdmVQYXRoLCB7IHByaW9yaXR5OiAxMDAwIH0pO2BcbiAqXG4gKiBXaGVuIGEgVHJhbnNpdGlvbiBzdGFydHMsIHRoaXMgaG9vayByZXNvbHZlcyBhbGwgdGhlIEVBR0VSIFJlc29sdmFibGVzLCB3aGljaCB0aGUgdHJhbnNpdGlvbiB0aGVuIHdhaXRzIGZvci5cbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXVxuICovXG52YXIgZWFnZXJSZXNvbHZlUGF0aCA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQodHJhbnMudHJlZUNoYW5nZXMoKS50bykucmVzb2x2ZVBhdGgoJ0VBR0VSJywgdHJhbnMpLnRoZW4obm9vcCk7XG59O1xuZXhwb3J0IHZhciByZWdpc3RlckVhZ2VyUmVzb2x2ZVBhdGggPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7fSwgZWFnZXJSZXNvbHZlUGF0aCwgeyBwcmlvcml0eTogUkVTT0xWRV9IT09LX1BSSU9SSVRZIH0pO1xufTtcbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgTEFaWSBSZXNvbHZhYmxlcyBmb3IgdGhlIHN0YXRlIChhbmQgYWxsIGl0cyBhbmNlc3RvcnMpIGluIHRoZSBUbyBQYXRoXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiAoKSA9PiB0cnVlIH0sIGxhenlSZXNvbHZlU3RhdGUsIHsgcHJpb3JpdHk6IDEwMDAgfSk7YFxuICpcbiAqIFdoZW4gYSBTdGF0ZSBpcyBiZWluZyBlbnRlcmVkLCB0aGlzIGhvb2sgcmVzb2x2ZXMgYWxsIHRoZSBSZXNvbHZhYmxlcyBmb3IgdGhpcyBzdGF0ZSwgd2hpY2ggdGhlIHRyYW5zaXRpb24gdGhlbiB3YWl0cyBmb3IuXG4gKlxuICogU2VlIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV1cbiAqL1xudmFyIGxhenlSZXNvbHZlU3RhdGUgPSBmdW5jdGlvbiAodHJhbnMsIHN0YXRlKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcygpLnRvKVxuICAgICAgICAuc3ViQ29udGV4dChzdGF0ZS4kJHN0YXRlKCkpXG4gICAgICAgIC5yZXNvbHZlUGF0aCgnTEFaWScsIHRyYW5zKVxuICAgICAgICAudGhlbihub29wKTtcbn07XG5leHBvcnQgdmFyIHJlZ2lzdGVyTGF6eVJlc29sdmVTdGF0ZSA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkVudGVyKHsgZW50ZXJpbmc6IHZhbCh0cnVlKSB9LCBsYXp5UmVzb2x2ZVN0YXRlLCB7IHByaW9yaXR5OiBSRVNPTFZFX0hPT0tfUFJJT1JJVFkgfSk7XG59O1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHJlc29sdmVzIGFueSBkeW5hbWljYWxseSBhZGRlZCAoTEFaWSBvciBFQUdFUikgUmVzb2x2YWJsZXMuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25GaW5pc2goe30sIGVhZ2VyUmVzb2x2ZVBhdGgsIHsgcHJpb3JpdHk6IDEwMDAgfSk7YFxuICpcbiAqIEFmdGVyIGFsbCBlbnRlcmluZyBzdGF0ZXMgaGF2ZSBiZWVuIGVudGVyZWQsIHRoaXMgaG9vayByZXNvbHZlcyBhbnkgcmVtYWluaW5nIFJlc29sdmFibGVzLlxuICogVGhlc2UgYXJlIHR5cGljYWxseSBkeW5hbWljIHJlc29sdmVzIHdoaWNoIHdlcmUgYWRkZWQgYnkgc29tZSBUcmFuc2l0aW9uIEhvb2sgdXNpbmcgW1tUcmFuc2l0aW9uLmFkZFJlc29sdmFibGVdXS5cbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXVxuICovXG52YXIgcmVzb2x2ZVJlbWFpbmluZyA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQodHJhbnMudHJlZUNoYW5nZXMoKS50bykucmVzb2x2ZVBhdGgoJ0xBWlknLCB0cmFucykudGhlbihub29wKTtcbn07XG5leHBvcnQgdmFyIHJlZ2lzdGVyUmVzb2x2ZVJlbWFpbmluZyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkZpbmlzaCh7fSwgcmVzb2x2ZVJlbWFpbmluZywgeyBwcmlvcml0eTogUkVTT0xWRV9IT09LX1BSSU9SSVRZIH0pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc29sdmUuanMubWFwIiwiLyoqIEBtb2R1bGUgaG9va3MgKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHdhaXRzIGZvciB0aGUgdmlld3MgdG8gbG9hZFxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sIGxvYWRFbnRlcmluZ1ZpZXdzKTtgXG4gKlxuICogQWxsb3dzIHRoZSB2aWV3cyB0byBkbyBhc3luYyB3b3JrIGluIFtbVmlld0NvbmZpZy5sb2FkXV0gYmVmb3JlIHRoZSB0cmFuc2l0aW9uIGNvbnRpbnVlcy5cbiAqIEluIGFuZ3VsYXIgMSwgdGhpcyBpbmNsdWRlcyBsb2FkaW5nIHRoZSB0ZW1wbGF0ZXMuXG4gKi9cbnZhciBsb2FkRW50ZXJpbmdWaWV3cyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uKSB7XG4gICAgdmFyICRxID0gc2VydmljZXMuJHE7XG4gICAgdmFyIGVudGVyaW5nVmlld3MgPSB0cmFuc2l0aW9uLnZpZXdzKCdlbnRlcmluZycpO1xuICAgIGlmICghZW50ZXJpbmdWaWV3cy5sZW5ndGgpXG4gICAgICAgIHJldHVybjtcbiAgICByZXR1cm4gJHEuYWxsKGVudGVyaW5nVmlld3MubWFwKGZ1bmN0aW9uICh2aWV3KSB7IHJldHVybiAkcS53aGVuKHZpZXcubG9hZCgpKTsgfSkpLnRoZW4obm9vcCk7XG59O1xuZXhwb3J0IHZhciByZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uRmluaXNoKHt9LCBsb2FkRW50ZXJpbmdWaWV3cyk7XG59O1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIGFjdGl2YXRlcyB0aGUgbmV3IHZpZXdzIHdoZW4gYSB0cmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCBhY3RpdmF0ZVZpZXdzKTtgXG4gKlxuICogQWZ0ZXIgYSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLCB0aGlzIGhvb2sgZGVhY3RpdmF0ZXMgdGhlIG9sZCB2aWV3cyBmcm9tIHRoZSBwcmV2aW91cyBzdGF0ZSxcbiAqIGFuZCBhY3RpdmF0ZXMgdGhlIG5ldyB2aWV3cyBmcm9tIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqXG4gKiBTZWUgW1tWaWV3U2VydmljZV1dXG4gKi9cbnZhciBhY3RpdmF0ZVZpZXdzID0gZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcbiAgICB2YXIgZW50ZXJpbmdWaWV3cyA9IHRyYW5zaXRpb24udmlld3MoJ2VudGVyaW5nJyk7XG4gICAgdmFyIGV4aXRpbmdWaWV3cyA9IHRyYW5zaXRpb24udmlld3MoJ2V4aXRpbmcnKTtcbiAgICBpZiAoIWVudGVyaW5nVmlld3MubGVuZ3RoICYmICFleGl0aW5nVmlld3MubGVuZ3RoKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyICR2aWV3ID0gdHJhbnNpdGlvbi5yb3V0ZXIudmlld1NlcnZpY2U7XG4gICAgZXhpdGluZ1ZpZXdzLmZvckVhY2goZnVuY3Rpb24gKHZjKSB7IHJldHVybiAkdmlldy5kZWFjdGl2YXRlVmlld0NvbmZpZyh2Yyk7IH0pO1xuICAgIGVudGVyaW5nVmlld3MuZm9yRWFjaChmdW5jdGlvbiAodmMpIHsgcmV0dXJuICR2aWV3LmFjdGl2YXRlVmlld0NvbmZpZyh2Yyk7IH0pO1xuICAgICR2aWV3LnN5bmMoKTtcbn07XG5leHBvcnQgdmFyIHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIGFjdGl2YXRlVmlld3MpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXdzLmpzLm1hcCIsImltcG9ydCB7IGNvcHkgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCB1cGRhdGVzIGdsb2JhbCBVSS1Sb3V0ZXIgc3RhdGVcbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7fSwgdXBkYXRlR2xvYmFsU3RhdGUpO2BcbiAqXG4gKiBCZWZvcmUgYSBbW1RyYW5zaXRpb25dXSBzdGFydHMsIHVwZGF0ZXMgdGhlIGdsb2JhbCB2YWx1ZSBvZiBcInRoZSBjdXJyZW50IHRyYW5zaXRpb25cIiAoW1tHbG9iYWxzLnRyYW5zaXRpb25dXSkuXG4gKiBBZnRlciBhIHN1Y2Nlc3NmdWwgW1tUcmFuc2l0aW9uXV0sIHVwZGF0ZXMgdGhlIGdsb2JhbCB2YWx1ZXMgb2YgXCJ0aGUgY3VycmVudCBzdGF0ZVwiXG4gKiAoW1tHbG9iYWxzLmN1cnJlbnRdXSBhbmQgW1tHbG9iYWxzLiRjdXJyZW50XV0pIGFuZCBcInRoZSBjdXJyZW50IHBhcmFtIHZhbHVlc1wiIChbW0dsb2JhbHMucGFyYW1zXV0pLlxuICpcbiAqIFNlZSBhbHNvIHRoZSBkZXByZWNhdGVkIHByb3BlcnRpZXM6XG4gKiBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uXV0sIFtbU3RhdGVTZXJ2aWNlLmN1cnJlbnRdXSwgW1tTdGF0ZVNlcnZpY2UucGFyYW1zXV1cbiAqL1xudmFyIHVwZGF0ZUdsb2JhbFN0YXRlID0gZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgdmFyIGdsb2JhbHMgPSB0cmFucy5yb3V0ZXIuZ2xvYmFscztcbiAgICB2YXIgdHJhbnNpdGlvblN1Y2Nlc3NmdWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGdsb2JhbHMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLmVucXVldWUodHJhbnMpO1xuICAgICAgICBnbG9iYWxzLiRjdXJyZW50ID0gdHJhbnMuJHRvKCk7XG4gICAgICAgIGdsb2JhbHMuY3VycmVudCA9IGdsb2JhbHMuJGN1cnJlbnQuc2VsZjtcbiAgICAgICAgY29weSh0cmFucy5wYXJhbXMoKSwgZ2xvYmFscy5wYXJhbXMpO1xuICAgIH07XG4gICAgdmFyIGNsZWFyQ3VycmVudFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIERvIG5vdCBjbGVhciBnbG9iYWxzLnRyYW5zaXRpb24gaWYgYSBkaWZmZXJlbnQgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZCBpbiB0aGUgbWVhbnRpbWVcbiAgICAgICAgaWYgKGdsb2JhbHMudHJhbnNpdGlvbiA9PT0gdHJhbnMpXG4gICAgICAgICAgICBnbG9iYWxzLnRyYW5zaXRpb24gPSBudWxsO1xuICAgIH07XG4gICAgdHJhbnMub25TdWNjZXNzKHt9LCB0cmFuc2l0aW9uU3VjY2Vzc2Z1bCwgeyBwcmlvcml0eTogMTAwMDAgfSk7XG4gICAgdHJhbnMucHJvbWlzZS50aGVuKGNsZWFyQ3VycmVudFRyYW5zaXRpb24sIGNsZWFyQ3VycmVudFRyYW5zaXRpb24pO1xufTtcbmV4cG9ydCB2YXIgcmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkNyZWF0ZSh7fSwgdXBkYXRlR2xvYmFsU3RhdGUpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZUdsb2JhbHMuanMubWFwIiwiLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHVwZGF0ZXMgdGhlIFVSTCBhZnRlciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgdXBkYXRlVXJsKTtgXG4gKi9cbnZhciB1cGRhdGVVcmwgPSBmdW5jdGlvbiAodHJhbnNpdGlvbikge1xuICAgIHZhciBvcHRpb25zID0gdHJhbnNpdGlvbi5vcHRpb25zKCk7XG4gICAgdmFyICRzdGF0ZSA9IHRyYW5zaXRpb24ucm91dGVyLnN0YXRlU2VydmljZTtcbiAgICB2YXIgJHVybFJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyLnVybFJvdXRlcjtcbiAgICAvLyBEb250IHVwZGF0ZSB0aGUgdXJsIGluIHRoZXNlIHNpdHVhdGlvbnM6XG4gICAgLy8gVGhlIHRyYW5zaXRpb24gd2FzIHRyaWdnZXJlZCBieSBhIFVSTCBzeW5jIChvcHRpb25zLnNvdXJjZSA9PT0gJ3VybCcpXG4gICAgLy8gVGhlIHVzZXIgZG9lc24ndCB3YW50IHRoZSB1cmwgdG8gdXBkYXRlIChvcHRpb25zLmxvY2F0aW9uID09PSBmYWxzZSlcbiAgICAvLyBUaGUgZGVzdGluYXRpb24gc3RhdGUsIGFuZCBhbGwgcGFyZW50cyBoYXZlIG5vIG5hdmlnYWJsZSB1cmxcbiAgICBpZiAob3B0aW9ucy5zb3VyY2UgIT09ICd1cmwnICYmIG9wdGlvbnMubG9jYXRpb24gJiYgJHN0YXRlLiRjdXJyZW50Lm5hdmlnYWJsZSkge1xuICAgICAgICB2YXIgdXJsT3B0aW9ucyA9IHsgcmVwbGFjZTogb3B0aW9ucy5sb2NhdGlvbiA9PT0gJ3JlcGxhY2UnIH07XG4gICAgICAgICR1cmxSb3V0ZXIucHVzaCgkc3RhdGUuJGN1cnJlbnQubmF2aWdhYmxlLnVybCwgJHN0YXRlLnBhcmFtcywgdXJsT3B0aW9ucyk7XG4gICAgfVxuICAgICR1cmxSb3V0ZXIudXBkYXRlKHRydWUpO1xufTtcbmV4cG9ydCB2YXIgcmVnaXN0ZXJVcGRhdGVVcmwgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGVVcmwsIHsgcHJpb3JpdHk6IDk5OTkgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXJsLmpzLm1hcCIsImltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCBwZXJmb3JtcyBsYXp5IGxvYWRpbmdcbiAqXG4gKiBXaGVuIGVudGVyaW5nIGEgc3RhdGUgXCJhYmNcIiB3aGljaCBoYXMgYSBgbGF6eUxvYWRgIGZ1bmN0aW9uIGRlZmluZWQ6XG4gKiAtIEludm9rZSB0aGUgYGxhenlMb2FkYCBmdW5jdGlvbiAodW5sZXNzIGl0IGlzIGFscmVhZHkgaW4gcHJvY2VzcylcbiAqICAgLSBGbGFnIHRoZSBob29rIGZ1bmN0aW9uIGFzIFwiaW4gcHJvY2Vzc1wiXG4gKiAgIC0gVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBwcm9taXNlICh0aGF0IHJlc29sdmVzIHdoZW4gbGF6eSBsb2FkaW5nIGlzIGNvbXBsZXRlKVxuICogLSBXYWl0IGZvciB0aGUgcHJvbWlzZSB0byBzZXR0bGVcbiAqICAgLSBJZiB0aGUgcHJvbWlzZSByZXNvbHZlcyB0byBhIFtbTGF6eUxvYWRSZXN1bHRdXSwgdGhlbiByZWdpc3RlciB0aG9zZSBzdGF0ZXNcbiAqICAgLSBGbGFnIHRoZSBob29rIGZ1bmN0aW9uIGFzIFwibm90IGluIHByb2Nlc3NcIlxuICogLSBJZiB0aGUgaG9vayB3YXMgc3VjY2Vzc2Z1bFxuICogICAtIFJlbW92ZSB0aGUgYGxhenlMb2FkYCBmdW5jdGlvbiBmcm9tIHRoZSBzdGF0ZSBkZWNsYXJhdGlvblxuICogLSBJZiBhbGwgdGhlIGhvb2tzIHdlcmUgc3VjY2Vzc2Z1bFxuICogICAtIFJldHJ5IHRoZSB0cmFuc2l0aW9uIChieSByZXR1cm5pbmcgYSBUYXJnZXRTdGF0ZSlcbiAqXG4gKiBgYGBcbiAqIC5zdGF0ZSgnYWJjJywge1xuICogICBjb21wb25lbnQ6ICdmb29Db21wb25lbnQnLFxuICogICBsYXp5TG9hZDogKCkgPT4gU3lzdGVtLmltcG9ydCgnLi9mb29Db21wb25lbnQnKVxuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ubGF6eUxvYWRdXVxuICovXG52YXIgbGF6eUxvYWRIb29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcbiAgICB2YXIgcm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXI7XG4gICAgZnVuY3Rpb24gcmV0cnlUcmFuc2l0aW9uKCkge1xuICAgICAgICBpZiAodHJhbnNpdGlvbi5vcmlnaW5hbFRyYW5zaXRpb24oKS5vcHRpb25zKCkuc291cmNlICE9PSAndXJsJykge1xuICAgICAgICAgICAgLy8gVGhlIG9yaWdpbmFsIHRyYW5zaXRpb24gd2FzIG5vdCB0cmlnZ2VyZWQgdmlhIHVybCBzeW5jXG4gICAgICAgICAgICAvLyBUaGUgbGF6eSBzdGF0ZSBzaG91bGQgYmUgbG9hZGVkIG5vdywgc28gcmUtdHJ5IHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uXG4gICAgICAgICAgICB2YXIgb3JpZyA9IHRyYW5zaXRpb24udGFyZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXIuc3RhdGVTZXJ2aWNlLnRhcmdldChvcmlnLmlkZW50aWZpZXIoKSwgb3JpZy5wYXJhbXMoKSwgb3JpZy5vcHRpb25zKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIHdhcyB0cmlnZ2VyZWQgdmlhIHVybCBzeW5jXG4gICAgICAgIC8vIFJ1biB0aGUgVVJMIHJ1bGVzIGFuZCBmaW5kIHRoZSBiZXN0IG1hdGNoXG4gICAgICAgIHZhciAkdXJsID0gcm91dGVyLnVybFNlcnZpY2U7XG4gICAgICAgIHZhciByZXN1bHQgPSAkdXJsLm1hdGNoKCR1cmwucGFydHMoKSk7XG4gICAgICAgIHZhciBydWxlID0gcmVzdWx0ICYmIHJlc3VsdC5ydWxlO1xuICAgICAgICAvLyBJZiB0aGUgYmVzdCBtYXRjaCBpcyBhIHN0YXRlLCByZWRpcmVjdCB0aGUgdHJhbnNpdGlvbiAoaW5zdGVhZFxuICAgICAgICAvLyBvZiBjYWxsaW5nIHN5bmMoKSB3aGljaCBzdXBlcnNlZGVzIHRoZSBjdXJyZW50IHRyYW5zaXRpb24pXG4gICAgICAgIGlmIChydWxlICYmIHJ1bGUudHlwZSA9PT0gJ1NUQVRFJykge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gcnVsZS5zdGF0ZTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSByZXN1bHQubWF0Y2g7XG4gICAgICAgICAgICByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZS50YXJnZXQoc3RhdGUsIHBhcmFtcywgdHJhbnNpdGlvbi5vcHRpb25zKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vIG1hdGNoaW5nIHN0YXRlIGZvdW5kLCBzbyBsZXQgLnN5bmMoKSBjaG9vc2UgdGhlIGJlc3Qgbm9uLXN0YXRlIG1hdGNoL290aGVyd2lzZVxuICAgICAgICByb3V0ZXIudXJsU2VydmljZS5zeW5jKCk7XG4gICAgfVxuICAgIHZhciBwcm9taXNlcyA9IHRyYW5zaXRpb25cbiAgICAgICAgLmVudGVyaW5nKClcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuICEhc3RhdGUuJCRzdGF0ZSgpLmxhenlMb2FkOyB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gbGF6eUxvYWRTdGF0ZSh0cmFuc2l0aW9uLCBzdGF0ZSk7IH0pO1xuICAgIHJldHVybiBzZXJ2aWNlcy4kcS5hbGwocHJvbWlzZXMpLnRoZW4ocmV0cnlUcmFuc2l0aW9uKTtcbn07XG5leHBvcnQgdmFyIHJlZ2lzdGVyTGF6eUxvYWRIb29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHsgZW50ZXJpbmc6IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gISFzdGF0ZS5sYXp5TG9hZDsgfSB9LCBsYXp5TG9hZEhvb2spO1xufTtcbi8qKlxuICogSW52b2tlcyBhIHN0YXRlJ3MgbGF6eSBsb2FkIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHRyYW5zaXRpb24gYSBUcmFuc2l0aW9uIGNvbnRleHRcbiAqIEBwYXJhbSBzdGF0ZSB0aGUgc3RhdGUgdG8gbGF6eSBsb2FkXG4gKiBAcmV0dXJucyBBIHByb21pc2UgZm9yIHRoZSBsYXp5IGxvYWQgcmVzdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXp5TG9hZFN0YXRlKHRyYW5zaXRpb24sIHN0YXRlKSB7XG4gICAgdmFyIGxhenlMb2FkRm4gPSBzdGF0ZS4kJHN0YXRlKCkubGF6eUxvYWQ7XG4gICAgLy8gU3RvcmUvZ2V0IHRoZSBsYXp5IGxvYWQgcHJvbWlzZSBvbi9mcm9tIHRoZSBob29rZm4gc28gaXQgZG9lc24ndCBnZXQgcmUtaW52b2tlZFxuICAgIHZhciBwcm9taXNlID0gbGF6eUxvYWRGblsnX3Byb21pc2UnXTtcbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBkZWxldGUgc3RhdGUubGF6eUxvYWQ7XG4gICAgICAgICAgICBkZWxldGUgc3RhdGUuJCRzdGF0ZSgpLmxhenlMb2FkO1xuICAgICAgICAgICAgZGVsZXRlIGxhenlMb2FkRm5bJ19wcm9taXNlJ107XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBkZWxldGUgbGF6eUxvYWRGblsnX3Byb21pc2UnXTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS5yZWplY3QoZXJyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcHJvbWlzZSA9IGxhenlMb2FkRm5bJ19wcm9taXNlJ10gPSBzZXJ2aWNlcy4kcVxuICAgICAgICAgICAgLndoZW4obGF6eUxvYWRGbih0cmFuc2l0aW9uLCBzdGF0ZSkpXG4gICAgICAgICAgICAudGhlbih1cGRhdGVTdGF0ZVJlZ2lzdHJ5KVxuICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuICAgIH1cbiAgICAvKiogUmVnaXN0ZXIgYW55IGxhenkgbG9hZGVkIHN0YXRlIGRlZmluaXRpb25zICovXG4gICAgZnVuY3Rpb24gdXBkYXRlU3RhdGVSZWdpc3RyeShyZXN1bHQpIHtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiBBcnJheS5pc0FycmF5KHJlc3VsdC5zdGF0ZXMpKSB7XG4gICAgICAgICAgICByZXN1bHQuc3RhdGVzLmZvckVhY2goZnVuY3Rpb24gKF9zdGF0ZSkgeyByZXR1cm4gdHJhbnNpdGlvbi5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5yZWdpc3Rlcihfc3RhdGUpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhenlMb2FkLmpzLm1hcCIsImltcG9ydCB7IFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi90cmFuc2l0aW9uSG9vayc7XG4vKipcbiAqIFRoaXMgY2xhc3MgZGVmaW5lcyBhIHR5cGUgb2YgaG9vaywgc3VjaCBhcyBgb25CZWZvcmVgIG9yIGBvbkVudGVyYC5cbiAqIFBsdWdpbnMgY2FuIGRlZmluZSBjdXN0b20gaG9vayB0eXBlcywgc3VjaCBhcyBzdGlja3kgc3RhdGVzIGRvZXMgZm9yIGBvbkluYWN0aXZlYC5cbiAqXG4gKiBAaW50ZXJhbGFwaVxuICovXG52YXIgVHJhbnNpdGlvbkV2ZW50VHlwZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbmZlcnJhYmxlLXR5cGVzICovXG4gICAgZnVuY3Rpb24gVHJhbnNpdGlvbkV2ZW50VHlwZShuYW1lLCBob29rUGhhc2UsIGhvb2tPcmRlciwgY3JpdGVyaWFNYXRjaFBhdGgsIHJldmVyc2VTb3J0LCBnZXRSZXN1bHRIYW5kbGVyLCBnZXRFcnJvckhhbmRsZXIsIHN5bmNocm9ub3VzKSB7XG4gICAgICAgIGlmIChyZXZlcnNlU29ydCA9PT0gdm9pZCAwKSB7IHJldmVyc2VTb3J0ID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGdldFJlc3VsdEhhbmRsZXIgPT09IHZvaWQgMCkgeyBnZXRSZXN1bHRIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suSEFORExFX1JFU1VMVDsgfVxuICAgICAgICBpZiAoZ2V0RXJyb3JIYW5kbGVyID09PSB2b2lkIDApIHsgZ2V0RXJyb3JIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suUkVKRUNUX0VSUk9SOyB9XG4gICAgICAgIGlmIChzeW5jaHJvbm91cyA9PT0gdm9pZCAwKSB7IHN5bmNocm9ub3VzID0gZmFsc2U7IH1cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5ob29rUGhhc2UgPSBob29rUGhhc2U7XG4gICAgICAgIHRoaXMuaG9va09yZGVyID0gaG9va09yZGVyO1xuICAgICAgICB0aGlzLmNyaXRlcmlhTWF0Y2hQYXRoID0gY3JpdGVyaWFNYXRjaFBhdGg7XG4gICAgICAgIHRoaXMucmV2ZXJzZVNvcnQgPSByZXZlcnNlU29ydDtcbiAgICAgICAgdGhpcy5nZXRSZXN1bHRIYW5kbGVyID0gZ2V0UmVzdWx0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5nZXRFcnJvckhhbmRsZXIgPSBnZXRFcnJvckhhbmRsZXI7XG4gICAgICAgIHRoaXMuc3luY2hyb25vdXMgPSBzeW5jaHJvbm91cztcbiAgICB9XG4gICAgcmV0dXJuIFRyYW5zaXRpb25FdmVudFR5cGU7XG59KCkpO1xuZXhwb3J0IHsgVHJhbnNpdGlvbkV2ZW50VHlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNpdGlvbkV2ZW50VHlwZS5qcy5tYXAiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IFJlamVjdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeSc7XG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCBza2lwcyBhIHRyYW5zaXRpb24gaWYgaXQgc2hvdWxkIGJlIGlnbm9yZWRcbiAqXG4gKiBUaGlzIGhvb2sgaXMgaW52b2tlZCBhdCB0aGUgZW5kIG9mIHRoZSBvbkJlZm9yZSBwaGFzZS5cbiAqXG4gKiBJZiB0aGUgdHJhbnNpdGlvbiBzaG91bGQgYmUgaWdub3JlZCAoYmVjYXVzZSBubyBwYXJhbWV0ZXIgb3Igc3RhdGVzIGNoYW5nZWQpXG4gKiB0aGVuIHRoZSB0cmFuc2l0aW9uIGlzIGlnbm9yZWQgYW5kIG5vdCBwcm9jZXNzZWQuXG4gKi9cbmZ1bmN0aW9uIGlnbm9yZWRIb29rKHRyYW5zKSB7XG4gICAgdmFyIGlnbm9yZWRSZWFzb24gPSB0cmFucy5faWdub3JlZFJlYXNvbigpO1xuICAgIGlmICghaWdub3JlZFJlYXNvbilcbiAgICAgICAgcmV0dXJuO1xuICAgIHRyYWNlLnRyYWNlVHJhbnNpdGlvbklnbm9yZWQodHJhbnMpO1xuICAgIHZhciBwZW5kaW5nID0gdHJhbnMucm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbjtcbiAgICAvLyBUaGUgdXNlciBjbGlja2VkIGEgbGluayBnb2luZyBiYWNrIHRvIHRoZSAqY3VycmVudCBzdGF0ZSogKCdBJylcbiAgICAvLyBIb3dldmVyLCB0aGVyZSBpcyBhbHNvIGEgcGVuZGluZyB0cmFuc2l0aW9uIGluIGZsaWdodCAodG8gJ0InKVxuICAgIC8vIEFib3J0IHRoZSB0cmFuc2l0aW9uIHRvICdCJyBiZWNhdXNlIHRoZSB1c2VyIG5vdyB3YW50cyB0byBiZSBiYWNrIGF0ICdBJy5cbiAgICBpZiAoaWdub3JlZFJlYXNvbiA9PT0gJ1NhbWVBc0N1cnJlbnQnICYmIHBlbmRpbmcpIHtcbiAgICAgICAgcGVuZGluZy5hYm9ydCgpO1xuICAgIH1cbiAgICByZXR1cm4gUmVqZWN0aW9uLmlnbm9yZWQoKS50b1Byb21pc2UoKTtcbn1cbmV4cG9ydCB2YXIgcmVnaXN0ZXJJZ25vcmVkVHJhbnNpdGlvbkhvb2sgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sIGlnbm9yZWRIb29rLCB7IHByaW9yaXR5OiAtOTk5OSB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pZ25vcmVkVHJhbnNpdGlvbi5qcy5tYXAiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB0aGF0IHJlamVjdHMgdGhlIFRyYW5zaXRpb24gaWYgaXQgaXMgaW52YWxpZFxuICpcbiAqIFRoaXMgaG9vayBpcyBpbnZva2VkIGF0IHRoZSBlbmQgb2YgdGhlIG9uQmVmb3JlIHBoYXNlLlxuICogSWYgdGhlIHRyYW5zaXRpb24gaXMgaW52YWxpZCAoZm9yIGV4YW1wbGUsIHBhcmFtIHZhbHVlcyBkbyBub3QgdmFsaWRhdGUpXG4gKiB0aGVuIHRoZSB0cmFuc2l0aW9uIGlzIHJlamVjdGVkLlxuICovXG5mdW5jdGlvbiBpbnZhbGlkVHJhbnNpdGlvbkhvb2sodHJhbnMpIHtcbiAgICBpZiAoIXRyYW5zLnZhbGlkKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRyYW5zLmVycm9yKCkudG9TdHJpbmcoKSk7XG4gICAgfVxufVxuZXhwb3J0IHZhciByZWdpc3RlckludmFsaWRUcmFuc2l0aW9uSG9vayA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7fSwgaW52YWxpZFRyYW5zaXRpb25Ib29rLCB7IHByaW9yaXR5OiAtMTAwMDAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW52YWxpZFRyYW5zaXRpb24uanMubWFwIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2tTY29wZSwgVHJhbnNpdGlvbkhvb2tQaGFzZSwgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi90cmFuc2l0aW9uJztcbmltcG9ydCB7IG1ha2VFdmVudCB9IGZyb20gJy4vaG9va1JlZ2lzdHJ5JztcbmltcG9ydCB7IHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzLCB0cmVlQ2hhbmdlc0NsZWFudXAgfSBmcm9tICcuLi9ob29rcy9jb3JlUmVzb2x2YWJsZXMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJSZWRpcmVjdFRvSG9vayB9IGZyb20gJy4uL2hvb2tzL3JlZGlyZWN0VG8nO1xuaW1wb3J0IHsgcmVnaXN0ZXJPbkV4aXRIb29rLCByZWdpc3Rlck9uUmV0YWluSG9vaywgcmVnaXN0ZXJPbkVudGVySG9vayB9IGZyb20gJy4uL2hvb2tzL29uRW50ZXJFeGl0UmV0YWluJztcbmltcG9ydCB7IHJlZ2lzdGVyRWFnZXJSZXNvbHZlUGF0aCwgcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlLCByZWdpc3RlclJlc29sdmVSZW1haW5pbmcgfSBmcm9tICcuLi9ob29rcy9yZXNvbHZlJztcbmltcG9ydCB7IHJlZ2lzdGVyTG9hZEVudGVyaW5nVmlld3MsIHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyB9IGZyb20gJy4uL2hvb2tzL3ZpZXdzJztcbmltcG9ydCB7IHJlZ2lzdGVyVXBkYXRlR2xvYmFsU3RhdGUgfSBmcm9tICcuLi9ob29rcy91cGRhdGVHbG9iYWxzJztcbmltcG9ydCB7IHJlZ2lzdGVyVXBkYXRlVXJsIH0gZnJvbSAnLi4vaG9va3MvdXJsJztcbmltcG9ydCB7IHJlZ2lzdGVyTGF6eUxvYWRIb29rIH0gZnJvbSAnLi4vaG9va3MvbGF6eUxvYWQnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkV2ZW50VHlwZSB9IGZyb20gJy4vdHJhbnNpdGlvbkV2ZW50VHlwZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9vayB9IGZyb20gJy4vdHJhbnNpdGlvbkhvb2snO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgcmVtb3ZlRnJvbSwgdmFsdWVzLCBjcmVhdGVQcm94eUZ1bmN0aW9ucyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgdmFsIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyByZWdpc3Rlcklnbm9yZWRUcmFuc2l0aW9uSG9vayB9IGZyb20gJy4uL2hvb2tzL2lnbm9yZWRUcmFuc2l0aW9uJztcbmltcG9ydCB7IHJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi4vaG9va3MvaW52YWxpZFRyYW5zaXRpb24nO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBbW1RyYW5zaXRpb25dXSBvcHRpb25zLlxuICpcbiAqIEluY2x1ZGUgdGhpcyBvYmplY3Qgd2hlbiBhcHBseWluZyBjdXN0b20gZGVmYXVsdHM6XG4gKiBsZXQgcmVsb2FkT3B0cyA9IHsgcmVsb2FkOiB0cnVlLCBub3RpZnk6IHRydWUgfVxuICogbGV0IG9wdGlvbnMgPSBkZWZhdWx0cyh0aGVpck9wdHMsIGN1c3RvbURlZmF1bHRzLCBkZWZhdWx0T3B0aW9ucyk7XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFRyYW5zT3B0cyA9IHtcbiAgICBsb2NhdGlvbjogdHJ1ZSxcbiAgICByZWxhdGl2ZTogbnVsbCxcbiAgICBpbmhlcml0OiBmYWxzZSxcbiAgICBub3RpZnk6IHRydWUsXG4gICAgcmVsb2FkOiBmYWxzZSxcbiAgICBjdXN0b206IHt9LFxuICAgIGN1cnJlbnQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgc291cmNlOiAndW5rbm93bicsXG59O1xuLyoqXG4gKiBUaGlzIGNsYXNzIHByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gVHJhbnNpdGlvbnMuXG4gKlxuICogLSBNb3N0IGltcG9ydGFudGx5LCBpdCBhbGxvd3MgZ2xvYmFsIFRyYW5zaXRpb24gSG9va3MgdG8gYmUgcmVnaXN0ZXJlZC5cbiAqIC0gSXQgYWxsb3dzIHRoZSBkZWZhdWx0IHRyYW5zaXRpb24gZXJyb3IgaGFuZGxlciB0byBiZSBzZXQuXG4gKiAtIEl0IGFsc28gaGFzIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IFtbVHJhbnNpdGlvbl1dIG9iamVjdHMsICh1c2VkIGludGVybmFsbHkgYnkgdGhlIFtbU3RhdGVTZXJ2aWNlXV0pLlxuICpcbiAqIEF0IGJvb3RzdHJhcCwgW1tVSVJvdXRlcl1dIGNyZWF0ZXMgYSBzaW5nbGUgaW5zdGFuY2UgKHNpbmdsZXRvbikgb2YgdGhpcyBjbGFzcy5cbiAqL1xudmFyIFRyYW5zaXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gVHJhbnNpdGlvblNlcnZpY2UoX3JvdXRlcikge1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl90cmFuc2l0aW9uQ291bnQgPSAwO1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgdHJhbnNpdGlvbiBob29rIHR5cGVzLCBzdWNoIGFzIGBvbkVudGVyYCwgYG9uU3RhcnRgLCBldGMgKi9cbiAgICAgICAgdGhpcy5fZXZlbnRUeXBlcyA9IFtdO1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tzICovXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyZWRIb29rcyA9IHt9O1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgIHBhdGhzIG9uIGEgY3JpdGVyaWEgb2JqZWN0ICovXG4gICAgICAgIHRoaXMuX2NyaXRlcmlhUGF0aHMgPSB7fTtcbiAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcbiAgICAgICAgdGhpcy4kdmlldyA9IF9yb3V0ZXIudmlld1NlcnZpY2U7XG4gICAgICAgIHRoaXMuX2RlcmVnaXN0ZXJIb29rRm5zID0ge307XG4gICAgICAgIHRoaXMuX3BsdWdpbmFwaSA9IGNyZWF0ZVByb3h5RnVuY3Rpb25zKHZhbCh0aGlzKSwge30sIHZhbCh0aGlzKSwgW1xuICAgICAgICAgICAgJ19kZWZpbmVQYXRoVHlwZScsXG4gICAgICAgICAgICAnX2RlZmluZUV2ZW50JyxcbiAgICAgICAgICAgICdfZ2V0UGF0aFR5cGVzJyxcbiAgICAgICAgICAgICdfZ2V0RXZlbnRzJyxcbiAgICAgICAgICAgICdnZXRIb29rcycsXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLl9kZWZpbmVDb3JlUGF0aHMoKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lQ29yZUV2ZW50cygpO1xuICAgICAgICB0aGlzLl9yZWdpc3RlckNvcmVUcmFuc2l0aW9uSG9va3MoKTtcbiAgICAgICAgX3JvdXRlci5nbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5vbkV2aWN0KHRyZWVDaGFuZ2VzQ2xlYW51cCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvbkhvb2tGbl1dLCBjYWxsZWQgKndoaWxlIGEgdHJhbnNpdGlvbiBpcyBiZWluZyBjb25zdHJ1Y3RlZCouXG4gICAgICpcbiAgICAgKiBSZWdpc3RlcnMgYSB0cmFuc2l0aW9uIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIGR1cmluZyB0cmFuc2l0aW9uIGNvbnN0cnVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgbG93IGxldmVsIGhvb2sgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBwbHVnaW5zLlxuICAgICAqIFRoaXMgY2FuIGJlIGEgdXNlZnVsIHRpbWUgZm9yIHBsdWdpbnMgdG8gYWRkIHJlc29sdmVzIG9yIG11dGF0ZSB0aGUgdHJhbnNpdGlvbiBhcyBuZWVkZWQuXG4gICAgICogVGhlIFN0aWNreSBTdGF0ZXMgcGx1Z2luIHVzZXMgdGhpcyBob29rIHRvIG1vZGlmeSB0aGUgdHJlZWNoYW5nZXMuXG4gICAgICpcbiAgICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAgICpcbiAgICAgKiBgb25DcmVhdGVgIGhvb2tzIGFyZSBpbnZva2VkICp3aGlsZSBhIHRyYW5zaXRpb24gaXMgYmVpbmcgY29uc3RydWN0ZWQqLlxuICAgICAqXG4gICAgICogIyMjIFJldHVybiB2YWx1ZVxuICAgICAqXG4gICAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICogQHBhcmFtIGNyaXRlcmlhIGRlZmluZXMgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIEhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGludm9rZWQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIHJlZ2lzdHJhdGlvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgaG9vay5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25DcmVhdGUgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkJlZm9yZSA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uU3RhcnQgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkV4aXQgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vblJldGFpbiA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uRW50ZXIgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkZpbmlzaCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uU3VjY2VzcyA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGRpc3Bvc2VcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyb3V0ZXIpIHtcbiAgICAgICAgdmFsdWVzKHRoaXMuX3JlZ2lzdGVyZWRIb29rcykuZm9yRWFjaChmdW5jdGlvbiAoaG9va3NBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIGhvb2tzQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICAgICAgICAgIGhvb2suX2RlcmVnaXN0ZXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbShob29rc0FycmF5LCBob29rKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgW1tUcmFuc2l0aW9uXV0gb2JqZWN0XG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IFRyYW5zaXRpb24gb2JqZWN0cy5cbiAgICAgKiBJdCBpcyB1c2VkIGludGVybmFsbHkgYnkgdGhlIFtbU3RhdGVTZXJ2aWNlXV0gYW5kIHNob3VsZCBnZW5lcmFsbHkgbm90IGJlIGNhbGxlZCBieSBhcHBsaWNhdGlvbiBjb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZyb21QYXRoIHRoZSBwYXRoIHRvIHRoZSBjdXJyZW50IHN0YXRlICh0aGUgZnJvbSBzdGF0ZSlcbiAgICAgKiBAcGFyYW0gdGFyZ2V0U3RhdGUgdGhlIHRhcmdldCBzdGF0ZSAoZGVzdGluYXRpb24pXG4gICAgICogQHJldHVybnMgYSBUcmFuc2l0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChmcm9tUGF0aCwgdGFyZ2V0U3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGZyb21QYXRoLCB0YXJnZXRTdGF0ZSwgdGhpcy5fcm91dGVyKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9kZWZpbmVDb3JlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgUGhhc2UgPSBUcmFuc2l0aW9uSG9va1BoYXNlO1xuICAgICAgICB2YXIgVEggPSBUcmFuc2l0aW9uSG9vaztcbiAgICAgICAgdmFyIHBhdGhzID0gdGhpcy5fY3JpdGVyaWFQYXRocztcbiAgICAgICAgdmFyIE5PUk1BTF9TT1JUID0gZmFsc2UsIFJFVkVSU0VfU09SVCA9IHRydWU7XG4gICAgICAgIHZhciBTWU5DSFJPTk9VUyA9IHRydWU7XG4gICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvbkNyZWF0ZScsIFBoYXNlLkNSRUFURSwgMCwgcGF0aHMudG8sIE5PUk1BTF9TT1JULCBUSC5MT0dfUkVKRUNURURfUkVTVUxULCBUSC5USFJPV19FUlJPUiwgU1lOQ0hST05PVVMpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25CZWZvcmUnLCBQaGFzZS5CRUZPUkUsIDAsIHBhdGhzLnRvKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uU3RhcnQnLCBQaGFzZS5SVU4sIDAsIHBhdGhzLnRvKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uRXhpdCcsIFBoYXNlLlJVTiwgMTAwLCBwYXRocy5leGl0aW5nLCBSRVZFUlNFX1NPUlQpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25SZXRhaW4nLCBQaGFzZS5SVU4sIDIwMCwgcGF0aHMucmV0YWluZWQpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25FbnRlcicsIFBoYXNlLlJVTiwgMzAwLCBwYXRocy5lbnRlcmluZyk7XG4gICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvbkZpbmlzaCcsIFBoYXNlLlJVTiwgNDAwLCBwYXRocy50byk7XG4gICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvblN1Y2Nlc3MnLCBQaGFzZS5TVUNDRVNTLCAwLCBwYXRocy50bywgTk9STUFMX1NPUlQsIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsIFRILkxPR19FUlJPUiwgU1lOQ0hST05PVVMpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25FcnJvcicsIFBoYXNlLkVSUk9SLCAwLCBwYXRocy50bywgTk9STUFMX1NPUlQsIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsIFRILkxPR19FUlJPUiwgU1lOQ0hST05PVVMpO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuX2RlZmluZUNvcmVQYXRocyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIFNUQVRFID0gVHJhbnNpdGlvbkhvb2tTY29wZS5TVEFURSwgVFJBTlNJVElPTiA9IFRyYW5zaXRpb25Ib29rU2NvcGUuVFJBTlNJVElPTjtcbiAgICAgICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ3RvJywgVFJBTlNJVElPTik7XG4gICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdmcm9tJywgVFJBTlNJVElPTik7XG4gICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdleGl0aW5nJywgU1RBVEUpO1xuICAgICAgICB0aGlzLl9kZWZpbmVQYXRoVHlwZSgncmV0YWluZWQnLCBTVEFURSk7XG4gICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdlbnRlcmluZycsIFNUQVRFKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9kZWZpbmVFdmVudCA9IGZ1bmN0aW9uIChuYW1lLCBob29rUGhhc2UsIGhvb2tPcmRlciwgY3JpdGVyaWFNYXRjaFBhdGgsIHJldmVyc2VTb3J0LCBnZXRSZXN1bHRIYW5kbGVyLCBnZXRFcnJvckhhbmRsZXIsIHN5bmNocm9ub3VzKSB7XG4gICAgICAgIGlmIChyZXZlcnNlU29ydCA9PT0gdm9pZCAwKSB7IHJldmVyc2VTb3J0ID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGdldFJlc3VsdEhhbmRsZXIgPT09IHZvaWQgMCkgeyBnZXRSZXN1bHRIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suSEFORExFX1JFU1VMVDsgfVxuICAgICAgICBpZiAoZ2V0RXJyb3JIYW5kbGVyID09PSB2b2lkIDApIHsgZ2V0RXJyb3JIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suUkVKRUNUX0VSUk9SOyB9XG4gICAgICAgIGlmIChzeW5jaHJvbm91cyA9PT0gdm9pZCAwKSB7IHN5bmNocm9ub3VzID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IG5ldyBUcmFuc2l0aW9uRXZlbnRUeXBlKG5hbWUsIGhvb2tQaGFzZSwgaG9va09yZGVyLCBjcml0ZXJpYU1hdGNoUGF0aCwgcmV2ZXJzZVNvcnQsIGdldFJlc3VsdEhhbmRsZXIsIGdldEVycm9ySGFuZGxlciwgc3luY2hyb25vdXMpO1xuICAgICAgICB0aGlzLl9ldmVudFR5cGVzLnB1c2goZXZlbnRUeXBlKTtcbiAgICAgICAgbWFrZUV2ZW50KHRoaXMsIHRoaXMsIGV2ZW50VHlwZSk7XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZ2V0RXZlbnRzID0gZnVuY3Rpb24gKHBoYXNlKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uSG9va1R5cGVzID0gaXNEZWZpbmVkKHBoYXNlKVxuICAgICAgICAgICAgPyB0aGlzLl9ldmVudFR5cGVzLmZpbHRlcihmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gdHlwZS5ob29rUGhhc2UgPT09IHBoYXNlOyB9KVxuICAgICAgICAgICAgOiB0aGlzLl9ldmVudFR5cGVzLnNsaWNlKCk7XG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uSG9va1R5cGVzLnNvcnQoZnVuY3Rpb24gKGwsIHIpIHtcbiAgICAgICAgICAgIHZhciBjbXBCeVBoYXNlID0gbC5ob29rUGhhc2UgLSByLmhvb2tQaGFzZTtcbiAgICAgICAgICAgIHJldHVybiBjbXBCeVBoYXNlID09PSAwID8gbC5ob29rT3JkZXIgLSByLmhvb2tPcmRlciA6IGNtcEJ5UGhhc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIFBhdGggdG8gYmUgdXNlZCBhcyBhIGNyaXRlcmlvbiBhZ2FpbnN0IGEgVHJlZUNoYW5nZXMgcGF0aFxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGU6IHRoZSBgZXhpdGluZ2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBTVEFURSBzY29wZWQgcGF0aC5cbiAgICAgKiBJdCB3YXMgZGVmaW5lZCBieSBjYWxsaW5nIGBkZWZpbmVUcmVlQ2hhbmdlc0NyaXRlcmlvbignZXhpdGluZycsIFRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUpYFxuICAgICAqIEVhY2ggc3RhdGUgaW4gdGhlIGV4aXRpbmcgcGF0aCBpcyBjaGVja2VkIGFnYWluc3QgdGhlIGNyaXRlcmlhIGFuZCByZXR1cm5lZCBhcyBwYXJ0IG9mIHRoZSBtYXRjaC5cbiAgICAgKlxuICAgICAqIEFub3RoZXIgZXhhbXBsZTogdGhlIGB0b2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBUUkFOU0lUSU9OIHNjb3BlZCBwYXRoLlxuICAgICAqIEl0IHdhcyBkZWZpbmVkIGJ5IGNhbGxpbmcgYGRlZmluZVRyZWVDaGFuZ2VzQ3JpdGVyaW9uKCd0bycsIFRyYW5zaXRpb25Ib29rU2NvcGUuVFJBTlNJVElPTilgXG4gICAgICogT25seSB0aGUgdGFpbCBvZiB0aGUgYHRvYCBwYXRoIGlzIGNoZWNrZWQgYWdhaW5zdCB0aGUgY3JpdGVyaWEgYW5kIHJldHVybmVkIGFzIHBhcnQgb2YgdGhlIG1hdGNoLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZGVmaW5lUGF0aFR5cGUgPSBmdW5jdGlvbiAobmFtZSwgaG9va1Njb3BlKSB7XG4gICAgICAgIHRoaXMuX2NyaXRlcmlhUGF0aHNbbmFtZV0gPSB7IG5hbWU6IG5hbWUsIHNjb3BlOiBob29rU2NvcGUgfTtcbiAgICB9O1xuICAgIC8qKiAqIEBoaWRkZW4gKi9cbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuX2dldFBhdGhUeXBlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyaXRlcmlhUGF0aHM7XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5nZXRIb29rcyA9IGZ1bmN0aW9uIChob29rTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJlZEhvb2tzW2hvb2tOYW1lXTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9yZWdpc3RlckNvcmVUcmFuc2l0aW9uSG9va3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmbnMgPSB0aGlzLl9kZXJlZ2lzdGVySG9va0ZucztcbiAgICAgICAgZm5zLmFkZENvcmVSZXNvbHZlcyA9IHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzKHRoaXMpO1xuICAgICAgICBmbnMuaWdub3JlZCA9IHJlZ2lzdGVySWdub3JlZFRyYW5zaXRpb25Ib29rKHRoaXMpO1xuICAgICAgICBmbnMuaW52YWxpZCA9IHJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rKHRoaXMpO1xuICAgICAgICAvLyBXaXJlIHVwIHJlZGlyZWN0VG8gaG9va1xuICAgICAgICBmbnMucmVkaXJlY3RUbyA9IHJlZ2lzdGVyUmVkaXJlY3RUb0hvb2sodGhpcyk7XG4gICAgICAgIC8vIFdpcmUgdXAgb25FeGl0L1JldGFpbi9FbnRlciBzdGF0ZSBob29rc1xuICAgICAgICBmbnMub25FeGl0ID0gcmVnaXN0ZXJPbkV4aXRIb29rKHRoaXMpO1xuICAgICAgICBmbnMub25SZXRhaW4gPSByZWdpc3Rlck9uUmV0YWluSG9vayh0aGlzKTtcbiAgICAgICAgZm5zLm9uRW50ZXIgPSByZWdpc3Rlck9uRW50ZXJIb29rKHRoaXMpO1xuICAgICAgICAvLyBXaXJlIHVwIFJlc29sdmUgaG9va3NcbiAgICAgICAgZm5zLmVhZ2VyUmVzb2x2ZSA9IHJlZ2lzdGVyRWFnZXJSZXNvbHZlUGF0aCh0aGlzKTtcbiAgICAgICAgZm5zLmxhenlSZXNvbHZlID0gcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlKHRoaXMpO1xuICAgICAgICBmbnMucmVzb2x2ZUFsbCA9IHJlZ2lzdGVyUmVzb2x2ZVJlbWFpbmluZyh0aGlzKTtcbiAgICAgICAgLy8gV2lyZSB1cCB0aGUgVmlldyBtYW5hZ2VtZW50IGhvb2tzXG4gICAgICAgIGZucy5sb2FkVmlld3MgPSByZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzKHRoaXMpO1xuICAgICAgICBmbnMuYWN0aXZhdGVWaWV3cyA9IHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyh0aGlzKTtcbiAgICAgICAgLy8gVXBkYXRlcyBnbG9iYWwgc3RhdGUgYWZ0ZXIgYSB0cmFuc2l0aW9uXG4gICAgICAgIGZucy51cGRhdGVHbG9iYWxzID0gcmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSh0aGlzKTtcbiAgICAgICAgLy8gQWZ0ZXIgZ2xvYmFscy5jdXJyZW50IGlzIHVwZGF0ZWQgYXQgcHJpb3JpdHk6IDEwMDAwXG4gICAgICAgIGZucy51cGRhdGVVcmwgPSByZWdpc3RlclVwZGF0ZVVybCh0aGlzKTtcbiAgICAgICAgLy8gTGF6eSBsb2FkIHN0YXRlIHRyZWVzXG4gICAgICAgIGZucy5sYXp5TG9hZCA9IHJlZ2lzdGVyTGF6eUxvYWRIb29rKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFRyYW5zaXRpb25TZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFRyYW5zaXRpb25TZXJ2aWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2l0aW9uU2VydmljZS5qcy5tYXAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHN0YXRlXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgY3JlYXRlUHJveHlGdW5jdGlvbnMsIGRlZmF1bHRzLCBleHRlbmQsIGluQXJyYXksIG5vb3AsIHJlbW92ZUZyb20sIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSwgc2lsZW50UmVqZWN0aW9uLCB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc09iamVjdCwgaXNTdHJpbmcgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gJy4uL2NvbW1vbi9xdWV1ZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgUGF0aFV0aWxzIH0gZnJvbSAnLi4vcGF0aC9wYXRoVXRpbHMnO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoL3BhdGhOb2RlJztcbmltcG9ydCB7IGRlZmF1bHRUcmFuc09wdHMgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFJlamVjdGlvbiwgUmVqZWN0VHlwZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeSc7XG5pbXBvcnQgeyBUYXJnZXRTdGF0ZSB9IGZyb20gJy4vdGFyZ2V0U3RhdGUnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgR2xvYiB9IGZyb20gJy4uL2NvbW1vbi9nbG9iJztcbmltcG9ydCB7IFJlc29sdmVDb250ZXh0IH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZlQ29udGV4dCc7XG5pbXBvcnQgeyBsYXp5TG9hZFN0YXRlIH0gZnJvbSAnLi4vaG9va3MvbGF6eUxvYWQnO1xuaW1wb3J0IHsgbm90LCB2YWwgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbi8qKlxuICogUHJvdmlkZXMgc3RhdGUgcmVsYXRlZCBzZXJ2aWNlIGZ1bmN0aW9uc1xuICpcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byB1aS1yb3V0ZXIgc3RhdGVzLlxuICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBsb2NhdGVkIG9uIHRoZSBnbG9iYWwgW1tVSVJvdXRlcl1dIG9iamVjdC5cbiAqL1xudmFyIFN0YXRlU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgZnVuY3Rpb24gU3RhdGVTZXJ2aWNlKHJvdXRlcikge1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgICAgICB0aGlzLmludmFsaWRDYWxsYmFja3MgPSBbXTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cbiAgICAgICAgdGhpcy5fZGVmYXVsdEVycm9ySGFuZGxlciA9IGZ1bmN0aW9uICRkZWZhdWx0RXJyb3JIYW5kbGVyKCRlcnJvciQpIHtcbiAgICAgICAgICAgIGlmICgkZXJyb3IkIGluc3RhbmNlb2YgRXJyb3IgJiYgJGVycm9yJC5zdGFjaykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCRlcnJvciQgaW5zdGFuY2VvZiBSZWplY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgaWYgKCRlcnJvciQuZGV0YWlsICYmICRlcnJvciQuZGV0YWlsLnN0YWNrKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQuZGV0YWlsLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBnZXR0ZXJzID0gWydjdXJyZW50JywgJyRjdXJyZW50JywgJ3BhcmFtcycsICd0cmFuc2l0aW9uJ107XG4gICAgICAgIHZhciBib3VuZEZucyA9IE9iamVjdC5rZXlzKFN0YXRlU2VydmljZS5wcm90b3R5cGUpLmZpbHRlcihub3QoaW5BcnJheShnZXR0ZXJzKSkpO1xuICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh2YWwoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSksIHRoaXMsIHZhbCh0aGlzKSwgYm91bmRGbnMpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJ0cmFuc2l0aW9uXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBbW1RyYW5zaXRpb25dXSBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MgKG9yIG51bGwpXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLnRyYW5zaXRpb25dXVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJwYXJhbXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGxhdGVzdCBzdWNjZXNzZnVsIHN0YXRlIHBhcmFtZXRlcnNcbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRocm91Z2ggdG8gW1tVSVJvdXRlckdsb2JhbHMucGFyYW1zXV1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMucGFyYW1zO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJjdXJyZW50XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IFtbU3RhdGVEZWNsYXJhdGlvbl1dXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLmN1cnJlbnRdXVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy5jdXJyZW50O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCIkY3VycmVudFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCBbW1N0YXRlT2JqZWN0XV1cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRocm91Z2ggdG8gW1tVSVJvdXRlckdsb2JhbHMuJGN1cnJlbnRdXVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy4kY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0RXJyb3JIYW5kbGVyKG5vb3ApO1xuICAgICAgICB0aGlzLmludmFsaWRDYWxsYmFja3MgPSBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXIgZm9yIHdoZW4gW1t0cmFuc2l0aW9uVG9dXSBpcyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHN0YXRlLlxuICAgICAqXG4gICAgICogSW52b2tlcyB0aGUgW1tvbkludmFsaWRdXSBjYWxsYmFja3MsIGluIG5hdHVyYWwgb3JkZXIuXG4gICAgICogRWFjaCBjYWxsYmFjaydzIHJldHVybiB2YWx1ZSBpcyBjaGVja2VkIGluIHNlcXVlbmNlIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgVGFyZ2V0U3RhdGUuXG4gICAgICogVGhlIHJlc3VsdHMgb2YgdGhlIGNhbGxiYWNrcyBhcmUgd3JhcHBlZCBpbiAkcS53aGVuKCksIHNvIHRoZSBjYWxsYmFja3MgbWF5IHJldHVybiBwcm9taXNlcy5cbiAgICAgKlxuICAgICAqIElmIGEgY2FsbGJhY2sgcmV0dXJucyBhbiBUYXJnZXRTdGF0ZSwgdGhlbiBpdCBpcyB1c2VkIGFzIGFyZ3VtZW50cyB0byAkc3RhdGUudHJhbnNpdGlvblRvKCkgYW5kIHRoZSByZXN1bHQgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLl9oYW5kbGVJbnZhbGlkVGFyZ2V0U3RhdGUgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRvU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGZyb21TdGF0ZSA9IFBhdGhVdGlscy5tYWtlVGFyZ2V0U3RhdGUodGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeSwgZnJvbVBhdGgpO1xuICAgICAgICB2YXIgZ2xvYmFscyA9IHRoaXMucm91dGVyLmdsb2JhbHM7XG4gICAgICAgIHZhciBsYXRlc3RUaGluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdsb2JhbHMudHJhbnNpdGlvbkhpc3RvcnkucGVla1RhaWwoKTsgfTtcbiAgICAgICAgdmFyIGxhdGVzdCA9IGxhdGVzdFRoaW5nKCk7XG4gICAgICAgIHZhciBjYWxsYmFja1F1ZXVlID0gbmV3IFF1ZXVlKHRoaXMuaW52YWxpZENhbGxiYWNrcy5zbGljZSgpKTtcbiAgICAgICAgdmFyIGluamVjdG9yID0gbmV3IFJlc29sdmVDb250ZXh0KGZyb21QYXRoKS5pbmplY3RvcigpO1xuICAgICAgICB2YXIgY2hlY2tGb3JSZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICghKHJlc3VsdCBpbnN0YW5jZW9mIFRhcmdldFN0YXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSByZXN1bHQ7XG4gICAgICAgICAgICAvLyBSZWNyZWF0ZSB0aGUgVGFyZ2V0U3RhdGUsIGluIGNhc2UgdGhlIHN0YXRlIGlzIG5vdyBkZWZpbmVkLlxuICAgICAgICAgICAgdGFyZ2V0ID0gX3RoaXMudGFyZ2V0KHRhcmdldC5pZGVudGlmaWVyKCksIHRhcmdldC5wYXJhbXMoKSwgdGFyZ2V0Lm9wdGlvbnMoKSk7XG4gICAgICAgICAgICBpZiAoIXRhcmdldC52YWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5pbnZhbGlkKHRhcmdldC5lcnJvcigpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXRlc3RUaGluZygpICE9PSBsYXRlc3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLnN1cGVyc2VkZWQoKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50cmFuc2l0aW9uVG8odGFyZ2V0LmlkZW50aWZpZXIoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTmV4dENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdmFyIG5leHRDYWxsYmFjayA9IGNhbGxiYWNrUXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgaWYgKG5leHRDYWxsYmFjayA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uaW52YWxpZCh0b1N0YXRlLmVycm9yKCkpLnRvUHJvbWlzZSgpO1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrUmVzdWx0ID0gc2VydmljZXMuJHEud2hlbihuZXh0Q2FsbGJhY2sodG9TdGF0ZSwgZnJvbVN0YXRlLCBpbmplY3RvcikpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrUmVzdWx0LnRoZW4oY2hlY2tGb3JSZWRpcmVjdCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiByZXN1bHQgfHwgaW52b2tlTmV4dENhbGxiYWNrKCk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnZva2VOZXh0Q2FsbGJhY2soKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhbiBJbnZhbGlkIFN0YXRlIGhhbmRsZXJcbiAgICAgKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbT25JbnZhbGlkQ2FsbGJhY2tdXSBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvblRvXV1cbiAgICAgKiBoYXMgYmVlbiBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHN0YXRlIHJlZmVyZW5jZSBwYXJhbWV0ZXJcbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBzdGF0ZVNlcnZpY2Uub25JbnZhbGlkKGZ1bmN0aW9uKHRvLCBmcm9tLCBpbmplY3Rvcikge1xuICAgICAqICAgaWYgKHRvLm5hbWUoKSA9PT0gJ2ZvbycpIHtcbiAgICAgKiAgICAgbGV0IGxhenlMb2FkZXIgPSBpbmplY3Rvci5nZXQoJ0xhenlMb2FkU2VydmljZScpO1xuICAgICAqICAgICByZXR1cm4gbGF6eUxvYWRlci5sb2FkKCdmb28nKVxuICAgICAqICAgICAgICAgLnRoZW4oKCkgPT4gc3RhdGVTZXJ2aWNlLnRhcmdldCgnZm9vJykpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgaW52b2tlZCB3aGVuIHRoZSB0b1N0YXRlIGlzIGludmFsaWRcbiAgICAgKiAgIFRoaXMgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIChpbnZhbGlkKSB0b1N0YXRlLCB0aGUgZnJvbVN0YXRlLCBhbmQgYW4gaW5qZWN0b3IuXG4gICAgICogICBUaGUgZnVuY3Rpb24gbWF5IG9wdGlvbmFsbHkgcmV0dXJuIGEgW1tUYXJnZXRTdGF0ZV1dIG9yIGEgUHJvbWlzZSBmb3IgYSBUYXJnZXRTdGF0ZS5cbiAgICAgKiAgIElmIG9uZSBpcyByZXR1cm5lZCwgaXQgaXMgdHJlYXRlZCBhcyBhIHJlZGlyZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLm9uSW52YWxpZCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmludmFsaWRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICByZW1vdmVGcm9tKHRoaXMuaW52YWxpZENhbGxiYWNrcykoY2FsbGJhY2spO1xuICAgICAgICB9LmJpbmQodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWxvYWRzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICpcbiAgICAgKiBBIG1ldGhvZCB0aGF0IGZvcmNlIHJlbG9hZHMgdGhlIGN1cnJlbnQgc3RhdGUsIG9yIGEgcGFydGlhbCBzdGF0ZSBoaWVyYXJjaHkuXG4gICAgICogQWxsIHJlc29sdmVzIGFyZSByZS1yZXNvbHZlZCwgYW5kIGNvbXBvbmVudHMgcmVpbnN0YW50aWF0ZWQuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBsZXQgYXBwIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICAgKlxuICAgICAqIGFwcC5jb250cm9sbGVyKCdjdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XG4gICAgICogICAkc2NvcGUucmVsb2FkID0gZnVuY3Rpb24oKXtcbiAgICAgKiAgICAgJHN0YXRlLnJlbG9hZCgpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogTm90ZTogYHJlbG9hZCgpYCBpcyBqdXN0IGFuIGFsaWFzIGZvcjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogJHN0YXRlLnRyYW5zaXRpb25Ubygkc3RhdGUuY3VycmVudCwgJHN0YXRlLnBhcmFtcywge1xuICAgICAqICAgcmVsb2FkOiB0cnVlLCBpbmhlcml0OiBmYWxzZVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbG9hZFN0YXRlIEEgc3RhdGUgbmFtZSBvciBhIHN0YXRlIG9iamVjdC5cbiAgICAgKiAgICBJZiBwcmVzZW50LCB0aGlzIHN0YXRlIGFuZCBhbGwgaXRzIGNoaWxkcmVuIHdpbGwgYmUgcmVsb2FkZWQsIGJ1dCBhbmNlc3RvcnMgd2lsbCBub3QgcmVsb2FkLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLy9hc3N1bWluZyBhcHAgYXBwbGljYXRpb24gY29uc2lzdHMgb2YgMyBzdGF0ZXM6ICdjb250YWN0cycsICdjb250YWN0cy5kZXRhaWwnLCAnY29udGFjdHMuZGV0YWlsLml0ZW0nXG4gICAgICogLy9hbmQgY3VycmVudCBzdGF0ZSBpcyAnY29udGFjdHMuZGV0YWlsLml0ZW0nXG4gICAgICogbGV0IGFwcCBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XG4gICAgICpcbiAgICAgKiBhcHAuY29udHJvbGxlcignY3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSkge1xuICAgICAqICAgJHNjb3BlLnJlbG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAgICogICAgIC8vd2lsbCByZWxvYWQgJ2NvbnRhY3QuZGV0YWlsJyBhbmQgbmVzdGVkICdjb250YWN0LmRldGFpbC5pdGVtJyBzdGF0ZXNcbiAgICAgKiAgICAgJHN0YXRlLnJlbG9hZCgnY29udGFjdC5kZXRhaWwnKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBuZXcgdHJhbnNpdGlvbi4gU2VlIFtbU3RhdGVTZXJ2aWNlLmdvXV1cbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uIChyZWxvYWRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8odGhpcy5jdXJyZW50LCB0aGlzLnBhcmFtcywge1xuICAgICAgICAgICAgcmVsb2FkOiBpc0RlZmluZWQocmVsb2FkU3RhdGUpID8gcmVsb2FkU3RhdGUgOiB0cnVlLFxuICAgICAgICAgICAgaW5oZXJpdDogZmFsc2UsXG4gICAgICAgICAgICBub3RpZnk6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zaXRpb24gdG8gYSBkaWZmZXJlbnQgc3RhdGUgYW5kL29yIHBhcmFtZXRlcnNcbiAgICAgKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgdHJhbnNpdGlvbmluZyB0byBhIG5ldyBzdGF0ZS5cbiAgICAgKlxuICAgICAqIGAkc3RhdGUuZ29gIGNhbGxzIGAkc3RhdGUudHJhbnNpdGlvblRvYCBpbnRlcm5hbGx5IGJ1dCBhdXRvbWF0aWNhbGx5IHNldHMgb3B0aW9ucyB0b1xuICAgICAqIGB7IGxvY2F0aW9uOiB0cnVlLCBpbmhlcml0OiB0cnVlLCByZWxhdGl2ZTogcm91dGVyLmdsb2JhbHMuJGN1cnJlbnQsIG5vdGlmeTogdHJ1ZSB9YC5cbiAgICAgKiBUaGlzIGFsbG93cyB5b3UgdG8gdXNlIGVpdGhlciBhbiBhYnNvbHV0ZSBvciByZWxhdGl2ZSBgdG9gIGFyZ3VtZW50IChiZWNhdXNlIG9mIGByZWxhdGl2ZTogcm91dGVyLmdsb2JhbHMuJGN1cnJlbnRgKS5cbiAgICAgKiBJdCBhbHNvIGFsbG93cyB5b3UgdG8gc3BlY2lmeSAqIG9ubHkgdGhlIHBhcmFtZXRlcnMgeW91J2QgbGlrZSB0byB1cGRhdGUsIHdoaWxlIGxldHRpbmcgdW5zcGVjaWZpZWQgcGFyYW1ldGVyc1xuICAgICAqIGluaGVyaXQgZnJvbSB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzIChiZWNhdXNlIG9mIGBpbmhlcml0OiB0cnVlYCkuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBsZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xuICAgICAqXG4gICAgICogYXBwLmNvbnRyb2xsZXIoJ2N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUpIHtcbiAgICAgKiAgICRzY29wZS5jaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgICAgJHN0YXRlLmdvKCdjb250YWN0LmRldGFpbCcpO1xuICAgICAqICAgfTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0byBBYnNvbHV0ZSBzdGF0ZSBuYW1lLCBzdGF0ZSBvYmplY3QsIG9yIHJlbGF0aXZlIHN0YXRlIHBhdGggKHJlbGF0aXZlIHRvIGN1cnJlbnQgc3RhdGUpLlxuICAgICAqXG4gICAgICogU29tZSBleGFtcGxlczpcbiAgICAgKlxuICAgICAqIC0gYCRzdGF0ZS5nbygnY29udGFjdC5kZXRhaWwnKWAgLSB3aWxsIGdvIHRvIHRoZSBgY29udGFjdC5kZXRhaWxgIHN0YXRlXG4gICAgICogLSBgJHN0YXRlLmdvKCdeJylgIC0gd2lsbCBnbyB0byB0aGUgcGFyZW50IHN0YXRlXG4gICAgICogLSBgJHN0YXRlLmdvKCdeLnNpYmxpbmcnKWAgLSBpZiBjdXJyZW50IHN0YXRlIGlzIGBob21lLmNoaWxkYCwgd2lsbCBnbyB0byB0aGUgYGhvbWUuc2libGluZ2Agc3RhdGVcbiAgICAgKiAtIGAkc3RhdGUuZ28oJy5jaGlsZC5ncmFuZGNoaWxkJylgIC0gaWYgY3VycmVudCBzdGF0ZSBpcyBob21lLCB3aWxsIGdvIHRvIHRoZSBgaG9tZS5jaGlsZC5ncmFuZGNoaWxkYCBzdGF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyBBIG1hcCBvZiB0aGUgcGFyYW1ldGVycyB0aGF0IHdpbGwgYmUgc2VudCB0byB0aGUgc3RhdGUsIHdpbGwgcG9wdWxhdGUgJHN0YXRlUGFyYW1zLlxuICAgICAqXG4gICAgICogICAgQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCB3aWxsIGJlIGluaGVyaXRlZCBmcm9tIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcyAoYmVjYXVzZSBvZiBgaW5oZXJpdDogdHJ1ZWApLlxuICAgICAqICAgIFRoaXMgYWxsb3dzLCBmb3IgZXhhbXBsZSwgZ29pbmcgdG8gYSBzaWJsaW5nIHN0YXRlIHRoYXQgc2hhcmVzIHBhcmFtZXRlcnMgZGVmaW5lZCBieSBhIHBhcmVudCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRyYW5zaXRpb24gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybnMge3Byb21pc2V9IEEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBuZXcgdHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gKHRvLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRlZmF1dEdvT3B0cyA9IHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQsIGluaGVyaXQ6IHRydWUgfTtcbiAgICAgICAgdmFyIHRyYW5zT3B0cyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1dEdvT3B0cywgZGVmYXVsdFRyYW5zT3B0cyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb25Ubyh0bywgcGFyYW1zLCB0cmFuc09wdHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFtbVGFyZ2V0U3RhdGVdXVxuICAgICAqXG4gICAgICogVGhpcyBpcyBhIGZhY3RvcnkgbWV0aG9kIGZvciBjcmVhdGluZyBhIFRhcmdldFN0YXRlXG4gICAgICpcbiAgICAgKiBUaGlzIG1heSBiZSByZXR1cm5lZCBmcm9tIGEgVHJhbnNpdGlvbiBIb29rIHRvIHJlZGlyZWN0IGEgdHJhbnNpdGlvbiwgZm9yIGV4YW1wbGUuXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS50YXJnZXQgPSBmdW5jdGlvbiAoaWRlbnRpZmllciwgcGFyYW1zLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIC8vIElmIHdlJ3JlIHJlbG9hZGluZywgZmluZCB0aGUgc3RhdGUgb2JqZWN0IHRvIHJlbG9hZCBmcm9tXG4gICAgICAgIGlmIChpc09iamVjdChvcHRpb25zLnJlbG9hZCkgJiYgIW9wdGlvbnMucmVsb2FkLm5hbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVsb2FkIHN0YXRlIG9iamVjdCcpO1xuICAgICAgICB2YXIgcmVnID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeTtcbiAgICAgICAgb3B0aW9ucy5yZWxvYWRTdGF0ZSA9XG4gICAgICAgICAgICBvcHRpb25zLnJlbG9hZCA9PT0gdHJ1ZSA/IHJlZy5yb290KCkgOiByZWcubWF0Y2hlci5maW5kKG9wdGlvbnMucmVsb2FkLCBvcHRpb25zLnJlbGF0aXZlKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVsb2FkICYmICFvcHRpb25zLnJlbG9hZFN0YXRlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VjaCByZWxvYWQgc3RhdGUgJ1wiICsgKGlzU3RyaW5nKG9wdGlvbnMucmVsb2FkKSA/IG9wdGlvbnMucmVsb2FkIDogb3B0aW9ucy5yZWxvYWQubmFtZSkgKyBcIidcIik7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeSwgaWRlbnRpZmllciwgcGFyYW1zLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZ2V0Q3VycmVudFBhdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBnbG9iYWxzID0gdGhpcy5yb3V0ZXIuZ2xvYmFscztcbiAgICAgICAgdmFyIGxhdGVzdFN1Y2Nlc3MgPSBnbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5wZWVrVGFpbCgpO1xuICAgICAgICB2YXIgcm9vdFBhdGggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbbmV3IFBhdGhOb2RlKF90aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKSldOyB9O1xuICAgICAgICByZXR1cm4gbGF0ZXN0U3VjY2VzcyA/IGxhdGVzdFN1Y2Nlc3MudHJlZUNoYW5nZXMoKS50byA6IHJvb3RQYXRoKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb3ctbGV2ZWwgbWV0aG9kIGZvciB0cmFuc2l0aW9uaW5nIHRvIGEgbmV3IHN0YXRlLlxuICAgICAqXG4gICAgICogVGhlIFtbZ29dXSBtZXRob2QgKHdoaWNoIHVzZXMgYHRyYW5zaXRpb25Ub2AgaW50ZXJuYWxseSkgaXMgcmVjb21tZW5kZWQgaW4gbW9zdCBzaXR1YXRpb25zLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICAgKlxuICAgICAqIGFwcC5jb250cm9sbGVyKCdjdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XG4gICAgICogICAkc2NvcGUuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICogICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oJ2NvbnRhY3QuZGV0YWlsJyk7XG4gICAgICogICB9O1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHRvIFN0YXRlIG5hbWUgb3Igc3RhdGUgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB0b1BhcmFtcyBBIG1hcCBvZiB0aGUgcGFyYW1ldGVycyB0aGF0IHdpbGwgYmUgc2VudCB0byB0aGUgc3RhdGUsXG4gICAgICogICAgICB3aWxsIHBvcHVsYXRlICRzdGF0ZVBhcmFtcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUcmFuc2l0aW9uIG9wdGlvbnNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBuZXcgdHJhbnNpdGlvbi4gU2VlIFtbZ29dXVxuICAgICAqL1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUudHJhbnNpdGlvblRvID0gZnVuY3Rpb24gKHRvLCB0b1BhcmFtcywgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodG9QYXJhbXMgPT09IHZvaWQgMCkgeyB0b1BhcmFtcyA9IHt9OyB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcbiAgICAgICAgdmFyIGdsb2JhbHMgPSByb3V0ZXIuZ2xvYmFscztcbiAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRUcmFuc09wdHMpO1xuICAgICAgICB2YXIgZ2V0Q3VycmVudCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdsb2JhbHMudHJhbnNpdGlvbjsgfTtcbiAgICAgICAgb3B0aW9ucyA9IGV4dGVuZChvcHRpb25zLCB7IGN1cnJlbnQ6IGdldEN1cnJlbnQgfSk7XG4gICAgICAgIHZhciByZWYgPSB0aGlzLnRhcmdldCh0bywgdG9QYXJhbXMsIG9wdGlvbnMpO1xuICAgICAgICB2YXIgY3VycmVudFBhdGggPSB0aGlzLmdldEN1cnJlbnRQYXRoKCk7XG4gICAgICAgIGlmICghcmVmLmV4aXN0cygpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZUludmFsaWRUYXJnZXRTdGF0ZShjdXJyZW50UGF0aCwgcmVmKTtcbiAgICAgICAgaWYgKCFyZWYudmFsaWQoKSlcbiAgICAgICAgICAgIHJldHVybiBzaWxlbnRSZWplY3Rpb24ocmVmLmVycm9yKCkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lhbCBoYW5kbGluZyBmb3IgSWdub3JlZCwgQWJvcnRlZCwgYW5kIFJlZGlyZWN0ZWQgdHJhbnNpdGlvbnNcbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHNlbWFudGljcyBmb3IgdGhlIHRyYW5zaXRpb24ucnVuKCkgcHJvbWlzZSBhbmQgdGhlIFN0YXRlU2VydmljZS50cmFuc2l0aW9uVG8oKVxuICAgICAgICAgKiBwcm9taXNlIGRpZmZlci4gRm9yIGluc3RhbmNlLCB0aGUgcnVuKCkgcHJvbWlzZSBtYXkgYmUgcmVqZWN0ZWQgYmVjYXVzZSBpdCB3YXNcbiAgICAgICAgICogSUdOT1JFRCwgYnV0IHRoZSB0cmFuc2l0aW9uVG8oKSBwcm9taXNlIGlzIHJlc29sdmVkIGJlY2F1c2UgZnJvbSB0aGUgdXNlciBwZXJzcGVjdGl2ZVxuICAgICAgICAgKiBubyBlcnJvciBvY2N1cnJlZC4gIExpa2V3aXNlLCB0aGUgdHJhbnNpdGlvbi5ydW4oKSBwcm9taXNlIG1heSBiZSByZWplY3RlZCBiZWNhdXNlIG9mXG4gICAgICAgICAqIGEgUmVkaXJlY3QsIGJ1dCB0aGUgdHJhbnNpdGlvblRvKCkgcHJvbWlzZSBpcyBjaGFpbmVkIHRvIHRoZSBuZXcgVHJhbnNpdGlvbidzIHByb21pc2UuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlciA9IGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZWplY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNMYXRlc3QgPSByb3V0ZXIuZ2xvYmFscy5sYXN0U3RhcnRlZFRyYW5zaXRpb25JZCA9PT0gdHJhbnMuJGlkO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci50eXBlID09PSBSZWplY3RUeXBlLklHTk9SRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uc2lkZXIgaWdub3JlZCBgVHJhbnNpdGlvbi5ydW4oKWAgYXMgYSBzdWNjZXNzZnVsIGB0cmFuc2l0aW9uVG9gXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKGdsb2JhbHMuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkZXRhaWwgPSBlcnJvci5kZXRhaWw7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnR5cGUgPT09IFJlamVjdFR5cGUuU1VQRVJTRURFRCAmJiBlcnJvci5yZWRpcmVjdGVkICYmIGRldGFpbCBpbnN0YW5jZW9mIFRhcmdldFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGBUcmFuc2l0aW9uLnJ1bigpYCB3YXMgcmVkaXJlY3RlZCwgYWxsb3cgdGhlIGB0cmFuc2l0aW9uVG8oKWAgcHJvbWlzZSB0byByZXNvbHZlIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgICAgICAgICAvLyBieSByZXR1cm5pbmcgdGhlIHByb21pc2UgZm9yIHRoZSBuZXcgKHJlZGlyZWN0KSBgVHJhbnNpdGlvbi5ydW4oKWAuXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdCA9IHRyYW5zLnJlZGlyZWN0KGRldGFpbCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWRpcmVjdC5ydW4oKS5jYXRjaChyZWplY3RlZFRyYW5zaXRpb25IYW5kbGVyKHJlZGlyZWN0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlcnJvci50eXBlID09PSBSZWplY3RUeXBlLkFCT1JURUQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxlciA9IF90aGlzLmRlZmF1bHRFcnJvckhhbmRsZXIoKTtcbiAgICAgICAgICAgIGVycm9ySGFuZGxlcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gc2VydmljZXMuJHEucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfTsgfTtcbiAgICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUoY3VycmVudFBhdGgsIHJlZik7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uVG9Qcm9taXNlID0gdHJhbnNpdGlvbi5ydW4oKS5jYXRjaChyZWplY3RlZFRyYW5zaXRpb25IYW5kbGVyKHRyYW5zaXRpb24pKTtcbiAgICAgICAgc2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlKHRyYW5zaXRpb25Ub1Byb21pc2UpOyAvLyBpc3N1ZSAjMjY3NlxuICAgICAgICAvLyBSZXR1cm4gYSBwcm9taXNlIGZvciB0aGUgdHJhbnNpdGlvbiwgd2hpY2ggYWxzbyBoYXMgdGhlIHRyYW5zaXRpb24gb2JqZWN0IG9uIGl0LlxuICAgICAgICByZXR1cm4gZXh0ZW5kKHRyYW5zaXRpb25Ub1Byb21pc2UsIHsgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBzdGF0ZSAqaXMqIHRoZSBwcm92aWRlZCBzdGF0ZVxuICAgICAqXG4gICAgICogU2ltaWxhciB0byBbW2luY2x1ZGVzXV0gYnV0IG9ubHkgY2hlY2tzIGZvciB0aGUgZnVsbCBzdGF0ZSBuYW1lLlxuICAgICAqIElmIHBhcmFtcyBpcyBzdXBwbGllZCB0aGVuIGl0IHdpbGwgYmUgdGVzdGVkIGZvciBzdHJpY3QgZXF1YWxpdHkgYWdhaW5zdCB0aGUgY3VycmVudFxuICAgICAqIGFjdGl2ZSBwYXJhbXMgb2JqZWN0LCBzbyBhbGwgcGFyYW1zIG11c3QgbWF0Y2ggd2l0aCBub25lIG1pc3NpbmcgYW5kIG5vIGV4dHJhcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZS4kY3VycmVudC5uYW1lID0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSc7XG4gICAgICpcbiAgICAgKiAvLyBhYnNvbHV0ZSBuYW1lXG4gICAgICogJHN0YXRlLmlzKCdjb250YWN0LmRldGFpbHMuaXRlbScpOyAvLyByZXR1cm5zIHRydWVcbiAgICAgKiAkc3RhdGUuaXMoY29udGFjdERldGFpbEl0ZW1TdGF0ZU9iamVjdCk7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogLy8gcmVsYXRpdmUgbmFtZSAoLiBhbmQgXiksIHR5cGljYWxseSBmcm9tIGEgdGVtcGxhdGVcbiAgICAgKiAvLyBFLmcuIGZyb20gdGhlICdjb250YWN0cy5kZXRhaWxzJyB0ZW1wbGF0ZVxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8ZGl2IG5nLWNsYXNzPVwie2hpZ2hsaWdodGVkOiAkc3RhdGUuaXMoJy5pdGVtJyl9XCI+SXRlbTwvZGl2PlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIFRoZSBzdGF0ZSBuYW1lIChhYnNvbHV0ZSBvciByZWxhdGl2ZSkgb3Igc3RhdGUgb2JqZWN0IHlvdSdkIGxpa2UgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHBhcmFtcyBBIHBhcmFtIG9iamVjdCwgZS5nLiBge3NlY3Rpb25JZDogc2VjdGlvbi5pZH1gLCB0aGF0IHlvdSdkIGxpa2VcbiAgICAgKiB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICogICAtIGByZWxhdGl2ZWA6IElmIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSBuYW1lIGFuZCBgb3B0aW9ucy5yZWxhdGl2ZWAgaXMgc2V0LCAuaXMgd2lsbFxuICAgICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIHRydWUgaWYgaXQgaXMgdGhlIHN0YXRlLlxuICAgICAqL1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIHBhcmFtcywgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgeyByZWxhdGl2ZTogdGhpcy4kY3VycmVudCB9KTtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoc3RhdGVPck5hbWUsIG9wdGlvbnMucmVsYXRpdmUpO1xuICAgICAgICBpZiAoIWlzRGVmaW5lZChzdGF0ZSkpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy4kY3VycmVudCAhPT0gc3RhdGUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghcGFyYW1zKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBzY2hlbWEgPSBzdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogdHJ1ZSwgbWF0Y2hpbmdLZXlzOiBwYXJhbXMgfSk7XG4gICAgICAgIHJldHVybiBQYXJhbS5lcXVhbHMoc2NoZW1hLCBQYXJhbS52YWx1ZXMoc2NoZW1hLCBwYXJhbXMpLCB0aGlzLnBhcmFtcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgc3RhdGUgKmluY2x1ZGVzKiB0aGUgcHJvdmlkZWQgc3RhdGVcbiAgICAgKlxuICAgICAqIEEgbWV0aG9kIHRvIGRldGVybWluZSBpZiB0aGUgY3VycmVudCBhY3RpdmUgc3RhdGUgaXMgZXF1YWwgdG8gb3IgaXMgdGhlIGNoaWxkIG9mIHRoZVxuICAgICAqIHN0YXRlIHN0YXRlTmFtZS4gSWYgYW55IHBhcmFtcyBhcmUgcGFzc2VkIHRoZW4gdGhleSB3aWxsIGJlIHRlc3RlZCBmb3IgYSBtYXRjaCBhcyB3ZWxsLlxuICAgICAqIE5vdCBhbGwgdGhlIHBhcmFtZXRlcnMgbmVlZCB0byBiZSBwYXNzZWQsIGp1c3QgdGhlIG9uZXMgeW91J2QgbGlrZSB0byB0ZXN0IGZvciBlcXVhbGl0eS5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZSB3aGVuIGAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSdgXG4gICAgICogYGBganNcbiAgICAgKiAvLyBVc2luZyBwYXJ0aWFsIG5hbWVzXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHNcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHNcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHMuaXRlbVwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHMubGlzdFwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImFib3V0XCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMjIEdsb2IgRXhhbXBsZXMgd2hlbiBgKiAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbS51cmwnYDpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qLipcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiKiouaXRlbS4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiKi5kZXRhaWxzLml0ZW0udXJsXCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqLmRldGFpbHMuKi51cmxcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qXCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiaXRlbS4qKlwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIEEgcGFydGlhbCBuYW1lLCByZWxhdGl2ZSBuYW1lLCBnbG9iIHBhdHRlcm4sXG4gICAgICogICBvciBzdGF0ZSBvYmplY3QgdG8gYmUgc2VhcmNoZWQgZm9yIHdpdGhpbiB0aGUgY3VycmVudCBzdGF0ZSBuYW1lLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQSBwYXJhbSBvYmplY3QsIGUuZy4gYHtzZWN0aW9uSWQ6IHNlY3Rpb24uaWR9YCxcbiAgICAgKiAgIHRoYXQgeW91J2QgbGlrZSB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICogICAtIGByZWxhdGl2ZWA6IElmIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSBuYW1lIGFuZCBgb3B0aW9ucy5yZWxhdGl2ZWAgaXMgc2V0LCAuaXMgd2lsbFxuICAgICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGl0IGRvZXMgaW5jbHVkZSB0aGUgc3RhdGVcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQgfSk7XG4gICAgICAgIHZhciBnbG9iID0gaXNTdHJpbmcoc3RhdGVPck5hbWUpICYmIEdsb2IuZnJvbVN0cmluZyhzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmIChnbG9iKSB7XG4gICAgICAgICAgICBpZiAoIWdsb2IubWF0Y2hlcyh0aGlzLiRjdXJyZW50Lm5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHN0YXRlT3JOYW1lID0gdGhpcy4kY3VycmVudC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKSwgaW5jbHVkZSA9IHRoaXMuJGN1cnJlbnQuaW5jbHVkZXM7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKHN0YXRlKSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKGluY2x1ZGVbc3RhdGUubmFtZV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB2YXIgc2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IHRydWUsIG1hdGNoaW5nS2V5czogcGFyYW1zIH0pO1xuICAgICAgICByZXR1cm4gUGFyYW0uZXF1YWxzKHNjaGVtYSwgUGFyYW0udmFsdWVzKHNjaGVtYSwgcGFyYW1zKSwgdGhpcy5wYXJhbXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgVVJMIGZvciBhIHN0YXRlIGFuZCBwYXJhbWV0ZXJzXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSB1cmwgZm9yIHRoZSBnaXZlbiBzdGF0ZSBwb3B1bGF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1zLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogZXhwZWN0KCRzdGF0ZS5ocmVmKFwiYWJvdXQucGVyc29uXCIsIHsgcGVyc29uOiBcImJvYlwiIH0pKS50b0VxdWFsKFwiL2Fib3V0L2JvYlwiKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSBUaGUgc3RhdGUgbmFtZSBvciBzdGF0ZSBvYmplY3QgeW91J2QgbGlrZSB0byBnZW5lcmF0ZSBhIHVybCBmcm9tLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IG9mIHBhcmFtZXRlciB2YWx1ZXMgdG8gZmlsbCB0aGUgc3RhdGUncyByZXF1aXJlZCBwYXJhbWV0ZXJzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21waWxlZCBzdGF0ZSB1cmxcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmhyZWYgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIHBhcmFtcywgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGVmYXVsdEhyZWZPcHRzID0ge1xuICAgICAgICAgICAgbG9zc3k6IHRydWUsXG4gICAgICAgICAgICBpbmhlcml0OiB0cnVlLFxuICAgICAgICAgICAgYWJzb2x1dGU6IGZhbHNlLFxuICAgICAgICAgICAgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQsXG4gICAgICAgIH07XG4gICAgICAgIG9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0SHJlZk9wdHMpO1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKTtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQoc3RhdGUpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLmluaGVyaXQpXG4gICAgICAgICAgICBwYXJhbXMgPSB0aGlzLnBhcmFtcy4kaW5oZXJpdChwYXJhbXMsIHRoaXMuJGN1cnJlbnQsIHN0YXRlKTtcbiAgICAgICAgdmFyIG5hdiA9IHN0YXRlICYmIG9wdGlvbnMubG9zc3kgPyBzdGF0ZS5uYXZpZ2FibGUgOiBzdGF0ZTtcbiAgICAgICAgaWYgKCFuYXYgfHwgbmF2LnVybCA9PT0gdW5kZWZpbmVkIHx8IG5hdi51cmwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlci51cmxSb3V0ZXIuaHJlZihuYXYudXJsLCBwYXJhbXMsIHtcbiAgICAgICAgICAgIGFic29sdXRlOiBvcHRpb25zLmFic29sdXRlLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgb3IgZ2V0cyB0aGUgZGVmYXVsdCBbW3RyYW5zaXRpb25Ub11dIGVycm9yIGhhbmRsZXIuXG4gICAgICpcbiAgICAgKiBUaGUgZXJyb3IgaGFuZGxlciBpcyBjYWxsZWQgd2hlbiBhIFtbVHJhbnNpdGlvbl1dIGlzIHJlamVjdGVkIG9yIHdoZW4gYW55IGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgVHJhbnNpdGlvbi5cbiAgICAgKiBUaGlzIGluY2x1ZGVzIGVycm9ycyBjYXVzZWQgYnkgcmVzb2x2ZXMgYW5kIHRyYW5zaXRpb24gaG9va3MuXG4gICAgICpcbiAgICAgKiBOb3RlOlxuICAgICAqIFRoaXMgaGFuZGxlciBkb2VzIG5vdCByZWNlaXZlIGNlcnRhaW4gVHJhbnNpdGlvbiByZWplY3Rpb25zLlxuICAgICAqIFJlZGlyZWN0ZWQgYW5kIElnbm9yZWQgVHJhbnNpdGlvbnMgYXJlIG5vdCBjb25zaWRlcmVkIHRvIGJlIGVycm9ycyBieSBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXS5cbiAgICAgKlxuICAgICAqIFRoZSBidWlsdC1pbiBkZWZhdWx0IGVycm9yIGhhbmRsZXIgbG9ncyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGUuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHByb3ZpZGUgeW91ciBvd24gY3VzdG9tIGhhbmRsZXIuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBzdGF0ZVNlcnZpY2UuZGVmYXVsdEVycm9ySGFuZGxlcihmdW5jdGlvbigpIHtcbiAgICAgKiAgIC8vIERvIG5vdCBsb2cgdHJhbnNpdGlvblRvIGVycm9yc1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGhhbmRsZXIgYSBnbG9iYWwgZXJyb3IgaGFuZGxlciBmdW5jdGlvblxuICAgICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IGdsb2JhbCBlcnJvciBoYW5kbGVyXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5kZWZhdWx0RXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyID0gaGFuZGxlciB8fCB0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyKTtcbiAgICB9O1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBiYXNlKSB7XG4gICAgICAgIHZhciByZWcgPSB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5O1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiByZWcuZ2V0KCk7XG4gICAgICAgIHJldHVybiByZWcuZ2V0KHN0YXRlT3JOYW1lLCBiYXNlIHx8IHRoaXMuJGN1cnJlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTGF6eSBsb2FkcyBhIHN0YXRlXG4gICAgICpcbiAgICAgKiBFeHBsaWNpdGx5IHJ1bnMgYSBzdGF0ZSdzIFtbU3RhdGVEZWNsYXJhdGlvbi5sYXp5TG9hZF1dIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIHRoZSBzdGF0ZSB0aGF0IHNob3VsZCBiZSBsYXp5IGxvYWRlZFxuICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHRoZSBvcHRpb25hbCBUcmFuc2l0aW9uIGNvbnRleHQgdG8gdXNlIChpZiB0aGUgbGF6eUxvYWQgZnVuY3Rpb24gcmVxdWlyZXMgYW4gaW5qZWN0b3IsIGV0YylcbiAgICAgKiBOb3RlOiBJZiBubyB0cmFuc2l0aW9uIGlzIHByb3ZpZGVkLCBhIG5vb3AgdHJhbnNpdGlvbiBpcyBjcmVhdGVkIHVzaW5nIHRoZSBmcm9tIHRoZSBjdXJyZW50IHN0YXRlIHRvIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAqIFRoaXMgbm9vcCB0cmFuc2l0aW9uIGlzIG5vdCBhY3R1YWxseSBydW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgdG8gbGF6eSBsb2FkXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5sYXp5TG9hZCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgdHJhbnNpdGlvbikge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmICghc3RhdGUgfHwgIXN0YXRlLmxhenlMb2FkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gbm90IGxhenkgbG9hZCAnICsgc3RhdGVPck5hbWUpO1xuICAgICAgICB2YXIgY3VycmVudFBhdGggPSB0aGlzLmdldEN1cnJlbnRQYXRoKCk7XG4gICAgICAgIHZhciB0YXJnZXQgPSBQYXRoVXRpbHMubWFrZVRhcmdldFN0YXRlKHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnksIGN1cnJlbnRQYXRoKTtcbiAgICAgICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gfHwgdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlKGN1cnJlbnRQYXRoLCB0YXJnZXQpO1xuICAgICAgICByZXR1cm4gbGF6eUxvYWRTdGF0ZSh0cmFuc2l0aW9uLCBzdGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGVTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFN0YXRlU2VydmljZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVTZXJ2aWNlLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBpc0FycmF5LCBpc09iamVjdCB9IGZyb20gJy4uL2NvbW1vbi9pbmRleCc7XG4vKipcbiAqIEFuIGFuZ3VsYXIxLWxpa2UgcHJvbWlzZSBhcGlcbiAqXG4gKiBUaGlzIG9iamVjdCBpbXBsZW1lbnRzIGZvdXIgbWV0aG9kcyBzaW1pbGFyIHRvIHRoZVxuICogW2FuZ3VsYXIgMSBwcm9taXNlIGFwaV0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJHEpXG4gKlxuICogVUktUm91dGVyIGV2b2x2ZWQgZnJvbSBhbiBhbmd1bGFyIDEgbGlicmFyeSB0byBhIGZyYW1ld29yayBhZ25vc3RpYyBsaWJyYXJ5LlxuICogSG93ZXZlciwgc29tZSBvZiB0aGUgYEB1aXJvdXRlci9jb3JlYCBjb2RlIHVzZXMgdGhlc2UgbmcxIHN0eWxlIEFQSXMgdG8gc3VwcG9ydCBuZzEgc3R5bGUgZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gKlxuICogVGhpcyBBUEkgcHJvdmlkZXMgbmF0aXZlIEVTNiBwcm9taXNlIHN1cHBvcnQgd3JhcHBlZCBhcyBhICRxLWxpa2UgQVBJLlxuICogSW50ZXJuYWxseSwgVUktUm91dGVyIHVzZXMgdGhpcyAkcSBvYmplY3QgdG8gcGVyZm9ybSBwcm9taXNlIG9wZXJhdGlvbnMuXG4gKiBUaGUgYGFuZ3VsYXItdWktcm91dGVyYCAodWktcm91dGVyIGZvciBhbmd1bGFyIDEpIHVzZXMgdGhlICRxIEFQSSBwcm92aWRlZCBieSBhbmd1bGFyLlxuICpcbiAqICRxLWxpa2UgcHJvbWlzZSBhcGlcbiAqL1xuZXhwb3J0IHZhciAkcSA9IHtcbiAgICAvKiogTm9ybWFsaXplcyBhIHZhbHVlIGFzIGEgcHJvbWlzZSAqL1xuICAgIHdoZW46IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgcmV0dXJuIHJlc29sdmUodmFsKTsgfSk7IH0sXG4gICAgLyoqIE5vcm1hbGl6ZXMgYSB2YWx1ZSBhcyBhIHByb21pc2UgcmVqZWN0aW9uICovXG4gICAgcmVqZWN0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICByZWplY3QodmFsKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvKiogQHJldHVybnMgYSBkZWZlcnJlZCBvYmplY3QsIHdoaWNoIGhhcyBgcmVzb2x2ZWAgYW5kIGByZWplY3RgIGZ1bmN0aW9ucyAqL1xuICAgIGRlZmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHt9O1xuICAgICAgICBkZWZlcnJlZC5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XG4gICAgfSxcbiAgICAvKiogTGlrZSBQcm9taXNlLmFsbCgpLCBidXQgYWxzbyBzdXBwb3J0cyBvYmplY3Qga2V5L3Byb21pc2Ugbm90YXRpb24gbGlrZSAkcSAqL1xuICAgIGFsbDogZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgICAgIGlmIChpc0FycmF5KHByb21pc2VzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNPYmplY3QocHJvbWlzZXMpKSB7XG4gICAgICAgICAgICAvLyBDb252ZXJ0IHByb21pc2VzIG1hcCB0byBwcm9taXNlcyBhcnJheS5cbiAgICAgICAgICAgIC8vIFdoZW4gZWFjaCBwcm9taXNlIHJlc29sdmVzLCBtYXAgaXQgdG8gYSB0dXBsZSB7IGtleToga2V5LCB2YWw6IHZhbCB9XG4gICAgICAgICAgICB2YXIgY2hhaW4gPSBPYmplY3Qua2V5cyhwcm9taXNlcykubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHByb21pc2VzW2tleV0udGhlbihmdW5jdGlvbiAodmFsKSB7IHJldHVybiAoeyBrZXk6IGtleSwgdmFsOiB2YWwgfSk7IH0pOyB9KTtcbiAgICAgICAgICAgIC8vIFRoZW4gd2FpdCBmb3IgYWxsIHByb21pc2VzIHRvIHJlc29sdmUsIGFuZCBjb252ZXJ0IHRoZW0gYmFjayB0byBhbiBvYmplY3RcbiAgICAgICAgICAgIHJldHVybiAkcS5hbGwoY2hhaW4pLnRoZW4oZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHR1cGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY1t0dXBsZS5rZXldID0gdHVwbGUudmFsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBleHRlbmQsIGFzc2VydFByZWRpY2F0ZSwgaXNGdW5jdGlvbiwgaXNBcnJheSwgaXNJbmplY3RhYmxlLCB9IGZyb20gJy4uL2NvbW1vbi9pbmRleCc7XG4vLyBnbG9iYWxseSBhdmFpbGFibGUgaW5qZWN0YWJsZXNcbnZhciBnbG9iYWxzID0ge307XG52YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvZ207XG52YXIgQVJHVU1FTlRfTkFNRVMgPSAvKFteXFxzLF0rKS9nO1xuLyoqXG4gKiBBIGJhc2ljIGFuZ3VsYXIxLWxpa2UgaW5qZWN0b3IgYXBpXG4gKlxuICogVGhpcyBvYmplY3QgaW1wbGVtZW50cyBmb3VyIG1ldGhvZHMgc2ltaWxhciB0byB0aGVcbiAqIFthbmd1bGFyIDEgZGVwZW5kZW5jeSBpbmplY3Rvcl0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2F1dG8vc2VydmljZS8kaW5qZWN0b3IpXG4gKlxuICogVUktUm91dGVyIGV2b2x2ZWQgZnJvbSBhbiBhbmd1bGFyIDEgbGlicmFyeSB0byBhIGZyYW1ld29yayBhZ25vc3RpYyBsaWJyYXJ5LlxuICogSG93ZXZlciwgc29tZSBvZiB0aGUgYEB1aXJvdXRlci9jb3JlYCBjb2RlIHVzZXMgdGhlc2UgbmcxIHN0eWxlIEFQSXMgdG8gc3VwcG9ydCBuZzEgc3R5bGUgZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gKlxuICogVGhpcyBvYmplY3QgcHJvdmlkZXMgYSBuYWl2ZSBpbXBsZW1lbnRhdGlvbiBvZiBhIGdsb2JhbGx5IHNjb3BlZCBkZXBlbmRlbmN5IGluamVjdGlvbiBzeXN0ZW0uXG4gKiBJdCBzdXBwb3J0cyB0aGUgZm9sbG93aW5nIERJIGFwcHJvYWNoZXM6XG4gKlxuICogIyMjIEZ1bmN0aW9uIHBhcmFtZXRlciBuYW1lc1xuICpcbiAqIEEgZnVuY3Rpb24ncyBgLnRvU3RyaW5nKClgIGlzIGNhbGxlZCwgYW5kIHRoZSBwYXJhbWV0ZXIgbmFtZXMgYXJlIHBhcnNlZC5cbiAqIFRoaXMgb25seSB3b3JrcyB3aGVuIHRoZSBwYXJhbWV0ZXIgbmFtZXMgYXJlbid0IFwibWFuZ2xlZFwiIGJ5IGEgbWluaWZpZXIgc3VjaCBhcyBVZ2xpZnlKUy5cbiAqXG4gKiBgYGBqc1xuICogZnVuY3Rpb24gaW5qZWN0ZWRGdW5jdGlvbihGb29TZXJ2aWNlLCBCYXJTZXJ2aWNlKSB7XG4gKiAgIC8vIEZvb1NlcnZpY2UgYW5kIEJhclNlcnZpY2UgYXJlIGluamVjdGVkXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgRnVuY3Rpb24gYW5ub3RhdGlvblxuICpcbiAqIEEgZnVuY3Rpb24gbWF5IGJlIGFubm90YXRlZCB3aXRoIGFuIGFycmF5IG9mIGRlcGVuZGVuY3kgbmFtZXMgYXMgdGhlIGAkaW5qZWN0YCBwcm9wZXJ0eS5cbiAqXG4gKiBgYGBqc1xuICogaW5qZWN0ZWRGdW5jdGlvbi4kaW5qZWN0ID0gWyAnRm9vU2VydmljZScsICdCYXJTZXJ2aWNlJyBdO1xuICogZnVuY3Rpb24gaW5qZWN0ZWRGdW5jdGlvbihmcywgYnMpIHtcbiAqICAgLy8gRm9vU2VydmljZSBhbmQgQmFyU2VydmljZSBhcmUgaW5qZWN0ZWQgYXMgZnMgYW5kIGJzIHBhcmFtZXRlcnNcbiAqIH1cbiAqIGBgYFxuICpcbiAqICMjIyBBcnJheSBub3RhdGlvblxuICpcbiAqIEFuIGFycmF5IHByb3ZpZGVzIHRoZSBuYW1lcyBvZiB0aGUgZGVwZW5kZW5jaWVzIHRvIGluamVjdCAoYXMgc3RyaW5ncykuXG4gKiBUaGUgZnVuY3Rpb24gaXMgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgYXJyYXkuXG4gKlxuICogYGBganNcbiAqIFsgJ0Zvb1NlcnZpY2UnLCAnQmFyU2VydmljZScsIGZ1bmN0aW9uIChmcywgYnMpIHtcbiAqICAgLy8gRm9vU2VydmljZSBhbmQgQmFyU2VydmljZSBhcmUgaW5qZWN0ZWQgYXMgZnMgYW5kIGJzIHBhcmFtZXRlcnNcbiAqIH1dXG4gKiBgYGBcbiAqXG4gKiBAdHlwZSB7JEluamVjdG9yTGlrZX1cbiAqL1xuZXhwb3J0IHZhciAkaW5qZWN0b3IgPSB7XG4gICAgLyoqIEdldHMgYW4gb2JqZWN0IGZyb20gREkgYmFzZWQgb24gYSBzdHJpbmcgdG9rZW4gKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBnbG9iYWxzW25hbWVdOyB9LFxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYW4gb2JqZWN0IG5hbWVkIGBuYW1lYCBleGlzdHMgaW4gZ2xvYmFsIERJICovXG4gICAgaGFzOiBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gJGluamVjdG9yLmdldChuYW1lKSAhPSBudWxsOyB9LFxuICAgIC8qKlxuICAgICAqIEluamVjdHMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIGZuIHRoZSBmdW5jdGlvbiB0byBpbmplY3RcbiAgICAgKiBAcGFyYW0gY29udGV4dCB0aGUgZnVuY3Rpb24ncyBgdGhpc2AgYmluZGluZ1xuICAgICAqIEBwYXJhbSBsb2NhbHMgQW4gb2JqZWN0IHdpdGggYWRkaXRpb25hbCBESSB0b2tlbnMgYW5kIHZhbHVlcywgc3VjaCBhcyBgeyBzb21lVG9rZW46IHsgZm9vOiAxIH0gfWBcbiAgICAgKi9cbiAgICBpbnZva2U6IGZ1bmN0aW9uIChmbiwgY29udGV4dCwgbG9jYWxzKSB7XG4gICAgICAgIHZhciBhbGwgPSBleHRlbmQoe30sIGdsb2JhbHMsIGxvY2FscyB8fCB7fSk7XG4gICAgICAgIHZhciBwYXJhbXMgPSAkaW5qZWN0b3IuYW5ub3RhdGUoZm4pO1xuICAgICAgICB2YXIgZW5zdXJlRXhpc3QgPSBhc3NlcnRQcmVkaWNhdGUoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gYWxsLmhhc093blByb3BlcnR5KGtleSk7IH0sIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIFwiREkgY2FuJ3QgZmluZCBpbmplY3RhYmxlOiAnXCIgKyBrZXkgKyBcIidcIjsgfSk7XG4gICAgICAgIHZhciBhcmdzID0gcGFyYW1zLmZpbHRlcihlbnN1cmVFeGlzdCkubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiBhbGxbeF07IH0pO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpXG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBmbi5zbGljZSgtMSlbMF0uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24ncyBkZXBlbmRlbmNpZXNcbiAgICAgKlxuICAgICAqIEFuYWx5emVzIGEgZnVuY3Rpb24gKG9yIGFycmF5KSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBESSB0b2tlbnMgdGhhdCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXG4gICAgICogQHJldHVybiBhbiBhcnJheSBvZiBgc3RyaW5nYHNcbiAgICAgKi9cbiAgICBhbm5vdGF0ZTogZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlmICghaXNJbmplY3RhYmxlKGZuKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBhbiBpbmplY3RhYmxlIGZ1bmN0aW9uOiBcIiArIGZuKTtcbiAgICAgICAgaWYgKGZuICYmIGZuLiRpbmplY3QpXG4gICAgICAgICAgICByZXR1cm4gZm4uJGluamVjdDtcbiAgICAgICAgaWYgKGlzQXJyYXkoZm4pKVxuICAgICAgICAgICAgcmV0dXJuIGZuLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgdmFyIGZuU3RyID0gZm4udG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyk7XG4gICAgICAgIHZhciByZXN1bHQgPSBmblN0ci5zbGljZShmblN0ci5pbmRleE9mKCcoJykgKyAxLCBmblN0ci5pbmRleE9mKCcpJykpLm1hdGNoKEFSR1VNRU5UX05BTUVTKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBbXTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluamVjdG9yLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBpZGVudGl0eSwgdW5uZXN0UiwgaXNBcnJheSwgc3BsaXRFcXVhbCwgc3BsaXRIYXNoLCBzcGxpdFF1ZXJ5LCB9IGZyb20gJy4uL2NvbW1vbic7XG5leHBvcnQgdmFyIGtleVZhbHNUb09iamVjdFIgPSBmdW5jdGlvbiAoYWNjdW0sIF9hKSB7XG4gICAgdmFyIGtleSA9IF9hWzBdLCB2YWwgPSBfYVsxXTtcbiAgICBpZiAoIWFjY3VtLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgYWNjdW1ba2V5XSA9IHZhbDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheShhY2N1bVtrZXldKSkge1xuICAgICAgICBhY2N1bVtrZXldLnB1c2godmFsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFjY3VtW2tleV0gPSBbYWNjdW1ba2V5XSwgdmFsXTtcbiAgICB9XG4gICAgcmV0dXJuIGFjY3VtO1xufTtcbmV4cG9ydCB2YXIgZ2V0UGFyYW1zID0gZnVuY3Rpb24gKHF1ZXJ5U3RyaW5nKSB7XG4gICAgcmV0dXJuIHF1ZXJ5U3RyaW5nXG4gICAgICAgIC5zcGxpdCgnJicpXG4gICAgICAgIC5maWx0ZXIoaWRlbnRpdHkpXG4gICAgICAgIC5tYXAoc3BsaXRFcXVhbClcbiAgICAgICAgLnJlZHVjZShrZXlWYWxzVG9PYmplY3RSLCB7fSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsKHVybCkge1xuICAgIHZhciBvckVtcHR5U3RyaW5nID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggfHwgJyc7IH07XG4gICAgdmFyIF9hID0gc3BsaXRIYXNoKHVybCkubWFwKG9yRW1wdHlTdHJpbmcpLCBiZWZvcmVoYXNoID0gX2FbMF0sIGhhc2ggPSBfYVsxXTtcbiAgICB2YXIgX2IgPSBzcGxpdFF1ZXJ5KGJlZm9yZWhhc2gpLm1hcChvckVtcHR5U3RyaW5nKSwgcGF0aCA9IF9iWzBdLCBzZWFyY2ggPSBfYlsxXTtcbiAgICByZXR1cm4geyBwYXRoOiBwYXRoLCBzZWFyY2g6IHNlYXJjaCwgaGFzaDogaGFzaCwgdXJsOiB1cmwgfTtcbn1cbmV4cG9ydCB2YXIgYnVpbGRVcmwgPSBmdW5jdGlvbiAobG9jKSB7XG4gICAgdmFyIHBhdGggPSBsb2MucGF0aCgpO1xuICAgIHZhciBzZWFyY2hPYmplY3QgPSBsb2Muc2VhcmNoKCk7XG4gICAgdmFyIGhhc2ggPSBsb2MuaGFzaCgpO1xuICAgIHZhciBzZWFyY2ggPSBPYmplY3Qua2V5cyhzZWFyY2hPYmplY3QpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgcGFyYW0gPSBzZWFyY2hPYmplY3Rba2V5XTtcbiAgICAgICAgdmFyIHZhbHMgPSBpc0FycmF5KHBhcmFtKSA/IHBhcmFtIDogW3BhcmFtXTtcbiAgICAgICAgcmV0dXJuIHZhbHMubWFwKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIGtleSArICc9JyArIHZhbDsgfSk7XG4gICAgfSlcbiAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgLmpvaW4oJyYnKTtcbiAgICByZXR1cm4gcGF0aCArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyAoaGFzaCA/ICcjJyArIGhhc2ggOiAnJyk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGxvY2F0aW9uUGx1Z2luRmFjdG9yeShuYW1lLCBpc0h0bWw1LCBzZXJ2aWNlQ2xhc3MsIGNvbmZpZ3VyYXRpb25DbGFzcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAodWlSb3V0ZXIpIHtcbiAgICAgICAgdmFyIHNlcnZpY2UgPSAodWlSb3V0ZXIubG9jYXRpb25TZXJ2aWNlID0gbmV3IHNlcnZpY2VDbGFzcyh1aVJvdXRlcikpO1xuICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9ICh1aVJvdXRlci5sb2NhdGlvbkNvbmZpZyA9IG5ldyBjb25maWd1cmF0aW9uQ2xhc3ModWlSb3V0ZXIsIGlzSHRtbDUpKTtcbiAgICAgICAgZnVuY3Rpb24gZGlzcG9zZShyb3V0ZXIpIHtcbiAgICAgICAgICAgIHJvdXRlci5kaXNwb3NlKHNlcnZpY2UpO1xuICAgICAgICAgICAgcm91dGVyLmRpc3Bvc2UoY29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbmFtZTogbmFtZSwgc2VydmljZTogc2VydmljZSwgY29uZmlndXJhdGlvbjogY29uZmlndXJhdGlvbiwgZGlzcG9zZTogZGlzcG9zZSB9O1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCIvKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi8gLyoqICovXG5pbXBvcnQgeyBkZXJlZ0FsbCwgaXNEZWZpbmVkLCByZW1vdmVGcm9tLCByb290IH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7IGJ1aWxkVXJsLCBnZXRQYXJhbXMsIHBhcnNlVXJsIH0gZnJvbSAnLi91dGlscyc7XG4vKiogQSBiYXNlIGBMb2NhdGlvblNlcnZpY2VzYCAqL1xudmFyIEJhc2VMb2NhdGlvblNlcnZpY2VzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhc2VMb2NhdGlvblNlcnZpY2VzKHJvdXRlciwgZmlyZUFmdGVyVXBkYXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZmlyZUFmdGVyVXBkYXRlID0gZmlyZUFmdGVyVXBkYXRlO1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZ0KSB7IHJldHVybiBfdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IHJldHVybiBjYihldnQpOyB9KTsgfTtcbiAgICAgICAgdGhpcy5oYXNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyc2VVcmwoX3RoaXMuX2dldCgpKS5oYXNoOyB9O1xuICAgICAgICB0aGlzLnBhdGggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBwYXJzZVVybChfdGhpcy5fZ2V0KCkpLnBhdGg7IH07XG4gICAgICAgIHRoaXMuc2VhcmNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0UGFyYW1zKHBhcnNlVXJsKF90aGlzLl9nZXQoKSkuc2VhcmNoKTsgfTtcbiAgICAgICAgdGhpcy5fbG9jYXRpb24gPSByb290LmxvY2F0aW9uO1xuICAgICAgICB0aGlzLl9oaXN0b3J5ID0gcm9vdC5oaXN0b3J5O1xuICAgIH1cbiAgICBCYXNlTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUudXJsID0gZnVuY3Rpb24gKHVybCwgcmVwbGFjZSkge1xuICAgICAgICBpZiAocmVwbGFjZSA9PT0gdm9pZCAwKSB7IHJlcGxhY2UgPSB0cnVlOyB9XG4gICAgICAgIGlmIChpc0RlZmluZWQodXJsKSAmJiB1cmwgIT09IHRoaXMuX2dldCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXQobnVsbCwgbnVsbCwgdXJsLCByZXBsYWNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpcmVBZnRlclVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyByZXR1cm4gY2IoeyB1cmw6IHVybCB9KTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1aWxkVXJsKHRoaXMpO1xuICAgIH07XG4gICAgQmFzZUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGNiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZUZyb20oX3RoaXMuX2xpc3RlbmVycywgY2IpOyB9O1xuICAgIH07XG4gICAgQmFzZUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XG4gICAgICAgIGRlcmVnQWxsKHRoaXMuX2xpc3RlbmVycyk7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUxvY2F0aW9uU2VydmljZXM7XG59KCkpO1xuZXhwb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2VMb2NhdGlvblNlcnZpY2UuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgcm9vdCwgdHJpbUhhc2hWYWwgfSBmcm9tICcuLi9jb21tb24nO1xuaW1wb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfSBmcm9tICcuL2Jhc2VMb2NhdGlvblNlcnZpY2UnO1xuLyoqIEEgYExvY2F0aW9uU2VydmljZXNgIHRoYXQgdXNlcyB0aGUgYnJvd3NlciBoYXNoIFwiI1wiIHRvIGdldC9zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gKi9cbnZhciBIYXNoTG9jYXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhIYXNoTG9jYXRpb25TZXJ2aWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEhhc2hMb2NhdGlvblNlcnZpY2Uocm91dGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJvdXRlciwgZmFsc2UpIHx8IHRoaXM7XG4gICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIF90aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cmltSGFzaFZhbCh0aGlzLl9sb2NhdGlvbi5oYXNoKTtcbiAgICB9O1xuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbiAoc3RhdGUsIHRpdGxlLCB1cmwsIHJlcGxhY2UpIHtcbiAgICAgICAgdGhpcy5fbG9jYXRpb24uaGFzaCA9IHVybDtcbiAgICB9O1xuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIHJvdXRlcik7XG4gICAgICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuX2xpc3RlbmVyKTtcbiAgICB9O1xuICAgIHJldHVybiBIYXNoTG9jYXRpb25TZXJ2aWNlO1xufShCYXNlTG9jYXRpb25TZXJ2aWNlcykpO1xuZXhwb3J0IHsgSGFzaExvY2F0aW9uU2VydmljZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzaExvY2F0aW9uU2VydmljZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBCYXNlTG9jYXRpb25TZXJ2aWNlcyB9IGZyb20gJy4vYmFzZUxvY2F0aW9uU2VydmljZSc7XG4vKiogQSBgTG9jYXRpb25TZXJ2aWNlc2AgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gZnJvbSBhbiBpbi1tZW1vcnkgb2JqZWN0ICovXG52YXIgTWVtb3J5TG9jYXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZW1vcnlMb2NhdGlvblNlcnZpY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVtb3J5TG9jYXRpb25TZXJ2aWNlKHJvdXRlcikge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcm91dGVyLCB0cnVlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNZW1vcnlMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91cmw7XG4gICAgfTtcbiAgICBNZW1vcnlMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbiAoc3RhdGUsIHRpdGxlLCB1cmwsIHJlcGxhY2UpIHtcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xuICAgIH07XG4gICAgcmV0dXJuIE1lbW9yeUxvY2F0aW9uU2VydmljZTtcbn0oQmFzZUxvY2F0aW9uU2VydmljZXMpKTtcbmV4cG9ydCB7IE1lbW9yeUxvY2F0aW9uU2VydmljZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVtb3J5TG9jYXRpb25TZXJ2aWNlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfSBmcm9tICcuL2Jhc2VMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgcm9vdCwgc3BsaXRIYXNoLCBzcGxpdFF1ZXJ5LCBzdHJpcExhc3RQYXRoRWxlbWVudCB9IGZyb20gJy4uL2NvbW1vbic7XG4vKipcbiAqIEEgYExvY2F0aW9uU2VydmljZXNgIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIHVzaW5nIHRoZSBicm93c2VyJ3MgYGxvY2F0aW9uYCBhbmQgYGhpc3RvcnlgIGFwaXNcbiAqXG4gKiBVc2VzIGBoaXN0b3J5LnB1c2hTdGF0ZWAgYW5kIGBoaXN0b3J5LnJlcGxhY2VTdGF0ZWBcbiAqL1xudmFyIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZShyb3V0ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcm91dGVyLCB0cnVlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fY29uZmlnID0gcm91dGVyLnVybFNlcnZpY2UuY29uZmlnO1xuICAgICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgX3RoaXMuX2xpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYmFzZSBwcmVmaXggd2l0aG91dDpcbiAgICAgKiAtIHRyYWlsaW5nIHNsYXNoXG4gICAgICogLSB0cmFpbGluZyBmaWxlbmFtZVxuICAgICAqIC0gcHJvdG9jb2wgYW5kIGhvc3RuYW1lXG4gICAgICpcbiAgICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZS8nPiwgdGhpcyByZXR1cm5zICcvYmFzZScuXG4gICAgICogSWYgPGJhc2UgaHJlZj0nL2Zvby9iYXNlLyc+LCB0aGlzIHJldHVybnMgJy9mb28vYmFzZScuXG4gICAgICogSWYgPGJhc2UgaHJlZj0nL2Jhc2UvaW5kZXguaHRtbCc+LCB0aGlzIHJldHVybnMgJy9iYXNlJy5cbiAgICAgKiBJZiA8YmFzZSBocmVmPSdodHRwOi8vbG9jYWxob3N0OjgwODAvYmFzZS9pbmRleC5odG1sJz4sIHRoaXMgcmV0dXJucyAnL2Jhc2UnLlxuICAgICAqIElmIDxiYXNlIGhyZWY9Jy9iYXNlJz4sIHRoaXMgcmV0dXJucyAnJy5cbiAgICAgKiBJZiA8YmFzZSBocmVmPSdodHRwOi8vbG9jYWxob3N0OjgwODAnPiwgdGhpcyByZXR1cm5zICcnLlxuICAgICAqIElmIDxiYXNlIGhyZWY9J2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC8nPiwgdGhpcyByZXR1cm5zICcnLlxuICAgICAqXG4gICAgICogU2VlOiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL2Rldi9zZW1hbnRpY3MuaHRtbCN0aGUtYmFzZS1lbGVtZW50XG4gICAgICovXG4gICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZ2V0QmFzZVByZWZpeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmlwTGFzdFBhdGhFbGVtZW50KHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpKTtcbiAgICB9O1xuICAgIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX2dldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5fbG9jYXRpb24sIHBhdGhuYW1lID0gX2EucGF0aG5hbWUsIGhhc2ggPSBfYS5oYXNoLCBzZWFyY2ggPSBfYS5zZWFyY2g7XG4gICAgICAgIHNlYXJjaCA9IHNwbGl0UXVlcnkoc2VhcmNoKVsxXTsgLy8gc3RyaXAgPyBpZiBmb3VuZFxuICAgICAgICBoYXNoID0gc3BsaXRIYXNoKGhhc2gpWzFdOyAvLyBzdHJpcCAjIGlmIGZvdW5kXG4gICAgICAgIHZhciBiYXNlUHJlZml4ID0gdGhpcy5fZ2V0QmFzZVByZWZpeCgpO1xuICAgICAgICB2YXIgZXhhY3RCYXNlSHJlZk1hdGNoID0gcGF0aG5hbWUgPT09IHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpO1xuICAgICAgICB2YXIgc3RhcnRzV2l0aEJhc2UgPSBwYXRobmFtZS5zdWJzdHIoMCwgYmFzZVByZWZpeC5sZW5ndGgpID09PSBiYXNlUHJlZml4O1xuICAgICAgICBwYXRobmFtZSA9IGV4YWN0QmFzZUhyZWZNYXRjaCA/ICcvJyA6IHN0YXJ0c1dpdGhCYXNlID8gcGF0aG5hbWUuc3Vic3RyaW5nKGJhc2VQcmVmaXgubGVuZ3RoKSA6IHBhdGhuYW1lO1xuICAgICAgICByZXR1cm4gcGF0aG5hbWUgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgKGhhc2ggPyAnIycgKyBoYXNoIDogJycpO1xuICAgIH07XG4gICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fc2V0ID0gZnVuY3Rpb24gKHN0YXRlLCB0aXRsZSwgdXJsLCByZXBsYWNlKSB7XG4gICAgICAgIHZhciBiYXNlUHJlZml4ID0gdGhpcy5fZ2V0QmFzZVByZWZpeCgpO1xuICAgICAgICB2YXIgc2xhc2ggPSB1cmwgJiYgdXJsWzBdICE9PSAnLycgPyAnLycgOiAnJztcbiAgICAgICAgdmFyIGZ1bGxVcmwgPSB1cmwgPT09ICcnIHx8IHVybCA9PT0gJy8nID8gdGhpcy5fY29uZmlnLmJhc2VIcmVmKCkgOiBiYXNlUHJlZml4ICsgc2xhc2ggKyB1cmw7XG4gICAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5LnJlcGxhY2VTdGF0ZShzdGF0ZSwgdGl0bGUsIGZ1bGxVcmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoU3RhdGUoc3RhdGUsIHRpdGxlLCBmdWxsVXJsKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKHJvdXRlcikge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLCByb3V0ZXIpO1xuICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5fbGlzdGVuZXIpO1xuICAgIH07XG4gICAgcmV0dXJuIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZTtcbn0oQmFzZUxvY2F0aW9uU2VydmljZXMpKTtcbmV4cG9ydCB7IFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLmpzLm1hcCIsImltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbi8qKiBBIGBMb2NhdGlvbkNvbmZpZ2AgbW9jayB0aGF0IGdldHMvc2V0cyBhbGwgY29uZmlnIGZyb20gYW4gaW4tbWVtb3J5IG9iamVjdCAqL1xudmFyIE1lbW9yeUxvY2F0aW9uQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1lbW9yeUxvY2F0aW9uQ29uZmlnKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSBub29wO1xuICAgICAgICB0aGlzLl9iYXNlSHJlZiA9ICcnO1xuICAgICAgICB0aGlzLl9wb3J0ID0gODA7XG4gICAgICAgIHRoaXMuX3Byb3RvY29sID0gJ2h0dHAnO1xuICAgICAgICB0aGlzLl9ob3N0ID0gJ2xvY2FsaG9zdCc7XG4gICAgICAgIHRoaXMuX2hhc2hQcmVmaXggPSAnJztcbiAgICAgICAgdGhpcy5wb3J0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX3BvcnQ7IH07XG4gICAgICAgIHRoaXMucHJvdG9jb2wgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fcHJvdG9jb2w7IH07XG4gICAgICAgIHRoaXMuaG9zdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9ob3N0OyB9O1xuICAgICAgICB0aGlzLmJhc2VIcmVmID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2Jhc2VIcmVmOyB9O1xuICAgICAgICB0aGlzLmh0bWw1TW9kZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICAgICAgICB0aGlzLmhhc2hQcmVmaXggPSBmdW5jdGlvbiAobmV3dmFsKSB7IHJldHVybiAoaXNEZWZpbmVkKG5ld3ZhbCkgPyAoX3RoaXMuX2hhc2hQcmVmaXggPSBuZXd2YWwpIDogX3RoaXMuX2hhc2hQcmVmaXgpOyB9O1xuICAgIH1cbiAgICByZXR1cm4gTWVtb3J5TG9jYXRpb25Db25maWc7XG59KCkpO1xuZXhwb3J0IHsgTWVtb3J5TG9jYXRpb25Db25maWcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbW9yeUxvY2F0aW9uQ29uZmlnLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBpc0RlZmluZWQsIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuLyoqIEEgYExvY2F0aW9uQ29uZmlnYCB0aGF0IGRlbGVnYXRlcyB0byB0aGUgYnJvd3NlcidzIGBsb2NhdGlvbmAgb2JqZWN0ICovXG52YXIgQnJvd3NlckxvY2F0aW9uQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJyb3dzZXJMb2NhdGlvbkNvbmZpZyhyb3V0ZXIsIF9pc0h0bWw1KSB7XG4gICAgICAgIGlmIChfaXNIdG1sNSA9PT0gdm9pZCAwKSB7IF9pc0h0bWw1ID0gZmFsc2U7IH1cbiAgICAgICAgdGhpcy5faXNIdG1sNSA9IF9pc0h0bWw1O1xuICAgICAgICB0aGlzLl9iYXNlSHJlZiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5faGFzaFByZWZpeCA9ICcnO1xuICAgIH1cbiAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLnBvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChsb2NhdGlvbi5wb3J0KSB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKGxvY2F0aW9uLnBvcnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb3RvY29sKCkgPT09ICdodHRwcycgPyA0NDMgOiA4MDtcbiAgICB9O1xuICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUucHJvdG9jb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5yZXBsYWNlKC86L2csICcnKTtcbiAgICB9O1xuICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUuaG9zdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhvc3RuYW1lO1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5odG1sNU1vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0h0bWw1O1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5oYXNoUHJlZml4ID0gZnVuY3Rpb24gKG5ld3ByZWZpeCkge1xuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKG5ld3ByZWZpeCkgPyAodGhpcy5faGFzaFByZWZpeCA9IG5ld3ByZWZpeCkgOiB0aGlzLl9oYXNoUHJlZml4O1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5iYXNlSHJlZiA9IGZ1bmN0aW9uIChocmVmKSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQoaHJlZikpXG4gICAgICAgICAgICB0aGlzLl9iYXNlSHJlZiA9IGhyZWY7XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh0aGlzLl9iYXNlSHJlZikpXG4gICAgICAgICAgICB0aGlzLl9iYXNlSHJlZiA9IHRoaXMuZ2V0QmFzZUhyZWYoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VIcmVmO1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5nZXRCYXNlSHJlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhc2VUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdO1xuICAgICAgICBpZiAoIWJhc2VUYWcgfHwgIWJhc2VUYWcuaHJlZilcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5wYXRobmFtZSB8fCAnLyc7XG4gICAgICAgIHJldHVybiBiYXNlVGFnLmhyZWYucmVwbGFjZSgvXihodHRwcz86KT9cXC9cXC9bXi9dKi8sICcnKTtcbiAgICB9O1xuICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICByZXR1cm4gQnJvd3NlckxvY2F0aW9uQ29uZmlnO1xufSgpKTtcbmV4cG9ydCB7IEJyb3dzZXJMb2NhdGlvbkNvbmZpZyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3NlckxvY2F0aW9uQ29uZmlnLmpzLm1hcCIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBCcm93c2VyTG9jYXRpb25Db25maWcgfSBmcm9tICcuL2Jyb3dzZXJMb2NhdGlvbkNvbmZpZyc7XG5pbXBvcnQgeyBIYXNoTG9jYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9oYXNoTG9jYXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IGxvY2F0aW9uUGx1Z2luRmFjdG9yeSB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9wdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgTWVtb3J5TG9jYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9tZW1vcnlMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgTWVtb3J5TG9jYXRpb25Db25maWcgfSBmcm9tICcuL21lbW9yeUxvY2F0aW9uQ29uZmlnJztcbmltcG9ydCB7ICRpbmplY3RvciB9IGZyb20gJy4vaW5qZWN0b3InO1xuaW1wb3J0IHsgJHEgfSBmcm9tICcuL3EnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmV4cG9ydCBmdW5jdGlvbiBzZXJ2aWNlc1BsdWdpbihyb3V0ZXIpIHtcbiAgICBzZXJ2aWNlcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gICAgc2VydmljZXMuJHEgPSAkcTtcbiAgICByZXR1cm4geyBuYW1lOiAndmFuaWxsYS5zZXJ2aWNlcycsICRxOiAkcSwgJGluamVjdG9yOiAkaW5qZWN0b3IsIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0gfTtcbn1cbi8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdXNlcyB0aGUgYnJvd3NlciBoYXNoIHRvIGdldC9zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gKi9cbmV4cG9ydCB2YXIgaGFzaExvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KCd2YW5pbGxhLmhhc2hCYW5nTG9jYXRpb24nLCBmYWxzZSwgSGFzaExvY2F0aW9uU2VydmljZSwgQnJvd3NlckxvY2F0aW9uQ29uZmlnKTtcbi8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gdXNpbmcgdGhlIGJyb3dzZXIncyBgbG9jYXRpb25gIGFuZCBgaGlzdG9yeWAgYXBpcyAqL1xuZXhwb3J0IHZhciBwdXNoU3RhdGVMb2NhdGlvblBsdWdpbiA9IGxvY2F0aW9uUGx1Z2luRmFjdG9yeSgndmFuaWxsYS5wdXNoU3RhdGVMb2NhdGlvbicsIHRydWUsIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSwgQnJvd3NlckxvY2F0aW9uQ29uZmlnKTtcbi8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gZnJvbSBhbiBpbi1tZW1vcnkgb2JqZWN0ICovXG5leHBvcnQgdmFyIG1lbW9yeUxvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KCd2YW5pbGxhLm1lbW9yeUxvY2F0aW9uJywgZmFsc2UsIE1lbW9yeUxvY2F0aW9uU2VydmljZSwgTWVtb3J5TG9jYXRpb25Db25maWcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGx1Z2lucy5qcy5tYXAiLCIvKipcbiAqICMgQ29yZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzXG4gKlxuICogVGhlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMgdGhhdCBhcmUgY29yZSB0byB1aS1yb3V0ZXIgYW5kIGRvIG5vdCBiZWxvbmdcbiAqIHRvIGEgbW9yZSBzcGVjaWZpYyBzdWJzeXN0ZW0gKHN1Y2ggYXMgcmVzb2x2ZSkuXG4gKlxuICogQGNvcmVhcGlcbiAqIEBwcmVmZXJyZWRcbiAqIEBtb2R1bGUgY29yZVxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFVJUm91dGVyUGx1Z2luQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVSVJvdXRlclBsdWdpbkJhc2UoKSB7XG4gICAgfVxuICAgIFVJUm91dGVyUGx1Z2luQmFzZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyb3V0ZXIpIHsgfTtcbiAgICByZXR1cm4gVUlSb3V0ZXJQbHVnaW5CYXNlO1xufSgpKTtcbmV4cG9ydCB7IFVJUm91dGVyUGx1Z2luQmFzZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJmYWNlLmpzLm1hcCIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgY29tbW9uXG4gKi8gLyoqICovXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL3BhcmFtcy9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL3BhdGgvaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi9yZXNvbHZlL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGUvaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi90cmFuc2l0aW9uL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vdXJsL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vdmlldy9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL2dsb2JhbHMnO1xuZXhwb3J0ICogZnJvbSAnLi9yb3V0ZXInO1xuZXhwb3J0ICogZnJvbSAnLi92YW5pbGxhJztcbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=